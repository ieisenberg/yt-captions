[
  {
    "text": "you know if you can't do the napkin math it's probably also too early to go and actually implement the system um like I",
    "start": "40",
    "end": "5879"
  },
  {
    "text": "call this a programming through the wall when you just like keep keep writing code and it's like oh I'm almost there and then you just write code a little",
    "start": "5879",
    "end": "11639"
  },
  {
    "text": "bit harder right when in a lot of cases you just want to step back and and think about the system and learn a little bit",
    "start": "11639",
    "end": "16640"
  },
  {
    "text": "more about it but I mean I don't mean to say here that like All Tech problems can be solved by just sitting and um with",
    "start": "16640",
    "end": "23240"
  },
  {
    "text": "with like you know a piece of paper and a pen and doing all of this right in a lot of cases you just need more information from actually like writing",
    "start": "23240",
    "end": "30679"
  },
  {
    "text": "some code and and you can often get stuck in a rod of just analysis paralysis but I think that napkin math",
    "start": "30679",
    "end": "36040"
  },
  {
    "text": "plays a bigger role than than and could play a bigger role than it does now for for a lot of",
    "start": "36040",
    "end": "42719"
  },
  {
    "text": "projects B with for change log is provided by fastly learn more at fastly.com we move fast and fix things",
    "start": "42719",
    "end": "50280"
  },
  {
    "text": "here at change law because of rbar check them out at rar.com and we're hosted on Leno Cloud servers head to lin.com",
    "start": "50280",
    "end": "58920"
  },
  {
    "text": "changelog [Music] what up friends you might not be aware but we've been partnering with Leno",
    "start": "58920",
    "end": "64878"
  },
  {
    "text": "since 2016 that's a long time ago way back when we first launched our open",
    "start": "64879",
    "end": "69960"
  },
  {
    "text": "source platform that you now see at changel law.com Leno was there to help us and we are so grateful fast forward",
    "start": "69960",
    "end": "77960"
  },
  {
    "text": "several years now and lenoe is still in our corner behind the scenes helping us",
    "start": "77960",
    "end": "83159"
  },
  {
    "text": "to ensure we're running on the very best cloud infrastructure out there we trust lenoe they keep it fast and they keep it",
    "start": "83159",
    "end": "90000"
  },
  {
    "text": "simple check them out at l.com",
    "start": "90000",
    "end": "95520"
  },
  {
    "text": "[Music]",
    "start": "96610",
    "end": "103119"
  },
  {
    "text": "changelog welcome back everyone this is the change logo podcast featuring the hackers the leaders and the innovators",
    "start": "103119",
    "end": "110439"
  },
  {
    "text": "in the world of software I'm Adis kovak editor-in Chief here change log on today's show we're talking with Simon",
    "start": "110439",
    "end": "116159"
  },
  {
    "text": "esolen principal engineer at Shopify about how he uses a concept called napkin math where use first principal",
    "start": "116159",
    "end": "122680"
  },
  {
    "text": "thinking to estimate systems without writing any",
    "start": "122680",
    "end": "127560"
  },
  {
    "text": "code so we have Simon here principal engineer at Shopify Simon welcome to the",
    "start": "130239",
    "end": "136040"
  },
  {
    "text": "change log thank you so much we're happy to have you you're doing some interesting stuff in the world of learning and advancing as a developer",
    "start": "136040",
    "end": "143200"
  },
  {
    "text": "you have some really cool napkin math stuff to tell us about but a lot of this has come out of your experience working",
    "start": "143200",
    "end": "149239"
  },
  {
    "text": "at shif through crazy amounts of growth why do you tell us that your Shopify Journey yeah sure so I joined Shopify in",
    "start": "149239",
    "end": "157080"
  },
  {
    "text": "about 2013 and back then we were still up in ears to 100 or maybe a th000",
    "start": "157080",
    "end": "163159"
  },
  {
    "text": "requests per second and now we're flying somewhere around 100,000 or or more requests per second and I've been really",
    "start": "163159",
    "end": "169959"
  },
  {
    "text": "really fortunate to be part of that Journey on the infrastructure side and just seeing us through every level of",
    "start": "169959",
    "end": "175760"
  },
  {
    "text": "that migrating from our own on-prem to the cloud moving all of our shops between shards sharding in the first",
    "start": "175760",
    "end": "182239"
  },
  {
    "text": "place running out of multiple regions architecting for multiple continents running shops out of multiple regions",
    "start": "182239",
    "end": "187920"
  },
  {
    "text": "and a lot of the kind of foundational architecture that underpins the Shopify that we run today and yeah out of that I",
    "start": "187920",
    "end": "194720"
  },
  {
    "text": "have spent a lot of time having to to learn about all of these different things I I don't come from an academic background I had some catching up to do",
    "start": "194720",
    "end": "201840"
  },
  {
    "text": "which meant you know trying to read the TCP book the first time you you encounter these kinds of problems and",
    "start": "201840",
    "end": "207560"
  },
  {
    "text": "catching up as much as possible and I think that that's a that's a pretty healthy mindset to maintain for as long",
    "start": "207560",
    "end": "212799"
  },
  {
    "text": "as possible yeah well you may have overcompensated cuz now you're out there teaching other people these things which",
    "start": "212799",
    "end": "218200"
  },
  {
    "text": "is a a cool shift Shopify is such a success story it's pretty amazing and I",
    "start": "218200",
    "end": "223959"
  },
  {
    "text": "think Adam you and I were talking about the other day I said maybe the most valuable company in Canada at this point or one of the top ones by market cap and",
    "start": "223959",
    "end": "231959"
  },
  {
    "text": "maybe rails at Ruby on Rails monolith biggest success story in pure capitalistic terms just an amazing",
    "start": "231959",
    "end": "238599"
  },
  {
    "text": "amazing growth amazing company one that uh we've been watching for many years and it's probably been cool to be there",
    "start": "238599",
    "end": "244799"
  },
  {
    "text": "on the inside and uh putting out the fires as as it grows well one thing that you are a part of which we aren't going",
    "start": "244799",
    "end": "250239"
  },
  {
    "text": "to talk about too much today but we're going to talk about a lot in an upcoming episode was a recent rewrite or",
    "start": "250239",
    "end": "256040"
  },
  {
    "text": "reimplementation of the storefront uh no longer a monolith you",
    "start": "256040",
    "end": "261079"
  },
  {
    "text": "want to just give us like a 30 seconds on that so we can tease it up for a bigger show later absolutely so we built",
    "start": "261079",
    "end": "267919"
  },
  {
    "text": "a team last year to completely redesign how we do the storefront that is serving",
    "start": "267919",
    "end": "273080"
  },
  {
    "text": "of the stores that you see when you browse Shopify we've learned a lot scaling that over the past 15 years or",
    "start": "273080",
    "end": "279440"
  },
  {
    "text": "so and fundamentally it just has some different requirements for how it needs to be run running across multiple data",
    "start": "279440",
    "end": "286199"
  },
  {
    "text": "centers how it does caching and all of these different things and Maxim will talk much more about all of these details and why we didn't D it's still",
    "start": "286199",
    "end": "293199"
  },
  {
    "text": "Ruby but it's now extracted out of the main monolith that still Powers the apis and and all the business logic I had you",
    "start": "293199",
    "end": "300080"
  },
  {
    "text": "seem like a learn by doing kind of person that's very much learn by doing it's like you got to do something for many years and Technologies progress",
    "start": "300080",
    "end": "307080"
  },
  {
    "text": "over time but then developers change the way they come into the into the market being you know less experienced or more",
    "start": "307080",
    "end": "313560"
  },
  {
    "text": "experienced and now being at a position where you've got to do what you're doing now with like learning by doing that's",
    "start": "313560",
    "end": "319560"
  },
  {
    "text": "you seem very much like that where you've been at Shopify a very very long time and it's part of how you think it",
    "start": "319560",
    "end": "325280"
  },
  {
    "text": "seems versus like what I understand is you didn't go to college and you to shif find you've very much progressed there",
    "start": "325280",
    "end": "331880"
  },
  {
    "text": "so as Jared said you're leading in many ways and so rather than having that academic background you kind of have this background of being in the trenches",
    "start": "331880",
    "end": "338759"
  },
  {
    "text": "so to speak you know having to read the book to get through it rather than having taken a course to get your CS",
    "start": "338759",
    "end": "345240"
  },
  {
    "text": "degree for example yeah and I think what was really helpful for me was that when I was in high school I got exposed to",
    "start": "345240",
    "end": "351039"
  },
  {
    "text": "this world of competitive programming where every nation essentially has a national team and because Denmark where",
    "start": "351039",
    "end": "357880"
  },
  {
    "text": "I grew up is a very small country it's it's not super difficult to make it to the national team compared to somewhere like the United States but that really",
    "start": "357880",
    "end": "364840"
  },
  {
    "text": "got me exposed to another level of engineering because before that I had mostly been exposed to you know",
    "start": "364840",
    "end": "370599"
  },
  {
    "text": "JavaScript and Ruby on Rails and PHP but seeing suddenly through these algorithms",
    "start": "370599",
    "end": "376840"
  },
  {
    "text": "and how something like Google might work by understanding a bit more of the computer science was a fascinating",
    "start": "376840",
    "end": "382160"
  },
  {
    "text": "Journey um and then yeah joining Shopify and getting to work on the systems that I'd seen and read about through high",
    "start": "382160",
    "end": "387880"
  },
  {
    "text": "school was was just a dream come true competitive programming jry have you heard of that before is this the first I've heard of it I've never participated",
    "start": "387880",
    "end": "394599"
  },
  {
    "text": "I'd be afraid to do so tell us about it yeah sure so essentially what it is is that it's a bit like an exam room right",
    "start": "394599",
    "end": "401360"
  },
  {
    "text": "so you sit down 5 hours you have a computer and you have an editor and you",
    "start": "401360",
    "end": "407280"
  },
  {
    "text": "have a C++ compiler and that's pretty much it on your table you will find",
    "start": "407280",
    "end": "413039"
  },
  {
    "text": "usually about three problems and the problems might be they range a lot in what they might be so a problem for",
    "start": "413039",
    "end": "419720"
  },
  {
    "text": "example that that I encountered at one point was that you were told that on your machine there are these five",
    "start": "419720",
    "end": "425319"
  },
  {
    "text": "directories One Directory has images that are of impressionist paintings this",
    "start": "425319",
    "end": "431240"
  },
  {
    "text": "one has images that are cubism and so on so you had all these directories and then you had to write your own program",
    "start": "431240",
    "end": "438280"
  },
  {
    "text": "that with this little training data set would be able to take an image that it had never seen before and classified",
    "start": "438280",
    "end": "443680"
  },
  {
    "text": "into one of these five categories is that this is an impressionist painting this is a Cubist painting and so on so",
    "start": "443680",
    "end": "449160"
  },
  {
    "text": "that's might be a task which is a very abstract one and the way that you might solve that is that you might look at what is the average color difference",
    "start": "449160",
    "end": "455639"
  },
  {
    "text": "between the pixels because you can see that that is something that changes a lot based on the different kinds of uh",
    "start": "455639",
    "end": "461319"
  },
  {
    "text": "of paintings right if you have something like cubism where you have these like big areas that are yellow and green and",
    "start": "461319",
    "end": "466520"
  },
  {
    "text": "so on the average color difference is a lot smaller than something more impressionistic right so that's a more",
    "start": "466520",
    "end": "472120"
  },
  {
    "text": "of a free problem um kind of free form ad hoc problem but they might also be a lot more algorithmic in nature so one",
    "start": "472120",
    "end": "479080"
  },
  {
    "text": "for example that I remember is that if you imagine kind of a a grid right of intersections imagine kind of a",
    "start": "479080",
    "end": "485120"
  },
  {
    "text": "Manhattan sort of situation where you have almost a perfect grid and you then know that at each intersection there's a",
    "start": "485120",
    "end": "491919"
  },
  {
    "text": "coffee shop and each coffee shop has a Wi-Fi signal that has a certain radius",
    "start": "491919",
    "end": "497280"
  },
  {
    "text": "and it also has a certain bandwidth and then it says assuming that you can connect to multiple Wi-Fi at the same",
    "start": "497280",
    "end": "502599"
  },
  {
    "text": "time and download on all of them what is the best intersection for you to be in to get maximum bandwidth so that's a",
    "start": "502599",
    "end": "508360"
  },
  {
    "text": "more algorithmic problem so then what you will do is you write a solution to these you upload your C++ program to",
    "start": "508360",
    "end": "514560"
  },
  {
    "text": "what's called a Judge which is an internal the only thing you have access to something running on the internal",
    "start": "514560",
    "end": "519640"
  },
  {
    "text": "Network and then you get back a score somewhere between one and 100 points you",
    "start": "519640",
    "end": "524720"
  },
  {
    "text": "usually get a 100 points if you've solved it the problem to Perfection but also very fast so often you can solve",
    "start": "524720",
    "end": "531760"
  },
  {
    "text": "these problems with a really simple but very slow algorithm and then you can get some points let's say 30 points but then",
    "start": "531760",
    "end": "538200"
  },
  {
    "text": "if you come up with a much faster algorithm you might be able to get up to 100 points um and so you just sit there",
    "start": "538200",
    "end": "543760"
  },
  {
    "text": "for five grueling hours and try to work through these problems and trying to balance you know should I spend more",
    "start": "543760",
    "end": "549480"
  },
  {
    "text": "time on this problem do I have it do I not have it and it's definitely some of the tougher hours in my life sitting in",
    "start": "549480",
    "end": "555160"
  },
  {
    "text": "these exam rooms but also great fun this reminds me of like Survivor or naked in",
    "start": "555160",
    "end": "560279"
  },
  {
    "text": "a PR for coders it's like hope you weren't naked you got the essentials you're in the wilderness you",
    "start": "560279",
    "end": "565760"
  },
  {
    "text": "know the Wilderness get out exactly like an escape room so compare the pressure",
    "start": "565760",
    "end": "572440"
  },
  {
    "text": "the stress the sweat dripping down your brow of competitive programming versus",
    "start": "572440",
    "end": "577519"
  },
  {
    "text": "like a a typical black Thursday at Shopify where you're at Peak you know requests per second and maybe a server",
    "start": "577519",
    "end": "583800"
  },
  {
    "text": "goes down or something inevitably goes wrong is that like equal amounts of stress or is that way more stress",
    "start": "583800",
    "end": "589560"
  },
  {
    "text": "because it's other people's money how do those compare out well it's it's very different right because on on Black",
    "start": "589560",
    "end": "594920"
  },
  {
    "text": "Friday did I say black Thursday said black Thursday yeah yeah it's all it's all good um because the Thursday is when",
    "start": "594920",
    "end": "601640"
  },
  {
    "text": "you make the final changes right and we have kind of a very elaborate plan on what risk you can take a several weeks",
    "start": "601640",
    "end": "607920"
  },
  {
    "text": "in you know we're not going to upgrade the myl version the week of Black Friday in fact we're probably not even going to",
    "start": "607920",
    "end": "613079"
  },
  {
    "text": "do that in November because of the things that can Surface batten down the hatches and hold on for yeah yeah pretty",
    "start": "613079",
    "end": "619040"
  },
  {
    "text": "much keep things the same don't change things much but it's also a really good internal deadline right um in October to",
    "start": "619040",
    "end": "625560"
  },
  {
    "text": "make sure that things get in because suddenly everything multipli right everything multiplies and it's really",
    "start": "625560",
    "end": "631320"
  },
  {
    "text": "the final exam I think it's more the kind of exam where you've build a lot and now it's a bit out of your hands on",
    "start": "631320",
    "end": "637480"
  },
  {
    "text": "Black Friday you can respond to things but there's no more building allowed right so it's a very different kind of",
    "start": "637480",
    "end": "643200"
  },
  {
    "text": "pressure where on Black Friday you have to sit there and monitor and make sure everything is fine we sit in this long",
    "start": "643200",
    "end": "648440"
  },
  {
    "text": "room well we used to before uh before we all we all went remote but we would all",
    "start": "648440",
    "end": "653519"
  },
  {
    "text": "sit in this room and there's monitors all the way around showing our dashboards with how all the systems are",
    "start": "653519",
    "end": "658720"
  },
  {
    "text": "performing in and we just sit there all day and explicitly do not try to do anything hard because if something does",
    "start": "658720",
    "end": "665360"
  },
  {
    "text": "come up we all need to have maximum energy we have an LTE router there in case something goes wrong and we we sit",
    "start": "665360",
    "end": "671240"
  },
  {
    "text": "there and monitor and we have teams doing that around the time and sometimes you know small things will happen and we'll see a little pimple in one of the",
    "start": "671240",
    "end": "678240"
  },
  {
    "text": "graphs and I'll like look in and make sure everything is okay um but it's a different kind of pressure because in",
    "start": "678240",
    "end": "683440"
  },
  {
    "text": "the competitive contest right you sit there and all of your training has come up to that point and you cannot learn",
    "start": "683440",
    "end": "688720"
  },
  {
    "text": "any more algorithms no more data structures you have to perform in that very moment and Black Friday is a little",
    "start": "688720",
    "end": "693880"
  },
  {
    "text": "bit the same but different you have to sit back a little bit and just trust that you've done the work required up to",
    "start": "693880",
    "end": "699360"
  },
  {
    "text": "then yeah how will all this change then with being remote what are your anticipations for November coming up and",
    "start": "699360",
    "end": "706639"
  },
  {
    "text": "the way the world is now in terms of being distributed and not in the same room well the thing is that covid was a",
    "start": "706639",
    "end": "713160"
  },
  {
    "text": "an unexpected Black Friday already right A lot of people started shopping online very very rapidly so to traffic already",
    "start": "713160",
    "end": "719560"
  },
  {
    "text": "did go up a lot so I think we've been prepared because of that and what Black Friday is going to look like this year",
    "start": "719560",
    "end": "725560"
  },
  {
    "text": "who knows right maybe it's going to look a lot smaller than previous years because the steady state has gone up so",
    "start": "725560",
    "end": "730600"
  },
  {
    "text": "much maybe it's going to be a lot bigger for opposite reasons it's it's just very very hard to predict but we're of course",
    "start": "730600",
    "end": "736000"
  },
  {
    "text": "preparing for the worst or the best depending on who who you ask right so",
    "start": "736000",
    "end": "741320"
  },
  {
    "text": "undoubtedly you've come up with a lot of different engineered approaches tips and tricks and weird Solutions share uh",
    "start": "741320",
    "end": "747959"
  },
  {
    "text": "maybe one or two of your EXP exploits at not exploits like zero days but like the things you've done at Shopify over the",
    "start": "747959",
    "end": "753480"
  },
  {
    "text": "years you mentioned pre-show you doing some stuff with mySQL just when you when you have systems at scale you do things",
    "start": "753480",
    "end": "759320"
  },
  {
    "text": "that you have to do things that other Engineers don't have to think about because you hit up against the edges of certain Technologies and surely you've",
    "start": "759320",
    "end": "765680"
  },
  {
    "text": "done that over the years yeah I think maybe two that come to mind through history here are one would be when we",
    "start": "765680",
    "end": "772079"
  },
  {
    "text": "probably the the biggest project or the biggest project that I did the earliest was our our potting project so",
    "start": "772079",
    "end": "777639"
  },
  {
    "text": "essentially we've done charting so essentially taking our database and and splitting it into multiple and that was done around the same time I joined and",
    "start": "777639",
    "end": "784040"
  },
  {
    "text": "not by me but by other teams but we wanted to extend that even further so that we could have essentially these",
    "start": "784040",
    "end": "789079"
  },
  {
    "text": "groups of shops that live together and are isolated together and those shops",
    "start": "789079",
    "end": "794120"
  },
  {
    "text": "should be able to run in multiple data centers because before that we would have one data center all of the shops would be active in that data center if",
    "start": "794120",
    "end": "800399"
  },
  {
    "text": "something went horribly wrong we would fail all of them over to the other data center but we wanted to isolate these shops in a way where we could run them",
    "start": "800399",
    "end": "807399"
  },
  {
    "text": "out of multiple data centers um at the same time that was a lot of engineering effort to make sure that there's nothing",
    "start": "807399",
    "end": "813360"
  },
  {
    "text": "relying on the fact that everything is in one data center at a time so that was one of the biggest projects that I did a",
    "start": "813360",
    "end": "818639"
  },
  {
    "text": "few years ago with a really really good team this year one of the things that I'm most excited about that we worked on",
    "start": "818639",
    "end": "824800"
  },
  {
    "text": "was that a lot of my focus has been around capacity planning and resiliency so essentially finding out that when a",
    "start": "824800",
    "end": "830800"
  },
  {
    "text": "system becomes slow how do you make sure that it doesn't jam up the entire system it's a lot worse when a database is slow",
    "start": "830800",
    "end": "837480"
  },
  {
    "text": "than if it's down because it can clog up the systems and cause cues in all these different places and cause much more",
    "start": "837480",
    "end": "843279"
  },
  {
    "text": "cascading failures and one of the things that we've had great success with here is this technique called load shedding",
    "start": "843279",
    "end": "849040"
  },
  {
    "text": "the idea behind load shedding is essentially that when a system is overloaded or close to be overloaded you",
    "start": "849040",
    "end": "854959"
  },
  {
    "text": "want to start prioritizing what type of traffic that you okay and that you send through to the system so if we have a",
    "start": "854959",
    "end": "861320"
  },
  {
    "text": "store that is having a lot of malicious traffic or some kind of sophisticated dos we want to make sure that we start",
    "start": "861320",
    "end": "867480"
  },
  {
    "text": "to drop that traffic before before we start to draft the traffic traffic out other Merchants to protect the platform",
    "start": "867480",
    "end": "873000"
  },
  {
    "text": "so we've done a lot of work in that and we've done a lot of work at that at the edge so that the low balancer can prioritize traffic to make sure that our",
    "start": "873000",
    "end": "879399"
  },
  {
    "text": "Merchants have as much uptime as possible but we wanted to go even further and start providing that at the database level one of the things that to",
    "start": "879399",
    "end": "886759"
  },
  {
    "text": "me is very disappointing about the database realm today is that a lot of companies are SAS companies right",
    "start": "886759",
    "end": "893079"
  },
  {
    "text": "they're multi-tenant companies and theyve run all these tencies on one or a few databases but one of these these",
    "start": "893079",
    "end": "900160"
  },
  {
    "text": "tenants might have a disproportionate impact on that database they might have an API client that is doing a lot more",
    "start": "900160",
    "end": "906639"
  },
  {
    "text": "request than anyone else or they might have a um a customer that has a million",
    "start": "906639",
    "end": "912040"
  },
  {
    "text": "orders because of some peculiarity in the way that they work so you have all of this cardinality and all of this",
    "start": "912040",
    "end": "917320"
  },
  {
    "text": "uniqueness to the merchants or your customer and that's not just a Shopify problem that's a SAS problem because",
    "start": "917320",
    "end": "924320"
  },
  {
    "text": "what you get with SAS is that you have you get these cost efficiencies of running on the same infrastructure but I don't think the infrastructure has",
    "start": "924320",
    "end": "929680"
  },
  {
    "text": "really caught up to that so in a database today you know it's not you don't create a schema for every database",
    "start": "929680",
    "end": "935240"
  },
  {
    "text": "my SQL would scream at you if you try to do that when you have enough tenants because it's just not made for that so",
    "start": "935240",
    "end": "941440"
  },
  {
    "text": "it doesn't really give you any Primitives to to be able to do that and by default the way you design your database is really not set up for multi-",
    "start": "941440",
    "end": "947480"
  },
  {
    "text": "tendency at all so to go back maybe to this example of a single tendent overwhelming the",
    "start": "947480",
    "end": "953560"
  },
  {
    "text": "system myo or postgress or any there's no database that has a good mechanism for prior prioritizing traffic between",
    "start": "953560",
    "end": "959839"
  },
  {
    "text": "these Merchants so what we have been looking at was that we found out that in the MySQL protocol you can send an",
    "start": "959839",
    "end": "967040"
  },
  {
    "text": "arbitrary string back with the Corey so we thought what if along with the Corey",
    "start": "967040",
    "end": "972319"
  },
  {
    "text": "results you know this could be um a bunch of customers a bunch of orders whatever it might be what if we also",
    "start": "972319",
    "end": "977800"
  },
  {
    "text": "sent back to the application how many resources that Corey took how many NCS",
    "start": "977800",
    "end": "983319"
  },
  {
    "text": "on CPU how much IO time how much memory was loaded into the page cache in my SQL",
    "start": "983319",
    "end": "988680"
  },
  {
    "text": "how expensive was this query the kinds of things that you would see in a slow query log and so you might think why is",
    "start": "988680",
    "end": "994040"
  },
  {
    "text": "that useful like you're going to look at that information well imagine an API throttle that is not some arbitrary",
    "start": "994040",
    "end": "999680"
  },
  {
    "text": "number taken out of a hat of you can do 100 requests per second but rather the API throttle was actually based on how",
    "start": "999680",
    "end": "1005959"
  },
  {
    "text": "the database is doing and how heavy the queries that your apis calls are causing actually are right doing API throttling",
    "start": "1005959",
    "end": "1013600"
  },
  {
    "text": "with something like graphql on an external API is incredibly diff",
    "start": "1013600",
    "end": "1018680"
  },
  {
    "text": "difficult to do correctly and you're almost always going to either underestimate the Cory complexity or overestimate it but if we build systems",
    "start": "1018680",
    "end": "1025839"
  },
  {
    "text": "that have multi tency and databases that have multi-tenancy built in to that caliber where they can feed it back to",
    "start": "1025839",
    "end": "1031160"
  },
  {
    "text": "the API throttling that helps a lot but you can then also feed it to your load shedding mechanism so you can see oh",
    "start": "1031160",
    "end": "1037000"
  },
  {
    "text": "this tenant is being really bad at the database even though they're only doing very very few queries um so I think that's a that's a really really",
    "start": "1037000",
    "end": "1043480"
  },
  {
    "text": "important thing for more databases to adapt and we've been working on a patch to my SQL to to that's interesting do",
    "start": "1043480",
    "end": "1049400"
  },
  {
    "text": "you have any observability problems or what Heisenberg's principle where by the actual observing of the slow queries if",
    "start": "1049400",
    "end": "1055000"
  },
  {
    "text": "the response of like here is the metrics around this query comes back with the query are you not adding load to the",
    "start": "1055000",
    "end": "1060559"
  },
  {
    "text": "already slow query as well is it just meaningless not really in the benchmarks we looked at the overhead is maybe 1 or",
    "start": "1060559",
    "end": "1067200"
  },
  {
    "text": "2% it's really not bad at all and that's a very constant Factor right you're doing a little bit of bookkeeping to see",
    "start": "1067200",
    "end": "1072840"
  },
  {
    "text": "how much time that thread in myo is spending on CPU but you're not adding any anything significant it's usually just one content switch so that's the",
    "start": "1072840",
    "end": "1079440"
  },
  {
    "text": "kind of thing that has to happen Upstream though so are you running like a fork of my SQL or are you trying to is",
    "start": "1079440",
    "end": "1085280"
  },
  {
    "text": "this still experimental phase or how's that shake out yeah so we're maintaining an internal Fork this is not in",
    "start": "1085280",
    "end": "1090360"
  },
  {
    "text": "production on all the charge yet there's a lot that you have to do in due diligence before you roll out your own patch with a bunch of of C but this is",
    "start": "1090360",
    "end": "1097520"
  },
  {
    "text": "something that we're we're starting to roll out more heavily and then we want not just to expose this information to Upstream to Upstream places so that we",
    "start": "1097520",
    "end": "1104400"
  },
  {
    "text": "can do data analysis on it in the warehouse and we can do the API throttling based on it but now we can",
    "start": "1104400",
    "end": "1109799"
  },
  {
    "text": "also build a shedder like a load shedder inside of my CLE to prioritize traffic so it chooses the queries that are most",
    "start": "1109799",
    "end": "1115960"
  },
  {
    "text": "valuable rather than just the ones that are the most of to overwhelm the [Music]",
    "start": "1115960",
    "end": "1134960"
  },
  {
    "text": "system what's up friends when was the last time you considered how much much time your team is spending building and",
    "start": "1134960",
    "end": "1141000"
  },
  {
    "text": "maintaining internal tooling and I bet if you looked at the way your team spends his time you're probably building",
    "start": "1141000",
    "end": "1146039"
  },
  {
    "text": "and maintain those tools way more often than you thought and you probably shouldn't have to do that I mean there",
    "start": "1146039",
    "end": "1151440"
  },
  {
    "text": "is such a thing as retool have you heard about retool yet well companies like door Dash brags plaid and even Amazon",
    "start": "1151440",
    "end": "1159080"
  },
  {
    "text": "they use retool to build internal tools super fast and the idea is that almost",
    "start": "1159080",
    "end": "1165039"
  },
  {
    "text": "all internal tools look the same they're made up of tables dropdowns buttons text",
    "start": "1165039",
    "end": "1170080"
  },
  {
    "text": "inputs search and all this is very similar and retool gives you a point",
    "start": "1170080",
    "end": "1175679"
  },
  {
    "text": "click drag and drop interface that makes it super simple to build internal uis like that in hours not days so stop",
    "start": "1175679",
    "end": "1184280"
  },
  {
    "text": "wasting your time and use retool check them out at ret.com changelog again ret.com",
    "start": "1184280",
    "end": "1192919"
  },
  {
    "text": "[Music] changelog [Music]",
    "start": "1193620",
    "end": "1213480"
  },
  {
    "text": "so s we talked about how you came into Shopify no college degree definitely",
    "start": "1213480",
    "end": "1218840"
  },
  {
    "text": "education but needing to learn a lot on the go and you were so intentional and",
    "start": "1218840",
    "end": "1224919"
  },
  {
    "text": "disciplined around this you came up with different methodologies for learning and you built that into a system and in",
    "start": "1224919",
    "end": "1231320"
  },
  {
    "text": "fact the first time that we came across you it was on the super organizer substack there a really nice article out",
    "start": "1231320",
    "end": "1236799"
  },
  {
    "text": "there called how to make yourself into a learning machine which is all about you and the",
    "start": "1236799",
    "end": "1241919"
  },
  {
    "text": "system that you came up with and uh out of that comes a lot of stuff but most",
    "start": "1241919",
    "end": "1247120"
  },
  {
    "text": "notably and most recently you have this idea of back of the napkin math or quick",
    "start": "1247120",
    "end": "1252880"
  },
  {
    "text": "math for understanding systems from first principles which you're out there talking about it's really interesting",
    "start": "1252880",
    "end": "1258080"
  },
  {
    "text": "interesting and allows people to really quickly and simply perhaps simply we'll",
    "start": "1258080",
    "end": "1263600"
  },
  {
    "text": "talk about that figure out a thing about a system like how it should be performing or how much it should cost or",
    "start": "1263600",
    "end": "1268840"
  },
  {
    "text": "how much throughput this should have without having to say I'll get back to you right or spend six hours crunchy",
    "start": "1268840",
    "end": "1275320"
  },
  {
    "text": "numbers so maybe start by telling us about your desire to learn in this intentional way that you were learning",
    "start": "1275320",
    "end": "1281919"
  },
  {
    "text": "and all the stuff that you're learning I mean you're reading books and you're basically making sure you remember what you read is to simplify it but there's a",
    "start": "1281919",
    "end": "1288720"
  },
  {
    "text": "lot of interesting things in the details and then how at Napkin math came into the equation yeah sure so it's funny",
    "start": "1288720",
    "end": "1294760"
  },
  {
    "text": "that we actually opened a bit with competitive programming unintentionally because that's where this practice comes",
    "start": "1294760",
    "end": "1299880"
  },
  {
    "text": "from when you're doing competitive programming a lot of your time is try spent trying to implementing a solution",
    "start": "1299880",
    "end": "1306200"
  },
  {
    "text": "doing a competition you know it's going to take you probably about you know 30 minutes to an hour depending on the",
    "start": "1306200",
    "end": "1311400"
  },
  {
    "text": "complexity of it there's a lot of off by ones there is not a lot of help from an editor or a linter or anything like that",
    "start": "1311400",
    "end": "1317279"
  },
  {
    "text": "so you really have have to know how well your program is going to perform beforehand how fast is it going to be and how many points is that going to",
    "start": "1317279",
    "end": "1323000"
  },
  {
    "text": "Grant you and fortunately doing these competitions it's a very controlled environment so you know that if you only",
    "start": "1323000",
    "end": "1328919"
  },
  {
    "text": "have to see n once like an on andn of n algorithm then you're you're probably going to perform pretty well if the",
    "start": "1328919",
    "end": "1334880"
  },
  {
    "text": "input is you know 10,000 and you have an N Square algorithm you're starting to get in trouble for doing something in less than a second so there the napkin",
    "start": "1334880",
    "end": "1341880"
  },
  {
    "text": "math was really really easy and it was very encouraged and um a lot anything you will read about competitive programming is going to talk a lot about",
    "start": "1341880",
    "end": "1347600"
  },
  {
    "text": "the strategizing of how much that's going to create and I kind of left that behind a little bit when I went into",
    "start": "1347600",
    "end": "1353760"
  },
  {
    "text": "Shopify there wasn't really a lot of where we would need that you know there's there's not a lot of algorithms in in day-to-day programming for most",
    "start": "1353760",
    "end": "1359960"
  },
  {
    "text": "programmers but over time as more and more of my time has been spend reviewing how systems are going to perform and",
    "start": "1359960",
    "end": "1366440"
  },
  {
    "text": "doing tech reviews and designing systems more so than implementing parts of them I basically took off this practice again",
    "start": "1366440",
    "end": "1373279"
  },
  {
    "text": "of you might find yourself in a meeting and you know you you have a conversation with the other people in the meeting and",
    "start": "1373279",
    "end": "1378960"
  },
  {
    "text": "someone says well maybe we could do this and someone el else says well that's probably too slow and then someone else",
    "start": "1378960",
    "end": "1384240"
  },
  {
    "text": "said well well why don't we try it and then we'll meet in a week or two and see and see how it's doing and then you know you you go off from the meeting and the",
    "start": "1384240",
    "end": "1390600"
  },
  {
    "text": "person works on that for a week or two you come back into the meeting room and then the person comes back and say ah it was too slow and the person advocating",
    "start": "1390600",
    "end": "1396919"
  },
  {
    "text": "for it in the first place says what you implemented it wrong like I'll come help you give me give me a week or two and then we'll go back back to it right and",
    "start": "1396919",
    "end": "1403440"
  },
  {
    "text": "you can see how this story kind of unfolds and then you spend a month or two kind of going back and forth on this but I think with a little bit of",
    "start": "1403440",
    "end": "1409320"
  },
  {
    "text": "practice you can estimate the performance of systems ahead of time and",
    "start": "1409320",
    "end": "1414640"
  },
  {
    "text": "you can start to develop some expectations about how the system should perform right is it reasonable to",
    "start": "1414640",
    "end": "1419880"
  },
  {
    "text": "continue to have this written in Ruby or python instead of C++ is it reasonable",
    "start": "1419880",
    "end": "1424919"
  },
  {
    "text": "to use this database for this kind of operation can we build this on top of my sore or do we fundamentally need a",
    "start": "1424919",
    "end": "1430520"
  },
  {
    "text": "different data structure I very very firmly believe that you should be",
    "start": "1430520",
    "end": "1436039"
  },
  {
    "text": "developing your understanding from the bottom up for example right now I'm working in on search and I don't know",
    "start": "1436039",
    "end": "1441679"
  },
  {
    "text": "anything about search but the first thing I do is I go start learn to learn how an inverted index Works how would I",
    "start": "1441679",
    "end": "1447520"
  },
  {
    "text": "Implement that how does Lucine implement it how do you do a top K like get the the top K best documents for a quy what",
    "start": "1447520",
    "end": "1454880"
  },
  {
    "text": "does that look like how does it do that efficiently how is it laid out on disk what heris discs does it use and then",
    "start": "1454880",
    "end": "1460520"
  },
  {
    "text": "build up from there because then my question is not oh does elastic search provide an API for this I think about",
    "start": "1460520",
    "end": "1466679"
  },
  {
    "text": "hey fundamentally can an inverted index perform this operation what would it look like how long would it take how",
    "start": "1466679",
    "end": "1473279"
  },
  {
    "text": "would it do in in my SQL compared to here oh an inverted index is not just good at doing full teex search it's also",
    "start": "1473279",
    "end": "1480080"
  },
  {
    "text": "good at just merging arbitrary sets which then leads you to find other applications so that's something that I",
    "start": "1480080",
    "end": "1487039"
  },
  {
    "text": "found really valuable is that you can now go into the meeting that I described before and be like hey hang on let's",
    "start": "1487039",
    "end": "1492480"
  },
  {
    "text": "draw out these scenarios and then do some back of the envelope calculations so an example might be that someone",
    "start": "1492480",
    "end": "1498080"
  },
  {
    "text": "might say scanning a gig of memory on every single request that's way too slow there's no way we can do that right but",
    "start": "1498080",
    "end": "1504200"
  },
  {
    "text": "then what you see is that if you sit down and you write a program in C you allocate a bunch of memory and then you",
    "start": "1504200",
    "end": "1510240"
  },
  {
    "text": "go through it and maybe add out the numbers so the optimizer doesn't optimize it out you see that who you can actually read a gig of memory in about",
    "start": "1510240",
    "end": "1516799"
  },
  {
    "text": "100 milliseconds so maybe that's not so crazy if you can also do a little bit of caching right so suddenly these things",
    "start": "1516799",
    "end": "1523360"
  },
  {
    "text": "that weren't even Solutions before become Solutions so become plausible right the my favorite thing about this is that",
    "start": "1523360",
    "end": "1530600"
  },
  {
    "text": "I run this newsletter called the napkin math newsletter if you Google napkin math newsletter and Simon you you should",
    "start": "1530600",
    "end": "1536679"
  },
  {
    "text": "find it and essentially what this is is that this is my kind of monthly exercise in napkin math so I post myself these",
    "start": "1536679",
    "end": "1543520"
  },
  {
    "text": "problem so a problem that I might posst to myself is how many transactions can a MySQL fundamentally do every single",
    "start": "1543520",
    "end": "1551200"
  },
  {
    "text": "second right is it a th000 is it 10,000 and so I sat down and tried to construct",
    "start": "1551200",
    "end": "1556559"
  },
  {
    "text": "kind of a simple model of how how does my SQL apply a transaction right so I",
    "start": "1556559",
    "end": "1562600"
  },
  {
    "text": "start to kind of from the bottom up think about this so then it's like okay you have to parse the SQL query that's",
    "start": "1562600",
    "end": "1568200"
  },
  {
    "text": "probably pretty fast then you have to sort of figure out what's in this insert there's a bunch of data also pretty fast",
    "start": "1568200",
    "end": "1573440"
  },
  {
    "text": "so how do we commit this so it's durable right there's this whole asset guarantee that we have to hold up that if the",
    "start": "1573440",
    "end": "1578760"
  },
  {
    "text": "server shuts down it either needs to be committed or not so what does it need to do to do that well it needs to take that",
    "start": "1578760",
    "end": "1584799"
  },
  {
    "text": "transaction that insert and put it at the end of a file and then it needs to tell the the file system hey Commit This",
    "start": "1584799",
    "end": "1592159"
  },
  {
    "text": "send it to the hard drive and don't tell me that it's committed before you're sure that it's committed to the hard drive right do what you said you're",
    "start": "1592159",
    "end": "1598799"
  },
  {
    "text": "going to do yeah exactly exactly and that operation is called uh is called fsync so then the hypothesis forms right",
    "start": "1598799",
    "end": "1605399"
  },
  {
    "text": "the napkin hypothesis forms that well the number of transactions you should be able to do in my Seco every single",
    "start": "1605399",
    "end": "1612320"
  },
  {
    "text": "second must be equal to how many f- syncs you can do per second right unless there's a bottle somewhere else because",
    "start": "1612320",
    "end": "1618919"
  },
  {
    "text": "that is the biggest number in a single transaction right so you Whittle it down to like what does one look like and then",
    "start": "1618919",
    "end": "1624919"
  },
  {
    "text": "you add up whatever the time is for one in this case fsync outweighs every other thing which is pretty much rounds to",
    "start": "1624919",
    "end": "1631000"
  },
  {
    "text": "zero and so that's why you say the number of s syncs is equal to the amount of time because it's just massively",
    "start": "1631000",
    "end": "1636640"
  },
  {
    "text": "larger than any other time that there is you know you take that apply it to like a HTTP request and you say well the",
    "start": "1636640",
    "end": "1643360"
  },
  {
    "text": "network time is like massively bigger than any other thing just throwing that out there so you can you're figuring out",
    "start": "1643360",
    "end": "1650000"
  },
  {
    "text": "what it is for one and in this case it happens to be fsync is pretty much what matters exactly so yeah you look at the",
    "start": "1650000",
    "end": "1656399"
  },
  {
    "text": "numbers you're like how long does it take to send the query to the database well probably like less like couple hundred micros seconds how long does it",
    "start": "1656399",
    "end": "1662159"
  },
  {
    "text": "take to parse the query well that's like you know couple hundred bytes that's like less than five NCS I'm just throwing out some numbers here but all",
    "start": "1662159",
    "end": "1668440"
  },
  {
    "text": "of these numbers can be found on github.com syson napkin dmth and then",
    "start": "1668440",
    "end": "1674480"
  },
  {
    "text": "you see that oh there's an fsync operation here and fsync sync is benchmarked at about 1 millisecond in",
    "start": "1674480",
    "end": "1680120"
  },
  {
    "text": "the whole scheme of things that's actually a fairly long time and that seems to be the bottleneck for my SQL",
    "start": "1680120",
    "end": "1685240"
  },
  {
    "text": "because about the network and so on is typically not the bottleneck so yeah you take a one millisecond and you divide it",
    "start": "1685240",
    "end": "1690399"
  },
  {
    "text": "into a second and you see okay that's got to be a thousand transactions a second right and so what I did for this",
    "start": "1690399",
    "end": "1696679"
  },
  {
    "text": "edition of the napkin math newsletter where I investigated this was that I went and I actually tried to do as many",
    "start": "1696679",
    "end": "1702200"
  },
  {
    "text": "transactions per second as I could and I found that I could do about five to six",
    "start": "1702200",
    "end": "1707480"
  },
  {
    "text": "6 to 7,000 transactions per second that's way higher than the th per second that I had estimated from the F you",
    "start": "1707480",
    "end": "1713519"
  },
  {
    "text": "screwed it up so now we have what I call the first principal Gap right well we",
    "start": "1713519",
    "end": "1718880"
  },
  {
    "text": "constructed a simple bottomup understanding of how the system works",
    "start": "1718880",
    "end": "1724240"
  },
  {
    "text": "and we have a real result and there's a gap between them they don't line up and they don't sometimes you know it's like",
    "start": "1724240",
    "end": "1730679"
  },
  {
    "text": "a thousand 200 and 1,000 it's probably fine fine it's rounding errors but this",
    "start": "1730679",
    "end": "1736120"
  },
  {
    "text": "is significant in enough Gap that there's something there my sql's probably cheating somewhere yeah my",
    "start": "1736120",
    "end": "1741960"
  },
  {
    "text": "understanding of the system must be wrong yeah and as it turns out it was so I started looking into it I I wrote some",
    "start": "1741960",
    "end": "1747799"
  },
  {
    "text": "BPF probes to try to figure out what myo was doing and reading some of the source code and some blog post and what it",
    "start": "1747799",
    "end": "1753039"
  },
  {
    "text": "turns out that my SQL does is that it does batching right if you have um five",
    "start": "1753039",
    "end": "1758320"
  },
  {
    "text": "transactions that come in in the same millisecond it's going to applied them as part of the same fsync so instead of",
    "start": "1758320",
    "end": "1764200"
  },
  {
    "text": "doing an fsync for every single transaction it's better that tries to to group those commits together and that's",
    "start": "1764200",
    "end": "1769880"
  },
  {
    "text": "literally what it's called a group commit and there's lots of examples of these kinds of discrepancies an example",
    "start": "1769880",
    "end": "1775480"
  },
  {
    "text": "from another context that I really like was when Elon Musk wanted to build SpaceX he went to I think he went to the",
    "start": "1775480",
    "end": "1782159"
  },
  {
    "text": "Russians and he's like how much is this a rocket cost they're like 120 million and he's like that's ridiculous and then",
    "start": "1782159",
    "end": "1787480"
  },
  {
    "text": "he multiplies you know aluminum cost and titanium cost and so on um like probably 10 tons of this and 100 tons of this and",
    "start": "1787480",
    "end": "1794399"
  },
  {
    "text": "he multiplies with the spot prices on the uh London Metal Exchange and says okay well all the materials for a rocket",
    "start": "1794399",
    "end": "1801399"
  },
  {
    "text": "cost 7 million so that like that difference that3 million yeah what is",
    "start": "1801399",
    "end": "1807120"
  },
  {
    "text": "that between the raw cost what's there that's inefficiencies right we should be able to do better and in fact he was",
    "start": "1807120",
    "end": "1812880"
  },
  {
    "text": "able to do better was he right about that yeah he was right he was right yeah gosh that's",
    "start": "1812880",
    "end": "1818120"
  },
  {
    "text": "smart well that's what happens when we assume though right like you mentioned this you never do that this sort of like",
    "start": "1818120",
    "end": "1823519"
  },
  {
    "text": "root cause understanding of a system like you you assumed that you know one",
    "start": "1823519",
    "end": "1829080"
  },
  {
    "text": "minuscule right was equal to one fsync at least that's my understanding what you're saying here and so you went into",
    "start": "1829080",
    "end": "1835000"
  },
  {
    "text": "this problem with an assumption that was incorrect and once you learned more which is good for a developer to learn more about a system you can then have",
    "start": "1835000",
    "end": "1842000"
  },
  {
    "text": "more understanding of it and now go beyond to Simply this limitation and start to understand that Gap as you",
    "start": "1842000",
    "end": "1847360"
  },
  {
    "text": "mentioned first principal Gap yeah and this was an example where my understanding didn't line up but often",
    "start": "1847360",
    "end": "1853399"
  },
  {
    "text": "times the napkin result is much better than the a real world Ro right so",
    "start": "1853399",
    "end": "1859039"
  },
  {
    "text": "something I was doing in a recent newsletter was that I was trying to figure out how fast we could serve and",
    "start": "1859039",
    "end": "1864600"
  },
  {
    "text": "like a simple free text uh query and Lucine which is kind of the standard for doing free text searches uh and inverted",
    "start": "1864600",
    "end": "1870880"
  },
  {
    "text": "indexes Lucine is about I think 20 times slower than my napkin math for this so I",
    "start": "1870880",
    "end": "1876000"
  },
  {
    "text": "reach out to one of the maintainers and I'm like can you can you explain this right is there an OP opportunity here to optimize Lucine or is my understanding",
    "start": "1876000",
    "end": "1883399"
  },
  {
    "text": "off right and I've found both scenarios right where well there's something we can in the system or there's something",
    "start": "1883399",
    "end": "1888919"
  },
  {
    "text": "wrong with my understanding of it um but typically it's my understanding that's wrong but sometimes there there's a very",
    "start": "1888919",
    "end": "1894360"
  },
  {
    "text": "real um inefficiency like someone has just written the code incorrectly or",
    "start": "1894360",
    "end": "1899840"
  },
  {
    "text": "it's not written in an Optimum way but going back to your original example here you mentioned the meeting right it sound",
    "start": "1899840",
    "end": "1905279"
  },
  {
    "text": "like you were kind of battling against this inefficiency of time You' mentioned roughly a month being wasted or at least",
    "start": "1905279",
    "end": "1912120"
  },
  {
    "text": "exploratory to discover this whereas if you took I don't know how much time it takes you to do this research for these",
    "start": "1912120",
    "end": "1917720"
  },
  {
    "text": "back of the napkin math scenarios but in this case if rather than you spent at",
    "start": "1917720",
    "end": "1922840"
  },
  {
    "text": "least those two Engineers time you know writing investigating arguing taking",
    "start": "1922840",
    "end": "1928279"
  },
  {
    "text": "lunches you know whatever you know whatever it took to like come to this understanding of the system how much you",
    "start": "1928279",
    "end": "1935919"
  },
  {
    "text": "know the efficiency or the inefficiency is that time versus the time it takes to investigate and do some sort of napkin",
    "start": "1935919",
    "end": "1943159"
  },
  {
    "text": "math example to to have a an estimation I suppose of how it might perform well",
    "start": "1943159",
    "end": "1948919"
  },
  {
    "text": "the napkin math can often be done in a few minutes right usually the bottleneck is not doing the napkin math the bottleneck is understanding the system",
    "start": "1948919",
    "end": "1955600"
  },
  {
    "text": "right enough that you can model it out in napkin math so if we're trying to come up with a more concrete example",
    "start": "1955600",
    "end": "1960760"
  },
  {
    "text": "right it might be something like let's say for example that we have a redis in production and the production team that",
    "start": "1960760",
    "end": "1967399"
  },
  {
    "text": "runs this reddis instance says okay we've hit the max throughput this red is is is doing 10,000 requests per second",
    "start": "1967399",
    "end": "1974919"
  },
  {
    "text": "and we need to Shard Redd is right and sharting reddis that's that's a big undertaking right now you have to change",
    "start": "1974919",
    "end": "1979960"
  },
  {
    "text": "all the application code to talk like to to be on multiple Rises if you're doing anything that does something on multiple",
    "start": "1979960",
    "end": "1985360"
  },
  {
    "text": "Keys you have to make sure they're on the same Redd is it's a big undertaking right now these developers have to spend",
    "start": "1985360",
    "end": "1990440"
  },
  {
    "text": "months and months charting this reddis well the napkin math person you know the",
    "start": "1990440",
    "end": "1995519"
  },
  {
    "text": "annoying person in the meeting with the napkin math haton might say hang on 10,000 requests per second that's that's",
    "start": "1995519",
    "end": "2002320"
  },
  {
    "text": "nothing like machines are fast and they might say okay well if you can read",
    "start": "2002320",
    "end": "2007480"
  },
  {
    "text": "the reading about um 64 bytes of memory takes about 5 NCS right if you divide",
    "start": "2007480",
    "end": "2013080"
  },
  {
    "text": "these things together like theoretically you should be able to do hundreds of thousands of requests per second per",
    "start": "2013080",
    "end": "2018440"
  },
  {
    "text": "rdus instance so what's going on here why are they reporting 10,000 requests per second when the theoretical upper",
    "start": "2018440",
    "end": "2024840"
  },
  {
    "text": "bound is hundreds of thousands of requests per second again here's a discrepancy is it my understanding of",
    "start": "2024840",
    "end": "2030200"
  },
  {
    "text": "the system that's wrong is red is doing a lot more than just reading memory and serving it over the network or is there",
    "start": "2030200",
    "end": "2036600"
  },
  {
    "text": "an opportunity here is there's something that's wrong with the system so in this case of reddis something that I've seen",
    "start": "2036600",
    "end": "2041639"
  },
  {
    "text": "before is that Redd is will get a lot slower if you have a lot of connections to it so if you have a language that's",
    "start": "2041639",
    "end": "2047080"
  },
  {
    "text": "not particularly fast and is spending a lot of time reading to reddis you might have thousands of servers that are connecting to that reddis causing tens",
    "start": "2047080",
    "end": "2053760"
  },
  {
    "text": "of thousands of connections now redus is not spending all of its time serving all of these queries it's spending a lot of",
    "start": "2053760",
    "end": "2059800"
  },
  {
    "text": "time just like a eall call basically figuring out which connection is active now so then you might find oh maybe",
    "start": "2059800",
    "end": "2065839"
  },
  {
    "text": "instead of doing all this starting effort we can put a proxy in front of reddis like Envoy or something else uh",
    "start": "2065839",
    "end": "2071839"
  },
  {
    "text": "to reduce the number of connections on redis and suddenly we don't have to shart it we just have to put a proxy",
    "start": "2071839",
    "end": "2077320"
  },
  {
    "text": "there and these developers might have just saved like three or four months of sharting work right and all of the r",
    "start": "2077320",
    "end": "2082800"
  },
  {
    "text": "that's taking something like that on in Tails right like now you have these keys on on different servers and you're",
    "start": "2082800",
    "end": "2087839"
  },
  {
    "text": "almost certainly going to mess that up so that might be an example where napkin math really helps guide your decisions",
    "start": "2087839",
    "end": "2093638"
  },
  {
    "text": "because it just questions like is this really the the maximum througho well you've done a lot of people a",
    "start": "2093639",
    "end": "2099079"
  },
  {
    "text": "service by putting the numbers out there on that repo that you referenced you",
    "start": "2099079",
    "end": "2104320"
  },
  {
    "text": "have things like the latency and the throughput of system calls hashing context switching TCP Echo servers all",
    "start": "2104320",
    "end": "2111040"
  },
  {
    "text": "the things where that's where ID probably get stuck is I got I would understand the system to a certain degree from first principles I do want",
    "start": "2111040",
    "end": "2117320"
  },
  {
    "text": "to ask where you start we'll get back to that once I have that understanding I'm like I don't know how long this thing",
    "start": "2117320",
    "end": "2123359"
  },
  {
    "text": "generally takes and probably these are like a Google or two away but you can always find the one result that like Mis",
    "start": "2123359",
    "end": "2129839"
  },
  {
    "text": "leads you completely and ruins your napkin math so it's pretty cool if people are trying want to do this will link out to the repo where a lot of",
    "start": "2129839",
    "end": "2136839"
  },
  {
    "text": "these numbers are out there there's also a lot of question marks like how how long does a mutex please contri take so",
    "start": "2136839",
    "end": "2143400"
  },
  {
    "text": "there's some there's some places to contribute there but let's go back to that very first example like maybe the search example so he's like I'm going to",
    "start": "2143400",
    "end": "2149640"
  },
  {
    "text": "go read about these indexes and how they work well how did you know that search works that way how did you know that",
    "start": "2149640",
    "end": "2155839"
  },
  {
    "text": "that's a place to start because you got to find the bottom to build up from there and sometimes like that can be a",
    "start": "2155839",
    "end": "2161160"
  },
  {
    "text": "big effort as well just knowing like where do I look it's a really good question it's also similar to Yak",
    "start": "2161160",
    "end": "2166760"
  },
  {
    "text": "shaving sort of it can be right I mean you could really yak shave on this kind of Investigation right instead of using",
    "start": "2166760",
    "end": "2173079"
  },
  {
    "text": "Lucine you built your own Lucine in the process yeah exactly but yeah where do you know where to start yeah I think one",
    "start": "2173079",
    "end": "2178760"
  },
  {
    "text": "thing that I definitely just want to point out before we go further is that this napkin math is not you know it's not my idea this is not an original idea",
    "start": "2178760",
    "end": "2185920"
  },
  {
    "text": "at all right people I've been doing this since the beginning of time this is how we find out if a business is a good idea right we're like sitting in a diner",
    "start": "2185920",
    "end": "2191800"
  },
  {
    "text": "we're like writing on a if I sell this many widgets for this price am I going to make money or not like for sure and",
    "start": "2191800",
    "end": "2197560"
  },
  {
    "text": "in in kind of the computer science realm Jeff Dean who's you know the legend engineer at at Google who stands between",
    "start": "2197560",
    "end": "2203800"
  },
  {
    "text": "a lot of the engineering that a lot of us built on top of I think he had a slideshow where he sort of men mentioned",
    "start": "2203800",
    "end": "2208920"
  },
  {
    "text": "it as like oh by the way this is something that you might want to do and then posted some numbers that have been going around I decided to create my own",
    "start": "2208920",
    "end": "2215800"
  },
  {
    "text": "one because it's fun like sitting there and disassembling things to make sure that it's as fast as it can get um and",
    "start": "2215800",
    "end": "2220839"
  },
  {
    "text": "writing the rust program to do that but also because I was missing more than just the latency I wanted the throughput like how much can you process in in a",
    "start": "2220839",
    "end": "2227160"
  },
  {
    "text": "millisecond how long does it take to process a gigabyte so to go back to your question of how do you develop this",
    "start": "2227160",
    "end": "2232839"
  },
  {
    "text": "first principle understanding I think in a lot of cases you can ask an expert right a lot of places might have a for",
    "start": "2232839",
    "end": "2239119"
  },
  {
    "text": "example if you're modeling something like uh my SQL you're going to have in a lot of cases at least at larger",
    "start": "2239119",
    "end": "2244839"
  },
  {
    "text": "companies someone at some some DBA who can tell you how that b tree is laid out on disk um and that's going to be a",
    "start": "2244839",
    "end": "2250240"
  },
  {
    "text": "really really enlightening conversation for you because you can't do the napkin math unless you understand the system so",
    "start": "2250240",
    "end": "2255599"
  },
  {
    "text": "for something like an inverted index um well you can read about how an inverted index works there's a book on Lucine",
    "start": "2255599",
    "end": "2261440"
  },
  {
    "text": "called Lucine in action and I essentially just started reading that book and then you sort of like develop just a stronger and stronger model of",
    "start": "2261440",
    "end": "2267520"
  },
  {
    "text": "how this works you read kind of the there's some some documentation for Lucine and and how it's implemented and",
    "start": "2267520",
    "end": "2272680"
  },
  {
    "text": "then you start seeing okay well like it's it's sort of implemented like this and so if you have you know you need to",
    "start": "2272680",
    "end": "2277800"
  },
  {
    "text": "find something a term that is mentioned in a million documents and another term and you also want to check that against",
    "start": "2277800",
    "end": "2283960"
  },
  {
    "text": "another term that's also in a million documents well then you probably have to read 1 million documents plus 1 million",
    "start": "2283960",
    "end": "2289760"
  },
  {
    "text": "document IDs each one of those identifiers is like you know let's say 64 bits so now you have like 2 million",
    "start": "2289760",
    "end": "2295920"
  },
  {
    "text": "64-bit integers and then you can roughly figure out how long is that going to take to read and join those two together",
    "start": "2295920",
    "end": "2301920"
  },
  {
    "text": "and doing a search across both of them and then you you also get into things as like oh it's actually possible to read",
    "start": "2301920",
    "end": "2307240"
  },
  {
    "text": "faster than d64 bit integers because you learn randomly that Lucine actually does",
    "start": "2307240",
    "end": "2312680"
  },
  {
    "text": "really good compression and in a lot of cases can get these down to about eight bits per document ID stored and this is",
    "start": "2312680",
    "end": "2318920"
  },
  {
    "text": "counterintuitive to a lot of people that reading compressed data in a lot of cases is actually faster than reading",
    "start": "2318920",
    "end": "2324800"
  },
  {
    "text": "uncompressed data because your machine is bottleneck by the memory bandwidth that you can get so between you getting",
    "start": "2324800",
    "end": "2331119"
  },
  {
    "text": "pages from memory you have a lot of CPU Cycles where you're not doing anything so if you can get more in each memory",
    "start": "2331119",
    "end": "2337040"
  },
  {
    "text": "page and then decompress it uncompress it into spare Cycles until you get the next piece of memory you can often read",
    "start": "2337040",
    "end": "2343319"
  },
  {
    "text": "faster than otherwise but of course this gets into the nuances of like now we're beyond the nkin math now we're no longer",
    "start": "2343319",
    "end": "2348400"
  },
  {
    "text": "concerned about just getting this right within an order of magnitude now we're really trying to to squeeze this out but",
    "start": "2348400",
    "end": "2353800"
  },
  {
    "text": "yeah essentially you just have to start reading the literature um which which is usually a good practice I think but yeah",
    "start": "2353800",
    "end": "2359119"
  },
  {
    "text": "you can end up in a yak shave right this whole Yak shave on um like reading a paper about how like comparing different",
    "start": "2359119",
    "end": "2365079"
  },
  {
    "text": "compression techniques for storing integers in something like an inverted index well that's probably a yak shave",
    "start": "2365079",
    "end": "2370520"
  },
  {
    "text": "that I didn't need to take but it turned out to be really interesting yeah there's a nice side effect of knowledge right like you're getting the knowledge",
    "start": "2370520",
    "end": "2376520"
  },
  {
    "text": "as a side effect because there's there's two ways of going about it that I see you're tasked with this thing well let's use let's evaluate what search solution",
    "start": "2376520",
    "end": "2383319"
  },
  {
    "text": "we're going to do whether we write our own use loing whatever it is well the first thing is like which I do often",
    "start": "2383319",
    "end": "2388440"
  },
  {
    "text": "times like well how long would it take for me just to try it like a feasibility kind of a spike like well I know that in",
    "start": "2388440",
    "end": "2395280"
  },
  {
    "text": "your case with the meeting you you have a month FL time because you got lunches and stuff apparently they're going to lunch a lot Adam but you know maybe I",
    "start": "2395280",
    "end": "2402160"
  },
  {
    "text": "can do that well he mentioned two weeks each and I figured they would do lunches what are these developers do walks to",
    "start": "2402160",
    "end": "2407760"
  },
  {
    "text": "like vacations you know long weekend time at the cottage yeah exactly so I",
    "start": "2407760",
    "end": "2412800"
  },
  {
    "text": "don't know what they're doing all that time but you know sometimes you can you can spike out a thing in a couple hours and get your answer but you don't have",
    "start": "2412800",
    "end": "2419160"
  },
  {
    "text": "the nice you have you have the answer of is this feasible or is this a good idea but you don't necessarily have the side",
    "start": "2419160",
    "end": "2425240"
  },
  {
    "text": "effect of I still don't know how it works I just know that it worked out in the math right but the napkin math way",
    "start": "2425240",
    "end": "2431680"
  },
  {
    "text": "of going about it if you don't understand the system first principles you can't really just grab a napkin and get your numbers you got to go get the",
    "start": "2431680",
    "end": "2438359"
  },
  {
    "text": "knowledge and maybe that takes two hours and then you got to you got to wash but you ended up with now I understand how",
    "start": "2438359",
    "end": "2444920"
  },
  {
    "text": "search works you know if you can't do the napkin math it's probably also too early to go and actually implement the",
    "start": "2444920",
    "end": "2450520"
  },
  {
    "text": "system um like I call this programming through the wall when you just like keep keep writing code and it's like oh I'm",
    "start": "2450520",
    "end": "2455960"
  },
  {
    "text": "almost dead there and then you just write code a little bit harder right when in a lot of cases you just want to step back and and think about the system",
    "start": "2455960",
    "end": "2461800"
  },
  {
    "text": "and learn a little bit more about it but I mean I I don't mean to say here that like All Tech problems can be solved by",
    "start": "2461800",
    "end": "2467160"
  },
  {
    "text": "just sitting and um with with like you know a piece of paper and a pen and doing all of this right in a lot of",
    "start": "2467160",
    "end": "2473040"
  },
  {
    "text": "cases you just need more information from actually like writing some code and and you can often get stuck in a rod of",
    "start": "2473040",
    "end": "2479240"
  },
  {
    "text": "just analysis paralysis but I think that napkin math plays a bigger role than than and could play a bigger role than",
    "start": "2479240",
    "end": "2485160"
  },
  {
    "text": "it does now for for a lot of projects right it's a tool for your toolbox what it seems like is you're encouraging this",
    "start": "2485160",
    "end": "2490920"
  },
  {
    "text": "exploration though so that you don't go and waste the two weeks to go and Implement an example and then two more",
    "start": "2490920",
    "end": "2497040"
  },
  {
    "text": "on the argument or what you know in that scenario in particular like you're encouraging one other option to take",
    "start": "2497040",
    "end": "2503920"
  },
  {
    "text": "rather than a r as rewrite that might take months and months and months on an assumption when you could have just put",
    "start": "2503920",
    "end": "2509160"
  },
  {
    "text": "Envoy in front of it and you know proxy and solve the problem you know like to encourage that exploration I think is",
    "start": "2509160",
    "end": "2515920"
  },
  {
    "text": "what's kind of key here this is like knowing more about the system is always going to be a good thing it may be a yak",
    "start": "2515920",
    "end": "2521520"
  },
  {
    "text": "shave in some cases or it may not be but it's going to deepen your understanding and you're encouraging exploration",
    "start": "2521520",
    "end": "2526760"
  },
  {
    "text": "totally and and I mean that's also how I use the newsletter right is that there are these problems that are ruminating",
    "start": "2526760",
    "end": "2531920"
  },
  {
    "text": "in my mind that I'm very interested in like re recently I was interested in how do you synchronize data really",
    "start": "2531920",
    "end": "2537079"
  },
  {
    "text": "efficiently between a mobile client and a server how do you do that like really really well and so I just decided that I",
    "start": "2537079",
    "end": "2543480"
  },
  {
    "text": "was going to make a napkin math problem about it right and then just started thinking about how could this work and then and then diving out and adding",
    "start": "2543480",
    "end": "2549240"
  },
  {
    "text": "complexity as I found out that the simpler Solutions wouldn't work and that exercise is I think is really really valuable but it certainly it certainly",
    "start": "2549240",
    "end": "2555800"
  },
  {
    "text": "takes time so the way the newsletter works is you send out the problem and then uh you follow up with the math",
    "start": "2555800",
    "end": "2562359"
  },
  {
    "text": "solution or do you send it all out to at once like is it interactive do I get a chance to do my own math and then we",
    "start": "2562359",
    "end": "2567559"
  },
  {
    "text": "reconvene with your answers or how does that work yeah that's what I did for the I've been running the newsletter for about a year now and for the first maybe",
    "start": "2567559",
    "end": "2574319"
  },
  {
    "text": "nine or so I did exactly that I sent out like hey here's the problem here's the scenario you know your co-worker saying",
    "start": "2574319",
    "end": "2580119"
  },
  {
    "text": "the red is a slow is it really slow what's the theoretical Max throughput blah blah blah blah but what I found was that um a lot of people just didn't",
    "start": "2580119",
    "end": "2586520"
  },
  {
    "text": "didn't do it like there's a couple signals that just said that people just didn't do it so people read it like a blog post but where the context was a",
    "start": "2586520",
    "end": "2592960"
  },
  {
    "text": "month delayed so I've switched format now to just make it more of an article but I really hope that people are doing",
    "start": "2592960",
    "end": "2598240"
  },
  {
    "text": "this behind the scenes and something that I also didn't mention but something where napkin math is incredibly useful",
    "start": "2598240",
    "end": "2603680"
  },
  {
    "text": "is financial estimates right like how much money is it going to take to store all of this data right how much money is",
    "start": "2603680",
    "end": "2609119"
  },
  {
    "text": "it going to take to run this streaming process job all the time how much extra money is it going to take to run you",
    "start": "2609119",
    "end": "2615599"
  },
  {
    "text": "know another 50 Rices and I have those numbers on the in the napkin math like a GitHub repository as well which just",
    "start": "2615599",
    "end": "2622200"
  },
  {
    "text": "kind of rounded to to numbers that that are easy to to do some math [Music]",
    "start": "2622200",
    "end": "2627580"
  },
  {
    "text": "[Applause] [Music] with what's up friends are you looking for a way to instantly troubleshoot your",
    "start": "2627580",
    "end": "2634000"
  },
  {
    "text": "applications and services running a production on kubernetes well pixie gives you a magical API to get instant",
    "start": "2634000",
    "end": "2640559"
  },
  {
    "text": "debug data and the best part is this doesn't involve code change and there are no manual uis and this all lives",
    "start": "2640559",
    "end": "2648040"
  },
  {
    "text": "inside kubernetes pixie is an API which lives inside your platform it harvests",
    "start": "2648040",
    "end": "2654200"
  },
  {
    "text": "all the data you need and it exposes a bunch of interfaces that you can paint",
    "start": "2654200",
    "end": "2659280"
  },
  {
    "text": "to get the data that you need and it's essentially like a decentralized Splunk it's a programmable Edge intelligence",
    "start": "2659280",
    "end": "2665680"
  },
  {
    "text": "platform form and it captures metrics traces logs and events all this without",
    "start": "2665680",
    "end": "2672119"
  },
  {
    "text": "any code changes and the team behind pixie is working hard to bring it to market for broad use by the end of 2020",
    "start": "2672119",
    "end": "2678800"
  },
  {
    "text": "but guess what because you listen to this show I'm here to tell you how you can get your hands on the beta today by",
    "start": "2678800",
    "end": "2684119"
  },
  {
    "text": "going to pixil labs. links are in the show notes so check them out to click through to the beta and their slot",
    "start": "2684119",
    "end": "2690559"
  },
  {
    "text": "Community once again pixil laabs doai and look forward to a pixie day coming",
    "start": "2690559",
    "end": "2697040"
  },
  {
    "text": "[Music]",
    "start": "2697040",
    "end": "2706639"
  },
  {
    "text": "[Music]",
    "start": "2709040",
    "end": "2720839"
  },
  {
    "text": "soon all right Simon so say that somebody is sold on the idea of adding",
    "start": "2720839",
    "end": "2726240"
  },
  {
    "text": "this tool to their belt of tools they can reach for when it's time to solve a problem or do a feasibility research and",
    "start": "2726240",
    "end": "2734520"
  },
  {
    "text": "they're like let's just do some quick napkin math but I've never done this before in the context of systems maybe you've done it with your budget or some",
    "start": "2734520",
    "end": "2741319"
  },
  {
    "text": "expenses or a business idea but haven't done it well and I don't really trust my ability to come up with an answer that",
    "start": "2741319",
    "end": "2747040"
  },
  {
    "text": "I'm going to have much confidence in you have some techniques that you apply and some tips for getting started you want",
    "start": "2747040",
    "end": "2752200"
  },
  {
    "text": "to walk us through those yeah absolutely so doer in the GitHub repo as well um so the first one is to not over complicate",
    "start": "2752200",
    "end": "2758680"
  },
  {
    "text": "it we we had this example before of a Redd is instance right and what are the things that that actually matter right",
    "start": "2758680",
    "end": "2765319"
  },
  {
    "text": "let's actually let's take a database query instead right when you're committing a database query to disk the",
    "start": "2765319",
    "end": "2770680"
  },
  {
    "text": "latency that's going to matter is committing the query to dis parsing the SQL statement is not really going to",
    "start": "2770680",
    "end": "2776000"
  },
  {
    "text": "matter like maybe you add on a couple hundred NCS but in the grand scheme of things it's just not going to matter so",
    "start": "2776000",
    "end": "2782440"
  },
  {
    "text": "just don't put those things in there and just focus on the biggest slowest bottlenecks in the system that you're",
    "start": "2782440",
    "end": "2788760"
  },
  {
    "text": "trying to model so that will be the first thing and my kind of my rule of thumb is that if you have more than six assumptions like more than six additions",
    "start": "2788760",
    "end": "2795599"
  },
  {
    "text": "in your napkin math you probably need to simplify things a little bit that's usually a bad sign the other thing too",
    "start": "2795599",
    "end": "2801880"
  },
  {
    "text": "is um when I do napkin math I usually try to keep the units so this is this is thing like for example the kilobytes or",
    "start": "2801880",
    "end": "2808440"
  },
  {
    "text": "terabytes and things like that like just just keeping those there or you know terabytes per second or requests per",
    "start": "2808440",
    "end": "2814319"
  },
  {
    "text": "second um keeping the unit is really really handy because then you make sure that you don't get a wrong number so",
    "start": "2814319",
    "end": "2819839"
  },
  {
    "text": "it's just kind of a check summing and V from alpha is often often I don't actually do this on a napkin I just do",
    "start": "2819839",
    "end": "2826160"
  },
  {
    "text": "it in W from alpha um because wfr Alpha is very very good at handling units it's very good at handling conversions",
    "start": "2826160",
    "end": "2831480"
  },
  {
    "text": "between different units so kilobytes to terabytes the other way around and so usually I just type in things with the",
    "start": "2831480",
    "end": "2837040"
  },
  {
    "text": "units into wall from Alpha and then it gives me the right result and if the units look weird then I know that I did",
    "start": "2837040",
    "end": "2842520"
  },
  {
    "text": "something wrong plus it helps you conceptualize it better like if you're thinking megabytes and you type in megabytes it just conceptually is right",
    "start": "2842520",
    "end": "2849200"
  },
  {
    "text": "there versus having to do the conversion yourself and then having to convert it back when you think about it exactly and",
    "start": "2849200",
    "end": "2855559"
  },
  {
    "text": "then the the third one is to calculate with the exponents so often if you end",
    "start": "2855559",
    "end": "2860640"
  },
  {
    "text": "up having something like you know 3. 924 time 10 to the like eth power or",
    "start": "2860640",
    "end": "2868760"
  },
  {
    "text": "something like just lose everything after the decimal like it just it just doesn't matter in the grand scheme of",
    "start": "2868760",
    "end": "2874920"
  },
  {
    "text": "things but na can m math you're just trying to get in with within an order of magnitude of the actual performance of",
    "start": "2874920",
    "end": "2881920"
  },
  {
    "text": "the system and as long as you're within that order of magnitude you've probably done it roughly right that's one that I",
    "start": "2881920",
    "end": "2887160"
  },
  {
    "text": "also also really make sure and uh and this also means that it's just much easier to do if you are doing it in a",
    "start": "2887160",
    "end": "2892319"
  },
  {
    "text": "meeting room on a whiteboard um that you just have to multiply or add the the um coefficients on the exponents together",
    "start": "2892319",
    "end": "2899000"
  },
  {
    "text": "instead of trying to do like multiplication of fractions and things like that that's just not fun you're",
    "start": "2899000",
    "end": "2904480"
  },
  {
    "text": "going to embarrass yourself in front of your co-workers you be uming a lot yeah um",
    "start": "2904480",
    "end": "2910000"
  },
  {
    "text": "got that one wrong uh you got out your phone and put wol froma out never mind",
    "start": "2910000",
    "end": "2915040"
  },
  {
    "text": "you'll be yeah you'll be uh stuttering because that's the beauty like the reason why napkin math like when you're",
    "start": "2915040",
    "end": "2920640"
  },
  {
    "text": "when you're by yourself you have a calculator available right and you can write that out and put that in the G GitHub repo doesn't mean that you",
    "start": "2920640",
    "end": "2926720"
  },
  {
    "text": "shouldn't try to still keep the units and not over complicate things because otherwise your your co-workers are just going to approve the pr because it looks",
    "start": "2926720",
    "end": "2932960"
  },
  {
    "text": "complicated right and also just keep yourself to high school math right you don't need anything fancy and then I",
    "start": "2932960",
    "end": "2938720"
  },
  {
    "text": "think the the last one that I have on the list here is arguably the most important which is to call what to do what's called firmi decomposition of the",
    "start": "2938720",
    "end": "2945920"
  },
  {
    "text": "problem and this sounds really fancy but but it it's really not it's just decomposition um with a fancy name and",
    "start": "2945920",
    "end": "2952319"
  },
  {
    "text": "the reason why it's called Fermi decomposition is because there's this physics uh Professor um called Fermi",
    "start": "2952319",
    "end": "2958480"
  },
  {
    "text": "Enrique Fermi I think is his full name um he was Italian he worked on the Manhattan Project and he was a very",
    "start": "2958480",
    "end": "2964359"
  },
  {
    "text": "revered uh physicist among his co-workers because he had his knack for estimating things so for example when",
    "start": "2964359",
    "end": "2971280"
  },
  {
    "text": "they did the the famous first Ed anation of an Adam Bomb in in Nevada he dropped",
    "start": "2971280",
    "end": "2976520"
  },
  {
    "text": "a couple of shets of paper from the air and based on how far they moved after",
    "start": "2976520",
    "end": "2982680"
  },
  {
    "text": "the blast he estimated within a few like to pretty good Precision how strong that",
    "start": "2982680",
    "end": "2988760"
  },
  {
    "text": "Adam Bomb was which was very remarkable at the time because actually doing the calculations for that is like probably",
    "start": "2988760",
    "end": "2996280"
  },
  {
    "text": "Beyond any of our math skills and took them weeks to do but he had an estimate immediately and you have to remember",
    "start": "2996280",
    "end": "3001839"
  },
  {
    "text": "that this was at a time where people were literally afraid that they were going to blow open the ozone layer",
    "start": "3001839",
    "end": "3007799"
  },
  {
    "text": "because they just did not know how powerful this was going to be so the fact that they had that right there and then and he did an estimate that was so",
    "start": "3007799",
    "end": "3014400"
  },
  {
    "text": "close was remarkable at the time he's very famous for this and and probably the most famous example of a Fermi",
    "start": "3014400",
    "end": "3021599"
  },
  {
    "text": "decomposition is to answer these kind of I think he I'm imagining that he sort of went R around the Manhattan Project and",
    "start": "3021599",
    "end": "3028160"
  },
  {
    "text": "then asked his over lunch asked his co-workers these ridiculous questions like how many piano tuners are there in",
    "start": "3028160",
    "end": "3033799"
  },
  {
    "text": "Chicago is the really famous one and it's like how are you going to answer that right how are you going to answer",
    "start": "3033799",
    "end": "3039520"
  },
  {
    "text": "like who cares and how are you going to answer that you break it down that's how you do it yeah exactly so you break it",
    "start": "3039520",
    "end": "3045000"
  },
  {
    "text": "down so you go like okay probably we should know roughly how many people that are on Chicago right and again this is",
    "start": "3045000",
    "end": "3050640"
  },
  {
    "text": "napkin math we just have to be with in an order of magnitude then it will all work out so there's maybe like I don't know 9 10 million kind of in the",
    "start": "3050640",
    "end": "3057240"
  },
  {
    "text": "metropolitan area of Chicago um so that's like an estimate that I think that um most people could could probably",
    "start": "3057240",
    "end": "3062960"
  },
  {
    "text": "get there somewhere between 5 and 10 million and then you think well so okay how many people are there per household so maybe like two people per household",
    "start": "3062960",
    "end": "3069880"
  },
  {
    "text": "on average in that area and then you start to think how many households might have a piano do you guys have a piano no",
    "start": "3069880",
    "end": "3076000"
  },
  {
    "text": "no do you have a piano no piano here well I have a a a keyboard well I guess it's a piano it's not like a grand piano",
    "start": "3076000",
    "end": "3082040"
  },
  {
    "text": "it's more of like a a keyboard piano does it need a tuner digal that's not a piano then so we might say maybe like",
    "start": "3082040",
    "end": "3088839"
  },
  {
    "text": "one in 20 households have a piano right W I was going to go one in 100 you going to go one in 100 okay that's that's high",
    "start": "3088839",
    "end": "3095319"
  },
  {
    "text": "or low so we could go one in one in 20 one in 100 one in 50 you know I think there's a lot of homes with Pian where",
    "start": "3095319",
    "end": "3101760"
  },
  {
    "text": "they just can't get rid of them because getting rid of them is the worst and then we might estimate how often are these things tuned right you know I I",
    "start": "3101760",
    "end": "3108119"
  },
  {
    "text": "did the estimate that I used when I was doing a presentation on this was about once a year that seemed really high like",
    "start": "3108119",
    "end": "3113280"
  },
  {
    "text": "that one in 20 people would tune this once a year um but maybe once every few years and then you might think okay so",
    "start": "3113280",
    "end": "3119640"
  },
  {
    "text": "then we have to think about like how much can a piano tuner do so tuning a piano probably including driving within",
    "start": "3119640",
    "end": "3126440"
  },
  {
    "text": "the Chicago metropolitan area would maybe take about 2 hours and then we we assume that a piano tuner Works 8 hours",
    "start": "3126440",
    "end": "3133040"
  },
  {
    "text": "a day uh maybe about 50 weeks a year or however you know Americans working a lot",
    "start": "3133040",
    "end": "3138160"
  },
  {
    "text": "of weeks a year this is in America so 50 weeks a year fair and then we can start to kind of compose these numbers and",
    "start": "3138160",
    "end": "3144319"
  },
  {
    "text": "then we say okay we you know we look at the how many pianos there are and so on and we say there's probably about",
    "start": "3144319",
    "end": "3149520"
  },
  {
    "text": "200,000 piano tunings per year in Chicago how many can each piano tuner do so maybe about a thousand if you use",
    "start": "3149520",
    "end": "3155280"
  },
  {
    "text": "those numbers from before and then we get somewhere around 200 piano tuners in Chicago right so that's the rough",
    "start": "3155280",
    "end": "3161480"
  },
  {
    "text": "estimate and this this technique is called firmine decomposition how many actual tuners are there and again it's",
    "start": "3161480",
    "end": "3167960"
  },
  {
    "text": "not meant to be on the money it's meant to be within an organ of magnitude because yeah one thing I'd throw in",
    "start": "3167960",
    "end": "3173559"
  },
  {
    "text": "there might be a curveball is you assume that the that the supply is equal to demand yes right cuz there may be more",
    "start": "3173559",
    "end": "3181040"
  },
  {
    "text": "people capable of tuning a piano even though they may not do it professionally and therefore the supply may actually be",
    "start": "3181040",
    "end": "3188079"
  },
  {
    "text": "disproportionate to the demand yeah now you're going from napkin to to somewhere else right right more granular",
    "start": "3188079",
    "end": "3193839"
  },
  {
    "text": "theoretical yeah we might have done this napkin math because we wanted to figure out is there any opportunity here right this could be someone trying to do",
    "start": "3193839",
    "end": "3199880"
  },
  {
    "text": "product Market fit or whatever right and they're looking in the phone book and they're seeing like one piano tuner they call them up and they try to book with",
    "start": "3199880",
    "end": "3205920"
  },
  {
    "text": "him to figure out how busy is and he's like oh um thisp anot tuner like can only be booked 3 months out and they",
    "start": "3205920",
    "end": "3211200"
  },
  {
    "text": "call someone else and she says oh yeah I'm booked all year and then this person's like oh there's a big opportunity here because there's a",
    "start": "3211200",
    "end": "3217040"
  },
  {
    "text": "mismatch between what's in the phone book and what I estimated um but yeah this is definitely and then you might do",
    "start": "3217040",
    "end": "3222079"
  },
  {
    "text": "do a little bit more analysis after that which you're getting to a a good point which is what's the point right what",
    "start": "3222079",
    "end": "3228079"
  },
  {
    "text": "question are you asking you know what's the point of the nkim math what's the whole point right it's not to get to an",
    "start": "3228079",
    "end": "3233880"
  },
  {
    "text": "accurate number in particular it's to determine a good next step right exactly right it's to answer a different question right like the the question",
    "start": "3233880",
    "end": "3240880"
  },
  {
    "text": "you're asking is not the one you care about cuz if you cared about that question you would ask it in a much more granular way like you would say well",
    "start": "3240880",
    "end": "3247280"
  },
  {
    "text": "what about churches and and uh community centers they're more they're likely to have pianos we should add those in right",
    "start": "3247280",
    "end": "3253720"
  },
  {
    "text": "but we don't care about the actual piano tuners we care about some other question we're trying to answer which is like is there an opportunity in Chicago to open",
    "start": "3253720",
    "end": "3259960"
  },
  {
    "text": "up a piano tuning business the question that you're trying to answer with napkin math is is there's something there right",
    "start": "3259960",
    "end": "3266799"
  },
  {
    "text": "exactly and then you know I think about decisions in kind of a decision tree right and you have these branches and",
    "start": "3266799",
    "end": "3272520"
  },
  {
    "text": "your job as a decision maker is to figure out how far down these different branches you need to go and to chop the",
    "start": "3272520",
    "end": "3278640"
  },
  {
    "text": "ones off that don't look fruitful as fast as you can right so an example of",
    "start": "3278640",
    "end": "3284200"
  },
  {
    "text": "using this right might be something like you receive your bill from your cloud provider and the bill is $100,000 right",
    "start": "3284200",
    "end": "3292119"
  },
  {
    "text": "and you're like that seems pretty high right you're like deep in the red and you're trying to figure out is this",
    "start": "3292119",
    "end": "3297760"
  },
  {
    "text": "reasonable or not right um and so you might say okay you look at it and you say I'm doing about 10,000 requests per",
    "start": "3297760",
    "end": "3304520"
  },
  {
    "text": "second I know that I can you're doing this in a whiteboard right you're like in crisis mode because you're deep into red and you're doing this with your",
    "start": "3304520",
    "end": "3310440"
  },
  {
    "text": "co-workers okay friends we're doing 10,000 RPS each one is 100 milliseconds",
    "start": "3310440",
    "end": "3316599"
  },
  {
    "text": "right so if this is single threaded we divide those two numbers and we see that we need about 1,000 CPUs to all of this",
    "start": "3316599",
    "end": "3325599"
  },
  {
    "text": "traffic if all of that is CPU time okay so if we know that a CPU one CPU costs",
    "start": "3325599",
    "end": "3332760"
  },
  {
    "text": "$10 a month then we multiply 10 by a th000 and we know that to serve all this",
    "start": "3332760",
    "end": "3339119"
  },
  {
    "text": "traffic should be about $10,000 a month right so then now we have an estimate here right so our bill was was 100,000",
    "start": "3339119",
    "end": "3346520"
  },
  {
    "text": "our like main application cost roughly 10,000 what's going on here that just",
    "start": "3346520",
    "end": "3352400"
  },
  {
    "text": "that you know we have this Gap again right and so you might add in like database cost and so on but they just they're just not adding up and then you",
    "start": "3352400",
    "end": "3358359"
  },
  {
    "text": "start going into it and you find out that one of your co-workers left you know 200 machines running that they were",
    "start": "3358359",
    "end": "3363880"
  },
  {
    "text": "training some machine learning model on and they forgot to turn it off and that happened and then you have an RCA and you figure out that you need to have",
    "start": "3363880",
    "end": "3369319"
  },
  {
    "text": "something that monitors how many machines are running or whatever right but these are the kinds of things where again the question you're trying to",
    "start": "3369319",
    "end": "3375200"
  },
  {
    "text": "answer is is there something here right or if these numbers added up to 70 or",
    "start": "3375200",
    "end": "3380880"
  },
  {
    "text": "880,000 it's like okay this um this must just be what it cost we need to optimize it yeah that's really powerful stuff I",
    "start": "3380880",
    "end": "3386359"
  },
  {
    "text": "also think when you're doing the feasibility again if we go back to the opportunity to start a business or have a business that actually you know the",
    "start": "3386359",
    "end": "3393280"
  },
  {
    "text": "dog hunts you know you're comparing your potential Revenue versus your potential costs and so the cost calculations if",
    "start": "3393280",
    "end": "3400240"
  },
  {
    "text": "you're going to be cloud-based a lot of times is exactly what you're doing you're estimating how much this is going to require us what are we going to be",
    "start": "3400240",
    "end": "3406599"
  },
  {
    "text": "paying out a month to Amazon or to Microsoft or to Google and is that going to actually scale alongside the revenue",
    "start": "3406599",
    "end": "3413000"
  },
  {
    "text": "that we come in so you just have your back you have your your napkin math on the revenue side and your napkin math on the expenses side and start to make some",
    "start": "3413000",
    "end": "3419920"
  },
  {
    "text": "decisions on is this completely upside down is it tight is it obviously an opportunity and then once you start",
    "start": "3419920",
    "end": "3426599"
  },
  {
    "text": "having those answers then you can say well it's obviously an opportunity let's get more specific right let's fill in",
    "start": "3426599",
    "end": "3432319"
  },
  {
    "text": "those gaps and take out the napkin and put in the calculator you know the more",
    "start": "3432319",
    "end": "3437440"
  },
  {
    "text": "specific uh spreadsheets and drill in but if it's completely backwards like",
    "start": "3437440",
    "end": "3442520"
  },
  {
    "text": "let's not waste our time with the details it's not going to work mhm how many times have you done this Simon I don't know I've lost count hundreds",
    "start": "3442520",
    "end": "3449079"
  },
  {
    "text": "thousands give us an order just back of the map give me a napkin map on your estimation okay I've been alive for this",
    "start": "3449079",
    "end": "3455960"
  },
  {
    "text": "many years you know I don't write that much code anymore right but then I would be like how many PRS do I do a week how many of them require napkin math right",
    "start": "3455960",
    "end": "3462440"
  },
  {
    "text": "but I I really find that it's just useful to when I'm reviewing code I also think about this right it's not that",
    "start": "3462440",
    "end": "3467680"
  },
  {
    "text": "necessarily that I'm sitting down drawing something right but I'm like okay this person is getting this much throughput on this or they're doing",
    "start": "3467680",
    "end": "3473680"
  },
  {
    "text": "these kinds of calls on this critical path like is this is this going to work or not right we talked about that myo",
    "start": "3473680",
    "end": "3478960"
  },
  {
    "text": "extension earlier right um how many okay it's doing this many CIS calls and we know every CIS call based on the napkin",
    "start": "3478960",
    "end": "3485160"
  },
  {
    "text": "math we know a CIS call might take about let's see here 500 to 1,000 nanc depending on it we're doing this many we",
    "start": "3485160",
    "end": "3491520"
  },
  {
    "text": "know how much overhead we can roughly introduce per Cory and we say okay we need to reduce the amount of system calls we have here because we have a",
    "start": "3491520",
    "end": "3497400"
  },
  {
    "text": "very very tight budget right so we might look at look at things like that and it just over time you also start to build",
    "start": "3497400",
    "end": "3503200"
  },
  {
    "text": "an intuition right I'm sure that both of you have seen have encountered people right who have Mastery over some domain",
    "start": "3503200",
    "end": "3509480"
  },
  {
    "text": "and they just look at what you're doing and they say like yeah and this is not going to work and you mean like what do",
    "start": "3509480",
    "end": "3514880"
  },
  {
    "text": "you mean it's not going to work immediately yeah they just know immediately like nope doesn't make sense there's that famous story right of a of",
    "start": "3514880",
    "end": "3520760"
  },
  {
    "text": "a firefighter who took his team into a building and they were trying to you",
    "start": "3520760",
    "end": "3526839"
  },
  {
    "text": "know get people out and so on um and I think they emptied the building and then they were standing kind of in the in the",
    "start": "3526839",
    "end": "3531960"
  },
  {
    "text": "lobby of this building and suddenly the guy who was in charge of this operation said everyone out and people are like",
    "start": "3531960",
    "end": "3537960"
  },
  {
    "text": "what do you mean everyone out but you you know you just you follow order in these kinds of circumstances and they all ran out and about a minute or two",
    "start": "3537960",
    "end": "3544799"
  },
  {
    "text": "after they were out of the building the floor collapsed so how did he know that right well he built some kind of Mastery",
    "start": "3544799",
    "end": "3550760"
  },
  {
    "text": "right that some and Mastery is built by just deliberate practice over time and at some point you might not even need to",
    "start": "3550760",
    "end": "3557720"
  },
  {
    "text": "really reference these numbers anymore because you start to have a pretty good feeling for what's fast and what's and what's not fast the point me ask",
    "start": "3557720",
    "end": "3564520"
  },
  {
    "text": "question question was to to really get to how many times has this saved your bacon so to speak and the the reason why",
    "start": "3564520",
    "end": "3570000"
  },
  {
    "text": "our audience might care deeply about this or pick up this practice is because you know one you're introducing this",
    "start": "3570000",
    "end": "3575559"
  },
  {
    "text": "idea to us even though you're not the inventor of the idea but the reason why you do it has been because it's paid",
    "start": "3575559",
    "end": "3581520"
  },
  {
    "text": "itself in dividends in your career yeah I mean it's hard to say because I don't have the timeline uh in front of me or",
    "start": "3581520",
    "end": "3587559"
  },
  {
    "text": "the parallel reality of where I didn't have this right I think that the biggest place where it I end up applying it",
    "start": "3587559",
    "end": "3593079"
  },
  {
    "text": "again and again and again I just it's it's hard to give a number I would say I do this at least once a week apply it to something at work right where it has",
    "start": "3593079",
    "end": "3599480"
  },
  {
    "text": "some impact what that impact is it's not always true but the impact almost always is hey The Simple Solution is going to",
    "start": "3599480",
    "end": "3605960"
  },
  {
    "text": "work like it's fast enough because the engineers if they have an idea for how to make something fast they usually will",
    "start": "3605960",
    "end": "3611880"
  },
  {
    "text": "even if it takes longer and they will justify why that's the best thing to do um but when you realize that reading you",
    "start": "3611880",
    "end": "3617599"
  },
  {
    "text": "know a megabyte of memory even on every single request probably not your bottleneck right that only takes a 100",
    "start": "3617599",
    "end": "3622680"
  },
  {
    "text": "microseconds it's not really that long if your requests are taking 100 milliseconds right so yeah it's hard to",
    "start": "3622680",
    "end": "3628520"
  },
  {
    "text": "to answer the question directly Yeah you mentioned this newslet you have where where can people subscribe to that so",
    "start": "3628520",
    "end": "3634760"
  },
  {
    "text": "they can follow along as you do more of these napkin problems and you share them yeah so you can go to it's linked from",
    "start": "3634760",
    "end": "3640799"
  },
  {
    "text": "the GitHub rep repository github.com csnap dmth you can go to my website",
    "start": "3640799",
    "end": "3646319"
  },
  {
    "text": "which is cups.com napkin and you can subscribe there if you Google just you know Simon napkin",
    "start": "3646319",
    "end": "3652799"
  },
  {
    "text": "math I I think it will probably come up as as well it's kind of a niche market yeah and yeah then you should every",
    "start": "3652799",
    "end": "3658160"
  },
  {
    "text": "month you should receive some kind of Deep dive um and my co-workers joke with me because they know exactly what",
    "start": "3658160",
    "end": "3664200"
  },
  {
    "text": "project I'm working on based on the nap math newsletter so I'm very much doing this on things that I'm actually working on on real problems so I'm I've you know",
    "start": "3664200",
    "end": "3672079"
  },
  {
    "text": "I've at least done this 12 times next month because these are real problems and a lot of these I send to co-workers",
    "start": "3672079",
    "end": "3677599"
  },
  {
    "text": "because they ask a question and then I I go deep on it in in one of these newsletters um so so that's very it's",
    "start": "3677599",
    "end": "3683680"
  },
  {
    "text": "very real um yeah well you got one new subscriber I'm subscribing right when we hang up this call one last question for",
    "start": "3683680",
    "end": "3689359"
  },
  {
    "text": "you do you have a specific brand of napkin that you suggest I actually do not own any napkins okay at all so I",
    "start": "3689359",
    "end": "3695799"
  },
  {
    "text": "I've never done this on a napkin it's it's terrible charlatan I do all of this on a on an",
    "start": "3695799",
    "end": "3701319"
  },
  {
    "text": "iPad I thought maybe you were just working for big napkin and you're just out there chilling napkins but yeah oh yeah I should have some",
    "start": "3701319",
    "end": "3709119"
  },
  {
    "text": "napkins in in the background here you know set this up a little bit better you should come up with a like a little you know Simon branded napkin you could sell",
    "start": "3709119",
    "end": "3715920"
  },
  {
    "text": "those on your website you know come on merchand true you know if I done that maybe I'd make some money off the dis AED yeah cuz unfortunately all of this",
    "start": "3715920",
    "end": "3722960"
  },
  {
    "text": "is free you know I'm not earning a dime on this but this is okay huge missed opportunity yeah do you know do you know anyone in big napkin we do",
    "start": "3722960",
    "end": "3731480"
  },
  {
    "text": "now they're going to reach out after this like we can s some napkins yeah we can we can help you out here like Dad",
    "start": "3732079",
    "end": "3738119"
  },
  {
    "text": "and strike up a product placement deal perfect can we spons the show in retrospect and it really hack um it",
    "start": "3738119",
    "end": "3743640"
  },
  {
    "text": "should be sort of the size of the airline napkin like those really really low quality ones right because then you run out of room real fast you have to",
    "start": "3743640",
    "end": "3748880"
  },
  {
    "text": "grab another one see now you're using exactly you're using two you need constraints I bet you also the airlines",
    "start": "3748880",
    "end": "3754279"
  },
  {
    "text": "probably you know they're desperate to make money right now they'll sell you some of their napk so hunts I think we should just do the math and see if this",
    "start": "3754279",
    "end": "3760000"
  },
  {
    "text": "could be a business true I like it awesome Simon thanks for sharing this uh this wisdom and this this exploration",
    "start": "3760000",
    "end": "3766720"
  },
  {
    "text": "this this desire for curiosity I think is pretty interesting and that's what's interesting to me is that you encourage",
    "start": "3766720",
    "end": "3772359"
  },
  {
    "text": "this exploration to see if if there's actually something there worth uh doing more of or not if the original",
    "start": "3772359",
    "end": "3778279"
  },
  {
    "text": "assumption was correct but uh links will be in the show notes listeners you know that so the uh repo and the newsletter",
    "start": "3778279",
    "end": "3784839"
  },
  {
    "text": "all that stuff check your notes you will see it there Simon thank you so much thanks for having me on the [Music]",
    "start": "3784839",
    "end": "3791039"
  },
  {
    "text": "show that's it for this episode of the change law thank you for tuning in if you haven't heard yet we have launched",
    "start": "3791039",
    "end": "3796839"
  },
  {
    "text": "change law Plus+ it is our membership program that lets you get closer to the metal remove the ads make them disappear",
    "start": "3796839",
    "end": "3803920"
  },
  {
    "text": "as we said and enjoy supporting us it's the best way to directly support this show and our other podcast here on Chang",
    "start": "3803920",
    "end": "3810839"
  },
  {
    "text": "law.com and if you've never been to Chang law.com you should go there now again join Chang law Plus+ to directly",
    "start": "3810839",
    "end": "3817920"
  },
  {
    "text": "support our work and make the ads disappear check it out at change.com plusus plusus of course huge thanks to",
    "start": "3817920",
    "end": "3824839"
  },
  {
    "text": "our partners who get it fastly lenoe and rollbar also thanks to break master cylinder for making all of our beats and",
    "start": "3824839",
    "end": "3831680"
  },
  {
    "text": "thank you to you for listening we appreciate you that's it for this week we'll see you next",
    "start": "3831680",
    "end": "3837650"
  },
  {
    "text": "[Music]",
    "start": "3837650",
    "end": "3855779"
  },
  {
    "text": "week [Music]",
    "start": "3863200",
    "end": "3868949"
  },
  {
    "text": "I",
    "start": "3869960",
    "end": "3872960"
  }
]