[
  {
    "text": "what up nerds jared here with gerhard and alex this is like changelog's dev squad the development",
    "start": "80",
    "end": "7919"
  },
  {
    "text": "team right now hi guys hey jared hey hey good afternoon to me",
    "start": "7919",
    "end": "15679"
  },
  {
    "text": "everybody's feeling fresh and ready for it fresh and ready uh monday morning coffee for me",
    "start": "15679",
    "end": "23039"
  },
  {
    "text": "alex is also waking up i don't know if you do a coffee cheers oh every day mine is coming up in like about an hour",
    "start": "23039",
    "end": "30000"
  },
  {
    "text": "so just as we're finishing with this mine is coming up there you go afternoon round",
    "start": "30000",
    "end": "36160"
  },
  {
    "text": "so here to do a bit of a jam session and work together on some coding and some grafana in i'm",
    "start": "36320",
    "end": "44000"
  },
  {
    "text": "trying to get some more observability not just into i guess like system metrics but this is more",
    "start": "44000",
    "end": "49600"
  },
  {
    "text": "application metrics is what i'm after so let me describe to you guys",
    "start": "49600",
    "end": "56079"
  },
  {
    "text": "what we're doing right now and what i would like to see",
    "start": "56079",
    "end": "61199"
  },
  {
    "text": "so we have this vanity domains module",
    "start": "61199",
    "end": "66560"
  },
  {
    "text": "which is really just about doing redirects it's very simple and gerhard you know about this a little",
    "start": "66560",
    "end": "71600"
  },
  {
    "text": "bit because you helped set up the the short domains like go time.fm yeah there's jsparty.fm there's",
    "start": "71600",
    "end": "79280"
  },
  {
    "text": "practical ai.fm and we use these because it's easier to say that on the shows for example i can say go to",
    "start": "79280",
    "end": "85360"
  },
  {
    "text": "go time.fm 123 and that will get you to the right episode versus go to change.com slash go",
    "start": "85360",
    "end": "93360"
  },
  {
    "text": "time slash 123. so it's just a nice way of saying it short and we use it in promotional things so",
    "start": "93360",
    "end": "100000"
  },
  {
    "text": "when we're linking to things in show notes when we're linking on twitter and youtube",
    "start": "100000",
    "end": "105520"
  },
  {
    "text": "we always use the short urls because it's a nice little branded way to get to certain places and you can see it's just doing a",
    "start": "105520",
    "end": "111360"
  },
  {
    "text": "redirect so this domain redirects to this location if i put slash request",
    "start": "111360",
    "end": "118240"
  },
  {
    "text": "it's going to go to this location which is the request form with go time pre filled out if i use a episode 123 like i",
    "start": "118240",
    "end": "126320"
  },
  {
    "text": "said it's going to go to that location so it's literally just a short url",
    "start": "126320",
    "end": "132000"
  },
  {
    "text": "and this module handles all that yep i think one piece of background",
    "start": "132000",
    "end": "137680"
  },
  {
    "text": "information is that we used to do this in nginx and our nginx config",
    "start": "137680",
    "end": "142879"
  },
  {
    "text": "was quite big it's not it's not just these urls uh so like the um fqds domains",
    "start": "142879",
    "end": "148879"
  },
  {
    "text": "themselves but it's also all the changeof.com redirects that we picked up over the years rather than having this configuration",
    "start": "148879",
    "end": "155040"
  },
  {
    "text": "spread between the infrastructure and eventually nginx and the app we",
    "start": "155040",
    "end": "160640"
  },
  {
    "text": "decided to move all of them all the logic in the app itself then we can have nice tests because we used to do end-to-end testing for nginx",
    "start": "160640",
    "end": "167840"
  },
  {
    "text": "redirects in um i think we have like some bash scripts for that so this is so much better because everything is",
    "start": "167840",
    "end": "173760"
  },
  {
    "text": "self-contained in the app and wherever the app goes if we replace nginx with something else",
    "start": "173760",
    "end": "179519"
  },
  {
    "text": "it still behaves the same because the logic is in the app so there's the benefit of having a majestic monolith",
    "start": "179519",
    "end": "185519"
  },
  {
    "text": "right which is great right you can self-contain all those things in the monolith that's right",
    "start": "185519",
    "end": "192480"
  },
  {
    "text": "so we do i forgot this part we also do like the short links to specific platforms so like this",
    "start": "192480",
    "end": "200319"
  },
  {
    "text": "stuff's in the database so in the case of like this it's gonna have the podcast uh struct",
    "start": "200319",
    "end": "205680"
  },
  {
    "text": "and it's gonna for apple it actually has knowledge so if i go to apple it's gonna get me",
    "start": "205680",
    "end": "211280"
  },
  {
    "text": "that that apple link so that stuff's there as well",
    "start": "211280",
    "end": "217440"
  },
  {
    "text": "what i would love to add and have is just like basic metrics of these",
    "start": "218319",
    "end": "224560"
  },
  {
    "text": "redirects so i'd love it to just say oh i'm redirecting and just note that",
    "start": "224560",
    "end": "231519"
  },
  {
    "text": "it could be a log it could be like a grafana thing it could be a prom i don't that's where i i leave often you",
    "start": "231519",
    "end": "237280"
  },
  {
    "text": "guys go i don't really want to have it a part of the database it's pretty ephemeral i don't care that much about it",
    "start": "237280",
    "end": "243280"
  },
  {
    "text": "that being said it's nice to know like hey go times redirect because we use it for promotion we use it for things that are external like hey",
    "start": "243280",
    "end": "249680"
  },
  {
    "text": "is it actually getting used as a nice thing to know it doesn't have to be super accurate",
    "start": "249680",
    "end": "256720"
  },
  {
    "text": "um we don't have to care like oh it's a robot that hit it versus a human that hit it we don't really care all that much",
    "start": "256720",
    "end": "261759"
  },
  {
    "text": "it's just like i would love to have over time like hey go time.fm is being used js party.fm is being used or not being",
    "start": "261759",
    "end": "268800"
  },
  {
    "text": "used you know because these things are just useful to know and so that's why i thought maybe this is a nice",
    "start": "268800",
    "end": "273840"
  },
  {
    "text": "middle ground for grafana where it's we're doing some way of sending this information over to grafana",
    "start": "273840",
    "end": "279759"
  },
  {
    "text": "i can look at it on dashboard but it doesn't have to be like part of our postgres install and something we back up and like that kind of stuff so",
    "start": "279759",
    "end": "285600"
  },
  {
    "text": "that's my general idea and desire is just to be able to log or note",
    "start": "285600",
    "end": "290800"
  },
  {
    "text": "these redirects in a way that we can then turn into some sort of chart or graph",
    "start": "290800",
    "end": "296960"
  },
  {
    "text": "yeah okay i think i think graphone is the right place for in that case",
    "start": "296960",
    "end": "302720"
  },
  {
    "text": "and i would i would advocate for a promx plug-in but okay i wouldn't",
    "start": "302720",
    "end": "309840"
  },
  {
    "text": "why and why not let's have this debate so uh what i would do i would use uh the uh in",
    "start": "309840",
    "end": "316080"
  },
  {
    "text": "our case the nginx logs because the nginx logs they see all the requests so that's what's in front of",
    "start": "316080",
    "end": "321520"
  },
  {
    "text": "the app we i don't i don't think that",
    "start": "321520",
    "end": "326800"
  },
  {
    "text": "that whether we lock the fqdn part uh in the log lines themselves but we should add that",
    "start": "326800",
    "end": "332479"
  },
  {
    "text": "once we have the fqdn part i'd like us to maybe do a bit of structured logging in",
    "start": "332479",
    "end": "339600"
  },
  {
    "text": "nginx right that would be very powerful because whatever we replace nginx with eventually which will happen",
    "start": "339600",
    "end": "345520"
  },
  {
    "text": "we will have the same logs the idea is if we do it in the app",
    "start": "345520",
    "end": "350560"
  },
  {
    "text": "we would be forced to continue doing those redirects in the app and that's okay that's not a problem but",
    "start": "350560",
    "end": "356479"
  },
  {
    "text": "i know that we have certain assets like the embed.js for example which we serve directly from our",
    "start": "356479",
    "end": "361680"
  },
  {
    "text": "cdn so i don't know going forward whether we keep those redirects",
    "start": "361680",
    "end": "367840"
  },
  {
    "text": "in the app or we put it in the cdn because cdns will be a lot faster so just to give you an idea a request",
    "start": "367840",
    "end": "374319"
  },
  {
    "text": "that goes through the cdn through nginx through the app we're looking at about",
    "start": "374319",
    "end": "380080"
  },
  {
    "text": "500 milliseconds to a second which is a thousand milliseconds embed js that's served directly from the",
    "start": "380080",
    "end": "386000"
  },
  {
    "text": "cdn it's 10 milliseconds flat regardless where you're where you're at so that's like a hundred times",
    "start": "386000",
    "end": "391919"
  },
  {
    "text": "quicker than if you go through the app so while i think keeping the redirects",
    "start": "391919",
    "end": "397440"
  },
  {
    "text": "in the app for now is the right step i think doing more things like logging in the app and having like this like",
    "start": "397440",
    "end": "403600"
  },
  {
    "text": "the redirect how many how many redirects have been triggered i think we should use the logs that we already have for our proxy whatever's in",
    "start": "403600",
    "end": "410960"
  },
  {
    "text": "front of the app because eventually i mean i know that we derive a lot of knowledge and insights",
    "start": "410960",
    "end": "416400"
  },
  {
    "text": "from the cdn like from those logs right right in our like stats how much requests we",
    "start": "416400",
    "end": "422639"
  },
  {
    "text": "have because a lot of the stuff that gets cached by the cnn doesn't even hit the app so if you didn't look at the cdn logs",
    "start": "422639",
    "end": "428319"
  },
  {
    "text": "you would even see that so i think that's the entry point what do you think alex why do you think we",
    "start": "428319",
    "end": "434319"
  },
  {
    "text": "should put this in prom ex uh so from my so i'm just getting into this",
    "start": "434319",
    "end": "439360"
  },
  {
    "text": "i don't know the the architecture so it's good to have that background uh but it would be nice in for my view",
    "start": "439360",
    "end": "445680"
  },
  {
    "text": "just to have the uh like to have explicit callouts in the code that say hey you know",
    "start": "445680",
    "end": "452880"
  },
  {
    "text": "capture some pieces of data regarding this and it's also nice because then we can have like tags for",
    "start": "452880",
    "end": "458560"
  },
  {
    "text": "what um you know what is the destination is it js party is it go time right what was",
    "start": "458560",
    "end": "464879"
  },
  {
    "text": "the individual podcast and i think that fits well as a tag i was initially thinking about if uh if",
    "start": "464879",
    "end": "470479"
  },
  {
    "text": "nginx attaches the uh referrer http header we can have a",
    "start": "470479",
    "end": "475840"
  },
  {
    "text": "plug that just says look for that refer http header and then just emit a telemetry",
    "start": "475840",
    "end": "483840"
  },
  {
    "text": "event and then we can we can capture that data but if it doesn't um and we're we're unable to",
    "start": "483840",
    "end": "490720"
  },
  {
    "text": "let's say get around that uh cdn problem then there's yeah there's a there's a much bigger trade-off that i just wasn't",
    "start": "490720",
    "end": "496080"
  },
  {
    "text": "uh wasn't aware of there yeah yeah so i do like the idea of explicitly having that",
    "start": "496080",
    "end": "504479"
  },
  {
    "text": "logic expressed in the code like because then we can go to the code at a certain point and say what all are we",
    "start": "504479",
    "end": "510720"
  },
  {
    "text": "capturing or what all do we care about and it's the kind of thing that i could potentially add",
    "start": "510720",
    "end": "516240"
  },
  {
    "text": "more things to down the road like oh we also want to know when people",
    "start": "516240",
    "end": "521518"
  },
  {
    "text": "fail to sign in or you know whatever the metric happens to be",
    "start": "521519",
    "end": "526640"
  },
  {
    "text": "and then i could say oh here's how we did it the last time here's how we do it this time so that is attractive that being said i",
    "start": "526640",
    "end": "534640"
  },
  {
    "text": "think i think eventually offloading all this to a cdn you know like an edge thing",
    "start": "534640",
    "end": "543200"
  },
  {
    "text": "definitely makes sense in terms of just response times and flexibility my question to you",
    "start": "543200",
    "end": "549760"
  },
  {
    "text": "gerhardt is like there is application logic in these redirects and it is a kind of thing that i i write",
    "start": "549760",
    "end": "556640"
  },
  {
    "text": "logic from time to time for example like this is hard coded right now because we are accepting oh i quit",
    "start": "556640",
    "end": "563040"
  },
  {
    "text": "screen sharing let me just describe it so there's a specific route jsparty.fm ff",
    "start": "563040",
    "end": "568720"
  },
  {
    "text": "which stands for front-end feud which redirects to a type form and that's because we're collecting",
    "start": "568720",
    "end": "574320"
  },
  {
    "text": "surveys for the next front-end feud episode of jsparty and i want to be able to say on the show go to js party.fm ff",
    "start": "574320",
    "end": "581040"
  },
  {
    "text": "to fill out the form for the front-end feud survey it's just hard-coded it's ephemeral in terms of it'll be gone",
    "start": "581040",
    "end": "586959"
  },
  {
    "text": "in a few months and so there's like logic things like if that did live in a cdn and our cdn right now",
    "start": "586959",
    "end": "594399"
  },
  {
    "text": "is fastly and let's assume that we can get that kind of logic in the fastly i would be going two places i'll go",
    "start": "594399",
    "end": "600320"
  },
  {
    "text": "to the cdn to put that kind of code in and then i'd be going to the application to put other kind of",
    "start": "600320",
    "end": "605360"
  },
  {
    "text": "code in or so that's just that's a a factor of saying is it even",
    "start": "605360",
    "end": "610800"
  },
  {
    "text": "feasible to one day bypass the app altogether for example",
    "start": "610800",
    "end": "616079"
  },
  {
    "text": "we're pulling we are pulling data from the database it's relatively static you know the spotify url for go time is",
    "start": "616079",
    "end": "622160"
  },
  {
    "text": "not going to change the apple url for the changelog is not",
    "start": "622160",
    "end": "627279"
  },
  {
    "text": "going to change but we're pulling it out of the database because that's where we've we administer that data and if we add a",
    "start": "627279",
    "end": "633040"
  },
  {
    "text": "new podcast you know we will add a new apple url and so how would that logic that those",
    "start": "633040",
    "end": "639600"
  },
  {
    "text": "data points live in a cdn or maybe it's like a hit the app once in cash forever",
    "start": "639600",
    "end": "644959"
  },
  {
    "text": "kind of a thing that we would set up over there curious your thoughts on that if we were if we were to say it would be rad eventually to like just",
    "start": "644959",
    "end": "651360"
  },
  {
    "text": "serve this from the cdn yeah so um i do recognize the fact that i've",
    "start": "651360",
    "end": "657040"
  },
  {
    "text": "complicated things a bit by going like to step number two or three with a cdn sure i think the first step",
    "start": "657040",
    "end": "663360"
  },
  {
    "text": "is to rely on the logs that we already have from nginx and the cdn to build those metrics",
    "start": "663360",
    "end": "670320"
  },
  {
    "text": "without doing anything extra in the app because we can see what the app responds with the timings",
    "start": "670320",
    "end": "676320"
  },
  {
    "text": "the headers i don't think we're capturing the location header in the logs we could and if we had that well",
    "start": "676320",
    "end": "683360"
  },
  {
    "text": "we don't have to do anything other than configure the lines that we log we already forward all those logs to",
    "start": "683360",
    "end": "690560"
  },
  {
    "text": "grafana cloud right we are already deriving a lot of metrics from those logs in the final cloud we have dashboards",
    "start": "690560",
    "end": "697519"
  },
  {
    "text": "alerting and all that stuff so all i would have to do is do more of what we're already doing",
    "start": "697519",
    "end": "703440"
  },
  {
    "text": "without touching the app other than as i said exposing the location a",
    "start": "703440",
    "end": "709519"
  },
  {
    "text": "response header in the logs right we can see what was the request we see what the response and part of the",
    "start": "709519",
    "end": "716399"
  },
  {
    "text": "thing that we log is where are we responding the user to go to where are we redirecting this",
    "start": "716399",
    "end": "724480"
  },
  {
    "text": "do you need that location header even because couldn't you just use the request",
    "start": "725600",
    "end": "731279"
  },
  {
    "text": "url like if it's got not fm slash one two three we already know we're hitting the reader yeah yeah we",
    "start": "731279",
    "end": "738959"
  },
  {
    "text": "could get we could just use the request url we would need to append the fqdn part because we don't see the domain",
    "start": "738959",
    "end": "744880"
  },
  {
    "text": "currently in the representation we need more information yeah but when you're redirecting with like with the location for example to an",
    "start": "744880",
    "end": "750720"
  },
  {
    "text": "external service we don't see that because we don't know what the location header is i think",
    "start": "750720",
    "end": "756639"
  },
  {
    "text": "internally it's okay because internally if you think about it we respond with go whatever changelog.com there's",
    "start": "756639",
    "end": "762959"
  },
  {
    "text": "another request which comes back comes back in to change.com unless we're sending them external like",
    "start": "762959",
    "end": "769120"
  },
  {
    "text": "to spotify exactly exactly yeah exactly that's that's again so i was like three steps ahead",
    "start": "769120",
    "end": "775279"
  },
  {
    "text": "sorry for this or compliment i like both purviews like we have to",
    "start": "775279",
    "end": "780800"
  },
  {
    "text": "know what's the simplest best solution for right now but also let's not paint ourselves into a corner",
    "start": "780800",
    "end": "786560"
  },
  {
    "text": "because we can see a future where this makes sense so like what's you know we have to think about all these things we make the decision i",
    "start": "786560",
    "end": "792720"
  },
  {
    "text": "think in light of all of that go ahead one thing which i would like to try is both approaches",
    "start": "792720",
    "end": "798079"
  },
  {
    "text": "because we know the theory part but how difficult would it be to implement both and that's a comparison we can do very",
    "start": "798079",
    "end": "804480"
  },
  {
    "text": "easily right now since right all of us are here which would be very difficult to try without so",
    "start": "804480",
    "end": "809680"
  },
  {
    "text": "since you're ordering the code alex so alex is the is the creator of promx and so alex",
    "start": "809680",
    "end": "817200"
  },
  {
    "text": "uh show us the path to the promx success here what would i do we already have promx",
    "start": "817200",
    "end": "822240"
  },
  {
    "text": "set up in the application right like should i just screen share and start typing or do you want to uh",
    "start": "822240",
    "end": "827279"
  },
  {
    "text": "do you have the code in front of you how do you want to do this yeah so the code's on my linux box okay i'll drive and you",
    "start": "827279",
    "end": "833920"
  },
  {
    "text": "and you tell me what to do here let me share screen again yeah sure so at a high level uh if you want to",
    "start": "833920",
    "end": "839920"
  },
  {
    "text": "capture custom metrics we need to write uh our own plugin uh",
    "start": "839920",
    "end": "845120"
  },
  {
    "text": "to insert into promx so that i could load it up and initialize it and if we're only capturing one data",
    "start": "845120",
    "end": "851279"
  },
  {
    "text": "point which is just the was the referrer or",
    "start": "851279",
    "end": "857440"
  },
  {
    "text": "it's the data point that we care about",
    "start": "857440",
    "end": "861360"
  },
  {
    "text": "so or is it just maybe this part like this",
    "start": "863519",
    "end": "868560"
  },
  {
    "text": "really what we care about is like which show is this",
    "start": "868560",
    "end": "874320"
  },
  {
    "text": "is this js party is a practical ai which is really the the podcast that gets uh fetched",
    "start": "874320",
    "end": "881600"
  },
  {
    "text": "which is pulled out of the url right determine dustin hold on a second let me",
    "start": "881600",
    "end": "886959"
  },
  {
    "text": "remember how i do this so let me just walk through this code so when this plug gets called the podcasts are already loaded we just",
    "start": "886959",
    "end": "894399"
  },
  {
    "text": "we have our published podcasts are always the same so we just pre-cache and load those for every request that comes through the",
    "start": "894399",
    "end": "899839"
  },
  {
    "text": "application so we don't have to go fetching podcasts from the database multiple times so the first thing we do is we get the host out",
    "start": "899839",
    "end": "905120"
  },
  {
    "text": "of the connection and then if the host is changed.com it's like i said it's a no op",
    "start": "905120",
    "end": "910240"
  },
  {
    "text": "otherwise we find which podcast this this particular request refers to",
    "start": "910240",
    "end": "915680"
  },
  {
    "text": "and so uh we make sure we don't find one whose vanity domain is nil the vanity domain is an actual",
    "start": "915680",
    "end": "922079"
  },
  {
    "text": "database uh column in the podcast database and then we find the one whose",
    "start": "922079",
    "end": "927360"
  },
  {
    "text": "uh value domain matches the host of the request so if it's go time.fm that matches the host we find that and",
    "start": "927360",
    "end": "933920"
  },
  {
    "text": "then we call the vanity redirect with the podcast and the connection okay so it sounds like in between line",
    "start": "933920",
    "end": "939680"
  },
  {
    "text": "21 and 22 is where we want to capture that metric because at this point we have the vanity domain right that's right at this point",
    "start": "939680",
    "end": "946000"
  },
  {
    "text": "we know which podcast this refers to and we have the connection string so we can hop in",
    "start": "946000",
    "end": "951839"
  },
  {
    "text": "here and we we could pull out of the connection strings i think what we care about is which podcast is this and then",
    "start": "951839",
    "end": "958160"
  },
  {
    "text": "secondarily maybe what's the destination",
    "start": "958160",
    "end": "963120"
  },
  {
    "text": "i think that's a night that'd be a nice to have yes i think the third thing would be nice to have is the referrer",
    "start": "963440",
    "end": "968880"
  },
  {
    "text": "which is probably the least important to me like hey twitter sending a bunch of traffic to go time.fm maybe interesting yeah",
    "start": "968880",
    "end": "976800"
  },
  {
    "text": "so the only only thing i would be cautious about with the referrer uh so i was i was thinking that referral would be like an internal thing where it's like",
    "start": "976800",
    "end": "983279"
  },
  {
    "text": "uh js party was a referrer when you got redirected to like the change log or",
    "start": "983279",
    "end": "988320"
  },
  {
    "text": "something but if it's uh if if that has the possibility of being like an unbounded",
    "start": "988320",
    "end": "994000"
  },
  {
    "text": "tag uh we just need to make sure that we find some way of of uh clamping it so if we know like uh",
    "start": "994000",
    "end": "1001920"
  },
  {
    "text": "let's say we want to capture from twitter and google and you know a limited number of sources let's have a",
    "start": "1001920",
    "end": "1007680"
  },
  {
    "text": "filter and then if it doesn't fall into that filter the tag just defaults to",
    "start": "1007680",
    "end": "1012959"
  },
  {
    "text": "unknown or something so we have like a defined a discrete number of possible values for that tag uh just",
    "start": "1012959",
    "end": "1019680"
  },
  {
    "text": "because prometheus won't like unbounded values right gotcha i think probably the roi on that feature is",
    "start": "1019680",
    "end": "1025678"
  },
  {
    "text": "low so let's just forget about it i don't really care all that much the reefer what i want to know is like",
    "start": "1025679",
    "end": "1030959"
  },
  {
    "text": "is this redirector being used more or less than it has been in the past right yeah",
    "start": "1030959",
    "end": "1038319"
  },
  {
    "text": "is probably better okay that sounds good so you do think hopping in right after line 21 is where we we now have a",
    "start": "1038319",
    "end": "1044959"
  },
  {
    "text": "connection which is going to be redirected for a specific podcast yep yeah so you could probably just",
    "start": "1044959",
    "end": "1050480"
  },
  {
    "text": "stick a pipe in there and then um maybe just call like a function like",
    "start": "1050480",
    "end": "1057360"
  },
  {
    "text": "capture capture redirect telemetry or something",
    "start": "1057360",
    "end": "1062400"
  },
  {
    "text": "and we just passed the same stuff right we're gonna pass the podcast and the connection why not um we may not use it",
    "start": "1064799",
    "end": "1071760"
  },
  {
    "text": "yet yeah so i guess yeah i guess the podcast is the first argument right yeah we'll be using the connection but all",
    "start": "1071760",
    "end": "1078559"
  },
  {
    "text": "right so let's hop down here somewhere in the private things",
    "start": "1078559",
    "end": "1084559"
  },
  {
    "text": "and we have a podcast and we might not use the connection okay now what okay so it's going to be",
    "start": "1087840",
    "end": "1094799"
  },
  {
    "text": "colon telemetry so this is calling into earling things",
    "start": "1094799",
    "end": "1102000"
  },
  {
    "text": "dot execute and then your first argument here",
    "start": "1102240",
    "end": "1109520"
  },
  {
    "text": "probably an empty map i don't think there's any like um numerical data points that we're",
    "start": "1109520",
    "end": "1115120"
  },
  {
    "text": "capturing here we're not capturing like any uh like durations or timings or anything like that no just the fact that it",
    "start": "1115120",
    "end": "1121440"
  },
  {
    "text": "exists is all that matters yeah and so so this will be a counter uh in in in prometheus and then our next one is",
    "start": "1121440",
    "end": "1128160"
  },
  {
    "text": "our our next map is our um um metadata and so this would be the",
    "start": "1128160",
    "end": "1134000"
  },
  {
    "text": "the podcast now should we send it to the slug should we send it",
    "start": "1134000",
    "end": "1139840"
  },
  {
    "text": "the name of the podcast what is prometheus uh i don't think i don't think it really matters what you uh",
    "start": "1139840",
    "end": "1145760"
  },
  {
    "text": "like if you want it as a slug that works i think it's whatever you want whatever's easier on the eyes let's say when it comes time for",
    "start": "1145760",
    "end": "1151200"
  },
  {
    "text": "uh viewing it yeah the podcast name is certainly easier on the eyes",
    "start": "1151200",
    "end": "1156720"
  },
  {
    "text": "are these going to be labels yeah those will be your labels what what does a podcast name look like",
    "start": "1156720",
    "end": "1163360"
  },
  {
    "text": "is it a slug no what is the podcast it's like the change log up cause i say uppercase c okay whereas the slug would",
    "start": "1163360",
    "end": "1170559"
  },
  {
    "text": "be so the the change log is the outlier most of slugs pretty much match like go time is go time but the change log slug is actually",
    "start": "1170559",
    "end": "1177760"
  },
  {
    "text": "podcast because it was like one so it's not like the top level like one of the six or seven that we have i",
    "start": "1177760",
    "end": "1182880"
  },
  {
    "text": "think exactly at the top the name of the actual podcast we we we call episodes episodes and podcast",
    "start": "1182880",
    "end": "1188559"
  },
  {
    "text": "podcasts sometimes those get used interchangeably yeah that's why okay cool so that makes sense if it's",
    "start": "1188559",
    "end": "1194000"
  },
  {
    "text": "podcast that's okay because it's a fairly small set and it's not growing it's like right",
    "start": "1194000",
    "end": "1199039"
  },
  {
    "text": "that's it yeah yeah okay yeah so like the second thing we might want is the destination which would maybe be a slug of an",
    "start": "1199039",
    "end": "1205679"
  },
  {
    "text": "episode so like if it's go time dot fm slash one two three one two three is the slug of an actual episode um if it's slack",
    "start": "1205679",
    "end": "1213600"
  },
  {
    "text": "actually now i think about it what we really just want is that slug is the",
    "start": "1213600",
    "end": "1220159"
  },
  {
    "text": "is the second part of the url because maybe it's slash apple that's enough information for us to know",
    "start": "1220159",
    "end": "1225760"
  },
  {
    "text": "that's where they're headed is apple if it's slash spotify if it slash one two three that's an episode etc so if we can send both of those",
    "start": "1225760",
    "end": "1232840"
  },
  {
    "text": "things that would be potentially useful you need to think that every combination of labels that you set",
    "start": "1232840",
    "end": "1238559"
  },
  {
    "text": "creates a new time series so if you have change log apple that's",
    "start": "1238559",
    "end": "1245280"
  },
  {
    "text": "one change log spotify that's another time series change log one two three that's",
    "start": "1245280",
    "end": "1250400"
  },
  {
    "text": "another time series and so on and so forth okay so it's not like a drill down where you can say no show me all the change logs and say",
    "start": "1250400",
    "end": "1256320"
  },
  {
    "text": "also show me the change logs with one two three nope no yeah so in this case if it was podcast",
    "start": "1256320",
    "end": "1262000"
  },
  {
    "text": "and then the destination yeah like gerhard was saying so be like so js party go time however many of",
    "start": "1262000",
    "end": "1268880"
  },
  {
    "text": "those there are so let's say like there's six or seven right and let's say destinations are another six or seven it would be six or",
    "start": "1268880",
    "end": "1274400"
  },
  {
    "text": "seven times six or seven so 50 so yeah so you're ended up with like you know 30 to 50 depending on what you've what",
    "start": "1274400",
    "end": "1281200"
  },
  {
    "text": "you're looking at yeah which isn't which isn't too much which would be fine if we were just but then if you if you add the number as",
    "start": "1281200",
    "end": "1286559"
  },
  {
    "text": "well that'll also blow up the the time series uh data points",
    "start": "1286559",
    "end": "1292080"
  },
  {
    "text": "so when you have when when there's sparse and you have like a lot of them that's when you start having problems",
    "start": "1292080",
    "end": "1297280"
  },
  {
    "text": "yeah it's uh the high cardinality problem with prometheus that's where metrics people are trying to do things",
    "start": "1297280",
    "end": "1303679"
  },
  {
    "text": "with metrics that they were not designed to do and that this is one such example",
    "start": "1303679",
    "end": "1309120"
  },
  {
    "text": "um in that case you want like like events or data structures which are okay to be like infinitely wide you can cram",
    "start": "1309120",
    "end": "1315039"
  },
  {
    "text": "as many data points as you want it doesn't matter because they get interpreted just in time at query time",
    "start": "1315039",
    "end": "1321039"
  },
  {
    "text": "which is another reason to use logs because logs you can stick as many details as you want and",
    "start": "1321039",
    "end": "1326880"
  },
  {
    "text": "then when you query them that's when they get computed okay so let's if it was just",
    "start": "1326880",
    "end": "1332799"
  },
  {
    "text": "the static destinations i would say maybe let's do that because we could have 50 of them",
    "start": "1332799",
    "end": "1337840"
  },
  {
    "text": "but because we're always adding episode ids and you can definitely use these for episodes like one of the main use cases",
    "start": "1337840",
    "end": "1343840"
  },
  {
    "text": "is here's a new episode go check it out you know and it's gonna just always",
    "start": "1343840",
    "end": "1350000"
  },
  {
    "text": "increment five times a week so let's let's let's leave that off",
    "start": "1350000",
    "end": "1355280"
  },
  {
    "text": "so is this it uh so is this all the metadata we need to capture is the",
    "start": "1356480",
    "end": "1361600"
  },
  {
    "text": "podcast name or do we also need the apple spotify that kind of stuff i think let's just leave it off",
    "start": "1361600",
    "end": "1368080"
  },
  {
    "text": "leave it all right so it's just a podcast so effectively we're just going to capture here how often are we leveraging the vanity",
    "start": "1368080",
    "end": "1374720"
  },
  {
    "text": "url stuff exactly okay um okay yes we have our",
    "start": "1374720",
    "end": "1379840"
  },
  {
    "text": "we have our metadata we have our uh our measurements all right so right before that first map now that we've got all of our our data",
    "start": "1379840",
    "end": "1387039"
  },
  {
    "text": "points together make a list and then we're going to find a way of name",
    "start": "1387039",
    "end": "1394240"
  },
  {
    "text": "spacing our telemetry events so i would do it's a list of atoms so i",
    "start": "1394240",
    "end": "1399360"
  },
  {
    "text": "would do colon uh you know the change log",
    "start": "1399360",
    "end": "1404480"
  },
  {
    "text": "like the change line on the string or what are you talking about oh colin i got the symbol yeah so yeah adam yeah gotcha sorry",
    "start": "1404480",
    "end": "1413200"
  },
  {
    "text": "and then um you know comma and then whatever you want to call uh this data point so maybe we just say",
    "start": "1415520",
    "end": "1422320"
  },
  {
    "text": "like uh i don't know then url",
    "start": "1422320",
    "end": "1428720"
  },
  {
    "text": "isn't it a redirect what's your column i call them redirects change yeah we just call them redirects okay",
    "start": "1429440",
    "end": "1435360"
  },
  {
    "text": "yeah it works and i think that you want to make it a bit more specific so changelog redirects",
    "start": "1435360",
    "end": "1441200"
  },
  {
    "text": "for maybe something more specific or is it just like a generic redirect",
    "start": "1441200",
    "end": "1447520"
  },
  {
    "text": "i mean these are promotional or short you know they're basically like",
    "start": "1447520",
    "end": "1454480"
  },
  {
    "text": "vanity redirects is what we call but i refer to them in my head as their these are our vanity redirects",
    "start": "1454480",
    "end": "1460400"
  },
  {
    "text": "okay so maybe vanity redirects vanity underscore redirects that makes sense yes this list could be of any size so",
    "start": "1460400",
    "end": "1466400"
  },
  {
    "text": "you could do change log vanity and then yeah redirects is your last are we trying to now tell",
    "start": "1466400",
    "end": "1473440"
  },
  {
    "text": "is this telling prometheus like the kind of like the name space to put these into kind of a thing",
    "start": "1473440",
    "end": "1479520"
  },
  {
    "text": "uh so this is this is just for telemetry right now so the the the the execute function in",
    "start": "1479520",
    "end": "1485360"
  },
  {
    "text": "telemetry the first uh the first argument is the id so like what uh what is the id of this event where",
    "start": "1485360",
    "end": "1492880"
  },
  {
    "text": "you could have other things attached to so prompts will need to know about this uh change law and vanity redirects list",
    "start": "1492880",
    "end": "1498720"
  },
  {
    "text": "because that's the idea to attach to this event and the other two maps are just the data associated with it the first being the measurements",
    "start": "1498720",
    "end": "1505039"
  },
  {
    "text": "and the last one being the uh the metadata gotcha so so promx is going to glom onto the",
    "start": "1505039",
    "end": "1510320"
  },
  {
    "text": "built-in telemetry things to send it over to prometheus gotcha let's just leave it like this that feels good",
    "start": "1510320",
    "end": "1517440"
  },
  {
    "text": "cool uh yeah so we're done here so you could say that okay and then um",
    "start": "1517440",
    "end": "1524070"
  },
  {
    "text": "[Music] now we need a promise plugin yep yeah so if you go to",
    "start": "1524070",
    "end": "1530000"
  },
  {
    "text": "so hang on uh we needed capture redirect telemetry are we sending the podcast i thought you're only sending",
    "start": "1530000",
    "end": "1537360"
  },
  {
    "text": "oh i see okay sorry yeah the podcast is implied right because it's the it's the map first argument it's the first argument",
    "start": "1537440",
    "end": "1544159"
  },
  {
    "text": "to this in fact i can just pull that connection string out well let's leave it there in case eventually i want to go",
    "start": "1544159",
    "end": "1549360"
  },
  {
    "text": "use it but yeah um yeah it's basically here in the pipeline right okay so it's part of the pipe",
    "start": "1549360",
    "end": "1555520"
  },
  {
    "text": "that's the bit which i missed cool now it looks like i do have a no op in the case that we",
    "start": "1555520",
    "end": "1560799"
  },
  {
    "text": "didn't match a vanity domain and so edom.find might return nil",
    "start": "1560799",
    "end": "1568240"
  },
  {
    "text": "um yes i can do the same thing for that function yes obviously just do the same thing so have a nail a no match and then",
    "start": "1568840",
    "end": "1576000"
  },
  {
    "text": "yeah exactly uh return podcaster or return nil i guess let's see what i",
    "start": "1576000",
    "end": "1582400"
  },
  {
    "text": "do wouldn't you want to know when this gets hit if anything",
    "start": "1582400",
    "end": "1587600"
  },
  {
    "text": "when you do get like a nil podcast if anything these are the interesting ones to catch right because you would expect to have",
    "start": "1587600",
    "end": "1593520"
  },
  {
    "text": "it or you're like you'd want to know what users are using for which you're not returning a podcast",
    "start": "1593520",
    "end": "1599919"
  },
  {
    "text": "oh it's true yeah yeah is this uh is it something that gets hit often i know or or we don't or we don't",
    "start": "1599919",
    "end": "1606400"
  },
  {
    "text": "know which is actually a really good thing to capture like so um basically the only way this would",
    "start": "1606400",
    "end": "1611760"
  },
  {
    "text": "get hit without a known podcast because if it's changed.com like if it's a 404 or something that we don't",
    "start": "1611760",
    "end": "1617200"
  },
  {
    "text": "actually use it's going to hit change.com and it's going to bypass us anyway so this would have to be like",
    "start": "1617200",
    "end": "1623120"
  },
  {
    "text": "a domain that's not chainsaw.com so it still gets routed to our app somehow",
    "start": "1623120",
    "end": "1628320"
  },
  {
    "text": "and then is not matching one of our podcasts so i mean i think it would be pretty",
    "start": "1628320",
    "end": "1634559"
  },
  {
    "text": "rare but yeah i mean if we want to just capture and see if it ever happens maybe we learn a thing yep yeah sure so would we then hijack",
    "start": "1634559",
    "end": "1642559"
  },
  {
    "text": "this and instead of sending this we send a different data point we send",
    "start": "1642559",
    "end": "1648399"
  },
  {
    "text": "like a nil podcast nil or what would how would we send it anyways yeah i mean see so you can give",
    "start": "1648399",
    "end": "1654080"
  },
  {
    "text": "that previous function a body and then just like copy and paste that execute and then yeah let's maybe change uh",
    "start": "1654080",
    "end": "1663120"
  },
  {
    "text": "yeah change the metadata and then instead of instead of sending",
    "start": "1663520",
    "end": "1670000"
  },
  {
    "text": "it podcast that name and we just say you know sound like a string uh you know unknown or error or",
    "start": "1670000",
    "end": "1675679"
  },
  {
    "text": "something that lets us know that right wonky at that point i almost want to know what they were requesting",
    "start": "1675679",
    "end": "1682000"
  },
  {
    "text": "though because now i know that they didn't hit anything right but if i just send over like unknown then it's like",
    "start": "1682000",
    "end": "1687279"
  },
  {
    "text": "well a bunch of unknown ones yeah so here's where we get down the unbound problem right",
    "start": "1687279",
    "end": "1692399"
  },
  {
    "text": "exactly yeah so here's where you would leverage logs so you know maybe you maybe you kept capture both some piece of",
    "start": "1692399",
    "end": "1700080"
  },
  {
    "text": "time series data so it's easier to see like on a graph and that'll pinpoint you to somewhere in the logs or you can start",
    "start": "1700080",
    "end": "1707360"
  },
  {
    "text": "looking at individual events and picking out what exactly is going on",
    "start": "1707360",
    "end": "1712399"
  },
  {
    "text": "okay so we'll just leave it as unknown because that's bound and that'll at least tell us that you know how often that thing's getting hit and we can dive deeper if it's a",
    "start": "1712399",
    "end": "1718880"
  },
  {
    "text": "problem or it's a interesting thing to dive into yeah we do one tiny tiny refactoring",
    "start": "1718880",
    "end": "1725279"
  },
  {
    "text": "where we extract to learn to execute another function name and then we just call it function with either unknown or podcast",
    "start": "1725279",
    "end": "1733600"
  },
  {
    "text": "you want to pull out another function and have these functions call the function yeah those two exactly because talent",
    "start": "1733600",
    "end": "1739520"
  },
  {
    "text": "execute is the same the only thing that differs is the podcast name it's either the actual podcast name",
    "start": "1739520",
    "end": "1744720"
  },
  {
    "text": "or it's unknown okay so we'll call this one uh",
    "start": "1744720",
    "end": "1749840"
  },
  {
    "text": "execute telemetry yeah and yeah pass in",
    "start": "1749840",
    "end": "1756399"
  },
  {
    "text": "the uh a little bit to actually the name or whatever you want to call it and",
    "start": "1756399",
    "end": "1762080"
  },
  {
    "text": "then the connection actually we don't use the connection we don't use the connection at this point but i have to refactor this down the",
    "start": "1762080",
    "end": "1767840"
  },
  {
    "text": "road if we do and uh execute",
    "start": "1767840",
    "end": "1776320"
  },
  {
    "text": "yeah usually the way to do this is they'll people create like a telemetry module and that telemetry",
    "start": "1776399",
    "end": "1782399"
  },
  {
    "text": "module have all the execute calls that you'll eventually make in your app and just so that they're nicely",
    "start": "1782399",
    "end": "1787919"
  },
  {
    "text": "compartmentalized into like one module or you can you know you can kind of see all the events that your app",
    "start": "1787919",
    "end": "1793679"
  },
  {
    "text": "is emitting i love that idea so we could we could do that refactoring",
    "start": "1793679",
    "end": "1799039"
  },
  {
    "text": "later if we want there totally totally 49 what cost on the score name it's because like what",
    "start": "1799039",
    "end": "1806320"
  },
  {
    "text": "name is it it's always painting in podcast that's perfect",
    "start": "1806320",
    "end": "1811520"
  },
  {
    "text": "all right sweet we're happy take us to this promx plugin where do we",
    "start": "1811520",
    "end": "1817120"
  },
  {
    "text": "put those sounds good um so if we look where did we so open up the",
    "start": "1817120",
    "end": "1825039"
  },
  {
    "text": "change log directory um let me get in",
    "start": "1825039",
    "end": "1832720"
  },
  {
    "text": "problem yeah so promise will be there because that's the definition where all",
    "start": "1833039",
    "end": "1838080"
  },
  {
    "text": "the like the the first party plugins are but if you look on line 14 uh you know i include some nice comments",
    "start": "1838080",
    "end": "1844799"
  },
  {
    "text": "where it's like you couldn't you know you could include your own uh gotcha uh plugins um",
    "start": "1844799",
    "end": "1850159"
  },
  {
    "text": "so you could probably just make like another directory here and change log that's uh maybe like promix plugins",
    "start": "1850159",
    "end": "1858480"
  },
  {
    "text": "and have one called uh vanity redirects or what yeah i call like redirects uh",
    "start": "1862320",
    "end": "1869840"
  },
  {
    "text": "um just like this yeah that's fine that works or i mean if one i guess if you want to get specific with uh",
    "start": "1869840",
    "end": "1875840"
  },
  {
    "text": "with vanity i think vanity would be better you know yeah you will have like end up with a bunch of redirects in a bunch of places you don't know which is",
    "start": "1875840",
    "end": "1882240"
  },
  {
    "text": "which that's true yeah fair enough all right let me go back to this uh yep so go to",
    "start": "1882240",
    "end": "1889760"
  },
  {
    "text": "promx now and add that yeah so here you have uh",
    "start": "1889760",
    "end": "1895519"
  },
  {
    "text": "tuples but i can just add like a bear plugin like this yep it could be just like line nine",
    "start": "1895519",
    "end": "1901919"
  },
  {
    "text": "prompt x dot oh wait what",
    "start": "1901919",
    "end": "1906960"
  },
  {
    "text": "so there's our module name yep that's a time of that yeah so so the tuple format is if you",
    "start": "1911519",
    "end": "1918799"
  },
  {
    "text": "have a plug-in and that plug-in requires some um some options okay so that was like for locations yeah",
    "start": "1918799",
    "end": "1924960"
  },
  {
    "text": "like the beam plug-in on nine um that one doesn't require any options that'll eventually get renamed to erlang",
    "start": "1924960",
    "end": "1931279"
  },
  {
    "text": "plug-in for the airline virtual machine uh but uh yeah all right so inside this file i",
    "start": "1931279",
    "end": "1938240"
  },
  {
    "text": "now have a module called changelog.promx.vanity redirects and that's what we have there so i assume we're looking good",
    "start": "1938240",
    "end": "1944080"
  },
  {
    "text": "yep looking good so far uh so at the tippy top we're going to use promix.plugin which is a module in the",
    "start": "1944080",
    "end": "1950399"
  },
  {
    "text": "library uh capital e",
    "start": "1950399",
    "end": "1955679"
  },
  {
    "text": "yeah okay and then uh you're going to have so since this is an",
    "start": "1955679",
    "end": "1960880"
  },
  {
    "text": "event metric you're going to have a function called event metrics",
    "start": "1960880",
    "end": "1967120"
  },
  {
    "text": "so def event metrics okay and right before that you're going to add at impul true because it's actually",
    "start": "1967120",
    "end": "1974640"
  },
  {
    "text": "part of the the promise plug-in behavior and that takes in an argument of ops",
    "start": "1974640",
    "end": "1980880"
  },
  {
    "text": "options so you could just put an underscore there since you're not going to be leveraging that",
    "start": "1980880",
    "end": "1986880"
  },
  {
    "text": "okay oh line two the plugin p is capital oh yeah thank",
    "start": "1986880",
    "end": "1992960"
  },
  {
    "text": "you i should have known because my syntax highlighter failed",
    "start": "1992960",
    "end": "1998960"
  },
  {
    "text": "um and then um so we're going to do event dot build",
    "start": "1998960",
    "end": "2007679"
  },
  {
    "text": "capital e and so this is going to build um",
    "start": "2007679",
    "end": "2014559"
  },
  {
    "text": "a collection of metrics that that promise will be exporting and so the first argument here will be",
    "start": "2014559",
    "end": "2020480"
  },
  {
    "text": "like an id that denotes what group of uh of metrics",
    "start": "2020480",
    "end": "2025600"
  },
  {
    "text": "this is you could do it's an atom so you could do colon um and maybe you repeat like",
    "start": "2025600",
    "end": "2031110"
  },
  {
    "text": "[Music] change log underscore vanity underscore",
    "start": "2031110",
    "end": "2036240"
  },
  {
    "text": "redirects okay and then the next argument is a",
    "start": "2036240",
    "end": "2041760"
  },
  {
    "text": "list and that'll be all the all the metrics associated with this group",
    "start": "2041760",
    "end": "2047120"
  },
  {
    "text": "so it'll just be a list of of one entry because that's all we're capturing here",
    "start": "2047120",
    "end": "2052560"
  },
  {
    "text": "uh and then inside of here uh since the data point that we're capturing is a counter",
    "start": "2052560",
    "end": "2059118"
  },
  {
    "text": "so in another beam telemetry project called telemetry metrics which is an",
    "start": "2059119",
    "end": "2064320"
  },
  {
    "text": "elixir project they define a whole bunch of functions for for generating these data points",
    "start": "2064320",
    "end": "2071118"
  },
  {
    "text": "and i actually automatically import all of those functions when you use promix.plugin okay so you can just call",
    "start": "2071119",
    "end": "2077118"
  },
  {
    "text": "the function counter and the the first argument will be that",
    "start": "2077119",
    "end": "2084158"
  },
  {
    "text": "list of uh of ids this one uh yep yeah that one so you",
    "start": "2084159",
    "end": "2091679"
  },
  {
    "text": "just snatch that whole uh thing and then um yeah from here we just have",
    "start": "2091679",
    "end": "2099440"
  },
  {
    "text": "to fill out a bit of metadata uh regarding the event so the next uh what you call it the next",
    "start": "2099440",
    "end": "2107760"
  },
  {
    "text": "argument is a keyword list and so it'll be event",
    "start": "2107760",
    "end": "2113200"
  },
  {
    "text": "underscore name event underscore name",
    "start": "2113200",
    "end": "2120079"
  },
  {
    "text": "uh yeah and then we can actually give it we could probably give it the same value so the uh",
    "start": "2120079",
    "end": "2126960"
  },
  {
    "text": "change log this one yeah another their list yeah the list that works",
    "start": "2126960",
    "end": "2135119"
  },
  {
    "text": "okay and then our next keyword value will be a description",
    "start": "2136160",
    "end": "2141200"
  },
  {
    "text": "and then this is a string of you know any any helpful bit of information",
    "start": "2143440",
    "end": "2149280"
  },
  {
    "text": "change log vanity redirects doesn't matter yeah do i want to use this down the road",
    "start": "2149280",
    "end": "2155200"
  },
  {
    "text": "uh so this will pop up on um unlike your help in grafana",
    "start": "2155200",
    "end": "2160240"
  },
  {
    "text": "and in in prometheus all right",
    "start": "2160240",
    "end": "2164960"
  },
  {
    "text": "i'm trying to make this a little more legible not really working do you have your formatters set up in vs",
    "start": "2166079",
    "end": "2172720"
  },
  {
    "text": "code i have an elixir format oh you mean like mixed format",
    "start": "2172720",
    "end": "2178640"
  },
  {
    "text": "no but i can run it right here also you should definitely you should definitely get that that's just going to auto format for me",
    "start": "2178640",
    "end": "2185040"
  },
  {
    "text": "as i go uh so i have i have it set up in vim where uh like every time i save the file",
    "start": "2185040",
    "end": "2191040"
  },
  {
    "text": "it'll automatically run it through mixed format oh nice and then i don't have to worry about formatting by hand i just run it i just",
    "start": "2191040",
    "end": "2197599"
  },
  {
    "text": "run this format every once in a while before i commit um i should get that set up so i have a",
    "start": "2197599",
    "end": "2202720"
  },
  {
    "text": "syntax error at this point so i can't run it okay all right so after description uh you're also going to have",
    "start": "2202720",
    "end": "2209070"
  },
  {
    "text": "[Music] an entry called tags okay",
    "start": "2209070",
    "end": "2217920"
  },
  {
    "text": "and then uh as an atom it's going to be that the tag that we",
    "start": "2217920",
    "end": "2224000"
  },
  {
    "text": "had in the metadata or that entry that we had in the metadata so what did we call that do we call it name or if you go back to the other file",
    "start": "2224000",
    "end": "2231359"
  },
  {
    "text": "underscore name [Music] i think we call it podcast yeah podcast yep so just yeah do podcast",
    "start": "2231359",
    "end": "2238320"
  },
  {
    "text": "okay um i think i think that's it we're done",
    "start": "2238320",
    "end": "2247520"
  },
  {
    "text": "oh i got that closed i got that closed i got this this function closed let's",
    "start": "2254640",
    "end": "2260560"
  },
  {
    "text": "see here unexpected keyword end do we have an extra end there i got two ends one's for the module",
    "start": "2260560",
    "end": "2267599"
  },
  {
    "text": "right def do and uh 10-1",
    "start": "2267599",
    "end": "2275680"
  },
  {
    "text": "help me out here guys def module oh do i have a do up here oh",
    "start": "2276400",
    "end": "2284160"
  },
  {
    "text": "there we go yeah there you go i kept looking at the body so did i",
    "start": "2284160",
    "end": "2289680"
  },
  {
    "text": "mix is it filmed or format i can't remember i'm so used to the gofundme i guess i was actually experimenting",
    "start": "2290960",
    "end": "2297280"
  },
  {
    "text": "with an ee ex format of this weekend",
    "start": "2297280",
    "end": "2302400"
  },
  {
    "text": "let's see it change in real time go ahead oh there it goes much nicer okay",
    "start": "2302960",
    "end": "2310880"
  },
  {
    "text": "so we're good here we're good we should be able to start up the app now and as long as we hit that code path um",
    "start": "2310960",
    "end": "2318320"
  },
  {
    "text": "we can go to slash metrics or whatever and actually see that",
    "start": "2318320",
    "end": "2323599"
  },
  {
    "text": "counter incrementing um okay so i can",
    "start": "2323599",
    "end": "2329760"
  },
  {
    "text": "can i actually hit that code path locally i was like that was your next question can you actually hit that pad",
    "start": "2329760",
    "end": "2334880"
  },
  {
    "text": "that i think probably this will become the most difficult part hold on",
    "start": "2334880",
    "end": "2341040"
  },
  {
    "text": "we can do it well i'll have to set up a etsy host thing no okay okay",
    "start": "2341040",
    "end": "2347599"
  },
  {
    "text": "don't worry i've got a problem on uh could not start app yeah oh my bad that",
    "start": "2347599",
    "end": "2352720"
  },
  {
    "text": "has to be a list of uh uh yeah so if you go so it's yeah tags",
    "start": "2352720",
    "end": "2358800"
  },
  {
    "text": "uh no so you're on the right module yeah tags just has to be a list of atoms so just it'll be a one",
    "start": "2358800",
    "end": "2364240"
  },
  {
    "text": "element list there you go that yeah that should be good let's see if i can run the server all right",
    "start": "2364240",
    "end": "2370000"
  },
  {
    "text": "gerhard how would i uh hit go time.fm slash",
    "start": "2370000",
    "end": "2375359"
  },
  {
    "text": "you anything okay our server is booted go ahead",
    "start": "2375359",
    "end": "2382880"
  },
  {
    "text": "anything you want it to be oh you cut out on me i think it's me again i was saying that uh you do a curl",
    "start": "2382880",
    "end": "2389920"
  },
  {
    "text": "you create a local host and you set a host header so carol wherever your service running",
    "start": "2389920",
    "end": "2396800"
  },
  {
    "text": "http or localhost 4000 and not https",
    "start": "2396800",
    "end": "2402160"
  },
  {
    "text": "do you have https yes okay well i might not start it with https but i do",
    "start": "2402160",
    "end": "2408800"
  },
  {
    "text": "yeah i mean you don't need you don't need https well i've had trouble with my actual now that https is set up i had",
    "start": "2408800",
    "end": "2414160"
  },
  {
    "text": "trouble with the non-https okay cool this one generally works",
    "start": "2414160",
    "end": "2419680"
  },
  {
    "text": "okay 4001. that's okay so get the url that you would expect to redirect dash k",
    "start": "2419680",
    "end": "2427200"
  },
  {
    "text": "because it's self-signed cert so curl as you had it before but dash k",
    "start": "2427200",
    "end": "2432640"
  },
  {
    "text": "skip verification small k",
    "start": "2432640",
    "end": "2439040"
  },
  {
    "text": "okay there you go okay uh and now you want to do dash capital h",
    "start": "2439040",
    "end": "2444480"
  },
  {
    "text": "for header okay uh single bracket double yeah",
    "start": "2444480",
    "end": "2449920"
  },
  {
    "text": "single double uh quote doesn't matter host capital uh sorry just uh first bar like",
    "start": "2449920",
    "end": "2457680"
  },
  {
    "text": "title case host host 18 to go time dot fm",
    "start": "2457680",
    "end": "2463119"
  },
  {
    "text": "okay close the single yeah and now put the url that you expect to work so",
    "start": "2463119",
    "end": "2468640"
  },
  {
    "text": "localhost four thousand one four slash i know whatever apple yep",
    "start": "2468640",
    "end": "2474480"
  },
  {
    "text": "dude before you do this let's do if you go back up if you do dash o",
    "start": "2474480",
    "end": "2481040"
  },
  {
    "text": "and let's redirect to dev null the response because we don't care about it",
    "start": "2481040",
    "end": "2486640"
  },
  {
    "text": "uh you don't want to redirect everything just dash o oh dash yeah that's it cool",
    "start": "2487599",
    "end": "2496400"
  },
  {
    "text": "uh and dash um v s",
    "start": "2496400",
    "end": "2500880"
  },
  {
    "text": "what's that sorry i was already v for verbose ask for s for silent yeah that's what i",
    "start": "2503040",
    "end": "2509760"
  },
  {
    "text": "want to verbose and silent gerhard come on no no no you want something to be verbose but something else to be silent",
    "start": "2509760",
    "end": "2515760"
  },
  {
    "text": "they're for different things you can be i'll be silent so we have an error because i think i'm",
    "start": "2515760",
    "end": "2521280"
  },
  {
    "text": "returning something incorrectly apple url undefined module oh you know what we gotta do",
    "start": "2521280",
    "end": "2526800"
  },
  {
    "text": "is we have to actually return we have to be able to it's chained so we have to return",
    "start": "2526800",
    "end": "2534160"
  },
  {
    "text": "the podcast and the connection oh yeah for the non-nil one yeah right for both so that would be nil",
    "start": "2534160",
    "end": "2540000"
  },
  {
    "text": "but now our refactoring doesn't look so hot this is what happens when you don't try tests",
    "start": "2540000",
    "end": "2545760"
  },
  {
    "text": "exactly and the connection is still available",
    "start": "2545760",
    "end": "2552880"
  },
  {
    "text": "though uh but i think you passed that in that's the second argument so we just gotta we just gotta forward",
    "start": "2552880",
    "end": "2559359"
  },
  {
    "text": "the the podcast along yeah exactly that's what i was just thinking through so here we got four of these things yeah is is the l1",
    "start": "2559359",
    "end": "2566160"
  },
  {
    "text": "okay the other one is okay with nil right if we just return with nil i mean i guess it was getting nailed beforehand",
    "start": "2566160",
    "end": "2572400"
  },
  {
    "text": "better than implicit yeah so",
    "start": "2572400",
    "end": "2579839"
  },
  {
    "text": "let's see if that one works looks like it worked",
    "start": "2580640",
    "end": "2585759"
  },
  {
    "text": "okay so what did you get yeah what did you get first of all what did you get uh what was the response that's what we",
    "start": "2585839",
    "end": "2591280"
  },
  {
    "text": "care about well it's for two verbose a 404. so we got to four or four we did we didn't one pound did we",
    "start": "2591280",
    "end": "2597359"
  },
  {
    "text": "no so the reason we got a four or four was that we could not find uh",
    "start": "2597359",
    "end": "2604319"
  },
  {
    "text": "the slug is apple pizza the slug shouldn't be apple the",
    "start": "2604319",
    "end": "2609359"
  },
  {
    "text": "slug should be go time so did the request actually include the",
    "start": "2609359",
    "end": "2614560"
  },
  {
    "text": "host header that we said it would",
    "start": "2614560",
    "end": "2620560"
  },
  {
    "text": "the slug is apple the host header should have been go time.fm the query was on",
    "start": "2620560",
    "end": "2627760"
  },
  {
    "text": "which line oh now he's oh he's back yeah you're back you're",
    "start": "2627760",
    "end": "2632839"
  },
  {
    "text": "back turns out i have to edit this sucker gosh that's a lot of cutouts i'm back",
    "start": "2632839",
    "end": "2640079"
  },
  {
    "text": "for now what i was saying is i'm not sure when i cut out because i was talking to you guys for a little while before i realized it",
    "start": "2640079",
    "end": "2645920"
  },
  {
    "text": "yep that uh it looks like we are not finding the podcast",
    "start": "2645920",
    "end": "2653280"
  },
  {
    "text": "can we see what host you're passing in can we see whether you're actually",
    "start": "2653359",
    "end": "2658640"
  },
  {
    "text": "passing in um so which one takes precedence does the host header take precedence over the",
    "start": "2658640",
    "end": "2666319"
  },
  {
    "text": "header in the url so you're over the like request url i mean right here i i called githo so i",
    "start": "2666319",
    "end": "2672400"
  },
  {
    "text": "could do like uh okay you wanna share your screen again oh yeah shoot",
    "start": "2672400",
    "end": "2677760"
  },
  {
    "text": "unless that puts too much strain on the uh well we want to be on the network that's almost better",
    "start": "2677760",
    "end": "2684400"
  },
  {
    "text": "so i get longer dot info post right here yes let's just make sure that we are",
    "start": "2686720",
    "end": "2691839"
  },
  {
    "text": "passing the correct host through and if not then we'll use another trick",
    "start": "2691839",
    "end": "2696960"
  },
  {
    "text": "there's two",
    "start": "2696960",
    "end": "2705838"
  },
  {
    "text": "recompile info it's blank yeah so the host the",
    "start": "2706400",
    "end": "2712319"
  },
  {
    "text": "host is blank okay so the host okay so we didn't get it from the header cool so now let's do",
    "start": "2712319",
    "end": "2717520"
  },
  {
    "text": "uh so in curl again rather than doing the header if you remove the header part",
    "start": "2717520",
    "end": "2724640"
  },
  {
    "text": "let's do dash dash resolve",
    "start": "2725359",
    "end": "2733280"
  },
  {
    "text": "and now you do go time dot fm and you do colon um",
    "start": "2733280",
    "end": "2740640"
  },
  {
    "text": "four okay it's uh four to nine and obviously this is this is untenable",
    "start": "2740640",
    "end": "2747040"
  },
  {
    "text": "so let's leave everything right where it is reschedule to continue",
    "start": "2747040",
    "end": "2752079"
  },
  {
    "text": "next time hey we're back and just like gamestop",
    "start": "2752079",
    "end": "2759280"
  },
  {
    "text": "stock you know if you if you turn your back for a minute there's like a whole new section of it that's not even a very",
    "start": "2759280",
    "end": "2764319"
  },
  {
    "text": "good joke but we have another person here and we're wearing different clothes and",
    "start": "2764319",
    "end": "2769920"
  },
  {
    "text": "uh that's because the internets were really bad on monday we got 12 inches of snow",
    "start": "2769920",
    "end": "2776000"
  },
  {
    "text": "roughly in the area and somehow it got all the way down on the ground and affected my fiber connection i don't",
    "start": "2776000",
    "end": "2781440"
  },
  {
    "text": "know i don't know how that works but anyways let's pick up right where we left off let's catch up lars",
    "start": "2781440",
    "end": "2787599"
  },
  {
    "text": "because you weren't here on monday yeah what have you been up to yeah so we are trying to add some",
    "start": "2787599",
    "end": "2795520"
  },
  {
    "text": "metrics around our vanity redirects so we have a bunch of short domains go",
    "start": "2795520",
    "end": "2800800"
  },
  {
    "text": "time.fm jsparty.fm practicallyai.fm",
    "start": "2800800",
    "end": "2806000"
  },
  {
    "text": "changelog.com actually works like that as well i think there's a change to the different we don't use it and those are used for on the air we",
    "start": "2806680",
    "end": "2813520"
  },
  {
    "text": "want to say like you know go to go type that fm slash one two three and that will get you to the right change",
    "start": "2813520",
    "end": "2819040"
  },
  {
    "text": "log subsection of the website that go time actually lives on and then we use them in promo promos and",
    "start": "2819040",
    "end": "2824240"
  },
  {
    "text": "stuff like that so every clip that we put at the end is like practically.fm this",
    "start": "2824240",
    "end": "2829280"
  },
  {
    "text": "to go there and we use that when we link out on twitter and stuff because it's nice branded short url",
    "start": "2829280",
    "end": "2835040"
  },
  {
    "text": "and uh it's in the it's part of the application it just basically you know does some smart detecting and redirecting",
    "start": "2835040",
    "end": "2842079"
  },
  {
    "text": "and what i would love to have is just very basic metrics around whether or not that system is being used",
    "start": "2842079",
    "end": "2848480"
  },
  {
    "text": "um and for what purpose so i called in the pros the the metrics pros",
    "start": "2848480",
    "end": "2856000"
  },
  {
    "text": "alex and gerhard to help us get that going we came up with two solutions one was",
    "start": "2856000",
    "end": "2861359"
  },
  {
    "text": "using nginx logs and which is already kind of set up we just need to basically add probably a",
    "start": "2861359",
    "end": "2866400"
  },
  {
    "text": "few new things and then get that going in grafana and the other solution was like in the app code with promx write a plugin and have promx",
    "start": "2866400",
    "end": "2874720"
  },
  {
    "text": "send the data over to grafana and we decided to implement both just because we were having fun so we",
    "start": "2874720",
    "end": "2882400"
  },
  {
    "text": "started doing promx stuff and then we got stuck somewhere we're curling remind me",
    "start": "2882400",
    "end": "2889520"
  },
  {
    "text": "gearheart we were curling to see if the actual thing worked uh on my local host let me share screen",
    "start": "2889520",
    "end": "2896720"
  },
  {
    "text": "and you were teaching me some curl foo with like host headers and",
    "start": "2896720",
    "end": "2901920"
  },
  {
    "text": "extra flags so this whoops so i actually didn't copy paste that i",
    "start": "2901920",
    "end": "2907119"
  },
  {
    "text": "thought i did this one here was the last one i ran that's right",
    "start": "2907119",
    "end": "2912400"
  },
  {
    "text": "so uh you see um the one before we we were setting the host header that didn't work so we're connecting to",
    "start": "2912400",
    "end": "2918319"
  },
  {
    "text": "localhost but we're just setting the host header the other approach is to resolve it explicitly so curl",
    "start": "2918319",
    "end": "2924000"
  },
  {
    "text": "has this option of dash that resolve flag and we're resolving go time fm to",
    "start": "2924000",
    "end": "2930720"
  },
  {
    "text": "one uh uh which port go time fm which port it's uh actually",
    "start": "2930720",
    "end": "2937359"
  },
  {
    "text": "it's 4001 on my localhost but do you have to put that in the resolve",
    "start": "2937359",
    "end": "2943280"
  },
  {
    "text": "no so go to time fm colon port 443",
    "start": "2943280",
    "end": "2948960"
  },
  {
    "text": "because that's the port that we are it's like https and then we're resolving to 127.0",
    "start": "2948960",
    "end": "2957359"
  },
  {
    "text": "so that's the dash oh or the dashbs no no it's uh 443 colon oh so there's go time that i've had",
    "start": "2957359",
    "end": "2963520"
  },
  {
    "text": "colon 443 colon yeah 127.0 yeah that's it",
    "start": "2963520",
    "end": "2970319"
  },
  {
    "text": "so you think this one's going to work let's see if my server is still running looks like any more colons no idea it's enough",
    "start": "2970319",
    "end": "2978640"
  },
  {
    "text": "no colon blow okay so i got a 404 right and over here",
    "start": "2978640",
    "end": "2985680"
  },
  {
    "text": "we've got the same thing we had before our host header is not set so in our plug our vein domains plug we",
    "start": "2985680",
    "end": "2994079"
  },
  {
    "text": "just are logging the host here logger.info and that's this info which is",
    "start": "2994079",
    "end": "2999359"
  },
  {
    "text": "empty as we can see so we still don't have the host at this point i start thinking hey let's",
    "start": "2999359",
    "end": "3005119"
  },
  {
    "text": "push this code out and just see if it works live well do it live yeah sure we love doing",
    "start": "3005119",
    "end": "3011040"
  },
  {
    "text": "it in production i really do so sure let's do it and do that instead of flushing with curl commands the whole",
    "start": "3011040",
    "end": "3016079"
  },
  {
    "text": "time yeah yeah hey it compiled so that means it's good right that's right it compiled so could you just set up a local",
    "start": "3016079",
    "end": "3024079"
  },
  {
    "text": "vanity domain via your hosts file that's the other option that i remember saying on monday",
    "start": "3024079",
    "end": "3029760"
  },
  {
    "text": "we could definitely do that yeah i mean if curl doesn't work then there must be something else going on somewhere",
    "start": "3029760",
    "end": "3035359"
  },
  {
    "text": "right because i also have to tell i might have to tell phoenix that that's the host name as well",
    "start": "3035359",
    "end": "3040880"
  },
  {
    "text": "when i started phoenix yes exactly let's try that real quick yeah because phoenix does have a white",
    "start": "3040880",
    "end": "3047119"
  },
  {
    "text": "list of host names not for development i don't think but i'm not sure i think that's what it is",
    "start": "3047119",
    "end": "3052640"
  },
  {
    "text": "in development it doesn't accept requests that are not going to localhost that's",
    "start": "3052640",
    "end": "3057839"
  },
  {
    "text": "what i remember so we'll add go time.fm to that",
    "start": "3057839",
    "end": "3063839"
  },
  {
    "text": "and then i think we have to restart this with a host equals like that",
    "start": "3063839",
    "end": "3072400"
  },
  {
    "text": "now this won't this won't resolve the other like my in browser requests but it should resolve",
    "start": "3072400",
    "end": "3077440"
  },
  {
    "text": "if i run and we don't need any of this other crap right yeah you can drop the result",
    "start": "3077440",
    "end": "3083920"
  },
  {
    "text": "and then we'll just say instead of localhost we will say go time.fm",
    "start": "3085040",
    "end": "3091760"
  },
  {
    "text": "maybe download https no it's still https you have a",
    "start": "3091760",
    "end": "3099839"
  },
  {
    "text": "self-signed server locally yeah yeah okay i need that for",
    "start": "3099839",
    "end": "3105359"
  },
  {
    "text": "h captcha basically which requires ssl to do their testing for the captions",
    "start": "3105359",
    "end": "3110480"
  },
  {
    "text": "yeah i think this is under the phoenix gen cert uh stuff yeah exactly which is simply for it for",
    "start": "3110480",
    "end": "3116640"
  },
  {
    "text": "capture use so i'd love to get rid of that entire thing because it's not working very well",
    "start": "3116640",
    "end": "3122240"
  },
  {
    "text": "anyway but we're getting an error here and looks like it's the same exact problem so like can't sign slug apple",
    "start": "3122240",
    "end": "3130559"
  },
  {
    "text": "there's no host",
    "start": "3130720",
    "end": "3138000"
  },
  {
    "text": "so i'm not sure why it's not uh i think i pulled that logger statement out because i'm a dork but",
    "start": "3138000",
    "end": "3144160"
  },
  {
    "text": "i think the same thing here is like the host is not it's in you know it's like someone you have to restart something whenever you change",
    "start": "3144160",
    "end": "3150559"
  },
  {
    "text": "the etsy hosts file no i don't know like flush dna",
    "start": "3150559",
    "end": "3155920"
  },
  {
    "text": "changes host no let me ping yeah so that's hitting localhost when i",
    "start": "3155920",
    "end": "3162079"
  },
  {
    "text": "ping so that's not the problem all right we tried it now we're going to give up on it",
    "start": "3162079",
    "end": "3168400"
  },
  {
    "text": "let's ship it live yeah let's just review our code real quick before we ship it to prod let's at least",
    "start": "3168400",
    "end": "3174079"
  },
  {
    "text": "look at it so we know that everything compiles and stuff we're adding the vanity redirects",
    "start": "3174079",
    "end": "3180319"
  },
  {
    "text": "promx plugin there which looks like this which doesn't have syntax highlight",
    "start": "3180319",
    "end": "3187839"
  },
  {
    "text": "because it's a new file but we think that looks alright episode controller i think that was when i ran",
    "start": "3187839",
    "end": "3194640"
  },
  {
    "text": "the next format so get rid of that one don't care and then",
    "start": "3194640",
    "end": "3201599"
  },
  {
    "text": "we think we're good here so let's call this hang on you were are we using logger anywhere",
    "start": "3203680",
    "end": "3210000"
  },
  {
    "text": "are we using logger in that file you have no i think i took the logger call out so i can get rid of that",
    "start": "3210000",
    "end": "3217040"
  },
  {
    "text": "okay cool cool all right commit message collaborate",
    "start": "3217280",
    "end": "3222800"
  },
  {
    "text": "lars help me write this commit message ship it um i guess it's",
    "start": "3222800",
    "end": "3230400"
  },
  {
    "text": "uh he's like mental vanity redirect metrics experiment",
    "start": "3230400",
    "end": "3237920"
  },
  {
    "text": "yeah that's a word i can't spell experiments yeah it should start with like added like add",
    "start": "3237920",
    "end": "3244800"
  },
  {
    "text": "because they're yeah people are very particular i actually do tend to write in the present tense like add",
    "start": "3244800",
    "end": "3250400"
  },
  {
    "text": "experimental vanity redirect metrics yeah all right",
    "start": "3250400",
    "end": "3258800"
  },
  {
    "text": "and gosh we run mixed tests because we're all going to have to sit here and stare at it",
    "start": "3258800",
    "end": "3264000"
  },
  {
    "text": "no just just push it just push it i heard this yeah because yeah it runs",
    "start": "3264000",
    "end": "3269599"
  },
  {
    "text": "the cia runs tests for you if you fail nothing will go out worse comes to worse if there's an issue with",
    "start": "3269599",
    "end": "3275599"
  },
  {
    "text": "the metrics collection um that one particular data point will get",
    "start": "3275599",
    "end": "3280720"
  },
  {
    "text": "detached if there's like a an exception that's thrown in that block and then it just won't capture metrics",
    "start": "3280720",
    "end": "3286400"
  },
  {
    "text": "on that so it won't act on any more of those telemetry invocations so it won't bring down the app if uh all",
    "start": "3286400",
    "end": "3294000"
  },
  {
    "text": "right so my data point is boring i have alex's word the app is not going down",
    "start": "3294000",
    "end": "3299119"
  },
  {
    "text": "i had to rebase because i promise scout's honor",
    "start": "3299119",
    "end": "3303680"
  },
  {
    "text": "all right so many layers between us and like production going down like even like if the health check",
    "start": "3304720",
    "end": "3309839"
  },
  {
    "text": "doesn't pass there's like so many things readiness probes all sorts of stuff so no",
    "start": "3309839",
    "end": "3315119"
  },
  {
    "text": "even if it like let's say you push it broken if it doesn't start it's not going to be promoted",
    "start": "3315119",
    "end": "3320240"
  },
  {
    "text": "well while we wait maybe we should hop over to the graph a lot of brave confidence there yeah yeah you guys are really giving me",
    "start": "3320240",
    "end": "3326799"
  },
  {
    "text": "confidence i got alex promise and i have gerhard telling me how many things are i'm deeply skeptical if that",
    "start": "3326799",
    "end": "3332839"
  },
  {
    "text": "helps there's so many you and i are so then there's so many things that need to go",
    "start": "3332839",
    "end": "3338319"
  },
  {
    "text": "wrong i think there's like an appreciation for the system on how everything hangs together and i'm very confident and if it will",
    "start": "3338319",
    "end": "3345599"
  },
  {
    "text": "break then guess what we get to fix whatever didn't work properly there we go you're just excited for",
    "start": "3345599",
    "end": "3352319"
  },
  {
    "text": "testing i am afraid to break i actually would like to see the break well i'm glad you're excited about this",
    "start": "3352319",
    "end": "3359839"
  },
  {
    "text": "um do you remember when we took the website down on purpose to see how long it would take for it to",
    "start": "3359839",
    "end": "3364880"
  },
  {
    "text": "read yeah so but you had done that before sort of right yes all right so",
    "start": "3364880",
    "end": "3371680"
  },
  {
    "text": "while we wait for that to go up should we look at where where in grafana",
    "start": "3371680",
    "end": "3378319"
  },
  {
    "text": "then are we going to add stuff here or like how are we going to do the grafana side so what do you think",
    "start": "3378319",
    "end": "3384720"
  },
  {
    "text": "uh alex do you think we should start a new dashboard uh yeah so we can start a new dashboard um okay if we just wanna sanity check",
    "start": "3384720",
    "end": "3391200"
  },
  {
    "text": "that the metrics are actually getting picked up we could always just use the explore tool and and make sure that our",
    "start": "3391200",
    "end": "3396240"
  },
  {
    "text": "uh yeah our data is actually popping up so for that we would need to wait for the deploy to go through what i'm thinking",
    "start": "3396240",
    "end": "3402480"
  },
  {
    "text": "is we can start a dashboard knowing where the query will be what the metric will be yeah",
    "start": "3402480",
    "end": "3407599"
  },
  {
    "text": "yeah we could actually do that yeah okay well it's still working so we don't know if the code's out there oh man i",
    "start": "3407599",
    "end": "3414000"
  },
  {
    "text": "had some test failures so maybe we're gonna get uh",
    "start": "3414000",
    "end": "3419280"
  },
  {
    "text": "oh that might be we're not returning yeah we should have ran the test guys",
    "start": "3419280",
    "end": "3426558"
  },
  {
    "text": "don't worry ci's got it final last words we should have ran the test guys so it",
    "start": "3426880",
    "end": "3432319"
  },
  {
    "text": "looks like probably as we get involved into that pipeline we're not returning we're not",
    "start": "3432319",
    "end": "3438799"
  },
  {
    "text": "passing the right data through i thought we fixed that already where is this coming out capture redirect telemetry",
    "start": "3438799",
    "end": "3446640"
  },
  {
    "text": "line two capture redirect telemetry that returns yeah so we did that we got podcast and nil",
    "start": "3446640",
    "end": "3454400"
  },
  {
    "text": "name not found in slug where is it using name oh i know what",
    "start": "3456480",
    "end": "3462480"
  },
  {
    "text": "we're doing we're actually relying on a",
    "start": "3462480",
    "end": "3468799"
  },
  {
    "text": "key which doesn't exist probably in my test suite because i probably just made those",
    "start": "3468799",
    "end": "3474079"
  },
  {
    "text": "structs so it's probably just a failure in the test suite and not a failure in",
    "start": "3474079",
    "end": "3479280"
  },
  {
    "text": "the actual implementation yeah so here's my tests and so we're calling",
    "start": "3479280",
    "end": "3484359"
  },
  {
    "text": "podcast.name to send that along and we don't have one in either one of",
    "start": "3484359",
    "end": "3489839"
  },
  {
    "text": "my stub or my what do you call these and we sure those are",
    "start": "3489839",
    "end": "3494960"
  },
  {
    "text": "present in a uh actual production runtime",
    "start": "3494960",
    "end": "3500720"
  },
  {
    "text": "yeah totally because the podcast is",
    "start": "3501680",
    "end": "3506400"
  },
  {
    "text": "oh it's going to have a name yeah for sure cool so i think that will fix the tests are",
    "start": "3507680",
    "end": "3513599"
  },
  {
    "text": "there other test failures i think all of them is that so let's run that again and i tell you with great uh pleasure",
    "start": "3513599",
    "end": "3522319"
  },
  {
    "text": "that the sea i called it i'm glad you're just enjoying this",
    "start": "3522319",
    "end": "3528480"
  },
  {
    "text": "uh so that's good so we didn't deploy that so we didn't deploy that code",
    "start": "3528480",
    "end": "3533680"
  },
  {
    "text": "so now we do uh what i always have to do is my sec my follow-up commit",
    "start": "3533680",
    "end": "3539040"
  },
  {
    "text": "where i say fix the test suite uh it goes all downhill from here oh dang",
    "start": "3539040",
    "end": "3546559"
  },
  {
    "text": "yeah exactly fixed test for radimy domain redirects now it takes some confidence",
    "start": "3546559",
    "end": "3554799"
  },
  {
    "text": "to actually commit and push that before the test suite finishes so let's wait just a second",
    "start": "3554799",
    "end": "3560079"
  },
  {
    "text": "there you get to see how often my postgres disconnects which is pretty much every time i run",
    "start": "3560079",
    "end": "3565119"
  },
  {
    "text": "the tests if anybody knows why please let me know i think that's when",
    "start": "3565119",
    "end": "3570880"
  },
  {
    "text": "when there's some connection still doing stuff but the process gets killed because the",
    "start": "3570880",
    "end": "3577040"
  },
  {
    "text": "test is done and happy okay i i've seen it in a few different",
    "start": "3577040",
    "end": "3582559"
  },
  {
    "text": "cases and like it's fixable but can be pretty annoying to track down and it can",
    "start": "3582559",
    "end": "3587680"
  },
  {
    "text": "be inconsistent yeah i've never been able to figure it out but there we go pet test path so we're",
    "start": "3587680",
    "end": "3594400"
  },
  {
    "text": "good there that was exactly my theory for when we see these in prod lars was exactly that",
    "start": "3594400",
    "end": "3600000"
  },
  {
    "text": "some connections uh they abruptly terminate these are http connections and the database connection is still",
    "start": "3600000",
    "end": "3606720"
  },
  {
    "text": "doing things but the http connection that initiated goes away so the the the database connection gets",
    "start": "3606720",
    "end": "3614160"
  },
  {
    "text": "x exits because the client terminated abruptly the http connection",
    "start": "3614160",
    "end": "3619920"
  },
  {
    "text": "the http request terminated abruptly oh yeah you could see that from cowboy kills any request that goes over 60",
    "start": "3619920",
    "end": "3626880"
  },
  {
    "text": "seconds in tests that that usually just happens because the tests use processes and sometimes",
    "start": "3626880",
    "end": "3633599"
  },
  {
    "text": "they kill",
    "start": "3633599",
    "end": "3635920"
  },
  {
    "text": "click on details let's see it building progress",
    "start": "3640880",
    "end": "3646318"
  },
  {
    "text": "yeah so that's circle ci and that's uh this is something new i didn't know that you've added github actions tests in",
    "start": "3646880",
    "end": "3652880"
  },
  {
    "text": "github actions we also have a mix format github action",
    "start": "3652880",
    "end": "3661280"
  },
  {
    "text": "which i got set up but then i disabled it because there's some stupid reason that it would",
    "start": "3661280",
    "end": "3667599"
  },
  {
    "text": "fit like it would succeed but it would return with an error code like it would exit with an error code and so it's",
    "start": "3667599",
    "end": "3673040"
  },
  {
    "text": "it would kill the the pipeline as if it failed even though it succeeded so i turn it",
    "start": "3673040",
    "end": "3679440"
  },
  {
    "text": "off but i thought it'd be cool to have it run mixed format all the time so i don't have to were you running it",
    "start": "3679440",
    "end": "3684480"
  },
  {
    "text": "to actually fix the formatting or just check that it has been formatted i think it was just",
    "start": "3684480",
    "end": "3689680"
  },
  {
    "text": "checking you know because that was way simpler",
    "start": "3689680",
    "end": "3694720"
  },
  {
    "text": "yeah because it's way simpler than having it like do a commit to fix it um but we got to the point that the",
    "start": "3694720",
    "end": "3701520"
  },
  {
    "text": "formatter would say everything was fine but return an error code",
    "start": "3701520",
    "end": "3706720"
  },
  {
    "text": "or something a non-zero return value it was annoying so we turned it off but now alex has told me you can just get a",
    "start": "3706720",
    "end": "3713280"
  },
  {
    "text": "vs code integration to run mixed format every time i hit the save button oh i use vim but uh yeah you can there's",
    "start": "3713280",
    "end": "3719440"
  },
  {
    "text": "a yeah there's a video has it vs code has it oh yeah for sure for sure",
    "start": "3719440",
    "end": "3725119"
  },
  {
    "text": "yeah that's a little odd uh yeah usually if you have that was a dash dash check formatted",
    "start": "3725119",
    "end": "3730160"
  },
  {
    "text": "uh it'll only return on non-zero if there's a problem unless there's a i have seen it before",
    "start": "3730160",
    "end": "3736880"
  },
  {
    "text": "where like if your local development elixir version is slightly different from ci",
    "start": "3736880",
    "end": "3741920"
  },
  {
    "text": "that might have been sometimes the formatter goes to some very very subtle uh changes version aversion and so",
    "start": "3741920",
    "end": "3749039"
  },
  {
    "text": "it'll fail in ci when you check formatted but you know locally it's totally fine so i think that might have been the case",
    "start": "3749039",
    "end": "3756799"
  },
  {
    "text": "and it was long enough long enough ago that i don't recall why it was failing i just remember it",
    "start": "3756799",
    "end": "3762240"
  },
  {
    "text": "yeah i haven't seen that last night i think the the elixir formatter is pretty stable i don't think it's changed much",
    "start": "3762240",
    "end": "3767280"
  },
  {
    "text": "recently have you tried running credo on this code base yeah",
    "start": "3767280",
    "end": "3773359"
  },
  {
    "text": "i try to have it on by default um",
    "start": "3773760",
    "end": "3779599"
  },
  {
    "text": "i think it's not on by default it's not in your ci i don't think so",
    "start": "3780960",
    "end": "3790318"
  },
  {
    "text": "but it told me it was pretty awesome i think",
    "start": "3791359",
    "end": "3797039"
  },
  {
    "text": "i don't recall what it is what does credo do uh so it's a convention yeah basically best practice is kind of",
    "start": "3797039",
    "end": "3804000"
  },
  {
    "text": "a thing yeah so it makes people behave",
    "start": "3804000",
    "end": "3809440"
  },
  {
    "text": "it reports how bad your code is i only have two warnings right length items is expensive",
    "start": "3809680",
    "end": "3816318"
  },
  {
    "text": "right so not bad ruby's rubicon yeah exactly but for elixir so",
    "start": "3816480",
    "end": "3822960"
  },
  {
    "text": "not terrible really uh readability issues that's that's your opinion man uh",
    "start": "3822960",
    "end": "3829920"
  },
  {
    "text": "the warnings i should probably look at but yeah pipe change should start with a raw value i have a hard time agreeing",
    "start": "3829920",
    "end": "3835680"
  },
  {
    "text": "with that one it makes sense in the abstract but i pipe change should start with a raw",
    "start": "3835680",
    "end": "3842720"
  },
  {
    "text": "value it's like you can't start a pipe with a function call or",
    "start": "3842720",
    "end": "3847760"
  },
  {
    "text": "right anything else value and i i really do want to do that sometimes",
    "start": "3847760",
    "end": "3854000"
  },
  {
    "text": "this is not concerning why is there whatever credo wants why is there a call to pry on",
    "start": "3854000",
    "end": "3859039"
  },
  {
    "text": "changelog.x line 4.",
    "start": "3859039",
    "end": "3862799"
  },
  {
    "text": "we in the rabbit oh because it's a shorthand that i made",
    "start": "3864319",
    "end": "3869520"
  },
  {
    "text": "i i think you can also uh can't you annotate your files to tell credo to ignore certain words",
    "start": "3869520",
    "end": "3874880"
  },
  {
    "text": "yeah you can't oh i'm sure i could tell to ignore that i just i just don't do these things i just ignore it i think this was a way to",
    "start": "3874880",
    "end": "3882319"
  },
  {
    "text": "pass oh this i think this was a hack because i like to pry into the middle of a pipeline",
    "start": "3882319",
    "end": "3887839"
  },
  {
    "text": "and you can't do that when you're like passing arguments right so here you can actually just throw pry in and it will take the argument",
    "start": "3887839",
    "end": "3893920"
  },
  {
    "text": "whatever you passed and then call pry and then just pass it on what does pride do",
    "start": "3893920",
    "end": "3899039"
  },
  {
    "text": "pry is basically like a thing that stops the process right there and allows you to interact with it so it's kind of like a it's like a poor",
    "start": "3899039",
    "end": "3905440"
  },
  {
    "text": "man poor man's debugger uh neat haven't tried yeah it's cool but",
    "start": "3905440",
    "end": "3911839"
  },
  {
    "text": "so i thought i think i was trying to get nifty and and doing that and then i probably never used it",
    "start": "3911839",
    "end": "3916960"
  },
  {
    "text": "anyways did we get deployed to your heart i stopped looking publish build boom okay it's running",
    "start": "3916960",
    "end": "3924799"
  },
  {
    "text": "oh it's running so let's curl uh yep so we're gonna look for jay's party line",
    "start": "3924799",
    "end": "3929920"
  },
  {
    "text": "uh episode 160 boom all right so we've hit it once wanna hit it a few times",
    "start": "3929920",
    "end": "3936160"
  },
  {
    "text": "what do you wanna do we got a three out two so that's a good sign we're getting the redirect so yeah too badly we didn't break it are we",
    "start": "3936160",
    "end": "3942240"
  },
  {
    "text": "detecting it so now what do i do here alex uh so we go back to that promx plug-in because i can't remember what we",
    "start": "3942240",
    "end": "3948319"
  },
  {
    "text": "okay gave it an idea of uh i think it's the next file over oh",
    "start": "3948319",
    "end": "3955599"
  },
  {
    "text": "yeah there it is the vanity redirects one this one execute change log vanity",
    "start": "3955599",
    "end": "3961599"
  },
  {
    "text": "redirects or you want to go up higher uh no so the actual like problem that's not",
    "start": "3961599",
    "end": "3966640"
  },
  {
    "text": "in itself so vanity redirects that yeah sorry there's a lot of vanities in these files",
    "start": "3966640",
    "end": "3972480"
  },
  {
    "text": "yeah there we go so yeah so we're looking for change log underscore vanity underscore redirects",
    "start": "3972480",
    "end": "3977599"
  },
  {
    "text": "this one so we throw that in here do i have to do anything fancy with it oh you just yeah you can just query for",
    "start": "3977599",
    "end": "3984160"
  },
  {
    "text": "that and we should see doesn't oh my goodness oh yeah okay so",
    "start": "3984160",
    "end": "3990400"
  },
  {
    "text": "there we go it's there we saw yeah there we go",
    "start": "3990400",
    "end": "3996400"
  },
  {
    "text": "look at that two unknowns already i forgot we added the unknown in case somebody hits it with something that doesn't make sense",
    "start": "3996400",
    "end": "4001839"
  },
  {
    "text": "yeah so already we've had two of those and one for some reason real ones",
    "start": "4001839",
    "end": "4010400"
  },
  {
    "text": "okay now what so now we want to take this data and turn it into something that like",
    "start": "4012000",
    "end": "4018000"
  },
  {
    "text": "tracks yeah",
    "start": "4018000",
    "end": "4021839"
  },
  {
    "text": "is this a good time to switch share screens or do you want to continue how much fun",
    "start": "4025200",
    "end": "4030319"
  },
  {
    "text": "are you having with this um i would absolutely love you to drive this",
    "start": "4030319",
    "end": "4035520"
  },
  {
    "text": "gearheart okay that's what i was thinking cool i like how diplomatic you are i'd just",
    "start": "4035520",
    "end": "4041280"
  },
  {
    "text": "be like let me share the screen real quick right so uh",
    "start": "4041280",
    "end": "4047200"
  },
  {
    "text": "change log change log vanity redirects you said yes look yeah",
    "start": "4047200",
    "end": "4052559"
  },
  {
    "text": "we can already have them there automatically filled so this is exactly what you had yep and we see the vanity difference so",
    "start": "4052559",
    "end": "4058079"
  },
  {
    "text": "that is three js parties and 23 unknowns did we uh did we throw a log statement",
    "start": "4058079",
    "end": "4063440"
  },
  {
    "text": "there for the unknowns we added one i don't know if it's actually yeah we actually removed the",
    "start": "4063440",
    "end": "4069599"
  },
  {
    "text": "logger maybe i'd be kind of curious to see what the unknowns are coming from oh yeah yeah look at the logger in there same for me so do you want to quickly",
    "start": "4069599",
    "end": "4076400"
  },
  {
    "text": "jared put the logo back in to see what the unknowns are while i continue with this how about that if you can pay attention to both things",
    "start": "4076400",
    "end": "4082559"
  },
  {
    "text": "that would be great sure i can do this once right okay so i just create",
    "start": "4082559",
    "end": "4087599"
  },
  {
    "text": "a new dashboard this is grafana changeover.com which is the grafana instance running in the linux kubernetes engine",
    "start": "4087599",
    "end": "4093760"
  },
  {
    "text": "together with the site and everything else add new panel the default i'll just go prometheus",
    "start": "4093760",
    "end": "4100960"
  },
  {
    "text": "that is the actual query so that's how we visualize it now this is we can we should group them by",
    "start": "4100960",
    "end": "4107359"
  },
  {
    "text": "podcast right we can see all the redirects app instance we'll get these labels when there's a",
    "start": "4107359",
    "end": "4113199"
  },
  {
    "text": "new app instance we don't care about that um namespace i don't think",
    "start": "4113199",
    "end": "4118719"
  },
  {
    "text": "we care about that at this point what you do care about is about this podcast you want to sum by podcast so some",
    "start": "4118719",
    "end": "4126798"
  },
  {
    "text": "by podcast and if i run this query it will tell us",
    "start": "4126799",
    "end": "4134400"
  },
  {
    "text": "go time js party podcast unknown now alex is this a gauge or just a counter",
    "start": "4134400",
    "end": "4142000"
  },
  {
    "text": "i think it's a couple i think i made it as a counter yeah right so that means it will always go up right yep okay so in that case",
    "start": "4142000",
    "end": "4149679"
  },
  {
    "text": "uh rate or irate i think for this one you probably just go with rate yeah i'd be surprised irate is good for",
    "start": "4149679",
    "end": "4157199"
  },
  {
    "text": "fluctuating data that's going up and down uh right yeah uh what did i do there",
    "start": "4157199",
    "end": "4163440"
  },
  {
    "text": "i think the rate needs to be on the outside yeah yeah switch the order now you're missing your parentheses i'm that's well that's",
    "start": "4163440",
    "end": "4170238"
  },
  {
    "text": "exactly right thank you lars that was exactly right the legend format yeah we care about the podcast so let me add",
    "start": "4170239",
    "end": "4175920"
  },
  {
    "text": "podcasts there so now we have the legend js party unknown",
    "start": "4175920",
    "end": "4181440"
  },
  {
    "text": "so we're seeing those now here's the time span up there just it's six hours last six hours is",
    "start": "4181440",
    "end": "4188000"
  },
  {
    "text": "not good so last 15 minutes that's much better thank you lars so go time but these are",
    "start": "4188000",
    "end": "4194238"
  },
  {
    "text": "per second no per minute these are per minute so we",
    "start": "4194239",
    "end": "4200239"
  },
  {
    "text": "do you want to see how many redirects are per minute does that make sense no it doesn't make sense so what what do",
    "start": "4200239",
    "end": "4206320"
  },
  {
    "text": "you want to see jared how many redirects i mean i think starting with maybe per hour is probably",
    "start": "4206320",
    "end": "4213040"
  },
  {
    "text": "good enough per hour can't you decide that later can't you just say just",
    "start": "4213040",
    "end": "4218239"
  },
  {
    "text": "can't you i regroup them yeah but we're deciding now like what do i put here",
    "start": "4218239",
    "end": "4223840"
  },
  {
    "text": "oh i want to know later can i decide later yes but we're deciding right now",
    "start": "4223840",
    "end": "4230880"
  },
  {
    "text": "so one minute is like the minimum threshold but then i could move it i could i could group them up from there you",
    "start": "4230880",
    "end": "4238640"
  },
  {
    "text": "could yeah like if you want to do that yes what is so right now it's telling you that the rate",
    "start": "4238640",
    "end": "4245600"
  },
  {
    "text": "over one minute and this is per second rate is zero point zero zero four zero point zero",
    "start": "4245600",
    "end": "4251280"
  },
  {
    "text": "right is that a good one is that a good rate zero point zero zero four yeah it's",
    "start": "4251280",
    "end": "4256719"
  },
  {
    "text": "preferably higher of course you do but what i'm thinking is does that number",
    "start": "4256719",
    "end": "4262159"
  },
  {
    "text": "even make sense like no that's why i said an hour i said an hour would probably make more sense but then i",
    "start": "4262159",
    "end": "4267199"
  },
  {
    "text": "started thinking well does that mean it might i can't look at a half hour ever because i've decided this is an hour it seems",
    "start": "4267199",
    "end": "4272400"
  },
  {
    "text": "not very flexible yeah we can adjust that so okay you either set the interval either",
    "start": "4272400",
    "end": "4278800"
  },
  {
    "text": "set the interval um statically and then what you tend to have you have to have a drop down you can adjust it",
    "start": "4278800",
    "end": "4285120"
  },
  {
    "text": "or based on how much you zoom in and you zoom out there's something called like this is a special variable which is interval",
    "start": "4285120",
    "end": "4292719"
  },
  {
    "text": "i'm not sure what the difference is between rate interval in an interval but this one right now it's 2 i think it's too",
    "start": "4292719",
    "end": "4300239"
  },
  {
    "text": "narrow so think about it if we're scraping every 15 seconds which i think",
    "start": "4300239",
    "end": "4305360"
  },
  {
    "text": "is the case here if this is for example one second well there's no rate per second",
    "start": "4305360",
    "end": "4311120"
  },
  {
    "text": "because you're scraping every 15 seconds so the rate needs to be four times like",
    "start": "4311120",
    "end": "4317120"
  },
  {
    "text": "a best practice needs to be four times the scrape interval so what do you think it should be",
    "start": "4317120",
    "end": "4323199"
  },
  {
    "text": "well the minimum one is one minute but if it's 15 seconds like one hour would",
    "start": "4323199",
    "end": "4329679"
  },
  {
    "text": "be a decent i think one hour is probably fair if we go to one hour we see something like this",
    "start": "4329679",
    "end": "4337198"
  },
  {
    "text": "okay that's a that's nice linear growth right",
    "start": "4338239",
    "end": "4343679"
  },
  {
    "text": "there right unknown getting more and more redirects the same amount yeah yeah you could also",
    "start": "4343679",
    "end": "4350800"
  },
  {
    "text": "do it but you could do it in like 15 minute intervals then i think so because you want to like we",
    "start": "4350800",
    "end": "4357440"
  },
  {
    "text": "only have this is just fresh we won't really know until we have yeah have a go for a while because it's obviously not",
    "start": "4357440",
    "end": "4362480"
  },
  {
    "text": "representative right yeah so with rate as well i think it also",
    "start": "4362480",
    "end": "4367679"
  },
  {
    "text": "depends on the like the the time span that you're looking at so if you leave it at an hour and you drop",
    "start": "4367679",
    "end": "4372800"
  },
  {
    "text": "down like last 15 minutes and switch it to say three hours yeah",
    "start": "4372800",
    "end": "4379920"
  },
  {
    "text": "that's where you're seeing that but it changed the scales at all there uh the scales know the scales didn't",
    "start": "4379920",
    "end": "4386000"
  },
  {
    "text": "change because it's fixed the times it's still the same scale okay",
    "start": "4386000",
    "end": "4391920"
  },
  {
    "text": "but the problem here is like so so this one keeps going up because the time interval is too big it",
    "start": "4391920",
    "end": "4396960"
  },
  {
    "text": "says within this one hour how many uh redirects per second did you",
    "start": "4396960",
    "end": "4402080"
  },
  {
    "text": "have right because the rate as far as notes per second how many readers per second",
    "start": "4402080",
    "end": "4408400"
  },
  {
    "text": "and then that's why you have such a low number you have zero point zero one redirects per second within",
    "start": "4408400",
    "end": "4415600"
  },
  {
    "text": "that one hour because you need to do it times why does that take a second why can't i say how",
    "start": "4415600",
    "end": "4421440"
  },
  {
    "text": "many redirects total in this hour how many redirects total versus it for a second somewhere",
    "start": "4421440",
    "end": "4429678"
  },
  {
    "text": "can you use it you could use an increase in that case right guard you could but the problem is like it's a",
    "start": "4429840",
    "end": "4436560"
  },
  {
    "text": "counter right it is a counter yeah so it's it's",
    "start": "4436560",
    "end": "4441679"
  },
  {
    "text": "always going up yeah if you use i think if you use uh the prom ql increase function",
    "start": "4441679",
    "end": "4448640"
  },
  {
    "text": "and give it an hour uh time range want to tell us the i think i think you probably just",
    "start": "4448640",
    "end": "4455679"
  },
  {
    "text": "replaced rate with increase okay let me try to give us all we need i'm not convinced but let's try",
    "start": "4455679",
    "end": "4461840"
  },
  {
    "text": "or lars have you ever done any of this grafana stuff no i haven't seems nicer than",
    "start": "4461840",
    "end": "4468719"
  },
  {
    "text": "than i remember kibana being that's that's about as much as i can say about it yeah that was actually the inspiration",
    "start": "4468719",
    "end": "4474800"
  },
  {
    "text": "for graffana it started from kibana yeah just improved it i've poked alex",
    "start": "4474800",
    "end": "4481199"
  },
  {
    "text": "about it because i have clients that have have these needs but i think i think they'll be paying",
    "start": "4481199",
    "end": "4488000"
  },
  {
    "text": "someone else too to handle it just like this is a tear a tear going down my face life",
    "start": "4488000",
    "end": "4496159"
  },
  {
    "text": "somebody else like you alex not like lars is that what you're saying no uh paying someone like data gotcha",
    "start": "4496159",
    "end": "4502400"
  },
  {
    "text": "oh even though that's double that's double so alex did interpret it correctly yeah",
    "start": "4502400",
    "end": "4507600"
  },
  {
    "text": "right so what i'm seeing with this increase these numbers what is this 8 16 i went to one minute",
    "start": "4508800",
    "end": "4514560"
  },
  {
    "text": "by the way so it's more we have to see a steady rate what is this eight per second",
    "start": "4514560",
    "end": "4521920"
  },
  {
    "text": "uh go back to explore is it really that high is somebody just spamming the site",
    "start": "4521920",
    "end": "4527679"
  },
  {
    "text": "it's possible i wouldn't know anything about that i did not do eight per second though",
    "start": "4527679",
    "end": "4535199"
  },
  {
    "text": "right i hit you with a few go times",
    "start": "4535199",
    "end": "4540800"
  },
  {
    "text": "well i did add that log so that's how many redirects we had since it started right so that just",
    "start": "4540800",
    "end": "4548000"
  },
  {
    "text": "keeps going up because we keep getting more exactly",
    "start": "4548000",
    "end": "4552960"
  },
  {
    "text": "yeah go time is me there you go jazz party was me the change log someone",
    "start": "4555199",
    "end": "4561040"
  },
  {
    "text": "just naturally hit apparently yeah",
    "start": "4561040",
    "end": "4566080"
  },
  {
    "text": "so if you go rate and if you go five minutes uh that mean it doesn't make sense so",
    "start": "4566080",
    "end": "4572640"
  },
  {
    "text": "like within that one minute to me to me this doesn't make sense the",
    "start": "4572640",
    "end": "4578719"
  },
  {
    "text": "reason why it doesn't make sense this rate is because i would expect it at one point to go down right like once we reach a certain number of",
    "start": "4578719",
    "end": "4585280"
  },
  {
    "text": "or no is it still continuing yes i think yeah i think that just rates",
    "start": "4585280",
    "end": "4590320"
  },
  {
    "text": "if it's a if it's a linear increase it'll kind of flatten out the uh the curve because it's a consistent uh",
    "start": "4590320",
    "end": "4595600"
  },
  {
    "text": "delta for between the time intervals so i mean that looks very programmatic what's going on right there with these",
    "start": "4595600",
    "end": "4601040"
  },
  {
    "text": "unknowns doesn't it yeah maybe it's your health which maybe it's our health check",
    "start": "4601040",
    "end": "4606640"
  },
  {
    "text": "could it be possible oh there's something like a health check or uh or uh like a podcast rss",
    "start": "4606640",
    "end": "4615120"
  },
  {
    "text": "scraping yeah but i wouldn't be hitting these domains i wouldn't think no they wouldn't well like i think it",
    "start": "4615120",
    "end": "4620960"
  },
  {
    "text": "makes sense that it's unknown in that case right because if it's if the health check is coming from inside the kubernetes cluster",
    "start": "4620960",
    "end": "4626239"
  },
  {
    "text": "this sounds like it's awesome it's just it's just an ip address this turned into his health check is coming inside the cluster oh no",
    "start": "4626239",
    "end": "4633679"
  },
  {
    "text": "where is it we're screwed uh [Laughter]",
    "start": "4633679",
    "end": "4641679"
  },
  {
    "text": "wait it isn't the promix uh grafana scraping endpoint",
    "start": "4641679",
    "end": "4649600"
  },
  {
    "text": "so so okay so there's a few things which hit the website consistently one of them is",
    "start": "4649600",
    "end": "4655600"
  },
  {
    "text": "the health check which is like the readiness check actually the readiness probe but that goes to four slash",
    "start": "4655600",
    "end": "4661040"
  },
  {
    "text": "health that's how that's configured there's pingdom dot com slash health or is it an iphone",
    "start": "4661040",
    "end": "4668000"
  },
  {
    "text": "changelog.com so that should not happen sorry no no no sorry no sorry the uh the readiness probe goes to the um",
    "start": "4668000",
    "end": "4675679"
  },
  {
    "text": "port directly so it's like the internal ip address so that might actually be it because",
    "start": "4675679",
    "end": "4681280"
  },
  {
    "text": "we are capturing all requests and if it's a changeup.com request we bypass this code path",
    "start": "4681280",
    "end": "4687199"
  },
  {
    "text": "if not then it's going to hit this code path and it's not going to find a podcast to match it and it's going to pass it on",
    "start": "4687199",
    "end": "4694239"
  },
  {
    "text": "and log it so i think we are i think unknowns is our health check and look period every 15 seconds",
    "start": "4694239",
    "end": "4702480"
  },
  {
    "text": "so our health check is hitting it every 15 seconds and it's going to unlock 15. look at that",
    "start": "4702480",
    "end": "4709440"
  },
  {
    "text": "yeah so there it is 50 seconds all right let's see so mystery no that's",
    "start": "4710159",
    "end": "4717040"
  },
  {
    "text": "15 15 per interval it's a minute interval yes and it's one second yeah",
    "start": "4717040",
    "end": "4723199"
  },
  {
    "text": "so it's okay so that's us okay so how do yourself yeah it's a",
    "start": "4723199",
    "end": "4730080"
  },
  {
    "text": "self-abuse so let's forget about that we can ignore that somehow we should we should filter",
    "start": "4730080",
    "end": "4736080"
  },
  {
    "text": "this one out by the way yeah we should be able to filter the health check out no problem in the code",
    "start": "4736080",
    "end": "4742000"
  },
  {
    "text": "yes actually uh who's got the code open do you have it open uh gerhard i know well yeah jared has it too oh can you",
    "start": "4742000",
    "end": "4749360"
  },
  {
    "text": "open up endpoint.ex i can pull it now since it's all in my end",
    "start": "4749360",
    "end": "4755920"
  },
  {
    "text": "prom ex yeah uh no just endpoint dot ex and point no hang on",
    "start": "4755920",
    "end": "4763679"
  },
  {
    "text": "and point dot ex yep there we go",
    "start": "4763679",
    "end": "4769679"
  },
  {
    "text": "what are we looking for uh okay so yeah line 50.",
    "start": "4770239",
    "end": "4777840"
  },
  {
    "text": "yeah so that guy so that'll that'll generate telemetry events for",
    "start": "4778000",
    "end": "4786000"
  },
  {
    "text": "all requests coming in um oh that's that's the promx plug i meant",
    "start": "4786000",
    "end": "4791840"
  },
  {
    "text": "line um 51. so that one will generate uh phoenix metrics for all requests coming in",
    "start": "4791840",
    "end": "4797760"
  },
  {
    "text": "so if you if you look at our like the phoenix dashboards those probably have like a whole bunch of health check calls coming in as well so we",
    "start": "4797760",
    "end": "4803679"
  },
  {
    "text": "could add a filter there and i think on the promex stocks i actually have like a hint that's like if you want to omit health check and",
    "start": "4803679",
    "end": "4810400"
  },
  {
    "text": "metrics calls uh insert this snippet but the but this one probably needs like in code",
    "start": "4810400",
    "end": "4817040"
  },
  {
    "text": "changes uh to the actual like health check controller",
    "start": "4817040",
    "end": "4822239"
  },
  {
    "text": "and the and whatnot okay what am i looking for lars oh sorry alex uh here",
    "start": "4822239",
    "end": "4830080"
  },
  {
    "text": "me on the spot i didn't write this one lars what are we looking for i would look for a hex link i don't know",
    "start": "4830080",
    "end": "4836719"
  },
  {
    "text": "if it's published look for yes this is on hex uh look for unplug i don't know oh no just like",
    "start": "4836719",
    "end": "4844880"
  },
  {
    "text": "uh control f that read me or command f you want to make unplug there's no unplug womp womp all",
    "start": "4844880",
    "end": "4851360"
  },
  {
    "text": "right go to lib or plug there's plug yeah i think i i have it",
    "start": "4851360",
    "end": "4856880"
  },
  {
    "text": "yeah go to lib um promx",
    "start": "4856880",
    "end": "4862239"
  },
  {
    "text": "and then open up that second to last file plug that ex and now control it for unplug okay i did",
    "start": "4863440",
    "end": "4870639"
  },
  {
    "text": "add it there so line 30. um maybe a little bit bigger gearheart i can't read it",
    "start": "4870639",
    "end": "4876639"
  },
  {
    "text": "yeah so so so that that snippet is for like if you want to secure your metrics endpoint and your",
    "start": "4876639",
    "end": "4882320"
  },
  {
    "text": "prometheus instance is sending you like an off header um you can secure the amp but use the same mechanism for",
    "start": "4882320",
    "end": "4889280"
  },
  {
    "text": "uh omitting telemetry events from endpoints that you expect to be",
    "start": "4889280",
    "end": "4894719"
  },
  {
    "text": "regularly hit okay but i think for this particular case we actually have to open up the controller",
    "start": "4894719",
    "end": "4901840"
  },
  {
    "text": "like for a health check is that health check is a plug that gear i think aaron you wrote that blog",
    "start": "4901840",
    "end": "4908159"
  },
  {
    "text": "um and it actually it actually halts the response pipeline if it gets called",
    "start": "4908159",
    "end": "4914480"
  },
  {
    "text": "so i think we just need to call it and the response higher up in the changelog web",
    "start": "4914480",
    "end": "4919760"
  },
  {
    "text": "controller there's a plus there's a plugs directory under change.web",
    "start": "4919760",
    "end": "4924800"
  },
  {
    "text": "yep plugs health check health check yeah that's it okay so that is that vanity",
    "start": "4924800",
    "end": "4931360"
  },
  {
    "text": "code path hit yeah that's the question is where is this getting called",
    "start": "4931360",
    "end": "4939679"
  },
  {
    "text": "in the pipeline in the router in the route to this plug yeah i can see it in the code when i'm",
    "start": "4939679",
    "end": "4945760"
  },
  {
    "text": "searching for health check look that's right to the top socket",
    "start": "4945760",
    "end": "4951760"
  },
  {
    "text": "oh it's in the endpoint not in the router okay so",
    "start": "4953600",
    "end": "4960159"
  },
  {
    "text": "it's the only plug that's added with parentheses yeah it's guaranteed",
    "start": "4960159",
    "end": "4965760"
  },
  {
    "text": "it's special don't blame me get hurt out of that um i'm not blaming you i'm just stating",
    "start": "4965760",
    "end": "4971360"
  },
  {
    "text": "facts no i did i didn't so it's in the end point",
    "start": "4971360",
    "end": "4977840"
  },
  {
    "text": "do either of you guys know phoenix well enough to know like when the art does our router get called like the end of the end point so yeah",
    "start": "4977840",
    "end": "4984239"
  },
  {
    "text": "it's usually the very last line of the endpoint so our",
    "start": "4984239",
    "end": "4990400"
  },
  {
    "text": "vanity redirects is where then is it in my router where did i put that",
    "start": "4990400",
    "end": "4996400"
  },
  {
    "text": "you know we have any domains is in the router so the health check should get called and halt the pipeline before it ever",
    "start": "4997040",
    "end": "5004639"
  },
  {
    "text": "hits vanity domains line for it like this one yeah that's right so you shouldn't get",
    "start": "5004639",
    "end": "5010880"
  },
  {
    "text": "to here is what you're saying joe right you shouldn't get to line 51. if the order is the way that it does",
    "start": "5010880",
    "end": "5016719"
  },
  {
    "text": "things yeah so the health check is like plug it's right here at the top i think that was like one of the reasons for it",
    "start": "5016719",
    "end": "5022800"
  },
  {
    "text": "yeah i assume these plugs are called an order i think i'm not 100 on that but i'm pretty close yeah if i recall correctly it called an",
    "start": "5022800",
    "end": "5029600"
  },
  {
    "text": "order and then if the con struct is uh halted it'll effectively just no up",
    "start": "5029600",
    "end": "5034800"
  },
  {
    "text": "every other plug yeah so we shouldn't actually ever be hitting our vanity domains plug maybe it's another maybe it's",
    "start": "5034800",
    "end": "5041120"
  },
  {
    "text": "another uh call then maybe it's not a health check yeah well i did put the logger statement in there if you guys want to look",
    "start": "5041120",
    "end": "5046159"
  },
  {
    "text": "look at the logs now we'll probably have off to loki oh okay so you put the logo but couldn't it be uh",
    "start": "5046159",
    "end": "5052800"
  },
  {
    "text": "every 15 seconds also sounds like the promise endpoint i like the metrics uh endpoint",
    "start": "5052800",
    "end": "5059120"
  },
  {
    "text": "yeah that metrics endpoint that that should also that should also halt the uh",
    "start": "5059120",
    "end": "5065600"
  },
  {
    "text": "halt the plug the whole 06205 okay yeah i'm looking at promise no i hope the i held the pipeline as well",
    "start": "5065600",
    "end": "5074400"
  },
  {
    "text": "yeah so that's kind of strange but we'll be seeing what it is here real quick",
    "start": "5074480",
    "end": "5080239"
  },
  {
    "text": "okay so was the promise plugged before or after the [Music] the new custom one the van anyone",
    "start": "5080560",
    "end": "5089440"
  },
  {
    "text": "ah so if vanity's in router so if you if you go all the way down to the bottom uh gearheart yeah it router's the last",
    "start": "5089440",
    "end": "5096239"
  },
  {
    "text": "one is the last one so vanity is in router",
    "start": "5096239",
    "end": "5100639"
  },
  {
    "text": "yeah so the mystery continues uh let's have a look at the logs because",
    "start": "5102320",
    "end": "5109040"
  },
  {
    "text": "we do have the logs and we can see very quickly where this is coming from so if we go to",
    "start": "5109040",
    "end": "5114560"
  },
  {
    "text": "explore here if we go to and we'll go to things that's okay we'll find it uh",
    "start": "5114560",
    "end": "5121520"
  },
  {
    "text": "ingress so if you look at ingress this is what sits in front of the app and all requests go through here",
    "start": "5121520",
    "end": "5128159"
  },
  {
    "text": "so what are we looking for what sort of request are we looking for well we have all of these here that's",
    "start": "5128159",
    "end": "5135440"
  },
  {
    "text": "all of them so i need to filter this a little bit because is it to get to a specific route what am i looking for why are we",
    "start": "5135440",
    "end": "5142880"
  },
  {
    "text": "looking for the log statement that i put in we're looking for the log statement okay uh can we just look for that uh",
    "start": "5142880",
    "end": "5150159"
  },
  {
    "text": "rights we could just look for that in that case we need to go to the app",
    "start": "5150159",
    "end": "5155840"
  },
  {
    "text": "and so that's prod this is the app itself so these are all the app logs",
    "start": "5155840",
    "end": "5162239"
  },
  {
    "text": "okay um and which is the lock statement because we have a lot of logs yeah it's going to say vanity redirect",
    "start": "5162639",
    "end": "5169840"
  },
  {
    "text": "okay so we filtered by vanity capital r sorry",
    "start": "5169840",
    "end": "5176159"
  },
  {
    "text": "that's okay is there an unscore not just a space good old-fashioned",
    "start": "5176159",
    "end": "5181520"
  },
  {
    "text": "english okay",
    "start": "5181520",
    "end": "5185360"
  },
  {
    "text": "there is nothing unexpected string one query if i need to redirect yep",
    "start": "5187360",
    "end": "5197100"
  },
  {
    "text": "[Music] so that's oh yes the cdn does health",
    "start": "5197100",
    "end": "5203600"
  },
  {
    "text": "checks as well ah so it is health checks but it's cdn health checks there we go oh but what what are they",
    "start": "5203600",
    "end": "5211040"
  },
  {
    "text": "checking i guess why is the full so this is the only host i should have logged the entire freaking request so so this is in",
    "start": "5211040",
    "end": "5218880"
  },
  {
    "text": "preparation for us putting the cdn in front of the website we need to configure health checks on the cdn to know when the back ends",
    "start": "5218880",
    "end": "5225280"
  },
  {
    "text": "are offline so when it detects the back ends being offline it will serve cached content all right",
    "start": "5225280",
    "end": "5232880"
  },
  {
    "text": "all right so mystery solved we can get that figured out let's move on and get and we can just",
    "start": "5232880",
    "end": "5239760"
  },
  {
    "text": "have that you know steady line for a while we don't need to figure out a way of ignoring it right",
    "start": "5239760",
    "end": "5244880"
  },
  {
    "text": "now because i'd rather focus on the actual what was the other it was changelog.fm",
    "start": "5244880",
    "end": "5250800"
  },
  {
    "text": "yeah which is the change logs vanity domain yeah so that one should probably get figured",
    "start": "5250800",
    "end": "5256000"
  },
  {
    "text": "out because that sounds like it's not you probably want to track right yeah so that one is not actually i",
    "start": "5256000",
    "end": "5261600"
  },
  {
    "text": "think probably attached to the changelog podcast record because we don't really use that",
    "start": "5261600",
    "end": "5268320"
  },
  {
    "text": "one because we we also will redirect change.com 403 to uh episode 4. didn't we have",
    "start": "5268320",
    "end": "5276000"
  },
  {
    "text": "like one or two requests for a changelog vanity domain according to the metrics so yes but that",
    "start": "5276000",
    "end": "5282880"
  },
  {
    "text": "would be yeah so that is a bit of a mystery",
    "start": "5282880",
    "end": "5289840"
  },
  {
    "text": "then there's also the www uh yeah redirect i got borked",
    "start": "5291120",
    "end": "5296960"
  },
  {
    "text": "yep that one should be redirected by a different code path i",
    "start": "5296960",
    "end": "5306719"
  },
  {
    "text": "believe so yeah there's a couple of things to figure out here",
    "start": "5306840",
    "end": "5312239"
  },
  {
    "text": "but i think they're probably less interesting now we could continue down this way",
    "start": "5312239",
    "end": "5317280"
  },
  {
    "text": "and or maybe now it's time to switch to the nginx logs right yes for genex",
    "start": "5317280",
    "end": "5323440"
  },
  {
    "text": "vlogs i think there's so little we have to do how much time does everybody try we try that",
    "start": "5323440",
    "end": "5329199"
  },
  {
    "text": "i can go for another half an hour maybe even longer i'm good for a half hour something else",
    "start": "5329199",
    "end": "5334800"
  },
  {
    "text": "coming up okay yeah i'll drop it the full hour okay",
    "start": "5334800",
    "end": "5340960"
  },
  {
    "text": "okay let's switch to engine x logs so this is one way of doing it we did that yep we can continue like",
    "start": "5340960",
    "end": "5348800"
  },
  {
    "text": "with this with this dashboard i don't think there's i need to do like some more summing here by the way",
    "start": "5348800",
    "end": "5353840"
  },
  {
    "text": "but uh like this is if i refresh it uh because we have different apps and",
    "start": "5353840",
    "end": "5359920"
  },
  {
    "text": "that's why we need to do like a better sort of summing anyways but it's all like queering those the the same",
    "start": "5359920",
    "end": "5366159"
  },
  {
    "text": "metrics right and visualizing the same metrics now we're switching to nginx logs i did",
    "start": "5366159",
    "end": "5371360"
  },
  {
    "text": "a little bit of preparation as i was waiting uh what we need to do is so we're using nginx in front of the app",
    "start": "5371360",
    "end": "5377679"
  },
  {
    "text": "and we're using the ingress engine x which is the most popular ingressing kubernetes",
    "start": "5377679",
    "end": "5384239"
  },
  {
    "text": "what we want to do is configure the lock format so that when we log we add the host",
    "start": "5384239",
    "end": "5389520"
  },
  {
    "text": "because right now if you look at nginx logs and we had a little bit of a preview was it here yes it was here so i'm going",
    "start": "5389520",
    "end": "5396320"
  },
  {
    "text": "to keep this in my buffer ingress and your next controller so",
    "start": "5396320",
    "end": "5402000"
  },
  {
    "text": "these are the logs that we have right now and you can see that in the get what we're not seeing is the host so we",
    "start": "5402000",
    "end": "5409840"
  },
  {
    "text": "want to see the host as well as the url so that we can we can",
    "start": "5409840",
    "end": "5415040"
  },
  {
    "text": "group them by the vanity domain right so we can count by vanity domain",
    "start": "5415040",
    "end": "5420159"
  },
  {
    "text": "so i don't think i would change the request itself we need to figure out where to put the host so maybe before",
    "start": "5420159",
    "end": "5427600"
  },
  {
    "text": "this gets i think it kind of makes sense host and then the get is on that host so we have the log format",
    "start": "5427600",
    "end": "5435520"
  },
  {
    "text": "this is the default one and we can adjust it so what we want to add is do we have host here we don't have",
    "start": "5435520",
    "end": "5441600"
  },
  {
    "text": "host here anyways one of the let me see did i make a note of that nginx",
    "start": "5441600",
    "end": "5449679"
  },
  {
    "text": "nginx content map yes i did this is a list of all the different variables that nginx supports",
    "start": "5449679",
    "end": "5455760"
  },
  {
    "text": "the one that we care about is host gh you can see it was in my history host",
    "start": "5455760",
    "end": "5461840"
  },
  {
    "text": "name for the request line or host name from the host request header or the server name matching the request",
    "start": "5461840",
    "end": "5468239"
  },
  {
    "text": "so that's the variable that we want okay all i did was to copy the default",
    "start": "5468239",
    "end": "5474239"
  },
  {
    "text": "one and the default actually you know what let me start with that as a default log format copy this",
    "start": "5474239",
    "end": "5483280"
  },
  {
    "text": "drop it in here no drop it in here and this needs to be as",
    "start": "5483280",
    "end": "5490639"
  },
  {
    "text": "a single line",
    "start": "5490639",
    "end": "5495120"
  },
  {
    "text": "that's the config map okay i don't know why i deleted what i",
    "start": "5496400",
    "end": "5503120"
  },
  {
    "text": "had before because this was already like in the right format it is the same one see if i paste",
    "start": "5503120",
    "end": "5511120"
  },
  {
    "text": "it here",
    "start": "5511120",
    "end": "5519840"
  },
  {
    "text": "this is the one it's exactly the same one all i did i just did some um what do you call it some",
    "start": "5519920",
    "end": "5527040"
  },
  {
    "text": "spacing okay so we have the request we have time",
    "start": "5527040",
    "end": "5532639"
  },
  {
    "text": "local so going back to our time local then we have the double quotes",
    "start": "5532639",
    "end": "5540320"
  },
  {
    "text": "and then the request so what i'm thinking is just to drop a host here and that's it that's the only change",
    "start": "5540320",
    "end": "5546560"
  },
  {
    "text": "that we need to make to get those hosts in so now we have to apply it apply this",
    "start": "5546560",
    "end": "5552159"
  },
  {
    "text": "uh change in production live fingers crossed nothing goes wrong it's",
    "start": "5552159",
    "end": "5557199"
  },
  {
    "text": "just a bit of drama nothing will go wrong all right i'm less worried about this one okay engine x i just have to",
    "start": "5557199",
    "end": "5564239"
  },
  {
    "text": "remember my image you're driving it it'll be fine it's not the opposite of",
    "start": "5564239",
    "end": "5570080"
  },
  {
    "text": "the car you know if i'm in a car i'm actually more nervous when i'm not driving but right when i'm coding i'm more nervous",
    "start": "5570080",
    "end": "5576480"
  },
  {
    "text": "when i am driving all right how about you guys i always love to drive i prefer to drive",
    "start": "5576480",
    "end": "5584800"
  },
  {
    "text": "than to ride because i really trust the person but look at that yammel could not find",
    "start": "5584800",
    "end": "5590560"
  },
  {
    "text": "expected hold in the competition i should be driving yeah no right so never trust other people to",
    "start": "5590560",
    "end": "5599040"
  },
  {
    "text": "write your jamal that's right that's the problem there look it's the semicolon that's it mark four",
    "start": "5599040",
    "end": "5606080"
  },
  {
    "text": "right save it uh but now that they look at this hang on how does this work this doesn't",
    "start": "5606080",
    "end": "5612239"
  },
  {
    "text": "look like valley demo what the hell okay so how do we configure that i think i think your colon got pushed",
    "start": "5612239",
    "end": "5619440"
  },
  {
    "text": "off uh when you pasted so if you go back to that is is the key",
    "start": "5619440",
    "end": "5625040"
  },
  {
    "text": "the yes so the key has to be log format upstream that was that was my starting point so",
    "start": "5625040",
    "end": "5631440"
  },
  {
    "text": "uh i think i need to oh there's okay the text is a little small i couldn't see there's no so there's no underscore",
    "start": "5631440",
    "end": "5636880"
  },
  {
    "text": "between log format and on stream info yeah log format upstream look log so",
    "start": "5636880",
    "end": "5642800"
  },
  {
    "text": "this is a slightly different what i copied was was the wrong thing log log dash format upstream",
    "start": "5642800",
    "end": "5650800"
  },
  {
    "text": "call exactly and then the actual format so we can go fancy we can do like multi-line and stuff like that",
    "start": "5650800",
    "end": "5657040"
  },
  {
    "text": "but this is this is what we want cool yeah now we have the log format and it ends",
    "start": "5657040",
    "end": "5662480"
  },
  {
    "text": "with a single quote which is what we want cool",
    "start": "5662480",
    "end": "5668080"
  },
  {
    "text": "beautiful applied plus all the things yep yep there you go",
    "start": "5668080",
    "end": "5673920"
  },
  {
    "text": "so now nginx will go through everything needs to go through we have k9s let's look at all the pods we should",
    "start": "5673920",
    "end": "5679760"
  },
  {
    "text": "see nginx rotate nicely oh postgres operator that's a bad one just",
    "start": "5679760",
    "end": "5685760"
  },
  {
    "text": "ignore that that's a bad one it's a bad one let's just ignore it for now",
    "start": "5685760",
    "end": "5692159"
  },
  {
    "text": "you're looking for right so what i will do i'll just jump on one of these just",
    "start": "5692159",
    "end": "5697199"
  },
  {
    "text": "to verify the config so see if that was applied correctly so s for shell and i need to go etc",
    "start": "5697199",
    "end": "5706560"
  },
  {
    "text": "so this is on one of the pods nginx there it is and what we're looking for is this will",
    "start": "5706560",
    "end": "5714000"
  },
  {
    "text": "get bundled into single one which is nginx.com i think what i want to do",
    "start": "5714000",
    "end": "5719360"
  },
  {
    "text": "is log format let's see what it is in nginx",
    "start": "5719360",
    "end": "5725440"
  },
  {
    "text": "conf okay so look at that we have that",
    "start": "5726840",
    "end": "5732239"
  },
  {
    "text": "host which is not what we want so i think when i pasted it the second time uh the host is in the",
    "start": "5732239",
    "end": "5738560"
  },
  {
    "text": "wrong place so yeah that's okay uh there it is c that was the one that we had it before",
    "start": "5738560",
    "end": "5746239"
  },
  {
    "text": "uh so it was just before let's put host there we go",
    "start": "5746239",
    "end": "5751679"
  },
  {
    "text": "i think the request still had a slash before though didn't it uh make sure because it's part of the",
    "start": "5751679",
    "end": "5759920"
  },
  {
    "text": "make sure okay yeah i heard it last uh where is it request length path uri",
    "start": "5759920",
    "end": "5767440"
  },
  {
    "text": "we have the uri request method http refer it's not here but if we go to the nginx if we go to",
    "start": "5767440",
    "end": "5775920"
  },
  {
    "text": "the request awesome request i mean the one that you",
    "start": "5775920",
    "end": "5781760"
  },
  {
    "text": "copy pasted from the other page the full default format i thought had it request",
    "start": "5781760",
    "end": "5788400"
  },
  {
    "text": "oh all right cool okay so i expect this to have been applied",
    "start": "5788400",
    "end": "5794800"
  },
  {
    "text": "where is it yeah that was applied i'm still here let me just get out of this container and we go back in grep log",
    "start": "5794800",
    "end": "5803280"
  },
  {
    "text": "format etc engine x engine x.com and now we can see it's in the right",
    "start": "5803280",
    "end": "5808320"
  },
  {
    "text": "place all right it's like a nice confirmation so that's all done what about the logs let's look at the",
    "start": "5808320",
    "end": "5814480"
  },
  {
    "text": "logs one query there you go changelog.com",
    "start": "5814480",
    "end": "5821840"
  },
  {
    "text": "now we see the thing which is being queried right it's right there cool so",
    "start": "5821840",
    "end": "5828560"
  },
  {
    "text": "we need to extract this because we need to count how many of these do we get right and then break it down by that so",
    "start": "5828560",
    "end": "5835280"
  },
  {
    "text": "for that i think i would bring out some regex and i need to remind myself what this is",
    "start": "5835280",
    "end": "5842400"
  },
  {
    "text": "from now everyone knows regex by heart this is",
    "start": "5842400",
    "end": "5848719"
  },
  {
    "text": "lucky that's okay i've spent many years uh web scraping has something",
    "start": "5848960",
    "end": "5855040"
  },
  {
    "text": "to do with it it will not be mentioned again just once cool so the problem is that the logs that we",
    "start": "5855040",
    "end": "5862639"
  },
  {
    "text": "ship it is uh the problem is that the logs that we ship you see they are",
    "start": "5862639",
    "end": "5868400"
  },
  {
    "text": "um it's not even like log forms like one of the rfc implementations but they're not structure structured",
    "start": "5868400",
    "end": "5874080"
  },
  {
    "text": "logs and the easiest thing would be to change this to structured logs but it will break all our dashboards and",
    "start": "5874080",
    "end": "5880960"
  },
  {
    "text": "we don't want that and because we don't have structured logs we need to figure out where exactly is the url so now that now",
    "start": "5880960",
    "end": "5888560"
  },
  {
    "text": "that i've done this i'm thinking what about we add host equals because it will make the regex easier",
    "start": "5888560",
    "end": "5894960"
  },
  {
    "text": "so we need some sort of an anchor to find the host quicker otherwise we have to look at what other",
    "start": "5894960",
    "end": "5901360"
  },
  {
    "text": "lines are around it sorry what other characters are around it well it will always start with bracket space",
    "start": "5901360",
    "end": "5907040"
  },
  {
    "text": "and bracket space but is that the only bracket space there is another bracket here blend with",
    "start": "5907040",
    "end": "5913280"
  },
  {
    "text": "the space so look there's there's another one here",
    "start": "5913280",
    "end": "5918880"
  },
  {
    "text": "in the same line yeah okay do you see that so you just put it at the end instead of where it is then you just",
    "start": "5918880",
    "end": "5924239"
  },
  {
    "text": "anchor to the end of the line we could we could do many you already figured out this way",
    "start": "5924239",
    "end": "5930800"
  },
  {
    "text": "he's already got this written just to save some time",
    "start": "5930800",
    "end": "5939840"
  },
  {
    "text": "like to save some time yeah aaron has been writing this reg x all week and he's got it crafted and we're trying to",
    "start": "5942880",
    "end": "5949199"
  },
  {
    "text": "throw a wrench in it look for and that's that's what we want no i just thought these basics well cool so let's run this",
    "start": "5949199",
    "end": "5956560"
  },
  {
    "text": "again so we have host equals and then the actual host and then we pipe it through log format",
    "start": "5956560",
    "end": "5961679"
  },
  {
    "text": "and that's what then what it's going to do if we pipe it not regex we do log fmt",
    "start": "5961679",
    "end": "5967199"
  },
  {
    "text": "uh it will parse it and if i do that you'll see it gets the label see this",
    "start": "5967199",
    "end": "5972639"
  },
  {
    "text": "one already has it everyone parsing some of the logs yeah i don't think it likes that log",
    "start": "5972639",
    "end": "5978239"
  },
  {
    "text": "anyways we'll see it uh we'll see look host parse field changelog.com so",
    "start": "5978239",
    "end": "5983679"
  },
  {
    "text": "it extracts the host directly what i don't understand is why doesn't it like oh yes i know why it",
    "start": "5983679",
    "end": "5989920"
  },
  {
    "text": "doesn't like it because we only just introduced this host one of them don't have it and some exactly that's why",
    "start": "5989920",
    "end": "5995600"
  },
  {
    "text": "so host it gets the rest it doesn't get so that's okay we'll go for log format",
    "start": "5995600",
    "end": "6000719"
  },
  {
    "text": "and now we need to um sum by uh the the host",
    "start": "6000719",
    "end": "6008159"
  },
  {
    "text": "so we go in here there's a few functions let's see which ones do we get",
    "start": "6008159",
    "end": "6014079"
  },
  {
    "text": "some rate it is a rate count over time i think that's exactly what you wanted",
    "start": "6014480",
    "end": "6020639"
  },
  {
    "text": "how many of those do we have like in a specific minute right i think that's what you want to",
    "start": "6020639",
    "end": "6025920"
  },
  {
    "text": "jared so i think count over time is what we want through bar one minute",
    "start": "6025920",
    "end": "6032000"
  },
  {
    "text": "uh and i think that's it let's go here so job count over time we want",
    "start": "6032000",
    "end": "6038480"
  },
  {
    "text": "to count these and we want to count them over one minute and",
    "start": "6038480",
    "end": "6044239"
  },
  {
    "text": "uh can i do buy host i think that's like a sum which will come later you know what let me just do",
    "start": "6044239",
    "end": "6050400"
  },
  {
    "text": "count over time let's see what this gives us uh unexpected",
    "start": "6050400",
    "end": "6057520"
  },
  {
    "text": "i only have one i only have one there and i need two there because one is for",
    "start": "6057520",
    "end": "6065119"
  },
  {
    "text": "the log format and one is for the thing itself okay use a label filter yes",
    "start": "6065119",
    "end": "6071520"
  },
  {
    "text": "so i need to basically say the unwrap part because some of them are failing because",
    "start": "6071520",
    "end": "6076800"
  },
  {
    "text": "not all of them have the um host so i want to say filter out all of them",
    "start": "6076800",
    "end": "6082320"
  },
  {
    "text": "which cannot be formatted there you go and now we have we see how many of these do we have",
    "start": "6082320",
    "end": "6088880"
  },
  {
    "text": "how many redirects we have within that one minute okay but now what we want to do is get",
    "start": "6088880",
    "end": "6096000"
  },
  {
    "text": "them by by uh by hub by ho by host right so we group them by host we see",
    "start": "6096000",
    "end": "6102239"
  },
  {
    "text": "how many hosts we have yep so let's see how do we do that some without app",
    "start": "6102239",
    "end": "6108560"
  },
  {
    "text": "some i think i want some buy that's what i actually want uh but what i'm wondering is do we get",
    "start": "6108560",
    "end": "6115520"
  },
  {
    "text": "that um",
    "start": "6115520",
    "end": "6120560"
  },
  {
    "text": "lock format i think i need that inside hang on let me let me let me go",
    "start": "6120560",
    "end": "6127040"
  },
  {
    "text": "back to this one let me go back to this one this was a",
    "start": "6127040",
    "end": "6132560"
  },
  {
    "text": "starting point uh i can successfully reload it",
    "start": "6132560",
    "end": "6137920"
  },
  {
    "text": "log format that's not what i want because i want those which have a host",
    "start": "6137920",
    "end": "6144239"
  },
  {
    "text": "look format",
    "start": "6144239",
    "end": "6149840"
  },
  {
    "text": "why am i only seeing these something is not right",
    "start": "6152159",
    "end": "6157280"
  },
  {
    "text": "so before i was getting all these so even these are getting we're getting arabs parsing them",
    "start": "6157280",
    "end": "6163840"
  },
  {
    "text": "can you click on the first one and i'll show you the air oh i think i know why",
    "start": "6165040",
    "end": "6171440"
  },
  {
    "text": "so the problem is it's expecting this one to be all in log format and it's not the only thing that we've done we've",
    "start": "6171440",
    "end": "6177520"
  },
  {
    "text": "added a host equals and adding a host equals doesn't make it a a lock format log format tries to do",
    "start": "6177520",
    "end": "6183840"
  },
  {
    "text": "what it can it extracts it but no we still have to use the regex that's the problem okay",
    "start": "6183840",
    "end": "6189280"
  },
  {
    "text": "regex um let me remember let's have some funky things",
    "start": "6189280",
    "end": "6195360"
  },
  {
    "text": "around regex pink i need to be heading out but it's been all right laura thanks for",
    "start": "6195360",
    "end": "6200800"
  },
  {
    "text": "hanging out with me guys yeah all a good weekend see you next time see you",
    "start": "6200800",
    "end": "6206400"
  },
  {
    "text": "guys too bye okay so",
    "start": "6206400",
    "end": "6211440"
  },
  {
    "text": "this is what we want we want to capture it and then we want to sum it by that so regex",
    "start": "6211440",
    "end": "6219679"
  },
  {
    "text": "this will be the host and the format will be [Music]",
    "start": "6219679",
    "end": "6226760"
  },
  {
    "text": "say host equals let's see what that gives us run query",
    "start": "6227360",
    "end": "6233119"
  },
  {
    "text": "there we go so now it gets the host separately like this",
    "start": "6233119",
    "end": "6239040"
  },
  {
    "text": "that was if i call this for example i don't know um i know host just call it foo something",
    "start": "6239040",
    "end": "6245360"
  },
  {
    "text": "completely different if i call this foo you'll see you'll see that when it parses this line",
    "start": "6245360",
    "end": "6252719"
  },
  {
    "text": "oh well he named a host on the other side in the capture oh yes i did sorry my city",
    "start": "6252960",
    "end": "6261360"
  },
  {
    "text": "host this is foo run query i would expect it to be",
    "start": "6261360",
    "end": "6268400"
  },
  {
    "text": "foo it's change log hmm first field still shows up it shows up",
    "start": "6270880",
    "end": "6276880"
  },
  {
    "text": "automatically i wasn't i was surprised maybe just does it automatically don't have to do anything when you do",
    "start": "6276880",
    "end": "6282880"
  },
  {
    "text": "host equals that would be very clever yeah so maybe just simply by having host equals it just does that and you don't",
    "start": "6282880",
    "end": "6288800"
  },
  {
    "text": "have to do any of the regex thing okay that would be convenient there it is",
    "start": "6288800",
    "end": "6294719"
  },
  {
    "text": "that's what it seems to do okay so that's cool so let's see now if we do some by",
    "start": "6294719",
    "end": "6303520"
  },
  {
    "text": "by host that's what i want to do and i think i need to do an interval",
    "start": "6303520",
    "end": "6308719"
  },
  {
    "text": "here one minute run query",
    "start": "6308719",
    "end": "6314320"
  },
  {
    "text": "no unexpected range i think no hang on somebody doesn't doesn't get in the interval",
    "start": "6314320",
    "end": "6320880"
  },
  {
    "text": "there's too many parentheses now some buy i know that buy needs one but i think",
    "start": "6320880",
    "end": "6326000"
  },
  {
    "text": "some needs need something else so some is not enough just to use some on its own sum by host and then you",
    "start": "6326000",
    "end": "6332320"
  },
  {
    "text": "have a rate or something like that then you have sum over time the sum of",
    "start": "6332320",
    "end": "6337679"
  },
  {
    "text": "all values in the specified and we don't want that we want count over time so some buy",
    "start": "6337679",
    "end": "6343760"
  },
  {
    "text": "hosts which we want but they want count over time count inside of it which is what we had before",
    "start": "6343760",
    "end": "6352000"
  },
  {
    "text": "so some buy and inside you have count over time that makes sense okay so inside we have count over time",
    "start": "6352000",
    "end": "6361040"
  },
  {
    "text": "this one and it's one minute query",
    "start": "6361040",
    "end": "6367840"
  },
  {
    "text": "too many",
    "start": "6368480",
    "end": "6373679"
  },
  {
    "text": "i'll pull these side by side as i'm doing this because i'm switching between too many things",
    "start": "6373679",
    "end": "6379760"
  },
  {
    "text": "okay where was it count over time so we have",
    "start": "6379760",
    "end": "6386080"
  },
  {
    "text": "some buy we i want to sum by host look at that it's exactly this one i didn't even realize that so you want",
    "start": "6386080",
    "end": "6393040"
  },
  {
    "text": "to sum buy host which is correct and then inside we have to do the count",
    "start": "6393040",
    "end": "6398159"
  },
  {
    "text": "count over time yeah count over time we have the job and what is the time has",
    "start": "6398159",
    "end": "6405199"
  },
  {
    "text": "to be inside that parenthesis yep that's exactly right thank you jared that was it and then i",
    "start": "6405199",
    "end": "6412000"
  },
  {
    "text": "need to close this twice right query there we go boom",
    "start": "6412000",
    "end": "6420239"
  },
  {
    "text": "but we have a lot off and we need to know which host it is",
    "start": "6420880",
    "end": "6426320"
  },
  {
    "text": "yeah this sounds like all logs yeah that's exactly what i'm wondering why don't we see the host",
    "start": "6426320",
    "end": "6432719"
  },
  {
    "text": "and it's a single is this so this is all all requests some by host",
    "start": "6434480",
    "end": "6442159"
  },
  {
    "text": "it is yes but we should see separate ones right",
    "start": "6442159",
    "end": "6449520"
  },
  {
    "text": "we should if the hosts are different yeah unless there haven't been any vanity",
    "start": "6449520",
    "end": "6456239"
  },
  {
    "text": "requests in the past uh however long yeah what's your current time i can take a few here",
    "start": "6456239",
    "end": "6462560"
  },
  {
    "text": "so look we can do we can do count over time but when we do counter i think no i still think we need to",
    "start": "6462560",
    "end": "6468159"
  },
  {
    "text": "filter it by host so look yeah that's the one ah but no because we need to",
    "start": "6468159",
    "end": "6474320"
  },
  {
    "text": "it's almost like we need to we need to split them by host",
    "start": "6474880",
    "end": "6480320"
  },
  {
    "text": "right so that we need to split them by host and that's what we need to count over",
    "start": "6480400",
    "end": "6486000"
  },
  {
    "text": "time because the problem right here is like look if you only run this we see all the requests all of them but",
    "start": "6486000",
    "end": "6492960"
  },
  {
    "text": "we are not grouping them by host right so that's the bit which you're missing",
    "start": "6492960",
    "end": "6499760"
  },
  {
    "text": "i thought that's what the host thing did some buy is a group buy",
    "start": "6499760",
    "end": "6506480"
  },
  {
    "text": "uh well that's that's a some buy the mass sounds",
    "start": "6506639",
    "end": "6512960"
  },
  {
    "text": "some buy and then the buy property is the group yes but then you should also capture the",
    "start": "6519280",
    "end": "6526880"
  },
  {
    "text": "the buy right and you just sum them but you don't know what the actual host is then it's worthless",
    "start": "6526880",
    "end": "6533600"
  },
  {
    "text": "okay so i'm distracting you keep finding your thing",
    "start": "6534400",
    "end": "6539440"
  },
  {
    "text": "so over time i can see that these quantile over time into cluster by path",
    "start": "6539440",
    "end": "6546080"
  },
  {
    "text": "so i think we need something that like",
    "start": "6546080",
    "end": "6552560"
  },
  {
    "text": "here for example some by org the problem is when we have it here like",
    "start": "6552560",
    "end": "6558159"
  },
  {
    "text": "this we see the parsed field host",
    "start": "6558159",
    "end": "6562560"
  },
  {
    "text": "but when we do some by so if we do sum by host",
    "start": "6564239",
    "end": "6570400"
  },
  {
    "text": "and then we take",
    "start": "6572960",
    "end": "6576400"
  },
  {
    "text": "well that's it",
    "start": "6578159",
    "end": "6583440"
  },
  {
    "text": "some by host i think this one is be wrapped because that's the query which we're summing by host but um there's another",
    "start": "6583440",
    "end": "6591920"
  },
  {
    "text": "sum over time or something like that right so there's a function inside that function and you're not putting anything in there",
    "start": "6591920",
    "end": "6599440"
  },
  {
    "text": "exactly try that try the sum over time on the uh",
    "start": "6599440",
    "end": "6606960"
  },
  {
    "text": "on the query itself and see if that this one here somewhere over time okay yeah i'll just take that function and wrap whatever's",
    "start": "6606960",
    "end": "6612800"
  },
  {
    "text": "in the curly braces there i'm i'm curious sorry i'm over there yep yep",
    "start": "6612800",
    "end": "6619440"
  },
  {
    "text": "did i miss one somebody that's okay good that's okay",
    "start": "6620800",
    "end": "6626719"
  },
  {
    "text": "that's okay and i'm closing two so yeah it looks good maybe you can't pass",
    "start": "6626719",
    "end": "6634639"
  },
  {
    "text": "it like that did i miss one i didn't see it some behind it's okay one two one two",
    "start": "6634639",
    "end": "6643198"
  },
  {
    "text": "yeah yeah that looks good to me apparently you can't just pass in that",
    "start": "6644719",
    "end": "6651520"
  },
  {
    "text": "query you have to pass in a function or something now you are passing on the function but that function takes",
    "start": "6651520",
    "end": "6657679"
  },
  {
    "text": "uh something else that has to have a range like they have a one minute range and that one this one over time",
    "start": "6657679",
    "end": "6664480"
  },
  {
    "text": "at the end that's it thank you jared that's exactly what it's missing oh eagle eyes",
    "start": "6664480",
    "end": "6671119"
  },
  {
    "text": "well done without unwrap so now we need to unwrap it cool what does that mean we're getting there",
    "start": "6671119",
    "end": "6676480"
  },
  {
    "text": "uh unwrap unwrapped examples",
    "start": "6676480",
    "end": "6682560"
  },
  {
    "text": "unwrap request wait no it looks like the time interval right so is the time interval applied to",
    "start": "6682560",
    "end": "6688159"
  },
  {
    "text": "the sum over time or or is it a parameter to the unwrap uh bytes processed",
    "start": "6688159",
    "end": "6693599"
  },
  {
    "text": "it should be unwrapped bytes processed i don't know uh i'm not that well-versed",
    "start": "6693599",
    "end": "6701280"
  },
  {
    "text": "loki graphql we're going to unwrap the host and let's unwrap the host by one minute",
    "start": "6701280",
    "end": "6706560"
  },
  {
    "text": "oh man if this works i'm gonna be impressed it doesn't even look like it's gonna work syntax wise no i think the curly",
    "start": "6706560",
    "end": "6712880"
  },
  {
    "text": "brace is off so the curly brace needs to be on the quarry not at the time",
    "start": "6712880",
    "end": "6718880"
  },
  {
    "text": "true after controller there you go there yeah there we go",
    "start": "6718880",
    "end": "6726880"
  },
  {
    "text": "oh not impressed that's a that's a bigger stack i was so ready",
    "start": "6726880",
    "end": "6732880"
  },
  {
    "text": "yeah this is terribly wrong i think this is the error i think this is the error it's the the",
    "start": "6732880",
    "end": "6739440"
  },
  {
    "text": "whole parse format and the error right like look like for example here we have the log format okay",
    "start": "6739440",
    "end": "6746560"
  },
  {
    "text": "so if we do the log format and now we're going a bit back which is what we had before yeah two",
    "start": "6746560",
    "end": "6752000"
  },
  {
    "text": "times zero though two pipes yeah that's that's not good two pipes in a row",
    "start": "6752000",
    "end": "6757360"
  },
  {
    "text": "now it's the error that we have to go back to right in error equals nil i mean that's like a short",
    "start": "6757360",
    "end": "6762400"
  },
  {
    "text": "form of that",
    "start": "6762400",
    "end": "6765840"
  },
  {
    "text": "do any of us know what rap and unwrapper is actually doing because i do not yeah that's as i was saying for i",
    "start": "6770719",
    "end": "6776560"
  },
  {
    "text": "don't know loki's query language right let me remind you this is all this is",
    "start": "6776560",
    "end": "6782480"
  },
  {
    "text": "all loki right gerhard this is a low key yeah okay yeah this is all i don't know very well so so how do i know like when it's",
    "start": "6782480",
    "end": "6789360"
  },
  {
    "text": "located [Music] right so you look at the source uh",
    "start": "6789360",
    "end": "6797840"
  },
  {
    "text": "you see the source in here the source in this case it's logs",
    "start": "6797840",
    "end": "6804638"
  },
  {
    "text": "which is loki yes if you use for example prom prometheus this is by the way grafana",
    "start": "6805679",
    "end": "6811119"
  },
  {
    "text": "cloud if you use prom then you get metrics back gotcha so that's the metrics api this is the logs",
    "start": "6811119",
    "end": "6817679"
  },
  {
    "text": "api all right fair enough and these queries were executed against that api",
    "start": "6817679",
    "end": "6824000"
  },
  {
    "text": "okay so unwrap the range where was it unwrapped extract",
    "start": "6824000",
    "end": "6831280"
  },
  {
    "text": "labels as sample values instead of lock lines",
    "start": "6831280",
    "end": "6835840"
  },
  {
    "text": "so in our case",
    "start": "6836320",
    "end": "6841520"
  },
  {
    "text": "the functions duration seconds and bytes so these are the two supported ones",
    "start": "6843199",
    "end": "6848800"
  },
  {
    "text": "durations and then so that we can calculate um",
    "start": "6848800",
    "end": "6857040"
  },
  {
    "text": "them together like sum them do whatever max over time min",
    "start": "6857040",
    "end": "6863440"
  },
  {
    "text": "but actually that's a good point because we don't have we don't have such values right so we wouldn't need to really",
    "start": "6863440",
    "end": "6868560"
  },
  {
    "text": "unwrap it we don't have seconds we don't have bytes",
    "start": "6868560",
    "end": "6875599"
  },
  {
    "text": "no that's we're not trying we're not trying to process those types of values that's actually a good point",
    "start": "6875599",
    "end": "6881040"
  },
  {
    "text": "we don't need to do that um so what i'm surprised is that",
    "start": "6881040",
    "end": "6887760"
  },
  {
    "text": "this i was expecting this to work because it's done by host which is a parsed field",
    "start": "6887760",
    "end": "6893199"
  },
  {
    "text": "which we already have we can see it's parsed and then we do a [Music]",
    "start": "6893199",
    "end": "6898880"
  },
  {
    "text": "rate over the one one minute and we want to find the rate for one",
    "start": "6898880",
    "end": "6904960"
  },
  {
    "text": "minute by host so i was expecting that to work",
    "start": "6904960",
    "end": "6910320"
  },
  {
    "text": "so going for some reason it munched them all into one",
    "start": "6910320",
    "end": "6916320"
  },
  {
    "text": "yeah there was no separation by host it was just like here's your matching logs",
    "start": "6916400",
    "end": "6922719"
  },
  {
    "text": "over time count over time exactly we had a job count over time so this was it and we",
    "start": "6922719",
    "end": "6929280"
  },
  {
    "text": "had one minute and then we sum by host now the problem",
    "start": "6929280",
    "end": "6934639"
  },
  {
    "text": "is that the count over time for some reason it drops the host part",
    "start": "6934639",
    "end": "6940159"
  },
  {
    "text": "right so if i run this we use this line which is what we had earlier okay now the sum by host you see it's",
    "start": "6940159",
    "end": "6948080"
  },
  {
    "text": "empty and that means that the host label is not set on the values",
    "start": "6948080",
    "end": "6955599"
  },
  {
    "text": "so if we drop the sum by which is the group by",
    "start": "6955599",
    "end": "6960719"
  },
  {
    "text": "if you run it we can see the values that we get right and what these are these are the",
    "start": "6960719",
    "end": "6966320"
  },
  {
    "text": "different instances of the nginx right there's like three engine x instances that's why we have",
    "start": "6966320",
    "end": "6971520"
  },
  {
    "text": "three lines orange one um",
    "start": "6971520",
    "end": "6976800"
  },
  {
    "text": "yellow one and then blue a blue one so all three engine exists and and you",
    "start": "6976800",
    "end": "6982880"
  },
  {
    "text": "can see them here right so we are seeing how many logs these instances are generating every",
    "start": "6982880",
    "end": "6989440"
  },
  {
    "text": "minute but that's that's not what we want to see we want to see",
    "start": "6989440",
    "end": "6996000"
  },
  {
    "text": "how many like group the logs by host so the logs that have a host grouped",
    "start": "6996000",
    "end": "7002400"
  },
  {
    "text": "them all that were the host matches that's right that's what you're trying to do i'm curious if we switched to structured",
    "start": "7002400",
    "end": "7008239"
  },
  {
    "text": "logs uh because it looked like you could pipe to json and if if the logs if the log line is valid",
    "start": "7008239",
    "end": "7013520"
  },
  {
    "text": "json maybe we can you know pluck out the host that way but so yes we could do that it would break",
    "start": "7013520",
    "end": "7020639"
  },
  {
    "text": "all the dashboards but the thing is oh it's a host it's already a parsed field",
    "start": "7020639",
    "end": "7026719"
  },
  {
    "text": "right that's why maybe you get parse fields a different way than you get labels maybe you get parse",
    "start": "7026719",
    "end": "7033760"
  },
  {
    "text": "fields like with a dollar sign host or like some other way besides simply referencing yeah that could be or",
    "start": "7033760",
    "end": "7040239"
  },
  {
    "text": "maybe parse fields is just like just for the purposes of that output and it's not actually something",
    "start": "7040239",
    "end": "7045360"
  },
  {
    "text": "you could reference in a query um right maybe so you're saying maybe you would need to regex and grab it",
    "start": "7045360",
    "end": "7052159"
  },
  {
    "text": "in order to make it a label yeah like yeah maybe because that only pops up when you expand that log line that's a good point that's just",
    "start": "7052159",
    "end": "7058480"
  },
  {
    "text": "like on-the-fly processing that i think foo got added as a label when you had that reg x in there",
    "start": "7058480",
    "end": "7064480"
  },
  {
    "text": "yeah i think you're on to something i think you're on to something yes okay so with that in mind regex going back to",
    "start": "7064480",
    "end": "7070880"
  },
  {
    "text": "the regex spot we had [Music] i think this was the starting point for the regex",
    "start": "7070880",
    "end": "7076800"
  },
  {
    "text": "it was host equals post and this was host it's actually a good",
    "start": "7076800",
    "end": "7082880"
  },
  {
    "text": "point i think i got too excited that's what exactly because we're like hey it's",
    "start": "7082880",
    "end": "7087920"
  },
  {
    "text": "there for free and it's like well exactly there but it's not actually there it is now it's a label that's going to work",
    "start": "7087920",
    "end": "7093840"
  },
  {
    "text": "and we want well we also want a dot right",
    "start": "7093840",
    "end": "7099119"
  },
  {
    "text": "and actually we want like uh want to say it's either a word or an actual dot one or multiple times",
    "start": "7099119",
    "end": "7107119"
  },
  {
    "text": "to match the host run query there we go so let's see yeah look at",
    "start": "7107119",
    "end": "7112880"
  },
  {
    "text": "that host is now change of change dot com okay count over time",
    "start": "7112880",
    "end": "7120080"
  },
  {
    "text": "one minute i think this i don't think this is going to work i",
    "start": "7120480",
    "end": "7126159"
  },
  {
    "text": "think this one we need to put it in multiple brackets so it's this in the bracket",
    "start": "7126159",
    "end": "7131599"
  },
  {
    "text": "and uh yeah and then one minute let's run that look at that now you pass",
    "start": "7131599",
    "end": "7138960"
  },
  {
    "text": "that uh some by host now i pass everything but do i have the host label yes i do",
    "start": "7138960",
    "end": "7147119"
  },
  {
    "text": "the host is always changed.com though that's okay so this is the so this is the aggregate",
    "start": "7147119",
    "end": "7152960"
  },
  {
    "text": "of all the ingress's logs so now you just need to collapse those into a single",
    "start": "7152960",
    "end": "7158560"
  },
  {
    "text": "a data point they track over time for each host exactly which which we already have yeah",
    "start": "7158560",
    "end": "7165119"
  },
  {
    "text": "so we can see that we can now we have host see it's one of the labels like grafana change.com can you see there",
    "start": "7165119",
    "end": "7171760"
  },
  {
    "text": "um okay it's a bit difficult to see here um let's see how to make it easier look there host yeah change log change",
    "start": "7171760",
    "end": "7178639"
  },
  {
    "text": "log or fun now change logarfana so we have it here in the table we should also be seeing some go time ones",
    "start": "7178639",
    "end": "7184639"
  },
  {
    "text": "right uh we should just party i did",
    "start": "7184639",
    "end": "7190400"
  },
  {
    "text": "but show all 23. uh we're only seeing a subsety in the table right",
    "start": "7190400",
    "end": "7195679"
  },
  {
    "text": "in all of them can you also add a filter on the met the response uh",
    "start": "7195679",
    "end": "7202159"
  },
  {
    "text": "code because we only want 302s yes but yes we could do that but we need",
    "start": "7202159",
    "end": "7207840"
  },
  {
    "text": "to noise but we can get this working first i suppose yeah and then we can well we need to extract that as well so let's see how we",
    "start": "7207840",
    "end": "7214560"
  },
  {
    "text": "do that so let me take this i gotta drop off guys but i awesome i really want to see like",
    "start": "7214560",
    "end": "7221360"
  },
  {
    "text": "a like a screenshot of of this working i i wish i could stay on i'm good",
    "start": "7221360",
    "end": "7227599"
  },
  {
    "text": "thanks for hanging out all right guys see you next week see you bye okay so we have hosts",
    "start": "7227599",
    "end": "7235199"
  },
  {
    "text": "i think what i would like to do is maybe do the same thing for the response status because look it's like in between",
    "start": "7235199",
    "end": "7241360"
  },
  {
    "text": "it was very difficult to get this before so i'm thinking of duplicating the response status",
    "start": "7241360",
    "end": "7247840"
  },
  {
    "text": "so we have host response status so we just keep adding things okay so let's go back",
    "start": "7247840",
    "end": "7254560"
  },
  {
    "text": "here so we have host we have status and where status equals status",
    "start": "7254560",
    "end": "7263920"
  },
  {
    "text": "uh no okay apply the config we don't need to test",
    "start": "7264080",
    "end": "7272080"
  },
  {
    "text": "it now we know it's going to work this gets applied here we go",
    "start": "7272080",
    "end": "7278320"
  },
  {
    "text": "it's all good and now if i can all can i can also do live but it's tailing them and we have a lot of logs",
    "start": "7278320",
    "end": "7284880"
  },
  {
    "text": "right so maybe stop there maybe don't do that yeah it's just so",
    "start": "7284880",
    "end": "7290480"
  },
  {
    "text": "many logs we get look but we get status here status equals 200 there you go so you can see it right",
    "start": "7290480",
    "end": "7295679"
  },
  {
    "text": "there okay so regex we have that host and we can have another one",
    "start": "7295679",
    "end": "7301280"
  },
  {
    "text": "which is host let me go back to their example",
    "start": "7301280",
    "end": "7311840"
  },
  {
    "text": "right so i think this uh looks at the actual um like there's expects there to be a",
    "start": "7312560",
    "end": "7320080"
  },
  {
    "text": "space so we need more than one space right so one or more spaces",
    "start": "7320080",
    "end": "7326560"
  },
  {
    "text": "uh sorry match anything else and then we'll do this actually i'll status this right after this that's the convenience",
    "start": "7326560",
    "end": "7334480"
  },
  {
    "text": "so host space and then we have status equals status",
    "start": "7334480",
    "end": "7343199"
  },
  {
    "text": "and the status is just a digit so we can drop that one or more times",
    "start": "7343199",
    "end": "7350159"
  },
  {
    "text": "run a query okay",
    "start": "7350159",
    "end": "7354480"
  },
  {
    "text": "uh we are still just grouping them by okay we can see the status was extracted",
    "start": "7355679",
    "end": "7361040"
  },
  {
    "text": "there all right let's see status 200 actual 24 but",
    "start": "7361040",
    "end": "7367280"
  },
  {
    "text": "it is always the same ah no no we have there's something of course okay so now if we",
    "start": "7367280",
    "end": "7375520"
  },
  {
    "text": "status want to pipe it to status equals 302 you said right",
    "start": "7375520",
    "end": "7382080"
  },
  {
    "text": "302 here so now because we're getting that status is 302 run query",
    "start": "7382080",
    "end": "7390239"
  },
  {
    "text": "and there we get just a subset of those look at that beautiful we only get the three or two statuses",
    "start": "7390239",
    "end": "7397119"
  },
  {
    "text": "cool we there's a little party one i just did yes party there you go grafana all those cool",
    "start": "7397119",
    "end": "7404480"
  },
  {
    "text": "so this is how we get our in explore and from this we need to",
    "start": "7404480",
    "end": "7410880"
  },
  {
    "text": "convert this into a dashboard because we're limited how to visualize it in explore so going back to here",
    "start": "7410880",
    "end": "7418400"
  },
  {
    "text": "we can go to manage now create a new dashboard and by the way this is grafana cloud so",
    "start": "7418400",
    "end": "7423920"
  },
  {
    "text": "this is different from what we had before uh because we ship logs to grafana cloud",
    "start": "7423920",
    "end": "7429360"
  },
  {
    "text": "add a new panel uh datasource that's very important so we are working with logs in this case for this panel",
    "start": "7429360",
    "end": "7434719"
  },
  {
    "text": "we enter our query and there we go that's where we have our lines sorry our metrics",
    "start": "7434719",
    "end": "7441679"
  },
  {
    "text": "so now what we want to do in the legend um you see it's rather busy we have like a lot of things",
    "start": "7441679",
    "end": "7447520"
  },
  {
    "text": "what we care about is the host so if i do that you can see all your",
    "start": "7447520",
    "end": "7454239"
  },
  {
    "text": "hosts there jspartychangelog.com.com so um but look we have multiples",
    "start": "7454239",
    "end": "7462880"
  },
  {
    "text": "yeah so now we need to do a s we need to do like a sum by sum by",
    "start": "7462880",
    "end": "7470400"
  },
  {
    "text": "host uh what's the problem",
    "start": "7470400",
    "end": "7478079"
  },
  {
    "text": "oh i think it's this one i need to wrap up this again yep that's right",
    "start": "7478079",
    "end": "7483198"
  },
  {
    "text": "there we go and now we have only the hosts so within within that one",
    "start": "7484320",
    "end": "7489920"
  },
  {
    "text": "minute right because that's the that's we are using count over time that's how many redirects you have per minute",
    "start": "7489920",
    "end": "7496560"
  },
  {
    "text": "in that one minute and we can alter like we i can we can add more than one right so uh these are not really",
    "start": "7496560",
    "end": "7504000"
  },
  {
    "text": "redirected these are 302s and i suppose that's the difference the three or so redirects yeah yeah 302",
    "start": "7504000",
    "end": "7511440"
  },
  {
    "text": "reductions yeah so they are redirects but they're additional they aren't necessarily the vanity domain redirects",
    "start": "7511440",
    "end": "7518000"
  },
  {
    "text": "like the changelog one and the grafana one could just be other redirects so um what we would do is we would end up",
    "start": "7518000",
    "end": "7524800"
  },
  {
    "text": "ignoring like a couple of those domains right and we can do that by doing that here so we're saying",
    "start": "7524800",
    "end": "7531280"
  },
  {
    "text": "ignore if the host is for example changelog.com yeah",
    "start": "7531280",
    "end": "7536480"
  },
  {
    "text": "right and then uh what did i do wrong",
    "start": "7536480",
    "end": "7542239"
  },
  {
    "text": "status i want to pipe it maybe",
    "start": "7543360",
    "end": "7548800"
  },
  {
    "text": "i thought it did i thought okay let me see um let me see loki so",
    "start": "7548800",
    "end": "7555199"
  },
  {
    "text": "this is the filtering stuff at the beginning uh not equal to",
    "start": "7555199",
    "end": "7562239"
  },
  {
    "text": "uh that's it's the log pipeline it's basically these piping log line does not contain",
    "start": "7562239",
    "end": "7569679"
  },
  {
    "text": "so i have it here right status is that",
    "start": "7569679",
    "end": "7574800"
  },
  {
    "text": "so after you're ready after your regex you have a pipe and then you have status but you don't have a pipe on your next",
    "start": "7574880",
    "end": "7580320"
  },
  {
    "text": "do you have to pipe it and then say not equal to or it's just status and not equal to it's like the",
    "start": "7580320",
    "end": "7585760"
  },
  {
    "text": "same the same statement or a different statement so do you see here it says okay",
    "start": "7585760",
    "end": "7591599"
  },
  {
    "text": "longline contains right so we're saying logline contains status equals 302.",
    "start": "7592159",
    "end": "7600880"
  },
  {
    "text": "same as before in host um i don't think the problem is this i don't think it's",
    "start": "7600880",
    "end": "7606079"
  },
  {
    "text": "it's that no expecting string unexpected",
    "start": "7606079",
    "end": "7612880"
  },
  {
    "text": "do they have an example of a not equals they're using they're wrapping it all in double quotes uh yes that that's when you do",
    "start": "7614000",
    "end": "7621840"
  },
  {
    "text": "strings but we don't do strings we do labels the labels exactly",
    "start": "7621840",
    "end": "7629599"
  },
  {
    "text": "so like a duration so i'm wondering if that's what we need",
    "start": "7629599",
    "end": "7636400"
  },
  {
    "text": "actually we need to post now yeah host not equals two that's what i'm thinking as well yeah uh",
    "start": "7636400",
    "end": "7642960"
  },
  {
    "text": "it's uh and this needs to be a string there you go i should do it yeah that's",
    "start": "7642960",
    "end": "7648880"
  },
  {
    "text": "it thank you thank you cool there you go so now we have one and i think we should do",
    "start": "7648880",
    "end": "7654000"
  },
  {
    "text": "graffana as well right because we don't care about joining getting rid of both of those host not equals to grafana",
    "start": "7654000",
    "end": "7661840"
  },
  {
    "text": "dot changelog.com there we go so we only see js party",
    "start": "7662079",
    "end": "7667520"
  },
  {
    "text": "redirects one per minute real quick and see if it pops in there yeah",
    "start": "7667520",
    "end": "7673440"
  },
  {
    "text": "just keep hitting it so let's go last 30 minutes",
    "start": "7673440",
    "end": "7679760"
  },
  {
    "text": "[Music] decimal connection refused",
    "start": "7679760",
    "end": "7684800"
  },
  {
    "text": "connect changes i have a typo",
    "start": "7685360",
    "end": "7688960"
  },
  {
    "text": "huh we just do we just go down no no it works for",
    "start": "7694239",
    "end": "7700960"
  },
  {
    "text": "why did jsparty.fm i just i just did go time and it worked go time dot fm yep",
    "start": "7700960",
    "end": "7710159"
  },
  {
    "text": "try it from curl because sometimes your browser will catch that response status",
    "start": "7710159",
    "end": "7718880"
  },
  {
    "text": "response headers that's what i want to do response headers go time.fm this will show me all letters",
    "start": "7721840",
    "end": "7728960"
  },
  {
    "text": "yeah it's getting at 200. and it shows me the entire train is there a 302 to",
    "start": "7728960",
    "end": "7735599"
  },
  {
    "text": "channel.com time right before that yeah so we see there 302. something's funky with mine",
    "start": "7735599",
    "end": "7743440"
  },
  {
    "text": "all right fair enough we'll hop back to grafana now and see if they're in there yep look at that",
    "start": "7743440",
    "end": "7750880"
  },
  {
    "text": "yeah probably that fm works cool there you go cool so we have the panel",
    "start": "7750880",
    "end": "7757679"
  },
  {
    "text": "let's give it a name let's give it vanity redirects",
    "start": "7757679",
    "end": "7763678"
  },
  {
    "text": "[Music] that's basically it i can make this a table so that we have the",
    "start": "7764560",
    "end": "7771280"
  },
  {
    "text": "legend where is the legend as table to the right we put it here and we can do",
    "start": "7771280",
    "end": "7776480"
  },
  {
    "text": "max average current total you can see how many redirects you have",
    "start": "7776480",
    "end": "7781520"
  },
  {
    "text": "cool that's a bit weird why do we have 59 3",
    "start": "7781520",
    "end": "7788880"
  },
  {
    "text": "max current three total 59. that doesn't make sense to me no okay i",
    "start": "7788880",
    "end": "7795599"
  },
  {
    "text": "think totally spoken pay no attention to that literally i",
    "start": "7795599",
    "end": "7801760"
  },
  {
    "text": "mean that doesn't make sense cool so uh having done both now and both had their sort of uh workarounds",
    "start": "7801760",
    "end": "7809520"
  },
  {
    "text": "and hiccups seems like the promx side requires maybe some more",
    "start": "7809520",
    "end": "7815040"
  },
  {
    "text": "filtering that we don't have that was pretty easy to achieve here yeah this probably also requires",
    "start": "7815040",
    "end": "7822480"
  },
  {
    "text": "some more work if we want to do things like knowing which route they're going to and",
    "start": "7822480",
    "end": "7828239"
  },
  {
    "text": "stuff but promise would also require that i don't know which which one do you think is the best we've done both they're both pretty",
    "start": "7828239",
    "end": "7833280"
  },
  {
    "text": "straightforward yeah for some reason this to me feels easier it feels easier because you don't",
    "start": "7833280",
    "end": "7840639"
  },
  {
    "text": "need to do any code changes to the app yeah right to track these",
    "start": "7840639",
    "end": "7847679"
  },
  {
    "text": "we already have a lot of details in the logs i know that for example i know that in the app for example",
    "start": "7847679",
    "end": "7853119"
  },
  {
    "text": "we slice and dice all the metrics when it comes to requests well we don't have to we can use this to",
    "start": "7853119",
    "end": "7860079"
  },
  {
    "text": "slice and dice as much as we want i mean this is how easy it was the practical ifm just caught it",
    "start": "7860079",
    "end": "7865760"
  },
  {
    "text": "just got used um log ql can be a bit uh different so i'm more familiar with uh prom ql but",
    "start": "7865760",
    "end": "7873360"
  },
  {
    "text": "it's not crazy difficult so i think it's it's okay not to mention that there's",
    "start": "7873360",
    "end": "7879360"
  },
  {
    "text": "logs that we will need to parse and understand and process and do whatever which come from the cdn",
    "start": "7879360",
    "end": "7885280"
  },
  {
    "text": "and you can't do that in the app right right especially when it comes to um like the volume right that we have so",
    "start": "7885280",
    "end": "7892960"
  },
  {
    "text": "i think this could be the beginning of starting to derive some insights from our logs that",
    "start": "7892960",
    "end": "7899360"
  },
  {
    "text": "currently some of it the app does but maybe shouldn't do right",
    "start": "7899360",
    "end": "7905040"
  },
  {
    "text": "so if we wanted to change this the granularity on this obviously you can set the dashboard to like what your time",
    "start": "7905040",
    "end": "7910880"
  },
  {
    "text": "frame is but is it always going to read is it always going to group them by minute from because we have the one minute in",
    "start": "7910880",
    "end": "7917280"
  },
  {
    "text": "our actual query it will right now but let's do something so",
    "start": "7917280",
    "end": "7922400"
  },
  {
    "text": "let's do this let's do vanity redirects let's save this this is by the bigger",
    "start": "7922400",
    "end": "7928880"
  },
  {
    "text": "final cloud we do back these up locally so let's go to dashboard second settings",
    "start": "7928880",
    "end": "7934239"
  },
  {
    "text": "variables add a variable it's not a query it's a custom one so let's call this uh interval the label",
    "start": "7934239",
    "end": "7941679"
  },
  {
    "text": "is interval and we'll call it one minute five minutes give me one hour",
    "start": "7941679",
    "end": "7949920"
  },
  {
    "text": "what slicing and dicing would you want any anymore no there's plenty i think i think that's",
    "start": "7949920",
    "end": "7957520"
  },
  {
    "text": "enough right so at this we have the variable now we go back we can see we have it here the one",
    "start": "7957520",
    "end": "7963520"
  },
  {
    "text": "minute and now what we do we use that in the query itself",
    "start": "7963520",
    "end": "7968800"
  },
  {
    "text": "so rather than doing one minute directly we do interval and it's the one coming from there if we",
    "start": "7968800",
    "end": "7974719"
  },
  {
    "text": "go to five minutes there we go we count them over minutes cool but yeah i like that",
    "start": "7974719",
    "end": "7984880"
  },
  {
    "text": "well i think we should call this a win i think it worked out pretty well there i think so we're we're not done just yet",
    "start": "7985040",
    "end": "7991920"
  },
  {
    "text": "we have to commit we have to come i know right who cares about this stuff so this is it",
    "start": "7991920",
    "end": "7998320"
  },
  {
    "text": "this is the only thing there's a commitment yeah just a change to the engine next log right yeah so uh this will capture",
    "start": "7998320",
    "end": "8007280"
  },
  {
    "text": "request uh capture nginx",
    "start": "8007280",
    "end": "8012320"
  },
  {
    "text": "uh request host uh capture request host and status",
    "start": "8012320",
    "end": "8018400"
  },
  {
    "text": "in nginx logs [Music] for loki",
    "start": "8018400",
    "end": "8025840"
  },
  {
    "text": "this makes easier to group um requests",
    "start": "8026639",
    "end": "8035199"
  },
  {
    "text": "that go by in genetics go ahead gen x buy host and status",
    "start": "8035199",
    "end": "8043840"
  },
  {
    "text": "i mean it's literally that okay i'll need to pull and now push and",
    "start": "8044079",
    "end": "8052079"
  },
  {
    "text": "that's it i mean it won't change anything yeah if we if we had the other end of githubs which basically",
    "start": "8052079",
    "end": "8058400"
  },
  {
    "text": "applies to this uh githubs would apply the config but i've done it locally just much faster right and",
    "start": "8058400",
    "end": "8066400"
  },
  {
    "text": "that's it now we call it a win i think now we can call it a win i think i can come back",
    "start": "8066400",
    "end": "8072560"
  },
  {
    "text": "later and look at my vanity redirects dashboard and see if anybody's using them yeah i we can try hitting a few more",
    "start": "8072560",
    "end": "8078800"
  },
  {
    "text": "redirects to see what happened so throw me a few that we haven't hit so that we see them all here working",
    "start": "8078800",
    "end": "8085199"
  },
  {
    "text": "yeah so i'll throw a couple brand science in there yeah and actually as you do that this",
    "start": "8085199",
    "end": "8090960"
  },
  {
    "text": "refreshes every 30 seconds but maybe want every 10 seconds for it to refresh",
    "start": "8090960",
    "end": "8097520"
  },
  {
    "text": "oh you know why i'm getting the uh failure to connect on the go time.fm it's because i still have it in my",
    "start": "8098239",
    "end": "8103280"
  },
  {
    "text": "sticker that's why that was it yeah yeah i'm over here thinking like what",
    "start": "8103280",
    "end": "8109920"
  },
  {
    "text": "brain signs two requests apparently yeah that was me [Music]",
    "start": "8109920",
    "end": "8115280"
  },
  {
    "text": "it's nice that you go to them multiple times to see if it matches how many times you visited them yeah",
    "start": "8115280",
    "end": "8124079"
  },
  {
    "text": "um i also think that we have like 2020 right that still works changelog.com i believe",
    "start": "8124079",
    "end": "8129920"
  },
  {
    "text": "that's still set up yeah there you go so i would expect this to be called in there as well",
    "start": "8129920",
    "end": "8135199"
  },
  {
    "text": "within 10 seconds apparently not i'm wondering why",
    "start": "8135199",
    "end": "8142960"
  },
  {
    "text": "oh it hasn't been 10 seconds yet and is it do we do we do a 302 no it's uh i'm",
    "start": "8142960",
    "end": "8148800"
  },
  {
    "text": "refreshing it streamed i know uh let me look i'll just run it real quick maybe we don't do a 302",
    "start": "8148800",
    "end": "8156400"
  },
  {
    "text": "it's 301 yeah that's the thing so if you do 301 that's maybe another thing that we may want to do you may there you go",
    "start": "8159760",
    "end": "8166159"
  },
  {
    "text": "look i can see it right there 20 20. it's a 3-1 do you care about 301 versus 302 well",
    "start": "8166159",
    "end": "8173520"
  },
  {
    "text": "we're always for this dashboard we're using 302 for our vanity stuff so just leave it right so that makes sense",
    "start": "8173520",
    "end": "8179360"
  },
  {
    "text": "cool yeah cool thanks gerhard good stuff man",
    "start": "8179360",
    "end": "8185040"
  },
  {
    "text": "learning new stuff i think of all of the things here i think the query language inside of grafana which",
    "start": "8185280",
    "end": "8192000"
  },
  {
    "text": "apparently is loki a little bit lock ql is just log ql",
    "start": "8192000",
    "end": "8198399"
  },
  {
    "text": "yeah just for loki logs for the metrics for prometheus it's prom ql so we're using log ql there",
    "start": "8198400",
    "end": "8206399"
  },
  {
    "text": "here we we used log qlds which is inspired by promql that's right a little bit",
    "start": "8206400",
    "end": "8212240"
  },
  {
    "text": "unwieldy yeah it can be and that's like all the documentation that we have i don't think",
    "start": "8212240",
    "end": "8218000"
  },
  {
    "text": "it's it's as well structured as it could be yeah and it's like a lot of scrolling and more examples would really help",
    "start": "8218000",
    "end": "8225439"
  },
  {
    "text": "so we can see now for example like what we try to slice and dice why is there an example how to do that",
    "start": "8225440",
    "end": "8231598"
  },
  {
    "text": "yeah literally a pretty standard use case so the other thing is like if we would have had structured engine x",
    "start": "8231599",
    "end": "8237678"
  },
  {
    "text": "logs from you know day one and we thought this would have been easier yes and uh yes it makes you wonder why nginx",
    "start": "8237679",
    "end": "8244160"
  },
  {
    "text": "doesn't like i guess just legacy they just have that default format they've always used that's",
    "start": "8244160",
    "end": "8249840"
  },
  {
    "text": "exactly right it's just a default format and everyone expects that format it is there is it is an rfc",
    "start": "8249840",
    "end": "8256160"
  },
  {
    "text": "so it's it's not crazy but like it's i think it's when you try to get inside the logs you like you care about",
    "start": "8256160",
    "end": "8261439"
  },
  {
    "text": "specific things like timings for example we could extract a lot more things and the only reason why we haven't",
    "start": "8261440",
    "end": "8266719"
  },
  {
    "text": "changed to structured logs is because we have broken existing dashboards that we have but we should like we should definitely",
    "start": "8266719",
    "end": "8274240"
  },
  {
    "text": "change the structured logs and for the app as well i mean everything really if you ask me should be structured logging yeah i don't see",
    "start": "8274240",
    "end": "8280558"
  },
  {
    "text": "why you'd want anything else right because it's licensed yep cool",
    "start": "8280559",
    "end": "8285678"
  },
  {
    "text": "well uh that was fun for me i hope you had fun as well if you're if you're watching this then",
    "start": "8285679",
    "end": "8291120"
  },
  {
    "text": "you are a trooper because this is like probably two and a half hours of once we need to do a lot of videos",
    "start": "8291120",
    "end": "8297598"
  },
  {
    "text": "i'm not gonna edit this at all please half of this is too long people won't watch it oh well uh if you",
    "start": "8297599",
    "end": "8304319"
  },
  {
    "text": "are watching this you're awesome and uh thanks gerhard this is fun we'll do it again soon",
    "start": "8304320",
    "end": "8309439"
  },
  {
    "text": "likewise thank you jared thank you everybody for watching cheers",
    "start": "8309440",
    "end": "8315439"
  }
]