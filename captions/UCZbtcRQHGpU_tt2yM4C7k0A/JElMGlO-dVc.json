[
  {
    "text": "[Music] you are listening to shipit a podcast about operations infrastructure and",
    "start": "490",
    "end": "5560"
  },
  {
    "text": "Christmas presents I'm your host Gard lau and today we have a special Christmas episode which sums up two",
    "start": "5560",
    "end": "12440"
  },
  {
    "text": "months of very early mornings and a few late nights we have pulled request 395 a",
    "start": "12440",
    "end": "18119"
  },
  {
    "text": "cicd Lego set with Gom de rille and Joel longine continuous CPU profiling with",
    "start": "18119",
    "end": "24199"
  },
  {
    "text": "Frederick branik which is PR 396 as well as Auto restoring kubernetes",
    "start": "24199",
    "end": "29320"
  },
  {
    "text": "clusters with Dan mangam and mufa Kos PR 399 while I initially intended us to",
    "start": "29320",
    "end": "35440"
  },
  {
    "text": "have five Christmas presents in total only three got delivered in time we planned worked hard and eventually",
    "start": "35440",
    "end": "41920"
  },
  {
    "text": "shipped the best version just in time for Christmas My Hope Is that the latest additions to our change.com GitHub",
    "start": "41920",
    "end": "48079"
  },
  {
    "text": "reposter will help you just as much as they will help our 2022 setup merry Shas",
    "start": "48079",
    "end": "54000"
  },
  {
    "text": "everyone big thanks to our partners fley launch darkley and lenot thank you for",
    "start": "54000",
    "end": "59399"
  },
  {
    "text": "the great band with fley you can learn more at fastly.com ship new features with confidence by getting your feature",
    "start": "59399",
    "end": "65439"
  },
  {
    "text": "Flags powered by launch dark.com and thank you lenot for keeping our kues fast and simple run your setup as we do",
    "start": "65439",
    "end": "72759"
  },
  {
    "text": "VI l.com [Music]",
    "start": "72759",
    "end": "82000"
  },
  {
    "text": "changelog we are going to ship 3 2 [Music]",
    "start": "82000",
    "end": "88920"
  },
  {
    "text": "1",
    "start": "88920",
    "end": "91920"
  },
  {
    "text": "[Music] the first present this Christmas is a",
    "start": "97290",
    "end": "103479"
  },
  {
    "text": "cicd Lego set that chalk.com is already using for production the entire store",
    "start": "103479",
    "end": "108840"
  },
  {
    "text": "including code and screenshots are available in our GitHub repository cpool request",
    "start": "108840",
    "end": "113920"
  },
  {
    "text": "395 our new pipeline gets Cod into prod at least twice as fast as before and you",
    "start": "113920",
    "end": "119119"
  },
  {
    "text": "can see it running in GitHub actions since we recorded this we made it over a minute quicker which is a big deal when",
    "start": "119119",
    "end": "126119"
  },
  {
    "text": "everything us take less than 5 minutes in total and there is one more pull request open which will improve it even",
    "start": "126119",
    "end": "132640"
  },
  {
    "text": "more check the name of the person that opened pr41 if you like the Q language and",
    "start": "132640",
    "end": "138800"
  },
  {
    "text": "understand the potential of direct de cyclical graphs for pipelines this present will take your cicd to a whole",
    "start": "138800",
    "end": "145400"
  },
  {
    "text": "new level so in episode 23 uh we were talking to Sam and Solomon",
    "start": "145400",
    "end": "151000"
  },
  {
    "text": "about this uh new Universal deployment engine called dagger that's how it was introduced and one of the things which I",
    "start": "151000",
    "end": "157360"
  },
  {
    "text": "mentioned um towards the end is that I would like to make it part of the change log infrastructure so hi Joel Hi K hello",
    "start": "157360",
    "end": "166720"
  },
  {
    "text": "Hi how are you how are you doing today good excited to be here with you yeah same for me how was it for you like to",
    "start": "166720",
    "end": "173040"
  },
  {
    "text": "to work on this because uh we didn't have a lot of time really and we like Tred to squeeze it around like all sorts",
    "start": "173040",
    "end": "178440"
  },
  {
    "text": "of things what was it like the last month working on this tell us about it",
    "start": "178440",
    "end": "183799"
  },
  {
    "text": "uh for me uh it was fun uh it gave me an opportunity to dig into dagger and the",
    "start": "183799",
    "end": "190799"
  },
  {
    "text": "tool and the way that we use it um more than I had thus far um I'm relatively",
    "start": "190799",
    "end": "197599"
  },
  {
    "text": "new to dagger so this was part of my learning about how our system actually",
    "start": "197599",
    "end": "202640"
  },
  {
    "text": "works um and it was fun to kind of begin to grock how we use Q how we use",
    "start": "202640",
    "end": "208599"
  },
  {
    "text": "buildkit and and how the layers and like different file system States work",
    "start": "208599",
    "end": "214280"
  },
  {
    "text": "together in those contexts and um it was also fun to work with you and Gom and",
    "start": "214280",
    "end": "220720"
  },
  {
    "text": "try to figure out how to replicate what you've done in circle CI inside of dagger um like you said in part so that",
    "start": "220720",
    "end": "229000"
  },
  {
    "text": "we could actually transition it over to uh GitHub actions or wherever else you",
    "start": "229000",
    "end": "234159"
  },
  {
    "text": "wanted to run it right back at you what about you Gom for me my is like really",
    "start": "234159",
    "end": "240040"
  },
  {
    "text": "working with you one of the things maybe some of headaches because I didn't know",
    "start": "240040",
    "end": "245640"
  },
  {
    "text": "Circle C and it's quite interesting to because as I was helping you I know",
    "start": "245640",
    "end": "250760"
  },
  {
    "text": "dagger I don't know this technology so to help you port it I had to learn a lot of things mix I didn't get it and we",
    "start": "250760",
    "end": "257239"
  },
  {
    "text": "encountered a lot of issues along the way and in order to tweak them to fix them you need to properly understand",
    "start": "257239",
    "end": "264680"
  },
  {
    "text": "what you're doing because your config at the moment the SEC guy one is quite a big one",
    "start": "264680",
    "end": "270240"
  },
  {
    "text": "and in order to Port it we need to understand it properly but it was a lot of fun that is actually my key takeaway",
    "start": "270240",
    "end": "276240"
  },
  {
    "text": "as well you know I wasn't expecting to learn as much um I was hoping but I wasn't expecting it and then you know",
    "start": "276240",
    "end": "282360"
  },
  {
    "text": "with you two um it was great like we went like on such a journey and I think what helped is that we didn't have a lot",
    "start": "282360",
    "end": "289520"
  },
  {
    "text": "of time but we had uh long gaps between us working together so maybe it was like a couple of days and then we got again",
    "start": "289520",
    "end": "295960"
  },
  {
    "text": "for like half an hour or an hour or an hour uh Joelle uh you're in Colorado and",
    "start": "295960",
    "end": "301160"
  },
  {
    "text": "Gom is in Paris so he's like an hour ahead of me I think that really helped because we in a way we found a pace and",
    "start": "301160",
    "end": "307360"
  },
  {
    "text": "then we just bounced ideas of one another and we bried that Gap really nicely I think yeah I think that's one",
    "start": "307360",
    "end": "313080"
  },
  {
    "text": "of the things that I got out of this too was just the where we are now and what's",
    "start": "313080",
    "end": "318680"
  },
  {
    "text": "possible with dagger today and some of the difficulties that we currently have interesting interactions between q and",
    "start": "318680",
    "end": "326360"
  },
  {
    "text": "buildkit and how we're interpreting that q and applying it to buildkit States and",
    "start": "326360",
    "end": "331919"
  },
  {
    "text": "then kind of what we're doing with this new release just what I'm seeing as",
    "start": "331919",
    "end": "337000"
  },
  {
    "text": "being possible in that context and just how much more intuitive and Powerful",
    "start": "337000",
    "end": "342280"
  },
  {
    "text": "it's going to be um so it was that that was part of what was fun for me was",
    "start": "342280",
    "end": "347720"
  },
  {
    "text": "learning what our current state is while learning where we're headed and seeing",
    "start": "347720",
    "end": "353319"
  },
  {
    "text": "where that Delta is actually going to be an immense Improvement in in the tool so what does the new pipeline look like we",
    "start": "353319",
    "end": "360560"
  },
  {
    "text": "get and compile the dependencies and we do we do this in parallel so we do test and we do prod uh the tests we need to",
    "start": "360560",
    "end": "366759"
  },
  {
    "text": "compile them then we use a cache and this is something to do with the volumes right like to copy like all the layers",
    "start": "366759",
    "end": "373319"
  },
  {
    "text": "we don't need to get go into too much detail but it's build kit and Q working together and then we run the tests",
    "start": "373319",
    "end": "379080"
  },
  {
    "text": "before we can run the test we need to start the test database it's an ephemeral one it's just a container poster SQL uh because the tests are",
    "start": "379080",
    "end": "386319"
  },
  {
    "text": "integration tests some of them so they need a database and then we stop the database when the tests uh finish",
    "start": "386319",
    "end": "391919"
  },
  {
    "text": "running now in parallel we resolve the assets these are like the CSS uh JavaScript all that in development um",
    "start": "391919",
    "end": "399080"
  },
  {
    "text": "it's like a step towards production then we digest them and that is one of the inputs to the production image um on the",
    "start": "399080",
    "end": "406599"
  },
  {
    "text": "right hand side we have to compile the production sorry the dependencies for production we have the same caching",
    "start": "406599",
    "end": "411960"
  },
  {
    "text": "mechanism and this is like it's a necessary step based on the current",
    "start": "411960",
    "end": "417160"
  },
  {
    "text": "version of dagger which by the way this is something which which will improve um and uh how do I know that well jel has",
    "start": "417160",
    "end": "423759"
  },
  {
    "text": "been telling me all about it and he's been very excited right to work on that and maybe you want to mention a little bit about",
    "start": "423759",
    "end": "429599"
  },
  {
    "text": "that yeah so we're we're basically improving the the DX the developer",
    "start": "429599",
    "end": "435840"
  },
  {
    "text": "experience around um intera the low-level interactions that dagger has um with",
    "start": "435840",
    "end": "444440"
  },
  {
    "text": "build kit um so we're basically changing the API to uh to build kit right now we",
    "start": "444440",
    "end": "451000"
  },
  {
    "text": "have kind of a implicit kind of spread all over the place API to build kit um",
    "start": "451000",
    "end": "457560"
  },
  {
    "text": "inste of our um Q packages and the changes that we're in",
    "start": "457560",
    "end": "463000"
  },
  {
    "text": "the process of building out actually make that API much more explicit and",
    "start": "463000",
    "end": "468080"
  },
  {
    "text": "kind of form like a low-level representation of the built kit API within Q um which then can be used by",
    "start": "468080",
    "end": "475039"
  },
  {
    "text": "our packages or other packages um to interact with buildkit um the various",
    "start": "475039",
    "end": "483319"
  },
  {
    "text": "file system States and actions on those file systems as well so um yeah I think",
    "start": "483319",
    "end": "489120"
  },
  {
    "text": "this is going to get a lot better um we'll be able to actually use some of the features that we weren't able to use",
    "start": "489120",
    "end": "495280"
  },
  {
    "text": "this time around of build kit like mounting volumes um in a much cleaner way okay um and then when that is done",
    "start": "495280",
    "end": "503159"
  },
  {
    "text": "the last step is obviously assemble the image and push it to Docker Hub the one step which we don't have here and we",
    "start": "503159",
    "end": "508919"
  },
  {
    "text": "would want is to git commit the digest of the image that was uh deployed so",
    "start": "508919",
    "end": "515599"
  },
  {
    "text": "that we can do like a proper giops way so that rather than our production pulling latest and you know there's like",
    "start": "515599",
    "end": "521880"
  },
  {
    "text": "a couple of issues around that I I won't I won't go into them but we know we have to improve that we would like dagger in",
    "start": "521880",
    "end": "528120"
  },
  {
    "text": "this case to make that git commit and I say dagger but now that I realized it could just be GitHub actions and why do I say that um part of this pull request",
    "start": "528120",
    "end": "535600"
  },
  {
    "text": "we did the integration with GitHub actions and we'll get to that in a minute but first of all I would like like to uh show what the new pipeline",
    "start": "535600",
    "end": "542480"
  },
  {
    "text": "looks like and what makes it better so what are these green items here K how",
    "start": "542480",
    "end": "549040"
  },
  {
    "text": "would you describe these what are they these are I think it's actions mhm and so an action it's it represents a step",
    "start": "549040",
    "end": "557000"
  },
  {
    "text": "so in general it lies inside a definition in dager and so how to you",
    "start": "557000",
    "end": "562279"
  },
  {
    "text": "build a a dagger pipeline you just assemble actions in an all together and",
    "start": "562279",
    "end": "568519"
  },
  {
    "text": "uh a time we we build the dag do a little above that's how you have like",
    "start": "568519",
    "end": "574480"
  },
  {
    "text": "parallel dependency builds okay what is an action if you had to describe it Joel",
    "start": "574480",
    "end": "579680"
  },
  {
    "text": "how would you describe an action an action typically would be like a collection of buildkit steps so the",
    "start": "579680",
    "end": "586279"
  },
  {
    "text": "people familiar with Docker like a specific commands within a Docker file",
    "start": "586279",
    "end": "592120"
  },
  {
    "text": "like a copy or an exac you know an En those sorts of things mhm um basically",
    "start": "592120",
    "end": "600000"
  },
  {
    "text": "represents a stage uh within buildkit and typically one of these actions is",
    "start": "600000",
    "end": "606399"
  },
  {
    "text": "going to be a set of those steps so it might be a number of runs within a",
    "start": "606399",
    "end": "611480"
  },
  {
    "text": "container you know executing a a shell script or something along those lines and then getting the kind of resulting",
    "start": "611480",
    "end": "618120"
  },
  {
    "text": "file system State they they all run in the context of container right so when you think of a step there's a container",
    "start": "618120",
    "end": "624320"
  },
  {
    "text": "uh which gets created that step runs and there's some inputs and outputs for that one step is that correct yeah yeah",
    "start": "624320",
    "end": "630880"
  },
  {
    "text": "that's a great way of describing it so you have a set of inputs that could be a foul System state that could be a volume",
    "start": "630880",
    "end": "637680"
  },
  {
    "text": "mount it could be secret mounts as well um this is something that's uh a piece of uh build kit and some of the new",
    "start": "637680",
    "end": "644600"
  },
  {
    "text": "features that Docker build got as a result of buildkit so you have all these",
    "start": "644600",
    "end": "649639"
  },
  {
    "text": "inputs coming into this node which is that file system State plus some action",
    "start": "649639",
    "end": "655720"
  },
  {
    "text": "and um and then something results from that you know if you're doing an echo",
    "start": "655720",
    "end": "661760"
  },
  {
    "text": "hello to world. txt then that new file system state has that new file on top of",
    "start": "661760",
    "end": "667720"
  },
  {
    "text": "it right yeah so if you can see here these steps I mean there's no catch right if you remember the docker file uh",
    "start": "667720",
    "end": "673839"
  },
  {
    "text": "if you think about that and how some uh of those commands could be cached and then they're really quick like for",
    "start": "673839",
    "end": "679040"
  },
  {
    "text": "example here app image you can think of it almost like you know like a command in the docker file so that is cached and",
    "start": "679040",
    "end": "684800"
  },
  {
    "text": "take 0.9 seconds it just has to verify where it is in the cache now these running parallel and we'll we'll do a",
    "start": "684800",
    "end": "690200"
  },
  {
    "text": "run for you to see what they look like but this whole pipeline as a whole even though it looks flat it it runs in",
    "start": "690200",
    "end": "696440"
  },
  {
    "text": "parallel and it takes 190 seconds so it's a slight improvement over the 3 minutes and 308 seconds which we had",
    "start": "696440",
    "end": "703279"
  },
  {
    "text": "here but you have to realize that this 3 minutes and 38 seconds will always be just that doesn't matter I mean this is",
    "start": "703279",
    "end": "709959"
  },
  {
    "text": "using caching but dagger if it does use the caching if everything is cached if",
    "start": "709959",
    "end": "715560"
  },
  {
    "text": "it doesn't have to compile anything just has to run the tests themselves it's five times quicker that is a huge speed",
    "start": "715560",
    "end": "722360"
  },
  {
    "text": "up so this pipeline run all of it took 45 seconds and the test took the longest",
    "start": "722360",
    "end": "727880"
  },
  {
    "text": "42 seconds versus 3 minutes and 38 so",
    "start": "727880",
    "end": "732959"
  },
  {
    "text": "much much quicker and by the way this will run against any Docker demon that's the only requirement you need build kit",
    "start": "732959",
    "end": "739040"
  },
  {
    "text": "and the easiest way of getting build kit is just in your Docker it already has it so there's no special CI setup required",
    "start": "739040",
    "end": "745600"
  },
  {
    "text": "you can run this anywhere whether it runs the same way whether it runs in top actions Circle C or your local machine",
    "start": "745600",
    "end": "752399"
  },
  {
    "text": "which is really cool the other very cool feature is that open tracing is built in",
    "start": "752399",
    "end": "758040"
  },
  {
    "text": "so what it means is that you can see what what does a span look like for a",
    "start": "758040",
    "end": "764320"
  },
  {
    "text": "cach run versus an uncashed run and all you have to do is run Jagger and uh have an environment variable by the way all",
    "start": "764320",
    "end": "770959"
  },
  {
    "text": "this code all the integration is here so if you look at pull request 395 you can see all of it so what we're seeing here",
    "start": "770959",
    "end": "776800"
  },
  {
    "text": "is that this cach run we can see compiling the Tendencies and you can see that how that some of these steps run in",
    "start": "776800",
    "end": "782079"
  },
  {
    "text": "parallel so deps compile prod are still running while the test cash already",
    "start": "782079",
    "end": "787839"
  },
  {
    "text": "started here same thing image prod cache started here assets Dev so on so forth and tests right the tests are running",
    "start": "787839",
    "end": "794519"
  },
  {
    "text": "and we are already we started building the the production image and that is the",
    "start": "794519",
    "end": "799639"
  },
  {
    "text": "beauty of the pipeline right like you want to run as many things as you can in parallel and I do like optimistic",
    "start": "799639",
    "end": "805600"
  },
  {
    "text": "branching it's called in CPUs and then when you get to the end of it it's just like last step you know you assume that",
    "start": "805600",
    "end": "811120"
  },
  {
    "text": "everything will just work and that's what will make it really quick so you can see what the cached run looks like you can see that all these steps are",
    "start": "811120",
    "end": "816760"
  },
  {
    "text": "really really quick the tests take the longest and all in all we're down in 47",
    "start": "816760",
    "end": "822000"
  },
  {
    "text": "seconds 46.98 let's be precise okay I think that's one of the beautiful things",
    "start": "822000",
    "end": "827199"
  },
  {
    "text": "about dagger and our use of build kit too is that um because we're describing",
    "start": "827199",
    "end": "833880"
  },
  {
    "text": "at a very fine grain level the relationships between these relatively",
    "start": "833880",
    "end": "839920"
  },
  {
    "text": "fine grained steps that might be you know within the context of an action we",
    "start": "839920",
    "end": "845360"
  },
  {
    "text": "can run many of those in parallel so if you need to go run a bunch of things along say the assets pipeline you can do",
    "start": "845360",
    "end": "853040"
  },
  {
    "text": "that at the same time that you're doing stuff with mix and then like you said",
    "start": "853040",
    "end": "859560"
  },
  {
    "text": "you're basically waiting for both of those things to be done because those are inputs to the some next stage um and",
    "start": "859560",
    "end": "866279"
  },
  {
    "text": "you could imagine much more complicated versions of this as well yeah where you're going and building a ton of",
    "start": "866279",
    "end": "871320"
  },
  {
    "text": "microservices in parallel yeah exactly um what about the GitHub action integration well this is a screenshot",
    "start": "871320",
    "end": "877000"
  },
  {
    "text": "this is what it looks like we want to do like a point in time and we can see how much quicker this is but I would like to talk about this and maybe guom can run",
    "start": "877000",
    "end": "883720"
  },
  {
    "text": "us through it what what does this look like this is the GitHub actions config so what can you tell us about it gam how do you read this so it's like a normal",
    "start": "883720",
    "end": "891680"
  },
  {
    "text": "uh GitHub action what I see here you have envirment variables so doco host",
    "start": "891680",
    "end": "898279"
  },
  {
    "text": "the hotel to the the Jagger on point here okay and then you have a job only",
    "start": "898279",
    "end": "903839"
  },
  {
    "text": "one job which is the uh name CI it RS on Ubuntu so you just check out the code",
    "start": "903839",
    "end": "910480"
  },
  {
    "text": "for the context of the of the of the changes and then you use basically",
    "start": "910480",
    "end": "915639"
  },
  {
    "text": "dagger here the dagger action action the dagger action exactly and then you",
    "start": "915639",
    "end": "920959"
  },
  {
    "text": "configure the tail scale tunel I think it's for for you I believe yeah because",
    "start": "920959",
    "end": "926759"
  },
  {
    "text": "this Docker is remote that's right and it's a same Docker host which I use locally like I don't run local Docker",
    "start": "926759",
    "end": "932399"
  },
  {
    "text": "locally I just have a tail scale tunnel which connects me to that host and it's the same host that the CI uses now",
    "start": "932399",
    "end": "939560"
  },
  {
    "text": "there's there's an improvement to be made there and we'll get to that maybe at the end but uh yeah that's it's the same one so if it runs locally it will",
    "start": "939560",
    "end": "947440"
  },
  {
    "text": "run exactly the same in CI and that's really cool I think and what about this last step basically it's the step you do",
    "start": "947440",
    "end": "953759"
  },
  {
    "text": "when you run it locally you just do a dagger rep and I presume you have an input",
    "start": "953759",
    "end": "959560"
  },
  {
    "text": "uh you have specified an input which is a local folder yeah and you don't have",
    "start": "959560",
    "end": "965800"
  },
  {
    "text": "to to specify it that's right so if you want to see the glue codee so the the dagger up you're right it's just a step",
    "start": "965800",
    "end": "971639"
  },
  {
    "text": "which already takes some values that have been preconfigured so those values are committed including the secrets by",
    "start": "971639",
    "end": "978399"
  },
  {
    "text": "the way um B using this really cool thing called Sops you may have heard of it from oilla to encrypt all the secrets",
    "start": "978399",
    "end": "984880"
  },
  {
    "text": "so we have to set in terms of a secret the the H key to for the to be able to be decrypted like if you think of it",
    "start": "984880",
    "end": "991199"
  },
  {
    "text": "like the private key and um yeah everything just works so we commit Secrets right we're crazy I know no",
    "start": "991199",
    "end": "999480"
  },
  {
    "text": "actually it works really well it's it's a it's it's a done thing and I waited for a long time to do this I'm really excited so this is what the glue code",
    "start": "999480",
    "end": "1005680"
  },
  {
    "text": "looks like locally um so it's basically what puts everything together uh it is",
    "start": "1005680",
    "end": "1012600"
  },
  {
    "text": "it is a make file that's what we use it just makes things easier it just runs a bunch of commands and what I would like",
    "start": "1012600",
    "end": "1018720"
  },
  {
    "text": "to point out is for example the new CI package so declar is new CI this is a",
    "start": "1018720",
    "end": "1024678"
  },
  {
    "text": "plan is that right is they called the plan or is it an environment it's an environment in the current version and",
    "start": "1024679",
    "end": "1030280"
  },
  {
    "text": "we're transitioning to the name plan or dag potentially right oh that's a good",
    "start": "1030280",
    "end": "1035678"
  },
  {
    "text": "one dag this dag this uh it asked me to enter my username this will be St",
    "start": "1035679",
    "end": "1041400"
  },
  {
    "text": "encrypted by the way because it's no this will be stored as text nothing secret it's Gard you already guessed it",
    "start": "1041400",
    "end": "1047880"
  },
  {
    "text": "and then it asks me for my duckhub password so that it can push the image uh these are stored encrypted uh using",
    "start": "1047880",
    "end": "1055120"
  },
  {
    "text": "Sops locally and then there's like a couple of things here we'll skip over them and then we provide the inputs",
    "start": "1055120",
    "end": "1061000"
  },
  {
    "text": "those inputs are important because that's what the environment or the plan or the dag as Joel mentioned calls it so",
    "start": "1061000",
    "end": "1068120"
  },
  {
    "text": "we have the app which is basically the whole source code there's a couple of things that we need from the environment like the gsha G author H I don't think I",
    "start": "1068120",
    "end": "1076120"
  },
  {
    "text": "fixed those I need to fix them okay okay this something which still needs to improve I just realized going through",
    "start": "1076120",
    "end": "1082120"
  },
  {
    "text": "this now see so good we're doing these things so helpful uh cool so then the",
    "start": "1082120",
    "end": "1087520"
  },
  {
    "text": "docker host which is the remote one it knows how to connect to it and then it runs the same command that you've seen",
    "start": "1087520",
    "end": "1092720"
  },
  {
    "text": "in GitHub actions Docker sorry Docker that's that's like fren slip dagger",
    "start": "1092720",
    "end": "1100559"
  },
  {
    "text": "dagger up log level debug environment CI and that's exactly the same thing the",
    "start": "1100559",
    "end": "1106760"
  },
  {
    "text": "other part of this is obviously the CI key and this is like all the code that's actually like declares the pipeline and",
    "start": "1106760",
    "end": "1113440"
  },
  {
    "text": "what is this CI doq how would you describe it it's uh it's basically the description of those various stages that",
    "start": "1113440",
    "end": "1120400"
  },
  {
    "text": "we're describing earlier um so there's the app image you had the test container",
    "start": "1120400",
    "end": "1126159"
  },
  {
    "text": "or the test DB container um definition prior to that and then um let's see this",
    "start": "1126159",
    "end": "1133080"
  },
  {
    "text": "is some of the so deps is basically kind of helping uh copy",
    "start": "1133080",
    "end": "1139280"
  },
  {
    "text": "the actual application which is you know all the Chang log.com source code Y into",
    "start": "1139280",
    "end": "1144360"
  },
  {
    "text": "a container M and then we have some just Q variables or Q fields in essence that",
    "start": "1144360",
    "end": "1150960"
  },
  {
    "text": "help us store some information about how we want to be mounting um these dependency caches and uh build caches",
    "start": "1150960",
    "end": "1158320"
  },
  {
    "text": "yep um we also do the same thing for node modules and then um this depths",
    "start": "1158320",
    "end": "1164280"
  },
  {
    "text": "compile hashtag deps compile is we're using that basic basically is a way to",
    "start": "1164280",
    "end": "1170400"
  },
  {
    "text": "describe a kind of structure that we're then going to apply in a few other places so you can see depths compiled",
    "start": "1170400",
    "end": "1177679"
  },
  {
    "text": "test actually uses that um definition and specializes it with args mix and",
    "start": "1177679",
    "end": "1184799"
  },
  {
    "text": "test and we do the same thing with uh with Dev and prod if I remember",
    "start": "1184799",
    "end": "1190840"
  },
  {
    "text": "correctly dev's compile Dev it's right down here so the only difference you're right the mix en is the same definition",
    "start": "1190840",
    "end": "1196320"
  },
  {
    "text": "of depths compile with like you you know something changed actually added right because it depends stuff to it okay and",
    "start": "1196320",
    "end": "1204039"
  },
  {
    "text": "and what is Q uh so uh Q is a configuration language it aims to be a",
    "start": "1204039",
    "end": "1211120"
  },
  {
    "text": "better just and a better yaml it stands for configure unify and execute Y and",
    "start": "1211120",
    "end": "1218880"
  },
  {
    "text": "basically I think Joel will be able to to continue after that yeah um so like",
    "start": "1218880",
    "end": "1225280"
  },
  {
    "text": "gum said it's a configuration language MH and and one of the things that I think is really lovely about Q is schema",
    "start": "1225280",
    "end": "1235000"
  },
  {
    "text": "definition data validation and um it basically allows",
    "start": "1235000",
    "end": "1240960"
  },
  {
    "text": "you to create configurations that have types MH so they can be type checked preferably",
    "start": "1240960",
    "end": "1247799"
  },
  {
    "text": "before you get to prod yeah um and that actually is true it's how it works um I",
    "start": "1247799",
    "end": "1254960"
  },
  {
    "text": "personally love that it is not Whit space dependent like EML is I've been",
    "start": "1254960",
    "end": "1260320"
  },
  {
    "text": "bit so many times by that with Helm and other various tools anable comes to mind",
    "start": "1260320",
    "end": "1265919"
  },
  {
    "text": "too um there's lovely things about those tools and I've found myself bitten by",
    "start": "1265919",
    "end": "1272880"
  },
  {
    "text": "that bug and a number of them that's why yo vaccine resonated with you right when I mention it like exactly what I meant",
    "start": "1272880",
    "end": "1279880"
  },
  {
    "text": "because he had the bug multiple times and damn it it's not fun yeah yeah yeah I've I've had production deploys fail",
    "start": "1279880",
    "end": "1287240"
  },
  {
    "text": "because an engineer added in environment variable and used tabs instead of spaces in a Helm chart I prefer not having",
    "start": "1287240",
    "end": "1293360"
  },
  {
    "text": "those sorts of those sorts of problems are avoidable and uh Q is a really powerful tool for",
    "start": "1293360",
    "end": "1300559"
  },
  {
    "text": "doing that um just to kind of dig into the schema definition stuff a little bit",
    "start": "1300559",
    "end": "1306600"
  },
  {
    "text": "deeper because I think it's useful to understand you could basically Define the shape of a particular configuration",
    "start": "1306600",
    "end": "1315159"
  },
  {
    "text": "um including constraints on different fields so if you want a good example of",
    "start": "1315159",
    "end": "1320919"
  },
  {
    "text": "this might be like a kubernetes deployment so you can have a kubernetes deployment um you know with your API",
    "start": "1320919",
    "end": "1327880"
  },
  {
    "text": "version and your kind deployment and then you can for instance say uh set the",
    "start": "1327880",
    "end": "1335880"
  },
  {
    "text": "CPU uh field and actually set a constraint on that you can set an upper bound and a lower bound Etc um and then",
    "start": "1335880",
    "end": "1344400"
  },
  {
    "text": "when any configuration from a developer or an SRE comes into that if it doesn't",
    "start": "1344400",
    "end": "1349559"
  },
  {
    "text": "match that specification then the compile of the queue will fail and so it'll allow you",
    "start": "1349559",
    "end": "1355760"
  },
  {
    "text": "to fail at a much earlier stage potentially even on a developer's local",
    "start": "1355760",
    "end": "1361000"
  },
  {
    "text": "machine rather than once it gets to production that's exactly what what we've been using we've developed a sever",
    "start": "1361000",
    "end": "1367640"
  },
  {
    "text": "lless package to easily deploy sever lless U functions on AWS and that's",
    "start": "1367640",
    "end": "1374600"
  },
  {
    "text": "basically what we used so it's kind of useful to sometimes you have like the",
    "start": "1374600",
    "end": "1380400"
  },
  {
    "text": "names they are forbidden characters and we just do it we we use these",
    "start": "1380400",
    "end": "1386520"
  },
  {
    "text": "validations to avoid to to fail early yeah okay so yeah there's a lot to",
    "start": "1386520",
    "end": "1393159"
  },
  {
    "text": "explore here um I really really like Q have to say there's like so many great things about it and it makes um like not",
    "start": "1393159",
    "end": "1400600"
  },
  {
    "text": "having the right inputs not having the right values it just just really helps like the compiler errors for Q really",
    "start": "1400600",
    "end": "1408240"
  },
  {
    "text": "good and they steer you like in in the right direction and with Vim there's like a",
    "start": "1408240",
    "end": "1413320"
  },
  {
    "text": "good plugin which kind of works uh I can share it in the show notes but um it's good I mean it's it's much better than",
    "start": "1413320",
    "end": "1419919"
  },
  {
    "text": "not having it um I'm sure that that can improve as well there's some Rumblings in the Q Community around creating a a",
    "start": "1419919",
    "end": "1426559"
  },
  {
    "text": "language server as well oo wow LSP I would love that I would love that okay",
    "start": "1426559",
    "end": "1432960"
  },
  {
    "text": "okay right so yeah I'll definitely want to watch for sure so what comes next",
    "start": "1432960",
    "end": "1439480"
  },
  {
    "text": "I think one thing that occurs to me is at least as far as I remember this is",
    "start": "1439480",
    "end": "1445240"
  },
  {
    "text": "currently still using uh the the docker build so you're actually pushing out you're pushing out",
    "start": "1445240",
    "end": "1452600"
  },
  {
    "text": "the the contents of a bunch of those steps to the docker per engine to",
    "start": "1452600",
    "end": "1458760"
  },
  {
    "text": "actually then build the image and um with Europa and some of the improvements",
    "start": "1458760",
    "end": "1464240"
  },
  {
    "text": "there that should not be necessary you should be able to just take the the output of one of these stages and just",
    "start": "1464240",
    "end": "1471520"
  },
  {
    "text": "add the information that you want on top of it and be Off to the Races and then be able to push that directly because",
    "start": "1471520",
    "end": "1477440"
  },
  {
    "text": "right now what's happening is a bunch of the context is still having to be pushed from within buildkit to Docker engine um",
    "start": "1477440",
    "end": "1485320"
  },
  {
    "text": "so that it can build the image and uh that that will not be necessary um",
    "start": "1485320",
    "end": "1490840"
  },
  {
    "text": "interesting with some of the new Europa stuff okay sounds great uh anything to",
    "start": "1490840",
    "end": "1497120"
  },
  {
    "text": "add G to that or or something else yeah I think that with Europa um as Joel",
    "start": "1497120",
    "end": "1503840"
  },
  {
    "text": "mentioned earlier the DX will be far better like what we're trying to do at the moment if the people watch the pr",
    "start": "1503840",
    "end": "1512080"
  },
  {
    "text": "with a Europa it's going to be normal yeah I think I think yeah I think that makes a lot of sense Europa",
    "start": "1512080",
    "end": "1518480"
  },
  {
    "text": "will make this a lot simpler and while we had like to jump through a couple of Hoops uh it just made it obvious they",
    "start": "1518480",
    "end": "1524080"
  },
  {
    "text": "shouldn't be there and so I'm really excited to adapt this to that new way that would be great and to see what",
    "start": "1524080",
    "end": "1529880"
  },
  {
    "text": "improvements we can get because at the end of the day that's what you care about right this looks not as good as it could I mean it works right and that's",
    "start": "1529880",
    "end": "1536640"
  },
  {
    "text": "what you care about make it work uh make it right I think that's what's happening now we're making it right and then we're making it fast so I'm very excited about",
    "start": "1536640",
    "end": "1543960"
  },
  {
    "text": "that um okay well I'm going to wish you both a Merry Christmas Even though this is like weeks before Christmas but by",
    "start": "1543960",
    "end": "1550440"
  },
  {
    "text": "the time uh listeners will be listening to this it'll be Christmas and uh Happy New Year 7 you Gard thanks it's been a",
    "start": "1550440",
    "end": "1557120"
  },
  {
    "text": "lot of fun to work with you and guom on this um it's been a nice opportunity to get to know you and get to know Gom as",
    "start": "1557120",
    "end": "1563320"
  },
  {
    "text": "well uh like you mentioned I live in kind of the boulder Denver area and Gom lives in France and uh it was a good",
    "start": "1563320",
    "end": "1571760"
  },
  {
    "text": "opportunity to bump into each other more regularly definitely right back at you again um same for me so I'm glad that",
    "start": "1571760",
    "end": "1578520"
  },
  {
    "text": "this worked the way he did I also had a lot of fun thank you very much thank you yeah thank",
    "start": "1578520",
    "end": "1585039"
  },
  {
    "text": "you our second present to you this Christmas",
    "start": "1587240",
    "end": "1592360"
  },
  {
    "text": "is sharing my way of understanding CPU time used by kubernetes workloads think",
    "start": "1592360",
    "end": "1598000"
  },
  {
    "text": "near realtime flame graphs as well as being able to compare CPU profiles for the same process at different points in",
    "start": "1598000",
    "end": "1605080"
  },
  {
    "text": "time if you're familiar with Brendan Greg's book systems performance this goes really well with it so why is this",
    "start": "1605080",
    "end": "1612480"
  },
  {
    "text": "a big deal and why was it more difficult to do this in the past I know just the",
    "start": "1612480",
    "end": "1617880"
  },
  {
    "text": "right person person to unwrap this present with let me talk a little bit about why that's interesting why that's",
    "start": "1617880",
    "end": "1623960"
  },
  {
    "text": "useful um so profiling has kind of been in the developer toolbox ever since uh",
    "start": "1623960",
    "end": "1630360"
  },
  {
    "text": "software engineering has existed because we always needed to know like why is my program executing and how is it",
    "start": "1630360",
    "end": "1636399"
  },
  {
    "text": "executing the way it is um and so profiling has been around for a very long time it's essentially us recording",
    "start": "1636399",
    "end": "1644679"
  },
  {
    "text": "what the program is doing um and you can literally think think of it as um we're",
    "start": "1644679",
    "end": "1651399"
  },
  {
    "text": "recording the stack traces that are happening you know 100 times per per",
    "start": "1651399",
    "end": "1656480"
  },
  {
    "text": "second and um that um has kind of evolved over the years um and profiling",
    "start": "1656480",
    "end": "1663360"
  },
  {
    "text": "used to be a very um expensive operation uh to do which is why you only did it",
    "start": "1663360",
    "end": "1669120"
  },
  {
    "text": "when you really needed to um and so uh one thing that kind of um changed the",
    "start": "1669120",
    "end": "1677000"
  },
  {
    "text": "perspective was when we discovered sampling profiling so in the olden days",
    "start": "1677000",
    "end": "1682080"
  },
  {
    "text": "the way that profiling worked is that we literally recorded everything that was happening in our program and naturally",
    "start": "1682080",
    "end": "1688159"
  },
  {
    "text": "that's really expensive and sampling profiles profiling um kind of Go a",
    "start": "1688159",
    "end": "1693480"
  },
  {
    "text": "different strategy and say actually we only need something that's statistically",
    "start": "1693480",
    "end": "1698600"
  },
  {
    "text": "significant and so instead of recording everything that's happening as I said earlier we only look at the stack traces",
    "start": "1698600",
    "end": "1705840"
  },
  {
    "text": "100 times per second and that we can do in incredibly efficiently the reason why this is super useful and why being able",
    "start": "1705840",
    "end": "1712880"
  },
  {
    "text": "to record stack traces with statistical significance is useful is that now we can say this is where my uh program is",
    "start": "1712880",
    "end": "1720600"
  },
  {
    "text": "spending time and so that can be used to save money on your infrastructure um but",
    "start": "1720600",
    "end": "1727240"
  },
  {
    "text": "also you know there are a lot of um optimizations that you can only do if",
    "start": "1727240",
    "end": "1732320"
  },
  {
    "text": "you have that type of depth of data to analyze so you can actually down to the",
    "start": "1732320",
    "end": "1738320"
  },
  {
    "text": "number tell what is using your CPU resources one really cool conversation",
    "start": "1738320",
    "end": "1743559"
  },
  {
    "text": "that I had yesterday um this perfectly translates in the serverless world right",
    "start": "1743559",
    "end": "1748760"
  },
  {
    "text": "where you actually pay for basically every single CPU cycle that um your",
    "start": "1748760",
    "end": "1754640"
  },
  {
    "text": "serverless function is running and if and any CPU second that you can cut off from that is money you're saving um from",
    "start": "1754640",
    "end": "1761600"
  },
  {
    "text": "your serverless bill and so I think that's the a really obvious like value",
    "start": "1761600",
    "end": "1767519"
  },
  {
    "text": "proposition because we're we have simply have this data and are recording it always we can actually reliably tell",
    "start": "1767519",
    "end": "1776080"
  },
  {
    "text": "where we can optimize our code so out of these three things saving money very",
    "start": "1776080",
    "end": "1781399"
  },
  {
    "text": "important for some improving performance I love that like shipping code fast",
    "start": "1781399",
    "end": "1787480"
  },
  {
    "text": "great making it better and improving it I love that and when things go wrong",
    "start": "1787480",
    "end": "1793159"
  },
  {
    "text": "understanding what exactly went wrong what CPU what dis what Network where is",
    "start": "1793159",
    "end": "1799320"
  },
  {
    "text": "the bottom leg from a system perspective as well as obviously from like if you have microservices between microservices",
    "start": "1799320",
    "end": "1806080"
  },
  {
    "text": "so parka helps us understand from a CPU perspective where is the time spent",
    "start": "1806080",
    "end": "1811679"
  },
  {
    "text": "right in the current implementation the current version that's what it tells us really really well so how about we try",
    "start": "1811679",
    "end": "1816799"
  },
  {
    "text": "it out we're going to run it in our production kubernetes setup just like that why not create namespace apply the",
    "start": "1816799",
    "end": "1824720"
  },
  {
    "text": "server and apply the agent and as I do this in the background what is the difference Frederick between the server",
    "start": "1824720",
    "end": "1830159"
  },
  {
    "text": "and the agent the server is essentially the component that allows you to store",
    "start": "1830159",
    "end": "1835399"
  },
  {
    "text": "in query profiling data while the agent um the one and only purpose of the agent",
    "start": "1835399",
    "end": "1842559"
  },
  {
    "text": "is to capture this data from your applications at super low overhead and",
    "start": "1842559",
    "end": "1848279"
  },
  {
    "text": "one of the really exciting technologies that we're using here is ebpf um so because we know exactly what",
    "start": "1848279",
    "end": "1857120"
  },
  {
    "text": "the format is that we're going to want this type of data in we can in kernel",
    "start": "1857120",
    "end": "1862279"
  },
  {
    "text": "you know without having to spend all of this overhead of uh doing contact switches from kernel space to user space",
    "start": "1862279",
    "end": "1868760"
  },
  {
    "text": "we can immediately record um the stack traces um in kernel and present it to",
    "start": "1868760",
    "end": "1875559"
  },
  {
    "text": "parka agent and then Parker agent it does some resorting in the in the data but essentially it just sends that off",
    "start": "1875559",
    "end": "1882639"
  },
  {
    "text": "to to parka and then from parka you can actually visualize it okay so we have the server and the agent so let's port",
    "start": "1882639",
    "end": "1890639"
  },
  {
    "text": "forward to the server to the UI and in our browser Local Host 7070",
    "start": "1890639",
    "end": "1897519"
  },
  {
    "text": "let's see what it looks like one thing that I think uh is really important to mention everything revolves around the",
    "start": "1897519",
    "end": "1903000"
  },
  {
    "text": "prpr standard this is kind of a an industry standard format for profiling data um and so everything produces or",
    "start": "1903000",
    "end": "1912120"
  },
  {
    "text": "works with Pro uh PR format so you could send um any kind of profile",
    "start": "1912120",
    "end": "1918639"
  },
  {
    "text": "like memory profiles that have been captured through some other mechanism to Parker and analyze that as well it's",
    "start": "1918639",
    "end": "1925880"
  },
  {
    "text": "just that the agent today can only produce um CPU profiles and continuously",
    "start": "1925880",
    "end": "1931240"
  },
  {
    "text": "send those the agent actually also produces prpr compatible profiles and",
    "start": "1931240",
    "end": "1936960"
  },
  {
    "text": "maybe we can have a look at that later the server ingests those and then one",
    "start": "1936960",
    "end": "1942480"
  },
  {
    "text": "additional really cool feature I think is any query that you do in the Parker front end you can download again in PR",
    "start": "1942480",
    "end": "1949639"
  },
  {
    "text": "format and then you know if you have any other sort of tooling around the prpr format you can still use them and",
    "start": "1949639",
    "end": "1955720"
  },
  {
    "text": "compose your workflows okay we are on the server looking at all the CPU",
    "start": "1955720",
    "end": "1961320"
  },
  {
    "text": "profiles this is the profile coming from container parka how do we read this this",
    "start": "1961320",
    "end": "1967080"
  },
  {
    "text": "a CPU sample we can see the root that's the root span what about all the other",
    "start": "1967080",
    "end": "1972519"
  },
  {
    "text": "spans what are these this is what's called a flame graph and every span that",
    "start": "1972519",
    "end": "1977919"
  },
  {
    "text": "we're seeing here uh represents how much this span as well as all of its children",
    "start": "1977919",
    "end": "1984600"
  },
  {
    "text": "make up in cumulative so that that's actually what the front end also says right the cumulative value um and",
    "start": "1984600",
    "end": "1991000"
  },
  {
    "text": "essentially we're saying everything from this point onwards and further down uses up in this case you're hovering over one",
    "start": "1991000",
    "end": "1997080"
  },
  {
    "text": "that says 11% so for example we can see here in the in the middle we can see runtime. gray object for example if we",
    "start": "1997080",
    "end": "2004679"
  },
  {
    "text": "were able to optimize that gray object function for example and say for whatever reason we're able to optimize",
    "start": "2004679",
    "end": "2011760"
  },
  {
    "text": "100% of it away we would actually be saving 15% of our CPU resources here and",
    "start": "2011760",
    "end": "2018039"
  },
  {
    "text": "in this case you actually clicked a particularly interesting sample because we can see in our metrics above that we",
    "start": "2018039",
    "end": "2025360"
  },
  {
    "text": "have these spikes every now and then and we can very clearly see what what it is uh that is causing the spike in this in",
    "start": "2025360",
    "end": "2032279"
  },
  {
    "text": "this profile we can see that it's a garbage collection right a very classic thing uh that can use a lot of CPU",
    "start": "2032279",
    "end": "2039720"
  },
  {
    "text": "resources so this is garbage collection that happens in par server okay so why",
    "start": "2039720",
    "end": "2045120"
  },
  {
    "text": "does this garbage collection happen because of how go works you allocate",
    "start": "2045120",
    "end": "2050320"
  },
  {
    "text": "objects um on in memory and when you don't use them anymore eventually the",
    "start": "2050320",
    "end": "2055720"
  },
  {
    "text": "runtime will come around and see that this piece of memory is not in use anymore um and kind of free that memory",
    "start": "2055720",
    "end": "2063240"
  },
  {
    "text": "to the operating system so that anybody on the machine can use it and in this case is essentially what what we're",
    "start": "2063240",
    "end": "2069398"
  },
  {
    "text": "seeing because we're we have such a huge Spike that's telling us Parker is doing",
    "start": "2069399",
    "end": "2074520"
  },
  {
    "text": "a lot of allocations it's allocating a lot of memory um that then consequently",
    "start": "2074520",
    "end": "2080280"
  },
  {
    "text": "is uh kind of thrown away and can be garbage collected so it seems like there's probably some potential in",
    "start": "2080280",
    "end": "2086599"
  },
  {
    "text": "optimizing allocations here that said having allocations is not a bad thing because at the end of the day I can",
    "start": "2086599",
    "end": "2093000"
  },
  {
    "text": "write a program that does absolutely nothing and does no allocations right but that's also not useful producing",
    "start": "2093000",
    "end": "2099079"
  },
  {
    "text": "side effect is one one of those things that as software Engineers we we try to not produce side effect but it as it",
    "start": "2099079",
    "end": "2104720"
  },
  {
    "text": "turns out side effect tends to be the thing that's actually useful in the real world that's when real work happens",
    "start": "2104720",
    "end": "2110079"
  },
  {
    "text": "right like these spikes are an artifact of real work happening and if I had to",
    "start": "2110079",
    "end": "2115599"
  },
  {
    "text": "guess without knowing too much knowing what Parker does behind the scenes but not knowing all the details I think that",
    "start": "2115599",
    "end": "2121440"
  },
  {
    "text": "this is related to all those uh profiles being maybe red being symbolized or",
    "start": "2121440",
    "end": "2127880"
  },
  {
    "text": "something happens in the background so like reads a profile builds whatever data structures need it needs to build",
    "start": "2127880",
    "end": "2134359"
  },
  {
    "text": "to get an output and when that output is like that result right is achieved then",
    "start": "2134359",
    "end": "2139680"
  },
  {
    "text": "all intermediary objects can be garbage collected and I think that's what's Happening Here the two major things are",
    "start": "2139680",
    "end": "2145000"
  },
  {
    "text": "definitely what you already mentioned uh symbolization because this happens asynchronously as you have uploaded your",
    "start": "2145000",
    "end": "2150920"
  },
  {
    "text": "your profiling data and then it's actually ingesting and writing the that profiling data to its storage this is",
    "start": "2150920",
    "end": "2157160"
  },
  {
    "text": "something that because we're doing continuous profiling it happens continuously right and every Network",
    "start": "2157160",
    "end": "2162599"
  },
  {
    "text": "request that we receive causes memory allocations because we read that from",
    "start": "2162599",
    "end": "2168040"
  },
  {
    "text": "the network stack right and that causes memory locations now there are a number of optimizations that can be done to",
    "start": "2168040",
    "end": "2175359"
  },
  {
    "text": "reduce this and you know you can reuse buffers and stuff like that and we'll get to all of that but it's it's",
    "start": "2175359",
    "end": "2181119"
  },
  {
    "text": "unlikely that we'll ever get to you know zero but there's definitely lots of optimization potential here okay I do",
    "start": "2181119",
    "end": "2188040"
  },
  {
    "text": "have to say looking at this flame graph it's really amazing like if you remember",
    "start": "2188040",
    "end": "2193160"
  },
  {
    "text": "how difficult this used to be in the past where we had to generate a PPR and",
    "start": "2193160",
    "end": "2198880"
  },
  {
    "text": "then use that PPR or something similar that can read that profile to get this flame graph and then try and like slice",
    "start": "2198880",
    "end": "2206040"
  },
  {
    "text": "and dice now if I don't want this flame graph I want a different one I just click on it and there you go database",
    "start": "2206040",
    "end": "2213400"
  },
  {
    "text": "postgress let's see what do we get from postgress okay so this is slightly a",
    "start": "2213400",
    "end": "2218680"
  },
  {
    "text": "different view this is is this a this is a machine compiled binary right right so",
    "start": "2218680",
    "end": "2224440"
  },
  {
    "text": "why do we see only these numbers what are those numbers first of all yeah that's a really good question so um",
    "start": "2224440",
    "end": "2231079"
  },
  {
    "text": "these are the raw memory addresses that we um obtained from the agent and the",
    "start": "2231079",
    "end": "2236480"
  },
  {
    "text": "reason why we're only seeing memory addresses is because um most of the time",
    "start": "2236480",
    "end": "2241880"
  },
  {
    "text": "when you you know install a package from let's say a Debian package or something",
    "start": "2241880",
    "end": "2247920"
  },
  {
    "text": "like that by default these packages are distributed without debug information um",
    "start": "2247920",
    "end": "2254480"
  },
  {
    "text": "and so so they were intentionally removed from those binaries to reduce the size of the binary MH and uh",
    "start": "2254480",
    "end": "2262520"
  },
  {
    "text": "sometimes it can also have a performance impact but usually it's just for size um",
    "start": "2262520",
    "end": "2267720"
  },
  {
    "text": "optimization and in in the case of Debian for example if you still want those debar symbols the convention is",
    "start": "2267720",
    "end": "2274839"
  },
  {
    "text": "that you you know let's say app get postgress right the convention then is",
    "start": "2274839",
    "end": "2280839"
  },
  {
    "text": "the um package name is Dash dbg SYM debug symbols um and that downloads the",
    "start": "2280839",
    "end": "2289040"
  },
  {
    "text": "debug symbols as a separate package um which can then again be uh picked up by",
    "start": "2289040",
    "end": "2295000"
  },
  {
    "text": "the Parker agent as well but in this case we didn't have any uh debug information available and so yeah this",
    "start": "2295000",
    "end": "2302720"
  },
  {
    "text": "this particular post binary is stripped and so it does not have this debug information",
    "start": "2302720",
    "end": "2308040"
  },
  {
    "text": "that said there's a really cool project called debug info um where the kind of",
    "start": "2308040",
    "end": "2313599"
  },
  {
    "text": "distributions have come together and they're hosting these servers where using this build ID um you can request",
    "start": "2313599",
    "end": "2321400"
  },
  {
    "text": "the debug symbols on demand so this is great news right because it means that",
    "start": "2321400",
    "end": "2327040"
  },
  {
    "text": "you don't have to install these debug packages manually anymore Parker can",
    "start": "2327040",
    "end": "2332560"
  },
  {
    "text": "just go to this debug info server and retrieve it itself that's the good good",
    "start": "2332560",
    "end": "2337599"
  },
  {
    "text": "news the bad news is Parker doesn't have support for this just yet we we already have um support for this planed it's",
    "start": "2337599",
    "end": "2344079"
  },
  {
    "text": "just haven't gotten to it yet so there's a good news in that bad news and that that that yet is the good news in that",
    "start": "2344079",
    "end": "2350119"
  },
  {
    "text": "bad news it's coming but it's not there yet so exactly that's really cool yeah I didn't I didn't know this like I knew",
    "start": "2350119",
    "end": "2356079"
  },
  {
    "text": "about strip boundaries but I didn't know about those build IDs and being able to use those build IDs to get the debug",
    "start": "2356079",
    "end": "2362040"
  },
  {
    "text": "symbol for this particular binary from the C that's really cool Okay so we've seen post Grace what about erlang VM so",
    "start": "2362040",
    "end": "2369440"
  },
  {
    "text": "this is our app and we can see that we have bmmp all over the place which is the name of the binary for the beam",
    "start": "2369440",
    "end": "2376720"
  },
  {
    "text": "orlang VM so we see the same thing here yeah so this is kind of another",
    "start": "2376720",
    "end": "2382960"
  },
  {
    "text": "variation um of this but um the the first the first kind of difference is",
    "start": "2382960",
    "end": "2389000"
  },
  {
    "text": "this is not a binary that was compiled to machine readable code right uh this",
    "start": "2389000",
    "end": "2395079"
  },
  {
    "text": "is in in the broadest possible sense interpreted code the the good news about",
    "start": "2395079",
    "end": "2400680"
  },
  {
    "text": "erlang is um it actually has a just in time compiler uh so what that means is",
    "start": "2400680",
    "end": "2407319"
  },
  {
    "text": "even though it is technically an interpreted or a virtual machine on the Fly compiled parts of your code to",
    "start": "2407319",
    "end": "2415440"
  },
  {
    "text": "actually machine executable code so this is kind of good news again because at least in theory the same strategy can be",
    "start": "2415440",
    "end": "2422839"
  },
  {
    "text": "applied it just turns out that a lot of the strategies that these like Dynamic",
    "start": "2422839",
    "end": "2428440"
  },
  {
    "text": "languages or virtual machines tend to very subtly differ and so we do have to",
    "start": "2428440",
    "end": "2434440"
  },
  {
    "text": "essentially Implement you know small small pieces of runtime specific things",
    "start": "2434440",
    "end": "2440160"
  },
  {
    "text": "one thing that's uh actually really cool that uh I think earling does implement and you know like uh the node.js uh",
    "start": "2440160",
    "end": "2447920"
  },
  {
    "text": "runtime implements as well um is something called perf maps and um this is something that many uh just and time",
    "start": "2447920",
    "end": "2455400"
  },
  {
    "text": "compilers implement where you C where essentially the just some time compiler",
    "start": "2455400",
    "end": "2460520"
  },
  {
    "text": "because it generates or compiles this code on the fly it can also write out",
    "start": "2460520",
    "end": "2467319"
  },
  {
    "text": "this mapping from the memory address to the human readable symbol um and that",
    "start": "2467319",
    "end": "2474440"
  },
  {
    "text": "Parker agent can again uh pick up and uh symbolize on the fly now um I have tried",
    "start": "2474440",
    "end": "2480200"
  },
  {
    "text": "this with uh nodejs unfortunately we haven't gotten it to work with airling just yet um so okay there there seems to",
    "start": "2480200",
    "end": "2488920"
  },
  {
    "text": "be something specific that the earling VM does that we don't fully understand",
    "start": "2488920",
    "end": "2494319"
  },
  {
    "text": "yet um but you know uh it's it's one of those things where language support is",
    "start": "2494319",
    "end": "2499720"
  },
  {
    "text": "something that's always uh in progress and hopefully we'll soon have like full",
    "start": "2499720",
    "end": "2504920"
  },
  {
    "text": "support for the earling BM as well nice so we can't really see that but there's another thing which I haven't shown the",
    "start": "2504920",
    "end": "2511079"
  },
  {
    "text": "compare one the compare view so we can compare to profile side by side so we take a low one I think that's how you",
    "start": "2511079",
    "end": "2517359"
  },
  {
    "text": "like to start you take a low profile on the on the left and you take a high on the right and it will compare them side",
    "start": "2517359",
    "end": "2522839"
  },
  {
    "text": "by side so how do we interpret when this loads how do we interpret this result",
    "start": "2522839",
    "end": "2528680"
  },
  {
    "text": "yeah so this is going to be hard when we just see memory addresses but um essentially um anything that is blue yes",
    "start": "2528680",
    "end": "2537079"
  },
  {
    "text": "um has stayed exactly the same it used exactly the same amount of CPU in the one observation as it did in the in the",
    "start": "2537079",
    "end": "2544359"
  },
  {
    "text": "compared one anything that's green the um CPU Cycles uh got less I can actually",
    "start": "2544359",
    "end": "2550640"
  },
  {
    "text": "see one very tiny one on the on the left um somewhere in there there's there's",
    "start": "2550640",
    "end": "2555839"
  },
  {
    "text": "one that uh got very slightly better 50 50% it it see seems like it was two CPU",
    "start": "2555839",
    "end": "2563160"
  },
  {
    "text": "samples before and now it was only one how do you know it was two CP",
    "start": "2563160",
    "end": "2569599"
  },
  {
    "text": "samples so um we see that the diff is um minus one right um and the and the Curve",
    "start": "2569599",
    "end": "2577280"
  },
  {
    "text": "Curr um sample is one so it must have been two before so that's CPU Cycles um",
    "start": "2577280",
    "end": "2583839"
  },
  {
    "text": "it's observations of Stack traces so we at most look at a process 100 times per",
    "start": "2583839",
    "end": "2590680"
  },
  {
    "text": "second um and so that means 100 means one CPU core being used so in this case",
    "start": "2590680",
    "end": "2599440"
  },
  {
    "text": "this is like 1% like one M cor right okay um that was that was being used",
    "start": "2599440",
    "end": "2605280"
  },
  {
    "text": "within those 10 seconds okay so this one is slightly better but this",
    "start": "2605280",
    "end": "2611559"
  },
  {
    "text": "one the beam SMP and I wish we knew what this was or maybe this one which is like",
    "start": "2611559",
    "end": "2617680"
  },
  {
    "text": "just a memory address this is 350% worse so I can see or I can think I",
    "start": "2617680",
    "end": "2625200"
  },
  {
    "text": "mean even though this is very christmy and I like it like red and green and you know it's very nice it would be easier",
    "start": "2625200",
    "end": "2631720"
  },
  {
    "text": "like if we had use a different color for the ones which have an Infinity I know maybe black or something like that which",
    "start": "2631720",
    "end": "2637800"
  },
  {
    "text": "they're like completely new I like the diff idea but um a different number oh",
    "start": "2637800",
    "end": "2643319"
  },
  {
    "text": "sorry different color from the ones that are like for example this one plus 700 so this is just worse but this is like",
    "start": "2643319",
    "end": "2650119"
  },
  {
    "text": "brand new this wasn't even like didn't even happen in a previous sample yeah",
    "start": "2650119",
    "end": "2655920"
  },
  {
    "text": "okay I'm writing writing this down cool so this is great to be able to see the",
    "start": "2655920",
    "end": "2663720"
  },
  {
    "text": "difference and I suppose I'm just wondering if we were to take this memory address and if you were to look into",
    "start": "2663720",
    "end": "2670240"
  },
  {
    "text": "that file into that um um perf map file would we be able to figure out what this",
    "start": "2670240",
    "end": "2677200"
  },
  {
    "text": "is it it's it's possible the the problem is in this case um so we we can look at",
    "start": "2677200",
    "end": "2684079"
  },
  {
    "text": "the process and we can kind of go through the steps of what the Parker agent would do manually um and then we",
    "start": "2684079",
    "end": "2690480"
  },
  {
    "text": "can we can try to see if we can figure out why this is not able to symbolize",
    "start": "2690480",
    "end": "2695720"
  },
  {
    "text": "this my theory is because of of what we can see here M the way that um this",
    "start": "2695720",
    "end": "2701119"
  },
  {
    "text": "binary code was memory maap we weren't actually able to understand where it",
    "start": "2701119",
    "end": "2706559"
  },
  {
    "text": "it's mapped so the way that this works um is let's go back to our um terminal I",
    "start": "2706559",
    "end": "2713079"
  },
  {
    "text": "would say and we can inspect this actually um the way that binary code is",
    "start": "2713079",
    "end": "2719520"
  },
  {
    "text": "memory mapped in um for the process okay so we can we can again look into our",
    "start": "2719520",
    "end": "2725160"
  },
  {
    "text": "procfs this is where all the magic happens in Linux okay so do we want to go like on the host um we can do we can",
    "start": "2725160",
    "end": "2731839"
  },
  {
    "text": "do the host or the container yeah it shouldn't matter both should work okay so yeah let's go on the host so we want",
    "start": "2731839",
    "end": "2737640"
  },
  {
    "text": "to go on that let's see do we still have the uh CD there you go that's the proc",
    "start": "2737640",
    "end": "2744440"
  },
  {
    "text": "yes you're right and here there's a file called",
    "start": "2744440",
    "end": "2749640"
  },
  {
    "text": "Maps yes yeah so let's have a look at what what it says in",
    "start": "2750400",
    "end": "2755920"
  },
  {
    "text": "there mhm and the way that symbolization effectively works is that we take that",
    "start": "2755920",
    "end": "2762599"
  },
  {
    "text": "memory address that we saw yes and we try to find in which range um within",
    "start": "2762599",
    "end": "2769200"
  },
  {
    "text": "this pile that memory address is from so this one right here okay so that's the memory address so do you need to do 7 FF",
    "start": "2769200",
    "end": "2776960"
  },
  {
    "text": "I mean I can see something here 7 FF well if you're able to search within",
    "start": "2776960",
    "end": "2782240"
  },
  {
    "text": "your terminal um maybe we can you know it's a bit of of a hack but we can",
    "start": "2782240",
    "end": "2787920"
  },
  {
    "text": "search for uh for the address that you have um copied and we can just try to",
    "start": "2787920",
    "end": "2794640"
  },
  {
    "text": "remove um certain digits um until we maybe get a get a match okay so let's",
    "start": "2794640",
    "end": "2801640"
  },
  {
    "text": "remove those to and as we can see um the ranges don't have the ZX um prefix here",
    "start": "2801640",
    "end": "2807200"
  },
  {
    "text": "so we're going to need to remove that okay so yeah this is a this is an interesting one and this is exactly why",
    "start": "2807200",
    "end": "2813880"
  },
  {
    "text": "uh this is not working so the way that this table works is that we have these ranges and then it tells us on the on",
    "start": "2813880",
    "end": "2821079"
  },
  {
    "text": "the very right this is the binary uh that this executable code came from and",
    "start": "2821079",
    "end": "2828720"
  },
  {
    "text": "so actually the stack I want to say this could be a I I don't know if it's",
    "start": "2828720",
    "end": "2836040"
  },
  {
    "text": "necessarily a bug but what can happen um in in some languages and it go this can",
    "start": "2836040",
    "end": "2841319"
  },
  {
    "text": "happen as well um sometimes when we do the stack like like the stack race",
    "start": "2841319",
    "end": "2847319"
  },
  {
    "text": "snapshots when we retrieve them from evf sometimes um the kernel does them a bit",
    "start": "2847319",
    "end": "2853800"
  },
  {
    "text": "too tall and we don't fully understand why like basically it what it does is it",
    "start": "2853800",
    "end": "2860520"
  },
  {
    "text": "goes back and walks the stack and sometimes it walks too far um and in",
    "start": "2860520",
    "end": "2865720"
  },
  {
    "text": "this case it doesn't actually make sense that the stack contains executable code",
    "start": "2865720",
    "end": "2871440"
  },
  {
    "text": "that shouldn't that that shouldn't be how things work yeah um so it could be that this is just an artifa effect of",
    "start": "2871440",
    "end": "2877440"
  },
  {
    "text": "that um but because it's also a a virtual machine maybe there's something",
    "start": "2877440",
    "end": "2883960"
  },
  {
    "text": "happening that we don't understand and we are actually executing code that is on the stack it seems it seems unlikely",
    "start": "2883960",
    "end": "2891839"
  },
  {
    "text": "but you know it's one of those things where I I'm not an expert on the llang VM so I don't know for sure yeah but",
    "start": "2891839",
    "end": "2899000"
  },
  {
    "text": "like my intuition says that this shouldn't be possible just from like the",
    "start": "2899000",
    "end": "2904319"
  },
  {
    "text": "way that processes work right right okay so this is like the earling runtime",
    "start": "2904319",
    "end": "2910240"
  },
  {
    "text": "itself right how it executes code on the Kernel that's what we would need to know",
    "start": "2910240",
    "end": "2915280"
  },
  {
    "text": "so I think that we have a person that we can ask which is Lucas Larson so that is",
    "start": "2915280",
    "end": "2922240"
  },
  {
    "text": "uh even though um um he's very busy I know and he's uh focused like deep down",
    "start": "2922240",
    "end": "2928359"
  },
  {
    "text": "on like some very uh gnarly Pro problems in the world of erlang uh we can you",
    "start": "2928359",
    "end": "2933640"
  },
  {
    "text": "know ask him and if you're interested to follow what happen S I mean this is like pull request 396 is what started this I",
    "start": "2933640",
    "end": "2941000"
  },
  {
    "text": "intend to keep right as many details as I can here and all the follow-ups so",
    "start": "2941000",
    "end": "2947480"
  },
  {
    "text": "yeah this is a place to go I suppose to see what else has happened since this was recorded So what I'd like to say is",
    "start": "2947480",
    "end": "2956400"
  },
  {
    "text": "thank you very much Frederick for running us through parka um I can see so much potential here I really really like",
    "start": "2956400",
    "end": "2963839"
  },
  {
    "text": "like where this is going and how simple it makes certain things things and it makes me excited as to what's coming",
    "start": "2963839",
    "end": "2970280"
  },
  {
    "text": "next year but this was great thank you [Music]",
    "start": "2970280",
    "end": "2978989"
  },
  {
    "text": "Frederick what we want to do is first of all fix this R damn it someone can't",
    "start": "2983599",
    "end": "2990559"
  },
  {
    "text": "type infrastructure as if my life depended on it right so we want in 2022 for the",
    "start": "2990559",
    "end": "3001839"
  },
  {
    "text": "change.com setup to use crossplane to provision our lenoe kubernetes cluster",
    "start": "3001839",
    "end": "3010280"
  },
  {
    "text": "that's the goal and the way we're thinking of achieving it is to follow this guide to generate a linode",
    "start": "3010280",
    "end": "3017559"
  },
  {
    "text": "crossplane provider using the ter jet tool which is part of the crossplane",
    "start": "3017559",
    "end": "3023640"
  },
  {
    "text": "ecosystem and we can generate any crossplane Prov from any terraform provider cool so how are we going to do",
    "start": "3023640",
    "end": "3029880"
  },
  {
    "text": "that yeah I think uh well you know there there's a couple different parts here um",
    "start": "3029880",
    "end": "3035599"
  },
  {
    "text": "in order to be able to test out anything that we generate um we're we're going to need uh a cross plane control plane uh",
    "start": "3035599",
    "end": "3042400"
  },
  {
    "text": "running somewhere um that being said right we need to uh generate and package",
    "start": "3042400",
    "end": "3048280"
  },
  {
    "text": "up uh this provider to be able to install it uh in crossplane uh and go through our package manager there but it",
    "start": "3048280",
    "end": "3055760"
  },
  {
    "text": "could be as simple as even just having a local kind cluster to start out and you know after generating using G run to",
    "start": "3055760",
    "end": "3063319"
  },
  {
    "text": "just apply some crds and see if it picks them up correctly that is a good idea I like it but I have found issues when I",
    "start": "3063319",
    "end": "3071040"
  },
  {
    "text": "went from kind to something else mhm gke LK any like real cluster because they",
    "start": "3071040",
    "end": "3077040"
  },
  {
    "text": "have there's different things like arbac for example or different security policies or who knows what so I like",
    "start": "3077040",
    "end": "3084640"
  },
  {
    "text": "starting with like production which is a bit weird because you would think like you start from development but I like",
    "start": "3084640",
    "end": "3089920"
  },
  {
    "text": "starting with production what I'm thinking is I want to start with crossplane installed in the production",
    "start": "3089920",
    "end": "3097359"
  },
  {
    "text": "setup okay and I can't remember this was episode 16 or 17 where I was saying that",
    "start": "3097359",
    "end": "3103359"
  },
  {
    "text": "if there was a crossplane 15 there we go Gart has an idea for the change lck 22",
    "start": "3103359",
    "end": "3109799"
  },
  {
    "text": "setup so the idea was to use a managed crossplane which would be running on the",
    "start": "3109799",
    "end": "3116640"
  },
  {
    "text": "about cloud and with that cross plane that should manage everything else so",
    "start": "3116640",
    "end": "3122119"
  },
  {
    "text": "that is our starting point that's what we're doing here if we go to aound Cloud",
    "start": "3122119",
    "end": "3127240"
  },
  {
    "text": "there you go mhm control planes I have already created one it's a Christmas gift nice so this exists uh I will",
    "start": "3127240",
    "end": "3135599"
  },
  {
    "text": "contact you after my free trial so just before Easter I'll say hey",
    "start": "3135599",
    "end": "3141520"
  },
  {
    "text": "Dan is there like an Easter egg in here or something cool we we'll send you an",
    "start": "3141520",
    "end": "3146559"
  },
  {
    "text": "email as a reminder so yeah cool so we have a control plane we have a",
    "start": "3146559",
    "end": "3151839"
  },
  {
    "text": "kubernetes cluster which is this one so k um K version that's the one also just",
    "start": "3151839",
    "end": "3157319"
  },
  {
    "text": "a note you'll want to uh make sure to clean up that that token that was exposed there before you post this",
    "start": "3157319",
    "end": "3162880"
  },
  {
    "text": "anywhere CU that'll give folks the ability to get a cube config to your your cluster this token yes thank you",
    "start": "3162880",
    "end": "3170079"
  },
  {
    "text": "yep oh yes oh yes that would be quite a Christmas gift wouldn't it here we go",
    "start": "3170079",
    "end": "3175240"
  },
  {
    "text": "you can have access to like can take everything down that is a very good catch thank you cool we have crossplane",
    "start": "3175240",
    "end": "3182359"
  },
  {
    "text": "we have access to it and uh could we see the version so I use I use Kines um and I think you do too I've",
    "start": "3182359",
    "end": "3189599"
  },
  {
    "text": "seen you use it a couple of times it's a lot quicker so this is these are all the pods uh if I do D for describe it's",
    "start": "3189599",
    "end": "3196280"
  },
  {
    "text": "version 131 cool is that good enough yep that's good uh although actually uh by",
    "start": "3196280",
    "end": "3202599"
  },
  {
    "text": "end of day today you'll be able to get uh as as uh recent",
    "start": "3202599",
    "end": "3208000"
  },
  {
    "text": "as1 but uh a nice a nice um policy here is also um and this this will actually",
    "start": "3208000",
    "end": "3214520"
  },
  {
    "text": "be rolling out today as well uh we you know we have patches right for for uh",
    "start": "3214520",
    "end": "3219760"
  },
  {
    "text": "minor versions and uh your your control plane will automatically receive the latest patch here uh and you shouldn't",
    "start": "3219760",
    "end": "3226000"
  },
  {
    "text": "see any disruption with that so you'll actually get up to 1.3.3 if you kept this control playing around right okay",
    "start": "3226000",
    "end": "3232839"
  },
  {
    "text": "but to get Terra jet to work will I need a newer version of crossplane or or is 13 sufficient uh 13 should be fine um",
    "start": "3232839",
    "end": "3241400"
  },
  {
    "text": "for what we're doing here ter jet just basically generates the provider so uh as long as a provider is supported then",
    "start": "3241400",
    "end": "3247000"
  },
  {
    "text": "you're good cool okay we can connect to this everything's running shall we just",
    "start": "3247000",
    "end": "3252200"
  },
  {
    "text": "follow uh these instructions and see how far we can get sure yeah that sounds great and a disclaimer for for everyone",
    "start": "3252200",
    "end": "3259359"
  },
  {
    "text": "at home um I'm I am not intimately familiar with ter jet actually because",
    "start": "3259359",
    "end": "3265760"
  },
  {
    "text": "um we had another team of of crossplaying contributors who have worked on this um so I'm going to be",
    "start": "3265760",
    "end": "3271480"
  },
  {
    "text": "learning as we go along here in terms of the uh the actual generation process this should be fun that's amazing so",
    "start": "3271480",
    "end": "3278440"
  },
  {
    "text": "that is that's correct move offic yep okay and Hass yep all all those folks",
    "start": "3278440",
    "end": "3286200"
  },
  {
    "text": "are uh actually some of my co-workers at upbound um and muaic has been uh a",
    "start": "3286200",
    "end": "3292359"
  },
  {
    "text": "crossplane maintainer with me for uh a number of years now amazing okay well",
    "start": "3292359",
    "end": "3298079"
  },
  {
    "text": "they're awesome thank you very much let's see how well it works right my favorite let's see let's see what happens so excellent what follows next",
    "start": "3298079",
    "end": "3306520"
  },
  {
    "text": "is an hourlong pairing session with Dan condensed into 7 minutes if you don't want to listen us two noobs figuring",
    "start": "3306520",
    "end": "3312440"
  },
  {
    "text": "stuff out skip ahead to the end result when I talk it through with one of the ter jet creators muak onos use this",
    "start": "3312440",
    "end": "3319400"
  },
  {
    "text": "template mhm okay why if you're intending to you know make this an open source project that's a way to get",
    "start": "3319400",
    "end": "3325640"
  },
  {
    "text": "started right off the B so basically clone this right if you click the provider jet temp template there uh",
    "start": "3325640",
    "end": "3331640"
  },
  {
    "text": "it'll have a use this template button which means you can just create a new repo right from it okay let's go for",
    "start": "3331640",
    "end": "3338880"
  },
  {
    "text": "that awesome change log perfect cool okay first step provide a jet L Note",
    "start": "3338880",
    "end": "3344559"
  },
  {
    "text": "clone the repository CD replace template with your provider name okay yeah so",
    "start": "3344559",
    "end": "3350599"
  },
  {
    "text": "where was the template so all you're doing here is you're specifying what you want your provider name lower and upper to be and then these commands are going",
    "start": "3350599",
    "end": "3358000"
  },
  {
    "text": "to replace all instances of template ah I see okay I'm with you okay replace all",
    "start": "3358000",
    "end": "3363160"
  },
  {
    "text": "occurrences I see so now we just just basically run this command Okay mhm uh I'm guessing that has to do with the",
    "start": "3363160",
    "end": "3370200"
  },
  {
    "text": "name of the terraform repo potentially um but it says the check that line and",
    "start": "3370200",
    "end": "3376760"
  },
  {
    "text": "controller Docker file um and so that looks like a broken link",
    "start": "3376760",
    "end": "3384880"
  },
  {
    "text": "potentially found cool so that is the link that we should use mhm so it sounds",
    "start": "3384880",
    "end": "3390400"
  },
  {
    "text": "like that just the terraform provider lenoe is what we're looking for there if I look in the docker file here and see",
    "start": "3390400",
    "end": "3396839"
  },
  {
    "text": "how terraform provider source is used it's adding this I think I think it's I am a little confused about the",
    "start": "3396839",
    "end": "3405400"
  },
  {
    "text": "difference between terraform provider source and terraform download name here based on the docker file that we're",
    "start": "3405400",
    "end": "3411000"
  },
  {
    "text": "looking at yeah seems like they should be the same",
    "start": "3411000",
    "end": "3417359"
  },
  {
    "text": "um yeah I think they should be the same I think you're right I think that might be getting terraform itself and",
    "start": "3417359",
    "end": "3424400"
  },
  {
    "text": "installing it um let's see if there is a",
    "start": "3424400",
    "end": "3429640"
  },
  {
    "text": "ah yes you're right that is getting the terraform itself you're absolutely right mhm okay so this actually is the entire",
    "start": "3429640",
    "end": "3437760"
  },
  {
    "text": "URL right I think it's actually all of it uh no maybe not because look at the",
    "start": "3437760",
    "end": "3444119"
  },
  {
    "text": "location yeah it's just the URL prefix right so I think it's just this yeah",
    "start": "3444119",
    "end": "3449359"
  },
  {
    "text": "exactly okay okay that makes sense cool okay so this is the change",
    "start": "3449359",
    "end": "3456000"
  },
  {
    "text": "log this is terraform provider Lin out and then that's it V4 GitHub I think",
    "start": "3456000",
    "end": "3464480"
  },
  {
    "text": "yeah I'm I'm confused a little bit about the V4 GitHub portion of that um well",
    "start": "3464480",
    "end": "3471079"
  },
  {
    "text": "that was added there so that means that there should be a GitHub uh not this one",
    "start": "3471079",
    "end": "3476280"
  },
  {
    "text": "on this one the change log it' probably be helpful if we took a look at one of",
    "start": "3476280",
    "end": "3482440"
  },
  {
    "text": "the potentially if some of the existing providers um use this and so if we take",
    "start": "3482440",
    "end": "3490319"
  },
  {
    "text": "this one is this public it is cool so GitHub look at that GitHub is there yeah",
    "start": "3490319",
    "end": "3496960"
  },
  {
    "text": "so so I think this is an example of download so I think you'd have lenoe",
    "start": "3496960",
    "end": "3502559"
  },
  {
    "text": "instead of GitHub right um yeah but I'm not sure sure where the V4 is coming",
    "start": "3502559",
    "end": "3507880"
  },
  {
    "text": "from necessarily I didn't see that there actually yeah it's V4 GitHub that is interesting you're right I didn't see V4",
    "start": "3507880",
    "end": "3514119"
  },
  {
    "text": "either so I've seen GitHub I don't know where that's coming from indeed okay so if we come back to this let me maybe I'm",
    "start": "3514119",
    "end": "3519200"
  },
  {
    "text": "not reading this right the way I understand it it's actually the Lino terraform provider it's this one that",
    "start": "3519200",
    "end": "3525440"
  },
  {
    "text": "I'm linking to Yep this is it mhm this is what I think I need to provide so it's it's it's basically this well I",
    "start": "3525440",
    "end": "3533079"
  },
  {
    "text": "think actually no I think what you have potentially is right right cuz I believe this is pointing to well no is it using",
    "start": "3533079",
    "end": "3540240"
  },
  {
    "text": "the Leno hold on one second actually in this example it was ah yeah",
    "start": "3540240",
    "end": "3547400"
  },
  {
    "text": "right no actually no here we go this is this is helpful um so I'm dropping it in",
    "start": "3547400",
    "end": "3554760"
  },
  {
    "text": "Zoom chat here this tells us where Integrations is coming from uh which is",
    "start": "3554760",
    "end": "3560240"
  },
  {
    "text": "the G repo the org is called Integrations that terraform provider GitHub is in and then get",
    "start": "3560240",
    "end": "3566559"
  },
  {
    "text": "Hub H they don't have the V4 in there though I don't know what that's coming from but uh so I think uh there was",
    "start": "3566559",
    "end": "3575039"
  },
  {
    "text": "something here there was something in the documentation where was it ah I know what it is it's uh this is a go package",
    "start": "3575039",
    "end": "3581520"
  },
  {
    "text": "and they have a a V4 version right and so that's just the import path for the",
    "start": "3581520",
    "end": "3587559"
  },
  {
    "text": "go package so you can leave that out as long as the lenoe provider is uh a normal go package here look that is the",
    "start": "3587559",
    "end": "3596079"
  },
  {
    "text": "the line mhm download in found download in so that pulls it from the right place",
    "start": "3596079",
    "end": "3601920"
  },
  {
    "text": "okay great if your provider using an old version how do I know if it's using an",
    "start": "3601920",
    "end": "3607599"
  },
  {
    "text": "old version oh um okay I see uh I was confused go mod",
    "start": "3607599",
    "end": "3613839"
  },
  {
    "text": "vendor uh I believe you need an actual replace stanza down there at the bottom",
    "start": "3613839",
    "end": "3619720"
  },
  {
    "text": "you think I believe so okay this is a require so the way I understand it I need to replace this",
    "start": "3619720",
    "end": "3626680"
  },
  {
    "text": "with this uh no I believe that you'll have a dependency there on hashicorp",
    "start": "3626680",
    "end": "3631839"
  },
  {
    "text": "terraform plug-in SDK and then you'll have a replace statement at the bottom of the go mod that indicates you want to",
    "start": "3631839",
    "end": "3638760"
  },
  {
    "text": "replace that dependency that's in your require with the fork there thaton has",
    "start": "3638760",
    "end": "3645440"
  },
  {
    "text": "so you're saying that all I need to do is comment out this line This replace yep that should be what we're",
    "start": "3645440",
    "end": "3652680"
  },
  {
    "text": "looking for here okay I wasn't sure that go more supports this yep statements mhm",
    "start": "3652680",
    "end": "3659920"
  },
  {
    "text": "yeah okay go more tidy I believe here is where we need to",
    "start": "3659920",
    "end": "3665400"
  },
  {
    "text": "set up whatever the the credentials are needed to talk to lenoe um so we may",
    "start": "3665400",
    "end": "3672280"
  },
  {
    "text": "want to do the same thing that the terraform provider is doing um but uh I",
    "start": "3672280",
    "end": "3678359"
  },
  {
    "text": "see what you mean okay I'm with you so the only thing that we really need is a key to yeah yeah that's the only thing",
    "start": "3678359",
    "end": "3687480"
  },
  {
    "text": "cool I would call it CLI token because that Maps it to what the Leno C expected",
    "start": "3687480",
    "end": "3693240"
  },
  {
    "text": "to be is that what you use with terraform to be able to authenticate I don't know because I believe what we're",
    "start": "3693240",
    "end": "3699799"
  },
  {
    "text": "doing here is we're so we're taking things out of the provider config and then setting the environment variable",
    "start": "3699799",
    "end": "3705319"
  },
  {
    "text": "based on that so when the underlying terraform plug-in is invoked it will utilize those credentials uh specified",
    "start": "3705319",
    "end": "3712920"
  },
  {
    "text": "by the environment variables yep let's see Leno token nice so I'm",
    "start": "3712920",
    "end": "3719400"
  },
  {
    "text": "guessing that's what we want there that's what we want yeah where does this key come from so hang on let me see key",
    "start": "3719400",
    "end": "3724720"
  },
  {
    "text": "username where does this key come from uh you just deleted the the variable that was key username so but you can",
    "start": "3724720",
    "end": "3731400"
  },
  {
    "text": "name it whatever sorry uh it was way up at the top uh you ah INF token I see",
    "start": "3731400",
    "end": "3736440"
  },
  {
    "text": "okay yep that sounds good I also am G to uh have to to wrap up here pretty soon",
    "start": "3736440",
    "end": "3743319"
  },
  {
    "text": "okay let's wrap up now okay yeah let's wrap up now I think this was a good point after the pairing session with Dan",
    "start": "3743319",
    "end": "3749839"
  },
  {
    "text": "I had a few more with muak onos one of the ter jet creators and then he joined me to talk about the end result yeah I'm",
    "start": "3749839",
    "end": "3756880"
  },
  {
    "text": "I'm glad to be here we had a couple of early mornings and I think I had a couple of late night so why did we do",
    "start": "3756880",
    "end": "3763720"
  },
  {
    "text": "this the reason why we did this is because we wanted our kubernetes clusters to not be provisioned via UI or",
    "start": "3763720",
    "end": "3770160"
  },
  {
    "text": "CLI so no click Ops Dan that was a great word no click Ops no UI and not even CLI",
    "start": "3770160",
    "end": "3777240"
  },
  {
    "text": "we didn't want to have a CLI that we need to like a command to type to provision a kubernetes cluster now that",
    "start": "3777240",
    "end": "3784279"
  },
  {
    "text": "is not entirely true because obvious we still have to give it a config but there's something that Provisions the",
    "start": "3784279",
    "end": "3790799"
  },
  {
    "text": "cluster for us and that is crossplane but not just crossplane there's this",
    "start": "3790799",
    "end": "3796680"
  },
  {
    "text": "secret Source element which I didn't know about until then mentioned that hey have you seen ter jet uh that was your",
    "start": "3796680",
    "end": "3803359"
  },
  {
    "text": "idea well so so you see the in crossb and ecosystem there are like no many providers and not all of them have",
    "start": "3803359",
    "end": "3810240"
  },
  {
    "text": "support for All apis That clouds actually expose right and one of the examples was L like we didn't have a",
    "start": "3810240",
    "end": "3816520"
  },
  {
    "text": "provider at all so the the plan with teret was like you know the motivation",
    "start": "3816520",
    "end": "3821960"
  },
  {
    "text": "was that let's let's build something that can utilize the whole like great",
    "start": "3821960",
    "end": "3827119"
  },
  {
    "text": "terraform community and the great work that they did M so that was how it came to be uh design a code generator and the",
    "start": "3827119",
    "end": "3836039"
  },
  {
    "text": "controller that can take any telephone provider and make up a crossb provider",
    "start": "3836039",
    "end": "3841480"
  },
  {
    "text": "out of it right so this is full circle happening Marcus if you're listening to",
    "start": "3841480",
    "end": "3847359"
  },
  {
    "text": "this this is what happened with your terraform provider I remember work with Marcus while he was still at linode uh",
    "start": "3847359",
    "end": "3854119"
  },
  {
    "text": "we were using terraform to provision the instances which were running Docker at the time to host the change.com website",
    "start": "3854119",
    "end": "3860599"
  },
  {
    "text": "and the entire setup then that was the seed which created the Leno kubernetes engine Eng then Marcus joined crossplane",
    "start": "3860599",
    "end": "3868480"
  },
  {
    "text": "and upbound and now using the terraform lenoe provided Marcus started to",
    "start": "3868480",
    "end": "3874920"
  },
  {
    "text": "provision kubernetes classes on linode using the terraform provider using crossplane like how crazy is that it",
    "start": "3874920",
    "end": "3882599"
  },
  {
    "text": "just takes a while just like to wrap your head around this like this was like years in the making and we didn't even know it until a few months ago when Dan",
    "start": "3882599",
    "end": "3891200"
  },
  {
    "text": "mentioned ter jet I didn't even know that this thing this thing existed so that's what we're using as a",
    "start": "3891200",
    "end": "3897599"
  },
  {
    "text": "generator for a linode provider that uses terraform so okay how many how many",
    "start": "3897599",
    "end": "3905039"
  },
  {
    "text": "providers have been generated with teret to date and where can we see them yeah",
    "start": "3905039",
    "end": "3910160"
  },
  {
    "text": "so um today we have the providers for the big three AWS Azure and",
    "start": "3910160",
    "end": "3916839"
  },
  {
    "text": "gcp and those three providers have 2,000 almost crds in total right uh and then",
    "start": "3916839",
    "end": "3925200"
  },
  {
    "text": "you can see like if you go to crossplane contri org you will see other like you know providers similar to like jet Lin",
    "start": "3925200",
    "end": "3932920"
  },
  {
    "text": "for example we have equinix equinus metal we have exos scale all of these are like you know completely bootst by",
    "start": "3932920",
    "end": "3939359"
  },
  {
    "text": "the community so I would say I think in total like uh seven or eight right now",
    "start": "3939359",
    "end": "3945599"
  },
  {
    "text": "okay yeah there's quite a few provide a TF Kix I can see that provide a Helm provider sio um what else am I seeing",
    "start": "3945599",
    "end": "3953119"
  },
  {
    "text": "here provide the jet AWS this is an interesting one so even though you have an AWS provider there is also a provider",
    "start": "3953119",
    "end": "3959039"
  },
  {
    "text": "jet AWS do you know the story behind that um so the provider AWS the one that calls apis directly has around 100 crds",
    "start": "3959039",
    "end": "3967720"
  },
  {
    "text": "which which means like you know it Maps 100 services but AWS has like you know hundreds so if you look at that J AWS",
    "start": "3967720",
    "end": "3974880"
  },
  {
    "text": "you will see it has 765 custom resource definition which is like you know just",
    "start": "3974880",
    "end": "3981279"
  },
  {
    "text": "too many for KU community at this point I can imagine having so many crds is",
    "start": "3981279",
    "end": "3987240"
  },
  {
    "text": "kues like you wouldn't even know which one to pick I mean there's just so many of them okay so that makes sense so and",
    "start": "3987240",
    "end": "3994000"
  },
  {
    "text": "we added another provider haven't we in the last week um yes that was amazing like um 12 commits that's all it took to",
    "start": "3994000",
    "end": "4003240"
  },
  {
    "text": "generate a provider jet Leno which is in crossplane cont this is by the way our gift to you our Christmas gift to you if",
    "start": "4003240",
    "end": "4009119"
  },
  {
    "text": "you want to provision lenoe kubernetes engine clusters using crossplane this is the modern way of doing it right because",
    "start": "4009119",
    "end": "4015680"
  },
  {
    "text": "Mark has built a crossplane provider for linode which hasn't seen much maintenance I think the last update was",
    "start": "4015680",
    "end": "4022200"
  },
  {
    "text": "a year ago maybe a bit longer and I don't think it's working with the latest crossplane versions many things have changed since uh so this one we know it",
    "start": "4022200",
    "end": "4029799"
  },
  {
    "text": "works but it only has a single resource right because that's all all that we needed and that is the LK resource",
    "start": "4029799",
    "end": "4036520"
  },
  {
    "text": "linode uh LK cluster now if she want more resources uh contribute it's an",
    "start": "4036520",
    "end": "4043319"
  },
  {
    "text": "open- Source repository public to everyone so if there's anything missing what I would like to see is a len",
    "start": "4043319",
    "end": "4048640"
  },
  {
    "text": "instance I would like to provision some Len instances and VMS with it so that would be my request to anyone that's",
    "start": "4048640",
    "end": "4054279"
  },
  {
    "text": "listening this Marcus maybe what do you think or someone else but uh anyways",
    "start": "4054279",
    "end": "4059400"
  },
  {
    "text": "it's there I'm wondering what is coming next for ter jet um so Terra jet so when",
    "start": "4059400",
    "end": "4064799"
  },
  {
    "text": "we first started with ter jet the we had hit a problem uh with API show we",
    "start": "4064799",
    "end": "4070200"
  },
  {
    "text": "handling that many crds actually right when you install 700 crds API server",
    "start": "4070200",
    "end": "4075599"
  },
  {
    "text": "gets like you know unresponsive for like 40 minutes or something which like you know affects all the workloads that it",
    "start": "4075599",
    "end": "4081880"
  },
  {
    "text": "it it was supposed to schedule MH um so we have fixed that problem I mean there",
    "start": "4081880",
    "end": "4087279"
  },
  {
    "text": "was a patch and we accelerated some of the processes in Upstream so now we are",
    "start": "4087279",
    "end": "4093079"
  },
  {
    "text": "able to use those those jet providers and in January we will have a big splash",
    "start": "4093079",
    "end": "4098960"
  },
  {
    "text": "of announcements okay that will announce AWS Azure ngcp provider jet providers",
    "start": "4098960",
    "end": "4105080"
  },
  {
    "text": "with their like you know API groups stabilized configs are stabilized and",
    "start": "4105080",
    "end": "4110120"
  },
  {
    "text": "API fields are stabilized and then we will start uh making some of the",
    "start": "4110120",
    "end": "4115400"
  },
  {
    "text": "resources uh version V1 beta one which has like you know more guarantees around that and then we will have conversion",
    "start": "4115400",
    "end": "4122560"
  },
  {
    "text": "web hooks in crossplay which will affect like you know how easily we can make a",
    "start": "4122560",
    "end": "4129640"
  },
  {
    "text": "resource let's say that you're don't happy with the implementation in theone provider you can just switch to Native",
    "start": "4129640",
    "end": "4136600"
  },
  {
    "text": "implementation with API calls directly to AWS so all this like you know new stuff that will allow uh Community to",
    "start": "4136600",
    "end": "4144520"
  },
  {
    "text": "bootstrap new providers and like you know make Upstream uh work with them and",
    "start": "4144520",
    "end": "4149679"
  },
  {
    "text": "then like you know it's just so many crds and built easily that you won't",
    "start": "4149679",
    "end": "4155318"
  },
  {
    "text": "have a problem like hey is this resource supported well yes probably instead of like you know let me take a look at hard",
    "start": "4155319",
    "end": "4162120"
  },
  {
    "text": "it would be to implement it I do have to say having um gone from nothing like I",
    "start": "4162120",
    "end": "4167159"
  },
  {
    "text": "knew nothing about how to implement a crossplane provider to using ter jet that was really smooth I think anyone",
    "start": "4167159",
    "end": "4174278"
  },
  {
    "text": "that is determined to write a crossplane provider that doesn't exist yet and there is a terraform provider which",
    "start": "4174279",
    "end": "4180080"
  },
  {
    "text": "exists ours and they can have it which is amazing to see so this is basically proof that your idea works yeah I mean",
    "start": "4180080",
    "end": "4188480"
  },
  {
    "text": "in fact we had a we had a case uh where someone in the community that the provided EXO scale you saw uh that was",
    "start": "4188480",
    "end": "4195800"
  },
  {
    "text": "actually written in six hours there we go amazing and also like know that was the that was the hardest part that like",
    "start": "4195800",
    "end": "4202320"
  },
  {
    "text": "bushing the provider if you for example decide to add an instance resource to",
    "start": "4202320",
    "end": "4208159"
  },
  {
    "text": "Jet linit provider it's like you know 10 or 15 lines of code as you see the like single configuration that's right so all",
    "start": "4208159",
    "end": "4214600"
  },
  {
    "text": "the commits are there go and check them see what we've done for provide the jet linode again it's very very simple so",
    "start": "4214600",
    "end": "4220880"
  },
  {
    "text": "what I would like to do now is show you how easy it is to actually do this and I",
    "start": "4220880",
    "end": "4226120"
  },
  {
    "text": "say show because we record video and we may not have time to publish everything in time orever I don't know you know",
    "start": "4226120",
    "end": "4231520"
  },
  {
    "text": "things can get very busy but at least we'll do like a step by step process there's a pull request by the way in the",
    "start": "4231520",
    "end": "4237880"
  },
  {
    "text": "changelog uh Org the changel log.com repository pull request 399 which has",
    "start": "4237880",
    "end": "4242960"
  },
  {
    "text": "all the text all the screenshots everything on how to do this all the links so this is what we're going to do",
    "start": "4242960",
    "end": "4248640"
  },
  {
    "text": "next we're going to install crossplane install the provider and then provision the linode kubernetes engine cluster",
    "start": "4248640",
    "end": "4255440"
  },
  {
    "text": "using this provider then we target it and then we try something crazy you know that I'm all for crazy right trying",
    "start": "4255440",
    "end": "4261679"
  },
  {
    "text": "crazy things and see what happens so that's what we're going to do next okay so I am in the 2021 directory currently",
    "start": "4261679",
    "end": "4269239"
  },
  {
    "text": "and I'm going to do uh I'm already targeting our production kubernetes clusters oh yes of course uh muaa when I",
    "start": "4269239",
    "end": "4275840"
  },
  {
    "text": "mentioned this to you first like I developing production you laughed but I'm serious that's like the only thing",
    "start": "4275840",
    "end": "4282520"
  },
  {
    "text": "that matters if it's not in production it's inventory so I don't like inventory I like stuff being out there so make in",
    "start": "4282520",
    "end": "4290040"
  },
  {
    "text": "this case LK crossplane and what it does that installs crossplane version 1.5.1",
    "start": "4290040",
    "end": "4297040"
  },
  {
    "text": "using Helm straight into production so uh installing cross Plane 2 minutes",
    "start": "4297040",
    "end": "4302920"
  },
  {
    "text": "later it's done that's how simple it is the next step is make crossplane LOD",
    "start": "4302920",
    "end": "4308400"
  },
  {
    "text": "provider and that's it that's simple that was really quick because the provider is super small right like 18",
    "start": "4308400",
    "end": "4313800"
  },
  {
    "text": "kilobytes I've seen the image which then pulls a bigger image how does that work can you tell us um yeah so um so the",
    "start": "4313800",
    "end": "4320920"
  },
  {
    "text": "metadata image it's an oci image where where it has only the metadata yl that",
    "start": "4320920",
    "end": "4326239"
  },
  {
    "text": "contains your crds and also some information about your package once it's downloaded by the package manager um it",
    "start": "4326239",
    "end": "4334280"
  },
  {
    "text": "installs the crds and then creates a deployment with the image that you provided there so like you know that",
    "start": "4334280",
    "end": "4341520"
  },
  {
    "text": "other image contains the binary okay and which version did we install of the provider version",
    "start": "4341520",
    "end": "4347960"
  },
  {
    "text": "0.0.0 D12 so there's no tag for this this is like a Dev only version We Trust",
    "start": "4347960",
    "end": "4353320"
  },
  {
    "text": "Dev in production the dream is real production became Dev great so um okay",
    "start": "4353320",
    "end": "4359520"
  },
  {
    "text": "we installed it we configured it it's all there so how can we check that the provider is there if we maybe get all",
    "start": "4359520",
    "end": "4367440"
  },
  {
    "text": "the pods in the namespace crossplane system because that's where everything gets installed we see that uh we we have",
    "start": "4367440",
    "end": "4375360"
  },
  {
    "text": "crossplane installed we have the crossplane rback manager these are two pods and the third one is the jet lenoe",
    "start": "4375360",
    "end": "4380600"
  },
  {
    "text": "pod cool so what can we do next I'm using K9 as the CLI just makes me it",
    "start": "4380600",
    "end": "4387239"
  },
  {
    "text": "allows me to do things really really uh quick so if we go to look at all the aliases which is control a for me and I",
    "start": "4387239",
    "end": "4394360"
  },
  {
    "text": "search for cluster we see a new crd and the crd is in the lenoe jet crossplane",
    "start": "4394360",
    "end": "4401840"
  },
  {
    "text": "IO V1 Alpha 1 group that's how we can provision new clusters so let's try that",
    "start": "4401840",
    "end": "4408600"
  },
  {
    "text": "uh if we go to Cluster to list out clusters we have we have no clusters great let's do make crossplane LK all",
    "start": "4408600",
    "end": "4417239"
  },
  {
    "text": "this does I still have to run a command okay okay I know what I mentioned earlier there will be no commands but",
    "start": "4417239",
    "end": "4423280"
  },
  {
    "text": "this is a different type of command I'm not telling uh the Leno the Leno API hey",
    "start": "4423280",
    "end": "4428480"
  },
  {
    "text": "linode create me a a LK instance I'm telling crossplane to create on my",
    "start": "4428480",
    "end": "4435360"
  },
  {
    "text": "behalf a elky instance and there's something really cool about this because cross bling will continuously reconcile",
    "start": "4435360",
    "end": "4442920"
  },
  {
    "text": "what I ask of it like how cool is that that's I think my favorite crossplane features and uh which happens to be a",
    "start": "4442920",
    "end": "4449600"
  },
  {
    "text": "kubernetes feature as well you know declarative you tell it what you want and it will make it so I love that story",
    "start": "4449600",
    "end": "4456199"
  },
  {
    "text": "great okay so this succeeded uh what are we seeing now we are seeing that 42",
    "start": "4456199",
    "end": "4461880"
  },
  {
    "text": "seconds ago a new elky 2021 12 17 by the way it's the 17th of December when we",
    "start": "4461880",
    "end": "4467800"
  },
  {
    "text": "are recording this um it just uses the current date when this new cluster has been created or it's you know it's asked",
    "start": "4467800",
    "end": "4475239"
  },
  {
    "text": "to be created so if we go to the um",
    "start": "4475239",
    "end": "4480760"
  },
  {
    "text": "where do we have it lenoe and if we go to our kubernetes lists we see a new cluster which is",
    "start": "4480760",
    "end": "4487239"
  },
  {
    "text": "kubernetes version 122 nice I'm wondering could it be our new production",
    "start": "4487239",
    "end": "4492960"
  },
  {
    "text": "cluster for 2022 if you could see me I'm winking yes it will be 1.22 kubernetes 1.22 that will be the",
    "start": "4492960",
    "end": "4501760"
  },
  {
    "text": "first version of our production 2022 kubernetes cluster this is it because",
    "start": "4501760",
    "end": "4508239"
  },
  {
    "text": "it's ready it's synced we have the external name which is the which is the ID the instance has booted great okay so",
    "start": "4508239",
    "end": "4516440"
  },
  {
    "text": "did it work well let's try make crossplane L key Cube config uh all these by the way",
    "start": "4516440",
    "end": "4524360"
  },
  {
    "text": "are in in our repo we can check them out actually do you want to tell us what happened behind the scenes like how were",
    "start": "4524360",
    "end": "4530440"
  },
  {
    "text": "we able to do this yeah um so the the crossplane has this notion of connection",
    "start": "4530440",
    "end": "4536040"
  },
  {
    "text": "detail secret where it stores all the sensitive information you need to use",
    "start": "4536040",
    "end": "4542080"
  },
  {
    "text": "that resource if any uh for example we see that like you know mostly in",
    "start": "4542080",
    "end": "4547120"
  },
  {
    "text": "kubernetes clusters database instances where you have like a password or some other details right and not in others",
    "start": "4547120",
    "end": "4553960"
  },
  {
    "text": "for example we PCS where you don't need any token or something to connect um so",
    "start": "4553960",
    "end": "4559800"
  },
  {
    "text": "here what we see is that uh teret does this automatically using terraforms TF",
    "start": "4559800",
    "end": "4566280"
  },
  {
    "text": "State and exports it in in the in its um",
    "start": "4566280",
    "end": "4571520"
  },
  {
    "text": "secret and then we have added a custom configuration that will get that secret",
    "start": "4571520",
    "end": "4578760"
  },
  {
    "text": "you see the attribute. cube config that is automatically put here uh taken from",
    "start": "4578760",
    "end": "4584480"
  },
  {
    "text": "State but the problem is that led terap provider actually Bas 64 encodes the",
    "start": "4584480",
    "end": "4591560"
  },
  {
    "text": "cube config so you've got like you know secret based 64 encoding and then another encoding on top of that what we",
    "start": "4591560",
    "end": "4599400"
  },
  {
    "text": "did was to provide a custom configuration for teret which which takes one uh is one field from",
    "start": "4599400",
    "end": "4607639"
  },
  {
    "text": "attributes and base 64 Deco and puts it here which makes it ready to use right",
    "start": "4607639",
    "end": "4613480"
  },
  {
    "text": "away with like you know cctl or other provider Helm or provider",
    "start": "4613480",
    "end": "4618719"
  },
  {
    "text": "cuberes uh controllers so while we can",
    "start": "4618719",
    "end": "4623760"
  },
  {
    "text": "get the cube config locally and then we can use like Cube CTL or cube cutle",
    "start": "4623760",
    "end": "4629199"
  },
  {
    "text": "whatever you want to call it and use that Cube config to Target that cluster",
    "start": "4629199",
    "end": "4634639"
  },
  {
    "text": "what we may want to do is let crossplane",
    "start": "4634639",
    "end": "4639760"
  },
  {
    "text": "provision other things inside this cluster so that we wouldn't necessarily",
    "start": "4639760",
    "end": "4645239"
  },
  {
    "text": "need to give this Cube config away it stays within crossplane you know it's all all there crossplane has it for it",
    "start": "4645239",
    "end": "4651040"
  },
  {
    "text": "to be able to provision other things in in inside of this cluster and maybe this is the path where I lose access to",
    "start": "4651040",
    "end": "4657840"
  },
  {
    "text": "kubernetes clusters is that it like it's it's more difficult for me",
    "start": "4657840",
    "end": "4663520"
  },
  {
    "text": "to just like run commands against them uh the idea being that this could be like a fully self automated system it",
    "start": "4663520",
    "end": "4670000"
  },
  {
    "text": "creates itself it Provisions itself with everything it needs it pulls down all the bits and including the application",
    "start": "4670000",
    "end": "4675840"
  },
  {
    "text": "the latest version of the Chang lock app and it just runs it updates DNS because it's like a self- updating system so",
    "start": "4675840",
    "end": "4681280"
  },
  {
    "text": "this is one step closer to a self-updating self-provisioning system and that is a",
    "start": "4681280",
    "end": "4687840"
  },
  {
    "text": "dream which I had many years ago and I'm one step closer and that makes me so happy okay so we have the cube config",
    "start": "4687840",
    "end": "4694600"
  },
  {
    "text": "locally and uh I'm not there yet in that dream world so I'm still putting in the",
    "start": "4694600",
    "end": "4700159"
  },
  {
    "text": "cube config pulling it down locally and now going with uh K9 targeting the new",
    "start": "4700159",
    "end": "4705480"
  },
  {
    "text": "cluster and what we see is that it's just like any regular cluster there it is just the default pods uh 4 minutes",
    "start": "4705480",
    "end": "4712760"
  },
  {
    "text": "ago they were created if we look at the node it's the new node it's version 1. 22.2 so the latest kues uh version on",
    "start": "4712760",
    "end": "4720880"
  },
  {
    "text": "linode currently and I'm wondering what is going to happen if by accident and",
    "start": "4720880",
    "end": "4727239"
  },
  {
    "text": "I'm doing air quotes if accidentally Jared deletes the",
    "start": "4727239",
    "end": "4732480"
  },
  {
    "text": "cluster I don't know Jared I just gave an example you know like like we we we do we do crazy things together all the",
    "start": "4732480",
    "end": "4738760"
  },
  {
    "text": "time so you know you're like the first one when I'm thinking about someone uh deleting some change look infrastructure",
    "start": "4738760",
    "end": "4745679"
  },
  {
    "text": "so let's just click this delete button oh pretend I'm Jared what is like no I don't recognize this cluster let me just",
    "start": "4745679",
    "end": "4752120"
  },
  {
    "text": "delete it it's just extra resource so let's delete the cluster and uh yes I confirm I want to delete it and the",
    "start": "4752120",
    "end": "4758560"
  },
  {
    "text": "cluster's gone and luckily I deleted the correct cluster I haven't deleted our production cluster but if I had delet",
    "start": "4758560",
    "end": "4764920"
  },
  {
    "text": "our production cluster I mean good luck setting everything up there's like a lot of stuff to do a lot of steps and yes we",
    "start": "4764920",
    "end": "4770440"
  },
  {
    "text": "have like a make Target which puts everything together and you know it's okay but it's not as good as it could be",
    "start": "4770440",
    "end": "4777239"
  },
  {
    "text": "yeah Jared wouldn't do that no Jared wouldn't do that no he wouldn't I I do that all the time you know like let's",
    "start": "4777239",
    "end": "4783120"
  },
  {
    "text": "just take production down you know whatever let's see what happens just for the fun of it so what will this do",
    "start": "4783120",
    "end": "4789000"
  },
  {
    "text": "behind the scenes with the new setup that we have buak can you tell us yes so",
    "start": "4789000",
    "end": "4794719"
  },
  {
    "text": "what's going to happen is that the controller will reconcile and see that the cluster is not there m uh it's gone",
    "start": "4794719",
    "end": "4801880"
  },
  {
    "text": "which is like you know what happens when you first create the resource the F very first thing that a provider does is to",
    "start": "4801880",
    "end": "4807679"
  },
  {
    "text": "check whether a resource is there and create it if not yeah and it will be for",
    "start": "4807679",
    "end": "4812800"
  },
  {
    "text": "for the controller it will be just like that hey I checked the resource andant there so I need to create it m so it",
    "start": "4812800",
    "end": "4818760"
  },
  {
    "text": "goes ahead and tries to create a new cluster right and that takes 30 seconds",
    "start": "4818760",
    "end": "4824199"
  },
  {
    "text": "a minute how long does it take for it to figure out that hey I'm missing a cluster uh well so because it doesn't",
    "start": "4824199",
    "end": "4830600"
  },
  {
    "text": "get any events or anything uh in kuber cluster it will need to hit the long",
    "start": "4830600",
    "end": "4836600"
  },
  {
    "text": "weight period which is like you know 1 minute yeah so at most in a minute it will uh recognize that change or you can",
    "start": "4836600",
    "end": "4845239"
  },
  {
    "text": "make a change on the custom resource which will trigger a kubernetes event you go to that controller and it will",
    "start": "4845239",
    "end": "4851360"
  },
  {
    "text": "start uh all the processes there so I was trying to find this out to see where",
    "start": "4851360",
    "end": "4856440"
  },
  {
    "text": "it's reconciling it's finding it uh I think I just missed it the event it's",
    "start": "4856440",
    "end": "4861760"
  },
  {
    "text": "everything is synced now right everything's ready the cluster's back I mean I just had to refresh the page uh",
    "start": "4861760",
    "end": "4868320"
  },
  {
    "text": "what about the linodes um is it still there it's offline interesting I don't",
    "start": "4868320",
    "end": "4874440"
  },
  {
    "text": "know why that's offline so when I deleted the cluster whatever happened",
    "start": "4874440",
    "end": "4880719"
  },
  {
    "text": "behind the scenes maybe the note pool the default node poool got deleted as well oh it's booting so I think that the",
    "start": "4880719",
    "end": "4889159"
  },
  {
    "text": "node was deleted as well uh and this is like the worker worker VM and the new",
    "start": "4889159",
    "end": "4894679"
  },
  {
    "text": "one was created so deleting the cluster from the Leno DUI from the cloud lin.com",
    "start": "4894679",
    "end": "4900040"
  },
  {
    "text": "it also deletes the all the worker nodes so when the cluster gets recreated it has to obviously recreate all the nodes",
    "start": "4900040",
    "end": "4906719"
  },
  {
    "text": "and there it is it's it's back okay so everything here is ready it's synced because while the cluster has been",
    "start": "4906719",
    "end": "4912199"
  },
  {
    "text": "created like the object the cluster object the node pool that's associated with it hasn't been finished yet I think",
    "start": "4912199",
    "end": "4918480"
  },
  {
    "text": "that's where composite resources come in can you tell us a bit about that so in other cases where you have the note",
    "start": "4918480",
    "end": "4925159"
  },
  {
    "text": "group as represented as a different resource you can actually have like you know two resource in a single",
    "start": "4925159",
    "end": "4931239"
  },
  {
    "text": "composition right and additionally just like you mentioned earlier we can have",
    "start": "4931239",
    "end": "4936320"
  },
  {
    "text": "more things in installed there as well because like you know the the dependencies that are resolved",
    "start": "4936320",
    "end": "4941840"
  },
  {
    "text": "automatically just like you know kubernetes so so for example you would create your composite cluster resource",
    "start": "4941840",
    "end": "4948600"
  },
  {
    "text": "cluster will be created and not groups will be booted and then installations will start with provider Cube config or",
    "start": "4948600",
    "end": "4955040"
  },
  {
    "text": "provider Helm so like you know once your composite cluster CR uh reports ready",
    "start": "4955040",
    "end": "4961560"
  },
  {
    "text": "everything is ready and like you know just back in its initial State yeah so",
    "start": "4961560",
    "end": "4966639"
  },
  {
    "text": "it will just like you know revert it back to the original state including all all the things in composition okay so",
    "start": "4966639",
    "end": "4973199"
  },
  {
    "text": "now what happened is is we are targeting the same control plane and we could see how the pods were being recreated so 90",
    "start": "4973199",
    "end": "4980440"
  },
  {
    "text": "seconds ago 100 seconds ago everything was created from scratch we accidentally air quotes again deleted the cluster",
    "start": "4980440",
    "end": "4987600"
  },
  {
    "text": "cross plane recreated the cluster the not pools recreated the nopol had a single node and then everything was put",
    "start": "4987600",
    "end": "4993800"
  },
  {
    "text": "back on it like by default what's there what we would have been missing if for",
    "start": "4993800",
    "end": "4999080"
  },
  {
    "text": "example if we had added any extra resources like Ingress engine X or external DNS or all the other component",
    "start": "4999080",
    "end": "5004639"
  },
  {
    "text": "that we need those would no longer be present because let's be honest we deleted the cluster and that should",
    "start": "5004639",
    "end": "5010199"
  },
  {
    "text": "delete everything in it and this is I think where a human I.E me would have",
    "start": "5010199",
    "end": "5015800"
  },
  {
    "text": "come in and like run commands to oh I have to get production back you know because it was deleted but how amazing",
    "start": "5015800",
    "end": "5020960"
  },
  {
    "text": "would it be if crossplane could do this so it would know oh it's not just the cluster which I need it's all this extra",
    "start": "5020960",
    "end": "5027239"
  },
  {
    "text": "stuff that needs to be present in the cluster now that is really exciting uh next year right I think we did enough I",
    "start": "5027239",
    "end": "5033560"
  },
  {
    "text": "think we did enough this Christmas cool all right so um what happens next what",
    "start": "5033560",
    "end": "5041239"
  },
  {
    "text": "happens next well uh I think there's a couple of improvements that we can do I",
    "start": "5041239",
    "end": "5046760"
  },
  {
    "text": "already mentioned about installing all like the B having I think I think this is your idea can you tell us about your",
    "start": "5046760",
    "end": "5052159"
  },
  {
    "text": "idea this is this is really really good the two compositions so maybe I can give",
    "start": "5052159",
    "end": "5057480"
  },
  {
    "text": "a little summary about what composition does sure composition is has two parts",
    "start": "5057480",
    "end": "5063000"
  },
  {
    "text": "one is xrd similar to crds where you define your own API but with xrds you",
    "start": "5063000",
    "end": "5069199"
  },
  {
    "text": "can Define two different apis one is nam spaced and the other one is cluster",
    "start": "5069199",
    "end": "5075080"
  },
  {
    "text": "scoped which does not have any name spaces so what we usually see is that",
    "start": "5075080",
    "end": "5080239"
  },
  {
    "text": "people create a composition with all the base system",
    "start": "5080239",
    "end": "5085679"
  },
  {
    "text": "components in the same composition like we call it batteries included if you go",
    "start": "5085679",
    "end": "5091080"
  },
  {
    "text": "to like you know platform references we have under upbound orc you will see some of the examples right where we for",
    "start": "5091080",
    "end": "5096760"
  },
  {
    "text": "example install Prometheus um or like you know a few other tools that your platform team",
    "start": "5096760",
    "end": "5103040"
  },
  {
    "text": "might want every cluster to have like security agents in this case uh as",
    "start": "5103040",
    "end": "5108639"
  },
  {
    "text": "listed there in the in the pr you've got theer manager you've got grafana agent",
    "start": "5108639",
    "end": "5114239"
  },
  {
    "text": "and a few other components that you want to install and then the the other composition is usually the application",
    "start": "5114239",
    "end": "5121760"
  },
  {
    "text": "itself in that uh in that composition position you would Define like you know what change lock specifically needs so",
    "start": "5121760",
    "end": "5127920"
  },
  {
    "text": "that for example you would create a single cluster with that base",
    "start": "5127920",
    "end": "5133280"
  },
  {
    "text": "composition and then refer to it from many name spaces in your seed cluster",
    "start": "5133280",
    "end": "5138679"
  },
  {
    "text": "and from many applications that can installed to that cluster right so you would have like you know the cluster",
    "start": "5138679",
    "end": "5144080"
  },
  {
    "text": "that is like you know man managed in one name space maybe like you know change lock system with it own claim that claim",
    "start": "5144080",
    "end": "5150880"
  },
  {
    "text": "is what we call like similar to PVC person volume claim yeah that is name space so you would have that production",
    "start": "5150880",
    "end": "5157480"
  },
  {
    "text": "cluster but like you know different teams or developers in their own name space they would refer to that Central",
    "start": "5157480",
    "end": "5163800"
  },
  {
    "text": "production cluster in their claims that are defined Again by you via xrd yeah so",
    "start": "5163800",
    "end": "5170679"
  },
  {
    "text": "it's about like you know publishing a new API instead of like you know we instead of going through all the fields of the specific clouds you would publish",
    "start": "5170679",
    "end": "5178760"
  },
  {
    "text": "API with with only the F that you want to be configured okay that is really cool I can hardly way to do that I mean",
    "start": "5178760",
    "end": "5185560"
  },
  {
    "text": "that is seriously cool like having all this stuff abstracted in a composition to just capture what it means for the",
    "start": "5185560",
    "end": "5192440"
  },
  {
    "text": "entire change log setup to come online would be so amazing the other thing",
    "start": "5192440",
    "end": "5197679"
  },
  {
    "text": "which would be also amazing is to move crossplane from being hosted on our",
    "start": "5197679",
    "end": "5202719"
  },
  {
    "text": "cluster to be hosted on upout cloud because the dream is there is a seed cluster somewhere which is managed by",
    "start": "5202719",
    "end": "5209280"
  },
  {
    "text": "someone else in this case upbound Cloud the crossplane is there we can Define all all the important stuff and that is",
    "start": "5209280",
    "end": "5215800"
  },
  {
    "text": "the seed which controls all the other clusters everything else and not just clusters other things as well again I",
    "start": "5215800",
    "end": "5221800"
  },
  {
    "text": "don't want to go too far with this idea like blow your minds completely but why doesn't it manage some fly IO apps or",
    "start": "5221800",
    "end": "5228480"
  },
  {
    "text": "why doesn't it manage maybe some DNS or why doesn't it manage like other things from the seed cluster rather than because right now the external DNS is",
    "start": "5228480",
    "end": "5235679"
  },
  {
    "text": "what we use in every cluster to manage its own DNS and that's okay we may need to do that but what about a top level",
    "start": "5235679",
    "end": "5242159"
  },
  {
    "text": "thing which then you know seeds everything else so that's something which I'm excited about well uh I'm",
    "start": "5242159",
    "end": "5249119"
  },
  {
    "text": "really looking forward to what we'll do together next year mua with all this stuff there's like so many improvements which we can drive I'm really keen on",
    "start": "5249119",
    "end": "5255880"
  },
  {
    "text": "that it's the first step but you as a listener what I would say is have a look",
    "start": "5255880",
    "end": "5261159"
  },
  {
    "text": "at the provider jet linode in the crossplay country BG um see if you know",
    "start": "5261159",
    "end": "5266480"
  },
  {
    "text": "it's helpful and uh Merry Christmas and happy New Year anything else to",
    "start": "5266480",
    "end": "5272679"
  },
  {
    "text": "add yeah it was it was great working with you for the last couple of days to get all this uh things done and yeah I'm",
    "start": "5272679",
    "end": "5280199"
  },
  {
    "text": "I'm honored to be here thank you than Christmas it's been my pleasure thank you very much see you next",
    "start": "5280199",
    "end": "5286560"
  },
  {
    "text": "year thank you for tuning in another episode of ship it this is just one of our podcasts for developers go to Chang",
    "start": "5287800",
    "end": "5295239"
  },
  {
    "text": "log.com for the rest you can join us by changel log.com",
    "start": "5295239",
    "end": "5301280"
  },
  {
    "text": "Community for free the only cost is happiness credits if you choose to not",
    "start": "5301280",
    "end": "5306920"
  },
  {
    "text": "interact with us there are no imposters in our slack everyone is welcome huge",
    "start": "5306920",
    "end": "5312480"
  },
  {
    "text": "thanks to our partners fastly launch darkley and lenoe thank you break master cylinder for all our awesome beats",
    "start": "5312480",
    "end": "5320239"
  },
  {
    "text": "that's it for this week see you next week actually there's one more thing thank you for the great feedback Alex",
    "start": "5320239",
    "end": "5326960"
  },
  {
    "text": "you're the reason why these episode outros will get extra love from now onwards keep shipping and improving",
    "start": "5326960",
    "end": "5333639"
  },
  {
    "text": "invest country is old [Music]",
    "start": "5333639",
    "end": "5350080"
  },
  {
    "text": "rated",
    "start": "5350080",
    "end": "5353080"
  }
]