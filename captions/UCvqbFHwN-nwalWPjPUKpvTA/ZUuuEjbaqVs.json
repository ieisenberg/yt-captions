[
  {
    "start": "0",
    "end": "25000"
  },
  {
    "text": "welcome everyone my name is daddy this",
    "start": "179",
    "end": "2820"
  },
  {
    "text": "is tava Chan",
    "start": "2820",
    "end": "3990"
  },
  {
    "text": "we are from Airbnb and we're gonna be",
    "start": "3990",
    "end": "6600"
  },
  {
    "text": "talking about custom controllers and how",
    "start": "6600",
    "end": "9450"
  },
  {
    "text": "we make use of them in our",
    "start": "9450",
    "end": "11070"
  },
  {
    "text": "infrastructure for those don't that",
    "start": "11070",
    "end": "13980"
  },
  {
    "text": "don't know about Airbnb or then be its",
    "start": "13980",
    "end": "15929"
  },
  {
    "text": "online marketplace for homes and",
    "start": "15929",
    "end": "18150"
  },
  {
    "text": "experiences you can find homes",
    "start": "18150",
    "end": "20810"
  },
  {
    "text": "apartments and all that sort of stuff on",
    "start": "20810",
    "end": "23039"
  },
  {
    "text": "Airbnb just a quick plug we are hiring",
    "start": "23039",
    "end": "28130"
  },
  {
    "start": "25000",
    "end": "49000"
  },
  {
    "text": "we are hiring for a lot of positions",
    "start": "28130",
    "end": "30420"
  },
  {
    "text": "infrastructure side the ability payments",
    "start": "30420",
    "end": "32790"
  },
  {
    "text": "mobile and it's a special time should",
    "start": "32790",
    "end": "35670"
  },
  {
    "text": "join our ability because we're basically",
    "start": "35670",
    "end": "37739"
  },
  {
    "text": "in the process of changing how",
    "start": "37739",
    "end": "39680"
  },
  {
    "text": "transforming how our entire",
    "start": "39680",
    "end": "41430"
  },
  {
    "text": "infrastructure works and we have offices",
    "start": "41430",
    "end": "44100"
  },
  {
    "text": "in San Francisco Portland Seattle",
    "start": "44100",
    "end": "45870"
  },
  {
    "text": "Beijing so you can pretty much work from",
    "start": "45870",
    "end": "48270"
  },
  {
    "text": "a lot of different places so one of the",
    "start": "48270",
    "end": "51329"
  },
  {
    "start": "49000",
    "end": "185000"
  },
  {
    "text": "first things are going to talk about",
    "start": "51329",
    "end": "52469"
  },
  {
    "text": "this why do we use kubernetes so air B&B",
    "start": "52469",
    "end": "56129"
  },
  {
    "text": "until a few years ago used to be a very",
    "start": "56129",
    "end": "59430"
  },
  {
    "text": "few monolith caps and like by mulleted",
    "start": "59430",
    "end": "62039"
  },
  {
    "text": "caps I really talking about a single app",
    "start": "62039",
    "end": "65369"
  },
  {
    "text": "with millions of lines of Ruby called",
    "start": "65369",
    "end": "67590"
  },
  {
    "text": "Rails based and we had them similar",
    "start": "67590",
    "end": "70500"
  },
  {
    "text": "small some small other services and we",
    "start": "70500",
    "end": "74070"
  },
  {
    "text": "are starting the process of breaking",
    "start": "74070",
    "end": "75900"
  },
  {
    "text": "that all apart and moving into a",
    "start": "75900",
    "end": "77939"
  },
  {
    "text": "services oriented architecture and we've",
    "start": "77939",
    "end": "80610"
  },
  {
    "text": "been doing this for some time and we",
    "start": "80610",
    "end": "82650"
  },
  {
    "text": "already have a few hundred services and",
    "start": "82650",
    "end": "85110"
  },
  {
    "text": "one big thing with those services that",
    "start": "85110",
    "end": "88290"
  },
  {
    "text": "we used to be a chef based so which it's",
    "start": "88290",
    "end": "92130"
  },
  {
    "text": "service would have its own like recipes",
    "start": "92130",
    "end": "94409"
  },
  {
    "text": "and everything chef and they would run",
    "start": "94409",
    "end": "96720"
  },
  {
    "text": "on their own ec2 host and that's very",
    "start": "96720",
    "end": "99720"
  },
  {
    "text": "very expensive because you end up with a",
    "start": "99720",
    "end": "101700"
  },
  {
    "text": "bunch of machines and we didn't have a",
    "start": "101700",
    "end": "104159"
  },
  {
    "text": "processor out to scale those someone had",
    "start": "104159",
    "end": "106680"
  },
  {
    "text": "to go manually launching the machines or",
    "start": "106680",
    "end": "108659"
  },
  {
    "text": "things or if it was taking let's say",
    "start": "108659",
    "end": "111329"
  },
  {
    "text": "different there was a peak used to have",
    "start": "111329",
    "end": "113369"
  },
  {
    "text": "the same number of machines we didn't",
    "start": "113369",
    "end": "115890"
  },
  {
    "text": "have anything like to automatically",
    "start": "115890",
    "end": "117600"
  },
  {
    "text": "placed hosts that died so we decided as",
    "start": "117600",
    "end": "121290"
  },
  {
    "text": "part of the service-oriented migration",
    "start": "121290",
    "end": "123570"
  },
  {
    "text": "so let's start moving those services",
    "start": "123570",
    "end": "125369"
  },
  {
    "text": "also into",
    "start": "125369",
    "end": "127070"
  },
  {
    "text": "kubernetes Melanie early during the",
    "start": "127070",
    "end": "130130"
  },
  {
    "text": "keynote talked about a little bit how we",
    "start": "130130",
    "end": "131840"
  },
  {
    "text": "deploy things on kubernetes but one of",
    "start": "131840",
    "end": "134569"
  },
  {
    "text": "the reasons we went with kubernetes I",
    "start": "134569",
    "end": "137030"
  },
  {
    "text": "would say that one our main driving was",
    "start": "137030",
    "end": "139430"
  },
  {
    "text": "actually cost like I said we had one",
    "start": "139430",
    "end": "141890"
  },
  {
    "text": "service a very serious",
    "start": "141890",
    "end": "143480"
  },
  {
    "text": "it means we couldn't pack as many",
    "start": "143480",
    "end": "145220"
  },
  {
    "text": "services as we wanted into a single host",
    "start": "145220",
    "end": "147740"
  },
  {
    "text": "so with kerbin ares we can probably more",
    "start": "147740",
    "end": "150890"
  },
  {
    "text": "better skilled those services let's say",
    "start": "150890",
    "end": "154550"
  },
  {
    "text": "most services are gonna probably going",
    "start": "154550",
    "end": "156319"
  },
  {
    "text": "to be using like one choose abused and a",
    "start": "156319",
    "end": "158330"
  },
  {
    "text": "few gigs of memory so we can basically",
    "start": "158330",
    "end": "160489"
  },
  {
    "text": "have a larger host and pack more bang",
    "start": "160489",
    "end": "163760"
  },
  {
    "text": "for the buck on those also another thing",
    "start": "163760",
    "end": "166820"
  },
  {
    "text": "that kubernetes providers is like self",
    "start": "166820",
    "end": "169280"
  },
  {
    "text": "feelings of my node i he automatically",
    "start": "169280",
    "end": "172100"
  },
  {
    "text": "migrates how the pods when you know then",
    "start": "172100",
    "end": "175100"
  },
  {
    "text": "we don't have to worry about that it's",
    "start": "175100",
    "end": "177350"
  },
  {
    "text": "basically unknown event and we can",
    "start": "177350",
    "end": "179600"
  },
  {
    "text": "actually even have like all the scaling",
    "start": "179600",
    "end": "181519"
  },
  {
    "text": "for certain services so that they can",
    "start": "181519",
    "end": "183320"
  },
  {
    "text": "scale up and down with traffic so let's",
    "start": "183320",
    "end": "187550"
  },
  {
    "start": "185000",
    "end": "219000"
  },
  {
    "text": "talk about what is actually a customer",
    "start": "187550",
    "end": "189170"
  },
  {
    "text": "truly a cousin controller is just a",
    "start": "189170",
    "end": "190820"
  },
  {
    "text": "component that is watching objects and",
    "start": "190820",
    "end": "193900"
  },
  {
    "text": "looking at what is the state of those",
    "start": "193900",
    "end": "196370"
  },
  {
    "text": "objects what is the current state of the",
    "start": "196370",
    "end": "198380"
  },
  {
    "text": "cluster and maybe doing modifications to",
    "start": "198380",
    "end": "201620"
  },
  {
    "text": "that state so that it reaches a desired",
    "start": "201620",
    "end": "203450"
  },
  {
    "text": "state so kubernetes is a declarative",
    "start": "203450",
    "end": "205940"
  },
  {
    "text": "day's assistance so you declare what is",
    "start": "205940",
    "end": "208670"
  },
  {
    "text": "the goal state and then there is a lot",
    "start": "208670",
    "end": "211280"
  },
  {
    "text": "of things",
    "start": "211280",
    "end": "211700"
  },
  {
    "text": "most of those are controllers that are",
    "start": "211700",
    "end": "213650"
  },
  {
    "text": "watching the state of the concent trying",
    "start": "213650",
    "end": "215299"
  },
  {
    "text": "to move this state should that desired",
    "start": "215299",
    "end": "217610"
  },
  {
    "text": "state so why do we use console",
    "start": "217610",
    "end": "221450"
  },
  {
    "text": "controllers at their B&B are mine used",
    "start": "221450",
    "end": "223790"
  },
  {
    "text": "for coastal controllers action",
    "start": "223790",
    "end": "224840"
  },
  {
    "text": "integrating coronaries with external",
    "start": "224840",
    "end": "227450"
  },
  {
    "text": "assistance for example one controller",
    "start": "227450",
    "end": "230709"
  },
  {
    "text": "that currently it's in criminality is",
    "start": "230709",
    "end": "234410"
  },
  {
    "text": "that for example if you have like an EOB",
    "start": "234410",
    "end": "236420"
  },
  {
    "text": "you want to have like a load balancer",
    "start": "236420",
    "end": "238100"
  },
  {
    "text": "Bursar's there is a controller somewhere",
    "start": "238100",
    "end": "240980"
  },
  {
    "text": "that basically goes and talks to AWS and",
    "start": "240980",
    "end": "243500"
  },
  {
    "text": "provisions that control it for you we",
    "start": "243500",
    "end": "245510"
  },
  {
    "text": "use that we extend that concept to more",
    "start": "245510",
    "end": "248120"
  },
  {
    "text": "things we use it for like 20 greatest",
    "start": "248120",
    "end": "250280"
  },
  {
    "text": "services cover E or for exemption",
    "start": "250280",
    "end": "253430"
  },
  {
    "text": "provision",
    "start": "253430",
    "end": "254390"
  },
  {
    "text": "to provision in the bless resources and",
    "start": "254390",
    "end": "257359"
  },
  {
    "text": "things like that and you can even use it",
    "start": "257359",
    "end": "259760"
  },
  {
    "text": "to this can make a lot of requirements",
    "start": "259760",
    "end": "263300"
  },
  {
    "text": "about how your objects should look like",
    "start": "263300",
    "end": "264830"
  },
  {
    "text": "and you can actually use it should do a",
    "start": "264830",
    "end": "266720"
  },
  {
    "text": "lot of validations you can use it to",
    "start": "266720",
    "end": "269060"
  },
  {
    "text": "validate your objects that they have the",
    "start": "269060",
    "end": "270890"
  },
  {
    "text": "required views that they've followed",
    "start": "270890",
    "end": "272570"
  },
  {
    "text": "best practices and another another",
    "start": "272570",
    "end": "277760"
  },
  {
    "start": "274000",
    "end": "304000"
  },
  {
    "text": "particular type of controller that we",
    "start": "277760",
    "end": "279590"
  },
  {
    "text": "use a lot is an admission control",
    "start": "279590",
    "end": "281300"
  },
  {
    "text": "admission control is basically it's a",
    "start": "281300",
    "end": "283790"
  },
  {
    "text": "controller that intercepts requests",
    "start": "283790",
    "end": "285860"
  },
  {
    "text": "after they had been authenticated and",
    "start": "285860",
    "end": "287720"
  },
  {
    "text": "authorized ated so like when you do a",
    "start": "287720",
    "end": "290090"
  },
  {
    "text": "crib CTL command you're talking to the",
    "start": "290090",
    "end": "291830"
  },
  {
    "text": "API server so that the mission",
    "start": "291830",
    "end": "293480"
  },
  {
    "text": "controller gets called for the API",
    "start": "293480",
    "end": "295100"
  },
  {
    "text": "server but only after it has been",
    "start": "295100",
    "end": "297620"
  },
  {
    "text": "authenticated and authorized it so the",
    "start": "297620",
    "end": "299330"
  },
  {
    "text": "request is basically identical so you",
    "start": "299330",
    "end": "301250"
  },
  {
    "text": "have access like username and things",
    "start": "301250",
    "end": "303290"
  },
  {
    "text": "like that why do we use admission",
    "start": "303290",
    "end": "305960"
  },
  {
    "start": "304000",
    "end": "387000"
  },
  {
    "text": "controls we said mission controllers for",
    "start": "305960",
    "end": "307910"
  },
  {
    "text": "actually a few different things but the",
    "start": "307910",
    "end": "310550"
  },
  {
    "text": "main one is actually for us to require a",
    "start": "310550",
    "end": "312530"
  },
  {
    "text": "standardization of our objects and when",
    "start": "312530",
    "end": "315860"
  },
  {
    "text": "I talk about objects when I'm talking",
    "start": "315860",
    "end": "317810"
  },
  {
    "text": "about things like even a pod object I'm",
    "start": "317810",
    "end": "320360"
  },
  {
    "text": "making sure that for example the pod",
    "start": "320360",
    "end": "322940"
  },
  {
    "text": "object has all the fields that are",
    "start": "322940",
    "end": "324560"
  },
  {
    "text": "required to be deployed within our",
    "start": "324560",
    "end": "326510"
  },
  {
    "text": "cluster we can all see we can and",
    "start": "326510",
    "end": "329560"
  },
  {
    "text": "initial controls they have to they have",
    "start": "329560",
    "end": "332200"
  },
  {
    "text": "validating and mutiny controllers so you",
    "start": "332200",
    "end": "336320"
  },
  {
    "text": "can actually for example validate monic",
    "start": "336320",
    "end": "338180"
  },
  {
    "text": "and you just just to check things in",
    "start": "338180",
    "end": "339740"
  },
  {
    "text": "your pods back and make sure that i",
    "start": "339740",
    "end": "341720"
  },
  {
    "text": "think there is a part is there or also",
    "start": "341720",
    "end": "344030"
  },
  {
    "text": "the mutating one you can actually use it",
    "start": "344030",
    "end": "346130"
  },
  {
    "text": "to modify things so for example you can",
    "start": "346130",
    "end": "348229"
  },
  {
    "text": "use it to inject sidecars in a pod and",
    "start": "348229",
    "end": "351770"
  },
  {
    "text": "that sort of stuff another thing we use",
    "start": "351770",
    "end": "355100"
  },
  {
    "text": "it for is that we can use it to secure",
    "start": "355100",
    "end": "357080"
  },
  {
    "text": "our cluster for example we can make sure",
    "start": "357080",
    "end": "359750"
  },
  {
    "text": "that if someone is trying to deploy like",
    "start": "359750",
    "end": "362390"
  },
  {
    "text": "there was a keynote that talked about",
    "start": "362390",
    "end": "363770"
  },
  {
    "text": "this someone could actually try to",
    "start": "363770",
    "end": "366200"
  },
  {
    "text": "deploy something from the internet to",
    "start": "366200",
    "end": "368000"
  },
  {
    "text": "create service accounts and things like",
    "start": "368000",
    "end": "369710"
  },
  {
    "text": "that so we use this we use the validate",
    "start": "369710",
    "end": "374060"
  },
  {
    "text": "across the controller should prevent",
    "start": "374060",
    "end": "375950"
  },
  {
    "text": "those things from happening so we want",
    "start": "375950",
    "end": "377990"
  },
  {
    "text": "people want our engineers should only be",
    "start": "377990",
    "end": "380240"
  },
  {
    "text": "able to deploy like blast applications",
    "start": "380240",
    "end": "383720"
  },
  {
    "text": "so we use admission controllers to check",
    "start": "383720",
    "end": "386000"
  },
  {
    "text": "for those things",
    "start": "386000",
    "end": "387699"
  },
  {
    "start": "387000",
    "end": "410000"
  },
  {
    "text": "so just a quick overview of that mission",
    "start": "387699",
    "end": "390199"
  },
  {
    "text": "controller that Mission Control is",
    "start": "390199",
    "end": "391639"
  },
  {
    "text": "operating before the object actually",
    "start": "391639",
    "end": "393680"
  },
  {
    "text": "gets persisted or created like before",
    "start": "393680",
    "end": "396680"
  },
  {
    "text": "you do any change to the changes so the",
    "start": "396680",
    "end": "400159"
  },
  {
    "text": "objects are are persisted so that's the",
    "start": "400159",
    "end": "403550"
  },
  {
    "text": "part where and the mission controller",
    "start": "403550",
    "end": "404809"
  },
  {
    "text": "works and then we have the custom",
    "start": "404809",
    "end": "406399"
  },
  {
    "text": "controllers they're basically operating",
    "start": "406399",
    "end": "408349"
  },
  {
    "text": "after those steps and I'm gonna hand",
    "start": "408349",
    "end": "411319"
  },
  {
    "start": "410000",
    "end": "429000"
  },
  {
    "text": "over to Steven to talk about our",
    "start": "411319",
    "end": "413839"
  },
  {
    "text": "specific use cases for controllers",
    "start": "413839",
    "end": "415699"
  },
  {
    "text": "thanks Duffy yeah so now that we've",
    "start": "415699",
    "end": "418969"
  },
  {
    "text": "covered the high-level like concepts and",
    "start": "418969",
    "end": "421490"
  },
  {
    "text": "motivations we'll go through some of the",
    "start": "421490",
    "end": "424279"
  },
  {
    "text": "existing use cases that we got from",
    "start": "424279",
    "end": "426110"
  },
  {
    "text": "writing admission controllers and custom",
    "start": "426110",
    "end": "428719"
  },
  {
    "text": "controllers so let's go through how a",
    "start": "428719",
    "end": "431479"
  },
  {
    "text": "year's admission controller first of all",
    "start": "431479",
    "end": "433219"
  },
  {
    "text": "as Debbie mentioned you can use it for",
    "start": "433219",
    "end": "435619"
  },
  {
    "text": "validation and mutation however we",
    "start": "435619",
    "end": "438289"
  },
  {
    "text": "currently only use it for validation we",
    "start": "438289",
    "end": "440089"
  },
  {
    "text": "find that it's preferable to keep all",
    "start": "440089",
    "end": "442610"
  },
  {
    "text": "the transformation of objects before",
    "start": "442610",
    "end": "445580"
  },
  {
    "text": "apply time using cube gen we what are we",
    "start": "445580",
    "end": "450379"
  },
  {
    "text": "validate it for we validate the presence",
    "start": "450379",
    "end": "453259"
  },
  {
    "text": "of standard annotations on all pods that",
    "start": "453259",
    "end": "456379"
  },
  {
    "text": "are created in cluster so these have",
    "start": "456379",
    "end": "460669"
  },
  {
    "text": "links to for example our CIC DUI so you",
    "start": "460669",
    "end": "464749"
  },
  {
    "text": "can see when a particular pod was or",
    "start": "464749",
    "end": "469819"
  },
  {
    "text": "service was deployed last and who",
    "start": "469819",
    "end": "472339"
  },
  {
    "text": "deployed it you have project owner",
    "start": "472339",
    "end": "475580"
  },
  {
    "text": "contact information so it's got a",
    "start": "475580",
    "end": "477050"
  },
  {
    "text": "database of mapping services to team",
    "start": "477050",
    "end": "480169"
  },
  {
    "text": "owners and then finally we've got links",
    "start": "480169",
    "end": "484159"
  },
  {
    "text": "to project repos and get Shaw so you can",
    "start": "484159",
    "end": "486499"
  },
  {
    "text": "view the source code that was",
    "start": "486499",
    "end": "489969"
  },
  {
    "text": "corresponds to the creation of pod and",
    "start": "489969",
    "end": "492800"
  },
  {
    "text": "because we have our deploy and",
    "start": "492800",
    "end": "497229"
  },
  {
    "text": "configuration alongside our code it's",
    "start": "497229",
    "end": "500509"
  },
  {
    "text": "easy to view everything at once I should",
    "start": "500509",
    "end": "502759"
  },
  {
    "text": "also mention that because of the project",
    "start": "502759",
    "end": "506629"
  },
  {
    "text": "owner contact information annotation we",
    "start": "506629",
    "end": "509479"
  },
  {
    "text": "can use this not only for debugging",
    "start": "509479",
    "end": "512169"
  },
  {
    "text": "incidents but also sending out automated",
    "start": "512169",
    "end": "515750"
  },
  {
    "text": "alerts so",
    "start": "515750",
    "end": "516700"
  },
  {
    "text": "we can alert the owners of that",
    "start": "516700",
    "end": "518620"
  },
  {
    "text": "particular service if their part is",
    "start": "518620",
    "end": "520300"
  },
  {
    "text": "consuming more than their requested",
    "start": "520300",
    "end": "522490"
  },
  {
    "text": "amount of CPU or has experience in",
    "start": "522490",
    "end": "524650"
  },
  {
    "text": "Health memory we also use admission",
    "start": "524650",
    "end": "528340"
  },
  {
    "start": "526000",
    "end": "577000"
  },
  {
    "text": "controllers to secure and create enforce",
    "start": "528340",
    "end": "532930"
  },
  {
    "text": "best practices on a cluster so we",
    "start": "532930",
    "end": "537900"
  },
  {
    "text": "enforce that all the container images on",
    "start": "537900",
    "end": "541480"
  },
  {
    "text": "pods come from our single trusted",
    "start": "541480",
    "end": "544630"
  },
  {
    "text": "registry source we also prevent",
    "start": "544630",
    "end": "548850"
  },
  {
    "text": "configurations that aren't meant to run",
    "start": "548850",
    "end": "550750"
  },
  {
    "text": "on our clusters so for example we don't",
    "start": "550750",
    "end": "555010"
  },
  {
    "text": "allow the balancer type services right",
    "start": "555010",
    "end": "556870"
  },
  {
    "text": "now because our clusters are in internal",
    "start": "556870",
    "end": "560620"
  },
  {
    "text": "facing we don't want them to create",
    "start": "560620",
    "end": "562990"
  },
  {
    "text": "external endpoints finally we just use",
    "start": "562990",
    "end": "568270"
  },
  {
    "text": "it as a prevention of for guns such as",
    "start": "568270",
    "end": "570180"
  },
  {
    "text": "having developers deployed their",
    "start": "570180",
    "end": "573010"
  },
  {
    "text": "development services to production",
    "start": "573010",
    "end": "574510"
  },
  {
    "text": "clusters yeah so we've gone through",
    "start": "574510",
    "end": "578940"
  },
  {
    "start": "577000",
    "end": "695000"
  },
  {
    "text": "admission controllers now we're going to",
    "start": "578940",
    "end": "580690"
  },
  {
    "text": "talk about some custom controllers that",
    "start": "580690",
    "end": "582190"
  },
  {
    "text": "we build so first off we've got any",
    "start": "582190",
    "end": "584500"
  },
  {
    "text": "service discovery controller so why did",
    "start": "584500",
    "end": "586630"
  },
  {
    "text": "we build this we built this to integrate",
    "start": "586630",
    "end": "588550"
  },
  {
    "text": "kubernetes with our cluster external",
    "start": "588550",
    "end": "590290"
  },
  {
    "text": "systems in this case we built it to",
    "start": "590290",
    "end": "593170"
  },
  {
    "text": "integrate with smart stack which is our",
    "start": "593170",
    "end": "595500"
  },
  {
    "text": "existing service discovery framework so",
    "start": "595500",
    "end": "599620"
  },
  {
    "text": "it smart stack in case you're not",
    "start": "599620",
    "end": "601000"
  },
  {
    "text": "familiar with it it's an open-source",
    "start": "601000",
    "end": "602830"
  },
  {
    "text": "service discovery framework it's got a",
    "start": "602830",
    "end": "604690"
  },
  {
    "text": "few components it's got the zookeeper",
    "start": "604690",
    "end": "608530"
  },
  {
    "text": "which is a distributed key-value store",
    "start": "608530",
    "end": "610320"
  },
  {
    "text": "on the client side you've got synapse",
    "start": "610320",
    "end": "613060"
  },
  {
    "text": "which is polling zookeeper for for",
    "start": "613060",
    "end": "618670"
  },
  {
    "text": "backends for particular service it uses",
    "start": "618670",
    "end": "620650"
  },
  {
    "text": "that list to configure a proxy which",
    "start": "620650",
    "end": "623620"
  },
  {
    "text": "does actual load balancing when the",
    "start": "623620",
    "end": "626200"
  },
  {
    "text": "client service makes requests on the",
    "start": "626200",
    "end": "627900"
  },
  {
    "text": "server side you've got nerve which",
    "start": "627900",
    "end": "631240"
  },
  {
    "text": "continually health checks the server",
    "start": "631240",
    "end": "633340"
  },
  {
    "text": "side and ensures that if the service is",
    "start": "633340",
    "end": "637330"
  },
  {
    "text": "healthy its back-end is built one",
    "start": "637330",
    "end": "639040"
  },
  {
    "text": "zookeeper and if it's unhealthy",
    "start": "639040",
    "end": "640600"
  },
  {
    "text": "that's remove from the zookeeper so this",
    "start": "640600",
    "end": "642610"
  },
  {
    "text": "is what it looks like before kubernetes",
    "start": "642610",
    "end": "644290"
  },
  {
    "text": "so what does it look like inside of",
    "start": "644290",
    "end": "646000"
  },
  {
    "text": "kubernetes so we need a few more pieces",
    "start": "646000",
    "end": "649540"
  },
  {
    "text": "of information",
    "start": "649540",
    "end": "650200"
  },
  {
    "text": "which we get from the API server we",
    "start": "650200",
    "end": "652960"
  },
  {
    "text": "implement this as a controller sidecar",
    "start": "652960",
    "end": "654820"
  },
  {
    "text": "within each pod so what that does is",
    "start": "654820",
    "end": "657100"
  },
  {
    "text": "it's reading the note port service",
    "start": "657100",
    "end": "662260"
  },
  {
    "text": "information previously in smart stack we",
    "start": "662260",
    "end": "666250"
  },
  {
    "text": "expected that ports were relatively",
    "start": "666250",
    "end": "668260"
  },
  {
    "text": "statically allocated in kubernetes when",
    "start": "668260",
    "end": "670720"
  },
  {
    "text": "you create an airport service that port",
    "start": "670720",
    "end": "672370"
  },
  {
    "text": "is randomly allocated so you need to",
    "start": "672370",
    "end": "673780"
  },
  {
    "text": "fetch that information and you also need",
    "start": "673780",
    "end": "676990"
  },
  {
    "text": "the current host that the pod is running",
    "start": "676990",
    "end": "680380"
  },
  {
    "text": "on and so you see here the controller",
    "start": "680380",
    "end": "684430"
  },
  {
    "text": "sidecar has replaced the role of nerve",
    "start": "684430",
    "end": "685900"
  },
  {
    "text": "it still does health checks to determine",
    "start": "685900",
    "end": "688210"
  },
  {
    "text": "the readiness of the serving pod and",
    "start": "688210",
    "end": "690370"
  },
  {
    "text": "then removes it or adds it from the",
    "start": "690370",
    "end": "694240"
  },
  {
    "text": "zookeeper accordingly",
    "start": "694240",
    "end": "695670"
  },
  {
    "start": "695000",
    "end": "711000"
  },
  {
    "text": "so to summarize the objects that the",
    "start": "695670",
    "end": "700120"
  },
  {
    "text": "this controller watches our services",
    "start": "700120",
    "end": "702070"
  },
  {
    "text": "pods and notes the goal state is to add",
    "start": "702070",
    "end": "705370"
  },
  {
    "text": "or remove to zqa the zookeeper based on",
    "start": "705370",
    "end": "708280"
  },
  {
    "text": "the health status of the pod next up",
    "start": "708280",
    "end": "712360"
  },
  {
    "start": "711000",
    "end": "770000"
  },
  {
    "text": "we've got what we call the deployment",
    "start": "712360",
    "end": "714730"
  },
  {
    "text": "pruner controller and so why did we",
    "start": "714730",
    "end": "716560"
  },
  {
    "text": "build this one we wanted to add",
    "start": "716560",
    "end": "717820"
  },
  {
    "text": "additional behavior on top of",
    "start": "717820",
    "end": "719710"
  },
  {
    "text": "deployments so what we want to do is",
    "start": "719710",
    "end": "723600"
  },
  {
    "text": "enforce max applaude lifespan while",
    "start": "723600",
    "end": "726700"
  },
  {
    "text": "respecting max unavailable count so on",
    "start": "726700",
    "end": "729070"
  },
  {
    "text": "all our clusters we enforce that pods",
    "start": "729070",
    "end": "732210"
  },
  {
    "text": "are not around for more than 14 days but",
    "start": "732210",
    "end": "736390"
  },
  {
    "text": "if a service has been running 14 days",
    "start": "736390",
    "end": "738400"
  },
  {
    "text": "without any restart of pods we don't",
    "start": "738400",
    "end": "740200"
  },
  {
    "text": "want to immediately take down that",
    "start": "740200",
    "end": "741550"
  },
  {
    "text": "service so what it does is it watches",
    "start": "741550",
    "end": "743230"
  },
  {
    "text": "the appointments pods and notes and then",
    "start": "743230",
    "end": "745300"
  },
  {
    "text": "it will continuously delete pods as",
    "start": "745300",
    "end": "748990"
  },
  {
    "text": "they've reached expiration and there's",
    "start": "748990",
    "end": "750730"
  },
  {
    "text": "also a natural extension point for if we",
    "start": "750730",
    "end": "752980"
  },
  {
    "text": "want to enforce any other policy around",
    "start": "752980",
    "end": "754810"
  },
  {
    "text": "like pot expiry or if we want to add",
    "start": "754810",
    "end": "758140"
  },
  {
    "text": "like new new criteria to admission",
    "start": "758140",
    "end": "762490"
  },
  {
    "text": "control but the pods are already running",
    "start": "762490",
    "end": "764670"
  },
  {
    "text": "we can delete those as well",
    "start": "764670",
    "end": "769740"
  },
  {
    "start": "770000",
    "end": "840000"
  },
  {
    "text": "third we've got the no problem",
    "start": "771490",
    "end": "773260"
  },
  {
    "text": "controller again we're trying to layer",
    "start": "773260",
    "end": "775570"
  },
  {
    "text": "behavior on top of existing API objects",
    "start": "775570",
    "end": "778160"
  },
  {
    "text": "so what does the no problem controller",
    "start": "778160",
    "end": "780530"
  },
  {
    "text": "do well primarily watches nodes and it's",
    "start": "780530",
    "end": "783380"
  },
  {
    "text": "responsible for providing another layer",
    "start": "783380",
    "end": "787070"
  },
  {
    "text": "of self-healing on top of our clusters",
    "start": "787070",
    "end": "789970"
  },
  {
    "text": "so it works in antennae with the no",
    "start": "789970",
    "end": "795830"
  },
  {
    "text": "problem detector which is an Austrian",
    "start": "795830",
    "end": "797300"
  },
  {
    "text": "criminales project what the no problem",
    "start": "797300",
    "end": "799070"
  },
  {
    "text": "detector does is it health checks the",
    "start": "799070",
    "end": "803840"
  },
  {
    "text": "underlying minion nodes and then sets",
    "start": "803840",
    "end": "806090"
  },
  {
    "text": "conditions to the nodes according to the",
    "start": "806090",
    "end": "809240"
  },
  {
    "text": "results of the help checks what it",
    "start": "809240",
    "end": "810650"
  },
  {
    "text": "doesn't do is provide any remediating",
    "start": "810650",
    "end": "813080"
  },
  {
    "text": "action so it's still up to you to add",
    "start": "813080",
    "end": "816350"
  },
  {
    "text": "that additional top so no problem",
    "start": "816350",
    "end": "819050"
  },
  {
    "text": "controller will check those conditions",
    "start": "819050",
    "end": "820700"
  },
  {
    "text": "and add taints to nodes that have",
    "start": "820700",
    "end": "822820"
  },
  {
    "text": "undesirable conditions and so we can use",
    "start": "822820",
    "end": "825410"
  },
  {
    "text": "this for enforcing things like the",
    "start": "825410",
    "end": "827540"
  },
  {
    "text": "presence of data dog or cubed I am",
    "start": "827540",
    "end": "829940"
  },
  {
    "text": "daemon set pods alright finally we've",
    "start": "829940",
    "end": "834740"
  },
  {
    "text": "been experimenting with using meta",
    "start": "834740",
    "end": "836750"
  },
  {
    "text": "controller as a general purpose pattern",
    "start": "836750",
    "end": "838940"
  },
  {
    "text": "for resilient architectures so inner",
    "start": "838940",
    "end": "842300"
  },
  {
    "start": "840000",
    "end": "873000"
  },
  {
    "text": "keynote my colleague Melanie talked",
    "start": "842300",
    "end": "844070"
  },
  {
    "text": "about using meta controller for creating",
    "start": "844070",
    "end": "847460"
  },
  {
    "text": "AWS custom resource definitions and then",
    "start": "847460",
    "end": "851200"
  },
  {
    "text": "replicating those to provision",
    "start": "851200",
    "end": "854510"
  },
  {
    "text": "I am roles or policies we also use it",
    "start": "854510",
    "end": "858530"
  },
  {
    "text": "for things like alerts so you can create",
    "start": "858530",
    "end": "862910"
  },
  {
    "text": "an alerts CRD and then the alerts",
    "start": "862910",
    "end": "866480"
  },
  {
    "text": "controller will ensure that the alert",
    "start": "866480",
    "end": "868820"
  },
  {
    "text": "definitions are created in our external",
    "start": "868820",
    "end": "871070"
  },
  {
    "text": "monitoring system okay now that we've",
    "start": "871070",
    "end": "874700"
  },
  {
    "start": "873000",
    "end": "882000"
  },
  {
    "text": "gone through some practical and some of",
    "start": "874700",
    "end": "877040"
  },
  {
    "text": "the controllers that we use we can go",
    "start": "877040",
    "end": "878900"
  },
  {
    "text": "through practical controller tips when",
    "start": "878900",
    "end": "881000"
  },
  {
    "text": "you're writing your own controllers so",
    "start": "881000",
    "end": "882950"
  },
  {
    "start": "882000",
    "end": "952000"
  },
  {
    "text": "tip number one always autoscale your",
    "start": "882950",
    "end": "886250"
  },
  {
    "text": "controllers as your cluster size grows",
    "start": "886250",
    "end": "890170"
  },
  {
    "text": "if you're using the go client your",
    "start": "890170",
    "end": "893780"
  },
  {
    "text": "you're going to be maintaining a local",
    "start": "893780",
    "end": "895280"
  },
  {
    "text": "cache of your objects and so it's easy",
    "start": "895280",
    "end": "897560"
  },
  {
    "text": "for that to creep up on memory and CPU",
    "start": "897560",
    "end": "900890"
  },
  {
    "text": "usage as you expand the cluster so in",
    "start": "900890",
    "end": "903890"
  },
  {
    "text": "addition you can also use labels and",
    "start": "903890",
    "end": "905810"
  },
  {
    "text": "selectors to optimize your data fetch",
    "start": "905810",
    "end": "909710"
  },
  {
    "text": "and there are also a few like options",
    "start": "909710",
    "end": "912410"
  },
  {
    "text": "for doing this auto-scaling",
    "start": "912410",
    "end": "914420"
  },
  {
    "text": "can use vertical pot autoscaler or pot",
    "start": "914420",
    "end": "917149"
  },
  {
    "text": "nanny which is sidecar but one important",
    "start": "917149",
    "end": "920990"
  },
  {
    "text": "thing here to note is that part nanny",
    "start": "920990",
    "end": "922339"
  },
  {
    "text": "itself is kind of controller it's",
    "start": "922339",
    "end": "924050"
  },
  {
    "text": "watching the nodes of the cluster and",
    "start": "924050",
    "end": "927860"
  },
  {
    "text": "when we had a case where we were using a",
    "start": "927860",
    "end": "933589"
  },
  {
    "text": "hipster and running pod nanny as a",
    "start": "933589",
    "end": "936290"
  },
  {
    "text": "sidecar",
    "start": "936290",
    "end": "937700"
  },
  {
    "text": "we found that hipster was unavailable we",
    "start": "937700",
    "end": "941209"
  },
  {
    "text": "thought that squared keeps to his auto",
    "start": "941209",
    "end": "942890"
  },
  {
    "text": "scaling but actually pod Nana pod nanny",
    "start": "942890",
    "end": "945620"
  },
  {
    "text": "was out of memory at that point so that",
    "start": "945620",
    "end": "949010"
  },
  {
    "text": "made the service unavailable tip number",
    "start": "949010",
    "end": "952970"
  },
  {
    "start": "952000",
    "end": "1034000"
  },
  {
    "text": "two definitely use a go client so",
    "start": "952970",
    "end": "956060"
  },
  {
    "text": "kubernetes supports several different",
    "start": "956060",
    "end": "958730"
  },
  {
    "text": "languages for interacting with API but",
    "start": "958730",
    "end": "962990"
  },
  {
    "text": "the go client you get the latest",
    "start": "962990",
    "end": "964459"
  },
  {
    "text": "features from extreme yet informers",
    "start": "964459",
    "end": "966410"
  },
  {
    "text": "which are basically web framework for",
    "start": "966410",
    "end": "969220"
  },
  {
    "text": "calling your calling your controller",
    "start": "969220",
    "end": "971870"
  },
  {
    "text": "indexers which are the local cache of",
    "start": "971870",
    "end": "974270"
  },
  {
    "text": "objects we got leader election for high",
    "start": "974270",
    "end": "978020"
  },
  {
    "text": "availability",
    "start": "978020",
    "end": "978610"
  },
  {
    "text": "event spam filter so one thing to note",
    "start": "978610",
    "end": "982160"
  },
  {
    "text": "with larger clusters is that high",
    "start": "982160",
    "end": "985250"
  },
  {
    "text": "numbers of events can sometimes",
    "start": "985250",
    "end": "986959"
  },
  {
    "text": "overwhelm and CDs this prevents you from",
    "start": "986959",
    "end": "991330"
  },
  {
    "text": "doing that",
    "start": "991330",
    "end": "992870"
  },
  {
    "text": "if your controllers omitting events you",
    "start": "992870",
    "end": "996290"
  },
  {
    "text": "also have more client sets so that you",
    "start": "996290",
    "end": "998240"
  },
  {
    "text": "can easily test your controller by",
    "start": "998240",
    "end": "1001150"
  },
  {
    "text": "submitting fake objects that you've",
    "start": "1001150",
    "end": "1003010"
  },
  {
    "text": "created you can also import from other",
    "start": "1003010",
    "end": "1007380"
  },
  {
    "text": "libraries such as API machinery or like",
    "start": "1007380",
    "end": "1010089"
  },
  {
    "text": "API server depending on whatever utility",
    "start": "1010089",
    "end": "1013930"
  },
  {
    "text": "functions you might need and the bottom",
    "start": "1013930",
    "end": "1016450"
  },
  {
    "text": "of this slide there are a couple links",
    "start": "1016450",
    "end": "1018160"
  },
  {
    "text": "that I found helpful when first learning",
    "start": "1018160",
    "end": "1021040"
  },
  {
    "text": "about custom controllers how to write",
    "start": "1021040",
    "end": "1022900"
  },
  {
    "text": "them in particular the first link has a",
    "start": "1022900",
    "end": "1028000"
  },
  {
    "text": "really helpful diagram for understanding",
    "start": "1028000",
    "end": "1029709"
  },
  {
    "text": "the interaction between the Informer's",
    "start": "1029709",
    "end": "1031540"
  },
  {
    "text": "indexers and so on in deco client tip",
    "start": "1031540",
    "end": "1034870"
  },
  {
    "start": "1034000",
    "end": "1082000"
  },
  {
    "text": "number three there's really no silver",
    "start": "1034870",
    "end": "1036100"
  },
  {
    "text": "bullet what I mean by that is that",
    "start": "1036100",
    "end": "1039120"
  },
  {
    "text": "controllers are great",
    "start": "1039120",
    "end": "1041730"
  },
  {
    "text": "kubernetes is great they only bring you",
    "start": "1041730",
    "end": "1044188"
  },
  {
    "text": "part waited the solution for spreading",
    "start": "1044189",
    "end": "1049950"
  },
  {
    "text": "the control loop pattern",
    "start": "1049950",
    "end": "1052500"
  },
  {
    "text": "to a large number of people you can",
    "start": "1052500",
    "end": "1053820"
  },
  {
    "text": "lower the barrier with tools like meta",
    "start": "1053820",
    "end": "1056010"
  },
  {
    "text": "controller but at the end of the day you",
    "start": "1056010",
    "end": "1058529"
  },
  {
    "text": "still have to have a deep understanding",
    "start": "1058529",
    "end": "1059970"
  },
  {
    "text": "of the underlying system be unafraid to",
    "start": "1059970",
    "end": "1062460"
  },
  {
    "text": "dive into the source code if necessary",
    "start": "1062460",
    "end": "1064380"
  },
  {
    "text": "or and be careful with your experiments",
    "start": "1064380",
    "end": "1067769"
  },
  {
    "text": "so with that thank you we hope you'll",
    "start": "1067769",
    "end": "1071130"
  },
  {
    "text": "enjoy writing your own custom",
    "start": "1071130",
    "end": "1074490"
  },
  {
    "text": "controllers and want to find your",
    "start": "1074490",
    "end": "1076049"
  },
  {
    "text": "admission controllers",
    "start": "1076049",
    "end": "1078480"
  },
  {
    "text": "[Applause]",
    "start": "1078480",
    "end": "1083990"
  }
]