[
  {
    "start": "0",
    "end": "19000"
  },
  {
    "text": "cool so uh hello",
    "start": "0",
    "end": "2159"
  },
  {
    "text": "i'm adithya i work at tetrate and i'm",
    "start": "2159",
    "end": "4319"
  },
  {
    "text": "also a senior in high school and",
    "start": "4319",
    "end": "7680"
  },
  {
    "text": "hey i'm john howard i'm a software",
    "start": "7680",
    "end": "9679"
  },
  {
    "text": "engineer at google i've been working on",
    "start": "9679",
    "end": "11599"
  },
  {
    "text": "the east joe control plane which is a",
    "start": "11599",
    "end": "13759"
  },
  {
    "text": "non-void control plan for about three",
    "start": "13759",
    "end": "15519"
  },
  {
    "text": "years now",
    "start": "15519",
    "end": "17920"
  },
  {
    "text": "cool",
    "start": "17920",
    "end": "19439"
  },
  {
    "start": "19000",
    "end": "19000"
  },
  {
    "text": "okay so in this talk we'll cover",
    "start": "19439",
    "end": "21119"
  },
  {
    "text": "basically um",
    "start": "21119",
    "end": "22800"
  },
  {
    "text": "uh delta xds so what istio is first of",
    "start": "22800",
    "end": "25199"
  },
  {
    "text": "all um",
    "start": "25199",
    "end": "26320"
  },
  {
    "text": "we're also going to cover",
    "start": "26320",
    "end": "28000"
  },
  {
    "text": "what we've done to our control plane and",
    "start": "28000",
    "end": "30080"
  },
  {
    "text": "why that wasn't sufficient for uh",
    "start": "30080",
    "end": "31840"
  },
  {
    "text": "scaling it up",
    "start": "31840",
    "end": "33440"
  },
  {
    "text": "uh we're going to talk about the",
    "start": "33440",
    "end": "34640"
  },
  {
    "text": "solution that we think is good is delta",
    "start": "34640",
    "end": "36960"
  },
  {
    "text": "xts and how that helps with the scaling",
    "start": "36960",
    "end": "40399"
  },
  {
    "text": "we're going to talk about how we",
    "start": "40399",
    "end": "41360"
  },
  {
    "text": "implemented it like the specific details",
    "start": "41360",
    "end": "43280"
  },
  {
    "text": "and the problems and solutions we faced",
    "start": "43280",
    "end": "46000"
  },
  {
    "text": "um with implementing delta xcs",
    "start": "46000",
    "end": "49120"
  },
  {
    "text": "and we're also going to talk about the",
    "start": "49120",
    "end": "50320"
  },
  {
    "text": "future of delta xds within istio",
    "start": "50320",
    "end": "53039"
  },
  {
    "text": "so that's a lot to cover",
    "start": "53039",
    "end": "55360"
  },
  {
    "start": "55000",
    "end": "55000"
  },
  {
    "text": "okay so first of all we have to",
    "start": "55360",
    "end": "56719"
  },
  {
    "text": "understand what is istio i'm sure most",
    "start": "56719",
    "end": "58559"
  },
  {
    "text": "of you know but it is a service mesh",
    "start": "58559",
    "end": "60559"
  },
  {
    "text": "that uses envoy as its backbone so it",
    "start": "60559",
    "end": "62719"
  },
  {
    "text": "uses envoy as a sidecar proxy",
    "start": "62719",
    "end": "65119"
  },
  {
    "text": "and also as a gateway",
    "start": "65119",
    "end": "68320"
  },
  {
    "text": "we can see that configuration is",
    "start": "68320",
    "end": "70400"
  },
  {
    "text": "distributed to the proxies via the",
    "start": "70400",
    "end": "73360"
  },
  {
    "text": "control plane",
    "start": "73360",
    "end": "75119"
  },
  {
    "text": "over the network there's a",
    "start": "75119",
    "end": "77200"
  },
  {
    "text": "component in the istio control plane",
    "start": "77200",
    "end": "78799"
  },
  {
    "text": "called pilot which does all the",
    "start": "78799",
    "end": "79920"
  },
  {
    "text": "configuration",
    "start": "79920",
    "end": "81600"
  },
  {
    "text": "management so that's how configuration",
    "start": "81600",
    "end": "83520"
  },
  {
    "text": "is sent",
    "start": "83520",
    "end": "84720"
  },
  {
    "text": "to all the proxies and we'll talk about",
    "start": "84720",
    "end": "86400"
  },
  {
    "text": "that as well",
    "start": "86400",
    "end": "89040"
  },
  {
    "start": "89000",
    "end": "89000"
  },
  {
    "text": "so then the other big thing is what is",
    "start": "89280",
    "end": "91119"
  },
  {
    "text": "xds so xds is essentially um it stands",
    "start": "91119",
    "end": "94400"
  },
  {
    "text": "for like this wild card discovery",
    "start": "94400",
    "end": "96079"
  },
  {
    "text": "service where um like you can have",
    "start": "96079",
    "end": "99759"
  },
  {
    "text": "it's a way to like propagate",
    "start": "99759",
    "end": "100960"
  },
  {
    "text": "configuration to envoys uh dynamically",
    "start": "100960",
    "end": "104159"
  },
  {
    "text": "uh whereas",
    "start": "104159",
    "end": "105439"
  },
  {
    "text": "the alternative would be statically like",
    "start": "105439",
    "end": "107200"
  },
  {
    "text": "hot restarting envoy with the",
    "start": "107200",
    "end": "109280"
  },
  {
    "text": "configuration file",
    "start": "109280",
    "end": "111439"
  },
  {
    "text": "it's either implemented over the file",
    "start": "111439",
    "end": "113360"
  },
  {
    "text": "system so you'd set up a file file",
    "start": "113360",
    "end": "114799"
  },
  {
    "text": "system subscription or you can do over",
    "start": "114799",
    "end": "116960"
  },
  {
    "text": "the network it's usually the case with",
    "start": "116960",
    "end": "119040"
  },
  {
    "text": "the rest or grpc and it's usually a grpc",
    "start": "119040",
    "end": "121840"
  },
  {
    "text": "bi-directional stream",
    "start": "121840",
    "end": "123840"
  },
  {
    "text": "so that's what xds is",
    "start": "123840",
    "end": "125990"
  },
  {
    "text": "[Music]",
    "start": "125990",
    "end": "128399"
  },
  {
    "start": "126000",
    "end": "126000"
  },
  {
    "text": "so over the years as ego has become more",
    "start": "128399",
    "end": "130640"
  },
  {
    "text": "and more popular we've seen that users",
    "start": "130640",
    "end": "132879"
  },
  {
    "text": "are also deploying it in larger and",
    "start": "132879",
    "end": "134720"
  },
  {
    "text": "larger environments and we've kind of",
    "start": "134720",
    "end": "136640"
  },
  {
    "text": "had a cat and mouse game of catching up",
    "start": "136640",
    "end": "139040"
  },
  {
    "text": "as people are scaling up",
    "start": "139040",
    "end": "141520"
  },
  {
    "text": "so in the early days of istio if you",
    "start": "141520",
    "end": "143599"
  },
  {
    "text": "were to deploy you know even a moderate",
    "start": "143599",
    "end": "145599"
  },
  {
    "text": "size mesh with say 100 workloads",
    "start": "145599",
    "end": "148640"
  },
  {
    "text": "control plane would often times be using",
    "start": "148640",
    "end": "150319"
  },
  {
    "text": "multiple cpus just to service that",
    "start": "150319",
    "end": "153280"
  },
  {
    "text": "whereas our users are trying to deploy",
    "start": "153280",
    "end": "155599"
  },
  {
    "text": "in environments with",
    "start": "155599",
    "end": "157360"
  },
  {
    "text": "you know hundreds of thousands of pods",
    "start": "157360",
    "end": "158959"
  },
  {
    "text": "and some of the larger cases",
    "start": "158959",
    "end": "161280"
  },
  {
    "text": "in many cases because we support",
    "start": "161280",
    "end": "162959"
  },
  {
    "text": "multi-cluster as well we're not even",
    "start": "162959",
    "end": "164800"
  },
  {
    "text": "bound by the size limits imposed by",
    "start": "164800",
    "end": "167040"
  },
  {
    "text": "kubernetes and so",
    "start": "167040",
    "end": "168640"
  },
  {
    "text": "there's really no bound on the scale",
    "start": "168640",
    "end": "170879"
  },
  {
    "text": "that our customers may require",
    "start": "170879",
    "end": "173519"
  },
  {
    "text": "so over the years we've invested a ton",
    "start": "173519",
    "end": "175120"
  },
  {
    "text": "of effort into optimizing the control",
    "start": "175120",
    "end": "177040"
  },
  {
    "text": "plane",
    "start": "177040",
    "end": "178000"
  },
  {
    "text": "we've done a variety of things to do",
    "start": "178000",
    "end": "179599"
  },
  {
    "text": "this",
    "start": "179599",
    "end": "180879"
  },
  {
    "text": "a lot of work we've done is just in",
    "start": "180879",
    "end": "182800"
  },
  {
    "text": "micro optimizations of our code",
    "start": "182800",
    "end": "185519"
  },
  {
    "text": "you know reducing allocations where we",
    "start": "185519",
    "end": "187120"
  },
  {
    "text": "can",
    "start": "187120",
    "end": "188159"
  },
  {
    "text": "splitting up a loop where we where it's",
    "start": "188159",
    "end": "190239"
  },
  {
    "text": "able",
    "start": "190239",
    "end": "191200"
  },
  {
    "text": "uh one of the big changes was you know",
    "start": "191200",
    "end": "193040"
  },
  {
    "text": "some changes to how we encode our",
    "start": "193040",
    "end": "194400"
  },
  {
    "text": "protobufs because all this configuration",
    "start": "194400",
    "end": "196720"
  },
  {
    "text": "is sent over grpc so a lot of time is",
    "start": "196720",
    "end": "198720"
  },
  {
    "text": "spent on marshalling and unmarshaling",
    "start": "198720",
    "end": "200400"
  },
  {
    "text": "those uh protobuf objects",
    "start": "200400",
    "end": "203680"
  },
  {
    "text": "some other things we've done are try and",
    "start": "203680",
    "end": "205599"
  },
  {
    "text": "make our control plane smarter",
    "start": "205599",
    "end": "208480"
  },
  {
    "text": "so when a configuration update comes in",
    "start": "208480",
    "end": "210799"
  },
  {
    "text": "say like a kubernetes service changed",
    "start": "210799",
    "end": "213360"
  },
  {
    "text": "we would typically just send recompute",
    "start": "213360",
    "end": "215920"
  },
  {
    "text": "all the xds configuration and send it to",
    "start": "215920",
    "end": "217760"
  },
  {
    "text": "all the proxies",
    "start": "217760",
    "end": "219280"
  },
  {
    "text": "a lot of times that's pretty wasteful",
    "start": "219280",
    "end": "220720"
  },
  {
    "text": "there's a lot of updates that can happen",
    "start": "220720",
    "end": "222239"
  },
  {
    "text": "to an object that don't actually change",
    "start": "222239",
    "end": "224000"
  },
  {
    "text": "the configuration",
    "start": "224000",
    "end": "226080"
  },
  {
    "text": "and so we've added some you know logic",
    "start": "226080",
    "end": "228319"
  },
  {
    "text": "to skip pushes when they're not",
    "start": "228319",
    "end": "230480"
  },
  {
    "text": "necessary which is also made a huge",
    "start": "230480",
    "end": "232319"
  },
  {
    "text": "improvement",
    "start": "232319",
    "end": "233680"
  },
  {
    "text": "we've also done some other things we've",
    "start": "233680",
    "end": "235360"
  },
  {
    "text": "changed the actual configuration we send",
    "start": "235360",
    "end": "237439"
  },
  {
    "text": "to make it smaller",
    "start": "237439",
    "end": "238959"
  },
  {
    "text": "not for behavioral changes in envoy but",
    "start": "238959",
    "end": "241040"
  },
  {
    "text": "just to improve the performance",
    "start": "241040",
    "end": "243519"
  },
  {
    "text": "uh we've started doing caching of",
    "start": "243519",
    "end": "245920"
  },
  {
    "text": "pre-marshalled xds responses so we don't",
    "start": "245920",
    "end": "248159"
  },
  {
    "text": "have to go through the full",
    "start": "248159",
    "end": "250159"
  },
  {
    "text": "generate marshall and send we can just",
    "start": "250159",
    "end": "252879"
  },
  {
    "text": "skip to the send",
    "start": "252879",
    "end": "254480"
  },
  {
    "text": "and we even started doing some more",
    "start": "254480",
    "end": "255920"
  },
  {
    "text": "segmentation of configurations that the",
    "start": "255920",
    "end": "257759"
  },
  {
    "text": "proxies don't see all the configuration",
    "start": "257759",
    "end": "259759"
  },
  {
    "text": "they see only a smaller subset which is",
    "start": "259759",
    "end": "261600"
  },
  {
    "text": "of course more efficient to optimize or",
    "start": "261600",
    "end": "263600"
  },
  {
    "text": "to send",
    "start": "263600",
    "end": "265840"
  },
  {
    "text": "so despite all that we still haven't",
    "start": "265840",
    "end": "268479"
  },
  {
    "start": "266000",
    "end": "266000"
  },
  {
    "text": "really met our performance goals um",
    "start": "268479",
    "end": "271040"
  },
  {
    "text": "you know while on a",
    "start": "271040",
    "end": "272800"
  },
  {
    "text": "larger size clusters with say a thousand",
    "start": "272800",
    "end": "274960"
  },
  {
    "text": "pods uh it's usually no problem for",
    "start": "274960",
    "end": "276720"
  },
  {
    "text": "istio",
    "start": "276720",
    "end": "278000"
  },
  {
    "text": "as we start to get into the mega",
    "start": "278000",
    "end": "279360"
  },
  {
    "text": "clusters with hundreds of thousands of",
    "start": "279360",
    "end": "280960"
  },
  {
    "text": "endpoints we're still having issues with",
    "start": "280960",
    "end": "282479"
  },
  {
    "text": "scalability of the control plane",
    "start": "282479",
    "end": "284639"
  },
  {
    "text": "uh fundamentally what that comes down to",
    "start": "284639",
    "end": "286560"
  },
  {
    "text": "is just the math of these of the scaling",
    "start": "286560",
    "end": "289440"
  },
  {
    "text": "so if we look at what impacts the load",
    "start": "289440",
    "end": "292160"
  },
  {
    "text": "of the control plane there's really",
    "start": "292160",
    "end": "293520"
  },
  {
    "text": "three main factors",
    "start": "293520",
    "end": "295199"
  },
  {
    "text": "the first is the number of workloads",
    "start": "295199",
    "end": "297520"
  },
  {
    "text": "so for every workload connected to the",
    "start": "297520",
    "end": "299199"
  },
  {
    "text": "mesh we need to generate configuration",
    "start": "299199",
    "end": "300960"
  },
  {
    "text": "for it and keep that up to date",
    "start": "300960",
    "end": "303520"
  },
  {
    "text": "the next one is the resource size and",
    "start": "303520",
    "end": "305680"
  },
  {
    "text": "this is actually impacted directly by",
    "start": "305680",
    "end": "307759"
  },
  {
    "text": "the amount of workloads because the",
    "start": "307759",
    "end": "309280"
  },
  {
    "text": "configuration contains information about",
    "start": "309280",
    "end": "311199"
  },
  {
    "text": "how to connect to each other workload",
    "start": "311199",
    "end": "313759"
  },
  {
    "text": "such as all the list of all the other p",
    "start": "313759",
    "end": "315520"
  },
  {
    "text": "addresses but it's actually",
    "start": "315520",
    "end": "317440"
  },
  {
    "text": "quite a bit more information than just",
    "start": "317440",
    "end": "318800"
  },
  {
    "text": "ip addresses so this adds up quite a bit",
    "start": "318800",
    "end": "321840"
  },
  {
    "text": "finally the third factor is the rate of",
    "start": "321840",
    "end": "324080"
  },
  {
    "text": "updates",
    "start": "324080",
    "end": "325280"
  },
  {
    "text": "this also is typically",
    "start": "325280",
    "end": "327120"
  },
  {
    "text": "tied to the number of workloads just by",
    "start": "327120",
    "end": "329759"
  },
  {
    "text": "laws of random chance that as you have",
    "start": "329759",
    "end": "331840"
  },
  {
    "text": "more and more workloads it's more likely",
    "start": "331840",
    "end": "333680"
  },
  {
    "text": "that one of them is going to scale up",
    "start": "333680",
    "end": "335039"
  },
  {
    "text": "scale down be restarted for an update et",
    "start": "335039",
    "end": "337120"
  },
  {
    "text": "cetera",
    "start": "337120",
    "end": "338479"
  },
  {
    "text": "so putting all that together we kind of",
    "start": "338479",
    "end": "340000"
  },
  {
    "text": "have a polynomial scaling problem",
    "start": "340000",
    "end": "342800"
  },
  {
    "text": "which is obviously not good",
    "start": "342800",
    "end": "345039"
  },
  {
    "text": "so",
    "start": "345039",
    "end": "346240"
  },
  {
    "start": "346000",
    "end": "346000"
  },
  {
    "text": "to put that into perspective on a",
    "start": "346240",
    "end": "349039"
  },
  {
    "text": "a cluster with say a thousand pods for",
    "start": "349039",
    "end": "351199"
  },
  {
    "text": "example if we had a one megabyte",
    "start": "351199",
    "end": "353360"
  },
  {
    "text": "resource size",
    "start": "353360",
    "end": "354880"
  },
  {
    "text": "which is something that is not unheard",
    "start": "354880",
    "end": "356960"
  },
  {
    "text": "of in our our control plan",
    "start": "356960",
    "end": "358880"
  },
  {
    "text": "implementation",
    "start": "358880",
    "end": "360319"
  },
  {
    "text": "anytime a pod changes we would need to",
    "start": "360319",
    "end": "362720"
  },
  {
    "text": "generate and send over the wire a",
    "start": "362720",
    "end": "364560"
  },
  {
    "text": "gigabyte of data",
    "start": "364560",
    "end": "366479"
  },
  {
    "text": "that is not just a gigabyte of garbage",
    "start": "366479",
    "end": "368479"
  },
  {
    "text": "data either we need to go generate these",
    "start": "368479",
    "end": "370240"
  },
  {
    "text": "protobufs and then we encode them so",
    "start": "370240",
    "end": "372880"
  },
  {
    "text": "there's a lot of cpu spent doing that as",
    "start": "372880",
    "end": "374960"
  },
  {
    "text": "then we also have to garbage collect all",
    "start": "374960",
    "end": "376560"
  },
  {
    "text": "that gigabyte of data",
    "start": "376560",
    "end": "378560"
  },
  {
    "text": "and send it over the wire",
    "start": "378560",
    "end": "380960"
  },
  {
    "text": "in the case of a rolling update say",
    "start": "380960",
    "end": "382880"
  },
  {
    "text": "we're you know rolling out a new update",
    "start": "382880",
    "end": "384720"
  },
  {
    "text": "to all 1000 pods",
    "start": "384720",
    "end": "386400"
  },
  {
    "text": "it can add up to a terabyte of data that",
    "start": "386400",
    "end": "388080"
  },
  {
    "text": "we're sending over the wire throughout",
    "start": "388080",
    "end": "389440"
  },
  {
    "text": "the rollout",
    "start": "389440",
    "end": "390880"
  },
  {
    "text": "that is quite a bit of data",
    "start": "390880",
    "end": "392800"
  },
  {
    "text": "you know we're not a cdn that's designed",
    "start": "392800",
    "end": "394720"
  },
  {
    "text": "to be serving",
    "start": "394720",
    "end": "396240"
  },
  {
    "text": "a high amount of data like this and so",
    "start": "396240",
    "end": "399440"
  },
  {
    "text": "this is imposing pretty serious issues",
    "start": "399440",
    "end": "402479"
  },
  {
    "text": "so what we kind of realized was that no",
    "start": "402479",
    "end": "404319"
  },
  {
    "text": "matter how fast we make the control",
    "start": "404319",
    "end": "406000"
  },
  {
    "text": "plane",
    "start": "406000",
    "end": "406800"
  },
  {
    "text": "even if we really made it instantaneous",
    "start": "406800",
    "end": "408800"
  },
  {
    "text": "to generate the configuration",
    "start": "408800",
    "end": "411120"
  },
  {
    "text": "you know with the scaling problem like",
    "start": "411120",
    "end": "412479"
  },
  {
    "text": "this it doesn't really matter we can't",
    "start": "412479",
    "end": "414960"
  },
  {
    "text": "keep sending like a terabyte of data",
    "start": "414960",
    "end": "416880"
  },
  {
    "text": "over the wire when there's a rolling",
    "start": "416880",
    "end": "418560"
  },
  {
    "text": "update",
    "start": "418560",
    "end": "419599"
  },
  {
    "text": "otherwise we're just not going to be",
    "start": "419599",
    "end": "420720"
  },
  {
    "text": "able to scale to where we need to be",
    "start": "420720",
    "end": "424319"
  },
  {
    "start": "424000",
    "end": "424000"
  },
  {
    "text": "yeah so",
    "start": "425520",
    "end": "426639"
  },
  {
    "text": "i'll talk about",
    "start": "426639",
    "end": "428240"
  },
  {
    "text": "the current type of xds we run on and so",
    "start": "428240",
    "end": "430960"
  },
  {
    "text": "configuration is distributed through xds",
    "start": "430960",
    "end": "434479"
  },
  {
    "text": "so the way we do it right now is to the",
    "start": "434479",
    "end": "436240"
  },
  {
    "text": "state of the world um essentially what",
    "start": "436240",
    "end": "437919"
  },
  {
    "text": "this means is that for every single",
    "start": "437919",
    "end": "439919"
  },
  {
    "text": "proxy that cares we have to send every",
    "start": "439919",
    "end": "441759"
  },
  {
    "text": "single resource that it needs to run",
    "start": "441759",
    "end": "444160"
  },
  {
    "text": "every single time",
    "start": "444160",
    "end": "445680"
  },
  {
    "text": "so that can be quite a bit of data as",
    "start": "445680",
    "end": "447280"
  },
  {
    "text": "john mentioned",
    "start": "447280",
    "end": "448880"
  },
  {
    "text": "so if in this example you have three",
    "start": "448880",
    "end": "450720"
  },
  {
    "text": "clusters only cluster two changes you",
    "start": "450720",
    "end": "452880"
  },
  {
    "text": "still have to send all three clusters",
    "start": "452880",
    "end": "454560"
  },
  {
    "text": "this is a really trivial example usually",
    "start": "454560",
    "end": "456639"
  },
  {
    "text": "it's a lot more clusters um",
    "start": "456639",
    "end": "459039"
  },
  {
    "text": "so the control plane and envoy need to",
    "start": "459039",
    "end": "461039"
  },
  {
    "text": "process these configs so it's kind of",
    "start": "461039",
    "end": "462880"
  },
  {
    "text": "like both of them need to process it",
    "start": "462880",
    "end": "465360"
  },
  {
    "text": "even if only like a few of them are",
    "start": "465360",
    "end": "466800"
  },
  {
    "text": "changing",
    "start": "466800",
    "end": "468000"
  },
  {
    "text": "and this can cause combinatorial",
    "start": "468000",
    "end": "469599"
  },
  {
    "text": "explosions during these updates uh",
    "start": "469599",
    "end": "471840"
  },
  {
    "text": "trigging triggering data by gigabytes of",
    "start": "471840",
    "end": "474160"
  },
  {
    "text": "data even if only one service is",
    "start": "474160",
    "end": "475599"
  },
  {
    "text": "changing",
    "start": "475599",
    "end": "477199"
  },
  {
    "text": "so that's state of the world and that's",
    "start": "477199",
    "end": "479280"
  },
  {
    "text": "where we are right now with istio um",
    "start": "479280",
    "end": "482240"
  },
  {
    "text": "but what we're working on is delta xds",
    "start": "482240",
    "end": "484720"
  },
  {
    "start": "483000",
    "end": "483000"
  },
  {
    "text": "which is the solution we think uh so",
    "start": "484720",
    "end": "487599"
  },
  {
    "text": "this is also incremental xds and this",
    "start": "487599",
    "end": "489520"
  },
  {
    "text": "allows us to only send the resources",
    "start": "489520",
    "end": "492000"
  },
  {
    "text": "that changed um to envoy so in this",
    "start": "492000",
    "end": "495360"
  },
  {
    "text": "example if only if only cluster two",
    "start": "495360",
    "end": "497680"
  },
  {
    "text": "changes are the three clusters you only",
    "start": "497680",
    "end": "499680"
  },
  {
    "text": "have to send cluster two uh this seems",
    "start": "499680",
    "end": "501919"
  },
  {
    "text": "like the intuitive way to do it like",
    "start": "501919",
    "end": "503520"
  },
  {
    "text": "it's just if only that cluster changes",
    "start": "503520",
    "end": "505520"
  },
  {
    "text": "you should only be able to send that one",
    "start": "505520",
    "end": "507360"
  },
  {
    "text": "uh we implemented it with state of the",
    "start": "507360",
    "end": "509199"
  },
  {
    "text": "world and a lot of control planes do",
    "start": "509199",
    "end": "510800"
  },
  {
    "text": "because",
    "start": "510800",
    "end": "511840"
  },
  {
    "text": "it's easy and b it's reliable",
    "start": "511840",
    "end": "514399"
  },
  {
    "text": "so that's why we did it that way but now",
    "start": "514399",
    "end": "516320"
  },
  {
    "text": "we're trying to move it to delta xds",
    "start": "516320",
    "end": "518880"
  },
  {
    "text": "and so again this dramatically decreases",
    "start": "518880",
    "end": "521279"
  },
  {
    "text": "the configuration we have to send over",
    "start": "521279",
    "end": "522640"
  },
  {
    "text": "the wire and then we'll go over some",
    "start": "522640",
    "end": "524399"
  },
  {
    "text": "benchmarks as well um",
    "start": "524399",
    "end": "527680"
  },
  {
    "start": "527000",
    "end": "527000"
  },
  {
    "text": "but yeah i just want to go over like",
    "start": "527680",
    "end": "528959"
  },
  {
    "text": "some of the key differences in the",
    "start": "528959",
    "end": "530560"
  },
  {
    "text": "request response rendezvous between the",
    "start": "530560",
    "end": "532080"
  },
  {
    "text": "control plane and envoy so with the",
    "start": "532080",
    "end": "534560"
  },
  {
    "text": "state of the world um you use but you",
    "start": "534560",
    "end": "537040"
  },
  {
    "text": "can specify a bunch of resource names",
    "start": "537040",
    "end": "538880"
  },
  {
    "text": "that you want um envoy usually we'll",
    "start": "538880",
    "end": "541200"
  },
  {
    "text": "just say i want all the clusters and",
    "start": "541200",
    "end": "543040"
  },
  {
    "text": "it'll just say that that will mean that",
    "start": "543040",
    "end": "544800"
  },
  {
    "text": "i want a subscription to every single",
    "start": "544800",
    "end": "547519"
  },
  {
    "text": "cluster",
    "start": "547519",
    "end": "548880"
  },
  {
    "text": "that i care about",
    "start": "548880",
    "end": "550399"
  },
  {
    "text": "and the response will contain all these",
    "start": "550399",
    "end": "552000"
  },
  {
    "text": "clusters",
    "start": "552000",
    "end": "553680"
  },
  {
    "text": "and",
    "start": "553680",
    "end": "554480"
  },
  {
    "text": "like john said this is a lot of data but",
    "start": "554480",
    "end": "556399"
  },
  {
    "text": "with delta",
    "start": "556399",
    "end": "558320"
  },
  {
    "text": "it's basically the same for the request",
    "start": "558320",
    "end": "559760"
  },
  {
    "text": "it'll just subscribe to all the clusters",
    "start": "559760",
    "end": "561360"
  },
  {
    "text": "but with the response like it'll only",
    "start": "561360",
    "end": "563279"
  },
  {
    "text": "send what changed",
    "start": "563279",
    "end": "565120"
  },
  {
    "text": "so in the resources field whereas",
    "start": "565120",
    "end": "566880"
  },
  {
    "text": "previously you'd have all the resources",
    "start": "566880",
    "end": "568800"
  },
  {
    "text": "now you only have like if anything's",
    "start": "568800",
    "end": "570959"
  },
  {
    "text": "added and if any resources were removed",
    "start": "570959",
    "end": "573519"
  },
  {
    "text": "uh then you can send those as well the",
    "start": "573519",
    "end": "576320"
  },
  {
    "text": "names of those resources and envoy will",
    "start": "576320",
    "end": "578080"
  },
  {
    "text": "remove it internally",
    "start": "578080",
    "end": "580160"
  },
  {
    "text": "so yeah that's the way",
    "start": "580160",
    "end": "581760"
  },
  {
    "text": "the request response works for these two",
    "start": "581760",
    "end": "583680"
  },
  {
    "text": "methods",
    "start": "583680",
    "end": "585360"
  },
  {
    "start": "585000",
    "end": "585000"
  },
  {
    "text": "enabling delta xds within envoy is",
    "start": "585360",
    "end": "587760"
  },
  {
    "text": "really simple you can see it's just an",
    "start": "587760",
    "end": "589600"
  },
  {
    "text": "api configuration change from grpc to",
    "start": "589600",
    "end": "592320"
  },
  {
    "text": "delta grpc",
    "start": "592320",
    "end": "593920"
  },
  {
    "text": "so it's really simple you just put that",
    "start": "593920",
    "end": "595279"
  },
  {
    "text": "in your envelope configuration to start",
    "start": "595279",
    "end": "596640"
  },
  {
    "text": "envoy and now it starts listening or",
    "start": "596640",
    "end": "598640"
  },
  {
    "text": "looking for the delta api",
    "start": "598640",
    "end": "600800"
  },
  {
    "text": "um go control plane which is a control",
    "start": "600800",
    "end": "602959"
  },
  {
    "text": "plane that i think one of the uh",
    "start": "602959",
    "end": "604800"
  },
  {
    "text": "speakers talked about uh support cell to",
    "start": "604800",
    "end": "606880"
  },
  {
    "text": "xds out of the box and we'll talk about",
    "start": "606880",
    "end": "608640"
  },
  {
    "text": "how that happens",
    "start": "608640",
    "end": "610000"
  },
  {
    "text": "um but yeah so if you're using go",
    "start": "610000",
    "end": "611839"
  },
  {
    "text": "control plane uh you can just enable",
    "start": "611839",
    "end": "613440"
  },
  {
    "text": "delta xds and you're good uh no",
    "start": "613440",
    "end": "615360"
  },
  {
    "text": "additional configuration needed",
    "start": "615360",
    "end": "617600"
  },
  {
    "text": "um",
    "start": "617600",
    "end": "618010"
  },
  {
    "text": "[Music]",
    "start": "618010",
    "end": "619360"
  },
  {
    "text": "yeah so now we'll go over the go control",
    "start": "619360",
    "end": "620880"
  },
  {
    "start": "620000",
    "end": "620000"
  },
  {
    "text": "plane implementation um and this is",
    "start": "620880",
    "end": "623120"
  },
  {
    "text": "important to understand the contrast",
    "start": "623120",
    "end": "624800"
  },
  {
    "text": "with istio's implementation",
    "start": "624800",
    "end": "626880"
  },
  {
    "text": "so the way it works with go control",
    "start": "626880",
    "end": "628640"
  },
  {
    "text": "plane is that like",
    "start": "628640",
    "end": "630240"
  },
  {
    "text": "users of the go control plane library",
    "start": "630240",
    "end": "632000"
  },
  {
    "text": "will provide a snapshot to um",
    "start": "632000",
    "end": "634130"
  },
  {
    "text": "[Music]",
    "start": "634130",
    "end": "635200"
  },
  {
    "text": "to go control plane and that snapshot",
    "start": "635200",
    "end": "637200"
  },
  {
    "text": "will be served to the proxies um and so",
    "start": "637200",
    "end": "640000"
  },
  {
    "text": "this snapshot consists of all the",
    "start": "640000",
    "end": "641440"
  },
  {
    "text": "resources that",
    "start": "641440",
    "end": "642880"
  },
  {
    "text": "the proxies need to care about",
    "start": "642880",
    "end": "645519"
  },
  {
    "text": "and the key point here is that the",
    "start": "645519",
    "end": "648640"
  },
  {
    "text": "computation of the snapshot and the",
    "start": "648640",
    "end": "651519"
  },
  {
    "text": "serving of the snapshot are completely",
    "start": "651519",
    "end": "653200"
  },
  {
    "text": "decoupled",
    "start": "653200",
    "end": "654640"
  },
  {
    "text": "so it's not that like one triggers the",
    "start": "654640",
    "end": "657120"
  },
  {
    "text": "other",
    "start": "657120",
    "end": "658160"
  },
  {
    "text": "the snapshot generation happens and then",
    "start": "658160",
    "end": "660000"
  },
  {
    "text": "whatever the product whenever the",
    "start": "660000",
    "end": "661519"
  },
  {
    "text": "proxies need the data it is served to",
    "start": "661519",
    "end": "663040"
  },
  {
    "text": "them",
    "start": "663040",
    "end": "664000"
  },
  {
    "text": "um and so this makes it really easy to",
    "start": "664000",
    "end": "666880"
  },
  {
    "text": "either do state of the world or delta",
    "start": "666880",
    "end": "668399"
  },
  {
    "text": "xds because um if you want state of the",
    "start": "668399",
    "end": "670800"
  },
  {
    "text": "world just send the snapshot and if you",
    "start": "670800",
    "end": "672560"
  },
  {
    "text": "want delta xds you can store the old",
    "start": "672560",
    "end": "674800"
  },
  {
    "text": "snapshot and then when you get a new",
    "start": "674800",
    "end": "676800"
  },
  {
    "text": "snapshot you just diff them you get the",
    "start": "676800",
    "end": "678640"
  },
  {
    "text": "deltas and then that'll be the deltas",
    "start": "678640",
    "end": "680480"
  },
  {
    "text": "that the proxies care about",
    "start": "680480",
    "end": "682240"
  },
  {
    "text": "um so that's the way go control plane",
    "start": "682240",
    "end": "683680"
  },
  {
    "text": "does it",
    "start": "683680",
    "end": "686000"
  },
  {
    "start": "685000",
    "end": "685000"
  },
  {
    "text": "so incoming istio uh so we don't store",
    "start": "686480",
    "end": "689680"
  },
  {
    "text": "any snapshots in memory at all ever um",
    "start": "689680",
    "end": "692399"
  },
  {
    "text": "because",
    "start": "692399",
    "end": "693519"
  },
  {
    "text": "it'd just be too many um if we were to",
    "start": "693519",
    "end": "695760"
  },
  {
    "text": "do that we'd have to store a different",
    "start": "695760",
    "end": "697600"
  },
  {
    "text": "snapshot for every single proxy whereas",
    "start": "697600",
    "end": "699600"
  },
  {
    "text": "with go control plane it's just one",
    "start": "699600",
    "end": "701120"
  },
  {
    "text": "snapshot for all the proxies",
    "start": "701120",
    "end": "703680"
  },
  {
    "text": "and so this would lead to like what",
    "start": "703680",
    "end": "706079"
  },
  {
    "text": "gigabytes of in-memory data and that's",
    "start": "706079",
    "end": "708480"
  },
  {
    "text": "relying on that so we can't really do",
    "start": "708480",
    "end": "710639"
  },
  {
    "text": "that instead we do configuration",
    "start": "710639",
    "end": "713040"
  },
  {
    "text": "generation on the fly",
    "start": "713040",
    "end": "714720"
  },
  {
    "text": "so what this means is that whenever we",
    "start": "714720",
    "end": "716240"
  },
  {
    "text": "get a request",
    "start": "716240",
    "end": "717680"
  },
  {
    "text": "uh from a proxy saying hey i want this",
    "start": "717680",
    "end": "719839"
  },
  {
    "text": "resource type or something",
    "start": "719839",
    "end": "722480"
  },
  {
    "text": "we will generate that for them on demand",
    "start": "722480",
    "end": "724720"
  },
  {
    "text": "and then send it back to the proxy",
    "start": "724720",
    "end": "726800"
  },
  {
    "text": "on a per proxy basis so the re so the",
    "start": "726800",
    "end": "729519"
  },
  {
    "text": "response like the resources will be",
    "start": "729519",
    "end": "730959"
  },
  {
    "text": "different for every single uh proxy uh",
    "start": "730959",
    "end": "733600"
  },
  {
    "text": "because their visibility is different",
    "start": "733600",
    "end": "736240"
  },
  {
    "text": "um and so",
    "start": "736240",
    "end": "737760"
  },
  {
    "text": "basically uh because we can't store the",
    "start": "737760",
    "end": "740399"
  },
  {
    "text": "snapshots of these resources in memory",
    "start": "740399",
    "end": "743040"
  },
  {
    "text": "we have defined a different way of doing",
    "start": "743040",
    "end": "745279"
  },
  {
    "text": "delta xds",
    "start": "745279",
    "end": "747279"
  },
  {
    "text": "and we'll go over the way we do that",
    "start": "747279",
    "end": "750000"
  },
  {
    "text": "but yeah so the key point with istio is",
    "start": "750000",
    "end": "752000"
  },
  {
    "text": "that the config generation and serving",
    "start": "752000",
    "end": "754079"
  },
  {
    "text": "is completely",
    "start": "754079",
    "end": "755600"
  },
  {
    "text": "coupled so it's when you get a request",
    "start": "755600",
    "end": "758240"
  },
  {
    "text": "then config is generated and then it's",
    "start": "758240",
    "end": "759760"
  },
  {
    "text": "served it's not like it's stored",
    "start": "759760",
    "end": "761279"
  },
  {
    "text": "somewhere",
    "start": "761279",
    "end": "762240"
  },
  {
    "text": "okay",
    "start": "762240",
    "end": "764320"
  },
  {
    "start": "764000",
    "end": "764000"
  },
  {
    "text": "um okay so our initial implementation uh",
    "start": "764320",
    "end": "767120"
  },
  {
    "text": "for the delta api was just literally",
    "start": "767120",
    "end": "769600"
  },
  {
    "text": "taking the state of the world generation",
    "start": "769600",
    "end": "771200"
  },
  {
    "text": "and sticking it on to the delta api",
    "start": "771200",
    "end": "774720"
  },
  {
    "text": "so if you used istio 110 and enabled",
    "start": "774720",
    "end": "777519"
  },
  {
    "text": "delta xds i'm sorry you didn't get any",
    "start": "777519",
    "end": "779680"
  },
  {
    "text": "performance improvements because",
    "start": "779680",
    "end": "781839"
  },
  {
    "text": "well we didn't send any deltas it was",
    "start": "781839",
    "end": "784160"
  },
  {
    "text": "just",
    "start": "784160",
    "end": "785200"
  },
  {
    "text": "state of the role generation over the",
    "start": "785200",
    "end": "787360"
  },
  {
    "text": "delta api",
    "start": "787360",
    "end": "788720"
  },
  {
    "text": "and this was just in an effort to get",
    "start": "788720",
    "end": "790399"
  },
  {
    "text": "the core infrastructure in place for",
    "start": "790399",
    "end": "792000"
  },
  {
    "text": "delta xcs without rewriting the entire",
    "start": "792000",
    "end": "794240"
  },
  {
    "text": "configuration generation",
    "start": "794240",
    "end": "796079"
  },
  {
    "text": "pipeline",
    "start": "796079",
    "end": "797519"
  },
  {
    "text": "so yeah so here you can see that",
    "start": "797519",
    "end": "799519"
  },
  {
    "text": "even if one of the clusters changes on",
    "start": "799519",
    "end": "801120"
  },
  {
    "text": "the it'll be on the delta api",
    "start": "801120",
    "end": "803360"
  },
  {
    "text": "all three clusters will still be sent",
    "start": "803360",
    "end": "805440"
  },
  {
    "text": "for the initial prototype",
    "start": "805440",
    "end": "808480"
  },
  {
    "start": "809000",
    "end": "809000"
  },
  {
    "text": "john we'll talk about problem in",
    "start": "809120",
    "end": "810320"
  },
  {
    "text": "solution",
    "start": "810320",
    "end": "812000"
  },
  {
    "text": "yeah so once we implemented the initial",
    "start": "812000",
    "end": "814079"
  },
  {
    "text": "delta xds you know we were all very",
    "start": "814079",
    "end": "816399"
  },
  {
    "text": "happy pat ourselves on the back and then",
    "start": "816399",
    "end": "818720"
  },
  {
    "text": "quickly realized there was a lot of",
    "start": "818720",
    "end": "820079"
  },
  {
    "text": "issues with it",
    "start": "820079",
    "end": "821440"
  },
  {
    "text": "so the implementation it passed all of",
    "start": "821440",
    "end": "823279"
  },
  {
    "text": "our tests which are",
    "start": "823279",
    "end": "824720"
  },
  {
    "text": "reasonably robust and so we had a lot of",
    "start": "824720",
    "end": "827440"
  },
  {
    "text": "confidence in it but as we started to go",
    "start": "827440",
    "end": "830160"
  },
  {
    "text": "into actually optimizing delta xds",
    "start": "830160",
    "end": "832320"
  },
  {
    "text": "rather than just kind of the state of",
    "start": "832320",
    "end": "833839"
  },
  {
    "text": "the world over delta xds",
    "start": "833839",
    "end": "836079"
  },
  {
    "text": "we found all sorts of issues some of",
    "start": "836079",
    "end": "837680"
  },
  {
    "text": "them very obvious",
    "start": "837680",
    "end": "839120"
  },
  {
    "text": "and we were very confused because",
    "start": "839120",
    "end": "841279"
  },
  {
    "text": "everything seemed to work",
    "start": "841279",
    "end": "843040"
  },
  {
    "text": "and what we realized is that there's a",
    "start": "843040",
    "end": "844560"
  },
  {
    "text": "lot of ways that you can have a control",
    "start": "844560",
    "end": "846079"
  },
  {
    "text": "plane that is totally broken but also",
    "start": "846079",
    "end": "848240"
  },
  {
    "text": "works correctly in envoy so for example",
    "start": "848240",
    "end": "850880"
  },
  {
    "text": "we found a bug where in every single",
    "start": "850880",
    "end": "852959"
  },
  {
    "text": "response for eds we were telling onward",
    "start": "852959",
    "end": "855519"
  },
  {
    "text": "to remove every endpoint",
    "start": "855519",
    "end": "857360"
  },
  {
    "text": "obviously that seems horrible but it",
    "start": "857360",
    "end": "859199"
  },
  {
    "text": "turns out that envoy actually ignores",
    "start": "859199",
    "end": "860800"
  },
  {
    "text": "the removed resources for endpoints",
    "start": "860800",
    "end": "863920"
  },
  {
    "text": "which is because it has a parent",
    "start": "863920",
    "end": "865120"
  },
  {
    "text": "resource the cluster",
    "start": "865120",
    "end": "868079"
  },
  {
    "text": "another example is that when we we",
    "start": "868079",
    "end": "870160"
  },
  {
    "text": "occasionally fail to remove a resource",
    "start": "870160",
    "end": "872240"
  },
  {
    "text": "resource at all",
    "start": "872240",
    "end": "873600"
  },
  {
    "text": "and that's generally fine we're not",
    "start": "873600",
    "end": "876160"
  },
  {
    "text": "really bothered by extra clusters in",
    "start": "876160",
    "end": "878240"
  },
  {
    "text": "general uh but it does leak a lot of",
    "start": "878240",
    "end": "880240"
  },
  {
    "text": "memory and wastes a ton of resources in",
    "start": "880240",
    "end": "882160"
  },
  {
    "text": "both envoy and the control plane and so",
    "start": "882160",
    "end": "884639"
  },
  {
    "text": "at this point you know obviously we",
    "start": "884639",
    "end": "886000"
  },
  {
    "text": "fixed these bugs but we were worried",
    "start": "886000",
    "end": "887600"
  },
  {
    "text": "about the general problem how do we",
    "start": "887600",
    "end": "889360"
  },
  {
    "text": "ensure that our delta xds implementation",
    "start": "889360",
    "end": "891519"
  },
  {
    "text": "is as robust as our old one",
    "start": "891519",
    "end": "894000"
  },
  {
    "text": "and so what we came up with was sort of",
    "start": "894000",
    "end": "895600"
  },
  {
    "text": "this dry run mode",
    "start": "895600",
    "end": "897440"
  },
  {
    "start": "896000",
    "end": "896000"
  },
  {
    "text": "so what we would do is that for each",
    "start": "897440",
    "end": "898720"
  },
  {
    "text": "request",
    "start": "898720",
    "end": "899920"
  },
  {
    "text": "we would run both the old state of the",
    "start": "899920",
    "end": "901920"
  },
  {
    "text": "world code which we trusted was fairly",
    "start": "901920",
    "end": "904160"
  },
  {
    "text": "robust",
    "start": "904160",
    "end": "905199"
  },
  {
    "text": "and the new delta xgs code",
    "start": "905199",
    "end": "907839"
  },
  {
    "text": "and so what we wanted to do was compare",
    "start": "907839",
    "end": "909360"
  },
  {
    "text": "those two to see whether the delta xgs",
    "start": "909360",
    "end": "911600"
  },
  {
    "text": "response was accurate",
    "start": "911600",
    "end": "913600"
  },
  {
    "text": "in order to do that we started storing",
    "start": "913600",
    "end": "915120"
  },
  {
    "text": "the previous state and this is when",
    "start": "915120",
    "end": "917040"
  },
  {
    "text": "we're in like debug mode only so",
    "start": "917040",
    "end": "918560"
  },
  {
    "text": "normally this would be far too expensive",
    "start": "918560",
    "end": "921279"
  },
  {
    "text": "but with the previous state of the state",
    "start": "921279",
    "end": "923120"
  },
  {
    "text": "of the world response and the new state",
    "start": "923120",
    "end": "925279"
  },
  {
    "text": "we can then kind of compute the optimal",
    "start": "925279",
    "end": "927040"
  },
  {
    "text": "delta xjs response",
    "start": "927040",
    "end": "929040"
  },
  {
    "text": "and then we can see how we did with our",
    "start": "929040",
    "end": "930480"
  },
  {
    "text": "actual delta x jazz response",
    "start": "930480",
    "end": "933040"
  },
  {
    "text": "so this helps us detect bugs such as",
    "start": "933040",
    "end": "935279"
  },
  {
    "text": "failing to delete the resource that we",
    "start": "935279",
    "end": "936959"
  },
  {
    "text": "should have",
    "start": "936959",
    "end": "938320"
  },
  {
    "text": "if we deleted a resource that we",
    "start": "938320",
    "end": "939759"
  },
  {
    "text": "shouldn't have or maybe if we fail to",
    "start": "939759",
    "end": "941759"
  },
  {
    "text": "update",
    "start": "941759",
    "end": "942720"
  },
  {
    "text": "uh failed to send an update that was",
    "start": "942720",
    "end": "944320"
  },
  {
    "text": "required",
    "start": "944320",
    "end": "945279"
  },
  {
    "text": "it can also help us optimize",
    "start": "945279",
    "end": "947680"
  },
  {
    "text": "our solution because we can see if we",
    "start": "947680",
    "end": "950000"
  },
  {
    "text": "sent an update over delta xds that",
    "start": "950000",
    "end": "952000"
  },
  {
    "text": "wasn't really required because the",
    "start": "952000",
    "end": "953440"
  },
  {
    "text": "configuration didn't change at all",
    "start": "953440",
    "end": "956800"
  },
  {
    "start": "956000",
    "end": "956000"
  },
  {
    "text": "another issue we saw was with big",
    "start": "956959",
    "end": "959279"
  },
  {
    "text": "resources so we had kind of naively",
    "start": "959279",
    "end": "961519"
  },
  {
    "text": "hoped that delta xds would be the silver",
    "start": "961519",
    "end": "963519"
  },
  {
    "text": "bullet",
    "start": "963519",
    "end": "965040"
  },
  {
    "text": "which wasn't quite the case out of the",
    "start": "965040",
    "end": "966480"
  },
  {
    "text": "box so with delta you get the",
    "start": "966480",
    "end": "968320"
  },
  {
    "text": "granularity of a single resource",
    "start": "968320",
    "end": "971040"
  },
  {
    "text": "and if your resources are giant it",
    "start": "971040",
    "end": "972880"
  },
  {
    "text": "doesn't really help that you can only",
    "start": "972880",
    "end": "974399"
  },
  {
    "text": "send one at a time",
    "start": "974399",
    "end": "976320"
  },
  {
    "text": "you know for example at a ingress",
    "start": "976320",
    "end": "977920"
  },
  {
    "text": "gateway it's very common to have many",
    "start": "977920",
    "end": "980000"
  },
  {
    "text": "many different virtual hosts you know",
    "start": "980000",
    "end": "981680"
  },
  {
    "text": "over the same port",
    "start": "981680",
    "end": "983120"
  },
  {
    "text": "and so if we still have to send that",
    "start": "983120",
    "end": "984639"
  },
  {
    "text": "entire set of virtual hosts every time",
    "start": "984639",
    "end": "986480"
  },
  {
    "text": "one changes we haven't got much benefit",
    "start": "986480",
    "end": "988639"
  },
  {
    "text": "out of delta xds",
    "start": "988639",
    "end": "990959"
  },
  {
    "start": "990000",
    "end": "990000"
  },
  {
    "text": "so one of the solutions that have been",
    "start": "990959",
    "end": "993120"
  },
  {
    "text": "has been kind of actively pursued in",
    "start": "993120",
    "end": "994880"
  },
  {
    "text": "envoy and it's still ongoing is kind of",
    "start": "994880",
    "end": "996399"
  },
  {
    "text": "decomposing the resource types",
    "start": "996399",
    "end": "999440"
  },
  {
    "text": "so far there's been three types that",
    "start": "999440",
    "end": "1001360"
  },
  {
    "text": "have kind of undergone this one is the",
    "start": "1001360",
    "end": "1003279"
  },
  {
    "text": "virtual host discovery service which is",
    "start": "1003279",
    "end": "1004959"
  },
  {
    "text": "splitting up the routes by virtual host",
    "start": "1004959",
    "end": "1007279"
  },
  {
    "text": "that's kind of the example i showed",
    "start": "1007279",
    "end": "1008480"
  },
  {
    "text": "before",
    "start": "1008480",
    "end": "1009680"
  },
  {
    "text": "another one is the locality endpoint",
    "start": "1009680",
    "end": "1011279"
  },
  {
    "text": "discovery which is splitting at the",
    "start": "1011279",
    "end": "1012639"
  },
  {
    "text": "endpoints so you can send smaller chunks",
    "start": "1012639",
    "end": "1014560"
  },
  {
    "text": "of endpoints",
    "start": "1014560",
    "end": "1016240"
  },
  {
    "text": "this is really helpful if a service has",
    "start": "1016240",
    "end": "1017839"
  },
  {
    "text": "a ton of endpoints that you don't want",
    "start": "1017839",
    "end": "1018959"
  },
  {
    "text": "to send on every update there's also the",
    "start": "1018959",
    "end": "1021199"
  },
  {
    "text": "extension config discovery service for",
    "start": "1021199",
    "end": "1023519"
  },
  {
    "text": "sending individual filters",
    "start": "1023519",
    "end": "1025438"
  },
  {
    "text": "and so what this allows us to do is to",
    "start": "1025439",
    "end": "1026880"
  },
  {
    "text": "break up our components more and more so",
    "start": "1026880",
    "end": "1028558"
  },
  {
    "text": "that we can send smaller increments uh",
    "start": "1028559",
    "end": "1030480"
  },
  {
    "text": "you know rather than the full thing",
    "start": "1030480",
    "end": "1033520"
  },
  {
    "start": "1033000",
    "end": "1033000"
  },
  {
    "text": "finally we have an issue where",
    "start": "1033520",
    "end": "1036400"
  },
  {
    "text": "you know if we have a giant",
    "start": "1036400",
    "end": "1037199"
  },
  {
    "text": "configuration then it's it's slow at",
    "start": "1037199",
    "end": "1039038"
  },
  {
    "text": "startup and this can be",
    "start": "1039039",
    "end": "1040959"
  },
  {
    "text": "problematic especially in cases like",
    "start": "1040959",
    "end": "1042798"
  },
  {
    "text": "serverless where startup speed directly",
    "start": "1042799",
    "end": "1045120"
  },
  {
    "text": "impacts user facing latency",
    "start": "1045120",
    "end": "1048000"
  },
  {
    "text": "and so with delta xds when we start up",
    "start": "1048000",
    "end": "1050480"
  },
  {
    "text": "we still have to send all the",
    "start": "1050480",
    "end": "1051360"
  },
  {
    "text": "configuration it's only on the updates",
    "start": "1051360",
    "end": "1053679"
  },
  {
    "text": "where things get quite a bit better",
    "start": "1053679",
    "end": "1056640"
  },
  {
    "text": "so one of the solutions that are being",
    "start": "1056640",
    "end": "1058480"
  },
  {
    "start": "1058000",
    "end": "1058000"
  },
  {
    "text": "pursued on the envoy side is this",
    "start": "1058480",
    "end": "1060080"
  },
  {
    "text": "concept called on-demand xds and so",
    "start": "1060080",
    "end": "1062960"
  },
  {
    "text": "rather than send envoy the full",
    "start": "1062960",
    "end": "1064400"
  },
  {
    "text": "configuration we can send it a very",
    "start": "1064400",
    "end": "1066320"
  },
  {
    "text": "small amount of configuration that tells",
    "start": "1066320",
    "end": "1067840"
  },
  {
    "text": "it to just lazy load or just in time",
    "start": "1067840",
    "end": "1070000"
  },
  {
    "text": "load the configuration it needs",
    "start": "1070000",
    "end": "1072400"
  },
  {
    "text": "so for example when a client requests",
    "start": "1072400",
    "end": "1074400"
  },
  {
    "text": "example.com if envoy doesn't know about",
    "start": "1074400",
    "end": "1076880"
  },
  {
    "text": "that virtual host it can ask the control",
    "start": "1076880",
    "end": "1079120"
  },
  {
    "text": "plane for the route the ro or the",
    "start": "1079120",
    "end": "1081039"
  },
  {
    "text": "control plane can send it back and then",
    "start": "1081039",
    "end": "1082400"
  },
  {
    "text": "envoy can serve the request",
    "start": "1082400",
    "end": "1084640"
  },
  {
    "text": "so that allows us to have this rapid",
    "start": "1084640",
    "end": "1086559"
  },
  {
    "text": "startup speed and still get the benefits",
    "start": "1086559",
    "end": "1089679"
  },
  {
    "text": "of you know the vast configuration that",
    "start": "1089679",
    "end": "1091440"
  },
  {
    "text": "we want to send to envoy",
    "start": "1091440",
    "end": "1095159"
  },
  {
    "text": "okay yeah so now i'm going to talk about",
    "start": "1095919",
    "end": "1097760"
  },
  {
    "text": "the implementation with an istio",
    "start": "1097760",
    "end": "1100320"
  },
  {
    "text": "so our on so the way we use envoy is the",
    "start": "1100320",
    "end": "1104160"
  },
  {
    "text": "envoy configuration is dependent on a",
    "start": "1104160",
    "end": "1106000"
  },
  {
    "text": "bunch of kubernetes objects",
    "start": "1106000",
    "end": "1108000"
  },
  {
    "text": "and so based on whenever these",
    "start": "1108000",
    "end": "1109840"
  },
  {
    "text": "kubernetes objects change",
    "start": "1109840",
    "end": "1111520"
  },
  {
    "text": "uh we can determine what envoy resources",
    "start": "1111520",
    "end": "1113360"
  },
  {
    "text": "change and then determine what should be",
    "start": "1113360",
    "end": "1115280"
  },
  {
    "text": "pushed basically to every proxy",
    "start": "1115280",
    "end": "1117600"
  },
  {
    "text": "so for instance if just a service",
    "start": "1117600",
    "end": "1119120"
  },
  {
    "text": "changes with a certain hostname",
    "start": "1119120",
    "end": "1121200"
  },
  {
    "text": "we have to find all the clusters with",
    "start": "1121200",
    "end": "1123200"
  },
  {
    "text": "that host name and then once we find",
    "start": "1123200",
    "end": "1125360"
  },
  {
    "text": "those clusters we have to push those",
    "start": "1125360",
    "end": "1127120"
  },
  {
    "text": "clusters to the proxies that care uh so",
    "start": "1127120",
    "end": "1129520"
  },
  {
    "text": "this is essentially the same as sending",
    "start": "1129520",
    "end": "1131200"
  },
  {
    "text": "the deltas or like diffing like go",
    "start": "1131200",
    "end": "1133039"
  },
  {
    "text": "control plane does because we're getting",
    "start": "1133039",
    "end": "1134880"
  },
  {
    "text": "updates",
    "start": "1134880",
    "end": "1137679"
  },
  {
    "text": "so yeah this is the example so if you",
    "start": "1137679",
    "end": "1139280"
  },
  {
    "start": "1138000",
    "end": "1138000"
  },
  {
    "text": "like service a and that'll correlate to",
    "start": "1139280",
    "end": "1142000"
  },
  {
    "text": "a few clusters um",
    "start": "1142000",
    "end": "1143919"
  },
  {
    "text": "uh with the same host stamps on proxy.i",
    "start": "1143919",
    "end": "1146080"
  },
  {
    "text": "o",
    "start": "1146080",
    "end": "1147200"
  },
  {
    "text": "will have same those same hostnames as",
    "start": "1147200",
    "end": "1149280"
  },
  {
    "text": "long as they match we'll push those",
    "start": "1149280",
    "end": "1151360"
  },
  {
    "text": "clusters we'll generate and push those",
    "start": "1151360",
    "end": "1152559"
  },
  {
    "text": "clusters as opposed to generating every",
    "start": "1152559",
    "end": "1154559"
  },
  {
    "text": "single cluster ever um so it's much much",
    "start": "1154559",
    "end": "1157600"
  },
  {
    "text": "better um so yeah",
    "start": "1157600",
    "end": "1160240"
  },
  {
    "text": "now i'll go over like the push flow",
    "start": "1160240",
    "end": "1162480"
  },
  {
    "start": "1161000",
    "end": "1161000"
  },
  {
    "text": "um",
    "start": "1162480",
    "end": "1163280"
  },
  {
    "text": "so for we've only implemented delta xds",
    "start": "1163280",
    "end": "1166160"
  },
  {
    "text": "with the cluster discovery service or",
    "start": "1166160",
    "end": "1168080"
  },
  {
    "text": "cds",
    "start": "1168080",
    "end": "1169200"
  },
  {
    "text": "um and this is because we saw the",
    "start": "1169200",
    "end": "1170960"
  },
  {
    "text": "biggest impact in cds without like",
    "start": "1170960",
    "end": "1173919"
  },
  {
    "text": "the most implementation um",
    "start": "1173919",
    "end": "1176240"
  },
  {
    "text": "so here's the push flow for cds so",
    "start": "1176240",
    "end": "1179120"
  },
  {
    "text": "essentially um the kubernetes in former",
    "start": "1179120",
    "end": "1181760"
  },
  {
    "text": "api we use that to",
    "start": "1181760",
    "end": "1184240"
  },
  {
    "text": "figure out when these objects change and",
    "start": "1184240",
    "end": "1186559"
  },
  {
    "text": "so when a certain service changes uh",
    "start": "1186559",
    "end": "1189600"
  },
  {
    "text": "we'll get notified of it through the",
    "start": "1189600",
    "end": "1190960"
  },
  {
    "text": "informal api",
    "start": "1190960",
    "end": "1193120"
  },
  {
    "text": "and so this will lead our control plane",
    "start": "1193120",
    "end": "1195600"
  },
  {
    "text": "to generate configuration data",
    "start": "1195600",
    "end": "1198240"
  },
  {
    "text": "and that configuration data is just the",
    "start": "1198240",
    "end": "1200080"
  },
  {
    "text": "deltas because",
    "start": "1200080",
    "end": "1201440"
  },
  {
    "text": "we got the update as like a service was",
    "start": "1201440",
    "end": "1203760"
  },
  {
    "text": "updated",
    "start": "1203760",
    "end": "1204880"
  },
  {
    "text": "then we know that whatever comes from",
    "start": "1204880",
    "end": "1207200"
  },
  {
    "text": "that service whatever clusters are",
    "start": "1207200",
    "end": "1208559"
  },
  {
    "text": "associated those are only the changes of",
    "start": "1208559",
    "end": "1211039"
  },
  {
    "text": "clusters as well",
    "start": "1211039",
    "end": "1212960"
  },
  {
    "text": "so",
    "start": "1212960",
    "end": "1213760"
  },
  {
    "text": "we then gather those clusters and so we",
    "start": "1213760",
    "end": "1215760"
  },
  {
    "text": "know those are the deltas",
    "start": "1215760",
    "end": "1218559"
  },
  {
    "text": "and then we'll push those selected",
    "start": "1218559",
    "end": "1220159"
  },
  {
    "text": "clusters um to",
    "start": "1220159",
    "end": "1222320"
  },
  {
    "text": "those selected envoys um that care about",
    "start": "1222320",
    "end": "1225039"
  },
  {
    "text": "those clusters um the same works for",
    "start": "1225039",
    "end": "1227200"
  },
  {
    "text": "deletions if a service is deleted like",
    "start": "1227200",
    "end": "1229360"
  },
  {
    "text": "basically we'll just compute like what",
    "start": "1229360",
    "end": "1231280"
  },
  {
    "text": "clusters are still associated with that",
    "start": "1231280",
    "end": "1233520"
  },
  {
    "text": "service",
    "start": "1233520",
    "end": "1234400"
  },
  {
    "text": "and then we'll just tell envoy hey",
    "start": "1234400",
    "end": "1236159"
  },
  {
    "text": "delete these clusters um",
    "start": "1236159",
    "end": "1238720"
  },
  {
    "text": "so yeah that's the push flow for the",
    "start": "1238720",
    "end": "1240480"
  },
  {
    "text": "cluster discovery service",
    "start": "1240480",
    "end": "1242559"
  },
  {
    "text": "it's pretty simple but as we add more",
    "start": "1242559",
    "end": "1244960"
  },
  {
    "text": "and more like services we're working on",
    "start": "1244960",
    "end": "1246720"
  },
  {
    "text": "destination rules and so as we add more",
    "start": "1246720",
    "end": "1248880"
  },
  {
    "text": "of these objects it should get more",
    "start": "1248880",
    "end": "1251440"
  },
  {
    "text": "complicated",
    "start": "1251440",
    "end": "1254000"
  },
  {
    "start": "1253000",
    "end": "1253000"
  },
  {
    "text": "so the fun part performance results um",
    "start": "1254000",
    "end": "1256400"
  },
  {
    "text": "so john created this benchmark",
    "start": "1256400",
    "end": "1258480"
  },
  {
    "text": "where we scaled",
    "start": "1258480",
    "end": "1260720"
  },
  {
    "text": "a mesh from zero to a thousand pods and",
    "start": "1260720",
    "end": "1263440"
  },
  {
    "text": "then we updated a service every second",
    "start": "1263440",
    "end": "1265280"
  },
  {
    "text": "changing something arbitrary",
    "start": "1265280",
    "end": "1267039"
  },
  {
    "text": "and essentially uh this is a graph of",
    "start": "1267039",
    "end": "1270799"
  },
  {
    "text": "network throughput with",
    "start": "1270799",
    "end": "1272640"
  },
  {
    "text": "the time",
    "start": "1272640",
    "end": "1273760"
  },
  {
    "text": "and the area under the curve um from",
    "start": "1273760",
    "end": "1276559"
  },
  {
    "text": "like any given point is the data being",
    "start": "1276559",
    "end": "1278400"
  },
  {
    "text": "sent at those times",
    "start": "1278400",
    "end": "1280080"
  },
  {
    "text": "so which state of the world which is the",
    "start": "1280080",
    "end": "1281440"
  },
  {
    "text": "first one like we can see just kind of",
    "start": "1281440",
    "end": "1283440"
  },
  {
    "text": "like almost constant",
    "start": "1283440",
    "end": "1285600"
  },
  {
    "text": "huge wall of configuration being sent",
    "start": "1285600",
    "end": "1288320"
  },
  {
    "text": "that's a lot of configuration i think if",
    "start": "1288320",
    "end": "1289760"
  },
  {
    "text": "you found the area under the curve it'd",
    "start": "1289760",
    "end": "1291039"
  },
  {
    "text": "be a non-trivial amount",
    "start": "1291039",
    "end": "1293919"
  },
  {
    "text": "and uh so that's the state of the world",
    "start": "1293919",
    "end": "1295440"
  },
  {
    "text": "and we can see that it remains",
    "start": "1295440",
    "end": "1296559"
  },
  {
    "text": "relatively constant um so it's a lot of",
    "start": "1296559",
    "end": "1298640"
  },
  {
    "text": "data being sent",
    "start": "1298640",
    "end": "1300480"
  },
  {
    "text": "and then we can see after like round 16",
    "start": "1300480",
    "end": "1303440"
  },
  {
    "text": "maybe 13 we can see the delta",
    "start": "1303440",
    "end": "1307600"
  },
  {
    "text": "benchmark so essentially the area under",
    "start": "1307600",
    "end": "1309440"
  },
  {
    "text": "the curve there is also the amount of",
    "start": "1309440",
    "end": "1310720"
  },
  {
    "text": "data being sent and it's significantly",
    "start": "1310720",
    "end": "1312799"
  },
  {
    "text": "less",
    "start": "1312799",
    "end": "1313919"
  },
  {
    "text": "there's that initial bump that we see",
    "start": "1313919",
    "end": "1316159"
  },
  {
    "text": "john talked about it it's a slow",
    "start": "1316159",
    "end": "1317440"
  },
  {
    "text": "bootstrap we have to send that um",
    "start": "1317440",
    "end": "1319919"
  },
  {
    "text": "because onboard needs to know about",
    "start": "1319919",
    "end": "1321440"
  },
  {
    "text": "itself and other things as well um",
    "start": "1321440",
    "end": "1324240"
  },
  {
    "text": "uh the solution to this is just uh on",
    "start": "1324240",
    "end": "1326720"
  },
  {
    "text": "demand xds so if we do that then",
    "start": "1326720",
    "end": "1329039"
  },
  {
    "text": "there'll be no bump there and just be",
    "start": "1329039",
    "end": "1330480"
  },
  {
    "text": "like flat um but essentially um",
    "start": "1330480",
    "end": "1333840"
  },
  {
    "text": "after that initial slow bootstrap",
    "start": "1333840",
    "end": "1336080"
  },
  {
    "text": "you see it kind of trails off to almost",
    "start": "1336080",
    "end": "1338080"
  },
  {
    "text": "nothing but that almost nothing that",
    "start": "1338080",
    "end": "1339679"
  },
  {
    "text": "like a sliver of data is actually the",
    "start": "1339679",
    "end": "1342559"
  },
  {
    "text": "amount of data being changed and that",
    "start": "1342559",
    "end": "1344080"
  },
  {
    "text": "needs to be sent to the envoys so the",
    "start": "1344080",
    "end": "1346000"
  },
  {
    "text": "difference between delta and state of",
    "start": "1346000",
    "end": "1347360"
  },
  {
    "text": "the world is the amount of redundant",
    "start": "1347360",
    "end": "1348640"
  },
  {
    "text": "data that's being sent across your",
    "start": "1348640",
    "end": "1350880"
  },
  {
    "text": "network from the control plane to envoy",
    "start": "1350880",
    "end": "1353039"
  },
  {
    "text": "um so this is the benchmark and it shows",
    "start": "1353039",
    "end": "1356159"
  },
  {
    "text": "that delta is significantly better",
    "start": "1356159",
    "end": "1358159"
  },
  {
    "text": "performance-wise um so once this is",
    "start": "1358159",
    "end": "1360320"
  },
  {
    "text": "implemented like mesh wide for a bunch",
    "start": "1360320",
    "end": "1362240"
  },
  {
    "text": "of resources",
    "start": "1362240",
    "end": "1363679"
  },
  {
    "text": "there should be quite a bit of",
    "start": "1363679",
    "end": "1364799"
  },
  {
    "text": "performance improvements like a",
    "start": "1364799",
    "end": "1365840"
  },
  {
    "text": "noticeable performance improvement um",
    "start": "1365840",
    "end": "1368960"
  },
  {
    "text": "in your mesh so use delta xds",
    "start": "1368960",
    "end": "1373120"
  },
  {
    "text": "yeah thank you uh any questions or",
    "start": "1373120",
    "end": "1376159"
  },
  {
    "text": "no",
    "start": "1376159",
    "end": "1377280"
  },
  {
    "text": "okay yeah sure",
    "start": "1377280",
    "end": "1380159"
  },
  {
    "text": "for envoy",
    "start": "1380960",
    "end": "1383600"
  },
  {
    "text": "uh so you talked about enabling this",
    "start": "1384720",
    "end": "1387039"
  },
  {
    "text": "through the go control plane but could",
    "start": "1387039",
    "end": "1388799"
  },
  {
    "text": "you explain how exactly how to enable",
    "start": "1388799",
    "end": "1390400"
  },
  {
    "text": "this in istio you said it's not enabled",
    "start": "1390400",
    "end": "1392240"
  },
  {
    "text": "in 110 should we expect it to be fully",
    "start": "1392240",
    "end": "1394720"
  },
  {
    "text": "enabled in 111",
    "start": "1394720",
    "end": "1396320"
  },
  {
    "text": "oh definitely not",
    "start": "1396320",
    "end": "1397919"
  },
  {
    "text": "uh it's nowhere near where it needs to",
    "start": "1397919",
    "end": "1399679"
  },
  {
    "text": "be uh but the way you enable it is just",
    "start": "1399679",
    "end": "1401360"
  },
  {
    "text": "by setting an environment variable i",
    "start": "1401360",
    "end": "1402799"
  },
  {
    "text": "think it's istio delta xds",
    "start": "1402799",
    "end": "1405039"
  },
  {
    "text": "true on the agent and the control plane",
    "start": "1405039",
    "end": "1407280"
  },
  {
    "text": "and then that'll work um but it's",
    "start": "1407280",
    "end": "1409440"
  },
  {
    "text": "nowhere near stable like uh don't don't",
    "start": "1409440",
    "end": "1412240"
  },
  {
    "text": "get excited about",
    "start": "1412240",
    "end": "1413679"
  },
  {
    "text": "it being inflated by default uh",
    "start": "1413679",
    "end": "1416000"
  },
  {
    "text": "the issue with deltex or not the issue",
    "start": "1416000",
    "end": "1418320"
  },
  {
    "text": "but the inevitability with delta xds is",
    "start": "1418320",
    "end": "1420400"
  },
  {
    "text": "that",
    "start": "1420400",
    "end": "1421279"
  },
  {
    "text": "um you need to get it right because if",
    "start": "1421279",
    "end": "1422640"
  },
  {
    "text": "you don't get it right you're going to",
    "start": "1422640",
    "end": "1423679"
  },
  {
    "text": "send incorrect updates and if you do",
    "start": "1423679",
    "end": "1425279"
  },
  {
    "text": "that well your message out of sync and",
    "start": "1425279",
    "end": "1426960"
  },
  {
    "text": "that's bad",
    "start": "1426960",
    "end": "1428400"
  },
  {
    "text": "so we have to get it right for it to be",
    "start": "1428400",
    "end": "1430159"
  },
  {
    "text": "on by default but yeah any other",
    "start": "1430159",
    "end": "1432159"
  },
  {
    "text": "questions",
    "start": "1432159",
    "end": "1433760"
  },
  {
    "text": "yeah",
    "start": "1433760",
    "end": "1436000"
  },
  {
    "text": "huh",
    "start": "1438159",
    "end": "1440400"
  },
  {
    "text": "yeah",
    "start": "1441120",
    "end": "1444120"
  },
  {
    "text": "um yeah in the protocol itself i don't",
    "start": "1459760",
    "end": "1462400"
  },
  {
    "text": "think there's any sort of reconciliation",
    "start": "1462400",
    "end": "1464640"
  },
  {
    "text": "um oh sorry i'm supposed to repeat the",
    "start": "1464640",
    "end": "1466480"
  },
  {
    "text": "question the question was is there any",
    "start": "1466480",
    "end": "1468000"
  },
  {
    "text": "sort of reconciliation loop in between",
    "start": "1468000",
    "end": "1470240"
  },
  {
    "text": "envoy and the control plane to make sure",
    "start": "1470240",
    "end": "1471840"
  },
  {
    "text": "that it doesn't fall out of sync at some",
    "start": "1471840",
    "end": "1473440"
  },
  {
    "text": "point if we miss an update",
    "start": "1473440",
    "end": "1475520"
  },
  {
    "text": "so like i was saying there's no specific",
    "start": "1475520",
    "end": "1477600"
  },
  {
    "text": "like reconcile",
    "start": "1477600",
    "end": "1479120"
  },
  {
    "text": "aspect of the protocol itself",
    "start": "1479120",
    "end": "1481600"
  },
  {
    "text": "but the control plane does have the",
    "start": "1481600",
    "end": "1483200"
  },
  {
    "text": "ability to push",
    "start": "1483200",
    "end": "1485039"
  },
  {
    "text": "whatever configuration at once",
    "start": "1485039",
    "end": "1487039"
  },
  {
    "text": "and so you could reasonably say every",
    "start": "1487039",
    "end": "1489120"
  },
  {
    "text": "hour we're going to compute all the",
    "start": "1489120",
    "end": "1490480"
  },
  {
    "text": "configuration uh you know like the old",
    "start": "1490480",
    "end": "1492400"
  },
  {
    "text": "state of the world code send it over to",
    "start": "1492400",
    "end": "1493840"
  },
  {
    "text": "envoy just in case we you know made some",
    "start": "1493840",
    "end": "1495679"
  },
  {
    "text": "mistakes in the past",
    "start": "1495679",
    "end": "1497520"
  },
  {
    "text": "we're not currently doing that but yeah",
    "start": "1497520",
    "end": "1499919"
  },
  {
    "text": "you know it's definitely possible",
    "start": "1499919",
    "end": "1502320"
  },
  {
    "text": "i do think that if we",
    "start": "1502320",
    "end": "1504320"
  },
  {
    "text": "you know it's a good fallback plan but",
    "start": "1504320",
    "end": "1505760"
  },
  {
    "text": "if we if you're in that state where you",
    "start": "1505760",
    "end": "1507440"
  },
  {
    "text": "need that",
    "start": "1507440",
    "end": "1508400"
  },
  {
    "text": "then you may have some serious issues",
    "start": "1508400",
    "end": "1510000"
  },
  {
    "text": "because uh you know if you miss a",
    "start": "1510000",
    "end": "1512400"
  },
  {
    "text": "security update or you know some other",
    "start": "1512400",
    "end": "1514320"
  },
  {
    "text": "critical update even if you have the",
    "start": "1514320",
    "end": "1516159"
  },
  {
    "text": "loop an hour later it may be too late",
    "start": "1516159",
    "end": "1520520"
  },
  {
    "text": "performance numbers about cpus and",
    "start": "1529440",
    "end": "1531600"
  },
  {
    "text": "memory usage",
    "start": "1531600",
    "end": "1534640"
  },
  {
    "text": "do you have performance number about cpu",
    "start": "1534880",
    "end": "1537360"
  },
  {
    "text": "and memory usage not the bandwidth",
    "start": "1537360",
    "end": "1541279"
  },
  {
    "text": "um we don't have a graph to show you",
    "start": "1541279",
    "end": "1543760"
  },
  {
    "text": "today but we have done some some",
    "start": "1543760",
    "end": "1545520"
  },
  {
    "text": "analysis and it is it is quite a bit",
    "start": "1545520",
    "end": "1547360"
  },
  {
    "text": "better um",
    "start": "1547360",
    "end": "1548720"
  },
  {
    "text": "you know generally the eastio control",
    "start": "1548720",
    "end": "1550720"
  },
  {
    "text": "plane is spending",
    "start": "1550720",
    "end": "1552880"
  },
  {
    "text": "95 percent of its time on this code um",
    "start": "1552880",
    "end": "1556960"
  },
  {
    "text": "you know generating the xds",
    "start": "1556960",
    "end": "1558240"
  },
  {
    "text": "configuration especially marshalling it",
    "start": "1558240",
    "end": "1560480"
  },
  {
    "text": "and so we expect as we're doing far less",
    "start": "1560480",
    "end": "1562559"
  },
  {
    "text": "of that that it will go down",
    "start": "1562559",
    "end": "1563440"
  },
  {
    "text": "substantially",
    "start": "1563440",
    "end": "1564880"
  },
  {
    "text": "one thing we're also pretty interested",
    "start": "1564880",
    "end": "1566320"
  },
  {
    "text": "in is the cpu and memory usage at the",
    "start": "1566320",
    "end": "1568559"
  },
  {
    "text": "envoy side in processing xds",
    "start": "1568559",
    "end": "1571120"
  },
  {
    "text": "which is oftentimes a bit overlooked",
    "start": "1571120",
    "end": "1572799"
  },
  {
    "text": "because it is relatively small for a",
    "start": "1572799",
    "end": "1574720"
  },
  {
    "text": "single envoy but if you have 100 000",
    "start": "1574720",
    "end": "1577120"
  },
  {
    "text": "envoys then even a small increase makes",
    "start": "1577120",
    "end": "1579039"
  },
  {
    "text": "a big difference",
    "start": "1579039",
    "end": "1580240"
  },
  {
    "text": "so we haven't measured that yet but we",
    "start": "1580240",
    "end": "1581760"
  },
  {
    "text": "are excited to see the improvements",
    "start": "1581760",
    "end": "1583760"
  },
  {
    "text": "there as we as we progress",
    "start": "1583760",
    "end": "1587360"
  },
  {
    "text": "okay thank you",
    "start": "1587360",
    "end": "1591320"
  },
  {
    "text": "[Applause]",
    "start": "1591360",
    "end": "1594480"
  }
]