[
  {
    "text": "uh hello everyone I'm sunny and uh this is Introduction to Cloud custodian",
    "start": "359",
    "end": "6839"
  },
  {
    "text": "um I'm here at stacklit I got my socials up here I'll hand it over to John",
    "start": "6839",
    "end": "12300"
  },
  {
    "text": "yeah and I'm John Anderson um I'll talk about what cloud custodian",
    "start": "12300",
    "end": "17640"
  },
  {
    "text": "is and how I got into it I'm one of the contributors on the custodian project and so I got into using custodian as an",
    "start": "17640",
    "end": "24840"
  },
  {
    "text": "SRE so I've been managing uh kubernetes clusters in AWS Cloud Estates at",
    "start": "24840",
    "end": "30900"
  },
  {
    "text": "companies like server monkey and zapier and my job was to empower developers to",
    "start": "30900",
    "end": "37440"
  },
  {
    "text": "manage their costs but be productive make sure that they're in compliance with any governance things that we have",
    "start": "37440",
    "end": "43379"
  },
  {
    "text": "like sock 2 and so that they could follow any of the best practices that",
    "start": "43379",
    "end": "48600"
  },
  {
    "text": "we've set out within our organization and so what because Cloud custodian allows you to do",
    "start": "48600",
    "end": "54239"
  },
  {
    "text": "is do all of this in one place you can set up policies with an easy to use yaml",
    "start": "54239",
    "end": "60120"
  },
  {
    "text": "based engine and control your terraform your kubernetes",
    "start": "60120",
    "end": "66000"
  },
  {
    "text": "clusters your any of the public clouds Azure AWS gcp",
    "start": "66000",
    "end": "72619"
  },
  {
    "text": "and it's all the same yaml you can run the same policy engine which means you're going to be getting the same",
    "start": "72619",
    "end": "78180"
  },
  {
    "text": "reporting uh and before I landed on cloud custodian I was running many",
    "start": "78180",
    "end": "83280"
  },
  {
    "text": "different policy agents I was running something for kubernetes something for AWS something for terraform and when",
    "start": "83280",
    "end": "88920"
  },
  {
    "text": "you're doing that across all these different things you start getting a different experience between each one so",
    "start": "88920",
    "end": "94619"
  },
  {
    "text": "you might be preventing some sock 2 stuff on AWS but you're not preventing it on the terraform layer and so Cloud",
    "start": "94619",
    "end": "102720"
  },
  {
    "text": "custodian opened all that up and so one of the first things that most of us",
    "start": "102720",
    "end": "108119"
  },
  {
    "text": "do on the SRE level is manage cost we want to get those costs down and we want to give that information to the",
    "start": "108119",
    "end": "114240"
  },
  {
    "text": "developers saying okay you have underutilized resource or you have resources that aren't even being used so",
    "start": "114240",
    "end": "120540"
  },
  {
    "text": "when I was at zapier one of the big things that we had was some git lab Runners where their health checks were",
    "start": "120540",
    "end": "127439"
  },
  {
    "text": "running they were up there working everyone thought we were utilizing them and then we got a report from the",
    "start": "127439",
    "end": "132599"
  },
  {
    "text": "developers that pipelines were taking a long time to run we started investigating it and it",
    "start": "132599",
    "end": "137760"
  },
  {
    "text": "turned out a lot of them were just sitting there doing nothing so we were just burning fifteen thousand dollars a month on get lab Runners that weren't",
    "start": "137760",
    "end": "144000"
  },
  {
    "text": "actually running crcd jobs and so that's where we use cloud custodian today where we can run these",
    "start": "144000",
    "end": "150360"
  },
  {
    "text": "policies and we can identify underutilized resources zombie resources we can actually enforce tags and alert",
    "start": "150360",
    "end": "158580"
  },
  {
    "text": "the owners to say like hey we need to know what this resource is and who it's from that way if it is violating any of",
    "start": "158580",
    "end": "165060"
  },
  {
    "text": "our rules we know who to communicate with and we're not looking to police the",
    "start": "165060",
    "end": "170879"
  },
  {
    "text": "developers we're just looking to empower them to be productive and make the right decisions",
    "start": "170879",
    "end": "176760"
  },
  {
    "text": "and then the next thing is compliance most of us have some type of compliance where you're going to be running PCI",
    "start": "176760",
    "end": "181980"
  },
  {
    "text": "HIPAA CIS any of those and you just when you're doing something like sock 2",
    "start": "181980",
    "end": "187319"
  },
  {
    "text": "on an annual basis you want to be checking it throughout the year because if you just say oh it's",
    "start": "187319",
    "end": "193140"
  },
  {
    "text": "out of time Let's uh start Gathering all of our evidence it's going to be really difficult to get all that in time for",
    "start": "193140",
    "end": "199860"
  },
  {
    "text": "your auditor with uh Cloud custodian you can run on an event based mode or a pull",
    "start": "199860",
    "end": "205500"
  },
  {
    "text": "mode and you can be running your sock 2 policies all the time and then finally the like probably the",
    "start": "205500",
    "end": "212280"
  },
  {
    "text": "most important part of this is correctness you have you're hiring a lot of experts you have them there because",
    "start": "212280",
    "end": "219300"
  },
  {
    "text": "they know what the best practices are so you want them to codify that you don't want developers writing code without",
    "start": "219300",
    "end": "225480"
  },
  {
    "text": "tests you don't want to deploy infrastructure without cloud custodian because Cloud custodian is going to be those tasks it's going to enforce those",
    "start": "225480",
    "end": "231780"
  },
  {
    "text": "correctness and so when we say correctness it's things like don't roll out a public S3 bucket or an unencrypted",
    "start": "231780",
    "end": "237900"
  },
  {
    "text": "S3 bucket things like that and so we just want to enforce all of that all right so I'll give you a look at",
    "start": "237900",
    "end": "245459"
  },
  {
    "text": "what the custodian policy looks like so for one um it starts out very simple you just",
    "start": "245459",
    "end": "251459"
  },
  {
    "text": "specify a name and a resource type in this case we're looking at S3 then you define your filters here so uh with",
    "start": "251459",
    "end": "258540"
  },
  {
    "text": "custodian there are a lot of built-in filters that allow you to do things like look at relationships",
    "start": "258540",
    "end": "263580"
  },
  {
    "text": "between objects or look at relationships between different resource types in this case we're looking at the actual policy",
    "start": "263580",
    "end": "270360"
  },
  {
    "text": "on the S3 bucket itself saying that we're going to allow access from this",
    "start": "270360",
    "end": "276840"
  },
  {
    "text": "account to do these actions across account um but the probably the most powerful",
    "start": "276840",
    "end": "282660"
  },
  {
    "text": "part is the ability to do things like actions so here we have a built-in notify action that allows you to send",
    "start": "282660",
    "end": "288000"
  },
  {
    "text": "notifications to the resource owner um and that way you can really drive that behavior change at your organization",
    "start": "288000",
    "end": "294300"
  },
  {
    "text": "telling your users that hey you've misconfigured something or you need to change",
    "start": "294300",
    "end": "299580"
  },
  {
    "text": "some something about the metadata of the resource um and get it so that",
    "start": "299580",
    "end": "305400"
  },
  {
    "text": "your users are constantly basically leveling up their usage of the cloud and",
    "start": "305400",
    "end": "310500"
  },
  {
    "text": "finally to run it you just run Casino run with the policy yaml file there",
    "start": "310500",
    "end": "316320"
  },
  {
    "text": "um so here's another example policy in this case it's a I am role but as you can see it looks very familiar to the",
    "start": "316320",
    "end": "322500"
  },
  {
    "text": "previous one I instead of doing a cross account check we're just checking that the permissions are not over provisioned",
    "start": "322500",
    "end": "328820"
  },
  {
    "text": "and here we're notifying the security team finally here I'll talk a bit about the",
    "start": "328820",
    "end": "336000"
  },
  {
    "text": "different modes that we have so with Cloud custodian you have a pull mode which means I want to take a look at the existing Cloud infrastructure",
    "start": "336000",
    "end": "342660"
  },
  {
    "text": "environment so um querying against your AWS account or your Azure subscription or gcp project",
    "start": "342660",
    "end": "349220"
  },
  {
    "text": "but additionally we have what are called event modes so this way you can react in",
    "start": "349220",
    "end": "354300"
  },
  {
    "text": "a more Dynamic way so for example if you were to have a",
    "start": "354300",
    "end": "359340"
  },
  {
    "text": "developer create an S3 bucket that is public you can actually detect that",
    "start": "359340",
    "end": "364560"
  },
  {
    "text": "right away when it happens change the permissions on that bucket to make it not non-public",
    "start": "364560",
    "end": "370500"
  },
  {
    "text": "as well as do things like notify the user or auto tag it or any other actions",
    "start": "370500",
    "end": "375960"
  },
  {
    "text": "that are available on the resource type so really this lets you close the gap on how long You're vulnerable for",
    "start": "375960",
    "end": "383000"
  },
  {
    "text": "as well as prevent things that are headaches down the line when you know you've had like an RDS database",
    "start": "383000",
    "end": "389699"
  },
  {
    "text": "that's been out there for uh you know years and then you're telling developers like hey you got to go and fix it you're",
    "start": "389699",
    "end": "395819"
  },
  {
    "text": "like well I kind of wish I caught that earlier um finally just a quick rundown on sort",
    "start": "395819",
    "end": "401880"
  },
  {
    "text": "of like the software development lifecycle policies so one way to do this is you can keep all",
    "start": "401880",
    "end": "407100"
  },
  {
    "text": "your policies in a git repo uh run CI on that and typically what that means is run the actual policy in a dry run mode",
    "start": "407100",
    "end": "413880"
  },
  {
    "text": "against your resources and then deploy them and you can have scheduled policies with periodic modes or run it on a Cron",
    "start": "413880",
    "end": "421560"
  },
  {
    "text": "job as well as those automated policy triggers and then send notifications and",
    "start": "421560",
    "end": "427680"
  },
  {
    "text": "perform remediations on top of that so how does this have to what does this",
    "start": "427680",
    "end": "434220"
  },
  {
    "text": "have to do with kubecon um so custodian now has support for kubernetes uh one mode is the pull mode",
    "start": "434220",
    "end": "440580"
  },
  {
    "text": "that I mentioned before where we just look at your cluster and run a filter on that the other mode is the Kate's",
    "start": "440580",
    "end": "447599"
  },
  {
    "text": "admission mode so this is a admission controller that you can deploy into your cluster or outside",
    "start": "447599",
    "end": "454500"
  },
  {
    "text": "your cluster using a mutating webflow configuration that can do all the things a admission controller does which is you",
    "start": "454500",
    "end": "461580"
  },
  {
    "text": "know allow denied objects based on filters that you've defined it's easy to",
    "start": "461580",
    "end": "467699"
  },
  {
    "text": "deploy with the helm chart and for example you can do things like Auto label objects as they come in so if you",
    "start": "467699",
    "end": "474000"
  },
  {
    "text": "want to require everybody to label their resources as I'm you know being managed",
    "start": "474000",
    "end": "479460"
  },
  {
    "text": "by sunny but people don't seem to be doing it you can do it for them and try to move the",
    "start": "479460",
    "end": "485699"
  },
  {
    "text": "needle a little bit so we'll do a quick demo here",
    "start": "485699",
    "end": "492680"
  },
  {
    "text": "okay uh and hopefully everyone can see my screen so",
    "start": "495120",
    "end": "500460"
  },
  {
    "text": "first thing we'll do is take a look at the",
    "start": "500460",
    "end": "505039"
  },
  {
    "text": "resources here so here we just have like we have a namespace and we also have this pod Manifest this pod manifest",
    "start": "507860",
    "end": "515399"
  },
  {
    "text": "uh we've got you know pretty basic we have nginx and we have another pod with a couple labels",
    "start": "515399",
    "end": "521640"
  },
  {
    "text": "here so let's go ahead and apply this",
    "start": "521640",
    "end": "527000"
  },
  {
    "text": "and then we'll do next is we will",
    "start": "532040",
    "end": "537720"
  },
  {
    "text": "take a look at the policy that we have here and here we have a policy that just says",
    "start": "537720",
    "end": "543660"
  },
  {
    "text": "we're going to require this to be managed by or sorry have this label at that",
    "start": "543660",
    "end": "548880"
  },
  {
    "text": "kubernetes managed by and if it's absent to filter it in so we can run just run",
    "start": "548880",
    "end": "556560"
  },
  {
    "text": "your policies oh sorry gotta be in my",
    "start": "556560",
    "end": "562339"
  },
  {
    "text": "be in my virtual environment there",
    "start": "566040",
    "end": "569420"
  },
  {
    "text": "cool um so if we run this uh you can see that",
    "start": "574440",
    "end": "579600"
  },
  {
    "text": "after we applied it um we're getting back some results here uh",
    "start": "579600",
    "end": "584640"
  },
  {
    "text": "basically all of these results show up in our output directory here so we can see",
    "start": "584640",
    "end": "590760"
  },
  {
    "text": "for example in this managed required managed labels we can see that in the",
    "start": "590760",
    "end": "596940"
  },
  {
    "text": "labels here we only have the foo and bar labels so basically",
    "start": "596940",
    "end": "602940"
  },
  {
    "text": "you could do a whole lot of other more complicated stuff with the filter syntax but this is just a quick look at how you",
    "start": "602940",
    "end": "609540"
  },
  {
    "text": "can get started the next thing we'll take a look at is the admission controller mode so",
    "start": "609540",
    "end": "614640"
  },
  {
    "text": "first let's do a quick clean up",
    "start": "614640",
    "end": "618500"
  },
  {
    "text": "all right um and like I said the admission controller mode uh the way that it works",
    "start": "622260",
    "end": "629100"
  },
  {
    "text": "is that we'll try to create some resources here",
    "start": "629100",
    "end": "634759"
  },
  {
    "text": "and you can see here at the top we have a missing recommended labels a policy",
    "start": "637200",
    "end": "642300"
  },
  {
    "text": "that says all pods must have food and bar labels so we actually do create the Pod here but",
    "start": "642300",
    "end": "649260"
  },
  {
    "text": "you get that uh you get that warning the second one here is requiring deployments",
    "start": "649260",
    "end": "654720"
  },
  {
    "text": "to have more than uh at least three replicas this can be important because you want people to you know deploy",
    "start": "654720",
    "end": "661079"
  },
  {
    "text": "things in a way that are more AJ and you can see here this is a outright denial and in the same vein here with the",
    "start": "661079",
    "end": "668279"
  },
  {
    "text": "service account this policy is saying that um oh sorry I didn't I didn't apply the kubernetes Manifest ahead of time but",
    "start": "668279",
    "end": "675019"
  },
  {
    "text": "basically this would prevent you from creating a pod with the service account cluster admin",
    "start": "675019",
    "end": "681720"
  },
  {
    "text": "um so let's actually apply that here",
    "start": "681720",
    "end": "687139"
  },
  {
    "text": "um and then we can do",
    "start": "687779",
    "end": "691579"
  },
  {
    "text": "exactly sorry",
    "start": "693060",
    "end": "695899"
  },
  {
    "text": "right okay there we go so now it's uh it's restricting based off that service account because it now exists",
    "start": "702060",
    "end": "707579"
  },
  {
    "text": "um the policies here if we take a look um it's the same policy language as",
    "start": "707579",
    "end": "714120"
  },
  {
    "text": "before the only thing that's changed is that instead of having just uh the resource description and filters you now",
    "start": "714120",
    "end": "719760"
  },
  {
    "text": "have this new mode section where you can Define uh what to do when you match on that policy so in this case we're saying",
    "start": "719760",
    "end": "726360"
  },
  {
    "text": "we're going to deny uh connections um and what operations do you care about so you don't have to say",
    "start": "726360",
    "end": "733380"
  },
  {
    "text": "look at every single possible event you can Define really easily what you actually care about",
    "start": "733380",
    "end": "739680"
  },
  {
    "text": "um so let's take a look at here um so if we run out if we just create a",
    "start": "739680",
    "end": "746640"
  },
  {
    "text": "pod here with the cube CTL run you can see here again we get that warning but we can ignore that",
    "start": "746640",
    "end": "754079"
  },
  {
    "text": "we can now try to oh that should be",
    "start": "754079",
    "end": "759079"
  },
  {
    "text": "database just that um and if we try to connect there it's",
    "start": "761399",
    "end": "766860"
  },
  {
    "text": "going to say we denied admission because you can't connect to any pods with any database in the name so now I'll send it",
    "start": "766860",
    "end": "774839"
  },
  {
    "text": "back over to John to talk about terraform yeah",
    "start": "774839",
    "end": "780240"
  },
  {
    "text": "yeah and so what he was showing there where we're able to scan out the kubernetes uh resources and identify",
    "start": "780240",
    "end": "788519"
  },
  {
    "text": "them but then also block them on the admission controller we have the same type of functionality when you're",
    "start": "788519",
    "end": "795000"
  },
  {
    "text": "talking about terraform so our terraform provider actually will scan at the it'll",
    "start": "795000",
    "end": "801600"
  },
  {
    "text": "do static analysis so where you'll see a lot of policy agents where they'll require the plan to actually run and",
    "start": "801600",
    "end": "807720"
  },
  {
    "text": "validate that your terraforma is working we do static analysis on that which means you can actually have your",
    "start": "807720",
    "end": "813480"
  },
  {
    "text": "developers run this and then unprivileged mode so they can actually check on their local computer is this going to be accepted before they ever",
    "start": "813480",
    "end": "820440"
  },
  {
    "text": "send the pull request before you're actually running the plan and figuring out if it's going to do anything else",
    "start": "820440",
    "end": "826399"
  },
  {
    "text": "so yeah so when we run this you'll see it's gonna Traverse all of your terraform uh",
    "start": "827100",
    "end": "833940"
  },
  {
    "text": "configuration and it's going to actually show you the lines of code that are violating what module they exist in and",
    "start": "833940",
    "end": "840240"
  },
  {
    "text": "it'll really walk you through how to fix that so right now we have two policies that are running that say we require",
    "start": "840240",
    "end": "847459"
  },
  {
    "text": "KMS encryption instead of AES for an S3 bucket and we actually do want",
    "start": "847459",
    "end": "853019"
  },
  {
    "text": "encryption enabled on any sqs cues and so this allows you to just validate any",
    "start": "853019",
    "end": "858420"
  },
  {
    "text": "of the terraform that you're writing locally against those policies and those can be correctness policies governance",
    "start": "858420",
    "end": "864540"
  },
  {
    "text": "policies all that and so if we wanted to go here and fix this it told us the exact lines that we need",
    "start": "864540",
    "end": "870180"
  },
  {
    "text": "to go into put in the diff and so you can say we just need to enable KMS encryption",
    "start": "870180",
    "end": "877680"
  },
  {
    "text": "and then that'll fix one of our errors and then all we have to do is fix our sqsq",
    "start": "877680",
    "end": "883980"
  },
  {
    "text": "and enable encryption on that as well and so this can be ran via CI CD and",
    "start": "883980",
    "end": "889440"
  },
  {
    "text": "your gitlab we're GitHub actions or just locally on your computer",
    "start": "889440",
    "end": "895100"
  },
  {
    "text": "yes all of these are shipped directly into Cloud custodian",
    "start": "896519",
    "end": "901880"
  },
  {
    "text": "yeah and so the way that's working is we wrapped a library from Aqua security",
    "start": "908880",
    "end": "914220"
  },
  {
    "text": "called devsec it's a golang library but Cloud custodians python so we wrapped that and we released it into a new open",
    "start": "914220",
    "end": "920579"
  },
  {
    "text": "source project called TF parse so anyone that would like to parse terraform via python uh you can get it from the GitHub",
    "start": "920579",
    "end": "927540"
  },
  {
    "text": "Cloud custodian tfr's Repository and so the the new command for running",
    "start": "927540",
    "end": "932699"
  },
  {
    "text": "Cloud custodian against airform is called c7n left and it supports actually",
    "start": "932699",
    "end": "938040"
  },
  {
    "text": "traversing your entire graph and so you'll see like one of those uh policies that we were showing it was saying we",
    "start": "938040",
    "end": "944940"
  },
  {
    "text": "require encryption on the S3 bucket but with terraform server-side encryption configurations",
    "start": "944940",
    "end": "950880"
  },
  {
    "text": "are actually a separate resource so it's actually linking those resources together and it's seeing okay there is a",
    "start": "950880",
    "end": "956399"
  },
  {
    "text": "server-side encryption configuration that's linked to this bucket I'm going to run the policy against that in either",
    "start": "956399",
    "end": "962100"
  },
  {
    "text": "reject or accept it um okay so one of the common questions",
    "start": "962100",
    "end": "968220"
  },
  {
    "text": "is how are you different from open policy agent or oppa um so Opa is a much more Broad and",
    "start": "968220",
    "end": "975060"
  },
  {
    "text": "generic policy language that has a lot of use cases outside of just the cloud",
    "start": "975060",
    "end": "980360"
  },
  {
    "text": "one of the things that makes Cloud custodian powerful is we are opinionated",
    "start": "980360",
    "end": "986519"
  },
  {
    "text": "about where we are so with that that gives you the ability to have very expressive filters that semantically",
    "start": "986519",
    "end": "994139"
  },
  {
    "text": "make a lot of sense inside the cloud environment um on top of that it's much more verbose",
    "start": "994139",
    "end": "999540"
  },
  {
    "text": "so here's an example of opa requiring encrypted S3 and this is looking at the",
    "start": "999540",
    "end": "1005600"
  },
  {
    "text": "terraform so purely on the infrastructure as code side not looking at the actual resource itself",
    "start": "1005600",
    "end": "1012279"
  },
  {
    "text": "and these are the equivalent policies in custodians so on the left here this is",
    "start": "1012279",
    "end": "1020300"
  },
  {
    "text": "actually checking in the cloud what your bucket encryption is on all of your buckets on that",
    "start": "1020300",
    "end": "1025760"
  },
  {
    "text": "account and then on the right is the the terraform equivalent so basically much",
    "start": "1025760",
    "end": "1032298"
  },
  {
    "text": "more concise and and ergonomic but of course Opa has a lot of different use cases like if you're using in other",
    "start": "1032299",
    "end": "1038660"
  },
  {
    "text": "contexts there's many reasons to use Opa as well um and I think the next question is how",
    "start": "1038660",
    "end": "1044600"
  },
  {
    "text": "are you different from kybrino so California was great uh because it's built you know natively for kubernetes",
    "start": "1044600",
    "end": "1051620"
  },
  {
    "text": "and it has a lot of great uh Power and features in the kubernetes space but if",
    "start": "1051620",
    "end": "1057380"
  },
  {
    "text": "you're looking for a single tool to manage the cloud kubernetes terraform",
    "start": "1057380",
    "end": "1063100"
  },
  {
    "text": "kyvarna doesn't really do that in the future it may but as of right now",
    "start": "1063100",
    "end": "1068559"
  },
  {
    "text": "custodian is really the only one that's touching the entire stack going from you know your infrastructure as code all the",
    "start": "1068559",
    "end": "1074720"
  },
  {
    "text": "way to the cloud to the cluster as well and so here's another example of",
    "start": "1074720",
    "end": "1080000"
  },
  {
    "text": "what a policy looks like inside of kyverno and here's the equivalent inside of",
    "start": "1080000",
    "end": "1086120"
  },
  {
    "text": "custodian so again a little bit more concise but for the different use cases",
    "start": "1086120",
    "end": "1092660"
  },
  {
    "text": "you may want to pick kyrono but for people that are using custodian one of the initial goals with the kubernetes",
    "start": "1092660",
    "end": "1099140"
  },
  {
    "text": "provider is to provide something that's very native and familiar to existing",
    "start": "1099140",
    "end": "1104600"
  },
  {
    "text": "concerning users so um I think that's it open to questions",
    "start": "1104600",
    "end": "1111940"
  },
  {
    "text": "thanks for having us yes and yeah we've got John going out",
    "start": "1111940",
    "end": "1119419"
  },
  {
    "text": "and uh hanging over the mic",
    "start": "1119419",
    "end": "1122620"
  },
  {
    "text": "hey uh so uh one of the questions I have this is maybe a bit speculative but",
    "start": "1124520",
    "end": "1130160"
  },
  {
    "text": "uh since you can look at terraform and you can also for like like a governance",
    "start": "1130160",
    "end": "1135440"
  },
  {
    "text": "and you can also look at AWS or another cloud provider for or like kubernetes for governance would",
    "start": "1135440",
    "end": "1142400"
  },
  {
    "text": "there be a way to add a requirement that something that",
    "start": "1142400",
    "end": "1149299"
  },
  {
    "text": "like okay if this S3 bucket exists in AWS uh it's required as part of our",
    "start": "1149299",
    "end": "1154880"
  },
  {
    "text": "governance that it's in terraform for instance like to enforce like",
    "start": "1154880",
    "end": "1161419"
  },
  {
    "text": "IEC coverage yeah that's that's a good question um the question was if there's a uh a",
    "start": "1161419",
    "end": "1167840"
  },
  {
    "text": "bucket you have in S3 that's required to be managed by terraform could we do it in Cloud custodian",
    "start": "1167840",
    "end": "1173539"
  },
  {
    "text": "um yeah I think the facilities are there I there's some interesting policies that you could write so for",
    "start": "1173539",
    "end": "1181340"
  },
  {
    "text": "example with the event driven policies you can take a look at the actual underlying event which means that you",
    "start": "1181340",
    "end": "1187039"
  },
  {
    "text": "can also take a look at who the user is that's creating it so any sort of modifications to the bucket if it's not",
    "start": "1187039",
    "end": "1193760"
  },
  {
    "text": "coming from you know a user that you know is part of your CI um and you believe you can actually also",
    "start": "1193760",
    "end": "1200960"
  },
  {
    "text": "inspect the user agent itself which will allow you to check like with a regex expression that the user agent is",
    "start": "1200960",
    "end": "1207919"
  },
  {
    "text": "terraform um that's that's how I would do it I'm sure there's other ways that uh you know",
    "start": "1207919",
    "end": "1213980"
  },
  {
    "text": "other members of the community might be able to chime in well I was thinking is because you can statically analyze the Tariff form and like presumably you",
    "start": "1213980",
    "end": "1221419"
  },
  {
    "text": "could then link that statically analyze terraform to an actual resource if you can make sure that for each resource",
    "start": "1221419",
    "end": "1227240"
  },
  {
    "text": "there exists like some terraform basically of course you could look at like the the user agent or whatever that",
    "start": "1227240",
    "end": "1233840"
  },
  {
    "text": "seems like a bit of a hack kind of because like okay that that will say for like",
    "start": "1233840",
    "end": "1240740"
  },
  {
    "text": "stuff created on the bucket but then like okay for like modifications it gets a bit right I mean I I wouldn't say it's",
    "start": "1240740",
    "end": "1247039"
  },
  {
    "text": "a hack I mean if you have stuff in terraform you really should not it really shouldn't be any other agent",
    "start": "1247039",
    "end": "1253220"
  },
  {
    "text": "going and modifying the resource um and that's I think that's something",
    "start": "1253220",
    "end": "1258740"
  },
  {
    "text": "that I would want to know about as a SRE or you know Cloud Engineers like are people coming in and actually manually",
    "start": "1258740",
    "end": "1264620"
  },
  {
    "text": "modifying stuff um especially if it's supposed to be managed by terraform but I think if you're if your organization's in the",
    "start": "1264620",
    "end": "1271340"
  },
  {
    "text": "state where you have widespread infrastructures code adoption like",
    "start": "1271340",
    "end": "1276679"
  },
  {
    "text": "um enforcing those kinds of standards is a lot easier than really if you're in kind of a 50 50 state where like some",
    "start": "1276679",
    "end": "1283760"
  },
  {
    "text": "developers are really using IEC and terraform uh cloudformation what have you uh and other people are still doing",
    "start": "1283760",
    "end": "1290120"
  },
  {
    "text": "click Ops well well an example I guess is like okay like you could have a if",
    "start": "1290120",
    "end": "1295220"
  },
  {
    "text": "you create a terraform resource like okay you write some telephone code you create a resource using like terraform locally",
    "start": "1295220",
    "end": "1301820"
  },
  {
    "text": "um like okay what it'll see if you look at the users as it was created",
    "start": "1301820",
    "end": "1307520"
  },
  {
    "text": "um using like the terraform agent or whatever but if you uh is there a way to",
    "start": "1307520",
    "end": "1312679"
  },
  {
    "text": "talk like okay like let's look at what's in git and let's look at what's in the",
    "start": "1312679",
    "end": "1318679"
  },
  {
    "text": "um and let's look at what's in AWS and to see like okay it's like everything",
    "start": "1318679",
    "end": "1323720"
  },
  {
    "text": "like in the like for instance could you check like okay is everything that's like in the production account also in",
    "start": "1323720",
    "end": "1332720"
  },
  {
    "text": "the main branch um of like the IAC repower or whatever like the",
    "start": "1332720",
    "end": "1339380"
  },
  {
    "text": "productive branch",
    "start": "1339380",
    "end": "1342100"
  },
  {
    "text": "it's like the connection to like the direct connection between terraform",
    "start": "1345940",
    "end": "1352280"
  },
  {
    "text": "HCL and the environment isn't defined by either of them it's defined by state",
    "start": "1352280",
    "end": "1359419"
  },
  {
    "text": "yeah and the C7 and left stuff is again it's a static analysis of of the",
    "start": "1359419",
    "end": "1365120"
  },
  {
    "text": "terraform code and not uh taking a look at the state right now there's another question back there",
    "start": "1365120",
    "end": "1372640"
  },
  {
    "text": "uh so with your terraform stuff does it also work with modules or is it only if",
    "start": "1374059",
    "end": "1379220"
  },
  {
    "text": "it's all in the main TF I'll let John answer that yeah it works",
    "start": "1379220",
    "end": "1384559"
  },
  {
    "text": "on the modules as well so it'll actually download all the modules and Traverse them as well and so it it'll run a knit",
    "start": "1384559",
    "end": "1391460"
  },
  {
    "text": "on there at least like download everything and yeah and it traverses through and works it",
    "start": "1391460",
    "end": "1396860"
  },
  {
    "text": "do you have any more you want to say okay another question in the back behind you",
    "start": "1396860",
    "end": "1403900"
  },
  {
    "text": "um how would you compare with as your policy for Azure resources that's a great question",
    "start": "1404900",
    "end": "1411799"
  },
  {
    "text": "um so we actually support Azure policies as well as part of the way that we deploy it's we have similar questions",
    "start": "1411799",
    "end": "1418220"
  },
  {
    "text": "with you know AWS config so with custodian it's really like the easiest way to deploy those types of rules I",
    "start": "1418220",
    "end": "1424460"
  },
  {
    "text": "like appeal speak more to that yeah I mean Azure policies are are powerful as",
    "start": "1424460",
    "end": "1430220"
  },
  {
    "text": "a you know control plane primitive um but I think the challenges is expressivity and readability whereas",
    "start": "1430220",
    "end": "1437600"
  },
  {
    "text": "these are potentially operating both in CI pre-deployment much more expressive and can be operated on a developer",
    "start": "1437600",
    "end": "1445039"
  },
  {
    "text": "station as well and can also do analysis post deployment so to speak whereas Azure policies like",
    "start": "1445039",
    "end": "1451640"
  },
  {
    "text": "um the last time I looked this is a fairly primitive comparison model as far as what you could do and defining",
    "start": "1451640",
    "end": "1457880"
  },
  {
    "text": "exceptions and other things other real world things were actually a little bit harder",
    "start": "1457880",
    "end": "1463640"
  },
  {
    "text": "yeah and I'll add like one of the big benefits of custodian is the fact that it's operating across all these things",
    "start": "1463640",
    "end": "1470059"
  },
  {
    "text": "it's doing kubernetes terraform Azure gcp all that and so a lot of times like",
    "start": "1470059",
    "end": "1475640"
  },
  {
    "text": "we said with Opa and caverno they're great in the place that they're sitting but when you're trying to govern across",
    "start": "1475640",
    "end": "1482840"
  },
  {
    "text": "all of it it's really nice to have it one policy agent that everyone can learn",
    "start": "1482840",
    "end": "1488020"
  },
  {
    "text": "so like when we rolled out opa zapier",
    "start": "1488020",
    "end": "1493940"
  },
  {
    "text": "the people who were writing Rego all the time knew how to write rhaega anyone",
    "start": "1493940",
    "end": "1499100"
  },
  {
    "text": "else it was difficult every single time and so with custodian when it spread across all of these different",
    "start": "1499100",
    "end": "1504260"
  },
  {
    "text": "environments people are writing it all the time and it's yaml so it's much easier for them to understand and so",
    "start": "1504260",
    "end": "1510200"
  },
  {
    "text": "Azure policy is a great policy agent but if you want it across everything you're going to want something like",
    "start": "1510200",
    "end": "1515780"
  },
  {
    "text": "custodian here we've got one over there yeah",
    "start": "1515780",
    "end": "1522220"
  },
  {
    "text": "oh uh today in our accounts one problem that we face is folks use tools that",
    "start": "1522860",
    "end": "1530299"
  },
  {
    "text": "create Cloud resources like EK CDL cops",
    "start": "1530299",
    "end": "1535400"
  },
  {
    "text": "uh and when we use cloud custodian right now one of our problems is we cannot do",
    "start": "1535400",
    "end": "1542480"
  },
  {
    "text": "a proper cleanup we have some dangling resources because uh",
    "start": "1542480",
    "end": "1548840"
  },
  {
    "text": "EK serial for example uses cloud formation for some and then does IM",
    "start": "1548960",
    "end": "1554000"
  },
  {
    "text": "roles and leaves things behind so kind of just wondering if there's any",
    "start": "1554000",
    "end": "1560240"
  },
  {
    "text": "plan to kind of I do not know where to fix it or how to",
    "start": "1560240",
    "end": "1565700"
  },
  {
    "text": "fix it thank you because I wanted to leave",
    "start": "1565700",
    "end": "1573520"
  },
  {
    "text": "so you're asking like if resources are being left over after a confirmation Sac",
    "start": "1576380",
    "end": "1581840"
  },
  {
    "text": "runs like I want to clean that up right like I want to use custodian to clean it up",
    "start": "1581840",
    "end": "1588340"
  },
  {
    "text": "is that the goal I'm not quite sure",
    "start": "1594500",
    "end": "1598600"
  },
  {
    "text": "serial for example it's not just creating resources using that there's",
    "start": "1605740",
    "end": "1611480"
  },
  {
    "text": "some leftovers around that are the problem and then cops is a whole different",
    "start": "1611480",
    "end": "1617360"
  },
  {
    "text": "Beast I would say that's one other use case yeah and so I'll say with custodian",
    "start": "1617360",
    "end": "1622520"
  },
  {
    "text": "we do have actions for uh modifying all of this as well so we can remediate any",
    "start": "1622520",
    "end": "1627860"
  },
  {
    "text": "of these resources so the thing you would need to do is if you want to manage any of these resources that are",
    "start": "1627860",
    "end": "1633740"
  },
  {
    "text": "being auto-generated because kubernetes does the same thing like you're using a AWS load balancer controller you know",
    "start": "1633740",
    "end": "1638960"
  },
  {
    "text": "it's going to be generating load balancers on your cloud and then so if you want to identify those as long as",
    "start": "1638960",
    "end": "1644539"
  },
  {
    "text": "you're having whatever tool is generating those resources labeling them or some way to identify that they're",
    "start": "1644539",
    "end": "1650419"
  },
  {
    "text": "created by this tool or like we were talking about earlier you can use the ability to scan for underutilized",
    "start": "1650419",
    "end": "1656960"
  },
  {
    "text": "resources as well like unused resources and you can just run policies that say hey I've got this unused resource",
    "start": "1656960",
    "end": "1662960"
  },
  {
    "text": "identify it remove it a lot of times what we recommend is actually just marking it for removal like market for",
    "start": "1662960",
    "end": "1669380"
  },
  {
    "text": "deletion send a notification hey I found this unused resource I'm going to delete it in a week if nobody notices it's",
    "start": "1669380",
    "end": "1675919"
  },
  {
    "text": "going to disappear in a week and then they'll notice then so but hopefully it's an unused resource",
    "start": "1675919",
    "end": "1682460"
  },
  {
    "text": "yeah I think um ultimately it you really care about the underlying actual Cloud resource",
    "start": "1682460",
    "end": "1688760"
  },
  {
    "text": "um like the metadata you have on the cube API server doesn't really cost you any money but the load balancers that are out there",
    "start": "1688760",
    "end": "1695600"
  },
  {
    "text": "will and concerning can Target that directly um yeah we had a question over here when",
    "start": "1695600",
    "end": "1701659"
  },
  {
    "text": "you are looking at an existing infrastructure are you able to do whatever we want as",
    "start": "1701659",
    "end": "1708440"
  },
  {
    "text": "an output like CSV file or yeah um yeah so custodian has a bunch of uh",
    "start": "1708440",
    "end": "1715039"
  },
  {
    "text": "uh the question was are we able to basically report on that data um in formats like CSV uh yeah so custodian",
    "start": "1715039",
    "end": "1722600"
  },
  {
    "text": "comes with a built-in report command where you're able to pass in the policy",
    "start": "1722600",
    "end": "1727880"
  },
  {
    "text": "file that you were using as well as the output directory and it will create a tabular view in CSV",
    "start": "1727880",
    "end": "1735320"
  },
  {
    "text": "um on top of that there's a whole bunch of other tools inside of custodian as well it's not just the custodian CLI",
    "start": "1735320",
    "end": "1740840"
  },
  {
    "text": "there's the mailer which is good for notifications policy stream um",
    "start": "1740840",
    "end": "1745880"
  },
  {
    "text": "there's Trail crater and stuff like that so there's there's a whole lot of uh cool stuff in the repo",
    "start": "1745880",
    "end": "1751520"
  },
  {
    "text": "um and yeah reporting is a huge part of that because ultimately the people I care about compliance",
    "start": "1751520",
    "end": "1756980"
  },
  {
    "text": "um are typically not running clis they usually want like an Excel sheet so yeah",
    "start": "1756980",
    "end": "1764080"
  },
  {
    "text": "it's like it's based on going off his questions do you uh does it do like a dependency search so like say something",
    "start": "1766640",
    "end": "1772760"
  },
  {
    "text": "like crazy ec2 instance and then they tell a security group to that and then maybe they want to do a ALB on top of",
    "start": "1772760",
    "end": "1778820"
  },
  {
    "text": "that if I delete like the ec2 instance um or before deleted we'll say well this",
    "start": "1778820",
    "end": "1784820"
  },
  {
    "text": "is dependent on this this and this you may want to delete this or not delete this yeah the question was around",
    "start": "1784820",
    "end": "1791480"
  },
  {
    "text": "um how does custodian handle basically interdependencies between the resources um so",
    "start": "1791480",
    "end": "1797899"
  },
  {
    "text": "with custodians really uh the query part of custodian allows you to query on",
    "start": "1797899",
    "end": "1804080"
  },
  {
    "text": "relationships as well um your question about like before you delete uh",
    "start": "1804080",
    "end": "1810200"
  },
  {
    "text": "you know a security group you got to make sure that it's not attached to anything I would have to look at the specific code for that but I'm pretty",
    "start": "1810200",
    "end": "1817039"
  },
  {
    "text": "sure we we cut that and handle that um the security group itself it has like an",
    "start": "1817039",
    "end": "1822980"
  },
  {
    "text": "unused filter so you can use that filter first before you try to delete it and there's other functionality that's",
    "start": "1822980",
    "end": "1828740"
  },
  {
    "text": "similar to that for other resource types as well I got this question back there",
    "start": "1828740",
    "end": "1836260"
  },
  {
    "text": "these policies don't look very hard to write but I have to think about all the",
    "start": "1839000",
    "end": "1844100"
  },
  {
    "text": "things that I want is there some Library somewhere of like these are pretty good policies that I could look at as",
    "start": "1844100",
    "end": "1849500"
  },
  {
    "text": "examples yeah so we have uh on the documentation on our website we have a",
    "start": "1849500",
    "end": "1855260"
  },
  {
    "text": "bunch of sample policies um you're right the custodian language is very easy to kind of understand",
    "start": "1855260",
    "end": "1861320"
  },
  {
    "text": "um but you do it does help to get some initial traction first so I'll take a look at those and it covers a wide array",
    "start": "1861320",
    "end": "1868580"
  },
  {
    "text": "of use cases so like simple compliance just stuff like cost efficiency using off hours and stuff like that",
    "start": "1868580",
    "end": "1875179"
  },
  {
    "text": "yeah and if you uh go to GitHub there's a custodian awesome repo that lists",
    "start": "1875179",
    "end": "1881480"
  },
  {
    "text": "everyone's favorite policies that they've ever in and that's a good way to start because there's off hours and",
    "start": "1881480",
    "end": "1886700"
  },
  {
    "text": "encryption policies and all of that listed there uh if you could get an Uber and run here",
    "start": "1886700",
    "end": "1893840"
  },
  {
    "text": "from across town and missed the presentation what would be the best way to catch up on what was missed or if you",
    "start": "1893840",
    "end": "1901760"
  },
  {
    "text": "want to send something to your co-workers or other people that might be interested uh sure so I would start by",
    "start": "1901760",
    "end": "1907279"
  },
  {
    "text": "checking out our recently revamped website pakistanian.io you can also",
    "start": "1907279",
    "end": "1912559"
  },
  {
    "text": "check out the GitHub repo it's Cloud custodian we also have a slack and getter which you can get access to both",
    "start": "1912559",
    "end": "1918980"
  },
  {
    "text": "on that on the website and if we're in there you know pretty active so the",
    "start": "1918980",
    "end": "1925340"
  },
  {
    "text": "slack is relatively new so if you see there's only like 150 odd people don't be alarmed we're trying to move off a",
    "start": "1925340",
    "end": "1931940"
  },
  {
    "text": "guitar or not off of guitar but also to slack but yeah we're there and then we also host a community meeting uh every",
    "start": "1931940",
    "end": "1938720"
  },
  {
    "text": "two every other Tuesday um it's a 11 A.M Pacific time so",
    "start": "1938720",
    "end": "1945740"
  },
  {
    "text": "whatever oh yes and we also have a YouTube channel um",
    "start": "1945740",
    "end": "1950960"
  },
  {
    "text": "yeah so we recently had governance as code day uh which had a bunch of different talks from all sorts of",
    "start": "1950960",
    "end": "1956419"
  },
  {
    "text": "different users uh including like Intuit um as well as uh you know stacklight as",
    "start": "1956419",
    "end": "1962899"
  },
  {
    "text": "well was there so I would definitely go check out those videos and then I think we have a just a bunch of other",
    "start": "1962899",
    "end": "1969980"
  },
  {
    "text": "videos as well so I'm not even on the YouTube channel about custodian so yeah but to catch up",
    "start": "1969980",
    "end": "1976039"
  },
  {
    "text": "weekend right yaml to govern all the things exam all the way down so",
    "start": "1976039",
    "end": "1983480"
  },
  {
    "text": "yeah",
    "start": "1983480",
    "end": "1985778"
  },
  {
    "text": "for the admissions controller how are those applied to the cluster is it through a crd and we can see tell apply",
    "start": "1989360",
    "end": "1995240"
  },
  {
    "text": "the files so right now it's through uh config map",
    "start": "1995240",
    "end": "2002140"
  },
  {
    "text": "so basically the the service that's running it's going to just mount it into a volume and then read all the policies",
    "start": "2002140",
    "end": "2008200"
  },
  {
    "text": "from there so how you mount that volume into it doesn't matter but the helm chart itself is just going to load it up",
    "start": "2008200",
    "end": "2014260"
  },
  {
    "text": "into a config map and then just read them from there",
    "start": "2014260",
    "end": "2018120"
  },
  {
    "text": "yeah and eventually we may introduce uh crds for policies so that people can",
    "start": "2019360",
    "end": "2024460"
  },
  {
    "text": "deploy them that way but right now we're trying to work with people who are using it across",
    "start": "2024460",
    "end": "2030399"
  },
  {
    "text": "many different resources so we expect them to not only be deploying kubernetes policies by terraform and AWS and all",
    "start": "2030399",
    "end": "2035860"
  },
  {
    "text": "that as well so we're assuming they'll have a repo of policies at that point",
    "start": "2035860",
    "end": "2041700"
  },
  {
    "text": "cool um I think we're basically oh there's one more question I think",
    "start": "2042760",
    "end": "2049500"
  },
  {
    "text": "right yeah so uh I only joined the ark",
    "start": "2051000",
    "end": "2056520"
  },
  {
    "text": "recently uh at my current company uh we have a lot of resources out there that",
    "start": "2056520",
    "end": "2064060"
  },
  {
    "text": "were created a while back at this point I think and we don't know who created them uh we",
    "start": "2064060",
    "end": "2071080"
  },
  {
    "text": "don't know if they are still at the company so the auto tag only supports tagging news on the create API right now",
    "start": "2071080",
    "end": "2079000"
  },
  {
    "text": "right so is there support or are you planning to help what I can do like history and yeah uh so the question was",
    "start": "2079000",
    "end": "2087940"
  },
  {
    "text": "uh how can we basically fix tags on resources that are already out there um what cloud are you using",
    "start": "2087940",
    "end": "2094858"
  },
  {
    "text": "okay cool okay so for AWS we have a tool called a",
    "start": "2094859",
    "end": "2100180"
  },
  {
    "text": "trail Creator um it's not super well known but they basically can scan your uh cloudtrail",
    "start": "2100180",
    "end": "2106300"
  },
  {
    "text": "event history and then do resource attribution based off of that",
    "start": "2106300",
    "end": "2111400"
  },
  {
    "text": "um and that's a like you know what you described right now is basically the",
    "start": "2111400",
    "end": "2116680"
  },
  {
    "text": "exact scenario that many many large companies are in it's also the scenario that basically caused Cloud strain to",
    "start": "2116680",
    "end": "2123640"
  },
  {
    "text": "even exist in the first place is there's a whole bunch of stuff we don't know who owns it we got to figure it out because we gotta also uh govern it so",
    "start": "2123640",
    "end": "2131020"
  },
  {
    "text": "um I'd recommend checking out it's under the tools directory so it's not hey you guys go like one one directory",
    "start": "2131020",
    "end": "2137140"
  },
  {
    "text": "in but yeah",
    "start": "2137140",
    "end": "2139859"
  },
  {
    "text": "yeah it's using like Athena or yeah all right thanks everyone for coming uh",
    "start": "2152020",
    "end": "2158859"
  },
  {
    "text": "we're out of time so we're gonna end there uh but we've got many of the contributors and maintainers of cloud custodian here in the crowd so if you",
    "start": "2158859",
    "end": "2165579"
  },
  {
    "text": "have more questions we can take them offline and talk after thanks a lot thanks everyone",
    "start": "2165579",
    "end": "2171720"
  }
]