[
  {
    "start": "0",
    "end": "63000"
  },
  {
    "text": "session uh and also just because this",
    "start": "560",
    "end": "4120"
  },
  {
    "text": "isn't quite the last session of cukon",
    "start": "4120",
    "end": "6600"
  },
  {
    "text": "there is at least one more after this",
    "start": "6600",
    "end": "8480"
  },
  {
    "text": "and I want to highlight the person in",
    "start": "8480",
    "end": "9840"
  },
  {
    "text": "the very front row gar who's going to be",
    "start": "9840",
    "end": "11920"
  },
  {
    "text": "giving that session uh and he really",
    "start": "11920",
    "end": "14360"
  },
  {
    "text": "could or should be giving this session",
    "start": "14360",
    "end": "16278"
  },
  {
    "text": "right now because he did a lot of the",
    "start": "16279",
    "end": "17720"
  },
  {
    "text": "work for routing so all credit to G here",
    "start": "17720",
    "end": "20920"
  },
  {
    "text": "so he can come up and give the same",
    "start": "20920",
    "end": "24600"
  },
  {
    "text": "thought no pressure no pressure no",
    "start": "25519",
    "end": "28800"
  },
  {
    "text": "pressure so",
    "start": "28800",
    "end": "31400"
  },
  {
    "text": "I don't know I don't know we'll see I'll",
    "start": "31400",
    "end": "32758"
  },
  {
    "text": "try and live up to it but uh let's talk",
    "start": "32759",
    "end": "34920"
  },
  {
    "text": "about to routing and the many trade-offs",
    "start": "34920",
    "end": "37840"
  },
  {
    "text": "that exist within apolog routing uh my",
    "start": "37840",
    "end": "41160"
  },
  {
    "text": "name is Rob Scott I work at Google on GK",
    "start": "41160",
    "end": "44160"
  },
  {
    "text": "networking I've worked there for five",
    "start": "44160",
    "end": "46879"
  },
  {
    "text": "years or thereabouts and uh before then",
    "start": "46879",
    "end": "49719"
  },
  {
    "text": "I was an end user of kubernetes so I",
    "start": "49719",
    "end": "51600"
  },
  {
    "text": "have some experience with actually",
    "start": "51600",
    "end": "53719"
  },
  {
    "text": "dealing with some of the frustrations",
    "start": "53719",
    "end": "55520"
  },
  {
    "text": "and magic of kubernetes along the way",
    "start": "55520",
    "end": "58559"
  },
  {
    "text": "but these days I mostly work on things",
    "start": "58559",
    "end": "60399"
  },
  {
    "text": "like gway API and other kubernetes",
    "start": "60399",
    "end": "62440"
  },
  {
    "text": "networking things now it might help to",
    "start": "62440",
    "end": "66159"
  },
  {
    "start": "63000",
    "end": "295000"
  },
  {
    "text": "provide just a little bit of context",
    "start": "66159",
    "end": "68159"
  },
  {
    "text": "about what we're talking about with",
    "start": "68159",
    "end": "69400"
  },
  {
    "text": "apolog routing and the components",
    "start": "69400",
    "end": "71320"
  },
  {
    "text": "involved here so first off uh there are",
    "start": "71320",
    "end": "76080"
  },
  {
    "text": "Services pods probably mostly familiar",
    "start": "76080",
    "end": "78280"
  },
  {
    "text": "with them and then there's this really",
    "start": "78280",
    "end": "79799"
  },
  {
    "text": "fun endpoint slice controller well I'm",
    "start": "79799",
    "end": "81479"
  },
  {
    "text": "probably the only person who considers",
    "start": "81479",
    "end": "82720"
  },
  {
    "text": "it fun this was my first project welcome",
    "start": "82720",
    "end": "84960"
  },
  {
    "text": "to Google uh and so endpoint slice",
    "start": "84960",
    "end": "87600"
  },
  {
    "text": "controller is this thing that basically",
    "start": "87600",
    "end": "89360"
  },
  {
    "text": "creates shards of end points uh and for",
    "start": "89360",
    "end": "92759"
  },
  {
    "text": "each service finds all the pods finds",
    "start": "92759",
    "end": "96119"
  },
  {
    "text": "the IPS and ports drops them into",
    "start": "96119",
    "end": "98720"
  },
  {
    "text": "endpoint slice and then you have a data",
    "start": "98720",
    "end": "100880"
  },
  {
    "text": "plane usually C proxy on each node that",
    "start": "100880",
    "end": "103960"
  },
  {
    "text": "reads those and does some cool IP tables",
    "start": "103960",
    "end": "106479"
  },
  {
    "text": "magic to do the routing for you and what",
    "start": "106479",
    "end": "109079"
  },
  {
    "text": "we're going to be talking about is",
    "start": "109079",
    "end": "110320"
  },
  {
    "text": "different forms of logic in C proxy or",
    "start": "110320",
    "end": "112600"
  },
  {
    "text": "your kubernetes data planes of",
    "start": "112600",
    "end": "114920"
  },
  {
    "text": "choice so by default everything just",
    "start": "114920",
    "end": "119079"
  },
  {
    "text": "goes everywhere incling this well maybe",
    "start": "119079",
    "end": "121119"
  },
  {
    "text": "not everywhere but there's no concept of",
    "start": "121119",
    "end": "123560"
  },
  {
    "text": "preferring traffic stay close to where",
    "start": "123560",
    "end": "125680"
  },
  {
    "text": "it originated from if it's an endpoint",
    "start": "125680",
    "end": "127920"
  },
  {
    "text": "behind a service it's equally likely to",
    "start": "127920",
    "end": "130080"
  },
  {
    "text": "go there as opposed to one in a",
    "start": "130080",
    "end": "131760"
  },
  {
    "text": "completely different Zone we don't",
    "start": "131760",
    "end": "133599"
  },
  {
    "text": "really care now the pros of that is it's",
    "start": "133599",
    "end": "136480"
  },
  {
    "text": "least likely to overload traffic to a",
    "start": "136480",
    "end": "138280"
  },
  {
    "text": "single end point and Autos scaling is",
    "start": "138280",
    "end": "140720"
  },
  {
    "text": "straightforward well I'm not going to",
    "start": "140720",
    "end": "142680"
  },
  {
    "text": "say Auto scaling is ever completely",
    "start": "142680",
    "end": "144000"
  },
  {
    "text": "straightforward but it's less",
    "start": "144000",
    "end": "145840"
  },
  {
    "text": "complicated than when you start to add",
    "start": "145840",
    "end": "147959"
  },
  {
    "text": "some preference about we traffic",
    "start": "147959",
    "end": "150560"
  },
  {
    "text": "goes on the con side if you happen to",
    "start": "150560",
    "end": "154000"
  },
  {
    "text": "use a cloud provider or something where",
    "start": "154000",
    "end": "156239"
  },
  {
    "text": "traffic going across zones is expensive",
    "start": "156239",
    "end": "159519"
  },
  {
    "text": "this approach can be rather expensive",
    "start": "159519",
    "end": "162840"
  },
  {
    "text": "and then second you know if you do want",
    "start": "162840",
    "end": "164640"
  },
  {
    "text": "to isolate uh your applications across",
    "start": "164640",
    "end": "167280"
  },
  {
    "text": "zonal boundaries this doesn't work very",
    "start": "167280",
    "end": "170000"
  },
  {
    "text": "well for",
    "start": "170000",
    "end": "171519"
  },
  {
    "text": "that so very many people have asked this",
    "start": "171519",
    "end": "176000"
  },
  {
    "text": "seemingly simple question wouldn't it be",
    "start": "176000",
    "end": "178640"
  },
  {
    "text": "nice if traffic could could just go",
    "start": "178640",
    "end": "181519"
  },
  {
    "text": "closer to where it originated from could",
    "start": "181519",
    "end": "183760"
  },
  {
    "text": "we just keep it closer to where it",
    "start": "183760",
    "end": "185120"
  },
  {
    "text": "started from and naive younger me",
    "start": "185120",
    "end": "188400"
  },
  {
    "text": "thought this would be a really cool",
    "start": "188400",
    "end": "190000"
  },
  {
    "text": "problem to try and solve and it is not",
    "start": "190000",
    "end": "193799"
  },
  {
    "text": "simple or many other things to solve and",
    "start": "193799",
    "end": "198239"
  },
  {
    "text": "well here we go but let's talk about",
    "start": "198239",
    "end": "199959"
  },
  {
    "text": "what we ideally want so the ideal is",
    "start": "199959",
    "end": "203080"
  },
  {
    "text": "that you can keep traffic close to where",
    "start": "203080",
    "end": "205440"
  },
  {
    "text": "it originated from so you can minimize",
    "start": "205440",
    "end": "207239"
  },
  {
    "text": "costs improve that zonal isolation and",
    "start": "207239",
    "end": "210159"
  },
  {
    "text": "ideally what you want is you fill the",
    "start": "210159",
    "end": "211519"
  },
  {
    "text": "closest end points and then you spill",
    "start": "211519",
    "end": "213680"
  },
  {
    "text": "over to the next next closest end points",
    "start": "213680",
    "end": "216959"
  },
  {
    "text": "but what does full actually mean and",
    "start": "216959",
    "end": "219760"
  },
  {
    "text": "that's actually a very loaded question",
    "start": "219760",
    "end": "223239"
  },
  {
    "text": "it's very difficult to determine what",
    "start": "223239",
    "end": "225760"
  },
  {
    "text": "full means it's going to be different",
    "start": "225760",
    "end": "227319"
  },
  {
    "text": "for every workload for every",
    "start": "227319",
    "end": "229080"
  },
  {
    "text": "organization maybe it's some combination",
    "start": "229080",
    "end": "231120"
  },
  {
    "text": "of CPU memory GPU utilization maybe it's",
    "start": "231120",
    "end": "234799"
  },
  {
    "text": "active connections maybe it's an L7",
    "start": "234799",
    "end": "237519"
  },
  {
    "text": "metric that we don't really have at all",
    "start": "237519",
    "end": "239079"
  },
  {
    "text": "in kubernetes",
    "start": "239079",
    "end": "240280"
  },
  {
    "text": "I don't know and then secondary like",
    "start": "240280",
    "end": "243400"
  },
  {
    "text": "kubernetes API server is not really a",
    "start": "243400",
    "end": "245079"
  },
  {
    "text": "great solution for propagating this",
    "start": "245079",
    "end": "246519"
  },
  {
    "text": "information all the way down kuiz API",
    "start": "246519",
    "end": "249000"
  },
  {
    "text": "server is just not meant for this kind",
    "start": "249000",
    "end": "251000"
  },
  {
    "text": "of rapidly updating data endpoint slices",
    "start": "251000",
    "end": "253799"
  },
  {
    "text": "is basically the limit of how far you",
    "start": "253799",
    "end": "256000"
  },
  {
    "text": "want to push that and you definitely",
    "start": "256000",
    "end": "257840"
  },
  {
    "text": "don't want to add metrics or anything",
    "start": "257840",
    "end": "259799"
  },
  {
    "text": "beyond that so should we add some kind",
    "start": "259799",
    "end": "262720"
  },
  {
    "text": "of new way to propagate per endpoint",
    "start": "262720",
    "end": "264840"
  },
  {
    "text": "metrics to the data plate and I start",
    "start": "264840",
    "end": "267639"
  },
  {
    "text": "started going down quite the LA here",
    "start": "267639",
    "end": "270600"
  },
  {
    "text": "uh and don't worry I haven't given up on",
    "start": "270600",
    "end": "272320"
  },
  {
    "text": "this rabbit hole but ultimately",
    "start": "272320",
    "end": "274560"
  },
  {
    "text": "something is better than nothing so",
    "start": "274560",
    "end": "276919"
  },
  {
    "text": "don't let the perfect identity of the",
    "start": "276919",
    "end": "278680"
  },
  {
    "text": "good let's start with something that we",
    "start": "278680",
    "end": "280479"
  },
  {
    "text": "can achieve and then we'll revisit that",
    "start": "280479",
    "end": "283720"
  },
  {
    "text": "proper feedback loop at some future",
    "start": "283720",
    "end": "287520"
  },
  {
    "text": "point so",
    "start": "287520",
    "end": "289759"
  },
  {
    "text": "Perfection is not quite as good as",
    "start": "289759",
    "end": "292039"
  },
  {
    "text": "progress so let's just a from progress",
    "start": "292039",
    "end": "294560"
  },
  {
    "text": "go from so let's talk about the very",
    "start": "294560",
    "end": "298160"
  },
  {
    "text": "long history of apology just didn't want",
    "start": "298160",
    "end": "301560"
  },
  {
    "text": "to deal with and we may introduce",
    "start": "301560",
    "end": "304240"
  },
  {
    "text": "another level of hierarchy at some point",
    "start": "304240",
    "end": "306160"
  },
  {
    "text": "in the future but for now we want to",
    "start": "306160",
    "end": "308039"
  },
  {
    "text": "just start with two because that",
    "start": "308039",
    "end": "309560"
  },
  {
    "text": "represented the most common",
    "start": "309560",
    "end": "311919"
  },
  {
    "text": "case so how this works is probably best",
    "start": "311919",
    "end": "315360"
  },
  {
    "text": "represented by this diagram so let's say",
    "start": "315360",
    "end": "318160"
  },
  {
    "text": "that you have three equally sized zones",
    "start": "318160",
    "end": "321680"
  },
  {
    "text": "and you you have four end points in one",
    "start": "321680",
    "end": "324360"
  },
  {
    "text": "of those zones three end points in",
    "start": "324360",
    "end": "326240"
  },
  {
    "text": "another Zone and two end points in the",
    "start": "326240",
    "end": "328240"
  },
  {
    "text": "other one what's going to happen happen",
    "start": "328240",
    "end": "330039"
  },
  {
    "text": "is in zone a you're going to take the",
    "start": "330039",
    "end": "332240"
  },
  {
    "text": "three end points that you already have",
    "start": "332240",
    "end": "333680"
  },
  {
    "text": "there and keep them allocated to Zone a",
    "start": "333680",
    "end": "336479"
  },
  {
    "text": "you're going to keep the same for Zone B",
    "start": "336479",
    "end": "338960"
  },
  {
    "text": "but you notice Zone C we only have two",
    "start": "338960",
    "end": "340840"
  },
  {
    "text": "local end points so we're going to take",
    "start": "340840",
    "end": "342440"
  },
  {
    "text": "that extra endpoint from Zone a and",
    "start": "342440",
    "end": "345680"
  },
  {
    "text": "allocate it to Zone C so it's only ever",
    "start": "345680",
    "end": "347600"
  },
  {
    "text": "serving traffic for Zone C and this",
    "start": "347600",
    "end": "350919"
  },
  {
    "text": "seemed you know this diagram makes it",
    "start": "350919",
    "end": "352960"
  },
  {
    "text": "seem well okay that's fairly",
    "start": "352960",
    "end": "354600"
  },
  {
    "text": "straightforward yeah we can we can do",
    "start": "354600",
    "end": "356199"
  },
  {
    "text": "that but believe me the edge cases got",
    "start": "356199",
    "end": "359680"
  },
  {
    "text": "rather contrived and we'll start working",
    "start": "359680",
    "end": "362479"
  },
  {
    "text": "through that in a little bit so how do",
    "start": "362479",
    "end": "364280"
  },
  {
    "text": "we come to this how do we you know it's",
    "start": "364280",
    "end": "365840"
  },
  {
    "text": "easy when you just look at one simple",
    "start": "365840",
    "end": "367360"
  },
  {
    "text": "example to decide well this is what it",
    "start": "367360",
    "end": "368880"
  },
  {
    "text": "should do but trying to make the scale",
    "start": "368880",
    "end": "371720"
  },
  {
    "text": "with any possible number of inputs",
    "start": "371720",
    "end": "374280"
  },
  {
    "text": "remarkably",
    "start": "374280",
    "end": "375360"
  },
  {
    "text": "complicated so first we had the desired",
    "start": "375360",
    "end": "377759"
  },
  {
    "text": "endpoints this was the number of end",
    "start": "377759",
    "end": "379319"
  },
  {
    "text": "points that we thought each Zone should",
    "start": "379319",
    "end": "380960"
  },
  {
    "text": "be allocated so in that previous example",
    "start": "380960",
    "end": "382639"
  },
  {
    "text": "we said we said each Zone should be",
    "start": "382639",
    "end": "384440"
  },
  {
    "text": "allocated three end points or a third of",
    "start": "384440",
    "end": "386560"
  },
  {
    "text": "the end points that are",
    "start": "386560",
    "end": "387840"
  },
  {
    "text": "available and then we have overload",
    "start": "387840",
    "end": "390039"
  },
  {
    "text": "which is the percentage difference",
    "start": "390039",
    "end": "391720"
  },
  {
    "text": "between the desired end points the",
    "start": "391720",
    "end": "394080"
  },
  {
    "text": "number of end points we think a Zone",
    "start": "394080",
    "end": "395360"
  },
  {
    "text": "should have and the ones we're actually",
    "start": "395360",
    "end": "397280"
  },
  {
    "text": "able to allocate to it and then there's",
    "start": "397280",
    "end": "399680"
  },
  {
    "text": "this threshold where if we can't achieve",
    "start": "399680",
    "end": "401520"
  },
  {
    "text": "what we think is a relatively safe",
    "start": "401520",
    "end": "403000"
  },
  {
    "text": "allocation we just bail out we say okay",
    "start": "403000",
    "end": "405800"
  },
  {
    "text": "there's two we can't allocate enough end",
    "start": "405800",
    "end": "408120"
  },
  {
    "text": "points here so we're just going to bail",
    "start": "408120",
    "end": "409720"
  },
  {
    "text": "out and just spray everywhere because we",
    "start": "409720",
    "end": "411240"
  },
  {
    "text": "think that's safer so this is trying to",
    "start": "411240",
    "end": "413039"
  },
  {
    "text": "be a very cautious approach to topology",
    "start": "413039",
    "end": "415639"
  },
  {
    "text": "or",
    "start": "415639",
    "end": "417240"
  },
  {
    "text": "routing now I kind of mentioned before",
    "start": "417240",
    "end": "420639"
  },
  {
    "text": "don't want to go into too much detail",
    "start": "420639",
    "end": "422240"
  },
  {
    "text": "here but a key concept of here is trying",
    "start": "422240",
    "end": "424560"
  },
  {
    "text": "to understand how much uh capacity we",
    "start": "424560",
    "end": "428160"
  },
  {
    "text": "expect to have in each Zone how much",
    "start": "428160",
    "end": "429440"
  },
  {
    "text": "traffic we expect to have and this was",
    "start": "429440",
    "end": "431400"
  },
  {
    "text": "based on allocatable node CPU the",
    "start": "431400",
    "end": "435120"
  },
  {
    "text": "rationale was well basically that CPU",
    "start": "435120",
    "end": "437919"
  },
  {
    "text": "cores would be roughly proportional to",
    "start": "437919",
    "end": "439599"
  },
  {
    "text": "the amount of workloads in the zone so",
    "start": "439599",
    "end": "441120"
  },
  {
    "text": "the things that could arate traffic and",
    "start": "441120",
    "end": "444280"
  },
  {
    "text": "also roughly you know approximate to the",
    "start": "444280",
    "end": "447440"
  },
  {
    "text": "number of end points for say an L4 load",
    "start": "447440",
    "end": "449720"
  },
  {
    "text": "balancer that you know is equally",
    "start": "449720",
    "end": "451479"
  },
  {
    "text": "discing traffic across nodes this is at",
    "start": "451479",
    "end": "454400"
  },
  {
    "text": "least the",
    "start": "454400",
    "end": "455919"
  },
  {
    "text": "idea so as a very very rough example",
    "start": "455919",
    "end": "459080"
  },
  {
    "text": "let's say that we have 40 CPU cores in",
    "start": "459080",
    "end": "461639"
  },
  {
    "text": "zone a 60 CPU cores in zone B and we",
    "start": "461639",
    "end": "464960"
  },
  {
    "text": "have an equal number of end points in",
    "start": "464960",
    "end": "466400"
  },
  {
    "text": "each location what we're going to do is",
    "start": "466400",
    "end": "468280"
  },
  {
    "text": "we're going to take four of those end",
    "start": "468280",
    "end": "470280"
  },
  {
    "text": "points and give them to Zone a we're",
    "start": "470280",
    "end": "471840"
  },
  {
    "text": "going to take one extra endpoint from",
    "start": "471840",
    "end": "473720"
  },
  {
    "text": "Zone a and give it to Zone B so this",
    "start": "473720",
    "end": "475759"
  },
  {
    "text": "should feel somewhat familiar to that",
    "start": "475759",
    "end": "477400"
  },
  {
    "text": "previous diagram",
    "start": "477400",
    "end": "481080"
  },
  {
    "text": "now if you had experience with topology",
    "start": "481080",
    "end": "484440"
  },
  {
    "text": "actually anyone have experiened with",
    "start": "484440",
    "end": "486120"
  },
  {
    "text": "topology Weare hints okay great Okay",
    "start": "486120",
    "end": "489400"
  },
  {
    "text": "cool so if you had experiened with that",
    "start": "489400",
    "end": "491720"
  },
  {
    "text": "you may have gotten confounded when it",
    "start": "491720",
    "end": "494120"
  },
  {
    "text": "didn't work the way you thought it did",
    "start": "494120",
    "end": "495919"
  },
  {
    "text": "any anyone anyone okay so mostly the",
    "start": "495919",
    "end": "498919"
  },
  {
    "text": "same hands okay uh so the guard rails we",
    "start": "498919",
    "end": "501560"
  },
  {
    "text": "added were both confusing and",
    "start": "501560",
    "end": "504080"
  },
  {
    "text": "fragile You know despite our best",
    "start": "504080",
    "end": "506280"
  },
  {
    "text": "efforts to try and keep everything safe",
    "start": "506280",
    "end": "508159"
  },
  {
    "text": "one of the most confounding things was",
    "start": "508159",
    "end": "510039"
  },
  {
    "text": "this Max overload threshold and the",
    "start": "510039",
    "end": "512518"
  },
  {
    "text": "problem here was well when you have a",
    "start": "512519",
    "end": "515200"
  },
  {
    "text": "small number of end points if you have",
    "start": "515200",
    "end": "517680"
  },
  {
    "text": "an uneven number we're going to bail out",
    "start": "517680",
    "end": "520320"
  },
  {
    "text": "all the time because we say oh you have",
    "start": "520320",
    "end": "521760"
  },
  {
    "text": "four end points we can't distribute",
    "start": "521760",
    "end": "523159"
  },
  {
    "text": "those evenly we didn't have fractional",
    "start": "523159",
    "end": "525080"
  },
  {
    "text": "end points and so well we'll just bail",
    "start": "525080",
    "end": "527600"
  },
  {
    "text": "out we'll spray everywhere so imagine",
    "start": "527600",
    "end": "529720"
  },
  {
    "text": "you're transitioning between a state",
    "start": "529720",
    "end": "531200"
  },
  {
    "text": "where you have three ready end points",
    "start": "531200",
    "end": "533200"
  },
  {
    "text": "and four ready end points and so you had",
    "start": "533200",
    "end": "535480"
  },
  {
    "text": "three and everything's going to the same",
    "start": "535480",
    "end": "537240"
  },
  {
    "text": "Zone you go to four nope we're spraying",
    "start": "537240",
    "end": "539480"
  },
  {
    "text": "everywhere go to Five spraying",
    "start": "539480",
    "end": "540839"
  },
  {
    "text": "everywhere go to six okay same Zone",
    "start": "540839",
    "end": "542760"
  },
  {
    "text": "again very confusing so good feedback",
    "start": "542760",
    "end": "546680"
  },
  {
    "text": "got it that that is confusing then",
    "start": "546680",
    "end": "548920"
  },
  {
    "text": "there's this other thing that we don't",
    "start": "548920",
    "end": "550120"
  },
  {
    "text": "exist in a vacuum and actually gar front",
    "start": "550120",
    "end": "552839"
  },
  {
    "text": "row he's the one who who found this",
    "start": "552839",
    "end": "554640"
  },
  {
    "text": "specific issue uh sometimes there are",
    "start": "554640",
    "end": "558000"
  },
  {
    "text": "issues that exist outside of your little",
    "start": "558000",
    "end": "560480"
  },
  {
    "text": "bubble and my little bubble is Sig",
    "start": "560480",
    "end": "562079"
  },
  {
    "text": "Network and we had this assumption that",
    "start": "562079",
    "end": "565160"
  },
  {
    "text": "every time a node was ready we'd already",
    "start": "565160",
    "end": "567399"
  },
  {
    "text": "have a Zone label on it but what if that",
    "start": "567399",
    "end": "569560"
  },
  {
    "text": "assumption is broken and what if for",
    "start": "569560",
    "end": "571839"
  },
  {
    "text": "example a node becomes ready before a",
    "start": "571839",
    "end": "574120"
  },
  {
    "text": "zone is assigned well chaos apparently",
    "start": "574120",
    "end": "577839"
  },
  {
    "text": "because basically what we do in this is",
    "start": "577839",
    "end": "580839"
  },
  {
    "text": "we say if we don't have sufficient data",
    "start": "580839",
    "end": "583240"
  },
  {
    "text": "and one of the key inputs was the the",
    "start": "583240",
    "end": "585600"
  },
  {
    "text": "zone of a node like we have five CPUs in",
    "start": "585600",
    "end": "588880"
  },
  {
    "text": "zone a and six CPUs in zone B but if we",
    "start": "588880",
    "end": "591920"
  },
  {
    "text": "have an unknown CPU we just well we",
    "start": "591920",
    "end": "594360"
  },
  {
    "text": "don't have enough information so we bail",
    "start": "594360",
    "end": "596399"
  },
  {
    "text": "out and it's not just bail out on one",
    "start": "596399",
    "end": "598720"
  },
  {
    "text": "service it bails out on every single",
    "start": "598720",
    "end": "601440"
  },
  {
    "text": "service in the cluster because they're",
    "start": "601440",
    "end": "603920"
  },
  {
    "text": "all affected by that same input so this",
    "start": "603920",
    "end": "606160"
  },
  {
    "text": "is a very very painful thing anytime you",
    "start": "606160",
    "end": "609079"
  },
  {
    "text": "have a new node come up it doesn't have",
    "start": "609079",
    "end": "611360"
  },
  {
    "text": "a Zone in some edge cases then all your",
    "start": "611360",
    "end": "614000"
  },
  {
    "text": "topology we routing just stops working",
    "start": "614000",
    "end": "615680"
  },
  {
    "text": "and it just sprays everywhere which why",
    "start": "615680",
    "end": "618240"
  },
  {
    "text": "did my build just go up well confusing",
    "start": "618240",
    "end": "621800"
  },
  {
    "text": "confounding set of",
    "start": "621800",
    "end": "623680"
  },
  {
    "start": "623000",
    "end": "794000"
  },
  {
    "text": "factors so we finally made it to attempt",
    "start": "623680",
    "end": "626560"
  },
  {
    "text": "three which is traffic distribution and",
    "start": "626560",
    "end": "630240"
  },
  {
    "text": "this is I have to give credit where",
    "start": "630240",
    "end": "631920"
  },
  {
    "text": "credit is due this is really gar kind of",
    "start": "631920",
    "end": "633519"
  },
  {
    "text": "picked up at this point and turned this",
    "start": "633519",
    "end": "636079"
  },
  {
    "text": "one into a reality uh so at this point",
    "start": "636079",
    "end": "640839"
  },
  {
    "text": "we have topology aware hints you",
    "start": "640839",
    "end": "642600"
  },
  {
    "text": "remember this where we take C endpoint C",
    "start": "642600",
    "end": "645399"
  },
  {
    "text": "and move it over that extra end point to",
    "start": "645399",
    "end": "647760"
  },
  {
    "text": "the other Zone uh s the extra endpoint",
    "start": "647760",
    "end": "650800"
  },
  {
    "text": "from a to c with the traffic",
    "start": "650800",
    "end": "653040"
  },
  {
    "text": "distribution we just give up on all of",
    "start": "653040",
    "end": "654760"
  },
  {
    "text": "that and we just say you're on your own",
    "start": "654760",
    "end": "657399"
  },
  {
    "text": "roughly and you we trust TR you to have",
    "start": "657399",
    "end": "660320"
  },
  {
    "text": "enough end points in every Zone and",
    "start": "660320",
    "end": "662240"
  },
  {
    "text": "we're just going to Route traffic to a",
    "start": "662240",
    "end": "664920"
  },
  {
    "text": "local endpoint if any exist so if",
    "start": "664920",
    "end": "667800"
  },
  {
    "text": "traffic is originating from Zone a we're",
    "start": "667800",
    "end": "670200"
  },
  {
    "text": "going to keep it in that zone as long as",
    "start": "670200",
    "end": "672720"
  },
  {
    "text": "there's any healthy end points and so",
    "start": "672720",
    "end": "674800"
  },
  {
    "text": "this really shifts the burden a bit but",
    "start": "674800",
    "end": "677360"
  },
  {
    "text": "removes a lot of those confusing guard",
    "start": "677360",
    "end": "678839"
  },
  {
    "text": "rails so there's no worry about uh any",
    "start": "678839",
    "end": "681279"
  },
  {
    "text": "of the weird edge cases if you don't",
    "start": "681279",
    "end": "682880"
  },
  {
    "text": "have enough end points if a node doesn't",
    "start": "682880",
    "end": "685000"
  },
  {
    "text": "have the label you expect Etc this is",
    "start": "685000",
    "end": "688000"
  },
  {
    "text": "you know maybe the most basic form that",
    "start": "688000",
    "end": "690320"
  },
  {
    "text": "you could look for now with that said",
    "start": "690320",
    "end": "692680"
  },
  {
    "text": "we've left a lot of room for flexibility",
    "start": "692680",
    "end": "695200"
  },
  {
    "text": "in the definition of this so there's a",
    "start": "695200",
    "end": "696880"
  },
  {
    "text": "new field on the service API called",
    "start": "696880",
    "end": "699519"
  },
  {
    "text": "traffic distribution and it accepts a",
    "start": "699519",
    "end": "701800"
  },
  {
    "text": "single value right now well actually I",
    "start": "701800",
    "end": "703440"
  },
  {
    "text": "think you can just not specify it but if",
    "start": "703440",
    "end": "705000"
  },
  {
    "text": "you do specify it the single value you",
    "start": "705000",
    "end": "707040"
  },
  {
    "text": "can specify is prefer close and what",
    "start": "707040",
    "end": "709839"
  },
  {
    "text": "that says is it's basically optimizing",
    "start": "709839",
    "end": "712480"
  },
  {
    "text": "for proximity rather than equal",
    "start": "712480",
    "end": "715079"
  },
  {
    "text": "distribution this whole talk is about",
    "start": "715079",
    "end": "717399"
  },
  {
    "text": "tradeoffs right you can you can either",
    "start": "717399",
    "end": "720120"
  },
  {
    "text": "optimize for you know minimizing cost",
    "start": "720120",
    "end": "723639"
  },
  {
    "text": "optimizing proximity or you can optimize",
    "start": "723639",
    "end": "726600"
  },
  {
    "text": "for even distribution of load and",
    "start": "726600",
    "end": "729079"
  },
  {
    "text": "presumably slightly more reliability",
    "start": "729079",
    "end": "730800"
  },
  {
    "text": "along the way but we've left some room",
    "start": "730800",
    "end": "732920"
  },
  {
    "text": "open the the description I just had was",
    "start": "732920",
    "end": "735519"
  },
  {
    "text": "very much focused on what Cube proxy",
    "start": "735519",
    "end": "737360"
  },
  {
    "text": "does but there are lots of data planes",
    "start": "737360",
    "end": "740160"
  },
  {
    "text": "in the CU kubernetes ecosystem some may",
    "start": "740160",
    "end": "742839"
  },
  {
    "text": "have different way different ways to do",
    "start": "742839",
    "end": "744440"
  },
  {
    "text": "this and there this anything on service",
    "start": "744440",
    "end": "747680"
  },
  {
    "text": "API has a much broader reach than just",
    "start": "747680",
    "end": "750320"
  },
  {
    "text": "service API there are things like",
    "start": "750320",
    "end": "752120"
  },
  {
    "text": "Ingress like Gateway like multicluster",
    "start": "752120",
    "end": "754000"
  },
  {
    "text": "service that are built on top that may",
    "start": "754000",
    "end": "756399"
  },
  {
    "text": "also have different ways that may be",
    "start": "756399",
    "end": "758880"
  },
  {
    "text": "better to handle this so we're really",
    "start": "758880",
    "end": "761279"
  },
  {
    "text": "just trying to provide a way to",
    "start": "761279",
    "end": "763000"
  },
  {
    "text": "communicate a preference and then the",
    "start": "763000",
    "end": "765240"
  },
  {
    "text": "underlying implementation may have some",
    "start": "765240",
    "end": "766880"
  },
  {
    "text": "ways to do things a little bit better",
    "start": "766880",
    "end": "768279"
  },
  {
    "text": "and we'll get into that shortly so yeah",
    "start": "768279",
    "end": "771800"
  },
  {
    "text": "I mean the the kuber ecosystem has grown",
    "start": "771800",
    "end": "773600"
  },
  {
    "text": "to support many many different data",
    "start": "773600",
    "end": "775720"
  },
  {
    "text": "planes ecosystems and hopefully some",
    "start": "775720",
    "end": "778880"
  },
  {
    "text": "data planes will be able to support some",
    "start": "778880",
    "end": "780959"
  },
  {
    "text": "kind of waterfall approach where you can",
    "start": "780959",
    "end": "783240"
  },
  {
    "text": "fill and then spill kind of that ideal",
    "start": "783240",
    "end": "786160"
  },
  {
    "text": "case where you have some understanding",
    "start": "786160",
    "end": "787959"
  },
  {
    "text": "of when when an end point is full and",
    "start": "787959",
    "end": "790760"
  },
  {
    "text": "fill that up first before spilling over",
    "start": "790760",
    "end": "792440"
  },
  {
    "text": "to other",
    "start": "792440",
    "end": "793880"
  },
  {
    "text": "zones now let's talk about a failure",
    "start": "793880",
    "end": "796360"
  },
  {
    "start": "794000",
    "end": "949000"
  },
  {
    "text": "story and I don't mean to Heckle but",
    "start": "796360",
    "end": "799240"
  },
  {
    "text": "Flynn is is right here so I'll do a",
    "start": "799240",
    "end": "801519"
  },
  {
    "text": "little bit um it was to my surprise just",
    "start": "801519",
    "end": "805320"
  },
  {
    "text": "a few months ago I saw this blog post",
    "start": "805320",
    "end": "807720"
  },
  {
    "text": "now remember I I've done done a lot of",
    "start": "807720",
    "end": "809519"
  },
  {
    "text": "the topology or routing work and I see a",
    "start": "809519",
    "end": "811199"
  },
  {
    "text": "blog post telling me the trouble with",
    "start": "811199",
    "end": "813800"
  },
  {
    "text": "topology or routing like okay well I",
    "start": "813800",
    "end": "816040"
  },
  {
    "text": "should probably read this because this",
    "start": "816040",
    "end": "817760"
  },
  {
    "text": "is something I'm very aware of and yeah",
    "start": "817760",
    "end": "821040"
  },
  {
    "text": "okay yeah sacrificing reliability yeah",
    "start": "821040",
    "end": "823639"
  },
  {
    "text": "okay I I get it so actually In fairness",
    "start": "823639",
    "end": "826560"
  },
  {
    "text": "I do recommend reading this because it",
    "start": "826560",
    "end": "828800"
  },
  {
    "text": "is a useful blog post and I want to walk",
    "start": "828800",
    "end": "831560"
  },
  {
    "text": "through a couple quotes So what happens",
    "start": "831560",
    "end": "835120"
  },
  {
    "text": "when things go wrong here and to apolog",
    "start": "835120",
    "end": "837880"
  },
  {
    "text": "over routing is great whenever is",
    "start": "837880",
    "end": "839360"
  },
  {
    "text": "healthy I agree but if one experiences",
    "start": "839360",
    "end": "842199"
  },
  {
    "text": "problems pods fail become slow or",
    "start": "842199",
    "end": "844680"
  },
  {
    "text": "traffic becomes unevenly distributed the",
    "start": "844680",
    "end": "847079"
  },
  {
    "text": "zone is left to its own devices this is",
    "start": "847079",
    "end": "850079"
  },
  {
    "text": "completely correct tooa routing prevents",
    "start": "850079",
    "end": "852800"
  },
  {
    "text": "pods in the in the failing Zone from",
    "start": "852800",
    "end": "855440"
  },
  {
    "text": "ever being able to reach pods in other",
    "start": "855440",
    "end": "857399"
  },
  {
    "text": "zones so if you're saying all traffic",
    "start": "857399",
    "end": "859199"
  },
  {
    "text": "needs to stay in the stay in the same",
    "start": "859199",
    "end": "861279"
  },
  {
    "text": "Zone then okay this is a real problem",
    "start": "861279",
    "end": "864920"
  },
  {
    "text": "but this is what I would say the best",
    "start": "864920",
    "end": "867600"
  },
  {
    "text": "kind of correct uh this was based on pod",
    "start": "867600",
    "end": "870519"
  },
  {
    "text": "health checks not catching the Pod being",
    "start": "870519",
    "end": "872800"
  },
  {
    "text": "unavailable so what's happening here in",
    "start": "872800",
    "end": "874959"
  },
  {
    "text": "their example is that if for some reason",
    "start": "874959",
    "end": "878240"
  },
  {
    "text": "your you have a zonal failure that your",
    "start": "878240",
    "end": "880399"
  },
  {
    "text": "Readiness probes don't catch for example",
    "start": "880399",
    "end": "883120"
  },
  {
    "text": "there's a a database that has a zonal",
    "start": "883120",
    "end": "885680"
  },
  {
    "text": "replica and that zonal replica is",
    "start": "885680",
    "end": "888839"
  },
  {
    "text": "unavailable and your Readiness probes",
    "start": "888839",
    "end": "890959"
  },
  {
    "text": "don't don't catch that then you have",
    "start": "890959",
    "end": "893440"
  },
  {
    "text": "this kind of zonal failure and that all",
    "start": "893440",
    "end": "896000"
  },
  {
    "text": "the traffic is never going to recover",
    "start": "896000",
    "end": "898199"
  },
  {
    "text": "this is not particularly unique to",
    "start": "898199",
    "end": "900360"
  },
  {
    "text": "topology or routing but it is worse with",
    "start": "900360",
    "end": "903040"
  },
  {
    "text": "topology over routing is what I would",
    "start": "903040",
    "end": "904560"
  },
  {
    "text": "say so yes this is the best kind of",
    "start": "904560",
    "end": "907680"
  },
  {
    "text": "correct and it is absolutely something",
    "start": "907680",
    "end": "910199"
  },
  {
    "text": "we need to watch out for uh in this",
    "start": "910199",
    "end": "913040"
  },
  {
    "text": "space so I think their summary is good",
    "start": "913040",
    "end": "917040"
  },
  {
    "text": "here without topology or routing you're",
    "start": "917040",
    "end": "919040"
  },
  {
    "text": "you're stuck in a space where you have",
    "start": "919040",
    "end": "920680"
  },
  {
    "text": "to pay for this kind of cross Zone",
    "start": "920680",
    "end": "923120"
  },
  {
    "text": "traffic and with apology rout aware",
    "start": "923120",
    "end": "925920"
  },
  {
    "text": "routing I would say you have to make",
    "start": "925920",
    "end": "928040"
  },
  {
    "text": "some compromise to overall availability",
    "start": "928040",
    "end": "930839"
  },
  {
    "text": "there's always some level of trade-off",
    "start": "930839",
    "end": "932519"
  },
  {
    "text": "here what those are like that very",
    "start": "932519",
    "end": "934480"
  },
  {
    "text": "specific scenario where there's some",
    "start": "934480",
    "end": "936360"
  },
  {
    "text": "other dependency that your kubernetes",
    "start": "936360",
    "end": "938279"
  },
  {
    "text": "Readiness probes can't catch is very",
    "start": "938279",
    "end": "940560"
  },
  {
    "text": "real right and if you have things like",
    "start": "940560",
    "end": "943360"
  },
  {
    "text": "that that you're could fail that way",
    "start": "943360",
    "end": "946160"
  },
  {
    "text": "then you really need to be careful with",
    "start": "946160",
    "end": "949160"
  },
  {
    "start": "949000",
    "end": "1044000"
  },
  {
    "text": "this so let's walk through some",
    "start": "949160",
    "end": "952720"
  },
  {
    "text": "recommendations so first off if you're",
    "start": "952720",
    "end": "956240"
  },
  {
    "text": "not using autoscaling topologies spread",
    "start": "956240",
    "end": "959360"
  },
  {
    "text": "constraints are your friends so you",
    "start": "959360",
    "end": "962240"
  },
  {
    "text": "ideally what we've said so far is we're",
    "start": "962240",
    "end": "964399"
  },
  {
    "text": "relying on you now to keep enough end",
    "start": "964399",
    "end": "967279"
  },
  {
    "text": "points in every zone so one way to do",
    "start": "967279",
    "end": "969959"
  },
  {
    "text": "that is use topology spread constraints",
    "start": "969959",
    "end": "972160"
  },
  {
    "text": "and ensure that your pods are evenly",
    "start": "972160",
    "end": "974160"
  },
  {
    "text": "distributed across zones so this can",
    "start": "974160",
    "end": "977440"
  },
  {
    "text": "help in many cases but if you are using",
    "start": "977440",
    "end": "980920"
  },
  {
    "text": "autoscaling which you probably want to",
    "start": "980920",
    "end": "984079"
  },
  {
    "text": "there are some fun interactions here",
    "start": "984079",
    "end": "985880"
  },
  {
    "text": "well maybe not fun uh but interactions",
    "start": "985880",
    "end": "988199"
  },
  {
    "text": "to be aware of so let's just take one",
    "start": "988199",
    "end": "990160"
  },
  {
    "text": "example here where all your traffic or a",
    "start": "990160",
    "end": "992519"
  },
  {
    "text": "huge percentage of your traffic is",
    "start": "992519",
    "end": "994160"
  },
  {
    "text": "originating from Zone B so let's just",
    "start": "994160",
    "end": "997319"
  },
  {
    "text": "imagine for a second that zone a and",
    "start": "997319",
    "end": "999480"
  },
  {
    "text": "Zone C are hardly getting any traffic so",
    "start": "999480",
    "end": "1002720"
  },
  {
    "text": "they're sitting at say 10% utilization",
    "start": "1002720",
    "end": "1005480"
  },
  {
    "text": "and Zone B pods are just completely",
    "start": "1005480",
    "end": "1007680"
  },
  {
    "text": "overwhelmed at 100% utilization if you",
    "start": "1007680",
    "end": "1010720"
  },
  {
    "text": "average that out you land at 40% average",
    "start": "1010720",
    "end": "1013480"
  },
  {
    "text": "utilization and if your HPA is targeting",
    "start": "1013480",
    "end": "1015959"
  },
  {
    "text": "say I don't know 50 60 70% to scale",
    "start": "1015959",
    "end": "1019319"
  },
  {
    "text": "completely misses this and so you're",
    "start": "1019319",
    "end": "1021399"
  },
  {
    "text": "just completely stuck in this space so",
    "start": "1021399",
    "end": "1024120"
  },
  {
    "text": "unfortunately what you have to do right",
    "start": "1024120",
    "end": "1025520"
  },
  {
    "text": "now or what I would recommend doing is",
    "start": "1025520",
    "end": "1027798"
  },
  {
    "text": "having a separate deployment and HPA per",
    "start": "1027799",
    "end": "1030000"
  },
  {
    "text": "Zone still all be behind the same",
    "start": "1030000",
    "end": "1032199"
  },
  {
    "text": "service but unfortunately if you want to",
    "start": "1032199",
    "end": "1036000"
  },
  {
    "text": "save yourself from this kind of failure",
    "start": "1036000",
    "end": "1038120"
  },
  {
    "text": "you really need to have the separate",
    "start": "1038120",
    "end": "1039600"
  },
  {
    "text": "deployment and HPA configuration in each",
    "start": "1039600",
    "end": "1044160"
  },
  {
    "start": "1044000",
    "end": "1116000"
  },
  {
    "text": "zone so that was a lot let's go through",
    "start": "1044160",
    "end": "1047558"
  },
  {
    "text": "a quick recap so first off we we have",
    "start": "1047559",
    "end": "1050720"
  },
  {
    "text": "three different attempts we're currently",
    "start": "1050720",
    "end": "1052320"
  },
  {
    "text": "on attempt number three uh of topology",
    "start": "1052320",
    "end": "1054720"
  },
  {
    "text": "over routing the first one was topology",
    "start": "1054720",
    "end": "1056600"
  },
  {
    "text": "Keys it was infinitely flexible but very",
    "start": "1056600",
    "end": "1059679"
  },
  {
    "text": "hard to implement or test then we got",
    "start": "1059679",
    "end": "1061880"
  },
  {
    "text": "into topology whereare hints which was",
    "start": "1061880",
    "end": "1064320"
  },
  {
    "text": "trying to add maybe too many guard rails",
    "start": "1064320",
    "end": "1066039"
  },
  {
    "text": "and those guard rails were very",
    "start": "1066039",
    "end": "1067679"
  },
  {
    "text": "confusing uh and now we got to traffic",
    "start": "1067679",
    "end": "1069880"
  },
  {
    "text": "distribution which where we are right",
    "start": "1069880",
    "end": "1072160"
  },
  {
    "text": "now which is really the uh simplest form",
    "start": "1072160",
    "end": "1076080"
  },
  {
    "text": "of traffic topology routing we could",
    "start": "1076080",
    "end": "1078320"
  },
  {
    "text": "think of with some flexibility built in",
    "start": "1078320",
    "end": "1081760"
  },
  {
    "text": "so a few tips here uh one there's some",
    "start": "1081760",
    "end": "1085000"
  },
  {
    "text": "trade-offs involved here you're either",
    "start": "1085000",
    "end": "1086400"
  },
  {
    "text": "preferring closer end points and that",
    "start": "1086400",
    "end": "1088440"
  },
  {
    "text": "will negatively affect availability or",
    "start": "1088440",
    "end": "1091520"
  },
  {
    "text": "you may end up paying more or not having",
    "start": "1091520",
    "end": "1094240"
  },
  {
    "text": "properly isolated zones if you don't use",
    "start": "1094240",
    "end": "1096799"
  },
  {
    "text": "topology or routing then second",
    "start": "1096799",
    "end": "1099320"
  },
  {
    "text": "autoscaling itself right so if you're",
    "start": "1099320",
    "end": "1101919"
  },
  {
    "text": "going to use Autos Skilling in",
    "start": "1101919",
    "end": "1103240"
  },
  {
    "text": "conjunction with this I strongly",
    "start": "1103240",
    "end": "1105120"
  },
  {
    "text": "strongly recommend that you pair it with",
    "start": "1105120",
    "end": "1106919"
  },
  {
    "text": "separate deployments and hpas per Zone",
    "start": "1106919",
    "end": "1109559"
  },
  {
    "text": "uh otherwise topology spread constraints",
    "start": "1109559",
    "end": "1111679"
  },
  {
    "text": "could work reasonably",
    "start": "1111679",
    "end": "1114080"
  },
  {
    "text": "well without some form of",
    "start": "1114080",
    "end": "1116600"
  },
  {
    "start": "1116000",
    "end": "1315000"
  },
  {
    "text": "autoscaling so there's a lot still",
    "start": "1116600",
    "end": "1119159"
  },
  {
    "text": "that's happening here so all of the",
    "start": "1119159",
    "end": "1121640"
  },
  {
    "text": "following is going to be implementation",
    "start": "1121640",
    "end": "1123200"
  },
  {
    "text": "specific but I know of some work that's",
    "start": "1123200",
    "end": "1125080"
  },
  {
    "text": "already in progress to support this on",
    "start": "1125080",
    "end": "1126840"
  },
  {
    "text": "service type load",
    "start": "1126840",
    "end": "1128200"
  },
  {
    "text": "balancer uh on Gateway API and on multi",
    "start": "1128200",
    "end": "1131600"
  },
  {
    "text": "multicluster service so if you think of",
    "start": "1131600",
    "end": "1134360"
  },
  {
    "text": "you know service is a foundational API",
    "start": "1134360",
    "end": "1136880"
  },
  {
    "text": "in kubernetes and all these other bits",
    "start": "1136880",
    "end": "1140320"
  },
  {
    "text": "are very much related to it right so if",
    "start": "1140320",
    "end": "1143320"
  },
  {
    "text": "a service is configuring that I would",
    "start": "1143320",
    "end": "1144880"
  },
  {
    "text": "prefer my traffic stay close well maybe",
    "start": "1144880",
    "end": "1147240"
  },
  {
    "text": "load balancing maybe multicluster",
    "start": "1147240",
    "end": "1148720"
  },
  {
    "text": "service maybe Gateway API should also",
    "start": "1148720",
    "end": "1150640"
  },
  {
    "text": "handle that and and that kind of work is",
    "start": "1150640",
    "end": "1153039"
  },
  {
    "text": "already in progress in at least some",
    "start": "1153039",
    "end": "1155200"
  },
  {
    "text": "cases um then I want to call out you",
    "start": "1155200",
    "end": "1157720"
  },
  {
    "text": "know how I said the ideal world would be",
    "start": "1157720",
    "end": "1160280"
  },
  {
    "text": "some kind of feedback loop where you",
    "start": "1160280",
    "end": "1161679"
  },
  {
    "text": "could understand when something was full",
    "start": "1161679",
    "end": "1164240"
  },
  {
    "text": "we I I haven't forgotten about that I",
    "start": "1164240",
    "end": "1166000"
  },
  {
    "text": "promise so we've come full circle now",
    "start": "1166000",
    "end": "1168240"
  },
  {
    "text": "and we're working with selum uh to uh",
    "start": "1168240",
    "end": "1171280"
  },
  {
    "text": "use something called XDS uh so for those",
    "start": "1171280",
    "end": "1173919"
  },
  {
    "text": "of you uh who may not be familiar XDS is",
    "start": "1173919",
    "end": "1176960"
  },
  {
    "text": "on well okay so it could be a universal",
    "start": "1176960",
    "end": "1180159"
  },
  {
    "text": "data plane API that's that's what some",
    "start": "1180159",
    "end": "1182120"
  },
  {
    "text": "people would say Flynn is not a fan of",
    "start": "1182120",
    "end": "1184080"
  },
  {
    "text": "that uh but it's most well known for",
    "start": "1184080",
    "end": "1186200"
  },
  {
    "text": "being the configuration language that",
    "start": "1186200",
    "end": "1188600"
  },
  {
    "text": "Envoy and grpc use uh it has some",
    "start": "1188600",
    "end": "1191520"
  },
  {
    "text": "significant benefits that kubernetes API",
    "start": "1191520",
    "end": "1194039"
  },
  {
    "text": "server does not support right now so for",
    "start": "1194039",
    "end": "1196080"
  },
  {
    "text": "example it has a battle tested load",
    "start": "1196080",
    "end": "1198159"
  },
  {
    "text": "reporting system service which we're",
    "start": "1198159",
    "end": "1199919"
  },
  {
    "text": "trying to use to complete that final",
    "start": "1199919",
    "end": "1203000"
  },
  {
    "text": "feedback loop so you can actually",
    "start": "1203000",
    "end": "1205080"
  },
  {
    "text": "understand at your uh control plane",
    "start": "1205080",
    "end": "1206960"
  },
  {
    "text": "level how full are my end points and",
    "start": "1206960",
    "end": "1209360"
  },
  {
    "text": "when do I need to spill over uh and so",
    "start": "1209360",
    "end": "1211880"
  },
  {
    "text": "you already have a lot of these Concepts",
    "start": "1211880",
    "end": "1213799"
  },
  {
    "text": "built into XDS into XDS control planes",
    "start": "1213799",
    "end": "1217440"
  },
  {
    "text": "and then maybe one other key thing here",
    "start": "1217440",
    "end": "1219400"
  },
  {
    "text": "is XDS support something called Delta",
    "start": "1219400",
    "end": "1221760"
  },
  {
    "text": "XDS which allows us to send across the",
    "start": "1221760",
    "end": "1223880"
  },
  {
    "text": "wire only the things that have changed",
    "start": "1223880",
    "end": "1226159"
  },
  {
    "text": "which when you're trying to scale this",
    "start": "1226159",
    "end": "1227360"
  },
  {
    "text": "up becomes a very significant win so if",
    "start": "1227360",
    "end": "1230400"
  },
  {
    "text": "you're curious about the work in celum I",
    "start": "1230400",
    "end": "1232600"
  },
  {
    "text": "left a link there this is still this is",
    "start": "1232600",
    "end": "1234760"
  },
  {
    "text": "slow ongoing work but I'm excited to see",
    "start": "1234760",
    "end": "1238400"
  },
  {
    "text": "some additions to this that may make",
    "start": "1238400",
    "end": "1240159"
  },
  {
    "text": "this even better uh in additional data",
    "start": "1240159",
    "end": "1242960"
  },
  {
    "text": "planes now this is a bit of a stretch",
    "start": "1242960",
    "end": "1245080"
  },
  {
    "text": "but I just I just have to throw this out",
    "start": "1245080",
    "end": "1246640"
  },
  {
    "text": "there I've been focusing on a lot on",
    "start": "1246640",
    "end": "1248679"
  },
  {
    "text": "topology Weare routing but there's a",
    "start": "1248679",
    "end": "1250640"
  },
  {
    "text": "different kind of routing that has some",
    "start": "1250640",
    "end": "1252320"
  },
  {
    "text": "similar constraints and that's what I",
    "start": "1252320",
    "end": "1254280"
  },
  {
    "text": "would like to call llm Weare routing and",
    "start": "1254280",
    "end": "1256400"
  },
  {
    "text": "that's basically understanding where ad",
    "start": "1256400",
    "end": "1258600"
  },
  {
    "text": "adapters are loaded where models are",
    "start": "1258600",
    "end": "1260400"
  },
  {
    "text": "loaded on pods and routing based on that",
    "start": "1260400",
    "end": "1263200"
  },
  {
    "text": "and that's a project I've been working",
    "start": "1263200",
    "end": "1264400"
  },
  {
    "text": "on more and more uh if you're interested",
    "start": "1264400",
    "end": "1266480"
  },
  {
    "text": "we have an instance Gateway project uh",
    "start": "1266480",
    "end": "1268760"
  },
  {
    "text": "under working group serving uh but",
    "start": "1268760",
    "end": "1271360"
  },
  {
    "text": "basically it's selecting endpoints based",
    "start": "1271360",
    "end": "1273480"
  },
  {
    "text": "on where adapters are loaded not zones",
    "start": "1273480",
    "end": "1275840"
  },
  {
    "text": "but maybe a different kind of",
    "start": "1275840",
    "end": "1278559"
  },
  {
    "text": "topology and then yeah get involved",
    "start": "1278559",
    "end": "1281080"
  },
  {
    "text": "because this is there's a lot to do here",
    "start": "1281080",
    "end": "1283679"
  },
  {
    "text": "there's lots of Integrations still to be",
    "start": "1283679",
    "end": "1285360"
  },
  {
    "text": "done and obviously not what we've",
    "start": "1285360",
    "end": "1288159"
  },
  {
    "text": "presented here is not going to solve all",
    "start": "1288159",
    "end": "1289679"
  },
  {
    "text": "of your use cases so if you have a use",
    "start": "1289679",
    "end": "1292000"
  },
  {
    "text": "case that isn't covered isn't",
    "start": "1292000",
    "end": "1293400"
  },
  {
    "text": "represented uh come get involved we need",
    "start": "1293400",
    "end": "1295559"
  },
  {
    "text": "more feedback we need improved test",
    "start": "1295559",
    "end": "1297760"
  },
  {
    "text": "coverage and if we need more features",
    "start": "1297760",
    "end": "1300039"
  },
  {
    "text": "let us know uh so this is meant to be",
    "start": "1300039",
    "end": "1302200"
  },
  {
    "text": "you know this is open source right so we",
    "start": "1302200",
    "end": "1303559"
  },
  {
    "text": "can all work on this together and make",
    "start": "1303559",
    "end": "1304960"
  },
  {
    "text": "it better uh also want to call out that",
    "start": "1304960",
    "end": "1307679"
  },
  {
    "text": "we are hiring uh this is specific to",
    "start": "1307679",
    "end": "1310000"
  },
  {
    "text": "Google but if you want to work with me",
    "start": "1310000",
    "end": "1311880"
  },
  {
    "text": "on my team as a PM it's an open position",
    "start": "1311880",
    "end": "1315120"
  },
  {
    "start": "1315000",
    "end": "1594000"
  },
  {
    "text": "uh with that any questions",
    "start": "1315120",
    "end": "1318799"
  },
  {
    "text": "all right well thanks",
    "start": "1319360",
    "end": "1322000"
  },
  {
    "text": "everyone one question sorry yeah um have",
    "start": "1324320",
    "end": "1327480"
  },
  {
    "text": "you considered or is there a plan to go",
    "start": "1327480",
    "end": "1329480"
  },
  {
    "text": "to nude based routing instead of um like",
    "start": "1329480",
    "end": "1332039"
  },
  {
    "text": "a based routing you know trying to keep",
    "start": "1332039",
    "end": "1334360"
  },
  {
    "text": "if there is exists the same pod in node",
    "start": "1334360",
    "end": "1337320"
  },
  {
    "text": "a it keeps the traffic in node a so",
    "start": "1337320",
    "end": "1339760"
  },
  {
    "text": "doesn't address yes I don't see Dan here",
    "start": "1339760",
    "end": "1343679"
  },
  {
    "text": "oh okay Dan yes Dan is the person but",
    "start": "1343679",
    "end": "1346080"
  },
  {
    "text": "yes that is absolutely a thing that is",
    "start": "1346080",
    "end": "1348200"
  },
  {
    "text": "being considered and Dan probably knows",
    "start": "1348200",
    "end": "1350279"
  },
  {
    "text": "the the latest State better than I do",
    "start": "1350279",
    "end": "1352000"
  },
  {
    "text": "but not to put you on the spot but it's",
    "start": "1352000",
    "end": "1355760"
  },
  {
    "text": "yeah there's a cap for that yes uh all",
    "start": "1355760",
    "end": "1358640"
  },
  {
    "text": "right thank you is it yeah but",
    "start": "1358640",
    "end": "1360200"
  },
  {
    "text": "definitely maybe we can find what do we",
    "start": "1360200",
    "end": "1363000"
  },
  {
    "text": "call it I forget is it just prefer",
    "start": "1363000",
    "end": "1367200"
  },
  {
    "text": "local I",
    "start": "1367200",
    "end": "1369600"
  },
  {
    "text": "think yeah I think prefer local is the",
    "start": "1369600",
    "end": "1372279"
  },
  {
    "text": "thing I don't",
    "start": "1372279",
    "end": "1374240"
  },
  {
    "text": "know oh yeah sure thank",
    "start": "1374240",
    "end": "1377000"
  },
  {
    "text": "you so there was a kept for prefer local",
    "start": "1377000",
    "end": "1380039"
  },
  {
    "text": "topology and that all got like voted",
    "start": "1380039",
    "end": "1383559"
  },
  {
    "text": "down because of the whole Distributing",
    "start": "1383559",
    "end": "1385440"
  },
  {
    "text": "problem there's a PR open to amend the",
    "start": "1385440",
    "end": "1388720"
  },
  {
    "text": "traffic distribution cap to include a",
    "start": "1388720",
    "end": "1391279"
  },
  {
    "text": "node local uh State particularly for",
    "start": "1391279",
    "end": "1395440"
  },
  {
    "text": "things that are deployed with a demon",
    "start": "1395440",
    "end": "1396919"
  },
  {
    "text": "set where we can assume therefore that",
    "start": "1396919",
    "end": "1398760"
  },
  {
    "text": "you have sufficient coverage on every",
    "start": "1398760",
    "end": "1400279"
  },
  {
    "text": "node to stay uh prefer specifically for",
    "start": "1400279",
    "end": "1403159"
  },
  {
    "text": "like core DNS all right going to switch",
    "start": "1403159",
    "end": "1405240"
  },
  {
    "text": "my angress over to Demonite got it",
    "start": "1405240",
    "end": "1408559"
  },
  {
    "text": "sweet thanks",
    "start": "1408559",
    "end": "1411200"
  },
  {
    "text": "Dan um so I believe that today there's a",
    "start": "1411200",
    "end": "1414200"
  },
  {
    "text": "requirement that there service has to",
    "start": "1414200",
    "end": "1416159"
  },
  {
    "text": "have nine pods before topology V routing",
    "start": "1416159",
    "end": "1418880"
  },
  {
    "text": "will kick in uh do you have plans to get",
    "start": "1418880",
    "end": "1422279"
  },
  {
    "text": "rid of that because like for some of our",
    "start": "1422279",
    "end": "1424240"
  },
  {
    "text": "services doesn't make sense to have nine",
    "start": "1424240",
    "end": "1425840"
  },
  {
    "text": "pods oh no no yeah so that was attempt",
    "start": "1425840",
    "end": "1428039"
  },
  {
    "text": "to that was topology Weare hints that",
    "start": "1428039",
    "end": "1430679"
  },
  {
    "text": "had that kind of like it wasn't a strict",
    "start": "1430679",
    "end": "1432960"
  },
  {
    "text": "requirement but it really only worked",
    "start": "1432960",
    "end": "1434640"
  },
  {
    "text": "well beyond nine pods and practice so no",
    "start": "1434640",
    "end": "1437960"
  },
  {
    "text": "that that's completely gone with traffic",
    "start": "1437960",
    "end": "1439320"
  },
  {
    "text": "distribution so yeah good",
    "start": "1439320",
    "end": "1442120"
  },
  {
    "text": "question has there been any",
    "start": "1442120",
    "end": "1443840"
  },
  {
    "text": "consideration or attempt to fix",
    "start": "1443840",
    "end": "1445480"
  },
  {
    "text": "horizontal pod autoscaling to be",
    "start": "1445480",
    "end": "1447720"
  },
  {
    "text": "topology aware yes yes I I would I would",
    "start": "1447720",
    "end": "1451760"
  },
  {
    "text": "be the biggest fan of that ever but as",
    "start": "1451760",
    "end": "1454720"
  },
  {
    "text": "my understanding I to be clear I'm not",
    "start": "1454720",
    "end": "1456640"
  },
  {
    "text": "the expert here but my understanding is",
    "start": "1456640",
    "end": "1458720"
  },
  {
    "text": "that it's kind of a sequ sequential",
    "start": "1458720",
    "end": "1460760"
  },
  {
    "text": "dependency where scheduling first needs",
    "start": "1460760",
    "end": "1462720"
  },
  {
    "text": "to be able to support scheduling a pod",
    "start": "1462720",
    "end": "1464880"
  },
  {
    "text": "into a specific Zone and then once",
    "start": "1464880",
    "end": "1467200"
  },
  {
    "text": "that's done maybe aut scaling could",
    "start": "1467200",
    "end": "1469000"
  },
  {
    "text": "support per Zone Auto SC but like",
    "start": "1469000",
    "end": "1471440"
  },
  {
    "text": "there's a few foundational things that",
    "start": "1471440",
    "end": "1473240"
  },
  {
    "text": "need to happen first um uh and and do",
    "start": "1473240",
    "end": "1475880"
  },
  {
    "text": "those labels still exist or are the okay",
    "start": "1475880",
    "end": "1478520"
  },
  {
    "text": "okay yeah yeah those yeah I should have",
    "start": "1478520",
    "end": "1480399"
  },
  {
    "text": "been clear clearer the labels I",
    "start": "1480399",
    "end": "1482240"
  },
  {
    "text": "described in step two stuck around even",
    "start": "1482240",
    "end": "1484960"
  },
  {
    "text": "the hints even the hints API stuck",
    "start": "1484960",
    "end": "1486799"
  },
  {
    "text": "around but we just used it in hopefully",
    "start": "1486799",
    "end": "1489399"
  },
  {
    "text": "a simpler way so yeah so I'm Flynn and",
    "start": "1489399",
    "end": "1493760"
  },
  {
    "text": "uh a I think it's completely fair for",
    "start": "1493760",
    "end": "1496440"
  },
  {
    "text": "Rob to Heckle you know carry on I would",
    "start": "1496440",
    "end": "1499799"
  },
  {
    "text": "also encourage everybody to go read the",
    "start": "1499799",
    "end": "1502000"
  },
  {
    "text": "blog post to find out exactly what we",
    "start": "1502000",
    "end": "1504000"
  },
  {
    "text": "were saying there is a part two of that",
    "start": "1504000",
    "end": "1505720"
  },
  {
    "text": "post one of the big things that we also",
    "start": "1505720",
    "end": "1507840"
  },
  {
    "text": "talked about had to do with cases where",
    "start": "1507840",
    "end": "1509960"
  },
  {
    "text": "it wasn't that an endpoint went away it",
    "start": "1509960",
    "end": "1512200"
  },
  {
    "text": "was that the endpoint was still there",
    "start": "1512200",
    "end": "1514200"
  },
  {
    "text": "but it wasn't working properly yeah and",
    "start": "1514200",
    "end": "1516640"
  },
  {
    "text": "that turns out to be a pretty big deal",
    "start": "1516640",
    "end": "1518520"
  },
  {
    "text": "in a lot of realistic cases so um there",
    "start": "1518520",
    "end": "1521679"
  },
  {
    "text": "that I guess that's my counter Heckle or",
    "start": "1521679",
    "end": "1523640"
  },
  {
    "text": "something you no to to be clear I do",
    "start": "1523640",
    "end": "1526640"
  },
  {
    "text": "happy to talk to anybody about that who",
    "start": "1526640",
    "end": "1528760"
  },
  {
    "text": "you know anybody who wants to talk about",
    "start": "1528760",
    "end": "1530279"
  },
  {
    "text": "that yeah come on over we can chat it'll",
    "start": "1530279",
    "end": "1532000"
  },
  {
    "text": "be fine I I do recommend every this is",
    "start": "1532000",
    "end": "1534279"
  },
  {
    "text": "worth a read there is a part two also",
    "start": "1534279",
    "end": "1536480"
  },
  {
    "text": "worth a read so yes I I I agree yes I",
    "start": "1536480",
    "end": "1540440"
  },
  {
    "text": "just want to resonate with using",
    "start": "1540440",
    "end": "1542240"
  },
  {
    "text": "separate deployment in HPA because we",
    "start": "1542240",
    "end": "1544520"
  },
  {
    "text": "have gone the topology spread constraint",
    "start": "1544520",
    "end": "1546559"
  },
  {
    "text": "route it is extremely complicated",
    "start": "1546559",
    "end": "1549240"
  },
  {
    "text": "especially with our use case where we",
    "start": "1549240",
    "end": "1551600"
  },
  {
    "text": "work with school district so they don't",
    "start": "1551600",
    "end": "1553440"
  },
  {
    "text": "use them during the night so we scale",
    "start": "1553440",
    "end": "1555279"
  },
  {
    "text": "down to minimal and you have to have",
    "start": "1555279",
    "end": "1557480"
  },
  {
    "text": "minimal which is one per Zone otherwise",
    "start": "1557480",
    "end": "1560840"
  },
  {
    "text": "and that includes your gateway or load",
    "start": "1560840",
    "end": "1563200"
  },
  {
    "text": "balancers because we found out if you",
    "start": "1563200",
    "end": "1564840"
  },
  {
    "text": "don't have a load balancer in the zone",
    "start": "1564840",
    "end": "1566919"
  },
  {
    "text": "as well no traffic goes to the pods that",
    "start": "1566919",
    "end": "1569960"
  },
  {
    "text": "are in that zone so it was very tricky",
    "start": "1569960",
    "end": "1573120"
  },
  {
    "text": "um dealing with like M domains as well",
    "start": "1573120",
    "end": "1574960"
  },
  {
    "text": "was also very tricky just getting it to",
    "start": "1574960",
    "end": "1576679"
  },
  {
    "text": "spread correctly very difficult yep y",
    "start": "1576679",
    "end": "1580120"
  },
  {
    "text": "completely",
    "start": "1580120",
    "end": "1582279"
  },
  {
    "text": "agree cool anyone",
    "start": "1582279",
    "end": "1585039"
  },
  {
    "text": "else great well thank you and reminder",
    "start": "1585039",
    "end": "1588080"
  },
  {
    "text": "there is a talk right after this in the",
    "start": "1588080",
    "end": "1589559"
  },
  {
    "text": "same room for anyone interested but yes",
    "start": "1589559",
    "end": "1594240"
  }
]