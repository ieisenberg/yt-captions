[
  {
    "text": "i'm really happy to be here today thank",
    "start": "320",
    "end": "2080"
  },
  {
    "text": "you for being here with me i've been in",
    "start": "2080",
    "end": "5040"
  },
  {
    "text": "the all and I've seen a lot of people",
    "start": "5040",
    "end": "6560"
  },
  {
    "text": "leaving so thanks a lot first owe you an",
    "start": "6560",
    "end": "9360"
  },
  {
    "text": "apology there's a typo in the title i",
    "start": "9360",
    "end": "11519"
  },
  {
    "text": "scanned indeed 50 million images a bit",
    "start": "11519",
    "end": "14799"
  },
  {
    "text": "more than on the title so I did some",
    "start": "14799",
    "end": "17279"
  },
  {
    "text": "homework uh on the way to the conference",
    "start": "17279",
    "end": "20080"
  },
  {
    "text": "who am I i'm G French uh French guy used",
    "start": "20080",
    "end": "23119"
  },
  {
    "text": "to be a",
    "start": "23119",
    "end": "24439"
  },
  {
    "text": "network guy uh you might know um a tool",
    "start": "24439",
    "end": "27680"
  },
  {
    "text": "that I'm working on Scrappy which is a",
    "start": "27680",
    "end": "29760"
  },
  {
    "text": "Python library dedicated to um um",
    "start": "29760",
    "end": "32558"
  },
  {
    "text": "sending and receiving um u packets",
    "start": "32559",
    "end": "35200"
  },
  {
    "text": "packet in Python and um these days I'm",
    "start": "35200",
    "end": "37520"
  },
  {
    "text": "doing security research for GitGuardian",
    "start": "37520",
    "end": "39760"
  },
  {
    "text": "gitg Guardian that's a French company uh",
    "start": "39760",
    "end": "42640"
  },
  {
    "text": "which is doing secret detection so at",
    "start": "42640",
    "end": "44640"
  },
  {
    "text": "first obviously in Git and GitHub but",
    "start": "44640",
    "end": "47280"
  },
  {
    "text": "not only",
    "start": "47280",
    "end": "48760"
  },
  {
    "text": "so that's a bit disturbing",
    "start": "48760",
    "end": "52800"
  },
  {
    "text": "uh not only in in in in code but do we",
    "start": "52800",
    "end": "55680"
  },
  {
    "text": "do that in messaging systems we do that",
    "start": "55680",
    "end": "58160"
  },
  {
    "text": "in uh things like Slack uh and our goal",
    "start": "58160",
    "end": "61120"
  },
  {
    "text": "is to help customer identify secrets and",
    "start": "61120",
    "end": "63960"
  },
  {
    "text": "remediate two weeks ago we released a",
    "start": "63960",
    "end": "66640"
  },
  {
    "text": "report called the secrets pro report In",
    "start": "66640",
    "end": "69680"
  },
  {
    "text": "this report it's just let's say um uh a",
    "start": "69680",
    "end": "74080"
  },
  {
    "text": "summary of the the discovery we do like",
    "start": "74080",
    "end": "76479"
  },
  {
    "text": "every day with secrets the crazy crazy",
    "start": "76479",
    "end": "78799"
  },
  {
    "text": "world one of the information we like in",
    "start": "78799",
    "end": "81680"
  },
  {
    "text": "this report is uh the fact that people",
    "start": "81680",
    "end": "84479"
  },
  {
    "text": "tend to leak more secrets in private",
    "start": "84479",
    "end": "86640"
  },
  {
    "text": "repositories that in public ones so it",
    "start": "86640",
    "end": "88240"
  },
  {
    "text": "tends to indicate that when people feel",
    "start": "88240",
    "end": "90479"
  },
  {
    "text": "safe they will arcode secrets you can",
    "start": "90479",
    "end": "93119"
  },
  {
    "text": "get it online uh it's free there is no",
    "start": "93119",
    "end": "95360"
  },
  {
    "text": "payw wall no no address if you want to",
    "start": "95360",
    "end": "97439"
  },
  {
    "text": "play with the product it's also free so",
    "start": "97439",
    "end": "99280"
  },
  {
    "text": "you can just create an account plug your",
    "start": "99280",
    "end": "101840"
  },
  {
    "text": "uh GitLab instance GitHub instance and",
    "start": "101840",
    "end": "104320"
  },
  {
    "text": "it will start scanning the secrets for",
    "start": "104320",
    "end": "105759"
  },
  {
    "text": "you uh but my goal today is indeed to to",
    "start": "105759",
    "end": "108640"
  },
  {
    "text": "have a look at um what can attackers do",
    "start": "108640",
    "end": "111439"
  },
  {
    "text": "with secrets um in the news attackers",
    "start": "111439",
    "end": "113920"
  },
  {
    "text": "are looking for secrets in many things",
    "start": "113920",
    "end": "115600"
  },
  {
    "text": "like PIP packages they're scraping",
    "start": "115600",
    "end": "117920"
  },
  {
    "text": "website for",
    "start": "117920",
    "end": "119840"
  },
  {
    "text": "um in the past weeks attackers have been",
    "start": "119840",
    "end": "122479"
  },
  {
    "text": "looking for secrets in GitHub action",
    "start": "122479",
    "end": "124240"
  },
  {
    "text": "logs with great success it seemed that",
    "start": "124240",
    "end": "126000"
  },
  {
    "text": "they managed to hack into Coinbase or at",
    "start": "126000",
    "end": "128319"
  },
  {
    "text": "least some Coinbase dependencies um",
    "start": "128319",
    "end": "131280"
  },
  {
    "text": "that's my focus today i want to behave",
    "start": "131280",
    "end": "133120"
  },
  {
    "text": "as I did in the past as a pentester or",
    "start": "133120",
    "end": "135280"
  },
  {
    "text": "doing offensive security so what can",
    "start": "135280",
    "end": "137599"
  },
  {
    "text": "attackers do with secrets um in security",
    "start": "137599",
    "end": "140959"
  },
  {
    "text": "like in many other fields uh we have",
    "start": "140959",
    "end": "142800"
  },
  {
    "text": "frameworks uh to define what we do one",
    "start": "142800",
    "end": "145680"
  },
  {
    "text": "of them is attack that's a way to define",
    "start": "145680",
    "end": "148000"
  },
  {
    "text": "attacker attack path so today we'll",
    "start": "148000",
    "end": "149760"
  },
  {
    "text": "target counter registries in that case",
    "start": "149760",
    "end": "152160"
  },
  {
    "text": "docker up we start with valid",
    "start": "152160",
    "end": "154080"
  },
  {
    "text": "credentials and these are not valid in",
    "start": "154080",
    "end": "157040"
  },
  {
    "text": "the sense that they're default you don't",
    "start": "157040",
    "end": "158480"
  },
  {
    "text": "need credential to talk to docker hub so",
    "start": "158480",
    "end": "160480"
  },
  {
    "text": "we have default credential then we get",
    "start": "160480",
    "end": "162640"
  },
  {
    "text": "all of the registries so docker images",
    "start": "162640",
    "end": "165519"
  },
  {
    "text": "and then we scan for unsecured",
    "start": "165519",
    "end": "167040"
  },
  {
    "text": "credentials so that's the target of",
    "start": "167040",
    "end": "168560"
  },
  {
    "text": "today and an attacker what you can do",
    "start": "168560",
    "end": "170800"
  },
  {
    "text": "with a valid credential for example it's",
    "start": "170800",
    "end": "172720"
  },
  {
    "text": "a valid GCP uh account it will connect",
    "start": "172720",
    "end": "175680"
  },
  {
    "text": "to GCP it will create a new instance for",
    "start": "175680",
    "end": "179200"
  },
  {
    "text": "example with a big GPU big CPU and you",
    "start": "179200",
    "end": "181840"
  },
  {
    "text": "will start to do crypto mining so",
    "start": "181840",
    "end": "183200"
  },
  {
    "text": "basically is stealing your money so",
    "start": "183200",
    "end": "184879"
  },
  {
    "text": "that's something an attack can do but",
    "start": "184879",
    "end": "187200"
  },
  {
    "text": "attackers they don't only go after uh",
    "start": "187200",
    "end": "190080"
  },
  {
    "text": "cloud credentials they go after data so",
    "start": "190080",
    "end": "192400"
  },
  {
    "text": "they look for um credential for",
    "start": "192400",
    "end": "194360"
  },
  {
    "text": "databases uh S3 buckets of course codes",
    "start": "194360",
    "end": "198000"
  },
  {
    "text": "and um they scan also for registries in",
    "start": "198000",
    "end": "200560"
  },
  {
    "text": "the case of registries like pi",
    "start": "200560",
    "end": "202400"
  },
  {
    "text": "artifactory docker or github and gitlab",
    "start": "202400",
    "end": "205519"
  },
  {
    "text": "one of the goal is to look for secrets",
    "start": "205519",
    "end": "207040"
  },
  {
    "text": "but also to perform some supply chain",
    "start": "207040",
    "end": "209799"
  },
  {
    "text": "attacks something that I forgot to to",
    "start": "209799",
    "end": "212400"
  },
  {
    "text": "explain that's what is a secret a secret",
    "start": "212400",
    "end": "215040"
  },
  {
    "text": "could be anything like a username",
    "start": "215040",
    "end": "217159"
  },
  {
    "text": "passwords private keys um tokens that",
    "start": "217159",
    "end": "221680"
  },
  {
    "text": "give you access to a system and give you",
    "start": "221680",
    "end": "224239"
  },
  {
    "text": "access to the system as a regular user",
    "start": "224239",
    "end": "227840"
  },
  {
    "text": "so we are looking and we are going after",
    "start": "227840",
    "end": "230239"
  },
  {
    "text": "this kind of secrets",
    "start": "230239",
    "end": "231640"
  },
  {
    "text": "today so first uh let's have a look at",
    "start": "231640",
    "end": "234400"
  },
  {
    "text": "the the content of a docker image um so",
    "start": "234400",
    "end": "237840"
  },
  {
    "text": "my goal today is not to explain what is",
    "start": "237840",
    "end": "239360"
  },
  {
    "text": "docker is to explain what I will do",
    "start": "239360",
    "end": "241040"
  },
  {
    "text": "later on when scanning secrets so first",
    "start": "241040",
    "end": "243599"
  },
  {
    "text": "we start with a docker file and the",
    "start": "243599",
    "end": "245280"
  },
  {
    "text": "docker build command if you are using a",
    "start": "245280",
    "end": "247200"
  },
  {
    "text": "build kit so we build image here the",
    "start": "247200",
    "end": "250400"
  },
  {
    "text": "name is my name",
    "start": "250400",
    "end": "252840"
  },
  {
    "text": "jaladon/cubecon and then uh we have the",
    "start": "252840",
    "end": "254959"
  },
  {
    "text": "tag latest and you push that with docker",
    "start": "254959",
    "end": "257120"
  },
  {
    "text": "push into a registry one of them is",
    "start": "257120",
    "end": "259840"
  },
  {
    "text": "docker hub and your uh image is stored",
    "start": "259840",
    "end": "262800"
  },
  {
    "text": "within the registry into a repository so",
    "start": "262800",
    "end": "265120"
  },
  {
    "text": "it's a bit like a g repository stuff",
    "start": "265120",
    "end": "267919"
  },
  {
    "text": "storing images and the target today is",
    "start": "267919",
    "end": "270720"
  },
  {
    "text": "the pull operation and when you get an",
    "start": "270720",
    "end": "274000"
  },
  {
    "text": "image uh without any",
    "start": "274000",
    "end": "276360"
  },
  {
    "text": "authentication so let's take one more",
    "start": "276360",
    "end": "279360"
  },
  {
    "text": "step and have a look at what is inside a",
    "start": "279360",
    "end": "281919"
  },
  {
    "text": "docker image so we start with the docker",
    "start": "281919",
    "end": "285120"
  },
  {
    "text": "file here really small few instructions",
    "start": "285120",
    "end": "287919"
  },
  {
    "text": "we have from copy run expose and of and",
    "start": "287919",
    "end": "290639"
  },
  {
    "text": "finally a cmd instruction and here what",
    "start": "290639",
    "end": "293360"
  },
  {
    "text": "you can see that some instructions have",
    "start": "293360",
    "end": "295680"
  },
  {
    "text": "what I call a side effect on the final",
    "start": "295680",
    "end": "297520"
  },
  {
    "text": "image they create a layer so from will",
    "start": "297520",
    "end": "299680"
  },
  {
    "text": "be a layer its name is SH",
    "start": "299680",
    "end": "303560"
  },
  {
    "text": "256 sorry I'm going backwards sh 256 col",
    "start": "303560",
    "end": "308759"
  },
  {
    "text": "CD27 and this name is indeed the ash of",
    "start": "308759",
    "end": "312080"
  },
  {
    "text": "the content so if two images they share",
    "start": "312080",
    "end": "315120"
  },
  {
    "text": "the same from the same base image they",
    "start": "315120",
    "end": "317199"
  },
  {
    "text": "will also have the same uh layer with",
    "start": "317199",
    "end": "319600"
  },
  {
    "text": "the same name layers they're also called",
    "start": "319600",
    "end": "322560"
  },
  {
    "text": "called blobs and a blob is just a tarble",
    "start": "322560",
    "end": "324960"
  },
  {
    "text": "which is usually compressed with gzip",
    "start": "324960",
    "end": "327680"
  },
  {
    "text": "copy will create another layer run will",
    "start": "327680",
    "end": "330800"
  },
  {
    "text": "create another layer so we have three",
    "start": "330800",
    "end": "332479"
  },
  {
    "text": "layers and finally there is some strange",
    "start": "332479",
    "end": "335680"
  },
  {
    "text": "operation and build kit is doing that it",
    "start": "335680",
    "end": "338160"
  },
  {
    "text": "takes a docker file plain text and do",
    "start": "338160",
    "end": "341759"
  },
  {
    "text": "some transformation some ones are",
    "start": "341759",
    "end": "343840"
  },
  {
    "text": "unfortunate for secrets and then it will",
    "start": "343840",
    "end": "346240"
  },
  {
    "text": "create another blob with a JSON config",
    "start": "346240",
    "end": "349840"
  },
  {
    "text": "so for in an image we have layers config",
    "start": "349840",
    "end": "352720"
  },
  {
    "text": "and on top of that we have another JSON",
    "start": "352720",
    "end": "354560"
  },
  {
    "text": "document which is called the manifest",
    "start": "354560",
    "end": "356160"
  },
  {
    "text": "which is let's call it a list of layers",
    "start": "356160",
    "end": "359360"
  },
  {
    "text": "plus the config file if you want to play",
    "start": "359360",
    "end": "362320"
  },
  {
    "text": "uh with an image content I would",
    "start": "362320",
    "end": "365039"
  },
  {
    "text": "recommend to install in a tool called",
    "start": "365039",
    "end": "367759"
  },
  {
    "text": "Scopio scopio is really great you can",
    "start": "367759",
    "end": "369600"
  },
  {
    "text": "get an image and get the blobs on your",
    "start": "369600",
    "end": "371600"
  },
  {
    "text": "disk and start playing with the contents",
    "start": "371600",
    "end": "375360"
  },
  {
    "text": "so basically scanning docker images for",
    "start": "375360",
    "end": "377520"
  },
  {
    "text": "secrets is as easy as scanning JSON",
    "start": "377520",
    "end": "379919"
  },
  {
    "text": "files and files within tarbles um and we",
    "start": "379919",
    "end": "383759"
  },
  {
    "text": "have a tool for that at gorian it's",
    "start": "383759",
    "end": "385360"
  },
  {
    "text": "called gg shields you can install it uh",
    "start": "385360",
    "end": "387520"
  },
  {
    "text": "on your laptop and JG shield will scan",
    "start": "387520",
    "end": "390400"
  },
  {
    "text": "docker images in that example I just",
    "start": "390400",
    "end": "392880"
  },
  {
    "text": "forgot u key in my python code so here",
    "start": "392880",
    "end": "397280"
  },
  {
    "text": "we have jg shield saying that okay I",
    "start": "397280",
    "end": "399759"
  },
  {
    "text": "found a key and it's invalid this",
    "start": "399759",
    "end": "402520"
  },
  {
    "text": "validity thing is really important for",
    "start": "402520",
    "end": "405199"
  },
  {
    "text": "attackers because they are only looking",
    "start": "405199",
    "end": "407840"
  },
  {
    "text": "at secret that they can use so what is a",
    "start": "407840",
    "end": "412080"
  },
  {
    "text": "validity check so most of the time you",
    "start": "412080",
    "end": "415199"
  },
  {
    "text": "take the secrets you test it against a",
    "start": "415199",
    "end": "417440"
  },
  {
    "text": "known endpoint and then you check for",
    "start": "417440",
    "end": "419759"
  },
  {
    "text": "the HTTP status code so most of the time",
    "start": "419759",
    "end": "422319"
  },
  {
    "text": "depending on DAP it could be a bit more",
    "start": "422319",
    "end": "424160"
  },
  {
    "text": "complex but it works uh it's it works",
    "start": "424160",
    "end": "427199"
  },
  {
    "text": "fine on the right here we have the",
    "start": "427199",
    "end": "429199"
  },
  {
    "text": "validity checks for two cases on top and",
    "start": "429199",
    "end": "432160"
  },
  {
    "text": "in green a valid GitHub token and the",
    "start": "432160",
    "end": "436240"
  },
  {
    "text": "answer is 300 the token is valid and if",
    "start": "436240",
    "end": "438880"
  },
  {
    "text": "it's invalid we got 401 so the invalid",
    "start": "438880",
    "end": "441919"
  },
  {
    "text": "uh token indeed there's a third case in",
    "start": "441919",
    "end": "444560"
  },
  {
    "text": "the case you have for example a GitHub",
    "start": "444560",
    "end": "446000"
  },
  {
    "text": "enterprise which is only accessible uh",
    "start": "446000",
    "end": "448560"
  },
  {
    "text": "with a VPN so it's not possible to test",
    "start": "448560",
    "end": "450639"
  },
  {
    "text": "it for a public IP address so in that",
    "start": "450639",
    "end": "452800"
  },
  {
    "text": "case the status that we have in our",
    "start": "452800",
    "end": "454479"
  },
  {
    "text": "application is cannot check that's kind",
    "start": "454479",
    "end": "456560"
  },
  {
    "text": "of useful because it mean the secret",
    "start": "456560",
    "end": "458080"
  },
  {
    "text": "might be valid it's not possible to to",
    "start": "458080",
    "end": "460479"
  },
  {
    "text": "to know what to",
    "start": "460479",
    "end": "462199"
  },
  {
    "text": "do um next uh so we scanned one image so",
    "start": "462199",
    "end": "466960"
  },
  {
    "text": "what should we do to scan more",
    "start": "466960",
    "end": "469240"
  },
  {
    "text": "images and I'm on time bit",
    "start": "469240",
    "end": "472520"
  },
  {
    "text": "fast so uh the methodology is the",
    "start": "472520",
    "end": "475360"
  },
  {
    "text": "following we have four simple steps i",
    "start": "475360",
    "end": "477520"
  },
  {
    "text": "will skip these slides why because these",
    "start": "477520",
    "end": "480160"
  },
  {
    "text": "steps they map to um Docker registry API",
    "start": "480160",
    "end": "482960"
  },
  {
    "text": "endpoints so first when you want to scan",
    "start": "482960",
    "end": "485680"
  },
  {
    "text": "for secrets in a docker registry you",
    "start": "485680",
    "end": "488000"
  },
  {
    "text": "will look for the um repositories you'll",
    "start": "488000",
    "end": "492240"
  },
  {
    "text": "use the catalog endpoint that will give",
    "start": "492240",
    "end": "494000"
  },
  {
    "text": "you the list of all of the",
    "start": "494000",
    "end": "495720"
  },
  {
    "text": "repositories then for each repository",
    "start": "495720",
    "end": "498080"
  },
  {
    "text": "you will get the list of tags that's the",
    "start": "498080",
    "end": "500319"
  },
  {
    "text": "second step third step for each tag and",
    "start": "500319",
    "end": "503199"
  },
  {
    "text": "repository you will get the manifest",
    "start": "503199",
    "end": "505039"
  },
  {
    "text": "which is this JSON file describing the",
    "start": "505039",
    "end": "507039"
  },
  {
    "text": "content of the image and then you will",
    "start": "507039",
    "end": "509120"
  },
  {
    "text": "get from the manifest the blob for each",
    "start": "509120",
    "end": "512719"
  },
  {
    "text": "layer and the blob for the config and",
    "start": "512719",
    "end": "514560"
  },
  {
    "text": "when you have the blobs you can scan for",
    "start": "514560",
    "end": "516760"
  },
  {
    "text": "secrets when you have the blobs you also",
    "start": "516760",
    "end": "519039"
  },
  {
    "text": "have other things than secrets obviously",
    "start": "519039",
    "end": "520800"
  },
  {
    "text": "you have the source code of the",
    "start": "520800",
    "end": "522000"
  },
  {
    "text": "application or the compile version of",
    "start": "522000",
    "end": "524000"
  },
  {
    "text": "the source code so that's for a regular",
    "start": "524000",
    "end": "527200"
  },
  {
    "text": "registry um and do is a bit slightly",
    "start": "527200",
    "end": "530640"
  },
  {
    "text": "slightly different so why because uh",
    "start": "530640",
    "end": "533839"
  },
  {
    "text": "it's not possible to use the catalog",
    "start": "533839",
    "end": "535519"
  },
  {
    "text": "endpoint so it's not possible by default",
    "start": "535519",
    "end": "537839"
  },
  {
    "text": "to enumerate uh the repositories which",
    "start": "537839",
    "end": "540560"
  },
  {
    "text": "is not what we want there's a trick here",
    "start": "540560",
    "end": "543279"
  },
  {
    "text": "the trick is to use the docker web",
    "start": "543279",
    "end": "545200"
  },
  {
    "text": "search uh and to use a keyword so we",
    "start": "545200",
    "end": "547360"
  },
  {
    "text": "could use like well-known keyword like",
    "start": "547360",
    "end": "548959"
  },
  {
    "text": "production staging things like will",
    "start": "548959",
    "end": "552560"
  },
  {
    "text": "likely get you images with secrets um",
    "start": "552560",
    "end": "555360"
  },
  {
    "text": "however there's another problem that's",
    "start": "555360",
    "end": "557600"
  },
  {
    "text": "when you use a keyword the docker web",
    "start": "557600",
    "end": "559600"
  },
  {
    "text": "search only return 10,000 results so you",
    "start": "559600",
    "end": "562080"
  },
  {
    "text": "need to do some tricks for example",
    "start": "562080",
    "end": "564320"
  },
  {
    "text": "enumeration like kind of brute force you",
    "start": "564320",
    "end": "566800"
  },
  {
    "text": "will start with a a a b a a a c and so",
    "start": "566800",
    "end": "570640"
  },
  {
    "text": "on so here on the on the right side you",
    "start": "570640",
    "end": "572880"
  },
  {
    "text": "have SKO so the step we we are at right",
    "start": "572880",
    "end": "575839"
  },
  {
    "text": "now and the docker web search is",
    "start": "575839",
    "end": "578320"
  },
  {
    "text": "returning the list of repositories with",
    "start": "578320",
    "end": "580480"
  },
  {
    "text": "SKO on the left part uh that the",
    "start": "580480",
    "end": "583040"
  },
  {
    "text": "username on the right part that the",
    "start": "583040",
    "end": "584959"
  },
  {
    "text": "let's call it the repository",
    "start": "584959",
    "end": "586760"
  },
  {
    "text": "name and that's great takes almost one",
    "start": "586760",
    "end": "589760"
  },
  {
    "text": "day uh and you do it quietly um and at",
    "start": "589760",
    "end": "593600"
  },
  {
    "text": "that step you have one pabyte of data",
    "start": "593600",
    "end": "597279"
  },
  {
    "text": "that's huge i don't know what to do with",
    "start": "597279",
    "end": "599279"
  },
  {
    "text": "that i don't have the money to store",
    "start": "599279",
    "end": "601040"
  },
  {
    "text": "that i don't have the time to to scan",
    "start": "601040",
    "end": "602640"
  },
  {
    "text": "for that that's 9 million repositories",
    "start": "602640",
    "end": "605519"
  },
  {
    "text": "and the first fun fact of the day uh is",
    "start": "605519",
    "end": "608080"
  },
  {
    "text": "that the most used uh repository is",
    "start": "608080",
    "end": "610080"
  },
  {
    "text": "called Docker 101",
    "start": "610080",
    "end": "611880"
  },
  {
    "text": "tutorial if you convert it to images",
    "start": "611880",
    "end": "614480"
  },
  {
    "text": "that's almost 26 million images uh and",
    "start": "614480",
    "end": "618000"
  },
  {
    "text": "as I said before only scan 15 so my goal",
    "start": "618000",
    "end": "620959"
  },
  {
    "text": "is to go from 11 pabyte to something",
    "start": "620959",
    "end": "623200"
  },
  {
    "text": "else the target is 50 terabyte which is",
    "start": "623200",
    "end": "626000"
  },
  {
    "text": "huge still but that I can I can manage",
    "start": "626000",
    "end": "629519"
  },
  {
    "text": "so next step is to have a look at the",
    "start": "629519",
    "end": "631560"
  },
  {
    "text": "tags so you you retrieve the tags it",
    "start": "631560",
    "end": "634079"
  },
  {
    "text": "takes like two or three days uh using",
    "start": "634079",
    "end": "636079"
  },
  {
    "text": "the the the endpoint that I presented",
    "start": "636079",
    "end": "637920"
  },
  {
    "text": "before so that's step number two and",
    "start": "637920",
    "end": "640399"
  },
  {
    "text": "this plot is quite interesting it showed",
    "start": "640399",
    "end": "641920"
  },
  {
    "text": "that uh most of the layers 93% of them",
    "start": "641920",
    "end": "645040"
  },
  {
    "text": "there are five layers or less five tags",
    "start": "645040",
    "end": "647360"
  },
  {
    "text": "sorry or less and that's what I use i",
    "start": "647360",
    "end": "649839"
  },
  {
    "text": "decided to only take repositories with",
    "start": "649839",
    "end": "653279"
  },
  {
    "text": "at most five tags so that's the second",
    "start": "653279",
    "end": "656240"
  },
  {
    "text": "step so concepts is roughly half of what",
    "start": "656240",
    "end": "659680"
  },
  {
    "text": "we had before 6.5 pabytes that's 15",
    "start": "659680",
    "end": "662880"
  },
  {
    "text": "million images and the other fun fact of",
    "start": "662880",
    "end": "665360"
  },
  {
    "text": "the day is that latest is the most used",
    "start": "665360",
    "end": "667360"
  },
  {
    "text": "tag so the other fun fact that took me",
    "start": "667360",
    "end": "670079"
  },
  {
    "text": "five days to find that um not really",
    "start": "670079",
    "end": "673200"
  },
  {
    "text": "kind of waste of time after that we have",
    "start": "673200",
    "end": "674959"
  },
  {
    "text": "vis 1 v 0 1 zero and so on that many",
    "start": "674959",
    "end": "677360"
  },
  {
    "text": "version",
    "start": "677360",
    "end": "678839"
  },
  {
    "text": "numbers um next slide",
    "start": "678839",
    "end": "682279"
  },
  {
    "text": "um there's a trick not a trick but some",
    "start": "682279",
    "end": "685279"
  },
  {
    "text": "images are huge so this one",
    "start": "685279",
    "end": "688279"
  },
  {
    "text": "is 170",
    "start": "688279",
    "end": "690680"
  },
  {
    "text": "GB that's big the first layer is 128 GB",
    "start": "690680",
    "end": "695040"
  },
  {
    "text": "that's still big that's a machine",
    "start": "695040",
    "end": "696880"
  },
  {
    "text": "learning uh machine learning model",
    "start": "696880",
    "end": "699120"
  },
  {
    "text": "likely not containing any secret so what",
    "start": "699120",
    "end": "701360"
  },
  {
    "text": "I did next I say okay maybe they're big",
    "start": "701360",
    "end": "703360"
  },
  {
    "text": "layers i don't want to scan them twice",
    "start": "703360",
    "end": "705760"
  },
  {
    "text": "let's dduplicate if you dduplicate you",
    "start": "705760",
    "end": "708640"
  },
  {
    "text": "will get",
    "start": "708640",
    "end": "709640"
  },
  {
    "text": "that 44 million unique layer the biggest",
    "start": "709640",
    "end": "713120"
  },
  {
    "text": "one in the experiment was 148 GB 148 GB",
    "start": "713120",
    "end": "717760"
  },
  {
    "text": "it mean that when I try to do the",
    "start": "717760",
    "end": "719519"
  },
  {
    "text": "screenshot um the layer disappeared so",
    "start": "719519",
    "end": "722079"
  },
  {
    "text": "from time to time you have layers and",
    "start": "722079",
    "end": "723680"
  },
  {
    "text": "from time to time they disappear um and",
    "start": "723680",
    "end": "726399"
  },
  {
    "text": "to get this number to to get the layers",
    "start": "726399",
    "end": "728959"
  },
  {
    "text": "I had to get the config files to get the",
    "start": "728959",
    "end": "732000"
  },
  {
    "text": "config files from the and the manifest",
    "start": "732000",
    "end": "734079"
  },
  {
    "text": "takes approximately 10 days quite a lot",
    "start": "734079",
    "end": "736639"
  },
  {
    "text": "of time and the next thing when you have",
    "start": "736639",
    "end": "739839"
  },
  {
    "text": "config file you can have a look at",
    "start": "739839",
    "end": "741279"
  },
  {
    "text": "instructions so we'll start here on the",
    "start": "741279",
    "end": "743279"
  },
  {
    "text": "right so on the right we have the number",
    "start": "743279",
    "end": "744880"
  },
  {
    "text": "of instruction run is the most used uh",
    "start": "744880",
    "end": "748079"
  },
  {
    "text": "instruction 30% of the instruction are",
    "start": "748079",
    "end": "750240"
  },
  {
    "text": "run instructions and then we have copy",
    "start": "750240",
    "end": "753680"
  },
  {
    "text": "cmd add and star here means everything",
    "start": "753680",
    "end": "756480"
  },
  {
    "text": "else expose entry point uh and the other",
    "start": "756480",
    "end": "761160"
  },
  {
    "text": "ones so that was the count for the size",
    "start": "761160",
    "end": "764560"
  },
  {
    "text": "um so if you recall um we have 48",
    "start": "764560",
    "end": "768079"
  },
  {
    "text": "pabytes at that stage run that's 70% of",
    "start": "768079",
    "end": "771279"
  },
  {
    "text": "the total 3.3 pabytes and indeed a run",
    "start": "771279",
    "end": "775200"
  },
  {
    "text": "layers are not really important most of",
    "start": "775200",
    "end": "776880"
  },
  {
    "text": "the time you will see calls to APK apt",
    "start": "776880",
    "end": "780480"
  },
  {
    "text": "installation of softwares installation",
    "start": "780480",
    "end": "782240"
  },
  {
    "text": "of Java SDK so what I decided to do is",
    "start": "782240",
    "end": "785360"
  },
  {
    "text": "not to scan run layers",
    "start": "785360",
    "end": "787880"
  },
  {
    "text": "um because that will exclude most of the",
    "start": "787880",
    "end": "790880"
  },
  {
    "text": "volume i will focus only on copy and add",
    "start": "790880",
    "end": "793040"
  },
  {
    "text": "and here the idea is to only have a look",
    "start": "793040",
    "end": "794959"
  },
  {
    "text": "at files that are copied into the final",
    "start": "794959",
    "end": "798480"
  },
  {
    "text": "images so obviously I'm likely missing",
    "start": "798480",
    "end": "800880"
  },
  {
    "text": "some uh secrets by um not scanning run",
    "start": "800880",
    "end": "804399"
  },
  {
    "text": "layers and I will discuss that later on",
    "start": "804399",
    "end": "806320"
  },
  {
    "text": "we we found tricks to actually identify",
    "start": "806320",
    "end": "808639"
  },
  {
    "text": "the good layers without scanning",
    "start": "808639",
    "end": "810600"
  },
  {
    "text": "everything so if you do that you go from",
    "start": "810600",
    "end": "813760"
  },
  {
    "text": "um a bit less than one pabyte to 412",
    "start": "813760",
    "end": "817040"
  },
  {
    "text": "terabytes that's 18 million unique",
    "start": "817040",
    "end": "819360"
  },
  {
    "text": "layers and we need still to do one more",
    "start": "819360",
    "end": "822000"
  },
  {
    "text": "step to go to",
    "start": "822000",
    "end": "825120"
  },
  {
    "text": "50 the the trick here is to have a look",
    "start": "825160",
    "end": "827760"
  },
  {
    "text": "at the the add and copy layer sizes um",
    "start": "827760",
    "end": "830959"
  },
  {
    "text": "and this graph is also interesting um so",
    "start": "830959",
    "end": "834480"
  },
  {
    "text": "in in in uh in right here the the white",
    "start": "834480",
    "end": "837920"
  },
  {
    "text": "color 99% of the layer are below 200",
    "start": "837920",
    "end": "841320"
  },
  {
    "text": "megabytes what I decided to do to do is",
    "start": "841320",
    "end": "843920"
  },
  {
    "text": "take a smaller size so what I did I only",
    "start": "843920",
    "end": "847360"
  },
  {
    "text": "have a had a look at layers smaller than",
    "start": "847360",
    "end": "849600"
  },
  {
    "text": "45 megabytes that's 90% of the layer so",
    "start": "849600",
    "end": "852560"
  },
  {
    "text": "at that stage we have 60 million unique",
    "start": "852560",
    "end": "855440"
  },
  {
    "text": "layers with a max layer size 45 it's",
    "start": "855440",
    "end": "858240"
  },
  {
    "text": "still 15 million images it's just that",
    "start": "858240",
    "end": "860800"
  },
  {
    "text": "I'm looking at less",
    "start": "860800",
    "end": "862760"
  },
  {
    "text": "data so if you put everything together",
    "start": "862760",
    "end": "865199"
  },
  {
    "text": "to scan Docker Hub or indeed to scan any",
    "start": "865199",
    "end": "867839"
  },
  {
    "text": "registry but Docker is the biggest one",
    "start": "867839",
    "end": "870399"
  },
  {
    "text": "it took me 15 days to do the discovery",
    "start": "870399",
    "end": "872480"
  },
  {
    "text": "phase so identifying the repositories",
    "start": "872480",
    "end": "875040"
  },
  {
    "text": "and the images uh three days to scan the",
    "start": "875040",
    "end": "878120"
  },
  {
    "text": "the config files with the gigard gigan",
    "start": "878120",
    "end": "881519"
  },
  {
    "text": "products 20 days to download and scan",
    "start": "881519",
    "end": "884399"
  },
  {
    "text": "the the layers and here you have the the",
    "start": "884399",
    "end": "887600"
  },
  {
    "text": "the the curve which is more or less the",
    "start": "887600",
    "end": "889839"
  },
  {
    "text": "speed of the scan over 20 days in the",
    "start": "889839",
    "end": "891839"
  },
  {
    "text": "end it was Christmas time so I was off i",
    "start": "891839",
    "end": "894320"
  },
  {
    "text": "didn't look at the experiment so it took",
    "start": "894320",
    "end": "896480"
  },
  {
    "text": "like three days to complete that was",
    "start": "896480",
    "end": "898480"
  },
  {
    "text": "super slow at the end I was off",
    "start": "898480",
    "end": "900639"
  },
  {
    "text": "basically celebrating",
    "start": "900639",
    "end": "903000"
  },
  {
    "text": "Christmas okay um charts numbers i know",
    "start": "903000",
    "end": "906639"
  },
  {
    "text": "it's not always super fun to have a look",
    "start": "906639",
    "end": "908720"
  },
  {
    "text": "at chart and numbers so I try to to make",
    "start": "908720",
    "end": "911199"
  },
  {
    "text": "a short version of that first really",
    "start": "911199",
    "end": "914079"
  },
  {
    "text": "important point before the numbers",
    "start": "914079",
    "end": "916079"
  },
  {
    "text": "that's um what we call at Gardian secret",
    "start": "916079",
    "end": "918800"
  },
  {
    "text": "detectors we have two types first the",
    "start": "918800",
    "end": "921920"
  },
  {
    "text": "detector that we call specific and as an",
    "start": "921920",
    "end": "924160"
  },
  {
    "text": "attacker I will go for that or as a",
    "start": "924160",
    "end": "925920"
  },
  {
    "text": "pentester red timmer I will go for the",
    "start": "925920",
    "end": "927839"
  },
  {
    "text": "specific why because they belong to well",
    "start": "927839",
    "end": "931360"
  },
  {
    "text": "they use sorry well-known patterns and",
    "start": "931360",
    "end": "933560"
  },
  {
    "text": "formats usually they can be mapped to",
    "start": "933560",
    "end": "936079"
  },
  {
    "text": "specific uh services and provider GitHub",
    "start": "936079",
    "end": "939040"
  },
  {
    "text": "GCP AWS and so on and they may be um",
    "start": "939040",
    "end": "942720"
  },
  {
    "text": "automatically validated which is the",
    "start": "942720",
    "end": "945199"
  },
  {
    "text": "example I presented before for GitHub we",
    "start": "945199",
    "end": "947600"
  },
  {
    "text": "are able to identify a GitHub token and",
    "start": "947600",
    "end": "950240"
  },
  {
    "text": "to check it against an API so maybe",
    "start": "950240",
    "end": "952720"
  },
  {
    "text": "automatic automatically validated why",
    "start": "952720",
    "end": "954959"
  },
  {
    "text": "because the specific could be an open",
    "start": "954959",
    "end": "957120"
  },
  {
    "text": "SSH private key and obviously it's",
    "start": "957120",
    "end": "958800"
  },
  {
    "text": "difficult to know which host to connect",
    "start": "958800",
    "end": "960839"
  },
  {
    "text": "to and then on the other hand we have",
    "start": "960839",
    "end": "963040"
  },
  {
    "text": "generic secret generic secret they look",
    "start": "963040",
    "end": "965680"
  },
  {
    "text": "random",
    "start": "965680",
    "end": "967199"
  },
  {
    "text": "um we don't know the service or the",
    "start": "967199",
    "end": "969519"
  },
  {
    "text": "provider and we lack the context so",
    "start": "969519",
    "end": "971440"
  },
  {
    "text": "generic secret are not are kind of",
    "start": "971440",
    "end": "973839"
  },
  {
    "text": "difficult to automate so I I think",
    "start": "973839",
    "end": "975839"
  },
  {
    "text": "they're not great um but a human must",
    "start": "975839",
    "end": "978959"
  },
  {
    "text": "have a look at them and I'm really lucky",
    "start": "978959",
    "end": "981440"
  },
  {
    "text": "because at GG we have really great",
    "start": "981440",
    "end": "984240"
  },
  {
    "text": "people really great machine learning",
    "start": "984240",
    "end": "985920"
  },
  {
    "text": "scientist and my colleague they managed",
    "start": "985920",
    "end": "987920"
  },
  {
    "text": "something really really cool they took",
    "start": "987920",
    "end": "990320"
  },
  {
    "text": "like this gen secrets they applied their",
    "start": "990320",
    "end": "992399"
  },
  {
    "text": "own model and they are able to",
    "start": "992399",
    "end": "993680"
  },
  {
    "text": "categorize 13% of the gener secret which",
    "start": "993680",
    "end": "996240"
  },
  {
    "text": "means that usually you don't know what",
    "start": "996240",
    "end": "998560"
  },
  {
    "text": "to do with the secret but because of",
    "start": "998560",
    "end": "1000399"
  },
  {
    "text": "this model we are able to know if it's",
    "start": "1000399",
    "end": "1002320"
  },
  {
    "text": "for example a Microsoft SQL server login",
    "start": "1002320",
    "end": "1004880"
  },
  {
    "text": "and password so I think it's really",
    "start": "1004880",
    "end": "1007040"
  },
  {
    "text": "great but that's out of the scope for",
    "start": "1007040",
    "end": "1008639"
  },
  {
    "text": "today so I'm going after specific and",
    "start": "1008639",
    "end": "1010880"
  },
  {
    "text": "after",
    "start": "1010880",
    "end": "1012040"
  },
  {
    "text": "valid",
    "start": "1012040",
    "end": "1013800"
  },
  {
    "text": "Um there's okay one information I need",
    "start": "1013800",
    "end": "1016560"
  },
  {
    "text": "to give you the only information you",
    "start": "1016560",
    "end": "1018399"
  },
  {
    "text": "need to to to take back home um in",
    "start": "1018399",
    "end": "1021360"
  },
  {
    "text": "English this is called a pie chart so",
    "start": "1021360",
    "end": "1023920"
  },
  {
    "text": "I'm French we call that a cam",
    "start": "1023920",
    "end": "1026520"
  },
  {
    "text": "bear that only information you need to",
    "start": "1026520",
    "end": "1029199"
  },
  {
    "text": "to take back home from cubecon the cam",
    "start": "1029199",
    "end": "1031438"
  },
  {
    "text": "bear is a cheese so 5% of the",
    "start": "1031439",
    "end": "1035360"
  },
  {
    "text": "repositories they contain a secret",
    "start": "1035360",
    "end": "1037360"
  },
  {
    "text": "that's in other words that's one out of",
    "start": "1037360",
    "end": "1039678"
  },
  {
    "text": "20 that's huge um first uh number second",
    "start": "1039679",
    "end": "1044720"
  },
  {
    "text": "number origin most of these secret they",
    "start": "1044720",
    "end": "1046959"
  },
  {
    "text": "come from they come from layers not from",
    "start": "1046959",
    "end": "1049559"
  },
  {
    "text": "config so several possibilities I'm",
    "start": "1049559",
    "end": "1052400"
  },
  {
    "text": "scanning way more files than layers",
    "start": "1052400",
    "end": "1055039"
  },
  {
    "text": "that's why this percentage thingy is not",
    "start": "1055039",
    "end": "1056799"
  },
  {
    "text": "super great or people are not actually",
    "start": "1056799",
    "end": "1059120"
  },
  {
    "text": "leaking uh any secret in docker",
    "start": "1059120",
    "end": "1062039"
  },
  {
    "text": "files next slide um the best for",
    "start": "1062039",
    "end": "1065559"
  },
  {
    "text": "attackers 20% of these secrets specific",
    "start": "1065559",
    "end": "1069679"
  },
  {
    "text": "secrets obviously are valid that's huge",
    "start": "1069679",
    "end": "1072600"
  },
  {
    "text": "100",
    "start": "1072600",
    "end": "1074120"
  },
  {
    "text": "um,000 secrets are valid today in Docker",
    "start": "1074120",
    "end": "1077679"
  },
  {
    "text": "Hub um not all detector are equal so",
    "start": "1077679",
    "end": "1081919"
  },
  {
    "text": "this 100,000 secret come from 230",
    "start": "1081919",
    "end": "1085360"
  },
  {
    "text": "detector types obviously some of them",
    "start": "1085360",
    "end": "1087919"
  },
  {
    "text": "are not super interesting for attacker",
    "start": "1087919",
    "end": "1090000"
  },
  {
    "text": "open weather map API keys uh you can get",
    "start": "1090000",
    "end": "1093440"
  },
  {
    "text": "the t the weather in London New York",
    "start": "1093440",
    "end": "1096400"
  },
  {
    "text": "Tokyo Paris do that a lot of time it's",
    "start": "1096400",
    "end": "1099039"
  },
  {
    "text": "not an attack not super great but I will",
    "start": "1099039",
    "end": "1102400"
  },
  {
    "text": "as we will see in the next slide we have",
    "start": "1102400",
    "end": "1103919"
  },
  {
    "text": "other more powerful types for attacker",
    "start": "1103919",
    "end": "1106080"
  },
  {
    "text": "canot check here is really great again",
    "start": "1106080",
    "end": "1107919"
  },
  {
    "text": "could mean that we managed to identify a",
    "start": "1107919",
    "end": "1110320"
  },
  {
    "text": "gitlab personal access token and we also",
    "start": "1110320",
    "end": "1113039"
  },
  {
    "text": "managed to identify that the host is not",
    "start": "1113039",
    "end": "1114960"
  },
  {
    "text": "reachable so these secrets are really",
    "start": "1114960",
    "end": "1116799"
  },
  {
    "text": "interesting especially for attacker in",
    "start": "1116799",
    "end": "1118880"
  },
  {
    "text": "your internal network because they can",
    "start": "1118880",
    "end": "1120400"
  },
  {
    "text": "use that to do lateral lateral movement",
    "start": "1120400",
    "end": "1122400"
  },
  {
    "text": "so they can go deeper and deeper",
    "start": "1122400",
    "end": "1125480"
  },
  {
    "text": "um types types 28% of the secrets secret",
    "start": "1125480",
    "end": "1130559"
  },
  {
    "text": "detector that related to data storage so",
    "start": "1130559",
    "end": "1132559"
  },
  {
    "text": "for us at GitGu means databases S3",
    "start": "1132559",
    "end": "1135919"
  },
  {
    "text": "buckets and so on so total of this 28%",
    "start": "1135919",
    "end": "1139559"
  },
  {
    "text": "that's 140,000 secrets 13% are valid",
    "start": "1139559",
    "end": "1143840"
  },
  {
    "text": "that's a huge number again um and the",
    "start": "1143840",
    "end": "1146240"
  },
  {
    "text": "second biggest category that's cloud",
    "start": "1146240",
    "end": "1147679"
  },
  {
    "text": "provider we have",
    "start": "1147679",
    "end": "1149320"
  },
  {
    "text": "uh um 100,000 sorry secrets and 50% are",
    "start": "1149320",
    "end": "1154240"
  },
  {
    "text": "valid so again in Docker up today you",
    "start": "1154240",
    "end": "1157360"
  },
  {
    "text": "have a lot of critical secrets for many",
    "start": "1157360",
    "end": "1159919"
  },
  {
    "text": "big",
    "start": "1159919",
    "end": "1161320"
  },
  {
    "text": "companies something I didn't tell why",
    "start": "1161320",
    "end": "1163679"
  },
  {
    "text": "I'm doing that i'm doing responsible",
    "start": "1163679",
    "end": "1165200"
  },
  {
    "text": "disclosure because as a security",
    "start": "1165200",
    "end": "1166880"
  },
  {
    "text": "researcher that's my duty to report",
    "start": "1166880",
    "end": "1168960"
  },
  {
    "text": "anything critical to companies and in",
    "start": "1168960",
    "end": "1171200"
  },
  {
    "text": "the past four to five months I've been",
    "start": "1171200",
    "end": "1173120"
  },
  {
    "text": "doing that i will I will not like give",
    "start": "1173120",
    "end": "1175200"
  },
  {
    "text": "you names we have a blog post on that uh",
    "start": "1175200",
    "end": "1178000"
  },
  {
    "text": "because from time to time people are",
    "start": "1178000",
    "end": "1179360"
  },
  {
    "text": "really happy that we give them secrets",
    "start": "1179360",
    "end": "1181360"
  },
  {
    "text": "and they put them on their wall of fame",
    "start": "1181360",
    "end": "1183120"
  },
  {
    "text": "or we have",
    "start": "1183120",
    "end": "1184760"
  },
  {
    "text": "vulner we are finding u yeah secrets for",
    "start": "1184760",
    "end": "1188480"
  },
  {
    "text": "big companies the last",
    "start": "1188480",
    "end": "1190400"
  },
  {
    "text": "[Music]",
    "start": "1190400",
    "end": "1191960"
  },
  {
    "text": "um graph this one is just crazy uh 60%",
    "start": "1191960",
    "end": "1197120"
  },
  {
    "text": "of the valid secrets were leaked before",
    "start": "1197120",
    "end": "1199720"
  },
  {
    "text": "2024 so it mean that the more like you",
    "start": "1199720",
    "end": "1202320"
  },
  {
    "text": "wait the more secret you",
    "start": "1202320",
    "end": "1204280"
  },
  {
    "text": "find crazy and for 2020 so five years",
    "start": "1204280",
    "end": "1208039"
  },
  {
    "text": "ago 2,000 secrets are still valid so if",
    "start": "1208039",
    "end": "1211280"
  },
  {
    "text": "you're able to grab them you can attack",
    "start": "1211280",
    "end": "1213840"
  },
  {
    "text": "someone you can go deep in the uh in the",
    "start": "1213840",
    "end": "1215840"
  },
  {
    "text": "architecture that's uh for me this",
    "start": "1215840",
    "end": "1217840"
  },
  {
    "text": "number of 2,000 that's just",
    "start": "1217840",
    "end": "1220840"
  },
  {
    "text": "insane and I'm seeing that every day",
    "start": "1220840",
    "end": "1223840"
  },
  {
    "text": "yesterday I was having uh coffee kul",
    "start": "1223840",
    "end": "1227200"
  },
  {
    "text": "coffee at breakfast i found a valid",
    "start": "1227200",
    "end": "1229360"
  },
  {
    "text": "GitHub uh token that gave me access to",
    "start": "1229360",
    "end": "1232480"
  },
  {
    "text": "Kubernetes related open source project",
    "start": "1232480",
    "end": "1235440"
  },
  {
    "text": "so it means that I'm able to do any kind",
    "start": "1235440",
    "end": "1237440"
  },
  {
    "text": "of supply chain attack against project",
    "start": "1237440",
    "end": "1239520"
  },
  {
    "text": "that's my breakfast like do that every",
    "start": "1239520",
    "end": "1242159"
  },
  {
    "text": "day crazy",
    "start": "1242159",
    "end": "1243880"
  },
  {
    "text": "stuff um so conclusion docker pitfalls",
    "start": "1243880",
    "end": "1248159"
  },
  {
    "text": "and takeaways",
    "start": "1248159",
    "end": "1251320"
  },
  {
    "text": "um I hope some of you will not believe",
    "start": "1251320",
    "end": "1253840"
  },
  {
    "text": "the next slides",
    "start": "1253840",
    "end": "1256000"
  },
  {
    "text": "so first I guess you know docker",
    "start": "1256000",
    "end": "1258400"
  },
  {
    "text": "remembers here that's a a fake docker",
    "start": "1258400",
    "end": "1261520"
  },
  {
    "text": "file but it's in inspired by things I've",
    "start": "1261520",
    "end": "1264320"
  },
  {
    "text": "seen uh from copy do stuff run npmci and",
    "start": "1264320",
    "end": "1268880"
  },
  {
    "text": "then remove npm rc so npmrc was added to",
    "start": "1268880",
    "end": "1272960"
  },
  {
    "text": "the docker image with the copy",
    "start": "1272960",
    "end": "1275240"
  },
  {
    "text": "instruction but the thing is npm rc is",
    "start": "1275240",
    "end": "1278000"
  },
  {
    "text": "not removed from the image it's just",
    "start": "1278000",
    "end": "1279679"
  },
  {
    "text": "removed when you",
    "start": "1279679",
    "end": "1281240"
  },
  {
    "text": "actually do docker run and the file is",
    "start": "1281240",
    "end": "1284400"
  },
  {
    "text": "still in the copy layer and if you get",
    "start": "1284400",
    "end": "1285919"
  },
  {
    "text": "the copy layer you get a secret so this",
    "start": "1285919",
    "end": "1287679"
  },
  {
    "text": "is a pattern that is not really frequent",
    "start": "1287679",
    "end": "1289600"
  },
  {
    "text": "but you can see it so docker",
    "start": "1289600",
    "end": "1291960"
  },
  {
    "text": "remembers next point is more more",
    "start": "1291960",
    "end": "1295200"
  },
  {
    "text": "question my question is are people",
    "start": "1295200",
    "end": "1297760"
  },
  {
    "text": "leaking or hardcoding secrets in docker",
    "start": "1297760",
    "end": "1300559"
  },
  {
    "text": "file i don't think so in practice there",
    "start": "1300559",
    "end": "1302799"
  },
  {
    "text": "are really few hardcoded secrets in",
    "start": "1302799",
    "end": "1304480"
  },
  {
    "text": "docker file so here I'm using scopio and",
    "start": "1304480",
    "end": "1307200"
  },
  {
    "text": "dq that's perfect tools to to go fast",
    "start": "1307200",
    "end": "1310480"
  },
  {
    "text": "and analyze docker images and you can",
    "start": "1310480",
    "end": "1312320"
  },
  {
    "text": "see that someone actually tried to do",
    "start": "1312320",
    "end": "1314799"
  },
  {
    "text": "echo that's s3",
    "start": "1314799",
    "end": "1317640"
  },
  {
    "text": "um client ID client secret echo client",
    "start": "1317640",
    "end": "1321039"
  },
  {
    "text": "ID client secret into a file this square",
    "start": "1321039",
    "end": "1322960"
  },
  {
    "text": "valid and this pattern is not really",
    "start": "1322960",
    "end": "1325360"
  },
  {
    "text": "seen really often so what is going",
    "start": "1325360",
    "end": "1328039"
  },
  {
    "text": "on so let's have a look at the other",
    "start": "1328039",
    "end": "1330159"
  },
  {
    "text": "pattern again copy and GQ so here we",
    "start": "1330159",
    "end": "1333360"
  },
  {
    "text": "have a bunch of arg instructions on and",
    "start": "1333360",
    "end": "1336640"
  },
  {
    "text": "here that's really really again really",
    "start": "1336640",
    "end": "1339840"
  },
  {
    "text": "crazy insane um leak the appearing",
    "start": "1339840",
    "end": "1342400"
  },
  {
    "text": "configs as a result of docker build",
    "start": "1342400",
    "end": "1345200"
  },
  {
    "text": "strange so let's have an example this",
    "start": "1345200",
    "end": "1347360"
  },
  {
    "text": "one was just crafted crafted for you uh",
    "start": "1347360",
    "end": "1350240"
  },
  {
    "text": "on top we have a a docker file is really",
    "start": "1350240",
    "end": "1353760"
  },
  {
    "text": "nice this docker file no secret at all",
    "start": "1353760",
    "end": "1356080"
  },
  {
    "text": "the only bad stuff let's put that way",
    "start": "1356080",
    "end": "1358400"
  },
  {
    "text": "that the echo test and in that case the",
    "start": "1358400",
    "end": "1360640"
  },
  {
    "text": "password will be seen in in your",
    "start": "1360640",
    "end": "1362799"
  },
  {
    "text": "terminal at build time which is let's",
    "start": "1362799",
    "end": "1365120"
  },
  {
    "text": "say okay just for um the testing purpose",
    "start": "1365120",
    "end": "1368960"
  },
  {
    "text": "second phase docker build and we have",
    "start": "1368960",
    "end": "1370960"
  },
  {
    "text": "the build arg and for me that's",
    "start": "1370960",
    "end": "1372799"
  },
  {
    "text": "perfectly fine I've been doing security",
    "start": "1372799",
    "end": "1374480"
  },
  {
    "text": "for years 15 years or more I've been a",
    "start": "1374480",
    "end": "1377120"
  },
  {
    "text": "developer before and everyone told me",
    "start": "1377120",
    "end": "1379440"
  },
  {
    "text": "not to art code everyone told me to use",
    "start": "1379440",
    "end": "1382720"
  },
  {
    "text": "variables to to pass secret and from",
    "start": "1382720",
    "end": "1384640"
  },
  {
    "text": "time to time it's not possible to use",
    "start": "1384640",
    "end": "1386159"
  },
  {
    "text": "arguments so this looks fine I mean it's",
    "start": "1386159",
    "end": "1388640"
  },
  {
    "text": "not hard",
    "start": "1388640",
    "end": "1389960"
  },
  {
    "text": "coded in the bottom What you have that's",
    "start": "1389960",
    "end": "1393679"
  },
  {
    "text": "call it a flat representation of the",
    "start": "1393679",
    "end": "1395200"
  },
  {
    "text": "JSON config file json is not really easy",
    "start": "1395200",
    "end": "1397760"
  },
  {
    "text": "to put on slide so it's just a flat",
    "start": "1397760",
    "end": "1399360"
  },
  {
    "text": "version and inside you have the secrets",
    "start": "1399360",
    "end": "1401520"
  },
  {
    "text": "this funny way of writing cubecon in",
    "start": "1401520",
    "end": "1404679"
  },
  {
    "text": "arg and run layer so it mean that docker",
    "start": "1404679",
    "end": "1408480"
  },
  {
    "text": "build leaks secrets into the config so",
    "start": "1408480",
    "end": "1410799"
  },
  {
    "text": "this is just insane",
    "start": "1410799",
    "end": "1414640"
  },
  {
    "text": "so what people do usually when they find",
    "start": "1414640",
    "end": "1417600"
  },
  {
    "text": "insense stuff they clear ah it's too",
    "start": "1417600",
    "end": "1419280"
  },
  {
    "text": "crazy and then they read the",
    "start": "1419280",
    "end": "1420919"
  },
  {
    "text": "documentation there the big warning",
    "start": "1420919",
    "end": "1423039"
  },
  {
    "text": "build arguments and environment",
    "start": "1423039",
    "end": "1424559"
  },
  {
    "text": "variables are inappropriate for passing",
    "start": "1424559",
    "end": "1426240"
  },
  {
    "text": "secret to your build because they are",
    "start": "1426240",
    "end": "1427919"
  },
  {
    "text": "exposed in the final image instead use",
    "start": "1427919",
    "end": "1430000"
  },
  {
    "text": "secret mounts or SSH mounts which expose",
    "start": "1430000",
    "end": "1433600"
  },
  {
    "text": "secrets to your build securely don't do",
    "start": "1433600",
    "end": "1436559"
  },
  {
    "text": "that so don't use build ar so what else",
    "start": "1436559",
    "end": "1440080"
  },
  {
    "text": "so that's after the camera that's the",
    "start": "1440080",
    "end": "1442000"
  },
  {
    "text": "other thing you need to to take back",
    "start": "1442000",
    "end": "1443280"
  },
  {
    "text": "home use mount secret but I think in the",
    "start": "1443280",
    "end": "1446480"
  },
  {
    "text": "previous presentation they also discuss",
    "start": "1446480",
    "end": "1448720"
  },
  {
    "text": "um this uh best practice mount secret",
    "start": "1448720",
    "end": "1452080"
  },
  {
    "text": "the only drawback for me the the way you",
    "start": "1452080",
    "end": "1454880"
  },
  {
    "text": "actually use it run d-m type secret is",
    "start": "1454880",
    "end": "1457600"
  },
  {
    "text": "not really easy to remember um anyway on",
    "start": "1457600",
    "end": "1460720"
  },
  {
    "text": "top a docker file in the middle the new",
    "start": "1460720",
    "end": "1464559"
  },
  {
    "text": "way and clean way to pass a secret dash",
    "start": "1464559",
    "end": "1466960"
  },
  {
    "text": "secrets so here we are mapping the",
    "start": "1466960",
    "end": "1468880"
  },
  {
    "text": "random variable to secret and the trick",
    "start": "1468880",
    "end": "1471440"
  },
  {
    "text": "here random is",
    "start": "1471440",
    "end": "1473600"
  },
  {
    "text": "random so every time you call the",
    "start": "1473600",
    "end": "1475039"
  },
  {
    "text": "comment that's a new secret injecting",
    "start": "1475039",
    "end": "1476799"
  },
  {
    "text": "into secret just a trick to to see if it",
    "start": "1476799",
    "end": "1479279"
  },
  {
    "text": "works and at the bottom you have the the",
    "start": "1479279",
    "end": "1482000"
  },
  {
    "text": "resulting JSON config file so no secret",
    "start": "1482000",
    "end": "1484000"
  },
  {
    "text": "inside so that the best way to do",
    "start": "1484000",
    "end": "1486240"
  },
  {
    "text": "secrets are only accessible at build",
    "start": "1486240",
    "end": "1488159"
  },
  {
    "text": "time so that's I guess one of the main",
    "start": "1488159",
    "end": "1491159"
  },
  {
    "text": "takeaway from this",
    "start": "1491159",
    "end": "1494279"
  },
  {
    "text": "presentation next um another",
    "start": "1494279",
    "end": "1497240"
  },
  {
    "text": "question what if people are actually",
    "start": "1497240",
    "end": "1499679"
  },
  {
    "text": "doing such bad stuff that secrets are",
    "start": "1499679",
    "end": "1503200"
  },
  {
    "text": "finally leaking in run layers so this is",
    "start": "1503200",
    "end": "1507120"
  },
  {
    "text": "a fake example obviously no one will",
    "start": "1507120",
    "end": "1509360"
  },
  {
    "text": "ever write that no one will ever use run",
    "start": "1509360",
    "end": "1513760"
  },
  {
    "text": "and redirect that into",
    "start": "1513760",
    "end": "1516240"
  },
  {
    "text": "um so that could be of",
    "start": "1516240",
    "end": "1518760"
  },
  {
    "text": "config.gsing py any file storing",
    "start": "1518760",
    "end": "1521440"
  },
  {
    "text": "credential that could be used by an",
    "start": "1521440",
    "end": "1522960"
  },
  {
    "text": "application to do something else for",
    "start": "1522960",
    "end": "1524320"
  },
  {
    "text": "example connect to a database",
    "start": "1524320",
    "end": "1528360"
  },
  {
    "text": "okay might work so let's have a look",
    "start": "1528400",
    "end": "1531039"
  },
  {
    "text": "let's select grab whatever kind of tool",
    "start": "1531039",
    "end": "1533520"
  },
  {
    "text": "you use and that's just a small example",
    "start": "1533520",
    "end": "1536360"
  },
  {
    "text": "of real instruction in my data set and",
    "start": "1536360",
    "end": "1539760"
  },
  {
    "text": "actually people are using that so the",
    "start": "1539760",
    "end": "1541600"
  },
  {
    "text": "last line here that's my fake example",
    "start": "1541600",
    "end": "1543679"
  },
  {
    "text": "which is indeed real people are doing",
    "start": "1543679",
    "end": "1545320"
  },
  {
    "text": "that um in blue do you know what what's",
    "start": "1545320",
    "end": "1549120"
  },
  {
    "text": "the blue stuff that's a question for you",
    "start": "1549120",
    "end": "1552320"
  },
  {
    "text": "what is the blue part",
    "start": "1552320",
    "end": "1556200"
  },
  {
    "text": "okay so blue",
    "start": "1557039",
    "end": "1559400"
  },
  {
    "text": "parts that two slides ago we discussed",
    "start": "1559400",
    "end": "1562400"
  },
  {
    "text": "mount secrets so mount secrets can",
    "start": "1562400",
    "end": "1565559"
  },
  {
    "text": "assign a secret to a variable and we'll",
    "start": "1565559",
    "end": "1568880"
  },
  {
    "text": "also give",
    "start": "1568880",
    "end": "1570600"
  },
  {
    "text": "you this pass run secret so here we have",
    "start": "1570600",
    "end": "1573799"
  },
  {
    "text": "someone that is doing the best stuff in",
    "start": "1573799",
    "end": "1576880"
  },
  {
    "text": "the docker world to give a secret to an",
    "start": "1576880",
    "end": "1579840"
  },
  {
    "text": "image at build time and at the same time",
    "start": "1579840",
    "end": "1581919"
  },
  {
    "text": "it's our coding the secrets in the end",
    "start": "1581919",
    "end": "1584240"
  },
  {
    "text": "so this is the worst thing ever don't",
    "start": "1584240",
    "end": "1586880"
  },
  {
    "text": "ever do that please tell that to anyone",
    "start": "1586880",
    "end": "1589360"
  },
  {
    "text": "you love don't ever do that the worst of",
    "start": "1589360",
    "end": "1592880"
  },
  {
    "text": "that that's in the data set",
    "start": "1592880",
    "end": "1596039"
  },
  {
    "text": "um it's time to",
    "start": "1596039",
    "end": "1598760"
  },
  {
    "text": "conclude brief conclusion uh I'm sorry",
    "start": "1598760",
    "end": "1601840"
  },
  {
    "text": "but you are probably leaking secrets",
    "start": "1601840",
    "end": "1604720"
  },
  {
    "text": "maybe not you maybe a friend maybe",
    "start": "1604720",
    "end": "1606799"
  },
  {
    "text": "someone in your company and it's not",
    "start": "1606799",
    "end": "1609279"
  },
  {
    "text": "because someone in your company is doing",
    "start": "1609279",
    "end": "1611120"
  },
  {
    "text": "bad stuff it's because it's difficult",
    "start": "1611120",
    "end": "1612559"
  },
  {
    "text": "it's difficult because there's a wide",
    "start": "1612559",
    "end": "1614080"
  },
  {
    "text": "range of docker pitfalls and I know some",
    "start": "1614080",
    "end": "1616159"
  },
  {
    "text": "people that have been doing docker for",
    "start": "1616159",
    "end": "1617600"
  },
  {
    "text": "years that they didn't know for this",
    "start": "1617600",
    "end": "1619919"
  },
  {
    "text": "build arc stuff so please audit your",
    "start": "1619919",
    "end": "1622720"
  },
  {
    "text": "images for art secrets so obviously if",
    "start": "1622720",
    "end": "1625360"
  },
  {
    "text": "you use our tool gardant will be it will",
    "start": "1625360",
    "end": "1627919"
  },
  {
    "text": "be good and be really happy my",
    "start": "1627919",
    "end": "1629919"
  },
  {
    "text": "colleagues also do whatever you do uh",
    "start": "1629919",
    "end": "1632880"
  },
  {
    "text": "you want to do please scan for secrets",
    "start": "1632880",
    "end": "1635360"
  },
  {
    "text": "there are really bad stuff if you are",
    "start": "1635360",
    "end": "1637120"
  },
  {
    "text": "not technical and more into the let's",
    "start": "1637120",
    "end": "1639279"
  },
  {
    "text": "call it the governance side GRC ISO 2701",
    "start": "1639279",
    "end": "1642240"
  },
  {
    "text": "sock 2 whatever please just try this",
    "start": "1642240",
    "end": "1645600"
  },
  {
    "text": "your 2025 to have an exercise pretend",
    "start": "1645600",
    "end": "1648080"
  },
  {
    "text": "that someone in your company publicly",
    "start": "1648080",
    "end": "1650080"
  },
  {
    "text": "leaked a secret let's call it like the",
    "start": "1650080",
    "end": "1653120"
  },
  {
    "text": "AWS root accounts and see it goes can",
    "start": "1653120",
    "end": "1656559"
  },
  {
    "text": "you revoke can you identify the",
    "start": "1656559",
    "end": "1658679"
  },
  {
    "text": "developer what will happen that's a",
    "start": "1658679",
    "end": "1660720"
  },
  {
    "text": "really good exercise and why um why",
    "start": "1660720",
    "end": "1663520"
  },
  {
    "text": "scanning while doing their size that",
    "start": "1663520",
    "end": "1666480"
  },
  {
    "text": "vehicle prevention that's my guess is",
    "start": "1666480",
    "end": "1669120"
  },
  {
    "text": "more effective than actually dealing",
    "start": "1669120",
    "end": "1671039"
  },
  {
    "text": "with a leak and dealing with um",
    "start": "1671039",
    "end": "1674440"
  },
  {
    "text": "revocation so that's the end of the talk",
    "start": "1674440",
    "end": "1676960"
  },
  {
    "text": "i have the the QR code you can get the",
    "start": "1676960",
    "end": "1680000"
  },
  {
    "text": "the slides online if you have any",
    "start": "1680000",
    "end": "1682480"
  },
  {
    "text": "question I will be around having a",
    "start": "1682480",
    "end": "1684640"
  },
  {
    "text": "coffee and try trying to have a a water",
    "start": "1684640",
    "end": "1688480"
  },
  {
    "text": "uh so yeah you have microphone here if",
    "start": "1688480",
    "end": "1690640"
  },
  {
    "text": "you have any questions",
    "start": "1690640",
    "end": "1693120"
  }
]