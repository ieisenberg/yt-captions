[
  {
    "start": "0",
    "end": "135000"
  },
  {
    "text": "thank you so much everyone for coming it's lovely to see such a full room so I really appreciate you uh spending time",
    "start": "80",
    "end": "7319"
  },
  {
    "text": "here to learn about psyllium and how you can use psyllium cluster mesh to really",
    "start": "7319",
    "end": "14160"
  },
  {
    "text": "make it very very easy to deploy your services across multicloud and multicluster I'm going to try and get",
    "start": "14160",
    "end": "19600"
  },
  {
    "text": "these out of the way they're a bit I don't think they make any difference because I'm using this so okay great uh",
    "start": "19600",
    "end": "26800"
  },
  {
    "text": "I work with ISO veent who are the company that originally created syum so",
    "start": "26800",
    "end": "32000"
  },
  {
    "text": "I have the uh pleasure and privilege of working with some incredibly talented Engineers there I've also been very",
    "start": "32000",
    "end": "38800"
  },
  {
    "text": "involved in the cncf over the years uh with the technical oversight committee and now the governing board I also work",
    "start": "38800",
    "end": "44879"
  },
  {
    "text": "with the open UK board as well",
    "start": "44879",
    "end": "51160"
  },
  {
    "text": "soyum uh cluster mesh is not really a new thing so really what I'm going to be talking about today there's no new",
    "start": "52079",
    "end": "58480"
  },
  {
    "text": "launch but this is really about diving a little bit more into what cluster mesh",
    "start": "58480",
    "end": "63760"
  },
  {
    "text": "is how it works how easy it is to use and I wanted to also just talk a little",
    "start": "63760",
    "end": "69840"
  },
  {
    "text": "bit about my experiences of uh connecting clusters in multiple clouds",
    "start": "69840",
    "end": "75560"
  },
  {
    "text": "I'm going to do something ever so slightly Reckless which is that I do actually have uh a cluster running in",
    "start": "75560",
    "end": "84240"
  },
  {
    "text": "eks so I'm going to be trying to use the wifi uh and I have another cluster",
    "start": "84240",
    "end": "91600"
  },
  {
    "text": "running in Google Cloud so let's hope that I will be able to continue talking",
    "start": "91600",
    "end": "97680"
  },
  {
    "text": "to those clusters for the next half hour or so is that big enough for everyone to",
    "start": "97680",
    "end": "103439"
  },
  {
    "text": "see y great good so cluster mesh really enables us to",
    "start": "103439",
    "end": "111200"
  },
  {
    "text": "distribute the functionality that you get in cium across multiple clusters",
    "start": "111200",
    "end": "117439"
  },
  {
    "text": "whether those clusters are running kind of collocated in the same Cloud perhaps",
    "start": "117439",
    "end": "122799"
  },
  {
    "text": "they're in multiple different regions perhaps they are as I'm going to do today running in different public clouds",
    "start": "122799",
    "end": "129840"
  },
  {
    "text": "and there are all sorts of reasons why you might want to do that so the first thing you need to do",
    "start": "129840",
    "end": "137680"
  },
  {
    "start": "135000",
    "end": "533000"
  },
  {
    "text": "is actually connect those two different clusters and this isn't really anything to do with pllum this is about how you",
    "start": "137680",
    "end": "145360"
  },
  {
    "text": "set up a connection in my case I have connected my VPC in Google and my VPC in",
    "start": "145360",
    "end": "154160"
  },
  {
    "text": "AWS with a VPN connection so one thing you have to do is learn the terminology",
    "start": "154160",
    "end": "160560"
  },
  {
    "text": "of what these things are called in AWS and what they're called in Google or what they're called in Azure the the",
    "start": "160560",
    "end": "167560"
  },
  {
    "text": "terminology might be slightly different in different places the interfaces might look slightly different in different",
    "start": "167560",
    "end": "172879"
  },
  {
    "text": "places but you are essentially trying to set up something that's symmetrical so I I've got yeah a",
    "start": "172879",
    "end": "181840"
  },
  {
    "text": "VPC essentially I've got one Subnet in uh the Amazon Cloud and I want to be",
    "start": "181840",
    "end": "189519"
  },
  {
    "text": "able to get connectivity between that and my VPC in Google Cloud to make",
    "start": "189519",
    "end": "197120"
  },
  {
    "text": "things kind of easy I tried to use five for my Google Cloud andt six",
    "start": "197120",
    "end": "203920"
  },
  {
    "text": "for my Amazon Cloud although it turned out Google also wanted to allocate a few other IP addresses for and services but",
    "start": "203920",
    "end": "211000"
  },
  {
    "text": "I should refer to them as five and six occasionally we have this VPN connection",
    "start": "211000",
    "end": "217439"
  },
  {
    "text": "it actually consists of two VPN tunnels that link those two",
    "start": "217439",
    "end": "224439"
  },
  {
    "text": "clusters but we also have to advertise the addresses from either end so that if",
    "start": "224439",
    "end": "231680"
  },
  {
    "text": "the Google cluster sees an address that's 10.6 it knows I'm going to reach",
    "start": "231680",
    "end": "237239"
  },
  {
    "text": "that through the VPN connection if the AWS side if if a node there is looking",
    "start": "237239",
    "end": "243000"
  },
  {
    "text": "for a 10.5 address or a couple of other uh subnets it needs to know I'm going to",
    "start": "243000",
    "end": "249599"
  },
  {
    "text": "reach it through the VPN connection so you set up uh something",
    "start": "249599",
    "end": "255760"
  },
  {
    "text": "called something like a virtual private Gateway on your Cloud on your attach it",
    "start": "255760",
    "end": "261479"
  },
  {
    "text": "to your VPC and it you have a kind of virtual representation of the remote end and you",
    "start": "261479",
    "end": "269880"
  },
  {
    "text": "run bgp to advertise the addresses through that VPN",
    "start": "269880",
    "end": "275400"
  },
  {
    "text": "connection cium does not really care about any of this which is why if you run cluster mesh in uh you know kind",
    "start": "275400",
    "end": "282600"
  },
  {
    "text": "nodes on on a local machine it will look exactly the same as it will here running",
    "start": "282600",
    "end": "287960"
  },
  {
    "text": "it in two different completely different clouds really just doesn't care about how those two clusters are",
    "start": "287960",
    "end": "296240"
  },
  {
    "text": "connected it does however care about being able to a route or route if there",
    "start": "296240",
    "end": "301360"
  },
  {
    "text": "are any Americans in the audience uh being able to understand how to",
    "start": "301360",
    "end": "307160"
  },
  {
    "text": "reach IP addresses and they need to be unique you couldn't have I mean here",
    "start": "307160",
    "end": "313320"
  },
  {
    "text": "I've got 10.5 in Google couldn't also have 10.5 uh you know the same sublet in",
    "start": "313320",
    "end": "320120"
  },
  {
    "text": "the Amazon Cloud because it would be very confusing how would you know where to rout to so we",
    "start": "320120",
    "end": "325520"
  },
  {
    "text": "need unique IP addresses nonoverlapping set of IP addresses uh for the pods and",
    "start": "325520",
    "end": "333160"
  },
  {
    "text": "also for the nodes so once you've set up this VPN",
    "start": "333160",
    "end": "339160"
  },
  {
    "text": "connection we've got bgp announcing routs uh from one end to the other you",
    "start": "339160",
    "end": "345160"
  },
  {
    "text": "get a rooting table at either end this is the Amazon",
    "start": "345160",
    "end": "350240"
  },
  {
    "text": "end and what you can see here is the orange uh entry in this table says",
    "start": "350240",
    "end": "357400"
  },
  {
    "text": "everything that starts 10.6 is is local is on this VPC everything that's",
    "start": "357400",
    "end": "364600"
  },
  {
    "text": "10.5 or these other two subnets that Google allocated I'm going to reach through this virtual Gateway so that's",
    "start": "364600",
    "end": "371199"
  },
  {
    "text": "really saying go through the VPN tunnel and then anything else it's just on the internet so reach it through the",
    "start": "371199",
    "end": "378400"
  },
  {
    "text": "internet gateway to the to the outside world and there's a similar kind of uh",
    "start": "378400",
    "end": "386240"
  },
  {
    "text": "symmetric version of the same thing in the Google end of this so again here",
    "start": "386240",
    "end": "391800"
  },
  {
    "text": "it's got those three subnets that are in the Google Cloud they're rooted",
    "start": "391800",
    "end": "397000"
  },
  {
    "text": "locally if you want to reach the Amazon Cloud for reasons that I can't give you",
    "start": "397000",
    "end": "404880"
  },
  {
    "text": "a good explanation for it lists as two different tunnels in the Google side but it's just seen as one combined",
    "start": "404880",
    "end": "411199"
  },
  {
    "text": "connection on the Amazon side there are two tunnels in both cases but you can reach those addresses through either of",
    "start": "411199",
    "end": "418720"
  },
  {
    "text": "those VPN pels from uh Google's perspective and then if you had an address that wasn't 10.5 or 10.6 or 10.",
    "start": "418720",
    "end": "427240"
  },
  {
    "text": "whatever you would go through the default internet gateway so these root",
    "start": "427240",
    "end": "434160"
  },
  {
    "text": "tables tell us how the nodes in one cluster are going",
    "start": "434160",
    "end": "439520"
  },
  {
    "text": "to be able to reach you know which interface to use to reach the remote end",
    "start": "439520",
    "end": "446199"
  },
  {
    "text": "now I could probably spend 50 minutes doing a talk about how long it took me to realize you also have to propagate",
    "start": "446199",
    "end": "452800"
  },
  {
    "text": "The Roots this is a pretty uh annoying checkbox if you're trying to set these up you have to tell the virtual private",
    "start": "452800",
    "end": "461000"
  },
  {
    "text": "gateway to inform the nodes in your subnet about those remote addresses",
    "start": "461000",
    "end": "467759"
  },
  {
    "text": "otherwise they just don't know how to reach the remote",
    "start": "467759",
    "end": "473400"
  },
  {
    "text": "end in addition having set up the roots you also have to have the right",
    "start": "473479",
    "end": "478520"
  },
  {
    "text": "permissions to send traffic so typically when you set up a a VPC in a cloud it",
    "start": "478520",
    "end": "484759"
  },
  {
    "text": "will create some default rules for you that will let you send traffic within that VPC so maybe it's going to say",
    "start": "484759",
    "end": "492159"
  },
  {
    "text": "permit all the 10.5 traffic in my 10.5 VPC but you have to configure your own",
    "start": "492159",
    "end": "500280"
  },
  {
    "text": "rules to say I also want to be able to accept traffic from this remote",
    "start": "500280",
    "end": "507000"
  },
  {
    "text": "cluster and we don't have have time or inclination and it's really nothing to",
    "start": "507000",
    "end": "512360"
  },
  {
    "text": "do with psyllium but you need to know to set up the farall rules of the security",
    "start": "512360",
    "end": "517959"
  },
  {
    "text": "groups or the network access control lists to allow at both ends the remote",
    "start": "517959",
    "end": "523719"
  },
  {
    "text": "traffic otherwise it's not going to you know it can get to the uh the remote VPC",
    "start": "523720",
    "end": "528959"
  },
  {
    "text": "but then it can't get to the destination node so having got your connection",
    "start": "528959",
    "end": "535600"
  },
  {
    "start": "533000",
    "end": "847000"
  },
  {
    "text": "between your two different clusters now we can start talking about psyllium and",
    "start": "535600",
    "end": "541200"
  },
  {
    "text": "we can start talking about enabling psyllium cluster mesh",
    "start": "541200",
    "end": "547480"
  },
  {
    "text": "so we have to give each cluster a unique name and ID because otherwise they'd get",
    "start": "547800",
    "end": "553720"
  },
  {
    "text": "confused about each other so I've called them five and six uh one of them's eks",
    "start": "553720",
    "end": "558880"
  },
  {
    "text": "one of them is gke and uh they do need to be using the same routing mode selum can either use",
    "start": "558880",
    "end": "568720"
  },
  {
    "text": "native Ro which means well I'll talk about the the other option is encapsulation or or an overlay",
    "start": "568720",
    "end": "577160"
  },
  {
    "text": "mode in which your packets get kind of encapsulated in a bigger packet so you",
    "start": "577160",
    "end": "584839"
  },
  {
    "text": "have to be using the same encapsulation at either end otherwise the packet that you received",
    "start": "584839",
    "end": "591680"
  },
  {
    "text": "would have a weird address that you didn't expect in my case I've got native rooting at both",
    "start": "591680",
    "end": "598320"
  },
  {
    "text": "ends okay so I'm not going to do this live because it's it's already set up",
    "start": "598320",
    "end": "604480"
  },
  {
    "text": "that uh cluster mesh is enabled when you run the cluster mesh enable command",
    "start": "604480",
    "end": "611519"
  },
  {
    "text": "what it creates for you is this cluster mesh API server so let's just make sure",
    "start": "611519",
    "end": "616760"
  },
  {
    "text": "that our uh cluster meshes are up and running that our whole systems are up and",
    "start": "616760",
    "end": "624480"
  },
  {
    "text": "running correctly and let's hope we're going to get Wi-Fi to tell us that cium",
    "start": "624480",
    "end": "630279"
  },
  {
    "text": "is up and running uh we'll come back to it what we should see is something like",
    "start": "630279",
    "end": "635560"
  },
  {
    "text": "this which includes okay cluster mesh and it will",
    "start": "635560",
    "end": "641240"
  },
  {
    "text": "have deployed a pod and a service for cluster mesh API",
    "start": "641240",
    "end": "648279"
  },
  {
    "text": "server uh and we'll come back to that in a second I'll just talk about the the API service for a moment",
    "start": "648279",
    "end": "655200"
  },
  {
    "text": "so when you enable cluster mesh you get this API service that",
    "start": "655200",
    "end": "661959"
  },
  {
    "text": "allows remote clusters to learn about the services on that cluster so each",
    "start": "661959",
    "end": "668360"
  },
  {
    "text": "agent is going to listen to the remote uh API services that it's connected to",
    "start": "668360",
    "end": "674079"
  },
  {
    "text": "for cluster mesh so that it can learn about the services that are running on that",
    "start": "674079",
    "end": "679480"
  },
  {
    "text": "cluster so let's see whether yeah okay it's come back in both places and we can",
    "start": "679480",
    "end": "685120"
  },
  {
    "text": "see cluster mesh is okay in eks and it is okay in gke",
    "start": "685120",
    "end": "691480"
  },
  {
    "text": "great and if we take a look at the services I think it's in um Cube system",
    "start": "691480",
    "end": "698920"
  },
  {
    "text": "let's just check yeah we should see here we've got the cluster mesh API service running",
    "start": "698920",
    "end": "707560"
  },
  {
    "text": "here accessible externally great uh so the the bit that I skipped",
    "start": "707560",
    "end": "714639"
  },
  {
    "text": "over is uh running cluster mesh status where this tells us whether or not",
    "start": "714639",
    "end": "720160"
  },
  {
    "text": "clusters are connected I haven't connected them yet so they're not but we would see well",
    "start": "720160",
    "end": "726240"
  },
  {
    "text": "have in real life but in my slides I haven't uh so we would see that the cluster information would be available",
    "start": "726240",
    "end": "732680"
  },
  {
    "text": "on this service I'm now ready to be connected to a remote",
    "start": "732680",
    "end": "738000"
  },
  {
    "text": "cluster and we do that with cluster mesh connect and all we need to do is pass in",
    "start": "738000",
    "end": "745360"
  },
  {
    "text": "the cube config context so in the same way that you set up your context if",
    "start": "745360",
    "end": "751880"
  },
  {
    "text": "you're running a cube control command or a how how many people say Cube cuttle how many people say Cube",
    "start": "751880",
    "end": "759240"
  },
  {
    "text": "CTL do we have any Cube control folk I hope to convert you Cube",
    "start": "759240",
    "end": "766199"
  },
  {
    "text": "control when you run a cube control or you can just say k like I do have an alias that's that's the easy way um so",
    "start": "766199",
    "end": "773920"
  },
  {
    "text": "if you're running Cube control by default you're going to pick up uh your Cube config or you can specify a context",
    "start": "773920",
    "end": "781880"
  },
  {
    "text": "a specify a config file ssum cluster mesh is going to run",
    "start": "781880",
    "end": "788920"
  },
  {
    "text": "some essentially run against your kubernetes cluster locally and also the",
    "start": "788920",
    "end": "794199"
  },
  {
    "text": "remote cluster that you're connecting to so in this example when I ran this I ran",
    "start": "794199",
    "end": "800480"
  },
  {
    "text": "it on cluster six and I said I want to connect to Cluster 5 and it looked uh",
    "start": "800480",
    "end": "807600"
  },
  {
    "text": "locally and remotely and uh figured out how to connect those two uh services to each other and send",
    "start": "807600",
    "end": "814639"
  },
  {
    "text": "each other the information about the remote API service so if I look at the cluster mesh",
    "start": "814639",
    "end": "824680"
  },
  {
    "text": "status we should be connected in both cases I",
    "start": "824680",
    "end": "831240"
  },
  {
    "text": "hope okay good we've got uh Global Services of one in both cases and we can",
    "start": "834880",
    "end": "840639"
  },
  {
    "text": "see the remote end in both cases so good all right it looks like that so now we can",
    "start": "840639",
    "end": "850800"
  },
  {
    "start": "847000",
    "end": "865000"
  },
  {
    "text": "run Global kubernetes Services that are accessible from both those places or",
    "start": "850800",
    "end": "857600"
  },
  {
    "text": "since I like to have Star Wars themes demos let's consider them as Intergalactic kubernetes",
    "start": "857600",
    "end": "864279"
  },
  {
    "text": "services so all we need to do to make a service",
    "start": "864279",
    "end": "870000"
  },
  {
    "start": "865000",
    "end": "1235000"
  },
  {
    "text": "Intergalactic Global is we just have to annotate it as",
    "start": "870000",
    "end": "875160"
  },
  {
    "text": "Global is true there are a couple of other annotations I can use that I will be showing and to make my life easier",
    "start": "875160",
    "end": "881120"
  },
  {
    "text": "I've added them all in but if I look at my Rebel based",
    "start": "881120",
    "end": "889519"
  },
  {
    "text": "service we should see yeah it's got Global marked as true yeah and the same",
    "start": "889600",
    "end": "897040"
  },
  {
    "text": "should also be true in the remote [Music]",
    "start": "897040",
    "end": "902400"
  },
  {
    "text": "and yeah Global is true the shared also means not only is this a global Service",
    "start": "904320",
    "end": "910839"
  },
  {
    "text": "but also I am prepared to advertise it to my uh my neighboring",
    "start": "910839",
    "end": "917680"
  },
  {
    "text": "galaxies so that means I can actually let's run it a few",
    "start": "917680",
    "end": "925399"
  },
  {
    "text": "times yeah so I can exec to my X-Wing in this galaxy and if I uh send a message",
    "start": "925399",
    "end": "934160"
  },
  {
    "text": "to the rebel base sometimes it's going to get to the local Galaxy sometimes it's going to get to the remote Galaxy",
    "start": "934160",
    "end": "940120"
  },
  {
    "text": "and sometimes we're going to hit like you know live demo issues which we'll gloss over because it's a bug but yeah",
    "start": "940120",
    "end": "947600"
  },
  {
    "text": "so randomly it's picking between the local and the remote cluster and we could do the same thing",
    "start": "947600",
    "end": "954720"
  },
  {
    "text": "from this end as well um",
    "start": "954720",
    "end": "960920"
  },
  {
    "text": "yeah it's taking a bit longer actually I've got a Timeout on this one for a",
    "start": "963199",
    "end": "969480"
  },
  {
    "text": "reason I'll do that again without the timer and hopefully we will see time out",
    "start": "970000",
    "end": "975040"
  },
  {
    "text": "hopefully we will see I hope we're going to see responses",
    "start": "975040",
    "end": "980519"
  },
  {
    "text": "from both clusters maybe one cluster is uh I'm going to say the eks cluster maybe is responding a bit more slowly",
    "start": "980519",
    "end": "987519"
  },
  {
    "text": "maybe it's the Wi-Fi I I don't know hopefully hopefully we'll see both ends",
    "start": "987519",
    "end": "993759"
  },
  {
    "text": "live demos okay so what's happening here we've got an X-Wing pod in this",
    "start": "993759",
    "end": "1000800"
  },
  {
    "text": "particular case I'm I'm only well I am sending requests from both sides but my diagram shows my X-Wing making a request",
    "start": "1000800",
    "end": "1008880"
  },
  {
    "text": "to the rebel based service and I used the name so there was a DNS",
    "start": "1008880",
    "end": "1015639"
  },
  {
    "text": "lookup that uh kind of converts the name to a service IP",
    "start": "1015639",
    "end": "1023160"
  },
  {
    "text": "address and then like in any other kubernetes service we're going to load",
    "start": "1023160",
    "end": "1028400"
  },
  {
    "text": "balance from that service IP address to one of the available backends okay so uh let's have a look at",
    "start": "1028400",
    "end": "1039160"
  },
  {
    "text": "the services get service let's have a look at the services and we can see there's a few",
    "start": "1039160",
    "end": "1046240"
  },
  {
    "text": "Services here uh here's the the rebelbase service and if",
    "start": "1046240",
    "end": "1051520"
  },
  {
    "text": "I describe that service okay I did this a minute ago but we're going to look at something slightly",
    "start": "1051520",
    "end": "1058640"
  },
  {
    "text": "different okay so that's got two backend",
    "start": "1058640",
    "end": "1064120"
  },
  {
    "text": "end points I hope that's visible enough um so there are two IP addresses and",
    "start": "1064120",
    "end": "1070080"
  },
  {
    "text": "they correspond to the local pods so here are",
    "start": "1070080",
    "end": "1077679"
  },
  {
    "text": "two pods 10.6 1.60 10.6",
    "start": "1077679",
    "end": "1084120"
  },
  {
    "text": "9.41 And yet when I ran my request sometimes they were getting responded to",
    "start": "1084120",
    "end": "1090840"
  },
  {
    "text": "from my remote cluster and uh if I give up waiting for this but try and look at",
    "start": "1090840",
    "end": "1097799"
  },
  {
    "text": "the pods here yeah so these have",
    "start": "1097799",
    "end": "1104400"
  },
  {
    "text": "10172 addresses so how if kubernetes only",
    "start": "1104400",
    "end": "1111240"
  },
  {
    "text": "knows about the local Services how are they getting uh sometimes sent to the remote addresses and the answer is that",
    "start": "1111240",
    "end": "1119120"
  },
  {
    "text": "ssum knows about them so if I uh exec into my cyan pod here I think it needs",
    "start": "1119120",
    "end": "1128679"
  },
  {
    "text": "to be a cute system and I run",
    "start": "1128679",
    "end": "1136120"
  },
  {
    "text": "command I think it's endpoint list let's try",
    "start": "1136120",
    "end": "1141640"
  },
  {
    "text": "that and we can see that end points that this",
    "start": "1141640",
    "end": "1147440"
  },
  {
    "text": "uh uh this slian pod knows about and uh if I I need service list",
    "start": "1147440",
    "end": "1157120"
  },
  {
    "text": "that's that's the one that's more interesting service list is going to tell me how a service relates to pods",
    "start": "1157120",
    "end": "1166480"
  },
  {
    "text": "that are the back ends of that service and got a great memory I can tell you",
    "start": "1166480",
    "end": "1173240"
  },
  {
    "text": "that this was the service address for rebel base and there are four entries",
    "start": "1173240",
    "end": "1178400"
  },
  {
    "text": "here so we've got a couple of 10.6 addresses those are the local uh pods",
    "start": "1178400",
    "end": "1184799"
  },
  {
    "text": "and we've also got some 10172 addresses which are the remote pods so cium is going to Service uh so",
    "start": "1184799",
    "end": "1194360"
  },
  {
    "text": "load balance across those four pods and sometimes it's going to choose a 10.6",
    "start": "1194360",
    "end": "1199919"
  },
  {
    "text": "address that will just get rooted locally in the local VPC and sometimes it's going to pick a 10172 address which",
    "start": "1199919",
    "end": "1208320"
  },
  {
    "text": "is going to get rooted over that VPN tunnel to the remote cluster it's as",
    "start": "1208320",
    "end": "1213760"
  },
  {
    "text": "simple as that kubernetes doesn't know about it but selan",
    "start": "1213760",
    "end": "1219240"
  },
  {
    "text": "does okay this is why it's important for those pod addresses not to overlap",
    "start": "1219520",
    "end": "1226520"
  },
  {
    "text": "because of the The Need to Be able to root the Pod addresses to be able to",
    "start": "1226520",
    "end": "1232080"
  },
  {
    "text": "root to different destination pods so what can we do with the ability",
    "start": "1232080",
    "end": "1237919"
  },
  {
    "text": "to send a request to remote galaxies I mean other than being able to contact different uh rebel",
    "start": "1237919",
    "end": "1244640"
  },
  {
    "text": "bases well we might choose to uh",
    "start": "1244640",
    "end": "1250679"
  },
  {
    "text": "do topology aware routing we might choose to say well I would prefer a",
    "start": "1250679",
    "end": "1256600"
  },
  {
    "text": "local service if a local service is available but if the rebel base gets",
    "start": "1256600",
    "end": "1263679"
  },
  {
    "text": "blown up or in fact doesn't exist on down toine then uh we'll just send",
    "start": "1263679",
    "end": "1269280"
  },
  {
    "text": "traffic to uh another cluster so if I edit the",
    "start": "1269280",
    "end": "1279799"
  },
  {
    "text": "service oh yeah is that right yeah and I'm going to change this",
    "start": "1280279",
    "end": "1287520"
  },
  {
    "text": "affinity and say I would prefer I'm not sure I did that yeah uh I",
    "start": "1287520",
    "end": "1295520"
  },
  {
    "text": "would prefer local",
    "start": "1295520",
    "end": "1299360"
  },
  {
    "text": "pods so now if I make some requests here hopefully since I'm",
    "start": "1300600",
    "end": "1308400"
  },
  {
    "text": "running on the eks cluster we should see them all being responded to locally from",
    "start": "1308400",
    "end": "1317039"
  },
  {
    "text": "dantoine I'm going to have to find out what it is that is causing the output to crash sometimes but you can still see",
    "start": "1317039",
    "end": "1323640"
  },
  {
    "text": "the responses are coming back every you know on a regular basis always from",
    "start": "1323640",
    "end": "1330400"
  },
  {
    "text": "dantoine that's because dantoine is local it's the eks cluster and I've preferred those pods now if I uh scale",
    "start": "1330400",
    "end": "1339480"
  },
  {
    "text": "down those pods locally so we'll we'll basically remove",
    "start": "1339480",
    "end": "1345919"
  },
  {
    "text": "them so there are no rebel bases is locally let's check whether that's",
    "start": "1345919",
    "end": "1353679"
  },
  {
    "text": "happened okay we've got no rebel base pods running locally now and if I rerun",
    "start": "1354760",
    "end": "1362279"
  },
  {
    "text": "my request we should see them fingers crossed getting sent and responded to",
    "start": "1362279",
    "end": "1367960"
  },
  {
    "text": "from alderan great so that allows us to do things like fail over or gracefully move",
    "start": "1367960",
    "end": "1377480"
  },
  {
    "text": "traffic from one uh galaxy to another um and it can allow",
    "start": "1377480",
    "end": "1383159"
  },
  {
    "text": "us to you know handle graceful moving of services moving of",
    "start": "1383159",
    "end": "1388400"
  },
  {
    "text": "traffic during something like an upgrade for example we also have the option to",
    "start": "1388400",
    "end": "1393919"
  },
  {
    "text": "prefer a remote uh cluster so we could",
    "start": "1393919",
    "end": "1398960"
  },
  {
    "text": "uh scale the pods back up again",
    "start": "1398960",
    "end": "1404640"
  },
  {
    "text": "let's let's do that and and uh I'm going to edit the",
    "start": "1404679",
    "end": "1411880"
  },
  {
    "text": "service",
    "start": "1411880",
    "end": "1414440"
  },
  {
    "text": "again remote we'll prefer the remote pods and even though hopefully we've got",
    "start": "1420840",
    "end": "1427880"
  },
  {
    "text": "some pods back up again here yeah we've got two rebel bases here but we should nevertheless see any",
    "start": "1427880",
    "end": "1435760"
  },
  {
    "text": "responses getting preferred F rooted to aleran in",
    "start": "1435760",
    "end": "1441320"
  },
  {
    "text": "the Google cluster uh the other thing I could do is I could decide that uh oldan doesn't",
    "start": "1441320",
    "end": "1448559"
  },
  {
    "text": "want to receive this traffic uh so we could change this side to say you know",
    "start": "1448559",
    "end": "1457240"
  },
  {
    "text": "what although it is a global Service and I would like to be able to reach both clusters I don't want to",
    "start": "1457240",
    "end": "1464000"
  },
  {
    "text": "share okay so we should find this",
    "start": "1467360",
    "end": "1474760"
  },
  {
    "text": "side can go to either",
    "start": "1474760",
    "end": "1480760"
  },
  {
    "text": "destination but this side I don't know what's happening why",
    "start": "1480760",
    "end": "1487200"
  },
  {
    "text": "it's not going to so even though on the eks side I would prefer to be going to",
    "start": "1487200",
    "end": "1494919"
  },
  {
    "text": "the remote cluster because the remote cluster is not prepared to share with me I'm getting all my responses",
    "start": "1494919",
    "end": "1502960"
  },
  {
    "text": "locally live demo gods are not behaving very well for me in the Google Cloud",
    "start": "1502960",
    "end": "1509320"
  },
  {
    "text": "apparently okay um right so we can prefer a local",
    "start": "1509320",
    "end": "1516480"
  },
  {
    "text": "endpoint we can prefer a remote endpoint and we can prefer local but fail over to",
    "start": "1516480",
    "end": "1523919"
  },
  {
    "text": "remote if there are no local endpoints available",
    "start": "1523919",
    "end": "1530320"
  },
  {
    "text": "okay another thing that we can do that just works seamlessly is Network policy",
    "start": "1530520",
    "end": "1536760"
  },
  {
    "start": "1531000",
    "end": "1810000"
  },
  {
    "text": "and we can apply selum Network policies with uh cluster specific information so",
    "start": "1536760",
    "end": "1543559"
  },
  {
    "text": "an example would be something like this where we can say I'm only going to allow",
    "start": "1543559",
    "end": "1549440"
  },
  {
    "text": "the a local uh pod or something that has the X-Wing class label but it also has to be",
    "start": "1549440",
    "end": "1557919"
  },
  {
    "text": "in my local cluster on the eks cluster those are the only ones that are",
    "start": "1557919",
    "end": "1564120"
  },
  {
    "text": "going to be allowed to contact the rebel base I'm beginning to have a suspicion why that uh wasn't working a minute ago",
    "start": "1564120",
    "end": "1572919"
  },
  {
    "text": "so if I apply that policy",
    "start": "1572919",
    "end": "1578480"
  },
  {
    "text": "policy okay yeah it's unchanged that's why the remote end can't get there let's delete",
    "start": "1580600",
    "end": "1588039"
  },
  {
    "text": "it [Music] let's actually let's uh just yeah no let's delete the CNP Ingress",
    "start": "1588039",
    "end": "1598159"
  },
  {
    "text": "hopefully yeah I think that might well be that",
    "start": "1598159",
    "end": "1604520"
  },
  {
    "text": "might well explain why I wasn't getting responses at this end",
    "start": "1604520",
    "end": "1609530"
  },
  {
    "text": "[Music]",
    "start": "1609530",
    "end": "1613859"
  },
  {
    "text": "hooray so if I put the policy back in again we wouldn't see those",
    "start": "1615960",
    "end": "1621760"
  },
  {
    "text": "responses and we would be able to see so let's take a look at some uh Hubble",
    "start": "1621760",
    "end": "1628840"
  },
  {
    "text": "traffic uh got another one yeah we want to look at some policy verdicts oh I need",
    "start": "1628840",
    "end": "1638799"
  },
  {
    "text": "to port forward my Hubble so Hubble is uh going to let us",
    "start": "1639000",
    "end": "1647039"
  },
  {
    "text": "see individual package flows and I'm just going to look at the ones in the galaxy far far away that are policy",
    "start": "1647039",
    "end": "1655039"
  },
  {
    "text": "verdicts and uh oh I removed that policy let me add the policy back again sorry",
    "start": "1655039",
    "end": "1663799"
  },
  {
    "text": "um policy",
    "start": "1663799",
    "end": "1669399"
  },
  {
    "text": "okay and I think we",
    "start": "1669399",
    "end": "1674799"
  },
  {
    "text": "should see occasionally that uh uh there we go yes we start seeing",
    "start": "1674799",
    "end": "1683279"
  },
  {
    "text": "requests from the Google cluster getting denied because of that uh that",
    "start": "1683279",
    "end": "1690080"
  },
  {
    "text": "policy now one thing that's kind of I don't know just a little subtlety is if",
    "start": "1690080",
    "end": "1695679"
  },
  {
    "text": "I look at the um the Pod let's get pods",
    "start": "1695679",
    "end": "1702480"
  },
  {
    "text": "and look at the labels there is a a label talking about",
    "start": "1702480",
    "end": "1709399"
  },
  {
    "text": "the X-Wing class there is no label saying that it's in that",
    "start": "1709399",
    "end": "1716399"
  },
  {
    "text": "particular cluster so it's a kind of implicit automatically applied label",
    "start": "1716399",
    "end": "1722080"
  },
  {
    "text": "that we're um that we're looking at with this uh policy you know it says match labels it's a",
    "start": "1722080",
    "end": "1729559"
  },
  {
    "text": "implicit label and if we looked in the",
    "start": "1729559",
    "end": "1735880"
  },
  {
    "text": "I'm going to actually do it here because I know I've got the silly",
    "start": "1735880",
    "end": "1741919"
  },
  {
    "text": "no I know I've got this environment variable set up",
    "start": "1741919",
    "end": "1747840"
  },
  {
    "text": "um this is why I wanted to do endpoint list",
    "start": "1747840",
    "end": "1752960"
  },
  {
    "text": "because somewhere in here we should see well I'll try and find the right xwing",
    "start": "1752960",
    "end": "1760279"
  },
  {
    "text": "where's X-Wing you're in here somewhere I'm sure you",
    "start": "1760279",
    "end": "1766240"
  },
  {
    "text": "are there's a lot of rep here we go so this is the X-Wing pod or the end point",
    "start": "1766240",
    "end": "1774080"
  },
  {
    "text": "that happens to be in that X-Wing pod and we can see hopefully somewhere there",
    "start": "1774080",
    "end": "1779760"
  },
  {
    "text": "should be yes the implicit label saying that the cluster is the eks",
    "start": "1779760",
    "end": "1786080"
  },
  {
    "text": "cluster so that's what uh what selum is using to match against that uh that",
    "start": "1786080",
    "end": "1793559"
  },
  {
    "text": "policy that specifies the cluster okay",
    "start": "1793559",
    "end": "1799679"
  },
  {
    "text": "okay so it is a very big universe out there",
    "start": "1799679",
    "end": "1804840"
  },
  {
    "text": "so the question is how many galaxies can we connect and the answer is that we can it",
    "start": "1804840",
    "end": "1812120"
  },
  {
    "start": "1810000",
    "end": "1966000"
  },
  {
    "text": "used to be a limit of 2505 and it's now",
    "start": "1812120",
    "end": "1817440"
  },
  {
    "text": "511 which it turns out is all ones in binary so I think that's why",
    "start": "1817440",
    "end": "1823519"
  },
  {
    "text": "uh if we look I I've actually currently got it connected to only 200 55 cuz I",
    "start": "1823519",
    "end": "1828720"
  },
  {
    "text": "really wouldn't have the uh patients to set up another 9 clusters this",
    "start": "1828720",
    "end": "1835679"
  },
  {
    "text": "demo um the tradeoff you get is that you uh because we need to be able to uh",
    "start": "1835679",
    "end": "1842320"
  },
  {
    "text": "convey the the identity and the identity includes the kind of cluster so you have",
    "start": "1842320",
    "end": "1848279"
  },
  {
    "text": "fewer possible security identities in each cluster if you decide",
    "start": "1848279",
    "end": "1854240"
  },
  {
    "text": "to go beyond that 255 limit so if you are working in a universe with a lot of galaxies you may",
    "start": "1854240",
    "end": "1861720"
  },
  {
    "text": "have to uh have it's still quite a lot of uh security",
    "start": "1861720",
    "end": "1868279"
  },
  {
    "text": "identities uh yeah I was going to mention KV stores which is really the uh",
    "start": "1869279",
    "end": "1876240"
  },
  {
    "text": "change that's gone in relatively recent I think it was 1.14 actually um to uh essentially have a cache of all",
    "start": "1876240",
    "end": "1884480"
  },
  {
    "text": "that information that we're learning from those remote cluster API Services",
    "start": "1884480",
    "end": "1889760"
  },
  {
    "text": "uh and that enables us to scale beyond the 255 to the to the 500 odd limit and",
    "start": "1889760",
    "end": "1896679"
  },
  {
    "text": "uh still get decent performance so I hope that's shown you",
    "start": "1896679",
    "end": "1902760"
  },
  {
    "text": "that cluster mesh is pretty E I mean all you have to do is annotate a service and",
    "start": "1902760",
    "end": "1908799"
  },
  {
    "text": "you can make it available across clusters you can uh decide whether to prefer traffic locally or remotely and",
    "start": "1908799",
    "end": "1915799"
  },
  {
    "text": "you get all of these capabilities of that are just shared across clusters",
    "start": "1915799",
    "end": "1921159"
  },
  {
    "text": "which I think is almost magical so I hope you want to try it out",
    "start": "1921159",
    "end": "1927480"
  },
  {
    "text": "for yourselves and if you do there are some really great Labs on is surveillance.com laabs they are um",
    "start": "1927480",
    "end": "1933679"
  },
  {
    "text": "available merely for the price of your email address uh and uh you can explore",
    "start": "1933679",
    "end": "1939320"
  },
  {
    "text": "cluster mesh without having to go through the trouble of setting up clusters and uh it will walk you through",
    "start": "1939320",
    "end": "1944840"
  },
  {
    "text": "all that process you can also come to the I surveillant Booth we've got a number of different uh Labs running over",
    "start": "1944840",
    "end": "1951279"
  },
  {
    "text": "there and later on well this evening at at halfast 6 I'm going to be signing",
    "start": "1951279",
    "end": "1957080"
  },
  {
    "text": "some books if you want to come along and say hello so thank you for exploring the",
    "start": "1957080",
    "end": "1962799"
  },
  {
    "text": "Galaxy of uh cust mesh with me today",
    "start": "1962799",
    "end": "1969000"
  }
]