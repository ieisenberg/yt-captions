[
  {
    "text": "welcome and thanks for coming",
    "start": "659",
    "end": "3600"
  },
  {
    "text": "this is complete disaster recovery of",
    "start": "3600",
    "end": "6420"
  },
  {
    "text": "stateful workloads persistent volumes",
    "start": "6420",
    "end": "8519"
  },
  {
    "text": "and CSI snapshots via flux and with",
    "start": "8519",
    "end": "12059"
  },
  {
    "text": "vault",
    "start": "12059",
    "end": "13380"
  },
  {
    "text": "um",
    "start": "13380",
    "end": "15500"
  },
  {
    "text": "my name is Kingdon I'm a flux maintainer",
    "start": "15540",
    "end": "18000"
  },
  {
    "text": "I work at weaveworks in the developer",
    "start": "18000",
    "end": "20220"
  },
  {
    "text": "experience Department as an open source",
    "start": "20220",
    "end": "22800"
  },
  {
    "text": "support engineer",
    "start": "22800",
    "end": "25460"
  },
  {
    "text": "take a picture of this if you want to",
    "start": "27060",
    "end": "30060"
  },
  {
    "text": "visit us later or keep abreast of all",
    "start": "30060",
    "end": "32578"
  },
  {
    "text": "the git Ops things that are happening we",
    "start": "32579",
    "end": "34739"
  },
  {
    "text": "have a nice website where you can see",
    "start": "34739",
    "end": "36540"
  },
  {
    "text": "the flex Centric view of get UPS days",
    "start": "36540",
    "end": "39840"
  },
  {
    "text": "and everything else at kubecon",
    "start": "39840",
    "end": "42899"
  },
  {
    "text": "okay so here's our agenda",
    "start": "42899",
    "end": "45300"
  },
  {
    "text": "uh we're going to learn about kubernetes",
    "start": "45300",
    "end": "47100"
  },
  {
    "text": "CSI and we're going to use a lovely",
    "start": "47100",
    "end": "49980"
  },
  {
    "text": "little tool called Helm which you may",
    "start": "49980",
    "end": "51719"
  },
  {
    "text": "have heard of that makes working with",
    "start": "51719",
    "end": "54120"
  },
  {
    "text": "CSI volumes a little bit more",
    "start": "54120",
    "end": "55800"
  },
  {
    "text": "approachable",
    "start": "55800",
    "end": "58218"
  },
  {
    "text": "um Okay so",
    "start": "59699",
    "end": "61739"
  },
  {
    "text": "CSI over by and large not a beginner",
    "start": "61739",
    "end": "64739"
  },
  {
    "text": "topic so why is this a beginner talk",
    "start": "64739",
    "end": "66479"
  },
  {
    "text": "this actually is in the schedule as a",
    "start": "66479",
    "end": "68640"
  },
  {
    "text": "beginner talk if you didn't notice that",
    "start": "68640",
    "end": "69960"
  },
  {
    "text": "so",
    "start": "69960",
    "end": "70979"
  },
  {
    "text": "how is this a beginner talk well we're",
    "start": "70979",
    "end": "73979"
  },
  {
    "text": "going to start small and we're going to",
    "start": "73979",
    "end": "75840"
  },
  {
    "text": "build upon what we know or what we've",
    "start": "75840",
    "end": "77880"
  },
  {
    "text": "learned",
    "start": "77880",
    "end": "80118"
  },
  {
    "text": "uh so here's our scenario for today this",
    "start": "81060",
    "end": "83640"
  },
  {
    "text": "is what we're going to start with we are",
    "start": "83640",
    "end": "85799"
  },
  {
    "text": "going to install some chart using Helm",
    "start": "85799",
    "end": "88860"
  },
  {
    "text": "um I have picked bookstack",
    "start": "88860",
    "end": "90780"
  },
  {
    "text": "completely random",
    "start": "90780",
    "end": "92759"
  },
  {
    "text": "it has enough persistent volumes to be a",
    "start": "92759",
    "end": "96180"
  },
  {
    "text": "useful example for this demo okay and",
    "start": "96180",
    "end": "98700"
  },
  {
    "text": "how does this work well a persistent",
    "start": "98700",
    "end": "101040"
  },
  {
    "text": "volume claim and the template is",
    "start": "101040",
    "end": "103500"
  },
  {
    "text": "instantiated and then kubernetes",
    "start": "103500",
    "end": "107640"
  },
  {
    "text": "fulfills the claim with a persistent",
    "start": "107640",
    "end": "109979"
  },
  {
    "text": "volume",
    "start": "109979",
    "end": "110820"
  },
  {
    "text": "okay so why is persistent data different",
    "start": "110820",
    "end": "113040"
  },
  {
    "text": "than other declarative resources",
    "start": "113040",
    "end": "115799"
  },
  {
    "text": "well they're stateful persistent volumes",
    "start": "115799",
    "end": "118259"
  },
  {
    "text": "are stateful they may contain",
    "start": "118259",
    "end": "119520"
  },
  {
    "text": "information",
    "start": "119520",
    "end": "122100"
  },
  {
    "text": "they may contain information",
    "start": "122100",
    "end": "124799"
  },
  {
    "text": "persistent volumes contain a state they",
    "start": "124799",
    "end": "127740"
  },
  {
    "text": "have an identity they cannot be wiped",
    "start": "127740",
    "end": "129660"
  },
  {
    "text": "and recreated without spoiling the",
    "start": "129660",
    "end": "131459"
  },
  {
    "text": "statefulness so",
    "start": "131459",
    "end": "133500"
  },
  {
    "text": "um",
    "start": "133500",
    "end": "135560"
  },
  {
    "text": "I bet you can guess",
    "start": "136020",
    "end": "137840"
  },
  {
    "text": "what happens when the persistent volume",
    "start": "137840",
    "end": "140160"
  },
  {
    "text": "goes away when the claim goes away I bet",
    "start": "140160",
    "end": "142680"
  },
  {
    "text": "you can guess but we're not here for",
    "start": "142680",
    "end": "143940"
  },
  {
    "text": "guessing we're going to see so we are",
    "start": "143940",
    "end": "146459"
  },
  {
    "text": "going to install bookstack that's the",
    "start": "146459",
    "end": "148680"
  },
  {
    "text": "example",
    "start": "148680",
    "end": "149520"
  },
  {
    "text": "and I actually had to search for a while",
    "start": "149520",
    "end": "151500"
  },
  {
    "text": "before I could find the maintained Helm",
    "start": "151500",
    "end": "153360"
  },
  {
    "text": "chart for bookstack",
    "start": "153360",
    "end": "155280"
  },
  {
    "text": "so",
    "start": "155280",
    "end": "156660"
  },
  {
    "text": "does it have to be book stack again this",
    "start": "156660",
    "end": "158940"
  },
  {
    "text": "is just for example we've chosen this",
    "start": "158940",
    "end": "160560"
  },
  {
    "text": "chart",
    "start": "160560",
    "end": "161879"
  },
  {
    "text": "no it does not what are the requirements",
    "start": "161879",
    "end": "164400"
  },
  {
    "text": "to make a useful demo here",
    "start": "164400",
    "end": "167840"
  },
  {
    "text": "well we want to see something in the",
    "start": "168540",
    "end": "170099"
  },
  {
    "text": "values.yaml file of our chart we want to",
    "start": "170099",
    "end": "172019"
  },
  {
    "text": "see the words existing claim because",
    "start": "172019",
    "end": "174959"
  },
  {
    "text": "that will allow us to use an existing",
    "start": "174959",
    "end": "177120"
  },
  {
    "text": "volume an existing volume",
    "start": "177120",
    "end": "179879"
  },
  {
    "text": "later so and would you look at this",
    "start": "179879",
    "end": "183239"
  },
  {
    "text": "actually there's no such field in the",
    "start": "183239",
    "end": "185700"
  },
  {
    "text": "values.yaml so we're going to have to",
    "start": "185700",
    "end": "188700"
  },
  {
    "text": "we we are going to have to pick a",
    "start": "188700",
    "end": "190500"
  },
  {
    "text": "different card",
    "start": "190500",
    "end": "191760"
  },
  {
    "text": "uh so why is this not a good example",
    "start": "191760",
    "end": "194400"
  },
  {
    "text": "because if you look here's the",
    "start": "194400",
    "end": "196379"
  },
  {
    "text": "persistent volume claim",
    "start": "196379",
    "end": "198300"
  },
  {
    "text": "um it's not wrapped in any conditionals",
    "start": "198300",
    "end": "200099"
  },
  {
    "text": "so this one creates a PVC",
    "start": "200099",
    "end": "204260"
  },
  {
    "text": "it's not moving okay",
    "start": "204780",
    "end": "207300"
  },
  {
    "text": "there that one",
    "start": "207300",
    "end": "209819"
  },
  {
    "text": "um",
    "start": "209819",
    "end": "211739"
  },
  {
    "text": "creates everybody see",
    "start": "211739",
    "end": "214440"
  },
  {
    "text": "okay it can creates a persistent volume",
    "start": "214440",
    "end": "217200"
  },
  {
    "text": "unconditionally so we've chosen poorly",
    "start": "217200",
    "end": "219300"
  },
  {
    "text": "we need that existing claim field for a",
    "start": "219300",
    "end": "220980"
  },
  {
    "text": "reason I'll be illustrating shortly",
    "start": "220980",
    "end": "222840"
  },
  {
    "text": "so let's it's not moving forward",
    "start": "222840",
    "end": "227780"
  },
  {
    "text": "okay here we are this is the slide we we",
    "start": "240959",
    "end": "243900"
  },
  {
    "text": "need that existing claim field",
    "start": "243900",
    "end": "246180"
  },
  {
    "text": "and sometimes a bad example is a good",
    "start": "246180",
    "end": "248640"
  },
  {
    "text": "example okay so I was actually aiming",
    "start": "248640",
    "end": "250439"
  },
  {
    "text": "for a good example so here's the good",
    "start": "250439",
    "end": "251760"
  },
  {
    "text": "example uh in the helm charts repo from",
    "start": "251760",
    "end": "255060"
  },
  {
    "text": "the stable this which is yes it's a bit",
    "start": "255060",
    "end": "258780"
  },
  {
    "text": "long in the tooth but this is the",
    "start": "258780",
    "end": "261120"
  },
  {
    "text": "example that I was actually looking for",
    "start": "261120",
    "end": "262680"
  },
  {
    "text": "when I thought of bookstack can we all",
    "start": "262680",
    "end": "265860"
  },
  {
    "text": "see no it's not moving forward",
    "start": "265860",
    "end": "269639"
  },
  {
    "text": "I'm not sure what to do about this",
    "start": "269639",
    "end": "273139"
  },
  {
    "text": "okay so here's our good example that",
    "start": "285540",
    "end": "287639"
  },
  {
    "text": "we're looking for",
    "start": "287639",
    "end": "289380"
  },
  {
    "text": "um it has uh storage",
    "start": "289380",
    "end": "292280"
  },
  {
    "text": "section for configuring the storage in",
    "start": "292280",
    "end": "294600"
  },
  {
    "text": "the helm chart and you can set an",
    "start": "294600",
    "end": "296639"
  },
  {
    "text": "existing claim",
    "start": "296639",
    "end": "299300"
  },
  {
    "text": "so we're going to do a Helm install now",
    "start": "300600",
    "end": "303020"
  },
  {
    "text": "the old-fashioned way actually",
    "start": "303020",
    "end": "307039"
  },
  {
    "text": "yes this is git Ops con but uh I promise",
    "start": "308460",
    "end": "311940"
  },
  {
    "text": "before too long we will get to get Ops",
    "start": "311940",
    "end": "313919"
  },
  {
    "text": "so we are intentionally",
    "start": "313919",
    "end": "318540"
  },
  {
    "text": "we don't need git Ops to have this",
    "start": "318540",
    "end": "320759"
  },
  {
    "text": "problem let's put it that way we're",
    "start": "320759",
    "end": "322440"
  },
  {
    "text": "trying to get ourselves into a jam",
    "start": "322440",
    "end": "324419"
  },
  {
    "text": "and we don't need git Ops to illustrate",
    "start": "324419",
    "end": "326820"
  },
  {
    "text": "the problem",
    "start": "326820",
    "end": "329180"
  },
  {
    "text": "but it's part of our ideal solution",
    "start": "329280",
    "end": "331680"
  },
  {
    "text": "later it looks like I have to flip back",
    "start": "331680",
    "end": "333600"
  },
  {
    "text": "and forth a few times I'm just going to",
    "start": "333600",
    "end": "335400"
  },
  {
    "text": "try to do that and not talk about it",
    "start": "335400",
    "end": "337139"
  },
  {
    "text": "okay so",
    "start": "337139",
    "end": "340160"
  },
  {
    "text": "we started with this question what",
    "start": "345720",
    "end": "347940"
  },
  {
    "text": "happens when the PVC goes away we're",
    "start": "347940",
    "end": "349979"
  },
  {
    "text": "going to answer it",
    "start": "349979",
    "end": "352380"
  },
  {
    "text": "um",
    "start": "352380",
    "end": "354500"
  },
  {
    "text": "right now",
    "start": "356639",
    "end": "359240"
  },
  {
    "text": "okay so here's the screenshot uh",
    "start": "362280",
    "end": "364380"
  },
  {
    "text": "hopefully this is visible or at least",
    "start": "364380",
    "end": "366240"
  },
  {
    "text": "semi visible I'm doing Helm install and",
    "start": "366240",
    "end": "368880"
  },
  {
    "text": "just to note at this point as a consumer",
    "start": "368880",
    "end": "370620"
  },
  {
    "text": "of the chart we actually may have no",
    "start": "370620",
    "end": "372419"
  },
  {
    "text": "idea that it's doing this it's creating",
    "start": "372419",
    "end": "374460"
  },
  {
    "text": "persistence on our behalf",
    "start": "374460",
    "end": "376620"
  },
  {
    "text": "um and that's good and bad",
    "start": "376620",
    "end": "379880"
  },
  {
    "text": "uh",
    "start": "380759",
    "end": "382800"
  },
  {
    "text": "the Keen Observer at this point May",
    "start": "382800",
    "end": "385380"
  },
  {
    "text": "notice something else interesting we",
    "start": "385380",
    "end": "387000"
  },
  {
    "text": "have persistent stores for storage",
    "start": "387000",
    "end": "389100"
  },
  {
    "text": "and uploads which the distinction's not",
    "start": "389100",
    "end": "392580"
  },
  {
    "text": "important here but what you should",
    "start": "392580",
    "end": "393960"
  },
  {
    "text": "notice is that we have no persistence",
    "start": "393960",
    "end": "395400"
  },
  {
    "text": "for Maria DB that's not good",
    "start": "395400",
    "end": "398639"
  },
  {
    "text": "so that's okay we're just asking",
    "start": "398639",
    "end": "400440"
  },
  {
    "text": "questions right now",
    "start": "400440",
    "end": "402120"
  },
  {
    "text": "we want to know",
    "start": "402120",
    "end": "404940"
  },
  {
    "text": "if the persistent volume can be deleted",
    "start": "404940",
    "end": "406919"
  },
  {
    "text": "and whether that's going to become a",
    "start": "406919",
    "end": "408600"
  },
  {
    "text": "disaster for us",
    "start": "408600",
    "end": "410419"
  },
  {
    "text": "and so let's uninstall and find out",
    "start": "410419",
    "end": "415819"
  },
  {
    "text": "um that's right it wasn't deleted wait",
    "start": "418020",
    "end": "420539"
  },
  {
    "text": "they're perfectly safe both volumes wait",
    "start": "420539",
    "end": "422460"
  },
  {
    "text": "R1 volume is perfectly safe what I can't",
    "start": "422460",
    "end": "425699"
  },
  {
    "text": "hear you",
    "start": "425699",
    "end": "426840"
  },
  {
    "text": "and it's gone",
    "start": "426840",
    "end": "429860"
  },
  {
    "text": "uh so all right what do we learn",
    "start": "431280",
    "end": "433860"
  },
  {
    "text": "it's not a disaster yet it's a policy",
    "start": "433860",
    "end": "436500"
  },
  {
    "text": "decision we have chosen or kubernetes",
    "start": "436500",
    "end": "439680"
  },
  {
    "text": "has chosen for us to make the default",
    "start": "439680",
    "end": "441180"
  },
  {
    "text": "policy delete",
    "start": "441180",
    "end": "443240"
  },
  {
    "text": "retain recycle delete are all valid",
    "start": "443240",
    "end": "446039"
  },
  {
    "text": "reclaim policy settings but recycle is",
    "start": "446039",
    "end": "449280"
  },
  {
    "text": "not very interesting so let's say our",
    "start": "449280",
    "end": "450720"
  },
  {
    "text": "choices are retain and delete",
    "start": "450720",
    "end": "453840"
  },
  {
    "text": "so we told kubernetes to delete it",
    "start": "453840",
    "end": "456900"
  },
  {
    "text": "yes it's the default",
    "start": "456900",
    "end": "460400"
  },
  {
    "text": "and where is that default from here it",
    "start": "461400",
    "end": "464280"
  },
  {
    "text": "is in the storage class",
    "start": "464280",
    "end": "465840"
  },
  {
    "text": "you see that reclaim policy of delete in",
    "start": "465840",
    "end": "468840"
  },
  {
    "text": "the storage class",
    "start": "468840",
    "end": "470060"
  },
  {
    "text": "did we not mention before that each",
    "start": "470060",
    "end": "472259"
  },
  {
    "text": "persistent volume inherits its settings",
    "start": "472259",
    "end": "474720"
  },
  {
    "text": "from a parent storage class",
    "start": "474720",
    "end": "478259"
  },
  {
    "text": "we did not okay so",
    "start": "478259",
    "end": "481259"
  },
  {
    "text": "um",
    "start": "481259",
    "end": "481979"
  },
  {
    "text": "we can edit it in place no actually we",
    "start": "481979",
    "end": "484500"
  },
  {
    "text": "can't edit it in place updates are",
    "start": "484500",
    "end": "486660"
  },
  {
    "text": "forbidden so we have to Define this when",
    "start": "486660",
    "end": "489000"
  },
  {
    "text": "the storage class is created",
    "start": "489000",
    "end": "491520"
  },
  {
    "text": "so we'll just have to patch the PV after",
    "start": "491520",
    "end": "493979"
  },
  {
    "text": "it's created so that's what we'll do all",
    "start": "493979",
    "end": "496259"
  },
  {
    "text": "right so back around to where we started",
    "start": "496259",
    "end": "497699"
  },
  {
    "text": "but we're adding one thing we learned we",
    "start": "497699",
    "end": "499860"
  },
  {
    "text": "have to enable persistence for mariadb",
    "start": "499860",
    "end": "501840"
  },
  {
    "text": "it doesn't come out of the box that way",
    "start": "501840",
    "end": "504120"
  },
  {
    "text": "and another problem all these resource",
    "start": "504120",
    "end": "507300"
  },
  {
    "text": "have reclaimed policy of delete so",
    "start": "507300",
    "end": "510240"
  },
  {
    "text": "there's a piece of kubernetes Docs",
    "start": "510240",
    "end": "514399"
  },
  {
    "text": "we're not advancing the slides",
    "start": "514680",
    "end": "518899"
  },
  {
    "text": "there there",
    "start": "523260",
    "end": "526760"
  },
  {
    "text": "and let's talk about what problem did we",
    "start": "529260",
    "end": "531660"
  },
  {
    "text": "solve",
    "start": "531660",
    "end": "534019"
  },
  {
    "text": "we should not be unceremoniously",
    "start": "535320",
    "end": "537120"
  },
  {
    "text": "deleting our important data so what we",
    "start": "537120",
    "end": "541200"
  },
  {
    "text": "prevent from being deleted through the",
    "start": "541200",
    "end": "543060"
  },
  {
    "text": "regular Helm life cycle we can do that",
    "start": "543060",
    "end": "545459"
  },
  {
    "text": "by setting the reclaim policy",
    "start": "545459",
    "end": "548399"
  },
  {
    "text": "to retain so and also we've added",
    "start": "548399",
    "end": "551760"
  },
  {
    "text": "another persistent store so",
    "start": "551760",
    "end": "554760"
  },
  {
    "text": "we have really only dug the hole deeper",
    "start": "554760",
    "end": "556920"
  },
  {
    "text": "at this point",
    "start": "556920",
    "end": "558300"
  },
  {
    "text": "but one thing at a time we're building",
    "start": "558300",
    "end": "560459"
  },
  {
    "text": "up to it all right let's uninstall the",
    "start": "560459",
    "end": "561959"
  },
  {
    "text": "chart",
    "start": "561959",
    "end": "564140"
  },
  {
    "text": "oh that's interesting they did not all",
    "start": "565019",
    "end": "566940"
  },
  {
    "text": "get the same status I wonder why",
    "start": "566940",
    "end": "570560"
  },
  {
    "text": "Ah that's interesting",
    "start": "570779",
    "end": "573839"
  },
  {
    "text": "I bet that has something to do with it",
    "start": "573839",
    "end": "575700"
  },
  {
    "text": "this one still has its claim uh maybe",
    "start": "575700",
    "end": "577500"
  },
  {
    "text": "it's a stateful set thing",
    "start": "577500",
    "end": "580440"
  },
  {
    "text": "let's have a look at that PVC oh boy",
    "start": "580440",
    "end": "582540"
  },
  {
    "text": "that is a lot anything we can do to",
    "start": "582540",
    "end": "585120"
  },
  {
    "text": "clean it up",
    "start": "585120",
    "end": "586380"
  },
  {
    "text": "uh yes there is Cube cuddle neat",
    "start": "586380",
    "end": "590540"
  },
  {
    "text": "cute petal neat",
    "start": "591959",
    "end": "593700"
  },
  {
    "text": "we'll trim it down a bit this does what",
    "start": "593700",
    "end": "596940"
  },
  {
    "text": "it does here is worth pause to talk",
    "start": "596940",
    "end": "599040"
  },
  {
    "text": "about for a minute",
    "start": "599040",
    "end": "601579"
  },
  {
    "text": "so this is Cube cuddle neat a crew",
    "start": "601680",
    "end": "603839"
  },
  {
    "text": "plug-in",
    "start": "603839",
    "end": "604940"
  },
  {
    "text": "this just goes through that resource",
    "start": "604940",
    "end": "607080"
  },
  {
    "text": "definition and it takes out anything",
    "start": "607080",
    "end": "608399"
  },
  {
    "text": "that's been added by kubernetes as an",
    "start": "608399",
    "end": "610320"
  },
  {
    "text": "expanded default and it does a few other",
    "start": "610320",
    "end": "612480"
  },
  {
    "text": "things",
    "start": "612480",
    "end": "613500"
  },
  {
    "text": "to make this resource safe to apply and",
    "start": "613500",
    "end": "616320"
  },
  {
    "text": "reapply on a continuous loop um",
    "start": "616320",
    "end": "618959"
  },
  {
    "text": "it doesn't quite do everything we need",
    "start": "618959",
    "end": "621600"
  },
  {
    "text": "for persistent volumes so we're going to",
    "start": "621600",
    "end": "623760"
  },
  {
    "text": "take a few of these annotations away",
    "start": "623760",
    "end": "626760"
  },
  {
    "text": "from the persistent volume claim uh",
    "start": "626760",
    "end": "629100"
  },
  {
    "text": "there where there's one for",
    "start": "629100",
    "end": "631860"
  },
  {
    "text": "um bind completed and one for Bound by",
    "start": "631860",
    "end": "633720"
  },
  {
    "text": "controller we're just going to wipe",
    "start": "633720",
    "end": "635339"
  },
  {
    "text": "those out",
    "start": "635339",
    "end": "636420"
  },
  {
    "text": "then we are going to",
    "start": "636420",
    "end": "639480"
  },
  {
    "text": "we have another detail we can't really",
    "start": "639480",
    "end": "641399"
  },
  {
    "text": "have known in advance",
    "start": "641399",
    "end": "643740"
  },
  {
    "text": "um that",
    "start": "643740",
    "end": "645120"
  },
  {
    "text": "kubernetes is about to fill out which",
    "start": "645120",
    "end": "647820"
  },
  {
    "text": "node the persistent volume should attach",
    "start": "647820",
    "end": "650040"
  },
  {
    "text": "to that has this weight for weight for",
    "start": "650040",
    "end": "653100"
  },
  {
    "text": "first consumer setting",
    "start": "653100",
    "end": "655079"
  },
  {
    "text": "back in the storage class so",
    "start": "655079",
    "end": "658560"
  },
  {
    "text": "when the Pod is created on a node and",
    "start": "658560",
    "end": "661920"
  },
  {
    "text": "scheduled that's when the persistent",
    "start": "661920",
    "end": "663720"
  },
  {
    "text": "volume is created according to the",
    "start": "663720",
    "end": "665760"
  },
  {
    "text": "configuration in the storage class",
    "start": "665760",
    "end": "669920"
  },
  {
    "text": "okay",
    "start": "670320",
    "end": "672980"
  },
  {
    "text": "so we now have solved another problem we",
    "start": "673320",
    "end": "676019"
  },
  {
    "text": "know how to prepare a PV and a PVC",
    "start": "676019",
    "end": "678660"
  },
  {
    "text": "definition for rebinding",
    "start": "678660",
    "end": "681120"
  },
  {
    "text": "but we've just understood the",
    "start": "681120",
    "end": "683100"
  },
  {
    "text": "relationship a little bit better well",
    "start": "683100",
    "end": "685380"
  },
  {
    "text": "this isn't actually a problem we've",
    "start": "685380",
    "end": "686880"
  },
  {
    "text": "encountered yet right but Helm creates a",
    "start": "686880",
    "end": "689640"
  },
  {
    "text": "persistent volume claim which spawns a",
    "start": "689640",
    "end": "691380"
  },
  {
    "text": "PV and we need them both to complete the",
    "start": "691380",
    "end": "693660"
  },
  {
    "text": "puzzle",
    "start": "693660",
    "end": "694680"
  },
  {
    "text": "so",
    "start": "694680",
    "end": "697220"
  },
  {
    "text": "now we can recall that our PVCs were",
    "start": "697620",
    "end": "700440"
  },
  {
    "text": "deleted except for the Maria DB so we",
    "start": "700440",
    "end": "703860"
  },
  {
    "text": "can reconstruct we could we Could",
    "start": "703860",
    "end": "705420"
  },
  {
    "text": "reconstruct them but we're still just",
    "start": "705420",
    "end": "707519"
  },
  {
    "text": "poking around so let's put the delete",
    "start": "707519",
    "end": "710459"
  },
  {
    "text": "policy back and just wipe them out okay",
    "start": "710459",
    "end": "713100"
  },
  {
    "text": "and then when we delete that claim the",
    "start": "713100",
    "end": "715320"
  },
  {
    "text": "volume is really gone again okay",
    "start": "715320",
    "end": "719040"
  },
  {
    "text": "so we haven't really uh solved the",
    "start": "719040",
    "end": "722220"
  },
  {
    "text": "problem yet but so",
    "start": "722220",
    "end": "726060"
  },
  {
    "text": "okay",
    "start": "726060",
    "end": "728660"
  },
  {
    "text": "there is a video here of we're going to",
    "start": "728940",
    "end": "731700"
  },
  {
    "text": "try this again",
    "start": "731700",
    "end": "733740"
  },
  {
    "text": "and uh so we pipe each PV and PVC",
    "start": "733740",
    "end": "736800"
  },
  {
    "text": "through Cube cuddle neat and save them",
    "start": "736800",
    "end": "738180"
  },
  {
    "text": "on disk make the changes as we",
    "start": "738180",
    "end": "740760"
  },
  {
    "text": "Illustrated here I'm not going to play",
    "start": "740760",
    "end": "742800"
  },
  {
    "text": "all these videos because we don't have",
    "start": "742800",
    "end": "744120"
  },
  {
    "text": "time but hopefully you have an",
    "start": "744120",
    "end": "745440"
  },
  {
    "text": "imagination and there will be more help",
    "start": "745440",
    "end": "747779"
  },
  {
    "text": "later for in case you don't have an",
    "start": "747779",
    "end": "749700"
  },
  {
    "text": "imagination",
    "start": "749700",
    "end": "751260"
  },
  {
    "text": "so",
    "start": "751260",
    "end": "753920"
  },
  {
    "text": "now my screen is not updating I'm still",
    "start": "756720",
    "end": "759779"
  },
  {
    "text": "on Slide 56.",
    "start": "759779",
    "end": "762920"
  },
  {
    "text": "all right I'm not sure why it's doing",
    "start": "764940",
    "end": "766440"
  },
  {
    "text": "that",
    "start": "766440",
    "end": "767279"
  },
  {
    "text": "here we go",
    "start": "767279",
    "end": "769880"
  },
  {
    "text": "okay so once more we're going to do a",
    "start": "770220",
    "end": "772260"
  },
  {
    "text": "Helm install with the same options as",
    "start": "772260",
    "end": "774240"
  },
  {
    "text": "before we're going to patch the resource",
    "start": "774240",
    "end": "775740"
  },
  {
    "text": "of the retain reclaim policy we're going",
    "start": "775740",
    "end": "778139"
  },
  {
    "text": "to pipe HPV and PVC through Cube cuddle",
    "start": "778139",
    "end": "780600"
  },
  {
    "text": "neat we're going to save them on disk is",
    "start": "780600",
    "end": "782519"
  },
  {
    "text": "this going to work this time",
    "start": "782519",
    "end": "784680"
  },
  {
    "text": "there's only one way to find out let's",
    "start": "784680",
    "end": "786300"
  },
  {
    "text": "reapply those definitions and finally",
    "start": "786300",
    "end": "789420"
  },
  {
    "text": "um",
    "start": "789420",
    "end": "791220"
  },
  {
    "text": "well you",
    "start": "791220",
    "end": "793320"
  },
  {
    "text": "know the short version is it did not",
    "start": "793320",
    "end": "794880"
  },
  {
    "text": "work there is more",
    "start": "794880",
    "end": "796639"
  },
  {
    "text": "behind this video to see but we we",
    "start": "796639",
    "end": "800880"
  },
  {
    "text": "missed one thing we needed to erase the",
    "start": "800880",
    "end": "802560"
  },
  {
    "text": "node Affinity uh it's not pictured in",
    "start": "802560",
    "end": "805380"
  },
  {
    "text": "the previous video",
    "start": "805380",
    "end": "807200"
  },
  {
    "text": "and uh",
    "start": "807200",
    "end": "810620"
  },
  {
    "text": "I'm sorry my slide is just not updating",
    "start": "812760",
    "end": "817920"
  },
  {
    "text": "Okay so",
    "start": "817920",
    "end": "819779"
  },
  {
    "text": "why did this not work",
    "start": "819779",
    "end": "821700"
  },
  {
    "text": "here's another important thing",
    "start": "821700",
    "end": "823920"
  },
  {
    "text": "um",
    "start": "823920",
    "end": "825300"
  },
  {
    "text": "no it did not work because we we forgot",
    "start": "825300",
    "end": "828420"
  },
  {
    "text": "the database password no longer matches",
    "start": "828420",
    "end": "830459"
  },
  {
    "text": "what we have in the database itself",
    "start": "830459",
    "end": "834019"
  },
  {
    "text": "that's pretty complicated but Helm is",
    "start": "834240",
    "end": "836339"
  },
  {
    "text": "generating us a random password for each",
    "start": "836339",
    "end": "838200"
  },
  {
    "text": "install",
    "start": "838200",
    "end": "839060"
  },
  {
    "text": "and uh first time Marine DB runs it",
    "start": "839060",
    "end": "842639"
  },
  {
    "text": "actually records that information in the",
    "start": "842639",
    "end": "844200"
  },
  {
    "text": "database and if it doesn't match again",
    "start": "844200",
    "end": "845579"
  },
  {
    "text": "later when Maria DB won't start",
    "start": "845579",
    "end": "848220"
  },
  {
    "text": "so",
    "start": "848220",
    "end": "849959"
  },
  {
    "text": "if you're following along at home now",
    "start": "849959",
    "end": "853320"
  },
  {
    "text": "um it starts starting to heat up so",
    "start": "853320",
    "end": "855720"
  },
  {
    "text": "we've got a nice collection of values",
    "start": "855720",
    "end": "857399"
  },
  {
    "text": "here we're actually going to put them in",
    "start": "857399",
    "end": "858660"
  },
  {
    "text": "a file values.yaml",
    "start": "858660",
    "end": "861240"
  },
  {
    "text": "and if you'd like to give this a try",
    "start": "861240",
    "end": "863519"
  },
  {
    "text": "here uh yeah so we know we need to set",
    "start": "863519",
    "end": "866459"
  },
  {
    "text": "the password actually I'm going to skip",
    "start": "866459",
    "end": "868139"
  },
  {
    "text": "One Step here and say there's two",
    "start": "868139",
    "end": "869700"
  },
  {
    "text": "passwords we need to set because there's",
    "start": "869700",
    "end": "871500"
  },
  {
    "text": "a root user in the database and there's",
    "start": "871500",
    "end": "873240"
  },
  {
    "text": "also a user user",
    "start": "873240",
    "end": "876420"
  },
  {
    "text": "so we're going to do that",
    "start": "876420",
    "end": "878579"
  },
  {
    "text": "we are going to uninstall and then apply",
    "start": "878579",
    "end": "882180"
  },
  {
    "text": "these definitions to the cluster with",
    "start": "882180",
    "end": "884459"
  },
  {
    "text": "helm",
    "start": "884459",
    "end": "887000"
  },
  {
    "text": "so here's our amended list for now is",
    "start": "888180",
    "end": "890279"
  },
  {
    "text": "this going to work",
    "start": "890279",
    "end": "892560"
  },
  {
    "text": "we've added passwords to the list this",
    "start": "892560",
    "end": "894660"
  },
  {
    "text": "time and if you follow the video this",
    "start": "894660",
    "end": "897420"
  },
  {
    "text": "time you know it's working",
    "start": "897420",
    "end": "899699"
  },
  {
    "text": "uh you you better believe me it took two",
    "start": "899699",
    "end": "902339"
  },
  {
    "text": "tries to get that right yeah the two",
    "start": "902339",
    "end": "904260"
  },
  {
    "text": "password thing that I tripped over that",
    "start": "904260",
    "end": "906839"
  },
  {
    "text": "at least twice",
    "start": "906839",
    "end": "908639"
  },
  {
    "text": "so now all we're missing is get",
    "start": "908639",
    "end": "912120"
  },
  {
    "text": "so if you're new to githubs I hope that",
    "start": "912120",
    "end": "914639"
  },
  {
    "text": "this whole beginner's Journey hasn't",
    "start": "914639",
    "end": "917040"
  },
  {
    "text": "scared you away but remember that we set",
    "start": "917040",
    "end": "919380"
  },
  {
    "text": "out to do just one thing for now and",
    "start": "919380",
    "end": "921000"
  },
  {
    "text": "we've done it right so we can uh we're",
    "start": "921000",
    "end": "924000"
  },
  {
    "text": "gonna do this Speed Run actually",
    "start": "924000",
    "end": "926339"
  },
  {
    "text": "of how do we get this into",
    "start": "926339",
    "end": "929519"
  },
  {
    "text": "flux",
    "start": "929519",
    "end": "930720"
  },
  {
    "text": "how do we get it into git and use that",
    "start": "930720",
    "end": "932699"
  },
  {
    "text": "as part of our Disaster Recovery",
    "start": "932699",
    "end": "934440"
  },
  {
    "text": "Solution",
    "start": "934440",
    "end": "936300"
  },
  {
    "text": "so there is another video that should go",
    "start": "936300",
    "end": "938339"
  },
  {
    "text": "here",
    "start": "938339",
    "end": "939300"
  },
  {
    "text": "um",
    "start": "939300",
    "end": "940139"
  },
  {
    "text": "and I apologize I've been working up to",
    "start": "940139",
    "end": "942480"
  },
  {
    "text": "the last minute so but if you've read",
    "start": "942480",
    "end": "945540"
  },
  {
    "text": "the flex stocks from cover to cover this",
    "start": "945540",
    "end": "948060"
  },
  {
    "text": "one might not be familiar because it's a",
    "start": "948060",
    "end": "950519"
  },
  {
    "text": "bit new it's about encrypting",
    "start": "950519",
    "end": "953040"
  },
  {
    "text": "values.yaml",
    "start": "953040",
    "end": "954779"
  },
  {
    "text": "and storing it for use in a secret",
    "start": "954779",
    "end": "958139"
  },
  {
    "text": "then how to use that secret with a flux",
    "start": "958139",
    "end": "960959"
  },
  {
    "text": "Helm controller Helm release to drive",
    "start": "960959",
    "end": "964380"
  },
  {
    "text": "the operation of your Helm chart",
    "start": "964380",
    "end": "967699"
  },
  {
    "text": "so here's the helm repository we're",
    "start": "969540",
    "end": "971940"
  },
  {
    "text": "going to create it using the flux CLI",
    "start": "971940",
    "end": "973860"
  },
  {
    "text": "and then we're going to use flux export",
    "start": "973860",
    "end": "975839"
  },
  {
    "text": "Source git",
    "start": "975839",
    "end": "978680"
  },
  {
    "text": "and here is that Helm release repository",
    "start": "980040",
    "end": "983339"
  },
  {
    "text": "a little bit zoomed in with some details",
    "start": "983339",
    "end": "985620"
  },
  {
    "text": "highlighted we've actually because",
    "start": "985620",
    "end": "987240"
  },
  {
    "text": "there's a reason that the stable repo",
    "start": "987240",
    "end": "989160"
  },
  {
    "text": "was deprecated it's large and unwieldy",
    "start": "989160",
    "end": "992459"
  },
  {
    "text": "so we actually have to increase the",
    "start": "992459",
    "end": "993959"
  },
  {
    "text": "timeout",
    "start": "993959",
    "end": "996260"
  },
  {
    "text": "to make this work",
    "start": "996360",
    "end": "998100"
  },
  {
    "text": "and",
    "start": "998100",
    "end": "999300"
  },
  {
    "text": "we're going to do the same for the helm",
    "start": "999300",
    "end": "1000800"
  },
  {
    "text": "release convert the helm install command",
    "start": "1000800",
    "end": "1002660"
  },
  {
    "text": "to a declarative form",
    "start": "1002660",
    "end": "1004699"
  },
  {
    "text": "okay",
    "start": "1004699",
    "end": "1007160"
  },
  {
    "text": "so there are some details from that last",
    "start": "1007160",
    "end": "1009380"
  },
  {
    "text": "page that you",
    "start": "1009380",
    "end": "1011180"
  },
  {
    "text": "ought to read the flux docs to",
    "start": "1011180",
    "end": "1012380"
  },
  {
    "text": "understand if they're not immediately",
    "start": "1012380",
    "end": "1013759"
  },
  {
    "text": "obvious but there's one that I'll talk",
    "start": "1013759",
    "end": "1015800"
  },
  {
    "text": "about here the values from is part of",
    "start": "1015800",
    "end": "1018259"
  },
  {
    "text": "the guide I linked to a few slides ago",
    "start": "1018259",
    "end": "1022240"
  },
  {
    "text": "and this is straight out of that guide",
    "start": "1022579",
    "end": "1025160"
  },
  {
    "text": "this is customized config.yaml",
    "start": "1025160",
    "end": "1029120"
  },
  {
    "text": "um this points to a field in the helm",
    "start": "1029120",
    "end": "1030918"
  },
  {
    "text": "release",
    "start": "1030919",
    "end": "1032418"
  },
  {
    "text": "it doesn't need any changes",
    "start": "1032419",
    "end": "1034400"
  },
  {
    "text": "this one does change just a little bit",
    "start": "1034400",
    "end": "1036740"
  },
  {
    "text": "okay prior uh to this I was using pod",
    "start": "1036740",
    "end": "1039438"
  },
  {
    "text": "info and uh so let's change to book",
    "start": "1039439",
    "end": "1042740"
  },
  {
    "text": "stack and then let's make sure that all",
    "start": "1042740",
    "end": "1044360"
  },
  {
    "text": "the file names match what we've created",
    "start": "1044360",
    "end": "1045918"
  },
  {
    "text": "we're going to need that values.yaml",
    "start": "1045919",
    "end": "1048438"
  },
  {
    "text": "file that we created earlier also",
    "start": "1048439",
    "end": "1050600"
  },
  {
    "text": "so uh and oh this reminds us we're going",
    "start": "1050600",
    "end": "1053840"
  },
  {
    "text": "to have to declare the namespace if we",
    "start": "1053840",
    "end": "1055700"
  },
  {
    "text": "want this to work with Git Ops",
    "start": "1055700",
    "end": "1058400"
  },
  {
    "text": "now I think that is everything except",
    "start": "1058400",
    "end": "1061760"
  },
  {
    "text": "one more thing",
    "start": "1061760",
    "end": "1063320"
  },
  {
    "text": "all right we said we're going to have",
    "start": "1063320",
    "end": "1065240"
  },
  {
    "text": "secrets in a values.yaml file so that",
    "start": "1065240",
    "end": "1067700"
  },
  {
    "text": "means we need to encrypt it",
    "start": "1067700",
    "end": "1069919"
  },
  {
    "text": "um and that means we need a stops",
    "start": "1069919",
    "end": "1071419"
  },
  {
    "text": "configuration so if you do follow that",
    "start": "1071419",
    "end": "1073100"
  },
  {
    "text": "link that I posted before this is the",
    "start": "1073100",
    "end": "1075980"
  },
  {
    "text": "same link and it has information",
    "start": "1075980",
    "end": "1078460"
  },
  {
    "text": "connected to the Sops guide and flux to",
    "start": "1078460",
    "end": "1080900"
  },
  {
    "text": "tell you how to set up stops from",
    "start": "1080900",
    "end": "1082340"
  },
  {
    "text": "scratch with flux",
    "start": "1082340",
    "end": "1085580"
  },
  {
    "text": "so",
    "start": "1085580",
    "end": "1087260"
  },
  {
    "text": "all right so we're going to do that",
    "start": "1087260",
    "end": "1089299"
  },
  {
    "text": "just going to follow the guide not talk",
    "start": "1089299",
    "end": "1091100"
  },
  {
    "text": "about it and commit everything to get",
    "start": "1091100",
    "end": "1094220"
  },
  {
    "text": "and flux's Helm controller is going to",
    "start": "1094220",
    "end": "1097280"
  },
  {
    "text": "take over this release and if we've",
    "start": "1097280",
    "end": "1099320"
  },
  {
    "text": "lined everything up correctly then you",
    "start": "1099320",
    "end": "1101600"
  },
  {
    "text": "should see Helm controller taking over",
    "start": "1101600",
    "end": "1103039"
  },
  {
    "text": "the helm release",
    "start": "1103039",
    "end": "1104500"
  },
  {
    "text": "you should have flux bootstrapped",
    "start": "1104500",
    "end": "1106640"
  },
  {
    "text": "already at this point",
    "start": "1106640",
    "end": "1108200"
  },
  {
    "text": "um",
    "start": "1108200",
    "end": "1109580"
  },
  {
    "text": "thanks Pinky and some tochi throughout",
    "start": "1109580",
    "end": "1112100"
  },
  {
    "text": "the day you'll see Flex bootstrap we're",
    "start": "1112100",
    "end": "1113660"
  },
  {
    "text": "not going to do it here but hopefully",
    "start": "1113660",
    "end": "1116059"
  },
  {
    "text": "we've already seen enough of that or",
    "start": "1116059",
    "end": "1117380"
  },
  {
    "text": "we'll see enough of that and um",
    "start": "1117380",
    "end": "1120320"
  },
  {
    "text": "hey it worked",
    "start": "1120320",
    "end": "1123320"
  },
  {
    "text": "cool",
    "start": "1123320",
    "end": "1124400"
  },
  {
    "text": "so there's our our book stack Wiki uh",
    "start": "1124400",
    "end": "1126980"
  },
  {
    "text": "We've restored it and it actually has",
    "start": "1126980",
    "end": "1128419"
  },
  {
    "text": "all the data still on it",
    "start": "1128419",
    "end": "1131120"
  },
  {
    "text": "so what's missing at this point actually",
    "start": "1131120",
    "end": "1132799"
  },
  {
    "text": "uh we still don't have a backup that was",
    "start": "1132799",
    "end": "1134960"
  },
  {
    "text": "the first thing we wanted to do",
    "start": "1134960",
    "end": "1136700"
  },
  {
    "text": "so that's that could be a problem",
    "start": "1136700",
    "end": "1139039"
  },
  {
    "text": "um but we're well prepared now for what",
    "start": "1139039",
    "end": "1141200"
  },
  {
    "text": "comes next Okay so",
    "start": "1141200",
    "end": "1143299"
  },
  {
    "text": "check out this talk from last year's",
    "start": "1143299",
    "end": "1144860"
  },
  {
    "text": "kubecon that already covered CSI",
    "start": "1144860",
    "end": "1146720"
  },
  {
    "text": "snapshots at large",
    "start": "1146720",
    "end": "1148640"
  },
  {
    "text": "um we can use them in githubs I'm sure",
    "start": "1148640",
    "end": "1150919"
  },
  {
    "text": "although unfortunately I can't prove",
    "start": "1150919",
    "end": "1152600"
  },
  {
    "text": "that right here as I'm about to tell you",
    "start": "1152600",
    "end": "1154280"
  },
  {
    "text": "more about why",
    "start": "1154280",
    "end": "1157880"
  },
  {
    "text": "um and there there are still some",
    "start": "1158360",
    "end": "1159860"
  },
  {
    "text": "problems for us so uh we cannot manage",
    "start": "1159860",
    "end": "1162740"
  },
  {
    "text": "our Azure snapshots I don't think I",
    "start": "1162740",
    "end": "1165080"
  },
  {
    "text": "mentioned that I am on Azure here but",
    "start": "1165080",
    "end": "1167480"
  },
  {
    "text": "with Git Ops we cannot measure we cannot",
    "start": "1167480",
    "end": "1170120"
  },
  {
    "text": "manage our Azure snapshots without",
    "start": "1170120",
    "end": "1171620"
  },
  {
    "text": "getting another third-party tool",
    "start": "1171620",
    "end": "1173059"
  },
  {
    "text": "involved kubernetes cannot do it",
    "start": "1173059",
    "end": "1174919"
  },
  {
    "text": "directly Azure does not support it",
    "start": "1174919",
    "end": "1178100"
  },
  {
    "text": "and this is actually not too uncommon um",
    "start": "1178100",
    "end": "1181160"
  },
  {
    "text": "I did not start on Azure When I Was",
    "start": "1181160",
    "end": "1183200"
  },
  {
    "text": "preparing this I wanted to make it",
    "start": "1183200",
    "end": "1185000"
  },
  {
    "text": "accessible so I tried not to make it",
    "start": "1185000",
    "end": "1187460"
  },
  {
    "text": "about the Synology file server that I",
    "start": "1187460",
    "end": "1189500"
  },
  {
    "text": "have at home that has an open source CSI",
    "start": "1189500",
    "end": "1193940"
  },
  {
    "text": "driver that does support the common",
    "start": "1193940",
    "end": "1195679"
  },
  {
    "text": "snapshot interface so the demo is",
    "start": "1195679",
    "end": "1198260"
  },
  {
    "text": "basically all the same there and if you",
    "start": "1198260",
    "end": "1199760"
  },
  {
    "text": "don't have one at home you can try it on",
    "start": "1199760",
    "end": "1201320"
  },
  {
    "text": "these clouds and if anybody shouts an am",
    "start": "1201320",
    "end": "1204620"
  },
  {
    "text": "right now that also supports external",
    "start": "1204620",
    "end": "1206240"
  },
  {
    "text": "snapshots I will happily add it to this",
    "start": "1206240",
    "end": "1208580"
  },
  {
    "text": "list no questions asked",
    "start": "1208580",
    "end": "1211880"
  },
  {
    "text": "so okay let's move on so there's some",
    "start": "1211880",
    "end": "1214280"
  },
  {
    "text": "documentation that I've been working on",
    "start": "1214280",
    "end": "1215900"
  },
  {
    "text": "to go with this talk",
    "start": "1215900",
    "end": "1218919"
  },
  {
    "text": "disaster recovery runbook",
    "start": "1219799",
    "end": "1222140"
  },
  {
    "text": "this is the beginning of a run book that",
    "start": "1222140",
    "end": "1224059"
  },
  {
    "text": "will eventually cover everything we've",
    "start": "1224059",
    "end": "1225500"
  },
  {
    "text": "discussed here and more",
    "start": "1225500",
    "end": "1227539"
  },
  {
    "text": "but it needs some work yet",
    "start": "1227539",
    "end": "1229700"
  },
  {
    "text": "so I don't think I can do this by myself",
    "start": "1229700",
    "end": "1233440"
  },
  {
    "text": "but you can help",
    "start": "1234260",
    "end": "1237100"
  },
  {
    "text": "I'm sorry the slides are not in better",
    "start": "1240200",
    "end": "1241940"
  },
  {
    "text": "sync with what I'm saying but hopefully",
    "start": "1241940",
    "end": "1244160"
  },
  {
    "text": "it's still possible to follow",
    "start": "1244160",
    "end": "1246860"
  },
  {
    "text": "so",
    "start": "1246860",
    "end": "1249200"
  },
  {
    "text": "um get used to saying that you need help",
    "start": "1249200",
    "end": "1251780"
  },
  {
    "text": "I need help",
    "start": "1251780",
    "end": "1253400"
  },
  {
    "text": "future you needs help from present you",
    "start": "1253400",
    "end": "1255260"
  },
  {
    "text": "or maybe present you needs help right",
    "start": "1255260",
    "end": "1257419"
  },
  {
    "text": "now",
    "start": "1257419",
    "end": "1258620"
  },
  {
    "text": "um",
    "start": "1258620",
    "end": "1259340"
  },
  {
    "text": "if you need help you know where to find",
    "start": "1259340",
    "end": "1261380"
  },
  {
    "text": "us I hope we're in the cncf slack or I",
    "start": "1261380",
    "end": "1264020"
  },
  {
    "text": "am Kingdom B and I'm usually in the flux",
    "start": "1264020",
    "end": "1266960"
  },
  {
    "text": "Channel",
    "start": "1266960",
    "end": "1269200"
  },
  {
    "text": "so this run book has a section that is",
    "start": "1273500",
    "end": "1275960"
  },
  {
    "text": "focused on what to do in a disaster",
    "start": "1275960",
    "end": "1279640"
  },
  {
    "text": "it assumes you will have already",
    "start": "1280580",
    "end": "1282320"
  },
  {
    "text": "followed all of the architecture",
    "start": "1282320",
    "end": "1283880"
  },
  {
    "text": "guidance so the architecture section is",
    "start": "1283880",
    "end": "1286580"
  },
  {
    "text": "much longer the runbook is short",
    "start": "1286580",
    "end": "1290539"
  },
  {
    "text": "not for a while about how to publish",
    "start": "1290539",
    "end": "1291980"
  },
  {
    "text": "this",
    "start": "1291980",
    "end": "1294158"
  },
  {
    "text": "I decided not to use bookstack",
    "start": "1294980",
    "end": "1298780"
  },
  {
    "text": "um okay so lesson number one actually",
    "start": "1299480",
    "end": "1301820"
  },
  {
    "text": "let's back way up",
    "start": "1301820",
    "end": "1303620"
  },
  {
    "text": "uh don't get yourself into jams if you",
    "start": "1303620",
    "end": "1306980"
  },
  {
    "text": "can simply avoid it",
    "start": "1306980",
    "end": "1309880"
  },
  {
    "text": "in this case it would have been",
    "start": "1311780",
    "end": "1313159"
  },
  {
    "text": "absolutely avoidable Maria DB can be run",
    "start": "1313159",
    "end": "1316220"
  },
  {
    "text": "externally you can refer to it as an",
    "start": "1316220",
    "end": "1318440"
  },
  {
    "text": "attached resource in a secret just like",
    "start": "1318440",
    "end": "1320600"
  },
  {
    "text": "we've been doing since 2011 or earlier",
    "start": "1320600",
    "end": "1322700"
  },
  {
    "text": "as described by a 12 Factor",
    "start": "1322700",
    "end": "1326240"
  },
  {
    "text": "if your organization is large and fairly",
    "start": "1326240",
    "end": "1329059"
  },
  {
    "text": "competent it is highly likely that they",
    "start": "1329059",
    "end": "1331100"
  },
  {
    "text": "have backups worked out already to a",
    "start": "1331100",
    "end": "1333500"
  },
  {
    "text": "science so if figuring that stuff out is",
    "start": "1333500",
    "end": "1336740"
  },
  {
    "text": "your job",
    "start": "1336740",
    "end": "1337820"
  },
  {
    "text": "then I hope this talk has helped",
    "start": "1337820",
    "end": "1341200"
  },
  {
    "text": "if you don't have such guidance you may",
    "start": "1341559",
    "end": "1344960"
  },
  {
    "text": "want to start with a better resource",
    "start": "1344960",
    "end": "1346760"
  },
  {
    "text": "than my run book that I started um",
    "start": "1346760",
    "end": "1349640"
  },
  {
    "text": "three months ago so there is prior art",
    "start": "1349640",
    "end": "1352760"
  },
  {
    "text": "without a focus on git Ops Valero",
    "start": "1352760",
    "end": "1355400"
  },
  {
    "text": "actually solves most of these problems",
    "start": "1355400",
    "end": "1356900"
  },
  {
    "text": "and others too",
    "start": "1356900",
    "end": "1359480"
  },
  {
    "text": "now uh about snapshots another thing to",
    "start": "1359480",
    "end": "1362960"
  },
  {
    "text": "consider is if your snapshots are housed",
    "start": "1362960",
    "end": "1365539"
  },
  {
    "text": "in a resource Group or another analog",
    "start": "1365539",
    "end": "1367880"
  },
  {
    "text": "like we have on azure",
    "start": "1367880",
    "end": "1369980"
  },
  {
    "text": "they can be Cascade deleted so if you're",
    "start": "1369980",
    "end": "1372620"
  },
  {
    "text": "creating snapshots is your plan for a",
    "start": "1372620",
    "end": "1374419"
  },
  {
    "text": "backup",
    "start": "1374419",
    "end": "1376460"
  },
  {
    "text": "uh well that's not the only limitation",
    "start": "1376460",
    "end": "1378500"
  },
  {
    "text": "right uh",
    "start": "1378500",
    "end": "1380120"
  },
  {
    "text": "we talked about",
    "start": "1380120",
    "end": "1381919"
  },
  {
    "text": "mixing secrets in in our values.yaml",
    "start": "1381919",
    "end": "1384559"
  },
  {
    "text": "file with the rest of the configuration",
    "start": "1384559",
    "end": "1386600"
  },
  {
    "text": "isn't that really the best way to do it",
    "start": "1386600",
    "end": "1389299"
  },
  {
    "text": "I don't think so I think you should put",
    "start": "1389299",
    "end": "1391340"
  },
  {
    "text": "your secrets in a purpose-built Secret",
    "start": "1391340",
    "end": "1393860"
  },
  {
    "text": "store like Vault or any KMS solution",
    "start": "1393860",
    "end": "1397000"
  },
  {
    "text": "that you can access with an external",
    "start": "1397000",
    "end": "1399440"
  },
  {
    "text": "Secrets operator",
    "start": "1399440",
    "end": "1401299"
  },
  {
    "text": "but it does have limitations when you",
    "start": "1401299",
    "end": "1403220"
  },
  {
    "text": "use that with flux flux customized",
    "start": "1403220",
    "end": "1406280"
  },
  {
    "text": "controller needs those things together",
    "start": "1406280",
    "end": "1407720"
  },
  {
    "text": "so that example that I showed and the",
    "start": "1407720",
    "end": "1410240"
  },
  {
    "text": "other examples that are in the family",
    "start": "1410240",
    "end": "1411679"
  },
  {
    "text": "the config map and um",
    "start": "1411679",
    "end": "1414020"
  },
  {
    "text": "there there are a couple of examples",
    "start": "1414020",
    "end": "1415640"
  },
  {
    "text": "there if you follow that link and just",
    "start": "1415640",
    "end": "1417080"
  },
  {
    "text": "scroll up a little bit there are",
    "start": "1417080",
    "end": "1419059"
  },
  {
    "text": "examples without encryption for things",
    "start": "1419059",
    "end": "1420559"
  },
  {
    "text": "that aren't secrets on how to use a",
    "start": "1420559",
    "end": "1422600"
  },
  {
    "text": "config map generator or a secret",
    "start": "1422600",
    "end": "1424039"
  },
  {
    "text": "generator and customize and you need the",
    "start": "1424039",
    "end": "1426380"
  },
  {
    "text": "secret right there in order to do that",
    "start": "1426380",
    "end": "1427880"
  },
  {
    "text": "it needs to be decrypted in the context",
    "start": "1427880",
    "end": "1429740"
  },
  {
    "text": "of customize so",
    "start": "1429740",
    "end": "1433159"
  },
  {
    "text": "um there there is some stuff to think",
    "start": "1433159",
    "end": "1435260"
  },
  {
    "text": "about here",
    "start": "1435260",
    "end": "1436520"
  },
  {
    "text": "so let's talk about the risks again you",
    "start": "1436520",
    "end": "1439820"
  },
  {
    "text": "might have a single cloud account",
    "start": "1439820",
    "end": "1443120"
  },
  {
    "text": "um say the mode of failure is a total",
    "start": "1443120",
    "end": "1445460"
  },
  {
    "text": "account takeover",
    "start": "1445460",
    "end": "1447140"
  },
  {
    "text": "this is actually a kind of similar",
    "start": "1447140",
    "end": "1449240"
  },
  {
    "text": "scenario in that we may have lost access",
    "start": "1449240",
    "end": "1451159"
  },
  {
    "text": "to the account and we're unable to",
    "start": "1451159",
    "end": "1452780"
  },
  {
    "text": "recover it or we've lost access to the",
    "start": "1452780",
    "end": "1455600"
  },
  {
    "text": "snapshots like we would have if we",
    "start": "1455600",
    "end": "1457520"
  },
  {
    "text": "deleted the resource Group",
    "start": "1457520",
    "end": "1459440"
  },
  {
    "text": "uh case in point you need a backup",
    "start": "1459440",
    "end": "1461600"
  },
  {
    "text": "outside",
    "start": "1461600",
    "end": "1463460"
  },
  {
    "text": "so what else can we do for backups well",
    "start": "1463460",
    "end": "1465559"
  },
  {
    "text": "if your architecture for backups and",
    "start": "1465559",
    "end": "1468200"
  },
  {
    "text": "Disaster Recovery planning",
    "start": "1468200",
    "end": "1470360"
  },
  {
    "text": "includes these possibilities you",
    "start": "1470360",
    "end": "1473120"
  },
  {
    "text": "probably are going to want to check out",
    "start": "1473120",
    "end": "1474320"
  },
  {
    "text": "rustic it has many scenarios for copying",
    "start": "1474320",
    "end": "1477500"
  },
  {
    "text": "in ways that weren't supported or",
    "start": "1477500",
    "end": "1479659"
  },
  {
    "text": "desired to be supported by Upstream apis",
    "start": "1479659",
    "end": "1481820"
  },
  {
    "text": "like the Azure API",
    "start": "1481820",
    "end": "1485139"
  },
  {
    "text": "now we can't show them all here today",
    "start": "1485539",
    "end": "1487280"
  },
  {
    "text": "unfortunately due to time constraints",
    "start": "1487280",
    "end": "1489260"
  },
  {
    "text": "but we will add these things to the",
    "start": "1489260",
    "end": "1490880"
  },
  {
    "text": "runbook soon and we will continue adding",
    "start": "1490880",
    "end": "1492919"
  },
  {
    "text": "them as people are interested if that",
    "start": "1492919",
    "end": "1496340"
  },
  {
    "text": "should come to pass if we're not",
    "start": "1496340",
    "end": "1498860"
  },
  {
    "text": "prepared to go outside of what our cloud",
    "start": "1498860",
    "end": "1500960"
  },
  {
    "text": "provider supports natively there are",
    "start": "1500960",
    "end": "1502520"
  },
  {
    "text": "other Solutions we can approach to",
    "start": "1502520",
    "end": "1506320"
  },
  {
    "text": "so you can lock the resources again",
    "start": "1509539",
    "end": "1512600"
  },
  {
    "text": "using the Azure API or the Azure portal",
    "start": "1512600",
    "end": "1514880"
  },
  {
    "text": "to prevent their deletion I'm sure other",
    "start": "1514880",
    "end": "1517159"
  },
  {
    "text": "Cloud providers likely have a similar",
    "start": "1517159",
    "end": "1520039"
  },
  {
    "text": "structure that's available and terraform",
    "start": "1520039",
    "end": "1522799"
  },
  {
    "text": "also has the perfect destroy life cycle",
    "start": "1522799",
    "end": "1525919"
  },
  {
    "text": "setting which if you're using terraform",
    "start": "1525919",
    "end": "1528620"
  },
  {
    "text": "but",
    "start": "1528620",
    "end": "1530240"
  },
  {
    "text": "again one can just comment that out and",
    "start": "1530240",
    "end": "1532400"
  },
  {
    "text": "run it again so that's really not a",
    "start": "1532400",
    "end": "1534799"
  },
  {
    "text": "complete solution",
    "start": "1534799",
    "end": "1536840"
  },
  {
    "text": "so what else can we do we set off-site",
    "start": "1536840",
    "end": "1538940"
  },
  {
    "text": "backups something we want to consider",
    "start": "1538940",
    "end": "1541220"
  },
  {
    "text": "they should not live in the same cloud",
    "start": "1541220",
    "end": "1543260"
  },
  {
    "text": "account if we want to protect against a",
    "start": "1543260",
    "end": "1545600"
  },
  {
    "text": "total account takeover or really",
    "start": "1545600",
    "end": "1547520"
  },
  {
    "text": "anywhere that's accessible from that",
    "start": "1547520",
    "end": "1548900"
  },
  {
    "text": "account",
    "start": "1548900",
    "end": "1551020"
  },
  {
    "text": "so we've reached the end of our content",
    "start": "1551539",
    "end": "1554600"
  },
  {
    "text": "and you can take a picture of this again",
    "start": "1554600",
    "end": "1556820"
  },
  {
    "text": "if you missed it earlier",
    "start": "1556820",
    "end": "1559340"
  },
  {
    "text": "um",
    "start": "1559340",
    "end": "1560299"
  },
  {
    "text": "thank you very much for your attention I",
    "start": "1560299",
    "end": "1562760"
  },
  {
    "text": "think we might have time for a question",
    "start": "1562760",
    "end": "1564140"
  },
  {
    "text": "or two we do yeah yeah",
    "start": "1564140",
    "end": "1567140"
  },
  {
    "text": "one over there",
    "start": "1567140",
    "end": "1569980"
  },
  {
    "text": "we've got a microphone on the way here",
    "start": "1571039",
    "end": "1574600"
  },
  {
    "text": "so all the steps you were going through",
    "start": "1576860",
    "end": "1579140"
  },
  {
    "text": "to create a backup manifest of the",
    "start": "1579140",
    "end": "1582080"
  },
  {
    "text": "persistent volume claim persistent",
    "start": "1582080",
    "end": "1583760"
  },
  {
    "text": "volumes",
    "start": "1583760",
    "end": "1584779"
  },
  {
    "text": "so ultimately what do you do with that",
    "start": "1584779",
    "end": "1586820"
  },
  {
    "text": "manifest that was a little bit I wasn't",
    "start": "1586820",
    "end": "1588440"
  },
  {
    "text": "sure about that it was was that to put",
    "start": "1588440",
    "end": "1589940"
  },
  {
    "text": "it back into your own version of the",
    "start": "1589940",
    "end": "1591559"
  },
  {
    "text": "helm chart or put it somewhere else",
    "start": "1591559",
    "end": "1594440"
  },
  {
    "text": "what we did with that uh maybe I did",
    "start": "1594440",
    "end": "1596539"
  },
  {
    "text": "skip over that a little bit so",
    "start": "1596539",
    "end": "1599179"
  },
  {
    "text": "what we did",
    "start": "1599179",
    "end": "1600679"
  },
  {
    "text": "we uninstalled the helm chart",
    "start": "1600679",
    "end": "1603340"
  },
  {
    "text": "or we uh yeah we did uninstall it so we",
    "start": "1603340",
    "end": "1607520"
  },
  {
    "text": "we have taken an initial definition the",
    "start": "1607520",
    "end": "1610640"
  },
  {
    "text": "values.yaml with",
    "start": "1610640",
    "end": "1614059"
  },
  {
    "text": "here this is the slide this is what we",
    "start": "1614059",
    "end": "1615919"
  },
  {
    "text": "did",
    "start": "1615919",
    "end": "1616940"
  },
  {
    "text": "we took on the left where we have no",
    "start": "1616940",
    "end": "1619460"
  },
  {
    "text": "existing claim defined in our initial",
    "start": "1619460",
    "end": "1621440"
  },
  {
    "text": "installation and we have storage enabled",
    "start": "1621440",
    "end": "1624559"
  },
  {
    "text": "so that the volumes will be created by",
    "start": "1624559",
    "end": "1627140"
  },
  {
    "text": "Helm and then we took them over we",
    "start": "1627140",
    "end": "1630080"
  },
  {
    "text": "captured their definitions we stored",
    "start": "1630080",
    "end": "1632360"
  },
  {
    "text": "them in git",
    "start": "1632360",
    "end": "1634159"
  },
  {
    "text": "um and we changed a few things we",
    "start": "1634159",
    "end": "1635659"
  },
  {
    "text": "changed existing claim to refer to the",
    "start": "1635659",
    "end": "1638419"
  },
  {
    "text": "existing claim and at this point",
    "start": "1638419",
    "end": "1641179"
  },
  {
    "text": "um",
    "start": "1641179",
    "end": "1642020"
  },
  {
    "text": "I uninstalled the chart and reinstalled",
    "start": "1642020",
    "end": "1644120"
  },
  {
    "text": "it I had a problem when I tried just",
    "start": "1644120",
    "end": "1646159"
  },
  {
    "text": "straight upgrading it there but the",
    "start": "1646159",
    "end": "1648440"
  },
  {
    "text": "actually the problem uh somewhere in",
    "start": "1648440",
    "end": "1650419"
  },
  {
    "text": "here you'll notice if you",
    "start": "1650419",
    "end": "1654100"
  },
  {
    "text": "didn't believe me when I said it all",
    "start": "1654200",
    "end": "1656900"
  },
  {
    "text": "worked at the very end here here is a",
    "start": "1656900",
    "end": "1659720"
  },
  {
    "text": "mistake",
    "start": "1659720",
    "end": "1660919"
  },
  {
    "text": "it's not called my book stack release",
    "start": "1660919",
    "end": "1662960"
  },
  {
    "text": "it's called my book stack Wiki so I did",
    "start": "1662960",
    "end": "1665179"
  },
  {
    "text": "have an error at the very end and I had",
    "start": "1665179",
    "end": "1668179"
  },
  {
    "text": "to fix that I wound up uninstalling and",
    "start": "1668179",
    "end": "1670340"
  },
  {
    "text": "reinstalling but after that now your",
    "start": "1670340",
    "end": "1672919"
  },
  {
    "text": "volumes are part of your definition they",
    "start": "1672919",
    "end": "1674840"
  },
  {
    "text": "exist and as long as they exist or they",
    "start": "1674840",
    "end": "1677299"
  },
  {
    "text": "can be restored to where they were or",
    "start": "1677299",
    "end": "1679460"
  },
  {
    "text": "another place now you can do a full",
    "start": "1679460",
    "end": "1682340"
  },
  {
    "text": "restore on a new cluster so you tear it",
    "start": "1682340",
    "end": "1685100"
  },
  {
    "text": "on the cluster you bootstrap a new",
    "start": "1685100",
    "end": "1686480"
  },
  {
    "text": "cluster",
    "start": "1686480",
    "end": "1687440"
  },
  {
    "text": "and it should restore all of the data",
    "start": "1687440",
    "end": "1690020"
  },
  {
    "text": "from all of your persistent volumes",
    "start": "1690020",
    "end": "1691940"
  },
  {
    "text": "this works basically on every CSI driver",
    "start": "1691940",
    "end": "1694520"
  },
  {
    "text": "with minor variations",
    "start": "1694520",
    "end": "1697960"
  },
  {
    "text": "thanks",
    "start": "1698840",
    "end": "1700760"
  },
  {
    "text": "yeah all right great come visit me at",
    "start": "1700760",
    "end": "1703460"
  },
  {
    "text": "the flux Booth thanks for your attention",
    "start": "1703460",
    "end": "1704960"
  },
  {
    "text": "thanks Keenan",
    "start": "1704960",
    "end": "1707200"
  },
  {
    "text": "[Applause]",
    "start": "1707200",
    "end": "1710118"
  }
]