[
  {
    "start": "0",
    "end": "0"
  },
  {
    "text": "i'm matt butcher i'm one of the helmet corps maintainers i'm super excited because we have a bunch of helm core maintainers on here today",
    "start": "320",
    "end": "6720"
  },
  {
    "text": "uh karen bridget martin and i will be talking a little bit and then during the workshop portion",
    "start": "6720",
    "end": "11759"
  },
  {
    "text": "you'll get to meet some other helm core maintainers so here's the here's the agenda all the time zones here on pacific time",
    "start": "11759",
    "end": "18560"
  },
  {
    "text": "uh which i am not so i apologize if i mis make any mistakes here uh so we'll kick off now do this brief uh welcome",
    "start": "18560",
    "end": "25039"
  },
  {
    "text": "deck uh then i'm gonna dive in and talk for about an hour about um about helm what's in helm3 how helm3",
    "start": "25039",
    "end": "32480"
  },
  {
    "text": "changed i'll give you some history i'll tell you some hopefully amusing stories uh and give you kind of the conceptual",
    "start": "32480",
    "end": "38000"
  },
  {
    "text": "grounding for the next talk uh after i'm done uh martin one of the core maintainers and and the person who",
    "start": "38000",
    "end": "44480"
  },
  {
    "text": "is instrumental in handling the in building the helm two to three migration plug-in we'll dive in with a really practical",
    "start": "44480",
    "end": "50320"
  },
  {
    "text": "talk about uh how that works and how you do migrations with helm uh and when we'll walk through kind of",
    "start": "50320",
    "end": "57120"
  },
  {
    "text": "the the entire process start to finish and then we'll take a short break after that and then the part i'm really excited",
    "start": "57120",
    "end": "63440"
  },
  {
    "text": "about is we'll do a hands-on workshop we've been working to prepare some curriculum to basically make it easy to",
    "start": "63440",
    "end": "68960"
  },
  {
    "text": "walk through uh the process of doing a helm two to three migration and we've got a whole bunch of uh people",
    "start": "68960",
    "end": "75200"
  },
  {
    "text": "standing by to help out uh we'll break into some breakout rooms and we'll uh we'll do that all together",
    "start": "75200",
    "end": "81040"
  },
  {
    "text": "really looking forward to that so that's our that's our agenda for the day",
    "start": "81040",
    "end": "86640"
  },
  {
    "text": "awesome okay so next um just a few housekeeping items before",
    "start": "86640",
    "end": "92479"
  },
  {
    "text": "we get started um everyone should be muted upon entry um since this is a regular zoom meeting",
    "start": "92479",
    "end": "99920"
  },
  {
    "text": "we want to give our speakers the time and attention to present first and so with that if you do",
    "start": "99920",
    "end": "107280"
  },
  {
    "text": "have questions um please go ahead and drop them into chat i and i'll be going through them and we'll",
    "start": "107280",
    "end": "114479"
  },
  {
    "text": "we'll do them at the end of the presentation so again just drop your questions into chat and we'll do them at the end and then",
    "start": "114479",
    "end": "120560"
  },
  {
    "text": "please make sure you adhere to the cncf code of conduct this is an official cnc event so um just",
    "start": "120560",
    "end": "126479"
  },
  {
    "text": "be respectful to everyone here and then um lastly just kind of a huge thank you to",
    "start": "126479",
    "end": "132720"
  },
  {
    "text": "all the people who've helped put on this workshop um so you know people listed are helping",
    "start": "132720",
    "end": "138480"
  },
  {
    "text": "with the hands-on workshop or doing the presentations or have just contributed to the event in some way and also a huge thank you to cncf for",
    "start": "138480",
    "end": "145840"
  },
  {
    "text": "their support with our events um with that uh i guess",
    "start": "145840",
    "end": "152480"
  },
  {
    "text": "matt do you want to get started a little bit early sure okay uh well um i'd like to introduce",
    "start": "152480",
    "end": "159360"
  },
  {
    "text": "butcher a principal and software engineer at microsoft and he will be talking about what is in home theory",
    "start": "159360",
    "end": "171840"
  },
  {
    "text": "okay uh slides up okay karen all right okay so i'm really excited to",
    "start": "177040",
    "end": "184000"
  },
  {
    "text": "be here today um what we're gonna what we're really focusing on today is uh the differences between helm2 and",
    "start": "184000",
    "end": "191280"
  },
  {
    "text": "helm3 and how to migrate from one to the other so in my session i'm going to talk a lot",
    "start": "191280",
    "end": "196720"
  },
  {
    "text": "about how helm works and then kind of what the design decisions were i'm going to talk about what some of our mistakes were in",
    "start": "196720",
    "end": "202959"
  },
  {
    "text": "earlier versions of helm how we tried to fix those in helm3 and and really try and lay the",
    "start": "202959",
    "end": "208319"
  },
  {
    "text": "foundations for what mark martin is going to talk about so that's what i'm going to talk about very focused on sort of the the way that",
    "start": "208319",
    "end": "215120"
  },
  {
    "text": "things work and the abstract notions that we have guiding helm then i'm going to hand off to martin and martin is going to take a",
    "start": "215120",
    "end": "222159"
  },
  {
    "text": "much more practical approach and really focus on what it means to upgrade uh what uh how things work what to what",
    "start": "222159",
    "end": "229120"
  },
  {
    "text": "to look out for so that's how we'll break things out in these first couple of sessions today",
    "start": "229120",
    "end": "236000"
  },
  {
    "text": "so the first thing i want to talk about is november 13th 2020. for us november 13th 2020 is a",
    "start": "237760",
    "end": "244959"
  },
  {
    "text": "very important date so i would encourage you to keep in mind the date november 13 2020. i'll just keep repeating that date",
    "start": "244959",
    "end": "251840"
  },
  {
    "text": "over and over what happens on november 13th 2020 well that's just a little bit that's",
    "start": "251840",
    "end": "258000"
  },
  {
    "start": "252000",
    "end": "252000"
  },
  {
    "text": "about a year after helm 3 came out and this happens to be the day that helm",
    "start": "258000",
    "end": "263360"
  },
  {
    "text": "2 becomes unmaintained so what does that mean well there are two major components of this that you",
    "start": "263360",
    "end": "268800"
  },
  {
    "text": "should understand um the first one is that the piece of software that we call helm and tiller will no longer",
    "start": "268800",
    "end": "275199"
  },
  {
    "text": "receive any updates at that point right so currently we are we are in the rc phase of helm",
    "start": "275199",
    "end": "282040"
  },
  {
    "text": "2.17.0 uh which means it'll be released within within a few days this is our last helm release on the two",
    "start": "282040",
    "end": "290000"
  },
  {
    "text": "uh 2.0 branch our last planned release so for a long time we've been doing only security fixes on this on on helm2",
    "start": "290000",
    "end": "297919"
  },
  {
    "text": "but uh all good things have to come to an end and in this case uh in order to to devote full attention",
    "start": "297919",
    "end": "303600"
  },
  {
    "text": "to helm3 and start the planning for helm4 we need to stop supporting helm2 so 2.17.0 will be",
    "start": "303600",
    "end": "311199"
  },
  {
    "text": "the last release there will be no additional work on helm2 after that there will be no updates after november",
    "start": "311199",
    "end": "317199"
  },
  {
    "text": "13th 2020 not even security updates so that's one one part the second one",
    "start": "317199",
    "end": "322240"
  },
  {
    "text": "which has been uh which which surprises people a little bit more is that on november 13th this staple and",
    "start": "322240",
    "end": "328720"
  },
  {
    "text": "incubator chart repositories will also stop receiving updates right now they're in",
    "start": "328720",
    "end": "333840"
  },
  {
    "text": "maintenance only mode if you go look at slash github.com you'll see that people",
    "start": "333840",
    "end": "339280"
  },
  {
    "text": "are still making fixes to things but they're small fixes right we're not accepting new charts i believe um",
    "start": "339280",
    "end": "345600"
  },
  {
    "text": "but the plan is that those repositories will no longer receive any updates and",
    "start": "345600",
    "end": "352479"
  },
  {
    "text": "from november 13th onward uh they will be marked as archived and and uh no more",
    "start": "352479",
    "end": "359199"
  },
  {
    "text": "no more security updates no more new charts being added um furthermore as of november 13th 2020",
    "start": "359199",
    "end": "366800"
  },
  {
    "text": "the google uh cloud storage bucket that holds a bunch of those charts will no longer be available so we're",
    "start": "366800",
    "end": "373360"
  },
  {
    "text": "working on migrating everything over to charts.helm.sh which will be the new uh",
    "start": "373360",
    "end": "378560"
  },
  {
    "text": "endpoint for your helm repositories but those will just be mirror static archives of",
    "start": "378560",
    "end": "384240"
  },
  {
    "text": "the the the helm incubator and stable repositories so very quickly then what does that mean",
    "start": "384240",
    "end": "390479"
  },
  {
    "text": "as far as how you get charts now here's kind of the here's kind of the deal um",
    "start": "390479",
    "end": "396479"
  },
  {
    "text": "when we first started this model for helm 2 uh you know back in 2015 2016",
    "start": "396479",
    "end": "402319"
  },
  {
    "text": "um we we never expected helm to to grow as quickly and as expensively as",
    "start": "402319",
    "end": "408080"
  },
  {
    "text": "it has and so the process we had for uh for accepting charts was very",
    "start": "408080",
    "end": "414720"
  },
  {
    "text": "editorially based where we had a group of people who uh who",
    "start": "414720",
    "end": "419759"
  },
  {
    "text": "managed the stable and incubator chart repositories and uh examined every single chart that came",
    "start": "419759",
    "end": "425199"
  },
  {
    "text": "up well it has become an unmaintainable situation there are just too many good",
    "start": "425199",
    "end": "430319"
  },
  {
    "text": "charts out there and too uh and it's too stressful to try and be the sole gatekeeper for the public",
    "start": "430319",
    "end": "436400"
  },
  {
    "text": "helm chart world so over the last year and you've probably noticed this we have been starting to spin off",
    "start": "436400",
    "end": "442400"
  },
  {
    "text": "separate chart repositories and we've been switching to a model closer to npm or cpan or any of the sort of",
    "start": "442400",
    "end": "449120"
  },
  {
    "text": "distributed package manager systems so now we have artifact hub which is an official cncf project",
    "start": "449120",
    "end": "456000"
  },
  {
    "start": "452000",
    "end": "452000"
  },
  {
    "text": "if you are looking for charts you can go to artifact hub search for something in there and it",
    "start": "456000",
    "end": "461680"
  },
  {
    "text": "will point you toward it'll give you instructions on which repository to configure and which",
    "start": "461680",
    "end": "467120"
  },
  {
    "text": "charts to fetch from there and so behind the scenes artifact hub is sort of aggregating from",
    "start": "467120",
    "end": "472319"
  },
  {
    "text": "dozens and dozens or probably hundreds at this point of package archives for helm charts and and",
    "start": "472319",
    "end": "478960"
  },
  {
    "text": "surfacing those in a nice easy to use search fashion in helm3 we actually have the helm",
    "start": "478960",
    "end": "484080"
  },
  {
    "text": "search client wired up to talk to artifact hub so if you do helm search hub wordpress it goes to artifact",
    "start": "484080",
    "end": "490879"
  },
  {
    "text": "hub finds all the wordpress charts on artifact hub and and prints them out in your command line terminal so there's a lot of integration",
    "start": "490879",
    "end": "497599"
  },
  {
    "text": "between these two but going forward stable and incubator as centralized chart repositories will be gone",
    "start": "497599",
    "end": "503840"
  },
  {
    "text": "and this more distributed approach where people uh organizations and individuals self-publish their charts",
    "start": "503840",
    "end": "509280"
  },
  {
    "text": "that's the way we'll do things going forward so november 13th is a big deal because we're making",
    "start": "509280",
    "end": "514399"
  },
  {
    "text": "all of those changes will finally hit their very last phase on november 13th in these last couple",
    "start": "514399",
    "end": "520800"
  },
  {
    "text": "weeks before then you can still expect security updates and very very minor changes on the charts repository",
    "start": "520800",
    "end": "526640"
  },
  {
    "text": "but if you don't upgrade by november 13 2020 uh you will be on your own because the",
    "start": "526640",
    "end": "532480"
  },
  {
    "text": "helm maintainers will officially uh stop all of our development efforts so that's something to keep in mind and",
    "start": "532480",
    "end": "538800"
  },
  {
    "text": "that's actually the real sort of driving force for why we wanted to do this webinar right now",
    "start": "538800",
    "end": "543920"
  },
  {
    "text": "so that you would still have ample time to finish up these migrations and so that we could help you",
    "start": "543920",
    "end": "548959"
  },
  {
    "text": "you know sort of proactively prepare for this and find uh any any potential gotchas right now up front when core maintainers",
    "start": "548959",
    "end": "555440"
  },
  {
    "text": "can be here and help you okay so that's kind of the preamble all right so what i'm going to cover in this",
    "start": "555440",
    "end": "561040"
  },
  {
    "start": "557000",
    "end": "557000"
  },
  {
    "text": "particular talk is i'm going to start by giving you sort of the background story for where home came from",
    "start": "561040",
    "end": "566560"
  },
  {
    "text": "how it developed along the the particular path that it did uh and and and point out some of the",
    "start": "566560",
    "end": "572480"
  },
  {
    "text": "hiccups along the way one of our really bad assumptions that we made that we had to correct for with helm3 after",
    "start": "572480",
    "end": "578480"
  },
  {
    "text": "that i'm going to talk particularly about the the uh the brief life and tragic death of tiller and",
    "start": "578480",
    "end": "584080"
  },
  {
    "text": "uh and what that means in the context of helm2 and helm3 and then i'm going to spend some time talking about releases so",
    "start": "584080",
    "end": "591279"
  },
  {
    "text": "this might sound like a technical detail but it's actually the most important concept to understand when we're doing",
    "start": "591279",
    "end": "597279"
  },
  {
    "text": "these migrations and then finally i'm going to wrap up by talking about the differences between charts and helm2 and and",
    "start": "597279",
    "end": "604079"
  },
  {
    "text": "in helm three and then i'm going to pass it on to martin who's going to take that practical approach and actually walk through",
    "start": "604079",
    "end": "609440"
  },
  {
    "text": "stuff with us so uh where did helm come from uh",
    "start": "609440",
    "end": "617279"
  },
  {
    "start": "610000",
    "end": "610000"
  },
  {
    "text": "maybe the story has been told too many times but i'm gonna tell it again anyway because it's helm's birthday and it's fun uh for me to tell this story",
    "start": "617279",
    "end": "624160"
  },
  {
    "text": "um five years ago uh we had a i was i was working for a",
    "start": "624160",
    "end": "629839"
  },
  {
    "text": "company called deus it had just recently been purchased by engine yard and we had been doing some r",
    "start": "629839",
    "end": "635360"
  },
  {
    "text": "d on this brand new platform that was called kubernetes i think at the time kubernetes was maybe at version 1.1",
    "start": "635360",
    "end": "642320"
  },
  {
    "text": "uh maybe 1.2 by that point uh and so we had been doing all kinds of crazy stuff",
    "start": "642320",
    "end": "648480"
  },
  {
    "text": "uh you know all kinds of you know experiments and and uh you know edge-leaning things",
    "start": "648480",
    "end": "654160"
  },
  {
    "text": "trying to figure out uh what we could do with kubernetes and we had become convinced that kubernetes",
    "start": "654160",
    "end": "659440"
  },
  {
    "text": "was going to be the next big thing so we decided to have during our our company all hands meeting everybody flew",
    "start": "659440",
    "end": "666240"
  },
  {
    "text": "into boulder colorado and we decided to announce there that we were going to pivot a lot of our development efforts",
    "start": "666240",
    "end": "671839"
  },
  {
    "text": "to kubernetes so uh uh i was asked to present a kubernetes in a",
    "start": "671839",
    "end": "678720"
  },
  {
    "text": "nutshell kind of thing uh to explain to not just the other developers that were in",
    "start": "678720",
    "end": "684959"
  },
  {
    "text": "my group or in the deus part of engineering but to all of engine yard including marketing and communications",
    "start": "684959",
    "end": "690640"
  },
  {
    "text": "and the executive team and everything explain in 30 minutes what kubernetes was",
    "start": "690640",
    "end": "695839"
  },
  {
    "text": "now i'm sure some of you are are laughing already because we all know how hard it is to explain to anybody what",
    "start": "695839",
    "end": "701120"
  },
  {
    "text": "kubernetes is and what it does uh so uh so and i drew the after lunch",
    "start": "701120",
    "end": "706480"
  },
  {
    "text": "slot too so i knew i was going to be doing this right after lunch so it came back and and",
    "start": "706480",
    "end": "712480"
  },
  {
    "text": "arranged my kids stuffed animals around the house and took pictures of them and giraffe and gopher and stuff like that",
    "start": "712480",
    "end": "719120"
  },
  {
    "text": "and and wrote this silly presentation silly um uh powerpoint presentation called the",
    "start": "719120",
    "end": "724959"
  },
  {
    "text": "illustrated children's guide to kubernetes and uh karen and i later partnered up and and did the little book based on",
    "start": "724959",
    "end": "731519"
  },
  {
    "text": "that so later that day we decided to kick off a hackathon project at stake was a 75 amazon gift card",
    "start": "731519",
    "end": "740079"
  },
  {
    "text": "and so my team jack francis and remus and i uh jack remus and i uh we decided that",
    "start": "740079",
    "end": "746560"
  },
  {
    "text": "we wanted to try something kubernetes oriented because we had just kind of announced that was going to be our big shift",
    "start": "746560",
    "end": "751600"
  },
  {
    "text": "so we uh we came up with this idea to do a package manager for kubernetes we called it kate's place",
    "start": "751600",
    "end": "757680"
  },
  {
    "text": "k8s uh we thought it was really cute and uh and we spent the next two days you know at every",
    "start": "757680",
    "end": "763360"
  },
  {
    "text": "every possible moment between sessions and late at night and stuff like that hacking together this little demo of a",
    "start": "763360",
    "end": "769519"
  },
  {
    "text": "package manager for kubernetes uh so we won the 75 gift card i know",
    "start": "769519",
    "end": "774639"
  },
  {
    "text": "that's what all of you really yeah we won it we split it three ways i think i spent mine on food um unsurprised probably coffee knowing",
    "start": "774639",
    "end": "781760"
  },
  {
    "text": "me um and and then we thought that was the end of it well the next day which was a friday",
    "start": "781760",
    "end": "786959"
  },
  {
    "text": "i got into the office and uh the phone rang yes the actual actual phone rang and i",
    "start": "786959",
    "end": "792320"
  },
  {
    "text": "picked it up and it was the ceo and the cto and they said hey we were talking last night and we think that this",
    "start": "792320",
    "end": "797839"
  },
  {
    "text": "package manager for kubernetes thing might be a good idea so we'd like you and and remus and jack to keep going on that",
    "start": "797839",
    "end": "804480"
  },
  {
    "text": "we'll we'll give you a couple more engineers and we'll see if we see if it goes anywhere and i went oh great that sounds",
    "start": "804480",
    "end": "809680"
  },
  {
    "text": "great that'd be a lot of fun they said just one thing we'd kind of like you to change the name we're not we think kate's place might not be the",
    "start": "809680",
    "end": "816240"
  },
  {
    "text": "right you know the right name for it so jack and i sat down with a nautical dictionary",
    "start": "816240",
    "end": "821839"
  },
  {
    "text": "and flipped through it uh tossing words back and forth until uh until until jack said hey wait how",
    "start": "821839",
    "end": "828560"
  },
  {
    "text": "about helm and and i went oh that's great and then we came up with charts as the metaphor for what the packages would look like",
    "start": "828560",
    "end": "834639"
  },
  {
    "text": "and that was the birth of helm so uh so adam maurice and michelle nerali and i really spent the next",
    "start": "834639",
    "end": "840959"
  },
  {
    "text": "several weeks just hammering away on code it was uh you know go and that was a new language for for",
    "start": "840959",
    "end": "846240"
  },
  {
    "text": "some of us and and we were just kind of working and working uh really exciting uh various engineers",
    "start": "846240",
    "end": "851680"
  },
  {
    "text": "would drop in and help out and then drop out and on the very first kubecon which was in san francisco we",
    "start": "851680",
    "end": "857120"
  },
  {
    "text": "announced helm uh which was i think helm 0.1 or 0.2 or something like that and and we",
    "start": "857120",
    "end": "863199"
  },
  {
    "text": "showed it off now the first kubecon was probably smaller than this uh than this workshop",
    "start": "863199",
    "end": "868880"
  },
  {
    "text": "today i don't remember how many people it were but i remember being able to make eye contact with pretty much everybody in the audience",
    "start": "868880",
    "end": "874800"
  },
  {
    "text": "so it was pretty small and we had a great time and it was a lot of fun but we didn't really expect it to go anywhere",
    "start": "874800",
    "end": "880000"
  },
  {
    "text": "so that was about i think november maybe early december of 2015. well uh january google called us and",
    "start": "880000",
    "end": "887360"
  },
  {
    "text": "said hey you want to fly out to google in seattle and chat with us about helm we've been",
    "start": "887360",
    "end": "893279"
  },
  {
    "text": "working on this other project we think the two can collaborate so adam and i and uh and gabe fly out to",
    "start": "893279",
    "end": "899920"
  },
  {
    "text": "uh google in seattle meet with some engineers there and they proposed that we merged together helm",
    "start": "899920",
    "end": "906240"
  },
  {
    "text": "and they're uh they're about to be released or maybe it had already been released system called kubernetes",
    "start": "906240",
    "end": "912399"
  },
  {
    "text": "deployment manager so we started working on that with them uh that became helm2 the basis for helm2",
    "start": "912399",
    "end": "918240"
  },
  {
    "text": "so helm1 never really saw the light of day uh i think the helm classic which is what we call it now maybe made it up to",
    "start": "918240",
    "end": "924839"
  },
  {
    "text": "0.13 but because google had already released what they called their 1.0 release of",
    "start": "924839",
    "end": "930079"
  },
  {
    "text": "deployment manager we had to skip to the next number and that's why we went from helm classic",
    "start": "930079",
    "end": "935360"
  },
  {
    "text": "to helm 2 but never really released the helm one so we worked together on that and then released uh the new version of helm",
    "start": "935360",
    "end": "942160"
  },
  {
    "text": "and we were shocked when people just started jumping in and contributing code i think we have now hundreds of companies and thousands of",
    "start": "942160",
    "end": "948639"
  },
  {
    "text": "developers who have contributed code to helm and probably an order of magnitude",
    "start": "948639",
    "end": "953680"
  },
  {
    "text": "higher than that who have contributed charts and developed charts and stuff like that it's just been phenomenal",
    "start": "953680",
    "end": "959600"
  },
  {
    "text": "uh it's been uh fabulous but as we went we realized that some of the assumptions we made back in the kubernetes 1.2 to",
    "start": "959600",
    "end": "966240"
  },
  {
    "text": "1.3 or four uh times were incorrect assumptions",
    "start": "966240",
    "end": "971759"
  },
  {
    "text": "and what we really wanted to do is we really wanted to follow semantic versioning and semantic versioning says",
    "start": "971759",
    "end": "977360"
  },
  {
    "text": "you know version numbers are major.minor.patch so if you fix a bug",
    "start": "977360",
    "end": "984000"
  },
  {
    "text": "you increment the patch release if you add a feature that doesn't break anything you increment the minor release",
    "start": "984000",
    "end": "989440"
  },
  {
    "text": "but anytime you need to make a breaking change you have to increment the major release number",
    "start": "989440",
    "end": "994639"
  },
  {
    "text": "so we knew that as soon as we broke something we'd have to go to helm3 so we deferred for a really long time",
    "start": "994639",
    "end": "1000480"
  },
  {
    "text": "and collected all of our breaking changes up and then started this big development effort to do helm3 and then",
    "start": "1000480",
    "end": "1006160"
  },
  {
    "text": "when we released helm3 we knew it had a lot of big changes they were going to necessitate things like",
    "start": "1006160",
    "end": "1011440"
  },
  {
    "text": "today's workshop right um but and then with home three you know again we're following the same",
    "start": "1011440",
    "end": "1017279"
  },
  {
    "text": "pattern we're not going to introduce any breaking changes during the lifespan of helm3 helm4 will",
    "start": "1017279",
    "end": "1022480"
  },
  {
    "text": "be the first release where we break anything uh but what this meant for us practically during this sort of history",
    "start": "1022480",
    "end": "1027760"
  },
  {
    "text": "of helm thing is that we we did have to kind of buffer up a lot of changes and wait for quite a",
    "start": "1027760",
    "end": "1032798"
  },
  {
    "text": "while and then uh you know adam who ran the uh the helm3 development cycle said",
    "start": "1032799",
    "end": "1038079"
  },
  {
    "text": "okay here we go everybody get ready and we started doing patch after patch after patch breaking change after breaking",
    "start": "1038079",
    "end": "1043600"
  },
  {
    "text": "change in the helm3 branch and then eventually got that stable and got that released so that's kind of the story of how we",
    "start": "1043600",
    "end": "1049520"
  },
  {
    "text": "got from point a to point b you'll hear me mention here and there helm four helm four is really just an",
    "start": "1049520",
    "end": "1054640"
  },
  {
    "text": "idea at this point there's no ongoing development for helm4 um so so don't you know don't worry that",
    "start": "1054640",
    "end": "1061120"
  },
  {
    "text": "you're gonna migrate to home three tomorrow and then have to migrate to home it's still probably a year to two years",
    "start": "1061120",
    "end": "1066400"
  },
  {
    "text": "out but we are trying to open up the opportunity now for the developers who have been",
    "start": "1066400",
    "end": "1071600"
  },
  {
    "text": "currently maintaining home 2 and home 3 to be able to work on home 3 and start buffering stuff up for that home 4",
    "start": "1071600",
    "end": "1076960"
  },
  {
    "text": "bucket all right so that should give you a good background of of uh where we've been with helm and",
    "start": "1076960",
    "end": "1082720"
  },
  {
    "text": "and what it's done but i want to pivot now and talk for a little while about tiller uh and i so i like to call this",
    "start": "1082720",
    "end": "1089440"
  },
  {
    "text": "section the life and death of tiller and overly dramatic telling of the story um so it all starts in that january",
    "start": "1089440",
    "end": "1095760"
  },
  {
    "text": "meeting at google uh so we were at the google campus having a great time um we took a break uh at lunchtime went",
    "start": "1095760",
    "end": "1103600"
  },
  {
    "text": "to the cafeteria all together we're standing in line you know in the in the uh the the you know scoop food on your",
    "start": "1103600",
    "end": "1110640"
  },
  {
    "text": "plate section of the google cafeteria and just kind of chatting and i'm chatting with one of the engineers there",
    "start": "1110640",
    "end": "1116160"
  },
  {
    "text": "and he says you know i really like working on kubernetes this has been great but i'm a little concerned because uh",
    "start": "1116160",
    "end": "1122320"
  },
  {
    "text": "you know some people seem to think that you know we're going to be talking about thousand node kubernetes clusters with",
    "start": "1122320",
    "end": "1128000"
  },
  {
    "text": "lots of different development teams working together but you know look at kubernetes we're not going to be able to reach that",
    "start": "1128000",
    "end": "1134160"
  },
  {
    "text": "uh he said you know kubernetes is never going to be a multi-tenant system it's always going to be the case that",
    "start": "1134160",
    "end": "1139919"
  },
  {
    "text": "a development team stands up their own kubernetes cluster we have three maybe five tops maybe 15 nodes on this thing and",
    "start": "1139919",
    "end": "1147760"
  },
  {
    "text": "and you know each team has their own um and and you know so that became the",
    "start": "1147760",
    "end": "1153440"
  },
  {
    "text": "topic of lunch and so we discussed this thing the whole the whole of lunch i think uh you know how much can you stretch kubernetes was",
    "start": "1153440",
    "end": "1160000"
  },
  {
    "text": "it foolish to try and do thousand node clusters with no role-based access control and",
    "start": "1160000",
    "end": "1165120"
  },
  {
    "text": "and no real strong notion of authentication how are we going to do any of this stuff anyway and kind of at the end of the lunch we",
    "start": "1165120",
    "end": "1172640"
  },
  {
    "text": "had kind of basically convinced ourselves that yes indeed kubernetes was going to be a single tenant system and",
    "start": "1172640",
    "end": "1177919"
  },
  {
    "text": "small teams would work on it and every team would have their own cluster and that actually became sort of a maybe",
    "start": "1177919",
    "end": "1184799"
  },
  {
    "text": "maybe from that point on unspoken but sort of a driving principle for how we developed home from then on out now keep",
    "start": "1184799",
    "end": "1191039"
  },
  {
    "text": "in mind at that point there really weren't any our back uh mechanisms in kubernetes and",
    "start": "1191039",
    "end": "1196559"
  },
  {
    "text": "admission controllers were not a thing uh deployments weren't even a thing at",
    "start": "1196559",
    "end": "1202400"
  },
  {
    "text": "that point crds were not a thing at that point so to some to some extent any kind anytime you jump in early you make some",
    "start": "1202400",
    "end": "1209200"
  },
  {
    "text": "guesses in this case we were not we were not minimally wrong we were not kind of",
    "start": "1209200",
    "end": "1215039"
  },
  {
    "text": "wrong we were actually really really wrong right i routinely see clusters with",
    "start": "1215039",
    "end": "1220240"
  },
  {
    "text": "hundreds or thousands of nodes and with dozens of development teams or even hundreds of different teams with hundreds of different applications running inside of",
    "start": "1220240",
    "end": "1226880"
  },
  {
    "text": "a single cluster and it works and it works really well and it's turned out to be one of kubernetes strengths",
    "start": "1226880",
    "end": "1233120"
  },
  {
    "text": "but keep in mind this little assumption we made that might not have been right as i start to walk through the",
    "start": "1233120",
    "end": "1238400"
  },
  {
    "text": "architecture that we're going to talk about because that one that one",
    "start": "1238400",
    "end": "1244400"
  },
  {
    "start": "1239000",
    "end": "1239000"
  },
  {
    "text": "flawed judgment i think changed the architecture that we did and is what ultimately caused the",
    "start": "1244400",
    "end": "1250159"
  },
  {
    "text": "biggest change from helm 2 to helm 3 as we corrected for that so this is how helm classic worked helm",
    "start": "1250159",
    "end": "1256640"
  },
  {
    "text": "classic basically was a manifest uploader if we were really honest i mean package manager is a very generous way to say",
    "start": "1256640",
    "end": "1263280"
  },
  {
    "text": "what what helm classic did um it for the most part had a chart.yaml and a bunch of",
    "start": "1263280",
    "end": "1268559"
  },
  {
    "text": "static yaml files that were just kubernetes resources and it could bundle them up together",
    "start": "1268559",
    "end": "1273600"
  },
  {
    "text": "send them all to the kubernetes api server at the same time wait for the api server to say okay you're good and then",
    "start": "1273600",
    "end": "1280080"
  },
  {
    "text": "uh report to the user that it was that it was working that was about all helm classic did",
    "start": "1280080",
    "end": "1285679"
  },
  {
    "text": "uh we relied heavily on conventions for labels and things like that for people to be able to figure out what they just",
    "start": "1285679",
    "end": "1291520"
  },
  {
    "text": "installed and we didn't really have a strong upgrade story or a strong rollback story",
    "start": "1291520",
    "end": "1296799"
  },
  {
    "text": "or even a team management story for helm classic but again it was 0.13 so uh you know",
    "start": "1296799",
    "end": "1303440"
  },
  {
    "text": "it's fairly early on one of the things that a lot of people have not taken a look at is uh is what deployment manager did and how",
    "start": "1303440",
    "end": "1310799"
  },
  {
    "text": "so we were taking that model that helm classic model and combining it with the deployment manager model and that's where helm2 came from",
    "start": "1310799",
    "end": "1317600"
  },
  {
    "text": "the deployment manager model and i'm got to be honest i don't actually remember the model",
    "start": "1317600",
    "end": "1323600"
  },
  {
    "text": "and all the names correctly so i've kind of fudged some of the names here i think the client was named kdm uh",
    "start": "1323600",
    "end": "1330799"
  },
  {
    "text": "and i i i can't remember what we called packages in deployment manager they might have been resource bundles or",
    "start": "1330799",
    "end": "1336320"
  },
  {
    "text": "templates or something like that but i just left chart here for the sake of continuity um but essentially the way it worked was",
    "start": "1336320",
    "end": "1343280"
  },
  {
    "text": "the client would would upload a package to a server that was running inside of a",
    "start": "1343280",
    "end": "1349760"
  },
  {
    "text": "kubernetes cluster and that server was called deployment manager it was a json api server uh we'd send data up to it we'd send you",
    "start": "1349760",
    "end": "1357360"
  },
  {
    "text": "know heart we'll keep calling it a chart and deployment manager would unpack this chart",
    "start": "1357360",
    "end": "1362720"
  },
  {
    "text": "and it would send the templates over a network connection to another service running inside of the cluster that was",
    "start": "1362720",
    "end": "1368000"
  },
  {
    "text": "called expandybird now spandybird was sort of like a multiple template renderer it had it",
    "start": "1368000",
    "end": "1373440"
  },
  {
    "text": "could render python code it could render um",
    "start": "1373440",
    "end": "1379440"
  },
  {
    "text": "some template languages one of the one of the python template languages i forget which one it was",
    "start": "1379520",
    "end": "1384559"
  },
  {
    "text": "uh it could it had experimental support for jsonnet uh but it was basically like its job was",
    "start": "1384559",
    "end": "1390559"
  },
  {
    "text": "to expand templates and then return back yaml and then dm would store the yaml in mongodb and then",
    "start": "1390559",
    "end": "1397039"
  },
  {
    "text": "upload a copy of the yaml manifest to kubernetes wait for them to come back successful and then return to the client",
    "start": "1397039",
    "end": "1403200"
  },
  {
    "text": "that it had deployed so this should look a little bit familiar because uh parts of this",
    "start": "1403200",
    "end": "1408240"
  },
  {
    "text": "you know made their way into helm side note here on occasion people ask us to",
    "start": "1408240",
    "end": "1415440"
  },
  {
    "text": "include support for more template languages and helm and the main reason we did we don't and",
    "start": "1415440",
    "end": "1421039"
  },
  {
    "text": "we've reconsidered this multiple times but we still kind of stand fast on this one is because our experiences expandibird",
    "start": "1421039",
    "end": "1427279"
  },
  {
    "text": "uh indicated that it would get very very complicated because what we were experiencing was",
    "start": "1427279",
    "end": "1432559"
  },
  {
    "text": "a single render right a single chart uh might pull in you know some some python",
    "start": "1432559",
    "end": "1439200"
  },
  {
    "text": "code some you know fairly trivial templates and some json it and then it would render something and",
    "start": "1439200",
    "end": "1444320"
  },
  {
    "text": "it'd stick it in the cluster and you'd go and look at the cluster and go well where did this thing come from and then you'd have to",
    "start": "1444320",
    "end": "1450000"
  },
  {
    "text": "sort through a combination of python code and uh templates curly braces templates and",
    "start": "1450000",
    "end": "1456400"
  },
  {
    "text": "jsonnet and try and figure out how they interacted together in such a way that they produced that thing and then you know we were talking",
    "start": "1456400",
    "end": "1463279"
  },
  {
    "text": "about adding more languages we were talking about adding go templates and other languages and we realized that this was going to be such",
    "start": "1463279",
    "end": "1468480"
  },
  {
    "text": "a mess that it would be that a sizable chart could be practically impossible to debug",
    "start": "1468480",
    "end": "1475120"
  },
  {
    "text": "so one of the early decisions we made was that we we did not think it was right by the",
    "start": "1475120",
    "end": "1480880"
  },
  {
    "text": "user or the chart developer for us to support multiple template languages even though that meant that some people",
    "start": "1480880",
    "end": "1486799"
  },
  {
    "text": "would have to learn a new template language it prevented the case where all people would have to learn nine or ten different languages in order to just",
    "start": "1486799",
    "end": "1493919"
  },
  {
    "text": "read a chart or look at their install and know what happened but so we took this deployment manager",
    "start": "1493919",
    "end": "1499039"
  },
  {
    "text": "model and that earlier helm classic model and we sort of combined them and we decided to reduce the complexity",
    "start": "1499039",
    "end": "1505440"
  },
  {
    "text": "and deployment manager and increase the complexity from helm classic and kind of meet in the middle so what was the dm server got replaced",
    "start": "1505440",
    "end": "1512640"
  },
  {
    "text": "with what was tiller where tiller's job was to sit as a grpc server the helm",
    "start": "1512640",
    "end": "1518400"
  },
  {
    "text": "client remained relatively straightforward it would basically take charts and values and upload them to",
    "start": "1518400",
    "end": "1523679"
  },
  {
    "text": "tiller tiller would then render the templates itself uh perform any additional",
    "start": "1523679",
    "end": "1529200"
  },
  {
    "text": "operations load that stuff into the kubernetes api server store a release record of that release inside of",
    "start": "1529200",
    "end": "1534640"
  },
  {
    "text": "kubernetes and then return back to the user and say okay i i deployed your thing uh and this worked well because it",
    "start": "1534640",
    "end": "1541039"
  },
  {
    "text": "introduced for us overhelm classic the ability to do upgrades and then rollbacks but it was still simpler than the",
    "start": "1541039",
    "end": "1546559"
  },
  {
    "text": "deployment manager model which which was definitely on the on the",
    "start": "1546559",
    "end": "1551679"
  },
  {
    "text": "complex side and difficult to operate so this seemed to work well and it met",
    "start": "1551679",
    "end": "1557600"
  },
  {
    "text": "many of our obligations because we had one single tiller that was almost like a root user and",
    "start": "1557600",
    "end": "1562880"
  },
  {
    "text": "and since we were working for you know single tendency clusters it was a great solution for us and we really liked that",
    "start": "1562880",
    "end": "1569919"
  },
  {
    "text": "but over time we realized and i'll talk about this you know coming up soon that tiller was not holding up to",
    "start": "1569919",
    "end": "1575760"
  },
  {
    "text": "expectation in fact where we had assumed kubernetes would go one direction kubernetes really",
    "start": "1575760",
    "end": "1581440"
  },
  {
    "text": "turned a very different direction and because of that we had to adjust course and uh we",
    "start": "1581440",
    "end": "1587200"
  },
  {
    "text": "again waited for a while but when we did finally do this with helm3 what we decided was",
    "start": "1587200",
    "end": "1592320"
  },
  {
    "text": "we needed to remove tiller the tiller was actually had become more of a hindrance than a help",
    "start": "1592320",
    "end": "1598159"
  },
  {
    "text": "so really in effect we rolled back almost all the way to the helm classic model",
    "start": "1598159",
    "end": "1603279"
  },
  {
    "text": "uh but we there's one notable change and this is the change that we will spend the",
    "start": "1603279",
    "end": "1608720"
  },
  {
    "text": "uh a good chunk of our time today talking about and that is that we kept the notion of storing releases inside of",
    "start": "1608720",
    "end": "1614720"
  },
  {
    "text": "kubernetes we just took tiller out of the equation and tiller was no longer the sole authority of those releases",
    "start": "1614720",
    "end": "1620720"
  },
  {
    "text": "uh but but we kept the object the release objects there we had to tune them up and that's what causes this whole",
    "start": "1620720",
    "end": "1626240"
  },
  {
    "text": "migration thing is that we made some changes to the release object uh so we'll talk about that in just a moment but before",
    "start": "1626240",
    "end": "1632400"
  },
  {
    "text": "going there i wanted to talk about why we removed tiller uh there have been uh speculations",
    "start": "1632400",
    "end": "1638799"
  },
  {
    "text": "a lot of loud opinions and stuff like that but uh in all honesty it boils down to one thing",
    "start": "1638799",
    "end": "1644799"
  },
  {
    "text": "uh it boiled down to authentication and authorization uh so people will say oh well you know",
    "start": "1644799",
    "end": "1649840"
  },
  {
    "start": "1647000",
    "end": "1647000"
  },
  {
    "text": "tiller was a security nightmare or tiller was a stability nightmare or i had to run nine of these things in every cluster or",
    "start": "1649840",
    "end": "1655760"
  },
  {
    "text": "64 of these in every cluster and those are the superficial problems but the core",
    "start": "1655760",
    "end": "1661360"
  },
  {
    "text": "cause of all of this was actually we hit a boundary with authentication and authorization and we could not figure",
    "start": "1661360",
    "end": "1667039"
  },
  {
    "text": "out a way to solve it excuse me so what was what was the",
    "start": "1667039",
    "end": "1673520"
  },
  {
    "text": "boundary well here's how it goes um in helm2 uh i'm i'm using i'm you know i'm matt",
    "start": "1673520",
    "end": "1681440"
  },
  {
    "text": "right my username's matt b martin is martin h right so we're both working together on a",
    "start": "1681440",
    "end": "1686640"
  },
  {
    "text": "cluster hypothetically and uh and i log in to kubernetes using coop cto",
    "start": "1686640",
    "end": "1692240"
  },
  {
    "text": "right what does it do it authenticates me against the kubernetes api and then grants me permissions based on",
    "start": "1692240",
    "end": "1697440"
  },
  {
    "text": "what kubernetes knows about my roles on the cluster now with tiller i could use those",
    "start": "1697440",
    "end": "1703039"
  },
  {
    "text": "credentials to tell kubernetes that i was allowed to proxy through the kubernetes api server",
    "start": "1703039",
    "end": "1708720"
  },
  {
    "text": "into tiller but once i got to tiller i could do whatever tiller could do",
    "start": "1708720",
    "end": "1714159"
  },
  {
    "text": "right so if tiller had cluster-wide access to do anything then i could upload a chart and say hey",
    "start": "1714159",
    "end": "1720640"
  },
  {
    "text": "put this install this wordpress thing into dev which i have permissions to but if tiller had permissions to install",
    "start": "1720640",
    "end": "1726640"
  },
  {
    "text": "into martin's staging environment then i could say hey put this in martin's staging environment",
    "start": "1726640",
    "end": "1731679"
  },
  {
    "text": "and tiller could do that even though i personally would not have had permissions to log in directly to martin's staging",
    "start": "1731679",
    "end": "1737440"
  },
  {
    "text": "environment that's not necessarily a it's not a bad feature if you're working on a small",
    "start": "1737440",
    "end": "1743440"
  },
  {
    "text": "team of users and and the trust model is that everybody on the team is trusted but as soon as you get into multi-tenancy situations that's",
    "start": "1743440",
    "end": "1750399"
  },
  {
    "text": "a bad security model to have right and so we tried to fix it",
    "start": "1750399",
    "end": "1756399"
  },
  {
    "text": "and what we wanted to do was to say okay i want to tell tiller hey i'm i'm the kubernetes user matt b and",
    "start": "1756399",
    "end": "1763360"
  },
  {
    "text": "have tiller say okay well let me see what your kubernetes responsibilities and roles and permissions are and then i will do this",
    "start": "1763360",
    "end": "1769840"
  },
  {
    "text": "act on on your behalf so you won't be able to install it into martin's staging",
    "start": "1769840",
    "end": "1775279"
  },
  {
    "text": "namespace because you don't have permissions there you'll only be able to install it into your area",
    "start": "1775279",
    "end": "1781840"
  },
  {
    "text": "we could not find a way to do this we tried all kinds of things we had one branch that lived on the",
    "start": "1781919",
    "end": "1788000"
  },
  {
    "text": "helm2 for i think six months where we were trying to figure out you know ways to finagle around and embed stuff",
    "start": "1788000",
    "end": "1795279"
  },
  {
    "text": "in grpc headers that would authorize users for things there was no way for a pod to contact the kubernetes",
    "start": "1795279",
    "end": "1801840"
  },
  {
    "text": "api on behalf of another user it was always only itself and we we tried and tried we",
    "start": "1801840",
    "end": "1807679"
  },
  {
    "text": "tried probably near a dozen different ways some of which were you know ridiculous at face value and",
    "start": "1807679",
    "end": "1815039"
  },
  {
    "text": "others of which you know we worked and worked and worked and then ultimately decided they couldn't uh couldn't function the way we needed",
    "start": "1815039",
    "end": "1821279"
  },
  {
    "text": "so we ended up with a choice we had two different models to make this work model one we could take tiller and we",
    "start": "1821279",
    "end": "1828000"
  },
  {
    "text": "could write our own authentication and authorization system and uh users could set up their own",
    "start": "1828000",
    "end": "1833360"
  },
  {
    "text": "permissions and we could have a helm tiller administrator who managed the user and permissions database",
    "start": "1833360",
    "end": "1839120"
  },
  {
    "text": "and that administrator would also manage the permissions on the kubernetes cluster and would have to manually you know keep those in sync or we could",
    "start": "1839120",
    "end": "1846720"
  },
  {
    "text": "remove tiller altogether and use kubernetes itself for the authentication authorization and have it all be",
    "start": "1846720",
    "end": "1852399"
  },
  {
    "text": "negotiated between the client and and the kubernetes api server so the first",
    "start": "1852399",
    "end": "1858320"
  },
  {
    "text": "one obviously would have been very very complicated right we would have introduced",
    "start": "1858320",
    "end": "1863679"
  },
  {
    "text": "new roles right as you need a tiller administrator uh it would have introduced massive amounts of new code and it would have",
    "start": "1863679",
    "end": "1870000"
  },
  {
    "text": "introduced the problem that we would have had to manually synchronize the permissions you had in kubernetes with the permissions tiller gave you",
    "start": "1870000",
    "end": "1876320"
  },
  {
    "text": "and we decided that was a non-starter uh and so we began the process of",
    "start": "1876320",
    "end": "1881519"
  },
  {
    "text": "tearing out tiller so in the new model helm 3 connects to the api server as",
    "start": "1881519",
    "end": "1887679"
  },
  {
    "text": "matt b or as martin h and when i connect to the kubernetes server the kubernetes",
    "start": "1887679",
    "end": "1892960"
  },
  {
    "text": "server says okay you only have access to your dev name space martin has access to staging and dev but you don't so any time you try and",
    "start": "1892960",
    "end": "1900000"
  },
  {
    "text": "install something it can only go into dev and you can only install these particular things so use the kubernetes",
    "start": "1900000",
    "end": "1905919"
  },
  {
    "text": "rbac system in helm 3 directly by contacting and negotiating that directly with the kubernetes api",
    "start": "1905919",
    "end": "1911919"
  },
  {
    "text": "server instead of having tiller as a as a mid person that had to receive everything and then",
    "start": "1911919",
    "end": "1918080"
  },
  {
    "text": "act on behalf of someone else so i'm acting on my own behalf instead of relying on tiller and that's how the new authentication",
    "start": "1918080",
    "end": "1924799"
  },
  {
    "text": "and authorization model works and it's proven to be i think the right step forward i think we did the right",
    "start": "1924799",
    "end": "1930480"
  },
  {
    "text": "thing in adjusting course uh kubernetes is indeed a multi-tenant environment and in order to facilitate that we",
    "start": "1930480",
    "end": "1937679"
  },
  {
    "text": "needed to integrate as fully and completely with the kubernetes way of doing things that we could",
    "start": "1937679",
    "end": "1943360"
  },
  {
    "text": "now unfortunately the upshot of a lot of that any kind of pivot of that size is that it's going to require some strain as we",
    "start": "1943360",
    "end": "1950720"
  },
  {
    "text": "migrate from one to the other and that's you know what we're here today to talk about right and nowhere did this",
    "start": "1950720",
    "end": "1956240"
  },
  {
    "text": "issue show up more clearly than in the concept of a release so releases have tended have turned out",
    "start": "1956240",
    "end": "1963279"
  },
  {
    "start": "1963000",
    "end": "1963000"
  },
  {
    "text": "to be the biggest impact on the helm23 migration uh because we had to change the way this",
    "start": "1963279",
    "end": "1970000"
  },
  {
    "text": "system worked in order to follow the the new tiller structure i think the introduction of releases",
    "start": "1970000",
    "end": "1977519"
  },
  {
    "text": "which came about in helm2 wasn't present in either deployment manager or helm classic i think that was",
    "start": "1977519",
    "end": "1982960"
  },
  {
    "text": "probably the single best design outcome of helm uh so what's a release well a release is",
    "start": "1982960",
    "end": "1989440"
  },
  {
    "text": "a record of an installation that's a living record that uh that updates each time uh each time",
    "start": "1989440",
    "end": "1996960"
  },
  {
    "text": "an installation is updated so here let me give you a practical example so martin and i are working on the same cluster",
    "start": "1996960",
    "end": "2002640"
  },
  {
    "text": "and we both want to install our we're both working on separate projects but we both want to use say drupal to have our",
    "start": "2002640",
    "end": "2009679"
  },
  {
    "text": "internal website for these things so i want my drupal instance martin wants his drupal instance",
    "start": "2009679",
    "end": "2015360"
  },
  {
    "text": "uh so we should each be able to install separate versions of drupal his for his stuff mine for my stuff",
    "start": "2015360",
    "end": "2021440"
  },
  {
    "text": "and then when i upgrade mine it shouldn't impact his and when he changes the values configuration",
    "start": "2021440",
    "end": "2026559"
  },
  {
    "text": "on his it shouldn't impact mine so we need to track two separate installations of the same software",
    "start": "2026559",
    "end": "2032960"
  },
  {
    "text": "and then as i upgrade mine we need to track how my version was upgraded",
    "start": "2032960",
    "end": "2038000"
  },
  {
    "text": "and what changes happen between the last time and this time that's how the release system in helm works that's the problem it's",
    "start": "2038000",
    "end": "2044559"
  },
  {
    "text": "designed to solve tracking those releases over those installations over time so i create a new release when i install",
    "start": "2044559",
    "end": "2051040"
  },
  {
    "text": "it i create a v2 release when i upgrade it the next time then a v3 when i upgrade it after that",
    "start": "2051040",
    "end": "2056158"
  },
  {
    "text": "and i can roll back to v2 and things like that the way that it worked in helm2",
    "start": "2056159",
    "end": "2064000"
  },
  {
    "text": "was that uh i would send for my home client i would send the",
    "start": "2064000",
    "end": "2069280"
  },
  {
    "text": "chart and the uh and my values files up to tiller but tiller would manage all the release stuff for me the",
    "start": "2069280",
    "end": "2076720"
  },
  {
    "text": "client could be basically blissfully unaware of how tiller was managing all of the releases now behind the scenes",
    "start": "2076720",
    "end": "2082800"
  },
  {
    "text": "tiller was storing these things inside of the kubernetes cluster and was managing the versioning and",
    "start": "2082800",
    "end": "2087919"
  },
  {
    "text": "checking for race conditions and doing all kinds of things like that uh but when we did helm3 we had to",
    "start": "2087919",
    "end": "2094079"
  },
  {
    "text": "figure out a way to go to this architecture where helm was managing the releases from the client",
    "start": "2094079",
    "end": "2099520"
  },
  {
    "text": "side without anything necessarily running inside of the server to manage the state for us so that was a",
    "start": "2099520",
    "end": "2107119"
  },
  {
    "text": "little bit tricky and the number one problem we wanted to solve is the problem that we we call the",
    "start": "2107119",
    "end": "2112240"
  },
  {
    "text": "friday release problem and this is the one we needed to make sure that we nailed if we were going to make helmet 3 work",
    "start": "2112240",
    "end": "2118160"
  },
  {
    "start": "2116000",
    "end": "2116000"
  },
  {
    "text": "i'm sure so this is just to be clear definitely not based on personal experience i've definitely",
    "start": "2118160",
    "end": "2123599"
  },
  {
    "text": "never had this happen to me i'm sure all of you are saying the same thing you have never had this particular incident uh occur in",
    "start": "2123599",
    "end": "2130160"
  },
  {
    "text": "your organization but imagine hypothetically we had this case where you know your your your colleague uh you know",
    "start": "2130160",
    "end": "2138079"
  },
  {
    "text": "sam has is getting ready for a vacation now sam's got some major deadlines sam's got",
    "start": "2138079",
    "end": "2143280"
  },
  {
    "text": "to get this thing out the door right away works and works and works and works on it it's you know getting behind but they",
    "start": "2143280",
    "end": "2149359"
  },
  {
    "text": "think they can get it out just in time it's 4 56 on a friday they got to leave",
    "start": "2149359",
    "end": "2154400"
  },
  {
    "text": "work and make their way to the airport and catch their plane they push that release out at 4 56 they",
    "start": "2154400",
    "end": "2159440"
  },
  {
    "text": "take off and they're gone for a couple of weeks so you're there you know wrapping up for the end of the day looking forward to",
    "start": "2159440",
    "end": "2165680"
  },
  {
    "text": "the weekend and that pizza party you're going to this evening when all of a sudden the cluster you",
    "start": "2165680",
    "end": "2171200"
  },
  {
    "text": "know catches fire the release that sam did uh broke and now you've got to fix it because sam",
    "start": "2171200",
    "end": "2177280"
  },
  {
    "text": "is gone and incommunicado for some amount of time and so you're looking at everything",
    "start": "2177280",
    "end": "2182800"
  },
  {
    "text": "going well what did sam do i need to figure out what broke how it",
    "start": "2182800",
    "end": "2187839"
  },
  {
    "text": "broke and how i can fix it so with helm classic there was no",
    "start": "2187839",
    "end": "2192960"
  },
  {
    "text": "workflow at all for this scenario right basically you'd have to find sam's workstation",
    "start": "2192960",
    "end": "2198240"
  },
  {
    "text": "log in and see what sam did from sam's point of view because there was no record whatsoever",
    "start": "2198240",
    "end": "2203280"
  },
  {
    "text": "in helm2 then you know you could contact tiller and say okay show me what values were uploaded",
    "start": "2203280",
    "end": "2208720"
  },
  {
    "text": "uh show me what what chart was used you know show me what the rendered version of the",
    "start": "2208720",
    "end": "2214240"
  },
  {
    "text": "values was um we needed to preserve that particular behavior but we needed to do it without tiller",
    "start": "2214240",
    "end": "2220480"
  },
  {
    "text": "which meant our release record had to be robust enough that it could handle that particular scenario but it had to be able to do it",
    "start": "2220480",
    "end": "2228000"
  },
  {
    "text": "without introducing the race condition that happens when say martin and i are working on the same",
    "start": "2228000",
    "end": "2233280"
  },
  {
    "text": "particular release and we we can't risk that if we accidentally both release very close to",
    "start": "2233280",
    "end": "2239599"
  },
  {
    "text": "each other we corrupt the kubernetes installation or worse we corrupt the release record so we have kind of the race condition",
    "start": "2239599",
    "end": "2245680"
  },
  {
    "text": "thing going on at one side on one side while we were dealing with the friday release problem on the other",
    "start": "2245680",
    "end": "2251040"
  },
  {
    "text": "and helm three had to solve all of that while recognizing that there was no central authority no tiller that was in the middle saying",
    "start": "2251040",
    "end": "2257760"
  },
  {
    "text": "okay uh hang on martin matt's release is going out okay matt's release is out your turn martin and",
    "start": "2257760",
    "end": "2263200"
  },
  {
    "text": "stuff like that so that necessitated making a number of changes to the release to the release object but along with",
    "start": "2263200",
    "end": "2270480"
  },
  {
    "start": "2267000",
    "end": "2267000"
  },
  {
    "text": "that like i said we buffered up a lot of changes right um we we decided to make some other changes to the way releases works so",
    "start": "2270480",
    "end": "2277359"
  },
  {
    "text": "that we could correct a number of other things we did so in helm2 releases were all stored together",
    "start": "2277359",
    "end": "2283680"
  },
  {
    "text": "so uh you know martin installs into his staging thing and i install into my dev",
    "start": "2283680",
    "end": "2289119"
  },
  {
    "text": "dev name space but both of our release records go in the same particular the same place inside of kubernetes by",
    "start": "2289119",
    "end": "2294560"
  },
  {
    "text": "default we were putting them in kube's system a lot of people are like why would you have done that well again let's rewind",
    "start": "2294560",
    "end": "2300480"
  },
  {
    "text": "to the core assumption we made that turned out to be false it was we thought we were building a single tenant system so",
    "start": "2300480",
    "end": "2306320"
  },
  {
    "text": "it totally made sense to put stuff in coop's system because this coupe system was where you put stuff you didn't want users to look at",
    "start": "2306320",
    "end": "2312560"
  },
  {
    "text": "and uh we we never thought about the fact that when you had 100 different development teams all using the same",
    "start": "2312560",
    "end": "2317599"
  },
  {
    "text": "thing you could end up with tens of thousands of of release records inside of coop system uh",
    "start": "2317599",
    "end": "2323040"
  },
  {
    "text": "so again you know it was a mistake made based on our faulty assumption but even even though you can change",
    "start": "2323040",
    "end": "2329200"
  },
  {
    "text": "where they're stored when you change them it still is the case that tiller would store all the release records together",
    "start": "2329200",
    "end": "2335200"
  },
  {
    "text": "regardless of where what namespace they were put into um that introduced a number of",
    "start": "2335200",
    "end": "2340800"
  },
  {
    "text": "management problems particularly when we took tiller out of the equation because tiller was no longer we didn't want to have to give everybody",
    "start": "2340800",
    "end": "2347520"
  },
  {
    "text": "access to the same namespace so that they could store all of their releases in there and then assumed that these development teams",
    "start": "2347520",
    "end": "2352880"
  },
  {
    "text": "wouldn't accidentally stomp on each other's releases so we needed to fix that um the the",
    "start": "2352880",
    "end": "2358720"
  },
  {
    "text": "the helm 2 era fix was to just tell everybody to run lots and lots of instances of tiller",
    "start": "2358720",
    "end": "2363760"
  },
  {
    "text": "but that seemed like not a good solution in the long run and so in helm3 we just changed it so in helm3 now",
    "start": "2363760",
    "end": "2372079"
  },
  {
    "start": "2371000",
    "end": "2371000"
  },
  {
    "text": "the release records are stored side by side with the releases that they describe so when i install wordpress into my dev",
    "start": "2372079",
    "end": "2379920"
  },
  {
    "text": "namespace the release records instead of being written to coop's system or somewhere else the release records are also",
    "start": "2379920",
    "end": "2386400"
  },
  {
    "text": "written into the same name space they're also written into the dev name space and when martin",
    "start": "2386400",
    "end": "2392160"
  },
  {
    "text": "installs his version into his staging environment his release records get written into the staging",
    "start": "2392160",
    "end": "2397440"
  },
  {
    "text": "name space now this has turned out to actually have some great uh benefits to it first of",
    "start": "2397440",
    "end": "2402640"
  },
  {
    "text": "all um you know you can use our backs and things like that to limit access so we didn't worry about",
    "start": "2402640",
    "end": "2408400"
  },
  {
    "text": "necessarily polluting that that name space with things that uh that users could uh change around when",
    "start": "2408400",
    "end": "2413839"
  },
  {
    "text": "they shouldn't uh but moreover uh say you say you uh you know you get you get that friday",
    "start": "2413839",
    "end": "2421680"
  },
  {
    "text": "situation right and um and you have to drop into a name space you're unfamiliar with and you do you know coop ctl get pods",
    "start": "2421680",
    "end": "2429119"
  },
  {
    "text": "and you see a bazillion things running and you do ctl get secrets and you see another bunch of things running and you're going what are all these",
    "start": "2429119",
    "end": "2435280"
  },
  {
    "text": "things and how do they tie together well now you can just point helm three at that name space and say",
    "start": "2435280",
    "end": "2440400"
  },
  {
    "text": "tell me all the things that were released into this namespace you know ls this namespace and it'll say okay",
    "start": "2440400",
    "end": "2445920"
  },
  {
    "text": "well you know here's here's a drupal instance and here's a chart museum instance and here's you know three",
    "start": "2445920",
    "end": "2451040"
  },
  {
    "text": "ha proxy instances that's what you're seeing in this cluster so it really localized the management of",
    "start": "2451040",
    "end": "2457040"
  },
  {
    "text": "your releases into just one namespace which again really fits the multi-tenant model that we've seen kubernetes mature",
    "start": "2457040",
    "end": "2463359"
  },
  {
    "text": "into uh so it's been great we really like that um the really kind of the only caveat we had to give people in this",
    "start": "2463359",
    "end": "2469599"
  },
  {
    "text": "case was just don't create multi-tenant name spaces you don't want all of your teams working on the default name space",
    "start": "2469599",
    "end": "2475760"
  },
  {
    "text": "you want to sort of segment things out and then the the built-in security features of kubernetes and the our back",
    "start": "2475760",
    "end": "2481359"
  },
  {
    "text": "system will help you protect each name space and grant people access to just the releases the home releases that they're",
    "start": "2481359",
    "end": "2487440"
  },
  {
    "text": "supposed to be able to see so we're actually really excited about that particular change in helm3",
    "start": "2487440",
    "end": "2493200"
  },
  {
    "start": "2491000",
    "end": "2491000"
  },
  {
    "text": "because it really opened up a security model that better fit with the way kubernetes uh now works right the way kubernetes had",
    "start": "2493200",
    "end": "2500079"
  },
  {
    "text": "matured its security model um then we made one more change uh to releases that's a notable change",
    "start": "2500079",
    "end": "2507359"
  },
  {
    "text": "um when we wrote helm2 we stored our releases inside of config",
    "start": "2507359",
    "end": "2513200"
  },
  {
    "text": "maps why did we do that well there were really two reasons to store them in config maps at that point",
    "start": "2513200",
    "end": "2519760"
  },
  {
    "text": "reason number one was that config maps were just ever so slightly smaller than",
    "start": "2519760",
    "end": "2526000"
  },
  {
    "text": "secrets we had one less base 64 pass over them ever so slightly smaller um not",
    "start": "2526000",
    "end": "2532480"
  },
  {
    "text": "not actually a very good reason but the second reason is even worse uh we used config maps because config",
    "start": "2532480",
    "end": "2537839"
  },
  {
    "text": "maps were new and shiny and we were like hey new and shiny this must be the way forward secrets are old they're going to",
    "start": "2537839",
    "end": "2543280"
  },
  {
    "text": "go away we're going to use config maps well we're really kind of wrong on that account too um",
    "start": "2543280",
    "end": "2548480"
  },
  {
    "text": "and and you know the the excuse at the time was well a secret's not really secret at all it's just a base64 encoded",
    "start": "2548480",
    "end": "2554240"
  },
  {
    "text": "object but since then again things have changed uh the security model for kubernetes has",
    "start": "2554240",
    "end": "2559280"
  },
  {
    "text": "matured and the usage patterns for for helmand for kubernetes have changed and now we're in this situation where",
    "start": "2559280",
    "end": "2566400"
  },
  {
    "text": "it's more important to protect the information in that release uh than it is to save on size or anything else",
    "start": "2566400",
    "end": "2572400"
  },
  {
    "text": "um and and so they really ought to go in secrets and furthermore secrets and kubernetes now can be backed",
    "start": "2572400",
    "end": "2579119"
  },
  {
    "text": "by vaults and other storage systems that actually store encrypted secrets so there is actually a legitimate safety and",
    "start": "2579119",
    "end": "2585920"
  },
  {
    "text": "security story behind storing them in secrets okay so now if we add all those things",
    "start": "2585920",
    "end": "2591280"
  },
  {
    "text": "up right we've made several big changes to releases we've changed where they're stored we've",
    "start": "2591280",
    "end": "2597520"
  },
  {
    "text": "changed some of the formatting of how the how the record looks uh we've changed where the kind of object they're stored",
    "start": "2597520",
    "end": "2603760"
  },
  {
    "text": "inside of in kubernetes those are all big deals and those are all things that when we move from home to home three",
    "start": "2603760",
    "end": "2609599"
  },
  {
    "text": "they have to be renegotiated right we have to actually migrate that data from an old format in an old location",
    "start": "2609599",
    "end": "2615839"
  },
  {
    "text": "to a new format in a new location that's why secrets have been really kind of the focus of the of my discussion so far i mean",
    "start": "2615839",
    "end": "2622720"
  },
  {
    "text": "sorry secrets uh releases why releases have really been a focal point is because this is the number one thing",
    "start": "2622720",
    "end": "2629200"
  },
  {
    "text": "that uh that we have to deal with and deal with very carefully when we're doing migrations like later on in the",
    "start": "2629200",
    "end": "2634240"
  },
  {
    "text": "workshop i did want to cover one more thing as we",
    "start": "2634240",
    "end": "2640000"
  },
  {
    "text": "as we talk about the differences between helm 2 and 3. but this one will have less of an impact",
    "start": "2640000",
    "end": "2645839"
  },
  {
    "text": "than you might suppose on the migrations that we're going to do today and on your real world migrations",
    "start": "2645839",
    "end": "2651839"
  },
  {
    "text": "when we introduced telm3 we also changed the structure of the chart",
    "start": "2651839",
    "end": "2657040"
  },
  {
    "text": "it was really our biggest change ever to the chart format so again another embarrassing story um",
    "start": "2657040",
    "end": "2664319"
  },
  {
    "text": "i've been working on a book with matt farina and with josh dalitsky about helm3 uh it'll be out i think probably",
    "start": "2664319",
    "end": "2670880"
  },
  {
    "text": "december or something so we're done writing everything so have you ever worked on on the book writing process",
    "start": "2670880",
    "end": "2676240"
  },
  {
    "text": "you write all the chapters and then you send them to the publisher and the publisher gets some volunteers from the community",
    "start": "2676240",
    "end": "2681680"
  },
  {
    "text": "uh and and from the technical technical arenas to read the book and give you early uh give you an early",
    "start": "2681680",
    "end": "2688480"
  },
  {
    "text": "critique of what was clear what was unclear what wasn't covered what was over covered all that kind of stuff",
    "start": "2688480",
    "end": "2694560"
  },
  {
    "text": "and uh i was shocked when i got back a technical review that was just like",
    "start": "2694560",
    "end": "2701200"
  },
  {
    "text": "uh angry we'll just say angry and the reviewer is going hey i don't",
    "start": "2701200",
    "end": "2706560"
  },
  {
    "text": "understand this i thought you were going to write a book about helm 3 and instead you're writing a book about helm 2 and",
    "start": "2706560",
    "end": "2712480"
  },
  {
    "text": "over and over again you're talking about helm 2 and you're talking about you know how this should work and i",
    "start": "2712480",
    "end": "2717599"
  },
  {
    "text": "don't even understand why you're bothering to cover any of this because by the time the book comes out helm2 will be fully deprecated and i'm going",
    "start": "2717599",
    "end": "2724480"
  },
  {
    "text": "i only wrote one paragraph about helm2 and it was basically migrate off of helm2 by november 13th or",
    "start": "2724480",
    "end": "2730720"
  },
  {
    "text": "else then i realized to my horror that i had been talking about charts charts v2 and the reader had",
    "start": "2730720",
    "end": "2739520"
  },
  {
    "text": "thought that charts v2 were part of helm v2 and we had i this is the first time it actually",
    "start": "2739520",
    "end": "2744720"
  },
  {
    "text": "occurred to me oh no uh charts v1 worked with helm v2",
    "start": "2744720",
    "end": "2750000"
  },
  {
    "text": "charts v2 work with helm v3 charts v2 don't work with helm v2 but charts v2 and charts v1 both work",
    "start": "2750000",
    "end": "2756720"
  },
  {
    "text": "with helm v3 we created a naming nightmare and i very much apologize for not noticing",
    "start": "2756720",
    "end": "2763119"
  },
  {
    "text": "this until just recently um but the upshot of this uh is that it's going to be confusing",
    "start": "2763119",
    "end": "2770240"
  },
  {
    "text": "but uh we we introduced a new version of charts called chart v2",
    "start": "2770240",
    "end": "2775440"
  },
  {
    "start": "2772000",
    "end": "2772000"
  },
  {
    "text": "that is part of helm3 and these charts have a couple of of structural differences uh we changed",
    "start": "2775440",
    "end": "2782800"
  },
  {
    "text": "the version string from version one to version two that's always a good thing but we also we moved from the requirement cml content directly into",
    "start": "2782800",
    "end": "2789599"
  },
  {
    "text": "the charts.yaml file so there is no more requirements.yaml we added a crds",
    "start": "2789599",
    "end": "2794720"
  },
  {
    "text": "directory we added the ability to write json schemas that can be used to schematize a values.yaml file",
    "start": "2794720",
    "end": "2802160"
  },
  {
    "text": "martin wrote the support for a library chart a library chart is a a chart that doesn't actually install",
    "start": "2802160",
    "end": "2808720"
  },
  {
    "text": "anything on its own but can be used by other charts for it to provide common tooling it was a pattern that we saw emerge out",
    "start": "2808720",
    "end": "2815440"
  },
  {
    "text": "of the uh out of the community building of charts but which we thought we could sort of like further",
    "start": "2815440",
    "end": "2821040"
  },
  {
    "text": "uh canonize and then make it easier to support as a first class thing so these were some of the changes we",
    "start": "2821040",
    "end": "2826800"
  },
  {
    "text": "made in charts v2 for helm v3 i'm going to trip myself up here any moment now",
    "start": "2826800",
    "end": "2834000"
  },
  {
    "text": "it's good to take a look at these things uh you may have inadvertently run across this when you tried to install a v2",
    "start": "2834000",
    "end": "2839920"
  },
  {
    "text": "chart with v2 helm because those are incompatible um but the the best part uh",
    "start": "2839920",
    "end": "2846720"
  },
  {
    "text": "for this particular context is that you don't have to actually uh worry about the v2 versions",
    "start": "2846720",
    "end": "2853280"
  },
  {
    "text": "of charts in order to do this migration helm3 shipped with full support for the older",
    "start": "2853280",
    "end": "2858720"
  },
  {
    "text": "chart format and so as we do this migration we actually don't have to change anything about the charts the",
    "start": "2858720",
    "end": "2864160"
  },
  {
    "text": "focus is really more on the releases now as you have time and needs that are better handled by the new version of",
    "start": "2864160",
    "end": "2870559"
  },
  {
    "text": "charts you know i'd urge you to migrate because the new version does have some niceties and some uh some",
    "start": "2870559",
    "end": "2877359"
  },
  {
    "text": "forward-looking features that will make certain other things easier but there's no rush to take care of that particular",
    "start": "2877359",
    "end": "2883599"
  },
  {
    "text": "thing during your uh migration so uh i think i would like to give a chance",
    "start": "2883599",
    "end": "2889599"
  },
  {
    "text": "for people to ask questions if we feel like we have enough time for that otherwise we can go straight into martin's i'll let",
    "start": "2889599",
    "end": "2895200"
  },
  {
    "text": "bridget kind of call the shots here",
    "start": "2895200",
    "end": "2901760"
  },
  {
    "text": "oh hey we had a few questions in the chat but um i think we are",
    "start": "2901760",
    "end": "2908079"
  },
  {
    "text": "mostly up to date uh perhaps just telling folks if they are getting",
    "start": "2908079",
    "end": "2914480"
  },
  {
    "text": "started taking a look at the helm 3 book can they start there what can they start with",
    "start": "2914480",
    "end": "2921359"
  },
  {
    "text": "if they were taking a look at the helm 3 what the helm 3 book that you wrote learning how",
    "start": "2922240",
    "end": "2929839"
  },
  {
    "text": "yeah so it'll come out from o'reilly in uh in december of this year um and i i don't actually know what the",
    "start": "2930160",
    "end": "2936880"
  },
  {
    "text": "publication date is uh in the meantime uh doc's the doc site for helm you know covers really a lot of the the",
    "start": "2936880",
    "end": "2944000"
  },
  {
    "text": "same material the book will be sort of more obviously bigger narrative form with a lot of explanation of how it works",
    "start": "2944000",
    "end": "2949920"
  },
  {
    "text": "um and more more stories about mistakes we made in helm2 and how we fix",
    "start": "2949920",
    "end": "2955680"
  },
  {
    "text": "them and other things like that um but definitely for now the best best sources the helm dot sh stocks and then coming",
    "start": "2955680",
    "end": "2962800"
  },
  {
    "text": "in december you know makes makes a lovely holiday gift uh that's probably not true [Laughter]",
    "start": "2962800",
    "end": "2968720"
  },
  {
    "text": "um but uh that's when that will come out did that answer the question",
    "start": "2968720",
    "end": "2973839"
  },
  {
    "text": "i think so we had one other question in helm3 the version of the charts is v2",
    "start": "2973839",
    "end": "2981040"
  },
  {
    "text": "this is this is the thing this is i'm so sorry about this in hindsight we should have just skipped v2 of the charts",
    "start": "2981040",
    "end": "2987200"
  },
  {
    "text": "so charts really only had one version um up until home three came out you know we",
    "start": "2987200",
    "end": "2992400"
  },
  {
    "text": "we the compatibility level for charts has been very high from helm2 alpha 1",
    "start": "2992400",
    "end": "2998160"
  },
  {
    "text": "up to the present um but when we wanted to change some things in the format of the chart we",
    "start": "2998160",
    "end": "3004079"
  },
  {
    "text": "incremented the version number exactly one which brought us to charts v2 so charts v2 are for helm v3 and charts",
    "start": "3004079",
    "end": "3012160"
  },
  {
    "text": "v2 do not work in helm v2 so again it was a naming faux pas on our side um",
    "start": "3012160",
    "end": "3017839"
  },
  {
    "text": "and we'll try i guess i guess with helm4 we'll have another shot at it so we'll try new charts v4",
    "start": "3017839",
    "end": "3022960"
  },
  {
    "text": "we'll write a throwaway version of charts v3 so that we can iterate the version number and have the move in lockstep just one of",
    "start": "3022960",
    "end": "3029119"
  },
  {
    "text": "those things you learn in hindsight that's hard",
    "start": "3029119",
    "end": "3033680"
  },
  {
    "text": "all right any other questions we had one other asked is there a way to watch or observe a",
    "start": "3036720",
    "end": "3042079"
  },
  {
    "text": "release outside of helm in particular to be notified say in a controller when an upgrade or installation is happening",
    "start": "3042079",
    "end": "3050160"
  },
  {
    "text": "so that is an interesting question and i like it because um it is possible",
    "start": "3050160",
    "end": "3056640"
  },
  {
    "text": "and i don't know of anybody who's tried this before so here's what you could do um you could write a controller",
    "start": "3056640",
    "end": "3064160"
  },
  {
    "text": "that would observe the release records as they're written to kubernetes so you basically write a controller that",
    "start": "3064160",
    "end": "3070000"
  },
  {
    "text": "watches for secrets with the helm uh type attached to them and uh the the",
    "start": "3070000",
    "end": "3075200"
  },
  {
    "text": "release record actually gives a fair amount of information about the current state uh the the release is in uh and many of",
    "start": "3075200",
    "end": "3082640"
  },
  {
    "text": "these things are you don't necessarily see surfaced all the way to the client because they're so quick that the client wouldn't necessarily see them",
    "start": "3082640",
    "end": "3088960"
  },
  {
    "text": "but you'll see it go into its pre-install and then it's install and then uh it's installed status or its",
    "start": "3088960",
    "end": "3095599"
  },
  {
    "text": "upgrading status and then it's upgraded status so you could actually write a controller that would do it be a really cool",
    "start": "3095599",
    "end": "3102400"
  },
  {
    "text": "controller if anybody wants to give it a shot i think it would be really interesting because you could write some monitoring tooling that would",
    "start": "3102400",
    "end": "3109119"
  },
  {
    "text": "say hey looks like seven people are upgrading their helm charts right now and you know this one is taking a really",
    "start": "3109119",
    "end": "3114480"
  },
  {
    "text": "long time but the other four seem to be our other other four i can count other six seem to be on track",
    "start": "3114480",
    "end": "3120400"
  },
  {
    "text": "uh so yeah that's a great question great so summarizing um",
    "start": "3120400",
    "end": "3126640"
  },
  {
    "text": "if you're migrating a chart not a deployment just the chart are only a couple of changes needed like",
    "start": "3126640",
    "end": "3134079"
  },
  {
    "text": "move the requirements.yaml inside the chart.aml bump the api version anything else",
    "start": "3134079",
    "end": "3141440"
  },
  {
    "text": "and martin is answering in the chat saying you don't need to convert the chart to api version two only if you",
    "start": "3141440",
    "end": "3146640"
  },
  {
    "text": "want to use use new capability do you want to kind of clarify on that topic yeah do you want do you want to take it",
    "start": "3146640",
    "end": "3153440"
  },
  {
    "text": "matter really answer that one go ahead yeah so a um and i'm going to touch and touch on",
    "start": "3153440",
    "end": "3160720"
  },
  {
    "text": "it in a few minutes but um your api version v1 charts which were",
    "start": "3160720",
    "end": "3165920"
  },
  {
    "text": "used in lv2 and v1 um are still rendered renderable in helm v3",
    "start": "3165920",
    "end": "3173520"
  },
  {
    "text": "without any changes except around crd install hooks so what will happen in",
    "start": "3173520",
    "end": "3180240"
  },
  {
    "text": "that situation is it doesn't install the crds if you're using crd install hooks",
    "start": "3180240",
    "end": "3185280"
  },
  {
    "text": "um and also it won't create a namespace on the fly unless you give it an extra flag",
    "start": "3185280",
    "end": "3190880"
  },
  {
    "text": "but apart from that they're still renderable because we wanted to maintain that capability",
    "start": "3190880",
    "end": "3198000"
  },
  {
    "text": "uh but if you want to use new capability like um you want to use the type whether you want to specify it's an application",
    "start": "3198000",
    "end": "3204400"
  },
  {
    "text": "library charts or you want to use the new way to um",
    "start": "3204400",
    "end": "3210000"
  },
  {
    "text": "to use dependencies for example in the chat yamaha then you'd bump it up to api version v2 and you'd",
    "start": "3210000",
    "end": "3216319"
  },
  {
    "text": "make the changes there and i suppose going down the line it'd be uh before we get to helm4 if helm4",
    "start": "3216319",
    "end": "3224480"
  },
  {
    "text": "um comes out someday then you probably would want to have moved up to api version v2 uh does",
    "start": "3224480",
    "end": "3230800"
  },
  {
    "text": "that seem okay matt yep yeah thank you martin and i think we",
    "start": "3230800",
    "end": "3237359"
  },
  {
    "text": "have time for one last question which is uh so helm3 doesn't use its own dedicated",
    "start": "3237359",
    "end": "3244000"
  },
  {
    "text": "crds just secret resources yes yes um uh we we explored the crd route",
    "start": "3244000",
    "end": "3252960"
  },
  {
    "text": "very carefully um there were a couple of security things that caused us to go",
    "start": "3252960",
    "end": "3258800"
  },
  {
    "text": "against uh the that cause that weighed against it but ultimately at the end of the day",
    "start": "3258800",
    "end": "3264079"
  },
  {
    "text": "there is one features feature of crds that we've realized could be so utterly catastrophic that we would",
    "start": "3264079",
    "end": "3270720"
  },
  {
    "text": "not do it um crds by definition are are modifiable by",
    "start": "3270720",
    "end": "3276240"
  },
  {
    "text": "uh cluster users right whereas secrets are not if for any reason you delete a crd",
    "start": "3276240",
    "end": "3282720"
  },
  {
    "text": "it deletes all the resources of that type which means with one accidental typo you",
    "start": "3282720",
    "end": "3289200"
  },
  {
    "text": "could wipe out all the helm releases on your cluster and we went that's not any problem we ever",
    "start": "3289200",
    "end": "3295839"
  },
  {
    "text": "want to force anybody into uh secrets actually have been perfectly capable of of accomplishing",
    "start": "3295839",
    "end": "3301839"
  },
  {
    "text": "what we've needed uh and so there wasn't necessarily a big uh big requirement that we move off of",
    "start": "3301839",
    "end": "3308480"
  },
  {
    "text": "secrets uh the the security consideration for secrets was because secrets are auto backed by a vault on",
    "start": "3308480",
    "end": "3314240"
  },
  {
    "text": "some systems and the different customers can choose easily which particular security backend they want",
    "start": "3314240",
    "end": "3320000"
  },
  {
    "text": "uh secrets ended up being having some highly desirable features that would make the security model",
    "start": "3320000",
    "end": "3325280"
  },
  {
    "text": "quite a bit stronger but at the end of the day it was that uh scary scenario in which you could wipe out all your",
    "start": "3325280",
    "end": "3330799"
  },
  {
    "text": "releases that ultimately i think convinced us that was wrong so that's why we chose secrets and why we didn't choose crds",
    "start": "3330799",
    "end": "3341279"
  }
]