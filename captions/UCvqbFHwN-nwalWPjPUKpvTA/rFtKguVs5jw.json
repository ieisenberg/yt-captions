[
  {
    "text": "hello and welcome to this talk one",
    "start": "4799",
    "end": "7080"
  },
  {
    "text": "million lines of yaml wrangling",
    "start": "7080",
    "end": "8820"
  },
  {
    "text": "kubernetes configuration for hundreds of",
    "start": "8820",
    "end": "11040"
  },
  {
    "text": "teams my name is Katrina very and I work",
    "start": "11040",
    "end": "13559"
  },
  {
    "text": "for Shopify",
    "start": "13559",
    "end": "16098"
  },
  {
    "text": "specifically I'm a senior staff software",
    "start": "16500",
    "end": "18240"
  },
  {
    "text": "and engineer who works in infrastructure",
    "start": "18240",
    "end": "20279"
  },
  {
    "text": "engineering at Shopify and I've been",
    "start": "20279",
    "end": "22140"
  },
  {
    "text": "using kubernetes since Shopify first",
    "start": "22140",
    "end": "23760"
  },
  {
    "text": "started experimenting with it back in",
    "start": "23760",
    "end": "25500"
  },
  {
    "text": "2016.",
    "start": "25500",
    "end": "26820"
  },
  {
    "text": "more recently I've had the honor to",
    "start": "26820",
    "end": "28260"
  },
  {
    "text": "co-lead 6 CLI and cust it's customize",
    "start": "28260",
    "end": "30660"
  },
  {
    "text": "and care and function sub-projects",
    "start": "30660",
    "end": "32700"
  },
  {
    "text": "the reason you might be interested in my",
    "start": "32700",
    "end": "34260"
  },
  {
    "text": "opinion on config management besides",
    "start": "34260",
    "end": "36059"
  },
  {
    "text": "that I work in that area with six CLI is",
    "start": "36059",
    "end": "38460"
  },
  {
    "text": "that I worked on shopify's production",
    "start": "38460",
    "end": "40320"
  },
  {
    "text": "platform teams since its early days and",
    "start": "40320",
    "end": "42300"
  },
  {
    "text": "I was responsible for both the doing and",
    "start": "42300",
    "end": "43980"
  },
  {
    "text": "the redoing of a bunch of the decisions",
    "start": "43980",
    "end": "45420"
  },
  {
    "text": "that we made related to config",
    "start": "45420",
    "end": "46739"
  },
  {
    "text": "management",
    "start": "46739",
    "end": "48920"
  },
  {
    "text": "this talk is going to be a story about",
    "start": "49140",
    "end": "51000"
  },
  {
    "text": "how Shopify has managed an enormous",
    "start": "51000",
    "end": "53280"
  },
  {
    "text": "amount of kubernetes yaml first in a way",
    "start": "53280",
    "end": "56039"
  },
  {
    "text": "that didn't work super well and then in",
    "start": "56039",
    "end": "58379"
  },
  {
    "text": "a way that worked much better both for",
    "start": "58379",
    "end": "59940"
  },
  {
    "text": "our platform team and for the developers",
    "start": "59940",
    "end": "61559"
  },
  {
    "text": "that we serve",
    "start": "61559",
    "end": "63239"
  },
  {
    "text": "but the story itself isn't really the",
    "start": "63239",
    "end": "64920"
  },
  {
    "text": "main point",
    "start": "64920",
    "end": "66119"
  },
  {
    "text": "all orgs at the scale are different and",
    "start": "66119",
    "end": "68220"
  },
  {
    "text": "I'm not going to try to tell you to do",
    "start": "68220",
    "end": "69420"
  },
  {
    "text": "exactly what we did",
    "start": "69420",
    "end": "71040"
  },
  {
    "text": "at the end I will introduce an open",
    "start": "71040",
    "end": "72840"
  },
  {
    "text": "source toolkit that you can use to take",
    "start": "72840",
    "end": "74460"
  },
  {
    "text": "a similar approach if you would like to",
    "start": "74460",
    "end": "75840"
  },
  {
    "text": "but I'm not going to go through the vast",
    "start": "75840",
    "end": "78060"
  },
  {
    "text": "array of tooling options out there there",
    "start": "78060",
    "end": "79920"
  },
  {
    "text": "are a lot of talks that already do that",
    "start": "79920",
    "end": "82140"
  },
  {
    "text": "my main hope is that you'll leave this",
    "start": "82140",
    "end": "83640"
  },
  {
    "text": "talk understanding why some",
    "start": "83640",
    "end": "85560"
  },
  {
    "text": "configuration Management Systems will",
    "start": "85560",
    "end": "87180"
  },
  {
    "text": "work out better than others and cause",
    "start": "87180",
    "end": "88860"
  },
  {
    "text": "you less pain",
    "start": "88860",
    "end": "90299"
  },
  {
    "text": "still going to be config management it's",
    "start": "90299",
    "end": "91619"
  },
  {
    "text": "not going to be no pain",
    "start": "91619",
    "end": "93200"
  },
  {
    "text": "but I also hope that you'll take away",
    "start": "93200",
    "end": "95640"
  },
  {
    "text": "some principles for designing your own",
    "start": "95640",
    "end": "97200"
  },
  {
    "text": "systems",
    "start": "97200",
    "end": "99540"
  },
  {
    "text": "before we dive in though I want to share",
    "start": "99540",
    "end": "101220"
  },
  {
    "text": "with you why I think this problem is",
    "start": "101220",
    "end": "102780"
  },
  {
    "text": "more interesting than it might sound and",
    "start": "102780",
    "end": "104759"
  },
  {
    "text": "hopefully convince you that it's not",
    "start": "104759",
    "end": "105960"
  },
  {
    "text": "just a big headache that you just have",
    "start": "105960",
    "end": "107340"
  },
  {
    "text": "to deal with",
    "start": "107340",
    "end": "108540"
  },
  {
    "text": "yes managing large volumes of data in a",
    "start": "108540",
    "end": "111240"
  },
  {
    "text": "white space sensitive language is a pain",
    "start": "111240",
    "end": "113340"
  },
  {
    "text": "but let's take a moment to appreciate",
    "start": "113340",
    "end": "115259"
  },
  {
    "text": "what we're really doing here",
    "start": "115259",
    "end": "118280"
  },
  {
    "text": "we're not talking about managing",
    "start": "118740",
    "end": "120180"
  },
  {
    "text": "arbitrary yaml documents we're talking",
    "start": "120180",
    "end": "122700"
  },
  {
    "text": "about managing your documents that",
    "start": "122700",
    "end": "123960"
  },
  {
    "text": "contain kubernetes objects and those",
    "start": "123960",
    "end": "125759"
  },
  {
    "text": "objects are really really important",
    "start": "125759",
    "end": "128280"
  },
  {
    "text": "because kubernetes is API Centric the",
    "start": "128280",
    "end": "130979"
  },
  {
    "text": "declarative data that we're talking",
    "start": "130979",
    "end": "132120"
  },
  {
    "text": "about is really at its core",
    "start": "132120",
    "end": "135500"
  },
  {
    "text": "this data in our yaml files is the means",
    "start": "135720",
    "end": "137879"
  },
  {
    "text": "through which we express the state that",
    "start": "137879",
    "end": "139379"
  },
  {
    "text": "we want our systems to have so that the",
    "start": "139379",
    "end": "141300"
  },
  {
    "text": "various kubernetes components can make",
    "start": "141300",
    "end": "142680"
  },
  {
    "text": "it happen",
    "start": "142680",
    "end": "143640"
  },
  {
    "text": "this is a really really smart and",
    "start": "143640",
    "end": "145319"
  },
  {
    "text": "extensible way to build a system and",
    "start": "145319",
    "end": "147239"
  },
  {
    "text": "it's a key driver of kubernetes success",
    "start": "147239",
    "end": "149520"
  },
  {
    "text": "managing this desired state is an",
    "start": "149520",
    "end": "151379"
  },
  {
    "text": "important part of what it takes to use",
    "start": "151379",
    "end": "152879"
  },
  {
    "text": "kubernetes successfully in a large",
    "start": "152879",
    "end": "154620"
  },
  {
    "text": "organization",
    "start": "154620",
    "end": "155940"
  },
  {
    "text": "and it's especially the case if you're",
    "start": "155940",
    "end": "158700"
  },
  {
    "text": "doing that config Management on behalf",
    "start": "158700",
    "end": "160620"
  },
  {
    "text": "of or in collaboration with a diverse",
    "start": "160620",
    "end": "162300"
  },
  {
    "text": "set of users",
    "start": "162300",
    "end": "163980"
  },
  {
    "text": "as we'll see it requires more than just",
    "start": "163980",
    "end": "165780"
  },
  {
    "text": "choosing a definition format or a",
    "start": "165780",
    "end": "167879"
  },
  {
    "text": "packaging format kubernetes",
    "start": "167879",
    "end": "169560"
  },
  {
    "text": "configuration management is really a",
    "start": "169560",
    "end": "171120"
  },
  {
    "text": "journey from the idea in someone's head",
    "start": "171120",
    "end": "172560"
  },
  {
    "text": "about what they want their production",
    "start": "172560",
    "end": "174060"
  },
  {
    "text": "system to look like",
    "start": "174060",
    "end": "175379"
  },
  {
    "text": "through that state being submitted to",
    "start": "175379",
    "end": "177300"
  },
  {
    "text": "the API server",
    "start": "177300",
    "end": "178739"
  },
  {
    "text": "and it's important to carefully consider",
    "start": "178739",
    "end": "180599"
  },
  {
    "text": "what should happen at each step in that",
    "start": "180599",
    "end": "183060"
  },
  {
    "text": "journey and more equally importantly",
    "start": "183060",
    "end": "185340"
  },
  {
    "text": "really what can go wrong",
    "start": "185340",
    "end": "188780"
  },
  {
    "text": "so with all that in mind let's dive into",
    "start": "189060",
    "end": "190500"
  },
  {
    "text": "the story",
    "start": "190500",
    "end": "192540"
  },
  {
    "text": "what to do with this data is one of the",
    "start": "192540",
    "end": "194459"
  },
  {
    "text": "first questions that a platform team",
    "start": "194459",
    "end": "196560"
  },
  {
    "text": "might be faced with when starting their",
    "start": "196560",
    "end": "198120"
  },
  {
    "text": "platform assuming they want to follow",
    "start": "198120",
    "end": "200159"
  },
  {
    "text": "the golden path of storing and",
    "start": "200159",
    "end": "202019"
  },
  {
    "text": "declaratively applying their kubernetes",
    "start": "202019",
    "end": "203400"
  },
  {
    "text": "config",
    "start": "203400",
    "end": "204900"
  },
  {
    "text": "this is not at all the hardest part of",
    "start": "204900",
    "end": "206700"
  },
  {
    "text": "the problem that you're facing at the",
    "start": "206700",
    "end": "207959"
  },
  {
    "text": "stage of your platform building so many",
    "start": "207959",
    "end": "209700"
  },
  {
    "text": "orgs reach for an easy option to get it",
    "start": "209700",
    "end": "211379"
  },
  {
    "text": "out of the way",
    "start": "211379",
    "end": "213120"
  },
  {
    "text": "at Shopify we initially gave developers",
    "start": "213120",
    "end": "215159"
  },
  {
    "text": "some check boxes that allowed them to",
    "start": "215159",
    "end": "216720"
  },
  {
    "text": "select what kinds of components they",
    "start": "216720",
    "end": "218159"
  },
  {
    "text": "needed to run as part of their",
    "start": "218159",
    "end": "219420"
  },
  {
    "text": "deployment",
    "start": "219420",
    "end": "221159"
  },
  {
    "text": "so they could select things like web",
    "start": "221159",
    "end": "222540"
  },
  {
    "text": "jobs my SQL redis all those kind of",
    "start": "222540",
    "end": "224519"
  },
  {
    "text": "options there and what we did was we",
    "start": "224519",
    "end": "226440"
  },
  {
    "text": "would dump a set of yaml files into the",
    "start": "226440",
    "end": "228180"
  },
  {
    "text": "repositories right alongside their",
    "start": "228180",
    "end": "229620"
  },
  {
    "text": "application code where they could easily",
    "start": "229620",
    "end": "231000"
  },
  {
    "text": "manage and review it",
    "start": "231000",
    "end": "232799"
  },
  {
    "text": "but what we gave them wasn't actually",
    "start": "232799",
    "end": "234299"
  },
  {
    "text": "just plain yaml for one particular",
    "start": "234299",
    "end": "236040"
  },
  {
    "text": "reason",
    "start": "236040",
    "end": "238280"
  },
  {
    "text": "the reason was that some bits of our",
    "start": "238440",
    "end": "240000"
  },
  {
    "text": "configuration needed to vary on a per",
    "start": "240000",
    "end": "242159"
  },
  {
    "text": "commit basis",
    "start": "242159",
    "end": "244140"
  },
  {
    "text": "Shopify had long since been doing",
    "start": "244140",
    "end": "245519"
  },
  {
    "text": "continuous deployments with the get",
    "start": "245519",
    "end": "247260"
  },
  {
    "text": "revision being used for versioning so we",
    "start": "247260",
    "end": "249959"
  },
  {
    "text": "wanted to use the image tag for the",
    "start": "249959",
    "end": "252599"
  },
  {
    "text": "revision for the image tag and some apps",
    "start": "252599",
    "end": "255480"
  },
  {
    "text": "also expected an environment variable",
    "start": "255480",
    "end": "257100"
  },
  {
    "text": "with that data",
    "start": "257100",
    "end": "258540"
  },
  {
    "text": "so because we were",
    "start": "258540",
    "end": "261320"
  },
  {
    "text": "using this revision for pieces of the",
    "start": "261320",
    "end": "264600"
  },
  {
    "text": "templating and the revision was coming",
    "start": "264600",
    "end": "265979"
  },
  {
    "text": "from the repository we're storing the",
    "start": "265979",
    "end": "267660"
  },
  {
    "text": "config in we obviously can't commit that",
    "start": "267660",
    "end": "270120"
  },
  {
    "text": "to that Repository",
    "start": "270120",
    "end": "271800"
  },
  {
    "text": "so to handle this we reached for the",
    "start": "271800",
    "end": "273240"
  },
  {
    "text": "familiar tool of templating",
    "start": "273240",
    "end": "276120"
  },
  {
    "text": "specifically we decided to use Erb which",
    "start": "276120",
    "end": "279300"
  },
  {
    "text": "is a popular templating language that is",
    "start": "279300",
    "end": "281120"
  },
  {
    "text": "included in the Ruby standard Library",
    "start": "281120",
    "end": "283979"
  },
  {
    "text": "and it allows you to embed actual Ruby",
    "start": "283979",
    "end": "286139"
  },
  {
    "text": "into arbitrary documents",
    "start": "286139",
    "end": "288180"
  },
  {
    "text": "since our deploy tool was written in",
    "start": "288180",
    "end": "289620"
  },
  {
    "text": "Ruby and most of these files were being",
    "start": "289620",
    "end": "291060"
  },
  {
    "text": "distributed to rails developers this",
    "start": "291060",
    "end": "292500"
  },
  {
    "text": "seemed like a natural fit and an easy",
    "start": "292500",
    "end": "294060"
  },
  {
    "text": "default choice",
    "start": "294060",
    "end": "295560"
  },
  {
    "text": "in hindsight though this was a big",
    "start": "295560",
    "end": "298080"
  },
  {
    "text": "mistake and I'm still haunted by a",
    "start": "298080",
    "end": "300240"
  },
  {
    "text": "conversation that I had with my lead at",
    "start": "300240",
    "end": "301740"
  },
  {
    "text": "the time",
    "start": "301740",
    "end": "302699"
  },
  {
    "text": "went something like this",
    "start": "302699",
    "end": "304560"
  },
  {
    "text": "you saw what I was thinking about doing",
    "start": "304560",
    "end": "306000"
  },
  {
    "text": "and he questioned the sanity of allowing",
    "start": "306000",
    "end": "307860"
  },
  {
    "text": "a turing complete language in this",
    "start": "307860",
    "end": "309240"
  },
  {
    "text": "context but naively I thought it would",
    "start": "309240",
    "end": "311220"
  },
  {
    "text": "be more empowering than dangerous and",
    "start": "311220",
    "end": "312900"
  },
  {
    "text": "went with it anyway",
    "start": "312900",
    "end": "315500"
  },
  {
    "text": "now as a customized maintainer you might",
    "start": "316020",
    "end": "317940"
  },
  {
    "text": "be expecting me to claim that this all",
    "start": "317940",
    "end": "319259"
  },
  {
    "text": "went wrong because templating is bad and",
    "start": "319259",
    "end": "320820"
  },
  {
    "text": "everything everyone should just use",
    "start": "320820",
    "end": "322380"
  },
  {
    "text": "customize and talk but I don't actually",
    "start": "322380",
    "end": "324240"
  },
  {
    "text": "think that and templating was only part",
    "start": "324240",
    "end": "325800"
  },
  {
    "text": "of the problem",
    "start": "325800",
    "end": "327180"
  },
  {
    "text": "my boss was super right about the",
    "start": "327180",
    "end": "330360"
  },
  {
    "text": "problem of exposing a turing complete",
    "start": "330360",
    "end": "331860"
  },
  {
    "text": "language here people did all sorts of",
    "start": "331860",
    "end": "333840"
  },
  {
    "text": "stuff with it stuff I never imagined",
    "start": "333840",
    "end": "336479"
  },
  {
    "text": "they created complex unintentionally",
    "start": "336479",
    "end": "338280"
  },
  {
    "text": "designed abstractions within their",
    "start": "338280",
    "end": "339539"
  },
  {
    "text": "config they did complex math to",
    "start": "339539",
    "end": "341699"
  },
  {
    "text": "calculate relative values for Fields",
    "start": "341699",
    "end": "343380"
  },
  {
    "text": "like replica counts and resources and",
    "start": "343380",
    "end": "346199"
  },
  {
    "text": "they even made HTTP calls fetching some",
    "start": "346199",
    "end": "349080"
  },
  {
    "text": "data to serialize to include in their",
    "start": "349080",
    "end": "351060"
  },
  {
    "text": "templates and that added a lot of risk",
    "start": "351060",
    "end": "353220"
  },
  {
    "text": "to their releases",
    "start": "353220",
    "end": "355020"
  },
  {
    "text": "so all this and more though was",
    "start": "355020",
    "end": "357120"
  },
  {
    "text": "perfectly acceptable under the Erv",
    "start": "357120",
    "end": "359400"
  },
  {
    "text": "system and it really did cause",
    "start": "359400",
    "end": "361139"
  },
  {
    "text": "misconfiguration and outages",
    "start": "361139",
    "end": "364259"
  },
  {
    "text": "but also templating itself was part of",
    "start": "364259",
    "end": "366600"
  },
  {
    "text": "the problem templating is a really handy",
    "start": "366600",
    "end": "368940"
  },
  {
    "text": "implementation tool but it makes the",
    "start": "368940",
    "end": "370800"
  },
  {
    "text": "port interface especially if you're",
    "start": "370800",
    "end": "372479"
  },
  {
    "text": "exposing the templates themselves like",
    "start": "372479",
    "end": "374220"
  },
  {
    "text": "we were",
    "start": "374220",
    "end": "375539"
  },
  {
    "text": "the documents that we were Distributing",
    "start": "375539",
    "end": "378600"
  },
  {
    "text": "weren't really valid anything in their",
    "start": "378600",
    "end": "380460"
  },
  {
    "text": "unrended form so we had to resort to",
    "start": "380460",
    "end": "382560"
  },
  {
    "text": "string stand string scanning to update",
    "start": "382560",
    "end": "385080"
  },
  {
    "text": "them and this was at best Annoying for",
    "start": "385080",
    "end": "387600"
  },
  {
    "text": "both us and our customers",
    "start": "387600",
    "end": "389580"
  },
  {
    "text": "and at worst it was extremely",
    "start": "389580",
    "end": "390840"
  },
  {
    "text": "error-prone",
    "start": "390840",
    "end": "392699"
  },
  {
    "text": "the other issue is that there was no",
    "start": "392699",
    "end": "394500"
  },
  {
    "text": "interface between our team and the",
    "start": "394500",
    "end": "396060"
  },
  {
    "text": "Developers",
    "start": "396060",
    "end": "397080"
  },
  {
    "text": "in practice the final deployed",
    "start": "397080",
    "end": "398819"
  },
  {
    "text": "configuration was a collaboration",
    "start": "398819",
    "end": "400259"
  },
  {
    "text": "between the defaults that we were",
    "start": "400259",
    "end": "401580"
  },
  {
    "text": "maintaining and the customizations that",
    "start": "401580",
    "end": "403500"
  },
  {
    "text": "they wanted to make for their app but to",
    "start": "403500",
    "end": "405780"
  },
  {
    "text": "see which was which you had to dive",
    "start": "405780",
    "end": "408240"
  },
  {
    "text": "through git which is not ideal",
    "start": "408240",
    "end": "411180"
  },
  {
    "text": "this was also bad ux even for the most",
    "start": "411180",
    "end": "413940"
  },
  {
    "text": "common changes that a lot of developers",
    "start": "413940",
    "end": "415800"
  },
  {
    "text": "wanted to make they had to Wade through",
    "start": "415800",
    "end": "417539"
  },
  {
    "text": "the whole resource to figure out how to",
    "start": "417539",
    "end": "418979"
  },
  {
    "text": "do it",
    "start": "418979",
    "end": "421220"
  },
  {
    "text": "so all that is bad enough but the Erb",
    "start": "422160",
    "end": "425400"
  },
  {
    "text": "part and its consequences weren't",
    "start": "425400",
    "end": "427139"
  },
  {
    "text": "actually the worst part the worst part",
    "start": "427139",
    "end": "429419"
  },
  {
    "text": "was that we were rendering this ERB",
    "start": "429419",
    "end": "431880"
  },
  {
    "text": "during the deploy",
    "start": "431880",
    "end": "434100"
  },
  {
    "text": "in time we ended up with critical apps",
    "start": "434100",
    "end": "436380"
  },
  {
    "text": "that had a lot of complexity to their",
    "start": "436380",
    "end": "438240"
  },
  {
    "text": "templates and with that complexity comes",
    "start": "438240",
    "end": "440340"
  },
  {
    "text": "added risk",
    "start": "440340",
    "end": "441720"
  },
  {
    "text": "even straightforward changes can be",
    "start": "441720",
    "end": "443880"
  },
  {
    "text": "surprisingly difficult to review and",
    "start": "443880",
    "end": "446099"
  },
  {
    "text": "seemingly small mistakes can have dire",
    "start": "446099",
    "end": "447720"
  },
  {
    "text": "consequences",
    "start": "447720",
    "end": "449460"
  },
  {
    "text": "so this here is a real snippet from a PR",
    "start": "449460",
    "end": "451560"
  },
  {
    "text": "that caused an outage the mistake is on",
    "start": "451560",
    "end": "454620"
  },
  {
    "text": "the slide I'll give you a couple of",
    "start": "454620",
    "end": "455699"
  },
  {
    "text": "seconds to take a look and see if you",
    "start": "455699",
    "end": "457080"
  },
  {
    "text": "can spot it",
    "start": "457080",
    "end": "459620"
  },
  {
    "text": "so if you spotted that the for Loop",
    "start": "464340",
    "end": "466440"
  },
  {
    "text": "Terminator is misplaced in relation to",
    "start": "466440",
    "end": "468300"
  },
  {
    "text": "the document separator that's the issue",
    "start": "468300",
    "end": "471240"
  },
  {
    "text": "what happened was what should have been",
    "start": "471240",
    "end": "473099"
  },
  {
    "text": "multiple documents was actually one and",
    "start": "473099",
    "end": "475740"
  },
  {
    "text": "the duplicate keys were not caught and",
    "start": "475740",
    "end": "477360"
  },
  {
    "text": "the resulting document probably had them",
    "start": "477360",
    "end": "479460"
  },
  {
    "text": "and you know they were selected in an",
    "start": "479460",
    "end": "481020"
  },
  {
    "text": "undefined order that's how the animal",
    "start": "481020",
    "end": "482699"
  },
  {
    "text": "parser works so",
    "start": "482699",
    "end": "485220"
  },
  {
    "text": "yeah in the end what happened was",
    "start": "485220",
    "end": "487860"
  },
  {
    "text": "unintended deletion of multiple critical",
    "start": "487860",
    "end": "489840"
  },
  {
    "text": "resources not good",
    "start": "489840",
    "end": "492960"
  },
  {
    "text": "the other big problem with deploy time",
    "start": "492960",
    "end": "494580"
  },
  {
    "text": "rendering is that at least in our system",
    "start": "494580",
    "end": "496500"
  },
  {
    "text": "a rollback is just a redeploy of a",
    "start": "496500",
    "end": "499199"
  },
  {
    "text": "previous revision and redeploying meant",
    "start": "499199",
    "end": "502080"
  },
  {
    "text": "re-rendering so this is another example",
    "start": "502080",
    "end": "504720"
  },
  {
    "text": "from a real incident",
    "start": "504720",
    "end": "506400"
  },
  {
    "text": "in this case an environment variable got",
    "start": "506400",
    "end": "508560"
  },
  {
    "text": "misformatted due to a bug introduced",
    "start": "508560",
    "end": "511440"
  },
  {
    "text": "into the rendering pipeline itself",
    "start": "511440",
    "end": "513719"
  },
  {
    "text": "and since that bug affected rendering",
    "start": "513719",
    "end": "516000"
  },
  {
    "text": "when the app spotted the problem and",
    "start": "516000",
    "end": "517919"
  },
  {
    "text": "tried to roll back to the known good",
    "start": "517919",
    "end": "519180"
  },
  {
    "text": "revision it didn't work",
    "start": "519180",
    "end": "522180"
  },
  {
    "text": "so there was a considerable confusion",
    "start": "522180",
    "end": "524760"
  },
  {
    "text": "trying to identify what the problem was",
    "start": "524760",
    "end": "526140"
  },
  {
    "text": "and what could have been an extremely",
    "start": "526140",
    "end": "527640"
  },
  {
    "text": "brief service disruption was was",
    "start": "527640",
    "end": "529920"
  },
  {
    "text": "prolonged by this issue",
    "start": "529920",
    "end": "533000"
  },
  {
    "text": "so at this point we had a bit of a",
    "start": "533519",
    "end": "535080"
  },
  {
    "text": "laundry list of things that we I did not",
    "start": "535080",
    "end": "537000"
  },
  {
    "text": "want to have in our new system or to",
    "start": "537000",
    "end": "539220"
  },
  {
    "text": "frame it more positively we had a wish",
    "start": "539220",
    "end": "540839"
  },
  {
    "text": "list of properties we did want it to",
    "start": "540839",
    "end": "542339"
  },
  {
    "text": "have let's summarize them",
    "start": "542339",
    "end": "545779"
  },
  {
    "text": "first of all the new system needed a",
    "start": "546480",
    "end": "548459"
  },
  {
    "text": "focus on its consequences for release",
    "start": "548459",
    "end": "550500"
  },
  {
    "text": "safety",
    "start": "550500",
    "end": "551519"
  },
  {
    "text": "it should make all changes reviewable",
    "start": "551519",
    "end": "553980"
  },
  {
    "text": "all releases repeatable and moreover it",
    "start": "553980",
    "end": "556800"
  },
  {
    "text": "should make it impossible for end users",
    "start": "556800",
    "end": "558480"
  },
  {
    "text": "to compromise those properties",
    "start": "558480",
    "end": "561800"
  },
  {
    "text": "we also needed the new system to be",
    "start": "562740",
    "end": "564540"
  },
  {
    "text": "maintainable through automation",
    "start": "564540",
    "end": "566459"
  },
  {
    "text": "we compiled a list of changes that we",
    "start": "566459",
    "end": "568080"
  },
  {
    "text": "had needed to roll out in the past and",
    "start": "568080",
    "end": "570120"
  },
  {
    "text": "we used the ease of making similar",
    "start": "570120",
    "end": "571620"
  },
  {
    "text": "changes as a criteria for assessing our",
    "start": "571620",
    "end": "573600"
  },
  {
    "text": "ideas for the new system",
    "start": "573600",
    "end": "575820"
  },
  {
    "text": "we also knew that we wanted to have a",
    "start": "575820",
    "end": "577380"
  },
  {
    "text": "formal version be a part of the system",
    "start": "577380",
    "end": "578640"
  },
  {
    "text": "so that we could evolve it over time and",
    "start": "578640",
    "end": "580680"
  },
  {
    "text": "if we wanted to make a major change",
    "start": "580680",
    "end": "582060"
  },
  {
    "text": "again it would be so much easier next",
    "start": "582060",
    "end": "583860"
  },
  {
    "text": "time",
    "start": "583860",
    "end": "586100"
  },
  {
    "text": "and then finally we wanted to make sure",
    "start": "586740",
    "end": "588899"
  },
  {
    "text": "that we designed for the needs of all",
    "start": "588899",
    "end": "590459"
  },
  {
    "text": "the users that we really had and these",
    "start": "590459",
    "end": "592440"
  },
  {
    "text": "range from folks who are building simple",
    "start": "592440",
    "end": "593700"
  },
  {
    "text": "apps that would only need a couple",
    "start": "593700",
    "end": "594899"
  },
  {
    "text": "straightforward changes in their",
    "start": "594899",
    "end": "596279"
  },
  {
    "text": "lifetime right through folks running key",
    "start": "596279",
    "end": "598680"
  },
  {
    "text": "services that had a considerable amount",
    "start": "598680",
    "end": "600480"
  },
  {
    "text": "of unique and very necessary",
    "start": "600480",
    "end": "602040"
  },
  {
    "text": "customization",
    "start": "602040",
    "end": "604200"
  },
  {
    "text": "we didn't guess about what these needs",
    "start": "604200",
    "end": "606000"
  },
  {
    "text": "were we actually went out there and",
    "start": "606000",
    "end": "607740"
  },
  {
    "text": "looked at analyzed programmatically all",
    "start": "607740",
    "end": "609959"
  },
  {
    "text": "of the applications that we had at the",
    "start": "609959",
    "end": "611519"
  },
  {
    "text": "time we were doing this project",
    "start": "611519",
    "end": "613320"
  },
  {
    "text": "and based on that we knew we had to",
    "start": "613320",
    "end": "615180"
  },
  {
    "text": "provide basically three buckets of",
    "start": "615180",
    "end": "616800"
  },
  {
    "text": "feature set one we needed something that",
    "start": "616800",
    "end": "619620"
  },
  {
    "text": "just worked without modification when",
    "start": "619620",
    "end": "621300"
  },
  {
    "text": "people were getting started two we",
    "start": "621300",
    "end": "623700"
  },
  {
    "text": "needed to make it easy to author a",
    "start": "623700",
    "end": "626100"
  },
  {
    "text": "specific set of changes that we had",
    "start": "626100",
    "end": "628260"
  },
  {
    "text": "discovered were very common",
    "start": "628260",
    "end": "630000"
  },
  {
    "text": "and then three we did need to make it",
    "start": "630000",
    "end": "631980"
  },
  {
    "text": "possible to do something more complex",
    "start": "631980",
    "end": "633480"
  },
  {
    "text": "when it was necessary",
    "start": "633480",
    "end": "636440"
  },
  {
    "text": "so what did we build",
    "start": "637560",
    "end": "640459"
  },
  {
    "text": "here's a high level view of the new",
    "start": "640500",
    "end": "642000"
  },
  {
    "text": "system we'll go through each piece",
    "start": "642000",
    "end": "644399"
  },
  {
    "text": "starting from the left we have a config",
    "start": "644399",
    "end": "646260"
  },
  {
    "text": "CLI",
    "start": "646260",
    "end": "647519"
  },
  {
    "text": "what we did was build a command into our",
    "start": "647519",
    "end": "649320"
  },
  {
    "text": "existing developer tool that our devs",
    "start": "649320",
    "end": "651360"
  },
  {
    "text": "were using every day",
    "start": "651360",
    "end": "653040"
  },
  {
    "text": "this command would interactively walk",
    "start": "653040",
    "end": "655019"
  },
  {
    "text": "the users through all the most common",
    "start": "655019",
    "end": "656760"
  },
  {
    "text": "workflows that were involved in",
    "start": "656760",
    "end": "658620"
  },
  {
    "text": "producing and modifying their production",
    "start": "658620",
    "end": "660180"
  },
  {
    "text": "configuration",
    "start": "660180",
    "end": "661980"
  },
  {
    "text": "that tool is really just helping them",
    "start": "661980",
    "end": "664140"
  },
  {
    "text": "author a particular file that contains a",
    "start": "664140",
    "end": "666540"
  },
  {
    "text": "kubernetes style resource that we called",
    "start": "666540",
    "end": "668040"
  },
  {
    "text": "runtime manifest",
    "start": "668040",
    "end": "670019"
  },
  {
    "text": "we would then use that kubernetes style",
    "start": "670019",
    "end": "671820"
  },
  {
    "text": "resource to produce a single file review",
    "start": "671820",
    "end": "673620"
  },
  {
    "text": "artifact that we called the lock file",
    "start": "673620",
    "end": "675959"
  },
  {
    "text": "that file contains all of the real",
    "start": "675959",
    "end": "678360"
  },
  {
    "text": "resources that will actually be deployed",
    "start": "678360",
    "end": "680420"
  },
  {
    "text": "and we committed it right and in the",
    "start": "680420",
    "end": "683640"
  },
  {
    "text": "repo alongside the config artifact",
    "start": "683640",
    "end": "686579"
  },
  {
    "text": "next we had a release artifact that gets",
    "start": "686579",
    "end": "688980"
  },
  {
    "text": "uploaded at CI time to a standard highly",
    "start": "688980",
    "end": "691260"
  },
  {
    "text": "available location that the deploy tool",
    "start": "691260",
    "end": "693360"
  },
  {
    "text": "could pull from and as it happens we use",
    "start": "693360",
    "end": "695760"
  },
  {
    "text": "Google Cloud Storage buckets for that",
    "start": "695760",
    "end": "697920"
  },
  {
    "text": "so with this overview in mind let's take",
    "start": "697920",
    "end": "699779"
  },
  {
    "text": "a closer look at what each piece looks",
    "start": "699779",
    "end": "701459"
  },
  {
    "text": "like",
    "start": "701459",
    "end": "703579"
  },
  {
    "text": "we created the config CLI in service of",
    "start": "704459",
    "end": "706500"
  },
  {
    "text": "our goal of making it easy for",
    "start": "706500",
    "end": "707760"
  },
  {
    "text": "developers to get started with the new",
    "start": "707760",
    "end": "709200"
  },
  {
    "text": "system and ensuring that commonly needed",
    "start": "709200",
    "end": "711480"
  },
  {
    "text": "changes would be really simple to make",
    "start": "711480",
    "end": "713640"
  },
  {
    "text": "the config API itself does contribute to",
    "start": "713640",
    "end": "715680"
  },
  {
    "text": "these goals of course but we decided",
    "start": "715680",
    "end": "717420"
  },
  {
    "text": "that wasn't good enough and we wanted to",
    "start": "717420",
    "end": "718740"
  },
  {
    "text": "take it further",
    "start": "718740",
    "end": "720300"
  },
  {
    "text": "by embedding a sub command in the CLI",
    "start": "720300",
    "end": "722220"
  },
  {
    "text": "that most developers were using all day",
    "start": "722220",
    "end": "723839"
  },
  {
    "text": "already we were able to give them a",
    "start": "723839",
    "end": "726060"
  },
  {
    "text": "familiar interactive workflow that could",
    "start": "726060",
    "end": "727560"
  },
  {
    "text": "provide better guidance than any doc",
    "start": "727560",
    "end": "731060"
  },
  {
    "text": "next we have the config API itself",
    "start": "731579",
    "end": "734100"
  },
  {
    "text": "it simplifies the user experience by",
    "start": "734100",
    "end": "735779"
  },
  {
    "text": "explicitly encoding the main application",
    "start": "735779",
    "end": "737579"
  },
  {
    "text": "properties that the developers need to",
    "start": "737579",
    "end": "739200"
  },
  {
    "text": "control these go in the runtime info",
    "start": "739200",
    "end": "741060"
  },
  {
    "text": "field",
    "start": "741060",
    "end": "741959"
  },
  {
    "text": "this resource also is the main",
    "start": "741959",
    "end": "743399"
  },
  {
    "text": "contributor to the automation principle",
    "start": "743399",
    "end": "744839"
  },
  {
    "text": "thanks to its version schema",
    "start": "744839",
    "end": "747720"
  },
  {
    "text": "a focus for us in its design was the",
    "start": "747720",
    "end": "750060"
  },
  {
    "text": "clear separation of the base best",
    "start": "750060",
    "end": "751680"
  },
  {
    "text": "practices that our team was owning from",
    "start": "751680",
    "end": "754260"
  },
  {
    "text": "the modifications that the app owners",
    "start": "754260",
    "end": "756180"
  },
  {
    "text": "were making",
    "start": "756180",
    "end": "757079"
  },
  {
    "text": "and that's most visible actually in the",
    "start": "757079",
    "end": "758940"
  },
  {
    "text": "component section that we can see on",
    "start": "758940",
    "end": "760620"
  },
  {
    "text": "this slide",
    "start": "760620",
    "end": "762360"
  },
  {
    "text": "we did this very customized style it's",
    "start": "762360",
    "end": "765120"
  },
  {
    "text": "oriented around the concept of having",
    "start": "765120",
    "end": "766740"
  },
  {
    "text": "bases that defined resources and then",
    "start": "766740",
    "end": "768959"
  },
  {
    "text": "modifying them with patches which are",
    "start": "768959",
    "end": "770880"
  },
  {
    "text": "essentially partial resources that only",
    "start": "770880",
    "end": "772500"
  },
  {
    "text": "include the fields that you want to",
    "start": "772500",
    "end": "773940"
  },
  {
    "text": "change",
    "start": "773940",
    "end": "775079"
  },
  {
    "text": "we stored all the bases that we wanted",
    "start": "775079",
    "end": "776820"
  },
  {
    "text": "to control as well as some standard",
    "start": "776820",
    "end": "778620"
  },
  {
    "text": "patches in a centralized repo where we",
    "start": "778620",
    "end": "781200"
  },
  {
    "text": "implemented strict versioning patterns",
    "start": "781200",
    "end": "782700"
  },
  {
    "text": "and immutability controls",
    "start": "782700",
    "end": "784560"
  },
  {
    "text": "this did work well but in hindsight I'd",
    "start": "784560",
    "end": "787500"
  },
  {
    "text": "say we should have taken the user",
    "start": "787500",
    "end": "788760"
  },
  {
    "text": "experience further than this and hidden",
    "start": "788760",
    "end": "790860"
  },
  {
    "text": "the default bases and patches behind",
    "start": "790860",
    "end": "792480"
  },
  {
    "text": "fields or even apis of their own instead",
    "start": "792480",
    "end": "794820"
  },
  {
    "text": "of exposing their files right in the",
    "start": "794820",
    "end": "796260"
  },
  {
    "text": "manifest like we did here",
    "start": "796260",
    "end": "798060"
  },
  {
    "text": "for example we could have made a field",
    "start": "798060",
    "end": "799620"
  },
  {
    "text": "for the webs and jobs types that we were",
    "start": "799620",
    "end": "801540"
  },
  {
    "text": "defining in this example or we could",
    "start": "801540",
    "end": "803700"
  },
  {
    "text": "have formalized a notion of component",
    "start": "803700",
    "end": "805200"
  },
  {
    "text": "kind in general",
    "start": "805200",
    "end": "806579"
  },
  {
    "text": "in any case as it is the CLI tool is",
    "start": "806579",
    "end": "809160"
  },
  {
    "text": "aware of the collection of default bases",
    "start": "809160",
    "end": "811680"
  },
  {
    "text": "and patches and it was often the one to",
    "start": "811680",
    "end": "813420"
  },
  {
    "text": "write all of this anyway",
    "start": "813420",
    "end": "815639"
  },
  {
    "text": "on the flip side though notice at the",
    "start": "815639",
    "end": "817320"
  },
  {
    "text": "end that we have an example of local",
    "start": "817320",
    "end": "818880"
  },
  {
    "text": "paths",
    "start": "818880",
    "end": "819959"
  },
  {
    "text": "is important to us that we continue to",
    "start": "819959",
    "end": "821700"
  },
  {
    "text": "allow Advanced users to leverage the",
    "start": "821700",
    "end": "823500"
  },
  {
    "text": "full power of the kubernetes apis when",
    "start": "823500",
    "end": "825240"
  },
  {
    "text": "they needed it and this is how we did it",
    "start": "825240",
    "end": "827760"
  },
  {
    "text": "this customization system also allowed",
    "start": "827760",
    "end": "830040"
  },
  {
    "text": "us to do a no-op migration in the vast",
    "start": "830040",
    "end": "832019"
  },
  {
    "text": "majority of cases despite the complexity",
    "start": "832019",
    "end": "833940"
  },
  {
    "text": "explosion that we initially exposed",
    "start": "833940",
    "end": "837560"
  },
  {
    "text": "next comes the review artifact",
    "start": "838200",
    "end": "840300"
  },
  {
    "text": "this one is just a long file full of",
    "start": "840300",
    "end": "842339"
  },
  {
    "text": "standard resources so it's not super",
    "start": "842339",
    "end": "843899"
  },
  {
    "text": "interesting to look at but it's very",
    "start": "843899",
    "end": "846180"
  },
  {
    "text": "important",
    "start": "846180",
    "end": "847200"
  },
  {
    "text": "having this committed alongside the high",
    "start": "847200",
    "end": "849120"
  },
  {
    "text": "level config artifact made sure that",
    "start": "849120",
    "end": "850740"
  },
  {
    "text": "subtle configuration mistakes which are",
    "start": "850740",
    "end": "852779"
  },
  {
    "text": "less likely but still possible in a new",
    "start": "852779",
    "end": "854519"
  },
  {
    "text": "system are able to be caught during",
    "start": "854519",
    "end": "856560"
  },
  {
    "text": "regular code review",
    "start": "856560",
    "end": "858480"
  },
  {
    "text": "this gives us a very high degree of",
    "start": "858480",
    "end": "860160"
  },
  {
    "text": "confidence that what we're going to",
    "start": "860160",
    "end": "861420"
  },
  {
    "text": "deploy is exactly what we intended",
    "start": "861420",
    "end": "865279"
  },
  {
    "text": "the real artifact also helps developers",
    "start": "865320",
    "end": "867540"
  },
  {
    "text": "understand the changes that we're making",
    "start": "867540",
    "end": "869040"
  },
  {
    "text": "to their apps if they're interested",
    "start": "869040",
    "end": "870899"
  },
  {
    "text": "because the full details end up exposed",
    "start": "870899",
    "end": "873120"
  },
  {
    "text": "in the review artifact",
    "start": "873120",
    "end": "874680"
  },
  {
    "text": "for instance if we're making a big bump",
    "start": "874680",
    "end": "876720"
  },
  {
    "text": "to the version of the web component they",
    "start": "876720",
    "end": "878339"
  },
  {
    "text": "are using it could look something like",
    "start": "878339",
    "end": "879959"
  },
  {
    "text": "this",
    "start": "879959",
    "end": "880680"
  },
  {
    "text": "and if that's all the app owner cares",
    "start": "880680",
    "end": "882180"
  },
  {
    "text": "about they could only look at that part",
    "start": "882180",
    "end": "883380"
  },
  {
    "text": "move on with their day",
    "start": "883380",
    "end": "884940"
  },
  {
    "text": "but if they're interested or if",
    "start": "884940",
    "end": "886860"
  },
  {
    "text": "something goes wrong and they become",
    "start": "886860",
    "end": "887880"
  },
  {
    "text": "interested then the review artifact",
    "start": "887880",
    "end": "889680"
  },
  {
    "text": "always shows exactly what changed in a",
    "start": "889680",
    "end": "891420"
  },
  {
    "text": "much more detailed diff",
    "start": "891420",
    "end": "894079"
  },
  {
    "text": "last but not least we have the release",
    "start": "894600",
    "end": "896519"
  },
  {
    "text": "artifact",
    "start": "896519",
    "end": "897660"
  },
  {
    "text": "this part",
    "start": "897660",
    "end": "899040"
  },
  {
    "text": "definitively ensures that all our",
    "start": "899040",
    "end": "900839"
  },
  {
    "text": "deploys and rollbacks will be repeatable",
    "start": "900839",
    "end": "903360"
  },
  {
    "text": "it also just looks like a long list of",
    "start": "903360",
    "end": "905579"
  },
  {
    "text": "resources back to back in a single file",
    "start": "905579",
    "end": "907760"
  },
  {
    "text": "so why do we need this in addition to",
    "start": "907760",
    "end": "910560"
  },
  {
    "text": "the review artifact",
    "start": "910560",
    "end": "912839"
  },
  {
    "text": "well it comes back to that fact that",
    "start": "912839",
    "end": "914820"
  },
  {
    "text": "we're committing to the app repositories",
    "start": "914820",
    "end": "916320"
  },
  {
    "text": "again we still need that revision data",
    "start": "916320",
    "end": "918660"
  },
  {
    "text": "in there and we still can't commit it",
    "start": "918660",
    "end": "920699"
  },
  {
    "text": "because it's coming from that repo",
    "start": "920699",
    "end": "922800"
  },
  {
    "text": "and now we also wanted to have a",
    "start": "922800",
    "end": "924600"
  },
  {
    "text": "completely final a beautiful immutable",
    "start": "924600",
    "end": "926459"
  },
  {
    "text": "artifact by CI time so how did we do",
    "start": "926459",
    "end": "928680"
  },
  {
    "text": "this exactly",
    "start": "928680",
    "end": "931220"
  },
  {
    "text": "to do this with a high degree of",
    "start": "931320",
    "end": "932579"
  },
  {
    "text": "confidence we used a series of",
    "start": "932579",
    "end": "934019"
  },
  {
    "text": "Transformations based on explicit",
    "start": "934019",
    "end": "935579"
  },
  {
    "text": "metadata",
    "start": "935579",
    "end": "937380"
  },
  {
    "text": "for example the app developer might give",
    "start": "937380",
    "end": "939360"
  },
  {
    "text": "us this image in their manifest",
    "start": "939360",
    "end": "941579"
  },
  {
    "text": "and then when we generate the review",
    "start": "941579",
    "end": "943199"
  },
  {
    "text": "artifact from it the tool is going to go",
    "start": "943199",
    "end": "945360"
  },
  {
    "text": "through and it's going to find all of",
    "start": "945360",
    "end": "946920"
  },
  {
    "text": "the containers that have that image and",
    "start": "946920",
    "end": "948779"
  },
  {
    "text": "it's going to add the special annotation",
    "start": "948779",
    "end": "950100"
  },
  {
    "text": "to those resources identifying those",
    "start": "950100",
    "end": "952139"
  },
  {
    "text": "containers",
    "start": "952139",
    "end": "953160"
  },
  {
    "text": "and then finally when we're going to",
    "start": "953160",
    "end": "954779"
  },
  {
    "text": "generate the release artifact at CI time",
    "start": "954779",
    "end": "957779"
  },
  {
    "text": "we go ahead and make that transformation",
    "start": "957779",
    "end": "959579"
  },
  {
    "text": "to those containers tagging them in a",
    "start": "959579",
    "end": "963720"
  },
  {
    "text": "surgical and structured way that tool is",
    "start": "963720",
    "end": "965820"
  },
  {
    "text": "not capable of making arbitrary changes",
    "start": "965820",
    "end": "967440"
  },
  {
    "text": "certainly nothing user directed it can",
    "start": "967440",
    "end": "969120"
  },
  {
    "text": "only do just that",
    "start": "969120",
    "end": "971839"
  },
  {
    "text": "so that's what the new system looks like",
    "start": "972620",
    "end": "975060"
  },
  {
    "text": "this has been working really well for us",
    "start": "975060",
    "end": "976860"
  },
  {
    "text": "but like I said at the beginning I'm not",
    "start": "976860",
    "end": "978300"
  },
  {
    "text": "trying to convince you to do the exact",
    "start": "978300",
    "end": "979560"
  },
  {
    "text": "same thing",
    "start": "979560",
    "end": "981360"
  },
  {
    "text": "even if you stick to a really similar",
    "start": "981360",
    "end": "983040"
  },
  {
    "text": "design there are some really obvious",
    "start": "983040",
    "end": "984959"
  },
  {
    "text": "substitutions",
    "start": "984959",
    "end": "986040"
  },
  {
    "text": "instead of a CLI to help you author",
    "start": "986040",
    "end": "988040"
  },
  {
    "text": "config you might have a UI or a editor",
    "start": "988040",
    "end": "991139"
  },
  {
    "text": "plugin instead of having kubernetes",
    "start": "991139",
    "end": "993120"
  },
  {
    "text": "style client-side custom resource you",
    "start": "993120",
    "end": "994740"
  },
  {
    "text": "could use something else it's more off",
    "start": "994740",
    "end": "995940"
  },
  {
    "text": "the shelf",
    "start": "995940",
    "end": "996839"
  },
  {
    "text": "depending on your risk tolerance you",
    "start": "996839",
    "end": "998399"
  },
  {
    "text": "might have an audit system instead of a",
    "start": "998399",
    "end": "999839"
  },
  {
    "text": "review artifact or perhaps you have",
    "start": "999839",
    "end": "1001639"
  },
  {
    "text": "something like a review bot that posted",
    "start": "1001639",
    "end": "1003259"
  },
  {
    "text": "stiffs under certain circumstances",
    "start": "1003259",
    "end": "1005839"
  },
  {
    "text": "instead of a file in GCS you can",
    "start": "1005839",
    "end": "1007639"
  },
  {
    "text": "obviously choose another highly",
    "start": "1007639",
    "end": "1009079"
  },
  {
    "text": "available data store that you are",
    "start": "1009079",
    "end": "1010399"
  },
  {
    "text": "comfortable having your releases depend",
    "start": "1010399",
    "end": "1011720"
  },
  {
    "text": "on or you might do pure get Ops and",
    "start": "1011720",
    "end": "1013579"
  },
  {
    "text": "commit to a separate repo",
    "start": "1013579",
    "end": "1016459"
  },
  {
    "text": "and speaking of get Ops this setup that",
    "start": "1016459",
    "end": "1018500"
  },
  {
    "text": "I'm describing it's not too far off the",
    "start": "1018500",
    "end": "1020060"
  },
  {
    "text": "one customize recommends",
    "start": "1020060",
    "end": "1021800"
  },
  {
    "text": "this slide is from a presentation that I",
    "start": "1021800",
    "end": "1023360"
  },
  {
    "text": "gave at kubecon North America 2021 with",
    "start": "1023360",
    "end": "1025339"
  },
  {
    "text": "Jeff Reagan one of the original",
    "start": "1025339",
    "end": "1026360"
  },
  {
    "text": "maintainers of customize and you can see",
    "start": "1026360",
    "end": "1029120"
  },
  {
    "text": "that describes a two repo setup one",
    "start": "1029120",
    "end": "1031400"
  },
  {
    "text": "where you have the customization",
    "start": "1031400",
    "end": "1032418"
  },
  {
    "text": "resource so that's the config API and",
    "start": "1032419",
    "end": "1034579"
  },
  {
    "text": "another where you have the fully",
    "start": "1034579",
    "end": "1035839"
  },
  {
    "text": "inflated Deployable resources",
    "start": "1035839",
    "end": "1038360"
  },
  {
    "text": "if we translate this to the diagram",
    "start": "1038360",
    "end": "1039860"
  },
  {
    "text": "style that I've been using so far we can",
    "start": "1039860",
    "end": "1041900"
  },
  {
    "text": "see that the first segments look just",
    "start": "1041900",
    "end": "1043520"
  },
  {
    "text": "about the same",
    "start": "1043520",
    "end": "1044540"
  },
  {
    "text": "we have that kubernetes style API called",
    "start": "1044540",
    "end": "1046938"
  },
  {
    "text": "customization we have it CLI that has a",
    "start": "1046939",
    "end": "1049580"
  },
  {
    "text": "sub command that helps you author that",
    "start": "1049580",
    "end": "1050960"
  },
  {
    "text": "object and then in the recommended setup",
    "start": "1050960",
    "end": "1053179"
  },
  {
    "text": "you commit that object to a repo the",
    "start": "1053179",
    "end": "1055460"
  },
  {
    "text": "first difference is that when you have",
    "start": "1055460",
    "end": "1056539"
  },
  {
    "text": "the tooling generate and commit the",
    "start": "1056539",
    "end": "1058580"
  },
  {
    "text": "inflated or wet configuration you put it",
    "start": "1058580",
    "end": "1060919"
  },
  {
    "text": "in a different repo but you're still",
    "start": "1060919",
    "end": "1063080"
  },
  {
    "text": "putting both of these artifacts Under",
    "start": "1063080",
    "end": "1064520"
  },
  {
    "text": "full human review",
    "start": "1064520",
    "end": "1066799"
  },
  {
    "text": "the second difference is that since you",
    "start": "1066799",
    "end": "1069020"
  },
  {
    "text": "are putting that somewhere else",
    "start": "1069020",
    "end": "1071440"
  },
  {
    "text": "you can have a single artifact for both",
    "start": "1071440",
    "end": "1074600"
  },
  {
    "text": "review and release because it can have",
    "start": "1074600",
    "end": "1075860"
  },
  {
    "text": "that revision data in it to begin with",
    "start": "1075860",
    "end": "1079299"
  },
  {
    "text": "so that's one system that works well to",
    "start": "1086299",
    "end": "1088700"
  },
  {
    "text": "fulfill the goals that I set out earlier",
    "start": "1088700",
    "end": "1090140"
  },
  {
    "text": "and some ideas for variations on it but",
    "start": "1090140",
    "end": "1092600"
  },
  {
    "text": "why does this work well what parts of it",
    "start": "1092600",
    "end": "1095299"
  },
  {
    "text": "are essential versus nice to have",
    "start": "1095299",
    "end": "1098000"
  },
  {
    "text": "to dig into this let's distill some",
    "start": "1098000",
    "end": "1099559"
  },
  {
    "text": "principles",
    "start": "1099559",
    "end": "1101980"
  },
  {
    "text": "the first principle is about the user",
    "start": "1103100",
    "end": "1104840"
  },
  {
    "text": "experience of the config format itself",
    "start": "1104840",
    "end": "1107720"
  },
  {
    "text": "this is a big part of how your users",
    "start": "1107720",
    "end": "1109820"
  },
  {
    "text": "experience your platform so it's",
    "start": "1109820",
    "end": "1111380"
  },
  {
    "text": "actually really important",
    "start": "1111380",
    "end": "1113000"
  },
  {
    "text": "the specific tooling that you'll choose",
    "start": "1113000",
    "end": "1115400"
  },
  {
    "text": "here in the format that you use will",
    "start": "1115400",
    "end": "1117440"
  },
  {
    "text": "depend on your organization's",
    "start": "1117440",
    "end": "1118820"
  },
  {
    "text": "preferences its policies and its culture",
    "start": "1118820",
    "end": "1120860"
  },
  {
    "text": "but the universal thing is to talk to",
    "start": "1120860",
    "end": "1122840"
  },
  {
    "text": "your users and find out what needs",
    "start": "1122840",
    "end": "1125240"
  },
  {
    "text": "they're going to need to be able to",
    "start": "1125240",
    "end": "1126740"
  },
  {
    "text": "express",
    "start": "1126740",
    "end": "1128240"
  },
  {
    "text": "maybe their intent is close to the",
    "start": "1128240",
    "end": "1129860"
  },
  {
    "text": "kubernetes apis themselves but maybe",
    "start": "1129860",
    "end": "1132200"
  },
  {
    "text": "it's not or maybe the answer depends on",
    "start": "1132200",
    "end": "1134720"
  },
  {
    "text": "the level of maturity of the project",
    "start": "1134720",
    "end": "1138039"
  },
  {
    "text": "inventory the cases that you have and",
    "start": "1138200",
    "end": "1140120"
  },
  {
    "text": "for each case make sure that you have a",
    "start": "1140120",
    "end": "1142400"
  },
  {
    "text": "way for the user to easily and",
    "start": "1142400",
    "end": "1143900"
  },
  {
    "text": "declaratively tell you",
    "start": "1143900",
    "end": "1145520"
  },
  {
    "text": "I want this",
    "start": "1145520",
    "end": "1147620"
  },
  {
    "text": "make sure that you can tell that intent",
    "start": "1147620",
    "end": "1149360"
  },
  {
    "text": "that they're expressing apart from",
    "start": "1149360",
    "end": "1150679"
  },
  {
    "text": "defaults that you're providing but that",
    "start": "1150679",
    "end": "1152900"
  },
  {
    "text": "they're not really trying to control",
    "start": "1152900",
    "end": "1154340"
  },
  {
    "text": "they're just accepting them",
    "start": "1154340",
    "end": "1157659"
  },
  {
    "text": "the second principle is about making",
    "start": "1158660",
    "end": "1160580"
  },
  {
    "text": "sure that you can automate changes to",
    "start": "1160580",
    "end": "1162140"
  },
  {
    "text": "any content that you're Distributing",
    "start": "1162140",
    "end": "1163460"
  },
  {
    "text": "widely",
    "start": "1163460",
    "end": "1164660"
  },
  {
    "text": "we ended up going with the schematized",
    "start": "1164660",
    "end": "1166400"
  },
  {
    "text": "versioned kubernetes style config",
    "start": "1166400",
    "end": "1168799"
  },
  {
    "text": "artifact but depending on your use case",
    "start": "1168799",
    "end": "1171200"
  },
  {
    "text": "you might not need something so bespoke",
    "start": "1171200",
    "end": "1172700"
  },
  {
    "text": "or formalized",
    "start": "1172700",
    "end": "1174260"
  },
  {
    "text": "no matter what you do though make sure",
    "start": "1174260",
    "end": "1176059"
  },
  {
    "text": "that you can find everything that you're",
    "start": "1176059",
    "end": "1177740"
  },
  {
    "text": "Distributing it's in a predictable",
    "start": "1177740",
    "end": "1179179"
  },
  {
    "text": "location",
    "start": "1179179",
    "end": "1180260"
  },
  {
    "text": "that you can read it that you can parse",
    "start": "1180260",
    "end": "1181820"
  },
  {
    "text": "it they can process it and that you can",
    "start": "1181820",
    "end": "1183500"
  },
  {
    "text": "dump it back to the repo with a level of",
    "start": "1183500",
    "end": "1185360"
  },
  {
    "text": "confidence that's not going to require",
    "start": "1185360",
    "end": "1186740"
  },
  {
    "text": "your team to go and take a look at what",
    "start": "1186740",
    "end": "1188419"
  },
  {
    "text": "you did",
    "start": "1188419",
    "end": "1189559"
  },
  {
    "text": "this is what makes the choice",
    "start": "1189559",
    "end": "1190880"
  },
  {
    "text": "maintainable at scale and more",
    "start": "1190880",
    "end": "1192559"
  },
  {
    "text": "importantly or just as importantly",
    "start": "1192559",
    "end": "1194120"
  },
  {
    "text": "really it makes it much easier to swap",
    "start": "1194120",
    "end": "1196280"
  },
  {
    "text": "out the solution for a different one as",
    "start": "1196280",
    "end": "1198260"
  },
  {
    "text": "your platform evolves",
    "start": "1198260",
    "end": "1201220"
  },
  {
    "text": "the next principle is to make",
    "start": "1202100",
    "end": "1203660"
  },
  {
    "text": "consequential changes visible",
    "start": "1203660",
    "end": "1206179"
  },
  {
    "text": "but arguably goes overboard on this by",
    "start": "1206179",
    "end": "1208340"
  },
  {
    "text": "putting every single change at the",
    "start": "1208340",
    "end": "1210140"
  },
  {
    "text": "deployed API level in front of the",
    "start": "1210140",
    "end": "1212059"
  },
  {
    "text": "Developers for review whether or not",
    "start": "1212059",
    "end": "1213980"
  },
  {
    "text": "they even customized anything",
    "start": "1213980",
    "end": "1216080"
  },
  {
    "text": "we're striking a balance here really",
    "start": "1216080",
    "end": "1217640"
  },
  {
    "text": "between exposing yourself and your users",
    "start": "1217640",
    "end": "1220580"
  },
  {
    "text": "to a diff that might not be meaningful",
    "start": "1220580",
    "end": "1222320"
  },
  {
    "text": "to them and on the flip side making sure",
    "start": "1222320",
    "end": "1225200"
  },
  {
    "text": "that when the change does have a mistake",
    "start": "1225200",
    "end": "1227240"
  },
  {
    "text": "in it somebody is able to see that as",
    "start": "1227240",
    "end": "1229340"
  },
  {
    "text": "soon as possible in the process",
    "start": "1229340",
    "end": "1232160"
  },
  {
    "text": "the bare minimum I think would be to",
    "start": "1232160",
    "end": "1233840"
  },
  {
    "text": "have a system for easily auditing the",
    "start": "1233840",
    "end": "1235400"
  },
  {
    "text": "diff between release artifacts with",
    "start": "1235400",
    "end": "1237559"
  },
  {
    "text": "something like that in place you could",
    "start": "1237559",
    "end": "1238880"
  },
  {
    "text": "also consider a sort of Middle Ground",
    "start": "1238880",
    "end": "1240260"
  },
  {
    "text": "where apps that don't have any",
    "start": "1240260",
    "end": "1242240"
  },
  {
    "text": "customizations can have their release",
    "start": "1242240",
    "end": "1243980"
  },
  {
    "text": "artifacts generated straight from the",
    "start": "1243980",
    "end": "1245660"
  },
  {
    "text": "higher level abstraction but as soon as",
    "start": "1245660",
    "end": "1247700"
  },
  {
    "text": "they start making customizations they",
    "start": "1247700",
    "end": "1249320"
  },
  {
    "text": "become required to commit to the full",
    "start": "1249320",
    "end": "1250940"
  },
  {
    "text": "artifact for review",
    "start": "1250940",
    "end": "1253720"
  },
  {
    "text": "if I had to pick one principle to follow",
    "start": "1255440",
    "end": "1257360"
  },
  {
    "text": "at the expense of the rest it would be",
    "start": "1257360",
    "end": "1259280"
  },
  {
    "text": "this one",
    "start": "1259280",
    "end": "1260539"
  },
  {
    "text": "snapshot exactly what you release and do",
    "start": "1260539",
    "end": "1263179"
  },
  {
    "text": "it as early in the process as you can",
    "start": "1263179",
    "end": "1265820"
  },
  {
    "text": "if you're doing peer get Ops and",
    "start": "1265820",
    "end": "1267260"
  },
  {
    "text": "committing it that's great",
    "start": "1267260",
    "end": "1268820"
  },
  {
    "text": "if you can't then I recommend doing it",
    "start": "1268820",
    "end": "1271100"
  },
  {
    "text": "as part of CI like we did this works",
    "start": "1271100",
    "end": "1273020"
  },
  {
    "text": "very well",
    "start": "1273020",
    "end": "1274340"
  },
  {
    "text": "if you absolutely can't avoid doing it",
    "start": "1274340",
    "end": "1276740"
  },
  {
    "text": "live during the deploy make sure that",
    "start": "1276740",
    "end": "1278900"
  },
  {
    "text": "you snapshot the result and store it",
    "start": "1278900",
    "end": "1280520"
  },
  {
    "text": "somewhere make sure that place is easily",
    "start": "1280520",
    "end": "1282620"
  },
  {
    "text": "accessible and that you have a plan for",
    "start": "1282620",
    "end": "1285080"
  },
  {
    "text": "quickly viewing the diff associated with",
    "start": "1285080",
    "end": "1286880"
  },
  {
    "text": "a given release when something goes",
    "start": "1286880",
    "end": "1288380"
  },
  {
    "text": "wrong",
    "start": "1288380",
    "end": "1289580"
  },
  {
    "text": "and make sure that your rollbacks will",
    "start": "1289580",
    "end": "1291440"
  },
  {
    "text": "reuse that state so that you don't have",
    "start": "1291440",
    "end": "1293480"
  },
  {
    "text": "the risk associated with regeneration in",
    "start": "1293480",
    "end": "1295520"
  },
  {
    "text": "such a critical piece of the disaster",
    "start": "1295520",
    "end": "1297080"
  },
  {
    "text": "recovery process",
    "start": "1297080",
    "end": "1300340"
  },
  {
    "text": "the final principle of our experience",
    "start": "1303020",
    "end": "1304820"
  },
  {
    "text": "suggests is modularity now this one",
    "start": "1304820",
    "end": "1307039"
  },
  {
    "text": "wasn't actually explicitly part of our",
    "start": "1307039",
    "end": "1308960"
  },
  {
    "text": "original goals haven't talked about it",
    "start": "1308960",
    "end": "1310820"
  },
  {
    "text": "yet but having it really paid off",
    "start": "1310820",
    "end": "1313820"
  },
  {
    "text": "this allowed us to extend the benefits",
    "start": "1313820",
    "end": "1315559"
  },
  {
    "text": "of the new system to as many",
    "start": "1315559",
    "end": "1316880"
  },
  {
    "text": "applications as possible including some",
    "start": "1316880",
    "end": "1318740"
  },
  {
    "text": "that weren't originally in scope by",
    "start": "1318740",
    "end": "1320419"
  },
  {
    "text": "making it possible to opt in at each",
    "start": "1320419",
    "end": "1322100"
  },
  {
    "text": "stage of the process",
    "start": "1322100",
    "end": "1324880"
  },
  {
    "text": "for each of the pieces of our design",
    "start": "1325880",
    "end": "1327260"
  },
  {
    "text": "there was some exception among thousands",
    "start": "1327260",
    "end": "1329480"
  },
  {
    "text": "of applications or our own system",
    "start": "1329480",
    "end": "1330799"
  },
  {
    "text": "services that couldn't use it",
    "start": "1330799",
    "end": "1333440"
  },
  {
    "text": "some apps have such a non-standard shape",
    "start": "1333440",
    "end": "1335780"
  },
  {
    "text": "that our CLI really isn't much helpful",
    "start": "1335780",
    "end": "1337760"
  },
  {
    "text": "to them because they're not really using",
    "start": "1337760",
    "end": "1339620"
  },
  {
    "text": "the standard bases and patches but they",
    "start": "1339620",
    "end": "1341900"
  },
  {
    "text": "could still declare the Key properties",
    "start": "1341900",
    "end": "1343100"
  },
  {
    "text": "of their application and runtime",
    "start": "1343100",
    "end": "1344240"
  },
  {
    "text": "manifest and they could use them with",
    "start": "1344240",
    "end": "1346100"
  },
  {
    "text": "their custom bases and patches",
    "start": "1346100",
    "end": "1349280"
  },
  {
    "text": "for some Advanced apps the safeguards",
    "start": "1349280",
    "end": "1351500"
  },
  {
    "text": "that we built into runtime manifest were",
    "start": "1351500",
    "end": "1352940"
  },
  {
    "text": "too restrictive and they couldn't use it",
    "start": "1352940",
    "end": "1354919"
  },
  {
    "text": "at all so okay they did whatever worked",
    "start": "1354919",
    "end": "1357620"
  },
  {
    "text": "for them and they committed a lock file",
    "start": "1357620",
    "end": "1359240"
  },
  {
    "text": "to the location where we expected it our",
    "start": "1359240",
    "end": "1361039"
  },
  {
    "text": "tooling would just pick it up from there",
    "start": "1361039",
    "end": "1364419"
  },
  {
    "text": "in a few really extreme cases mostly",
    "start": "1364520",
    "end": "1366679"
  },
  {
    "text": "those system Services we owned ourselves",
    "start": "1366679",
    "end": "1368240"
  },
  {
    "text": "we had a genuine and difficult to avoid",
    "start": "1368240",
    "end": "1370640"
  },
  {
    "text": "need for deploy time differentiation",
    "start": "1370640",
    "end": "1372380"
  },
  {
    "text": "that was really tough to design out so",
    "start": "1372380",
    "end": "1375380"
  },
  {
    "text": "we couldn't really even use the lock",
    "start": "1375380",
    "end": "1377240"
  },
  {
    "text": "file",
    "start": "1377240",
    "end": "1378380"
  },
  {
    "text": "for those ones though we could still",
    "start": "1378380",
    "end": "1379760"
  },
  {
    "text": "generate those release artifacts and",
    "start": "1379760",
    "end": "1381559"
  },
  {
    "text": "reuse them for rollbacks and we added",
    "start": "1381559",
    "end": "1383539"
  },
  {
    "text": "another risk mitigation in some of the",
    "start": "1383539",
    "end": "1385039"
  },
  {
    "text": "cases where we would commit test",
    "start": "1385039",
    "end": "1386539"
  },
  {
    "text": "fixtures using the sample inputs and",
    "start": "1386539",
    "end": "1388039"
  },
  {
    "text": "subject those fixtures to code review to",
    "start": "1388039",
    "end": "1389780"
  },
  {
    "text": "help surface the problems as early as",
    "start": "1389780",
    "end": "1391760"
  },
  {
    "text": "possible",
    "start": "1391760",
    "end": "1393440"
  },
  {
    "text": "as you can see the boundaries and",
    "start": "1393440",
    "end": "1395240"
  },
  {
    "text": "conventions that we included in our",
    "start": "1395240",
    "end": "1396559"
  },
  {
    "text": "system helped all these fermentations be",
    "start": "1396559",
    "end": "1399020"
  },
  {
    "text": "possible",
    "start": "1399020",
    "end": "1401380"
  },
  {
    "text": "now if you've been thinking wow that's",
    "start": "1401659",
    "end": "1403340"
  },
  {
    "text": "way too much work doesn't she remember",
    "start": "1403340",
    "end": "1405140"
  },
  {
    "text": "how this is not necessarily the most",
    "start": "1405140",
    "end": "1406820"
  },
  {
    "text": "important thing we have to do when we're",
    "start": "1406820",
    "end": "1408080"
  },
  {
    "text": "starting our platform I hear you and if",
    "start": "1408080",
    "end": "1410659"
  },
  {
    "text": "you have to choose I would say this",
    "start": "1410659",
    "end": "1412700"
  },
  {
    "text": "looks like the minimum viable setup",
    "start": "1412700",
    "end": "1416360"
  },
  {
    "text": "I would say choose a config API that",
    "start": "1416360",
    "end": "1418460"
  },
  {
    "text": "you're going to be able to manipulate",
    "start": "1418460",
    "end": "1419659"
  },
  {
    "text": "programmatically and replace in the",
    "start": "1419659",
    "end": "1421159"
  },
  {
    "text": "future",
    "start": "1421159",
    "end": "1422000"
  },
  {
    "text": "and then generate an artifact from that",
    "start": "1422000",
    "end": "1423620"
  },
  {
    "text": "config for each release that you do",
    "start": "1423620",
    "end": "1426860"
  },
  {
    "text": "make it immutable store it somewhere and",
    "start": "1426860",
    "end": "1429260"
  },
  {
    "text": "drive your releases off of it",
    "start": "1429260",
    "end": "1431179"
  },
  {
    "text": "if you can go a bit further generate it",
    "start": "1431179",
    "end": "1433460"
  },
  {
    "text": "as early in the process you can as you",
    "start": "1433460",
    "end": "1435200"
  },
  {
    "text": "can manage either Ci or to commit time",
    "start": "1435200",
    "end": "1438559"
  },
  {
    "text": "if you can go a bit further than that",
    "start": "1438559",
    "end": "1442159"
  },
  {
    "text": "invest more in user experience",
    "start": "1442159",
    "end": "1444380"
  },
  {
    "text": "make sure that your config API lets your",
    "start": "1444380",
    "end": "1447559"
  },
  {
    "text": "users Express the intent that they have",
    "start": "1447559",
    "end": "1450500"
  },
  {
    "text": "if in one of the many existing tools",
    "start": "1450500",
    "end": "1452419"
  },
  {
    "text": "fits your use case that's great but if",
    "start": "1452419",
    "end": "1454940"
  },
  {
    "text": "not the final segment of this talk is",
    "start": "1454940",
    "end": "1456559"
  },
  {
    "text": "for you",
    "start": "1456559",
    "end": "1458600"
  },
  {
    "text": "we're going to take a look at an example",
    "start": "1458600",
    "end": "1460100"
  },
  {
    "text": "that shows how to use tooling from",
    "start": "1460100",
    "end": "1461780"
  },
  {
    "text": "customizes KML library to build your own",
    "start": "1461780",
    "end": "1464059"
  },
  {
    "text": "client-side kubernetes style config API",
    "start": "1464059",
    "end": "1467059"
  },
  {
    "text": "I'm going to go through this very",
    "start": "1467059",
    "end": "1468140"
  },
  {
    "text": "quickly but the key pieces that I'm",
    "start": "1468140",
    "end": "1469880"
  },
  {
    "text": "showing here are part of an end-to-end",
    "start": "1469880",
    "end": "1471740"
  },
  {
    "text": "example that I committed to customize",
    "start": "1471740",
    "end": "1473120"
  },
  {
    "text": "repo and I'll give you a link at the end",
    "start": "1473120",
    "end": "1474980"
  },
  {
    "text": "so that you can dive in deeper yourself",
    "start": "1474980",
    "end": "1478299"
  },
  {
    "text": "but hold on a minute carom function",
    "start": "1478700",
    "end": "1481220"
  },
  {
    "text": "framework what what is that let's break",
    "start": "1481220",
    "end": "1484039"
  },
  {
    "text": "down that definition",
    "start": "1484039",
    "end": "1486500"
  },
  {
    "text": "first of all krm stands for kubernetes",
    "start": "1486500",
    "end": "1488480"
  },
  {
    "text": "resource model",
    "start": "1488480",
    "end": "1489799"
  },
  {
    "text": "there are a lot of conventions around",
    "start": "1489799",
    "end": "1491299"
  },
  {
    "text": "this but for our purposes to follow the",
    "start": "1491299",
    "end": "1493340"
  },
  {
    "text": "krm we can say that you need to include",
    "start": "1493340",
    "end": "1495620"
  },
  {
    "text": "the standard metadata that's used for",
    "start": "1495620",
    "end": "1497299"
  },
  {
    "text": "identification purposes so specifically",
    "start": "1497299",
    "end": "1499460"
  },
  {
    "text": "you need to have a top level API version",
    "start": "1499460",
    "end": "1501320"
  },
  {
    "text": "field",
    "start": "1501320",
    "end": "1502520"
  },
  {
    "text": "a top level kind field and a meta",
    "start": "1502520",
    "end": "1505520"
  },
  {
    "text": "data.name field optionally also a",
    "start": "1505520",
    "end": "1507860"
  },
  {
    "text": "namespace field",
    "start": "1507860",
    "end": "1509539"
  },
  {
    "text": "so far in the presentation I've just",
    "start": "1509539",
    "end": "1511039"
  },
  {
    "text": "been calling these kubernetes style",
    "start": "1511039",
    "end": "1512419"
  },
  {
    "text": "resources",
    "start": "1512419",
    "end": "1514960"
  },
  {
    "text": "now a krm function is a piece of code",
    "start": "1515539",
    "end": "1518659"
  },
  {
    "text": "that modifies a set of krm resources",
    "start": "1518659",
    "end": "1522260"
  },
  {
    "text": "that function might edit the resources",
    "start": "1522260",
    "end": "1524419"
  },
  {
    "text": "it might add to the set it might remove",
    "start": "1524419",
    "end": "1526039"
  },
  {
    "text": "from the set and what exactly it does",
    "start": "1526039",
    "end": "1528200"
  },
  {
    "text": "depends on some desired State that's",
    "start": "1528200",
    "end": "1530960"
  },
  {
    "text": "declared in a krm object so another",
    "start": "1530960",
    "end": "1533720"
  },
  {
    "text": "resource",
    "start": "1533720",
    "end": "1535940"
  },
  {
    "text": "building on this the Karen functions",
    "start": "1535940",
    "end": "1538340"
  },
  {
    "text": "specification",
    "start": "1538340",
    "end": "1539720"
  },
  {
    "text": "is a standard for Designing care and",
    "start": "1539720",
    "end": "1542120"
  },
  {
    "text": "functions that will work together in a",
    "start": "1542120",
    "end": "1544460"
  },
  {
    "text": "config management pipeline like the one",
    "start": "1544460",
    "end": "1546080"
  },
  {
    "text": "customized uses",
    "start": "1546080",
    "end": "1547640"
  },
  {
    "text": "and then finally we get to the term we",
    "start": "1547640",
    "end": "1549200"
  },
  {
    "text": "wanted to Define krm function framework",
    "start": "1549200",
    "end": "1551720"
  },
  {
    "text": "which is a toolkit for writing functions",
    "start": "1551720",
    "end": "1553880"
  },
  {
    "text": "in go that follow that specification",
    "start": "1553880",
    "end": "1558220"
  },
  {
    "text": "so that was still pretty dense so I'll",
    "start": "1558320",
    "end": "1559940"
  },
  {
    "text": "attempt to synthesize it a bit more",
    "start": "1559940",
    "end": "1562400"
  },
  {
    "text": "the functions framework is a toolkit for",
    "start": "1562400",
    "end": "1564919"
  },
  {
    "text": "writing go code that generates or",
    "start": "1564919",
    "end": "1566779"
  },
  {
    "text": "modifies local kubernetes configuration",
    "start": "1566779",
    "end": "1569120"
  },
  {
    "text": "based on some state that is declared in",
    "start": "1569120",
    "end": "1572240"
  },
  {
    "text": "a local kubernetes style config API",
    "start": "1572240",
    "end": "1575179"
  },
  {
    "text": "so it's a toolkit for basically building",
    "start": "1575179",
    "end": "1577400"
  },
  {
    "text": "a resource like the runtime manifest",
    "start": "1577400",
    "end": "1580640"
  },
  {
    "text": "config API that I was showing",
    "start": "1580640",
    "end": "1583100"
  },
  {
    "text": "the complicated terminology here comes",
    "start": "1583100",
    "end": "1584840"
  },
  {
    "text": "from the fact that this toolkit is",
    "start": "1584840",
    "end": "1586279"
  },
  {
    "text": "helping you do it in such a way that if",
    "start": "1586279",
    "end": "1588260"
  },
  {
    "text": "you want to you can also use the result",
    "start": "1588260",
    "end": "1590299"
  },
  {
    "text": "as an extension for customized kept or",
    "start": "1590299",
    "end": "1592400"
  },
  {
    "text": "other similar Tools in addition to being",
    "start": "1592400",
    "end": "1594320"
  },
  {
    "text": "able to use it on its own",
    "start": "1594320",
    "end": "1597580"
  },
  {
    "text": "so here's an example of some an API that",
    "start": "1597980",
    "end": "1600080"
  },
  {
    "text": "you could build with this framework as",
    "start": "1600080",
    "end": "1602240"
  },
  {
    "text": "you can see it starts with some",
    "start": "1602240",
    "end": "1603620"
  },
  {
    "text": "kubernetes style metadata",
    "start": "1603620",
    "end": "1605419"
  },
  {
    "text": "and it allows an app owner to describe",
    "start": "1605419",
    "end": "1607220"
  },
  {
    "text": "some hypothetical app and workload",
    "start": "1607220",
    "end": "1608779"
  },
  {
    "text": "properties",
    "start": "1608779",
    "end": "1610100"
  },
  {
    "text": "these are completely arbitrary by the",
    "start": "1610100",
    "end": "1611900"
  },
  {
    "text": "way the framework beyond the metadata",
    "start": "1611900",
    "end": "1613400"
  },
  {
    "text": "has no opinion about what What fields",
    "start": "1613400",
    "end": "1615980"
  },
  {
    "text": "you define",
    "start": "1615980",
    "end": "1618278"
  },
  {
    "text": "to implement this you might start by",
    "start": "1618559",
    "end": "1620419"
  },
  {
    "text": "defining the corresponding start type",
    "start": "1620419",
    "end": "1622880"
  },
  {
    "text": "the framework can take advantage of open",
    "start": "1622880",
    "end": "1624620"
  },
  {
    "text": "API schemas and this example shows you",
    "start": "1624620",
    "end": "1627260"
  },
  {
    "text": "how you can take advantage of cube",
    "start": "1627260",
    "end": "1628880"
  },
  {
    "text": "Builder annotations to have a schema",
    "start": "1628880",
    "end": "1631159"
  },
  {
    "text": "generated for you which is pretty neat",
    "start": "1631159",
    "end": "1634460"
  },
  {
    "text": "you can then Implement a schema method",
    "start": "1634460",
    "end": "1636440"
  },
  {
    "text": "on your type that returns a generated",
    "start": "1636440",
    "end": "1638360"
  },
  {
    "text": "schema and then you'll get validation",
    "start": "1638360",
    "end": "1640220"
  },
  {
    "text": "nearly for free",
    "start": "1640220",
    "end": "1641900"
  },
  {
    "text": "this method will automatically be called",
    "start": "1641900",
    "end": "1643580"
  },
  {
    "text": "by the framework and it will also call",
    "start": "1643580",
    "end": "1646460"
  },
  {
    "text": "validate and default if you define them",
    "start": "1646460",
    "end": "1649640"
  },
  {
    "text": "those two methods do what they sound",
    "start": "1649640",
    "end": "1651020"
  },
  {
    "text": "like they let you implement custom",
    "start": "1651020",
    "end": "1652640"
  },
  {
    "text": "validations defaulting",
    "start": "1652640",
    "end": "1654559"
  },
  {
    "text": "in some all three of these things help",
    "start": "1654559",
    "end": "1656419"
  },
  {
    "text": "you make sure that the data that you got",
    "start": "1656419",
    "end": "1657799"
  },
  {
    "text": "from the user so an example app in this",
    "start": "1657799",
    "end": "1659900"
  },
  {
    "text": "case is in good shape before your main",
    "start": "1659900",
    "end": "1661640"
  },
  {
    "text": "business logic gets called",
    "start": "1661640",
    "end": "1663860"
  },
  {
    "text": "and that main business logic or in other",
    "start": "1663860",
    "end": "1666080"
  },
  {
    "text": "words the core of your implementation",
    "start": "1666080",
    "end": "1667760"
  },
  {
    "text": "really is going to go in a method called",
    "start": "1667760",
    "end": "1669799"
  },
  {
    "text": "filter",
    "start": "1669799",
    "end": "1671120"
  },
  {
    "text": "this is where you create and manipulate",
    "start": "1671120",
    "end": "1672980"
  },
  {
    "text": "yaml objects until you have a set that",
    "start": "1672980",
    "end": "1674900"
  },
  {
    "text": "reflects the desired state that the",
    "start": "1674900",
    "end": "1676700"
  },
  {
    "text": "config API Express so the example app",
    "start": "1676700",
    "end": "1678860"
  },
  {
    "text": "that you were given",
    "start": "1678860",
    "end": "1680720"
  },
  {
    "text": "the framework has a wide range of tools",
    "start": "1680720",
    "end": "1682279"
  },
  {
    "text": "to help with this task as well from",
    "start": "1682279",
    "end": "1684020"
  },
  {
    "text": "helpers that make surgical edits to",
    "start": "1684020",
    "end": "1685700"
  },
  {
    "text": "particular fields to things that we call",
    "start": "1685700",
    "end": "1687919"
  },
  {
    "text": "processors which are higher level",
    "start": "1687919",
    "end": "1690140"
  },
  {
    "text": "this example demonstrates the template",
    "start": "1690140",
    "end": "1691940"
  },
  {
    "text": "processor which actually lets you use",
    "start": "1691940",
    "end": "1693620"
  },
  {
    "text": "familiar templating go templating",
    "start": "1693620",
    "end": "1695419"
  },
  {
    "text": "specifically in the form of resources",
    "start": "1695419",
    "end": "1697460"
  },
  {
    "text": "and patches that are in go template",
    "start": "1697460",
    "end": "1699620"
  },
  {
    "text": "files as your primary implementation",
    "start": "1699620",
    "end": "1701059"
  },
  {
    "text": "detail",
    "start": "1701059",
    "end": "1703480"
  },
  {
    "text": "what ties all of this together in the",
    "start": "1703820",
    "end": "1705440"
  },
  {
    "text": "framework is something I like to call a",
    "start": "1705440",
    "end": "1706820"
  },
  {
    "text": "dispatcher which basically looks up the",
    "start": "1706820",
    "end": "1708799"
  },
  {
    "text": "incoming type that came from the user so",
    "start": "1708799",
    "end": "1711020"
  },
  {
    "text": "example app in our case and it finds the",
    "start": "1711020",
    "end": "1713299"
  },
  {
    "text": "corresponding implementation so all that",
    "start": "1713299",
    "end": "1714919"
  },
  {
    "text": "code we just looked at",
    "start": "1714919",
    "end": "1716419"
  },
  {
    "text": "the dispatcher pattern allows you to",
    "start": "1716419",
    "end": "1718340"
  },
  {
    "text": "handle multiple abstractions or moreover",
    "start": "1718340",
    "end": "1720919"
  },
  {
    "text": "multiple versions of a single",
    "start": "1720919",
    "end": "1722600"
  },
  {
    "text": "abstraction so you can evolve your API",
    "start": "1722600",
    "end": "1724220"
  },
  {
    "text": "over time through one binary",
    "start": "1724220",
    "end": "1727340"
  },
  {
    "text": "it also gives you a hook for",
    "start": "1727340",
    "end": "1728480"
  },
  {
    "text": "post-processing which we're using in",
    "start": "1728480",
    "end": "1730700"
  },
  {
    "text": "this example to sort fields in a",
    "start": "1730700",
    "end": "1732020"
  },
  {
    "text": "deterministic order before output no",
    "start": "1732020",
    "end": "1733760"
  },
  {
    "text": "matter which API we just processed",
    "start": "1733760",
    "end": "1737320"
  },
  {
    "text": "once you have all those pieces in place",
    "start": "1737419",
    "end": "1739100"
  },
  {
    "text": "there are a handful of ways that you can",
    "start": "1739100",
    "end": "1740720"
  },
  {
    "text": "actually use your new config API",
    "start": "1740720",
    "end": "1743240"
  },
  {
    "text": "the framework makes it easy to build a",
    "start": "1743240",
    "end": "1745159"
  },
  {
    "text": "dedicated binary that you can use and",
    "start": "1745159",
    "end": "1746900"
  },
  {
    "text": "you use it bypassing the config file as",
    "start": "1746900",
    "end": "1748520"
  },
  {
    "text": "the first argument",
    "start": "1748520",
    "end": "1749840"
  },
  {
    "text": "the framework also has some help helpers",
    "start": "1749840",
    "end": "1751880"
  },
  {
    "text": "for building a Docker file that can help",
    "start": "1751880",
    "end": "1755299"
  },
  {
    "text": "you create a containerized version and",
    "start": "1755299",
    "end": "1757100"
  },
  {
    "text": "as I alluded to earlier this framework",
    "start": "1757100",
    "end": "1758779"
  },
  {
    "text": "was created to help implement the care",
    "start": "1758779",
    "end": "1760820"
  },
  {
    "text": "and function specification so you can",
    "start": "1760820",
    "end": "1762860"
  },
  {
    "text": "also plug this into either kept",
    "start": "1762860",
    "end": "1765559"
  },
  {
    "text": "customize or any compliant tool",
    "start": "1765559",
    "end": "1769179"
  },
  {
    "text": "so if that quick walkthrough piqued your",
    "start": "1769580",
    "end": "1771260"
  },
  {
    "text": "interest please have a look through the",
    "start": "1771260",
    "end": "1773240"
  },
  {
    "text": "complete example which is at the QR code",
    "start": "1773240",
    "end": "1775460"
  },
  {
    "text": "on the left and give the framework a try",
    "start": "1775460",
    "end": "1778399"
  },
  {
    "text": "the link on the left also contains a few",
    "start": "1778399",
    "end": "1780679"
  },
  {
    "text": "resources relevant to this talk",
    "start": "1780679",
    "end": "1783020"
  },
  {
    "text": "and whether or not you want to use this",
    "start": "1783020",
    "end": "1784399"
  },
  {
    "text": "toolkit specifically I sincerely hope",
    "start": "1784399",
    "end": "1786080"
  },
  {
    "text": "you learned something useful from this",
    "start": "1786080",
    "end": "1787279"
  },
  {
    "text": "talk and I thank you for your time",
    "start": "1787279",
    "end": "1790960"
  }
]