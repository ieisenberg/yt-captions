[
  {
    "text": "hi",
    "start": "240",
    "end": "1040"
  },
  {
    "text": "my name is michael corsi",
    "start": "1040",
    "end": "3520"
  },
  {
    "text": "i'm a solution architect at gaston",
    "start": "3520",
    "end": "6160"
  },
  {
    "text": "bayview and today i'm going to show you",
    "start": "6160",
    "end": "9200"
  },
  {
    "text": "how to use csi snapshot for backing up",
    "start": "9200",
    "end": "12400"
  },
  {
    "text": "your application",
    "start": "12400",
    "end": "14160"
  },
  {
    "text": "so we'll see different things",
    "start": "14160",
    "end": "16640"
  },
  {
    "text": "the first thing that we're going to",
    "start": "16640",
    "end": "18080"
  },
  {
    "text": "explore is why do we need snapshot to",
    "start": "18080",
    "end": "20320"
  },
  {
    "text": "make a good backup",
    "start": "20320",
    "end": "22000"
  },
  {
    "text": "rather than file system copy then we'll",
    "start": "22000",
    "end": "24720"
  },
  {
    "text": "see what is the container storage",
    "start": "24720",
    "end": "27519"
  },
  {
    "text": "interface",
    "start": "27519",
    "end": "28880"
  },
  {
    "text": "then we're going to use",
    "start": "28880",
    "end": "30800"
  },
  {
    "text": "this part of the csi called",
    "start": "30800",
    "end": "34239"
  },
  {
    "text": "the snapshot part to take a backup of",
    "start": "34239",
    "end": "36800"
  },
  {
    "text": "your world namespace",
    "start": "36800",
    "end": "38960"
  },
  {
    "text": "and to finish",
    "start": "38960",
    "end": "40320"
  },
  {
    "text": "we'll see the limitation of the solution",
    "start": "40320",
    "end": "42480"
  },
  {
    "text": "that we're going to demonstrate for the",
    "start": "42480",
    "end": "44320"
  },
  {
    "text": "long term protection",
    "start": "44320",
    "end": "47760"
  },
  {
    "text": "why do we need snapshot rather than file",
    "start": "48320",
    "end": "52079"
  },
  {
    "text": "system copy to take good backup",
    "start": "52079",
    "end": "56399"
  },
  {
    "text": "the reason is simple let's take us let's",
    "start": "56399",
    "end": "59199"
  },
  {
    "text": "take a pvc with six five",
    "start": "59199",
    "end": "62960"
  },
  {
    "text": "at t0",
    "start": "62960",
    "end": "65198"
  },
  {
    "text": "f1 has four banana f6 has four pineapple",
    "start": "65199",
    "end": "70080"
  },
  {
    "text": "at t1 5",
    "start": "70080",
    "end": "72320"
  },
  {
    "text": "at t2 6",
    "start": "72320",
    "end": "74320"
  },
  {
    "text": "then you take a snapshot and the",
    "start": "74320",
    "end": "76159"
  },
  {
    "text": "snapshot is crash consistent which means",
    "start": "76159",
    "end": "79040"
  },
  {
    "text": "all the files are captured exactly in",
    "start": "79040",
    "end": "82400"
  },
  {
    "text": "the same time so you capture the six",
    "start": "82400",
    "end": "84840"
  },
  {
    "text": "banana and you capture also the sixth",
    "start": "84840",
    "end": "87680"
  },
  {
    "text": "pineapple all that in the same time",
    "start": "87680",
    "end": "90000"
  },
  {
    "text": "consistent with the actual",
    "start": "90000",
    "end": "92079"
  },
  {
    "text": "file system state before the crash",
    "start": "92079",
    "end": "96079"
  },
  {
    "text": "if you do a file system copy",
    "start": "96079",
    "end": "99520"
  },
  {
    "text": "you copy",
    "start": "99520",
    "end": "101040"
  },
  {
    "text": "each file one by one while the system is",
    "start": "101040",
    "end": "104560"
  },
  {
    "text": "still evolving so you may find yourself",
    "start": "104560",
    "end": "107439"
  },
  {
    "text": "at",
    "start": "107439",
    "end": "108560"
  },
  {
    "text": "the moment of the backup",
    "start": "108560",
    "end": "110560"
  },
  {
    "text": "taking the sixth banana but when you",
    "start": "110560",
    "end": "113040"
  },
  {
    "text": "finish the copy you finish with f6 with",
    "start": "113040",
    "end": "115920"
  },
  {
    "text": "eight pineapples",
    "start": "115920",
    "end": "117520"
  },
  {
    "text": "and you are not in the",
    "start": "117520",
    "end": "120719"
  },
  {
    "text": "real actual state of the file system",
    "start": "120719",
    "end": "123920"
  },
  {
    "text": "before the crash so you're not crush",
    "start": "123920",
    "end": "125920"
  },
  {
    "text": "consistent",
    "start": "125920",
    "end": "127759"
  },
  {
    "text": "it's why you need to use snapshot",
    "start": "127759",
    "end": "130640"
  },
  {
    "text": "to take good backup but snapshot",
    "start": "130640",
    "end": "134400"
  },
  {
    "text": "is crash consistent but not application",
    "start": "134400",
    "end": "137680"
  },
  {
    "text": "consistent so what does it mean",
    "start": "137680",
    "end": "140800"
  },
  {
    "text": "let's take an example of an application",
    "start": "140800",
    "end": "143200"
  },
  {
    "text": "like kafka kafka is",
    "start": "143200",
    "end": "146879"
  },
  {
    "text": "about managing messages",
    "start": "146879",
    "end": "149360"
  },
  {
    "text": "it's made of topic",
    "start": "149360",
    "end": "150959"
  },
  {
    "text": "topics are made of partitions partitions",
    "start": "150959",
    "end": "153440"
  },
  {
    "text": "are made of",
    "start": "153440",
    "end": "154800"
  },
  {
    "text": "segment",
    "start": "154800",
    "end": "155760"
  },
  {
    "text": "and segments",
    "start": "155760",
    "end": "157120"
  },
  {
    "text": "are the fives",
    "start": "157120",
    "end": "159440"
  },
  {
    "text": "in which you write the kafka message",
    "start": "159440",
    "end": "164239"
  },
  {
    "text": "to get",
    "start": "164480",
    "end": "166160"
  },
  {
    "text": "very high throughput",
    "start": "166160",
    "end": "167920"
  },
  {
    "text": "kafka is not writing immediately the",
    "start": "167920",
    "end": "170879"
  },
  {
    "text": "message",
    "start": "170879",
    "end": "171920"
  },
  {
    "text": "to the file system it actually used the",
    "start": "171920",
    "end": "174720"
  },
  {
    "text": "os virtual memory",
    "start": "174720",
    "end": "177200"
  },
  {
    "text": "to open the file and when you write when",
    "start": "177200",
    "end": "180720"
  },
  {
    "text": "kefka writes a message it actually write",
    "start": "180720",
    "end": "182800"
  },
  {
    "text": "it in the ram in the memory",
    "start": "182800",
    "end": "185599"
  },
  {
    "text": "not in the file system it's only when",
    "start": "185599",
    "end": "188000"
  },
  {
    "text": "some of the conditions are made like",
    "start": "188000",
    "end": "190239"
  },
  {
    "text": "size is rich or the timer root is",
    "start": "190239",
    "end": "192560"
  },
  {
    "text": "reached that kafka takes the decision to",
    "start": "192560",
    "end": "194879"
  },
  {
    "text": "flush",
    "start": "194879",
    "end": "195840"
  },
  {
    "text": "the file",
    "start": "195840",
    "end": "198080"
  },
  {
    "text": "and then the file is",
    "start": "198080",
    "end": "199760"
  },
  {
    "text": "and then the message are really right",
    "start": "199760",
    "end": "201280"
  },
  {
    "text": "into the file system but",
    "start": "201280",
    "end": "203760"
  },
  {
    "text": "what happened",
    "start": "203760",
    "end": "205040"
  },
  {
    "text": "if the snapshot",
    "start": "205040",
    "end": "207200"
  },
  {
    "text": "happen",
    "start": "207200",
    "end": "208720"
  },
  {
    "text": "before the flush",
    "start": "208720",
    "end": "211200"
  },
  {
    "text": "then your segment is not in the backup",
    "start": "211200",
    "end": "215360"
  },
  {
    "text": "so you may find yourself in the",
    "start": "215360",
    "end": "217120"
  },
  {
    "text": "situation where some of the partition",
    "start": "217120",
    "end": "219360"
  },
  {
    "text": "has all the segment and some other",
    "start": "219360",
    "end": "222080"
  },
  {
    "text": "partition does not have all the segments",
    "start": "222080",
    "end": "225599"
  },
  {
    "text": "and in the point of view of kafka this",
    "start": "225599",
    "end": "227760"
  },
  {
    "text": "is not consistent it's why we say that",
    "start": "227760",
    "end": "230319"
  },
  {
    "text": "snapshots are crash consistent but not",
    "start": "230319",
    "end": "233360"
  },
  {
    "text": "application consistent",
    "start": "233360",
    "end": "236400"
  },
  {
    "text": "as a quick takeaway",
    "start": "236400",
    "end": "238720"
  },
  {
    "text": "let's say that",
    "start": "238720",
    "end": "241599"
  },
  {
    "text": "it's better to use snapshot than file",
    "start": "241599",
    "end": "243920"
  },
  {
    "text": "system copy unless",
    "start": "243920",
    "end": "246080"
  },
  {
    "text": "you are able to freeze",
    "start": "246080",
    "end": "248239"
  },
  {
    "text": "in this case",
    "start": "248239",
    "end": "249680"
  },
  {
    "text": "your file system backup will be crash",
    "start": "249680",
    "end": "252840"
  },
  {
    "text": "consistent and",
    "start": "252840",
    "end": "254959"
  },
  {
    "text": "snapshot is crash consistent but not",
    "start": "254959",
    "end": "258400"
  },
  {
    "text": "necessary",
    "start": "258400",
    "end": "259759"
  },
  {
    "text": "application consistent",
    "start": "259759",
    "end": "261759"
  },
  {
    "text": "unless you have a mechanism",
    "start": "261759",
    "end": "264080"
  },
  {
    "text": "to flush before taking the snapshot",
    "start": "264080",
    "end": "268840"
  },
  {
    "text": "to understand",
    "start": "269199",
    "end": "270960"
  },
  {
    "text": "why we needed",
    "start": "270960",
    "end": "272479"
  },
  {
    "text": "the",
    "start": "272479",
    "end": "273440"
  },
  {
    "text": "container storage interface in",
    "start": "273440",
    "end": "274880"
  },
  {
    "text": "kubernetes we need to understand how",
    "start": "274880",
    "end": "277759"
  },
  {
    "text": "work dynamics storage provisioning",
    "start": "277759",
    "end": "281280"
  },
  {
    "text": "when the user submits a pvc",
    "start": "281280",
    "end": "284720"
  },
  {
    "text": "kubernetes api translate this pvc",
    "start": "284720",
    "end": "287759"
  },
  {
    "text": "request to the driver and the driver on",
    "start": "287759",
    "end": "290400"
  },
  {
    "text": "its turn is going to speak to the",
    "start": "290400",
    "end": "291919"
  },
  {
    "text": "storage provider to create a volume",
    "start": "291919",
    "end": "296240"
  },
  {
    "text": "in turn",
    "start": "296240",
    "end": "298000"
  },
  {
    "text": "you get a pv",
    "start": "298000",
    "end": "299759"
  },
  {
    "text": "in the update of the pvc",
    "start": "299759",
    "end": "303680"
  },
  {
    "text": "what is important to understand here is",
    "start": "303680",
    "end": "305759"
  },
  {
    "text": "this part that we call the driver is",
    "start": "305759",
    "end": "308639"
  },
  {
    "text": "belonging to the kubernetes code",
    "start": "308639",
    "end": "311840"
  },
  {
    "text": "but this part that we call the storage",
    "start": "311840",
    "end": "314000"
  },
  {
    "text": "provider is not belonging to kubernetes",
    "start": "314000",
    "end": "316720"
  },
  {
    "text": "this part could be ebs",
    "start": "316720",
    "end": "319840"
  },
  {
    "text": "it could be azure disk",
    "start": "319840",
    "end": "321840"
  },
  {
    "text": "safe",
    "start": "321840",
    "end": "323360"
  },
  {
    "text": "many many storage providers not so many",
    "start": "323360",
    "end": "326400"
  },
  {
    "text": "as we're going to see in the in the",
    "start": "326400",
    "end": "328720"
  },
  {
    "text": "previous version before the csi",
    "start": "328720",
    "end": "332240"
  },
  {
    "text": "and now when",
    "start": "332240",
    "end": "334000"
  },
  {
    "text": "you need",
    "start": "334000",
    "end": "335520"
  },
  {
    "text": "to",
    "start": "335520",
    "end": "336400"
  },
  {
    "text": "attach",
    "start": "336400",
    "end": "337440"
  },
  {
    "text": "a pod to your pv",
    "start": "337440",
    "end": "339600"
  },
  {
    "text": "you submit the pod plus the pvc request",
    "start": "339600",
    "end": "342479"
  },
  {
    "text": "and it's also the job of the driver",
    "start": "342479",
    "end": "345759"
  },
  {
    "text": "to",
    "start": "345759",
    "end": "346960"
  },
  {
    "text": "work",
    "start": "346960",
    "end": "348160"
  },
  {
    "text": "on the node to attach",
    "start": "348160",
    "end": "350560"
  },
  {
    "text": "the pv to the node where the body is",
    "start": "350560",
    "end": "352479"
  },
  {
    "text": "scheduled which in turn",
    "start": "352479",
    "end": "354639"
  },
  {
    "text": "will return in the moon status and",
    "start": "354639",
    "end": "356800"
  },
  {
    "text": "translate to a bud status",
    "start": "356800",
    "end": "360240"
  },
  {
    "text": "oh",
    "start": "360240",
    "end": "361520"
  },
  {
    "text": "the issue here",
    "start": "361520",
    "end": "363199"
  },
  {
    "text": "was this part the driver the driver",
    "start": "363199",
    "end": "365840"
  },
  {
    "text": "belonged to the kubernetes code and for",
    "start": "365840",
    "end": "368160"
  },
  {
    "text": "this reason",
    "start": "368160",
    "end": "369600"
  },
  {
    "text": "it was a limited number of driver",
    "start": "369600",
    "end": "372960"
  },
  {
    "text": "you can see this limited number of",
    "start": "372960",
    "end": "374720"
  },
  {
    "text": "drivers here",
    "start": "374720",
    "end": "376240"
  },
  {
    "text": "they are all represented here actually",
    "start": "376240",
    "end": "380240"
  },
  {
    "text": "that's all",
    "start": "380240",
    "end": "382160"
  },
  {
    "text": "and that's an issue",
    "start": "382160",
    "end": "384160"
  },
  {
    "text": "because let's say you are netapp",
    "start": "384160",
    "end": "387600"
  },
  {
    "text": "and you want to communicate with",
    "start": "387600",
    "end": "389440"
  },
  {
    "text": "kubernetes you want to",
    "start": "389440",
    "end": "391520"
  },
  {
    "text": "let your customer be able to create",
    "start": "391520",
    "end": "393919"
  },
  {
    "text": "netapp volume for their kubernetes",
    "start": "393919",
    "end": "395919"
  },
  {
    "text": "workload",
    "start": "395919",
    "end": "397280"
  },
  {
    "text": "the only solution the netapp team has at",
    "start": "397280",
    "end": "400479"
  },
  {
    "text": "this moment was to submit",
    "start": "400479",
    "end": "403360"
  },
  {
    "text": "her code",
    "start": "403360",
    "end": "404560"
  },
  {
    "text": "to the kubernetes team and the",
    "start": "404560",
    "end": "407520"
  },
  {
    "text": "kubernetes team has to accept the code",
    "start": "407520",
    "end": "410160"
  },
  {
    "text": "then if you have a bug in your driver",
    "start": "410160",
    "end": "413039"
  },
  {
    "text": "you need to wait for the next kubernetes",
    "start": "413039",
    "end": "415280"
  },
  {
    "text": "release so your",
    "start": "415280",
    "end": "418560"
  },
  {
    "text": "your",
    "start": "418720",
    "end": "419919"
  },
  {
    "text": "release cycle of your driver is tied to",
    "start": "419919",
    "end": "423039"
  },
  {
    "text": "the release cycle of kubernetes and for",
    "start": "423039",
    "end": "425199"
  },
  {
    "text": "all this reason that was an issue",
    "start": "425199",
    "end": "427280"
  },
  {
    "text": "it's why the kubernetes team created the",
    "start": "427280",
    "end": "430240"
  },
  {
    "text": "csi the continuous storage interface csi",
    "start": "430240",
    "end": "432319"
  },
  {
    "text": "let you introduce your storage driver",
    "start": "432319",
    "end": "434960"
  },
  {
    "text": "without depending on the kubernetes code",
    "start": "434960",
    "end": "438400"
  },
  {
    "text": "you define a specific set of interface",
    "start": "438400",
    "end": "440560"
  },
  {
    "text": "that you must respect",
    "start": "440560",
    "end": "442639"
  },
  {
    "text": "to communicate between",
    "start": "442639",
    "end": "445280"
  },
  {
    "text": "communities and your driver",
    "start": "445280",
    "end": "447520"
  },
  {
    "text": "first your driver register declare its",
    "start": "447520",
    "end": "449759"
  },
  {
    "text": "capabilities and then you will be able",
    "start": "449759",
    "end": "451840"
  },
  {
    "text": "to handle all the pvc requests",
    "start": "451840",
    "end": "455039"
  },
  {
    "text": "now how does it done",
    "start": "455039",
    "end": "456880"
  },
  {
    "text": "first",
    "start": "456880",
    "end": "458560"
  },
  {
    "text": "you register",
    "start": "458560",
    "end": "461039"
  },
  {
    "text": "to the kubernetes api",
    "start": "461039",
    "end": "463520"
  },
  {
    "text": "and now when a pvc that you should",
    "start": "463520",
    "end": "465759"
  },
  {
    "text": "handle",
    "start": "465759",
    "end": "466639"
  },
  {
    "text": "is submitted by the user",
    "start": "466639",
    "end": "469440"
  },
  {
    "text": "the",
    "start": "469440",
    "end": "470319"
  },
  {
    "text": "provisioner capture it and submit it to",
    "start": "470319",
    "end": "473280"
  },
  {
    "text": "what we call the csi endpoint but the",
    "start": "473280",
    "end": "475280"
  },
  {
    "text": "csi endpoint basically is what was the",
    "start": "475280",
    "end": "477520"
  },
  {
    "text": "driver before",
    "start": "477520",
    "end": "479440"
  },
  {
    "text": "and you follow the previous",
    "start": "479440",
    "end": "482240"
  },
  {
    "text": "path",
    "start": "482240",
    "end": "483360"
  },
  {
    "text": "and you translate that in a create",
    "start": "483360",
    "end": "485280"
  },
  {
    "text": "volume response so all these parts",
    "start": "485280",
    "end": "488000"
  },
  {
    "text": "are generic belonging to the",
    "start": "488000",
    "end": "490840"
  },
  {
    "text": "csi then in turn you get a pv updated at",
    "start": "490840",
    "end": "494960"
  },
  {
    "text": "the pvc level and when you submit",
    "start": "494960",
    "end": "498720"
  },
  {
    "text": "an attachment",
    "start": "498720",
    "end": "500400"
  },
  {
    "text": "it's",
    "start": "500400",
    "end": "501360"
  },
  {
    "text": "translate to a publish volume request",
    "start": "501360",
    "end": "505280"
  },
  {
    "text": "which follow the precious path that we",
    "start": "505280",
    "end": "507919"
  },
  {
    "text": "show",
    "start": "507919",
    "end": "508879"
  },
  {
    "text": "and at the end you get a bad status",
    "start": "508879",
    "end": "511120"
  },
  {
    "text": "so you're back",
    "start": "511120",
    "end": "512640"
  },
  {
    "text": "in the previous situation but this part",
    "start": "512640",
    "end": "514479"
  },
  {
    "text": "in blue",
    "start": "514479",
    "end": "516080"
  },
  {
    "text": "could be",
    "start": "516080",
    "end": "518000"
  },
  {
    "text": "broke",
    "start": "518000",
    "end": "518839"
  },
  {
    "text": "dynamically by any storage provider that",
    "start": "518839",
    "end": "522159"
  },
  {
    "text": "want to be able to work with kubernetes",
    "start": "522159",
    "end": "525519"
  },
  {
    "text": "let's take a very simple example",
    "start": "525519",
    "end": "528080"
  },
  {
    "text": "you see here i",
    "start": "528080",
    "end": "530720"
  },
  {
    "text": "bring the stat full set",
    "start": "530720",
    "end": "533680"
  },
  {
    "text": "representing the",
    "start": "533680",
    "end": "535920"
  },
  {
    "text": "the deployment of the csi host path",
    "start": "535920",
    "end": "540480"
  },
  {
    "text": "and of course i remove a lot of code to",
    "start": "540480",
    "end": "543360"
  },
  {
    "text": "just get the things i wanted to show you",
    "start": "543360",
    "end": "546480"
  },
  {
    "text": "first you have this",
    "start": "546480",
    "end": "548720"
  },
  {
    "text": "this sidecar called us path plugin this",
    "start": "548720",
    "end": "551120"
  },
  {
    "text": "one is basically the driver",
    "start": "551120",
    "end": "555120"
  },
  {
    "text": "then you have the provisioner so the",
    "start": "555120",
    "end": "557519"
  },
  {
    "text": "provisioner is the one who has to",
    "start": "557519",
    "end": "560839"
  },
  {
    "text": "translate the pvc request to the driver",
    "start": "560839",
    "end": "565519"
  },
  {
    "text": "you have also the registrar i should",
    "start": "565519",
    "end": "567519"
  },
  {
    "text": "have spoken about it in the first place",
    "start": "567519",
    "end": "569839"
  },
  {
    "text": "which register this kind of storage to",
    "start": "569839",
    "end": "572880"
  },
  {
    "text": "the communities api",
    "start": "572880",
    "end": "574640"
  },
  {
    "text": "you have the csi attacher which is",
    "start": "574640",
    "end": "578160"
  },
  {
    "text": "responsible for the not published volume",
    "start": "578160",
    "end": "580399"
  },
  {
    "text": "so when you want to mount",
    "start": "580399",
    "end": "582959"
  },
  {
    "text": "a pvc to a pod",
    "start": "582959",
    "end": "585440"
  },
  {
    "text": "and you have two other snapshots that",
    "start": "585440",
    "end": "587920"
  },
  {
    "text": "belong also to the csi api which is the",
    "start": "587920",
    "end": "590560"
  },
  {
    "text": "snapshotter and the resizer we're not",
    "start": "590560",
    "end": "592560"
  },
  {
    "text": "going to speak about the resizer but",
    "start": "592560",
    "end": "594320"
  },
  {
    "text": "we're going to speak about the",
    "start": "594320",
    "end": "595920"
  },
  {
    "text": "snapshotter",
    "start": "595920",
    "end": "598560"
  },
  {
    "text": "a quick takeaway",
    "start": "598959",
    "end": "600800"
  },
  {
    "text": "csi let any storage vendor register to",
    "start": "600800",
    "end": "604560"
  },
  {
    "text": "kubernetes",
    "start": "604560",
    "end": "606399"
  },
  {
    "text": "csi",
    "start": "606399",
    "end": "607600"
  },
  {
    "text": "decouple storage vendor code to",
    "start": "607600",
    "end": "610640"
  },
  {
    "text": "kubernetes code and",
    "start": "610640",
    "end": "613440"
  },
  {
    "text": "most of the sidecars for communicating",
    "start": "613440",
    "end": "615680"
  },
  {
    "text": "with kubernetes can be reused with",
    "start": "615680",
    "end": "617760"
  },
  {
    "text": "little configuration change",
    "start": "617760",
    "end": "620240"
  },
  {
    "text": "only the csi endpoint which is the",
    "start": "620240",
    "end": "623360"
  },
  {
    "text": "driver",
    "start": "623360",
    "end": "624560"
  },
  {
    "text": "is the storage vendor responsibility",
    "start": "624560",
    "end": "628480"
  },
  {
    "text": "to create a snap",
    "start": "628480",
    "end": "630399"
  },
  {
    "text": "of your volume",
    "start": "630399",
    "end": "632640"
  },
  {
    "text": "you create a volume snapshot object the",
    "start": "632640",
    "end": "635839"
  },
  {
    "text": "volume snapshot object is a namespace",
    "start": "635839",
    "end": "637839"
  },
  {
    "text": "here object",
    "start": "637839",
    "end": "639360"
  },
  {
    "text": "and is made of two things",
    "start": "639360",
    "end": "641279"
  },
  {
    "text": "first the source which is the pvc that",
    "start": "641279",
    "end": "643920"
  },
  {
    "text": "you want to snap and the snapshot class",
    "start": "643920",
    "end": "646959"
  },
  {
    "text": "name because you may have more than one",
    "start": "646959",
    "end": "649040"
  },
  {
    "text": "csi driver in your cluster and you want",
    "start": "649040",
    "end": "651600"
  },
  {
    "text": "to address",
    "start": "651600",
    "end": "653120"
  },
  {
    "text": "the snapshot request to the proper",
    "start": "653120",
    "end": "655200"
  },
  {
    "text": "driver",
    "start": "655200",
    "end": "657040"
  },
  {
    "text": "when you create this object it will",
    "start": "657040",
    "end": "659360"
  },
  {
    "text": "trigger the creation of another object",
    "start": "659360",
    "end": "661680"
  },
  {
    "text": "called the volume snapshot content",
    "start": "661680",
    "end": "664800"
  },
  {
    "text": "and it's the volume snapshot content",
    "start": "664800",
    "end": "667760"
  },
  {
    "text": "creation that will",
    "start": "667760",
    "end": "669760"
  },
  {
    "text": "trigger",
    "start": "669760",
    "end": "671040"
  },
  {
    "text": "the real snap",
    "start": "671040",
    "end": "672959"
  },
  {
    "text": "on the storage layer",
    "start": "672959",
    "end": "675839"
  },
  {
    "text": "now if you want to restore from a snap",
    "start": "676720",
    "end": "680880"
  },
  {
    "text": "you create a regular persistent volume",
    "start": "680880",
    "end": "682959"
  },
  {
    "text": "claim",
    "start": "682959",
    "end": "684320"
  },
  {
    "text": "but this time you specify the data",
    "start": "684320",
    "end": "686800"
  },
  {
    "text": "source as the snapshot that you just",
    "start": "686800",
    "end": "689200"
  },
  {
    "text": "created",
    "start": "689200",
    "end": "691680"
  },
  {
    "text": "and once again",
    "start": "691760",
    "end": "693440"
  },
  {
    "text": "you specify the proper",
    "start": "693440",
    "end": "696000"
  },
  {
    "text": "storage class name",
    "start": "696000",
    "end": "697839"
  },
  {
    "text": "in order to use the proper driver for",
    "start": "697839",
    "end": "700880"
  },
  {
    "text": "the restoration and that will create",
    "start": "700880",
    "end": "704079"
  },
  {
    "text": "a clone of the snap",
    "start": "704079",
    "end": "707200"
  },
  {
    "text": "a clone of the pvc when the snap was",
    "start": "707200",
    "end": "709519"
  },
  {
    "text": "created",
    "start": "709519",
    "end": "711920"
  },
  {
    "text": "to summarize that in a diagram",
    "start": "712320",
    "end": "715440"
  },
  {
    "text": "i created this small graph",
    "start": "715440",
    "end": "718320"
  },
  {
    "text": "here is the",
    "start": "718320",
    "end": "720000"
  },
  {
    "text": "volume snapshot which is a namespace",
    "start": "720000",
    "end": "722000"
  },
  {
    "text": "head object",
    "start": "722000",
    "end": "723920"
  },
  {
    "text": "and when you create it it triggered the",
    "start": "723920",
    "end": "725920"
  },
  {
    "text": "creation of the volume snapshot content",
    "start": "725920",
    "end": "728079"
  },
  {
    "text": "and it's the volume snapshot content",
    "start": "728079",
    "end": "730800"
  },
  {
    "text": "that will",
    "start": "730800",
    "end": "732959"
  },
  {
    "text": "be",
    "start": "732959",
    "end": "733680"
  },
  {
    "text": "responsible for the",
    "start": "733680",
    "end": "736079"
  },
  {
    "text": "creation of the snap",
    "start": "736079",
    "end": "737920"
  },
  {
    "text": "or the driver is going to take the",
    "start": "737920",
    "end": "739839"
  },
  {
    "text": "actual volume and",
    "start": "739839",
    "end": "742160"
  },
  {
    "text": "do the snap",
    "start": "742160",
    "end": "743360"
  },
  {
    "text": "to the storage layer here it's ebs",
    "start": "743360",
    "end": "747200"
  },
  {
    "text": "it's interesting to note that",
    "start": "747200",
    "end": "750079"
  },
  {
    "text": "the",
    "start": "750079",
    "end": "750959"
  },
  {
    "text": "the link to the actual snap is not at",
    "start": "750959",
    "end": "753120"
  },
  {
    "text": "the volume snapshot level but at the",
    "start": "753120",
    "end": "755360"
  },
  {
    "text": "volume snapshot content level and inside",
    "start": "755360",
    "end": "757839"
  },
  {
    "text": "the volume snapshot content level you",
    "start": "757839",
    "end": "760079"
  },
  {
    "text": "you're going to have a small attribute",
    "start": "760079",
    "end": "762399"
  },
  {
    "text": "called volume snapshot under that will",
    "start": "762399",
    "end": "764800"
  },
  {
    "text": "point to the actual snap",
    "start": "764800",
    "end": "767600"
  },
  {
    "text": "here you have the retention policy",
    "start": "767600",
    "end": "769360"
  },
  {
    "text": "delete",
    "start": "769360",
    "end": "770399"
  },
  {
    "text": "so this policy means that if you select",
    "start": "770399",
    "end": "772639"
  },
  {
    "text": "the volume snapshot it will cascade",
    "start": "772639",
    "end": "775600"
  },
  {
    "text": "the deletion of the volume snapshot",
    "start": "775600",
    "end": "777440"
  },
  {
    "text": "content which in turn will cascade the",
    "start": "777440",
    "end": "780160"
  },
  {
    "text": "direction of the actual snap",
    "start": "780160",
    "end": "782720"
  },
  {
    "text": "if you choose written instead of delete",
    "start": "782720",
    "end": "785920"
  },
  {
    "text": "the direction of the volume snapshot",
    "start": "785920",
    "end": "788240"
  },
  {
    "text": "content",
    "start": "788240",
    "end": "789920"
  },
  {
    "text": "won't",
    "start": "789920",
    "end": "790880"
  },
  {
    "text": "delete the actual snap on the storage",
    "start": "790880",
    "end": "793360"
  },
  {
    "text": "layer and your actual snap is going to",
    "start": "793360",
    "end": "796160"
  },
  {
    "text": "be here for as long as you delete it",
    "start": "796160",
    "end": "798880"
  },
  {
    "text": "manually at the storage layer level",
    "start": "798880",
    "end": "802639"
  },
  {
    "text": "if i want to restore or if i want to",
    "start": "802639",
    "end": "805200"
  },
  {
    "text": "clone a pvc from a namespace mysql to",
    "start": "805200",
    "end": "808959"
  },
  {
    "text": "another namespace mysql restored",
    "start": "808959",
    "end": "811760"
  },
  {
    "text": "here is all i can do i can create a",
    "start": "811760",
    "end": "814079"
  },
  {
    "text": "volume snapshot of my",
    "start": "814079",
    "end": "816000"
  },
  {
    "text": "pvc mysql which will trigger volume",
    "start": "816000",
    "end": "819839"
  },
  {
    "text": "snapshot content",
    "start": "819839",
    "end": "821440"
  },
  {
    "text": "pointing to this actual snap",
    "start": "821440",
    "end": "825600"
  },
  {
    "text": "and",
    "start": "825600",
    "end": "826560"
  },
  {
    "text": "to restore it i create another volume",
    "start": "826560",
    "end": "829600"
  },
  {
    "text": "snapshot content pointing to the same",
    "start": "829600",
    "end": "831760"
  },
  {
    "text": "volume snapshot under",
    "start": "831760",
    "end": "833839"
  },
  {
    "text": "and i create a volume snapshot in my",
    "start": "833839",
    "end": "835760"
  },
  {
    "text": "namespace the mysql story and from this",
    "start": "835760",
    "end": "838800"
  },
  {
    "text": "snapshot",
    "start": "838800",
    "end": "840480"
  },
  {
    "text": "i create a clone",
    "start": "840480",
    "end": "842720"
  },
  {
    "text": "and here i am i have my",
    "start": "842720",
    "end": "845600"
  },
  {
    "text": "new pvc with exactly the same data than",
    "start": "845600",
    "end": "848800"
  },
  {
    "text": "the pvc that i had originally on my sql",
    "start": "848800",
    "end": "854000"
  },
  {
    "text": "interesting to note here that i put",
    "start": "854000",
    "end": "855920"
  },
  {
    "text": "retention policy delete and here",
    "start": "855920",
    "end": "858399"
  },
  {
    "text": "retention policy written why that",
    "start": "858399",
    "end": "861760"
  },
  {
    "text": "it's because my initial action was to",
    "start": "861760",
    "end": "864240"
  },
  {
    "text": "create a snap",
    "start": "864240",
    "end": "866000"
  },
  {
    "text": "here",
    "start": "866000",
    "end": "867600"
  },
  {
    "text": "and i want to keep the control of the",
    "start": "867600",
    "end": "870000"
  },
  {
    "text": "deletion of that so",
    "start": "870000",
    "end": "871839"
  },
  {
    "text": "if for any reason i decide to remove the",
    "start": "871839",
    "end": "875199"
  },
  {
    "text": "namespace for example if i remove the",
    "start": "875199",
    "end": "877199"
  },
  {
    "text": "namespace mysql restore it what will",
    "start": "877199",
    "end": "879199"
  },
  {
    "text": "happen",
    "start": "879199",
    "end": "880320"
  },
  {
    "text": "it will delete the volume snapshot and",
    "start": "880320",
    "end": "883199"
  },
  {
    "text": "if here it's not written the dilette",
    "start": "883199",
    "end": "885839"
  },
  {
    "text": "then it will trigger by cascading the",
    "start": "885839",
    "end": "888240"
  },
  {
    "text": "dilation of the volume snapshot content",
    "start": "888240",
    "end": "890160"
  },
  {
    "text": "and the ebs",
    "start": "890160",
    "end": "892800"
  },
  {
    "text": "and the left shen here",
    "start": "892800",
    "end": "896000"
  },
  {
    "text": "will finish with something that does not",
    "start": "896000",
    "end": "898079"
  },
  {
    "text": "exist anymore",
    "start": "898079",
    "end": "899920"
  },
  {
    "text": "so when i",
    "start": "899920",
    "end": "901360"
  },
  {
    "text": "clone from a namespace to another one i",
    "start": "901360",
    "end": "903600"
  },
  {
    "text": "always put retention policy here written",
    "start": "903600",
    "end": "907040"
  },
  {
    "text": "so that the deletion of this namespace",
    "start": "907040",
    "end": "909440"
  },
  {
    "text": "does not accidentally delete",
    "start": "909440",
    "end": "913279"
  },
  {
    "text": "the original snap",
    "start": "913279",
    "end": "916720"
  },
  {
    "text": "now if i want",
    "start": "918240",
    "end": "920079"
  },
  {
    "text": "to",
    "start": "920079",
    "end": "920880"
  },
  {
    "text": "simply",
    "start": "920880",
    "end": "922959"
  },
  {
    "text": "snap a wall namespace",
    "start": "922959",
    "end": "925839"
  },
  {
    "text": "it's actually very easy now with the",
    "start": "925839",
    "end": "930000"
  },
  {
    "text": "csi api",
    "start": "930000",
    "end": "931759"
  },
  {
    "text": "i take the namespace and the snapshot",
    "start": "931759",
    "end": "933839"
  },
  {
    "text": "class as an argument and for all the pvc",
    "start": "933839",
    "end": "937040"
  },
  {
    "text": "in my namespace i create the",
    "start": "937040",
    "end": "939199"
  },
  {
    "text": "corresponding",
    "start": "939199",
    "end": "940560"
  },
  {
    "text": "snapshot",
    "start": "940560",
    "end": "941759"
  },
  {
    "text": "and here i am",
    "start": "941759",
    "end": "943519"
  },
  {
    "text": "i have",
    "start": "943519",
    "end": "944959"
  },
  {
    "text": "all my pvc in my namespace snapshotted",
    "start": "944959",
    "end": "950320"
  },
  {
    "text": "it's interesting to note here that i",
    "start": "950320",
    "end": "952399"
  },
  {
    "text": "don't use any kind of secret",
    "start": "952399",
    "end": "956639"
  },
  {
    "text": "to speak to the storage layer i don't",
    "start": "956639",
    "end": "958959"
  },
  {
    "text": "have to provide my as your secret or my",
    "start": "958959",
    "end": "963519"
  },
  {
    "text": "aws access key with the proper right to",
    "start": "963519",
    "end": "966399"
  },
  {
    "text": "create or delete volumes all that is not",
    "start": "966399",
    "end": "969120"
  },
  {
    "text": "my preoccupation now",
    "start": "969120",
    "end": "971279"
  },
  {
    "text": "i just have to work with api",
    "start": "971279",
    "end": "975040"
  },
  {
    "text": "as a quick takeaway",
    "start": "975440",
    "end": "977360"
  },
  {
    "text": "csi lets you create snapshot with",
    "start": "977360",
    "end": "979920"
  },
  {
    "text": "kubernetes api",
    "start": "979920",
    "end": "981600"
  },
  {
    "text": "and any applications that want to manage",
    "start": "981600",
    "end": "983920"
  },
  {
    "text": "backup don't need anymore to",
    "start": "983920",
    "end": "986720"
  },
  {
    "text": "have all the secret of your storage",
    "start": "986720",
    "end": "988880"
  },
  {
    "text": "layer",
    "start": "988880",
    "end": "990079"
  },
  {
    "text": "however you must take some precaution",
    "start": "990079",
    "end": "992560"
  },
  {
    "text": "because it becomes very very easy to",
    "start": "992560",
    "end": "995040"
  },
  {
    "text": "delete accidentally the data because you",
    "start": "995040",
    "end": "997759"
  },
  {
    "text": "just have to delete the api",
    "start": "997759",
    "end": "1001040"
  },
  {
    "text": "there is limitation to the solution i",
    "start": "1002160",
    "end": "1004240"
  },
  {
    "text": "propose",
    "start": "1004240",
    "end": "1005440"
  },
  {
    "text": "some obvious limitation the first one",
    "start": "1005440",
    "end": "1007440"
  },
  {
    "text": "that i already discussed is the fact",
    "start": "1007440",
    "end": "1010639"
  },
  {
    "text": "that snap is not application consistent",
    "start": "1010639",
    "end": "1014000"
  },
  {
    "text": "as i show it",
    "start": "1014000",
    "end": "1015920"
  },
  {
    "text": "in the kafka example the second thing is",
    "start": "1015920",
    "end": "1018560"
  },
  {
    "text": "snap are not durable backup chance is",
    "start": "1018560",
    "end": "1021519"
  },
  {
    "text": "that if you have a disaster",
    "start": "1021519",
    "end": "1024240"
  },
  {
    "text": "your snap will be included in the",
    "start": "1024240",
    "end": "1026000"
  },
  {
    "text": "disaster and you need a way to extract",
    "start": "1026000",
    "end": "1028720"
  },
  {
    "text": "your snap",
    "start": "1028720",
    "end": "1029918"
  },
  {
    "text": "to make them durable backup",
    "start": "1029919",
    "end": "1032480"
  },
  {
    "text": "the first approach would be to to take a",
    "start": "1032480",
    "end": "1034880"
  },
  {
    "text": "clone and from the clone",
    "start": "1034880",
    "end": "1037438"
  },
  {
    "text": "you upload the clone to the s3 bucket in",
    "start": "1037439",
    "end": "1040640"
  },
  {
    "text": "another region in another place in",
    "start": "1040640",
    "end": "1042240"
  },
  {
    "text": "another infrastructure another approach",
    "start": "1042240",
    "end": "1044798"
  },
  {
    "text": "could be to replicate the snap to",
    "start": "1044799",
    "end": "1047199"
  },
  {
    "text": "different region or to different",
    "start": "1047199",
    "end": "1049200"
  },
  {
    "text": "infrastructure if that's possible",
    "start": "1049200",
    "end": "1053200"
  },
  {
    "text": "next things is the backup policies you",
    "start": "1053200",
    "end": "1057520"
  },
  {
    "text": "don't want to just punctually backup",
    "start": "1057520",
    "end": "1059760"
  },
  {
    "text": "your project you want to do regular",
    "start": "1059760",
    "end": "1062320"
  },
  {
    "text": "backup to have",
    "start": "1062320",
    "end": "1063919"
  },
  {
    "text": "a rto rto is the recover time objective",
    "start": "1063919",
    "end": "1068880"
  },
  {
    "text": "which means the time where you lose the",
    "start": "1068880",
    "end": "1071200"
  },
  {
    "text": "data and you want to reduce that so you",
    "start": "1071200",
    "end": "1073679"
  },
  {
    "text": "need to take regular backup and of",
    "start": "1073679",
    "end": "1075919"
  },
  {
    "text": "course if you take regular backup it",
    "start": "1075919",
    "end": "1077760"
  },
  {
    "text": "means that you have to clean the backup",
    "start": "1077760",
    "end": "1080880"
  },
  {
    "text": "do you have to clean the snap that you",
    "start": "1080880",
    "end": "1082559"
  },
  {
    "text": "created",
    "start": "1082559",
    "end": "1083679"
  },
  {
    "text": "and that asks the question of the",
    "start": "1083679",
    "end": "1085760"
  },
  {
    "text": "retention policy",
    "start": "1085760",
    "end": "1087360"
  },
  {
    "text": "the script that i show you does not",
    "start": "1087360",
    "end": "1089600"
  },
  {
    "text": "under that of course",
    "start": "1089600",
    "end": "1092960"
  },
  {
    "text": "when we're working with kubernetes",
    "start": "1093039",
    "end": "1095840"
  },
  {
    "text": "we take the application as as a wall so",
    "start": "1095840",
    "end": "1098559"
  },
  {
    "text": "we just don't want only the data we want",
    "start": "1098559",
    "end": "1101600"
  },
  {
    "text": "to have the data plus the deployment the",
    "start": "1101600",
    "end": "1104000"
  },
  {
    "text": "stateful set the config the secret and",
    "start": "1104000",
    "end": "1106720"
  },
  {
    "text": "so on even the crts",
    "start": "1106720",
    "end": "1109760"
  },
  {
    "text": "and",
    "start": "1109760",
    "end": "1110880"
  },
  {
    "text": "if we wanted to have a proper",
    "start": "1110880",
    "end": "1113840"
  },
  {
    "text": "backup mechanism we should not only",
    "start": "1113840",
    "end": "1116320"
  },
  {
    "text": "capture",
    "start": "1116320",
    "end": "1117600"
  },
  {
    "text": "the snap but also all the configuration",
    "start": "1117600",
    "end": "1121120"
  },
  {
    "text": "and to be able to migrate that to",
    "start": "1121120",
    "end": "1123440"
  },
  {
    "text": "another cluster so that's something of",
    "start": "1123440",
    "end": "1125440"
  },
  {
    "text": "course the solution i show does not",
    "start": "1125440",
    "end": "1127600"
  },
  {
    "text": "handle",
    "start": "1127600",
    "end": "1128880"
  },
  {
    "text": "and last but not least api are good but",
    "start": "1128880",
    "end": "1132400"
  },
  {
    "text": "not for everybody",
    "start": "1132400",
    "end": "1134000"
  },
  {
    "text": "some people don't want to work with the",
    "start": "1134000",
    "end": "1136160"
  },
  {
    "text": "api with the cli it's too complicated or",
    "start": "1136160",
    "end": "1138960"
  },
  {
    "text": "they don't want to learn",
    "start": "1138960",
    "end": "1140559"
  },
  {
    "text": "and they expect a single",
    "start": "1140559",
    "end": "1143679"
  },
  {
    "text": "pane of class",
    "start": "1143679",
    "end": "1145120"
  },
  {
    "text": "to",
    "start": "1145120",
    "end": "1145310"
  },
  {
    "text": "[Music]",
    "start": "1145310",
    "end": "1146720"
  },
  {
    "text": "unders to to handle all the backup",
    "start": "1146720",
    "end": "1149440"
  },
  {
    "text": "process",
    "start": "1149440",
    "end": "1150480"
  },
  {
    "text": "you may have also some question about",
    "start": "1150480",
    "end": "1152960"
  },
  {
    "text": "multi-tenancy how do you",
    "start": "1152960",
    "end": "1156000"
  },
  {
    "text": "handle multi-tenancy on a big cluster",
    "start": "1156000",
    "end": "1159520"
  },
  {
    "text": "all these questions are",
    "start": "1159520",
    "end": "1161440"
  },
  {
    "text": "of course in the limitation of the",
    "start": "1161440",
    "end": "1163520"
  },
  {
    "text": "solution i show but",
    "start": "1163520",
    "end": "1165919"
  },
  {
    "text": "the tools that",
    "start": "1165919",
    "end": "1167740"
  },
  {
    "text": "[Music]",
    "start": "1167740",
    "end": "1169120"
  },
  {
    "text": "that will give you some professional",
    "start": "1169120",
    "end": "1170799"
  },
  {
    "text": "support for your backup will address",
    "start": "1170799",
    "end": "1172400"
  },
  {
    "text": "that",
    "start": "1172400",
    "end": "1173679"
  },
  {
    "text": "okay",
    "start": "1173679",
    "end": "1174799"
  },
  {
    "text": "thanks a lot",
    "start": "1174799",
    "end": "1176000"
  },
  {
    "text": "and i hope this presentation was helpful",
    "start": "1176000",
    "end": "1180160"
  },
  {
    "text": "and",
    "start": "1180160",
    "end": "1181120"
  },
  {
    "text": "i",
    "start": "1181120",
    "end": "1182480"
  },
  {
    "text": "just have to say",
    "start": "1182480",
    "end": "1184000"
  },
  {
    "text": "see you soon in the next kubecon thanks",
    "start": "1184000",
    "end": "1186720"
  },
  {
    "text": "a lot bye",
    "start": "1186720",
    "end": "1190120"
  }
]