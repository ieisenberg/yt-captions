[
  {
    "text": "hey my name is soan maheswar I'm a Dev Advocate at ODed and today I'm going to teach you how you can build",
    "start": "520",
    "end": "7120"
  },
  {
    "text": "authorization at scale with spice DB on Amazon eks in fact why don't I just dump",
    "start": "7120",
    "end": "13839"
  },
  {
    "text": "straight to my terminal and show you what we're going to build so essentially I already have a cluster on eks that's",
    "start": "13839",
    "end": "20359"
  },
  {
    "text": "running and it's running spice DB and let's check for permissions that I've",
    "start": "20359",
    "end": "25480"
  },
  {
    "text": "already written into that database so essentially what I've done is uh I'm checking if the Vier uh if the user",
    "start": "25480",
    "end": "33600"
  },
  {
    "text": "Amelia has view permissions on this doc one and you will see that it says true",
    "start": "33600",
    "end": "40039"
  },
  {
    "text": "right so this is the end of what we're going to build today but let me before that set some context about what we're",
    "start": "40039",
    "end": "46920"
  },
  {
    "text": "actually talking about and then I will show you a technical demo as",
    "start": "46920",
    "end": "53000"
  },
  {
    "text": "well so first things first I think it's important to make the distinction between authentication and authorization",
    "start": "53000",
    "end": "60960"
  },
  {
    "text": "now this is a common sort of uh misunderstanding that a lot of folks in the industry have uh we personally",
    "start": "60960",
    "end": "67560"
  },
  {
    "text": "prefer to think about it in terms of identity and permissions whether you can verify someone's Identity or",
    "start": "67560",
    "end": "74479"
  },
  {
    "text": "authenticate them uh versus what do they actually have access or what actions can",
    "start": "74479",
    "end": "80119"
  },
  {
    "text": "they do or what permissions they have after they are authenticated so for the purpose of today's talk we are talking",
    "start": "80119",
    "end": "86759"
  },
  {
    "text": "only about permissions and I just showed you a permission check as well and",
    "start": "86759",
    "end": "92439"
  },
  {
    "text": "that's what spice DB does spice DB works with a bunch of different identity providers as well and um you can use",
    "start": "92439",
    "end": "99439"
  },
  {
    "text": "your own too and essentially then do permission checks so to set some context",
    "start": "99439",
    "end": "105560"
  },
  {
    "text": "and I'm definitely going to date Myself by showing this slide but does anyone know what tech product I am showing here",
    "start": "105560",
    "end": "113040"
  },
  {
    "text": "right now if you been in the industry as long as I have I guess uh you might",
    "start": "113040",
    "end": "118479"
  },
  {
    "text": "recognize this as Google Plus or it was also you know colloquially called Google Circles where they looked at Social they",
    "start": "118479",
    "end": "126280"
  },
  {
    "text": "looked at a social network slightly differently where you could group a bunch of connects and friends in what",
    "start": "126280",
    "end": "132040"
  },
  {
    "text": "they call Circles so you would have a circle or a group for your college",
    "start": "132040",
    "end": "137120"
  },
  {
    "text": "friends for your family for the people you play sports with and you could select what you wanted to share with",
    "start": "137120",
    "end": "143120"
  },
  {
    "text": "each of these groups now as a social network it's been discontinued since but",
    "start": "143120",
    "end": "149200"
  },
  {
    "text": "two things actually came out of Google+ that we still perhaps use in some way or",
    "start": "149200",
    "end": "155400"
  },
  {
    "text": "the other even today one of course is Google photos I use it great product the",
    "start": "155400",
    "end": "161040"
  },
  {
    "text": "second is something called Google Zanzibar now this is not a household name and it probably shouldn't but the",
    "start": "161040",
    "end": "168920"
  },
  {
    "text": "fact is essentially Google's internal permission system is nicknamed Zanzibar",
    "start": "168920",
    "end": "174920"
  },
  {
    "text": "and they actually detailed all of it in a great paper written or relased released at least in",
    "start": "174920",
    "end": "182159"
  },
  {
    "text": "2019 so this is how the paper looks you can check it out on Zanzibar dote which is an annotated version of the paper and",
    "start": "182159",
    "end": "190280"
  },
  {
    "text": "the title itself I think is the key here it says Zanzibar Google's consistent Global authorization system for those of",
    "start": "190280",
    "end": "198360"
  },
  {
    "text": "you all who have built distributed systems before you will know that achieving global scale and consistency",
    "start": "198360",
    "end": "205040"
  },
  {
    "text": "at the same time it's a hard problem to solve it's it's not a very trivial problem so not only did was it solved in",
    "start": "205040",
    "end": "212840"
  },
  {
    "text": "some way or form in Google but this paper was actually written about something that existed and it wasn't",
    "start": "212840",
    "end": "218599"
  },
  {
    "text": "theoretical right so lots of great knowledge in the paper itself in fact",
    "start": "218599",
    "end": "223640"
  },
  {
    "text": "just look at the cloud service that you use you know whether it's AWS Azure or gcp uh you will notice that IM am or",
    "start": "223640",
    "end": "230760"
  },
  {
    "text": "identity and access management is the only service that sort of spans all regions it doesn't it's not tied to a",
    "start": "230760",
    "end": "237599"
  },
  {
    "text": "certain region uh because the these permission rules need to work across",
    "start": "237599",
    "end": "242720"
  },
  {
    "text": "regions right and also fun fact Google's IM in Google Cloud uh is a sort of fork",
    "start": "242720",
    "end": "249560"
  },
  {
    "text": "of Zanzibar as well now this paper was published in 2019 many big companies",
    "start": "249560",
    "end": "255760"
  },
  {
    "text": "such as ABNB and Carter they use they built rather internal authorization",
    "start": "255760",
    "end": "261479"
  },
  {
    "text": "systems based on this paper um it the design can handle more than 10 million",
    "start": "261479",
    "end": "267440"
  },
  {
    "text": "client queries per second um and from a depth perspective so for you and me it's",
    "start": "267440",
    "end": "273039"
  },
  {
    "text": "an API right so you query this API and you get a response which I just showed you the cool thing that Google Zanzibar",
    "start": "273039",
    "end": "280360"
  },
  {
    "text": "sort of um did differently was the concept of reback or a relationship",
    "start": "280360",
    "end": "286039"
  },
  {
    "text": "based Access Control now there are different ways of doing Access Control",
    "start": "286039",
    "end": "291479"
  },
  {
    "text": "right now the most common I guess is role-based Access Control where you have certain roles like reader writer Etc and",
    "start": "291479",
    "end": "299039"
  },
  {
    "text": "you tag like a user to a role you also have attribute based access controls where you have certain attributes and",
    "start": "299039",
    "end": "305600"
  },
  {
    "text": "that gives you a little more fine grained access but it can you know um",
    "start": "305600",
    "end": "310960"
  },
  {
    "text": "when it scales it can get a little dicey so how it did it differently was the concept of relationship based access",
    "start": "310960",
    "end": "318080"
  },
  {
    "text": "control which essentially describes relationship graphs right so between",
    "start": "318080",
    "end": "323400"
  },
  {
    "text": "subjects and objects in your system so say your system has users and documents",
    "start": "323400",
    "end": "329400"
  },
  {
    "text": "and um you know some other uh format or some other object you can draw relationships between these users these",
    "start": "329400",
    "end": "336759"
  },
  {
    "text": "objects and so on so to give you an example and this is me totally manifesting that I speak at cucon maybe",
    "start": "336759",
    "end": "343840"
  },
  {
    "text": "person soan has a relationship is a speaker at conference cubec con and all",
    "start": "343840",
    "end": "350479"
  },
  {
    "text": "speakers at conference cubec con have access to the speaker dinner right again",
    "start": "350479",
    "end": "356800"
  },
  {
    "text": "totally manifesting so essentially when you draw a graph you can draw or deduce",
    "start": "356800",
    "end": "362240"
  },
  {
    "text": "the relationship that person soan has access to the speaker dinner right and",
    "start": "362240",
    "end": "368240"
  },
  {
    "text": "in a very like rudimentary way this is sort of how relationship based access control works now Google Zanzibar the",
    "start": "368240",
    "end": "376840"
  },
  {
    "text": "paper was written in 20 or released in 2019 and about a year year and a half",
    "start": "376840",
    "end": "382919"
  },
  {
    "text": "later uh the founders of odet essentially released in open source spice DB uh which was",
    "start": "382919",
    "end": "390080"
  },
  {
    "text": "you know an implementation of the Google zanzabar project the key there was of course implementing it like the paper",
    "start": "390080",
    "end": "396720"
  },
  {
    "text": "but sort of removing the Google isms if you will of the project to make it accessible by a developer that's not in",
    "start": "396720",
    "end": "404479"
  },
  {
    "text": "Google and um because this was one of the first few implementations of Google",
    "start": "404479",
    "end": "410280"
  },
  {
    "text": "Zanzibar um as you can see it has you know more than 5K stars on GitHub uh",
    "start": "410280",
    "end": "416000"
  },
  {
    "text": "very active community of developers and um you know it's completely open source so feel free to contribute as well so",
    "start": "416000",
    "end": "423800"
  },
  {
    "text": "well what is spice DB and what is Zanzibar well think of spice DB as zanbar plus you know um with zanbar you",
    "start": "423800",
    "end": "431960"
  },
  {
    "text": "got these things you had uh reback uh where each relationship between the",
    "start": "431960",
    "end": "437360"
  },
  {
    "text": "objects and subjects in your system were described as edges in a graph and these",
    "start": "437360",
    "end": "442720"
  },
  {
    "text": "were defined in the terms of something called a schema which I will show you",
    "start": "442720",
    "end": "448160"
  },
  {
    "text": "and because of that it gave you Flex flexibility to model what your internal system looks like uh in that schema the",
    "start": "448160",
    "end": "455240"
  },
  {
    "text": "thing the key tenet to both Zanzibar and spice DB is achieving scale and this is",
    "start": "455240",
    "end": "460680"
  },
  {
    "text": "not just scale in terms of oh we have 1 billion users but scale in terms of um",
    "start": "460680",
    "end": "466240"
  },
  {
    "text": "worldwide geography and Geographic scale scale in terms of being able to launch features very quickly um and have",
    "start": "466240",
    "end": "473479"
  },
  {
    "text": "feature velocity and so on it was built to support distributed data St",
    "start": "473479",
    "end": "480280"
  },
  {
    "text": "and lastly zanbar also solved this thing called the new enemy problem with a",
    "start": "480280",
    "end": "485680"
  },
  {
    "text": "concept of zukies which presumably they don't mention it but presumably stands for zanbar cookies essentially the new",
    "start": "485680",
    "end": "493120"
  },
  {
    "text": "enemy problem is say you know Alice and Bob are they are on an access list to a",
    "start": "493120",
    "end": "499039"
  },
  {
    "text": "folder Alice removes Bob for that from that folder and then Alice asks Charlie",
    "start": "499039",
    "end": "504599"
  },
  {
    "text": "to move new documents to that folder if you have not maintained the hierarchy of",
    "start": "504599",
    "end": "510360"
  },
  {
    "text": "or The Ordering of what happened here Bob should not be able to access that particular document in that folder so",
    "start": "510360",
    "end": "517880"
  },
  {
    "text": "that is the new enemy problem and zanbar took care of that with the concept of",
    "start": "517880",
    "end": "523279"
  },
  {
    "text": "zukies so spice DB was built with these principles in mind but also added a",
    "start": "523279",
    "end": "528600"
  },
  {
    "text": "bunch of different things like the developer experience and tooling around it so that anyone not just someone in",
    "start": "528600",
    "end": "535440"
  },
  {
    "text": "Google but anyone such as you and me can actually build authorization systems using spice TB and the existing text",
    "start": "535440",
    "end": "543640"
  },
  {
    "text": "stack that you have also added some like um the caveats where you can add a",
    "start": "543640",
    "end": "549680"
  },
  {
    "text": "caveat for some piece of information that is context dependent for your authorization check you know like maybe",
    "start": "549680",
    "end": "556839"
  },
  {
    "text": "you want to check is a user allowed to access this after 6 PM right and you can",
    "start": "556839",
    "end": "562200"
  },
  {
    "text": "add that caveat in so you're also adding some form of support for attribute based control uh access control with",
    "start": "562200",
    "end": "569880"
  },
  {
    "text": "caveats um and also very importantly it added a reverse index API so it wasn't",
    "start": "569880",
    "end": "576399"
  },
  {
    "text": "just what does this user have access to you could look at a resource and say who",
    "start": "576399",
    "end": "581600"
  },
  {
    "text": "has access to this particular resource so you're sort of doing a reverse index I did say I would speak about",
    "start": "581600",
    "end": "589000"
  },
  {
    "text": "schema so essentially this is how a schema looks like you know you're defined a user in line one I can show",
    "start": "589000",
    "end": "595800"
  },
  {
    "text": "there you defined a document with a relation o sorry with a relation uh a",
    "start": "595800",
    "end": "602480"
  },
  {
    "text": "user can be a writer a user can be a reader and you can give permissions to",
    "start": "602480",
    "end": "608560"
  },
  {
    "text": "those relations as well so um permission edit is equal to writer so edit",
    "start": "608560",
    "end": "613839"
  },
  {
    "text": "determines whether a user can edit a document or not whereas view determines whether a user can view this particular",
    "start": "613839",
    "end": "621519"
  },
  {
    "text": "document so in terms of view both the reader and the writer can view but only",
    "start": "621519",
    "end": "626640"
  },
  {
    "text": "the writer can edit this particular document right so you've taken this system that you have and you model that",
    "start": "626640",
    "end": "633120"
  },
  {
    "text": "on a schema so this would work if you have a bank if you have I know car",
    "start": "633120",
    "end": "638720"
  },
  {
    "text": "sharing app um whatever if you have a CMS you can model all of that into a",
    "start": "638720",
    "end": "644839"
  },
  {
    "text": "particular schema and I mentioned this before but spice DB is completely open source with",
    "start": "644839",
    "end": "651320"
  },
  {
    "text": "active GitHub and Discord communities there are contributors from companies such as Google Reddit Adobe um GitHub",
    "start": "651320",
    "end": "658639"
  },
  {
    "text": "red hat and and so on so if you're interested U do join the community there's also a good first issues bot if",
    "start": "658639",
    "end": "664680"
  },
  {
    "text": "you want to jump in into a good first issue so how does spice DB actually work",
    "start": "664680",
    "end": "670120"
  },
  {
    "text": "you know I've spoken about what it is um what it's based on essentially I'm really simplifying it here for the",
    "start": "670120",
    "end": "676839"
  },
  {
    "text": "purpose of this demo but fundamentally this is a grpc service if you're not",
    "start": "676839",
    "end": "682480"
  },
  {
    "text": "familiar with trpcs you can you know bunch of other videos that explain that out there but request in G in spice DB",
    "start": "682480",
    "end": "691040"
  },
  {
    "text": "basically goes through three phases right and let's break that down so the first one is a request is received from",
    "start": "691040",
    "end": "697959"
  },
  {
    "text": "a user say hey check whether permissions exist for this and these grpc requests",
    "start": "697959",
    "end": "704560"
  },
  {
    "text": "are sent over the protocol buffer or Proto buff format again that's entirely",
    "start": "704560",
    "end": "710160"
  },
  {
    "text": "different topic but what you need to know is it's sent over protuff but spice DB is also capable of running a HTTP",
    "start": "710160",
    "end": "717959"
  },
  {
    "text": "Gateway that translates the these requests into HTTP now step two once that request is",
    "start": "717959",
    "end": "726839"
  },
  {
    "text": "received it needs to be validated to you know make sure that it is a valid request now the validation is performed",
    "start": "726839",
    "end": "733839"
  },
  {
    "text": "by protobuf in two steps first one is any malform requests uh won't make it",
    "start": "733839",
    "end": "740040"
  },
  {
    "text": "past the grpc level right so grpc has a processing layer and any request that",
    "start": "740040",
    "end": "745279"
  },
  {
    "text": "doesn't conform to that particular format is dropped off second step is uh a semantic validation",
    "start": "745279",
    "end": "753079"
  },
  {
    "text": "step where maybe it needs a certain level of uh like a certain number of um",
    "start": "753079",
    "end": "759320"
  },
  {
    "text": "uh what's it called um like a semantic validation sorry about that where it",
    "start": "759320",
    "end": "765279"
  },
  {
    "text": "needs like a certain ID or certain whatever data and we essentially in spice DB use something called protoc C",
    "start": "765279",
    "end": "772680"
  },
  {
    "text": "gen validate which is a plug-in to validate these requests that are coming in and this is done in a middleware u",
    "start": "772680",
    "end": "780720"
  },
  {
    "text": "grpc middleware called validator and the third form is called",
    "start": "780720",
    "end": "785839"
  },
  {
    "text": "the datadriven semantic validation form and this is done on specific requests as",
    "start": "785839",
    "end": "790880"
  },
  {
    "text": "applied to the data that is stored in spice DB now this validation is found sprinkled throughout spice TB uh usually",
    "start": "790880",
    "end": "798000"
  },
  {
    "text": "in the form of errors that are raised by individual pieces of code right so there are different ways you can validate",
    "start": "798000",
    "end": "805360"
  },
  {
    "text": "this after it's validated you need to actually handle that particular particular request and the grpc API",
    "start": "805360",
    "end": "812360"
  },
  {
    "text": "defines some top level methods I'll will talk about maybe few of them and I'll show show you a diagram which hopefully",
    "start": "812360",
    "end": "819560"
  },
  {
    "text": "makes it clearer the first one is simple crud operations against relationships",
    "start": "819560",
    "end": "824920"
  },
  {
    "text": "right you can write a relationship you know you can say hey this is a new relationship uh you can read a",
    "start": "824920",
    "end": "831680"
  },
  {
    "text": "relationship and you can delete relationships all of this is stored in the data",
    "start": "831680",
    "end": "837440"
  },
  {
    "text": "store straightforward then there are a couple of types of crud operations on the schema itself that I",
    "start": "837440",
    "end": "843880"
  },
  {
    "text": "showed you you can read schema and you can write schema so if you know there's a new way to model something a new",
    "start": "843880",
    "end": "850720"
  },
  {
    "text": "object in your system you can add that to your schema and write it to your schema again stored in the data store",
    "start": "850720",
    "end": "858519"
  },
  {
    "text": "the third one is the most exciting one and probably the reasons spice stb actually exists which is where you check",
    "start": "858519",
    "end": "865639"
  },
  {
    "text": "for permissions itself um there are three ones I'd like to talk to you about the first one is check permission where",
    "start": "865639",
    "end": "872800"
  },
  {
    "text": "you check permissions and you can also expand permissions which expands the",
    "start": "872800",
    "end": "877839"
  },
  {
    "text": "graph that I showed you earlier which you can use to check for permissions and",
    "start": "877839",
    "end": "883320"
  },
  {
    "text": "also to look up resources it's all might seem a little confusing so let me show you an",
    "start": "883320",
    "end": "889160"
  },
  {
    "text": "architecture diagram hopefully it clears it up um yeah so this is the odid API",
    "start": "889160",
    "end": "896120"
  },
  {
    "text": "like I said grpc and you have all of these internal Services now let's start",
    "start": "896120",
    "end": "902240"
  },
  {
    "text": "towards the bottom I said there are three relationship ones write read and delete and every time you write read or",
    "start": "902240",
    "end": "909399"
  },
  {
    "text": "delete a relationship it goes to the data store this data store could be cockroach DB or",
    "start": "909399",
    "end": "916040"
  },
  {
    "text": "postgress bunch of different options there in our docs in today's example we're going to be showing you how to do",
    "start": "916040",
    "end": "922320"
  },
  {
    "text": "this in postgress which is the recommended approach for a single instance if you want to write schema or",
    "start": "922320",
    "end": "929959"
  },
  {
    "text": "read a schema again straightforward API goes into the data store stored in",
    "start": "929959",
    "end": "935199"
  },
  {
    "text": "post now these are the interesting ones where if you want to check permission right where you're determining if a",
    "start": "935199",
    "end": "941800"
  },
  {
    "text": "given resource um has permission to a direct member or a particular relation",
    "start": "941800",
    "end": "947880"
  },
  {
    "text": "it goes to an internal dispatcher now dispatching is a core part of spice TB",
    "start": "947880",
    "end": "954360"
  },
  {
    "text": "functionality and this is where API requests are essentially broken down in into smaller computations and they are",
    "start": "954360",
    "end": "961279"
  },
  {
    "text": "forwarded to or dispatched to other spice DB nodes within the cluster now",
    "start": "961279",
    "end": "967360"
  },
  {
    "text": "this is a design Choice actually mentioned in Zanzibar to make your system a lot faster there's a lot of",
    "start": "967360",
    "end": "973560"
  },
  {
    "text": "caching and selective uh dispatching that happens again encourage you to read",
    "start": "973560",
    "end": "978759"
  },
  {
    "text": "the Zanzibar paper to understand the nitty-gritty details behind",
    "start": "978759",
    "end": "983880"
  },
  {
    "text": "it once you look for check permission that looks for the internal graph against the check expand or look up API",
    "start": "983880",
    "end": "992040"
  },
  {
    "text": "calls that you're making which again query the data store to give you the answer so earlier when I wrote that uh",
    "start": "992040",
    "end": "999759"
  },
  {
    "text": "checkup it actually went through to the check permission went to my data store got a response in no time and said that",
    "start": "999759",
    "end": "1007600"
  },
  {
    "text": "it was true okay so that is essentially a very high level overview of what spice DB is",
    "start": "1007600",
    "end": "1015319"
  },
  {
    "text": "uh and how it sort of works under the hood lot more details you can find on our blog but let's go on to the",
    "start": "1015319",
    "end": "1021519"
  },
  {
    "text": "interesting part which is you want to implement authorization in your system and your on AWS so how could you do this",
    "start": "1021519",
    "end": "1029360"
  },
  {
    "text": "using Amazon eks so the prerequisites for this demo pretty straightforward I'm",
    "start": "1029360",
    "end": "1034438"
  },
  {
    "text": "sure you have Cube CTL Cube cuttle however you want to pronounce it on your",
    "start": "1034439",
    "end": "1039600"
  },
  {
    "text": "system uh you need an AWS account with the relevant permissions and for this demo",
    "start": "1039600",
    "end": "1045199"
  },
  {
    "text": "specifically you need the Zed CLI but that's only for the last step so if you have a system that you want to integrate",
    "start": "1045199",
    "end": "1052360"
  },
  {
    "text": "with API calls that's also fine let me show you quick architecture",
    "start": "1052360",
    "end": "1058360"
  },
  {
    "text": "diagram of how this looks so you can have the Z CLI like I showed you earlier",
    "start": "1058360",
    "end": "1064080"
  },
  {
    "text": "or your app by an API now this gets um this basically hits an U like an API",
    "start": "1064080",
    "end": "1072640"
  },
  {
    "text": "right and all of our AWS resources are within the same VPC or virtual private",
    "start": "1072640",
    "end": "1077760"
  },
  {
    "text": "Cloud um you need a Route 53 hosted Zone with a URL and that goes to a load",
    "start": "1077760",
    "end": "1085799"
  },
  {
    "text": "balancer um for this demo I'm using a classic load balancer but if you're",
    "start": "1085799",
    "end": "1090960"
  },
  {
    "text": "doing this in production you might want to use a network load balancer cuz that behaves slightly better with grpc",
    "start": "1090960",
    "end": "1098159"
  },
  {
    "text": "calls and that essentially hits my Amazon eks cluster in my cluster for",
    "start": "1098159",
    "end": "1104159"
  },
  {
    "text": "this demo I have two nodes but again you can choose to have bunch of different nodes and each of my nodes have",
    "start": "1104159",
    "end": "1110240"
  },
  {
    "text": "different pods that are running um I've chosen to run my um nodes in eks on ec2",
    "start": "1110240",
    "end": "1118120"
  },
  {
    "text": "you can perhaps run it on fargate as well but again I've shown this demo on ec2 and we have spice DB that's actually",
    "start": "1118120",
    "end": "1125600"
  },
  {
    "text": "running within each of these nodes U those permission checks are stored in a data store which is in Amazon RDS um",
    "start": "1125600",
    "end": "1134080"
  },
  {
    "text": "using postgress SQL so that's essentially how it works",
    "start": "1134080",
    "end": "1139760"
  },
  {
    "text": "and um this guide is on aet.com dooc and just look for eks we're going to go step",
    "start": "1139760",
    "end": "1146320"
  },
  {
    "text": "by step into how this works excuse me so I'm going to open up",
    "start": "1146320",
    "end": "1155600"
  },
  {
    "text": "my terminal and take you through the steps now the first step actually is",
    "start": "1155600",
    "end": "1161159"
  },
  {
    "text": "to um create a cluster on eks right let",
    "start": "1161159",
    "end": "1166600"
  },
  {
    "text": "me just find yep there we go this is the cluster I've created uh honestly you can",
    "start": "1166600",
    "end": "1171679"
  },
  {
    "text": "just create a new cluster and pretty much choose the defaults here uh let me",
    "start": "1171679",
    "end": "1177600"
  },
  {
    "text": "just open this yeah all of this works um make sure you get the right uh role",
    "start": "1177600",
    "end": "1182720"
  },
  {
    "text": "permissions and things um config map is being deprecated by AWS soon so you can",
    "start": "1182720",
    "end": "1188679"
  },
  {
    "text": "either choose to use eks API or eks API and config map if you're already have a",
    "start": "1188679",
    "end": "1194280"
  },
  {
    "text": "cluster that's on config map um and and yeah you you'll see an option",
    "start": "1194280",
    "end": "1200799"
  },
  {
    "text": "for um networking again make sure you're in the same VPC and same subnet right",
    "start": "1200799",
    "end": "1206919"
  },
  {
    "text": "I'm just going to go back um and when you see the option to choose either ec2",
    "start": "1206919",
    "end": "1212200"
  },
  {
    "text": "or fate I've chosen ec2 for this demo um once you've done that make sure",
    "start": "1212200",
    "end": "1218559"
  },
  {
    "text": "that your Cube C is configured to use that eks cluster um for instance this is",
    "start": "1218559",
    "end": "1224880"
  },
  {
    "text": "the name of my cluster and if I do k um I think it's called config current",
    "start": "1224880",
    "end": "1231400"
  },
  {
    "text": "context it is showing me the Arn of that particular cluster right so Cube CTL is",
    "start": "1231400",
    "end": "1236799"
  },
  {
    "text": "configured to use the cluster that I've created uh if you're not sure how to do this there's enough documentation on AWS",
    "start": "1236799",
    "end": "1244159"
  },
  {
    "text": "to actually do that the second thing you want to do is now dynamically configure uh to",
    "start": "1244159",
    "end": "1251720"
  },
  {
    "text": "dynamically configure DNS is to Grant access in your IM am so you create uh a",
    "start": "1251720",
    "end": "1258200"
  },
  {
    "text": "policy and attach it to the role that's used for the pods in eks so you need",
    "start": "1258200",
    "end": "1263559"
  },
  {
    "text": "three permissions I've have already opened it in my I am policy here you need to be able to change uh Route 53",
    "start": "1263559",
    "end": "1272039"
  },
  {
    "text": "change resource record sets in Route 53 and also list hosted zones by name in",
    "start": "1272039",
    "end": "1277600"
  },
  {
    "text": "Route 53 so create this policy attach it to the role that you're using for your",
    "start": "1277600",
    "end": "1282919"
  },
  {
    "text": "eks pods now eks is elastic kubernetes service so you might have figured we're",
    "start": "1282919",
    "end": "1290120"
  },
  {
    "text": "using kubernetes um and for kubernetes we recommending that uh we recommend that",
    "start": "1290120",
    "end": "1295960"
  },
  {
    "text": "you install seert manager right because we have to do this um we have to verify",
    "start": "1295960",
    "end": "1301240"
  },
  {
    "text": "our CS so SE manager is an open- source project so you can actually just you",
    "start": "1301240",
    "end": "1307240"
  },
  {
    "text": "know do something like this where yeah you just use apply F and um",
    "start": "1307240",
    "end": "1314919"
  },
  {
    "text": "you know you do CT manager. EML and this applies that se man manager to your current",
    "start": "1314919",
    "end": "1321200"
  },
  {
    "text": "config all right uh there are different ways you can install SE manager into um",
    "start": "1321200",
    "end": "1327400"
  },
  {
    "text": "your context as well U you can look at the documentation for that basically",
    "start": "1327400",
    "end": "1334480"
  },
  {
    "text": "check this you will see if this is running you",
    "start": "1334480",
    "end": "1340240"
  },
  {
    "text": "will see that you have installed um all your pods are basically healthy right and you can actually see that it is",
    "start": "1340240",
    "end": "1345880"
  },
  {
    "text": "healthy cool so we want to create create a name space to deploy spice db2 right",
    "start": "1345880",
    "end": "1352279"
  },
  {
    "text": "and um for this guide I'm just going to call it spice DB so I'll do something like this where I do a cube CTL apply",
    "start": "1352279",
    "end": "1358520"
  },
  {
    "text": "and I'll just create a kind of namespace with some metadata uh fairly straight forward and",
    "start": "1358520",
    "end": "1366000"
  },
  {
    "text": "from there I'm going to create an Acme flow with let's encrypt for our",
    "start": "1366000",
    "end": "1371080"
  },
  {
    "text": "certificates right essentially we using search manager to use a DNS challenge this is what my yaml file will of look",
    "start": "1371080",
    "end": "1380120"
  },
  {
    "text": "like bring this",
    "start": "1380120",
    "end": "1383760"
  },
  {
    "text": "here my IVs code is right here yeah okay and as you can see you can put like your",
    "start": "1385520",
    "end": "1392600"
  },
  {
    "text": "own email ID here uh now here's the key so you you have to open up root 53 and",
    "start": "1392600",
    "end": "1400360"
  },
  {
    "text": "choose your DNS zones here uh I'm just going to open up my root 53 here",
    "start": "1400360",
    "end": "1409240"
  },
  {
    "text": "there we go and you can see some",
    "start": "1409240",
    "end": "1414919"
  },
  {
    "text": "test hosted zones",
    "start": "1414919",
    "end": "1419440"
  },
  {
    "text": "here all right yeah okay here we go outset. show so these are the hosted",
    "start": "1420200",
    "end": "1426840"
  },
  {
    "text": "Zone details and this is the DNS entry that I want to add for my",
    "start": "1426840",
    "end": "1433720"
  },
  {
    "text": "selector um make sure your region is selected and your hosted Zone ID which you can also find in the same page is",
    "start": "1433720",
    "end": "1441799"
  },
  {
    "text": "pasted into this so that you know it it verifies that particular ID",
    "start": "1441799",
    "end": "1447640"
  },
  {
    "text": "and again if you have um you know say ek. od. show make sure this is specified",
    "start": "1447640",
    "end": "1456640"
  },
  {
    "text": "here and also make sure this is the URL we are going to deploy to in a later",
    "start": "1456640",
    "end": "1461919"
  },
  {
    "text": "step right that that is a gotcha that you might uh that I've seen you know people not do so this is the URL we will",
    "start": "1461919",
    "end": "1469840"
  },
  {
    "text": "be deploying it to later or yeah all right uh again just to make",
    "start": "1469840",
    "end": "1475840"
  },
  {
    "text": "sure that um the resources are",
    "start": "1475840",
    "end": "1480880"
  },
  {
    "text": "created you in your search manager we want to check the name space and do get",
    "start": "1480880",
    "end": "1486760"
  },
  {
    "text": "secrets and you will see here that there is a config you want to make sure that",
    "start": "1486760",
    "end": "1492600"
  },
  {
    "text": "this TLS file is actually there right um if it's not present again troubleshooting don't go to The Next",
    "start": "1492600",
    "end": "1499960"
  },
  {
    "text": "Step all right so now that's done you want to configure the dispatch that I",
    "start": "1499960",
    "end": "1505240"
  },
  {
    "text": "told you about essentially spice TB dispatches work across instances in the same deployment via grpc I I told you",
    "start": "1505240",
    "end": "1513039"
  },
  {
    "text": "about that so we'll create a yaml file call it internal dispatch do yaml and",
    "start": "1513039",
    "end": "1519559"
  },
  {
    "text": "let's maybe add that in this is the yl file um for this feel free to choose",
    "start": "1519559",
    "end": "1525760"
  },
  {
    "text": "anything I've just kept it as dev. spice DB and yeah that's that's pretty much it",
    "start": "1525760",
    "end": "1531159"
  },
  {
    "text": "you're essentially creating a dispatch certificate in this",
    "start": "1531159",
    "end": "1536240"
  },
  {
    "text": "namespace and yeah that's it and you just want to do a cube CTL apply to this",
    "start": "1536240",
    "end": "1543320"
  },
  {
    "text": "yaml file so this is called internal dispatch and I will do something like this and this will apply it to my",
    "start": "1543320",
    "end": "1551559"
  },
  {
    "text": "cluster cool so we have sort of set all of that up now we actually want to",
    "start": "1551559",
    "end": "1556600"
  },
  {
    "text": "deploy our postgress r s data stored now this is where all the schema and the relationships and all of the data is",
    "start": "1556600",
    "end": "1563559"
  },
  {
    "text": "essentially stored so I go to",
    "start": "1563559",
    "end": "1570000"
  },
  {
    "text": "RDS uh there we go and I've created this already again feel free to choose the",
    "start": "1570000",
    "end": "1575919"
  },
  {
    "text": "options you want or you can just go with the basics takes maybe 5 to 10 minutes",
    "start": "1575919",
    "end": "1580960"
  },
  {
    "text": "which is why I did the demo beforeand and yeah make sure it's in the same VPC",
    "start": "1580960",
    "end": "1586120"
  },
  {
    "text": "and subnets as you know as your eks and your ec2",
    "start": "1586120",
    "end": "1591600"
  },
  {
    "text": "instances but this is where things will be stored um in configuration make sure",
    "start": "1591600",
    "end": "1599039"
  },
  {
    "text": "you get the endpoint which you see here as well as the username and password",
    "start": "1599039",
    "end": "1607360"
  },
  {
    "text": "sometimes this password is automatically chosen by postgress if you choose that option so make sure you write it down or",
    "start": "1607360",
    "end": "1614440"
  },
  {
    "text": "paste it into your aw Secrets or wherever because we need this later",
    "start": "1614440",
    "end": "1620720"
  },
  {
    "text": "on all right so once that's done you want to initialize and configure and U",
    "start": "1620799",
    "end": "1627720"
  },
  {
    "text": "the operator the spice TB operator in kubernetes itself so um if you go to the",
    "start": "1627720",
    "end": "1635159"
  },
  {
    "text": "spice TB operator there are instructions on how you can actually install a",
    "start": "1635159",
    "end": "1640360"
  },
  {
    "text": "release of this it's again pretty straightforward there's a yaml file and you just do a cube CTL and apply the",
    "start": "1640360",
    "end": "1650158"
  },
  {
    "text": "yeah this is sort of how this looks like to configure the spice DB",
    "start": "1650880",
    "end": "1657799"
  },
  {
    "text": "settings I'm just going to do this here",
    "start": "1657799",
    "end": "1663440"
  },
  {
    "text": "yeah um you can see that you can specify the number of replicas you essentially",
    "start": "1663440",
    "end": "1669399"
  },
  {
    "text": "want two is fine for this demo and this actually is the type of data store in",
    "start": "1669399",
    "end": "1676120"
  },
  {
    "text": "this case it is post address there a couple of things you need to change one is the pre-shared key this",
    "start": "1676120",
    "end": "1682640"
  },
  {
    "text": "key could be anything so you can choose to just keep it a very secret preate key but remember that and this is the URL",
    "start": "1682640",
    "end": "1690480"
  },
  {
    "text": "that I was telling you about where you have to reply replace user with that username with the password with that",
    "start": "1690480",
    "end": "1697159"
  },
  {
    "text": "endpoint URL followed by 5432 which is the port postgress",
    "start": "1697159",
    "end": "1702840"
  },
  {
    "text": "users and once you've done save this in a config yaml and then just just do uh",
    "start": "1702840",
    "end": "1709760"
  },
  {
    "text": "apply like this and it will apply these details to your cluster and get your",
    "start": "1709760",
    "end": "1715519"
  },
  {
    "text": "data store up and running just going to go back",
    "start": "1715519",
    "end": "1721240"
  },
  {
    "text": "to our architecture diagram here so we have deployed this RDS we've deployed all",
    "start": "1721240",
    "end": "1728080"
  },
  {
    "text": "this eks thingies and we've deployed this Route 53 Zone we basically need",
    "start": "1728080",
    "end": "1734480"
  },
  {
    "text": "like a load balancer right um in production you want want a load balancer",
    "start": "1734480",
    "end": "1739559"
  },
  {
    "text": "so that's the last step we are going to take so how we do that",
    "start": "1739559",
    "end": "1745679"
  },
  {
    "text": "is with another yaml file we just seem to love yaml here but hey this is the",
    "start": "1745679",
    "end": "1751120"
  },
  {
    "text": "world of containers and kubernetes so this is how we would I'd create like a",
    "start": "1751120",
    "end": "1757440"
  },
  {
    "text": "spice DB hyphen load balancer. yaml and yeah uh this is essentially creating a",
    "start": "1757440",
    "end": "1764399"
  },
  {
    "text": "classic load balancer if you're in PR and you're using grpc I'd recommend creating a network load balancer CU",
    "start": "1764399",
    "end": "1771480"
  },
  {
    "text": "those work better and you know I yeah and you specify the ports the protocol",
    "start": "1771480",
    "end": "1778559"
  },
  {
    "text": "Gateway Etc this you just make sure you specify the same name that you gave earlier when",
    "start": "1778559",
    "end": "1786679"
  },
  {
    "text": "you were configuring the spice DB settings in the previous step so there if youve called it Dev hyphen spice TB",
    "start": "1786679",
    "end": "1793000"
  },
  {
    "text": "make sure you call it the same thing again do a c Cube CTL",
    "start": "1793000",
    "end": "1799720"
  },
  {
    "text": "apply on this on the cb. yaml you can actually check if this is working",
    "start": "1799720",
    "end": "1806880"
  },
  {
    "text": "with seeing what services are running in your namespace so I'm just doing a cube",
    "start": "1806880",
    "end": "1813120"
  },
  {
    "text": "CTL get services and let me specify the name space as well M send price",
    "start": "1813120",
    "end": "1821559"
  },
  {
    "text": "DB and I actually see the URL of my load balancer that's been created in this is",
    "start": "1821559",
    "end": "1828559"
  },
  {
    "text": "just um it's just parsing and getting the first using Json the first index in the array but if you just do a get",
    "start": "1828559",
    "end": "1835039"
  },
  {
    "text": "services within this name space you will see this in the entire Json as well so if you",
    "start": "1835039",
    "end": "1841600"
  },
  {
    "text": "have that URL that's fine make sure you take this output and add it as a c name record in",
    "start": "1841600",
    "end": "1849880"
  },
  {
    "text": "your Route 53 hosted zone so let me go to my Route 53 hosted Zone",
    "start": "1849880",
    "end": "1858240"
  },
  {
    "text": "yep that's here uh I can create a new record and add the subdomain remember",
    "start": "1858240",
    "end": "1863799"
  },
  {
    "text": "this is a subdomain in the earlier step that we've already done the sech manag and verified right very very important",
    "start": "1863799",
    "end": "1870039"
  },
  {
    "text": "because if you add a new subdomain here it's not verified for the encryption and TLS so in that subdomain you can add the",
    "start": "1870039",
    "end": "1877960"
  },
  {
    "text": "value of your uh load balancer and you should be",
    "start": "1877960",
    "end": "1883000"
  },
  {
    "text": "good to go all right let's see if you have anything else to do no that that's",
    "start": "1883000",
    "end": "1889519"
  },
  {
    "text": "pretty much it so yeah those were the steps to get it up and running now spice",
    "start": "1889519",
    "end": "1896399"
  },
  {
    "text": "DB has or rather yeah actually spice DB has this thing called Zed which is a CLI",
    "start": "1896399",
    "end": "1903159"
  },
  {
    "text": "client um you can see all of the flags and the available commands here you can",
    "start": "1903159",
    "end": "1908720"
  },
  {
    "text": "install it using Brew or from Source or whatever this is one way to test out",
    "start": "1908720",
    "end": "1914240"
  },
  {
    "text": "your app but you can also just call the API from within your app so in Zed you can set context so I'll say context set",
    "start": "1914240",
    "end": "1922639"
  },
  {
    "text": "you can give it any name like uh eks guide whatever followed by the again the",
    "start": "1922639",
    "end": "1930159"
  },
  {
    "text": "subdomain right so in my case it would be eks do outset. show followed by a",
    "start": "1930159",
    "end": "1935919"
  },
  {
    "text": "very secret key make sure again it's the same key that we added in that postgress",
    "start": "1935919",
    "end": "1941360"
  },
  {
    "text": "step and again I've done this already so I can just do context list and you can",
    "start": "1941360",
    "end": "1947000"
  },
  {
    "text": "see there are two context so I'm just going to and it's set as eks guide",
    "start": "1947000",
    "end": "1953639"
  },
  {
    "text": "so now I can now I can choose to write a schema",
    "start": "1953639",
    "end": "1960200"
  },
  {
    "text": "into this I can choose to create relationships and I can use choose to check permissions as well right so let's",
    "start": "1960200",
    "end": "1966159"
  },
  {
    "text": "create a schema in this case so I'm creating a schema I'm writing a schema so this is using the schema right I'm",
    "start": "1966159",
    "end": "1973960"
  },
  {
    "text": "defining a user and I'm defining a document where",
    "start": "1973960",
    "end": "1979200"
  },
  {
    "text": "relation user can is owner and permission owner can view right so I've",
    "start": "1979200",
    "end": "1985080"
  },
  {
    "text": "again done that already and I can write uh let's write a new relationship right",
    "start": "1985080",
    "end": "1990760"
  },
  {
    "text": "we will say use uh soan yeah so you will get a warning if",
    "start": "1990760",
    "end": "1999200"
  },
  {
    "text": "it's an old version but you will get some sort of key there to tell you that it has been written so let's do a",
    "start": "1999200",
    "end": "2005279"
  },
  {
    "text": "permission check so I will do Z permission check doc one user so on",
    "start": "2005279",
    "end": "2014519"
  },
  {
    "text": "oh I forgot to say what I'm checking",
    "start": "2014519",
    "end": "2020240"
  },
  {
    "text": "for there we go yeah and it says true uh let me try a different name I will say",
    "start": "2020240",
    "end": "2029000"
  },
  {
    "text": "Bob right false because right now only user Sohan and from earlier user Amelia have access",
    "start": "2029000",
    "end": "2037480"
  },
  {
    "text": "so so that essentially was how it worked let me just go back to My Demo",
    "start": "2037480",
    "end": "2045000"
  },
  {
    "text": "now you might think okay all of this is well and good um you know sure but you",
    "start": "2045000",
    "end": "2051200"
  },
  {
    "text": "have been implementing like your own version of authorization at work it's",
    "start": "2051200",
    "end": "2056960"
  },
  {
    "text": "it's working fine so why is this important here's why it's super",
    "start": "2056960",
    "end": "2062800"
  },
  {
    "text": "important so I know if you have heard of o w ASP or oasp it stands for open",
    "start": "2062800",
    "end": "2068158"
  },
  {
    "text": "worldwide application security project now this is like an industry body which",
    "start": "2068159",
    "end": "2073240"
  },
  {
    "text": "looks at things like security within um the industry every year for the last few",
    "start": "2073240",
    "end": "2079000"
  },
  {
    "text": "years they've been coming out with a list of um biggest security risks to web",
    "start": "2079000",
    "end": "2084520"
  },
  {
    "text": "apps do you have any guesses as to what was number one this past year or in",
    "start": "2084520",
    "end": "2091398"
  },
  {
    "text": "2024 if you guessed broken access control then well that is actually",
    "start": "2091399",
    "end": "2096839"
  },
  {
    "text": "spoton um for the last few years actually broken Access Control has been",
    "start": "2096839",
    "end": "2102400"
  },
  {
    "text": "number one on the biggest or most critical security risk to web apps strangely in 2017 it was number five on",
    "start": "2102400",
    "end": "2110480"
  },
  {
    "text": "the list where there were other things that were above the list but those things have been fixed and they've been",
    "start": "2110480",
    "end": "2116480"
  },
  {
    "text": "standardized in an industry so right now I think we're at a stage where we should be doing uh authorization or we should",
    "start": "2116480",
    "end": "2123320"
  },
  {
    "text": "be letting others do authoriz authorization and not do it ourselves because the most common industry pattern",
    "start": "2123320",
    "end": "2130560"
  },
  {
    "text": "is to embed authorization code in an application already and this is not something we",
    "start": "2130560",
    "end": "2138119"
  },
  {
    "text": "recommend doing or shouldn't be done U like an old monolithic application here makes a database call and says if this",
    "start": "2138119",
    "end": "2145560"
  },
  {
    "text": "is an allowed user return true and just do something and this has many drawbacks",
    "start": "2145560",
    "end": "2151960"
  },
  {
    "text": "one is of course it it is not safe but uh in terms of when you have traffic",
    "start": "2151960",
    "end": "2157800"
  },
  {
    "text": "that scales past the limit of your solution your performance is impacted at",
    "start": "2157800",
    "end": "2163599"
  },
  {
    "text": "the same time if a customer requests for a new tricky feature this complexity of",
    "start": "2163599",
    "end": "2169640"
  },
  {
    "text": "what you're doing actually increases again potentially providing a security risk or at the very least just blocking",
    "start": "2169640",
    "end": "2176800"
  },
  {
    "text": "development and feature velocity in your company and lastly if your business is",
    "start": "2176800",
    "end": "2182240"
  },
  {
    "text": "moving to a new geography your data isn't distributed when you do something like this and in a way you start",
    "start": "2182240",
    "end": "2188680"
  },
  {
    "text": "excluding a market with uh very very U you know High latency and lots of low",
    "start": "2188680",
    "end": "2194920"
  },
  {
    "text": "times and potentially you're losing Revenue so take it from oosp that uh the",
    "start": "2194920",
    "end": "2202160"
  },
  {
    "text": "most critical security risk now is broken access control which is why you should probably be letting someone else",
    "start": "2202160",
    "end": "2208359"
  },
  {
    "text": "do the authorization for you um app permissions are hard it's not a trivial",
    "start": "2208359",
    "end": "2213880"
  },
  {
    "text": "problem but we all have to do it and we are all talking at at global scale now so now is the time to actually look at",
    "start": "2213880",
    "end": "2221040"
  },
  {
    "text": "it I've come to the end of my presentation but for next steps you want to play around with schema it's fun just",
    "start": "2221040",
    "end": "2227680"
  },
  {
    "text": "playing around with how to model your system you can do it on play. od.com",
    "start": "2227680",
    "end": "2233319"
  },
  {
    "text": "schema if you want to read a deep dive on how spice DB's architecture works you know for the geekier folks or people",
    "start": "2233319",
    "end": "2240000"
  },
  {
    "text": "interested in distributed systems check out that blog post and also feel free to contribute to spice DB it is completely",
    "start": "2240000",
    "end": "2246960"
  },
  {
    "text": "open source we have a GitHub and a Discord um Discord server which is Super",
    "start": "2246960",
    "end": "2253240"
  },
  {
    "text": "Active so you know jump in on there and um yeah I hope to see you there please feel free to connect with me on LinkedIn",
    "start": "2253240",
    "end": "2259440"
  },
  {
    "text": "if you have any questions or enjoy this webinar until next time uh have a good day and see you soon bye",
    "start": "2259440",
    "end": "2268400"
  }
]