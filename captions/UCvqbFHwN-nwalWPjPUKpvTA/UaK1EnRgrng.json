[
  {
    "text": "so my name is Jonathan Whitaker I am a staff software engineer at OCTA and",
    "start": "520",
    "end": "5560"
  },
  {
    "text": "ozero and I'm also a core maintainer of the open fga project today I'm going to",
    "start": "5560",
    "end": "11559"
  },
  {
    "text": "be talking with you all about Federated identity and access management for kubernetes with open fga and we will use",
    "start": "11559",
    "end": "19359"
  },
  {
    "text": "keycloak in this example as well to represent an identity provider uh as we",
    "start": "19359",
    "end": "24439"
  },
  {
    "text": "demonstrate this Federation so to kick things off let's just start with some simple definitions",
    "start": "24439",
    "end": "31840"
  },
  {
    "text": "um it's often overlooked what is Federation so the web services F uh web",
    "start": "31840",
    "end": "37120"
  },
  {
    "text": "services Federation spec defines Federation as the allowance of security principal identities and attributes to",
    "start": "37120",
    "end": "44200"
  },
  {
    "text": "be shared across trust boundaries according to established policies so what does that really mean right we have",
    "start": "44200",
    "end": "51000"
  },
  {
    "text": "we have this stack we have infrastructure we have applications you know we have identity providers we have",
    "start": "51000",
    "end": "56320"
  },
  {
    "text": "a lot of security context and it's spread across ious applications and and",
    "start": "56320",
    "end": "61920"
  },
  {
    "text": "infrastructure in our ecosystem and in order to ask you know Access Control",
    "start": "61920",
    "end": "67360"
  },
  {
    "text": "decisions and to answer you know certain policies we need to be able to share that context across these boundaries and",
    "start": "67360",
    "end": "74759"
  },
  {
    "text": "we need to be able to do so so that we can evaluate these policies across these different",
    "start": "74759",
    "end": "80200"
  },
  {
    "text": "contexts now in Industry today we have focused a lot in the last 10 to 15 years",
    "start": "80200",
    "end": "85920"
  },
  {
    "text": "on identity Federation and directory services so some of the existing",
    "start": "85920",
    "end": "91040"
  },
  {
    "text": "standards and protocols for the Federation of identity specifically these include things like open ID",
    "start": "91040",
    "end": "97040"
  },
  {
    "text": "connect uh oath 2 saml 2 and the web services Federation spec I'm sure all of",
    "start": "97040",
    "end": "103399"
  },
  {
    "text": "you are probably aware with some of these um You probably use them in your day-to-day job",
    "start": "103399",
    "end": "108640"
  },
  {
    "text": "right now this is where we've largely been focused in the industry again over the last 10 to 15 years we've been",
    "start": "108640",
    "end": "115520"
  },
  {
    "text": "focused on the identity management piece of the identity and access management pi",
    "start": "115520",
    "end": "121880"
  },
  {
    "text": "and I would argue that as an industry we have yet to cohesively stitch together",
    "start": "121880",
    "end": "127880"
  },
  {
    "text": "the access management side of the identity access and access management",
    "start": "127880",
    "end": "133560"
  },
  {
    "text": "puzzle so I'd like to see more development you know as a community and as an industry in this space stitching",
    "start": "133560",
    "end": "140200"
  },
  {
    "text": "these two things together more cohesively so I'm going to pose a question to the community to all of us",
    "start": "140200",
    "end": "146560"
  },
  {
    "text": "today what if identity and access management was actually identity and you",
    "start": "146560",
    "end": "152879"
  },
  {
    "text": "know underscore the and part access management if only we could if only we",
    "start": "152879",
    "end": "158800"
  },
  {
    "text": "could start to establish some standards or protocols uh maybe you know apis for",
    "start": "158800",
    "end": "164080"
  },
  {
    "text": "enforcing access controls across trust boundaries right this Federation that",
    "start": "164080",
    "end": "169400"
  },
  {
    "text": "we're talking about I think that open fga is a project",
    "start": "169400",
    "end": "175040"
  },
  {
    "text": "which can really start to bridge this gap between you know identity provider ERS applications infrastructure and in",
    "start": "175040",
    "end": "182720"
  },
  {
    "text": "general our whole stack authorization and access controls are everywhere so if you're not familiar",
    "start": "182720",
    "end": "190720"
  },
  {
    "text": "with open fga if you haven't heard about it before kind of give a quick overview of what it is open fga fga stands for",
    "start": "190720",
    "end": "198319"
  },
  {
    "text": "fine grain authorization and open fga is a flexible and performant authorization",
    "start": "198319",
    "end": "204680"
  },
  {
    "text": "engine built to solve fine grain authorization what do I mean by fine grain authorization",
    "start": "204680",
    "end": "210599"
  },
  {
    "text": "well historically speaking lots of applications Implement ad hoc and custom Access Control policies these are often",
    "start": "210599",
    "end": "217640"
  },
  {
    "text": "times implemented in code AS database queries you know custom logic embedded",
    "start": "217640",
    "end": "222720"
  },
  {
    "text": "in applications across your whole platform you can't go to one person in your org and say how does access control",
    "start": "222720",
    "end": "228959"
  },
  {
    "text": "work across your whole platform because that's custom logic that only certain people know open fga was built to solve this",
    "start": "228959",
    "end": "237040"
  },
  {
    "text": "problem and it was in it's inspired by a system called Zanzibar that Google",
    "start": "237040",
    "end": "242920"
  },
  {
    "text": "described in a white paper called Google Zanzibar and in this paper they described how they solved authorization",
    "start": "242920",
    "end": "249319"
  },
  {
    "text": "at massive scale for all of Google services now you can imagine how profound that is because Google is a",
    "start": "249319",
    "end": "256120"
  },
  {
    "text": "huge company with lots of infrastructure lots of applications and those applications have their own unique",
    "start": "256120",
    "end": "262160"
  },
  {
    "text": "authorization models their own entities their own access patterns right so to",
    "start": "262160",
    "end": "267240"
  },
  {
    "text": "build a system that's flexible enough to enforce authorization across the Google ecosystem it's pretty profound statement",
    "start": "267240",
    "end": "274360"
  },
  {
    "text": "that's why it's such a powerful model open fga was built from inspiration from",
    "start": "274360",
    "end": "279639"
  },
  {
    "text": "that it's currently a cncf Sandbox project and we actually just submitted for incubation I think last week so",
    "start": "279639",
    "end": "286560"
  },
  {
    "text": "hopefully sometime this year we'll graduate from sandbox to incubation and continue our journey in the cloud native",
    "start": "286560",
    "end": "293680"
  },
  {
    "text": "Computing Foundation ecosystem um it's actively maintained today by OCTA and ozero the project",
    "start": "293680",
    "end": "300320"
  },
  {
    "text": "actually originally started um in ozero Labs which is an R&D division of ozero",
    "start": "300320",
    "end": "306960"
  },
  {
    "text": "and we have a growing community and various project Integrations so if you haven't joined the community and you",
    "start": "306960",
    "end": "313680"
  },
  {
    "text": "need you know to solve some complex authorization problems please reach out join the community and and find ways to",
    "start": "313680",
    "end": "319639"
  },
  {
    "text": "get involved as a developer using open fga I can kind of break down your interaction",
    "start": "319639",
    "end": "326199"
  },
  {
    "text": "with our with our platform with our service into three Prim categories as a developer you first",
    "start": "326199",
    "end": "332600"
  },
  {
    "text": "start by defining an fga authorization model the authorization model is a",
    "start": "332600",
    "end": "337960"
  },
  {
    "text": "declarative policy that defines how authorization works in your application",
    "start": "337960",
    "end": "343639"
  },
  {
    "text": "so for example you can say users can view folders and folders contain documents that is the policy statement",
    "start": "343639",
    "end": "350600"
  },
  {
    "text": "in plain English and you can actually translate that to a declarative model in the fga modeling language we actually",
    "start": "350600",
    "end": "357160"
  },
  {
    "text": "even have projects that have popped up in the community where you can take plain English and actually derive an",
    "start": "357160",
    "end": "362600"
  },
  {
    "text": "actual fga model from plain English too so there's a lot of really cool Integrations and features that the",
    "start": "362600",
    "end": "367720"
  },
  {
    "text": "community is rallying on with open fga the second thing you do after you've",
    "start": "367720",
    "end": "373120"
  },
  {
    "text": "Define a model is you write or you import relationship data this is the data that governs Access Control",
    "start": "373120",
    "end": "379199"
  },
  {
    "text": "decisions in your applications these might be relationships you know for example maybe maybe a user has a role or",
    "start": "379199",
    "end": "385880"
  },
  {
    "text": "maybe is maybe a user has been shared access to a document um depending on",
    "start": "385880",
    "end": "391080"
  },
  {
    "text": "what kinds of model and policies your application defines that will govern what kinds of data you write into open",
    "start": "391080",
    "end": "397800"
  },
  {
    "text": "fga open fga becomes an extension of your application databases specifically",
    "start": "397800",
    "end": "404280"
  },
  {
    "text": "for permission data and it's optimized to answer those permission questions the",
    "start": "404280",
    "end": "409800"
  },
  {
    "text": "third thing you do is then query open fga right you ask open fga for an authorization decision and there's different kinds of queries that you can",
    "start": "409800",
    "end": "416039"
  },
  {
    "text": "ask open fga for example you can ask open fga the very specific question can this specific user perform this specific",
    "start": "416039",
    "end": "423960"
  },
  {
    "text": "action on an individual object we call that check and it returns a permitted denied decision we also have other kinds",
    "start": "423960",
    "end": "431479"
  },
  {
    "text": "of queries that allow you to query authorization related information in the inverse form so you can say what",
    "start": "431479",
    "end": "437800"
  },
  {
    "text": "resources or what objects can a user view for example and this returns kind",
    "start": "437800",
    "end": "443280"
  },
  {
    "text": "of list based semantics so you know what documents can user Lucas view we provide",
    "start": "443280",
    "end": "448479"
  },
  {
    "text": "these apis and allow you to query these questions in from different",
    "start": "448479",
    "end": "453560"
  },
  {
    "text": "angles so let's focus in for a little bit on what an fga model looks like and",
    "start": "453560",
    "end": "458800"
  },
  {
    "text": "how how open fga in general kind of models uh permissions so fga models are",
    "start": "458800",
    "end": "465039"
  },
  {
    "text": "modeled as a graph and you know if you're familiar with graphs you know that graphs are composed of nodes and in",
    "start": "465039",
    "end": "471319"
  },
  {
    "text": "in fga we call these types and relations which are analogous to edges in a graph",
    "start": "471319",
    "end": "476440"
  },
  {
    "text": "so in this example we have two different kinds of nodes we have user nodes and we have document nodes or types and in",
    "start": "476440",
    "end": "482720"
  },
  {
    "text": "particular we have user Lucas and document secret we can Define relations which",
    "start": "482720",
    "end": "489159"
  },
  {
    "text": "Define relationships between related types so in this example the user type can be related to document types through",
    "start": "489159",
    "end": "496159"
  },
  {
    "text": "read relations and through delete relations now I use a dotted line in this diagram here because these",
    "start": "496159",
    "end": "502599"
  },
  {
    "text": "relations represent possible relations in this graph of relationships and when I use the term relation you can think",
    "start": "502599",
    "end": "509240"
  },
  {
    "text": "about that is just a permission right read is a relation here but that would be the thing that you're enforcing your",
    "start": "509240",
    "end": "514399"
  },
  {
    "text": "permission check on right so it there's a possibility that a user might be",
    "start": "514399",
    "end": "519640"
  },
  {
    "text": "related to a document through a read relation or through a delete relation those don't become Concrete in this",
    "start": "519640",
    "end": "525200"
  },
  {
    "text": "graph of relationships this graph of permissions until you establish a relationship tupple and this establishes",
    "start": "525200",
    "end": "531959"
  },
  {
    "text": "a concrete path in the graph or an edge in the graph and it's formally defined as a triplet where you have some Source",
    "start": "531959",
    "end": "538720"
  },
  {
    "text": "subject a relation and some destination object so for example if you were to",
    "start": "538720",
    "end": "544600"
  },
  {
    "text": "write the tupple user Lucas can read document secret then that establishes",
    "start": "544600",
    "end": "550320"
  },
  {
    "text": "this concrete Edge in this graph of relationships represented by the solid line here and that now becomes a",
    "start": "550320",
    "end": "556839"
  },
  {
    "text": "permission in this graph based model right we have other features of our",
    "start": "556839",
    "end": "562839"
  },
  {
    "text": "modeling language too which allow you to go beyond just basic relationship based",
    "start": "562839",
    "end": "568560"
  },
  {
    "text": "Access Control policies we have what are called conditional relationship tles so",
    "start": "568560",
    "end": "573880"
  },
  {
    "text": "these allow you to express complex policies involving you know geob based policies IP addresses IP ranges temporal",
    "start": "573880",
    "end": "582160"
  },
  {
    "text": "access uh quota quab based policies um in this example you can see that we've",
    "start": "582160",
    "end": "588959"
  },
  {
    "text": "defined different kinds of entities in our fga model that's an example of an fga model here we have users and we have",
    "start": "588959",
    "end": "595600"
  },
  {
    "text": "groups of users and a a group can a user can be assigned as a member of a group",
    "start": "595600",
    "end": "601000"
  },
  {
    "text": "that's what these type restrictions in the brackets represent here there's two cases that are represented in this model",
    "start": "601000",
    "end": "607519"
  },
  {
    "text": "you can assign a user to a group unconditionally no condition is involved in that but the other option is you can",
    "start": "607519",
    "end": "614240"
  },
  {
    "text": "assign a user to a to a member of a group with a condition on a temporal grant for example so this is an example",
    "start": "614240",
    "end": "621279"
  },
  {
    "text": "of a temporal access policy where you can give a user access to a group or",
    "start": "621279",
    "end": "627160"
  },
  {
    "text": "assign them to a group for a window of time time in this case if the current time stamp is less than or equal to some",
    "start": "627160",
    "end": "633200"
  },
  {
    "text": "Grant time the time at which you add the user to the group plus some Grant duration then that user will be",
    "start": "633200",
    "end": "638880"
  },
  {
    "text": "considered part of that group if you're evaluating that relationship in a way",
    "start": "638880",
    "end": "644519"
  },
  {
    "text": "such that that expression is not met or fulfilled then we will consider that relationship as you know not present in",
    "start": "644519",
    "end": "651800"
  },
  {
    "text": "the graph essentially so with this mechanism you can express very complex policies and these Expressions here that",
    "start": "651800",
    "end": "659480"
  },
  {
    "text": "defined use Google's common expression language which is an extremely powerful expression language allowing you to",
    "start": "659480",
    "end": "665240"
  },
  {
    "text": "express a lot of different kinds of conditional Expressions here's another example of an",
    "start": "665240",
    "end": "671639"
  },
  {
    "text": "fga model that we will kind of use throughout the rest of this presentation in this case we have users we have role",
    "start": "671639",
    "end": "678000"
  },
  {
    "text": "bindings roles and resources this is kind of analogous to how you might Implement role-based Access Control uh",
    "start": "678000",
    "end": "685959"
  },
  {
    "text": "with open fga and this relational based model you have resources and you have actions",
    "start": "685959",
    "end": "692440"
  },
  {
    "text": "that you can perform on a resource such as get um and anyone who is assigned to",
    "start": "692440",
    "end": "697600"
  },
  {
    "text": "a particular role can get a specific resource and you can assign people that",
    "start": "697600",
    "end": "703279"
  },
  {
    "text": "have a particular role binding can be assigned that role and then you can assign individual users to a role",
    "start": "703279",
    "end": "708680"
  },
  {
    "text": "binding so you can bind a user to a role through a role binding and then Grant access to a resource through that",
    "start": "708680",
    "end": "716440"
  },
  {
    "text": "role so let's take an example with kubernetes role-based access control which many of you might be familiar with",
    "start": "716440",
    "end": "722959"
  },
  {
    "text": "if we wanted to see if some user Lucas could you know perform the get action or verb on resource pods we can actually",
    "start": "722959",
    "end": "730800"
  },
  {
    "text": "use that model that I just showed you in the previous slide here's how we can do that we can",
    "start": "730800",
    "end": "736639"
  },
  {
    "text": "first say anyone who has the anyone who has assigned the getter role can get resource",
    "start": "736639",
    "end": "742040"
  },
  {
    "text": "pods and anyone who has the is is part of the subjects that have the getter",
    "start": "742040",
    "end": "748079"
  },
  {
    "text": "role binding a automatically has the getter role and in this case user Lucas is assigned to that role binding so user",
    "start": "748079",
    "end": "755320"
  },
  {
    "text": "Lucas has the getter role binding which gives them the getter role which therefore allows them to get resource",
    "start": "755320",
    "end": "761279"
  },
  {
    "text": "pods so by following the edges in this graph we can Implement role-based Access Control policies with this relational",
    "start": "761279",
    "end": "767320"
  },
  {
    "text": "based model uh in this case you see you know user Lucas allowed is true because there",
    "start": "767320",
    "end": "772800"
  },
  {
    "text": "was a path in this graph we can extend that so that was a very simple example but you can imagine",
    "start": "772800",
    "end": "778760"
  },
  {
    "text": "how that be extended more generally to kubernetes-based access control policies so here is an example of two kubernetes",
    "start": "778760",
    "end": "786240"
  },
  {
    "text": "resources arback resources a cluster roll and a cluster roll binding and I've colorcoded this specifically so that you",
    "start": "786240",
    "end": "792199"
  },
  {
    "text": "can kind of understand how this would map to this relational model in this case we have the cluster role called",
    "start": "792199",
    "end": "798279"
  },
  {
    "text": "reconcile deployments allows get list and watch verbs on deployments in the apps API Group and it also allows the",
    "start": "798279",
    "end": "804800"
  },
  {
    "text": "update verb for deployment status in the apps API Group",
    "start": "804800",
    "end": "810000"
  },
  {
    "text": "on the right hand side we have uh yeah on the right hand side we have the cluster Ro binding called deployment users and user Lucas is bound to that",
    "start": "810000",
    "end": "818560"
  },
  {
    "text": "reconcile deployments cluster role so in this graph based model you can see user Lucas is assigned that cluster role",
    "start": "818560",
    "end": "824600"
  },
  {
    "text": "binding deployment users anyone who's assigned to that cluster roll binding can therefore you know is is a",
    "start": "824600",
    "end": "831639"
  },
  {
    "text": "reconciler of deployments and by being a reconciler of deployments having that cluster role you can list and watch and",
    "start": "831639",
    "end": "838480"
  },
  {
    "text": "get and update these different resources in kubernetes so using this relational",
    "start": "838480",
    "end": "843880"
  },
  {
    "text": "model we can express very fine grain access control um Beyond you know just standard kubernetes R back we could even",
    "start": "843880",
    "end": "850639"
  },
  {
    "text": "add more features that are not implemented in kubernetes uh Access Control policies today by leveraging and",
    "start": "850639",
    "end": "857480"
  },
  {
    "text": "exploiting this graph-based relational model on the identity side of things",
    "start": "857480",
    "end": "864279"
  },
  {
    "text": "let's pretend that you're using keycloak as your identity provider now this can also apply to any other you know General",
    "start": "864279",
    "end": "870279"
  },
  {
    "text": "identity provider maybe you're using ping maybe you're using OCTA ozero",
    "start": "870279",
    "end": "875399"
  },
  {
    "text": "whatever it might be you can manage users and groups from your identity provider side of the story so in this",
    "start": "875399",
    "end": "883360"
  },
  {
    "text": "case there's been an awesome Community contribution by Martin bizzi called keycloak open fga Event publisher it's",
    "start": "883360",
    "end": "890240"
  },
  {
    "text": "an extension for keycloak that listens to User Group uh changes or events and it pushes relationship tuples right into",
    "start": "890240",
    "end": "898160"
  },
  {
    "text": "open fga so the idea is when a user is added to a group we can write relationship tles",
    "start": "898160",
    "end": "903199"
  },
  {
    "text": "like this the one on the bottom is the primary one that would be written by keycloak today it's just a direct user",
    "start": "903199",
    "end": "908600"
  },
  {
    "text": "to group membership user John is a member of the fga group but you could",
    "start": "908600",
    "end": "913759"
  },
  {
    "text": "imagine in the future too uh open fga can go beyond that we can do nested groups and we can do hierarchies and",
    "start": "913759",
    "end": "919000"
  },
  {
    "text": "complex relational structures so we can say the fga group anyone who's a member of the fga group is also a member of the",
    "start": "919000",
    "end": "924120"
  },
  {
    "text": "engineering group and user John is a member of the fga group so therefore user John is both a member of the fga",
    "start": "924120",
    "end": "929759"
  },
  {
    "text": "group and the engineering group and we can you know Express this complex inheritance hierarchy by leveraging this",
    "start": "929759",
    "end": "935319"
  },
  {
    "text": "relational model so in the future and this is a call out to the community and to key cloakers out there maybe keycloak",
    "start": "935319",
    "end": "941839"
  },
  {
    "text": "could use open fga to natively store you know group and user relationships and be able to get features such as these",
    "start": "941839",
    "end": "948360"
  },
  {
    "text": "complex temporal policies geob based policies and these nested group structures natively with that",
    "start": "948360",
    "end": "954199"
  },
  {
    "text": "integration we don't have that today but that would be really cool really powerful",
    "start": "954199",
    "end": "959720"
  },
  {
    "text": "so let's take a sample use case let's look at kubernetes access management we described earlier how we can map this",
    "start": "959720",
    "end": "965399"
  },
  {
    "text": "model but let's describe maybe how we can improve upon what we have today so",
    "start": "965399",
    "end": "970639"
  },
  {
    "text": "today developers can map open ID connect group claims to roles in kubernetes so",
    "start": "970639",
    "end": "976759"
  },
  {
    "text": "the idea is you can authenticate against your kubernetes cluster using open ID connect and you know your oidc provider",
    "start": "976759",
    "end": "983160"
  },
  {
    "text": "can return a token that embeds the groups that you're a part of in that you know identity provider",
    "start": "983160",
    "end": "989600"
  },
  {
    "text": "so in this case maybe you're part of the Cub admins group on the kubernetes side of the house you can create a role",
    "start": "989600",
    "end": "995319"
  },
  {
    "text": "binding where you say anyone who's part of the Cuba admins group of that oidc provided uh you know claim uh they can",
    "start": "995319",
    "end": "1003079"
  },
  {
    "text": "you know read read deployments in this case now this works great it's really",
    "start": "1003079",
    "end": "1008160"
  },
  {
    "text": "powerful um but it's static right it's if you have different kinds of policies",
    "start": "1008160",
    "end": "1014399"
  },
  {
    "text": "that you want to enforce in your identity um mappings for example maybe you want to add temporal access uh maybe",
    "start": "1014399",
    "end": "1022079"
  },
  {
    "text": "you want to revoke a users uh relation relationship to some group more",
    "start": "1022079",
    "end": "1027839"
  },
  {
    "text": "dynamically we can do better than this because in this scenario the information is provided statically in the token and",
    "start": "1027839",
    "end": "1034360"
  },
  {
    "text": "so you would have to force a reauthentication event or somehow uh you know uh revoke the token that's been",
    "start": "1034360",
    "end": "1041640"
  },
  {
    "text": "previously crafted so I think we can do better than this as a community long",
    "start": "1041640",
    "end": "1047438"
  },
  {
    "text": "term with that mind what I'm going to be demoing is kind of proof of concept with kubernetes",
    "start": "1047439",
    "end": "1053600"
  },
  {
    "text": "Federated access and the idea here is we're going to use keycloak as the open ID connect provider for kubernetes",
    "start": "1053600",
    "end": "1060240"
  },
  {
    "text": "authentication so we'll authenticate against our kubernetes cluster using keycloak keycloak will manage the",
    "start": "1060240",
    "end": "1065600"
  },
  {
    "text": "identity based policies such as groups and group memberships that users have",
    "start": "1065600",
    "end": "1070960"
  },
  {
    "text": "and then we'll have a kubernetes controller which reconciles arbac policies that you are applying to your",
    "start": "1070960",
    "end": "1076880"
  },
  {
    "text": "kubernetes cluster and it will synchronize those uh this controller will synchronize those into open fga in",
    "start": "1076880",
    "end": "1083400"
  },
  {
    "text": "real time so I have a single centralized open fga instance that has policy information and data being managed by",
    "start": "1083400",
    "end": "1090280"
  },
  {
    "text": "two different parties kloo kubernetes in this case kubernetes can then delegate",
    "start": "1090280",
    "end": "1095440"
  },
  {
    "text": "authorization decisions to open fga and those decisions will be influenced not",
    "start": "1095440",
    "end": "1100679"
  },
  {
    "text": "only by the policies that are being governed by kubernetes the arbac policies but also the policies that are",
    "start": "1100679",
    "end": "1106559"
  },
  {
    "text": "being managed by the identity provider the user and group policies and so the",
    "start": "1106559",
    "end": "1112720"
  },
  {
    "text": "way we're going to do this is with a web hook the web hook authorizer in kubernetes it's very powerful very",
    "start": "1112720",
    "end": "1118360"
  },
  {
    "text": "extendable here's an overview of what that architecture looks like what I just described so over here on the kubernetes",
    "start": "1118360",
    "end": "1124360"
  },
  {
    "text": "side of the house we have our authorization web hook and that calls",
    "start": "1124360",
    "end": "1129760"
  },
  {
    "text": "out to open fga and uses our various apis that I described earlier you can make authorization checks you can look",
    "start": "1129760",
    "end": "1135919"
  },
  {
    "text": "up resources that the user has so you can use that for resource lists or Collections and filtering and then we",
    "start": "1135919",
    "end": "1142400"
  },
  {
    "text": "also have this controller that watches for changes to policies in kubernetes",
    "start": "1142400",
    "end": "1147760"
  },
  {
    "text": "our arbac policies and when changes happen in you know with our rbac rules",
    "start": "1147760",
    "end": "1152799"
  },
  {
    "text": "we can write those into open fga addition to that kubernetes is using open ID connect authentication with our",
    "start": "1152799",
    "end": "1159679"
  },
  {
    "text": "identity providers on the identity provider side of the house you know this could be any IDP that supports you know",
    "start": "1159679",
    "end": "1166080"
  },
  {
    "text": "oidc for example as well as uh a common standard for synchronizing information",
    "start": "1166080",
    "end": "1172159"
  },
  {
    "text": "and there's a standard out there called skim outbound skim which would allow us to synchronize user and group related",
    "start": "1172159",
    "end": "1178400"
  },
  {
    "text": "information maybe identity based roles and we could use that mechanism across any IDP that supports skim to push this",
    "start": "1178400",
    "end": "1185679"
  },
  {
    "text": "information into open fga so that's the highle",
    "start": "1185679",
    "end": "1191880"
  },
  {
    "text": "architecture and let's go ahead and jump into the demo and we hope the demo gods",
    "start": "1191880",
    "end": "1199159"
  },
  {
    "text": "bless us right so the first thing we'll do is we will bring up an instance of open fga",
    "start": "1199159",
    "end": "1207640"
  },
  {
    "text": "we're just going to use Docker in this example you can deploy open fga as a",
    "start": "1207640",
    "end": "1212799"
  },
  {
    "text": "service we have a Helm chart um you can deploy it as a sidecar model and it's written in go so if you want to integrate it into your Go app you can",
    "start": "1212799",
    "end": "1219640"
  },
  {
    "text": "actually integrate it natively as a library so there we go we have an instance of open fga up and",
    "start": "1219640",
    "end": "1225280"
  },
  {
    "text": "running and I'm going to run a little command here uh which uses our CLI the",
    "start": "1225280",
    "end": "1230880"
  },
  {
    "text": "fga CLI we are going to create a store called Cube demo so what is a store a",
    "start": "1230880",
    "end": "1236080"
  },
  {
    "text": "store is it's a way for open fga to scope relationship data right so when",
    "start": "1236080",
    "end": "1241880"
  },
  {
    "text": "you create a store all of the relationship tle data all the permission data that you're writing into open fga",
    "start": "1241880",
    "end": "1247200"
  },
  {
    "text": "will be scoped under that context so you can use this for managing different environments maybe you have a store for",
    "start": "1247200",
    "end": "1252880"
  },
  {
    "text": "a Dev staging in a prod environment maybe you use a store to provide a tenant isolation mechanism there's a lot",
    "start": "1252880",
    "end": "1259799"
  },
  {
    "text": "of varieties you can use for stores we'll go ahead and create that store and I have a little helpful",
    "start": "1259799",
    "end": "1266640"
  },
  {
    "text": "command here that I'm just using to set our web hook authorizer config to use that store ID so you can kind of ignore",
    "start": "1266640",
    "end": "1273760"
  },
  {
    "text": "that but that's our store we go over here to postman and we can look at the stores in our open fga",
    "start": "1273760",
    "end": "1282600"
  },
  {
    "text": "instance you can see that we have this new store has this identifier and its name is Cube demo",
    "start": "1282600",
    "end": "1289120"
  },
  {
    "text": "we'll go ahead and read use the read API to read these relationship tles that",
    "start": "1289120",
    "end": "1294320"
  },
  {
    "text": "exist in this service there are none yet we haven't added any users to any groups on the keycloak side of the house we",
    "start": "1294320",
    "end": "1300720"
  },
  {
    "text": "haven't applied any arback policies to our kubernetes cluster yet so we wouldn't expect anything at this",
    "start": "1300720",
    "end": "1306720"
  },
  {
    "text": "time let's go ahead and bootstrap uh keycloak so we'll bring up keycloak and",
    "start": "1306720",
    "end": "1312320"
  },
  {
    "text": "the keycloak import job here is just it's just bootstrapping some resources so we're creating a client application",
    "start": "1312320",
    "end": "1318039"
  },
  {
    "text": "so that we can authenticate our kubernetes clust uh kubernetes CLI against a client app and then we're also",
    "start": "1318039",
    "end": "1324200"
  },
  {
    "text": "creating some groups and users uh that we'll use in the demo so let's go ahead",
    "start": "1324200",
    "end": "1329279"
  },
  {
    "text": "and switch over here to keycloak and we can log in with",
    "start": "1329279",
    "end": "1335039"
  },
  {
    "text": "our just default credentials here it's going to warn me to change my password",
    "start": "1335039",
    "end": "1340200"
  },
  {
    "text": "you can see that we have a cube gatee keeper client application that's what we will authenticate our CU Cube CLI",
    "start": "1340200",
    "end": "1347080"
  },
  {
    "text": "against and then we have a uh john. Whitaker o.com user here that user is",
    "start": "1347080",
    "end": "1353640"
  },
  {
    "text": "not part of any groups yet and we do have this fga backend group so I'm a",
    "start": "1353640",
    "end": "1358720"
  },
  {
    "text": "backend developer maybe I want access to a specific name space in kubernetes for",
    "start": "1358720",
    "end": "1363840"
  },
  {
    "text": "example we'll go back over here and let's uh let's bring up our Cube API",
    "start": "1363840",
    "end": "1369440"
  },
  {
    "text": "server I missed it let's see here there we go we'll bring up the cube",
    "start": "1369440",
    "end": "1376520"
  },
  {
    "text": "API server which is called API in this case the web hook authorizer which is that open fga controller and authorizer",
    "start": "1376520",
    "end": "1383640"
  },
  {
    "text": "that that kubernetes is using and then etcd which we need to run Cube API",
    "start": "1383640",
    "end": "1388760"
  },
  {
    "text": "server okay that's up and running that's great down here in this terminal um and",
    "start": "1388760",
    "end": "1394120"
  },
  {
    "text": "I should ask can you guys see this okay is you're good awesome thank you um I'm",
    "start": "1394120",
    "end": "1399159"
  },
  {
    "text": "going to bring up a terminal down here that just shows activity in our in our reconciler and our uh web hook",
    "start": "1399159",
    "end": "1407039"
  },
  {
    "text": "authorizer like I me we don't have any tle data here yet so let's go ahead and let's apply an rback policy to our",
    "start": "1407039",
    "end": "1413960"
  },
  {
    "text": "kubernetes cluster here's an example manifest for some rback resources we're going to",
    "start": "1413960",
    "end": "1420600"
  },
  {
    "text": "create a namespace called fga backend and in that Nam space we will create a role called deployment reader that will",
    "start": "1420600",
    "end": "1427080"
  },
  {
    "text": "allow the get and list verbs on deployments and we'll create a role binding that gives the fga anyone who's",
    "start": "1427080",
    "end": "1433880"
  },
  {
    "text": "a member of the fga backend group the ability to read deployment in that fga",
    "start": "1433880",
    "end": "1439440"
  },
  {
    "text": "backend name space so that's what our manifest looks like we will go ahead",
    "start": "1439440",
    "end": "1444600"
  },
  {
    "text": "over here and we will apply that manifest and you can see we created those and you you might have noticed a",
    "start": "1444600",
    "end": "1450760"
  },
  {
    "text": "lot of activity in this bottom terminal that's our reconciler recognizing that there are changes uh to our back",
    "start": "1450760",
    "end": "1457360"
  },
  {
    "text": "policies in kubernetes and you can notice here that we see activity of writing those tuples to",
    "start": "1457360",
    "end": "1463880"
  },
  {
    "text": "fga so if we go back over to postman and we do a read there's now a bunch of in here the ones that are kind of most",
    "start": "1463880",
    "end": "1471000"
  },
  {
    "text": "notable to point out is this this tle here it says that there is this K8",
    "start": "1471000",
    "end": "1476679"
  },
  {
    "text": "resource and it refers to deployments in this fga backend namespace and anyone who's assigned the",
    "start": "1476679",
    "end": "1484080"
  },
  {
    "text": "deployment reader role in that fga back in namespace can perform that list",
    "start": "1484080",
    "end": "1489440"
  },
  {
    "text": "operation the list verb uh I won't bore you but there's no other tuples in this set that establish",
    "start": "1489440",
    "end": "1496480"
  },
  {
    "text": "user to group relationships yet because we haven't added a user to a group in keycloak yet so let's go back to the",
    "start": "1496480",
    "end": "1504000"
  },
  {
    "text": "terminal and we're going to act um like we're a user john. Whitaker oo.com in",
    "start": "1504000",
    "end": "1510200"
  },
  {
    "text": "our identity provider so we're going to try to get deployments in that fga backend namespace with this",
    "start": "1510200",
    "end": "1516720"
  },
  {
    "text": "user this is going to ask me to authenticate by following a redirect URL here so I'm just going to open that up",
    "start": "1516720",
    "end": "1522760"
  },
  {
    "text": "in an incognito browser so we get a fresh session and everything and I'll log in with John Whitaker",
    "start": "1522760",
    "end": "1530600"
  },
  {
    "text": "oo.com that's my password we've authenticated now against our kubernetes cluster if we go back to our terminal we",
    "start": "1530600",
    "end": "1537840"
  },
  {
    "text": "can see that we got an unauthorized response from the cube API server this user with this ID cannot list the",
    "start": "1537840",
    "end": "1546120"
  },
  {
    "text": "deployment resource in the fga backend namespace that was",
    "start": "1546120",
    "end": "1551600"
  },
  {
    "text": "forbidden so let's go back into our kubernetes Administration console and we",
    "start": "1551600",
    "end": "1556919"
  },
  {
    "text": "will go to users go here and we will add John to that fga",
    "start": "1556919",
    "end": "1562399"
  },
  {
    "text": "backend group if we go back to our CLI now and we run that same operation notice we got",
    "start": "1562399",
    "end": "1569200"
  },
  {
    "text": "a different response this time now I I haven't applied any deployment resources to the Cub API server so we don't get",
    "start": "1569200",
    "end": "1575080"
  },
  {
    "text": "any resources back but we don't get a forbidden response so this request has been authorized so we just added you",
    "start": "1575080",
    "end": "1582760"
  },
  {
    "text": "know we just changed a policy if you will a user group mapping in our identity provider and we actually saw a",
    "start": "1582760",
    "end": "1587919"
  },
  {
    "text": "policy enforcement change in our CP API server because it's all Federated through this Central authorization",
    "start": "1587919",
    "end": "1594000"
  },
  {
    "text": "engine called open fga right so we can go back I'm going to remove this user",
    "start": "1594000",
    "end": "1599840"
  },
  {
    "text": "from that group and you know we can we can come here and we can show it's forbidden again I wanted to demonstrate",
    "start": "1599840",
    "end": "1608039"
  },
  {
    "text": "something that we could do in the future if we have more native Integrations in our cncf ecosystem with open fga I",
    "start": "1608039",
    "end": "1614919"
  },
  {
    "text": "mentioned earlier how we can model temporal access policies you know Geo based policies and IP based policies so",
    "start": "1614919",
    "end": "1622240"
  },
  {
    "text": "I wanted to show what what that could look like um if for example keycloak",
    "start": "1622240",
    "end": "1628080"
  },
  {
    "text": "allowed you to say that I want to add a user to a group but only for a certain",
    "start": "1628080",
    "end": "1633200"
  },
  {
    "text": "window of time right maybe only for 10 seconds or 30 seconds maybe it's a support engineer that needs access to uh",
    "start": "1633200",
    "end": "1641000"
  },
  {
    "text": "administer certain portions of your kubernetes cluster there's a lot of scenarios you could imagine here this is",
    "start": "1641000",
    "end": "1646960"
  },
  {
    "text": "the example that I wanted to just demonstrate so we have this model here users can be related to",
    "start": "1646960",
    "end": "1654399"
  },
  {
    "text": "groups and those users can be conditionally related to groups with",
    "start": "1654399",
    "end": "1659679"
  },
  {
    "text": "this temporal Grant which is similar policy that I showed you all earlier that temporal Grant says that if the",
    "start": "1659679",
    "end": "1666159"
  },
  {
    "text": "current time is less than or equal to the time that I granted that access to that group plus some Grant duration",
    "start": "1666159",
    "end": "1673679"
  },
  {
    "text": "right if that current time is less than that then we will consider that user to be part of that gr other otherwi",
    "start": "1673679",
    "end": "1679919"
  },
  {
    "text": "otherwise we will not so I'm going to simulate what that",
    "start": "1679919",
    "end": "1685080"
  },
  {
    "text": "might look like key cloak would be writing that information into open fga since keycloak doesn't have that support",
    "start": "1685080",
    "end": "1691760"
  },
  {
    "text": "today I'm going to simulate that using the fga CLI so I'm going to go back here",
    "start": "1691760",
    "end": "1697120"
  },
  {
    "text": "and I'm going to grab this user's identifier and I'm just going to put it right there copy and paste this and",
    "start": "1697120",
    "end": "1705519"
  },
  {
    "text": "hopefully I get my time conversion right speak up if you see something wrong so it is the 21st and we are plus one",
    "start": "1705519",
    "end": "1713399"
  },
  {
    "text": "UTC um so it's really 4 451 right so",
    "start": "1713399",
    "end": "1720320"
  },
  {
    "text": "16 51 here and we will grant this access",
    "start": "1720320",
    "end": "1727799"
  },
  {
    "text": "for maybe let's say 70 seconds",
    "start": "1727799",
    "end": "1733640"
  },
  {
    "text": "right so we wrote that Tuple and if we go back here and we use this",
    "start": "1733640",
    "end": "1738960"
  },
  {
    "text": "notice they I didn't change anything over in keycloak I removed that user from that group in keycloak right if we",
    "start": "1738960",
    "end": "1744480"
  },
  {
    "text": "go back here that user is not part of any group in keycloak but I'm simulating as though that user had been added in",
    "start": "1744480",
    "end": "1751519"
  },
  {
    "text": "keycloak with a temporal policy now that that policy policy should expire at the",
    "start": "1751519",
    "end": "1758720"
  },
  {
    "text": "top of the minute uh plus 10 seconds so you know hopefully here in 10 seconds or",
    "start": "1758720",
    "end": "1765960"
  },
  {
    "text": "so we should see that that access has been revoked we got an authorized response prior and now if I run that",
    "start": "1765960",
    "end": "1772240"
  },
  {
    "text": "command one more time I get a forbidden response so we just enforce the temporal access based policy",
    "start": "1772240",
    "end": "1780919"
  },
  {
    "text": "right so you know that's that's my demo that's what I've got for you guys and I just want to pose you know the",
    "start": "1782760",
    "end": "1789080"
  },
  {
    "text": "opportunity to you guys the community uh our team is only so large and we need we",
    "start": "1789080",
    "end": "1794799"
  },
  {
    "text": "need help you know integrating open fga into your applications so that you can enforce these kinds of complex policies",
    "start": "1794799",
    "end": "1801919"
  },
  {
    "text": "right like you could imagine if keycloak could have done that out of the box I would have had to simulate it that would have been really powerful and really",
    "start": "1801919",
    "end": "1808039"
  },
  {
    "text": "cool so getting back to kind of concluding thoughts I believe that federating",
    "start": "1808039",
    "end": "1814919"
  },
  {
    "text": "identity and access policies across systems is extremely plausible with open fga in fact open fga was exactly built",
    "start": "1814919",
    "end": "1821840"
  },
  {
    "text": "for this for the same reason Google built Zanzibar they wanted to be able to enforce Access Control policies across",
    "start": "1821840",
    "end": "1827720"
  },
  {
    "text": "every every application in their whole company right cross application cross",
    "start": "1827720",
    "end": "1833960"
  },
  {
    "text": "infrastructure access management I believe that native Integrations with open fga offer unique features such as",
    "start": "1833960",
    "end": "1841159"
  },
  {
    "text": "temporal access policies and other policies that you know we mentioned earlier and I'd like to see the community adding more of this native",
    "start": "1841159",
    "end": "1848320"
  },
  {
    "text": "integration so that you can benefit from these things I learned in this whole process which was a really fun learning",
    "start": "1848320",
    "end": "1854519"
  },
  {
    "text": "opportunity that kubernetes web hook authorization is extremely powerful and extensible um and it was quite easy to",
    "start": "1854519",
    "end": "1861600"
  },
  {
    "text": "get that up and running pretty quickly uh and you know I I think it provides",
    "start": "1861600",
    "end": "1867039"
  },
  {
    "text": "really powerful mechanism to extend it um there's more work to be done on the",
    "start": "1867039",
    "end": "1872559"
  },
  {
    "text": "open fga authorizer web hook authorizer for kubernetes it it doesn't have 100%",
    "start": "1872559",
    "end": "1878480"
  },
  {
    "text": "uh you know Fidelity with the existing Access Control policies models that exist in kubernetes we need to continue",
    "start": "1878480",
    "end": "1884200"
  },
  {
    "text": "extending that more but you know in theory in the future could uh and I just",
    "start": "1884200",
    "end": "1890080"
  },
  {
    "text": "also want to say special thanks to some people from the community in particular uh Lucas cstom uh he helped on the",
    "start": "1890080",
    "end": "1896120"
  },
  {
    "text": "kubernetes side of the house uh he was huge and instrumental in helping do the mapping and uh you know enforcing the",
    "start": "1896120",
    "end": "1903519"
  },
  {
    "text": "access control policies from the kubernetes side and then Martin bizzi did the keycloak integration that you",
    "start": "1903519",
    "end": "1909159"
  },
  {
    "text": "saw that synchronized the user and group information so thank you very much for the hard work and help there and uh I'd",
    "start": "1909159",
    "end": "1915200"
  },
  {
    "text": "love to see you know more contributions like this from you guys on whatever cool projects you were all working on",
    "start": "1915200",
    "end": "1922080"
  },
  {
    "text": "so take the time for some questions if you have",
    "start": "1922080",
    "end": "1927879"
  },
  {
    "text": "any yeah and thank",
    "start": "1928320",
    "end": "1932679"
  },
  {
    "text": "you hi um the actual graph how does open",
    "start": "1937880",
    "end": "1945519"
  },
  {
    "text": "fga how does open fga secure that skim provisioning object or",
    "start": "1945519",
    "end": "1954600"
  },
  {
    "text": "call and then how does fga actually secure the data that's stored in the",
    "start": "1954600",
    "end": "1962000"
  },
  {
    "text": "graph yeah so uh the question is how does open fga um basically enforce",
    "start": "1962000",
    "end": "1967840"
  },
  {
    "text": "access over you know who can write the data and how the data is enforced over the graph um there's kind of two",
    "start": "1967840",
    "end": "1975919"
  },
  {
    "text": "components to that so the the data itself is stored in open fga as a flat triplet just like I described um and we",
    "start": "1975919",
    "end": "1983279"
  },
  {
    "text": "actually apply an iterative graph traversal that's defined by the fga model over that normalized triplet",
    "start": "1983279",
    "end": "1989039"
  },
  {
    "text": "structure um so that's kind of how the mechanics work there there isn't necessarily any access controls directly over the storage data uh you know we",
    "start": "1989039",
    "end": "1996240"
  },
  {
    "text": "store that um scoped by store ID in in the database to answer your other",
    "start": "1996240",
    "end": "2001799"
  },
  {
    "text": "question though you know what we had was we had multiple parties we had we had kubernetes and we had keycloak managing",
    "start": "2001799",
    "end": "2007480"
  },
  {
    "text": "different resources in a centralized store open fga and so what we can do in the future you know I will say we don't",
    "start": "2007480",
    "end": "2014440"
  },
  {
    "text": "have this yet but we plan on adding uh fine grain Access Control to fga ironically fga on fga is what we call it",
    "start": "2014440",
    "end": "2021720"
  },
  {
    "text": "so the idea is that you could have certain um you know service accounts or client applications that have the",
    "start": "2021720",
    "end": "2027320"
  },
  {
    "text": "authority to write relationship tuples for certain object types so keycloak",
    "start": "2027320",
    "end": "2033200"
  },
  {
    "text": "could be the authority that has the rights to write group and user relationships and kubernetes you know is",
    "start": "2033200",
    "end": "2039639"
  },
  {
    "text": "the authority that has the right to write and manage uh those K8 resource uh",
    "start": "2039639",
    "end": "2045039"
  },
  {
    "text": "resource types so you know we can enforce access controls or the data that's being written into the access",
    "start": "2045039",
    "end": "2050480"
  },
  {
    "text": "control system uh to the appropriate authorities does that make sense yeah is",
    "start": "2050480",
    "end": "2055760"
  },
  {
    "text": "there any authentication right now on the skip uh no we that was that was an",
    "start": "2055760",
    "end": "2062079"
  },
  {
    "text": "example of of uh an integration that we could provide uh we don't yet have you",
    "start": "2062079",
    "end": "2067240"
  },
  {
    "text": "know open f g itself doesn't provide the skim that would be provided by like an external party maybe an IDP something",
    "start": "2067240",
    "end": "2073599"
  },
  {
    "text": "like that yep thank you any other",
    "start": "2073599",
    "end": "2078480"
  },
  {
    "text": "questions cool well if you do you know I'll be around feel free to to stop by",
    "start": "2082879",
    "end": "2088358"
  },
  {
    "text": "and and ask questions love to hear from you um and as always you know check us",
    "start": "2088359",
    "end": "2093560"
  },
  {
    "text": "out we're on open fga dodev and we have some other uh community repositories we have a Helm chart so if you're in the",
    "start": "2093560",
    "end": "2099880"
  },
  {
    "text": "kubernetes ecosystem you can install us pretty quick and uh feel free to get involved and reach out on cncf slack the",
    "start": "2099880",
    "end": "2106000"
  },
  {
    "text": "open fga Channel so thank you appreciate it",
    "start": "2106000",
    "end": "2112720"
  }
]