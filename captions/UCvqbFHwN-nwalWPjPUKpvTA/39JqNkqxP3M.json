[
  {
    "text": "welcome to kubecon Welcome to our talk on how to build a distributed system and",
    "start": "0",
    "end": "8880"
  },
  {
    "text": "also should you um we are very excited to be here uh",
    "start": "8880",
    "end": "14639"
  },
  {
    "text": "this is my first kubecon uh so I'm just as excited to learn as I am to sort of",
    "start": "14639",
    "end": "22260"
  },
  {
    "text": "tell you about what we've been working on so who are we we are Patrick desil and",
    "start": "22260",
    "end": "30720"
  },
  {
    "text": "Rebecca bilbro we both work for a company called rotational labs and",
    "start": "30720",
    "end": "36420"
  },
  {
    "text": "rotational Labs builds small to medium-sized geodistributed systems so",
    "start": "36420",
    "end": "44160"
  },
  {
    "text": "these are not kind of like Netflix Facebook Twitter scale distributed",
    "start": "44160",
    "end": "49920"
  },
  {
    "text": "systems but they're distributed throughout the world and uh and because",
    "start": "49920",
    "end": "55680"
  },
  {
    "text": "of that we encounter a lot of interesting problems uh in this space and we're going to talk about some of",
    "start": "55680",
    "end": "62160"
  },
  {
    "text": "those with you today there's a lot of overlap between uh the",
    "start": "62160",
    "end": "68280"
  },
  {
    "text": "problems that we encounter and probably a lot of the solutions that you are",
    "start": "68280",
    "end": "74100"
  },
  {
    "text": "working on or thinking about in your work so we're also hoping that you'll",
    "start": "74100",
    "end": "79260"
  },
  {
    "text": "come up and chat with us later hopefully you'll be able to recognize us and",
    "start": "79260",
    "end": "84360"
  },
  {
    "text": "you'll come find us and to tell us about what you do and what kinds of systems that you're working on",
    "start": "84360",
    "end": "91320"
  },
  {
    "text": "so I would be remiss not to mention our team so the rotational Labs team is also",
    "start": "91320",
    "end": "99240"
  },
  {
    "text": "geo-distributed so we're from all over the world and I wanted to give a special shout out to Karen and Benjamin who did",
    "start": "99240",
    "end": "109560"
  },
  {
    "text": "a lot of the experimentation that kind of led to us coming up with",
    "start": "109560",
    "end": "115979"
  },
  {
    "text": "this talk uh so the the geoping project that we'll talk about is something that",
    "start": "115979",
    "end": "121799"
  },
  {
    "text": "they kind of incubated and so I want to give them a special shout out and if you're curious about what we and",
    "start": "121799",
    "end": "128640"
  },
  {
    "text": "the rest of the team are working on I would encourage you to check out uh rotational.app",
    "start": "128640",
    "end": "135300"
  },
  {
    "text": "and you can get a little sneak peek so uh our talk is a talk in four",
    "start": "135300",
    "end": "141720"
  },
  {
    "text": "movements so I'm going to start by setting the scene and telling you about",
    "start": "141720",
    "end": "147800"
  },
  {
    "text": "a geodistributed system that we've been building and maintaining for the last",
    "start": "147800",
    "end": "153239"
  },
  {
    "text": "two years or so and then we're going to kind of go back a little bit into well",
    "start": "153239",
    "end": "158940"
  },
  {
    "text": "what is a distributed system and what are some of the kind of key problems you have to solve when you are building and",
    "start": "158940",
    "end": "165599"
  },
  {
    "text": "maintaining uh distributed systems then we're going to talk about some of the hard one lessons the things that we",
    "start": "165599",
    "end": "171959"
  },
  {
    "text": "messed up um and we'll sort of show our cards and",
    "start": "171959",
    "end": "177180"
  },
  {
    "text": "be honest about things that didn't go so well the first time and we'll talk about how we work through those problems and",
    "start": "177180",
    "end": "182760"
  },
  {
    "text": "then we're going to talk a little bit about what we think is coming next based on the experiences that we've had at",
    "start": "182760",
    "end": "189360"
  },
  {
    "text": "rotational Labs what we think is sort of coming to an open source repository near",
    "start": "189360",
    "end": "194879"
  },
  {
    "text": "you soon okay so first I'm gonna tell you the",
    "start": "194879",
    "end": "200640"
  },
  {
    "text": "story of global directory service so imagine you know that you know 10 years",
    "start": "200640",
    "end": "208019"
  },
  {
    "text": "ago the government was not really paying attention to uh crypto but in the last",
    "start": "208019",
    "end": "214620"
  },
  {
    "text": "couple of years crypto has become a kind of a thing um and now governments are starting to",
    "start": "214620",
    "end": "219900"
  },
  {
    "text": "catch on around the world and they really want to be able to audit uh crypto transactions especially ones",
    "start": "219900",
    "end": "226620"
  },
  {
    "text": "above some kind of monetary threshold and because of that there's you know groups of organizations now around the",
    "start": "226620",
    "end": "234239"
  },
  {
    "text": "world who are trying to form alliances to figure out how to share uh",
    "start": "234239",
    "end": "239459"
  },
  {
    "text": "information to allow governments to audit their citizens um this is hard if you know anything",
    "start": "239459",
    "end": "246599"
  },
  {
    "text": "about crypto right blockchain doesn't really support the sharing of the kinds",
    "start": "246599",
    "end": "252480"
  },
  {
    "text": "of information that you would need in order to do auditing as a government official right there's like like you",
    "start": "252480",
    "end": "258419"
  },
  {
    "text": "know there's no way to look up somebody right if they're it's a wallet address it's not a person right so it's uh it's",
    "start": "258419",
    "end": "265800"
  },
  {
    "text": "definitely a little bit of a challenge um and so this is kind of what we needed we were tasked with with working on this",
    "start": "265800",
    "end": "271380"
  },
  {
    "text": "for a non-profit um group of people who are trying to work in this space",
    "start": "271380",
    "end": "277680"
  },
  {
    "text": "um and so this is what we built it's kind of you can picture it as like a global Yellow Pages kind of that allows",
    "start": "277680",
    "end": "284940"
  },
  {
    "text": "uh you know different uh virtual asset service providers to look each other up and to exchange uh secure private",
    "start": "284940",
    "end": "293460"
  },
  {
    "text": "information that would allow governments to do audits if they need to and so I",
    "start": "293460",
    "end": "299400"
  },
  {
    "text": "want to emphasize that this is secure information this is private information that is being exchanged right it's like",
    "start": "299400",
    "end": "305460"
  },
  {
    "text": "street addresses of people with wallets and maybe Social Security numbers or the",
    "start": "305460",
    "end": "310500"
  },
  {
    "text": "international equivalent of that right so it needs to be safe it needs to be secure it needs to",
    "start": "310500",
    "end": "316620"
  },
  {
    "text": "be private and so we've got uh a web app that institutions can use and",
    "start": "316620",
    "end": "323340"
  },
  {
    "text": "organizations can use to enroll and there's a an approval process that",
    "start": "323340",
    "end": "328979"
  },
  {
    "text": "happens and then after that you get identity certificates public private key",
    "start": "328979",
    "end": "334320"
  },
  {
    "text": "Pairs and then you can use those to establish Mutual TLS connections with",
    "start": "334320",
    "end": "339900"
  },
  {
    "text": "counterparties and then exchange cryptographically sealed envelopes with",
    "start": "339900",
    "end": "345479"
  },
  {
    "text": "that secret information inside and we use grpc to try to have the lowest",
    "start": "345479",
    "end": "351479"
  },
  {
    "text": "latency possible because we don't want to slow down transactions on the chain so the very first problem that we had to",
    "start": "351479",
    "end": "358680"
  },
  {
    "text": "solve is where do we store the public certificates right so you need to be",
    "start": "358680",
    "end": "364860"
  },
  {
    "text": "able to look up the public certificate for your counterparty we got to store that data somewhere where should we",
    "start": "364860",
    "end": "369960"
  },
  {
    "text": "store it should we store it in Singapore because Singapore is the place that sort of was the fastest uh moving in terms of",
    "start": "369960",
    "end": "376500"
  },
  {
    "text": "government regulation so it's maybe it makes sense to store the data there but if we store the data there then anybody",
    "start": "376500",
    "end": "382860"
  },
  {
    "text": "who's doing transactions uh not in Singapore not you know co-located in",
    "start": "382860",
    "end": "389039"
  },
  {
    "text": "with the Singapore is going to pay an extra latency fee which that doesn't really sound fair it's not really in the",
    "start": "389039",
    "end": "395220"
  },
  {
    "text": "spirit of a distributed Ledger right so we need to figure out some way to distribute the system so that brings us",
    "start": "395220",
    "end": "403139"
  },
  {
    "text": "to what is a distributed system so when I say distributed system",
    "start": "403139",
    "end": "409639"
  },
  {
    "text": "hopefully some of you already kind of have this picture in your mind you know",
    "start": "409639",
    "end": "414720"
  },
  {
    "text": "of a group of servers that are sort of arrayed together in some way they're",
    "start": "414720",
    "end": "419880"
  },
  {
    "text": "interacting you know they're communicating with each other but from the outside perspective like from a user",
    "start": "419880",
    "end": "426479"
  },
  {
    "text": "interaction perspective from a client perspective you're just interacting with one thing right so you know it's sort of",
    "start": "426479",
    "end": "432539"
  },
  {
    "text": "this veil of you know a singular machine but it's actually you know many Machines",
    "start": "432539",
    "end": "438180"
  },
  {
    "text": "working together and that's really critical to distributed systems because things go wrong all the time right",
    "start": "438180",
    "end": "445979"
  },
  {
    "text": "they're natural disasters there are outages uh you know things go down and",
    "start": "445979",
    "end": "451620"
  },
  {
    "text": "because of that you know the the multiple servers multiple computers",
    "start": "451620",
    "end": "456900"
  },
  {
    "text": "working together allow the system to tolerate those failures and not lose",
    "start": "456900",
    "end": "463740"
  },
  {
    "text": "critical data that's in transit the multiple machines also make the",
    "start": "463740",
    "end": "469860"
  },
  {
    "text": "system more available right so that's good for user experience because you don't have to wait a long time to get a",
    "start": "469860",
    "end": "475020"
  },
  {
    "text": "response if you have a query it just goes to the place that's closest to you um the way that this works is that each",
    "start": "475020",
    "end": "481740"
  },
  {
    "text": "peer in the system has a copy of the database so they can respond",
    "start": "481740",
    "end": "487259"
  },
  {
    "text": "independently to requests that come in concurrently right so why do they even need to work",
    "start": "487259",
    "end": "492900"
  },
  {
    "text": "together if they all have a copy and how do they even work together well uh kind of a a side note you know",
    "start": "492900",
    "end": "501900"
  },
  {
    "text": "tangent here is that they're going to work together using grpc uh grpc is",
    "start": "501900",
    "end": "507180"
  },
  {
    "text": "Google's flavor of uh remote procedure calls um and so if they weigh of you know you",
    "start": "507180",
    "end": "513000"
  },
  {
    "text": "can define an API with protophiles you can compile that into the language of your choice and then you can run that",
    "start": "513000",
    "end": "519120"
  },
  {
    "text": "code on two different machines and because both machines recognize the RPC",
    "start": "519120",
    "end": "524219"
  },
  {
    "text": "they can actually execute commands on a remote machine and that's that's how",
    "start": "524219",
    "end": "529680"
  },
  {
    "text": "this is going to work why do they need to cooperate is because you know when",
    "start": "529680",
    "end": "535920"
  },
  {
    "text": "users are making changes to Independent peers those peers at some point need to",
    "start": "535920",
    "end": "542279"
  },
  {
    "text": "synchronize so that they can share data that's been added by different users",
    "start": "542279",
    "end": "547380"
  },
  {
    "text": "around the world and sometimes we are going to get into this situation where",
    "start": "547380",
    "end": "553459"
  },
  {
    "text": "two users have concurrently made a change change to the same object but",
    "start": "553459",
    "end": "560459"
  },
  {
    "text": "with different values and then we have to figure out how to decide who wins and",
    "start": "560459",
    "end": "565560"
  },
  {
    "text": "that is one of the big problems in distributed systems there's actually a lot of ways to solve that problem and it",
    "start": "565560",
    "end": "571440"
  },
  {
    "text": "kind of depends on what your business case is and what you need so if you need strong consistency if you need every",
    "start": "571440",
    "end": "578700"
  },
  {
    "text": "peer to always have the same answer forever then you need strong consistency but then you're going to pay a cost you",
    "start": "578700",
    "end": "584820"
  },
  {
    "text": "know it's going to take more time it's probably going to be more expensive right if you you know if you can relax",
    "start": "584820",
    "end": "590040"
  },
  {
    "text": "those requirements a little bit and do something more eventual then you know",
    "start": "590040",
    "end": "595140"
  },
  {
    "text": "you might have a problem you might be you might be able to have lower latency and higher availability but sometimes",
    "start": "595140",
    "end": "601980"
  },
  {
    "text": "you'll see a stale you might get a stale read so there's kind of trade-offs here for",
    "start": "601980",
    "end": "608040"
  },
  {
    "text": "us we picked eventual consistency it was a good budget friendly Choice basically it you know it guarantees that if",
    "start": "608040",
    "end": "614339"
  },
  {
    "text": "everybody stops making updates eventually everybody all the peers will agree um on what the data should be",
    "start": "614339",
    "end": "621779"
  },
  {
    "text": "um whoops uh so I want to kind of shout out also some of the things that we",
    "start": "621779",
    "end": "626940"
  },
  {
    "text": "built our Solution on top of this is an open source uh solution we built it for a non-profit so it's all out kind of you",
    "start": "626940",
    "end": "633779"
  },
  {
    "text": "can look at the code we built two main packages honu and turtle they're both",
    "start": "633779",
    "end": "639300"
  },
  {
    "text": "names for Turtles so there's kind of a Turtle theme going on right here so we",
    "start": "639300",
    "end": "645240"
  },
  {
    "text": "built these two open source packages they um are built on other open source",
    "start": "645240",
    "end": "650519"
  },
  {
    "text": "packages like level DB and Prometheus um and protocol buffers but the way to",
    "start": "650519",
    "end": "657839"
  },
  {
    "text": "kind of think about it is that honu's job is to add metadata versioning on top of level DB so that we can compare",
    "start": "657839",
    "end": "664519"
  },
  {
    "text": "objects and decide who should win and then turtle is in charge of actually coordinating synchronizations between",
    "start": "664519",
    "end": "671160"
  },
  {
    "text": "peers um and so you know basically appears will periodically synchronize they'll",
    "start": "671160",
    "end": "676860"
  },
  {
    "text": "compare their version vectors and then make updates according to a bilateral",
    "start": "676860",
    "end": "683220"
  },
  {
    "text": "anti-entropy algorithm which I won't go into but you can definitely ask me about it after and I will go into great detail",
    "start": "683220",
    "end": "690420"
  },
  {
    "text": "so I'm going to turn it over to Patrick to talk a little bit about some of the things that we learned along the way",
    "start": "690420",
    "end": "698120"
  },
  {
    "text": "great thanks Rebecca um so the first thing I want to talk about",
    "start": "700800",
    "end": "705959"
  },
  {
    "text": "is uh usually in kubernetes we're kind of trained to think about pods in terms",
    "start": "705959",
    "end": "712079"
  },
  {
    "text": "of uh like we don't want to get too attached like so there's a kettle not not pets mentality",
    "start": "712079",
    "end": "718160"
  },
  {
    "text": "which means that we're viewing these pods as really um vehicles of execution",
    "start": "718160",
    "end": "723600"
  },
  {
    "text": "not necessarily any form of a state they don't really stick around too long we're",
    "start": "723600",
    "end": "729720"
  },
  {
    "text": "expecting kubernetes to be able to destroy them and create them a will",
    "start": "729720",
    "end": "736500"
  },
  {
    "text": "um but this is kind of contrary to what record was just talking about because what we really want is we want that",
    "start": "736500",
    "end": "742640"
  },
  {
    "text": "metadata right in in the uh when we're creating those um queries to the databases so in order",
    "start": "742640",
    "end": "750540"
  },
  {
    "text": "to actually perform this replication we need pods to be addressable",
    "start": "750540",
    "end": "755579"
  },
  {
    "text": "um which is kind of easier said than done on kubernetes um so I've imagined two cows in the on",
    "start": "755579",
    "end": "762720"
  },
  {
    "text": "this Ranch like Bessie and Clarabelle they both need to be able to kind of Gossip to each other and uh exchange",
    "start": "762720",
    "end": "769260"
  },
  {
    "text": "their version vectors in order for this system to be eventually consistent",
    "start": "769260",
    "end": "774720"
  },
  {
    "text": "um so what this means in terms of kubernetes is that we can accomplish this using a kind of a combination of a",
    "start": "774720",
    "end": "781079"
  },
  {
    "text": "few different things we can use a stateful set in kubernetes which is",
    "start": "781079",
    "end": "787019"
  },
  {
    "text": "basically a way to start a bunch of uh pods which have an Associated identity",
    "start": "787019",
    "end": "793260"
  },
  {
    "text": "and also enforce the idea of uniqueness in pods so we're never starting the same",
    "start": "793260",
    "end": "799440"
  },
  {
    "text": "pod the same identity over again when we have to replay things or change",
    "start": "799440",
    "end": "804660"
  },
  {
    "text": "configuration so that's my aspect to it the other aspect",
    "start": "804660",
    "end": "809700"
  },
  {
    "text": "is this config map which is how we're actually getting the pods to know who",
    "start": "809700",
    "end": "814920"
  },
  {
    "text": "they are and who everybody else that they're allowed to talk to are and how to talk to them uh so um what happens is",
    "start": "814920",
    "end": "822240"
  },
  {
    "text": "that you can imagine that replicas.json um thing on the left here being included",
    "start": "822240",
    "end": "828959"
  },
  {
    "text": "in all the deployments um in the uh deployment manifests and what happens is that when you start up",
    "start": "828959",
    "end": "837420"
  },
  {
    "text": "um right so you're a cow waking up in the on the on the CAL Ranch and you figure out who you are and then you uh",
    "start": "837420",
    "end": "843779"
  },
  {
    "text": "also figure out what your process ideas from that and also what region you're in",
    "start": "843779",
    "end": "849360"
  },
  {
    "text": "which is pretty important for some of our metadata stuff and um also what are",
    "start": "849360",
    "end": "855660"
  },
  {
    "text": "the other cows you can talk to on the ranch so um it's really important for the",
    "start": "855660",
    "end": "861240"
  },
  {
    "text": "processor ID is also to be unique because we need to break ties as Rebecca said in order to ensure that the",
    "start": "861240",
    "end": "868139"
  },
  {
    "text": "consistency is actually happening so there's another problem which we",
    "start": "868139",
    "end": "874380"
  },
  {
    "text": "encountered which has to do more with how the client interacts with our system so",
    "start": "874380",
    "end": "881459"
  },
  {
    "text": "um we're thinking about building Geo distributed systems it's really important to consider where our users",
    "start": "881459",
    "end": "887220"
  },
  {
    "text": "are actually coming from because they're coming from all over the world so we don't want to have them give them like",
    "start": "887220",
    "end": "894660"
  },
  {
    "text": "undo latency when they don't need to right so if I'm connecting from France I",
    "start": "894660",
    "end": "901199"
  },
  {
    "text": "don't want to go all the way over to the Singapore server in order to make a request",
    "start": "901199",
    "end": "907620"
  },
  {
    "text": "um but there's a bit uh problem with using something like Google Cloud load",
    "start": "907620",
    "end": "912899"
  },
  {
    "text": "balancer because um we want our clients to be able to connect over grpc for performance",
    "start": "912899",
    "end": "919199"
  },
  {
    "text": "reasons um and this is not something that's very easy to do with a Google load down",
    "start": "919199",
    "end": "925139"
  },
  {
    "text": "service so um that's one issue the other issue is TLS termination",
    "start": "925139",
    "end": "930320"
  },
  {
    "text": "when we get to load balancer so what that means is that if you don't know",
    "start": "930320",
    "end": "935579"
  },
  {
    "text": "what it is it's basically the point at which we interrupt traffic and we decrypt it into unencrypted traffic and",
    "start": "935579",
    "end": "944339"
  },
  {
    "text": "sometimes like this is a something we very much need to do if you want to look",
    "start": "944339",
    "end": "949800"
  },
  {
    "text": "at what's actually coming into the private Network or things like that for",
    "start": "949800",
    "end": "955620"
  },
  {
    "text": "our case it's actually something that we don't want right because we're enforcing",
    "start": "955620",
    "end": "960779"
  },
  {
    "text": "mtls throughout the entire all the way from the clients to the grpc endpoint",
    "start": "960779",
    "end": "966839"
  },
  {
    "text": "Services where our our Turtle might be or another another web-facing service might be so",
    "start": "966839",
    "end": "975779"
  },
  {
    "text": "we really need to enforce grpc or mtls across the entire",
    "start": "975779",
    "end": "981180"
  },
  {
    "text": "um connection so one thing that we can do is we can push the routing up to the DNS",
    "start": "981180",
    "end": "988800"
  },
  {
    "text": "layer so this is a way of getting around that problem right of not being able to use",
    "start": "988800",
    "end": "994500"
  },
  {
    "text": "the grbc with a pre-mensioned load balancer so here is an example of how it",
    "start": "994500",
    "end": "1001040"
  },
  {
    "text": "might work where you have a clients in Detroit who is trying to Ping or resolve",
    "start": "1001040",
    "end": "1007100"
  },
  {
    "text": "a DNS domain name and then what happens is that we have a list of specific IP",
    "start": "1007100",
    "end": "1014660"
  },
  {
    "text": "addresses and those IP addresses just go to all the different deployed Ingress",
    "start": "1014660",
    "end": "1020420"
  },
  {
    "text": "services that we have across the world so that what happens that when we have",
    "start": "1020420",
    "end": "1025520"
  },
  {
    "text": "our magical DNS resolver and it points the user to the right IP address they",
    "start": "1025520",
    "end": "1030918"
  },
  {
    "text": "can cache it like so usually your computer would cache that information and then it would then when they make a",
    "start": "1030919",
    "end": "1037819"
  },
  {
    "text": "new grpc request with that geo.testnut.io what happens is that it goes directly to",
    "start": "1037819",
    "end": "1044360"
  },
  {
    "text": "the grpc or service because they already have the IP address",
    "start": "1044360",
    "end": "1048880"
  },
  {
    "text": "so this come this is a coming to the project we built called uh geoping which",
    "start": "1049640",
    "end": "1055760"
  },
  {
    "text": "is uh basically in short terms it's just a grp service that knows where it is and it's",
    "start": "1055760",
    "end": "1061820"
  },
  {
    "text": "just a glorified version of uh what the maybe the bash or Linux ping is right so",
    "start": "1061820",
    "end": "1069200"
  },
  {
    "text": "instead of like pinging and getting IP address you ping and you get a region where the closest server to you is the",
    "start": "1069200",
    "end": "1076520"
  },
  {
    "text": "reason why we built this is that we wanted a way to actually test that our DNS routing is working since it's not",
    "start": "1076520",
    "end": "1083000"
  },
  {
    "text": "really something that we're doing we're relying on another external service for that uh so",
    "start": "1083000",
    "end": "1089780"
  },
  {
    "text": "um what happens is that it's a pretty simple service if you've never looked at a grpc",
    "start": "1089780",
    "end": "1095480"
  },
  {
    "text": "um uh surface definition this is like probably the most simple one uh that you can start looking at um so it's just one",
    "start": "1095480",
    "end": "1102140"
  },
  {
    "text": "RPC status and it returns some information about the server that you're",
    "start": "1102140",
    "end": "1108080"
  },
  {
    "text": "um yeah you've connected to and so that's something we can just configure on the server side and configuration we",
    "start": "1108080",
    "end": "1113960"
  },
  {
    "text": "don't have to worry about any routing so just for testing purposes so at this point I will wait till uh",
    "start": "1113960",
    "end": "1121720"
  },
  {
    "text": "demo here so um on the left here we have a uh command",
    "start": "1121720",
    "end": "1128900"
  },
  {
    "text": "window and what we can do is we can ping our",
    "start": "1128900",
    "end": "1134559"
  },
  {
    "text": "geodetesnet.io like I mentioned before and you know hopefully it returns back",
    "start": "1134559",
    "end": "1139940"
  },
  {
    "text": "U.S Central One um because um what happens that the DNS resolve to",
    "start": "1139940",
    "end": "1147140"
  },
  {
    "text": "the closest region uh whichever closest to and so then what's really interesting",
    "start": "1147140",
    "end": "1154100"
  },
  {
    "text": "is that if we can we can use a VPN clients to connect to a Singapore here",
    "start": "1154100",
    "end": "1162620"
  },
  {
    "text": "um and now we're pinging back from Asia Southeast one so if we were in Singapore",
    "start": "1162620",
    "end": "1169100"
  },
  {
    "text": "we would get we'd be um actually accessing the grpc JB service in uh um",
    "start": "1169100",
    "end": "1175460"
  },
  {
    "text": "Asia Southeast one region um so does anybody have a favorite European",
    "start": "1175460",
    "end": "1182419"
  },
  {
    "text": "country Finland good choice",
    "start": "1182419",
    "end": "1189700"
  },
  {
    "text": "so connecting to finland's uh if we try this um",
    "start": "1190400",
    "end": "1196100"
  },
  {
    "text": "so I might have so what might happen is that um our uh my local computer here might",
    "start": "1196100",
    "end": "1202100"
  },
  {
    "text": "be caching the DNS um uh error so what I have to do here is",
    "start": "1202100",
    "end": "1207860"
  },
  {
    "text": "we have to flush the cache I need Rebecca's password",
    "start": "1207860",
    "end": "1212980"
  },
  {
    "text": "okay so now hopefully this should uh give us a Euro plus three region so so",
    "start": "1216140",
    "end": "1224120"
  },
  {
    "text": "that kind of proves that our routing works and what we just so basically what we did is we just",
    "start": "1224120",
    "end": "1230720"
  },
  {
    "text": "um uh tested that a bunch of all the different regions and it turns out that Google DNS geobase routing works pretty",
    "start": "1230720",
    "end": "1238940"
  },
  {
    "text": "well um and this is an example of our uh what we're doing we're kind of running",
    "start": "1238940",
    "end": "1245059"
  },
  {
    "text": "simulations to determine um like what it would look like if we had a bunch of pings coming from all",
    "start": "1245059",
    "end": "1250940"
  },
  {
    "text": "across the world so you'll notice that there's a bit of a seasonal a daily seasonality here on the uh on this right",
    "start": "1250940",
    "end": "1258080"
  },
  {
    "text": "um upper right chart here um so I think that's like the most important takeaway from that is that it",
    "start": "1258080",
    "end": "1263179"
  },
  {
    "text": "is like um as day becomes night it becomes day people wake up and go to sleep",
    "start": "1263179",
    "end": "1269059"
  },
  {
    "text": "um the traffic actually changes across the world so you might have a you know a",
    "start": "1269059",
    "end": "1274100"
  },
  {
    "text": "central peaking where Asia Southeast is a troughing I guess uh so",
    "start": "1274100",
    "end": "1282440"
  },
  {
    "text": "um so it's really important to actually consider um like uh more than just geography it",
    "start": "1282440",
    "end": "1288679"
  },
  {
    "text": "could be um time of day and things like that um that you also need to consider and respect to routing",
    "start": "1288679",
    "end": "1295820"
  },
  {
    "text": "um so this is what our uh solution for Goa DNS routing looks like right now we",
    "start": "1295820",
    "end": "1302419"
  },
  {
    "text": "are using Cloud DNA Google Cloud DNS and with their Geo weighted routing policy",
    "start": "1302419",
    "end": "1307480"
  },
  {
    "text": "and uh this gave us a few advantages right because it means that",
    "start": "1307480",
    "end": "1314299"
  },
  {
    "text": "um we're a bit more Cloud native but we can still swap out the that DNS solution",
    "start": "1314299",
    "end": "1320659"
  },
  {
    "text": "for any other one that we come across and we're at the end of the day we're just running uh kubernetes on Google",
    "start": "1320659",
    "end": "1327799"
  },
  {
    "text": "Cloud engines so it's a so it's also something we could swap out",
    "start": "1327799",
    "end": "1333740"
  },
  {
    "text": "as well um so we have some ways of still maintaining our um uh being in the",
    "start": "1333740",
    "end": "1341059"
  },
  {
    "text": "driver's seat so now we want to kind of shift and talk about what we think the future of",
    "start": "1341059",
    "end": "1346880"
  },
  {
    "text": "distributed systems is going to be so we can return to our earlier",
    "start": "1346880",
    "end": "1352400"
  },
  {
    "text": "definition right so uh Rebecca's iPhone edition of a distributed system a",
    "start": "1352400",
    "end": "1357679"
  },
  {
    "text": "network of computers working together to appear to the end user as a single computer and that's like a very classy",
    "start": "1357679",
    "end": "1364280"
  },
  {
    "text": "like technical or like classical definition of what maybe a distributed system might be",
    "start": "1364280",
    "end": "1370240"
  },
  {
    "text": "but if we think about how the area has changed right we have a lot more people",
    "start": "1370240",
    "end": "1375740"
  },
  {
    "text": "on their phones and a lot more users who are not a part of the internet um like maybe 10 years ago they now are",
    "start": "1375740",
    "end": "1382120"
  },
  {
    "text": "and the idea of what a server is is also changed a lot so servers are kind of",
    "start": "1382120",
    "end": "1388940"
  },
  {
    "text": "small and they're also more mobile now so",
    "start": "1388940",
    "end": "1394159"
  },
  {
    "text": "um basically the point is that there it's a different world and maybe we need a new definition of what a distributed",
    "start": "1394400",
    "end": "1399919"
  },
  {
    "text": "system actually is rather than just like this monolithic um archetype so here's our new definition uh it's a",
    "start": "1399919",
    "end": "1407240"
  },
  {
    "text": "flow of events across time and space um so the way to think about this is",
    "start": "1407240",
    "end": "1412460"
  },
  {
    "text": "kind of more microservices type approach where you think about",
    "start": "1412460",
    "end": "1417620"
  },
  {
    "text": "um all the data that's being generated across the world um in terms of events that are go that",
    "start": "1417620",
    "end": "1423320"
  },
  {
    "text": "are um uh in time so these events can be ordered and they can be pushed to Market",
    "start": "1423320",
    "end": "1429740"
  },
  {
    "text": "services and those microservices can be pushing to other microservices and cues",
    "start": "1429740",
    "end": "1434780"
  },
  {
    "text": "and things um so you might be knowing uh What uh kind of what I'm talking about if you've",
    "start": "1434780",
    "end": "1440840"
  },
  {
    "text": "used any of these tools um some message queuing Pub sub stream processing we think that these are going",
    "start": "1440840",
    "end": "1447860"
  },
  {
    "text": "to be kind of expanding popularity um because at the end of the day what you need to do for distributed systems",
    "start": "1447860",
    "end": "1454460"
  },
  {
    "text": "is you need to send data across around the world and the best way to do that is",
    "start": "1454460",
    "end": "1460340"
  },
  {
    "text": "to kind of think about data in terms of events and not necessarily like in",
    "start": "1460340",
    "end": "1465559"
  },
  {
    "text": "traditional database format although I do want to mention um databases obviously still very",
    "start": "1465559",
    "end": "1471200"
  },
  {
    "text": "important like you still need your your postgres and your sqlites running to",
    "start": "1471200",
    "end": "1478340"
  },
  {
    "text": "kind of uh um so you can have some type of local storage",
    "start": "1478340",
    "end": "1483640"
  },
  {
    "text": "so now I pass it back to your bucket to talk about what we think about some new features in these distribute systems",
    "start": "1484340",
    "end": "1492760"
  },
  {
    "text": "real quick I want to bring it back to open source we're at a big open source conference so what is coming next uh in",
    "start": "1494299",
    "end": "1501380"
  },
  {
    "text": "open source I think that there's kind of four things that we think are coming next the first is having persistence",
    "start": "1501380",
    "end": "1510140"
  },
  {
    "text": "turned on by default right so having persistence turned on by default means",
    "start": "1510140",
    "end": "1516679"
  },
  {
    "text": "that we can do things like time travel and we can recover from disaster more",
    "start": "1516679",
    "end": "1521840"
  },
  {
    "text": "easily most Eventing solutions that are out there have persistence turned off by",
    "start": "1521840",
    "end": "1527900"
  },
  {
    "text": "default and that's intentional because it improves throughput and reduces latency but it kind of takes away some",
    "start": "1527900",
    "end": "1534500"
  },
  {
    "text": "of these key features that are going to be required if we're going to start moving towards events as kind of the um",
    "start": "1534500",
    "end": "1539659"
  },
  {
    "text": "at the kind of atom of distributed systems the next thing is kind of",
    "start": "1539659",
    "end": "1545059"
  },
  {
    "text": "geographic event encoding right so for the most part Cloud Solutions assume that you don't want to know about",
    "start": "1545059",
    "end": "1551380"
  },
  {
    "text": "geography right like that's kind of what the cloud is right you can just pretend that it's this magical thing up here and",
    "start": "1551380",
    "end": "1558380"
  },
  {
    "text": "it's not actually physically anywhere but it's actually it is physically in a lot of places",
    "start": "1558380",
    "end": "1563900"
  },
  {
    "text": "um and having that Geographic encoding will Empower us to you know have a better user experience or comply with",
    "start": "1563900",
    "end": "1571340"
  },
  {
    "text": "local regulations where the data is right so it's going to kind of unlock a lot of features that we need another one",
    "start": "1571340",
    "end": "1577940"
  },
  {
    "text": "is total ordering by default so most Eventing Solutions now can only",
    "start": "1577940",
    "end": "1583159"
  },
  {
    "text": "guarantee total ordering for Brokers that are on the same node right and that",
    "start": "1583159",
    "end": "1588440"
  },
  {
    "text": "is because total ordering is expensive it requires consensus right we talked about that at the beginning strong",
    "start": "1588440",
    "end": "1594559"
  },
  {
    "text": "consistency is expensive it's slower and you actually you have to pay more for it",
    "start": "1594559",
    "end": "1599720"
  },
  {
    "text": "but if we had total ordering as kind of a you know readily available open source",
    "start": "1599720",
    "end": "1606860"
  },
  {
    "text": "solution we could kind of guarantee this more Equitable Global engagement with",
    "start": "1606860",
    "end": "1612679"
  },
  {
    "text": "our applications and then the last one that I assume is probably most exciting to a group of kubernetes people is",
    "start": "1612679",
    "end": "1619220"
  },
  {
    "text": "automatic reconfiguration in fact I'm hearing a lot of people saying those words automatic reconfiguration already",
    "start": "1619220",
    "end": "1625220"
  },
  {
    "text": "here at the conference this week so I know that that's something that's on everybody's mind right you can't just",
    "start": "1625220",
    "end": "1630740"
  },
  {
    "text": "infinitely scale your devops team right we need better algorithms that make multi-cluster more realistic for small",
    "start": "1630740",
    "end": "1638900"
  },
  {
    "text": "teams which probably most of us work on a small team and not like a huge team that has infinite resources",
    "start": "1638900",
    "end": "1645400"
  },
  {
    "text": "so we think that is what's coming next if you want to check out a little bit more about what we are doing uh please",
    "start": "1645400",
    "end": "1653240"
  },
  {
    "text": "visit us at rotational.app or just come and chat with us you know come find us",
    "start": "1653240",
    "end": "1660679"
  },
  {
    "text": "at the conference chat us up and we'd love to hear what you're working on and",
    "start": "1660679",
    "end": "1666260"
  },
  {
    "text": "hear what kinds of things you're solving what kinds of Open Source packages you're working on or the the ones that",
    "start": "1666260",
    "end": "1671779"
  },
  {
    "text": "you would like to build maybe we can work together thank you [Applause]",
    "start": "1671779",
    "end": "1680730"
  },
  {
    "text": "so I think this is the time when we take questions right all right",
    "start": "1685220",
    "end": "1692980"
  },
  {
    "text": "any questions yep",
    "start": "1697880",
    "end": "1701260"
  },
  {
    "text": "hi for your uh DNS router where were you running the check for GOP whoops uh",
    "start": "1706000",
    "end": "1713360"
  },
  {
    "text": "sorry we had uh I have like two concurrent questions which like perfectly approves the point that you",
    "start": "1713360",
    "end": "1718520"
  },
  {
    "text": "know failures happen all the time in distributed systems um so do you mind if I answer this",
    "start": "1718520",
    "end": "1724820"
  },
  {
    "text": "question first and then do the router question is that okay all right so you said uh we built our own distributed",
    "start": "1724820",
    "end": "1731720"
  },
  {
    "text": "system and yes it seems like you built your own distributed database yes",
    "start": "1731720",
    "end": "1738220"
  },
  {
    "text": "yes great question so the question is um we built our own distributed database",
    "start": "1741200",
    "end": "1746659"
  },
  {
    "text": "why did we not go with a readily available commercial solution instead of doing something insane like building our",
    "start": "1746659",
    "end": "1752779"
  },
  {
    "text": "own uh distributed database the reason is the commercial Solutions are super expensive uh we're like you know we're",
    "start": "1752779",
    "end": "1759679"
  },
  {
    "text": "working for a non-profit that you know that hired us to do this they do not have the money to spend on like Aurora",
    "start": "1759679",
    "end": "1764960"
  },
  {
    "text": "or spanner or something like that so it's a great question and I assume that probably a lot of people are in the same",
    "start": "1764960",
    "end": "1771200"
  },
  {
    "text": "boat right like to to Shell out money for spanner is like just Way Beyond most people's operating budgets especially",
    "start": "1771200",
    "end": "1777559"
  },
  {
    "text": "now in this economy right so great question okay so then the other question was about geoping",
    "start": "1777559",
    "end": "1784760"
  },
  {
    "text": "uh yes yeah I was just wondering uh where you",
    "start": "1784760",
    "end": "1790039"
  },
  {
    "text": "ran the geoping check right for your DNS router like where did where did that",
    "start": "1790039",
    "end": "1795919"
  },
  {
    "text": "signal go like where did the sorry can you can you ask your question",
    "start": "1795919",
    "end": "1802760"
  },
  {
    "text": "again so you're uh you're using Cloud DNS right and you're routing the",
    "start": "1802760",
    "end": "1809360"
  },
  {
    "text": "customer yourself right using geoping where do you run that check",
    "start": "1809360",
    "end": "1815480"
  },
  {
    "text": "do you want to take this one sure so I guess the question is um",
    "start": "1815480",
    "end": "1822440"
  },
  {
    "text": "uh where we are directing the client to after we're um",
    "start": "1822440",
    "end": "1828559"
  },
  {
    "text": "uh parsing or converting the DNS to or the domain name into an IP address",
    "start": "1828559",
    "end": "1835480"
  },
  {
    "text": "yeah yeah okay so that's going directly to our um uh in just",
    "start": "1836000",
    "end": "1842419"
  },
  {
    "text": "um uh reverse proxy I think we're using traffic uh for that so and then the",
    "start": "1842419",
    "end": "1848299"
  },
  {
    "text": "traffic is um sitting on the kubernetes cluster along with the actual pods",
    "start": "1848299",
    "end": "1854059"
  },
  {
    "text": "um which were which we have our geopris see Services deployed um so that's how it's actually getting",
    "start": "1854059",
    "end": "1859640"
  },
  {
    "text": "to the uh um the service at the end of the day",
    "start": "1859640",
    "end": "1865480"
  },
  {
    "text": "cool",
    "start": "1865640",
    "end": "1868240"
  },
  {
    "text": "other questions oh",
    "start": "1871220",
    "end": "1875440"
  },
  {
    "text": "thank you so in distributed systems",
    "start": "1878480",
    "end": "1883580"
  },
  {
    "text": "Network partitions could happen all the time and especially in the geographically",
    "start": "1883580",
    "end": "1890740"
  },
  {
    "text": "distributed systems like you have so how did you test for resiliency and and",
    "start": "1890740",
    "end": "1897440"
  },
  {
    "text": "reliability and any lessons that you want to share with us thank you that's a",
    "start": "1897440",
    "end": "1904039"
  },
  {
    "text": "really good question so the question is you know it is commonplace in",
    "start": "1904039",
    "end": "1909380"
  },
  {
    "text": "geographically and distributed systems to have partitions happen which is where you know two parts of the system",
    "start": "1909380",
    "end": "1915700"
  },
  {
    "text": "temporarily can't talk to each other which means that they're making a lot of",
    "start": "1915700",
    "end": "1920779"
  },
  {
    "text": "updates maybe locally and then they have to figure out how to synchronize a bunch of updates you know that might have been",
    "start": "1920779",
    "end": "1928520"
  },
  {
    "text": "made over you know an hour or you know maybe even longer if the uh if the Falls",
    "start": "1928520",
    "end": "1934399"
  },
  {
    "text": "happens for a long time and so the question is you know in our solution how",
    "start": "1934399",
    "end": "1939740"
  },
  {
    "text": "do we kind of test for resiliency and recovery so we actually have run some",
    "start": "1939740",
    "end": "1946940"
  },
  {
    "text": "experiment comments where we change the anti-entropy interval to see you know if",
    "start": "1946940",
    "end": "1954320"
  },
  {
    "text": "we can speed up the anti-entropy interval right so like speed up the",
    "start": "1954320",
    "end": "1959360"
  },
  {
    "text": "amount of synchronizations that have that happen we reduce staleness and it does help protect against you know",
    "start": "1959360",
    "end": "1966740"
  },
  {
    "text": "having to do a lot of updates if there is a partition but we don't actually have an experiment yet that's",
    "start": "1966740",
    "end": "1973279"
  },
  {
    "text": "orchestrated to kind of stimulate like a earthquake or something that cuts off",
    "start": "1973279",
    "end": "1978340"
  },
  {
    "text": "Singapore from let's say Ohio or something like that where our other you",
    "start": "1978340",
    "end": "1983360"
  },
  {
    "text": "are our U.S server is but it's a really good idea um and I would love to uh to implement",
    "start": "1983360",
    "end": "1990799"
  },
  {
    "text": "that because I think it would be really interesting to see like how long basically to like I think you would clock it right you would want to know",
    "start": "1990799",
    "end": "1996620"
  },
  {
    "text": "how long it takes for the system to become synchronized uh in the event of a",
    "start": "1996620",
    "end": "2001779"
  },
  {
    "text": "fault like that it's a great question",
    "start": "2001779",
    "end": "2005340"
  },
  {
    "text": "one of the common problems that our team has run into in building new systems is",
    "start": "2008380",
    "end": "2015120"
  },
  {
    "text": "getting it done and then figuring out what we have to test as opposed to",
    "start": "2015120",
    "end": "2020559"
  },
  {
    "text": "coming up with what we want to test first building those tools and then building the system to match it",
    "start": "2020559",
    "end": "2027419"
  },
  {
    "text": "there is good reasons to not test everything like maybe the catastrophic",
    "start": "2027419",
    "end": "2032919"
  },
  {
    "text": "earthquake case that you were just talking about isn't our most pressing concern I'm curious how those",
    "start": "2032919",
    "end": "2038080"
  },
  {
    "text": "conversations went through you and your team as you were building this project yeah I we have the advantage of so our",
    "start": "2038080",
    "end": "2046539"
  },
  {
    "text": "CEO has a PHD in distributed systems um and in fact I think he's sitting",
    "start": "2046539",
    "end": "2052240"
  },
  {
    "text": "somewhere in the audience over there um but uh you can so he kind of has like",
    "start": "2052240",
    "end": "2058540"
  },
  {
    "text": "textbook knowledge of all of the things that can go wrong um and you know has kind of encouraged",
    "start": "2058540",
    "end": "2064898"
  },
  {
    "text": "us to think about failure kind of the whole way through and we definitely have a you know the the mindset that we have",
    "start": "2064899",
    "end": "2071980"
  },
  {
    "text": "about how we're writing in fact like just writing everything in go you know sort of always encourages you to think",
    "start": "2071980",
    "end": "2077618"
  },
  {
    "text": "about you know it'll probably like you know if they're you know if they're equals and then you know whatever your",
    "start": "2077619",
    "end": "2083080"
  },
  {
    "text": "function is sort of the the philosophy is like this probably won't work but if it does keep going",
    "start": "2083080",
    "end": "2090099"
  },
  {
    "text": "um and so kind of that that philosophy of just kind of continually checking for uh you know possible errors you know we",
    "start": "2090099",
    "end": "2097420"
  },
  {
    "text": "do have we do have to check for things like race conditions um right because that's kind of a very",
    "start": "2097420",
    "end": "2102880"
  },
  {
    "text": "common uh probably way more common than earthquakes for sure so that yeah is a",
    "start": "2102880",
    "end": "2109720"
  },
  {
    "text": "great question how to you know how to kind of have that conversation about what to test for I would say uh you know",
    "start": "2109720",
    "end": "2116920"
  },
  {
    "text": "concurrency bugs are like the number one thing and we did have a lot I mean it's a lot",
    "start": "2116920",
    "end": "2123640"
  },
  {
    "text": "of like the anti-entropy routine is like extremely concurrent right because as one replica is kind of uh sending all of",
    "start": "2123640",
    "end": "2131320"
  },
  {
    "text": "its version vectors to the other replica the other replica is starting to send back requests for updates right and",
    "start": "2131320",
    "end": "2138520"
  },
  {
    "text": "those things are happening concurrently so there's a lot of things that can go wrong there great question",
    "start": "2138520",
    "end": "2145320"
  },
  {
    "text": "so I have a question about the use of the location and how would redefining",
    "start": "2153940",
    "end": "2161400"
  },
  {
    "text": "distribute systems as a flow of events across space and time change the user experience for events for apps like uber",
    "start": "2161400",
    "end": "2169359"
  },
  {
    "text": "and Tinder do you want to take this one so thinking about Uber and Tinder",
    "start": "2169359",
    "end": "2177280"
  },
  {
    "text": "um so the question was how is kind of this reframing of distributed systems as",
    "start": "2177280",
    "end": "2184180"
  },
  {
    "text": "being a flow of events across space and time going to change kind of how we build apps like uber and Tinder",
    "start": "2184180",
    "end": "2190900"
  },
  {
    "text": "um I actually happen to know and I was I was like watching a video on like from a",
    "start": "2190900",
    "end": "2196480"
  },
  {
    "text": "Kafka conference where Tinder was presenting and they actually talked through in fact if you Google it if you",
    "start": "2196480",
    "end": "2203260"
  },
  {
    "text": "just Google like Kafka and Tinder it probably will might not be the first result uh but hopefully it will be safe",
    "start": "2203260",
    "end": "2209380"
  },
  {
    "text": "for work whatever you find um but if you Google it and uh there's a",
    "start": "2209380",
    "end": "2214420"
  },
  {
    "text": "really great video by one of the engineers at Tinder talking about how they had to re-implement their entire",
    "start": "2214420",
    "end": "2220900"
  },
  {
    "text": "Kafka flow because they didn't have ordering like strict ordering turned on",
    "start": "2220900",
    "end": "2227079"
  },
  {
    "text": "initially and what was happening is people would get dating recommendations out of order for people who travel a lot",
    "start": "2227079",
    "end": "2233260"
  },
  {
    "text": "so it was like people who are going between let's say like South Korea and London for work and they would get",
    "start": "2233260",
    "end": "2239619"
  },
  {
    "text": "recommendations for a date in like the other region where they weren't and so",
    "start": "2239619",
    "end": "2244960"
  },
  {
    "text": "it is something that I think you know as we start to identify these bugs people are going to start you know rethinking",
    "start": "2244960",
    "end": "2251920"
  },
  {
    "text": "kind of these these like persistence by default total ordering you know some of these things are just gonna I think",
    "start": "2251920",
    "end": "2257980"
  },
  {
    "text": "these features are gonna become more commonplace because they support kind of a way better user experience",
    "start": "2257980",
    "end": "2264520"
  },
  {
    "text": "um and it hasn't been a problem until recently because you know stuff was just not fast enough uh for that to ever",
    "start": "2264520",
    "end": "2270339"
  },
  {
    "text": "happen and now you know things are so much faster that we're starting to see a lot of these problems crop up in in",
    "start": "2270339",
    "end": "2276160"
  },
  {
    "text": "usually in user interfaces that's a great question thank you all right I think we are out",
    "start": "2276160",
    "end": "2282640"
  },
  {
    "text": "of time but we will still be here we're not going away while we might have to go like out of the room but come and talk",
    "start": "2282640",
    "end": "2289180"
  },
  {
    "text": "to us thank you so much for coming [Applause]",
    "start": "2289180",
    "end": "2295189"
  }
]