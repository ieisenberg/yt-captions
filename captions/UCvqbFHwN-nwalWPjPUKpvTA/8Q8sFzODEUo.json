[
  {
    "text": "afternoon everyone and uh welcome along to this afternoon's tutorial uh very",
    "start": "0",
    "end": "6319"
  },
  {
    "text": "glad to see you all decided to come to the tutorial and not go outside in the sun and get an ice cream and a cold",
    "start": "6319",
    "end": "11800"
  },
  {
    "text": "drink um what we want to do this afternoon is we want to teach a bit",
    "start": "11800",
    "end": "17600"
  },
  {
    "text": "about Kubernetes security through a hacking scenario my goal for the",
    "start": "17600",
    "end": "23279"
  },
  {
    "text": "tutorial today is I hope that everyone in the room leaves with at least one new",
    "start": "23279",
    "end": "29439"
  },
  {
    "text": "thing they didn't know about Kubernetes security that's my personal goal so if we can get to that point it will have",
    "start": "29439",
    "end": "34800"
  },
  {
    "text": "been a success for me anyway um about us you might have noticed on",
    "start": "34800",
    "end": "40160"
  },
  {
    "text": "the schedule there were three of us unfortunately life sometimes happens and not everyone can make it uh so I am Rory",
    "start": "40160",
    "end": "47120"
  },
  {
    "text": "uh and I will be running the tutorial today uh I've been doing container security now for around uh nine years uh",
    "start": "47120",
    "end": "53680"
  },
  {
    "text": "and I do a number of things like help out with Kubernetes SIG security and also help maintain the CIS benchmarks",
    "start": "53680",
    "end": "59280"
  },
  {
    "text": "for Docker and Kubernetes so if you've ever had a bad CI CIS compliance finding",
    "start": "59280",
    "end": "64400"
  },
  {
    "text": "and you're wondering who to blame I'm the guy um also uh if you're this",
    "start": "64400",
    "end": "70720"
  },
  {
    "text": "tutorial sparks an interest in Kubernetes security in you then SIG security is a great place to learn more",
    "start": "70720",
    "end": "76560"
  },
  {
    "text": "we have meetings every other week uh I think the booth will probably be shutting fairly soon but we are around",
    "start": "76560",
    "end": "82400"
  },
  {
    "text": "on Slack as well uh and my partners in crime who unfortunately can't make it are Ian and Marian",
    "start": "82400",
    "end": "89400"
  },
  {
    "text": "so let's start what are we going to do we are going to follow an attack path in",
    "start": "89400",
    "end": "96000"
  },
  {
    "text": "Kubernetes so we're going to take one attack and we're going to walk through several steps of bypassing and avoiding",
    "start": "96000",
    "end": "103439"
  },
  {
    "text": "Kubernetes security controls to show us how someone might be able to escalate their privileges in a way that perhaps",
    "start": "103439",
    "end": "109680"
  },
  {
    "text": "we didn't expect they would be able to do um and we're going to explain the concepts at each step so we want to walk",
    "start": "109680",
    "end": "115680"
  },
  {
    "text": "through and actually explain what we're doing and why this works and also to an extent why it might be surprising to",
    "start": "115680",
    "end": "120960"
  },
  {
    "text": "people that this is how it all works and hangs together logistics um phones on silent if anyone",
    "start": "120960",
    "end": "128080"
  },
  {
    "text": "has phone ringers on these days i don't know if you do but best not to uh you can work in practice so we're definitely",
    "start": "128080",
    "end": "135120"
  },
  {
    "text": "going to have the idea is everyone who wants to can follow along on local machines if you don't want to do that or",
    "start": "135120",
    "end": "141440"
  },
  {
    "text": "you at any point kind of get lost with it do not worry we will be going through every single step up on screen so you'll",
    "start": "141440",
    "end": "147680"
  },
  {
    "text": "be able to get everything of what's going on just by following along if you're not feeling like hands- on keyboard this afternoon we probably",
    "start": "147680",
    "end": "153360"
  },
  {
    "text": "don't have a lot of time for questions and also it's kind of tricky uh with a bigger room um but we will have contact",
    "start": "153360",
    "end": "158720"
  },
  {
    "text": "links at the end so if you want to know more there's a question that I didn't get round to feel free to drop me an email or a DM in some social messaging",
    "start": "158720",
    "end": "165840"
  },
  {
    "text": "platform as we go so technical requirements hopefully",
    "start": "165840",
    "end": "172640"
  },
  {
    "text": "if you looked in the schedule you will have noticed that the idea is all you should need for this tutorial to work is",
    "start": "172640",
    "end": "178319"
  },
  {
    "text": "Docker or something else that runs containers and kind so kind being a way of starting Kubernetes clusters uh if",
    "start": "178319",
    "end": "185680"
  },
  {
    "text": "you haven't got Kind already uh it's pretty easy to get just Google Kind Kubernetes and follow their quick start",
    "start": "185680",
    "end": "191680"
  },
  {
    "text": "it's a single binary download so it's not super bad if you haven't come across kind before it's amazingly useful for",
    "start": "191680",
    "end": "197599"
  },
  {
    "text": "spinning up test clusters because it works anywhere that you have Docker installed and you don't need any other prerequisites uh and then the idea is",
    "start": "197599",
    "end": "204319"
  },
  {
    "text": "we're going to clone a workshop repository from GitHub um the QR code which is there on every single slide",
    "start": "204319",
    "end": "211040"
  },
  {
    "text": "will lead you to this repository uh and then this is the repository URL uh and",
    "start": "211040",
    "end": "216480"
  },
  {
    "text": "if you go to that if you run that or click the QR code which will take you to the repository that will get us the code",
    "start": "216480",
    "end": "224159"
  },
  {
    "text": "um now what I can do is we do we go in here when you get",
    "start": "224159",
    "end": "231440"
  },
  {
    "text": "the code down you should see a number of directories the main one here is there's",
    "start": "231440",
    "end": "236640"
  },
  {
    "text": "a directory called commands and a file called tutorial commands and that has every single command we're going to type",
    "start": "236640",
    "end": "243439"
  },
  {
    "text": "so it's well worth having that file open because you can copy paste things out of it i will be copy pasting at various points in this because I'm not going to",
    "start": "243439",
    "end": "249599"
  },
  {
    "text": "try typing all this stuff live because it will go wrong so there's also all of the slides are there as a PDF and all",
    "start": "249599",
    "end": "256479"
  },
  {
    "text": "the other files we're going to use so let me go back to this thing just in case people are typing away uh or if you",
    "start": "256479",
    "end": "262160"
  },
  {
    "text": "want to get get the QR code that's the other way of doing it and that's first step so I'm going to get a couple of seconds on this slide just so people can",
    "start": "262160",
    "end": "268720"
  },
  {
    "text": "get that um and that will have all the files we need and it's going to have all the manifests we're going to run there",
    "start": "268720",
    "end": "274320"
  },
  {
    "text": "are some manifests which we're going to deploy into a kind cluster feel free to look at them i promise there's nothing deliberately malicious in there they are",
    "start": "274320",
    "end": "281280"
  },
  {
    "text": "all just standard manifests there's nothing really clever going on so people go that you can always take",
    "start": "281280",
    "end": "288080"
  },
  {
    "text": "a picture of the of the screen as we keep going on slides know that that's the QR code to where we need to go so",
    "start": "288080",
    "end": "293600"
  },
  {
    "text": "setting the scene what do we want to do today what we're going to do is throughout the tutorial we are going to",
    "start": "293600",
    "end": "299360"
  },
  {
    "text": "play the part of a developer who is writing some software which is going to run in a Kubernetes cluster it's a",
    "start": "299360",
    "end": "305040"
  },
  {
    "text": "Friday afternoon and they want to get this working this feature working for this sprint by the end of the afternoon",
    "start": "305040",
    "end": "311120"
  },
  {
    "text": "because they want to go away for the weekend mark that as done and get out of the way and unfortunately they're going",
    "start": "311120",
    "end": "316639"
  },
  {
    "text": "to encounter some problems and we'll need to get creative and it's that act of getting creative in which we're going to find some hopefully interesting",
    "start": "316639",
    "end": "322560"
  },
  {
    "text": "Kubernetes security facts that we're going to work around so set up a kind cluster setting",
    "start": "322560",
    "end": "329919"
  },
  {
    "text": "up kind clusters is super simple all you need to do is first go into the directory that we from the that's just",
    "start": "329919",
    "end": "336720"
  },
  {
    "text": "the GitHub co the repository that we cloned just go in that directory there",
    "start": "336720",
    "end": "342000"
  },
  {
    "text": "and then we run this command here which just starts a kind cluster so I'm going to do that",
    "start": "342000",
    "end": "348080"
  },
  {
    "text": "where is my so you should be able to paste that in as long as you're in the directory from the repository it will",
    "start": "348080",
    "end": "354800"
  },
  {
    "text": "happily create a kind cluster i'm going to go a little bit slow at this one because I'm conscious i think the",
    "start": "354800",
    "end": "361600"
  },
  {
    "text": "conference Wi-Fi can handle this i was in another tutorial earlier on this week and the conference Wi-Fi seemed to be able to handle kind cluster creation",
    "start": "361600",
    "end": "367840"
  },
  {
    "text": "i've already got the node image down so it was pretty fast for me but it should look a bit like that so we're just",
    "start": "367840",
    "end": "373680"
  },
  {
    "text": "running the command to create a client cluster and we're giving a passing out a custom config there's nothing super",
    "start": "373680",
    "end": "378720"
  },
  {
    "text": "major in the in the custom config but it'll give us some stuff to go with",
    "start": "378720",
    "end": "384919"
  },
  {
    "text": "okay has anyone got the kind cluster working or is it heading in the right direction thumbs up yeah we got a couple people working",
    "start": "384919",
    "end": "392199"
  },
  {
    "text": "okay that gives us the environment that we're going to work on and everything we do will be in the",
    "start": "392199",
    "end": "398080"
  },
  {
    "text": "kind cluster so we shouldn't be going anywhere else on your machines other than the kind cluster",
    "start": "398080",
    "end": "404000"
  },
  {
    "text": "so with that done we can just check to make sure it's working because as anyone knows who does a lot of Kubernetes stuff",
    "start": "404000",
    "end": "411199"
  },
  {
    "text": "uh it's pretty easy to end up pointing at the wrong cluster so I'll just check and yeah I'm",
    "start": "411199",
    "end": "417039"
  },
  {
    "text": "I'm running against the local cluster because we can see our nice 1277 127001 address so I'm definitely hitting a nice",
    "start": "417039",
    "end": "422720"
  },
  {
    "text": "local kind cluster so if you've run up the K cluster and",
    "start": "422720",
    "end": "428000"
  },
  {
    "text": "also if you're running something like Starship you'll see that we've got it in our prompt as",
    "start": "428000",
    "end": "434080"
  },
  {
    "text": "well and then what we're going to do is we're going to apply any everything in the manifest directory so this is just",
    "start": "434280",
    "end": "440080"
  },
  {
    "text": "all the manifest we're going to need for the tutorial all of the different pods and namespaces and things like that so",
    "start": "440080",
    "end": "445520"
  },
  {
    "text": "we're just going to copy paste that and then just put that in so let's",
    "start": "445520",
    "end": "450800"
  },
  {
    "text": "just apply all the manifests in the directory called manifests uh and you should see something like",
    "start": "450800",
    "end": "456400"
  },
  {
    "text": "that when you run it uh you will get a warning which might be familiar to some",
    "start": "456400",
    "end": "461919"
  },
  {
    "text": "people uh don't worry we will talk about that warning later on but that is part of the scenario that's intended don't",
    "start": "461919",
    "end": "467360"
  },
  {
    "text": "worry that's not broken nothing's not gone horribly wrong it is actually what we wanted to do",
    "start": "467360",
    "end": "472919"
  },
  {
    "text": "so uh if I do this",
    "start": "472919",
    "end": "477599"
  },
  {
    "text": "get things should hopefully be thinking about",
    "start": "480680",
    "end": "485199"
  },
  {
    "text": "it how is it running okay things are starting to image",
    "start": "493960",
    "end": "501720"
  },
  {
    "text": "i've got one on image book back off hopefully that's going to fix",
    "start": "504560",
    "end": "509360"
  },
  {
    "text": "itself and the if the update log one isn't working don't worry we're going to get to that one and why it's not",
    "start": "509960",
    "end": "516120"
  },
  {
    "text": "working okay so what I'm going to do is before I do that slide I'm going to talk a little",
    "start": "516120",
    "end": "521680"
  },
  {
    "text": "bit about what we did there and some of the things we actually did behind the scenes and then we'll come back and we'll make sure people's clusters are",
    "start": "521680",
    "end": "527200"
  },
  {
    "text": "working because if they're going funny we want to give a little bit of time because I think it might be a fun on the conference Wi-Fi so how did that work we",
    "start": "527200",
    "end": "533279"
  },
  {
    "text": "have just spun up a cluster and we've applied manifests from security standpoint what did we do well we went",
    "start": "533279",
    "end": "539200"
  },
  {
    "text": "through three gates with every manifest we created there first we had to authenticate the cluster so we had to",
    "start": "539200",
    "end": "545440"
  },
  {
    "text": "actually make sure that we had valid credentials we then had to go through authorization are we allowed to do the",
    "start": "545440",
    "end": "551200"
  },
  {
    "text": "thing we're trying to do so create things update manifests create namespaces and then we also had to pass",
    "start": "551200",
    "end": "557760"
  },
  {
    "text": "admission control and admission control is a very important step because it handles additional policy requirements",
    "start": "557760",
    "end": "564080"
  },
  {
    "text": "so even if you've got authorization we can have admission control in place to say actually can this person do this",
    "start": "564080",
    "end": "569920"
  },
  {
    "text": "specific operation is this manifest valid is it badly formed does it have all the things it needs to have and is",
    "start": "569920",
    "end": "575760"
  },
  {
    "text": "it trying to do something it shouldn't so admission control is a third very important security gate authentication",
    "start": "575760",
    "end": "582720"
  },
  {
    "text": "usually if you're working on production clusters I would expect that you are using OIDC so you're using your cloud",
    "start": "582720",
    "end": "589200"
  },
  {
    "text": "providers authentication service and you're authenticating to a cluster however in Kubernetes there are always",
    "start": "589200",
    "end": "595279"
  },
  {
    "text": "other ways of authenticating to a cluster not just the OIDC setup service account tokens are used by workloads to",
    "start": "595279",
    "end": "602480"
  },
  {
    "text": "authenticate to the API server but developers can also use them and I've seen clusters quite a few times where actually they're used for human users as",
    "start": "602480",
    "end": "608959"
  },
  {
    "text": "well that has got some drawbacks uh and also some system components use client certificates for authentication uh users",
    "start": "608959",
    "end": "616800"
  },
  {
    "text": "can also use client certificates but I I didn't actually write this slide but I was meant to talk to it it comes with",
    "start": "616800",
    "end": "622320"
  },
  {
    "text": "problems hopefully no one is using client certificates for user authentication in their clusters because",
    "start": "622320",
    "end": "627680"
  },
  {
    "text": "it's not really a very good idea for production mainly because you can't revoke user credentials that are issued",
    "start": "627680",
    "end": "633440"
  },
  {
    "text": "that way there is no certificate revocation in Kubernetes and if you ever use client certificates you find you",
    "start": "633440",
    "end": "638640"
  },
  {
    "text": "can't actually get rid of the access you've given people if that person moves team or leaves the organization or the certificate file gets stolen so",
    "start": "638640",
    "end": "644720"
  },
  {
    "text": "typically it should be OIDC but there are other options available authorization Kubernetes",
    "start": "644720",
    "end": "651920"
  },
  {
    "text": "typically you might not think a lot about authorization and how it works but Kubernetes actually has a flexible authorization model with lots of",
    "start": "651920",
    "end": "658000"
  },
  {
    "text": "different models sort of different ways of doing it possible this is a standard um API I server flag from a Kubernetes",
    "start": "658000",
    "end": "665120"
  },
  {
    "text": "API server in Cubadm and there's two modes defined node is a specialist or authorization model which is only",
    "start": "665120",
    "end": "671920"
  },
  {
    "text": "applicable to nodes so when the node itself authorizes itself to the API server it uses that plugin and arbback",
    "start": "671920",
    "end": "679360"
  },
  {
    "text": "if you're using cloud Kubernetes you're probably going to have a third one in there not that you can look at it because you can't look at the API server flags but the cloud providers typically",
    "start": "679360",
    "end": "686320"
  },
  {
    "text": "have their own authorization model there as well um you can always look at what rights",
    "start": "686320",
    "end": "691920"
  },
  {
    "text": "you have from an arbback perspective these are very very useful commands we'll be using these later on cube",
    "start": "691920",
    "end": "697200"
  },
  {
    "text": "cuttle off can I list gives you a list of all the permissions you have in a cluster as far as arbback knows about",
    "start": "697200",
    "end": "702399"
  },
  {
    "text": "them uh and if you ever want to know exactly what's going on you can always do minus v9 and that will tell you",
    "start": "702399",
    "end": "707839"
  },
  {
    "text": "everything about all the different areas of permissions that you have got and we'll be running some of those commands later",
    "start": "707839",
    "end": "713720"
  },
  {
    "text": "on um right so let's go back and let's have a quick look and",
    "start": "713720",
    "end": "719880"
  },
  {
    "text": "see what's happening so if I just",
    "start": "719880",
    "end": "726640"
  },
  {
    "text": "do Oh my workstation pod is not having a good day is anyone's workstation pod",
    "start": "728839",
    "end": "734160"
  },
  {
    "text": "also facing that or is it just me yeah image pull back off that is that's",
    "start": "734160",
    "end": "740440"
  },
  {
    "text": "unfortunate cuz we need that one one of them were meant to be seeing the update log file [Music]",
    "start": "740440",
    "end": "749649"
  },
  {
    "text": "uh yeah I I'm I'm logged into Docker i was hoping it wasn't going to do that to me cuz logged in shouldn't complain",
    "start": "750760",
    "end": "759000"
  },
  {
    "text": "okay always going to be fun so because I'm a little bit",
    "start": "759000",
    "end": "764279"
  },
  {
    "text": "paranoid I and I was worried about the fact that it might decide to be",
    "start": "764279",
    "end": "770200"
  },
  {
    "text": "annoying i have a backup plan",
    "start": "770200",
    "end": "775160"
  },
  {
    "text": "so it's always wise to have a backup plan for live demos especially tutorials um I kind of surprised DockerHub's",
    "start": "778240",
    "end": "784480"
  },
  {
    "text": "complaining about that because I did actually ask them about rate limits this week and they said we're not putting the new rate limits in place this week and",
    "start": "784480",
    "end": "790240"
  },
  {
    "text": "therefore it shouldn't be a problem uh but maybe they have to change their mind and put in rate",
    "start": "790240",
    "end": "796800"
  },
  {
    "text": "limits i also haven't pulled that image very much this week",
    "start": "800040",
    "end": "805120"
  },
  {
    "text": "so",
    "start": "805720",
    "end": "808720"
  },
  {
    "text": "okay okay did it work for anybody or did",
    "start": "811720",
    "end": "818240"
  },
  {
    "text": "everyone it couldn't shouldn't have blocked work for some people okay so we obviously hit some kind of fun rate limit",
    "start": "818240",
    "end": "824959"
  },
  {
    "text": "i may just not have been fast enough which is surprising as I was doing the",
    "start": "824959",
    "end": "830320"
  },
  {
    "text": "uh but let's just what I'm doing here actually just to explain what I'm doing uh I promise this is not a paid advert",
    "start": "830320",
    "end": "836079"
  },
  {
    "text": "in any way shape or form this is just a service I use which I happen to like i'm currently running in a ephemeral",
    "start": "836079",
    "end": "842399"
  },
  {
    "text": "environment that I spun up in a place called Ixie Muis Labs uh it's really really really fun because they've got a",
    "start": "842399",
    "end": "847600"
  },
  {
    "text": "nice CLI and you can just run up ephemeral labs anytime you want with any kind of configuration so this is just a",
    "start": "847600",
    "end": "853040"
  },
  {
    "text": "lab I've got with all of my container tools set up ready to go and I thought just on the off chance something goes",
    "start": "853040",
    "end": "858079"
  },
  {
    "text": "wrong with the conference Wi-Fi let's have this available and as you can see it looks exactly the same as if you were running yeah and this should be coming",
    "start": "858079",
    "end": "864880"
  },
  {
    "text": "from a separate environment so I shouldn't have any problems so let's check and see if this",
    "start": "864880",
    "end": "874000"
  },
  {
    "text": "one goes better than the other one did i grading",
    "start": "874000",
    "end": "882040"
  },
  {
    "text": "what you should see if it's working is you should see all the other ones working apart from the update log",
    "start": "882800",
    "end": "890240"
  },
  {
    "text": "file okay is going to complain oh not update",
    "start": "890760",
    "end": "897600"
  },
  {
    "text": "log file sorry the other one where is it oh it won't be",
    "start": "897600",
    "end": "903000"
  },
  {
    "text": "there okay we've got fun with things deciding to be that's fine",
    "start": "903000",
    "end": "909360"
  },
  {
    "text": "so what we're going to do once you've got it up and running is we're going to run this command here and this is going into our If anyone's got problems think",
    "start": "909360",
    "end": "916240"
  },
  {
    "text": "about it the other thing you do is tether to your phone and that should get around Docker Hub being",
    "start": "916240",
    "end": "921360"
  },
  {
    "text": "annoying",
    "start": "922920",
    "end": "925920"
  },
  {
    "text": "oops we're going to exec into our workstations here we're going to become the developer",
    "start": "931959",
    "end": "937519"
  },
  {
    "text": "uh when it's decided that it working yeah it's happy okay so what you were going to do here is we're execing into",
    "start": "937519",
    "end": "943519"
  },
  {
    "text": "one of the workloads in the cluster right so we're saying cattle exec minus dndev which is our developer workspace",
    "start": "943519",
    "end": "949680"
  },
  {
    "text": "and we're going to go into our workstation and just have a shell so now we are the developer now we've got the rights that our developers got and",
    "start": "949680",
    "end": "955279"
  },
  {
    "text": "that's the start of the setup hopefully that is now working for at least some people and I I'll show up here anyway",
    "start": "955279",
    "end": "962440"
  },
  {
    "text": "so what are we trying to do what's the actual goal of our developer right we now become our developer we've set up",
    "start": "962440",
    "end": "967839"
  },
  {
    "text": "our test environment we set up our cluster our developer is just trying to deploy a log reader application so a",
    "start": "967839",
    "end": "974480"
  },
  {
    "text": "fairly simple application it's designed for the critical task of reading logs from a s from a pod in the cube system",
    "start": "974480",
    "end": "980800"
  },
  {
    "text": "name space so it's a very simple thing it's trying to do and it's using a host path volume so host path volume is just",
    "start": "980800",
    "end": "987600"
  },
  {
    "text": "mounting a volume from the underlying node and then reading files off it this is a fairly simple task it looks a bit",
    "start": "987600",
    "end": "993759"
  },
  {
    "text": "like this we have got our pod inside cube system which is updating a log file",
    "start": "993759",
    "end": "999440"
  },
  {
    "text": "we then want to read the log file in our dev name space right and that's our task if we",
    "start": "999440",
    "end": "1006000"
  },
  {
    "text": "can get that done by the end of Friday we get to go and have drinks in the bar so let's see what's",
    "start": "1006000",
    "end": "1013519"
  },
  {
    "text": "running in our dev so this is make sure you're inside the the workstation pod",
    "start": "1015000",
    "end": "1020480"
  },
  {
    "text": "when you're doing this we have got one pod running we don't have our log file reader though it's not",
    "start": "1020480",
    "end": "1027199"
  },
  {
    "text": "there that's a problem this one however is expected this isn't Docker i'm being annoying so let's look at",
    "start": "1027199",
    "end": "1035600"
  },
  {
    "text": "deployments okay we have got a read log file deployment but it has zero of one",
    "start": "1035959",
    "end": "1041678"
  },
  {
    "text": "ready something has gone wrong it's not working and we can look at our replica",
    "start": "1041679",
    "end": "1048558"
  },
  {
    "text": "sets as well and yep we've got one desired zero",
    "start": "1048559",
    "end": "1054559"
  },
  {
    "text": "currently ready okay something has gone wrong our deployment which is our thing we",
    "start": "1054559",
    "end": "1059760"
  },
  {
    "text": "have to get done today is not working let's see why so there's our problem",
    "start": "1059760",
    "end": "1066120"
  },
  {
    "text": "that can't get created something is going wrong it can't read the logs let's",
    "start": "1066120",
    "end": "1071280"
  },
  {
    "text": "find out what's gone wrong why is this broken well we have a feeling it's going",
    "start": "1071280",
    "end": "1076559"
  },
  {
    "text": "to be admission control admission control is getting in our way it's because it's trying to use host",
    "start": "1076559",
    "end": "1082520"
  },
  {
    "text": "resources and our cluster administrator like hopefully every production cluster administrator out there doesn't want",
    "start": "1082520",
    "end": "1089200"
  },
  {
    "text": "just anyone creating pods that can access node resources because that's dangerous from a security standpoint it",
    "start": "1089200",
    "end": "1095679"
  },
  {
    "text": "can lead to cluster compromise um in modern clusters there's lots of different options you've got for blocking this kind of thing you could",
    "start": "1095679",
    "end": "1102320"
  },
  {
    "text": "use pod security admission which is what we're going to look at today you could use external admission controllers so",
    "start": "1102320",
    "end": "1108160"
  },
  {
    "text": "projects like Kyiverno and OPA and Cube Warden who have all you've probably seen if you've been around the booths earlier",
    "start": "1108160",
    "end": "1113679"
  },
  {
    "text": "on at the conference or you can use validating admission policy that's a relatively new feature if you're on",
    "start": "1113679",
    "end": "1118720"
  },
  {
    "text": "Kubernetes 1.30 or higher that's G now so you can have that as an option internally there's lots of ways to stop",
    "start": "1118720",
    "end": "1124720"
  },
  {
    "text": "this but the general idea is there are dangerous things you can do with containers and we don't want everyone doing them and obviously our cluster",
    "start": "1124720",
    "end": "1131120"
  },
  {
    "text": "administrator here has said hey we don't want anyone deploying stuff that can do these things let's actually confirm",
    "start": "1131120",
    "end": "1136559"
  },
  {
    "text": "that's what the problem is though because we're just thinking that's the problem right now let's run a command to actually check it so we're going to",
    "start": "1136559",
    "end": "1145200"
  },
  {
    "text": "run Yeah that's the problem i will say the mesh at least is nice and easy to understand it's not like super bad",
    "start": "1147880",
    "end": "1154559"
  },
  {
    "text": "basically what it's saying is hey you're trying to create something which violates the baseline pod security",
    "start": "1154559",
    "end": "1159840"
  },
  {
    "text": "standard we're not going to let you do that so the baseline pod security standard is the basic policy you can put",
    "start": "1159840",
    "end": "1165760"
  },
  {
    "text": "in place with pod security admission it blocks all the really obvious privilege escalation attacks so the idea when we",
    "start": "1165760",
    "end": "1171600"
  },
  {
    "text": "designed PSS was we said we want to not let people do things that would instantly lead to privilege escalation",
    "start": "1171600",
    "end": "1176960"
  },
  {
    "text": "so we blocked them so it's not going to do it okay that's not great for our",
    "start": "1176960",
    "end": "1183440"
  },
  {
    "text": "ability to get out and have a drink so how do we going to fix this",
    "start": "1183440",
    "end": "1189200"
  },
  {
    "text": "well we could work in a different namespace right that's one option we know that this is blocking our dev name",
    "start": "1189200",
    "end": "1194880"
  },
  {
    "text": "space so if we had permissions maybe we can deploy somewhere else and that'll fix the problem we could ask for the",
    "start": "1194880",
    "end": "1200000"
  },
  {
    "text": "restrictions on the dev name space to be lifted unfortunately we have got a bureaucratic",
    "start": "1200000",
    "end": "1205840"
  },
  {
    "text": "process in place as it turns out that's going to take weeks to actually get that change made so we can't do that or we",
    "start": "1205840",
    "end": "1211679"
  },
  {
    "text": "could see if we can find a way to make it work maybe there's some way of getting additional access that let us",
    "start": "1211679",
    "end": "1217840"
  },
  {
    "text": "get get this done and get it knocked off the checklist that's what we're going to do let's see if we can do",
    "start": "1217840",
    "end": "1224520"
  },
  {
    "text": "that so before I get into the stuff where we do things that people probably shouldn't inside clusters I am I always",
    "start": "1224520",
    "end": "1230799"
  },
  {
    "text": "do this we always do this when we do these kind of uh tutorials and workshops what we're showing you here is technically possible please don't do",
    "start": "1230799",
    "end": "1237120"
  },
  {
    "text": "anything like this on clusters that you do not have explicit permission to do it on so don't go like go back to your",
    "start": "1237120",
    "end": "1244159"
  },
  {
    "text": "production clusters and think haha I can do the sort of things on a production please don't do that um because it's not a good idea and it can legitimately get",
    "start": "1244159",
    "end": "1250720"
  },
  {
    "text": "you in trouble with either your company's security team or in extreme cases legal law enforcement um so don't",
    "start": "1250720",
    "end": "1256240"
  },
  {
    "text": "do anything illegal no crimes right let's look and see what permissions we've got right what can we",
    "start": "1256240",
    "end": "1262880"
  },
  {
    "text": "do here let's go and see what we can do so this is where we're going to use that command we talked about before o can I list it's a very very useful command",
    "start": "1262880",
    "end": "1270720"
  },
  {
    "text": "so let's quickly look and make that a little bit smaller so hopefully it will stay on the",
    "start": "1270720",
    "end": "1279640"
  },
  {
    "text": "screen there we go we have got some permissions in the developer name space",
    "start": "1279640",
    "end": "1285840"
  },
  {
    "text": "we can do things to pods and we can do things",
    "start": "1285840",
    "end": "1292440"
  },
  {
    "text": "to pod logs we can do things to pods we can do things to name spaces and service",
    "start": "1292440",
    "end": "1297600"
  },
  {
    "text": "accounts and deployments so we've got some rights but these are really only read only rights the only thing we can really do here is we can create pods",
    "start": "1297600",
    "end": "1303600"
  },
  {
    "text": "which is kind of nice",
    "start": "1303600",
    "end": "1310480"
  },
  {
    "text": "so let's also just check because one of the ideas we had right was maybe we can just deploy in a different namespace and",
    "start": "1311080",
    "end": "1316240"
  },
  {
    "text": "that may be one thing you'd think of so the cube system name space is almost never restricted it just doesn't get",
    "start": "1316240",
    "end": "1321600"
  },
  {
    "text": "restricted because the pods in cube system need to be able to do privileged things so let's just check see there see",
    "start": "1321600",
    "end": "1326720"
  },
  {
    "text": "what's going on there",
    "start": "1326720",
    "end": "1329919"
  },
  {
    "text": "here unfortunately it's sad face time we have very little permissions those if",
    "start": "1332960",
    "end": "1338159"
  },
  {
    "text": "you don't recognize them are the bog standard permissions that you get through system authenticated so every authenticated user in the cluster has",
    "start": "1338159",
    "end": "1344559"
  },
  {
    "text": "those rights but those are absolutely nothing useful all that basically says is I can check my own permissions and I",
    "start": "1344559",
    "end": "1350400"
  },
  {
    "text": "can get certain um nonresource-based paths so things like I can tell what version the cluster software is running",
    "start": "1350400",
    "end": "1356320"
  },
  {
    "text": "and I can check that things are healthy none of this is very useful to us as attackers or as people who want to get",
    "start": "1356320",
    "end": "1361600"
  },
  {
    "text": "something done that they maybe shouldn't be able to okay",
    "start": "1361600",
    "end": "1366840"
  },
  {
    "text": "so we can't get any good rights this isn't going very well for",
    "start": "1366840",
    "end": "1371880"
  },
  {
    "text": "us but there was something we did we were able to get",
    "start": "1371880",
    "end": "1377280"
  },
  {
    "text": "service accounts that was an option we had let's have a quick look and see what service accounts we got",
    "start": "1377280",
    "end": "1384720"
  },
  {
    "text": "so service accounts are used to give permissions to workloads and we've got a",
    "start": "1385320",
    "end": "1391440"
  },
  {
    "text": "couple ones there we have got our developer service account that's the one we're currently using and then we've got",
    "start": "1391440",
    "end": "1397360"
  },
  {
    "text": "one called arbback manager well that looks interesting arback manager sounds like the kind of thing that might be",
    "start": "1397360",
    "end": "1402880"
  },
  {
    "text": "useful to us because it sounds like it's something that might have permissions so maybe we could use that somehow",
    "start": "1402880",
    "end": "1411320"
  },
  {
    "text": "it might have rights to service account tokens with those rights let's see what we can do so service account tokens are kind of",
    "start": "1411440",
    "end": "1417840"
  },
  {
    "text": "interesting there's three main ways to get one you can either run the command cube cuttle create token which will let",
    "start": "1417840",
    "end": "1423200"
  },
  {
    "text": "you create service account tokens we don't have the rights for that one you can create a secret with the right kind",
    "start": "1423200",
    "end": "1429280"
  },
  {
    "text": "of type and it will create a service account token but you'll notice we didn't have create secret so that's no use to us either the third one which is",
    "start": "1429280",
    "end": "1436240"
  },
  {
    "text": "very useful to know because it's the sort of thing that you will almost always have is we can create pods right",
    "start": "1436240",
    "end": "1442000"
  },
  {
    "text": "because obviously we can create workloads in the in this name space we can create pods um we only have",
    "start": "1442000",
    "end": "1447360"
  },
  {
    "text": "permissions for that one of those three any pod in a namespace can use any",
    "start": "1447360",
    "end": "1453120"
  },
  {
    "text": "service account in the same namespace so anytime you're creating a pod you can say what service account you want to use",
    "start": "1453120",
    "end": "1458559"
  },
  {
    "text": "and because that service account is in this namespace you can use that service account okay that sounds useful we have a route",
    "start": "1458559",
    "end": "1465600"
  },
  {
    "text": "to get the permissions of arbback manager which sounds like it's at least worth exploring it might be useful so",
    "start": "1465600",
    "end": "1471440"
  },
  {
    "text": "well let's create a pod now here is one of those places where if you're doing if you have are following along and you're",
    "start": "1471440",
    "end": "1478080"
  },
  {
    "text": "doing the commands in the command file I thoroughly recommend copy pasting don't try and write this yourself i'm not",
    "start": "1478080",
    "end": "1483679"
  },
  {
    "text": "going to try and write this myself writing YAML on a Friday afternoon and get the indentation right does not sound",
    "start": "1483679",
    "end": "1489600"
  },
  {
    "text": "like a good day so let's do that and it",
    "start": "1489600",
    "end": "1494720"
  },
  {
    "text": "will create a new pod so all we've done there fairly simple pod manifest we basically just said hey create as a new",
    "start": "1494720",
    "end": "1500720"
  },
  {
    "text": "pod and mount in the arbback manager service account token so that then gives us a new pod running and one of the",
    "start": "1500720",
    "end": "1506720"
  },
  {
    "text": "other rights we had was we had pod exec so I can execute commands inside that",
    "start": "1506720",
    "end": "1512640"
  },
  {
    "text": "pod right so we now have a new pod it has the token we can get access to the token hopefully",
    "start": "1512640",
    "end": "1520600"
  },
  {
    "text": "okay cool so that tells that we're making progress let's just check and",
    "start": "1523720",
    "end": "1528799"
  },
  {
    "text": "make sure that pod came up it should have done if you manage to get the first one working that one should work as well",
    "start": "1528799",
    "end": "1534640"
  },
  {
    "text": "because it's the same image so what we can do here we can do",
    "start": "1534640",
    "end": "1540559"
  },
  {
    "text": "something like this cube cuddle exec token read which is the name of our pod and we're going to exec the file cat",
    "start": "1540559",
    "end": "1547520"
  },
  {
    "text": "that long string that is the location of the service account token in a pod it's almost always in the same location i",
    "start": "1547520",
    "end": "1552960"
  },
  {
    "text": "think you theoretically can change it but it's almost always there and we're going to pipe it to a JWT code just to",
    "start": "1552960",
    "end": "1558880"
  },
  {
    "text": "see what it looks",
    "start": "1558880",
    "end": "1561440"
  },
  {
    "text": "like so let's do that and what you get back is some nice",
    "start": "1565960",
    "end": "1573600"
  },
  {
    "text": "JWT decoded service account token that tells",
    "start": "1573600",
    "end": "1579120"
  },
  {
    "text": "us we have a token for arbback manager great that's a valid credential for the arbback manager service account it can",
    "start": "1579120",
    "end": "1585279"
  },
  {
    "text": "do anything the arbback manager service account can do that sounds promising uh one little bit of trivia that you may or",
    "start": "1585279",
    "end": "1591440"
  },
  {
    "text": "may not know if you've ever looked at a JT token and it looks like it's B 64 and then you try and decode it with a B 64",
    "start": "1591440",
    "end": "1597200"
  },
  {
    "text": "decoder and it doesn't work properly the reason is it's not it's URL safe B 64 which doesn't decode with a B 64 decoder",
    "start": "1597200",
    "end": "1604159"
  },
  {
    "text": "you have to use a JWT decoder found that out the hard way after many times getting it wrong so",
    "start": "1604159",
    "end": "1609600"
  },
  {
    "text": "what we're going to do now is we're going to export and create a new environment variable which just has that",
    "start": "1609600",
    "end": "1615120"
  },
  {
    "text": "token in it right so we're just giving it's just going to be easier than copy pasting a token into our shell every",
    "start": "1615120",
    "end": "1620240"
  },
  {
    "text": "single time when we do the next couple of",
    "start": "1620240",
    "end": "1623360"
  },
  {
    "text": "commands oh cool minus I on the basics of",
    "start": "1625320",
    "end": "1631039"
  },
  {
    "text": "decoder uh okay minus I will basically word it as well that's useful to",
    "start": "1632120",
    "end": "1637640"
  },
  {
    "text": "know so we're just going to do this we're going to export a token let's just set an environment variable because we want to use that token in various other",
    "start": "1637640",
    "end": "1643760"
  },
  {
    "text": "commands so we just have to set that and that just gives us that environment variable set up so now we can see what",
    "start": "1643760",
    "end": "1649840"
  },
  {
    "text": "we've got right we've got Roback Manager but what what can they do is this going to solve our problem is it going to get",
    "start": "1649840",
    "end": "1655279"
  },
  {
    "text": "us finished on time let's find out what we can do so we do",
    "start": "1655279",
    "end": "1661080"
  },
  {
    "text": "this and that so we have got a lot of these are",
    "start": "1661080",
    "end": "1667600"
  },
  {
    "text": "all the boring rights but there is one interesting line right at the top",
    "start": "1667600",
    "end": "1672640"
  },
  {
    "text": "arbback manager kind of unsurprisingly based on the name has got rights to",
    "start": "1672640",
    "end": "1677840"
  },
  {
    "text": "everything in the arbback area of Kubernetes API and it has got star which",
    "start": "1677840",
    "end": "1683919"
  },
  {
    "text": "is great because it means any object inside the arbback schema we have got rights to and we've got rights to do all",
    "start": "1683919",
    "end": "1690240"
  },
  {
    "text": "verbs so this schema controls anything things",
    "start": "1690240",
    "end": "1697279"
  },
  {
    "text": "like cluster role bindings ro bindings uh and at this time we've only actually got it in one name space but it lets so",
    "start": "1697279",
    "end": "1703679"
  },
  {
    "text": "it lets us do ro bindings and roles but not cluster role bindings and cluster roles it includes the usual CRUD verbs",
    "start": "1703679",
    "end": "1710159"
  },
  {
    "text": "so when we say star that means any verb and one of the things that you may not know this may be the first time people",
    "start": "1710159",
    "end": "1716240"
  },
  {
    "text": "find something they didn't know about Kubernetes security is there are other verbs in Kubernetes not just create read",
    "start": "1716240",
    "end": "1721520"
  },
  {
    "text": "update delete there are other ones specifically there is an arbback verb called escalate escalate only applies on",
    "start": "1721520",
    "end": "1729039"
  },
  {
    "text": "certain objects in Kubernetes um but it is a verb that is valid and you can specify it if someone gets star rights",
    "start": "1729039",
    "end": "1735919"
  },
  {
    "text": "to arbback it includes the escalate verb the escalate verbs amazingly useful because usually if I try to escalate my",
    "start": "1735919",
    "end": "1742640"
  },
  {
    "text": "permissions say I've got rights to create roles in a cluster and I try and create a role that has permissions that I don't currently have Kubernetes says",
    "start": "1742640",
    "end": "1749440"
  },
  {
    "text": "\"No go away you're not allowed to do that you're attempting privilege escalation i'm not going to let you do it unless you have the escalate verb if",
    "start": "1749440",
    "end": "1757039"
  },
  {
    "text": "you have the escalate verb it says \"Of course you have the escalate verb you're allowed to privilege escalate that's what this verb is meant for.\" So this is",
    "start": "1757039",
    "end": "1762640"
  },
  {
    "text": "basically the privilege escalation verb and because we were granted star so whoever created the rback manager maybe",
    "start": "1762640",
    "end": "1768159"
  },
  {
    "text": "they just meant you to be able to create roles and role bindings but they didn't know the fact that star includes escalate so we can escalate our",
    "start": "1768159",
    "end": "1773679"
  },
  {
    "text": "privileges that sounds like fun because that's what we're trying to do today get more",
    "start": "1773679",
    "end": "1778840"
  },
  {
    "text": "rights so because we've got escalate we can basically run a command like this",
    "start": "1778840",
    "end": "1784960"
  },
  {
    "text": "and what we're doing here is we're just using cube cuttle and we are saying okay we're going to use our rbback manager",
    "start": "1784960",
    "end": "1790399"
  },
  {
    "text": "token which we set as an environment variable create us a new role which has got star rights on the resource star.st",
    "start": "1790399",
    "end": "1796399"
  },
  {
    "text": "star and we'll call it ns admin so this is a role remember only writes in one namespace not a cluster role which we",
    "start": "1796399",
    "end": "1802640"
  },
  {
    "text": "write in all namespaces so we'll create that",
    "start": "1802640",
    "end": "1810840"
  },
  {
    "text": "role and then we will give a role binding and we'll bind it to our",
    "start": "1810840",
    "end": "1816640"
  },
  {
    "text": "developer user right because we bind it to our developer user that's just going to make it easier for us because then we got the permissions so all we're doing",
    "start": "1816640",
    "end": "1822960"
  },
  {
    "text": "here is we're saying create a new role binding of role of NS admin and the service account we're binding to is our",
    "start": "1822960",
    "end": "1828960"
  },
  {
    "text": "developer service account so that's going to give NS admin rights to our",
    "start": "1828960",
    "end": "1834840"
  },
  {
    "text": "developer and it'll say yes now I said those two commands with the escalate verb if you just had create read update",
    "start": "1834840",
    "end": "1840640"
  },
  {
    "text": "delete that would have failed it would have said nope that's not going to let you do that even though you've got right to create roles you can't create that role because it has more permissions",
    "start": "1840640",
    "end": "1846240"
  },
  {
    "text": "than the arbback manager account does but because we have escalate it said of course you can do",
    "start": "1846240",
    "end": "1851480"
  },
  {
    "text": "that and then we can check our permissions again",
    "start": "1851480",
    "end": "1857880"
  },
  {
    "text": "and it looks the same apart from what you always like to see when you're trying to escalate your rights lots of",
    "start": "1857880",
    "end": "1863960"
  },
  {
    "text": "stars so we've got stars across the board now inside our namespace this means that we've got all the rights to",
    "start": "1863960",
    "end": "1869039"
  },
  {
    "text": "do anything to any object in this namespace that sounds great that sounds like exactly what we wanted to get the",
    "start": "1869039",
    "end": "1874559"
  },
  {
    "text": "job done because now we have more permissions maybe we can make the annoying warning go",
    "start": "1874559",
    "end": "1880480"
  },
  {
    "text": "away so our next object we've now got namespace admin essentially and this is",
    "start": "1881799",
    "end": "1887679"
  },
  {
    "text": "where you come across another thing which again this might be one of the thing you learn in this tutorial that's",
    "start": "1887679",
    "end": "1893200"
  },
  {
    "text": "new to you um arbback rights objects are either global or they're namespaced",
    "start": "1893200",
    "end": "1899519"
  },
  {
    "text": "right that probably know that part right your object either exists in a namespace or is a global object across the cluster",
    "start": "1899519",
    "end": "1905760"
  },
  {
    "text": "um we are only rights of one namespace uh we can do what we want inside our namespace but we can't do anything",
    "start": "1905760",
    "end": "1911440"
  },
  {
    "text": "globally right if I try and do something to the cube system namespace it'll say nope you don't have any rights in this name space go away namespace objects",
    "start": "1911440",
    "end": "1918080"
  },
  {
    "text": "themselves though this is where it gets a bit funny because I'm going to overuse the word namespaced namespace objects",
    "start": "1918080",
    "end": "1923440"
  },
  {
    "text": "are sometimes global and sometimes namespaced specifically requests in a namespace for",
    "start": "1923440",
    "end": "1930480"
  },
  {
    "text": "that name i didn't write this but requests in a namespace for that same namespace are namespaced and I'll explain what that",
    "start": "1930480",
    "end": "1936799"
  },
  {
    "text": "means in the next slide because that sounds like gibberish one of the things you can do",
    "start": "1936799",
    "end": "1943360"
  },
  {
    "text": "now you have rights inside the one namespace is you can change labels on",
    "start": "1943360",
    "end": "1948640"
  },
  {
    "text": "the namespace because labels are something you can change on a namespace object once you have full rights to it",
    "start": "1948640",
    "end": "1954720"
  },
  {
    "text": "now that's where you get to a fun implementation detail of pod security",
    "start": "1954720",
    "end": "1959760"
  },
  {
    "text": "admission which is that pod security admission is enforced as a label on a namespace so if I can remove the label I",
    "start": "1959760",
    "end": "1967120"
  },
  {
    "text": "can remove pod security admission this is true for any security control that you put in place that has got is done",
    "start": "1967120",
    "end": "1973760"
  },
  {
    "text": "implemented via labels on a namespace if you do that and you then give someone full rights to the namespace they can",
    "start": "1973760",
    "end": "1979279"
  },
  {
    "text": "just turn the label off they can say delete the label and I've got all the permissions now so why don't we do that",
    "start": "1979279",
    "end": "1984399"
  },
  {
    "text": "let's remove that annoying pesky thing by saying no we want this name space to be privileged please Mr cluster",
    "start": "1984399",
    "end": "1991679"
  },
  {
    "text": "Administrator and it says dev namespace labeled awesome that sounds",
    "start": "1992120",
    "end": "1998039"
  },
  {
    "text": "promising so let's just do QC cuttle get pods again and our token reader workspace",
    "start": "1998039",
    "end": "2006159"
  },
  {
    "text": "object is now working look we have got a pod token read and it's ready and it's running so it did what we wanted to and",
    "start": "2006159",
    "end": "2012720"
  },
  {
    "text": "you see it came up and it's now doing its stuff so we now have what we wanted",
    "start": "2012720",
    "end": "2018399"
  },
  {
    "text": "we've achieved our goal yay we can get to the pub um but maybe we're not quite",
    "start": "2018399",
    "end": "2024960"
  },
  {
    "text": "finished yet so let's just recap what we did there when we started this workshop we",
    "start": "2024960",
    "end": "2032559"
  },
  {
    "text": "were developers we had got rights to do the kind of things developers would be able to do but not a lot more and then",
    "start": "2032559",
    "end": "2039360"
  },
  {
    "text": "because of a service account that been left in our namespace we were able to get our permissions a bit higher and",
    "start": "2039360",
    "end": "2045279"
  },
  {
    "text": "then because of maybe a misunderstanding of exactly how arbback works we were able to get even more permissions and",
    "start": "2045279",
    "end": "2050480"
  },
  {
    "text": "actually the point where we own the whole name space and then lastly because of the fact that our security control",
    "start": "2050480",
    "end": "2056000"
  },
  {
    "text": "was a label in a namespace we were able to bypass it these are all relatively plausible mistakes to make these aren't",
    "start": "2056000",
    "end": "2062240"
  },
  {
    "text": "like you know wild you know things they're not all necessarily that well known and now our workload runs but",
    "start": "2062240",
    "end": "2068560"
  },
  {
    "text": "let's we're not quite finished yet what else could we do well one of the big",
    "start": "2068560",
    "end": "2073839"
  },
  {
    "text": "problems about Kubernetes security is the problem that pod security admission and things like we're meant to stop",
    "start": "2073839",
    "end": "2079599"
  },
  {
    "text": "which is if you have unrestricted create pod rights which you have to give to anyone who you want to have workloads",
    "start": "2079599",
    "end": "2085280"
  },
  {
    "text": "running in your cluster if you're going to let them do it directly it means root on the node right because Kubernetes is",
    "start": "2085280",
    "end": "2091440"
  },
  {
    "text": "distributed remote command execution as a service that's what it does for a living uh and if you don't lock people",
    "start": "2091440",
    "end": "2097040"
  },
  {
    "text": "down they can do interesting things and this can lead to privilege escalation now we're thinking it's very useful that",
    "start": "2097040",
    "end": "2104079"
  },
  {
    "text": "we've been able to bypass this control and get you know what we need to get done done before we leave for the day",
    "start": "2104079",
    "end": "2109599"
  },
  {
    "text": "maybe we could do a couple other things to give ourselves some more access in case this problem ever came up again we don't really want to bother the cluster",
    "start": "2109599",
    "end": "2115119"
  },
  {
    "text": "admins with all this you know annoying things where things don't work let's see if we can do something else and make this a bit better for",
    "start": "2115119",
    "end": "2120440"
  },
  {
    "text": "ourselves so let's compromise the cluster why not we're here already let's let's let's let's just compromise the",
    "start": "2120440",
    "end": "2125920"
  },
  {
    "text": "whole cluster we're going to apply a manifest and I'll cat this manifest out once I've run",
    "start": "2125920",
    "end": "2131720"
  },
  {
    "text": "it we're going to apply a manifest called node root and you can probably guess what it is by the",
    "start": "2131720",
    "end": "2137240"
  },
  {
    "text": "name uh if I",
    "start": "2137240",
    "end": "2141200"
  },
  {
    "text": "cat this is a fun manifest i used to use this manifest all the time in pentest and it's a very fun manifest what it",
    "start": "2143160",
    "end": "2149520"
  },
  {
    "text": "does is it basically says turn off all the security that you usually put on a pod it says give me the hosts network",
    "start": "2149520",
    "end": "2156640"
  },
  {
    "text": "give me the hosts P ID which is a name spaces that usually be used to constrict containers uh and then it has the magic",
    "start": "2156640",
    "end": "2162880"
  },
  {
    "text": "flag in the security context setting it said privileged true uh the privileged flag is a is a really well-n named uh",
    "start": "2162880",
    "end": "2169280"
  },
  {
    "text": "flag originally I talked to someone from Docker who said they wanted to call it insecure uh as a flag but management",
    "start": "2169280",
    "end": "2174320"
  },
  {
    "text": "didn't like that as an idea so it's called privileged but it basically means turn off all the security so we said but",
    "start": "2174320",
    "end": "2179359"
  },
  {
    "text": "let's just turn off all the security so that's what that does it runs a pod into a node and it turns off all of the security you would usually use to",
    "start": "2179359",
    "end": "2185440"
  },
  {
    "text": "restrict a pod once we've done that we can just exec into",
    "start": "2185440",
    "end": "2192200"
  },
  {
    "text": "it and run the command chute host and what it does is makes us root so we're",
    "start": "2192200",
    "end": "2199200"
  },
  {
    "text": "rooting the node now we are now the full root user on in this case control plane node if you had a cluster with 100 nodes",
    "start": "2199200",
    "end": "2205520"
  },
  {
    "text": "you could run the same thing as a damon set and you could run one of these onto every single node in the cluster and you get to be root on every single node in",
    "start": "2205520",
    "end": "2211839"
  },
  {
    "text": "the cluster which is fun because it means you can do whatever you want and then you don't have to worry the admin with any pesky problems you might have",
    "start": "2211839",
    "end": "2217320"
  },
  {
    "text": "um you can just get access and this is full access root access to where you are",
    "start": "2217320",
    "end": "2222640"
  },
  {
    "text": "um you have everything you ever wanted you have all of the processes this is a control plane node so it's got the API",
    "start": "2222640",
    "end": "2229280"
  },
  {
    "text": "server and everything else running on it so that's nice we've got our access but that's only access right now what if",
    "start": "2229280",
    "end": "2235920"
  },
  {
    "text": "someone comes back in on Monday morning and realizes that pod security admission has been turned off accidentally and",
    "start": "2235920",
    "end": "2241440"
  },
  {
    "text": "they turn it back on again then we're going to have this problem again so what else could we do well now we're here we",
    "start": "2241440",
    "end": "2249520"
  },
  {
    "text": "might as well see if there's anything useful in the node for us to use maybe we want to come back later and you know do some more stuff it would be really",
    "start": "2249520",
    "end": "2255839"
  },
  {
    "text": "handy if we had a way to fix problems we had maybe need some better credentials if we had a credential that wouldn't",
    "start": "2255839",
    "end": "2261760"
  },
  {
    "text": "expire that would be even more useful wouldn't it because that's one of the other annoying things about creds they tend to expire so this is where we come to admin",
    "start": "2261760",
    "end": "2270200"
  },
  {
    "text": "confadmin conf um most Kubernetes distributions when you install them will",
    "start": "2270200",
    "end": "2276720"
  },
  {
    "text": "create a credential with the distri that that you use at the startup in anything based on",
    "start": "2276720",
    "end": "2282119"
  },
  {
    "text": "QADM there the files admin conf well it used to be admin and super admin",
    "start": "2282119",
    "end": "2288000"
  },
  {
    "text": "uh and these files essentially have client certificate based credentials that don't expire and have cluster admin",
    "start": "2288000",
    "end": "2294079"
  },
  {
    "text": "level rights to the cluster so if you can ever get access to a control plane node where those files might exist you",
    "start": "2294079",
    "end": "2300400"
  },
  {
    "text": "can just get the files and copy them and then you have access to those credentials uh if if anyone's doing this",
    "start": "2300400",
    "end": "2306640"
  },
  {
    "text": "on a a kind cluster that is older than 129 you will only have admin conf super",
    "start": "2306640",
    "end": "2312400"
  },
  {
    "text": "admin came in in 129 and I'll I'll I'll briefly explain the difference but",
    "start": "2312400",
    "end": "2318000"
  },
  {
    "text": "basically if we do that if anyone's following along you can do that and",
    "start": "2318000",
    "end": "2325359"
  },
  {
    "text": "you'll see this is that's actually at the cluster level so we got star star star at the cluster level using that",
    "start": "2325359",
    "end": "2330400"
  },
  {
    "text": "credential which is fantastic if we use super admin",
    "start": "2330400",
    "end": "2337599"
  },
  {
    "text": "confst star at the cluster level and at this point you might say well what is",
    "start": "2339800",
    "end": "2345040"
  },
  {
    "text": "the difference you've just told me there's two files and they seem to have the exact same rights and the difference is that super admin is in a group called",
    "start": "2345040",
    "end": "2352800"
  },
  {
    "text": "system masters and system masters is a special group in Kubernetes if you have a credential that is in system masters",
    "start": "2352800",
    "end": "2359599"
  },
  {
    "text": "it doesn't touch arbback you can't you can't remove its rights in arbback you can take every single line out of",
    "start": "2359599",
    "end": "2364880"
  },
  {
    "text": "arbback that there is and that credential will still work and will still give you cluster admin if you look at the Kubernetes API server source code",
    "start": "2364880",
    "end": "2371440"
  },
  {
    "text": "you'll find why there's actually a hard-coded bypass for all authorization modules if you use a user in the group",
    "start": "2371440",
    "end": "2378079"
  },
  {
    "text": "system masters so typically you shouldn't be having credentials that are in system masters unless you want to be able to do something like coming back in",
    "start": "2378079",
    "end": "2384160"
  },
  {
    "text": "a year's time and still having cluster admin no matter what's happened in arbback uh and the reason is you used to have one file that only had system",
    "start": "2384160",
    "end": "2390400"
  },
  {
    "text": "masters and they split it up so this one really really shouldn't be given to anyone the other one at least you can revoke its rights by taking away the",
    "start": "2390400",
    "end": "2396560"
  },
  {
    "text": "binding to cluster admin group so we could have that credential and that would be super super useful because then",
    "start": "2396560",
    "end": "2402320"
  },
  {
    "text": "we could come back anytime we liked and fix any other problems we happen to have with our",
    "start": "2402320",
    "end": "2407520"
  },
  {
    "text": "cluster so that sounds really useful all of the rights so how would you avoid the",
    "start": "2408599",
    "end": "2414880"
  },
  {
    "text": "problems how would you avoid this happening in future because really if you're a",
    "start": "2414880",
    "end": "2420079"
  },
  {
    "text": "cluster admin we shouldn't have let someone do that that wasn't really something that should have happened um let's take our frustrated developer hat",
    "start": "2420079",
    "end": "2426000"
  },
  {
    "text": "off namespace segregation is important we that arbback manager service account",
    "start": "2426000",
    "end": "2431440"
  },
  {
    "text": "should have been in its own namespace it shouldn't have been in a namespace that other people use because it has got lots",
    "start": "2431440",
    "end": "2437200"
  },
  {
    "text": "of privileges it should have its own dedicated area where you deployed it to and in general if you're going to create service accounts with privileges and you",
    "start": "2437200",
    "end": "2443920"
  },
  {
    "text": "don't want everyone else who can deploy workloads to that name space to have those rights then you don't actually you",
    "start": "2443920",
    "end": "2449920"
  },
  {
    "text": "know you want to split it up care with service accounts it's very important not to let people create service account",
    "start": "2449920",
    "end": "2455119"
  },
  {
    "text": "tokens and knowing that pod creation allows for service account creation in the name space is very important and",
    "start": "2455119",
    "end": "2461200"
  },
  {
    "text": "then arbback lease privilege um don't give anyone rights they don't need to star is incredibly dangerous in",
    "start": "2461200",
    "end": "2467119"
  },
  {
    "text": "Kubernetes arbback because star is matches anything that could exist that exists now or could exist in the future",
    "start": "2467119",
    "end": "2473440"
  },
  {
    "text": "in that area because it's just string arbback kubernetes arbback is just string matching and so star always",
    "start": "2473440",
    "end": "2478640"
  },
  {
    "text": "matches a string so realistically speaking if you get someone star at anything so star means literally anything that exists now or could ever",
    "start": "2478640",
    "end": "2484880"
  },
  {
    "text": "exist in this cluster because it is just string matching so all of those things would have helped us avoid the problem",
    "start": "2484880",
    "end": "2490720"
  },
  {
    "text": "now that was kind of fun but we've done pretty well for time so let me just go",
    "start": "2490720",
    "end": "2497440"
  },
  {
    "text": "on a little bit because I thought we might have time and I wanted to I wanted to demonstrate one more thing which I thought is a kind of fun bit of hacking",
    "start": "2497440",
    "end": "2504000"
  },
  {
    "text": "um we're going to exploit an unpatchable Kubernetes CVE to finish off the",
    "start": "2504000",
    "end": "2509200"
  },
  {
    "text": "afternoon so if you don't know there are um and it's from 2020 so this CVE was discovered in 2020 uh and there is no",
    "start": "2509200",
    "end": "2516160"
  },
  {
    "text": "patch for it it exists in every single cluster that there is and you can't patch it there are actually four actually five i wrote this slide and I",
    "start": "2516160",
    "end": "2523040"
  },
  {
    "text": "forgot to update it there are currently five unpatchable Kubernetes CVEes four of them relate to networking and one of",
    "start": "2523040",
    "end": "2528800"
  },
  {
    "text": "them relates to git repo volumes it's fairly new though which is why I hadn't mentioned that as a five but we're going",
    "start": "2528800",
    "end": "2534160"
  },
  {
    "text": "to do one of them and they exist pretty much in every cluster you can get because there's no patch so we're going",
    "start": "2534160",
    "end": "2539440"
  },
  {
    "text": "to we're going to exploit something called CVE 20228554 and it's one of my",
    "start": "2539440",
    "end": "2544560"
  },
  {
    "text": "favorite CVEs to exploit because it's really fairly simple to demo he says before running the demo script um it",
    "start": "2544560",
    "end": "2550000"
  },
  {
    "text": "should work fine uh and it's quite interesting because it illustrates something about how Kubernetes works the",
    "start": "2550000",
    "end": "2555760"
  },
  {
    "text": "way it goes is this say I've got two different namespaces owned by two different teams one namespace the one in",
    "start": "2555760",
    "end": "2562960"
  },
  {
    "text": "green wants to make a connection to an external website and and get some resources or get some data right the",
    "start": "2562960",
    "end": "2570480"
  },
  {
    "text": "people over here in the bad namespace can hijack the traffic of these users",
    "start": "2570480",
    "end": "2576480"
  },
  {
    "text": "and can say I don't want this to go to external uh web server i want it to come to our internal pod any internal pod",
    "start": "2576480",
    "end": "2583280"
  },
  {
    "text": "that they've got control over and they can hijack the traffic and actually make it go in their",
    "start": "2583280",
    "end": "2588520"
  },
  {
    "text": "direction and this is kind of a feature of Kubernetes well I mean it is a CV so it's not it's a bug but it is also a feature so let's actually let's actually",
    "start": "2588520",
    "end": "2596000"
  },
  {
    "text": "try that out uh I'm going to exit out if anyone is following along and is in the shells",
    "start": "2596000",
    "end": "2602000"
  },
  {
    "text": "we want to be all the way back to our repository so you want to be back to where you are here",
    "start": "2602000",
    "end": "2610560"
  },
  {
    "text": "and then I'm going to go into the CV directory so we're going to demonstrate this just by creating a",
    "start": "2610560",
    "end": "2616240"
  },
  {
    "text": "little kind of client pod which will be our good the green namespace pod and then our bad namespace people will will",
    "start": "2616240",
    "end": "2622160"
  },
  {
    "text": "create a deployment and a service and they're going to hijack the traffic that that user is trying to send",
    "start": "2622160",
    "end": "2627480"
  },
  {
    "text": "externally so let's do that",
    "start": "2627480",
    "end": "2633640"
  },
  {
    "text": "so we've created a client pod and that pod is up and well that pod should come up and running put it in dev name space",
    "start": "2639040",
    "end": "2645280"
  },
  {
    "text": "if I remember",
    "start": "2645280",
    "end": "2647680"
  },
  {
    "text": "rightly yep it's up and running and that pod wants to get some",
    "start": "2650440",
    "end": "2656800"
  },
  {
    "text": "data from the very important internet service I can",
    "start": "2656800",
    "end": "2661520"
  },
  {
    "text": "IP so we'll actually check to make sure it can get to that",
    "start": "2662040",
    "end": "2667599"
  },
  {
    "text": "service and it can right so I can has IP just gives you back your IP address there's lots of services which do that i",
    "start": "2668359",
    "end": "2674240"
  },
  {
    "text": "remember that one cuz I always remember the name because I'm old enough to remember the",
    "start": "2674240",
    "end": "2679039"
  },
  {
    "text": "meme but now we're going to hijack that traffic and I'll show you the manifest explain how it worked once we've done it",
    "start": "2680040",
    "end": "2686480"
  },
  {
    "text": "assuming all goes to plan",
    "start": "2686480",
    "end": "2690680"
  },
  {
    "text": "we're going to create two we're going to create a deployment and a service and once we've done that we're",
    "start": "2693040",
    "end": "2699359"
  },
  {
    "text": "going to go and try again that sentry to come up and",
    "start": "2699359",
    "end": "2705680"
  },
  {
    "text": "suddenly our request has changed and instead of being a request that's gone to an external web server it's gone to",
    "start": "2705680",
    "end": "2711920"
  },
  {
    "text": "an internal instance of the EngineX web server so we've hijacked the traffic",
    "start": "2711920",
    "end": "2716960"
  },
  {
    "text": "that will work in any Kubernetes cluster cluster you try it in unless someone has specifically blocked the feature that is",
    "start": "2716960",
    "end": "2722960"
  },
  {
    "text": "or the other one is if you are using psyllium in non-cube proxy mode it won't",
    "start": "2722960",
    "end": "2728880"
  },
  {
    "text": "work there either if I remember rightly so what did we do there we have just essentially exploited a high traffic",
    "start": "2728880",
    "end": "2734079"
  },
  {
    "text": "hijack inside a cluster this is a kubernetes 132 cluster this is fully patched how did that",
    "start": "2734079",
    "end": "2741000"
  },
  {
    "text": "work the magic came in the service so in Kubernetes another lesserk",
    "start": "2741000",
    "end": "2749520"
  },
  {
    "text": "known fact hopefully a thing that you might know that you didn't know before about how Kubernetes works is there are different service types and you can see",
    "start": "2749520",
    "end": "2755839"
  },
  {
    "text": "here one of them we've got is we can specify external IPs and that's what we did here you can basically specify any",
    "start": "2755839",
    "end": "2762880"
  },
  {
    "text": "external IP you want and then Kubernetes will say hey if anyone makes a request to that IP address it's actually belongs",
    "start": "2762880",
    "end": "2769839"
  },
  {
    "text": "to this service and not any other thing it might otherwise have belonged to and the reason that works that way is",
    "start": "2769839",
    "end": "2776400"
  },
  {
    "text": "because Kubernetes services are just IP tables rules when you create a Kubernetes service what you're actually",
    "start": "2776400",
    "end": "2782000"
  },
  {
    "text": "doing is having an interface to create Linux IP tables rules and a Linux IP table rule can redirect traffic that's",
    "start": "2782000",
    "end": "2788160"
  },
  {
    "text": "one of the things you can do with IP tables so this that's exactly what a service object is it redirects traffic",
    "start": "2788160",
    "end": "2793599"
  },
  {
    "text": "and that's why it doesn't work in silium i am right thinking about that because inselium they don't use IP table rules if you replace cube proxy so basically",
    "start": "2793599",
    "end": "2800720"
  },
  {
    "text": "all we did here was these are the two IP addresses that belong to I can IP you could change those for any other IP",
    "start": "2800720",
    "end": "2805839"
  },
  {
    "text": "addresses you like um and then we said if you get any traffic that's going to those IP addresses don't send it there",
    "start": "2805839",
    "end": "2812160"
  },
  {
    "text": "send it to the deployment that we created hijacking the traffic if you want to fix that because",
    "start": "2812160",
    "end": "2818240"
  },
  {
    "text": "that doesn't sound like a great thing to allow in your clusters the best way of fixing it is you want to block creation",
    "start": "2818240",
    "end": "2825119"
  },
  {
    "text": "of external IP address servers if you don't need them probably a lot of clusters don't need that as a concept the best thing to do is have an",
    "start": "2825119",
    "end": "2830720"
  },
  {
    "text": "admission controller and say to your admission controller hey don't allow anyone to create those or maybe only allow it in a specific name space and",
    "start": "2830720",
    "end": "2836880"
  },
  {
    "text": "then have control over who can deploy to that namespace if you do need that",
    "start": "2836880",
    "end": "2841920"
  },
  {
    "text": "feature why did that work yeah Kubernetes uses IP tables rules and IP",
    "start": "2843560",
    "end": "2848640"
  },
  {
    "text": "tables rules can redirect traffic yeah if you want to stop it",
    "start": "2848640",
    "end": "2854400"
  },
  {
    "text": "happening arbback is obviously don't let people create services and admission control the two best ways of doing",
    "start": "2854400",
    "end": "2859720"
  },
  {
    "text": "it so quite well in terms of time but let's",
    "start": "2859720",
    "end": "2865359"
  },
  {
    "text": "just talk a little bit about the goal of this and hopefully",
    "start": "2865359",
    "end": "2872079"
  },
  {
    "text": "actually show of hands did people learn something they didn't know about Kubernetes security did I succeed this afternoon yay I succeeded awesome thank",
    "start": "2872079",
    "end": "2878079"
  },
  {
    "text": "you very much for that um the goal of this was to try and say look Kubernetes can be a bit complicated and there are",
    "start": "2878079",
    "end": "2884960"
  },
  {
    "text": "lots of little and we've talked on some of them i could literally have done another 10 of those without too much difficulty there's lots of different",
    "start": "2884960",
    "end": "2890960"
  },
  {
    "text": "little things in Kubernetes that you don't necessarily know or think about generally speaking the best way to",
    "start": "2890960",
    "end": "2896319"
  },
  {
    "text": "handle them is try and be very careful with permissions you give to things be minimal access and segregate stuff as",
    "start": "2896319",
    "end": "2902240"
  },
  {
    "text": "much as possible if you got things you really don't trust maybe you want to put them in separate clusters depending on",
    "start": "2902240",
    "end": "2907599"
  },
  {
    "text": "how confident you are that you can actually know all of the places where someone might do something like this and escalate their privileges or get",
    "start": "2907599",
    "end": "2913200"
  },
  {
    "text": "somewhere else if you want more resources um a couple of things that might be useful I have wrote my blog is",
    "start": "2913200",
    "end": "2919200"
  },
  {
    "text": "the racine link there i've written about most of this stuff at various times um there's also that talk site if you ever",
    "start": "2919200",
    "end": "2925440"
  },
  {
    "text": "like Kubernetes security talks uh I've I've put a searchable index of every security track talk from every CubeCon",
    "start": "2925440",
    "end": "2931839"
  },
  {
    "text": "going back to 2016 there's like 300 talks so unless you really can't get to sleep um that should make you you know",
    "start": "2931839",
    "end": "2938079"
  },
  {
    "text": "have a nice time and get to sleep uh as I mentioned earlier on SIG security on",
    "start": "2938079",
    "end": "2943200"
  },
  {
    "text": "the cub or Kubernetes security on the Kubernetes Slack are great places to get more information about this kind of",
    "start": "2943200",
    "end": "2948400"
  },
  {
    "text": "thing if this has sparked an interest you want to learn more of these weird and wonderful places that Kubernetes might be a bit odd from a security",
    "start": "2948400",
    "end": "2954160"
  },
  {
    "text": "standpoint and also tag security on the CNCF Slack uh one thing that's not on the slides that I promised to someone",
    "start": "2954160",
    "end": "2960079"
  },
  {
    "text": "else at the conference I would mention is if you like hearing Scottish accents and talking about Kubernetes KCD UK this",
    "start": "2960079",
    "end": "2966720"
  },
  {
    "text": "year will be in Edinburgh in October uh and we would love to have everyone come up to Edinburgh and join us for KCD",
    "start": "2966720",
    "end": "2974319"
  },
  {
    "text": "which will be obviously I think it's middle of October if I remember rightly but later on in the year and now with",
    "start": "2974319",
    "end": "2979839"
  },
  {
    "text": "that I've got some time for is everyone got Oh contact details i promise contact details contact details there happy to",
    "start": "2979839",
    "end": "2985839"
  },
  {
    "text": "take questions that way we've also got time if anyone wants to ask any questions now",
    "start": "2985839",
    "end": "2991920"
  },
  {
    "text": "yeah would network policies block it if you were",
    "start": "2996359",
    "end": "3002640"
  },
  {
    "text": "blocking if you were blocking yeah if you're blocking the bad namespace and saying no traffic could go to that bad",
    "start": "3006200",
    "end": "3011720"
  },
  {
    "text": "namespace then maybe so yes if you locked it right down with network policies that might stop it just because",
    "start": "3011720",
    "end": "3018880"
  },
  {
    "text": "it would stop the traffic altogether but I think the idea here is the bad name speeches people yeah you might build a",
    "start": "3018880",
    "end": "3024319"
  },
  {
    "text": "block with that as well that's a fair point yeah network policies might also manage to block it um if you put them in by def but making sure you have a",
    "start": "3024319",
    "end": "3030319"
  },
  {
    "text": "default deny and on ingress and egress on all namespaces by default would be the way to",
    "start": "3030319",
    "end": "3037200"
  },
  {
    "text": "Any other questions yeah ah oh there's a microphone awesome hello",
    "start": "3038480",
    "end": "3046880"
  },
  {
    "text": "thank you for the presentation um for the first pen test that you did you we",
    "start": "3046880",
    "end": "3052640"
  },
  {
    "text": "used to get the token from a file uh if we use secrets is the token will be",
    "start": "3052640",
    "end": "3059760"
  },
  {
    "text": "still persistent in the file where we uh where we got the token from uh I'm going",
    "start": "3059760",
    "end": "3065200"
  },
  {
    "text": "to see I heard that but secrets in files it's kind of hard yeah I mean we we got",
    "start": "3065200",
    "end": "3070240"
  },
  {
    "text": "the token we we got the token from a file to use it in order to hang on it's",
    "start": "3070240",
    "end": "3076960"
  },
  {
    "text": "super echoey I'm going to come down oh the file service account tokens in",
    "start": "3076960",
    "end": "3082960"
  },
  {
    "text": "the files I'm going to get this right otherwise I'm going to not hear you",
    "start": "3082960",
    "end": "3088440"
  },
  {
    "text": "oh yeah yeah so the question is if we use secrets would the token still be in the file the answer is yes you typically",
    "start": "3102240",
    "end": "3107680"
  },
  {
    "text": "have to put secrets somewhere inside pods if you want them to use them so you've got to either put them inside a",
    "start": "3107680",
    "end": "3113920"
  },
  {
    "text": "file or you've got to put them in an environment variable um ultimately it's the problem with secrets is if you want people to use them they have to be",
    "start": "3113920",
    "end": "3120240"
  },
  {
    "text": "somewhere for people to get them from uh you can make it harder for people to get them but the way because I can create a",
    "start": "3120240",
    "end": "3127359"
  },
  {
    "text": "service account in a namespace I can say where I wanted to go so I can say I wanted to be there um the secrets you",
    "start": "3127359",
    "end": "3134240"
  },
  {
    "text": "you because you think we didn't have any rights to get secrets in this scenario we only had access to great pods um so",
    "start": "3134240",
    "end": "3140240"
  },
  {
    "text": "yeah it's still generally accessible any other",
    "start": "3140240",
    "end": "3146839"
  },
  {
    "text": "questions are we all have I said cold drinks and ice cream in the sun too many",
    "start": "3146839",
    "end": "3152160"
  },
  {
    "text": "times and everyone's now can think of nothing else other than it's Friday afternoon in that case thank you very",
    "start": "3152160",
    "end": "3158160"
  },
  {
    "text": "much for your time and I hope that was useful",
    "start": "3158160",
    "end": "3162359"
  }
]