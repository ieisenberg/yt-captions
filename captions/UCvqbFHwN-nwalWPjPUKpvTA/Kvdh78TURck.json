[
  {
    "text": "hello and welcome to my talk uh I'm",
    "start": "240",
    "end": "2700"
  },
  {
    "text": "Daniel Brockman I work on sodium itself",
    "start": "2700",
    "end": "5759"
  },
  {
    "text": "and also on the Linux kernel so I",
    "start": "5759",
    "end": "7560"
  },
  {
    "text": "co-maintain ebpf in the Linux kernel and",
    "start": "7560",
    "end": "11099"
  },
  {
    "text": "today's talk is about 100 gigabit per",
    "start": "11099",
    "end": "13139"
  },
  {
    "text": "second clusters with psyllium building",
    "start": "13139",
    "end": "15120"
  },
  {
    "text": "tomorrow's networking data plane",
    "start": "15120",
    "end": "17880"
  },
  {
    "text": "so when looking at data center networks",
    "start": "17880",
    "end": "20279"
  },
  {
    "text": "what are the the large challenges and",
    "start": "20279",
    "end": "22980"
  },
  {
    "text": "essentially I think you can put them",
    "start": "22980",
    "end": "25439"
  },
  {
    "text": "into three big pillars scale performance",
    "start": "25439",
    "end": "28500"
  },
  {
    "text": "and operations probably all of them",
    "start": "28500",
    "end": "30480"
  },
  {
    "text": "would deserve like a talk on its own so",
    "start": "30480",
    "end": "32880"
  },
  {
    "text": "scale scaling out into many nodes many",
    "start": "32880",
    "end": "35280"
  },
  {
    "text": "parts performance making the best use of",
    "start": "35280",
    "end": "38219"
  },
  {
    "text": "the resources and operations",
    "start": "38219",
    "end": "40700"
  },
  {
    "text": "making changes to your clusters",
    "start": "40700",
    "end": "42840"
  },
  {
    "text": "frequently without disruptions for",
    "start": "42840",
    "end": "44640"
  },
  {
    "text": "example so my question is what if IPv6",
    "start": "44640",
    "end": "48899"
  },
  {
    "text": "could address both scale and performance",
    "start": "48899",
    "end": "51840"
  },
  {
    "text": "requirements from those three pillars so",
    "start": "51840",
    "end": "54360"
  },
  {
    "text": "that's what I'm going to elaborate in",
    "start": "54360",
    "end": "56160"
  },
  {
    "text": "this talk",
    "start": "56160",
    "end": "57239"
  },
  {
    "text": "uh before going and looking into more",
    "start": "57239",
    "end": "60000"
  },
  {
    "text": "into the future I actually want to take",
    "start": "60000",
    "end": "61920"
  },
  {
    "text": "a step back and look into 2016 because",
    "start": "61920",
    "end": "64198"
  },
  {
    "text": "then we actually first announced the",
    "start": "64199",
    "end": "66840"
  },
  {
    "text": "psyllium experiment you know we started",
    "start": "66840",
    "end": "69540"
  },
  {
    "text": "out with IPv6 only container networking",
    "start": "69540",
    "end": "72000"
  },
  {
    "text": "uh together with EE BPF and xtp for",
    "start": "72000",
    "end": "75240"
  },
  {
    "text": "those of you who don't know what ebpf is",
    "start": "75240",
    "end": "77040"
  },
  {
    "text": "it's kernel technology that makes makes",
    "start": "77040",
    "end": "80759"
  },
  {
    "text": "the kernel programmable customizable in",
    "start": "80759",
    "end": "83400"
  },
  {
    "text": "a safe way",
    "start": "83400",
    "end": "85020"
  },
  {
    "text": "so yeah so this is how we started out",
    "start": "85020",
    "end": "87680"
  },
  {
    "text": "IPv6 only networking scalable flexible",
    "start": "87680",
    "end": "90960"
  },
  {
    "text": "Global addressing it only net",
    "start": "90960",
    "end": "93659"
  },
  {
    "text": "um",
    "start": "93659",
    "end": "94259"
  },
  {
    "text": "so we try to abstract away from",
    "start": "94259",
    "end": "96720"
  },
  {
    "text": "traditional networking models only",
    "start": "96720",
    "end": "98280"
  },
  {
    "text": "focusing on on layer 3 and and above and",
    "start": "98280",
    "end": "101820"
  },
  {
    "text": "we built all of sodium on top of ebpf",
    "start": "101820",
    "end": "104880"
  },
  {
    "text": "for the for maximum efficiency",
    "start": "104880",
    "end": "107220"
  },
  {
    "text": "so until you know we were really excited",
    "start": "107220",
    "end": "110640"
  },
  {
    "text": "about IPv6 because the way how we can",
    "start": "110640",
    "end": "113159"
  },
  {
    "text": "implement the data plane with that until",
    "start": "113159",
    "end": "115140"
  },
  {
    "text": "of course reality kicked in and back in",
    "start": "115140",
    "end": "118200"
  },
  {
    "text": "2016 the state of IPv6 and in kubernetes",
    "start": "118200",
    "end": "122100"
  },
  {
    "text": "and Docker in particular wasn't quite",
    "start": "122100",
    "end": "124439"
  },
  {
    "text": "there yet",
    "start": "124439",
    "end": "125759"
  },
  {
    "text": "so yeah if we had to basically go back",
    "start": "125759",
    "end": "128700"
  },
  {
    "text": "and Implement ipv4 support upon popular",
    "start": "128700",
    "end": "132060"
  },
  {
    "text": "demand which probably a lot of people",
    "start": "132060",
    "end": "134280"
  },
  {
    "text": "are are running sodium with um so yeah",
    "start": "134280",
    "end": "136860"
  },
  {
    "text": "fast forward 2020 how does the situation",
    "start": "136860",
    "end": "139739"
  },
  {
    "text": "look like today uh kubernetes has",
    "start": "139739",
    "end": "142080"
  },
  {
    "text": "adopted IPv6 single stack for quite a",
    "start": "142080",
    "end": "145140"
  },
  {
    "text": "while and uh dual stack also",
    "start": "145140",
    "end": "148080"
  },
  {
    "text": "and the hyperscale has also made",
    "start": "148080",
    "end": "149879"
  },
  {
    "text": "progress integrating IPv6 into the",
    "start": "149879",
    "end": "152099"
  },
  {
    "text": "environment over most of it rather dual",
    "start": "152099",
    "end": "154680"
  },
  {
    "text": "stack so if you look at for example the",
    "start": "154680",
    "end": "157080"
  },
  {
    "text": "manage kubernetes offerings AKs eks gke",
    "start": "157080",
    "end": "160020"
  },
  {
    "text": "they all offer you know various level of",
    "start": "160020",
    "end": "162780"
  },
  {
    "text": "IPv6 support most of them dual stack",
    "start": "162780",
    "end": "166200"
  },
  {
    "text": "there's one single stack",
    "start": "166200",
    "end": "168000"
  },
  {
    "text": "so but that's already great",
    "start": "168000",
    "end": "170459"
  },
  {
    "text": "um in terms of IPv6 like why do you want",
    "start": "170459",
    "end": "172500"
  },
  {
    "text": "to why do users want to go there and a",
    "start": "172500",
    "end": "175200"
  },
  {
    "text": "lot of times we hear they want to have",
    "start": "175200",
    "end": "176760"
  },
  {
    "text": "more ipam flexibility so they don't want",
    "start": "176760",
    "end": "179220"
  },
  {
    "text": "to run out of IP addresses and have",
    "start": "179220",
    "end": "182400"
  },
  {
    "text": "enough Headroom through IPv6 in",
    "start": "182400",
    "end": "184920"
  },
  {
    "text": "particular when they have large clusters",
    "start": "184920",
    "end": "186360"
  },
  {
    "text": "with lots of churn",
    "start": "186360",
    "end": "188540"
  },
  {
    "text": "so in general there was a actually it",
    "start": "188540",
    "end": "191099"
  },
  {
    "text": "was a really interesting dual stack",
    "start": "191099",
    "end": "193319"
  },
  {
    "text": "adoption panel at the last kubecon I can",
    "start": "193319",
    "end": "195659"
  },
  {
    "text": "recommend watching that in general it's",
    "start": "195659",
    "end": "197879"
  },
  {
    "text": "right now it's regarded as a as a",
    "start": "197879",
    "end": "200459"
  },
  {
    "text": "transitional state so of course in the",
    "start": "200459",
    "end": "202200"
  },
  {
    "text": "future looking further out we want to go",
    "start": "202200",
    "end": "204599"
  },
  {
    "text": "to IPv6 end to end in general in order",
    "start": "204599",
    "end": "207959"
  },
  {
    "text": "to avoid the complexity of having both",
    "start": "207959",
    "end": "210000"
  },
  {
    "text": "you know of having both ipv4 and IPv6 in",
    "start": "210000",
    "end": "213120"
  },
  {
    "text": "your cluster",
    "start": "213120",
    "end": "215040"
  },
  {
    "text": "um so the typical approach that we've",
    "start": "215040",
    "end": "217379"
  },
  {
    "text": "seen users uh today they are trying to",
    "start": "217379",
    "end": "220680"
  },
  {
    "text": "build out you know islands of IPv6",
    "start": "220680",
    "end": "222840"
  },
  {
    "text": "single stack on-prem clusters you know",
    "start": "222840",
    "end": "224819"
  },
  {
    "text": "as a clean slate and then trying to",
    "start": "224819",
    "end": "227159"
  },
  {
    "text": "successfully uh move applications and",
    "start": "227159",
    "end": "229860"
  },
  {
    "text": "services into their cluster",
    "start": "229860",
    "end": "232440"
  },
  {
    "text": "um yeah so then you go and deploy an",
    "start": "232440",
    "end": "234299"
  },
  {
    "text": "IPv6 uh yeah an IPv6 only cluster so no",
    "start": "234299",
    "end": "237659"
  },
  {
    "text": "ipv4 but then then you face again",
    "start": "237659",
    "end": "241140"
  },
  {
    "text": "reality and you will have to interface",
    "start": "241140",
    "end": "243540"
  },
  {
    "text": "somehow with ipv4 so that's unless",
    "start": "243540",
    "end": "246060"
  },
  {
    "text": "you're air-gapped or you're you know",
    "start": "246060",
    "end": "247379"
  },
  {
    "text": "you're really lucky with dependencies",
    "start": "247379",
    "end": "249000"
  },
  {
    "text": "and if you look at the Alexa",
    "start": "249000",
    "end": "251720"
  },
  {
    "text": "1000 sites",
    "start": "251720",
    "end": "254400"
  },
  {
    "text": "um it's a bit of a sad State because you",
    "start": "254400",
    "end": "256620"
  },
  {
    "text": "know like roughly half of the sites",
    "start": "256620",
    "end": "258419"
  },
  {
    "text": "support IPv6 and the other ones not so",
    "start": "258419",
    "end": "261120"
  },
  {
    "text": "it's it's really not quite there yet",
    "start": "261120",
    "end": "264300"
  },
  {
    "text": "um you will hit a couple of ecosystem",
    "start": "264300",
    "end": "266759"
  },
  {
    "text": "bumps on the road for example uh when",
    "start": "266759",
    "end": "269520"
  },
  {
    "text": "looking at that I saw that GitHub which",
    "start": "269520",
    "end": "271800"
  },
  {
    "text": "is very frequently used by developers",
    "start": "271800",
    "end": "273600"
  },
  {
    "text": "not IPv6 ready yet but their support in",
    "start": "273600",
    "end": "276540"
  },
  {
    "text": "in terms of supporting that so there's",
    "start": "276540",
    "end": "279000"
  },
  {
    "text": "work in progress",
    "start": "279000",
    "end": "280440"
  },
  {
    "text": "and yeah so in a modern V6 only",
    "start": "280440",
    "end": "283620"
  },
  {
    "text": "environment uh how do you deal with ipv4",
    "start": "283620",
    "end": "286860"
  },
  {
    "text": "so you will have to uh run somehow not",
    "start": "286860",
    "end": "290639"
  },
  {
    "text": "four six or six four so in order to",
    "start": "290639",
    "end": "292800"
  },
  {
    "text": "translate between the two worlds",
    "start": "292800",
    "end": "295680"
  },
  {
    "text": "uh so looking at not for six and six",
    "start": "295680",
    "end": "298620"
  },
  {
    "text": "four",
    "start": "298620",
    "end": "299820"
  },
  {
    "text": "um with Linux it's actually not possible",
    "start": "299820",
    "end": "302160"
  },
  {
    "text": "so there's no such thing in net filter",
    "start": "302160",
    "end": "303860"
  },
  {
    "text": "uh because simply dealing with kernel is",
    "start": "303860",
    "end": "307080"
  },
  {
    "text": "really complicated and it has a lot of",
    "start": "307080",
    "end": "309000"
  },
  {
    "text": "protocol information in the packet",
    "start": "309000",
    "end": "311280"
  },
  {
    "text": "itself but we added a support for this",
    "start": "311280",
    "end": "314100"
  },
  {
    "text": "in ebpf so ebpf environment is a bit",
    "start": "314100",
    "end": "316620"
  },
  {
    "text": "more is a bit more constrained so",
    "start": "316620",
    "end": "319440"
  },
  {
    "text": "they're you know it's it's less complex",
    "start": "319440",
    "end": "321800"
  },
  {
    "text": "to be able to do that there",
    "start": "321800",
    "end": "324360"
  },
  {
    "text": "and",
    "start": "324360",
    "end": "325860"
  },
  {
    "text": "uh so now yeah so how is now the",
    "start": "325860",
    "end": "328139"
  },
  {
    "text": "question is how do you Ingress before",
    "start": "328139",
    "end": "329639"
  },
  {
    "text": "like if you have to before clients",
    "start": "329639",
    "end": "331440"
  },
  {
    "text": "somewhere on the internet and you want",
    "start": "331440",
    "end": "332759"
  },
  {
    "text": "to connect to your V6 only cluster how",
    "start": "332759",
    "end": "334800"
  },
  {
    "text": "do you approach that so the first option",
    "start": "334800",
    "end": "337259"
  },
  {
    "text": "is to use uh sodium with a stateful not",
    "start": "337259",
    "end": "339960"
  },
  {
    "text": "four six Gateway and",
    "start": "339960",
    "end": "343020"
  },
  {
    "text": "the latest typically looks so on the",
    "start": "343020",
    "end": "344699"
  },
  {
    "text": "left side you see the an external node",
    "start": "344699",
    "end": "347220"
  },
  {
    "text": "making DNS requests you get back the a",
    "start": "347220",
    "end": "349199"
  },
  {
    "text": "record with the ipv4 address then just",
    "start": "349199",
    "end": "351780"
  },
  {
    "text": "issues the syn packet you have to go to",
    "start": "351780",
    "end": "354180"
  },
  {
    "text": "a dual stack component",
    "start": "354180",
    "end": "356340"
  },
  {
    "text": "so that will be like you're not for six",
    "start": "356340",
    "end": "358259"
  },
  {
    "text": "Gateway which will map the ipv4 address",
    "start": "358259",
    "end": "361440"
  },
  {
    "text": "import to some IPv6 address import and",
    "start": "361440",
    "end": "365100"
  },
  {
    "text": "then you can go into your IPv6 single",
    "start": "365100",
    "end": "367919"
  },
  {
    "text": "stack kubernetes cluster and there you",
    "start": "367919",
    "end": "370020"
  },
  {
    "text": "maybe have a kubernetes slope balancer",
    "start": "370020",
    "end": "371880"
  },
  {
    "text": "service with that front-end IPv6 address",
    "start": "371880",
    "end": "375600"
  },
  {
    "text": "and then you can talk to it",
    "start": "375600",
    "end": "378240"
  },
  {
    "text": "and at that front-end address will have",
    "start": "378240",
    "end": "380940"
  },
  {
    "text": "backends that we can manage right",
    "start": "380940",
    "end": "384419"
  },
  {
    "text": "um",
    "start": "384419",
    "end": "385440"
  },
  {
    "text": "so yeah so basically that's uh six to",
    "start": "385440",
    "end": "388139"
  },
  {
    "text": "four like four to six Gateway is sitting",
    "start": "388139",
    "end": "390600"
  },
  {
    "text": "at the you know at the edge of the",
    "start": "390600",
    "end": "391740"
  },
  {
    "text": "cluster and it's the only dual stack",
    "start": "391740",
    "end": "394139"
  },
  {
    "text": "component",
    "start": "394139",
    "end": "396180"
  },
  {
    "text": "um",
    "start": "396180",
    "end": "396780"
  },
  {
    "text": "nvmap essentially from whip to whip like",
    "start": "396780",
    "end": "399300"
  },
  {
    "text": "from a ipv4 whip to an IPv6 weapon Port",
    "start": "399300",
    "end": "402120"
  },
  {
    "text": "uh so and the only thing that is exposed",
    "start": "402120",
    "end": "405300"
  },
  {
    "text": "from the kubernetes cluster itself is",
    "start": "405300",
    "end": "407400"
  },
  {
    "text": "the IPv6 that would be accessible",
    "start": "407400",
    "end": "409620"
  },
  {
    "text": "without going to this extra hop to the",
    "start": "409620",
    "end": "412259"
  },
  {
    "text": "V4 Gateway",
    "start": "412259",
    "end": "414720"
  },
  {
    "text": "so this has a couple of upsides so the",
    "start": "414720",
    "end": "417900"
  },
  {
    "text": "ipv4",
    "start": "417900",
    "end": "419100"
  },
  {
    "text": "Whip and Port is completely decoupled",
    "start": "419100",
    "end": "421500"
  },
  {
    "text": "from your kubernetes cluster and from",
    "start": "421500",
    "end": "423900"
  },
  {
    "text": "your kubernetes service",
    "start": "423900",
    "end": "426199"
  },
  {
    "text": "uh you don't need a special load",
    "start": "426199",
    "end": "429000"
  },
  {
    "text": "balancer service you don't have special",
    "start": "429000",
    "end": "431100"
  },
  {
    "text": "ipam requirements for the load balancer",
    "start": "431100",
    "end": "433259"
  },
  {
    "text": "and any public IP IPv6 prefix works as",
    "start": "433259",
    "end": "437520"
  },
  {
    "text": "as is",
    "start": "437520",
    "end": "439380"
  },
  {
    "text": "um you can even do like with with the",
    "start": "439380",
    "end": "442080"
  },
  {
    "text": "local like you can even load balance",
    "start": "442080",
    "end": "444240"
  },
  {
    "text": "through multiple kubernetes clusters uh",
    "start": "444240",
    "end": "447419"
  },
  {
    "text": "for example true weighted maglev and so",
    "start": "447419",
    "end": "449400"
  },
  {
    "text": "on so that's possible uh they're a bit",
    "start": "449400",
    "end": "451979"
  },
  {
    "text": "of there are also downsides to that so",
    "start": "451979",
    "end": "453840"
  },
  {
    "text": "you need to have like a control plane in",
    "start": "453840",
    "end": "455880"
  },
  {
    "text": "order to push down like the ipv4 to IPv6",
    "start": "455880",
    "end": "458880"
  },
  {
    "text": "mappings and the other one is the",
    "start": "458880",
    "end": "460860"
  },
  {
    "text": "original Source IB preservation when the",
    "start": "460860",
    "end": "463740"
  },
  {
    "text": "traffic hits the kubernetes cluster is",
    "start": "463740",
    "end": "465599"
  },
  {
    "text": "lost because you have to do the net",
    "start": "465599",
    "end": "469380"
  },
  {
    "text": "um",
    "start": "469380",
    "end": "470039"
  },
  {
    "text": "it's stateful so it needs to do dnat and",
    "start": "470039",
    "end": "472560"
  },
  {
    "text": "s net but you know thanks to ebpf and",
    "start": "472560",
    "end": "475319"
  },
  {
    "text": "you can push it into the xtp layer like",
    "start": "475319",
    "end": "477539"
  },
  {
    "text": "into the driver layer you can actually",
    "start": "477539",
    "end": "479280"
  },
  {
    "text": "achieve High package rates nevertheless",
    "start": "479280",
    "end": "481440"
  },
  {
    "text": "like tens of millions of packets per",
    "start": "481440",
    "end": "483300"
  },
  {
    "text": "second",
    "start": "483300",
    "end": "485460"
  },
  {
    "text": "um option two that is on the table would",
    "start": "485460",
    "end": "487800"
  },
  {
    "text": "be to have like a stateless net four to",
    "start": "487800",
    "end": "490080"
  },
  {
    "text": "six Gateway and the way this works",
    "start": "490080",
    "end": "492539"
  },
  {
    "text": "basically is quite similar but here you",
    "start": "492539",
    "end": "495000"
  },
  {
    "text": "only do the translation on the layer",
    "start": "495000",
    "end": "496620"
  },
  {
    "text": "three so there's like a special prefix",
    "start": "496620",
    "end": "499199"
  },
  {
    "text": "uh when you translate to the V6 and then",
    "start": "499199",
    "end": "502379"
  },
  {
    "text": "you need to have this uh like a load",
    "start": "502379",
    "end": "505620"
  },
  {
    "text": "balancer service with this special",
    "start": "505620",
    "end": "506819"
  },
  {
    "text": "prefix",
    "start": "506819",
    "end": "508319"
  },
  {
    "text": "um in your kubernetes cluster as well to",
    "start": "508319",
    "end": "510300"
  },
  {
    "text": "then load the lens to the back ends and",
    "start": "510300",
    "end": "512219"
  },
  {
    "text": "then uh you have the advantage to not",
    "start": "512219",
    "end": "514500"
  },
  {
    "text": "have state so this is really highly",
    "start": "514500",
    "end": "516719"
  },
  {
    "text": "scalable uh because you don't hold State",
    "start": "516719",
    "end": "519659"
  },
  {
    "text": "on the Node on the on the Gateway node",
    "start": "519659",
    "end": "522599"
  },
  {
    "text": "um",
    "start": "522599",
    "end": "523260"
  },
  {
    "text": "it allows for Source address",
    "start": "523260",
    "end": "524880"
  },
  {
    "text": "preservation because you know the",
    "start": "524880",
    "end": "526860"
  },
  {
    "text": "original client Source address is",
    "start": "526860",
    "end": "529080"
  },
  {
    "text": "essentially encoded into the IPv6",
    "start": "529080",
    "end": "531180"
  },
  {
    "text": "address",
    "start": "531180",
    "end": "532920"
  },
  {
    "text": "and you can use things like Global",
    "start": "532920",
    "end": "534899"
  },
  {
    "text": "answer Source ranges to also filter for",
    "start": "534899",
    "end": "537300"
  },
  {
    "text": "that for external ipv4 clients and no",
    "start": "537300",
    "end": "540899"
  },
  {
    "text": "control plane is needed because the",
    "start": "540899",
    "end": "542339"
  },
  {
    "text": "translation Works essentially",
    "start": "542339",
    "end": "543540"
  },
  {
    "text": "transparent",
    "start": "543540",
    "end": "546139"
  },
  {
    "text": "but the downside is of course you need",
    "start": "546500",
    "end": "548880"
  },
  {
    "text": "to have like a like a local answer ipam",
    "start": "548880",
    "end": "550800"
  },
  {
    "text": "which understands this prefix and",
    "start": "550800",
    "end": "552839"
  },
  {
    "text": "essentially have has like a public ipv4",
    "start": "552839",
    "end": "556220"
  },
  {
    "text": "accessible address in there",
    "start": "556220",
    "end": "559860"
  },
  {
    "text": "and yeah so you need to have this",
    "start": "559860",
    "end": "561720"
  },
  {
    "text": "awareness so essentially when the when",
    "start": "561720",
    "end": "564060"
  },
  {
    "text": "the cluster replies back to the client",
    "start": "564060",
    "end": "566040"
  },
  {
    "text": "this of course has to be then again",
    "start": "566040",
    "end": "568380"
  },
  {
    "text": "routable in the internet so it just",
    "start": "568380",
    "end": "570540"
  },
  {
    "text": "needs to have some some public V4",
    "start": "570540",
    "end": "572279"
  },
  {
    "text": "address that is then encoded in the V6",
    "start": "572279",
    "end": "575820"
  },
  {
    "text": "so now like let's bring in one more",
    "start": "575820",
    "end": "577920"
  },
  {
    "text": "layer of difficulty so this was maybe",
    "start": "577920",
    "end": "579779"
  },
  {
    "text": "like more of this like more",
    "start": "579779",
    "end": "581519"
  },
  {
    "text": "straightforward part four to six into",
    "start": "581519",
    "end": "583620"
  },
  {
    "text": "the cluster the other layer of",
    "start": "583620",
    "end": "585540"
  },
  {
    "text": "difficulty is like when you go to IPv6",
    "start": "585540",
    "end": "587940"
  },
  {
    "text": "you have an IPv6 only cluster and it",
    "start": "587940",
    "end": "589920"
  },
  {
    "text": "wants to talk to ipv Forum",
    "start": "589920",
    "end": "592019"
  },
  {
    "text": "so here DNS 624 plays a key part in the",
    "start": "592019",
    "end": "595800"
  },
  {
    "text": "in in that for example when like going",
    "start": "595800",
    "end": "598019"
  },
  {
    "text": "back to the previous example when you",
    "start": "598019",
    "end": "599519"
  },
  {
    "text": "want when you want to do a DNS lookup",
    "start": "599519",
    "end": "601560"
  },
  {
    "text": "for for GitHub you get the ipv4 address",
    "start": "601560",
    "end": "603720"
  },
  {
    "text": "but when you try a quad a record uh it",
    "start": "603720",
    "end": "607080"
  },
  {
    "text": "it doesn't answer so how do you talk to",
    "start": "607080",
    "end": "609120"
  },
  {
    "text": "it there's a six like dns-64 proxy uh",
    "start": "609120",
    "end": "614279"
  },
  {
    "text": "for example here's the public Google one",
    "start": "614279",
    "end": "615899"
  },
  {
    "text": "and it will return you an address where",
    "start": "615899",
    "end": "619440"
  },
  {
    "text": "it's where essentially it has a pv6",
    "start": "619440",
    "end": "621660"
  },
  {
    "text": "specific prefix and the remaining bits",
    "start": "621660",
    "end": "624000"
  },
  {
    "text": "is the encoded ipv4 address in there",
    "start": "624000",
    "end": "627000"
  },
  {
    "text": "so this is the way how it will look so",
    "start": "627000",
    "end": "629519"
  },
  {
    "text": "now you have on the left side your",
    "start": "629519",
    "end": "630779"
  },
  {
    "text": "kubernetes cluster on the right side uh",
    "start": "630779",
    "end": "633660"
  },
  {
    "text": "the internet and if your node wants to",
    "start": "633660",
    "end": "635760"
  },
  {
    "text": "talk to the internet you go you have to",
    "start": "635760",
    "end": "637440"
  },
  {
    "text": "go through this proxy the proxy will",
    "start": "637440",
    "end": "639600"
  },
  {
    "text": "make an actual a request through DNS to",
    "start": "639600",
    "end": "642779"
  },
  {
    "text": "the internet it will receive a reply and",
    "start": "642779",
    "end": "645120"
  },
  {
    "text": "it will then encode this reply in a quad",
    "start": "645120",
    "end": "647100"
  },
  {
    "text": "a record",
    "start": "647100",
    "end": "648240"
  },
  {
    "text": "back to your cluster and now your your",
    "start": "648240",
    "end": "650820"
  },
  {
    "text": "notes in the cluster can do a send",
    "start": "650820",
    "end": "652260"
  },
  {
    "text": "request uh to to this address this has",
    "start": "652260",
    "end": "655380"
  },
  {
    "text": "to go through the net six to four",
    "start": "655380",
    "end": "657180"
  },
  {
    "text": "Gateway it will then do the translation",
    "start": "657180",
    "end": "659399"
  },
  {
    "text": "and it will then go back to ipv4 and hit",
    "start": "659399",
    "end": "662399"
  },
  {
    "text": "the actual external nodes",
    "start": "662399",
    "end": "664860"
  },
  {
    "text": "so",
    "start": "664860",
    "end": "667459"
  },
  {
    "text": "yeah so this",
    "start": "667500",
    "end": "668940"
  },
  {
    "text": "um oh okay yeah so sorry so yeah yeah",
    "start": "668940",
    "end": "671940"
  },
  {
    "text": "core DNS for example supports this kind",
    "start": "671940",
    "end": "674100"
  },
  {
    "text": "of functionality",
    "start": "674100",
    "end": "675839"
  },
  {
    "text": "um if you want to use this in your in",
    "start": "675839",
    "end": "677339"
  },
  {
    "text": "your environment so the upside is again",
    "start": "677339",
    "end": "679440"
  },
  {
    "text": "like if you have a stateless translation",
    "start": "679440",
    "end": "681720"
  },
  {
    "text": "this is again highly scalable doesn't",
    "start": "681720",
    "end": "683760"
  },
  {
    "text": "hold State on the Node",
    "start": "683760",
    "end": "685800"
  },
  {
    "text": "and all the traffic in the cluster can",
    "start": "685800",
    "end": "688079"
  },
  {
    "text": "be a pure V6 only so the nodes Parts",
    "start": "688079",
    "end": "690540"
  },
  {
    "text": "even the Gateway AP so there's no",
    "start": "690540",
    "end": "693060"
  },
  {
    "text": "dealing with ipv4 the downside here is",
    "start": "693060",
    "end": "696060"
  },
  {
    "text": "that the ipam management becomes more",
    "start": "696060",
    "end": "698279"
  },
  {
    "text": "complex because the parts know they",
    "start": "698279",
    "end": "700200"
  },
  {
    "text": "would have to have like a secondary uh",
    "start": "700200",
    "end": "702420"
  },
  {
    "text": "IP address which which has this specific",
    "start": "702420",
    "end": "704399"
  },
  {
    "text": "uh prefix like the not for well-known",
    "start": "704399",
    "end": "708240"
  },
  {
    "text": "prefix in there in order to reply back",
    "start": "708240",
    "end": "712380"
  },
  {
    "text": "um so in order to overcome this uh this",
    "start": "712380",
    "end": "715200"
  },
  {
    "text": "limitation one at one thing that can be",
    "start": "715200",
    "end": "717959"
  },
  {
    "text": "addressed uh that can address this is",
    "start": "717959",
    "end": "720060"
  },
  {
    "text": "essentially to do the stateful",
    "start": "720060",
    "end": "721740"
  },
  {
    "text": "translation on the way out so your the",
    "start": "721740",
    "end": "724140"
  },
  {
    "text": "parts reply with their primary address",
    "start": "724140",
    "end": "725760"
  },
  {
    "text": "hit the Gateway node do the translation",
    "start": "725760",
    "end": "729120"
  },
  {
    "text": "there and then uh talk to the talk back",
    "start": "729120",
    "end": "731760"
  },
  {
    "text": "to the ipv4 client",
    "start": "731760",
    "end": "733620"
  },
  {
    "text": "so I have a short demo for the for the",
    "start": "733620",
    "end": "736560"
  },
  {
    "text": "four to six six to four Gateway uh given",
    "start": "736560",
    "end": "739440"
  },
  {
    "text": "the wireless was quite bad in here I did",
    "start": "739440",
    "end": "741540"
  },
  {
    "text": "some pre-recording uh the other day",
    "start": "741540",
    "end": "744060"
  },
  {
    "text": "um so I'm just walking you through that",
    "start": "744060",
    "end": "746579"
  },
  {
    "text": "so here you have a IPv6 reachable web",
    "start": "746579",
    "end": "750980"
  },
  {
    "text": "server and it has an IPv6 address it can",
    "start": "750980",
    "end": "754980"
  },
  {
    "text": "only be reached there and now if you go",
    "start": "754980",
    "end": "757620"
  },
  {
    "text": "into the gateway node itself so this is",
    "start": "757620",
    "end": "760140"
  },
  {
    "text": "running sodium as a standalone you will",
    "start": "760140",
    "end": "762420"
  },
  {
    "text": "see now that it has an ipv4 service",
    "start": "762420",
    "end": "765300"
  },
  {
    "text": "prefix and the back end itself is the",
    "start": "765300",
    "end": "768779"
  },
  {
    "text": "actual you know like the the web browser",
    "start": "768779",
    "end": "771720"
  },
  {
    "text": "and you can see you hit the you hit curl",
    "start": "771720",
    "end": "774300"
  },
  {
    "text": "on ipv4 address and you get to the IPv6",
    "start": "774300",
    "end": "776579"
  },
  {
    "text": "in here",
    "start": "776579",
    "end": "777540"
  },
  {
    "text": "so that's the one case the one situation",
    "start": "777540",
    "end": "779880"
  },
  {
    "text": "and now the other the other way around",
    "start": "779880",
    "end": "782639"
  },
  {
    "text": "they're not six two four uh it's quite",
    "start": "782639",
    "end": "786120"
  },
  {
    "text": "similar so you have an ipv4 uh reachable",
    "start": "786120",
    "end": "789480"
  },
  {
    "text": "address",
    "start": "789480",
    "end": "790740"
  },
  {
    "text": "and it does not it cannot be reached to",
    "start": "790740",
    "end": "792959"
  },
  {
    "text": "IPv6 now you go to the Standalone",
    "start": "792959",
    "end": "795600"
  },
  {
    "text": "Gateway node you have an IPv6 front end",
    "start": "795600",
    "end": "798180"
  },
  {
    "text": "address in sodium in here and this is",
    "start": "798180",
    "end": "801060"
  },
  {
    "text": "all done through ebpf at the XDP layer",
    "start": "801060",
    "end": "803459"
  },
  {
    "text": "so if you do the curl it will do it will",
    "start": "803459",
    "end": "806820"
  },
  {
    "text": "reach the ipv4 page",
    "start": "806820",
    "end": "810180"
  },
  {
    "text": "so",
    "start": "810180",
    "end": "811800"
  },
  {
    "text": "yeah",
    "start": "811800",
    "end": "814399"
  },
  {
    "text": "um okay so now we have bootstrap or IPv6",
    "start": "814500",
    "end": "817200"
  },
  {
    "text": "cluster and you can talk to ipv4 so like",
    "start": "817200",
    "end": "819360"
  },
  {
    "text": "what's next",
    "start": "819360",
    "end": "820500"
  },
  {
    "text": "so as I said so IPv6 does not only",
    "start": "820500",
    "end": "822779"
  },
  {
    "text": "address the scaling concerns but also",
    "start": "822779",
    "end": "825300"
  },
  {
    "text": "future performance requirements so enter",
    "start": "825300",
    "end": "827519"
  },
  {
    "text": "sodium with big TCP",
    "start": "827519",
    "end": "829920"
  },
  {
    "text": "so big TCP is a technology that got",
    "start": "829920",
    "end": "832019"
  },
  {
    "text": "merged into recent kernels in in 519 it",
    "start": "832019",
    "end": "836220"
  },
  {
    "text": "has been developed by by Google and the",
    "start": "836220",
    "end": "839040"
  },
  {
    "text": "goal from from Google side but also you",
    "start": "839040",
    "end": "841920"
  },
  {
    "text": "know for the broader Community is to",
    "start": "841920",
    "end": "843420"
  },
  {
    "text": "support future data center workloads for",
    "start": "843420",
    "end": "845760"
  },
  {
    "text": "you know single sockets where you go 100",
    "start": "845760",
    "end": "847560"
  },
  {
    "text": "gigabit per second 200 400 and Beyond so",
    "start": "847560",
    "end": "851160"
  },
  {
    "text": "that is the aim for that and",
    "start": "851160",
    "end": "853920"
  },
  {
    "text": "you would say why care well if you have",
    "start": "853920",
    "end": "855839"
  },
  {
    "text": "a big data workloads AI machine learning",
    "start": "855839",
    "end": "858420"
  },
  {
    "text": "or other really Network intensive",
    "start": "858420",
    "end": "860220"
  },
  {
    "text": "workloads that have bulk transfers so",
    "start": "860220",
    "end": "862139"
  },
  {
    "text": "it's really useful for that but even if",
    "start": "862139",
    "end": "864120"
  },
  {
    "text": "you don't have it it will free up you",
    "start": "864120",
    "end": "865860"
  },
  {
    "text": "know your application resources so that",
    "start": "865860",
    "end": "867779"
  },
  {
    "text": "you can use that instead of the kernel",
    "start": "867779",
    "end": "870180"
  },
  {
    "text": "stack when you have to spend Cycles",
    "start": "870180",
    "end": "871620"
  },
  {
    "text": "there",
    "start": "871620",
    "end": "873420"
  },
  {
    "text": "um if you look at 100 gigabit per second",
    "start": "873420",
    "end": "875040"
  },
  {
    "text": "it's really constrained so if you think",
    "start": "875040",
    "end": "877860"
  },
  {
    "text": "about uh 1500 MTU you would you would",
    "start": "877860",
    "end": "882420"
  },
  {
    "text": "only have 123 nanoseconds per packet and",
    "start": "882420",
    "end": "885300"
  },
  {
    "text": "you would have to be able to process",
    "start": "885300",
    "end": "886680"
  },
  {
    "text": "endpoint around 8.15 million packet per",
    "start": "886680",
    "end": "890100"
  },
  {
    "text": "second so that itself is quite",
    "start": "890100",
    "end": "893160"
  },
  {
    "text": "unrealistic for the kernel stack so you",
    "start": "893160",
    "end": "895139"
  },
  {
    "text": "really need batching",
    "start": "895139",
    "end": "896639"
  },
  {
    "text": "and the kernel has patching it's called",
    "start": "896639",
    "end": "898920"
  },
  {
    "text": "Gro and TSO so generic receive of load",
    "start": "898920",
    "end": "902779"
  },
  {
    "text": "and at transmit segmentation of lot",
    "start": "902779",
    "end": "908100"
  },
  {
    "text": "um if you look at how the like at the",
    "start": "908100",
    "end": "909899"
  },
  {
    "text": "way how the kernel receives and",
    "start": "909899",
    "end": "911339"
  },
  {
    "text": "transmits packets today so for example",
    "start": "911339",
    "end": "913800"
  },
  {
    "text": "packets going into the application you",
    "start": "913800",
    "end": "916260"
  },
  {
    "text": "have the network cards you have ebpf",
    "start": "916260",
    "end": "918660"
  },
  {
    "text": "layer",
    "start": "918660",
    "end": "919560"
  },
  {
    "text": "and then there's something like Gro and",
    "start": "919560",
    "end": "921540"
  },
  {
    "text": "and that's this really tries to",
    "start": "921540",
    "end": "923339"
  },
  {
    "text": "aggregate many packets so what you can",
    "start": "923339",
    "end": "925560"
  },
  {
    "text": "see here many MTU size packets are",
    "start": "925560",
    "end": "927959"
  },
  {
    "text": "coming in and it tries to aggregate this",
    "start": "927959",
    "end": "929760"
  },
  {
    "text": "into a single super size packet up to",
    "start": "929760",
    "end": "932220"
  },
  {
    "text": "64k and it will push it up to the stack",
    "start": "932220",
    "end": "934500"
  },
  {
    "text": "so that you have to Traverse the stack",
    "start": "934500",
    "end": "936839"
  },
  {
    "text": "only once instead of multiple times and",
    "start": "936839",
    "end": "939720"
  },
  {
    "text": "the same way also works on the way out",
    "start": "939720",
    "end": "941459"
  },
  {
    "text": "so the kernel stack typically tries to",
    "start": "941459",
    "end": "943260"
  },
  {
    "text": "aggregate a large packet and then on",
    "start": "943260",
    "end": "947220"
  },
  {
    "text": "your Hardware Nick it will typically",
    "start": "947220",
    "end": "949139"
  },
  {
    "text": "like most of the next support is today",
    "start": "949139",
    "end": "950880"
  },
  {
    "text": "it will then chunk them up into",
    "start": "950880",
    "end": "952740"
  },
  {
    "text": "individual into individual packets",
    "start": "952740",
    "end": "954660"
  },
  {
    "text": "there's also gso like there's the",
    "start": "954660",
    "end": "957060"
  },
  {
    "text": "software",
    "start": "957060",
    "end": "958500"
  },
  {
    "text": "um equivalent for that",
    "start": "958500",
    "end": "961380"
  },
  {
    "text": "so yeah so once you like like once the",
    "start": "961380",
    "end": "964380"
  },
  {
    "text": "Nick chunks them up into packets usually",
    "start": "964380",
    "end": "966120"
  },
  {
    "text": "they are received as a train of packets",
    "start": "966120",
    "end": "967920"
  },
  {
    "text": "like for TCP streams",
    "start": "967920",
    "end": "970380"
  },
  {
    "text": "um and then the go will will pull it",
    "start": "970380",
    "end": "972660"
  },
  {
    "text": "back together so there's not too much",
    "start": "972660",
    "end": "974100"
  },
  {
    "text": "latency where go would have to wait",
    "start": "974100",
    "end": "977339"
  },
  {
    "text": "um but there's an uppercise limitation",
    "start": "977339",
    "end": "979139"
  },
  {
    "text": "so the 64k is really the upper size",
    "start": "979139",
    "end": "981899"
  },
  {
    "text": "limitation that we have today",
    "start": "981899",
    "end": "984480"
  },
  {
    "text": "um the reason is that the",
    "start": "984480",
    "end": "987839"
  },
  {
    "text": "the well the the the packet size is",
    "start": "987839",
    "end": "991800"
  },
  {
    "text": "encoded in the IP address total length",
    "start": "991800",
    "end": "994019"
  },
  {
    "text": "and that is 16 bit and therefore it's",
    "start": "994019",
    "end": "996180"
  },
  {
    "text": "limited to 64k in the same way of course",
    "start": "996180",
    "end": "998699"
  },
  {
    "text": "on the way down",
    "start": "998699",
    "end": "999899"
  },
  {
    "text": "uh so can we make bigger batches so here",
    "start": "999899",
    "end": "1002779"
  },
  {
    "text": "IPv6 is to the rescue",
    "start": "1002779",
    "end": "1004880"
  },
  {
    "text": "so big TCP basically overcomes the",
    "start": "1004880",
    "end": "1007220"
  },
  {
    "text": "16-bit limit",
    "start": "1007220",
    "end": "1008959"
  },
  {
    "text": "um we're just a small kernel change so",
    "start": "1008959",
    "end": "1011120"
  },
  {
    "text": "it will insert a hop by hop IPv6",
    "start": "1011120",
    "end": "1013339"
  },
  {
    "text": "extension header",
    "start": "1013339",
    "end": "1014899"
  },
  {
    "text": "and this is just local to the node",
    "start": "1014899",
    "end": "1017420"
  },
  {
    "text": "because uh the go aggregation is it's",
    "start": "1017420",
    "end": "1020540"
  },
  {
    "text": "you don't have to make any changes on on",
    "start": "1020540",
    "end": "1022579"
  },
  {
    "text": "your network on the wire or you don't",
    "start": "1022579",
    "end": "1024140"
  },
  {
    "text": "have to change empty use",
    "start": "1024140",
    "end": "1025880"
  },
  {
    "text": "so the way this looks is basically it's",
    "start": "1025880",
    "end": "1028100"
  },
  {
    "text": "like the IPv6 header it will have a",
    "start": "1028100",
    "end": "1030500"
  },
  {
    "text": "length of zero and then in the hop by",
    "start": "1030500",
    "end": "1032780"
  },
  {
    "text": "hop ladder in the hop by hop extension",
    "start": "1032780",
    "end": "1035360"
  },
  {
    "text": "header it will have a jumbo extension",
    "start": "1035360",
    "end": "1038298"
  },
  {
    "text": "there and there's like a payload length",
    "start": "1038299",
    "end": "1040100"
  },
  {
    "text": "field for 32-bit so it can theoretically",
    "start": "1040100",
    "end": "1042558"
  },
  {
    "text": "go to four gigabit as a packet size",
    "start": "1042559",
    "end": "1046640"
  },
  {
    "text": "which is of course unrealistic today at",
    "start": "1046640",
    "end": "1048980"
  },
  {
    "text": "least but uh",
    "start": "1048980",
    "end": "1050480"
  },
  {
    "text": "um that's the theoretical limitation and",
    "start": "1050480",
    "end": "1053419"
  },
  {
    "text": "with that you can actually bump the",
    "start": "1053419",
    "end": "1055880"
  },
  {
    "text": "the aggregation size for go and also TSO",
    "start": "1055880",
    "end": "1059900"
  },
  {
    "text": "like for the way in and for the way out",
    "start": "1059900",
    "end": "1061700"
  },
  {
    "text": "right now the kernel uh has set this to",
    "start": "1061700",
    "end": "1064880"
  },
  {
    "text": "512k but this can be raised in the",
    "start": "1064880",
    "end": "1067880"
  },
  {
    "text": "future but you know ipv4 is stuck",
    "start": "1067880",
    "end": "1070340"
  },
  {
    "text": "essentially with 64k limit",
    "start": "1070340",
    "end": "1072620"
  },
  {
    "text": "and we implemented support for this",
    "start": "1072620",
    "end": "1074600"
  },
  {
    "text": "feature in sodium 113 that is you know",
    "start": "1074600",
    "end": "1077299"
  },
  {
    "text": "released approximately like towards the",
    "start": "1077299",
    "end": "1079820"
  },
  {
    "text": "end of the year so there's just a single",
    "start": "1079820",
    "end": "1081980"
  },
  {
    "text": "knob and then",
    "start": "1081980",
    "end": "1083179"
  },
  {
    "text": "um all your parts we're going to use it",
    "start": "1083179",
    "end": "1086299"
  },
  {
    "text": "so sodium will essentially uh set this",
    "start": "1086299",
    "end": "1088940"
  },
  {
    "text": "like functionality for all the parts for",
    "start": "1088940",
    "end": "1091340"
  },
  {
    "text": "all the devices in the host and then",
    "start": "1091340",
    "end": "1093919"
  },
  {
    "text": "um yeah and and there may be less",
    "start": "1093919",
    "end": "1095179"
  },
  {
    "text": "obvious part of this this will also help",
    "start": "1095179",
    "end": "1096799"
  },
  {
    "text": "for request response type workloads so",
    "start": "1096799",
    "end": "1099620"
  },
  {
    "text": "we did some latency measurements in our",
    "start": "1099620",
    "end": "1101600"
  },
  {
    "text": "lab and what we what we found is like on",
    "start": "1101600",
    "end": "1104539"
  },
  {
    "text": "the on the last bar here if you went",
    "start": "1104539",
    "end": "1106520"
  },
  {
    "text": "psyllium with uh with big TCP disabled",
    "start": "1106520",
    "end": "1108740"
  },
  {
    "text": "which is basically just a you know stock",
    "start": "1108740",
    "end": "1110780"
  },
  {
    "text": "psyllium",
    "start": "1110780",
    "end": "1112160"
  },
  {
    "text": "um and if you then enable it you will",
    "start": "1112160",
    "end": "1114140"
  },
  {
    "text": "see like a or at least we've seen in our",
    "start": "1114140",
    "end": "1116299"
  },
  {
    "text": "tests at 2.2 x lower P99 latency which",
    "start": "1116299",
    "end": "1119960"
  },
  {
    "text": "is uh quite good",
    "start": "1119960",
    "end": "1121940"
  },
  {
    "text": "and it also helps like for the",
    "start": "1121940",
    "end": "1124160"
  },
  {
    "text": "transactions like we have the like",
    "start": "1124160",
    "end": "1126500"
  },
  {
    "text": "request response transactions and it",
    "start": "1126500",
    "end": "1128780"
  },
  {
    "text": "improved them by 32 percent",
    "start": "1128780",
    "end": "1131660"
  },
  {
    "text": "in looking at the bulk TCP streams uh so",
    "start": "1131660",
    "end": "1135740"
  },
  {
    "text": "the default when you run for example",
    "start": "1135740",
    "end": "1137660"
  },
  {
    "text": "iperf in your network from a part to",
    "start": "1137660",
    "end": "1140240"
  },
  {
    "text": "part uh when it when it was off we were",
    "start": "1140240",
    "end": "1142640"
  },
  {
    "text": "able to reach on our test systems uh 52",
    "start": "1142640",
    "end": "1146299"
  },
  {
    "text": "gigabit per second so the so those test",
    "start": "1146299",
    "end": "1148880"
  },
  {
    "text": "systems they are just like I can in our",
    "start": "1148880",
    "end": "1150919"
  },
  {
    "text": "lab they were like gaming gaming systems",
    "start": "1150919",
    "end": "1153020"
  },
  {
    "text": "but with 100 gigabit nics because they",
    "start": "1153020",
    "end": "1155480"
  },
  {
    "text": "had pcie Express 4. um and then if you",
    "start": "1155480",
    "end": "1159140"
  },
  {
    "text": "turned it on we just got uh so so we got",
    "start": "1159140",
    "end": "1161360"
  },
  {
    "text": "A plus eight gigabit per second",
    "start": "1161360",
    "end": "1162679"
  },
  {
    "text": "performance Improvement so we were able",
    "start": "1162679",
    "end": "1164600"
  },
  {
    "text": "to get to 60 gigabit per second and then",
    "start": "1164600",
    "end": "1167120"
  },
  {
    "text": "if you look at what else would be",
    "start": "1167120",
    "end": "1169039"
  },
  {
    "text": "missing so if you look in into actually",
    "start": "1169039",
    "end": "1171260"
  },
  {
    "text": "the the trace profile uh you see like a",
    "start": "1171260",
    "end": "1174620"
  },
  {
    "text": "lot of copy to and from user that's a",
    "start": "1174620",
    "end": "1176720"
  },
  {
    "text": "limitation because iperf does not yet",
    "start": "1176720",
    "end": "1179120"
  },
  {
    "text": "use memory map TCP so there's a good net",
    "start": "1179120",
    "end": "1182059"
  },
  {
    "text": "Dev talk uh from the Google TCP",
    "start": "1182059",
    "end": "1185000"
  },
  {
    "text": "maintainers into you know memory map TCP",
    "start": "1185000",
    "end": "1187760"
  },
  {
    "text": "and how you can even go beyond that so",
    "start": "1187760",
    "end": "1189679"
  },
  {
    "text": "that's essentially now the limitation",
    "start": "1189679",
    "end": "1191360"
  },
  {
    "text": "here",
    "start": "1191360",
    "end": "1193660"
  },
  {
    "text": "so yeah so more broadly uh big TCP is",
    "start": "1193760",
    "end": "1196340"
  },
  {
    "text": "one piece of the picture",
    "start": "1196340",
    "end": "1198380"
  },
  {
    "text": "um",
    "start": "1198380",
    "end": "1199039"
  },
  {
    "text": "if I look at sodium with tomorrow's data",
    "start": "1199039",
    "end": "1201919"
  },
  {
    "text": "plane in mind so how can we get to a",
    "start": "1201919",
    "end": "1203720"
  },
  {
    "text": "higher scale opinionated data plane and",
    "start": "1203720",
    "end": "1205760"
  },
  {
    "text": "if I look at psyllium as a standalone",
    "start": "1205760",
    "end": "1207980"
  },
  {
    "text": "Gateway so we we achieve this through",
    "start": "1207980",
    "end": "1210380"
  },
  {
    "text": "ebpf on the xtp layer to a layer for",
    "start": "1210380",
    "end": "1213020"
  },
  {
    "text": "load balancing which has a programmable",
    "start": "1213020",
    "end": "1215240"
  },
  {
    "text": "API it supports Mark left DSR graceful",
    "start": "1215240",
    "end": "1218840"
  },
  {
    "text": "back-end termination and then the new",
    "start": "1218840",
    "end": "1220520"
  },
  {
    "text": "things with the net for six and six four",
    "start": "1220520",
    "end": "1222260"
  },
  {
    "text": "Gateway so that you can build V6 only",
    "start": "1222260",
    "end": "1224299"
  },
  {
    "text": "clusters",
    "start": "1224299",
    "end": "1225620"
  },
  {
    "text": "and then the other side so psyllium",
    "start": "1225620",
    "end": "1227480"
  },
  {
    "text": "inside kubernetes as a networking",
    "start": "1227480",
    "end": "1229940"
  },
  {
    "text": "platform so there are like a bunch of",
    "start": "1229940",
    "end": "1232039"
  },
  {
    "text": "pieces of the parcel to get it really to",
    "start": "1232039",
    "end": "1234559"
  },
  {
    "text": "high scale so one of the things is the",
    "start": "1234559",
    "end": "1236960"
  },
  {
    "text": "evpf based Q proxy replacement which",
    "start": "1236960",
    "end": "1239360"
  },
  {
    "text": "uses also xtp and the socket lock",
    "start": "1239360",
    "end": "1241280"
  },
  {
    "text": "balancer in the kernel then we have a",
    "start": "1241280",
    "end": "1243380"
  },
  {
    "text": "feature which is called ebpf based host",
    "start": "1243380",
    "end": "1245240"
  },
  {
    "text": "routing for lowering the latency I will",
    "start": "1245240",
    "end": "1247760"
  },
  {
    "text": "go into that a bit uh we have a",
    "start": "1247760",
    "end": "1250160"
  },
  {
    "text": "bandwidth manager",
    "start": "1250160",
    "end": "1251660"
  },
  {
    "text": "like I have to talk about this at the",
    "start": "1251660",
    "end": "1253400"
  },
  {
    "text": "last kubecon if you're interested so",
    "start": "1253400",
    "end": "1255500"
  },
  {
    "text": "this essentially allows this essentially",
    "start": "1255500",
    "end": "1257360"
  },
  {
    "text": "installs fqq disks on your physical",
    "start": "1257360",
    "end": "1259760"
  },
  {
    "text": "devices and this allows to do pacing",
    "start": "1259760",
    "end": "1262280"
  },
  {
    "text": "this enables bbr for ports which would",
    "start": "1262280",
    "end": "1265520"
  },
  {
    "text": "otherwise not be possible and you can do",
    "start": "1265520",
    "end": "1268039"
  },
  {
    "text": "bandwidth limitation which with the",
    "start": "1268039",
    "end": "1270320"
  },
  {
    "text": "lower latency than the usual means and",
    "start": "1270320",
    "end": "1272660"
  },
  {
    "text": "then the new pieces that we added now in",
    "start": "1272660",
    "end": "1275660"
  },
  {
    "text": "the new sodium release is IPv6 big TCP",
    "start": "1275660",
    "end": "1278539"
  },
  {
    "text": "support and last but not least a new",
    "start": "1278539",
    "end": "1280940"
  },
  {
    "text": "meta driver is a weave device",
    "start": "1280940",
    "end": "1282740"
  },
  {
    "text": "replacement so I will go into that as",
    "start": "1282740",
    "end": "1285679"
  },
  {
    "text": "the last part of the talk",
    "start": "1285679",
    "end": "1287360"
  },
  {
    "text": "so what is a meta device in order to",
    "start": "1287360",
    "end": "1290419"
  },
  {
    "text": "explain you the rational how we got",
    "start": "1290419",
    "end": "1292340"
  },
  {
    "text": "there I want to I want to first show",
    "start": "1292340",
    "end": "1294679"
  },
  {
    "text": "like the typical data path how it looks",
    "start": "1294679",
    "end": "1296539"
  },
  {
    "text": "in the kernel so typically you go to the",
    "start": "1296539",
    "end": "1298460"
  },
  {
    "text": "upper stack for packets in and out of",
    "start": "1298460",
    "end": "1300200"
  },
  {
    "text": "the part",
    "start": "1300200",
    "end": "1301400"
  },
  {
    "text": "um you have to go to IP routing net",
    "start": "1301400",
    "end": "1303679"
  },
  {
    "text": "filter and so on",
    "start": "1303679",
    "end": "1305240"
  },
  {
    "text": "and we added an extension a while back",
    "start": "1305240",
    "end": "1308720"
  },
  {
    "text": "into the kernel where from BPF we can",
    "start": "1308720",
    "end": "1311000"
  },
  {
    "text": "directly push traffic into the Pod just",
    "start": "1311000",
    "end": "1314299"
  },
  {
    "text": "in one go so without having to Traverse",
    "start": "1314299",
    "end": "1316520"
  },
  {
    "text": "the per CPU backlog queues in the kernel",
    "start": "1316520",
    "end": "1319460"
  },
  {
    "text": "for weave devices so that really helps",
    "start": "1319460",
    "end": "1321860"
  },
  {
    "text": "to deliver latencies you can wake up the",
    "start": "1321860",
    "end": "1324020"
  },
  {
    "text": "application right away without having to",
    "start": "1324020",
    "end": "1326240"
  },
  {
    "text": "go to a rescheduling point on the way",
    "start": "1326240",
    "end": "1328640"
  },
  {
    "text": "out we added the helper to push traffic",
    "start": "1328640",
    "end": "1331100"
  },
  {
    "text": "into the neighboring subsystem so it can",
    "start": "1331100",
    "end": "1333020"
  },
  {
    "text": "do L2 resolution so you don't have to go",
    "start": "1333020",
    "end": "1335539"
  },
  {
    "text": "through the upper stack",
    "start": "1335539",
    "end": "1337039"
  },
  {
    "text": "and",
    "start": "1337039",
    "end": "1339080"
  },
  {
    "text": "uh so that's basically the ebpf host",
    "start": "1339080",
    "end": "1341720"
  },
  {
    "text": "routing feature and it really helps with",
    "start": "1341720",
    "end": "1343700"
  },
  {
    "text": "the performance and now the new",
    "start": "1343700",
    "end": "1345860"
  },
  {
    "text": "component is basically a reef device",
    "start": "1345860",
    "end": "1347539"
  },
  {
    "text": "replacement",
    "start": "1347539",
    "end": "1349280"
  },
  {
    "text": "um and that essentially",
    "start": "1349280",
    "end": "1352640"
  },
  {
    "text": "uh helps to be like like the the goal of",
    "start": "1352640",
    "end": "1356720"
  },
  {
    "text": "that is essentially to have ebpf",
    "start": "1356720",
    "end": "1359419"
  },
  {
    "text": "programs as part of the as part of the",
    "start": "1359419",
    "end": "1361940"
  },
  {
    "text": "device inside the pod",
    "start": "1361940",
    "end": "1365259"
  },
  {
    "text": "um of course without the part being able",
    "start": "1366020",
    "end": "1367940"
  },
  {
    "text": "to unload it or change it in any way",
    "start": "1367940",
    "end": "1369799"
  },
  {
    "text": "because you don't want to do that you",
    "start": "1369799",
    "end": "1371179"
  },
  {
    "text": "want to control it from the host",
    "start": "1371179",
    "end": "1372500"
  },
  {
    "text": "namespace from psyllium for example",
    "start": "1372500",
    "end": "1374960"
  },
  {
    "text": "and the whole idea is to shift the",
    "start": "1374960",
    "end": "1377659"
  },
  {
    "text": "sodium BPF programs from the you know TC",
    "start": "1377659",
    "end": "1380299"
  },
  {
    "text": "layer like the tcbpf layer where we had",
    "start": "1380299",
    "end": "1382280"
  },
  {
    "text": "this originally into device itself",
    "start": "1382280",
    "end": "1385220"
  },
  {
    "text": "and this helps reduce the latency even",
    "start": "1385220",
    "end": "1388340"
  },
  {
    "text": "further",
    "start": "1388340",
    "end": "1389600"
  },
  {
    "text": "um",
    "start": "1389600",
    "end": "1390679"
  },
  {
    "text": "so if you look at the flame graphs for",
    "start": "1390679",
    "end": "1392840"
  },
  {
    "text": "the for the kernel so this is the",
    "start": "1392840",
    "end": "1394460"
  },
  {
    "text": "typical Reef case so what you can see is",
    "start": "1394460",
    "end": "1397880"
  },
  {
    "text": "like we've uh you know cleared some of",
    "start": "1397880",
    "end": "1399980"
  },
  {
    "text": "the metadata it pushes it into a pair",
    "start": "1399980",
    "end": "1402559"
  },
  {
    "text": "CPU backlog queue also on the way out",
    "start": "1402559",
    "end": "1404799"
  },
  {
    "text": "and then in the really in the worst case",
    "start": "1404799",
    "end": "1407600"
  },
  {
    "text": "like the kernel software IQ Daemon issue",
    "start": "1407600",
    "end": "1410000"
  },
  {
    "text": "is another thread so you have this like",
    "start": "1410000",
    "end": "1411500"
  },
  {
    "text": "rescheduling point so basically the like",
    "start": "1411500",
    "end": "1413960"
  },
  {
    "text": "the call graph goes here then it does an",
    "start": "1413960",
    "end": "1416120"
  },
  {
    "text": "enqueue and then it has to pick up the",
    "start": "1416120",
    "end": "1418580"
  },
  {
    "text": "packet",
    "start": "1418580",
    "end": "1419480"
  },
  {
    "text": "again to then process it and with the",
    "start": "1419480",
    "end": "1422600"
  },
  {
    "text": "new device type that we built",
    "start": "1422600",
    "end": "1424760"
  },
  {
    "text": "um in tailored for sodium you just do",
    "start": "1424760",
    "end": "1426500"
  },
  {
    "text": "everything in one go you don't have this",
    "start": "1426500",
    "end": "1428179"
  },
  {
    "text": "additional queuing you don't have this",
    "start": "1428179",
    "end": "1429799"
  },
  {
    "text": "this rescheduling and that really helps",
    "start": "1429799",
    "end": "1432440"
  },
  {
    "text": "to reduce uh latency so our main goal",
    "start": "1432440",
    "end": "1437120"
  },
  {
    "text": "with like with the ebpf host routing",
    "start": "1437120",
    "end": "1439159"
  },
  {
    "text": "this was all the way for the for packets",
    "start": "1439159",
    "end": "1441260"
  },
  {
    "text": "going into the part and now with this",
    "start": "1441260",
    "end": "1443600"
  },
  {
    "text": "device is this will basically solve it",
    "start": "1443600",
    "end": "1446059"
  },
  {
    "text": "for packets going out of the Pod so this",
    "start": "1446059",
    "end": "1448580"
  },
  {
    "text": "in combination uh the goal that we had",
    "start": "1448580",
    "end": "1451340"
  },
  {
    "text": "in in mind with that is basically to",
    "start": "1451340",
    "end": "1453559"
  },
  {
    "text": "reduce the latency and to increase the",
    "start": "1453559",
    "end": "1456500"
  },
  {
    "text": "performance in the same way as the",
    "start": "1456500",
    "end": "1458720"
  },
  {
    "text": "application would run",
    "start": "1458720",
    "end": "1460280"
  },
  {
    "text": "inside the hostname space",
    "start": "1460280",
    "end": "1462380"
  },
  {
    "text": "and if you look at the latency here you",
    "start": "1462380",
    "end": "1464659"
  },
  {
    "text": "can see I like in the yellow line is",
    "start": "1464659",
    "end": "1466760"
  },
  {
    "text": "essentially the latency for applications",
    "start": "1466760",
    "end": "1468679"
  },
  {
    "text": "running in the host and it's essentially",
    "start": "1468679",
    "end": "1472039"
  },
  {
    "text": "the same",
    "start": "1472039",
    "end": "1473240"
  },
  {
    "text": "same with the transaction is rate like",
    "start": "1473240",
    "end": "1476360"
  },
  {
    "text": "if you have more like request response",
    "start": "1476360",
    "end": "1478159"
  },
  {
    "text": "type workloads they will also be on par",
    "start": "1478159",
    "end": "1479960"
  },
  {
    "text": "with the host and throughput as well so",
    "start": "1479960",
    "end": "1483980"
  },
  {
    "text": "yeah that will basically um",
    "start": "1483980",
    "end": "1486200"
  },
  {
    "text": "solve it",
    "start": "1486200",
    "end": "1487580"
  },
  {
    "text": "so essentially the pieces of the puzzle",
    "start": "1487580",
    "end": "1489559"
  },
  {
    "text": "like for high scale data plane that I",
    "start": "1489559",
    "end": "1492320"
  },
  {
    "text": "talked about that are really critical in",
    "start": "1492320",
    "end": "1495919"
  },
  {
    "text": "in this scenario is like the ebpf based",
    "start": "1495919",
    "end": "1498799"
  },
  {
    "text": "Q proxy replacement the bandwidth",
    "start": "1498799",
    "end": "1500840"
  },
  {
    "text": "manager that I covered at the kubecon",
    "start": "1500840",
    "end": "1504440"
  },
  {
    "text": "uh in in April uh the ebpf host routing",
    "start": "1504440",
    "end": "1508820"
  },
  {
    "text": "the new IPv6 big TCP support in The Meta",
    "start": "1508820",
    "end": "1512000"
  },
  {
    "text": "devices so when you then run sodium you",
    "start": "1512000",
    "end": "1514580"
  },
  {
    "text": "will get all of that",
    "start": "1514580",
    "end": "1516620"
  },
  {
    "text": "yeah last but not least I want to thank",
    "start": "1516620",
    "end": "1518600"
  },
  {
    "text": "a couple of folks in the in the Linux",
    "start": "1518600",
    "end": "1521900"
  },
  {
    "text": "kernel Community BPF and kubernetes",
    "start": "1521900",
    "end": "1524419"
  },
  {
    "text": "Community",
    "start": "1524419",
    "end": "1525919"
  },
  {
    "text": "um also those who from from Google who",
    "start": "1525919",
    "end": "1528140"
  },
  {
    "text": "created uh initially the the big TCP",
    "start": "1528140",
    "end": "1530720"
  },
  {
    "text": "support in the kernel because I think",
    "start": "1530720",
    "end": "1532580"
  },
  {
    "text": "it's a really exciting feature which has",
    "start": "1532580",
    "end": "1534140"
  },
  {
    "text": "a lot of potential and as you can see",
    "start": "1534140",
    "end": "1537140"
  },
  {
    "text": "it's it's maybe not like an obvious",
    "start": "1537140",
    "end": "1539240"
  },
  {
    "text": "thing when you move to IPv6 what other",
    "start": "1539240",
    "end": "1541400"
  },
  {
    "text": "benefit you will get from that so yeah",
    "start": "1541400",
    "end": "1544659"
  },
  {
    "text": "with that I would like to thank you and",
    "start": "1544659",
    "end": "1547700"
  },
  {
    "text": "open up for questions",
    "start": "1547700",
    "end": "1550778"
  },
  {
    "text": "foreign",
    "start": "1551059",
    "end": "1552420"
  },
  {
    "text": "[Applause]",
    "start": "1552420",
    "end": "1557240"
  },
  {
    "text": "all right",
    "start": "1557240",
    "end": "1559840"
  },
  {
    "text": "so if you have multiple clusters yeah",
    "start": "1570559",
    "end": "1572419"
  },
  {
    "text": "then you would have to have such a",
    "start": "1572419",
    "end": "1573679"
  },
  {
    "text": "Gateway in front of your IPv6 only",
    "start": "1573679",
    "end": "1576020"
  },
  {
    "text": "cluster right so they would have to talk",
    "start": "1576020",
    "end": "1577700"
  },
  {
    "text": "to each other so you would have to talk",
    "start": "1577700",
    "end": "1579620"
  },
  {
    "text": "through the to that whip if you expose",
    "start": "1579620",
    "end": "1581779"
  },
  {
    "text": "it as a service",
    "start": "1581779",
    "end": "1584500"
  },
  {
    "text": "yeah",
    "start": "1588980",
    "end": "1589940"
  },
  {
    "text": "I mean you would have to make that",
    "start": "1589940",
    "end": "1591799"
  },
  {
    "text": "Gateway aware of this yeah",
    "start": "1591799",
    "end": "1594799"
  },
  {
    "text": "okay",
    "start": "1594799",
    "end": "1597278"
  },
  {
    "text": "increase with this new meta device right",
    "start": "1601960",
    "end": "1604580"
  },
  {
    "text": "yeah",
    "start": "1604580",
    "end": "1606080"
  },
  {
    "text": "um",
    "start": "1606080",
    "end": "1608080"
  },
  {
    "text": "yeah have you compared it",
    "start": "1608480",
    "end": "1611500"
  },
  {
    "text": "if you have soccer redirection",
    "start": "1612200",
    "end": "1615220"
  },
  {
    "text": "like what's the so well I mean this is",
    "start": "1616039",
    "end": "1619220"
  },
  {
    "text": "still like um behind network name spaces",
    "start": "1619220",
    "end": "1621140"
  },
  {
    "text": "right so you would have to get out of",
    "start": "1621140",
    "end": "1622400"
  },
  {
    "text": "the network namespace in the first place",
    "start": "1622400",
    "end": "1623840"
  },
  {
    "text": "you cannot just cross this barrier uh or",
    "start": "1623840",
    "end": "1626659"
  },
  {
    "text": "like break this barrier in that sense",
    "start": "1626659",
    "end": "1630760"
  },
  {
    "text": "I mean this will also work for for part",
    "start": "1637100",
    "end": "1639140"
  },
  {
    "text": "to part",
    "start": "1639140",
    "end": "1640100"
  },
  {
    "text": "so it it will it will also like directly",
    "start": "1640100",
    "end": "1643340"
  },
  {
    "text": "go into the device inside the Pod",
    "start": "1643340",
    "end": "1646700"
  },
  {
    "text": "without having to go to this backlog",
    "start": "1646700",
    "end": "1648860"
  },
  {
    "text": "queue",
    "start": "1648860",
    "end": "1651158"
  },
  {
    "text": "yep",
    "start": "1652760",
    "end": "1654500"
  },
  {
    "text": "when you use your new driver can you",
    "start": "1654500",
    "end": "1657559"
  },
  {
    "text": "share the physical",
    "start": "1657559",
    "end": "1660620"
  },
  {
    "text": "multiple bugs or is it yeah of course no",
    "start": "1660620",
    "end": "1662840"
  },
  {
    "text": "it's it's not tied to yeah I mean this",
    "start": "1662840",
    "end": "1665480"
  },
  {
    "text": "is definitely shared it's a virtual",
    "start": "1665480",
    "end": "1667460"
  },
  {
    "text": "device in that sense which overcomes the",
    "start": "1667460",
    "end": "1669320"
  },
  {
    "text": "limitations that the weave device has",
    "start": "1669320",
    "end": "1674440"
  },
  {
    "text": "all right",
    "start": "1678679",
    "end": "1680059"
  },
  {
    "text": "um oh one thing I forgot to mention well",
    "start": "1680059",
    "end": "1683120"
  },
  {
    "text": "I was actually preparing the talk I",
    "start": "1683120",
    "end": "1684740"
  },
  {
    "text": "noticed that there's actual progress so",
    "start": "1684740",
    "end": "1687200"
  },
  {
    "text": "GitHub will have V6 support so this is",
    "start": "1687200",
    "end": "1690020"
  },
  {
    "text": "really great",
    "start": "1690020",
    "end": "1692440"
  },
  {
    "text": "okay so yeah so if you have more",
    "start": "1692620",
    "end": "1695059"
  },
  {
    "text": "questions",
    "start": "1695059",
    "end": "1696260"
  },
  {
    "text": "um please either come to the sodium",
    "start": "1696260",
    "end": "1698480"
  },
  {
    "text": "Booth or or ask me directly or you know",
    "start": "1698480",
    "end": "1701299"
  },
  {
    "text": "yeah thanks",
    "start": "1701299",
    "end": "1703540"
  },
  {
    "text": "[Applause]",
    "start": "1703540",
    "end": "1706369"
  }
]