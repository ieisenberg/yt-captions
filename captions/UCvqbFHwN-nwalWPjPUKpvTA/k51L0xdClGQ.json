[
  {
    "text": "the name of this project was befores",
    "start": "1599",
    "end": "3919"
  },
  {
    "text": "and this stands for the test in front of",
    "start": "3919",
    "end": "6319"
  },
  {
    "text": "the legacy charts",
    "start": "6319",
    "end": "7759"
  },
  {
    "text": "we will be talking about how we migrated",
    "start": "7759",
    "end": "10880"
  },
  {
    "text": "more than a thousand mysql charts to be",
    "start": "10880",
    "end": "13599"
  },
  {
    "text": "tests",
    "start": "13599",
    "end": "14480"
  },
  {
    "text": "we will be sharing techniques that we",
    "start": "14480",
    "end": "16240"
  },
  {
    "text": "believe could be applied at other",
    "start": "16240",
    "end": "18160"
  },
  {
    "text": "companies",
    "start": "18160",
    "end": "18880"
  },
  {
    "text": "in the industry so",
    "start": "18880",
    "end": "22400"
  },
  {
    "text": "first a little bit of introduction about",
    "start": "22400",
    "end": "24960"
  },
  {
    "text": "yourself",
    "start": "24960",
    "end": "27359"
  },
  {
    "text": "my name is rafael chacon and i'm a staff",
    "start": "27359",
    "end": "30160"
  },
  {
    "text": "software engineer in the data stores",
    "start": "30160",
    "end": "32398"
  },
  {
    "text": "team at slack",
    "start": "32399",
    "end": "33920"
  },
  {
    "text": "i've been part of this team since",
    "start": "33920",
    "end": "36640"
  },
  {
    "text": "vitesse",
    "start": "36640",
    "end": "37360"
  },
  {
    "text": "was just a prototype and",
    "start": "37360",
    "end": "41040"
  },
  {
    "text": "i was here when we developed that",
    "start": "41040",
    "end": "43440"
  },
  {
    "text": "prototype",
    "start": "43440",
    "end": "44160"
  },
  {
    "text": "and we took it to production as part of",
    "start": "44160",
    "end": "46800"
  },
  {
    "text": "this journey",
    "start": "46800",
    "end": "47680"
  },
  {
    "text": "that is almost four years now i also",
    "start": "47680",
    "end": "50559"
  },
  {
    "text": "been very involved with the open source",
    "start": "50559",
    "end": "53120"
  },
  {
    "text": "community in the test project and i'm a",
    "start": "53120",
    "end": "56160"
  },
  {
    "text": "maintainer there",
    "start": "56160",
    "end": "57199"
  },
  {
    "text": "as well hello everyone my name is guido",
    "start": "57199",
    "end": "60399"
  },
  {
    "text": "yaquinti",
    "start": "60399",
    "end": "61199"
  },
  {
    "text": "and i work as engineer in the data store",
    "start": "61199",
    "end": "63199"
  },
  {
    "text": "team at slack",
    "start": "63199",
    "end": "64559"
  },
  {
    "text": "i'm one of the founding member of the",
    "start": "64559",
    "end": "66400"
  },
  {
    "text": "team where i designed",
    "start": "66400",
    "end": "67760"
  },
  {
    "text": "built and deployed the first",
    "start": "67760",
    "end": "69439"
  },
  {
    "text": "implementation of vtess",
    "start": "69439",
    "end": "71439"
  },
  {
    "text": "here's a quick overview of today's",
    "start": "71439",
    "end": "73600"
  },
  {
    "text": "agenda",
    "start": "73600",
    "end": "74880"
  },
  {
    "text": "we're going to start with an",
    "start": "74880",
    "end": "76400"
  },
  {
    "text": "introduction about databases as luck",
    "start": "76400",
    "end": "79200"
  },
  {
    "text": "we'll then go through the legacy shard",
    "start": "79200",
    "end": "80720"
  },
  {
    "text": "architecture that we plan to deprecate",
    "start": "80720",
    "end": "83360"
  },
  {
    "text": "jumping then on the details of the",
    "start": "83360",
    "end": "85360"
  },
  {
    "text": "immigration project default",
    "start": "85360",
    "end": "87600"
  },
  {
    "text": "challenge and strategy validation and",
    "start": "87600",
    "end": "90159"
  },
  {
    "text": "automation",
    "start": "90159",
    "end": "91680"
  },
  {
    "text": "we'll then close with few final remarks",
    "start": "91680",
    "end": "94560"
  },
  {
    "text": "and we'll leave some time at the end for",
    "start": "94560",
    "end": "96240"
  },
  {
    "text": "q a",
    "start": "96240",
    "end": "97680"
  },
  {
    "text": "for those of you that are not",
    "start": "97680",
    "end": "98960"
  },
  {
    "text": "familiarized with our product",
    "start": "98960",
    "end": "100720"
  },
  {
    "text": "islac is a new layer of business",
    "start": "100720",
    "end": "102479"
  },
  {
    "text": "technology stack that brings together",
    "start": "102479",
    "end": "104960"
  },
  {
    "text": "people applications and data slack is",
    "start": "104960",
    "end": "107759"
  },
  {
    "text": "where works happen",
    "start": "107759",
    "end": "109200"
  },
  {
    "text": "our mission is to make people's working",
    "start": "109200",
    "end": "111200"
  },
  {
    "text": "life simpler",
    "start": "111200",
    "end": "112799"
  },
  {
    "text": "more pleasant and more productive",
    "start": "112799",
    "end": "116560"
  },
  {
    "text": "so first a little bit of context about",
    "start": "116560",
    "end": "119520"
  },
  {
    "text": "the scale",
    "start": "119520",
    "end": "120399"
  },
  {
    "text": "that we are working at at slack we have",
    "start": "120399",
    "end": "122640"
  },
  {
    "text": "around",
    "start": "122640",
    "end": "123439"
  },
  {
    "text": "12 million daily active user that",
    "start": "123439",
    "end": "125840"
  },
  {
    "text": "generate",
    "start": "125840",
    "end": "126640"
  },
  {
    "text": "65 billion queries per day at this point",
    "start": "126640",
    "end": "129759"
  },
  {
    "text": "we have around",
    "start": "129759",
    "end": "130560"
  },
  {
    "text": "nine petabytes of data stored and we",
    "start": "130560",
    "end": "133280"
  },
  {
    "text": "have this across",
    "start": "133280",
    "end": "134560"
  },
  {
    "text": "thousands of database servers across the",
    "start": "134560",
    "end": "136800"
  },
  {
    "text": "world",
    "start": "136800",
    "end": "139120"
  },
  {
    "text": "and in order to get some context",
    "start": "139120",
    "end": "142720"
  },
  {
    "text": "about all the projects that we're going",
    "start": "142720",
    "end": "144239"
  },
  {
    "text": "to be talking about it's important that",
    "start": "144239",
    "end": "146080"
  },
  {
    "text": "you have in mind",
    "start": "146080",
    "end": "147360"
  },
  {
    "text": "what was the architecture that we call",
    "start": "147360",
    "end": "149520"
  },
  {
    "text": "the legacy charts",
    "start": "149520",
    "end": "151040"
  },
  {
    "text": "and let's talk about that so",
    "start": "151040",
    "end": "154560"
  },
  {
    "text": "in the beginning when a slug was a way",
    "start": "154560",
    "end": "157120"
  },
  {
    "text": "simpler application",
    "start": "157120",
    "end": "158879"
  },
  {
    "text": "we have a monolith that we call the web",
    "start": "158879",
    "end": "161840"
  },
  {
    "text": "app",
    "start": "161840",
    "end": "162160"
  },
  {
    "text": "that was all in hivm for the most part",
    "start": "162160",
    "end": "164720"
  },
  {
    "text": "this still exists but now there are like",
    "start": "164720",
    "end": "166319"
  },
  {
    "text": "many other components around this",
    "start": "166319",
    "end": "168800"
  },
  {
    "text": "and the way that we architecture or data",
    "start": "168800",
    "end": "172080"
  },
  {
    "text": "stores was",
    "start": "172080",
    "end": "173360"
  },
  {
    "text": "kind of like simple and it allowed us to",
    "start": "173360",
    "end": "175680"
  },
  {
    "text": "scale pretty well for",
    "start": "175680",
    "end": "178319"
  },
  {
    "text": "the first four or five years of our",
    "start": "178319",
    "end": "180319"
  },
  {
    "text": "product",
    "start": "180319",
    "end": "181360"
  },
  {
    "text": "and it worked mostly like this we have a",
    "start": "181360",
    "end": "183200"
  },
  {
    "text": "set of databases",
    "start": "183200",
    "end": "184560"
  },
  {
    "text": "on the left you see what we call the",
    "start": "184560",
    "end": "185840"
  },
  {
    "text": "access that it was just like a kitchen",
    "start": "185840",
    "end": "187440"
  },
  {
    "text": "sink",
    "start": "187440",
    "end": "188080"
  },
  {
    "text": "data that didn't belong to any team we",
    "start": "188080",
    "end": "190080"
  },
  {
    "text": "have some set of",
    "start": "190080",
    "end": "191840"
  },
  {
    "text": "databases for that kind of data we have",
    "start": "191840",
    "end": "194400"
  },
  {
    "text": "one that we call the mains",
    "start": "194400",
    "end": "196000"
  },
  {
    "text": "that store the mappings of",
    "start": "196000",
    "end": "199120"
  },
  {
    "text": "where the team data is going to be",
    "start": "199120",
    "end": "202560"
  },
  {
    "text": "stored",
    "start": "202560",
    "end": "203440"
  },
  {
    "text": "so every time we got a request and of",
    "start": "203440",
    "end": "206480"
  },
  {
    "text": "course",
    "start": "206480",
    "end": "206879"
  },
  {
    "text": "heavily cache but still like the source",
    "start": "206879",
    "end": "209120"
  },
  {
    "text": "of truth was the",
    "start": "209120",
    "end": "210239"
  },
  {
    "text": "database and we got a request for the",
    "start": "210239",
    "end": "212400"
  },
  {
    "text": "team in this example",
    "start": "212400",
    "end": "214560"
  },
  {
    "text": "id one we go to the main database",
    "start": "214560",
    "end": "218159"
  },
  {
    "text": "and we select what is the db chart",
    "start": "218159",
    "end": "221440"
  },
  {
    "text": "where this team's data is stored",
    "start": "221440",
    "end": "224720"
  },
  {
    "text": "and with that data then the application",
    "start": "224720",
    "end": "227200"
  },
  {
    "text": "can connect to that specific team",
    "start": "227200",
    "end": "229120"
  },
  {
    "text": "chart and then just from that moment on",
    "start": "229120",
    "end": "231680"
  },
  {
    "text": "and in the future",
    "start": "231680",
    "end": "233360"
  },
  {
    "text": "only talk to that database and",
    "start": "233360",
    "end": "236720"
  },
  {
    "text": "this model like worked quite well for",
    "start": "236720",
    "end": "240480"
  },
  {
    "text": "many years but with time it started to",
    "start": "240480",
    "end": "243120"
  },
  {
    "text": "show some military limitations",
    "start": "243120",
    "end": "245760"
  },
  {
    "text": "the main limitations were at the product",
    "start": "245760",
    "end": "248159"
  },
  {
    "text": "level",
    "start": "248159",
    "end": "248959"
  },
  {
    "text": "basically the requirements evolved in a",
    "start": "248959",
    "end": "252000"
  },
  {
    "text": "way",
    "start": "252000",
    "end": "252480"
  },
  {
    "text": "that studying all the data for a team",
    "start": "252480",
    "end": "255840"
  },
  {
    "text": "in a single chart didn't longer make",
    "start": "255840",
    "end": "257919"
  },
  {
    "text": "sense for instance",
    "start": "257919",
    "end": "259519"
  },
  {
    "text": "like now you know that you can connect",
    "start": "259519",
    "end": "261040"
  },
  {
    "text": "channels between different companies",
    "start": "261040",
    "end": "263440"
  },
  {
    "text": "in which teams chart would you store",
    "start": "263440",
    "end": "266560"
  },
  {
    "text": "that channel data if it's",
    "start": "266560",
    "end": "268400"
  },
  {
    "text": "share between two different teams so",
    "start": "268400",
    "end": "272160"
  },
  {
    "text": "this model although it was simple and",
    "start": "272160",
    "end": "274880"
  },
  {
    "text": "flexible",
    "start": "274880",
    "end": "275680"
  },
  {
    "text": "at the time it didn't provide us the",
    "start": "275680",
    "end": "279680"
  },
  {
    "text": "needs that then or application require",
    "start": "279680",
    "end": "283040"
  },
  {
    "text": "and from the database specifically there",
    "start": "283040",
    "end": "285199"
  },
  {
    "text": "were also other limitations just",
    "start": "285199",
    "end": "286880"
  },
  {
    "text": "mentioning one here as an example",
    "start": "286880",
    "end": "288800"
  },
  {
    "text": "hotspots were a thing and our biggest",
    "start": "288800",
    "end": "292000"
  },
  {
    "text": "and more active",
    "start": "292000",
    "end": "293040"
  },
  {
    "text": "customers you will see like a",
    "start": "293040",
    "end": "294880"
  },
  {
    "text": "distribution like the one that you see",
    "start": "294880",
    "end": "296400"
  },
  {
    "text": "in this",
    "start": "296400",
    "end": "296960"
  },
  {
    "text": "graphic many like few",
    "start": "296960",
    "end": "300080"
  },
  {
    "text": "charts with many many like tons of load",
    "start": "300080",
    "end": "302880"
  },
  {
    "text": "but then",
    "start": "302880",
    "end": "303440"
  },
  {
    "text": "quickly like a logarithmic distribution",
    "start": "303440",
    "end": "305360"
  },
  {
    "text": "where there is a long tail",
    "start": "305360",
    "end": "307199"
  },
  {
    "text": "of charts that are not that heavily used",
    "start": "307199",
    "end": "310000"
  },
  {
    "text": "and this was a problem",
    "start": "310000",
    "end": "312320"
  },
  {
    "text": "both from the efficiency perspective and",
    "start": "312320",
    "end": "314160"
  },
  {
    "text": "the scale perspective",
    "start": "314160",
    "end": "315440"
  },
  {
    "text": "at some point we literally didn't have",
    "start": "315440",
    "end": "317759"
  },
  {
    "text": "more",
    "start": "317759",
    "end": "318960"
  },
  {
    "text": "bigger instances in aws to",
    "start": "318960",
    "end": "322560"
  },
  {
    "text": "be able to support our biggest customers",
    "start": "322560",
    "end": "326720"
  },
  {
    "text": "so it was with these challenges that",
    "start": "326720",
    "end": "329280"
  },
  {
    "text": "four years ago we started to look the",
    "start": "329280",
    "end": "331199"
  },
  {
    "text": "next generation",
    "start": "331199",
    "end": "332240"
  },
  {
    "text": "of data stores at slack and high level",
    "start": "332240",
    "end": "335120"
  },
  {
    "text": "these were",
    "start": "335120",
    "end": "336000"
  },
  {
    "text": "the requirements that we had in mind we",
    "start": "336000",
    "end": "337680"
  },
  {
    "text": "needed to support my sql because the",
    "start": "337680",
    "end": "339919"
  },
  {
    "text": "application heavily rely on that",
    "start": "339919",
    "end": "342000"
  },
  {
    "text": "because of the reasons of the",
    "start": "342000",
    "end": "343440"
  },
  {
    "text": "requirements that i mentioned earlier we",
    "start": "343440",
    "end": "345520"
  },
  {
    "text": "needed flexible charting strategies so",
    "start": "345520",
    "end": "347680"
  },
  {
    "text": "each table could use a different key to",
    "start": "347680",
    "end": "350880"
  },
  {
    "text": "chart",
    "start": "350880",
    "end": "351840"
  },
  {
    "text": "also we wanted to move away from having",
    "start": "351840",
    "end": "354080"
  },
  {
    "text": "the",
    "start": "354080",
    "end": "354880"
  },
  {
    "text": "sharding abstraction being baked into",
    "start": "354880",
    "end": "357680"
  },
  {
    "text": "the application and we wanted to move",
    "start": "357680",
    "end": "359280"
  },
  {
    "text": "that to the infrastructure",
    "start": "359280",
    "end": "360800"
  },
  {
    "text": "and of course we wanted it to be",
    "start": "360800",
    "end": "362240"
  },
  {
    "text": "horizontal scalable and highly available",
    "start": "362240",
    "end": "365840"
  },
  {
    "text": "next",
    "start": "365840",
    "end": "368319"
  },
  {
    "text": "and this is how we landed on the vtes",
    "start": "370800",
    "end": "372400"
  },
  {
    "text": "technology for",
    "start": "372400",
    "end": "374000"
  },
  {
    "text": "the purpose of this talk i'm not going",
    "start": "374000",
    "end": "375680"
  },
  {
    "text": "to go",
    "start": "375680",
    "end": "377520"
  },
  {
    "text": "and do a deep dive on what is we test",
    "start": "377520",
    "end": "379600"
  },
  {
    "text": "like how it works that we have",
    "start": "379600",
    "end": "381199"
  },
  {
    "text": "talked about this in multiple talks",
    "start": "381199",
    "end": "382720"
  },
  {
    "text": "already and you can refer to those",
    "start": "382720",
    "end": "384960"
  },
  {
    "text": "if you're interested on this topic but",
    "start": "384960",
    "end": "387600"
  },
  {
    "text": "for the context of this presentation i",
    "start": "387600",
    "end": "389440"
  },
  {
    "text": "just wanted to highlight that",
    "start": "389440",
    "end": "391120"
  },
  {
    "text": "we just provided the right extractions",
    "start": "391120",
    "end": "393280"
  },
  {
    "text": "that we needed",
    "start": "393280",
    "end": "394400"
  },
  {
    "text": "in order to scale slack databases",
    "start": "394400",
    "end": "398800"
  },
  {
    "text": "now let's enter in the code of this",
    "start": "398800",
    "end": "400479"
  },
  {
    "text": "presentation with tests in front of the",
    "start": "400479",
    "end": "402240"
  },
  {
    "text": "legacy charts",
    "start": "402240",
    "end": "405039"
  },
  {
    "text": "the first two and a half years of this",
    "start": "405199",
    "end": "407440"
  },
  {
    "text": "project we focus on migrating",
    "start": "407440",
    "end": "409599"
  },
  {
    "text": "the most complicated and highest volume",
    "start": "409599",
    "end": "412400"
  },
  {
    "text": "tables",
    "start": "412400",
    "end": "413759"
  },
  {
    "text": "it was not that many tables between 10",
    "start": "413759",
    "end": "415919"
  },
  {
    "text": "to 20",
    "start": "415919",
    "end": "417280"
  },
  {
    "text": "but they were 70 of all",
    "start": "417280",
    "end": "421039"
  },
  {
    "text": "slack database workloads",
    "start": "421039",
    "end": "424080"
  },
  {
    "text": "each of these tables was a multi-quarter",
    "start": "424080",
    "end": "426400"
  },
  {
    "text": "project with many engineers",
    "start": "426400",
    "end": "428240"
  },
  {
    "text": "involved to do the migration in reality",
    "start": "428240",
    "end": "431039"
  },
  {
    "text": "it was not",
    "start": "431039",
    "end": "431840"
  },
  {
    "text": "a migration it was more a",
    "start": "431840",
    "end": "433360"
  },
  {
    "text": "re-architecture of each of these tables",
    "start": "433360",
    "end": "435759"
  },
  {
    "text": "we took the opportunity to do a bunch of",
    "start": "435759",
    "end": "437919"
  },
  {
    "text": "cleaning we did we did the recharging",
    "start": "437919",
    "end": "441120"
  },
  {
    "text": "and it was heavily involved",
    "start": "441120",
    "end": "444240"
  },
  {
    "text": "actually i would like to show you how",
    "start": "444240",
    "end": "446720"
  },
  {
    "text": "these migrations",
    "start": "446720",
    "end": "448560"
  },
  {
    "text": "you could imagine the self if you can",
    "start": "448560",
    "end": "450960"
  },
  {
    "text": "put it in a",
    "start": "450960",
    "end": "451759"
  },
  {
    "text": "small video so it was a bunch of",
    "start": "451759",
    "end": "454479"
  },
  {
    "text": "application engineers watching very",
    "start": "454479",
    "end": "456479"
  },
  {
    "text": "closely",
    "start": "456479",
    "end": "457199"
  },
  {
    "text": "and then removing this table cloth to",
    "start": "457199",
    "end": "459599"
  },
  {
    "text": "make sure that",
    "start": "459599",
    "end": "460400"
  },
  {
    "text": "everything was still in place but it",
    "start": "460400",
    "end": "462160"
  },
  {
    "text": "required a lot of focus",
    "start": "462160",
    "end": "463680"
  },
  {
    "text": "a lot of understanding and a lot of",
    "start": "463680",
    "end": "466160"
  },
  {
    "text": "watching to make it right",
    "start": "466160",
    "end": "467759"
  },
  {
    "text": "but this is how like we did these",
    "start": "467759",
    "end": "469840"
  },
  {
    "text": "traditional migrations",
    "start": "469840",
    "end": "472319"
  },
  {
    "text": "but this was not going to work for the",
    "start": "472319",
    "end": "474400"
  },
  {
    "text": "remainder of",
    "start": "474400",
    "end": "475919"
  },
  {
    "text": "30 of the traffic this wasn't going to",
    "start": "475919",
    "end": "478879"
  },
  {
    "text": "work because",
    "start": "478879",
    "end": "481039"
  },
  {
    "text": "that 30 percent was more than 200 tables",
    "start": "481039",
    "end": "484000"
  },
  {
    "text": "and all our strategy",
    "start": "484000",
    "end": "486000"
  },
  {
    "text": "was designed and all the tooling and all",
    "start": "486000",
    "end": "488960"
  },
  {
    "text": "or",
    "start": "488960",
    "end": "489599"
  },
  {
    "text": "framework was thought to be used in a",
    "start": "489599",
    "end": "492400"
  },
  {
    "text": "table by table base",
    "start": "492400",
    "end": "494560"
  },
  {
    "text": "in the best of the cases each table took",
    "start": "494560",
    "end": "497599"
  },
  {
    "text": "about a month",
    "start": "497599",
    "end": "499120"
  },
  {
    "text": "so doing it with the approach that we",
    "start": "499120",
    "end": "501280"
  },
  {
    "text": "had at the moment it was",
    "start": "501280",
    "end": "502479"
  },
  {
    "text": "going to take 16 years to finish the",
    "start": "502479",
    "end": "505759"
  },
  {
    "text": "migration",
    "start": "505759",
    "end": "506400"
  },
  {
    "text": "of course this is a little bit",
    "start": "506400",
    "end": "507440"
  },
  {
    "text": "exaggerated but it was obvious that the",
    "start": "507440",
    "end": "510479"
  },
  {
    "text": "normal approach was not going to work so",
    "start": "510479",
    "end": "513120"
  },
  {
    "text": "we needed to come up",
    "start": "513120",
    "end": "514240"
  },
  {
    "text": "with a different strategy to migrate",
    "start": "514240",
    "end": "516880"
  },
  {
    "text": "those 200 tables",
    "start": "516880",
    "end": "520320"
  },
  {
    "text": "and we wanted to do this in a year we",
    "start": "520320",
    "end": "523360"
  },
  {
    "text": "wanted to do this",
    "start": "523360",
    "end": "524399"
  },
  {
    "text": "with minimal disruption to application",
    "start": "524399",
    "end": "527279"
  },
  {
    "text": "developers so",
    "start": "527279",
    "end": "528480"
  },
  {
    "text": "they were able to continue to work",
    "start": "528480",
    "end": "531760"
  },
  {
    "text": "without knowing that we were moving like",
    "start": "531760",
    "end": "534640"
  },
  {
    "text": "these tables",
    "start": "534640",
    "end": "535600"
  },
  {
    "text": "and of course we didn't want any",
    "start": "535600",
    "end": "538320"
  },
  {
    "text": "downtime",
    "start": "538320",
    "end": "539120"
  },
  {
    "text": "while we were performing this migration",
    "start": "539120",
    "end": "542000"
  },
  {
    "text": "so what we wanted for this",
    "start": "542000",
    "end": "543760"
  },
  {
    "text": "look more something like this",
    "start": "543760",
    "end": "546959"
  },
  {
    "text": "we had a lot of instrumentation we have",
    "start": "546959",
    "end": "549680"
  },
  {
    "text": "a lot of automation",
    "start": "549680",
    "end": "551279"
  },
  {
    "text": "and then we just wanted to migrate all",
    "start": "551279",
    "end": "553760"
  },
  {
    "text": "the tables at once",
    "start": "553760",
    "end": "554880"
  },
  {
    "text": "with no one noticing like very fast and",
    "start": "554880",
    "end": "558560"
  },
  {
    "text": "in a very reliable way so now let's talk",
    "start": "558560",
    "end": "562240"
  },
  {
    "text": "about how we did this",
    "start": "562240",
    "end": "565360"
  },
  {
    "text": "first we need to have some context about",
    "start": "565839",
    "end": "568800"
  },
  {
    "text": "what was the topology at the mysql level",
    "start": "568800",
    "end": "571680"
  },
  {
    "text": "let's start with the legacy one we were",
    "start": "571680",
    "end": "573839"
  },
  {
    "text": "running our clusters using mysql56",
    "start": "573839",
    "end": "576880"
  },
  {
    "text": "we were using statement based",
    "start": "576880",
    "end": "578560"
  },
  {
    "text": "replication with async replication",
    "start": "578560",
    "end": "581760"
  },
  {
    "text": "and also we have a very unique setup",
    "start": "581760",
    "end": "584320"
  },
  {
    "text": "where we have",
    "start": "584320",
    "end": "585519"
  },
  {
    "text": "two pair of databases in a primary",
    "start": "585519",
    "end": "589120"
  },
  {
    "text": "primary mode",
    "start": "589120",
    "end": "590000"
  },
  {
    "text": "where each side was grindable",
    "start": "590000",
    "end": "593680"
  },
  {
    "text": "and this is very unique about slack like",
    "start": "593680",
    "end": "595760"
  },
  {
    "text": "not that many companies",
    "start": "595760",
    "end": "597279"
  },
  {
    "text": "run my sequel in this mode and this has",
    "start": "597279",
    "end": "599760"
  },
  {
    "text": "the side effect that it was",
    "start": "599760",
    "end": "601200"
  },
  {
    "text": "kind of like complicated to find a path",
    "start": "601200",
    "end": "603680"
  },
  {
    "text": "forward to",
    "start": "603680",
    "end": "604880"
  },
  {
    "text": "even upgrade my sequel using this",
    "start": "604880",
    "end": "607279"
  },
  {
    "text": "topology",
    "start": "607279",
    "end": "609360"
  },
  {
    "text": "and then on the vtest side we had a more",
    "start": "609360",
    "end": "611760"
  },
  {
    "text": "standard",
    "start": "611760",
    "end": "612959"
  },
  {
    "text": "topology using my sql57 we",
    "start": "612959",
    "end": "616320"
  },
  {
    "text": "are using row-based replication and we",
    "start": "616320",
    "end": "618720"
  },
  {
    "text": "have a primary",
    "start": "618720",
    "end": "620079"
  },
  {
    "text": "single host that is writable and then",
    "start": "620079",
    "end": "621920"
  },
  {
    "text": "multiple replicas that we can use",
    "start": "621920",
    "end": "624240"
  },
  {
    "text": "for reads and another interesting fact",
    "start": "624240",
    "end": "627440"
  },
  {
    "text": "is that we use",
    "start": "627440",
    "end": "628079"
  },
  {
    "text": "semi-single replication here basically",
    "start": "628079",
    "end": "631680"
  },
  {
    "text": "we needed to go",
    "start": "631680",
    "end": "632640"
  },
  {
    "text": "from the topology on the left to the",
    "start": "632640",
    "end": "634320"
  },
  {
    "text": "topology on the right",
    "start": "634320",
    "end": "635760"
  },
  {
    "text": "and as i mentioned earlier due to this",
    "start": "635760",
    "end": "638160"
  },
  {
    "text": "primary primary",
    "start": "638160",
    "end": "639519"
  },
  {
    "text": "setup it was very complicated to",
    "start": "639519",
    "end": "642800"
  },
  {
    "text": "do this migration and it was",
    "start": "642800",
    "end": "646240"
  },
  {
    "text": "that dramatic that we haven't upgraded",
    "start": "646240",
    "end": "649600"
  },
  {
    "text": "my sequel",
    "start": "649600",
    "end": "650800"
  },
  {
    "text": "in multiple years so just thinking about",
    "start": "650800",
    "end": "654640"
  },
  {
    "text": "this",
    "start": "654640",
    "end": "655040"
  },
  {
    "text": "it was very challenging however",
    "start": "655040",
    "end": "658320"
  },
  {
    "text": "we were able to come up with a framework",
    "start": "658320",
    "end": "660720"
  },
  {
    "text": "that",
    "start": "660720",
    "end": "661839"
  },
  {
    "text": "set us a path forward",
    "start": "661839",
    "end": "664959"
  },
  {
    "text": "next we came up with a series of steps",
    "start": "664959",
    "end": "669839"
  },
  {
    "text": "where each step in isolation allow us to",
    "start": "669839",
    "end": "673920"
  },
  {
    "text": "move forward",
    "start": "673920",
    "end": "674800"
  },
  {
    "text": "in this migration first we wanted to see",
    "start": "674800",
    "end": "677519"
  },
  {
    "text": "if we are able",
    "start": "677519",
    "end": "678880"
  },
  {
    "text": "in the vacuum to restore and upgrade",
    "start": "678880",
    "end": "682320"
  },
  {
    "text": "these charts then we wanted to find ways",
    "start": "682320",
    "end": "685440"
  },
  {
    "text": "to synchronize them",
    "start": "685440",
    "end": "686560"
  },
  {
    "text": "with the legacy topology validate that",
    "start": "686560",
    "end": "689600"
  },
  {
    "text": "everything was working",
    "start": "689600",
    "end": "691040"
  },
  {
    "text": "and finally find a way to migrate them",
    "start": "691040",
    "end": "695360"
  },
  {
    "text": "so what did entail to",
    "start": "695360",
    "end": "698800"
  },
  {
    "text": "restore an upgrade basically we set up",
    "start": "698800",
    "end": "702320"
  },
  {
    "text": "an empty chart in orbit test",
    "start": "702320",
    "end": "705839"
  },
  {
    "text": "uh cluster and as you know like",
    "start": "705839",
    "end": "709120"
  },
  {
    "text": "the way that you route to charts and",
    "start": "709120",
    "end": "711360"
  },
  {
    "text": "details is to",
    "start": "711360",
    "end": "712240"
  },
  {
    "text": "is through vt gates this will be",
    "start": "712240",
    "end": "715360"
  },
  {
    "text": "important later in the presentation so",
    "start": "715360",
    "end": "717120"
  },
  {
    "text": "we wanted to introduce it",
    "start": "717120",
    "end": "718480"
  },
  {
    "text": "at this point so you have it in context",
    "start": "718480",
    "end": "721040"
  },
  {
    "text": "and",
    "start": "721040",
    "end": "721600"
  },
  {
    "text": "we bootstrap a chart that is empty",
    "start": "721600",
    "end": "724880"
  },
  {
    "text": "in a chart that was going to represent",
    "start": "724880",
    "end": "728160"
  },
  {
    "text": "the equivalent of its legacy version",
    "start": "728160",
    "end": "732800"
  },
  {
    "text": "of course we set up this with the",
    "start": "732800",
    "end": "735600"
  },
  {
    "text": "topology that we usually test",
    "start": "735600",
    "end": "737440"
  },
  {
    "text": "from the get-go we use road-based",
    "start": "737440",
    "end": "740000"
  },
  {
    "text": "replication",
    "start": "740000",
    "end": "741200"
  },
  {
    "text": "and the standard primary replica setup",
    "start": "741200",
    "end": "744800"
  },
  {
    "text": "the way that we did this is that we",
    "start": "744800",
    "end": "747279"
  },
  {
    "text": "start empty",
    "start": "747279",
    "end": "748880"
  },
  {
    "text": "we seed the char with the latest",
    "start": "748880",
    "end": "751920"
  },
  {
    "text": "available backup front or legacy",
    "start": "751920",
    "end": "753600"
  },
  {
    "text": "infrastructure",
    "start": "753600",
    "end": "755040"
  },
  {
    "text": "and then we run a restore",
    "start": "755040",
    "end": "758399"
  },
  {
    "text": "in place and we upgrade my sql",
    "start": "758399",
    "end": "761440"
  },
  {
    "text": "so we migrate the data set to the new",
    "start": "761440",
    "end": "763440"
  },
  {
    "text": "version",
    "start": "763440",
    "end": "764880"
  },
  {
    "text": "then we take a backup of this c",
    "start": "764880",
    "end": "768000"
  },
  {
    "text": "char and we cycle like all the hosts and",
    "start": "768000",
    "end": "771279"
  },
  {
    "text": "we have",
    "start": "771279",
    "end": "772720"
  },
  {
    "text": "kind of like a vanilla we test char",
    "start": "772720",
    "end": "776079"
  },
  {
    "text": "seeded with a backup from our legacy",
    "start": "776079",
    "end": "778079"
  },
  {
    "text": "infrastructure",
    "start": "778079",
    "end": "780320"
  },
  {
    "text": "so now that we have this char on the",
    "start": "780320",
    "end": "783279"
  },
  {
    "text": "test",
    "start": "783279",
    "end": "784079"
  },
  {
    "text": "with a backup how do we keep it in sync",
    "start": "784079",
    "end": "786800"
  },
  {
    "text": "with your legacy infrastructure",
    "start": "786800",
    "end": "788720"
  },
  {
    "text": "this was a big challenge because of the",
    "start": "788720",
    "end": "791680"
  },
  {
    "text": "topology and the difference in my sql",
    "start": "791680",
    "end": "793760"
  },
  {
    "text": "versions",
    "start": "793760",
    "end": "794480"
  },
  {
    "text": "we couldn't just set up normal my sql",
    "start": "794480",
    "end": "796800"
  },
  {
    "text": "replication",
    "start": "796800",
    "end": "797600"
  },
  {
    "text": "to connect them and set up the new",
    "start": "797600",
    "end": "799920"
  },
  {
    "text": "shards a replica",
    "start": "799920",
    "end": "801200"
  },
  {
    "text": "of the legacy ones so in order to solve",
    "start": "801200",
    "end": "804399"
  },
  {
    "text": "this problem",
    "start": "804399",
    "end": "805360"
  },
  {
    "text": "we leverage a core component of the test",
    "start": "805360",
    "end": "807760"
  },
  {
    "text": "that is called be",
    "start": "807760",
    "end": "808480"
  },
  {
    "text": "replication that implements the mysql",
    "start": "808480",
    "end": "811600"
  },
  {
    "text": "replication protocol and we use it to",
    "start": "811600",
    "end": "814320"
  },
  {
    "text": "shovel data",
    "start": "814320",
    "end": "815440"
  },
  {
    "text": "from an external database in this case",
    "start": "815440",
    "end": "818000"
  },
  {
    "text": "or legacy charts",
    "start": "818000",
    "end": "819600"
  },
  {
    "text": "to a target chart in the test and we",
    "start": "819600",
    "end": "821839"
  },
  {
    "text": "actually implemented",
    "start": "821839",
    "end": "823279"
  },
  {
    "text": "this functionality to connect to",
    "start": "823279",
    "end": "825519"
  },
  {
    "text": "external databases that are",
    "start": "825519",
    "end": "827040"
  },
  {
    "text": "part of the ecosystem of the tesco",
    "start": "827040",
    "end": "830240"
  },
  {
    "text": "system",
    "start": "830240",
    "end": "830959"
  },
  {
    "text": "and the way that this looks is that as",
    "start": "830959",
    "end": "833360"
  },
  {
    "text": "simple as this this is a",
    "start": "833360",
    "end": "834720"
  },
  {
    "text": "very like first-class citizen api",
    "start": "834720",
    "end": "838160"
  },
  {
    "text": "on the test side and you created as we",
    "start": "838160",
    "end": "841040"
  },
  {
    "text": "were like a normal",
    "start": "841040",
    "end": "842000"
  },
  {
    "text": "row in the the test configuration and",
    "start": "842000",
    "end": "844959"
  },
  {
    "text": "you can say",
    "start": "844959",
    "end": "845839"
  },
  {
    "text": "create this workflow we call it like",
    "start": "845839",
    "end": "847440"
  },
  {
    "text": "viticult where you have like this rule",
    "start": "847440",
    "end": "849440"
  },
  {
    "text": "that match",
    "start": "849440",
    "end": "850079"
  },
  {
    "text": "basically everything that is on the",
    "start": "850079",
    "end": "852160"
  },
  {
    "text": "source we say",
    "start": "852160",
    "end": "853680"
  },
  {
    "text": "it's going to be an external mysql",
    "start": "853680",
    "end": "855440"
  },
  {
    "text": "database we specify like some",
    "start": "855440",
    "end": "857040"
  },
  {
    "text": "configuration of like",
    "start": "857040",
    "end": "858720"
  },
  {
    "text": "where in the replication stream you want",
    "start": "858720",
    "end": "861040"
  },
  {
    "text": "to start",
    "start": "861040",
    "end": "862399"
  },
  {
    "text": "replicating from and then from that",
    "start": "862399",
    "end": "864399"
  },
  {
    "text": "moment on the tablet process like takes",
    "start": "864399",
    "end": "866959"
  },
  {
    "text": "on",
    "start": "866959",
    "end": "867440"
  },
  {
    "text": "and make sure that this is replicated",
    "start": "867440",
    "end": "870560"
  },
  {
    "text": "with the same kind of",
    "start": "870560",
    "end": "871760"
  },
  {
    "text": "level of guarantees that normal my",
    "start": "871760",
    "end": "874399"
  },
  {
    "text": "secret application will give you",
    "start": "874399",
    "end": "876320"
  },
  {
    "text": "and then at this point we have like",
    "start": "876320",
    "end": "878800"
  },
  {
    "text": "orbit test chart",
    "start": "878800",
    "end": "880079"
  },
  {
    "text": "seeded from the backup replicating from",
    "start": "880079",
    "end": "883040"
  },
  {
    "text": "the legacy source chart",
    "start": "883040",
    "end": "884639"
  },
  {
    "text": "when we got to this point this was like",
    "start": "884639",
    "end": "886720"
  },
  {
    "text": "very powerful and we were like super",
    "start": "886720",
    "end": "888320"
  },
  {
    "text": "excited and we",
    "start": "888320",
    "end": "889440"
  },
  {
    "text": "knew that we had like a path forward to",
    "start": "889440",
    "end": "892320"
  },
  {
    "text": "finish this migration",
    "start": "892320",
    "end": "893680"
  },
  {
    "text": "however we needed to build the",
    "start": "893680",
    "end": "896720"
  },
  {
    "text": "confidence that this was",
    "start": "896720",
    "end": "898000"
  },
  {
    "text": "working as we expected we needed to",
    "start": "898000",
    "end": "901920"
  },
  {
    "text": "know that we didn't leave any data",
    "start": "901920",
    "end": "903519"
  },
  {
    "text": "behind",
    "start": "903519",
    "end": "905120"
  },
  {
    "text": "also we needed to verify",
    "start": "905120",
    "end": "908800"
  },
  {
    "text": "that the view from the application",
    "start": "908800",
    "end": "910560"
  },
  {
    "text": "perspective was matching",
    "start": "910560",
    "end": "913040"
  },
  {
    "text": "a more maybe as equal as important",
    "start": "913040",
    "end": "916720"
  },
  {
    "text": "was this process reliable can we trust",
    "start": "916720",
    "end": "919680"
  },
  {
    "text": "that bit replication is not",
    "start": "919680",
    "end": "921600"
  },
  {
    "text": "failing or having any kind of like",
    "start": "921600",
    "end": "924880"
  },
  {
    "text": "edge cases where it could create data",
    "start": "924880",
    "end": "927519"
  },
  {
    "text": "loss",
    "start": "927519",
    "end": "928320"
  },
  {
    "text": "and we divided this problem from two",
    "start": "928320",
    "end": "930720"
  },
  {
    "text": "perspectives",
    "start": "930720",
    "end": "932160"
  },
  {
    "text": "the databases in the application",
    "start": "932160",
    "end": "935759"
  },
  {
    "text": "and we ensure that both correctness and",
    "start": "935759",
    "end": "938880"
  },
  {
    "text": "scale",
    "start": "938880",
    "end": "939519"
  },
  {
    "text": "was correct from these two perspectives",
    "start": "939519",
    "end": "943360"
  },
  {
    "text": "if these systems were isolated",
    "start": "943360",
    "end": "947120"
  },
  {
    "text": "and in the vacuum the problem would have",
    "start": "947120",
    "end": "949040"
  },
  {
    "text": "been easy we just take each table",
    "start": "949040",
    "end": "951279"
  },
  {
    "text": "on the source and we compare it against",
    "start": "951279",
    "end": "953759"
  },
  {
    "text": "each table and destination and if",
    "start": "953759",
    "end": "955519"
  },
  {
    "text": "something doesn't match something is",
    "start": "955519",
    "end": "957360"
  },
  {
    "text": "failing however the challenge",
    "start": "957360",
    "end": "959519"
  },
  {
    "text": "is that these systems were taking rights",
    "start": "959519",
    "end": "962079"
  },
  {
    "text": "so this was not",
    "start": "962079",
    "end": "962880"
  },
  {
    "text": "an easy task and we were able to find",
    "start": "962880",
    "end": "966160"
  },
  {
    "text": "a solution that it's actually",
    "start": "966160",
    "end": "969680"
  },
  {
    "text": "quite simple the only thing is that",
    "start": "969680",
    "end": "973440"
  },
  {
    "text": "the systems are taking traffic as i",
    "start": "973440",
    "end": "975199"
  },
  {
    "text": "mentioned before but",
    "start": "975199",
    "end": "977040"
  },
  {
    "text": "the idea is that we have a consistent",
    "start": "977040",
    "end": "978959"
  },
  {
    "text": "snapshot between the two databases",
    "start": "978959",
    "end": "982320"
  },
  {
    "text": "and the way that we did this is that we",
    "start": "982320",
    "end": "984959"
  },
  {
    "text": "start by",
    "start": "984959",
    "end": "986000"
  },
  {
    "text": "stopping b replication so we know that",
    "start": "986000",
    "end": "988800"
  },
  {
    "text": "no data",
    "start": "988800",
    "end": "989519"
  },
  {
    "text": "is flowing into the destination system",
    "start": "989519",
    "end": "996480"
  },
  {
    "text": "then we issue a query",
    "start": "996480",
    "end": "999519"
  },
  {
    "text": "to lock a table on the source",
    "start": "999519",
    "end": "1002560"
  },
  {
    "text": "database we then also",
    "start": "1002560",
    "end": "1005839"
  },
  {
    "text": "select everything from a table in a",
    "start": "1005839",
    "end": "1008480"
  },
  {
    "text": "streaming fashion",
    "start": "1008480",
    "end": "1010000"
  },
  {
    "text": "we record the wind low position at that",
    "start": "1010000",
    "end": "1011920"
  },
  {
    "text": "point and then we unlock the table",
    "start": "1011920",
    "end": "1014880"
  },
  {
    "text": "and this operation is really fast",
    "start": "1014880",
    "end": "1016399"
  },
  {
    "text": "because we only lock the table",
    "start": "1016399",
    "end": "1018480"
  },
  {
    "text": "from the moment that we issue the select",
    "start": "1018480",
    "end": "1022959"
  },
  {
    "text": "and then as soon as i is start streaming",
    "start": "1022959",
    "end": "1026319"
  },
  {
    "text": "like record the position and unlock the",
    "start": "1026319",
    "end": "1028400"
  },
  {
    "text": "table",
    "start": "1028400",
    "end": "1029678"
  },
  {
    "text": "at this point we know that we have a",
    "start": "1029679",
    "end": "1032798"
  },
  {
    "text": "read that is streaming from the",
    "start": "1032799",
    "end": "1035199"
  },
  {
    "text": "source from a point in time now we need",
    "start": "1035199",
    "end": "1038400"
  },
  {
    "text": "to make sure",
    "start": "1038400",
    "end": "1039600"
  },
  {
    "text": "that we can read from that exact same",
    "start": "1039600",
    "end": "1042240"
  },
  {
    "text": "point",
    "start": "1042240",
    "end": "1043199"
  },
  {
    "text": "on the destination the way that we do",
    "start": "1043199",
    "end": "1045839"
  },
  {
    "text": "that",
    "start": "1045839",
    "end": "1046400"
  },
  {
    "text": "is that we start with replication and we",
    "start": "1046400",
    "end": "1048880"
  },
  {
    "text": "stop it",
    "start": "1048880",
    "end": "1049919"
  },
  {
    "text": "at the position alpha that we recorded",
    "start": "1049919",
    "end": "1052720"
  },
  {
    "text": "earlier",
    "start": "1052720",
    "end": "1053600"
  },
  {
    "text": "and because we lock the table when we",
    "start": "1053600",
    "end": "1055280"
  },
  {
    "text": "issue the select",
    "start": "1055280",
    "end": "1057039"
  },
  {
    "text": "on the source we know if that we issue a",
    "start": "1057039",
    "end": "1060320"
  },
  {
    "text": "select",
    "start": "1060320",
    "end": "1061200"
  },
  {
    "text": "at this time on the destination they",
    "start": "1061200",
    "end": "1063679"
  },
  {
    "text": "will be on the exact same position and",
    "start": "1063679",
    "end": "1066080"
  },
  {
    "text": "no gripes were",
    "start": "1066080",
    "end": "1067520"
  },
  {
    "text": "in between these two moments that was",
    "start": "1067520",
    "end": "1070640"
  },
  {
    "text": "actually quite it",
    "start": "1070640",
    "end": "1072000"
  },
  {
    "text": "we can start with replication again we",
    "start": "1072000",
    "end": "1075840"
  },
  {
    "text": "start comparing the data from the two",
    "start": "1075840",
    "end": "1077600"
  },
  {
    "text": "streams that we have from the",
    "start": "1077600",
    "end": "1079200"
  },
  {
    "text": "source and destination once that compare",
    "start": "1079200",
    "end": "1081520"
  },
  {
    "text": "is done we can",
    "start": "1081520",
    "end": "1082720"
  },
  {
    "text": "repeat this process for each table on",
    "start": "1082720",
    "end": "1085919"
  },
  {
    "text": "the databases the validation of the",
    "start": "1085919",
    "end": "1088640"
  },
  {
    "text": "databases",
    "start": "1088640",
    "end": "1089520"
  },
  {
    "text": "is assuring us that the data store are",
    "start": "1089520",
    "end": "1091679"
  },
  {
    "text": "in sync till a specific point in time",
    "start": "1091679",
    "end": "1094559"
  },
  {
    "text": "but there is still a validation that we",
    "start": "1094559",
    "end": "1096320"
  },
  {
    "text": "need to do in order to know if this is",
    "start": "1096320",
    "end": "1098559"
  },
  {
    "text": "also valid from the application",
    "start": "1098559",
    "end": "1100000"
  },
  {
    "text": "perspective",
    "start": "1100000",
    "end": "1101360"
  },
  {
    "text": "is the data matching also there also",
    "start": "1101360",
    "end": "1104480"
  },
  {
    "text": "what about real-time traffic",
    "start": "1104480",
    "end": "1108320"
  },
  {
    "text": "we divided the validation for the",
    "start": "1108320",
    "end": "1110240"
  },
  {
    "text": "application side",
    "start": "1110240",
    "end": "1111440"
  },
  {
    "text": "in two meta step scale and correctness",
    "start": "1111440",
    "end": "1115360"
  },
  {
    "text": "in the first we validated that the",
    "start": "1115360",
    "end": "1117360"
  },
  {
    "text": "expected performance regressions",
    "start": "1117360",
    "end": "1119440"
  },
  {
    "text": "fit within unexpected bound in our case",
    "start": "1119440",
    "end": "1122720"
  },
  {
    "text": "this was an additional run trip time",
    "start": "1122720",
    "end": "1124720"
  },
  {
    "text": "during grid operation",
    "start": "1124720",
    "end": "1126480"
  },
  {
    "text": "due to the extra network hop in vtgate",
    "start": "1126480",
    "end": "1129360"
  },
  {
    "text": "and to",
    "start": "1129360",
    "end": "1130080"
  },
  {
    "text": "run through time during write operation",
    "start": "1130080",
    "end": "1133520"
  },
  {
    "text": "that was due to the additional network",
    "start": "1133520",
    "end": "1135280"
  },
  {
    "text": "hub for vtgate",
    "start": "1135280",
    "end": "1136559"
  },
  {
    "text": "and the additional run trip time due to",
    "start": "1136559",
    "end": "1139360"
  },
  {
    "text": "the semi-synchronous ack",
    "start": "1139360",
    "end": "1141039"
  },
  {
    "text": "needed for mysql replication this",
    "start": "1141039",
    "end": "1144160"
  },
  {
    "text": "lowdown was upsetable by the application",
    "start": "1144160",
    "end": "1146799"
  },
  {
    "text": "and it wasn't noticeable in the overall",
    "start": "1146799",
    "end": "1149120"
  },
  {
    "text": "system performance",
    "start": "1149120",
    "end": "1151440"
  },
  {
    "text": "in the correctness phase we also",
    "start": "1151440",
    "end": "1153360"
  },
  {
    "text": "validated that there were no query",
    "start": "1153360",
    "end": "1155520"
  },
  {
    "text": "regression from a syntax perspective",
    "start": "1155520",
    "end": "1158240"
  },
  {
    "text": "due to the query rewrite engine in the",
    "start": "1158240",
    "end": "1160160"
  },
  {
    "text": "test and also that the query results",
    "start": "1160160",
    "end": "1162960"
  },
  {
    "text": "were matching between the legacy systems",
    "start": "1162960",
    "end": "1165280"
  },
  {
    "text": "and b-tests",
    "start": "1165280",
    "end": "1167919"
  },
  {
    "text": "to perform the validation we built a",
    "start": "1168320",
    "end": "1170559"
  },
  {
    "text": "framework by extending our database",
    "start": "1170559",
    "end": "1172799"
  },
  {
    "text": "library",
    "start": "1172799",
    "end": "1173520"
  },
  {
    "text": "to execute and evaluate query results",
    "start": "1173520",
    "end": "1176480"
  },
  {
    "text": "against the two systems",
    "start": "1176480",
    "end": "1178640"
  },
  {
    "text": "as mentioned before we were interested",
    "start": "1178640",
    "end": "1181360"
  },
  {
    "text": "about",
    "start": "1181360",
    "end": "1181919"
  },
  {
    "text": "both performance and result correctness",
    "start": "1181919",
    "end": "1185679"
  },
  {
    "text": "the framework supported two main",
    "start": "1185679",
    "end": "1188000"
  },
  {
    "text": "operation modes",
    "start": "1188000",
    "end": "1189600"
  },
  {
    "text": "dark reeds and dark rights",
    "start": "1189600",
    "end": "1192640"
  },
  {
    "text": "in the first only reads operation when",
    "start": "1192640",
    "end": "1195360"
  },
  {
    "text": "sended evaluated to both system",
    "start": "1195360",
    "end": "1197760"
  },
  {
    "text": "well for the latter we were sending only",
    "start": "1197760",
    "end": "1200320"
  },
  {
    "text": "right workloads",
    "start": "1200320",
    "end": "1202720"
  },
  {
    "text": "we also turned it on both mode at the",
    "start": "1202720",
    "end": "1204880"
  },
  {
    "text": "same time to evaluate scale",
    "start": "1204880",
    "end": "1207360"
  },
  {
    "text": "when running with 100 of the expected",
    "start": "1207360",
    "end": "1210000"
  },
  {
    "text": "workload",
    "start": "1210000",
    "end": "1212400"
  },
  {
    "text": "here is a visualization of a query",
    "start": "1212400",
    "end": "1214720"
  },
  {
    "text": "rooted via the dark read path",
    "start": "1214720",
    "end": "1217679"
  },
  {
    "text": "once our main client webapp hits",
    "start": "1217679",
    "end": "1220720"
  },
  {
    "text": "libdb we leverage hhvm asynchronous",
    "start": "1220720",
    "end": "1224240"
  },
  {
    "text": "functionalities",
    "start": "1224240",
    "end": "1225360"
  },
  {
    "text": "to issue the same request to both",
    "start": "1225360",
    "end": "1227760"
  },
  {
    "text": "datastore",
    "start": "1227760",
    "end": "1229440"
  },
  {
    "text": "we then wait to receive the results",
    "start": "1229440",
    "end": "1231679"
  },
  {
    "text": "evaluate the latencies and then discard",
    "start": "1231679",
    "end": "1234000"
  },
  {
    "text": "the result from vts",
    "start": "1234000",
    "end": "1236000"
  },
  {
    "text": "while serving back to our application",
    "start": "1236000",
    "end": "1238159"
  },
  {
    "text": "the response from the legacy system",
    "start": "1238159",
    "end": "1242000"
  },
  {
    "text": "the majority of query results were",
    "start": "1242240",
    "end": "1244480"
  },
  {
    "text": "matching",
    "start": "1244480",
    "end": "1245520"
  },
  {
    "text": "but we had to manually investigate some",
    "start": "1245520",
    "end": "1247679"
  },
  {
    "text": "outlier",
    "start": "1247679",
    "end": "1249200"
  },
  {
    "text": "as the result set wasn't huge we used a",
    "start": "1249200",
    "end": "1252720"
  },
  {
    "text": "simple spreadsheet",
    "start": "1252720",
    "end": "1253919"
  },
  {
    "text": "to coordinate the investigation of those",
    "start": "1253919",
    "end": "1256640"
  },
  {
    "text": "between team members",
    "start": "1256640",
    "end": "1259840"
  },
  {
    "text": "the validation phase run for over two",
    "start": "1260320",
    "end": "1262880"
  },
  {
    "text": "months",
    "start": "1262880",
    "end": "1263679"
  },
  {
    "text": "and we collected different performance",
    "start": "1263679",
    "end": "1265520"
  },
  {
    "text": "regression for all queries",
    "start": "1265520",
    "end": "1268159"
  },
  {
    "text": "we then analyzed every single issue and",
    "start": "1268159",
    "end": "1271120"
  },
  {
    "text": "the majority of error",
    "start": "1271120",
    "end": "1272400"
  },
  {
    "text": "were driven by changes in order",
    "start": "1272400",
    "end": "1274400"
  },
  {
    "text": "preference in my sequel",
    "start": "1274400",
    "end": "1276159"
  },
  {
    "text": "and places where the application",
    "start": "1276159",
    "end": "1278080"
  },
  {
    "text": "expected read after bright semantic",
    "start": "1278080",
    "end": "1281679"
  },
  {
    "text": "it's worth mentioning that we got to",
    "start": "1281679",
    "end": "1283520"
  },
  {
    "text": "this phase within the first",
    "start": "1283520",
    "end": "1285280"
  },
  {
    "text": "four months of the project prototyping",
    "start": "1285280",
    "end": "1288320"
  },
  {
    "text": "fast",
    "start": "1288320",
    "end": "1288799"
  },
  {
    "text": "and having results quickly help us a lot",
    "start": "1288799",
    "end": "1291440"
  },
  {
    "text": "to iterate",
    "start": "1291440",
    "end": "1292400"
  },
  {
    "text": "on the overall design fortunately we",
    "start": "1292400",
    "end": "1295360"
  },
  {
    "text": "didn't have to change",
    "start": "1295360",
    "end": "1296559"
  },
  {
    "text": "any of the core assumption we made but",
    "start": "1296559",
    "end": "1298799"
  },
  {
    "text": "having early feedback",
    "start": "1298799",
    "end": "1300159"
  },
  {
    "text": "especially for a complex project like",
    "start": "1300159",
    "end": "1302000"
  },
  {
    "text": "this one was very important",
    "start": "1302000",
    "end": "1304000"
  },
  {
    "text": "and assure us we were going in the right",
    "start": "1304000",
    "end": "1306080"
  },
  {
    "text": "direction",
    "start": "1306080",
    "end": "1307760"
  },
  {
    "text": "once we validated every single issue",
    "start": "1307760",
    "end": "1310799"
  },
  {
    "text": "we concluded it was safe to proceed",
    "start": "1310799",
    "end": "1314960"
  },
  {
    "text": "let's now take a look about how the aqua",
    "start": "1315760",
    "end": "1317919"
  },
  {
    "text": "migration procedure works",
    "start": "1317919",
    "end": "1320320"
  },
  {
    "text": "here is the view of a single shard in",
    "start": "1320320",
    "end": "1322400"
  },
  {
    "text": "pre-migration state",
    "start": "1322400",
    "end": "1324000"
  },
  {
    "text": "where the destination starting with",
    "start": "1324000",
    "end": "1325600"
  },
  {
    "text": "tests has been already provisioned",
    "start": "1325600",
    "end": "1328240"
  },
  {
    "text": "the verification stream is configured",
    "start": "1328240",
    "end": "1330640"
  },
  {
    "text": "and the validation step has verified",
    "start": "1330640",
    "end": "1333120"
  },
  {
    "text": "that both data store are in sync",
    "start": "1333120",
    "end": "1336640"
  },
  {
    "text": "from the application perspective nothing",
    "start": "1336640",
    "end": "1338720"
  },
  {
    "text": "has changed",
    "start": "1338720",
    "end": "1339840"
  },
  {
    "text": "and the only overhead we introduced to",
    "start": "1339840",
    "end": "1342159"
  },
  {
    "text": "the system",
    "start": "1342159",
    "end": "1343120"
  },
  {
    "text": "is an additional replication stream from",
    "start": "1343120",
    "end": "1345520"
  },
  {
    "text": "a legacy sharp primary",
    "start": "1345520",
    "end": "1346880"
  },
  {
    "text": "to the test",
    "start": "1346880",
    "end": "1349520"
  },
  {
    "text": "now that we know that validation passed",
    "start": "1350000",
    "end": "1352320"
  },
  {
    "text": "correctly",
    "start": "1352320",
    "end": "1353280"
  },
  {
    "text": "we are ready to migrate our shard we",
    "start": "1353280",
    "end": "1356159"
  },
  {
    "text": "start by pointing libdb",
    "start": "1356159",
    "end": "1358240"
  },
  {
    "text": "to send all traffic to a single legacy",
    "start": "1358240",
    "end": "1361120"
  },
  {
    "text": "shard host",
    "start": "1361120",
    "end": "1362240"
  },
  {
    "text": "and we then wait till all the",
    "start": "1362240",
    "end": "1364080"
  },
  {
    "text": "transactions from the legacy share host",
    "start": "1364080",
    "end": "1366320"
  },
  {
    "text": "on the left are replicated to the one on",
    "start": "1366320",
    "end": "1368720"
  },
  {
    "text": "the right",
    "start": "1368720",
    "end": "1370240"
  },
  {
    "text": "we now have reached what is probably the",
    "start": "1370240",
    "end": "1372480"
  },
  {
    "text": "most important moment of the whole",
    "start": "1372480",
    "end": "1374320"
  },
  {
    "text": "migration",
    "start": "1374320",
    "end": "1375520"
  },
  {
    "text": "as in the next step we reach the only no",
    "start": "1375520",
    "end": "1378640"
  },
  {
    "text": "returning point of the procedures",
    "start": "1378640",
    "end": "1382080"
  },
  {
    "text": "due to its importance before moving",
    "start": "1382080",
    "end": "1384320"
  },
  {
    "text": "forward",
    "start": "1384320",
    "end": "1385200"
  },
  {
    "text": "we needed to validate that all the",
    "start": "1385200",
    "end": "1387280"
  },
  {
    "text": "metrics were nominal",
    "start": "1387280",
    "end": "1388880"
  },
  {
    "text": "and the two system were still in sync",
    "start": "1388880",
    "end": "1392960"
  },
  {
    "text": "once we validated that all metrics are",
    "start": "1393039",
    "end": "1395360"
  },
  {
    "text": "okay",
    "start": "1395360",
    "end": "1396320"
  },
  {
    "text": "we toggle leap db through root traffic",
    "start": "1396320",
    "end": "1398559"
  },
  {
    "text": "to the new system",
    "start": "1398559",
    "end": "1400000"
  },
  {
    "text": "making v tests the only authoritative",
    "start": "1400000",
    "end": "1402559"
  },
  {
    "text": "source for that specific chart",
    "start": "1402559",
    "end": "1405679"
  },
  {
    "text": "as this operation is not atomic few of",
    "start": "1405679",
    "end": "1408240"
  },
  {
    "text": "you might have already noticed",
    "start": "1408240",
    "end": "1410080"
  },
  {
    "text": "that there might be a race between when",
    "start": "1410080",
    "end": "1412159"
  },
  {
    "text": "we execute a queering legacy",
    "start": "1412159",
    "end": "1414640"
  },
  {
    "text": "when we then execute another one in the",
    "start": "1414640",
    "end": "1416960"
  },
  {
    "text": "test",
    "start": "1416960",
    "end": "1417919"
  },
  {
    "text": "involving the same rows we consider",
    "start": "1417919",
    "end": "1420960"
  },
  {
    "text": "this serialization issue but for the",
    "start": "1420960",
    "end": "1423440"
  },
  {
    "text": "test and simulation that we run",
    "start": "1423440",
    "end": "1425679"
  },
  {
    "text": "we validated it couldn't create issue in",
    "start": "1425679",
    "end": "1428159"
  },
  {
    "text": "our workload and product",
    "start": "1428159",
    "end": "1430400"
  },
  {
    "text": "especially as the time frame of this",
    "start": "1430400",
    "end": "1432240"
  },
  {
    "text": "phrase was in the order of millisecond",
    "start": "1432240",
    "end": "1436240"
  },
  {
    "text": "now that we test is the authoritative",
    "start": "1436240",
    "end": "1438400"
  },
  {
    "text": "source for our application traffic",
    "start": "1438400",
    "end": "1440880"
  },
  {
    "text": "we only need to make sure that all the",
    "start": "1440880",
    "end": "1443679"
  },
  {
    "text": "transaction from the legacy shard system",
    "start": "1443679",
    "end": "1445919"
  },
  {
    "text": "made to the new data store once we",
    "start": "1445919",
    "end": "1448720"
  },
  {
    "text": "verified that",
    "start": "1448720",
    "end": "1449840"
  },
  {
    "text": "we can stop the veer application stream",
    "start": "1449840",
    "end": "1451840"
  },
  {
    "text": "in preparation of decommissioning",
    "start": "1451840",
    "end": "1453679"
  },
  {
    "text": "the old legacy shards",
    "start": "1453679",
    "end": "1456880"
  },
  {
    "text": "as the old system is not serving any",
    "start": "1456880",
    "end": "1459120"
  },
  {
    "text": "more traffic",
    "start": "1459120",
    "end": "1460159"
  },
  {
    "text": "we can take one final backup and then",
    "start": "1460159",
    "end": "1462799"
  },
  {
    "text": "decommission it entirely",
    "start": "1462799",
    "end": "1465120"
  },
  {
    "text": "the legacy shard is now a thing from the",
    "start": "1465120",
    "end": "1467600"
  },
  {
    "text": "past",
    "start": "1467600",
    "end": "1469919"
  },
  {
    "text": "we validated that the core idea is",
    "start": "1470880",
    "end": "1472880"
  },
  {
    "text": "working",
    "start": "1472880",
    "end": "1474000"
  },
  {
    "text": "now we only have to repeat this process",
    "start": "1474000",
    "end": "1476720"
  },
  {
    "text": "more than a thousand times",
    "start": "1476720",
    "end": "1478320"
  },
  {
    "text": "with no error and zero down time",
    "start": "1478320",
    "end": "1482240"
  },
  {
    "text": "we now have another task build an",
    "start": "1482240",
    "end": "1484480"
  },
  {
    "text": "automation to make it happening",
    "start": "1484480",
    "end": "1486960"
  },
  {
    "text": "when we started this task we decided to",
    "start": "1486960",
    "end": "1490080"
  },
  {
    "text": "simply build an automation",
    "start": "1490080",
    "end": "1491840"
  },
  {
    "text": "to execute the v4 migration procedure",
    "start": "1491840",
    "end": "1494480"
  },
  {
    "text": "that is",
    "start": "1494480",
    "end": "1495120"
  },
  {
    "text": "repeatable and safe",
    "start": "1495120",
    "end": "1498640"
  },
  {
    "text": "due to the constraint of the overall",
    "start": "1499200",
    "end": "1501200"
  },
  {
    "text": "project we didn't have much time",
    "start": "1501200",
    "end": "1503440"
  },
  {
    "text": "to develop a new solution so we tried to",
    "start": "1503440",
    "end": "1506159"
  },
  {
    "text": "reuse as many components as we could",
    "start": "1506159",
    "end": "1509840"
  },
  {
    "text": "we built the automation using python and",
    "start": "1509840",
    "end": "1512400"
  },
  {
    "text": "by leveraging our",
    "start": "1512400",
    "end": "1513679"
  },
  {
    "text": "internal library zlac ops zlac ops",
    "start": "1513679",
    "end": "1517360"
  },
  {
    "text": "offers several modules and",
    "start": "1517360",
    "end": "1519120"
  },
  {
    "text": "functionalities to interact with",
    "start": "1519120",
    "end": "1521120"
  },
  {
    "text": "internal systems",
    "start": "1521120",
    "end": "1522240"
  },
  {
    "text": "lack like monitoring service discovery",
    "start": "1522240",
    "end": "1525200"
  },
  {
    "text": "provisioning system",
    "start": "1525200",
    "end": "1526480"
  },
  {
    "text": "and so on it's now time to build",
    "start": "1526480",
    "end": "1530559"
  },
  {
    "text": "but how can you make sure you're going",
    "start": "1530559",
    "end": "1532400"
  },
  {
    "text": "to succeed",
    "start": "1532400",
    "end": "1534240"
  },
  {
    "text": "we try to approach the problem with a",
    "start": "1534240",
    "end": "1536400"
  },
  {
    "text": "very defensive attitude",
    "start": "1536400",
    "end": "1538559"
  },
  {
    "text": "we decided to build an automation as a",
    "start": "1538559",
    "end": "1541520"
  },
  {
    "text": "finite",
    "start": "1541520",
    "end": "1542000"
  },
  {
    "text": "state machine made by several idenpotent",
    "start": "1542000",
    "end": "1545440"
  },
  {
    "text": "step",
    "start": "1545440",
    "end": "1547200"
  },
  {
    "text": "a nice property of a state machine is",
    "start": "1547200",
    "end": "1549600"
  },
  {
    "text": "that its component",
    "start": "1549600",
    "end": "1550799"
  },
  {
    "text": "are predictable based on the current",
    "start": "1550799",
    "end": "1553440"
  },
  {
    "text": "state and an input",
    "start": "1553440",
    "end": "1554880"
  },
  {
    "text": "machine performs state transition and",
    "start": "1554880",
    "end": "1557200"
  },
  {
    "text": "produce an",
    "start": "1557200",
    "end": "1558000"
  },
  {
    "text": "output this helps us to implement",
    "start": "1558000",
    "end": "1561440"
  },
  {
    "text": "very strict boundaries and allow only",
    "start": "1561440",
    "end": "1564159"
  },
  {
    "text": "the action needed for each step",
    "start": "1564159",
    "end": "1567279"
  },
  {
    "text": "making the whole development faster",
    "start": "1567279",
    "end": "1569679"
  },
  {
    "text": "easier and safer",
    "start": "1569679",
    "end": "1572880"
  },
  {
    "text": "we also made sure that every step of the",
    "start": "1572880",
    "end": "1575279"
  },
  {
    "text": "system machine",
    "start": "1575279",
    "end": "1576400"
  },
  {
    "text": "was also safe to be rerun multiple times",
    "start": "1576400",
    "end": "1579520"
  },
  {
    "text": "this was unfortunately a more time",
    "start": "1579520",
    "end": "1581279"
  },
  {
    "text": "consuming process as are keeping this",
    "start": "1581279",
    "end": "1583200"
  },
  {
    "text": "property in distributed system it's",
    "start": "1583200",
    "end": "1585039"
  },
  {
    "text": "usually not very straightforward",
    "start": "1585039",
    "end": "1587360"
  },
  {
    "text": "fortunately this investment paid off",
    "start": "1587360",
    "end": "1589679"
  },
  {
    "text": "quite immediately",
    "start": "1589679",
    "end": "1590799"
  },
  {
    "text": "as it helped us to build confidence in",
    "start": "1590799",
    "end": "1592880"
  },
  {
    "text": "the tool as well as allowing robots and",
    "start": "1592880",
    "end": "1595679"
  },
  {
    "text": "humans",
    "start": "1595679",
    "end": "1596240"
  },
  {
    "text": "to recover from transient issue during",
    "start": "1596240",
    "end": "1598559"
  },
  {
    "text": "the execution",
    "start": "1598559",
    "end": "1601440"
  },
  {
    "text": "we briefly describe state machine",
    "start": "1601440",
    "end": "1603520"
  },
  {
    "text": "properties and idempotent",
    "start": "1603520",
    "end": "1605919"
  },
  {
    "text": "as very valuable characteristic for our",
    "start": "1605919",
    "end": "1608159"
  },
  {
    "text": "automation",
    "start": "1608159",
    "end": "1609039"
  },
  {
    "text": "but are those enough to achieve our",
    "start": "1609039",
    "end": "1611120"
  },
  {
    "text": "strict requirements",
    "start": "1611120",
    "end": "1612960"
  },
  {
    "text": "maybe in our case we also implemented",
    "start": "1612960",
    "end": "1616480"
  },
  {
    "text": "some additional safety guardrails",
    "start": "1616480",
    "end": "1618400"
  },
  {
    "text": "against other automation concurring for",
    "start": "1618400",
    "end": "1620880"
  },
  {
    "text": "shared resources",
    "start": "1620880",
    "end": "1622159"
  },
  {
    "text": "like schema changes backup shar split",
    "start": "1622159",
    "end": "1625039"
  },
  {
    "text": "but as well as human error",
    "start": "1625039",
    "end": "1628240"
  },
  {
    "text": "actually the majority of safety guard",
    "start": "1628240",
    "end": "1630400"
  },
  {
    "text": "rails were triggered by human error and",
    "start": "1630400",
    "end": "1632880"
  },
  {
    "text": "not",
    "start": "1632880",
    "end": "1633200"
  },
  {
    "text": "other automation",
    "start": "1633200",
    "end": "1636080"
  },
  {
    "text": "let's now close with some final remark",
    "start": "1637120",
    "end": "1641520"
  },
  {
    "text": "this project was designed built and",
    "start": "1641520",
    "end": "1643840"
  },
  {
    "text": "executed by a team of four engineers in",
    "start": "1643840",
    "end": "1646559"
  },
  {
    "text": "a time frame of around a year",
    "start": "1646559",
    "end": "1649200"
  },
  {
    "text": "we calculated that by following the",
    "start": "1649200",
    "end": "1650960"
  },
  {
    "text": "legacy migration path",
    "start": "1650960",
    "end": "1652559"
  },
  {
    "text": "it would have took like more than 70",
    "start": "1652559",
    "end": "1654880"
  },
  {
    "text": "engineers to deliver the same results in",
    "start": "1654880",
    "end": "1657279"
  },
  {
    "text": "a similar time frame",
    "start": "1657279",
    "end": "1660080"
  },
  {
    "text": "equally important this migration was",
    "start": "1660080",
    "end": "1662240"
  },
  {
    "text": "completely transparent to our",
    "start": "1662240",
    "end": "1664000"
  },
  {
    "text": "application engineer",
    "start": "1664000",
    "end": "1665440"
  },
  {
    "text": "as well as end user",
    "start": "1665440",
    "end": "1669600"
  },
  {
    "text": "we were able to leverage and modify for",
    "start": "1669600",
    "end": "1672240"
  },
  {
    "text": "our needs",
    "start": "1672240",
    "end": "1673200"
  },
  {
    "text": "some v-test functionalities to do the",
    "start": "1673200",
    "end": "1675360"
  },
  {
    "text": "most delicate part of this project",
    "start": "1675360",
    "end": "1678000"
  },
  {
    "text": "keep the data stores in sync and verify",
    "start": "1678000",
    "end": "1680320"
  },
  {
    "text": "that data was not left behind",
    "start": "1680320",
    "end": "1683360"
  },
  {
    "text": "we move hundreds of terabytes of data",
    "start": "1683360",
    "end": "1686159"
  },
  {
    "text": "with zero downtime",
    "start": "1686159",
    "end": "1687520"
  },
  {
    "text": "and not a single outage today",
    "start": "1687520",
    "end": "1690880"
  },
  {
    "text": "99 percent of slack traffic is on the",
    "start": "1690880",
    "end": "1693919"
  },
  {
    "text": "test",
    "start": "1693919",
    "end": "1694720"
  },
  {
    "text": "and we expect to wrap up this migration",
    "start": "1694720",
    "end": "1697039"
  },
  {
    "text": "by the end of the year",
    "start": "1697039",
    "end": "1699200"
  },
  {
    "text": "here is the vitesse adoption as luck",
    "start": "1699200",
    "end": "1701360"
  },
  {
    "text": "before we started migrating shar via v4",
    "start": "1701360",
    "end": "1704640"
  },
  {
    "text": "the time frame of this graph is 2.5",
    "start": "1704640",
    "end": "1707279"
  },
  {
    "text": "years",
    "start": "1707279",
    "end": "1709120"
  },
  {
    "text": "here's the same view with six additional",
    "start": "1709120",
    "end": "1711840"
  },
  {
    "text": "months",
    "start": "1711840",
    "end": "1712960"
  },
  {
    "text": "starting from may 2020 we were able to",
    "start": "1712960",
    "end": "1716080"
  },
  {
    "text": "increase the adoption",
    "start": "1716080",
    "end": "1717360"
  },
  {
    "text": "by 30 percent in less than six months",
    "start": "1717360",
    "end": "1722080"
  },
  {
    "text": "as things never fully goes as expected",
    "start": "1722559",
    "end": "1725279"
  },
  {
    "text": "we had to face",
    "start": "1725279",
    "end": "1726240"
  },
  {
    "text": "some unexpected challenges while",
    "start": "1726240",
    "end": "1728240"
  },
  {
    "text": "preparing the migration of few",
    "start": "1728240",
    "end": "1730159"
  },
  {
    "text": "of our busiest charts we hit few",
    "start": "1730159",
    "end": "1733520"
  },
  {
    "text": "my sql 57 optimizer regression that",
    "start": "1733520",
    "end": "1736159"
  },
  {
    "text": "increased their latencies and we also",
    "start": "1736159",
    "end": "1738559"
  },
  {
    "text": "had to deal with the additional overhead",
    "start": "1738559",
    "end": "1740720"
  },
  {
    "text": "of vt tablet",
    "start": "1740720",
    "end": "1742080"
  },
  {
    "text": "and its golang garbage collection",
    "start": "1742080",
    "end": "1745679"
  },
  {
    "text": "breaking down the validation immigration",
    "start": "1745679",
    "end": "1747520"
  },
  {
    "text": "step was key for us",
    "start": "1747520",
    "end": "1749520"
  },
  {
    "text": "as well as iterate over the initial",
    "start": "1749520",
    "end": "1751840"
  },
  {
    "text": "design several times",
    "start": "1751840",
    "end": "1753600"
  },
  {
    "text": "by balancing speed execution time and",
    "start": "1753600",
    "end": "1756240"
  },
  {
    "text": "safety",
    "start": "1756240",
    "end": "1758000"
  },
  {
    "text": "was this a success we think it was",
    "start": "1758000",
    "end": "1761440"
  },
  {
    "text": "we accomplished everything that we said",
    "start": "1761440",
    "end": "1763279"
  },
  {
    "text": "we were going to do",
    "start": "1763279",
    "end": "1765039"
  },
  {
    "text": "thinks some hiccup in a project of this",
    "start": "1765039",
    "end": "1767120"
  },
  {
    "text": "size is normal",
    "start": "1767120",
    "end": "1769039"
  },
  {
    "text": "we consider pretty remarkable that the",
    "start": "1769039",
    "end": "1770960"
  },
  {
    "text": "project planning",
    "start": "1770960",
    "end": "1772080"
  },
  {
    "text": "building and execution was done within a",
    "start": "1772080",
    "end": "1774880"
  },
  {
    "text": "year",
    "start": "1774880",
    "end": "1776799"
  },
  {
    "text": "the current state is that 99 of",
    "start": "1776799",
    "end": "1779679"
  },
  {
    "text": "databases slack",
    "start": "1779679",
    "end": "1781039"
  },
  {
    "text": "are running on vts today could you",
    "start": "1781039",
    "end": "1783840"
  },
  {
    "text": "replicate this elsewhere",
    "start": "1783840",
    "end": "1785600"
  },
  {
    "text": "yes with few kavits if you want to know",
    "start": "1785600",
    "end": "1788720"
  },
  {
    "text": "more about vts",
    "start": "1788720",
    "end": "1790080"
  },
  {
    "text": "here's a link for a suggested session",
    "start": "1790080",
    "end": "1792240"
  },
  {
    "text": "from two of the corvitas maintainer",
    "start": "1792240",
    "end": "1795520"
  },
  {
    "text": "thank you very much for your time",
    "start": "1795520",
    "end": "1800320"
  }
]