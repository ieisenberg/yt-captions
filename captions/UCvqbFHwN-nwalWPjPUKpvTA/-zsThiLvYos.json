[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "hello everyone there we go we're on okay my name is Dan Burke and I'm here with",
    "start": "110",
    "end": "6870"
  },
  {
    "text": "Ron venom we are with IBM IBM cloud we're also members of the sto project",
    "start": "6870",
    "end": "16160"
  },
  {
    "text": "we're part of the steering committee as well as the TOC itself and what we want",
    "start": "16160",
    "end": "22170"
  },
  {
    "text": "to do is we want to take you through some information about sto and multi cluster service mesh patterns so this is",
    "start": "22170",
    "end": "29460"
  },
  {
    "text": "something that was introduced in the and the 1.1 release of sto and we're gonna",
    "start": "29460",
    "end": "34649"
  },
  {
    "text": "take you through some of those patterns and give you pros and cons of each one as well as describe a real-world",
    "start": "34649",
    "end": "42329"
  },
  {
    "text": "scenario in which we've got a set of customers or a customer that's looking",
    "start": "42329",
    "end": "47579"
  },
  {
    "text": "at adopting sto for their specific application in the cloud is that not",
    "start": "47579",
    "end": "56610"
  },
  {
    "text": "working okay you're clicking for me yeah Thank You mr. clicker okay first off how many",
    "start": "56610",
    "end": "64280"
  },
  {
    "start": "60000",
    "end": "60000"
  },
  {
    "text": "people are deploying clusters today kubernetes clusters every hand doesn't",
    "start": "64280",
    "end": "69560"
  },
  {
    "text": "go up all right that's awesome how many people have more than one cluster okay",
    "start": "69560",
    "end": "76940"
  },
  {
    "text": "everybody does because everybody does you have to have multiple clusters at",
    "start": "76940",
    "end": "82670"
  },
  {
    "text": "the very least you have multiple clusters for dev test and production right your CI CD process in the room",
    "start": "82670",
    "end": "89330"
  },
  {
    "text": "just before this was a panel about get ops you're not gonna deliver code directly to production without going through some",
    "start": "89330",
    "end": "95840"
  },
  {
    "text": "development and testing stage I don't know anyone running a production service that doesn't so you're gonna have",
    "start": "95840",
    "end": "101509"
  },
  {
    "text": "multiple clusters for that reason but you're also gonna have multiple clusters for other various reasons for example",
    "start": "101509",
    "end": "107330"
  },
  {
    "text": "you may have a performance requirement you have to run your compute close to your data so you want to have you want",
    "start": "107330",
    "end": "114289"
  },
  {
    "text": "to have your clusters close to your data you might need workload isolation so you might separate your workloads between",
    "start": "114289",
    "end": "120080"
  },
  {
    "text": "your clusters with network isolation compute isolation even access isolation",
    "start": "120080",
    "end": "125600"
  },
  {
    "text": "if you're in the room and you have to deal with compliance and auditability cost is another factor especially when",
    "start": "125600",
    "end": "132739"
  },
  {
    "text": "you're looking at dev and production you don't want to set up a massively large",
    "start": "132739",
    "end": "137959"
  },
  {
    "text": "production quality dev environment to have environments or should be a lot cheaper you want a lot more of them and",
    "start": "137959",
    "end": "145040"
  },
  {
    "text": "the products are generally more expensive so you're gonna have multiple clusters for that and then lastly your",
    "start": "145040",
    "end": "150860"
  },
  {
    "text": "failover and redundancy there there's gonna be a point at which things fail",
    "start": "150860",
    "end": "157459"
  },
  {
    "text": "but the service fails the environment fails the data center fails there's always certain levels of failure you got",
    "start": "157459",
    "end": "164690"
  },
  {
    "text": "to have multiple clusters for high availability and then of course if you ever have a disaster you've got to have",
    "start": "164690",
    "end": "170060"
  },
  {
    "text": "that dr site available to you so we all have multiple clusters and we have to deal with the nuances and the",
    "start": "170060",
    "end": "177079"
  },
  {
    "text": "interactions between these clusters so",
    "start": "177079",
    "end": "182090"
  },
  {
    "start": "181000",
    "end": "181000"
  },
  {
    "text": "if we look at beyond just the technical reasons there's a number of business reasons so I interact with a lot of customers",
    "start": "182090",
    "end": "188750"
  },
  {
    "text": "but whether its financial healthcare automotive you name it and they all come",
    "start": "188750",
    "end": "196480"
  },
  {
    "text": "at us with a number of requirements that they're trying to uphold one of the",
    "start": "196480",
    "end": "202330"
  },
  {
    "text": "things and many of them are here in the chart but really trying to get a secure workload running in the cloud and",
    "start": "202330",
    "end": "208150"
  },
  {
    "text": "they're looking to use kubernetes as a means to do that and a lot of that is how do I reduce the attack vector for",
    "start": "208150",
    "end": "214660"
  },
  {
    "text": "their business applications can kubernetes help me how many clusters am I going to need to do that how am I",
    "start": "214660",
    "end": "220090"
  },
  {
    "text": "going to control access for those clusters and control access not only of operators accessing it because I have to",
    "start": "220090",
    "end": "227410"
  },
  {
    "text": "audit it but I need to have complete control of all public traffic in and out of my cluster how do I do that how do I",
    "start": "227410",
    "end": "235330"
  },
  {
    "text": "do that effectively how do I audit all of that traffic so that I can be assured",
    "start": "235330",
    "end": "240430"
  },
  {
    "text": "that I can not only audit my operations team and provide that information but I",
    "start": "240430",
    "end": "245739"
  },
  {
    "text": "can also provide it to compliance officers at the time of an audit a compliance on it obviously connection",
    "start": "245739",
    "end": "253690"
  },
  {
    "text": "back to on-premises network that's always a key aspect if you're not born on the cloud which most of the customers",
    "start": "253690",
    "end": "261010"
  },
  {
    "text": "that we deal with are not born on the cloud many of them have workloads already on-premises and you want to be",
    "start": "261010",
    "end": "267039"
  },
  {
    "text": "able to connect back to those very securely and in controlled fashion and then another one is just secure",
    "start": "267039",
    "end": "273520"
  },
  {
    "text": "communication of your data data in transit both between clusters between services and within the cluster itself",
    "start": "273520",
    "end": "280900"
  },
  {
    "text": "pod to pod how am I going to ensure secure communication encrypted",
    "start": "280900",
    "end": "286270"
  },
  {
    "text": "communication between all my pods between every communication every client",
    "start": "286270",
    "end": "291370"
  },
  {
    "text": "every destination that I talk to so",
    "start": "291370",
    "end": "296770"
  },
  {
    "start": "296000",
    "end": "296000"
  },
  {
    "text": "let's take a look at a very very basic view of a problem or a situation that",
    "start": "296770",
    "end": "303700"
  },
  {
    "text": "we're looking at with a customer so they have a situation where they must control",
    "start": "303700",
    "end": "309729"
  },
  {
    "text": "client access into and out of the cluster but they they have very strict",
    "start": "309729",
    "end": "314910"
  },
  {
    "text": "requirements and in this requirement they have two separate clusters or a sets of",
    "start": "314910",
    "end": "321370"
  },
  {
    "text": "clusters so in this case we have a DM Z cluster as well as multiple back-office clusters and these back-office clusters",
    "start": "321370",
    "end": "328479"
  },
  {
    "text": "may be on Prem they may be out in the cloud that it doesn't matter but there's multiple of these back-office clusters",
    "start": "328479",
    "end": "334540"
  },
  {
    "text": "now I've indicated these pools and these pools are basically just a pool of worker nodes VMs bare-metal doesn't",
    "start": "334540",
    "end": "342280"
  },
  {
    "text": "matter but it's a set of worker nodes that have very specific use cases within this in this environment so I got edge",
    "start": "342280",
    "end": "349419"
  },
  {
    "text": "pools and private only pools and you can see those across both of the clusters now the interesting thing about this",
    "start": "349419",
    "end": "355539"
  },
  {
    "text": "architecture with kubernetes is that those edge pools are the only ones that",
    "start": "355539",
    "end": "360639"
  },
  {
    "text": "have access to a public network the others do not so the others have access",
    "start": "360639",
    "end": "368590"
  },
  {
    "text": "only to a private network and that's true of both the dmz cluster as well as",
    "start": "368590",
    "end": "373810"
  },
  {
    "text": "the back office clusters you'll notice the back office clusters have no public internet access at all right",
    "start": "373810",
    "end": "380260"
  },
  {
    "text": "there's no inward traffic coming in to that back office cluster and that was a key requirement of this customer is that",
    "start": "380260",
    "end": "387460"
  },
  {
    "text": "traffic from the public could not go into that cluster not only that public internet facing traffic cannot emanate",
    "start": "387460",
    "end": "393669"
  },
  {
    "text": "from that club those clusters either they all have to be controlled through the DMZ cluster so that's this is the",
    "start": "393669",
    "end": "401169"
  },
  {
    "text": "reference architecture that we set up and we're gonna go back through this as we go through this talk and reference",
    "start": "401169",
    "end": "407740"
  },
  {
    "start": "402000",
    "end": "402000"
  },
  {
    "text": "that again as you start looking at the various multi cluster multi cluster",
    "start": "407740",
    "end": "412780"
  },
  {
    "text": "service mesh patterns but I also wanted to call out a notion I said at the",
    "start": "412780",
    "end": "418210"
  },
  {
    "text": "beginning those back office clusters could be on Prem they could be out in the cloud and in an IBM cloud with our",
    "start": "418210",
    "end": "424720"
  },
  {
    "text": "kubernetes service we have the ability to create private clusters and then the case that we're working with the",
    "start": "424720",
    "end": "429729"
  },
  {
    "text": "customer they're going straight to the public cloud they want to be very strategic forward-looking and they want",
    "start": "429729",
    "end": "435039"
  },
  {
    "text": "to try to solve these problems in the public cloud and one of the key technologies is we're going to be",
    "start": "435039",
    "end": "441070"
  },
  {
    "text": "leveraging the notion of these private clusters that are available to us and the private cluster basically has a set",
    "start": "441070",
    "end": "447520"
  },
  {
    "text": "of worker nodes like we showed before that only a private network access but also the",
    "start": "447520",
    "end": "453300"
  },
  {
    "text": "master which is fully managed in this case but that master also does not have public facing internet access which",
    "start": "453300",
    "end": "461699"
  },
  {
    "text": "means you can't access the master or the workers through the public internet you have to go through another channel to",
    "start": "461699",
    "end": "468990"
  },
  {
    "text": "get access to them so how many people here have heard of this do is awesome",
    "start": "468990",
    "end": "477270"
  },
  {
    "text": "okay a fair number of you ok like I said at the beginning we work on the sto",
    "start": "477270",
    "end": "483419"
  },
  {
    "text": "project the service mesh when you start introducing cloud kubernetes and",
    "start": "483419",
    "end": "489810"
  },
  {
    "text": "especially all the requirements that i mentioned earlier you have to start looking at beyond just kubernetes it was",
    "start": "489810",
    "end": "496409"
  },
  {
    "text": "even stated at the beginning dan indicated at the beginning of the the talk in the keynote that for cloud",
    "start": "496409",
    "end": "502590"
  },
  {
    "text": "native it goes well beyond just kubernetes and we're at that point now your you need additional tools you need",
    "start": "502590",
    "end": "509610"
  },
  {
    "text": "additional capabilities beyond kubernetes and kubernetes provides a lot of value at the platform including both",
    "start": "509610",
    "end": "516268"
  },
  {
    "text": "the networking and network isolation security but there's things that it cannot do and it doesn't do today and",
    "start": "516269",
    "end": "522719"
  },
  {
    "text": "that's where sto and the service mesh comes in and sto provides basically for",
    "start": "522719",
    "end": "527760"
  },
  {
    "text": "me i've you sto as a programmable network is fundamentally the way i see",
    "start": "527760",
    "end": "533160"
  },
  {
    "text": "it with these key value propositions associated with it first of all the",
    "start": "533160",
    "end": "538410"
  },
  {
    "text": "ability to connect your services in a very efficient and flexible manner if",
    "start": "538410",
    "end": "544130"
  },
  {
    "text": "everybody's used kubernetes in here that's why we're all here load balancing and kubernetes is round-robin and that's",
    "start": "544130",
    "end": "550740"
  },
  {
    "text": "it you roll out a new version you do a rolling update you really don't have much control over how that rolling",
    "start": "550740",
    "end": "556410"
  },
  {
    "text": "updated and that load balancing takes place with this do you can do the connection and better load balancing",
    "start": "556410",
    "end": "563640"
  },
  {
    "text": "options with multiple versions of a service and you can do canary and a/b testing because you have greater",
    "start": "563640",
    "end": "569430"
  },
  {
    "text": "flexibility of routing between your services this teo is secure so built in",
    "start": "569430",
    "end": "575399"
  },
  {
    "text": "the sto is the ability to do mutual TLS we said at the beginning one of the customer requirement is to have end and secure communication",
    "start": "575399",
    "end": "582720"
  },
  {
    "text": "between your pods between all services both inside and outside your cluster sto",
    "start": "582720",
    "end": "588630"
  },
  {
    "text": "is definitely one of those technologies that you have to look at in order to achieve that goal because it provides",
    "start": "588630",
    "end": "594389"
  },
  {
    "text": "out-of-the-box secure mutual TLS communication between your pods as well as services outside",
    "start": "594389",
    "end": "600690"
  },
  {
    "text": "your cluster that it can all be and again it's programmed into the network not in your application",
    "start": "600690",
    "end": "606860"
  },
  {
    "text": "the observability once you have one cluster and multiple clusters 2 3 10 20",
    "start": "606860",
    "end": "615269"
  },
  {
    "text": "100 it becomes very difficult to understand what's going on across those",
    "start": "615269",
    "end": "620519"
  },
  {
    "text": "clusters you need a way to be able to observe and have visibility of the resources in those clusters and the",
    "start": "620519",
    "end": "627240"
  },
  {
    "text": "communication between those resources and sto with the service mesh built into",
    "start": "627240",
    "end": "632490"
  },
  {
    "text": "the networking provides that level of observability and lastly control and policy",
    "start": "632490",
    "end": "638399"
  },
  {
    "text": "enforcement again going back to core business requirements you have a number of policy enforcement's that must be",
    "start": "638399",
    "end": "645810"
  },
  {
    "text": "made during the communication flow within your mesh and you're gonna want to be able to control that not only",
    "start": "645810",
    "end": "651360"
  },
  {
    "text": "within individual clusters but you're gonna want to be able to program that across clusters as well services that",
    "start": "651360",
    "end": "657360"
  },
  {
    "text": "exist in multiple clusters in your production deployments so these are key capabilities that STO provides and now",
    "start": "657360",
    "end": "664709"
  },
  {
    "text": "what we're gonna do I'm going to switch it over to Rahm and he's gonna take you through the reference architecture for",
    "start": "664709",
    "end": "670199"
  },
  {
    "text": "ISTE oh and that as well as the three key patterns that we see for multi mesh",
    "start": "670199",
    "end": "675920"
  },
  {
    "text": "great ok so this is the history architecture diagram that probably many",
    "start": "675920",
    "end": "681930"
  },
  {
    "start": "679000",
    "end": "679000"
  },
  {
    "text": "of you have seen for those that need a quick refresher let me just kind of walk",
    "start": "681930",
    "end": "687029"
  },
  {
    "text": "through this a little bit and talk about some of the high-level components first imagine you know most of this is not",
    "start": "687029",
    "end": "692880"
  },
  {
    "text": "there and you just have those two services at the top and you don't have this do when service a wants to talk to",
    "start": "692880",
    "end": "697949"
  },
  {
    "text": "service B service a we'll just do a like a cube DNS lookup get the cluster IP address start talking to it which will",
    "start": "697949",
    "end": "704699"
  },
  {
    "text": "then forward to the to the pod IPs now if you want more visibility and",
    "start": "704699",
    "end": "710010"
  },
  {
    "text": "insights into what exactly happened with this communication you don't quite get out-of-the-box with kubernetes you don't",
    "start": "710010",
    "end": "715740"
  },
  {
    "text": "know if a is really a that's talking to B and B doesn't know who exactly is",
    "start": "715740",
    "end": "722490"
  },
  {
    "text": "talking to it so you don't have that you're not able to authenticate who is talking to who and you don't have that",
    "start": "722490",
    "end": "727589"
  },
  {
    "text": "control and prevent like men in the middle attacks for example so the way sto works is it injects envoy proxies",
    "start": "727589",
    "end": "735209"
  },
  {
    "text": "inside the pod running alongside your container so inside a pod now you have",
    "start": "735209",
    "end": "740279"
  },
  {
    "text": "if you only had one container before now you have two containers okay and the",
    "start": "740279",
    "end": "745620"
  },
  {
    "text": "component that the the pieces at the top is called sto like the the data plane",
    "start": "745620",
    "end": "750899"
  },
  {
    "text": "and that all the stuff on the bottom is a control plane so to control all of these Envoy proxies when you apply your",
    "start": "750899",
    "end": "758070"
  },
  {
    "text": "sto configuration just through a mo and the sto galley component will receive that yeah mordioux config validation",
    "start": "758070",
    "end": "763890"
  },
  {
    "text": "send it over to a co-pilot and sto pilot will take that translate it and send that config to each one of the necessary",
    "start": "763890",
    "end": "770000"
  },
  {
    "text": "on voice so what this gives you now is that once a wants to talk to B it's",
    "start": "770000",
    "end": "775050"
  },
  {
    "text": "still no changes in your application it still talks to be I'm using just the DNS",
    "start": "775050",
    "end": "780750"
  },
  {
    "text": "and then the DNS lookup happens and in this case it's geo is configured to",
    "start": "780750",
    "end": "786329"
  },
  {
    "text": "basically replace that cluster IP addresses and it will direct it to the",
    "start": "786329",
    "end": "791339"
  },
  {
    "text": "pod IP of service beat so there's this proxy going on on both sides so this",
    "start": "791339",
    "end": "796920"
  },
  {
    "text": "allows you to do things like routing based decisions you know have checks to",
    "start": "796920",
    "end": "803010"
  },
  {
    "text": "see if this communication is allowed and after this communication happens if all",
    "start": "803010",
    "end": "808079"
  },
  {
    "text": "the policies pass and it's able to do is communication it will then do an out-of-band communication back to the sto mixer",
    "start": "808079",
    "end": "815130"
  },
  {
    "text": "component to to tell it what exactly happened so that's what gives you that that telemetry type of information about",
    "start": "815130",
    "end": "821730"
  },
  {
    "text": "the service now the most important feature that that I talk to customers",
    "start": "821730",
    "end": "827910"
  },
  {
    "text": "about when they're adopting a CEO is not this like weight based routing canari deployments and things like that but",
    "start": "827910",
    "end": "834630"
  },
  {
    "text": "it's more the the mutual TLS aspects of it day one encryption from pot to pot",
    "start": "834630",
    "end": "839880"
  },
  {
    "text": "and to do that inside your micro service to handle the encryption to do the certificate management yourself adds a",
    "start": "839880",
    "end": "846089"
  },
  {
    "text": "lot of operational overhead your micro services and your cluster management sto does that for you so it's",
    "start": "846089",
    "end": "851610"
  },
  {
    "text": "a certificate authority it's able to generate certificates and roll it out to each one of the the envoys so that the",
    "start": "851610",
    "end": "857690"
  },
  {
    "text": "communication is now upgraded and encrypted and it happens kind of seamlessly out of the box okay so that's",
    "start": "857690",
    "end": "863850"
  },
  {
    "text": "kind of the sto architecture flow the one last piece is that little sidecar",
    "start": "863850",
    "end": "869879"
  },
  {
    "text": "injector on the bottom this proxy injection you can either do it manually with like when you do cube cuddle apply",
    "start": "869879",
    "end": "875790"
  },
  {
    "text": "you can wrap it with the Sto inject which will put that container config in next year your container config or you",
    "start": "875790",
    "end": "882720"
  },
  {
    "text": "can use the sidecar injector which will do it for you automatically don't forget about the gateways yeah well we'll",
    "start": "882720",
    "end": "889079"
  },
  {
    "text": "definitely cover the gateways in more detail but from this diagram its control controlling traffic that's coming into",
    "start": "889079",
    "end": "895319"
  },
  {
    "text": "your network and you can also control traffic that's going out of the network so this allows you not only control but",
    "start": "895319",
    "end": "901170"
  },
  {
    "text": "also to limit we type of information so you have more kind of restriction on that it's not sto and up untill OS to10",
    "start": "901170",
    "end": "910769"
  },
  {
    "start": "907000",
    "end": "907000"
  },
  {
    "text": "I think the main focus has been on single cluster no single mesh type of pattern and as the community starts",
    "start": "910769",
    "end": "918000"
  },
  {
    "text": "adopting this more we're now starting to tackle more complex scenarios and and",
    "start": "918000",
    "end": "923519"
  },
  {
    "text": "not really that complex because most of our customers are using multiple clusters so the next logical question",
    "start": "923519",
    "end": "929130"
  },
  {
    "text": "where after you adopt cluster sto for one cluster is going to be how do I adopt this for multiple clusters and",
    "start": "929130",
    "end": "936420"
  },
  {
    "text": "there's kind of three main patterns for for how you would do is deal with multi",
    "start": "936420",
    "end": "943259"
  },
  {
    "text": "class with multi clusters and kind of walk you through each one of them so this pattern is kind of the flat network",
    "start": "943259",
    "end": "950130"
  },
  {
    "text": "single Network single control plain flow where the cluster on the left is your",
    "start": "950130",
    "end": "955980"
  },
  {
    "text": "your main cluster and has the entire hto control plane installed onto it and sometimes this cluster is called the",
    "start": "955980",
    "end": "962220"
  },
  {
    "text": "local cluster and the docs cluster - are all your remote clusters and in this cluster there are no it's not a",
    "start": "962220",
    "end": "969480"
  },
  {
    "text": "full-blown sto install it's just the required pieces so in this case it's just Citadel and maybe also your sidecar",
    "start": "969480",
    "end": "975899"
  },
  {
    "text": "injector so when you deploy applications to it you get that it's do that envoy sidecar next to it",
    "start": "975899",
    "end": "981040"
  },
  {
    "text": "and to set this up there needs to be some config sharing that needs to go between the two for example cluster one",
    "start": "981040",
    "end": "988630"
  },
  {
    "text": "needs a secret to have access to the cube API of all your remote clusters and that's because there's only one pilot",
    "start": "988630",
    "end": "995890"
  },
  {
    "text": "and it and the sto control plane needs to know about all the different services that exist in all the other clusters and",
    "start": "995890",
    "end": "1002130"
  },
  {
    "text": "it does that by talking directly to the cube API and then querying for the services the second big but actually the",
    "start": "1002130",
    "end": "1009900"
  },
  {
    "text": "first big requirement for this setup is that is that shared Network and that means that the the pod IP ranges the pod",
    "start": "1009900",
    "end": "1018960"
  },
  {
    "text": "IP IP ranges and the cluster IP ranges they cannot overlap and not only can they not overlap they need to be able to",
    "start": "1018960",
    "end": "1025230"
  },
  {
    "text": "route from one another and that's because traffic is being routed directly from one cluster to another cluster",
    "start": "1025230",
    "end": "1031380"
  },
  {
    "text": "without gateways of any kind it's going direct communication it's going going back to the previous picture those envoy",
    "start": "1031380",
    "end": "1037829"
  },
  {
    "text": "side cars that do the client-side load balancing because of the the flat network here they can go directly",
    "start": "1037829",
    "end": "1042959"
  },
  {
    "text": "between the clusters and access the pods directly so let's if you've walked",
    "start": "1042959",
    "end": "1049500"
  },
  {
    "text": "through a flow let's say pod foo running in cluster one wants to talk to pod bar and cluster two again it will just do a",
    "start": "1049500",
    "end": "1056400"
  },
  {
    "text": "DNS lookup for a bar kubernetes will resolve it to a cluster IP and in this case envoy will basically intercept that",
    "start": "1056400",
    "end": "1063750"
  },
  {
    "text": "cluster IP to the pot IP of of where it knows that bar is running so in this",
    "start": "1063750",
    "end": "1069960"
  },
  {
    "text": "case it knows bar is running in cluster two we'll get the pod IP come back and then we'll configure envoy to direct",
    "start": "1069960",
    "end": "1075450"
  },
  {
    "text": "that traffic directly to do pot IP so that's kind of how that works it's",
    "start": "1075450",
    "end": "1080490"
  },
  {
    "text": "pretty straightforward to use but to actually set this up does require more and more of a complex setup and there's",
    "start": "1080490",
    "end": "1086100"
  },
  {
    "text": "a lot of moving pieces especially because if you think about things like telemetry this the Envoy on bar side now",
    "start": "1086100",
    "end": "1093690"
  },
  {
    "text": "needs to talk to back to the pilot on cluster one so there's a lot of communication going on back and forth",
    "start": "1093690",
    "end": "1098790"
  },
  {
    "text": "between the cluster so if your IPS are changing or or you know your secrets for",
    "start": "1098790",
    "end": "1104520"
  },
  {
    "text": "your cube API change there needs to be this like management plane to to handle",
    "start": "1104520",
    "end": "1110040"
  },
  {
    "text": "this so this is a good setup if you have a CI CD environment where you able to deploy these consistent",
    "start": "1110040",
    "end": "1115609"
  },
  {
    "text": "namespaces across the to ensure it's similar config is being pushed out and",
    "start": "1115609",
    "end": "1120950"
  },
  {
    "text": "the advantages of this scenario is well first of all the requirement if you do have a flat network so the disadvantage",
    "start": "1120950",
    "end": "1127789"
  },
  {
    "text": "of that would be well if it's not really good for isolation if you want network isolation between your two clusters well",
    "start": "1127789",
    "end": "1133429"
  },
  {
    "text": "this is not this is not gonna work because all they just basically one big cluster the I talked about the",
    "start": "1133429",
    "end": "1142460"
  },
  {
    "text": "disadvantage of going back and forth so it's kind of be chatty so it's pretty good if you want to have failover",
    "start": "1142460",
    "end": "1148700"
  },
  {
    "text": "scenarios where you have multiple clusters is living closely together anything I missed no I mean that the key thing there as",
    "start": "1148700",
    "end": "1156529"
  },
  {
    "text": "well as the point that you just raised right at the end that I was gonna mention is you need to have low latency",
    "start": "1156529",
    "end": "1161840"
  },
  {
    "text": "between these two clusters so these clusters for this pattern those clusters better be close together yep so this",
    "start": "1161840",
    "end": "1170299"
  },
  {
    "start": "1170000",
    "end": "1170000"
  },
  {
    "text": "next plat pattern does not require a flat network so by default if you create two clusters on IBM cloud kubernetes",
    "start": "1170299",
    "end": "1176570"
  },
  {
    "text": "service they're gonna be on separate networks they're not going to be routable within one cluster to another",
    "start": "1176570",
    "end": "1182239"
  },
  {
    "text": "cluster so with that as a baseline again the installation of both is is similar",
    "start": "1182239",
    "end": "1187340"
  },
  {
    "text": "and that you're your main cluster has the full-blown Sto your remote clusters do not they have separate internal IP",
    "start": "1187340",
    "end": "1194899"
  },
  {
    "text": "ranges and a couple of new pieces involved here to make this routing",
    "start": "1194899",
    "end": "1201200"
  },
  {
    "text": "happen all services that are in the remote clusters are now associated",
    "start": "1201200",
    "end": "1206389"
  },
  {
    "text": "behind an ingress gateway miss Keogh ingress gateway and all of these ingress gateways across all your clusters are",
    "start": "1206389",
    "end": "1212509"
  },
  {
    "text": "labeled and that label basically represents each of that cluster so your",
    "start": "1212509",
    "end": "1217789"
  },
  {
    "text": "main cluster now when it wants to route to a pod inside of a different cluster it will just route to the gateway of",
    "start": "1217789",
    "end": "1224600"
  },
  {
    "text": "that remote cluster and have that gateway do the forwarding then inside that cluster a few key technologies to",
    "start": "1224600",
    "end": "1232489"
  },
  {
    "text": "outline here pilot uses this new feature in envoy API split horizon EDS so",
    "start": "1232489",
    "end": "1239509"
  },
  {
    "text": "basically that means that it's able to configure the routes based on who's",
    "start": "1239509",
    "end": "1245480"
  },
  {
    "text": "calling it so if phoo on Cluster ones trying to talk to a service that's local then it's just",
    "start": "1245480",
    "end": "1252200"
  },
  {
    "text": "going to resolve it it's going to resolve to a local IP address and if",
    "start": "1252200",
    "end": "1257300"
  },
  {
    "text": "it's trying to talk to a service in a remote cluster in this case and it's going to resolve to the sto gateway",
    "start": "1257300",
    "end": "1262880"
  },
  {
    "text": "address so in this case the the flow would be food food talks to food",
    "start": "1262880",
    "end": "1268160"
  },
  {
    "text": "resolves the IP to a cluster IP sto replaces that cluster IP affords it to",
    "start": "1268160",
    "end": "1273500"
  },
  {
    "text": "the ingress gateway this communication is obviously encrypted there's a piece",
    "start": "1273500",
    "end": "1278780"
  },
  {
    "text": "of sni information that the ingress gateway is able to read and figure out where needs to route inside of it so it",
    "start": "1278780",
    "end": "1285380"
  },
  {
    "text": "maintains that encryption and then the and then the communication is follows",
    "start": "1285380",
    "end": "1290810"
  },
  {
    "text": "the rest of the path and goes to bar again in this scenario it's a very",
    "start": "1290810",
    "end": "1296210"
  },
  {
    "text": "chatty scenario with a little bit of a little bit of a complex setup and I think doesn't need a CI CD it's good for",
    "start": "1296210",
    "end": "1301940"
  },
  {
    "text": "failover scenarios but not the greatest for isolation I mean the other thing to",
    "start": "1301940",
    "end": "1307400"
  },
  {
    "text": "keep in mind pattern 1 and pattern 2 all have a single basically a single control plane so that's a characteristic of both",
    "start": "1307400",
    "end": "1315410"
  },
  {
    "text": "patterns is that they have that single control plane and the the main difference is one has a flat network 2",
    "start": "1315410",
    "end": "1322580"
  },
  {
    "text": "does not assume a flat network yeah and that's actually an advantage for some folks that want that single",
    "start": "1322580",
    "end": "1329990"
  },
  {
    "text": "control plane so you can enforce all of your sto config to one cluster and and that one cluster is able to then",
    "start": "1329990",
    "end": "1336140"
  },
  {
    "text": "propagate to the rest of them right so that's some single control plane for configuration management as well as",
    "start": "1336140",
    "end": "1343510"
  },
  {
    "text": "dashboard so HT o comes with like key Olli go fauna and Prometheus dashboards",
    "start": "1343510",
    "end": "1348920"
  },
  {
    "text": "right so in this case you just have that one dashboard and you're able to see your traffic flow and telemetry",
    "start": "1348920",
    "end": "1354380"
  },
  {
    "text": "information across all of your clusters the third pattern is multiple control",
    "start": "1354380",
    "end": "1362000"
  },
  {
    "start": "1358000",
    "end": "1358000"
  },
  {
    "text": "planes multiple network so I essentially these are completely independent clusters and every cluster has",
    "start": "1362000",
    "end": "1368870"
  },
  {
    "text": "full-blown sto running on it and not much is needed when you're doing they installed this installation",
    "start": "1368870",
    "end": "1375230"
  },
  {
    "text": "there's no config sharing the cluster one does not need eight access to the",
    "start": "1375230",
    "end": "1380240"
  },
  {
    "text": "API of cluster two cetera so it's simpler to set up okay so",
    "start": "1380240",
    "end": "1385519"
  },
  {
    "text": "let's talk about how this flow how this pattern implements this similar flow in",
    "start": "1385519",
    "end": "1391370"
  },
  {
    "text": "this case sto will configure the DNS of cluster 1 and adds additional like",
    "start": "1391370",
    "end": "1398570"
  },
  {
    "text": "endpoint lookups so by default you know when when when it asked when foo asked",
    "start": "1398570",
    "end": "1403820"
  },
  {
    "text": "for to resolve boot bar and resolves like but a little search for bar bar dot service clustered a local bar a default",
    "start": "1403820",
    "end": "1412250"
  },
  {
    "text": "etc so it's got a few things that will look up a steel will add another entry to that bar dot name space global so",
    "start": "1412250",
    "end": "1420799"
  },
  {
    "text": "this tells sto that you know when it does resolve to this bar dot global",
    "start": "1420799",
    "end": "1425960"
  },
  {
    "text": "that's when it needs to come in there and then replace it with the ingress gateway of the remote service so in this",
    "start": "1425960",
    "end": "1432500"
  },
  {
    "text": "case you need to create a service entry object for your cluster 1 and service entries away it's SEO terminology to add",
    "start": "1432500",
    "end": "1439970"
  },
  {
    "text": "additional DNS entries or it or additional like service registry entry",
    "start": "1439970",
    "end": "1445460"
  },
  {
    "text": "entry since 2 it into its lookup so it adds another one for call bar dot name space global in this case border globe",
    "start": "1445460",
    "end": "1452210"
  },
  {
    "text": "booking photo global so and then it will the same way as before I will route it",
    "start": "1452210",
    "end": "1457309"
  },
  {
    "text": "to the ingress gateway on the remote cluster and again using s and I look up it's able to then continue on with the",
    "start": "1457309",
    "end": "1463730"
  },
  {
    "text": "flow the advantages of this is that like I said it's simpler to setup it provides",
    "start": "1463730",
    "end": "1470539"
  },
  {
    "text": "independence to each one of your applications so each one of your clusters so this cluster might be controlled by one specific dev team and",
    "start": "1470539",
    "end": "1478190"
  },
  {
    "text": "you might want to pick and choose exactly when you want to expose a particular service to do two other",
    "start": "1478190",
    "end": "1483470"
  },
  {
    "text": "clusters and when you decide you don't want to do that anymore you can just stop it and you only have that one single service entry basically to delete",
    "start": "1483470",
    "end": "1490100"
  },
  {
    "text": "and then you you break the connection between the two this is great for like canary it releases across if you have",
    "start": "1490100",
    "end": "1496399"
  },
  {
    "text": "your production cluster you don't want to mess with it and you have your production to or staging cluster and you",
    "start": "1496399",
    "end": "1501860"
  },
  {
    "text": "want to Vout 1% of traffic just to this one service you can do that this way while so and this this can happen even",
    "start": "1501860",
    "end": "1509929"
  },
  {
    "text": "with your micro services that are behind not externally facing micro services",
    "start": "1509929",
    "end": "1515109"
  },
  {
    "text": "so the other thing that's really nice about this pattern besides some of the simplicity's is it has the two control",
    "start": "1515109",
    "end": "1522830"
  },
  {
    "text": "planes so every cluster has its own control plane so it naturally will scale",
    "start": "1522830",
    "end": "1527840"
  },
  {
    "text": "better than the previous solutions right because you're basically sharding the",
    "start": "1527840",
    "end": "1533989"
  },
  {
    "text": "control plane every every cluster gets its own control plane and we're basically federating the communication",
    "start": "1533989",
    "end": "1539659"
  },
  {
    "text": "between them you do need a common root CA so you can do mutual TLS between them and you can",
    "start": "1539659",
    "end": "1546019"
  },
  {
    "text": "still program all that but this provides that level of isolation that's required",
    "start": "1546019",
    "end": "1552200"
  },
  {
    "text": "in multiple scenarios but also better scale now the downside obviously is that",
    "start": "1552200",
    "end": "1558739"
  },
  {
    "text": "there's multiple control planes and you'd have to manage multiple control planes versus one so there is a higher",
    "start": "1558739",
    "end": "1565369"
  },
  {
    "text": "operational cost for managing the control platens themselves okay so let's",
    "start": "1565369",
    "end": "1571789"
  },
  {
    "text": "go back to our our customer requirement scenario and see how we would do that with with this pattern we're going to",
    "start": "1571789",
    "end": "1578210"
  },
  {
    "text": "implement this using pattern 3 the multiple control planes so first we have the same dmz and back office cluster and",
    "start": "1578210",
    "end": "1584059"
  },
  {
    "text": "you create these two edged poles and I'm gonna try to see if I can show you this and running off of this hotspot because",
    "start": "1584059",
    "end": "1590690"
  },
  {
    "text": "the network was really bad let's see if this loads and okay so there's my DMZ",
    "start": "1590690",
    "end": "1597440"
  },
  {
    "text": "cluster",
    "start": "1597440",
    "end": "1599858"
  },
  {
    "text": "okay you guys get no ain't no animations geez",
    "start": "1605640",
    "end": "1613400"
  },
  {
    "text": "I'm just gonna mirror displays one second [Music]",
    "start": "1619600",
    "end": "1625869"
  },
  {
    "text": "okay how's that cool all right so this is my list of clusters I'll choose the",
    "start": "1628330",
    "end": "1634960"
  },
  {
    "text": "DMZ cluster make it bigger it's not a",
    "start": "1634960",
    "end": "1642070"
  },
  {
    "text": "small room can you guys see that in the back good awesome okay really big geez",
    "start": "1642070",
    "end": "1652980"
  },
  {
    "text": "okay okay so here the worker knows here all the list of worker nodes that that",
    "start": "1652980",
    "end": "1658960"
  },
  {
    "text": "I've created and IKS has the concept of a worker pool where you can kind of group them together so we have three of",
    "start": "1658960",
    "end": "1664810"
  },
  {
    "text": "the worker nudes grouped in edge pool and then the other ones in private only and then going back to my slide does it",
    "start": "1664810",
    "end": "1675280"
  },
  {
    "text": "still work and then you create your",
    "start": "1675280",
    "end": "1680890"
  },
  {
    "text": "ingress and egress gateways appropriately so the the edge pool will have its own set of ingress and egress",
    "start": "1680890",
    "end": "1685960"
  },
  {
    "text": "and then the the private only pool will have its own ingress and egress and this is needed for you know communication",
    "start": "1685960",
    "end": "1693540"
  },
  {
    "text": "basically you're hopping between the public VLAN and the private VLAN so I'm just gonna skip the animation",
    "start": "1693540",
    "end": "1698590"
  },
  {
    "text": "here for the sake of time and kind of jump forward in this case let's say I have finance it's a back-end application",
    "start": "1698590",
    "end": "1704740"
  },
  {
    "text": "deployed in the back office cluster and what I want to do is I want to expose this to you know outbound traffic okay I",
    "start": "1704740",
    "end": "1712690"
  },
  {
    "text": "can't access this directly to the back office cluster or the first thing I'll do is I'll create an NLB right so I get",
    "start": "1712690",
    "end": "1719710"
  },
  {
    "text": "a hostname for this service sorry you can't jump back and forth between this",
    "start": "1719710",
    "end": "1726400"
  },
  {
    "text": "to do this demo and I'm gonna try my best",
    "start": "1726400",
    "end": "1729990"
  },
  {
    "text": "so here I have the finance application deployed in cluster two okay you see the",
    "start": "1736920",
    "end": "1742590"
  },
  {
    "text": "finance deployment and then as normal you create service and then I have a NLB",
    "start": "1742590",
    "end": "1752390"
  },
  {
    "text": "which I have it wired up to the sto ingress gateway so this sto ingress",
    "start": "1753560",
    "end": "1758820"
  },
  {
    "text": "gateway over here maps to of this",
    "start": "1758820",
    "end": "1767340"
  },
  {
    "text": "external IP and that external IP is the IP of this ingress gateway this one's",
    "start": "1767340",
    "end": "1774150"
  },
  {
    "text": "right here okay and then the next thing we need to do is be able to forward that traffic to the egress gateway and then",
    "start": "1774150",
    "end": "1780870"
  },
  {
    "text": "on to the ingress gateway of the back-office cluster so to do that we just use a service entry and while he's",
    "start": "1780870",
    "end": "1789900"
  },
  {
    "text": "going through that that egress gateway on the first cluster that's optional it",
    "start": "1789900",
    "end": "1795450"
  },
  {
    "text": "wasn't absolutely necessary but in this customer scenario they wanted the they",
    "start": "1795450",
    "end": "1800940"
  },
  {
    "text": "wanted to keep that nice pattern of inbound is ingress gateway outbound",
    "start": "1800940",
    "end": "1805980"
  },
  {
    "text": "egress gateway for every cluster so they wanted to control both inbound outbound even for east-west traffic so that's the",
    "start": "1805980",
    "end": "1812460"
  },
  {
    "text": "reason why we have included it here and we're gonna use that to talk to out out down traffic so in this case like so I'm",
    "start": "1812460",
    "end": "1818850"
  },
  {
    "text": "still trying to get to the finance service so I defined that finance namespace global entry which will then",
    "start": "1818850",
    "end": "1824790"
  },
  {
    "text": "point to the egress gateway okay and then that's how that communication happens so now if I want to connect to",
    "start": "1824790",
    "end": "1830850"
  },
  {
    "text": "this service I just find my NLB address and then go",
    "start": "1830850",
    "end": "1838440"
  },
  {
    "text": "to that and then that points to my fancy finance application that's running in cluster - so now cluster two wants to be",
    "start": "1838440",
    "end": "1845550"
  },
  {
    "text": "able to talk to an external service so let's say but we want to control that right we don't want our containers to be",
    "start": "1845550",
    "end": "1852150"
  },
  {
    "text": "able to talk to any outbound traffic and this is one of the requirements of this customer so if I if I wanted to ping",
    "start": "1852150",
    "end": "1857820"
  },
  {
    "text": "Google for example if I hit that it should it should not allow that traffic",
    "start": "1857820",
    "end": "1862980"
  },
  {
    "text": "so you know I'm hitting submit and nothing's happening I should get an error",
    "start": "1862980",
    "end": "1869660"
  },
  {
    "text": "but I think it's just eventually gonna timeout I gotta love demos like that words it works either works great yeah",
    "start": "1869660",
    "end": "1875810"
  },
  {
    "text": "but we what we do want to do is want to talk to like let's say this HTTP bin",
    "start": "1875810",
    "end": "1881270"
  },
  {
    "text": "status endpoint okay so now if I send a",
    "start": "1881270",
    "end": "1887450"
  },
  {
    "text": "request to that please work okay so it's able to talk to this endpoint so this is going back to our slides this is the",
    "start": "1887450",
    "end": "1894890"
  },
  {
    "text": "finance service being able to talk to external traffic and throughout this you know we have to go through this whole",
    "start": "1894890",
    "end": "1900920"
  },
  {
    "text": "flow again first you know you create a service entry for the finance object and",
    "start": "1900920",
    "end": "1906440"
  },
  {
    "text": "then you have it forwarded to using a very steel virtual service to the SPO egress gateway and then a sea of egress",
    "start": "1906440",
    "end": "1913280"
  },
  {
    "text": "gateway will talk to the private pool on the cluster one and then you create a regular service entry object as you",
    "start": "1913280",
    "end": "1919910"
  },
  {
    "text": "would with a CEO to allow outbound traffic and I can show you that but you know it's just basically a bunch of the",
    "start": "1919910",
    "end": "1925850"
  },
  {
    "text": "animals but you get the point - so to kind of wrap up here I would say that",
    "start": "1925850",
    "end": "1933770"
  },
  {
    "text": "the multi cluster of patterns are they're definitely not like production ready there's a lot of like kinks that",
    "start": "1933770",
    "end": "1939980"
  },
  {
    "text": "need to be ironed out and this was more meant to be a good POC to kind of give",
    "start": "1939980",
    "end": "1945110"
  },
  {
    "text": "you an idea of where the hto community is headed well they were focused on",
    "start": "1945110",
    "end": "1950410"
  },
  {
    "text": "especially our IBM research team has this has been one of their main interests so we've documented the three",
    "start": "1950410",
    "end": "1957230"
  },
  {
    "text": "patterns that I just talked about in more detail the author of this vlog is actually sitting in this room right here",
    "start": "1957230",
    "end": "1964160"
  },
  {
    "text": "etai and then this demo I didn't set it up myself another member on our team of a team I",
    "start": "1964160",
    "end": "1971180"
  },
  {
    "text": "know helped me set this up but these guys documented this in much more detail on this blog post if you just google",
    "start": "1971180",
    "end": "1977600"
  },
  {
    "text": "ways to do multi poster cluster patterns you'll see a summary of this we also created a questionnaire for the",
    "start": "1977600",
    "end": "1983180"
  },
  {
    "text": "community the hto users community because we're trying to learn exactly which one of these patterns applies to",
    "start": "1983180",
    "end": "1989420"
  },
  {
    "text": "your scenario so in this case this multi cluster pattern applied well to this finance banking scenario but you know it",
    "start": "1989420",
    "end": "1996140"
  },
  {
    "text": "might be different and your feedback is important for us because that'll help us identify we're doing",
    "start": "1996140",
    "end": "2001389"
  },
  {
    "text": "which pattern do we want to put more development focus on and Harden as part of the sto project itself we may do all",
    "start": "2001389",
    "end": "2008649"
  },
  {
    "text": "three we may decide to do one or just two of them depending on how the feedback that we get from the community",
    "start": "2008649",
    "end": "2015219"
  },
  {
    "text": "so we definitely do need your feedback so definitely take a look at the the patterns there take a look at the",
    "start": "2015219",
    "end": "2021999"
  },
  {
    "text": "questionnaire hit us up on the community site leave your feedback so that will help us better prioritize our work cool",
    "start": "2021999",
    "end": "2029379"
  },
  {
    "text": "with that and say thank you thank you everyone yeah [Music]",
    "start": "2029379",
    "end": "2035309"
  },
  {
    "text": "and I forgot to remind everyone that you're supposed to go to the sched reviews site to do the reviews and we",
    "start": "2038090",
    "end": "2046580"
  },
  {
    "text": "did below it so we finish right on time but we left no time for questions so we will be here afterwards so if you want",
    "start": "2046580",
    "end": "2053570"
  },
  {
    "text": "to come up and ask us questions that's fine too",
    "start": "2053570",
    "end": "2057370"
  }
]