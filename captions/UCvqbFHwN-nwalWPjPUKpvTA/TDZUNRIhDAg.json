[
  {
    "text": "it's an absolute pleasure to be here to talk to you today about kubernetes as your virtual DBA I'm Karen JX I'm a",
    "start": "560",
    "end": "7480"
  },
  {
    "text": "Senior Solutions architect at crunchy data this is a a",
    "start": "7480",
    "end": "15000"
  },
  {
    "text": "brief overview of my career to date as you can see it has been very database",
    "start": "15000",
    "end": "20080"
  },
  {
    "text": "shaped so I was a database administrator for 20 years and then a database consultant and now a Senior Solutions",
    "start": "20080",
    "end": "26599"
  },
  {
    "text": "architect and I still only work with databases and in particular postgress I'm supporting my postgress t-shirt my",
    "start": "26599",
    "end": "34280"
  },
  {
    "text": "postgress earrings so lots of people who have looking after databases as part of their",
    "start": "34280",
    "end": "41360"
  },
  {
    "text": "remit aren't actually database administrators so the task seems to fall",
    "start": "41360",
    "end": "46680"
  },
  {
    "text": "more and more often to people whose expertise lies in other areas that might be CIS admins devops people",
    "start": "46680",
    "end": "53239"
  },
  {
    "text": "infrastructure teams application developers and this is particularly true",
    "start": "53239",
    "end": "59239"
  },
  {
    "text": "in organization where the databases are running on kubernetes so the databases are just seen as another part of that",
    "start": "59239",
    "end": "67759"
  },
  {
    "text": "landscape as elad mentioned earlier the DBA traditional DBA role",
    "start": "67759",
    "end": "73759"
  },
  {
    "text": "seems to exist less and less this isn't how you want your team",
    "start": "73759",
    "end": "79439"
  },
  {
    "text": "to feel when they're told to look after databases on Kuban 80s so if you or your",
    "start": "79439",
    "end": "86159"
  },
  {
    "text": "team find yourself in this situation what do you do do you go out out and suddenly um try and learn to be a",
    "start": "86159",
    "end": "92920"
  },
  {
    "text": "database administrator do you panic do you hope that the databases will magically look after themselves well",
    "start": "92920",
    "end": "99720"
  },
  {
    "text": "there have already been spoilers in earlier presentations today a better option would be to use one of the",
    "start": "99720",
    "end": "106479"
  },
  {
    "text": "postest or database operators for kubernetes that have already been created for you by database",
    "start": "106479",
    "end": "114280"
  },
  {
    "text": "experts so let's have a look at how a kubernetes database Opera can act as",
    "start": "114280",
    "end": "120640"
  },
  {
    "text": "your virtual DBA so disclaimer the details in this talk are based on postgress because that's the rdbms that",
    "start": "120640",
    "end": "128520"
  },
  {
    "text": "I know and love the one that I work with day-to-day and any uh diagrams or code",
    "start": "128520",
    "end": "134440"
  },
  {
    "text": "Snippets are particularly relevant to postgress and also the crunchy data postgress operator because again that's",
    "start": "134440",
    "end": "141599"
  },
  {
    "text": "the one that I work with dayto day but the ideas will be relevant to whatever",
    "start": "141599",
    "end": "147519"
  },
  {
    "text": "rdbms you're using and whatever operator you choose to use okay so we'll do a very quick recap",
    "start": "147519",
    "end": "155200"
  },
  {
    "text": "of how database architecture has evolved uh try to figure out what a DBA actually",
    "start": "155200",
    "end": "160519"
  },
  {
    "text": "does so that we can think about what we need a virtual DBA to do uh remind ourselves of some of the",
    "start": "160519",
    "end": "167879"
  },
  {
    "text": "special features of kubernetes that make it a good fit for managing databases and",
    "start": "167879",
    "end": "173040"
  },
  {
    "text": "understand what a postgress oper operator for kubernetes does and finally have a Peak at how you could try that",
    "start": "173040",
    "end": "179239"
  },
  {
    "text": "out for yourself self so in the beginning databases were",
    "start": "179239",
    "end": "185519"
  },
  {
    "text": "deployed on physical servers or bare metal often one database cluster per",
    "start": "185519",
    "end": "191159"
  },
  {
    "text": "server if you needed isolation which means high overheads in terms of",
    "start": "191159",
    "end": "196560"
  },
  {
    "text": "hardware and in terms of Maintenance then virtualization came along in the in the form of VMS that meant that a single",
    "start": "196560",
    "end": "204319"
  },
  {
    "text": "physical machine could now be carved up into multiple virtual machines and could",
    "start": "204319",
    "end": "210040"
  },
  {
    "text": "now deploy your databases to separate VMS if you wanted isolation and",
    "start": "210040",
    "end": "215200"
  },
  {
    "text": "overheads were somewhat reduced then containers came along their small footprint the fact that they're",
    "start": "215200",
    "end": "221480"
  },
  {
    "text": "self-contained and easy to deploy and all sorts of other useful features meant",
    "start": "221480",
    "end": "226760"
  },
  {
    "text": "that many databases could now be deployed to a single physical server each of them isolated from the",
    "start": "226760",
    "end": "233079"
  },
  {
    "text": "others and each managed completely independently but it wasn't quite as simple as that to get people to see",
    "start": "233079",
    "end": "241239"
  },
  {
    "text": "running uh databases on in containers um",
    "start": "241239",
    "end": "247120"
  },
  {
    "text": "as a kind of normal acceptable idea so not that many years ago people thought",
    "start": "247120",
    "end": "252799"
  },
  {
    "text": "that the idea of running databases and containers was completely crazy this year all of the customers",
    "start": "252799",
    "end": "259359"
  },
  {
    "text": "that I work with are running some or all of their production databases in kubernetes some are running",
    "start": "259359",
    "end": "266120"
  },
  {
    "text": "multi-terabyte Mission critical databases some are running hundreds or thousands of databases so what has",
    "start": "266120",
    "end": "274199"
  },
  {
    "text": "changed as I'm sure this audience already knows a containerized environment is extremely flexible and",
    "start": "274400",
    "end": "280479"
  },
  {
    "text": "scalable because containers are isolated lightweight and portable and they can be created and destroyed quickly and",
    "start": "280479",
    "end": "288400"
  },
  {
    "text": "easily um they give you those um features of scalability and flexibility",
    "start": "288400",
    "end": "296400"
  },
  {
    "text": "but they're also stateless and ephemeral and as you can imagine those two words",
    "start": "296400",
    "end": "301479"
  },
  {
    "text": "are not uh amongst a dba's favorite",
    "start": "301479",
    "end": "306919"
  },
  {
    "text": "vocabulary and even putting aside the stateless and ephem ephemeral issues for",
    "start": "306919",
    "end": "312080"
  },
  {
    "text": "now organizations often manage hundreds or even thousands of databases",
    "start": "312080",
    "end": "317479"
  },
  {
    "text": "especially since containerized environment is ideal for running lots of small databases rather than a few",
    "start": "317479",
    "end": "323639"
  },
  {
    "text": "monoliths before container orchestration came along and in particular kubernetes",
    "start": "323639",
    "end": "328720"
  },
  {
    "text": "managing so many containers would feel a lot like hering",
    "start": "328720",
    "end": "334039"
  },
  {
    "text": "cats but what does a DBA actually do what are the DBA tasks that we need",
    "start": "334840",
    "end": "340840"
  },
  {
    "text": "kubernetes to perform based on various definitions and",
    "start": "340840",
    "end": "346800"
  },
  {
    "text": "I'm not expecting you to read this the general consensus is that a DBA will manage and secure computer systems that",
    "start": "346800",
    "end": "353840"
  },
  {
    "text": "store data using specialist software which unfortunately doesn't tell us very",
    "start": "353840",
    "end": "358960"
  },
  {
    "text": "much about what a the DBA actually does all day so I compared uh lists of",
    "start": "358960",
    "end": "365280"
  },
  {
    "text": "responsibilities that went with the definitions in the previous slide plus a sample of DBA job adverts to get a list",
    "start": "365280",
    "end": "371880"
  },
  {
    "text": "of things that dbas are actually expected to do and it's a pretty long list so the general consensus is that a",
    "start": "371880",
    "end": "378759"
  },
  {
    "text": "DBA will do some or all of these tasks ensure the availability of the database",
    "start": "378759",
    "end": "384240"
  },
  {
    "text": "usually including putting a high availability architecture in place design Implement and maintain dat",
    "start": "384240",
    "end": "389560"
  },
  {
    "text": "databased backup and Recovery procedures design and implement the required security procedures manage database",
    "start": "389560",
    "end": "395800"
  },
  {
    "text": "access ensure data protection Implement monitoring processes and perform ongoing monitoring of database performance",
    "start": "395800",
    "end": "402360"
  },
  {
    "text": "security space Etc database design and development including uh data modeling",
    "start": "402360",
    "end": "408319"
  },
  {
    "text": "support and troubleshooting including 24x7 on call database software install and upgrade liaising with and providing",
    "start": "408319",
    "end": "415639"
  },
  {
    "text": "advice support and expertise to other teams performance tuning and enhancement",
    "start": "415639",
    "end": "420800"
  },
  {
    "text": "capacity planning implementing necessary procedures for database creation and database",
    "start": "420800",
    "end": "427919"
  },
  {
    "text": "maintenance kubernetes takes care of and automates many of the things that would otherwise make managing large number of",
    "start": "429560",
    "end": "436520"
  },
  {
    "text": "containers such a headache and a lot of the things that it does already go a long way towards letting us manage a",
    "start": "436520",
    "end": "442840"
  },
  {
    "text": "database environment provisioning and deployment configuring containers scheduling scaling up and down",
    "start": "442840",
    "end": "449840"
  },
  {
    "text": "recreating a failed container or other resource creating Services managing",
    "start": "449840",
    "end": "454879"
  },
  {
    "text": "storage and with um persistent volumes we get around some of those pesky stateless and ephemeral issues",
    "start": "454879",
    "end": "462000"
  },
  {
    "text": "allocating and scaling resources load load balancing networking and security there are stateful sets where",
    "start": "462000",
    "end": "469080"
  },
  {
    "text": "the pods aren't interchangeable which is ideal for an ha database cluster with primary and standby databases and sidec",
    "start": "469080",
    "end": "475360"
  },
  {
    "text": "cars so you can deploy containers alongside your database container to things like extracting metrics and",
    "start": "475360",
    "end": "481319"
  },
  {
    "text": "managing back backups but how do you go about setting",
    "start": "481319",
    "end": "487879"
  },
  {
    "text": "up a containerized postgress environment kubernetes doesn't n natively speak",
    "start": "487879",
    "end": "493000"
  },
  {
    "text": "postgress so you need to put in place a mechanism to tell it how to manage your postgress cluster replication how to do",
    "start": "493000",
    "end": "500520"
  },
  {
    "text": "backup and Recovery how to perform failovers how to do monitoring upgrades Etc and to do that you need expert",
    "start": "500520",
    "end": "508120"
  },
  {
    "text": "knowledge of two domains you need expert knowledge of postgress and of kubernetes",
    "start": "508120",
    "end": "514039"
  },
  {
    "text": "and most organizations find it hard enough to find someone with expert knowledge of one of those domains let alone both of",
    "start": "514039",
    "end": "521399"
  },
  {
    "text": "them which is where the concept of the kubernetes operator comes in allowing you to extend kubernetes using custom",
    "start": "521399",
    "end": "528200"
  },
  {
    "text": "resources and the control Loop which will work to keep your environment in the state that you",
    "start": "528200",
    "end": "535279"
  },
  {
    "text": "declare and fortunately as you already saw earlier in Peter's talk there are various postgress operators that have",
    "start": "535279",
    "end": "541920"
  },
  {
    "text": "been created and maintained by postgress experts some of which have now been tried and tested in production",
    "start": "541920",
    "end": "548279"
  },
  {
    "text": "environments for years I can speak in detail about the crunchy data postest operator pigo because that's the one",
    "start": "548279",
    "end": "554360"
  },
  {
    "text": "that I work with dayto day but each of them combines that detailed postgress",
    "start": "554360",
    "end": "559839"
  },
  {
    "text": "and kubernetes knowledge and expertise allowing you to declare what your postgress cluster should look like and",
    "start": "559839",
    "end": "566880"
  },
  {
    "text": "then rely on the features of kubernetes the operator and integrated tools to",
    "start": "566880",
    "end": "572200"
  },
  {
    "text": "keep it in the state that you've declared so what do you want from an",
    "start": "572200",
    "end": "578959"
  },
  {
    "text": "operator for kubernetes well the idea of a kubes operator is that it performs the task",
    "start": "578959",
    "end": "585480"
  },
  {
    "text": "that a human operator would otherwise perform in the case of a postgress operator that's the task a DBA would",
    "start": "585480",
    "end": "591560"
  },
  {
    "text": "otherwise perform that means you want it to automate as many of possible of the tasks that we saw in that list of DBA",
    "start": "591560",
    "end": "598519"
  },
  {
    "text": "responsibilities I don't know of an operator that will do",
    "start": "598519",
    "end": "604600"
  },
  {
    "text": "your database design and data modeling for you and I'm not sure you'd want it to that's one of the fun parts of the",
    "start": "604600",
    "end": "609959"
  },
  {
    "text": "job after all but ideally it will automate or at least help with the rest of your DBA",
    "start": "609959",
    "end": "616680"
  },
  {
    "text": "tasks such as database High availability most production database",
    "start": "616680",
    "end": "622959"
  },
  {
    "text": "environments need some kind of high availability they'll use postgress is streaming replication to create one or",
    "start": "622959",
    "end": "628959"
  },
  {
    "text": "more replica or standby databases then use a framework for example Patron that's what I've shown here",
    "start": "628959",
    "end": "636440"
  },
  {
    "text": "um to manage the cluster often they'll use the tool such as ha proxy to",
    "start": "636440",
    "end": "641920"
  },
  {
    "text": "maintain a virtual IP address that will always point to the current primary as you can imagine or maybe you",
    "start": "641920",
    "end": "648240"
  },
  {
    "text": "don't have to imagine because you've already had to do it setting up this kind of environment Hand by hand can be",
    "start": "648240",
    "end": "654040"
  },
  {
    "text": "fiddly and difficult to get right because there are quite a few moving Parts with different tools",
    "start": "654040",
    "end": "659880"
  },
  {
    "text": "and all of them need to be carefully configured having it all automated by the operator is a huge time saer and",
    "start": "659880",
    "end": "667279"
  },
  {
    "text": "minimizes error so now if something goes wrong with your primary database you want to",
    "start": "667279",
    "end": "673200"
  },
  {
    "text": "know that you'll get an automated failover that one of the replicas will be promoted to be the new primary and",
    "start": "673200",
    "end": "679480"
  },
  {
    "text": "the other replicas will be configured to replicate from this new primary then through a combination of",
    "start": "679480",
    "end": "686680"
  },
  {
    "text": "the operator Logic the self-healing features of cuber and in this case the patron configuration you should expect a new",
    "start": "686680",
    "end": "693720"
  },
  {
    "text": "postest instance to be automatically created and integrated into the cluster as a replica to replace that failed",
    "start": "693720",
    "end": "702200"
  },
  {
    "text": "primary you want as much of as possible of your backup and Recovery to be automated by the operator you want the",
    "start": "702760",
    "end": "709519"
  },
  {
    "text": "operator install and configure a backup tool for example PG backrest it should",
    "start": "709519",
    "end": "714600"
  },
  {
    "text": "let you define one or more backup repositories so for example a local repo and an Network or Cloud repo using S3",
    "start": "714600",
    "end": "720920"
  },
  {
    "text": "type storage it should take care of archiving your wall files it should take care of backups of the database storing",
    "start": "720920",
    "end": "728320"
  },
  {
    "text": "them in the repo according to the schedule that you've configured it should retry the backups if they fail",
    "start": "728320",
    "end": "734199"
  },
  {
    "text": "and Purge backups when they're no longer needed to minimize stress data loss and downtime you definitely want the a",
    "start": "734199",
    "end": "741639"
  },
  {
    "text": "operator to automate your database recovery process and as well as your primary",
    "start": "741639",
    "end": "748320"
  },
  {
    "text": "cluster you probably want to be able to define a Dr or standby cluster in a separate kubernetes cluster maybe in a",
    "start": "748320",
    "end": "754760"
  },
  {
    "text": "different data center kept up to date either via postgress streaming replication where changes are applied",
    "start": "754760",
    "end": "760639"
  },
  {
    "text": "directly from the primary database or by applying the walls that have been archived to your backup repository or",
    "start": "760639",
    "end": "766360"
  },
  {
    "text": "maybe even both although you want to be in charge",
    "start": "766360",
    "end": "771920"
  },
  {
    "text": "of defining your security policies you want the operator to provide you with the means to implement them",
    "start": "771920",
    "end": "779320"
  },
  {
    "text": "this includes things like maintaining the pba.com for entries creating users",
    "start": "779320",
    "end": "785320"
  },
  {
    "text": "encrypting passwords and storing them in Secrets configuring SSL and TLS and",
    "start": "785320",
    "end": "790360"
  },
  {
    "text": "managing the required certificates monitoring is a hugely",
    "start": "790360",
    "end": "796000"
  },
  {
    "text": "important part of database Administration you have to know what's going on in your database so you're",
    "start": "796000",
    "end": "801399"
  },
  {
    "text": "aware of potential issues and you can deal with them before they become",
    "start": "801399",
    "end": "806959"
  },
  {
    "text": "emergencies rather than reinvent the the wheel and create your own monitoring system and then uh setting up your own",
    "start": "807240",
    "end": "813279"
  },
  {
    "text": "alerts and dashboards you can let the operator configure monitoring for you so ideally you'll get an A to Z monitoring",
    "start": "813279",
    "end": "820600"
  },
  {
    "text": "architecture for example like this with logging parameters so the relevant information's captured in the database",
    "start": "820600",
    "end": "826120"
  },
  {
    "text": "logs stats exported from your database metrics alerts and",
    "start": "826120",
    "end": "832160"
  },
  {
    "text": "dashboards although the operator won't completely relieve you of support duties it should mean that you're called on",
    "start": "832320",
    "end": "837880"
  },
  {
    "text": "less frequently in the middle of the night because of the high availability and self-healing that we've already",
    "start": "837880",
    "end": "844079"
  },
  {
    "text": "looked at a lot of things like a database going down for example will be handled automatically and",
    "start": "844079",
    "end": "850160"
  },
  {
    "text": "transparently the monitoring that's in place means that it's easy to keep an eye on things and notice if something",
    "start": "850160",
    "end": "855639"
  },
  {
    "text": "needs attention and the alerting means that you should already be made aware that something's going on before it",
    "start": "855639",
    "end": "861519"
  },
  {
    "text": "becomes an emergency so you'll hopefully only get involved if there's something more complicated going on that needs",
    "start": "861519",
    "end": "867720"
  },
  {
    "text": "some detailed analysis what about database software install and",
    "start": "867720",
    "end": "873800"
  },
  {
    "text": "upgrade well the install bits easy because you don't need to do that uh",
    "start": "873800",
    "end": "879360"
  },
  {
    "text": "your database software and related tools will be pre-installed in your container",
    "start": "879360",
    "end": "885360"
  },
  {
    "text": "images and as for upgrades the operator can use automated rolling updates to",
    "start": "885360",
    "end": "891320"
  },
  {
    "text": "perform postgress minor version upgrades so when you want to upgrade for example from 16.3 to 16.4 you can simply change",
    "start": "891320",
    "end": "899199"
  },
  {
    "text": "the divers the version in the definition of your cluster reapply it and watch as the replicas are first updated one of",
    "start": "899199",
    "end": "906440"
  },
  {
    "text": "the replicas is promoted to the primary and finally the original primary is",
    "start": "906440",
    "end": "912920"
  },
  {
    "text": "upgraded an operator can even perform automated upgrades from one major version to another either using PG",
    "start": "913320",
    "end": "920279"
  },
  {
    "text": "upgrade or logical replication or PG dump and PG restore depending on your",
    "start": "920279",
    "end": "925759"
  },
  {
    "text": "requirements of course even with all of that automate automation major version",
    "start": "925759",
    "end": "930880"
  },
  {
    "text": "upgrades will still require planning and testing the operator won't take care of reading all of the release notes for you",
    "start": "930880",
    "end": "937680"
  },
  {
    "text": "looking to see whether any of the new features are useful to you making sure that you're not using any deprecated",
    "start": "937680",
    "end": "943319"
  },
  {
    "text": "functionality on your application or testing your application thoroughly with the new version that's still on",
    "start": "943319",
    "end": "951160"
  },
  {
    "text": "you does the operator mean that we don't need database expertise well as we saw there's a lot",
    "start": "951240",
    "end": "957959"
  },
  {
    "text": "of database expert built into an operator but you still need a human expert for strategic considerations",
    "start": "957959",
    "end": "964759"
  },
  {
    "text": "looking at the needs of the database application and considering business requirements again some of the interesting parts of the",
    "start": "964759",
    "end": "972680"
  },
  {
    "text": "job the operator should help you with Performance Tuning so um it should be",
    "start": "972959",
    "end": "978360"
  },
  {
    "text": "easy to set configuration parameters to appropriate values increase resources when they need when needed configure",
    "start": "978360",
    "end": "984800"
  },
  {
    "text": "connection pooling and see what's going on in the database through PG Gat statements and the monitoring that we",
    "start": "984800",
    "end": "990759"
  },
  {
    "text": "already spoke about in terms of capacity planning the",
    "start": "990759",
    "end": "998040"
  },
  {
    "text": "monitoring and alerting that you've got in place should already give you a good idea of how much space you're using how",
    "start": "998040",
    "end": "1003240"
  },
  {
    "text": "it's growing and how much you might need to add and the combination of kubernetes and the operator makes it easy to",
    "start": "1003240",
    "end": "1009399"
  },
  {
    "text": "rescale some storage providers support Dynamic scaling and your operator might be able to take advantage of that to",
    "start": "1009399",
    "end": "1016240"
  },
  {
    "text": "Monitor and increase the space available to your databases needed um if not if you're using a",
    "start": "1016240",
    "end": "1022399"
  },
  {
    "text": "storage class that supports resizing volumes you can simply increase the amount of storage requested for your",
    "start": "1022399",
    "end": "1028720"
  },
  {
    "text": "database and reapply the Manifest and even if your storage class doesn't support resizing volumes you might be",
    "start": "1028720",
    "end": "1035280"
  },
  {
    "text": "able to do a rolling rescale so in a similar way to um the way the postris minor upgrades were",
    "start": "1035280",
    "end": "1042360"
  },
  {
    "text": "done in terms of database creation and maintenance most operators will let you",
    "start": "1043160",
    "end": "1048199"
  },
  {
    "text": "define users and databases in your manifest by just adding a few lines of",
    "start": "1048199",
    "end": "1054400"
  },
  {
    "text": "code database maintenance is a wide ranging a very unspecific task but this is a list of some of the things that",
    "start": "1054400",
    "end": "1061080"
  },
  {
    "text": "might fall into that category we've already looked at some of them and the operator should let you schedule any",
    "start": "1061080",
    "end": "1067080"
  },
  {
    "text": "remaining tasks that aren't automated so now you're obviously really",
    "start": "1067080",
    "end": "1073760"
  },
  {
    "text": "excited to give this a try and see the magic for yourself but how can you do that well first of all beg borrow or",
    "start": "1073760",
    "end": "1080640"
  },
  {
    "text": "build yourself a cubet cluster and then to try pigo postest",
    "start": "1080640",
    "end": "1086440"
  },
  {
    "text": "operator from crunchy data you can fork and clone the postest operator examples repo which gives you instructions Helm",
    "start": "1086440",
    "end": "1092799"
  },
  {
    "text": "charts and customized manifests that will let you install the operator and create your first cluster and similar",
    "start": "1092799",
    "end": "1099400"
  },
  {
    "text": "resources are available for other operators um Peter showed some information in his talk",
    "start": "1099400",
    "end": "1106840"
  },
  {
    "text": "earlier um you can install the operator using the customized file that's available for you in the install default",
    "start": "1107280",
    "end": "1114039"
  },
  {
    "text": "folder and that will create all of the necessary resources and the one that we're interested in here is the",
    "start": "1114039",
    "end": "1120360"
  },
  {
    "text": "postgress cluster custom resource that's what we're going to use to define our",
    "start": "1120360",
    "end": "1126399"
  },
  {
    "text": "clusters there are sample manifests in the repo so you can just edit the sample post. yaml file that's made available",
    "start": "1127880",
    "end": "1134760"
  },
  {
    "text": "for you to Define what you want your cluster to look like so this this is the",
    "start": "1134760",
    "end": "1140200"
  },
  {
    "text": "very simplest manifest obviously you can add in all sorts of things to um",
    "start": "1140200",
    "end": "1146159"
  },
  {
    "text": "configure your um your cluster but this one creates us a postgress cluster that",
    "start": "1146159",
    "end": "1151559"
  },
  {
    "text": "I've called cucon using postgress 16 with three replicas and using the",
    "start": "1151559",
    "end": "1156600"
  },
  {
    "text": "default storage class and requesting a 1 GB volume optionally you can configure a",
    "start": "1156600",
    "end": "1163440"
  },
  {
    "text": "backup repository so we do think that backups are super important but we also know that for some things like if you're",
    "start": "1163440",
    "end": "1169360"
  },
  {
    "text": "doing restore testing or if you're just creating a Dev cluster that you're going",
    "start": "1169360",
    "end": "1174640"
  },
  {
    "text": "to use for a day and then get rid of you don't want to back it up so you don't have to use this part if you don't want",
    "start": "1174640",
    "end": "1182280"
  },
  {
    "text": "to once you apply the Manifest the operator will create you a three node High availability postrest cluster with",
    "start": "1182679",
    "end": "1190080"
  },
  {
    "text": "backups so you can see here the pods that have been created we've got an initial backup the three postest pods uh",
    "start": "1190080",
    "end": "1197120"
  },
  {
    "text": "the backup repo pods uh PG admin pod cuz PG admin's available to you with this operator uh and the operator",
    "start": "1197120",
    "end": "1204799"
  },
  {
    "text": "itself the operator is then going to work to keep your cluster in that state",
    "start": "1204799",
    "end": "1210000"
  },
  {
    "text": "even if one of those components fails by making changes to that simple manifest you can then add some of the other",
    "start": "1210000",
    "end": "1216320"
  },
  {
    "text": "features that we talked about you can add backup schedules uh external backup repositories you can um implement the",
    "start": "1216320",
    "end": "1223720"
  },
  {
    "text": "monitoring stack you can Define databases and users uh customer database",
    "start": "1223720",
    "end": "1229400"
  },
  {
    "text": "parameters or PG back rest parameters uh connection pooling you can define a",
    "start": "1229400",
    "end": "1234679"
  },
  {
    "text": "standby cluster you can set resource requests and limits",
    "start": "1234679",
    "end": "1239880"
  },
  {
    "text": "Etc so just to conclude a postest operator for kubernetes really can act",
    "start": "1242120",
    "end": "1247880"
  },
  {
    "text": "as your virtual database administrator we've seen that an operator automates most database Administration tasks from",
    "start": "1247880",
    "end": "1255080"
  },
  {
    "text": "deployment of a high availability database environment to backup and Recovery monitoring and even",
    "start": "1255080",
    "end": "1261440"
  },
  {
    "text": "upgrades it lets you implement a robust secure scalable and easily manageable database architecture it combines the",
    "start": "1261440",
    "end": "1268840"
  },
  {
    "text": "strengths of postgress and kubernetes to keep your database cluster running smoothly and it leaves you free to do",
    "start": "1268840",
    "end": "1276080"
  },
  {
    "text": "just the Strategic interesting and fun bits of database",
    "start": "1276080",
    "end": "1281559"
  },
  {
    "text": "Administration thank you very much [Applause]",
    "start": "1281559",
    "end": "1292279"
  },
  {
    "text": "uh thank you for the presentation thank you very much so I'm inspired I'm going to try great right now I'm old school I",
    "start": "1296919",
    "end": "1303120"
  },
  {
    "text": "keep databases out of kubernetes because I I have to upgrade my kubernetes",
    "start": "1303120",
    "end": "1308640"
  },
  {
    "text": "infrastructure to the next Point release every six months and I don't want to be migrating my precious database every 6",
    "start": "1308640",
    "end": "1314480"
  },
  {
    "text": "months is there a Best practice with then with these operators um is the kubernetes infrastructure upgrades that",
    "start": "1314480",
    "end": "1321640"
  },
  {
    "text": "I have to do is is on a completely different cycle for my data and I want to leave my data alone I don't want to",
    "start": "1321640",
    "end": "1327240"
  },
  {
    "text": "have to reload it every 6 months these there are there best practices for um uh",
    "start": "1327240",
    "end": "1332679"
  },
  {
    "text": "postgress Crossing kubernetes Point releases so most of the time the",
    "start": "1332679",
    "end": "1339000"
  },
  {
    "text": "kubernetes point release upgrade will be completely transparent to all of this it it won't be from for my applications so",
    "start": "1339000",
    "end": "1345880"
  },
  {
    "text": "I build a new cluster and move everything over okay but you don't need to do that no I",
    "start": "1345880",
    "end": "1353720"
  },
  {
    "text": "do need to do it because I have applications that require I don't trust anything in the new release I I do a",
    "start": "1353720",
    "end": "1360320"
  },
  {
    "text": "deployment and ab test to to migrate over between point I just was wondering how the data what's the best practice",
    "start": "1360320",
    "end": "1366480"
  },
  {
    "text": "for database migrations when you're doing kubernetes Point releases you your your yours is upgrade in place so this",
    "start": "1366480",
    "end": "1374360"
  },
  {
    "text": "uh the operator that I'm talking about I would probably use that standby cluster that I mentioned so I would stand up a",
    "start": "1374360",
    "end": "1381520"
  },
  {
    "text": "standby postrest cluster on the new kubernetes cluster replicate to that new",
    "start": "1381520",
    "end": "1388520"
  },
  {
    "text": "cluster and then promote it to be my new primary you can do that okay I'll study that thank you yeah thank",
    "start": "1388520",
    "end": "1395600"
  },
  {
    "text": "you I'll have a sorry I have a quick followup uh just like the old school",
    "start": "1395600",
    "end": "1400799"
  },
  {
    "text": "comment right so the two red marks uh that you pointed stateless and EP",
    "start": "1400799",
    "end": "1405960"
  },
  {
    "text": "ephemeral so most of the times like I I want to explore this I've heard about",
    "start": "1405960",
    "end": "1411320"
  },
  {
    "text": "data on kubernetes like especially postest right how do you uh I I I would",
    "start": "1411320",
    "end": "1417480"
  },
  {
    "text": "not say convinced but like how do you address someone coming up oh this is stateless every it's not going to work",
    "start": "1417480",
    "end": "1423360"
  },
  {
    "text": "for database how do you do that okay so just to remind people I am an old school",
    "start": "1423360",
    "end": "1428600"
  },
  {
    "text": "DBA I started being a DBA in 1998 so I really am an old school DBA and I'm",
    "start": "1428600",
    "end": "1436520"
  },
  {
    "text": "convinced so the the stateless and ephemeral yes your containers themselves",
    "start": "1436520",
    "end": "1442360"
  },
  {
    "text": "are but you've got the persistent volumes which contains all of your data",
    "start": "1442360",
    "end": "1447600"
  },
  {
    "text": "they don't go away when the container goes away you can lose you can kill your database pod and it doesn't matter you",
    "start": "1447600",
    "end": "1453640"
  },
  {
    "text": "don't lose any data because it's still there in the persistent volume the new pod that's created to replace it will",
    "start": "1453640",
    "end": "1460279"
  },
  {
    "text": "just point straight to that that volume you've got your data there it's not going anywhere",
    "start": "1460279",
    "end": "1467679"
  },
  {
    "text": "hi thank you so much for this talk um I have a question about maintenance but",
    "start": "1470600",
    "end": "1475760"
  },
  {
    "text": "just on it little bit different level so whenever you have maintenance that",
    "start": "1475760",
    "end": "1480840"
  },
  {
    "text": "requires for example to restart nod of the cluster right you are patching no or something like that how do you deal with",
    "start": "1480840",
    "end": "1487200"
  },
  {
    "text": "those situations because we already are inspired for a long time we are running this in not in production but on in",
    "start": "1487200",
    "end": "1494120"
  },
  {
    "text": "production actually as well on many systems and whenever like uh people are performing this kind of",
    "start": "1494120",
    "end": "1500600"
  },
  {
    "text": "Maintenance sometimes the results are very they're they're e catastrophic in some cases and lead to uh Disaster",
    "start": "1500600",
    "end": "1507720"
  },
  {
    "text": "Recovery procedures or they still require so many like you know extra steps like for example initiating a",
    "start": "1507720",
    "end": "1514960"
  },
  {
    "text": "failover manually right if we're talking about Patron or like reting the replicas",
    "start": "1514960",
    "end": "1520320"
  },
  {
    "text": "that that are now down because they lost the timeline that they were replicating so do you have any like best practice",
    "start": "1520320",
    "end": "1525640"
  },
  {
    "text": "and suggestion of of how to deal with this situations so what kind of Maintenance you thinking",
    "start": "1525640",
    "end": "1531600"
  },
  {
    "text": "of would that would cause that kind of catastrophic failure um I'm thinking about patching the node underlying like",
    "start": "1531600",
    "end": "1539799"
  },
  {
    "text": "server Linux server where this is running and in case obviously if you have your data somewhere on an fast",
    "start": "1539799",
    "end": "1545520"
  },
  {
    "text": "server right and it's like not located on this nod then you're good but if your data is running directly on the Node",
    "start": "1545520",
    "end": "1551600"
  },
  {
    "text": "like through like local volume or whatever um then it means that like this whole node is down now if you rehle your",
    "start": "1551600",
    "end": "1557840"
  },
  {
    "text": "P it doesn't really matter because you know the data is detached from it and uh that's that's what we're seeing like",
    "start": "1557840",
    "end": "1564159"
  },
  {
    "text": "quite a bit okay so it sounds like you if you",
    "start": "1564159",
    "end": "1570039"
  },
  {
    "text": "have some kind of maintenance on the Node that's causing problems if you've got an active database running there",
    "start": "1570039",
    "end": "1576080"
  },
  {
    "text": "then you might need to have some procedure where when you perform maintenance on that node the first step",
    "start": "1576080",
    "end": "1583360"
  },
  {
    "text": "is to perform a switch over that's that's always going to be the safest way",
    "start": "1583360",
    "end": "1588919"
  },
  {
    "text": "and have the least impact on applications Etc okay so that that could",
    "start": "1588919",
    "end": "1594880"
  },
  {
    "text": "be an option and I'm assuming that your your maintenance is all automated so adding an extra automated step that does",
    "start": "1594880",
    "end": "1601760"
  },
  {
    "text": "a switch over potentially wouldn't be a problem but usually um maintenance on a",
    "start": "1601760",
    "end": "1607399"
  },
  {
    "text": "node won't have a significant impact because if you've got replication and",
    "start": "1607399",
    "end": "1613240"
  },
  {
    "text": "especially if you've implemented synchronous replication you've not got a risk of data loss because it's already been propagated to your replica and as",
    "start": "1613240",
    "end": "1620480"
  },
  {
    "text": "long as your application is doing retries if necessary I mean that's the thing that some people forget is that",
    "start": "1620480",
    "end": "1625760"
  },
  {
    "text": "it's all very well having high availability database but you've got to think from an application point of view",
    "start": "1625760",
    "end": "1630919"
  },
  {
    "text": "as well it's no good the database still running but on a different node if your application can't deal with that as well",
    "start": "1630919",
    "end": "1638159"
  },
  {
    "text": "so yeah so so you answered it and just to summarize it the main question was that operator is not concerned with this",
    "start": "1638159",
    "end": "1644799"
  },
  {
    "text": "we still want to go through patroni steps that we would go even if it wasn't like a you know kubernetes based system",
    "start": "1644799",
    "end": "1652120"
  },
  {
    "text": "yeah in theory it shouldn't be necessary but if you find that it is then that's an extra step that you can add yeah yeah",
    "start": "1652120",
    "end": "1659440"
  },
  {
    "text": "oh cool um so I I think you mentioned um like explicitly excluding schema",
    "start": "1659440",
    "end": "1666120"
  },
  {
    "text": "management from these kind of tools do you consider like user account management and permission grants under",
    "start": "1666120",
    "end": "1673679"
  },
  {
    "text": "that scope as well or is that something that the operator would take care of oh now that is a a bigger question than",
    "start": "1673679",
    "end": "1679320"
  },
  {
    "text": "I've got time to answer in the next two minutes and okay maybe I'll chat with you after this I um I can see advantages",
    "start": "1679320",
    "end": "1687320"
  },
  {
    "text": "and disadvantages to the different methods I would tend to manage users in",
    "start": "1687320",
    "end": "1692399"
  },
  {
    "text": "terms of application users so things that are kind of a part of the database",
    "start": "1692399",
    "end": "1698320"
  },
  {
    "text": "structure that's going to be used by the application I would tend to manage that here as part of the operator so that",
    "start": "1698320",
    "end": "1703960"
  },
  {
    "text": "it's it's all automated as part of that system uh other things like you know any",
    "start": "1703960",
    "end": "1709559"
  },
  {
    "text": "individual users Etc I probably wouldn't add into this okay cool yeah that's",
    "start": "1709559",
    "end": "1714799"
  },
  {
    "text": "exactly what I was looking for um and then in terms of compatibility with other systems that are postgress like",
    "start": "1714799",
    "end": "1722279"
  },
  {
    "text": "how well does does this play with those kind of systems or does it explicitly want like vanilla postgress you would",
    "start": "1722279",
    "end": "1728840"
  },
  {
    "text": "probably have to create yourself because obviously this is based on images that use postgress you know we don't change",
    "start": "1728840",
    "end": "1735640"
  },
  {
    "text": "postgress it is just postgress so you'd need to create yourself some",
    "start": "1735640",
    "end": "1740679"
  },
  {
    "text": "images using whatever and try it out I have no idea and I couldn't you know",
    "start": "1740679",
    "end": "1746039"
  },
  {
    "text": "sure try this at home but you know if you want to then so if I just wanted that application user management",
    "start": "1746039",
    "end": "1752720"
  },
  {
    "text": "perspective I can't just like point it at a postgress connection and have it manage those for me it wants control",
    "start": "1752720",
    "end": "1758039"
  },
  {
    "text": "over the whole database yeah cuz the idea of the operator is that it's managing that whole environment okay",
    "start": "1758039",
    "end": "1764279"
  },
  {
    "text": "thank you okay and one last question for",
    "start": "1764279",
    "end": "1770039"
  },
  {
    "text": "K hi thank you for time so it looks like uh from like an operator perspective",
    "start": "1770760",
    "end": "1776440"
  },
  {
    "text": "right the the persistent volumes are basically abstracted away but then like",
    "start": "1776440",
    "end": "1782200"
  },
  {
    "text": "if you're on a bare metal system where the persistent volumes is backed by a single machine right like your operating",
    "start": "1782200",
    "end": "1789960"
  },
  {
    "text": "mode of uh maintenance for the database changes well even though you have replication right like what what he",
    "start": "1789960",
    "end": "1796159"
  },
  {
    "text": "alluded to so like uh what's the I guess the the practice there like do you have like an internal operator operate uh",
    "start": "1796159",
    "end": "1803600"
  },
  {
    "text": "automating that on top of the like open- Source uh postgress operator I guess",
    "start": "1803600",
    "end": "1810360"
  },
  {
    "text": "that's the automation that's being injected right I'm not sure I understand what it is you're asking so you you",
    "start": "1810360",
    "end": "1815679"
  },
  {
    "text": "talked about the uh persistent volumes being abstracted right like for I guess",
    "start": "1815679",
    "end": "1821799"
  },
  {
    "text": "like it's a like let's say I'm I'm deploying the post Chris operator on bare metal machines right and the",
    "start": "1821799",
    "end": "1828360"
  },
  {
    "text": "persistent volumes are basically tied to a machine unless like you deploy like a",
    "start": "1828360",
    "end": "1833919"
  },
  {
    "text": "remote storage they don't have to be solution it could be S3 storage I mean I didn't show it in the simple manifest",
    "start": "1833919",
    "end": "1839240"
  },
  {
    "text": "but you can configure your volumes wherever you want you could have storage in the cloud you can have local volumes",
    "start": "1839240",
    "end": "1845080"
  },
  {
    "text": "whatever you want right right but then like if I choose a local volume then my operating model changes right and then I",
    "start": "1845080",
    "end": "1851600"
  },
  {
    "text": "have to like basically extend that that operator to like take that into",
    "start": "1851600",
    "end": "1860039"
  },
  {
    "text": "consideration I'm still not sure I fully understood your question but I'm more than happy to talk about it afterwards",
    "start": "1860039",
    "end": "1866559"
  },
  {
    "text": "yeah it thank you Karen we really appreciate it thank you",
    "start": "1866559",
    "end": "1874200"
  }
]