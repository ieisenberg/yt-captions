[
  {
    "text": "hello everyone I'm fenny I'm based out of Bangalore India I have been working",
    "start": "320",
    "end": "6279"
  },
  {
    "text": "with red hat since past three years and at work I mostly spend my time",
    "start": "6279",
    "end": "12960"
  },
  {
    "text": "developing and maintaining open source kubernetes controllers with this I'll",
    "start": "12960",
    "end": "18199"
  },
  {
    "text": "hand over the Baton to Francesco hi everyone I'm Francesco I'm From Italy and I Jo read that two years",
    "start": "18199",
    "end": "25279"
  },
  {
    "text": "ago I usually spend most of my time developing kubernetes controller and contributing to the open source world",
    "start": "25279",
    "end": "31320"
  },
  {
    "text": "the best that I can today I'll be playing the role of the developer and of the Mente whereas fenny will be the",
    "start": "31320",
    "end": "37800"
  },
  {
    "text": "architect and my mentor so I'll give it back to fenny to start the",
    "start": "37800",
    "end": "44079"
  },
  {
    "text": "talk okay in the past few years we have worked on several kuties controllers and",
    "start": "44520",
    "end": "51039"
  },
  {
    "text": "as any newcomer we have made a lot of mistakes and we tried to learn from them",
    "start": "51039",
    "end": "56920"
  },
  {
    "text": "today as the talk title says we would like to focus on controller design and",
    "start": "56920",
    "end": "62640"
  },
  {
    "text": "good practices we'll introduce the main Concepts around extending kubernetes and",
    "start": "62640",
    "end": "68479"
  },
  {
    "text": "then move on to some demos while working on controllers we may Implement different designs and we will highlight",
    "start": "68479",
    "end": "76159"
  },
  {
    "text": "the pros and cons of those designs but before going deeper into the",
    "start": "76159",
    "end": "81960"
  },
  {
    "text": "talk let's do a little survey uh please raise your hand if you have already implemented the kues controller",
    "start": "81960",
    "end": "90840"
  },
  {
    "text": "okay quite a few uh how many of you have uh implemented a controller with three",
    "start": "90960",
    "end": "97439"
  },
  {
    "text": "crds at least at least okay okay uh",
    "start": "97439",
    "end": "102840"
  },
  {
    "text": "maybe more than five okay uh we have quite a few people who",
    "start": "102840",
    "end": "110840"
  },
  {
    "text": "are already familiar uh with the concepts but I'll still try to brush up",
    "start": "110840",
    "end": "116439"
  },
  {
    "text": "some of the key Concepts so that it's easier for us to dive into the",
    "start": "116439",
    "end": "121840"
  },
  {
    "text": "demos when we talk about extending kubernetes we can't avoid speaking about",
    "start": "121840",
    "end": "128360"
  },
  {
    "text": "custom resources and controllers CRS are very important part of the kuity stack",
    "start": "128360",
    "end": "134879"
  },
  {
    "text": "they allow us to extend kuber functionalities by adding our own Concepts to it indeed Uh custom resource",
    "start": "134879",
    "end": "142680"
  },
  {
    "text": "is an extension of the kubernetes API that is not necessarily available in a",
    "start": "142680",
    "end": "148200"
  },
  {
    "text": "default kubernetes installation they have become so important that even many",
    "start": "148200",
    "end": "153360"
  },
  {
    "text": "core communities functions are now built using custom resources making",
    "start": "153360",
    "end": "158640"
  },
  {
    "text": "communities more modular custom resources can appear and disappear in a",
    "start": "158640",
    "end": "164040"
  },
  {
    "text": "running cluster through Dynamic registration and cluster admins can",
    "start": "164040",
    "end": "169120"
  },
  {
    "text": "update custom resources independently of the cluster itself to create a new",
    "start": "169120",
    "end": "175159"
  },
  {
    "text": "custom resource we need to define a custom resource definition d detailing",
    "start": "175159",
    "end": "180319"
  },
  {
    "text": "the resource name and schema which is usually an open API V3 schema the",
    "start": "180319",
    "end": "187360"
  },
  {
    "text": "kubernetes API serves and handles the storage of your custom resource so it",
    "start": "187360",
    "end": "193560"
  },
  {
    "text": "exposes end points that we can invoke for crowd operations on",
    "start": "193560",
    "end": "200280"
  },
  {
    "text": "them together with custom resources and custom resource definitions we find",
    "start": "202360",
    "end": "207519"
  },
  {
    "text": "controllers uh controller tracks at least one custom resource type and which",
    "start": "207519",
    "end": "213080"
  },
  {
    "text": "is not necessarily a custom resource these objects have a spec field that",
    "start": "213080",
    "end": "218200"
  },
  {
    "text": "represents the desired State and a status field that describes the current",
    "start": "218200",
    "end": "223959"
  },
  {
    "text": "state of the object now as you can imagine as an",
    "start": "223959",
    "end": "230599"
  },
  {
    "text": "example like if the controller is invoked two times on",
    "start": "230599",
    "end": "235920"
  },
  {
    "text": "the same event it",
    "start": "235920",
    "end": "241680"
  },
  {
    "text": "will it this whole process is called like reconciliation so as an important",
    "start": "241680",
    "end": "247680"
  },
  {
    "text": "characteristic of reconciliation that is the item potency and Reconciliation",
    "start": "247680",
    "end": "252920"
  },
  {
    "text": "should always reconcile the state by reading all the state it needs and then",
    "start": "252920",
    "end": "258079"
  },
  {
    "text": "write the updates to it the state it needs this allows like your controller",
    "start": "258079",
    "end": "265600"
  },
  {
    "text": "to correctly respond to generic events and then adjust to the scheme keeped or coess events and easily deal with",
    "start": "265600",
    "end": "273440"
  },
  {
    "text": "application startup so as an example if the reconciler is invoked two times on",
    "start": "273440",
    "end": "279479"
  },
  {
    "text": "the same event it will produce the same result for each invocation now we can",
    "start": "279479",
    "end": "286080"
  },
  {
    "text": "all imagine like a lot of boiler plate code is required for a new",
    "start": "286080",
    "end": "291759"
  },
  {
    "text": "controller this Cube Builder is a tool that helps coping with that complexity",
    "start": "291759",
    "end": "297120"
  },
  {
    "text": "and by the means of cube Builder we can easily scold the code required to create",
    "start": "297120",
    "end": "302479"
  },
  {
    "text": "our own controllers and crds that being said uh let's move on to",
    "start": "302479",
    "end": "309479"
  },
  {
    "text": "the Practical part I would like to develop a very simple project that I have in my mind we just need two custom",
    "start": "309479",
    "end": "317440"
  },
  {
    "text": "resources namely Fu and bar with their relative controllers I have already shared these",
    "start": "317440",
    "end": "324000"
  },
  {
    "text": "requirements with Francisco let's see if he has already worked onto them okay",
    "start": "324000",
    "end": "329759"
  },
  {
    "text": "okay yeah I did I already started looking into this and started looking into Cube Builder and I've used it to",
    "start": "329759",
    "end": "336600"
  },
  {
    "text": "scaffold our project I understood how to use it in order to initialize the",
    "start": "336600",
    "end": "342000"
  },
  {
    "text": "project uh the project folder and add the code for the custom resources and the controllers I even recorded a demo",
    "start": "342000",
    "end": "349520"
  },
  {
    "text": "so we can see it the first thing I did was to initialize the project I used the",
    "start": "349520",
    "end": "355319"
  },
  {
    "text": "init comment of cube Builder to create an empty project the the project folder",
    "start": "355319",
    "end": "360680"
  },
  {
    "text": "now contains a lot of files that we can use to build and test a Content rized go",
    "start": "360680",
    "end": "366160"
  },
  {
    "text": "Application that integrates with kubernetes apis however we still have nothing about Fu and",
    "start": "366160",
    "end": "373360"
  },
  {
    "text": "bar for that I used the create API command twice one time for f and one",
    "start": "373360",
    "end": "379720"
  },
  {
    "text": "time for bar this command created the go files for the custom resource and for",
    "start": "379720",
    "end": "386199"
  },
  {
    "text": "its controller we'll now see together the full controller code that we can find in",
    "start": "386199",
    "end": "392160"
  },
  {
    "text": "the internal controller uh folder as you can see it contains um an empty",
    "start": "392160",
    "end": "399680"
  },
  {
    "text": "reconcile function here you see the to-do a your logic here that's an empty",
    "start": "399680",
    "end": "405360"
  },
  {
    "text": "reconcile function and this is where we're going to put the logic of our controller it also contains a setup",
    "start": "405360",
    "end": "411960"
  },
  {
    "text": "functions that builds the controller and register the controllers here we Define",
    "start": "411960",
    "end": "417280"
  },
  {
    "text": "which are the events the controller is in interest into in this case the controller is is interest on events on",
    "start": "417280",
    "end": "424599"
  },
  {
    "text": "Fu so anytime an event on Fu occurs the controller executes the reconciliation",
    "start": "424599",
    "end": "431759"
  },
  {
    "text": "logic together with this the cube Builder create TPI command also created",
    "start": "431759",
    "end": "437520"
  },
  {
    "text": "the go files for our custom resources they contains regular go structures that",
    "start": "437520",
    "end": "444160"
  },
  {
    "text": "can be serialized to Json or to yaml as you can see there is a fo pack",
    "start": "444160",
    "end": "449680"
  },
  {
    "text": "structure for the desired State and the full status for the current",
    "start": "449680",
    "end": "454919"
  },
  {
    "text": "state we still missing though are the full and bars custom resource",
    "start": "454919",
    "end": "460479"
  },
  {
    "text": "definitions manifest we can create those manifest by leveraging on the make",
    "start": "460479",
    "end": "465800"
  },
  {
    "text": "manifest rule that CU Builder provided the crd manifests are generated from the",
    "start": "465800",
    "end": "471720"
  },
  {
    "text": "go files and stored in the config crd folder we can use those manifest to",
    "start": "471720",
    "end": "477639"
  },
  {
    "text": "dynamically register our c custom resources in a cluster do you like",
    "start": "477639",
    "end": "483960"
  },
  {
    "text": "it nice you did a really great job now that we have the skeleton of our project",
    "start": "483960",
    "end": "490960"
  },
  {
    "text": "we can go into the details of our resources so Fu will have a Fu field in",
    "start": "490960",
    "end": "498240"
  },
  {
    "text": "its spec and a last reconciled field in the status the spec. fu field is",
    "start": "498240",
    "end": "505560"
  },
  {
    "text": "provided by the user whereas the last reconciled field is set by the controller to track",
    "start": "505560",
    "end": "512719"
  },
  {
    "text": "the last time it reconciled the resource bar will have a status Field named Fu so",
    "start": "512719",
    "end": "521200"
  },
  {
    "text": "if a Fu and bar with the same name exist we want bar to store the value of foo's",
    "start": "521200",
    "end": "528240"
  },
  {
    "text": "spec. Fu in its status now our use case is quite simple",
    "start": "528240",
    "end": "534399"
  },
  {
    "text": "we don't have any real interdependency or relationship between our custom resources",
    "start": "534399",
    "end": "540959"
  },
  {
    "text": "that being said can we try to implement this Francesco sure let me get into it",
    "start": "540959",
    "end": "547200"
  },
  {
    "text": "okay to me it's quite easy we can Implement everything all this logic in the F controller itself it will be very",
    "start": "547200",
    "end": "554560"
  },
  {
    "text": "easy the F controller is already reacting to events on fo so yeah we",
    "start": "554560",
    "end": "559640"
  },
  {
    "text": "should just Implement our this logic so we react to events on F we check if F exists if it exists we update it and in",
    "start": "559640",
    "end": "567200"
  },
  {
    "text": "any case we then try to get bar and update bar coherently",
    "start": "567200",
    "end": "573240"
  },
  {
    "text": "so that that will be the code I hope it's readable that will be the code we",
    "start": "573240",
    "end": "579839"
  },
  {
    "text": "just get the F on top and if it exists we're going to update the F status after",
    "start": "579839",
    "end": "586480"
  },
  {
    "text": "that we in any case go to get bar and if F exist we update the bar status",
    "start": "586480",
    "end": "593279"
  },
  {
    "text": "coherently with what we found about F so let me put this atw work I share my",
    "start": "593279",
    "end": "600839"
  },
  {
    "text": "terminal it's split in three different pane on the top left is where I'm going to input the commands on the top right",
    "start": "600839",
    "end": "608040"
  },
  {
    "text": "you see a watch on the my sample resource bar resource and at the bottom you see the",
    "start": "608040",
    "end": "615680"
  },
  {
    "text": "controller logs when we apply the bar resource when we create it we see that it pops up in",
    "start": "615680",
    "end": "622800"
  },
  {
    "text": "the top right and then we do not have any logs but when we create the fo we",
    "start": "622800",
    "end": "628880"
  },
  {
    "text": "see that some logs are here the the bar is reconciled so we have the status set",
    "start": "628880",
    "end": "635920"
  },
  {
    "text": "and also the f is reconciled we have the status. last uh reconciled set so this",
    "start": "635920",
    "end": "641880"
  },
  {
    "text": "is working great what do you think okay but this scenario is so easy",
    "start": "641880",
    "end": "650279"
  },
  {
    "text": "that even the wrong design just works but if we think more about the design we",
    "start": "650279",
    "end": "656279"
  },
  {
    "text": "have implemented we can feel that there may be some drawbacks with this approach",
    "start": "656279",
    "end": "661440"
  },
  {
    "text": "that we can call single controller multiple resources investigating a bit more we can see that it's not scalable",
    "start": "661440",
    "end": "670040"
  },
  {
    "text": "if a single controller handles multiple CRS it could become a bottl neck",
    "start": "670040",
    "end": "675720"
  },
  {
    "text": "reducing the overall efficiency and responsiveness of the system now if an",
    "start": "675720",
    "end": "682200"
  },
  {
    "text": "error occurs on one CR it could potentially impact all the CRS managed",
    "start": "682200",
    "end": "688120"
  },
  {
    "text": "by the single controller hence there will be no error isolation it could lead to raise",
    "start": "688120",
    "end": "695600"
  },
  {
    "text": "conditions and require complex synchronizations especially if the CRS",
    "start": "695600",
    "end": "701000"
  },
  {
    "text": "are interdependent each controller should ideally have only one job to Adder to",
    "start": "701000",
    "end": "707880"
  },
  {
    "text": "that is the single responsibility principle this approach simplifies development and debugging and makes the",
    "start": "707880",
    "end": "714959"
  },
  {
    "text": "system more robust which is clearly not the case over here and finally a single",
    "start": "714959",
    "end": "721360"
  },
  {
    "text": "controller managing multiple CS can increase the complexity of the code making it harder to understand maintain",
    "start": "721360",
    "end": "728680"
  },
  {
    "text": "and debug this High complexity is not easy to spot now as our use case is very",
    "start": "728680",
    "end": "736000"
  },
  {
    "text": "easy it will be more evident when requirements start to pile up speaking",
    "start": "736000",
    "end": "742040"
  },
  {
    "text": "of which we have a new requirement indeed and I guess this will identify",
    "start": "742040",
    "end": "748279"
  },
  {
    "text": "some problems and help us through our requirements changed a bit",
    "start": "748279",
    "end": "753600"
  },
  {
    "text": "over time and now we need to have another flag in Bar's status that's a",
    "start": "753600",
    "end": "760199"
  },
  {
    "text": "Boolean Field named ready that we have added over there so we are already",
    "start": "760199",
    "end": "765240"
  },
  {
    "text": "provided with the logic to calculate the Readiness as we saw before so we will",
    "start": "765240",
    "end": "770279"
  },
  {
    "text": "not go into the details over there and fortunately there are no changes required on the food side it is as it is",
    "start": "770279",
    "end": "779920"
  },
  {
    "text": "now that seems the right work for the bar controller that's what I feel and in",
    "start": "780040",
    "end": "785600"
  },
  {
    "text": "the bar controller we need to check that if a bar exists and in that case it",
    "start": "785600",
    "end": "792440"
  },
  {
    "text": "should calculate the Readiness via the provided util and then go ahead and update it now this design won't require",
    "start": "792440",
    "end": "800320"
  },
  {
    "text": "any change in the fu controller we got a new requirement and we are going to add that into the bar",
    "start": "800320",
    "end": "808000"
  },
  {
    "text": "controller as I already said uh there is not much to say on the code of the Foo",
    "start": "808120",
    "end": "813920"
  },
  {
    "text": "controller and we can see that it's not impacted at all what we see earlier it's the same",
    "start": "813920",
    "end": "820120"
  },
  {
    "text": "thing now the changes to the bar controller are quite easy and as we said",
    "start": "820120",
    "end": "825639"
  },
  {
    "text": "before we just need to fetch the bar resource calculate its Readiness value",
    "start": "825639",
    "end": "830720"
  },
  {
    "text": "and store it in the status when we put the controller to",
    "start": "830720",
    "end": "836720"
  },
  {
    "text": "work we can see that bar and F resources are created",
    "start": "836720",
    "end": "842360"
  },
  {
    "text": "correctly and their status is eventually reconciled to but the reconciliation",
    "start": "842360",
    "end": "848800"
  },
  {
    "text": "process logs an error when we look closely at the error",
    "start": "848800",
    "end": "855320"
  },
  {
    "text": "the error is due to the concurrent update on bar and indeed both",
    "start": "855320",
    "end": "860680"
  },
  {
    "text": "controllers are updating bar at the same time and one of them is receiving an error because the resource it's trying",
    "start": "860680",
    "end": "867480"
  },
  {
    "text": "to update is already out of date this is also evident from the",
    "start": "867480",
    "end": "872720"
  },
  {
    "text": "workflow which we drew earlier as both the controllers are trying to update the",
    "start": "872720",
    "end": "878480"
  },
  {
    "text": "same resource so as we forward while speaking",
    "start": "878480",
    "end": "885279"
  },
  {
    "text": "of the drawbacks of the previous single controller multiple resources scenario",
    "start": "885279",
    "end": "890519"
  },
  {
    "text": "when we increase the complexity of the logic we have to implement we can see an error and let's take a look at some",
    "start": "890519",
    "end": "897920"
  },
  {
    "text": "considerations on this design which we have multiple controllers updating a",
    "start": "897920",
    "end": "903959"
  },
  {
    "text": "single resource we had a raise condition while updating bar trying to add a",
    "start": "903959",
    "end": "910360"
  },
  {
    "text": "condition to the CR we encountered the error the object has been modified please apply your changes to the latest",
    "start": "910360",
    "end": "916680"
  },
  {
    "text": "version and try again this kind of error can trigger a repeative Reconciliation",
    "start": "916680",
    "end": "922959"
  },
  {
    "text": "process when multiple controller watches and reconciles the same kind redundant",
    "start": "922959",
    "end": "929399"
  },
  {
    "text": "operations may occur leading to unnecessary resource usage and that also",
    "start": "929399",
    "end": "934440"
  },
  {
    "text": "means there will be performance issues now if two or more controllers are",
    "start": "934440",
    "end": "940000"
  },
  {
    "text": "updating let's say the same status condition it may be very hard to trouble shoot and track which Controller made",
    "start": "940000",
    "end": "947720"
  },
  {
    "text": "the change we are seeing in the resource the introduced High complexity of the code makes it more",
    "start": "947720",
    "end": "955759"
  },
  {
    "text": "challenging uh to understand or troubleshoot all the problems now think",
    "start": "955759",
    "end": "962040"
  },
  {
    "text": "about a worst case scenario when controllers have different interpretations of the CR State they may",
    "start": "962040",
    "end": "969639"
  },
  {
    "text": "constantly override each other's changes this conflict can create a loop with",
    "start": "969639",
    "end": "976279"
  },
  {
    "text": "controllers endlessly over uh disputing the cr's state we definitely do not want",
    "start": "976279",
    "end": "982199"
  },
  {
    "text": "to end up in this uh scenario Francisco do you have a way out of this for us",
    "start": "982199",
    "end": "989880"
  },
  {
    "text": "yeah let me get it this uh we definitely need to refactor the logic then it is",
    "start": "989880",
    "end": "995120"
  },
  {
    "text": "now evident to me that we need to move the bar related logic to the bar",
    "start": "995120",
    "end": "1000360"
  },
  {
    "text": "controller so we need to remove that from the full controller this will",
    "start": "1000360",
    "end": "1005399"
  },
  {
    "text": "indeed have an an impact on the F controller as you can see it's now very very slim it's just look reacting to",
    "start": "1005399",
    "end": "1013160"
  },
  {
    "text": "events on Fu and if a Fu exist it will update Fu that's the only thing that it should do",
    "start": "1013160",
    "end": "1019399"
  },
  {
    "text": "but the bar controller is now way more complex we need to map events on food to",
    "start": "1019399",
    "end": "1025160"
  },
  {
    "text": "events on map yeah on bar sorry and there we need to check if bar exists if",
    "start": "1025160",
    "end": "1031520"
  },
  {
    "text": "it exists if it doesn't exist that's easy we have nothing to do we're fine",
    "start": "1031520",
    "end": "1036760"
  },
  {
    "text": "but if it exists we now need to get full and update the bar status with respect",
    "start": "1036760",
    "end": "1043640"
  },
  {
    "text": "to what we s on food so if it exist we're going to update the status with the data from the fu if it doesn't exist",
    "start": "1043640",
    "end": "1051080"
  },
  {
    "text": "we're going to remove the data from bar status then we need to calculate the",
    "start": "1051080",
    "end": "1056400"
  },
  {
    "text": "Readiness for bar and update the resource so a quick glance at the full",
    "start": "1056400",
    "end": "1063600"
  },
  {
    "text": "reconciler the full Rec consiler is now way smaller it's only care about F and",
    "start": "1063600",
    "end": "1069640"
  },
  {
    "text": "it will just get the fu and if it exist will set the last reconcile field in the",
    "start": "1069640",
    "end": "1076799"
  },
  {
    "text": "status and return however the bar consiler as we said is",
    "start": "1076799",
    "end": "1082559"
  },
  {
    "text": "way more complex it's checking if bar exists and if it exist it will go and",
    "start": "1082559",
    "end": "1088480"
  },
  {
    "text": "get full and it will update the status of bar coherently after that it will calculate",
    "start": "1088480",
    "end": "1095600"
  },
  {
    "text": "the Readiness update the status of bar and yeah update",
    "start": "1095600",
    "end": "1100840"
  },
  {
    "text": "it finally we need to map the events of on full to events on bar and register",
    "start": "1100840",
    "end": "1109000"
  },
  {
    "text": "those as a trigger for the uh bar controller we can easily do this by",
    "start": "1109000",
    "end": "1114600"
  },
  {
    "text": "registering our watches and and using a mapping functions that's uh mapping the",
    "start": "1114600",
    "end": "1120039"
  },
  {
    "text": "events on F to events on bar that's quite easy in our case because we just need to get the name and space of the",
    "start": "1120039",
    "end": "1127200"
  },
  {
    "text": "resources that's the way we are matching fools and bars so with these changes I now expect",
    "start": "1127200",
    "end": "1135240"
  },
  {
    "text": "the controller just to run properly without any herror I you can see we created the resource that's been already",
    "start": "1135240",
    "end": "1141280"
  },
  {
    "text": "reconciled from the bar controller we have the Readiness set set and when we",
    "start": "1141280",
    "end": "1146799"
  },
  {
    "text": "create the F we also see the F and we in the bar status and we see the F status",
    "start": "1146799",
    "end": "1153440"
  },
  {
    "text": "set correctly so that seems to work to me we don't see any error great fenny",
    "start": "1153440",
    "end": "1160440"
  },
  {
    "text": "your help was important thank you it's way better now",
    "start": "1160440",
    "end": "1167960"
  },
  {
    "text": "so uh a single resource controller design is considered to be the good practice and we can overcome the",
    "start": "1167960",
    "end": "1175159"
  },
  {
    "text": "drawbacks we encountered in the previous controller designs indeed we have a lot of benefits",
    "start": "1175159",
    "end": "1181760"
  },
  {
    "text": "being mindful in implementing the single resource controller design when we",
    "start": "1181760",
    "end": "1186919"
  },
  {
    "text": "follow this design we Adder to the encapsulation the single responsibility",
    "start": "1186919",
    "end": "1192280"
  },
  {
    "text": "principle and the cohesion Concepts that means that controllers will be independent of each other leading to a",
    "start": "1192280",
    "end": "1199520"
  },
  {
    "text": "decoupled system and each controller will be responsible to one and only one",
    "start": "1199520",
    "end": "1205320"
  },
  {
    "text": "resource this design increases the ease of maintaining reusing and extending the controllers it",
    "start": "1205320",
    "end": "1212880"
  },
  {
    "text": "will scale a lot better if each controller is managing just a single",
    "start": "1212880",
    "end": "1218280"
  },
  {
    "text": "kind it's hard for any one of them to become a bottleneck and reduce the",
    "start": "1218280",
    "end": "1223640"
  },
  {
    "text": "overall efficiency and responsiveness of the whole system it will have isolation",
    "start": "1223640",
    "end": "1229960"
  },
  {
    "text": "because all the errors for a single resource will impact only a single controller this avides the problem on a",
    "start": "1229960",
    "end": "1237120"
  },
  {
    "text": "resource to affect other resources and make the system easier to debug and",
    "start": "1237120",
    "end": "1242440"
  },
  {
    "text": "maintain this also means that the system will be a lot more simpler more robust",
    "start": "1242440",
    "end": "1249080"
  },
  {
    "text": "and more reliable so to conclude we should implement the single controller single",
    "start": "1249080",
    "end": "1255799"
  },
  {
    "text": "resource design whenever possible as as it will bring us a lot of",
    "start": "1255799",
    "end": "1262679"
  },
  {
    "text": "benefits this ends our talk thank you for your attention and if you have any",
    "start": "1262720",
    "end": "1268280"
  },
  {
    "text": "questions please do ask or you can reach out",
    "start": "1268280",
    "end": "1272880"
  },
  {
    "text": "later thanks guys yeah yeah yeah you",
    "start": "1276480",
    "end": "1281559"
  },
  {
    "text": "want to come it's on uh does it matter if the",
    "start": "1281559",
    "end": "1288240"
  },
  {
    "text": "reason resource is a cluster so please bring it closer to the mouth yeah am I audible yes so does it matter if the",
    "start": "1288240",
    "end": "1295360"
  },
  {
    "text": "resource is like a cluster like more than one thing like it has its own logic",
    "start": "1295360",
    "end": "1301120"
  },
  {
    "text": "of later elections and all that I'm not sure I got I got the",
    "start": "1301120",
    "end": "1306960"
  },
  {
    "text": "question so right now question the the design is that you have a single controller controlling one resource yes",
    "start": "1306960",
    "end": "1313960"
  },
  {
    "text": "that my question is that does that does it matter if that resource is one thing or like a cluster like an example would",
    "start": "1313960",
    "end": "1319960"
  },
  {
    "text": "be a Kafka cluster or it has to be one thing it means that if or is it like an",
    "start": "1319960",
    "end": "1325440"
  },
  {
    "text": "abstract thing because Kafka is considered as one thing but if you look into it further it's more than one kind",
    "start": "1325440",
    "end": "1332159"
  },
  {
    "text": "of pod no he means that if uh you can be",
    "start": "1332159",
    "end": "1337640"
  },
  {
    "text": "consider a cluster as one resource and it has to be a single entity or it can be considered as a whole resource like a",
    "start": "1337640",
    "end": "1344039"
  },
  {
    "text": "cluster a cluster or a group of clusters or something of that sort it's not that right it's it's just one",
    "start": "1344039",
    "end": "1350640"
  },
  {
    "text": "entity any single so basically the idea is that when you have a a customer when",
    "start": "1350640",
    "end": "1356720"
  },
  {
    "text": "you are extending the cluster by adding another custom resource so what you want to add your own logic like for example",
    "start": "1356720",
    "end": "1362960"
  },
  {
    "text": "you can imagine a um I don't know in this case is a a Fu For example you're adding another concept to the to the",
    "start": "1362960",
    "end": "1369360"
  },
  {
    "text": "cluster you will need some probably some reconciliation some some logic that's going to to take care of the of the life",
    "start": "1369360",
    "end": "1376480"
  },
  {
    "text": "cycle so in in a class yeah so so just to reiterate my question",
    "start": "1376480",
    "end": "1383600"
  },
  {
    "text": "again so we understand that the resource being a cluster is self-managed like the",
    "start": "1383600",
    "end": "1389480"
  },
  {
    "text": "logic to control these different pods it's already existing within the",
    "start": "1389480",
    "end": "1394640"
  },
  {
    "text": "application logic but when we export it as a operator or a custom resource does",
    "start": "1394640",
    "end": "1400279"
  },
  {
    "text": "it do we still look at it having one controller handling all the Brokers or",
    "start": "1400279",
    "end": "1406480"
  },
  {
    "text": "all the servers or do we need to have some other logic like saying that oh each broker may have a different kind of",
    "start": "1406480",
    "end": "1413360"
  },
  {
    "text": "Rec not yeah so yeah exactly so is it like is the",
    "start": "1413360",
    "end": "1419600"
  },
  {
    "text": "resource pointing to one thing or is it like does it matter if it's more than one application logic is there that",
    "start": "1419600",
    "end": "1427600"
  },
  {
    "text": "that's another more complex uh scenario by the way because you're here talking about having a custom resource that's",
    "start": "1427600",
    "end": "1433200"
  },
  {
    "text": "managing then that's basically under the hood translating to different other resources like PA pods Etc like for",
    "start": "1433200",
    "end": "1439520"
  },
  {
    "text": "example in an operator scenario in which you deploy your own rest database and then you will this will maintain the",
    "start": "1439520",
    "end": "1446200"
  },
  {
    "text": "pods Etc and deployment a little B more still does it still apply over there",
    "start": "1446200",
    "end": "1452840"
  },
  {
    "text": "that will still uh yeah that will still apply over there but uh you will have to",
    "start": "1452840",
    "end": "1457880"
  },
  {
    "text": "take into consideration that uh still you need to manage the status of those resources yeah through One controller",
    "start": "1457880",
    "end": "1465039"
  },
  {
    "text": "the application logic I understand because but in the new one also like if you are trying to change something in",
    "start": "1465039",
    "end": "1470399"
  },
  {
    "text": "their status it has to be maintained by only one controller right so that's it's",
    "start": "1470399",
    "end": "1475520"
  },
  {
    "text": "not like you cannot do that you can but then there are drawbacks to that so oh",
    "start": "1475520",
    "end": "1482880"
  },
  {
    "text": "sorry um that case is also a little bit more complex because then you have some",
    "start": "1482880",
    "end": "1488000"
  },
  {
    "text": "logic already for the pods Etc that's that's already provided by kubernetes you know",
    "start": "1488000",
    "end": "1493240"
  },
  {
    "text": "so there you need to be very careful because you have also a relationship between this your C some resource and a",
    "start": "1493240",
    "end": "1500039"
  },
  {
    "text": "dependency a secondary resource in that case so you need to be wise there to do not WR logic that's going to impact the",
    "start": "1500039",
    "end": "1508200"
  },
  {
    "text": "other logic that's still still existing but in that case your controller is",
    "start": "1508200",
    "end": "1513399"
  },
  {
    "text": "driving the spec not the status you know so you should not probably cope with the",
    "start": "1513399",
    "end": "1518520"
  },
  {
    "text": "status of the Pod but you should cope with the spec of the Pod the Pod or the deployment from your own controller so",
    "start": "1518520",
    "end": "1525559"
  },
  {
    "text": "it'll be more of kind of reference rather than it'll be immutable kind of resources and you'll be watching them",
    "start": "1525559",
    "end": "1532279"
  },
  {
    "text": "and reacting you can watch them but uh you can watch them but you cannot uh do",
    "start": "1532279",
    "end": "1538080"
  },
  {
    "text": "the changes to the I mean you shouldn't do the changes to the status okay you should leave the application logic",
    "start": "1538080",
    "end": "1543120"
  },
  {
    "text": "within the applic single controller so watching is fine that I mean that anyways you will have to do because as",
    "start": "1543120",
    "end": "1549000"
  },
  {
    "text": "you increase the complexity you need to watch many different resources so watching is fine but changing its status",
    "start": "1549000",
    "end": "1556039"
  },
  {
    "text": "should be from One controller okay good thank you thank you sorry I didn't got question please um",
    "start": "1556039",
    "end": "1563720"
  },
  {
    "text": "I so great talk and I have a I have two questions so first question is um you",
    "start": "1563720",
    "end": "1570399"
  },
  {
    "text": "described three scenarios right the first one was uh you had uh a single controller which was managing two",
    "start": "1570399",
    "end": "1576720"
  },
  {
    "text": "resources then you tried to then in the second scenario you had overlapping uh I",
    "start": "1576720",
    "end": "1582279"
  },
  {
    "text": "had one controller which was managing managing both and the other was managing one then there were two controllers",
    "start": "1582279",
    "end": "1587600"
  },
  {
    "text": "which was managing and in the third scenario it was a single resource so in the slides I'm not sure",
    "start": "1587600",
    "end": "1595080"
  },
  {
    "text": "if I followed right but it seems like um you kind of tied single uh single",
    "start": "1595080",
    "end": "1602760"
  },
  {
    "text": "controller multiple resource to be in the same uh kind of place as uh say",
    "start": "1602760",
    "end": "1609679"
  },
  {
    "text": "multiple controller single resource am I right does that make sense uh I'm not",
    "start": "1609679",
    "end": "1615960"
  },
  {
    "text": "sure if I understand that so what I'm trying to say is the first and second scenarios are different right but but in",
    "start": "1615960",
    "end": "1622840"
  },
  {
    "text": "the slides was it also mentioned like that because I kind of understood it like you gave the same kind of",
    "start": "1622840",
    "end": "1628880"
  },
  {
    "text": "disadvantages for both of them they are mostly similar but uh in the first one",
    "start": "1628880",
    "end": "1634440"
  },
  {
    "text": "it was like when you do it like you are not seeing something very uh evidently or very easily and it's",
    "start": "1634440",
    "end": "1643000"
  },
  {
    "text": "like maximum you can see that it might be uh going very smoothly but you don't",
    "start": "1643000",
    "end": "1648440"
  },
  {
    "text": "spot that out when you scale up then you find it that okay it's not working fine but mostly the drawbacks are almost",
    "start": "1648440",
    "end": "1654720"
  },
  {
    "text": "similar but we encountered an error in the second scenario we didn't encounter any error in the first scenario yeah",
    "start": "1654720",
    "end": "1660919"
  },
  {
    "text": "because it was like the r is impossible in the I mean r condition yeah so there was no race conditions it was there in",
    "start": "1660919",
    "end": "1666840"
  },
  {
    "text": "the second one and they are almost tied up that way but I mean there is a difference to it like when you are",
    "start": "1666840",
    "end": "1672279"
  },
  {
    "text": "managing when you are trying to uh manage the same resource from uh like two like two controlers are trying to",
    "start": "1672279",
    "end": "1679480"
  },
  {
    "text": "manage the same resource raise condition is the first one and it will lead to the other drawbacks which are tied to it MH",
    "start": "1679480",
    "end": "1685799"
  },
  {
    "text": "so it will not scale all the things are already tied up so it's almost similar but in a second scenario so that is",
    "start": "1685799",
    "end": "1692000"
  },
  {
    "text": "something we took like two examples which are like very common when we try to implement that we intend almost like",
    "start": "1692000",
    "end": "1698360"
  },
  {
    "text": "not to go that way but our mindset is okay we can do this so that's the common scenarios which we took okay so for the",
    "start": "1698360",
    "end": "1704720"
  },
  {
    "text": "first scenario I also did not get like what kind of challenges real life example where scale can cause an issue",
    "start": "1704720",
    "end": "1710919"
  },
  {
    "text": "so that's what we did uh in real life if if I mean it it just worked but when we",
    "start": "1710919",
    "end": "1717279"
  },
  {
    "text": "try to scale when the requirement piled up you are never going to design a system which is like just going to be",
    "start": "1717279",
    "end": "1722559"
  },
  {
    "text": "there as it is till the last you will always have requirements to be added to that controller or you will always need",
    "start": "1722559",
    "end": "1728399"
  },
  {
    "text": "to watch some more resources or you will always add up try to scale that better so that's what we did in the second one",
    "start": "1728399",
    "end": "1735039"
  },
  {
    "text": "that if you have not uh followed that design from the start itself what happens when you try to scale that's",
    "start": "1735039",
    "end": "1740799"
  },
  {
    "text": "what we did in the second scenario when we try to scale when we try to add the requirement to that we encountered the",
    "start": "1740799",
    "end": "1746440"
  },
  {
    "text": "error that would have been like you go through that then you find out that okay now we are not able to scale up then you",
    "start": "1746440",
    "end": "1751799"
  },
  {
    "text": "have to just redo everything just one in a real life scenario what the first scenario can be",
    "start": "1751799",
    "end": "1760000"
  },
  {
    "text": "really bad when you for example have the food in this case the food resource that",
    "start": "1760000",
    "end": "1765559"
  },
  {
    "text": "has a very complex or long reconciliation and that may fail",
    "start": "1765559",
    "end": "1770600"
  },
  {
    "text": "independently of others resources and you are stuck in your reconciliation",
    "start": "1770600",
    "end": "1777360"
  },
  {
    "text": "with bar that's never reconciled because the full logic produces an error so you",
    "start": "1777360",
    "end": "1784120"
  },
  {
    "text": "you don't have really you never reconcile bar in this case we try to",
    "start": "1784120",
    "end": "1789960"
  },
  {
    "text": "simplify to oversimplify to make the communication a little bit better so it's was not easy to emulate but that in",
    "start": "1789960",
    "end": "1798120"
  },
  {
    "text": "in a real life scenario that's what can be like that that can happen and that",
    "start": "1798120",
    "end": "1803320"
  },
  {
    "text": "happens a lot another thing is the her resolation so you you you're a little",
    "start": "1803320",
    "end": "1808760"
  },
  {
    "text": "bit you know you go to the logs try to understand what's happening and you find",
    "start": "1808760",
    "end": "1813799"
  },
  {
    "text": "nothing in the bar reconciler and you don't understand why bar is not reconciled or what's happening Etc and",
    "start": "1813799",
    "end": "1819960"
  },
  {
    "text": "then you need to go and filter full full controll it that's a little bit Contra Contra inuitive you know so those kind",
    "start": "1819960",
    "end": "1825720"
  },
  {
    "text": "of problems are more evident in the question one question so I the doubt is",
    "start": "1825720",
    "end": "1833519"
  },
  {
    "text": "like you know simplifies the maintainability of the controller but if",
    "start": "1833519",
    "end": "1838799"
  },
  {
    "text": "there's interdependency maybe you already explained but maintainability of the controllers",
    "start": "1838799",
    "end": "1845440"
  },
  {
    "text": "will simplify but if told there's interdependency of the CR",
    "start": "1845440",
    "end": "1850559"
  },
  {
    "text": "itself what is the your recommendation where it's supposed to handle outside the controller the application if",
    "start": "1850559",
    "end": "1857159"
  },
  {
    "text": "there's in between this resources itself I mean I have a differeny between",
    "start": "1857159",
    "end": "1865360"
  },
  {
    "text": "who and yeah okay in that case it's it's just a requirement you you're going to have this interdependence this this",
    "start": "1865360",
    "end": "1872519"
  },
  {
    "text": "relation between the two Resources by uh by requirement so I I'm not sure I got",
    "start": "1872519",
    "end": "1877559"
  },
  {
    "text": "the question oh yeah okay so that converts to like uh I mean a more",
    "start": "1877559",
    "end": "1884679"
  },
  {
    "text": "complex scenario that will be like the primary and the secondary resource so like that that's how it might go to the",
    "start": "1884679",
    "end": "1890840"
  },
  {
    "text": "uh dependency on it you I mean even though if it has a dependency on each",
    "start": "1890840",
    "end": "1895880"
  },
  {
    "text": "other there will always be something which is a primary resource for you like which is the main resource which you have to maintain you can watch other",
    "start": "1895880",
    "end": "1902679"
  },
  {
    "text": "resources yes that's not like you cannot watch uh like two resources from One",
    "start": "1902679",
    "end": "1907919"
  },
  {
    "text": "controller watch yeah you can watch it so the main thing realiz on you can watch as many resources you want but",
    "start": "1907919",
    "end": "1914720"
  },
  {
    "text": "make sure that you are only updating the status of one Rec yes yes reconciliation is on is one",
    "start": "1914720",
    "end": "1924000"
  },
  {
    "text": "yes sorry I just have one question left please we'll just finish that so I",
    "start": "1924000",
    "end": "1929159"
  },
  {
    "text": "wanted to know uh I what are the pitfalls of the solution that you",
    "start": "1929159",
    "end": "1934320"
  },
  {
    "text": "mentioned uh having one controller per Resource One thing I can think of is for the teams that are managing the",
    "start": "1934320",
    "end": "1941440"
  },
  {
    "text": "platforms there's that much more overhead because you have to keep track of U the newer version and then you have",
    "start": "1941440",
    "end": "1948720"
  },
  {
    "text": "to update all of them you have to kind of keep track of multiple controllers as opposed to just keeping track of one in",
    "start": "1948720",
    "end": "1955559"
  },
  {
    "text": "the first first case so uh I would say like it's a tradeoff for you like uh",
    "start": "1955559",
    "end": "1964039"
  },
  {
    "text": "it's not like you have to keep track of all the controllers it's always easy that one controll is managing one resource so you know that if an error",
    "start": "1964039",
    "end": "1970840"
  },
  {
    "text": "comes into one resource you know where to look but if it is only single controller I mean it's you I mean I know",
    "start": "1970840",
    "end": "1978159"
  },
  {
    "text": "like you are talking in uh in the terms of maintainability of those control",
    "start": "1978159",
    "end": "1983720"
  },
  {
    "text": "those controllers but I mean what would you rather have like a system where where",
    "start": "1983720",
    "end": "1991240"
  },
  {
    "text": "you cannot uh you know uh debug to a point like it takes you maybe 2 days to just reach to the error in the",
    "start": "1991240",
    "end": "1997960"
  },
  {
    "text": "controller itself or maybe just keep a track of I mean it's it's not like you cannot",
    "start": "1997960",
    "end": "2004240"
  },
  {
    "text": "do it I mean there are scenarios where you can't do it it's just the recommended practice which makes your",
    "start": "2004240",
    "end": "2009440"
  },
  {
    "text": "life easier thanks yeah wel excuse me uh I don't know let's do a",
    "start": "2009440",
    "end": "2016039"
  },
  {
    "text": "c okay so my uh I have three questions first would be um when you explained an",
    "start": "2016039",
    "end": "2021760"
  },
  {
    "text": "example where you first were getting F then updating it and then getting bar and then updating it my question would",
    "start": "2021760",
    "end": "2027480"
  },
  {
    "text": "be does that whole function have to be Atomic at some point of time the question is has that piece of code uh",
    "start": "2027480",
    "end": "2035039"
  },
  {
    "text": "has to be Atomic or not the creation the first get then update then get then",
    "start": "2035039",
    "end": "2040279"
  },
  {
    "text": "update this has to be Atomic Atomic it should be in sequence it should be important yes yes",
    "start": "2040279",
    "end": "2048480"
  },
  {
    "text": "it should be important but it should is pocy right yes so that's what is ask if",
    "start": "2048480",
    "end": "2054520"
  },
  {
    "text": "it repeats then also the state should no I'm I'm just saying if let's say get delete get delete even if the last",
    "start": "2054520",
    "end": "2060960"
  },
  {
    "text": "delete fails would we recreate this delete that we had done like roll back do we have to roll back or that's",
    "start": "2060960",
    "end": "2066720"
  },
  {
    "text": "fine that depends on the control of logic right so logic should be yeah L",
    "start": "2066720",
    "end": "2072158"
  },
  {
    "text": "the logic usually should be reconciliation yeah that means to to simplify to oversimplify you need to get",
    "start": "2072159",
    "end": "2079280"
  },
  {
    "text": "all when when you start the reconation you need to get all the information that you need for doing the the reconciliation and then uh update them",
    "start": "2079280",
    "end": "2086200"
  },
  {
    "text": "and two executions of the same on the same event with the same state initial State should lead to the same result so",
    "start": "2086200",
    "end": "2094440"
  },
  {
    "text": "that's a little definition of the second question would be uh would the controller logic be responsible for",
    "start": "2094440",
    "end": "2101079"
  },
  {
    "text": "handling the item potency the controller logic should be item poent so you should implement this like",
    "start": "2101079",
    "end": "2107599"
  },
  {
    "text": "um a common example is the between the difference yeah the with with two",
    "start": "2107599",
    "end": "2113079"
  },
  {
    "text": "functions is actually like you have an API that you can invoke that will",
    "start": "2113079",
    "end": "2118440"
  },
  {
    "text": "increment a variable that a counter that's not an important because that if you execute that two times because you",
    "start": "2118440",
    "end": "2124640"
  },
  {
    "text": "have a repeated event that will produce like three from one uh but if you have an a function an API that's set in the",
    "start": "2124640",
    "end": "2131960"
  },
  {
    "text": "value and you just give the value and the value should be three if you have two execution of the same event that",
    "start": "2131960",
    "end": "2137359"
  },
  {
    "text": "will produce three and you should aim at implementing a logic in the reconciliation that work this way so it",
    "start": "2137359",
    "end": "2143280"
  },
  {
    "text": "will get every time all the all the information they needs calculate the future State and and apply and apply the",
    "start": "2143280",
    "end": "2150280"
  },
  {
    "text": "the things that needs to to be done got it got that's idea okay and the last",
    "start": "2150280",
    "end": "2155319"
  },
  {
    "text": "question would be let's say I was stuck with the use case where um the first use case where you said like do something",
    "start": "2155319",
    "end": "2162760"
  },
  {
    "text": "when bar changes or food changes and everything was done in the same controller but let's say I don't see any",
    "start": "2162760",
    "end": "2169119"
  },
  {
    "text": "uh any change in that controller logic or dependency between F and bar for all",
    "start": "2169119",
    "end": "2174160"
  },
  {
    "text": "let's say 6 months or 7 months do you still think we should go with single controller or just just do it the normal",
    "start": "2174160",
    "end": "2180640"
  },
  {
    "text": "way that that's a trade-off you know if you have a um an example yeah a scenario",
    "start": "2180640",
    "end": "2186440"
  },
  {
    "text": "that's so easy like the first example you can just probably go that way you once a year to the good practice and but",
    "start": "2186440",
    "end": "2193800"
  },
  {
    "text": "that should just work you know um so in that case it depends from from from the",
    "start": "2193800",
    "end": "2199040"
  },
  {
    "text": "needs actually when you need to scale the best thing is to start complain yeah to to be compliant with the good",
    "start": "2199040",
    "end": "2205760"
  },
  {
    "text": "practices and that will help you keep the conciliation Logics across multiple controllers way cleaner and very",
    "start": "2205760",
    "end": "2212240"
  },
  {
    "text": "manageable and scalable you know that that's that's idea sure thanks just",
    "start": "2212240",
    "end": "2217599"
  },
  {
    "text": "performance issues performance maintainability complexity all all of those like youon like from you got you",
    "start": "2217599",
    "end": "2225480"
  },
  {
    "text": "have to go through everything again I mean that is big like you spend like hours and hours into that and that would",
    "start": "2225480",
    "end": "2231119"
  },
  {
    "text": "be yeah hi yeah I'm thinking a scenario where I want to modify a resource which",
    "start": "2231119",
    "end": "2237400"
  },
  {
    "text": "is not owned by me uh through API server uh like uh side car injection uh for",
    "start": "2237400",
    "end": "2243880"
  },
  {
    "text": "deployments or ports which is being done by sto and many other uh tools so how do you think about that",
    "start": "2243880",
    "end": "2250280"
  },
  {
    "text": "there's a controller which is triggering changes into deployment which is a resource not owned by itself uh does it",
    "start": "2250280",
    "end": "2257680"
  },
  {
    "text": "apply what you have said or is it a controller of controller kind of scenario okay that's a quite complex",
    "start": "2257680",
    "end": "2264599"
  },
  {
    "text": "question and you can go with the example of sandbo",
    "start": "2264599",
    "end": "2270640"
  },
  {
    "text": "Prim want to take it that's so like you can always bate your resources into the",
    "start": "2270640",
    "end": "2277880"
  },
  {
    "text": "resource which is primary to you and a resource which is related to that so you",
    "start": "2277880",
    "end": "2283240"
  },
  {
    "text": "can make changes to your primary resource which you are maintaining of that controller and you should always make",
    "start": "2283240",
    "end": "2290640"
  },
  {
    "text": "changes to the status of that you should never go and make changes to the spec you can make the changes of spec to the",
    "start": "2290640",
    "end": "2296960"
  },
  {
    "text": "secondary resource which is not maintained by you you can make changes to the spec of that resource but any one",
    "start": "2296960",
    "end": "2303359"
  },
  {
    "text": "resource which you are trying to maintain as a first resource or the primary resource that is something uh",
    "start": "2303359",
    "end": "2310359"
  },
  {
    "text": "should only be handled or managed by The One controller okay so status should be",
    "start": "2310359",
    "end": "2317520"
  },
  {
    "text": "owned by One controller spec can be modified by multiple so you should always uh like make sure that spec and",
    "start": "2317520",
    "end": "2325040"
  },
  {
    "text": "Stater should not be changed from One controller that is always uh by different controllers understood",
    "start": "2325040",
    "end": "2331480"
  },
  {
    "text": "watching is different watch you can watch as many resources as you want from One controller that's not an issue that",
    "start": "2331480",
    "end": "2337839"
  },
  {
    "text": "is a control in place basically yes you can watch as many resources that's not an issue the main concern is you should",
    "start": "2337839",
    "end": "2344880"
  },
  {
    "text": "never uh change the or update the status from One controller to different",
    "start": "2344880",
    "end": "2350760"
  },
  {
    "text": "resources or two controllers on one same resource or that Willa the yes yes but",
    "start": "2350760",
    "end": "2356119"
  },
  {
    "text": "one controller can update spec of multiple resources in that case in that case",
    "start": "2356119",
    "end": "2362520"
  },
  {
    "text": "we're going to have a primary secondary relationship between the two uh the two resources you know so like for example",
    "start": "2362520",
    "end": "2368000"
  },
  {
    "text": "we're discussing before or like the deployment example you know deployment is basically changing the spec of the",
    "start": "2368000",
    "end": "2373480"
  },
  {
    "text": "replica set and replica set on the Pod Etc and you are in a situation like this",
    "start": "2373480",
    "end": "2378680"
  },
  {
    "text": "that's a little bit different and a little bit more complex than this because you have this relationship that's primary secondary um in that case",
    "start": "2378680",
    "end": "2387040"
  },
  {
    "text": "i' i' personally suggest to just update the spec of the of the resource that you are driving that that's yet you have the",
    "start": "2387040",
    "end": "2394880"
  },
  {
    "text": "the CR and your controller should just update the spec of the other resource with respect to what you want what your",
    "start": "2394880",
    "end": "2400720"
  },
  {
    "text": "controller wants so you change the desired um the desire uh state so",
    "start": "2400720",
    "end": "2406200"
  },
  {
    "text": "basically the spec and have the controller of the other thing that's doing the changes reconciling to get the",
    "start": "2406200",
    "end": "2413079"
  },
  {
    "text": "to to move to the current state the changes made by this controll whatever I guess for this use",
    "start": "2413079",
    "end": "2419640"
  },
  {
    "text": "case we can also use uh web books so that uh it can actually watch for events",
    "start": "2419640",
    "end": "2425680"
  },
  {
    "text": "where we want to add a side car so for such events I guess",
    "start": "2425680",
    "end": "2431599"
  },
  {
    "text": "mut for mutating ad control yes you can you can I mean that's what the primary",
    "start": "2431680",
    "end": "2438119"
  },
  {
    "text": "uh Focus for you should be that when you write controllers you can watch resources from that same controller",
    "start": "2438119",
    "end": "2443480"
  },
  {
    "text": "different five six resources you want to watch you will have to do that I mean anyways you can't have any simple systems as well so watching is fine but",
    "start": "2443480",
    "end": "2450800"
  },
  {
    "text": "changing the status of one resource should be from that controller your primary resource now if you have",
    "start": "2450800",
    "end": "2457359"
  },
  {
    "text": "something dependent on that resource so that will be a secondary resource so you can change the status from other but you",
    "start": "2457359",
    "end": "2462680"
  },
  {
    "text": "can change supect from this one so you can do that but you just have to make sure just update the status from one",
    "start": "2462680",
    "end": "2468359"
  },
  {
    "text": "it's kind of a dead anyad very simp inter yeah so hi uh my question is just",
    "start": "2468359",
    "end": "2476040"
  },
  {
    "text": "a little uh side of this topic uh I have been using Aro a lot and uh I have",
    "start": "2476040",
    "end": "2482920"
  },
  {
    "text": "migrated over 600 microservices within same cluster so uh we were facing one",
    "start": "2482920",
    "end": "2488200"
  },
  {
    "text": "issue where uh Argo CD controller uh we are only able to scale it vertically for",
    "start": "2488200",
    "end": "2494119"
  },
  {
    "text": "one cluster right we have not enabled sharding because all of our microservices remain in the same cluster",
    "start": "2494119",
    "end": "2499560"
  },
  {
    "text": "so my question is is there any way we can develop controllers something like uh uh having the strategy of queuing",
    "start": "2499560",
    "end": "2506640"
  },
  {
    "text": "systems like partitioning so that distributed controller so that we can horizontally",
    "start": "2506640",
    "end": "2512280"
  },
  {
    "text": "scale One controller which is managing one crd is any strategy like that possible",
    "start": "2512280",
    "end": "2518680"
  },
  {
    "text": "because uh there is always a limitation to Vertical scaling right and when it",
    "start": "2518680",
    "end": "2523800"
  },
  {
    "text": "comes to 600 microservices uh now let's say it is working and it is just lagging",
    "start": "2523800",
    "end": "2529200"
  },
  {
    "text": "uh with few minutes right uh now let's say I double the resources it is managing now uh what if uh my",
    "start": "2529200",
    "end": "2535680"
  },
  {
    "text": "microservices number becomes 12200 then uh single controller is still working",
    "start": "2535680",
    "end": "2540920"
  },
  {
    "text": "but I'll be facing a larger lags so what to do in those scenarios that's a little",
    "start": "2540920",
    "end": "2547680"
  },
  {
    "text": "bit complex as a scenario you can actually usually the controllers works with the leader election so you cannot",
    "start": "2547680",
    "end": "2554040"
  },
  {
    "text": "have more than one that's that's that's running at the same time in the same classer so even if you scale them you",
    "start": "2554040",
    "end": "2560440"
  },
  {
    "text": "will have only one that's serve in the the that's reacting to events and applying the logic and when it dies and",
    "start": "2560440",
    "end": "2566640"
  },
  {
    "text": "the other one of the other replicas will come in so what you can do on the same",
    "start": "2566640",
    "end": "2571880"
  },
  {
    "text": "controller is to change some parameters that we have there to enabling multiple threads to work at the same time so you",
    "start": "2571880",
    "end": "2578200"
  },
  {
    "text": "will reconcile more events after that it's it's a little bit concerning as a",
    "start": "2578200",
    "end": "2583960"
  },
  {
    "text": "as a as a scenario you need to that's a very complex scenario in which you have a lot of things to do yeah so one thing",
    "start": "2583960",
    "end": "2591880"
  },
  {
    "text": "to try would be to manage the concurrency in a different way but yeah that that will be a little bit of a pain",
    "start": "2591880",
    "end": "2599119"
  },
  {
    "text": "so you can change you can try removing the leader election mechanism and having more controllers that are executing but",
    "start": "2599119",
    "end": "2605280"
  },
  {
    "text": "then you need to move the synchronization between between those to another system and that may be a pain too so yeah a need of Investigation on",
    "start": "2605280",
    "end": "2612480"
  },
  {
    "text": "that side is something that you could do but it's it's not an easy task actually there's no like nonuse case for the",
    "start": "2612480",
    "end": "2619920"
  },
  {
    "text": "distributed the distributed um like if you have multiple replicas of the same",
    "start": "2619920",
    "end": "2625400"
  },
  {
    "text": "working together doing the same you could watch on a single l space that work multiple operators each one on the",
    "start": "2625400",
    "end": "2632839"
  },
  {
    "text": "same one it depends because usually it depends from the scope of the of the controller actually of of the resources",
    "start": "2632839",
    "end": "2639839"
  },
  {
    "text": "if if it's a for example a class escope resource you cannot do this",
    "start": "2639839",
    "end": "2645640"
  },
  {
    "text": "and yeah if it's a a um n n space scoped",
    "start": "2645640",
    "end": "2650800"
  },
  {
    "text": "resource you may do that you need to probably work a bit with the leader election uh of the controller but you",
    "start": "2650800",
    "end": "2658000"
  },
  {
    "text": "could achieve this this this you can comes into place whenever there's a failure in case of right but in case of",
    "start": "2658000",
    "end": "2666079"
  },
  {
    "text": "his question he's asking what if the load increases to the same controll how will you scale it up kind of uh",
    "start": "2666079",
    "end": "2672599"
  },
  {
    "text": "intuitively how will you make it you know less congested or whatever in that case maybe improve some resources",
    "start": "2672599",
    "end": "2679800"
  },
  {
    "text": "whatever like you mentioned change some configuration parameters of the same controller yes you can use this but you",
    "start": "2679800",
    "end": "2686599"
  },
  {
    "text": "will still face problems with the resource limit at some point because yeah you should increase those resource",
    "start": "2686599",
    "end": "2692480"
  },
  {
    "text": "limits until a point in which as as he was saying basically uh it it it's too",
    "start": "2692480",
    "end": "2698200"
  },
  {
    "text": "much for each node of the cluster it's actually a bit difficult to reach that",
    "start": "2698200",
    "end": "2703680"
  },
  {
    "text": "point to be honest so I never seen uh a scenario like this in which you have a",
    "start": "2703680",
    "end": "2708839"
  },
  {
    "text": "controller that needs to have so many resources that's overseed basically the the the power that you have in your",
    "start": "2708839",
    "end": "2715760"
  },
  {
    "text": "classer so that's definitely something that needs to have yes so uh what I was thinking something like this and I",
    "start": "2715760",
    "end": "2722040"
  },
  {
    "text": "wanted to validate this uh what if we uh build a controller we just uh watch is",
    "start": "2722040",
    "end": "2727480"
  },
  {
    "text": "the resource uh just watch and pushes the message into Kafka or any queuing system and from that we have another",
    "start": "2727480",
    "end": "2734720"
  },
  {
    "text": "controller like structure which uh is uh replicated now because it is consuming",
    "start": "2734720",
    "end": "2739839"
  },
  {
    "text": "from uh the messaging system and then it sends back to uh some events to this",
    "start": "2739839",
    "end": "2745520"
  },
  {
    "text": "controller and this controller Now updates that to the crd something like that that may work that that's actually",
    "start": "2745520",
    "end": "2751480"
  },
  {
    "text": "a very complex scenario you a lot of tries should be done there and I really don't have an answer guys okay but",
    "start": "2751480",
    "end": "2758720"
  },
  {
    "text": "that's that's a good idea that that's one of of the PA probably you may have some huh problems with but uh right now",
    "start": "2758720",
    "end": "2767720"
  },
  {
    "text": "but there is another speech now right yeah he has one question you have the speech now",
    "start": "2767720",
    "end": "2773960"
  },
  {
    "text": "guys so we can go",
    "start": "2779319",
    "end": "2784119"
  },
  {
    "text": "yeah so uh I am like developing maintaining controller at my company",
    "start": "2784599",
    "end": "2790240"
  },
  {
    "text": "like an operator at my company I wanted to know like this is one of the best practices right single we follow this",
    "start": "2790240",
    "end": "2795280"
  },
  {
    "text": "but do you recommend any resource like a book or a thing which I can follow to get to know all the best practices I",
    "start": "2795280",
    "end": "2801559"
  },
  {
    "text": "haven't find much um if you go to the cube Builder page it has a section I can show you that",
    "start": "2801559",
    "end": "2809480"
  },
  {
    "text": "have oh we already there but yeah guys I'm not good with mac",
    "start": "2814079",
    "end": "2821558"
  },
  {
    "text": "no I don't see okay if you go to the cube Builder there is a section that's good practices",
    "start": "2843559",
    "end": "2850760"
  },
  {
    "text": "yeah you see here 5.3 and you will find these good practices that we show today and a",
    "start": "2850760",
    "end": "2856319"
  },
  {
    "text": "couple more like he and potency and all this this is the design in which a",
    "start": "2856319",
    "end": "2861839"
  },
  {
    "text": "single controller is responsible for managing multi crds you know and those are the problems that we listed today",
    "start": "2861839",
    "end": "2868480"
  },
  {
    "text": "and there are also other here multiple controllers same crd samec status",
    "start": "2868480",
    "end": "2876160"
  },
  {
    "text": "conditions also very important here and there is the item",
    "start": "2876160",
    "end": "2882000"
  },
  {
    "text": "potency and the API conventions the kuber CP conventions so those are the main good practices that CU Builder is",
    "start": "2882000",
    "end": "2890079"
  },
  {
    "text": "is sharing and and suggesting",
    "start": "2890079",
    "end": "2894880"
  },
  {
    "text": "actually thank you thank you any other question yeah please like uh you all tried all the",
    "start": "2895920",
    "end": "2903800"
  },
  {
    "text": "approaches that you discussed right so like when uh when did you encounter a problem that forc you to think about",
    "start": "2903800",
    "end": "2910440"
  },
  {
    "text": "multiple res multiple controllers in single resource and like another question is that do you see any problem",
    "start": "2910440",
    "end": "2917000"
  },
  {
    "text": "where this situation might be say favorable compared to others in which sorry second question multiple",
    "start": "2917000",
    "end": "2922880"
  },
  {
    "text": "controllers for single resource like what made you think think in that",
    "start": "2922880",
    "end": "2928119"
  },
  {
    "text": "direction like any problem that you encountered while working on controllers yeah we saw that in multiple controllers",
    "start": "2928119",
    "end": "2933520"
  },
  {
    "text": "because when you are actually working then on a product that has more way more complex than these kind of examples um",
    "start": "2933520",
    "end": "2941240"
  },
  {
    "text": "or sometime you have some some like constraints like for example you have a buag in production and you need to fix",
    "start": "2941240",
    "end": "2947480"
  },
  {
    "text": "that and that's the easiest patch that you can produce you may introduce some",
    "start": "2947480",
    "end": "2953400"
  },
  {
    "text": "changes that are not to this one yeah that's not ading to this one to this good practice so that's actually happens",
    "start": "2953400",
    "end": "2960480"
  },
  {
    "text": "a lot of times and in ital we used to say there is there is nothing that's",
    "start": "2960480",
    "end": "2966240"
  },
  {
    "text": "more definitive that's a temporary patch so actually when you introduce a little change that will be temporary I will",
    "start": "2966240",
    "end": "2972040"
  },
  {
    "text": "change that you usually ends up having this like for three years I don't know why so that happens to be honest we saw",
    "start": "2972040",
    "end": "2978680"
  },
  {
    "text": "a lot of examples in which we have multiple controllers like uh really a",
    "start": "2978680",
    "end": "2983960"
  },
  {
    "text": "full controller that's updating another uh resource because it needs to do some changes and then you basically just lose",
    "start": "2983960",
    "end": "2991240"
  },
  {
    "text": "the flow of the logic of the that they should be applied to that resource and",
    "start": "2991240",
    "end": "2997079"
  },
  {
    "text": "when the controller starts to be multiple like hundreds of line of codes",
    "start": "2997079",
    "end": "3002280"
  },
  {
    "text": "uh or a lot of basically invocation of new functions Etc this is this becomes a",
    "start": "3002280",
    "end": "3007559"
  },
  {
    "text": "real nightmare to understand what's happening you know so we face that on multiple projects to be",
    "start": "3007559",
    "end": "3013319"
  },
  {
    "text": "honest so it's like it's not like you cannot do you can do it everything you",
    "start": "3013319",
    "end": "3018839"
  },
  {
    "text": "can do it's just a recommendation you don't face those things in future like in in future if",
    "start": "3018839",
    "end": "3024160"
  },
  {
    "text": "you face that you are anyway is going to come back and do it so you don't have to redo it that's the reason you I mean",
    "start": "3024160",
    "end": "3030079"
  },
  {
    "text": "sometimes that's not even a problem you so for example you saw the the one no",
    "start": "3030079",
    "end": "3035359"
  },
  {
    "text": "the second one it loged an error so we have an error but eventually both the",
    "start": "3035359",
    "end": "3041520"
  },
  {
    "text": "the resources were reconciled so like yeah it took one cycle more but it was",
    "start": "3041520",
    "end": "3047559"
  },
  {
    "text": "reconciled it starts to get to be more problematic when more complexity is",
    "start": "3047559",
    "end": "3053280"
  },
  {
    "text": "added or when you the the lock example is like is is very bad Life Lock I think",
    "start": "3053280",
    "end": "3061920"
  },
  {
    "text": "in which basically Two controller are changing the Status yeah reconciling the resource the same resource but they",
    "start": "3061920",
    "end": "3068240"
  },
  {
    "text": "Implement a different logic so they will trigger yeah yeah the other hand say you",
    "start": "3068240",
    "end": "3074880"
  },
  {
    "text": "you're just just stuck there you know that's you can see that in a lot of cases like for example with ag CD in",
    "start": "3074880",
    "end": "3081760"
  },
  {
    "text": "which you define a state for resource and then there is an operator that's Chang in that state so is reconciling",
    "start": "3081760",
    "end": "3087720"
  },
  {
    "text": "again the operator is changing there Etc and you have this Loop in that case is",
    "start": "3087720",
    "end": "3092920"
  },
  {
    "text": "is really evident and and easy to to generate to be honest um when write",
    "start": "3092920",
    "end": "3099119"
  },
  {
    "text": "operator when you write controllers for these kind of things it's actually something that if you take care from the",
    "start": "3099119",
    "end": "3105440"
  },
  {
    "text": "beginning when you are designing the control the reconation logic that will help a lot a lot thanks welcome so in",
    "start": "3105440",
    "end": "3113880"
  },
  {
    "text": "terms ofip I mean uh this thing that you spoke",
    "start": "3113880",
    "end": "3118920"
  },
  {
    "text": "about primary and secondary does it apply to open shift logging and Loki",
    "start": "3118920",
    "end": "3124400"
  },
  {
    "text": "where Loki is is the managed resource I mean I hope you know what I'm talking",
    "start": "3124400",
    "end": "3130400"
  },
  {
    "text": "about uh I'm not working directly on that part in in red do but yeah the",
    "start": "3130400",
    "end": "3136799"
  },
  {
    "text": "primary and secondary is actually a scheme that's very um that mandatory to use when you have a",
    "start": "3136799",
    "end": "3143319"
  },
  {
    "text": "resource that's managing another resource so U yeah probably yes you will find there uh this kind of because we",
    "start": "3143319",
    "end": "3149559"
  },
  {
    "text": "don't create Loki like separately we just create open shift logging there are",
    "start": "3149559",
    "end": "3154680"
  },
  {
    "text": "two operators mhm one is open shift logging the other one is low key okay and then open shift logging CR basically",
    "start": "3154680",
    "end": "3162839"
  },
  {
    "text": "manages the the Loki CR okay yeah I don't have to separately yes that's a",
    "start": "3162839",
    "end": "3169200"
  },
  {
    "text": "primary second primary secondary yeah you you basically your controller that's reconciling your resource is applying",
    "start": "3169200",
    "end": "3176079"
  },
  {
    "text": "the change to the spec of another resource for obtaining the result yeah but in this case I have noticed that if",
    "start": "3176079",
    "end": "3181240"
  },
  {
    "text": "I don't have Loki installed that CR just errors out I mean if if the Loki",
    "start": "3181240",
    "end": "3186960"
  },
  {
    "text": "operator itself is not present on the cluster mhm and I have created an instance a crd of CR for um open shift",
    "start": "3186960",
    "end": "3196160"
  },
  {
    "text": "logging instance it errors out because it canot find the definition of the",
    "start": "3196160",
    "end": "3201839"
  },
  {
    "text": "dependent resource yeah that's actually happening at run time because you run time basically creating a scheme in",
    "start": "3201839",
    "end": "3207799"
  },
  {
    "text": "which you register all the crd that you want to use and but and then it goes to",
    "start": "3207799",
    "end": "3213440"
  },
  {
    "text": "the kubernetes API server with a rest a rest uh request on a resource but the",
    "start": "3213440",
    "end": "3220319"
  },
  {
    "text": "API server says okay I don't know that because you never installed that and you got a five 400 I think or four or four",
    "start": "3220319",
    "end": "3228200"
  },
  {
    "text": "probably and that's the error that you see because Lo is not because that shd",
    "start": "3228200",
    "end": "3233240"
  },
  {
    "text": "is not installed in the API server so you don't have the the um the the AP server cannot um",
    "start": "3233240",
    "end": "3241559"
  },
  {
    "text": "understand what you're talking about it doesn't find the resource you know you need to install that and by the way this",
    "start": "3241559",
    "end": "3249720"
  },
  {
    "text": "won't be enough because if you just install the crd the result that you will have is that this the CR will be created",
    "start": "3249720",
    "end": "3256359"
  },
  {
    "text": "but never reconciled because it's the Lo operator that will reconcile the resource at that point uh if you by the",
    "start": "3256359",
    "end": "3264240"
  },
  {
    "text": "way if you install at least a you will see that there is no error",
    "start": "3264240",
    "end": "3269720"
  },
  {
    "text": "there but the probably the status of the login uh CR that you're creating will",
    "start": "3269720",
    "end": "3276000"
  },
  {
    "text": "never be updated or will still remain in a intermediate State saying hey I'm",
    "start": "3276000",
    "end": "3281040"
  },
  {
    "text": "waiting for that because I'm looking at events on thatt I'm waiting for that to be applied correctly reconciled and",
    "start": "3281040",
    "end": "3288960"
  },
  {
    "text": "whatever and you you still be basically blocked there waiting for the other",
    "start": "3288960",
    "end": "3294079"
  },
  {
    "text": "until you have an operator that reconciles that so that's the that's an example of primary secondary",
    "start": "3294079",
    "end": "3299880"
  },
  {
    "text": "relationship okay by the way I'm a to oh nice yeah yeah that's why I know",
    "start": "3299880",
    "end": "3305480"
  },
  {
    "text": "about avure oh thank you I I didn't read the",
    "start": "3305480",
    "end": "3310839"
  },
  {
    "text": "the okay so I came across this problem recently so crd grows in size and",
    "start": "3310839",
    "end": "3316319"
  },
  {
    "text": "whenever it reaches 1 MB limit right we start to hit issues with Helm issues with any the deployer because of the",
    "start": "3316319",
    "end": "3322720"
  },
  {
    "text": "config map limit yes because that's a limit from each tcd the database that's used by kubernetes that has very strict",
    "start": "3322720",
    "end": "3330160"
  },
  {
    "text": "limits like for example the maximum size that it can have is like 8 GB nothing more than that and also they do not",
    "start": "3330160",
    "end": "3336319"
  },
  {
    "text": "recommend to run with 8 GB they they prefer to have lower limits in the full s and each element may be it should be",
    "start": "3336319",
    "end": "3343480"
  },
  {
    "text": "maximum 1.5 Mega uh config Maps secrets and and",
    "start": "3343480",
    "end": "3349720"
  },
  {
    "text": "and crds so when your crd starts to grow bigger and the problem there a lot of",
    "start": "3349720",
    "end": "3356760"
  },
  {
    "text": "time is with the manage Fields you know because when you create the thing maybe",
    "start": "3356760",
    "end": "3362039"
  },
  {
    "text": "it's like one Mega and 400 and then you the the kubernetes will apply the manage",
    "start": "3362039",
    "end": "3368680"
  },
  {
    "text": "field annotation and it will become like two Mega and something and you when you",
    "start": "3368680",
    "end": "3374079"
  },
  {
    "text": "try to update that again you will have some problems so yeah that that's something that happens all the time but",
    "start": "3374079",
    "end": "3379520"
  },
  {
    "text": "that's a limit on etcd as you were saying in that case the only thing that you can do right now is to is to",
    "start": "3379520",
    "end": "3386839"
  },
  {
    "text": "the the size of the CRT try to break it down in multiple pieces or I don't know",
    "start": "3386839",
    "end": "3392960"
  },
  {
    "text": "by the way personally i' never suggest to have a crd that big you know probably",
    "start": "3392960",
    "end": "3398119"
  },
  {
    "text": "something's wrong like I don't know an example I can think of is the key clock keyock can be",
    "start": "3398119",
    "end": "3403680"
  },
  {
    "text": "huge don't know if you have probably that's that's as a reason that's good as as it is but to me every time I have to",
    "start": "3403680",
    "end": "3410760"
  },
  {
    "text": "manage that it's very big I I got lost a lot of time so my personal prefer",
    "start": "3410760",
    "end": "3416920"
  },
  {
    "text": "is to have smaller CRTs but then you need to be um mindful",
    "start": "3416920",
    "end": "3422880"
  },
  {
    "text": "to do not pollute with like 20 30 CD so it",
    "start": "3422880",
    "end": "3429000"
  },
  {
    "text": "has it's engineering you know it's tradeoffs so you need to be mindful",
    "start": "3429000",
    "end": "3434200"
  },
  {
    "text": "about tradeoff when you design all those things",
    "start": "3434200",
    "end": "3438558"
  }
]