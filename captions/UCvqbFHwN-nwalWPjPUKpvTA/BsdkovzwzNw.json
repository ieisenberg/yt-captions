[
  {
    "start": "0",
    "end": "37000"
  },
  {
    "text": "all right welcome everyone this is sick",
    "start": "719",
    "end": "3520"
  },
  {
    "text": "instrumentation intro and deep dive i'm",
    "start": "3520",
    "end": "6000"
  },
  {
    "text": "frederick i'm the founder of polar",
    "start": "6000",
    "end": "7600"
  },
  {
    "text": "signals and i am one of the tech leads",
    "start": "7600",
    "end": "10719"
  },
  {
    "text": "for the special interest group for",
    "start": "10719",
    "end": "12639"
  },
  {
    "text": "instrumentation and kubernetes and today",
    "start": "12639",
    "end": "14639"
  },
  {
    "text": "with me i have david ashbill who's also",
    "start": "14639",
    "end": "18320"
  },
  {
    "text": "a tech lead and he works at google",
    "start": "18320",
    "end": "21439"
  },
  {
    "text": "he's a deck lead at within sick",
    "start": "21439",
    "end": "23039"
  },
  {
    "text": "instrumentation as well",
    "start": "23039",
    "end": "24640"
  },
  {
    "text": "we've also got elana who is one of the",
    "start": "24640",
    "end": "27840"
  },
  {
    "text": "chairs of sick instrumentation she works",
    "start": "27840",
    "end": "29519"
  },
  {
    "text": "at red hat and we've got han who also",
    "start": "29519",
    "end": "31920"
  },
  {
    "text": "works at google who's also a chair",
    "start": "31920",
    "end": "34880"
  },
  {
    "text": "so",
    "start": "34880",
    "end": "36320"
  },
  {
    "text": "if you don't already know",
    "start": "36320",
    "end": "39440"
  },
  {
    "text": "special interest groups in kubernetes we",
    "start": "39440",
    "end": "41440"
  },
  {
    "text": "have several of these and essentially",
    "start": "41440",
    "end": "43440"
  },
  {
    "text": "there are focus groups for certain areas",
    "start": "43440",
    "end": "46800"
  },
  {
    "text": "to focus on",
    "start": "46800",
    "end": "48239"
  },
  {
    "text": "and",
    "start": "48239",
    "end": "49120"
  },
  {
    "text": "we focus on instrumentation",
    "start": "49120",
    "end": "51760"
  },
  {
    "text": "and we'll talk a little bit more in",
    "start": "51760",
    "end": "53440"
  },
  {
    "text": "depth what we actually mean by that but",
    "start": "53440",
    "end": "57600"
  },
  {
    "text": "essentially we take care of all things",
    "start": "57600",
    "end": "60320"
  },
  {
    "text": "observability right",
    "start": "60320",
    "end": "62160"
  },
  {
    "text": "um and",
    "start": "62160",
    "end": "63760"
  },
  {
    "text": "today let's i want to talk about a",
    "start": "63760",
    "end": "65920"
  },
  {
    "text": "little bit uh like about that definition",
    "start": "65920",
    "end": "68400"
  },
  {
    "text": "and a little bit about how we work as a",
    "start": "68400",
    "end": "71760"
  },
  {
    "text": "special interest group",
    "start": "71760",
    "end": "73600"
  },
  {
    "text": "then i'm going to walk over a couple of",
    "start": "73600",
    "end": "76400"
  },
  {
    "text": "our sub projects",
    "start": "76400",
    "end": "78159"
  },
  {
    "text": "then elena's going to talk about",
    "start": "78159",
    "end": "80799"
  },
  {
    "text": "logging and some of our initiatives",
    "start": "80799",
    "end": "82400"
  },
  {
    "text": "within logging then david is going to",
    "start": "82400",
    "end": "84240"
  },
  {
    "text": "talk about tracing and han is going to",
    "start": "84240",
    "end": "86479"
  },
  {
    "text": "finish up with metrics and then we'll",
    "start": "86479",
    "end": "88799"
  },
  {
    "text": "let you know a little bit about how you",
    "start": "88799",
    "end": "90880"
  },
  {
    "text": "can contribute where you can find us and",
    "start": "90880",
    "end": "93520"
  },
  {
    "text": "some related talks to these topics",
    "start": "93520",
    "end": "97280"
  },
  {
    "start": "96000",
    "end": "195000"
  },
  {
    "text": "so",
    "start": "97280",
    "end": "98840"
  },
  {
    "text": "essentially um the way all",
    "start": "98840",
    "end": "101920"
  },
  {
    "text": "instrumentation or all special interest",
    "start": "101920",
    "end": "104720"
  },
  {
    "text": "groups in kubernetes get created is",
    "start": "104720",
    "end": "107600"
  },
  {
    "text": "they have a charter they have a specific",
    "start": "107600",
    "end": "110000"
  },
  {
    "text": "purpose and",
    "start": "110000",
    "end": "111759"
  },
  {
    "text": "this is an a literal excerpt from",
    "start": "111759",
    "end": "115600"
  },
  {
    "text": "our charter our sick instrumentation",
    "start": "115600",
    "end": "117680"
  },
  {
    "text": "charter and our purpose is to cover the",
    "start": "117680",
    "end": "119840"
  },
  {
    "text": "best practices for cluster observability",
    "start": "119840",
    "end": "122240"
  },
  {
    "text": "across all components and develop",
    "start": "122240",
    "end": "124079"
  },
  {
    "text": "relevant components so effectively what",
    "start": "124079",
    "end": "126399"
  },
  {
    "text": "this means is that you know we care",
    "start": "126399",
    "end": "129759"
  },
  {
    "text": "about",
    "start": "129759",
    "end": "130800"
  },
  {
    "text": "more than just the kubernetes kubernetes",
    "start": "130800",
    "end": "133440"
  },
  {
    "text": "repository although we care a lot about",
    "start": "133440",
    "end": "135520"
  },
  {
    "text": "this obviously",
    "start": "135520",
    "end": "138160"
  },
  {
    "text": "but we also create additional components",
    "start": "138160",
    "end": "141200"
  },
  {
    "text": "that may be",
    "start": "141200",
    "end": "142560"
  },
  {
    "text": "additionally helpful to understand",
    "start": "142560",
    "end": "144319"
  },
  {
    "text": "what's going on in your kubernetes",
    "start": "144319",
    "end": "145840"
  },
  {
    "text": "cluster but of course we also care a",
    "start": "145840",
    "end": "148000"
  },
  {
    "text": "great deal about the instrumentation",
    "start": "148000",
    "end": "151040"
  },
  {
    "text": "related things within the kubernetes",
    "start": "151040",
    "end": "153040"
  },
  {
    "text": "project and we maintain several",
    "start": "153040",
    "end": "155120"
  },
  {
    "text": "libraries within the kubernetes",
    "start": "155120",
    "end": "157599"
  },
  {
    "text": "repository but also",
    "start": "157599",
    "end": "159440"
  },
  {
    "text": "for external use",
    "start": "159440",
    "end": "162000"
  },
  {
    "text": "and then we create additional components",
    "start": "162000",
    "end": "164319"
  },
  {
    "text": "that can be really useful",
    "start": "164319",
    "end": "166319"
  },
  {
    "text": "maybe that",
    "start": "166319",
    "end": "168000"
  },
  {
    "text": "don't necessarily cover every kubernetes",
    "start": "168000",
    "end": "170480"
  },
  {
    "text": "user but hopefully",
    "start": "170480",
    "end": "172160"
  },
  {
    "text": "a lot so just some examples of sub",
    "start": "172160",
    "end": "175360"
  },
  {
    "text": "projects that we have are cooper state",
    "start": "175360",
    "end": "177360"
  },
  {
    "text": "metrics",
    "start": "177360",
    "end": "178879"
  },
  {
    "text": "k log this is kind of our canonical",
    "start": "178879",
    "end": "181120"
  },
  {
    "text": "logging library for the kubernetes",
    "start": "181120",
    "end": "183760"
  },
  {
    "text": "and the metrics are run more and i'll",
    "start": "183760",
    "end": "185920"
  },
  {
    "text": "talk about talk more about this",
    "start": "185920",
    "end": "188720"
  },
  {
    "text": "and then we often have kind of",
    "start": "188720",
    "end": "191040"
  },
  {
    "text": "we we split this split most of our",
    "start": "191040",
    "end": "193599"
  },
  {
    "text": "topics into metrics logs and tracing",
    "start": "193599",
    "end": "196959"
  },
  {
    "text": "and more generally and this is kind of",
    "start": "196959",
    "end": "198720"
  },
  {
    "text": "how all special interest groups within",
    "start": "198720",
    "end": "200959"
  },
  {
    "text": "kubernetes work",
    "start": "200959",
    "end": "202400"
  },
  {
    "text": "is",
    "start": "202400",
    "end": "203920"
  },
  {
    "text": "we triage",
    "start": "203920",
    "end": "206239"
  },
  {
    "text": "all instrumentation related",
    "start": "206239",
    "end": "208480"
  },
  {
    "text": "issues and pull requests",
    "start": "208480",
    "end": "211200"
  },
  {
    "text": "through labeling and this labeling",
    "start": "211200",
    "end": "213120"
  },
  {
    "text": "either happens automatically because",
    "start": "213120",
    "end": "215519"
  },
  {
    "text": "we're a code owner of a particular piece",
    "start": "215519",
    "end": "217760"
  },
  {
    "text": "of code or someone tags us in it because",
    "start": "217760",
    "end": "220720"
  },
  {
    "text": "they have identified this as a an",
    "start": "220720",
    "end": "222799"
  },
  {
    "text": "instrumentation related thing after",
    "start": "222799",
    "end": "224720"
  },
  {
    "text": "they've you know done a first pass on",
    "start": "224720",
    "end": "228239"
  },
  {
    "text": "the issue or pull request",
    "start": "228239",
    "end": "230239"
  },
  {
    "text": "um",
    "start": "230239",
    "end": "231599"
  },
  {
    "text": "and then we do try to review all changes",
    "start": "231599",
    "end": "234720"
  },
  {
    "text": "for metrics we are not necessarily not",
    "start": "234720",
    "end": "237040"
  },
  {
    "text": "for all metrics are we a blocking review",
    "start": "237040",
    "end": "239920"
  },
  {
    "text": "but for some we may be",
    "start": "239920",
    "end": "242560"
  },
  {
    "text": "especially",
    "start": "242560",
    "end": "244239"
  },
  {
    "text": "for our stability gate guidelines so",
    "start": "244239",
    "end": "247599"
  },
  {
    "text": "the more stable a metric becomes",
    "start": "247599",
    "end": "251680"
  },
  {
    "text": "in terms of stability guarantees",
    "start": "251680",
    "end": "254560"
  },
  {
    "text": "the stricter the reviews become as well",
    "start": "254560",
    "end": "258479"
  },
  {
    "text": "and",
    "start": "258560",
    "end": "259680"
  },
  {
    "text": "this is again a more general pro process",
    "start": "259680",
    "end": "262320"
  },
  {
    "text": "within kubernetes whenever we develop",
    "start": "262320",
    "end": "265680"
  },
  {
    "text": "larger scale things that are more",
    "start": "265680",
    "end": "267600"
  },
  {
    "text": "involved we create these things called",
    "start": "267600",
    "end": "269360"
  },
  {
    "text": "kubernetes enhancement proposals or",
    "start": "269360",
    "end": "272320"
  },
  {
    "text": "in the kubernetes community typically",
    "start": "272320",
    "end": "274240"
  },
  {
    "text": "they're just referred to as caps",
    "start": "274240",
    "end": "277840"
  },
  {
    "text": "and of course we write these for sick",
    "start": "278080",
    "end": "280160"
  },
  {
    "text": "instrumentation as well and then as i",
    "start": "280160",
    "end": "281919"
  },
  {
    "text": "said we maintain sub-projects",
    "start": "281919",
    "end": "284800"
  },
  {
    "start": "283000",
    "end": "302000"
  },
  {
    "text": "so let's talk about some of these",
    "start": "284800",
    "end": "286720"
  },
  {
    "text": "sub-projects and potentially something",
    "start": "286720",
    "end": "288560"
  },
  {
    "text": "that you could get involved in",
    "start": "288560",
    "end": "291440"
  },
  {
    "text": "i picked these three ones because",
    "start": "291440",
    "end": "294720"
  },
  {
    "text": "they're the ones that i'm uh most",
    "start": "294720",
    "end": "297040"
  },
  {
    "text": "familiar with and that i think the the",
    "start": "297040",
    "end": "299600"
  },
  {
    "text": "kind of most important ones that we",
    "start": "299600",
    "end": "302240"
  },
  {
    "start": "302000",
    "end": "577000"
  },
  {
    "text": "take care of so kubesave metrics is the",
    "start": "302240",
    "end": "304560"
  },
  {
    "text": "one that i personally have other than",
    "start": "304560",
    "end": "306720"
  },
  {
    "text": "the kubernetes repository",
    "start": "306720",
    "end": "309840"
  },
  {
    "text": "been involved with the longest",
    "start": "309840",
    "end": "312880"
  },
  {
    "text": "and probably the most even",
    "start": "312880",
    "end": "315280"
  },
  {
    "text": "and essentially what group state metrics",
    "start": "315280",
    "end": "316960"
  },
  {
    "text": "is if you're familiar with the",
    "start": "316960",
    "end": "319120"
  },
  {
    "text": "prometheus ecosystem",
    "start": "319120",
    "end": "321759"
  },
  {
    "text": "it's a you can think of it as a",
    "start": "321759",
    "end": "323600"
  },
  {
    "text": "prometheus exporter for a kubernetes",
    "start": "323600",
    "end": "326240"
  },
  {
    "text": "cluster essentially what we do is we",
    "start": "326240",
    "end": "328960"
  },
  {
    "text": "look at the kubernetes api",
    "start": "328960",
    "end": "330880"
  },
  {
    "text": "and anything that could be possibly",
    "start": "330880",
    "end": "333039"
  },
  {
    "text": "useful as a metric in prometheus we kind",
    "start": "333039",
    "end": "335919"
  },
  {
    "text": "of convert to a prometheus style metric",
    "start": "335919",
    "end": "339120"
  },
  {
    "text": "and so this way we get information about",
    "start": "339120",
    "end": "341199"
  },
  {
    "text": "parts about deployments about stateful",
    "start": "341199",
    "end": "343280"
  },
  {
    "text": "sets about all of these wonderful things",
    "start": "343280",
    "end": "346560"
  },
  {
    "text": "so that we can then",
    "start": "346560",
    "end": "348320"
  },
  {
    "text": "you know create",
    "start": "348320",
    "end": "350080"
  },
  {
    "text": "alerts or",
    "start": "350080",
    "end": "351759"
  },
  {
    "text": "dashboards out of uh to you know",
    "start": "351759",
    "end": "354479"
  },
  {
    "text": "visualize and make useful",
    "start": "354479",
    "end": "356960"
  },
  {
    "text": "um and just just a really quick example",
    "start": "356960",
    "end": "359919"
  },
  {
    "text": "that i wanted to bring you to",
    "start": "359919",
    "end": "361840"
  },
  {
    "text": "to this to highlight the usefulness of",
    "start": "361840",
    "end": "364639"
  },
  {
    "text": "this component",
    "start": "364639",
    "end": "366960"
  },
  {
    "text": "this is an actual example of what we",
    "start": "366960",
    "end": "368560"
  },
  {
    "text": "have we have the expected replicas of a",
    "start": "368560",
    "end": "371919"
  },
  {
    "text": "deployment and we have the actual",
    "start": "371919",
    "end": "374400"
  },
  {
    "text": "replicas",
    "start": "374400",
    "end": "375520"
  },
  {
    "text": "of a deployment",
    "start": "375520",
    "end": "377840"
  },
  {
    "text": "and why this is useful is now we can",
    "start": "377840",
    "end": "379919"
  },
  {
    "text": "kind of compare these two numbers and",
    "start": "379919",
    "end": "383120"
  },
  {
    "text": "we can understand whether a deployment",
    "start": "383120",
    "end": "385680"
  },
  {
    "text": "has been rolled out successfully right",
    "start": "385680",
    "end": "389039"
  },
  {
    "text": "and this is just one of",
    "start": "389039",
    "end": "391440"
  },
  {
    "text": "many useful examples that you could use",
    "start": "391440",
    "end": "393840"
  },
  {
    "text": "this for and kubesate metrics",
    "start": "393840",
    "end": "396639"
  },
  {
    "text": "exposes a lot of metrics and it's highly",
    "start": "396639",
    "end": "399360"
  },
  {
    "text": "optimized",
    "start": "399360",
    "end": "400639"
  },
  {
    "text": "so it's a really awesome component and",
    "start": "400639",
    "end": "402720"
  },
  {
    "text": "if you're interested in this is also a",
    "start": "402720",
    "end": "404720"
  },
  {
    "text": "really great way to get involved",
    "start": "404720",
    "end": "407759"
  },
  {
    "text": "then the second component that i want to",
    "start": "407759",
    "end": "409599"
  },
  {
    "text": "talk about is the metric server",
    "start": "409599",
    "end": "412000"
  },
  {
    "text": "in",
    "start": "412000",
    "end": "413280"
  },
  {
    "text": "kubernetes we have an abstract",
    "start": "413280",
    "end": "416400"
  },
  {
    "text": "api of metrics",
    "start": "416400",
    "end": "418400"
  },
  {
    "text": "and essentially the reason why this was",
    "start": "418400",
    "end": "420319"
  },
  {
    "text": "created is so that we could have",
    "start": "420319",
    "end": "422479"
  },
  {
    "text": "a common language to talk for auto",
    "start": "422479",
    "end": "425440"
  },
  {
    "text": "scaling needs so that when we use a lot",
    "start": "425440",
    "end": "428000"
  },
  {
    "text": "of cpu or a lot of memory that we can",
    "start": "428000",
    "end": "430720"
  },
  {
    "text": "automatically scale our",
    "start": "430720",
    "end": "433039"
  },
  {
    "text": "deployments and kind of as a side effect",
    "start": "433039",
    "end": "435039"
  },
  {
    "text": "of that we got koopsi tail top for free",
    "start": "435039",
    "end": "439120"
  },
  {
    "text": "and this is essentially kind of similar",
    "start": "439120",
    "end": "441280"
  },
  {
    "text": "to the linux or the unix command top",
    "start": "441280",
    "end": "443919"
  },
  {
    "text": "that you may be familiar with where you",
    "start": "443919",
    "end": "446000"
  },
  {
    "text": "can see",
    "start": "446000",
    "end": "446880"
  },
  {
    "text": "the memory and use",
    "start": "446880",
    "end": "449120"
  },
  {
    "text": "and cpu usage of your processes and the",
    "start": "449120",
    "end": "452000"
  },
  {
    "text": "way that this kind of just works is that",
    "start": "452000",
    "end": "454000"
  },
  {
    "text": "uh",
    "start": "454000",
    "end": "454880"
  },
  {
    "text": "metric server uses what's called",
    "start": "454880",
    "end": "457280"
  },
  {
    "text": "kubernetes aggregated apis so um",
    "start": "457280",
    "end": "461039"
  },
  {
    "text": "whenever there's a call to the",
    "start": "461039",
    "end": "462639"
  },
  {
    "text": "kubernetes",
    "start": "462639",
    "end": "463840"
  },
  {
    "text": "api",
    "start": "463840",
    "end": "464960"
  },
  {
    "text": "about a metrics",
    "start": "464960",
    "end": "466960"
  },
  {
    "text": "server",
    "start": "466960",
    "end": "467919"
  },
  {
    "text": "a metrics api the kubernetes api just",
    "start": "467919",
    "end": "470960"
  },
  {
    "text": "forwards this",
    "start": "470960",
    "end": "472479"
  },
  {
    "text": "to the metric server and the metric",
    "start": "472479",
    "end": "474400"
  },
  {
    "text": "server essentially asynchronously",
    "start": "474400",
    "end": "476639"
  },
  {
    "text": "collects these metrics from kubernetes",
    "start": "476639",
    "end": "478879"
  },
  {
    "text": "nodes",
    "start": "478879",
    "end": "479919"
  },
  {
    "text": "and then returns them on requests",
    "start": "479919",
    "end": "483440"
  },
  {
    "text": "and in a way the",
    "start": "483440",
    "end": "486000"
  },
  {
    "text": "prometheus adapter is actually the exact",
    "start": "486000",
    "end": "488800"
  },
  {
    "text": "same thing except that it doesn't",
    "start": "488800",
    "end": "490639"
  },
  {
    "text": "re-implement all of this gathering",
    "start": "490639",
    "end": "493120"
  },
  {
    "text": "functionality it lets prometheus do all",
    "start": "493120",
    "end": "495360"
  },
  {
    "text": "of this and then just acts kind of as a",
    "start": "495360",
    "end": "498080"
  },
  {
    "text": "translation layer",
    "start": "498080",
    "end": "500000"
  },
  {
    "text": "so that when the kubernetes api asks for",
    "start": "500000",
    "end": "503440"
  },
  {
    "text": "resource metrics it just",
    "start": "503440",
    "end": "505759"
  },
  {
    "text": "forwards that to prometheus does the api",
    "start": "505759",
    "end": "508479"
  },
  {
    "text": "conversions because obviously",
    "start": "508479",
    "end": "511520"
  },
  {
    "text": "they don't necessarily speak the same",
    "start": "511520",
    "end": "513760"
  },
  {
    "text": "apis",
    "start": "513760",
    "end": "516399"
  },
  {
    "text": "and then returns this the really cool",
    "start": "516399",
    "end": "519120"
  },
  {
    "text": "thing about the prometheus adapter also",
    "start": "519120",
    "end": "521839"
  },
  {
    "text": "is it doesn't only speak the resource",
    "start": "521839",
    "end": "523839"
  },
  {
    "text": "metrics api but it also speaks the",
    "start": "523839",
    "end": "526320"
  },
  {
    "text": "custom and external matrix apis and this",
    "start": "526320",
    "end": "530080"
  },
  {
    "text": "is really cool because now we can not",
    "start": "530080",
    "end": "532320"
  },
  {
    "text": "only auto scale based on cpu and memory",
    "start": "532320",
    "end": "535760"
  },
  {
    "text": "usage but we can auto scale in any",
    "start": "535760",
    "end": "538480"
  },
  {
    "text": "metric that we have in our prometheus",
    "start": "538480",
    "end": "540160"
  },
  {
    "text": "server this is a really really powerful",
    "start": "540160",
    "end": "544240"
  },
  {
    "text": "tool to have",
    "start": "544240",
    "end": "545680"
  },
  {
    "text": "and we actually just kind of migrated",
    "start": "545680",
    "end": "547680"
  },
  {
    "text": "this",
    "start": "547680",
    "end": "548720"
  },
  {
    "text": "project previously this was maintained",
    "start": "548720",
    "end": "550560"
  },
  {
    "text": "by sully",
    "start": "550560",
    "end": "553200"
  },
  {
    "text": "thank you sully for having maintained",
    "start": "553600",
    "end": "555360"
  },
  {
    "text": "this",
    "start": "555360",
    "end": "556160"
  },
  {
    "text": "project for such a long time and now",
    "start": "556160",
    "end": "558320"
  },
  {
    "text": "finally it's been",
    "start": "558320",
    "end": "559839"
  },
  {
    "text": "it's now under the umbrella of the",
    "start": "559839",
    "end": "562399"
  },
  {
    "text": "sick instrumentation",
    "start": "562399",
    "end": "563920"
  },
  {
    "text": "i believe we just",
    "start": "563920",
    "end": "565519"
  },
  {
    "text": "a couple months ago finished this",
    "start": "565519",
    "end": "566959"
  },
  {
    "text": "migration",
    "start": "566959",
    "end": "568240"
  },
  {
    "text": "so yeah these are the kind of three",
    "start": "568240",
    "end": "569839"
  },
  {
    "text": "sub-projects that i wanted to highlight",
    "start": "569839",
    "end": "571920"
  },
  {
    "text": "to you today and now",
    "start": "571920",
    "end": "573760"
  },
  {
    "text": "elena goes on with logs",
    "start": "573760",
    "end": "576720"
  },
  {
    "text": "thank you thanks frederick so now i'm",
    "start": "576720",
    "end": "579360"
  },
  {
    "text": "going to spend a little bit of time",
    "start": "579360",
    "end": "580720"
  },
  {
    "text": "talking about what sig instrumentation",
    "start": "580720",
    "end": "582560"
  },
  {
    "text": "is working on in the world of logging",
    "start": "582560",
    "end": "586480"
  },
  {
    "start": "586000",
    "end": "659000"
  },
  {
    "text": "so",
    "start": "586480",
    "end": "587279"
  },
  {
    "text": "much of our efforts have been dedicated",
    "start": "587279",
    "end": "589279"
  },
  {
    "text": "towards transitioning kubernetes to",
    "start": "589279",
    "end": "591519"
  },
  {
    "text": "structured logs",
    "start": "591519",
    "end": "593040"
  },
  {
    "text": "now you may ask what is a structured log",
    "start": "593040",
    "end": "595440"
  },
  {
    "text": "so i've demonstrated on the slide uh as",
    "start": "595440",
    "end": "598080"
  },
  {
    "text": "an introduction here is sort of what the",
    "start": "598080",
    "end": "599839"
  },
  {
    "text": "before and after looks like so the",
    "start": "599839",
    "end": "602320"
  },
  {
    "text": "before is the first log line and that",
    "start": "602320",
    "end": "604240"
  },
  {
    "text": "was what a log line in the cube looked",
    "start": "604240",
    "end": "606720"
  },
  {
    "text": "like prior to transitioning to",
    "start": "606720",
    "end": "608720"
  },
  {
    "text": "structured logging uh as well as",
    "start": "608720",
    "end": "610880"
  },
  {
    "text": "including these after views now i've",
    "start": "610880",
    "end": "613600"
  },
  {
    "text": "included both text and json versions of",
    "start": "613600",
    "end": "616320"
  },
  {
    "text": "the log because",
    "start": "616320",
    "end": "618560"
  },
  {
    "text": "by default uh the cubelet will continue",
    "start": "618560",
    "end": "621200"
  },
  {
    "text": "to log in text mode but you can also",
    "start": "621200",
    "end": "623519"
  },
  {
    "text": "turn on json mode which then can be",
    "start": "623519",
    "end": "625680"
  },
  {
    "text": "ingested by various log aggregation",
    "start": "625680",
    "end": "628320"
  },
  {
    "text": "tools and make indexing of these log",
    "start": "628320",
    "end": "630480"
  },
  {
    "text": "entries much easier so",
    "start": "630480",
    "end": "632399"
  },
  {
    "text": "which brings us benefits of structured",
    "start": "632399",
    "end": "634480"
  },
  {
    "text": "logs why would we do this why would we",
    "start": "634480",
    "end": "636800"
  },
  {
    "text": "want to do this uh it makes it much",
    "start": "636800",
    "end": "639040"
  },
  {
    "text": "easier to aggregate and correlate logs",
    "start": "639040",
    "end": "641519"
  },
  {
    "text": "uh by presenting them in a fashion we",
    "start": "641519",
    "end": "643760"
  },
  {
    "text": "don't have to parse them all after the",
    "start": "643760",
    "end": "645279"
  },
  {
    "text": "fact they're already in a serializable",
    "start": "645279",
    "end": "647600"
  },
  {
    "text": "format and then various tools can deal",
    "start": "647600",
    "end": "649760"
  },
  {
    "text": "with them rather than dealing with just",
    "start": "649760",
    "end": "651279"
  },
  {
    "text": "the raw syslog or we might have to use",
    "start": "651279",
    "end": "653200"
  },
  {
    "text": "regex's or other things to parse those",
    "start": "653200",
    "end": "655200"
  },
  {
    "text": "log entries in order to determine what",
    "start": "655200",
    "end": "657120"
  },
  {
    "text": "happened where",
    "start": "657120",
    "end": "658839"
  },
  {
    "text": "so uh structured logs when",
    "start": "658839",
    "end": "662399"
  },
  {
    "start": "659000",
    "end": "774000"
  },
  {
    "text": "so we started out by migrating the",
    "start": "662399",
    "end": "664560"
  },
  {
    "text": "cubelet in the 121 release and even sort",
    "start": "664560",
    "end": "667519"
  },
  {
    "text": "of track our progress in the attached",
    "start": "667519",
    "end": "669519"
  },
  {
    "text": "issue and part of that work was",
    "start": "669519",
    "end": "671920"
  },
  {
    "text": "including some static analysis to",
    "start": "671920",
    "end": "673519"
  },
  {
    "text": "prevent regressions so every uh file",
    "start": "673519",
    "end": "676480"
  },
  {
    "text": "that was migrated in the cubelet was",
    "start": "676480",
    "end": "678160"
  },
  {
    "text": "marked such that ci will ensure that uh",
    "start": "678160",
    "end": "681440"
  },
  {
    "text": "if you go and add a non-structured log",
    "start": "681440",
    "end": "683600"
  },
  {
    "text": "it won't pass you have to go and ensure",
    "start": "683600",
    "end": "685360"
  },
  {
    "text": "the logging entry is structured now",
    "start": "685360",
    "end": "689120"
  },
  {
    "text": "in terms of what we're going to be",
    "start": "689120",
    "end": "690160"
  },
  {
    "text": "migrating in the future uh we didn't",
    "start": "690160",
    "end": "692000"
  },
  {
    "text": "migrate uh any particular component in",
    "start": "692000",
    "end": "694800"
  },
  {
    "text": "122 although migrations continued uh and",
    "start": "694800",
    "end": "698000"
  },
  {
    "text": "we're looking at for the upcoming 123",
    "start": "698000",
    "end": "700240"
  },
  {
    "text": "release which by the time you watch this",
    "start": "700240",
    "end": "702240"
  },
  {
    "text": "recording will now be in progress",
    "start": "702240",
    "end": "704160"
  },
  {
    "text": "selecting components for migration so",
    "start": "704160",
    "end": "707120"
  },
  {
    "text": "that's tracked in the linked issue there",
    "start": "707120",
    "end": "709760"
  },
  {
    "text": "we're also looking at deprecating some",
    "start": "709760",
    "end": "712160"
  },
  {
    "text": "k-log specific flags in kubernetes",
    "start": "712160",
    "end": "715120"
  },
  {
    "text": "components",
    "start": "715120",
    "end": "716800"
  },
  {
    "text": "now",
    "start": "716800",
    "end": "717680"
  },
  {
    "text": "these flags have been supported since we",
    "start": "717680",
    "end": "720160"
  },
  {
    "text": "initially used i guess g-log",
    "start": "720160",
    "end": "722800"
  },
  {
    "text": "and then later transitioned to k-log",
    "start": "722800",
    "end": "725600"
  },
  {
    "text": "but these flags kind of came along as we",
    "start": "725600",
    "end": "727519"
  },
  {
    "text": "were implementing",
    "start": "727519",
    "end": "729519"
  },
  {
    "text": "log with g log support they weren't",
    "start": "729519",
    "end": "731519"
  },
  {
    "text": "necessarily intended to be part of",
    "start": "731519",
    "end": "732720"
  },
  {
    "text": "kubernetes we just happened to get this",
    "start": "732720",
    "end": "734320"
  },
  {
    "text": "feature set and now when we're trying to",
    "start": "734320",
    "end": "736480"
  },
  {
    "text": "implement flag parity between uh text",
    "start": "736480",
    "end": "740079"
  },
  {
    "text": "logging and json logging we're finding",
    "start": "740079",
    "end": "742639"
  },
  {
    "text": "that it is relatively difficult in order",
    "start": "742639",
    "end": "744800"
  },
  {
    "text": "to",
    "start": "744800",
    "end": "745920"
  },
  {
    "text": "support this quite large uh and feature",
    "start": "745920",
    "end": "748639"
  },
  {
    "text": "full set of flags which include all",
    "start": "748639",
    "end": "750399"
  },
  {
    "text": "sorts of options for log rotation and",
    "start": "750399",
    "end": "752480"
  },
  {
    "text": "the likes so we currently have an",
    "start": "752480",
    "end": "754560"
  },
  {
    "text": "enhancement in progress targeted for the",
    "start": "754560",
    "end": "756240"
  },
  {
    "text": "123 release that will deprecate a number",
    "start": "756240",
    "end": "759279"
  },
  {
    "text": "of these flags using the standard",
    "start": "759279",
    "end": "761120"
  },
  {
    "text": "kubernetes deprecation process and",
    "start": "761120",
    "end": "764000"
  },
  {
    "text": "remove them from kubernetes components",
    "start": "764000",
    "end": "765920"
  },
  {
    "text": "so not in scope here is removing them",
    "start": "765920",
    "end": "768079"
  },
  {
    "text": "from k log itself they'll stay in the",
    "start": "768079",
    "end": "769839"
  },
  {
    "text": "library we just won't support them in",
    "start": "769839",
    "end": "771680"
  },
  {
    "text": "kubernetes anymore",
    "start": "771680",
    "end": "774800"
  },
  {
    "start": "774000",
    "end": "827000"
  },
  {
    "text": "so who's working on structured logging",
    "start": "775360",
    "end": "777600"
  },
  {
    "text": "one of the more exciting",
    "start": "777600",
    "end": "779120"
  },
  {
    "text": "things that i get to talk about is the",
    "start": "779120",
    "end": "781519"
  },
  {
    "text": "creation of our new working group",
    "start": "781519",
    "end": "783680"
  },
  {
    "text": "structured logging in order to manage",
    "start": "783680",
    "end": "785600"
  },
  {
    "text": "this structure block migration uh so the",
    "start": "785600",
    "end": "788240"
  },
  {
    "text": "organizers of the new working group are",
    "start": "788240",
    "end": "791040"
  },
  {
    "text": "merrick for google and shubhaksha from",
    "start": "791040",
    "end": "793920"
  },
  {
    "text": "apple and i'm very excited that they've",
    "start": "793920",
    "end": "796240"
  },
  {
    "text": "stepped up to lead this effort they have",
    "start": "796240",
    "end": "799120"
  },
  {
    "text": "a slack channel uh so you can check it",
    "start": "799120",
    "end": "800720"
  },
  {
    "text": "out there they also have charter and the",
    "start": "800720",
    "end": "802240"
  },
  {
    "text": "community repo and they meet what",
    "start": "802240",
    "end": "804160"
  },
  {
    "text": "bi-weekly on thursdays at 1500 utc so",
    "start": "804160",
    "end": "808079"
  },
  {
    "text": "they need your help i know that as part",
    "start": "808079",
    "end": "810399"
  },
  {
    "text": "of the cubelet migration in 121 we had a",
    "start": "810399",
    "end": "813120"
  },
  {
    "text": "lot of new contributors who helped out",
    "start": "813120",
    "end": "815519"
  },
  {
    "text": "with that effort so i'm sure that there",
    "start": "815519",
    "end": "818000"
  },
  {
    "text": "will be lots to do uh in the 123 release",
    "start": "818000",
    "end": "821040"
  },
  {
    "text": "and onwards so it's definitely a great",
    "start": "821040",
    "end": "822639"
  },
  {
    "text": "place to get involved if you're looking",
    "start": "822639",
    "end": "824000"
  },
  {
    "text": "for new things to do in kubernetes",
    "start": "824000",
    "end": "827959"
  },
  {
    "start": "827000",
    "end": "895000"
  },
  {
    "text": "log security is the last thing that i",
    "start": "828240",
    "end": "830639"
  },
  {
    "text": "wanted to talk about in the world of",
    "start": "830639",
    "end": "832320"
  },
  {
    "text": "vlogging so we have a couple of caps on",
    "start": "832320",
    "end": "834480"
  },
  {
    "text": "our backlog uh that we've been working",
    "start": "834480",
    "end": "837360"
  },
  {
    "text": "on uh since the 120 release where we",
    "start": "837360",
    "end": "840880"
  },
  {
    "text": "introduced some features to",
    "start": "840880",
    "end": "843120"
  },
  {
    "text": "hide credentials and secrets from logs",
    "start": "843120",
    "end": "845040"
  },
  {
    "text": "so that you know an attacker if they're",
    "start": "845040",
    "end": "847120"
  },
  {
    "text": "able to access logs don't get access to",
    "start": "847120",
    "end": "849279"
  },
  {
    "text": "the rest of your system",
    "start": "849279",
    "end": "851199"
  },
  {
    "text": "so we had two of these where we both",
    "start": "851199",
    "end": "854079"
  },
  {
    "text": "included static checks at build time to",
    "start": "854079",
    "end": "857199"
  },
  {
    "text": "ensure that people weren't necessarily",
    "start": "857199",
    "end": "859040"
  },
  {
    "text": "uh writing secrets out to logs as well",
    "start": "859040",
    "end": "862079"
  },
  {
    "text": "as some support for dynamic sanitization",
    "start": "862079",
    "end": "864800"
  },
  {
    "text": "uh so those static checks uh",
    "start": "864800",
    "end": "867440"
  },
  {
    "text": "and dynamic sanitization both debuted as",
    "start": "867440",
    "end": "869600"
  },
  {
    "text": "alpha features in the 120 release which",
    "start": "869600",
    "end": "872240"
  },
  {
    "text": "we discussed at kubecon of last year",
    "start": "872240",
    "end": "874720"
  },
  {
    "text": "uh now uh those static checks are going",
    "start": "874720",
    "end": "877760"
  },
  {
    "text": "to be targeted for graduation in the 123",
    "start": "877760",
    "end": "881360"
  },
  {
    "text": "release",
    "start": "881360",
    "end": "882320"
  },
  {
    "text": "and dynamic sanitization has stayed in",
    "start": "882320",
    "end": "884399"
  },
  {
    "text": "alpha for some time but i believe we",
    "start": "884399",
    "end": "886079"
  },
  {
    "text": "will be targeting beta for the 123",
    "start": "886079",
    "end": "888880"
  },
  {
    "text": "release",
    "start": "888880",
    "end": "889760"
  },
  {
    "text": "and you can enable that feature with the",
    "start": "889760",
    "end": "891360"
  },
  {
    "text": "logging sanitization flag",
    "start": "891360",
    "end": "894880"
  },
  {
    "start": "895000",
    "end": "902000"
  },
  {
    "text": "and i think that's all for me and i'm",
    "start": "895680",
    "end": "897680"
  },
  {
    "text": "going to hand it over to david to talk",
    "start": "897680",
    "end": "899360"
  },
  {
    "text": "about tracing",
    "start": "899360",
    "end": "902000"
  },
  {
    "start": "902000",
    "end": "909000"
  },
  {
    "text": "thanks elena",
    "start": "902880",
    "end": "904079"
  },
  {
    "text": "a lot has happened since the last",
    "start": "904079",
    "end": "905360"
  },
  {
    "text": "kubecon in the area of distributed",
    "start": "905360",
    "end": "906880"
  },
  {
    "text": "tracing my name is david ashpole and",
    "start": "906880",
    "end": "908880"
  },
  {
    "text": "i've had the privilege of working in",
    "start": "908880",
    "end": "909920"
  },
  {
    "start": "909000",
    "end": "973000"
  },
  {
    "text": "this area and i'm excited to share the",
    "start": "909920",
    "end": "911440"
  },
  {
    "text": "progress we've made",
    "start": "911440",
    "end": "913680"
  },
  {
    "text": "control plane tracing which includes",
    "start": "913680",
    "end": "915440"
  },
  {
    "text": "both the api server and ncd",
    "start": "915440",
    "end": "917680"
  },
  {
    "text": "is now an alpha",
    "start": "917680",
    "end": "919440"
  },
  {
    "text": "this is something that the sig has been",
    "start": "919440",
    "end": "920800"
  },
  {
    "text": "working towards for a very long time and",
    "start": "920800",
    "end": "922880"
  },
  {
    "text": "it's",
    "start": "922880",
    "end": "923600"
  },
  {
    "text": "really exciting to finally see it happen",
    "start": "923600",
    "end": "925680"
  },
  {
    "text": "a special shout out to lily for her work",
    "start": "925680",
    "end": "927600"
  },
  {
    "text": "on the xcd integration",
    "start": "927600",
    "end": "930399"
  },
  {
    "text": "control plane tracing allows cluster",
    "start": "930399",
    "end": "932160"
  },
  {
    "text": "operators to collect distributed traces",
    "start": "932160",
    "end": "934079"
  },
  {
    "text": "for correct requests sent to the",
    "start": "934079",
    "end": "935839"
  },
  {
    "text": "kubernetes control plane",
    "start": "935839",
    "end": "937600"
  },
  {
    "text": "this will make it easier to debug slow",
    "start": "937600",
    "end": "939759"
  },
  {
    "text": "requests and to figure out what path the",
    "start": "939759",
    "end": "941920"
  },
  {
    "text": "request took through the system",
    "start": "941920",
    "end": "944480"
  },
  {
    "text": "just getting off the ground is an effort",
    "start": "944480",
    "end": "946079"
  },
  {
    "text": "to start collecting distributed traces",
    "start": "946079",
    "end": "948000"
  },
  {
    "text": "for what the cubelet and container run",
    "start": "948000",
    "end": "949519"
  },
  {
    "text": "time are doing for pods",
    "start": "949519",
    "end": "951279"
  },
  {
    "text": "there is a proposal in the works for how",
    "start": "951279",
    "end": "953040"
  },
  {
    "text": "this will work in the cubelet and",
    "start": "953040",
    "end": "954560"
  },
  {
    "text": "interest in the integration from some of",
    "start": "954560",
    "end": "956000"
  },
  {
    "text": "the container runtimes as well",
    "start": "956000",
    "end": "958240"
  },
  {
    "text": "finally there has been a long-term",
    "start": "958240",
    "end": "959440"
  },
  {
    "text": "effort to figure out how to propagate",
    "start": "959440",
    "end": "960959"
  },
  {
    "text": "contacts between controllers",
    "start": "960959",
    "end": "963759"
  },
  {
    "text": "so that we can glue together all of this",
    "start": "963759",
    "end": "966240"
  },
  {
    "text": "work that we've been doing",
    "start": "966240",
    "end": "969440"
  },
  {
    "text": "but the context propagation proposal is",
    "start": "969440",
    "end": "971279"
  },
  {
    "text": "more general than that and would apply",
    "start": "971279",
    "end": "972959"
  },
  {
    "text": "both to traces and to logs",
    "start": "972959",
    "end": "976880"
  },
  {
    "text": "i want to dive a little bit deeper into",
    "start": "977839",
    "end": "980000"
  },
  {
    "text": "control plane tracing since it just",
    "start": "980000",
    "end": "981600"
  },
  {
    "text": "reached alpha",
    "start": "981600",
    "end": "983279"
  },
  {
    "text": "so",
    "start": "983279",
    "end": "984399"
  },
  {
    "text": "what i did for this demo is i enabled",
    "start": "984399",
    "end": "986480"
  },
  {
    "text": "the api server tracing feature gate and",
    "start": "986480",
    "end": "988880"
  },
  {
    "text": "on the api server i set the tracing",
    "start": "988880",
    "end": "991680"
  },
  {
    "text": "config file flag to a file containing",
    "start": "991680",
    "end": "994399"
  },
  {
    "text": "the following configuration but sets a",
    "start": "994399",
    "end": "996639"
  },
  {
    "text": "one percent sampling rate for the api",
    "start": "996639",
    "end": "998399"
  },
  {
    "text": "server",
    "start": "998399",
    "end": "999279"
  },
  {
    "text": "then on fcd i enabled the experimental",
    "start": "999279",
    "end": "1002079"
  },
  {
    "text": "distributed tracing",
    "start": "1002079",
    "end": "1004000"
  },
  {
    "text": "feature",
    "start": "1004000",
    "end": "1005839"
  },
  {
    "text": "and for each of those i ran an open",
    "start": "1005839",
    "end": "1007839"
  },
  {
    "text": "telemetry collector as a sidecar to",
    "start": "1007839",
    "end": "1009839"
  },
  {
    "text": "collect trace to collect spans uh from",
    "start": "1009839",
    "end": "1012480"
  },
  {
    "text": "them and to send them to my back end",
    "start": "1012480",
    "end": "1016639"
  },
  {
    "text": "in this example",
    "start": "1016720",
    "end": "1018639"
  },
  {
    "text": "i ended up sending them to jaeger but",
    "start": "1018639",
    "end": "1020959"
  },
  {
    "text": "it's super easy to send them to hosted",
    "start": "1020959",
    "end": "1024640"
  },
  {
    "text": "trace back-ends or to other popular open",
    "start": "1024640",
    "end": "1026880"
  },
  {
    "text": "source back-ends as well",
    "start": "1026880",
    "end": "1029839"
  },
  {
    "text": "so here's an example trace",
    "start": "1029839",
    "end": "1032640"
  },
  {
    "text": "you can see the top bar",
    "start": "1032640",
    "end": "1035360"
  },
  {
    "text": "is the incoming request so the request",
    "start": "1035360",
    "end": "1038880"
  },
  {
    "text": "first hit the api server at the very",
    "start": "1038880",
    "end": "1040400"
  },
  {
    "text": "beginning",
    "start": "1040400",
    "end": "1041839"
  },
  {
    "text": "and then the api server responded at the",
    "start": "1041839",
    "end": "1043760"
  },
  {
    "text": "very end",
    "start": "1043760",
    "end": "1044798"
  },
  {
    "text": "and so we can see the teal lines",
    "start": "1044799",
    "end": "1047438"
  },
  {
    "text": "are coming our spans that are emitted by",
    "start": "1047439",
    "end": "1049600"
  },
  {
    "text": "the api server so that includes this top",
    "start": "1049600",
    "end": "1051520"
  },
  {
    "text": "one and both of these child spans here",
    "start": "1051520",
    "end": "1055200"
  },
  {
    "text": "and then i'm also running a",
    "start": "1055200",
    "end": "1057440"
  },
  {
    "text": "custom mutating admission controller",
    "start": "1057440",
    "end": "1059280"
  },
  {
    "text": "here",
    "start": "1059280",
    "end": "1060720"
  },
  {
    "text": "and fcd has",
    "start": "1060720",
    "end": "1062480"
  },
  {
    "text": "its tracing enabled as well and that",
    "start": "1062480",
    "end": "1064240"
  },
  {
    "text": "span is here so from this example we",
    "start": "1064240",
    "end": "1066640"
  },
  {
    "text": "could see all the way from when the api",
    "start": "1066640",
    "end": "1069200"
  },
  {
    "text": "server first got the request",
    "start": "1069200",
    "end": "1071120"
  },
  {
    "text": "to when it asked for",
    "start": "1071120",
    "end": "1073200"
  },
  {
    "text": "uh a response from a mutant mission",
    "start": "1073200",
    "end": "1075520"
  },
  {
    "text": "controller",
    "start": "1075520",
    "end": "1076640"
  },
  {
    "text": "um to when it actually committed the",
    "start": "1076640",
    "end": "1079200"
  },
  {
    "text": "transaction to etcd and responded to the",
    "start": "1079200",
    "end": "1081679"
  },
  {
    "text": "user",
    "start": "1081679",
    "end": "1082640"
  },
  {
    "text": "so this hopefully will be really useful",
    "start": "1082640",
    "end": "1084720"
  },
  {
    "text": "to operators as i said",
    "start": "1084720",
    "end": "1087440"
  },
  {
    "text": "and this is just the beginning we know",
    "start": "1087440",
    "end": "1088880"
  },
  {
    "text": "that tracing becomes more useful the",
    "start": "1088880",
    "end": "1091280"
  },
  {
    "text": "more things",
    "start": "1091280",
    "end": "1092960"
  },
  {
    "text": "integrate with it so",
    "start": "1092960",
    "end": "1094640"
  },
  {
    "text": "we're excited to see where this all",
    "start": "1094640",
    "end": "1096480"
  },
  {
    "text": "leads",
    "start": "1096480",
    "end": "1098799"
  },
  {
    "text": "up next to talk about metrics",
    "start": "1099360",
    "end": "1101919"
  },
  {
    "text": "is han take it away",
    "start": "1101919",
    "end": "1105600"
  },
  {
    "start": "1105000",
    "end": "1124000"
  },
  {
    "text": "thanks david hey everyone i'm han and",
    "start": "1106720",
    "end": "1109520"
  },
  {
    "text": "today i'm going to be talking about",
    "start": "1109520",
    "end": "1110640"
  },
  {
    "text": "metrics in kubernetes",
    "start": "1110640",
    "end": "1112880"
  },
  {
    "text": "first i'm going to talk about some more",
    "start": "1112880",
    "end": "1114240"
  },
  {
    "text": "foundational stuff and then i'm going to",
    "start": "1114240",
    "end": "1115760"
  },
  {
    "text": "get into the history of kubernetes",
    "start": "1115760",
    "end": "1117120"
  },
  {
    "text": "instrumentation and how our sig comes",
    "start": "1117120",
    "end": "1118799"
  },
  {
    "text": "into play",
    "start": "1118799",
    "end": "1120400"
  },
  {
    "text": "first you all should know that we use",
    "start": "1120400",
    "end": "1121919"
  },
  {
    "text": "prometheus clients for instrumentation",
    "start": "1121919",
    "end": "1125280"
  },
  {
    "text": "this means that the primary kubernetes",
    "start": "1125280",
    "end": "1127200"
  },
  {
    "text": "components the cube api server the",
    "start": "1127200",
    "end": "1129440"
  },
  {
    "text": "controller manager scheduler cubelet",
    "start": "1129440",
    "end": "1131919"
  },
  {
    "text": "all of these things expose text based",
    "start": "1131919",
    "end": "1134400"
  },
  {
    "text": "metrics endpoints which can then be",
    "start": "1134400",
    "end": "1136080"
  },
  {
    "text": "scraped and ingested",
    "start": "1136080",
    "end": "1137919"
  },
  {
    "text": "by a various",
    "start": "1137919",
    "end": "1140080"
  },
  {
    "text": "different number of time series back",
    "start": "1140080",
    "end": "1141919"
  },
  {
    "text": "ends",
    "start": "1141919",
    "end": "1143360"
  },
  {
    "text": "though commonly this tends to be",
    "start": "1143360",
    "end": "1144640"
  },
  {
    "text": "prometheus",
    "start": "1144640",
    "end": "1146320"
  },
  {
    "text": "prometheus has a number of different",
    "start": "1146320",
    "end": "1147679"
  },
  {
    "text": "metric types which i won't get into",
    "start": "1147679",
    "end": "1149600"
  },
  {
    "text": "since this isn't a prettiest talk but",
    "start": "1149600",
    "end": "1151760"
  },
  {
    "text": "needless to say we use basically all of",
    "start": "1151760",
    "end": "1153919"
  },
  {
    "text": "them in kubernetes",
    "start": "1153919",
    "end": "1156240"
  },
  {
    "text": "now let's get into some history",
    "start": "1156240",
    "end": "1158960"
  },
  {
    "text": "it's a bit of an understatement to say",
    "start": "1158960",
    "end": "1160320"
  },
  {
    "text": "that we've had some problems in",
    "start": "1160320",
    "end": "1162000"
  },
  {
    "text": "kubernetes with metrics",
    "start": "1162000",
    "end": "1165799"
  },
  {
    "text": "there is though usually a common theme",
    "start": "1168320",
    "end": "1171120"
  },
  {
    "text": "underlying these which is that metrics",
    "start": "1171120",
    "end": "1172799"
  },
  {
    "text": "can grow in size and quickly become",
    "start": "1172799",
    "end": "1174880"
  },
  {
    "text": "memory leaks this can cause instability",
    "start": "1174880",
    "end": "1177360"
  },
  {
    "text": "in the component",
    "start": "1177360",
    "end": "1179280"
  },
  {
    "text": "why is this the case",
    "start": "1179280",
    "end": "1181520"
  },
  {
    "text": "let's take a look",
    "start": "1181520",
    "end": "1183280"
  },
  {
    "start": "1182000",
    "end": "1257000"
  },
  {
    "text": "take this example metric it's a request",
    "start": "1183280",
    "end": "1185200"
  },
  {
    "text": "metric",
    "start": "1185200",
    "end": "1186960"
  },
  {
    "text": "like all metrics it has a width and a",
    "start": "1186960",
    "end": "1188880"
  },
  {
    "text": "height",
    "start": "1188880",
    "end": "1190559"
  },
  {
    "text": "by width what i mean is the number of",
    "start": "1190559",
    "end": "1192720"
  },
  {
    "text": "labels",
    "start": "1192720",
    "end": "1194640"
  },
  {
    "text": "for this example metric we have verb",
    "start": "1194640",
    "end": "1196799"
  },
  {
    "text": "code and path this is pretty common",
    "start": "1196799",
    "end": "1198799"
  },
  {
    "text": "pattern",
    "start": "1198799",
    "end": "1201200"
  },
  {
    "text": "so this has a width of three",
    "start": "1201760",
    "end": "1204240"
  },
  {
    "text": "by height what i mean is the total",
    "start": "1204240",
    "end": "1206240"
  },
  {
    "text": "number of values that a label can have",
    "start": "1206240",
    "end": "1208000"
  },
  {
    "text": "so as you can see the verb has a height",
    "start": "1208000",
    "end": "1209440"
  },
  {
    "text": "of four code has a height of four path",
    "start": "1209440",
    "end": "1211840"
  },
  {
    "text": "has a height of one",
    "start": "1211840",
    "end": "1214640"
  },
  {
    "text": "so every time like the relationship",
    "start": "1215039",
    "end": "1217039"
  },
  {
    "text": "between",
    "start": "1217039",
    "end": "1218000"
  },
  {
    "text": "labels and label values is that each of",
    "start": "1218000",
    "end": "1220320"
  },
  {
    "text": "these",
    "start": "1220320",
    "end": "1221200"
  },
  {
    "text": "each of these combinations forms a",
    "start": "1221200",
    "end": "1223200"
  },
  {
    "text": "single time series put 200 pods is one",
    "start": "1223200",
    "end": "1226240"
  },
  {
    "text": "time series put 201 pods is another time",
    "start": "1226240",
    "end": "1229840"
  },
  {
    "text": "series post 200 pods yet another",
    "start": "1229840",
    "end": "1234559"
  },
  {
    "text": "so if we add a new label with more than",
    "start": "1234559",
    "end": "1237280"
  },
  {
    "text": "two values it has a multiplicative",
    "start": "1237280",
    "end": "1239520"
  },
  {
    "text": "effect on the total number of time",
    "start": "1239520",
    "end": "1240880"
  },
  {
    "text": "series",
    "start": "1240880",
    "end": "1241840"
  },
  {
    "text": "this can be problematic because it it",
    "start": "1241840",
    "end": "1244400"
  },
  {
    "text": "has a multiplicative effect on on the",
    "start": "1244400",
    "end": "1246880"
  },
  {
    "text": "size of the metric",
    "start": "1246880",
    "end": "1249840"
  },
  {
    "text": "so this is where it comes into play we",
    "start": "1249840",
    "end": "1251840"
  },
  {
    "text": "have exploding metrics and we need to",
    "start": "1251840",
    "end": "1253600"
  },
  {
    "text": "fix this",
    "start": "1253600",
    "end": "1254880"
  },
  {
    "text": "so",
    "start": "1254880",
    "end": "1257039"
  },
  {
    "start": "1257000",
    "end": "1309000"
  },
  {
    "text": "and we did that we created a framework",
    "start": "1259039",
    "end": "1260720"
  },
  {
    "text": "which makes the structure of a metric an",
    "start": "1260720",
    "end": "1262640"
  },
  {
    "text": "immutable api we call this the metric",
    "start": "1262640",
    "end": "1265200"
  },
  {
    "text": "stability framework",
    "start": "1265200",
    "end": "1267200"
  },
  {
    "text": "with static analysis and hooks into",
    "start": "1267200",
    "end": "1268880"
  },
  {
    "text": "kubernetes commit pipelines we can",
    "start": "1268880",
    "end": "1270880"
  },
  {
    "text": "validate that stable metrics do not",
    "start": "1270880",
    "end": "1272720"
  },
  {
    "text": "structurally change they will always",
    "start": "1272720",
    "end": "1274400"
  },
  {
    "text": "have the same labels you will cannot",
    "start": "1274400",
    "end": "1276559"
  },
  {
    "text": "remove or you cannot add",
    "start": "1276559",
    "end": "1279120"
  },
  {
    "text": "labels of a stable metric",
    "start": "1279120",
    "end": "1282720"
  },
  {
    "text": "this gives powerful guarantees to",
    "start": "1282720",
    "end": "1284159"
  },
  {
    "text": "kubernetes users because you know that",
    "start": "1284159",
    "end": "1286320"
  },
  {
    "text": "you can alert off of these stable",
    "start": "1286320",
    "end": "1287520"
  },
  {
    "text": "metrics from release to release without",
    "start": "1287520",
    "end": "1289120"
  },
  {
    "text": "breakage so you can also create slos",
    "start": "1289120",
    "end": "1292000"
  },
  {
    "text": "based off of these metrics",
    "start": "1292000",
    "end": "1295039"
  },
  {
    "text": "but what happens if there is a code",
    "start": "1295039",
    "end": "1296880"
  },
  {
    "text": "change and all of a sudden a thousand",
    "start": "1296880",
    "end": "1298320"
  },
  {
    "text": "new labels are added to a stable metric",
    "start": "1298320",
    "end": "1301120"
  },
  {
    "text": "all of a sudden you're back in the same",
    "start": "1301120",
    "end": "1302880"
  },
  {
    "text": "place you have an exploding metric",
    "start": "1302880",
    "end": "1306240"
  },
  {
    "text": "tons of cardinality and huge memory",
    "start": "1306240",
    "end": "1308000"
  },
  {
    "text": "leaks",
    "start": "1308000",
    "end": "1310159"
  },
  {
    "start": "1309000",
    "end": "1365000"
  },
  {
    "text": "if you're a cluster operator then your",
    "start": "1310159",
    "end": "1311679"
  },
  {
    "text": "fix is basically",
    "start": "1311679",
    "end": "1313760"
  },
  {
    "text": "roll back your cluster to a safe",
    "start": "1313760",
    "end": "1315039"
  },
  {
    "text": "kubernetes version wait for upstream",
    "start": "1315039",
    "end": "1317200"
  },
  {
    "text": "kubernetes to fix this issue",
    "start": "1317200",
    "end": "1319120"
  },
  {
    "text": "back port it then cut a release at which",
    "start": "1319120",
    "end": "1321039"
  },
  {
    "text": "point you could",
    "start": "1321039",
    "end": "1322159"
  },
  {
    "text": "have easily been waiting at least a",
    "start": "1322159",
    "end": "1323760"
  },
  {
    "text": "month",
    "start": "1323760",
    "end": "1325600"
  },
  {
    "text": "instead",
    "start": "1325600",
    "end": "1326640"
  },
  {
    "text": "we built this tool metrics cardinality",
    "start": "1326640",
    "end": "1329280"
  },
  {
    "text": "enforcement",
    "start": "1329280",
    "end": "1330960"
  },
  {
    "text": "what this allows you to do is at runtime",
    "start": "1330960",
    "end": "1333679"
  },
  {
    "text": "at runtime you can specify valid values",
    "start": "1333679",
    "end": "1336400"
  },
  {
    "text": "for a label through a command line flag",
    "start": "1336400",
    "end": "1338720"
  },
  {
    "text": "that means let's say",
    "start": "1338720",
    "end": "1340559"
  },
  {
    "text": "upstream kubernetes makes mistakes and",
    "start": "1340559",
    "end": "1343280"
  },
  {
    "text": "releases a bad metric one that explodes",
    "start": "1343280",
    "end": "1345840"
  },
  {
    "text": "in cardinality because a thousand new",
    "start": "1345840",
    "end": "1347840"
  },
  {
    "text": "labels have been added",
    "start": "1347840",
    "end": "1350240"
  },
  {
    "text": "you don't have to roll back your cluster",
    "start": "1350240",
    "end": "1351760"
  },
  {
    "text": "all you have to do is restart it with a",
    "start": "1351760",
    "end": "1354400"
  },
  {
    "text": "flag and bind the possible number of",
    "start": "1354400",
    "end": "1357200"
  },
  {
    "text": "labels for that",
    "start": "1357200",
    "end": "1358840"
  },
  {
    "text": "metric",
    "start": "1358840",
    "end": "1360400"
  },
  {
    "text": "then you just wait for upstream to fix",
    "start": "1360400",
    "end": "1362080"
  },
  {
    "text": "it and then you can roll forwards",
    "start": "1362080",
    "end": "1366320"
  },
  {
    "start": "1365000",
    "end": "1423000"
  },
  {
    "text": "and in the future we want your help we",
    "start": "1366640",
    "end": "1368799"
  },
  {
    "text": "want to keep improving these things we",
    "start": "1368799",
    "end": "1371039"
  },
  {
    "text": "want to make the the usability of",
    "start": "1371039",
    "end": "1372960"
  },
  {
    "text": "instrumentation better for users",
    "start": "1372960",
    "end": "1376159"
  },
  {
    "text": "one of the ways that we want to do this",
    "start": "1376159",
    "end": "1377600"
  },
  {
    "text": "is to extend metric stability we want to",
    "start": "1377600",
    "end": "1379600"
  },
  {
    "text": "bring it into parity with feature stages",
    "start": "1379600",
    "end": "1382000"
  },
  {
    "text": "currently we actually only have two",
    "start": "1382000",
    "end": "1383440"
  },
  {
    "text": "stable classes alpha and stable",
    "start": "1383440",
    "end": "1386000"
  },
  {
    "text": "and the former has absolutely no",
    "start": "1386000",
    "end": "1387520"
  },
  {
    "text": "guarantees and stable metrics have very",
    "start": "1387520",
    "end": "1391440"
  },
  {
    "text": "firm guarantees we want additional",
    "start": "1391440",
    "end": "1393600"
  },
  {
    "text": "expressiveness to denote metrics which",
    "start": "1393600",
    "end": "1395520"
  },
  {
    "text": "are kind of in the middle",
    "start": "1395520",
    "end": "1398000"
  },
  {
    "text": "and you might be able to set up charts",
    "start": "1398000",
    "end": "1399919"
  },
  {
    "text": "for",
    "start": "1399919",
    "end": "1402320"
  },
  {
    "text": "we also want to hook into the static",
    "start": "1402320",
    "end": "1403760"
  },
  {
    "text": "analysis pipeline to auto generate",
    "start": "1403760",
    "end": "1405760"
  },
  {
    "text": "metric documentation currently the only",
    "start": "1405760",
    "end": "1408240"
  },
  {
    "text": "way to find all of the metrics component",
    "start": "1408240",
    "end": "1410799"
  },
  {
    "text": "has is either by one",
    "start": "1410799",
    "end": "1413360"
  },
  {
    "text": "reading the kubernetes source code that",
    "start": "1413360",
    "end": "1415440"
  },
  {
    "text": "sucks or two curling the metrics",
    "start": "1415440",
    "end": "1417600"
  },
  {
    "text": "endpoint that also sucks",
    "start": "1417600",
    "end": "1420960"
  },
  {
    "text": "so please come to our meetings get",
    "start": "1421279",
    "end": "1422960"
  },
  {
    "text": "involved",
    "start": "1422960",
    "end": "1425279"
  },
  {
    "start": "1423000",
    "end": "1433000"
  },
  {
    "text": "we have a ton of sub projects that could",
    "start": "1425279",
    "end": "1426960"
  },
  {
    "text": "user help like",
    "start": "1426960",
    "end": "1428320"
  },
  {
    "text": "cubestate metrics metric server prom",
    "start": "1428320",
    "end": "1430799"
  },
  {
    "text": "queue structured logging tracing",
    "start": "1430799",
    "end": "1434480"
  },
  {
    "start": "1433000",
    "end": "1464000"
  },
  {
    "text": "where can you find us well we have a",
    "start": "1435520",
    "end": "1437120"
  },
  {
    "text": "meeting every thursday at 9 30",
    "start": "1437120",
    "end": "1439200"
  },
  {
    "text": "pacific standard time and we alternate",
    "start": "1439200",
    "end": "1441679"
  },
  {
    "text": "each week between a sig meeting and a",
    "start": "1441679",
    "end": "1443679"
  },
  {
    "text": "triage meeting",
    "start": "1443679",
    "end": "1445919"
  },
  {
    "text": "and in the triage meeting we basically",
    "start": "1445919",
    "end": "1447520"
  },
  {
    "text": "go over issues and pr's relevant for our",
    "start": "1447520",
    "end": "1449520"
  },
  {
    "text": "sig",
    "start": "1449520",
    "end": "1450640"
  },
  {
    "text": "you can find us in slack pretty easy in",
    "start": "1450640",
    "end": "1452240"
  },
  {
    "text": "this sig instrumentation slack channel",
    "start": "1452240",
    "end": "1454320"
  },
  {
    "text": "and you can ping us directly in slack",
    "start": "1454320",
    "end": "1456159"
  },
  {
    "text": "and we should be easy to find because",
    "start": "1456159",
    "end": "1457440"
  },
  {
    "text": "our slack usernames are our github",
    "start": "1457440",
    "end": "1459679"
  },
  {
    "text": "handles",
    "start": "1459679",
    "end": "1461200"
  },
  {
    "text": "anyway thanks for coming and listening",
    "start": "1461200",
    "end": "1462720"
  },
  {
    "text": "to our talk",
    "start": "1462720",
    "end": "1465960"
  }
]