[
  {
    "text": "hi everybody and thank you for joining this cncf webinar today we're going to be talking about",
    "start": "0",
    "end": "6120"
  },
  {
    "text": "cluster API and gitups the key to kubernetes lifecycle management",
    "start": "6120",
    "end": "12559"
  },
  {
    "text": "so my name is Nick I'm the Delville lead at spectrocloud",
    "start": "12780",
    "end": "17940"
  },
  {
    "text": "and what I want to focus on today is a did dive on a you know Hands-On use case",
    "start": "17940",
    "end": "25800"
  },
  {
    "text": "typically you will find a lot of talks and presentation on cluster API githubs",
    "start": "25800",
    "end": "31980"
  },
  {
    "text": "and both together but most of the time they will give you like a simple example",
    "start": "31980",
    "end": "38040"
  },
  {
    "text": "um or a very simple use case today I want you to have a transparent",
    "start": "38040",
    "end": "43920"
  },
  {
    "text": "experience I'm not going to hide anything around cluster API gitups and",
    "start": "43920",
    "end": "49140"
  },
  {
    "text": "augustd which is the githubs tool we're going to be using uh we're gonna do everything live and",
    "start": "49140",
    "end": "55140"
  },
  {
    "text": "we're going to see what are you know the considerations you have to um to make to basically",
    "start": "55140",
    "end": "63680"
  },
  {
    "text": "make gitups with cluster API useful in your organization",
    "start": "63680",
    "end": "69600"
  },
  {
    "text": "so let's take a quick look at the agenda for today so first",
    "start": "69600",
    "end": "75060"
  },
  {
    "text": "um I'm going to quickly go over cluster API and github's principle then we're",
    "start": "75060",
    "end": "81540"
  },
  {
    "text": "going to take a a closer look at cluster API components and what's provisioning",
    "start": "81540",
    "end": "87780"
  },
  {
    "text": "workflow look like then we're going to talk about",
    "start": "87780",
    "end": "93540"
  },
  {
    "text": "um you know what sort of additional tools you may want to have on top of cluster API",
    "start": "93540",
    "end": "99920"
  },
  {
    "text": "and address some caveats especially when you want to combine with augocd or any",
    "start": "99920",
    "end": "105840"
  },
  {
    "text": "other github's tooling and then we'll have the use case deep dive live demos",
    "start": "105840",
    "end": "113119"
  },
  {
    "text": "and then I'll do like another demo also as we as we move forward we're going to",
    "start": "113119",
    "end": "119220"
  },
  {
    "text": "start with you know simple demo and then we're going to build our our full use case",
    "start": "119220",
    "end": "125340"
  },
  {
    "text": "so let's get started before talking about",
    "start": "125340",
    "end": "131459"
  },
  {
    "text": "um cluster API or githubs or any other sort of tooling that work with the same",
    "start": "131459",
    "end": "137940"
  },
  {
    "text": "pattern in kubernetes which is the operator pattern so let's talk about",
    "start": "137940",
    "end": "143580"
  },
  {
    "text": "this first so operators are not something really new it's been there for a couple of",
    "start": "143580",
    "end": "150000"
  },
  {
    "text": "years now um but what makes it very different uh compared to you know what people used to",
    "start": "150000",
    "end": "157260"
  },
  {
    "text": "do in kubernetes before is that you can bring automation inside of kubernetes as",
    "start": "157260",
    "end": "163140"
  },
  {
    "text": "opposed you know uh to infrastructure as code or other tools like that is that",
    "start": "163140",
    "end": "169800"
  },
  {
    "text": "they live outside of kubernetes with the operator pattern you are",
    "start": "169800",
    "end": "175620"
  },
  {
    "text": "bringing automation capability within the kubernetes cluster so how it works",
    "start": "175620",
    "end": "181019"
  },
  {
    "text": "it's basically it has multiple components first you",
    "start": "181019",
    "end": "187200"
  },
  {
    "text": "have what we called customer's definition in the case of cluster API",
    "start": "187200",
    "end": "193620"
  },
  {
    "text": "well cluster API implements a lot of custom resources the cluster itself",
    "start": "193620",
    "end": "199620"
  },
  {
    "text": "machine machine deployment we're going to see them later but they are essentially",
    "start": "199620",
    "end": "205159"
  },
  {
    "text": "resources that extend the native initial kubernetes API by making those",
    "start": "205159",
    "end": "213900"
  },
  {
    "text": "objects first class citizen inside kubernetes um then the second component of the",
    "start": "213900",
    "end": "222120"
  },
  {
    "text": "operator pattern is a custom controller so the role of the custom controller is",
    "start": "222120",
    "end": "228060"
  },
  {
    "text": "to monitor changes that are realized on those custom resources like the cluster",
    "start": "228060",
    "end": "235379"
  },
  {
    "text": "API cluster and others and then react and perform certain actions based on",
    "start": "235379",
    "end": "244080"
  },
  {
    "text": "events so for example if you create a new cluster API cluster then the custom",
    "start": "244080",
    "end": "250019"
  },
  {
    "text": "controller of cluster API will make sure that this cluster will be",
    "start": "250019",
    "end": "256919"
  },
  {
    "text": "deployed in the right environment with the right machine the right instances",
    "start": "256919",
    "end": "262160"
  },
  {
    "text": "size the right Network etc etc so it's automating things outside of the",
    "start": "262160",
    "end": "270120"
  },
  {
    "text": "communities cluster why at the same time monitoring a representation of",
    "start": "270120",
    "end": "277620"
  },
  {
    "text": "these resources within the kubernetes cluster and it does this permanently so",
    "start": "277620",
    "end": "283740"
  },
  {
    "text": "in other words that means that the custom controller or",
    "start": "283740",
    "end": "289139"
  },
  {
    "text": "I mean doesn't have to be only one you will see in cluster API there are more than one custom controller they are",
    "start": "289139",
    "end": "295860"
  },
  {
    "text": "creating a Reconciliation Loop between the desired state which is the resources",
    "start": "295860",
    "end": "302460"
  },
  {
    "text": "that are created within the cluster and the real current state of the",
    "start": "302460",
    "end": "308340"
  },
  {
    "text": "infrastructure which is what exists outside of the Committees cluster here",
    "start": "308340",
    "end": "313620"
  },
  {
    "text": "in the case of cluster API this is the state of the cluster you want to to",
    "start": "313620",
    "end": "319320"
  },
  {
    "text": "deploy so now let's talk about the githubs",
    "start": "319320",
    "end": "326280"
  },
  {
    "text": "pattern so github's pattern means that you are storing not only your code on",
    "start": "326280",
    "end": "335639"
  },
  {
    "text": "your repositories or that would be like the dev that stores his code on git repo",
    "start": "335639",
    "end": "343080"
  },
  {
    "text": "the application code which is on top of this representation here traditionally",
    "start": "343080",
    "end": "348180"
  },
  {
    "text": "you know it's going to trigger a pipeline that maybe living within GitHub actions in that",
    "start": "348180",
    "end": "353639"
  },
  {
    "text": "particular example build the image and then this is the traditional",
    "start": "353639",
    "end": "360360"
  },
  {
    "text": "um you know developer pipeline now a github's pipeline will add another",
    "start": "360360",
    "end": "366240"
  },
  {
    "text": "component to it so more specifically here you will generate or the dev slash",
    "start": "366240",
    "end": "373620"
  },
  {
    "text": "platform engineer or you know devops engineer will create the right workflow",
    "start": "373620",
    "end": "379440"
  },
  {
    "text": "to generate the kubernetes manifests for that for",
    "start": "379440",
    "end": "384960"
  },
  {
    "text": "deploying that particular application so here that means that the kubernetes",
    "start": "384960",
    "end": "390720"
  },
  {
    "text": "manifests store on the git repository contain all the objects required to to",
    "start": "390720",
    "end": "397979"
  },
  {
    "text": "install the application on the cluster so we need an extra tool to create a",
    "start": "397979",
    "end": "405000"
  },
  {
    "text": "request reconciliation Loop between this desired state so the manifests and what",
    "start": "405000",
    "end": "410460"
  },
  {
    "text": "is deployed in the cluster the current state of the cluster in our case in the example today we're",
    "start": "410460",
    "end": "416639"
  },
  {
    "text": "going to be using August CD which is going to be responsible for that",
    "start": "416639",
    "end": "421919"
  },
  {
    "text": "particular automation so any change pushed into the manifests",
    "start": "421919",
    "end": "428100"
  },
  {
    "text": "will be implemented into the cluster so for example if you change a container",
    "start": "428100",
    "end": "433860"
  },
  {
    "text": "image August CD will reconcile this within the cluster and replace the image where appropriate",
    "start": "433860",
    "end": "439680"
  },
  {
    "text": "if you delete the application and have you know enabled the pruning function then I'll go CD will delete",
    "start": "439680",
    "end": "446599"
  },
  {
    "text": "the application in in the cluster so of course there are multiple benefits",
    "start": "446599",
    "end": "452639"
  },
  {
    "text": "of doing this so the first one is that now you know as I said everything is",
    "start": "452639",
    "end": "457800"
  },
  {
    "text": "managed decoratively there's no imperative command um so it's kind of avoiding any possible",
    "start": "457800",
    "end": "465180"
  },
  {
    "text": "mistakes made by human because we bring this extra automation and then there's the second benefit",
    "start": "465180",
    "end": "471840"
  },
  {
    "text": "which is around security because now all those operations are are performed by",
    "start": "471840",
    "end": "477720"
  },
  {
    "text": "you know service account associated with August and only that particular service",
    "start": "477720",
    "end": "482880"
  },
  {
    "text": "accounts will require permissions to perform action within particular",
    "start": "482880",
    "end": "487919"
  },
  {
    "text": "namespace or within the cluster which is in the end reducing the attack surface",
    "start": "487919",
    "end": "493919"
  },
  {
    "text": "of that particular cluster so now let's take a quick overview of",
    "start": "493919",
    "end": "501900"
  },
  {
    "text": "cluster API and some of the main components so at the very top the",
    "start": "501900",
    "end": "507240"
  },
  {
    "text": "cluster API cluster type is merely an interface for",
    "start": "507240",
    "end": "513200"
  },
  {
    "text": "more you know specific and lower level implementation details that are",
    "start": "513200",
    "end": "519839"
  },
  {
    "text": "implemented by the infrastructure provider and then we also have other providers",
    "start": "519839",
    "end": "526760"
  },
  {
    "text": "that cluster API relies upon we have the bootstrap provider and the control plane",
    "start": "526760",
    "end": "533519"
  },
  {
    "text": "providers so as I was saying the infrastructure provider role is to encapsulate all the tasks that are",
    "start": "533519",
    "end": "542220"
  },
  {
    "text": "specific to a particular cloud or infrastructure things like you know defining instant",
    "start": "542220",
    "end": "548760"
  },
  {
    "text": "sizes for the different nodes how you implement a load balancer which network",
    "start": "548760",
    "end": "555720"
  },
  {
    "text": "you want to use this type of things so I gave a couple of examples here cap G for",
    "start": "555720",
    "end": "561899"
  },
  {
    "text": "cluster API provider gcp Kappa for AWS and cap Z for Azure and there are many",
    "start": "561899",
    "end": "569160"
  },
  {
    "text": "others um so the the role of the bootstrap provider is basically to turn",
    "start": "569160",
    "end": "575240"
  },
  {
    "text": "any machine into a kubernetes node",
    "start": "575240",
    "end": "580519"
  },
  {
    "text": "using Cloud init scripts so the bootstrap Provider by default if you",
    "start": "580519",
    "end": "586620"
  },
  {
    "text": "don't specify anything kuberdm is going to be used so that's going to be the cloudiness",
    "start": "586620",
    "end": "591839"
  },
  {
    "text": "script corresponding to um making sure you know kubadm is used to turn that machine into a that",
    "start": "591839",
    "end": "599459"
  },
  {
    "text": "instance into a kubernetes nodes then there is a cap PM for microcodes",
    "start": "599459",
    "end": "606980"
  },
  {
    "text": "for Talos if you are deploying a Talos cluster which is created let's say very",
    "start": "606980",
    "end": "613260"
  },
  {
    "text": "opinionated kubernetes cluster the control plane provider will be responsible for creating the control",
    "start": "613260",
    "end": "621120"
  },
  {
    "text": "plane nodes so in the same way um the bootstrap provider is responsible",
    "start": "621120",
    "end": "629040"
  },
  {
    "text": "for turning you know a machine into a into worker the control plane provider",
    "start": "629040",
    "end": "635040"
  },
  {
    "text": "is responsible for turning the machine into a control plane it does have all",
    "start": "635040",
    "end": "641279"
  },
  {
    "text": "the the config specification the type of instance the machine template you want to use all those kind of things",
    "start": "641279",
    "end": "648680"
  },
  {
    "text": "and all those those three components are combined into options for the cluster",
    "start": "648680",
    "end": "656279"
  },
  {
    "text": "CTL init command that um uh you perform when you want to",
    "start": "656279",
    "end": "663720"
  },
  {
    "text": "deploy the cluster API components into your existing management uh kubernetes",
    "start": "663720",
    "end": "671040"
  },
  {
    "text": "cluster that you are going to be using um for you know hosting the cluster API",
    "start": "671040",
    "end": "678360"
  },
  {
    "text": "resources so cluster CTL inits will take so those three option b for bootstrap provider I",
    "start": "678360",
    "end": "685800"
  },
  {
    "text": "for infrastructure or C4 for control plane you can omit B and C and then the",
    "start": "685800",
    "end": "692399"
  },
  {
    "text": "system will assume that you want to use kubadm as the bootstrap and the control",
    "start": "692399",
    "end": "698040"
  },
  {
    "text": "plane providers which is quite common and then the remaining only required",
    "start": "698040",
    "end": "704160"
  },
  {
    "text": "parameter is the dash I for the infrastructure provider and in our case",
    "start": "704160",
    "end": "710040"
  },
  {
    "text": "it's going to be gcp so now let's take a look at the",
    "start": "710040",
    "end": "716579"
  },
  {
    "text": "different controllers involved with a cluster API and the different resources",
    "start": "716579",
    "end": "722339"
  },
  {
    "text": "they are responsible for so we can map out the different components here to what we've just seen",
    "start": "722339",
    "end": "728700"
  },
  {
    "text": "in the middle here we have the controller manager for the infrastructure provider so the cap G",
    "start": "728700",
    "end": "735060"
  },
  {
    "text": "controller manager on um the top right this is the",
    "start": "735060",
    "end": "742019"
  },
  {
    "text": "bootstrap provider corresponding controller manager and on the bottom right this is the",
    "start": "742019",
    "end": "748860"
  },
  {
    "text": "control plane provider corresponding controller and then on the far left this is the",
    "start": "748860",
    "end": "757500"
  },
  {
    "text": "main controller for cluster API responsible for the most generic object",
    "start": "757500",
    "end": "764399"
  },
  {
    "text": "so this one is responsible for the cluster then for the machine deployment",
    "start": "764399",
    "end": "772500"
  },
  {
    "text": "so the cluster is as said earlier the interface for a more specific",
    "start": "772500",
    "end": "777540"
  },
  {
    "text": "implementation of the cluster within the cloud provider",
    "start": "777540",
    "end": "782639"
  },
  {
    "text": "you want to Target so this is why it's making references to the infrastructure",
    "start": "782639",
    "end": "788160"
  },
  {
    "text": "provider the cluster in inside the infrastructure provider which is the gcp",
    "start": "788160",
    "end": "794880"
  },
  {
    "text": "cluster so there's if the infrastructure provider is gcp there's a one-to-one mapping between the generic cluster and",
    "start": "794880",
    "end": "802980"
  },
  {
    "text": "the more specific gcp cluster um but of course the cluster is also",
    "start": "802980",
    "end": "809519"
  },
  {
    "text": "composed of the the control plane of course so then",
    "start": "809519",
    "end": "816180"
  },
  {
    "text": "this is why you have a reference to the control plane Provider from within the",
    "start": "816180",
    "end": "823200"
  },
  {
    "text": "cluster right so we have a reference to a gcp cluster and we have a reference to",
    "start": "823200",
    "end": "829980"
  },
  {
    "text": "um the controller manager responsible for deploying the control plane now for",
    "start": "829980",
    "end": "835860"
  },
  {
    "text": "the worker nodes this is where you have the machine deployment that is defined",
    "start": "835860",
    "end": "841500"
  },
  {
    "text": "um here on the left and it's similar to a",
    "start": "841500",
    "end": "846600"
  },
  {
    "text": "deployment in kubernetes in the way it behaves so in kubernetes a deployment",
    "start": "846600",
    "end": "852680"
  },
  {
    "text": "resource is responsible for controlling how different pods are are deployed",
    "start": "852680",
    "end": "861180"
  },
  {
    "text": "within the cluster so responsible for managing the number of replicas how they",
    "start": "861180",
    "end": "867420"
  },
  {
    "text": "are started and making sure you always have the right number of desired pods",
    "start": "867420",
    "end": "872579"
  },
  {
    "text": "running here same principle but for your worker nodes the machine deployment is",
    "start": "872579",
    "end": "878519"
  },
  {
    "text": "going to manage in machine sets and the Machine sets is going to be composed of",
    "start": "878519",
    "end": "883560"
  },
  {
    "text": "one or several machines and again this is quite generic machine",
    "start": "883560",
    "end": "888720"
  },
  {
    "text": "and this machine will have a one-to-one mapping with a gcp machine so one-to-one mapping",
    "start": "888720",
    "end": "895680"
  },
  {
    "text": "with the gcp machine and the gcp Machine will encapsulate the specific information related to your",
    "start": "895680",
    "end": "902639"
  },
  {
    "text": "infrastructure provider so related to to gcp in our case",
    "start": "902639",
    "end": "908220"
  },
  {
    "text": "and then the machine deployment itself which is acting as you know making",
    "start": "908220",
    "end": "913320"
  },
  {
    "text": "reference to a template we'll also have a reference to a gcp machine template",
    "start": "913320",
    "end": "918480"
  },
  {
    "text": "the same way a deployment makes reference to a pod template",
    "start": "918480",
    "end": "924899"
  },
  {
    "text": "and in addition to that um we've seen before that the bootstrap",
    "start": "924899",
    "end": "930540"
  },
  {
    "text": "provider was responsible for turning the machine into a worker node so the",
    "start": "930540",
    "end": "937139"
  },
  {
    "text": "machine deployment makes also a reference to that particular object managed by the kuber DM bootstrap",
    "start": "937139",
    "end": "944820"
  },
  {
    "text": "controller also I didn't represent all relations here on the picture like for example the",
    "start": "944820",
    "end": "953040"
  },
  {
    "text": "control plane also has a relation to uh of course a gcp machine template because",
    "start": "953040",
    "end": "958560"
  },
  {
    "text": "it needs to get the machine from much information from somewhere",
    "start": "958560",
    "end": "963720"
  },
  {
    "text": "so yeah I didn't represent all the relations because otherwise",
    "start": "963720",
    "end": "968760"
  },
  {
    "text": "um or all the objects because it will be just too much it's just like the main ones um I know it may be a bit abstract at",
    "start": "968760",
    "end": "975839"
  },
  {
    "text": "the moment but uh what I can propose is to go through um our first demo where uh we'll deploy",
    "start": "975839",
    "end": "982760"
  },
  {
    "text": "a workload cluster from cluster API the only thing is that I've already",
    "start": "982760",
    "end": "988860"
  },
  {
    "text": "installed cluster API within the management cluster meaning that I've run the",
    "start": "988860",
    "end": "995160"
  },
  {
    "text": "command cluster CTL but what we can do already is just to check that I have",
    "start": "995160",
    "end": "1001160"
  },
  {
    "text": "nothing in my gcp environment again and then we're going to start from there",
    "start": "1001160",
    "end": "1008180"
  },
  {
    "text": "so let's take a look at the management cluster",
    "start": "1008180",
    "end": "1013339"
  },
  {
    "text": "right now um so I'm using canines which is very",
    "start": "1013339",
    "end": "1018440"
  },
  {
    "text": "useful to get you know quick access at whatever information you want on the",
    "start": "1018440",
    "end": "1023480"
  },
  {
    "text": "cluster so here I can see that you know cluster CTL init has deployed the main",
    "start": "1023480",
    "end": "1030798"
  },
  {
    "text": "components of the crds which we're going to see in a minute and then also all the controller manager so kpg controller",
    "start": "1030799",
    "end": "1038900"
  },
  {
    "text": "manager which is the infrastructure provider controller then we have the",
    "start": "1038900",
    "end": "1045140"
  },
  {
    "text": "bootstrap controller manager so the bootstrap provider controller we have the control",
    "start": "1045140",
    "end": "1051380"
  },
  {
    "text": "plane controller control provider controller and we have",
    "start": "1051380",
    "end": "1056780"
  },
  {
    "text": "the generic I mean Main cluster API controller there in terms of clds",
    "start": "1056780",
    "end": "1063799"
  },
  {
    "text": "anything ending with cluster dot x dash case.io has been has been installed by",
    "start": "1063799",
    "end": "1071840"
  },
  {
    "text": "cluster API so we can have see here cluster I don't have any cluster deployed all right and",
    "start": "1071840",
    "end": "1078799"
  },
  {
    "text": "so with the one-to-one mapping to gcp Cluster don't have anything there yet",
    "start": "1078799",
    "end": "1085340"
  },
  {
    "text": "um so let's create um the cluster so the commander you want",
    "start": "1085340",
    "end": "1092360"
  },
  {
    "text": "to do is cluster CTL generate um",
    "start": "1092360",
    "end": "1097580"
  },
  {
    "text": "and then you specify the name of the cluster so that will be Cappy Nick here",
    "start": "1097580",
    "end": "1103580"
  },
  {
    "text": "the kubernetes version number of control plane nodes and number of",
    "start": "1103580",
    "end": "1110200"
  },
  {
    "text": "worker nodes as well and this is going to generate the manifests that you can",
    "start": "1110200",
    "end": "1115460"
  },
  {
    "text": "redirect into a file and then we're just going to take a look into that file once it's been generated",
    "start": "1115460",
    "end": "1124660"
  },
  {
    "text": "okay let's take a look so we have a bunch of information there it",
    "start": "1125600",
    "end": "1133760"
  },
  {
    "text": "starts we with the cluster so generate the formation like the cluster Network block",
    "start": "1133760",
    "end": "1140059"
  },
  {
    "text": "The Cider block here um making reference to the control plane",
    "start": "1140059",
    "end": "1147140"
  },
  {
    "text": "making a reference to the infrastructure provider as I was mentioning before",
    "start": "1147140",
    "end": "1152440"
  },
  {
    "text": "one-to-one mapping with the gcp cluster a bit more specific information like the",
    "start": "1152440",
    "end": "1159020"
  },
  {
    "text": "gcp network here as well as the project ID",
    "start": "1159020",
    "end": "1164720"
  },
  {
    "text": "the region where we want to deploy cluster the workload cluster",
    "start": "1164720",
    "end": "1170179"
  },
  {
    "text": "now in terms of the control plane bunch of information like the Kube ADM configuration spec",
    "start": "1170179",
    "end": "1177740"
  },
  {
    "text": "um the machine templates as I was mentioning also used by the control",
    "start": "1177740",
    "end": "1183020"
  },
  {
    "text": "plane to generate I mean to deploy the nodes",
    "start": "1183020",
    "end": "1190039"
  },
  {
    "text": "here the gcp machine templates referenced by the control plane and the",
    "start": "1190039",
    "end": "1196760"
  },
  {
    "text": "Machine deployment um using that particular image we're going",
    "start": "1196760",
    "end": "1201980"
  },
  {
    "text": "to see you know what all the restriction on images and um you know what consideration you",
    "start": "1201980",
    "end": "1207860"
  },
  {
    "text": "need to have for them the instance type then we have the machine deployment for the worker",
    "start": "1207860",
    "end": "1213919"
  },
  {
    "text": "nodes the bootstrap saying that you know how you're going to join the cluster",
    "start": "1213919",
    "end": "1220280"
  },
  {
    "text": "template um",
    "start": "1220280",
    "end": "1225740"
  },
  {
    "text": "and then yeah that's basically all the information that we",
    "start": "1225740",
    "end": "1231080"
  },
  {
    "text": "need to deploy our cluster so now the only thing only",
    "start": "1231080",
    "end": "1237140"
  },
  {
    "text": "thing that we need to do is to apply this manifest into our cluster and see",
    "start": "1237140",
    "end": "1243799"
  },
  {
    "text": "what's happening so we have one two three four five six seven",
    "start": "1243799",
    "end": "1249919"
  },
  {
    "text": "custom resource created so we can already take a look here the cluster",
    "start": "1249919",
    "end": "1256400"
  },
  {
    "text": "we should see something here it's provisioning already",
    "start": "1256400",
    "end": "1261880"
  },
  {
    "text": "gcp cluster of course same thing gcp machines we should see something",
    "start": "1261880",
    "end": "1270160"
  },
  {
    "text": "eventually the first the control plane to the worker nodes is not not going to",
    "start": "1270160",
    "end": "1275480"
  },
  {
    "text": "be deployed until the control plane um is um is deployed",
    "start": "1275480",
    "end": "1281000"
  },
  {
    "text": "machine template we should see the two one for the control plane one for the worker nodes",
    "start": "1281000",
    "end": "1289159"
  },
  {
    "text": "we also have the comedian config therefore the bootstrap this is for the",
    "start": "1289159",
    "end": "1298100"
  },
  {
    "text": "workers then we have the kobilion control plane for the control plane nodes desired yes",
    "start": "1298100",
    "end": "1304220"
  },
  {
    "text": "not with not available yet as you can see",
    "start": "1304220",
    "end": "1309400"
  },
  {
    "text": "the machines yeah this is pending at the moment",
    "start": "1309919",
    "end": "1315740"
  },
  {
    "text": "because remember machines this is for the worker worker is going to be provisioned once the um",
    "start": "1315740",
    "end": "1321980"
  },
  {
    "text": "control plane has been provisioned we can take a look at some of the logs there while",
    "start": "1321980",
    "end": "1329600"
  },
  {
    "text": "it's deploying so um the main cluster API controller is",
    "start": "1329600",
    "end": "1335360"
  },
  {
    "text": "basically waiting for the infrastructure provider here you",
    "start": "1335360",
    "end": "1340760"
  },
  {
    "text": "can see infrastructure provider to um to provision",
    "start": "1340760",
    "end": "1348559"
  },
  {
    "text": "all the different component in gcp and this is the infrastructure provider",
    "start": "1348559",
    "end": "1354919"
  },
  {
    "text": "corresponding controller so it's currently reconciling",
    "start": "1354919",
    "end": "1360020"
  },
  {
    "text": "this is expected so reconciling instance so it must be",
    "start": "1360020",
    "end": "1365480"
  },
  {
    "text": "already there in in gcp we're going to see in a moment the bootstrap",
    "start": "1365480",
    "end": "1371780"
  },
  {
    "text": "this is still waiting right for the machine the um",
    "start": "1371780",
    "end": "1377720"
  },
  {
    "text": "the worker and the control plane should be doing something here still",
    "start": "1377720",
    "end": "1382820"
  },
  {
    "text": "reconciling so it's not finished yet just take a look quickly",
    "start": "1382820",
    "end": "1388720"
  },
  {
    "text": "at what's happening in gcp and then we'll continue",
    "start": "1388720",
    "end": "1393770"
  },
  {
    "text": "[Music] um we move forward and take a look later when we start the the second demo",
    "start": "1393770",
    "end": "1402679"
  },
  {
    "text": "so here you can already see that the control plane has been provisioned and",
    "start": "1402679",
    "end": "1408020"
  },
  {
    "text": "then in a moment we'll have the worker as well but uh yeah for the moment",
    "start": "1408020",
    "end": "1414200"
  },
  {
    "text": "let's go back to our slide",
    "start": "1414200",
    "end": "1418779"
  },
  {
    "text": "and move forward so the question you have to ask yourself now is cluster API",
    "start": "1420400",
    "end": "1428780"
  },
  {
    "text": "enough to deploy your cluster",
    "start": "1428780",
    "end": "1433480"
  },
  {
    "text": "um not really as such right because okay the cluster",
    "start": "1433820",
    "end": "1439340"
  },
  {
    "text": "although not fully deployed yet once it's deployed it won't be",
    "start": "1439340",
    "end": "1445159"
  },
  {
    "text": "necessarily working because first we didn't install any cni right so it's not part of",
    "start": "1445159",
    "end": "1452240"
  },
  {
    "text": "the cluster API process to install the cni and this has to be",
    "start": "1452240",
    "end": "1457880"
  },
  {
    "text": "managed after the cluster has been provisioned so it means that it's provisioning nodes which are not ready",
    "start": "1457880",
    "end": "1467720"
  },
  {
    "text": "also how do you plan for the underlying operating system used by cluster API",
    "start": "1467720",
    "end": "1474919"
  },
  {
    "text": "well there's a tool called image Builder um that's cluster that's also part of",
    "start": "1474919",
    "end": "1481940"
  },
  {
    "text": "the cluster API documentation um that is a mix of hashico Packer with",
    "start": "1481940",
    "end": "1488900"
  },
  {
    "text": "ansible to generate kubernetes ready images so what that",
    "start": "1488900",
    "end": "1495740"
  },
  {
    "text": "means kubernetes is ready it means that for the particular version of kubernetes you want to install so I'm speaking here",
    "start": "1495740",
    "end": "1502940"
  },
  {
    "text": "for example if you want you know traditional instances so non-managed kubernetes so let's say like",
    "start": "1502940",
    "end": "1510260"
  },
  {
    "text": "in in gcp like we did um the underlying operating system image",
    "start": "1510260",
    "end": "1516320"
  },
  {
    "text": "need to embed uh you know kublet um and um you know with the right",
    "start": "1516320",
    "end": "1523640"
  },
  {
    "text": "version and all the the kubernetes binaries needs to be present there with",
    "start": "1523640",
    "end": "1530659"
  },
  {
    "text": "the right version so you need to build the image before that and same thing when you are upgrading",
    "start": "1530659",
    "end": "1537080"
  },
  {
    "text": "of course you know you can declaratively upgrade your cluster by changing the",
    "start": "1537080",
    "end": "1542600"
  },
  {
    "text": "version numbers but first you have to make sure that the image you are using",
    "start": "1542600",
    "end": "1548360"
  },
  {
    "text": "will have the right numbers the right versions as well so this is something you have to manage",
    "start": "1548360",
    "end": "1554779"
  },
  {
    "text": "yourself um which leads to another questions how",
    "start": "1554779",
    "end": "1560539"
  },
  {
    "text": "do you add additional software or infrastructure components like the CSI maybe you want",
    "start": "1560539",
    "end": "1568820"
  },
  {
    "text": "some Ingress or you know any other components and any other software layer",
    "start": "1568820",
    "end": "1576799"
  },
  {
    "text": "this is where you know github's principle may may kick in but we'll see",
    "start": "1576799",
    "end": "1583400"
  },
  {
    "text": "what are the different options in in a moment um and how to provide Auto scaling for",
    "start": "1583400",
    "end": "1592400"
  },
  {
    "text": "the number of nodes it's not part of you know the base components we're just in",
    "start": "1592400",
    "end": "1598640"
  },
  {
    "text": "now this is something you have to to do extra to plane for extra",
    "start": "1598640",
    "end": "1604159"
  },
  {
    "text": "um and then the last one is okay now if you want to deliver all that all this",
    "start": "1604159",
    "end": "1609440"
  },
  {
    "text": "automation by also using github's principle so you know delivering all the",
    "start": "1609440",
    "end": "1616340"
  },
  {
    "text": "cluster API manifests into a git repository and githubs to kick in what",
    "start": "1616340",
    "end": "1622940"
  },
  {
    "text": "are you know what is the work that remains to do that right so this is what we are going to",
    "start": "1622940",
    "end": "1629720"
  },
  {
    "text": "see now so our um more let's say detailed use case",
    "start": "1629720",
    "end": "1637279"
  },
  {
    "text": "uh comprises all those um components so first to solve the",
    "start": "1637279",
    "end": "1645279"
  },
  {
    "text": "additional software layer issue there's",
    "start": "1645279",
    "end": "1650840"
  },
  {
    "text": "a another project called cluster API add-on provider helm or CAA pH",
    "start": "1650840",
    "end": "1658760"
  },
  {
    "text": "I'm not sure how to pronounce that so I will just use the individual later letter",
    "start": "1658760",
    "end": "1664600"
  },
  {
    "text": "which is aim at creating hand proxy",
    "start": "1664600",
    "end": "1669740"
  },
  {
    "text": "within your management cluster so that you can install",
    "start": "1669740",
    "end": "1674620"
  },
  {
    "text": "within your workload cluster some hand shots",
    "start": "1675039",
    "end": "1680179"
  },
  {
    "text": "so you are applying the different manifest to create the",
    "start": "1680179",
    "end": "1685279"
  },
  {
    "text": "crds so also using crds so the helm proxies and there's also another crd",
    "start": "1685279",
    "end": "1691279"
  },
  {
    "text": "we're going to see so there are two crds are going to be so the custom resource",
    "start": "1691279",
    "end": "1696500"
  },
  {
    "text": "you apply them into your management cluster and then from there you can Define in what workload cluster those",
    "start": "1696500",
    "end": "1704840"
  },
  {
    "text": "hems charts need to be um this needs to be installed so that's",
    "start": "1704840",
    "end": "1710179"
  },
  {
    "text": "an efficient way to um to deploy software inside your workload cluster",
    "start": "1710179",
    "end": "1717279"
  },
  {
    "text": "directly from your management cluster as an additional step",
    "start": "1717279",
    "end": "1723380"
  },
  {
    "text": "then there's also the cluster Auto scaler project so that's the same sort of",
    "start": "1723380",
    "end": "1728720"
  },
  {
    "text": "um you know principle where you deploy the autoscaler component you can",
    "start": "1728720",
    "end": "1734480"
  },
  {
    "text": "actually deploy them in the workload cluster or in the management cluster in our use case we're going to deploy them",
    "start": "1734480",
    "end": "1741159"
  },
  {
    "text": "into the um the management cluster I say them because for every workload cluster",
    "start": "1741159",
    "end": "1748299"
  },
  {
    "text": "you want to um to create you need a dedicated instance of the cluster Auto",
    "start": "1748299",
    "end": "1755179"
  },
  {
    "text": "scaler you know components of the pod needs to run for every workload cluster",
    "start": "1755179",
    "end": "1762500"
  },
  {
    "text": "then of course we're going to be using August to deploy the workload clusters and I'll",
    "start": "1762500",
    "end": "1770120"
  },
  {
    "text": "go CD will be responsible for um you know also managing I mean not",
    "start": "1770120",
    "end": "1776120"
  },
  {
    "text": "only managing the creation of the worker cluster but the provisioning of the",
    "start": "1776120",
    "end": "1782360"
  },
  {
    "text": "add-ons using the cluster API addon provider helm and also responsible",
    "start": "1782360",
    "end": "1790220"
  },
  {
    "text": "um for adding information to the auto scale autoscaler pod because",
    "start": "1790220",
    "end": "1797360"
  },
  {
    "text": "the in the architecture we are deploying today right Auto scaler is installed",
    "start": "1797360",
    "end": "1803539"
  },
  {
    "text": "within the management cluster so the autoscaler Pod need to get access",
    "start": "1803539",
    "end": "1810380"
  },
  {
    "text": "to the workload cluster to be able to monitor the resource so",
    "start": "1810380",
    "end": "1816320"
  },
  {
    "text": "how Auto scaler is working it's basically monitoring pods that are",
    "start": "1816320",
    "end": "1823460"
  },
  {
    "text": "in pending State because of resources that are not available from the node if",
    "start": "1823460",
    "end": "1829279"
  },
  {
    "text": "that happens then it's going to provision new nodes after 10 minutes for",
    "start": "1829279",
    "end": "1835460"
  },
  {
    "text": "example if you remove all those pods if those nodes are not you know required",
    "start": "1835460",
    "end": "1842899"
  },
  {
    "text": "anymore because you know you have enough resources in your in your cluster than the",
    "start": "1842899",
    "end": "1850580"
  },
  {
    "text": "the worker nodes are going to be destroyed and to do that",
    "start": "1850580",
    "end": "1855740"
  },
  {
    "text": "um also the the cluster Auto scalar pod need access to the group config of your workload cluster right so it needs to be",
    "start": "1855740",
    "end": "1863600"
  },
  {
    "text": "implemented in a sequential fashion first you need to deploy your workload cluster by using August CD in our case",
    "start": "1863600",
    "end": "1871340"
  },
  {
    "text": "and secondly once it's been deployed you can get the config and then inject the",
    "start": "1871340",
    "end": "1879860"
  },
  {
    "text": "config into your autoscaler pod if you want to manage this with Argo CD",
    "start": "1879860",
    "end": "1886399"
  },
  {
    "text": "that leads to another sort of issue right because um githubs means that you're going to",
    "start": "1886399",
    "end": "1892580"
  },
  {
    "text": "check in you know to to push information into Git You don't want to push a clear",
    "start": "1892580",
    "end": "1900080"
  },
  {
    "text": "text config file into git so we're going to be using Subs so secure operation from",
    "start": "1900080",
    "end": "1908179"
  },
  {
    "text": "Mozilla um to encrypt the group config file and",
    "start": "1908179",
    "end": "1914679"
  },
  {
    "text": "customize which is you know like Helm a way to manage packages not packages but",
    "start": "1914679",
    "end": "1921860"
  },
  {
    "text": "a way to manage how you deploy application in kubernetes so Helm is",
    "start": "1921860",
    "end": "1927140"
  },
  {
    "text": "doing packaging customize is more like a configuration management tool",
    "start": "1927140",
    "end": "1933260"
  },
  {
    "text": "um so customize supports Subs decryption via caseops and that will allows us",
    "start": "1933260",
    "end": "1941059"
  },
  {
    "text": "allow us to decrypt the group config in our gocd but for this we need to",
    "start": "1941059",
    "end": "1947120"
  },
  {
    "text": "implement a couple of things so first",
    "start": "1947120",
    "end": "1952640"
  },
  {
    "text": "we're going to be using the app of apps pattern in August CD that just means",
    "start": "1952640",
    "end": "1958880"
  },
  {
    "text": "that we're going to create an ago CD application and the only",
    "start": "1958880",
    "end": "1966559"
  },
  {
    "text": "job of that application the only function is to host other application",
    "start": "1966559",
    "end": "1975159"
  },
  {
    "text": "definitions so um that particular pattern is useful",
    "start": "1975159",
    "end": "1980720"
  },
  {
    "text": "to automatically add children application because here so you",
    "start": "1980720",
    "end": "1989480"
  },
  {
    "text": "have a representation here on the left right so we you have the parent application which is Cappy clusters",
    "start": "1989480",
    "end": "1996620"
  },
  {
    "text": "right because you can then manage all your cluster as a pack of application",
    "start": "1996620",
    "end": "2003580"
  },
  {
    "text": "right so here for our development environment that we are going to provision we will need to do two things deploy the",
    "start": "2003580",
    "end": "2011200"
  },
  {
    "text": "cluster right and then get of course the config file and then in the second",
    "start": "2011200",
    "end": "2017380"
  },
  {
    "text": "um part inject the coupe config into Auto scaler",
    "start": "2017380",
    "end": "2022720"
  },
  {
    "text": "and deploy the autoscaler pods into the management cluster so",
    "start": "2022720",
    "end": "2028600"
  },
  {
    "text": "um just to combine them into a single let's say application pack you can use",
    "start": "2028600",
    "end": "2034059"
  },
  {
    "text": "the application of applique of apps the app of apps pattern and also",
    "start": "2034059",
    "end": "2040539"
  },
  {
    "text": "um so as I said the benefit is that now those applications those August CD",
    "start": "2040539",
    "end": "2046960"
  },
  {
    "text": "application contain the definition right of the children application which means that as soon as you synchronize the",
    "start": "2046960",
    "end": "2053980"
  },
  {
    "text": "parents so the copy cluster application automatically here on the right you can",
    "start": "2053980",
    "end": "2059980"
  },
  {
    "text": "see the children application are going to be created automatically",
    "start": "2059980",
    "end": "2065378"
  },
  {
    "text": "um within your agrocity environment right so it makes it makes the management a lot a lot easier",
    "start": "2065379",
    "end": "2073060"
  },
  {
    "text": "I'll go CD supports both Helm and customize to deploy manifests into the",
    "start": "2073060",
    "end": "2078398"
  },
  {
    "text": "destination kubernetes cluster so we're going to be using Helm to customize the",
    "start": "2078399",
    "end": "2084220"
  },
  {
    "text": "cluster API resources and install um you know our workload cluster",
    "start": "2084220",
    "end": "2090700"
  },
  {
    "text": "resources in our cluster API management cluster and then we're going to be using",
    "start": "2090700",
    "end": "2097180"
  },
  {
    "text": "customize mainly because of the subs capabilities and because customize can",
    "start": "2097180",
    "end": "2102940"
  },
  {
    "text": "easily configure a specific portion of resource manifest and customize them so that",
    "start": "2102940",
    "end": "2109300"
  },
  {
    "text": "means that I'll go CD will need to be patched to support caseops and also",
    "start": "2109300",
    "end": "2115900"
  },
  {
    "text": "modified to import our encryption key by default I'll go CD the customized version of",
    "start": "2115900",
    "end": "2124300"
  },
  {
    "text": "August CD the customers the customized binary of August CD doesn't have the right options to to use caseops so",
    "start": "2124300",
    "end": "2132220"
  },
  {
    "text": "that's one thing we need to fix and also of course the key that is used to",
    "start": "2132220",
    "end": "2137700"
  },
  {
    "text": "decrypt the coupe config file will need",
    "start": "2137700",
    "end": "2142839"
  },
  {
    "text": "to be present into August CD so for that we're going to be modifying the Argo CD",
    "start": "2142839",
    "end": "2149020"
  },
  {
    "text": "image and some of the configuration you know the config map used to to configure",
    "start": "2149020",
    "end": "2155800"
  },
  {
    "text": "algo CD installation within our management cluster so yeah that's a lot to do but let's do",
    "start": "2155800",
    "end": "2163599"
  },
  {
    "text": "it now copy with get ups but first let's check that the cluster we built",
    "start": "2163599",
    "end": "2169240"
  },
  {
    "text": "in our previous demo is up and running so what we can do there is qctl get",
    "start": "2169240",
    "end": "2176920"
  },
  {
    "text": "clusters we can see it's been provisioned if we take a look at",
    "start": "2176920",
    "end": "2183339"
  },
  {
    "text": "some of the custom resources let's check the gcp cluster okay so you can see that it is ready",
    "start": "2183339",
    "end": "2191260"
  },
  {
    "text": "and last thing let's take a look at the gcp machines here",
    "start": "2191260",
    "end": "2197440"
  },
  {
    "text": "it's running and now let's just double check",
    "start": "2197440",
    "end": "2202839"
  },
  {
    "text": "in the Google console that the cluster is effectively",
    "start": "2202839",
    "end": "2209079"
  },
  {
    "text": "available there you go so I need to refresh that page",
    "start": "2209079",
    "end": "2215160"
  },
  {
    "text": "refresh and we should see the two machine they are appearing so we have",
    "start": "2215160",
    "end": "2220960"
  },
  {
    "text": "the two machine one in U.S Central 1C and the other one in U.S Central",
    "start": "2220960",
    "end": "2229800"
  },
  {
    "text": "1A okay so um I think we can say that it worked",
    "start": "2229800",
    "end": "2235480"
  },
  {
    "text": "perfectly now let's move on to the next demo so the first thing I'm gonna do is um",
    "start": "2235480",
    "end": "2242680"
  },
  {
    "text": "show you the structure of the repository we're going to be using for",
    "start": "2242680",
    "end": "2249520"
  },
  {
    "text": "um I'll go CD first we have our",
    "start": "2249520",
    "end": "2255400"
  },
  {
    "text": "parent application definition that is created in augustd that will comprise",
    "start": "2255400",
    "end": "2261099"
  },
  {
    "text": "those two children application so the principal remember the principle",
    "start": "2261099",
    "end": "2266440"
  },
  {
    "text": "of the app of apps pattern is to declare the children application into your",
    "start": "2266440",
    "end": "2273660"
  },
  {
    "text": "githubs Repository so we're going to have one application",
    "start": "2273660",
    "end": "2279700"
  },
  {
    "text": "for the cluster autoscaler what is noticeable here really is the path that",
    "start": "2279700",
    "end": "2287320"
  },
  {
    "text": "we are going to be using without Within um the git repository which is the same",
    "start": "2287320",
    "end": "2293859"
  },
  {
    "text": "one here right so it's going to be overlays Dev so in the customize part",
    "start": "2293859",
    "end": "2300300"
  },
  {
    "text": "overlays Dev so those manifests are going to be deployed in reconcile into",
    "start": "2300300",
    "end": "2307180"
  },
  {
    "text": "the cluster that's for the cluster Auto scalar and",
    "start": "2307180",
    "end": "2312460"
  },
  {
    "text": "the dev cluster here this is the configuration for cluster API itself so again we have",
    "start": "2312460",
    "end": "2320200"
  },
  {
    "text": "the repo URL here and we're going to be using the pass",
    "start": "2320200",
    "end": "2326200"
  },
  {
    "text": "Helm capy gcp which is this one so it it does have a standard you know Helm",
    "start": "2326200",
    "end": "2332140"
  },
  {
    "text": "structure with the Manifest templates and the values dot the channel that",
    "start": "2332140",
    "end": "2338740"
  },
  {
    "text": "we're going to see in a minute if we look at Argo CD right now",
    "start": "2338740",
    "end": "2346300"
  },
  {
    "text": "let's just log in",
    "start": "2346300",
    "end": "2349560"
  },
  {
    "text": "you can see that I have my application copy cluster this is the parent",
    "start": "2355540",
    "end": "2361240"
  },
  {
    "text": "application if I look at the configuration",
    "start": "2361240",
    "end": "2367300"
  },
  {
    "text": "you can see the report URL this is our main repo source and then the path is",
    "start": "2367300",
    "end": "2375280"
  },
  {
    "text": "the apps section I just show you so it's currently out of think",
    "start": "2375280",
    "end": "2380859"
  },
  {
    "text": "and you can see that this application so the copy cluster parent app has two",
    "start": "2380859",
    "end": "2387700"
  },
  {
    "text": "children so the dev cluster and the dev cluster Auto scaler so now let's go back",
    "start": "2387700",
    "end": "2393760"
  },
  {
    "text": "to the Repository here",
    "start": "2393760",
    "end": "2399880"
  },
  {
    "text": "let's take a look first at the helm section so we have the cluster API template",
    "start": "2399880",
    "end": "2406540"
  },
  {
    "text": "we're going to start with cluster.yaml which is remember you know the top object",
    "start": "2406540",
    "end": "2412119"
  },
  {
    "text": "um we are going to to use the same you know traditional configuration that can",
    "start": "2412119",
    "end": "2418000"
  },
  {
    "text": "be generated by cluster CTL and we're just gonna make a bit more you know",
    "start": "2418000",
    "end": "2423540"
  },
  {
    "text": "templatization around it so the name we're gonna put this into the cluster",
    "start": "2423540",
    "end": "2428680"
  },
  {
    "text": "name in the helm values file and then we're gonna also add the cluster you",
    "start": "2428680",
    "end": "2436000"
  },
  {
    "text": "know the software add-ons we want to install on on the cluster and specify",
    "start": "2436000",
    "end": "2441099"
  },
  {
    "text": "this into the value add-ons section of the value file then for the gcp cluster again",
    "start": "2441099",
    "end": "2448420"
  },
  {
    "text": "we're going to determine you know we're going to Define sorry the cluster name which is exactly the same as you know",
    "start": "2448420",
    "end": "2456280"
  },
  {
    "text": "the the top level cluster name then the project more specifically the gcp region",
    "start": "2456280",
    "end": "2463839"
  },
  {
    "text": "then here in the matching machine template control plane",
    "start": "2463839",
    "end": "2469000"
  },
  {
    "text": "um we're gonna be using the you know a particular instance type",
    "start": "2469000",
    "end": "2474960"
  },
  {
    "text": "for our control plane and also the gcp image we want to um to use is going to",
    "start": "2474960",
    "end": "2482200"
  },
  {
    "text": "be specified there same thing for the worker right and then",
    "start": "2482200",
    "end": "2487900"
  },
  {
    "text": "for the kuberdm control plane we're going to specify the number of",
    "start": "2487900",
    "end": "2494079"
  },
  {
    "text": "replicas so for our control plane the kubernetes version as well",
    "start": "2494079",
    "end": "2499420"
  },
  {
    "text": "and for the worker basically just is going to be the name",
    "start": "2499420",
    "end": "2505240"
  },
  {
    "text": "and the Machine deployment we're gonna have again cluster name and the different references in with the",
    "start": "2505240",
    "end": "2511960"
  },
  {
    "text": "kubernetes version and the number of worker replicas that we can also specify",
    "start": "2511960",
    "end": "2518619"
  },
  {
    "text": "and on top of that we are also going to configure some annotation that are used by cluster",
    "start": "2518619",
    "end": "2527260"
  },
  {
    "text": "Auto scaler namely here we want to set the maximum size of the cluster",
    "start": "2527260",
    "end": "2535900"
  },
  {
    "text": "and the minimum size of the cluster right so let's take a look at the values.chamel which is basically",
    "start": "2535900",
    "end": "2544300"
  },
  {
    "text": "containing all the um the values that we want to uh to Define",
    "start": "2544300",
    "end": "2550240"
  },
  {
    "text": "so the cluster name this is copy Dev we specify the gcp project region the",
    "start": "2550240",
    "end": "2557440"
  },
  {
    "text": "instance type for the control plane and when N1 standard two the same thing for the worker instance",
    "start": "2557440",
    "end": "2563800"
  },
  {
    "text": "type gcp image so we're going to start with a number of control plane replica to one",
    "start": "2563800",
    "end": "2570760"
  },
  {
    "text": "same thing for the worker Max we're gonna set it to 10 and we've",
    "start": "2570760",
    "end": "2577540"
  },
  {
    "text": "set the minimum to to one actually right and in terms of the add-ons we're going",
    "start": "2577540",
    "end": "2584079"
  },
  {
    "text": "to install nginx um and then we're also going to install",
    "start": "2584079",
    "end": "2590740"
  },
  {
    "text": "um Calico but Calico doesn't have to have the add-on enabled in terms of The",
    "start": "2590740",
    "end": "2598000"
  },
  {
    "text": "annotation um because I didn't specify any label selector if you don't specify any selector then",
    "start": "2598000",
    "end": "2606280"
  },
  {
    "text": "it just assumes that the add-on will be installed in every single cluster you",
    "start": "2606280",
    "end": "2613000"
  },
  {
    "text": "dipole from the the management cluster now let's take a look at the",
    "start": "2613000",
    "end": "2620020"
  },
  {
    "text": "customize section so we have the the base directory where you have all the",
    "start": "2620020",
    "end": "2627460"
  },
  {
    "text": "manifests required to deploy cluster autoscaler so we have traditionally you",
    "start": "2627460",
    "end": "2633160"
  },
  {
    "text": "know clusterable binding for the management cluster for the workload cluster cluster role",
    "start": "2633160",
    "end": "2640240"
  },
  {
    "text": "the deployment required for cluster Auto scalar to be",
    "start": "2640240",
    "end": "2646060"
  },
  {
    "text": "installed and this is where you have the command um this is the part that is of interest",
    "start": "2646060",
    "end": "2653200"
  },
  {
    "text": "to us so this is where we want to specify the coupe config file for",
    "start": "2653200",
    "end": "2658780"
  },
  {
    "text": "autoscaler to monitor the workload cluster and this is also",
    "start": "2658780",
    "end": "2665460"
  },
  {
    "text": "defining the name of the cluster we want to monitor right so those two things are",
    "start": "2665460",
    "end": "2671980"
  },
  {
    "text": "the most important one the auto Discovery here as well as the group",
    "start": "2671980",
    "end": "2677740"
  },
  {
    "text": "config file um so for our customization here",
    "start": "2677740",
    "end": "2684240"
  },
  {
    "text": "we need to basically enable um activate sort of all these resources",
    "start": "2684240",
    "end": "2690280"
  },
  {
    "text": "for customize to use them in our overlay so",
    "start": "2690280",
    "end": "2696520"
  },
  {
    "text": "in our overlay we're gonna this is where we we are going to uh overwrite the the",
    "start": "2696520",
    "end": "2702460"
  },
  {
    "text": "configuration so first the deployments what we're going to change here is uh basically the the name we",
    "start": "2702460",
    "end": "2711040"
  },
  {
    "text": "want we want to give to the cluster if we compare it to uh the one above right",
    "start": "2711040",
    "end": "2716859"
  },
  {
    "text": "this is the original one the base one which is Kappy Nick in the deployment here this will be this will be copy Dev",
    "start": "2716859",
    "end": "2725260"
  },
  {
    "text": "um we have also if we look in the customization",
    "start": "2725260",
    "end": "2730540"
  },
  {
    "text": "um we're going to add a prefix Dev to all the resources that we are going to create and we have also a nem reference",
    "start": "2730540",
    "end": "2739240"
  },
  {
    "text": "file so we want to um change you know all the names that we are going to modify potentially have",
    "start": "2739240",
    "end": "2746440"
  },
  {
    "text": "some references in other field and this is where we're gonna tell customize to",
    "start": "2746440",
    "end": "2754660"
  },
  {
    "text": "um to accordingly modify the name in all those references and then we want to get a secret",
    "start": "2754660",
    "end": "2762640"
  },
  {
    "text": "generator this is because we want to decrypt the coupe config file and the",
    "start": "2762640",
    "end": "2769540"
  },
  {
    "text": "coupe config file we want to decrypt has this pass here so there is one from one",
    "start": "2769540",
    "end": "2775240"
  },
  {
    "text": "of my prior tests we're going to rewrite it because we're going to deploy a new a new cluster so this is uh one remaining",
    "start": "2775240",
    "end": "2781720"
  },
  {
    "text": "from my previous test and you can see that um you know it's it's effectively",
    "start": "2781720",
    "end": "2787780"
  },
  {
    "text": "encrypted there right I cannot make any um you know use of that file if I want",
    "start": "2787780",
    "end": "2794920"
  },
  {
    "text": "to connect to to the cluster everything is encrypted using subs and the the rule",
    "start": "2794920",
    "end": "2800319"
  },
  {
    "text": "of those Secrets generator.yaml is to to specify you know how to decrypt",
    "start": "2800319",
    "end": "2806560"
  },
  {
    "text": "um the config file using the case UPS plugin so what we want to do first is",
    "start": "2806560",
    "end": "2814240"
  },
  {
    "text": "take a look at the August CD pod configuration so let's go back to our terminal there",
    "start": "2814240",
    "end": "2823560"
  },
  {
    "text": "so you can see that I have inaugural CD namespace with many different you know plots",
    "start": "2823560",
    "end": "2829540"
  },
  {
    "text": "running so let's take a look first at the August CD server located there",
    "start": "2829540",
    "end": "2835119"
  },
  {
    "text": "uh you can see that if I look for image that's it is running an image from my personal",
    "start": "2835119",
    "end": "2843700"
  },
  {
    "text": "registry where I've added caseops to",
    "start": "2843700",
    "end": "2848859"
  },
  {
    "text": "August CD the caseops capability so that's one thing that we need then if we",
    "start": "2848859",
    "end": "2854740"
  },
  {
    "text": "take a look at the repo server and look just for pgp you can see that",
    "start": "2854740",
    "end": "2862740"
  },
  {
    "text": "I have created a minute container whose role is going",
    "start": "2862740",
    "end": "2868119"
  },
  {
    "text": "to be to import the pgp key that is mounted as a new volume into the",
    "start": "2868119",
    "end": "2877240"
  },
  {
    "text": "Container right so and then the container once you know it does its job then the you know the the payload let's",
    "start": "2877240",
    "end": "2884859"
  },
  {
    "text": "say container will take over and you know perform it's uh it's normal",
    "start": "2884859",
    "end": "2890560"
  },
  {
    "text": "it's normal role so the idea here is really for August CD",
    "start": "2890560",
    "end": "2895800"
  },
  {
    "text": "to get the private key so that's when it's going to be leveraging customize to",
    "start": "2895800",
    "end": "2902079"
  },
  {
    "text": "deploy the Manifest and reconcile the Manifest into the cluster it will be able to use the decrypted version of our",
    "start": "2902079",
    "end": "2910119"
  },
  {
    "text": "config file there's a last thing I want to show as",
    "start": "2910119",
    "end": "2916540"
  },
  {
    "text": "well in terms of audio CD configuration we have a config map there",
    "start": "2916540",
    "end": "2924220"
  },
  {
    "text": "where I have I added extra option so that case Ops",
    "start": "2924220",
    "end": "2931180"
  },
  {
    "text": "can be used because it's a plugin you need to add this extra customize option",
    "start": "2931180",
    "end": "2937560"
  },
  {
    "text": "when using customize to do to do anything right so when August CD will",
    "start": "2937560",
    "end": "2942880"
  },
  {
    "text": "collab customize it's going to add this specific option that will allow for the",
    "start": "2942880",
    "end": "2948819"
  },
  {
    "text": "usage of caseops now let's go back to August CD",
    "start": "2948819",
    "end": "2955780"
  },
  {
    "text": "and what we are going to do is reconcile",
    "start": "2955780",
    "end": "2960940"
  },
  {
    "text": "the application resync the parent application so that our children",
    "start": "2960940",
    "end": "2968440"
  },
  {
    "text": "application can be installed so if I look at you know the application status",
    "start": "2968440",
    "end": "2973660"
  },
  {
    "text": "there I've got my single parent application and that's basically it so let's sync it",
    "start": "2973660",
    "end": "2981760"
  },
  {
    "text": "and see what happened so now if you look in the copy cluster you can see that the",
    "start": "2981760",
    "end": "2987520"
  },
  {
    "text": "dev cluster and Dev cluster autoscaler children application have been synchronized and now of course",
    "start": "2987520",
    "end": "2994720"
  },
  {
    "text": "um I've got both my Dev cluster and Dev cluster Auto scaler that are out of sync",
    "start": "2994720",
    "end": "3000540"
  },
  {
    "text": "so in the order we want first to deploy the cluster then we'll have to do you know a couple",
    "start": "3000540",
    "end": "3006540"
  },
  {
    "text": "of manual actions to encrypt our config file and commit it push it into our",
    "start": "3006540",
    "end": "3012920"
  },
  {
    "text": "repository and then we'll proceed with",
    "start": "3012920",
    "end": "3018300"
  },
  {
    "text": "the cluster Auto scalar installation so first let's think the dev cluster so",
    "start": "3018300",
    "end": "3024480"
  },
  {
    "text": "you can see all the components those are all the cluster API manifests and the",
    "start": "3024480",
    "end": "3031160"
  },
  {
    "text": "objects that are required for um you know the workload cluster deployment as we've seen before so let's",
    "start": "3031160",
    "end": "3038460"
  },
  {
    "text": "first sync this and check what happened so it's going to basically deploy the",
    "start": "3038460",
    "end": "3044460"
  },
  {
    "text": "cluster right so you're gonna see it's going to start by creating the machine gcp machine",
    "start": "3044460",
    "end": "3050280"
  },
  {
    "text": "and reconcile this in gcp so we can take a look at what's is happening from the",
    "start": "3050280",
    "end": "3056280"
  },
  {
    "text": "gcp console and if we refresh we should see",
    "start": "3056280",
    "end": "3062400"
  },
  {
    "text": "now we have both the capitef control plane as well as the",
    "start": "3062400",
    "end": "3068579"
  },
  {
    "text": "worker node that has been installed so now we can take a look at all the",
    "start": "3068579",
    "end": "3074700"
  },
  {
    "text": "component deployed you can see here a complete picture of all the objects",
    "start": "3074700",
    "end": "3080400"
  },
  {
    "text": "deployed so from the machine deployment for the worker from the machine also the",
    "start": "3080400",
    "end": "3087660"
  },
  {
    "text": "control plane machine here all those components",
    "start": "3087660",
    "end": "3093540"
  },
  {
    "text": "so now let's go back to our top application View so our Dev cluster autoscaler of course",
    "start": "3093540",
    "end": "3101099"
  },
  {
    "text": "is still out of sync but before proceeding to the dev cluster autoscaler install",
    "start": "3101099",
    "end": "3107420"
  },
  {
    "text": "we need to encrypt the config file into a config map so let's do this now",
    "start": "3107420",
    "end": "3114839"
  },
  {
    "text": "for this let's go into our Visual Studio code environment open on",
    "start": "3114839",
    "end": "3122579"
  },
  {
    "text": "Terminal there so what I want to do first is so I'm connected to the right",
    "start": "3122579",
    "end": "3129260"
  },
  {
    "text": "here on the top right the right cluster so we can quickly CTL get cluster we can",
    "start": "3129260",
    "end": "3136260"
  },
  {
    "text": "see that our of course Cappy Dev cluster is provision so what we will do now is get the config",
    "start": "3136260",
    "end": "3143760"
  },
  {
    "text": "file from cluster CTL here we go now we need to create a config map out",
    "start": "3143760",
    "end": "3152040"
  },
  {
    "text": "of that group config file so copy Dev Dash",
    "start": "3152040",
    "end": "3157220"
  },
  {
    "text": "config.gml and then we can encrypt this on this sub stash e copy",
    "start": "3157220",
    "end": "3165420"
  },
  {
    "text": "Dev Dash group config.tml into",
    "start": "3165420",
    "end": "3170720"
  },
  {
    "text": "the expected file which is called config.enc.tml",
    "start": "3170720",
    "end": "3176760"
  },
  {
    "text": "here you go and now if we take a look at that particular file we're going to see",
    "start": "3177180",
    "end": "3183000"
  },
  {
    "text": "that it's completely obfuscating all the data from the config map is encrypted",
    "start": "3183000",
    "end": "3191819"
  },
  {
    "text": "and the last part now is to commit and push this into our Upstream repository",
    "start": "3191819",
    "end": "3198680"
  },
  {
    "text": "so create new cluster",
    "start": "3198680",
    "end": "3204020"
  },
  {
    "text": "you can push let's go back to now I'll go CD",
    "start": "3204020",
    "end": "3211980"
  },
  {
    "text": "and now we can sync that application so we can already see that uh the coupe",
    "start": "3211980",
    "end": "3220200"
  },
  {
    "text": "config config map has been decrypted with the right information",
    "start": "3220200",
    "end": "3227280"
  },
  {
    "text": "and now let's just think to install cluster Auto scaler",
    "start": "3227280",
    "end": "3233119"
  },
  {
    "text": "okay it's being deployed the Pod is being deployed so now we can check that it's a new pod has been deployed into",
    "start": "3233700",
    "end": "3240480"
  },
  {
    "text": "your our management cluster and then we can proceed with the auto scaling test and just check that all the application",
    "start": "3240480",
    "end": "3247800"
  },
  {
    "text": "the add-on application have been installed let's connect to our terminal",
    "start": "3247800",
    "end": "3253800"
  },
  {
    "text": "now to check that been effectively installed",
    "start": "3253800",
    "end": "3260339"
  },
  {
    "text": "the first thing to do now is take a look at the pods so we can see the dev",
    "start": "3260339",
    "end": "3265680"
  },
  {
    "text": "cluster Auto scaler which is actually deployment so let's take a look at the deployment",
    "start": "3265680",
    "end": "3271200"
  },
  {
    "text": "David was killer there and if we display the configuration we can see",
    "start": "3271200",
    "end": "3277859"
  },
  {
    "text": "the arguments for the commands are effectively the ones that we have",
    "start": "3277859",
    "end": "3284220"
  },
  {
    "text": "defined from the customization file right so everything looks good there you can",
    "start": "3284220",
    "end": "3291300"
  },
  {
    "text": "check the log quickly it's waiting for logs now on the second",
    "start": "3291300",
    "end": "3297240"
  },
  {
    "text": "um screen here let's connect to our Dev cluster so first let's get the quick",
    "start": "3297240",
    "end": "3304559"
  },
  {
    "text": "config file we can just set it to copy dev.com config",
    "start": "3304559",
    "end": "3313380"
  },
  {
    "text": "Just Launch K9s so we can see that Calico has been",
    "start": "3313380",
    "end": "3320400"
  },
  {
    "text": "installed as expected from the add-on layer as well as the",
    "start": "3320400",
    "end": "3326339"
  },
  {
    "text": "nginx Ingress so this is all good and in terms of the nodes yeah we have of course the two",
    "start": "3326339",
    "end": "3332819"
  },
  {
    "text": "nodes ready that we have deployed in gcp",
    "start": "3332819",
    "end": "3338599"
  },
  {
    "text": "now let's take a quick look at the add-ons where they are coming from so",
    "start": "3340520",
    "end": "3345660"
  },
  {
    "text": "they are coming from other crds that we have installed um with the add-on",
    "start": "3345660",
    "end": "3351900"
  },
  {
    "text": "software layer we have two see all these we have the hence chart proxies and the",
    "start": "3351900",
    "end": "3359819"
  },
  {
    "text": "Hand release proxies that will install Helm chart in the destination workload",
    "start": "3359819",
    "end": "3366960"
  },
  {
    "text": "cluster so here we've added two of them so first the nginx and as um and the",
    "start": "3366960",
    "end": "3374819"
  },
  {
    "text": "Calico one so the the difference is that if you can see here the Calico one",
    "start": "3374819",
    "end": "3381180"
  },
  {
    "text": "doesn't have any specific a label selector matching cluster here",
    "start": "3381180",
    "end": "3387359"
  },
  {
    "text": "it's basically all of them right the current matching cluster it's all of them because we don't have specified any",
    "start": "3387359",
    "end": "3394440"
  },
  {
    "text": "label selector in the corresponding manifest for that custom resource for",
    "start": "3394440",
    "end": "3399660"
  },
  {
    "text": "nginx it's a bit different you can see here that you have match level for",
    "start": "3399660",
    "end": "3406500"
  },
  {
    "text": "cluster selector so only the Clusters so the the cluster API clusters that have",
    "start": "3406500",
    "end": "3413579"
  },
  {
    "text": "that particular label will get nginx installed and you can see here the",
    "start": "3413579",
    "end": "3418740"
  },
  {
    "text": "current matching cluster is only copy Dev",
    "start": "3418740",
    "end": "3424280"
  },
  {
    "text": "so now for our last test let's try to scale the cluster",
    "start": "3424280",
    "end": "3432119"
  },
  {
    "text": "so we're going to monitor first let's check the log for",
    "start": "3432119",
    "end": "3440280"
  },
  {
    "text": "the dev cluster Auto scalar now I've got a deployment here",
    "start": "3440280",
    "end": "3447059"
  },
  {
    "text": "um that's is",
    "start": "3447059",
    "end": "3452700"
  },
  {
    "text": "reserving or requesting quite you know heavy large resources",
    "start": "3458400",
    "end": "3464240"
  },
  {
    "text": "in that particular deployment I have five replicas so that should trigger the",
    "start": "3464240",
    "end": "3471300"
  },
  {
    "text": "creation of new node let's apply",
    "start": "3471300",
    "end": "3476420"
  },
  {
    "text": "vets employment and again",
    "start": "3476700",
    "end": "3482040"
  },
  {
    "text": "let's check the cluster and you can see that now I've got multiple pod pending and on the",
    "start": "3482040",
    "end": "3491099"
  },
  {
    "text": "right here you can see that um the dev cluster Auto scalar process",
    "start": "3491099",
    "end": "3497700"
  },
  {
    "text": "is asking to scale up that particular cluster meaning that it's going to trigger",
    "start": "3497700",
    "end": "3503339"
  },
  {
    "text": "the creation of new machine in gcp",
    "start": "3503339",
    "end": "3509940"
  },
  {
    "text": "so if we go back to the",
    "start": "3509940",
    "end": "3515400"
  },
  {
    "text": "Cappy controller manager we should see something happening",
    "start": "3515400",
    "end": "3521900"
  },
  {
    "text": "so you can see here waiting for the kubernetes node on the machine",
    "start": "3525660",
    "end": "3530720"
  },
  {
    "text": "to report ready States so now if we go back to the infrastructure provider logs",
    "start": "3531119",
    "end": "3538200"
  },
  {
    "text": "yeah it's going to be reconciling with new machine new Dev instances",
    "start": "3538200",
    "end": "3545400"
  },
  {
    "text": "and we can check that on here that's currently carico is being deployed on",
    "start": "3545400",
    "end": "3552180"
  },
  {
    "text": "new nodes so we have effectively new nodes being deployed",
    "start": "3552180",
    "end": "3558020"
  },
  {
    "text": "it's not ready yet but cadico is going to be installed okay so we have effectively noun two new",
    "start": "3558480",
    "end": "3566460"
  },
  {
    "text": "nodes that just appeared and now the pods can effectively be started",
    "start": "3566460",
    "end": "3573480"
  },
  {
    "text": "so all my pods from my deployment have started and the cluster has been scaled",
    "start": "3573480",
    "end": "3580920"
  },
  {
    "text": "that concludes our demos for today I hope they've been useful and now let's",
    "start": "3580920",
    "end": "3587040"
  },
  {
    "text": "conclude that presentation so we've seen that gitups plus cluster API is not",
    "start": "3587040",
    "end": "3595020"
  },
  {
    "text": "necessarily an easy task if you want a you know comprehensive set of features",
    "start": "3595020",
    "end": "3600599"
  },
  {
    "text": "this is most you know of a do-it-yourself process and you have to dig into very",
    "start": "3600599",
    "end": "3609059"
  },
  {
    "text": "different concept and different software so this is where palette from spectral",
    "start": "3609059",
    "end": "3616619"
  },
  {
    "text": "Cloud can really help because it's based on the same Principle as you know cluster API actually we have you know",
    "start": "3616619",
    "end": "3625319"
  },
  {
    "text": "committed a lot of code and I contributed to a lot of the existing cluster API providers",
    "start": "3625319",
    "end": "3632059"
  },
  {
    "text": "and the additional feature that's palette will add",
    "start": "3632059",
    "end": "3637799"
  },
  {
    "text": "um are related to more Enterprise features so we are really the coupling and making cluster API more usable by",
    "start": "3637799",
    "end": "3646200"
  },
  {
    "text": "separating you know the actual cluster from reusable cluster API profiles and",
    "start": "3646200",
    "end": "3651960"
  },
  {
    "text": "also on top of that we add extra security and Enterprise features I",
    "start": "3651960",
    "end": "3657299"
  },
  {
    "text": "mentioned things like security scans backup s-bomb tracking role-based Access",
    "start": "3657299",
    "end": "3663599"
  },
  {
    "text": "Control Etc whether it's managed or unmanaged kubernetes you can use palette for any",
    "start": "3663599",
    "end": "3669839"
  },
  {
    "text": "cloud or at the edge you can try it yourself it's a freemium model",
    "start": "3669839",
    "end": "3675540"
  },
  {
    "text": "um so you know you can have up to you know I would say two or three cluster free depending on the resources and the",
    "start": "3675540",
    "end": "3681480"
  },
  {
    "text": "number of nodes but you can really give it a try it's very declarative same sort of you know reconciliation principle for",
    "start": "3681480",
    "end": "3688740"
  },
  {
    "text": "deploying and managing all your clusters now what I want to add is you know for",
    "start": "3688740",
    "end": "3695760"
  },
  {
    "text": "for you to get the key takeaways for today so of course cluster API is a proven tool to manage kubernetes cluster",
    "start": "3695760",
    "end": "3702299"
  },
  {
    "text": "if you combine cluster API with githubs then you can really provide a lot of",
    "start": "3702299",
    "end": "3708000"
  },
  {
    "text": "automation at Large Scale but it's just the beginning as we we've seen today",
    "start": "3708000",
    "end": "3713780"
  },
  {
    "text": "kubernetes needs many more you know software layers to be production ready so we've seen the cluster Auto scaler",
    "start": "3713780",
    "end": "3720240"
  },
  {
    "text": "the additional add-on software that palette will give you basically out of",
    "start": "3720240",
    "end": "3725400"
  },
  {
    "text": "the box um so that gives you the foundation and you have to build on cluster API to add",
    "start": "3725400",
    "end": "3733020"
  },
  {
    "text": "your all your Enterprise requirement and of course that may require a lot of sweat and beaten nails",
    "start": "3733020",
    "end": "3740280"
  },
  {
    "text": "so yeah you can try to try our palette to see the difference and how easy that will be compared to what we've done",
    "start": "3740280",
    "end": "3747180"
  },
  {
    "text": "today what we've achieved in one hour you can probably do it in less than five",
    "start": "3747180",
    "end": "3752640"
  },
  {
    "text": "minutes um another couple of things so uh call to action please check out our cluster",
    "start": "3752640",
    "end": "3758880"
  },
  {
    "text": "API and declarative kubernetes management report that you can find here and finally come and visit us at our",
    "start": "3758880",
    "end": "3767700"
  },
  {
    "text": "boost s22 at kubecon Europe 2023 2023 in",
    "start": "3767700",
    "end": "3772859"
  },
  {
    "text": "Amsterdam which is happening in a couple of weeks so that's it's for today thank you for",
    "start": "3772859",
    "end": "3781380"
  },
  {
    "text": "joining again and I see you in the next one",
    "start": "3781380",
    "end": "3786619"
  }
]