[
  {
    "text": "hi and welcome to my talk about gradually implementing stto for your platform in this talk we'll be exploring",
    "start": "120",
    "end": "6080"
  },
  {
    "text": "a way to figure out your starting point your destination and the steps between those points to have a gradual and safe",
    "start": "6080",
    "end": "12440"
  },
  {
    "text": "implementation of St most of the material in this talk is based on conversations I had with other end users",
    "start": "12440",
    "end": "18359"
  },
  {
    "text": "and our own experience when implementing the service mesh for our platform first",
    "start": "18359",
    "end": "23519"
  },
  {
    "text": "a little bit about me my name is John I've doing platform engineering at V comp in the Netherlands for about seven",
    "start": "23519",
    "end": "28640"
  },
  {
    "text": "years I've also been doing consultancy for a very long time and that's mostly been revolving",
    "start": "28640",
    "end": "34399"
  },
  {
    "text": "around developed culture and Cloud architecture if you have any questions or have any feedback you can reach me uh",
    "start": "34399",
    "end": "41440"
  },
  {
    "text": "on the cncf slack and on the sto slack and even on the kubernetes slack workspace all using the same handle so",
    "start": "41440",
    "end": "48199"
  },
  {
    "text": "let's dive into the Gap that we're going to be bridging and going to assume that you already have a choice made a choice",
    "start": "48199",
    "end": "54280"
  },
  {
    "text": "to use a service mesh or at least are heavily leaning towards implementing one and you might already have a non- meshed",
    "start": "54280",
    "end": "61160"
  },
  {
    "text": "system running so figuring out what's inside of this this this opening this Gap uh what we need to put there to get",
    "start": "61160",
    "end": "68560"
  },
  {
    "text": "to our end State that's what the Stock's all about so your starting point is probably kubernetes but it might also be",
    "start": "68560",
    "end": "74520"
  },
  {
    "text": "something else uh ISO does work with various other systems although it might be a little bit more work to get it",
    "start": "74520",
    "end": "80079"
  },
  {
    "text": "working for example virtual machines or servers or Edge devices are all going to",
    "start": "80079",
    "end": "85360"
  },
  {
    "text": "be supported looking for one of more features in the surface mesh uh deployment that is probably uh Al s a",
    "start": "85360",
    "end": "92560"
  },
  {
    "text": "starting point requirement if you're not looking for a service mesh you might not really want to deploy or deploy one and",
    "start": "92560",
    "end": "99840"
  },
  {
    "text": "then there's the existing expectations uh so you probably already have some running applications or some users or",
    "start": "99840",
    "end": "106040"
  },
  {
    "text": "some plans that you uh need to support and adhere to then there's the destination which is",
    "start": "106040",
    "end": "112840"
  },
  {
    "text": "slightly harder to predict but for my conversations it's usually a combination of Ingress control internal",
    "start": "112840",
    "end": "118039"
  },
  {
    "text": "communication and observability which are all very handy to have we'll go into detail about those features uh a little",
    "start": "118039",
    "end": "125039"
  },
  {
    "text": "bit later so getting the starting point right is pretty important because that",
    "start": "125039",
    "end": "130599"
  },
  {
    "text": "uh all through implementation that is going to influence how you uh perform each step and what the impact is going",
    "start": "130599",
    "end": "136879"
  },
  {
    "text": "to be so I've split this into three topics there's existing knowledge there's infrastructure context and",
    "start": "136879",
    "end": "142720"
  },
  {
    "text": "there's available resources and together they have a pretty huge impact on how you might implement",
    "start": "142720",
    "end": "148400"
  },
  {
    "text": "this so your containers Linux or kubernets experience that would come in handy but it's not the only existing",
    "start": "148400",
    "end": "154959"
  },
  {
    "text": "knowledge that will come in handy you might have uh one of these products or something totally drien and one way or",
    "start": "154959",
    "end": "161280"
  },
  {
    "text": "another some of the knowledge that you have gained when using or operating them uh that will come in handy when",
    "start": "161280",
    "end": "167440"
  },
  {
    "text": "implementing a service mesh because lots of the knowledge that might not be say named the same or terminology might just",
    "start": "167440",
    "end": "174120"
  },
  {
    "text": "be slightly off it usually brought down to the same stuff um so having some",
    "start": "174120",
    "end": "180040"
  },
  {
    "text": "existing knowledge and taking inventory of that that is important because that informs how much of a learning curve you",
    "start": "180040",
    "end": "187319"
  },
  {
    "text": "might have and then there's the infrastructure context so for example you might have existing systems and the connectivity of",
    "start": "187319",
    "end": "194599"
  },
  {
    "text": "those systems may not be interruptible or it might be preferred that they not be",
    "start": "194599",
    "end": "200760"
  },
  {
    "text": "interrupted while you're implementing something same goes for uh dependencies the other way around so if you are",
    "start": "200760",
    "end": "206319"
  },
  {
    "text": "inside your cluster and you want to talk to something outside of the cluster well maybe we want to make sure that that also keeps working now not everyone",
    "start": "206319",
    "end": "213239"
  },
  {
    "text": "requires this some Services have uh expected downtime so that might apply to",
    "start": "213239",
    "end": "218480"
  },
  {
    "text": "you but if it applies to you something to take into context or into consideration then there executing",
    "start": "218480",
    "end": "225000"
  },
  {
    "text": "compliance so you might have existing uh rules regarding that um and you might have existing users so uh making sure",
    "start": "225000",
    "end": "232720"
  },
  {
    "text": "that you don't interrupt their work too badly or in unexpected ways is also very important so looking at those two uh we",
    "start": "232720",
    "end": "239920"
  },
  {
    "text": "go fill in the blanks in a bit they uh impact your learning curve because how",
    "start": "239920",
    "end": "245480"
  },
  {
    "text": "much you can re use also kind of applies to how much you will have to learn and",
    "start": "245480",
    "end": "251120"
  },
  {
    "text": "uh how much you have to change will uh cause some friction so fewer changes or safer changes will result on less",
    "start": "251120",
    "end": "259079"
  },
  {
    "text": "friction and then there's the indirect impact uh of your speed and scope",
    "start": "259079",
    "end": "264320"
  },
  {
    "text": "because if you have to maintain a lot of existing uh uh features or connectivity then your scope might get very broad um",
    "start": "264320",
    "end": "272240"
  },
  {
    "text": "and if you have a lot of existing knowledge that you can reapply then your speed might be very high and also works the other way around of course but",
    "start": "272240",
    "end": "278720"
  },
  {
    "text": "there's another factor that also uh seriously impact your speed and your scope of your implementation that is the",
    "start": "278720",
    "end": "283800"
  },
  {
    "text": "available resources so if you don't have the people and the time to implement and",
    "start": "283800",
    "end": "289919"
  },
  {
    "text": "maintain everything maybe you want to spend some money on a third party supplier to help you with that or it",
    "start": "289919",
    "end": "295759"
  },
  {
    "text": "could be the other way around maybe your budget is somewhat smaller but you do have time to to uh build and support",
    "start": "295759",
    "end": "301680"
  },
  {
    "text": "everything so then you might do everything in the house or some balance in between and these resources um they",
    "start": "301680",
    "end": "309080"
  },
  {
    "text": "will uh generally also impact how many features you deliver at once and how",
    "start": "309080",
    "end": "315080"
  },
  {
    "text": "safe that is to do so if you have a very uh uh if you release very often and you",
    "start": "315080",
    "end": "321199"
  },
  {
    "text": "have a couple of environments say you have a development environment and a sandbox environment and a production environment it might be uh safer and",
    "start": "321199",
    "end": "328440"
  },
  {
    "text": "easier to deploy a small set of features many times U not the same features",
    "start": "328440",
    "end": "333960"
  },
  {
    "text": "obviously um but it gives you a a uh a relatively safe way to do things on the",
    "start": "333960",
    "end": "340039"
  },
  {
    "text": "other hand if you have a slower release Cadence perhaps you might bundle more features at once um but you have to do",
    "start": "340039",
    "end": "346000"
  },
  {
    "text": "more testing and more validation ahead of time so how do you apply these these",
    "start": "346000",
    "end": "352080"
  },
  {
    "text": "these topics to a real world scenario well for us V comp and uh for some of",
    "start": "352080",
    "end": "357479"
  },
  {
    "text": "the people I talked to it was uh some reusable knowledge so for us uh we",
    "start": "357479",
    "end": "363800"
  },
  {
    "text": "already had some platform experience that was relatively relatable to esto um",
    "start": "363800",
    "end": "370680"
  },
  {
    "text": "including uh scheduling orchestration and containers and generating yaml because duplicating the same y by hand",
    "start": "370680",
    "end": "377840"
  },
  {
    "text": "and keeping those in sync that's not really a lot of fun if you have enough services to configure um but also metric",
    "start": "377840",
    "end": "384199"
  },
  {
    "text": "with Prometheus helps a lot because a lot of the observability uh does depend on uh you",
    "start": "384199",
    "end": "389919"
  },
  {
    "text": "using the metrics that are available in stto to act on and you can use pris or",
    "start": "389919",
    "end": "395080"
  },
  {
    "text": "other tools but in this example and in our case we used perthus and then there's the infrastruct",
    "start": "395080",
    "end": "401319"
  },
  {
    "text": "context uh so we had a relatively High release Cadence but we have smaller sets",
    "start": "401319",
    "end": "406599"
  },
  {
    "text": "of releas features per release and because we have multiple environment it was also relatively safe for us to",
    "start": "406599",
    "end": "412000"
  },
  {
    "text": "experiment and we were're using git and deployment system so we could roll backwards and forwards without breaking",
    "start": "412000",
    "end": "418160"
  },
  {
    "text": "too many things at once uh and there were also uh existing websites backend",
    "start": "418160",
    "end": "423479"
  },
  {
    "text": "services that we could not modify so uh those had to be uh kept alive during all",
    "start": "423479",
    "end": "429680"
  },
  {
    "text": "the implementation uh phases so that is how it worked for us but lastly the",
    "start": "429680",
    "end": "435599"
  },
  {
    "text": "resources uh we didn't have much of a budget for ongoing uh support so we",
    "start": "435599",
    "end": "441400"
  },
  {
    "text": "couldn't really uh have a third party manage the control plan for us for example uh which can be a very uh useful",
    "start": "441400",
    "end": "447560"
  },
  {
    "text": "service to uh purchase but we did have a little bit of a budget to help us Kickstart the implementation",
    "start": "447560",
    "end": "453560"
  },
  {
    "text": "so we had some time and some people but not everyone had the same amount of knowledge and U we figured that uh",
    "start": "453560",
    "end": "462000"
  },
  {
    "text": "having some Consultants come in and do some pair programming would be one of the ways uh that we could improve our",
    "start": "462000",
    "end": "468080"
  },
  {
    "text": "knowledge and also keep our speed uh to a level that we wanted it to be and",
    "start": "468080",
    "end": "474159"
  },
  {
    "text": "because we had full ownership and those frequent releases uh that was something that we could choose for but that might",
    "start": "474159",
    "end": "480000"
  },
  {
    "text": "of course be different in your situation so now that we have a starting point and an example of how such a",
    "start": "480000",
    "end": "486120"
  },
  {
    "text": "starting point was created uh let's look at the destination so this diagram is a somewhat simplified version of the",
    "start": "486120",
    "end": "493120"
  },
  {
    "text": "architecture uh it's available on the architecture overview page on the website but it gives you an of the an",
    "start": "493120",
    "end": "499199"
  },
  {
    "text": "idea of the layout of where all the components are and if you uh look around",
    "start": "499199",
    "end": "504599"
  },
  {
    "text": "you have some rough sections there's a section control plane and there's some stuff in there there's another section",
    "start": "504599",
    "end": "510360"
  },
  {
    "text": "data plane there's some other stuff in there and there are of course the existing services that you might already have now if we were to uh take this this",
    "start": "510360",
    "end": "518479"
  },
  {
    "text": "idea that we have a couple of locations with different purposes and we go browse the documentation site and there are of",
    "start": "518479",
    "end": "524760"
  },
  {
    "text": "course plenty of sources where you can go look for um features that are available or waging people are using",
    "start": "524760",
    "end": "531519"
  },
  {
    "text": "this um then uh well documentation site uh always has all the features because",
    "start": "531519",
    "end": "538240"
  },
  {
    "text": "well uh it's it's documenting everything that's possible with sto so uh just as a",
    "start": "538240",
    "end": "543800"
  },
  {
    "text": "reference U it might be very useful to just browse it so what we did is we uh",
    "start": "543800",
    "end": "549040"
  },
  {
    "text": "went and looked at the concepts and the tasks so the concepts and the tasks have similar uh topics um but for example",
    "start": "549040",
    "end": "555680"
  },
  {
    "text": "traffic management and observability were very important to us so we first read through the uh some of the concepts",
    "start": "555680",
    "end": "562240"
  },
  {
    "text": "and then uh decided that well we have an idea of why we want this and what it",
    "start": "562240",
    "end": "567640"
  },
  {
    "text": "does but let's see how hard it is to do the things and that's where the other section comes in handy there's tasks for",
    "start": "567640",
    "end": "574000"
  },
  {
    "text": "traffic management and policy enforcement and security and they inform you a little bit about how much work or",
    "start": "574000",
    "end": "580000"
  },
  {
    "text": "how much knowledge it takes to do certain things now if you uh need a",
    "start": "580000",
    "end": "585519"
  },
  {
    "text": "little bit more of a complete example of course those exist as well and just as there are uh a lot of presentations and",
    "start": "585519",
    "end": "592600"
  },
  {
    "text": "the past isue conferences contain a lot of um user stories about how they",
    "start": "592600",
    "end": "599640"
  },
  {
    "text": "uh using is show and what features they're using um but yeah the examples give you a a a composed working system",
    "start": "599640",
    "end": "608839"
  },
  {
    "text": "that uses certain ISO features so it be very useful uh for you if you don't really know yet which features you will",
    "start": "608839",
    "end": "615160"
  },
  {
    "text": "be using and in what combination this is a a very good point to check out",
    "start": "615160",
    "end": "622360"
  },
  {
    "text": "so if you look at the documentation in our case we also talk to a bunch of other end users um we found that these",
    "start": "622360",
    "end": "629680"
  },
  {
    "text": "things not all of them but most of them most of the time are the topics that people are most interested about and",
    "start": "629680",
    "end": "636760"
  },
  {
    "text": "also the most uh desire to implement as fast or as soon as possible so uh let's",
    "start": "636760",
    "end": "644240"
  },
  {
    "text": "uh see how we can actually take those six topics and bridge the gap so we have starting point and we uh of course uh",
    "start": "644240",
    "end": "653079"
  },
  {
    "text": "it's not possible to represent everyone's infrastructure but let's pretend that it is at least similar to",
    "start": "653079",
    "end": "658240"
  },
  {
    "text": "this so we uh might have a bunch of microservices and they are using an",
    "start": "658240",
    "end": "663440"
  },
  {
    "text": "abstraction as uh as a way to package all the resources for a service so when a developer wants to deploy it they have",
    "start": "663440",
    "end": "670079"
  },
  {
    "text": "exti a Helm chart and it's versioned so they have a Helm chart of a specific version they Supply the values and the",
    "start": "670079",
    "end": "676480"
  },
  {
    "text": "helm chart will make sure that all the resources that they need are deployed in their own namespace so uh there's also requires a",
    "start": "676480",
    "end": "683560"
  },
  {
    "text": "working kubernetes cluster and that in this case in this scenario we have the Ingress connected to low balancer so",
    "start": "683560",
    "end": "690279"
  },
  {
    "text": "it's not directly exposed to the internet but the low balancer takes care of that and then all the ingresses that",
    "start": "690279",
    "end": "696160"
  },
  {
    "text": "you have they are using a low controller to receive traffic so if we take this starting",
    "start": "696160",
    "end": "703360"
  },
  {
    "text": "point and we say we want to start with the Ingress gate but how we go about that well uh we want the in gate for a",
    "start": "703360",
    "end": "709600"
  },
  {
    "text": "couple of features Cal drivability and routing and because the Ingress gate isn't deployed with the application but",
    "start": "709600",
    "end": "714959"
  },
  {
    "text": "inside the cluster on its own it means that you're controlled on the Ingress Gateway apply to everyone and they",
    "start": "714959",
    "end": "721399"
  },
  {
    "text": "cannot really be uh circumvented as such with the Ingress you can essentially make your own rules and do whatever you",
    "start": "721399",
    "end": "726600"
  },
  {
    "text": "want but that's because it's delivered with your application and this one",
    "start": "726600",
    "end": "731639"
  },
  {
    "text": "isn't on its own the Engish Gateway doesn't do anything so we also need to start with the basics of traffic",
    "start": "731639",
    "end": "738519"
  },
  {
    "text": "management now why you would want traffic management at all uh well it said it in the name to",
    "start": "738519",
    "end": "744639"
  },
  {
    "text": "manage your traffic um but it gives you service specific rules and it is also used to connect a service to a Gateway",
    "start": "744639",
    "end": "752120"
  },
  {
    "text": "so the traffic will only flow if there is a resource that says this service would like to receive traffic from this Gateway when these conditions are met",
    "start": "752120",
    "end": "759360"
  },
  {
    "text": "and then you also have advanced routing features we can't go into those in this talk but that is something that uh you",
    "start": "759360",
    "end": "766680"
  },
  {
    "text": "get as soon as you enable the possibility of using traffic management features so let's look at the diagram",
    "start": "766680",
    "end": "773720"
  },
  {
    "text": "again where would these two items this uh the basics of traffic management and the Eng gate live so you have the data",
    "start": "773720",
    "end": "781199"
  },
  {
    "text": "plane section and there's your existing surface and we want to make sure that the Ingress of traffic works and we also",
    "start": "781199",
    "end": "787160"
  },
  {
    "text": "want to make sure that it actually arrives at a service now to do do anything you first need to have a control plane and uh that's where we're",
    "start": "787160",
    "end": "794360"
  },
  {
    "text": "going to start the enables everything else um well it enables the installation",
    "start": "794360",
    "end": "799920"
  },
  {
    "text": "of everything else um but yeah let let's start with that one so you have your kubernetes you start with your uh",
    "start": "799920",
    "end": "805959"
  },
  {
    "text": "control plane you then add your English Gateway and then you can do your for traffic management tasks so let's look",
    "start": "805959",
    "end": "813839"
  },
  {
    "text": "at these in a more uh practical sense so I've uh added some elements to the uh to",
    "start": "813839",
    "end": "821480"
  },
  {
    "text": "the diagram we now have an in Gateway and an stod uh on the site that's living",
    "start": "821480",
    "end": "827199"
  },
  {
    "text": "in its own location it's not embedded in the namespace of the application and the",
    "start": "827199",
    "end": "832399"
  },
  {
    "text": "application now also has a virtual service resource so how it works is you install the control plane it's very well documented is is essentially one Comm to",
    "start": "832399",
    "end": "839120"
  },
  {
    "text": "install the base custom resarch definitions and another one to uh install the stod so the demon that",
    "start": "839120",
    "end": "845639"
  },
  {
    "text": "actually controls everything and there's another command to then the English",
    "start": "845639",
    "end": "851160"
  },
  {
    "text": "Gateway so those two you can essentially out of the box you use them there's no",
    "start": "851160",
    "end": "857120"
  },
  {
    "text": "additional configuration required and um that essentially sets you up for everything else so then the third step",
    "start": "857120",
    "end": "864759"
  },
  {
    "text": "was the basics of traffic Management in this case it means that we need to create a virtual service resource and uh",
    "start": "864759",
    "end": "872519"
  },
  {
    "text": "that essentially is uh going to be the connection between the Gateway and the service where you want to receive the",
    "start": "872519",
    "end": "877560"
  },
  {
    "text": "traffic now there are uh when you implement it there are no real side effects of to this so you can actually",
    "start": "877560",
    "end": "883279"
  },
  {
    "text": "do this without bugging anyone without breaking anything all the uh current traffic flows will keep working in a way",
    "start": "883279",
    "end": "890759"
  },
  {
    "text": "you yeah you can do this without anyone noticing and there are of course multip",
    "start": "890759",
    "end": "895839"
  },
  {
    "text": "ways to install it so there's hel based installation uh scl can do a lot of it for you can generate manifest and use",
    "start": "895839",
    "end": "902199"
  },
  {
    "text": "those perhaps with customize so there are multiple options now let's dive into this virtual service for a second um",
    "start": "902199",
    "end": "909000"
  },
  {
    "text": "this is essentially a resource that says uh if this Gateway uh in this case the Gateway is named Ingress Gateway",
    "start": "909000",
    "end": "915920"
  },
  {
    "text": "receives some traffic uh check if the URL is prefixed with cool if it is send",
    "start": "915920",
    "end": "922040"
  },
  {
    "text": "the traffic to destination my cool app and in this case my cool app is the name of the service that you deployed so",
    "start": "922040",
    "end": "927920"
  },
  {
    "text": "that's all it does it doesn't say oh stop all the other traffic or break the existing inv it doesn't even touch",
    "start": "927920",
    "end": "933399"
  },
  {
    "text": "anything else so if you were to abstract your application you could essentially release a new version of your Helm chart",
    "start": "933399",
    "end": "939680"
  },
  {
    "text": "if that's what you're using and simply add this resource and that's it so very safe way to implement this however it",
    "start": "939680",
    "end": "947360"
  },
  {
    "text": "doesn't do anything right now so the question that remains do you just deploy",
    "start": "947360",
    "end": "952399"
  },
  {
    "text": "this and then move on and do something else or do you perhaps want to deploy something that actually does something",
    "start": "952399",
    "end": "958680"
  },
  {
    "text": "so uh First Choice is deploy this as is doesn't do much but it's super safe but",
    "start": "958680",
    "end": "963839"
  },
  {
    "text": "it might also mean that you now have like a billion deployments that do nothing before you get to a point where you can do something um but yeah the",
    "start": "963839",
    "end": "970519"
  },
  {
    "text": "second option at this Crossroads is um we're going to modify everything at once",
    "start": "970519",
    "end": "976240"
  },
  {
    "text": "and we're going to make sure that the traffic immediately goes into the virtual surface into the in Gateway and the old path is IM broken that will be",
    "start": "976240",
    "end": "983600"
  },
  {
    "text": "more of a big bang implementation perhaps useful if your release Cadence is",
    "start": "983600",
    "end": "989199"
  },
  {
    "text": "slower um but it does require everyone to move at the same time but there's a",
    "start": "989199",
    "end": "994279"
  },
  {
    "text": "third option and the third option uh allows you to uh let everyone Pace it at",
    "start": "994279",
    "end": "1000000"
  },
  {
    "text": "their own uh well desired speed so let's look at this option three so we take",
    "start": "1000000",
    "end": "1005120"
  },
  {
    "text": "this existing diagram that we have and we just add a new low balancer to it and",
    "start": "1005120",
    "end": "1010160"
  },
  {
    "text": "the new low balancer uh will actually send traffic to the Ingress Gateway and at this point you can actually already",
    "start": "1010160",
    "end": "1016160"
  },
  {
    "text": "use this uh to send traffic to any service that also has a matching virtual service doesn't work for everything of",
    "start": "1016160",
    "end": "1022519"
  },
  {
    "text": "course so if your developers are using a Helm chart that doesn't deploy a virtual service with their application then",
    "start": "1022519",
    "end": "1027678"
  },
  {
    "text": "those aren't reachable by the Ingress Gateway because the Ingress Gateway only knows about Services um that are",
    "start": "1027679",
    "end": "1033400"
  },
  {
    "text": "connected to it VI a virtual service so we can actually uh uh make",
    "start": "1033400",
    "end": "1040160"
  },
  {
    "text": "that even more safe so we can create a virtual service that is a wild card service or a fullback service and what",
    "start": "1040160",
    "end": "1046959"
  },
  {
    "text": "it does is it catches any tra that couldn't be served by a different virtual service and in this case we can",
    "start": "1046959",
    "end": "1052600"
  },
  {
    "text": "then tell the virtual service hey anything you receive just send it to the old low balancer and then uh any surface",
    "start": "1052600",
    "end": "1060080"
  },
  {
    "text": "that has been deployed with a virtual surface can receive the traffic directly from the Gateway and any surface that was deployed without a virtual surface",
    "start": "1060080",
    "end": "1066919"
  },
  {
    "text": "it will still receive the traffic using the old low balancer the old Ingress and can continue working as is you can even",
    "start": "1066919",
    "end": "1073520"
  },
  {
    "text": "roll backwards and forwards without breaking anything um this does require an",
    "start": "1073520",
    "end": "1079120"
  },
  {
    "text": "additional resource so you have your virtual service that configures the bypass or the fullback traffic there",
    "start": "1079120",
    "end": "1084480"
  },
  {
    "text": "essentially a wild card it accepts anything and is you make sure that this wild card service is put at the bottom",
    "start": "1084480",
    "end": "1091120"
  },
  {
    "text": "of the priority chain because you would of course not want to capture any traffic that you have a actual service",
    "start": "1091120",
    "end": "1099080"
  },
  {
    "text": "for but ISO doesn't know anything about uh your old low balancer because it's",
    "start": "1099080",
    "end": "1104240"
  },
  {
    "text": "not a service and it's not inside the mesh so we do need to inform stto about this so what we do is we create a",
    "start": "1104240",
    "end": "1109720"
  },
  {
    "text": "service entry which Lally says if you see this host uh it is located outside of the mesh here's the port here's the",
    "start": "1109720",
    "end": "1116760"
  },
  {
    "text": "protocol and uh you can find it using DNS and now it still knows about it which means that any traffic that you",
    "start": "1116760",
    "end": "1123039"
  },
  {
    "text": "send to the new low balancer will hit your Ingress Gateway the in Gateway will say yes I am aware of a service anal or",
    "start": "1123039",
    "end": "1131000"
  },
  {
    "text": "no I'm not and in the last case uh well it will be aware that the Wild Card Service exist and that will then forward",
    "start": "1131000",
    "end": "1137799"
  },
  {
    "text": "the traffical old low balancer and this way your developers can now deploy an old version of your chart or a new",
    "start": "1137799",
    "end": "1143640"
  },
  {
    "text": "version of your chart and the traffic will always work there is of course a",
    "start": "1143640",
    "end": "1149360"
  },
  {
    "text": "couple of extra hops now included so if you're using the old way or your developers using the old way it means",
    "start": "1149360",
    "end": "1155440"
  },
  {
    "text": "that their traffic has a little bit of actra latency but that's about it so",
    "start": "1155440",
    "end": "1161000"
  },
  {
    "text": "it's a pretty safe way in a pretty staged way to uh uh allow a gradual move",
    "start": "1161000",
    "end": "1168320"
  },
  {
    "text": "towards MH integrated traffic but uh that of course uh leaves us with not a",
    "start": "1168320",
    "end": "1174400"
  },
  {
    "text": "lot of new features we have moved traffic over but that's about it that's not what we wanted we wanted use those",
    "start": "1174400",
    "end": "1181120"
  },
  {
    "text": "sweet service mesh features and this in pretty much all Cas is is going to require you to have a sidecar proxy",
    "start": "1181120",
    "end": "1188559"
  },
  {
    "text": "because that's where actually all the magic happens now I'm talking about side car proxies here but U there is a",
    "start": "1188559",
    "end": "1194320"
  },
  {
    "text": "different mode for the mesh and that's called the ambient mode or ambient mesh and uh that uses a different system but",
    "start": "1194320",
    "end": "1200520"
  },
  {
    "text": "achieves the same thing um there are other presentations at this conference in the previous conference about",
    "start": "1200520",
    "end": "1206799"
  },
  {
    "text": "explaining the actual a mesh and what features are and aren't supported it's currently in beta um but yeah it's for",
    "start": "1206799",
    "end": "1214320"
  },
  {
    "text": "this example it doesn't really matter because once it gets released U the way you work with it will be the same so uh",
    "start": "1214320",
    "end": "1221880"
  },
  {
    "text": "as talk about this psycher proxy so uh we have uh a little bit of lers Gateway",
    "start": "1221880",
    "end": "1227960"
  },
  {
    "text": "that's done and we have uh uh some traffic management but nothing else so",
    "start": "1227960",
    "end": "1235120"
  },
  {
    "text": "this injection will enable observability and security and authorization um because uh it actually has access to all",
    "start": "1235120",
    "end": "1242440"
  },
  {
    "text": "the traffic coming in and out of your pot and that's something that you need if you want to observe it or skew it or",
    "start": "1242440",
    "end": "1248080"
  },
  {
    "text": "do anything with it so the observability features that you would gain is uh traffic Insight but also who's talking",
    "start": "1248080",
    "end": "1254440"
  },
  {
    "text": "to who so it will know uh who the originator request was and who the destination is and this also is",
    "start": "1254440",
    "end": "1262760"
  },
  {
    "text": "precursor to other facilities so for example let's Pi Kali that's a great tool to visualize what is actually",
    "start": "1262760",
    "end": "1268520"
  },
  {
    "text": "happening inside your mesh um so yeah it's it's it's kind of a a almost that's",
    "start": "1268520",
    "end": "1273760"
  },
  {
    "text": "not necessarily required but it's a must have because this will well enable whole world of other features for you security",
    "start": "1273760",
    "end": "1281200"
  },
  {
    "text": "wise uh the most important parts are traffic encryption so it does mutal TLS",
    "start": "1281200",
    "end": "1286559"
  },
  {
    "text": "and it also has cryptographic identities for all of your pods uh so it means that",
    "start": "1286559",
    "end": "1291799"
  },
  {
    "text": "uh there identities that cannot be faked because the essentially side car uh the",
    "start": "1291799",
    "end": "1297840"
  },
  {
    "text": "proxy that's injected that manages your identity so it means that if you have a container in a pot that tries to talk",
    "start": "1297840",
    "end": "1304159"
  },
  {
    "text": "the outside world um the container proxy or the uh side car proxy will attach",
    "start": "1304159",
    "end": "1311240"
  },
  {
    "text": "that identity to it and you have to implement uh some of the security features to get access control",
    "start": "1311240",
    "end": "1319000"
  },
  {
    "text": "and the acttion control based on that identity that you get that the cryptographic identity allows you to say",
    "start": "1319000",
    "end": "1324919"
  },
  {
    "text": "who can talk to who based on identity instead of just board numbers or network based policies so it's protocol based",
    "start": "1324919",
    "end": "1331919"
  },
  {
    "text": "which gives you a lot of fine grain features we can be very useful we'll go into that a little bit later",
    "start": "1331919",
    "end": "1339159"
  },
  {
    "text": "um but yeah if you if you take a look at it in steps you can gradually uh add",
    "start": "1339159",
    "end": "1344960"
  },
  {
    "text": "side cars which then enables observability security and authorization",
    "start": "1344960",
    "end": "1350320"
  },
  {
    "text": "now essentially observability and security could be in different orders but side cars has to be done first and",
    "start": "1350320",
    "end": "1355679"
  },
  {
    "text": "authorization only works if security works so let's go into it so I've",
    "start": "1355679",
    "end": "1361000"
  },
  {
    "text": "removed all the uh other resources from the diagram uh that are not relevant for this part and what we're going to do is",
    "start": "1361000",
    "end": "1367679"
  },
  {
    "text": "we're going to update the configuration to inject a s car into the pot now you can do this cluster wide so we can say",
    "start": "1367679",
    "end": "1373120"
  },
  {
    "text": "everything must have a sidecar but you can also do this based on the namespace or even based on the Pod and that is of",
    "start": "1373120",
    "end": "1379760"
  },
  {
    "text": "course controlled by your replica set and your deployment um when you do this uh it is important to keep an eye on your",
    "start": "1379760",
    "end": "1385559"
  },
  {
    "text": "applications because there are some edge cases where an application might be doing something that needs some",
    "start": "1385559",
    "end": "1390840"
  },
  {
    "text": "additional coordination between the side car and the application so all it takes is adding a",
    "start": "1390840",
    "end": "1396400"
  },
  {
    "text": "label and uh the label can be set if you package your application using a chart uh by your chart uh you can also do with",
    "start": "1396400",
    "end": "1403679"
  },
  {
    "text": "the customize of course and if need be you can do it manually and as soon as you you have this label set and you",
    "start": "1403679",
    "end": "1409960"
  },
  {
    "text": "start a p sto will notice this and it will inject the side car so it is that",
    "start": "1409960",
    "end": "1415679"
  },
  {
    "text": "simple and because it's packaged with the application everyone can do this at their own pace so uh you don't have to",
    "start": "1415679",
    "end": "1422840"
  },
  {
    "text": "uh do it for everyone at once um but only for the uh borts that actually have",
    "start": "1422840",
    "end": "1428720"
  },
  {
    "text": "a Shard car uh that's where you get the additional features so that's good to keep in mind but again",
    "start": "1428720",
    "end": "1436159"
  },
  {
    "text": "gradual so what is gives you is and this is a somewhat more complicated diagram from the security documentation uh it",
    "start": "1436159",
    "end": "1443240"
  },
  {
    "text": "gives you a uh encryption and control points everywhere where the proxy is located so your service doesn't need to",
    "start": "1443240",
    "end": "1449640"
  },
  {
    "text": "implement it it is implemented for the service inside the proxy so that's why this injection is so important now if",
    "start": "1449640",
    "end": "1456480"
  },
  {
    "text": "you go a little bit more simplified um this means that if you're pod talks to",
    "start": "1456480",
    "end": "1462640"
  },
  {
    "text": "another pod that's both encrypted and identified so that's also where this observability comes from um and it also",
    "start": "1462640",
    "end": "1469640"
  },
  {
    "text": "means that um if you for example were to enforce this you can't have any plain text communication anymore now that does",
    "start": "1469640",
    "end": "1477919"
  },
  {
    "text": "mean that if you enforce it on a workload that is not used to it or say an external workload um you might run",
    "start": "1477919",
    "end": "1485039"
  },
  {
    "text": "into trouble because if you say mtls is now enforced and by default it's permissive but you say it's now enforced",
    "start": "1485039",
    "end": "1490799"
  },
  {
    "text": "it means that if anyone isn't upgraded yet with an injection um with a striker",
    "start": "1490799",
    "end": "1496440"
  },
  {
    "text": "injection they can no longer communicate correctly so uh it's important that if",
    "start": "1496440",
    "end": "1501559"
  },
  {
    "text": "you were to uh for compliance reason for example want to strictly required it uh",
    "start": "1501559",
    "end": "1507960"
  },
  {
    "text": "that can be quite tricky so yeah you can do it gradually but if you make it enforced uh you might want to have to",
    "start": "1507960",
    "end": "1513880"
  },
  {
    "text": "wait a little bit to make sure everything has a side car injection done",
    "start": "1513880",
    "end": "1519080"
  },
  {
    "text": "so now you have those features you have your traffic metrics your security status because that is something OB surity will also tell you it will tell",
    "start": "1519080",
    "end": "1524960"
  },
  {
    "text": "you what is the security status of this uh request was it using mtls or was it",
    "start": "1524960",
    "end": "1530000"
  },
  {
    "text": "using PL text um and you also get an automatic metrix endpoint so if you already scraping your services sto will",
    "start": "1530000",
    "end": "1537360"
  },
  {
    "text": "append the additional metrics to your metric end point so you don't need to set up any additional configurations in",
    "start": "1537360",
    "end": "1542960"
  },
  {
    "text": "prus this is very nice uh security also uh is automatically implemented because",
    "start": "1542960",
    "end": "1549720"
  },
  {
    "text": "uh by default it gives everyone ntls it gives everyone identity and it is also",
    "start": "1549720",
    "end": "1554880"
  },
  {
    "text": "always an enforcement point for policies so by by default as soon as you enable injection you get these practically for",
    "start": "1554880",
    "end": "1561600"
  },
  {
    "text": "free so you can of course configure them with more exotic configuration but it's not",
    "start": "1561600",
    "end": "1567399"
  },
  {
    "text": "required so let's say we want to also add uh some uh exess controls and",
    "start": "1567399",
    "end": "1574240"
  },
  {
    "text": "policies uh an example scenario would be a rest Service uh and you want to make sure that metric isn't accessible from",
    "start": "1574240",
    "end": "1579919"
  },
  {
    "text": "the internet but you want to also make sure that nobody can issue delete command uh for example you need to",
    "start": "1579919",
    "end": "1585080"
  },
  {
    "text": "quickly change that without modifying the application the policy can help you there so a policy for your uh Delete",
    "start": "1585080",
    "end": "1593480"
  },
  {
    "text": "method might look like this essentially say uh if traffic uh is matched based on",
    "start": "1593480",
    "end": "1599200"
  },
  {
    "text": "the label in this case the app is called my cool API then we deny the action as soon as we detect that it contains a",
    "start": "1599200",
    "end": "1605520"
  },
  {
    "text": "delete operation or delete method um so that is a very simple way to restrict",
    "start": "1605520",
    "end": "1610760"
  },
  {
    "text": "what someone can do or something can do for the other party metric thing that's",
    "start": "1610760",
    "end": "1616000"
  },
  {
    "text": "pretty nifty because the traffic is entering your cluster using the Ingress Gateway it means that the traffic from",
    "start": "1616000",
    "end": "1622520"
  },
  {
    "text": "outside which doesn't have an identity is now given the identity of the Ingress Gateway so the traffic comes in in your",
    "start": "1622520",
    "end": "1629080"
  },
  {
    "text": "Ingress Gateway and the engress gateway then communicates to your pot and that means that from a mesh perspective your",
    "start": "1629080",
    "end": "1635159"
  },
  {
    "text": "inish gateway is talking to your pot so your source is the Ingress Gateway and the destination is your pot so that",
    "start": "1635159",
    "end": "1641559"
  },
  {
    "text": "means that we can say if our pot receives traffic from anyone sure give the metric but if it receives traffic",
    "start": "1641559",
    "end": "1647240"
  },
  {
    "text": "from Engish Gateway do not give them metrix deny it instead so very powerful",
    "start": "1647240",
    "end": "1653480"
  },
  {
    "text": "uh but also gradually uh implementable that's a real word you can scope them uh",
    "start": "1653480",
    "end": "1660960"
  },
  {
    "text": "to a cluster so that it applies to everyone but you can also scope to your namespace or just an application which",
    "start": "1660960",
    "end": "1666559"
  },
  {
    "text": "again means that if a developer would want such an policy they can choose to",
    "start": "1666559",
    "end": "1671640"
  },
  {
    "text": "add it to their deployment uh and if it goes wrong wrong they can roll it back and then it's removed so the impact is",
    "start": "1671640",
    "end": "1677120"
  },
  {
    "text": "very small and if you want to require a policy for everyone you would embed it in your",
    "start": "1677120",
    "end": "1682600"
  },
  {
    "text": "chart and you would wait until everyone has upgraded to that latest chart version now there is a little bit of a",
    "start": "1682600",
    "end": "1688240"
  },
  {
    "text": "butt in here if you do things wrong your policy well maybe your service is no longer reachable there is this very",
    "start": "1688240",
    "end": "1695000"
  },
  {
    "text": "important graph that will help you prevent such uh errors so by default",
    "start": "1695000",
    "end": "1701200"
  },
  {
    "text": "everything is allowed um but you can have a custom or deny policy that that changes that behavior but what is",
    "start": "1701200",
    "end": "1707640"
  },
  {
    "text": "important to keep in mind is as soon as you add a single allow policy even if it's for one small specific thing it will block the default allow policy",
    "start": "1707640",
    "end": "1714440"
  },
  {
    "text": "which means uh you no longer allow everything you allow nothing except the thing that you explicitly allowed so uh",
    "start": "1714440",
    "end": "1721320"
  },
  {
    "text": "yeah start with allow Poli policies as a a last option if you can avoid",
    "start": "1721320",
    "end": "1728039"
  },
  {
    "text": "it and it brings to the last uh feature so if you want to gain the features of an in erress Gateway",
    "start": "1728039",
    "end": "1734919"
  },
  {
    "text": "um but which would mostly be met for the outside world and management for services that you don't own so for",
    "start": "1734919",
    "end": "1741000"
  },
  {
    "text": "example something that lives outside of the mesh and uh it is not necessarily the only way to do it if you remember we",
    "start": "1741000",
    "end": "1747360"
  },
  {
    "text": "did something with a low balancer um but if we look at a slightly more complicated scenario and you want dive",
    "start": "1747360",
    "end": "1753640"
  },
  {
    "text": "too deeply into it um you can uh Supply a service entry and a virtual service",
    "start": "1753640",
    "end": "1759399"
  },
  {
    "text": "with your application so for example if your application is talking to an external API and you would like to",
    "start": "1759399",
    "end": "1765000"
  },
  {
    "text": "collect metrics just on what that API is doing uh adding a service entry for the external API and a virtual service that",
    "start": "1765000",
    "end": "1771039"
  },
  {
    "text": "refers to the service entry uh will then allow any of your software that is already making those calls to be",
    "start": "1771039",
    "end": "1777600"
  },
  {
    "text": "instrumented because if you add a global e gateway to your cluster and you have a",
    "start": "1777600",
    "end": "1783519"
  },
  {
    "text": "virtual SE that refers to that then that is the path that will be taken by stto when sending traffic out through the",
    "start": "1783519",
    "end": "1789159"
  },
  {
    "text": "internet of course if there is no matching Service uh and uh there's no",
    "start": "1789159",
    "end": "1794760"
  },
  {
    "text": "strict mut TLS um I think traffic will just equest to the Internet by itself and it will not be instrumented which",
    "start": "1794760",
    "end": "1800720"
  },
  {
    "text": "would mean that your developer has to do it manually inside of the source code of their service so this is a very Nifty",
    "start": "1800720",
    "end": "1806360"
  },
  {
    "text": "feature as well um there weren't as many people I talked to that were actually using it but those that were using it",
    "start": "1806360",
    "end": "1814000"
  },
  {
    "text": "they were super happy about it so yeah it's good to know so that was all uh I could fit in",
    "start": "1814000",
    "end": "1821279"
  },
  {
    "text": "this presentation um I hope you learned something or at least uh enjoyed watching this and if you have any",
    "start": "1821279",
    "end": "1828000"
  },
  {
    "text": "questions or comments uh well you can reach me using the handle uh I mentioned at the beginning so I hope you had a uh",
    "start": "1828000",
    "end": "1836000"
  },
  {
    "text": "good presentation and I hope you have a nice conference thank you for listening",
    "start": "1836000",
    "end": "1843559"
  }
]