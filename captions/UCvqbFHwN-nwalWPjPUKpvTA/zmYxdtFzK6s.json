[
  {
    "text": "I hope you'll enjoy the last talking loop conne kiss for the random talk so a",
    "start": "210",
    "end": "5549"
  },
  {
    "text": "little bit about myself my name is irani and I in the past few years I walk a twist lock I've been a software engineer",
    "start": "5549",
    "end": "11820"
  },
  {
    "text": "and now in a team leader this is my email you can feel free to reach out later if you don't have time for the",
    "start": "11820",
    "end": "18720"
  },
  {
    "text": "questions so the first question for today is how many of you are familiar",
    "start": "18720",
    "end": "25289"
  },
  {
    "text": "with what he does no one okay how many",
    "start": "25289",
    "end": "33570"
  },
  {
    "text": "of you have learned this command and you",
    "start": "33570",
    "end": "38790"
  },
  {
    "text": "have no idea what it does okay so I'm going to cover many topics about CNI",
    "start": "38790",
    "end": "45390"
  },
  {
    "text": "plugins today and sinaia in general and hopefully within a few slides I will get",
    "start": "45390",
    "end": "51120"
  },
  {
    "text": "back to this example and you will have a better understanding of what it does so the agenda for today is to eventually",
    "start": "51120",
    "end": "59239"
  },
  {
    "text": "understand how to write a scene I plug-in from stage in bash using only simple command and tools and we'll start",
    "start": "59239",
    "end": "67020"
  },
  {
    "text": "with an overview of what's in II's we'll continue with understand how it's been",
    "start": "67020",
    "end": "73229"
  },
  {
    "text": "used in high level in kubernetes what it does when it operates and eventually we will conduct a small demo",
    "start": "73229",
    "end": "79710"
  },
  {
    "text": "that the most as everything that we will soon see in this talk so what is CNI the",
    "start": "79710",
    "end": "86880"
  },
  {
    "text": "United stands for container networking interface it's the intervals between the container runtime in our case kubernetes",
    "start": "86880",
    "end": "93119"
  },
  {
    "text": "and the network implementation when the cinah plugin is running it is",
    "start": "93119",
    "end": "98310"
  },
  {
    "text": "responsible for configuring the network interfaces and possibly routes and also",
    "start": "98310",
    "end": "104189"
  },
  {
    "text": "another thing that both understand is is that the sinner plugin concerns itself",
    "start": "104189",
    "end": "109890"
  },
  {
    "text": "only with the networking connectivity of the pod this is the link to the latest",
    "start": "109890",
    "end": "115200"
  },
  {
    "text": "see an iceberg it's 0.4 you can follow the link and read further about it",
    "start": "115200",
    "end": "121590"
  },
  {
    "text": "for the rest of this talk I'm actually going to focus on the latest on the previous spec which is 0.2 8.1 there",
    "start": "121590",
    "end": "128580"
  },
  {
    "text": "aren't many crucial differences between them for what we are going to touch in this talk it's going to be practically the",
    "start": "128580",
    "end": "135370"
  },
  {
    "text": "same the only reason that I'm doing it is for the sake of the demo which for",
    "start": "135370",
    "end": "141519"
  },
  {
    "text": "kubernetes 1.14 is still referencing the whole spec so CNI plugin often composed",
    "start": "141519",
    "end": "149620"
  },
  {
    "text": "of two components the first component is the CNI binary which is the plug-in itself to think that is implementing the",
    "start": "149620",
    "end": "156550"
  },
  {
    "text": "interface and one is flying it is being executed by the couplet and is",
    "start": "156550",
    "end": "162370"
  },
  {
    "text": "responsible for configuring the network interface it's deposit setup the connectivity of the container the second",
    "start": "162370",
    "end": "168640"
  },
  {
    "text": "part is the diamond well essentially most if not all CNI providers for kubernetes they also provide a demon",
    "start": "168640",
    "end": "175569"
  },
  {
    "text": "that is going to run on every node in the cluster and when it is running it will be managing the legibility of Phil",
    "start": "175569",
    "end": "182019"
  },
  {
    "text": "Paul saw the dull cluster which ability means that every port is accessible",
    "start": "182019",
    "end": "188160"
  },
  {
    "text": "reachable from every node and in when talking about networking in kubernetes",
    "start": "188160",
    "end": "193329"
  },
  {
    "text": "it's not such a trivial task because we are talking about virtual addresses that",
    "start": "193329",
    "end": "198609"
  },
  {
    "text": "are local to each node and are not necessarily known at any point in the cluster meaning that if you have two",
    "start": "198609",
    "end": "205359"
  },
  {
    "text": "nodes then each node is allocated with some address space for its pods and this",
    "start": "205359",
    "end": "210670"
  },
  {
    "text": "address space is virtual and not only to the node that is responsible for this",
    "start": "210670",
    "end": "216100"
  },
  {
    "text": "address space so for the rest of this talk I'm going to focus mostly on the first part which is the Siena",
    "start": "216100",
    "end": "221680"
  },
  {
    "text": "implementation itself meaning that we'll see code examples and talk about the way",
    "start": "221680",
    "end": "228340"
  },
  {
    "text": "that the pod acquires its network interface business languages in IP and",
    "start": "228340",
    "end": "233920"
  },
  {
    "text": "so on and living the which general eligibility about lost eligibility",
    "start": "233920",
    "end": "239950"
  },
  {
    "text": "internet internet and and so on we will leave it for the end of this talk for the demo and then we'll experience the",
    "start": "239950",
    "end": "247660"
  },
  {
    "text": "problems that arises though so just to make it clear the CNI binary itself is",
    "start": "247660",
    "end": "254500"
  },
  {
    "text": "only composed of those two components so on the left you can see a configuration",
    "start": "254500",
    "end": "260169"
  },
  {
    "text": "file which is simply as a JSON file JSON formatted file it contains a few",
    "start": "260169",
    "end": "268110"
  },
  {
    "text": "required fields such as the cni version which references the respect that the",
    "start": "268110",
    "end": "273460"
  },
  {
    "text": "plugin is fulfilling the name which is the plug-in name and the type which is the name of the binary to look for in",
    "start": "273460",
    "end": "280690"
  },
  {
    "text": "the in the folder holes of the cni like binary implementations themselves it can",
    "start": "280690",
    "end": "288370"
  },
  {
    "text": "contains also additional optional fields which I'm not going to discuss about today they are not shown here as well",
    "start": "288370",
    "end": "293380"
  },
  {
    "text": "and it can contains also custom fields in this case I'm showing an example of",
    "start": "293380",
    "end": "299169"
  },
  {
    "text": "the posada which is a custom field which I decided to put in the config and we will soon see why I chose to put it",
    "start": "299169",
    "end": "306010"
  },
  {
    "text": "there and how I'm going to use it later on on the right is the implementation itself it's a binary executable in this",
    "start": "306010",
    "end": "317080"
  },
  {
    "text": "in this case I decided to do it in bus and for the point 3.1 specification it",
    "start": "317080",
    "end": "323440"
  },
  {
    "text": "has to support those four commands that command which is called when the cni",
    "start": "323440",
    "end": "329229"
  },
  {
    "text": "plug-in is executed for configuring networking interfaces for a new container the delete command which is",
    "start": "329229",
    "end": "336610"
  },
  {
    "text": "called when a container has been deleted and now we need to possibly perform some sort of cleanup maybe release an IP",
    "start": "336610",
    "end": "342430"
  },
  {
    "text": "perform some other operations without them regarding our own implementation oh",
    "start": "342430",
    "end": "347590"
  },
  {
    "text": "and what you choose to do the gate command is rather than bigger so rather not to talk about it today at all it was",
    "start": "347590",
    "end": "354760"
  },
  {
    "text": "also changed in the point 4 specification to check in the Belgian command which is simply it's trivial it",
    "start": "354760",
    "end": "361630"
  },
  {
    "text": "just returns the plug-in version so going back to the wave example that I've",
    "start": "361630",
    "end": "368169"
  },
  {
    "text": "shown you before so the command that we've seen simply download the ml file",
    "start": "368169",
    "end": "374949"
  },
  {
    "text": "and runs it and what is in this file is simply a demo set implementation a",
    "start": "374949",
    "end": "380729"
  },
  {
    "text": "configuration and you can notice that it's going to run the host network and",
    "start": "380729",
    "end": "387370"
  },
  {
    "text": "this is important for CNI plugins because one it allows us to deploy even before the cni plug-in is",
    "start": "387370",
    "end": "394830"
  },
  {
    "text": "configured and then we don't need an IP to be allocated for us so our deployment",
    "start": "394830",
    "end": "402539"
  },
  {
    "text": "can run everywhere even when the amount is still not ready and the second reason",
    "start": "402539",
    "end": "407940"
  },
  {
    "text": "for being on the host network is of course because we're going to manipulate the host network stack by performing",
    "start": "407940",
    "end": "413430"
  },
  {
    "text": "some ID maybe IP table changes outs and other stuff so we need to understand",
    "start": "413430",
    "end": "420210"
  },
  {
    "text": "folk and the second thing was noting here that you can see that the wave",
    "start": "420210",
    "end": "425310"
  },
  {
    "text": "container itself it has mounts to specific paths on the disk to the",
    "start": "425310",
    "end": "431069"
  },
  {
    "text": "locations where we will we need to place the configuration file and",
    "start": "431069",
    "end": "438349"
  },
  {
    "text": "I didn't do anything okay",
    "start": "449990",
    "end": "459310"
  },
  {
    "text": "almost",
    "start": "460099",
    "end": "462699"
  },
  {
    "text": "okay so you can see that the wolf container is going to have mounts with",
    "start": "468889",
    "end": "474229"
  },
  {
    "text": "specific folders in the discs that are going to hold it CNI Benelli itself and the configuration file and when it's",
    "start": "474229",
    "end": "481430"
  },
  {
    "text": "going to run it's going to on the LAN script so if take a deeper look at the landscape you can see that eventually",
    "start": "481430",
    "end": "487099"
  },
  {
    "text": "it's going to do multiple things and then it's going to mention operations such as make sure that the CNI binaries",
    "start": "487099",
    "end": "493669"
  },
  {
    "text": "folder exists created it let the CNI in a todo D which is the location for the configuration itself and eventually it's",
    "start": "493669",
    "end": "500930"
  },
  {
    "text": "going to deploy the files and appropriate locations so now that we",
    "start": "500930",
    "end": "507289"
  },
  {
    "text": "have a simple but good understanding of the overview of what CNI plugins is",
    "start": "507289",
    "end": "513260"
  },
  {
    "text": "let's see how it's being used in kubernetes so a new pod is scheduled to",
    "start": "513260",
    "end": "518899"
  },
  {
    "text": "run and then the API server is going to communicate with the cubelet and it's going to give it configuration about the",
    "start": "518899",
    "end": "524630"
  },
  {
    "text": "pod and it's going to tell him to schedule the pod right so the next step that is going to happen if the de cubit",
    "start": "524630",
    "end": "532279"
  },
  {
    "text": "is going to set up the pod nattokinase space can anyone guess our does it okay",
    "start": "532279",
    "end": "539480"
  },
  {
    "text": "so it's going to set up the path container the post container which I assume most of you all of you are",
    "start": "539480",
    "end": "545120"
  },
  {
    "text": "familiar with it has a couple of walls one of them is to maintain this the pod",
    "start": "545120",
    "end": "550790"
  },
  {
    "text": "network namespace and once it is initialized but the same I plug-in it is going to be shared across all the",
    "start": "550790",
    "end": "556279"
  },
  {
    "text": "containers in the pod and then they can properly communicate with whoever they",
    "start": "556279",
    "end": "561350"
  },
  {
    "text": "need to communicate views now at this point the punitiveness space only has",
    "start": "561350",
    "end": "566480"
  },
  {
    "text": "the loopback interface and the next thing that's going to happen is that the",
    "start": "566480",
    "end": "571880"
  },
  {
    "text": "cubit is going to invoke the CNI plugin it's going to tell him there's a new port that I need to set up here that it",
    "start": "571880",
    "end": "578750"
  },
  {
    "text": "was about it and configure it and then the sinner plug-in is going to do multiple things it's going to create the interface the",
    "start": "578750",
    "end": "586579"
  },
  {
    "text": "network interface in the for the pod it's going to allocate appear for it's possibly define some house and do other",
    "start": "586579",
    "end": "592940"
  },
  {
    "text": "network operations and then and then when it is done that the",
    "start": "592940",
    "end": "599650"
  },
  {
    "text": "next place is ready and it's going to be shuttle the cost of the containers and they will properly be using it for other",
    "start": "599650",
    "end": "608980"
  },
  {
    "text": "connectivity so so let's see how the cni",
    "start": "608980",
    "end": "614890"
  },
  {
    "text": "plug-in is been actually used by the cubelets oh so it's going to receive",
    "start": "614890",
    "end": "622110"
  },
  {
    "text": "information in two different forms the first piece of information it receives is the container info stoke-on-trent the",
    "start": "622110",
    "end": "630250"
  },
  {
    "text": "container info will is received by environment variables and it contains",
    "start": "630250",
    "end": "635320"
  },
  {
    "text": "information such as the command in this case add forward in a new container the",
    "start": "635320",
    "end": "641320"
  },
  {
    "text": "container ID which is the unique identifier of the container the net NS which is the path on the disk in the POC",
    "start": "641320",
    "end": "648700"
  },
  {
    "text": "file system for the network namespace of the container and the name of the interface that we wants to assign to",
    "start": "648700",
    "end": "655240"
  },
  {
    "text": "assign to it the single piece of information is the same I config which is essentially all the content of the",
    "start": "655240",
    "end": "662410"
  },
  {
    "text": "center config file that we chose with all the fields the fields that we chose to embed in it and it is as if we are",
    "start": "662410",
    "end": "669070"
  },
  {
    "text": "the standard input at this case at this",
    "start": "669070",
    "end": "674140"
  },
  {
    "text": "point the senior plugin is going to do multiple things and it's going to set up mental interfaces according to the given",
    "start": "674140",
    "end": "681339"
  },
  {
    "text": "spec according to get the given configuration and eventually it's going",
    "start": "681339",
    "end": "686500"
  },
  {
    "text": "to output to the standardout quotes indicating to the couplet the things that you have done such as the list of",
    "start": "686500",
    "end": "692950"
  },
  {
    "text": "of interfaces that it set up the MAC address the name the default gateway the",
    "start": "692950",
    "end": "698470"
  },
  {
    "text": "IPS and so on so let's take a deeper",
    "start": "698470",
    "end": "705100"
  },
  {
    "text": "look at the internals of what the sinner plugin is actually doing so each pod has",
    "start": "705100",
    "end": "712600"
  },
  {
    "text": "its own at work namespace and an easy way to connect the port network no space",
    "start": "712600",
    "end": "718390"
  },
  {
    "text": "to our host is to set up a bridge and collect the pod into the bridge you can",
    "start": "718390",
    "end": "724240"
  },
  {
    "text": "think of the bridge as a physical switch that when you take the port and connecting to it is it's like if you",
    "start": "724240",
    "end": "730510"
  },
  {
    "text": "were taking a wire and connecting it to one of the switch ports so in order to connect it",
    "start": "730510",
    "end": "737339"
  },
  {
    "text": "to the bridge when he was going to create something called the whisper the visible will Charlotte on a device Pearl",
    "start": "737339",
    "end": "742940"
  },
  {
    "text": "is the power of evil choice on a devices that I'll the data created in pearls",
    "start": "742940",
    "end": "751710"
  },
  {
    "text": "there are the inter connected pearls that are basically when were creating",
    "start": "751710",
    "end": "758880"
  },
  {
    "text": "them every packet is sent at one side is immediately received at the other side so the a very good use case for wilt for",
    "start": "758880",
    "end": "769470"
  },
  {
    "text": "those spells in Linux in the scope of containers is that we can take one one",
    "start": "769470",
    "end": "775710"
  },
  {
    "text": "one end of the pair and put it in then in the opponent open space and keep the other end at the at the host network",
    "start": "775710",
    "end": "782100"
  },
  {
    "text": "near space and then they can actually as done as the cosmetic next pieces connecting the pod to the hosts so we",
    "start": "782100",
    "end": "792720"
  },
  {
    "text": "took one end would connect it to the to the pod and the other and we kept in the host connected connecting it to the",
    "start": "792720",
    "end": "798690"
  },
  {
    "text": "bridge and at this point any any packet been sent from the pod is immediately received on the host at the bridge then",
    "start": "798690",
    "end": "808380"
  },
  {
    "text": "at this point most of the work is done every port that is going to be scheduled to learn will will be the scene I plugin",
    "start": "808380",
    "end": "818310"
  },
  {
    "text": "will be called and it will set up the virtual Ethernet devices spell connecting it to the bridge setting up",
    "start": "818310",
    "end": "823410"
  },
  {
    "text": "an IP for the device and then with help of common Linux tools such as IP laws I",
    "start": "823410",
    "end": "829800"
  },
  {
    "text": "beat a basis and another well going to make the make the appropriate outs for",
    "start": "829800",
    "end": "837660"
  },
  {
    "text": "traffic to flow call it to the port and from the pod to other pods in the cluster so now I'm going to get to go",
    "start": "837660",
    "end": "849270"
  },
  {
    "text": "even lower to the technical details so on the right you can see an example for",
    "start": "849270",
    "end": "855540"
  },
  {
    "text": "an environment I have confronted on my laptop that I'm going to use later for the demo it it has two nodes node 1 and",
    "start": "855540",
    "end": "864660"
  },
  {
    "text": "node 2 it's know the both nodes communicating over the NP network interfaces over the",
    "start": "864660",
    "end": "871330"
  },
  {
    "text": "tender 10.8 and when I created the",
    "start": "871330",
    "end": "877330"
  },
  {
    "text": "cluster each node got allocated with some pod address space for the pods that are running on this node so for node 1",
    "start": "877330",
    "end": "884860"
  },
  {
    "text": "it received the patella space to be 10 240 s it was a 24 and similarly for moto",
    "start": "884860",
    "end": "894960"
  },
  {
    "text": "so the config that I need that that I decided to create here is the configured",
    "start": "894960",
    "end": "900790"
  },
  {
    "text": "says that holds the port's either the pole setter for the specific node it's going to be different for every node",
    "start": "900790",
    "end": "907330"
  },
  {
    "text": "that I'm going to connect in Mecosta so the possible will be 10 12 4000 24 this",
    "start": "907330",
    "end": "913360"
  },
  {
    "text": "is the example of the config in node 1 and this is the skeleton for the cni",
    "start": "913360",
    "end": "919200"
  },
  {
    "text": "executable itself so for the rest of the few sides I'm going to focus on the add command so as we said the first thing",
    "start": "919200",
    "end": "928930"
  },
  {
    "text": "that we want to do is to set up the bridge so I'm going to calculate the port side which is by extracting the",
    "start": "928930",
    "end": "936790"
  },
  {
    "text": "config which is ID in the standard input so I'm going to cut this down at the 8 port pass it to the JQ tool which is a",
    "start": "936790",
    "end": "942190"
  },
  {
    "text": "simple tool to manipulate JSON strings in bash I'm going to take the pole setter for me once I have the port side",
    "start": "942190",
    "end": "949540"
  },
  {
    "text": "I'm going to do just some manipulation on it to calculate the gateway address",
    "start": "949540",
    "end": "954640"
  },
  {
    "text": "which is going to be the address of the bridge and then I'm going to use the",
    "start": "954640",
    "end": "960460"
  },
  {
    "text": "bridge Atul's package which contains the bill CTL command line a command line tool to create a bridge I'm going to",
    "start": "960460",
    "end": "966790"
  },
  {
    "text": "create a bridge that is called CNI 0 then I'm going to enable it wing it up and I'm going to set it with the IP of",
    "start": "966790",
    "end": "973270"
  },
  {
    "text": "the port idle gateway so the bridge on the node is going to contain the first appear in the address space of the pod",
    "start": "973270",
    "end": "979180"
  },
  {
    "text": "settles the next thing that I need to do is to create the fit spell so I need to",
    "start": "979180",
    "end": "990010"
  },
  {
    "text": "calculate a name for the random names for the device that is going to reside",
    "start": "990010",
    "end": "995200"
  },
  {
    "text": "on the host because there has to be unique I'm going to use the Italian command to create the pair I'm going to say create",
    "start": "995200",
    "end": "1001750"
  },
  {
    "text": "a whisper with one end called Siena if name which is the name that I was told by the couplet and it's built to be then",
    "start": "1001750",
    "end": "1012160"
  },
  {
    "text": "then the name that I calculated for the host and then I'm going to enable it the",
    "start": "1012160",
    "end": "1018160"
  },
  {
    "text": "next thing that we said that we need to do is to move the eth0 to the coordinate",
    "start": "1018160",
    "end": "1023260"
  },
  {
    "text": "of night space so something was nothing about Network name spaces in Linux is",
    "start": "1023260",
    "end": "1028360"
  },
  {
    "text": "that they exist in two forms the first form is defined by the process and under",
    "start": "1028360",
    "end": "1033670"
  },
  {
    "text": "walk the peed name and been discarded when the process dies and the other form",
    "start": "1033670",
    "end": "1040480"
  },
  {
    "text": "is under of Allen athena's which does name Network no spaces they long-lived",
    "start": "1040480",
    "end": "1045910"
  },
  {
    "text": "they are created and deleted when we decide they are not bound to any process and what's interesting about those",
    "start": "1045910",
    "end": "1053740"
  },
  {
    "text": "Network no spaces is that they can be manipulated using the IP link commands they can be manipulated in a way that we",
    "start": "1053740",
    "end": "1060070"
  },
  {
    "text": "can perform actions inside the network namespace similarly to if we if we do",
    "start": "1060070",
    "end": "1065500"
  },
  {
    "text": "Hugh Cottle exact or doctor exact so we can still manipulate the the network",
    "start": "1065500",
    "end": "1073660"
  },
  {
    "text": "namespace in these cases of the first case that doesn't reside in Van Etten s but if we create the same link into this",
    "start": "1073660",
    "end": "1081070"
  },
  {
    "text": "folder we can still manipulate it using this tool so I'm going to set the seam length of the Sina internals from the",
    "start": "1081070",
    "end": "1088150"
  },
  {
    "text": "poke folder under Vallon 18s and it's going to be called CNI container ID",
    "start": "1088150",
    "end": "1093220"
  },
  {
    "text": "which is the unique name of the container then one once it's there I can perform various actions on it and in",
    "start": "1093220",
    "end": "1101350"
  },
  {
    "text": "this case first I'm going to use the hyperlink command to set it 0 I'm going to set its namespace to be in CNI",
    "start": "1101350",
    "end": "1108550"
  },
  {
    "text": "container ID so in this case at this point it is 0 no besides in the port",
    "start": "1108550",
    "end": "1115600"
  },
  {
    "text": "Network net space it's no longer part of the host network no space then I need to",
    "start": "1115600",
    "end": "1122200"
  },
  {
    "text": "calculate the IEP so you can see in the diagram it's going to be something point",
    "start": "1122200",
    "end": "1127570"
  },
  {
    "text": "2 and well there are many ways to calculate take is from the point of view",
    "start": "1127570",
    "end": "1133900"
  },
  {
    "text": "of the CNI that ready tools such as the DHCP and host local and other means as",
    "start": "1133900",
    "end": "1139990"
  },
  {
    "text": "well I decided to do something that is very simple and is good enough for the",
    "start": "1139990",
    "end": "1145270"
  },
  {
    "text": "sake of this talk which is this I am simply going to use the file that is",
    "start": "1145270",
    "end": "1151059"
  },
  {
    "text": "going to hold it the last IP and I'm incremented by 1 every time update the",
    "start": "1151059",
    "end": "1158049"
  },
  {
    "text": "file and then I have the IP and I can use it and then I'm going to do some other trivial operations the first",
    "start": "1158049",
    "end": "1165669"
  },
  {
    "text": "operation I am going to execute a command in the Palmetto Connect space",
    "start": "1165669",
    "end": "1171130"
  },
  {
    "text": "that pulls the interface up I'm going to assign the IP to it so you can see I'm",
    "start": "1171130",
    "end": "1176650"
  },
  {
    "text": "going to ripen at an exact in the container ID set that IP to the device",
    "start": "1176650",
    "end": "1182710"
  },
  {
    "text": "in I've name which is it it s 0 and lastly I'm going to set the route to be",
    "start": "1182710",
    "end": "1188590"
  },
  {
    "text": "the default gateway which is the blue JP so at this point the Senate plugin is",
    "start": "1188590",
    "end": "1195520"
  },
  {
    "text": "done actually and the the pot is already connected to the bridge and packets",
    "start": "1195520",
    "end": "1201909"
  },
  {
    "text": "flowing from the port or immediately seen in the bridges we simply viously so",
    "start": "1201909",
    "end": "1209220"
  },
  {
    "text": "so a little bit about the demo before we start as you already understand there is",
    "start": "1210150",
    "end": "1216280"
  },
  {
    "text": "no demon implementation in here so we only have the sinner plug-in itself yeah",
    "start": "1216280",
    "end": "1221710"
  },
  {
    "text": "and I'm simply going to deploy a simple",
    "start": "1221710",
    "end": "1227400"
  },
  {
    "text": "three pods that are going to run on both nodes and we'll see what works and what doesn't and for everything that doesn't",
    "start": "1227400",
    "end": "1234250"
  },
  {
    "text": "work essentially in the common use case it's going to be set up by the demon so",
    "start": "1234250",
    "end": "1241799"
  },
  {
    "text": "for the demo we'll just do it by hand so this is the my environment we can see we",
    "start": "1241799",
    "end": "1252100"
  },
  {
    "text": "have two nodes now connected using the internal peer that I showed you earlier and",
    "start": "1252100",
    "end": "1259070"
  },
  {
    "text": "if to see the portside the lines can you",
    "start": "1259070",
    "end": "1269870"
  },
  {
    "text": "see it's good enough on the back it it's good okay yeah so not one got allocated",
    "start": "1269870",
    "end": "1281779"
  },
  {
    "text": "with the posted l to be 10 200 4000 and notes - with a point 1 and a deployment",
    "start": "1281779",
    "end": "1290779"
  },
  {
    "text": "that I'm going to are now she's going to deploy an alpine container that is going to learn or note 1 an engineer's",
    "start": "1290779",
    "end": "1297740"
  },
  {
    "text": "container that is also going to uh no not one and another nginx container or note 2 and I already have the Senate",
    "start": "1297740",
    "end": "1306289"
  },
  {
    "text": "plug-in installed from like before we started this talk so by now expect my",
    "start": "1306289",
    "end": "1312710"
  },
  {
    "text": "pots to already have an IPA assigned yeah okay so all pods all will be",
    "start": "1312710",
    "end": "1318019"
  },
  {
    "text": "running we need the designer plugin was already executed and you can see that the IPS are indeed in implemented by one between",
    "start": "1318019",
    "end": "1325190"
  },
  {
    "text": "them you can see that up and wine is with point 5 and and engineer's point",
    "start": "1325190",
    "end": "1331190"
  },
  {
    "text": "four so I already expect a common simple",
    "start": "1331190",
    "end": "1337730"
  },
  {
    "text": "connectivity to be available from the host to the to the pod because they are already connected so I'll try to",
    "start": "1337730",
    "end": "1344090"
  },
  {
    "text": "communicate with with my nginx and it already is walking but other",
    "start": "1344090",
    "end": "1352970"
  },
  {
    "text": "stuff such as communicating with nginx to is not going to work",
    "start": "1352970",
    "end": "1360700"
  },
  {
    "text": "similarly we can try to communicate form",
    "start": "1361149",
    "end": "1366409"
  },
  {
    "text": "alpine to nginx",
    "start": "1366409",
    "end": "1369370"
  },
  {
    "text": "so what to put a pod to pod communication in the same node is not",
    "start": "1377500",
    "end": "1382780"
  },
  {
    "text": "working and why so the first problem is this every port resides in a different",
    "start": "1382780",
    "end": "1389350"
  },
  {
    "text": "network namespace and traffic flowing from one port to the other from the point of view of our host is considered",
    "start": "1389350",
    "end": "1396280"
  },
  {
    "text": "to be external traffic it's very similar to the case of well you have a router and you have multiple users connected to",
    "start": "1396280",
    "end": "1402460"
  },
  {
    "text": "it and you want to allow although of connect a packets flowing between them",
    "start": "1402460",
    "end": "1409530"
  },
  {
    "text": "in order to packets to allow packets to flow from one pot to the other we need",
    "start": "1409530",
    "end": "1415090"
  },
  {
    "text": "to accept it and wear something in Linux called I so most of you know IP tables",
    "start": "1415090",
    "end": "1421929"
  },
  {
    "text": "and there's the forward chain which is the one responsible for allowing such traffic so if we investigate and look at",
    "start": "1421929",
    "end": "1430720"
  },
  {
    "text": "the full chain consider this we have multiple rules one of them's belongs to docker which is",
    "start": "1430720",
    "end": "1438039"
  },
  {
    "text": "what particular doing something very similar to what we just seen and there",
    "start": "1438039",
    "end": "1443919"
  },
  {
    "text": "is no ruling here that says to allow traffic from our port side erects so",
    "start": "1443919",
    "end": "1449460"
  },
  {
    "text": "let's add one so I'm going to append to the full chain a rule that says that",
    "start": "1449460",
    "end": "1457150"
  },
  {
    "text": "anything that originates form my port side arrange and I don't care about the",
    "start": "1457150",
    "end": "1463179"
  },
  {
    "text": "accuracy I can just say deposited the length of the entire cluster to accept",
    "start": "1463179",
    "end": "1469360"
  },
  {
    "text": "it another thing that is going to any of those IPS also accepted and now expect",
    "start": "1469360",
    "end": "1478780"
  },
  {
    "text": "that this command will walk so we have got to put but okay",
    "start": "1478780",
    "end": "1489179"
  },
  {
    "text": "okay so but what about communication is already walking but we still have a",
    "start": "1489840",
    "end": "1496120"
  },
  {
    "text": "couple of things to fix the next thing that I want to show you let's see that",
    "start": "1496120",
    "end": "1501880"
  },
  {
    "text": "appears again is that communicating with",
    "start": "1501880",
    "end": "1508180"
  },
  {
    "text": "other pots is still not working we can talk from here it's going to be similar if you are going to try from the pot",
    "start": "1508180",
    "end": "1514840"
  },
  {
    "text": "itself it's not going to walk and the reason is that we said that the poles",
    "start": "1514840",
    "end": "1519970"
  },
  {
    "text": "either in each node is known only to it and it's not not known to anyone else and we need to instruct our kernel to",
    "start": "1519970",
    "end": "1528580"
  },
  {
    "text": "say if we have a packet that is going to notes to IP address then routed there",
    "start": "1528580",
    "end": "1535060"
  },
  {
    "text": "are nodes to IP dos itself from its port side to its IP address and the way to do",
    "start": "1535060",
    "end": "1541780"
  },
  {
    "text": "it is with the IP routes tools so we can say I pull out other out the clouds",
    "start": "1541780",
    "end": "1547960"
  },
  {
    "text": "anything going to notes to post at the range which is this we are nodes to IP",
    "start": "1547960",
    "end": "1558250"
  },
  {
    "text": "address using this device which is the deposit are connected with and also I",
    "start": "1558250",
    "end": "1566560"
  },
  {
    "text": "need to do the same relative rule for notes tool which says route anything",
    "start": "1566560",
    "end": "1574270"
  },
  {
    "text": "going to note one possible range we are not one IP address using the same device",
    "start": "1574270",
    "end": "1587340"
  },
  {
    "text": "and now this should walk or not",
    "start": "1588990",
    "end": "1599280"
  },
  {
    "text": "this is AK and I need to apply the",
    "start": "1600370",
    "end": "1606020"
  },
  {
    "text": "foldings four notes to okay so now we have",
    "start": "1606020",
    "end": "1618740"
  },
  {
    "text": "packets flowing from port to port locally and also from port across the",
    "start": "1618740",
    "end": "1623870"
  },
  {
    "text": "cluster itself in the last thing that we want to fix is Internet connectivity so",
    "start": "1623870",
    "end": "1630130"
  },
  {
    "text": "if I'm going to try to for example ping",
    "start": "1630130",
    "end": "1635350"
  },
  {
    "text": "the internet it's not going to walk and why so we need logs we have something",
    "start": "1635350",
    "end": "1643520"
  },
  {
    "text": "called we need to do okay so when we try",
    "start": "1643520",
    "end": "1650930"
  },
  {
    "text": "to send these packets from the container it's going to leave the container with the IP address of the container and when",
    "start": "1650930",
    "end": "1657770"
  },
  {
    "text": "the destination will receive the packet is want to see the IP address of the container which is a private address",
    "start": "1657770",
    "end": "1663680"
  },
  {
    "text": "which it won't know how to deal with or how to reply back the common way to fix",
    "start": "1663680",
    "end": "1670580"
  },
  {
    "text": "this in linux is by using sauce nuts sauce must is a tool that allows us to",
    "start": "1670580",
    "end": "1675650"
  },
  {
    "text": "replace the sauce IP in the packet when it leaves the host so that when the",
    "start": "1675650",
    "end": "1681350"
  },
  {
    "text": "packet leaves the host the host will change the source IP to the host IP and then when the packet is and when the",
    "start": "1681350",
    "end": "1687560"
  },
  {
    "text": "responses arrived arrives back to the host it will replace it back and center the response to the container this is",
    "start": "1687560",
    "end": "1696170"
  },
  {
    "text": "something that is called masquerading and we can apply a rule that says add the rule to the IP tables to the post",
    "start": "1696170",
    "end": "1704330"
  },
  {
    "text": "holding chain which is the last chain that that is going to evaluate outgoing",
    "start": "1704330",
    "end": "1709910"
  },
  {
    "text": "packets that are living our host and I need to add it to the not stable and",
    "start": "1709910",
    "end": "1720030"
  },
  {
    "text": "every packet that is that originates from the pods which is this pot",
    "start": "1720030",
    "end": "1726640"
  },
  {
    "text": "sidelines and it's going out not to the CNI plate meaning that it's going out to",
    "start": "1726640",
    "end": "1732910"
  },
  {
    "text": "the Internet masquerade it meaning apply the sauce",
    "start": "1732910",
    "end": "1739030"
  },
  {
    "text": "nut and then this should walk so usually",
    "start": "1739030",
    "end": "1752140"
  },
  {
    "text": "everything that we did manually now is something that we will do using a",
    "start": "1752140",
    "end": "1757660"
  },
  {
    "text": "diamond set or some sort of deployment or an agent or diamond that is going to run on every node and it's going to do",
    "start": "1757660",
    "end": "1764170"
  },
  {
    "text": "those kind of operations for us when it is running and that's it",
    "start": "1764170",
    "end": "1772930"
  },
  {
    "text": "thank you [Applause]",
    "start": "1772930",
    "end": "1776960"
  },
  {
    "text": "so everything that we've seen the cni plug-in itself and the configuration",
    "start": "1779059",
    "end": "1784980"
  },
  {
    "text": "file and example for the commands that we had to run manually I put it all in this github repository so you can take a",
    "start": "1784980",
    "end": "1791669"
  },
  {
    "text": "look later I would it if you want hey uestions ok thank you thanks for this",
    "start": "1791669",
    "end": "1803669"
  },
  {
    "text": "presentation I was wondering if if when you start with multiple nodes or pods",
    "start": "1803669",
    "end": "1810269"
  },
  {
    "text": "must be started on the same node all the plugins invoked concurrently so what is",
    "start": "1810269",
    "end": "1816809"
  },
  {
    "text": "there some issue if we if multiple parts must be started concurrently if there",
    "start": "1816809",
    "end": "1823799"
  },
  {
    "text": "are some current issue in the put in the salad concurrently the pods",
    "start": "1823799",
    "end": "1829350"
  },
  {
    "text": "you mean if what are going to start concurrently yeah yeah well in this",
    "start": "1829350",
    "end": "1836250"
  },
  {
    "text": "example I'm using the file so both like both executions can possibly eat the",
    "start": "1836250",
    "end": "1843630"
  },
  {
    "text": "same IP maybe but eventually it's going to sort out because if it's if the cinah",
    "start": "1843630",
    "end": "1849690"
  },
  {
    "text": "plugin is going to fail so it simply try to recreate the pod yes it's another",
    "start": "1849690",
    "end": "1856350"
  },
  {
    "text": "simple example so it's things may go on also like I didn't show it but the IP",
    "start": "1856350",
    "end": "1861389"
  },
  {
    "text": "tables that I changed are also manipulated by other tools on my on my bike particulate by so those are going",
    "start": "1861389",
    "end": "1872460"
  },
  {
    "text": "to be like removed after a few seconds or minutes or two because I didn't use a",
    "start": "1872460",
    "end": "1878480"
  },
  {
    "text": "dedicated chain for example",
    "start": "1878480",
    "end": "1882528"
  },
  {
    "text": "hi I'm Jenna deli thank you for the talk and introducing us with writing simple cni plugins so this is like similar to",
    "start": "1893150",
    "end": "1902230"
  },
  {
    "text": "calico right because calico works in a similar way I looked at it like a long",
    "start": "1902230",
    "end": "1907460"
  },
  {
    "text": "time ago but they are also using some route stuff and other things so is this",
    "start": "1907460",
    "end": "1913610"
  },
  {
    "text": "like calico Coleco also works like same right all of them eventually the low",
    "start": "1913610",
    "end": "1919880"
  },
  {
    "text": "level details is going to be similar this way or the other I mean in my other question is so for",
    "start": "1919880",
    "end": "1927530"
  },
  {
    "text": "the service discovery for making the kubernetes services to work is this",
    "start": "1927530",
    "end": "1932750"
  },
  {
    "text": "again some kind of hyper tables magic that we have to play so for first services let's say we expose the pots",
    "start": "1932750",
    "end": "1939500"
  },
  {
    "text": "using a service so what do you think if you want to walk closely because it's a",
    "start": "1939500",
    "end": "1944870"
  },
  {
    "text": "it is not a spot of the same opinion responsibility for I can just expose say",
    "start": "1944870",
    "end": "1952640"
  },
  {
    "text": "my nginx to which port it sounded and",
    "start": "1952640",
    "end": "1958179"
  },
  {
    "text": "the target supposed to be the engine exports and if the words aren't flashed",
    "start": "1958179",
    "end": "1966410"
  },
  {
    "text": "already so it should walk that's cool",
    "start": "1966410",
    "end": "1971929"
  },
  {
    "text": "thanks in your questions okay okay let's thank",
    "start": "1971929",
    "end": "1985200"
  },
  {
    "text": "mr. Iran yeah [Applause]",
    "start": "1985200",
    "end": "1995349"
  }
]