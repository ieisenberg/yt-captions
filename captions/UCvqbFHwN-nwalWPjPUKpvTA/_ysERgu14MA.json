[
  {
    "text": "okay hello everyone I'm John this is my",
    "start": "1850",
    "end": "4790"
  },
  {
    "text": "colleague Ben we work at Yelp and we're",
    "start": "4790",
    "end": "7070"
  },
  {
    "text": "both in the engineering effectiveness",
    "start": "7070",
    "end": "8690"
  },
  {
    "text": "group and we're going to be talking to",
    "start": "8690",
    "end": "10160"
  },
  {
    "text": "you about how we've started using envoy",
    "start": "10160",
    "end": "12289"
  },
  {
    "text": "at Yelp so I want you to imagine you",
    "start": "12289",
    "end": "16039"
  },
  {
    "text": "just got up in the morning you're",
    "start": "16039",
    "end": "17810"
  },
  {
    "text": "staring yourself in the mirror",
    "start": "17810",
    "end": "18980"
  },
  {
    "text": "bleary-eyed as you brush your teeth",
    "start": "18980",
    "end": "21250"
  },
  {
    "text": "maybe you went to bed a little too late",
    "start": "21250",
    "end": "23390"
  },
  {
    "text": "last night you watched one episode too",
    "start": "23390",
    "end": "25519"
  },
  {
    "text": "many of the Great British Bake Off what",
    "start": "25519",
    "end": "28099"
  },
  {
    "text": "are you thinking about you might be",
    "start": "28099",
    "end": "32660"
  },
  {
    "text": "thinking what is the purpose of my",
    "start": "32660",
    "end": "35450"
  },
  {
    "text": "existence and this is a very interesting",
    "start": "35450",
    "end": "39140"
  },
  {
    "text": "question",
    "start": "39140",
    "end": "40010"
  },
  {
    "text": "so please do think it but I'm going to",
    "start": "40010",
    "end": "43280"
  },
  {
    "text": "suggest that as an infrastructure",
    "start": "43280",
    "end": "45289"
  },
  {
    "text": "engineer perhaps there's a more",
    "start": "45289",
    "end": "47300"
  },
  {
    "text": "important question that I might be",
    "start": "47300",
    "end": "49640"
  },
  {
    "text": "asking and that is how can I make",
    "start": "49640",
    "end": "53390"
  },
  {
    "text": "developers happier and I think this is",
    "start": "53390",
    "end": "56899"
  },
  {
    "text": "basically what my job boils down to",
    "start": "56899",
    "end": "58730"
  },
  {
    "text": "keeping other developers at Yelp happy",
    "start": "58730",
    "end": "60559"
  },
  {
    "text": "and so this story is about keeping",
    "start": "60559",
    "end": "64070"
  },
  {
    "text": "developers happy in the context of envoy",
    "start": "64070",
    "end": "68619"
  },
  {
    "text": "so let's talk about develop a penis what",
    "start": "68619",
    "end": "72619"
  },
  {
    "text": "do developers care about I think they",
    "start": "72619",
    "end": "75290"
  },
  {
    "text": "want to quickly ship bug-free code and",
    "start": "75290",
    "end": "77710"
  },
  {
    "text": "if they're doing that this hopefully",
    "start": "77710",
    "end": "80540"
  },
  {
    "text": "means that they can solve customers",
    "start": "80540",
    "end": "82310"
  },
  {
    "text": "problems on your land what a developers",
    "start": "82310",
    "end": "86570"
  },
  {
    "text": "not so interested about well often you",
    "start": "86570",
    "end": "91220"
  },
  {
    "text": "really don't care about setting timeout",
    "start": "91220",
    "end": "92780"
  },
  {
    "text": "values people come to me they say John",
    "start": "92780",
    "end": "94939"
  },
  {
    "text": "should I be using 200 milliseconds or",
    "start": "94939",
    "end": "96590"
  },
  {
    "text": "400 milliseconds I just don't know and",
    "start": "96590",
    "end": "98149"
  },
  {
    "text": "I'm like I don't really know either like",
    "start": "98149",
    "end": "99950"
  },
  {
    "text": "I wish you could just ship your code but",
    "start": "99950",
    "end": "102140"
  },
  {
    "text": "yeah let's figure this one out",
    "start": "102140",
    "end": "103130"
  },
  {
    "text": "it slows them down they also",
    "start": "103130",
    "end": "106430"
  },
  {
    "text": "unfortunately do not tend to care about",
    "start": "106430",
    "end": "109460"
  },
  {
    "text": "new RPC technologies I find the",
    "start": "109460",
    "end": "112700"
  },
  {
    "text": "differences between proto 2 and proto",
    "start": "112700",
    "end": "114560"
  },
  {
    "text": "three very interesting as sure many of",
    "start": "114560",
    "end": "116810"
  },
  {
    "text": "you do - unfortunately not everybody",
    "start": "116810",
    "end": "119479"
  },
  {
    "text": "shares that enthusiasm they just want to",
    "start": "119479",
    "end": "121789"
  },
  {
    "text": "ship code okay so with that in mind",
    "start": "121789",
    "end": "125780"
  },
  {
    "text": "let's look at our first service mesh",
    "start": "125780",
    "end": "127729"
  },
  {
    "text": "architecture at Yelp",
    "start": "127729",
    "end": "130649"
  },
  {
    "text": "so we were using this up until about",
    "start": "130649",
    "end": "133430"
  },
  {
    "text": "2014 I call this let's just manually",
    "start": "133430",
    "end": "136319"
  },
  {
    "text": "configure a che proxy and at that time",
    "start": "136319",
    "end": "142530"
  },
  {
    "text": "most code lived in a Python monolith on",
    "start": "142530",
    "end": "146069"
  },
  {
    "text": "the left and we also had a handful of",
    "start": "146069",
    "end": "149879"
  },
  {
    "text": "services on the right search service and",
    "start": "149879",
    "end": "152730"
  },
  {
    "text": "geocoding service shown here and our",
    "start": "152730",
    "end": "156780"
  },
  {
    "text": "monolith communicated with these",
    "start": "156780",
    "end": "158519"
  },
  {
    "text": "services using a single redundantly",
    "start": "158519",
    "end": "160620"
  },
  {
    "text": "provisioned h a proxy instance data",
    "start": "160620",
    "end": "163109"
  },
  {
    "text": "center so let's return back to that and",
    "start": "163109",
    "end": "166590"
  },
  {
    "text": "develop a happiness question what's",
    "start": "166590",
    "end": "168660"
  },
  {
    "text": "working well here well developers can",
    "start": "168660",
    "end": "172530"
  },
  {
    "text": "write services that's a big deal",
    "start": "172530",
    "end": "174890"
  },
  {
    "text": "which means they can quickly ship their",
    "start": "174890",
    "end": "177150"
  },
  {
    "text": "bug free code",
    "start": "177150",
    "end": "179659"
  },
  {
    "text": "what's not working so well ok so this is",
    "start": "179659",
    "end": "184920"
  },
  {
    "text": "an email from infrastructure engineer",
    "start": "184920",
    "end": "186780"
  },
  {
    "text": "saying that they've just manually",
    "start": "186780",
    "end": "188370"
  },
  {
    "text": "changed yes the H a proxy config to add",
    "start": "188370",
    "end": "190890"
  },
  {
    "text": "some new servers and they're going to",
    "start": "190890",
    "end": "193560"
  },
  {
    "text": "reload that H a proxy instance which is",
    "start": "193560",
    "end": "196739"
  },
  {
    "text": "going to cause some user visible errors",
    "start": "196739",
    "end": "199260"
  },
  {
    "text": "sorry so why is this gonna make",
    "start": "199260",
    "end": "201900"
  },
  {
    "text": "developers unhappy well firstly",
    "start": "201900",
    "end": "204650"
  },
  {
    "text": "developers are unhappy any time they're",
    "start": "204650",
    "end": "206819"
  },
  {
    "text": "waiting on another person to do",
    "start": "206819",
    "end": "208260"
  },
  {
    "text": "something for them because this slows",
    "start": "208260",
    "end": "209700"
  },
  {
    "text": "them down that's a pretty universal",
    "start": "209700",
    "end": "211560"
  },
  {
    "text": "truth and secondly developers aren't",
    "start": "211560",
    "end": "214230"
  },
  {
    "text": "happy any time they have to acknowledge",
    "start": "214230",
    "end": "215459"
  },
  {
    "text": "alerts because you know they were",
    "start": "215459",
    "end": "217049"
  },
  {
    "text": "writing code trying to solve customers",
    "start": "217049",
    "end": "218819"
  },
  {
    "text": "problems and now there's an alert going",
    "start": "218819",
    "end": "220349"
  },
  {
    "text": "off so they need to contact switch and",
    "start": "220349",
    "end": "222060"
  },
  {
    "text": "so this kind of makes them happy let's",
    "start": "222060",
    "end": "226260"
  },
  {
    "text": "look at another source of unhappiness so",
    "start": "226260",
    "end": "228889"
  },
  {
    "text": "there's a ticket",
    "start": "228889",
    "end": "230579"
  },
  {
    "text": "that's documenting an issue whereby",
    "start": "230579",
    "end": "233129"
  },
  {
    "text": "we're hitting capacity limitations on",
    "start": "233129",
    "end": "235680"
  },
  {
    "text": "our single H a proxy instance and this",
    "start": "235680",
    "end": "239549"
  },
  {
    "text": "is causing 20 plus seconds of latency in",
    "start": "239549",
    "end": "242760"
  },
  {
    "text": "one of our data centers so like well",
    "start": "242760",
    "end": "245220"
  },
  {
    "text": "quickly go on to our other data center",
    "start": "245220",
    "end": "247049"
  },
  {
    "text": "and why does this make developers",
    "start": "247049",
    "end": "250019"
  },
  {
    "text": "unhappy well again they were writing",
    "start": "250019",
    "end": "252060"
  },
  {
    "text": "code trying to solve customers problems",
    "start": "252060",
    "end": "253919"
  },
  {
    "text": "and then suddenly every single service",
    "start": "253919",
    "end": "256019"
  },
  {
    "text": "is alerting and so they're all drawn",
    "start": "256019",
    "end": "258269"
  },
  {
    "text": "away from what they were doing and have",
    "start": "258269",
    "end": "259590"
  },
  {
    "text": "to focus on these issues",
    "start": "259590",
    "end": "262729"
  },
  {
    "text": "okay so it was pretty clear to us that",
    "start": "263290",
    "end": "267260"
  },
  {
    "text": "our manually configured centralized",
    "start": "267260",
    "end": "269630"
  },
  {
    "text": "service mesh was making developers a",
    "start": "269630",
    "end": "272780"
  },
  {
    "text": "little unhappy and I'd heard about",
    "start": "272780",
    "end": "275900"
  },
  {
    "text": "finagle in particular the zookeeper",
    "start": "275900",
    "end": "278480"
  },
  {
    "text": "based service discovery and client-side",
    "start": "278480",
    "end": "280160"
  },
  {
    "text": "routing and I thought this could solve",
    "start": "280160",
    "end": "282230"
  },
  {
    "text": "these problems for us the problem being",
    "start": "282230",
    "end": "285890"
  },
  {
    "text": "with this that finagle only works on a",
    "start": "285890",
    "end": "288710"
  },
  {
    "text": "JVM and we're running lots of Python",
    "start": "288710",
    "end": "291710"
  },
  {
    "text": "services so what i do is i prototyped an",
    "start": "291710",
    "end": "294710"
  },
  {
    "text": "in process python version of finagle and",
    "start": "294710",
    "end": "298450"
  },
  {
    "text": "shipped it to production and the website",
    "start": "298450",
    "end": "300770"
  },
  {
    "text": "fell over because python does not work",
    "start": "300770",
    "end": "304669"
  },
  {
    "text": "very well with threading okay there must",
    "start": "304669",
    "end": "307940"
  },
  {
    "text": "be a better way of doing this so we",
    "start": "307940",
    "end": "313970"
  },
  {
    "text": "started thinking about building a",
    "start": "313970",
    "end": "315169"
  },
  {
    "text": "sidecar process to perform service",
    "start": "315169",
    "end": "317000"
  },
  {
    "text": "registration and then in October 2013",
    "start": "317000",
    "end": "320890"
  },
  {
    "text": "Airbnb announced smart stack which does",
    "start": "320890",
    "end": "323690"
  },
  {
    "text": "this for us so we evaluated it and we",
    "start": "323690",
    "end": "326510"
  },
  {
    "text": "found that it did promise a big",
    "start": "326510",
    "end": "328760"
  },
  {
    "text": "improvement over our first service mesh",
    "start": "328760",
    "end": "330650"
  },
  {
    "text": "so we started using it and we've been",
    "start": "330650",
    "end": "333410"
  },
  {
    "text": "successfully using it for the past four",
    "start": "333410",
    "end": "335479"
  },
  {
    "text": "years so for those of you who haven't",
    "start": "335479",
    "end": "340130"
  },
  {
    "text": "seen it before I'm just going to give a",
    "start": "340130",
    "end": "341300"
  },
  {
    "text": "quick overview of the smart stack",
    "start": "341300",
    "end": "343850"
  },
  {
    "text": "architecture and then Ben is going to",
    "start": "343850",
    "end": "346130"
  },
  {
    "text": "talk about how he changed it shortly so",
    "start": "346130",
    "end": "349070"
  },
  {
    "text": "let's talk about the control plane first",
    "start": "349070",
    "end": "350560"
  },
  {
    "text": "so at the top right you've got this",
    "start": "350560",
    "end": "353960"
  },
  {
    "text": "nerve process that's health checking a",
    "start": "353960",
    "end": "355790"
  },
  {
    "text": "couple of service instances and if",
    "start": "355790",
    "end": "358400"
  },
  {
    "text": "they're healthy it registers those in",
    "start": "358400",
    "end": "360500"
  },
  {
    "text": "zookeeper and top left on another host",
    "start": "360500",
    "end": "364520"
  },
  {
    "text": "you've got this synapse instance and all",
    "start": "364520",
    "end": "367340"
  },
  {
    "text": "it's doing is getting these push based",
    "start": "367340",
    "end": "369380"
  },
  {
    "text": "notifications from zookeeper and",
    "start": "369380",
    "end": "371590"
  },
  {
    "text": "configuring a local H a proxy instance",
    "start": "371590",
    "end": "375080"
  },
  {
    "text": "and then over on the data plane you've",
    "start": "375080",
    "end": "379760"
  },
  {
    "text": "got clients and their interface to the",
    "start": "379760",
    "end": "382070"
  },
  {
    "text": "network is just H a proxy that's all",
    "start": "382070",
    "end": "384620"
  },
  {
    "text": "they're talking to an H a proxy is",
    "start": "384620",
    "end": "386419"
  },
  {
    "text": "routing to whatever service instances",
    "start": "386419",
    "end": "388910"
  },
  {
    "text": "it's been configured with and this is",
    "start": "388910",
    "end": "391910"
  },
  {
    "text": "the basic design and it works really",
    "start": "391910",
    "end": "394520"
  },
  {
    "text": "well I'm going to say that again it",
    "start": "394520",
    "end": "396289"
  },
  {
    "text": "works",
    "start": "396289",
    "end": "396910"
  },
  {
    "text": "well so in particular it allows us to",
    "start": "396910",
    "end": "402190"
  },
  {
    "text": "reliably get bits across the wire no",
    "start": "402190",
    "end": "405340"
  },
  {
    "text": "more waiting on humans to configure",
    "start": "405340",
    "end": "406810"
  },
  {
    "text": "those load balancers no more alert",
    "start": "406810",
    "end": "408850"
  },
  {
    "text": "floods every time a load balancer config",
    "start": "408850",
    "end": "410680"
  },
  {
    "text": "changes once you've figured out how to",
    "start": "410680",
    "end": "412150"
  },
  {
    "text": "do zero downtime H a proxy restarts",
    "start": "412150",
    "end": "414340"
  },
  {
    "text": "which is another story",
    "start": "414340",
    "end": "415390"
  },
  {
    "text": "and no more scaling problems to a first",
    "start": "415390",
    "end": "418870"
  },
  {
    "text": "approximation so let's get back to that",
    "start": "418870",
    "end": "422740"
  },
  {
    "text": "what makes developers sad we've kind of",
    "start": "422740",
    "end": "426040"
  },
  {
    "text": "solved most of the problems there so we",
    "start": "426040",
    "end": "428980"
  },
  {
    "text": "had to think a little harder maybe our",
    "start": "428980",
    "end": "430600"
  },
  {
    "text": "job was done maybe not so we about a",
    "start": "430600",
    "end": "433540"
  },
  {
    "text": "year ago we started talking to",
    "start": "433540",
    "end": "434830"
  },
  {
    "text": "developers we asked them what was",
    "start": "434830",
    "end": "436300"
  },
  {
    "text": "slowing them down and we came up with a",
    "start": "436300",
    "end": "440260"
  },
  {
    "text": "list and I'm gonna show you our",
    "start": "440260",
    "end": "441940"
  },
  {
    "text": "particular list maybe your list is",
    "start": "441940",
    "end": "443500"
  },
  {
    "text": "different so here a bunch of things that",
    "start": "443500",
    "end": "448510"
  },
  {
    "text": "we got from discussions with our",
    "start": "448510",
    "end": "450160"
  },
  {
    "text": "developers along with some scores if you",
    "start": "450160",
    "end": "453340"
  },
  {
    "text": "went through the same exercise you'd",
    "start": "453340",
    "end": "454600"
  },
  {
    "text": "probably come up with a different list",
    "start": "454600",
    "end": "455740"
  },
  {
    "text": "with different scores and let's just",
    "start": "455740",
    "end": "458080"
  },
  {
    "text": "focus on the things on the left the",
    "start": "458080",
    "end": "461890"
  },
  {
    "text": "descriptions so developers said that",
    "start": "461890",
    "end": "463600"
  },
  {
    "text": "they'd really quite like some",
    "start": "463600",
    "end": "465190"
  },
  {
    "text": "standardized circuit breaking retrying",
    "start": "465190",
    "end": "467050"
  },
  {
    "text": "and time outs they were tired of having",
    "start": "467050",
    "end": "469060"
  },
  {
    "text": "to figure out those values themselves",
    "start": "469060",
    "end": "470170"
  },
  {
    "text": "they wanted us infrastructure engineers",
    "start": "470170",
    "end": "472060"
  },
  {
    "text": "to take care of those problems for them",
    "start": "472060",
    "end": "473590"
  },
  {
    "text": "okay they also wanted some dynamic",
    "start": "473590",
    "end": "477250"
  },
  {
    "text": "request routing features so that they",
    "start": "477250",
    "end": "479560"
  },
  {
    "text": "could for example deploy services into",
    "start": "479560",
    "end": "481720"
  },
  {
    "text": "production and just test them out",
    "start": "481720",
    "end": "483640"
  },
  {
    "text": "themselves before exposing them to",
    "start": "483640",
    "end": "485380"
  },
  {
    "text": "everyone else they also talked about",
    "start": "485380",
    "end": "488560"
  },
  {
    "text": "some rate limiting fault injection and",
    "start": "488560",
    "end": "492250"
  },
  {
    "text": "permissioning so now let's zoom in on",
    "start": "492250",
    "end": "497050"
  },
  {
    "text": "one of these don't dynamit request",
    "start": "497050",
    "end": "499120"
  },
  {
    "text": "routing and we've given it a score of 70",
    "start": "499120",
    "end": "503290"
  },
  {
    "text": "so I'm just going to tell you how we",
    "start": "503290",
    "end": "504490"
  },
  {
    "text": "reach that score so basically it's a",
    "start": "504490",
    "end": "507550"
  },
  {
    "text": "weighted sum of factors some positive",
    "start": "507550",
    "end": "509650"
  },
  {
    "text": "and some negative and there's nothing",
    "start": "509650",
    "end": "513039"
  },
  {
    "text": "special about these factors but we felt",
    "start": "513039",
    "end": "514719"
  },
  {
    "text": "that they were important to our",
    "start": "514719",
    "end": "516490"
  },
  {
    "text": "organization and and we also wanted to",
    "start": "516490",
    "end": "519729"
  },
  {
    "text": "be a little principled about this",
    "start": "519729",
    "end": "521620"
  },
  {
    "text": "exercise so let's start with the",
    "start": "521620",
    "end": "523960"
  },
  {
    "text": "positive factors",
    "start": "523960",
    "end": "525150"
  },
  {
    "text": "what's good about dynamic requests",
    "start": "525150",
    "end": "527740"
  },
  {
    "text": "routing well developer happiness we",
    "start": "527740",
    "end": "529990"
  },
  {
    "text": "score three",
    "start": "529990",
    "end": "530590"
  },
  {
    "text": "out of three we think there's a big win",
    "start": "530590",
    "end": "532330"
  },
  {
    "text": "for developers from this and there are",
    "start": "532330",
    "end": "534880"
  },
  {
    "text": "also high benefits from developer",
    "start": "534880",
    "end": "537190"
  },
  {
    "text": "velocity and also a little bit positive",
    "start": "537190",
    "end": "539530"
  },
  {
    "text": "on stability and operational costs but",
    "start": "539530",
    "end": "542230"
  },
  {
    "text": "as all of us know whenever we make a",
    "start": "542230",
    "end": "543940"
  },
  {
    "text": "change there's also some downsides so we",
    "start": "543940",
    "end": "546460"
  },
  {
    "text": "tried to capture those as well so what",
    "start": "546460",
    "end": "550450"
  },
  {
    "text": "are the negative effects to the business",
    "start": "550450",
    "end": "551860"
  },
  {
    "text": "well we thought it was pretty risky if",
    "start": "551860",
    "end": "554260"
  },
  {
    "text": "we were to implement this thing",
    "start": "554260",
    "end": "556140"
  },
  {
    "text": "potentially we could bring the website",
    "start": "556140",
    "end": "558100"
  },
  {
    "text": "down and we also thought it was",
    "start": "558100",
    "end": "559660"
  },
  {
    "text": "difficult so that was how we arrived",
    "start": "559660",
    "end": "561670"
  },
  {
    "text": "with our score so we identified a bunch",
    "start": "561670",
    "end": "570280"
  },
  {
    "text": "of problems and then we went looking for",
    "start": "570280",
    "end": "572590"
  },
  {
    "text": "ways that we could solve them and we",
    "start": "572590",
    "end": "575740"
  },
  {
    "text": "realized that a lot of these problems",
    "start": "575740",
    "end": "577510"
  },
  {
    "text": "could be addressed by building a smarter",
    "start": "577510",
    "end": "579790"
  },
  {
    "text": "service mesh so we evaluated the",
    "start": "579790",
    "end": "583240"
  },
  {
    "text": "available options here we firstly",
    "start": "583240",
    "end": "586570"
  },
  {
    "text": "considered extending H a proxy we'd",
    "start": "586570",
    "end": "588730"
  },
  {
    "text": "already written some custom Lua script",
    "start": "588730",
    "end": "590530"
  },
  {
    "text": "plugins to do fault injection we thought",
    "start": "590530",
    "end": "592480"
  },
  {
    "text": "we kind of knew it pretty well maybe we",
    "start": "592480",
    "end": "594220"
  },
  {
    "text": "could even start hacking on the C code",
    "start": "594220",
    "end": "595630"
  },
  {
    "text": "we seriously considered this another",
    "start": "595630",
    "end": "598420"
  },
  {
    "text": "option is we'd heard of this upstart",
    "start": "598420",
    "end": "600070"
  },
  {
    "text": "called envoy and we thought it looked",
    "start": "600070",
    "end": "601420"
  },
  {
    "text": "pretty interesting maybe that was worth",
    "start": "601420",
    "end": "603250"
  },
  {
    "text": "a look and there was also linker D we",
    "start": "603250",
    "end": "606160"
  },
  {
    "text": "also pretty seriously considered that",
    "start": "606160",
    "end": "607960"
  },
  {
    "text": "and cutting a long story short we picked",
    "start": "607960",
    "end": "612640"
  },
  {
    "text": "envoy which is why we're here and with",
    "start": "612640",
    "end": "615700"
  },
  {
    "text": "that I'm going to hand you over to Ben",
    "start": "615700",
    "end": "617200"
  },
  {
    "text": "who's going to talk to you about our",
    "start": "617200",
    "end": "618730"
  },
  {
    "text": "move to envoy thanks John so we knew at",
    "start": "618730",
    "end": "624760"
  },
  {
    "text": "this point we knew that we wanted to go",
    "start": "624760",
    "end": "626140"
  },
  {
    "text": "to envoy there were a lot of features",
    "start": "626140",
    "end": "627550"
  },
  {
    "text": "that our developers were going to",
    "start": "627550",
    "end": "629440"
  },
  {
    "text": "benefit greatly from but we knew that",
    "start": "629440",
    "end": "632290"
  },
  {
    "text": "there was a lot of risk so John showed",
    "start": "632290",
    "end": "635920"
  },
  {
    "text": "you this slide earlier we know that",
    "start": "635920",
    "end": "638710"
  },
  {
    "text": "there are some things that developers",
    "start": "638710",
    "end": "639880"
  },
  {
    "text": "like and developers don't like but we",
    "start": "639880",
    "end": "642040"
  },
  {
    "text": "actually missed one here and that is",
    "start": "642040",
    "end": "645220"
  },
  {
    "text": "that developers hate getting woken up in",
    "start": "645220",
    "end": "647350"
  },
  {
    "text": "the middle of the night because their",
    "start": "647350",
    "end": "648460"
  },
  {
    "text": "service mesh broke so infrastructure",
    "start": "648460",
    "end": "651280"
  },
  {
    "text": "development is inherently risky that's",
    "start": "651280",
    "end": "653110"
  },
  {
    "text": "there's no getting around that not with",
    "start": "653110",
    "end": "655180"
  },
  {
    "text": "any cloud native technologies it's just",
    "start": "655180",
    "end": "657850"
  },
  {
    "text": "risky most developers I would venture to",
    "start": "657850",
    "end": "661210"
  },
  {
    "text": "say would probably rather have you know",
    "start": "661210",
    "end": "664150"
  },
  {
    "text": "to change anything than to break it by",
    "start": "664150",
    "end": "666460"
  },
  {
    "text": "upgrading to the newest shiny thing but",
    "start": "666460",
    "end": "669220"
  },
  {
    "text": "we also know that envoy is gonna make",
    "start": "669220",
    "end": "671110"
  },
  {
    "text": "their lives better so how do we rectify",
    "start": "671110",
    "end": "673390"
  },
  {
    "text": "these two and we took a page from that",
    "start": "673390",
    "end": "677940"
  },
  {
    "text": "from the software development world and",
    "start": "677940",
    "end": "680440"
  },
  {
    "text": "try to apply the agile technique so I'm",
    "start": "680440",
    "end": "682930"
  },
  {
    "text": "gonna talk for a little bit about how we",
    "start": "682930",
    "end": "685210"
  },
  {
    "text": "rolled out envoy using agile techniques",
    "start": "685210",
    "end": "687640"
  },
  {
    "text": "and I'm gonna specifically talk about",
    "start": "687640",
    "end": "689550"
  },
  {
    "text": "incremental development the idea of cut",
    "start": "689550",
    "end": "692170"
  },
  {
    "text": "points and CI and CD so let's first talk",
    "start": "692170",
    "end": "696580"
  },
  {
    "text": "about incremental development so John",
    "start": "696580",
    "end": "700030"
  },
  {
    "text": "showed you this smart stack architecture",
    "start": "700030",
    "end": "701860"
  },
  {
    "text": "before and honestly oftentimes the",
    "start": "701860",
    "end": "705190"
  },
  {
    "text": "temptation is to just rip this whole",
    "start": "705190",
    "end": "707230"
  },
  {
    "text": "thing out and replace it with the thing",
    "start": "707230",
    "end": "709270"
  },
  {
    "text": "that everybody else is using so maybe",
    "start": "709270",
    "end": "711280"
  },
  {
    "text": "that's kubernetes with this teo or",
    "start": "711280",
    "end": "712990"
  },
  {
    "text": "whatever but that's really disruptive",
    "start": "712990",
    "end": "715600"
  },
  {
    "text": "and that makes developers unhappy and we",
    "start": "715600",
    "end": "717610"
  },
  {
    "text": "don't want to do that so the new",
    "start": "717610",
    "end": "719800"
  },
  {
    "text": "architecture that we came up with which",
    "start": "719800",
    "end": "721480"
  },
  {
    "text": "was an incremental improvement over this",
    "start": "721480",
    "end": "723520"
  },
  {
    "text": "is this so I'm just gonna flip back and",
    "start": "723520",
    "end": "726550"
  },
  {
    "text": "forth to see if you can spot the",
    "start": "726550",
    "end": "727810"
  },
  {
    "text": "difference they're old and new old new",
    "start": "727810",
    "end": "732060"
  },
  {
    "text": "and yeah it's just this we basically",
    "start": "732060",
    "end": "735190"
  },
  {
    "text": "replaced one part of the control plane",
    "start": "735190",
    "end": "736960"
  },
  {
    "text": "and we replaced the proxy with Envoy so",
    "start": "736960",
    "end": "741130"
  },
  {
    "text": "our long term goal is to go to this",
    "start": "741130",
    "end": "743410"
  },
  {
    "text": "ideal infrastructure you know kubernetes",
    "start": "743410",
    "end": "746860"
  },
  {
    "text": "st or whatever but we need to make",
    "start": "746860",
    "end": "749080"
  },
  {
    "text": "incremental improvements so I'm gonna",
    "start": "749080",
    "end": "752440"
  },
  {
    "text": "take a quick detour to talk about our",
    "start": "752440",
    "end": "755080"
  },
  {
    "text": "control plane I don't want to go into",
    "start": "755080",
    "end": "757030"
  },
  {
    "text": "too much detail because I feel like it's",
    "start": "757030",
    "end": "758890"
  },
  {
    "text": "very similar to other control planes but",
    "start": "758890",
    "end": "761350"
  },
  {
    "text": "why did we write our own we could have",
    "start": "761350",
    "end": "764110"
  },
  {
    "text": "used an existing one we could have used",
    "start": "764110",
    "end": "765400"
  },
  {
    "text": "Java control plane or go control plane",
    "start": "765400",
    "end": "767260"
  },
  {
    "text": "but we didn't we're more comfortable in",
    "start": "767260",
    "end": "770050"
  },
  {
    "text": "Python and we like flat files so this is",
    "start": "770050",
    "end": "774460"
  },
  {
    "text": "it it's pretty much pulls this mesti",
    "start": "774460",
    "end": "777490"
  },
  {
    "text": "thing is less than a thousand lines of",
    "start": "777490",
    "end": "778780"
  },
  {
    "text": "code it pulls service registration data",
    "start": "778780",
    "end": "781390"
  },
  {
    "text": "from zookeeper pulls some manifest e",
    "start": "781390",
    "end": "783910"
  },
  {
    "text": "type of stuff from flat files writes out",
    "start": "783910",
    "end": "786610"
  },
  {
    "text": "some flat files in XC s format not void",
    "start": "786610",
    "end": "788530"
  },
  {
    "text": "reads it it's really really simple",
    "start": "788530",
    "end": "791110"
  },
  {
    "text": "and we do plan on you know going to some",
    "start": "791110",
    "end": "793149"
  },
  {
    "text": "G RPC system or whatever but but this is",
    "start": "793149",
    "end": "795820"
  },
  {
    "text": "the the simplest incremental improvement",
    "start": "795820",
    "end": "797830"
  },
  {
    "text": "that we could have made and at this",
    "start": "797830",
    "end": "802300"
  },
  {
    "text": "point we had some sort of control plane",
    "start": "802300",
    "end": "804490"
  },
  {
    "text": "we could have tried to get to a feature",
    "start": "804490",
    "end": "806080"
  },
  {
    "text": "parity with our existing system we",
    "start": "806080",
    "end": "807490"
  },
  {
    "text": "actually have a ton of features in our",
    "start": "807490",
    "end": "808690"
  },
  {
    "text": "existing system we built in like fault",
    "start": "808690",
    "end": "810760"
  },
  {
    "text": "injection and chaos testing and all that",
    "start": "810760",
    "end": "813279"
  },
  {
    "text": "stuff in our existing system we could",
    "start": "813279",
    "end": "814930"
  },
  {
    "text": "have gone to feature parity but that's",
    "start": "814930",
    "end": "816339"
  },
  {
    "text": "really risky so the idea of a tracer",
    "start": "816339",
    "end": "819760"
  },
  {
    "text": "bullet comes comes into play here and a",
    "start": "819760",
    "end": "821980"
  },
  {
    "text": "tracer bullet is getting a narrow use",
    "start": "821980",
    "end": "823720"
  },
  {
    "text": "case solved end to end so you might be",
    "start": "823720",
    "end": "828190"
  },
  {
    "text": "familiar with this page this is kind of",
    "start": "828190",
    "end": "829600"
  },
  {
    "text": "like a business page on Yelp and if we",
    "start": "829600",
    "end": "834430"
  },
  {
    "text": "were to try to migrate all of this",
    "start": "834430",
    "end": "836740"
  },
  {
    "text": "traffic this is pretty complex there's a",
    "start": "836740",
    "end": "838720"
  },
  {
    "text": "lot of things going on here and if we",
    "start": "838720",
    "end": "840700"
  },
  {
    "text": "were trying to try to get all of this",
    "start": "840700",
    "end": "842589"
  },
  {
    "text": "through envoy it would have taken a very",
    "start": "842589",
    "end": "844570"
  },
  {
    "text": "long time and would have been very risky",
    "start": "844570",
    "end": "846279"
  },
  {
    "text": "so what we did instead was we just",
    "start": "846279",
    "end": "849070"
  },
  {
    "text": "picked one little part this little ask",
    "start": "849070",
    "end": "850630"
  },
  {
    "text": "the community part and within a quarter",
    "start": "850630",
    "end": "853600"
  },
  {
    "text": "using incremental development we were",
    "start": "853600",
    "end": "855459"
  },
  {
    "text": "able to get this up and running routing",
    "start": "855459",
    "end": "857380"
  },
  {
    "text": "through envoy so we did a very simple",
    "start": "857380",
    "end": "859930"
  },
  {
    "text": "thing and to end very quickly and as a",
    "start": "859930",
    "end": "863410"
  },
  {
    "text": "bonus if this fails we have some users",
    "start": "863410",
    "end": "866290"
  },
  {
    "text": "and some developers that are mad at us",
    "start": "866290",
    "end": "868149"
  },
  {
    "text": "but it's not likely to take down the",
    "start": "868149",
    "end": "869920"
  },
  {
    "text": "whole site so some key takeaways about",
    "start": "869920",
    "end": "874240"
  },
  {
    "text": "incremental development make small",
    "start": "874240",
    "end": "875980"
  },
  {
    "text": "changes rather than large overhauls",
    "start": "875980",
    "end": "878970"
  },
  {
    "text": "you shouldn't ever break anything well",
    "start": "878970",
    "end": "882700"
  },
  {
    "text": "that's a pretty broad statement but each",
    "start": "882700",
    "end": "886060"
  },
  {
    "text": "version should be usable and yeah don't",
    "start": "886060",
    "end": "888820"
  },
  {
    "text": "try to solve every use case immediately",
    "start": "888820",
    "end": "890890"
  },
  {
    "text": "if you can use tracer bullets and so the",
    "start": "890890",
    "end": "895120"
  },
  {
    "text": "next thing I want to talk about is the",
    "start": "895120",
    "end": "896230"
  },
  {
    "text": "idea of this cut points but first I'm",
    "start": "896230",
    "end": "900490"
  },
  {
    "text": "going to take a quick digression to",
    "start": "900490",
    "end": "901870"
  },
  {
    "text": "client libraries and you'll see why in a",
    "start": "901870",
    "end": "903399"
  },
  {
    "text": "second so to talk to a service at Yelp",
    "start": "903399",
    "end": "906130"
  },
  {
    "text": "you can just use curl that's our",
    "start": "906130",
    "end": "908560"
  },
  {
    "text": "developers like that but you can also",
    "start": "908560",
    "end": "910420"
  },
  {
    "text": "use a client library and this is",
    "start": "910420",
    "end": "911980"
  },
  {
    "text": "generally what people use so a client",
    "start": "911980",
    "end": "914019"
  },
  {
    "text": "libraries generated from an API spec we",
    "start": "914019",
    "end": "916060"
  },
  {
    "text": "have a client libraries in different",
    "start": "916060",
    "end": "917680"
  },
  {
    "text": "languages I'm sure this is a familiar",
    "start": "917680",
    "end": "919420"
  },
  {
    "text": "concept here's the actual code example",
    "start": "919420",
    "end": "922779"
  },
  {
    "text": "if you want to talk to an example happy",
    "start": "922779",
    "end": "924220"
  },
  {
    "text": "hour serve",
    "start": "924220",
    "end": "925190"
  },
  {
    "text": "you instantiate it and you make an RPC",
    "start": "925190",
    "end": "927620"
  },
  {
    "text": "call just like that we've done a huge",
    "start": "927620",
    "end": "929750"
  },
  {
    "text": "amount of work to get people on client",
    "start": "929750",
    "end": "931370"
  },
  {
    "text": "libraries and we have a similar one for",
    "start": "931370",
    "end": "933230"
  },
  {
    "text": "databases we have this in a few",
    "start": "933230",
    "end": "934790"
  },
  {
    "text": "different languages but I know what",
    "start": "934790",
    "end": "937460"
  },
  {
    "text": "you're thinking isn't envoy supposed to",
    "start": "937460",
    "end": "939530"
  },
  {
    "text": "replace client libraries or maybe",
    "start": "939530",
    "end": "941030"
  },
  {
    "text": "replace a lot of it so it's all about",
    "start": "941030",
    "end": "943760"
  },
  {
    "text": "balance thick client libraries have a",
    "start": "943760",
    "end": "947660"
  },
  {
    "text": "lot of problems sorry finagle you need",
    "start": "947660",
    "end": "951080"
  },
  {
    "text": "to maintain multiple implementations as",
    "start": "951080",
    "end": "953660"
  },
  {
    "text": "these client libraries start to live",
    "start": "953660",
    "end": "955610"
  },
  {
    "text": "longer they start to get more features",
    "start": "955610",
    "end": "957350"
  },
  {
    "text": "and you have to maintain that over",
    "start": "957350",
    "end": "958940"
  },
  {
    "text": "multiple languages and that's a lot of",
    "start": "958940",
    "end": "961070"
  },
  {
    "text": "work upgrading everyone is a nightmare",
    "start": "961070",
    "end": "964910"
  },
  {
    "text": "you have we have hundreds of services",
    "start": "964910",
    "end": "967460"
  },
  {
    "text": "and upgrades for our client libraries",
    "start": "967460",
    "end": "969740"
  },
  {
    "text": "take a very long time I'm sure many of",
    "start": "969740",
    "end": "972110"
  },
  {
    "text": "you have experienced this this was",
    "start": "972110",
    "end": "973850"
  },
  {
    "text": "actually a huge driver for us to move to",
    "start": "973850",
    "end": "975470"
  },
  {
    "text": "Envoy we wanted to make our client",
    "start": "975470",
    "end": "978020"
  },
  {
    "text": "libraries simple so that we could have",
    "start": "978020",
    "end": "980680"
  },
  {
    "text": "so that we could control a lot of that",
    "start": "980680",
    "end": "984160"
  },
  {
    "text": "however you still need some sort of thin",
    "start": "984160",
    "end": "986960"
  },
  {
    "text": "client libraries and there's some useful",
    "start": "986960",
    "end": "990230"
  },
  {
    "text": "things that you can do their context",
    "start": "990230",
    "end": "991910"
  },
  {
    "text": "propagation for example say if you want",
    "start": "991910",
    "end": "993740"
  },
  {
    "text": "to do Zipkin tracing injecting that",
    "start": "993740",
    "end": "995780"
  },
  {
    "text": "context into the wire is really useful",
    "start": "995780",
    "end": "999050"
  },
  {
    "text": "or doing the client library and setting",
    "start": "999050",
    "end": "1000970"
  },
  {
    "text": "X envoy headers for example it's",
    "start": "1000970",
    "end": "1002680"
  },
  {
    "text": "something that you can abstract away in",
    "start": "1002680",
    "end": "1003970"
  },
  {
    "text": "the in the client library things like",
    "start": "1003970",
    "end": "1007120"
  },
  {
    "text": "data marshalling as well and if people",
    "start": "1007120",
    "end": "1009670"
  },
  {
    "text": "don't use them directly at least they",
    "start": "1009670",
    "end": "1010870"
  },
  {
    "text": "can serve as a reference implementation",
    "start": "1010870",
    "end": "1014220"
  },
  {
    "text": "and the last thing is that client lives",
    "start": "1014220",
    "end": "1016390"
  },
  {
    "text": "are a great cut point so a cut point is",
    "start": "1016390",
    "end": "1018250"
  },
  {
    "text": "I don't know if it's a common term but",
    "start": "1018250",
    "end": "1020080"
  },
  {
    "text": "it's a term that we use meaning that",
    "start": "1020080",
    "end": "1022000"
  },
  {
    "text": "it's a place where you can have do a",
    "start": "1022000",
    "end": "1024220"
  },
  {
    "text": "little bit amount of work and have a",
    "start": "1024220",
    "end": "1026170"
  },
  {
    "text": "huge amount of impact so since we had",
    "start": "1026170",
    "end": "1028360"
  },
  {
    "text": "already done the work to migrate people",
    "start": "1028360",
    "end": "1030100"
  },
  {
    "text": "to client libraries this is a great",
    "start": "1030100",
    "end": "1032740"
  },
  {
    "text": "place where we can do some migrations so",
    "start": "1032740",
    "end": "1035650"
  },
  {
    "text": "it's literally this like this is a",
    "start": "1035650",
    "end": "1037780"
  },
  {
    "text": "simplified example but it's not very",
    "start": "1037780",
    "end": "1039699"
  },
  {
    "text": "many more lines of code in reality which",
    "start": "1039699",
    "end": "1041800"
  },
  {
    "text": "is that we change the client library to",
    "start": "1041800",
    "end": "1043750"
  },
  {
    "text": "have a little feature toggle there that",
    "start": "1043750",
    "end": "1045280"
  },
  {
    "text": "says basically if the future toggle is",
    "start": "1045280",
    "end": "1047079"
  },
  {
    "text": "enabled route through Envoy otherwise",
    "start": "1047080",
    "end": "1049000"
  },
  {
    "text": "route through a chat proxy and this is",
    "start": "1049000",
    "end": "1051970"
  },
  {
    "text": "great for a number of reasons firstly",
    "start": "1051970",
    "end": "1054430"
  },
  {
    "text": "the developers don't even know that",
    "start": "1054430",
    "end": "1056380"
  },
  {
    "text": "they're routing through Android they",
    "start": "1056380",
    "end": "1057610"
  },
  {
    "text": "have no idea",
    "start": "1057610",
    "end": "1058750"
  },
  {
    "text": "that we've switched them over to use",
    "start": "1058750",
    "end": "1060940"
  },
  {
    "text": "envoy or agent proxy I mean we do tell",
    "start": "1060940",
    "end": "1062950"
  },
  {
    "text": "them we're not that evil but it also",
    "start": "1062950",
    "end": "1066640"
  },
  {
    "text": "enables us to do phase deployment which",
    "start": "1066640",
    "end": "1069010"
  },
  {
    "text": "we'll talk about in a little bit and",
    "start": "1069010",
    "end": "1070620"
  },
  {
    "text": "finally it allows us in in bad scenarios",
    "start": "1070620",
    "end": "1075130"
  },
  {
    "text": "to shut off envoy routing for everybody",
    "start": "1075130",
    "end": "1077740"
  },
  {
    "text": "as a kill switch what other place cut",
    "start": "1077740",
    "end": "1082090"
  },
  {
    "text": "points are useful is for things that",
    "start": "1082090",
    "end": "1084310"
  },
  {
    "text": "developers indirectly use such as",
    "start": "1084310",
    "end": "1086320"
  },
  {
    "text": "observability tools so this is our",
    "start": "1086320",
    "end": "1088480"
  },
  {
    "text": "existing log processing pipeline we have",
    "start": "1088480",
    "end": "1090340"
  },
  {
    "text": "a che proxy that logs to some log",
    "start": "1090340",
    "end": "1093640"
  },
  {
    "text": "processor and this thing spews out a",
    "start": "1093640",
    "end": "1095770"
  },
  {
    "text": "bunch of structured logs for example we",
    "start": "1095770",
    "end": "1098530"
  },
  {
    "text": "extract Zipkin tracing from here we do",
    "start": "1098530",
    "end": "1100870"
  },
  {
    "text": "some alerting we send logs to Splunk",
    "start": "1100870",
    "end": "1102600"
  },
  {
    "text": "it's pretty complex and pretty used",
    "start": "1102600",
    "end": "1104800"
  },
  {
    "text": "pretty well used by developers so the",
    "start": "1104800",
    "end": "1109810"
  },
  {
    "text": "first option would just to be read B to",
    "start": "1109810",
    "end": "1112480"
  },
  {
    "text": "rewrite this but the risk of getting",
    "start": "1112480",
    "end": "1114700"
  },
  {
    "text": "this wrong is really high if we lose",
    "start": "1114700",
    "end": "1117370"
  },
  {
    "text": "some of these things then developers are",
    "start": "1117370",
    "end": "1119140"
  },
  {
    "text": "really unhappy and it's a lot of work",
    "start": "1119140",
    "end": "1122130"
  },
  {
    "text": "another option would be to extend this",
    "start": "1122130",
    "end": "1124450"
  },
  {
    "text": "to accept envoys ERP C based access logs",
    "start": "1124450",
    "end": "1127570"
  },
  {
    "text": "but this can be risky as well because",
    "start": "1127570",
    "end": "1130420"
  },
  {
    "text": "the mainly because the existing code is",
    "start": "1130420",
    "end": "1132460"
  },
  {
    "text": "large and kind of unwieldly so the",
    "start": "1132460",
    "end": "1136270"
  },
  {
    "text": "option that we went with is to actually",
    "start": "1136270",
    "end": "1138550"
  },
  {
    "text": "have this separate thing that munches",
    "start": "1138550",
    "end": "1140920"
  },
  {
    "text": "the Envoy logs and makes them look like",
    "start": "1140920",
    "end": "1143170"
  },
  {
    "text": "a g8 proxy so the log processor thinks",
    "start": "1143170",
    "end": "1145420"
  },
  {
    "text": "that it's consuming H a proxy logs but",
    "start": "1145420",
    "end": "1148270"
  },
  {
    "text": "in reality they're coming from envoy and",
    "start": "1148270",
    "end": "1150220"
  },
  {
    "text": "this allows us to support the old system",
    "start": "1150220",
    "end": "1152560"
  },
  {
    "text": "and gradually move away from it and the",
    "start": "1152560",
    "end": "1155380"
  },
  {
    "text": "the developers don't even know the",
    "start": "1155380",
    "end": "1156700"
  },
  {
    "text": "difference they see the logs they see",
    "start": "1156700",
    "end": "1158020"
  },
  {
    "text": "the Zipkin traces they see the logs at",
    "start": "1158020",
    "end": "1160390"
  },
  {
    "text": "Splunk and they're happy this is kind of",
    "start": "1160390",
    "end": "1162670"
  },
  {
    "text": "like a branch by abstraction or maybe",
    "start": "1162670",
    "end": "1164800"
  },
  {
    "text": "branch by abstraction in Reverse so yeah",
    "start": "1164800",
    "end": "1169570"
  },
  {
    "text": "takeaways for cut points find places",
    "start": "1169570",
    "end": "1171220"
  },
  {
    "text": "where you can do a lot of have a lot of",
    "start": "1171220",
    "end": "1174400"
  },
  {
    "text": "impact for a little bit of a amount of",
    "start": "1174400",
    "end": "1175990"
  },
  {
    "text": "work and use shims for an abstraction",
    "start": "1175990",
    "end": "1180610"
  },
  {
    "text": "layer and also feature toggles are",
    "start": "1180610",
    "end": "1182470"
  },
  {
    "text": "amazing",
    "start": "1182470",
    "end": "1184250"
  },
  {
    "text": "so lastly I'm going to talk about",
    "start": "1184250",
    "end": "1186470"
  },
  {
    "text": "continuous integration continuous",
    "start": "1186470",
    "end": "1188940"
  },
  {
    "text": "deployment so I don't know about you but",
    "start": "1188940",
    "end": "1193740"
  },
  {
    "text": "this is kind of how I knew",
    "start": "1193740",
    "end": "1195480"
  },
  {
    "text": "infrastructure development you want to",
    "start": "1195480",
    "end": "1198060"
  },
  {
    "text": "make a change you make an upgrade you",
    "start": "1198060",
    "end": "1200130"
  },
  {
    "text": "find a host that maybe there's some",
    "start": "1200130",
    "end": "1203100"
  },
  {
    "text": "people on it or maybe not you run some",
    "start": "1203100",
    "end": "1205710"
  },
  {
    "text": "upgrades on it you run some manual tests",
    "start": "1205710",
    "end": "1208100"
  },
  {
    "text": "maybe you break things and then you",
    "start": "1208100",
    "end": "1211380"
  },
  {
    "text": "deploy to prod and you pray and",
    "start": "1211380",
    "end": "1214310"
  },
  {
    "text": "sometimes you're lucky and you claim",
    "start": "1214310",
    "end": "1217560"
  },
  {
    "text": "that you're really smart and other times",
    "start": "1217560",
    "end": "1221070"
  },
  {
    "text": "you get unlucky and you say that the",
    "start": "1221070",
    "end": "1222900"
  },
  {
    "text": "gods have smitten you but I'm gonna",
    "start": "1222900",
    "end": "1228030"
  },
  {
    "text": "claim that infrastructure is not an",
    "start": "1228030",
    "end": "1230700"
  },
  {
    "text": "exception to good software development",
    "start": "1230700",
    "end": "1232230"
  },
  {
    "text": "practices we have automated tests we",
    "start": "1232230",
    "end": "1234720"
  },
  {
    "text": "were used to this so why not write",
    "start": "1234720",
    "end": "1238050"
  },
  {
    "text": "automated tests for our system this is",
    "start": "1238050",
    "end": "1241020"
  },
  {
    "text": "real code from our control plane tests",
    "start": "1241020",
    "end": "1243810"
  },
  {
    "text": "we run end-to-end tests using docker",
    "start": "1243810",
    "end": "1246120"
  },
  {
    "text": "compose and I'd venture to say that I'd",
    "start": "1246120",
    "end": "1249750"
  },
  {
    "text": "be willing to bet that if zookeeper went",
    "start": "1249750",
    "end": "1253200"
  },
  {
    "text": "down right now in our environment then",
    "start": "1253200",
    "end": "1254730"
  },
  {
    "text": "we'd still be able to route through",
    "start": "1254730",
    "end": "1255930"
  },
  {
    "text": "envoy because we've tested it in this",
    "start": "1255930",
    "end": "1258180"
  },
  {
    "text": "example we bring up a bunch of services",
    "start": "1258180",
    "end": "1260610"
  },
  {
    "text": "at zookeeper and envoy and then we start",
    "start": "1260610",
    "end": "1262560"
  },
  {
    "text": "killing them and making sure that we can",
    "start": "1262560",
    "end": "1264330"
  },
  {
    "text": "still route through it so this gives us",
    "start": "1264330",
    "end": "1266370"
  },
  {
    "text": "a lot of confidence when we deploy and",
    "start": "1266370",
    "end": "1269750"
  },
  {
    "text": "as a bonus you can use these end-to-end",
    "start": "1269750",
    "end": "1272220"
  },
  {
    "text": "tests in your github issues on Envoy so",
    "start": "1272220",
    "end": "1276150"
  },
  {
    "text": "when you're struggling to explain what",
    "start": "1276150",
    "end": "1278100"
  },
  {
    "text": "exactly is happening rather than trying",
    "start": "1278100",
    "end": "1280320"
  },
  {
    "text": "to explain it in words just point to",
    "start": "1280320",
    "end": "1282120"
  },
  {
    "text": "some docker compose scripty thing and",
    "start": "1282120",
    "end": "1285930"
  },
  {
    "text": "say hey just run this this is exactly",
    "start": "1285930",
    "end": "1288180"
  },
  {
    "text": "what I did here but no testing",
    "start": "1288180",
    "end": "1293100"
  },
  {
    "text": "discussion would be complete without the",
    "start": "1293100",
    "end": "1294780"
  },
  {
    "text": "test pyramid make sure you still have",
    "start": "1294780",
    "end": "1296430"
  },
  {
    "text": "integration unit tests and to end tests",
    "start": "1296430",
    "end": "1299490"
  },
  {
    "text": "are still slow so you can't get around",
    "start": "1299490",
    "end": "1301830"
  },
  {
    "text": "that sorry",
    "start": "1301830",
    "end": "1304519"
  },
  {
    "text": "okay yeah takeaways right automated",
    "start": "1304590",
    "end": "1307420"
  },
  {
    "text": "tests doctrine compose is amazing for",
    "start": "1307420",
    "end": "1309610"
  },
  {
    "text": "running end-to-end tests run against",
    "start": "1309610",
    "end": "1312640"
  },
  {
    "text": "master if you can stomach it we during",
    "start": "1312640",
    "end": "1314800"
  },
  {
    "text": "heavy development will deploy master of",
    "start": "1314800",
    "end": "1316570"
  },
  {
    "text": "envoy up to once once per week it's",
    "start": "1316570",
    "end": "1320230"
  },
  {
    "text": "great quality I'm pretty confident in it",
    "start": "1320230",
    "end": "1323730"
  },
  {
    "text": "and the last point is about phase",
    "start": "1323730",
    "end": "1327040"
  },
  {
    "text": "deployment so phase deployment is the",
    "start": "1327040",
    "end": "1329410"
  },
  {
    "text": "idea that you want to roll out to kind",
    "start": "1329410",
    "end": "1332380"
  },
  {
    "text": "of safer environments first and then do",
    "start": "1332380",
    "end": "1334930"
  },
  {
    "text": "a gradual rollout and this is really",
    "start": "1334930",
    "end": "1337270"
  },
  {
    "text": "important and I'll tell you a story why",
    "start": "1337270",
    "end": "1339960"
  },
  {
    "text": "so one day I shipped a change to a",
    "start": "1339960",
    "end": "1342700"
  },
  {
    "text": "distributor to health checking to envoy",
    "start": "1342700",
    "end": "1344800"
  },
  {
    "text": "and within a few minutes",
    "start": "1344800",
    "end": "1347530"
  },
  {
    "text": "alerts started firing and it turns out",
    "start": "1347530",
    "end": "1351100"
  },
  {
    "text": "that a combination of a miss",
    "start": "1351100",
    "end": "1352960"
  },
  {
    "text": "configuration in our control plane and a",
    "start": "1352960",
    "end": "1355390"
  },
  {
    "text": "non-void bug caused envoy to DDoS our",
    "start": "1355390",
    "end": "1357790"
  },
  {
    "text": "services we did have tests for this and",
    "start": "1357790",
    "end": "1361240"
  },
  {
    "text": "we actually did roll it out to a staging",
    "start": "1361240",
    "end": "1363880"
  },
  {
    "text": "environment first but because",
    "start": "1363880",
    "end": "1364870"
  },
  {
    "text": "distributed health checking is open",
    "start": "1364870",
    "end": "1367210"
  },
  {
    "text": "squared it only failed when we scaled it",
    "start": "1367210",
    "end": "1370540"
  },
  {
    "text": "up to a larger phase so this is not the",
    "start": "1370540",
    "end": "1375490"
  },
  {
    "text": "only time it happened we had John also",
    "start": "1375490",
    "end": "1378040"
  },
  {
    "text": "DDoS our environment I'm not the only",
    "start": "1378040",
    "end": "1379720"
  },
  {
    "text": "one that did this but because we were",
    "start": "1379720",
    "end": "1383380"
  },
  {
    "text": "able to deploy in phases the damage was",
    "start": "1383380",
    "end": "1386080"
  },
  {
    "text": "minimal and we were able to roll back",
    "start": "1386080",
    "end": "1387700"
  },
  {
    "text": "quickly and remember that envoy is part",
    "start": "1387700",
    "end": "1390400"
  },
  {
    "text": "of pretty much everything when you roll",
    "start": "1390400",
    "end": "1392380"
  },
  {
    "text": "it out so if you break something bad",
    "start": "1392380",
    "end": "1394090"
  },
  {
    "text": "things will happen developers will get",
    "start": "1394090",
    "end": "1396490"
  },
  {
    "text": "unhappy so just to recap yeah apply",
    "start": "1396490",
    "end": "1402040"
  },
  {
    "text": "incremental development everywhere",
    "start": "1402040",
    "end": "1406110"
  },
  {
    "text": "identify cut points where you can kind",
    "start": "1406110",
    "end": "1408220"
  },
  {
    "text": "of do a little bit of work and have a",
    "start": "1408220",
    "end": "1409450"
  },
  {
    "text": "lot of impact and use CI CD so yeah in",
    "start": "1409450",
    "end": "1415090"
  },
  {
    "text": "summary this is amazing this is awesome",
    "start": "1415090",
    "end": "1417040"
  },
  {
    "text": "that we get to work on this no no okay",
    "start": "1417040",
    "end": "1419820"
  },
  {
    "text": "focus on your users that's why we're",
    "start": "1419820",
    "end": "1422410"
  },
  {
    "text": "here we're not here to play with cool",
    "start": "1422410",
    "end": "1424870"
  },
  {
    "text": "toys though it's fun yeah thanks and",
    "start": "1424870",
    "end": "1429220"
  },
  {
    "text": "here's the obligatory we're hiring slide",
    "start": "1429220",
    "end": "1431050"
  },
  {
    "text": "that I have to put in here",
    "start": "1431050",
    "end": "1433690"
  },
  {
    "text": "[Applause]",
    "start": "1433690",
    "end": "1438179"
  },
  {
    "text": "any questions okay I know everybody's",
    "start": "1438279",
    "end": "1445309"
  },
  {
    "text": "hungry yeah",
    "start": "1445309",
    "end": "1449408"
  },
  {
    "text": "yeah the question the question was about",
    "start": "1460210",
    "end": "1462860"
  },
  {
    "text": "this this kind of branch by abstraction",
    "start": "1462860",
    "end": "1465260"
  },
  {
    "text": "thing with the access logs and yeah the",
    "start": "1465260",
    "end": "1467420"
  },
  {
    "text": "long term goal is to actually move over",
    "start": "1467420",
    "end": "1469490"
  },
  {
    "text": "to using this new system so we have to",
    "start": "1469490",
    "end": "1473390"
  },
  {
    "text": "support these two systems in parallel",
    "start": "1473390",
    "end": "1475220"
  },
  {
    "text": "but yeah eventually we won't be using a",
    "start": "1475220",
    "end": "1477710"
  },
  {
    "text": "chip proxy at all and we'll have only",
    "start": "1477710",
    "end": "1480440"
  },
  {
    "text": "this new access log Munzer or whatever",
    "start": "1480440",
    "end": "1483470"
  },
  {
    "text": "will actually do more things",
    "start": "1483470",
    "end": "1485510"
  },
  {
    "text": "we're originally going to call it envoy",
    "start": "1485510",
    "end": "1487010"
  },
  {
    "text": "2h a proxy but that will become a",
    "start": "1487010",
    "end": "1490400"
  },
  {
    "text": "useless name very quickly so we just",
    "start": "1490400",
    "end": "1493130"
  },
  {
    "text": "called it bike shed and the other query",
    "start": "1493130",
    "end": "1502910"
  },
  {
    "text": "me too",
    "start": "1502910",
    "end": "1505090"
  },
  {
    "text": "all right thanks",
    "start": "1505090",
    "end": "1508539"
  }
]