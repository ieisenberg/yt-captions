[
  {
    "start": "0",
    "end": "14000"
  },
  {
    "text": "welcome los angeles and everyone online",
    "start": "799",
    "end": "3919"
  },
  {
    "text": "it's a crazy time but thanks so much for",
    "start": "3919",
    "end": "7120"
  },
  {
    "text": "having me here",
    "start": "7120",
    "end": "8559"
  },
  {
    "text": "and today i'm going to talk about thanos",
    "start": "8559",
    "end": "11759"
  },
  {
    "text": "cncf project",
    "start": "11759",
    "end": "13519"
  },
  {
    "text": "and the title is highly available",
    "start": "13519",
    "end": "16080"
  },
  {
    "text": "pluggable",
    "start": "16080",
    "end": "17199"
  },
  {
    "text": "long-term storage metric for everyone",
    "start": "17199",
    "end": "19840"
  },
  {
    "text": "it's one of my most longest title effort",
    "start": "19840",
    "end": "22720"
  },
  {
    "text": "for a talk",
    "start": "22720",
    "end": "24400"
  },
  {
    "text": "really excited to talk about this",
    "start": "24400",
    "end": "27840"
  },
  {
    "text": "first of all",
    "start": "27840",
    "end": "29599"
  },
  {
    "text": "a little bit about myself",
    "start": "29599",
    "end": "32160"
  },
  {
    "start": "31000",
    "end": "81000"
  },
  {
    "text": "i'm from the netherlands or holland and",
    "start": "32160",
    "end": "35280"
  },
  {
    "text": "i'm a buzzword engineer",
    "start": "35280",
    "end": "37760"
  },
  {
    "text": "basically i do everything that i like",
    "start": "37760",
    "end": "40640"
  },
  {
    "text": "which really depends on the moment so",
    "start": "40640",
    "end": "43200"
  },
  {
    "text": "this can be sre or devops or at the",
    "start": "43200",
    "end": "46800"
  },
  {
    "text": "moment observability",
    "start": "46800",
    "end": "49680"
  },
  {
    "text": "i do this at full stack",
    "start": "49680",
    "end": "53440"
  },
  {
    "text": "i really like open source software",
    "start": "53680",
    "end": "56559"
  },
  {
    "text": "and especially anything related to",
    "start": "56559",
    "end": "58960"
  },
  {
    "text": "kubernetes and on the side i do a little",
    "start": "58960",
    "end": "61680"
  },
  {
    "text": "bit of hacking",
    "start": "61680",
    "end": "63199"
  },
  {
    "text": "for example on hacker1",
    "start": "63199",
    "end": "65439"
  },
  {
    "text": "these are just things that i really like",
    "start": "65439",
    "end": "67439"
  },
  {
    "text": "to enjoy",
    "start": "67439",
    "end": "68560"
  },
  {
    "text": "in my spare time besides working with",
    "start": "68560",
    "end": "71520"
  },
  {
    "text": "wood",
    "start": "71520",
    "end": "72560"
  },
  {
    "text": "i really love to create things",
    "start": "72560",
    "end": "76240"
  },
  {
    "text": "so now we got the basic comfort let's",
    "start": "76400",
    "end": "79119"
  },
  {
    "text": "get started with our talk",
    "start": "79119",
    "end": "81840"
  },
  {
    "start": "81000",
    "end": "111000"
  },
  {
    "text": "and we have to start with prometheus",
    "start": "81840",
    "end": "83840"
  },
  {
    "text": "first i want to give you a little",
    "start": "83840",
    "end": "86159"
  },
  {
    "text": "introduction since this is a talk for",
    "start": "86159",
    "end": "88400"
  },
  {
    "text": "everyone i want to give you this",
    "start": "88400",
    "end": "89920"
  },
  {
    "text": "introduction about prometheus perhaps",
    "start": "89920",
    "end": "92079"
  },
  {
    "text": "you have heard of it perhaps you are",
    "start": "92079",
    "end": "93680"
  },
  {
    "text": "using it",
    "start": "93680",
    "end": "95280"
  },
  {
    "text": "i personally really love this this",
    "start": "95280",
    "end": "97280"
  },
  {
    "text": "project it's it's a lie for uh quite a",
    "start": "97280",
    "end": "100400"
  },
  {
    "text": "while it's",
    "start": "100400",
    "end": "102320"
  },
  {
    "text": "heavily used",
    "start": "102320",
    "end": "103759"
  },
  {
    "text": "especially also on kubernetes",
    "start": "103759",
    "end": "106320"
  },
  {
    "text": "but",
    "start": "106320",
    "end": "107200"
  },
  {
    "text": "what is it that it does",
    "start": "107200",
    "end": "110479"
  },
  {
    "text": "well",
    "start": "111439",
    "end": "112240"
  },
  {
    "text": "prometheus is a key player for this part",
    "start": "112240",
    "end": "116159"
  },
  {
    "text": "this is an http page and it's surfing",
    "start": "116159",
    "end": "119280"
  },
  {
    "text": "metrics",
    "start": "119280",
    "end": "120880"
  },
  {
    "text": "it's just displaying text",
    "start": "120880",
    "end": "123200"
  },
  {
    "text": "in a metric format and for example this",
    "start": "123200",
    "end": "126560"
  },
  {
    "text": "page is actually displaying metrics",
    "start": "126560",
    "end": "128879"
  },
  {
    "text": "about an hcsb server for example about",
    "start": "128879",
    "end": "131680"
  },
  {
    "text": "the request",
    "start": "131680",
    "end": "133040"
  },
  {
    "text": "duration",
    "start": "133040",
    "end": "134319"
  },
  {
    "text": "but also about",
    "start": "134319",
    "end": "136080"
  },
  {
    "text": "how many requests we had in total and",
    "start": "136080",
    "end": "138560"
  },
  {
    "text": "what was the code the acp code that was",
    "start": "138560",
    "end": "141680"
  },
  {
    "text": "for a given request and what are the",
    "start": "141680",
    "end": "143760"
  },
  {
    "text": "counters for this and for example for an",
    "start": "143760",
    "end": "146400"
  },
  {
    "text": "ectp",
    "start": "146400",
    "end": "147520"
  },
  {
    "text": "web server this is pretty nice",
    "start": "147520",
    "end": "149680"
  },
  {
    "text": "information to have because you can see",
    "start": "149680",
    "end": "152959"
  },
  {
    "text": "for example how many 500 errors do i",
    "start": "152959",
    "end": "156080"
  },
  {
    "text": "have",
    "start": "156080",
    "end": "157120"
  },
  {
    "text": "and",
    "start": "157120",
    "end": "158080"
  },
  {
    "text": "this is really nice but we want to go",
    "start": "158080",
    "end": "161040"
  },
  {
    "text": "from",
    "start": "161040",
    "end": "162000"
  },
  {
    "text": "such a page as this",
    "start": "162000",
    "end": "163840"
  },
  {
    "text": "towards something like this",
    "start": "163840",
    "end": "168160"
  },
  {
    "start": "166000",
    "end": "188000"
  },
  {
    "text": "and this is grafana and it's it's a",
    "start": "168160",
    "end": "171440"
  },
  {
    "text": "visualization tool and what you can see",
    "start": "171440",
    "end": "174000"
  },
  {
    "text": "here are different graphs but these",
    "start": "174000",
    "end": "176160"
  },
  {
    "text": "graphs are",
    "start": "176160",
    "end": "177840"
  },
  {
    "text": "are metrics plotted over time",
    "start": "177840",
    "end": "181280"
  },
  {
    "text": "and this is really nice",
    "start": "181280",
    "end": "183599"
  },
  {
    "text": "but we can also do different things such",
    "start": "183599",
    "end": "186000"
  },
  {
    "text": "as alert",
    "start": "186000",
    "end": "188959"
  },
  {
    "start": "188000",
    "end": "220000"
  },
  {
    "text": "and this is an example of an alert that",
    "start": "189760",
    "end": "192080"
  },
  {
    "text": "we have created",
    "start": "192080",
    "end": "193680"
  },
  {
    "text": "with prometheus and this is an alert for",
    "start": "193680",
    "end": "196560"
  },
  {
    "text": "a high load so if the node load one is",
    "start": "196560",
    "end": "201200"
  },
  {
    "text": "above 0.5",
    "start": "201200",
    "end": "203680"
  },
  {
    "text": "um",
    "start": "203680",
    "end": "204640"
  },
  {
    "text": "well",
    "start": "204640",
    "end": "205519"
  },
  {
    "text": "it runs into a firing state so we can",
    "start": "205519",
    "end": "209599"
  },
  {
    "text": "get a notification that",
    "start": "209599",
    "end": "211519"
  },
  {
    "text": "something with a metric happened and it",
    "start": "211519",
    "end": "215040"
  },
  {
    "text": "passes some threshold and we got an",
    "start": "215040",
    "end": "217120"
  },
  {
    "text": "alert",
    "start": "217120",
    "end": "219440"
  },
  {
    "start": "220000",
    "end": "443000"
  },
  {
    "text": "so it's important to",
    "start": "222159",
    "end": "224400"
  },
  {
    "text": "get a top-down view of committees as",
    "start": "224400",
    "end": "226879"
  },
  {
    "text": "it's",
    "start": "226879",
    "end": "227680"
  },
  {
    "text": "well it's doing quite a lot of things",
    "start": "227680",
    "end": "230640"
  },
  {
    "text": "but the things that you're doing is",
    "start": "230640",
    "end": "232720"
  },
  {
    "text": "it's doing really well so in the middle",
    "start": "232720",
    "end": "235040"
  },
  {
    "text": "we have to promote your server and",
    "start": "235040",
    "end": "237920"
  },
  {
    "text": "we can do the retrieval of those metric",
    "start": "237920",
    "end": "240640"
  },
  {
    "text": "pages so basically that's the retrieval",
    "start": "240640",
    "end": "243439"
  },
  {
    "text": "part we are pulling metrics from those",
    "start": "243439",
    "end": "246319"
  },
  {
    "text": "metric endpoints",
    "start": "246319",
    "end": "248319"
  },
  {
    "text": "and we can do this in a certain interval",
    "start": "248319",
    "end": "250879"
  },
  {
    "text": "which is just the scraping interval but",
    "start": "250879",
    "end": "254239"
  },
  {
    "text": "how do we discover these targets well",
    "start": "254239",
    "end": "256479"
  },
  {
    "text": "that can be done via multiple methods if",
    "start": "256479",
    "end": "259919"
  },
  {
    "text": "you check out the prometheus website you",
    "start": "259919",
    "end": "261759"
  },
  {
    "text": "have",
    "start": "261759",
    "end": "262479"
  },
  {
    "text": "all kinds of surface discovery methods",
    "start": "262479",
    "end": "265040"
  },
  {
    "text": "i've listened to",
    "start": "265040",
    "end": "266639"
  },
  {
    "text": "which is the community service discovery",
    "start": "266639",
    "end": "268720"
  },
  {
    "text": "and the file service discovery and",
    "start": "268720",
    "end": "271280"
  },
  {
    "text": "basically",
    "start": "271280",
    "end": "272479"
  },
  {
    "text": "what we often do with the file discovery",
    "start": "272479",
    "end": "274960"
  },
  {
    "text": "are static targets so we input the host",
    "start": "274960",
    "end": "277840"
  },
  {
    "text": "which is just a static target and",
    "start": "277840",
    "end": "279759"
  },
  {
    "text": "prometheus will",
    "start": "279759",
    "end": "281600"
  },
  {
    "text": "try to scrape that endpoint",
    "start": "281600",
    "end": "285120"
  },
  {
    "text": "with communities we can use discovery",
    "start": "286160",
    "end": "288960"
  },
  {
    "text": "via the unity api server which is really",
    "start": "288960",
    "end": "291759"
  },
  {
    "text": "neat because we can just run our",
    "start": "291759",
    "end": "293600"
  },
  {
    "text": "services and let the api server do",
    "start": "293600",
    "end": "296080"
  },
  {
    "text": "everything and",
    "start": "296080",
    "end": "297680"
  },
  {
    "text": "let prometheus discover every metric",
    "start": "297680",
    "end": "300400"
  },
  {
    "text": "path that we have and this makes it",
    "start": "300400",
    "end": "302720"
  },
  {
    "text": "really really easy to automatically",
    "start": "302720",
    "end": "305759"
  },
  {
    "text": "score for our scraping targets",
    "start": "305759",
    "end": "309440"
  },
  {
    "text": "so that is the retrieval part",
    "start": "309440",
    "end": "312080"
  },
  {
    "text": "but",
    "start": "312080",
    "end": "312880"
  },
  {
    "text": "um",
    "start": "312880",
    "end": "313759"
  },
  {
    "text": "you can see in the next part is the dsdb",
    "start": "313759",
    "end": "317520"
  },
  {
    "text": "which is the database the time series",
    "start": "317520",
    "end": "319759"
  },
  {
    "text": "database",
    "start": "319759",
    "end": "321039"
  },
  {
    "text": "and it's storing its data on the node on",
    "start": "321039",
    "end": "325520"
  },
  {
    "text": "basically a generic volume",
    "start": "325520",
    "end": "329120"
  },
  {
    "text": "then we also have this http server",
    "start": "329440",
    "end": "332880"
  },
  {
    "text": "and well this allows for program well",
    "start": "332880",
    "end": "335919"
  },
  {
    "text": "which is the query language for",
    "start": "335919",
    "end": "337360"
  },
  {
    "text": "prometheus",
    "start": "337360",
    "end": "338560"
  },
  {
    "text": "to",
    "start": "338560",
    "end": "338830"
  },
  {
    "text": "[Music]",
    "start": "338830",
    "end": "340560"
  },
  {
    "text": "allow you to query your metrics over",
    "start": "340560",
    "end": "343280"
  },
  {
    "text": "time",
    "start": "343280",
    "end": "344320"
  },
  {
    "text": "and prometheus does have",
    "start": "344320",
    "end": "346479"
  },
  {
    "text": "its web user interface which is also",
    "start": "346479",
    "end": "349280"
  },
  {
    "text": "really nice",
    "start": "349280",
    "end": "350960"
  },
  {
    "text": "but perhaps a more common",
    "start": "350960",
    "end": "353440"
  },
  {
    "text": "user interface is corfana which is",
    "start": "353440",
    "end": "355919"
  },
  {
    "text": "really nice for the visualization",
    "start": "355919",
    "end": "358720"
  },
  {
    "text": "and you can do so much more with grafana",
    "start": "358720",
    "end": "360880"
  },
  {
    "text": "but that's out of scope for right now",
    "start": "360880",
    "end": "364880"
  },
  {
    "text": "we also have this alert monitor which",
    "start": "364880",
    "end": "366960"
  },
  {
    "text": "you can see on the top right",
    "start": "366960",
    "end": "369600"
  },
  {
    "text": "and",
    "start": "369600",
    "end": "370960"
  },
  {
    "text": "basically what we can do is creating",
    "start": "370960",
    "end": "373440"
  },
  {
    "text": "alerts and certain thresholds and if a",
    "start": "373440",
    "end": "376880"
  },
  {
    "text": "certain metric over time it's a certain",
    "start": "376880",
    "end": "379280"
  },
  {
    "text": "threshold we can send in an alert",
    "start": "379280",
    "end": "382319"
  },
  {
    "text": "so prometheus is",
    "start": "382319",
    "end": "384479"
  },
  {
    "text": "really awesome at doing all these kinds",
    "start": "384479",
    "end": "387120"
  },
  {
    "text": "of things",
    "start": "387120",
    "end": "388800"
  },
  {
    "text": "but perhaps it's just lacking a few",
    "start": "388800",
    "end": "391520"
  },
  {
    "text": "features",
    "start": "391520",
    "end": "392720"
  },
  {
    "text": "for example as you can see the tsdb is",
    "start": "392720",
    "end": "395520"
  },
  {
    "text": "storing its data on the node itself on",
    "start": "395520",
    "end": "398479"
  },
  {
    "text": "disk",
    "start": "398479",
    "end": "399440"
  },
  {
    "text": "or on a volume depending on if you run",
    "start": "399440",
    "end": "402000"
  },
  {
    "text": "on cubic meters",
    "start": "402000",
    "end": "404080"
  },
  {
    "text": "which is fine if you have a few surface",
    "start": "404080",
    "end": "406800"
  },
  {
    "text": "that you're scraping and you have a data",
    "start": "406800",
    "end": "409599"
  },
  {
    "text": "retention of 30 days",
    "start": "409599",
    "end": "412160"
  },
  {
    "text": "that that that works perfectly because",
    "start": "412160",
    "end": "414960"
  },
  {
    "text": "prometheus",
    "start": "414960",
    "end": "416960"
  },
  {
    "text": "is able to scrape a lot of targets and",
    "start": "416960",
    "end": "420080"
  },
  {
    "text": "is able to",
    "start": "420080",
    "end": "421919"
  },
  {
    "text": "retain a lot of data",
    "start": "421919",
    "end": "423840"
  },
  {
    "text": "but the retention period i haven't seen",
    "start": "423840",
    "end": "426880"
  },
  {
    "text": "for example a retention period of two",
    "start": "426880",
    "end": "429360"
  },
  {
    "text": "years for",
    "start": "429360",
    "end": "432080"
  },
  {
    "text": "a ten thousand of servers in one single",
    "start": "432080",
    "end": "434240"
  },
  {
    "text": "prometheus that can be quite tough for",
    "start": "434240",
    "end": "437039"
  },
  {
    "text": "prometheus",
    "start": "437039",
    "end": "438400"
  },
  {
    "text": "it wasn't built for",
    "start": "438400",
    "end": "440720"
  },
  {
    "text": "a very long retention period",
    "start": "440720",
    "end": "444160"
  },
  {
    "text": "so let's question prometheus for a",
    "start": "444160",
    "end": "446639"
  },
  {
    "text": "little bit",
    "start": "446639",
    "end": "447680"
  },
  {
    "text": "i don't want to",
    "start": "447680",
    "end": "449440"
  },
  {
    "text": "say anything bad about just because i",
    "start": "449440",
    "end": "451680"
  },
  {
    "text": "really love prometheus and social too",
    "start": "451680",
    "end": "455440"
  },
  {
    "start": "455000",
    "end": "478000"
  },
  {
    "text": "but there are a few limitations for",
    "start": "455440",
    "end": "457680"
  },
  {
    "text": "example",
    "start": "457680",
    "end": "458880"
  },
  {
    "text": "i have a single node with prometheus on",
    "start": "458880",
    "end": "461599"
  },
  {
    "text": "it i have a second note with four",
    "start": "461599",
    "end": "464160"
  },
  {
    "text": "surfaces on it",
    "start": "464160",
    "end": "465680"
  },
  {
    "text": "and wow prometheus have discovered my",
    "start": "465680",
    "end": "468639"
  },
  {
    "text": "four surfaces",
    "start": "468639",
    "end": "470479"
  },
  {
    "text": "and it's all running well it's scraping",
    "start": "470479",
    "end": "473919"
  },
  {
    "text": "my four surfaces and i can query the",
    "start": "473919",
    "end": "476879"
  },
  {
    "text": "data",
    "start": "476879",
    "end": "479680"
  },
  {
    "start": "478000",
    "end": "511000"
  },
  {
    "text": "but what if note 1 crashes",
    "start": "479680",
    "end": "483280"
  },
  {
    "text": "well",
    "start": "483280",
    "end": "484319"
  },
  {
    "text": "this might pose a problem",
    "start": "484319",
    "end": "486400"
  },
  {
    "text": "depending on your use case of course",
    "start": "486400",
    "end": "489120"
  },
  {
    "text": "but at the moment it isn't scraping my",
    "start": "489120",
    "end": "491440"
  },
  {
    "text": "four services anymore and i also don't",
    "start": "491440",
    "end": "493680"
  },
  {
    "text": "have an opportunity to query my data",
    "start": "493680",
    "end": "496560"
  },
  {
    "text": "from the period that committees was",
    "start": "496560",
    "end": "498479"
  },
  {
    "text": "running",
    "start": "498479",
    "end": "500160"
  },
  {
    "text": "and obviously",
    "start": "500160",
    "end": "502160"
  },
  {
    "text": "if you are known to committees we can",
    "start": "502160",
    "end": "504560"
  },
  {
    "text": "just add replicas we can just add",
    "start": "504560",
    "end": "507280"
  },
  {
    "text": "another prometheus which is what we can",
    "start": "507280",
    "end": "510000"
  },
  {
    "text": "do",
    "start": "510000",
    "end": "512240"
  },
  {
    "text": "so here we have two nodes",
    "start": "512719",
    "end": "515120"
  },
  {
    "text": "and both nodes are running prometheus",
    "start": "515120",
    "end": "518479"
  },
  {
    "text": "so this removes the single um",
    "start": "518479",
    "end": "522560"
  },
  {
    "text": "point of failure",
    "start": "522560",
    "end": "524080"
  },
  {
    "text": "and",
    "start": "524080",
    "end": "525120"
  },
  {
    "text": "if something happens to one prometheus",
    "start": "525120",
    "end": "527519"
  },
  {
    "text": "that's fine because you still have the",
    "start": "527519",
    "end": "529519"
  },
  {
    "text": "other prometheus replication",
    "start": "529519",
    "end": "531600"
  },
  {
    "text": "if we have this use case we still have",
    "start": "531600",
    "end": "533760"
  },
  {
    "text": "node 2 it's still scraping surface 3 and",
    "start": "533760",
    "end": "536560"
  },
  {
    "text": "4 and we can still query our data",
    "start": "536560",
    "end": "539680"
  },
  {
    "text": "we can also still query our data from",
    "start": "539680",
    "end": "542000"
  },
  {
    "text": "the period that",
    "start": "542000",
    "end": "543760"
  },
  {
    "text": "node 1 was",
    "start": "543760",
    "end": "545519"
  },
  {
    "text": "still alive",
    "start": "545519",
    "end": "547279"
  },
  {
    "text": "because node 2 still has this data both",
    "start": "547279",
    "end": "550320"
  },
  {
    "text": "prometheuses are",
    "start": "550320",
    "end": "553120"
  },
  {
    "text": "both scraping all our targets which",
    "start": "553120",
    "end": "555839"
  },
  {
    "text": "allows us for one prometheus to go",
    "start": "555839",
    "end": "558560"
  },
  {
    "text": "offline",
    "start": "558560",
    "end": "559600"
  },
  {
    "start": "559000",
    "end": "677000"
  },
  {
    "text": "there's just a little downside to this",
    "start": "559600",
    "end": "562480"
  },
  {
    "text": "because both nodes have the same time",
    "start": "562480",
    "end": "564800"
  },
  {
    "text": "series",
    "start": "564800",
    "end": "566800"
  },
  {
    "text": "but as we have discussed a prometheus",
    "start": "566800",
    "end": "569680"
  },
  {
    "text": "will scrape on a certain interval",
    "start": "569680",
    "end": "572800"
  },
  {
    "text": "and",
    "start": "572800",
    "end": "573760"
  },
  {
    "text": "this isn't a fixed interval in time so",
    "start": "573760",
    "end": "577040"
  },
  {
    "text": "it isn't scraping at zero zero zero zero",
    "start": "577040",
    "end": "581120"
  },
  {
    "text": "it's just scraping every 15 seconds and",
    "start": "581120",
    "end": "584000"
  },
  {
    "text": "it really depends per prometheus when it",
    "start": "584000",
    "end": "587279"
  },
  {
    "text": "is scraping it",
    "start": "587279",
    "end": "588880"
  },
  {
    "text": "so it could be the case that",
    "start": "588880",
    "end": "591839"
  },
  {
    "text": "both prometheuses have the same raw time",
    "start": "591839",
    "end": "594399"
  },
  {
    "text": "service data",
    "start": "594399",
    "end": "596399"
  },
  {
    "text": "but the time series would most likely be",
    "start": "596399",
    "end": "599360"
  },
  {
    "text": "the same however the samples would be",
    "start": "599360",
    "end": "601360"
  },
  {
    "text": "different to the different scraping",
    "start": "601360",
    "end": "603040"
  },
  {
    "text": "times also the problem is is that",
    "start": "603040",
    "end": "606800"
  },
  {
    "text": "for example one",
    "start": "606800",
    "end": "608320"
  },
  {
    "text": "node goes offline",
    "start": "608320",
    "end": "611120"
  },
  {
    "text": "we are missing the data on that",
    "start": "611120",
    "end": "613440"
  },
  {
    "text": "prometheus",
    "start": "613440",
    "end": "615279"
  },
  {
    "text": "and for example we implement a load",
    "start": "615279",
    "end": "617519"
  },
  {
    "text": "balancer so",
    "start": "617519",
    "end": "619040"
  },
  {
    "text": "our queries are going to either node 1",
    "start": "619040",
    "end": "621839"
  },
  {
    "text": "or node 2 and this is working just",
    "start": "621839",
    "end": "623920"
  },
  {
    "text": "perfectly but one",
    "start": "623920",
    "end": "625680"
  },
  {
    "text": "once node 1 went offline we are missing",
    "start": "625680",
    "end": "629519"
  },
  {
    "text": "data so if our query hits node 1 we",
    "start": "629519",
    "end": "632640"
  },
  {
    "text": "still have this gap in our data",
    "start": "632640",
    "end": "635279"
  },
  {
    "text": "and this is fine for for example alert",
    "start": "635279",
    "end": "637680"
  },
  {
    "text": "manager because alert manager is aware",
    "start": "637680",
    "end": "640399"
  },
  {
    "text": "of this behavior and it can just filter",
    "start": "640399",
    "end": "642959"
  },
  {
    "text": "and deduplicate the data",
    "start": "642959",
    "end": "644959"
  },
  {
    "text": "but if you are talking about making",
    "start": "644959",
    "end": "647360"
  },
  {
    "text": "queries with for example grafana and",
    "start": "647360",
    "end": "649600"
  },
  {
    "text": "making dashboards it could be that if",
    "start": "649600",
    "end": "651760"
  },
  {
    "text": "you just hit the refresh button you hit",
    "start": "651760",
    "end": "654640"
  },
  {
    "text": "the prometheus that was offline for five",
    "start": "654640",
    "end": "656800"
  },
  {
    "text": "minutes and you have a gap in your data",
    "start": "656800",
    "end": "659600"
  },
  {
    "text": "if you might refresh and you don't have",
    "start": "659600",
    "end": "662000"
  },
  {
    "text": "a sticky session on your load balancer",
    "start": "662000",
    "end": "664399"
  },
  {
    "text": "you you might hit the other prometheus",
    "start": "664399",
    "end": "667519"
  },
  {
    "text": "and you don't have the gap anymore but",
    "start": "667519",
    "end": "669760"
  },
  {
    "text": "you might also see different samples",
    "start": "669760",
    "end": "672079"
  },
  {
    "text": "because",
    "start": "672079",
    "end": "673600"
  },
  {
    "text": "they can be different due to the",
    "start": "673600",
    "end": "676240"
  },
  {
    "text": "scraping times",
    "start": "676240",
    "end": "678079"
  },
  {
    "start": "677000",
    "end": "703000"
  },
  {
    "text": "and let's talk about a unified view",
    "start": "678079",
    "end": "681279"
  },
  {
    "text": "let's say i have five kidneys clusters",
    "start": "681279",
    "end": "685040"
  },
  {
    "text": "and i want just a single view for all my",
    "start": "685040",
    "end": "688160"
  },
  {
    "text": "prometheus",
    "start": "688160",
    "end": "690560"
  },
  {
    "text": "can we solve this natively and the",
    "start": "690560",
    "end": "693040"
  },
  {
    "text": "answer here is",
    "start": "693040",
    "end": "694560"
  },
  {
    "text": "a typical engineering question",
    "start": "694560",
    "end": "696880"
  },
  {
    "text": "yes and no we can",
    "start": "696880",
    "end": "698880"
  },
  {
    "text": "but perhaps",
    "start": "698880",
    "end": "700160"
  },
  {
    "text": "not perfectly",
    "start": "700160",
    "end": "703480"
  },
  {
    "start": "703000",
    "end": "758000"
  },
  {
    "text": "so one way to do is",
    "start": "704000",
    "end": "706079"
  },
  {
    "text": "is",
    "start": "706079",
    "end": "706880"
  },
  {
    "text": "via one single prometheus instance",
    "start": "706880",
    "end": "709760"
  },
  {
    "text": "perhaps with replication",
    "start": "709760",
    "end": "712800"
  },
  {
    "text": "and we can use the kubernetes",
    "start": "712800",
    "end": "715680"
  },
  {
    "text": "discovery config",
    "start": "715680",
    "end": "717360"
  },
  {
    "text": "and as you can see here there is a",
    "start": "717360",
    "end": "719360"
  },
  {
    "text": "definition for an api server",
    "start": "719360",
    "end": "722639"
  },
  {
    "text": "and by default it's assuming it's",
    "start": "722639",
    "end": "724639"
  },
  {
    "text": "running its own cluster",
    "start": "724639",
    "end": "727279"
  },
  {
    "text": "but we can also add another",
    "start": "727279",
    "end": "730079"
  },
  {
    "text": "configuration",
    "start": "730079",
    "end": "731920"
  },
  {
    "text": "and basically scrape a remote cluster",
    "start": "731920",
    "end": "736000"
  },
  {
    "text": "there are a few downsides to this",
    "start": "736000",
    "end": "738240"
  },
  {
    "text": "well first of all you need to have",
    "start": "738240",
    "end": "739760"
  },
  {
    "text": "access to your external cluster",
    "start": "739760",
    "end": "743120"
  },
  {
    "text": "because it is gathering the information",
    "start": "743120",
    "end": "745440"
  },
  {
    "text": "about your services via the api server",
    "start": "745440",
    "end": "748240"
  },
  {
    "text": "so you will need to have access to your",
    "start": "748240",
    "end": "750399"
  },
  {
    "text": "other server",
    "start": "750399",
    "end": "752880"
  },
  {
    "text": "and",
    "start": "752880",
    "end": "753680"
  },
  {
    "text": "this guide this might be just a little",
    "start": "753680",
    "end": "755760"
  },
  {
    "text": "bit annoying for you",
    "start": "755760",
    "end": "758240"
  },
  {
    "start": "758000",
    "end": "803000"
  },
  {
    "text": "perhaps another solution which i",
    "start": "758240",
    "end": "760399"
  },
  {
    "text": "personally",
    "start": "760399",
    "end": "761440"
  },
  {
    "text": "don't recommend is using federation so",
    "start": "761440",
    "end": "764560"
  },
  {
    "text": "federation is just a native",
    "start": "764560",
    "end": "767040"
  },
  {
    "text": "solution within prometheus which allows",
    "start": "767040",
    "end": "769120"
  },
  {
    "text": "you to",
    "start": "769120",
    "end": "770959"
  },
  {
    "text": "scrape different prometheus surface",
    "start": "770959",
    "end": "773839"
  },
  {
    "text": "so what we could do is implement a",
    "start": "773839",
    "end": "776959"
  },
  {
    "text": "prometheus server on your external",
    "start": "776959",
    "end": "779040"
  },
  {
    "text": "clustering",
    "start": "779040",
    "end": "780480"
  },
  {
    "text": "and just expose your",
    "start": "780480",
    "end": "782800"
  },
  {
    "text": "prometheus and let it be scraped by a",
    "start": "782800",
    "end": "785839"
  },
  {
    "text": "central cluster",
    "start": "785839",
    "end": "788480"
  },
  {
    "text": "this works",
    "start": "788480",
    "end": "789760"
  },
  {
    "text": "but i wouldn't recommend",
    "start": "789760",
    "end": "791680"
  },
  {
    "text": "because it",
    "start": "791680",
    "end": "792880"
  },
  {
    "text": "requires a lot of data to be sprayed",
    "start": "792880",
    "end": "795839"
  },
  {
    "text": "there can be massive amounts of metrics",
    "start": "795839",
    "end": "798079"
  },
  {
    "text": "on your kubernetes cluster and if this",
    "start": "798079",
    "end": "800079"
  },
  {
    "text": "grows this solution doesn't scale that",
    "start": "800079",
    "end": "802560"
  },
  {
    "text": "well",
    "start": "802560",
    "end": "803920"
  },
  {
    "start": "803000",
    "end": "851000"
  },
  {
    "text": "another solution which i just added for",
    "start": "803920",
    "end": "807120"
  },
  {
    "text": "completion is expose your metric",
    "start": "807120",
    "end": "809680"
  },
  {
    "text": "endpoints in another cluster",
    "start": "809680",
    "end": "811760"
  },
  {
    "text": "so let's say you only have one endpoint",
    "start": "811760",
    "end": "814480"
  },
  {
    "text": "one metric endpoint in the external",
    "start": "814480",
    "end": "816399"
  },
  {
    "text": "cluster you could add an ingress in",
    "start": "816399",
    "end": "819680"
  },
  {
    "text": "front of that and just let it expose and",
    "start": "819680",
    "end": "822480"
  },
  {
    "text": "add that as a static target to your",
    "start": "822480",
    "end": "824800"
  },
  {
    "text": "central cluster",
    "start": "824800",
    "end": "826320"
  },
  {
    "text": "to be honest the solution is",
    "start": "826320",
    "end": "828639"
  },
  {
    "text": "meh",
    "start": "828639",
    "end": "830399"
  },
  {
    "text": "i wouldn't know why you want to do this",
    "start": "830399",
    "end": "833040"
  },
  {
    "text": "but it is a possibility",
    "start": "833040",
    "end": "835760"
  },
  {
    "text": "i normally assume that you want to have",
    "start": "835760",
    "end": "838320"
  },
  {
    "text": "all your metrics",
    "start": "838320",
    "end": "840320"
  },
  {
    "text": "well gathered from your clusters and not",
    "start": "840320",
    "end": "842480"
  },
  {
    "text": "just one single point",
    "start": "842480",
    "end": "844399"
  },
  {
    "text": "but if this is your use case you could",
    "start": "844399",
    "end": "847199"
  },
  {
    "text": "do this and just define your target as a",
    "start": "847199",
    "end": "850000"
  },
  {
    "text": "static target so i've talked a little",
    "start": "850000",
    "end": "852639"
  },
  {
    "start": "851000",
    "end": "879000"
  },
  {
    "text": "bit about some form of limitations and",
    "start": "852639",
    "end": "855680"
  },
  {
    "text": "prometheus but it doesn't make",
    "start": "855680",
    "end": "857360"
  },
  {
    "text": "prometheus bad or anything",
    "start": "857360",
    "end": "859680"
  },
  {
    "text": "in fact we actually really love",
    "start": "859680",
    "end": "861680"
  },
  {
    "text": "prometheus and this is where the talk of",
    "start": "861680",
    "end": "864720"
  },
  {
    "text": "dance is about about",
    "start": "864720",
    "end": "866880"
  },
  {
    "text": "extending prometheus because we like",
    "start": "866880",
    "end": "869680"
  },
  {
    "text": "prometheus and there's a lot of love",
    "start": "869680",
    "end": "872000"
  },
  {
    "text": "between our communities",
    "start": "872000",
    "end": "874240"
  },
  {
    "text": "and",
    "start": "874240",
    "end": "875199"
  },
  {
    "text": "yeah let's get started about talking",
    "start": "875199",
    "end": "877279"
  },
  {
    "text": "about tunnels",
    "start": "877279",
    "end": "880320"
  },
  {
    "start": "879000",
    "end": "966000"
  },
  {
    "text": "first of all our community i think we",
    "start": "880320",
    "end": "882560"
  },
  {
    "text": "are really proud about everyone involved",
    "start": "882560",
    "end": "885519"
  },
  {
    "text": "in the dallas community we are aware",
    "start": "885519",
    "end": "888079"
  },
  {
    "text": "fully sourced from the start",
    "start": "888079",
    "end": "890560"
  },
  {
    "text": "and well it's been a few years we",
    "start": "890560",
    "end": "893279"
  },
  {
    "text": "started in november in 2017.",
    "start": "893279",
    "end": "896160"
  },
  {
    "text": "myself not included i just came on later",
    "start": "896160",
    "end": "900160"
  },
  {
    "text": "um",
    "start": "900160",
    "end": "901040"
  },
  {
    "text": "yeah and we are on cncf incubating",
    "start": "901040",
    "end": "903199"
  },
  {
    "text": "project and personally for myself this",
    "start": "903199",
    "end": "906000"
  },
  {
    "text": "is really important as i said i really",
    "start": "906000",
    "end": "908320"
  },
  {
    "text": "love open source",
    "start": "908320",
    "end": "910160"
  },
  {
    "text": "but i guess it's perhaps even more",
    "start": "910160",
    "end": "912959"
  },
  {
    "text": "important about what company or",
    "start": "912959",
    "end": "915760"
  },
  {
    "text": "foundation is behind an open source",
    "start": "915760",
    "end": "918320"
  },
  {
    "text": "project",
    "start": "918320",
    "end": "919600"
  },
  {
    "text": "and this is why i love the cncf um well",
    "start": "919600",
    "end": "922880"
  },
  {
    "text": "we have transparent governance um we do",
    "start": "922880",
    "end": "926720"
  },
  {
    "text": "maximum of two votes per company",
    "start": "926720",
    "end": "929199"
  },
  {
    "text": "involved in the project",
    "start": "929199",
    "end": "931440"
  },
  {
    "text": "and i mean this is really important for",
    "start": "931440",
    "end": "933839"
  },
  {
    "text": "an open source project to maintain a",
    "start": "933839",
    "end": "936320"
  },
  {
    "text": "healthy state",
    "start": "936320",
    "end": "937680"
  },
  {
    "text": "and i really like that",
    "start": "937680",
    "end": "940560"
  },
  {
    "text": "we're also hitting almost ten thousand",
    "start": "940560",
    "end": "942880"
  },
  {
    "text": "github stars which would be",
    "start": "942880",
    "end": "945600"
  },
  {
    "text": "another milestone for this project and",
    "start": "945600",
    "end": "948480"
  },
  {
    "text": "we have so many contributors and slack",
    "start": "948480",
    "end": "951279"
  },
  {
    "text": "users are really active and i really",
    "start": "951279",
    "end": "954240"
  },
  {
    "text": "love the vibes",
    "start": "954240",
    "end": "955680"
  },
  {
    "text": "on our slack so please feel welcome to",
    "start": "955680",
    "end": "958480"
  },
  {
    "text": "join us on cncf slack on darno's channel",
    "start": "958480",
    "end": "961920"
  },
  {
    "text": "happy to see you there and feel free to",
    "start": "961920",
    "end": "964639"
  },
  {
    "text": "ask questions there",
    "start": "964639",
    "end": "966639"
  },
  {
    "start": "966000",
    "end": "1006000"
  },
  {
    "text": "don't always take my only word for it we",
    "start": "966639",
    "end": "969680"
  },
  {
    "text": "have numerous companies running thousand",
    "start": "969680",
    "end": "971920"
  },
  {
    "text": "production to ensure they have reliable",
    "start": "971920",
    "end": "974240"
  },
  {
    "text": "and scalable monetary platform i'm also",
    "start": "974240",
    "end": "976880"
  },
  {
    "text": "really uh really happy that those",
    "start": "976880",
    "end": "979279"
  },
  {
    "text": "companies are willing to add themselves",
    "start": "979279",
    "end": "981440"
  },
  {
    "text": "to the adoption page",
    "start": "981440",
    "end": "983759"
  },
  {
    "text": "on our github",
    "start": "983759",
    "end": "985360"
  },
  {
    "text": "and also if you are listening right now",
    "start": "985360",
    "end": "987680"
  },
  {
    "text": "and you're using downloads",
    "start": "987680",
    "end": "989839"
  },
  {
    "text": "please feel free to add yourself to the",
    "start": "989839",
    "end": "992160"
  },
  {
    "text": "adopter list",
    "start": "992160",
    "end": "994320"
  },
  {
    "text": "if you are unsure on how to do that just",
    "start": "994320",
    "end": "997120"
  },
  {
    "text": "give me a message or find us on slack",
    "start": "997120",
    "end": "1000160"
  },
  {
    "text": "i'm happy to help you here",
    "start": "1000160",
    "end": "1002320"
  },
  {
    "text": "and again thanks for everyone involved",
    "start": "1002320",
    "end": "1004880"
  },
  {
    "text": "in this project",
    "start": "1004880",
    "end": "1006639"
  },
  {
    "start": "1006000",
    "end": "1108000"
  },
  {
    "text": "so let's get started about the feature",
    "start": "1006639",
    "end": "1008959"
  },
  {
    "text": "of thanos so i guess",
    "start": "1008959",
    "end": "1011600"
  },
  {
    "text": "one of the main things is the global",
    "start": "1011600",
    "end": "1013759"
  },
  {
    "text": "career review",
    "start": "1013759",
    "end": "1015279"
  },
  {
    "text": "so we can have",
    "start": "1015279",
    "end": "1016959"
  },
  {
    "text": "a multiple clusters with prometheus and",
    "start": "1016959",
    "end": "1019920"
  },
  {
    "text": "we can add them all to a unified way to",
    "start": "1019920",
    "end": "1022800"
  },
  {
    "text": "query them all which is really awesome",
    "start": "1022800",
    "end": "1025918"
  },
  {
    "text": "and i will get back to on how this works",
    "start": "1025919",
    "end": "1028720"
  },
  {
    "text": "and how it would look like",
    "start": "1028720",
    "end": "1031120"
  },
  {
    "text": "it also unlimited retention and perhaps",
    "start": "1031120",
    "end": "1034480"
  },
  {
    "text": "this is weird i mean you can have a",
    "start": "1034480",
    "end": "1036558"
  },
  {
    "text": "limited retention for everything but",
    "start": "1036559",
    "end": "1039600"
  },
  {
    "text": "what thomas incorporates is storing the",
    "start": "1039600",
    "end": "1041839"
  },
  {
    "text": "data on the object store so it's really",
    "start": "1041839",
    "end": "1043760"
  },
  {
    "text": "cheap and efficient and the skills and",
    "start": "1043760",
    "end": "1047120"
  },
  {
    "text": "that makes it the unlimited retention",
    "start": "1047120",
    "end": "1051520"
  },
  {
    "text": "and",
    "start": "1051520",
    "end": "1052799"
  },
  {
    "text": "thanos is also prometheus compatible a",
    "start": "1052799",
    "end": "1055600"
  },
  {
    "text": "lot of our source code is",
    "start": "1055600",
    "end": "1058320"
  },
  {
    "text": "basically part of prometheus itself",
    "start": "1058320",
    "end": "1061840"
  },
  {
    "text": "we use the same api for queries and from",
    "start": "1061840",
    "end": "1065039"
  },
  {
    "text": "wow and basically it's a plug and play",
    "start": "1065039",
    "end": "1068480"
  },
  {
    "text": "compatibility",
    "start": "1068480",
    "end": "1071440"
  },
  {
    "text": "another cool feature is the downsampling",
    "start": "1071600",
    "end": "1075520"
  },
  {
    "text": "let's say we have metrics for a two year",
    "start": "1075520",
    "end": "1078840"
  },
  {
    "text": "retention if i'm going to",
    "start": "1078840",
    "end": "1082000"
  },
  {
    "text": "display this in a nice visualization",
    "start": "1082000",
    "end": "1084160"
  },
  {
    "text": "chart in grafana i'm not going to plot",
    "start": "1084160",
    "end": "1087679"
  },
  {
    "text": "every",
    "start": "1087679",
    "end": "1088799"
  },
  {
    "text": "30 seconds on a two-year timeline",
    "start": "1088799",
    "end": "1092400"
  },
  {
    "text": "this will be",
    "start": "1092400",
    "end": "1094400"
  },
  {
    "text": "a few lesser plots",
    "start": "1094400",
    "end": "1097200"
  },
  {
    "text": "and we can just downsample this data to",
    "start": "1097200",
    "end": "1100000"
  },
  {
    "text": "make really efficient long-term",
    "start": "1100000",
    "end": "1102960"
  },
  {
    "text": "uh queries for yourself",
    "start": "1102960",
    "end": "1105679"
  },
  {
    "text": "which really speeds up the process",
    "start": "1105679",
    "end": "1108640"
  },
  {
    "text": "dance consists of multiple components",
    "start": "1108640",
    "end": "1111440"
  },
  {
    "text": "and",
    "start": "1111440",
    "end": "1112240"
  },
  {
    "text": "well",
    "start": "1112240",
    "end": "1113120"
  },
  {
    "text": "the four core components that i'm going",
    "start": "1113120",
    "end": "1115360"
  },
  {
    "text": "to cover in this talk is the side card",
    "start": "1115360",
    "end": "1117840"
  },
  {
    "text": "the query component the store and the",
    "start": "1117840",
    "end": "1120080"
  },
  {
    "text": "compact components",
    "start": "1120080",
    "end": "1121760"
  },
  {
    "text": "there are more components but just for",
    "start": "1121760",
    "end": "1124000"
  },
  {
    "text": "the sake of this i'm just",
    "start": "1124000",
    "end": "1126240"
  },
  {
    "text": "going through",
    "start": "1126240",
    "end": "1127360"
  },
  {
    "text": "these four components as they are the",
    "start": "1127360",
    "end": "1129520"
  },
  {
    "text": "most important and provides the most",
    "start": "1129520",
    "end": "1131840"
  },
  {
    "text": "value",
    "start": "1131840",
    "end": "1133200"
  },
  {
    "start": "1133000",
    "end": "1169000"
  },
  {
    "text": "so the sidecar can just be hooked next",
    "start": "1133200",
    "end": "1136720"
  },
  {
    "text": "to prometheus which makes it really plug",
    "start": "1136720",
    "end": "1139039"
  },
  {
    "text": "and play",
    "start": "1139039",
    "end": "1140320"
  },
  {
    "text": "we can just add that as a sidecar",
    "start": "1140320",
    "end": "1143919"
  },
  {
    "text": "it's optionally",
    "start": "1143919",
    "end": "1146080"
  },
  {
    "text": "capable of uploading your metrics to the",
    "start": "1146080",
    "end": "1148160"
  },
  {
    "text": "opex store we don't need to use this",
    "start": "1148160",
    "end": "1151440"
  },
  {
    "text": "you don't have to use the object store",
    "start": "1151440",
    "end": "1154080"
  },
  {
    "text": "or long-term metrics if you just want to",
    "start": "1154080",
    "end": "1156640"
  },
  {
    "text": "use tunnels for a unified way to query",
    "start": "1156640",
    "end": "1159520"
  },
  {
    "text": "all your prometheuses that's fine as",
    "start": "1159520",
    "end": "1161840"
  },
  {
    "text": "well",
    "start": "1161840",
    "end": "1163520"
  },
  {
    "text": "and the sidecar enables the querier to",
    "start": "1163520",
    "end": "1166240"
  },
  {
    "text": "actually query our data",
    "start": "1166240",
    "end": "1168880"
  },
  {
    "text": "and as discussed well the query is able",
    "start": "1168880",
    "end": "1172240"
  },
  {
    "text": "to see every component so our stores and",
    "start": "1172240",
    "end": "1176400"
  },
  {
    "text": "other side cars every component",
    "start": "1176400",
    "end": "1179280"
  },
  {
    "text": "implements this store api and the query",
    "start": "1179280",
    "end": "1182160"
  },
  {
    "text": "component can just discover these",
    "start": "1182160",
    "end": "1185039"
  },
  {
    "text": "targets and allows you to query on",
    "start": "1185039",
    "end": "1188160"
  },
  {
    "text": "whatever component of tunnels that you",
    "start": "1188160",
    "end": "1190080"
  },
  {
    "text": "want and i will go into a little bit",
    "start": "1190080",
    "end": "1192960"
  },
  {
    "text": "more details later on about this",
    "start": "1192960",
    "end": "1196799"
  },
  {
    "start": "1196000",
    "end": "1231000"
  },
  {
    "text": "and we have this compactor and the",
    "start": "1197360",
    "end": "1199280"
  },
  {
    "text": "compactor is basically a procedure",
    "start": "1199280",
    "end": "1203679"
  },
  {
    "text": "which prometheus hasn't done yet because",
    "start": "1203679",
    "end": "1206480"
  },
  {
    "text": "we are storing our data to the object",
    "start": "1206480",
    "end": "1208320"
  },
  {
    "text": "store prometheus isn't compacting our",
    "start": "1208320",
    "end": "1210320"
  },
  {
    "text": "data yet",
    "start": "1210320",
    "end": "1211840"
  },
  {
    "text": "and this is where the compactor comes in",
    "start": "1211840",
    "end": "1214159"
  },
  {
    "text": "and the compactor",
    "start": "1214159",
    "end": "1215170"
  },
  {
    "text": "[Music]",
    "start": "1215170",
    "end": "1216320"
  },
  {
    "text": "component allows you to compact the data",
    "start": "1216320",
    "end": "1219120"
  },
  {
    "text": "which is more efficient",
    "start": "1219120",
    "end": "1221280"
  },
  {
    "text": "is also responsible for downside blaming",
    "start": "1221280",
    "end": "1224240"
  },
  {
    "text": "our data for the longer term metrics",
    "start": "1224240",
    "end": "1226559"
  },
  {
    "text": "which speeds up things very well",
    "start": "1226559",
    "end": "1230480"
  },
  {
    "text": "we also have the store component and",
    "start": "1232720",
    "end": "1235360"
  },
  {
    "text": "the the core feature of the store",
    "start": "1235360",
    "end": "1237039"
  },
  {
    "text": "component is to act as an api gateway to",
    "start": "1237039",
    "end": "1240400"
  },
  {
    "text": "our object store",
    "start": "1240400",
    "end": "1242720"
  },
  {
    "text": "and this store component allows us to",
    "start": "1242720",
    "end": "1245440"
  },
  {
    "text": "query our historical data in the soul",
    "start": "1245440",
    "end": "1247840"
  },
  {
    "text": "click store",
    "start": "1247840",
    "end": "1250320"
  },
  {
    "text": "so this is an example of a typical",
    "start": "1254080",
    "end": "1256159"
  },
  {
    "text": "highly available setup",
    "start": "1256159",
    "end": "1257919"
  },
  {
    "text": "which incorporates",
    "start": "1257919",
    "end": "1260000"
  },
  {
    "text": "so as you can see i have multiple",
    "start": "1260000",
    "end": "1261520"
  },
  {
    "text": "clusters and each cluster is running on",
    "start": "1261520",
    "end": "1264400"
  },
  {
    "text": "prometheus and each prometheus has a",
    "start": "1264400",
    "end": "1266960"
  },
  {
    "text": "sidecar with down sidecar",
    "start": "1266960",
    "end": "1270640"
  },
  {
    "text": "we also have a generic monitoring",
    "start": "1270640",
    "end": "1273039"
  },
  {
    "text": "cluster and",
    "start": "1273039",
    "end": "1275039"
  },
  {
    "text": "we have two",
    "start": "1275039",
    "end": "1276559"
  },
  {
    "text": "query components",
    "start": "1276559",
    "end": "1278159"
  },
  {
    "text": "and these are stateless and you can run",
    "start": "1278159",
    "end": "1280880"
  },
  {
    "text": "multiple replicas of this",
    "start": "1280880",
    "end": "1283280"
  },
  {
    "text": "and we have grafana which",
    "start": "1283280",
    "end": "1285760"
  },
  {
    "text": "hooks into the query component so we are",
    "start": "1285760",
    "end": "1288159"
  },
  {
    "text": "querying",
    "start": "1288159",
    "end": "1289440"
  },
  {
    "text": "grafana to the query component and the",
    "start": "1289440",
    "end": "1291919"
  },
  {
    "text": "query components are doing their queries",
    "start": "1291919",
    "end": "1294480"
  },
  {
    "text": "to our sidebars",
    "start": "1294480",
    "end": "1297760"
  },
  {
    "text": "and as you can see cluster 2 has",
    "start": "1298080",
    "end": "1300320"
  },
  {
    "text": "multiple replicas",
    "start": "1300320",
    "end": "1302960"
  },
  {
    "text": "and",
    "start": "1302960",
    "end": "1303679"
  },
  {
    "text": "the great part of this is that the query",
    "start": "1303679",
    "end": "1305679"
  },
  {
    "text": "component does deduplication on the fly",
    "start": "1305679",
    "end": "1309039"
  },
  {
    "text": "so even if in cluster 2 one node goes",
    "start": "1309039",
    "end": "1312000"
  },
  {
    "text": "down or prometheus goes down",
    "start": "1312000",
    "end": "1314000"
  },
  {
    "text": "we can still have our data",
    "start": "1314000",
    "end": "1316559"
  },
  {
    "text": "and",
    "start": "1316559",
    "end": "1317679"
  },
  {
    "text": "well",
    "start": "1317679",
    "end": "1319039"
  },
  {
    "text": "when for example the prometheus is back",
    "start": "1319039",
    "end": "1321520"
  },
  {
    "text": "online we used to have this gap in our",
    "start": "1321520",
    "end": "1324000"
  },
  {
    "text": "data if we",
    "start": "1324000",
    "end": "1325600"
  },
  {
    "text": "for example hit exactly that prometheus",
    "start": "1325600",
    "end": "1328080"
  },
  {
    "text": "that was offline for a certain amount of",
    "start": "1328080",
    "end": "1330240"
  },
  {
    "text": "time or the query components just",
    "start": "1330240",
    "end": "1332559"
  },
  {
    "text": "prevents that as it does the duplication",
    "start": "1332559",
    "end": "1334799"
  },
  {
    "text": "of the data so you always have the same",
    "start": "1334799",
    "end": "1337600"
  },
  {
    "text": "unified way to displace your data",
    "start": "1337600",
    "end": "1341840"
  },
  {
    "text": "and we can extend this further to allow",
    "start": "1344880",
    "end": "1346880"
  },
  {
    "text": "the sidecar to upload the data to the",
    "start": "1346880",
    "end": "1348880"
  },
  {
    "text": "object store",
    "start": "1348880",
    "end": "1351280"
  },
  {
    "text": "this is not entirely enough this is the",
    "start": "1351280",
    "end": "1353600"
  },
  {
    "text": "first step so it will upload the data",
    "start": "1353600",
    "end": "1358400"
  },
  {
    "text": "and we can add the store component to",
    "start": "1358400",
    "end": "1360880"
  },
  {
    "text": "actually allow us to query this object",
    "start": "1360880",
    "end": "1363200"
  },
  {
    "text": "store",
    "start": "1363200",
    "end": "1365519"
  },
  {
    "text": "but we can do a lot of different things",
    "start": "1369600",
    "end": "1372159"
  },
  {
    "text": "as you can see here we have one cluster",
    "start": "1372159",
    "end": "1373919"
  },
  {
    "text": "with only a side card and we have",
    "start": "1373919",
    "end": "1375679"
  },
  {
    "text": "another cluster with a query component",
    "start": "1375679",
    "end": "1377760"
  },
  {
    "text": "and store component and the sidebar",
    "start": "1377760",
    "end": "1380720"
  },
  {
    "text": "and this works just as well",
    "start": "1380720",
    "end": "1382880"
  },
  {
    "text": "so in a monitoring cluster we have a",
    "start": "1382880",
    "end": "1385039"
  },
  {
    "text": "unified way to query all our clusters",
    "start": "1385039",
    "end": "1389440"
  },
  {
    "text": "but we only have one cluster with a",
    "start": "1389440",
    "end": "1391679"
  },
  {
    "text": "long-term metrics and this works just",
    "start": "1391679",
    "end": "1394480"
  },
  {
    "text": "fine and this is really awesome",
    "start": "1394480",
    "end": "1398559"
  },
  {
    "text": "and we can",
    "start": "1399520",
    "end": "1400720"
  },
  {
    "text": "go just further um we can add another",
    "start": "1400720",
    "end": "1403360"
  },
  {
    "text": "profana with multiple query components",
    "start": "1403360",
    "end": "1405520"
  },
  {
    "text": "on our cluster one",
    "start": "1405520",
    "end": "1407200"
  },
  {
    "text": "and this might be really useful if you",
    "start": "1407200",
    "end": "1409280"
  },
  {
    "text": "are working with different teams",
    "start": "1409280",
    "end": "1412000"
  },
  {
    "text": "wanting their own grafana handsets",
    "start": "1412000",
    "end": "1414480"
  },
  {
    "text": "that's possible we can just have this",
    "start": "1414480",
    "end": "1416640"
  },
  {
    "text": "one cluster atom profana at the queer",
    "start": "1416640",
    "end": "1419200"
  },
  {
    "text": "components and we still have our",
    "start": "1419200",
    "end": "1421120"
  },
  {
    "text": "monitoring cluster in which we can see",
    "start": "1421120",
    "end": "1423279"
  },
  {
    "text": "all our clusters",
    "start": "1423279",
    "end": "1426159"
  },
  {
    "text": "and we can just continue doing this we",
    "start": "1429039",
    "end": "1431919"
  },
  {
    "text": "can",
    "start": "1431919",
    "end": "1432880"
  },
  {
    "text": "well for example have a team that has",
    "start": "1432880",
    "end": "1435039"
  },
  {
    "text": "two clusters",
    "start": "1435039",
    "end": "1437120"
  },
  {
    "text": "and you want to give them their own",
    "start": "1437120",
    "end": "1439679"
  },
  {
    "text": "profiling instance and now",
    "start": "1439679",
    "end": "1442240"
  },
  {
    "text": "if you are in the grafana on cluster one",
    "start": "1442240",
    "end": "1444720"
  },
  {
    "text": "you are able to query with the unified",
    "start": "1444720",
    "end": "1447039"
  },
  {
    "text": "view a cluster one and cluster two",
    "start": "1447039",
    "end": "1450320"
  },
  {
    "text": "but we still have this monitor on",
    "start": "1450320",
    "end": "1451919"
  },
  {
    "text": "cluster in which we can see everything",
    "start": "1451919",
    "end": "1454720"
  },
  {
    "text": "for example if we have a third cluster",
    "start": "1454720",
    "end": "1458320"
  },
  {
    "start": "1457000",
    "end": "1493000"
  },
  {
    "text": "and we can go basically bananas",
    "start": "1458320",
    "end": "1461200"
  },
  {
    "text": "this is a draft that i",
    "start": "1461200",
    "end": "1463200"
  },
  {
    "text": "made a while ago and i just figured to",
    "start": "1463200",
    "end": "1465520"
  },
  {
    "text": "include this",
    "start": "1465520",
    "end": "1466799"
  },
  {
    "text": "this is just having",
    "start": "1466799",
    "end": "1469039"
  },
  {
    "text": "various components and as you can see",
    "start": "1469039",
    "end": "1471120"
  },
  {
    "text": "everything is just chainable plugable",
    "start": "1471120",
    "end": "1474400"
  },
  {
    "text": "and",
    "start": "1474400",
    "end": "1475520"
  },
  {
    "text": "you don't have to go into details of",
    "start": "1475520",
    "end": "1477440"
  },
  {
    "text": "this graph what i'm trying to say with",
    "start": "1477440",
    "end": "1479440"
  },
  {
    "text": "this is that it's really well to just",
    "start": "1479440",
    "end": "1482320"
  },
  {
    "text": "plug and play to make changes to switch",
    "start": "1482320",
    "end": "1485279"
  },
  {
    "text": "things up and to move things through",
    "start": "1485279",
    "end": "1488640"
  },
  {
    "text": "various pipelines basically",
    "start": "1488640",
    "end": "1491039"
  },
  {
    "text": "and this makes it really robust",
    "start": "1491039",
    "end": "1494320"
  },
  {
    "text": "and you might say how do i get started",
    "start": "1494320",
    "end": "1497279"
  },
  {
    "text": "well first of all please check out our",
    "start": "1497279",
    "end": "1499200"
  },
  {
    "text": "website",
    "start": "1499200",
    "end": "1501039"
  },
  {
    "text": "i will upload",
    "start": "1501039",
    "end": "1502799"
  },
  {
    "text": "these slides and you can check all the",
    "start": "1502799",
    "end": "1504559"
  },
  {
    "text": "links for yourself but basically",
    "start": "1504559",
    "end": "1506640"
  },
  {
    "text": "artana's website has lots of information",
    "start": "1506640",
    "end": "1509279"
  },
  {
    "text": "and again if you are missing anything",
    "start": "1509279",
    "end": "1511279"
  },
  {
    "text": "please create an issue or a pull request",
    "start": "1511279",
    "end": "1515039"
  },
  {
    "text": "happy to improve this",
    "start": "1515039",
    "end": "1516880"
  },
  {
    "text": "i also want to give a shout out to the",
    "start": "1516880",
    "end": "1518880"
  },
  {
    "text": "prometheus operator",
    "start": "1518880",
    "end": "1520799"
  },
  {
    "text": "which is really awesome to have like a",
    "start": "1520799",
    "end": "1523200"
  },
  {
    "text": "unified way to set up your prometheuses",
    "start": "1523200",
    "end": "1525760"
  },
  {
    "text": "and it also allows you to incorporate",
    "start": "1525760",
    "end": "1527919"
  },
  {
    "text": "down sight r with the primitive operator",
    "start": "1527919",
    "end": "1531440"
  },
  {
    "text": "there's also the the cube tunnels uh elm",
    "start": "1531440",
    "end": "1534000"
  },
  {
    "text": "chart",
    "start": "1534000",
    "end": "1535120"
  },
  {
    "text": "i personally",
    "start": "1535120",
    "end": "1536240"
  },
  {
    "text": "haven't used it but",
    "start": "1536240",
    "end": "1538159"
  },
  {
    "text": "i'm aware that a lot of people are using",
    "start": "1538159",
    "end": "1540400"
  },
  {
    "text": "it so i will just include it",
    "start": "1540400",
    "end": "1542880"
  },
  {
    "text": "and they're also community chart which",
    "start": "1542880",
    "end": "1545440"
  },
  {
    "text": "is just a search and there are multiple",
    "start": "1545440",
    "end": "1547840"
  },
  {
    "text": "of those",
    "start": "1547840",
    "end": "1549919"
  },
  {
    "text": "i'm also really proud to have a cocktail",
    "start": "1549919",
    "end": "1552480"
  },
  {
    "text": "down which is",
    "start": "1552480",
    "end": "1554640"
  },
  {
    "text": "basically are a course of donors",
    "start": "1554640",
    "end": "1558000"
  },
  {
    "text": "and there are seven lessons which get",
    "start": "1558000",
    "end": "1560000"
  },
  {
    "text": "you started with using prometheus and",
    "start": "1560000",
    "end": "1562559"
  },
  {
    "text": "tunnels",
    "start": "1562559",
    "end": "1564000"
  },
  {
    "text": "and i really would recommend you to try",
    "start": "1564000",
    "end": "1566480"
  },
  {
    "text": "out dakota",
    "start": "1566480",
    "end": "1568720"
  },
  {
    "text": "if you think this talk was really nice",
    "start": "1568720",
    "end": "1571360"
  },
  {
    "text": "please do check it out",
    "start": "1571360",
    "end": "1574240"
  },
  {
    "start": "1573000",
    "end": "1615000"
  },
  {
    "text": "and we also have more so we have our",
    "start": "1574240",
    "end": "1576159"
  },
  {
    "text": "slack",
    "start": "1576159",
    "end": "1577120"
  },
  {
    "text": "it's on the cncf slack and we have our",
    "start": "1577120",
    "end": "1579520"
  },
  {
    "text": "channels there",
    "start": "1579520",
    "end": "1580799"
  },
  {
    "text": "feel free to join and we also have",
    "start": "1580799",
    "end": "1583440"
  },
  {
    "text": "questions and discussions on our github",
    "start": "1583440",
    "end": "1586000"
  },
  {
    "text": "and obviously our get up in general for",
    "start": "1586000",
    "end": "1588240"
  },
  {
    "text": "poor question issues and again check out",
    "start": "1588240",
    "end": "1591360"
  },
  {
    "text": "our website and i would like to thank",
    "start": "1591360",
    "end": "1593840"
  },
  {
    "text": "you all and our community everyone",
    "start": "1593840",
    "end": "1596480"
  },
  {
    "text": "involved in tunnels and cncf and thanks",
    "start": "1596480",
    "end": "1599679"
  },
  {
    "text": "so much for having me here i hope",
    "start": "1599679",
    "end": "1602640"
  },
  {
    "text": "everyone had a great time and",
    "start": "1602640",
    "end": "1605600"
  },
  {
    "text": "still enjoys other talks",
    "start": "1605600",
    "end": "1607840"
  },
  {
    "text": "and hopefully next year we can see all",
    "start": "1607840",
    "end": "1610640"
  },
  {
    "text": "each other in real life",
    "start": "1610640",
    "end": "1612480"
  },
  {
    "text": "really looking forward to that",
    "start": "1612480",
    "end": "1614400"
  },
  {
    "text": "thank you",
    "start": "1614400",
    "end": "1617640"
  }
]