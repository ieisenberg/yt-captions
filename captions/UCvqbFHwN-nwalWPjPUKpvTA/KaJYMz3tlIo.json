[
  {
    "text": "all right hello everyone thanks for coming uh before I begin did anyone lose",
    "start": "399",
    "end": "7160"
  },
  {
    "text": "a large roll of money wrapped in a rubber band cuz I found the rubber",
    "start": "7160",
    "end": "12920"
  },
  {
    "text": "band terrible joke as bad as the first time Dr Octavius told it anyways this",
    "start": "12920",
    "end": "19359"
  },
  {
    "text": "talk is about how we optimize developer productivity with telepresence some",
    "start": "19359",
    "end": "24480"
  },
  {
    "text": "black magic made by folks are there at Ambassador Labs my name is Frank goo",
    "start": "24480",
    "end": "30880"
  },
  {
    "text": "so first of all a little bit about myself I have about 10 years of full stack experience by full stack I started",
    "start": "30880",
    "end": "38360"
  },
  {
    "text": "from the printed circuit boards as an electrical engineer worked my way through up the stack with embedded",
    "start": "38360",
    "end": "44360"
  },
  {
    "text": "systems networking etc etc software development and finally I made my way to",
    "start": "44360",
    "end": "49600"
  },
  {
    "text": "the cloud and that's where I found my calling today I worked in Engineering Management and I run a",
    "start": "49600",
    "end": "55800"
  },
  {
    "text": "team fun fact about myself I'm a licensed pilot and my role today is the",
    "start": "55800",
    "end": "61640"
  },
  {
    "text": "director of engineering at voice flow we are a post series a startup that",
    "start": "61640",
    "end": "67360"
  },
  {
    "text": "specializes in building an IDE for building chat Bots involving gen technology as a startup one of the key",
    "start": "67360",
    "end": "75880"
  },
  {
    "text": "characteristics is that I have to play many roles so I'm also a hack collector",
    "start": "75880",
    "end": "81280"
  },
  {
    "text": "I've played software developer devops business relations as well as",
    "start": "81280",
    "end": "87680"
  },
  {
    "text": "various fundraising activities and helping out with marketing but the one area that interests me the most is the",
    "start": "87680",
    "end": "94360"
  },
  {
    "text": "one related to developer productivity any improvements we make in developer productivity will have multiplicative",
    "start": "94360",
    "end": "100560"
  },
  {
    "text": "effects on the efficacy of my team so naturally this topic interests me",
    "start": "100560",
    "end": "105640"
  },
  {
    "text": "greatly how can I augment the productivity of our team who is this talk for well this talk",
    "start": "105640",
    "end": "113280"
  },
  {
    "text": "is mainly for people who just interact with kubernetes and want to develop with very fast iteration Cycles",
    "start": "113280",
    "end": "120640"
  },
  {
    "text": "I won't get into super deep Tech but if you want more details about what telepresence looks like under the hood",
    "start": "120640",
    "end": "127799"
  },
  {
    "text": "feel free to ping me after the presentation more than happy to discuss and Dive Right In the agenda today we",
    "start": "127799",
    "end": "133959"
  },
  {
    "text": "first go over what the problem that haunts voice flow and some of the dev Community around kubernetes is some of",
    "start": "133959",
    "end": "142319"
  },
  {
    "text": "the potential solutions that we've tried and figured out painfully that it didn't",
    "start": "142319",
    "end": "147800"
  },
  {
    "text": "work what is telepresence and how do you tele APR presence into kubernetes and there will be a live demo",
    "start": "147800",
    "end": "154599"
  },
  {
    "text": "where I can showcase how this would work in practice and finally I'll go over some key considerations in deploying",
    "start": "154599",
    "end": "160200"
  },
  {
    "text": "this technology into your workloads so let's start off with the container",
    "start": "160200",
    "end": "165519"
  },
  {
    "text": "workflow traditionally we just code build reload make sure it works hello",
    "start": "165519",
    "end": "171080"
  },
  {
    "text": "world things work great to commit it and that's probably one iteration when we",
    "start": "171080",
    "end": "176239"
  },
  {
    "text": "started moving into containers though we had to add this extra EXT ra step in the container build upload and deploy cycle",
    "start": "176239",
    "end": "184599"
  },
  {
    "text": "if you're lucky and your build Cycles are very lightweight this might cost four minutes it's an additional tax but",
    "start": "184599",
    "end": "192000"
  },
  {
    "text": "in voice flow's case we had a bunch of linting a lot of",
    "start": "192000",
    "end": "197040"
  },
  {
    "text": "source control operations that we need to run that's about 2 minutes if we want",
    "start": "197040",
    "end": "202640"
  },
  {
    "text": "to preview a particular Branch the cicd pipeline has to do a full code rebuild",
    "start": "202640",
    "end": "208200"
  },
  {
    "text": "and then container rebuild that takes about 10 minutes upload to our container registry Deploy on kubernetes reload the",
    "start": "208200",
    "end": "215760"
  },
  {
    "text": "deployment another minute before it hits our design reviewers so altogether it",
    "start": "215760",
    "end": "221000"
  },
  {
    "text": "takes at least 15 minutes per iteration before code is live for our developers to see and for design reviewers to",
    "start": "221000",
    "end": "227760"
  },
  {
    "text": "review and give approval before we can merge into the trunk some other problems that we've",
    "start": "227760",
    "end": "235200"
  },
  {
    "text": "encountered I want to see if you guys can resonate with this first first of all but this worked on my machine of",
    "start": "235200",
    "end": "242239"
  },
  {
    "text": "course it did worked on all of our machines until we have to deploy this into production can you send me that",
    "start": "242239",
    "end": "247840"
  },
  {
    "text": "config file or secret well if you do that our security guys will be very upset with you over",
    "start": "247840",
    "end": "254120"
  },
  {
    "text": "slack so these are problems related to Dev prod parity that are still somewhat",
    "start": "254120",
    "end": "260120"
  },
  {
    "text": "difficult to solve can you give me a demo of your PR of course designers want to make sure",
    "start": "260120",
    "end": "265600"
  },
  {
    "text": "that we're not releasing code that doesn't meet quality standards but I'm waiting for the CI pipeline to deploy my",
    "start": "265600",
    "end": "271800"
  },
  {
    "text": "changes and as discussed before that takes a while so the Change review process becomes slogged down finally for",
    "start": "271800",
    "end": "279840"
  },
  {
    "text": "startup folks out here we might not have every service mocked and my computer",
    "start": "279840",
    "end": "285199"
  },
  {
    "text": "just can't run all the services locally and that points to a problem with resource limitation so these are",
    "start": "285199",
    "end": "292000"
  },
  {
    "text": "all the problems that plagued us when we were looking for solutions to optimize our Dev",
    "start": "292000",
    "end": "298560"
  },
  {
    "text": "cycle some of the potential Solutions we looked at I mean these are not unique problems right we thought about using a",
    "start": "298560",
    "end": "305840"
  },
  {
    "text": "vendor code preview solution and there are a lot out there and a lot of successful vendor Solutions out there",
    "start": "305840",
    "end": "311880"
  },
  {
    "text": "but for our use case we use a very custom websocket based transport we had a lot of different um applications that",
    "start": "311880",
    "end": "319039"
  },
  {
    "text": "we had services that we had to deploy into our environment so there was insufficient",
    "start": "319039",
    "end": "324840"
  },
  {
    "text": "customization we could run a cluster locally using a solution like mini Cube but others can't easily access the",
    "start": "324840",
    "end": "331319"
  },
  {
    "text": "instance and if you're opening up your local computer again to the public internet that's a little bit",
    "start": "331319",
    "end": "337560"
  },
  {
    "text": "sketchy and at the time two years ago when we were evaluating the solution the",
    "start": "337560",
    "end": "342680"
  },
  {
    "text": "recommended way was to run a dummy container with a sleep command or something that will keep the container",
    "start": "342680",
    "end": "348840"
  },
  {
    "text": "alive for extended periods of time use sshfs to map your local files into the",
    "start": "348840",
    "end": "354280"
  },
  {
    "text": "Container SSH into or Connect into the container and then run your workloads there so it kind of works but it",
    "start": "354280",
    "end": "361280"
  },
  {
    "text": "requires a lot of developer and devops coupling and you really need to understand what you're doing before you",
    "start": "361280",
    "end": "366840"
  },
  {
    "text": "can really leverage the system effectively feels bad",
    "start": "366840",
    "end": "373039"
  },
  {
    "text": "man so what did we really need at the time we wanted to run a service locally",
    "start": "373039",
    "end": "379360"
  },
  {
    "text": "with a debugger attached and we want the service that is running on my computer to be able to communicate with the other",
    "start": "379360",
    "end": "386120"
  },
  {
    "text": "cloud services this is starting to sound a lot like a VPN and we did try that with openvpn to limited success but more",
    "start": "386120",
    "end": "393319"
  },
  {
    "text": "importantly we wanted to make sure that we could map the cloud configurations into our local service this includes",
    "start": "393319",
    "end": "398919"
  },
  {
    "text": "environment variables configuration files secret files so that I can pretend",
    "start": "398919",
    "end": "404240"
  },
  {
    "text": "my local machine is the pod that's running my workload if only there was a",
    "start": "404240",
    "end": "411160"
  },
  {
    "text": "solution enter telepresence what is telepresence at a",
    "start": "411160",
    "end": "417680"
  },
  {
    "text": "glance telepresence is a service that will use the CP API to allow connection",
    "start": "417680",
    "end": "423720"
  },
  {
    "text": "between your local machine into your kubernetes cluster this means that I can start flowing traffic from the",
    "start": "423720",
    "end": "429759"
  },
  {
    "text": "kubernetes cluster services to my local computer and my local computer can connect to other kubernetes services",
    "start": "429759",
    "end": "436919"
  },
  {
    "text": "we're getting closer to that ideal solution that we were looking for one of the core features of telepresence is",
    "start": "436919",
    "end": "442680"
  },
  {
    "text": "this idea of intercepting traffic when you establish a telepresence intercept what's happening is that a traffic agent",
    "start": "442680",
    "end": "450360"
  },
  {
    "text": "running on your pod side will listen on the same application Port as your application that you're trying to debug",
    "start": "450360",
    "end": "458000"
  },
  {
    "text": "and all traffic sent to your application will be forwarded to your local computer that is running this intercept so now we",
    "start": "458000",
    "end": "465479"
  },
  {
    "text": "have this ability to forward traffic from the kubernetes cluster onto our local machine not only that because the",
    "start": "465479",
    "end": "472479"
  },
  {
    "text": "traffic agent is running in the pot itself as we see here it has full access",
    "start": "472479",
    "end": "478400"
  },
  {
    "text": "to environment variable Ables all the file mounts secret mounts into your running pod and we can mount all of",
    "start": "478400",
    "end": "486319"
  },
  {
    "text": "these into our local machine and inject environment variables into any running process the telepresence architecture is",
    "start": "486319",
    "end": "493479"
  },
  {
    "text": "quite simple there is a laptop side configuration and a cluster side configuration the laptop side runs a",
    "start": "493479",
    "end": "499560"
  },
  {
    "text": "demon that's responsible for handling all the low-level networking and under the hood establishes a lightweight VPN",
    "start": "499560",
    "end": "506840"
  },
  {
    "text": "es solution running on layer 3 which means that TCP and UDP connections will be possible on the cluster side you have",
    "start": "506840",
    "end": "514800"
  },
  {
    "text": "one component you have to deploy called the traffic manager as you can see here the traffic manager will be responsible",
    "start": "514800",
    "end": "521200"
  },
  {
    "text": "for injecting this traffic agent into whichever workload that you want to intercept and coordinate the traffic",
    "start": "521200",
    "end": "527120"
  },
  {
    "text": "between the agent the manager and all the connected telepresence demons running on the laptop",
    "start": "527120",
    "end": "533399"
  },
  {
    "text": "side but wait there's more when you connect to the traffic manager because",
    "start": "533399",
    "end": "539360"
  },
  {
    "text": "you've established connectivity between your local computer and your cluster there's kubernetes aware DNS you",
    "start": "539360",
    "end": "545720"
  },
  {
    "text": "can suddenly start to use your SVC cluster. local addresses to access your kubernetes services on your laptop which",
    "start": "545720",
    "end": "552560"
  },
  {
    "text": "I'll demonstrate volume mounts are now possible and more importantly",
    "start": "552560",
    "end": "558240"
  },
  {
    "text": "environment variables are now injected into the running process on your local machine so now we can really begin to",
    "start": "558240",
    "end": "565720"
  },
  {
    "text": "replicate behavior in the cloud on my local",
    "start": "565720",
    "end": "570839"
  },
  {
    "text": "computer without further Ado I'll give a very quick and easy demo feel free to",
    "start": "570839",
    "end": "577480"
  },
  {
    "text": "follow along if you want to um here is the GitHub repository franku 968 cucon",
    "start": "577480",
    "end": "584640"
  },
  {
    "text": "2023 for this presentation I've created a very simple toy problem I have a",
    "start": "584640",
    "end": "591040"
  },
  {
    "text": "billing Gateway written in nodejs and the purpose of the service is just to",
    "start": "591040",
    "end": "597160"
  },
  {
    "text": "execute billing I can send a bill billing request to charge a user that's persisted in a postgres SQL database",
    "start": "597160",
    "end": "604160"
  },
  {
    "text": "demonstrating a TCP connection between the billing Gateway service and the database this billing Gateway service",
    "start": "604160",
    "end": "610000"
  },
  {
    "text": "has one dependency on a converter service that simply does currency conversion in this case Canadian dollars",
    "start": "610000",
    "end": "617079"
  },
  {
    "text": "to US dollars to make this extra spicy I've written the service in Python all",
    "start": "617079",
    "end": "622720"
  },
  {
    "text": "of this billing Gateway service is exposed in a world accessible Ingress so",
    "start": "622720",
    "end": "628600"
  },
  {
    "text": "if you want start hitting this address uh in this demo you'll be able to see the changes that I'm I'll be making",
    "start": "628600",
    "end": "635639"
  },
  {
    "text": "live so for the initial deployment we have an app container with a config map",
    "start": "635639",
    "end": "641680"
  },
  {
    "text": "and a secret mounted onto this application containing the postr secrets as well as a secret file containing an",
    "start": "641680",
    "end": "648920"
  },
  {
    "text": "API key that will read for simple authentication on the converter side we",
    "start": "648920",
    "end": "654120"
  },
  {
    "text": "just have a config map that's mounted onto the app container so that we can store some metadata which will",
    "start": "654120",
    "end": "659480"
  },
  {
    "text": "demonstrate how to override keep in mind the billing Gateway is running on port 8080 converter on 881 it might get a",
    "start": "659480",
    "end": "667360"
  },
  {
    "text": "little confusing in a bit so first of all let's make sure that",
    "start": "667360",
    "end": "673240"
  },
  {
    "text": "this all the services are running correctly so you can see there are two",
    "start": "673240",
    "end": "679600"
  },
  {
    "text": "pods running and there is one container for each surface can everyone see this",
    "start": "679600",
    "end": "686079"
  },
  {
    "text": "clearly yes perfect okay I'll make sure that the services are deployed running on Port 7,000 and 701",
    "start": "686079",
    "end": "694800"
  },
  {
    "text": "and make sure that the Ingress is running correctly as well and you can see we have a publicly available address",
    "start": "694800",
    "end": "701440"
  },
  {
    "text": "at demo. cubec con. development. flow.com so let's go to this address and see if",
    "start": "701440",
    "end": "709920"
  },
  {
    "text": "we can get some metadata and you can see billing Gateway V 0.0.1 is running in production",
    "start": "709920",
    "end": "715600"
  },
  {
    "text": "environment great this is the cloud configuration so at this point we can start to run the",
    "start": "715600",
    "end": "724720"
  },
  {
    "text": "First telepresence Command telepresence connect and what this command does is it",
    "start": "724720",
    "end": "730320"
  },
  {
    "text": "establishes a connection between my computer here to the kubernetes cluster that I have running on eks and voila you",
    "start": "730320",
    "end": "738440"
  },
  {
    "text": "can see this context has been connected successfully at this point if I go to",
    "start": "738440",
    "end": "744040"
  },
  {
    "text": "postman and try to Ping a cluster service local address you can see that I",
    "start": "744040",
    "end": "752120"
  },
  {
    "text": "am able to run this network command on my local computer talking to my cluster",
    "start": "752120",
    "end": "757600"
  },
  {
    "text": "without me doing anything else and that is how you connect to Cluster Services by just simply running telepresence",
    "start": "757600",
    "end": "764360"
  },
  {
    "text": "connect so let's do something a little bit more interesting",
    "start": "764360",
    "end": "769519"
  },
  {
    "text": "here I'll demonstrate how to generate an intercept and begin to run a debug",
    "start": "769560",
    "end": "774959"
  },
  {
    "text": "workflow on my local computer so the command you want to run is tell telepresence intercept and the billing",
    "start": "774959",
    "end": "782279"
  },
  {
    "text": "Gateway is the deployment any workloads whether it's demon sets replica sets or",
    "start": "782279",
    "end": "787440"
  },
  {
    "text": "deployments work in this case in the Nam space cucon 2023 I'm intercepting the",
    "start": "787440",
    "end": "792720"
  },
  {
    "text": "app named Port so that I can forward the traffic onto port 8080 on my laptop and",
    "start": "792720",
    "end": "798959"
  },
  {
    "text": "here this is something I'll cover in a bit where I am not only injecting the environment variables into my command",
    "start": "798959",
    "end": "805600"
  },
  {
    "text": "I'll run but also creating an N file that I can load from different process and I'm mounting my secrets file as well",
    "start": "805600",
    "end": "812680"
  },
  {
    "text": "as any other configuration files on this pod on a local directory before we even do that let me",
    "start": "812680",
    "end": "819800"
  },
  {
    "text": "make sure that this directory exists and we will run this command so",
    "start": "819800",
    "end": "828680"
  },
  {
    "text": "now the intercept is doing its magic in the background and voila you can see",
    "start": "828680",
    "end": "834040"
  },
  {
    "text": "that the intercept now has entered an active State and is intercepting all TCP requests",
    "start": "834040",
    "end": "839440"
  },
  {
    "text": "and if we try to get pods again you can see that a new deployment has been",
    "start": "839440",
    "end": "845320"
  },
  {
    "text": "created with an additional container and this additional",
    "start": "845320",
    "end": "851160"
  },
  {
    "text": "container is the automatically injected traffic agent container that will take care of all the traffic",
    "start": "853639",
    "end": "860800"
  },
  {
    "text": "forwarding so here if I take a look at the environment you can see that oh our",
    "start": "860800",
    "end": "867160"
  },
  {
    "text": "Cloud environment has also injected into the shell that I'm been running so if I",
    "start": "867160",
    "end": "872199"
  },
  {
    "text": "just try to run my nodejs service locally you can see that now my server",
    "start": "872199",
    "end": "880120"
  },
  {
    "text": "is running in a local environment and if I go back to the",
    "start": "880120",
    "end": "885639"
  },
  {
    "text": "Ingress voila it's now running in the traffic is going to my local computer",
    "start": "885639",
    "end": "892000"
  },
  {
    "text": "and showing up on a world accessible site don't believe me I can go into the",
    "start": "892000",
    "end": "898079"
  },
  {
    "text": "code here and see okay we have a version string change this to cubec con 2023 make sure that our system has",
    "start": "898079",
    "end": "906240"
  },
  {
    "text": "reloaded and if I refresh this page again you can see the changes are",
    "start": "906240",
    "end": "911360"
  },
  {
    "text": "previewed live so what does this mean now if we",
    "start": "911360",
    "end": "916920"
  },
  {
    "text": "want to run a debug workload for example here I can try to get a balance of the",
    "start": "916920",
    "end": "922519"
  },
  {
    "text": "user I send the message oops there's an unauthorized but I already sent the",
    "start": "922519",
    "end": "927880"
  },
  {
    "text": "headers of the super Super secer Value what is causing this I can go to",
    "start": "927880",
    "end": "935880"
  },
  {
    "text": "oops I can go to my vs code find the unauthorized command here okay so some",
    "start": "935880",
    "end": "943000"
  },
  {
    "text": "sort of authorizer function has problems set a breakpoint and I've configured a",
    "start": "943000",
    "end": "949279"
  },
  {
    "text": "launch. Json in the vs code so that I can step through the code with a debugger and most crucially there's an M",
    "start": "949279",
    "end": "956639"
  },
  {
    "text": "file setting here that I have added which is the m configuration from before",
    "start": "956639",
    "end": "963160"
  },
  {
    "text": "with this setting now I can go to my application and begin running",
    "start": "963160",
    "end": "970120"
  },
  {
    "text": "it oops I have to stop the other me just stop the other",
    "start": "970120",
    "end": "979000"
  },
  {
    "text": "process so now the debugger is attached if we try to run this workload again you",
    "start": "979000",
    "end": "984680"
  },
  {
    "text": "can see that okay we hit the break point and",
    "start": "984680",
    "end": "990519"
  },
  {
    "text": "it seems like we have misnamed the headers so I'll change this into",
    "start": "990560",
    "end": "996639"
  },
  {
    "text": "authorization and then save it reload it and if we try to do this",
    "start": "996639",
    "end": "1003000"
  },
  {
    "text": "again boom we get some sort of user balance that's",
    "start": "1003000",
    "end": "1008720"
  },
  {
    "text": "$1,000 and that is how you can run debug workloads with telepresence using one",
    "start": "1008800",
    "end": "1014399"
  },
  {
    "text": "intercept but as I mentioned earlier we have two different services a building",
    "start": "1014399",
    "end": "1019560"
  },
  {
    "text": "Gateway and a um converter service so let's go back to the application",
    "start": "1019560",
    "end": "1027480"
  },
  {
    "text": "diagram what's really happening behind the scenes when we established an intercept is that instead of the traffic",
    "start": "1027480",
    "end": "1034038"
  },
  {
    "text": "going directly from the service through Port 880 on the deployment to the app container the injected telepresence",
    "start": "1034039",
    "end": "1041000"
  },
  {
    "text": "agent begins listening on Port 880 and all traffic goes to a telepresence agent",
    "start": "1041000",
    "end": "1046798"
  },
  {
    "text": "note that there is no longer an Arrow connecting the telepresence agent to the app because all the communication is",
    "start": "1046799",
    "end": "1053280"
  },
  {
    "text": "being forwarded to my computer so if nothing is running right now on this",
    "start": "1053280",
    "end": "1058400"
  },
  {
    "text": "endpoint and I try to run the postman request",
    "start": "1058400",
    "end": "1063480"
  },
  {
    "text": "again there's something else running",
    "start": "1063480",
    "end": "1067640"
  },
  {
    "text": "here it is not possible to get a response since there's nothing on my computer listening to this",
    "start": "1070960",
    "end": "1077039"
  },
  {
    "text": "request so now now for the final part of this demo I will present two intercepts",
    "start": "1077039",
    "end": "1083080"
  },
  {
    "text": "let's drag this over here so another way you can run this",
    "start": "1083080",
    "end": "1089440"
  },
  {
    "text": "environment variable injection with all the different uh configurations mounted onto your application is by simply",
    "start": "1089440",
    "end": "1096440"
  },
  {
    "text": "specifying the command you want to run after The telepresence Intercept command so here I will be intercepting our",
    "start": "1096440",
    "end": "1103200"
  },
  {
    "text": "converter service and here I will start our",
    "start": "1103200",
    "end": "1109520"
  },
  {
    "text": "billing service again everything is running and you can see that we are",
    "start": "1109520",
    "end": "1115480"
  },
  {
    "text": "running on Port 8081 so what happened now is we've gone",
    "start": "1115480",
    "end": "1121559"
  },
  {
    "text": "from this application diagram to this where again if we stopped the first",
    "start": "1121559",
    "end": "1127880"
  },
  {
    "text": "intercept on billing Gateway the app container in the cloud will make a request to converter that's on our local",
    "start": "1127880",
    "end": "1134760"
  },
  {
    "text": "machine but since both intercepts are active no traffic is actually flowing to your application container in the cloud",
    "start": "1134760",
    "end": "1142720"
  },
  {
    "text": "and all traffic is going from my local computer to the cloud and then back to my local computer to hit this converter",
    "start": "1142720",
    "end": "1151400"
  },
  {
    "text": "service so let's try to send a post request of charge and the currency is",
    "start": "1151400",
    "end": "1157520"
  },
  {
    "text": "CAD $100 using some exchange rate I send the",
    "start": "1157520",
    "end": "1163240"
  },
  {
    "text": "request and you can see that we've successfully charged the user balance",
    "start": "1163240",
    "end": "1168520"
  },
  {
    "text": "and it's using this endpoint and we're not using any local endpoints and we",
    "start": "1168520",
    "end": "1174200"
  },
  {
    "text": "charge the user $72 after conversion with $928",
    "start": "1174200",
    "end": "1180360"
  },
  {
    "text": "remaining if we go back to the console you can see indeed that all the traffic is hitting the service is running on my",
    "start": "1180360",
    "end": "1187520"
  },
  {
    "text": "computer with the billing Gateway receiving a charge request of $100 Canadian dollars and then sending this",
    "start": "1187520",
    "end": "1192919"
  },
  {
    "text": "to my local instance of the converter service running in Python to run the conversion to 200 no problem and then",
    "start": "1192919",
    "end": "1200280"
  },
  {
    "text": "returning back to the client so with that concludes the live",
    "start": "1200280",
    "end": "1207520"
  },
  {
    "text": "demo portion and to exit the services and stop the intercepts so that your",
    "start": "1207520",
    "end": "1212559"
  },
  {
    "text": "service still works in production in the cloud I can simply just terminate these commands and then now we should be back",
    "start": "1212559",
    "end": "1220360"
  },
  {
    "text": "to the production environment nice and easy and I can just run a telepresence",
    "start": "1220360",
    "end": "1226120"
  },
  {
    "text": "quit to fully disconnect my computer from the kubernetes cluster oh and did I forget to",
    "start": "1226120",
    "end": "1234080"
  },
  {
    "text": "mention this whole time I was running this in a VPN so telepresence is fully",
    "start": "1234080",
    "end": "1240200"
  },
  {
    "text": "VPN compatible uh with certain exceptions but it works quite well in all sorts of networking",
    "start": "1240200",
    "end": "1247880"
  },
  {
    "text": "environments so what I've demonstrated is the ability for you to very quickly",
    "start": "1250559",
    "end": "1256559"
  },
  {
    "text": "preview your changes on on your local machine and have your application",
    "start": "1256559",
    "end": "1261760"
  },
  {
    "text": "exposed to some publicly accessible URL for other people to review and what has this done for us well it's tightened",
    "start": "1261760",
    "end": "1269039"
  },
  {
    "text": "down our Dev Loop down to just 10 seconds we frequently have our designers and our developers sitting on a live",
    "start": "1269039",
    "end": "1275799"
  },
  {
    "text": "call where the designers might suggest certain changes in the ux in the behavior and mind you our developers",
    "start": "1275799",
    "end": "1283480"
  },
  {
    "text": "might be somewhere in Europe whereas our designers are in North America and because we have a publicly accessible",
    "start": "1283480",
    "end": "1290039"
  },
  {
    "text": "URL we can make these changes live on the call and iterate very quickly so we've shortened this Dev loop from 15",
    "start": "1290039",
    "end": "1296919"
  },
  {
    "text": "minutes down to just 10 seconds this might sound really nice and",
    "start": "1296919",
    "end": "1304120"
  },
  {
    "text": "it is a really fascinating and Powerful tool to use but with great power comes great responsibility so there are some",
    "start": "1304120",
    "end": "1310520"
  },
  {
    "text": "key considerations that I'll outline for everyone here just in case you want to deploy this into your own",
    "start": "1310520",
    "end": "1317039"
  },
  {
    "text": "workloads the first one is the deployment model for telepresence it requires a cluster side component which",
    "start": "1317039",
    "end": "1323600"
  },
  {
    "text": "is the traffic manager you need to ensure that you have sufficient privileges to actually deploy this component and more crucially the traffic",
    "start": "1323600",
    "end": "1330760"
  },
  {
    "text": "manager also has additional kubernetes requirements uh in terms of the arbac and permissioning in order for it to",
    "start": "1330760",
    "end": "1337960"
  },
  {
    "text": "successfully inject uh the traffic agent as for",
    "start": "1337960",
    "end": "1343960"
  },
  {
    "text": "scale I'm happy to announce that we've unintentionally helped stress test the",
    "start": "1343960",
    "end": "1349120"
  },
  {
    "text": "absolute limits of telepresence and currently we run telepresence on a multi-tenant cluster with all of our",
    "start": "1349120",
    "end": "1356240"
  },
  {
    "text": "developers connecting to it and we have about 15 to 20 environments running at any given time with one to three",
    "start": "1356240",
    "end": "1363039"
  },
  {
    "text": "intercepts running in every single environment with so many intercepts and so much traffic flowing",
    "start": "1363039",
    "end": "1368360"
  },
  {
    "text": "through the traffic manager only consumes half a core CPU and one gabish",
    "start": "1368360",
    "end": "1373440"
  },
  {
    "text": "of ram so the overhead is pretty neglegible in the grand scheme of things",
    "start": "1373440",
    "end": "1378640"
  },
  {
    "text": "the security model of telepresence is quite straightforward because it uses the CP apis under the hood whatever",
    "start": "1378640",
    "end": "1385120"
  },
  {
    "text": "trust model you have with your cluster is the same when you use telepresence",
    "start": "1385120",
    "end": "1390200"
  },
  {
    "text": "the one cette here is that you should definitely stti stay away from using",
    "start": "1390200",
    "end": "1395520"
  },
  {
    "text": "telepresence in production workloads because whoever has telepresence access",
    "start": "1395520",
    "end": "1400720"
  },
  {
    "text": "to your cluster you should assume that they have access to all of your secrets environment variables configurations",
    "start": "1400720",
    "end": "1406880"
  },
  {
    "text": "whatnot in terms of robustness and support telepresence is maintained by the",
    "start": "1406880",
    "end": "1412600"
  },
  {
    "text": "Ambassador Labs Community the open source Community uh behind telepresence is also very vibrant there's a slack",
    "start": "1412600",
    "end": "1420360"
  },
  {
    "text": "Channel and about 10 to 15 commits per week into the trunk additionally there's",
    "start": "1420360",
    "end": "1426600"
  },
  {
    "text": "a pay tier um for from Ambassador Labs if you choose to uh need more",
    "start": "1426600",
    "end": "1434080"
  },
  {
    "text": "support and the last consideration is that of latency so so latency was a big problem for us especially if you have",
    "start": "1434080",
    "end": "1440600"
  },
  {
    "text": "many services that are that have many layers so if you have service a calling",
    "start": "1440600",
    "end": "1446840"
  },
  {
    "text": "service b c d then every single time your local computer makes a call to the",
    "start": "1446840",
    "end": "1452120"
  },
  {
    "text": "downstream service you incur that roundt trip agency of your computer to the cluster and back to your computer we at",
    "start": "1452120",
    "end": "1460080"
  },
  {
    "text": "voice flow got around this issue by simply doing some DNS tricks on the Local Host by modifying the ETC hosts",
    "start": "1460080",
    "end": "1466720"
  },
  {
    "text": "file and there are also other ways such as configuring your environment variables to override whatever the",
    "start": "1466720",
    "end": "1473279"
  },
  {
    "text": "injected environment variables are for your particular uh service Discovery mechanism and simply just if you're",
    "start": "1473279",
    "end": "1480559"
  },
  {
    "text": "intercepting more than one service have all these configurations point to for",
    "start": "1480559",
    "end": "1486360"
  },
  {
    "text": "from one local service to another local service on your computer without going into the",
    "start": "1486360",
    "end": "1491679"
  },
  {
    "text": "cloud and with that I conclude this presentation in conclusion",
    "start": "1491679",
    "end": "1498679"
  },
  {
    "text": "Dev prod par and resource limitations plus deployment and review velocity are",
    "start": "1498679",
    "end": "1503919"
  },
  {
    "text": "major concerns in both the kubernetes development workflow and also workflows for voice flow telepresence is a tool",
    "start": "1503919",
    "end": "1511760"
  },
  {
    "text": "that proxies traffic and configurations between your local machine and the kubernetes",
    "start": "1511760",
    "end": "1517919"
  },
  {
    "text": "cluster and by using telepresence we've managed to reduce the build upload deploy overhead and greatly enhance our",
    "start": "1517919",
    "end": "1524720"
  },
  {
    "text": "developer experience by shortening each iteration cycle from a around 15 minutes down to just 10",
    "start": "1524720",
    "end": "1531880"
  },
  {
    "text": "seconds thank you very much for attending the session um I'll open up the floor for any questions at this",
    "start": "1532120",
    "end": "1539280"
  },
  {
    "text": "[Applause]",
    "start": "1539280",
    "end": "1546360"
  },
  {
    "text": "time thanks for the session it was super interesting a quick question about how you deal with multitenancy like you have",
    "start": "1546360",
    "end": "1552760"
  },
  {
    "text": "two three developers working on the same project and both of them will try to intercept the same deployment yeah so at",
    "start": "1552760",
    "end": "1560000"
  },
  {
    "text": "voice flow we deploy name spaces we have one name space for one developer one",
    "start": "1560000",
    "end": "1565720"
  },
  {
    "text": "name space for one particular workload you want to preview so if you have multiple developers they should be",
    "start": "1565720",
    "end": "1572080"
  },
  {
    "text": "intercepting their own Services there is one exception where you might have one really large feature that requires say a",
    "start": "1572080",
    "end": "1579159"
  },
  {
    "text": "full stack team and a fully backend team working together in which case when they want to come together and preview",
    "start": "1579159",
    "end": "1584480"
  },
  {
    "text": "something they're still intercepting different deployments but in the same name space so that's how we a voice flow",
    "start": "1584480",
    "end": "1590399"
  },
  {
    "text": "got around the multi-tenancy issue but just remember when you intercept you're only intercepting a deployment workload",
    "start": "1590399",
    "end": "1597320"
  },
  {
    "text": "so you can go pretty crazy with that thanks for",
    "start": "1597320",
    "end": "1602640"
  },
  {
    "text": "clarifying um do you know if telepresence works well with service meshes uh I believe they do we currently",
    "start": "1603960",
    "end": "1612520"
  },
  {
    "text": "don't run any service mesh in our development environment with telepresence so I have not been able to test that but I do see that like there",
    "start": "1612520",
    "end": "1619799"
  },
  {
    "text": "was some work uh in the commit log regarding like Linker D service meshes",
    "start": "1619799",
    "end": "1625080"
  },
  {
    "text": "thank you hi um yeah thanks for the",
    "start": "1625080",
    "end": "1630440"
  },
  {
    "text": "presentation it was pretty good um two questions one was how do you deal with",
    "start": "1630440",
    "end": "1635799"
  },
  {
    "text": "the application configuration files I think in the demo there was a environment file or something that was",
    "start": "1635799",
    "end": "1641640"
  },
  {
    "text": "reference but does the developer handcraft that or is it something like",
    "start": "1641640",
    "end": "1647320"
  },
  {
    "text": "like I asked this question in the context of like sometimes you have backend services that you have provision and there are parameters for that that",
    "start": "1647320",
    "end": "1654399"
  },
  {
    "text": "you would want to work with yeah sure so the um file that you saw that got",
    "start": "1654399",
    "end": "1659960"
  },
  {
    "text": "mounted which is this one right TMP billing Gateway slm this is automatically generated by telepresence",
    "start": "1659960",
    "end": "1666799"
  },
  {
    "text": "so all the environment variables in the um pod let me see if I can just show",
    "start": "1666799",
    "end": "1673320"
  },
  {
    "text": "this all the environment variables that the Pod sees gets written into this M file and then it gets um created in your",
    "start": "1673320",
    "end": "1681000"
  },
  {
    "text": "local file system but sometimes I mentioned in the latency consideration part you might want to override these",
    "start": "1681000",
    "end": "1687240"
  },
  {
    "text": "environment variables so in that case what we can do is use a m file in your runtime and",
    "start": "1687240",
    "end": "1695720"
  },
  {
    "text": "basically I run this code um let me see config I run this code",
    "start": "1695720",
    "end": "1703240"
  },
  {
    "text": "with the m package with override mode true so if it sees this file I can",
    "start": "1703240",
    "end": "1708320"
  },
  {
    "text": "override whatever the you know environment is yeah makes sense thank",
    "start": "1708320",
    "end": "1713360"
  },
  {
    "text": "you um the second question was uh how does this approach compare with something like scaffold or if you have",
    "start": "1713360",
    "end": "1720000"
  },
  {
    "text": "tried that like where the idea is that you instead live reload your code in a remote cluster uh like have you looked",
    "start": "1720000",
    "end": "1727440"
  },
  {
    "text": "at something like that I'm not familiar with scaffold in particular but one of the it sounds really similar to kind of",
    "start": "1727440",
    "end": "1733760"
  },
  {
    "text": "the sshfs um solution I mentioned earlier um",
    "start": "1733760",
    "end": "1739159"
  },
  {
    "text": "I believe this solution has uh more Dev prod parity because you're literally not reloading code you're just running the",
    "start": "1739159",
    "end": "1746519"
  },
  {
    "text": "application exactly as you would in a container just minus the container itself and you're not trying to reload",
    "start": "1746519",
    "end": "1752519"
  },
  {
    "text": "code remotely but rather locally so this has the add benefit too that you can run your debugger and attach to it on your",
    "start": "1752519",
    "end": "1758880"
  },
  {
    "text": "local machine instead of doing some sort of remote debugging session okay",
    "start": "1758880",
    "end": "1764960"
  },
  {
    "text": "thanks I thanks um question on so you talked about like having a config map",
    "start": "1766120",
    "end": "1773080"
  },
  {
    "text": "and a secret that you can then kind of pull that information locally what about like um file mounts and things like that",
    "start": "1773080",
    "end": "1780000"
  },
  {
    "text": "are those also shared ah yes I did not fully showcase the file Mount portion",
    "start": "1780000",
    "end": "1786360"
  },
  {
    "text": "but uh if you take a look at the command earlier here there is a file Mount so if",
    "start": "1786360",
    "end": "1791559"
  },
  {
    "text": "we see the Pod uh here the Pod has a secret called API key.txt mounted as a",
    "start": "1791559",
    "end": "1799000"
  },
  {
    "text": "file mount on the Pod so what that does is that if when we specify a mount point",
    "start": "1799000",
    "end": "1804240"
  },
  {
    "text": "on telepresence intercept the mount point is seen as like the container route so if I actually go to this",
    "start": "1804240",
    "end": "1811000"
  },
  {
    "text": "directory you can oh uh sorry The Intercept is no longer active but you'll actually see like the root file system",
    "start": "1811000",
    "end": "1818200"
  },
  {
    "text": "and another TMP directory which is why like you have to do some uh soft linking to make sure that the directories match",
    "start": "1818200",
    "end": "1824240"
  },
  {
    "text": "up between your local and Cloud environment but file mounts are fully supported which is one of the key",
    "start": "1824240",
    "end": "1830039"
  },
  {
    "text": "reasons why we chose telepresence because we don't have to do any sort of extraneous file mapping or sshfs on top",
    "start": "1830039",
    "end": "1836840"
  },
  {
    "text": "of that awesome thanks a lot hi thanks for the talk um in terms",
    "start": "1836840",
    "end": "1844279"
  },
  {
    "text": "of uh in terms of access for telepresence from your client laptop out",
    "start": "1844279",
    "end": "1849320"
  },
  {
    "text": "to the kubernetes server so a network-wise you need access just to the",
    "start": "1849320",
    "end": "1854679"
  },
  {
    "text": "API server right correct it and B in terms of like uh kubernetes",
    "start": "1854679",
    "end": "1860200"
  },
  {
    "text": "authorization um are you authenticated to kubernetes just as your kind of named",
    "start": "1860200",
    "end": "1866000"
  },
  {
    "text": "account in kubernetes is that what telepresence is using I am actually not super sure about",
    "start": "1866000",
    "end": "1872799"
  },
  {
    "text": "that um underneath the hood basically when you try to connect to the",
    "start": "1872799",
    "end": "1878360"
  },
  {
    "text": "kubernetes traffic manager you're just creating almost like a port forward esque connection to your kubernetes",
    "start": "1878360",
    "end": "1885799"
  },
  {
    "text": "environment and then from there on like the network traffic gets taken over by",
    "start": "1885799",
    "end": "1891200"
  },
  {
    "text": "the kubernetes sorry the telepresence demon so I'm not too sure about what",
    "start": "1891200",
    "end": "1896799"
  },
  {
    "text": "like account that is the ambassador Labs team is here um that might be a better question for them so so maybe maybe it",
    "start": "1896799",
    "end": "1905360"
  },
  {
    "text": "is a better question for them but so telepresence connect is is it talking to kubernetes or is it talking to the",
    "start": "1905360",
    "end": "1911480"
  },
  {
    "text": "telepresence demon in kubernetes uh it's tell it's talking to",
    "start": "1911480",
    "end": "1917639"
  },
  {
    "text": "both the traffic manager and the kubernetes API from the telepresence demon on your laptop okay thank you",
    "start": "1917639",
    "end": "1926480"
  },
  {
    "text": "yeah quick question on the security aspect one thing is that so your",
    "start": "1927159",
    "end": "1932960"
  },
  {
    "text": "laptop is that exposed to internet is that how the the",
    "start": "1932960",
    "end": "1938440"
  },
  {
    "text": "communication happening from the tele presence running in the cluster to the instance running in your local uh not",
    "start": "1938440",
    "end": "1945720"
  },
  {
    "text": "necessarily so your computer computer needs internet access or not necessarily internet access but your computer needs",
    "start": "1945720",
    "end": "1951399"
  },
  {
    "text": "to be able to connect to your kubernetes like cluster the reason why you can see",
    "start": "1951399",
    "end": "1957200"
  },
  {
    "text": "the demo URL uh the publicly available URL um and access it is because I've",
    "start": "1957200",
    "end": "1962639"
  },
  {
    "text": "exposed that as an Ingress so without an Ingress resource technically speaking",
    "start": "1962639",
    "end": "1969039"
  },
  {
    "text": "all the communications is just between your laptop and the kubernetes cluster itself no I understood about the Ingress",
    "start": "1969039",
    "end": "1976120"
  },
  {
    "text": "but you know the T presence which you started in your local machine is that",
    "start": "1976120",
    "end": "1981200"
  },
  {
    "text": "connecting to the telepresence in the cloud in an outbound way or I'm I'm",
    "start": "1981200",
    "end": "1987279"
  },
  {
    "text": "speaking from a security because if you want to take this in our request they",
    "start": "1987279",
    "end": "1992760"
  },
  {
    "text": "will say are you opening up connectivity from internet to your machine or you are making a tunnel to one bit tunnel yeah",
    "start": "1992760",
    "end": "2001000"
  },
  {
    "text": "so the telepresence demon on the laptop side is making that tunnel connection to the uh telepresence traffic manager in",
    "start": "2001000",
    "end": "2008279"
  },
  {
    "text": "the cluster and then any command you are issuing you are basically sending that and then that is responding in that same",
    "start": "2008279",
    "end": "2015399"
  },
  {
    "text": "channel back correct instead of connecting to your local machine correct it creates a uh tunnel connection like",
    "start": "2015399",
    "end": "2023240"
  },
  {
    "text": "basically forwarding TCP and UDP packets perfect thank",
    "start": "2023240",
    "end": "2028600"
  },
  {
    "text": "you um thanks for the talk really cool a quick question so you mentioned don't use this in production so could you",
    "start": "2028919",
    "end": "2035320"
  },
  {
    "text": "speak a little bit more about the actual cost cluster environment that you are intercepting is it like a QA Dev",
    "start": "2035320",
    "end": "2041039"
  },
  {
    "text": "environment you mentioned devs have each have a name space yeah that's correct so at voice flow we have a development",
    "start": "2041039",
    "end": "2047320"
  },
  {
    "text": "cluster that has all of the developers and their own developer environments um",
    "start": "2047320",
    "end": "2052760"
  },
  {
    "text": "in a nam SP in a namespace manner and the key consideration here as I mentioned um it's mainly because when",
    "start": "2052760",
    "end": "2060480"
  },
  {
    "text": "you run an intercept or telepresence connect right you're opening up your computer's connection to your kubernetes",
    "start": "2060480",
    "end": "2066679"
  },
  {
    "text": "CL cluster and on top of that if you try to intercept a pod all the environment variables so like config Maps Secrets",
    "start": "2066679",
    "end": "2074599"
  },
  {
    "text": "all of that will be forwarded to your local machine so if you have um sensitive information such as like",
    "start": "2074599",
    "end": "2080240"
  },
  {
    "text": "certificates API Keys then what whoever intercepts this whether it's a Dev or QA",
    "start": "2080240",
    "end": "2085440"
  },
  {
    "text": "security analyst on your team they'll be able to see those information which depending on your company's governance",
    "start": "2085440",
    "end": "2092158"
  },
  {
    "text": "policies could be a big problem right okay thank you and one more question um if you're running this in a QA",
    "start": "2092159",
    "end": "2098119"
  },
  {
    "text": "environment you have multiple apps as you demonstrated if you just want to intercept one of them and leave the other one running with the QA version",
    "start": "2098119",
    "end": "2105320"
  },
  {
    "text": "that might be pinned to some release compared to your local changes can you have them talk to each other yes so in",
    "start": "2105320",
    "end": "2111520"
  },
  {
    "text": "my first demo with just one intercept running uh if we take a look at this diagram right so when I when my service",
    "start": "2111520",
    "end": "2120440"
  },
  {
    "text": "tries to hit the converter uh python service it is not hitting the local version of the converter service but",
    "start": "2120440",
    "end": "2127119"
  },
  {
    "text": "rather hitting the cluster like service. cluster. looc address of the converter",
    "start": "2127119",
    "end": "2133079"
  },
  {
    "text": "service itself and then that service whatever is backing it whether it's another telepresence agent or pod",
    "start": "2133079",
    "end": "2140200"
  },
  {
    "text": "depends on your intercept configuration so if you only have one intercept running then you will be hitting the pin",
    "start": "2140200",
    "end": "2145680"
  },
  {
    "text": "version in the cloud with your local service but you can also do multiple intercepts should you wish got it okay",
    "start": "2145680",
    "end": "2151480"
  },
  {
    "text": "thanks that wasn't immediately clear so I guess that means you do not want to mix um your local version with an",
    "start": "2151480",
    "end": "2157160"
  },
  {
    "text": "environment that's actually important cuz you could break that dependency right that is also a really good",
    "start": "2157160",
    "end": "2162599"
  },
  {
    "text": "consideration yes thank you great thank you so much for attending the talk if you have any feedback please let me know",
    "start": "2162599",
    "end": "2170000"
  },
  {
    "text": "otherwise have a great evening",
    "start": "2170000",
    "end": "2174720"
  }
]