[
  {
    "text": "okay good afternoon everybody a couple more hours of Cuba in Europe so thanks",
    "start": "0",
    "end": "5520"
  },
  {
    "text": "for sticking till till the end usually you know the sum of the last talks in the afternoon of a conference are always",
    "start": "5520",
    "end": "11480"
  },
  {
    "text": "you know less attended so thanks a lot for for staying I think we have some exciting content austin did an amazing",
    "start": "11480",
    "end": "18449"
  },
  {
    "text": "job earlier this morning the demo was really really cool so my name is",
    "start": "18449",
    "end": "24000"
  },
  {
    "text": "sebastian quest again i'm the kubernetes lead that at bit nummy I've been in Cuba",
    "start": "24000",
    "end": "29970"
  },
  {
    "text": "latest since 2014-15 did things like Campos cabin the web app came machine",
    "start": "29970",
    "end": "35790"
  },
  {
    "text": "work a lot on I worked with the Linux Foundation on certification course O'Reilly and so on at admit nummy you",
    "start": "35790",
    "end": "44579"
  },
  {
    "text": "know we we work a lot on packaging apps so you may know us from the marketplace",
    "start": "44579",
    "end": "49890"
  },
  {
    "text": "on Azure or AWS Google we see you you see a lot of applications that are",
    "start": "49890",
    "end": "55920"
  },
  {
    "text": "packaged by us of course with generate containers and you know when community study we got very involved with the",
    "start": "55920",
    "end": "62250"
  },
  {
    "text": "charts so we also do build charts and then participate in the community",
    "start": "62250",
    "end": "68070"
  },
  {
    "text": "upstream to build those those applications so we're all about apps apps apps for any platform and of course",
    "start": "68070",
    "end": "75659"
  },
  {
    "text": "when we start thinking server less it makes a lot of sense for us to get involved so today I'm going to talk to",
    "start": "75659",
    "end": "82080"
  },
  {
    "text": "you about securing server less functions so it's a little you know a little bit of an advanced topic but I didn't want",
    "start": "82080",
    "end": "87689"
  },
  {
    "text": "to cover the basics again so I really wanted to dig a little bit deeper into",
    "start": "87689",
    "end": "93180"
  },
  {
    "text": "some of the things that communities gives us out of the box and those things help us secure those those functions so",
    "start": "93180",
    "end": "101159"
  },
  {
    "text": "I'm going to go through some of those topics and then joining me will be UNS angle key is right here is waiting for",
    "start": "101159",
    "end": "108180"
  },
  {
    "text": "his container to download so let's cross fingers Uranus works at s AP hybrids",
    "start": "108180",
    "end": "113939"
  },
  {
    "text": "which is the e-commerce platform for 4s AP and as a contributor to 2q blast the",
    "start": "113939",
    "end": "120869"
  },
  {
    "text": "project that I'm going to to mention and this morning if you if you followed the demo from from Austin you saw that there",
    "start": "120869",
    "end": "127920"
  },
  {
    "text": "was one of the functions was a cublas function running in the ASAP cloud platform",
    "start": "127920",
    "end": "133319"
  },
  {
    "text": "which was calling the ASAP machine learning system okay so we work very closely with with s AP and they",
    "start": "133319",
    "end": "140370"
  },
  {
    "text": "contribute to to cublas so I thought it would be nice to have you NS come here and then explain to us how they actually",
    "start": "140370",
    "end": "147030"
  },
  {
    "text": "use East Joe so it's not an easy o talk it's a talk on security but happens that",
    "start": "147030",
    "end": "152400"
  },
  {
    "text": "the the use East Joe okay so what type of applications are we are we talking",
    "start": "152400",
    "end": "157769"
  },
  {
    "text": "about here and yeah the slides are pretty simple I I didn't concentrate on making very fancy slides you know I can",
    "start": "157769",
    "end": "163469"
  },
  {
    "text": "you can you can tell it's marked down so what type of apps are we you know we're",
    "start": "163469",
    "end": "169049"
  },
  {
    "text": "thinking about here so of course micro services containers underneath running in running in Cuba natives but then",
    "start": "169049",
    "end": "176340"
  },
  {
    "text": "we're going to have events and that's where you know it resonates with what the the working group is working on it",
    "start": "176340",
    "end": "182519"
  },
  {
    "text": "resonates with the cloud events specifications because you know I believe that future apps will be made of",
    "start": "182519",
    "end": "188909"
  },
  {
    "text": "you know small glue the functions that will be triggered by events and when we",
    "start": "188909",
    "end": "194459"
  },
  {
    "text": "mean events you know it could be of course events in something like Kafka or Nats or you know one of the more regular",
    "start": "194459",
    "end": "200879"
  },
  {
    "text": "Enterprise pub/sub but also cloud events so events coming from cloud provider",
    "start": "200879",
    "end": "206489"
  },
  {
    "text": "services so machine learning storage streaming services databases you name it",
    "start": "206489",
    "end": "214829"
  },
  {
    "text": "so all these cloud services are going to emit events and when we're going to start writing applications that those",
    "start": "214829",
    "end": "221459"
  },
  {
    "text": "applications are going to be a set of functions triggered by those events not",
    "start": "221459",
    "end": "226919"
  },
  {
    "text": "really new you know we've done messaging based applications for for some time but I think that now we we're going to have",
    "start": "226919",
    "end": "233459"
  },
  {
    "text": "more and more events and the ease of deploying functions is going to kind of rejuvenate that type of application",
    "start": "233459",
    "end": "240599"
  },
  {
    "text": "paradigm so the whole idea is to compose many different services and trigger them on events could be in the cloud could be",
    "start": "240599",
    "end": "248340"
  },
  {
    "text": "on Prem and of course here I'm saying aw as lambda clone that's you know meaning",
    "start": "248340",
    "end": "254099"
  },
  {
    "text": "that when we look at some of the solutions that Austin mentioned this morning they are yeah they're clones",
    "start": "254099",
    "end": "260519"
  },
  {
    "text": "quote of lambda okay so systems that allow you to deploy functions",
    "start": "260519",
    "end": "266889"
  },
  {
    "text": "and this is not a talk about Cuba as I'm a very bad sales guy but I'm going to use this system to illustrate some of",
    "start": "266889",
    "end": "273400"
  },
  {
    "text": "the security features that you get out of the box with kubernetes to help you secure functions okay so you know where",
    "start": "273400",
    "end": "282340"
  },
  {
    "text": "I'm going with this is that apps are going to be you know made of functions",
    "start": "282340",
    "end": "288189"
  },
  {
    "text": "triggered by events those functions they are deployed in your cumulative cluster and of course underneath there they're",
    "start": "288189",
    "end": "295150"
  },
  {
    "text": "managed just like regular services so the rest you'll see some specifics about",
    "start": "295150",
    "end": "301360"
  },
  {
    "text": "about cublas but they are really here to illustrate you know what you need to",
    "start": "301360",
    "end": "306520"
  },
  {
    "text": "watch out for so digging into cuba's now it's really a cubist extension and we",
    "start": "306520",
    "end": "311860"
  },
  {
    "text": "see more and more of this you know at this conference and even in the community there is more emphasis on",
    "start": "311860",
    "end": "317620"
  },
  {
    "text": "using custom resource definitions to extend the community system and the idea",
    "start": "317620",
    "end": "323650"
  },
  {
    "text": "is that queue bilities is really becoming a platform on which to build additional systems so when we think",
    "start": "323650",
    "end": "329860"
  },
  {
    "text": "about you know how do you deploy your functions how are you going to deploy that glue well that glue is going to be",
    "start": "329860",
    "end": "336250"
  },
  {
    "text": "deployed on Kuban it is an extension of the community system so it's all based",
    "start": "336250",
    "end": "342009"
  },
  {
    "text": "on CRD you have a controller and in the end you deploy you know you have deployments and services and so on",
    "start": "342009",
    "end": "349229"
  },
  {
    "text": "cublas also has server let's plug in that's a shout-out to Austin this morning I think we can do better than",
    "start": "349229",
    "end": "357639"
  },
  {
    "text": "his event gateway but don't don't tell him ok but he has yes a great he has a great system so the two starting into a",
    "start": "357639",
    "end": "365949"
  },
  {
    "text": "security aspect you know if we look at the original architecture of cublas which was really a meant as a puck at",
    "start": "365949",
    "end": "372310"
  },
  {
    "text": "the beginning was quite simple let's extend the community's API with a CR D and that CR D is going to basically you",
    "start": "372310",
    "end": "379419"
  },
  {
    "text": "know allow us to have a function object kind function and then when you create a function so you have a manifest for a",
    "start": "379419",
    "end": "386560"
  },
  {
    "text": "function you have your cublas controller so your controller sees that object and then creates a deployment that",
    "start": "386560",
    "end": "393069"
  },
  {
    "text": "deployment then launches a pod and in that pod you inject a function ok that's",
    "start": "393069",
    "end": "398469"
  },
  {
    "text": "actually quite easy going to say easy that's actually quite easy to do is just a single controller",
    "start": "398469",
    "end": "403780"
  },
  {
    "text": "er D definition and if you if you stay at this in terms of server less basically you know 2018 CGI that's a",
    "start": "403780",
    "end": "413500"
  },
  {
    "text": "relatively simple system now I really think that the trick comes when you have",
    "start": "413500",
    "end": "418930"
  },
  {
    "text": "to trigger those functions when you have events okay so that's going to be really the the value-add of of those systems so",
    "start": "418930",
    "end": "427290"
  },
  {
    "text": "we we spend quite a bit of time recently trying to I mean not trying we achieved",
    "start": "427290",
    "end": "433780"
  },
  {
    "text": "it we solve that problem we cracked it we react technique we architected cublas",
    "start": "433780",
    "end": "439000"
  },
  {
    "text": "and i'm not going to show it to you like a lot of details but now we actually have event triggers that are defined as",
    "start": "439000",
    "end": "445480"
  },
  {
    "text": "new CRD objects so if you want to trigger on an event in Nats we have we",
    "start": "445480",
    "end": "451000"
  },
  {
    "text": "define an adze trigger if you want to trigger on an event in Kafka you have a casket trigger if you want to trigger on",
    "start": "451000",
    "end": "457540"
  },
  {
    "text": "a sqs message you have an sqs trigger object yeah you get you get the idea you",
    "start": "457540",
    "end": "463990"
  },
  {
    "text": "get the drift so now all your cloud services out there kinases you know Google storage and so on you're going to",
    "start": "463990",
    "end": "471130"
  },
  {
    "text": "be able to define a mapping between an event and a function using a cumulative",
    "start": "471130",
    "end": "476590"
  },
  {
    "text": "CRD so I think this is really really interesting and it opens you know a ton",
    "start": "476590",
    "end": "482500"
  },
  {
    "text": "of a ton of doors so that's the overall architecture but what up you know what about the the security features and we",
    "start": "482500",
    "end": "489280"
  },
  {
    "text": "have people you know they're saying hey we want to use Cubase but we're on openshift we have big security you know",
    "start": "489280",
    "end": "495370"
  },
  {
    "text": "requirements and so on so we need to really think about the security of that system so I I you know at a high level I",
    "start": "495370",
    "end": "503350"
  },
  {
    "text": "said two types of security internal security and then external so internal I",
    "start": "503350",
    "end": "509650"
  },
  {
    "text": "mean authentication authorization who can create functions and manage them delete them modify them and so on",
    "start": "509650",
    "end": "516450"
  },
  {
    "text": "how can you limit what a potentially compromised function can do and then",
    "start": "516450",
    "end": "522310"
  },
  {
    "text": "things like auditing and logging and so on I'm not going to talk about auditing and logging because you get that out of the box with kubernetes is just a set up",
    "start": "522310",
    "end": "529570"
  },
  {
    "text": "and then external security so you've deployed your function you have your authentication Arabic and",
    "start": "529570",
    "end": "536440"
  },
  {
    "text": "so on external security I mean who can authenticate who can talk to that function endpoint okay so how are you",
    "start": "536440",
    "end": "543610"
  },
  {
    "text": "going to enable this usually it's some type of anticipation at the ingress layer okay and then the I think that the",
    "start": "543610",
    "end": "551620"
  },
  {
    "text": "next problem is really what can the function do in terms of talking to a cloud service and to be able to talk to",
    "start": "551620",
    "end": "559210"
  },
  {
    "text": "a cloud service you need to have an identity you need to have an identity and authentication profile a yam profile",
    "start": "559210",
    "end": "565060"
  },
  {
    "text": "something like this so when you start thinking about this now your function needs to leverage pod identity",
    "start": "565060",
    "end": "574200"
  },
  {
    "text": "functionalities okay there was lots of bullets if you prefer a picture it looks",
    "start": "574200",
    "end": "580480"
  },
  {
    "text": "like this okay external security who can call it the ingress X and then you know",
    "start": "580480",
    "end": "587380"
  },
  {
    "text": "what's the identity of the function to talk to other services and name need to",
    "start": "587380",
    "end": "592750"
  },
  {
    "text": "be able to consume those those events for example and then internal I'm going to really talk about this authentication",
    "start": "592750",
    "end": "600630"
  },
  {
    "text": "solved out of the box because your system if you base it on Kuban it is a",
    "start": "600630",
    "end": "606310"
  },
  {
    "text": "function is now a custom object so you have authentication out-of-the-box you",
    "start": "606310",
    "end": "611980"
  },
  {
    "text": "use the authentication mechanism of the Kuban if it's a PI server okay so here",
    "start": "611980",
    "end": "618700"
  },
  {
    "text": "you know you see the example of the the function object right now API version cublas iuv 1 beta 1 the kind is function",
    "start": "618700",
    "end": "625720"
  },
  {
    "text": "and then of course you have the metadata you have everything that comes in communities so authentication solved and",
    "start": "625720",
    "end": "631960"
  },
  {
    "text": "I think that's really the way you should design that system if you have to build your own function API server I think",
    "start": "631960",
    "end": "638470"
  },
  {
    "text": "it's you know it's not the right way to do it so here we leverage the authentication system of kubernetes and",
    "start": "638470",
    "end": "645400"
  },
  {
    "text": "of course out of the box you also get our back ok it's just another object so",
    "start": "645400",
    "end": "651670"
  },
  {
    "text": "if you if you create a communities cluster with our back enabled and then",
    "start": "651670",
    "end": "656920"
  },
  {
    "text": "you see here at the top is a cube CTL get functions in a specific with a",
    "start": "656920",
    "end": "663220"
  },
  {
    "text": "specific contacts which is just a different user that's not allowed to do too anything you see it says hey cannot list",
    "start": "663220",
    "end": "669810"
  },
  {
    "text": "functions so typically that's because the our back row the user making the call doesn't have the our back role to",
    "start": "669810",
    "end": "675810"
  },
  {
    "text": "be able to do the function then you see that I create a role I create a role binding and now I do a get function same",
    "start": "675810",
    "end": "682920"
  },
  {
    "text": "call and now it says no resources found so you know nothing magic here but",
    "start": "682920",
    "end": "688350"
  },
  {
    "text": "that's out of the box because you know cube less or any other system actually like nuclear or I haven't checked FN or",
    "start": "688350",
    "end": "696000"
  },
  {
    "text": "or with things like this by basing their function system on top of queue bilities",
    "start": "696000",
    "end": "701520"
  },
  {
    "text": "they get all of that out of the box and then if we start thinking about the the",
    "start": "701520",
    "end": "706950"
  },
  {
    "text": "isolation of those functions then it's great because you know it's a Cuban it is native object so you have namespace",
    "start": "706950",
    "end": "713880"
  },
  {
    "text": "isolation so get function in the default namespace get function on all namespaces",
    "start": "713880",
    "end": "718980"
  },
  {
    "text": "suddenly you see another function show up okay so you get namespace oscillation",
    "start": "718980",
    "end": "725220"
  },
  {
    "text": "and suddenly it starts becoming super interesting to have namespaces relation and also to have support for labels okay",
    "start": "725220",
    "end": "732480"
  },
  {
    "text": "and this is just standard communities I'm guessing some of you know this but you see at the top I'm creating a",
    "start": "732480",
    "end": "738120"
  },
  {
    "text": "function so that's the typical cube less realized Cube last function deployed and at the CLI I can define some labels so",
    "start": "738120",
    "end": "746120"
  },
  {
    "text": "you could write a function as a function manifest but you can also use this here I and then we have this you know I call",
    "start": "746120",
    "end": "752730"
  },
  {
    "text": "that convenience to be able to define the labels so now you have a function object that's going to be created that's",
    "start": "752730",
    "end": "758580"
  },
  {
    "text": "going to have labels we propagate those labels to the pod that's going to serve",
    "start": "758580",
    "end": "764190"
  },
  {
    "text": "that function and what does that mean it means that suddenly you're going to be able to use network policies to isolate",
    "start": "764190",
    "end": "770940"
  },
  {
    "text": "your functions between well each other or other things okay so the fact that",
    "start": "770940",
    "end": "777390"
  },
  {
    "text": "you're Cuban it is native authentication are back namespace isolation labeled",
    "start": "777390",
    "end": "782970"
  },
  {
    "text": "support for label which then opens the door to to network policy here you see a",
    "start": "782970",
    "end": "788370"
  },
  {
    "text": "network policies that says hey all the parts that have the tag label fubar",
    "start": "788370",
    "end": "793530"
  },
  {
    "text": "you know you allow ingress from pods that have access equal true okay so you",
    "start": "793530",
    "end": "799290"
  },
  {
    "text": "can stop incoming traffic to your to your function and then you know it's just an example I'm going to",
    "start": "799290",
    "end": "805139"
  },
  {
    "text": "spare you the demo because it just works okay honestly okay so authentication our authorization",
    "start": "805139",
    "end": "815540"
  },
  {
    "text": "isolation thanks to network policies out of the box now we start you know wanting",
    "start": "815540",
    "end": "820620"
  },
  {
    "text": "to isolate you know what a potentially compromised function could do on the on",
    "start": "820620",
    "end": "825750"
  },
  {
    "text": "the underlying system and at the end of the day it's a pod so it's just pot security out of the box again so you",
    "start": "825750",
    "end": "832829"
  },
  {
    "text": "know if you look at the pod that's that's running your function there is a security context okay by default we we actually backed it into",
    "start": "832829",
    "end": "840949"
  },
  {
    "text": "into into cublas and unrest did this so we said you know FS group run as user",
    "start": "840949",
    "end": "847970"
  },
  {
    "text": "1000 so that out-of-the-box without changing anything it's going to run on open shift because open shift has a",
    "start": "847970",
    "end": "854820"
  },
  {
    "text": "little bit tighter security constraint out of the box okay so by default you",
    "start": "854820",
    "end": "861570"
  },
  {
    "text": "get you get this you get some security context but then you also have the container that's the runtime",
    "start": "861570",
    "end": "869399"
  },
  {
    "text": "okay the function runtime so that function runtime has been built also and that's just an example for the from the",
    "start": "869399",
    "end": "876329"
  },
  {
    "text": "the go runtime we just announced golang support user 1,000 so that's really the",
    "start": "876329",
    "end": "881940"
  },
  {
    "text": "the basis so the the server that's exposing your function doesn't run as root that's really the the minimum thing",
    "start": "881940",
    "end": "889470"
  },
  {
    "text": "that that you need to you need to do okay I'm not saying that that's the best security but at a minimum you you know",
    "start": "889470",
    "end": "895470"
  },
  {
    "text": "you need to do this so here your honor you're now trying to limit what a potential compromised function could do",
    "start": "895470",
    "end": "903290"
  },
  {
    "text": "and then of course you know if somebody managed to get out of that of that",
    "start": "903290",
    "end": "908790"
  },
  {
    "text": "container and reach your host you know you would like to be able to to limit the blast radius so that's where things",
    "start": "908790",
    "end": "915540"
  },
  {
    "text": "like Kotak containers come in or you know I haven't had time to to play with",
    "start": "915540",
    "end": "921810"
  },
  {
    "text": "it but the newly announced G visor from Google if you're running kubernetes on",
    "start": "921810",
    "end": "927449"
  },
  {
    "text": "hosts that have G visors installed then suddenly you know each of your pods are going to be really well isolated from",
    "start": "927449",
    "end": "934589"
  },
  {
    "text": "from each other so it's just it's just beautiful okay and I think that's it's a general tenancy with well it's not even",
    "start": "934589",
    "end": "942720"
  },
  {
    "text": "a tenancy so it's a general thing with technologies that we see convergence of things okay everything I'm talking about",
    "start": "942720",
    "end": "948959"
  },
  {
    "text": "here is just baked into Cuba niches and then the the availability of you know",
    "start": "948959",
    "end": "954899"
  },
  {
    "text": "things like like G Weiser okay but it tells you why you end up with extremely",
    "start": "954899",
    "end": "960390"
  },
  {
    "text": "secure functions now by default pods",
    "start": "960390",
    "end": "965939"
  },
  {
    "text": "when they start they're going to have a default service account and you know some of you may remember at the",
    "start": "965939",
    "end": "971370"
  },
  {
    "text": "beginning in Cuba noticed there was no Arabic so when you were running with a default service account you were route",
    "start": "971370",
    "end": "976500"
  },
  {
    "text": "from the capabilities API server that was that was great okay now it's much more you know much more restricted so",
    "start": "976500",
    "end": "984779"
  },
  {
    "text": "the default service account you know cannot do much and the other day I was writing a function that was",
    "start": "984779",
    "end": "990269"
  },
  {
    "text": "calling the API server to get secrets and I was like oh can it get secret ah",
    "start": "990269",
    "end": "995490"
  },
  {
    "text": "nice nice security feature out of the box okay I was I was actually restricted",
    "start": "995490",
    "end": "1000800"
  },
  {
    "text": "to do you know things on the API server so that means that what you would like to do is be able to run functions maybe",
    "start": "1000800",
    "end": "1007639"
  },
  {
    "text": "with a specific service account typical typical thing in Ncube Anytus so",
    "start": "1007639",
    "end": "1013790"
  },
  {
    "text": "this week we did a demo with the folks at sis deck we did a nice integration with their system Falco Falco is the open source",
    "start": "1013790",
    "end": "1021439"
  },
  {
    "text": "security it's not a security scanning system but basically you can define a",
    "start": "1021439",
    "end": "1026780"
  },
  {
    "text": "set of security rules and it's going to monitor all the system calls that are happening in your in your hosts and if",
    "start": "1026780",
    "end": "1034250"
  },
  {
    "text": "it detects an event that you know matches a specific role then you know",
    "start": "1034250",
    "end": "1040760"
  },
  {
    "text": "it's going to trigger an action so the integration that we did is that we are running Falco on a gke cluster and then",
    "start": "1040760",
    "end": "1047990"
  },
  {
    "text": "we have some rules to detect Bitcoin miners and when the Bitcoin miner is",
    "start": "1047990",
    "end": "1053570"
  },
  {
    "text": "detected it sends an image to nuts and then the Nats event triggers the queue",
    "start": "1053570",
    "end": "1058760"
  },
  {
    "text": "blast function that kills the pod okay so we have an automated",
    "start": "1058760",
    "end": "1064909"
  },
  {
    "text": "Bitcoin miner killer but to be able to do this we needed to",
    "start": "1064909",
    "end": "1070250"
  },
  {
    "text": "be able to kill pods and a default service account cannot kill pods okay so we ended up creating a service account",
    "start": "1070250",
    "end": "1077179"
  },
  {
    "text": "and then using that service account for the the underlying function so how can",
    "start": "1077179",
    "end": "1083299"
  },
  {
    "text": "you do this and kind of customize this cublas has a config map that's its",
    "start": "1083299",
    "end": "1090200"
  },
  {
    "text": "cluster wide right now ideally we would try to build that as a multi-tenant kind",
    "start": "1090200",
    "end": "1096470"
  },
  {
    "text": "of configuration so that every user may have a custom config for their underlying function right now it's",
    "start": "1096470",
    "end": "1103130"
  },
  {
    "text": "cluster wide so you edit that configuration and then you can actually",
    "start": "1103130",
    "end": "1108399"
  },
  {
    "text": "configure the deployment manifest that's going to be used for the function so if",
    "start": "1108399",
    "end": "1114470"
  },
  {
    "text": "you want a function to use service icon Falco you just specify that in the config map and every function that's",
    "start": "1114470",
    "end": "1120799"
  },
  {
    "text": "going to start is now going to use that service account so you've just locked it down even further does that does that",
    "start": "1120799",
    "end": "1129649"
  },
  {
    "text": "make sense so far is it interesting or boring no interesting so that's internal",
    "start": "1129649",
    "end": "1139039"
  },
  {
    "text": "security I think it's a you know it's mostly out of the box cumulative stuff that you know you need",
    "start": "1139039",
    "end": "1145250"
  },
  {
    "text": "to be aware of and then turn on and understand how to configure so now external security that's you know it's a",
    "start": "1145250",
    "end": "1152090"
  },
  {
    "text": "little bit more interesting from the actual faz solution you know that that's not a Cuba native feature per se but",
    "start": "1152090",
    "end": "1160580"
  },
  {
    "text": "when you need to think about it from the the QoS DF and you know all those all",
    "start": "1160580",
    "end": "1166340"
  },
  {
    "text": "those solutions so mostly it's an authentication issue who can call your",
    "start": "1166340",
    "end": "1171350"
  },
  {
    "text": "function endpoint okay and then what can your function do okay so in cublas you",
    "start": "1171350",
    "end": "1177380"
  },
  {
    "text": "can do cublas trigger HTTP create okay so you can create HTTP triggers how am I",
    "start": "1177380",
    "end": "1186049"
  },
  {
    "text": "going to call my function and that's really the basic you know if it's exposed by the HTTP you want to call it",
    "start": "1186049",
    "end": "1192020"
  },
  {
    "text": "over HTTP you want to expose that function outside of your cluster so with",
    "start": "1192020",
    "end": "1197179"
  },
  {
    "text": "cublas trigger create you we generate cube let's generate an ingress object okay so you have you know",
    "start": "1197179",
    "end": "1206029"
  },
  {
    "text": "a set of options there to turn on TLS specify the you know secrets and and so",
    "start": "1206029",
    "end": "1212749"
  },
  {
    "text": "on okay so more or less in the Cubist CLI you have a convenience wrapper to",
    "start": "1212749",
    "end": "1219109"
  },
  {
    "text": "create an ingress object and of course that means that now if you're using an",
    "start": "1219109",
    "end": "1225169"
  },
  {
    "text": "engine X ingress controller create a password HTTP password you create a",
    "start": "1225169",
    "end": "1230960"
  },
  {
    "text": "secret to stick that HTTP password and now when you define your trigger cube",
    "start": "1230960",
    "end": "1236210"
  },
  {
    "text": "let's trigger create you specify - - basic auth secret you make a reference",
    "start": "1236210",
    "end": "1241219"
  },
  {
    "text": "to accumulative secret that's the beautiful thing about the system ok",
    "start": "1241219",
    "end": "1246259"
  },
  {
    "text": "everything falls in place so you reference your community secret and now you actually have a basic auth endpoint",
    "start": "1246259",
    "end": "1257210"
  },
  {
    "text": "to your function from outside your cluster okay this is just to property of",
    "start": "1257210",
    "end": "1263779"
  },
  {
    "text": "the ingress controller engine X ingress yeah and by the way you see if you do a",
    "start": "1263779",
    "end": "1271519"
  },
  {
    "text": "cube control get CRD in a cluster where you have installed the cublas you'll see that there is a CRD for HTTP triggers so",
    "start": "1271519",
    "end": "1281089"
  },
  {
    "text": "you know all our triggers are defined as your the objects that's what I was mentioning of course nginx you know it's",
    "start": "1281089",
    "end": "1289969"
  },
  {
    "text": "one thing and that just gives you basic auth maybe you want something a little bit more interesting than basic auth and",
    "start": "1289969",
    "end": "1296710"
  },
  {
    "text": "we just added you know some support for for Kong so Kong is basically an api api",
    "start": "1296710",
    "end": "1304759"
  },
  {
    "text": "gateway but you can program it very nicely and you can get JWT token to",
    "start": "1304759",
    "end": "1311539"
  },
  {
    "text": "access an HTTP endpoint you can get you know api keys and and so on so if you",
    "start": "1311539",
    "end": "1318379"
  },
  {
    "text": "use the the newly announced kong ingress controller suddenly it opens the door to",
    "start": "1318379",
    "end": "1324830"
  },
  {
    "text": "you know a lot of ways to access your your function endpoints",
    "start": "1324830",
    "end": "1331200"
  },
  {
    "text": "Joe Joe Beda the other day was asking on Twitter what to talk about as it is",
    "start": "1331200",
    "end": "1336970"
  },
  {
    "text": "Friday thank God it's Cuban it is Gigi okay",
    "start": "1336970",
    "end": "1342039"
  },
  {
    "text": "and I suggested that it talks about security and a security configuration",
    "start": "1342039",
    "end": "1347559"
  },
  {
    "text": "and so on because I want to 20k to my create this cluster with my github account but anyway and they have gangway",
    "start": "1347559",
    "end": "1354700"
  },
  {
    "text": "I've had time to play with it but it's a utility to be able to authenticate to",
    "start": "1354700",
    "end": "1360490"
  },
  {
    "text": "create this with different system and I think they have a plug-in with off zeros off zero that's very interesting because",
    "start": "1360490",
    "end": "1368049"
  },
  {
    "text": "I think if they were to put gangway in their ingress we could secure an HTTP endpoint you",
    "start": "1368049",
    "end": "1375280"
  },
  {
    "text": "know cube less using off 0 and the server less community the users of",
    "start": "1375280",
    "end": "1381250"
  },
  {
    "text": "server less they are very very keen on off to zero as a as a way to manage",
    "start": "1381250",
    "end": "1386500"
  },
  {
    "text": "security to their to their api's so it would be a perfect combination to get",
    "start": "1386500",
    "end": "1392169"
  },
  {
    "text": "you know in the zero authentication set up there yeah and and yesterday I was",
    "start": "1392169",
    "end": "1400390"
  },
  {
    "text": "finishing the slides and I realized that in the abstract I said I was going to use eks but I I didn't get access to it",
    "start": "1400390",
    "end": "1406480"
  },
  {
    "text": "yes so yeah there is no gas content in there I apologize so now let's move on to",
    "start": "1406480",
    "end": "1414400"
  },
  {
    "text": "external service certification that's that's where it gets interesting because those functions that are glue between",
    "start": "1414400",
    "end": "1421090"
  },
  {
    "text": "cloud services those functions they need to be able to do things with the cloud so typically that means that they need",
    "start": "1421090",
    "end": "1427510"
  },
  {
    "text": "to have access to some type of service account to talk to cloud storage or talk to kinases you know cloud ml you know",
    "start": "1427510",
    "end": "1435429"
  },
  {
    "text": "you name it so how do you give pod function an identity so that it can it",
    "start": "1435429",
    "end": "1441280"
  },
  {
    "text": "can do things if you are on on AWS you can use a system called cube - I am cube",
    "start": "1441280",
    "end": "1449590"
  },
  {
    "text": "- I am ok and with this you can annotate a part and that part will get access to",
    "start": "1449590",
    "end": "1456909"
  },
  {
    "text": "the role specified in the annotation ok so that's that's great that's very",
    "start": "1456909",
    "end": "1462789"
  },
  {
    "text": "helpful in cue bless it gives us a little bit of a problem because now we need to add",
    "start": "1462789",
    "end": "1468580"
  },
  {
    "text": "some convenience in the in the CLI to be able to provide an annotation and then",
    "start": "1468580",
    "end": "1475060"
  },
  {
    "text": "different functions may have different annotation so we need to think about how to enable that you know nicely but it's",
    "start": "1475060",
    "end": "1482140"
  },
  {
    "text": "totally doable and on GCP on GCP it's a little bit easier because you can just",
    "start": "1482140",
    "end": "1487780"
  },
  {
    "text": "reference a service account with an environmental variable so create a",
    "start": "1487780",
    "end": "1493150"
  },
  {
    "text": "service account in your Google Cloud console download that service account in you know JSON file and then you need to",
    "start": "1493150",
    "end": "1500230"
  },
  {
    "text": "just make it available as Google application credential okay and then and",
    "start": "1500230",
    "end": "1505510"
  },
  {
    "text": "then you get it and in in the cublas CLI you see that you can specify an",
    "start": "1505510",
    "end": "1511060"
  },
  {
    "text": "environmental variable and you can also specify a secret and then will automatically you know mount everything",
    "start": "1511060",
    "end": "1516910"
  },
  {
    "text": "so that the function has accessed that that's secret and it's defined as an elemental variable so you do this",
    "start": "1516910",
    "end": "1524110"
  },
  {
    "text": "and now you can you can talk to two things I'm going to let did you the Joe",
    "start": "1524110",
    "end": "1529990"
  },
  {
    "text": "container download yeah okay cool so I don't need to keep talking okay so I'm",
    "start": "1529990",
    "end": "1536950"
  },
  {
    "text": "not going to do this demo but that's just to give you an idea where we're going with with cublas specifically to",
    "start": "1536950",
    "end": "1544090"
  },
  {
    "text": "talk to cloud services that's just a prototype there of a mini Python",
    "start": "1544090",
    "end": "1549760"
  },
  {
    "text": "controller that monitors ingress objects and when it sees an ingress objects it",
    "start": "1549760",
    "end": "1556060"
  },
  {
    "text": "makes a call to the AWS API gateway and registers the route in an API gateway",
    "start": "1556060",
    "end": "1562720"
  },
  {
    "text": "okay why why did I do this is because you know we package this as a little pod",
    "start": "1562720",
    "end": "1570550"
  },
  {
    "text": "running in the cluster and it monitors you know what you're doing with your your cublas system and then suddenly you",
    "start": "1570550",
    "end": "1577780"
  },
  {
    "text": "get the API gateway the program automatically and if you look at the",
    "start": "1577780",
    "end": "1583120"
  },
  {
    "text": "call I'm making to the API gate where it says authorization type none if I want I",
    "start": "1583120",
    "end": "1588250"
  },
  {
    "text": "can just say authorization type AWS yam or kognito and that now I fall back in",
    "start": "1588250",
    "end": "1594820"
  },
  {
    "text": "the AWS land and can actually give an identity to or secure that function end point so we",
    "start": "1594820",
    "end": "1603280"
  },
  {
    "text": "have you know lots and lots of of potential here so with that I'd like to to let us show us how is actually",
    "start": "1603280",
    "end": "1612040"
  },
  {
    "text": "leveraging another system that converges with communities which is of course East Joe that helps us secure even more",
    "start": "1612040",
    "end": "1619290"
  },
  {
    "text": "function environments",
    "start": "1619290",
    "end": "1622980"
  },
  {
    "text": "Oh",
    "start": "1634860",
    "end": "1636890"
  },
  {
    "text": "can you hear me now awesome well that's the wrong screen so",
    "start": "1650480",
    "end": "1656130"
  },
  {
    "text": "let's try to move all the stuff over here we go the first one oops sorry",
    "start": "1656130",
    "end": "1668840"
  },
  {
    "text": "there's something you should not oh wait a second is to use an open platform to",
    "start": "1668840",
    "end": "1677790"
  },
  {
    "text": "connect manage and secure micro-services sq+ is based on kubernetes deployment this",
    "start": "1677790",
    "end": "1686070"
  },
  {
    "text": "view can be applied easily to cublas during this demo i would like to show",
    "start": "1686070",
    "end": "1692880"
  },
  {
    "text": "you how you can easily expose secure q+",
    "start": "1692880",
    "end": "1699180"
  },
  {
    "text": "functions using JWT tool as well as arabic rules to secure the communication",
    "start": "1699180",
    "end": "1704640"
  },
  {
    "text": "between services deployed to the SQ service measure first of all the demo",
    "start": "1704640",
    "end": "1711900"
  },
  {
    "text": "architecture it's based on at CDU we have an product service and the Commons functions of a product function at the",
    "start": "1711900",
    "end": "1718560"
  },
  {
    "text": "Commons function and all this is display y and web UI to make it a bit more",
    "start": "1718560",
    "end": "1725250"
  },
  {
    "text": "interesting I build a small beer shop mmm all this is a exposed wire and is to",
    "start": "1725250",
    "end": "1734670"
  },
  {
    "text": "you ingress controller while the history of ingress controller it is working like every normal ingress you know about were",
    "start": "1734670",
    "end": "1743190"
  },
  {
    "text": "the addition that we have to have an annotation to use the sto ingress class",
    "start": "1743190",
    "end": "1749060"
  },
  {
    "text": "the functions are both pretty easy so we have a product service or the products I",
    "start": "1749060",
    "end": "1754830"
  },
  {
    "text": "was able to get all the products out of the H CD as well or if we provide a path",
    "start": "1754830",
    "end": "1762360"
  },
  {
    "text": "that's able to get one the comments function is looking similar so I won't show it again",
    "start": "1762360",
    "end": "1769580"
  },
  {
    "text": "in issue ia enable neutral TLS by an ailing mute LTL as you make sure the",
    "start": "1770640",
    "end": "1776850"
  },
  {
    "text": "connection between the invoice inside the service measure so between between the sidecars is encrypted as well as",
    "start": "1776850",
    "end": "1784940"
  },
  {
    "text": "server and client are authenticated using the spiffy protocol I won't go",
    "start": "1784940",
    "end": "1791730"
  },
  {
    "text": "into any details here as it is known not an SEO talk but with this system your",
    "start": "1791730",
    "end": "1800309"
  },
  {
    "text": "you can make sure there is no man in the middle between services talking to each",
    "start": "1800309",
    "end": "1806340"
  },
  {
    "text": "other first thing I like to do is as the beer shop is already exposed I like to",
    "start": "1806340",
    "end": "1814340"
  },
  {
    "text": "disable the comments frank functions from people who are not authenticated so",
    "start": "1814340",
    "end": "1822660"
  },
  {
    "text": "if you haven't looked on to the details page you see comments to lis to the",
    "start": "1822660",
    "end": "1828090"
  },
  {
    "text": "selected beer and to apply and JW to add",
    "start": "1828090",
    "end": "1836580"
  },
  {
    "text": "JWT authentication to to a service you simply have to write an authentication",
    "start": "1836580",
    "end": "1842309"
  },
  {
    "text": "policy policy in this case very restricting the comment servers and",
    "start": "1842309",
    "end": "1848780"
  },
  {
    "text": "allowing only connections from people authenticated by the by this google",
    "start": "1848780",
    "end": "1857130"
  },
  {
    "text": "service account so let's apply this and",
    "start": "1857130",
    "end": "1866510"
  },
  {
    "text": "I will already get in JW teto so if we",
    "start": "1866510",
    "end": "1877799"
  },
  {
    "text": "refresh the page there are no no comments shown so let's quickly log in",
    "start": "1877799",
    "end": "1884299"
  },
  {
    "text": "with our JW teto and now the comments are shown again because the",
    "start": "1884299",
    "end": "1890549"
  },
  {
    "text": "authentication was successful in the next step I would like to",
    "start": "1890549",
    "end": "1899419"
  },
  {
    "text": "restrict the access to particular services using our make rules so the",
    "start": "1899419",
    "end": "1905390"
  },
  {
    "text": "Arabic rules are done in the Geo mixer so we are sending the request context of",
    "start": "1905390",
    "end": "1912620"
  },
  {
    "text": "each incoming request to the service to the - mixer where the artistry Arabic engine is evaluating the the Arabic",
    "start": "1912620",
    "end": "1919549"
  },
  {
    "text": "policy and then allows or denies daily the access that's set to enable Arabic",
    "start": "1919549",
    "end": "1929419"
  },
  {
    "text": "we have to first define the request context this is pretty much the",
    "start": "1929419",
    "end": "1936549"
  },
  {
    "text": "configuration from the ISTE or documentation so I won't go into any detail and the second step we have to",
    "start": "1936549",
    "end": "1943960"
  },
  {
    "text": "define an Arabic handler and or configure the Arabic handler and finally",
    "start": "1943960",
    "end": "1949460"
  },
  {
    "text": "we have to map that every breakfast inside the default namespace will be",
    "start": "1949460",
    "end": "1955370"
  },
  {
    "text": "redirected to the Arabic handler using the request context we defined earlier",
    "start": "1955370",
    "end": "1961720"
  },
  {
    "text": "so and if we applied this the entire all",
    "start": "1966970",
    "end": "1973490"
  },
  {
    "text": "the connections are denied because we have not defined any any deferral to",
    "start": "1973490",
    "end": "1979880"
  },
  {
    "text": "allow access to the web UI and the product service to do the so we have to",
    "start": "1979880",
    "end": "1986690"
  },
  {
    "text": "add a service role which is allowing all",
    "start": "1986690",
    "end": "1991720"
  },
  {
    "text": "methods so can't post update lead and so on on the product pur shop and comment",
    "start": "1991720",
    "end": "1999289"
  },
  {
    "text": "service for demo purpose I have excluded the HCD cluster we will enable it later",
    "start": "1999289",
    "end": "2008650"
  },
  {
    "text": "and what we have to do for we have to map the service role binding to the east",
    "start": "2008650",
    "end": "2014289"
  },
  {
    "text": "geo system namespace this is the place where the issue ingress is located and",
    "start": "2014289",
    "end": "2019600"
  },
  {
    "text": "for internal connections on to the default namespace",
    "start": "2019600",
    "end": "2025260"
  },
  {
    "text": "so quickly apply this if we refresh the",
    "start": "2025300",
    "end": "2034210"
  },
  {
    "text": "page now you can see the page is loaded fine the only thing which is not loaded",
    "start": "2034210",
    "end": "2040240"
  },
  {
    "text": "is the the pro are the products and the reason is the service server got in 500",
    "start": "2040240",
    "end": "2047290"
  },
  {
    "text": "error because he is not allowed to connect to the HDD database so what we",
    "start": "2047290",
    "end": "2052540"
  },
  {
    "text": "have to do now we have to enable connections to the etcd database and",
    "start": "2052540",
    "end": "2062610"
  },
  {
    "text": "after a few seconds it should work here",
    "start": "2062610",
    "end": "2071530"
  },
  {
    "text": "we go last but not least the comments are still not shown because we still",
    "start": "2071530",
    "end": "2078220"
  },
  {
    "text": "have to add the JWT toll the our big rule is just validating that con that",
    "start": "2078220",
    "end": "2084070"
  },
  {
    "text": "the connections are from the east you ingress and not from somewhere else",
    "start": "2084070",
    "end": "2092280"
  },
  {
    "text": "that said we ran at the end of the short demo I think issue is super good fit to",
    "start": "2096090",
    "end": "2104100"
  },
  {
    "text": "cublas as it is enabling a lot of security options which are not there by",
    "start": "2104100",
    "end": "2114010"
  },
  {
    "text": "default there are still some some limitations so to enable mutual TLS you",
    "start": "2114010",
    "end": "2120670"
  },
  {
    "text": "we we have to employ you have to implement a short workaround to disable",
    "start": "2120670",
    "end": "2126370"
  },
  {
    "text": "the liveness probe the reason is is to you is not allowing any liveness probes",
    "start": "2126370",
    "end": "2132460"
  },
  {
    "text": "from cuban eaters this will be fixed soon either on qibla side as well as on",
    "start": "2132460",
    "end": "2141220"
  },
  {
    "text": "this your side and the cublas CLI is not fully functional with mutual TLS as the",
    "start": "2141220",
    "end": "2149410"
  },
  {
    "text": "cublas CLI is using the kubernetes proxy ur to connect to the to the function which is",
    "start": "2149410",
    "end": "2155080"
  },
  {
    "text": "not part of the sto mesh but I guess we will have a solution",
    "start": "2155080",
    "end": "2160150"
  },
  {
    "text": "there soon - that's it thank you thanks",
    "start": "2160150",
    "end": "2172330"
  },
  {
    "text": "us that's great he had to stream down a little bit the demo and then the the mutual TLS was a little bit complicated",
    "start": "2172330",
    "end": "2179470"
  },
  {
    "text": "that's because we need to exclude the else checks ports and the metrics / rap",
    "start": "2179470",
    "end": "2186970"
  },
  {
    "text": "/ matrix route from the East Joe set up very mutual TLS is enabled here Anita's",
    "start": "2186970",
    "end": "2199150"
  },
  {
    "text": "itself cannot access any ports and as well as you cannot get through the proxy",
    "start": "2199150",
    "end": "2204550"
  },
  {
    "text": "endpoint API servers providing to you to the to the services so and the solution",
    "start": "2204550",
    "end": "2211990"
  },
  {
    "text": "will be to take yeah have two ports at the end great thanks so that's coming in",
    "start": "2211990",
    "end": "2218530"
  },
  {
    "text": "that's coming in cue bless and I will give us mutual TLS via East Joe which means that now we have the full power of",
    "start": "2218530",
    "end": "2224680"
  },
  {
    "text": "service mesh and we can deploy functions within a service mesh those functions",
    "start": "2224680",
    "end": "2229810"
  },
  {
    "text": "will be triggered on events and will be able to to call other cloud services so",
    "start": "2229810",
    "end": "2236140"
  },
  {
    "text": "the conclusion you know queue bilities provides you with all the API objects to secure functions a lot of this is out of",
    "start": "2236140",
    "end": "2242830"
  },
  {
    "text": "the box you just need to know it's there and then configure it properly keep an eye on a so keep an eye on cube let's",
    "start": "2242830",
    "end": "2249550"
  },
  {
    "text": "look at the way that we're handling events with new triggers with announced NAT support which is really exciting so",
    "start": "2249550",
    "end": "2255940"
  },
  {
    "text": "you're going to see Kenny's is super support soon and that's even more exciting and then you know Flo us on",
    "start": "2255940",
    "end": "2262960"
  },
  {
    "text": "Twitter and thank you very much",
    "start": "2262960",
    "end": "2266700"
  }
]