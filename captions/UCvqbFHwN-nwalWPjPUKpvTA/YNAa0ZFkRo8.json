[
  {
    "start": "0",
    "end": "63000"
  },
  {
    "text": "okay I think we're good to start hello",
    "start": "2030",
    "end": "7890"
  },
  {
    "text": "everyone my name is Michael Benedict I'm a p.m. on the cloud in the data infrastructure team I work on the",
    "start": "7890",
    "end": "14190"
  },
  {
    "text": "container orchestration team at Pinterest and I also manage the infrastructure governance and the",
    "start": "14190",
    "end": "19590"
  },
  {
    "text": "capacity planning team I have with me here my colleague Lida who is the tech lead on the container orchestration",
    "start": "19590",
    "end": "25289"
  },
  {
    "text": "project so the agenda for today is would",
    "start": "25289",
    "end": "30599"
  },
  {
    "text": "start off with a quick overview of Pinterest is history and just in general",
    "start": "30599",
    "end": "35660"
  },
  {
    "text": "stats about our infrastructure and the current state of that world then you'll talk about the larger compute platform",
    "start": "35660",
    "end": "41730"
  },
  {
    "text": "which you are building at Pinterest start from the high level the vision and the scope to get us set the context as",
    "start": "41730",
    "end": "47039"
  },
  {
    "text": "to what what it all means and then eventually go into the meat of the presentation which is about the",
    "start": "47039",
    "end": "52980"
  },
  {
    "text": "orchestration system and what we are doing and how did we get there and finally I'll close out with the future",
    "start": "52980",
    "end": "59010"
  },
  {
    "text": "as to the next steps going into 2018 as well all right so with that how many of",
    "start": "59010",
    "end": "66150"
  },
  {
    "start": "63000",
    "end": "401000"
  },
  {
    "text": "you use Pinterest okay that is great so",
    "start": "66150",
    "end": "73580"
  },
  {
    "text": "here's a quick story so Pinterest was born back in 2010 it started off as a",
    "start": "73580",
    "end": "78780"
  },
  {
    "text": "simple Django application running on the cloud from day one this is what it",
    "start": "78780",
    "end": "83820"
  },
  {
    "text": "looked like the goal for Pinterest at that point was to collect and organize a",
    "start": "83820",
    "end": "89220"
  },
  {
    "text": "lot of ideas people pinned from searching on the Internet fast forward",
    "start": "89220",
    "end": "95790"
  },
  {
    "text": "to seven years in 2017 Pinterest has grown to become Pinterest has evolved",
    "start": "95790",
    "end": "103170"
  },
  {
    "text": "into a server produces evolved into a discovery engine today we focus more",
    "start": "103170",
    "end": "108479"
  },
  {
    "text": "about discovering pins which are relevant to users focused more on their interests graph rather than just generic",
    "start": "108479",
    "end": "115860"
  },
  {
    "text": "pins as you can see we've also advanced a lot into image detection and detecting objects or items within an imagine",
    "start": "115860",
    "end": "122579"
  },
  {
    "text": "recommending relevant pins and categories for that particular object",
    "start": "122579",
    "end": "128239"
  },
  {
    "text": "today we do about 200 million users monthly active users and what's more",
    "start": "129330",
    "end": "135960"
  },
  {
    "text": "interesting is that these users are pinners as we call them have so far pinned about hundred billion objects to",
    "start": "135960",
    "end": "144120"
  },
  {
    "text": "put that into context I mean that's a huge number that's it so the interesting",
    "start": "144120",
    "end": "149130"
  },
  {
    "text": "part about even that is that each pin has a rich set of metadata about who posted that pain rebel is it extracted",
    "start": "149130",
    "end": "155550"
  },
  {
    "text": "from you know what site or image or video is that and the specific tagging",
    "start": "155550",
    "end": "161190"
  },
  {
    "text": "which the user themselves have done relevant to that pin a single pin usually can be pinned by multiple users",
    "start": "161190",
    "end": "166980"
  },
  {
    "text": "so you have a lot of context or interest graph generated as part of a single pin",
    "start": "166980",
    "end": "173959"
  },
  {
    "text": "to power that we have tons of services behind the scenes so this beautiful",
    "start": "174350",
    "end": "180000"
  },
  {
    "text": "bubble visualization essentially just shows all the serving services which are categorized by the amount of V CPUs",
    "start": "180000",
    "end": "187620"
  },
  {
    "text": "they're essentially using like I said Pinterest runs on the public cloud we've been on AWS since day one and",
    "start": "187620",
    "end": "193470"
  },
  {
    "text": "they've grown to becoming one of the larger customers as well to give you an",
    "start": "193470",
    "end": "199350"
  },
  {
    "text": "on how diverse our computable clothes are we started off with our Django",
    "start": "199350",
    "end": "205530"
  },
  {
    "text": "monolith which have which has now been breaking down to large set of micro services we do have in the tune of about",
    "start": "205530",
    "end": "211530"
  },
  {
    "text": "thousand micro services running on our infrastructure the hosts are tens and",
    "start": "211530",
    "end": "216930"
  },
  {
    "text": "thousands of hosts but a large portion of Pinterest infrastructure is actually on the data processing side we do use",
    "start": "216930",
    "end": "224760"
  },
  {
    "text": "Hadoop and spark streaming as well as tensorflow largely as part of our machine learning platform provide some",
    "start": "224760",
    "end": "231660"
  },
  {
    "text": "context we have like about 10 raise to 5 number of jobs running at any given point in time specifically on model",
    "start": "231660",
    "end": "237720"
  },
  {
    "text": "training analytics pipeline just general compute work as well and our footprint",
    "start": "237720",
    "end": "243510"
  },
  {
    "text": "on the block storage system is also pretty immense in the tens of hundreds of petabytes we not only use it as a",
    "start": "243510",
    "end": "249750"
  },
  {
    "text": "storage mechanism we also leverage it mostly like a transactional analytical back-end as well so we do really push",
    "start": "249750",
    "end": "256799"
  },
  {
    "text": "the limits on some of these systems the current state of the world looks",
    "start": "256799",
    "end": "265060"
  },
  {
    "text": "something like this so Pinterest over the years has been adding multiple layers of infrastructure to suit certain",
    "start": "265060",
    "end": "272470"
  },
  {
    "text": "use cases and means and what has happened is that that we've come with these diverse set of tools and platforms",
    "start": "272470",
    "end": "279400"
  },
  {
    "text": "to support those growing needs as of today we already have like multiple mechanisms of provisioning resources on",
    "start": "279400",
    "end": "286090"
  },
  {
    "text": "top of AWS we have different compute platforms to help users run certain set",
    "start": "286090",
    "end": "291639"
  },
  {
    "text": "of workloads on these on these platforms and our use cases are also diverse and growing over a period of time",
    "start": "291639",
    "end": "297780"
  },
  {
    "text": "unfortunately this also brings a whole new set of challenges around tech debt and just general end to end developer",
    "start": "297780",
    "end": "305680"
  },
  {
    "text": "experience meaning if a person wants to launch a data job they have to follow like 10 different steps to get to their",
    "start": "305680",
    "end": "313000"
  },
  {
    "text": "end goal while they're launching the long-running services they have to probably do a whole different set of steps to do the same and you can imagine",
    "start": "313000",
    "end": "320650"
  },
  {
    "text": "the permutation and combination which will enhance this complexity for a developer and it really leads to like",
    "start": "320650",
    "end": "328270"
  },
  {
    "text": "less velocity in terms of when you're going from an idea into production even worse it adds a lot of support and",
    "start": "328270",
    "end": "334780"
  },
  {
    "text": "operations challenge on the infrastructure teams which are managing these systems unfortunately it is also",
    "start": "334780",
    "end": "340900"
  },
  {
    "text": "hard to migrate the system these jobs or workloads off of these existing systems because I think over a period of time",
    "start": "340900",
    "end": "347110"
  },
  {
    "text": "we've just lost all that context and knowledge about how they work and for what it's worth they've been just running there for the longest time so",
    "start": "347110",
    "end": "353050"
  },
  {
    "text": "these are like a lot of these challenges which we had to go through and think through a bit more in coming with coming",
    "start": "353050",
    "end": "358690"
  },
  {
    "text": "up with our you know strategy for the next few years we have to support Pinterest is growing needs in terms of",
    "start": "358690",
    "end": "365349"
  },
  {
    "text": "its investments and the machine learning platforms are the data processing side so we had to think through for more of a",
    "start": "365349",
    "end": "371860"
  },
  {
    "text": "holistic solution the one more key point to add over there is it's also very",
    "start": "371860",
    "end": "377800"
  },
  {
    "text": "difficult to actually implement governance around these platforms when you have such a diverse set of platforms to truly know who's using what and what",
    "start": "377800",
    "end": "384909"
  },
  {
    "text": "are the resources being used is extremely extremely difficult you just have these blocked chunks and you're Bill saying that this was the maximum",
    "start": "384909",
    "end": "392030"
  },
  {
    "text": "see two instances used by certain tags which makes it really hard to have like decent ROI conversations with the actual",
    "start": "392030",
    "end": "397550"
  },
  {
    "text": "users of those systems alright so with",
    "start": "397550",
    "end": "402770"
  },
  {
    "start": "401000",
    "end": "872000"
  },
  {
    "text": "that like I just want to quickly run through what our vision for the compute platform is this helped us id8 a bit",
    "start": "402770",
    "end": "408110"
  },
  {
    "text": "more and we came to the conclusion that our goal regardless of Orchestrator is regardless of which cloud we are running",
    "start": "408110",
    "end": "414080"
  },
  {
    "text": "on or whatever that is it should be to take to help a user provide a fastest",
    "start": "414080",
    "end": "419210"
  },
  {
    "text": "path from idea to production without really worrying about anything on the underlying infrastructure our key focus",
    "start": "419210",
    "end": "425930"
  },
  {
    "text": "areas were divvied up into three things we wanted to simplify the end-to-end developer experience as part of building",
    "start": "425930",
    "end": "432070"
  },
  {
    "text": "deploying launching a service and operating it not only a service but also a data job or any other type of jobs we",
    "start": "432070",
    "end": "440030"
  },
  {
    "text": "wanted to provide an integrated infrastructure platform whether you're running a bad job or a long-running",
    "start": "440030",
    "end": "445070"
  },
  {
    "text": "services metrics logs health checks or even job statuses all of them need to be",
    "start": "445070",
    "end": "451510"
  },
  {
    "text": "provided to a user through a single experience they don't have to go through n different tools to just get that data",
    "start": "451510",
    "end": "457420"
  },
  {
    "text": "and finally given Pinterest the size in",
    "start": "457420",
    "end": "464240"
  },
  {
    "text": "scale it was extremely important for us to invest heavily on a proper governance platform meaning we truly wanted to",
    "start": "464240",
    "end": "470720"
  },
  {
    "text": "understand what controls and policies we can build into this compute platform to ensure that we know who's using what on",
    "start": "470720",
    "end": "477800"
  },
  {
    "text": "the system who owns what and subsequently like either charge it out or have relevant TTL policies around",
    "start": "477800",
    "end": "485930"
  },
  {
    "text": "storage of data and many of those things I'll give some more examples as I go through to ensure the scope of the",
    "start": "485930",
    "end": "493040"
  },
  {
    "text": "problem kind of exploded just from orchestrators to these different pieces along the set up destined build resource",
    "start": "493040",
    "end": "501020"
  },
  {
    "text": "management deploy release and operations to give you an overview this is our interpretation of what a developer",
    "start": "501020",
    "end": "506360"
  },
  {
    "text": "usually goes through in terms of building and launching a job and subsequently these are also individual",
    "start": "506360",
    "end": "513140"
  },
  {
    "text": "problem areas which need to be resolved for what it's worth over the last seven",
    "start": "513140",
    "end": "518330"
  },
  {
    "text": "years Pinterest has built multiple solutions across many of these boxes and",
    "start": "518330",
    "end": "523419"
  },
  {
    "text": "like I said they were built for Suffolk needs at that point in time which has just been added over a period",
    "start": "523420",
    "end": "529279"
  },
  {
    "text": "of time today where integration across all of them is extremely extremely difficult so from our perspective this",
    "start": "529279",
    "end": "535220"
  },
  {
    "text": "is really the problem domain for the compute platform and as our goal to really stitch a narrative around it and provide a solution but that said we have",
    "start": "535220",
    "end": "543529"
  },
  {
    "text": "to start from the from the bottoms up so it comes down to actually the cloud",
    "start": "543529",
    "end": "548540"
  },
  {
    "text": "resources the orchestration systems and even those perimeters around containers or VMs which need to be defined first",
    "start": "548540",
    "end": "554180"
  },
  {
    "text": "before we can go up anywhere another context to be added earlier is Pinterest has been running on the VM virtual",
    "start": "554180",
    "end": "560720"
  },
  {
    "text": "machines for the longest time we even are there ec2 instances at least on the serving side and each service runs on",
    "start": "560720",
    "end": "568579"
  },
  {
    "text": "their individual instances so with that in mind I think one of the first things",
    "start": "568579",
    "end": "573890"
  },
  {
    "text": "we had to just figure out was how do you containerize this so this was really like a timeline of this of the",
    "start": "573890",
    "end": "580100"
  },
  {
    "text": "initiation of the project to where we are at the moment I'm just going to quickly give you an overview on this and touch upon one particular topic and then",
    "start": "580100",
    "end": "586670"
  },
  {
    "text": "Leda will give you the implementation details across across this timeline so way before even I started at Pinterest",
    "start": "586670",
    "end": "593000"
  },
  {
    "text": "the conversations about moving to containers was kicked off in 2016 and between the year's end of yours 2016",
    "start": "593000",
    "end": "599930"
  },
  {
    "text": "early 2017 the containerization project was like scoped implemented in terms of",
    "start": "599930",
    "end": "605420"
  },
  {
    "text": "deciding on the on the on docker as our as a primary container image format even",
    "start": "605420",
    "end": "611449"
  },
  {
    "text": "the runtime itself and then working through a host of solutions just to integrate with AWS and our legacy",
    "start": "611449",
    "end": "617000"
  },
  {
    "text": "implementations on the security side on the networking side etc we had to then",
    "start": "617000",
    "end": "622250"
  },
  {
    "text": "productionize darker and adopt it over the company I'm going to particularly talk about this one on how we actually",
    "start": "622250",
    "end": "631640"
  },
  {
    "text": "went about from that phase to going into an orchestration system so many",
    "start": "631640",
    "end": "637339"
  },
  {
    "text": "companies are facing this today in terms of how you actually evaluate I know many of you must be already using Cuban IDs",
    "start": "637339",
    "end": "642649"
  },
  {
    "text": "so you're really not here to learn about this but I do want to give you an overview as to the pain involved in",
    "start": "642649",
    "end": "648019"
  },
  {
    "text": "going through this process and coming to a decision because this is not something easy easily done at a company of the",
    "start": "648019",
    "end": "653480"
  },
  {
    "text": "scale so TLDR is we had to build this evaluation framework where we decided what the",
    "start": "653480",
    "end": "658580"
  },
  {
    "text": "the various options we had in terms of choosing something the pocs we had to do and subsequently what was the outcome",
    "start": "658580",
    "end": "664770"
  },
  {
    "text": "this was done in a span of eight weeks from an implementation perspective but the discussions have been happening for",
    "start": "664770",
    "end": "670230"
  },
  {
    "text": "more than two years so with that said the criteria around how we wanted to",
    "start": "670230",
    "end": "675570"
  },
  {
    "text": "choose an orchestration system the most important thing for Pinterest literally was the integration cost what does it",
    "start": "675570",
    "end": "681480"
  },
  {
    "text": "actually mean to move from a vm's world into into this new world specifically around the darker support side how do",
    "start": "681480",
    "end": "687990"
  },
  {
    "text": "you support sidecars Pinterest has a lot of site cars running alongside boat in the host level as well as in the",
    "start": "687990",
    "end": "693390"
  },
  {
    "text": "application level how can we support that the runtime extensibility the",
    "start": "693390",
    "end": "698700"
  },
  {
    "text": "networking integration so Pinterest has already invested heavily on the networking side of using Ian's eyes and",
    "start": "698700",
    "end": "704160"
  },
  {
    "text": "having security groups assigned to those so we have a pretty robust system already in place how do we integrate with that which is both easy simple and",
    "start": "704160",
    "end": "711240"
  },
  {
    "text": "easy to debug and used reason out with as well the other aspects of what was",
    "start": "711240",
    "end": "716460"
  },
  {
    "text": "really important for Pinterest was also the resource and the task scheduler inside the flexibility around how we can",
    "start": "716460",
    "end": "722850"
  },
  {
    "text": "like place tasks co-locate has given some of our services and just a multi-tenancy aspect this comes from the",
    "start": "722850",
    "end": "728670"
  },
  {
    "text": "infrastructure governance piece which I spoke about because we know for a fact today many of our service is not not",
    "start": "728670",
    "end": "733710"
  },
  {
    "text": "effectively utilizing any of their instances so we really want to push that limit in terms of protectively utilizing",
    "start": "733710",
    "end": "739380"
  },
  {
    "text": "those resources the other aspects around the criteria are just as regular scalability and the performance of that",
    "start": "739380",
    "end": "744510"
  },
  {
    "text": "orchestration system staple service support which is extremely important for us given that a large portion of our",
    "start": "744510",
    "end": "750180"
  },
  {
    "text": "infrastructure is all about data processing the ecosystem in the community and finally the cluster operations and the support our choices",
    "start": "750180",
    "end": "758820"
  },
  {
    "text": "were pretty we had like lot more than this we had to condense it down where we actually did like a detailed POC on all",
    "start": "758820",
    "end": "765750"
  },
  {
    "text": "of this so obviously kubernetes was there we also looked at mesas and Aurora mesas and Marathon and even like thought",
    "start": "765750",
    "end": "773670"
  },
  {
    "text": "about a custom scheduler if you were to build up again mesas is a pretty battle-tested system and we also have",
    "start": "773670",
    "end": "779310"
  },
  {
    "text": "some experience operating mesas within our company for our real-time streaming platform and finally even EDA AWS as ECS",
    "start": "779310",
    "end": "787470"
  },
  {
    "text": "offering we did look at that one was there just to kind of get a sense of what is the what is the difference in terms of a",
    "start": "787470",
    "end": "793859"
  },
  {
    "text": "hosted solution versus like a managed solution and what would it mean for the teams operating I'm not gonna get into",
    "start": "793859",
    "end": "802019"
  },
  {
    "text": "the depths of POC leader we'll cover more details on that but the TLDR is we do find some commonalities around many",
    "start": "802019",
    "end": "808019"
  },
  {
    "text": "of these systems and we do detailed pocs on each of that especially on the networking and IM say again leader we'll",
    "start": "808019",
    "end": "814139"
  },
  {
    "text": "cover that at the later part of the presentation and finally the outcome was",
    "start": "814139",
    "end": "819869"
  },
  {
    "text": "like it was a conscious choice we did see some shortcomings as part of making this choice but it was a conscious",
    "start": "819869",
    "end": "825689"
  },
  {
    "text": "choice that we could actually work through many of the shortcomings for example data processing like I said is a",
    "start": "825689",
    "end": "830879"
  },
  {
    "text": "big thing for us so big data support in terms of running sparked our operating about bad jobs and those kind of",
    "start": "830879",
    "end": "836999"
  },
  {
    "text": "requirements we had to like really think through as to where the community will be by the time we could productionize",
    "start": "836999",
    "end": "842249"
  },
  {
    "text": "Kuban at ease and what our investments are so we are announcing that Pinterest is kind of adopting kubernetes for its",
    "start": "842249",
    "end": "848039"
  },
  {
    "text": "continued orchestration as well as like our commitment to work with the the Big Data SIG's and the aw SIG's to actually",
    "start": "848039",
    "end": "854129"
  },
  {
    "text": "further the cause of enabling data processing on Kuban at ease with that",
    "start": "854129",
    "end": "859470"
  },
  {
    "text": "I'll hand off to leader to actually talk more about the implementation",
    "start": "859470",
    "end": "864470"
  },
  {
    "start": "872000",
    "end": "903000"
  },
  {
    "text": "hello okay that's cool that's great so thank you Michael and now though",
    "start": "874330",
    "end": "880120"
  },
  {
    "text": "everyone so I'm Lida I'm a software engineer at the cloud management platform a teen choice so I think",
    "start": "880120",
    "end": "887140"
  },
  {
    "text": "Michael has give you a high-level view what our goal what we are doing and I will bring you drill down to the",
    "start": "887140",
    "end": "893410"
  },
  {
    "text": "technical detail with what we have done for our container platform and what we are currently doing for our container",
    "start": "893410",
    "end": "899430"
  },
  {
    "text": "actuation effort with kubernetes so this",
    "start": "899430",
    "end": "906340"
  },
  {
    "text": "slide gives you a view that before we are doing any conversation we are running our stately service on the ec2",
    "start": "906340",
    "end": "913150"
  },
  {
    "text": "instance so we have layered a Mis build on it where we have puppy dimension our",
    "start": "913150",
    "end": "918190"
  },
  {
    "text": "machine configuration and we have thyratron which is our in-house deployment system which manages the",
    "start": "918190",
    "end": "923590"
  },
  {
    "text": "service piece deployment beyond that you have various process management and",
    "start": "923590",
    "end": "929440"
  },
  {
    "text": "running the service so these things had several pain points for us so the",
    "start": "929440",
    "end": "934450"
  },
  {
    "text": "engineers has to be involved in to the ami building they have to learn how to",
    "start": "934450",
    "end": "939670"
  },
  {
    "text": "write puppet and the more difficult how to test a puppy to change and the popular one has some unpredicted",
    "start": "939670",
    "end": "947220"
  },
  {
    "text": "unpredictability which bring us a reliability issue and also engineers has",
    "start": "947220",
    "end": "952840"
  },
  {
    "text": "to learn how to write the different configuration for different the process menu to like monitor upstart and supervisor so this is the end result",
    "start": "952840",
    "end": "962200"
  },
  {
    "text": "after we finish our darker project we are running we still have a dedicated VM",
    "start": "962200",
    "end": "967390"
  },
  {
    "text": "for service but all the pieces are running in docker container so in this model we have a single ami all the",
    "start": "967390",
    "end": "974950"
  },
  {
    "text": "service that using single ami we can't rid of the specific service ami and we",
    "start": "974950",
    "end": "980260"
  },
  {
    "text": "don't have engineer don't have to learn how to write puppet and we have only one process manual which is the doctrine",
    "start": "980260",
    "end": "985990"
  },
  {
    "text": "engine - in the process manager and these things give us an immutable infrastructure and also provide our",
    "start": "985990",
    "end": "992950"
  },
  {
    "text": "infrastructure give a deterministic behavior in our deployment and operation which improve our service reliability a",
    "start": "992950",
    "end": "999370"
  },
  {
    "text": "lot so then I will talk a detail about under the hood what we are doing for",
    "start": "999370",
    "end": "1006180"
  },
  {
    "start": "1001000",
    "end": "1087000"
  },
  {
    "text": "this docker plan for so first we introduce a Pinterest service specific description language",
    "start": "1006180",
    "end": "1012240"
  },
  {
    "text": "which you can see it's on the on and after side in the slide so there are",
    "start": "1012240",
    "end": "1018330"
  },
  {
    "text": "several motivations behind why we give this service description language so first we want to the engineers only care",
    "start": "1018330",
    "end": "1025110"
  },
  {
    "text": "the configuration they care about so then the underlying system can expand",
    "start": "1025110",
    "end": "1030240"
  },
  {
    "text": "this configuration to handle things like what's the required mounted volume our",
    "start": "1030240",
    "end": "1035430"
  },
  {
    "text": "environment variable required for the infrastructure so engineers know don't have to set them and understand how to",
    "start": "1035430",
    "end": "1042209"
  },
  {
    "text": "set that the other thing we want to have here is that we want to provide an",
    "start": "1042209",
    "end": "1047579"
  },
  {
    "text": "abstraction layer to the underlying technology we are using no matter we choose the missiles or choose the",
    "start": "1047579",
    "end": "1053640"
  },
  {
    "text": "communities later on under engineer don't have to rewrite any of their service configuration language and also",
    "start": "1053640",
    "end": "1060990"
  },
  {
    "text": "on the depth developers workflow we did some work on the optimize some image",
    "start": "1060990",
    "end": "1066300"
  },
  {
    "text": "building on our largest share image to reduce the build time and the image size and the last we are running docker",
    "start": "1066300",
    "end": "1073740"
  },
  {
    "text": "registry as we use the easier as our main registry but meanwhile we have a replication yourself host the registry",
    "start": "1073740",
    "end": "1079410"
  },
  {
    "text": "combine them together which give us the high availability in the production environment considering our scale so",
    "start": "1079410",
    "end": "1087300"
  },
  {
    "start": "1087000",
    "end": "1175000"
  },
  {
    "text": "this is what it looks like under the hood in the application runtime so there",
    "start": "1087300",
    "end": "1093600"
  },
  {
    "text": "are a bunch of the sidecars around the application to provide all kind of service so all of them are",
    "start": "1093600",
    "end": "1099870"
  },
  {
    "text": "running in containers so we provide a tool which called terrific which basically manages the dependency among",
    "start": "1099870",
    "end": "1106740"
  },
  {
    "text": "these containers and also in your application it might be composed with multiple containers so terrific not only",
    "start": "1106740",
    "end": "1114240"
  },
  {
    "text": "manages the dependency between the sidecar and the application also manages the dependency inside the application",
    "start": "1114240",
    "end": "1120150"
  },
  {
    "text": "and even between the different aside cars and we are running around the NATO network model in the host and network",
    "start": "1120150",
    "end": "1126510"
  },
  {
    "text": "model which give us the best performance and our darker engine we use the library",
    "start": "1126510",
    "end": "1131910"
  },
  {
    "text": "stall so to ensure that the docker engine restart won't call the all the container being killed and restarted and",
    "start": "1131910",
    "end": "1138690"
  },
  {
    "text": "we're running out of this to overlay to file system we also build the garbage collection in our local you need to keep",
    "start": "1138690",
    "end": "1145100"
  },
  {
    "text": "the a configurable number of the image for every kind of service on the local so so that we can roll back and roll",
    "start": "1145100",
    "end": "1153560"
  },
  {
    "text": "forward fairly fast and last thing we build some parallel prefetching this is many because our",
    "start": "1153560",
    "end": "1159380"
  },
  {
    "text": "deployment system has a new tow exclusive lock on the host side and you given time we only allow one development",
    "start": "1159380",
    "end": "1165860"
  },
  {
    "text": "to happen but for this particular darker environment we want to parallel pull all the image so it can make our deployment",
    "start": "1165860",
    "end": "1173540"
  },
  {
    "text": "be faster so this is after we have built this platform we start the migration",
    "start": "1173540",
    "end": "1181060"
  },
  {
    "start": "1175000",
    "end": "1202000"
  },
  {
    "text": "sometime in the June so the up to today we have 75% of the state of the service",
    "start": "1181060",
    "end": "1188240"
  },
  {
    "text": "already in this docker container platform and so we spend a lot of time",
    "start": "1188240",
    "end": "1193490"
  },
  {
    "text": "for the migration and in the last few months our team is basically working like this",
    "start": "1193490",
    "end": "1200290"
  },
  {
    "text": "so there are several learnings I want to share with you about this migration",
    "start": "1201460",
    "end": "1207170"
  },
  {
    "start": "1202000",
    "end": "1267000"
  },
  {
    "text": "process how to make sure the service there's no outage e during this migration we have hundreds of service",
    "start": "1207170",
    "end": "1213550"
  },
  {
    "text": "there so I think the first thing is that we should invest in your tools in this",
    "start": "1213550",
    "end": "1219290"
  },
  {
    "text": "migration you need to have a deployment tools that be able to run your container and the nun container at the same time",
    "start": "1219290",
    "end": "1227000"
  },
  {
    "text": "and you can adjust the ratio and you need the tools to be able to compare the metrics coming from this to work load",
    "start": "1227000",
    "end": "1233630"
  },
  {
    "text": "and most important this tool must be very easy to use for your engineers that",
    "start": "1233630",
    "end": "1239030"
  },
  {
    "text": "are not in the plan form team they should be able to use these tools when they start to migrate your service and",
    "start": "1239030",
    "end": "1244250"
  },
  {
    "text": "also you should automated all the deployment and migration and runtime configuration validation when you are",
    "start": "1244250",
    "end": "1249740"
  },
  {
    "text": "doing this kind of peak migration make sure you have all the I am role security group all the surfaces coverage settings",
    "start": "1249740",
    "end": "1256040"
  },
  {
    "text": "all correct and also another learning is that container is a very fast changing",
    "start": "1256040",
    "end": "1263360"
  },
  {
    "text": "area so you need understanding how your company works on your team dynamic works so that you can build the team that can",
    "start": "1263360",
    "end": "1270890"
  },
  {
    "text": "doing this work most effectively at Pinterest we have an invented i--sorry motor so basically the eyes",
    "start": "1270890",
    "end": "1277880"
  },
  {
    "text": "already sit together and work together with our development team this helps a lot in this project so we can whenever",
    "start": "1277880",
    "end": "1284750"
  },
  {
    "text": "we hit a bug in the docker engine which I have to upgrade the OS kernel and have to reboot the ami we get a very fast",
    "start": "1284750",
    "end": "1291860"
  },
  {
    "text": "turnaround time on that and the last thing I want to call out in that you",
    "start": "1291860",
    "end": "1297350"
  },
  {
    "text": "want to try to migrate a complex complex service earlier so we decided to migrate",
    "start": "1297350",
    "end": "1302720"
  },
  {
    "text": "our most important service which our API fleet which is one of our largest fleet",
    "start": "1302720",
    "end": "1307820"
  },
  {
    "text": "hosts are our mobile client and web client at a very early stage it take a",
    "start": "1307820",
    "end": "1314029"
  },
  {
    "text": "while but it'll help you to cover every corner of the planet for make sure it's really production ready and meanwhile it",
    "start": "1314029",
    "end": "1321799"
  },
  {
    "text": "gives the confidence for the other engineers to move their service into this new platform because we have",
    "start": "1321799",
    "end": "1328700"
  },
  {
    "text": "already moved this everybody known this huge fleet and they will it's very easy",
    "start": "1328700",
    "end": "1335179"
  },
  {
    "text": "to persuade them to move to the new platform so next I will talk about our",
    "start": "1335179",
    "end": "1342500"
  },
  {
    "start": "1338000",
    "end": "1351000"
  },
  {
    "text": "current container actuation effort our oxidation evaluation and what we have",
    "start": "1342500",
    "end": "1347929"
  },
  {
    "text": "built for the kubernetes right now so first I will talk about the evaluation",
    "start": "1347929",
    "end": "1353049"
  },
  {
    "start": "1351000",
    "end": "1361000"
  },
  {
    "text": "so we have done it's a very hard work to do the evaluation it's a very",
    "start": "1353049",
    "end": "1358820"
  },
  {
    "text": "time-consuming and we builded a POC which POC I means we have a demo service",
    "start": "1358820",
    "end": "1364580"
  },
  {
    "start": "1361000",
    "end": "1473000"
  },
  {
    "text": "which are our integration with our environment for both missiles plus our aura and for the kubernetes so for the",
    "start": "1364580",
    "end": "1372289"
  },
  {
    "text": "missiles we evaluate the different container Iser different schedulers and what's our executor strategy we try to",
    "start": "1372289",
    "end": "1379070"
  },
  {
    "text": "write our customized executor in this POC and the kubernetes is like there are",
    "start": "1379070",
    "end": "1386510"
  },
  {
    "text": "a lot of there are long list a lot of out of box features we actually try to do the POC antacid I think that more",
    "start": "1386510",
    "end": "1394880"
  },
  {
    "text": "importantly I have a common ground of the things I think are very important when you try to build up a container",
    "start": "1394880",
    "end": "1402289"
  },
  {
    "text": "extrusion platform there's a networking your security how you are doing the service discovery",
    "start": "1402289",
    "end": "1407330"
  },
  {
    "text": "and how you're doing the law the matrix security management I mean at Pinterest",
    "start": "1407330",
    "end": "1413330"
  },
  {
    "text": "since we have been several several years and we have a larger fleet we're all ready for some of them we already have",
    "start": "1413330",
    "end": "1419269"
  },
  {
    "text": "the solution and some solution are easy to migrate to the container world like surf discovery we're using zookeeper as",
    "start": "1419269",
    "end": "1426649"
  },
  {
    "text": "our service discovery platform I know as you give the container a routable IP address probably it's a",
    "start": "1426649",
    "end": "1432799"
  },
  {
    "text": "minimum code change you can move to that there but there are other things that require more work this the things we",
    "start": "1432799",
    "end": "1439999"
  },
  {
    "text": "have been build they have been battle",
    "start": "1439999",
    "end": "1445399"
  },
  {
    "text": "tested and they have been proved to be able to support our current scale even",
    "start": "1445399",
    "end": "1451039"
  },
  {
    "text": "there might some glitch in them we still want to keep keep the moving parts as",
    "start": "1451039",
    "end": "1456820"
  },
  {
    "text": "small as possible so today I will focus on talking about two things and",
    "start": "1456820",
    "end": "1462409"
  },
  {
    "text": "networking and that I am what we have done for kubernetes cluster and I think",
    "start": "1462409",
    "end": "1468139"
  },
  {
    "text": "this is the most relevant and useful to share so networking naturally is the",
    "start": "1468139",
    "end": "1476419"
  },
  {
    "start": "1473000",
    "end": "1547000"
  },
  {
    "text": "most hard part and we spend a lot of time on it and even today I wouldn't say",
    "start": "1476419",
    "end": "1483169"
  },
  {
    "text": "we have a fully satisfied option so today especially you're running on the",
    "start": "1483169",
    "end": "1488720"
  },
  {
    "text": "AWS I think there is no standard solution we should use today and first",
    "start": "1488720",
    "end": "1495470"
  },
  {
    "text": "we build a kind of our networking platform to be more flexible so we're",
    "start": "1495470",
    "end": "1500539"
  },
  {
    "text": "using the AWS Ani and but also we support different kind of the cni plugins that we targeted so essentially",
    "start": "1500539",
    "end": "1509649"
  },
  {
    "text": "we use the cni for our long-running service which the service the hosting you have a part you have to have an",
    "start": "1509649",
    "end": "1515809"
  },
  {
    "text": "incoming traffic when using the ECS there's a open a the best open source",
    "start": "1515809",
    "end": "1521149"
  },
  {
    "text": "that ECS eni planning which give a dedicated yennai to a running pod so",
    "start": "1521149",
    "end": "1526580"
  },
  {
    "text": "we're using that for longer a new service the major motivation is that",
    "start": "1526580",
    "end": "1531619"
  },
  {
    "text": "it's simple and basically everything it's more very leaning towards to what",
    "start": "1531619",
    "end": "1539240"
  },
  {
    "text": "the VM looks like and but this has a major limitation that",
    "start": "1539240",
    "end": "1545510"
  },
  {
    "text": "is the number of the year nights you can attach to a single ec2 instance is Limit",
    "start": "1545510",
    "end": "1552050"
  },
  {
    "start": "1547000",
    "end": "1602000"
  },
  {
    "text": "Data and at the current moment we're looking at our stately service most of",
    "start": "1552050",
    "end": "1557929"
  },
  {
    "text": "them are running on it cause our service will cost we think it can service for a while but meanwhile we're collaborating",
    "start": "1557929",
    "end": "1564050"
  },
  {
    "text": "with AWS looking at their latest release the CNI plugin we also track the progress from the Netflix and the lift",
    "start": "1564050",
    "end": "1571880"
  },
  {
    "text": "that they have some shared E&I strategy in the future we may change that but meanwhile our structure also support",
    "start": "1571880",
    "end": "1578510"
  },
  {
    "text": "different again I we today we are running our batch job and our basically",
    "start": "1578510",
    "end": "1584240"
  },
  {
    "text": "worker in the actually in the bridge mode which is very like the talker bridge because they don't need to serve",
    "start": "1584240",
    "end": "1590179"
  },
  {
    "text": "incoming traffic as long as you can go out that can work so we support the I am",
    "start": "1590179",
    "end": "1597170"
  },
  {
    "text": "low and a security group on the yen I so",
    "start": "1597170",
    "end": "1602470"
  },
  {
    "start": "1602000",
    "end": "1707000"
  },
  {
    "text": "this diagram gives you the detail about how we are going to the networking set",
    "start": "1602470",
    "end": "1608780"
  },
  {
    "text": "up one app has started so when the community's pod is started it's that the",
    "start": "1608780",
    "end": "1614870"
  },
  {
    "text": "coop the complete the basic tree to the pods container and start to call the CNI so we create a proxy CNI plugin which",
    "start": "1614870",
    "end": "1623090"
  },
  {
    "text": "basically invoked the next the daemon which we have a daemon running on the",
    "start": "1623090",
    "end": "1628340"
  },
  {
    "text": "host so this demon will actually cure the kubernetes get to the palace back with the user basically we specified the",
    "start": "1628340",
    "end": "1636190"
  },
  {
    "text": "network model in the palace back so whenever this demon gets the pulse back it start doing the NI management so so",
    "start": "1636190",
    "end": "1643760"
  },
  {
    "text": "even we are using the EECS unite but we don't have the ECS control plan so we have to build our own control plan",
    "start": "1643760",
    "end": "1649520"
  },
  {
    "text": "basically to the yen I'm Angie you know allocation so this is all in this demon",
    "start": "1649520",
    "end": "1654650"
  },
  {
    "text": "so this demon will basically look at the current ini status and the host the",
    "start": "1654650",
    "end": "1659750"
  },
  {
    "text": "network model of the part of the currently an eye on the house if it's ask for that que te ni I look at the",
    "start": "1659750",
    "end": "1665450"
  },
  {
    "text": "year now if necessary and as I know year night so we'll return which CNI plugin",
    "start": "1665450",
    "end": "1670610"
  },
  {
    "text": "that you should invoke and what's the input parameter the proxy and I actually invoked the CNI",
    "start": "1670610",
    "end": "1676150"
  },
  {
    "text": "meanwhile this demon always keep reconciled the host estate and updated",
    "start": "1676150",
    "end": "1681200"
  },
  {
    "text": "the kubernetes status so we implemented some new customer customer resource record for the electrical interface and",
    "start": "1681200",
    "end": "1688160"
  },
  {
    "text": "the communities and also this demon keep updating the nodal label so that the new",
    "start": "1688160",
    "end": "1694550"
  },
  {
    "text": "part will not be scheduled to this node when when all the Eni has been used up",
    "start": "1694550",
    "end": "1700090"
  },
  {
    "text": "so the next thing is about I am set up so we run things very similar to many of",
    "start": "1700090",
    "end": "1708290"
  },
  {
    "start": "1707000",
    "end": "1774000"
  },
  {
    "text": "the existing solution for the talker and all the other continued extrusion so basically we're using a things called a",
    "start": "1708290",
    "end": "1714500"
  },
  {
    "text": "drum which is developed by a Pinterest security team which do the Manta proxy Singh so the jump basically listens on",
    "start": "1714500",
    "end": "1721340"
  },
  {
    "text": "the host and network interface and whenever so whenever a party that we",
    "start": "1721340",
    "end": "1727640"
  },
  {
    "text": "actually configure the IP table rule to redirect to the meta proxy car to the local interface and the drum actually",
    "start": "1727640",
    "end": "1734780"
  },
  {
    "text": "gets the request is a check of the IP address and also it's talked to the local complete and point to get all the",
    "start": "1734780",
    "end": "1741650"
  },
  {
    "text": "pod status and configurations a little bit different here that we also the drum",
    "start": "1741650",
    "end": "1747530"
  },
  {
    "text": "will call out things we call the roll assumed service this main the main",
    "start": "1747530",
    "end": "1752540"
  },
  {
    "text": "reason we are doing that is for security reason we don't want to give the base rail all the assumed role permission in",
    "start": "1752540",
    "end": "1758510"
  },
  {
    "text": "the UC to set up so by this way so",
    "start": "1758510",
    "end": "1763550"
  },
  {
    "text": "whenever a person the met approximate cuesta will redirect to the local drum and gets the right I am credential this",
    "start": "1763550",
    "end": "1770030"
  },
  {
    "text": "work for both the ini and the bridge mode so this is all the technical detail",
    "start": "1770030",
    "end": "1775970"
  },
  {
    "start": "1774000",
    "end": "1909000"
  },
  {
    "text": "now I will hand over to Michael talk about our future roadmap thank you Thank",
    "start": "1775970",
    "end": "1783200"
  },
  {
    "text": "You Lydia so we do have more details on that so we will be at coupon for the",
    "start": "1783200",
    "end": "1789170"
  },
  {
    "text": "next two days our team is also here so we love to talk more about people who are working on similar problems especially on AWS",
    "start": "1789170",
    "end": "1796010"
  },
  {
    "text": "with that plug I just want to quickly go back to the larger scope we are working towards again this is not like a you",
    "start": "1796010",
    "end": "1802429"
  },
  {
    "text": "know three month or a six month project we do expect like a lot more to come out of this as we build out our orchestration",
    "start": "1802429",
    "end": "1808200"
  },
  {
    "text": "platform we also intend to kind of have abstraction in terms of facilitating job",
    "start": "1808200",
    "end": "1813660"
  },
  {
    "text": "deploys and orchestrating those deploys as well so this like like I said earlier",
    "start": "1813660",
    "end": "1819120"
  },
  {
    "text": "we do have multiple systems today to do that for bad jobs or long-running services so one of our priorities",
    "start": "1819120",
    "end": "1824700"
  },
  {
    "text": "essentially is going to be kind of consolidating that and have a single place of facilitating job deployments so",
    "start": "1824700",
    "end": "1831090"
  },
  {
    "text": "some of the things we are planning for 2018 is obviously production izing are cube entities cluster and adopting some",
    "start": "1831090",
    "end": "1836940"
  },
  {
    "text": "initial use cases we already have our team has been working really hard on getting Jenkins and those kind of workflows already running on it and we",
    "start": "1836940",
    "end": "1843150"
  },
  {
    "text": "also experimenting with running some non-critical long-running services we are already also experimenting on trying",
    "start": "1843150",
    "end": "1848610"
  },
  {
    "text": "SPARC to run on Cuban Ares I think that's going to be the biggest thing for us and we intend to see some progress on",
    "start": "1848610",
    "end": "1854550"
  },
  {
    "text": "there at the same time like I mentioned earlier our job definition abstraction",
    "start": "1854550",
    "end": "1859560"
  },
  {
    "text": "works pretty well we do want to normalize that across all of Pinterest and have a single job submission service which will facilitate deployments either",
    "start": "1859560",
    "end": "1866730"
  },
  {
    "text": "to Cuban ADIZ today to Hadoop yarn or something else in the future so that way",
    "start": "1866730",
    "end": "1871770"
  },
  {
    "text": "at least a spec still stays the same there's a translation which is happening and we intend to also do ownership checks quota management on all of that",
    "start": "1871770",
    "end": "1878370"
  },
  {
    "text": "stuff it at the job submission layer and finally just close out like the service",
    "start": "1878370",
    "end": "1885930"
  },
  {
    "text": "identity portion so like I said make sure that the identity of the service is validated and checked there is clear",
    "start": "1885930",
    "end": "1891300"
  },
  {
    "text": "ownership on it and we will also track the resource metering both on Cuban IDs and all our other systems so with that I",
    "start": "1891300",
    "end": "1898380"
  },
  {
    "text": "think we're out of times I'd like to close by saying thank you for being a wonderful audience we appreciate you",
    "start": "1898380",
    "end": "1904170"
  },
  {
    "text": "guys coming",
    "start": "1904170",
    "end": "1906470"
  }
]