[
  {
    "text": "thanks for making it all the way to the last day of cucon and uh hopefully sticking it out for uh the full day of",
    "start": "199",
    "end": "6040"
  },
  {
    "text": "content that we've got today um I really appreciate you coming here uh my name is Sam I'm a software engineer at Google",
    "start": "6040",
    "end": "13360"
  },
  {
    "text": "I'm also a container D maintainer and uh today we're going to be talking about what containerd 2.0 means for",
    "start": "13360",
    "end": "19680"
  },
  {
    "text": "you so uh with that said containerd 2.0 is now available um we released it last",
    "start": "19680",
    "end": "25760"
  },
  {
    "text": "week it was a long time coming but uh we're really happy it's finally out now",
    "start": "25760",
    "end": "31480"
  },
  {
    "text": "um and we're going to spend you know this whole session talking about it so uh I'm excited I hope you are too um",
    "start": "31480",
    "end": "38920"
  },
  {
    "text": "what we're going to do is we're going to talk a little bit through the changes that have happened in container d22 container D20 um also we're going to",
    "start": "38920",
    "end": "45840"
  },
  {
    "text": "touch on uh why it's a major version why we move from 1.x to 2.0 and what that",
    "start": "45840",
    "end": "52280"
  },
  {
    "text": "means in terms of some uh deprecations and removals you know effectively breaking changes that are there uh then",
    "start": "52280",
    "end": "59079"
  },
  {
    "text": "we'll talk about um how you can prepare to upgrade what you can do to find out if you're going to be affected by any of",
    "start": "59079",
    "end": "64439"
  },
  {
    "text": "the changes that have been made uh and how you can remediate anything where you can find help and and then sort of",
    "start": "64439",
    "end": "69600"
  },
  {
    "text": "directionally what's going on next um I'm going to try to have some time for Q&A at the end so I would ask you to",
    "start": "69600",
    "end": "75280"
  },
  {
    "text": "please hold your questions until then um also all these slides are going to be online um so don't feel like you need to",
    "start": "75280",
    "end": "81479"
  },
  {
    "text": "copy everything down or read every word while I'm talking um because it'll all be available for you to look at later as",
    "start": "81479",
    "end": "87360"
  },
  {
    "text": "well so uh with that said let's move on on to what's new um we do have a whole bunch of new stuff in container d2o",
    "start": "87360",
    "end": "94320"
  },
  {
    "text": "we've got new features we've got things that were previously experimental in containerd 1.7 that we've now stabilized",
    "start": "94320",
    "end": "101000"
  },
  {
    "text": "uh we've got some defaults that have changed a little bit um I'm not going to go through everything that's on this list but I want to touch on a couple",
    "start": "101000",
    "end": "106759"
  },
  {
    "text": "things and then we'll have some some deeper highlights um first thing the the transfer service and the sandbox service",
    "start": "106759",
    "end": "112560"
  },
  {
    "text": "these were experimental uh things that we actually launched in containerd 1.7 and we have uh now gone through and",
    "start": "112560",
    "end": "119360"
  },
  {
    "text": "stabilized them and they're ready for for people to start really using um we've got some improvements in performance in terms of things like",
    "start": "119360",
    "end": "125719"
  },
  {
    "text": "image extraction uh some changes and how you can configure otel um we've also got",
    "start": "125719",
    "end": "131800"
  },
  {
    "text": "some new defaults like uh NRI turned on by default CDI enabled by default uh and we have support for username spaces a",
    "start": "131800",
    "end": "138640"
  },
  {
    "text": "very improved set of username spaces compared to what we had before um so I have a couple things that",
    "start": "138640",
    "end": "144080"
  },
  {
    "text": "I want to do a sort of deeper highlight on um that I'm particularly excited about the first one is uh node Source",
    "start": "144080",
    "end": "150160"
  },
  {
    "text": "interface or NRI um NRI is a a mechanism for customizing the underlying container",
    "start": "150160",
    "end": "156400"
  },
  {
    "text": "configuration beyond the kinds of things that you can do uh in the podspec OR beyond the defaults that containerd is",
    "start": "156400",
    "end": "161879"
  },
  {
    "text": "going to give you um it's effectively middleware between the CRI layer which is the layer that the kuet uses to",
    "start": "161879",
    "end": "168040"
  },
  {
    "text": "control the container runtime and the oci layer which is the underlying implementation for Linux containers um",
    "start": "168040",
    "end": "175480"
  },
  {
    "text": "and it lets you do things like inject different devices inject uh Network changes um do oci hooks at that level",
    "start": "175480",
    "end": "184120"
  },
  {
    "text": "you can also do some really interesting things with resource resources resource modification or Resource Management um",
    "start": "184120",
    "end": "189840"
  },
  {
    "text": "including support for setting things like U limits which is not possible to do through the kubernetes API today um",
    "start": "189840",
    "end": "195360"
  },
  {
    "text": "also there's some really interesting things you can do with um Advanced CPU pinning um actually uh Alexander keski",
    "start": "195360",
    "end": "202360"
  },
  {
    "text": "from Intel had a talk yesterday uh that talked really some through some really interesting performance uh things that",
    "start": "202360",
    "end": "208319"
  },
  {
    "text": "they were able to do through an NRI plug um plugins can run as containers they can run as system services that means",
    "start": "208319",
    "end": "214640"
  },
  {
    "text": "that you can actually deploy them through kubernetes if you want or you can have them installed pre-installed and ready on your node as the node",
    "start": "214640",
    "end": "220519"
  },
  {
    "text": "starts up um we have a set of plugins that we have that we're maintaining uh",
    "start": "220519",
    "end": "225760"
  },
  {
    "text": "sort of examples from the container D maintainers and then there's also a repository of community maintained",
    "start": "225760",
    "end": "231640"
  },
  {
    "text": "plugins um both of those links are are up there but you know an N NRI is just an interface and anyone can write a",
    "start": "231640",
    "end": "237760"
  },
  {
    "text": "plugin for it that means that you can write your own plugin for it or you can um have proprietary plugins rather than",
    "start": "237760",
    "end": "242840"
  },
  {
    "text": "open source plugins it's a really neat extension mechanism for uh customizing some really deep details of how",
    "start": "242840",
    "end": "248480"
  },
  {
    "text": "containers run um and it helps you really fully unlock all of the things that oci can do um even if those aren't",
    "start": "248480",
    "end": "255159"
  },
  {
    "text": "fully exposed through all of the apis that kubernetes has today next thing I want to highlight",
    "start": "255159",
    "end": "261120"
  },
  {
    "text": "here um image verifier plugins this is a new thing that we've introduced in 2.0 um these are plugins that can set policy",
    "start": "261120",
    "end": "268560"
  },
  {
    "text": "for how images are pulled in container D and decide whether or not a given image is allowed to be pulled or should not be",
    "start": "268560",
    "end": "274720"
  },
  {
    "text": "pulled and the use cases for things like this are things like signature enforcement or maybe pinning to specific",
    "start": "274720",
    "end": "280199"
  },
  {
    "text": "uh trusted providers for images or allowing only specific uh Registries or repositories or you could do things like",
    "start": "280199",
    "end": "286560"
  },
  {
    "text": "deny uh images where You' found um found vulnerabilities or found problems with them before uh and it actually prevents",
    "start": "286560",
    "end": "293759"
  },
  {
    "text": "containery from even uh loading the images in the first place so then nothing that you don't want to run can",
    "start": "293759",
    "end": "299080"
  },
  {
    "text": "actually run uh We've integrated this with the transfer Service uh which is the newly stable um functionality that",
    "start": "299080",
    "end": "306000"
  },
  {
    "text": "we introduced in con d17 and now is stable in 2.0 um transfer service is a a",
    "start": "306000",
    "end": "311680"
  },
  {
    "text": "newer mechanism for pulling uh container images or pushing container images transferring them around um we don't",
    "start": "311680",
    "end": "318560"
  },
  {
    "text": "have image verifier support for the Legacy pole mechanism and that does mean that unfortunately you can't really",
    "start": "318560",
    "end": "323840"
  },
  {
    "text": "leverage it with kubernetes yet um because the CRI implementation in container D is still using the older",
    "start": "323840",
    "end": "329240"
  },
  {
    "text": "pole me M we're expecting to change that in 2.1 so um that'll come sort of relatively",
    "start": "329240",
    "end": "336440"
  },
  {
    "text": "quickly so I want to St talk about some of the changes in there that we don't really think are breaking changes",
    "start": "336440",
    "end": "342039"
  },
  {
    "text": "they're just things that have moved around a little bit um uh the top two here are um other interfaces for",
    "start": "342039",
    "end": "349479"
  },
  {
    "text": "interacting with container D container D has its own API surface that's a little bit different from kubernetes um and",
    "start": "349479",
    "end": "356160"
  },
  {
    "text": "we've done sort of two changes to that that are relevant if you're integrating with contain container D directly one is that we're versioning our own um grpc",
    "start": "356160",
    "end": "363199"
  },
  {
    "text": "API now separately from containerd itself um what that means is that the the protuff API has not moved to uh 2.0",
    "start": "363199",
    "end": "371639"
  },
  {
    "text": "that's still in um a 1.x and we actually moved it to 1.8 so from from this point",
    "start": "371639",
    "end": "377560"
  },
  {
    "text": "forward the demon version for container D and the API version are versioned a little bit separately the reason that we",
    "start": "377560",
    "end": "383160"
  },
  {
    "text": "did this is because we made no breaking API changes when we moved to container d2.2 so the API itself has remained St",
    "start": "383160",
    "end": "389759"
  },
  {
    "text": "and that remains on on 1.x the other thing is we move the um go client Library which is a library that we have",
    "start": "389759",
    "end": "396120"
  },
  {
    "text": "for doing um sort of neat higher level things leveraging a bunch of the container dgpc apis together uh out to a",
    "start": "396120",
    "end": "403240"
  },
  {
    "text": "separate go package it used to be in the root containerd container D namespace and we've moved it to its own um package",
    "start": "403240",
    "end": "409440"
  },
  {
    "text": "namespace we're expecting that most users of this go package are just going to have to update the import paths and",
    "start": "409440",
    "end": "415400"
  },
  {
    "text": "not really anything else um Phil Estes who is another container D Main container who's sitting up in the front",
    "start": "415400",
    "end": "420919"
  },
  {
    "text": "row um maintains another tool called manifest tool for manipulating multi-architecture container images and",
    "start": "420919",
    "end": "427120"
  },
  {
    "text": "he did his own migration just after we released container D20 and it was just changing the import paths he didn't have",
    "start": "427120",
    "end": "433280"
  },
  {
    "text": "to do anything else with it so we're expecting that to be relatively minor the other sort of key thing here is you",
    "start": "433280",
    "end": "439080"
  },
  {
    "text": "know the old client library and the old uh API versions continue to work with container e2.0 so there's no need to",
    "start": "439080",
    "end": "445639"
  },
  {
    "text": "upgrade until you're ready to actually take on new features or or interact with new things um we have deprecated but not yet",
    "start": "445639",
    "end": "453080"
  },
  {
    "text": "removed so this isn't a breaking change yet uh some of the configuration properties for CRI Registries in the",
    "start": "453080",
    "end": "459039"
  },
  {
    "text": "containerd config file um and we are going to be replacing all of them with things that you can use instead we have",
    "start": "459039",
    "end": "465400"
  },
  {
    "text": "Replacements today for mirrors and configs we don't yet have a replacement for ODS that's probably going to be",
    "start": "465400",
    "end": "471840"
  },
  {
    "text": "something like a credential manager plug-in that we'll do in uh container D21 and then the these will be targeted",
    "start": "471840",
    "end": "477319"
  },
  {
    "text": "for removal in 2.1 as well um we've also deprecated go plugin libraries um this",
    "start": "477319",
    "end": "483000"
  },
  {
    "text": "is a a mechanism that the go tool chain has for building dynamically linked doso files that can be loaded into the same",
    "start": "483000",
    "end": "490000"
  },
  {
    "text": "process sort of similar to how you would do that in C um we it has been a really challenging thing for people to use Ingo",
    "start": "490000",
    "end": "497360"
  },
  {
    "text": "uh and we're not actually really aware of anyone doing that with continuity today um so our plan right now is to",
    "start": "497360",
    "end": "503080"
  },
  {
    "text": "remove that in 2.1 if you do happen to be using any of these uh so plugins we'd",
    "start": "503080",
    "end": "508360"
  },
  {
    "text": "love for you to reach out to us and talk to us um make sure that we've got a replacement for you or we can understand",
    "start": "508360",
    "end": "513440"
  },
  {
    "text": "even how you've been able to make it work successfully um we've also got a change in one of our uh protuff types um",
    "start": "513440",
    "end": "519719"
  },
  {
    "text": "types. envelope replacing uh two other envelope types um but we haven't gone and removed any of those",
    "start": "519719",
    "end": "526680"
  },
  {
    "text": "yet so that was sort of the changes that we're expecting to not really be breaking and then there are changes that",
    "start": "526760",
    "end": "532760"
  },
  {
    "text": "uh are did justify a major version change from 1.x to 2.0 um so these are",
    "start": "532760",
    "end": "538760"
  },
  {
    "text": "things that were previously deprecated that we have removed in the 2.0 release or we've turned off by default in the",
    "start": "538760",
    "end": "543920"
  },
  {
    "text": "2.0 release um removals can be scary uh",
    "start": "543920",
    "end": "549640"
  },
  {
    "text": "I want to talk through what the removals are and sort of mechanisms that you can use to understand your impact before we",
    "start": "549640",
    "end": "555480"
  },
  {
    "text": "then talk about how you can uh go and remediate any of those changes so first thing this is this is a high Lev list of",
    "start": "555480",
    "end": "562279"
  },
  {
    "text": "the kinds of things that we have uh removed in 2.0 this is also available on the containerd website we have a nice",
    "start": "562279",
    "end": "568680"
  },
  {
    "text": "table that describes all of the all of the changes and their Replacements um",
    "start": "568680",
    "end": "573760"
  },
  {
    "text": "I'm going to go through a couple of these really briefly and then um we'll go deeper into some of them a little bit",
    "start": "573760",
    "end": "579600"
  },
  {
    "text": "later but uh Docker schema 1 image support and cri1 Alpha 2 API these are",
    "start": "579600",
    "end": "585200"
  },
  {
    "text": "sort of the two that might be a little bit more impacting to people and I'll I'll definitely be covering those um the",
    "start": "585200",
    "end": "591240"
  },
  {
    "text": "rest of them we're expecting to be relatively low impact or no impact uh and even for the first two we're",
    "start": "591240",
    "end": "596839"
  },
  {
    "text": "expecting most users of containerd won't really have to do anything at all um so the next thing on here uh the no file",
    "start": "596839",
    "end": "603680"
  },
  {
    "text": "number of open files you limit um we Chang our uh limit no file um in our",
    "start": "603680",
    "end": "611480"
  },
  {
    "text": "systemd unit that we vent as part of container d uh this is a a configuration that we don't really think everyone is",
    "start": "611480",
    "end": "618040"
  },
  {
    "text": "using um it's just the systemd unit file that we provide as part of our repo and a lot of distributions that package",
    "start": "618040",
    "end": "624360"
  },
  {
    "text": "containerd provide their own anyway so this may or may not be a change that is relevant and you'll have to look at your",
    "start": "624360",
    "end": "629839"
  },
  {
    "text": "distribution to figure out what's going on there um the reason that this is important is because you limits actually do get inherited by the containers the",
    "start": "629839",
    "end": "636440"
  },
  {
    "text": "containery runs so a default that we've changed for container D the demon does affect the defaults that are present",
    "start": "636440",
    "end": "642560"
  },
  {
    "text": "inside your containers um we've also started denying uh IOU ring CIS calls um",
    "start": "642560",
    "end": "648639"
  },
  {
    "text": "these have been involved in some kernel cves uh even though they're a performance improvement over previous",
    "start": "648639",
    "end": "654000"
  },
  {
    "text": "Behavior Uh They Don't Really introduce a lot of new functionality into Linux and so we're expecting most applications",
    "start": "654000",
    "end": "659600"
  },
  {
    "text": "that are using IOU ring CIS calls are just going to fall back to the older implementations of the CIS calls that are uh relevant for the functionality",
    "start": "659600",
    "end": "665519"
  },
  {
    "text": "they're trying to do these are basically input output operations generally um container D has a a concept called a",
    "start": "665519",
    "end": "671800"
  },
  {
    "text": "shim which is a component that sits between the container D demon and the uh",
    "start": "671800",
    "end": "677760"
  },
  {
    "text": "actual container processes that are running and we had three implementations of them in 1.x um we've removed the two",
    "start": "677760",
    "end": "685160"
  },
  {
    "text": "older implementations so IO containerd runtime V1 Linux which was the very first shim implementation that we had",
    "start": "685160",
    "end": "691560"
  },
  {
    "text": "and IO containery run cv1 have both been removed and replaced by IO containery run CV2 we've had run CV2 I think since",
    "start": "691560",
    "end": "699120"
  },
  {
    "text": "at least 15 maybe 14 um so it's been in use and default for a long time we're",
    "start": "699120",
    "end": "704760"
  },
  {
    "text": "just removing the older ones um we don't really expect there to be any functionality change for you as as",
    "start": "704760",
    "end": "710639"
  },
  {
    "text": "you're actually using anything um but it's something that you can be aware of uh and I'll talk a little bit about why",
    "start": "710639",
    "end": "716320"
  },
  {
    "text": "you want to look at this uh in a couple slides um we've also got uh a restart. log path",
    "start": "716320",
    "end": "723120"
  },
  {
    "text": "label that was replaced by restart. log urri effectively the same thing just a different name for it um we've removed",
    "start": "723120",
    "end": "729320"
  },
  {
    "text": "an older very old snapshot for doing um container image layers called aofs that",
    "start": "729320",
    "end": "735600"
  },
  {
    "text": "depended on a non- Upstream kernel file system and our recommendation at this",
    "start": "735600",
    "end": "740839"
  },
  {
    "text": "point is the the default is to use overlay instead which most uh should be available in most Linux distributions",
    "start": "740839",
    "end": "746839"
  },
  {
    "text": "that are in any way modern um and then we've also changed a little bit in our release tooling we used to provide some",
    "start": "746839",
    "end": "752720"
  },
  {
    "text": "CRI and cni components in the release bundle uh that container the containerd project vended and if you were",
    "start": "752720",
    "end": "758600"
  },
  {
    "text": "downloading those directly you'll now need to go to those respective projects to find those components instead of just",
    "start": "758600",
    "end": "763880"
  },
  {
    "text": "getting them from container D so that was a bunch of stuff how do",
    "start": "763880",
    "end": "769560"
  },
  {
    "text": "you know if you're going to be impacted um in containery 16 and 17 we introduced",
    "start": "769560",
    "end": "775120"
  },
  {
    "text": "a new um deprecation service that goes and finds out whether or not you're using any of the things that are going",
    "start": "775120",
    "end": "781079"
  },
  {
    "text": "to be removed that were removed in 2.0 and tells you about them these are usage based warnings so they will only show up",
    "start": "781079",
    "end": "787600"
  },
  {
    "text": "if you're actually using any of the things that are there you should not see any uh false positives it's only if",
    "start": "787600",
    "end": "793160"
  },
  {
    "text": "you're actually using one of the things that's impacted that you'll find any warning uh which means that if you do",
    "start": "793160",
    "end": "798199"
  },
  {
    "text": "find if you do see the warning you should expect to take some action there's some sort of migration that you'll need to do um you can retrieve",
    "start": "798199",
    "end": "804279"
  },
  {
    "text": "these through the CTR deprecations list command we actually have that as a machine readable Jon on output as well",
    "start": "804279",
    "end": "810600"
  },
  {
    "text": "uh if you want to integrate with that into some tooling without having to have a full container the API client um we",
    "start": "810600",
    "end": "816720"
  },
  {
    "text": "record information about when the thing was used and as much information as we can about what was used there um these",
    "start": "816720",
    "end": "823480"
  },
  {
    "text": "were introduced in patch releases of container D6 and 17 so they're not available in the oldest patch releases",
    "start": "823480",
    "end": "830079"
  },
  {
    "text": "of those a slight slightly newer ones and we also had a period of time where we were um making sure that those were",
    "start": "830079",
    "end": "835480"
  },
  {
    "text": "refined properly so right now our recommendation is to use 1721 or 1636 as",
    "start": "835480",
    "end": "841519"
  },
  {
    "text": "the ones that have the accurate information about all of the deprecations recorded in when they were um used uh there is a note here that if",
    "start": "841519",
    "end": "849279"
  },
  {
    "text": "you're looking at some of the ones that we have around config those will always show the time that containery started",
    "start": "849279",
    "end": "854639"
  },
  {
    "text": "because the config never changes while container D is alive um but otherwise",
    "start": "854639",
    "end": "859759"
  },
  {
    "text": "you can look at at what the what the time was and try to use that to correlate to uh an event that happened",
    "start": "859759",
    "end": "865000"
  },
  {
    "text": "in your cluster and figure out whether you're impacted um this is kind of what that would look like like um just a",
    "start": "865000",
    "end": "870480"
  },
  {
    "text": "little bit of a a screenshot showing what is a detailed message that you would get for a particular deprecation",
    "start": "870480",
    "end": "876160"
  },
  {
    "text": "when it was when it was occurred and then you'll also see there's a specific um machine readable consistent",
    "start": "876160",
    "end": "881399"
  },
  {
    "text": "identifier for each of the deprecations if you want to key that somewhere",
    "start": "881399",
    "end": "886480"
  },
  {
    "text": "um so before we move into specific remediation stuff for some of the details here I want to talk General",
    "start": "886480",
    "end": "892880"
  },
  {
    "text": "upgrade patterns um because we didn't introduce the deprecation service into some into until",
    "start": "892880",
    "end": "899199"
  },
  {
    "text": "some patch releases of uh 16 and 17 the first thing that you'd want to do is make sure you're using the latest or at",
    "start": "899199",
    "end": "904720"
  },
  {
    "text": "least 1721 or 1636 releases of container D before you're really preparing to",
    "start": "904720",
    "end": "910399"
  },
  {
    "text": "upgrade and then go ahead and run your workloads make sure that your cluster is running normally these are you know 16",
    "start": "910399",
    "end": "917440"
  },
  {
    "text": "1636 1721 or the later Rees releases of them are fully supported uh versions of",
    "start": "917440",
    "end": "922480"
  },
  {
    "text": "container D and so anything that you're running today should still work with those so you should be fine to update to",
    "start": "922480",
    "end": "927759"
  },
  {
    "text": "those without worrying about anything and then as your workloads will run container D will start to record what's",
    "start": "927759",
    "end": "933319"
  },
  {
    "text": "going on with um with these features if you're going to be hit by any of those deprecations then you'll look at at the",
    "start": "933319",
    "end": "939160"
  },
  {
    "text": "warnings um and if you have anything that shows up you'll fig you'll need to go ahead and remediate them um some of",
    "start": "939160",
    "end": "945079"
  },
  {
    "text": "the config stuff that's in there uh these will be autom migrated so you don't need to do that ahead of when",
    "start": "945079",
    "end": "950360"
  },
  {
    "text": "you're uh updating because then you might get into a like if I have the new config but the old version of containerd",
    "start": "950360",
    "end": "955800"
  },
  {
    "text": "might be a challenge so um you can still use the old config with a newer version of containerd and migrate that a little",
    "start": "955800",
    "end": "961120"
  },
  {
    "text": "bit later uh and then once you've uh remediated your warnings you want to test and make sure that they don't recur",
    "start": "961120",
    "end": "967480"
  },
  {
    "text": "so continue to run your workloads um one note here is that container D clears the",
    "start": "967480",
    "end": "972759"
  },
  {
    "text": "information about um deprecations when we restart container D so that means you might need to restart containerd to",
    "start": "972759",
    "end": "978720"
  },
  {
    "text": "start to start it back at zero uh or if you're on a cloud provider you can go ahead and create new nodes instead of",
    "start": "978720",
    "end": "983880"
  },
  {
    "text": "using your existing nodes um so once you've run your workloads for a while you've tested made sure that nothing's",
    "start": "983880",
    "end": "989639"
  },
  {
    "text": "going to recur uh you can try upgrading to container D20 and I think like any sort of best practice here would be to",
    "start": "989639",
    "end": "995959"
  },
  {
    "text": "use test clusters or test nodes some some way of doing uh making sure that you're you're testing it before you're",
    "start": "995959",
    "end": "1001480"
  },
  {
    "text": "rolling it out to your full production and then once you're ready you go ahead and upgrade um upgrade your clusters and",
    "start": "1001480",
    "end": "1007160"
  },
  {
    "text": "upgrade your production and I want to highlight here container d2o just came out last week there is no immediate rush",
    "start": "1007160",
    "end": "1013759"
  },
  {
    "text": "to go and upgrade like of of course you can if you were excited about the new features and we're we're happy for you",
    "start": "1013759",
    "end": "1019079"
  },
  {
    "text": "to do that we're happy to support that but container D16 and 17 are going to be around here for a while container D16 is",
    "start": "1019079",
    "end": "1025520"
  },
  {
    "text": "a long-term supported release of container d uh and we'll be continuing to uh apply bug fixes apply security",
    "start": "1025520",
    "end": "1032678"
  },
  {
    "text": "patches uh apply performance fixes um and continue to make sure that's it's working with newer versions of",
    "start": "1032679",
    "end": "1037839"
  },
  {
    "text": "kubernetes all the way up until we've got a replacement uh long-term supported version of container D6 and we haven't",
    "start": "1037839",
    "end": "1043959"
  },
  {
    "text": "figured out what that's going to be yet so for the foreseeable future 16 is going to stay around it's just not going to get get the new features that are",
    "start": "1043959",
    "end": "1050559"
  },
  {
    "text": "present in in 2.0 or future releases of container D 17 is also an active uh",
    "start": "1050559",
    "end": "1056160"
  },
  {
    "text": "supported release of container D at least for the next six months um which means that we're going to continue to do",
    "start": "1056160",
    "end": "1062160"
  },
  {
    "text": "all all the same kinds of things that we're doing for six for 17 for 6 months and then after 6 months at this point",
    "start": "1062160",
    "end": "1067960"
  },
  {
    "text": "we're expecting to transition to what we call Extended support where we'll be primarily be doing security fixes and",
    "start": "1067960",
    "end": "1073480"
  },
  {
    "text": "not really bug performance or uh making it work with newer versions of kubernetes um",
    "start": "1073480",
    "end": "1079360"
  },
  {
    "text": "and the extended support period period for 17 is actually going to continue as long as 16 is supported with LTS this is",
    "start": "1079360",
    "end": "1087280"
  },
  {
    "text": "something that we're doing to sort of ease the transition around the 2.0 boundary um especially for clients that",
    "start": "1087280",
    "end": "1092559"
  },
  {
    "text": "are consuming via um go modules and have some fun rules with that um but that",
    "start": "1092559",
    "end": "1097960"
  },
  {
    "text": "means that there's no immediate rush to go and update to 2.0 if you're not ready for it you can take a measured approach",
    "start": "1097960",
    "end": "1103360"
  },
  {
    "text": "to finding out whether you're going to have impact and making sure that your impact is really remediated before you",
    "start": "1103360",
    "end": "1108440"
  },
  {
    "text": "take the step of doing an upgrade um and I want to talk here a little bit that providers can help with",
    "start": "1108440",
    "end": "1114880"
  },
  {
    "text": "this too um I work on gke and we're we're thinking about how do we help our",
    "start": "1114880",
    "end": "1120440"
  },
  {
    "text": "customers prepare for container",
    "start": "1120440",
    "end": "1123879"
  },
  {
    "text": "d2.com container D 2.0 and gk1 133 and we're doing a bunch of work",
    "start": "1131000",
    "end": "1137200"
  },
  {
    "text": "right now to make sure that this is going to be successful things like we'll be taking those deprecation warnings that container D exposes and then",
    "start": "1137200",
    "end": "1144159"
  },
  {
    "text": "propagating them up into node conditions which means that you can view them as part of cube cuddle uh and you don't actually have to SS into every node to",
    "start": "1144159",
    "end": "1150760"
  },
  {
    "text": "see what the impact is going to be we're also then going to be ingesting these and surfacing them into the the Google",
    "start": "1150760",
    "end": "1156039"
  },
  {
    "text": "Cloud console along with recommendations on how specifically you can remediate them um and then gk's automatic upgrades",
    "start": "1156039",
    "end": "1163520"
  },
  {
    "text": "are going to take all of this into account so if you have active things that might be causing you impact we're",
    "start": "1163520",
    "end": "1168880"
  },
  {
    "text": "not going to go and upgrade your cluster out from under you and put you on a version that's going to break you um I'm",
    "start": "1168880",
    "end": "1174039"
  },
  {
    "text": "I'm not sure other Prov what other providers plans are I'm sure that they're going to likely do something pretty similar here there's nothing that",
    "start": "1174039",
    "end": "1179640"
  },
  {
    "text": "that GK is doing that anyone else can't do um but I just wanted to speak a little bit about this because this is",
    "start": "1179640",
    "end": "1184760"
  },
  {
    "text": "what I work on as well um so with all of that said I want to I want to do some highlights on um some of the things that",
    "start": "1184760",
    "end": "1192799"
  },
  {
    "text": "you can do to actually remediate and find out how to actually fix stuff so Docker schema one IM I talked about this",
    "start": "1192799",
    "end": "1200320"
  },
  {
    "text": "uh earlier as one of the things that we think might be a little bit more impacting this is the first the first",
    "start": "1200320",
    "end": "1206799"
  },
  {
    "text": "type of Docker image that was uh that could have been built by Docker way back when Docker first came around um like",
    "start": "1206799",
    "end": "1214360"
  },
  {
    "text": "over a decade ago and was replaced by Docker schema 2 10 years ago in 2014 and",
    "start": "1214360",
    "end": "1221520"
  },
  {
    "text": "then later sort of superseded by the oci image format in 2017 which means that if you've got images that are built anytime",
    "start": "1221520",
    "end": "1228760"
  },
  {
    "text": "in the past 10 years they should probably be already schema 2 or oci images and not schema 1 um if you have",
    "start": "1228760",
    "end": "1236400"
  },
  {
    "text": "images that are schema 1 they're they're either built by very old tooling or they are very old images and um I would",
    "start": "1236400",
    "end": "1244000"
  },
  {
    "text": "recommend not running software that's been around you know older than 10 years and expect that to still be secure and",
    "start": "1244000",
    "end": "1249080"
  },
  {
    "text": "supportable and not have bugs anymore so um sort of the easiest thing to do is to move to a newer image if you're using",
    "start": "1249080",
    "end": "1255280"
  },
  {
    "text": "one that's really that old um but you can also uh sort of figure out how to um",
    "start": "1255280",
    "end": "1261039"
  },
  {
    "text": "convert those images as well and container containery can convert them for you we never store uh schema 1",
    "start": "1261039",
    "end": "1267039"
  },
  {
    "text": "images internally anyway they're always converted on pull so a really easy strategy if you've got an old image and",
    "start": "1267039",
    "end": "1273559"
  },
  {
    "text": "you need to keep it around is you pull it into container D and then immediately push it back into your registry of choice and that will do the conversion",
    "start": "1273559",
    "end": "1280400"
  },
  {
    "text": "for you into an oci image um continuity records the specific images that are",
    "start": "1280400",
    "end": "1286840"
  },
  {
    "text": "schema one as part of our conver process and so you can find those by looking at the CTR tool and querying for the label",
    "start": "1286840",
    "end": "1293640"
  },
  {
    "text": "that we apply um that label will tell you not just that it is a schema 1 image but the value of the label is the digest",
    "start": "1293640",
    "end": "1300480"
  },
  {
    "text": "of the schema 1 image before we've converted it and so you can trace that back to um the specific image that it's",
    "start": "1300480",
    "end": "1306720"
  },
  {
    "text": "there uh and then we have disabled schema 1 support by default in container",
    "start": "1306720",
    "end": "1312200"
  },
  {
    "text": "D20 but you can reenable it there are some nuances here and we've got a doc that I've Linked In A later slide that",
    "start": "1312200",
    "end": "1317679"
  },
  {
    "text": "goes and describes specifically how to do that but um we are planning on removing it entirely for",
    "start": "1317679",
    "end": "1323960"
  },
  {
    "text": "2.1 uh another thing I want to highlight here is CRI V1 Alpha 2 this was an older",
    "start": "1323960",
    "end": "1330360"
  },
  {
    "text": "um API version that kubernetes used for controlling the container run times and was replaced by V1 in kubernetes",
    "start": "1330360",
    "end": "1337400"
  },
  {
    "text": "1.23 and we're at 1.32 now so it's been around for a while v1's been around for",
    "start": "1337400",
    "end": "1343600"
  },
  {
    "text": "a while um which means if you're using a a modern CET it's already using the correct version um other workloads that",
    "start": "1343600",
    "end": "1350799"
  },
  {
    "text": "are talking to the container runtime might still be using uh V1 Alpha 2 and these might be things like monitoring",
    "start": "1350799",
    "end": "1356600"
  },
  {
    "text": "workloads or security scanners um if you find any usage of V1 Alpha 2 in your",
    "start": "1356600",
    "end": "1361679"
  },
  {
    "text": "cluster those are the components that uh I would look at first you can also sort of look at um if you've got workloads",
    "start": "1361679",
    "end": "1368200"
  },
  {
    "text": "that are privileged or workloads that are doing a bind Mount of the container D socket um those are specific ones that",
    "start": "1368200",
    "end": "1374559"
  },
  {
    "text": "might be more impacted as those are actually having access to the container socket to control it um as I said here",
    "start": "1374559",
    "end": "1381520"
  },
  {
    "text": "we had a little bit of uh um 1721 and 1636 are the the patch",
    "start": "1381520",
    "end": "1389559"
  },
  {
    "text": "versions of 17 and 16 that have accurate data on CRI usage we had a little bit of inaccurate data in the beginning but um",
    "start": "1389559",
    "end": "1397520"
  },
  {
    "text": "those will tell you exactly when the last time those API versions were used and you can see like was it used 3 weeks",
    "start": "1397520",
    "end": "1403480"
  },
  {
    "text": "ago and I have to look at a workload that's not currently running or is it is it actually being used right now and I have something in my cluster that's",
    "start": "1403480",
    "end": "1409400"
  },
  {
    "text": "going and hitting that endpoint today I also want to highlight um something else that is not a deprecation",
    "start": "1409400",
    "end": "1416600"
  },
  {
    "text": "but um sort of a a backend change that we've done to the CRI implementation of container D um in container d17 we",
    "start": "1416600",
    "end": "1424480"
  },
  {
    "text": "introduced the experimental sandbox service and in containerd 2.0 we've stabilized that and we've Rewritten the",
    "start": "1424480",
    "end": "1431679"
  },
  {
    "text": "back end of the CRI implementation in container D to use the sandbox service",
    "start": "1431679",
    "end": "1437320"
  },
  {
    "text": "we did a lot of that work in 17 which means you can try this out in 17 it's just not turned on by default um if you",
    "start": "1437320",
    "end": "1443640"
  },
  {
    "text": "want to try that separately from the rest of the 2.0 changes um we don't expect this to be impactful um there can",
    "start": "1443640",
    "end": "1451640"
  },
  {
    "text": "always be bugs lurking but uh this isn't a breaking change this is just sort of a larger backend change that might you",
    "start": "1451640",
    "end": "1458200"
  },
  {
    "text": "might want to be aware of uh everything else pretty much has",
    "start": "1458200",
    "end": "1463400"
  },
  {
    "text": "direct Replacements um this link here is the Full Table of everything that",
    "start": "1463400",
    "end": "1468640"
  },
  {
    "text": "changed what you can replace it with when it changed um all of those things deprecation warnings that come out as",
    "start": "1468640",
    "end": "1475640"
  },
  {
    "text": "part of CPR depr CTR deprecations list is going to have effectively the same information just tailored to the",
    "start": "1475640",
    "end": "1481640"
  },
  {
    "text": "specific things that you're running into but the full list is on the website um",
    "start": "1481640",
    "end": "1486679"
  },
  {
    "text": "and then the one one thing that is a a breaking thing that we can't really detect is the use of IOU ring um but our",
    "start": "1486679",
    "end": "1492480"
  },
  {
    "text": "expectation here is that applications are going to degrade gracefully rather than uh break with that change",
    "start": "1492480",
    "end": "1499720"
  },
  {
    "text": "if you run into challenges with this we have resources available to help um we have a document in our repo that",
    "start": "1499720",
    "end": "1505480"
  },
  {
    "text": "describes in a lot of detail a bunch of the stuff that we've got in containerd 2.0 uh as well as our our release notes",
    "start": "1505480",
    "end": "1512279"
  },
  {
    "text": "for 2.0 that are that are fairly long um and discuss every single change uh and",
    "start": "1512279",
    "end": "1517559"
  },
  {
    "text": "then we've got a discussion forum available on GitHub uh where we do Q&A and come for come to us for help uh",
    "start": "1517559",
    "end": "1523799"
  },
  {
    "text": "we're happy to to answer questions there um we're also available on slack uh in the cncf slack we have a container D",
    "start": "1523799",
    "end": "1530039"
  },
  {
    "text": "Channel um that link will give you an invite to it uh and if you're really stuck and really want to talk to someone",
    "start": "1530039",
    "end": "1536120"
  },
  {
    "text": "um we've got community meetings that we operate on the the second and fourth Thursdays of the month um you can check the cncf calendar for the time in your",
    "start": "1536120",
    "end": "1543000"
  },
  {
    "text": "time zone so 2.0 just came out what's next in",
    "start": "1543000",
    "end": "1549720"
  },
  {
    "text": "2.1 uh we're starting to put that Milestone together now um there's a couple things that I'm pretty pretty",
    "start": "1549720",
    "end": "1554880"
  },
  {
    "text": "excited about um first one here that just barely didn't quite make it into 2.0 uh but we'll get into 2.1 pretty",
    "start": "1554880",
    "end": "1561679"
  },
  {
    "text": "quickly is oci image volume Source this is a newer cap um that that sort of just",
    "start": "1561679",
    "end": "1567520"
  },
  {
    "text": "came out just was proposed uh and has entered Alpha in 1.32 but we don't yet",
    "start": "1567520",
    "end": "1572559"
  },
  {
    "text": "have the implementation in container D the focus of this cap is allowing you to um expose data sets or like large data",
    "start": "1572559",
    "end": "1580080"
  },
  {
    "text": "sets uh as container images and attach them to your pods uh and that gives you",
    "start": "1580080",
    "end": "1585120"
  },
  {
    "text": "a good mechanism for distribution of large readon data sets that you're going to run ac across your cluster the same",
    "start": "1585120",
    "end": "1591520"
  },
  {
    "text": "way that you distribute the actual software that you're going to run so you can specify a container image as a",
    "start": "1591520",
    "end": "1597120"
  },
  {
    "text": "volume in your pod in your podspec and then it's just a volume from there um",
    "start": "1597120",
    "end": "1602840"
  },
  {
    "text": "we're really excited about this we've got an implementation that's in review right now we're going to work through that and then get it into 2.1 um we're",
    "start": "1602840",
    "end": "1610480"
  },
  {
    "text": "also going to continue to do some improvements to uh sandboxes the sandbox service and sandboxes which are the",
    "start": "1610480",
    "end": "1615799"
  },
  {
    "text": "plug-in mechanism there I I didn't really talk too too much in depth about this yet but um the sandbox service",
    "start": "1615799",
    "end": "1621360"
  },
  {
    "text": "really helps um for alternative sort of VM based runtimes and other use cases",
    "start": "1621360",
    "end": "1626919"
  },
  {
    "text": "that need to have um more detailed information about the group of containers that makes up a pod than",
    "start": "1626919",
    "end": "1632039"
  },
  {
    "text": "container D previously had as it's part of its internal data um so we're going to make some we're going to continue",
    "start": "1632039",
    "end": "1638559"
  },
  {
    "text": "improvements there we've got an issue that has a bunch of detailed information on um what still needs to be done um",
    "start": "1638559",
    "end": "1645240"
  },
  {
    "text": "we've got some stuff uh coming for improvements in terms of pull speed uh which I think most people are going to",
    "start": "1645240",
    "end": "1650559"
  },
  {
    "text": "care about especially as we get larger and larger and larger container images um uh we'll we will be integrating CRI",
    "start": "1650559",
    "end": "1657640"
  },
  {
    "text": "with the transfer service which will unlock things like the image verifier plugins that I was talking about earlier",
    "start": "1657640",
    "end": "1663360"
  },
  {
    "text": "uh and then of course we're going to look at the replacement for the offs config which is probably going to be something like a credential manager",
    "start": "1663360",
    "end": "1669080"
  },
  {
    "text": "plug-in uh we have some thoughts about that but not uh it's not not a full",
    "start": "1669080",
    "end": "1674799"
  },
  {
    "text": "proposal for how we're going to do that yet but all these things are on the docket for 2.1 uh and then we've got a",
    "start": "1674799",
    "end": "1680039"
  },
  {
    "text": "milestone there that has more things of course we're always you know happy to add more things if if there's uh issues",
    "start": "1680039",
    "end": "1685760"
  },
  {
    "text": "or proposals or uh things like that that people want to see in 2.1 um I also want to touch a little bit",
    "start": "1685760",
    "end": "1692000"
  },
  {
    "text": "on the timeline 2.0 took a a pretty long time to come out compared to the previous release cycle that we've had we",
    "start": "1692000",
    "end": "1698919"
  },
  {
    "text": "don't we have not settled on exactly what're our plans are for uh 2.1 but our",
    "start": "1698919",
    "end": "1704159"
  },
  {
    "text": "expectation is that it's not going to take nearly as long as 2.0 came out 2.0 is a major transition because it was a",
    "start": "1704159",
    "end": "1709200"
  },
  {
    "text": "major version bump and we won't have that with 2.1 so 2.1 should come out on a much faster basis than we had for",
    "start": "1709200",
    "end": "1716919"
  },
  {
    "text": "2.0 um we have another session this afternoon that's a maintainer session um",
    "start": "1716919",
    "end": "1723159"
  },
  {
    "text": "where it's going to be me and then for the other container D maintainers and we're just going to sit around and talk about sort of project Direction um",
    "start": "1723159",
    "end": "1730559"
  },
  {
    "text": "history uh Vision all the all sorts of fun things I'm really excited about it I think it'll be a fun fun discussion love",
    "start": "1730559",
    "end": "1736840"
  },
  {
    "text": "for you all to come join us that's at um 2:55 this afternoon uh in the the high at level",
    "start": "1736840",
    "end": "1743039"
  },
  {
    "text": "four Regency Ballroom uh and then at this point I want to open up for uh Q&A and uh Phil",
    "start": "1743039",
    "end": "1749760"
  },
  {
    "text": "who's sitting up in the front row as another maintainer is going to walk around with a mic so feel free to raise",
    "start": "1749760",
    "end": "1754840"
  },
  {
    "text": "your hands if you got questions and Phil will come out",
    "start": "1754840",
    "end": "1758760"
  },
  {
    "text": "and okay thank you for your presentation and some new fatures uh especially",
    "start": "1765480",
    "end": "1771799"
  },
  {
    "text": "username speciic the part depend on the lunch version right so because con use",
    "start": "1771799",
    "end": "1778159"
  },
  {
    "text": "lunchy features of command so is there any documentation uh that makes uh them",
    "start": "1778159",
    "end": "1784720"
  },
  {
    "text": "easier to understand so what's the Lun version and enable the continuities is a",
    "start": "1784720",
    "end": "1792200"
  },
  {
    "text": "name space with a pod or future I don't know that we have existing documentation that covers that",
    "start": "1792200",
    "end": "1798600"
  },
  {
    "text": "but that's a really good point for something that we can add um you're right that it's going to depend on the runy version it also depends on the",
    "start": "1798600",
    "end": "1804600"
  },
  {
    "text": "Kernel version um so we we'll need to document both of those but yeah that's that's something we can certainly add",
    "start": "1804600",
    "end": "1810799"
  },
  {
    "text": "okay thank you I have another questions okay that's o volume SS take into",
    "start": "1810799",
    "end": "1816480"
  },
  {
    "text": "account CI configurations oci the O oia image",
    "start": "1816480",
    "end": "1823080"
  },
  {
    "text": "volume uh sauce or oia volume sauce Tes into accounts are CRI",
    "start": "1823080",
    "end": "1831240"
  },
  {
    "text": "configurations I don't think there's anything in the cap that talks about CRI configuration right now it's just the um",
    "start": "1831240",
    "end": "1837480"
  },
  {
    "text": "unless you're asking like does the the particular runtime support it which so we there is a keying based on whether",
    "start": "1837480",
    "end": "1843600"
  },
  {
    "text": "the runtime supports that feature but um I don't think there's anything beyond that M mic up in front would have",
    "start": "1843600",
    "end": "1851279"
  },
  {
    "text": "more the actual implementation is using the same code path that we use for regular container images so so",
    "start": "1852799",
    "end": "1862559"
  },
  {
    "text": "yes correct correct actually it's sort of interesting so what we're doing through oi volume is the podspec defines",
    "start": "1864320",
    "end": "1873600"
  },
  {
    "text": "what it's going to be but we don't pull it yet when when they actually do the create container we check to see if",
    "start": "1873600",
    "end": "1880399"
  },
  {
    "text": "you've got a Target path right in the volume list and then we go ahead and fill in the contents we create our own",
    "start": "1880399",
    "end": "1886919"
  },
  {
    "text": "Local Host you know ex extract of it but not as a root fs and we do a bind Mount",
    "start": "1886919",
    "end": "1894000"
  },
  {
    "text": "from that image that's going to be shared across all the containers okay in that pod to whatever locations you",
    "start": "1894000",
    "end": "1901120"
  },
  {
    "text": "wanted to pull and we're also going to be adding a set path so you'll be able to select the portions of the image that",
    "start": "1901120",
    "end": "1906480"
  },
  {
    "text": "you want and mount that into a particular destination path okay",
    "start": "1906480",
    "end": "1913440"
  },
  {
    "text": "okay uh looks like we don't have any more questions um I'm going to hang around after the container maintainers",
    "start": "1921760",
    "end": "1927120"
  },
  {
    "text": "who are here probably will hang around after if you want to talk to us uh and we've got the maintainer session um",
    "start": "1927120",
    "end": "1932799"
  },
  {
    "text": "later this afternoon so any questions that you have then um a brief note here I would love to have your feedback on",
    "start": "1932799",
    "end": "1938240"
  },
  {
    "text": "the session I'm going to show a QR code in a minute um anything that you were excited to learn about anything that I",
    "start": "1938240",
    "end": "1943559"
  },
  {
    "text": "can improve uh in terms of the session content or Clarity or anything like that um but yeah uh happy to have that so",
    "start": "1943559",
    "end": "1951000"
  },
  {
    "text": "here's the code for session feedback thank you",
    "start": "1951000",
    "end": "1955799"
  }
]