[
  {
    "text": "[Applause]",
    "start": "0",
    "end": "530"
  },
  {
    "text": "hi everyone thanks for coming to the",
    "start": "530",
    "end": "3210"
  },
  {
    "text": "Cooper dendi's control plane for busy",
    "start": "3210",
    "end": "5160"
  },
  {
    "text": "people who like pictures if you saw my",
    "start": "5160",
    "end": "8519"
  },
  {
    "text": "previous talks or you looked at the",
    "start": "8519",
    "end": "10050"
  },
  {
    "text": "slides online you know what's in store",
    "start": "10050",
    "end": "12210"
  },
  {
    "text": "okay okay a little bit about me I'm",
    "start": "12210",
    "end": "16560"
  },
  {
    "text": "Daniel Smith I'm a staff software",
    "start": "16560",
    "end": "18510"
  },
  {
    "text": "engineer at Google I've been working on",
    "start": "18510",
    "end": "20250"
  },
  {
    "text": "kubernetes since before it was",
    "start": "20250",
    "end": "21270"
  },
  {
    "text": "open-source",
    "start": "21270",
    "end": "22260"
  },
  {
    "text": "I am the co-chair coati of segi API",
    "start": "22260",
    "end": "25170"
  },
  {
    "text": "machinery which owns API server and",
    "start": "25170",
    "end": "29160"
  },
  {
    "text": "controller manager and like a lot of a",
    "start": "29160",
    "end": "31349"
  },
  {
    "text": "lot of the control plane of kubernetes",
    "start": "31349",
    "end": "34910"
  },
  {
    "text": "so who is this talk for this is for two",
    "start": "34910",
    "end": "39989"
  },
  {
    "text": "groups of people if you have ever",
    "start": "39989",
    "end": "41940"
  },
  {
    "text": "considered building your own control",
    "start": "41940",
    "end": "43170"
  },
  {
    "text": "plane I'm sure like everybody does this",
    "start": "43170",
    "end": "45300"
  },
  {
    "text": "right if you've ever thought about this",
    "start": "45300",
    "end": "46920"
  },
  {
    "text": "this this talk is gonna be a survey of",
    "start": "46920",
    "end": "50010"
  },
  {
    "text": "the existing controllers in kubernetes",
    "start": "50010",
    "end": "51360"
  },
  {
    "text": "you can look at those and together we're",
    "start": "51360",
    "end": "53850"
  },
  {
    "text": "gonna learn what patterns are good and",
    "start": "53850",
    "end": "57059"
  },
  {
    "text": "what patterns are a little harder to",
    "start": "57059",
    "end": "58739"
  },
  {
    "text": "understand maybe and you can decide",
    "start": "58739",
    "end": "61260"
  },
  {
    "text": "whether your problem domain is a good",
    "start": "61260",
    "end": "63180"
  },
  {
    "text": "fit for this style of control plane",
    "start": "63180",
    "end": "64650"
  },
  {
    "text": "architecture the other group of people",
    "start": "64650",
    "end": "66869"
  },
  {
    "text": "that I'm targeting this at is like you",
    "start": "66869",
    "end": "69960"
  },
  {
    "text": "know what a pod is you know what a",
    "start": "69960",
    "end": "70979"
  },
  {
    "text": "deployment is you're ready for you're",
    "start": "70979",
    "end": "72510"
  },
  {
    "text": "ready for 201 so we're gonna do that",
    "start": "72510",
    "end": "76080"
  },
  {
    "text": "we're gonna go through like every",
    "start": "76080",
    "end": "77640"
  },
  {
    "text": "controller in the system and say what it",
    "start": "77640",
    "end": "79259"
  },
  {
    "text": "does we're gonna have fun we've got a",
    "start": "79259",
    "end": "81570"
  },
  {
    "text": "lot of slides to go through okay if you",
    "start": "81570",
    "end": "85049"
  },
  {
    "text": "saw my last two slides or even if that",
    "start": "85049",
    "end": "87330"
  },
  {
    "text": "my last two talks or even if he didn't",
    "start": "87330",
    "end": "88680"
  },
  {
    "text": "this this talk completes the trilogy I",
    "start": "88680",
    "end": "91020"
  },
  {
    "text": "didn't know it was a trilogy when I",
    "start": "91020",
    "end": "92040"
  },
  {
    "text": "started but it is so I'm gonna reference",
    "start": "92040",
    "end": "94799"
  },
  {
    "text": "those a couple times you can go see",
    "start": "94799",
    "end": "96180"
  },
  {
    "text": "videos on YouTube don't worry you won't",
    "start": "96180",
    "end": "99210"
  },
  {
    "text": "have any problem understanding us so if",
    "start": "99210",
    "end": "101759"
  },
  {
    "text": "you've seen those you've probably heard",
    "start": "101759",
    "end": "103500"
  },
  {
    "text": "me say something like the kubernetes api",
    "start": "103500",
    "end": "105240"
  },
  {
    "text": "is about humans and machines working",
    "start": "105240",
    "end": "107579"
  },
  {
    "text": "together well you can't do that without",
    "start": "107579",
    "end": "110880"
  },
  {
    "text": "some machines so this talk is about",
    "start": "110880",
    "end": "113909"
  },
  {
    "text": "controllers controllers are the things",
    "start": "113909",
    "end": "116280"
  },
  {
    "text": "that make it all work the ghosts in the",
    "start": "116280",
    "end": "117450"
  },
  {
    "text": "machine the the person behind the",
    "start": "117450",
    "end": "119579"
  },
  {
    "text": "curtain you get the idea and before",
    "start": "119579",
    "end": "124710"
  },
  {
    "text": "before we like dive into their",
    "start": "124710",
    "end": "126000"
  },
  {
    "text": "controllers and kubernetes I",
    "start": "126000",
    "end": "128200"
  },
  {
    "text": "I want to you know everybody let's",
    "start": "128200",
    "end": "129940"
  },
  {
    "text": "control theory right I want talk about",
    "start": "129940",
    "end": "131140"
  },
  {
    "text": "control theory for just a little bit and",
    "start": "131140",
    "end": "133180"
  },
  {
    "text": "and I'm going to start off by rehashing",
    "start": "133180",
    "end": "136090"
  },
  {
    "text": "the age-old debate of state machine",
    "start": "136090",
    "end": "137890"
  },
  {
    "text": "versus control loop and the argument",
    "start": "137890",
    "end": "142660"
  },
  {
    "text": "goes like this and we we actually rehash",
    "start": "142660",
    "end": "145390"
  },
  {
    "text": "this argument in a number of places",
    "start": "145390",
    "end": "147010"
  },
  {
    "text": "early on kubernetes and we came down",
    "start": "147010",
    "end": "148900"
  },
  {
    "text": "pretty firmly on the control loop side",
    "start": "148900",
    "end": "150459"
  },
  {
    "text": "of things but but the argument is like",
    "start": "150459",
    "end": "152470"
  },
  {
    "text": "if you're if you're constructing your",
    "start": "152470",
    "end": "153910"
  },
  {
    "text": "system in terms of state machines for",
    "start": "153910",
    "end": "156970"
  },
  {
    "text": "every like binary variable you could you",
    "start": "156970",
    "end": "160030"
  },
  {
    "text": "double the number of states so if you've",
    "start": "160030",
    "end": "162010"
  },
  {
    "text": "got to write things that get every",
    "start": "162010",
    "end": "163600"
  },
  {
    "text": "action perfect you've got so many states",
    "start": "163600",
    "end": "165819"
  },
  {
    "text": "like you can't possibly get it all right",
    "start": "165819",
    "end": "167830"
  },
  {
    "text": "the number of states grows really big as",
    "start": "167830",
    "end": "171220"
  },
  {
    "text": "you add variables and to make it worse",
    "start": "171220",
    "end": "173410"
  },
  {
    "text": "like not all the variables in the system",
    "start": "173410",
    "end": "174610"
  },
  {
    "text": "are binary right we've got real numbers",
    "start": "174610",
    "end": "176110"
  },
  {
    "text": "it's not good that's the technical term",
    "start": "176110",
    "end": "179220"
  },
  {
    "text": "so if you instead factor your logic in",
    "start": "179220",
    "end": "182709"
  },
  {
    "text": "terms of controllers now you're not",
    "start": "182709",
    "end": "185170"
  },
  {
    "text": "talking about States you're talking",
    "start": "185170",
    "end": "186790"
  },
  {
    "text": "about like clusters of variables this is",
    "start": "186790",
    "end": "188230"
  },
  {
    "text": "the input to your controller the status",
    "start": "188230",
    "end": "190660"
  },
  {
    "text": "the other things going on in the cluster",
    "start": "190660",
    "end": "191920"
  },
  {
    "text": "and now you just have to add an",
    "start": "191920",
    "end": "194019"
  },
  {
    "text": "additional controller to to to handle",
    "start": "194019",
    "end": "196600"
  },
  {
    "text": "every cluster variables right so the",
    "start": "196600",
    "end": "198400"
  },
  {
    "text": "number of controllers just scales sort",
    "start": "198400",
    "end": "200350"
  },
  {
    "text": "of linearly with with with the number of",
    "start": "200350",
    "end": "202450"
  },
  {
    "text": "things going on in the cluster in a",
    "start": "202450",
    "end": "206799"
  },
  {
    "text": "prior talk I talked a lot about the",
    "start": "206799",
    "end": "209170"
  },
  {
    "text": "kubernetes resource model like the API",
    "start": "209170",
    "end": "210760"
  },
  {
    "text": "how it lets you gives you a constant way",
    "start": "210760",
    "end": "214299"
  },
  {
    "text": "of performing API actions on the cluster",
    "start": "214299",
    "end": "217859"
  },
  {
    "text": "and that was about integration",
    "start": "217859",
    "end": "220060"
  },
  {
    "text": "complexity right if you know how to if",
    "start": "220060",
    "end": "221859"
  },
  {
    "text": "you know how to drive one kubernetes",
    "start": "221859",
    "end": "223030"
  },
  {
    "text": "resource you know how to drive them all",
    "start": "223030",
    "end": "224230"
  },
  {
    "text": "because the API is the Cotten's constant",
    "start": "224230",
    "end": "226120"
  },
  {
    "text": "there's even constant metadata whereas",
    "start": "226120",
    "end": "228640"
  },
  {
    "text": "the the controller half of it the half",
    "start": "228640",
    "end": "230530"
  },
  {
    "text": "that I'm talking about in this talk is",
    "start": "230530",
    "end": "231959"
  },
  {
    "text": "the implementation complexity right so",
    "start": "231959",
    "end": "235000"
  },
  {
    "text": "so there's the the API we factor",
    "start": "235000",
    "end": "237459"
  },
  {
    "text": "everything to make it simple but",
    "start": "237459",
    "end": "239650"
  },
  {
    "text": "controllers we also factor the logic of",
    "start": "239650",
    "end": "241720"
  },
  {
    "text": "the controller to concentrate the the",
    "start": "241720",
    "end": "244510"
  },
  {
    "text": "hard part of the controller into one",
    "start": "244510",
    "end": "246430"
  },
  {
    "text": "place this makes it globally easier like",
    "start": "246430",
    "end": "250660"
  },
  {
    "text": "there's no single state that you have to",
    "start": "250660",
    "end": "252880"
  },
  {
    "text": "worry about like there's no to make a",
    "start": "252880",
    "end": "254680"
  },
  {
    "text": "change in kubernetes you don't have to",
    "start": "254680",
    "end": "256090"
  },
  {
    "text": "have every single as possible state in",
    "start": "256090",
    "end": "257890"
  },
  {
    "text": "mind to make a correct",
    "start": "257890",
    "end": "258730"
  },
  {
    "text": "change but it makes it locally harder",
    "start": "258730",
    "end": "261489"
  },
  {
    "text": "because your controller has to be",
    "start": "261490",
    "end": "263320"
  },
  {
    "text": "written with all possible it's like",
    "start": "263320",
    "end": "266050"
  },
  {
    "text": "everything else going on in the cluster",
    "start": "266050",
    "end": "267340"
  },
  {
    "text": "you have to take that into account when",
    "start": "267340",
    "end": "269140"
  },
  {
    "text": "you're writing your controller so let's",
    "start": "269140",
    "end": "271630"
  },
  {
    "text": "talk about some things let's talk about",
    "start": "271630",
    "end": "274930"
  },
  {
    "text": "kubernetes resource model controllers in",
    "start": "274930",
    "end": "280690"
  },
  {
    "text": "doing this survey came up with a list of",
    "start": "280690",
    "end": "283720"
  },
  {
    "text": "things that I think make a good",
    "start": "283720",
    "end": "285610"
  },
  {
    "text": "controller only do one thing have some",
    "start": "285610",
    "end": "289690"
  },
  {
    "text": "clear input source like people need to",
    "start": "289690",
    "end": "291280"
  },
  {
    "text": "know how to how do you make it work how",
    "start": "291280",
    "end": "292930"
  },
  {
    "text": "do you drive your controller have a",
    "start": "292930",
    "end": "294490"
  },
  {
    "text": "place to write status people did you",
    "start": "294490",
    "end": "295900"
  },
  {
    "text": "need to know if your controller is happy",
    "start": "295900",
    "end": "297760"
  },
  {
    "text": "or healthy or unhappy or you know what",
    "start": "297760",
    "end": "299680"
  },
  {
    "text": "what how's it feeling you need to have",
    "start": "299680",
    "end": "302290"
  },
  {
    "text": "an output place like what are you",
    "start": "302290",
    "end": "303580"
  },
  {
    "text": "actuated what are you what does your",
    "start": "303580",
    "end": "304780"
  },
  {
    "text": "controller doing and then the last two I",
    "start": "304780",
    "end": "308260"
  },
  {
    "text": "think are maybe the least obvious and",
    "start": "308260",
    "end": "310390"
  },
  {
    "text": "possibly the most important the",
    "start": "310390",
    "end": "313150"
  },
  {
    "text": "controller has to anticipate its own",
    "start": "313150",
    "end": "315820"
  },
  {
    "text": "effects like the effects of its own",
    "start": "315820",
    "end": "317290"
  },
  {
    "text": "actions on the rest of the system and",
    "start": "317290",
    "end": "319110"
  },
  {
    "text": "when you are having a problem break",
    "start": "319110",
    "end": "323110"
  },
  {
    "text": "things a little bit don't bring things a",
    "start": "323110",
    "end": "324640"
  },
  {
    "text": "lot just just a little bit and don't",
    "start": "324640",
    "end": "326830"
  },
  {
    "text": "pretend things are not broken so let's",
    "start": "326830",
    "end": "329680"
  },
  {
    "text": "talk about those those last two a little",
    "start": "329680",
    "end": "331960"
  },
  {
    "text": "bit more so here we have a kubernetes",
    "start": "331960",
    "end": "335290"
  },
  {
    "text": "controller in its natural habitat and I",
    "start": "335290",
    "end": "338650"
  },
  {
    "text": "want to zoom in on in inside see what's",
    "start": "338650",
    "end": "341740"
  },
  {
    "text": "inside this controller so if you zoom in",
    "start": "341740",
    "end": "345430"
  },
  {
    "text": "on a controller you'll find like there's",
    "start": "345430",
    "end": "347050"
  },
  {
    "text": "a lot of plumbing and there's flags and",
    "start": "347050",
    "end": "348310"
  },
  {
    "text": "configuration and there's all this stuff",
    "start": "348310",
    "end": "350800"
  },
  {
    "text": "like informers like who knows what",
    "start": "350800",
    "end": "352620"
  },
  {
    "text": "commented out code you don't what your",
    "start": "352620",
    "end": "354280"
  },
  {
    "text": "co-workers to read but there's also some",
    "start": "354280",
    "end": "356020"
  },
  {
    "text": "some logic in there right there's",
    "start": "356020",
    "end": "357640"
  },
  {
    "text": "there's some there's some brains like",
    "start": "357640",
    "end": "359020"
  },
  {
    "text": "there's some like you know if this",
    "start": "359020",
    "end": "360490"
  },
  {
    "text": "didn't do that something something is is",
    "start": "360490",
    "end": "362350"
  },
  {
    "text": "active there and if you zoom in on that",
    "start": "362350",
    "end": "365820"
  },
  {
    "text": "what you'll find is the controller has",
    "start": "365820",
    "end": "369340"
  },
  {
    "text": "to have a model of its environment right",
    "start": "369340",
    "end": "371560"
  },
  {
    "text": "it may be implicit it may not be",
    "start": "371560",
    "end": "373960"
  },
  {
    "text": "explicit but it is there and and",
    "start": "373960",
    "end": "377310"
  },
  {
    "text": "controllers have to have a good model of",
    "start": "377310",
    "end": "379300"
  },
  {
    "text": "their environment to be to do a good job",
    "start": "379300",
    "end": "381580"
  },
  {
    "text": "at controlling the thing that they're",
    "start": "381580",
    "end": "382480"
  },
  {
    "text": "trying to control like a concrete",
    "start": "382480",
    "end": "384160"
  },
  {
    "text": "example if you're the if you're",
    "start": "384160",
    "end": "386050"
  },
  {
    "text": "replica set controller you're trying to",
    "start": "386050",
    "end": "387340"
  },
  {
    "text": "make pods and you make 100 pods and then",
    "start": "387340",
    "end": "390099"
  },
  {
    "text": "you look and like you need a hundred",
    "start": "390099",
    "end": "391180"
  },
  {
    "text": "pots you make another hundred pods and",
    "start": "391180",
    "end": "392440"
  },
  {
    "text": "then you're looking at you have 200",
    "start": "392440",
    "end": "393610"
  },
  {
    "text": "pause and you're like oh my god I have",
    "start": "393610",
    "end": "394810"
  },
  {
    "text": "200 pods delete hundred pods and you",
    "start": "394810",
    "end": "396699"
  },
  {
    "text": "look you still have to look you lost",
    "start": "396699",
    "end": "398590"
  },
  {
    "text": "like right so you have to have a model",
    "start": "398590",
    "end": "400120"
  },
  {
    "text": "of what you're doing to the environment",
    "start": "400120",
    "end": "401190"
  },
  {
    "text": "and some simple controllers don't",
    "start": "401190",
    "end": "403870"
  },
  {
    "text": "necessarily need to do too much so it's",
    "start": "403870",
    "end": "405849"
  },
  {
    "text": "like okay I set the thing the thing is",
    "start": "405849",
    "end": "407229"
  },
  {
    "text": "set like that's it but there is some",
    "start": "407229",
    "end": "409629"
  },
  {
    "text": "sort of implicit model so if you zoom",
    "start": "409629",
    "end": "413440"
  },
  {
    "text": "into the like the controller in the",
    "start": "413440",
    "end": "415090"
  },
  {
    "text": "model that doesn't have to be anything",
    "start": "415090",
    "end": "416199"
  },
  {
    "text": "in there you don't have to go that far",
    "start": "416199",
    "end": "417520"
  },
  {
    "text": "take a deep breath you're okay okay and",
    "start": "417520",
    "end": "421710"
  },
  {
    "text": "so the last thing about break things",
    "start": "421710",
    "end": "425259"
  },
  {
    "text": "just a little bit well I want to talk",
    "start": "425259",
    "end": "428050"
  },
  {
    "text": "about like how two changes propagate in",
    "start": "428050",
    "end": "429969"
  },
  {
    "text": "a kubernetes cluster so your country you",
    "start": "429969",
    "end": "434710"
  },
  {
    "text": "do something as a human or as a CATV",
    "start": "434710",
    "end": "436780"
  },
  {
    "text": "system or something and then your",
    "start": "436780",
    "end": "437889"
  },
  {
    "text": "controller goes out and does something",
    "start": "437889",
    "end": "438909"
  },
  {
    "text": "else and then then maybe more",
    "start": "438909",
    "end": "442389"
  },
  {
    "text": "controllers go out and do other things",
    "start": "442389",
    "end": "443319"
  },
  {
    "text": "and so that that propagates and",
    "start": "443319",
    "end": "444550"
  },
  {
    "text": "eventually like the system quiesce is it",
    "start": "444550",
    "end": "446530"
  },
  {
    "text": "comes to a quiet state it's happy",
    "start": "446530",
    "end": "448150"
  },
  {
    "text": "nothing needs to change to get into a",
    "start": "448150",
    "end": "449949"
  },
  {
    "text": "good state that's but that's one that's",
    "start": "449949",
    "end": "451060"
  },
  {
    "text": "one way changes can propagate another",
    "start": "451060",
    "end": "452979"
  },
  {
    "text": "way changes can propagate is like you",
    "start": "452979",
    "end": "454270"
  },
  {
    "text": "trigger a controller which then triggers",
    "start": "454270",
    "end": "455979"
  },
  {
    "text": "something else which then triggers",
    "start": "455979",
    "end": "456940"
  },
  {
    "text": "something else which is like you can",
    "start": "456940",
    "end": "458110"
  },
  {
    "text": "goes into a circle right that's another",
    "start": "458110",
    "end": "459849"
  },
  {
    "text": "way that your change can ripple through",
    "start": "459849",
    "end": "461319"
  },
  {
    "text": "the system after you after you've ready",
    "start": "461319",
    "end": "462699"
  },
  {
    "text": "to change there's another two way which",
    "start": "462699",
    "end": "465430"
  },
  {
    "text": "is like you make a change and then like",
    "start": "465430",
    "end": "467620"
  },
  {
    "text": "you know you've got a cascading like",
    "start": "467620",
    "end": "469000"
  },
  {
    "text": "failure and like controllers keep riding",
    "start": "469000",
    "end": "471219"
  },
  {
    "text": "until API server can't keep up anymore",
    "start": "471219",
    "end": "473250"
  },
  {
    "text": "so you don't want to do this like if you",
    "start": "473250",
    "end": "475449"
  },
  {
    "text": "do this your control plan can't keep up",
    "start": "475449",
    "end": "477310"
  },
  {
    "text": "something bad is going to happen I'm",
    "start": "477310",
    "end": "480340"
  },
  {
    "text": "gonna say like this is actually how you",
    "start": "480340",
    "end": "482050"
  },
  {
    "text": "want your controller to fail you want to",
    "start": "482050",
    "end": "483520"
  },
  {
    "text": "do this really slowly and the reason why",
    "start": "483520",
    "end": "486009"
  },
  {
    "text": "you want to break these a little bit is",
    "start": "486009",
    "end": "487300"
  },
  {
    "text": "because it gives signal to other things",
    "start": "487300",
    "end": "489340"
  },
  {
    "text": "running in the cluster right like if you",
    "start": "489340",
    "end": "491860"
  },
  {
    "text": "create if you create a thousand on",
    "start": "491860",
    "end": "494379"
  },
  {
    "text": "schedule",
    "start": "494379",
    "end": "494800"
  },
  {
    "text": "pods maybe have a problem if you create",
    "start": "494800",
    "end": "496659"
  },
  {
    "text": "it like if you create a million done",
    "start": "496659",
    "end": "498009"
  },
  {
    "text": "schedule pods you've got a big problem",
    "start": "498009",
    "end": "499930"
  },
  {
    "text": "but if you could if you create a hundred",
    "start": "499930",
    "end": "501490"
  },
  {
    "text": "unschedulable pods that's a signal just",
    "start": "501490",
    "end": "503770"
  },
  {
    "text": "something else in the cluster the maybe",
    "start": "503770",
    "end": "505479"
  },
  {
    "text": "you're running a cluster autoscaler",
    "start": "505479",
    "end": "506590"
  },
  {
    "text": "which is like oh it's time to add a node",
    "start": "506590",
    "end": "508360"
  },
  {
    "text": "that one will hit that one in a few",
    "start": "508360",
    "end": "510940"
  },
  {
    "text": "minutes so it gives signal to the rest",
    "start": "510940",
    "end": "513190"
  },
  {
    "text": "of the rest of the system if there's",
    "start": "513190",
    "end": "515110"
  },
  {
    "text": "self-healing components they can fix",
    "start": "515110",
    "end": "517089"
  },
  {
    "text": "your problem for you without the",
    "start": "517089",
    "end": "518469"
  },
  {
    "text": "controller author really having",
    "start": "518469",
    "end": "519520"
  },
  {
    "text": "understand what it is as fixing the",
    "start": "519520",
    "end": "521320"
  },
  {
    "text": "problem okay so in summary ya break",
    "start": "521320",
    "end": "527500"
  },
  {
    "text": "things a little bit anticipate your own",
    "start": "527500",
    "end": "528610"
  },
  {
    "text": "effect so that's really important to",
    "start": "528610",
    "end": "529810"
  },
  {
    "text": "anticipate your own effects okay that's",
    "start": "529810",
    "end": "532240"
  },
  {
    "text": "enough theory take a deep breath we're",
    "start": "532240",
    "end": "534340"
  },
  {
    "text": "done with the theory it's time for",
    "start": "534340",
    "end": "535650"
  },
  {
    "text": "control practice and what we're gonna do",
    "start": "535650",
    "end": "539140"
  },
  {
    "text": "is we're gonna spend like a few seconds",
    "start": "539140",
    "end": "541090"
  },
  {
    "text": "on every controller in the system",
    "start": "541090",
    "end": "543330"
  },
  {
    "text": "I've classified them here into three",
    "start": "543330",
    "end": "546580"
  },
  {
    "text": "three categories the classic controllers",
    "start": "546580",
    "end": "549730"
  },
  {
    "text": "like the things that really look like a",
    "start": "549730",
    "end": "550630"
  },
  {
    "text": "controller if you go read the Wikipedia",
    "start": "550630",
    "end": "551680"
  },
  {
    "text": "control theory page which I recommend is",
    "start": "551680",
    "end": "554440"
  },
  {
    "text": "good the sanding query or table join",
    "start": "554440",
    "end": "558210"
  },
  {
    "text": "controllers and the injection or by",
    "start": "558210",
    "end": "560770"
  },
  {
    "text": "ejection enforcers okay well clarify",
    "start": "560770",
    "end": "562480"
  },
  {
    "text": "what those means in a second let me give",
    "start": "562480",
    "end": "564880"
  },
  {
    "text": "you just a few disclaimers before we",
    "start": "564880",
    "end": "566680"
  },
  {
    "text": "dive in many controllers write events",
    "start": "566680",
    "end": "572710"
  },
  {
    "text": "if you've used kubernetes you know what",
    "start": "572710",
    "end": "574840"
  },
  {
    "text": "events are I'm not going to show that on",
    "start": "574840",
    "end": "576640"
  },
  {
    "text": "the slides it makes everything really",
    "start": "576640",
    "end": "577510"
  },
  {
    "text": "messy likewise many controllers have",
    "start": "577510",
    "end": "581620"
  },
  {
    "text": "some way of writing status sometimes I",
    "start": "581620",
    "end": "583780"
  },
  {
    "text": "showed it because it's important",
    "start": "583780",
    "end": "584710"
  },
  {
    "text": "sometimes I didn't if you need to know",
    "start": "584710",
    "end": "587380"
  },
  {
    "text": "more you can always go read the code or",
    "start": "587380",
    "end": "589570"
  },
  {
    "text": "the API or whatever I'm gonna go fast on",
    "start": "589570",
    "end": "591610"
  },
  {
    "text": "some of these controllers I'm going to",
    "start": "591610",
    "end": "592600"
  },
  {
    "text": "go slower and others just depending on",
    "start": "592600",
    "end": "595060"
  },
  {
    "text": "whether I think it's instructive or",
    "start": "595060",
    "end": "597150"
  },
  {
    "text": "interesting so here's our first group it",
    "start": "597150",
    "end": "601300"
  },
  {
    "text": "is the garbage collectors this is this",
    "start": "601300",
    "end": "603340"
  },
  {
    "text": "is like the scenario is you've got too",
    "start": "603340",
    "end": "604600"
  },
  {
    "text": "much of something and you need to have",
    "start": "604600",
    "end": "605650"
  },
  {
    "text": "less of it so these this is this is the",
    "start": "605650",
    "end": "607810"
  },
  {
    "text": "theme for this group of controllers",
    "start": "607810",
    "end": "610090"
  },
  {
    "text": "first one is the pod garbage collector",
    "start": "610090",
    "end": "611620"
  },
  {
    "text": "it's basically like you've got too many",
    "start": "611620",
    "end": "613600"
  },
  {
    "text": "finished pods and your cluster so let's",
    "start": "613600",
    "end": "614980"
  },
  {
    "text": "go get rid of something this is a pool",
    "start": "614980",
    "end": "616630"
  },
  {
    "text": "skimmer like you've got too much water",
    "start": "616630",
    "end": "617830"
  },
  {
    "text": "in your pool let's drain some water",
    "start": "617830",
    "end": "619980"
  },
  {
    "text": "next is the namespace lifecycle",
    "start": "619980",
    "end": "622930"
  },
  {
    "text": "controller is called the lifecycle",
    "start": "622930",
    "end": "624070"
  },
  {
    "text": "controller but actually all it does is",
    "start": "624070",
    "end": "625240"
  },
  {
    "text": "delete things inside a namespace when",
    "start": "625240",
    "end": "626710"
  },
  {
    "text": "the namespace goes into the deletion",
    "start": "626710",
    "end": "628870"
  },
  {
    "text": "phase",
    "start": "628870",
    "end": "630910"
  },
  {
    "text": "next is the like actual garbage",
    "start": "630910",
    "end": "633280"
  },
  {
    "text": "collector and and I'll spend a minute on",
    "start": "633280",
    "end": "636340"
  },
  {
    "text": "this one because this is really great it",
    "start": "636340",
    "end": "639010"
  },
  {
    "text": "frees your regular controllers from",
    "start": "639010",
    "end": "641260"
  },
  {
    "text": "having to tear down the structures that",
    "start": "641260",
    "end": "642580"
  },
  {
    "text": "they make because you set up the the",
    "start": "642580",
    "end": "644590"
  },
  {
    "text": "parent pointers on your objects there's",
    "start": "644590",
    "end": "646720"
  },
  {
    "text": "a there's a metadata field and then the",
    "start": "646720",
    "end": "648460"
  },
  {
    "text": "garbage collector is just sits there and",
    "start": "648460",
    "end": "649690"
  },
  {
    "text": "watches and when the the parent objects",
    "start": "649690",
    "end": "651460"
  },
  {
    "text": "go away it'll it'll delete the child",
    "start": "651460",
    "end": "652990"
  },
  {
    "text": "objects and free up your whole hiring or",
    "start": "652990",
    "end": "655960"
  },
  {
    "text": "hierarchy for you if you've looked at",
    "start": "655960",
    "end": "657760"
  },
  {
    "text": "like the I don't know replica set code",
    "start": "657760",
    "end": "660340"
  },
  {
    "text": "or deployment code before we added the",
    "start": "660340",
    "end": "662560"
  },
  {
    "text": "garbage collector like it actually is a",
    "start": "662560",
    "end": "664210"
  },
  {
    "text": "significant amount of work to clean up",
    "start": "664210",
    "end": "665620"
  },
  {
    "text": "everything correctly so this this is",
    "start": "665620",
    "end": "667120"
  },
  {
    "text": "this is great please use it in your own",
    "start": "667120",
    "end": "669790"
  },
  {
    "text": "controllers yeah okay so next we have",
    "start": "669790",
    "end": "674020"
  },
  {
    "text": "this triplet of certificate signing",
    "start": "674020",
    "end": "676180"
  },
  {
    "text": "request controllers in this first one",
    "start": "676180",
    "end": "680560"
  },
  {
    "text": "these these three controllers work",
    "start": "680560",
    "end": "682270"
  },
  {
    "text": "together to provide a feature and that",
    "start": "682270",
    "end": "686320"
  },
  {
    "text": "is signed certificates so like user",
    "start": "686320",
    "end": "689350"
  },
  {
    "text": "makes a certificate signing request and",
    "start": "689350",
    "end": "690940"
  },
  {
    "text": "then various things happen to it and",
    "start": "690940",
    "end": "693010"
  },
  {
    "text": "this first controller that I'll talk",
    "start": "693010",
    "end": "694090"
  },
  {
    "text": "about is the is the CSR cleaner that",
    "start": "694090",
    "end": "696400"
  },
  {
    "text": "basically deletes certificates CSRs",
    "start": "696400",
    "end": "699190"
  },
  {
    "text": "after they've expired or yeah that's",
    "start": "699190",
    "end": "702700"
  },
  {
    "text": "really they've expired whether or not",
    "start": "702700",
    "end": "704320"
  },
  {
    "text": "they were signed the these controllers",
    "start": "704320",
    "end": "707230"
  },
  {
    "text": "are really good examples of the like do",
    "start": "707230",
    "end": "708670"
  },
  {
    "text": "only one thing principle so yeah okay",
    "start": "708670",
    "end": "712930"
  },
  {
    "text": "next up is a pair the persistent volume",
    "start": "712930",
    "end": "715720"
  },
  {
    "text": "and persistent volume claim protection",
    "start": "715720",
    "end": "718000"
  },
  {
    "text": "controllers we have this tool in",
    "start": "718000",
    "end": "720370"
  },
  {
    "text": "kubernetes the finalizar",
    "start": "720370",
    "end": "721660"
  },
  {
    "text": "how many of you have heard of a",
    "start": "721660",
    "end": "723190"
  },
  {
    "text": "finalizar okay good about finalizar is a",
    "start": "723190",
    "end": "728260"
  },
  {
    "text": "basically you put a tag on an object and",
    "start": "728260",
    "end": "730420"
  },
  {
    "text": "the object can't be removed from the",
    "start": "730420",
    "end": "732220"
  },
  {
    "text": "system until something else comes and",
    "start": "732220",
    "end": "733780"
  },
  {
    "text": "removes that tag right it's called the",
    "start": "733780",
    "end": "735040"
  },
  {
    "text": "finalizar so the persistent volume",
    "start": "735040",
    "end": "739079"
  },
  {
    "text": "controller and claim controllers they",
    "start": "739200",
    "end": "741640"
  },
  {
    "text": "set up these tags because you you have a",
    "start": "741640",
    "end": "742990"
  },
  {
    "text": "matching volume and claim these have",
    "start": "742990",
    "end": "745390"
  },
  {
    "text": "these have references to each other we",
    "start": "745390",
    "end": "746890"
  },
  {
    "text": "don't want to remove one and leave the",
    "start": "746890",
    "end": "748600"
  },
  {
    "text": "other one dangling so this puts",
    "start": "748600",
    "end": "749920"
  },
  {
    "text": "finalized errs on both and won't remove",
    "start": "749920",
    "end": "752200"
  },
  {
    "text": "the finalizar until like they've been",
    "start": "752200",
    "end": "753910"
  },
  {
    "text": "cleaned up properly right so it's a way",
    "start": "753910",
    "end": "755650"
  },
  {
    "text": "of adding some referential integrity",
    "start": "755650",
    "end": "758580"
  },
  {
    "text": "let's see yes the TTL after finished",
    "start": "758580",
    "end": "761920"
  },
  {
    "text": "controller is basically a time-based",
    "start": "761920",
    "end": "764440"
  },
  {
    "text": "garbage collector right now it only",
    "start": "764440",
    "end": "766300"
  },
  {
    "text": "works on jobs",
    "start": "766300",
    "end": "767170"
  },
  {
    "text": "I think there's plans to extend it into",
    "start": "767170",
    "end": "769570"
  },
  {
    "text": "and to make it more generic in the",
    "start": "769570",
    "end": "771310"
  },
  {
    "text": "future okay so that's it for garbage",
    "start": "771310",
    "end": "776140"
  },
  {
    "text": "collectors",
    "start": "776140",
    "end": "777180"
  },
  {
    "text": "I'm sure you are ready for something",
    "start": "777180",
    "end": "779310"
  },
  {
    "text": "else this is the replica set controller",
    "start": "779310",
    "end": "781800"
  },
  {
    "text": "which i think is like the first like",
    "start": "781800",
    "end": "783210"
  },
  {
    "text": "really true controller it's exactly like",
    "start": "783210",
    "end": "785400"
  },
  {
    "text": "a thermostat like you can get make it",
    "start": "785400",
    "end": "787170"
  },
  {
    "text": "make less pods make more pods yeah but",
    "start": "787170",
    "end": "790500"
  },
  {
    "text": "this is like the first thing you see",
    "start": "790500",
    "end": "792630"
  },
  {
    "text": "when you learn kubernetes so I'm sure",
    "start": "792630",
    "end": "793710"
  },
  {
    "text": "you all know about this one so let's go",
    "start": "793710",
    "end": "797160"
  },
  {
    "text": "to the deployment which is a little bit",
    "start": "797160",
    "end": "798600"
  },
  {
    "text": "more interesting I think of this one as",
    "start": "798600",
    "end": "800040"
  },
  {
    "text": "like a a thermostat programming robot",
    "start": "800040",
    "end": "801990"
  },
  {
    "text": "right he says it's like the where the",
    "start": "801990",
    "end": "804840"
  },
  {
    "text": "replica set automates like keeping the",
    "start": "804840",
    "end": "806550"
  },
  {
    "text": "collection alive the deployment",
    "start": "806550",
    "end": "807990"
  },
  {
    "text": "automates like rolling between two",
    "start": "807990",
    "end": "809940"
  },
  {
    "text": "collections right so it's like it's like",
    "start": "809940",
    "end": "812310"
  },
  {
    "text": "a robot that turns down one and turns up",
    "start": "812310",
    "end": "814050"
  },
  {
    "text": "the other okay and a similar one is the",
    "start": "814050",
    "end": "818160"
  },
  {
    "text": "horizontal pod autoscaler which reads",
    "start": "818160",
    "end": "821160"
  },
  {
    "text": "metrics about pods and uses that to",
    "start": "821160",
    "end": "823320"
  },
  {
    "text": "decide like do I need more of these",
    "start": "823320",
    "end": "824940"
  },
  {
    "text": "things or less of these things like are",
    "start": "824940",
    "end": "826200"
  },
  {
    "text": "they loaded or not and you can work on",
    "start": "826200",
    "end": "828630"
  },
  {
    "text": "resources that support the scale step",
    "start": "828630",
    "end": "830250"
  },
  {
    "text": "resource so again it's like a generic",
    "start": "830250",
    "end": "832590"
  },
  {
    "text": "like if you if you if you use the if you",
    "start": "832590",
    "end": "837390"
  },
  {
    "text": "use the thing this this HPA can scale",
    "start": "837390",
    "end": "839940"
  },
  {
    "text": "your collection and finally is the",
    "start": "839940",
    "end": "843510"
  },
  {
    "text": "modern office final or not for this",
    "start": "843510",
    "end": "845610"
  },
  {
    "text": "group but this is the cluster autoscaler",
    "start": "845610",
    "end": "847530"
  },
  {
    "text": "and basically if you've got unscheduled",
    "start": "847530",
    "end": "850530"
  },
  {
    "text": "pods it will it will add nodes I think",
    "start": "850530",
    "end": "854790"
  },
  {
    "text": "it's not available in all cloud",
    "start": "854790",
    "end": "855690"
  },
  {
    "text": "providers there's no reason you can't",
    "start": "855690",
    "end": "857880"
  },
  {
    "text": "write one and this is this is under the",
    "start": "857880",
    "end": "860460"
  },
  {
    "text": "theory like is there too much water you",
    "start": "860460",
    "end": "861690"
  },
  {
    "text": "pool you can solve the problem by making",
    "start": "861690",
    "end": "863160"
  },
  {
    "text": "your pool bigger okay so the second set",
    "start": "863160",
    "end": "869040"
  },
  {
    "text": "of controllers is the standing standing",
    "start": "869040",
    "end": "871170"
  },
  {
    "text": "query or the the table joint and we're",
    "start": "871170",
    "end": "875700"
  },
  {
    "text": "just gonna dive right in this is the in",
    "start": "875700",
    "end": "877920"
  },
  {
    "text": "points controller which is I think maybe",
    "start": "877920",
    "end": "880410"
  },
  {
    "text": "the first controller that was written",
    "start": "880410",
    "end": "881910"
  },
  {
    "text": "after the after like the controller",
    "start": "881910",
    "end": "884040"
  },
  {
    "text": "infrastructure got up to got up to the",
    "start": "884040",
    "end": "886170"
  },
  {
    "text": "modern concepts with like an informer",
    "start": "886170",
    "end": "887850"
  },
  {
    "text": "and stuff and it basically watches",
    "start": "887850",
    "end": "889950"
  },
  {
    "text": "services watches pods like matches the",
    "start": "889950",
    "end": "891810"
  },
  {
    "text": "two up and writes in points and then the",
    "start": "891810",
    "end": "895980"
  },
  {
    "text": "end points feed into like the the dns",
    "start": "895980",
    "end": "898320"
  },
  {
    "text": "resolution and and",
    "start": "898320",
    "end": "900850"
  },
  {
    "text": "the cute proxy components so that you",
    "start": "900850",
    "end": "903670"
  },
  {
    "text": "can get you can access the other thing",
    "start": "903670",
    "end": "906430"
  },
  {
    "text": "the deposit implement the surface okay",
    "start": "906430",
    "end": "909250"
  },
  {
    "text": "next up I've got a pair that work very",
    "start": "909250",
    "end": "911139"
  },
  {
    "text": "similarly these are the controllers are",
    "start": "911139",
    "end": "913990"
  },
  {
    "text": "the pod disruption the disruption",
    "start": "913990",
    "end": "916360"
  },
  {
    "text": "controller and the resource resource",
    "start": "916360",
    "end": "919329"
  },
  {
    "text": "quota controller and they both work by",
    "start": "919329",
    "end": "922089"
  },
  {
    "text": "observing things and updating a status",
    "start": "922089",
    "end": "924130"
  },
  {
    "text": "and then they have a API server",
    "start": "924130",
    "end": "926199"
  },
  {
    "text": "component that acts on that so the",
    "start": "926199",
    "end": "928660"
  },
  {
    "text": "disruption budget account spot",
    "start": "928660",
    "end": "930430"
  },
  {
    "text": "disruptions like getting evicted or",
    "start": "930430",
    "end": "933009"
  },
  {
    "text": "something like that and I think I",
    "start": "933009",
    "end": "935620"
  },
  {
    "text": "labeled it an admission plugin but it's",
    "start": "935620",
    "end": "936819"
  },
  {
    "text": "actually a sub resource the evict sub",
    "start": "936819",
    "end": "938380"
  },
  {
    "text": "resource looks at that thing to know",
    "start": "938380",
    "end": "940000"
  },
  {
    "text": "like is it safe to perform another",
    "start": "940000",
    "end": "941470"
  },
  {
    "text": "disruption on this pot the resource",
    "start": "941470",
    "end": "944350"
  },
  {
    "text": "quota does something very similar it's",
    "start": "944350",
    "end": "947620"
  },
  {
    "text": "like the the easiest one to explain is",
    "start": "947620",
    "end": "949779"
  },
  {
    "text": "just counting things right like you put",
    "start": "949779",
    "end": "951339"
  },
  {
    "text": "a resource quota object in that says you",
    "start": "951339",
    "end": "952959"
  },
  {
    "text": "can only have 100 pods and it like",
    "start": "952959",
    "end": "954699"
  },
  {
    "text": "counts up the pods and says okay you've",
    "start": "954699",
    "end": "956889"
  },
  {
    "text": "got 99 so that the admission plug-in can",
    "start": "956889",
    "end": "960730"
  },
  {
    "text": "act on it and know whether it's safe to",
    "start": "960730",
    "end": "962290"
  },
  {
    "text": "add another pod I mentioned these",
    "start": "962290",
    "end": "964660"
  },
  {
    "text": "because they are an example of a",
    "start": "964660",
    "end": "966939"
  },
  {
    "text": "controller working with a admission",
    "start": "966939",
    "end": "969490"
  },
  {
    "text": "plug-in to provide some sort of safety",
    "start": "969490",
    "end": "972839"
  },
  {
    "text": "something about the about the cluster",
    "start": "972839",
    "end": "974889"
  },
  {
    "text": "they're doing things that you can't do",
    "start": "974889",
    "end": "976540"
  },
  {
    "text": "in an admission plugin because you don't",
    "start": "976540",
    "end": "978790"
  },
  {
    "text": "want to do a you don't want to do a",
    "start": "978790",
    "end": "981430"
  },
  {
    "text": "linear scan over all the resources in",
    "start": "981430",
    "end": "983259"
  },
  {
    "text": "the cluster before admitting a pod right",
    "start": "983259",
    "end": "985000"
  },
  {
    "text": "you need to catch that that's what these",
    "start": "985000",
    "end": "986410"
  },
  {
    "text": "controllers are for and next up we have",
    "start": "986410",
    "end": "989949"
  },
  {
    "text": "the CSR again this is the CSR approver",
    "start": "989949",
    "end": "992430"
  },
  {
    "text": "if a CSR comes in and it is from a node",
    "start": "992430",
    "end": "996279"
  },
  {
    "text": "this thing approves it why do we why did",
    "start": "996279",
    "end": "999040"
  },
  {
    "text": "we do it this way it's so that you can",
    "start": "999040",
    "end": "1001680"
  },
  {
    "text": "use the system with sources other than",
    "start": "1001680",
    "end": "1003569"
  },
  {
    "text": "nodes so you like you can as a human you",
    "start": "1003569",
    "end": "1006029"
  },
  {
    "text": "like you can make a CSR and you could",
    "start": "1006029",
    "end": "1008279"
  },
  {
    "text": "have like maybe your system",
    "start": "1008279",
    "end": "1009240"
  },
  {
    "text": "administrator could could approve it all",
    "start": "1009240",
    "end": "1011310"
  },
  {
    "text": "right so the controller is like it",
    "start": "1011310",
    "end": "1013259"
  },
  {
    "text": "approves the CSR that it knows about but",
    "start": "1013259",
    "end": "1015930"
  },
  {
    "text": "you can use the system for other things",
    "start": "1015930",
    "end": "1017339"
  },
  {
    "text": "and the this particular CSR Singh",
    "start": "1017339",
    "end": "1021060"
  },
  {
    "text": "question is we're getting cubed access",
    "start": "1021060",
    "end": "1023639"
  },
  {
    "text": "tokens to to API server so can so can",
    "start": "1023639",
    "end": "1026159"
  },
  {
    "text": "participate next up another part of the",
    "start": "1026159",
    "end": "1030240"
  },
  {
    "text": "auth system is the cluster role",
    "start": "1030240",
    "end": "1032010"
  },
  {
    "text": "aggregation",
    "start": "1032010",
    "end": "1033579"
  },
  {
    "text": "and and so cluster roll is part of the",
    "start": "1033579",
    "end": "1036220"
  },
  {
    "text": "our back system and you can put in a",
    "start": "1036220",
    "end": "1040000"
  },
  {
    "text": "list of rules like like this roll like",
    "start": "1040000",
    "end": "1042308"
  },
  {
    "text": "the the reader of the viewer it can like",
    "start": "1042309",
    "end": "1044620"
  },
  {
    "text": "get pods say and and but it's not nice",
    "start": "1044620",
    "end": "1050650"
  },
  {
    "text": "if you have to like somebody adds adds a",
    "start": "1050650",
    "end": "1054160"
  },
  {
    "text": "C or D and they're like well really I",
    "start": "1054160",
    "end": "1055860"
  },
  {
    "text": "the author of the roll didn't know about",
    "start": "1055860",
    "end": "1058090"
  },
  {
    "text": "my C or D so how can this work we have",
    "start": "1058090",
    "end": "1060370"
  },
  {
    "text": "this we have this it basically takes a",
    "start": "1060370",
    "end": "1063420"
  },
  {
    "text": "selector and it looks up cluster wolves",
    "start": "1063420",
    "end": "1068230"
  },
  {
    "text": "that match the selector and copies them",
    "start": "1068230",
    "end": "1069730"
  },
  {
    "text": "into the the cluster role with a",
    "start": "1069730",
    "end": "1072880"
  },
  {
    "text": "selector right so it can either have a",
    "start": "1072880",
    "end": "1074020"
  },
  {
    "text": "rule list or a selectors like copy rules",
    "start": "1074020",
    "end": "1076270"
  },
  {
    "text": "from these guys",
    "start": "1076270",
    "end": "1077559"
  },
  {
    "text": "this one I think III would say it's it's",
    "start": "1077559",
    "end": "1081370"
  },
  {
    "text": "maybe not the best example of the of the",
    "start": "1081370",
    "end": "1084580"
  },
  {
    "text": "like it uses its input and output",
    "start": "1084580",
    "end": "1086559"
  },
  {
    "text": "location is the same I think it's a",
    "start": "1086559",
    "end": "1088840"
  },
  {
    "text": "little confusing so III would recommend",
    "start": "1088840",
    "end": "1092350"
  },
  {
    "text": "like if you're going to learn something",
    "start": "1092350",
    "end": "1094390"
  },
  {
    "text": "from it learn like maybe maybe this",
    "start": "1094390",
    "end": "1096040"
  },
  {
    "text": "would have been better as like a two",
    "start": "1096040",
    "end": "1097120"
  },
  {
    "text": "step object okay next up are the",
    "start": "1097120",
    "end": "1102520"
  },
  {
    "text": "injection or by Jackson enforcers and",
    "start": "1102520",
    "end": "1105640"
  },
  {
    "text": "I'm probably gonna use the word",
    "start": "1105640",
    "end": "1106660"
  },
  {
    "text": "injection just because I don't want any",
    "start": "1106660",
    "end": "1108250"
  },
  {
    "text": "math majors to come give me a hard time",
    "start": "1108250",
    "end": "1110080"
  },
  {
    "text": "afterwards safer first up is the daemon",
    "start": "1110080",
    "end": "1113920"
  },
  {
    "text": "set which is maybe just the classic",
    "start": "1113920",
    "end": "1116830"
  },
  {
    "text": "example of this like a demon set is like",
    "start": "1116830",
    "end": "1118840"
  },
  {
    "text": "this is a node description this is a pot",
    "start": "1118840",
    "end": "1120790"
  },
  {
    "text": "description and then the controller all",
    "start": "1120790",
    "end": "1123190"
  },
  {
    "text": "nodes that match the label it adds a pod",
    "start": "1123190",
    "end": "1126460"
  },
  {
    "text": "all nodes that don't match the label and",
    "start": "1126460",
    "end": "1128830"
  },
  {
    "text": "make sure that this pod doesn't exist",
    "start": "1128830",
    "end": "1130120"
  },
  {
    "text": "there right so it's a section and saris",
    "start": "1130120",
    "end": "1137950"
  },
  {
    "text": "a lot of talking this is a service",
    "start": "1137950",
    "end": "1140110"
  },
  {
    "text": "account controller and this is this is",
    "start": "1140110",
    "end": "1142450"
  },
  {
    "text": "it's very simple like it sees a season",
    "start": "1142450",
    "end": "1144760"
  },
  {
    "text": "name space makes a default service",
    "start": "1144760",
    "end": "1147190"
  },
  {
    "text": "account in there like literally a",
    "start": "1147190",
    "end": "1148210"
  },
  {
    "text": "service account named default and this",
    "start": "1148210",
    "end": "1152320"
  },
  {
    "text": "has a sibling controller which sees a",
    "start": "1152320",
    "end": "1156040"
  },
  {
    "text": "service account and it makes secrets",
    "start": "1156040",
    "end": "1158800"
  },
  {
    "text": "with a token that has like an API access",
    "start": "1158800",
    "end": "1161290"
  },
  {
    "text": "token adds a reference to the service",
    "start": "1161290",
    "end": "1163660"
  },
  {
    "text": "account like this is all this is all in",
    "start": "1163660",
    "end": "1165970"
  },
  {
    "text": "service of getting your",
    "start": "1165970",
    "end": "1166909"
  },
  {
    "text": "pod running in the cluster and API",
    "start": "1166909",
    "end": "1168679"
  },
  {
    "text": "access token so it can make calls to API",
    "start": "1168679",
    "end": "1170299"
  },
  {
    "text": "server this is this is what drives that",
    "start": "1170299",
    "end": "1171919"
  },
  {
    "text": "under the hood so it makes the secrets",
    "start": "1171919",
    "end": "1175519"
  },
  {
    "text": "and puts a list into the server's",
    "start": "1175519",
    "end": "1177499"
  },
  {
    "text": "accounts so that we can rotate the",
    "start": "1177499",
    "end": "1178700"
  },
  {
    "text": "secrets so that's why it's a list or not",
    "start": "1178700",
    "end": "1180349"
  },
  {
    "text": "just a single one so this is maybe I",
    "start": "1180349",
    "end": "1185509"
  },
  {
    "text": "don't know this is maybe the most",
    "start": "1185509",
    "end": "1187849"
  },
  {
    "text": "entertaining header of any file in the",
    "start": "1187849",
    "end": "1189649"
  },
  {
    "text": "kubernetes codebase is the the",
    "start": "1189649",
    "end": "1191799"
  },
  {
    "text": "persistent volume binder it's got this",
    "start": "1191799",
    "end": "1194950"
  },
  {
    "text": "very entertaining blob about how it's",
    "start": "1194950",
    "end": "1197299"
  },
  {
    "text": "written in space-shuttle style and all",
    "start": "1197299",
    "end": "1199489"
  },
  {
    "text": "branches are considered and so this is",
    "start": "1199489",
    "end": "1202849"
  },
  {
    "text": "not a good example of the like the do",
    "start": "1202849",
    "end": "1204320"
  },
  {
    "text": "only one thing because it does like four",
    "start": "1204320",
    "end": "1206059"
  },
  {
    "text": "things but it is a great example of",
    "start": "1206059",
    "end": "1210399"
  },
  {
    "text": "considering all of the possible effects",
    "start": "1210399",
    "end": "1212929"
  },
  {
    "text": "and being writing a really good",
    "start": "1212929",
    "end": "1214399"
  },
  {
    "text": "controller that that like all states",
    "start": "1214399",
    "end": "1217399"
  },
  {
    "text": "that the cluster can be in are handled",
    "start": "1217399",
    "end": "1218929"
  },
  {
    "text": "by this controller successfully and and",
    "start": "1218929",
    "end": "1221869"
  },
  {
    "text": "it works well so I can't complain about",
    "start": "1221869",
    "end": "1223519"
  },
  {
    "text": "it it's a it basically matches up like",
    "start": "1223519",
    "end": "1227779"
  },
  {
    "text": "you make a persistent volume claim we",
    "start": "1227779",
    "end": "1229789"
  },
  {
    "text": "have to find a volume to to bind to the",
    "start": "1229789",
    "end": "1231859"
  },
  {
    "text": "claim it finds a volume buts but you can",
    "start": "1231859",
    "end": "1234799"
  },
  {
    "text": "actually like the system can allocate",
    "start": "1234799",
    "end": "1236330"
  },
  {
    "text": "volumes volumes for you so then you have",
    "start": "1236330",
    "end": "1239809"
  },
  {
    "text": "to allocate the volume in the",
    "start": "1239809",
    "end": "1240970"
  },
  {
    "text": "availability zone where the pot is going",
    "start": "1240970",
    "end": "1244159"
  },
  {
    "text": "to schedule so it's like does this dance",
    "start": "1244159",
    "end": "1246320"
  },
  {
    "text": "with a label with the scheduler it works",
    "start": "1246320",
    "end": "1250629"
  },
  {
    "text": "okay and now we have a sequence on what",
    "start": "1250629",
    "end": "1253190"
  },
  {
    "text": "I call the the candy wrappers they're",
    "start": "1253190",
    "end": "1255619"
  },
  {
    "text": "like a bisection of or an injection of",
    "start": "1255619",
    "end": "1257989"
  },
  {
    "text": "one one thing basically and the so see",
    "start": "1257989",
    "end": "1260779"
  },
  {
    "text": "us are signing like every time it sees a",
    "start": "1260779",
    "end": "1263090"
  },
  {
    "text": "we're gonna go through pass through",
    "start": "1263090",
    "end": "1264470"
  },
  {
    "text": "these every time it sees a CSR that is",
    "start": "1264470",
    "end": "1266899"
  },
  {
    "text": "approved it signs it the node the sorry",
    "start": "1266899",
    "end": "1272929"
  },
  {
    "text": "the TTL controller which is the the name",
    "start": "1272929",
    "end": "1277220"
  },
  {
    "text": "is not helpful it's actually managing",
    "start": "1277220",
    "end": "1279049"
  },
  {
    "text": "how long nodes will cache secrets and",
    "start": "1279049",
    "end": "1281599"
  },
  {
    "text": "config maps based on the cluster side it",
    "start": "1281599",
    "end": "1283909"
  },
  {
    "text": "just er sighs it's just every node",
    "start": "1283909",
    "end": "1285739"
  },
  {
    "text": "object in the cluster it sets an",
    "start": "1285739",
    "end": "1286789"
  },
  {
    "text": "annotation the node IPAM controller sets",
    "start": "1286789",
    "end": "1292039"
  },
  {
    "text": "up the IP address ranges for pods that",
    "start": "1292039",
    "end": "1294470"
  },
  {
    "text": "go into that node maybe it gets it from",
    "start": "1294470",
    "end": "1296059"
  },
  {
    "text": "the cloud provider the node lifecycle",
    "start": "1296059",
    "end": "1299149"
  },
  {
    "text": "controller",
    "start": "1299149",
    "end": "1300320"
  },
  {
    "text": "it observes conditions on the node and",
    "start": "1300320",
    "end": "1302870"
  },
  {
    "text": "sets taints which like keep pods from",
    "start": "1302870",
    "end": "1305840"
  },
  {
    "text": "scheduling and also if the node goes to",
    "start": "1305840",
    "end": "1308330"
  },
  {
    "text": "unhealthy it will evict the pods like if",
    "start": "1308330",
    "end": "1310370"
  },
  {
    "text": "the if the node isn't around to like",
    "start": "1310370",
    "end": "1312049"
  },
  {
    "text": "manage itself we have to have a backup",
    "start": "1312049",
    "end": "1313370"
  },
  {
    "text": "controller come in and and manage things",
    "start": "1313370",
    "end": "1315470"
  },
  {
    "text": "for it and I will point out at this one",
    "start": "1315470",
    "end": "1318530"
  },
  {
    "text": "it's a good example of like bridging",
    "start": "1318530",
    "end": "1321169"
  },
  {
    "text": "like understanding the no conditions and",
    "start": "1321169",
    "end": "1323330"
  },
  {
    "text": "turning those into a set of things at",
    "start": "1323330",
    "end": "1324650"
  },
  {
    "text": "this that the scheduler can understand",
    "start": "1324650",
    "end": "1326000"
  },
  {
    "text": "right",
    "start": "1326000",
    "end": "1326360"
  },
  {
    "text": "so the scheduler doesn't have to",
    "start": "1326360",
    "end": "1327559"
  },
  {
    "text": "understand like like low disk state or",
    "start": "1327559",
    "end": "1330950"
  },
  {
    "text": "something on the on the node it can just",
    "start": "1330950",
    "end": "1332960"
  },
  {
    "text": "look at the tank the cloud node",
    "start": "1332960",
    "end": "1336770"
  },
  {
    "text": "controller is for initializing nodes",
    "start": "1336770",
    "end": "1339970"
  },
  {
    "text": "they come up with the cloud taint this",
    "start": "1339970",
    "end": "1342049"
  },
  {
    "text": "thing takes it off and it puts cloud",
    "start": "1342049",
    "end": "1344179"
  },
  {
    "text": "specific properties on the root",
    "start": "1344179",
    "end": "1347030"
  },
  {
    "text": "publisher is yet another part of the the",
    "start": "1347030",
    "end": "1348890"
  },
  {
    "text": "security process your pod when it comes",
    "start": "1348890",
    "end": "1351350"
  },
  {
    "text": "up it has to be able to trust api server",
    "start": "1351350",
    "end": "1353030"
  },
  {
    "text": "api server presents assert this has the",
    "start": "1353030",
    "end": "1355730"
  },
  {
    "text": "CA that lets the the pod the workloads",
    "start": "1355730",
    "end": "1358309"
  },
  {
    "text": "running in the pod validate that the api",
    "start": "1358309",
    "end": "1360440"
  },
  {
    "text": "service cert is valid and this is this",
    "start": "1360440",
    "end": "1364490"
  },
  {
    "text": "controller makes a config map in every",
    "start": "1364490",
    "end": "1366110"
  },
  {
    "text": "namespace with this CA which can then be",
    "start": "1366110",
    "end": "1368330"
  },
  {
    "text": "mounted into the pod and into the",
    "start": "1368330",
    "end": "1369950"
  },
  {
    "text": "standard location on disk next up is the",
    "start": "1369950",
    "end": "1374030"
  },
  {
    "text": "scheduler which i called the candy",
    "start": "1374030",
    "end": "1377660"
  },
  {
    "text": "wrapper it's maybe the most complicated",
    "start": "1377660",
    "end": "1379540"
  },
  {
    "text": "controller in the system it is a",
    "start": "1379540",
    "end": "1381590"
  },
  {
    "text": "controller I just listed the things that",
    "start": "1381590",
    "end": "1383630"
  },
  {
    "text": "it looks at maybe it looks that more",
    "start": "1383630",
    "end": "1385820"
  },
  {
    "text": "that I didn't see but it is it's it's",
    "start": "1385820",
    "end": "1387980"
  },
  {
    "text": "I'm not gonna explain that here okay",
    "start": "1387980",
    "end": "1392210"
  },
  {
    "text": "we're getting close bear with me there's",
    "start": "1392210",
    "end": "1395990"
  },
  {
    "text": "a lot of controllers this is the",
    "start": "1395990",
    "end": "1398120"
  },
  {
    "text": "scheduled job controller which is like",
    "start": "1398120",
    "end": "1399559"
  },
  {
    "text": "you you give it a job and like a like a",
    "start": "1399559",
    "end": "1402620"
  },
  {
    "text": "frequency and it like just waits for",
    "start": "1402620",
    "end": "1404720"
  },
  {
    "text": "that to come up I like to think of this",
    "start": "1404720",
    "end": "1406130"
  },
  {
    "text": "as injection with the phase of the moon",
    "start": "1406130",
    "end": "1408880"
  },
  {
    "text": "next is job itself which is the",
    "start": "1408880",
    "end": "1413270"
  },
  {
    "text": "injection is complicated the the thing",
    "start": "1413270",
    "end": "1416090"
  },
  {
    "text": "is just running a pod so that's not too",
    "start": "1416090",
    "end": "1417530"
  },
  {
    "text": "complicated but you have to run it in",
    "start": "1417530",
    "end": "1418880"
  },
  {
    "text": "like like you want in total and you can",
    "start": "1418880",
    "end": "1421160"
  },
  {
    "text": "only do em at a time so it's kind of",
    "start": "1421160",
    "end": "1422720"
  },
  {
    "text": "like baking cookies into the oven like",
    "start": "1422720",
    "end": "1424100"
  },
  {
    "text": "you can only fit so many sheets on and",
    "start": "1424100",
    "end": "1425750"
  },
  {
    "text": "maybe sometimes the cookies burn and",
    "start": "1425750",
    "end": "1427720"
  },
  {
    "text": "yeah so that's that's that in contrast",
    "start": "1427720",
    "end": "1430940"
  },
  {
    "text": "to the staple set controller which is",
    "start": "1430940",
    "end": "1433280"
  },
  {
    "text": "more like a babysitter where the the",
    "start": "1433280",
    "end": "1435890"
  },
  {
    "text": "injection is very simple it's like",
    "start": "1435890",
    "end": "1436970"
  },
  {
    "text": "you're going to make you know three of",
    "start": "1436970",
    "end": "1438200"
  },
  {
    "text": "these things or whatever but the thing",
    "start": "1438200",
    "end": "1440059"
  },
  {
    "text": "that you're doing is very complicated",
    "start": "1440059",
    "end": "1441140"
  },
  {
    "text": "because you've got to make a persistent",
    "start": "1441140",
    "end": "1442640"
  },
  {
    "text": "volume claim and a pod and like match",
    "start": "1442640",
    "end": "1444350"
  },
  {
    "text": "them up and like what if they go down",
    "start": "1444350",
    "end": "1445790"
  },
  {
    "text": "and you restart the disorder so yeah",
    "start": "1445790",
    "end": "1447770"
  },
  {
    "text": "that's like that's a complex thing",
    "start": "1447770",
    "end": "1449120"
  },
  {
    "text": "similar to cubelet which is also doing a",
    "start": "1449120",
    "end": "1451700"
  },
  {
    "text": "very complex thing with plugins and the",
    "start": "1451700",
    "end": "1456320"
  },
  {
    "text": "node OS and like it's got a update pod",
    "start": "1456320",
    "end": "1458780"
  },
  {
    "text": "status and node status and read secrets",
    "start": "1458780",
    "end": "1460580"
  },
  {
    "text": "and config maps that's complicated okay",
    "start": "1460580",
    "end": "1463010"
  },
  {
    "text": "almost done this is the the operator",
    "start": "1463010",
    "end": "1467059"
  },
  {
    "text": "pattern you may recognize it from my one",
    "start": "1467059",
    "end": "1469820"
  },
  {
    "text": "of my previous talks and this is this is",
    "start": "1469820",
    "end": "1472700"
  },
  {
    "text": "like how this is like the canonical way",
    "start": "1472700",
    "end": "1474350"
  },
  {
    "text": "from bridging a legacy system and",
    "start": "1474350",
    "end": "1476120"
  },
  {
    "text": "providing an interface that works",
    "start": "1476120",
    "end": "1477440"
  },
  {
    "text": "natively with kubernetes API clients and",
    "start": "1477440",
    "end": "1481490"
  },
  {
    "text": "like we actually have some controllers",
    "start": "1481490",
    "end": "1483290"
  },
  {
    "text": "that are essentially this the first one",
    "start": "1483290",
    "end": "1485120"
  },
  {
    "text": "is the service controller which updates",
    "start": "1485120",
    "end": "1487090"
  },
  {
    "text": "allocate some updates load balancers the",
    "start": "1487090",
    "end": "1491660"
  },
  {
    "text": "route controller programs the network",
    "start": "1491660",
    "end": "1493970"
  },
  {
    "text": "fabric in the in the cloud provider the",
    "start": "1493970",
    "end": "1497450"
  },
  {
    "text": "node life site with a cloud node life",
    "start": "1497450",
    "end": "1499130"
  },
  {
    "text": "cycle provider controller it if your if",
    "start": "1499130",
    "end": "1503600"
  },
  {
    "text": "your node goes unhealthy it checks to",
    "start": "1503600",
    "end": "1506420"
  },
  {
    "text": "see like does the cloud provider still",
    "start": "1506420",
    "end": "1508010"
  },
  {
    "text": "think that this node should exist and if",
    "start": "1508010",
    "end": "1509420"
  },
  {
    "text": "not like maybe I'll just delete it and",
    "start": "1509420",
    "end": "1511940"
  },
  {
    "text": "the no problem detector also falls into",
    "start": "1511940",
    "end": "1513920"
  },
  {
    "text": "this category",
    "start": "1513920",
    "end": "1514580"
  },
  {
    "text": "where it's like observing the operating",
    "start": "1514580",
    "end": "1517070"
  },
  {
    "text": "system on the node and writing",
    "start": "1517070",
    "end": "1519200"
  },
  {
    "text": "corresponding conditions to the to the",
    "start": "1519200",
    "end": "1520730"
  },
  {
    "text": "node object okay that's all of it most",
    "start": "1520730",
    "end": "1526070"
  },
  {
    "text": "of them do you feel ready to write your",
    "start": "1526070",
    "end": "1528080"
  },
  {
    "text": "own controller I really appreciate you",
    "start": "1528080",
    "end": "1531290"
  },
  {
    "text": "coming to this talk I think this is a",
    "start": "1531290",
    "end": "1534140"
  },
  {
    "text": "really fun problem space if you agree",
    "start": "1534140",
    "end": "1535820"
  },
  {
    "text": "we'd love to see you in API machinery",
    "start": "1535820",
    "end": "1537980"
  },
  {
    "text": "some of these controllers are owned by",
    "start": "1537980",
    "end": "1539630"
  },
  {
    "text": "cig apps so KPI sega architecture owns",
    "start": "1539630",
    "end": "1543290"
  },
  {
    "text": "the the overall vision of the system",
    "start": "1543290",
    "end": "1545830"
  },
  {
    "text": "yeah and as always my team is hiring so",
    "start": "1545830",
    "end": "1549440"
  },
  {
    "text": "yeah cool we have time for a few",
    "start": "1549440",
    "end": "1553490"
  },
  {
    "text": "questions",
    "start": "1553490",
    "end": "1554669"
  },
  {
    "text": "Thank You Daniel",
    "start": "1554669",
    "end": "1555130"
  },
  {
    "text": "[Applause]",
    "start": "1555130",
    "end": "1563329"
  },
  {
    "text": "please raise hands who has questions all",
    "start": "1563600",
    "end": "1570059"
  },
  {
    "text": "right",
    "start": "1570059",
    "end": "1571720"
  },
  {
    "text": "there's no questions cuz I said all",
    "start": "1571720",
    "end": "1573279"
  },
  {
    "text": "there is to say about these things right",
    "start": "1573279",
    "end": "1576570"
  },
  {
    "text": "they have to read the code before they",
    "start": "1576990",
    "end": "1579129"
  },
  {
    "text": "ask one yeah then we have Mike's level",
    "start": "1579129",
    "end": "1581500"
  },
  {
    "text": "down is like yeah you got to read a lot",
    "start": "1581500",
    "end": "1582970"
  },
  {
    "text": "of code",
    "start": "1582970",
    "end": "1585240"
  },
  {
    "text": "hi so are the controllers pluggable are",
    "start": "1588670",
    "end": "1593500"
  },
  {
    "text": "the controllers pluggable can you can",
    "start": "1593500",
    "end": "1595450"
  },
  {
    "text": "you add controllers can you remove",
    "start": "1595450",
    "end": "1596860"
  },
  {
    "text": "controllers at will can you choose which",
    "start": "1596860",
    "end": "1599980"
  },
  {
    "text": "controllers you include in the in your",
    "start": "1599980",
    "end": "1602710"
  },
  {
    "text": "queries cluster yeah the question is can",
    "start": "1602710",
    "end": "1605170"
  },
  {
    "text": "you choose which controllers run yeah",
    "start": "1605170",
    "end": "1607780"
  },
  {
    "text": "you can there's a there's a default",
    "start": "1607780",
    "end": "1610540"
  },
  {
    "text": "setting there's a enable flag that which",
    "start": "1610540",
    "end": "1613060"
  },
  {
    "text": "you can choose to disable or enable",
    "start": "1613060",
    "end": "1615330"
  },
  {
    "text": "controllers if you look at the man page",
    "start": "1615330",
    "end": "1618520"
  },
  {
    "text": "on Q controller manager it'll tell you",
    "start": "1618520",
    "end": "1622800"
  },
  {
    "text": "good okay okay",
    "start": "1628410",
    "end": "1638100"
  },
  {
    "text": "more questions",
    "start": "1638100",
    "end": "1641250"
  },
  {
    "text": "was that question there somewhere hmm",
    "start": "1645130",
    "end": "1648520"
  },
  {
    "text": "okay all right thanks everybody like",
    "start": "1648520",
    "end": "1652520"
  },
  {
    "text": "folks need regular Thank You Daniel",
    "start": "1652520",
    "end": "1653840"
  },
  {
    "text": "thanks once again thanks Ariane to come",
    "start": "1653840",
    "end": "1656060"
  },
  {
    "text": "back to this room there will be another",
    "start": "1656060",
    "end": "1657320"
  },
  {
    "text": "talk later on I believe it will be about",
    "start": "1657320",
    "end": "1660370"
  },
  {
    "text": "suicide apply functionality in in about",
    "start": "1660370",
    "end": "1665240"
  },
  {
    "text": "half an hour",
    "start": "1665240",
    "end": "1667720"
  }
]