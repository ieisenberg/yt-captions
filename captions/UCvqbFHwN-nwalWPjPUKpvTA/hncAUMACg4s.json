[
  {
    "text": "if I can see around this curtain I'm going to be talking about security hardening for databases using kubernetes",
    "start": "0",
    "end": "6399"
  },
  {
    "text": "operators uh this is a 25 minute talk uh we've just burned three or four uh",
    "start": "6399",
    "end": "11480"
  },
  {
    "text": "playing around with a uh video problem so I'll try to get through it quickly but without uh sounding like one of",
    "start": "11480",
    "end": "17800"
  },
  {
    "text": "those lawyers on the commercials um yeah so the is it safe I don't know if anybody here saw the marathon man so uh",
    "start": "17800",
    "end": "25039"
  },
  {
    "text": "you probably haven't been to a dentist since then but that's where this title is from um just a little bit about me",
    "start": "25039",
    "end": "30679"
  },
  {
    "text": "I'll introduce more but I work for a company called alinity I am a do Ambassador so I've been working on data",
    "start": "30679",
    "end": "36600"
  },
  {
    "text": "on kubernetes for a number of years and part of the reason for that is my company is a provider for click house uh",
    "start": "36600",
    "end": "44520"
  },
  {
    "text": "both Enterprise support as well as Cloud we let people run it anywhere and we made a decision about 5 years ago at a",
    "start": "44520",
    "end": "52199"
  },
  {
    "text": "time when to me it seemed really stupid to put all of our database uh processing",
    "start": "52199",
    "end": "57600"
  },
  {
    "text": "that we did onto kubernetes that was a we had a big argument about it in fact uh when I was first getting my job which",
    "start": "57600",
    "end": "64518"
  },
  {
    "text": "as a side note is to run the company um and I thought it was the dumbest idea I'd ever heard and I've been working",
    "start": "64519",
    "end": "71040"
  },
  {
    "text": "with databases for a long time um anyway we did it and it worked out great so um",
    "start": "71040",
    "end": "76840"
  },
  {
    "text": "one of the things we've done is we wrote probably the first operator for a data warehouse called the um used to be",
    "start": "76840",
    "end": "83560"
  },
  {
    "text": "called the kubernetes operator but excuse me the the click house operator but now we call it the alterity",
    "start": "83560",
    "end": "88680"
  },
  {
    "text": "kubernetes operator forck house just to be clear about it so that's where our background comes from um so in this talk I'm mostly going",
    "start": "88680",
    "end": "96720"
  },
  {
    "text": "to talk about click house as examples but I want to be absolutely clear that I'm doing that because those are the",
    "start": "96720",
    "end": "102079"
  },
  {
    "text": "ones where I can get code really easily that I know Works uh but everything I'm seeing here applies generally to uh to",
    "start": "102079",
    "end": "108960"
  },
  {
    "text": "database operators and I'll come back to that theme so um first of all I think",
    "start": "108960",
    "end": "114079"
  },
  {
    "text": "everybody in this room probably knows that kubernetes orchestrates container",
    "start": "114079",
    "end": "119439"
  },
  {
    "text": "based applications so the idea is you have um you know in a very simple case",
    "start": "119439",
    "end": "124560"
  },
  {
    "text": "you you know you you have you know like a server in this case it's click house but it could be MySQL postgress",
    "start": "124560",
    "end": "130280"
  },
  {
    "text": "something else it wants to talk to a patch of storage and do useful things for you process transactions process",
    "start": "130280",
    "end": "136480"
  },
  {
    "text": "queries kubernetes uh to set that up what you will do is create a resource model um in our particular case a",
    "start": "136480",
    "end": "143800"
  },
  {
    "text": "stateful set um pod definitions uh persistent volume claims PVS and those",
    "start": "143800",
    "end": "151200"
  },
  {
    "text": "together when they're when they appear on kubernetes kubernetes will of course rearrange the underlying storage to make",
    "start": "151200",
    "end": "156959"
  },
  {
    "text": "the underlying infrastructure to make it true so um for a variety of reasons uh",
    "start": "156959",
    "end": "164720"
  },
  {
    "text": "kubernetes turns out to be an absolutely awesome uh uh platform for database one",
    "start": "164720",
    "end": "170280"
  },
  {
    "text": "of the things is that there's a portability story on on kubernetes that if you need to run in different locations and it's it's not just like",
    "start": "170280",
    "end": "177519"
  },
  {
    "text": "hey you know we might have to be multic Cloud but I'd like to be able to test something on my laptop but also you know",
    "start": "177519",
    "end": "183040"
  },
  {
    "text": "then upload it to you know Amazon eks run it in the cloud uh basically the same description of the application same",
    "start": "183040",
    "end": "189879"
  },
  {
    "text": "configuration roughly will work in both those locations um the problem is that since",
    "start": "189879",
    "end": "196200"
  },
  {
    "text": "kubernetes is a good place or has become a good place to run data that's where people will go if they want to steal it",
    "start": "196200",
    "end": "202200"
  },
  {
    "text": "so we'll talk about what we're going to do is talk about security so um when you dig into the",
    "start": "202200",
    "end": "208680"
  },
  {
    "text": "details of protecting a database and I'm just picking again ours as an example but this could be Cassandra this could",
    "start": "208680",
    "end": "215439"
  },
  {
    "text": "be my SQL with multiple nodes this could be any database you choose it's complicated and ugly um kubernetes is is",
    "start": "215439",
    "end": "223560"
  },
  {
    "text": "a great system but it is not simple and databases are not simple so you combine two not simple things and you have a",
    "start": "223560",
    "end": "230959"
  },
  {
    "text": "fairly um you know sort of a fairly intimidating security problem so one of",
    "start": "230959",
    "end": "236920"
  },
  {
    "text": "the things that I recommend doing is trying to to simplify the problem by Framing it in a way that divides it up",
    "start": "236920",
    "end": "243640"
  },
  {
    "text": "into pieces that you can solve separately so um yes this is the uh the",
    "start": "243640",
    "end": "248920"
  },
  {
    "text": "punchline on that picture um so what we can do is we can think about database",
    "start": "248920",
    "end": "255159"
  },
  {
    "text": "protection on kubernetes is having three parts the first is just protect the database as an application running",
    "start": "255159",
    "end": "261720"
  },
  {
    "text": "inside kubernetes another thing is to protect kubernetes itself so that people",
    "start": "261720",
    "end": "267479"
  },
  {
    "text": "can't get it into it in the first place and that we are not by inserting the database somehow compromising",
    "start": "267479",
    "end": "273240"
  },
  {
    "text": "protections that kubernetes should be offering and then the final thing and this is one that if you haven't dealt",
    "start": "273240",
    "end": "278280"
  },
  {
    "text": "with this before you might forget is protect external data it turns out databases increasingly talk to things",
    "start": "278280",
    "end": "285039"
  },
  {
    "text": "outside of the environment sometimes outside of your uh Cloud uh domain certainly outside of the kubernetes",
    "start": "285039",
    "end": "291120"
  },
  {
    "text": "cluster itself so we need to think about all three of these things in this talk I won't discuss very much about kubernetes",
    "start": "291120",
    "end": "297400"
  },
  {
    "text": "because we don't have a lot of time but uh it's it's mostly standard stuff we'll focus on the mostly on the first and a",
    "start": "297400",
    "end": "303240"
  },
  {
    "text": "little bit on the third so the first thing to achieve",
    "start": "303240",
    "end": "308880"
  },
  {
    "text": "security is just to simplify things as much as possible complicated things are",
    "start": "308880",
    "end": "314479"
  },
  {
    "text": "difficult to predict because your eyes kind of glaze over you will miss things there are different attack surfaces and",
    "start": "314479",
    "end": "321880"
  },
  {
    "text": "one of the things that the the basic one of the reasons that kubernetes is such a great environment for data is because of",
    "start": "321880",
    "end": "327560"
  },
  {
    "text": "the presence of operators and when operators do is they uh create what's",
    "start": "327560",
    "end": "333240"
  },
  {
    "text": "called a custom resource definition that allows you to reduce a potentially",
    "start": "333240",
    "end": "338400"
  },
  {
    "text": "complex database configuration into a few inches of yaml so in this case the",
    "start": "338400",
    "end": "343800"
  },
  {
    "text": "simple case of a server and storage that's like a teeny bit of yaml you know maybe uh 12 lines long something like",
    "start": "343800",
    "end": "349919"
  },
  {
    "text": "that the kubernetes operator is in a type of controller which when that yaml is submitted kubernetes will snag it",
    "start": "349919",
    "end": "357720"
  },
  {
    "text": "recognize that it you know there's an operator that takes care of that because of the resource type and then it'll send",
    "start": "357720",
    "end": "363960"
  },
  {
    "text": "it to the operator which will then look at what's going on out in the world and make it happen how does it do that um again I",
    "start": "363960",
    "end": "371400"
  },
  {
    "text": "think most people here know this it uses reconciliation so you have the definition of the database you have the",
    "start": "371400",
    "end": "377960"
  },
  {
    "text": "resources that are already available in kubernetes and the operator just um",
    "start": "377960",
    "end": "383599"
  },
  {
    "text": "reconciles them makes the stuff that you have in your uh resource definition",
    "start": "383599",
    "end": "388759"
  },
  {
    "text": "match what's on the dis or excuse me on in in the resource definitions that are",
    "start": "388759",
    "end": "394319"
  },
  {
    "text": "uh used by kubernetes to to manipulate infrastructure it's not quite as simple as that because operators also do this",
    "start": "394319",
    "end": "401120"
  },
  {
    "text": "for example in a certain order if we have a bunch of databases and we make it excuse me a bunch of servers and we make",
    "start": "401120",
    "end": "407319"
  },
  {
    "text": "a change that affects all of them we will typically do it like one at a time or maybe in in groups so that we don't",
    "start": "407319",
    "end": "413880"
  },
  {
    "text": "take the whole database down so in that sense an operator is kind of like an experienced administrator who does",
    "start": "413880",
    "end": "420280"
  },
  {
    "text": "things in in the best way so that your applications um are correctly configured",
    "start": "420280",
    "end": "425479"
  },
  {
    "text": "but also don't change in ways that disrupt processing so where this becomes a",
    "start": "425479",
    "end": "431960"
  },
  {
    "text": "really huge win is not for that little one node database but for real databases",
    "start": "431960",
    "end": "437440"
  },
  {
    "text": "which often have a lot of nodes one of our biggest customers runs what they",
    "start": "437440",
    "end": "442639"
  },
  {
    "text": "call the Frankenstein cluster it has 550 servers running in Amazon eks that is a",
    "start": "442639",
    "end": "448960"
  },
  {
    "text": "lot so when you're trying to manage in our own cloud we often manage uh servers",
    "start": "448960",
    "end": "454319"
  },
  {
    "text": "that have dozens of nodes so in this case having this yaml definition that then maps to the uh to the actual",
    "start": "454319",
    "end": "461160"
  },
  {
    "text": "resources means that it's a much the surface that we have to examine and think about protecting is much much",
    "start": "461160",
    "end": "468120"
  },
  {
    "text": "smaller so for me the first you know thing you want to do is is pick an",
    "start": "468120",
    "end": "474360"
  },
  {
    "text": "operator and then you want to then you want to make a decision hey is this thing going to help me with security",
    "start": "474360",
    "end": "480120"
  },
  {
    "text": "so um good operators do have built-in security features and this is just an",
    "start": "480120",
    "end": "485159"
  },
  {
    "text": "example from uh from our click housee operator but many other databases do simple things similar things you know if",
    "start": "485159",
    "end": "492280"
  },
  {
    "text": "you use my SQL if you just install it you can you can actually set it up so that if you log in um as root you'll",
    "start": "492280",
    "end": "500080"
  },
  {
    "text": "just go straight into my SQL there's no password um that's actually bad so a good operator will take those default",
    "start": "500080",
    "end": "507000"
  },
  {
    "text": "accounts and stick a pass on them it might actually write it into a secret so you can find out what it is it'll do",
    "start": "507000",
    "end": "513959"
  },
  {
    "text": "things like restricting that default user to certain IP addresses so that by default it can only for example be uh",
    "start": "513959",
    "end": "520599"
  },
  {
    "text": "accessed by local host or maybe IPS that belong to the cluster and it might do things like secure your Communications",
    "start": "520599",
    "end": "527680"
  },
  {
    "text": "with other databases in the cluster these are things that a good operator will just do out of the",
    "start": "527680",
    "end": "534440"
  },
  {
    "text": "box now that's easy stuff but one of the first things you have to do with um with",
    "start": "534440",
    "end": "540880"
  },
  {
    "text": "databases is actually manage credentials and most databases have a variety of",
    "start": "540880",
    "end": "546519"
  },
  {
    "text": "ways of doing this so we would expect operators to help us with this so in",
    "start": "546519",
    "end": "552120"
  },
  {
    "text": "fact with databases it's not just credentials for users logging into the databases it's also things like uh key",
    "start": "552120",
    "end": "559519"
  },
  {
    "text": "you know sort of uh credentials that are used to uh talk to S3 object storage or talk to kofka things like that so these",
    "start": "559519",
    "end": "566440"
  },
  {
    "text": "are things that we're going to the operator should help us protect and the standard way to manage credentials in in",
    "start": "566440",
    "end": "574680"
  },
  {
    "text": "kubernetes in a secure way is secrets so that's a resource type which is allows",
    "start": "574680",
    "end": "580160"
  },
  {
    "text": "you to pass information between um you know sort of a user who creates this",
    "start": "580160",
    "end": "585279"
  },
  {
    "text": "this resource that you the user being an administrator and the the the process or",
    "start": "585279",
    "end": "590600"
  },
  {
    "text": "the container that actually needs to use it uh during the time that they're passed around they are stored reasonably",
    "start": "590600",
    "end": "596680"
  },
  {
    "text": "securely so that somebody can't see them and and make off with them so what you want to see is some sort of secret",
    "start": "596680",
    "end": "603320"
  },
  {
    "text": "management inside your operator that actually uses these enables you to use these",
    "start": "603320",
    "end": "608399"
  },
  {
    "text": "effectively um and in fact most operators that I have seen do understand Secrets at some level now it didn't used",
    "start": "608399",
    "end": "615320"
  },
  {
    "text": "to be that way but it's it's pretty common so um for example our Operator",
    "start": "615320",
    "end": "620760"
  },
  {
    "text": "just has some built-in Syntax for um for passwords if I create a a secret and the",
    "start": "620760",
    "end": "627000"
  },
  {
    "text": "name of the secret is DB passwords um I just have a little bit of of extra",
    "start": "627000",
    "end": "632600"
  },
  {
    "text": "syntax that's been defined that this operator knows when it sees it in the resource definition will'll say hey I",
    "start": "632600",
    "end": "638680"
  },
  {
    "text": "need to go fetch the password out from from the secret now that's one way to do",
    "start": "638680",
    "end": "644560"
  },
  {
    "text": "it there in fact there's a range of ways that you can you can do this but another thing you want to be able to do is",
    "start": "644560",
    "end": "651399"
  },
  {
    "text": "leverage you know using the operator Leverage The General mechanisms that",
    "start": "651399",
    "end": "656680"
  },
  {
    "text": "click house gives you to manage credentials and one thing that that uh excuse me that uh kubernetes uh gives",
    "start": "656680",
    "end": "663240"
  },
  {
    "text": "you to manage credentials and one of the things that's kind of nice about kubernetes is if you can get in and manipulate the Pod definition you can",
    "start": "663240",
    "end": "671200"
  },
  {
    "text": "pass things in as environmentals and this is a pretty standard way of talking to for example Cloud resources where",
    "start": "671200",
    "end": "677399"
  },
  {
    "text": "you're just going to stick them into environmentals and they will be read by the running process and in this case it",
    "start": "677399",
    "end": "683639"
  },
  {
    "text": "will be able to read S3 storage which is necessary to operate so what that means",
    "start": "683639",
    "end": "689880"
  },
  {
    "text": "is that you you know when you pick the operator you don't want the operator to be kind of like a black box where you",
    "start": "689880",
    "end": "696200"
  },
  {
    "text": "can't control what's going on it's very nice if you can get in and manipulate the Pod definitions that it creates so",
    "start": "696200",
    "end": "703680"
  },
  {
    "text": "that you can inject passwords in whatever way works best for that",
    "start": "703680",
    "end": "709959"
  },
  {
    "text": "process so passwords are sort of the base protection but we still want to",
    "start": "710720",
    "end": "715800"
  },
  {
    "text": "encrypt the communications so that's the next thing we want to look at um databases for many many years have",
    "start": "715800",
    "end": "723440"
  },
  {
    "text": "supported well what used to be SSL encryption but now is typically called TLS so the way that it works is you have",
    "start": "723440",
    "end": "730440"
  },
  {
    "text": "inbound uh connections uh coming from clients so you want to have those TLS",
    "start": "730440",
    "end": "736040"
  },
  {
    "text": "encrypted um another thing that's really important particularly in clusters is to think about the protection of data",
    "start": "736040",
    "end": "741800"
  },
  {
    "text": "moving between the the nodes of the cluster so for example in the case of postgress or or My SQ that might be",
    "start": "741800",
    "end": "750120"
  },
  {
    "text": "replication um you know where one where a secondary is attaching to a primary and and fetching uh fetching data in a",
    "start": "750120",
    "end": "756760"
  },
  {
    "text": "cluster like an analytic database it might be a Federated query that's getting blasted out over 10 servers you",
    "start": "756760",
    "end": "762760"
  },
  {
    "text": "want that to be protected as well or at least have the option for it so the protection mechanism is is universally",
    "start": "762760",
    "end": "770519"
  },
  {
    "text": "the same you're going to have a certificate for the server you're going to have a a matching private key and",
    "start": "770519",
    "end": "777120"
  },
  {
    "text": "then either implicit or explicitly you will have a caert or maybe even a chain",
    "start": "777120",
    "end": "784160"
  },
  {
    "text": "of certificate authority C certificates that allows you to verify the uh the um",
    "start": "784160",
    "end": "791199"
  },
  {
    "text": "the server certificate so you need to get these files out to the server so",
    "start": "791199",
    "end": "796760"
  },
  {
    "text": "that it can so that your database service can actually see them again if your operator um you know you're going",
    "start": "796760",
    "end": "805079"
  },
  {
    "text": "to look for features in the operator that are going to help you do this so",
    "start": "805079",
    "end": "810120"
  },
  {
    "text": "there's two aspects to this and one is first of all since you're now going to be encrypting Communications you want to",
    "start": "810120",
    "end": "817079"
  },
  {
    "text": "make sure that the ports that are encrypted are the only ones that are open so this is another thing that you",
    "start": "817079",
    "end": "822760"
  },
  {
    "text": "don't want to do you don't want to have it's great to encrypt ports but you'd like to close the non-encrypted ones so",
    "start": "822760",
    "end": "827959"
  },
  {
    "text": "that they're just shut off um this is examples of syntax that we use but other",
    "start": "827959",
    "end": "833440"
  },
  {
    "text": "operators have similar ideas they will simply shut down the non-encrypted ports and and not allow them to to",
    "start": "833440",
    "end": "841000"
  },
  {
    "text": "operate but the other thing is to actually get those Sur uh certificates out into position on the file system so",
    "start": "841000",
    "end": "847839"
  },
  {
    "text": "that the server when it starts up can actually see them so the certificate the key the ca Sears as the case may be and",
    "start": "847839",
    "end": "855000"
  },
  {
    "text": "in that case again we can use certificate we can use secrets and this is something where this behavior is is",
    "start": "855000",
    "end": "861160"
  },
  {
    "text": "very well supported in in kubernetes as you can see you know I'm giving these little gray examples of of the secrets",
    "start": "861160",
    "end": "868040"
  },
  {
    "text": "there's simply not very complicated so all you want is an operator that can actually consume these and then it's",
    "start": "868040",
    "end": "874160"
  },
  {
    "text": "easy enough to to create them and Supply them so um it's great to have inflight",
    "start": "874160",
    "end": "883000"
  },
  {
    "text": "data protected that's but that's only half the battle another thing that you want to do is make sure that your the",
    "start": "883000",
    "end": "888959"
  },
  {
    "text": "data that you have in storage in other words that rest is also protected so many databases now",
    "start": "888959",
    "end": "896480"
  },
  {
    "text": "including well obviously proprietary datab databases like Oracle have done this for a long time but most databases",
    "start": "896480",
    "end": "902680"
  },
  {
    "text": "have some form of encryption available within the database itself but there's also a very simple way of doing",
    "start": "902680",
    "end": "909279"
  },
  {
    "text": "encryption at the file system level or at the storage level in kubernetes and I just want to talk about that so um the",
    "start": "909279",
    "end": "916920"
  },
  {
    "text": "first thing is it's important to be crystal clear about how kubernetes allocate storage so probably most people",
    "start": "916920",
    "end": "924360"
  },
  {
    "text": "in here know how uh storage classes work but in a word a storage class defines a",
    "start": "924360",
    "end": "930120"
  },
  {
    "text": "mapping from a a set of properties or basically a name uh for example you know",
    "start": "930120",
    "end": "937040"
  },
  {
    "text": "gp3 encrypted to a particular type of storage which might be Amazon EBS using",
    "start": "937040",
    "end": "943920"
  },
  {
    "text": "gp3 storage type and automatically encrypted so you'll typically Define a",
    "start": "943920",
    "end": "949319"
  },
  {
    "text": "storage class and luckily these are very simple objects and you'll put that into",
    "start": "949319",
    "end": "954399"
  },
  {
    "text": "your cubern you'll insert that into your kubernetes cluster apply it with Cube cuddle minus F and it might be a",
    "start": "954399",
    "end": "961319"
  },
  {
    "text": "document just like this this is pretty typical um this is EBS storage and it",
    "start": "961319",
    "end": "966560"
  },
  {
    "text": "also allows volume expansion another very very handy feature but not necessarily related to um to encryption",
    "start": "966560",
    "end": "973360"
  },
  {
    "text": "but this will ensure that the block the the block storage is actually encrypted out wherever it lives on",
    "start": "973360",
    "end": "980880"
  },
  {
    "text": "EBS and um at that point then if you're using an operator that gives you control",
    "start": "980880",
    "end": "986600"
  },
  {
    "text": "over the storage definition it's very you it's basically a one-word change to",
    "start": "986600",
    "end": "992560"
  },
  {
    "text": "apply this and the key here is that the operator that you're using gives you",
    "start": "992560",
    "end": "997680"
  },
  {
    "text": "control over the volume definitions in such a way that you can leverage these",
    "start": "997680",
    "end": "1002839"
  },
  {
    "text": "existing kubernetes mechanisms in this case storage classes same thing as what I was doing with Secrets the operator",
    "start": "1002839",
    "end": "1009199"
  },
  {
    "text": "allows me to to control how pod definitions are set up so that I can use these these kubernetes",
    "start": "1009199",
    "end": "1017079"
  },
  {
    "text": "features so that's controlling the database itself but it's also useful to think",
    "start": "1017480",
    "end": "1024798"
  },
  {
    "text": "about operational aspects like the code that we're actually running is it is it",
    "start": "1024799",
    "end": "1030280"
  },
  {
    "text": "safe um is it free of uh free of exploits and configuration control and",
    "start": "1030280",
    "end": "1037319"
  },
  {
    "text": "configuration control in security is really important because a lot of",
    "start": "1037319",
    "end": "1042798"
  },
  {
    "text": "handling security is not preventing security problems in the first place",
    "start": "1042799",
    "end": "1048520"
  },
  {
    "text": "place but remediate remediating them quickly and safely when they occur so um",
    "start": "1048520",
    "end": "1055799"
  },
  {
    "text": "let's talk about that for a minute so if you're looking at operators and uh the",
    "start": "1055799",
    "end": "1061960"
  },
  {
    "text": "first thing I like to look at when I when I go out to the repost it's like hey what kind of Bill process do these",
    "start": "1061960",
    "end": "1068000"
  },
  {
    "text": "folks have um this we use for example in our bill process trivia and Docker Scout",
    "start": "1068000",
    "end": "1073880"
  },
  {
    "text": "these are Docker Scout is free trivia is an open- Source um scan scanning tool for containers it's great it runs off",
    "start": "1073880",
    "end": "1080760"
  },
  {
    "text": "the command line it installs in literally in seconds there's no excuse for not running stuff like this in your",
    "start": "1080760",
    "end": "1086919"
  },
  {
    "text": "build pipeline moreover The Operators themselves you can think of them as being a conduit for other code because",
    "start": "1086919",
    "end": "1094120"
  },
  {
    "text": "when they start the database they're going to pull down uh containers that contain the bi uh database images are",
    "start": "1094120",
    "end": "1100720"
  },
  {
    "text": "those things scanned as well so these are things so you want to look at that make sure that there's some sort of",
    "start": "1100720",
    "end": "1105880"
  },
  {
    "text": "scanning that there's some sort of cve management going on and and if you see that then you you feel like okay if",
    "start": "1105880",
    "end": "1112559"
  },
  {
    "text": "there were a problem there's a chance you know it would be it would be detected or there's a way of reporting",
    "start": "1112559",
    "end": "1117840"
  },
  {
    "text": "it and if reported it would be fixed so these are things that and that",
    "start": "1117840",
    "end": "1123400"
  },
  {
    "text": "just goes under the you know sort of the the phrase good development uh hygiene or good security",
    "start": "1123400",
    "end": "1129559"
  },
  {
    "text": "hygiene the other thing that's really important for large systems is to have",
    "start": "1129559",
    "end": "1135360"
  },
  {
    "text": "fairly tight configuration control and what has increasingly Arisen in",
    "start": "1135360",
    "end": "1141120"
  },
  {
    "text": "particularly in the world we work in which is analytics Stacks is that these are large complex services and people",
    "start": "1141120",
    "end": "1148320"
  },
  {
    "text": "are increasingly controlling them using gitops one of the um most interesting",
    "start": "1148320",
    "end": "1153400"
  },
  {
    "text": "developments of the past few years is projects like Argo CD which basically",
    "start": "1153400",
    "end": "1158840"
  },
  {
    "text": "allow you to paper over like Argo CD is has this wonderful property that the",
    "start": "1158840",
    "end": "1164039"
  },
  {
    "text": "complex installations that you have for all these different types of services",
    "start": "1164039",
    "end": "1169080"
  },
  {
    "text": "like grafana like Prometheus like click house like the Click house operator like",
    "start": "1169080",
    "end": "1174799"
  },
  {
    "text": "my SQL which all might have to work together to make an application work grafana or excuse me um Argo CD papers",
    "start": "1174799",
    "end": "1182320"
  },
  {
    "text": "over the differences in the installations allows you to stick them into GitHub and basically just um build",
    "start": "1182320",
    "end": "1190000"
  },
  {
    "text": "the entire application off the code that's sitting in GitHub and not just build it but also be able to change it",
    "start": "1190000",
    "end": "1197240"
  },
  {
    "text": "and have those changes synced out to the deployment in kubernetes this is a really important development and in fact",
    "start": "1197240",
    "end": "1204000"
  },
  {
    "text": "what we find is uh we have a lot of users who are running things on kubernetes themselves and I would say at",
    "start": "1204000",
    "end": "1210039"
  },
  {
    "text": "this point the majority of them are probably using Argo CD there are other projects like flux is how many people",
    "start": "1210039",
    "end": "1215640"
  },
  {
    "text": "are using flux in here how many people are using Argo",
    "start": "1215640",
    "end": "1221000"
  },
  {
    "text": "CD yeah it's pretty it it's it's a great project we're doing a lot of work with it but these are these are things that",
    "start": "1221000",
    "end": "1227440"
  },
  {
    "text": "make that give you the ability then to respond quickly to security problems when they",
    "start": "1227440",
    "end": "1233200"
  },
  {
    "text": "arise so a final thing these are this is a short talk so we're not going too",
    "start": "1233200",
    "end": "1238640"
  },
  {
    "text": "deeply into the details but I think a a final thing when you're protecting databases in kubernetes is not to forget",
    "start": "1238640",
    "end": "1245720"
  },
  {
    "text": "the data those poor bits that go to live outside of kubernetes and in modern",
    "start": "1245720",
    "end": "1251360"
  },
  {
    "text": "databases there are at least three ways that this can happen and that are that actually integral to the operation for",
    "start": "1251360",
    "end": "1258120"
  },
  {
    "text": "first of all is backups if somebody can get your backups and they are not encrypted well they don't have to break",
    "start": "1258120",
    "end": "1263440"
  },
  {
    "text": "in that's uh and particularly backups that are stuck in object storage object storage is wonderful anybody with a",
    "start": "1263440",
    "end": "1269600"
  },
  {
    "text": "network connection can theoretically get to it so you want to think really hard about what's happening to backups",
    "start": "1269600",
    "end": "1275200"
  },
  {
    "text": "because that is your production data another thing is tables particularly in",
    "start": "1275200",
    "end": "1281840"
  },
  {
    "text": "analytic systems are increasingly backed by object storage this enables you to store because the economics are so much",
    "start": "1281840",
    "end": "1288400"
  },
  {
    "text": "better it can be 10 to 15 times cheaper than keeping things on block storage so how is that data protected again if",
    "start": "1288400",
    "end": "1294919"
  },
  {
    "text": "somebody can get in and attack that they have access to your data without even breaking into",
    "start": "1294919",
    "end": "1300640"
  },
  {
    "text": "kubernetes and then the final thing and I think this is one that that people tend to forget about but it we have seen",
    "start": "1300640",
    "end": "1307200"
  },
  {
    "text": "come up is log messages so when you have queries like when a query fails to",
    "start": "1307200",
    "end": "1312919"
  },
  {
    "text": "compile you may get a message which contains the Full syntax of the query that failed if it may include things",
    "start": "1312919",
    "end": "1319159"
  },
  {
    "text": "like um credit card IDs for example if you were selecting uh you know if that",
    "start": "1319159",
    "end": "1324279"
  },
  {
    "text": "were part of the query so there's it's really important to think about where these messages are going and either",
    "start": "1324279",
    "end": "1329559"
  },
  {
    "text": "sanitize them or keep them local within kubernetes um but but at least think",
    "start": "1329559",
    "end": "1336039"
  },
  {
    "text": "about where this data is going to make sure it's not being exfiltrated out of your systems and revealing",
    "start": "1336039",
    "end": "1343360"
  },
  {
    "text": "secrets so speaking of the list you know when you get down to it there's a lot of",
    "start": "1344240",
    "end": "1349720"
  },
  {
    "text": "stuff to to think about it's really not that bad I don't want to scare anybody but there is a good list of things and",
    "start": "1349720",
    "end": "1357279"
  },
  {
    "text": "um I'm not going to go through all of these because you don't want to have to remember this and we thought about this",
    "start": "1357279",
    "end": "1363520"
  },
  {
    "text": "a few months ago and um in the data on kuet uh community and one of the",
    "start": "1363520",
    "end": "1369520"
  },
  {
    "text": "projects we've been working on in a somewhat dister fashion over the last six months is a data on kubernetes",
    "start": "1369520",
    "end": "1376440"
  },
  {
    "text": "community operator security and hardening guide which is now published",
    "start": "1376440",
    "end": "1381960"
  },
  {
    "text": "out in the Sig operator project on the doc GitHub and this has basically a",
    "start": "1381960",
    "end": "1389559"
  },
  {
    "text": "first of all sort of an overview of what the security problem is how to think about framing it some general principles",
    "start": "1389559",
    "end": "1395559"
  },
  {
    "text": "and then just a bunch of practical sort of checklist types of things to look for if you want to protect data on",
    "start": "1395559",
    "end": "1401919"
  },
  {
    "text": "kubernetes and it ranges from everything from hey you know like you know",
    "start": "1401919",
    "end": "1408400"
  },
  {
    "text": "you know clean up default passwords don't have like empty passwords all the way to",
    "start": "1408400",
    "end": "1413640"
  },
  {
    "text": "documentation um you might not think of that as a security feature but you can't protect things you don't understand so",
    "start": "1413640",
    "end": "1420400"
  },
  {
    "text": "that's out there it's ready to go we're uh we have had internal review on this",
    "start": "1420400",
    "end": "1425559"
  },
  {
    "text": "we would love to have people try this out use it you can file PRS log issues",
    "start": "1425559",
    "end": "1431640"
  },
  {
    "text": "uh join us in the do uh C slack workspace you know tell us what we've missed but this is something that we",
    "start": "1431640",
    "end": "1438240"
  },
  {
    "text": "intend to to build on and make it as practical and as down to earth as possible it's kind of the inspiration",
    "start": "1438240",
    "end": "1444200"
  },
  {
    "text": "for this was the oasp um security guide that uh a lot of people have been using for",
    "start": "1444200",
    "end": "1450200"
  },
  {
    "text": "years so that's it um thank you very much good luck if you have questions",
    "start": "1450200",
    "end": "1455279"
  },
  {
    "text": "about this you can NAB me by the caller after this talk you can connect to me on LinkedIn send me email come visit us",
    "start": "1455279",
    "end": "1463000"
  },
  {
    "text": "again in the doc slack workspace we're really friendly we don't bite and we love visitors so thank you very",
    "start": "1463000",
    "end": "1470640"
  },
  {
    "text": "much do we have time for questions oh okay oh got one back",
    "start": "1475039",
    "end": "1482840"
  },
  {
    "text": "there thanks again you're very nice everybody's on so that's very good so I",
    "start": "1483880",
    "end": "1489159"
  },
  {
    "text": "I got a use case where I'm running multiple clusters and they all need to get the same data and a presentation",
    "start": "1489159",
    "end": "1496440"
  },
  {
    "text": "earlier this morning talked about spreading my data across all my clusters in your",
    "start": "1496440",
    "end": "1502360"
  },
  {
    "text": "security best practices here are is any of the supply to multicluster are there words of wisdom how that should be done",
    "start": "1502360",
    "end": "1509000"
  },
  {
    "text": "yeah actually there I think there's two ways that that I two ways I'd point to that are in the implicit in this",
    "start": "1509000",
    "end": "1514600"
  },
  {
    "text": "presentation one is I talk about encrypting things between cluster members so if you have servers in",
    "start": "1514600",
    "end": "1520559"
  },
  {
    "text": "multiple locations they might not necessarily be processing queries but they will be replicating data in which",
    "start": "1520559",
    "end": "1526200"
  },
  {
    "text": "case you you absolutely want to have that encrypted another way to share data is through object storage so you may",
    "start": "1526200",
    "end": "1532039"
  },
  {
    "text": "have multiple clusters in you know multiple database clusters in different kubernetes clusters that are talking to",
    "start": "1532039",
    "end": "1539159"
  },
  {
    "text": "the same data so in that case protecting your access protecting S3 or whatever",
    "start": "1539159",
    "end": "1544679"
  },
  {
    "text": "object storage you're using and ensuring those credentials don't get leaked is another uh Key",
    "start": "1544679",
    "end": "1551520"
  },
  {
    "text": "Practice um I would favor streaming replication anyway um Scout yes is a",
    "start": "1554960",
    "end": "1561320"
  },
  {
    "text": "wonderful concept and very few of the Registries do it the way I would like to see it done do you have a favorite",
    "start": "1561320",
    "end": "1567600"
  },
  {
    "text": "registry um that will scan the image and create risks you have to sign up and we are so",
    "start": "1567600",
    "end": "1575720"
  },
  {
    "text": "boring we're just on Docker Hub still so that's why we're able to use Scout yeah um I personally like trivy because it's",
    "start": "1575720",
    "end": "1583799"
  },
  {
    "text": "so lightweight and it's really quick um what we did find one of the things",
    "start": "1583799",
    "end": "1588880"
  },
  {
    "text": "interesting things we did find is we it's good to run multiple scanners because they tend to give somewhat",
    "start": "1588880",
    "end": "1594600"
  },
  {
    "text": "different answers and uh so that was that was definitely kind of a lesson learned um over the you know over the",
    "start": "1594600",
    "end": "1602159"
  },
  {
    "text": "past couple years is the TR is trivy something we could run in a pipeline yes absolutely yeah yeah it runs it runs",
    "start": "1602159",
    "end": "1608440"
  },
  {
    "text": "right off the command line it's it's the easiest to use um uh trivia it actually has to be in a doer",
    "start": "1608440",
    "end": "1615278"
  },
  {
    "text": "repo does your control ER have uh support for Federated",
    "start": "1615640",
    "end": "1621320"
  },
  {
    "text": "identities oh uh okay so you mean like uh you know like ldap or something like that like oidc in points on the um we",
    "start": "1621320",
    "end": "1628960"
  },
  {
    "text": "don't actually but that is a really really great question so I didn't touch on this but sometimes one of the ways to",
    "start": "1628960",
    "end": "1634080"
  },
  {
    "text": "handle Security is to use these underlying mechanisms like oidc and the key reason for that is they consistent",
    "start": "1634080",
    "end": "1640399"
  },
  {
    "text": "across a bunch of different services this is a real problem with kubernetes is everybody does it a little bit",
    "start": "1640399",
    "end": "1645919"
  },
  {
    "text": "different and I I I need to make a note on that to touch on that in our next",
    "start": "1645919",
    "end": "1653158"
  },
  {
    "text": "talk when you talk about scanning right um does that happen in the operator or",
    "start": "1657200",
    "end": "1663039"
  },
  {
    "text": "where does the valid we do it in we do it through GitHub uh most of our build and test is done in GitHub so we have it",
    "start": "1663039",
    "end": "1669399"
  },
  {
    "text": "in our um in the actions that are used to do builds and so basically if if you",
    "start": "1669399",
    "end": "1675039"
  },
  {
    "text": "know like if we see you know like you know severe you know uh important cves",
    "start": "1675039",
    "end": "1680919"
  },
  {
    "text": "will just stop the process and and so it's like a validating admission it's a",
    "start": "1680919",
    "end": "1686039"
  },
  {
    "text": "valid it's valid validation on the build um you could do it I mean it's the kind of thing you want to do it at you know",
    "start": "1686039",
    "end": "1691840"
  },
  {
    "text": "regular intervals but as long as people are not messing with your software like you have um you know check sums and",
    "start": "1691840",
    "end": "1697159"
  },
  {
    "text": "stuff like that you don't really need to do it again does your I was going to say though um if you're so I didn't talk",
    "start": "1697159",
    "end": "1703440"
  },
  {
    "text": "about protection of kubernetes that's a different matter and like say if you're running an Amazon",
    "start": "1703440",
    "end": "1709519"
  },
  {
    "text": "then you definitely want to be running things like guard Duty which is a really good piece of software or inspector they",
    "start": "1709519",
    "end": "1715960"
  },
  {
    "text": "will keep an eye on what's going on on your you know if somebody's getting in and messing with your kubernetes workers for example so really that's a just",
    "start": "1715960",
    "end": "1724200"
  },
  {
    "text": "kubernetes thing not really handled by your operation exactly it's nothing specific to databases it's just good for",
    "start": "1724200",
    "end": "1729960"
  },
  {
    "text": "protecting",
    "start": "1729960",
    "end": "1732360"
  },
  {
    "text": "kubernetes I'm by the way I'm gratified to see this level of interest because whenever we do security presentations as",
    "start": "1736399",
    "end": "1744279"
  },
  {
    "text": "webinars we get like nine people show up we talk about object storage is 150 so",
    "start": "1744279",
    "end": "1749880"
  },
  {
    "text": "this is really great so when you talked about mounting about giving users the possibility to",
    "start": "1749880",
    "end": "1755919"
  },
  {
    "text": "mount a secret uh we do that as well but I wondered if you have any considerations",
    "start": "1755919",
    "end": "1762120"
  },
  {
    "text": "about the risks that users who are able to configure your click house operator",
    "start": "1762120",
    "end": "1768320"
  },
  {
    "text": "but are not able to see the secrets that they can basically misuse this feature to mount Secrets they should not see",
    "start": "1768320",
    "end": "1775640"
  },
  {
    "text": "into the click house deployments and then that way basically compromise these secrets yeah",
    "start": "1775640",
    "end": "1783320"
  },
  {
    "text": "um we don't assume generally that there are different classes of users inside",
    "start": "1783320",
    "end": "1789840"
  },
  {
    "text": "kubernetes itself what we want to do is try and make it relatively hard for",
    "start": "1789840",
    "end": "1795000"
  },
  {
    "text": "people to like say if somebody like somebody managed to get yeah it's an",
    "start": "1795000",
    "end": "1800279"
  },
  {
    "text": "interesting question um just trying to think what the right answer is",
    "start": "1800279",
    "end": "1808039"
  },
  {
    "text": "um yeah actually I need to I need to think about that one a little bit because the within kubernetes we do",
    "start": "1812000",
    "end": "1819559"
  },
  {
    "text": "ensure that it's more or less protected we just we don't want stuff just lying around where it's easy to find here's",
    "start": "1819559",
    "end": "1825399"
  },
  {
    "text": "the thing if you get if you get onto the Pod you can do you know you can go scan",
    "start": "1825399",
    "end": "1831080"
  },
  {
    "text": "the file system if your keys are sitting there for S3 and that's the example you would just you would just see them and",
    "start": "1831080",
    "end": "1838080"
  },
  {
    "text": "um so but I guess you can go I mean you can go find the stuff that's mounted on",
    "start": "1838080",
    "end": "1843159"
  },
  {
    "text": "on dis and yes you will get to it we're just trying to make it a bit harder for people so Secrets aren't a complete",
    "start": "1843159",
    "end": "1849640"
  },
  {
    "text": "protection that's probably the fairest way to put it and within kubernetes one of the things I don't trust inside",
    "start": "1849640",
    "end": "1856039"
  },
  {
    "text": "kubernetes very much is the ability to you know have different classes of users",
    "start": "1856039",
    "end": "1861320"
  },
  {
    "text": "inside a single cluster with different levels of of protection this is not a very good answer because I really thought it through but it's a it's a",
    "start": "1861320",
    "end": "1867799"
  },
  {
    "text": "really good question I think can we take one more Melissa one more oh",
    "start": "1867799",
    "end": "1874840"
  },
  {
    "text": "yeah thank you so much this this is great to see the level of interest thank you so uh you spoke a lot about uh uh",
    "start": "1874840",
    "end": "1882159"
  },
  {
    "text": "development best practices how to do the bill correctly you also talked about uh operators how to codify some of the",
    "start": "1882159",
    "end": "1888760"
  },
  {
    "text": "stuff so how much of uh uh the end to endend processes code versus process",
    "start": "1888760",
    "end": "1894399"
  },
  {
    "text": "versus systems any comment on that um I think that what you want to think about is having as much configuration of your",
    "start": "1894399",
    "end": "1901760"
  },
  {
    "text": "service be infrastructure is code and stored in GitHub um there are things like here's an example of where maybe",
    "start": "1901760",
    "end": "1909080"
  },
  {
    "text": "you're not so um the stuff that lies outside that for example is um performance settings and",
    "start": "1909080",
    "end": "1915919"
  },
  {
    "text": "things like that and the actual schema uh and the data that you load into the database that's outside of the scope of",
    "start": "1915919",
    "end": "1921399"
  },
  {
    "text": "what we're describing here that's handled through different mechanisms but what what we're talking about here is",
    "start": "1921399",
    "end": "1927399"
  },
  {
    "text": "the base system and sort of the you know the credentials that allow you to hack into it or potentially hack into it and",
    "start": "1927399",
    "end": "1934320"
  },
  {
    "text": "then also encryption which protects data when it's moving between locations or in",
    "start": "1934320",
    "end": "1939399"
  },
  {
    "text": "locations where it might be seen by people who don't have privileges to see which brings me to the part two of the question which is uh the operators you",
    "start": "1939399",
    "end": "1946240"
  },
  {
    "text": "talked about are they usable across databases because no every every every database operator is different There's",
    "start": "1946240",
    "end": "1952159"
  },
  {
    "text": "No in fact one of the things we did in the checklist was we didn't specify how people should protect things",
    "start": "1952159",
    "end": "1958960"
  },
  {
    "text": "but what they should uh protect like hey you know default users put a password on",
    "start": "1958960",
    "end": "1965519"
  },
  {
    "text": "them or protect them so that they somebody cannot just you know come in and and log into them without you know",
    "start": "1965519",
    "end": "1971919"
  },
  {
    "text": "with you know without any defense against them how you do that is up to you because it depends on the database",
    "start": "1971919",
    "end": "1978120"
  },
  {
    "text": "thank you yeah thank you thank thanks again everybody",
    "start": "1978120",
    "end": "1983559"
  }
]