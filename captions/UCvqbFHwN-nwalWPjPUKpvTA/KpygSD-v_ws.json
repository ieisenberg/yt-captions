[
  {
    "start": "0",
    "end": "100000"
  },
  {
    "text": "excited to be here today if it wasn't a parent from my opening slide and/or the name of the talk they're going to be a",
    "start": "60",
    "end": "7259"
  },
  {
    "text": "number of pop-culture references apologies to those of you who don't have the same tastes as me and if you didn't",
    "start": "7259",
    "end": "13889"
  },
  {
    "text": "grow up watching any of this stuff when you see this on these slides come up assume that they're super funny jokes",
    "start": "13889",
    "end": "20070"
  },
  {
    "text": "don't ask the people around you just assume that it's the best joke you've ever heard and laugh hard you don't want",
    "start": "20070",
    "end": "25949"
  },
  {
    "text": "to feel left out so we're going to talk today about how we used kubernetes and the tests to fly",
    "start": "25949",
    "end": "34559"
  },
  {
    "text": "across the police barrier from azor to kubernetes on Google and GK so we've got",
    "start": "34559",
    "end": "44489"
  },
  {
    "text": "Eleanor so again that's the I believe a Ford Mustang I'm not a car guy but it's",
    "start": "44489",
    "end": "49920"
  },
  {
    "text": "I think I've been told it's a beautiful car and in the movie it's the car that",
    "start": "49920",
    "end": "55680"
  },
  {
    "text": "Nicolas Cage is never quite able to steal it's this dream that someday he's going to get it's his white whale that",
    "start": "55680",
    "end": "62940"
  },
  {
    "text": "he just can never do and that's what we want here is how do we avoid lock-in you",
    "start": "62940",
    "end": "70470"
  },
  {
    "text": "know it's this dream but it you know there always seems to be one thing or another that you know forces you to",
    "start": "70470",
    "end": "75960"
  },
  {
    "text": "stick on a specific cloud and this is what the cloud vendors wants you to",
    "start": "75960",
    "end": "81180"
  },
  {
    "text": "think it also made me think of Hotel California by the Eagles you can check",
    "start": "81180",
    "end": "87840"
  },
  {
    "text": "out anytime you like but you can never leave if I had a walk-on song that's",
    "start": "87840",
    "end": "93450"
  },
  {
    "text": "what I wanted to pick but I didn't have that choice so I kind of want to talk about some of the the key reasons that I",
    "start": "93450",
    "end": "100829"
  },
  {
    "start": "100000",
    "end": "100000"
  },
  {
    "text": "think that you know we all got stuck in cloud lock in you know provisioning and auto-scaling if you're using a specific",
    "start": "100829",
    "end": "107070"
  },
  {
    "text": "platform you know a lot of people are using RDS or whatever database platform",
    "start": "107070",
    "end": "113070"
  },
  {
    "text": "because they are scared of hosting their own databases whatever queue you know",
    "start": "113070",
    "end": "118649"
  },
  {
    "text": "it's kind of in the same category as a database how do we how do you handle persistent storage and then the real",
    "start": "118649",
    "end": "125369"
  },
  {
    "text": "gotcha is this network egress you know they let all this data in but they never let it out unless you pay quite the",
    "start": "125369",
    "end": "131520"
  },
  {
    "text": "price all right so we're you know you've picked your Heroku your App Engine your",
    "start": "131520",
    "end": "136870"
  },
  {
    "start": "132000",
    "end": "132000"
  },
  {
    "text": "lambda you know things are going great and you know it's great when you're just",
    "start": "136870",
    "end": "142150"
  },
  {
    "text": "starting up you're saying oh I whether you're a start-up or whether you're just you know and in how skunkworks saying",
    "start": "142150",
    "end": "147879"
  },
  {
    "text": "you know we're just doing a proof-of-concept you know it's I'm sure everyone is experienced you know this",
    "start": "147879",
    "end": "154360"
  },
  {
    "text": "proof of concept that sticks around for a decade and you just it's so hard to",
    "start": "154360",
    "end": "159940"
  },
  {
    "text": "move off same thing you got like all these hosted databases but at one thing",
    "start": "159940",
    "end": "166540"
  },
  {
    "start": "162000",
    "end": "162000"
  },
  {
    "text": "that I think people don't realize is that you're paying on all three of the the main cloud providers exactly twice",
    "start": "166540",
    "end": "173790"
  },
  {
    "text": "what the cost is per hour or per day that you're paying for the equivalent VM",
    "start": "173790",
    "end": "180430"
  },
  {
    "text": "that same size plus you're stuck with whatever options they've chosen to give",
    "start": "180430",
    "end": "185470"
  },
  {
    "text": "you which you know sometimes helps if you don't have you know a DBA but eventually you're probably going to hit",
    "start": "185470",
    "end": "192159"
  },
  {
    "text": "some point where you say oh if I could only enable this thing or that thing or you know the next version of Postgres or",
    "start": "192159",
    "end": "199060"
  },
  {
    "text": "my sequel launched and you know I really wish I could use X feature but it's going to be you know two or three years",
    "start": "199060",
    "end": "205480"
  },
  {
    "text": "before that hits one of these hosted platforms and then Q's I wanted to get",
    "start": "205480",
    "end": "210970"
  },
  {
    "text": "into just kind of real briefly all three of the cloud providers have you know a",
    "start": "210970",
    "end": "216760"
  },
  {
    "text": "similar set up on their queues Amazon has separated it out into SNS it's like",
    "start": "216760",
    "end": "223090"
  },
  {
    "text": "a topic published and then they're sqs that's just a work queue and you can",
    "start": "223090",
    "end": "229180"
  },
  {
    "text": "choose to use one without the other similarly cloud pub/sub has the same",
    "start": "229180",
    "end": "235690"
  },
  {
    "start": "234000",
    "end": "234000"
  },
  {
    "text": "topic and subscriber mentality except it's not optional on pub/sub you",
    "start": "235690",
    "end": "242709"
  },
  {
    "text": "everything is published to a topic that has zero to end subscribers for that and",
    "start": "242709",
    "end": "249299"
  },
  {
    "start": "249000",
    "end": "249000"
  },
  {
    "text": "as there's the only one I haven't actually used but they have their service bus that's the same topic to fan",
    "start": "249299",
    "end": "256810"
  },
  {
    "text": "out to subscriber mentality and then finally we kind of get to this network",
    "start": "256810",
    "end": "262000"
  },
  {
    "start": "260000",
    "end": "260000"
  },
  {
    "text": "egress that can get real expensive I'm not actually sure I didn't make this",
    "start": "262000",
    "end": "268480"
  },
  {
    "text": "chart myself I found it thanks to the Internet and but all the cloud providers",
    "start": "268480",
    "end": "275860"
  },
  {
    "text": "have roughly kind of that same egress costs so let me get going to a little",
    "start": "275860",
    "end": "281590"
  },
  {
    "start": "280000",
    "end": "280000"
  },
  {
    "text": "bit of history about nozzle so what we do is we parse Google we like to say we",
    "start": "281590",
    "end": "286870"
  },
  {
    "text": "when I'm talking to developers I have to say we store Google on Google so we",
    "start": "286870",
    "end": "292630"
  },
  {
    "text": "parse search engine results and then we provide SEO related analytics to big",
    "start": "292630",
    "end": "299170"
  },
  {
    "text": "customers that are looking to understand who's ranking where why they might be ranking and as much metadata as we can",
    "start": "299170",
    "end": "305470"
  },
  {
    "text": "provide about it so from the beginning like I kind of mentioned we did a proof-of-concept on App Engine we're",
    "start": "305470",
    "end": "312280"
  },
  {
    "text": "still in App Engine six years later and then this logo here at the bottom is",
    "start": "312280",
    "end": "319570"
  },
  {
    "text": "cloud tasks which we actually have a it's been amazingly stable so there are",
    "start": "319570",
    "end": "326500"
  },
  {
    "text": "definitely reasons that you know choosing some of these hosted products are great but in our actual codebase the",
    "start": "326500",
    "end": "333010"
  },
  {
    "text": "error for if a message fails to add to cloud tasks it would just omits tasks",
    "start": "333010",
    "end": "339100"
  },
  {
    "text": "are failing the world is ending abandon all hope and luckily we haven't seen",
    "start": "339100",
    "end": "344920"
  },
  {
    "text": "that very often but it's important when you write you have these queues and they're the backbone of your your entire",
    "start": "344920",
    "end": "351220"
  },
  {
    "text": "architecture and the whole assumption is that oh I can just write to cloud tasks",
    "start": "351220",
    "end": "356830"
  },
  {
    "text": "or Kafka or whatever the thing is and that will never fail and so that's an important always a you know a key",
    "start": "356830",
    "end": "362380"
  },
  {
    "text": "component of any infrastructure and then",
    "start": "362380",
    "end": "367420"
  },
  {
    "start": "366000",
    "end": "366000"
  },
  {
    "text": "this is how they really get you when you're startup they come in they have their cloud startup credits all three of",
    "start": "367420",
    "end": "376180"
  },
  {
    "text": "these do the other kind of cloud providers digitalocean provide some as well but that Azure number I don't think",
    "start": "376180",
    "end": "384580"
  },
  {
    "text": "it actually is the case anymore but they're providing this much but this is my what about Bob reference that as we",
    "start": "384580",
    "end": "390820"
  },
  {
    "start": "390000",
    "end": "390000"
  },
  {
    "text": "just swooped in with their bagful of money and they tried to buy my loyalty we had been on App Engine but all of a",
    "start": "390820",
    "end": "397600"
  },
  {
    "text": "sudden Oh 360,000 maybe this is good enough for me to try",
    "start": "397600",
    "end": "403420"
  },
  {
    "text": "Microsoft if it wasn't obvious from the",
    "start": "403420",
    "end": "409930"
  },
  {
    "text": "title to talk it was not so we started",
    "start": "409930",
    "end": "416920"
  },
  {
    "text": "using aks this is a pretty good representation of what it felt like when",
    "start": "416920",
    "end": "424930"
  },
  {
    "text": "we started it was a beta product and so that was to be expected but then for",
    "start": "424930",
    "end": "430450"
  },
  {
    "text": "some reason they said oh it's GA now despite it being exactly the same some",
    "start": "430450",
    "end": "437260"
  },
  {
    "start": "437000",
    "end": "437000"
  },
  {
    "text": "specific things that made us decide to leave aks there was a hundred node limit",
    "start": "437260",
    "end": "442300"
  },
  {
    "text": "which may or may not still exist to this day the docks aren't consistent on that",
    "start": "442300",
    "end": "447900"
  },
  {
    "text": "they also just barely added the ability to have separate node pools which is",
    "start": "447900",
    "end": "452910"
  },
  {
    "text": "particularly important when you want to run a database because you're almost for sure going to want to run a different",
    "start": "452910",
    "end": "458950"
  },
  {
    "text": "node type size and memory configuration than your standard workloads disks would",
    "start": "458950",
    "end": "465610"
  },
  {
    "text": "take forever to mount which meant rolling out any change to Vitesse or to",
    "start": "465610",
    "end": "470830"
  },
  {
    "text": "any stateful sets took forever we actually had a 2-day outage while it was in GA because they just artificially",
    "start": "470830",
    "end": "479260"
  },
  {
    "text": "throttled the CPU on our masters and it took two days for him to figure that out even with a support you know the pro",
    "start": "479260",
    "end": "486100"
  },
  {
    "text": "support contract so that was awesome and then finally kind of the nail last",
    "start": "486100",
    "end": "492640"
  },
  {
    "text": "nail in the coffin was the pricing if you didn't you know lock yourself in was",
    "start": "492640",
    "end": "497860"
  },
  {
    "text": "significantly more and with that node pool a lot of most of our workloads that we run our batch workloads and so the",
    "start": "497860",
    "end": "505660"
  },
  {
    "text": "ability to just use a preemptable node pool and cut our cost seventy percent",
    "start": "505660",
    "end": "510670"
  },
  {
    "text": "and it's a spot instance basically for the AWS users in the room you know",
    "start": "510670",
    "end": "516219"
  },
  {
    "text": "really made a huge impact on our cost without us having to commit to anything so for all those reasons we decided you",
    "start": "516220",
    "end": "522460"
  },
  {
    "text": "know let's get out of Dodge but we weren't exactly sure how we're going to",
    "start": "522460",
    "end": "528760"
  },
  {
    "text": "do it luckily we had kubernetes in Vitesse",
    "start": "528760",
    "end": "535310"
  },
  {
    "text": "that came to the rescue so if we come back to kind of that original you know premise that I had",
    "start": "535310",
    "end": "543310"
  },
  {
    "start": "538000",
    "end": "538000"
  },
  {
    "text": "provisioning and auto-scaling kubernetes is obviously nailed running stateless applications is you know super easy and",
    "start": "543310",
    "end": "550970"
  },
  {
    "text": "you can you know spin up a new cluster pretty much anywhere and that's you know",
    "start": "550970",
    "end": "556160"
  },
  {
    "text": "not that hard of an issue to solve but the tests is really what enabled us to",
    "start": "556160",
    "end": "562160"
  },
  {
    "text": "wholesale migrate and to migrate in 60 minutes by the way I actually watched",
    "start": "562160",
    "end": "567890"
  },
  {
    "text": "gone in 60 seconds to prepare for this talk thinking it was going to provide some you know metaphors or something I",
    "start": "567890",
    "end": "575240"
  },
  {
    "text": "could use but it's not a great movie [Laughter]",
    "start": "575240",
    "end": "582250"
  },
  {
    "text": "in hindsight so but it gave me a great opening slot I was pretty proud of that",
    "start": "582250",
    "end": "588080"
  },
  {
    "text": "one has a non designer and then the combination of kubernetes in the tests",
    "start": "588080",
    "end": "593870"
  },
  {
    "text": "being able to handle some that network egress we are able to zip everything",
    "start": "593870",
    "end": "599090"
  },
  {
    "text": "before set it sending it out that gave us pretty good savings on actually we",
    "start": "599090",
    "end": "604970"
  },
  {
    "text": "are still on our credits so I didn't care about egress to be perfectly honest but that's only if you migrated out",
    "start": "604970",
    "end": "611750"
  },
  {
    "text": "before your credits expire I gave myself an hour so it's I was kind of forced to",
    "start": "611750",
    "end": "617690"
  },
  {
    "text": "be gone in an hour so kubernetes is obviously great but I kind of want to",
    "start": "617690",
    "end": "624320"
  },
  {
    "start": "623000",
    "end": "623000"
  },
  {
    "text": "talk about Vitesse and exactly how its architecture lends itself to this way of",
    "start": "624320",
    "end": "631490"
  },
  {
    "text": "treating your data and handling it in a cloud agnostic way so you start off you have all of your apps that are running",
    "start": "631490",
    "end": "637490"
  },
  {
    "text": "they're you know expected to point at a database which is exactly how the",
    "start": "637490",
    "end": "643220"
  },
  {
    "text": "architecture works you pointed at a load balancer in kubernetes it's just a service and then it points at this VT",
    "start": "643220",
    "end": "651500"
  },
  {
    "text": "gate layer that is a stateless component that will auto scale up and down that's",
    "start": "651500",
    "end": "657170"
  },
  {
    "text": "what presents itself to your application as the actual my sequel interface",
    "start": "657170",
    "end": "663470"
  },
  {
    "text": "it also has a G RPC interface for that but most people will just want to point",
    "start": "663470",
    "end": "668590"
  },
  {
    "text": "at that my sequel protocol and then once you hit this VT gate layer that's where",
    "start": "668590",
    "end": "675710"
  },
  {
    "text": "it makes some of these decisions about what shards specifically to look at if you zoom in here on one of these shards",
    "start": "675710",
    "end": "682130"
  },
  {
    "text": "there's kind of this blue and orange so VT tablet is a component that runs",
    "start": "682130",
    "end": "687700"
  },
  {
    "text": "generally in the same pod as your actual my sequel D process and is what actually",
    "start": "687700",
    "end": "696980"
  },
  {
    "text": "communicates so it's a G RPC internally from VT gate to the VT tablet which then",
    "start": "696980",
    "end": "703130"
  },
  {
    "text": "generally communicates over a localhost UNIX socket into my sequel so you get",
    "start": "703130",
    "end": "708290"
  },
  {
    "text": "pretty low latency there if you do work at a company that feels like no I have",
    "start": "708290",
    "end": "715520"
  },
  {
    "text": "to put this data in a roar or cloud sequel because kubernetes just can't handle stateful workloads it can't also",
    "start": "715520",
    "end": "722270"
  },
  {
    "text": "do that but for kind of the reasons i've said i you really like sugu said in his",
    "start": "722270",
    "end": "728330"
  },
  {
    "text": "keynote you know when you moved to kubernetes don't leave your data behind it and then finally so once you have",
    "start": "728330",
    "end": "735050"
  },
  {
    "text": "your data here your queries route through VT gate they picked the correct shard execute and you know as far as",
    "start": "735050",
    "end": "740750"
  },
  {
    "text": "your application is concerned it's just talking to a giant my sequel instance and then when you actually want to",
    "start": "740750",
    "end": "747170"
  },
  {
    "text": "control sharding or do any cluster operations it should feel very familiar",
    "start": "747170",
    "end": "754130"
  },
  {
    "text": "to anyone with kubernetes there's a topology server that's not all that",
    "start": "754130",
    "end": "759410"
  },
  {
    "text": "different from the kubernetes api server and then a VT control D that",
    "start": "759410",
    "end": "765430"
  },
  {
    "text": "communicates with that and lets you run the test related commands on a sidenote",
    "start": "765430",
    "end": "770770"
  },
  {
    "text": "one of the original contributors to Vitesse who then moved to kubernetes he",
    "start": "770770",
    "end": "776690"
  },
  {
    "text": "actually snuck a commit in that and I think it was more the 1:9 release notes that it is not cube cuddle and he gave",
    "start": "776690",
    "end": "784250"
  },
  {
    "text": "the canonical way to pronounce cube control so it's in the docs and so it's",
    "start": "784250",
    "end": "791300"
  },
  {
    "text": "Canon I'd prefer to not hear cube cuddle ever again",
    "start": "791300",
    "end": "796600"
  },
  {
    "text": "so this is how the test works kind of at a conceptual level from your application",
    "start": "796600",
    "end": "804790"
  },
  {
    "text": "but next I want to talk about you know what does it look like in a multi cloud or a multi region scenario and I",
    "start": "804880",
    "end": "811940"
  },
  {
    "text": "apologize I did not design this slide but I did design this one so Vitesse has",
    "start": "811940",
    "end": "821960"
  },
  {
    "text": "the concept internally that are it's called cells that are going to be you know roughly equivalent to an AZ but",
    "start": "821960",
    "end": "829280"
  },
  {
    "text": "it's just a whatever your data center or your your kind of your blast radius that",
    "start": "829280",
    "end": "836270"
  },
  {
    "text": "you want it to be and then it has a global topology server and actually let me jump back here real quick you'll",
    "start": "836270",
    "end": "843860"
  },
  {
    "text": "notice that this topology server is not in the actual request flow as queries",
    "start": "843860",
    "end": "850010"
  },
  {
    "text": "come in and that's very purposeful because it's built to scale now like",
    "start": "850010",
    "end": "855620"
  },
  {
    "text": "subbu mentioned in the keynote JD comm is hitting thirty five million queries a second on this and for those",
    "start": "855620",
    "end": "862940"
  },
  {
    "text": "of you who have ever run into Etsy D problems that's not what it's it's not",
    "start": "862940",
    "end": "868670"
  },
  {
    "text": "going to do so great if it was in a low latency flow like that so there's this",
    "start": "868670",
    "end": "874160"
  },
  {
    "start": "873000",
    "end": "873000"
  },
  {
    "text": "global topology server helps tie all these local regions together and because",
    "start": "874160",
    "end": "880220"
  },
  {
    "text": "it the test is fully region aware or cell aware it's assuming you get the",
    "start": "880220",
    "end": "886310"
  },
  {
    "text": "kubernetes networking set up correctly it's fairly trivial on the Vitesse side to say okay I have a cell here in Azure",
    "start": "886310",
    "end": "893870"
  },
  {
    "text": "I have a cell needs to failure zones in gke and another thing I didn't mention",
    "start": "893870",
    "end": "902450"
  },
  {
    "text": "so Vitesse is single master so you'll have a master living in one of those cells but you can failover at any point",
    "start": "902450",
    "end": "909860"
  },
  {
    "text": "andrey parent to another one of those and so we sorry let's check in my next",
    "start": "909860",
    "end": "917720"
  },
  {
    "text": "slide so we had a choice about whether we wanted to try and do a zero downtime",
    "start": "917720",
    "end": "926590"
  },
  {
    "text": "movement which is would be full supported in this scenario by simply",
    "start": "926590",
    "end": "931939"
  },
  {
    "text": "reparent omastar over 2g ke and then all rights would be directed there again",
    "start": "931939",
    "end": "937490"
  },
  {
    "text": "assuming you get the multi clustered networking taken care of and then you",
    "start": "937490",
    "end": "943069"
  },
  {
    "text": "just turn down the azure region and your apps don't ever know the difference",
    "start": "943069",
    "end": "948110"
  },
  {
    "text": "so it's pretty fantastic that way and as you're doing those fail overs like I mentioned it's generally a zero downtime",
    "start": "948110",
    "end": "955809"
  },
  {
    "text": "reparent so the database running in",
    "start": "955809",
    "end": "961220"
  },
  {
    "text": "kubernetes is handled but this next one is a feature that's near and dear to my",
    "start": "961220",
    "end": "966439"
  },
  {
    "text": "heart it's the unsung hero that is Vitesse messages that I begged into existence about two and a half years ago because I",
    "start": "966439",
    "end": "974480"
  },
  {
    "start": "967000",
    "end": "967000"
  },
  {
    "text": "thought I was going to migrate much sooner to Vitesse in kubernetes I was actually while HubSpot was at one of the",
    "start": "974480",
    "end": "982639"
  },
  {
    "text": "talks they talked about how HubSpot was running ten terabytes of general log to",
    "start": "982639",
    "end": "987949"
  },
  {
    "text": "try and improve sequel compatibility but apparently I'm a great beggar and I got",
    "start": "987949",
    "end": "993230"
  },
  {
    "text": "Sugo to attack on this much more fun to code the test messages that's much more",
    "start": "993230",
    "end": "999379"
  },
  {
    "text": "fun than increasing sequel compatibility so it's the best",
    "start": "999379",
    "end": "1004720"
  },
  {
    "text": "so all that this queue is so it's functionally pretty similar to the",
    "start": "1004720",
    "end": "1011410"
  },
  {
    "text": "queues that we looked at before there's a topic that will can fan out to subscriptions so here again it's just a",
    "start": "1011410",
    "end": "1019809"
  },
  {
    "text": "my sequel table under the hood which provides a lot of benefits you just make",
    "start": "1019809",
    "end": "1024880"
  },
  {
    "text": "this specific table this is an event stream message table and then has a lot",
    "start": "1024880",
    "end": "1030760"
  },
  {
    "text": "of the fields that you'd expect what time was as scheduled what's the ID the next time it's going",
    "start": "1030760",
    "end": "1036730"
  },
  {
    "text": "to run you know how many times has it retried and then you can actually add on",
    "start": "1036730",
    "end": "1041829"
  },
  {
    "text": "this key space ID attributes data that's what we use internally but you can",
    "start": "1041829",
    "end": "1047350"
  },
  {
    "text": "actually define whatever fields you want that makes sense for your message table",
    "start": "1047350",
    "end": "1052480"
  },
  {
    "text": "and those will all be delivered as a part of it well we choose for tooling purposes to",
    "start": "1052480",
    "end": "1060730"
  },
  {
    "text": "hard-code the specific field so that we can have better tooling that",
    "start": "1060730",
    "end": "1066330"
  },
  {
    "text": "handles all the different data and columns depending on how you feel about",
    "start": "1066330",
    "end": "1073450"
  },
  {
    "text": "foreign keys I love them they make operation a little bit harder but it",
    "start": "1073450",
    "end": "1079480"
  },
  {
    "text": "makes me feel better and less angry at my developers and so warms my heart so",
    "start": "1079480",
    "end": "1086500"
  },
  {
    "text": "you can use foreign keys just like you would anywhere else and then down here in the comment at the bottom this is",
    "start": "1086500",
    "end": "1092020"
  },
  {
    "text": "where you define all of the actual cue attributes that you need to use so the topic here points at the topic that it's",
    "start": "1092020",
    "end": "1099520"
  },
  {
    "text": "subscribed to the Vitesse message lets you know that this is a message table",
    "start": "1099520",
    "end": "1105429"
  },
  {
    "text": "and has received special treatment by the Vitesse message manager and then some your act timeouts how long you want",
    "start": "1105429",
    "end": "1113950"
  },
  {
    "text": "your attention to be and some other things so it's very simple to set up and again it's a very simple my sequel world",
    "start": "1113950",
    "end": "1121990"
  },
  {
    "text": "you're living in which is completely vendor agnostic and I see a lot of",
    "start": "1121990",
    "end": "1127299"
  },
  {
    "start": "1122000",
    "end": "1122000"
  },
  {
    "text": "people you know they kind of reflexively want to reach for Kafka or reach for gnats or something that's kind of a",
    "start": "1127299",
    "end": "1133030"
  },
  {
    "text": "dedicated message server which you know those are can be great technologies but",
    "start": "1133030",
    "end": "1140740"
  },
  {
    "text": "at the same time now you've introduced a new stateful component into your setup and now you have to have someone that",
    "start": "1140740",
    "end": "1146890"
  },
  {
    "text": "understands that or if you're like some organizations you just deploy data",
    "start": "1146890",
    "end": "1152890"
  },
  {
    "text": "sources willy-nilly and you just hope that they don't break because you don't",
    "start": "1152890",
    "end": "1158230"
  },
  {
    "text": "have any internal expertise but by pushing it through the tests you can say",
    "start": "1158230",
    "end": "1163780"
  },
  {
    "text": "okay we know we understand my sequel and we know how to make that scale and by",
    "start": "1163780",
    "end": "1169360"
  },
  {
    "text": "doing that it's amazing when you can rely on a database transaction to both",
    "start": "1169360",
    "end": "1175570"
  },
  {
    "text": "add data to the next cue do whatever data work you need to be done and then act that message back to the cue and it",
    "start": "1175570",
    "end": "1183130"
  },
  {
    "text": "eliminates a whole class of errors that that could pop up from you have an",
    "start": "1183130",
    "end": "1188799"
  },
  {
    "text": "orphaned record because either it got add it to the queue and the ACK failed or you did some data work but then the",
    "start": "1188799",
    "end": "1194470"
  },
  {
    "text": "queue went down by relying on my sequel to enforce that transaction you know that you just don't",
    "start": "1194470",
    "end": "1201249"
  },
  {
    "text": "even have to write cleanup code for all those orphaned records another problem",
    "start": "1201249",
    "end": "1207850"
  },
  {
    "text": "you know with queues that we've seen in the past it's hard to see what you have in your queue it's hard to modify it in",
    "start": "1207850",
    "end": "1213610"
  },
  {
    "text": "case something got added and it's just sequel you can wreak you something with",
    "start": "1213610",
    "end": "1219279"
  },
  {
    "text": "a simple update statement you can you don't have to write some code to loop through and see what data you have in",
    "start": "1219279",
    "end": "1225789"
  },
  {
    "text": "there it's just sequel and even if you need to manipulate the data that's in there if it's something that can be expressed in",
    "start": "1225789",
    "end": "1232149"
  },
  {
    "text": "sequel you can just make it happen and so I think that the test messages is",
    "start": "1232149",
    "end": "1237929"
  },
  {
    "text": "probably the best thing in the world so",
    "start": "1237929",
    "end": "1242970"
  },
  {
    "start": "1242000",
    "end": "1242000"
  },
  {
    "text": "now I wanted to dive into okay now that we kind of have this background on the",
    "start": "1242970",
    "end": "1248470"
  },
  {
    "text": "tests you know how did we use that to get back to GK so like I mentioned we",
    "start": "1248470",
    "end": "1253659"
  },
  {
    "text": "have these two options we could have figured out the cross cluster networking done a zero downtime like I mentioned",
    "start": "1253659",
    "end": "1261070"
  },
  {
    "text": "most of and actually all of the workloads at that time we were running we're a batch and so taking a little bit",
    "start": "1261070",
    "end": "1267429"
  },
  {
    "text": "of downtime was an okay choice for us and seemed a lot simpler than trying to",
    "start": "1267429",
    "end": "1272679"
  },
  {
    "text": "figure out this cross cluster networking when it was just going to be a temporary solution I'm also not a network guy so",
    "start": "1272679",
    "end": "1281049"
  },
  {
    "text": "we decided okay all we have to do is take a backup on a KS turn things down",
    "start": "1281049",
    "end": "1286840"
  },
  {
    "text": "and restore on GK so to make sure that",
    "start": "1286840",
    "end": "1292179"
  },
  {
    "start": "1289000",
    "end": "1289000"
  },
  {
    "text": "we minimized that downtime as much as possible all we had to do was we spun up",
    "start": "1292179",
    "end": "1297489"
  },
  {
    "text": "our gke cluster we set up those dedicated node pools that we never had on a KS we just deployed all the exact",
    "start": "1297489",
    "end": "1306519"
  },
  {
    "text": "same internal applications though just they block on the DB connection and so",
    "start": "1306519",
    "end": "1311739"
  },
  {
    "text": "they never start and then we also we use nginx ingress cert manager and external",
    "start": "1311739",
    "end": "1317649"
  },
  {
    "text": "DNS to manage all of that for us and we'll see in a minute how that kind of",
    "start": "1317649",
    "end": "1323399"
  },
  {
    "text": "helps us to helped us to migrate pretty seamlessly and without having",
    "start": "1323399",
    "end": "1329320"
  },
  {
    "text": "to do a lot of the dirty work ourselves it's been back on the AKS side we scaled",
    "start": "1329320",
    "end": "1334990"
  },
  {
    "start": "1331000",
    "end": "1331000"
  },
  {
    "text": "down all of our applications and kicked off the back up to GCSE so a side note",
    "start": "1334990",
    "end": "1341350"
  },
  {
    "text": "when we were going the other way and moving our 20 terabytes over from Google",
    "start": "1341350",
    "end": "1347320"
  },
  {
    "text": "to Asher we did it a few times and we were struggled to get that back up taken",
    "start": "1347320",
    "end": "1355389"
  },
  {
    "text": "transferred over and then boot it up and running have a running my sequel",
    "start": "1355389",
    "end": "1361330"
  },
  {
    "text": "instance on the other side in less than seven days mostly because it just takes",
    "start": "1361330",
    "end": "1366909"
  },
  {
    "text": "time to you know work at these big chunks where Vitesse has a philosophy of",
    "start": "1366909",
    "end": "1373769"
  },
  {
    "text": "250 gigabyte shards give or take it's not a technical limitation but it means",
    "start": "1373769",
    "end": "1380289"
  },
  {
    "text": "that you can generally backup and restore within about 15 minutes since we",
    "start": "1380289",
    "end": "1386769"
  },
  {
    "text": "were crossing clouds we gave we knew we were probably to take a little bit longer and so the it was night and day",
    "start": "1386769",
    "end": "1396220"
  },
  {
    "text": "the whole transition experience we also shut down external DNS for those of you",
    "start": "1396220",
    "end": "1402669"
  },
  {
    "text": "haven't used it you just set up some ingress annotations external DNS watches",
    "start": "1402669",
    "end": "1408070"
  },
  {
    "text": "those and they integrate with whatever DNS provider you're using and they point",
    "start": "1408070",
    "end": "1416259"
  },
  {
    "text": "you at whatever the load bouncer IP address is for the load balancer the",
    "start": "1416259",
    "end": "1421929"
  },
  {
    "text": "nginx ingress so we're coming through since we were deploying it on the GK Eastside we turned it down here so that",
    "start": "1421929",
    "end": "1429070"
  },
  {
    "text": "we didn't have a race condition of them both trying to handle those same DNS",
    "start": "1429070",
    "end": "1435429"
  },
  {
    "text": "entries and if you aren't trying to if you don't have any external consumers and you're okay switching you know your",
    "start": "1435429",
    "end": "1442720"
  },
  {
    "text": "DNS entries it does have the ability to you can kind of set a prefix so you can",
    "start": "1442720",
    "end": "1449980"
  },
  {
    "text": "say okay this is my aks external DNS manager and my gke and that keeps them from clobbering each",
    "start": "1449980",
    "end": "1457029"
  },
  {
    "text": "other but in our case we wanted our external and kind of our legacy",
    "start": "1457029",
    "end": "1462370"
  },
  {
    "text": "application that were pointed in at the cluster to not know the difference and to not have to do a redeploy I had a point at the",
    "start": "1462370",
    "end": "1469239"
  },
  {
    "text": "new DNS entry and so we did want the new cluster to clobber the original so then",
    "start": "1469239",
    "end": "1477909"
  },
  {
    "start": "1477000",
    "end": "1477000"
  },
  {
    "text": "on the gke side we had to bootstrap things like I mentioned I'm not in that CD expert and I thought to myself I",
    "start": "1477909",
    "end": "1485289"
  },
  {
    "text": "wonder it if I can just pretend that that didn't exist and just let the test",
    "start": "1485289",
    "end": "1490779"
  },
  {
    "text": "bootstrap itself it's pretty good at it and so I first tried I didn't actually",
    "start": "1490779",
    "end": "1495879"
  },
  {
    "text": "even take a backup or move that global topology server so what I did is I",
    "start": "1495879",
    "end": "1502779"
  },
  {
    "text": "deployed after the that backup had finished we deployed the Vitesse helmet art but only with one replicas per",
    "start": "1502779",
    "end": "1509919"
  },
  {
    "text": "tablet that makes it easier for you'll see here later now we run this tablet",
    "start": "1509919",
    "end": "1516879"
  },
  {
    "text": "externally repented to choose the master for every single shard and that process",
    "start": "1516879",
    "end": "1523330"
  },
  {
    "text": "itself bootstrap to the global topology server and then when we scaled up the",
    "start": "1523330",
    "end": "1529179"
  },
  {
    "text": "replicas they were able to query that topology server and then auto joined and the test set up all the replication for",
    "start": "1529179",
    "end": "1536529"
  },
  {
    "text": "those new replicas back to the master and you know when that was done I kind of thought to myself it just worked it's",
    "start": "1536529",
    "end": "1545679"
  },
  {
    "text": "That moment when you kind of you were prepping for like this long battle and then it didn't happen and it just feels",
    "start": "1545679",
    "end": "1552309"
  },
  {
    "text": "too easy and I was just thinking that",
    "start": "1552309",
    "end": "1559749"
  },
  {
    "text": "something was gonna go wrong the only thing that did go wrong was also side note I saw a service when I",
    "start": "1559749",
    "end": "1567700"
  },
  {
    "text": "was actually deploying that home chart but I was like I wrote the helm chart and I was like I don't know why I put",
    "start": "1567700",
    "end": "1573159"
  },
  {
    "text": "this in there I probably don't need it so I took it out and it didn't work so",
    "start": "1573159",
    "end": "1579389"
  },
  {
    "text": "when you are doing big migrations don't change your configuration should be",
    "start": "1579389",
    "end": "1585700"
  },
  {
    "text": "obvious but I like to take risks I guess so honorable mentions to the ingress",
    "start": "1585700",
    "end": "1594190"
  },
  {
    "start": "1591000",
    "end": "1591000"
  },
  {
    "text": "controller cert manager an external DNS for make that you know not having to manage all",
    "start": "1594190",
    "end": "1599889"
  },
  {
    "text": "those certs everything happens over SSL happened through those same DNS entries and on Google cloud most of those",
    "start": "1599889",
    "end": "1608370"
  },
  {
    "text": "provisioning steps for these happened within seconds two minutes compared to",
    "start": "1608370",
    "end": "1613990"
  },
  {
    "text": "the you know tens of minutes two hours that we sometimes saw in aks so some",
    "start": "1613990",
    "end": "1621070"
  },
  {
    "start": "1619000",
    "end": "1619000"
  },
  {
    "text": "future you know thoughts like if you did want to run multi cloud or even multi region you know again as far as the test",
    "start": "1621070",
    "end": "1629110"
  },
  {
    "text": "is concerned it doesn't particularly care if you're in a separate region or you're in a different cloud as long as",
    "start": "1629110",
    "end": "1635710"
  },
  {
    "text": "your networking is set up and all the components can talk to each other so",
    "start": "1635710",
    "end": "1641159"
  },
  {
    "text": "there's a couple of cool things there was a talk before given by g10 in deep",
    "start": "1641159",
    "end": "1646779"
  },
  {
    "text": "fee about GDP our concerns and you can actually set up your Vitesse charting",
    "start": "1646779",
    "end": "1653110"
  },
  {
    "text": "strategy to be country or jurisdiction aware and that provides some pretty cool",
    "start": "1653110",
    "end": "1661350"
  },
  {
    "text": "opportunities to lower your Layton sees so that your clusters will all talk to",
    "start": "1661350",
    "end": "1667269"
  },
  {
    "text": "their local masters so you're not waiting for those reads or writes to go",
    "start": "1667269",
    "end": "1674200"
  },
  {
    "text": "across the globe back to wherever you're kind of home cluster is but you because",
    "start": "1674200",
    "end": "1679240"
  },
  {
    "text": "my sequel does asynchronous replication you can still put some for safety put",
    "start": "1679240",
    "end": "1685630"
  },
  {
    "text": "some other tablets out in those other regions so if in the case that a region went down you'd be safe and you'd be",
    "start": "1685630",
    "end": "1692950"
  },
  {
    "text": "able to automatically fail over and have a master and basically not have as long",
    "start": "1692950",
    "end": "1700059"
  },
  {
    "text": "as your failover process is good from the Vitesse side you wouldn't have any downtime and then on the the network",
    "start": "1700059",
    "end": "1707529"
  },
  {
    "text": "egress side my sequel does do compress replication and so if your actual",
    "start": "1707529",
    "end": "1712899"
  },
  {
    "text": "applications are able to talk to their local versions of the tests you only have to pay that cross region or that",
    "start": "1712899",
    "end": "1720190"
  },
  {
    "text": "network egress once in a compressed fashion as it replicates out to the",
    "start": "1720190",
    "end": "1726250"
  },
  {
    "text": "various cells or regions but then all application reads and writes after that",
    "start": "1726250",
    "end": "1732230"
  },
  {
    "text": "point would be local to the zone or cluster there's a lot of pretty awesome",
    "start": "1732230",
    "end": "1740179"
  },
  {
    "text": "things that Vitesse enables and again like I mentioned once you do have that set up it's pretty easy to reparent",
    "start": "1740179",
    "end": "1746809"
  },
  {
    "text": "anywhere you want another possibility",
    "start": "1746809",
    "end": "1751910"
  },
  {
    "text": "cockroach DB actually has an interesting follow the workload feature where you",
    "start": "1751910",
    "end": "1757910"
  },
  {
    "text": "kind of watch where the bulk of your rights and it kind of generally follows the Sun as you go through business hours",
    "start": "1757910",
    "end": "1764059"
  },
  {
    "text": "throughout the world so it'd be pretty trivial to then kind",
    "start": "1764059",
    "end": "1769190"
  },
  {
    "text": "of move your master around between these multi cloud or multi region clusters so that the bulk of your operations the",
    "start": "1769190",
    "end": "1776240"
  },
  {
    "text": "master is closest to wherever those are happening so anyhow thanks everyone for",
    "start": "1776240",
    "end": "1782120"
  },
  {
    "text": "coming it was a blast like I said it was almost scarily easy to move across",
    "start": "1782120",
    "end": "1788059"
  },
  {
    "text": "clouds luckily it did take only an hour because my bill was about to come due",
    "start": "1788059",
    "end": "1794030"
  },
  {
    "text": "and I was not wanting to pay Azhar any money any questions please for the",
    "start": "1794030",
    "end": "1815630"
  },
  {
    "text": "recording how much data did you move it",
    "start": "1815630",
    "end": "1821840"
  },
  {
    "text": "was about 20 terabytes thanks any other",
    "start": "1821840",
    "end": "1827030"
  },
  {
    "text": "questions don't be shy",
    "start": "1827030",
    "end": "1831909"
  },
  {
    "text": "um you said it everything took one hour to move how many work hours for",
    "start": "1841430",
    "end": "1846570"
  },
  {
    "text": "preparation or that did take should have taken more I should have practiced I",
    "start": "1846570",
    "end": "1852060"
  },
  {
    "text": "didn't so the reality was it was one hyper stress filled hour I don't know",
    "start": "1852060",
    "end": "1859530"
  },
  {
    "text": "how many hours it took off my life sure",
    "start": "1859530",
    "end": "1867020"
  },
  {
    "text": "it's like a princess bride not to fifty there's something like that",
    "start": "1869900",
    "end": "1876350"
  },
  {
    "text": "hi we have 24 by 7 operation if we need to",
    "start": "1877820",
    "end": "1883020"
  },
  {
    "text": "do this multi cloud migration is it possible to do because I noticed you actually took down the AKS I float back",
    "start": "1883020",
    "end": "1890490"
  },
  {
    "text": "up ya know it definitely can be done like I mentioned as long as you're the",
    "start": "1890490",
    "end": "1897030"
  },
  {
    "text": "network is connected you can just all you would have to do is you can spin up",
    "start": "1897030",
    "end": "1902850"
  },
  {
    "text": "asynchronously your tablets in the new cluster of the new region or a new cloud",
    "start": "1902850",
    "end": "1908460"
  },
  {
    "text": "and once those are caught up to master you just do reparent accustomed we just",
    "start": "1908460",
    "end": "1917580"
  },
  {
    "text": "didn't want to spend the time to set that up but for someone that does have a 24/7 workload it definitely supports",
    "start": "1917580",
    "end": "1925500"
  },
  {
    "text": "that how big of a pipe was did you have",
    "start": "1925500",
    "end": "1930690"
  },
  {
    "text": "to enable between a KS and GK in 60 minutes I don't know I just copied so",
    "start": "1930690",
    "end": "1939420"
  },
  {
    "text": "the backup the test backups they by default right - there's an integration",
    "start": "1939420",
    "end": "1944520"
  },
  {
    "text": "to send it to GCS or to s3 and so it was",
    "start": "1944520",
    "end": "1949530"
  },
  {
    "text": "I think we have 50 shards at the time that we're all independent Lee writing",
    "start": "1949530",
    "end": "1956250"
  },
  {
    "text": "to GCSE so I don't know what those exact",
    "start": "1956250",
    "end": "1961530"
  },
  {
    "text": "limitations are but it was big enough okay all right thanks any other",
    "start": "1961530",
    "end": "1971679"
  },
  {
    "text": "questions all right if you have other questions you can come up to the front",
    "start": "1971679",
    "end": "1977559"
  },
  {
    "text": "afterwards thank you everyone for coming thanks everybody [Applause]",
    "start": "1977559",
    "end": "1983360"
  }
]