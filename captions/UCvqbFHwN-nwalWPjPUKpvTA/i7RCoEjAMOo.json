[
  {
    "text": "hey everyone good morning let me start slides um first of all welcome to the",
    "start": "280",
    "end": "7439"
  },
  {
    "text": "day one of cuon and welcome to my talk Journey Through",
    "start": "7439",
    "end": "12759"
  },
  {
    "text": "Time understanding the provisions and resource ver and um I'll start with an introduction",
    "start": "12759",
    "end": "20199"
  },
  {
    "text": "to me U my name is pranka and I'm from India I work at Su as a ucation engineer",
    "start": "20199",
    "end": "27679"
  },
  {
    "text": "and I'm also for to my cycle um and I'm",
    "start": "27679",
    "end": "33559"
  },
  {
    "text": "also a technical for special interest for contary experence so what are we going to",
    "start": "33559",
    "end": "40160"
  },
  {
    "text": "explore today um this St is going to discuss um this whole thing about how",
    "start": "40160",
    "end": "46360"
  },
  {
    "text": "resource versions in is objects Mars down to something called revisions in",
    "start": "46360",
    "end": "53440"
  },
  {
    "text": "and that is going to be our discussion for this particular talk what are the",
    "start": "53440",
    "end": "58920"
  },
  {
    "text": "visions how um we take enre from Visions",
    "start": "58920",
    "end": "64680"
  },
  {
    "text": "all the way toce so uh starting with is this is how",
    "start": "64680",
    "end": "72840"
  },
  {
    "text": "like this is from documentation and",
    "start": "72840",
    "end": "78240"
  },
  {
    "text": "that's there here for this particular what I",
    "start": "78240",
    "end": "83920"
  },
  {
    "text": "mention is every time we interact with the only component we can interact",
    "start": "83920",
    "end": "90360"
  },
  {
    "text": "directly with ap either we are doing it to C client or VI manage C or maybe",
    "start": "90360",
    "end": "99159"
  },
  {
    "text": "using programming language s uh what we are doing is we are sending rest apis",
    "start": "99159",
    "end": "104399"
  },
  {
    "text": "and those rest apis apis are going to the API server and every time there is a",
    "start": "104399",
    "end": "109719"
  },
  {
    "text": "change in the cluster that change is in a persistent storage there called in",
    "start": "109719",
    "end": "116320"
  },
  {
    "text": "this particular case it could be pluged with another storage",
    "start": "116320",
    "end": "121840"
  },
  {
    "text": "there so for this talk we going to talk about and what is ET is a distributed",
    "start": "121840",
    "end": "129759"
  },
  {
    "text": "reliable key Value Store uh for the most critical data distributed system um in",
    "start": "129759",
    "end": "135680"
  },
  {
    "text": "this case we are talking about kubernetes at the as the distributed System case so for this talk we'll",
    "start": "135680",
    "end": "143959"
  },
  {
    "text": "travel all the way from a kuus object here I have a screenshot",
    "start": "143959",
    "end": "151760"
  },
  {
    "text": "fromy next repy and I'm trying to get out form we move all the way from",
    "start": "152959",
    "end": "159879"
  },
  {
    "text": "understanding where is this resource version coming from and going back to exactly where it's coming from is exity",
    "start": "159879",
    "end": "167000"
  },
  {
    "text": "so this is going to be the discussion let's start with what are",
    "start": "167000",
    "end": "172519"
  },
  {
    "text": "exion so revisions acts as a snapshot for object State Valu for example inent",
    "start": "172519",
    "end": "180239"
  },
  {
    "text": "it is every time uh we are creating any um resource objects or we are modifying",
    "start": "180239",
    "end": "187159"
  },
  {
    "text": "them we are deling them any any kind of uh change that is happening so all those",
    "start": "187159",
    "end": "192239"
  },
  {
    "text": "snapshots for us in the kuber um are stored in the key value store and in",
    "start": "192239",
    "end": "198159"
  },
  {
    "text": "case of they are stored as divisions um divisions are 64bit uh clo",
    "start": "198159",
    "end": "207239"
  },
  {
    "text": "that is maintained by uh ET and and it actually shows um all the values that is",
    "start": "207239",
    "end": "214040"
  },
  {
    "text": "changing the state of so the key u when we are talking about as a key Value",
    "start": "214040",
    "end": "219920"
  },
  {
    "text": "Store the key is the division the global counter that is always implementing so one thing for understand for this",
    "start": "219920",
    "end": "227760"
  },
  {
    "text": "revisions are always implemented um [Applause] so revisions the key and anything that",
    "start": "227760",
    "end": "235360"
  },
  {
    "text": "is changing the state of our key Value Store becomes the value to that ke I",
    "start": "235360",
    "end": "241879"
  },
  {
    "text": "want to show how that data is stored inside ex with an example so this is my",
    "start": "241879",
    "end": "247000"
  },
  {
    "text": "setup I have a local container here running uh from the vietnami image and I'm just exiting",
    "start": "247000",
    "end": "254480"
  },
  {
    "text": "inside that local container um I'm adding few tools here um U just to also",
    "start": "254480",
    "end": "261320"
  },
  {
    "text": "download another tool called J and that is what I'm doing here this",
    "start": "261320",
    "end": "266639"
  },
  {
    "text": "is the I'm using what I'm doing is find taking",
    "start": "266639",
    "end": "271919"
  },
  {
    "text": "um putting it down making ex we have",
    "start": "271919",
    "end": "279520"
  },
  {
    "text": "a commd that is what we can with",
    "start": "279520",
    "end": "286960"
  },
  {
    "text": "our um here I'm setting up in one called edcd API my Cent",
    "start": "286960",
    "end": "297319"
  },
  {
    "text": "I since we just created a new container uh",
    "start": "298560",
    "end": "305120"
  },
  {
    "text": "our key value store is empty and we can check that from the status here from our",
    "start": "305120",
    "end": "310880"
  },
  {
    "text": "what I want want you to look at is the header section that is going to be the most important part for us um and even",
    "start": "310880",
    "end": "319240"
  },
  {
    "text": "in that header status that rision that is highlighted there current our divion",
    "start": "319240",
    "end": "324440"
  },
  {
    "text": "is one that means we don't have anything all we have is we have created and uh",
    "start": "324440",
    "end": "330080"
  },
  {
    "text": "initiated that key value store let's try to add something inside",
    "start": "330080",
    "end": "335120"
  },
  {
    "text": "this um key Value Store um here what I'm doing is I'm adding five values",
    "start": "335120",
    "end": "340840"
  },
  {
    "text": "something like f one bar one all the way to F five bar five and I'm trying to",
    "start": "340840",
    "end": "346759"
  },
  {
    "text": "retrieve some information from here if I just run etcd CTL get dot I don't get",
    "start": "346759",
    "end": "352880"
  },
  {
    "text": "anything but if I try to get it in adjacent format what I will see is this",
    "start": "352880",
    "end": "358720"
  },
  {
    "text": "output here we can see our revision has incremented and it has incremented by five that means every time we added a",
    "start": "358720",
    "end": "365600"
  },
  {
    "text": "new key value pair one bar one that incremented our counter by one and since we added five key value pairs um our",
    "start": "365600",
    "end": "372960"
  },
  {
    "text": "increment um our counter was incremented by five so now at this point after",
    "start": "372960",
    "end": "378479"
  },
  {
    "text": "adding five key value pairs our atcd revision counter is at",
    "start": "378479",
    "end": "384520"
  },
  {
    "text": "six here um if you recall we added values uh of the from F1 bar one all the",
    "start": "384639",
    "end": "391319"
  },
  {
    "text": "way to F five bar five here I'm asking um it CD to give me all the values that",
    "start": "391319",
    "end": "397880"
  },
  {
    "text": "are prefixed with f so here we can see uh we'll just here in this example we'll",
    "start": "397880",
    "end": "403880"
  },
  {
    "text": "try to understand how whenever we added one key value pair for example when we",
    "start": "403880",
    "end": "409520"
  },
  {
    "text": "added V one bar1 how uh that changed our at CD key value store so it is going to",
    "start": "409520",
    "end": "416919"
  },
  {
    "text": "show all the key values on which are are coming on that side uh that's the key",
    "start": "416919",
    "end": "421960"
  },
  {
    "text": "KVs array sorry uh for the space here um I'll try to show all the key value pairs",
    "start": "421960",
    "end": "428759"
  },
  {
    "text": "that are coming here so we can see we have revisions uh set to six here that's",
    "start": "428759",
    "end": "434000"
  },
  {
    "text": "what we already discussed and that is our first key value pair that was added",
    "start": "434000",
    "end": "439280"
  },
  {
    "text": "here we can see when we started our revision was set to one when F1 bar one",
    "start": "439280",
    "end": "444520"
  },
  {
    "text": "key pair was added our revision was two at that point because we added a new uh",
    "start": "444520",
    "end": "449960"
  },
  {
    "text": "change we changed the state of our key value and we got those uh three fields",
    "start": "449960",
    "end": "456120"
  },
  {
    "text": "in our attached to our key value pair as well um create revision mode revision version so what create revision is it's",
    "start": "456120",
    "end": "463960"
  },
  {
    "text": "the revision of Ed CD at which this key value pair was created in the key Val in",
    "start": "463960",
    "end": "469319"
  },
  {
    "text": "in ET City so when we added uh F1 bar one uh it was incremented by one and it",
    "start": "469319",
    "end": "475599"
  },
  {
    "text": "got the create revision as two it did not get any modification so so far so mode revision is also two right now but",
    "start": "475599",
    "end": "482039"
  },
  {
    "text": "if it had received any modifications after that would be set to the revision at which the Kei value pair was last",
    "start": "482039",
    "end": "488360"
  },
  {
    "text": "modified and uh version is also set to one this this means this is the first version if there were modifications uh",
    "start": "488360",
    "end": "495840"
  },
  {
    "text": "the version counter would have incremented if there is a deletion it would be reset to zero and uh above and",
    "start": "495840",
    "end": "502400"
  },
  {
    "text": "below we are seeing the key value pairs so this was the first key pair we added same is for uh F2 R2 we we can see our",
    "start": "502400",
    "end": "510800"
  },
  {
    "text": "in uh that God create revision as three because that was the state of u that was",
    "start": "510800",
    "end": "516240"
  },
  {
    "text": "the revision of ET CID at that point when F2 bar2 key pair was created and so",
    "start": "516240",
    "end": "521880"
  },
  {
    "text": "on for all the way to the last pair F five bar5 you can also see it is also giving",
    "start": "521880",
    "end": "528399"
  },
  {
    "text": "us the count of our um U key values or whatever data is stored inside our um at",
    "start": "528399",
    "end": "534760"
  },
  {
    "text": "CD key value store at this point so that is fine let's try to delete Del one key now",
    "start": "534760",
    "end": "540800"
  },
  {
    "text": "um let's try to delete the first key pair we added which is fan Baran and when I run this command etcd CTL delete",
    "start": "540800",
    "end": "549360"
  },
  {
    "text": "uh for1 we see we got this revision bumped up by one so even though we",
    "start": "549360",
    "end": "554839"
  },
  {
    "text": "removed something our revision is not decrementing it is bumping up so again",
    "start": "554839",
    "end": "560800"
  },
  {
    "text": "our revisions um the revision counter in HD is always ever uh incrementing we",
    "start": "560800",
    "end": "567079"
  },
  {
    "text": "also see another New Field here deleted one what it is doing is it is adding a tombstone value to our uh key value pair",
    "start": "567079",
    "end": "574480"
  },
  {
    "text": "here what that Tombstone value will do now is it will uh tell us tell our etcd",
    "start": "574480",
    "end": "580959"
  },
  {
    "text": "CTL client now please ignore whenever somebody is asking you to carry all the values in in the key value store just",
    "start": "580959",
    "end": "587480"
  },
  {
    "text": "please ignore uh it is deleted so there will be some snapshot of that key value",
    "start": "587480",
    "end": "592959"
  },
  {
    "text": "pair still be there in our key value store but since we have marked it um with a tombstone um we'll will not get",
    "start": "592959",
    "end": "599680"
  },
  {
    "text": "that value now so if I try to get all the um data now prefix with key Fu I'll not",
    "start": "599680",
    "end": "609000"
  },
  {
    "text": "get Fu one because that now has a tomson marker attached to it so now we have",
    "start": "609000",
    "end": "614800"
  },
  {
    "text": "deleted this key but we know that that key was present in our key value store at some point and that is the",
    "start": "614800",
    "end": "620600"
  },
  {
    "text": "interesting part of ET um etcd is maintaining all the uh changes that are",
    "start": "620600",
    "end": "627040"
  },
  {
    "text": "happening in different revisions so we and we can use that um to time travel",
    "start": "627040",
    "end": "633399"
  },
  {
    "text": "back uh and and check out what are the past dat and this is helpful in scenarios like for example we had a",
    "start": "633399",
    "end": "639720"
  },
  {
    "text": "crash we had a failure and now we don't know what was the state of our uh particular object at maybe what was the",
    "start": "639720",
    "end": "646760"
  },
  {
    "text": "last known State and what we can do with that is it will just pull off whatever",
    "start": "646760",
    "end": "652040"
  },
  {
    "text": "whatever was the last known State present uh it will assign that revision and we can just get the state of that",
    "start": "652040",
    "end": "658800"
  },
  {
    "text": "object object from there so let's try to do that here we know at revision 7 is",
    "start": "658800",
    "end": "664480"
  },
  {
    "text": "that is the revision when we actually deleted our U F1 key pair and we do not",
    "start": "664480",
    "end": "670680"
  },
  {
    "text": "see anything here at this point there is no key value array here but if I go back",
    "start": "670680",
    "end": "676200"
  },
  {
    "text": "one revision if I ask it to give me a revision um the value of F1 bar one key",
    "start": "676200",
    "end": "681959"
  },
  {
    "text": "pair at revision six I'll be able to get my data here so I can see there is it is",
    "start": "681959",
    "end": "687240"
  },
  {
    "text": "giving me a key value pair um which is um set to uh which has a",
    "start": "687240",
    "end": "693399"
  },
  {
    "text": "create revision of two more revision of two and that is exactly the value that is the time when we had created the fu1",
    "start": "693399",
    "end": "700480"
  },
  {
    "text": "bar one pair for the very first time so we know that this key should not",
    "start": "700480",
    "end": "707320"
  },
  {
    "text": "be present uh it has a tombstone marker what now if we recreate that key what will happen now so let me just go ahead",
    "start": "707320",
    "end": "715200"
  },
  {
    "text": "and uh run this command and let's say uh I I gave another another value a new",
    "start": "715200",
    "end": "720240"
  },
  {
    "text": "value to our uh old key F1 and I just set a value here bar one",
    "start": "720240",
    "end": "726560"
  },
  {
    "text": "new again we know uh revision counter is ever incrementing so uh revision is now",
    "start": "726560",
    "end": "732399"
  },
  {
    "text": "eight and I'll use some tool that comes from the CD repo itself um to just check",
    "start": "732399",
    "end": "738880"
  },
  {
    "text": "the row state of our database that uh the key value um registry um so what I'm",
    "start": "738880",
    "end": "745240"
  },
  {
    "text": "doing here is I'm cloning the CD repo um just going inside the tools rep tools uh",
    "start": "745240",
    "end": "750480"
  },
  {
    "text": "folder there is a tool honey tool called it CD dump DB building that and I'm also",
    "start": "750480",
    "end": "756920"
  },
  {
    "text": "grabbing out the database uh from the container I created now with this new tool that I",
    "start": "756920",
    "end": "763360"
  },
  {
    "text": "have I'm trying to decode or just just get a more cleaner version of uh a",
    "start": "763360",
    "end": "770639"
  },
  {
    "text": "readable version of whatever database we retrieved from our container so this is what I'm getting out of our container at",
    "start": "770639",
    "end": "777440"
  },
  {
    "text": "this point we can see all the way from bottom to up uh uh we have on the left",
    "start": "777440",
    "end": "783639"
  },
  {
    "text": "side we have something called revisions ref equals and then there is on the right side we have value so we can see",
    "start": "783639",
    "end": "791000"
  },
  {
    "text": "revisions are our is our key here in um case of ET and that whole thing uh after",
    "start": "791000",
    "end": "797760"
  },
  {
    "text": "value is a value assigned to every revision here and we can see our revisions are incrementing from bottom",
    "start": "797760",
    "end": "805440"
  },
  {
    "text": "so we started at two and we went all the way to eight with all the operations we",
    "start": "805440",
    "end": "810800"
  },
  {
    "text": "have done so far and it is incrementing um we can also see here um let's start",
    "start": "810800",
    "end": "815920"
  },
  {
    "text": "with second that was the first time we created the pair F1 bar fund and we can see it was created at second that is the",
    "start": "815920",
    "end": "822199"
  },
  {
    "text": "value we get in create revision we are also getting the mode revision version values now if you jump to the um",
    "start": "822199",
    "end": "830759"
  },
  {
    "text": "revision main 7even this is the time when we deleted our um F1 bar1 key pair",
    "start": "830759",
    "end": "837720"
  },
  {
    "text": "and we do not see a value here that is uh and and our version is also zero that",
    "start": "837720",
    "end": "842759"
  },
  {
    "text": "is how Tombstone um is applied now we know every time somebody will ask for a",
    "start": "842759",
    "end": "848680"
  },
  {
    "text": "F1 Keeper at if at they are asking for uh the the data at revision 7 they'll",
    "start": "848680",
    "end": "855360"
  },
  {
    "text": "not get it but we created the pair again at revision 8 and we can see now the",
    "start": "855360",
    "end": "863040"
  },
  {
    "text": "interesting part is we can see the created revision is eight so it did not",
    "start": "863040",
    "end": "868240"
  },
  {
    "text": "uh consider that F1 was already there already present at some point in the",
    "start": "868240",
    "end": "873680"
  },
  {
    "text": "evalue store no it just uh uh registered it as a whole new key pair and it was",
    "start": "873680",
    "end": "880399"
  },
  {
    "text": "since it was created at revision 8 it got the create revision and mode revision both set to8 and the version is",
    "start": "880399",
    "end": "886199"
  },
  {
    "text": "one since it's a it's being treated as a whole new pair there is another concept",
    "start": "886199",
    "end": "891600"
  },
  {
    "text": "of um compaction here um so we we just",
    "start": "891600",
    "end": "896759"
  },
  {
    "text": "so our data is in in uh being stored inside ETD in a sequential Manner and if",
    "start": "896759",
    "end": "902959"
  },
  {
    "text": "we talk about any distributed system for example kubernetes we are talking about thousands of operations thousands of",
    "start": "902959",
    "end": "909279"
  },
  {
    "text": "State changing operation happening in let's say in a minute maybe millions in an hour and we do not want to fill our",
    "start": "909279",
    "end": "915160"
  },
  {
    "text": "key value store just with all those um Regular like day-to-day tasks that are",
    "start": "915160",
    "end": "921560"
  },
  {
    "text": "happening we want to keep our um data safe or whatever is required so",
    "start": "921560",
    "end": "928040"
  },
  {
    "text": "there is a concept called compaction in ETD and what we can do is we can ask ETD to remove everything that has a",
    "start": "928040",
    "end": "935480"
  },
  {
    "text": "tombstone value for example if I just go back here we attach the tombstone at",
    "start": "935480",
    "end": "941639"
  },
  {
    "text": "revision 7 and I I can ask ET CD look before uh revision 8 look for",
    "start": "941639",
    "end": "949600"
  },
  {
    "text": "all the key value pairs that has a tombstone attached to it and all the occurrences related to that key value",
    "start": "949600",
    "end": "954920"
  },
  {
    "text": "pair and remove them that is what is compaction here so here I'm doing the same thing I'm asking at uh edcd to",
    "start": "954920",
    "end": "961680"
  },
  {
    "text": "compact before uh everything before revision Aid and what I get as a result of that is um I I took a new a refresh",
    "start": "961680",
    "end": "969440"
  },
  {
    "text": "copy of my database in the First Command and down what I'm getting here is Art",
    "start": "969440",
    "end": "974560"
  },
  {
    "text": "revision second and revision 7 is removed from our um output because uh",
    "start": "974560",
    "end": "980160"
  },
  {
    "text": "that is no longer relevant that that has a haded tomb on attached to it and uh it",
    "start": "980160",
    "end": "985279"
  },
  {
    "text": "can it is safe to be ignored at this point at CD CDL also has a watch uh we",
    "start": "985279",
    "end": "992279"
  },
  {
    "text": "can so watch here means we can start a watch on all the changes that are",
    "start": "992279",
    "end": "998000"
  },
  {
    "text": "happening on a key value pair and let's try to understand this here um I have two terminals here let's say uh on the",
    "start": "998000",
    "end": "1004920"
  },
  {
    "text": "terminal side I'm starting a watch and here I'm putting up a new key",
    "start": "1004920",
    "end": "1010959"
  },
  {
    "text": "value pair F1 bar One update so this is what I'm doing is at revision 8 we created our F1 uh key value p again and",
    "start": "1010959",
    "end": "1019240"
  },
  {
    "text": "now I'm updating that and what I see on the right hand side is our revision is bummed by one so now our revision is",
    "start": "1019240",
    "end": "1025079"
  },
  {
    "text": "nine create revision is still 8 because that was the time our key was last",
    "start": "1025079",
    "end": "1030400"
  },
  {
    "text": "created again mode revision is now set to 9 because it now got updated and version is two because now we this is",
    "start": "1030400",
    "end": "1037240"
  },
  {
    "text": "the second version this is a new update uh if I do it again if I set another uh",
    "start": "1037240",
    "end": "1043480"
  },
  {
    "text": "value to Fu one I'll I'll see the same changes here also revision is 10 mode version revision is 10 and version is",
    "start": "1043480",
    "end": "1049600"
  },
  {
    "text": "bum to three but but if I go ahead and delete it what I'll get is there is no",
    "start": "1049600",
    "end": "1054919"
  },
  {
    "text": "create version anymore uh only thing we are getting is a mode revision that this is the revision at which this key was",
    "start": "1054919",
    "end": "1061679"
  },
  {
    "text": "deleted and value is some garbage there is no value at this point uh so this is",
    "start": "1061679",
    "end": "1067360"
  },
  {
    "text": "the time where uh this uh key pair has a tombstone attached to it and tying it",
    "start": "1067360",
    "end": "1074160"
  },
  {
    "text": "all together we just learned about etcd how data is being stored inside Ed CD",
    "start": "1074160",
    "end": "1079200"
  },
  {
    "text": "but our um title of this talk is understanding kubernetes resource",
    "start": "1079200",
    "end": "1084799"
  },
  {
    "text": "version and Ed CD revisions so let's tie it all together to kubernetes now here",
    "start": "1084799",
    "end": "1090200"
  },
  {
    "text": "I'm creating a kubernetes cluster with kind uh just doing the same thing going",
    "start": "1090200",
    "end": "1095919"
  },
  {
    "text": "in uh I have a clone of edcd um just building edcd CTL and I'm coping this",
    "start": "1095919",
    "end": "1101960"
  },
  {
    "text": "binary that I just builded on my host machine into into our um control plane",
    "start": "1101960",
    "end": "1107159"
  },
  {
    "text": "of Our Kind cluster that we just created above and one more thing I'm doing here is um I am using our engine deployment",
    "start": "1107159",
    "end": "1114159"
  },
  {
    "text": "yaml that is available from kubernetes project um I'm just doing a apply action on that so we what we are getting is we",
    "start": "1114159",
    "end": "1121799"
  },
  {
    "text": "we are just um creating a deployment with three replicas in our new newly created",
    "start": "1121799",
    "end": "1127840"
  },
  {
    "text": "cluster let's try to now um inspect our new newly created kuet is deployment",
    "start": "1127840",
    "end": "1135159"
  },
  {
    "text": "object using Cube CDL first here what I can see is this is a redacted version uh",
    "start": "1135159",
    "end": "1141799"
  },
  {
    "text": "of the entire output but uh what we need is the value on the right right hand",
    "start": "1141799",
    "end": "1147120"
  },
  {
    "text": "side we see a field called resource version that is currently set to 1 626",
    "start": "1147120",
    "end": "1153280"
  },
  {
    "text": "and we want to understand how this is coming back from uh ETD so here I am executing inside into",
    "start": "1153280",
    "end": "1161640"
  },
  {
    "text": "my kuet is uh cluster control plane again I'm adding my GQ that's a",
    "start": "1161640",
    "end": "1167720"
  },
  {
    "text": "handy tool to uh decode our key value pair values and since this is a",
    "start": "1167720",
    "end": "1172960"
  },
  {
    "text": "kubernetes cluster and our rcd is um installed with uh certificates attached",
    "start": "1172960",
    "end": "1178240"
  },
  {
    "text": "to it I'm just putting this entire uh certificate values uh into an allias",
    "start": "1178240",
    "end": "1185600"
  },
  {
    "text": "e so let's try to get the same deployment value that we just we just",
    "start": "1186400",
    "end": "1192640"
  },
  {
    "text": "deployed a new engine X deployment into our new cluster let's try to grab that value from edcd now and how edcd store",
    "start": "1192640",
    "end": "1201440"
  },
  {
    "text": "kubernetes um objects is somewhat like on that path SL registry SL deployments",
    "start": "1201440",
    "end": "1207799"
  },
  {
    "text": "uh it's like the registry the kind of object um name space and yeah so we are",
    "start": "1207799",
    "end": "1213760"
  },
  {
    "text": "asking it find out anything um that's there in the def find find out any",
    "start": "1213760",
    "end": "1219280"
  },
  {
    "text": "deployment that's there in the default Nam space and give me the keys um from",
    "start": "1219280",
    "end": "1224760"
  },
  {
    "text": "there what I'm getting out of there is that uh again going back to the KVs",
    "start": "1224760",
    "end": "1231880"
  },
  {
    "text": "arrays um we are getting a key which is uh which has a string attached to it",
    "start": "1231880",
    "end": "1238600"
  },
  {
    "text": "registry deployments default engine X deployment that is the deployment we just created and it has a create",
    "start": "1238600",
    "end": "1243919"
  },
  {
    "text": "revision uh set to some value 153 but we know when we are uh deploying uh let's",
    "start": "1243919",
    "end": "1250039"
  },
  {
    "text": "say we when we are applying a kuet is a deployment yaml it it has maybe multiple",
    "start": "1250039",
    "end": "1255559"
  },
  {
    "text": "replicas attached to it so a lot of um changes must have happened on it maybe a new replica was created and there were",
    "start": "1255559",
    "end": "1262320"
  },
  {
    "text": "lot of series of operation happened so that was the last revision at which the last uh change happened and it was",
    "start": "1262320",
    "end": "1269200"
  },
  {
    "text": "stored in ET City and that is what we are getting out from here uh more revision and if you recall uh the object",
    "start": "1269200",
    "end": "1277320"
  },
  {
    "text": "we just saw back here um uh in our last slide we also saw the resource version",
    "start": "1277320",
    "end": "1283200"
  },
  {
    "text": "also has a similar value to what we saw here mod revision so we can conclude",
    "start": "1283200",
    "end": "1288240"
  },
  {
    "text": "here is um ET CD mode revisions are what we are getting back as um kubernetes",
    "start": "1288240",
    "end": "1293320"
  },
  {
    "text": "resource versions We can also try to check here with another watch you can run a watch",
    "start": "1293320",
    "end": "1300320"
  },
  {
    "text": "uh on one side using Cube Cal another from um uh hcd CDL client um one thing",
    "start": "1300320",
    "end": "1307520"
  },
  {
    "text": "to understand is U whenever HC uh hcd runs a watch U or implements a watch it",
    "start": "1307520",
    "end": "1313720"
  },
  {
    "text": "is we need to tell it what is the next revision start watching from there so",
    "start": "1313720",
    "end": "1318840"
  },
  {
    "text": "what I'm doing on the right hand side is I'm trying to grab the current revision adding Uh current revision of whatever",
    "start": "1318840",
    "end": "1326480"
  },
  {
    "text": "is the uh deployment present U with the key registry deployments default and I'm",
    "start": "1326480",
    "end": "1331960"
  },
  {
    "text": "adding an increment to that I'm asking atdd please start watching from that next increment all the changes that are",
    "start": "1331960",
    "end": "1340480"
  },
  {
    "text": "happening so this is what I'm getting from Cube Cil um watch when we applied",
    "start": "1341000",
    "end": "1347440"
  },
  {
    "text": "our yam this was the first event that happened uh our first um replic whatever some",
    "start": "1347440",
    "end": "1354880"
  },
  {
    "text": "some object some resource object was added and that was the resource version",
    "start": "1354880",
    "end": "1360440"
  },
  {
    "text": "set to it 296 same is the case with Ed CD uh when",
    "start": "1360440",
    "end": "1366080"
  },
  {
    "text": "the first addition um operation happened this was the first uh event that was",
    "start": "1366080",
    "end": "1372720"
  },
  {
    "text": "added in our or key key value pair that was added in our ET CD key Value Store",
    "start": "1372720",
    "end": "1378520"
  },
  {
    "text": "we can see um both the create revisions and mode revisions are uh 296 which is",
    "start": "1378520",
    "end": "1384840"
  },
  {
    "text": "exactly equal to a resource version which we got from Cube CDL and that is because this is the first event and",
    "start": "1384840",
    "end": "1391360"
  },
  {
    "text": "there is a series of event that had happened after that um so we we are saying okay something was modified maybe",
    "start": "1391360",
    "end": "1398000"
  },
  {
    "text": "another replica was created and it got that signal back um so we can see U that",
    "start": "1398000",
    "end": "1404320"
  },
  {
    "text": "is also being reflected in our ET CD watch as well uh create revision is still 296 but our mode revision is now",
    "start": "1404320",
    "end": "1411000"
  },
  {
    "text": "being bummed to whatever is the latest revision at which it CD state was changed and there is a version bump",
    "start": "1411000",
    "end": "1417480"
  },
  {
    "text": "here so let's try to grab this entire kubernetes database that we are just",
    "start": "1417480",
    "end": "1423559"
  },
  {
    "text": "talking about whatever values we are getting from here in ET CD uh let's try to see what what does it look like so",
    "start": "1423559",
    "end": "1430919"
  },
  {
    "text": "this is what I'm doing here I'm trying to again copy uh uh the database from",
    "start": "1430919",
    "end": "1436080"
  },
  {
    "text": "Key ETD key values registry from um arine cluster control plane container",
    "start": "1436080",
    "end": "1443240"
  },
  {
    "text": "and I'm using the same tool again ATD dump DV to uh check how does it look",
    "start": "1443240",
    "end": "1449000"
  },
  {
    "text": "like this is how it looks like there are million of things happening and um most",
    "start": "1449000",
    "end": "1455240"
  },
  {
    "text": "of these things are regular things um kubernetes is deleting most of these things every",
    "start": "1455240",
    "end": "1462240"
  },
  {
    "text": "maybe 10 minutes you can uh as a admin configure it CD to even do more compactions most of these are I will not",
    "start": "1462240",
    "end": "1470159"
  },
  {
    "text": "go into uh the concept of Lees but there are Lees happening Lees being released",
    "start": "1470159",
    "end": "1475360"
  },
  {
    "text": "uh most of these are those modifications so there's a lot of um car carting stuff happening here but",
    "start": "1475360",
    "end": "1484360"
  },
  {
    "text": "there are objects here as well and um I have just tried to grab one there and that also looks somewhat like this and",
    "start": "1484360",
    "end": "1491679"
  },
  {
    "text": "let me just try to trim it to a more readable version here this is how our engine deployment um at least the the",
    "start": "1491679",
    "end": "1499360"
  },
  {
    "text": "first one when uh we just added uh our object to the key value store this was",
    "start": "1499360",
    "end": "1504480"
  },
  {
    "text": "the first entry that was added to our key value store so we got a revision key",
    "start": "1504480",
    "end": "1510320"
  },
  {
    "text": "here which is set to 2968 um we got a value that that value is also reducted it's a huge um value U",
    "start": "1510320",
    "end": "1519320"
  },
  {
    "text": "mostly in a Proto buffer format and just redacted it for the sake of readability",
    "start": "1519320",
    "end": "1526480"
  },
  {
    "text": "here and we are seeing created mode are 2 2968 equal to the very first resource",
    "start": "1526480",
    "end": "1532559"
  },
  {
    "text": "version we got uh yeah and and version two is",
    "start": "1532559",
    "end": "1540080"
  },
  {
    "text": "our it it's the version so it was the very first U change that happened on our",
    "start": "1540440",
    "end": "1546159"
  },
  {
    "text": "um engine ex deployment resource object so that was the first version bump we got from there so concluding from this",
    "start": "1546159",
    "end": "1554720"
  },
  {
    "text": "thing that I learned this is what blew my mind um this was the first time I learned that uh fact that my entire kuet",
    "start": "1554720",
    "end": "1562039"
  },
  {
    "text": "is cluster is just coming down to this LCD dump and all my kuet is resource objects anything name spaces deployments",
    "start": "1562039",
    "end": "1569520"
  },
  {
    "text": "boards CS everything is stored inside uh this persistent data storage layer in",
    "start": "1569520",
    "end": "1575679"
  },
  {
    "text": "this case ETD and that is what I'm seeing in this STM so all I'm seeing is",
    "start": "1575679",
    "end": "1580760"
  },
  {
    "text": "um that key value Pairs and that is exactly what my kubernetes cluster is",
    "start": "1580760",
    "end": "1585799"
  },
  {
    "text": "made up of uh so it's it's okay to conclude my uh kubernetes cluster is",
    "start": "1585799",
    "end": "1592080"
  },
  {
    "text": "nothing but a collection of yaml files which with all this data stored in as multiple revisions in",
    "start": "1592080",
    "end": "1598480"
  },
  {
    "text": "ex um I want to thank Michael go gash uh I got the inspiration of this talk I",
    "start": "1598480",
    "end": "1604399"
  },
  {
    "text": "learned uh about this concept from this particular talk there is a great article",
    "start": "1604399",
    "end": "1610120"
  },
  {
    "text": "um a Blog article also attached to this that has more details so just thank you to Michael gash and with that thank you",
    "start": "1610120",
    "end": "1617200"
  },
  {
    "text": "so much for coming the",
    "start": "1617200",
    "end": "1620600"
  },
  {
    "text": "talk and before I forget this is the QR code please scan it for feedback thank",
    "start": "1625320",
    "end": "1630399"
  },
  {
    "text": "you and I'm open to",
    "start": "1630399",
    "end": "1634440"
  },
  {
    "text": "questions the mic is somewhere in the middle if um somebody wants to take it check one yep so I've noticed while",
    "start": "1636679",
    "end": "1643960"
  },
  {
    "text": "using a number of operators that appear to use washes they'll often come back failing stating that the resource",
    "start": "1643960",
    "end": "1649799"
  },
  {
    "text": "version was too old or is otherwise out of date I'm not sure as an administrator in",
    "start": "1649799",
    "end": "1655480"
  },
  {
    "text": "Google has not been helpful if I should be worried about this or what I should be doing about this or if it's just",
    "start": "1655480",
    "end": "1662799"
  },
  {
    "text": "noise as things are off um sorry I did not hear the question",
    "start": "1662799",
    "end": "1669039"
  },
  {
    "text": "properly um can you repeat again so while we're using a number of operators",
    "start": "1669039",
    "end": "1674640"
  },
  {
    "text": "picking on Rook specifically they appear to use watch internally and they come up",
    "start": "1674640",
    "end": "1680080"
  },
  {
    "text": "and are constantly complaining that the resource version is too old on their watches I assume that's because it's",
    "start": "1680080",
    "end": "1687039"
  },
  {
    "text": "getting cleaned up yeah U so atcd had a different different implementation of",
    "start": "1687039",
    "end": "1693919"
  },
  {
    "text": "not let's say skipping all the revisions that are happening but this was intented",
    "start": "1693919",
    "end": "1699399"
  },
  {
    "text": "at least from what I have learned so far um this is an intended Behavior we we",
    "start": "1699399",
    "end": "1704440"
  },
  {
    "text": "are uh intentionally skipping everything um and going back to all the way to the",
    "start": "1704440",
    "end": "1709480"
  },
  {
    "text": "revision where we know this was the best stable state of that particular object I think that's a design decision here and",
    "start": "1709480",
    "end": "1716640"
  },
  {
    "text": "that is an intended decision thank you thanks for the great talk",
    "start": "1716640",
    "end": "1724559"
  },
  {
    "text": "um during compaction um does it also remove the Redundant modifications so",
    "start": "1724559",
    "end": "1732279"
  },
  {
    "text": "that's it kind of only that's if you have changed your object three times and",
    "start": "1732279",
    "end": "1737559"
  },
  {
    "text": "then after that you come back two unnecessary times be removed or not I need to check that um I'm not sure about",
    "start": "1737559",
    "end": "1744919"
  },
  {
    "text": "that",
    "start": "1744919",
    "end": "1747919"
  },
  {
    "text": "thanks I have uh multiple questions first thing you know are we confining",
    "start": "1753039",
    "end": "1759240"
  },
  {
    "text": "the CD database to a specific sze like what I see is 8 GB is the max why is",
    "start": "1759240",
    "end": "1764679"
  },
  {
    "text": "there a limitation of 8 GB R CD well um I am not the Ed CD expert",
    "start": "1764679",
    "end": "1773840"
  },
  {
    "text": "here so um I honestly don't know why if if there is a limit at all um but if if",
    "start": "1773840",
    "end": "1781200"
  },
  {
    "text": "there is a specific use case you are talking about can you clarify more maybe there are people here who can",
    "start": "1781200",
    "end": "1786559"
  },
  {
    "text": "add okay and uh is there an auto defragmentation that happens",
    "start": "1786559",
    "end": "1793840"
  },
  {
    "text": "always Auto defragmentation as in what I mean you know we have a compaction there",
    "start": "1793840",
    "end": "1799519"
  },
  {
    "text": "is a fragmentation and then we generally have a defragmentation right anytime the",
    "start": "1799519",
    "end": "1804640"
  },
  {
    "text": "CD FS up we generally do a defra so you can configure R CD for U at least I know",
    "start": "1804640",
    "end": "1812519"
  },
  {
    "text": "Auto um like like regular compaction I am not aware of there is a concept",
    "start": "1812519",
    "end": "1817840"
  },
  {
    "text": "called defragmentation or fragmentation but I'm assuming if there is a configuration available for uh the yeah",
    "start": "1817840",
    "end": "1826159"
  },
  {
    "text": "if you can as a admin of at CD uh configure how how often you want to uh",
    "start": "1826159",
    "end": "1833399"
  },
  {
    "text": "do the compaction",
    "start": "1833399",
    "end": "1837039"
  },
  {
    "text": "yeah thank you thank",
    "start": "1839799",
    "end": "1843720"
  },
  {
    "text": "you H kind of a vague question so if you can't answer it that's okay um when we",
    "start": "1847559",
    "end": "1854159"
  },
  {
    "text": "look in kubernetes we see a resource version which is the CD revision which was really interesting to me thank you",
    "start": "1854159",
    "end": "1860320"
  },
  {
    "text": "for explaining that um it looks like an ETD though each key also has a resource version",
    "start": "1860320",
    "end": "1867519"
  },
  {
    "text": "which is specific to that key right two three four five so I guess my question is can you give",
    "start": "1867519",
    "end": "1874039"
  },
  {
    "text": "some context for why when we look at it in kubernetes we",
    "start": "1874039",
    "end": "1879880"
  },
  {
    "text": "want to see the global resource the the global ETD revision number instead of",
    "start": "1879880",
    "end": "1886080"
  },
  {
    "text": "the revision number for the individual key um you mean why we are getting the",
    "start": "1886080",
    "end": "1894120"
  },
  {
    "text": "resource version as uh the mode revision value and why not the one that is on the",
    "start": "1894120",
    "end": "1900120"
  },
  {
    "text": "left hand side yeah so like if we look at like f five here um when we look at",
    "start": "1900120",
    "end": "1905159"
  },
  {
    "text": "that in kubernetes we get a resource version of six right because that's the etcd revision number the mod revision",
    "start": "1905159",
    "end": "1912399"
  },
  {
    "text": "number for when it was created um I could see another world where we would get a resource version of",
    "start": "1912399",
    "end": "1919799"
  },
  {
    "text": "one because that is the version associated with um Fu 5 here in the ATD",
    "start": "1919799",
    "end": "1926360"
  },
  {
    "text": "database so I'm just trying to understand why from a conceptual level",
    "start": "1926360",
    "end": "1931799"
  },
  {
    "text": "we we want to receive six there the ETD revision or the ETD revision number and",
    "start": "1931799",
    "end": "1937679"
  },
  {
    "text": "not the uh version number of the particular key in CD if that makes sense",
    "start": "1937679",
    "end": "1944320"
  },
  {
    "text": "um so I'll try to repeat what I understood uh you are talking about why",
    "start": "1944320",
    "end": "1950480"
  },
  {
    "text": "are we getting the mode revision and I did not understand uh like I don't know",
    "start": "1950480",
    "end": "1957080"
  },
  {
    "text": "what which line you took as an example like for example if I have object U I'm",
    "start": "1957080",
    "end": "1962480"
  },
  {
    "text": "talking about the one which is Rev main six for example there on the right hand",
    "start": "1962480",
    "end": "1968799"
  },
  {
    "text": "side the mode is also set to six so that whatever we are getting um as a resource",
    "start": "1968799",
    "end": "1974200"
  },
  {
    "text": "version in kubernetes that's basically telling us that's the last revision of",
    "start": "1974200",
    "end": "1979480"
  },
  {
    "text": "ET CID where that object state was changed so whatever change that object",
    "start": "1979480",
    "end": "1984519"
  },
  {
    "text": "uh state in idd whatever was the revision of idd at that point that is what we are getting out of resource",
    "start": "1984519",
    "end": "1989960"
  },
  {
    "text": "version that makes makes sense thank",
    "start": "1989960",
    "end": "1994518"
  },
  {
    "text": "you and with that I think um I'm done with my time thank you thank you so much",
    "start": "2002120",
    "end": "2007440"
  },
  {
    "text": "for coming to thank you",
    "start": "2007440",
    "end": "2013360"
  }
]