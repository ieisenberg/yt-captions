[
  {
    "text": "all right uh welcome everyone",
    "start": "780",
    "end": "3840"
  },
  {
    "text": "I hope you're having a wonderful kubecon",
    "start": "3840",
    "end": "6000"
  },
  {
    "text": "so far and uh it's the last day so",
    "start": "6000",
    "end": "8880"
  },
  {
    "text": "thanks for dropping by before you head",
    "start": "8880",
    "end": "10980"
  },
  {
    "text": "home",
    "start": "10980",
    "end": "13219"
  },
  {
    "text": "so uh today",
    "start": "13620",
    "end": "15660"
  },
  {
    "text": "um they're going to be two of us uh I'm",
    "start": "15660",
    "end": "17760"
  },
  {
    "text": "deep from Apple and my co-speaker is",
    "start": "17760",
    "end": "20460"
  },
  {
    "text": "Fang from databricks and we'll be",
    "start": "20460",
    "end": "22500"
  },
  {
    "text": "talking about so what if I don't want my",
    "start": "22500",
    "end": "25080"
  },
  {
    "text": "personal storage to be yet another mind",
    "start": "25080",
    "end": "27060"
  },
  {
    "text": "mount",
    "start": "27060",
    "end": "29300"
  },
  {
    "text": "so here's a quick introduction to our",
    "start": "30779",
    "end": "32940"
  },
  {
    "text": "talk uh first we'll start off with",
    "start": "32940",
    "end": "35820"
  },
  {
    "text": "describing how the current life cycle",
    "start": "35820",
    "end": "37860"
  },
  {
    "text": "and flow of events work for pods that",
    "start": "37860",
    "end": "41100"
  },
  {
    "text": "mount persistent storage we'll go over",
    "start": "41100",
    "end": "43500"
  },
  {
    "text": "some of the key assumptions that are",
    "start": "43500",
    "end": "45420"
  },
  {
    "text": "there in the cubelet as well as",
    "start": "45420",
    "end": "47219"
  },
  {
    "text": "container runtimes around how volume",
    "start": "47219",
    "end": "49379"
  },
  {
    "text": "mounts are set up for pods that do Mount",
    "start": "49379",
    "end": "52739"
  },
  {
    "text": "persistent storage",
    "start": "52739",
    "end": "54120"
  },
  {
    "text": "next we are going to go over some of the",
    "start": "54120",
    "end": "56399"
  },
  {
    "text": "typical bind mounts that take place as",
    "start": "56399",
    "end": "58680"
  },
  {
    "text": "part of surfacing person storage to pods",
    "start": "58680",
    "end": "61020"
  },
  {
    "text": "today",
    "start": "61020",
    "end": "62820"
  },
  {
    "text": "after that we are going to go over some",
    "start": "62820",
    "end": "65100"
  },
  {
    "text": "of the alternatives to the standard flow",
    "start": "65100",
    "end": "67020"
  },
  {
    "text": "for mounting personal storage into pods",
    "start": "67020",
    "end": "69659"
  },
  {
    "text": "we'll look at this alternative mainly",
    "start": "69659",
    "end": "72060"
  },
  {
    "text": "from the perspective of alternative",
    "start": "72060",
    "end": "73860"
  },
  {
    "text": "runtimes to run C such as micro VMS",
    "start": "73860",
    "end": "76920"
  },
  {
    "text": "specifically Kata",
    "start": "76920",
    "end": "78600"
  },
  {
    "text": "we'll also go over some of the",
    "start": "78600",
    "end": "79979"
  },
  {
    "text": "challenges that arise when some of the",
    "start": "79979",
    "end": "82080"
  },
  {
    "text": "base assumptions in cubelet and the",
    "start": "82080",
    "end": "84540"
  },
  {
    "text": "container runtime are no longer true",
    "start": "84540",
    "end": "87240"
  },
  {
    "text": "finally we'll be going over some of the",
    "start": "87240",
    "end": "90420"
  },
  {
    "text": "enhancements that we have implemented in",
    "start": "90420",
    "end": "93659"
  },
  {
    "text": "CSI plugins to basically surface this",
    "start": "93659",
    "end": "96000"
  },
  {
    "text": "alternate flow which we call the direct",
    "start": "96000",
    "end": "98040"
  },
  {
    "text": "assignment model",
    "start": "98040",
    "end": "99540"
  },
  {
    "text": "we have initially prototyped it with uh",
    "start": "99540",
    "end": "102600"
  },
  {
    "text": "by adding a fair amount of awareness",
    "start": "102600",
    "end": "104759"
  },
  {
    "text": "around kubernetes and Kata runtime",
    "start": "104759",
    "end": "107939"
  },
  {
    "text": "within the CSI plugin and we'll go over",
    "start": "107939",
    "end": "110460"
  },
  {
    "text": "a future Direction where we're exploring",
    "start": "110460",
    "end": "112500"
  },
  {
    "text": "a cap to make this support a lot more",
    "start": "112500",
    "end": "114960"
  },
  {
    "text": "generic so that the CSI plugins do not",
    "start": "114960",
    "end": "117600"
  },
  {
    "text": "need to be aware of the fact that they",
    "start": "117600",
    "end": "120360"
  },
  {
    "text": "are operating within a kubernetes",
    "start": "120360",
    "end": "121799"
  },
  {
    "text": "framework are that the end runtime is",
    "start": "121799",
    "end": "124799"
  },
  {
    "text": "actually caught up",
    "start": "124799",
    "end": "126119"
  },
  {
    "text": "and finally we'll be concluding with",
    "start": "126119",
    "end": "127799"
  },
  {
    "text": "some takeaways and how you can",
    "start": "127799",
    "end": "129660"
  },
  {
    "text": "contribute to this overall effort",
    "start": "129660",
    "end": "133340"
  },
  {
    "text": "so let's start all the way at the",
    "start": "134520",
    "end": "136080"
  },
  {
    "text": "beginning",
    "start": "136080",
    "end": "137040"
  },
  {
    "text": "and look at how a part comes to life",
    "start": "137040",
    "end": "138959"
  },
  {
    "text": "from the perspective of the cubelet so",
    "start": "138959",
    "end": "141360"
  },
  {
    "text": "typically you either have a pod being",
    "start": "141360",
    "end": "143280"
  },
  {
    "text": "submitted by Cube cuddle or a workload",
    "start": "143280",
    "end": "145739"
  },
  {
    "text": "controller such as dateful set and once",
    "start": "145739",
    "end": "148319"
  },
  {
    "text": "the Pod gets submitted it gets created",
    "start": "148319",
    "end": "150300"
  },
  {
    "text": "in the API server the cube scheduler",
    "start": "150300",
    "end": "152819"
  },
  {
    "text": "picks up the Pod and picks the most",
    "start": "152819",
    "end": "154920"
  },
  {
    "text": "ideal node in the cluster that the Pod",
    "start": "154920",
    "end": "157140"
  },
  {
    "text": "should get scheduled to",
    "start": "157140",
    "end": "159319"
  },
  {
    "text": "once the node name is set by the",
    "start": "159319",
    "end": "161580"
  },
  {
    "text": "scheduler the cubelet on that designated",
    "start": "161580",
    "end": "163560"
  },
  {
    "text": "node picks up the pot and starts to",
    "start": "163560",
    "end": "165660"
  },
  {
    "text": "process it and bring it to life",
    "start": "165660",
    "end": "169099"
  },
  {
    "text": "one of the first things that the cubelet",
    "start": "170220",
    "end": "172140"
  },
  {
    "text": "starts processing is the volume section",
    "start": "172140",
    "end": "174480"
  },
  {
    "text": "of the pod",
    "start": "174480",
    "end": "175620"
  },
  {
    "text": "so there are two main categories of",
    "start": "175620",
    "end": "177900"
  },
  {
    "text": "volumes that pods can mount in",
    "start": "177900",
    "end": "179819"
  },
  {
    "text": "kubernetes the first kind are the inline",
    "start": "179819",
    "end": "182160"
  },
  {
    "text": "volumes and they mainly present",
    "start": "182160",
    "end": "184080"
  },
  {
    "text": "ephemeral data to the pods and this",
    "start": "184080",
    "end": "186540"
  },
  {
    "text": "include things like config map or secret",
    "start": "186540",
    "end": "188519"
  },
  {
    "text": "which are typically powered by a piece",
    "start": "188519",
    "end": "191580"
  },
  {
    "text": "of code that's already within the",
    "start": "191580",
    "end": "193019"
  },
  {
    "text": "cubelet itself because they're so common",
    "start": "193019",
    "end": "194760"
  },
  {
    "text": "and pervasive however ephemeral volumes",
    "start": "194760",
    "end": "197640"
  },
  {
    "text": "may also be backed by specialized CSI",
    "start": "197640",
    "end": "199860"
  },
  {
    "text": "plugin in case you have a very specific",
    "start": "199860",
    "end": "201599"
  },
  {
    "text": "Secret store and in that case the",
    "start": "201599",
    "end": "205200"
  },
  {
    "text": "cubelet works with the specific back end",
    "start": "205200",
    "end": "207900"
  },
  {
    "text": "through a CSI CSI plugin",
    "start": "207900",
    "end": "210420"
  },
  {
    "text": "the more common category and the focus",
    "start": "210420",
    "end": "212519"
  },
  {
    "text": "of our talk here are volumes that are",
    "start": "212519",
    "end": "215700"
  },
  {
    "text": "backed by persistent volumes which are",
    "start": "215700",
    "end": "217440"
  },
  {
    "text": "bound to objects called percent volume",
    "start": "217440",
    "end": "219239"
  },
  {
    "text": "claims which are actually what is",
    "start": "219239",
    "end": "221879"
  },
  {
    "text": "specified in the Pod spec",
    "start": "221879",
    "end": "224099"
  },
  {
    "text": "now person volumes can be backed by a",
    "start": "224099",
    "end": "226680"
  },
  {
    "text": "variety of different storage backends so",
    "start": "226680",
    "end": "228900"
  },
  {
    "text": "it could be say EBS in case of the AWS",
    "start": "228900",
    "end": "232080"
  },
  {
    "text": "cloud or gcpd in case of the gcp",
    "start": "232080",
    "end": "235799"
  },
  {
    "text": "environment or your own San environment",
    "start": "235799",
    "end": "237959"
  },
  {
    "text": "in case of on-prem setup now the cubelet",
    "start": "237959",
    "end": "241500"
  },
  {
    "text": "it's impossible for it to know how",
    "start": "241500",
    "end": "243659"
  },
  {
    "text": "exactly to discover these various",
    "start": "243659",
    "end": "245819"
  },
  {
    "text": "storage backends and how to mount the",
    "start": "245819",
    "end": "248459"
  },
  {
    "text": "volume from these backends so for doing",
    "start": "248459",
    "end": "250860"
  },
  {
    "text": "that it depends on plugins associated",
    "start": "250860",
    "end": "253920"
  },
  {
    "text": "with these back-ends that are shipped by",
    "start": "253920",
    "end": "255780"
  },
  {
    "text": "individual vendors and installed on",
    "start": "255780",
    "end": "258120"
  },
  {
    "text": "specific nodes and these are called CSI",
    "start": "258120",
    "end": "260100"
  },
  {
    "text": "node plugins",
    "start": "260100",
    "end": "261359"
  },
  {
    "text": "so by utilizing a CSI node plugin the",
    "start": "261359",
    "end": "264180"
  },
  {
    "text": "cubelet is able to discover a storage a",
    "start": "264180",
    "end": "266580"
  },
  {
    "text": "piece of storage that's attached to a",
    "start": "266580",
    "end": "268259"
  },
  {
    "text": "node and then",
    "start": "268259",
    "end": "270860"
  },
  {
    "text": "instruct that node plugin to get the",
    "start": "270860",
    "end": "273300"
  },
  {
    "text": "volume prepared so that it can be",
    "start": "273300",
    "end": "275280"
  },
  {
    "text": "mounted in appropriate location from",
    "start": "275280",
    "end": "277440"
  },
  {
    "text": "which from which point onwards the",
    "start": "277440",
    "end": "279360"
  },
  {
    "text": "guplet can start processing it",
    "start": "279360",
    "end": "283400"
  },
  {
    "text": "now once the file system on the volume",
    "start": "284820",
    "end": "287400"
  },
  {
    "text": "has been mounted the cubelet executes a",
    "start": "287400",
    "end": "290280"
  },
  {
    "text": "bunch of very important actions",
    "start": "290280",
    "end": "293460"
  },
  {
    "text": "specifically the first one involves",
    "start": "293460",
    "end": "295979"
  },
  {
    "text": "looking at the f is group specification",
    "start": "295979",
    "end": "297900"
  },
  {
    "text": "in the Pod and applying it based on what",
    "start": "297900",
    "end": "300780"
  },
  {
    "text": "is called the fs group change policy and",
    "start": "300780",
    "end": "303419"
  },
  {
    "text": "what is a FS group F's group is",
    "start": "303419",
    "end": "305340"
  },
  {
    "text": "essentially a supplemental group ID that",
    "start": "305340",
    "end": "307800"
  },
  {
    "text": "a pod May specify so that different pods",
    "start": "307800",
    "end": "310740"
  },
  {
    "text": "that run with different user IDs can",
    "start": "310740",
    "end": "313020"
  },
  {
    "text": "share the data on the same persistent",
    "start": "313020",
    "end": "315360"
  },
  {
    "text": "volume",
    "start": "315360",
    "end": "316320"
  },
  {
    "text": "in older versions of kubernetes the",
    "start": "316320",
    "end": "318540"
  },
  {
    "text": "cubelet would sort of blindly mount a",
    "start": "318540",
    "end": "320699"
  },
  {
    "text": "volume look at the f is group and do a",
    "start": "320699",
    "end": "323340"
  },
  {
    "text": "recursive file system traversal through",
    "start": "323340",
    "end": "325620"
  },
  {
    "text": "the entire volume to apply the group",
    "start": "325620",
    "end": "327600"
  },
  {
    "text": "ownership",
    "start": "327600",
    "end": "328919"
  },
  {
    "text": "in more recent versions of kubernetes",
    "start": "328919",
    "end": "331080"
  },
  {
    "text": "there's the new FS group change policy",
    "start": "331080",
    "end": "333600"
  },
  {
    "text": "called onroot mismatch that allows this",
    "start": "333600",
    "end": "335880"
  },
  {
    "text": "process to be a lot more optimized and",
    "start": "335880",
    "end": "338220"
  },
  {
    "text": "so in this mode the cubelet just looks",
    "start": "338220",
    "end": "340680"
  },
  {
    "text": "at the top level directory sees if it's",
    "start": "340680",
    "end": "343020"
  },
  {
    "text": "owned by the right supplemental group ID",
    "start": "343020",
    "end": "344759"
  },
  {
    "text": "that's specified as f is group and if so",
    "start": "344759",
    "end": "347699"
  },
  {
    "text": "it just doesn't it skips the entire file",
    "start": "347699",
    "end": "349919"
  },
  {
    "text": "system reversal",
    "start": "349919",
    "end": "352199"
  },
  {
    "text": "next up containers within a pod may wish",
    "start": "352199",
    "end": "355500"
  },
  {
    "text": "to not Mount the whole volume but only a",
    "start": "355500",
    "end": "357660"
  },
  {
    "text": "part of the volume so these are defined",
    "start": "357660",
    "end": "359880"
  },
  {
    "text": "as subpats and the cubelet needs to make",
    "start": "359880",
    "end": "362400"
  },
  {
    "text": "sure that the subpath is safe and secure",
    "start": "362400",
    "end": "365160"
  },
  {
    "text": "and the Pod is not a malicious one",
    "start": "365160",
    "end": "368100"
  },
  {
    "text": "trying to escape out of the Pod sandbox",
    "start": "368100",
    "end": "370139"
  },
  {
    "text": "by specifying relative paths with a",
    "start": "370139",
    "end": "372840"
  },
  {
    "text": "string offset dot dot slashes",
    "start": "372840",
    "end": "374940"
  },
  {
    "text": "uh there have been some vulnerabilities",
    "start": "374940",
    "end": "376620"
  },
  {
    "text": "associated with this and therefore it's",
    "start": "376620",
    "end": "379800"
  },
  {
    "text": "quite important that the cubelet probes",
    "start": "379800",
    "end": "382199"
  },
  {
    "text": "the subpath ensures it's safe and then",
    "start": "382199",
    "end": "384419"
  },
  {
    "text": "locks it in a position so that it does",
    "start": "384419",
    "end": "386699"
  },
  {
    "text": "not change between the evaluation time",
    "start": "386699",
    "end": "388560"
  },
  {
    "text": "and when the containers actually are",
    "start": "388560",
    "end": "390539"
  },
  {
    "text": "brought up",
    "start": "390539",
    "end": "391979"
  },
  {
    "text": "and then finally if SC Linux is enabled",
    "start": "391979",
    "end": "394560"
  },
  {
    "text": "on the Node in enforcing mode",
    "start": "394560",
    "end": "396600"
  },
  {
    "text": "the cubelet needs to figure that out and",
    "start": "396600",
    "end": "399840"
  },
  {
    "text": "make sure that if acid Linux label has",
    "start": "399840",
    "end": "402360"
  },
  {
    "text": "been explicitly specified that label",
    "start": "402360",
    "end": "404639"
  },
  {
    "text": "gets passed down to the container",
    "start": "404639",
    "end": "406139"
  },
  {
    "text": "runtime and applied on the entire file",
    "start": "406139",
    "end": "408240"
  },
  {
    "text": "system tree so the right slnx labeling",
    "start": "408240",
    "end": "410880"
  },
  {
    "text": "is is provided to the files and",
    "start": "410880",
    "end": "414240"
  },
  {
    "text": "directories so that containers within",
    "start": "414240",
    "end": "416220"
  },
  {
    "text": "the Pod can read the files and",
    "start": "416220",
    "end": "417720"
  },
  {
    "text": "directories if a Linux label is not",
    "start": "417720",
    "end": "420419"
  },
  {
    "text": "specified",
    "start": "420419",
    "end": "421639"
  },
  {
    "text": "cubelet still instructs a container",
    "start": "421639",
    "end": "423840"
  },
  {
    "text": "runtime to go ahead with SL Linux",
    "start": "423840",
    "end": "425580"
  },
  {
    "text": "labeling but figure out the SL Linux",
    "start": "425580",
    "end": "427860"
  },
  {
    "text": "label",
    "start": "427860",
    "end": "428819"
  },
  {
    "text": "at runtime dynamically allocated by the",
    "start": "428819",
    "end": "431340"
  },
  {
    "text": "container runtime",
    "start": "431340",
    "end": "434060"
  },
  {
    "text": "so once the file system mounts are ready",
    "start": "435360",
    "end": "437460"
  },
  {
    "text": "the cubelet moves on to the next phase",
    "start": "437460",
    "end": "439620"
  },
  {
    "text": "which is invoking a CRI implementation",
    "start": "439620",
    "end": "442740"
  },
  {
    "text": "typically continued to your Creo and",
    "start": "442740",
    "end": "445560"
  },
  {
    "text": "which in turn goes on to invoke a lower",
    "start": "445560",
    "end": "448740"
  },
  {
    "text": "layer a lower level container runtime",
    "start": "448740",
    "end": "450960"
  },
  {
    "text": "such as rancy or Kata to create the Pod",
    "start": "450960",
    "end": "454080"
  },
  {
    "text": "sandbox environment which could be just",
    "start": "454080",
    "end": "456180"
  },
  {
    "text": "a bunch of namespaces in case of run C",
    "start": "456180",
    "end": "458340"
  },
  {
    "text": "or a micro VM in case of Kata pull down",
    "start": "458340",
    "end": "461819"
  },
  {
    "text": "the container images and create the",
    "start": "461819",
    "end": "464039"
  },
  {
    "text": "individual containers specified within",
    "start": "464039",
    "end": "465900"
  },
  {
    "text": "the pod",
    "start": "465900",
    "end": "466800"
  },
  {
    "text": "as part of the first step one of the",
    "start": "466800",
    "end": "468780"
  },
  {
    "text": "other things that uh",
    "start": "468780",
    "end": "470819"
  },
  {
    "text": "Sierra implementation would typically do",
    "start": "470819",
    "end": "472860"
  },
  {
    "text": "is interact with the cni plugin to also",
    "start": "472860",
    "end": "475680"
  },
  {
    "text": "set up networking for the Pod sandbox",
    "start": "475680",
    "end": "479479"
  },
  {
    "text": "now once the Pod and the containers are",
    "start": "480720",
    "end": "482880"
  },
  {
    "text": "up it's not like the job around file",
    "start": "482880",
    "end": "485699"
  },
  {
    "text": "system operations is not quite done",
    "start": "485699",
    "end": "487639"
  },
  {
    "text": "throughout the pods lifetime there could",
    "start": "487639",
    "end": "490080"
  },
  {
    "text": "be other volume management operations",
    "start": "490080",
    "end": "491780"
  },
  {
    "text": "that are that need to be executed by the",
    "start": "491780",
    "end": "494580"
  },
  {
    "text": "cubelet so specifically there are",
    "start": "494580",
    "end": "497280"
  },
  {
    "text": "Prometheus metrics around file system",
    "start": "497280",
    "end": "499080"
  },
  {
    "text": "stats for the volumes that are mounted",
    "start": "499080",
    "end": "501240"
  },
  {
    "text": "and the cubelet needs to basically query",
    "start": "501240",
    "end": "503819"
  },
  {
    "text": "the file system stats for all the",
    "start": "503819",
    "end": "506280"
  },
  {
    "text": "volumes through the corresponding CSI",
    "start": "506280",
    "end": "508500"
  },
  {
    "text": "node plugin to report these up",
    "start": "508500",
    "end": "511199"
  },
  {
    "text": "also the administrator may wish to",
    "start": "511199",
    "end": "514380"
  },
  {
    "text": "expand a persistent volume in which case",
    "start": "514380",
    "end": "517320"
  },
  {
    "text": "the cubelet again needs to work with the",
    "start": "517320",
    "end": "519479"
  },
  {
    "text": "appropriate CSI node plugin to ensure",
    "start": "519479",
    "end": "521880"
  },
  {
    "text": "the mounted file system is expanded and",
    "start": "521880",
    "end": "524580"
  },
  {
    "text": "the right files and the right backing",
    "start": "524580",
    "end": "526860"
  },
  {
    "text": "size is reflected on the file system",
    "start": "526860",
    "end": "528779"
  },
  {
    "text": "mount",
    "start": "528779",
    "end": "531140"
  },
  {
    "text": "so here's kind of like a complete",
    "start": "531839",
    "end": "533279"
  },
  {
    "text": "picture of how all of this fits in",
    "start": "533279",
    "end": "535260"
  },
  {
    "text": "together",
    "start": "535260",
    "end": "536160"
  },
  {
    "text": "so again just to recap at the very left",
    "start": "536160",
    "end": "538800"
  },
  {
    "text": "we have the cubelet talking to a CSI",
    "start": "538800",
    "end": "541019"
  },
  {
    "text": "node plugin to First discover the",
    "start": "541019",
    "end": "544200"
  },
  {
    "text": "backing storage and then get it mounted",
    "start": "544200",
    "end": "546360"
  },
  {
    "text": "with a specific file system onto what's",
    "start": "546360",
    "end": "549060"
  },
  {
    "text": "called a global Mount path this",
    "start": "549060",
    "end": "550920"
  },
  {
    "text": "typically happens as part of a CSI API",
    "start": "550920",
    "end": "553260"
  },
  {
    "text": "called CSI node stage volume next This",
    "start": "553260",
    "end": "556500"
  },
  {
    "text": "Global Mount path gets bind mounted to a",
    "start": "556500",
    "end": "559140"
  },
  {
    "text": "pod specific Mount path as part of a CSI",
    "start": "559140",
    "end": "561779"
  },
  {
    "text": "node publish volume API",
    "start": "561779",
    "end": "564300"
  },
  {
    "text": "and finally the cubelet works with the",
    "start": "564300",
    "end": "566339"
  },
  {
    "text": "CRI container runtime and a lower level",
    "start": "566339",
    "end": "568740"
  },
  {
    "text": "runtime Handler like run C to prepare",
    "start": "568740",
    "end": "571740"
  },
  {
    "text": "the Pod sandbox environment and bind",
    "start": "571740",
    "end": "573899"
  },
  {
    "text": "Mount the Pod path into the Mount",
    "start": "573899",
    "end": "576600"
  },
  {
    "text": "namespace of of the spot of the Pod",
    "start": "576600",
    "end": "579360"
  },
  {
    "text": "sandbox",
    "start": "579360",
    "end": "581839"
  },
  {
    "text": "so the key thing to notice here is that",
    "start": "582060",
    "end": "584220"
  },
  {
    "text": "there are a couple of bind mounts that",
    "start": "584220",
    "end": "585899"
  },
  {
    "text": "were going on as part of the entire",
    "start": "585899",
    "end": "588180"
  },
  {
    "text": "setup first there was the bind Mount",
    "start": "588180",
    "end": "590519"
  },
  {
    "text": "from the global path to the Pod specific",
    "start": "590519",
    "end": "592440"
  },
  {
    "text": "pad and from the Pod specific pad to a",
    "start": "592440",
    "end": "594779"
  },
  {
    "text": "path inside the container",
    "start": "594779",
    "end": "597980"
  },
  {
    "text": "and again to recap",
    "start": "600600",
    "end": "602580"
  },
  {
    "text": "um",
    "start": "602580",
    "end": "603360"
  },
  {
    "text": "one of the things we saw is that all the",
    "start": "603360",
    "end": "606000"
  },
  {
    "text": "cubelet assumed that all the file",
    "start": "606000",
    "end": "607740"
  },
  {
    "text": "systems for all the volumes are fully",
    "start": "607740",
    "end": "610440"
  },
  {
    "text": "mounted before it went on to the",
    "start": "610440",
    "end": "612480"
  },
  {
    "text": "container bring up stage this is",
    "start": "612480",
    "end": "614220"
  },
  {
    "text": "important because the cubelet as well as",
    "start": "614220",
    "end": "616680"
  },
  {
    "text": "the container runtime",
    "start": "616680",
    "end": "618540"
  },
  {
    "text": "makes these assumptions because it needs",
    "start": "618540",
    "end": "620940"
  },
  {
    "text": "to execute the following three actions",
    "start": "620940",
    "end": "623459"
  },
  {
    "text": "on the file system Mount so that again",
    "start": "623459",
    "end": "625980"
  },
  {
    "text": "is applying the fs group settings making",
    "start": "625980",
    "end": "629100"
  },
  {
    "text": "sure the subpats are sanitized and",
    "start": "629100",
    "end": "630839"
  },
  {
    "text": "probed and finally applying the",
    "start": "630839",
    "end": "633240"
  },
  {
    "text": "appropriate SL Linux labels",
    "start": "633240",
    "end": "636620"
  },
  {
    "text": "now while this sequence is very",
    "start": "637680",
    "end": "639779"
  },
  {
    "text": "standardized and it works across the",
    "start": "639779",
    "end": "641459"
  },
  {
    "text": "board can we have a different sequence",
    "start": "641459",
    "end": "645060"
  },
  {
    "text": "specifically",
    "start": "645060",
    "end": "646740"
  },
  {
    "text": "how about a model where we decide to",
    "start": "646740",
    "end": "648959"
  },
  {
    "text": "mount the volumes after the containers",
    "start": "648959",
    "end": "650820"
  },
  {
    "text": "are brought up and we want to do it",
    "start": "650820",
    "end": "652980"
  },
  {
    "text": "without using the raw block mode that's",
    "start": "652980",
    "end": "655079"
  },
  {
    "text": "available in kubernetes today we want to",
    "start": "655079",
    "end": "657120"
  },
  {
    "text": "continue to use personal volumes that",
    "start": "657120",
    "end": "659700"
  },
  {
    "text": "specify a file system mode",
    "start": "659700",
    "end": "661500"
  },
  {
    "text": "and a specific use case of this is micro",
    "start": "661500",
    "end": "663899"
  },
  {
    "text": "VM environments specifically like Kata",
    "start": "663899",
    "end": "666779"
  },
  {
    "text": "and two describe this in a lot more",
    "start": "666779",
    "end": "668940"
  },
  {
    "text": "details I'll switch over to my",
    "start": "668940",
    "end": "670500"
  },
  {
    "text": "co-speaker Fang thank you deep",
    "start": "670500",
    "end": "673680"
  },
  {
    "text": "next uh talk about how do we mount a PV",
    "start": "673680",
    "end": "676800"
  },
  {
    "text": "in a macro VM based around time so",
    "start": "676800",
    "end": "679560"
  },
  {
    "text": "microvm based container runtime is the",
    "start": "679560",
    "end": "682019"
  },
  {
    "text": "category of runtime that runs the",
    "start": "682019",
    "end": "684720"
  },
  {
    "text": "container workload in a virtual machine",
    "start": "684720",
    "end": "687000"
  },
  {
    "text": "typical examples include color",
    "start": "687000",
    "end": "689040"
  },
  {
    "text": "containers and file cracker",
    "start": "689040",
    "end": "691560"
  },
  {
    "text": "compared to traditional container",
    "start": "691560",
    "end": "694019"
  },
  {
    "text": "runtime that's based on Linux namespace",
    "start": "694019",
    "end": "696300"
  },
  {
    "text": "and C group such as round C the color",
    "start": "696300",
    "end": "699899"
  },
  {
    "text": "containers provides better workload",
    "start": "699899",
    "end": "702720"
  },
  {
    "text": "isolation and much better security which",
    "start": "702720",
    "end": "706019"
  },
  {
    "text": "is really important for use cases such",
    "start": "706019",
    "end": "708899"
  },
  {
    "text": "as multi-tenant workload in one cluster",
    "start": "708899",
    "end": "712440"
  },
  {
    "text": "it's also more lightweight compared to a",
    "start": "712440",
    "end": "715140"
  },
  {
    "text": "foreground virtual machine",
    "start": "715140",
    "end": "716640"
  },
  {
    "text": "for example containers has made",
    "start": "716640",
    "end": "719100"
  },
  {
    "text": "optimizations to improve the startup",
    "start": "719100",
    "end": "722160"
  },
  {
    "text": "time and reduce the memory footprint",
    "start": "722160",
    "end": "725040"
  },
  {
    "text": "color containers is also fully combined",
    "start": "725040",
    "end": "727620"
  },
  {
    "text": "to the OSI container format and then the",
    "start": "727620",
    "end": "730740"
  },
  {
    "text": "contained the cryo interface so users",
    "start": "730740",
    "end": "733980"
  },
  {
    "text": "don't need to change the application to",
    "start": "733980",
    "end": "736079"
  },
  {
    "text": "migrate from a run C container to a",
    "start": "736079",
    "end": "739019"
  },
  {
    "text": "color container",
    "start": "739019",
    "end": "741800"
  },
  {
    "text": "so a quick recap of cut the architecture",
    "start": "742019",
    "end": "744899"
  },
  {
    "text": "of color containers color contains",
    "start": "744899",
    "end": "747600"
  },
  {
    "text": "interact integrate with",
    "start": "747600",
    "end": "750000"
  },
  {
    "text": "CI contained runtime such as containerd",
    "start": "750000",
    "end": "753420"
  },
  {
    "text": "and cryo through a stream through the",
    "start": "753420",
    "end": "756240"
  },
  {
    "text": "stream interface so under the hood",
    "start": "756240",
    "end": "758660"
  },
  {
    "text": "kalashim input translate ocis back to a",
    "start": "758660",
    "end": "763440"
  },
  {
    "text": "set of VMS back and launch a virtual",
    "start": "763440",
    "end": "766800"
  },
  {
    "text": "machine through the hypervisors such as",
    "start": "766800",
    "end": "769260"
  },
  {
    "text": "Kimu and Cloud hypervisor",
    "start": "769260",
    "end": "772200"
  },
  {
    "text": "and inside the gas via there's also",
    "start": "772200",
    "end": "774720"
  },
  {
    "text": "agent called Car Agent the calcium can",
    "start": "774720",
    "end": "777959"
  },
  {
    "text": "interact with the color agents through a",
    "start": "777959",
    "end": "779880"
  },
  {
    "text": "GT V socket socket we stock socket using",
    "start": "779880",
    "end": "784200"
  },
  {
    "text": "tdrpc protocol",
    "start": "784200",
    "end": "786300"
  },
  {
    "text": "the agent is responsible for managing",
    "start": "786300",
    "end": "788880"
  },
  {
    "text": "the container life cycle inside the",
    "start": "788880",
    "end": "790740"
  },
  {
    "text": "guest VM",
    "start": "790740",
    "end": "792839"
  },
  {
    "text": "the kalashim also translate connect IO",
    "start": "792839",
    "end": "796980"
  },
  {
    "text": "stream between the",
    "start": "796980",
    "end": "798720"
  },
  {
    "text": "CI runtime such as continuity with the",
    "start": "798720",
    "end": "801420"
  },
  {
    "text": "container inside the gas through the to",
    "start": "801420",
    "end": "805260"
  },
  {
    "text": "the RPC protocol",
    "start": "805260",
    "end": "808339"
  },
  {
    "text": "so uh",
    "start": "808440",
    "end": "810600"
  },
  {
    "text": "how do we mount a volume in color",
    "start": "810600",
    "end": "812760"
  },
  {
    "text": "container",
    "start": "812760",
    "end": "814620"
  },
  {
    "text": "a traditional way is very similar to",
    "start": "814620",
    "end": "817560"
  },
  {
    "text": "what deep just described the CSI will",
    "start": "817560",
    "end": "820980"
  },
  {
    "text": "prepare the volume will bind down the",
    "start": "820980",
    "end": "824579"
  },
  {
    "text": "volume to the third part mount",
    "start": "824579",
    "end": "827339"
  },
  {
    "text": "and then the color Sheen will do the",
    "start": "827339",
    "end": "829680"
  },
  {
    "text": "magic it will actually find Mount again",
    "start": "829680",
    "end": "832139"
  },
  {
    "text": "the per pod Mount to a shelled location",
    "start": "832139",
    "end": "835860"
  },
  {
    "text": "and the shell directory is then shelled",
    "start": "835860",
    "end": "839220"
  },
  {
    "text": "to the get through the shell file system",
    "start": "839220",
    "end": "841860"
  },
  {
    "text": "called word ioffs",
    "start": "841860",
    "end": "844380"
  },
  {
    "text": "so this approach is very straightforward",
    "start": "844380",
    "end": "847079"
  },
  {
    "text": "it works out of the box",
    "start": "847079",
    "end": "849060"
  },
  {
    "text": "but it does come with a few trade-offs",
    "start": "849060",
    "end": "852120"
  },
  {
    "text": "first is the performance",
    "start": "852120",
    "end": "854220"
  },
  {
    "text": "with lfs has a much worse performance",
    "start": "854220",
    "end": "857220"
  },
  {
    "text": "compared to a power virtualized Rock",
    "start": "857220",
    "end": "860100"
  },
  {
    "text": "device such as without Blk and with iOS",
    "start": "860100",
    "end": "863220"
  },
  {
    "text": "Kazi",
    "start": "863220",
    "end": "864959"
  },
  {
    "text": "it also sacrifice the acceleration",
    "start": "864959",
    "end": "867540"
  },
  {
    "text": "because now you need to mount a file",
    "start": "867540",
    "end": "869399"
  },
  {
    "text": "system on the host",
    "start": "869399",
    "end": "872160"
  },
  {
    "text": "there are also other gaps existing with",
    "start": "872160",
    "end": "875160"
  },
  {
    "text": "lfs it doesn't Implement all the",
    "start": "875160",
    "end": "878220"
  },
  {
    "text": "features that exist in a native file",
    "start": "878220",
    "end": "880800"
  },
  {
    "text": "system such as open by handout",
    "start": "880800",
    "end": "885199"
  },
  {
    "text": "so we actually did some micro Benchmark",
    "start": "886560",
    "end": "890100"
  },
  {
    "text": "using the fio as you can see compiled to",
    "start": "890100",
    "end": "894060"
  },
  {
    "text": "the lbrk with spdk as the data plan the",
    "start": "894060",
    "end": "898620"
  },
  {
    "text": "web RFS has much worse performance in",
    "start": "898620",
    "end": "901500"
  },
  {
    "text": "the random right and random read",
    "start": "901500",
    "end": "904139"
  },
  {
    "text": "the run the sequential right is similar",
    "start": "904139",
    "end": "907079"
  },
  {
    "text": "the sequential read is actually faster",
    "start": "907079",
    "end": "909600"
  },
  {
    "text": "so I think this is largely due to the",
    "start": "909600",
    "end": "912959"
  },
  {
    "text": "caching and the the pre-fetching",
    "start": "912959",
    "end": "918000"
  },
  {
    "text": "so because of this caveat we explore a",
    "start": "919380",
    "end": "923639"
  },
  {
    "text": "alternative approach which is to",
    "start": "923639",
    "end": "926459"
  },
  {
    "text": "delegate the PV Mount and preparation to",
    "start": "926459",
    "end": "929519"
  },
  {
    "text": "The Container runtime inside the guest",
    "start": "929519",
    "end": "931560"
  },
  {
    "text": "we call the direct assigned storage",
    "start": "931560",
    "end": "935839"
  },
  {
    "text": "so the main difference here is instead",
    "start": "935940",
    "end": "938519"
  },
  {
    "text": "of riding on with our FS the color",
    "start": "938519",
    "end": "941399"
  },
  {
    "text": "scheme will actually attach the block",
    "start": "941399",
    "end": "943980"
  },
  {
    "text": "device to the guest through the without",
    "start": "943980",
    "end": "946980"
  },
  {
    "text": "BLK",
    "start": "946980",
    "end": "948420"
  },
  {
    "text": "and then inside the guest the agent will",
    "start": "948420",
    "end": "951540"
  },
  {
    "text": "handle the mount and and develop the",
    "start": "951540",
    "end": "954540"
  },
  {
    "text": "preparation",
    "start": "954540",
    "end": "956220"
  },
  {
    "text": "so here is a much more detailed view of",
    "start": "956220",
    "end": "959459"
  },
  {
    "text": "the sequence so to",
    "start": "959459",
    "end": "963079"
  },
  {
    "text": "when create a volume the correct will",
    "start": "963079",
    "end": "965880"
  },
  {
    "text": "call the notepad urine and then the CSI",
    "start": "965880",
    "end": "969540"
  },
  {
    "text": "driver plug instead will invoke a new",
    "start": "969540",
    "end": "972959"
  },
  {
    "text": "command line we Implement in color",
    "start": "972959",
    "end": "975240"
  },
  {
    "text": "runtime for the direct volume at and",
    "start": "975240",
    "end": "977699"
  },
  {
    "text": "pass the amount information to the color",
    "start": "977699",
    "end": "979680"
  },
  {
    "text": "runtime the color runtime then persisted",
    "start": "979680",
    "end": "982680"
  },
  {
    "text": "amount of information on the disk",
    "start": "982680",
    "end": "985139"
  },
  {
    "text": "so when the calcium is ready to start",
    "start": "985139",
    "end": "987959"
  },
  {
    "text": "the pot sandbox it will read this amount",
    "start": "987959",
    "end": "991560"
  },
  {
    "text": "information from the file then we will",
    "start": "991560",
    "end": "994019"
  },
  {
    "text": "pass this information to the color agent",
    "start": "994019",
    "end": "996899"
  },
  {
    "text": "before that it actually first will",
    "start": "996899",
    "end": "999240"
  },
  {
    "text": "attached with our BRK device to the",
    "start": "999240",
    "end": "1001699"
  },
  {
    "text": "hypervisor first and then the color",
    "start": "1001699",
    "end": "1004160"
  },
  {
    "text": "agent will Mount fl's FS by mount to the",
    "start": "1004160",
    "end": "1008540"
  },
  {
    "text": "volume to the container and finish the",
    "start": "1008540",
    "end": "1010880"
  },
  {
    "text": "whole process",
    "start": "1010880",
    "end": "1013480"
  },
  {
    "text": "so the amount is actually simpler when",
    "start": "1013940",
    "end": "1017060"
  },
  {
    "text": "the part is gone all the mount will be",
    "start": "1017060",
    "end": "1019220"
  },
  {
    "text": "destroyed inside the guest so on the",
    "start": "1019220",
    "end": "1021980"
  },
  {
    "text": "host only thing left is basically the",
    "start": "1021980",
    "end": "1024140"
  },
  {
    "text": "mount info file so when the coupon code",
    "start": "1024140",
    "end": "1026959"
  },
  {
    "text": "note on publish it says that drive",
    "start": "1026959",
    "end": "1029540"
  },
  {
    "text": "plugin will basically just invoke the",
    "start": "1029540",
    "end": "1032000"
  },
  {
    "text": "direct volume remove CLI the color",
    "start": "1032000",
    "end": "1035418"
  },
  {
    "text": "runtime just remove the not the info",
    "start": "1035419",
    "end": "1037579"
  },
  {
    "text": "file",
    "start": "1037579",
    "end": "1039880"
  },
  {
    "text": "so with this approach we also implement",
    "start": "1040939",
    "end": "1043579"
  },
  {
    "text": "the volume stats so the CSI plugin can",
    "start": "1043579",
    "end": "1047480"
  },
  {
    "text": "invoke direct volume stats",
    "start": "1047480",
    "end": "1050480"
  },
  {
    "text": "the Color Run time the instant tdrpc",
    "start": "1050480",
    "end": "1053360"
  },
  {
    "text": "request to color agent the car agent and",
    "start": "1053360",
    "end": "1056120"
  },
  {
    "text": "collect returned warning stats back to",
    "start": "1056120",
    "end": "1058640"
  },
  {
    "text": "the runtime into the CSI driver plugin",
    "start": "1058640",
    "end": "1063400"
  },
  {
    "text": "similarly to resize the volume the CSI",
    "start": "1063799",
    "end": "1066860"
  },
  {
    "text": "plugin can invoke the drag volume resize",
    "start": "1066860",
    "end": "1069500"
  },
  {
    "text": "and then the cut runtime will first",
    "start": "1069500",
    "end": "1072280"
  },
  {
    "text": "resize the block device through the",
    "start": "1072280",
    "end": "1074900"
  },
  {
    "text": "hypervisor assuming the hypervisor",
    "start": "1074900",
    "end": "1077059"
  },
  {
    "text": "support in this feature and then send",
    "start": "1077059",
    "end": "1079220"
  },
  {
    "text": "the to the RPC request to the car agent",
    "start": "1079220",
    "end": "1082220"
  },
  {
    "text": "to resize the volume which the car agent",
    "start": "1082220",
    "end": "1086000"
  },
  {
    "text": "just refresh the file system metadata",
    "start": "1086000",
    "end": "1090760"
  },
  {
    "text": "so next I'll just do a quick demo a live",
    "start": "1091520",
    "end": "1096140"
  },
  {
    "text": "demo so I already have a yaml file here",
    "start": "1096140",
    "end": "1102140"
  },
  {
    "text": "so this yaml file it has basically has a",
    "start": "1102140",
    "end": "1105620"
  },
  {
    "text": "very as a container then it has two",
    "start": "1105620",
    "end": "1107480"
  },
  {
    "text": "volumes one is the CSI volume which use",
    "start": "1107480",
    "end": "1110780"
  },
  {
    "text": "the",
    "start": "1110780",
    "end": "1111799"
  },
  {
    "text": "direct assigned storage the other is the",
    "start": "1111799",
    "end": "1114380"
  },
  {
    "text": "with our FS volume",
    "start": "1114380",
    "end": "1116840"
  },
  {
    "text": "we also Implement our own",
    "start": "1116840",
    "end": "1119380"
  },
  {
    "text": "the storage cost and the PVC and we can",
    "start": "1119380",
    "end": "1122900"
  },
  {
    "text": "skip those",
    "start": "1122900",
    "end": "1125740"
  },
  {
    "text": "so our party's Yama file",
    "start": "1129380",
    "end": "1134679"
  },
  {
    "text": "okay let's wait a couple more seconds",
    "start": "1139520",
    "end": "1141740"
  },
  {
    "text": "okay it's already running",
    "start": "1141740",
    "end": "1143780"
  },
  {
    "text": "so we can exact into the",
    "start": "1143780",
    "end": "1147200"
  },
  {
    "text": "zigzag into the pod",
    "start": "1147200",
    "end": "1150639"
  },
  {
    "text": "so now we are inside the container in a",
    "start": "1157280",
    "end": "1160640"
  },
  {
    "text": "guest VM we can do a amount we can show",
    "start": "1160640",
    "end": "1164900"
  },
  {
    "text": "all the amount",
    "start": "1164900",
    "end": "1166460"
  },
  {
    "text": "for you can see here there's the red I",
    "start": "1166460",
    "end": "1168500"
  },
  {
    "text": "will be okay volume which is uh Mount to",
    "start": "1168500",
    "end": "1172100"
  },
  {
    "text": "Dev slash VDC it does the valid BLK",
    "start": "1172100",
    "end": "1175280"
  },
  {
    "text": "device that's attached to the VM and",
    "start": "1175280",
    "end": "1177980"
  },
  {
    "text": "then the type is ext4 that's what we",
    "start": "1177980",
    "end": "1180919"
  },
  {
    "text": "designed a native file system",
    "start": "1180919",
    "end": "1183320"
  },
  {
    "text": "and then there's also this red IO",
    "start": "1183320",
    "end": "1187220"
  },
  {
    "text": "FS volume so this is has type with lfs",
    "start": "1187220",
    "end": "1191419"
  },
  {
    "text": "so this is showed front host",
    "start": "1191419",
    "end": "1196360"
  },
  {
    "text": "so we can also log into the node to take",
    "start": "1199340",
    "end": "1203240"
  },
  {
    "text": "a look at the market info file",
    "start": "1203240",
    "end": "1206799"
  },
  {
    "text": "so the non-info file is stored in a",
    "start": "1214100",
    "end": "1216500"
  },
  {
    "text": "color container directory under the",
    "start": "1216500",
    "end": "1219080"
  },
  {
    "text": "wrong color container Shield",
    "start": "1219080",
    "end": "1222399"
  },
  {
    "text": "so the name is basically the past",
    "start": "1223880",
    "end": "1226059"
  },
  {
    "text": "encoded with base64",
    "start": "1226059",
    "end": "1230260"
  },
  {
    "text": "you can take a look at the amount info",
    "start": "1233660",
    "end": "1236120"
  },
  {
    "text": "so it's very simple it only it when I",
    "start": "1236120",
    "end": "1239000"
  },
  {
    "text": "have the device it have the fs type",
    "start": "1239000",
    "end": "1241419"
  },
  {
    "text": "there are also a few other options with",
    "start": "1241419",
    "end": "1244460"
  },
  {
    "text": "the port such as like the and how the",
    "start": "1244460",
    "end": "1248240"
  },
  {
    "text": "change in the user of the fs owners",
    "start": "1248240",
    "end": "1253179"
  },
  {
    "text": "so this is basically a v host user block",
    "start": "1254000",
    "end": "1256700"
  },
  {
    "text": "device",
    "start": "1256700",
    "end": "1259059"
  },
  {
    "text": "so that's the demo",
    "start": "1261080",
    "end": "1264640"
  },
  {
    "text": "so the current approach it requires a",
    "start": "1265880",
    "end": "1268880"
  },
  {
    "text": "specific CSI implementation there's no",
    "start": "1268880",
    "end": "1272179"
  },
  {
    "text": "change in Kubla CI OSI or css specs and",
    "start": "1272179",
    "end": "1277039"
  },
  {
    "text": "most of the post-mod configuration works",
    "start": "1277039",
    "end": "1279980"
  },
  {
    "text": "but there are also a few drawbacks right",
    "start": "1279980",
    "end": "1283760"
  },
  {
    "text": "now for example the sub pass report is",
    "start": "1283760",
    "end": "1286280"
  },
  {
    "text": "not supported right now",
    "start": "1286280",
    "end": "1288200"
  },
  {
    "text": "the CSI plugin also need to be",
    "start": "1288200",
    "end": "1290600"
  },
  {
    "text": "customized and need to be aware of the",
    "start": "1290600",
    "end": "1293240"
  },
  {
    "text": "runtime class",
    "start": "1293240",
    "end": "1294679"
  },
  {
    "text": "so next deep we'll talk uh talk about a",
    "start": "1294679",
    "end": "1298159"
  },
  {
    "text": "future direction that can make this more",
    "start": "1298159",
    "end": "1300559"
  },
  {
    "text": "generic",
    "start": "1300559",
    "end": "1302539"
  },
  {
    "text": "great thanks a lot thanks for the",
    "start": "1302539",
    "end": "1304340"
  },
  {
    "text": "wonderful demo",
    "start": "1304340",
    "end": "1306440"
  },
  {
    "text": "so let's look at how the feature of this",
    "start": "1306440",
    "end": "1308840"
  },
  {
    "text": "would look like so we are basically",
    "start": "1308840",
    "end": "1310760"
  },
  {
    "text": "exploring kubernetes enhancement",
    "start": "1310760",
    "end": "1312799"
  },
  {
    "text": "proposal specifically 2857 Upstream with",
    "start": "1312799",
    "end": "1316220"
  },
  {
    "text": "mainly six storage with a little bit of",
    "start": "1316220",
    "end": "1318320"
  },
  {
    "text": "signaled involvement as well",
    "start": "1318320",
    "end": "1320299"
  },
  {
    "text": "to address some of the limitations Fang",
    "start": "1320299",
    "end": "1323059"
  },
  {
    "text": "just went over",
    "start": "1323059",
    "end": "1324380"
  },
  {
    "text": "so the idea there is can we enhance the",
    "start": "1324380",
    "end": "1327260"
  },
  {
    "text": "cubelet the runtime class and the CSI",
    "start": "1327260",
    "end": "1329960"
  },
  {
    "text": "spec in a way that allows first of all",
    "start": "1329960",
    "end": "1333020"
  },
  {
    "text": "the cubelet to pass down all the",
    "start": "1333020",
    "end": "1335179"
  },
  {
    "text": "necessary parameters around Postman",
    "start": "1335179",
    "end": "1336980"
  },
  {
    "text": "configuration down to the CSI plugin and",
    "start": "1336980",
    "end": "1340100"
  },
  {
    "text": "basically not have the CSI plugin need",
    "start": "1340100",
    "end": "1342200"
  },
  {
    "text": "to do a cube API server lookup that'll",
    "start": "1342200",
    "end": "1345380"
  },
  {
    "text": "help solve one of the negatives the",
    "start": "1345380",
    "end": "1348500"
  },
  {
    "text": "other is",
    "start": "1348500",
    "end": "1350419"
  },
  {
    "text": "one of the other feedbacks have been",
    "start": "1350419",
    "end": "1352220"
  },
  {
    "text": "like if the runtime class that's already",
    "start": "1352220",
    "end": "1354200"
  },
  {
    "text": "there to specify uh the the micro VM",
    "start": "1354200",
    "end": "1357679"
  },
  {
    "text": "runtime details can that be enhanced to",
    "start": "1357679",
    "end": "1360380"
  },
  {
    "text": "have fields that allows the runtime to",
    "start": "1360380",
    "end": "1362659"
  },
  {
    "text": "basically advertise to cubelet that hey",
    "start": "1362659",
    "end": "1364700"
  },
  {
    "text": "I am capable of doing this file system",
    "start": "1364700",
    "end": "1366620"
  },
  {
    "text": "mounting and delegation from a CSI",
    "start": "1366620",
    "end": "1368840"
  },
  {
    "text": "plugin so the cubelet will essentially",
    "start": "1368840",
    "end": "1371240"
  },
  {
    "text": "be enhanced to look up and match the",
    "start": "1371240",
    "end": "1373880"
  },
  {
    "text": "capabilities of the runtime with that of",
    "start": "1373880",
    "end": "1376100"
  },
  {
    "text": "the CSI plugin and if all the",
    "start": "1376100",
    "end": "1379220"
  },
  {
    "text": "capabilities of the Pod spec match the",
    "start": "1379220",
    "end": "1381740"
  },
  {
    "text": "capabilities of the plugin and the",
    "start": "1381740",
    "end": "1383360"
  },
  {
    "text": "runtime around all kinds of Mount and",
    "start": "1383360",
    "end": "1385760"
  },
  {
    "text": "post mount configuration cubelet will",
    "start": "1385760",
    "end": "1388100"
  },
  {
    "text": "basically automatically ask the CSI",
    "start": "1388100",
    "end": "1390080"
  },
  {
    "text": "plugin to perform the delegation of the",
    "start": "1390080",
    "end": "1392659"
  },
  {
    "text": "file system Mount and the postmod",
    "start": "1392659",
    "end": "1394700"
  },
  {
    "text": "operations",
    "start": "1394700",
    "end": "1395900"
  },
  {
    "text": "and one of the final aspects of this",
    "start": "1395900",
    "end": "1398059"
  },
  {
    "text": "enhancement will be that we want all",
    "start": "1398059",
    "end": "1400280"
  },
  {
    "text": "Postman configurations to be supported",
    "start": "1400280",
    "end": "1402039"
  },
  {
    "text": "including things such as subpath",
    "start": "1402039",
    "end": "1404659"
  },
  {
    "text": "handling",
    "start": "1404659",
    "end": "1407080"
  },
  {
    "text": "there are a couple of gotchas though",
    "start": "1408260",
    "end": "1410860"
  },
  {
    "text": "one is if you have scenarios where there",
    "start": "1410860",
    "end": "1415159"
  },
  {
    "text": "are multiple pods that are associated",
    "start": "1415159",
    "end": "1417440"
  },
  {
    "text": "with affinity relationship that get",
    "start": "1417440",
    "end": "1419600"
  },
  {
    "text": "scheduled on the same node and try to",
    "start": "1419600",
    "end": "1421580"
  },
  {
    "text": "mount the same volume then there might",
    "start": "1421580",
    "end": "1423559"
  },
  {
    "text": "be a problem so the standard access mode",
    "start": "1423559",
    "end": "1426140"
  },
  {
    "text": "of read write once on PVCs may not be",
    "start": "1426140",
    "end": "1429080"
  },
  {
    "text": "safe in such scenarios especially if you",
    "start": "1429080",
    "end": "1431480"
  },
  {
    "text": "if you're using a standard file system",
    "start": "1431480",
    "end": "1433220"
  },
  {
    "text": "like xfs or exe4 there will be file",
    "start": "1433220",
    "end": "1436280"
  },
  {
    "text": "system corruption because the same file",
    "start": "1436280",
    "end": "1438260"
  },
  {
    "text": "system will get mounted by multiple Pods",
    "start": "1438260",
    "end": "1440960"
  },
  {
    "text": "at the same time",
    "start": "1440960",
    "end": "1442640"
  },
  {
    "text": "to work against that what we are",
    "start": "1442640",
    "end": "1444500"
  },
  {
    "text": "recommending as part of the enhancement",
    "start": "1444500",
    "end": "1446000"
  },
  {
    "text": "is to use a new CSI access mode that has",
    "start": "1446000",
    "end": "1448700"
  },
  {
    "text": "been recently introduced called read",
    "start": "1448700",
    "end": "1450500"
  },
  {
    "text": "write one spot typically in our",
    "start": "1450500",
    "end": "1453500"
  },
  {
    "text": "experience most pods do not have",
    "start": "1453500",
    "end": "1455659"
  },
  {
    "text": "Affinity relationship and this should",
    "start": "1455659",
    "end": "1457400"
  },
  {
    "text": "just work out but just wanted to call",
    "start": "1457400",
    "end": "1459860"
  },
  {
    "text": "this out",
    "start": "1459860",
    "end": "1461659"
  },
  {
    "text": "the other interesting scenario to",
    "start": "1461659",
    "end": "1463460"
  },
  {
    "text": "consider is that if the mounting of the",
    "start": "1463460",
    "end": "1466820"
  },
  {
    "text": "volume requires a secret then it's not",
    "start": "1466820",
    "end": "1470000"
  },
  {
    "text": "recommended to use this approach because",
    "start": "1470000",
    "end": "1472039"
  },
  {
    "text": "the mount info.json file that Fang was",
    "start": "1472039",
    "end": "1474620"
  },
  {
    "text": "going over that contains all the mount",
    "start": "1474620",
    "end": "1477020"
  },
  {
    "text": "options that are necessary and we do not",
    "start": "1477020",
    "end": "1479480"
  },
  {
    "text": "want a secret to be persisted in the OS",
    "start": "1479480",
    "end": "1481580"
  },
  {
    "text": "disk",
    "start": "1481580",
    "end": "1483940"
  },
  {
    "text": "we also considered some other",
    "start": "1485539",
    "end": "1487220"
  },
  {
    "text": "alternatives on how we can potentially",
    "start": "1487220",
    "end": "1489140"
  },
  {
    "text": "get this going so one question that came",
    "start": "1489140",
    "end": "1492080"
  },
  {
    "text": "up is uh how about enhancing CRI and oci",
    "start": "1492080",
    "end": "1496039"
  },
  {
    "text": "and basically all the CRI runtimes and",
    "start": "1496039",
    "end": "1498860"
  },
  {
    "text": "OCR runtimes as well to plumb this",
    "start": "1498860",
    "end": "1501140"
  },
  {
    "text": "storage support all the way through",
    "start": "1501140",
    "end": "1503059"
  },
  {
    "text": "the main the the main limitation we ran",
    "start": "1503059",
    "end": "1505640"
  },
  {
    "text": "into is that storage Primitives are more",
    "start": "1505640",
    "end": "1508400"
  },
  {
    "text": "or less absent in the runtime interfaces",
    "start": "1508400",
    "end": "1510500"
  },
  {
    "text": "today and there are no ways or no like",
    "start": "1510500",
    "end": "1514460"
  },
  {
    "text": "API Primitives today through which uh",
    "start": "1514460",
    "end": "1518360"
  },
  {
    "text": "mounted file systems stats can be",
    "start": "1518360",
    "end": "1521419"
  },
  {
    "text": "queried on a pod that is already running",
    "start": "1521419",
    "end": "1523940"
  },
  {
    "text": "it's also impossible to say you know",
    "start": "1523940",
    "end": "1526400"
  },
  {
    "text": "resize this volume that is mounted by a",
    "start": "1526400",
    "end": "1528440"
  },
  {
    "text": "pod however this could be a much longer",
    "start": "1528440",
    "end": "1530720"
  },
  {
    "text": "term effort once the runtime interfaces",
    "start": "1530720",
    "end": "1533179"
  },
  {
    "text": "are made a little broader and some",
    "start": "1533179",
    "end": "1536179"
  },
  {
    "text": "scenarios like this becomes part of the",
    "start": "1536179",
    "end": "1538880"
  },
  {
    "text": "set of problems they are trying to",
    "start": "1538880",
    "end": "1540080"
  },
  {
    "text": "address",
    "start": "1540080",
    "end": "1542200"
  },
  {
    "text": "so to Quick a quick recap of the",
    "start": "1543620",
    "end": "1545840"
  },
  {
    "text": "takeaways we mainly explored an",
    "start": "1545840",
    "end": "1547580"
  },
  {
    "text": "alternative to the standard Mount",
    "start": "1547580",
    "end": "1549559"
  },
  {
    "text": "workflow for persistent storage we",
    "start": "1549559",
    "end": "1552080"
  },
  {
    "text": "mainly looked at it from a micro VM",
    "start": "1552080",
    "end": "1553700"
  },
  {
    "text": "perspective specifically iqata uh we",
    "start": "1553700",
    "end": "1556940"
  },
  {
    "text": "went over how exactly the delegation of",
    "start": "1556940",
    "end": "1559700"
  },
  {
    "text": "Mount post mount configuration and",
    "start": "1559700",
    "end": "1562340"
  },
  {
    "text": "obtaining stats and resizing of file",
    "start": "1562340",
    "end": "1564980"
  },
  {
    "text": "systems would work through a container",
    "start": "1564980",
    "end": "1567380"
  },
  {
    "text": "runtime Handler",
    "start": "1567380",
    "end": "1568760"
  },
  {
    "text": "we mainly looked at it from the",
    "start": "1568760",
    "end": "1570320"
  },
  {
    "text": "perspective of blog based PVS and the",
    "start": "1570320",
    "end": "1572960"
  },
  {
    "text": "key thing we avoided is mounting the",
    "start": "1572960",
    "end": "1574760"
  },
  {
    "text": "file system in the host and avoided all",
    "start": "1574760",
    "end": "1577220"
  },
  {
    "text": "the associated mind mounts and file",
    "start": "1577220",
    "end": "1579500"
  },
  {
    "text": "system projections through things like",
    "start": "1579500",
    "end": "1581299"
  },
  {
    "text": "what iofs",
    "start": "1581299",
    "end": "1582740"
  },
  {
    "text": "we would love to get your involvement",
    "start": "1582740",
    "end": "1584720"
  },
  {
    "text": "and feedback so feel free to reach out",
    "start": "1584720",
    "end": "1587120"
  },
  {
    "text": "either through the cap process which is",
    "start": "1587120",
    "end": "1589419"
  },
  {
    "text": "cap2857 and you can reach us in the six",
    "start": "1589419",
    "end": "1592880"
  },
  {
    "text": "story slack channel in kubernetes as",
    "start": "1592880",
    "end": "1595159"
  },
  {
    "text": "well as in the Kata Community Slack",
    "start": "1595159",
    "end": "1598600"
  },
  {
    "text": "thanks a lot that was our presentation",
    "start": "1599779",
    "end": "1601580"
  },
  {
    "text": "any questions",
    "start": "1601580",
    "end": "1602780"
  },
  {
    "text": "[Applause]",
    "start": "1602780",
    "end": "1609670"
  },
  {
    "text": "awesome thanks for the demo um just had",
    "start": "1609919",
    "end": "1612200"
  },
  {
    "text": "a question around the usage of block",
    "start": "1612200",
    "end": "1614840"
  },
  {
    "text": "storage which is file storage so the in",
    "start": "1614840",
    "end": "1617360"
  },
  {
    "text": "the demo I'm assuming was using a block",
    "start": "1617360",
    "end": "1619279"
  },
  {
    "text": "device and that's how we were avoiding",
    "start": "1619279",
    "end": "1622279"
  },
  {
    "text": "this cubelet interaction of map by",
    "start": "1622279",
    "end": "1624200"
  },
  {
    "text": "mounting but in in the cap is that a",
    "start": "1624200",
    "end": "1627320"
  },
  {
    "text": "proposal to allow for delegation I just",
    "start": "1627320",
    "end": "1629299"
  },
  {
    "text": "wanted to clarify that point or would",
    "start": "1629299",
    "end": "1631039"
  },
  {
    "text": "users of this feature still have to use",
    "start": "1631039",
    "end": "1632720"
  },
  {
    "text": "block devices",
    "start": "1632720",
    "end": "1634820"
  },
  {
    "text": "so um",
    "start": "1634820",
    "end": "1636740"
  },
  {
    "text": "in the cap from the sink storage",
    "start": "1636740",
    "end": "1638659"
  },
  {
    "text": "Community there's a bit of hesitance to",
    "start": "1638659",
    "end": "1640940"
  },
  {
    "text": "open it up to network file like NFS",
    "start": "1640940",
    "end": "1643880"
  },
  {
    "text": "scenarios as well as block",
    "start": "1643880",
    "end": "1646179"
  },
  {
    "text": "their recommendation is to start off at",
    "start": "1646179",
    "end": "1648980"
  },
  {
    "text": "the alpha stage at least with just block",
    "start": "1648980",
    "end": "1650720"
  },
  {
    "text": "and then move over to Shared file",
    "start": "1650720",
    "end": "1653960"
  },
  {
    "text": "systems however with the approach that",
    "start": "1653960",
    "end": "1656779"
  },
  {
    "text": "Feng went over there's nothing that",
    "start": "1656779",
    "end": "1658760"
  },
  {
    "text": "prevents you from just you know applying",
    "start": "1658760",
    "end": "1661279"
  },
  {
    "text": "the same mechanism to NFS or SMB as well",
    "start": "1661279",
    "end": "1664600"
  },
  {
    "text": "essentially the entire amount will take",
    "start": "1664600",
    "end": "1667159"
  },
  {
    "text": "place within the micro VM environment",
    "start": "1667159",
    "end": "1668840"
  },
  {
    "text": "and cubelet will just be skipping both",
    "start": "1668840",
    "end": "1671840"
  },
  {
    "text": "of the blocks",
    "start": "1671840",
    "end": "1673100"
  },
  {
    "text": "got it okay so does that kind of limit",
    "start": "1673100",
    "end": "1675500"
  },
  {
    "text": "the user's configuration then if they're",
    "start": "1675500",
    "end": "1677059"
  },
  {
    "text": "unable to kind of pass through some of",
    "start": "1677059",
    "end": "1678919"
  },
  {
    "text": "the other semantics of a file system in",
    "start": "1678919",
    "end": "1681799"
  },
  {
    "text": "their storage class",
    "start": "1681799",
    "end": "1683120"
  },
  {
    "text": "and I guess it's kind of dependent on",
    "start": "1683120",
    "end": "1684500"
  },
  {
    "text": "like like having another way to pass",
    "start": "1684500",
    "end": "1686779"
  },
  {
    "text": "information to your CSI driver exactly",
    "start": "1686779",
    "end": "1689419"
  },
  {
    "text": "yeah okay uh it's mainly file system",
    "start": "1689419",
    "end": "1691940"
  },
  {
    "text": "information from the CSI plugin to The",
    "start": "1691940",
    "end": "1694400"
  },
  {
    "text": "Container runtime Handler",
    "start": "1694400",
    "end": "1696620"
  },
  {
    "text": "and the idea is like storage class",
    "start": "1696620",
    "end": "1698299"
  },
  {
    "text": "parameters should already get passed",
    "start": "1698299",
    "end": "1700400"
  },
  {
    "text": "down to the plugin through cubelet",
    "start": "1700400",
    "end": "1701840"
  },
  {
    "text": "through existing means",
    "start": "1701840",
    "end": "1703580"
  },
  {
    "text": "cool",
    "start": "1703580",
    "end": "1706120"
  },
  {
    "text": "any other questions",
    "start": "1711559",
    "end": "1714399"
  },
  {
    "text": "all right going once twice",
    "start": "1722600",
    "end": "1725900"
  },
  {
    "text": "that's it so before we wrap uh I also",
    "start": "1725900",
    "end": "1728840"
  },
  {
    "text": "want to recognize a lot of contributions",
    "start": "1728840",
    "end": "1730340"
  },
  {
    "text": "into this effort from ibojiang and Eric",
    "start": "1730340",
    "end": "1733159"
  },
  {
    "text": "Ernst both of who are here so thanks a",
    "start": "1733159",
    "end": "1735260"
  },
  {
    "text": "lot guys",
    "start": "1735260",
    "end": "1736090"
  },
  {
    "text": "[Applause]",
    "start": "1736090",
    "end": "1741299"
  }
]