[
  {
    "start": "0",
    "end": "62000"
  },
  {
    "text": "all right let's begin welcome everyone",
    "start": "30",
    "end": "3000"
  },
  {
    "text": "thanks for coming",
    "start": "3000",
    "end": "3929"
  },
  {
    "text": "this is extending kubernetes with",
    "start": "3929",
    "end": "5520"
  },
  {
    "text": "directions farmers my name is Angela",
    "start": "5520",
    "end": "7830"
  },
  {
    "text": "Tina and I'm a software engineer on the",
    "start": "7830",
    "end": "10019"
  },
  {
    "text": "Google kubernetes engine security team",
    "start": "10019",
    "end": "12230"
  },
  {
    "text": "so today I'm gonna explain to you",
    "start": "12230",
    "end": "15929"
  },
  {
    "text": "briefly what transformers are why they",
    "start": "15929",
    "end": "17760"
  },
  {
    "text": "exist in companies and then most of the",
    "start": "17760",
    "end": "20250"
  },
  {
    "text": "session will spend actually walking",
    "start": "20250",
    "end": "21720"
  },
  {
    "text": "through the guide of how to implement",
    "start": "21720",
    "end": "23130"
  },
  {
    "text": "one so starting from a business problem",
    "start": "23130",
    "end": "25080"
  },
  {
    "text": "are built into cube API server than two",
    "start": "25080",
    "end": "28410"
  },
  {
    "text": "envelope transformers that help us with",
    "start": "28410",
    "end": "30150"
  },
  {
    "text": "key rotation and management and then",
    "start": "30150",
    "end": "32070"
  },
  {
    "text": "into KMS plugins and lastly I want to",
    "start": "32070",
    "end": "34050"
  },
  {
    "text": "talk a little bit about how we secure",
    "start": "34050",
    "end": "36149"
  },
  {
    "text": "came as plugins that we end up at the",
    "start": "36149",
    "end": "39059"
  },
  {
    "text": "end with so do you understand what's",
    "start": "39059",
    "end": "42210"
  },
  {
    "text": "transformers are I want to look at cube",
    "start": "42210",
    "end": "44550"
  },
  {
    "text": "API server as consisting of two layers",
    "start": "44550",
    "end": "46379"
  },
  {
    "text": "you have the RPC layer where your",
    "start": "46379",
    "end": "48450"
  },
  {
    "text": "requests come in and out handles",
    "start": "48450",
    "end": "50610"
  },
  {
    "text": "authentication authorization parsing",
    "start": "50610",
    "end": "52739"
  },
  {
    "text": "validation all those things and then",
    "start": "52739",
    "end": "54629"
  },
  {
    "text": "there's the storage layer which is",
    "start": "54629",
    "end": "55829"
  },
  {
    "text": "essentially a cube API server talking to",
    "start": "55829",
    "end": "57899"
  },
  {
    "text": "HDD and doing any serialization and",
    "start": "57899",
    "end": "59730"
  },
  {
    "text": "deserialization at the RPC layer",
    "start": "59730",
    "end": "64040"
  },
  {
    "start": "62000",
    "end": "62000"
  },
  {
    "text": "experience provides you with",
    "start": "64040",
    "end": "65670"
  },
  {
    "text": "extensibility in the form of web hooks",
    "start": "65670",
    "end": "67590"
  },
  {
    "text": "so you may have heard about admission",
    "start": "67590",
    "end": "69240"
  },
  {
    "text": "web hooks the idea is pretty simple you",
    "start": "69240",
    "end": "72060"
  },
  {
    "text": "just provide some custom piece of logic",
    "start": "72060",
    "end": "74880"
  },
  {
    "text": "that is injected in the path of all of",
    "start": "74880",
    "end": "78450"
  },
  {
    "text": "the objects to traverse the API the same",
    "start": "78450",
    "end": "81210"
  },
  {
    "text": "thing at the storage layer is provided",
    "start": "81210",
    "end": "83340"
  },
  {
    "text": "by transformers so kms plugin is an",
    "start": "83340",
    "end": "85619"
  },
  {
    "text": "example of a transformer but the idea is",
    "start": "85619",
    "end": "87570"
  },
  {
    "text": "the same you inject some custom logic",
    "start": "87570",
    "end": "89250"
  },
  {
    "text": "that sits in between your objects as it",
    "start": "89250",
    "end": "92009"
  },
  {
    "text": "can come in and out of HDD by convention",
    "start": "92009",
    "end": "96420"
  },
  {
    "text": "transformers look at all the data as a",
    "start": "96420",
    "end": "98970"
  },
  {
    "text": "peg by blobs while web hooks look at",
    "start": "98970",
    "end": "101729"
  },
  {
    "text": "them as actual part objects so they will",
    "start": "101729",
    "end": "104100"
  },
  {
    "text": "look at individual fields and maybe",
    "start": "104100",
    "end": "106649"
  },
  {
    "text": "change their behavior maybe mutate the",
    "start": "106649",
    "end": "108329"
  },
  {
    "text": "fields",
    "start": "108329",
    "end": "109320"
  },
  {
    "text": "business of logic obviously that's just",
    "start": "109320",
    "end": "111840"
  },
  {
    "text": "the convention transformers are free to",
    "start": "111840",
    "end": "113640"
  },
  {
    "text": "parse all the objects as they come in",
    "start": "113640",
    "end": "115500"
  },
  {
    "text": "and out but if you find yourself needing",
    "start": "115500",
    "end": "117810"
  },
  {
    "text": "to do that web hooks are probably a",
    "start": "117810",
    "end": "119369"
  },
  {
    "text": "better fit for your use case so I buy it",
    "start": "119369",
    "end": "123210"
  },
  {
    "text": "sake Russians farmers at all Keep Calm",
    "start": "123210",
    "end": "126119"
  },
  {
    "text": "first of all transformers are someone",
    "start": "126119",
    "end": "129300"
  },
  {
    "text": "under documented it's kind of difficult",
    "start": "129300",
    "end": "131190"
  },
  {
    "text": "to figure out how the code base",
    "start": "131190",
    "end": "133830"
  },
  {
    "text": "sure how how to implement one and my",
    "start": "133830",
    "end": "137160"
  },
  {
    "text": "colleague Alex to knock off Sookie has",
    "start": "137160",
    "end": "139080"
  },
  {
    "text": "spent a lot of time working with",
    "start": "139080",
    "end": "140220"
  },
  {
    "text": "transformers for jiggy and there's some",
    "start": "140220",
    "end": "143520"
  },
  {
    "text": "valuable lessons to be learned from from",
    "start": "143520",
    "end": "145590"
  },
  {
    "text": "his work and finally with this sole new",
    "start": "145590",
    "end": "148710"
  },
  {
    "text": "shared knowledge I want to encourage",
    "start": "148710",
    "end": "150890"
  },
  {
    "text": "some new contributions maybe to just",
    "start": "150890",
    "end": "153200"
  },
  {
    "text": "improve the codebase maybe to redesign",
    "start": "153200",
    "end": "155460"
  },
  {
    "text": "the entire feature maybe to implement",
    "start": "155460",
    "end": "157530"
  },
  {
    "text": "some new kinds of transformers for use",
    "start": "157530",
    "end": "159960"
  },
  {
    "text": "case that are not obvious right now the",
    "start": "159960",
    "end": "163170"
  },
  {
    "start": "162000",
    "end": "162000"
  },
  {
    "text": "reason transformers were created in the",
    "start": "163170",
    "end": "164730"
  },
  {
    "text": "first place and kubernetes is because by",
    "start": "164730",
    "end": "166740"
  },
  {
    "text": "default cube api server does not encrypt",
    "start": "166740",
    "end": "169860"
  },
  {
    "text": "any of your secrets at rest so that",
    "start": "169860",
    "end": "171900"
  },
  {
    "text": "means all of your data that you submit",
    "start": "171900",
    "end": "174600"
  },
  {
    "text": "to your api is starting your ed CG data",
    "start": "174600",
    "end": "176610"
  },
  {
    "text": "file encoded in some binary format but",
    "start": "176610",
    "end": "180210"
  },
  {
    "text": "it's essentially plaintext and transform",
    "start": "180210",
    "end": "184320"
  },
  {
    "text": "us exist to solve that for at least the",
    "start": "184320",
    "end": "186600"
  },
  {
    "text": "secrets by encrypting them before",
    "start": "186600",
    "end": "188250"
  },
  {
    "text": "starting to HDD the reason it's a",
    "start": "188250",
    "end": "190830"
  },
  {
    "text": "problem is if you look at someone for",
    "start": "190830",
    "end": "194880"
  },
  {
    "text": "example creating a new secret in your",
    "start": "194880",
    "end": "197820"
  },
  {
    "text": "API they send it to keep api server then",
    "start": "197820",
    "end": "200580"
  },
  {
    "text": "cube api server encodes that in some",
    "start": "200580",
    "end": "202620"
  },
  {
    "text": "format but essentially stores it in",
    "start": "202620",
    "end": "204330"
  },
  {
    "text": "plain text so if an attacker gets ahold",
    "start": "204330",
    "end": "206670"
  },
  {
    "text": "of your HCV data they have access to all",
    "start": "206670",
    "end": "209070"
  },
  {
    "text": "your secrets anything that your",
    "start": "209070",
    "end": "210810"
  },
  {
    "text": "workloads running in your cluster have",
    "start": "210810",
    "end": "212160"
  },
  {
    "text": "access to you you might think well if",
    "start": "212160",
    "end": "215040"
  },
  {
    "text": "you spend a lot of time hardening your",
    "start": "215040",
    "end": "216600"
  },
  {
    "text": "master VMs your databases your API you",
    "start": "216600",
    "end": "219239"
  },
  {
    "text": "have all the are back rules everything",
    "start": "219239",
    "end": "220860"
  },
  {
    "text": "is bulletproof but consider this case",
    "start": "220860",
    "end": "223800"
  },
  {
    "text": "for offline attacks we have a cluster",
    "start": "223800",
    "end": "226350"
  },
  {
    "text": "here where we have a credential stored",
    "start": "226350",
    "end": "228930"
  },
  {
    "text": "in our HDD that is just a credential to",
    "start": "228930",
    "end": "231810"
  },
  {
    "text": "authenticate to some remote database",
    "start": "231810",
    "end": "233190"
  },
  {
    "text": "that stores a bunch of sensitive data",
    "start": "233190",
    "end": "235550"
  },
  {
    "text": "our attacker comes along tries to muck",
    "start": "235550",
    "end": "238770"
  },
  {
    "text": "around with our VM or API and nothing",
    "start": "238770",
    "end": "241320"
  },
  {
    "text": "works it's indeed like really hard and",
    "start": "241320",
    "end": "243840"
  },
  {
    "text": "set up a very well protected cluster but",
    "start": "243840",
    "end": "247290"
  },
  {
    "text": "we also configure our cluster to do a",
    "start": "247290",
    "end": "248880"
  },
  {
    "text": "daily offline backup of HDD data for",
    "start": "248880",
    "end": "252120"
  },
  {
    "text": "disaster recovery and the backup server",
    "start": "252120",
    "end": "254100"
  },
  {
    "text": "where this backup hands up happens to be",
    "start": "254100",
    "end": "256320"
  },
  {
    "text": "not as well hardened as your master VM",
    "start": "256320",
    "end": "259440"
  },
  {
    "text": "so if an attacker gets access to that",
    "start": "259440",
    "end": "262140"
  },
  {
    "text": "they can use the credential to access",
    "start": "262140",
    "end": "264900"
  },
  {
    "text": "the data store and",
    "start": "264900",
    "end": "267430"
  },
  {
    "text": "basically it's game over and notice that",
    "start": "267430",
    "end": "269470"
  },
  {
    "text": "if I could didn't have to compromise",
    "start": "269470",
    "end": "271870"
  },
  {
    "text": "your API your cluster VMs your database",
    "start": "271870",
    "end": "275199"
  },
  {
    "text": "nothing they still got the access to",
    "start": "275199",
    "end": "276669"
  },
  {
    "text": "sensitive data just because one of these",
    "start": "276669",
    "end": "278650"
  },
  {
    "text": "backup servers happen to be not well",
    "start": "278650",
    "end": "281260"
  },
  {
    "text": "hardened so the point here is that",
    "start": "281260",
    "end": "283000"
  },
  {
    "text": "there's many vectors to accessing and",
    "start": "283000",
    "end": "285580"
  },
  {
    "text": "exfiltrating ICU data that may not be",
    "start": "285580",
    "end": "287590"
  },
  {
    "text": "obvious right away so you might think",
    "start": "287590",
    "end": "291100"
  },
  {
    "text": "that okay someone got the dump of this",
    "start": "291100",
    "end": "293500"
  },
  {
    "text": "huge database of HDD there's a bunch of",
    "start": "293500",
    "end": "295690"
  },
  {
    "text": "objects and it's really really hard",
    "start": "295690",
    "end": "297160"
  },
  {
    "text": "probably to parse everything out figure",
    "start": "297160",
    "end": "299830"
  },
  {
    "text": "out which objects are secrets or not",
    "start": "299830",
    "end": "301500"
  },
  {
    "text": "figure out what the format is that",
    "start": "301500",
    "end": "303720"
  },
  {
    "text": "kubernetes stores the data in but let me",
    "start": "303720",
    "end": "307479"
  },
  {
    "text": "show you this so I'm gonna run a little",
    "start": "307479",
    "end": "309820"
  },
  {
    "text": "helper that will do the tacking for me",
    "start": "309820",
    "end": "311800"
  },
  {
    "text": "but it's all running live so I have this",
    "start": "311800",
    "end": "315550"
  },
  {
    "text": "HDD data directory dumped from a running",
    "start": "315550",
    "end": "318100"
  },
  {
    "text": "cluster after a quick search in the",
    "start": "318100",
    "end": "320680"
  },
  {
    "text": "documentation I and know that members",
    "start": "320680",
    "end": "323110"
  },
  {
    "text": "Neb DB is where the data data is",
    "start": "323110",
    "end": "325120"
  },
  {
    "text": "actually stored so I'm gonna run the",
    "start": "325120",
    "end": "327310"
  },
  {
    "text": "strings utility on this file and streams",
    "start": "327310",
    "end": "329710"
  },
  {
    "text": "utility is essentially available on any",
    "start": "329710",
    "end": "331479"
  },
  {
    "text": "Linux distribution pretty much built in",
    "start": "331479",
    "end": "334120"
  },
  {
    "text": "and it will print out any data in the",
    "start": "334120",
    "end": "337900"
  },
  {
    "text": "file provided that's textual so anything",
    "start": "337900",
    "end": "339970"
  },
  {
    "text": "that's binary is discarded anything that",
    "start": "339970",
    "end": "341590"
  },
  {
    "text": "looks like a piece of text will print",
    "start": "341590",
    "end": "342940"
  },
  {
    "text": "out so here like if you scroll around",
    "start": "342940",
    "end": "345160"
  },
  {
    "text": "you can see there's some object URL",
    "start": "345160",
    "end": "347979"
  },
  {
    "text": "looking things there are some full",
    "start": "347979",
    "end": "349840"
  },
  {
    "text": "objects in JSON so that looks promising",
    "start": "349840",
    "end": "352630"
  },
  {
    "text": "I'm just gonna grab this output for a",
    "start": "352630",
    "end": "355690"
  },
  {
    "text": "string secret and immediately find one",
    "start": "355690",
    "end": "357910"
  },
  {
    "text": "finding it's called a DB secret so on",
    "start": "357910",
    "end": "360400"
  },
  {
    "text": "okay so I'm gonna pass the C flag to",
    "start": "360400",
    "end": "363880"
  },
  {
    "text": "grab which will just show me the lines",
    "start": "363880",
    "end": "365169"
  },
  {
    "text": "around where this match was found and",
    "start": "365169",
    "end": "367530"
  },
  {
    "text": "here at the end you can see that we have",
    "start": "367530",
    "end": "370750"
  },
  {
    "text": "our secret name namespace name and the",
    "start": "370750",
    "end": "373210"
  },
  {
    "text": "contents of the secret in plaintext so",
    "start": "373210",
    "end": "375720"
  },
  {
    "text": "I'm trying to point out is that this is",
    "start": "375720",
    "end": "378820"
  },
  {
    "text": "all the tooling I needed to extract",
    "start": "378820",
    "end": "382630"
  },
  {
    "text": "secrets in plaintext out of my AC data",
    "start": "382630",
    "end": "385000"
  },
  {
    "text": "dump that's applicable to any standard",
    "start": "385000",
    "end": "388300"
  },
  {
    "text": "kubernetes installation that doesn't do",
    "start": "388300",
    "end": "390460"
  },
  {
    "text": "encryption at rest all right so",
    "start": "390460",
    "end": "394830"
  },
  {
    "text": "hopefully I kind of convinced you that",
    "start": "394830",
    "end": "397919"
  },
  {
    "text": "encrypting secrets at rest is a useful",
    "start": "397919",
    "end": "400689"
  },
  {
    "text": "to do now let's jump into the main",
    "start": "400689",
    "end": "405489"
  },
  {
    "text": "section and how do you actually",
    "start": "405489",
    "end": "407019"
  },
  {
    "text": "implement one how do you create it if",
    "start": "407019",
    "end": "409269"
  },
  {
    "text": "you have an idea for transformer so this",
    "start": "409269",
    "end": "411669"
  },
  {
    "text": "URL here I have a fork of kubernetes",
    "start": "411669",
    "end": "413919"
  },
  {
    "text": "where I built a transformer that's",
    "start": "413919",
    "end": "416919"
  },
  {
    "text": "following exactly the same steps I'm",
    "start": "416919",
    "end": "418569"
  },
  {
    "text": "going to show you right now the steps",
    "start": "418569",
    "end": "420759"
  },
  {
    "text": "I'm going to show be showing in the",
    "start": "420759",
    "end": "421869"
  },
  {
    "text": "slides are more abstract I'll just use",
    "start": "421869",
    "end": "424149"
  },
  {
    "text": "some code snippets for demonstration",
    "start": "424149",
    "end": "427059"
  },
  {
    "text": "purposes but on this fork implemented a",
    "start": "427059",
    "end": "429099"
  },
  {
    "text": "transformer that does sm4 encryption at",
    "start": "429099",
    "end": "431709"
  },
  {
    "text": "rest alongside all the other available",
    "start": "431709",
    "end": "435969"
  },
  {
    "text": "transformers and if you're not familiar",
    "start": "435969",
    "end": "437499"
  },
  {
    "text": "sm4 is an encryption algorithm similar",
    "start": "437499",
    "end": "439989"
  },
  {
    "text": "to AAS that's has been designed and",
    "start": "439989",
    "end": "442569"
  },
  {
    "text": "approved by the Chinese scientific",
    "start": "442569",
    "end": "444159"
  },
  {
    "text": "community Before we jump in the steps at",
    "start": "444159",
    "end": "448239"
  },
  {
    "start": "446000",
    "end": "446000"
  },
  {
    "text": "the bottom right of each slide will be",
    "start": "448239",
    "end": "449199"
  },
  {
    "text": "the exact commit on that fork that",
    "start": "449199",
    "end": "450729"
  },
  {
    "text": "implements this step and also chai these",
    "start": "450729",
    "end": "453459"
  },
  {
    "text": "are actual links to the directories and",
    "start": "453459",
    "end": "455379"
  },
  {
    "text": "files where the changes I'm going to",
    "start": "455379",
    "end": "457149"
  },
  {
    "text": "talk I'm going to talk about our new to",
    "start": "457149",
    "end": "460029"
  },
  {
    "text": "be made",
    "start": "460029",
    "end": "460709"
  },
  {
    "text": "so first up obviously we need to",
    "start": "460709",
    "end": "463119"
  },
  {
    "text": "implement the actual Korell our",
    "start": "463119",
    "end": "464679"
  },
  {
    "text": "transformer what it does and that's done",
    "start": "464679",
    "end": "468129"
  },
  {
    "text": "by implementing this transformer",
    "start": "468129",
    "end": "469300"
  },
  {
    "text": "interface it's pretty simple interface",
    "start": "469300",
    "end": "472329"
  },
  {
    "text": "just two methods you get some data",
    "start": "472329",
    "end": "474369"
  },
  {
    "text": "before or right after is being read from",
    "start": "474369",
    "end": "477089"
  },
  {
    "text": "but actually being read from it CD and",
    "start": "477089",
    "end": "479439"
  },
  {
    "text": "you have to transform it back and same",
    "start": "479439",
    "end": "481839"
  },
  {
    "text": "thing in the opposite direction so",
    "start": "481839",
    "end": "483909"
  },
  {
    "text": "that's specific to what your customer",
    "start": "483909",
    "end": "485589"
  },
  {
    "text": "does but should be pretty",
    "start": "485589",
    "end": "486969"
  },
  {
    "text": "straightforward next step transform is",
    "start": "486969",
    "end": "490360"
  },
  {
    "start": "489000",
    "end": "489000"
  },
  {
    "text": "don't really exist in isolation usually",
    "start": "490360",
    "end": "492550"
  },
  {
    "text": "they need some input so for encryption",
    "start": "492550",
    "end": "494229"
  },
  {
    "text": "transformers will be encryption keys",
    "start": "494229",
    "end": "495759"
  },
  {
    "text": "there may be some other data you might",
    "start": "495759",
    "end": "497499"
  },
  {
    "text": "need to provide all this configuration",
    "start": "497499",
    "end": "500259"
  },
  {
    "text": "is passed to cube API server through a",
    "start": "500259",
    "end": "502869"
  },
  {
    "text": "yellow file at startup this file is",
    "start": "502869",
    "end": "505919"
  },
  {
    "text": "contains an encryption configuration",
    "start": "505919",
    "end": "507999"
  },
  {
    "text": "object and essentially it lists the",
    "start": "507999",
    "end": "510939"
  },
  {
    "text": "types of resources that's the",
    "start": "510939",
    "end": "512680"
  },
  {
    "text": "transformer applies to and that the",
    "start": "512680",
    "end": "514839"
  },
  {
    "text": "specific transformers so providers is",
    "start": "514839",
    "end": "516698"
  },
  {
    "text": "just a Senate in fortunes formers here",
    "start": "516699",
    "end": "518370"
  },
  {
    "text": "and here I sort of sketched out what n1",
    "start": "518370",
    "end": "520899"
  },
  {
    "text": "my provider to look my transformer to",
    "start": "520899",
    "end": "522849"
  },
  {
    "text": "look like I it has a key and a field",
    "start": "522849",
    "end": "525040"
  },
  {
    "text": "some other type as input so now I",
    "start": "525040",
    "end": "528160"
  },
  {
    "text": "convert that last chunk into a go struct",
    "start": "528160",
    "end": "530740"
  },
  {
    "text": "into which I'm gonna parse out the mo",
    "start": "530740",
    "end": "533920"
  },
  {
    "text": "it should basically mirror the exact",
    "start": "533920",
    "end": "536610"
  },
  {
    "text": "llamo object that you expect to get and",
    "start": "536610",
    "end": "542130"
  },
  {
    "text": "you might notice there are two links to",
    "start": "542130",
    "end": "544720"
  },
  {
    "text": "the files here and yes you need to",
    "start": "544720",
    "end": "546220"
  },
  {
    "text": "implement the exact same struct in two",
    "start": "546220",
    "end": "547930"
  },
  {
    "text": "places you might also notice that we're",
    "start": "547930",
    "end": "550329"
  },
  {
    "text": "using JSON tags in our struct fields",
    "start": "550329",
    "end": "552160"
  },
  {
    "text": "while we are parsing out llamo but you",
    "start": "552160",
    "end": "554829"
  },
  {
    "text": "know you don't have time to make our",
    "start": "554829",
    "end": "556329"
  },
  {
    "text": "code base make sense we just have",
    "start": "556329",
    "end": "557980"
  },
  {
    "text": "transformers too right so let's go next",
    "start": "557980",
    "end": "559980"
  },
  {
    "text": "step three you have your configuration",
    "start": "559980",
    "end": "562540"
  },
  {
    "start": "560000",
    "end": "560000"
  },
  {
    "text": "now you just need to register it as a",
    "start": "562540",
    "end": "564930"
  },
  {
    "text": "possible transformer in the encryption",
    "start": "564930",
    "end": "568029"
  },
  {
    "text": "configuration yeah Malaysia before and",
    "start": "568029",
    "end": "570670"
  },
  {
    "text": "to do that you just add it to an",
    "start": "570670",
    "end": "571750"
  },
  {
    "text": "existing struct at the end so here I",
    "start": "571750",
    "end": "573760"
  },
  {
    "text": "just that it is the last fields and the",
    "start": "573760",
    "end": "575649"
  },
  {
    "text": "same two files it's pretty",
    "start": "575649",
    "end": "577329"
  },
  {
    "text": "straightforward next I need to explain",
    "start": "577329",
    "end": "580660"
  },
  {
    "start": "579000",
    "end": "579000"
  },
  {
    "text": "what prefix transformers are prefix",
    "start": "580660",
    "end": "584890"
  },
  {
    "text": "transformers exist for the purpose of",
    "start": "584890",
    "end": "587470"
  },
  {
    "text": "not having any conflicts between",
    "start": "587470",
    "end": "589149"
  },
  {
    "text": "multiple transformers so when a prefix",
    "start": "589149",
    "end": "592540"
  },
  {
    "text": "transformer write some data to ICD it",
    "start": "592540",
    "end": "595230"
  },
  {
    "text": "prepends the static prefix that's",
    "start": "595230",
    "end": "597459"
  },
  {
    "text": "highlighted here to the data and then",
    "start": "597459",
    "end": "600519"
  },
  {
    "text": "when it reads it back it actually checks",
    "start": "600519",
    "end": "602380"
  },
  {
    "text": "the prefix strip set but if the prefix",
    "start": "602380",
    "end": "604899"
  },
  {
    "text": "does not match you know that there's",
    "start": "604899",
    "end": "606130"
  },
  {
    "text": "some miss configuration there's",
    "start": "606130",
    "end": "607269"
  },
  {
    "text": "something wrong and instead of corrupt",
    "start": "607269",
    "end": "609250"
  },
  {
    "text": "returning corrupt data it will throw an",
    "start": "609250",
    "end": "611649"
  },
  {
    "text": "error so here yeah I just grabbed",
    "start": "611649",
    "end": "614230"
  },
  {
    "text": "another it's your data file and the",
    "start": "614230",
    "end": "616180"
  },
  {
    "text": "prefix looks roughly like this you don't",
    "start": "616180",
    "end": "619810"
  },
  {
    "text": "need to implement any of that yourself",
    "start": "619810",
    "end": "620850"
  },
  {
    "text": "prefix non-smart already because already",
    "start": "620850",
    "end": "622660"
  },
  {
    "text": "implemented you just need to instantiate",
    "start": "622660",
    "end": "625449"
  },
  {
    "text": "it and give it a prefix and your actual",
    "start": "625449",
    "end": "627310"
  },
  {
    "text": "transformer so you register your prefix",
    "start": "627310",
    "end": "634420"
  },
  {
    "start": "630000",
    "end": "630000"
  },
  {
    "text": "in this console Ock and the linked file",
    "start": "634420",
    "end": "636490"
  },
  {
    "text": "and the cost block is at the top and",
    "start": "636490",
    "end": "638829"
  },
  {
    "text": "list prefixes for all the other",
    "start": "638829",
    "end": "640000"
  },
  {
    "text": "transformers they're already existing",
    "start": "640000",
    "end": "641199"
  },
  {
    "text": "companies it's pretty simple so last",
    "start": "641199",
    "end": "643959"
  },
  {
    "start": "643000",
    "end": "643000"
  },
  {
    "text": "step we have our configuration struct",
    "start": "643959",
    "end": "646060"
  },
  {
    "text": "we'll the inputs for our transformer we",
    "start": "646060",
    "end": "648760"
  },
  {
    "text": "have our transformer implementation now",
    "start": "648760",
    "end": "650829"
  },
  {
    "text": "we just need to instantiate that",
    "start": "650829",
    "end": "652360"
  },
  {
    "text": "implementation from the config in the",
    "start": "652360",
    "end": "655120"
  },
  {
    "text": "linked file you create a new function",
    "start": "655120",
    "end": "656920"
  },
  {
    "text": "that takes your configuration as input",
    "start": "656920",
    "end": "658540"
  },
  {
    "text": "takes your prefixes inputs that would be",
    "start": "658540",
    "end": "661540"
  },
  {
    "text": "a good place to validate the",
    "start": "661540",
    "end": "662740"
  },
  {
    "text": "configuration so if you have any keys",
    "start": "662740",
    "end": "664209"
  },
  {
    "text": "you need to parse if you have any other",
    "start": "664209",
    "end": "665920"
  },
  {
    "text": "configs that need to be Val",
    "start": "665920",
    "end": "667450"
  },
  {
    "text": "that's a place to do it then you",
    "start": "667450",
    "end": "670090"
  },
  {
    "text": "instantiate your transformer",
    "start": "670090",
    "end": "671440"
  },
  {
    "text": "implementation from this config and",
    "start": "671440",
    "end": "673510"
  },
  {
    "text": "right before returning your Rapids with",
    "start": "673510",
    "end": "675670"
  },
  {
    "text": "the prefix transformer so it handles all",
    "start": "675670",
    "end": "677410"
  },
  {
    "text": "this prefix thing for you",
    "start": "677410",
    "end": "679860"
  },
  {
    "text": "so great let me show you how that looks",
    "start": "679860",
    "end": "683020"
  },
  {
    "text": "in practice so here in this other tab",
    "start": "683020",
    "end": "689290"
  },
  {
    "text": "when you're going to start my local",
    "start": "689290",
    "end": "691870"
  },
  {
    "text": "cluster that is built so it used uses a",
    "start": "691870",
    "end": "694750"
  },
  {
    "text": "modified cube API server binary that I",
    "start": "694750",
    "end": "697510"
  },
  {
    "text": "was built from my fork",
    "start": "697510",
    "end": "700590"
  },
  {
    "text": "here I have my encryption configuration",
    "start": "701800",
    "end": "704170"
  },
  {
    "text": "that I passed to that cluster you can",
    "start": "704170",
    "end": "706240"
  },
  {
    "text": "see this has some four transformer",
    "start": "706240",
    "end": "708490"
  },
  {
    "text": "config field here and I just give it a",
    "start": "708490",
    "end": "710500"
  },
  {
    "text": "single key the encryption key so start",
    "start": "710500",
    "end": "715270"
  },
  {
    "text": "the cluster in a separate tab and I'm",
    "start": "715270",
    "end": "719230"
  },
  {
    "text": "gonna make sure that it's actually",
    "start": "719230",
    "end": "720400"
  },
  {
    "text": "running so it's like running on my local",
    "start": "720400",
    "end": "721840"
  },
  {
    "text": "host live I'm gonna create a secret I'm",
    "start": "721840",
    "end": "724300"
  },
  {
    "text": "gonna give it two fields username and",
    "start": "724300",
    "end": "726700"
  },
  {
    "text": "password and I'm gonna name a deputy be",
    "start": "726700",
    "end": "728950"
  },
  {
    "text": "secret go on so I'm just gonna this is",
    "start": "728950",
    "end": "732640"
  },
  {
    "text": "how it looks like in Yama when you print",
    "start": "732640",
    "end": "735130"
  },
  {
    "text": "it out as a client you will notice that",
    "start": "735130",
    "end": "737170"
  },
  {
    "text": "these fields don't look like the actual",
    "start": "737170",
    "end": "738970"
  },
  {
    "text": "fields I set but these are just base 64",
    "start": "738970",
    "end": "742390"
  },
  {
    "text": "encoded so this basic C for Dakota is",
    "start": "742390",
    "end": "746320"
  },
  {
    "text": "just password 0 and this is as this",
    "start": "746320",
    "end": "749290"
  },
  {
    "text": "working has intended because we're not",
    "start": "749290",
    "end": "750970"
  },
  {
    "text": "doing encryption had the application at",
    "start": "750970",
    "end": "753610"
  },
  {
    "text": "the client layer so now that the API",
    "start": "753610",
    "end": "755290"
  },
  {
    "text": "layer we're doing it as a storage layer",
    "start": "755290",
    "end": "756550"
  },
  {
    "text": "so client should have no difference in",
    "start": "756550",
    "end": "758170"
  },
  {
    "text": "experience now for comparison from the",
    "start": "758170",
    "end": "761650"
  },
  {
    "text": "previous demo this is the the command we",
    "start": "761650",
    "end": "764050"
  },
  {
    "text": "ran this is the output we got so we got",
    "start": "764050",
    "end": "766270"
  },
  {
    "text": "our username and password in plain text",
    "start": "766270",
    "end": "767560"
  },
  {
    "text": "here now the same command ran against",
    "start": "767560",
    "end": "770980"
  },
  {
    "text": "this new cluster we see that we still",
    "start": "770980",
    "end": "773410"
  },
  {
    "text": "find the secrets identifier but then we",
    "start": "773410",
    "end": "776890"
  },
  {
    "text": "have our prefix that I used for my",
    "start": "776890",
    "end": "778660"
  },
  {
    "text": "transformer and a bunch of binary data",
    "start": "778660",
    "end": "780820"
  },
  {
    "text": "that's not principal and that's the",
    "start": "780820",
    "end": "782380"
  },
  {
    "text": "encrypted data so ok great that works",
    "start": "782380",
    "end": "786640"
  },
  {
    "text": "but we have two problems the first",
    "start": "786640",
    "end": "789190"
  },
  {
    "text": "problem is that we provide this",
    "start": "789190",
    "end": "791260"
  },
  {
    "text": "encryption key at startup the the young",
    "start": "791260",
    "end": "793810"
  },
  {
    "text": "file so that means if you want to rotate",
    "start": "793810",
    "end": "795670"
  },
  {
    "text": "the key you need to restart the API",
    "start": "795670",
    "end": "798130"
  },
  {
    "text": "server you to update this encryption",
    "start": "798130",
    "end": "799570"
  },
  {
    "text": "configuration",
    "start": "799570",
    "end": "800820"
  },
  {
    "text": "it's a lot of manual work and it's a",
    "start": "800820",
    "end": "802500"
  },
  {
    "text": "little bit of API downtime so that's not",
    "start": "802500",
    "end": "804120"
  },
  {
    "text": "great but the bigger problem is that our",
    "start": "804120",
    "end": "807480"
  },
  {
    "text": "key is stored in plain text on disk so",
    "start": "807480",
    "end": "809480"
  },
  {
    "text": "the encryption configuration llam√≥ is",
    "start": "809480",
    "end": "811950"
  },
  {
    "text": "passed to keep api server at startup as",
    "start": "811950",
    "end": "814080"
  },
  {
    "text": "a file path and odds are that that file",
    "start": "814080",
    "end": "816930"
  },
  {
    "text": "is stored in exactly the same disk or",
    "start": "816930",
    "end": "818700"
  },
  {
    "text": "history or HDD data so if the attacker",
    "start": "818700",
    "end": "821190"
  },
  {
    "text": "compromises the entire disk not just the",
    "start": "821190",
    "end": "823110"
  },
  {
    "text": "directory then they have all the keys",
    "start": "823110",
    "end": "825000"
  },
  {
    "text": "they need to decrypt all the all the",
    "start": "825000",
    "end": "827040"
  },
  {
    "text": "secrets to help us with those two",
    "start": "827040",
    "end": "829950"
  },
  {
    "text": "problems we're gonna use envelope",
    "start": "829950",
    "end": "832350"
  },
  {
    "text": "encryption and then evolve transformers",
    "start": "832350",
    "end": "835020"
  },
  {
    "text": "so it's a bit of a tricky concept I'm",
    "start": "835020",
    "end": "836970"
  },
  {
    "text": "gonna walk it step by step so bear with",
    "start": "836970",
    "end": "840060"
  },
  {
    "text": "me",
    "start": "840060",
    "end": "840330"
  },
  {
    "text": "the idea behind an OLAP transformation",
    "start": "840330",
    "end": "842280"
  },
  {
    "text": "is that you use two keys instead of one",
    "start": "842280",
    "end": "844140"
  },
  {
    "text": "to encrypt every piece of data so you",
    "start": "844140",
    "end": "847350"
  },
  {
    "text": "have your data encryption key or deck",
    "start": "847350",
    "end": "849480"
  },
  {
    "text": "which is used to encrypt the actual",
    "start": "849480",
    "end": "851310"
  },
  {
    "text": "piece of data and then you have your key",
    "start": "851310",
    "end": "853530"
  },
  {
    "text": "encryption key or CAC which is used to",
    "start": "853530",
    "end": "855300"
  },
  {
    "text": "encrypt the deck when you actually start",
    "start": "855300",
    "end": "859350"
  },
  {
    "text": "the data you encrypt it with the deck",
    "start": "859350",
    "end": "861000"
  },
  {
    "text": "you encrypt the deck with the CAC you",
    "start": "861000",
    "end": "862620"
  },
  {
    "text": "have concatenated those two parts and",
    "start": "862620",
    "end": "864480"
  },
  {
    "text": "that's called the envelope that's what",
    "start": "864480",
    "end": "866010"
  },
  {
    "text": "she actually put into I'd CD well key",
    "start": "866010",
    "end": "868140"
  },
  {
    "text": "encryption key lives outside of outside",
    "start": "868140",
    "end": "870690"
  },
  {
    "text": "of the master VM completely on a",
    "start": "870690",
    "end": "872910"
  },
  {
    "text": "separate machine and separate",
    "start": "872910",
    "end": "875250"
  },
  {
    "text": "infrastructure",
    "start": "875250",
    "end": "877290"
  },
  {
    "text": "key management services or kms is are a",
    "start": "877290",
    "end": "879960"
  },
  {
    "text": "good fit for handling a X that's their",
    "start": "879960",
    "end": "882960"
  },
  {
    "text": "whole idea is that they store your",
    "start": "882960",
    "end": "884520"
  },
  {
    "text": "plaintext keys in some secure",
    "start": "884520",
    "end": "885810"
  },
  {
    "text": "infrastructure and only expose the",
    "start": "885810",
    "end": "887610"
  },
  {
    "text": "operations that those keys can perform",
    "start": "887610",
    "end": "889350"
  },
  {
    "text": "like encrypts decrypt sign and so on so",
    "start": "889350",
    "end": "892220"
  },
  {
    "text": "the idea here is that we use KMS or",
    "start": "892220",
    "end": "895140"
  },
  {
    "text": "something similar to host the qex and",
    "start": "895140",
    "end": "897210"
  },
  {
    "text": "never let them land in plaintext on our",
    "start": "897210",
    "end": "899970"
  },
  {
    "text": "master vm semester only has these like",
    "start": "899970",
    "end": "902730"
  },
  {
    "text": "encrypted blobs in the envelope so that",
    "start": "902730",
    "end": "906780"
  },
  {
    "text": "solves our second problem of keys being",
    "start": "906780",
    "end": "908400"
  },
  {
    "text": "in plaintext the first one of key",
    "start": "908400",
    "end": "910020"
  },
  {
    "text": "rotation and management I'm just gonna",
    "start": "910020",
    "end": "912690"
  },
  {
    "text": "walk by example so it's a little clearer",
    "start": "912690",
    "end": "914700"
  },
  {
    "text": "so we ever came as provider with the CAC",
    "start": "914700",
    "end": "918330"
  },
  {
    "text": "and most EMS providers allow you to",
    "start": "918330",
    "end": "921200"
  },
  {
    "text": "automate key rotation so here we have",
    "start": "921200",
    "end": "923970"
  },
  {
    "text": "configured that to create a new version",
    "start": "923970",
    "end": "925440"
  },
  {
    "text": "of the CAC every month when you write",
    "start": "925440",
    "end": "928830"
  },
  {
    "text": "your first secret hit create it gets its",
    "start": "928830",
    "end": "931830"
  },
  {
    "text": "own Dec Dec one and then that one",
    "start": "931830",
    "end": "934830"
  },
  {
    "text": "encrypted with CAC 1 if you create",
    "start": "934830",
    "end": "936510"
  },
  {
    "text": "another secret you get a separate",
    "start": "936510",
    "end": "938280"
  },
  {
    "text": "dedicated deck for every single secret",
    "start": "938280",
    "end": "940740"
  },
  {
    "text": "and then that jack is encrypted with CAC",
    "start": "940740",
    "end": "942840"
  },
  {
    "text": "1 again now some time passes our",
    "start": "942840",
    "end": "945630"
  },
  {
    "text": "automation kicks in it creates the",
    "start": "945630",
    "end": "947130"
  },
  {
    "text": "second version of the CAC some more time",
    "start": "947130",
    "end": "949470"
  },
  {
    "text": "passes it gets another version now at",
    "start": "949470",
    "end": "952050"
  },
  {
    "text": "this point if you create a new secret it",
    "start": "952050",
    "end": "954960"
  },
  {
    "text": "will get that sound deck as before deck",
    "start": "954960",
    "end": "956940"
  },
  {
    "text": "three but this stack will be encrypted",
    "start": "956940",
    "end": "958290"
  },
  {
    "text": "with the latest version of the CAC so",
    "start": "958290",
    "end": "959940"
  },
  {
    "text": "CAC v3 if you update an existing secret",
    "start": "959940",
    "end": "963060"
  },
  {
    "text": "it will notice that the CAC used was an",
    "start": "963060",
    "end": "966300"
  },
  {
    "text": "old one and it will create a brand new",
    "start": "966300",
    "end": "968100"
  },
  {
    "text": "deck for it and then encrypt that deck",
    "start": "968100",
    "end": "969720"
  },
  {
    "text": "with the latest CAC CAC v3 so that's how",
    "start": "969720",
    "end": "972180"
  },
  {
    "text": "you can gradually roll and update all of",
    "start": "972180",
    "end": "974160"
  },
  {
    "text": "your secrets to use the latest version",
    "start": "974160",
    "end": "975900"
  },
  {
    "text": "of the CAC without having to do any any",
    "start": "975900",
    "end": "978840"
  },
  {
    "text": "manual rotation any restarts you can",
    "start": "978840",
    "end": "981570"
  },
  {
    "text": "also manually trigger a secret update to",
    "start": "981570",
    "end": "983430"
  },
  {
    "text": "sort of indirectly update to the latest",
    "start": "983430",
    "end": "986730"
  },
  {
    "text": "CAC so you can clean up some older",
    "start": "986730",
    "end": "988440"
  },
  {
    "text": "versions so that sounds like it solves",
    "start": "988440",
    "end": "992670"
  },
  {
    "text": "our problem but it's pretty pretty",
    "start": "992670",
    "end": "994230"
  },
  {
    "text": "complicated there's a lot of keys trying",
    "start": "994230",
    "end": "996570"
  },
  {
    "text": "around a lot of encoding and creating",
    "start": "996570",
    "end": "999660"
  },
  {
    "text": "envelopes and whatnot well luckily I",
    "start": "999660",
    "end": "1001460"
  },
  {
    "start": "1001000",
    "end": "1001000"
  },
  {
    "text": "don't need to do any of that yourself",
    "start": "1001460",
    "end": "1003050"
  },
  {
    "text": "that's already implemented for the most",
    "start": "1003050",
    "end": "1005300"
  },
  {
    "text": "part in Cabernets it there's this",
    "start": "1005300",
    "end": "1009530"
  },
  {
    "text": "envelope transformer type that takes two",
    "start": "1009530",
    "end": "1011900"
  },
  {
    "text": "pluggable pieces of functionality it has",
    "start": "1011900",
    "end": "1013490"
  },
  {
    "text": "the envelope service and the base",
    "start": "1013490",
    "end": "1016370"
  },
  {
    "text": "transformer func so the baseness former",
    "start": "1016370",
    "end": "1018260"
  },
  {
    "text": "func is what's actually used to encrypt",
    "start": "1018260",
    "end": "1021410"
  },
  {
    "text": "the data with a deck autotransformer we",
    "start": "1021410",
    "end": "1024199"
  },
  {
    "text": "create the deck for you and then we'll",
    "start": "1024199",
    "end": "1026329"
  },
  {
    "text": "call this function with the deck so you",
    "start": "1026330",
    "end": "1028880"
  },
  {
    "text": "can return the initialize transformer",
    "start": "1028880",
    "end": "1030589"
  },
  {
    "text": "from it so you can reuse the same",
    "start": "1030589",
    "end": "1031730"
  },
  {
    "text": "transformer from step one the other part",
    "start": "1031730",
    "end": "1034699"
  },
  {
    "text": "is the envelope service and that's",
    "start": "1034699",
    "end": "1036199"
  },
  {
    "text": "actually an interface it has just two",
    "start": "1036199",
    "end": "1038930"
  },
  {
    "text": "two methods and it's used to encrypt the",
    "start": "1038930",
    "end": "1041780"
  },
  {
    "text": "deck with a CAC so the idea is that the",
    "start": "1041780",
    "end": "1044089"
  },
  {
    "text": "service is some sort of a remote service",
    "start": "1044089",
    "end": "1046870"
  },
  {
    "text": "that doesn't expose the CAC to you in",
    "start": "1046870",
    "end": "1049550"
  },
  {
    "text": "plain text but so we could potentially",
    "start": "1049550",
    "end": "1054460"
  },
  {
    "text": "implement the service interface for a",
    "start": "1054460",
    "end": "1057470"
  },
  {
    "text": "lot of possible KMS providers like volt",
    "start": "1057470",
    "end": "1060140"
  },
  {
    "text": "or amazon key service but following the",
    "start": "1060140",
    "end": "1064520"
  },
  {
    "text": "community's philosophy we don't actually",
    "start": "1064520",
    "end": "1065900"
  },
  {
    "text": "want to put any third party and you",
    "start": "1065900",
    "end": "1068330"
  },
  {
    "text": "vendor code into the upstream grenades",
    "start": "1068330",
    "end": "1070490"
  },
  {
    "text": "repository in stats we want to provide a",
    "start": "1070490",
    "end": "1074269"
  },
  {
    "text": "standardized extension points and sort",
    "start": "1074269",
    "end": "1079279"
  },
  {
    "text": "of hide this third-party code outside of",
    "start": "1079279",
    "end": "1081440"
  },
  {
    "text": "the tree somewhere for that there just",
    "start": "1081440",
    "end": "1084529"
  },
  {
    "text": "came as plugins the idea became as",
    "start": "1084529",
    "end": "1086779"
  },
  {
    "text": "plugins is that they are lightweight",
    "start": "1086779",
    "end": "1088279"
  },
  {
    "text": "proxies local proxies on the master that",
    "start": "1088279",
    "end": "1091010"
  },
  {
    "text": "expose a standardized interface that",
    "start": "1091010",
    "end": "1094220"
  },
  {
    "text": "cube API server knows how to talk to and",
    "start": "1094220",
    "end": "1096289"
  },
  {
    "text": "then the proxy does requests to the kms",
    "start": "1096289",
    "end": "1099169"
  },
  {
    "text": "provider using whatever protocol that",
    "start": "1099169",
    "end": "1101539"
  },
  {
    "text": "provider happens to be using they",
    "start": "1101539",
    "end": "1104929"
  },
  {
    "start": "1104000",
    "end": "1104000"
  },
  {
    "text": "already built into kubernetes you can",
    "start": "1104929",
    "end": "1107539"
  },
  {
    "text": "specify the emini encryption",
    "start": "1107539",
    "end": "1109340"
  },
  {
    "text": "configuration you just have to give it a",
    "start": "1109340",
    "end": "1110779"
  },
  {
    "text": "name and the UNIX domain socket to talk",
    "start": "1110779",
    "end": "1113480"
  },
  {
    "text": "to you and UNIX the main socket is an",
    "start": "1113480",
    "end": "1115760"
  },
  {
    "text": "actual explicit limitation you cannot",
    "start": "1115760",
    "end": "1117409"
  },
  {
    "text": "have a remote scheme as plug-in the",
    "start": "1117409",
    "end": "1119690"
  },
  {
    "text": "reason for that is this basically",
    "start": "1119690",
    "end": "1121340"
  },
  {
    "text": "eliminates a problem of needing to",
    "start": "1121340",
    "end": "1123200"
  },
  {
    "text": "authenticate from cube API server to the",
    "start": "1123200",
    "end": "1125360"
  },
  {
    "text": "kms plugin so and usually there's no",
    "start": "1125360",
    "end": "1128990"
  },
  {
    "text": "reason to have a remote kms plugin",
    "start": "1128990",
    "end": "1130429"
  },
  {
    "text": "anyway this UNIX endpoint should serve a",
    "start": "1130429",
    "end": "1133970"
  },
  {
    "text": "JIRA PC service that implements this",
    "start": "1133970",
    "end": "1137529"
  },
  {
    "text": "definition it's basically the same as",
    "start": "1137529",
    "end": "1140179"
  },
  {
    "text": "the interface we looked at a few slides",
    "start": "1140179",
    "end": "1141769"
  },
  {
    "text": "back but with an extra version method",
    "start": "1141769",
    "end": "1143570"
  },
  {
    "text": "for just a metadata just to visualize it",
    "start": "1143570",
    "end": "1147679"
  },
  {
    "text": "all together how the entire flow works",
    "start": "1147679",
    "end": "1149330"
  },
  {
    "text": "with the kms plugin say your user your",
    "start": "1149330",
    "end": "1152000"
  },
  {
    "text": "operator submits a new secret pushes it",
    "start": "1152000",
    "end": "1154850"
  },
  {
    "text": "to the API cube API server then",
    "start": "1154850",
    "end": "1157429"
  },
  {
    "text": "generates in your deck it encrypts the",
    "start": "1157429",
    "end": "1159019"
  },
  {
    "text": "data with the deck then it calls the",
    "start": "1159019",
    "end": "1161929"
  },
  {
    "text": "encrypt RPC towards the Chema's plug-in",
    "start": "1161929",
    "end": "1164240"
  },
  {
    "text": "with a plain text deck that gets proxy",
    "start": "1164240",
    "end": "1166700"
  },
  {
    "text": "over to the kms provider using that",
    "start": "1166700",
    "end": "1169370"
  },
  {
    "text": "specific API EMS provider encrypts the",
    "start": "1169370",
    "end": "1173090"
  },
  {
    "text": "deck with the CAC returns back the",
    "start": "1173090",
    "end": "1174440"
  },
  {
    "text": "encrypted blob that gets returned back",
    "start": "1174440",
    "end": "1176120"
  },
  {
    "text": "to the cube API server cube api server",
    "start": "1176120",
    "end": "1178340"
  },
  {
    "text": "opens the encrypted data in an encrypted",
    "start": "1178340",
    "end": "1179990"
  },
  {
    "text": "deck and stores that envelope in a CD so",
    "start": "1179990",
    "end": "1184760"
  },
  {
    "text": "nothing unencrypted ever touches the",
    "start": "1184760",
    "end": "1186860"
  },
  {
    "text": "disk and that only exists in the memory",
    "start": "1186860",
    "end": "1189500"
  },
  {
    "text": "of cube API server ok one like to other",
    "start": "1189500",
    "end": "1194720"
  },
  {
    "start": "1192000",
    "end": "1192000"
  },
  {
    "text": "steps that are optional by default Kim",
    "start": "1194720",
    "end": "1198230"
  },
  {
    "text": "Yuna's plugin will use AES encryption",
    "start": "1198230",
    "end": "1199760"
  },
  {
    "text": "for Dex so",
    "start": "1199760",
    "end": "1202280"
  },
  {
    "text": "for encrypting data but the deck if you",
    "start": "1202280",
    "end": "1204590"
  },
  {
    "text": "want something else and in this case I",
    "start": "1204590",
    "end": "1205970"
  },
  {
    "text": "wanted my deck to be an SM 4 key you",
    "start": "1205970",
    "end": "1209240"
  },
  {
    "text": "need to do a little bit extra plumbing",
    "start": "1209240",
    "end": "1210890"
  },
  {
    "text": "so here I added a deck type field to the",
    "start": "1210890",
    "end": "1213590"
  },
  {
    "text": "existing kms configuration and that's",
    "start": "1213590",
    "end": "1215840"
  },
  {
    "text": "the yellow configuration blob that's",
    "start": "1215840",
    "end": "1219080"
  },
  {
    "text": "being parsed and then I added a switch",
    "start": "1219080",
    "end": "1221570"
  },
  {
    "start": "1221000",
    "end": "1221000"
  },
  {
    "text": "to the the function that initializes",
    "start": "1221570",
    "end": "1223400"
  },
  {
    "text": "camus plugin where based on the type i",
    "start": "1223400",
    "end": "1226880"
  },
  {
    "text": "will replace the function that create",
    "start": "1226880",
    "end": "1230180"
  },
  {
    "text": "that initializes the transformer so I",
    "start": "1230180",
    "end": "1232370"
  },
  {
    "text": "can reuse the same transformer from the",
    "start": "1232370",
    "end": "1233600"
  },
  {
    "text": "first step Leslie",
    "start": "1233600",
    "end": "1237410"
  },
  {
    "start": "1235000",
    "end": "1235000"
  },
  {
    "text": "most likely you don't need to implement",
    "start": "1237410",
    "end": "1239660"
  },
  {
    "text": "your own kms plug-in there's plenty of",
    "start": "1239660",
    "end": "1241820"
  },
  {
    "text": "officially supported plugins from a",
    "start": "1241820",
    "end": "1243650"
  },
  {
    "text": "bunch of providers out there here's just",
    "start": "1243650",
    "end": "1245330"
  },
  {
    "text": "a small selection of them so if you",
    "start": "1245330",
    "end": "1247640"
  },
  {
    "text": "search around you can probably find one",
    "start": "1247640",
    "end": "1249770"
  },
  {
    "text": "and just use it but if not you your is",
    "start": "1249770",
    "end": "1254300"
  },
  {
    "text": "pretty easy to implement",
    "start": "1254300",
    "end": "1256030"
  },
  {
    "text": "ok now you should roughly understand how",
    "start": "1256030",
    "end": "1260360"
  },
  {
    "text": "the whole code bases structure around",
    "start": "1260360",
    "end": "1261860"
  },
  {
    "text": "transformers how to implement one the",
    "start": "1261860",
    "end": "1265250"
  },
  {
    "text": "last thing I want to mention here is",
    "start": "1265250",
    "end": "1267050"
  },
  {
    "text": "Fred model for kms plugins or basically",
    "start": "1267050",
    "end": "1269960"
  },
  {
    "text": "how to help secure the kms plug-in so",
    "start": "1269960",
    "end": "1275210"
  },
  {
    "text": "the problem here is that K must plug in",
    "start": "1275210",
    "end": "1277550"
  },
  {
    "text": "touch the remote game as service so it",
    "start": "1277550",
    "end": "1279110"
  },
  {
    "text": "needs to authenticate somehow needs to",
    "start": "1279110",
    "end": "1280700"
  },
  {
    "text": "provide some credential in this case",
    "start": "1280700",
    "end": "1282830"
  },
  {
    "text": "let's say it uses a static token that's",
    "start": "1282830",
    "end": "1284780"
  },
  {
    "text": "passed with a request for authentication",
    "start": "1284780",
    "end": "1288100"
  },
  {
    "text": "we also have our cluster configured to",
    "start": "1288100",
    "end": "1291170"
  },
  {
    "text": "do a full disk backup of the master for",
    "start": "1291170",
    "end": "1293750"
  },
  {
    "text": "disaster recovery instead of just at a",
    "start": "1293750",
    "end": "1295340"
  },
  {
    "text": "city database so it might be easy to",
    "start": "1295340",
    "end": "1299210"
  },
  {
    "text": "overlook and just store the token on",
    "start": "1299210",
    "end": "1301160"
  },
  {
    "text": "disk and plain text for Camus plug-in to",
    "start": "1301160",
    "end": "1303110"
  },
  {
    "text": "to read and use but if our attacker",
    "start": "1303110",
    "end": "1306320"
  },
  {
    "text": "compromises the offline disk backup they",
    "start": "1306320",
    "end": "1309070"
  },
  {
    "text": "essentially own everything they need to",
    "start": "1309070",
    "end": "1311980"
  },
  {
    "text": "decrypt the data and as long as they can",
    "start": "1311980",
    "end": "1314810"
  },
  {
    "text": "figure out this whole envelope and",
    "start": "1314810",
    "end": "1316310"
  },
  {
    "text": "decryption dance they they can get",
    "start": "1316310",
    "end": "1318620"
  },
  {
    "text": "access to your secrets so our goal must",
    "start": "1318620",
    "end": "1321110"
  },
  {
    "text": "be to not ever let the plaintext token",
    "start": "1321110",
    "end": "1323750"
  },
  {
    "text": "touch the disk and to do that one",
    "start": "1323750",
    "end": "1328730"
  },
  {
    "text": "approach I want to propose is using",
    "start": "1328730",
    "end": "1330560"
  },
  {
    "text": "trusted platform modules or tpms if",
    "start": "1330560",
    "end": "1334190"
  },
  {
    "text": "you're not familiar with gPMs",
    "start": "1334190",
    "end": "1336140"
  },
  {
    "text": "our little crypto coprocessors they're",
    "start": "1336140",
    "end": "1338600"
  },
  {
    "text": "usually built into all of the server",
    "start": "1338600",
    "end": "1340250"
  },
  {
    "text": "motherboards as an onboard ship",
    "start": "1340250",
    "end": "1342290"
  },
  {
    "text": "there are also virtual versions of them",
    "start": "1342290",
    "end": "1344000"
  },
  {
    "text": "so you can create a virtual TPM for",
    "start": "1344000",
    "end": "1346130"
  },
  {
    "text": "every VM running on a server and the",
    "start": "1346130",
    "end": "1349280"
  },
  {
    "text": "main idea behind them is that they have",
    "start": "1349280",
    "end": "1351080"
  },
  {
    "text": "a little region of protected memory and",
    "start": "1351080",
    "end": "1354410"
  },
  {
    "text": "that memory is completely isolated from",
    "start": "1354410",
    "end": "1357650"
  },
  {
    "text": "the host so if you have full root",
    "start": "1357650",
    "end": "1360470"
  },
  {
    "text": "privileges or in the machine or if you",
    "start": "1360470",
    "end": "1361970"
  },
  {
    "text": "have compromised the kernel you can",
    "start": "1361970",
    "end": "1363560"
  },
  {
    "text": "still not treat that memory and you can",
    "start": "1363560",
    "end": "1366500"
  },
  {
    "text": "only interact with it indirectly through",
    "start": "1366500",
    "end": "1368060"
  },
  {
    "text": "commands that manipulate it but you can",
    "start": "1368060",
    "end": "1370430"
  },
  {
    "text": "get in plain text and also TPMS are",
    "start": "1370430",
    "end": "1373820"
  },
  {
    "text": "bound to the specific host they're on so",
    "start": "1373820",
    "end": "1376040"
  },
  {
    "text": "you can not just like move it over to a",
    "start": "1376040",
    "end": "1378080"
  },
  {
    "text": "different server or copy it over you",
    "start": "1378080",
    "end": "1379790"
  },
  {
    "text": "have to be physically on the server",
    "start": "1379790",
    "end": "1381500"
  },
  {
    "text": "where this TPM exists to access anything",
    "start": "1381500",
    "end": "1384110"
  },
  {
    "text": "that's inside of it okay so first idea",
    "start": "1384110",
    "end": "1393230"
  },
  {
    "text": "might be to just put the token in a TPM",
    "start": "1393230",
    "end": "1395030"
  },
  {
    "text": "because it's protected memory right but",
    "start": "1395030",
    "end": "1397100"
  },
  {
    "text": "we actually need to read the token in",
    "start": "1397100",
    "end": "1398810"
  },
  {
    "text": "plain text in order to be able to pass",
    "start": "1398810",
    "end": "1400310"
  },
  {
    "text": "it to the kms provider so we we cannot",
    "start": "1400310",
    "end": "1403250"
  },
  {
    "text": "put it directly in a TPM but what we can",
    "start": "1403250",
    "end": "1405770"
  },
  {
    "text": "do is we can use a encryption key stored",
    "start": "1405770",
    "end": "1408440"
  },
  {
    "text": "in the TPM in order and encrypt the",
    "start": "1408440",
    "end": "1410870"
  },
  {
    "text": "token with it before storing it on disk",
    "start": "1410870",
    "end": "1412430"
  },
  {
    "text": "and this is called sealing and basically",
    "start": "1412430",
    "end": "1415810"
  },
  {
    "text": "in order to unseal the the token you",
    "start": "1415810",
    "end": "1420410"
  },
  {
    "text": "need to be physically on the master vmx",
    "start": "1420410",
    "end": "1422480"
  },
  {
    "text": "having access to the actual TPM to get",
    "start": "1422480",
    "end": "1424970"
  },
  {
    "text": "access to this key and decrypt it you",
    "start": "1424970",
    "end": "1427880"
  },
  {
    "text": "might think why don't we just like skip",
    "start": "1427880",
    "end": "1429320"
  },
  {
    "text": "this whole thing and use TPM as a kms",
    "start": "1429320",
    "end": "1431590"
  },
  {
    "text": "the problem is that TPMS are really low",
    "start": "1431590",
    "end": "1434510"
  },
  {
    "text": "powered devices they have very limited",
    "start": "1434510",
    "end": "1435890"
  },
  {
    "text": "memory so you can only start a handful",
    "start": "1435890",
    "end": "1437870"
  },
  {
    "text": "of keys there and at least physical TPMS",
    "start": "1437870",
    "end": "1441770"
  },
  {
    "text": "will be really slow in encryption and",
    "start": "1441770",
    "end": "1444380"
  },
  {
    "text": "decryption so they'll really slow down",
    "start": "1444380",
    "end": "1446450"
  },
  {
    "text": "your API so they're not a good fit for",
    "start": "1446450",
    "end": "1448040"
  },
  {
    "text": "like in being something in request path",
    "start": "1448040",
    "end": "1452800"
  },
  {
    "text": "so yeah having this token sealed should",
    "start": "1453130",
    "end": "1456830"
  },
  {
    "text": "help us protect against compromises of",
    "start": "1456830",
    "end": "1459020"
  },
  {
    "text": "offline backups in summary transformers",
    "start": "1459020",
    "end": "1462950"
  },
  {
    "start": "1460000",
    "end": "1460000"
  },
  {
    "text": "are a waits for you to add some",
    "start": "1462950",
    "end": "1464330"
  },
  {
    "text": "pluggable custom logic in the path of",
    "start": "1464330",
    "end": "1466400"
  },
  {
    "text": "data that's being starting to hed",
    "start": "1466400",
    "end": "1469360"
  },
  {
    "text": "and there's multiple layers of",
    "start": "1469360",
    "end": "1471340"
  },
  {
    "text": "Transformers there's sort of were built",
    "start": "1471340",
    "end": "1473230"
  },
  {
    "text": "historically there's the standard",
    "start": "1473230",
    "end": "1474700"
  },
  {
    "text": "transformer that just does the thing to",
    "start": "1474700",
    "end": "1476200"
  },
  {
    "text": "data then there's sample of transformers",
    "start": "1476200",
    "end": "1477880"
  },
  {
    "text": "to use multiple keys to encrypt the data",
    "start": "1477880",
    "end": "1480970"
  },
  {
    "text": "and help from exploitation of the root",
    "start": "1480970",
    "end": "1484990"
  },
  {
    "text": "key and then there are came as plugins",
    "start": "1484990",
    "end": "1487030"
  },
  {
    "text": "that are just a type are just a type of",
    "start": "1487030",
    "end": "1489100"
  },
  {
    "text": "panel options former that talked to came",
    "start": "1489100",
    "end": "1491799"
  },
  {
    "text": "as provider for hosting kicks and",
    "start": "1491799",
    "end": "1493799"
  },
  {
    "text": "finally TPMS are one possible option for",
    "start": "1493799",
    "end": "1498420"
  },
  {
    "text": "protecting the credentials that came as",
    "start": "1498420",
    "end": "1500559"
  },
  {
    "text": "plugins might use now I want to",
    "start": "1500559",
    "end": "1504220"
  },
  {
    "text": "encourage anyone to strongly consider",
    "start": "1504220",
    "end": "1506850"
  },
  {
    "text": "encrypting your secrets at rest if",
    "start": "1506850",
    "end": "1508990"
  },
  {
    "text": "you're not doing it already hopefully",
    "start": "1508990",
    "end": "1511330"
  },
  {
    "text": "there's enough evidence that this is a",
    "start": "1511330",
    "end": "1512820"
  },
  {
    "text": "problem worth addressing and also",
    "start": "1512820",
    "end": "1516190"
  },
  {
    "text": "Iyengar's the audience with the new",
    "start": "1516190",
    "end": "1518490"
  },
  {
    "text": "information about transformers to",
    "start": "1518490",
    "end": "1522250"
  },
  {
    "text": "actually go out and contribute to the",
    "start": "1522250",
    "end": "1524160"
  },
  {
    "text": "transformer code base maybe proposed",
    "start": "1524160",
    "end": "1526270"
  },
  {
    "text": "design changes maybe implements new",
    "start": "1526270",
    "end": "1528160"
  },
  {
    "text": "types of transformers that don't only do",
    "start": "1528160",
    "end": "1530320"
  },
  {
    "text": "secrets encryption and maybe implement a",
    "start": "1530320",
    "end": "1533140"
  },
  {
    "text": "kms plugin for a provider that doesn't",
    "start": "1533140",
    "end": "1535510"
  },
  {
    "text": "have one already finally here's a few",
    "start": "1535510",
    "end": "1538330"
  },
  {
    "text": "links to the previous talks on the kms",
    "start": "1538330",
    "end": "1541090"
  },
  {
    "text": "plugins and TPMS from previous cube cons",
    "start": "1541090",
    "end": "1543400"
  },
  {
    "text": "that might be interesting if you",
    "start": "1543400",
    "end": "1545230"
  },
  {
    "text": "actually want to dive into this deeper",
    "start": "1545230",
    "end": "1546910"
  },
  {
    "text": "and implement your own transformers",
    "start": "1546910",
    "end": "1549929"
  },
  {
    "text": "right thank you very much and if there's",
    "start": "1549929",
    "end": "1552520"
  },
  {
    "text": "any questions I believe we have a few",
    "start": "1552520",
    "end": "1553929"
  },
  {
    "text": "minutes",
    "start": "1553929",
    "end": "1556200"
  },
  {
    "text": "there's a micro ganja I am wondering why",
    "start": "1561290",
    "end": "1568190"
  },
  {
    "text": "this kind of campaign functionality is",
    "start": "1568190",
    "end": "1570650"
  },
  {
    "text": "not implemented in G city it is not even",
    "start": "1570650",
    "end": "1575060"
  },
  {
    "text": "implemented eg city it is City the",
    "start": "1575060",
    "end": "1581420"
  },
  {
    "text": "boundary you have the boundary you have",
    "start": "1581420",
    "end": "1585700"
  },
  {
    "text": "is between kubernetes and each city",
    "start": "1585700",
    "end": "1589010"
  },
  {
    "text": "right etcd",
    "start": "1589010",
    "end": "1592420"
  },
  {
    "text": "UT city instead I mean the indoor near",
    "start": "1596740",
    "end": "1603130"
  },
  {
    "text": "they sturgeon air I mean why does it",
    "start": "1603130",
    "end": "1605960"
  },
  {
    "text": "easy does not do that by itself right",
    "start": "1605960",
    "end": "1607640"
  },
  {
    "text": "yeah so so there's also something called",
    "start": "1607640",
    "end": "1615190"
  },
  {
    "text": "like filesystem layer encryption or disk",
    "start": "1615190",
    "end": "1617570"
  },
  {
    "text": "encryption and that usually is done by",
    "start": "1617570",
    "end": "1620600"
  },
  {
    "text": "most cloud providers already the problem",
    "start": "1620600",
    "end": "1624200"
  },
  {
    "text": "so those two things are not achieving",
    "start": "1624200",
    "end": "1628490"
  },
  {
    "text": "the same goals necessarily their",
    "start": "1628490",
    "end": "1629870"
  },
  {
    "text": "supplemental to both both are needed you",
    "start": "1629870",
    "end": "1633760"
  },
  {
    "text": "the thing that full disk encryption",
    "start": "1633760",
    "end": "1636650"
  },
  {
    "text": "provides you is protection against",
    "start": "1636650",
    "end": "1639770"
  },
  {
    "text": "someone physically running and like",
    "start": "1639770",
    "end": "1641420"
  },
  {
    "text": "stealing your hard drive like something",
    "start": "1641420",
    "end": "1642800"
  },
  {
    "text": "running into the data center and",
    "start": "1642800",
    "end": "1643610"
  },
  {
    "text": "grabbing the hard drive and mounting",
    "start": "1643610",
    "end": "1645290"
  },
  {
    "text": "interviewing data as long as that hard",
    "start": "1645290",
    "end": "1647480"
  },
  {
    "text": "drive can be put online in a data center",
    "start": "1647480",
    "end": "1649400"
  },
  {
    "text": "and decrypt it at runtime which usually",
    "start": "1649400",
    "end": "1652730"
  },
  {
    "text": "happens with backups you you don't even",
    "start": "1652730",
    "end": "1657110"
  },
  {
    "text": "see that the disk was encrypted in the",
    "start": "1657110",
    "end": "1658970"
  },
  {
    "text": "first place",
    "start": "1658970",
    "end": "1660140"
  },
  {
    "text": "you usually see that the data that's",
    "start": "1660140",
    "end": "1662300"
  },
  {
    "text": "like at a higher level that was already",
    "start": "1662300",
    "end": "1663920"
  },
  {
    "text": "decrypted and provided for you so for",
    "start": "1663920",
    "end": "1666290"
  },
  {
    "text": "this encryption is a supplemental",
    "start": "1666290",
    "end": "1668600"
  },
  {
    "text": "feature now EDD could in theory",
    "start": "1668600",
    "end": "1671650"
  },
  {
    "text": "implement encryption of its own just say",
    "start": "1671650",
    "end": "1674630"
  },
  {
    "text": "like everything that's reading to HCT is",
    "start": "1674630",
    "end": "1676340"
  },
  {
    "text": "being encrypted before it touches the",
    "start": "1676340",
    "end": "1678770"
  },
  {
    "text": "disk that could be done I'm not I'm not",
    "start": "1678770",
    "end": "1684260"
  },
  {
    "text": "been with child in touch with ICD folks",
    "start": "1684260",
    "end": "1686300"
  },
  {
    "text": "about it but I assume it has exactly the",
    "start": "1686300",
    "end": "1688340"
  },
  {
    "text": "same problems is that you have to",
    "start": "1688340",
    "end": "1689930"
  },
  {
    "text": "specify we'll provide some key coming",
    "start": "1689930",
    "end": "1693740"
  },
  {
    "text": "from",
    "start": "1693740",
    "end": "1694250"
  },
  {
    "text": "more to do in the encryption usually the",
    "start": "1694250",
    "end": "1696860"
  },
  {
    "text": "problem with the encryption a trust is",
    "start": "1696860",
    "end": "1699230"
  },
  {
    "text": "not the actual fact of encryption but",
    "start": "1699230",
    "end": "1701900"
  },
  {
    "text": "it's the key management that's",
    "start": "1701900",
    "end": "1703130"
  },
  {
    "text": "associated with it",
    "start": "1703130",
    "end": "1704960"
  },
  {
    "text": "and theoretically it's you could",
    "start": "1704960",
    "end": "1708230"
  },
  {
    "text": "implement something similar but they",
    "start": "1708230",
    "end": "1709790"
  },
  {
    "text": "would have the same exact problems exam",
    "start": "1709790",
    "end": "1712010"
  },
  {
    "text": "another reason is that encrypting",
    "start": "1712010",
    "end": "1715220"
  },
  {
    "text": "everything might be my defect",
    "start": "1715220",
    "end": "1717950"
  },
  {
    "text": "performance so if you have encryption",
    "start": "1717950",
    "end": "1720740"
  },
  {
    "text": "that's based on some remote service not",
    "start": "1720740",
    "end": "1723050"
  },
  {
    "text": "the local key then all of your objects",
    "start": "1723050",
    "end": "1726830"
  },
  {
    "text": "are being read or written will incur",
    "start": "1726830",
    "end": "1728780"
  },
  {
    "text": "this penalty of some remote call and",
    "start": "1728780",
    "end": "1731980"
  },
  {
    "text": "that most likely is a big big penalty",
    "start": "1731980",
    "end": "1739030"
  },
  {
    "text": "all right no more questions thank you so",
    "start": "1742600",
    "end": "1747950"
  },
  {
    "text": "much",
    "start": "1747950",
    "end": "1749980"
  },
  {
    "text": "[Applause]",
    "start": "1749980",
    "end": "1753460"
  }
]