[
  {
    "start": "0",
    "end": "32000"
  },
  {
    "text": "all right everybody I think we're gonna go ahead and get started it's a quarter till and I tend to ramble you know so",
    "start": "0",
    "end": "7319"
  },
  {
    "text": "probably need all the time I have and twice that my name is Andrew Coates and I work for VMware and in case you are",
    "start": "7319",
    "end": "15150"
  },
  {
    "text": "not where you think you should be this is a talk on adding support for new platforms such as AWS vSphere GCE to",
    "start": "15150",
    "end": "24449"
  },
  {
    "text": "CNCs cross cloud dashboard and with that we'll go and get started so this is our",
    "start": "24449",
    "end": "33329"
  },
  {
    "start": "32000",
    "end": "44000"
  },
  {
    "text": "agenda for today it's pretty straightforward don't have a lot of time to add the humor I normally would that's",
    "start": "33329",
    "end": "41160"
  },
  {
    "text": "okay you probably saved from that so first of all what is the CNC F cross",
    "start": "41160",
    "end": "47010"
  },
  {
    "start": "44000",
    "end": "108000"
  },
  {
    "text": "cloud CI I'm going to assume you all know what the CNC F is and just move past that the CNC F cross cloud CI",
    "start": "47010",
    "end": "56210"
  },
  {
    "text": "ultimately culminates in something like this this dashboard they have a project",
    "start": "56210",
    "end": "62430"
  },
  {
    "text": "called cross cloud that builds kubernetes and provisions it to multiple",
    "start": "62430",
    "end": "67530"
  },
  {
    "text": "platforms again such as GCE AWS packet",
    "start": "67530",
    "end": "72890"
  },
  {
    "text": "vSphere and then it builds and deploys",
    "start": "72890",
    "end": "78500"
  },
  {
    "text": "multiple CN CF projects and you can see on there some of those linker D fluent the core DNS and it ensures that",
    "start": "78500",
    "end": "86659"
  },
  {
    "text": "different versions of kubernetes that always builds the last GA release and then head can coexist harmoniously with",
    "start": "86659",
    "end": "93869"
  },
  {
    "text": "several well-known CN CF projects it doesn't run the kubernetes e to e",
    "start": "93869",
    "end": "99420"
  },
  {
    "text": "conformance tests but it does run some tests for the projects you see up there",
    "start": "99420",
    "end": "106189"
  },
  {
    "start": "108000",
    "end": "146000"
  },
  {
    "text": "cross cloud is really three distinct components build cross cloud and cross",
    "start": "108229",
    "end": "113700"
  },
  {
    "text": "project today we're going to be focusing on the cross cloud component and it's",
    "start": "113700",
    "end": "119909"
  },
  {
    "text": "what enables the multi-platform support and that is a pretty up-to-date view of",
    "start": "119909",
    "end": "125040"
  },
  {
    "text": "what platforms are currently supports in case you can't see it it's AWS microsoft",
    "start": "125040",
    "end": "130410"
  },
  {
    "text": "azure GCE IBM cloud packet openstack vmware vsphere and OCI or",
    "start": "130410",
    "end": "136950"
  },
  {
    "text": "oracle cloud infrastructure and today's talk is to how to help you put your",
    "start": "136950",
    "end": "143460"
  },
  {
    "text": "platform on the dashboard the cross cloud project actually leverages",
    "start": "143460",
    "end": "149370"
  },
  {
    "start": "146000",
    "end": "181000"
  },
  {
    "text": "terraform and when we'll get into that in a bit but when you want to add support for a new platform you have to",
    "start": "149370",
    "end": "155130"
  },
  {
    "text": "basically either create or live leverage an existing terraform provider for your",
    "start": "155130",
    "end": "160860"
  },
  {
    "text": "platform directories at the root of the project mapped to those platforms again same list I've been repeating and the",
    "start": "160860",
    "end": "169380"
  },
  {
    "text": "other directories are terraform modules that the platform projects then import so modules for doing things like",
    "start": "169380",
    "end": "175800"
  },
  {
    "text": "deploying DNS deploying kubernetes creating your cube config file what so long so how do we actually add support",
    "start": "175800",
    "end": "183660"
  },
  {
    "start": "181000",
    "end": "348000"
  },
  {
    "text": "for a new project well it's easy as like I say one two three and minus one it's",
    "start": "183660",
    "end": "190620"
  },
  {
    "text": "several steps but it's pretty straightforward there are some hiccups along the way and hopefully this talk",
    "start": "190620",
    "end": "195990"
  },
  {
    "text": "will help you handle those with the aplomb that I did not so before you",
    "start": "195990",
    "end": "202620"
  },
  {
    "text": "begin what are the requirements is there a terraform provider for your",
    "start": "202620",
    "end": "208320"
  },
  {
    "text": "platform luckily when I began work on this and myself and we who is here today",
    "start": "208320",
    "end": "213380"
  },
  {
    "text": "you know I'm the one on the stage but honestly he did most of the work and if I can get that arrangement for all my",
    "start": "213380",
    "end": "219360"
  },
  {
    "text": "projects going forward then and then it'll be boring but at least that I can put the blame on him so is there a",
    "start": "219360",
    "end": "227040"
  },
  {
    "text": "provider if there's not you will need to create one that's not in the scope of this talk but there is a link from the",
    "start": "227040",
    "end": "237290"
  },
  {
    "text": "presentation that takes you to the list of terraform providers and you can see if there is a provider for your platform",
    "start": "237320",
    "end": "243269"
  },
  {
    "text": "you'd be surprised there are providers for dozens and dozens is docker",
    "start": "243269",
    "end": "248519"
  },
  {
    "text": "installed locally is the next requirement why do you need docker locally to do testing to test that your",
    "start": "248519",
    "end": "254160"
  },
  {
    "text": "changes are working and we're going to use that in a bit to actually deploy kubernetes with the cross cloud",
    "start": "254160",
    "end": "260459"
  },
  {
    "text": "provisioner from my laptop to a public vSphere instance and finally it's",
    "start": "260459",
    "end": "267210"
  },
  {
    "text": "not required but it would be really good to have an IDE that has support for Tara forms syntax so that when you look at a",
    "start": "267210",
    "end": "275039"
  },
  {
    "text": "file it's just not black and white and it's HCl it's hash II core language but",
    "start": "275039",
    "end": "282150"
  },
  {
    "text": "yeah it's it's easy to read but the syntax highlighting is not as nice and finally if you've not used Tara form",
    "start": "282150",
    "end": "288900"
  },
  {
    "text": "before there is gonna be a learning curve it was new to me I might use",
    "start": "288900",
    "end": "294180"
  },
  {
    "text": "vagrant but vagrants files are based on Ruby Tara form is not it is all",
    "start": "294180",
    "end": "299729"
  },
  {
    "text": "declarative which you know people love and hate I'm somewhere in the middle but the nice thing that it does do for you",
    "start": "299729",
    "end": "306000"
  },
  {
    "text": "is it handles ordering all resources is defined in a terraform file can depend",
    "start": "306000",
    "end": "312720"
  },
  {
    "text": "on other resources so it handles the ordering that things have to come online for you without that experience there",
    "start": "312720",
    "end": "319650"
  },
  {
    "text": "could be a slight learning curve but again I was brand new to it as well and",
    "start": "319650",
    "end": "324770"
  },
  {
    "text": "we went from not being on the dashboard to being on the dashboard in about a month and a half",
    "start": "324770",
    "end": "330139"
  },
  {
    "text": "completely net new to it I was also brand new to kubernetes this year so I",
    "start": "330139",
    "end": "335759"
  },
  {
    "text": "don't know why they let me come up and give a talk but if nothing else you all",
    "start": "335759",
    "end": "341880"
  },
  {
    "text": "look way more capable than me and I was brand new to kubernetes in April so not",
    "start": "341880",
    "end": "349169"
  },
  {
    "text": "new to CI so if you're new to both maybe they'll be a bit more of a learning curve but so the first step to creating",
    "start": "349169",
    "end": "356340"
  },
  {
    "text": "a new platform adding support for new platform is forking the cross cloud",
    "start": "356340",
    "end": "361500"
  },
  {
    "text": "project on github I'm not going to demonstrate that because I've already forked it but I think we all know how to",
    "start": "361500",
    "end": "368669"
  },
  {
    "text": "port projects on github um actually I don't sorry I don't have let me show you",
    "start": "368669",
    "end": "377460"
  },
  {
    "text": "that project because it just now occurs to me that I don't have it up so this is",
    "start": "377460",
    "end": "382919"
  },
  {
    "text": "the cross cloud project on github there's actually a link to this in the presentation",
    "start": "382919",
    "end": "389210"
  },
  {
    "text": "it's just cross clouds and then cross - cloud and again there's a link but I",
    "start": "389210",
    "end": "394560"
  },
  {
    "text": "just wanted to show you what it looks like in github so you fork that",
    "start": "394560",
    "end": "399529"
  },
  {
    "text": "I always find it helpful to go ahead and add a get remote as upstream so when I",
    "start": "399840",
    "end": "408360"
  },
  {
    "start": "401000",
    "end": "420000"
  },
  {
    "text": "clone my fork I immediately do a git remote add upstream so if I ever need to fetch changes I mean that's something",
    "start": "408360",
    "end": "414060"
  },
  {
    "text": "you can do for all of your projects so",
    "start": "414060",
    "end": "417620"
  },
  {
    "text": "this next step this this actually used to be a lot more difficult very recently we created a small tool that can help",
    "start": "419419",
    "end": "427050"
  },
  {
    "start": "420000",
    "end": "614000"
  },
  {
    "text": "you create a skeleton for adding a new provider and I'll demonstrate that here in a moment the skeleton includes",
    "start": "427050",
    "end": "434669"
  },
  {
    "text": "initial documentation like the readme bare-bones terraform files as well as",
    "start": "434669",
    "end": "440100"
  },
  {
    "text": "some helper scripts and a hack directory to make standing up tearing down",
    "start": "440100",
    "end": "445290"
  },
  {
    "text": "clusters a little easier so we can actually show that off right here I'm just going to copy this as is we're just",
    "start": "445290",
    "end": "461400"
  },
  {
    "text": "gonna well actually actually prove that cube con doesn't exists it does not",
    "start": "461400",
    "end": "467300"
  },
  {
    "text": "hey it's created so it kind of tells you the steps that you need to do next",
    "start": "470580",
    "end": "475930"
  },
  {
    "text": "now this tool relies on some markers and two files a docker file and the",
    "start": "475930",
    "end": "481210"
  },
  {
    "text": "provision script that aren't merged yet into master if that if that was the case",
    "start": "481210",
    "end": "488130"
  },
  {
    "text": "since they're not yet merged it still can work without it if we do this",
    "start": "488130",
    "end": "495180"
  },
  {
    "text": "you're gonna get additional information that you need to update those two files manually so it again I just added some",
    "start": "506900",
    "end": "514700"
  },
  {
    "text": "markers that lets me find the last can i",
    "start": "514700",
    "end": "520760"
  },
  {
    "text": "zoom it yeah sure is that better all",
    "start": "520760",
    "end": "526340"
  },
  {
    "text": "right yeah we're going to go through",
    "start": "526340",
    "end": "531410"
  },
  {
    "text": "these steps one by one but I'm gonna go ahead and go back to the other branch",
    "start": "531410",
    "end": "537279"
  },
  {
    "text": "okay so let me rerun that and then we can",
    "start": "547900",
    "end": "553070"
  },
  {
    "text": "look at the scripts that it creates okay",
    "start": "553070",
    "end": "560530"
  },
  {
    "text": "hmm so there's my cube con directory so",
    "start": "560530",
    "end": "565790"
  },
  {
    "text": "the very first thing it creates is it just creates this readme and again I mean if you go to the the actual website",
    "start": "565790",
    "end": "572540"
  },
  {
    "text": "it's going to look very much like VMware's because I just copied ours so",
    "start": "572540",
    "end": "580340"
  },
  {
    "text": "running that file gets you a readme which you know starts you on your path",
    "start": "580340",
    "end": "587060"
  },
  {
    "text": "to creating the new provider you still need to fill in things like the configuration but it does give you the",
    "start": "587060",
    "end": "595190"
  },
  {
    "text": "commands to stand up the cluster once you have it up but beyond the readme",
    "start": "595190",
    "end": "600470"
  },
  {
    "text": "there are a few key files you need to to worry about and let me switch back to the presentation and then I don't know",
    "start": "600470",
    "end": "609800"
  },
  {
    "text": "what I just did there right so the very",
    "start": "609800",
    "end": "614990"
  },
  {
    "start": "614000",
    "end": "703000"
  },
  {
    "text": "first step would be configuring your terraform provider and that is going to",
    "start": "614990",
    "end": "620330"
  },
  {
    "text": "be in the providers file so there's obviously not a cube con provider hold",
    "start": "620330",
    "end": "625430"
  },
  {
    "text": "on that better there's obviously not a",
    "start": "625430",
    "end": "632090"
  },
  {
    "text": "cube con provider but if it was something like AWS or vSphere let me I",
    "start": "632090",
    "end": "637160"
  },
  {
    "text": "can show you these spheres provider so",
    "start": "637160",
    "end": "643910"
  },
  {
    "text": "for example this just ensures that the version is that as equal or greater to the specific version of the provider and",
    "start": "643910",
    "end": "650990"
  },
  {
    "text": "it configures it with its credentials and allows unverified SSL what-have-you but so you would need to configure your",
    "start": "650990",
    "end": "658400"
  },
  {
    "text": "version of that and I thought I'd put a link to the list of providers it's a go",
    "start": "658400",
    "end": "664250"
  },
  {
    "text": "it's actually a fine time to just go ahead and show that terraform providers",
    "start": "664250",
    "end": "671890"
  },
  {
    "text": "so here's a list of all the terraform providers and again there are a ton and these are just I think the major cloud",
    "start": "673820",
    "end": "680880"
  },
  {
    "text": "providers so if you don't have one it has instructions on how to create it but",
    "start": "680880",
    "end": "688020"
  },
  {
    "text": "it also has instructions on how to configure yours okay next step after you've got that",
    "start": "688020",
    "end": "695250"
  },
  {
    "text": "configured you might have noticed that there are certain things using these",
    "start": "695250",
    "end": "703100"
  },
  {
    "start": "703000",
    "end": "846000"
  },
  {
    "text": "what they look like variables right they have the dollar sign than the VAR dot what are they well they are variables",
    "start": "703100",
    "end": "708420"
  },
  {
    "text": "they actually reference terraform input variables and they are defined in this file called input TF and these are all",
    "start": "708420",
    "end": "716130"
  },
  {
    "text": "of the configuration properties that your project can use for example like",
    "start": "716130",
    "end": "722190"
  },
  {
    "text": "the name of the cluster or the directory inside the container where the data is stored and then beyond that is just",
    "start": "722190",
    "end": "728640"
  },
  {
    "text": "common data these are actually that's not even true this is the only this is",
    "start": "728640",
    "end": "735360"
  },
  {
    "text": "the only piece of information even specific to this project the rest of this is just common data that is true",
    "start": "735360",
    "end": "741960"
  },
  {
    "text": "for all of the platform providers now why do we define them here and not at",
    "start": "741960",
    "end": "748110"
  },
  {
    "text": "the root of the cross cloud project as I said every platform directory is a",
    "start": "748110",
    "end": "753690"
  },
  {
    "text": "terraform project there were two ways that the CNC F could have built this and",
    "start": "753690",
    "end": "758760"
  },
  {
    "text": "they chose B instead of a either both are valid version a would have meant",
    "start": "758760",
    "end": "765090"
  },
  {
    "text": "that the route of the Cross Cloud project was a terraform project and they loaded the platform directories as",
    "start": "765090",
    "end": "771330"
  },
  {
    "text": "terraform modules instead they run terraform inside of the platform",
    "start": "771330",
    "end": "777330"
  },
  {
    "text": "directories and then load all the other directories that install kubernetes create the cube config all that as",
    "start": "777330",
    "end": "783320"
  },
  {
    "text": "modules because of that your directory controls the input for the project and",
    "start": "783320",
    "end": "789930"
  },
  {
    "text": "because some of those other modules have expected inputs themselves you have to",
    "start": "789930",
    "end": "795420"
  },
  {
    "text": "define them at the root of your project because any one of these at the root of",
    "start": "795420",
    "end": "800730"
  },
  {
    "text": "your project can then be the set via a configuration file but",
    "start": "800730",
    "end": "806280"
  },
  {
    "text": "also via the command line so TF VAR name equals any configuration parameter any",
    "start": "806280",
    "end": "814470"
  },
  {
    "text": "variable define an input TF can be defined as an environment variable by",
    "start": "814470",
    "end": "819720"
  },
  {
    "text": "prefixing TF VAR underscore and then",
    "start": "819720",
    "end": "824850"
  },
  {
    "text": "just the name of it so that allows you",
    "start": "824850",
    "end": "831480"
  },
  {
    "text": "to define that at runtime you notice that they have a never the CNC F hasn't actually updated the version of",
    "start": "831480",
    "end": "837600"
  },
  {
    "text": "kubernetes since 110 not in the repo but they do when they actually run when they",
    "start": "837600",
    "end": "842700"
  },
  {
    "text": "actually provision it so you want to make sure all of your input parameters",
    "start": "842700",
    "end": "848070"
  },
  {
    "start": "846000",
    "end": "945000"
  },
  {
    "text": "that you need her to find there the file modules TF this is where it starts to get interesting this is responsible for",
    "start": "848070",
    "end": "856140"
  },
  {
    "text": "loading your projects modules as well as the common modules the scaffolding that",
    "start": "856140",
    "end": "862650"
  },
  {
    "text": "the script creates includes three modules the module for the control plane",
    "start": "862650",
    "end": "869070"
  },
  {
    "text": "nodes which is referred to as master due to just the way it's referred to another project the module called worker for the",
    "start": "869070",
    "end": "876960"
  },
  {
    "text": "worker nodes and finally the module load balancer I added that module even though",
    "start": "876960",
    "end": "883440"
  },
  {
    "text": "not all providers use it and if you don't use it that's fine it's configured by default to just return the IP",
    "start": "883440",
    "end": "889050"
  },
  {
    "text": "addresses of the control plane nodes but if you want to it gives you a placeholder to add a load balancer the",
    "start": "889050",
    "end": "898050"
  },
  {
    "text": "other modules that this file loads are the modules responsible for configuring",
    "start": "898050",
    "end": "903150"
  },
  {
    "text": "the common components so master templates you can see it loads it from",
    "start": "903150",
    "end": "909210"
  },
  {
    "text": "source dot slash master templates 1.10 this is what loads or deploys kubernetes",
    "start": "909210",
    "end": "915270"
  },
  {
    "text": "and all of its dependencies to the master net or the control plane nodes module worker templates is responsible",
    "start": "915270",
    "end": "921240"
  },
  {
    "text": "for the worker nodes and then load balancer loads our load balancer dns",
    "start": "921240",
    "end": "928200"
  },
  {
    "text": "deploys dns TLS this generates all of the certificates for that are necessary",
    "start": "928200",
    "end": "933510"
  },
  {
    "text": "to deploy kubernetes and finally cube config just generates a cube config locally so that you can access the remote system I",
    "start": "933510",
    "end": "940070"
  },
  {
    "text": "kind of need to get moving here yep so right now the cross cloud project",
    "start": "940070",
    "end": "948420"
  },
  {
    "start": "945000",
    "end": "1218000"
  },
  {
    "text": "does expect your platform to have a valid cloud provider I have a branch out",
    "start": "948420",
    "end": "954480"
  },
  {
    "text": "there for which I don't think yet I've opened a PR but I've updated their their",
    "start": "954480",
    "end": "960270"
  },
  {
    "text": "templates to give you the ability to not need the cloud provider you can't just give it an empty input because the value",
    "start": "960270",
    "end": "967050"
  },
  {
    "text": "the name of the cloud provider is also used by them for other things just adds a boolean disabled that defaults to",
    "start": "967050",
    "end": "972930"
  },
  {
    "text": "false but right now it does it does expect you to have a cloud provider and",
    "start": "972930",
    "end": "978300"
  },
  {
    "text": "the scaffolding just creates a template file that loads this thing called cloud",
    "start": "978300",
    "end": "983520"
  },
  {
    "text": "conf and then it interpolates the variables in there with these input",
    "start": "983520",
    "end": "988950"
  },
  {
    "text": "values from input TF where is that used well you can see it's template file Cloud kampf when the module gets loaded",
    "start": "988950",
    "end": "999500"
  },
  {
    "text": "a cloud config it loads it in here it",
    "start": "999500",
    "end": "1005060"
  },
  {
    "text": "looks up the template data unit just interpolates that data with the input",
    "start": "1005060",
    "end": "1011240"
  },
  {
    "text": "variables that you provided it the modules that we create again are the",
    "start": "1011240",
    "end": "1016460"
  },
  {
    "text": "master and worker nodes and so they've got very similar files you've got your input file the number of nodes you want",
    "start": "1016460",
    "end": "1023540"
  },
  {
    "text": "the name the cloud in it data the number of CPUs amount of memory and Meg's",
    "start": "1023540",
    "end": "1029209"
  },
  {
    "text": "that's your input but you can also have output both the control plane nodes and",
    "start": "1029210",
    "end": "1035240"
  },
  {
    "text": "worker nodes output the IP addresses of the machines they create and that is",
    "start": "1035240",
    "end": "1040640"
  },
  {
    "text": "because in the parent project the route of our project here you will see where",
    "start": "1040640",
    "end": "1051890"
  },
  {
    "text": "is it it's gonna be at the load balancer I think module dot master master ip's",
    "start": "1051890",
    "end": "1060440"
  },
  {
    "text": "that map's back to this its module master master ip's so the modules can",
    "start": "1060440",
    "end": "1067790"
  },
  {
    "text": "share information with each other via puts and finally we've got an O in the",
    "start": "1067790",
    "end": "1074080"
  },
  {
    "text": "control plane and worker modules we actually then define the resources that",
    "start": "1074080",
    "end": "1080330"
  },
  {
    "text": "get created and again this type of resource is going to be specific to your terraform provider so I the scaffolding",
    "start": "1080330",
    "end": "1087350"
  },
  {
    "text": "can't assume what it is it does some basic configuration count is a terraform",
    "start": "1087350",
    "end": "1093500"
  },
  {
    "text": "specific property and if so for example by default the cross cloud project",
    "start": "1093500",
    "end": "1099230"
  },
  {
    "text": "creates three control plane nodes so they'll actually be three machine resources and those can actually be",
    "start": "1099230",
    "end": "1106690"
  },
  {
    "text": "renting the either the elements property like here or just normal array indexing",
    "start": "1106690",
    "end": "1113980"
  },
  {
    "text": "in fact you can see what this does when",
    "start": "1113980",
    "end": "1119210"
  },
  {
    "text": "it outputs the master IP addresses that star says I want the basically it joins",
    "start": "1119210",
    "end": "1126830"
  },
  {
    "text": "this array and this array is a list of the IP addresses from each machines and",
    "start": "1126830",
    "end": "1133300"
  },
  {
    "text": "machine nodes default IP address value and again the load balancer is the",
    "start": "1133300",
    "end": "1139340"
  },
  {
    "text": "scaffolding that it created this load balancer the scaffolding creates is very dumb it just says give me a list of the",
    "start": "1139340",
    "end": "1145730"
  },
  {
    "text": "target IPs and it just outputs the first value from that list there actually is",
    "start": "1145730",
    "end": "1153400"
  },
  {
    "text": "there actually are more concrete implementations of it this is V spheres",
    "start": "1153400",
    "end": "1160420"
  },
  {
    "text": "and actually leverages AWS for the load balancer so it can be as complex or as",
    "start": "1160420",
    "end": "1167150"
  },
  {
    "text": "simple as you want it but the scaffolding doesn't make any assumptions and it just creates something that's pretty dumb and that's pretty much",
    "start": "1167150",
    "end": "1174290"
  },
  {
    "text": "everything that oh finally the scaffolding does creates some helpful commands here deployed SH and basically",
    "start": "1174290",
    "end": "1183679"
  },
  {
    "text": "you could just run hack slash deployed SH and give it the name of a cluster to deploy and then as well as destroyed at",
    "start": "1183679",
    "end": "1191420"
  },
  {
    "text": "SH and that just calls this and you'll",
    "start": "1191420",
    "end": "1196670"
  },
  {
    "text": "see an example in a minute war actually and invoke something very similar to that it's just I use those files or",
    "start": "1196670",
    "end": "1203539"
  },
  {
    "text": "versions of those files whenever I'm doing testing that way I don't have to type out the whole docker run command",
    "start": "1203539",
    "end": "1208609"
  },
  {
    "text": "every single time and those are referenced and they read me as well yeah",
    "start": "1208609",
    "end": "1214999"
  },
  {
    "text": "let's go ahead and see Oh last two files",
    "start": "1214999",
    "end": "1220129"
  },
  {
    "start": "1218000",
    "end": "1284000"
  },
  {
    "text": "that you have to update the scaffolding did or the yeah the script did update those because it has a like I said it",
    "start": "1220129",
    "end": "1228080"
  },
  {
    "text": "has markers so if the you ran that script on a version of the cross cloud",
    "start": "1228080",
    "end": "1235849"
  },
  {
    "text": "project that didn't have these markers you would need to remember to add that copy cube conciencia slash cube con",
    "start": "1235849",
    "end": "1243879"
  },
  {
    "text": "it's what copies the assets from this project into the container image and",
    "start": "1243879",
    "end": "1249909"
  },
  {
    "text": "then finally you would need to make sure that you add this at the end of the",
    "start": "1249909",
    "end": "1257749"
  },
  {
    "text": "provisioned @sh it is the entry point for that image and it's what's",
    "start": "1257749",
    "end": "1263059"
  },
  {
    "text": "responsible for running terraform you can see it has two commands deploy and",
    "start": "1263059",
    "end": "1268820"
  },
  {
    "text": "destroy when they run it live they use an s3 back in to maintain state when you",
    "start": "1268820",
    "end": "1274999"
  },
  {
    "text": "run it locally you often will just use file so let's go ahead and see what that",
    "start": "1274999",
    "end": "1280009"
  },
  {
    "text": "actually looks like so the very first",
    "start": "1280009",
    "end": "1285889"
  },
  {
    "start": "1284000",
    "end": "1341000"
  },
  {
    "text": "thing we would do if we created a new plug new providers that we would rebuild the container image mine's already built",
    "start": "1285889",
    "end": "1293419"
  },
  {
    "text": "so I'm not going to rebuild it but let's go ahead and I thought I updated that",
    "start": "1293419",
    "end": "1300940"
  },
  {
    "text": "huh I did I just",
    "start": "1300940",
    "end": "1304599"
  },
  {
    "text": "it is not wanting to respond okay sorry about that I'm offline of course I am",
    "start": "1306220",
    "end": "1316020"
  },
  {
    "text": "I'm sorry it's okay I actually spent",
    "start": "1318780",
    "end": "1324400"
  },
  {
    "text": "part of this morning recording a demo of this very step because I knew it would",
    "start": "1324400",
    "end": "1330040"
  },
  {
    "text": "fail right here let me try switching to the other Network I apologize for this",
    "start": "1330040",
    "end": "1340500"
  },
  {
    "text": "you know the wireless worked great on Monday before everybody arrived and then",
    "start": "1340500",
    "end": "1346420"
  },
  {
    "start": "1341000",
    "end": "1373000"
  },
  {
    "text": "the show floor open all right so yeah we would we'd want to rebuild the the",
    "start": "1346420",
    "end": "1352660"
  },
  {
    "text": "docker image and actually we can go ahead and give it a quick demo of that what I'm going to do though is going to",
    "start": "1352660",
    "end": "1360030"
  },
  {
    "text": "remove those remove cube con docker boom",
    "start": "1360030",
    "end": "1365140"
  },
  {
    "text": "G and that's just going to rebuild this",
    "start": "1365140",
    "end": "1371750"
  },
  {
    "text": "image called provisioning and that's the name of it that's the name they use the for the image locally as well so we just",
    "start": "1371750",
    "end": "1380390"
  },
  {
    "text": "kind of stuck with that same convention technically there's no reason it couldn't be pushed pushed to a you know",
    "start": "1380390",
    "end": "1386720"
  },
  {
    "text": "a registry but you know when you're doing development you're not going to be using the the public one anyway so so it",
    "start": "1386720",
    "end": "1393650"
  },
  {
    "text": "updated the image and we're gonna deploy a new kubernetes cluster now this is",
    "start": "1393650",
    "end": "1399590"
  },
  {
    "text": "just an example of what you would do you do the docker run make sure that image",
    "start": "1399590",
    "end": "1405799"
  },
  {
    "text": "is removed or the containers removed after it quits you want to make sure you do the - at least - T which allocates a",
    "start": "1405799",
    "end": "1413510"
  },
  {
    "text": "pseudo terminal and if you don't do that you won't be able to control C out of the command because it won't send that control code through which is bad you",
    "start": "1413510",
    "end": "1422330"
  },
  {
    "text": "know I'm going to explain some of this when we get to the common problems because this is a specifically there to",
    "start": "1422330",
    "end": "1428809"
  },
  {
    "text": "solve one of them let's just go ahead and do the demo I mean grab my I had its",
    "start": "1428809",
    "end": "1438520"
  },
  {
    "text": "cache thoughts you know there we go",
    "start": "1438520",
    "end": "1444730"
  },
  {
    "text": "now so did I remember the question is",
    "start": "1447680",
    "end": "1453990"
  },
  {
    "text": "that I remember to actually I'm gonna go ahead and do that just in case I didn't",
    "start": "1453990",
    "end": "1459240"
  },
  {
    "text": "that I remember to tear it down before I came in here otherwise we just waste a few minutes all right so again this is",
    "start": "1459240",
    "end": "1467250"
  },
  {
    "start": "1466000",
    "end": "1550000"
  },
  {
    "text": "the I'm doing the docker run with the provisioning image these DNS servers are",
    "start": "1467250",
    "end": "1473040"
  },
  {
    "text": "important we'll tell you why in a minute we're mapping the data directory in the",
    "start": "1473040",
    "end": "1478260"
  },
  {
    "text": "folder I'm currently in to CN CF slash CN CF data they use that directory in their image to store the terraform data",
    "start": "1478260",
    "end": "1484700"
  },
  {
    "text": "this isn't necessarily required this just Maps the dot terraform directory in",
    "start": "1484700",
    "end": "1490350"
  },
  {
    "text": "the working directory from the container back to the current directories terraform directory why is that nice",
    "start": "1490350",
    "end": "1496220"
  },
  {
    "text": "it's the first time you run this it's gonna have to download a bunch of terraform plugins which can take a while",
    "start": "1496220",
    "end": "1501420"
  },
  {
    "text": "and if you map it back to your local directory you don't have to download them again these - eflags are passing",
    "start": "1501420",
    "end": "1508620"
  },
  {
    "text": "environment variables in to configure certain things these are the ones specific to cross cloud these up here",
    "start": "1508620",
    "end": "1515670"
  },
  {
    "text": "specific to our provider cloud tells it the type of platform to which it's",
    "start": "1515670",
    "end": "1523410"
  },
  {
    "text": "deploying back-end remember I mentioned they use s3 files also a valid candidate",
    "start": "1523410",
    "end": "1528450"
  },
  {
    "text": "name we're gonna deploy a cluster called cube con and finally the command to execute deploy the other option is",
    "start": "1528450",
    "end": "1534780"
  },
  {
    "text": "destroy so let's go ahead and execute this and hope it works and again if it",
    "start": "1534780",
    "end": "1539790"
  },
  {
    "text": "doesn't I've got a video of it working I kind of hope it does because I want to",
    "start": "1539790",
    "end": "1545340"
  },
  {
    "text": "be able to show it off in on an actual V Center environment so it's actually",
    "start": "1545340",
    "end": "1551130"
  },
  {
    "start": "1550000",
    "end": "1625000"
  },
  {
    "text": "going on here is it is creating certificates for all of the kubernetes",
    "start": "1551130",
    "end": "1556830"
  },
  {
    "text": "services including like the provision service account certificates that needs a CA for that right what is that giant",
    "start": "1556830",
    "end": "1562440"
  },
  {
    "text": "blob you see anyone take a guess hmm",
    "start": "1562440",
    "end": "1569600"
  },
  {
    "text": "texts yeah it's text it's a base64 encoded version of the cloud data user",
    "start": "1569600",
    "end": "1575100"
  },
  {
    "text": "data so the way that they deploy this is through cloud in it in fact while this",
    "start": "1575100",
    "end": "1580290"
  },
  {
    "text": "is doing this we can actually look at that they use cloud init to deploy against everything so you can see these",
    "start": "1580290",
    "end": "1587400"
  },
  {
    "text": "different versions what's the difference between 1.1 know and the same one at bun 2 if we look here this is non abun 2 it",
    "start": "1587400",
    "end": "1597240"
  },
  {
    "text": "expects it to be core OS this is just a cloud learn it template and the abun two",
    "start": "1597240",
    "end": "1602400"
  },
  {
    "text": "version it's called a bun 2 but it's not specific to a bun 2 cloud in it even",
    "start": "1602400",
    "end": "1609240"
  },
  {
    "text": "though it was created by canonical became very popular with Korres and so you know you'll often see cloud lean it",
    "start": "1609240",
    "end": "1614970"
  },
  {
    "text": "files with this at the top of it but that's specific to core OS and so",
    "start": "1614970",
    "end": "1621780"
  },
  {
    "text": "they've got one that works without core OS as well the longest step here at",
    "start": "1621780",
    "end": "1628950"
  },
  {
    "start": "1625000",
    "end": "1692000"
  },
  {
    "text": "least for us is this one right here creating the AWS load balancer I tried",
    "start": "1628950",
    "end": "1634680"
  },
  {
    "text": "to figure it out because I could create a load balancer in about two seconds but if you go look at the source code they",
    "start": "1634680",
    "end": "1639900"
  },
  {
    "text": "actually will not move past this until the load balancers listeners are",
    "start": "1639900",
    "end": "1645180"
  },
  {
    "text": "responding but that blocks everything else so it takes a bit before this you",
    "start": "1645180",
    "end": "1651570"
  },
  {
    "text": "know takes about two minutes usually before it decides just move on because I can't the listeners can't respond until",
    "start": "1651570",
    "end": "1657900"
  },
  {
    "text": "those machines are up any questions so",
    "start": "1657900",
    "end": "1668250"
  },
  {
    "text": "far we've got a sec I've got a section at the end dedicated to that but I want",
    "start": "1668250",
    "end": "1673290"
  },
  {
    "text": "to go ahead and ask since we're just waiting at this point once doing that I",
    "start": "1673290",
    "end": "1680910"
  },
  {
    "text": "actually will do the resolving common issues so remember I kept saying hey",
    "start": "1680910",
    "end": "1688740"
  },
  {
    "text": "notice these DNS entries crawl squad",
    "start": "1688740",
    "end": "1693870"
  },
  {
    "start": "1692000",
    "end": "1809000"
  },
  {
    "text": "uses a shared DNS server when it's standing up the environment one of the",
    "start": "1693870",
    "end": "1699060"
  },
  {
    "text": "things that it does and in fact we can see that if I had thought to do it although actually doesn't have yeah here",
    "start": "1699060",
    "end": "1704610"
  },
  {
    "text": "it is it's creating these DNS entries and their shared DNS server you can see it right there and that's basically",
    "start": "1704610",
    "end": "1711870"
  },
  {
    "text": "making it easy for them internally to the kubernetes cluster to reference the nodes without needing to know necessarily know the IP addresses ahead",
    "start": "1711870",
    "end": "1718680"
  },
  {
    "text": "of time the nodes are just responsible for or terraformers responsible for entering that data into the shared DNS",
    "start": "1718680",
    "end": "1724980"
  },
  {
    "text": "server if you run the provisioning container without that DNS one whatever",
    "start": "1724980",
    "end": "1732150"
  },
  {
    "text": "it is one four seven seven five six nine two three no one you're not going to",
    "start": "1732150",
    "end": "1737910"
  },
  {
    "text": "know how to access your cluster because the cube kuddle that the come sorry the cube config they're right out has the",
    "start": "1737910",
    "end": "1744060"
  },
  {
    "text": "DNS name has the fqdn it doesn't have the IP address so your operating",
    "start": "1744060",
    "end": "1750540"
  },
  {
    "text": "environment needs to be able to resolve names against their DNS server and you can add it to your host or you can just",
    "start": "1750540",
    "end": "1757020"
  },
  {
    "text": "do docker run and include the DNS there somebody helpfully created a cube cuddle",
    "start": "1757020",
    "end": "1763110"
  },
  {
    "text": "wrapper at the root of the project that does a docker run and adds this DNS server so",
    "start": "1763110",
    "end": "1768990"
  },
  {
    "text": "you will see that in a moment so right now it's just waiting for the cluster to",
    "start": "1768990",
    "end": "1774180"
  },
  {
    "text": "come online hopefully it will yeah so it",
    "start": "1774180",
    "end": "1782220"
  },
  {
    "text": "actually brings it up in about three minutes and then it's adding a bunch of manifests to ensure that everything's",
    "start": "1782220",
    "end": "1789480"
  },
  {
    "text": "there and happy now it's going to wait for the nodes to show up so what's the next common issue that we see yeah the",
    "start": "1789480",
    "end": "1796920"
  },
  {
    "text": "cross cloud image should be built from the the project or give it a dot dot slash if you're building it from the platform",
    "start": "1796920",
    "end": "1802440"
  },
  {
    "text": "already mentioned make sure you add the dash T flag or else you can't cancel out",
    "start": "1802440",
    "end": "1807840"
  },
  {
    "text": "of a deployment and here's one we had to figure out the hard way even though you",
    "start": "1807840",
    "end": "1814440"
  },
  {
    "start": "1809000",
    "end": "1945000"
  },
  {
    "text": "can immediately add entries to the shared DNS server until the CNC F team white lists your domain that cloud name",
    "start": "1814440",
    "end": "1822899"
  },
  {
    "text": "there they are sky DNS server won't respond to queries for your domain so you need to make sure they add that and",
    "start": "1822899",
    "end": "1829049"
  },
  {
    "text": "they will add that you know super quick alright so it's online and we can verify",
    "start": "1829049",
    "end": "1834570"
  },
  {
    "text": "that real quick by just using our helpful wrapper here and say gets all",
    "start": "1834570",
    "end": "1842149"
  },
  {
    "text": "and yep see how many nodes it has it's",
    "start": "1842149",
    "end": "1847379"
  },
  {
    "text": "got one node and then see what pods it's got in the cube system namespace should",
    "start": "1847379",
    "end": "1855179"
  },
  {
    "text": "have like the cube DNS you proxy EEP stir and what does that actually look",
    "start": "1855179",
    "end": "1861869"
  },
  {
    "text": "like over in vSphere well it deployed three control plane nodes and one worker",
    "start": "1861869",
    "end": "1869039"
  },
  {
    "text": "node now why one worker to three control plane nodes not positive but that's",
    "start": "1869039",
    "end": "1876090"
  },
  {
    "text": "their default configuration although you can modify that as you wish to do and then the load balancer it creates is",
    "start": "1876090",
    "end": "1882960"
  },
  {
    "text": "over here at AWS now you may not use the aw AWS load balancer you may use one of",
    "start": "1882960",
    "end": "1888749"
  },
  {
    "text": "your own or you may not use one at all doesn't really matter yeah here we go that's the load balancer from yeah a few",
    "start": "1888749",
    "end": "1895470"
  },
  {
    "text": "moments ago so let me get back to the presentation and then finally just",
    "start": "1895470",
    "end": "1900690"
  },
  {
    "text": "destroying it it's pretty easy you just run in fact we'll just use the helper",
    "start": "1900690",
    "end": "1908669"
  },
  {
    "text": "command now and remember yeah that's",
    "start": "1908669",
    "end": "1915029"
  },
  {
    "text": "here sure did I update that yeah remember it",
    "start": "1915029",
    "end": "1922480"
  },
  {
    "text": "the scaffolding will create the same helper commands that I'm using here for",
    "start": "1922480",
    "end": "1928540"
  },
  {
    "text": "you so that whole docker command we use to deploy it you could have just done hack slash deployed sh cube con be a lot",
    "start": "1928540",
    "end": "1936910"
  },
  {
    "text": "easier to remember that and have to type out everything but it's good to know how it works from the bottom up before you",
    "start": "1936910",
    "end": "1942910"
  },
  {
    "text": "start using the shortcuts so while it's destroying the cluster and by the way it",
    "start": "1942910",
    "end": "1948790"
  },
  {
    "start": "1945000",
    "end": "2069000"
  },
  {
    "text": "destroys all the resources associated with it as well the load balancer the TLS certificates the cube config the",
    "start": "1948790",
    "end": "1955960"
  },
  {
    "text": "machines well it's while the cluster is being destroyed that kind of want to open it up to questions or feedback does anyone",
    "start": "1955960",
    "end": "1962640"
  },
  {
    "text": "have any questions about something I didn't cover maybe something I missed or",
    "start": "1962640",
    "end": "1968020"
  },
  {
    "text": "that I should have spent a little extra time on does anyone feel like they could",
    "start": "1968020",
    "end": "1975460"
  },
  {
    "text": "go back and create one of these and if not like what what would be blocking you",
    "start": "1975460",
    "end": "1980710"
  },
  {
    "text": "from doing that yeah okay well let me",
    "start": "1980710",
    "end": "1987640"
  },
  {
    "text": "see while we're doing still destroying again that load balancers it takes forever so alright so it looks like it",
    "start": "1987640",
    "end": "1993970"
  },
  {
    "text": "should be destroyed let's verify that it's gone yep we don't see cube Khan there anymore and that load balancer",
    "start": "1993970",
    "end": "2002040"
  },
  {
    "text": "usually takes a moment to go away yep it's gone so that was it and again just",
    "start": "2002040",
    "end": "2009270"
  },
  {
    "text": "using the scaffolding command that is up",
    "start": "2009270",
    "end": "2015030"
  },
  {
    "text": "here should get you started to creating",
    "start": "2015030",
    "end": "2020430"
  },
  {
    "text": "one of your own adding support for your platform pretty quickly and if you have any questions about how to do that or",
    "start": "2020430",
    "end": "2027960"
  },
  {
    "text": "just want to suggest some ideas that could make this even you know easier",
    "start": "2027960",
    "end": "2033540"
  },
  {
    "text": "smoother please feel free to contact me or my colleague we and like I said the",
    "start": "2033540",
    "end": "2039300"
  },
  {
    "text": "link to the cross cloud repository is in the presentation probably should have been sooner and if you actually want to",
    "start": "2039300",
    "end": "2045630"
  },
  {
    "text": "see the working version of one of these these are all the pull requests for the VMware platform provider on my on",
    "start": "2045630",
    "end": "2053010"
  },
  {
    "text": "time oh man I think that that went",
    "start": "2053010",
    "end": "2058500"
  },
  {
    "text": "pretty well in terms of time I hadn't get chance to practice the whole thing like I wanted so if there are no other questions you can have back the rest of",
    "start": "2058500",
    "end": "2065429"
  },
  {
    "text": "your day thank you [Applause]",
    "start": "2065430",
    "end": "2070959"
  }
]