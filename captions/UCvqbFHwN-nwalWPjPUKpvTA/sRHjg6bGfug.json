[
  {
    "text": "so yeah this is the one Gateway API to rule them all and in the darkness I mean sorry in the cluster configure them um I",
    "start": "120",
    "end": "8160"
  },
  {
    "text": "am Flynn I'm a tech evangelist for Linker at buyant you can find me on basically all of the slacks that have",
    "start": "8160",
    "end": "14519"
  },
  {
    "text": "anything to do with the cncf as Flynn if email is your thing you can send email to Flyn boo. that works as",
    "start": "14519",
    "end": "22680"
  },
  {
    "text": "well the point here is that it would be really nice to have one way to talk",
    "start": "22680",
    "end": "28840"
  },
  {
    "text": "about all the different kind of traffic that can happen in cetes whether that's traffic from outside the cluster going",
    "start": "28840",
    "end": "35360"
  },
  {
    "text": "inside angress traffic or traffic between workloads in the cluster or",
    "start": "35360",
    "end": "40640"
  },
  {
    "text": "traffic leaving the cluster for outside it would be nice to be able to talk",
    "start": "40640",
    "end": "46520"
  },
  {
    "text": "about these things in pretty much the same way so we're going to talk a little bit about these kinds of traffic and",
    "start": "46520",
    "end": "51840"
  },
  {
    "text": "then if the demo goddesses smile upon us we will have a demo now is an",
    "start": "51840",
    "end": "56879"
  },
  {
    "text": "appropriate time to start praying to the demo goddesses um it worked great in rehearsal but",
    "start": "56879",
    "end": "63960"
  },
  {
    "text": "uh all right so we are going to start with Ingress specifically this is the Engish problem not the Engish resource",
    "start": "63960",
    "end": "71600"
  },
  {
    "text": "or Engish controller so this is the Engish problem the problem is pretty simple if you have a cluster and you",
    "start": "71600",
    "end": "77799"
  },
  {
    "text": "have workloads in the cluster you will have users outside the cluster who want to use things inside the",
    "start": "77799",
    "end": "83840"
  },
  {
    "text": "cluster but One does not simply send packets into a",
    "start": "83840",
    "end": "88840"
  },
  {
    "text": "cluster clusters do not let you do this this is a critical thing about security",
    "start": "88920",
    "end": "94360"
  },
  {
    "text": "within kubernetes you can't just randomly talk to things inside a cluster so instead we need something to sit",
    "start": "94360",
    "end": "100560"
  },
  {
    "text": "right there at the edge to mediate this path from outside to inside to do this",
    "start": "100560",
    "end": "105680"
  },
  {
    "text": "safely that thing historically is called an Engish controller I should also point out that",
    "start": "105680",
    "end": "112320"
  },
  {
    "text": "yes there is a thing called an inous resource we're not really going to talk about that it's sort of back from the",
    "start": "112320",
    "end": "118200"
  },
  {
    "text": "bad old days so the egress problem is kind of the",
    "start": "118200",
    "end": "126159"
  },
  {
    "text": "opposite of the Ingress problem where sometimes also you have workloads in",
    "start": "126159",
    "end": "131480"
  },
  {
    "text": "your cluster that need to talk to things outside your cluster and generally one does simply send packets outside the",
    "start": "131480",
    "end": "137400"
  },
  {
    "text": "cluster this is allowed for the most part and in fact that is the egis problem",
    "start": "137400",
    "end": "143640"
  },
  {
    "text": "because yeah okay for the most part your workloads will be talking to things that they should be talking to maybe they're",
    "start": "143640",
    "end": "149959"
  },
  {
    "text": "talking to your payment processor or they're talking to your bank or they're doing good things like that if they",
    "start": "149959",
    "end": "155599"
  },
  {
    "text": "decide to not do good things we would like to be able to do something about that right where doing",
    "start": "155599",
    "end": "162159"
  },
  {
    "text": "something might mean several things we might just want to monitor it to report it or we might want to take some sort of",
    "start": "162159",
    "end": "168840"
  },
  {
    "text": "action the simplest thing here really is just monitoring you want to be able to",
    "start": "168840",
    "end": "174319"
  },
  {
    "text": "see who inside the cluster is sending traffic to where outside the cluster",
    "start": "174319",
    "end": "181080"
  },
  {
    "text": "um if you don't even know that workload 2 is sending traffic to evil. evildoers",
    "start": "181080",
    "end": "186319"
  },
  {
    "text": "decom it's very difficult to do anything about that beyond that of course you might",
    "start": "186319",
    "end": "192920"
  },
  {
    "text": "want to take some sort of action like blocking the unapproved traffic but another interesting thing is you might",
    "start": "192920",
    "end": "199239"
  },
  {
    "text": "also want to take the Eis traffic and funnel it all through sort of the opposite of an Ingress controller funnel",
    "start": "199239",
    "end": "205000"
  },
  {
    "text": "it all through an egress controller where the egress controller gets the decision about what to allow and what",
    "start": "205000",
    "end": "210599"
  },
  {
    "text": "not to allow delegated to it this is the most flexible option it's",
    "start": "210599",
    "end": "216280"
  },
  {
    "text": "also the most complex option particularly because purpose-built egress controllers are a little tough to",
    "start": "216280",
    "end": "222040"
  },
  {
    "text": "come by you can kind of abuse Ingress controllers into being egress controllers sometimes but there aren't a",
    "start": "222040",
    "end": "229480"
  },
  {
    "text": "lot of options if you want something really built for the purpose ultimately the Ingress problem",
    "start": "229480",
    "end": "237560"
  },
  {
    "text": "is about providing access but the egress problem is about providing",
    "start": "237560",
    "end": "242959"
  },
  {
    "text": "control so we talk about them kind of as",
    "start": "242959",
    "end": "248120"
  },
  {
    "text": "opposites or of two sides of the same coin that's not quite accurate they really do have different",
    "start": "248120",
    "end": "255199"
  },
  {
    "text": "goals so that brings us to linkerd and how does Linker fit into all this um I",
    "start": "255199",
    "end": "261639"
  },
  {
    "text": "also I realize I really should have started with an apology the abstract for this talk for a",
    "start": "261639",
    "end": "267720"
  },
  {
    "text": "while was wrong but because it said oh we've added egress to the Gateway API",
    "start": "267720",
    "end": "272919"
  },
  {
    "text": "we've actually added egress to linkerd using the Gateway API the abstract has",
    "start": "272919",
    "end": "278000"
  },
  {
    "text": "been corrected but if you want to like get up and run from the room and protest because I got it wrong in the first",
    "start": "278000",
    "end": "283320"
  },
  {
    "text": "place after writing 18 different abstracts in three okay it was longer than three days but it felt like three",
    "start": "283320",
    "end": "288840"
  },
  {
    "text": "days I will not be offended much um Linker is a service",
    "start": "288840",
    "end": "295120"
  },
  {
    "text": "mesh the purpose of a service mesh is to add security reliability observability",
    "start": "295120",
    "end": "300759"
  },
  {
    "text": "at the platform Level under your application so that it can do it uniformly across your entire application",
    "start": "300759",
    "end": "307759"
  },
  {
    "text": "ideally without changing your application uh so if you have traffic",
    "start": "307759",
    "end": "313039"
  },
  {
    "text": "between these workloads the point of linkerd is to be able to go through and",
    "start": "313039",
    "end": "318240"
  },
  {
    "text": "report on what's happening there and to be able to affect the way traffic gets routed and do all sorts of cool things",
    "start": "318240",
    "end": "324400"
  },
  {
    "text": "like Riz and timeouts and you know all this amazing stuff the way Linker does this is the same way that b basically",
    "start": "324400",
    "end": "329919"
  },
  {
    "text": "every service mesh does this we take over the network including if you have an Engish",
    "start": "329919",
    "end": "337039"
  },
  {
    "text": "controller we will take over traffic from the INR controller which puts the mesh in a perfect position to be able to",
    "start": "337039",
    "end": "343280"
  },
  {
    "text": "measure your request rate and measure your success rate and measure latencies and report on all that stuff and also to",
    "start": "343280",
    "end": "349240"
  },
  {
    "text": "take whatever action seems appropriate with any of this traffic Linker I should point out does",
    "start": "349240",
    "end": "355720"
  },
  {
    "text": "this with sidecars everywhere not all meses do this with side cars everywhere we just like side",
    "start": "355720",
    "end": "362039"
  },
  {
    "text": "cars because they keep things simple and if you have a sidecar that's really lightweight and fast which hey we happen",
    "start": "362039",
    "end": "368280"
  },
  {
    "text": "to then it's okay to be running them all over the place much more operationally simple that",
    "start": "368280",
    "end": "375120"
  },
  {
    "text": "way if Linker is already mediating and measuring all of this traffic then that implies that Linker is also in a perfect",
    "start": "375120",
    "end": "381960"
  },
  {
    "text": "position to be able to see all of your egos traffic and measure that and to mediate that as well and in fact it is",
    "start": "381960",
    "end": "389240"
  },
  {
    "text": "um also since Linker is meant to add security to your application it's in the",
    "start": "389240",
    "end": "394560"
  },
  {
    "text": "it really makes sense for it to be doing all of this stuff with Eris which raises a fun question of okay so why did we not",
    "start": "394560",
    "end": "401880"
  },
  {
    "text": "always do this and there are two answers uh the obvious answer is because",
    "start": "401880",
    "end": "408840"
  },
  {
    "text": "engineer bandwidth is hard to come by a slightly less obvious answer though",
    "start": "408840",
    "end": "414520"
  },
  {
    "text": "is that the technology is actually not really the hard part here the hard part here is figuring out how to allow your",
    "start": "414520",
    "end": "422680"
  },
  {
    "text": "users to talk about things to tell you what they want in a way that actually makes sense for the",
    "start": "422680",
    "end": "428840"
  },
  {
    "text": "users those of you who know me or have heard me talking at pretty much any of",
    "start": "428840",
    "end": "433960"
  },
  {
    "text": "these over the last six years will recognize that this is a pretty common refrain for me sorry seven years it's",
    "start": "433960",
    "end": "441400"
  },
  {
    "text": "2024 yeah I can I can do math really this finally brings us to Gateway",
    "start": "441400",
    "end": "447879"
  },
  {
    "text": "API Gateway API originally was designed to deal with the Ingress problem in a",
    "start": "448520",
    "end": "453960"
  },
  {
    "text": "more graceful way than the old Ingress resource and things like that so it was designed to be the thing that sits in",
    "start": "453960",
    "end": "460879"
  },
  {
    "text": "between our users and our workloads mediates everything coming in from the cluster does everything safely all this",
    "start": "460879",
    "end": "467560"
  },
  {
    "text": "good stuff um the point of it really is that the core of Gateway API is independent",
    "start": "467560",
    "end": "475120"
  },
  {
    "text": "of the infrastructure you run it on so in much the same way that you can learn how to use a deployment and a kubernetes",
    "start": "475120",
    "end": "481720"
  },
  {
    "text": "service and things like that and then if you switch from using I don't know k3d to running it on Google or Amazon or",
    "start": "481720",
    "end": "488759"
  },
  {
    "text": "your favorite cloud provider of choice you should not then have to relearn how deployments",
    "start": "488759",
    "end": "494080"
  },
  {
    "text": "work same deal once you learn how to use Gateway API for Ingress you really should not need to go and learn lots of",
    "start": "494080",
    "end": "501240"
  },
  {
    "text": "stuff if you have to change the infrastructure underneath that's the promise uh those of you who use Gateway",
    "start": "501240",
    "end": "506639"
  },
  {
    "text": "API we would welcome feedback on how well we are delivering on that",
    "start": "506639",
    "end": "512360"
  },
  {
    "text": "promise Gateway API works by defining a bunch of resources that you then use to",
    "start": "513320",
    "end": "518399"
  },
  {
    "text": "configure all of these things in your system so there's a Gateway resource that you use to configure the thing",
    "start": "518399",
    "end": "523719"
  },
  {
    "text": "right at the edge of the cluster Gateway API purists in the room",
    "start": "523719",
    "end": "529279"
  },
  {
    "text": "yes I recognize that gateways do not have to be at the edge of the cluster doing Ingress but that is how they are",
    "start": "529279",
    "end": "535519"
  },
  {
    "text": "most often used and we'll come back to that in a little bit um there are also a bunch of Route",
    "start": "535519",
    "end": "542320"
  },
  {
    "text": "resources like HTTP routes and grpc routes and TCP routes and TLS routes and I think there's a UDP route um these",
    "start": "542320",
    "end": "549800"
  },
  {
    "text": "things configure how traffic is routed just between different points in",
    "start": "549800",
    "end": "554920"
  },
  {
    "text": "the cluster if you're looking at this for Ingress then here's a sample simple HTTP",
    "start": "554920",
    "end": "561839"
  },
  {
    "text": "route for Ingress that basically says any HTTP traffic that shows up at the",
    "start": "561839",
    "end": "568760"
  },
  {
    "text": "Gateway named faces Gateway if its host name is smiley. example.com or more specifically if the thing in the host",
    "start": "568760",
    "end": "574959"
  },
  {
    "text": "header is smiley. example.com please route that to the kubernetes service named Smiley use it Port 80 and since I",
    "start": "574959",
    "end": "582880"
  },
  {
    "text": "have not said anything about name spaces in that back end ref that will be using or in the parent ref that requires a",
    "start": "582880",
    "end": "589240"
  },
  {
    "text": "Gateway in the faces Nam space and it requires the service Smiley in the faces namespace this is a simple route",
    "start": "589240",
    "end": "598360"
  },
  {
    "text": "come on phone there we go um yeah I got ahead of",
    "start": "603640",
    "end": "608720"
  },
  {
    "text": "myself sorry about that htb traffic arriving at this Gateway with this host name goes to this service and uh this is",
    "start": "608720",
    "end": "616000"
  },
  {
    "text": "the problem with using your phone as your keynote remote and then accidentally having it flip over to the camera not that that ever happens um we",
    "start": "616000",
    "end": "623920"
  },
  {
    "text": "can get more complex about this right so we can do things like add a second backend ref in which case traffic will",
    "start": "623920",
    "end": "630640"
  },
  {
    "text": "be split across these two Services the service called Smiley and the service called Smiley 2 um we can add a matches thing so that",
    "start": "630640",
    "end": "639480"
  },
  {
    "text": "we require a path as well as just a host host name we can do lots and lots of things with this and most of these",
    "start": "639480",
    "end": "646920"
  },
  {
    "text": "things we can also do for grpc um things get tailored a little bit",
    "start": "646920",
    "end": "652160"
  },
  {
    "text": "differently it doesn't make as much sense to do path matching for grpc so instead we match on the grpc service and",
    "start": "652160",
    "end": "658120"
  },
  {
    "text": "Method and it's a lot better all",
    "start": "658120",
    "end": "663920"
  },
  {
    "text": "right the concepts that I was just talking about of routing around HTTP traffic or routing around grpc traffic",
    "start": "664880",
    "end": "671560"
  },
  {
    "text": "there's no particular reason those should be limited to Ingress traffic the same Concepts work just as well if",
    "start": "671560",
    "end": "677120"
  },
  {
    "text": "you're talking about traffic between the workloads in your cluster and you're using a service mesh to do routing and",
    "start": "677120",
    "end": "683120"
  },
  {
    "text": "in fact the same resources even make sense because you're solving the same problem ultimately",
    "start": "683120",
    "end": "690000"
  },
  {
    "text": "the difference here here is not what the request is or what it looks like the",
    "start": "690000",
    "end": "695639"
  },
  {
    "text": "difference is where the request arrives so in the mesh what you do is",
    "start": "695639",
    "end": "702399"
  },
  {
    "text": "you use a parent ref of a service rather than a parent ref of a Gateway and this is saying any HTTP thing that shows up",
    "start": "702399",
    "end": "710560"
  },
  {
    "text": "at the kubernetes service named smiley on Port 80 should get routed over to the",
    "start": "710560",
    "end": "716959"
  },
  {
    "text": "thing on smiley on Port 80 this is a very self referential route but this is",
    "start": "716959",
    "end": "722440"
  },
  {
    "text": "okay you can go ahead and get more complex with that um it's also worth pointing out here that the mesh may or",
    "start": "722440",
    "end": "728440"
  },
  {
    "text": "may not support everything your English controller does I don't know of any service meshes that support cores for",
    "start": "728440",
    "end": "734440"
  },
  {
    "text": "example I'm not actually sure what that would mean which is probably why none of us do",
    "start": "734440",
    "end": "740639"
  },
  {
    "text": "it so we have these things called routes which people tend to think of as",
    "start": "740639",
    "end": "746120"
  },
  {
    "text": "defining the way routing happens but it's interesting that they also end up defining classes of traffic so if you",
    "start": "746120",
    "end": "752560"
  },
  {
    "text": "are looking at this the parent ref actually tells you what kind of traffic it is and correspondingly to deal with a",
    "start": "752560",
    "end": "759000"
  },
  {
    "text": "particular kind of traffic you have to use the right kind of parent ref so if",
    "start": "759000",
    "end": "764240"
  },
  {
    "text": "you are doing Engish traffic the parent ref must be a Gateway I said we would come back to",
    "start": "764240",
    "end": "770279"
  },
  {
    "text": "this point about gateways are not always about Ingress gateways are always about Crossing administrative domains and so",
    "start": "770279",
    "end": "776760"
  },
  {
    "text": "you are always talking about Ingress into to a particular administrative domain of which the cluster is the most",
    "start": "776760",
    "end": "783519"
  },
  {
    "text": "common if you are doing mesh traffic the parent ref must be a service it cannot",
    "start": "783519",
    "end": "789680"
  },
  {
    "text": "be a Gateway okay great uh what about egis",
    "start": "789680",
    "end": "795440"
  },
  {
    "text": "traffic presumably we need to have a parent ref that makes sense for egis um",
    "start": "795440",
    "end": "801560"
  },
  {
    "text": "we can't use a Gateway because gateways are talking about rendevu points within a cluster",
    "start": "801560",
    "end": "807720"
  },
  {
    "text": "and egress traffic by definition is leaving the cluster we can't use a service for much the same reason I mean",
    "start": "807720",
    "end": "814160"
  },
  {
    "text": "there is such a thing as an external name service but you cannot possibly do an entire internet worth of external name services so let's not try that um",
    "start": "814160",
    "end": "823199"
  },
  {
    "text": "really we need something new and the thing we came up with for Linker is called an egis Network which has a pretty specific",
    "start": "823199",
    "end": "829440"
  },
  {
    "text": "definition it's talking about a class of traffic that is leaving the mesh for a destination that matches a particular",
    "start": "829440",
    "end": "835399"
  },
  {
    "text": "cider that phrase leaving the mesh is particularly important here if you're using Linker multicluster traffic",
    "start": "835399",
    "end": "841959"
  },
  {
    "text": "between your two clusters is not egress traffic because it's still within your mesh same thing applies if you're using",
    "start": "841959",
    "end": "847959"
  },
  {
    "text": "Linker to do external workloads not Eis traffic because you you are staying",
    "start": "847959",
    "end": "853680"
  },
  {
    "text": "within the same mesh egis networks themselves are pretty",
    "start": "853680",
    "end": "861480"
  },
  {
    "text": "simple um this one just says don't allow any eag",
    "start": "861480",
    "end": "867480"
  },
  {
    "text": "traffic which probably not the way you start first but it's a a reasonable sort of thing to do um note that the API",
    "start": "867480",
    "end": "876279"
  },
  {
    "text": "Group up there does not say gateway. networking. kat. this is not a Gateway API resource this is a linery resource",
    "start": "876279",
    "end": "884440"
  },
  {
    "text": "um oops here's one that blocks traffic to a specific Network bonus points to",
    "start": "884440",
    "end": "890079"
  },
  {
    "text": "anyone who walks up to me afterwards and tell me tells me what is wrong with this slide um also note that the egress",
    "start": "890079",
    "end": "898440"
  },
  {
    "text": "networks I've been showing you are in the namespace Linker egress this is a special magic namespace you can change",
    "start": "898440",
    "end": "904320"
  },
  {
    "text": "its name but it's the default egress namespace if you see egress traffic",
    "start": "904320",
    "end": "910639"
  },
  {
    "text": "coming from a namespace that does not itself contain an egress Network Linker",
    "start": "910639",
    "end": "916079"
  },
  {
    "text": "will look to the egress networks in Linker erress because otherwise it's really",
    "start": "916079",
    "end": "922440"
  },
  {
    "text": "really hard to do something like hey no egress traffic in this entire cluster is allowed except for the exception that we",
    "start": "922440",
    "end": "930480"
  },
  {
    "text": "do now we get to use egis Network as a paragraph so that we can talk about egis",
    "start": "930480",
    "end": "937360"
  },
  {
    "text": "traffic and in this case in this case why in the world",
    "start": "937360",
    "end": "942480"
  },
  {
    "text": "should I Circle the host name first this is an hdtb route basically saying anything going to smiley. example.com",
    "start": "942480",
    "end": "949399"
  },
  {
    "text": "that is also egress traffic is going to be allowed by this route egress traffics",
    "start": "949399",
    "end": "957079"
  },
  {
    "text": "sorry egress networks Define actually I should phrase that differently pretty much everything in",
    "start": "957079",
    "end": "963279"
  },
  {
    "text": "lingery works by you deny things and then you allow the traffic through that you want we don't really do things like",
    "start": "963279",
    "end": "970920"
  },
  {
    "text": "oh we have a global allow and then you have specific exceptions to deny that",
    "start": "970920",
    "end": "976279"
  },
  {
    "text": "ends up being really hard so instead we do Global denies and then you or get to",
    "start": "976279",
    "end": "981759"
  },
  {
    "text": "be explicit about what you allow so this is saying that because the parent ref is all eager traffic this is saying yeah",
    "start": "981759",
    "end": "989839"
  },
  {
    "text": "block everything because that's the last thing we said in the eages network and then we're going to specifically allow",
    "start": "989839",
    "end": "995759"
  },
  {
    "text": "HTTP traffic to smiley. example.com um note that the parent ref has to",
    "start": "995759",
    "end": "1003199"
  },
  {
    "text": "specify a group now because the default is gateway. nk. Kates doio um also noted",
    "start": "1003199",
    "end": "1009560"
  },
  {
    "text": "that we are specifying a port routes with parent refs of egis networks must",
    "start": "1009560",
    "end": "1015880"
  },
  {
    "text": "specify the port because you gener do not want to do things like HTTP traffic",
    "start": "1015880",
    "end": "1022720"
  },
  {
    "text": "on any port that happens to mention a particular host name is okay that's kind of",
    "start": "1022720",
    "end": "1028760"
  },
  {
    "text": "silly and you can do much more complex things with this right matches work and we'll get to some of the other stuff in",
    "start": "1028760",
    "end": "1034240"
  },
  {
    "text": "a bit uh you can do a backend D in particular to funnel all of this stuff",
    "start": "1034240",
    "end": "1041839"
  },
  {
    "text": "into an egis controller if you don't have a backend R then the traffic just flows out as",
    "start": "1041839",
    "end": "1048319"
  },
  {
    "text": "normal it if you do have a backend D it gets taken there so that the egis controller can decide what to do with it",
    "start": "1048319",
    "end": "1054080"
  },
  {
    "text": "you might want to be careful to allow your egis controller to speak outwards or bad things",
    "start": "1054080",
    "end": "1059160"
  },
  {
    "text": "happen not that I know that from personal experience um all of the route types work here so",
    "start": "1059160",
    "end": "1067080"
  },
  {
    "text": "you can do this with HTTP router GPC grpc router TCP route and TLS route",
    "start": "1067080",
    "end": "1072120"
  },
  {
    "text": "actually although we're not going to show that today um and uh that brings us to to a brief",
    "start": "1072120",
    "end": "1079799"
  },
  {
    "text": "discussion of what the demo is going to look like before we see if the demo works I mean before we look at the demo",
    "start": "1079799",
    "end": "1085039"
  },
  {
    "text": "because of course it'll work right um the demo architecture we have an application called",
    "start": "1085039",
    "end": "1090480"
  },
  {
    "text": "faces that's what it often looks like we will see it looking better than that but faces was mostly designed to allow you",
    "start": "1090480",
    "end": "1097960"
  },
  {
    "text": "to experiment with reliability mechanisms with a really terrible application um phases was also designed",
    "start": "1097960",
    "end": "1104559"
  },
  {
    "text": "to show off just how badly things can go wrong even in a very simple microservices application we start with",
    "start": "1104559",
    "end": "1111400"
  },
  {
    "text": "the cluster we have a web browser running the guey uh we the each of those",
    "start": "1111400",
    "end": "1116760"
  },
  {
    "text": "cells in the guey is rep the guy is making a call to the face workload the face workload in the cluster calls the",
    "start": "1116760",
    "end": "1124320"
  },
  {
    "text": "smiley workload which call Aden calls the color workload Smiley is supposed to return that grinning smiley face color",
    "start": "1124320",
    "end": "1130679"
  },
  {
    "text": "is supposed to return the color blue the face workload puts the two of them together so that the gooey knows what to",
    "start": "1130679",
    "end": "1137120"
  },
  {
    "text": "show it is a very simple application and it is absolutely remarkable how many",
    "start": "1137120",
    "end": "1142799"
  },
  {
    "text": "different failure modes it has um we have some other things running",
    "start": "1142799",
    "end": "1147919"
  },
  {
    "text": "the cluster as well and evidently we have a duplicate",
    "start": "1147919",
    "end": "1155200"
  },
  {
    "text": "slide here wow don't try this at home",
    "start": "1155200",
    "end": "1161279"
  },
  {
    "text": "kids it's always fun seeing where your demos just or seeing where your slide",
    "start": "1164880",
    "end": "1169960"
  },
  {
    "text": "decks end up with things that are not supposed to be",
    "start": "1169960",
    "end": "1174360"
  },
  {
    "text": "there okay that's supposed to be there because we are in fact running we're going to be using Envoy",
    "start": "1175159",
    "end": "1181600"
  },
  {
    "text": "Gateway as the Gateway controller providing Ingress access and then we've got Linker D for the mesh everywhere and",
    "start": "1181600",
    "end": "1188240"
  },
  {
    "text": "so that is correct and uh yeah that was kind of",
    "start": "1188240",
    "end": "1193799"
  },
  {
    "text": "fascinating all right let's see what happens",
    "start": "1193799",
    "end": "1200200"
  },
  {
    "text": "so I've actually already set up my cluster here with all of the relevant things",
    "start": "1212400",
    "end": "1219360"
  },
  {
    "text": "running it so we have the envoy Gateway system",
    "start": "1219360",
    "end": "1224520"
  },
  {
    "text": "here we've got linkerd and we can make sure that Linker is running okay this is not installing Licor d right now this is",
    "start": "1224520",
    "end": "1231240"
  },
  {
    "text": "just running the check to make sure that everything is okay um please ignore all of the proxies not running the current",
    "start": "1231240",
    "end": "1238120"
  },
  {
    "text": "version I'm running a version from whopping like two weeks ago maybe but",
    "start": "1238120",
    "end": "1244120"
  },
  {
    "text": "we've done two releases since then so yeah um we can also see that we have a Gateway set up for Envoy Gateway which",
    "start": "1244120",
    "end": "1250280"
  },
  {
    "text": "is great um we're running on k3d so I'm just going to use local hosts to go and",
    "start": "1250280",
    "end": "1256320"
  },
  {
    "text": "talk to this uh and if I do",
    "start": "1256320",
    "end": "1261720"
  },
  {
    "text": "that I get nothing which would be alarming except for the fact that I haven't created any",
    "start": "1261720",
    "end": "1267520"
  },
  {
    "text": "HTTP routes yet so this is the HTTP route I'm actually using for the call",
    "start": "1267520",
    "end": "1273679"
  },
  {
    "text": "going to face I'm not going to show you the one for the guey because it looks exactly the same with face change to",
    "start": "1273679",
    "end": "1278720"
  },
  {
    "text": "goey in some strategic places um this is saying anything that arrives at the",
    "start": "1278720",
    "end": "1285520"
  },
  {
    "text": "Gateway whose name is ingress if it matches slashface at the beginning of",
    "start": "1285520",
    "end": "1290799"
  },
  {
    "text": "the path rewrite that chunk of path to a slash and then send it to the face",
    "start": "1290799",
    "end": "1296360"
  },
  {
    "text": "service on Port 80 and then there's this basically identical one that says when",
    "start": "1296360",
    "end": "1301880"
  },
  {
    "text": "you see a path starting with guey go to the faces gooey workload so if we do",
    "start": "1301880",
    "end": "1310360"
  },
  {
    "text": "that and we apply the face route as well and I come over here and reload this",
    "start": "1310360",
    "end": "1315840"
  },
  {
    "text": "window I have a running application well and good",
    "start": "1315840",
    "end": "1322080"
  },
  {
    "text": "okay",
    "start": "1322080",
    "end": "1325080"
  },
  {
    "text": "now um we're going to go",
    "start": "1327279",
    "end": "1332480"
  },
  {
    "text": "through and Skip mesh routing for a little bit and Skip straight to egis um I've actually cheated a little",
    "start": "1332480",
    "end": "1339919"
  },
  {
    "text": "bit in the way I talked about the demo",
    "start": "1339919",
    "end": "1346360"
  },
  {
    "text": "architecture um if we look at the pods if you look carefully you'll see that there is a",
    "start": "1346360",
    "end": "1351760"
  },
  {
    "text": "face pod and there is only color two and color three and Smiley 2 and smiley 3",
    "start": "1351760",
    "end": "1358720"
  },
  {
    "text": "because the way I've actually set this up Smiley and color are not running in this cluster at all they this is all",
    "start": "1358720",
    "end": "1364559"
  },
  {
    "text": "running in a k3d cluster Smiley and color are running in separate Docker",
    "start": "1364559",
    "end": "1369679"
  },
  {
    "text": "containers on the same Docker Network so all of the traffic from the face workload to Smiley and color is egress",
    "start": "1369679",
    "end": "1376760"
  },
  {
    "text": "traffic and if we look at this right now and we",
    "start": "1376760",
    "end": "1382720"
  },
  {
    "text": "try to get linker's proxy metrics there is nothing the reason for this the reason",
    "start": "1382720",
    "end": "1389919"
  },
  {
    "text": "that there is nothing is that we don't have any igis networks to find we have not told Linker to start paying",
    "start": "1389919",
    "end": "1395400"
  },
  {
    "text": "attention to this kind of traffic yet so we can fix that uh this is creating our",
    "start": "1395400",
    "end": "1400799"
  },
  {
    "text": "Linker Eris namespace which I mentioned before this one creates an egress",
    "start": "1400799",
    "end": "1405919"
  },
  {
    "text": "Network called all egress EXP itly setting the traffic policy to allow so",
    "start": "1405919",
    "end": "1412000"
  },
  {
    "text": "that the only thing we're going to do here is Monitor we're not going to actually stop anything if I apply that",
    "start": "1412000",
    "end": "1417679"
  },
  {
    "text": "nothing happens with my application I didn't wait long enough before doing",
    "start": "1417679",
    "end": "1425080"
  },
  {
    "text": "that you remember what I was talking about uh praying to the demogo I don't know might be bad",
    "start": "1429400",
    "end": "1439080"
  },
  {
    "text": "okay better at least slightly better all right we've got some metrics",
    "start": "1439120",
    "end": "1445880"
  },
  {
    "text": "there going on there let's switch that to denying",
    "start": "1445880",
    "end": "1452159"
  },
  {
    "text": "everything",
    "start": "1452159",
    "end": "1454679"
  },
  {
    "text": "instead all right y'all didn't pray hard enough to",
    "start": "1462400",
    "end": "1467640"
  },
  {
    "text": "demog goddess this let's figure out how I broke everything",
    "start": "1467640",
    "end": "1473720"
  },
  {
    "text": "here shall",
    "start": "1473720",
    "end": "1476278"
  },
  {
    "text": "we we do have do we have the right things doing",
    "start": "1481720",
    "end": "1489120"
  },
  {
    "text": "that yes we do have the right things doing that that's",
    "start": "1489120",
    "end": "1495320"
  },
  {
    "text": "good for",
    "start": "1497320",
    "end": "1501360"
  },
  {
    "text": "you know I am not going to lie I have never had this demo fail in this way before right",
    "start": "1529080",
    "end": "1535000"
  },
  {
    "text": "now that's awesome for some value of awesome that isn't very awesome",
    "start": "1535000",
    "end": "1543039"
  },
  {
    "text": "um all right let's check one other thing here NOP Linker is running faces is",
    "start": "1543039",
    "end": "1550240"
  },
  {
    "text": "meshed",
    "start": "1550240",
    "end": "1553240"
  },
  {
    "text": "I think I know what's going on",
    "start": "1566760",
    "end": "1570120"
  },
  {
    "text": "here",
    "start": "1575600",
    "end": "1578600"
  },
  {
    "text": "okay pay no attention to the man behind the or the man on stage switching to a newer version of",
    "start": "1581720",
    "end": "1587760"
  },
  {
    "text": "linker",
    "start": "1587760",
    "end": "1590240"
  },
  {
    "text": "wow",
    "start": "1593240",
    "end": "1595919"
  },
  {
    "text": "okay all right so this will be kind of fun both in the sense that nobody is supposed to actually see",
    "start": "1598720",
    "end": "1605640"
  },
  {
    "text": "this part from stage but also because I'm slightly trusting the network to do",
    "start": "1605640",
    "end": "1611480"
  },
  {
    "text": "good things here um there was a point where linker's Edge",
    "start": "1611480",
    "end": "1619000"
  },
  {
    "text": "releases supported the stuff that I'm trying to show but they did not support the global egress default",
    "start": "1619000",
    "end": "1626840"
  },
  {
    "text": "namespace earlier today in fact just a couple hours ago I did a demo uh the I",
    "start": "1626840",
    "end": "1633840"
  },
  {
    "text": "did a workshop rather uh on configuring meshes with Gateway API and some of you",
    "start": "1633840",
    "end": "1639399"
  },
  {
    "text": "may have been there uh that demo I believe downloaded",
    "start": "1639399",
    "end": "1646320"
  },
  {
    "text": "the older version of lingery and switched to it and this demo is not",
    "start": "1646320",
    "end": "1651960"
  },
  {
    "text": "written to be paranoid about switching to the right version of linerty so I think that's what's going on here and uh",
    "start": "1651960",
    "end": "1661080"
  },
  {
    "text": "yeah this is going to be uh this is going to be fun or something like",
    "start": "1661080",
    "end": "1667080"
  },
  {
    "text": "that okay there's Linker being installed here's lingery",
    "start": "1670200",
    "end": "1675240"
  },
  {
    "text": "actually getting running whoops",
    "start": "1675240",
    "end": "1680120"
  },
  {
    "text": "while that is running since we are kind of slightly off the reservation",
    "start": "1683519",
    "end": "1691279"
  },
  {
    "text": "here one of the things that's really fun about doing this with uh normally when I",
    "start": "1691279",
    "end": "1698279"
  },
  {
    "text": "do this at cucon I've carefully gone through and made sure that all the images I need are loaded into k3d so I",
    "start": "1698279",
    "end": "1704120"
  },
  {
    "text": "don't have to go download the images on conference Wi-Fi and uh okay so far so good it's pulling some",
    "start": "1704120",
    "end": "1711399"
  },
  {
    "text": "images and it's actually working and in the process you're also getting a demo of how quickly you can",
    "start": "1711399",
    "end": "1717080"
  },
  {
    "text": "install linkerd and completely blow away a cluster and restart",
    "start": "1717080",
    "end": "1722240"
  },
  {
    "text": "it this was not on the agenda but hey why not let's do it",
    "start": "1722320",
    "end": "1729080"
  },
  {
    "text": "you okay that worked good I feel much better about",
    "start": "1736399",
    "end": "1743840"
  },
  {
    "text": "that all",
    "start": "1752600",
    "end": "1755799"
  },
  {
    "text": "right now I going to skip a bunch of things here CU we've already done them",
    "start": "1758440",
    "end": "1765000"
  },
  {
    "text": "but we really do need these routes okay okay oh man I should asked somebody to",
    "start": "1765000",
    "end": "1771640"
  },
  {
    "text": "time that all right let's do that let's wait",
    "start": "1771640",
    "end": "1779399"
  },
  {
    "text": "a couple of seconds",
    "start": "1779399",
    "end": "1782320"
  },
  {
    "text": "here all right I feel much better now so yeah the",
    "start": "1785640",
    "end": "1791159"
  },
  {
    "text": "first time we ran this before we had an egress at all we saw no metrics at all",
    "start": "1791159",
    "end": "1797279"
  },
  {
    "text": "and we come back here here and we can see some really painful to read things that demonstrate that oh hey look an",
    "start": "1797279",
    "end": "1804039"
  },
  {
    "text": "egis network is involved oh hey look this is the name of the egis Network that's involved and",
    "start": "1804039",
    "end": "1811279"
  },
  {
    "text": "things like that so this is really terrible to read instead I shall run my horrible",
    "start": "1811279",
    "end": "1819360"
  },
  {
    "text": "Python program down here that is parsing this stuff and you",
    "start": "1819360",
    "end": "1824559"
  },
  {
    "text": "know just showing some metrics if you were doing this for real you would do this with Prometheus and grafana and",
    "start": "1824559",
    "end": "1831080"
  },
  {
    "text": "actual tools for monitoring I'm frankly showing off here by demonstrating that",
    "start": "1831080",
    "end": "1836360"
  },
  {
    "text": "you can actually do this in a command line format using a python script if you're sufficiently masochistic I mean",
    "start": "1836360",
    "end": "1844320"
  },
  {
    "text": "clever um all right now we're going to switch this to",
    "start": "1844320",
    "end": "1849799"
  },
  {
    "text": "deny everybody cross your fingers again that's what we're supposed to see",
    "start": "1849799",
    "end": "1856919"
  },
  {
    "text": "okay so at this point the guey can talk to the face workload face is trying to talk to Smiley and color but that is",
    "start": "1856919",
    "end": "1863120"
  },
  {
    "text": "egis traffic and we have just explicitly told it not to allow that so it's not going to allow",
    "start": "1863120",
    "end": "1869519"
  },
  {
    "text": "that um face talks to Smiley using HTTP I'm going to rush a little bit on some",
    "start": "1869519",
    "end": "1875360"
  },
  {
    "text": "of this because we're actually running out of time from recovering from the things not working um if I go through",
    "start": "1875360",
    "end": "1883080"
  },
  {
    "text": "and do that then I have told it hey egress traffic with a host name of",
    "start": "1883080",
    "end": "1888279"
  },
  {
    "text": "smiley is okay I can do the same thing with grpc just for you know variant uh just for",
    "start": "1888279",
    "end": "1896840"
  },
  {
    "text": "variety uh instead of doing a host name thing I'm doing here saying any grpc that has the service of color service",
    "start": "1896840",
    "end": "1904039"
  },
  {
    "text": "should be allowed that is happy that's good let's see what else here uh there's",
    "start": "1904039",
    "end": "1911159"
  },
  {
    "text": "a lot of stuff we could do that I'm not really going to go down the rabbit hole on but one of them is for example we can",
    "start": "1911159",
    "end": "1916399"
  },
  {
    "text": "put in this path match right and in the grpc world we can add",
    "start": "1916399",
    "end": "1922760"
  },
  {
    "text": "the method match and if I do this these cells in the center show up with a path",
    "start": "1922760",
    "end": "1928159"
  },
  {
    "text": "of SL Center and are using the grpc method Center and these ones around the edge say Edge so if I apply this one",
    "start": "1928159",
    "end": "1937039"
  },
  {
    "text": "then the edges should be okay and we should get gray cursing faces in the center because that traffic is no longer",
    "start": "1937039",
    "end": "1943480"
  },
  {
    "text": "allowed so now another entertaining thing we can do here",
    "start": "1943480",
    "end": "1949840"
  },
  {
    "text": "is um we can go through and force all of that stuff through an egis controller",
    "start": "1950200",
    "end": "1955559"
  },
  {
    "text": "I'm going to abuse Envoy Gateway again it's an egis controller I'm going to abuse it and make it an egis controller",
    "start": "1955559",
    "end": "1962279"
  },
  {
    "text": "this is also set up already notice",
    "start": "1962279",
    "end": "1967799"
  },
  {
    "text": "that the address there is different this service is not a load balancer service",
    "start": "1967799",
    "end": "1973960"
  },
  {
    "text": "it's just a cluster IP there is no way to reach this en void Gateway from outside the cluster because we don't",
    "start": "1973960",
    "end": "1979919"
  },
  {
    "text": "want it to be an Ingress controller so if we force the center cells through that by adding back in",
    "start": "1979919",
    "end": "1987440"
  },
  {
    "text": "actually this is a new route sorry creating a new route still an egis parent now we've got a Center PATH",
    "start": "1987440",
    "end": "1993240"
  },
  {
    "text": "prefix and we're going to force it through our Envoy Gateway as an egis controller if I do",
    "start": "1993240",
    "end": "2000399"
  },
  {
    "text": "that then nothing happens um oh I'm sorry I forgot to go through and show",
    "start": "2000399",
    "end": "2006960"
  },
  {
    "text": "the grpc version of that which was in the same file I promise you it's there um this doesn't work because I didn't",
    "start": "2006960",
    "end": "2013440"
  },
  {
    "text": "create any egis routes for my egis controller so it's getting to Envoy Gateway and Envoy Gateway is coming",
    "start": "2013440",
    "end": "2020080"
  },
  {
    "text": "through and saying 404 on some of those and permission denied on some of those",
    "start": "2020080",
    "end": "2026039"
  },
  {
    "text": "because we're routing it into the E controller and it's failing so oh yeah I'm also uh I also do have to",
    "start": "2026039",
    "end": "2034279"
  },
  {
    "text": "confess that smiley 2 and color 2 are running in my cluster I'm just kind of pretending they're outside you can use",
    "start": "2034279",
    "end": "2040639"
  },
  {
    "text": "Envoy gateway to route to things outside the cluster uh it takes a little extra work and I didn't want to do",
    "start": "2040639",
    "end": "2047320"
  },
  {
    "text": "it but this is an Envoy Gateway route that's basically saying okay so anything",
    "start": "2047320",
    "end": "2052878"
  },
  {
    "text": "going to the smiley host name if it shows up at my egress Gateway not my",
    "start": "2052879",
    "end": "2058760"
  },
  {
    "text": "egress Network then anything with the right path just send it over to Smiley 2 same",
    "start": "2058760",
    "end": "2065839"
  },
  {
    "text": "thing with color 2 on the grpc side and if I apply that then we get",
    "start": "2065839",
    "end": "2071320"
  },
  {
    "text": "hard-eyed smileys on green backgrounds in the center by routing them through an Eris",
    "start": "2071320",
    "end": "2077280"
  },
  {
    "text": "controller I'm going to do one more thing really quickly and then go over to qu or some gotas and then questions",
    "start": "2077280",
    "end": "2083480"
  },
  {
    "text": "which is I also have a thing in here called face two and face",
    "start": "2083480",
    "end": "2091560"
  },
  {
    "text": "two bypasses smiley and color entirely and goes straight to Smiley 3 and color",
    "start": "2091679",
    "end": "2097200"
  },
  {
    "text": "3 so when I do this none of my traffic will be egress and everything we've just done",
    "start": "2097200",
    "end": "2104839"
  },
  {
    "text": "should be completely irrelevant so when I do this I've just said anything going to my face",
    "start": "2104839",
    "end": "2113280"
  },
  {
    "text": "service which is the request coming from the guey in the first place route them directly over to phe two using linkerd",
    "start": "2113280",
    "end": "2121240"
  },
  {
    "text": "because mesh routing is the only piece of my original diagram I haven't shown yet and if I do that then we get rolling",
    "start": "2121240",
    "end": "2127960"
  },
  {
    "text": "eyed faces on blue backgrounds and if you watch in this lower window you're going to see all my egis metrics fall to",
    "start": "2127960",
    "end": "2134800"
  },
  {
    "text": "zero because there is no more egis happening it's actually going to take a",
    "start": "2134800",
    "end": "2141480"
  },
  {
    "text": "little bit for it to update but this is showing we used HTTP",
    "start": "2141480",
    "end": "2148200"
  },
  {
    "text": "routes to configure the Ingress routes from our Ingress Envoy Gateway into the",
    "start": "2148200",
    "end": "2153359"
  },
  {
    "text": "faces application we used Gateway API to configure figure egress",
    "start": "2153359",
    "end": "2160440"
  },
  {
    "text": "policy also using linker's egress Network resource and this last bit is we",
    "start": "2160440",
    "end": "2166079"
  },
  {
    "text": "use Gateway API to configure routing within linkerd entirely ignoring the whole egis thing entirely so we actually",
    "start": "2166079",
    "end": "2173280"
  },
  {
    "text": "have been able to use one gate API to do the entire thing that we wanted to do in the",
    "start": "2173280",
    "end": "2179520"
  },
  {
    "text": "beginning there we finally go back to zero and on that note",
    "start": "2180200",
    "end": "2187760"
  },
  {
    "text": "one IPI um sorry gotas right let's talk about",
    "start": "2187760",
    "end": "2193280"
  },
  {
    "text": "gotas I keep deleting that slide it keeps coming back um if you don't list a cider for an egis",
    "start": "2193280",
    "end": "2200800"
  },
  {
    "text": "Network it defaults to everything except the cluster networks that you provided as a parameter when you set up linkerd",
    "start": "2200800",
    "end": "2207440"
  },
  {
    "text": "if you don't set up that parameter it defaults to all the RFC 19 19 N 1918",
    "start": "2207440",
    "end": "2213599"
  },
  {
    "text": "networks the point of cluster networks is to tell Linker the these are the networks that are a part of the cluster",
    "start": "2213599",
    "end": "2219760"
  },
  {
    "text": "and everything else is not um since cluster networks defaults",
    "start": "2219760",
    "end": "2227079"
  },
  {
    "text": "to the union of all the RFC 1918 addresses if you are trying to use ipv4",
    "start": "2227079",
    "end": "2232680"
  },
  {
    "text": "egress you are almost certainly going to have to override that when you set up linkerd in the first place we recommend",
    "start": "2232680",
    "end": "2239599"
  },
  {
    "text": "that you make cluster networks the union of the Pod Sider no cider and service cider for all of your clusters in your",
    "start": "2239599",
    "end": "2245400"
  },
  {
    "text": "multicluster setup uh I mean if you're using multicluster otherwise it's just your one",
    "start": "2245400",
    "end": "2253040"
  },
  {
    "text": "cluster um any route that has an Eris Network as a parent ref must specify a",
    "start": "2253200",
    "end": "2259119"
  },
  {
    "text": "port the port is optional in Gateway API but it is not optional for this application because again you really are",
    "start": "2259119",
    "end": "2266200"
  },
  {
    "text": "not trying to say HTTP on any port is okay um also I mentioned the global",
    "start": "2266200",
    "end": "2273280"
  },
  {
    "text": "default egress namespace any egress in your Loc namespace will completely override the",
    "start": "2273280",
    "end": "2280000"
  },
  {
    "text": "global stuff it is not an overlay it's not a composite it just replaces",
    "start": "2280000",
    "end": "2286160"
  },
  {
    "text": "it it's much easier to reason about that way but it's occasionally a",
    "start": "2286160",
    "end": "2291838"
  },
  {
    "text": "gotcha um also TCP route and TLS route are required by Gateway API to",
    "start": "2292319",
    "end": "2300400"
  },
  {
    "text": "have at least one back indr because for Ingress and for service mesh we can kind",
    "start": "2300400",
    "end": "2307960"
  },
  {
    "text": "of make some reasonable assumptions about defaults that just doesn't hold for TCP route and TLS route um so in",
    "start": "2307960",
    "end": "2314480"
  },
  {
    "text": "Linker you can use the egris network as the parent ref or sorry as the backend ref and you will likely want to do that",
    "start": "2314480",
    "end": "2321440"
  },
  {
    "text": "for an egis route if you do it has to be the same egis Network that's the parent",
    "start": "2321440",
    "end": "2327400"
  },
  {
    "text": "ref just FYI and that is it uh the QR code on the",
    "start": "2327400",
    "end": "2335839"
  },
  {
    "text": "left is an easy way to get to buyant Enterprise for Linker which we really hope you'll check out because it's",
    "start": "2335839",
    "end": "2341520"
  },
  {
    "text": "awesome and great and does good things and permits people like me to still have jobs uh the one on the right is the",
    "start": "2341520",
    "end": "2349160"
  },
  {
    "text": "Gateway API and user survey if you are using Gateway API we would love to hear",
    "start": "2349160",
    "end": "2355520"
  },
  {
    "text": "from you about that and uh while I don't really want to keep you here any later",
    "start": "2355520",
    "end": "2361119"
  },
  {
    "text": "than anybody wants to be if you have questions I can stick around thank you very much I appreciate it it's always",
    "start": "2361119",
    "end": "2367560"
  },
  {
    "text": "when the demog goddesses do not in fact smile upon us [Applause]",
    "start": "2367560",
    "end": "2374999"
  }
]