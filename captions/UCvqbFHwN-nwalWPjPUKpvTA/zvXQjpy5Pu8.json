[
  {
    "text": "all right so let's get started welcome everyone so it's already late afternoon",
    "start": "0",
    "end": "6720"
  },
  {
    "text": "I think you guys are all tired so before we get started just a quick poll how",
    "start": "6720",
    "end": "11910"
  },
  {
    "text": "many of you were here for some of the security talk yesterday and today cool",
    "start": "11910",
    "end": "17760"
  },
  {
    "text": "yeah all right so this talk gonna be a slightly different from the previous ones so instead of providing you another",
    "start": "17760",
    "end": "24779"
  },
  {
    "text": "open-source tool we're gonna present how at their breaks we connect the dot together and present a holistic security",
    "start": "24779",
    "end": "32340"
  },
  {
    "text": "solution that works for our company and hopefully also work for your company as well this is my colleague Eric and my",
    "start": "32340",
    "end": "40260"
  },
  {
    "text": "name is ring we're both software engineer at that Rick's we work for a cloud platform team so our team's",
    "start": "40260",
    "end": "46230"
  },
  {
    "text": "responsibility is to provide the infrastructure services like the deployment monitoring or permission",
    "start": "46230",
    "end": "52199"
  },
  {
    "text": "credential control management system so our philosophy at that breaks to use",
    "start": "52199",
    "end": "57360"
  },
  {
    "text": "open source project manage our infrastructure so we do use a lot of those tools being discussed on this",
    "start": "57360",
    "end": "63510"
  },
  {
    "text": "conference like kubernetes from easiest basil and a lot of those hashing hub tools like terraform and vote so here's",
    "start": "63510",
    "end": "72600"
  },
  {
    "text": "our plan for today I'm gonna tell you a little bit about how what it breaks does",
    "start": "72600",
    "end": "78720"
  },
  {
    "text": "and what kind of service and tools we provide and we're gonna quickly run through some of our security concerns",
    "start": "78720",
    "end": "84900"
  },
  {
    "text": "and then I will try to dive in to one of those fundamental areas of our security",
    "start": "84900",
    "end": "90659"
  },
  {
    "text": "management systems so first what is data breaks because most of the time when I",
    "start": "90659",
    "end": "96659"
  },
  {
    "text": "talk to people the first impression they have is oh you're the creator of Apache spark yes",
    "start": "96659",
    "end": "102360"
  },
  {
    "text": "we are but because this is not spark summit we cannot going to talk anything about spark today and this is not to",
    "start": "102360",
    "end": "108240"
  },
  {
    "text": "talk about how we use communities as a cluster manager for spark instead we're gonna talk about our product which is",
    "start": "108240",
    "end": "115350"
  },
  {
    "text": "this oh by the way there is a very cool talk about how to use spark how to use kubernetes as the cluster manager about",
    "start": "115350",
    "end": "121979"
  },
  {
    "text": "spark on last spark summit so if you interested go check this out anyway so",
    "start": "121979",
    "end": "128910"
  },
  {
    "text": "we provide this unified analytics platform you may not know what that means so it's actually a product we call it",
    "start": "128910",
    "end": "135900"
  },
  {
    "text": "data breaks notebook so what the state book dated bricks notebook is is a SAS offering that on top of money multiple",
    "start": "135900",
    "end": "142890"
  },
  {
    "text": "cloud like it was and Azure and is provide better performance real-time collaboration as well as",
    "start": "142890",
    "end": "148560"
  },
  {
    "text": "enterprise-grade security around Apache spark making it more suitable for enterprise workload just give you a bit",
    "start": "148560",
    "end": "155430"
  },
  {
    "text": "taste of how a notebook looks like on the right side of this light so it's a browser-based workbench that can be used",
    "start": "155430",
    "end": "162269"
  },
  {
    "text": "by the distance scientists and data engineer to collaborate and create their data pipeline by writing Scala or Python",
    "start": "162269",
    "end": "169170"
  },
  {
    "text": "code or they can also run spark query to get it immediate result out of their data set and you can also run this built",
    "start": "169170",
    "end": "176340"
  },
  {
    "text": "for dashboard or on machine learning models or even deep learning models to finish their analytics workload alright",
    "start": "176340",
    "end": "183299"
  },
  {
    "text": "so beneath this beautiful UI is actually a very common SAS cross account setup",
    "start": "183299",
    "end": "189629"
  },
  {
    "text": "consider if you're one of our customer you may already have a 800s or as your",
    "start": "189629",
    "end": "194700"
  },
  {
    "text": "account where you have all the data store ian is like your data Lake data warehouse and you want use data breaks",
    "start": "194700",
    "end": "200340"
  },
  {
    "text": "product the notebook to launch a spark cluster and run your spark workload inside your customer environment and in",
    "start": "200340",
    "end": "207419"
  },
  {
    "text": "order to do that you actually talk to you one of our notebook service across the internet and make it connect to your",
    "start": "207419",
    "end": "215040"
  },
  {
    "text": "customer environment and manage a spark workload all right you may have two",
    "start": "215040",
    "end": "220799"
  },
  {
    "text": "observations here one is our control plan services are deployed to a data",
    "start": "220799",
    "end": "226199"
  },
  {
    "text": "breaks environment that running on kubernetes and on the other side as a",
    "start": "226199",
    "end": "231299"
  },
  {
    "text": "engineer or as a service principle like jenkins you occasionally need to access",
    "start": "231299",
    "end": "237329"
  },
  {
    "text": "those control plan services that means you also need have access indirectly to those customer data that's why the",
    "start": "237329",
    "end": "243959"
  },
  {
    "text": "security of the kubernetes cluster is super important and critical to the success of our company and our customer",
    "start": "243959",
    "end": "250669"
  },
  {
    "text": "we have a couple of security concerns from different people for example from",
    "start": "250669",
    "end": "255930"
  },
  {
    "text": "our customer they always want their data to remain private they don't want anyone else to access the data and a subset of",
    "start": "255930",
    "end": "262979"
  },
  {
    "text": "our customer also have the security compliance they need to conform like those in the house industry or in",
    "start": "262979",
    "end": "269100"
  },
  {
    "text": "the federal agent industry they have the HEPA or a sock you or FedRAMP those",
    "start": "269100",
    "end": "274139"
  },
  {
    "text": "compliance right so if you are a security engineer inside data breaks your concern is security so first of all",
    "start": "274139",
    "end": "282870"
  },
  {
    "text": "you want our security solution to have this nature of defense-in-depth we don't",
    "start": "282870",
    "end": "287880"
  },
  {
    "text": "have a single security feature that just depend anything else so we instead we",
    "start": "287880",
    "end": "293340"
  },
  {
    "text": "need to have network security as well as service security right and second of all",
    "start": "293340",
    "end": "298530"
  },
  {
    "text": "they want all the production excess to be limited and audited so nobody else nobody are supposed to access production",
    "start": "298530",
    "end": "306150"
  },
  {
    "text": "in the environment it not supposed to finally as an engineer as an application engineer you don't maybe you don't care",
    "start": "306150",
    "end": "313169"
  },
  {
    "text": "that much about security what you really care is about productivity so what that",
    "start": "313169",
    "end": "318270"
  },
  {
    "text": "means is when you build a new feature you build a new service right you want a security it should be an integrated",
    "start": "318270",
    "end": "324510"
  },
  {
    "text": "feature that already been built for your system or your service you don't want to spend more time working on your security",
    "start": "324510",
    "end": "330510"
  },
  {
    "text": "stuff and overtime because security is the ongoing effort you may want to",
    "start": "330510",
    "end": "335520"
  },
  {
    "text": "onboard engineer with new security features of a service the actually one that should be easy to integrate with as",
    "start": "335520",
    "end": "341910"
  },
  {
    "text": "an easy to extend right so with all those requirement we boil down to this",
    "start": "341910",
    "end": "347850"
  },
  {
    "text": "three fundamental aspect of a security management system basically is access",
    "start": "347850",
    "end": "354090"
  },
  {
    "text": "control and security management and audio logging so we're not trying to touch each of those today all right so",
    "start": "354090",
    "end": "362070"
  },
  {
    "text": "we're gonna first talk about access control as access control they come in",
    "start": "362070",
    "end": "367080"
  },
  {
    "text": "two fold as we mentioned previously the network access control and the service",
    "start": "367080",
    "end": "372180"
  },
  {
    "text": "access control so here we just assume that network access control has been taken care already so you already have",
    "start": "372180",
    "end": "378570"
  },
  {
    "text": "those ingress egress rule set up correctly for your services and we're gonna focus on the service access",
    "start": "378570",
    "end": "384389"
  },
  {
    "text": "control team here today so service access control you early come in early",
    "start": "384389",
    "end": "390690"
  },
  {
    "text": "means who have access to what kind of resources right so who the subject here",
    "start": "390690",
    "end": "396960"
  },
  {
    "text": "basically can either be a human or be Servius principle so if you are a dead",
    "start": "396960",
    "end": "403480"
  },
  {
    "text": "risk engineer the access control is very simple to you actually we're all",
    "start": "403480",
    "end": "409180"
  },
  {
    "text": "developers we love terminal so as a developer you can just go to your terminal and run this single command",
    "start": "409180",
    "end": "415480"
  },
  {
    "text": "called get cube access where the environment of that kubernetes you want to run so this sketch cube access script just",
    "start": "415480",
    "end": "422320"
  },
  {
    "text": "help you do everything magically and you don't get me to care about how implement on the line so you can see from this",
    "start": "422320",
    "end": "429430"
  },
  {
    "text": "screen this command actually leads you to your browser with this back hand",
    "start": "429430",
    "end": "435850"
  },
  {
    "text": "service link and it's expect something to return from that link all right so",
    "start": "435850",
    "end": "445810"
  },
  {
    "text": "the first thing after you go to the browser is to signing with your Google account and after that it will lead you",
    "start": "445810",
    "end": "452200"
  },
  {
    "text": "to this ugly page where all backhander wrapper we don't know how to create a UI",
    "start": "452200",
    "end": "457210"
  },
  {
    "text": "so if you know how to create UI please come help us yeah so basically you have",
    "start": "457210",
    "end": "465460"
  },
  {
    "text": "to fill those additional informations first you need to specify this authentication type which means whether",
    "start": "465460",
    "end": "471820"
  },
  {
    "text": "you want you access to a customer notebook just impersonally that customer do some real time debugging or you want",
    "start": "471820",
    "end": "478600"
  },
  {
    "text": "to maybe sometimes ssh to one of the back-end services and grab some log or",
    "start": "478600",
    "end": "484600"
  },
  {
    "text": "something real ously that happens sometimes we can avoid that you can also",
    "start": "484600",
    "end": "489850"
  },
  {
    "text": "specify how long you want at the access to that resource in production it should",
    "start": "489850",
    "end": "495010"
  },
  {
    "text": "be very short because we have a limit set to all production environment and you can also provide a you have to",
    "start": "495010",
    "end": "502090"
  },
  {
    "text": "provide ID of your ticket assistant to demonstrate that you're not just messing",
    "start": "502090",
    "end": "507190"
  },
  {
    "text": "around you're actually trying to do some customer phase you're trying to solve some customer facing issues right so",
    "start": "507190",
    "end": "514090"
  },
  {
    "text": "after you fill up all those informations you can submit your form and you can see that this genie service it actually",
    "start": "514090",
    "end": "521320"
  },
  {
    "text": "returned a credential back to your laptop and with that credential it can run the your favorite cube control",
    "start": "521320",
    "end": "527740"
  },
  {
    "text": "command to get information out of your kubernetes cluster all right and you can see all those processes are self-service you",
    "start": "527740",
    "end": "535020"
  },
  {
    "text": "don't have to talk to anyone because we're all shiny developers here's some",
    "start": "535020",
    "end": "541350"
  },
  {
    "text": "more explanation of what's going on under the hood so remember this is your laptop and you talk to this back-end",
    "start": "541350",
    "end": "549180"
  },
  {
    "text": "service cup genie so Genie is our centralized access control service inside data breaks it's",
    "start": "549180",
    "end": "555630"
  },
  {
    "text": "integrated with Google so remember the first thing you ask is to do a Google",
    "start": "555630",
    "end": "561750"
  },
  {
    "text": "authentication so that's the genie allsparks OS proxy that's forward to you",
    "start": "561750",
    "end": "567840"
  },
  {
    "text": "to google and finish the authentication right so up you're authenticated genie will send another request to Google get",
    "start": "567840",
    "end": "574650"
  },
  {
    "text": "all your Google group information and with all those information Google will bundle them together and send it to vote",
    "start": "574650",
    "end": "581760"
  },
  {
    "text": "the hash code here and vote well upon given those information it will issue a",
    "start": "581760",
    "end": "588630"
  },
  {
    "text": "employee certificate and go send it back all the way to your laptop and then with",
    "start": "588630",
    "end": "594840"
  },
  {
    "text": "that search you will be able to run your cube control command so that's how it works this is an example of the employee",
    "start": "594840",
    "end": "603510"
  },
  {
    "text": "certificate there are a couple of things you may noticed is signed by this an employee CA we will talk about it later",
    "start": "603510",
    "end": "611310"
  },
  {
    "text": "and is time-limited so this is a deaf environment so it's",
    "start": "611310",
    "end": "616590"
  },
  {
    "text": "one day as should be much sore shoulder for production environment and it has",
    "start": "616590",
    "end": "622050"
  },
  {
    "text": "your employee email address as well as your Google Group information that",
    "start": "622050",
    "end": "627720"
  },
  {
    "text": "embedded in this common name field as well as the organization and subject",
    "start": "627720",
    "end": "633390"
  },
  {
    "text": "alternative names field so those are used for authorization purposes by kubernetes later on so this is how our",
    "start": "633390",
    "end": "642390"
  },
  {
    "text": "CA trust chain looks like we have the single rule see I was just careless toward somewhere I don't even know and",
    "start": "642390",
    "end": "650130"
  },
  {
    "text": "this rule C is used to sign a signer CA which is then used to sign two branches",
    "start": "650130",
    "end": "655740"
  },
  {
    "text": "of two branches of certificate one is this employee CA and employee certificated we've already discussed and",
    "start": "655740",
    "end": "663390"
  },
  {
    "text": "other is the services AAA and surveys certificate so basically on your laptop",
    "start": "663390",
    "end": "669120"
  },
  {
    "text": "and on all of those daybreak services they need to transpose the employee CA and the central service CA so this to",
    "start": "669120",
    "end": "676890"
  },
  {
    "text": "party Cong can communicate with each other using SSL connection yeah so",
    "start": "676890",
    "end": "683970"
  },
  {
    "text": "kubernetes provide a lot of authentication strategies if we go to their website you will see a bunch like",
    "start": "683970",
    "end": "689730"
  },
  {
    "text": "client TLS certificate all those token-based like open DZ or webhook token and others password based in all",
    "start": "689730",
    "end": "697860"
  },
  {
    "text": "sprach see in fact i think the different company used different kind of all",
    "start": "697860",
    "end": "703470"
  },
  {
    "text": "strategy but we found what what worked best for us is this TOS certificate and",
    "start": "703470",
    "end": "709800"
  },
  {
    "text": "the reason primarily been that steel as is very widely supported on so because",
    "start": "709800",
    "end": "715290"
  },
  {
    "text": "of this is actually very easy to apply this here as authentication to all the",
    "start": "715290",
    "end": "720360"
  },
  {
    "text": "services we run inside data bridge and as a developer that actually means you",
    "start": "720360",
    "end": "725430"
  },
  {
    "text": "have this unified experience when you want to create a service you want authenticated you want authentication",
    "start": "725430",
    "end": "731840"
  },
  {
    "text": "for your service you can use TLS and if you want to get access to some of the",
    "start": "731840",
    "end": "737310"
  },
  {
    "text": "service you can also use TLS so it's a very unified experience for them and also it here as is very easy to control",
    "start": "737310",
    "end": "746040"
  },
  {
    "text": "expiration because this has this validity that data in it and finally it's also very kind of easy",
    "start": "746040",
    "end": "752730"
  },
  {
    "text": "to integrate with kubernetes our back and our discuss is next does anyone find any problems here",
    "start": "752730",
    "end": "762680"
  },
  {
    "text": "because i think one of the weakness of teo asus doesn't actually allow you to",
    "start": "762800",
    "end": "769110"
  },
  {
    "text": "revoke your access so this might be one of the problem that's also why we want",
    "start": "769110",
    "end": "774450"
  },
  {
    "text": "one other certificate to be short-lived but i think someone are in this comprehensive work on the revocation of",
    "start": "774450",
    "end": "781260"
  },
  {
    "text": "certificate i think there was in one of those hoc yesterday so ever interested you can check that one out I think",
    "start": "781260",
    "end": "787620"
  },
  {
    "text": "that's also some of the feature that we're looking for all right so we",
    "start": "787620",
    "end": "793620"
  },
  {
    "text": "already have this employee certificate it signed with a Google Group information and all we need to do is",
    "start": "793620",
    "end": "801060"
  },
  {
    "text": "somehow binding to kubernetes role and then use that to access your criminality",
    "start": "801060",
    "end": "806070"
  },
  {
    "text": "resources our binding strategy here is also very simple consider you have a",
    "start": "806070",
    "end": "811740"
  },
  {
    "text": "kubernetes cluster here and different color we present different namespaces we actually do namespace a specific role",
    "start": "811740",
    "end": "819300"
  },
  {
    "text": "binding so we heavily rely on this cluster role as a user facing row by default I think provided since",
    "start": "819300",
    "end": "825779"
  },
  {
    "text": "kubernetes 1.8 maybe earlier this edit role is basically a namespace specific",
    "start": "825779",
    "end": "832650"
  },
  {
    "text": "admin role so it gives you all the enemy access to the specific namespace but it",
    "start": "832650",
    "end": "837870"
  },
  {
    "text": "doesn't give you any permission to do operations against like role or role bindings so it essentially like the",
    "start": "837870",
    "end": "844320"
  },
  {
    "text": "power power user role of a to us I am right so if you're you already have your",
    "start": "844320",
    "end": "850350"
  },
  {
    "text": "employee search it will be bind to this cluster edit role through this role binding in the specific namespace you",
    "start": "850350",
    "end": "857580"
  },
  {
    "text": "can see this ro binding it has association with this cluster will edit",
    "start": "857580",
    "end": "863040"
  },
  {
    "text": "and it's also have a subject with the group name in it so that means if I mean",
    "start": "863040",
    "end": "869430"
  },
  {
    "text": "I'm from gross team I can only access a namespace assigned to my group and your",
    "start": "869430",
    "end": "875190"
  },
  {
    "text": "Eric your from different organizations you only have access to the namespace",
    "start": "875190",
    "end": "880650"
  },
  {
    "text": "where you're assigned to he will not be able to access any resource in my namespace and if your automated system",
    "start": "880650",
    "end": "889020"
  },
  {
    "text": "like Jenkins Jenkins can also be associated with a Google group so it will be binded in the same way to the",
    "start": "889020",
    "end": "896040"
  },
  {
    "text": "cluster role and then will only be able to do deployment to that specific namespace one of the advantage of the",
    "start": "896040",
    "end": "904770"
  },
  {
    "text": "setup here is because your company's organization structure may constantly",
    "start": "904770",
    "end": "909870"
  },
  {
    "text": "change when that happens you may want to transfer the ownership of service from one to the other and with this setup all",
    "start": "909870",
    "end": "916860"
  },
  {
    "text": "you need to do is do your organization change on the Google side and then",
    "start": "916860",
    "end": "922050"
  },
  {
    "text": "update this role binding you can just assign a namespace to a different group and that that group gonna be the new",
    "start": "922050",
    "end": "928980"
  },
  {
    "text": "owner we also find this permission impersonation use case to be very useful",
    "start": "928980",
    "end": "936339"
  },
  {
    "text": "so consider if you we have a use case here consider if your Alice from Team a",
    "start": "936339",
    "end": "941649"
  },
  {
    "text": "and you need access to service part belongs to team B you may want to do",
    "start": "941649",
    "end": "947110"
  },
  {
    "text": "some ad hoc debugging because you know root cause analysis usually comes across like different teams you don't care",
    "start": "947110",
    "end": "954190"
  },
  {
    "text": "which that service belongs to or you may want to do some fleet scan or some in his task over your back-end services so",
    "start": "954190",
    "end": "961329"
  },
  {
    "text": "when that happened what do you want is you actually want to temporarily impersonate one of the developer on Team",
    "start": "961329",
    "end": "967390"
  },
  {
    "text": "B and use his permission set to do your task right so this get root access",
    "start": "967390",
    "end": "975190"
  },
  {
    "text": "command it can help you to achieve the same thing this is an existing example",
    "start": "975190",
    "end": "980589"
  },
  {
    "text": "we showed before so you still run this get cube access command and remember that ugly web page",
    "start": "980589",
    "end": "986620"
  },
  {
    "text": "where you can also specify an additional group in this case group team B and",
    "start": "986620",
    "end": "992250"
  },
  {
    "text": "genie will get that request and it will notify the owner of Group B say someone",
    "start": "992250",
    "end": "998020"
  },
  {
    "text": "trying to access service in your group and you can prove that request and then both will be able to generate a new",
    "start": "998020",
    "end": "1004860"
  },
  {
    "text": "certificate was that additional group information inside the cert and then you",
    "start": "1004860",
    "end": "1009899"
  },
  {
    "text": "will be able to use that new cert to access resources and team that belongs",
    "start": "1009899",
    "end": "1015540"
  },
  {
    "text": "to team B so this we used to we found it to be a very useful use case in our",
    "start": "1015540",
    "end": "1021120"
  },
  {
    "text": "organization and finally uh comes to continuous deployment because we use",
    "start": "1021120",
    "end": "1027750"
  },
  {
    "text": "Jenkins pipeline to do end-to-end deployment and one of the challenge we found about Jenkins's it cannot just",
    "start": "1027750",
    "end": "1035130"
  },
  {
    "text": "open the browser and do this two-factor authentication right so it runs in headless mode so what what Jenkins",
    "start": "1035130",
    "end": "1041970"
  },
  {
    "text": "really do is it use a long-lived token that was issued by vote and it was sent",
    "start": "1041970",
    "end": "1048630"
  },
  {
    "text": "the request itself to the front end of this genie it sends requests directly to the vault a hash a cup both backhand and",
    "start": "1048630",
    "end": "1056040"
  },
  {
    "text": "vote will recognize that token because this is issued by vote and will issue a",
    "start": "1056040",
    "end": "1063390"
  },
  {
    "text": "and concert' the same way as a tissue employee search with all the required information and then Jenkins will be",
    "start": "1063390",
    "end": "1070050"
  },
  {
    "text": "able to run the same control command to finish a deployment the same way as an",
    "start": "1070050",
    "end": "1075180"
  },
  {
    "text": "employee access hakuna days cluster so we have talked about almost everything",
    "start": "1075180",
    "end": "1081690"
  },
  {
    "text": "here the only missing piece is how volts generates a certificate and complete",
    "start": "1081690",
    "end": "1087810"
  },
  {
    "text": "this deployment story so with that I will invite Eric to tell you something about how we use boats at their breaks",
    "start": "1087810",
    "end": "1096950"
  },
  {
    "text": "can everybody hear me all right",
    "start": "1105350",
    "end": "1109130"
  },
  {
    "text": "well so as you mentioned I'll be discussing the tooling we built to",
    "start": "1112720",
    "end": "1118780"
  },
  {
    "text": "address secret management so at data bricks we use an open-source tool called",
    "start": "1118780",
    "end": "1124510"
  },
  {
    "text": "Hasek or vault to manage our secrets it provides an easy-to-use restful interface for configuring and managing",
    "start": "1124510",
    "end": "1130210"
  },
  {
    "text": "secrets for example you can install a signing certificate background to generate TLS key pairs and if any of you",
    "start": "1130210",
    "end": "1137920"
  },
  {
    "text": "had had experience working with open ssl you know how annoying it could be to sometimes use and vault handle all the",
    "start": "1137920",
    "end": "1143830"
  },
  {
    "text": "heavy lifting for you whether it be certificate generation revocation or auditing it's so easy to use that it",
    "start": "1143830",
    "end": "1151270"
  },
  {
    "text": "encourages us to use shorter live certs and that's the approach when generating headless Jenkins tokens for kubernetes",
    "start": "1151270",
    "end": "1156640"
  },
  {
    "text": "access additionally for other secrets it can generate generic secret it can store",
    "start": "1156640",
    "end": "1162400"
  },
  {
    "text": "generic secret material which we use for storing our long live fixed certs so all",
    "start": "1162400",
    "end": "1169630"
  },
  {
    "text": "of our services are deployed to kubernetes and we use kubernetes secrets to inject that information into our",
    "start": "1169630",
    "end": "1174700"
  },
  {
    "text": "running services as a quick refresher here's what a typical secret config looks like here we have a secret called",
    "start": "1174700",
    "end": "1181690"
  },
  {
    "text": "my service secret Keys stored in the development namespace which stores a basic ste 4 encoded secret key by secret",
    "start": "1181690",
    "end": "1189040"
  },
  {
    "text": "config this is very easy to read upfront and very concise but in reality you may",
    "start": "1189040",
    "end": "1194590"
  },
  {
    "text": "have secrets deployed across all of your namespaces and all of your clusters and it's been really hard to manage the context in",
    "start": "1194590",
    "end": "1200230"
  },
  {
    "text": "which each secret was generated and the format each file is configured thus we start to realize that managing",
    "start": "1200230",
    "end": "1207340"
  },
  {
    "text": "our secret that scale is hard and there can be quite a few pain points in the process first secret secrets are hard to",
    "start": "1207340",
    "end": "1215320"
  },
  {
    "text": "audit since they are stored all over the place basic C 4 encoded without any context behind them they're difficult to",
    "start": "1215320",
    "end": "1224050"
  },
  {
    "text": "rotate as it's not always obvious which secrets have dependencies on that rotated cert and lastly secrets",
    "start": "1224050",
    "end": "1231070"
  },
  {
    "text": "obviously contain confidential information and thus you cannot check them into version control so any",
    "start": "1231070",
    "end": "1236290"
  },
  {
    "text": "otherwise automatable service deploy process always requires some sort of manual step in which which someone on",
    "start": "1236290",
    "end": "1242230"
  },
  {
    "text": "your team needs to manually generate those secrets and apply them to get your service up and running",
    "start": "1242230",
    "end": "1247649"
  },
  {
    "text": "these three issues made it really obvious that we needed a solution to address this problem and to do so we",
    "start": "1247649",
    "end": "1253149"
  },
  {
    "text": "introduced a custom kubernetes object definition called secret template which integrates with Hasek or vault to",
    "start": "1253149",
    "end": "1258880"
  },
  {
    "text": "leverage its ease of secret management now let's take a look at the equivalent",
    "start": "1258880",
    "end": "1264309"
  },
  {
    "text": "secret template to the secret defined in our previous slide notice that the definition looks very",
    "start": "1264309",
    "end": "1270130"
  },
  {
    "text": "similar we define a secret template with the same name and namespace as before however since we're integrating with",
    "start": "1270130",
    "end": "1277179"
  },
  {
    "text": "high-sugar vault to generate our secrets for us we provide context name and URL for the vault server we're talking to",
    "start": "1277179",
    "end": "1283409"
  },
  {
    "text": "the data where your request from vault is reachable by the following path and the resulting payload is referenced by",
    "start": "1283409",
    "end": "1290679"
  },
  {
    "text": "the name secret keys and might look something like this above JSON blog finally the actual secret format is a",
    "start": "1290679",
    "end": "1297279"
  },
  {
    "text": "key value pair with the key secret config and the value from The Associated payload notice here that we've described",
    "start": "1297279",
    "end": "1304840"
  },
  {
    "text": "everything needed to define this secret without displaying any of its confidential information so to recap we",
    "start": "1304840",
    "end": "1312190"
  },
  {
    "text": "had an internal tooling to declaratively define the properties of our secret and when applied it automatically pulls all",
    "start": "1312190",
    "end": "1318760"
  },
  {
    "text": "relevant data from Hashi core vault and turns it into a kubernetes secret this",
    "start": "1318760",
    "end": "1324490"
  },
  {
    "text": "enables us to tackle each of the pain points from our previous slide we now now automatically have",
    "start": "1324490",
    "end": "1330399"
  },
  {
    "text": "audit log history manage my vault and if we need to rotate the cert we simply update the signing back-end in vault and",
    "start": "1330399",
    "end": "1337120"
  },
  {
    "text": "reapply the secret templates also the templates contain no secret information",
    "start": "1337120",
    "end": "1343000"
  },
  {
    "text": "so we can check our configuration and to get to get all the benefits of version control and revision tracking and now",
    "start": "1343000",
    "end": "1351519"
  },
  {
    "text": "we've automated and streamlined the steps for a developer to easily create their secrets with fewer chances from",
    "start": "1351519",
    "end": "1356649"
  },
  {
    "text": "mistakes along the way and now it's all just code we found that this declarative",
    "start": "1356649",
    "end": "1362830"
  },
  {
    "text": "formatting for our secrets was really useful in improving the velocity of our developers and when when managing their security related concerns and if you",
    "start": "1362830",
    "end": "1370000"
  },
  {
    "text": "guys are interested in a tool like this or have faced similar problems please let us know after last I'll talk a",
    "start": "1370000",
    "end": "1377679"
  },
  {
    "text": "little bit of our auditing story",
    "start": "1377679",
    "end": "1381419"
  },
  {
    "text": "so Jeannie was designed to be the de-facto authorization service for all employee accesses to our various",
    "start": "1383370",
    "end": "1389139"
  },
  {
    "text": "services and we built auditing in from the beginning junior records all types of authorizations and grants including",
    "start": "1389139",
    "end": "1395529"
  },
  {
    "text": "failed attempts at access since we since we're also like the creators of spark we naturally use spark in our internal",
    "start": "1395529",
    "end": "1401830"
  },
  {
    "text": "systems so we run a daily spark job to compile its information and export it via email to our security team and",
    "start": "1401830",
    "end": "1407830"
  },
  {
    "text": "here's an example of what that email log might look like but unfortunately you had to Blair almost everything out but",
    "start": "1407830",
    "end": "1413830"
  },
  {
    "text": "basically you can still see the general gist of things it has the standard properties time stamp user resource.type resource.panel if there's ever a",
    "start": "1413830",
    "end": "1423669"
  },
  {
    "text": "break-in we have like we have all the historical information information persistent in the database for additional investigation last thing to",
    "start": "1423669",
    "end": "1432429"
  },
  {
    "text": "note is since Jeanne only required tracks requests to gain access to our kubernetes clusters we don't actually",
    "start": "1432429",
    "end": "1438700"
  },
  {
    "text": "have insight into what that user does in the in in the kubernetes ecosystem so we leverage Kubb API server audit logging",
    "start": "1438700",
    "end": "1445299"
  },
  {
    "text": "to get command-level logging for the users in our system to wrap things up",
    "start": "1445299",
    "end": "1452769"
  },
  {
    "text": "I'd like to highlight a couple of the key lessons we learned along the way when building these security systems",
    "start": "1452769",
    "end": "1458220"
  },
  {
    "text": "first security shouldn't be attacks on developer productivity the easy way",
    "start": "1458220",
    "end": "1463720"
  },
  {
    "text": "should be the secure way and any gnarly security implementation details should be seamlessly hidden by automation a",
    "start": "1463720",
    "end": "1471000"
  },
  {
    "text": "generic solution should usually should wear a generic suit solution is usually",
    "start": "1471809",
    "end": "1477159"
  },
  {
    "text": "the more secure one TLS was easy to adopt for us and as a common enough standard that could be used for both",
    "start": "1477159",
    "end": "1482320"
  },
  {
    "text": "kubernetes as well as other developer application use cases for security",
    "start": "1482320",
    "end": "1490419"
  },
  {
    "text": "compliance reasons remember everything until you're allowed to forget other buyer contract or someone tells you you",
    "start": "1490419",
    "end": "1496840"
  },
  {
    "text": "can do so and lastly don't reinvent the wheel all of us up this conference can",
    "start": "1496840",
    "end": "1503019"
  },
  {
    "text": "agree open source software is your friend take advantage of the battle-tested solutions that others have been engineered and you'll be a lot",
    "start": "1503019",
    "end": "1508690"
  },
  {
    "text": "happier along the way cool so I hope you guys enjoyed our talk",
    "start": "1508690",
    "end": "1514730"
  },
  {
    "text": "and if any of these topics interest you or you enjoy working on other projects related to kubernetes please come talk",
    "start": "1514730",
    "end": "1520280"
  },
  {
    "text": "to us after because we're also hiring Thanks [Applause]",
    "start": "1520280",
    "end": "1531110"
  },
  {
    "text": "yeah so actually we're actually not using custom resource definitions to apply that object what we have and it's",
    "start": "1540600",
    "end": "1548250"
  },
  {
    "text": "actually it's actually like a a wrapper around koop CTL that transforms like I",
    "start": "1548250",
    "end": "1553799"
  },
  {
    "text": "guess data data brick specific object definitions into like and under like I'm",
    "start": "1553799",
    "end": "1559309"
  },
  {
    "text": "into the underlying like kubernetes objects so we don't actually use custom resource definitions but I think that's",
    "start": "1559309",
    "end": "1565139"
  },
  {
    "text": "like the way we'd want to write it if we had been like we had known about like the later preachers and kubernetes so",
    "start": "1565139",
    "end": "1578820"
  },
  {
    "text": "Genie has like a long live token that is sorted and it's like persistence to",
    "start": "1578820",
    "end": "1584940"
  },
  {
    "text": "actually talk to vault",
    "start": "1584940",
    "end": "1587658"
  },
  {
    "text": "got okay the data notebook is working on that stuff is that stuff is stored in",
    "start": "1610560",
    "end": "1616590"
  },
  {
    "text": "like some distributed file system of the user which typically has s3 so it's like",
    "start": "1616590",
    "end": "1621900"
  },
  {
    "text": "it's all stored in the customers account so it depends on like their whether they use encrypted s3 buckets or whatnot and",
    "start": "1621900",
    "end": "1627720"
  },
  {
    "text": "then there's just appeared with the connection so that we can access them from our control plane so basically all",
    "start": "1627720",
    "end": "1637020"
  },
  {
    "text": "the data are strong in the customer account so they have total control of who can access we cannot we have a",
    "start": "1637020",
    "end": "1642840"
  },
  {
    "text": "certain expectation of what type of permission did you give to our account to access their data but it can always",
    "start": "1642840",
    "end": "1648270"
  },
  {
    "text": "like without those permissions",
    "start": "1648270",
    "end": "1651800"
  },
  {
    "text": "I think that some parts so having a well",
    "start": "1675460",
    "end": "1681850"
  },
  {
    "text": "sorry oh how do you like how do you how do you I guess work with developers to",
    "start": "1681850",
    "end": "1689410"
  },
  {
    "text": "take away some of their like privileges but also like increase security like what is that like balance for for things",
    "start": "1689410",
    "end": "1697900"
  },
  {
    "text": "like secure a secret management having the secret template is a clear win from",
    "start": "1697900",
    "end": "1703390"
  },
  {
    "text": "the from the sort of observability perspective because everyone can clearly audit what secrets they're actually",
    "start": "1703390",
    "end": "1710200"
  },
  {
    "text": "using is ed so there's like the obvious benefit that if they adopt system rather than manually configuring their secrets",
    "start": "1710200",
    "end": "1716130"
  },
  {
    "text": "you know it's a win-win-win things like auditing and security I think there's a",
    "start": "1716130",
    "end": "1723160"
  },
  {
    "text": "top-down approach also of we have to be we have to comply with like some set of",
    "start": "1723160",
    "end": "1728440"
  },
  {
    "text": "security rules and that trumps the rest",
    "start": "1728440",
    "end": "1733559"
  },
  {
    "text": "how long is the security for so question",
    "start": "1738940",
    "end": "1748550"
  },
  {
    "text": "is how long the certificate for employees lived for question we have",
    "start": "1748550",
    "end": "1753890"
  },
  {
    "text": "different requirement for different Rica environment like deaf staging and prod for now prod is actually 16 minutes by",
    "start": "1753890",
    "end": "1762920"
  },
  {
    "text": "the car and maximum and for that we allow a bit longer time like one day how",
    "start": "1762920",
    "end": "1773720"
  },
  {
    "text": "do we replace a certificate yeah so as we mentioned previously the one of the I",
    "start": "1773720",
    "end": "1778730"
  },
  {
    "text": "think one of the drawback of using some POS certificate is you have no way to easily revoke your existing ones and so",
    "start": "1778730",
    "end": "1786650"
  },
  {
    "text": "if you have your have certificate compromised then we have to switch all",
    "start": "1786650",
    "end": "1792440"
  },
  {
    "text": "the certificate on the server side but I think there are some come in some people working on the revocation of certificate",
    "start": "1792440",
    "end": "1799220"
  },
  {
    "text": "in this community and if that is a new feature we can we can on board I think",
    "start": "1799220",
    "end": "1804680"
  },
  {
    "text": "they'll be great",
    "start": "1804680",
    "end": "1807250"
  },
  {
    "text": "yes and the question is whether we have any automation bill to rotate a",
    "start": "1813980",
    "end": "1819019"
  },
  {
    "text": "certificate we do have some of those part automated but we don't have",
    "start": "1819019",
    "end": "1824990"
  },
  {
    "text": "end-to-end fully automation system but that's that's the I think that's a",
    "start": "1824990",
    "end": "1830090"
  },
  {
    "text": "direction we want to go yes",
    "start": "1830090",
    "end": "1833500"
  },
  {
    "text": "so yeah there there's some work I think goes by the Hashi core people to integrate kubernetes with vult directly",
    "start": "1863290",
    "end": "1869290"
  },
  {
    "text": "using service counts so currently to",
    "start": "1869290",
    "end": "1874960"
  },
  {
    "text": "actually apply it to apply secrets it actually leverages the employee credentials to actually have to actually",
    "start": "1874960",
    "end": "1881080"
  },
  {
    "text": "apply them so when you like cou a rapped coop CTL apply the secret template event",
    "start": "1881080",
    "end": "1888550"
  },
  {
    "text": "like you it will use your credentials to talk to a vault to populate the secret and then apply it to kubernetes right",
    "start": "1888550",
    "end": "1895750"
  },
  {
    "text": "now so a lot of it depends on the sort of employee pathway and getting those credentials like and the source of the",
    "start": "1895750",
    "end": "1901120"
  },
  {
    "text": "employee credentials source maggini if they were wrote we could yeah it's it's",
    "start": "1901120",
    "end": "1908980"
  },
  {
    "text": "dynamically created like at the time of application yeah I want position Jeannie more as a seam layer on top of all those",
    "start": "1908980",
    "end": "1916090"
  },
  {
    "text": "open source tools that's specifically for developers for interact like communication so like services if",
    "start": "1916090",
    "end": "1923860"
  },
  {
    "text": "they're running inside kubernetes they don't have to talk to Jeannie to get those a service account or anything",
    "start": "1923860",
    "end": "1929680"
  },
  {
    "text": "so if yeah I think if won't have some integration with kubernetes we'll definitely look for that solution as",
    "start": "1929680",
    "end": "1935380"
  },
  {
    "text": "well thank you guys",
    "start": "1935380",
    "end": "1940570"
  },
  {
    "text": "all right thank you [Applause]",
    "start": "1940570",
    "end": "1946789"
  }
]