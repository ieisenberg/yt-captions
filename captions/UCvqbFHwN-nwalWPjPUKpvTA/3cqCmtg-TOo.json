[
  {
    "text": "hey thank you guys for joining this session a technical session at 4M the",
    "start": "1599",
    "end": "7879"
  },
  {
    "text": "afternoon I hope you guys are ready for that um how was the day today how's the",
    "start": "7879",
    "end": "14759"
  },
  {
    "text": "talks and you guys awesome amazing all right so let me try to close it with like a good note I",
    "start": "14759",
    "end": "22320"
  },
  {
    "text": "guess um today we're going to do a workshop on how to build an ebpf",
    "start": "22320",
    "end": "30960"
  },
  {
    "text": "uh a cni plugin that uses abpf uh it's going to be a tutorial for",
    "start": "30960",
    "end": "37200"
  },
  {
    "text": "about an hour and a half I'm going to try to make it actually shorter just for",
    "start": "37200",
    "end": "42239"
  },
  {
    "text": "you guys to to rest a bit from this long day all right you guys",
    "start": "42239",
    "end": "48879"
  },
  {
    "text": "ready amazing let's do it all right a bit by myself my name is",
    "start": "48879",
    "end": "55600"
  },
  {
    "text": "Adam saiya I work at solo um",
    "start": "55600",
    "end": "60760"
  },
  {
    "text": "in the past couple years I've been very focused on what we call application",
    "start": "60760",
    "end": "66360"
  },
  {
    "text": "networking in general so I deal with API getways and service mesh every day and",
    "start": "66360",
    "end": "72560"
  },
  {
    "text": "kind of the focus there is to secure the traffic and secure the network in general now thing I'm one thing I'm very",
    "start": "72560",
    "end": "80000"
  },
  {
    "text": "much uh interested in these days is how can I do more and instead of operating",
    "start": "80000",
    "end": "86240"
  },
  {
    "text": "at L7 on the layer seven where it's kind application uh layer I want to see how",
    "start": "86240",
    "end": "93240"
  },
  {
    "text": "many policies and how much we can get from doing controlling the traffic way",
    "start": "93240",
    "end": "100280"
  },
  {
    "text": "earlier on the network stack and that's basically where the cni and ABF operates",
    "start": "100280",
    "end": "107119"
  },
  {
    "text": "right it's very much networking at a very low level so today",
    "start": "107119",
    "end": "114360"
  },
  {
    "text": "um again we are going to do a cni APF Workshop up but we are not going",
    "start": "114360",
    "end": "121079"
  },
  {
    "text": "to recreate San right we're not going to do something anything complicated I",
    "start": "121079",
    "end": "126560"
  },
  {
    "text": "think the goal of this session is mainly um you know to solve this curiosity that",
    "start": "126560",
    "end": "132080"
  },
  {
    "text": "everyone have right for example for me when I was a kid I always been asking my dad like hey how things work and he gave",
    "start": "132080",
    "end": "138640"
  },
  {
    "text": "me like the the Quick Pitch right for example for us today is like opening a car and you know opening the hood and",
    "start": "138640",
    "end": "145760"
  },
  {
    "text": "saying hey this is the engine and this is the battery and you know that's pretty much it as long if we can",
    "start": "145760",
    "end": "152319"
  },
  {
    "text": "understand kind of the underlying mechanism being used in these Technologies like cium and other a big",
    "start": "152319",
    "end": "159159"
  },
  {
    "text": "project that use EF then it's a good it's a good day all right all",
    "start": "159159",
    "end": "165000"
  },
  {
    "text": "right so let's get started what we are going to do today",
    "start": "165000",
    "end": "170800"
  },
  {
    "text": "couple things we're going to start with a small presentation around what's a cni okay a very few slides going on talking",
    "start": "170800",
    "end": "179280"
  },
  {
    "text": "about the B Basics we're not going to Deep dive too much into it but at least just to get the main idea of how things",
    "start": "179280",
    "end": "186200"
  },
  {
    "text": "work after that we are going to uh use our laptops I don't know if you guys are",
    "start": "186200",
    "end": "191720"
  },
  {
    "text": "ready for that you guys can follow with me too uh to create our own first",
    "start": "191720",
    "end": "198720"
  },
  {
    "text": "cni after that we're going to talk about ebpf and kind of the use cases we can",
    "start": "198720",
    "end": "203840"
  },
  {
    "text": "use it with uh with the cni we going to talk about a bit of more complexity",
    "start": "203840",
    "end": "209280"
  },
  {
    "text": "there when we talk about monitoring and we're going to end with uh how we can",
    "start": "209280",
    "end": "214480"
  },
  {
    "text": "use EF for security uh in our in our cni",
    "start": "214480",
    "end": "219560"
  },
  {
    "text": "and at the end we're just going to have a small conclusion and any questions all right you guys ready",
    "start": "219560",
    "end": "225959"
  },
  {
    "text": "again awesome awesome all right so a quick question because I was very much",
    "start": "225959",
    "end": "231319"
  },
  {
    "text": "uh when designing this Workshop I was you know trying to figure out the right technology to use especially for the",
    "start": "231319",
    "end": "237319"
  },
  {
    "text": "code so just by raise of hand here who writes",
    "start": "237319",
    "end": "242840"
  },
  {
    "text": "goang all right good thing because we're going to do this in bash",
    "start": "242840",
    "end": "248519"
  },
  {
    "text": "right right I look we I I was looking for the kind of the simplest way to do",
    "start": "248519",
    "end": "254120"
  },
  {
    "text": "it and I think bash helps a lot bash has a lot of abstractions and we can just like use um you know clis that are",
    "start": "254120",
    "end": "261959"
  },
  {
    "text": "pretty much simplifying our life golang is definitely the language of choice",
    "start": "261959",
    "end": "267440"
  },
  {
    "text": "when you try to deal with this situation s us it there's there's good documentation out there but obviously it",
    "start": "267440",
    "end": "273280"
  },
  {
    "text": "brings its own complexity around error handling all these things today we don't need that today we just need to understand the mechanisms",
    "start": "273280",
    "end": "281199"
  },
  {
    "text": "okay all right let's get going here what is a",
    "start": "281199",
    "end": "288600"
  },
  {
    "text": "cni a cni is basically if you think about any cuber dis cluster Docker other",
    "start": "288600",
    "end": "297280"
  },
  {
    "text": "projects use cni is a way way to provide the wiring provide the wiring for any",
    "start": "297280",
    "end": "303680"
  },
  {
    "text": "container right in our case here we talking about cuen is a pod right how",
    "start": "303680",
    "end": "310080"
  },
  {
    "text": "can I allow a certain pod to have a certain IP be connected be able to reach",
    "start": "310080",
    "end": "315240"
  },
  {
    "text": "it be able to interact with it that's the core thing around what a cni is a",
    "start": "315240",
    "end": "321240"
  },
  {
    "text": "cni plug in this in this example now you can think about a cni",
    "start": "321240",
    "end": "326759"
  },
  {
    "text": "plugin as the you know a plumber basically wi like creating the the pipes",
    "start": "326759",
    "end": "332919"
  },
  {
    "text": "between kind of the network host uh the host Network and and and your containers",
    "start": "332919",
    "end": "339560"
  },
  {
    "text": "and and parts okay so that's definitely the easiest way to to describe what the",
    "start": "339560",
    "end": "345600"
  },
  {
    "text": "cni is and now we're going to talk about basically the the spec a bit okay the",
    "start": "345600",
    "end": "353280"
  },
  {
    "text": "the spec of the cni project is is stable now it's it's been one0 for a while and",
    "start": "353280",
    "end": "359520"
  },
  {
    "text": "it has a very well documented way of operating it's it's straightforward and",
    "start": "359520",
    "end": "364840"
  },
  {
    "text": "I I definitely invite you guys to read this documentation and in this couple slides we're just going to go through",
    "start": "364840",
    "end": "370560"
  },
  {
    "text": "the basics but again there's couple nuances that I would like you guys to go and review after all so what the cni",
    "start": "370560",
    "end": "378440"
  },
  {
    "text": "project provide us it provide us three main things first is the specification",
    "start": "378440",
    "end": "383599"
  },
  {
    "text": "of what a cni is and how it should operate it provides us some example",
    "start": "383599",
    "end": "389479"
  },
  {
    "text": "implementation that you can just use and reuse and at the end also provide us",
    "start": "389479",
    "end": "394720"
  },
  {
    "text": "some libraries to kind of simplify our life we don't have to rec reinvent the wheel every single time okay and",
    "start": "394720",
    "end": "401319"
  },
  {
    "text": "obviously today we are Reinventing the wheel just for an ed educational",
    "start": "401319",
    "end": "406479"
  },
  {
    "text": "purpose all right so if we zoom in a bit",
    "start": "406479",
    "end": "412280"
  },
  {
    "text": "of how actually things operate it there is couple steps okay so there's always",
    "start": "412280",
    "end": "419080"
  },
  {
    "text": "this what we call a container rent time which can you know there's uh when you use",
    "start": "419080",
    "end": "425440"
  },
  {
    "text": "different technology it means different things and if you talk about cunes that's probably kuet that needs to",
    "start": "425440",
    "end": "432240"
  },
  {
    "text": "create you know it needs to create a pod needs it needs to wire it so the way it works is you have this container rent",
    "start": "432240",
    "end": "438840"
  },
  {
    "text": "time that needs to interact with something to wire this pods that got",
    "start": "438840",
    "end": "444039"
  },
  {
    "text": "created in this case we are using a cni plugin for this the container rent time",
    "start": "444039",
    "end": "452120"
  },
  {
    "text": "is going to do first is going to uh go and read a certain configuration we're going to go into this detail in a bit",
    "start": "452120",
    "end": "458680"
  },
  {
    "text": "right right now we don't have to very much uh focus on this but now we that the CNR rent time the the container rent",
    "start": "458680",
    "end": "465080"
  },
  {
    "text": "time sorry in this case C Cate for for communities will go and look for a",
    "start": "465080",
    "end": "471280"
  },
  {
    "text": "network configuration okay it's a file this is just a Json file that describes certain things that we need to pass",
    "start": "471280",
    "end": "476840"
  },
  {
    "text": "to and then it's going to actually call a binary just a bin passing certain",
    "start": "476840",
    "end": "484199"
  },
  {
    "text": "environment variables and that network configuration and expects couple things",
    "start": "484199",
    "end": "489560"
  },
  {
    "text": "from the cni plugin so the cni plugin going to receive this configuration it's going to be invoked with certain",
    "start": "489560",
    "end": "495400"
  },
  {
    "text": "environment environment variables the cni plugin based on this information going to do what's the cni plugin is",
    "start": "495400",
    "end": "502000"
  },
  {
    "text": "doing you know creating the interface wiring everything and then returns a result that goes back to the container",
    "start": "502000",
    "end": "508800"
  },
  {
    "text": "rent time to say well this was a success my container now is wired okay in a",
    "start": "508800",
    "end": "514120"
  },
  {
    "text": "nutshell that's what it is it's basically a configuration file a binary and something that calls the binary with",
    "start": "514120",
    "end": "520560"
  },
  {
    "text": "configuration file okay all right so let's take a look at",
    "start": "520560",
    "end": "526560"
  },
  {
    "text": "the configuration file and this is a very simple one every cni configuration file has",
    "start": "526560",
    "end": "533760"
  },
  {
    "text": "couple couple Fields certain are mandatory and certain are optional",
    "start": "533760",
    "end": "540399"
  },
  {
    "text": "definitely the thing that is very important here is the cni version again I said there is multiple specifications",
    "start": "540399",
    "end": "546240"
  },
  {
    "text": "kind of the last one is one z0 that's the one we're using today but there's also other ones like you know 30 40 uh",
    "start": "546240",
    "end": "553760"
  },
  {
    "text": "like Zer sorry 040 and 030 and you know old",
    "start": "553760",
    "end": "559120"
  },
  {
    "text": "versions then there is the type the type is in our case if we want to simplify it",
    "start": "559120",
    "end": "564640"
  },
  {
    "text": "is the binary name that we are going to invoke right in this case it's called",
    "start": "564640",
    "end": "570600"
  },
  {
    "text": "Bridge um then we have certain keys that are called well-known keys right",
    "start": "570600",
    "end": "578279"
  },
  {
    "text": "well-known Keys like in my example here ipam and and DNS these well-known keys",
    "start": "578279",
    "end": "584880"
  },
  {
    "text": "are can be used by cni to invoke another cni plug-in right that's what we call",
    "start": "584880",
    "end": "591480"
  },
  {
    "text": "like delegation for example I don't want to go too much in in in in detail about this subject we're not going to use it",
    "start": "591480",
    "end": "597519"
  },
  {
    "text": "today but for example if you are invoking a cni plugin that needs to basically assign a certain",
    "start": "597519",
    "end": "604160"
  },
  {
    "text": "IP sometimes you want to use another cni plugin that is much actually very focused on actually IP generation right",
    "start": "604160",
    "end": "611760"
  },
  {
    "text": "it can be host local it can be DCP it can be other other processes but again that's just a small",
    "start": "611760",
    "end": "619040"
  },
  {
    "text": "parenthesis here and again there is also this uh fields that are called",
    "start": "619040",
    "end": "624440"
  },
  {
    "text": "capabilities and these capabilities are Dynamic fields that are being in when when the container rent time invokes the",
    "start": "624440",
    "end": "631880"
  },
  {
    "text": "cni it dynamically change this field with certain values again this is probably too much detail right now we're",
    "start": "631880",
    "end": "638639"
  },
  {
    "text": "not going to use that today but just to know that exists there and I think the last one which is important our example",
    "start": "638639",
    "end": "645160"
  },
  {
    "text": "is that you can pass custom Keys custom key value keys so it's going to be any",
    "start": "645160",
    "end": "650560"
  },
  {
    "text": "detail you want to pass to your cni plug-in we're going to use this today in our",
    "start": "650560",
    "end": "657079"
  },
  {
    "text": "Workshop all right so so now let's talk about I I talked about you know the",
    "start": "657079",
    "end": "662920"
  },
  {
    "text": "configuration file I I said it's a binary we need to invoke invoke the binary with the configuration file but I",
    "start": "662920",
    "end": "669279"
  },
  {
    "text": "also mentioned that when we have a successful call to the cni plugin it returns a certain result that the",
    "start": "669279",
    "end": "677279"
  },
  {
    "text": "container run time reads and be able to process and obviously update itself uh",
    "start": "677279",
    "end": "683399"
  },
  {
    "text": "the container rent time probably just you know print that at in s the out it's",
    "start": "683399",
    "end": "689959"
  },
  {
    "text": "kind of a format here in Json that Define the IPS the find the r also that's all part of the",
    "start": "689959",
    "end": "696440"
  },
  {
    "text": "cni uh spec and we don't have to really much dig into it here today right now",
    "start": "696440",
    "end": "702000"
  },
  {
    "text": "but just know that there is a result and the result is in our example here for the bridge is to return the IP that been",
    "start": "702000",
    "end": "708519"
  },
  {
    "text": "assigned to the certain container or certain pod if we talking about",
    "start": "708519",
    "end": "714000"
  },
  {
    "text": "communs all right one last Quick Step step here",
    "start": "714000",
    "end": "719480"
  },
  {
    "text": "let's talk about execution okay execution of the C plug-in is uh pretty",
    "start": "719480",
    "end": "726120"
  },
  {
    "text": "again pretty straight forward you have the container run time they're going to go and read the certain configuration",
    "start": "726120",
    "end": "731519"
  },
  {
    "text": "that is uh by default put under SLC cni netd and the name of the configuration",
    "start": "731519",
    "end": "738480"
  },
  {
    "text": "it's going to read that configuration and then invoke the cni uh you know",
    "start": "738480",
    "end": "744440"
  },
  {
    "text": "binary based on that configuration that is under by default is under /opt cni",
    "start": "744440",
    "end": "750120"
  },
  {
    "text": "bin in the binary itself so in this case uh and it passes again it execute and",
    "start": "750120",
    "end": "755600"
  },
  {
    "text": "pass certain environment environment variables okay and the environment variables we're going to see that in a",
    "start": "755600",
    "end": "761920"
  },
  {
    "text": "second here kind of uh just a quick intro to things we're going to use",
    "start": "761920",
    "end": "767279"
  },
  {
    "text": "later every invocation of the cni plugin has again it's invoking the binary and",
    "start": "767279",
    "end": "773519"
  },
  {
    "text": "passing environment variables this environment variables can are the CN I",
    "start": "773519",
    "end": "779079"
  },
  {
    "text": "command basically are we trying to add the container are we trying to delete a container are just checking if the",
    "start": "779079",
    "end": "785480"
  },
  {
    "text": "container is good then we passing a container the cni container ID is",
    "start": "785480",
    "end": "791600"
  },
  {
    "text": "basically uh in communities that's the container ID itself just a reference to the part that",
    "start": "791600",
    "end": "797560"
  },
  {
    "text": "needs to be set we are passing a cni netns and we're",
    "start": "797560",
    "end": "803199"
  },
  {
    "text": "going to get to this later that's basically to you know a way for the for",
    "start": "803199",
    "end": "808839"
  },
  {
    "text": "for us to control where this uh Network namespace and I'm going to talk about Network namespace in a second where the",
    "start": "808839",
    "end": "815519"
  },
  {
    "text": "network namespace is going to be created a cni if name is the interface",
    "start": "815519",
    "end": "822000"
  },
  {
    "text": "like you know the network interface that the container rent time is expecting",
    "start": "822000",
    "end": "828399"
  },
  {
    "text": "from the cni to create on a specific container or pod in this case and uh the",
    "start": "828399",
    "end": "834720"
  },
  {
    "text": "cni arcs are all the values that we put in our configuration earlier that can be",
    "start": "834720",
    "end": "840959"
  },
  {
    "text": "passed down to our uh cni and cni path",
    "start": "840959",
    "end": "846480"
  },
  {
    "text": "is optional here but again if basically the cni is not on the default path then you have to look for where is the you",
    "start": "846480",
    "end": "853279"
  },
  {
    "text": "know the binaries all right one last thing here",
    "start": "853279",
    "end": "859160"
  },
  {
    "text": "cnis can you can use multiple cnis right you can use multiple cnis you have to use only one so sometimes you have",
    "start": "859160",
    "end": "866240"
  },
  {
    "text": "different use cases you you probably have an inter interace cni basically the one that creates the wiring that create",
    "start": "866240",
    "end": "872000"
  },
  {
    "text": "the interface itself but sometimes you have another cni that just do some sort",
    "start": "872000",
    "end": "877040"
  },
  {
    "text": "of tuning or whatever it is right and sometimes you want to split this logic",
    "start": "877040",
    "end": "882440"
  },
  {
    "text": "into multiple plugins in our case here uh c91 you know let's say c92 is invoked",
    "start": "882440",
    "end": "889360"
  },
  {
    "text": "and you get the previous result from the execution of C 91 pass to the plug-in",
    "start": "889360",
    "end": "894839"
  },
  {
    "text": "two and to plugin three and again if you have 10 it's going to operate the same same you know that's kind of a way to",
    "start": "894839",
    "end": "900920"
  },
  {
    "text": "say don't think that the cni is just a replacement you have to like completely replace the cni you have running",
    "start": "900920",
    "end": "907199"
  },
  {
    "text": "sometimes it complement they complement it themselves all",
    "start": "907199",
    "end": "913320"
  },
  {
    "text": "right time to start our first cni plugin you guys you guys all have like",
    "start": "913320",
    "end": "920279"
  },
  {
    "text": "access to a laptop and again you guys can follow with me here but if you have",
    "start": "920279",
    "end": "925560"
  },
  {
    "text": "a laptop and you want to do this lab like run it on your own environments uh that that' be",
    "start": "925560",
    "end": "933920"
  },
  {
    "text": "great all right the exercise today what we are",
    "start": "933920",
    "end": "940199"
  },
  {
    "text": "going to do is we are going to create a bridge plugin this is a very simple",
    "start": "940199",
    "end": "947720"
  },
  {
    "text": "example and again there is multiple ways of creating a cni there is you know in",
    "start": "947720",
    "end": "954319"
  },
  {
    "text": "term of like defining an interface there's like pointto point that mcvillain there's multiple ones but the",
    "start": "954319",
    "end": "960800"
  },
  {
    "text": "simplest one I think to understand the basic of cni is the bridge plugin so here's what we're going to do in this",
    "start": "960800",
    "end": "967519"
  },
  {
    "text": "session actually before I get there if anyone wants to run this",
    "start": "967519",
    "end": "974319"
  },
  {
    "text": "workshop on their laptop right go on this",
    "start": "974319",
    "end": "981839"
  },
  {
    "text": "link okay I'm going to pause there for a second for everyone to to copy",
    "start": "981839",
    "end": "986959"
  },
  {
    "text": "it it it pretty simple is just bit. lee/",
    "start": "986959",
    "end": "993160"
  },
  {
    "text": "ebpf cni okay that will take you to our lab",
    "start": "993160",
    "end": "998240"
  },
  {
    "text": "environment that we're going to use for the exercise are you guys good just let me",
    "start": "998240",
    "end": "1005240"
  },
  {
    "text": "know if you guys all okay all right awesome okay cool I'm going to go back to let me",
    "start": "1005240",
    "end": "1012399"
  },
  {
    "text": "actually start my environment too so because it takes about 2 minutes to be ready click on that just in the",
    "start": "1012399",
    "end": "1020160"
  },
  {
    "text": "meantime and if you click on start you should get on this uh page here where it",
    "start": "1020160",
    "end": "1027240"
  },
  {
    "text": "tells you that the challenges is loading and yeah let's talk about what",
    "start": "1027240",
    "end": "1032640"
  },
  {
    "text": "we are going to do today let's create a bridge cni",
    "start": "1032640",
    "end": "1039558"
  },
  {
    "text": "plug-in what we are going to do is Define the C plugin that first creates a",
    "start": "1039559",
    "end": "1046400"
  },
  {
    "text": "bridge if it's not existing we're going to call it Bridge zero we're going to assign an IP to the",
    "start": "1046400",
    "end": "1054679"
  },
  {
    "text": "bridge right the bridge is connecting is is connected with the you know host",
    "start": "1054679",
    "end": "1061679"
  },
  {
    "text": "Network so that's how we get the connectivity to the host and then the bridge we're going to Define what we",
    "start": "1061679",
    "end": "1068400"
  },
  {
    "text": "call V8 pairs one V8 pair is like you can think",
    "start": "1068400",
    "end": "1075120"
  },
  {
    "text": "like a cord you know so basically you're going to put one end plugged to the bridge and the",
    "start": "1075120",
    "end": "1081960"
  },
  {
    "text": "other end plugged to The Container very simple again I have a bridge connected",
    "start": "1081960",
    "end": "1087120"
  },
  {
    "text": "to the host Network I have a V8 pair one attached to the bridge one attached to",
    "start": "1087120",
    "end": "1092640"
  },
  {
    "text": "the container again that's what we're going to do so let's go back",
    "start": "1092640",
    "end": "1100159"
  },
  {
    "text": "to this one probably take about uh a minute",
    "start": "1100159",
    "end": "1107159"
  },
  {
    "text": "here yeah so in the meantime since I have a minute here to to talk about",
    "start": "1107159",
    "end": "1112320"
  },
  {
    "text": "things um again we are going to do everything here today in bash for Simplicity and we taking a lot of",
    "start": "1112320",
    "end": "1119400"
  },
  {
    "text": "abstractions but the good thing is we are going like if you want to do this",
    "start": "1119400",
    "end": "1124919"
  },
  {
    "text": "for real like and just use like the right Technologies there is multiple projects for example there is the celium",
    "start": "1124919",
    "end": "1131679"
  },
  {
    "text": "ebpf uh project that has good examples of like how you how you can Define",
    "start": "1131679",
    "end": "1136880"
  },
  {
    "text": "actually you know the EPF integration later on there is the uh container",
    "start": "1136880",
    "end": "1142200"
  },
  {
    "text": "Network you know networking uh repo and it has a lot of",
    "start": "1142200",
    "end": "1147720"
  },
  {
    "text": "good examples if you go uh here on the plugins that are provided actually the",
    "start": "1147720",
    "end": "1153919"
  },
  {
    "text": "bridge one we going to do right now in bash or exist in goang and you can just go and copy it right",
    "start": "1153919",
    "end": "1161720"
  },
  {
    "text": "away okay let's go back here to instruct it's",
    "start": "1161720",
    "end": "1167240"
  },
  {
    "text": "taking about 20 seconds if anyone has a good joke",
    "start": "1167240",
    "end": "1175080"
  },
  {
    "text": "no okay so instruct is pretty easy here you don't have you don't have to install",
    "start": "1176200",
    "end": "1182559"
  },
  {
    "text": "anything uh what we're going to need is basically this tab here it's going to",
    "start": "1182559",
    "end": "1188200"
  },
  {
    "text": "have a panel on the left where we're going to have all the instructions and then we're going to have a terminal on",
    "start": "1188200",
    "end": "1194840"
  },
  {
    "text": "the sorry a terminal on the right and we have have all the instruction no wait a",
    "start": "1194840",
    "end": "1200880"
  },
  {
    "text": "second the terminal is in the left sorry and instruction are in the right and it's probably just a copy paste exercise at this",
    "start": "1200880",
    "end": "1208120"
  },
  {
    "text": "point so quick question here who has this uh the environments ready wow so you guys faster than me",
    "start": "1208440",
    "end": "1216840"
  },
  {
    "text": "here okay well wait for me right um",
    "start": "1216840",
    "end": "1224559"
  },
  {
    "text": "okay keep going",
    "start": "1225320",
    "end": "1230159"
  },
  {
    "text": "meantime",
    "start": "1231159",
    "end": "1233600"
  },
  {
    "text": "soon do you guys see the uh the the",
    "start": "1250280",
    "end": "1255440"
  },
  {
    "text": "terminal okay good",
    "start": "1255440",
    "end": "1260120"
  },
  {
    "text": "interesting going I give it another try on different tab ah there you go okay just been",
    "start": "1271159",
    "end": "1277000"
  },
  {
    "text": "impatient okay there you go let's go let's start so what we are going today",
    "start": "1277000",
    "end": "1283400"
  },
  {
    "text": "to do today is is pretty straightforward we are going to first um create a",
    "start": "1283400",
    "end": "1289679"
  },
  {
    "text": "kubernetes cluster a single node kubernetes cluster that doesn't have anything much it doesn't have any cni",
    "start": "1289679",
    "end": "1295880"
  },
  {
    "text": "okay for that we're going to use Cube EDM it's it's uh it's very simple uh",
    "start": "1295880",
    "end": "1301279"
  },
  {
    "text": "cuber cluster here again Basics so to use this platform is straightforward go",
    "start": "1301279",
    "end": "1309960"
  },
  {
    "text": "and click on the command right click on whatever you want to copy and then go to the terminal and",
    "start": "1309960",
    "end": "1318880"
  },
  {
    "text": "paste all right first step is creating a kuus cluster without any cni",
    "start": "1318880",
    "end": "1329039"
  },
  {
    "text": "installed it's taking a couple seconds to get it ready and once done now we",
    "start": "1329039",
    "end": "1335279"
  },
  {
    "text": "have a quer cluster I can run the second command here it's just",
    "start": "1335279",
    "end": "1340400"
  },
  {
    "text": "to basically wire uh you know the cube config so now I can run commands like",
    "start": "1340400",
    "end": "1347120"
  },
  {
    "text": "Cube get pod if I run the cccl getp",
    "start": "1347120",
    "end": "1352960"
  },
  {
    "text": "command you guys can see from back there good all right so if I run the c c",
    "start": "1353640",
    "end": "1362279"
  },
  {
    "text": "um command oops I I see here that I have couple pod that are running but I have",
    "start": "1362279",
    "end": "1370039"
  },
  {
    "text": "two that are pending right so the core ones the core cubin SPS are are started that's fine",
    "start": "1370039",
    "end": "1377080"
  },
  {
    "text": "but anything that is need that needs a cni to operate it's in pending right",
    "start": "1377080",
    "end": "1382720"
  },
  {
    "text": "that's because we don't have any cni installed at this point so even if you start any like hell",
    "start": "1382720",
    "end": "1391559"
  },
  {
    "text": "world or you know HTTP bin whatever service it will not work at this",
    "start": "1391559",
    "end": "1397159"
  },
  {
    "text": "point so let's let's fix that let's actually create our first CI",
    "start": "1397159",
    "end": "1403200"
  },
  {
    "text": "plugin the first step we're going to do here is to copy the skeleton of our cni",
    "start": "1403200",
    "end": "1409279"
  },
  {
    "text": "plugin let's copy it and let's open it on this tab so cop",
    "start": "1409279",
    "end": "1415240"
  },
  {
    "text": "copy the command like run the command copy and then let's go to the editor here press press refresh if you don't",
    "start": "1415240",
    "end": "1421400"
  },
  {
    "text": "see it right away you know sometimes it takes a couple uh a couple times to to pop up now that you click on the file",
    "start": "1421400",
    "end": "1429520"
  },
  {
    "text": "and let's just read the first you know what's this is the kind of the basics of",
    "start": "1429520",
    "end": "1435240"
  },
  {
    "text": "our cni plug-in it's just a bash file and it has couple command that we need to to do so we are reading this",
    "start": "1435240",
    "end": "1442200"
  },
  {
    "text": "environment variable C command remember right the the the container and time",
    "start": "1442200",
    "end": "1448039"
  },
  {
    "text": "execute the binary and pass certain environment variable as part of this environment variable we have the C",
    "start": "1448039",
    "end": "1454480"
  },
  {
    "text": "command what we want to do in this case there's multiple operations actually I'm",
    "start": "1454480",
    "end": "1460880"
  },
  {
    "text": "I'm missing one here that doesn't really matter but in our case we want to focus on adding a pod and deleting a pod right",
    "start": "1460880",
    "end": "1468440"
  },
  {
    "text": "so in this case we have case add delete check and inv",
    "start": "1468440",
    "end": "1473480"
  },
  {
    "text": "verion all right this is very basic let's keep going here and now let's",
    "start": "1473480",
    "end": "1479120"
  },
  {
    "text": "implement the ad function in our cni plugin so the at",
    "start": "1479120",
    "end": "1488120"
  },
  {
    "text": "function is going to do a couple things the ad function is going to grab you",
    "start": "1488120",
    "end": "1495520"
  },
  {
    "text": "know first we're going to get the crdr of the of the of the node like what kind of what kind of ips are allowed on a",
    "start": "1495520",
    "end": "1503320"
  },
  {
    "text": "certain node then we are going to create a a again a bridge like we",
    "start": "1503320",
    "end": "1510120"
  },
  {
    "text": "said and then we're going to create the V8 pair one plugged to the bridge one",
    "start": "1510120",
    "end": "1516320"
  },
  {
    "text": "plugged to the container and then we're going to return a certain result saying well",
    "start": "1516320",
    "end": "1521880"
  },
  {
    "text": "everything's done everything's good so let's run this command here uh",
    "start": "1521880",
    "end": "1527880"
  },
  {
    "text": "uh we're going to copy the the step two add going back to the terminal run",
    "start": "1527880",
    "end": "1534760"
  },
  {
    "text": "this and now if you go to the editor just again refresh the page if you don't see the the new the new code and let's",
    "start": "1534760",
    "end": "1541600"
  },
  {
    "text": "go line by line here trying to understand what we did again this is Bash it's very much simplified for a lot",
    "start": "1541600",
    "end": "1547360"
  },
  {
    "text": "of things right and go if you want to do it right um the first thing is to we we",
    "start": "1547360",
    "end": "1554720"
  },
  {
    "text": "are going to pass right we're are going to pass the pod cidr using the remember the",
    "start": "1554720",
    "end": "1561520"
  },
  {
    "text": "configuration the Json configuration we are going to pass in that Json configuration the Pod CDR of the node so",
    "start": "1561520",
    "end": "1569159"
  },
  {
    "text": "every single node has a pod cidr we're going to pass that to the cni",
    "start": "1569159",
    "end": "1575320"
  },
  {
    "text": "plugin then we are going to create a bridge we are using again just CLI",
    "start": "1575320",
    "end": "1581320"
  },
  {
    "text": "commands to do a lot of things in this case we are creating a bridge called Bridge uh zero sorry I'm just going to",
    "start": "1581320",
    "end": "1588240"
  },
  {
    "text": "remove this so it's easy to read",
    "start": "1588240",
    "end": "1593440"
  },
  {
    "text": "um okay there you go yes so the first step again is creating the bridge if it",
    "start": "1593440",
    "end": "1599360"
  },
  {
    "text": "doesn't exist in this case it's called Bridge zero then we are assigning like a gway",
    "start": "1599360",
    "end": "1607120"
  },
  {
    "text": "IP an IP itself to the bridge right so the step here is is to assign",
    "start": "1607120",
    "end": "1613960"
  },
  {
    "text": "the IP and then we are going we we need need to figure out the IP of a container",
    "start": "1613960",
    "end": "1620399"
  },
  {
    "text": "right again this is very very bad code you don't do that in general right do",
    "start": "1620399",
    "end": "1626559"
  },
  {
    "text": "not go and do a random to figure out what kind of Ip you know we have but you",
    "start": "1626559",
    "end": "1632039"
  },
  {
    "text": "know you probably use the hcp instead and so on in this case we are running this command to figure out let's grab an",
    "start": "1632039",
    "end": "1638840"
  },
  {
    "text": "IP let's grab an IP without within the CR cidr range that we pass in the",
    "start": "1638840",
    "end": "1643919"
  },
  {
    "text": "configuration so we are doing a random between two and 255 okay basically an IP",
    "start": "1643919",
    "end": "1651000"
  },
  {
    "text": "there we're going to grab this IP put it in the variable called IP again remember",
    "start": "1651000",
    "end": "1656679"
  },
  {
    "text": "the steps are pretty easy first create the bridge Define an IP for the container create the V8 pair plug one in",
    "start": "1656679",
    "end": "1663679"
  },
  {
    "text": "the bridge plug one in the container all right so we did we did the",
    "start": "1663679",
    "end": "1669200"
  },
  {
    "text": "two first ones we created the bridge and we generated an IP randomly the step",
    "start": "1669200",
    "end": "1674960"
  },
  {
    "text": "after that is to basically create create the V8 pair to create the V8 pair we are",
    "start": "1674960",
    "end": "1681960"
  },
  {
    "text": "using uh IP Link ad where with one the one side of the the V8 pair is the CN",
    "start": "1681960",
    "end": "1689679"
  },
  {
    "text": "cni if name that's been passed through the execution of the cni plugin again",
    "start": "1689679",
    "end": "1695880"
  },
  {
    "text": "that's configuration coming from the container rent time and the other the other end is",
    "start": "1695880",
    "end": "1703080"
  },
  {
    "text": "basically the name of the interface that we are going to create for this specific pod that's the one this this new",
    "start": "1703080",
    "end": "1709720"
  },
  {
    "text": "interface is the one that going to be plugged to the bridge so here's the V8 pair now we have",
    "start": "1709720",
    "end": "1717679"
  },
  {
    "text": "our extension cord right but it's not plugged yet we just have",
    "start": "1717679",
    "end": "1722799"
  },
  {
    "text": "that what we are going to do is to plug one end in the bridge there you go IP",
    "start": "1722799",
    "end": "1729760"
  },
  {
    "text": "Link Set uh the the the end of one of the V8 pairs is now plugged in in the",
    "start": "1729760",
    "end": "1735799"
  },
  {
    "text": "bridge zero now we have the other end of our extension cord that we need to log",
    "start": "1735799",
    "end": "1742320"
  },
  {
    "text": "in the container itself so what we are going to do is to",
    "start": "1742320",
    "end": "1748399"
  },
  {
    "text": "define the contain the the network namespace to do this we're going to do",
    "start": "1748399",
    "end": "1753799"
  },
  {
    "text": "couple couple commands here but long story short we are defining our uh",
    "start": "1753799",
    "end": "1760519"
  },
  {
    "text": "Network names space that we called in in you know just using a link here to",
    "start": "1760519",
    "end": "1766360"
  },
  {
    "text": "container cni it's going to be /var Run net ns/ container uh cni container ID",
    "start": "1766360",
    "end": "1773200"
  },
  {
    "text": "that's basically our uh Network namespace being defined then what we are going to do is",
    "start": "1773200",
    "end": "1781080"
  },
  {
    "text": "to basically go and put that other end of the extension",
    "start": "1781080",
    "end": "1788279"
  },
  {
    "text": "cord within this network namespace that we just defined okay we're going to plug",
    "start": "1788279",
    "end": "1795519"
  },
  {
    "text": "it there the second thing we're going to define the IP right important we haven't used the IP yet right now we're using",
    "start": "1795519",
    "end": "1802159"
  },
  {
    "text": "the IP the one we generated randomly we are defining that putting that in the",
    "start": "1802159",
    "end": "1807399"
  },
  {
    "text": "our Network namespace so we did the two things we we again we plugged the other end to the container we Define the IP",
    "start": "1807399",
    "end": "1814840"
  },
  {
    "text": "the last thing is to define the default gatway that basically just to carry all the traffic that goes within the network",
    "start": "1814840",
    "end": "1821399"
  },
  {
    "text": "namespace out and that through the default gateway that we just defined we",
    "start": "1821399",
    "end": "1826679"
  },
  {
    "text": "defin in the Bridge right that's kind of the way to say this is how you route",
    "start": "1826679",
    "end": "1832279"
  },
  {
    "text": "traffic so once we did these steps right we did again I'm probably repeating",
    "start": "1832279",
    "end": "1839440"
  },
  {
    "text": "myself but just to understand the concept we created the bridge if not existing we Define an IP we created the",
    "start": "1839440",
    "end": "1847240"
  },
  {
    "text": "V8 pair and we plugged the both ends now that you know you mean like we",
    "start": "1847240",
    "end": "1852679"
  },
  {
    "text": "mean it's it's it's good we we are done now we Define connectivity to our con container let's report this success to",
    "start": "1852679",
    "end": "1861919"
  },
  {
    "text": "our container rent time the container rent time now will get the result to say",
    "start": "1861919",
    "end": "1867480"
  },
  {
    "text": "oh you know what that's good that's good for me and we are using obviously the N",
    "start": "1867480",
    "end": "1873639"
  },
  {
    "text": "the cni specification format to return certain results what we are going to use here is we're going to return the uh",
    "start": "1873639",
    "end": "1881679"
  },
  {
    "text": "certain information for example the IP of this of this specific we're going to return this IP of this specific uh",
    "start": "1881679",
    "end": "1888559"
  },
  {
    "text": "container that we generated we're going to return the MAC address and and so on okay and which gway is being used and so",
    "start": "1888559",
    "end": "1895600"
  },
  {
    "text": "on and it's again the cni spec is very much very flexible and the way it",
    "start": "1895600",
    "end": "1901639"
  },
  {
    "text": "operates is it's capture dat you know you don't even have to return it a certain way just print it in STD out",
    "start": "1901639",
    "end": "1908320"
  },
  {
    "text": "that's all we need to do so we're doing a print right now that's the result that",
    "start": "1908320",
    "end": "1913440"
  },
  {
    "text": "the container I the container and time will capture and say hey well now that's a",
    "start": "1913440",
    "end": "1919120"
  },
  {
    "text": "success you see very basic again this is a very basic container",
    "start": "1919120",
    "end": "1926480"
  },
  {
    "text": "yeah yeah good question good question so the",
    "start": "1933039",
    "end": "1938559"
  },
  {
    "text": "question is how we got the PO CDR and why it's not part of uh you know po the",
    "start": "1938559",
    "end": "1947320"
  },
  {
    "text": "environment variable the the the poy IDR this is not part of the spec right this",
    "start": "1947320",
    "end": "1953080"
  },
  {
    "text": "is this is basically the spec defines the way to to wire a certain pod it doesn't do it in the context of",
    "start": "1953080",
    "end": "1959799"
  },
  {
    "text": "kubernetes the PO C IDE in this case is very much tie to the to the Pod CDR of a",
    "start": "1959799",
    "end": "1965200"
  },
  {
    "text": "node and that's why we have to pass it through the configuration and not through an environment variable that's",
    "start": "1965200",
    "end": "1971880"
  },
  {
    "text": "basically the S okay awesome so uh good the last thing thing we have to do here",
    "start": "1971880",
    "end": "1978240"
  },
  {
    "text": "is to define the dell the delete command and you guys going to see it's very hard",
    "start": "1978240",
    "end": "1985360"
  },
  {
    "text": "very complicated code to add the delete so copy the delete code",
    "start": "1985360",
    "end": "1992320"
  },
  {
    "text": "refresh there you go very complicated code okay that's all we have to do to",
    "start": "1992320",
    "end": "1998159"
  },
  {
    "text": "delete uh a network namespace in this in this case you know removing the Pod it's",
    "start": "1998159",
    "end": "2004080"
  },
  {
    "text": "just going to go and remove the certain Network namespace on that path very",
    "start": "2004080",
    "end": "2010480"
  },
  {
    "text": "simple we don't have to define the check the version we're just going to return basically which kind of cni version",
    "start": "2010480",
    "end": "2016120"
  },
  {
    "text": "we're using in this case which kind of spec and this in this case we're using one but this code is compatible with",
    "start": "2016120",
    "end": "2023240"
  },
  {
    "text": "multiple versions all the you know we don't we're not doing anything complicated so basically we have very",
    "start": "2023240",
    "end": "2030480"
  },
  {
    "text": "much compatibility with everything amazing you guys ready to see that in",
    "start": "2030480",
    "end": "2035960"
  },
  {
    "text": "action I want to see some excitement all",
    "start": "2035960",
    "end": "2041679"
  },
  {
    "text": "right okay so before we get we get there uh let's actually talk about the good",
    "start": "2041679",
    "end": "2047200"
  },
  {
    "text": "point that our friend asked here is basically how to how to pass this this",
    "start": "2047200",
    "end": "2052839"
  },
  {
    "text": "uh poy IDR information in this case I'm I'm putting that directly here 10 10",
    "start": "2052839",
    "end": "2061800"
  },
  {
    "text": "024 why just because I also controlled the poy IDR during the installation",
    "start": "2061800",
    "end": "2067599"
  },
  {
    "text": "itself cunes right we kind of I I passed the same version so I kind of guessed",
    "start": "2067599",
    "end": "2073638"
  },
  {
    "text": "what kind of version I need in my cni this is not common this is not in real",
    "start": "2073639",
    "end": "2078720"
  },
  {
    "text": "word this doesn't work like this in the real word you will need to create a certain process that goes and read you",
    "start": "2078720",
    "end": "2085599"
  },
  {
    "text": "know calls the cube API get the get the part going to need to do this look if if",
    "start": "2085599",
    "end": "2092520"
  },
  {
    "text": "I take a look at my node it's very small actually I think I",
    "start": "2092520",
    "end": "2098359"
  },
  {
    "text": "should zoom in so if I do um maybe I zoom in",
    "start": "2098359",
    "end": "2105440"
  },
  {
    "text": "more so if I do K get node so k for C",
    "start": "2107359",
    "end": "2112520"
  },
  {
    "text": "CTL get node uh and take a look at what I have I have only one node again there",
    "start": "2112520",
    "end": "2117560"
  },
  {
    "text": "a single nodeus cluster in this case and if take a look and do a d o",
    "start": "2117560",
    "end": "2123480"
  },
  {
    "text": "yo then I'll see like if I scroll up um there you go you see the POC IDR",
    "start": "2124480",
    "end": "2132160"
  },
  {
    "text": "that's the one I actually just put statically in my configuration file that I'm going to use as an example but this",
    "start": "2132160",
    "end": "2138160"
  },
  {
    "text": "process is not like that you know if you want to use a real use case you want to create a mechanism that goes and red",
    "start": "2138160",
    "end": "2144520"
  },
  {
    "text": "discriminat API get this get this address put it in the template of the conf of the configuration file that",
    "start": "2144520",
    "end": "2150359"
  },
  {
    "text": "going to be set on the host so going back to our example so we have the B now",
    "start": "2150359",
    "end": "2157440"
  },
  {
    "text": "we good there we're going to create the configuration file it's very basic you see the configuration file for us the",
    "start": "2157440",
    "end": "2164480"
  },
  {
    "text": "network configuration very very basic we are just putting the cni version we're",
    "start": "2164480",
    "end": "2170440"
  },
  {
    "text": "going going to put the type which is again is the binary name in our case and we are putting the the poy IDR that I",
    "start": "2170440",
    "end": "2177720"
  },
  {
    "text": "just showed you right now through kubernetes right that's it all right let's let's let's try it if we run this",
    "start": "2177720",
    "end": "2188200"
  },
  {
    "text": "so in this case I just created two more pods okay just to demonstrate that this",
    "start": "2188200",
    "end": "2193440"
  },
  {
    "text": "thing is broken still very much so right now I have two pods uh in pending my",
    "start": "2193440",
    "end": "2199880"
  },
  {
    "text": "HTTP bin Service uh service our pod here isn't pending the Sleep one two and this",
    "start": "2199880",
    "end": "2207000"
  },
  {
    "text": "cords once but basically yeah I don't have a c yet let's fix",
    "start": "2207000",
    "end": "2212319"
  },
  {
    "text": "this what you have to do is just to copy again I I talked about kind of the",
    "start": "2212319",
    "end": "2217720"
  },
  {
    "text": "default where you need to put the configuration we're going to put our binary our bash script we just created",
    "start": "2217720",
    "end": "2224920"
  },
  {
    "text": "under /opt cni bin and I'm going to put",
    "start": "2224920",
    "end": "2229960"
  },
  {
    "text": "the configuration that we just wrote right now again under the default /c cni",
    "start": "2229960",
    "end": "2236200"
  },
  {
    "text": "netd let's do this wait for it and then give it a",
    "start": "2236200",
    "end": "2244119"
  },
  {
    "text": "couple seconds",
    "start": "2244119",
    "end": "2248599"
  },
  {
    "text": "and a couple seconds",
    "start": "2249280",
    "end": "2255520"
  },
  {
    "text": "more okay how long going I have to wait",
    "start": "2256440",
    "end": "2261960"
  },
  {
    "text": "here well I should probably do that I don't think it's errored kind of control all you know",
    "start": "2266440",
    "end": "2273599"
  },
  {
    "text": "control all the code here what would I ER",
    "start": "2273599",
    "end": "2278599"
  },
  {
    "text": "uh did I wait a second so what do we have here we did the",
    "start": "2279079",
    "end": "2285520"
  },
  {
    "text": "modification of the Pod take a",
    "start": "2285520",
    "end": "2290680"
  },
  {
    "text": "look the",
    "start": "2294480",
    "end": "2297760"
  },
  {
    "text": "cop oh there you go what's going on",
    "start": "2300640",
    "end": "2309319"
  },
  {
    "text": "here do do I have like um let's let's just force the deletion",
    "start": "2312280",
    "end": "2319760"
  },
  {
    "text": "just to kind of force",
    "start": "2319760",
    "end": "2323200"
  },
  {
    "text": "CU where's",
    "start": "2326960",
    "end": "2330280"
  },
  {
    "text": "that get what you said sorry after the",
    "start": "2333680",
    "end": "2339760"
  },
  {
    "text": "copy yeah I mean I yeah did the copy I don't know let's",
    "start": "2339760",
    "end": "2344880"
  },
  {
    "text": "see I'm just going to force the recreation of the",
    "start": "2345839",
    "end": "2351400"
  },
  {
    "text": "pods pending still what's going on let's see sorry let me double check",
    "start": "2356040",
    "end": "2363759"
  },
  {
    "text": "okay describe",
    "start": "2364920",
    "end": "2368440"
  },
  {
    "text": "um",
    "start": "2372680",
    "end": "2375200"
  },
  {
    "text": "yeah presumption oh okay okay okay okay why",
    "start": "2378319",
    "end": "2383920"
  },
  {
    "text": "this is not I I did I put the",
    "start": "2383920",
    "end": "2391560"
  },
  {
    "text": "yeah it was int anyway that's crazy",
    "start": "2392280",
    "end": "2398400"
  },
  {
    "text": "[Music] um no I I needed to to remove the taint",
    "start": "2401340",
    "end": "2406359"
  },
  {
    "text": "for me to schedule the pods on the same on the master node um but the the taint are not there",
    "start": "2406359",
    "end": "2413560"
  },
  {
    "text": "anymore because it's schedule actually schedul the two pods uh what's going on here what's going on let's see let's see",
    "start": "2413560",
    "end": "2420200"
  },
  {
    "text": "let's see did I miss something else um",
    "start": "2420200",
    "end": "2425359"
  },
  {
    "text": "oops",
    "start": "2425359",
    "end": "2428359"
  },
  {
    "text": "what is that the no is",
    "start": "2431079",
    "end": "2436799"
  },
  {
    "text": "already oh yeah yeah I mean the node is not ready because the cni is not there",
    "start": "2442000",
    "end": "2447839"
  },
  {
    "text": "once the cni is installed it's going to put it back to ready uh okay what's What's Happening",
    "start": "2447839",
    "end": "2455319"
  },
  {
    "text": "Here yeah I did okay look let's do this so",
    "start": "2455319",
    "end": "2462599"
  },
  {
    "text": "not block on this I'm going get to that in a second I'm going to go back to do",
    "start": "2462599",
    "end": "2468000"
  },
  {
    "text": "the command quickly just creating a new environments quick you know to not be blocked on like try to debug this live",
    "start": "2468000",
    "end": "2473440"
  },
  {
    "text": "because it's not going to happen uh but question do you guys have the pods container",
    "start": "2473440",
    "end": "2479599"
  },
  {
    "text": "running okay that's what matters I did that already multiple times so what we",
    "start": "2479599",
    "end": "2485680"
  },
  {
    "text": "are going to I think the way I'm going to do it to kind of simplify this now that pods are running and all this",
    "start": "2485680",
    "end": "2491520"
  },
  {
    "text": "that's awesome so what I'm going to do this quickly is to",
    "start": "2491520",
    "end": "2498480"
  },
  {
    "text": "create uh let's going back to my exercise I'm just going to",
    "start": "2498480",
    "end": "2506799"
  },
  {
    "text": "oops I'm going to start that on here and I'm going to catch up don't worry we'll",
    "start": "2507480",
    "end": "2514200"
  },
  {
    "text": "figure this out I have to di D should not debug live",
    "start": "2514200",
    "end": "2519800"
  },
  {
    "text": "never works all right let's go back to this okay awesome so again lets me know how",
    "start": "2519800",
    "end": "2526480"
  },
  {
    "text": "many ones have the thing running all right that makes me happy that's all that",
    "start": "2526480",
    "end": "2531560"
  },
  {
    "text": "matters um so what we are going to do next is to talk about the next step from there okay so now we have the the cni",
    "start": "2531560",
    "end": "2539880"
  },
  {
    "text": "being installed the no is the note is is ready to ready to take uh traffic we",
    "start": "2539880",
    "end": "2545119"
  },
  {
    "text": "have the you know we have the pods networking figured out that's great the step from there is okay let's",
    "start": "2545119",
    "end": "2553000"
  },
  {
    "text": "talk about eppf now let's talk about how we can improve certain things using",
    "start": "2553000",
    "end": "2559240"
  },
  {
    "text": "appf so in our example we did something very basic we just created the interface",
    "start": "2559240",
    "end": "2564760"
  },
  {
    "text": "but what if I want to control this interface to for example monitor all the",
    "start": "2564760",
    "end": "2570599"
  },
  {
    "text": "traffic going through or I want to secure the traffic that goes through that interface right for this we're",
    "start": "2570599",
    "end": "2578079"
  },
  {
    "text": "going to use ebf by raise of hand here who who knows about EF in general okay",
    "start": "2578079",
    "end": "2584440"
  },
  {
    "text": "great great so who wrote an EPF code",
    "start": "2584440",
    "end": "2590800"
  },
  {
    "text": "before what is that yes it's by by definition is okay so we have couple ones awesome all right",
    "start": "2590800",
    "end": "2597520"
  },
  {
    "text": "so again this is going to be very very very basic code ebpf code so don't be",
    "start": "2597520",
    "end": "2604079"
  },
  {
    "text": "scared we have to write some code but it's going to be very very straightforward so ebpf what it",
    "start": "2604079",
    "end": "2611280"
  },
  {
    "text": "is you can think about ebpf I'm probably going to skip this because uh I think it matters more to talk about this abpf is",
    "start": "2611280",
    "end": "2619559"
  },
  {
    "text": "you can think about it as like a VM within the kernel where you can run some",
    "start": "2619559",
    "end": "2624839"
  },
  {
    "text": "code that is very much you know in a sandbox that can do things for you like",
    "start": "2624839",
    "end": "2630480"
  },
  {
    "text": "it can attach to certain hooks so there's hooks for everything there's hooks for Network",
    "start": "2630480",
    "end": "2636720"
  },
  {
    "text": "there's hooks for like file access Linux defined the laws hooks for different",
    "start": "2636720",
    "end": "2642119"
  },
  {
    "text": "things in ebpf in our case and here we're going to talk about networking mostly we can attach a certain code",
    "start": "2642119",
    "end": "2649160"
  },
  {
    "text": "watching for a certain hook and do something that's kind of the the three part of of what we can do in ebpf now",
    "start": "2649160",
    "end": "2657400"
  },
  {
    "text": "the do do something can be monitor the traffic it can be secure the traffic it",
    "start": "2657400",
    "end": "2663240"
  },
  {
    "text": "can be detect anomalies it can be a lot of things like this so here is uh an example of kind of",
    "start": "2663240",
    "end": "2672920"
  },
  {
    "text": "you know if you look at the at the stack there's multiple hooks oops I'm going to put it on slideshow to go there if you",
    "start": "2672920",
    "end": "2680839"
  },
  {
    "text": "look at there's multiple hooks you know U you can there's hooks under the lowest level is",
    "start": "2680839",
    "end": "2688839"
  },
  {
    "text": "XDP okay from there there's hooks that goes to traffic control and there's all",
    "start": "2688839",
    "end": "2694480"
  },
  {
    "text": "the way up some some BP have Co code that can watch for CIS calls who knows",
    "start": "2694480",
    "end": "2700200"
  },
  {
    "text": "here what's XDP or heard of before okay couple ones all right XDP you can think",
    "start": "2700200",
    "end": "2706960"
  },
  {
    "text": "about it as a way like it's called Express data path it's an eppf you know it's an ebpf that allows",
    "start": "2706960",
    "end": "2714880"
  },
  {
    "text": "you to basically like connect to the lowest",
    "start": "2714880",
    "end": "2720079"
  },
  {
    "text": "level level of your networking okay very very low level the the thing because it's",
    "start": "2720079",
    "end": "2726720"
  },
  {
    "text": "lowlevel it is doesn't have much access to a lot of the data of the traffic but",
    "start": "2726720",
    "end": "2733480"
  },
  {
    "text": "it's very fast this is kind of the the down the pros and cons the XDP allows us",
    "start": "2733480",
    "end": "2739160"
  },
  {
    "text": "to do traffic shifting fast rewriting a full packet like for example I want to",
    "start": "2739160",
    "end": "2744280"
  },
  {
    "text": "load balance from from different points uh I want to detect anomalies super fast",
    "start": "2744280",
    "end": "2750240"
  },
  {
    "text": "uh I want to restrict traffic very fast you know I I want to build like let's say um uh firewalls or someone XDP is",
    "start": "2750240",
    "end": "2758640"
  },
  {
    "text": "very good for that TC is a little bit up the stack it's actually have more data",
    "start": "2758640",
    "end": "2765559"
  },
  {
    "text": "around the packets so you can do you know packets mingling we can change ports we can you know change the queue",
    "start": "2765559",
    "end": "2771440"
  },
  {
    "text": "we can there's different things that we can do at the at the TC level if you look at psyllium actually pelium uses",
    "start": "2771440",
    "end": "2779079"
  },
  {
    "text": "both soan would use certain parts of the of the system in you know using TC for",
    "start": "2779079",
    "end": "2786079"
  },
  {
    "text": "control of like probably especially routing on on erass because TC can be routed routing on on on on erass where",
    "start": "2786079",
    "end": "2794000"
  },
  {
    "text": "where XDP can only be on ing Ingress XDP allow you to kind of do you know load",
    "start": "2794000",
    "end": "2800400"
  },
  {
    "text": "balancing again at low level in comparison if you use celium using",
    "start": "2800400",
    "end": "2809559"
  },
  {
    "text": "XDP here here's a you know an interesting diagram I got from the celium documentation where where it",
    "start": "2809559",
    "end": "2816040"
  },
  {
    "text": "shows you that if you use celium with XDP the amount of free data like free",
    "start": "2816040",
    "end": "2822920"
  },
  {
    "text": "CPU is huge compared to like the basic CU proxy that is basically saying that",
    "start": "2822920",
    "end": "2829839"
  },
  {
    "text": "using XDP is way faster more efficient in term of like processing of the",
    "start": "2829839",
    "end": "2836160"
  },
  {
    "text": "traffic so let's go back to my uh environment fast and see if I can catch",
    "start": "2836160",
    "end": "2842920"
  },
  {
    "text": "up with you guys so uh go here I'm going to create",
    "start": "2842920",
    "end": "2849960"
  },
  {
    "text": "my right hopefully this time works I'm going to create my",
    "start": "2850640",
    "end": "2858160"
  },
  {
    "text": "environment taking time here great",
    "start": "2858280",
    "end": "2865720"
  },
  {
    "text": "okay there you go now I'm going to connect my my my uh Cube",
    "start": "2867160",
    "end": "2873839"
  },
  {
    "text": "config I'm going to skip straight to the final version which is",
    "start": "2873839",
    "end": "2880720"
  },
  {
    "text": "Dell I'm going to create my EPF",
    "start": "2880720",
    "end": "2887760"
  },
  {
    "text": "configuration uh sorry my uh my cni plugin configuration I'm going to deploy",
    "start": "2888000",
    "end": "2893079"
  },
  {
    "text": "certain data like certain application ent ent into the node for master so I",
    "start": "2893079",
    "end": "2898680"
  },
  {
    "text": "can schedule things on it and then I'm going to move my uh I'm going to move my cni",
    "start": "2898680",
    "end": "2906760"
  },
  {
    "text": "configuration",
    "start": "2906760",
    "end": "2909359"
  },
  {
    "text": "here there you go container creating woo I don't know what did last time with you didn't",
    "start": "2912960",
    "end": "2919318"
  },
  {
    "text": "work all right I don't know like sometimes you do",
    "start": "2919640",
    "end": "2925040"
  },
  {
    "text": "that thousand times before it works you have to do it in front of people breaks",
    "start": "2925040",
    "end": "2931480"
  },
  {
    "text": "right I guess that's the deal all right um okay okay so all the pods are running",
    "start": "2931480",
    "end": "2937160"
  },
  {
    "text": "amazing so I can go to basically take a look at the configuration um so yeah if",
    "start": "2937160",
    "end": "2945880"
  },
  {
    "text": "I I do an exact if I do a curl I'm getting result from HTTP bin so",
    "start": "2945880",
    "end": "2951280"
  },
  {
    "text": "basically this sleep pod this sleep pod think about as the client and HTTP b as",
    "start": "2951280",
    "end": "2957359"
  },
  {
    "text": "being the server so it's just to simulate client server connectivity awesome there you go good",
    "start": "2957359",
    "end": "2964000"
  },
  {
    "text": "let's keep going so let's go back to the slides quickly just to explain what we're going to do in The Next",
    "start": "2964000",
    "end": "2971440"
  },
  {
    "text": "Step here's what we're going to do so we created our Bridge plugin",
    "start": "2971440",
    "end": "2977480"
  },
  {
    "text": "also now what we want to do every time we're going to create the V8 pair and",
    "start": "2977480",
    "end": "2983319"
  },
  {
    "text": "every time we're going to create the interface in our container we want to plug in an next like an ebpf code that's",
    "start": "2983319",
    "end": "2992559"
  },
  {
    "text": "it that's the goal for this first exercise let's write our first",
    "start": "2992559",
    "end": "2998359"
  },
  {
    "text": "ebpf code very simple so in our",
    "start": "2998359",
    "end": "3004920"
  },
  {
    "text": "case again we're going to attach every single time eppf at every single interface we",
    "start": "3004920",
    "end": "3011559"
  },
  {
    "text": "create let's go back to our",
    "start": "3011559",
    "end": "3016799"
  },
  {
    "text": "environments let's get started here so let's take a look at a very",
    "start": "3019400",
    "end": "3028240"
  },
  {
    "text": "basic BPF code you can open the editor here and let's go through it in this",
    "start": "3028240",
    "end": "3036160"
  },
  {
    "text": "example in my in all this Workshop I'm using XDP we could have been using TC",
    "start": "3036160",
    "end": "3042240"
  },
  {
    "text": "because more related but I XDP too but XDP the the good thing here is that",
    "start": "3042240",
    "end": "3048599"
  },
  {
    "text": "is very simple you can actually go uh online there's a lot of XDP",
    "start": "3048599",
    "end": "3056079"
  },
  {
    "text": "uh information you know there's a lot of tutorials I can give you Links at the end of this Workshop to go and learn",
    "start": "3056079",
    "end": "3061839"
  },
  {
    "text": "more about it so I think XDP is the right technology to first play with with ebf in the networking",
    "start": "3061839",
    "end": "3069319"
  },
  {
    "text": "space so here's the code that we are going to create you know ignore the includes that",
    "start": "3069319",
    "end": "3076400"
  },
  {
    "text": "actually we're using this Library called lib BPF that allows us to you know you",
    "start": "3076400",
    "end": "3082160"
  },
  {
    "text": "know write our BPF code but the main thing that we need to be you know watching for is",
    "start": "3082160",
    "end": "3088680"
  },
  {
    "text": "so this the section in our case we are putting XDP the section is defining",
    "start": "3088680",
    "end": "3095280"
  },
  {
    "text": "which kind of hook we are looking for okay so in this case the section is saying well we are going to trigger this",
    "start": "3095280",
    "end": "3103280"
  },
  {
    "text": "on XDP on the XDP hook in our Network stack then every time we we get there",
    "start": "3103280",
    "end": "3110960"
  },
  {
    "text": "we're going to process this method here called process xtp you can call it whatever it doesn't matter the name here",
    "start": "3110960",
    "end": "3117000"
  },
  {
    "text": "doesn't really matter I think the section matters more and then every time again I talked about the fact that every",
    "start": "3117000",
    "end": "3123319"
  },
  {
    "text": "layer has different like more information and since it's very low",
    "start": "3123319",
    "end": "3128680"
  },
  {
    "text": "level in in XDP we have we have access to this structure called X",
    "start": "3128680",
    "end": "3136000"
  },
  {
    "text": "dpmd so what we are going to do is straightforward the first step is we're",
    "start": "3136000",
    "end": "3142359"
  },
  {
    "text": "going to get the data so every time the packets go through this V8 virtual like",
    "start": "3142359",
    "end": "3148520"
  },
  {
    "text": "every time we we capture this packet we are going to do a couple things so we capture the data which is the packets",
    "start": "3148520",
    "end": "3155319"
  },
  {
    "text": "we're going to capture the beginning and the end right then we're going to try to",
    "start": "3155319",
    "end": "3160480"
  },
  {
    "text": "parse this data as if it's like an Ethernet you know",
    "start": "3160480",
    "end": "3166319"
  },
  {
    "text": "packet we're going to make sure that basically the data itself is not bigger",
    "start": "3166319",
    "end": "3174280"
  },
  {
    "text": "than the ethernet packet basically if that happens that means that's that's a",
    "start": "3174280",
    "end": "3179400"
  },
  {
    "text": "bad packet that's actually something you don't need on your system that's the first filtering basically you are filtering bad traffic going through your",
    "start": "3179400",
    "end": "3186760"
  },
  {
    "text": "services that's what we're doing here XDP report abort the way XDP the way it",
    "start": "3186760",
    "end": "3193280"
  },
  {
    "text": "works there is codes for everything if you return a certain value it instruct",
    "start": "3193280",
    "end": "3200000"
  },
  {
    "text": "the XDP code or abpf code to do something in our case here XDP board",
    "start": "3200000",
    "end": "3206280"
  },
  {
    "text": "just you know stops like it doesn't process this it doesn't process this",
    "start": "3206280",
    "end": "3211960"
  },
  {
    "text": "this code it's not going to filter out it's just going to not run on this on this particular",
    "start": "3211960",
    "end": "3218040"
  },
  {
    "text": "code then the second the second thing is we going to check actually if this is",
    "start": "3218040",
    "end": "3224240"
  },
  {
    "text": "like an Ethernet you know IP ipv4 code like we're looking for an ipv4",
    "start": "3224240",
    "end": "3231920"
  },
  {
    "text": "structure and for that using you know we just checking the Proto on our on our code",
    "start": "3231920",
    "end": "3238760"
  },
  {
    "text": "and saying well does it match there's a predefined Proto for uh you know value for for a an ipv4 uh packets we're going",
    "start": "3238760",
    "end": "3248000"
  },
  {
    "text": "to check that okay that's good if that's a packet that is ib4 then if not ib4",
    "start": "3248000",
    "end": "3254640"
  },
  {
    "text": "then just pass xdb pass says it means just like follow don't do anything right",
    "start": "3254640",
    "end": "3260640"
  },
  {
    "text": "we don't need to do anything right now just forward this packets not I don't have to deal with it now if it's if it's",
    "start": "3260640",
    "end": "3268599"
  },
  {
    "text": "actually an ipv4 packet then we can get more data and we we here we forwarding",
    "start": "3268599",
    "end": "3274480"
  },
  {
    "text": "to we we are actually going to parse it into an ipv4 structure right as part of",
    "start": "3274480",
    "end": "3282200"
  },
  {
    "text": "this ipv4 structure first we're going to check hey is it actually an ipv4 structure here right if it's not so if",
    "start": "3282200",
    "end": "3288799"
  },
  {
    "text": "it's the size of it is too big then well again two I don't have to run XDP in",
    "start": "3288799",
    "end": "3294839"
  },
  {
    "text": "this case a board but now again if it's actually a",
    "start": "3294839",
    "end": "3300040"
  },
  {
    "text": "valid packet an i ipv4 packet that we pars it correctly okay so now I have",
    "start": "3300040",
    "end": "3305480"
  },
  {
    "text": "access to the source and and destination address all the things that get that comes with the ib4 structure so what I",
    "start": "3305480",
    "end": "3312559"
  },
  {
    "text": "can do look I can print in the kernel right that's the thing here we're",
    "start": "3312559",
    "end": "3318359"
  },
  {
    "text": "printing under kernel the source and the destination address we're going to say hey I got a packet",
    "start": "3318359",
    "end": "3325680"
  },
  {
    "text": "from this address and I get the this packet is going to this address and let's print that again on the Kernel",
    "start": "3325680",
    "end": "3333839"
  },
  {
    "text": "side and that's it let's actually run this code let's go back to the",
    "start": "3333839",
    "end": "3340720"
  },
  {
    "text": "terminal let's actually just uh pull the dependency which is Li BPF in our case",
    "start": "3340720",
    "end": "3348160"
  },
  {
    "text": "and then let's actually build this binary we're building this binary using",
    "start": "3348160",
    "end": "3353599"
  },
  {
    "text": "cang and just actually our our C builder in this case it's it built it into a BPF",
    "start": "3353599",
    "end": "3358960"
  },
  {
    "text": "code okay at this point we have our first BPF code compiled we good let's",
    "start": "3358960",
    "end": "3365079"
  },
  {
    "text": "actually now use it on our interface what to do this we we actually",
    "start": "3365079",
    "end": "3372359"
  },
  {
    "text": "need to load we have to load a specific BPF",
    "start": "3372359",
    "end": "3377760"
  },
  {
    "text": "program the binary that got outputed for the previous command is now loaded under",
    "start": "3377760",
    "end": "3383119"
  },
  {
    "text": "CIS FS BPF BPF cni okay so again at this point I have",
    "start": "3383119",
    "end": "3391280"
  },
  {
    "text": "some EPF code that can be used I haven't done the wiring in my cni to every time",
    "start": "3391280",
    "end": "3396559"
  },
  {
    "text": "I create an interface attached this code to it not yet we're going to do this in",
    "start": "3396559",
    "end": "3401599"
  },
  {
    "text": "this section so let's run this command let's get to the editor to take",
    "start": "3401599",
    "end": "3409520"
  },
  {
    "text": "a look at what we did no sorry on the editor tab which is a cni plugin do some",
    "start": "3409520",
    "end": "3415680"
  },
  {
    "text": "refresh it's the exact same code as earlier the only difference the only difference is here",
    "start": "3415680",
    "end": "3423200"
  },
  {
    "text": "is after I actually output my result I'm saying okay everything is good well actually wait a second before we finish",
    "start": "3423200",
    "end": "3429960"
  },
  {
    "text": "this let's actually attach this BPF code that I just loaded and we are using BPF",
    "start": "3429960",
    "end": "3436200"
  },
  {
    "text": "tool net attach XDP on the inter like on the interface interface sorry we just",
    "start": "3436200",
    "end": "3442880"
  },
  {
    "text": "created okay this command here is is basically saying run this xcp code every",
    "start": "3442880",
    "end": "3448520"
  },
  {
    "text": "on every packet that goes through this interface the network interface we created for the networking in our part",
    "start": "3448520",
    "end": "3455680"
  },
  {
    "text": "again it it seems maybe complicated but it's very straightforward we wrote some",
    "start": "3455680",
    "end": "3461240"
  },
  {
    "text": "code we built it we loaded it and then we attached it to a specific interface",
    "start": "3461240",
    "end": "3467920"
  },
  {
    "text": "in this case I'm using BPF tool for this but again if you want to do this in a",
    "start": "3467920",
    "end": "3473599"
  },
  {
    "text": "real scenario and for example cium the way they do it in other projects there's different loaders there's actually some",
    "start": "3473599",
    "end": "3480640"
  },
  {
    "text": "code you can write it in go for example that grabs you know going to grab this",
    "start": "3480640",
    "end": "3485760"
  },
  {
    "text": "this BPF code and attach it to a certain interface you know Ingo instead of like",
    "start": "3485760",
    "end": "3490880"
  },
  {
    "text": "using a CLI like I'm doing CLI here is just for simplifying things awesome so now I modified my cni",
    "start": "3490880",
    "end": "3498240"
  },
  {
    "text": "code that's great so what I'm going to do is I'm going",
    "start": "3498240",
    "end": "3503559"
  },
  {
    "text": "to yeah yes I'm going to basically update you know I'm moving",
    "start": "3503559",
    "end": "3511160"
  },
  {
    "text": "this cni code to opt cni bin again when we have the cni Privacy I'm overwriting",
    "start": "3511160",
    "end": "3516960"
  },
  {
    "text": "the old code and let's just delete the part we're going to delete the Pod just",
    "start": "3516960",
    "end": "3522319"
  },
  {
    "text": "to force the uh Recreation of the the the new network",
    "start": "3522319",
    "end": "3529880"
  },
  {
    "text": "interfaces uh the new pods with the cni code uh cni plug-in code attached to",
    "start": "3529880",
    "end": "3537359"
  },
  {
    "text": "it so okay my two pods are now up and running which is awesome so if I run",
    "start": "3537359",
    "end": "3543720"
  },
  {
    "text": "let's say I'm going to run some some traffic there you go so I'm making a",
    "start": "3543720",
    "end": "3548920"
  },
  {
    "text": "curl what you guys thing would happen now now that I run the code the package",
    "start": "3548920",
    "end": "3555799"
  },
  {
    "text": "went through the V8 my XDP code got executed and I should have logs now in",
    "start": "3555799",
    "end": "3561240"
  },
  {
    "text": "the kernel that shows that this packet got processed let's take a",
    "start": "3561240",
    "end": "3567039"
  },
  {
    "text": "look we are reading the kernel logs there you go we see",
    "start": "3567039",
    "end": "3574520"
  },
  {
    "text": "curl got packet from something to something okay there you go our first",
    "start": "3574520",
    "end": "3582760"
  },
  {
    "text": "ebpf code it just printed something it it just got automatically using our cni",
    "start": "3582760",
    "end": "3589480"
  },
  {
    "text": "we not only created all the networking things all the networking component for the the plugin for sorry for the the Pod",
    "start": "3589480",
    "end": "3596400"
  },
  {
    "text": "to be wired correctly so we can interact with it but we also loaded an XDP code",
    "start": "3596400",
    "end": "3601839"
  },
  {
    "text": "for us to do stuff on it right we haven't done yet nothing we just L logged some some uh the the the the",
    "start": "3601839",
    "end": "3608680"
  },
  {
    "text": "source in the destination address but now let's do some interesting things all right so the next section the",
    "start": "3608680",
    "end": "3616760"
  },
  {
    "text": "next exercise is to use appf for different scenarios APF again can be used for",
    "start": "3616760",
    "end": "3624680"
  },
  {
    "text": "multiple things the main three things that we can think about in networking is",
    "start": "3624680",
    "end": "3630920"
  },
  {
    "text": "ebpf can be used for monitoring so you can have like metrics and and and stats",
    "start": "3630920",
    "end": "3636720"
  },
  {
    "text": "around your traffic it can be used for security so",
    "start": "3636720",
    "end": "3642000"
  },
  {
    "text": "to block you know calls that you don't want or traffic from A to B you know without",
    "start": "3642000",
    "end": "3649480"
  },
  {
    "text": "you know interrupting basically packet that are not meant to be sent to from A to B for example and the the third",
    "start": "3649480",
    "end": "3655280"
  },
  {
    "text": "aspect or or rate limiting actually or a lot of controls basically can do in security and the third aspect is routing",
    "start": "3655280",
    "end": "3663039"
  },
  {
    "text": "routing for example in in celium I showed you you know the data earlier celium use it as a replacement of cube",
    "start": "3663039",
    "end": "3670359"
  },
  {
    "text": "proxy you don't need actually to use ipvs or I you know IP tables for routing",
    "start": "3670359",
    "end": "3677440"
  },
  {
    "text": "IP tables being they got created for firewalling not actually for traffic routing you can use e EF and xtp in this",
    "start": "3677440",
    "end": "3684640"
  },
  {
    "text": "case to get way faster uh traffic routing in our example in today's",
    "start": "3684640",
    "end": "3689799"
  },
  {
    "text": "Workshop we're going to probably focus on the two things monitoring and we're going to focus",
    "start": "3689799",
    "end": "3695480"
  },
  {
    "text": "on um security like a small example so before we start talking about",
    "start": "3695480",
    "end": "3703880"
  },
  {
    "text": "before we start talking about montoring in details actually something we haven't talked about yet",
    "start": "3703880",
    "end": "3710279"
  },
  {
    "text": "is the the um you know I talked about appf running in the sandbox in the",
    "start": "3710279",
    "end": "3716760"
  },
  {
    "text": "kernel code but you cannot get data out of that you know kernel is basically an",
    "start": "3716760",
    "end": "3724039"
  },
  {
    "text": "isolation in our system there's no way to interact directly to get metrics or",
    "start": "3724039",
    "end": "3729880"
  },
  {
    "text": "whatever in our user space user space is basically everything you run on on on on",
    "start": "3729880",
    "end": "3735319"
  },
  {
    "text": "your node everything you create that's user space now a user Space Program cannot",
    "start": "3735319",
    "end": "3742319"
  },
  {
    "text": "interact directly with a kernel Space Program they the way they interact they the way",
    "start": "3742319",
    "end": "3747799"
  },
  {
    "text": "they interact and interchange data is to use what we call a BPF map a BPF map",
    "start": "3747799",
    "end": "3755160"
  },
  {
    "text": "like it says here it's just a map a certain type of map you can do like a ring buffer for streaming data you can",
    "start": "3755160",
    "end": "3762039"
  },
  {
    "text": "do hashmaps for key value storage you can do arrays for just like saving",
    "start": "3762039",
    "end": "3767599"
  },
  {
    "text": "random number of things basically you define a map and then now the kernel",
    "start": "3767599",
    "end": "3772680"
  },
  {
    "text": "space the ebpf program that we wrote can write to that can write to that map and actually the user space program can also",
    "start": "3772680",
    "end": "3779319"
  },
  {
    "text": "write to that map read right in both Direction the user space program can read and right to the map and same thing",
    "start": "3779319",
    "end": "3785760"
  },
  {
    "text": "for the kernel space program so what we are going to do in the next",
    "start": "3785760",
    "end": "3791799"
  },
  {
    "text": "exercise we created already our BPF code we just demoed a log to the",
    "start": "3791799",
    "end": "3798079"
  },
  {
    "text": "kernel now let's do something a bit more interesting what we are going to do is",
    "start": "3798079",
    "end": "3803920"
  },
  {
    "text": "couple steps we're going to capture the traffic I mean we did that earlier same",
    "start": "3803920",
    "end": "3809000"
  },
  {
    "text": "thing we are going to basically write",
    "start": "3809000",
    "end": "3814200"
  },
  {
    "text": "write uh the number of packets that we receive from a certain Source in the map",
    "start": "3814200",
    "end": "3819480"
  },
  {
    "text": "we're going to create basically a map first before all that but then we're going to create the number of packets we",
    "start": "3819480",
    "end": "3824760"
  },
  {
    "text": "receive from a certain Source in a map and then we're going to use what we call user Space Program to go and read a",
    "start": "3824760",
    "end": "3832000"
  },
  {
    "text": "certain map and expose that as metrics that we can see in",
    "start": "3832000",
    "end": "3837480"
  },
  {
    "text": "Prometheus okay that's basically full cycle around monitoring and all that need to be",
    "start": "3837480",
    "end": "3843720"
  },
  {
    "text": "loaded using our cni so let's go let's do it um so the first step",
    "start": "3843720",
    "end": "3851920"
  },
  {
    "text": "here click on next all",
    "start": "3851920",
    "end": "3858680"
  },
  {
    "text": "right man who's tired here",
    "start": "3858680",
    "end": "3864760"
  },
  {
    "text": "oh I mean 5:30 in the afternoon I get you all right",
    "start": "3864760",
    "end": "3869920"
  },
  {
    "text": "so let's create the map the map is pretty straightforward",
    "start": "3869920",
    "end": "3877000"
  },
  {
    "text": "what we have to do is Define a structure in a certain way to find the values we need to store in and label it a certain",
    "start": "3877000",
    "end": "3883520"
  },
  {
    "text": "way and that basically what's creates a map so in our case",
    "start": "3883520",
    "end": "3889319"
  },
  {
    "text": "here we go back to the editor take a look at add the",
    "start": "3889319",
    "end": "3895400"
  },
  {
    "text": "code there you go this is the new code of basically the monitoring so what we",
    "start": "3895400",
    "end": "3900839"
  },
  {
    "text": "do first is defining the structure that is basically defining the key value and",
    "start": "3900839",
    "end": "3906599"
  },
  {
    "text": "we give it a name we call that counter that's our map name it's called counter",
    "start": "3906599",
    "end": "3912160"
  },
  {
    "text": "okay we Define that is basically storing a key size of u32 and a value size of",
    "start": "3912160",
    "end": "3921279"
  },
  {
    "text": "u64 that's it think about it as a hashmap has a key value pair where the key is a",
    "start": "3921279",
    "end": "3928319"
  },
  {
    "text": "certain size the value is a certain size very simple now same thing as all our code",
    "start": "3928319",
    "end": "3935640"
  },
  {
    "text": "from earlier so we don't really care about this the only thing actually we care about is after now at this point",
    "start": "3935640",
    "end": "3942520"
  },
  {
    "text": "since we actually have the source address of a packet let's put that in the value and call that Source IP key so",
    "start": "3942520",
    "end": "3949880"
  },
  {
    "text": "the key is the source of a certain packet so the the IP address of a",
    "start": "3949880",
    "end": "3955160"
  },
  {
    "text": "certain packet and every time we basically we're",
    "start": "3955160",
    "end": "3960880"
  },
  {
    "text": "going to do we're going to run this this uh method here that comes with Le BPF again I'm using like this Library called",
    "start": "3960880",
    "end": "3967240"
  },
  {
    "text": "libpf that going to give us access to the map so you can just call uh the BPF",
    "start": "3967240",
    "end": "3972839"
  },
  {
    "text": "map and look for the key if this key which is the source address",
    "start": "3972839",
    "end": "3978640"
  },
  {
    "text": "exists just increment it just say okay well I got one more packet another packet every time I see the key",
    "start": "3978640",
    "end": "3985200"
  },
  {
    "text": "increment the key increment the value if it doesn't actually exist well I'll just say hey I received my first packet right",
    "start": "3985200",
    "end": "3992720"
  },
  {
    "text": "again if else very basic here and then we do return XDP pass which mean which",
    "start": "3992720",
    "end": "3998240"
  },
  {
    "text": "means forward this packet Let it go Let Let it continue on the networking here",
    "start": "3998240",
    "end": "4003839"
  },
  {
    "text": "so we're going to do the same exact step we did earlier so we're going to build",
    "start": "4003839",
    "end": "4010119"
  },
  {
    "text": "our we're going to build our um yeah so we built our uh BPF code and then we",
    "start": "4010359",
    "end": "4020079"
  },
  {
    "text": "loaded it again so we kind of did a Reload here and we don't have to modify our cni because it's actually pointing",
    "start": "4020079",
    "end": "4027400"
  },
  {
    "text": "the same value SL CIS FS BPF EF cni all right so let's delete the parts",
    "start": "4027400",
    "end": "4037200"
  },
  {
    "text": "just for us to force them to restart with this new code we just",
    "start": "4037200",
    "end": "4042920"
  },
  {
    "text": "created take about second here to to uh to create the new PA for us and I'm going",
    "start": "4042920",
    "end": "4049760"
  },
  {
    "text": "to see what happens all right so the T pods being recreated now let's send",
    "start": "4049760",
    "end": "4055039"
  },
  {
    "text": "let's send a packet let's send some traffic so we do going to do a curl call",
    "start": "4055039",
    "end": "4060640"
  },
  {
    "text": "from the sleep pod to the uh HTTP bin part there you go I got I'm getting some",
    "start": "4060640",
    "end": "4067359"
  },
  {
    "text": "results I can run this couple times it doesn't really matter oops I actually deleted my my pods but yeah I have to",
    "start": "4067359",
    "end": "4074599"
  },
  {
    "text": "um oops where's my",
    "start": "4074599",
    "end": "4080119"
  },
  {
    "text": "curl yeah so let's do this right I'm getting some returned now",
    "start": "4080720",
    "end": "4090240"
  },
  {
    "text": "if I use this BPF tool map that's going to dump the values under the counter",
    "start": "4090240",
    "end": "4095520"
  },
  {
    "text": "again I created the map I called it counter okay so it's automatically now loaded if I run this this",
    "start": "4095520",
    "end": "4101560"
  },
  {
    "text": "command there you go I seen now two elements two values in my BPF in my in",
    "start": "4101560",
    "end": "4109798"
  },
  {
    "text": "my BPF map so every time I'm running some traffic within my V8 pair now a",
    "start": "4109799",
    "end": "4115440"
  },
  {
    "text": "certain value is getting incremented in my counter you saw the power here basically we did pretty much nothing to",
    "start": "4115440",
    "end": "4122600"
  },
  {
    "text": "get certain metrics out of ebpf actually now let's use what we call",
    "start": "4122600",
    "end": "4130640"
  },
  {
    "text": "a user space program right user Space Program again is is a way for us to",
    "start": "4130640",
    "end": "4135758"
  },
  {
    "text": "interact with ebpf we are going to use this cool project I found online called EF",
    "start": "4135759",
    "end": "4143798"
  },
  {
    "text": "exporter right it's um it's it's it's on on GitHub it allows us to automatically",
    "start": "4143799",
    "end": "4149960"
  },
  {
    "text": "go and read an ebpf map we don't have to write any code so this is running so if I do this",
    "start": "4149960",
    "end": "4156798"
  },
  {
    "text": "curl Local Host there you go see that now",
    "start": "4156799",
    "end": "4162120"
  },
  {
    "text": "automatically now I have preus metrix that is representing the BPF code the",
    "start": "4162120",
    "end": "4169159"
  },
  {
    "text": "the BPF metrix as as Prometheus metrix and actually I can even use uh you know",
    "start": "4169159",
    "end": "4174758"
  },
  {
    "text": "Prometheus here to capture that there you go and if I restart",
    "start": "4174759",
    "end": "4183599"
  },
  {
    "text": "Prometheus now if I go to Prometheus",
    "start": "4183960",
    "end": "4189159"
  },
  {
    "text": "right let's take a look at what we have",
    "start": "4189159",
    "end": "4195719"
  },
  {
    "text": "now we can do let's see",
    "start": "4195920",
    "end": "4205080"
  },
  {
    "text": "counter let's see what we have",
    "start": "4206719",
    "end": "4210640"
  },
  {
    "text": "here uh I think it's",
    "start": "4212920",
    "end": "4218040"
  },
  {
    "text": "called do you see",
    "start": "4222640",
    "end": "4227400"
  },
  {
    "text": "it",
    "start": "4230400",
    "end": "4233400"
  },
  {
    "text": "oh you put the metric name",
    "start": "4235679",
    "end": "4239600"
  },
  {
    "text": "here oh oh okay I do things right sometimes I just don't",
    "start": "4244800",
    "end": "4251760"
  },
  {
    "text": "realize it just that okay great so you see here",
    "start": "4252640",
    "end": "4258239"
  },
  {
    "text": "we have the two metrics coming back and awesome so here if we do like under I",
    "start": "4258239",
    "end": "4263480"
  },
  {
    "text": "don't know like five minutes and take a look look you see that we build a cni",
    "start": "4263480",
    "end": "4271080"
  },
  {
    "text": "plugin and we built some EPF code that go and count packets automatically load",
    "start": "4271080",
    "end": "4276239"
  },
  {
    "text": "that and now we can see that on on in primeus we did that in you know let's",
    "start": "4276239",
    "end": "4281760"
  },
  {
    "text": "say session so basically B on EF with ef we can do things very",
    "start": "4281760",
    "end": "4289320"
  },
  {
    "text": "low level super fast you can think about that think about things you can do here okay here it was a very basic example",
    "start": "4289320",
    "end": "4296760"
  },
  {
    "text": "but now you can write a c code to do probably anything you want with the",
    "start": "4296760",
    "end": "4302159"
  },
  {
    "text": "packet and talking about anything we want let's talk about the next example so we talk about monitoring let's see",
    "start": "4302159",
    "end": "4308719"
  },
  {
    "text": "what we can do next and what we can do next is uh basically",
    "start": "4308719",
    "end": "4314239"
  },
  {
    "text": "security right so who here use Network",
    "start": "4314239",
    "end": "4321320"
  },
  {
    "text": "policies pretty much a lot of people all right Network policies is a fundamental",
    "start": "4321320",
    "end": "4326800"
  },
  {
    "text": "component of you know networking in communities it allows us to deny traffic",
    "start": "4326800",
    "end": "4333400"
  },
  {
    "text": "from A to B and do a lot of fine-tuning defining multi-tenancy and all of things",
    "start": "4333400",
    "end": "4338840"
  },
  {
    "text": "Network policies in if you want to use EPF for that you probably would use",
    "start": "4338840",
    "end": "4345880"
  },
  {
    "text": "something similar to what I'm showing right now if you want to implement that let's say from scratch and again this is a very very basic scenario so what we",
    "start": "4345880",
    "end": "4353440"
  },
  {
    "text": "are going to do for the next example is Prett straightforward we are going to first",
    "start": "4353440",
    "end": "4362199"
  },
  {
    "text": "create we're going to create our uh Network policy in kubernetes okay just a",
    "start": "4362199",
    "end": "4368760"
  },
  {
    "text": "super basic one simple uh just for for demo we're going to create a user Space",
    "start": "4368760",
    "end": "4374400"
  },
  {
    "text": "Program to kind of read this network policy and actually go and create",
    "start": "4374400",
    "end": "4379719"
  },
  {
    "text": "certain rules in like our BPF map then our",
    "start": "4379719",
    "end": "4384800"
  },
  {
    "text": "ebpf uh code on the Kernel side going to read this rules from the map and enforce",
    "start": "4384800",
    "end": "4390159"
  },
  {
    "text": "something that actually if you think about ctis and network policies enforcement using ebpf in a natural",
    "start": "4390159",
    "end": "4396800"
  },
  {
    "text": "that's how it works I know this is very much simplifying a lot but yeah you have a process they going to watch for cumen",
    "start": "4396800",
    "end": "4403800"
  },
  {
    "text": "this uh policies it's going to transform it into Data that can be pushed into a",
    "start": "4403800",
    "end": "4409199"
  },
  {
    "text": "BPF map on the other side you have an EPF code that reads from this map and enforce the the policy so let's do it",
    "start": "4409199",
    "end": "4417760"
  },
  {
    "text": "let's see how this would work in cunes or actually in our example",
    "start": "4417760",
    "end": "4423560"
  },
  {
    "text": "here so all right let's keep going here let's get to our example click on",
    "start": "4423560",
    "end": "4431560"
  },
  {
    "text": "next all right let's start so for this example we are",
    "start": "4432360",
    "end": "4439440"
  },
  {
    "text": "defining a new map we calling that IP rules it's very straightforward we're",
    "start": "4439440",
    "end": "4446159"
  },
  {
    "text": "actually putting the kind of you know a key pair that's the the bit more",
    "start": "4446159",
    "end": "4451840"
  },
  {
    "text": "complicated thing as a key it's not like a straightforward like we're not using a a direct like int value or something",
    "start": "4451840",
    "end": "4458080"
  },
  {
    "text": "we're using it in a pair Source destination so if we see this source and destination that's going to be the key",
    "start": "4458080",
    "end": "4464560"
  },
  {
    "text": "the value going to be a Boolean like just zero or one and every time we see this key Source destination with value",
    "start": "4464560",
    "end": "4472280"
  },
  {
    "text": "Zer or one it will be for us if it's one allow the traffic zero stop the traffic",
    "start": "4472280",
    "end": "4478120"
  },
  {
    "text": "very simple so yeah let's keep going here and let's create our",
    "start": "4478120",
    "end": "4484880"
  },
  {
    "text": "map let's take a look at the ebpf code that we just updated and let's skip",
    "start": "4484880",
    "end": "4490880"
  },
  {
    "text": "through kind of the first whatever we talked about when we you know we talked about um a monitoring let's focus on",
    "start": "4490880",
    "end": "4498960"
  },
  {
    "text": "security so we have this section again it's a key pair Source address going to be the key the value is Boolean it just",
    "start": "4498960",
    "end": "4506120"
  },
  {
    "text": "an end is going to be zero or one now in modification of our code",
    "start": "4506120",
    "end": "4511280"
  },
  {
    "text": "scroll all the way down the same logic we use to write in the map we're going",
    "start": "4511280",
    "end": "4516480"
  },
  {
    "text": "to just read from the map actually we're going to do both what we are going to do",
    "start": "4516480",
    "end": "4521600"
  },
  {
    "text": "is we're going to say hey Define a key pair where the source address is the source address of the packets the",
    "start": "4521600",
    "end": "4528639"
  },
  {
    "text": "destination address is the destination address of a certain packet so this our key pair this our key right now and take",
    "start": "4528639",
    "end": "4536080"
  },
  {
    "text": "a look at the map if you don't see any value meaning we didn't Define any rule",
    "start": "4536080",
    "end": "4542520"
  },
  {
    "text": "put put put one say hey well that traffic is allowed put that in the map it's fine so for us we can see that from",
    "start": "4542520",
    "end": "4550199"
  },
  {
    "text": "A to B A Certain packet has been allowed now if you see",
    "start": "4550199",
    "end": "4555880"
  },
  {
    "text": "explicitly in our map that the value we defined for this kind of interaction is",
    "start": "4555880",
    "end": "4561480"
  },
  {
    "text": "zero then just drop that packet we don't want it all right let's block",
    "start": "4561480",
    "end": "4567520"
  },
  {
    "text": "that amazing that's it that's pretty much what we need to do to define a way to enforce rules between two like a",
    "start": "4567520",
    "end": "4574920"
  },
  {
    "text": "source and destination address using ebpf so let's uh get back to",
    "start": "4574920",
    "end": "4585120"
  },
  {
    "text": "here so we yeah so we we updated the code let's",
    "start": "4585120",
    "end": "4590560"
  },
  {
    "text": "build it again the same same thing we did earlier let's build this again and reload the new",
    "start": "4590560",
    "end": "4597000"
  },
  {
    "text": "code let's delete the",
    "start": "4597000",
    "end": "4600679"
  },
  {
    "text": "pods wait for them to be ready so we can keep",
    "start": "4602880",
    "end": "4608480"
  },
  {
    "text": "going take a couple seconds",
    "start": "4612080",
    "end": "4616639"
  },
  {
    "text": "here",
    "start": "4617760",
    "end": "4620760"
  },
  {
    "text": "yeah yeah I mean in this this is a very simple example but yes you can Define like you can use the map as hey well",
    "start": "4625320",
    "end": "4632080"
  },
  {
    "text": "it's our source of truth of like what should happen in my networking right in my example I'm populating like one",
    "start": "4632080",
    "end": "4639639"
  },
  {
    "text": "saying hey allow traffic for all the pods all the every time I see like a pair Source address if I if I don't have",
    "start": "4639639",
    "end": "4645679"
  },
  {
    "text": "an explicit rule put something in a map saying hey well I have one meanings like",
    "start": "4645679",
    "end": "4650760"
  },
  {
    "text": "I allowed it but if I explicitly see a zero then well that that is actually my my but then you can structure this is an",
    "start": "4650760",
    "end": "4658080"
  },
  {
    "text": "example you can structure basically your BPF map like you want it just need to map your logic that you going have to do",
    "start": "4658080",
    "end": "4664280"
  },
  {
    "text": "in your backend lot",
    "start": "4664280",
    "end": "4668760"
  },
  {
    "text": "ofing uh on XD P very very minimal because we're not we're not unpacking",
    "start": "4671239",
    "end": "4677639"
  },
  {
    "text": "it's not like we are just you know the we're just you know watching for the",
    "start": "4677639",
    "end": "4683280"
  },
  {
    "text": "structure it's not we're not we're not modifying the packet itself right like",
    "start": "4683280",
    "end": "4688400"
  },
  {
    "text": "it's it's it's mostly like you can I mean you can modify the packet itself but when you just take a look at it in our case in this all examples we didn't",
    "start": "4688400",
    "end": "4695320"
  },
  {
    "text": "do we didn't rewrite the packet we just looked at the packet and made the decision to either monitor that and in",
    "start": "4695320",
    "end": "4701840"
  },
  {
    "text": "this case we're gonna just enforce certain policy",
    "start": "4701840",
    "end": "4706079"
  },
  {
    "text": "and yes we are talking about very very XDP it's pretty much you know the packet",
    "start": "4709320",
    "end": "4715520"
  },
  {
    "text": "you don't you can see much from it up more you go up more you can see",
    "start": "4715520",
    "end": "4720880"
  },
  {
    "text": "stuff so yeah let's uh run a command here let's let's make a call and uh take",
    "start": "4720880",
    "end": "4727400"
  },
  {
    "text": "a take a look take a look at this uh map now we have a new map that we called IP rules that has source and destination",
    "start": "4727400",
    "end": "4735040"
  },
  {
    "text": "address with certain value basically we allow traffic from if you see that split like you know it's kind of the same",
    "start": "4735040",
    "end": "4741520"
  },
  {
    "text": "value like flipped that basically a request response we sent a request to from sleep po to HB bin it's a one and",
    "start": "4741520",
    "end": "4749880"
  },
  {
    "text": "from HB bin to sleep when it goes back for the response it's one to so yes let's um",
    "start": "4749880",
    "end": "4758520"
  },
  {
    "text": "actually look at now let's look at a user Space Program that can write these",
    "start": "4758520",
    "end": "4765560"
  },
  {
    "text": "rules for that I I wrote something quick for for you guys to to read and we can",
    "start": "4765560",
    "end": "4771360"
  },
  {
    "text": "open the on the editor on the user space code I already wrote this quickly just",
    "start": "4771360",
    "end": "4778560"
  },
  {
    "text": "for us to to to save time uh it's what what it does is very straightforward it's going to look for the binary of the",
    "start": "4778560",
    "end": "4785840"
  },
  {
    "text": "BBF code that we just wrote and it's going to load it we're going to skip all this but interesting is it's going to",
    "start": "4785840",
    "end": "4792159"
  },
  {
    "text": "get values from the kind of when we call we invoke that's that program with three",
    "start": "4792159",
    "end": "4797320"
  },
  {
    "text": "values we going to invoke it with the source address a source IP a destination IP in one or zero to say hey allow",
    "start": "4797320",
    "end": "4805360"
  },
  {
    "text": "traffic or not so that's it that's all we are doing",
    "start": "4805360",
    "end": "4810679"
  },
  {
    "text": "here so and if we take a look actually I already built this for a matter of time take a look at the binary I already",
    "start": "4810679",
    "end": "4819560"
  },
  {
    "text": "have it so again if we take the if if we test the traffic already that would work but",
    "start": "4819560",
    "end": "4826480"
  },
  {
    "text": "now let's actually put an explicit rule to would stop the traffic for that I'm",
    "start": "4826480",
    "end": "4832040"
  },
  {
    "text": "using the binary take a look you see IP rule this is the binary of the user space I created I'm putting the source",
    "start": "4832040",
    "end": "4839000"
  },
  {
    "text": "address is the the IP of the sleep pod the destination is the IP of HTTP bin",
    "start": "4839000",
    "end": "4846239"
  },
  {
    "text": "pod and the value I'm putting for the rule is zero meaning hey well block this",
    "start": "4846239",
    "end": "4851280"
  },
  {
    "text": "traffic let's do this this run it meaning now in our BPF map we can take a",
    "start": "4851280",
    "end": "4856600"
  },
  {
    "text": "look at the value explicitly I see a zero here so",
    "start": "4856600",
    "end": "4861840"
  },
  {
    "text": "don't let this packet go through and now if I make a call",
    "start": "4861840",
    "end": "4868400"
  },
  {
    "text": "again voila blocked no traffic between a to B",
    "start": "4868400",
    "end": "4875199"
  },
  {
    "text": "okay this is M this basically the very simple version of like how we can",
    "start": "4875199",
    "end": "4880239"
  },
  {
    "text": "enforce rules actually you know what as a fun exercise I just recreated and you",
    "start": "4880239",
    "end": "4885840"
  },
  {
    "text": "don't do that okay that's not how it should be I actually created um a bat",
    "start": "4885840",
    "end": "4893120"
  },
  {
    "text": "program that just go and pars here's the B the the The Bash program I created a",
    "start": "4893120",
    "end": "4900360"
  },
  {
    "text": "bash program that goes and basically just watch for cun Network policies you",
    "start": "4900360",
    "end": "4905440"
  },
  {
    "text": "would actually use goang and the client the cube client for that don't don't use that but in this case what I'm doing is",
    "start": "4905440",
    "end": "4911840"
  },
  {
    "text": "I'm looking for any Network policy and I'm actually taking a look at if if the",
    "start": "4911840",
    "end": "4917880"
  },
  {
    "text": "source and destination address are allowed then put an IP rule to allow the traffic if not deny all other traffic so",
    "start": "4917880",
    "end": "4926639"
  },
  {
    "text": "by default everything's blocked but if if um if this if I have a cube Network",
    "start": "4926639",
    "end": "4933199"
  },
  {
    "text": "policy that is explicitly allowing traffic from A to B then allow that",
    "start": "4933199",
    "end": "4938719"
  },
  {
    "text": "right it's very simple so if I use this code",
    "start": "4938719",
    "end": "4944120"
  },
  {
    "text": "uh I'm going to deploy this here right basically by default it's",
    "start": "4944120",
    "end": "4949560"
  },
  {
    "text": "blocking all the traffic there you go now look let's create this super basic",
    "start": "4949560",
    "end": "4954760"
  },
  {
    "text": "Network policy in communities we're defining hey the matching label actually you know the destination label in this",
    "start": "4954760",
    "end": "4961000"
  },
  {
    "text": "case is HTTP B and the source address is sleep so if",
    "start": "4961000",
    "end": "4967040"
  },
  {
    "text": "you if we execute this C this this uh this code again which is actually allow",
    "start": "4967040",
    "end": "4972760"
  },
  {
    "text": "calling from sleep to uh to HTP pin it's not working right because by default I'm",
    "start": "4972760",
    "end": "4978080"
  },
  {
    "text": "blocking all the traffic but if I go and copy my network",
    "start": "4978080",
    "end": "4983360"
  },
  {
    "text": "policy create that in communties see if that got",
    "start": "4983360",
    "end": "4991158"
  },
  {
    "text": "created there you go it got created on CST now my code is running the in you",
    "start": "4991440",
    "end": "4996600"
  },
  {
    "text": "know I'm just doing a loop of like 10 seconds so it's going to go there you go it detected the CU policy it's following",
    "start": "4996600",
    "end": "5002880"
  },
  {
    "text": "traffic now from the the the the Pod that is ending with 200 and the part that's ending with 15 which is the sleep",
    "start": "5002880",
    "end": "5009600"
  },
  {
    "text": "pod and the HTP binod and if I run the code",
    "start": "5009600",
    "end": "5015800"
  },
  {
    "text": "again there you go we just created a very tiny tiny tiny",
    "start": "5016760",
    "end": "5024239"
  },
  {
    "text": "pum right that's basically take AUM policy um create you know right right of",
    "start": "5024239",
    "end": "5031960"
  },
  {
    "text": "value in map get an ebpf code that's been attached with a cni to first to",
    "start": "5031960",
    "end": "5037320"
  },
  {
    "text": "enforce a certain security Rule and with that being said this is the end of this",
    "start": "5037320",
    "end": "5044480"
  },
  {
    "text": "Workshop I hope you guys enjoyed it there's much things to talk about [Applause]",
    "start": "5044480",
    "end": "5052360"
  },
  {
    "text": "but all right thank you again this is don't don't recreate that I want you",
    "start": "5052360",
    "end": "5057840"
  },
  {
    "text": "after this session to be able to open the hood of a car and saying this is the battery and this is the engine and",
    "start": "5057840",
    "end": "5063320"
  },
  {
    "text": "you've open like you know your C cluster and look at things like hey well this is probably a map and this is how things",
    "start": "5063320",
    "end": "5069480"
  },
  {
    "text": "are enforced okay",
    "start": "5069480",
    "end": "5073880"
  },
  {
    "text": "yeah okay great great question the question is is C the only language we",
    "start": "5078280",
    "end": "5083719"
  },
  {
    "text": "can use for to write this program unfortunately on the Kernel side it's C",
    "start": "5083719",
    "end": "5090119"
  },
  {
    "text": "you're going to have to write your code in C on the Kernel side for the user",
    "start": "5090119",
    "end": "5096560"
  },
  {
    "text": "space then you have more flexibility there's a again uh if I take I I was",
    "start": "5096560",
    "end": "5102320"
  },
  {
    "text": "going to show you actually this uh this cool project if you take a look at the celium you know the celum uh EPF",
    "start": "5102320",
    "end": "5109920"
  },
  {
    "text": "repository it has good example about like how to actually load a certain you",
    "start": "5109920",
    "end": "5115280"
  },
  {
    "text": "know load a certain example like you know K prob for example K prob will have",
    "start": "5115280",
    "end": "5121280"
  },
  {
    "text": "the the backend code and you're going to have some uh you know let's say user",
    "start": "5121280",
    "end": "5126800"
  },
  {
    "text": "space code Li BPF 2 rust can be an option there is certain technologies",
    "start": "5126800",
    "end": "5132400"
  },
  {
    "text": "that now is kind of doing working on B what we call binding right on user space",
    "start": "5132400",
    "end": "5137760"
  },
  {
    "text": "but the back end it's still it's still going to be C like a I mean kernel",
    "start": "5137760",
    "end": "5145320"
  },
  {
    "text": "yeah yes a rust in on the user space I mean I'm pretty sure",
    "start": "5146360",
    "end": "5154239"
  },
  {
    "text": "that's not something I I I'm I'm 100% sure that you know let's take a look at libpf actually look if you go to uh BPF",
    "start": "5154239",
    "end": "5162560"
  },
  {
    "text": "the BPF bootstrap it has good examples if you go example here you can take a look there's a rust repo that to give",
    "start": "5162560",
    "end": "5168960"
  },
  {
    "text": "you a couple couple things let's take a look at XDP so yeah actually BPF no I think the",
    "start": "5168960",
    "end": "5176480"
  },
  {
    "text": "BPF itself was written in C right but I think the loading was in Rust I I think",
    "start": "5176480",
    "end": "5182400"
  },
  {
    "text": "that's where it is um in the kernel space do you have to",
    "start": "5182400",
    "end": "5187960"
  },
  {
    "text": "worry about normal like concurrency constructs and stuff like that cuz when you're doing the incrementing there's",
    "start": "5187960",
    "end": "5193040"
  },
  {
    "text": "yeah yeah I mean you you you should you should probably there is I mean again I didn't like very much double like you",
    "start": "5193040",
    "end": "5198760"
  },
  {
    "text": "know talk too much on on a BPF Map There's BPF map that are very much isolated by per by CPU and and so on so",
    "start": "5198760",
    "end": "5205880"
  },
  {
    "text": "you can Define you know when you're writing any resource obviously curency is a is a it may be a problem but",
    "start": "5205880",
    "end": "5213239"
  },
  {
    "text": "um most of the time you just need to design the right the right thing so if if you're writing if you're",
    "start": "5213239",
    "end": "5220480"
  },
  {
    "text": "writing a map just try to figure out the right use case for for for you if like something that is very much segregated",
    "start": "5220480",
    "end": "5226119"
  },
  {
    "text": "for a node for example to like limit like the interaction between multiple users it can be an option but yeah I",
    "start": "5226119",
    "end": "5232040"
  },
  {
    "text": "think that's something that you still have to worry about but is uh but you know if you look at look if you look at",
    "start": "5232040",
    "end": "5238119"
  },
  {
    "text": "Li BPF and you look any lot of projects there's a lot of like it's emerging there's a lot of new new",
    "start": "5238119",
    "end": "5245040"
  },
  {
    "text": "code new technology that kind of simplify life for you like when you write a specific code um I didn't talk",
    "start": "5245040",
    "end": "5252560"
  },
  {
    "text": "about much but ebpf is very strict very strict you cannot just go and create any",
    "start": "5252560",
    "end": "5258199"
  },
  {
    "text": "c code once it's it detects that you are going to you know write something out of range or do something that is should not",
    "start": "5258199",
    "end": "5265639"
  },
  {
    "text": "be doing it's not going to allow you to even build this or if it builds it it doesn't allow you to to mount it so I",
    "start": "5265639",
    "end": "5272520"
  },
  {
    "text": "think you have a lot of controls there and if you look at the BPF code look at BPF tools it helps you like answer these",
    "start": "5272520",
    "end": "5278760"
  },
  {
    "text": "questions you have any other",
    "start": "5278760",
    "end": "5286199"
  },
  {
    "text": "question",
    "start": "5289520",
    "end": "5292520"
  },
  {
    "text": "sorry yeah to know that actually this BPF code got",
    "start": "5299639",
    "end": "5306440"
  },
  {
    "text": "be invoked is that what you're saying yeah so you saw what we did with uh with IP rules we set like zero and like if",
    "start": "5306440",
    "end": "5313560"
  },
  {
    "text": "the rule got being blocked blocked is like a one or something that's how you should design probably your BPF code you",
    "start": "5313560",
    "end": "5319639"
  },
  {
    "text": "should actually think about okay I'm going to define the rule the rule for me is to block a to B but also I need to",
    "start": "5319639",
    "end": "5325760"
  },
  {
    "text": "define the monitoring aspect and let's let's create let's define the res let's say you can create a metric like we did",
    "start": "5325760",
    "end": "5333080"
  },
  {
    "text": "earlier to say every time I'm blocking from A to B because of my code go create",
    "start": "5333080",
    "end": "5340159"
  },
  {
    "text": "this metric that you can go and put that in primeus and alert on it right just again when you create your EF code think",
    "start": "5340159",
    "end": "5346520"
  },
  {
    "text": "about the monitoring aspect and also the enforcement aspect",
    "start": "5346520",
    "end": "5352520"
  },
  {
    "text": "ask already oh so you're saying is can we",
    "start": "5352520",
    "end": "5358840"
  },
  {
    "text": "can we take a look if a certain there's Okay so if you if you use like uh in in my",
    "start": "5358840",
    "end": "5366440"
  },
  {
    "text": "example I'm using BPF tool right BPF tool is pretty cool and you can use different things you can use BPF cool",
    "start": "5366440",
    "end": "5373800"
  },
  {
    "text": "BPF B cool I it's a good name BPF tool on a certain interface it's going to",
    "start": "5373800",
    "end": "5378960"
  },
  {
    "text": "list all the ebpf code that's been attached to interface so you can always go back and say oh why like what this",
    "start": "5378960",
    "end": "5385400"
  },
  {
    "text": "kind of actually things not working oh like let's run BPF to on a certain interface okay well all this thing is",
    "start": "5385400",
    "end": "5391920"
  },
  {
    "text": "are being attached therefore this why it's",
    "start": "5391920",
    "end": "5395679"
  },
  {
    "text": "enforced what network interface correct Network",
    "start": "5398520",
    "end": "5404638"
  },
  {
    "text": "interace yeah yeah EF is is definitely again we are just seen that in the in",
    "start": "5405480",
    "end": "5411040"
  },
  {
    "text": "the context of networking but EF code can be running for let's say CIS calls",
    "start": "5411040",
    "end": "5416600"
  },
  {
    "text": "or like system calls or opening a file here you know things that are in you",
    "start": "5416600",
    "end": "5422000"
  },
  {
    "text": "know let's say you want to monitor other aspects of Linux doesn't have to be networking but obviously interface comes",
    "start": "5422000",
    "end": "5428360"
  },
  {
    "text": "in discussion when we talking about networking for sure okay thank you very much for",
    "start": "5428360",
    "end": "5435560"
  },
  {
    "text": "joining this session hope to see you soon and have a good cou",
    "start": "5435560",
    "end": "5442320"
  },
  {
    "text": "con",
    "start": "5442840",
    "end": "5445840"
  }
]