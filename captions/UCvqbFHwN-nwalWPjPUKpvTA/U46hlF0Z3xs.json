[
  {
    "text": "all right thanks a lot for joining uh let's chat about surviving the regional fillers",
    "start": "5480",
    "end": "11760"
  },
  {
    "text": "so first Speaker slide let me introduce amazing end user of the project we are going to talk about",
    "start": "11760",
    "end": "17460"
  },
  {
    "text": "Nuno and creator of KGB Yuri thank you",
    "start": "17460",
    "end": "23279"
  },
  {
    "text": "so show of hands whoever heard about KGB is a kubernetes global balancer before",
    "start": "23279",
    "end": "29699"
  },
  {
    "text": "amazing much more people than I expected I appreciate it",
    "start": "29699",
    "end": "34520"
  },
  {
    "text": "so what is KGB kubernetes Global balancer open source project sandbox one a it is designed to solve the global",
    "start": "34739",
    "end": "42660"
  },
  {
    "text": "server load balancing problem and challenge in cloud94 so it is running on",
    "start": "42660",
    "end": "49200"
  },
  {
    "text": "top of kubernetes it is designed to be as simple to use as possible it's just reconcile the single crd of jslb type",
    "start": "49200",
    "end": "57559"
  },
  {
    "text": "it is it doesn't require any management cluster so that's a strong point of the",
    "start": "57559",
    "end": "63600"
  },
  {
    "text": "solution and no incurrent no single point of failure so and design design on top of well battle tested DNS protocol",
    "start": "63600",
    "end": "71240"
  },
  {
    "text": "and support some a pretty good set of global load",
    "start": "71240",
    "end": "76979"
  },
  {
    "text": "balancing strategies so a little bit of project history in context why it was even created so uh it",
    "start": "76979",
    "end": "84299"
  },
  {
    "text": "was originated in Absa and Absa is amazing South African bank I had a honor to work for and they are running I",
    "start": "84299",
    "end": "93119"
  },
  {
    "text": "believe still running a huge kubernetes uh Fleet more than 100 clusters and they",
    "start": "93119",
    "end": "99720"
  },
  {
    "text": "required some form of jsob solutions that is cloud native so that is aware of kubernetes primitive what is happening",
    "start": "99720",
    "end": "105060"
  },
  {
    "text": "down to the podcast level and backing up so we needed geographically a",
    "start": "105060",
    "end": "113640"
  },
  {
    "text": "solution that would steer the traffic to geographically disparate clusters and this geography could mean like different",
    "start": "113640",
    "end": "121079"
  },
  {
    "text": "data centers on-prem or different regions uh in Edwards cloud or actually a mix of",
    "start": "121079",
    "end": "127259"
  },
  {
    "text": "them we try to find some proprietary vendor Solutions there was nothing that was",
    "start": "127259",
    "end": "133980"
  },
  {
    "text": "Cloud native enough and uh basically",
    "start": "133980",
    "end": "139819"
  },
  {
    "text": "most of the solutions load balancing Global load balancing one they uh",
    "start": "139819",
    "end": "145200"
  },
  {
    "text": "relying on a simple simple straightforward HTTP checks and that's it's just not fast enough for cloud94 so",
    "start": "145200",
    "end": "151020"
  },
  {
    "text": "that's why we decided to uh build a solution from scratch and it was",
    "start": "151020",
    "end": "156780"
  },
  {
    "text": "something that we developed in open from day Zero so it wasn't something that was",
    "start": "156780",
    "end": "162000"
  },
  {
    "text": "born internally uh we and then open sourced we were starting it as a OSS",
    "start": "162000",
    "end": "171180"
  },
  {
    "text": "project from the very first day and I think it uh very positively positively",
    "start": "171180",
    "end": "177239"
  },
  {
    "text": "affected the overall design of the project and we never made any shortcuts",
    "start": "177239",
    "end": "182940"
  },
  {
    "text": "so in a nutshell uh how it works right very very simple thing you have at least",
    "start": "182940",
    "end": "190440"
  },
  {
    "text": "two clusters that are geographically dispersed you in this specific example",
    "start": "190440",
    "end": "195900"
  },
  {
    "text": "on the diagram you have one cluster in European region or data center or",
    "start": "195900",
    "end": "201060"
  },
  {
    "text": "another one a secondary one in United States uh we are running KGB controller on both of",
    "start": "201060",
    "end": "207900"
  },
  {
    "text": "the Clusters so we are putting a KGB next to your application workload so",
    "start": "207900",
    "end": "213000"
  },
  {
    "text": "again no control cluster no separate management layer everything is distributed and we integrate it with",
    "start": "213000",
    "end": "220319"
  },
  {
    "text": "some environmental DNS and this diagram it is throughout 63 but it's just one of",
    "start": "220319",
    "end": "225720"
  },
  {
    "text": "the example you can integrate with virtually any kind of DNS server depending on your environment",
    "start": "225720",
    "end": "231920"
  },
  {
    "text": "uh assuming uh workload for some reason dies on the first primary primary",
    "start": "231920",
    "end": "237599"
  },
  {
    "text": "cluster and it cannot recover itself on standard kubernetes manner then KGB is",
    "start": "237599",
    "end": "243540"
  },
  {
    "text": "smart enough to steer the traffic to the secondary cluster and basically it makes your application globally highly",
    "start": "243540",
    "end": "250379"
  },
  {
    "text": "available so that's roughly the thing uh",
    "start": "250379",
    "end": "256579"
  },
  {
    "text": "it's worse to mention that like a core principles that uh",
    "start": "256579",
    "end": "262759"
  },
  {
    "text": "were imprinted into the project from a very very first day and thanks to",
    "start": "262759",
    "end": "268680"
  },
  {
    "text": "Donovan from apsa uh for actually put it on paper on uh even before we started to",
    "start": "268680",
    "end": "276960"
  },
  {
    "text": "like cut it up so it should be kubernetes native meaning it relies on The kubernetes Primitives as much as",
    "start": "276960",
    "end": "283680"
  },
  {
    "text": "possible so we are not Reinventing The View we are not creating some additional health checks we are designing we are",
    "start": "283680",
    "end": "290220"
  },
  {
    "text": "checking the port health status just out of the standard kubernetes service primitive no service endpoints available",
    "start": "290220",
    "end": "297060"
  },
  {
    "text": "it means that Bots are dead an application is not is more functioning right we have as simple as simple as",
    "start": "297060",
    "end": "305820"
  },
  {
    "text": "possible interface as possible single crd that that is tightly coupled with a",
    "start": "305820",
    "end": "310919"
  },
  {
    "text": "very standard Ingress [Music] again no control cluster is very",
    "start": "310919",
    "end": "316800"
  },
  {
    "text": "powerful so redistribute the solution next to the workloads and it makes the",
    "start": "316800",
    "end": "322139"
  },
  {
    "text": "solution itself highly redundant based on DNS so yeah DNA DNS France internet",
    "start": "322139",
    "end": "328020"
  },
  {
    "text": "we obviously also inherited some DNS limitations we will talk about later but",
    "start": "328020",
    "end": "333660"
  },
  {
    "text": "overall it's a very reliable stuff uh environment agnostic so",
    "start": "333660",
    "end": "339380"
  },
  {
    "text": "we are trying to be as much as independent or from environment as",
    "start": "339380",
    "end": "346440"
  },
  {
    "text": "possible so for to integrate KGB into environment you need a very simple stuff it's a Zone delegation meaning that just",
    "start": "346440",
    "end": "354240"
  },
  {
    "text": "a couple of NS records on your environment DNS like Route 63 from the previous diagram and it is a nest type",
    "start": "354240",
    "end": "362460"
  },
  {
    "text": "record and a global records and that's it and it is usually done automatically by the KGB solution",
    "start": "362460",
    "end": "369300"
  },
  {
    "text": "so to the user interface uh uh really",
    "start": "369300",
    "end": "374460"
  },
  {
    "text": "just one single crd and use as you can notice it has like a embedded standard",
    "start": "374460",
    "end": "381360"
  },
  {
    "text": "Ingress in its spec and as a strategy section that is uh",
    "start": "381360",
    "end": "388380"
  },
  {
    "text": "dedicated to uh actual Global load balancing strategy so here the mandatory",
    "start": "388380",
    "end": "394440"
  },
  {
    "text": "ones are actually like just a type and in case of failover we also need to assign a primary Geotech the detailed",
    "start": "394440",
    "end": "400440"
  },
  {
    "text": "times they are just something to override the defaults to say notes is so",
    "start": "400440",
    "end": "405479"
  },
  {
    "text": "important to start these enabling Global load balancing so",
    "start": "405479",
    "end": "411419"
  },
  {
    "text": "basically you're just dropping in uh this custom resource and assuming KGB is",
    "start": "411419",
    "end": "416880"
  },
  {
    "text": "installed on in cluster and at least two clusters it will work uh",
    "start": "416880",
    "end": "422100"
  },
  {
    "text": "it will create a really Global load balancing strategy for you and through the traffic and you instantiate uh gsob",
    "start": "422100",
    "end": "430259"
  },
  {
    "text": "kinds on both of the Clusters so they will be able to discover each other",
    "start": "430259",
    "end": "435600"
  },
  {
    "text": "if you already have a form or some form of Helm charts for you for example your",
    "start": "435600",
    "end": "440699"
  },
  {
    "text": "development teams already have a standard application package thread including the",
    "start": "440699",
    "end": "447300"
  },
  {
    "text": "Ingress so and we maybe don't even want to teach them yet another new crd even",
    "start": "447300",
    "end": "453419"
  },
  {
    "text": "single one there is a possibility just to put the annotations uh the KGB kgbio",
    "start": "453419",
    "end": "458960"
  },
  {
    "text": "and it the control will pick it up and create crd automatically in the background so your development teams or",
    "start": "458960",
    "end": "465780"
  },
  {
    "text": "people who are dealing with home charts don't even need to learn that stuff so that just declare uh the the strategy",
    "start": "465780",
    "end": "475500"
  },
  {
    "text": "and Associated geotext and it will it will just work so very simplistic and",
    "start": "475500",
    "end": "480660"
  },
  {
    "text": "we're doing Gateway support next right yeah good good way support is on the roadmap so Gateway also knows this kind",
    "start": "480660",
    "end": "487139"
  },
  {
    "text": "of Ingress V2 we are trying to follow the latest versions of a uh Cloud native",
    "start": "487139",
    "end": "492419"
  },
  {
    "text": "for apis so yeah it's definitely on the roadmap right now load balancing strategies so actually",
    "start": "492419",
    "end": "499259"
  },
  {
    "text": "the core functionality so we started initially with a simple round robin and a failover",
    "start": "499259",
    "end": "505620"
  },
  {
    "text": "and I think they're still the most popular strategies that the people are using so round robin you have two clusters and you put them into gslb uh",
    "start": "505620",
    "end": "514580"
  },
  {
    "text": "uh you you put JSO bcrs on both of them and after that the DNS",
    "start": "514580",
    "end": "523039"
  },
  {
    "text": "responses are going to be provided in a random manner right so from both clusters non-predictable by Design",
    "start": "523039",
    "end": "530000"
  },
  {
    "text": "failover is very is most popular probably straightforward the ones that we showed in diagram you have a primary",
    "start": "530000",
    "end": "536339"
  },
  {
    "text": "cluster secondary cluster assuming the workload is that on a primary one it will steer",
    "start": "536339",
    "end": "541700"
  },
  {
    "text": "the traffic to a secondary one when workload is healthy again until Stir It Back super straight over",
    "start": "541700",
    "end": "548339"
  },
  {
    "text": "then after project matured we got some more advanced load balancer strategies",
    "start": "548339",
    "end": "555060"
  },
  {
    "text": "like avoided round robin and thanks mikho if you're watching it for",
    "start": "555060",
    "end": "560580"
  },
  {
    "text": "implementing this it's actually a very Advanced statistical algorithms behind",
    "start": "560580",
    "end": "565740"
  },
  {
    "text": "and we can uh apply the weights on two Associated cluster geotexts and this way",
    "start": "565740",
    "end": "573300"
  },
  {
    "text": "predictively balance the traffic between multiple locations",
    "start": "573300",
    "end": "578899"
  },
  {
    "text": "and GOP strategy thanks dinner for implementing it uh uh the it is kind of",
    "start": "578899",
    "end": "586760"
  },
  {
    "text": "it is more uh classic in terms of finding the closest geographical cluster",
    "start": "586760",
    "end": "594180"
  },
  {
    "text": "so like from Global traffic management perspective But It's tricky to implement because it requires a crafted goap",
    "start": "594180",
    "end": "600720"
  },
  {
    "text": "compatible database and it also has a strong environment requirement of your",
    "start": "600720",
    "end": "606779"
  },
  {
    "text": "DNS solution DNS resolver to have a DNA zero extension so it is to propagate the",
    "start": "606779",
    "end": "613680"
  },
  {
    "text": "client subnet to actually make the load dns-based load balancer aware from where the client is coming from so it is",
    "start": "613680",
    "end": "620399"
  },
  {
    "text": "doable it is working but it has much more dependencies than another strategies",
    "start": "620399",
    "end": "626580"
  },
  {
    "text": "so uh supported integration so as was as was it was mentioned KGB can work on any",
    "start": "626580",
    "end": "634440"
  },
  {
    "text": "uh CNF conformance kubernetes cluster no research questions and pretty much any",
    "start": "634440",
    "end": "640200"
  },
  {
    "text": "Ingress controller so we heavily tested on a most popular Ingress and a traffic but there is no technical limitation to",
    "start": "640200",
    "end": "646980"
  },
  {
    "text": "not to work on any Ingress controllers that is compatible with standard apis and uh for",
    "start": "646980",
    "end": "654380"
  },
  {
    "text": "external DNS meaning like the integration into the providers into the",
    "start": "654380",
    "end": "660300"
  },
  {
    "text": "environments that you are running so originally it's the project that started backing up so as I mentioned and we used",
    "start": "660300",
    "end": "666060"
  },
  {
    "text": "to have an info block so that's the first uh integration we implemented then",
    "start": "666060",
    "end": "671220"
  },
  {
    "text": "we went to a public Cloud support so it's AWS Route 83 and then we had an",
    "start": "671220",
    "end": "676320"
  },
  {
    "text": "amazing experience with the partners with the guys from ns1 and then we developed RFC",
    "start": "676320",
    "end": "683120"
  },
  {
    "text": "2136 so basically an ability to work with any DNS classic one like a buoyant",
    "start": "683120",
    "end": "691140"
  },
  {
    "text": "or Windows DNS so you can hook into ddns process and create the Zone delegation",
    "start": "691140",
    "end": "696420"
  },
  {
    "text": "automatically and you can integrate virtually in any environment and what's",
    "start": "696420",
    "end": "703920"
  },
  {
    "text": "coming next is azure public DNS support and it will be released really soon we already have a code working and we will",
    "start": "703920",
    "end": "710579"
  },
  {
    "text": "see it today for observatibility standpoint we obviously were thinking about day two",
    "start": "710579",
    "end": "717360"
  },
  {
    "text": "operations and we had a pretty rich Matrix around the reconciliation Loop of",
    "start": "717360",
    "end": "724200"
  },
  {
    "text": "the and I just will be type and Associated traces so open Telemetry uh compatible",
    "start": "724200",
    "end": "731300"
  },
  {
    "text": "events are getting propagated through a TL collector and thanks altered for implementing it that is amazing",
    "start": "731300",
    "end": "737459"
  },
  {
    "text": "contribution so uh usually at this point uh when I",
    "start": "737459",
    "end": "742680"
  },
  {
    "text": "deliver in KGB related talks I am showing the live demo but today I have amazing end user with me so I can just",
    "start": "742680",
    "end": "747959"
  },
  {
    "text": "relax living on stage is yours thank you very much so for those of you who don't know Milan",
    "start": "747959",
    "end": "753480"
  },
  {
    "text": "and BCP we're the largest privately owned bank in Portugal so from South",
    "start": "753480",
    "end": "758760"
  },
  {
    "text": "Africa second biggest second biggest user is Portugal banking as well",
    "start": "758760",
    "end": "767279"
  },
  {
    "text": "our goal at Millennium is to use five geographical regions in Europe",
    "start": "767279",
    "end": "775200"
  },
  {
    "text": "covering Azure gcp and on-prem regions as well and to basically do the same thing",
    "start": "775200",
    "end": "781440"
  },
  {
    "text": "throughout all of those regions and I think the same thing it's infrastructure",
    "start": "781440",
    "end": "786839"
  },
  {
    "text": "as code and get UPS what that means is that for instance our",
    "start": "786839",
    "end": "792180"
  },
  {
    "text": "developers don't particularly care where things run that's on the infrastructure",
    "start": "792180",
    "end": "797820"
  },
  {
    "text": "teams to ensure what our developers ensure on their side is that their",
    "start": "797820",
    "end": "804420"
  },
  {
    "text": "outputs gets converted to an oem file an open application model definition file and",
    "start": "804420",
    "end": "810959"
  },
  {
    "text": "then ifra picks up that file and does things some of those things includes by using",
    "start": "810959",
    "end": "818760"
  },
  {
    "text": "git Ops to pull that file into a management cluster having kubala and",
    "start": "818760",
    "end": "825180"
  },
  {
    "text": "crossfly and spin up everything that needs to be spun up and that includes",
    "start": "825180",
    "end": "831420"
  },
  {
    "text": "geographical distribution yeah maybe if I can interfere with amazing combination of cross plane and",
    "start": "831420",
    "end": "837000"
  },
  {
    "text": "KGB I couldn't not to mention it I still need my hotel to be paid well Fair welfare and",
    "start": "837000",
    "end": "845639"
  },
  {
    "text": "even if KGB is simple to integrate honestly our users don't care about it",
    "start": "845639",
    "end": "852680"
  },
  {
    "text": "their thing our application just runs",
    "start": "852680",
    "end": "858860"
  },
  {
    "text": "what we typically use in terms of run environments is this sort of pattern",
    "start": "859380",
    "end": "864540"
  },
  {
    "text": "where there's a management cluster somewhere that runs well management",
    "start": "864540",
    "end": "870380"
  },
  {
    "text": "planes things that need to be well they have a state that needs to be",
    "start": "870380",
    "end": "876480"
  },
  {
    "text": "backed up for instance cross plane guevala and other planes and the only",
    "start": "876480",
    "end": "883260"
  },
  {
    "text": "thing that those management clusters do is spin off things to run clusters",
    "start": "883260",
    "end": "890519"
  },
  {
    "text": "and the Run clusters themselves for us I run cluster is a pair of kubernetes",
    "start": "890519",
    "end": "896820"
  },
  {
    "text": "clusters that's how we ensure those 99.95 slos",
    "start": "896820",
    "end": "902459"
  },
  {
    "text": "and they are not only multi-zone they are multi-regions so for instance",
    "start": "902459",
    "end": "909240"
  },
  {
    "text": "in this pair one of them is in Azure North Europe the other one is in Azure",
    "start": "909240",
    "end": "915480"
  },
  {
    "text": "West Europe and KJV does its thing",
    "start": "915480",
    "end": "920820"
  },
  {
    "text": "let's see how so the URL is live you can hit it now if",
    "start": "920820",
    "end": "928560"
  },
  {
    "text": "you want and codes is in this URL down here feel free to browse if and when you guys",
    "start": "928560",
    "end": "936000"
  },
  {
    "text": "want to",
    "start": "936000",
    "end": "938660"
  },
  {
    "text": "so maybe while you uh firing it up worse to mention that it's a very similar case",
    "start": "943199",
    "end": "949620"
  },
  {
    "text": "that we had in Absa and you have in a millennium BCP that our applications are getting deployed on top of at least two",
    "start": "949620",
    "end": "957300"
  },
  {
    "text": "clusters just by default and it it is totally transparent to the users right so is they just by default globally",
    "start": "957300",
    "end": "963240"
  },
  {
    "text": "available and to This Global availability is driven by KGB yeah",
    "start": "963240",
    "end": "969720"
  },
  {
    "text": "so a quick overview of the code you can find in these repos you'll find a repo",
    "start": "969720",
    "end": "976260"
  },
  {
    "text": "called IAC and here we are just spinning up the resources for the demo",
    "start": "976260",
    "end": "982519"
  },
  {
    "text": "network key Vault management cluster",
    "start": "982519",
    "end": "987540"
  },
  {
    "text": "and a very long or not terraform piece of code to call that",
    "start": "987540",
    "end": "994500"
  },
  {
    "text": "high availability AKs module and not going into too much detail what",
    "start": "994500",
    "end": "1001579"
  },
  {
    "text": "we have here are two instances if they're a form that basically spin up a cluster",
    "start": "1001579",
    "end": "1007160"
  },
  {
    "text": "get flux into it get external DNS going get the external Secrets operator in",
    "start": "1007160",
    "end": "1014180"
  },
  {
    "text": "there and generate also the initial",
    "start": "1014180",
    "end": "1020480"
  },
  {
    "text": "files for gear Ops which is the other Ripple next to this one so here in closer config these folders",
    "start": "1020480",
    "end": "1028880"
  },
  {
    "text": "that you see run north and run West were generated by terraform and in the",
    "start": "1028880",
    "end": "1036740"
  },
  {
    "text": "end what we have here in the Azure portal are two run clusters",
    "start": "1036740",
    "end": "1046000"
  },
  {
    "text": "one in North Europe the other one in West Europe and we'll be targeting those two clusters",
    "start": "1046160",
    "end": "1052880"
  },
  {
    "text": "since all of this is automated and no one actually ran Coupe control whatever into those",
    "start": "1052880",
    "end": "1059419"
  },
  {
    "text": "clusters we also needed to take care of deploying KGB there so",
    "start": "1059419",
    "end": "1066679"
  },
  {
    "text": "what we do is to no imagine it we have a folder in",
    "start": "1066679",
    "end": "1074900"
  },
  {
    "text": "the good repo for KGB and namespace stuff and a generalized Helm release",
    "start": "1074900",
    "end": "1082039"
  },
  {
    "text": "definition for flux to pick up that basically has",
    "start": "1082039",
    "end": "1087679"
  },
  {
    "text": "some variables for cluster Geotech and the pair Geotech for that cluster",
    "start": "1087679",
    "end": "1095799"
  },
  {
    "text": "customized puts the right values there and call and behold we have two clusters",
    "start": "1095799",
    "end": "1101539"
  },
  {
    "text": "connected to each other some control plane right on the terraform module and we're up and",
    "start": "1101539",
    "end": "1107299"
  },
  {
    "text": "running and by the way this is how we do service continuity and Disaster Recovery we just",
    "start": "1107299",
    "end": "1113600"
  },
  {
    "text": "spin up two new clusters if any of those two file no worries in recovery so to",
    "start": "1113600",
    "end": "1119120"
  },
  {
    "text": "speak this means that when we deploy an application using gitups to this pair of",
    "start": "1119120",
    "end": "1127880"
  },
  {
    "text": "clusters and for this demo we're using hello kubernetes Docker image",
    "start": "1127880",
    "end": "1135380"
  },
  {
    "text": "besides doing just the standard Helm release for that app and well the",
    "start": "1135380",
    "end": "1143360"
  },
  {
    "text": "only thing here worth noticing is this app will just say welcome from kubernetes and there's a variable there",
    "start": "1143360",
    "end": "1149480"
  },
  {
    "text": "for cluster name we are also deploying",
    "start": "1149480",
    "end": "1154700"
  },
  {
    "text": "that's the Rd",
    "start": "1154700",
    "end": "1157539"
  },
  {
    "text": "same thing that was in the previous slide just saying primary geotag is North Europe type is failover",
    "start": "1159799",
    "end": "1167000"
  },
  {
    "text": "that's that and getting here",
    "start": "1167000",
    "end": "1172400"
  },
  {
    "text": "we could do it like this putting the crd in to get we could do",
    "start": "1172400",
    "end": "1178940"
  },
  {
    "text": "a customized patch if we had ingresses already declared in the repo now it's up",
    "start": "1178940",
    "end": "1185480"
  },
  {
    "text": "to you thing is it's one file either gsld crd",
    "start": "1185480",
    "end": "1190880"
  },
  {
    "text": "or Christmas patch with this in place",
    "start": "1190880",
    "end": "1197620"
  },
  {
    "text": "with this in place I knew that was kind of going to break",
    "start": "1205160",
    "end": "1212780"
  },
  {
    "text": "so welcome to my curl test",
    "start": "1212780",
    "end": "1218320"
  },
  {
    "text": "is this stuff accessible no just in time",
    "start": "1227179",
    "end": "1233080"
  },
  {
    "text": "security threat what is it all right it blocked by a conference",
    "start": "1237200",
    "end": "1244880"
  },
  {
    "text": "organizers no that's cool isn't it",
    "start": "1244880",
    "end": "1249700"
  },
  {
    "text": "so access point which are Wi-Fi",
    "start": "1252559",
    "end": "1259280"
  },
  {
    "text": "uh no it's on double check it shouldn't be Ryan cross planes I believe",
    "start": "1259280",
    "end": "1266000"
  },
  {
    "text": "it's on up on okay",
    "start": "1266000",
    "end": "1270220"
  },
  {
    "text": "so sorry we are making minor Wi-Fi failover",
    "start": "1282620",
    "end": "1287440"
  },
  {
    "text": "curl yeah",
    "start": "1296240",
    "end": "1300580"
  },
  {
    "text": "it's on http you can access",
    "start": "1313100",
    "end": "1319299"
  },
  {
    "text": "hdps um yeah yeah thank you appreciate it",
    "start": "1319460",
    "end": "1327640"
  },
  {
    "text": "nope so plan B",
    "start": "1344299",
    "end": "1350980"
  },
  {
    "text": "okay",
    "start": "1365659",
    "end": "1368140"
  },
  {
    "text": "what's your day",
    "start": "1382460",
    "end": "1385120"
  },
  {
    "text": "last attempt last attempt and we have a last resort Solution on my local local Center I will",
    "start": "1387820",
    "end": "1395720"
  },
  {
    "text": "be able to show you",
    "start": "1395720",
    "end": "1398500"
  },
  {
    "text": "come on yeah yeah go for it yeah",
    "start": "1418280",
    "end": "1423679"
  },
  {
    "text": "no I I've got it I've got it okay nice",
    "start": "1431120",
    "end": "1437179"
  },
  {
    "text": "[Applause]",
    "start": "1438810",
    "end": "1444980"
  },
  {
    "text": "now you know what it was network cable oh",
    "start": "1444980",
    "end": "1450800"
  },
  {
    "text": "[Laughter] [Applause]",
    "start": "1450800",
    "end": "1457339"
  },
  {
    "text": "cool as I was saying",
    "start": "1457640",
    "end": "1464179"
  },
  {
    "text": "we have",
    "start": "1464179",
    "end": "1467200"
  },
  {
    "text": "North Europe cluster replying currently",
    "start": "1470480",
    "end": "1475640"
  },
  {
    "text": "so scenario one you're going to be doing plane maintenance whatever on this",
    "start": "1475640",
    "end": "1482659"
  },
  {
    "text": "cluster you want to shift everything to West Europe",
    "start": "1482659",
    "end": "1487720"
  },
  {
    "text": "so you could do something as simple as here's my jsld custom resource I'm going",
    "start": "1487880",
    "end": "1496820"
  },
  {
    "text": "to say this is going to West Europe",
    "start": "1496820",
    "end": "1501860"
  },
  {
    "text": "and a good commit away",
    "start": "1501860",
    "end": "1506080"
  },
  {
    "text": "there you go",
    "start": "1508460",
    "end": "1511960"
  },
  {
    "text": "and just to save us a bit of time just going to run",
    "start": "1514940",
    "end": "1521679"
  },
  {
    "text": "flux reconcile on those clusters just for us not to wait to four flux to sink",
    "start": "1522919",
    "end": "1529340"
  },
  {
    "text": "and with this in place we should see that the reply will move from North to",
    "start": "1529340",
    "end": "1536659"
  },
  {
    "text": "West let me",
    "start": "1536659",
    "end": "1541700"
  },
  {
    "text": "and when now West you see",
    "start": "1541700",
    "end": "1550120"
  },
  {
    "text": "do you want to do a quick explanation what happened behind the scenes Yeah so basically KGB detected that",
    "start": "1552200",
    "end": "1560740"
  },
  {
    "text": "podcast is a primary cluster and thanks to the Zone",
    "start": "1560740",
    "end": "1567380"
  },
  {
    "text": "delegation that is configured environment hdns be able to dynamically",
    "start": "1567380",
    "end": "1574820"
  },
  {
    "text": "craft the DNS responses according to the strategy from our internal core DNS that",
    "start": "1574820",
    "end": "1580580"
  },
  {
    "text": "is part of the KGB and returns an appropriate DNS response",
    "start": "1580580",
    "end": "1586340"
  },
  {
    "text": "and the reason oh well one of the reasons why this is fast is because",
    "start": "1586340",
    "end": "1593120"
  },
  {
    "text": "if you look at the public DNS Zone that's behind this this is the Azure",
    "start": "1593120",
    "end": "1599600"
  },
  {
    "text": "public DNS Zone that we are plugged into nothing changed we're not updating",
    "start": "1599600",
    "end": "1604700"
  },
  {
    "text": "records in a lot of courses that's a great point right we are not using external DNS to populate it centrally we",
    "start": "1604700",
    "end": "1612200"
  },
  {
    "text": "are serving the DNS a request on our own accordion as a normally Zone delegation",
    "start": "1612200",
    "end": "1617840"
  },
  {
    "text": "is configured so this NS record gslbns and the glue record that would point to",
    "start": "1617840",
    "end": "1623000"
  },
  {
    "text": "the set of KGB enabled cluster nodes so we're replying straight out of a",
    "start": "1623000",
    "end": "1628760"
  },
  {
    "text": "kubernetes clusters where the workload is exactly",
    "start": "1628760",
    "end": "1633980"
  },
  {
    "text": "this was plan maintenance cool what about unplanned maintenance",
    "start": "1634520",
    "end": "1642020"
  },
  {
    "text": "so we are replying from West let me get",
    "start": "1642020",
    "end": "1647059"
  },
  {
    "text": "into that cluster and just remove replicas",
    "start": "1647059",
    "end": "1655400"
  },
  {
    "text": "which is exactly what it sounds like killed the app",
    "start": "1655400",
    "end": "1661700"
  },
  {
    "text": "oh now we're applying from North no no service endpoints in the west",
    "start": "1661700",
    "end": "1669500"
  },
  {
    "text": "Europe cluster cool so I'll just serve DNS to say go there North Europe that's",
    "start": "1669500",
    "end": "1676039"
  },
  {
    "text": "the one just like that and honestly we are shifting pretty fast",
    "start": "1676039",
    "end": "1683900"
  },
  {
    "text": "now now that we're out of network cables but worst case scenario with all uh DNS",
    "start": "1683900",
    "end": "1692779"
  },
  {
    "text": "ttls in the middle and all of that at most this takes less than a minute Right theory yeah basically uh to the",
    "start": "1692779",
    "end": "1700220"
  },
  {
    "text": "point of that we are based on DNS so it's a great protocol stable one but we are also inheriting some limitations so",
    "start": "1700220",
    "end": "1707659"
  },
  {
    "text": "we operating with a very short time to leave TTL value for demo purposes it's kind of 30 seconds to enable like a fast",
    "start": "1707659",
    "end": "1714559"
  },
  {
    "text": "switch in a production I noticed that people tend to raise it a bit so it will",
    "start": "1714559",
    "end": "1719779"
  },
  {
    "text": "be less aggressive but anyway just usually it is one reconciliation Loop within a",
    "start": "1719779",
    "end": "1726320"
  },
  {
    "text": "kubernetes controller overlapped Visa detail so that's what you can expect however failover how fast the lower will",
    "start": "1726320",
    "end": "1732919"
  },
  {
    "text": "happen do you want to talk a bit about internals yeah we have a five minutes",
    "start": "1732919",
    "end": "1738740"
  },
  {
    "text": "and maybe I'll try to quickly explain how that stuff actually works so we have a KGB controllers that encapsulates the",
    "start": "1738740",
    "end": "1745940"
  },
  {
    "text": "core logic of the of the solution it continuously watches for gslb CR the",
    "start": "1745940",
    "end": "1752539"
  },
  {
    "text": "ones that we showed before and uh we have a very tightly catapult Ingress at",
    "start": "1752539",
    "end": "1758240"
  },
  {
    "text": "the standard one an Ingress is associated with a very standard kubernetes application service and your",
    "start": "1758240",
    "end": "1764779"
  },
  {
    "text": "application ports so as I mentioned before just the service endpoints right that's that's we need no additional",
    "start": "1764779",
    "end": "1771320"
  },
  {
    "text": "health check no additional logic if there's service endpoints array is empty then the application is kind of failed",
    "start": "1771320",
    "end": "1778279"
  },
  {
    "text": "mode right and we have an integral part of uh of the solutions that are",
    "start": "1778279",
    "end": "1783440"
  },
  {
    "text": "happening in existing KGB namespace uh we have we are using DNS endpoint crd",
    "start": "1783440",
    "end": "1790039"
  },
  {
    "text": "and like custom resource instantiations that we are reusing from external DNS project so basically we are populating",
    "start": "1790039",
    "end": "1796460"
  },
  {
    "text": "the uh entries dynamically according to the global Service load balancing strategy and we also running accordion",
    "start": "1796460",
    "end": "1804860"
  },
  {
    "text": "as a special build it's not a kubernetes system uh accordion as it's a standalone",
    "start": "1804860",
    "end": "1811880"
  },
  {
    "text": "deployment that is part of KGB as a solution the integral part and it has a special built a special model that is",
    "start": "1811880",
    "end": "1817880"
  },
  {
    "text": "capable to read data from kubernetes Custom resource so that's why it reads",
    "start": "1817880",
    "end": "1824000"
  },
  {
    "text": "dynamically from kubernetes API effectively and serves the dynamic",
    "start": "1824000",
    "end": "1829100"
  },
  {
    "text": "dynamically crafted responses according to the strategy and for the integration part that we discussed several times NS",
    "start": "1829100",
    "end": "1836659"
  },
  {
    "text": "record plus glue our records that configures the Zone delegation on a hdns",
    "start": "1836659",
    "end": "1843020"
  },
  {
    "text": "so again in this case it's routed T3 but as we discussed before it can be anything we are using external DNS also",
    "start": "1843020",
    "end": "1850059"
  },
  {
    "text": "as a part of the project so it will it is able to automatically configure it for you new environment",
    "start": "1850059",
    "end": "1856700"
  },
  {
    "text": "so that's what's happening in a scope of single cluster right what about the multi-cluster kind of carbonation",
    "start": "1856700",
    "end": "1863480"
  },
  {
    "text": "stuff where is the state so the main part as was already mentioned",
    "start": "1863480",
    "end": "1869600"
  },
  {
    "text": "as on delegation configuration so uh first on the first two like kind of rounds of reconciliation Loop a clusters",
    "start": "1869600",
    "end": "1876440"
  },
  {
    "text": "uh figuring out the own health of the local application and in parallel the configuration Zone delegation uh so to",
    "start": "1876440",
    "end": "1884659"
  },
  {
    "text": "actually craft a proper DNS response according to the desired gslb strategy we need some form of coordination and in",
    "start": "1884659",
    "end": "1892580"
  },
  {
    "text": "this case uh we are using the same DNS we are using environment DNS for uh kind",
    "start": "1892580",
    "end": "1899600"
  },
  {
    "text": "of each other cluster Discovery and then we are cross polling uh Associated",
    "start": "1899600",
    "end": "1905600"
  },
  {
    "text": "coordinates for on a special fqdn for local targets so both clusters are aware",
    "start": "1905600",
    "end": "1912140"
  },
  {
    "text": "of each other healthy endpoints and this in this diagram it's a it's actually",
    "start": "1912140",
    "end": "1917480"
  },
  {
    "text": "round robin in action and the emerging two Health appears together and",
    "start": "1917480",
    "end": "1922580"
  },
  {
    "text": "returning DNS response in consistent ways the most important part that both in us that are responsible for the Zone",
    "start": "1922580",
    "end": "1930679"
  },
  {
    "text": "effectively they are always returning a consistent response no matter which cluster is hit by the DNS client",
    "start": "1930679",
    "end": "1939320"
  },
  {
    "text": "yeah a little bit of cncf has the landscape starts the CNC of sandbox",
    "start": "1939320",
    "end": "1944659"
  },
  {
    "text": "project level pretty good stats um reasonably active maintenance we were",
    "start": "1944659",
    "end": "1950659"
  },
  {
    "text": "also part of cncf security in North America end of last year and it very",
    "start": "1950659",
    "end": "1956299"
  },
  {
    "text": "nicely affected the project we now have a salsa enabled we have a cosine s-bomb all the",
    "start": "1956299",
    "end": "1963440"
  },
  {
    "text": "stuff the fences release pipeline server uh we have a diverse group of",
    "start": "1963440",
    "end": "1968899"
  },
  {
    "text": "maintainers so three uh from original apsa or One A maintainer from transform",
    "start": "1968899",
    "end": "1974539"
  },
  {
    "text": "and one one from a bond me so we got this kind of uh the recommendation from",
    "start": "1974539",
    "end": "1979700"
  },
  {
    "text": "cncf technical oversight committee to a couple years ago to make a group of",
    "start": "1979700",
    "end": "1984919"
  },
  {
    "text": "maintainers more diverse uh it have a meaning like not from the single company",
    "start": "1984919",
    "end": "1990080"
  },
  {
    "text": "it happens this way well uh effectively it happened because a couple of ups are",
    "start": "1990080",
    "end": "1995179"
  },
  {
    "text": "Fox left including myself but it's implementation details and",
    "start": "1995179",
    "end": "2001419"
  },
  {
    "text": "roadmap the very high level Azure integration you've already seen it in the demo it works it's going to be like",
    "start": "2001419",
    "end": "2006519"
  },
  {
    "text": "an extrudence we just need to polish a little bit of ground chart integration in ux a gcp like to cover all big three",
    "start": "2006519",
    "end": "2014200"
  },
  {
    "text": "uh a great way support to support the newest kind of next version of Ingress",
    "start": "2014200",
    "end": "2021399"
  },
  {
    "text": "and a little to my roadmap is fully available and please if you like the",
    "start": "2021399",
    "end": "2026440"
  },
  {
    "text": "stuff please join the project try it out join us in cncf stock Channel we have a dedicated one we're usually very",
    "start": "2026440",
    "end": "2032320"
  },
  {
    "text": "responsive we start us it will really help the project is a project adoption if you ever ever will use KGB and you",
    "start": "2032320",
    "end": "2039760"
  },
  {
    "text": "are confident to say it publicly please send a pull request to adopters from the and any issues nprs are welcome",
    "start": "2039760",
    "end": "2046419"
  },
  {
    "text": "though thank you so much",
    "start": "2046419",
    "end": "2049740"
  }
]