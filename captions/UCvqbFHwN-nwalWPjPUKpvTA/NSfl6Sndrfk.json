[
  {
    "text": "hey everybody",
    "start": "0",
    "end": "1199"
  },
  {
    "text": "welcome back to the deploy stu for",
    "start": "1199",
    "end": "3760"
  },
  {
    "text": "production lab part two",
    "start": "3760",
    "end": "5839"
  },
  {
    "text": "so so this morning um as you know you",
    "start": "5839",
    "end": "8800"
  },
  {
    "text": "know most of you were here for lynn",
    "start": "8800",
    "end": "10639"
  },
  {
    "text": "sun's lab where she talked about how to",
    "start": "10639",
    "end": "12559"
  },
  {
    "text": "get started with istio how to use istio",
    "start": "12559",
    "end": "14880"
  },
  {
    "text": "then we kind of switch gears a little",
    "start": "14880",
    "end": "16240"
  },
  {
    "text": "bit to just switch to talking about how",
    "start": "16240",
    "end": "18560"
  },
  {
    "text": "to deploy steer for production",
    "start": "18560",
    "end": "20640"
  },
  {
    "text": "um so in part one of our lab and i'm",
    "start": "20640",
    "end": "23279"
  },
  {
    "text": "just doing a recap for people that might",
    "start": "23279",
    "end": "25039"
  },
  {
    "text": "be just joining",
    "start": "25039",
    "end": "26720"
  },
  {
    "text": "in part one of our lab we use the",
    "start": "26720",
    "end": "28400"
  },
  {
    "text": "instruct platform to",
    "start": "28400",
    "end": "30640"
  },
  {
    "text": "to launch our lab and then",
    "start": "30640",
    "end": "33680"
  },
  {
    "text": "we deployed the sleep service and the",
    "start": "33680",
    "end": "35440"
  },
  {
    "text": "http bin service just two apps with no",
    "start": "35440",
    "end": "38079"
  },
  {
    "text": "istio and we deployed envoy",
    "start": "38079",
    "end": "40879"
  },
  {
    "text": "not as a sidecar but",
    "start": "40879",
    "end": "43120"
  },
  {
    "text": "has its own pod that's running just like",
    "start": "43120",
    "end": "45760"
  },
  {
    "text": "your sleep in http bin and we showed how",
    "start": "45760",
    "end": "48719"
  },
  {
    "text": "you can use on envoy as an independent",
    "start": "48719",
    "end": "51520"
  },
  {
    "text": "basically a gateway",
    "start": "51520",
    "end": "53520"
  },
  {
    "text": "and then",
    "start": "53520",
    "end": "55039"
  },
  {
    "text": "we started adding services to the mesh",
    "start": "55039",
    "end": "57280"
  },
  {
    "text": "you know we added the http bin",
    "start": "57280",
    "end": "59760"
  },
  {
    "text": "application to to the mesh and pointed",
    "start": "59760",
    "end": "62320"
  },
  {
    "text": "it to only the istio 183 version of sdod",
    "start": "62320",
    "end": "67200"
  },
  {
    "text": "so we talked about how to install the",
    "start": "67200",
    "end": "69360"
  },
  {
    "text": "istio control plane and how to set the",
    "start": "69360",
    "end": "71600"
  },
  {
    "text": "tag so that it's",
    "start": "71600",
    "end": "73200"
  },
  {
    "text": "a particular version to set you up to",
    "start": "73200",
    "end": "75280"
  },
  {
    "text": "run multiple versions of of istio we",
    "start": "75280",
    "end": "78000"
  },
  {
    "text": "talked about using the minimal profile",
    "start": "78000",
    "end": "80799"
  },
  {
    "text": "and then breaking apart the istio",
    "start": "80799",
    "end": "83119"
  },
  {
    "text": "operator to multiple files so that you",
    "start": "83119",
    "end": "85520"
  },
  {
    "text": "have more control over your control",
    "start": "85520",
    "end": "87920"
  },
  {
    "text": "plane versions your your gateway",
    "start": "87920",
    "end": "90400"
  },
  {
    "text": "versions where they get deployed to what",
    "start": "90400",
    "end": "92320"
  },
  {
    "text": "name space etc",
    "start": "92320",
    "end": "95360"
  },
  {
    "text": "and then we you know we touched a little",
    "start": "95360",
    "end": "97439"
  },
  {
    "text": "bit on observability we deployed",
    "start": "97439",
    "end": "99600"
  },
  {
    "text": "prometheus and kiali using the the",
    "start": "99600",
    "end": "103040"
  },
  {
    "text": "official like you know their operators",
    "start": "103040",
    "end": "105040"
  },
  {
    "text": "we we showed a bunch of configuration on",
    "start": "105040",
    "end": "107280"
  },
  {
    "text": "how to configure",
    "start": "107280",
    "end": "108720"
  },
  {
    "text": "prometheus to scrape the right control",
    "start": "108720",
    "end": "110720"
  },
  {
    "text": "plane and and workload mesh but we",
    "start": "110720",
    "end": "113439"
  },
  {
    "text": "didn't go too much into it because",
    "start": "113439",
    "end": "114960"
  },
  {
    "text": "honestly",
    "start": "114960",
    "end": "116479"
  },
  {
    "text": "getting into prometheus is a whole",
    "start": "116479",
    "end": "117920"
  },
  {
    "text": "probably conference on his own",
    "start": "117920",
    "end": "119759"
  },
  {
    "text": "so but we did you know have a lot of",
    "start": "119759",
    "end": "121520"
  },
  {
    "text": "examples in there to show how you can",
    "start": "121520",
    "end": "123119"
  },
  {
    "text": "get the gist of it so now if you read",
    "start": "123119",
    "end": "124640"
  },
  {
    "text": "the prometheus documentation it will",
    "start": "124640",
    "end": "126640"
  },
  {
    "text": "make more sense to you on what",
    "start": "126640",
    "end": "128640"
  },
  {
    "text": "information you need to set it up on",
    "start": "128640",
    "end": "130319"
  },
  {
    "text": "your system",
    "start": "130319",
    "end": "132400"
  },
  {
    "text": "so then that gets us to here so if",
    "start": "132400",
    "end": "134800"
  },
  {
    "text": "you're just joining us um you can skip",
    "start": "134800",
    "end": "137920"
  },
  {
    "text": "all the previous labs that we worked on",
    "start": "137920",
    "end": "140560"
  },
  {
    "text": "by you would be you'd go to this url",
    "start": "140560",
    "end": "143440"
  },
  {
    "text": "add the deploys to your production to",
    "start": "143440",
    "end": "145360"
  },
  {
    "text": "your study room start the lab and then",
    "start": "145360",
    "end": "148160"
  },
  {
    "text": "go jump straight to",
    "start": "148160",
    "end": "149920"
  },
  {
    "text": "lab four",
    "start": "149920",
    "end": "151200"
  },
  {
    "text": "which will take a couple of minutes to",
    "start": "151200",
    "end": "152720"
  },
  {
    "text": "run a bunch of scripts but it should get",
    "start": "152720",
    "end": "154160"
  },
  {
    "text": "you to the point of where we are",
    "start": "154160",
    "end": "157440"
  },
  {
    "text": "any questions",
    "start": "157440",
    "end": "160080"
  },
  {
    "text": "cool",
    "start": "160640",
    "end": "162720"
  },
  {
    "text": "so the next thing we'll do is",
    "start": "162720",
    "end": "165680"
  },
  {
    "text": "use envoy at the edge so we're going to",
    "start": "165680",
    "end": "168160"
  },
  {
    "text": "use the istio ingress gateway",
    "start": "168160",
    "end": "170480"
  },
  {
    "text": "and we're going to install the ingress",
    "start": "170480",
    "end": "172080"
  },
  {
    "text": "gateway so far we don't have ingress",
    "start": "172080",
    "end": "173840"
  },
  {
    "text": "gateway we've only deployed sdod and hto",
    "start": "173840",
    "end": "176319"
  },
  {
    "text": "system namespace we have envoy running",
    "start": "176319",
    "end": "178640"
  },
  {
    "text": "independently but we don't have an",
    "start": "178640",
    "end": "180400"
  },
  {
    "text": "official istio ingress gateway yet so",
    "start": "180400",
    "end": "182480"
  },
  {
    "text": "that's what we're going to do we're",
    "start": "182480",
    "end": "183440"
  },
  {
    "text": "going to create",
    "start": "183440",
    "end": "184560"
  },
  {
    "text": "a new namespace for the",
    "start": "184560",
    "end": "186959"
  },
  {
    "text": "istio ingress and we're going to tell",
    "start": "186959",
    "end": "189120"
  },
  {
    "text": "we're going to deploy istio ingress",
    "start": "189120",
    "end": "190720"
  },
  {
    "text": "gateway to that namespace and then we're",
    "start": "190720",
    "end": "192720"
  },
  {
    "text": "going to point it at our sdod service",
    "start": "192720",
    "end": "195519"
  },
  {
    "text": "that's been revisioned",
    "start": "195519",
    "end": "197440"
  },
  {
    "text": "okay so once that's installed then we'll",
    "start": "197440",
    "end": "200480"
  },
  {
    "text": "talk about how to use",
    "start": "200480",
    "end": "202560"
  },
  {
    "text": "how to create the istio gateway resource",
    "start": "202560",
    "end": "205360"
  },
  {
    "text": "to handle edge traffic how to do tls",
    "start": "205360",
    "end": "207920"
  },
  {
    "text": "termination how to wire it up how to",
    "start": "207920",
    "end": "210080"
  },
  {
    "text": "wire your certificates so that you know",
    "start": "210080",
    "end": "212480"
  },
  {
    "text": "first of all just give the steering risk",
    "start": "212480",
    "end": "214480"
  },
  {
    "text": "away the search by creating a secret",
    "start": "214480",
    "end": "216799"
  },
  {
    "text": "then we'll deploy cert manager to have",
    "start": "216799",
    "end": "219599"
  },
  {
    "text": "certain manager be the one that's",
    "start": "219599",
    "end": "221120"
  },
  {
    "text": "responsible for creating those those",
    "start": "221120",
    "end": "223760"
  },
  {
    "text": "certificates creating that secret and",
    "start": "223760",
    "end": "226000"
  },
  {
    "text": "giving it to ingress gateway",
    "start": "226000",
    "end": "228319"
  },
  {
    "text": "and then",
    "start": "228319",
    "end": "229280"
  },
  {
    "text": "we'll also touch on how you would",
    "start": "229280",
    "end": "230879"
  },
  {
    "text": "integrate that with an external pki like",
    "start": "230879",
    "end": "233280"
  },
  {
    "text": "vault to actually store your root ca",
    "start": "233280",
    "end": "236159"
  },
  {
    "text": "and then",
    "start": "236159",
    "end": "237599"
  },
  {
    "text": "finally we're going to talk about access",
    "start": "237599",
    "end": "239599"
  },
  {
    "text": "logging",
    "start": "239599",
    "end": "240400"
  },
  {
    "text": "so that you can get information from the",
    "start": "240400",
    "end": "242560"
  },
  {
    "text": "gateway on who's calling it and what",
    "start": "242560",
    "end": "245040"
  },
  {
    "text": "type of information it is when things go",
    "start": "245040",
    "end": "246879"
  },
  {
    "text": "wrong",
    "start": "246879",
    "end": "247920"
  },
  {
    "text": "you can get more more stats",
    "start": "247920",
    "end": "250640"
  },
  {
    "text": "so everyone should be",
    "start": "250640",
    "end": "252480"
  },
  {
    "text": "on this screen on the instruct platform",
    "start": "252480",
    "end": "256639"
  },
  {
    "text": "the creating an ingress gateway for",
    "start": "256639",
    "end": "258239"
  },
  {
    "text": "steel",
    "start": "258239",
    "end": "260079"
  },
  {
    "text": "all right",
    "start": "260079",
    "end": "261440"
  },
  {
    "text": "cool let's get started",
    "start": "261440",
    "end": "263600"
  },
  {
    "text": "first thing",
    "start": "263600",
    "end": "265040"
  },
  {
    "text": "is",
    "start": "265040",
    "end": "265840"
  },
  {
    "text": "let's take a look at the istio operator",
    "start": "265840",
    "end": "267680"
  },
  {
    "text": "file this is the steer resource that we",
    "start": "267680",
    "end": "269680"
  },
  {
    "text": "used previously to install the sdod just",
    "start": "269680",
    "end": "271759"
  },
  {
    "text": "the control plane keep in mind we used",
    "start": "271759",
    "end": "273840"
  },
  {
    "text": "the minimal profile last time minimal",
    "start": "273840",
    "end": "276080"
  },
  {
    "text": "profile is something that comes out of",
    "start": "276080",
    "end": "277840"
  },
  {
    "text": "the box with istio so if you were to",
    "start": "277840",
    "end": "279759"
  },
  {
    "text": "down when you did that curl command to",
    "start": "279759",
    "end": "281360"
  },
  {
    "text": "download istio if you open your istio",
    "start": "281360",
    "end": "284080"
  },
  {
    "text": "root folder i think it's under manifest",
    "start": "284080",
    "end": "286720"
  },
  {
    "text": "and then you'll see a minimal.yaml",
    "start": "286720",
    "end": "288800"
  },
  {
    "text": "that's basically all that minimal",
    "start": "288800",
    "end": "290400"
  },
  {
    "text": "profile is it's using using that profile",
    "start": "290400",
    "end": "293759"
  },
  {
    "text": "so now to deploy the ingress gateway",
    "start": "293759",
    "end": "295919"
  },
  {
    "text": "we're actually going to set the profile",
    "start": "295919",
    "end": "297440"
  },
  {
    "text": "to empty so we're starting with a fresh",
    "start": "297440",
    "end": "299440"
  },
  {
    "text": "clean slate deploy no components",
    "start": "299440",
    "end": "302080"
  },
  {
    "text": "except",
    "start": "302080",
    "end": "303120"
  },
  {
    "text": "the components that i have listed below",
    "start": "303120",
    "end": "305840"
  },
  {
    "text": "so what we have is",
    "start": "305840",
    "end": "308000"
  },
  {
    "text": "we've specified that i want to disable",
    "start": "308000",
    "end": "310560"
  },
  {
    "text": "auto scaling so we need to disable auto",
    "start": "310560",
    "end": "313039"
  },
  {
    "text": "scaling because we don't want it to",
    "start": "313039",
    "end": "314080"
  },
  {
    "text": "scale up and down for our lab which",
    "start": "314080",
    "end": "316000"
  },
  {
    "text": "makes debugging a little bit harder so",
    "start": "316000",
    "end": "317680"
  },
  {
    "text": "this is more just for lab purposes and",
    "start": "317680",
    "end": "320000"
  },
  {
    "text": "then for the components we're deploying",
    "start": "320000",
    "end": "322080"
  },
  {
    "text": "deploying the ingress gateway and then",
    "start": "322080",
    "end": "325039"
  },
  {
    "text": "this is where you can specify any",
    "start": "325039",
    "end": "327199"
  },
  {
    "text": "customizations you might have for your",
    "start": "327199",
    "end": "329280"
  },
  {
    "text": "ingress gateway",
    "start": "329280",
    "end": "332080"
  },
  {
    "text": "there was a question on slack this",
    "start": "332160",
    "end": "333680"
  },
  {
    "text": "morning about",
    "start": "333680",
    "end": "335840"
  },
  {
    "text": "can you run istio components and then",
    "start": "335840",
    "end": "339199"
  },
  {
    "text": "create an affinity to a particular node",
    "start": "339199",
    "end": "341440"
  },
  {
    "text": "so if you wanted your ingress gateways",
    "start": "341440",
    "end": "343680"
  },
  {
    "text": "tied to a to a few set of nodes let's",
    "start": "343680",
    "end": "346160"
  },
  {
    "text": "say you have edge nodes that have",
    "start": "346160",
    "end": "348800"
  },
  {
    "text": "internet access and you only want to run",
    "start": "348800",
    "end": "350800"
  },
  {
    "text": "your gateway components on those nodes",
    "start": "350800",
    "end": "352800"
  },
  {
    "text": "then this is a place where you would",
    "start": "352800",
    "end": "354080"
  },
  {
    "text": "declare that that node affinity uh",
    "start": "354080",
    "end": "356479"
  },
  {
    "text": "whether that's preferred or required etc",
    "start": "356479",
    "end": "359440"
  },
  {
    "text": "the the spec the customizations that",
    "start": "359440",
    "end": "361919"
  },
  {
    "text": "we're doing in this lab is we have this",
    "start": "361919",
    "end": "364319"
  },
  {
    "text": "pre-stop life cycle configured so this",
    "start": "364319",
    "end": "367280"
  },
  {
    "text": "basically says",
    "start": "367280",
    "end": "368639"
  },
  {
    "text": "it wants envoy to sleep for five seconds",
    "start": "368639",
    "end": "371520"
  },
  {
    "text": "before",
    "start": "371520",
    "end": "372639"
  },
  {
    "text": "completely terminating so that if you",
    "start": "372639",
    "end": "374319"
  },
  {
    "text": "have any active connections give them",
    "start": "374319",
    "end": "376400"
  },
  {
    "text": "time to drain",
    "start": "376400",
    "end": "377840"
  },
  {
    "text": "this is a this is a setting that a lot",
    "start": "377840",
    "end": "379840"
  },
  {
    "text": "of our production users use because",
    "start": "379840",
    "end": "382000"
  },
  {
    "text": "they're noticing that as when envoy is",
    "start": "382000",
    "end": "384880"
  },
  {
    "text": "scaling up and down",
    "start": "384880",
    "end": "386400"
  },
  {
    "text": "probably down uh that some of their",
    "start": "386400",
    "end": "388479"
  },
  {
    "text": "connections are getting dropped because",
    "start": "388479",
    "end": "389919"
  },
  {
    "text": "of how quickly it terminates so this",
    "start": "389919",
    "end": "392639"
  },
  {
    "text": "tells it to sleep for five seconds which",
    "start": "392639",
    "end": "394639"
  },
  {
    "text": "gives you a chance to which gives envoy",
    "start": "394639",
    "end": "396479"
  },
  {
    "text": "a chance to finish handling all the",
    "start": "396479",
    "end": "398160"
  },
  {
    "text": "connections before terminating",
    "start": "398160",
    "end": "400160"
  },
  {
    "text": "okay",
    "start": "400160",
    "end": "401680"
  },
  {
    "text": "so",
    "start": "401680",
    "end": "403039"
  },
  {
    "text": "now let's create a new namespace for the",
    "start": "403039",
    "end": "405840"
  },
  {
    "text": "ingress",
    "start": "405840",
    "end": "406840"
  },
  {
    "text": "gateway um",
    "start": "406840",
    "end": "409759"
  },
  {
    "text": "the common practice up until now has",
    "start": "409759",
    "end": "411680"
  },
  {
    "text": "been to",
    "start": "411680",
    "end": "412960"
  },
  {
    "text": "deploy the istio ingress gateway system",
    "start": "412960",
    "end": "415120"
  },
  {
    "text": "right next to istio d right in the istio",
    "start": "415120",
    "end": "417199"
  },
  {
    "text": "system namespace but now the best",
    "start": "417199",
    "end": "419199"
  },
  {
    "text": "practice is to split that up so we're",
    "start": "419199",
    "end": "421680"
  },
  {
    "text": "creating a new namespace called istio",
    "start": "421680",
    "end": "423520"
  },
  {
    "text": "ingress and then we're using the",
    "start": "423520",
    "end": "425039"
  },
  {
    "text": "istiocado install command to to deploy",
    "start": "425039",
    "end": "428800"
  },
  {
    "text": "the ingress gateway to this new",
    "start": "428800",
    "end": "430160"
  },
  {
    "text": "namespace",
    "start": "430160",
    "end": "432639"
  },
  {
    "text": "so if i list the pods in",
    "start": "434319",
    "end": "437520"
  },
  {
    "text": "my istio ingress namespace you can see",
    "start": "437520",
    "end": "439440"
  },
  {
    "text": "that i have",
    "start": "439440",
    "end": "440639"
  },
  {
    "text": "the ingress gateway come up",
    "start": "440639",
    "end": "443840"
  },
  {
    "text": "and then we're going to set an",
    "start": "447120",
    "end": "448000"
  },
  {
    "text": "environment variable so that we can",
    "start": "448000",
    "end": "450639"
  },
  {
    "text": "get the ip address of the ingress",
    "start": "450639",
    "end": "452240"
  },
  {
    "text": "gateway easier",
    "start": "452240",
    "end": "455120"
  },
  {
    "text": "i'm also just going to",
    "start": "456319",
    "end": "458160"
  },
  {
    "text": "echo this",
    "start": "458160",
    "end": "459520"
  },
  {
    "text": "environment variable that i just set",
    "start": "459520",
    "end": "461599"
  },
  {
    "text": "so that you can see that you know one it",
    "start": "461599",
    "end": "463440"
  },
  {
    "text": "got set properly and the two that it's a",
    "start": "463440",
    "end": "466160"
  },
  {
    "text": "it's a normal ip address that you'd be",
    "start": "466160",
    "end": "467680"
  },
  {
    "text": "able to use to call",
    "start": "467680",
    "end": "469280"
  },
  {
    "text": "your ingress gateway",
    "start": "469280",
    "end": "472840"
  },
  {
    "text": "okay so hd ingress gateway is installed",
    "start": "479280",
    "end": "481680"
  },
  {
    "text": "it's running means it's talking to sdod",
    "start": "481680",
    "end": "483759"
  },
  {
    "text": "all as well so now let's configure this",
    "start": "483759",
    "end": "485680"
  },
  {
    "text": "istio ingress gateway to send traffic to",
    "start": "485680",
    "end": "488479"
  },
  {
    "text": "my application",
    "start": "488479",
    "end": "490960"
  },
  {
    "text": "and as you know from the lab this",
    "start": "490960",
    "end": "492879"
  },
  {
    "text": "morning oh that you do that by creating",
    "start": "492879",
    "end": "495759"
  },
  {
    "text": "the istio gateway and virtual service",
    "start": "495759",
    "end": "497520"
  },
  {
    "text": "object you use the gateway to declare",
    "start": "497520",
    "end": "499759"
  },
  {
    "text": "what basically host and port you want to",
    "start": "499759",
    "end": "502000"
  },
  {
    "text": "listen on and then virtual service to",
    "start": "502000",
    "end": "504240"
  },
  {
    "text": "route that traffic to one of the",
    "start": "504240",
    "end": "506400"
  },
  {
    "text": "services in your mesh",
    "start": "506400",
    "end": "509599"
  },
  {
    "text": "so we're not going to look at that",
    "start": "509840",
    "end": "510879"
  },
  {
    "text": "virtual service and gateway but there",
    "start": "510879",
    "end": "513518"
  },
  {
    "text": "are they're already there in this",
    "start": "513519",
    "end": "515360"
  },
  {
    "text": "ingress folder",
    "start": "515360",
    "end": "516640"
  },
  {
    "text": "so we're going to apply those to virtual",
    "start": "516640",
    "end": "518719"
  },
  {
    "text": "service and gateway",
    "start": "518719",
    "end": "521839"
  },
  {
    "text": "and then if you do your curl",
    "start": "522159",
    "end": "524080"
  },
  {
    "text": "and specify the host",
    "start": "524080",
    "end": "525839"
  },
  {
    "text": "of istio inaction.io",
    "start": "525839",
    "end": "528240"
  },
  {
    "text": "and go to the gateway ip address",
    "start": "528240",
    "end": "530640"
  },
  {
    "text": "you should get your response back from",
    "start": "530640",
    "end": "533200"
  },
  {
    "text": "from the from the microservice sample",
    "start": "533200",
    "end": "534880"
  },
  {
    "text": "that we deployed earlier this morning",
    "start": "534880",
    "end": "538720"
  },
  {
    "text": "all good so far",
    "start": "540480",
    "end": "543279"
  },
  {
    "text": "great this session's all about",
    "start": "546839",
    "end": "550480"
  },
  {
    "text": "getting information",
    "start": "550480",
    "end": "552000"
  },
  {
    "text": "from",
    "start": "552000",
    "end": "553040"
  },
  {
    "text": "the various envoy components right so",
    "start": "553040",
    "end": "555279"
  },
  {
    "text": "this is the traffic is is going well",
    "start": "555279",
    "end": "557279"
  },
  {
    "text": "everything is going good but let's say",
    "start": "557279",
    "end": "559120"
  },
  {
    "text": "we want",
    "start": "559120",
    "end": "560480"
  },
  {
    "text": "to get more information",
    "start": "560480",
    "end": "562480"
  },
  {
    "text": "um you know we've learned a little bit",
    "start": "562480",
    "end": "564480"
  },
  {
    "text": "about how envoy is configured this",
    "start": "564480",
    "end": "566240"
  },
  {
    "text": "morning let's say we want to get that",
    "start": "566240",
    "end": "568080"
  },
  {
    "text": "informations and take a look at that so",
    "start": "568080",
    "end": "570080"
  },
  {
    "text": "there's the istio config istiocado proxy",
    "start": "570080",
    "end": "572560"
  },
  {
    "text": "config command",
    "start": "572560",
    "end": "574640"
  },
  {
    "text": "and this command is extremely powerful",
    "start": "574640",
    "end": "577440"
  },
  {
    "text": "you can use istiocado proxy config to",
    "start": "577440",
    "end": "580240"
  },
  {
    "text": "get the envoy configuration of any pod",
    "start": "580240",
    "end": "583920"
  },
  {
    "text": "of any envoy pod right whether it's an",
    "start": "583920",
    "end": "586399"
  },
  {
    "text": "envoy",
    "start": "586399",
    "end": "587760"
  },
  {
    "text": "sidecar of one of your pods or if it's",
    "start": "587760",
    "end": "590640"
  },
  {
    "text": "the ingress gateway which is also envoy",
    "start": "590640",
    "end": "592959"
  },
  {
    "text": "so you can point it at any one of these",
    "start": "592959",
    "end": "595279"
  },
  {
    "text": "and get the configuration out of it so",
    "start": "595279",
    "end": "597360"
  },
  {
    "text": "you can do a full config dump which will",
    "start": "597360",
    "end": "599120"
  },
  {
    "text": "be like thousands and thousands of lines",
    "start": "599120",
    "end": "601360"
  },
  {
    "text": "but you can also specify um",
    "start": "601360",
    "end": "605600"
  },
  {
    "text": "exactly what you want to see so in this",
    "start": "605600",
    "end": "607600"
  },
  {
    "text": "case we only want to look at the routes",
    "start": "607600",
    "end": "610000"
  },
  {
    "text": "that the ingress gateway",
    "start": "610000",
    "end": "611920"
  },
  {
    "text": "pod is configured with so istio cuddle",
    "start": "611920",
    "end": "614399"
  },
  {
    "text": "proxy config routes and then we're going",
    "start": "614399",
    "end": "616640"
  },
  {
    "text": "to point it at our ingress gateway",
    "start": "616640",
    "end": "618079"
  },
  {
    "text": "deployment",
    "start": "618079",
    "end": "619440"
  },
  {
    "text": "and then you can see that there it's",
    "start": "619440",
    "end": "621760"
  },
  {
    "text": "configured to handle this host name",
    "start": "621760",
    "end": "625120"
  },
  {
    "text": "and it's going to listen on this port",
    "start": "625120",
    "end": "626800"
  },
  {
    "text": "and this is the domain",
    "start": "626800",
    "end": "629680"
  },
  {
    "text": "now if you're um",
    "start": "629920",
    "end": "632560"
  },
  {
    "text": "if you're good with envoy configuration",
    "start": "632560",
    "end": "635279"
  },
  {
    "text": "um and you actually want to see more",
    "start": "635279",
    "end": "637279"
  },
  {
    "text": "details and not just this like",
    "start": "637279",
    "end": "638880"
  },
  {
    "text": "simplified table form then you can also",
    "start": "638880",
    "end": "642320"
  },
  {
    "text": "you know specify the route that you want",
    "start": "642320",
    "end": "644320"
  },
  {
    "text": "and then do dash",
    "start": "644320",
    "end": "645920"
  },
  {
    "text": "o json and then see the full envoy",
    "start": "645920",
    "end": "648320"
  },
  {
    "text": "configuration now this is going to look",
    "start": "648320",
    "end": "650240"
  },
  {
    "text": "very familiar to you because this",
    "start": "650240",
    "end": "652000"
  },
  {
    "text": "morning in the lab we this is where we",
    "start": "652000",
    "end": "653839"
  },
  {
    "text": "set the retries as well as the timeouts",
    "start": "653839",
    "end": "656880"
  },
  {
    "text": "that's this configuration this is what",
    "start": "656880",
    "end": "658959"
  },
  {
    "text": "istio generated for you",
    "start": "658959",
    "end": "662640"
  },
  {
    "text": "okay",
    "start": "664480",
    "end": "665920"
  },
  {
    "text": "so that's so i could also point my",
    "start": "665920",
    "end": "667839"
  },
  {
    "text": "stocato proxy config to my http bin",
    "start": "667839",
    "end": "670720"
  },
  {
    "text": "service and get a similar output",
    "start": "670720",
    "end": "675079"
  },
  {
    "text": "next",
    "start": "675440",
    "end": "676480"
  },
  {
    "text": "let's secure this traffic the the",
    "start": "676480",
    "end": "678800"
  },
  {
    "text": "gateway that we've created",
    "start": "678800",
    "end": "680959"
  },
  {
    "text": "for this example it's just listening on",
    "start": "680959",
    "end": "683120"
  },
  {
    "text": "port 80 and it's not doing any any type",
    "start": "683120",
    "end": "685200"
  },
  {
    "text": "of tls",
    "start": "685200",
    "end": "686399"
  },
  {
    "text": "so and in order for you to do to tls",
    "start": "686399",
    "end": "688800"
  },
  {
    "text": "then you need to provide a certificate",
    "start": "688800",
    "end": "690399"
  },
  {
    "text": "that you need to that the gateway should",
    "start": "690399",
    "end": "692160"
  },
  {
    "text": "present to the clients that's calling it",
    "start": "692160",
    "end": "696000"
  },
  {
    "text": "first thing you need if you want to do",
    "start": "697600",
    "end": "700320"
  },
  {
    "text": "tls at the edge is you need to create a",
    "start": "700320",
    "end": "702720"
  },
  {
    "text": "secret",
    "start": "702720",
    "end": "704880"
  },
  {
    "text": "and that secret is going to have your",
    "start": "704880",
    "end": "707440"
  },
  {
    "text": "your your certificate and key so that's",
    "start": "707440",
    "end": "710000"
  },
  {
    "text": "what this command is doing is in the",
    "start": "710000",
    "end": "712240"
  },
  {
    "text": "istio ingress namespace the same",
    "start": "712240",
    "end": "714160"
  },
  {
    "text": "namespace where you have your gateway",
    "start": "714160",
    "end": "716560"
  },
  {
    "text": "deployment running you want to create",
    "start": "716560",
    "end": "718800"
  },
  {
    "text": "the secret because",
    "start": "718800",
    "end": "721200"
  },
  {
    "text": "envoy",
    "start": "721200",
    "end": "722399"
  },
  {
    "text": "that istio gateway envoy is the one",
    "start": "722399",
    "end": "724720"
  },
  {
    "text": "that's doing this edge termination so it",
    "start": "724720",
    "end": "726480"
  },
  {
    "text": "needs access to the secret so regardless",
    "start": "726480",
    "end": "728800"
  },
  {
    "text": "of where you created your gateway",
    "start": "728800",
    "end": "730480"
  },
  {
    "text": "resource your um your virtual service",
    "start": "730480",
    "end": "733279"
  },
  {
    "text": "and gateway resource those could be in",
    "start": "733279",
    "end": "734800"
  },
  {
    "text": "other name spaces but the secret that",
    "start": "734800",
    "end": "737440"
  },
  {
    "text": "you are you that you want that you want",
    "start": "737440",
    "end": "739839"
  },
  {
    "text": "the gateway to use for edge termination",
    "start": "739839",
    "end": "742079"
  },
  {
    "text": "needs to reside in the same name space",
    "start": "742079",
    "end": "744399"
  },
  {
    "text": "as um as where your gateway is actually",
    "start": "744399",
    "end": "746720"
  },
  {
    "text": "running so that's what this is doing",
    "start": "746720",
    "end": "749839"
  },
  {
    "text": "so it's creating that secret",
    "start": "749839",
    "end": "752079"
  },
  {
    "text": "and then once that secret is there we're",
    "start": "752079",
    "end": "754560"
  },
  {
    "text": "going to",
    "start": "754560",
    "end": "756800"
  },
  {
    "text": "update the gateway this time",
    "start": "756800",
    "end": "759680"
  },
  {
    "text": "we're going to have both we're going to",
    "start": "759680",
    "end": "761680"
  },
  {
    "text": "have port 80",
    "start": "761680",
    "end": "763680"
  },
  {
    "text": "with no tls termination",
    "start": "763680",
    "end": "766000"
  },
  {
    "text": "and we also are going to have port 443",
    "start": "766000",
    "end": "769200"
  },
  {
    "text": "that",
    "start": "769200",
    "end": "770160"
  },
  {
    "text": "has tls simple termination that uses the",
    "start": "770160",
    "end": "772720"
  },
  {
    "text": "secret that we just created",
    "start": "772720",
    "end": "775920"
  },
  {
    "text": "so in in production would you do this no",
    "start": "775920",
    "end": "778399"
  },
  {
    "text": "what changes would you would make you'd",
    "start": "778399",
    "end": "780000"
  },
  {
    "text": "remove this port 80.",
    "start": "780000",
    "end": "783120"
  },
  {
    "text": "so let's apply this new gateway",
    "start": "784959",
    "end": "788800"
  },
  {
    "text": "and now",
    "start": "790000",
    "end": "791040"
  },
  {
    "text": "in order to call it",
    "start": "791040",
    "end": "793440"
  },
  {
    "text": "even though i'm using curl i need to",
    "start": "793440",
    "end": "795600"
  },
  {
    "text": "provide",
    "start": "795600",
    "end": "796560"
  },
  {
    "text": "that that root ca",
    "start": "796560",
    "end": "799680"
  },
  {
    "text": "to the coral command",
    "start": "799680",
    "end": "801680"
  },
  {
    "text": "so that it can check the certificate",
    "start": "801680",
    "end": "803680"
  },
  {
    "text": "that",
    "start": "803680",
    "end": "804480"
  },
  {
    "text": "that the istio gateway presented it is",
    "start": "804480",
    "end": "806320"
  },
  {
    "text": "valid against the ca",
    "start": "806320",
    "end": "809600"
  },
  {
    "text": "okay so what we've done is we've created",
    "start": "812720",
    "end": "816720"
  },
  {
    "text": "we've generated these certs and then",
    "start": "816720",
    "end": "818880"
  },
  {
    "text": "created that secret",
    "start": "818880",
    "end": "820720"
  },
  {
    "text": "manually but in production you're not",
    "start": "820720",
    "end": "822959"
  },
  {
    "text": "creating your your secrets with your tls",
    "start": "822959",
    "end": "825680"
  },
  {
    "text": "certificates manually like this you",
    "start": "825680",
    "end": "827680"
  },
  {
    "text": "would use some sort of",
    "start": "827680",
    "end": "830399"
  },
  {
    "text": "like external tools so users might not",
    "start": "830399",
    "end": "832320"
  },
  {
    "text": "have be able to write",
    "start": "832320",
    "end": "834720"
  },
  {
    "text": "anything to the istio ingress namespace",
    "start": "834720",
    "end": "838079"
  },
  {
    "text": "users don't want to manage their own",
    "start": "838079",
    "end": "839519"
  },
  {
    "text": "certificates and they usually integrate",
    "start": "839519",
    "end": "841440"
  },
  {
    "text": "with some external",
    "start": "841440",
    "end": "843279"
  },
  {
    "text": "pki",
    "start": "843279",
    "end": "844560"
  },
  {
    "text": "and certificate management tools like",
    "start": "844560",
    "end": "846240"
  },
  {
    "text": "cert manager so let's let's go through",
    "start": "846240",
    "end": "848639"
  },
  {
    "text": "that flow so let's delete that secret",
    "start": "848639",
    "end": "850880"
  },
  {
    "text": "that we've created manually",
    "start": "850880",
    "end": "853760"
  },
  {
    "text": "so once that secret is deleted if i do",
    "start": "853760",
    "end": "855600"
  },
  {
    "text": "that curl command it's not going to it",
    "start": "855600",
    "end": "857120"
  },
  {
    "text": "shouldn't work anymore",
    "start": "857120",
    "end": "858800"
  },
  {
    "text": "but i think it's it's still picking up",
    "start": "858800",
    "end": "860320"
  },
  {
    "text": "that secret",
    "start": "860320",
    "end": "862639"
  },
  {
    "text": "so once we've deleted that secret let's",
    "start": "862639",
    "end": "864480"
  },
  {
    "text": "recreate it using cert manager",
    "start": "864480",
    "end": "867360"
  },
  {
    "text": "so for that let's install cert manager",
    "start": "867360",
    "end": "869680"
  },
  {
    "text": "we'll create the cert manager namespace",
    "start": "869680",
    "end": "871680"
  },
  {
    "text": "and then download the helm charts first",
    "start": "871680",
    "end": "874639"
  },
  {
    "text": "for insert manager",
    "start": "874639",
    "end": "878079"
  },
  {
    "text": "and then once you've downloaded the helm",
    "start": "879440",
    "end": "880800"
  },
  {
    "text": "charts",
    "start": "880800",
    "end": "881760"
  },
  {
    "text": "do the helm install command",
    "start": "881760",
    "end": "885720"
  },
  {
    "text": "and then verify that",
    "start": "891839",
    "end": "894720"
  },
  {
    "text": "certain manager is up and running",
    "start": "894720",
    "end": "899240"
  },
  {
    "text": "and we'll give that maybe like 10 more",
    "start": "900959",
    "end": "902880"
  },
  {
    "text": "seconds for it to pop up",
    "start": "902880",
    "end": "906920"
  },
  {
    "text": "right now cert manager is not integrated",
    "start": "926320",
    "end": "928720"
  },
  {
    "text": "with any type of pki so it has no way to",
    "start": "928720",
    "end": "932240"
  },
  {
    "text": "get that root ca so we're going to",
    "start": "932240",
    "end": "934320"
  },
  {
    "text": "create a root ca",
    "start": "934320",
    "end": "936000"
  },
  {
    "text": "and then give it to cert manager and",
    "start": "936000",
    "end": "937519"
  },
  {
    "text": "insert manager will use that to generate",
    "start": "937519",
    "end": "939759"
  },
  {
    "text": "whatever certificates that we ask in",
    "start": "939759",
    "end": "942720"
  },
  {
    "text": "so that's what the next section is doing",
    "start": "942720",
    "end": "944480"
  },
  {
    "text": "it's creating a secret for cert manager",
    "start": "944480",
    "end": "947040"
  },
  {
    "text": "to use as a ca",
    "start": "947040",
    "end": "950079"
  },
  {
    "text": "and then",
    "start": "950800",
    "end": "952160"
  },
  {
    "text": "once that's done um",
    "start": "952160",
    "end": "955040"
  },
  {
    "text": "with cert manager",
    "start": "955040",
    "end": "956639"
  },
  {
    "text": "you create this",
    "start": "956639",
    "end": "958480"
  },
  {
    "text": "cluster issuer object",
    "start": "958480",
    "end": "961600"
  },
  {
    "text": "and then that and then you tell that",
    "start": "961600",
    "end": "963759"
  },
  {
    "text": "object where you want to",
    "start": "963759",
    "end": "966639"
  },
  {
    "text": "store the secret that you want it to",
    "start": "966639",
    "end": "968720"
  },
  {
    "text": "generate so we're saying create a secret",
    "start": "968720",
    "end": "971360"
  },
  {
    "text": "called certain manager case herds or you",
    "start": "971360",
    "end": "973519"
  },
  {
    "text": "know that's where we're asking it to",
    "start": "973519",
    "end": "974639"
  },
  {
    "text": "pick up that case hurts",
    "start": "974639",
    "end": "977839"
  },
  {
    "text": "and that's the ca issuer",
    "start": "979279",
    "end": "983839"
  },
  {
    "text": "once that you've issued that then",
    "start": "984959",
    "end": "988240"
  },
  {
    "text": "now let's ask it to create a certificate",
    "start": "988240",
    "end": "992240"
  },
  {
    "text": "you create a certificate resource",
    "start": "993040",
    "end": "995440"
  },
  {
    "text": "and then this is where you would tell it",
    "start": "995440",
    "end": "996880"
  },
  {
    "text": "what type of certificate you want",
    "start": "996880",
    "end": "998880"
  },
  {
    "text": "when do you want it to expire the",
    "start": "998880",
    "end": "1000560"
  },
  {
    "text": "duration of it your organization",
    "start": "1000560",
    "end": "1004000"
  },
  {
    "text": "and then at the very bottom",
    "start": "1004000",
    "end": "1006320"
  },
  {
    "text": "should be",
    "start": "1006320",
    "end": "1009560"
  },
  {
    "text": "the ca that you wanted to pick up",
    "start": "1010399",
    "end": "1014399"
  },
  {
    "text": "and then the secret name",
    "start": "1014480",
    "end": "1017360"
  },
  {
    "text": "will be the secret that it's going to",
    "start": "1017360",
    "end": "1018720"
  },
  {
    "text": "generate in the istio ingress namespace",
    "start": "1018720",
    "end": "1021279"
  },
  {
    "text": "so this is the one that you generated",
    "start": "1021279",
    "end": "1023040"
  },
  {
    "text": "manually in the previous section now",
    "start": "1023040",
    "end": "1024959"
  },
  {
    "text": "we're asking cert manager to do it for",
    "start": "1024959",
    "end": "1026720"
  },
  {
    "text": "you",
    "start": "1026720",
    "end": "1028880"
  },
  {
    "text": "oops i copy pasted the wrong thing",
    "start": "1029280",
    "end": "1033439"
  },
  {
    "text": "okay",
    "start": "1035360",
    "end": "1038360"
  },
  {
    "text": "and then verify that it got picked up",
    "start": "1039679",
    "end": "1043360"
  },
  {
    "text": "i'm going to wait a couple minutes for",
    "start": "1049200",
    "end": "1050720"
  },
  {
    "text": "people to catch up",
    "start": "1050720",
    "end": "1053840"
  },
  {
    "text": "this next command will download the",
    "start": "1071840",
    "end": "1074000"
  },
  {
    "text": "secret that cert manager created and",
    "start": "1074000",
    "end": "1076720"
  },
  {
    "text": "then it's just doing a",
    "start": "1076720",
    "end": "1078720"
  },
  {
    "text": "like a base64 decode and then using step",
    "start": "1078720",
    "end": "1082400"
  },
  {
    "text": "to inspect the certificate",
    "start": "1082400",
    "end": "1084240"
  },
  {
    "text": "and what we're looking for is to make",
    "start": "1084240",
    "end": "1085679"
  },
  {
    "text": "sure that that the san",
    "start": "1085679",
    "end": "1088480"
  },
  {
    "text": "matches",
    "start": "1088480",
    "end": "1090320"
  },
  {
    "text": "um",
    "start": "1090320",
    "end": "1092799"
  },
  {
    "text": "yep",
    "start": "1093120",
    "end": "1095840"
  },
  {
    "text": "right here",
    "start": "1096320",
    "end": "1097200"
  },
  {
    "text": "this x5 509 v3 subject alternative name",
    "start": "1097200",
    "end": "1100720"
  },
  {
    "text": "so that has to match the host name that",
    "start": "1100720",
    "end": "1102640"
  },
  {
    "text": "we're going to use to call a steering",
    "start": "1102640",
    "end": "1104000"
  },
  {
    "text": "risk gateway",
    "start": "1104000",
    "end": "1106640"
  },
  {
    "text": "now that this is there in place now if",
    "start": "1107679",
    "end": "1109520"
  },
  {
    "text": "we call the istio ingress gateway again",
    "start": "1109520",
    "end": "1112559"
  },
  {
    "text": "and pass it that route ca we should get",
    "start": "1112559",
    "end": "1114880"
  },
  {
    "text": "a valid response back from",
    "start": "1114880",
    "end": "1117280"
  },
  {
    "text": "from our gateway",
    "start": "1117280",
    "end": "1120679"
  },
  {
    "text": "everyone with me",
    "start": "1130559",
    "end": "1132480"
  },
  {
    "text": "cool",
    "start": "1132480",
    "end": "1135480"
  },
  {
    "text": "how you would change this",
    "start": "1138400",
    "end": "1139919"
  },
  {
    "text": "in production you'd probably have",
    "start": "1139919",
    "end": "1141440"
  },
  {
    "text": "something like vault",
    "start": "1141440",
    "end": "1142880"
  },
  {
    "text": "and you'd have certain manager connected",
    "start": "1142880",
    "end": "1144720"
  },
  {
    "text": "to vault",
    "start": "1144720",
    "end": "1145760"
  },
  {
    "text": "and vault would have your root ca",
    "start": "1145760",
    "end": "1150039"
  },
  {
    "text": "okay",
    "start": "1153600",
    "end": "1155039"
  },
  {
    "text": "so the next section is",
    "start": "1155039",
    "end": "1157280"
  },
  {
    "text": "we're going to start getting towards",
    "start": "1157280",
    "end": "1159919"
  },
  {
    "text": "reducing the amount of configuration",
    "start": "1159919",
    "end": "1162720"
  },
  {
    "text": "that is being passed around everywhere",
    "start": "1162720",
    "end": "1165679"
  },
  {
    "text": "um if",
    "start": "1165679",
    "end": "1168080"
  },
  {
    "text": "if you're running a small cluster",
    "start": "1168080",
    "end": "1170480"
  },
  {
    "text": "um let me define what like a small",
    "start": "1170480",
    "end": "1172240"
  },
  {
    "text": "environment would be you know something",
    "start": "1172240",
    "end": "1173919"
  },
  {
    "text": "like",
    "start": "1173919",
    "end": "1175200"
  },
  {
    "text": "less than you know 20 namespaces i guess",
    "start": "1175200",
    "end": "1178240"
  },
  {
    "text": "i should really be talking about the",
    "start": "1178240",
    "end": "1179440"
  },
  {
    "text": "number of workloads that are in the mesh",
    "start": "1179440",
    "end": "1181200"
  },
  {
    "text": "so number of services so like if you're",
    "start": "1181200",
    "end": "1183440"
  },
  {
    "text": "you know running below 50 or so services",
    "start": "1183440",
    "end": "1185840"
  },
  {
    "text": "in the mesh then i think that you",
    "start": "1185840",
    "end": "1187760"
  },
  {
    "text": "probably won't run into any of this like",
    "start": "1187760",
    "end": "1189840"
  },
  {
    "text": "performance problems related to to scope",
    "start": "1189840",
    "end": "1192799"
  },
  {
    "text": "and configuration that's being pushed",
    "start": "1192799",
    "end": "1194400"
  },
  {
    "text": "around from one namespace to another now",
    "start": "1194400",
    "end": "1197600"
  },
  {
    "text": "that's extremely simplified it really",
    "start": "1197600",
    "end": "1199200"
  },
  {
    "text": "comes down to how many namespaces that",
    "start": "1199200",
    "end": "1200880"
  },
  {
    "text": "you're using",
    "start": "1200880",
    "end": "1202000"
  },
  {
    "text": "the more namespaces the better",
    "start": "1202000",
    "end": "1204000"
  },
  {
    "text": "in terms of how you're delineating all",
    "start": "1204000",
    "end": "1205679"
  },
  {
    "text": "your workloads but you know if you were",
    "start": "1205679",
    "end": "1207600"
  },
  {
    "text": "to have one namespace and i have all",
    "start": "1207600",
    "end": "1209280"
  },
  {
    "text": "your workloads deployed to that one",
    "start": "1209280",
    "end": "1210720"
  },
  {
    "text": "namespace then istio doesn't really know",
    "start": "1210720",
    "end": "1213679"
  },
  {
    "text": "you know",
    "start": "1213679",
    "end": "1214799"
  },
  {
    "text": "what",
    "start": "1214799",
    "end": "1215600"
  },
  {
    "text": "how like which workload's able to talk",
    "start": "1215600",
    "end": "1217360"
  },
  {
    "text": "to what were other workloads so by",
    "start": "1217360",
    "end": "1218960"
  },
  {
    "text": "default it's going to think everyone",
    "start": "1218960",
    "end": "1220720"
  },
  {
    "text": "needs to talk to everyone so",
    "start": "1220720",
    "end": "1222559"
  },
  {
    "text": "every envoy will have to get the full",
    "start": "1222559",
    "end": "1224559"
  },
  {
    "text": "configuration of everything",
    "start": "1224559",
    "end": "1227120"
  },
  {
    "text": "so that's your workloads and there's",
    "start": "1227120",
    "end": "1228880"
  },
  {
    "text": "also the gateway component the gateway",
    "start": "1228880",
    "end": "1231200"
  },
  {
    "text": "component needs to know what workloads",
    "start": "1231200",
    "end": "1233039"
  },
  {
    "text": "that the gateway needs to talk to by",
    "start": "1233039",
    "end": "1235120"
  },
  {
    "text": "default the gateway has a configuration",
    "start": "1235120",
    "end": "1238000"
  },
  {
    "text": "to talk to all the workloads in the mesh",
    "start": "1238000",
    "end": "1240720"
  },
  {
    "text": "and",
    "start": "1240720",
    "end": "1242000"
  },
  {
    "text": "and that starts becoming a problem for",
    "start": "1242000",
    "end": "1244720"
  },
  {
    "text": "some of our larger enterprise",
    "start": "1244720",
    "end": "1246320"
  },
  {
    "text": "deployments of istio so let's take a",
    "start": "1246320",
    "end": "1248400"
  },
  {
    "text": "look at that so if you",
    "start": "1248400",
    "end": "1250480"
  },
  {
    "text": "use the istiocado proxy config command",
    "start": "1250480",
    "end": "1253520"
  },
  {
    "text": "but this time instead of routes let's",
    "start": "1253520",
    "end": "1255200"
  },
  {
    "text": "use clusters clusters are all your",
    "start": "1255200",
    "end": "1257039"
  },
  {
    "text": "endpoints right that",
    "start": "1257039",
    "end": "1258640"
  },
  {
    "text": "the destinations that you can talk to",
    "start": "1258640",
    "end": "1261120"
  },
  {
    "text": "and then point that at the istio ingress",
    "start": "1261120",
    "end": "1263200"
  },
  {
    "text": "gateway component",
    "start": "1263200",
    "end": "1265440"
  },
  {
    "text": "even in our small environment where we",
    "start": "1265440",
    "end": "1268159"
  },
  {
    "text": "only have",
    "start": "1268159",
    "end": "1270000"
  },
  {
    "text": "just one service in the mesh",
    "start": "1270000",
    "end": "1272080"
  },
  {
    "text": "look at all of the various",
    "start": "1272080",
    "end": "1274400"
  },
  {
    "text": "clusters envoy clusters that the istio",
    "start": "1274400",
    "end": "1277520"
  },
  {
    "text": "gateway knows about you can imagine like",
    "start": "1277520",
    "end": "1279919"
  },
  {
    "text": "in in a in a bigger larger scale",
    "start": "1279919",
    "end": "1282080"
  },
  {
    "text": "environment this is going to get quickly",
    "start": "1282080",
    "end": "1284240"
  },
  {
    "text": "you know into like hundreds of entries",
    "start": "1284240",
    "end": "1287840"
  },
  {
    "text": "and you saw how much json goes into",
    "start": "1287840",
    "end": "1290080"
  },
  {
    "text": "defining every one of these clusters so",
    "start": "1290080",
    "end": "1292080"
  },
  {
    "text": "it's a lot of config that gets pushed",
    "start": "1292080",
    "end": "1293760"
  },
  {
    "text": "around",
    "start": "1293760",
    "end": "1294720"
  },
  {
    "text": "so",
    "start": "1294720",
    "end": "1296880"
  },
  {
    "text": "eight minute warning and then that's the",
    "start": "1298640",
    "end": "1300480"
  },
  {
    "text": "end okay",
    "start": "1300480",
    "end": "1302840"
  },
  {
    "text": "wow",
    "start": "1302840",
    "end": "1304720"
  },
  {
    "text": "um okay some of the best practices would",
    "start": "1304720",
    "end": "1307440"
  },
  {
    "text": "be to",
    "start": "1307440",
    "end": "1308720"
  },
  {
    "text": "um",
    "start": "1308720",
    "end": "1309679"
  },
  {
    "text": "istio operator has this pilot filter",
    "start": "1309679",
    "end": "1312000"
  },
  {
    "text": "gateway cluster config environment",
    "start": "1312000",
    "end": "1314080"
  },
  {
    "text": "variable that you can define in your",
    "start": "1314080",
    "end": "1315440"
  },
  {
    "text": "istio operator file and that tells the",
    "start": "1315440",
    "end": "1318240"
  },
  {
    "text": "gateway to only get the information that",
    "start": "1318240",
    "end": "1322000"
  },
  {
    "text": "there's routing rules defined to so if",
    "start": "1322000",
    "end": "1324000"
  },
  {
    "text": "you have a virtual service that says",
    "start": "1324000",
    "end": "1325360"
  },
  {
    "text": "gateway needs to talk to product page",
    "start": "1325360",
    "end": "1327360"
  },
  {
    "text": "then only send gateway the product page",
    "start": "1327360",
    "end": "1330000"
  },
  {
    "text": "information you don't need to know about",
    "start": "1330000",
    "end": "1331919"
  },
  {
    "text": "any other services in the mesh so once",
    "start": "1331919",
    "end": "1334240"
  },
  {
    "text": "that's deployed",
    "start": "1334240",
    "end": "1335600"
  },
  {
    "text": "um",
    "start": "1335600",
    "end": "1337600"
  },
  {
    "text": "if you check the proxy config clusters",
    "start": "1337600",
    "end": "1339760"
  },
  {
    "text": "again",
    "start": "1339760",
    "end": "1342080"
  },
  {
    "text": "we're going to have to take you know",
    "start": "1342159",
    "end": "1343200"
  },
  {
    "text": "let's take give it a couple minutes to",
    "start": "1343200",
    "end": "1345600"
  },
  {
    "text": "actually pick up the change",
    "start": "1345600",
    "end": "1349039"
  },
  {
    "text": "there i ran the same proxyconfig",
    "start": "1350960",
    "end": "1352799"
  },
  {
    "text": "clusters command as before but this time",
    "start": "1352799",
    "end": "1354880"
  },
  {
    "text": "i only have like you know three or four",
    "start": "1354880",
    "end": "1357200"
  },
  {
    "text": "entries so much more simpler",
    "start": "1357200",
    "end": "1360640"
  },
  {
    "text": "to get access logs for the gateway you",
    "start": "1360640",
    "end": "1362960"
  },
  {
    "text": "can use the envoy filter api",
    "start": "1362960",
    "end": "1366000"
  },
  {
    "text": "and then this allows you to be very",
    "start": "1366000",
    "end": "1368559"
  },
  {
    "text": "specific in defining the format that you",
    "start": "1368559",
    "end": "1371280"
  },
  {
    "text": "want your log output to be",
    "start": "1371280",
    "end": "1373200"
  },
  {
    "text": "um",
    "start": "1373200",
    "end": "1374559"
  },
  {
    "text": "so over here we're we're saying that we",
    "start": "1374559",
    "end": "1376559"
  },
  {
    "text": "want to capture the server name the",
    "start": "1376559",
    "end": "1378159"
  },
  {
    "text": "response flags the response codes etc",
    "start": "1378159",
    "end": "1381280"
  },
  {
    "text": "so if you want to change this you know",
    "start": "1381280",
    "end": "1382960"
  },
  {
    "text": "maybe you want json format this envoy",
    "start": "1382960",
    "end": "1385520"
  },
  {
    "text": "filter is how you would do it",
    "start": "1385520",
    "end": "1387600"
  },
  {
    "text": "okay",
    "start": "1387600",
    "end": "1389520"
  },
  {
    "text": "and then let's apply this access log",
    "start": "1389520",
    "end": "1392480"
  },
  {
    "text": "to",
    "start": "1392480",
    "end": "1394480"
  },
  {
    "text": "the cluster and this envoy filter is",
    "start": "1394480",
    "end": "1397600"
  },
  {
    "text": "actually scoped to the ingress gateway",
    "start": "1397600",
    "end": "1401039"
  },
  {
    "text": "workload you can scope this envoy filter",
    "start": "1401039",
    "end": "1403760"
  },
  {
    "text": "to your workloads as well so if you just",
    "start": "1403760",
    "end": "1406400"
  },
  {
    "text": "wanted access log for your product page",
    "start": "1406400",
    "end": "1408400"
  },
  {
    "text": "application this is how you'd go about",
    "start": "1408400",
    "end": "1410559"
  },
  {
    "text": "you know doing it you'd set the workload",
    "start": "1410559",
    "end": "1412159"
  },
  {
    "text": "selector field",
    "start": "1412159",
    "end": "1415640"
  },
  {
    "text": "so once that's done if i you know send",
    "start": "1418000",
    "end": "1419919"
  },
  {
    "text": "some traffic again to my application and",
    "start": "1419919",
    "end": "1423200"
  },
  {
    "text": "now check the logs of the istio proxy",
    "start": "1423200",
    "end": "1425760"
  },
  {
    "text": "container in the ingress gateway",
    "start": "1425760",
    "end": "1427600"
  },
  {
    "text": "deployment",
    "start": "1427600",
    "end": "1429120"
  },
  {
    "text": "you can see that now i have these",
    "start": "1429120",
    "end": "1431360"
  },
  {
    "text": "new access log entries",
    "start": "1431360",
    "end": "1433440"
  },
  {
    "text": "this is extra i think enabling on",
    "start": "1433440",
    "end": "1436240"
  },
  {
    "text": "access logging is the number one thing",
    "start": "1436240",
    "end": "1438159"
  },
  {
    "text": "you should do to to determine that if",
    "start": "1438159",
    "end": "1440400"
  },
  {
    "text": "there is a problem in your network if",
    "start": "1440400",
    "end": "1442320"
  },
  {
    "text": "you know that it's not i have three",
    "start": "1442320",
    "end": "1444080"
  },
  {
    "text": "minutes if you know it's not a",
    "start": "1444080",
    "end": "1445360"
  },
  {
    "text": "configuration problem then but things",
    "start": "1445360",
    "end": "1448159"
  },
  {
    "text": "are still not working well enable access",
    "start": "1448159",
    "end": "1450559"
  },
  {
    "text": "log if it's a small environment you can",
    "start": "1450559",
    "end": "1452799"
  },
  {
    "text": "just remove the workload selector so",
    "start": "1452799",
    "end": "1454559"
  },
  {
    "text": "that it gets applied to everywhere and",
    "start": "1454559",
    "end": "1456320"
  },
  {
    "text": "then just check the logs of all the",
    "start": "1456320",
    "end": "1457840"
  },
  {
    "text": "proxies and then you'll be able to see",
    "start": "1457840",
    "end": "1460720"
  },
  {
    "text": "you know where exactly your is your",
    "start": "1460720",
    "end": "1462880"
  },
  {
    "text": "request is being routed to in this case",
    "start": "1462880",
    "end": "1465279"
  },
  {
    "text": "this is the envoy cluster that is being",
    "start": "1465279",
    "end": "1466880"
  },
  {
    "text": "routed to this is my response code etc",
    "start": "1466880",
    "end": "1470799"
  },
  {
    "text": "okay so we're done with that lab um so",
    "start": "1470799",
    "end": "1473520"
  },
  {
    "text": "we finished lab four but it's it's a we",
    "start": "1473520",
    "end": "1476480"
  },
  {
    "text": "spent all of our time on lab four",
    "start": "1476480",
    "end": "1478640"
  },
  {
    "text": "but it's a good lab okay",
    "start": "1478640",
    "end": "1480960"
  },
  {
    "text": "the next labs you know we're we'll talk",
    "start": "1480960",
    "end": "1483200"
  },
  {
    "text": "about rolling out one service at a time",
    "start": "1483200",
    "end": "1485600"
  },
  {
    "text": "we did a little bit of this in lab two",
    "start": "1485600",
    "end": "1488080"
  },
  {
    "text": "you follow the same principles in in lab",
    "start": "1488080",
    "end": "1490320"
  },
  {
    "text": "four where you load one service at a",
    "start": "1490320",
    "end": "1493120"
  },
  {
    "text": "time by doing the cube cuddle inject or",
    "start": "1493120",
    "end": "1495919"
  },
  {
    "text": "by deploying a canary version of each",
    "start": "1495919",
    "end": "1498480"
  },
  {
    "text": "one of these services next to your your",
    "start": "1498480",
    "end": "1501600"
  },
  {
    "text": "real version and the canary version will",
    "start": "1501600",
    "end": "1504080"
  },
  {
    "text": "have the sidecar your real version",
    "start": "1504080",
    "end": "1506159"
  },
  {
    "text": "doesn't once the the one with the",
    "start": "1506159",
    "end": "1508320"
  },
  {
    "text": "sidecar comes up you send some traffic",
    "start": "1508320",
    "end": "1510400"
  },
  {
    "text": "to it if all is well then you delete the",
    "start": "1510400",
    "end": "1513440"
  },
  {
    "text": "you actually delete the canary and then",
    "start": "1513440",
    "end": "1515440"
  },
  {
    "text": "you restart you do a rolling restart of",
    "start": "1515440",
    "end": "1517760"
  },
  {
    "text": "your main",
    "start": "1517760",
    "end": "1518960"
  },
  {
    "text": "services after you enable the namespace",
    "start": "1518960",
    "end": "1521440"
  },
  {
    "text": "with injection and now the new services",
    "start": "1521440",
    "end": "1523679"
  },
  {
    "text": "that comes up will get the right sidecar",
    "start": "1523679",
    "end": "1525600"
  },
  {
    "text": "and you know it's going to work well and",
    "start": "1525600",
    "end": "1528080"
  },
  {
    "text": "then",
    "start": "1528080",
    "end": "1529520"
  },
  {
    "text": "there's mtls rollout",
    "start": "1529520",
    "end": "1531679"
  },
  {
    "text": "as well as we will dive a little bit",
    "start": "1531679",
    "end": "1533840"
  },
  {
    "text": "more into configuration scope so like i",
    "start": "1533840",
    "end": "1536080"
  },
  {
    "text": "was saying before we will do this lab",
    "start": "1536080",
    "end": "1538240"
  },
  {
    "text": "again if you go to solo.io",
    "start": "1538240",
    "end": "1541039"
  },
  {
    "text": "look for the events page you'll see the",
    "start": "1541039",
    "end": "1543120"
  },
  {
    "text": "various workshops that we run um find",
    "start": "1543120",
    "end": "1545840"
  },
  {
    "text": "the deploy istio and production workshop",
    "start": "1545840",
    "end": "1547679"
  },
  {
    "text": "i actually think we're doing one next",
    "start": "1547679",
    "end": "1549039"
  },
  {
    "text": "week and then",
    "start": "1549039",
    "end": "1551039"
  },
  {
    "text": "yeah sign up for that we'll have much",
    "start": "1551039",
    "end": "1552799"
  },
  {
    "text": "more time to go into this in more detail",
    "start": "1552799",
    "end": "1555039"
  },
  {
    "text": "so with that i want to say",
    "start": "1555039",
    "end": "1557600"
  },
  {
    "text": "thank you and um",
    "start": "1557600",
    "end": "1560159"
  },
  {
    "text": "just like before there's there's badges",
    "start": "1560159",
    "end": "1562159"
  },
  {
    "text": "and surveys as well um so we'll share",
    "start": "1562159",
    "end": "1564720"
  },
  {
    "text": "these two links in the and the slack",
    "start": "1564720",
    "end": "1567200"
  },
  {
    "text": "cool",
    "start": "1567200",
    "end": "1568240"
  },
  {
    "text": "all right well thanks for coming",
    "start": "1568240",
    "end": "1569360"
  },
  {
    "text": "everybody",
    "start": "1569360",
    "end": "1571370"
  },
  {
    "text": "[Applause]",
    "start": "1571370",
    "end": "1576559"
  }
]