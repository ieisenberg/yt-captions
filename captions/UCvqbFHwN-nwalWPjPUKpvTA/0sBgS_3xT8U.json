[
  {
    "text": "welcome everyone thank you for joining us come on in there are some uh there's",
    "start": "240",
    "end": "5460"
  },
  {
    "text": "some additional empty seats well a few of them although they're going are these reserved for somebody are they for",
    "start": "5460",
    "end": "11040"
  },
  {
    "text": "us allegedly what does that say there's a few more seats if you wander up this direction is good",
    "start": "11040",
    "end": "18000"
  },
  {
    "text": "okay that we got reserved there's one here we got a lot of friendly people here at kubecon so make some friends we've got uh empty seats there maybe",
    "start": "18000",
    "end": "24300"
  },
  {
    "text": "raise your hand if you got an empty seat next to you uh and you're and you're interested to meet a new Cube Connor",
    "start": "24300",
    "end": "29400"
  },
  {
    "text": "well we got tons of them up here come on in make room uh we're going to talk about CERN and",
    "start": "29400",
    "end": "35579"
  },
  {
    "text": "what they've done with the operator framework to make their lives easier um I am Michael from Red Hat this is",
    "start": "35579",
    "end": "43020"
  },
  {
    "text": "varsha we're operator framework contributors and maintainers over",
    "start": "43020",
    "end": "48120"
  },
  {
    "text": "various times we also have here with us Francisco and rajula they're sres at",
    "start": "48120",
    "end": "53879"
  },
  {
    "text": "CERN and we're going to talk about how we came together their operator they created caught our eye so they're going",
    "start": "53879",
    "end": "61680"
  },
  {
    "text": "to introduce what they've done we'll discuss a bit amongst ourselves some observations about what they've done",
    "start": "61680",
    "end": "67260"
  },
  {
    "text": "their experience we'll have some discussion over here and then invite you to ask your questions and join in that discussion uh in the latter portion of",
    "start": "67260",
    "end": "74100"
  },
  {
    "text": "this so thank you again for coming and uh rajula please take it away",
    "start": "74100",
    "end": "79150"
  },
  {
    "text": "[Applause] it's just a great bit of introverty so",
    "start": "79150",
    "end": "86040"
  },
  {
    "text": "we're the center for European nuclear research uh we are the world's largest",
    "start": "86040",
    "end": "91159"
  },
  {
    "text": "and the biggest particle accelerator uh this is a one of the accelerators where",
    "start": "91159",
    "end": "98820"
  },
  {
    "text": "we Collide subatomic particles this is called Atlas just to give a bit of Glimpse this weighs among 7000 tons",
    "start": "98820",
    "end": "105420"
  },
  {
    "text": "which is equal to the weight of the Eiffel Tower and this is uh the collider so it's a",
    "start": "105420",
    "end": "111780"
  },
  {
    "text": "let's see uh it's around 27 kilometers in diameter and you see the Geneva Lake",
    "start": "111780",
    "end": "117420"
  },
  {
    "text": "and the Swiss apps in the background and it's not just physics what we do so",
    "start": "117420",
    "end": "122579"
  },
  {
    "text": "CERN is also a place where the worldwide pad was invented and we actually do a bit more than just that",
    "start": "122579",
    "end": "129539"
  },
  {
    "text": "so we have a lot of member states from around the world and the main source of collaboration and communication happens",
    "start": "129539",
    "end": "134879"
  },
  {
    "text": "through websites so we host a lot of websites so we specifically come from the team where we host publicly",
    "start": "134879",
    "end": "141080"
  },
  {
    "text": "available websites like home.7 and atlas.cern so just a quick glimpse of our",
    "start": "141080",
    "end": "148620"
  },
  {
    "text": "infrastructure so we manage content Management Systems basically it's Drupal",
    "start": "148620",
    "end": "154440"
  },
  {
    "text": "instances so the users basically can create update and delete without a lot of technical",
    "start": "154440",
    "end": "160620"
  },
  {
    "text": "knowledge and we want each of these instances to have a life cycle to be autonomous and isolated and we also want",
    "start": "160620",
    "end": "166920"
  },
  {
    "text": "to enforce all the dependent resources and at the same instances should also be",
    "start": "166920",
    "end": "172140"
  },
  {
    "text": "integrated with certain specific stuff like SSO databases and backups",
    "start": "172140",
    "end": "178680"
  },
  {
    "text": "so why operators the first reason would be time saving because we wanted to create and delete sites on the fly so at",
    "start": "178680",
    "end": "187500"
  },
  {
    "text": "this point we have around 1 600 websites of them 809 reproduction websites so we",
    "start": "187500",
    "end": "193620"
  },
  {
    "text": "create previews and test sites on the Fly and standardization so we wanted to reduce inconsistencies and errors with",
    "start": "193620",
    "end": "199800"
  },
  {
    "text": "manual Creations so with operator we have a standard of configuration and the flavor of quality of service",
    "start": "199800",
    "end": "205980"
  },
  {
    "text": "in scalability we want to scale up so if there's a new version of Drupal and we",
    "start": "205980",
    "end": "211200"
  },
  {
    "text": "can just want to create a preview for all the production websites we can just double the number of sites",
    "start": "211200",
    "end": "216360"
  },
  {
    "text": "and we have quite a large number of instances like I mentioned an access control so we also want to",
    "start": "216360",
    "end": "222420"
  },
  {
    "text": "have a fine grained access control of what the users can do what they can access on the sites",
    "start": "222420",
    "end": "228599"
  },
  {
    "text": "and self-healing of course so if someone deletes some of the resources the operator should be able to heal",
    "start": "228599",
    "end": "234180"
  },
  {
    "text": "everything back and bring everything back to normal this is a user portal that we have for",
    "start": "234180",
    "end": "239879"
  },
  {
    "text": "the interface through the operator so most of our users are non-technical users so they use this interface they",
    "start": "239879",
    "end": "246120"
  },
  {
    "text": "just mention the URL they want and the version they want and this translates to a custom resource",
    "start": "246120",
    "end": "252599"
  },
  {
    "text": "definition which is basically just basic stuff it just spins up at site with a",
    "start": "252599",
    "end": "257699"
  },
  {
    "text": "database with integration with SSO and everything else",
    "start": "257699",
    "end": "262280"
  },
  {
    "text": "is the operator publicly available so a lot of stuff is Sun specific in our",
    "start": "263280",
    "end": "268620"
  },
  {
    "text": "operator right now we use a lot of our internal databases we integrate with our own SSO and we assume that we retrieve",
    "start": "268620",
    "end": "276360"
  },
  {
    "text": "images and push images to our own image registry and we also assume our our own",
    "start": "276360",
    "end": "282240"
  },
  {
    "text": "git lab instance so it's technically not open source but it was a consequence of our design",
    "start": "282240",
    "end": "288000"
  },
  {
    "text": "because of the economic environment the code is publicly available",
    "start": "288000",
    "end": "293400"
  },
  {
    "text": "yet there are a lot of Integrations that are coupled with the operator so I'll hand over to Michael",
    "start": "293400",
    "end": "301020"
  },
  {
    "text": "great well thank you uh for that introduction so we've seen a little bit about what they've done and uh it's not",
    "start": "301020",
    "end": "306419"
  },
  {
    "text": "varsha and I have had some discussions with Francisco and rajula uh We've looked through their code and uh one of",
    "start": "306419",
    "end": "313620"
  },
  {
    "text": "the things that really caught our eye and really led to this collaboration and this analysis that we're doing together here is just the fact that they've",
    "start": "313620",
    "end": "320759"
  },
  {
    "text": "created an operator as real end users they are the human operators themselves we see a lot of discussion and a lot of",
    "start": "320759",
    "end": "328020"
  },
  {
    "text": "attention given toward is perfectly reasonable like often vendors creating an operator to install their software",
    "start": "328020",
    "end": "334259"
  },
  {
    "text": "for their customers and their end users but much of the operator pattern really shines when it is the sres The Operators",
    "start": "334259",
    "end": "340860"
  },
  {
    "text": "themselves creating the kubernetes operator to to help them and uh these guys even referred to this operator you",
    "start": "340860",
    "end": "348120"
  },
  {
    "text": "know it's two of them maintaining this incredible number of websites and this infrastructure around it the operator is",
    "start": "348120",
    "end": "353699"
  },
  {
    "text": "the third member of their team and the only one who's working today uh so so",
    "start": "353699",
    "end": "359160"
  },
  {
    "text": "that that's really neat and it's fascinating I think to get that perspective and that view on on what it",
    "start": "359160",
    "end": "364860"
  },
  {
    "text": "is like what the experience has been like to develop and create an operator so one of the things that for me in",
    "start": "364860",
    "end": "370139"
  },
  {
    "text": "particular caught my eye is the multi-tenant aspect and the self-service aspect of this so just for a brief",
    "start": "370139",
    "end": "376500"
  },
  {
    "text": "moment on multi-tenancy what this is what this means to us is we have multiple users or groups of users",
    "start": "376500",
    "end": "383520"
  },
  {
    "text": "we would call tenants right sharing some pool of resources uh probably most of us use like an email",
    "start": "383520",
    "end": "390720"
  },
  {
    "text": "service and a calendar service and some kind of you know Office document uh product that's delivered to us over the",
    "start": "390720",
    "end": "397319"
  },
  {
    "text": "internet as a service right that those are all multi-tenant back-end kinds of systems",
    "start": "397319",
    "end": "403080"
  },
  {
    "text": "tenants have discrete data that needs to stay separate from each other so my email is separate from your email",
    "start": "403080",
    "end": "408960"
  },
  {
    "text": "separate from somebody else's email and we depend on the services to keep those things separate there's a common",
    "start": "408960",
    "end": "415020"
  },
  {
    "text": "characteristic of delivering software as a service or in this case some kind of a software in a self-service fashion",
    "start": "415020",
    "end": "421860"
  },
  {
    "text": "and we can write applications natively to handle that separation",
    "start": "421860",
    "end": "427940"
  },
  {
    "text": "but many vendors and software producers have older school or existing software",
    "start": "427940",
    "end": "434039"
  },
  {
    "text": "that is single tenant something like Drupal uh or WordPress or some other kind of",
    "start": "434039",
    "end": "439500"
  },
  {
    "text": "web application like that or maybe something very domain specific maybe it's an accounting uh software I'm from",
    "start": "439500",
    "end": "445800"
  },
  {
    "text": "the US so taxes are on my mind right now we just had that that day go by",
    "start": "445800",
    "end": "452340"
  },
  {
    "text": "uh so if you have a single tenant web application or some service like that you can still offer it in a self-service",
    "start": "452340",
    "end": "458160"
  },
  {
    "text": "way in perhaps even a software as a service subscription kind of way by using kubernetes namespaces and that is",
    "start": "458160",
    "end": "465780"
  },
  {
    "text": "what namespace level tenancy is uh every tenant that you have gets a unique",
    "start": "465780",
    "end": "471840"
  },
  {
    "text": "namespace in a kubernetes cluster and we just deploy a copy of the application for them in that space it may include a",
    "start": "471840",
    "end": "479460"
  },
  {
    "text": "data store that's unique to them it may not maybe there's a shared database Management Service that's that's",
    "start": "479460",
    "end": "484500"
  },
  {
    "text": "external or or in some ways joined but One Way Or Another We're enforcing that",
    "start": "484500",
    "end": "491520"
  },
  {
    "text": "isolation with namespaces this gives us a pretty easy on-ramp and an easy path to delivering a single tenant",
    "start": "491520",
    "end": "497880"
  },
  {
    "text": "application potentially in a self-service or even a SAS model and and that's what they've done here so I think",
    "start": "497880",
    "end": "503160"
  },
  {
    "text": "it's a really interesting example of that now hand it off to varsha",
    "start": "503160",
    "end": "510660"
  },
  {
    "text": "uh coming on to the next uh observable part we all know operators handle a lot",
    "start": "510660",
    "end": "516479"
  },
  {
    "text": "of complex applications and there are a lot of moving paths too now having metrics alerts and visualization is an",
    "start": "516479",
    "end": "522779"
  },
  {
    "text": "important aspect and they constitute what is known as operator observability now collecting metrics helps us in",
    "start": "522779",
    "end": "528899"
  },
  {
    "text": "providing a deeper insight about what an operator does and how is it behaving",
    "start": "528899",
    "end": "534120"
  },
  {
    "text": "whether it's behaving as expected and having alerts helps sres in cluster admins to make sure that cases do not",
    "start": "534120",
    "end": "541680"
  },
  {
    "text": "turn to be critical so that we don't have to wake up in the night and visualization helps us in getting a",
    "start": "541680",
    "end": "547320"
  },
  {
    "text": "better understanding of these complex moving parts now some of the key reasons why operator observability is important",
    "start": "547320",
    "end": "554459"
  },
  {
    "text": "and something which we Advocate while writing operators is one to quantitatively understand the deployment",
    "start": "554459",
    "end": "561060"
  },
  {
    "text": "success rate in turn the number of successful deployments of the operator workloads which are running on cluster",
    "start": "561060",
    "end": "567180"
  },
  {
    "text": "two having continuous health checks that ensures that the operators performing as",
    "start": "567180",
    "end": "573899"
  },
  {
    "text": "expected at any Institute of time the third and the most important is resource utilization so having an idea on the",
    "start": "573899",
    "end": "581279"
  },
  {
    "text": "resource utilization on cluster by the operator helps in providing a better",
    "start": "581279",
    "end": "586320"
  },
  {
    "text": "understanding of how the operator is performing and if there is anything which we as operator authors can do to",
    "start": "586320",
    "end": "592620"
  },
  {
    "text": "improve the performance there are a lot of metrics which we have from controller",
    "start": "592620",
    "end": "598019"
  },
  {
    "text": "runtime we'll talk about that in a bit but the other two important aspects are scaling and availability and they",
    "start": "598019",
    "end": "605519"
  },
  {
    "text": "measure how well an operator is able to scale at what instant of time at what",
    "start": "605519",
    "end": "610560"
  },
  {
    "text": "workload and availability is basically the percentage of time the operator and its workloads are available in action",
    "start": "610560",
    "end": "617279"
  },
  {
    "text": "doing stuff which we want them to do so we have a doc or the best practices on",
    "start": "617279",
    "end": "622440"
  },
  {
    "text": "metrics related to operator SDK it has in-depth details on how alerts should be",
    "start": "622440",
    "end": "627600"
  },
  {
    "text": "set up what are the labels and other suggested format now as operator SDK users what does it",
    "start": "627600",
    "end": "635580"
  },
  {
    "text": "provide to all with respect to monitoring metrics and visualization stuff so there are three things which",
    "start": "635580",
    "end": "641880"
  },
  {
    "text": "SDK provides us the first one is the controller and time metrics so we all",
    "start": "641880",
    "end": "647160"
  },
  {
    "text": "know that operator SDK uses a library which is known as controller runtime and it exposes a set of controller or",
    "start": "647160",
    "end": "654899"
  },
  {
    "text": "reconciler metrics to be specific now what they are and how they are useful I'll briefly cover it in the next slide",
    "start": "654899",
    "end": "662220"
  },
  {
    "text": "but moving on to the second point is when you build an operator with SDK you",
    "start": "662220",
    "end": "667920"
  },
  {
    "text": "get a manifest which creates a service monitor Now using the service monitor",
    "start": "667920",
    "end": "673200"
  },
  {
    "text": "you can integrate the operator metrics you can expose the operator Matrix and",
    "start": "673200",
    "end": "679140"
  },
  {
    "text": "push it to end Prometheus operator or any Standalone Prometheus instance running on cluster so the metrics are",
    "start": "679140",
    "end": "685680"
  },
  {
    "text": "available at the end point it's just up to us to scrape them see them and visualize them",
    "start": "685680",
    "end": "691079"
  },
  {
    "text": "and the third most interesting and beautiful aspect of this is the availability of a grafana V1 Alpha",
    "start": "691079",
    "end": "698040"
  },
  {
    "text": "plugin so this plugin is available on Queue Builder which can again be used in operator SDK what it does is its",
    "start": "698040",
    "end": "705540"
  },
  {
    "text": "scaffolds scaffolds out Json blob and you can copy this Json blob put it into",
    "start": "705540",
    "end": "711420"
  },
  {
    "text": "a grafana instance and you get the visualization of the metrics which you have collected",
    "start": "711420",
    "end": "717000"
  },
  {
    "text": "so we went through the Drupal operator code and these are the few metrics which",
    "start": "717000",
    "end": "722760"
  },
  {
    "text": "we thought would have been helpful to the sres and to discern folks and also",
    "start": "722760",
    "end": "727920"
  },
  {
    "text": "in general to all of you when you all start writing an operator or you all try",
    "start": "727920",
    "end": "732959"
  },
  {
    "text": "getting metrics from an existing operator so some of the controller runtime metrics to briefly go over our",
    "start": "732959",
    "end": "739320"
  },
  {
    "text": "total number of reconciles the number of Errors during reconciliation and the duration of a reconcile in a controller",
    "start": "739320",
    "end": "746220"
  },
  {
    "text": "so these metrics give an overall idea on the performance of controller they help",
    "start": "746220",
    "end": "751980"
  },
  {
    "text": "in monitoring the health of the controller and identifying any issue or any request which is possibly blocking",
    "start": "751980",
    "end": "758760"
  },
  {
    "text": "or taking a lot more time than expected and the other two metrics which we",
    "start": "758760",
    "end": "763980"
  },
  {
    "text": "thought would have been useful are the available backups and the scheduled backups but the idea is using the tools",
    "start": "763980",
    "end": "770820"
  },
  {
    "text": "available we can also extend them to create our own custom metrics and this is something which we recommend so the",
    "start": "770820",
    "end": "778560"
  },
  {
    "text": "recommendation is to have as many metrics as possible which are custom to your application logic and having a",
    "start": "778560",
    "end": "785279"
  },
  {
    "text": "visualization out of them to better understand the operator performance",
    "start": "785279",
    "end": "790620"
  },
  {
    "text": "moving on to the internal discussion right",
    "start": "790620",
    "end": "795019"
  },
  {
    "text": "hello okay there's a switch on the bottom of it mine was on",
    "start": "803839",
    "end": "810319"
  },
  {
    "text": "so we're going to have a bit of a discussion uh this is fantastic thank you for the chairs we're envisioning maybe some couches and some coffees or",
    "start": "813420",
    "end": "820200"
  },
  {
    "text": "something like this um so that's at least what we're going for here so we we thought about some questions and some",
    "start": "820200",
    "end": "826500"
  },
  {
    "text": "um maybe discussion and a little more of the story of what the experience was like so maybe could you guys just",
    "start": "826500",
    "end": "832980"
  },
  {
    "text": "elaborate a bit to start with us on how did you get to the point of you wanted to use kubernetes at all and and",
    "start": "832980",
    "end": "840300"
  },
  {
    "text": "write an operator and what was that experience like of actually creating this thing from the ground up okay so uh",
    "start": "840300",
    "end": "846480"
  },
  {
    "text": "first off we were a bit Lucky in the sense that we already had another kubernetes Based Services around uh it",
    "start": "846480",
    "end": "854940"
  },
  {
    "text": "was a logically wise more simple but it proved that we could have our cms's on",
    "start": "854940",
    "end": "862620"
  },
  {
    "text": "the same platform so once we understood that kubernetes would be a place where",
    "start": "862620",
    "end": "868440"
  },
  {
    "text": "we could put our Drupal website so our public websites we then started the development of this operator which is",
    "start": "868440",
    "end": "874620"
  },
  {
    "text": "very logic heavy It Was Written in go which was the one more flexible more",
    "start": "874620",
    "end": "880079"
  },
  {
    "text": "capable of being custom and well it was it was a learning process so we we",
    "start": "880079",
    "end": "887040"
  },
  {
    "text": "discussed this already before uh it was let's say our first big operator it was",
    "start": "887040",
    "end": "893100"
  },
  {
    "text": "very logic intensive and we did not realize in the beginning how we were making some mistakes",
    "start": "893100",
    "end": "898920"
  },
  {
    "text": "so um this is for for example one one very simple but crucial mistake is that",
    "start": "898920",
    "end": "904620"
  },
  {
    "text": "we created one very long controller which was handling a lot of logic so in",
    "start": "904620",
    "end": "909899"
  },
  {
    "text": "the end the the reconciliation loop as you guys can imagine was very long",
    "start": "909899",
    "end": "915420"
  },
  {
    "text": "um we initially because the operator is and it still is super fast uh once he",
    "start": "915420",
    "end": "920760"
  },
  {
    "text": "started to take more than just a few seconds we started realizing that there was something that design wise was not",
    "start": "920760",
    "end": "927300"
  },
  {
    "text": "great so we were basically from that point on uh doing smaller adjustments",
    "start": "927300",
    "end": "932699"
  },
  {
    "text": "and improvements on operator in order to basically keep the performance we wanted",
    "start": "932699",
    "end": "938220"
  },
  {
    "text": "now you were both before we dive into that topic a little deeper uh I mean you're both accomplished sres what was",
    "start": "938220",
    "end": "944339"
  },
  {
    "text": "what was that like writing and go were you already comfortable writing and go was that a big learning curve itself and",
    "start": "944339",
    "end": "949920"
  },
  {
    "text": "how is control run time and the whole that whole experience around it okay uh from my side my experience I was not a",
    "start": "949920",
    "end": "956399"
  },
  {
    "text": "very uh big ol angle of developer at all I had previous experience with many",
    "start": "956399",
    "end": "961920"
  },
  {
    "text": "languages but go it was very basic um writing the goaling operator was I I",
    "start": "961920",
    "end": "967800"
  },
  {
    "text": "didn't find it a big of a challenge it was very easy to understand the code structure uh the the methods that I",
    "start": "967800",
    "end": "974699"
  },
  {
    "text": "needed when I needed so I would say it was fairly easy",
    "start": "974699",
    "end": "980120"
  },
  {
    "text": "yeah so um as they mentioned having a very long reconciler or something which",
    "start": "980540",
    "end": "985860"
  },
  {
    "text": "is not useful and a suggested pattern is to break down the reconciler into multiple different parts now one thing",
    "start": "985860",
    "end": "992639"
  },
  {
    "text": "which we wanted to highlight as operative SDK developers is that can bring a kind of issue in terms of how",
    "start": "992639",
    "end": "999839"
  },
  {
    "text": "many how many crds does a controller manage so the suggested pattern is to have just one crd per controller and",
    "start": "999839",
    "end": "1007100"
  },
  {
    "text": "just to quickly highlight the reason behind that is that if there are if there's a crd which is being managed by",
    "start": "1007100",
    "end": "1013399"
  },
  {
    "text": "multiple controllers there can be contention of the update so multiple controllers can update a single field",
    "start": "1013399",
    "end": "1019820"
  },
  {
    "text": "and that can cause issues uh in terms of causing race",
    "start": "1019820",
    "end": "1025640"
  },
  {
    "text": "conditions and debugging race conditions is definitely a major pain point which",
    "start": "1025640",
    "end": "1032058"
  },
  {
    "text": "we would suggest never to do so so I think you guys also had some",
    "start": "1032059",
    "end": "1037699"
  },
  {
    "text": "similar conclusions and ended up going from your like long reconcile function and thinking about how to to break that",
    "start": "1037699",
    "end": "1044780"
  },
  {
    "text": "apart into multiple right what was that like um well so in in our case we don't do uh",
    "start": "1044780",
    "end": "1050960"
  },
  {
    "text": "what we would say as a correct approach so we use more than one controller for",
    "start": "1050960",
    "end": "1056240"
  },
  {
    "text": "the same custom resource but we defined that on this resource that would be a sub resource that would only be managed",
    "start": "1056240",
    "end": "1061940"
  },
  {
    "text": "by a separate controller so what we did was we had basically and this is how it",
    "start": "1061940",
    "end": "1067520"
  },
  {
    "text": "actually went our operator was managing the backups and the backups were taking very long so we separated that into a",
    "start": "1067520",
    "end": "1074000"
  },
  {
    "text": "different controller and then it's it's completely fine because they are basically separated even though they use",
    "start": "1074000",
    "end": "1079700"
  },
  {
    "text": "the same custom resource yeah and there's a couple of knobs here I guess we can try to turn to to deal with that",
    "start": "1079700",
    "end": "1085280"
  },
  {
    "text": "particular issue one of the first things we we think about is control runtime default of course to only doing a single",
    "start": "1085280",
    "end": "1091880"
  },
  {
    "text": "reconcile at a time and we can configure and in fact that's a good idea for any of you who are maintaining operators or",
    "start": "1091880",
    "end": "1097820"
  },
  {
    "text": "thinking about creating operators go look at that setting think about enabling it to reconcile multiple do you",
    "start": "1097820",
    "end": "1104360"
  },
  {
    "text": "recall what we call that it's Max Mexican current reconciles this right uh",
    "start": "1104360",
    "end": "1110000"
  },
  {
    "text": "is one of the options there on the manager I think right so did you start with that did you try",
    "start": "1110000",
    "end": "1115940"
  },
  {
    "text": "multiple and how did that go yeah we actually tried with that but our problem remained the same so now we have more",
    "start": "1115940",
    "end": "1121520"
  },
  {
    "text": "but they all get basically stuck in this one operation that is very time intensive uh but it's not very high",
    "start": "1121520",
    "end": "1127940"
  },
  {
    "text": "priority so we realize this is a low priority test that takes a long time so for us even though we basically increase",
    "start": "1127940",
    "end": "1135320"
  },
  {
    "text": "the number of reconciles it just made more sense to have these uh let's say operations decoupled into different",
    "start": "1135320",
    "end": "1140960"
  },
  {
    "text": "reconciliations did you have something to add",
    "start": "1140960",
    "end": "1146480"
  },
  {
    "text": "there was some part of the status we just wanted to always have the status as the priority so even with the slow task",
    "start": "1146480",
    "end": "1152419"
  },
  {
    "text": "the other Recon cells are putting the status up to date so which was kind of useful interesting yes status management is",
    "start": "1152419",
    "end": "1159440"
  },
  {
    "text": "always a a tricky thing to get right sometimes yeah um in uh so another thing that caught",
    "start": "1159440",
    "end": "1164960"
  },
  {
    "text": "our eye about your API in particular I love looking at API choices and design uh",
    "start": "1164960",
    "end": "1171440"
  },
  {
    "text": "well done uh is uh the fact that the Drupal version",
    "start": "1171440",
    "end": "1177320"
  },
  {
    "text": "is actually embedded into the spec we typically uh I mean the way we develop",
    "start": "1177320",
    "end": "1183500"
  },
  {
    "text": "operators at red hat and what we recommend operator developers usually to do is to couple the version of the",
    "start": "1183500",
    "end": "1189919"
  },
  {
    "text": "operator with the version of the operand so if you want to upgrade for example Drupal you would upgrade the operator",
    "start": "1189919",
    "end": "1196120"
  },
  {
    "text": "and that enables you to to limit the scope so that your operator logic always",
    "start": "1196120",
    "end": "1202100"
  },
  {
    "text": "knows what version of the operand it's going to be dealing with or maybe it's just upgrading from this one to that one",
    "start": "1202100",
    "end": "1209179"
  },
  {
    "text": "um you've I think needs some more flexibility than that I understand uh",
    "start": "1209179",
    "end": "1214400"
  },
  {
    "text": "for your use case and your user base and some some flexibility uh maybe tell us a bit more about how that went and what",
    "start": "1214400",
    "end": "1220940"
  },
  {
    "text": "you did in the API here to actually get that flexibility uh first the version is",
    "start": "1220940",
    "end": "1225980"
  },
  {
    "text": "basically the serving image it's just a image tag so it's not related to any of",
    "start": "1225980",
    "end": "1231020"
  },
  {
    "text": "the resources because everything else is the same resource so the version change on the crd will just change the serving",
    "start": "1231020",
    "end": "1236900"
  },
  {
    "text": "image on deployment no I was just going to say that the",
    "start": "1236900",
    "end": "1242720"
  },
  {
    "text": "operator itself is basically agnostic to the version because the expected operations for all of them is still the",
    "start": "1242720",
    "end": "1248840"
  },
  {
    "text": "same mySQL database Etc so it will still be able to do a database backup or",
    "start": "1248840",
    "end": "1253940"
  },
  {
    "text": "restore and so on and so forth so it's like I said like my colleague said it's just a service image the operator is",
    "start": "1253940",
    "end": "1259880"
  },
  {
    "text": "completely agnostic we can provide a second or third image and operator will be able to serve all of them without any",
    "start": "1259880",
    "end": "1266539"
  },
  {
    "text": "fuss and I think through your portal do I recall correctly you were able to give people some flexibility in terms of like",
    "start": "1266539",
    "end": "1272240"
  },
  {
    "text": "when their particular instance is going to get upgraded for example that's correct so um the web the version itself",
    "start": "1272240",
    "end": "1279020"
  },
  {
    "text": "of the CMS evolves Through Time users have to upgrade and if we just upgrade them all at once we buy risk putting",
    "start": "1279020",
    "end": "1285500"
  },
  {
    "text": "some websites offline because they have something that was not compatible with the latest version so we basically",
    "start": "1285500",
    "end": "1290960"
  },
  {
    "text": "announced ahead that we have a new version that they can try they can install and they can easily create a",
    "start": "1290960",
    "end": "1296539"
  },
  {
    "text": "copy which is this other custom resource that they'll just gonna create uh have a new website running with the latest",
    "start": "1296539",
    "end": "1301940"
  },
  {
    "text": "version they can compare they can basically then change the URLs to the to the copy they can just then upgrade the",
    "start": "1301940",
    "end": "1308000"
  },
  {
    "text": "previous website and then changing the the version is basically you go to the",
    "start": "1308000",
    "end": "1313159"
  },
  {
    "text": "portal you select a new version that changes the custom resource operator reads it okay there's a new image to",
    "start": "1313159",
    "end": "1318980"
  },
  {
    "text": "serve is it a different version so if it's a different version I have to see these operations to do and then it",
    "start": "1318980",
    "end": "1324200"
  },
  {
    "text": "upgrades and then it's back online and like nothing was ever done so me and my colleague had nothing to do our third",
    "start": "1324200",
    "end": "1330559"
  },
  {
    "text": "colleague took care of that upgrade for us so you can come to Amsterdam and uh and speak at cubecon exactly excellent well",
    "start": "1330559",
    "end": "1338120"
  },
  {
    "text": "maybe we should get them in on this what do you think great well let's uh",
    "start": "1338120",
    "end": "1344140"
  },
  {
    "text": "we have now it's your opportunity to ask some questions of uh some certain folks and operator framework and I've got",
    "start": "1344140",
    "end": "1350600"
  },
  {
    "text": "already got a hand up here please go ahead I'm not sure if we have mics running around or there's mics on the wings",
    "start": "1350600",
    "end": "1358880"
  },
  {
    "text": "um why don't I just come give this to you for now and other folks maybe if you want to make your way to one of those",
    "start": "1358880",
    "end": "1364159"
  },
  {
    "text": "hi there thanks for the for the talk and it's very interesting uh just a quick question on well two rather on the so",
    "start": "1364159",
    "end": "1371179"
  },
  {
    "text": "the best conference but to bring up the GUI yeah how much flexibility does a",
    "start": "1371179",
    "end": "1376580"
  },
  {
    "text": "user have if he wants to can you go crazy and do 100 of them and what is behind it so it dumps the crd somewhere",
    "start": "1376580",
    "end": "1383179"
  },
  {
    "text": "but the website where you create this request is that running on the cluster",
    "start": "1383179",
    "end": "1388640"
  },
  {
    "text": "where the crd will end up that will trigger the operator I'm not sure if I completely understood but",
    "start": "1388640",
    "end": "1395000"
  },
  {
    "text": "you're asking basically what connects the graphical interface with the cluster exactly because in there you would",
    "start": "1395000",
    "end": "1401539"
  },
  {
    "text": "request yeah so yeah basically the in the website you basically uh create",
    "start": "1401539",
    "end": "1407840"
  },
  {
    "text": "whatever and that impersonates for you and operation behind the scenes which would be either create or update this",
    "start": "1407840",
    "end": "1413840"
  },
  {
    "text": "custom resource or even deleted so all the cred Opera Opera operations are done behind the scenes and in the portal you",
    "start": "1413840",
    "end": "1420140"
  },
  {
    "text": "just have the fancy buttons and it's basically impersonation okay but how does it get there on the cluster itself",
    "start": "1420140",
    "end": "1426080"
  },
  {
    "text": "if it yeah it has a service account so it's basically a dedicated account and within",
    "start": "1426080",
    "end": "1431419"
  },
  {
    "text": "the cluster it does impersonation so it applies the operation with the authenticated user account so you will",
    "start": "1431419",
    "end": "1438080"
  },
  {
    "text": "only be able to do the things in the cluster that you actually can do okay thank you very much no worries",
    "start": "1438080",
    "end": "1444380"
  },
  {
    "text": "it's a bit more complex but that's basically the the small line uh we were happy to have a further discussion if",
    "start": "1444380",
    "end": "1450500"
  },
  {
    "text": "you want a bit more of details on that so is your your internal identity management is connected and set up for",
    "start": "1450500",
    "end": "1456799"
  },
  {
    "text": "your cluster yeah so we have role bindings within the cluster Etc so it's part of let's say our namespace template",
    "start": "1456799",
    "end": "1463220"
  },
  {
    "text": "so when you create a new project a new website there's like already roles there so you can only",
    "start": "1463220",
    "end": "1469820"
  },
  {
    "text": "let's say work with that specific namespace with specific resources within",
    "start": "1469820",
    "end": "1474860"
  },
  {
    "text": "that specific namespace so basically that's how everything gets managed and well that's it",
    "start": "1474860",
    "end": "1482059"
  },
  {
    "text": "thank you for amazing work if I understand correctly you are together handle big lot due to operator and it's",
    "start": "1482059",
    "end": "1490820"
  },
  {
    "text": "very efficient way of working but what I'm afraid did it freed for you time to learn",
    "start": "1490820",
    "end": "1497720"
  },
  {
    "text": "something better learn something new or just instead you're squeezed up to the",
    "start": "1497720",
    "end": "1503299"
  },
  {
    "text": "last drop and just get more um more domains to handle instead of",
    "start": "1503299",
    "end": "1509720"
  },
  {
    "text": "free your personal time I would say that the operator definitely freed a lot of work from us so we are",
    "start": "1509720",
    "end": "1516740"
  },
  {
    "text": "definitely very happy with the solution we have actually we are very happy and we still agree that there's improvements",
    "start": "1516740",
    "end": "1521960"
  },
  {
    "text": "on the operator but it basically released a lot of operation and a lot of work from us so a lot of operations that",
    "start": "1521960",
    "end": "1527480"
  },
  {
    "text": "would have needed to be done by us as soon as we notice oh this is something systematic that users might need we",
    "start": "1527480",
    "end": "1533299"
  },
  {
    "text": "introduce it into the operator and from that moment on our third colleague takes care of all these operations for us so",
    "start": "1533299",
    "end": "1539419"
  },
  {
    "text": "let's say in the short term we might have to do some extra development to introduce the operator but medium to",
    "start": "1539419",
    "end": "1545120"
  },
  {
    "text": "long term it eases us it eases our lives in terms of daily tasks on on the",
    "start": "1545120",
    "end": "1550760"
  },
  {
    "text": "infrastructure who else here we are",
    "start": "1550760",
    "end": "1556100"
  },
  {
    "text": "someone is doing an exercise today hello hi I happen to be one of the main",
    "start": "1556100",
    "end": "1561980"
  },
  {
    "text": "users of this service I know I know Francisco hello we had some some",
    "start": "1561980",
    "end": "1567679"
  },
  {
    "text": "conversations and my question is more about the downside of creating an operator because",
    "start": "1567679",
    "end": "1573799"
  },
  {
    "text": "I'm not very familiar on on operators or maintaining them but do you think it's",
    "start": "1573799",
    "end": "1579020"
  },
  {
    "text": "any downside having an operator and something that's software based rather than having some other type of solution",
    "start": "1579020",
    "end": "1585140"
  },
  {
    "text": "like home Tarts or an article CD instance or something they like uh so if you're asking if we wanted",
    "start": "1585140",
    "end": "1593299"
  },
  {
    "text": "something more of etops kind of thing so in the sense that you have a repository and you have some specific thing for",
    "start": "1593299",
    "end": "1599179"
  },
  {
    "text": "that uh well you're at CERN so there's also a service that allows you to if you",
    "start": "1599179",
    "end": "1604400"
  },
  {
    "text": "want something custom with a specific I'm image Elm chart whatever there's a specific dedicated place for that the",
    "start": "1604400",
    "end": "1611659"
  },
  {
    "text": "goal with our service is providing the software out of the box so you as a user don't have to have a lot of technical",
    "start": "1611659",
    "end": "1617539"
  },
  {
    "text": "knowledge and you get a website up and running and our operator basically enables us to do that very easily",
    "start": "1617539",
    "end": "1623480"
  },
  {
    "text": "without a lot of actual work to keep the things running",
    "start": "1623480",
    "end": "1628900"
  },
  {
    "text": "thank you yeah I think uh typically maybe just add a thought to that uh and I'll come to",
    "start": "1630220",
    "end": "1637400"
  },
  {
    "text": "you and then you uh you know operators we talked a little",
    "start": "1637400",
    "end": "1643460"
  },
  {
    "text": "bit about this as well like maybe get Ops is an option here or you know but that gets you a deployment story and",
    "start": "1643460",
    "end": "1649220"
  },
  {
    "text": "maybe a deep provisioning story also but not the continuous operational story here that it's not the let's go you know",
    "start": "1649220",
    "end": "1656240"
  },
  {
    "text": "have fun and go to dinner in Amsterdam and not worry about what might happen",
    "start": "1656240",
    "end": "1661460"
  },
  {
    "text": "because there's an actor ready to react to unexpected or expected",
    "start": "1661460",
    "end": "1666559"
  },
  {
    "text": "changes in state you know the whole time so that's that's the story We Tell at the operator framework and actually one",
    "start": "1666559",
    "end": "1672260"
  },
  {
    "text": "thing that I might add is that uh for example for some specific users that might want to do extra uh things with",
    "start": "1672260",
    "end": "1678140"
  },
  {
    "text": "their website to actually provide them permissions to for example work with the deployments change the config maps and",
    "start": "1678140",
    "end": "1683659"
  },
  {
    "text": "so on and so forth and one thing that you actually realize is that the operator even even in well protects them",
    "start": "1683659",
    "end": "1690740"
  },
  {
    "text": "from certain mistakes because if you delete the deployment don't worry the deployment will be back very soon after",
    "start": "1690740",
    "end": "1697400"
  },
  {
    "text": "because operator will enforce it so it also has that into a to to be in place and also help us with",
    "start": "1697400",
    "end": "1705020"
  },
  {
    "text": "trouble accidental operations that said we do sometimes see and this",
    "start": "1705020",
    "end": "1710840"
  },
  {
    "text": "gives an opportunity potentially uh a mix of these uh where it might you might use git Ops or some kind of pipeline",
    "start": "1710840",
    "end": "1716720"
  },
  {
    "text": "like that to actually create the crds that still an operator uh might use so then that just moves the source of Truth",
    "start": "1716720",
    "end": "1722779"
  },
  {
    "text": "out of the cluster and into a git repo which has its advantages potentially but it's another thing to deal with yeah",
    "start": "1722779",
    "end": "1729020"
  },
  {
    "text": "that's a different topic I would say okay who is over here there you go",
    "start": "1729020",
    "end": "1735340"
  },
  {
    "text": "um hi uh as you already mentioned status updates tend to be tricky I've been",
    "start": "1735500",
    "end": "1740659"
  },
  {
    "text": "there um are there any best practices or tips you'd like to share like is it worth",
    "start": "1740659",
    "end": "1746840"
  },
  {
    "text": "having a separate reconcile or just for the status decoupled from the main logic or what are your thoughts",
    "start": "1746840",
    "end": "1755179"
  },
  {
    "text": "varsha do you have any thoughts on this first it depends",
    "start": "1755179",
    "end": "1761059"
  },
  {
    "text": "it depends on the business logic",
    "start": "1761059",
    "end": "1764980"
  },
  {
    "text": "regarding the status updates it depends on the application logic I don't think",
    "start": "1768940",
    "end": "1774500"
  },
  {
    "text": "we have special recommendation on having a separate reconciler just for doing that but in general what we suggest is",
    "start": "1774500",
    "end": "1781640"
  },
  {
    "text": "to use status conditionals so that whenever a status is updated the uh when",
    "start": "1781640",
    "end": "1787700"
  },
  {
    "text": "the operator updates the status the third person who is looking at the operator status knows the reason behind",
    "start": "1787700",
    "end": "1794000"
  },
  {
    "text": "what's happening it's a way to communicate to the user on why status has been updated what is happening in",
    "start": "1794000",
    "end": "1801020"
  },
  {
    "text": "the reconciler loop and what is a cause of an error a failure or a success so using status conditional is something we",
    "start": "1801020",
    "end": "1808279"
  },
  {
    "text": "would suggest but having a separate reconciler just for doing so is something we haven't it's something",
    "start": "1808279",
    "end": "1815059"
  },
  {
    "text": "which is not so common yeah there are a few uh ideas and best practices like uh sometimes if you you",
    "start": "1815059",
    "end": "1822860"
  },
  {
    "text": "only write the status if you know there's a change to the status don't just blindly write an update to the status on every reconcile that can be a",
    "start": "1822860",
    "end": "1829700"
  },
  {
    "text": "significant help and then when you do need to uh to do it right doing a patch",
    "start": "1829700",
    "end": "1834740"
  },
  {
    "text": "instead of a full apply uh is a much lighter burden at least on the API",
    "start": "1834740",
    "end": "1840320"
  },
  {
    "text": "service so we like for example with openshift openshift is based on operators you know top to bottom and",
    "start": "1840320",
    "end": "1846620"
  },
  {
    "text": "we're very sensitive about the burden we put on the API server and so patching is a very important part of that as opposed",
    "start": "1846620",
    "end": "1852020"
  },
  {
    "text": "to the entire uh you know safe update workflow there's a couple ideas",
    "start": "1852020",
    "end": "1858700"
  },
  {
    "text": "or did you guys have anything that on there okay that's good all right somebody who's over here I promise to come back okay",
    "start": "1859159",
    "end": "1866140"
  },
  {
    "text": "hello I have a question is there any work involved to keep your operator uh compatible with different kubernetes",
    "start": "1868220",
    "end": "1875059"
  },
  {
    "text": "version I'm sorry",
    "start": "1875059",
    "end": "1880760"
  },
  {
    "text": "you cannot hear me I I could not hear it I'm sorry okay sorry so is there a new work involved to keep the operator",
    "start": "1880760",
    "end": "1886820"
  },
  {
    "text": "compatible with different kubernetes version uh",
    "start": "1886820",
    "end": "1893059"
  },
  {
    "text": "you're asking if our operator is compatible uh with the kubernetes version and now we upgraded uh yeah do",
    "start": "1893059",
    "end": "1900140"
  },
  {
    "text": "you have to do any work with your operator maintaining it as the version of kubernetes changes underneath it it's a very good question so we wrote this",
    "start": "1900140",
    "end": "1907700"
  },
  {
    "text": "operator and went into production around two years ago so two years ago it's basically where we said okay this is",
    "start": "1907700",
    "end": "1913700"
  },
  {
    "text": "good enough to start handling production workloads and um ever since we have not",
    "start": "1913700",
    "end": "1919880"
  },
  {
    "text": "upgraded operator so the operator has remained more or less in the same version we didn't have the need so far",
    "start": "1919880",
    "end": "1925220"
  },
  {
    "text": "to upgrade it uh we are actually planning on doing it in the upcoming months but there's no actual need So",
    "start": "1925220",
    "end": "1930919"
  },
  {
    "text": "currently up until now it has been very good with the upgrades of the cluster so the cluster has been upgraded ever since",
    "start": "1930919",
    "end": "1937760"
  },
  {
    "text": "with the latest version but the operator itself remains in the same version and it's very compatible so it's very easy",
    "start": "1937760",
    "end": "1945200"
  },
  {
    "text": "to keep and keep it running also the apis we use",
    "start": "1945200",
    "end": "1951860"
  },
  {
    "text": "talk right into it so the apis we use haven't changed much in kubernetes like the client apis so it's totally fine",
    "start": "1951860",
    "end": "1958700"
  },
  {
    "text": "that we are using an older client but a new server uh well me for one last question for you",
    "start": "1958700",
    "end": "1965179"
  },
  {
    "text": "to if you were to maybe think about it even perhaps in the near future do this again",
    "start": "1965179",
    "end": "1970940"
  },
  {
    "text": "start from scratch what would you do different it's a very good question so there's a",
    "start": "1970940",
    "end": "1977179"
  },
  {
    "text": "few things that we guaranteeedly would do differently so we already learned the lesson about big reconcile Loops that",
    "start": "1977179",
    "end": "1983419"
  },
  {
    "text": "would not happen again um a second thing is metrics so we are",
    "start": "1983419",
    "end": "1988940"
  },
  {
    "text": "aware that the operator exposes metrics but we never use them so we some at some",
    "start": "1988940",
    "end": "1994519"
  },
  {
    "text": "point realize our operator was slow but we never had actually proper visualization of that so one second",
    "start": "1994519",
    "end": "1999620"
  },
  {
    "text": "thing is from day one we would probably we would definitely monitor our operator workload see how it handles the workload",
    "start": "1999620",
    "end": "2006940"
  },
  {
    "text": "how fast it is and what's going on with it so these are definitely two two big points about it that we would take into",
    "start": "2006940",
    "end": "2012640"
  },
  {
    "text": "consideration one third point is that we actually in terms of the architecture of the custom resource looks really good",
    "start": "2012640",
    "end": "2018700"
  },
  {
    "text": "and we would probably keep the same which is it's one custom resource to deploy to deploy and handle everything",
    "start": "2018700",
    "end": "2023980"
  },
  {
    "text": "about the software that we would keep for sure because it works pretty well with us it's one single point of",
    "start": "2023980",
    "end": "2029799"
  },
  {
    "text": "information to provide everything for the user nice original any thoughts from YouTube",
    "start": "2029799",
    "end": "2035380"
  },
  {
    "text": "I think mostly we would also focus on more testing better unit testing and also we don't use all the latest",
    "start": "2035380",
    "end": "2041019"
  },
  {
    "text": "features that come with the operator SDK so we don't have that much of time to actually focus on it but if you have it",
    "start": "2041019",
    "end": "2046539"
  },
  {
    "text": "able to write a new one I think it would start with that first and follow up with new features very nice first any any parting thoughts",
    "start": "2046539",
    "end": "2055658"
  },
  {
    "text": "yeah probably testing metrics and yeah the upgrade processor like they",
    "start": "2055659",
    "end": "2061898"
  },
  {
    "text": "covered it all",
    "start": "2061899",
    "end": "2064440"
  },
  {
    "text": "yeah uh well I guess let me say goodbye uh we have one last",
    "start": "2067659",
    "end": "2073240"
  },
  {
    "text": "request for you this is a QR code where you can tell us how we did uh we love",
    "start": "2073240",
    "end": "2079000"
  },
  {
    "text": "your feedback uh positive feedback is also helpful if you just had a good time it's helpful for us to hear and for our",
    "start": "2079000",
    "end": "2084099"
  },
  {
    "text": "bosses to hear who sent us here uh but we'll stick around up here we've we can stay in the room I guess for a little",
    "start": "2084099",
    "end": "2090040"
  },
  {
    "text": "bit more time and uh and then we can go outside too if you got there's a lot more topics we could cover",
    "start": "2090040",
    "end": "2095378"
  },
  {
    "text": "um so bring your questions bring your uh last time we did this uh something similar we got some pretty good confessions about uh real world horror",
    "start": "2095379",
    "end": "2102280"
  },
  {
    "text": "stories and mistakes and things gone wrong so coming up share listen and thank you for coming",
    "start": "2102280",
    "end": "2107720"
  },
  {
    "text": "[Applause]",
    "start": "2107720",
    "end": "2113320"
  }
]