[
  {
    "text": "okay hello everybody welcome to coop CTL plugins 101",
    "start": "210",
    "end": "5910"
  },
  {
    "text": "I'm Jonathan Burke on I work for IBM I'm Carolyn Van Slyke I work at Microsoft on",
    "start": "5910",
    "end": "13049"
  },
  {
    "text": "the azure containers team and mostly I spend my time upstream working on the kubernetes 6 Service Catalog as do I'm",
    "start": "13049",
    "end": "20100"
  },
  {
    "text": "also a car contributed to a Service Catalog oh of course it never works the",
    "start": "20100",
    "end": "30720"
  },
  {
    "text": "first time ok so what are we going to talk about today to start with we're",
    "start": "30720",
    "end": "37950"
  },
  {
    "text": "gonna briefly cover the motivation why we're giving this talk who we are why you should listen to us that sort of",
    "start": "37950",
    "end": "43530"
  },
  {
    "text": "thing we're gonna give a brief overview of what plugins currently are how they work",
    "start": "43530",
    "end": "49170"
  },
  {
    "text": "with groups et al what that looks like and then Carolyn's gonna go over a bunch of simple plugins",
    "start": "49170",
    "end": "54300"
  },
  {
    "text": "and some more complex plugins to show you sort of the problems base of what",
    "start": "54300",
    "end": "59579"
  },
  {
    "text": "you can write what you can do we're gonna go over some beef tips for writing your own plugin and then we're gonna talk about the future of plugins cuz",
    "start": "59579",
    "end": "65760"
  },
  {
    "text": "it's currently under like I said active development it's very much sort of in the works at the moment ok so why are we",
    "start": "65760",
    "end": "74640"
  },
  {
    "text": "here why should you listen to us so we both work on Service Catalog which is an",
    "start": "74640",
    "end": "79950"
  },
  {
    "text": "extension project for kubernetes as an extension project implements a whole bunch of custom resource types since",
    "start": "79950",
    "end": "86009"
  },
  {
    "text": "it's kind of an older project so it existed before CRTs or even a thing so we have our own API server our own",
    "start": "86009",
    "end": "92250"
  },
  {
    "text": "resource types our own controller and it can be kind of cumbersome to interact with our resources using just cube",
    "start": "92250",
    "end": "98610"
  },
  {
    "text": "create cube edit coop apply so we wanted to implement some interface that people",
    "start": "98610",
    "end": "106770"
  },
  {
    "text": "could use to talk Service Catalog how",
    "start": "106770",
    "end": "111930"
  },
  {
    "text": "did we end up solving this problem carolyn had been already working on sv cat which started life as a standalone",
    "start": "111930",
    "end": "118229"
  },
  {
    "text": "sea life just for interacting with service cataloging has a whole bunch of commands some of which are sort of reimplementation zuv",
    "start": "118229",
    "end": "125369"
  },
  {
    "text": "kubernetes commands such as get some of which have nothing to do with core kubernetes commands and we decided to",
    "start": "125369",
    "end": "131190"
  },
  {
    "text": "turn that into a plugin it currently exists today you can still use it in standalone mode or you could",
    "start": "131190",
    "end": "137790"
  },
  {
    "text": "install it as a coupe CTL plug-in and have it live right there in coupe CTL other commands so and to date as far as",
    "start": "137790",
    "end": "146010"
  },
  {
    "text": "we're aware this is the first and the only plug-in that anyone in the kubernetes community has written to",
    "start": "146010",
    "end": "153599"
  },
  {
    "text": "actually attempt to perform useful work first post first post that's post if anybody else out there",
    "start": "153599",
    "end": "160170"
  },
  {
    "text": "has a written one we'd love to hear from you yeah please come up to the stage after if you've written a plugin or want",
    "start": "160170",
    "end": "166590"
  },
  {
    "text": "him or want to but more more on that in a minute oh right so that is what we are",
    "start": "166590",
    "end": "172170"
  },
  {
    "text": "actually hoping to get out of this talk it's really not so much for your benefit it's really for our benefit our hope is",
    "start": "172170",
    "end": "181470"
  },
  {
    "text": "that after after today you will go out you will write your own plugin it will be awesome now this is good for a couple",
    "start": "181470",
    "end": "187920"
  },
  {
    "text": "reasons one we're interested in there just being more plugins in existence so people can use them that's benefit the",
    "start": "187920",
    "end": "194400"
  },
  {
    "text": "kubernetes developer community it's benefit to people who use kubernetes if there's just more plugins that do more interesting things so",
    "start": "194400",
    "end": "201150"
  },
  {
    "text": "people can use them reason 2 is that plugins are still under very active",
    "start": "201150",
    "end": "208739"
  },
  {
    "text": "development and we are currently sort of the only stakeholders 6 Eli doesn't like",
    "start": "208739",
    "end": "214470"
  },
  {
    "text": "us very much because we annoy them a whole bunch they love us [Laughter] so if we had more users or more",
    "start": "214470",
    "end": "221190"
  },
  {
    "text": "developers rather if plugins out there it would provide more feedback 60 ly on what plugins should be what features",
    "start": "221190",
    "end": "227639"
  },
  {
    "text": "they want that sort of thing so that would be super helpful yeah so sorry ok",
    "start": "227639",
    "end": "236579"
  },
  {
    "text": "so what is a plug-in right now a coop CTL plugin consists of two pieces one of",
    "start": "236579",
    "end": "243989"
  },
  {
    "text": "them is actually entirely optional so we have some sort of executable and a",
    "start": "243989",
    "end": "249299"
  },
  {
    "text": "plug-in that animal file really you only need the plug-in the animal file but we'll cover that in a minute so the",
    "start": "249299",
    "end": "255419"
  },
  {
    "text": "executable it can be pretty much anything that runs it could be a bash script it could be going executable it",
    "start": "255419",
    "end": "261539"
  },
  {
    "text": "could be a ruby script it could be pretty much anything written any way you want could do anything you want us to do the one we've",
    "start": "261539",
    "end": "269820"
  },
  {
    "text": "worked with mostly I've been go excuse because there you know a part and parcel they use client go that kind of stuff to interact kubernetes but you could you",
    "start": "269820",
    "end": "276810"
  },
  {
    "text": "could roll your own however you want and it takes in a whole bunch of helpful",
    "start": "276810",
    "end": "282419"
  },
  {
    "text": "information from the calling coop CTL environment by these environment flags to let you know about what context coops",
    "start": "282419",
    "end": "289470"
  },
  {
    "text": "ETL was invoked with whether people you know we were invoked it with a specific",
    "start": "289470",
    "end": "295320"
  },
  {
    "text": "namespace throne what were some environment variables we'll go over that in a minute but it takes and how much information why these invite my flags",
    "start": "295320",
    "end": "301289"
  },
  {
    "text": "and it lives in the dot coop hidden directed at the rest of the coop CTL",
    "start": "301289",
    "end": "307229"
  },
  {
    "text": "stuff like account fake and all that it just sort of hangs out in there right next to the Yama file so the mo file is",
    "start": "307229",
    "end": "314220"
  },
  {
    "text": "actually the only required part of the plugin it's a description of the various commands and their flags and how to",
    "start": "314220",
    "end": "322349"
  },
  {
    "text": "invoke them so if you have you're doing it with an executable this would be like dot slash fubar command name but you",
    "start": "322349",
    "end": "329039"
  },
  {
    "text": "could just write a bash script in line in the ml file make super simple plugin",
    "start": "329039",
    "end": "334949"
  },
  {
    "text": "that way so I'm actually gonna have us off to Carolyn and she's gonna give you some examples of how did you just that",
    "start": "334949",
    "end": "341330"
  },
  {
    "text": "so I wrote the tiniest absolute plugin possible to show you that you can start",
    "start": "341330",
    "end": "348090"
  },
  {
    "text": "small do something fun this is it literally oh man I actually use this so it doesn't seem like why would this be",
    "start": "348090",
    "end": "354690"
  },
  {
    "text": "interesting but so what it is is I called my plugin flags I have a little short description and what it does is it",
    "start": "354690",
    "end": "360270"
  },
  {
    "text": "basically dumps back out all the environment variables that keep CTL feeds into your plugin to give you",
    "start": "360270",
    "end": "366449"
  },
  {
    "text": "context about where you're running what's the cluster all that kind of fun stuff and all the magic is on that",
    "start": "366449",
    "end": "372840"
  },
  {
    "text": "command line right there bash Dash C E and V and I just dumping out all the environment variables so I",
    "start": "372840",
    "end": "378360"
  },
  {
    "text": "didn't even have to write a binary or anything like that and then just for fun I defined a flag so we could see what",
    "start": "378360",
    "end": "383940"
  },
  {
    "text": "that looks like so let's go in here and make this much bigger try this out so if",
    "start": "383940",
    "end": "391949"
  },
  {
    "text": "I type cube CTL plugin flags",
    "start": "391949",
    "end": "397639"
  },
  {
    "text": "and let's just look at everything related to keep CTL that it gave to me this is all the magic that makes",
    "start": "397639",
    "end": "405139"
  },
  {
    "text": "plug-ins work I'm sorry yes no don't run that's okay so what they do essentially",
    "start": "405139",
    "end": "410629"
  },
  {
    "text": "is they keep CTL parses every single one of the flags that was sent to keep CTL in addition to the pieces of information",
    "start": "410629",
    "end": "417020"
  },
  {
    "text": "that it grabbed from the context in your cube config and puts it into environment",
    "start": "417020",
    "end": "422120"
  },
  {
    "text": "variables they don't make the assumption that you are like a fully featured binary or executable that can handle",
    "start": "422120",
    "end": "427909"
  },
  {
    "text": "flag parsing and environment variables are kind of easy for everyone to grab and use I mean it kind of passes all",
    "start": "427909",
    "end": "434479"
  },
  {
    "text": "this stuff in and so you can see like all my commands and a whole bunch of",
    "start": "434479",
    "end": "439879"
  },
  {
    "text": "random stuff and here's my local flag everything is prefaced with global flag except for anything you defined in your",
    "start": "439879",
    "end": "446449"
  },
  {
    "text": "plugin yeah Mille and so you can see food here so if I had changed this a little bit and gone foo equals bar you'd",
    "start": "446449",
    "end": "456560"
  },
  {
    "text": "see that show up right here so let's",
    "start": "456560",
    "end": "463729"
  },
  {
    "text": "what does it take to actually distribute this as well and this is kind of like to be honest awkward part plugins is that",
    "start": "463729",
    "end": "471650"
  },
  {
    "text": "in order to distribute this like let's take a look and let's like I'll ask Maya my cube directory let's tree it actually",
    "start": "471650",
    "end": "479360"
  },
  {
    "text": "that's more fun",
    "start": "479360",
    "end": "481870"
  },
  {
    "text": "so I have a couple different plugins installed and cube I have a Flags plugin",
    "start": "486620",
    "end": "492170"
  },
  {
    "text": "that has absolutely nothing in it but that one yamo file I have a kill plug-in which we're going to do next and SV cat",
    "start": "492170",
    "end": "499220"
  },
  {
    "text": "which has as we can't you know compiled go binary and it's plug-in demo any want",
    "start": "499220",
    "end": "504830"
  },
  {
    "text": "to see something scary let's let's take a look at what that looks like it's just",
    "start": "504830",
    "end": "515289"
  },
  {
    "text": "yeah as we can't is actually an interesting thing which is why we",
    "start": "515290",
    "end": "520729"
  },
  {
    "text": "bothered to make a plugin for it it also means that our plugin demo which specifies every single command and flag",
    "start": "520730",
    "end": "527330"
  },
  {
    "text": "that we support is so hard to maintain that we actually generate it and I'll",
    "start": "527330",
    "end": "532910"
  },
  {
    "text": "talk about that later how if you're writing something more interesting than the flag's plugin",
    "start": "532910",
    "end": "539080"
  },
  {
    "text": "how to kind of keep up to date with something like that so let's look at a real plugin that maybe demonstrates why",
    "start": "539080",
    "end": "544970"
  },
  {
    "text": "you would want to try to make a plug-in in the first place so I wrote a little",
    "start": "544970",
    "end": "551150"
  },
  {
    "text": "plugin a killer plugin called kill and it doesn't do anything terribly exciting",
    "start": "551150",
    "end": "557540"
  },
  {
    "text": "but what it does it I don't know it depends if you're writing stuff with finalized errs it's it's very useful so",
    "start": "557540",
    "end": "563660"
  },
  {
    "text": "the deal was finalized errs is that if I hope say a pod and I put a finalizar on it and then I try to delete it you know",
    "start": "563660",
    "end": "569750"
  },
  {
    "text": "I do keep CTL delete the name of the pod it actually won't delete until that finalizer is gone and that can kind of",
    "start": "569750",
    "end": "576410"
  },
  {
    "text": "be annoying we find keeps ETL edit that gets old really fast and i think this is kind of the point of plugins is you",
    "start": "576410",
    "end": "583790"
  },
  {
    "text": "don't have to be a cig you don't have to be some like advanced developer or be",
    "start": "583790",
    "end": "588890"
  },
  {
    "text": "doing crazy things it could just be here common things that I do and normally I put into a bash alias or helpful scripts",
    "start": "588890",
    "end": "595970"
  },
  {
    "text": "or anything like that you can actually put directly in the cube CTL and the reason why you may want to do that is to share it with people because this is",
    "start": "595970",
    "end": "602540"
  },
  {
    "text": "probably a useful thing to do so I wrote a plug-in called kill that takes in a",
    "start": "602540",
    "end": "607880"
  },
  {
    "text": "grace period and rips off any finalized errs and like you know don't use this in prod but you know it's about dev it's",
    "start": "607880",
    "end": "614900"
  },
  {
    "text": "very easy useful so my kill function this is all go I load up a client and I'll show that in",
    "start": "614900",
    "end": "622100"
  },
  {
    "text": "just a second and what I do is I just use the regular client go and I delete all the finalized errs and then I new",
    "start": "622100",
    "end": "629930"
  },
  {
    "text": "get not terribly interesting there and so this is what it would look like so",
    "start": "629930",
    "end": "635780"
  },
  {
    "text": "let's take a look at all my pods at the moment and I'm gonna destroy one of them",
    "start": "635780",
    "end": "641180"
  },
  {
    "text": "so I'm gonna do keep CTL plugin and this time it'll be kill and I'll just put in",
    "start": "641180",
    "end": "647420"
  },
  {
    "text": "the name of this pod and let's make sure that's big enough it took off any final",
    "start": "647420",
    "end": "653090"
  },
  {
    "text": "answers that were on that pod and then tried to kill it and completely got rid of it and didn't wait at all because we",
    "start": "653090",
    "end": "659510"
  },
  {
    "text": "called it kill for a reason so there's a couple things when you're writing a",
    "start": "659510",
    "end": "665600"
  },
  {
    "text": "plug-in especially if you go through the go way that you're probably going to end up wanting to do pretty quickly the",
    "start": "665600",
    "end": "672590"
  },
  {
    "text": "first thing I ran into was that we use blog in the client go library and if",
    "start": "672590",
    "end": "679010"
  },
  {
    "text": "you're familiar with clock at all you know that it doesn't handle flags as gracefully as you wanted it to so if",
    "start": "679010",
    "end": "685640"
  },
  {
    "text": "you're curious what is the special to art King commands table it's a Navy get",
    "start": "685640",
    "end": "691100"
  },
  {
    "text": "a debug output from your cube CTL plugin very helpful to say like dump out all",
    "start": "691100",
    "end": "696410"
  },
  {
    "text": "the different HTTP requests and responses that's it don't ask me why but",
    "start": "696410",
    "end": "701840"
  },
  {
    "text": "that's what makes a blog work and then after that inside my main I parse my",
    "start": "701840",
    "end": "708020"
  },
  {
    "text": "flags just like I normally would and what I'm demonstrating here is something that just works as a plugin but our more",
    "start": "708020",
    "end": "715430"
  },
  {
    "text": "advanced one actually works in standalone mode too and I'll show that in a second so my pod name which was my",
    "start": "715430",
    "end": "720890"
  },
  {
    "text": "first positional argument I can just grab off and use for my OS arts but keeps TTL kinda gets in the way of",
    "start": "720890",
    "end": "727340"
  },
  {
    "text": "everything else very helpfully gets in the way of everything else and instead of having a flag for grace period I",
    "start": "727340",
    "end": "733600"
  },
  {
    "text": "grabbed it off of environment variable here and then I go to kill my pod so",
    "start": "733600",
    "end": "740750"
  },
  {
    "text": "this is where we're trying to build up a greater library of things to help you make plugins so this is something that",
    "start": "740750",
    "end": "748670"
  },
  {
    "text": "Jonathan wrote it's in upstream Kate's cube CTL it's called plug-in utils and it handles grabbing",
    "start": "748670",
    "end": "758139"
  },
  {
    "text": "all of those various global flags I mean you saw the list it was quite large it goes not all of them but all the really",
    "start": "758139",
    "end": "763959"
  },
  {
    "text": "important ones it goes through those flags parses them and then gives you a cube config that you can use to then",
    "start": "763959",
    "end": "770380"
  },
  {
    "text": "load up as a client and start doing what you cared about doing so for my little",
    "start": "770380",
    "end": "775480"
  },
  {
    "text": "kill plugin this is all I had to do was say in it client and config and then make up my config object grab off the",
    "start": "775480",
    "end": "782800"
  },
  {
    "text": "current namespace the reason why that's important is because not everyone uses dash dash namespace sometimes it's set",
    "start": "782800",
    "end": "789579"
  },
  {
    "text": "on the cube context itself so this is where you get that information and over",
    "start": "789579",
    "end": "794769"
  },
  {
    "text": "time we're hoping to build this up so more common tasks or ended up being shared with everyone who are writing",
    "start": "794769",
    "end": "800320"
  },
  {
    "text": "plugins so let's take a look at SVG at because it does a heck of a lot more",
    "start": "800320",
    "end": "805899"
  },
  {
    "text": "than any of these plugins you can run it in plug-in mode so this is what it would",
    "start": "805899",
    "end": "811240"
  },
  {
    "text": "look like cube CTL plugin as we can't get we have brokers it doesn't matter",
    "start": "811240",
    "end": "819180"
  },
  {
    "text": "and it'll print out nicely formatted information for you at that point I",
    "start": "819180",
    "end": "824230"
  },
  {
    "text": "think Jonathan is the only one who insists on running it as a plugin at the moment we're actively working with the",
    "start": "824230",
    "end": "829899"
  },
  {
    "text": "six elie to improve what this looks like and in the future it will be much nicer",
    "start": "829899",
    "end": "836380"
  },
  {
    "text": "it'll pie just be cube CTL as we cats or maybe even something more brief than",
    "start": "836380",
    "end": "841449"
  },
  {
    "text": "that but what most of us do is we just",
    "start": "841449",
    "end": "846490"
  },
  {
    "text": "use the binary directly get brokers so a",
    "start": "846490",
    "end": "851500"
  },
  {
    "text": "couple of things that service catalog has is the ability to have a connection between your your cluster and whatever",
    "start": "851500",
    "end": "859600"
  },
  {
    "text": "the cloud surfaces are of the platform that you're running on today bi manager I'm on Google I'm on IBM's thing that I",
    "start": "859600",
    "end": "867220"
  },
  {
    "text": "forgot the name for our site you can list out all the different capabilities and as the service things that you can",
    "start": "867220",
    "end": "873279"
  },
  {
    "text": "provision so if I do get classes on this cluster I can provision the best",
    "start": "873279",
    "end": "880390"
  },
  {
    "text": "databases there are this is actually from mini broker which if you saw Jeremy talk is the best broker and it runs",
    "start": "880390",
    "end": "887080"
  },
  {
    "text": "inside your cluster and just provisions things as containers and it's very useful when conference networks are so",
    "start": "887080",
    "end": "897580"
  },
  {
    "text": "this isn't terribly interesting like yet classes like well big whoop I could have done that with cube CTL I",
    "start": "897580",
    "end": "903220"
  },
  {
    "text": "could have gone cube CTL get cluster service classes we have a very verbose 4",
    "start": "903220",
    "end": "909460"
  },
  {
    "text": "resource names which is one of the reasons why we wanted this it's not quite as helpful but you're like oh",
    "start": "909460",
    "end": "915430"
  },
  {
    "text": "that's not so bad why did you write a plugin so let's do another one let's do SV can't get bindings which is another",
    "start": "915430",
    "end": "922180"
  },
  {
    "text": "thing and I'm showing a whole bunch of information and like that ready you won't find if you look at REM Lord JSON",
    "start": "922180",
    "end": "929500"
  },
  {
    "text": "output like you need to do a little bit of logic to get to that and there was no good way for us to shoehorn that extra",
    "start": "929500",
    "end": "936040"
  },
  {
    "text": "information to look at all the different status because there's conditions on a binding and come up with one friendly",
    "start": "936040",
    "end": "941800"
  },
  {
    "text": "little word to tell you how it's doing another example is if I go to describe",
    "start": "941800",
    "end": "947260"
  },
  {
    "text": "this binding we'll do mighty be so",
    "start": "947260",
    "end": "955720"
  },
  {
    "text": "bindings are associated with secrets and so in this case we have a secret on the",
    "start": "955720",
    "end": "961480"
  },
  {
    "text": "cluster named my DB but like the 99% case of what I want to do when I'm",
    "start": "961480",
    "end": "966910"
  },
  {
    "text": "looking at a binding is actually figure out well what are the keys within the secret and possibly decode it and see",
    "start": "966910",
    "end": "973420"
  },
  {
    "text": "what's going on there so this is another example of where keep CTL doesn't quite get us where we want to go we'd have to",
    "start": "973420",
    "end": "979330"
  },
  {
    "text": "execute multiple commands and it's like a number of commands and then base64 decoding every single one of those keys",
    "start": "979330",
    "end": "985450"
  },
  {
    "text": "and no one wants to do that I certainly don't want to do that and so this will just allow you to do a",
    "start": "985450",
    "end": "991180"
  },
  {
    "text": "bunch of commands like a porcelain command and git and lets you bring that all together so we're working with six",
    "start": "991180",
    "end": "997990"
  },
  {
    "text": "Eli to kind of figure out a better way to make all this happen but I hopefully you see like the value in why they why",
    "start": "997990",
    "end": "1004590"
  },
  {
    "text": "we did this one more ugly I can show you because who doesn't want to show all the ugly is keep CTL like they say you",
    "start": "1004590",
    "end": "1012480"
  },
  {
    "text": "wanted to see everything about it like this describe the equivalent if I do describe",
    "start": "1012480",
    "end": "1018089"
  },
  {
    "text": "service binding my TB I get some of this",
    "start": "1018089",
    "end": "1023249"
  },
  {
    "text": "back but like going through this is kana awkward and not terribly helpful and eventually we'll get more control over",
    "start": "1023249",
    "end": "1029520"
  },
  {
    "text": "the formatting but at the moment the usability experience for this was really",
    "start": "1029520",
    "end": "1034829"
  },
  {
    "text": "hurting us onboarding people onto our project so we were pretty motivated to",
    "start": "1034829",
    "end": "1040709"
  },
  {
    "text": "make a better experience than that oh no",
    "start": "1040709",
    "end": "1048120"
  },
  {
    "text": "what happened nope",
    "start": "1048120",
    "end": "1056330"
  },
  {
    "text": "abort",
    "start": "1056330",
    "end": "1059330"
  },
  {
    "text": "keep talking man okay so seriously",
    "start": "1081890",
    "end": "1090440"
  },
  {
    "text": "so and that version of SP cap that we showed is actually it's still in active",
    "start": "1093290",
    "end": "1098640"
  },
  {
    "text": "development so that you know we have I don't know I think it's like around a dozen commands at this point we're still adding more every everyday because not",
    "start": "1098640",
    "end": "1105810"
  },
  {
    "text": "only are we adding commence to interact with these independent resources that we added brokers and classes and all that",
    "start": "1105810",
    "end": "1112590"
  },
  {
    "text": "we also want to add sort of medic commands things that wouldn't really make a whole lot of sense ascore Cooper",
    "start": "1112590",
    "end": "1118200"
  },
  {
    "text": "Nate like extensions of CI DS so for instance the Service Catalog has the",
    "start": "1118200",
    "end": "1123300"
  },
  {
    "text": "sort of notion of a marketplace which isn't directly tied to a single resource type it's sort of a notion of like what",
    "start": "1123300",
    "end": "1129240"
  },
  {
    "text": "services can I buy on this thing and it's sort of an amalgamation of brokers classes and plans we want to be able to",
    "start": "1129240",
    "end": "1135330"
  },
  {
    "text": "have our own command that sort of provides information about all of those things and once would have helpful to",
    "start": "1135330",
    "end": "1140880"
  },
  {
    "text": "find place yeah cool so we we've brought it back I just want to mention a couple",
    "start": "1140880",
    "end": "1146550"
  },
  {
    "text": "of lessons learned from building out a plugin for SVG at one the controversy is",
    "start": "1146550",
    "end": "1153620"
  },
  {
    "text": "we're using it as a standalone binary probably more often than people use it as a plugin six Eli is working if you",
    "start": "1153620",
    "end": "1161550"
  },
  {
    "text": "went to their deep dive you got to see kind of their plans for the future making things either closer to get style plugins or actually moving a lot of this",
    "start": "1161550",
    "end": "1169620"
  },
  {
    "text": "logic into the server so that cube CTL could dynamically discover endpoints on the server and then execute that and",
    "start": "1169620",
    "end": "1176310"
  },
  {
    "text": "that's where a lot of the code execution would happen on the server side and then just bringing back output to the clients",
    "start": "1176310",
    "end": "1182040"
  },
  {
    "text": "so that instead of having to install a plug-in and then have you use it you'd be able to offload more of that into a",
    "start": "1182040",
    "end": "1188310"
  },
  {
    "text": "centralized place so that it's a little better UX otherwise a couple suggestions I'm sure",
    "start": "1188310",
    "end": "1195300"
  },
  {
    "text": "you notice that we use verbs like get and describe when we do things like that",
    "start": "1195300",
    "end": "1200820"
  },
  {
    "text": "it was on purpose it wasn't to confuse people it was to provide a pathway a migration path to an eventual esv cat",
    "start": "1200820",
    "end": "1207960"
  },
  {
    "text": "isn't a standalone binary and maybe in this wonderful future you could type cube CTL get classes and you",
    "start": "1207960",
    "end": "1215670"
  },
  {
    "text": "the output that's coming from our plugin was the hope so we didn't want to have any of the flags or the syntax or the",
    "start": "1215670",
    "end": "1222540"
  },
  {
    "text": "output vary too much from what keeps ETL does today and then you notice a lot of",
    "start": "1222540",
    "end": "1227760"
  },
  {
    "text": "the output looks very similar one of the things we'd like to work with six CLI is to bring some of the printers and export",
    "start": "1227760",
    "end": "1234600"
  },
  {
    "text": "a little bit more of that logic so that we can make use of it inside of our plugin at the moment we're just being",
    "start": "1234600",
    "end": "1240300"
  },
  {
    "text": "really good at mimicking what it looks like for the most part and then otherwise I do recommend avoiding replication of cube CTLs core",
    "start": "1240300",
    "end": "1247890"
  },
  {
    "text": "functionality whenever you can so that as the plug-in model evolves you don't",
    "start": "1247890",
    "end": "1253950"
  },
  {
    "text": "end up having written some sad amount of code that is going to be deleted when eventually we have a proper plugin",
    "start": "1253950",
    "end": "1260850"
  },
  {
    "text": "experience in cubes ETL I want to go over a couple of the gotchas and tricks that you need to know when you're",
    "start": "1260850",
    "end": "1266580"
  },
  {
    "text": "working on a plugin one as I mentioned before I'll type in at the command line",
    "start": "1266580",
    "end": "1272370"
  },
  {
    "text": "all of these different flags and they're coming to me as environment variables which is fine depending on what you're",
    "start": "1272370",
    "end": "1279270"
  },
  {
    "text": "doing but when it comes to doing things like loading in all my configuration",
    "start": "1279270",
    "end": "1284870"
  },
  {
    "text": "that can be a huge pain very quickly so I definitely recommend use Jonathan's",
    "start": "1284870",
    "end": "1290910"
  },
  {
    "text": "plug-in utils for a consistent way to load up your client have a handle of the flags and figure out what the current",
    "start": "1290910",
    "end": "1297240"
  },
  {
    "text": "namespace is so that you're not rewriting a lot of logic out there and then otherwise if you're trying to write",
    "start": "1297240",
    "end": "1304920"
  },
  {
    "text": "a plug-in if you're anything like me you immediately want to use go and then if you're anything like me you immediately go like Cobra is the best thing ever and",
    "start": "1304920",
    "end": "1311870"
  },
  {
    "text": "if you're not like tell me what you're using so Cobra is one of the libraries",
    "start": "1311870",
    "end": "1318660"
  },
  {
    "text": "and NGO that handles flight parsing it's a it's a higher-level one built on Flag",
    "start": "1318660",
    "end": "1324200"
  },
  {
    "text": "and it allows you to not have to write yourself how do I purse - - equals or -",
    "start": "1324200",
    "end": "1330450"
  },
  {
    "text": "space whatever so your are two functions that we use to allow us to handle",
    "start": "1330450",
    "end": "1337320"
  },
  {
    "text": "running and plug-in mode and running in standalone binary mode so I have this handy little function called is plugin",
    "start": "1337320",
    "end": "1343620"
  },
  {
    "text": "and it just checks for the existence of an environment variable and then I know no sane person would ever have this",
    "start": "1343620",
    "end": "1349320"
  },
  {
    "text": "they're machines so I'm probably in plug-in mode hopefully yeah and then",
    "start": "1349320",
    "end": "1354419"
  },
  {
    "text": "otherwise bind environment variables uses another library that was also",
    "start": "1354419",
    "end": "1359549"
  },
  {
    "text": "written by SPF 13 that handles basically all the configuration you'd ever want to",
    "start": "1359549",
    "end": "1365970"
  },
  {
    "text": "do it knows how to handle configuration files environment variables and flags and this is the magic glue that smooshes",
    "start": "1365970",
    "end": "1373830"
  },
  {
    "text": "it all together and feeds it into your standard Cobra stuff so that none of our other code is aware that it's a plug-in",
    "start": "1373830",
    "end": "1380490"
  },
  {
    "text": "so there isn't huge overhead I wrote these two functions and tada I'm a plugin so again Glock is silly you need",
    "start": "1380490",
    "end": "1388710"
  },
  {
    "text": "to do a little bit of fiddling to buying glogs information and then otherwise VIP",
    "start": "1388710",
    "end": "1394440"
  },
  {
    "text": "set environment prefix VIPs for Viper all of my flags are gonna come prefixed",
    "start": "1394440",
    "end": "1400799"
  },
  {
    "text": "with local flag and this is what you use to tell Viper hey my flag may be called",
    "start": "1400799",
    "end": "1405990"
  },
  {
    "text": "foo but when it comes in as an environment variable it's going to be cube CTL plugins local flag foo which is",
    "start": "1405990",
    "end": "1414629"
  },
  {
    "text": "a mouthful and the last bit essentially rips through all of Vipers configuration and applies it to Cobra and at that",
    "start": "1414629",
    "end": "1422100"
  },
  {
    "text": "point once this is run you're free and you don't have to worry about whether or not your plugin anymore otherwise the",
    "start": "1422100",
    "end": "1430049"
  },
  {
    "text": "biggest kicker that I ran into when I first started writing plugins is that there are reserved flags in cube CTL you",
    "start": "1430049",
    "end": "1438090"
  },
  {
    "text": "know what they are by writing keep CTL options that will list out a big list of all their short flags and long flags for",
    "start": "1438090",
    "end": "1444629"
  },
  {
    "text": "you if you happen to use one of those and define it in your plugin demo it",
    "start": "1444629",
    "end": "1449940"
  },
  {
    "text": "will just not load your plugin and it won't tell you why it doesn't matter how high you set for both you will not know why it didn't load your plugin so just",
    "start": "1449940",
    "end": "1457470"
  },
  {
    "text": "avoid them the common ones that you may have had because you were running in standalone mode is contacts config - v4",
    "start": "1457470",
    "end": "1465389"
  },
  {
    "text": "verbose - end for namespace stuff like that so I have a little bit of extra logic that strips this out before I code",
    "start": "1465389",
    "end": "1473850"
  },
  {
    "text": "John that a plug-in demo um and then the last little like gotcha but don't worry",
    "start": "1473850",
    "end": "1481769"
  },
  {
    "text": "I have open PR for this is that it doesn't handle boolean flags yet a boolean flag is where you can just",
    "start": "1481769",
    "end": "1487530"
  },
  {
    "text": "go - - name of the flag and you don't say true or false its existence means that that flag is true if you're running",
    "start": "1487530",
    "end": "1494010"
  },
  {
    "text": "and plug-in mode it's actually going to pass it in - as a string and it's going to be true and that's what you need to",
    "start": "1494010",
    "end": "1500160"
  },
  {
    "text": "use to make it work so if any one in six eli is here merge",
    "start": "1500160",
    "end": "1505380"
  },
  {
    "text": "my PR okay yeah okay please merge it now is the part where I",
    "start": "1505380",
    "end": "1518730"
  },
  {
    "text": "come back and scare everybody out of the room so everything we've talked to you about today technically speaking is",
    "start": "1518730",
    "end": "1524790"
  },
  {
    "text": "still in alpha now what does that mean it means it could cease to exist",
    "start": "1524790",
    "end": "1530070"
  },
  {
    "text": "tomorrow No so the current plug-in architecture is an alpha",
    "start": "1530070",
    "end": "1535910"
  },
  {
    "text": "however plugins as a concept are here to stay so the 60 light generally speaking",
    "start": "1535910",
    "end": "1543330"
  },
  {
    "text": "they're pretty sure they want plug-ins to be a thing what that means may change because the current proposal is to move",
    "start": "1543330",
    "end": "1549960"
  },
  {
    "text": "towards the get plug-in model where if you call coop CTL with a command-line but it doesn't recognize it looks",
    "start": "1549960",
    "end": "1555690"
  },
  {
    "text": "through your path for some binary named coop CTL - command name and if it finds",
    "start": "1555690",
    "end": "1561660"
  },
  {
    "text": "it it calls it what does that mean that means that if you wrote a plug-in today under the current model as long as you",
    "start": "1561660",
    "end": "1569040"
  },
  {
    "text": "adhered to keeping it a binary making it not steal one of the names of a core",
    "start": "1569040",
    "end": "1574770"
  },
  {
    "text": "command it would be fairly easy to transfer so our hope is that that doesn't scare you away from writing",
    "start": "1574770",
    "end": "1580710"
  },
  {
    "text": "plugins because like I said we need more users we need more developers we need more people participating in this",
    "start": "1580710",
    "end": "1585840"
  },
  {
    "text": "ecosystem Carolyn mentioned that she has a PR open to fix the boolean flag",
    "start": "1585840",
    "end": "1591630"
  },
  {
    "text": "support so hopefully you'll be able to use those in the very near future as well as supporting all the global flags",
    "start": "1591630",
    "end": "1598890"
  },
  {
    "text": "in my plugin library so yeah we'll get",
    "start": "1598890",
    "end": "1606180"
  },
  {
    "text": "to that in a minute and then yes based recommendations yes I have some control",
    "start": "1606180",
    "end": "1612390"
  },
  {
    "text": "controversial recommendations that no one may agree with other than me but since I wrote us we cat and it's the",
    "start": "1612390",
    "end": "1618210"
  },
  {
    "text": "only plugin I get to make the recommendation I really strongly suggest that you I know that they give you all",
    "start": "1618210",
    "end": "1625140"
  },
  {
    "text": "that nice magic with the environment variables but honestly as students you start writing anything that isn't even",
    "start": "1625140",
    "end": "1630420"
  },
  {
    "text": "remotely trivial you're probably going to end up wanting to write just a standard binary and obviously go because",
    "start": "1630420",
    "end": "1637710"
  },
  {
    "text": "Gophers so I recommend going down that path because some of the other ideas that",
    "start": "1637710",
    "end": "1643200"
  },
  {
    "text": "they've been kicking around are you there all server-side anyways at which point like you would have written",
    "start": "1643200",
    "end": "1648420"
  },
  {
    "text": "in go or like the get style plugin they're going to be calling it out to a",
    "start": "1648420",
    "end": "1654600"
  },
  {
    "text": "binary at that point anyways and you're handling your own flags and you won't be getting all of those environment",
    "start": "1654600",
    "end": "1660450"
  },
  {
    "text": "variables given to you for free so prepare for the future and hopefully you won't have to rewrite a ton of code and",
    "start": "1660450",
    "end": "1667620"
  },
  {
    "text": "then otherwise don't name your plugin after a command that's already a cube",
    "start": "1667620",
    "end": "1673530"
  },
  {
    "text": "CTL verb because eventually right now",
    "start": "1673530",
    "end": "1678600"
  },
  {
    "text": "you run it you say cube CTL plug-in SV cat but eventually that plummet plug-in",
    "start": "1678600",
    "end": "1684570"
  },
  {
    "text": "sub command that we're using during alpha will go away and if you collide with an existing verb guess who's gonna",
    "start": "1684570",
    "end": "1690630"
  },
  {
    "text": "win it won't be you so don't make a plug-in called logs course yeah so",
    "start": "1690630",
    "end": "1698580"
  },
  {
    "text": "there's one more thing I want to mention that this page feel free to download our slides the link there and get plug-in models a link to the current plugin",
    "start": "1698580",
    "end": "1703920"
  },
  {
    "text": "proposal and like I said we're looking for more people who have comments so please down the slides read the proposal",
    "start": "1703920",
    "end": "1709410"
  },
  {
    "text": "say you like it stinks I don't know whatever but we need more opinions holy",
    "start": "1709410",
    "end": "1715620"
  },
  {
    "text": "okay so this is just a couple links to resources for writing plugins the first",
    "start": "1715620",
    "end": "1720750"
  },
  {
    "text": "is just a link to the coop CTL documentation about what a plug-in is the second is a link to my library so",
    "start": "1720750",
    "end": "1728010"
  },
  {
    "text": "this is the library I've written just kind of for to help myself when in the",
    "start": "1728010",
    "end": "1734760"
  },
  {
    "text": "process of writing svk it whenever I need to parse you know the new some new flag that coop CTL passes to us rather",
    "start": "1734760",
    "end": "1741750"
  },
  {
    "text": "than just writing it and sticking in our code base I've been attempting to extract it into a go Lang library that",
    "start": "1741750",
    "end": "1747120"
  },
  {
    "text": "is can can be used for any plugin for anything so currently we have support for most of the big ones namespace",
    "start": "1747120",
    "end": "1753450"
  },
  {
    "text": "context config but there's like a hundred and some flags that get passed in so I'm just adding them as I go along",
    "start": "1753450",
    "end": "1760430"
  },
  {
    "text": "hopefully if you want to write your own plugin and go it should be super helpful to you so yeah check it out see if you",
    "start": "1760430",
    "end": "1767190"
  },
  {
    "text": "can use it if there's something you don't need feel free to submit a PR buck me on github I don't know and then you",
    "start": "1767190",
    "end": "1774809"
  },
  {
    "text": "want to talk about the next thing cuz you ready yeah yeah I do so I one of the things I was recommending to you was I",
    "start": "1774809",
    "end": "1780570"
  },
  {
    "text": "you know I'm a shill for go you know you write your plugin and go use Cobra if",
    "start": "1780570",
    "end": "1786929"
  },
  {
    "text": "you go down that path if you and you end up writing something complicated enough that you manually generating that",
    "start": "1786929",
    "end": "1793740"
  },
  {
    "text": "plug-in that you know if I as a huge pain in the butt my threshold is like one command and then I'm not willing to",
    "start": "1793740",
    "end": "1799110"
  },
  {
    "text": "do it anymore I have a little library that's inside of SV cat that's exported",
    "start": "1799110",
    "end": "1804570"
  },
  {
    "text": "that you can use it's just two lines of code where you can give it your Cobra command the root command for your entire",
    "start": "1804570",
    "end": "1811050"
  },
  {
    "text": "app and it'll generate the plug-in diamo for you and then you can just write it to the file system so don't don't",
    "start": "1811050",
    "end": "1818130"
  },
  {
    "text": "rewrite that it's it's already out there so I wanted to come up with a couple ideas for what you could do to write a",
    "start": "1818130",
    "end": "1825360"
  },
  {
    "text": "plug-in because you know this like fell in our laps we were six CLI and our six service catalog we needed a CLI and so",
    "start": "1825360",
    "end": "1832500"
  },
  {
    "text": "it kind of like forced us to go down this path if you're writing CR DS and you have maybe custom verbs or porcelain commands",
    "start": "1832500",
    "end": "1840210"
  },
  {
    "text": "that combine multiple actions into one or you want to just totally go hog-wild on your output or hit external services",
    "start": "1840210",
    "end": "1847020"
  },
  {
    "text": "all these kind of things that just tweaking what cube CTL is showing it won't be enough a plug-in may be a good",
    "start": "1847020",
    "end": "1854070"
  },
  {
    "text": "thing for you the plugin that i was totally gonna write on the plane but then I like slept who know is the wait",
    "start": "1854070",
    "end": "1860820"
  },
  {
    "text": "plug-in and this is example in my mind of like something that is incredibly useful i just deployed something and",
    "start": "1860820",
    "end": "1867990"
  },
  {
    "text": "it's a deployment and I used keeps yellow deploy it now I just need to wait until it's ready to use and available I",
    "start": "1867990",
    "end": "1874559"
  },
  {
    "text": "don't know if you have the magic bash for that that works every single time like send it to me but otherwise like",
    "start": "1874559",
    "end": "1880460"
  },
  {
    "text": "goodness I just want - - wait so the plugin is going to be cube CTL plugin wait and",
    "start": "1880460",
    "end": "1886470"
  },
  {
    "text": "then the name my deployment and whatever magic bash scripts I use to set up",
    "start": "1886470",
    "end": "1891479"
  },
  {
    "text": "clusters and install my software I will use that immediately so maybe next week this will be posted and you can use that",
    "start": "1891479",
    "end": "1898320"
  },
  {
    "text": "otherwise any time you're running in a batch alias or crazy functions you can",
    "start": "1898320",
    "end": "1903450"
  },
  {
    "text": "turn it into a plug-in and you don't even need to do the binary part you can just shove that into the plug-in Gemmell",
    "start": "1903450",
    "end": "1909229"
  },
  {
    "text": "put in whatever magic commands you need and you can share it with people",
    "start": "1909229",
    "end": "1914389"
  },
  {
    "text": "another idea is a troubleshooter plugin so let's say that you're writing some",
    "start": "1914389",
    "end": "1920389"
  },
  {
    "text": "application that runs on top of kubernetes and it's more complicated than a single service or a single",
    "start": "1920389",
    "end": "1925619"
  },
  {
    "text": "deployment and health checks are individual on each one of these components but I'd like to see for an entire cluster where my application is",
    "start": "1925619",
    "end": "1932849"
  },
  {
    "text": "installed why is it not working having something that can run through a series",
    "start": "1932849",
    "end": "1938399"
  },
  {
    "text": "of health checks and a checks and identify like actually I scraped your log for your API server and I found this",
    "start": "1938399",
    "end": "1945389"
  },
  {
    "text": "message which means this you need to fix that or Oh DNS is down something like",
    "start": "1945389",
    "end": "1950849"
  },
  {
    "text": "that these are useful things that normally people would either just like write in a wiki somewhere and having",
    "start": "1950849",
    "end": "1957929"
  },
  {
    "text": "that just be an instant I found the problem with your cluster is incredibly useful and for every bespoke PICUs piece",
    "start": "1957929",
    "end": "1965639"
  },
  {
    "text": "of software you could have a plugin for it to do that with plug-and-play",
    "start": "1965639",
    "end": "1971039"
  },
  {
    "text": "so these are just a couple more ideas recording of having a plugin that will",
    "start": "1971039",
    "end": "1977159"
  },
  {
    "text": "let you record and replay macros of pre-existing coups ETL commands so I know a lot of us probably have workflows",
    "start": "1977159",
    "end": "1983340"
  },
  {
    "text": "of these five things we always do in a row all right you know tarting a certain context all that this would just be",
    "start": "1983340",
    "end": "1988499"
  },
  {
    "text": "something that would be helpful to help automate that in a way that's more reproducible than a bash script and then my thing I was going to write on the",
    "start": "1988499",
    "end": "1994769"
  },
  {
    "text": "plane here and then I'm not getting was actually a plugin plugin so currently six CLI does not have any plans for any",
    "start": "1994769",
    "end": "2001609"
  },
  {
    "text": "inline way to discover or install plugins so I was gonna write a plug-in to do that so yeah it'll be cube CTL",
    "start": "2001609",
    "end": "2012320"
  },
  {
    "text": "plugin plugin install my plugin please plugins gonna be great yeah plugin",
    "start": "2012320",
    "end": "2019510"
  },
  {
    "text": "that's all we have thank you very much for coming and if you have any questions we've got a mic",
    "start": "2019510",
    "end": "2025700"
  },
  {
    "text": "we can write guess no supposed to [Applause]",
    "start": "2025700",
    "end": "2032529"
  },
  {
    "text": "I don't think it's on okay yeah so I got a little bit confused at you you have a model reading plugin into coupe cuddle",
    "start": "2037830",
    "end": "2044039"
  },
  {
    "text": "then you had a separate SV cat tool and it's something like you were",
    "start": "2044039",
    "end": "2049349"
  },
  {
    "text": "recommending the SP cat tool yeah so I wrote a standalone go binary and I drop",
    "start": "2049349",
    "end": "2056070"
  },
  {
    "text": "it inside of the cube CTL plugins directory I have two ways of executing that one is I can just type s we can't",
    "start": "2056070",
    "end": "2062550"
  },
  {
    "text": "use the binary directly another I can use it through the cube CTL plug-in architecture at the moment because the",
    "start": "2062550",
    "end": "2068820"
  },
  {
    "text": "architectures is in flux as it is most of the developers choose to run it in",
    "start": "2068820",
    "end": "2075260"
  },
  {
    "text": "standalone mode but long term we want it to be a hundred percent plug-in yeah so",
    "start": "2075260",
    "end": "2081179"
  },
  {
    "text": "the reason I brought this up was from a developer's perspective I totally get",
    "start": "2081179",
    "end": "2087030"
  },
  {
    "text": "that I totally see that from an end user perspective and we saw this mistake in OpenStack where each main component had",
    "start": "2087030",
    "end": "2093810"
  },
  {
    "text": "its own different command-line client tool yes huge disaster from impacting",
    "start": "2093810",
    "end": "2100650"
  },
  {
    "text": "usability people could not learn how to use all the components they literally had to build a new OpenStack client that",
    "start": "2100650",
    "end": "2107099"
  },
  {
    "text": "unified that all back so I know from a developer's perspective it feels good to do that but somehow that has to kind of",
    "start": "2107099",
    "end": "2114630"
  },
  {
    "text": "go away quickly because what that does to your end users is just it's just brutal don't know if there's just one",
    "start": "2114630",
    "end": "2120000"
  },
  {
    "text": "but wait is let's say sherry or for other projects do that and you will have the biggest usability impediments that",
    "start": "2120000",
    "end": "2126300"
  },
  {
    "text": "you've ever seen and so please don't reinvent old mistakes sure and I'm a hundred percent aware of",
    "start": "2126300",
    "end": "2131460"
  },
  {
    "text": "this and and we've seen this in other avenues as well the reason why we are is because plugins are alpha and the",
    "start": "2131460",
    "end": "2138869"
  },
  {
    "text": "usability experience isn't there and that's why everything about the binary is written too as soon as it can support",
    "start": "2138869",
    "end": "2144210"
  },
  {
    "text": "what we need we're gonna get rid of standalone Monat mode and only work as a plugin because ideally what I would love",
    "start": "2144210",
    "end": "2150210"
  },
  {
    "text": "to see and I wrote an experience report for this and gave it to six CLI is I'd like to be able to say cube CTL get",
    "start": "2150210",
    "end": "2155880"
  },
  {
    "text": "classes and you're never even aware that you're going through my plugin and you don't switch between binaries and you're",
    "start": "2155880",
    "end": "2162180"
  },
  {
    "text": "able to see my specially formatted output that may have had slightly additional information brought in at the",
    "start": "2162180",
    "end": "2168630"
  },
  {
    "text": "moment this is the only viable path to me in our plugin though yeah I agree with you I think we're actually out of time",
    "start": "2168630",
    "end": "2178170"
  },
  {
    "text": "all right so thank you all for coming we're gonna be available for more questions if you have them please come up to the stage",
    "start": "2178170",
    "end": "2183900"
  },
  {
    "text": "and we can have a chat",
    "start": "2183900",
    "end": "2186650"
  }
]