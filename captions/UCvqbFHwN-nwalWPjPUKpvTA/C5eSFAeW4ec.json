[
  {
    "text": "good morning everyone uh it's a chilly",
    "start": "240",
    "end": "2520"
  },
  {
    "text": "morning so good morning to everyone on a",
    "start": "2520",
    "end": "4440"
  },
  {
    "text": "chilly morning um I see some familiar",
    "start": "4440",
    "end": "7560"
  },
  {
    "text": "faces so for those of you uh unfamiliar",
    "start": "7560",
    "end": "12840"
  },
  {
    "text": "so my name is sudhindra U I'm a",
    "start": "12840",
    "end": "15360"
  },
  {
    "text": "principal engineer at eBay Ebay's Cloud",
    "start": "15360",
    "end": "18520"
  },
  {
    "text": "group um so I we'll be talking about uh",
    "start": "18520",
    "end": "21880"
  },
  {
    "text": "insightful traffic monitoring so how we",
    "start": "21880",
    "end": "24160"
  },
  {
    "text": "leveraged celum to to build a massive uh",
    "start": "24160",
    "end": "28519"
  },
  {
    "text": "service dependency graph within eBay um",
    "start": "28519",
    "end": "32078"
  },
  {
    "text": "so my co-presenter is Aditya so I'll be",
    "start": "32079",
    "end": "36520"
  },
  {
    "text": "describing about the problem statement",
    "start": "36520",
    "end": "39120"
  },
  {
    "text": "and then adiya will get into the",
    "start": "39120",
    "end": "41079"
  },
  {
    "text": "technical details and the",
    "start": "41079",
    "end": "44640"
  },
  {
    "text": "design so eBay is a a global Marketplace",
    "start": "45239",
    "end": "50480"
  },
  {
    "text": "uh it's it connects millions of uh",
    "start": "50480",
    "end": "54239"
  },
  {
    "text": "buyers and sellers worldwide so at any",
    "start": "54239",
    "end": "56640"
  },
  {
    "text": "given point of time uh we have around",
    "start": "56640",
    "end": "58960"
  },
  {
    "text": "2.1 billion",
    "start": "58960",
    "end": "60440"
  },
  {
    "text": "uh live listings and spread across a",
    "start": "60440",
    "end": "63920"
  },
  {
    "text": "vast variety of product categories um so",
    "start": "63920",
    "end": "68320"
  },
  {
    "text": "the Q3 as of Q3 we had a sales volume of",
    "start": "68320",
    "end": "72080"
  },
  {
    "text": "around $8.3 billion and we operate",
    "start": "72080",
    "end": "75040"
  },
  {
    "text": "across 190 markets so with the vast",
    "start": "75040",
    "end": "79200"
  },
  {
    "text": "variety of products C items there is",
    "start": "79200",
    "end": "82240"
  },
  {
    "text": "something for everyone to buy uh at",
    "start": "82240",
    "end": "84960"
  },
  {
    "text": "every time at",
    "start": "84960",
    "end": "86560"
  },
  {
    "text": "eBay um so how is this B business",
    "start": "86560",
    "end": "90439"
  },
  {
    "text": "powered so it's it's powered by our uh",
    "start": "90439",
    "end": "93439"
  },
  {
    "text": "infrastructure and it the infrastructure",
    "start": "93439",
    "end": "95880"
  },
  {
    "text": "is comprised of uh around more than",
    "start": "95880",
    "end": "99360"
  },
  {
    "text": "5,000 microservices so these range from",
    "start": "99360",
    "end": "103320"
  },
  {
    "text": "a variety of stateless Services stateful",
    "start": "103320",
    "end": "105920"
  },
  {
    "text": "services including databases key value",
    "start": "105920",
    "end": "108719"
  },
  {
    "text": "stores we have uh Big Data machine",
    "start": "108719",
    "end": "110840"
  },
  {
    "text": "learning platforms uh we have our own",
    "start": "110840",
    "end": "114000"
  },
  {
    "text": "scalable observability system um built",
    "start": "114000",
    "end": "117320"
  },
  {
    "text": "on uh open source Technologies like prom",
    "start": "117320",
    "end": "120360"
  },
  {
    "text": "open Telemetry and all um we also have",
    "start": "120360",
    "end": "123799"
  },
  {
    "text": "our own uh software load balancers",
    "start": "123799",
    "end": "126240"
  },
  {
    "text": "software firewalls uh I am uh",
    "start": "126240",
    "end": "129360"
  },
  {
    "text": "systems and all these run on a variety",
    "start": "129360",
    "end": "132360"
  },
  {
    "text": "of Hardware um so we have both x86 and",
    "start": "132360",
    "end": "135920"
  },
  {
    "text": "uh",
    "start": "135920",
    "end": "136599"
  },
  {
    "text": "gpus and on the right side you can see",
    "start": "136599",
    "end": "139519"
  },
  {
    "text": "our technology stack uh so most of our",
    "start": "139519",
    "end": "143239"
  },
  {
    "text": "workloads run on kubernetes at this",
    "start": "143239",
    "end": "145720"
  },
  {
    "text": "point uh with uh you know container",
    "start": "145720",
    "end": "147920"
  },
  {
    "text": "runtime we also have work clots running",
    "start": "147920",
    "end": "150519"
  },
  {
    "text": "on bare Metals uh like appliances and",
    "start": "150519",
    "end": "153400"
  },
  {
    "text": "things like",
    "start": "153400",
    "end": "155879"
  },
  {
    "text": "that and this is how our infrastructure",
    "start": "156920",
    "end": "160480"
  },
  {
    "text": "is laid out this is a very high level",
    "start": "160480",
    "end": "162959"
  },
  {
    "text": "overview uh so our applications are",
    "start": "162959",
    "end": "166159"
  },
  {
    "text": "deployed across uh hundreds of uh",
    "start": "166159",
    "end": "168640"
  },
  {
    "text": "kubernetes clusters that are you know",
    "start": "168640",
    "end": "170720"
  },
  {
    "text": "distributed across the globe uh we have",
    "start": "170720",
    "end": "174040"
  },
  {
    "text": "around we have kubernetes clusters in",
    "start": "174040",
    "end": "176879"
  },
  {
    "text": "more than 25 uh uh pops points of",
    "start": "176879",
    "end": "180519"
  },
  {
    "text": "presence and then we also have multiple",
    "start": "180519",
    "end": "183000"
  },
  {
    "text": "data centers um which are spread across",
    "start": "183000",
    "end": "186680"
  },
  {
    "text": "multiple regions and the so what we have",
    "start": "186680",
    "end": "190560"
  },
  {
    "text": "is you know we have the regions the data",
    "start": "190560",
    "end": "192720"
  },
  {
    "text": "centers uh are mapped to specific",
    "start": "192720",
    "end": "195200"
  },
  {
    "text": "regions and in each region we have this",
    "start": "195200",
    "end": "198640"
  },
  {
    "text": "uh notion of an availability Zone and",
    "start": "198640",
    "end": "201560"
  },
  {
    "text": "the idea of an availability zone is it's",
    "start": "201560",
    "end": "204200"
  },
  {
    "text": "the it uses the follows the share",
    "start": "204200",
    "end": "205879"
  },
  {
    "text": "nothing architecture so the Power",
    "start": "205879",
    "end": "207760"
  },
  {
    "text": "Cooling uh networking it all separate",
    "start": "207760",
    "end": "210640"
  },
  {
    "text": "between the availability zones so the",
    "start": "210640",
    "end": "213360"
  },
  {
    "text": "idea is a single point of failure a",
    "start": "213360",
    "end": "215480"
  },
  {
    "text": "single failure in Hardware impacts uh at",
    "start": "215480",
    "end": "219239"
  },
  {
    "text": "most one availability Zone and our",
    "start": "219239",
    "end": "222040"
  },
  {
    "text": "kubernetes clusters are mapped to within",
    "start": "222040",
    "end": "225080"
  },
  {
    "text": "the availability zones and our",
    "start": "225080",
    "end": "227439"
  },
  {
    "text": "applications are essentially you know",
    "start": "227439",
    "end": "228920"
  },
  {
    "text": "they're deployed across multiple AES for",
    "start": "228920",
    "end": "231680"
  },
  {
    "text": "high",
    "start": "231680",
    "end": "232760"
  },
  {
    "text": "availability and each of our clusters",
    "start": "232760",
    "end": "235840"
  },
  {
    "text": "typically have uh 400 to 5500 notes and",
    "start": "235840",
    "end": "240480"
  },
  {
    "text": "the way we uh have these clusters it",
    "start": "240480",
    "end": "243239"
  },
  {
    "text": "could be based on U scale or it could be",
    "start": "243239",
    "end": "246239"
  },
  {
    "text": "based on uh uh the security constraints",
    "start": "246239",
    "end": "249439"
  },
  {
    "text": "such as you know PCI and things like",
    "start": "249439",
    "end": "251319"
  },
  {
    "text": "that um so all our clusters range from",
    "start": "251319",
    "end": "255120"
  },
  {
    "text": "400 to 5,500 nodes and the parts we have",
    "start": "255120",
    "end": "259040"
  },
  {
    "text": "anywhere from 50 ,000 to 130,000 Parts",
    "start": "259040",
    "end": "263639"
  },
  {
    "text": "uh and typically we have you know more",
    "start": "263639",
    "end": "265960"
  },
  {
    "text": "than 10,000 kubernetes services in each",
    "start": "265960",
    "end": "268400"
  },
  {
    "text": "of these clusters",
    "start": "268400",
    "end": "270479"
  },
  {
    "text": "and in this setup we had two problems",
    "start": "270479",
    "end": "275199"
  },
  {
    "text": "that we wanted to solve this was about",
    "start": "275199",
    "end": "277600"
  },
  {
    "text": "uh 1 and a half to two years ago so the",
    "start": "277600",
    "end": "280240"
  },
  {
    "text": "first problem that we were looking at",
    "start": "280240",
    "end": "282280"
  },
  {
    "text": "was uh how do we enforce micro",
    "start": "282280",
    "end": "285080"
  },
  {
    "text": "segmentation policies so what we wanted",
    "start": "285080",
    "end": "287479"
  },
  {
    "text": "to do is we wanted to restrict the",
    "start": "287479",
    "end": "289639"
  },
  {
    "text": "traffic of uh the services to only the",
    "start": "289639",
    "end": "293400"
  },
  {
    "text": "other services that it it it's",
    "start": "293400",
    "end": "295080"
  },
  {
    "text": "authorized to talk um so that in case of",
    "start": "295080",
    "end": "297639"
  },
  {
    "text": "a compromise we reduce the blaster",
    "start": "297639",
    "end": "300039"
  },
  {
    "text": "radius now this being U what's called a",
    "start": "300039",
    "end": "303600"
  },
  {
    "text": "brown field we already had you know",
    "start": "303600",
    "end": "305680"
  },
  {
    "text": "5,000 applications running uh across the",
    "start": "305680",
    "end": "308960"
  },
  {
    "text": "fleet so we could not enforce the",
    "start": "308960",
    "end": "312000"
  },
  {
    "text": "policies on day one this would mean that",
    "start": "312000",
    "end": "314080"
  },
  {
    "text": "you know the availability would be",
    "start": "314080",
    "end": "315440"
  },
  {
    "text": "impacted so we had to discover the",
    "start": "315440",
    "end": "318280"
  },
  {
    "text": "existing service interactions before we",
    "start": "318280",
    "end": "321160"
  },
  {
    "text": "could actually you know start enforcing",
    "start": "321160",
    "end": "322840"
  },
  {
    "text": "the policies so this was the first",
    "start": "322840",
    "end": "325240"
  },
  {
    "text": "problem that we were looking at another",
    "start": "325240",
    "end": "327720"
  },
  {
    "text": "problem was around the same time we we",
    "start": "327720",
    "end": "330800"
  },
  {
    "text": "also had we were growing our service",
    "start": "330800",
    "end": "333319"
  },
  {
    "text": "mesh across the fleet and in service",
    "start": "333319",
    "end": "336919"
  },
  {
    "text": "initially with the service mesh uh we",
    "start": "336919",
    "end": "339919"
  },
  {
    "text": "did uh just the north south uh load",
    "start": "339919",
    "end": "342280"
  },
  {
    "text": "balancing so we used the service mesh",
    "start": "342280",
    "end": "345080"
  },
  {
    "text": "purely for Ingress load balancers and uh",
    "start": "345080",
    "end": "349520"
  },
  {
    "text": "the the plan was to do the East West",
    "start": "349520",
    "end": "351680"
  },
  {
    "text": "load balancing for without going through",
    "start": "351680",
    "end": "353840"
  },
  {
    "text": "the central load",
    "start": "353840",
    "end": "355160"
  },
  {
    "text": "balancers but in order to do that we had",
    "start": "355160",
    "end": "357800"
  },
  {
    "text": "to push the load balancing config",
    "start": "357800",
    "end": "359639"
  },
  {
    "text": "configuration to the the side cars and",
    "start": "359639",
    "end": "363080"
  },
  {
    "text": "we could not push the configuration of",
    "start": "363080",
    "end": "365440"
  },
  {
    "text": "entire fleet to each of the side cars so",
    "start": "365440",
    "end": "367800"
  },
  {
    "text": "that would that would not scale so we",
    "start": "367800",
    "end": "370319"
  },
  {
    "text": "needed um an idea of the service",
    "start": "370319",
    "end": "373199"
  },
  {
    "text": "interactions so that we push only the",
    "start": "373199",
    "end": "375800"
  },
  {
    "text": "dependent Services configuration to each",
    "start": "375800",
    "end": "378120"
  },
  {
    "text": "of the side cars so these were the two",
    "start": "378120",
    "end": "380599"
  },
  {
    "text": "problems that we uh were looking at and",
    "start": "380599",
    "end": "383720"
  },
  {
    "text": "the answer turned out to be the building",
    "start": "383720",
    "end": "386440"
  },
  {
    "text": "a service dependency graph and uh what",
    "start": "386440",
    "end": "389880"
  },
  {
    "text": "exactly is a service dependency graph",
    "start": "389880",
    "end": "391960"
  },
  {
    "text": "it's a it's a relationship where one",
    "start": "391960",
    "end": "394319"
  },
  {
    "text": "service depends on another service for",
    "start": "394319",
    "end": "396759"
  },
  {
    "text": "any you know of its functionality or",
    "start": "396759",
    "end": "399479"
  },
  {
    "text": "data and uh formally you know it can be",
    "start": "399479",
    "end": "403599"
  },
  {
    "text": "visualized as a directed graph where the",
    "start": "403599",
    "end": "406840"
  },
  {
    "text": "nodes of that graph uh represent",
    "start": "406840",
    "end": "409440"
  },
  {
    "text": "services and there is an edge if the",
    "start": "409440",
    "end": "412400"
  },
  {
    "text": "service a calls uh service B so the the",
    "start": "412400",
    "end": "416919"
  },
  {
    "text": "right side shows a representative uh",
    "start": "416919",
    "end": "419879"
  },
  {
    "text": "dependency",
    "start": "419879",
    "end": "421280"
  },
  {
    "text": "graph but in reality it's it's a much",
    "start": "421280",
    "end": "427000"
  },
  {
    "text": "more complex and a large graph um so",
    "start": "427000",
    "end": "431240"
  },
  {
    "text": "with 5,000",
    "start": "431240",
    "end": "433120"
  },
  {
    "text": "microservices it looks something like",
    "start": "433120",
    "end": "435319"
  },
  {
    "text": "this right so we cannot it's it's very",
    "start": "435319",
    "end": "437919"
  },
  {
    "text": "hard to visualize but as we got into uh",
    "start": "437919",
    "end": "442240"
  },
  {
    "text": "visualizing this collecting the",
    "start": "442240",
    "end": "443639"
  },
  {
    "text": "dependencies this opened up a lot of um",
    "start": "443639",
    "end": "446240"
  },
  {
    "text": "interesting use",
    "start": "446240",
    "end": "448319"
  },
  {
    "text": "cases uh",
    "start": "448319",
    "end": "450639"
  },
  {
    "text": "so this is to get into the the first use",
    "start": "450639",
    "end": "453319"
  },
  {
    "text": "case of that I mentioned of",
    "start": "453319",
    "end": "456199"
  },
  {
    "text": "segmentation so the way we are doing it",
    "start": "456199",
    "end": "459599"
  },
  {
    "text": "is uh we discover the",
    "start": "459599",
    "end": "462039"
  },
  {
    "text": "dependencies and the using the Discover",
    "start": "462039",
    "end": "465479"
  },
  {
    "text": "dependencies we create policies and the",
    "start": "465479",
    "end": "468240"
  },
  {
    "text": "policies they go through approval um",
    "start": "468240",
    "end": "471159"
  },
  {
    "text": "from like you know in infosec um and",
    "start": "471159",
    "end": "474479"
  },
  {
    "text": "then once the policy is approved it gets",
    "start": "474479",
    "end": "476599"
  },
  {
    "text": "enforced and then we continuously",
    "start": "476599",
    "end": "478360"
  },
  {
    "text": "monitor all the viol ations and if there",
    "start": "478360",
    "end": "481120"
  },
  {
    "text": "are new dependencies that are discovered",
    "start": "481120",
    "end": "483720"
  },
  {
    "text": "uh while things are you know policies",
    "start": "483720",
    "end": "485440"
  },
  {
    "text": "are enforced we again feed it back to",
    "start": "485440",
    "end": "487919"
  },
  {
    "text": "the same system and create new",
    "start": "487919",
    "end": "490360"
  },
  {
    "text": "policies so apart from segmentation and",
    "start": "490360",
    "end": "493639"
  },
  {
    "text": "the uh service mesh there are other",
    "start": "493639",
    "end": "496440"
  },
  {
    "text": "interesting use cases that we are we've",
    "start": "496440",
    "end": "499440"
  },
  {
    "text": "just started looking into these U so one",
    "start": "499440",
    "end": "501800"
  },
  {
    "text": "is in the area of Incident Management so",
    "start": "501800",
    "end": "504560"
  },
  {
    "text": "using this uh dependency graph we can",
    "start": "504560",
    "end": "508599"
  },
  {
    "text": "efficiently local I the issues so in a",
    "start": "508599",
    "end": "511000"
  },
  {
    "text": "long you know service call chain if we",
    "start": "511000",
    "end": "513959"
  },
  {
    "text": "see uh latency increase or if we see",
    "start": "513959",
    "end": "517039"
  },
  {
    "text": "failures U the dependency graph helps us",
    "start": "517039",
    "end": "520159"
  },
  {
    "text": "uh quickly isolate the issue to a",
    "start": "520159",
    "end": "521919"
  },
  {
    "text": "specific",
    "start": "521919",
    "end": "523039"
  },
  {
    "text": "microservice the other analysis that",
    "start": "523039",
    "end": "525519"
  },
  {
    "text": "could be done is U by overlaying the",
    "start": "525519",
    "end": "527920"
  },
  {
    "text": "dependency graph on the physical uh",
    "start": "527920",
    "end": "530880"
  },
  {
    "text": "infrastructure and U like we can we can",
    "start": "530880",
    "end": "533480"
  },
  {
    "text": "analyze the uh failure points and uh do",
    "start": "533480",
    "end": "537160"
  },
  {
    "text": "a Dr planning for example you know if uh",
    "start": "537160",
    "end": "540920"
  },
  {
    "text": "things are collocated in a single rack",
    "start": "540920",
    "end": "543519"
  },
  {
    "text": "things belonging to a particular",
    "start": "543519",
    "end": "545360"
  },
  {
    "text": "business flow so the if the rack goes",
    "start": "545360",
    "end": "548079"
  },
  {
    "text": "down it can impact the business flow so",
    "start": "548079",
    "end": "550160"
  },
  {
    "text": "such kind of analysis could be uh it's",
    "start": "550160",
    "end": "552680"
  },
  {
    "text": "possible to do with the dependency",
    "start": "552680",
    "end": "555079"
  },
  {
    "text": "graph uh the the third area that we are",
    "start": "555079",
    "end": "558200"
  },
  {
    "text": "uh looking into is using this dependency",
    "start": "558200",
    "end": "561079"
  },
  {
    "text": "graph to do a smart workload scheduling",
    "start": "561079",
    "end": "563800"
  },
  {
    "text": "in kubernetes you know in the workload",
    "start": "563800",
    "end": "566560"
  },
  {
    "text": "scheduling across multiple clusters so",
    "start": "566560",
    "end": "569160"
  },
  {
    "text": "one",
    "start": "569160",
    "end": "570160"
  },
  {
    "text": "uh use",
    "start": "570160",
    "end": "571320"
  },
  {
    "text": "cases if we if we know that service a",
    "start": "571320",
    "end": "573839"
  },
  {
    "text": "talks to service B and there are latency",
    "start": "573839",
    "end": "577760"
  },
  {
    "text": "requirements um so we can actually try",
    "start": "577760",
    "end": "580000"
  },
  {
    "text": "to collocate them in the same",
    "start": "580000",
    "end": "582120"
  },
  {
    "text": "availability zone or in the same rack",
    "start": "582120",
    "end": "584920"
  },
  {
    "text": "and things like that and of course in",
    "start": "584920",
    "end": "588040"
  },
  {
    "text": "the dependency graph is also useful in",
    "start": "588040",
    "end": "590920"
  },
  {
    "text": "um intrusion detection in uh detecting",
    "start": "590920",
    "end": "593640"
  },
  {
    "text": "unusual",
    "start": "593640",
    "end": "595480"
  },
  {
    "text": "patterns and when we started building",
    "start": "595480",
    "end": "598200"
  },
  {
    "text": "the dependency graph",
    "start": "598200",
    "end": "600640"
  },
  {
    "text": "we looked at the problem and we you know",
    "start": "600640",
    "end": "604240"
  },
  {
    "text": "why is this problem so hard for U an",
    "start": "604240",
    "end": "607399"
  },
  {
    "text": "infrastructure such as uh such as ours",
    "start": "607399",
    "end": "610440"
  },
  {
    "text": "um which which already has a lot of",
    "start": "610440",
    "end": "612240"
  },
  {
    "text": "applications that are running right so",
    "start": "612240",
    "end": "615040"
  },
  {
    "text": "there three three reasons so the first",
    "start": "615040",
    "end": "617640"
  },
  {
    "text": "one is the feasibility so we first",
    "start": "617640",
    "end": "620680"
  },
  {
    "text": "looked at can we you know whether we can",
    "start": "620680",
    "end": "623040"
  },
  {
    "text": "instrument the application itself uh to",
    "start": "623040",
    "end": "625680"
  },
  {
    "text": "record these interactions and then you",
    "start": "625680",
    "end": "627519"
  },
  {
    "text": "know push it to a central system system",
    "start": "627519",
    "end": "630560"
  },
  {
    "text": "but it turned out to be not practical",
    "start": "630560",
    "end": "632839"
  },
  {
    "text": "given the wide you know variety of",
    "start": "632839",
    "end": "634839"
  },
  {
    "text": "applications and hundreds of uh teams",
    "start": "634839",
    "end": "637440"
  },
  {
    "text": "application teams that manage these uh",
    "start": "637440",
    "end": "640320"
  },
  {
    "text": "applications the the other option for us",
    "start": "640320",
    "end": "643160"
  },
  {
    "text": "is uh trying to do this at uh service",
    "start": "643160",
    "end": "645760"
  },
  {
    "text": "mesh on the side cars U the we could",
    "start": "645760",
    "end": "649920"
  },
  {
    "text": "like we have onoy we use enoy proxy as",
    "start": "649920",
    "end": "652399"
  },
  {
    "text": "the side car so we could actually you",
    "start": "652399",
    "end": "654399"
  },
  {
    "text": "know tap all the events uh the traffic",
    "start": "654399",
    "end": "657040"
  },
  {
    "text": "at Envoy and then do a depend",
    "start": "657040",
    "end": "660120"
  },
  {
    "text": "Discovery this also seemed became",
    "start": "660120",
    "end": "663560"
  },
  {
    "text": "impractical because our service mesh",
    "start": "663560",
    "end": "665600"
  },
  {
    "text": "adoption itself was not 100% of the",
    "start": "665600",
    "end": "669720"
  },
  {
    "text": "fleet",
    "start": "669720",
    "end": "671320"
  },
  {
    "text": "um and the going to the performance and",
    "start": "671320",
    "end": "675279"
  },
  {
    "text": "scale aspects so we had to do this uh",
    "start": "675279",
    "end": "679200"
  },
  {
    "text": "discovering the dependencies at scale um",
    "start": "679200",
    "end": "682040"
  },
  {
    "text": "and with very minimum uh impact to the",
    "start": "682040",
    "end": "685000"
  },
  {
    "text": "traffic so we didn't want to uh incur",
    "start": "685000",
    "end": "687200"
  },
  {
    "text": "any additional introduce latency to the",
    "start": "687200",
    "end": "689680"
  },
  {
    "text": "data",
    "start": "689680",
    "end": "690839"
  },
  {
    "text": "path um and of course you know to do",
    "start": "690839",
    "end": "693839"
  },
  {
    "text": "this if we had to run an agent on each",
    "start": "693839",
    "end": "695839"
  },
  {
    "text": "of the nodes we didn't want we wanted",
    "start": "695839",
    "end": "698680"
  },
  {
    "text": "the agent to consume um as little CPU",
    "start": "698680",
    "end": "701760"
  },
  {
    "text": "and memory as",
    "start": "701760",
    "end": "703560"
  },
  {
    "text": "possible and the other unique constraint",
    "start": "703560",
    "end": "706519"
  },
  {
    "text": "that we had was the getting very",
    "start": "706519",
    "end": "710120"
  },
  {
    "text": "accurate dependency graph and within",
    "start": "710120",
    "end": "713399"
  },
  {
    "text": "eBay we use most of the application",
    "start": "713399",
    "end": "715760"
  },
  {
    "text": "teams use continuous deployment so they",
    "start": "715760",
    "end": "718720"
  },
  {
    "text": "uh when Whenever there is a code change",
    "start": "718720",
    "end": "720880"
  },
  {
    "text": "things get merged in GitHub it gets",
    "start": "720880",
    "end": "723440"
  },
  {
    "text": "deployed to site within 90 minutes so",
    "start": "723440",
    "end": "726639"
  },
  {
    "text": "what this what this meant is as",
    "start": "726639",
    "end": "728959"
  },
  {
    "text": "applications got deployed to the site",
    "start": "728959",
    "end": "732560"
  },
  {
    "text": "the the IPS they change quite frequently",
    "start": "732560",
    "end": "736279"
  },
  {
    "text": "so an IP which was assigned to a",
    "start": "736279",
    "end": "738320"
  },
  {
    "text": "particular application could be assigned",
    "start": "738320",
    "end": "740120"
  },
  {
    "text": "to a different application uh at a",
    "start": "740120",
    "end": "742240"
  },
  {
    "text": "future time so which means that the A",
    "start": "742240",
    "end": "745279"
  },
  {
    "text": "system that actually kind of collects",
    "start": "745279",
    "end": "747399"
  },
  {
    "text": "these IPS and then tries to map it to",
    "start": "747399",
    "end": "750240"
  },
  {
    "text": "the applications has to work in near",
    "start": "750240",
    "end": "752720"
  },
  {
    "text": "real time and these were the constraints",
    "start": "752720",
    "end": "756440"
  },
  {
    "text": "that we were uh facing and the solution",
    "start": "756440",
    "end": "760360"
  },
  {
    "text": "was came in the form of xelium and",
    "start": "760360",
    "end": "762800"
  },
  {
    "text": "ebpf um so the design and other things",
    "start": "762800",
    "end": "766199"
  },
  {
    "text": "will be described by",
    "start": "766199",
    "end": "769279"
  },
  {
    "text": "Aditya thank you",
    "start": "769279",
    "end": "772519"
  },
  {
    "text": "sui so we started off by exploring the",
    "start": "774199",
    "end": "778160"
  },
  {
    "text": "observability options already available",
    "start": "778160",
    "end": "780600"
  },
  {
    "text": "with celium so which are mainly celium",
    "start": "780600",
    "end": "783680"
  },
  {
    "text": "Hubble and celium monitor so given that",
    "start": "783680",
    "end": "786880"
  },
  {
    "text": "the solution is potentially going to be",
    "start": "786880",
    "end": "788680"
  },
  {
    "text": "deployed on hundreds of thousands of",
    "start": "788680",
    "end": "790360"
  },
  {
    "text": "nodes we wanted to be certain of the",
    "start": "790360",
    "end": "793000"
  },
  {
    "text": "performance characteristics of uh each",
    "start": "793000",
    "end": "795519"
  },
  {
    "text": "of the solutions that we were evaluating",
    "start": "795519",
    "end": "798320"
  },
  {
    "text": "so we have established the functional",
    "start": "798320",
    "end": "800240"
  },
  {
    "text": "and non-functional requirements which",
    "start": "800240",
    "end": "802600"
  },
  {
    "text": "mainly came down to CPU and memory usage",
    "start": "802600",
    "end": "805959"
  },
  {
    "text": "the threshold that uh we have set was",
    "start": "805959",
    "end": "808480"
  },
  {
    "text": "one",
    "start": "808480",
    "end": "809680"
  },
  {
    "text": "uh CPU and under 1 GB of memory in the",
    "start": "809680",
    "end": "813399"
  },
  {
    "text": "user space and close to zero for the",
    "start": "813399",
    "end": "815720"
  },
  {
    "text": "same in the uh kernel space so we",
    "start": "815720",
    "end": "819600"
  },
  {
    "text": "started by evaluating celium Hubble so",
    "start": "819600",
    "end": "822320"
  },
  {
    "text": "celium Hubble is the celium",
    "start": "822320",
    "end": "824920"
  },
  {
    "text": "observability platform it does uh",
    "start": "824920",
    "end": "828600"
  },
  {
    "text": "dependency tracking flow tracking and",
    "start": "828600",
    "end": "831360"
  },
  {
    "text": "block tracking and it also has a good UI",
    "start": "831360",
    "end": "834079"
  },
  {
    "text": "which kind of maps all of this data but",
    "start": "834079",
    "end": "836519"
  },
  {
    "text": "the only problem being if for in order",
    "start": "836519",
    "end": "838639"
  },
  {
    "text": "for it to work on multiple clusters we",
    "start": "838639",
    "end": "842120"
  },
  {
    "text": "it needs celium multicluster option to",
    "start": "842120",
    "end": "844639"
  },
  {
    "text": "be enabled that we didn't have uh",
    "start": "844639",
    "end": "847680"
  },
  {
    "text": "enabled on our Cloud due to scale",
    "start": "847680",
    "end": "849800"
  },
  {
    "text": "requirements so we had to drop that",
    "start": "849800",
    "end": "852399"
  },
  {
    "text": "option the next option that we consider",
    "start": "852399",
    "end": "854880"
  },
  {
    "text": "was the celium monitor so celium monitor",
    "start": "854880",
    "end": "857920"
  },
  {
    "text": "is like an event traser in celium you",
    "start": "857920",
    "end": "860440"
  },
  {
    "text": "can think of it something similar to",
    "start": "860440",
    "end": "862759"
  },
  {
    "text": "Linux TCP dump so we ran lmpa tests on",
    "start": "862759",
    "end": "866959"
  },
  {
    "text": "it and unfortunately it didn't meet our",
    "start": "866959",
    "end": "870480"
  },
  {
    "text": "CPU and memory requirements upon delving",
    "start": "870480",
    "end": "873240"
  },
  {
    "text": "more into the details of the",
    "start": "873240",
    "end": "874519"
  },
  {
    "text": "implementation it turned out that it",
    "start": "874519",
    "end": "876440"
  },
  {
    "text": "didn't have the uh optimized filter",
    "start": "876440",
    "end": "879519"
  },
  {
    "text": "options that we",
    "start": "879519",
    "end": "881600"
  },
  {
    "text": "needed so while uh doing all of this",
    "start": "881600",
    "end": "884480"
  },
  {
    "text": "effort we realize that CM has something",
    "start": "884480",
    "end": "887959"
  },
  {
    "text": "called as contract which is connection",
    "start": "887959",
    "end": "889759"
  },
  {
    "text": "tracking so similar to Something in the",
    "start": "889759",
    "end": "892920"
  },
  {
    "text": "Linux World which is doing a tracking of",
    "start": "892920",
    "end": "895360"
  },
  {
    "text": "all the uh connections inbound and",
    "start": "895360",
    "end": "898000"
  },
  {
    "text": "outbound to optimize",
    "start": "898000",
    "end": "899720"
  },
  {
    "text": "uh running IP tables or the Linux",
    "start": "899720",
    "end": "902440"
  },
  {
    "text": "firewall component so we thought we",
    "start": "902440",
    "end": "904920"
  },
  {
    "text": "could leverage that so in case of uh",
    "start": "904920",
    "end": "908040"
  },
  {
    "text": "celium",
    "start": "908040",
    "end": "909720"
  },
  {
    "text": "the contract is maintained in an ebpf",
    "start": "909720",
    "end": "913680"
  },
  {
    "text": "map uh as you can see here it has all",
    "start": "913680",
    "end": "917160"
  },
  {
    "text": "the fle information so that we need uh",
    "start": "917160",
    "end": "920839"
  },
  {
    "text": "encrypted or embedded in the uh EF map",
    "start": "920839",
    "end": "924920"
  },
  {
    "text": "key so it has the mainly The Source",
    "start": "924920",
    "end": "927759"
  },
  {
    "text": "addresses and the destination address",
    "start": "927759",
    "end": "929800"
  },
  {
    "text": "the destination port and the protocol",
    "start": "929800",
    "end": "931560"
  },
  {
    "text": "that we need uh we ran our l&p test",
    "start": "931560",
    "end": "935000"
  },
  {
    "text": "again on this and it was within our CPN",
    "start": "935000",
    "end": "937720"
  },
  {
    "text": "memory thresholds so we wanted to go",
    "start": "937720",
    "end": "941759"
  },
  {
    "text": "ahead with this solution the only caveat",
    "start": "941759",
    "end": "944480"
  },
  {
    "text": "being that it only has a raw IP port and",
    "start": "944480",
    "end": "946839"
  },
  {
    "text": "protocol data it doesn't have any of the",
    "start": "946839",
    "end": "949319"
  },
  {
    "text": "app metadata that we are interested in",
    "start": "949319",
    "end": "952480"
  },
  {
    "text": "um so at this point we leveraged our",
    "start": "952480",
    "end": "956000"
  },
  {
    "text": "eBay metric service so which work work",
    "start": "956000",
    "end": "959160"
  },
  {
    "text": "set scale and it is based on open",
    "start": "959160",
    "end": "961639"
  },
  {
    "text": "Telemetry we were pushing all our",
    "start": "961639",
    "end": "964440"
  },
  {
    "text": "metrics to this metric service which is",
    "start": "964440",
    "end": "967360"
  },
  {
    "text": "doing the enrichment based on multiple",
    "start": "967360",
    "end": "969360"
  },
  {
    "text": "data pipelines and giving us the actual",
    "start": "969360",
    "end": "972319"
  },
  {
    "text": "app meta data that we needed so",
    "start": "972319",
    "end": "975279"
  },
  {
    "text": "combining all of this led us to this",
    "start": "975279",
    "end": "978519"
  },
  {
    "text": "architecture as you can see here we have",
    "start": "978519",
    "end": "981839"
  },
  {
    "text": "the traffic Observer",
    "start": "981839",
    "end": "983680"
  },
  {
    "text": "pods running on each of the notes and",
    "start": "983680",
    "end": "987319"
  },
  {
    "text": "it's reading the uh",
    "start": "987319",
    "end": "990079"
  },
  {
    "text": "contract contract ebpf map that is",
    "start": "990079",
    "end": "992880"
  },
  {
    "text": "written by celium we're getting the",
    "start": "992880",
    "end": "995560"
  },
  {
    "text": "source IPA destination IP and the",
    "start": "995560",
    "end": "997440"
  },
  {
    "text": "destination Port details that we need",
    "start": "997440",
    "end": "1000000"
  },
  {
    "text": "and we are passing it on to the uh",
    "start": "1000000",
    "end": "1003440"
  },
  {
    "text": "cluster local open Telemetry",
    "start": "1003440",
    "end": "1006680"
  },
  {
    "text": "collectors um using a a persistent grpc",
    "start": "1006680",
    "end": "1011319"
  },
  {
    "text": "connection and all of these intern",
    "start": "1011319",
    "end": "1013959"
  },
  {
    "text": "individual uh open telemetric",
    "start": "1013959",
    "end": "1015880"
  },
  {
    "text": "connections are connected to the central",
    "start": "1015880",
    "end": "1018240"
  },
  {
    "text": "metrix of service which is doing the",
    "start": "1018240",
    "end": "1020800"
  },
  {
    "text": "enrichment part so the enrichment uh the",
    "start": "1020800",
    "end": "1024280"
  },
  {
    "text": "source of Truth for the enrichment",
    "start": "1024280",
    "end": "1025839"
  },
  {
    "text": "pipelines itself is again uh the",
    "start": "1025839",
    "end": "1028240"
  },
  {
    "text": "kubernetes Clusters where it gets all",
    "start": "1028240",
    "end": "1030000"
  },
  {
    "text": "the app metadata for the container",
    "start": "1030000",
    "end": "1032438"
  },
  {
    "text": "containerized applications and for the",
    "start": "1032439",
    "end": "1034880"
  },
  {
    "text": "non-container application we have a",
    "start": "1034880",
    "end": "1036480"
  },
  {
    "text": "central config metadata stores where it",
    "start": "1036480",
    "end": "1039000"
  },
  {
    "text": "gets the metadata for the",
    "start": "1039000",
    "end": "1041438"
  },
  {
    "text": "non-containerized",
    "start": "1041439",
    "end": "1043160"
  },
  {
    "text": "applications and as you can see now the",
    "start": "1043160",
    "end": "1046000"
  },
  {
    "text": "are uh IP data on the port data has been",
    "start": "1046000",
    "end": "1049799"
  },
  {
    "text": "enriched with the app details that we",
    "start": "1049799",
    "end": "1052039"
  },
  {
    "text": "need to build the dependency graph and",
    "start": "1052039",
    "end": "1055000"
  },
  {
    "text": "this is exposed um as a dashboard where",
    "start": "1055000",
    "end": "1058360"
  },
  {
    "text": "we can like run multiple prom query uh",
    "start": "1058360",
    "end": "1061280"
  },
  {
    "text": "query queries to build our dashboards",
    "start": "1061280",
    "end": "1063600"
  },
  {
    "text": "and also it provides an API endpoint",
    "start": "1063600",
    "end": "1065480"
  },
  {
    "text": "that we have been using to pull in this",
    "start": "1065480",
    "end": "1068360"
  },
  {
    "text": "uh data to build our enforcement",
    "start": "1068360",
    "end": "1071559"
  },
  {
    "text": "policies and also pushing this data out",
    "start": "1071559",
    "end": "1074200"
  },
  {
    "text": "for compliance",
    "start": "1074200",
    "end": "1077000"
  },
  {
    "text": "auditing so we had this built we",
    "start": "1077000",
    "end": "1080600"
  },
  {
    "text": "deployed it it was running fine for",
    "start": "1080600",
    "end": "1082600"
  },
  {
    "text": "let's say for the first couple of uh",
    "start": "1082600",
    "end": "1086000"
  },
  {
    "text": "clusters until we hit our first",
    "start": "1086000",
    "end": "1089000"
  },
  {
    "text": "roadblock so as the scale increased we",
    "start": "1089000",
    "end": "1092360"
  },
  {
    "text": "noticed that you know there were",
    "start": "1092360",
    "end": "1095679"
  },
  {
    "text": "inconsistencies in the data given that",
    "start": "1095679",
    "end": "1098760"
  },
  {
    "text": "there is uh a lag between the data being",
    "start": "1098760",
    "end": "1103679"
  },
  {
    "text": "recorded by the traffic Observer and it",
    "start": "1103679",
    "end": "1105799"
  },
  {
    "text": "being pushed to the data pipelines and",
    "start": "1105799",
    "end": "1107799"
  },
  {
    "text": "it being enriched so in order to tackle",
    "start": "1107799",
    "end": "1110919"
  },
  {
    "text": "that we notice that we were already",
    "start": "1110919",
    "end": "1114720"
  },
  {
    "text": "pushing the app metadata to the",
    "start": "1114720",
    "end": "1118720"
  },
  {
    "text": "individual pods as labels is also being",
    "start": "1118720",
    "end": "1121360"
  },
  {
    "text": "recorded by the celium endpoints so we",
    "start": "1121360",
    "end": "1124400"
  },
  {
    "text": "decided to tap in to the Unix socket",
    "start": "1124400",
    "end": "1126799"
  },
  {
    "text": "that is exposed by celium on each of the",
    "start": "1126799",
    "end": "1128720"
  },
  {
    "text": "end points uh as you can see it has all",
    "start": "1128720",
    "end": "1131760"
  },
  {
    "text": "the data that we need",
    "start": "1131760",
    "end": "1133880"
  },
  {
    "text": "to enrich uh the raw IP data locally at",
    "start": "1133880",
    "end": "1138080"
  },
  {
    "text": "least on one one side of the equation so",
    "start": "1138080",
    "end": "1141039"
  },
  {
    "text": "we",
    "start": "1141039",
    "end": "1141760"
  },
  {
    "text": "started uh adding the metadata that is",
    "start": "1141760",
    "end": "1144480"
  },
  {
    "text": "already provided and pushing it out to",
    "start": "1144480",
    "end": "1147120"
  },
  {
    "text": "the local uh open Telemetry collector so",
    "start": "1147120",
    "end": "1151039"
  },
  {
    "text": "this reduced our the load on our Central",
    "start": "1151039",
    "end": "1154000"
  },
  {
    "text": "pipelines by half and also vastly",
    "start": "1154000",
    "end": "1156280"
  },
  {
    "text": "improved the data Fidelity uh along with",
    "start": "1156280",
    "end": "1159000"
  },
  {
    "text": "that we noticed a few of uh",
    "start": "1159000",
    "end": "1162240"
  },
  {
    "text": "peculiarities that were uh there in case",
    "start": "1162240",
    "end": "1165400"
  },
  {
    "text": "of some of the software load balancer",
    "start": "1165400",
    "end": "1167640"
  },
  {
    "text": "cases where the nting is done and also",
    "start": "1167640",
    "end": "1170720"
  },
  {
    "text": "uh we found a whole bunch of host net",
    "start": "1170720",
    "end": "1172840"
  },
  {
    "text": "host Network traffic so we were uh",
    "start": "1172840",
    "end": "1174919"
  },
  {
    "text": "sending out pointers to make life easier",
    "start": "1174919",
    "end": "1177600"
  },
  {
    "text": "for our Central enrichment Pipeline and",
    "start": "1177600",
    "end": "1179960"
  },
  {
    "text": "also reduce the overall uh load on it so",
    "start": "1179960",
    "end": "1184120"
  },
  {
    "text": "this moved us to this architecture where",
    "start": "1184120",
    "end": "1187200"
  },
  {
    "text": "we added an enricher layer in the",
    "start": "1187200",
    "end": "1189159"
  },
  {
    "text": "traffic Observer along with the reader",
    "start": "1189159",
    "end": "1191400"
  },
  {
    "text": "and the",
    "start": "1191400",
    "end": "1192640"
  },
  {
    "text": "exporter this along with uh uh vastly",
    "start": "1192640",
    "end": "1196159"
  },
  {
    "text": "improving the fertility so we also had a",
    "start": "1196159",
    "end": "1198720"
  },
  {
    "text": "contract with the central metric service",
    "start": "1198720",
    "end": "1200880"
  },
  {
    "text": "that anything that is already enriched",
    "start": "1200880",
    "end": "1203440"
  },
  {
    "text": "by the traffic Observer is expected to",
    "start": "1203440",
    "end": "1205640"
  },
  {
    "text": "have higher priority and the metric",
    "start": "1205640",
    "end": "1209120"
  },
  {
    "text": "service is not going to act upon it and",
    "start": "1209120",
    "end": "1211000"
  },
  {
    "text": "reduce the load on",
    "start": "1211000",
    "end": "1213960"
  },
  {
    "text": "it and uh as we continue to deploy it we",
    "start": "1215280",
    "end": "1219880"
  },
  {
    "text": "hit the next challenge on uh deploying",
    "start": "1219880",
    "end": "1222760"
  },
  {
    "text": "the traffic Observer on our software",
    "start": "1222760",
    "end": "1225440"
  },
  {
    "text": "load balancers so these are going to",
    "start": "1225440",
    "end": "1228679"
  },
  {
    "text": "deal at very high scale at hundreds of",
    "start": "1228679",
    "end": "1230840"
  },
  {
    "text": "thousands of connections and millions of",
    "start": "1230840",
    "end": "1233760"
  },
  {
    "text": "uh connections at any given point of",
    "start": "1233760",
    "end": "1236840"
  },
  {
    "text": "time so this has led to us overshooting",
    "start": "1236840",
    "end": "1240400"
  },
  {
    "text": "our CPU and uh",
    "start": "1240400",
    "end": "1242919"
  },
  {
    "text": "memory uh thresholds so we have done a",
    "start": "1242919",
    "end": "1245960"
  },
  {
    "text": "whole bunch of optimizations on it",
    "start": "1245960",
    "end": "1248039"
  },
  {
    "text": "primarily it comes from to batching the",
    "start": "1248039",
    "end": "1250280"
  },
  {
    "text": "batching on the ebpf map reads which",
    "start": "1250280",
    "end": "1252799"
  },
  {
    "text": "like vastly improved our read times and",
    "start": "1252799",
    "end": "1256000"
  },
  {
    "text": "also batching our metric push P itself",
    "start": "1256000",
    "end": "1259280"
  },
  {
    "text": "so let's say we have we read a million",
    "start": "1259280",
    "end": "1261559"
  },
  {
    "text": "connections from the contract table",
    "start": "1261559",
    "end": "1263200"
  },
  {
    "text": "instead of sending it all at once and",
    "start": "1263200",
    "end": "1265799"
  },
  {
    "text": "inuring memory spikes we have we kind of",
    "start": "1265799",
    "end": "1268400"
  },
  {
    "text": "basted to let's say 100K and evened out",
    "start": "1268400",
    "end": "1271120"
  },
  {
    "text": "our memory usage and got rid of the",
    "start": "1271120",
    "end": "1273600"
  },
  {
    "text": "memory spikes also we did some uh tuning",
    "start": "1273600",
    "end": "1276760"
  },
  {
    "text": "on the celium parameters to make the the",
    "start": "1276760",
    "end": "1280000"
  },
  {
    "text": "celium uh contract garbage collected to",
    "start": "1280000",
    "end": "1282440"
  },
  {
    "text": "be aggressive and reducing the timeout",
    "start": "1282440",
    "end": "1285760"
  },
  {
    "text": "values for some of the half open",
    "start": "1285760",
    "end": "1287760"
  },
  {
    "text": "connections and and some health",
    "start": "1287760",
    "end": "1289320"
  },
  {
    "text": "connections to reduce the overall metrix",
    "start": "1289320",
    "end": "1291279"
  },
  {
    "text": "itself so this has bought down uh the CP",
    "start": "1291279",
    "end": "1296000"
  },
  {
    "text": "and memory spikes that we seeing back",
    "start": "1296000",
    "end": "1297880"
  },
  {
    "text": "into the thresholds that we have",
    "start": "1297880",
    "end": "1301840"
  },
  {
    "text": "Set uh so at this point we were at more",
    "start": "1301840",
    "end": "1305080"
  },
  {
    "text": "than 90% of data Fidelity but we have",
    "start": "1305080",
    "end": "1308080"
  },
  {
    "text": "started seeing one of",
    "start": "1308080",
    "end": "1310360"
  },
  {
    "text": "cases where we have seen some unexpected",
    "start": "1310360",
    "end": "1313520"
  },
  {
    "text": "results so at this point we added",
    "start": "1313520",
    "end": "1315640"
  },
  {
    "text": "something call as confidence threshold",
    "start": "1315640",
    "end": "1319120"
  },
  {
    "text": "so when we read the data when the",
    "start": "1319120",
    "end": "1321559"
  },
  {
    "text": "security control plane reads the data",
    "start": "1321559",
    "end": "1323159"
  },
  {
    "text": "from the metric service we've added some",
    "start": "1323159",
    "end": "1325240"
  },
  {
    "text": "confidence threshold so in this case the",
    "start": "1325240",
    "end": "1327919"
  },
  {
    "text": "first one we see the dependency data",
    "start": "1327919",
    "end": "1330640"
  },
  {
    "text": "over windows 24 as we see the specific",
    "start": "1330640",
    "end": "1333720"
  },
  {
    "text": "dependency only ones we don't consider",
    "start": "1333720",
    "end": "1336440"
  },
  {
    "text": "it as high confidence we ignore it was",
    "start": "1336440",
    "end": "1339880"
  },
  {
    "text": "the second one which is consistently",
    "start": "1339880",
    "end": "1342000"
  },
  {
    "text": "enrich all throughout the 24 hours",
    "start": "1342000",
    "end": "1345120"
  },
  {
    "text": "window and we absorb it so this has kind",
    "start": "1345120",
    "end": "1349159"
  },
  {
    "text": "of bought us close to near 100% of uh",
    "start": "1349159",
    "end": "1352360"
  },
  {
    "text": "data",
    "start": "1352360",
    "end": "1353960"
  },
  {
    "text": "Fidelity oh yeah there's one other",
    "start": "1353960",
    "end": "1356039"
  },
  {
    "text": "interesting Linux kernel bug we have",
    "start": "1356039",
    "end": "1358360"
  },
  {
    "text": "encountered when running the traffic",
    "start": "1358360",
    "end": "1361159"
  },
  {
    "text": "Observer on the software gateways so",
    "start": "1361159",
    "end": "1365360"
  },
  {
    "text": "this happens only when the uh EF map is",
    "start": "1365360",
    "end": "1370120"
  },
  {
    "text": "completely filled",
    "start": "1370120",
    "end": "1371840"
  },
  {
    "text": "up uh in millions of entries at this",
    "start": "1371840",
    "end": "1374720"
  },
  {
    "text": "point we kind of locally reproduced it",
    "start": "1374720",
    "end": "1378039"
  },
  {
    "text": "Linux free Prof PR profs got the flame",
    "start": "1378039",
    "end": "1380840"
  },
  {
    "text": "graphs and it turned out that there was",
    "start": "1380840",
    "end": "1383159"
  },
  {
    "text": "a bug in Linux Canal V uh",
    "start": "1383159",
    "end": "1387400"
  },
  {
    "text": "5.5 uh where once the map is filled up",
    "start": "1387400",
    "end": "1390480"
  },
  {
    "text": "it ends up in a locked State and cannot",
    "start": "1390480",
    "end": "1393039"
  },
  {
    "text": "free",
    "start": "1393039",
    "end": "1394400"
  },
  {
    "text": "the uh free the lock and cannot assign",
    "start": "1394400",
    "end": "1398520"
  },
  {
    "text": "more uh map entries and it leads to",
    "start": "1398520",
    "end": "1401120"
  },
  {
    "text": "stoft IQ spikes and packets being",
    "start": "1401120",
    "end": "1403760"
  },
  {
    "text": "dropped so we found uh fortunately a",
    "start": "1403760",
    "end": "1407520"
  },
  {
    "text": "solution for this in new canels we",
    "start": "1407520",
    "end": "1409640"
  },
  {
    "text": "backported it and we were able to",
    "start": "1409640",
    "end": "1412240"
  },
  {
    "text": "continue the deployment of the traffic",
    "start": "1412240",
    "end": "1414200"
  },
  {
    "text": "Observer across the",
    "start": "1414200",
    "end": "1416120"
  },
  {
    "text": "Clusters so yeah before we conclude yeah",
    "start": "1416120",
    "end": "1418760"
  },
  {
    "text": "these were the bunch of lessons that we",
    "start": "1418760",
    "end": "1421159"
  },
  {
    "text": "learned over the journey so the first",
    "start": "1421159",
    "end": "1423159"
  },
  {
    "text": "one is to have a repeatable and",
    "start": "1423159",
    "end": "1425039"
  },
  {
    "text": "automated LMP environment so that any",
    "start": "1425039",
    "end": "1427880"
  },
  {
    "text": "changes we made we were",
    "start": "1427880",
    "end": "1430279"
  },
  {
    "text": "confident that we could go into",
    "start": "1430279",
    "end": "1432039"
  },
  {
    "text": "production without breaking anything and",
    "start": "1432039",
    "end": "1434080"
  },
  {
    "text": "also for us to have a timeline and on",
    "start": "1434080",
    "end": "1436960"
  },
  {
    "text": "how we were you know improving or kind",
    "start": "1436960",
    "end": "1440760"
  },
  {
    "text": "of deprecating the Performance Based on",
    "start": "1440760",
    "end": "1442559"
  },
  {
    "text": "the changes that were made the second",
    "start": "1442559",
    "end": "1444440"
  },
  {
    "text": "one as I earlier mentioned was the batch",
    "start": "1444440",
    "end": "1446840"
  },
  {
    "text": "operations both on the evf maps and also",
    "start": "1446840",
    "end": "1449360"
  },
  {
    "text": "with the metric",
    "start": "1449360",
    "end": "1451120"
  },
  {
    "text": "push and uh also yeah so we have seen",
    "start": "1451120",
    "end": "1454919"
  },
  {
    "text": "that we are not using much of CPU and we",
    "start": "1454919",
    "end": "1457640"
  },
  {
    "text": "have seen a lot of memory spikes so we",
    "start": "1457640",
    "end": "1460080"
  },
  {
    "text": "have moved to uh aggressive goang",
    "start": "1460080",
    "end": "1463480"
  },
  {
    "text": "garbage collection where we traded off",
    "start": "1463480",
    "end": "1465480"
  },
  {
    "text": "higher CPU with lower uh",
    "start": "1465480",
    "end": "1469120"
  },
  {
    "text": "memory",
    "start": "1469120",
    "end": "1470159"
  },
  {
    "text": "usage and the next ones are as I earlier",
    "start": "1470159",
    "end": "1473720"
  },
  {
    "text": "mentioned some of the celium contract T",
    "start": "1473720",
    "end": "1476640"
  },
  {
    "text": "parameters being tuned and local",
    "start": "1476640",
    "end": "1478240"
  },
  {
    "text": "enrichment which kind of reduce the",
    "start": "1478240",
    "end": "1481760"
  },
  {
    "text": "overall",
    "start": "1481760",
    "end": "1483600"
  },
  {
    "text": "uh load on our entire",
    "start": "1483600",
    "end": "1487200"
  },
  {
    "text": "pipeline uh yeah that concludes the talk",
    "start": "1487200",
    "end": "1490480"
  },
  {
    "text": "yeah so if you're interested in working",
    "start": "1490480",
    "end": "1493000"
  },
  {
    "text": "at Network and security challenges at",
    "start": "1493000",
    "end": "1495679"
  },
  {
    "text": "scale we are highing thank you",
    "start": "1495679",
    "end": "1499420"
  },
  {
    "text": "[Applause]",
    "start": "1499420",
    "end": "1504959"
  },
  {
    "text": "I think we have few minutes for uh any",
    "start": "1506039",
    "end": "1510600"
  },
  {
    "text": "Q&A hello uh quick question um the",
    "start": "1511840",
    "end": "1515440"
  },
  {
    "text": "Telemetry that you were collecting on",
    "start": "1515440",
    "end": "1516760"
  },
  {
    "text": "the flows themselves did you get any",
    "start": "1516760",
    "end": "1518240"
  },
  {
    "text": "statistics on the flows themselves other",
    "start": "1518240",
    "end": "1519840"
  },
  {
    "text": "than number of flows such as bytes per",
    "start": "1519840",
    "end": "1521520"
  },
  {
    "text": "flow or length of time per flow when you",
    "start": "1521520",
    "end": "1523440"
  },
  {
    "text": "were doing the",
    "start": "1523440",
    "end": "1525200"
  },
  {
    "text": "analysis uh uh yeah that that's a good",
    "start": "1525200",
    "end": "1528559"
  },
  {
    "text": "question actually right now uh the focus",
    "start": "1528559",
    "end": "1530640"
  },
  {
    "text": "of this was to collect the dependencies",
    "start": "1530640",
    "end": "1533480"
  },
  {
    "text": "so we are not uh you know doing any",
    "start": "1533480",
    "end": "1536080"
  },
  {
    "text": "analytics on the amount the volume of",
    "start": "1536080",
    "end": "1538600"
  },
  {
    "text": "traffic that's being sent and things",
    "start": "1538600",
    "end": "1540200"
  },
  {
    "text": "like that but that's something that can",
    "start": "1540200",
    "end": "1542559"
  },
  {
    "text": "be easily",
    "start": "1542559",
    "end": "1543880"
  },
  {
    "text": "Incorporated thank",
    "start": "1543880",
    "end": "1545880"
  },
  {
    "text": "you um if I understand correctly so",
    "start": "1545880",
    "end": "1548559"
  },
  {
    "text": "you're kind of trying to use the celum",
    "start": "1548559",
    "end": "1551080"
  },
  {
    "text": "connection tracking data to build the",
    "start": "1551080",
    "end": "1552799"
  },
  {
    "text": "service dependency right so what do you",
    "start": "1552799",
    "end": "1555760"
  },
  {
    "text": "think would be the Gap to maybe",
    "start": "1555760",
    "end": "1557120"
  },
  {
    "text": "introduce this as a new slim mode in",
    "start": "1557120",
    "end": "1560360"
  },
  {
    "text": "Hubble and maybe Upstream it like over",
    "start": "1560360",
    "end": "1563919"
  },
  {
    "text": "time there may be changes in BPF map",
    "start": "1563919",
    "end": "1566679"
  },
  {
    "text": "format you'll have to be you'll have to",
    "start": "1566679",
    "end": "1568919"
  },
  {
    "text": "maintain them uh internally so do you",
    "start": "1568919",
    "end": "1571399"
  },
  {
    "text": "think this is possible to Upstream uh as",
    "start": "1571399",
    "end": "1574279"
  },
  {
    "text": "a potential extension to",
    "start": "1574279",
    "end": "1577360"
  },
  {
    "text": "Hubble yeah so uh at least when we were",
    "start": "1578120",
    "end": "1581840"
  },
  {
    "text": "working we were more confident with our",
    "start": "1581840",
    "end": "1584080"
  },
  {
    "text": "metric service scale but yeah we can",
    "start": "1584080",
    "end": "1586279"
  },
  {
    "text": "definitely explore uh kind of having",
    "start": "1586279",
    "end": "1589120"
  },
  {
    "text": "this as a harble enhancement we need to",
    "start": "1589120",
    "end": "1592080"
  },
  {
    "text": "work on that though right yeah uh I was",
    "start": "1592080",
    "end": "1594760"
  },
  {
    "text": "talking mostly about the exporting part",
    "start": "1594760",
    "end": "1596679"
  },
  {
    "text": "not really the storage part um uh sorry",
    "start": "1596679",
    "end": "1599720"
  },
  {
    "text": "could you repeat that no I was talking",
    "start": "1599720",
    "end": "1601640"
  },
  {
    "text": "about the exporting part where you're",
    "start": "1601640",
    "end": "1603559"
  },
  {
    "text": "actually reading the data from the",
    "start": "1603559",
    "end": "1605039"
  },
  {
    "text": "connection tracking entries and just",
    "start": "1605039",
    "end": "1607159"
  },
  {
    "text": "exporting like that piece could be uh",
    "start": "1607159",
    "end": "1609960"
  },
  {
    "text": "could be great for uh Upstream as well",
    "start": "1609960",
    "end": "1612679"
  },
  {
    "text": "yeah we could definitely explore that",
    "start": "1612679",
    "end": "1614679"
  },
  {
    "text": "yeah thank you great job",
    "start": "1614679",
    "end": "1618320"
  }
]