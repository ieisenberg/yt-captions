[
  {
    "start": "0",
    "end": "80000"
  },
  {
    "text": "hi everyone welcome to the future is",
    "start": "80",
    "end": "2800"
  },
  {
    "text": "bright the future is remote right",
    "start": "2800",
    "end": "5200"
  },
  {
    "text": "my name is uh tom i'm one of the",
    "start": "5200",
    "end": "7839"
  },
  {
    "text": "prometheus team",
    "start": "7839",
    "end": "8800"
  },
  {
    "text": "um and actually primarily work on the",
    "start": "8800",
    "end": "11360"
  },
  {
    "text": "remote write code",
    "start": "11360",
    "end": "12880"
  },
  {
    "text": "uh in my day job i'm the vp product at",
    "start": "12880",
    "end": "15120"
  },
  {
    "text": "grafana labs i'm still trying to figure",
    "start": "15120",
    "end": "16800"
  },
  {
    "text": "out what that means",
    "start": "16800",
    "end": "17680"
  },
  {
    "text": "after three years um i also started the",
    "start": "17680",
    "end": "20560"
  },
  {
    "text": "cortex project",
    "start": "20560",
    "end": "21520"
  },
  {
    "text": "alongside julius and more recently",
    "start": "21520",
    "end": "24400"
  },
  {
    "text": "started the loki project",
    "start": "24400",
    "end": "25760"
  },
  {
    "text": "the kind of prometheus inspired log",
    "start": "25760",
    "end": "28000"
  },
  {
    "text": "aggregation system",
    "start": "28000",
    "end": "30080"
  },
  {
    "text": "when i'm not when i'm not coding uh when",
    "start": "30080",
    "end": "32000"
  },
  {
    "text": "i'm not working i",
    "start": "32000",
    "end": "33440"
  },
  {
    "text": "like to make 3d printers and",
    "start": "33440",
    "end": "35200"
  },
  {
    "text": "occasionally uh brew",
    "start": "35200",
    "end": "36719"
  },
  {
    "text": "brew my own beer so without further ado",
    "start": "36719",
    "end": "40719"
  },
  {
    "text": "um today i'd like to talk about four",
    "start": "40719",
    "end": "42399"
  },
  {
    "text": "things right i'd like to talk about",
    "start": "42399",
    "end": "43840"
  },
  {
    "text": "remote right how did it start what is it",
    "start": "43840",
    "end": "45920"
  },
  {
    "text": "what is it for",
    "start": "45920",
    "end": "47440"
  },
  {
    "text": "um i'd like to talk about standardizing",
    "start": "47440",
    "end": "49520"
  },
  {
    "text": "remote right and a lot of the recent",
    "start": "49520",
    "end": "51360"
  },
  {
    "text": "effort",
    "start": "51360",
    "end": "51840"
  },
  {
    "text": "efforts over the last two months to",
    "start": "51840",
    "end": "55120"
  },
  {
    "text": "define what it means and to test that",
    "start": "55120",
    "end": "58239"
  },
  {
    "text": "i'd like to talk about what's next or",
    "start": "58239",
    "end": "59680"
  },
  {
    "text": "what's in the immediate future for",
    "start": "59680",
    "end": "61520"
  },
  {
    "text": "for the remote right protocol so i'd",
    "start": "61520",
    "end": "63359"
  },
  {
    "text": "like to talk about metadata",
    "start": "63359",
    "end": "64960"
  },
  {
    "text": "i'd like to talk about exemplars",
    "start": "64960",
    "end": "68000"
  },
  {
    "text": "and finally i'd like to talk about uh",
    "start": "68000",
    "end": "70560"
  },
  {
    "text": "you know further off in the future",
    "start": "70560",
    "end": "72159"
  },
  {
    "text": "for remote right um some of the ideas",
    "start": "72159",
    "end": "74320"
  },
  {
    "text": "we've got",
    "start": "74320",
    "end": "75360"
  },
  {
    "text": "i noticed the slide says exam plus i'd",
    "start": "75360",
    "end": "78000"
  },
  {
    "text": "love to know what they are",
    "start": "78000",
    "end": "79840"
  },
  {
    "text": "so what is remote right um",
    "start": "79840",
    "end": "83040"
  },
  {
    "start": "80000",
    "end": "284000"
  },
  {
    "text": "actually funnily enough the story of",
    "start": "83040",
    "end": "84400"
  },
  {
    "text": "remote right kind of matches my story",
    "start": "84400",
    "end": "86080"
  },
  {
    "text": "with prometheus",
    "start": "86080",
    "end": "87280"
  },
  {
    "text": "the first pr i did to the project was to",
    "start": "87280",
    "end": "90240"
  },
  {
    "text": "to switch the remote right system",
    "start": "90240",
    "end": "92720"
  },
  {
    "text": "um from grpc over to protobufs and http",
    "start": "92720",
    "end": "97920"
  },
  {
    "text": "um this was because it was quite hard at",
    "start": "97920",
    "end": "99680"
  },
  {
    "text": "the time you know this was almost five",
    "start": "99680",
    "end": "101040"
  },
  {
    "text": "years ago",
    "start": "101040",
    "end": "101759"
  },
  {
    "text": "it was quite hard at the time to get uh",
    "start": "101759",
    "end": "103439"
  },
  {
    "text": "to get grpc to go through um an elastic",
    "start": "103439",
    "end": "105759"
  },
  {
    "text": "load balancer",
    "start": "105759",
    "end": "107040"
  },
  {
    "text": "and i wanted to use prometheus remote",
    "start": "107040",
    "end": "109040"
  },
  {
    "text": "right to send data to",
    "start": "109040",
    "end": "111119"
  },
  {
    "text": "to cortex and really that is what",
    "start": "111119",
    "end": "113840"
  },
  {
    "text": "prometheus remote right is for it's for",
    "start": "113840",
    "end": "115759"
  },
  {
    "text": "sending data",
    "start": "115759",
    "end": "117040"
  },
  {
    "text": "to other systems prometheus sits there",
    "start": "117040",
    "end": "120079"
  },
  {
    "text": "scrapes the samples scrapes your job",
    "start": "120079",
    "end": "122320"
  },
  {
    "text": "scrapes metrics from your instrumented",
    "start": "122320",
    "end": "124240"
  },
  {
    "text": "applications and exporters",
    "start": "124240",
    "end": "126640"
  },
  {
    "text": "collects them stores them but can also",
    "start": "126640",
    "end": "129119"
  },
  {
    "text": "forward them on to other systems",
    "start": "129119",
    "end": "132400"
  },
  {
    "text": "so we did this um we did this about uh",
    "start": "132400",
    "end": "134959"
  },
  {
    "text": "five years ago",
    "start": "134959",
    "end": "136160"
  },
  {
    "text": "um and and over the past five years",
    "start": "136160",
    "end": "138879"
  },
  {
    "text": "we've seen many vendors",
    "start": "138879",
    "end": "140720"
  },
  {
    "text": "kind of take notice of prometheus and",
    "start": "140720",
    "end": "143520"
  },
  {
    "text": "and",
    "start": "143520",
    "end": "143840"
  },
  {
    "text": "really add support for prometheus remote",
    "start": "143840",
    "end": "146160"
  },
  {
    "text": "right to their to their products",
    "start": "146160",
    "end": "148160"
  },
  {
    "text": "um you know they've they've made it so",
    "start": "148160",
    "end": "149920"
  },
  {
    "text": "that you can send data from prometheus",
    "start": "149920",
    "end": "151680"
  },
  {
    "text": "to pretty much",
    "start": "151680",
    "end": "152400"
  },
  {
    "text": "any any of the metrics vendors in in the",
    "start": "152400",
    "end": "155760"
  },
  {
    "text": "world",
    "start": "155760",
    "end": "156560"
  },
  {
    "text": "in fact if you look at the prometheus",
    "start": "156560",
    "end": "158319"
  },
  {
    "text": "docs you'll see there are over 30",
    "start": "158319",
    "end": "160319"
  },
  {
    "text": "different projects",
    "start": "160319",
    "end": "161519"
  },
  {
    "text": "um that accepts from the accept",
    "start": "161519",
    "end": "163280"
  },
  {
    "text": "prometheus remote right or send",
    "start": "163280",
    "end": "165200"
  },
  {
    "text": "prometheus remote right",
    "start": "165200",
    "end": "166720"
  },
  {
    "text": "and really kind of it's amazing that",
    "start": "166720",
    "end": "168560"
  },
  {
    "text": "that only over five years has",
    "start": "168560",
    "end": "170000"
  },
  {
    "text": "been so popular um",
    "start": "170000",
    "end": "173760"
  },
  {
    "text": "and we're not resting there you know we",
    "start": "173760",
    "end": "175280"
  },
  {
    "text": "we really want to kind of push the",
    "start": "175280",
    "end": "176879"
  },
  {
    "text": "interoperability story",
    "start": "176879",
    "end": "178560"
  },
  {
    "text": "uh in prometheus as far as it will go",
    "start": "178560",
    "end": "181519"
  },
  {
    "text": "and more recently uh in the",
    "start": "181519",
    "end": "183280"
  },
  {
    "text": "not the most recent but the one before",
    "start": "183280",
    "end": "184800"
  },
  {
    "text": "that release we added the ability to",
    "start": "184800",
    "end": "187680"
  },
  {
    "text": "actually have prometheus receive",
    "start": "187680",
    "end": "189920"
  },
  {
    "text": "remote write requests as well so you can",
    "start": "189920",
    "end": "192720"
  },
  {
    "text": "now configure a prometheus",
    "start": "192720",
    "end": "195200"
  },
  {
    "text": "to send data from one place to another",
    "start": "195200",
    "end": "199040"
  },
  {
    "text": "right this really solves the kind of",
    "start": "199040",
    "end": "201599"
  },
  {
    "text": "global federation problem in a very",
    "start": "201599",
    "end": "203280"
  },
  {
    "text": "different way",
    "start": "203280",
    "end": "204319"
  },
  {
    "text": "you know we noticed with with federation",
    "start": "204319",
    "end": "206640"
  },
  {
    "text": "you know federation is the way you can",
    "start": "206640",
    "end": "208239"
  },
  {
    "text": "send",
    "start": "208239",
    "end": "208879"
  },
  {
    "text": "uh you can set up a prometheus to scrape",
    "start": "208879",
    "end": "212000"
  },
  {
    "text": "the metrics from other prometheus",
    "start": "212000",
    "end": "213920"
  },
  {
    "text": "servers so this allows you to have a",
    "start": "213920",
    "end": "215920"
  },
  {
    "text": "prometheus server",
    "start": "215920",
    "end": "216879"
  },
  {
    "text": "let's say in each region and then a",
    "start": "216879",
    "end": "218640"
  },
  {
    "text": "global one that scrapes all the data",
    "start": "218640",
    "end": "220319"
  },
  {
    "text": "from the",
    "start": "220319",
    "end": "220959"
  },
  {
    "text": "from the regional ones and get that kind",
    "start": "220959",
    "end": "223200"
  },
  {
    "text": "of central view where you can run your",
    "start": "223200",
    "end": "224959"
  },
  {
    "text": "kind of central aggregations",
    "start": "224959",
    "end": "226799"
  },
  {
    "text": "however the challenge here is that this",
    "start": "226799",
    "end": "228879"
  },
  {
    "text": "requires you know the",
    "start": "228879",
    "end": "230159"
  },
  {
    "text": "the global prometheus to to be able to",
    "start": "230159",
    "end": "232239"
  },
  {
    "text": "scrape all the edge ones right so you",
    "start": "232239",
    "end": "233680"
  },
  {
    "text": "have to open up firewall ports and",
    "start": "233680",
    "end": "235360"
  },
  {
    "text": "figure out",
    "start": "235360",
    "end": "236159"
  },
  {
    "text": "ways of uh securing you know three or",
    "start": "236159",
    "end": "239280"
  },
  {
    "text": "more",
    "start": "239280",
    "end": "239680"
  },
  {
    "text": "different prometheus servers with the",
    "start": "239680",
    "end": "242159"
  },
  {
    "text": "the push-based approach coming from",
    "start": "242159",
    "end": "244400"
  },
  {
    "text": "uh prometheus remote right you only have",
    "start": "244400",
    "end": "246560"
  },
  {
    "text": "to open up that one central location and",
    "start": "246560",
    "end": "248799"
  },
  {
    "text": "on and kind of lock down and",
    "start": "248799",
    "end": "250239"
  },
  {
    "text": "authenticate one central location",
    "start": "250239",
    "end": "252239"
  },
  {
    "text": "and you can have the edge locations push",
    "start": "252239",
    "end": "254799"
  },
  {
    "text": "to that central location",
    "start": "254799",
    "end": "256720"
  },
  {
    "text": "um this might not sound like a big deal",
    "start": "256720",
    "end": "258239"
  },
  {
    "text": "but imagine if that uh",
    "start": "258239",
    "end": "259840"
  },
  {
    "text": "these edge locations um were on ip",
    "start": "259840",
    "end": "262960"
  },
  {
    "text": "addresses that were changing",
    "start": "262960",
    "end": "264479"
  },
  {
    "text": "or were maybe on flaky networks you know",
    "start": "264479",
    "end": "266880"
  },
  {
    "text": "the remote right protocol might be a",
    "start": "266880",
    "end": "268560"
  },
  {
    "text": "better",
    "start": "268560",
    "end": "269040"
  },
  {
    "text": "a better fit for that so this is in the",
    "start": "269040",
    "end": "271840"
  },
  {
    "text": "uh",
    "start": "271840",
    "end": "272160"
  },
  {
    "text": "in the second to latest uh prometheus",
    "start": "272160",
    "end": "274240"
  },
  {
    "text": "release it's experimental we'd love you",
    "start": "274240",
    "end": "276160"
  },
  {
    "text": "to give it a go",
    "start": "276160",
    "end": "277199"
  },
  {
    "text": "see if see what works see what doesn't",
    "start": "277199",
    "end": "278720"
  },
  {
    "text": "work and see if it suits this use case",
    "start": "278720",
    "end": "282080"
  },
  {
    "text": "so that's remote right that's how it",
    "start": "282080",
    "end": "284880"
  },
  {
    "start": "284000",
    "end": "618000"
  },
  {
    "text": "started what it's used for",
    "start": "284880",
    "end": "288160"
  },
  {
    "text": "what we have noticed with all this",
    "start": "288160",
    "end": "289759"
  },
  {
    "text": "adoption by by many many people",
    "start": "289759",
    "end": "292400"
  },
  {
    "text": "is there's been some differences in",
    "start": "292400",
    "end": "294720"
  },
  {
    "text": "implementation and we want to make sure",
    "start": "294720",
    "end": "296240"
  },
  {
    "text": "that this ecosystem",
    "start": "296240",
    "end": "297759"
  },
  {
    "text": "is interoperable and and really that all",
    "start": "297759",
    "end": "300240"
  },
  {
    "text": "the users of all the different",
    "start": "300240",
    "end": "301440"
  },
  {
    "text": "components can have the best possible",
    "start": "301440",
    "end": "302960"
  },
  {
    "text": "experience",
    "start": "302960",
    "end": "304160"
  },
  {
    "text": "in particular one of the things we've",
    "start": "304160",
    "end": "305520"
  },
  {
    "text": "noticed is there's",
    "start": "305520",
    "end": "307600"
  },
  {
    "text": "a bunch of projects popping up that that",
    "start": "307600",
    "end": "310560"
  },
  {
    "text": "fill this kind of scrape prometheus",
    "start": "310560",
    "end": "312479"
  },
  {
    "text": "metrics",
    "start": "312479",
    "end": "313360"
  },
  {
    "text": "and send them else elsewhere using",
    "start": "313360",
    "end": "315600"
  },
  {
    "text": "remote right",
    "start": "315600",
    "end": "316479"
  },
  {
    "text": "you know obviously prometheus does that",
    "start": "316479",
    "end": "317919"
  },
  {
    "text": "uh is the original one",
    "start": "317919",
    "end": "319680"
  },
  {
    "text": "um about a year or two or a year ago",
    "start": "319680",
    "end": "322960"
  },
  {
    "text": "we launched the grafana agent which is a",
    "start": "322960",
    "end": "325199"
  },
  {
    "text": "kind of stripped-down version of",
    "start": "325199",
    "end": "326479"
  },
  {
    "text": "prometheus using all the same code",
    "start": "326479",
    "end": "328639"
  },
  {
    "text": "but kind of stripped down lighter weight",
    "start": "328639",
    "end": "330320"
  },
  {
    "text": "version that doesn't have any local",
    "start": "330320",
    "end": "331600"
  },
  {
    "text": "storage you can't do queries",
    "start": "331600",
    "end": "333039"
  },
  {
    "text": "but it will just scrape your jobs and",
    "start": "333039",
    "end": "335120"
  },
  {
    "text": "send them",
    "start": "335120",
    "end": "336320"
  },
  {
    "text": "using remote right there's also the",
    "start": "336320",
    "end": "338800"
  },
  {
    "text": "victoria metrics agent",
    "start": "338800",
    "end": "340560"
  },
  {
    "text": "uh influx's telegraph will scrape",
    "start": "340560",
    "end": "342800"
  },
  {
    "text": "prometheus",
    "start": "342800",
    "end": "343600"
  },
  {
    "text": "scrape jobs instrumented with prometheus",
    "start": "343600",
    "end": "345919"
  },
  {
    "text": "metrics",
    "start": "345919",
    "end": "346880"
  },
  {
    "text": "and send them elsewhere using remote",
    "start": "346880",
    "end": "348880"
  },
  {
    "text": "right and then more recently you've got",
    "start": "348880",
    "end": "351360"
  },
  {
    "text": "open telemetry which will also scrape",
    "start": "351360",
    "end": "353199"
  },
  {
    "text": "jobs using prometheus metrics and send",
    "start": "353199",
    "end": "355120"
  },
  {
    "text": "them over remote right",
    "start": "355120",
    "end": "357039"
  },
  {
    "text": "so these are the five systems that i'm",
    "start": "357039",
    "end": "358479"
  },
  {
    "text": "going to look at and you know",
    "start": "358479",
    "end": "360400"
  },
  {
    "text": "there are other systems i have to kind",
    "start": "360400",
    "end": "362960"
  },
  {
    "text": "of slip in at least one meme into each",
    "start": "362960",
    "end": "364960"
  },
  {
    "text": "of my talks",
    "start": "364960",
    "end": "367759"
  },
  {
    "text": "so we started this effort to standardize",
    "start": "367759",
    "end": "370319"
  },
  {
    "text": "it right we",
    "start": "370319",
    "end": "372639"
  },
  {
    "text": "we wanted a document that described what",
    "start": "372639",
    "end": "375440"
  },
  {
    "text": "prometheus remote right",
    "start": "375440",
    "end": "376720"
  },
  {
    "text": "was what it meant to say you were",
    "start": "376720",
    "end": "378560"
  },
  {
    "text": "compatible with that",
    "start": "378560",
    "end": "380080"
  },
  {
    "text": "we also wanted to explain a lot of the",
    "start": "380080",
    "end": "381440"
  },
  {
    "text": "reasoning behind the decisions why we've",
    "start": "381440",
    "end": "383280"
  },
  {
    "text": "done it this way",
    "start": "383280",
    "end": "384720"
  },
  {
    "text": "it wasn't all just arbitrary and finally",
    "start": "384720",
    "end": "387120"
  },
  {
    "text": "we wanted to give some",
    "start": "387120",
    "end": "388319"
  },
  {
    "text": "thought to how would we future proof",
    "start": "388319",
    "end": "390880"
  },
  {
    "text": "this protocol how would we upgrade this",
    "start": "390880",
    "end": "392639"
  },
  {
    "text": "protocol how would we make it so that",
    "start": "392639",
    "end": "394639"
  },
  {
    "text": "when we introduced a v2 we could be kind",
    "start": "394639",
    "end": "397280"
  },
  {
    "text": "of backwards compatible",
    "start": "397280",
    "end": "399280"
  },
  {
    "text": "i'm hoping that this will allow us to",
    "start": "399280",
    "end": "400880"
  },
  {
    "text": "remove the experimental flag from",
    "start": "400880",
    "end": "402639"
  },
  {
    "text": "prometheus remote right",
    "start": "402639",
    "end": "404400"
  },
  {
    "text": "one of the key things here is that we're",
    "start": "404400",
    "end": "406080"
  },
  {
    "text": "not changing anything with this",
    "start": "406080",
    "end": "407280"
  },
  {
    "text": "standardization",
    "start": "407280",
    "end": "408560"
  },
  {
    "text": "uh we're just documenting the current",
    "start": "408560",
    "end": "410639"
  },
  {
    "text": "behavior how it currently works",
    "start": "410639",
    "end": "412479"
  },
  {
    "text": "because there's so many people that use",
    "start": "412479",
    "end": "413840"
  },
  {
    "text": "this that i don't think realistically we",
    "start": "413840",
    "end": "415360"
  },
  {
    "text": "can change it",
    "start": "415360",
    "end": "416319"
  },
  {
    "text": "uh at least not in a uh incompatible way",
    "start": "416319",
    "end": "420240"
  },
  {
    "text": "you know this will also allow us to",
    "start": "420240",
    "end": "421599"
  },
  {
    "text": "offer some kind of compatibility",
    "start": "421599",
    "end": "422960"
  },
  {
    "text": "guarantee",
    "start": "422960",
    "end": "423599"
  },
  {
    "text": "and i just want to say a big thank you",
    "start": "423599",
    "end": "424880"
  },
  {
    "text": "to everyone in the community who's",
    "start": "424880",
    "end": "426240"
  },
  {
    "text": "commented on the doc",
    "start": "426240",
    "end": "427599"
  },
  {
    "text": "who's proposed changes it's really been",
    "start": "427599",
    "end": "429520"
  },
  {
    "text": "a big team effort",
    "start": "429520",
    "end": "431280"
  },
  {
    "text": "so now that we have this standard it's",
    "start": "431280",
    "end": "432800"
  },
  {
    "text": "time to test those those agents that i",
    "start": "432800",
    "end": "435039"
  },
  {
    "text": "mentioned",
    "start": "435039",
    "end": "435520"
  },
  {
    "text": "against this standard and to that end uh",
    "start": "435520",
    "end": "438639"
  },
  {
    "text": "over the last week or two i've built a",
    "start": "438639",
    "end": "440720"
  },
  {
    "text": "test harness",
    "start": "440720",
    "end": "441759"
  },
  {
    "text": "that runs an instance of each of the",
    "start": "441759",
    "end": "443599"
  },
  {
    "text": "agents exports some metrics for them to",
    "start": "443599",
    "end": "445680"
  },
  {
    "text": "scrape",
    "start": "445680",
    "end": "446400"
  },
  {
    "text": "and then configures them to send that",
    "start": "446400",
    "end": "448000"
  },
  {
    "text": "data back to the test harness via remote",
    "start": "448000",
    "end": "450240"
  },
  {
    "text": "write",
    "start": "450240",
    "end": "451599"
  },
  {
    "text": "we then in the test harness in you know",
    "start": "451599",
    "end": "453360"
  },
  {
    "text": "export various different metrics and",
    "start": "453360",
    "end": "455360"
  },
  {
    "text": "and you know test examine the the",
    "start": "455360",
    "end": "458160"
  },
  {
    "text": "response we get over a remote right and",
    "start": "458160",
    "end": "459919"
  },
  {
    "text": "check it matches what we expect",
    "start": "459919",
    "end": "461680"
  },
  {
    "text": "you know and you know this is relatively",
    "start": "461680",
    "end": "463440"
  },
  {
    "text": "straightforward you know we export",
    "start": "463440",
    "end": "464720"
  },
  {
    "text": "a counter we check we get a counter back",
    "start": "464720",
    "end": "466800"
  },
  {
    "text": "we export a histogram",
    "start": "466800",
    "end": "468160"
  },
  {
    "text": "we check we get a histogram back but",
    "start": "468160",
    "end": "470240"
  },
  {
    "text": "there's a lot of nuance to this protocol",
    "start": "470240",
    "end": "472319"
  },
  {
    "text": "there's a lot of different areas which",
    "start": "472319",
    "end": "473759"
  },
  {
    "text": "some people do or don't implement and so",
    "start": "473759",
    "end": "476080"
  },
  {
    "text": "we wanted to kind of figure out what",
    "start": "476080",
    "end": "478639"
  },
  {
    "text": "level of coverage we had",
    "start": "478639",
    "end": "480879"
  },
  {
    "text": "these are early results um you know i'm",
    "start": "480879",
    "end": "483039"
  },
  {
    "text": "filming this talk",
    "start": "483039",
    "end": "484400"
  },
  {
    "text": "uh almost a month before you'll be",
    "start": "484400",
    "end": "486080"
  },
  {
    "text": "watching it so",
    "start": "486080",
    "end": "487440"
  },
  {
    "text": "hopefully uh over the course of the next",
    "start": "487440",
    "end": "489360"
  },
  {
    "text": "month some of these vendors",
    "start": "489360",
    "end": "491280"
  },
  {
    "text": "and some of these other projects will",
    "start": "491280",
    "end": "493199"
  },
  {
    "text": "improve their compatibility with remote",
    "start": "493199",
    "end": "494960"
  },
  {
    "text": "right and we're actively working with",
    "start": "494960",
    "end": "496319"
  },
  {
    "text": "all of them to do that",
    "start": "496319",
    "end": "497919"
  },
  {
    "text": "so to start with obviously we have",
    "start": "497919",
    "end": "499280"
  },
  {
    "text": "prometheus right prometheus implements",
    "start": "499280",
    "end": "501120"
  },
  {
    "text": "all of remote right",
    "start": "501120",
    "end": "502160"
  },
  {
    "text": "the specification is just a document",
    "start": "502160",
    "end": "504479"
  },
  {
    "text": "that describes what prometheus does",
    "start": "504479",
    "end": "506000"
  },
  {
    "text": "so we'd expect it to pass all these",
    "start": "506000",
    "end": "507759"
  },
  {
    "text": "tests the grafana agent using all the",
    "start": "507759",
    "end": "510560"
  },
  {
    "text": "same code that prometheus uses",
    "start": "510560",
    "end": "512719"
  },
  {
    "text": "um just implements the same thing right",
    "start": "512719",
    "end": "515518"
  },
  {
    "text": "and again we kind of expect it",
    "start": "515519",
    "end": "517518"
  },
  {
    "text": "to pass all the tests interestingly uh",
    "start": "517519",
    "end": "520719"
  },
  {
    "text": "we found a bug in the grafana agent",
    "start": "520719",
    "end": "522240"
  },
  {
    "text": "using this test suite uh it turns out",
    "start": "522240",
    "end": "524240"
  },
  {
    "text": "we were not removing uh duplicate labels",
    "start": "524240",
    "end": "527760"
  },
  {
    "text": "um so we fixed that in the point one",
    "start": "527760",
    "end": "529120"
  },
  {
    "text": "release it was it was one line of code",
    "start": "529120",
    "end": "532000"
  },
  {
    "text": "the victoria metrics agent does pretty",
    "start": "532000",
    "end": "534160"
  },
  {
    "text": "well actually",
    "start": "534160",
    "end": "535120"
  },
  {
    "text": "um it does everything it has some slight",
    "start": "535120",
    "end": "538000"
  },
  {
    "text": "inconsistencies around how it does the",
    "start": "538000",
    "end": "539519"
  },
  {
    "text": "up metric it doesn't actually",
    "start": "539519",
    "end": "541120"
  },
  {
    "text": "um as far as we can tell send the up",
    "start": "541120",
    "end": "543600"
  },
  {
    "text": "metric",
    "start": "543600",
    "end": "544399"
  },
  {
    "text": "when there's a failed scrape which is",
    "start": "544399",
    "end": "546240"
  },
  {
    "text": "kind of important for the test harness",
    "start": "546240",
    "end": "547600"
  },
  {
    "text": "to set",
    "start": "547600",
    "end": "548240"
  },
  {
    "text": "to to tell the difference between the",
    "start": "548240",
    "end": "550320"
  },
  {
    "text": "agent not doing anything and the agent",
    "start": "550320",
    "end": "552080"
  },
  {
    "text": "successfully",
    "start": "552080",
    "end": "553200"
  },
  {
    "text": "kind of failing um and also the victoria",
    "start": "553200",
    "end": "556000"
  },
  {
    "text": "metrics agent doesn't implement the",
    "start": "556000",
    "end": "557440"
  },
  {
    "text": "staleness markers which are really",
    "start": "557440",
    "end": "559040"
  },
  {
    "text": "important way we can tell",
    "start": "559040",
    "end": "560880"
  },
  {
    "text": "when metrics go away telegraph",
    "start": "560880",
    "end": "564959"
  },
  {
    "text": "not quite as not quite as complete as a",
    "start": "564959",
    "end": "567040"
  },
  {
    "text": "victoria metric agent in general",
    "start": "567040",
    "end": "568959"
  },
  {
    "text": "it doesn't do up or staleness at all but",
    "start": "568959",
    "end": "571440"
  },
  {
    "text": "it",
    "start": "571440",
    "end": "572080"
  },
  {
    "text": "you know it doesn't quite have the right",
    "start": "572080",
    "end": "573680"
  },
  {
    "text": "job labels there you can program it to",
    "start": "573680",
    "end": "576000"
  },
  {
    "text": "add job labels",
    "start": "576000",
    "end": "577360"
  },
  {
    "text": "um but it's kind of missing some of the",
    "start": "577360",
    "end": "579200"
  },
  {
    "text": "features of service discovery that",
    "start": "579200",
    "end": "580959"
  },
  {
    "text": "require",
    "start": "580959",
    "end": "581519"
  },
  {
    "text": "that would add those job labels then",
    "start": "581519",
    "end": "584480"
  },
  {
    "text": "finally the open telemetry collectors",
    "start": "584480",
    "end": "586080"
  },
  {
    "text": "the newest kid on the block so",
    "start": "586080",
    "end": "587839"
  },
  {
    "text": "not not not as far along in its support",
    "start": "587839",
    "end": "590000"
  },
  {
    "text": "it doesn't propagate histograms",
    "start": "590000",
    "end": "591360"
  },
  {
    "text": "correctly",
    "start": "591360",
    "end": "592160"
  },
  {
    "text": "doesn't do a lot of the job labels",
    "start": "592160",
    "end": "593760"
  },
  {
    "text": "correctly no up metric",
    "start": "593760",
    "end": "595839"
  },
  {
    "text": "uh no no stillness markers we're",
    "start": "595839",
    "end": "598640"
  },
  {
    "text": "actively working with",
    "start": "598640",
    "end": "600320"
  },
  {
    "text": "the open telemetry team to try and get",
    "start": "600320",
    "end": "603440"
  },
  {
    "text": "better",
    "start": "603440",
    "end": "604079"
  },
  {
    "text": "uh better support and hopefully in a",
    "start": "604079",
    "end": "605360"
  },
  {
    "text": "month or so um we can",
    "start": "605360",
    "end": "607360"
  },
  {
    "text": "we'll see if they've got better support",
    "start": "607360",
    "end": "609040"
  },
  {
    "text": "i'll be i'll be hanging around for a",
    "start": "609040",
    "end": "610720"
  },
  {
    "text": "kind of live q a at the end and i'll",
    "start": "610720",
    "end": "612399"
  },
  {
    "text": "make sure i",
    "start": "612399",
    "end": "613279"
  },
  {
    "text": "i bring uh updated results for that",
    "start": "613279",
    "end": "617279"
  },
  {
    "text": "so next uh metadata and uh exemplars not",
    "start": "617760",
    "end": "621279"
  },
  {
    "start": "618000",
    "end": "800000"
  },
  {
    "text": "exam plus",
    "start": "621279",
    "end": "622480"
  },
  {
    "text": "um so first metadata not a lot of people",
    "start": "622480",
    "end": "625600"
  },
  {
    "text": "know actually that",
    "start": "625600",
    "end": "626800"
  },
  {
    "text": "that prometheus exports um prometheus uh",
    "start": "626800",
    "end": "630240"
  },
  {
    "text": "client libraries allow you to add kind",
    "start": "630240",
    "end": "632000"
  },
  {
    "text": "of help text and",
    "start": "632000",
    "end": "633279"
  },
  {
    "text": "and and type metadata uh to every metric",
    "start": "633279",
    "end": "635760"
  },
  {
    "text": "in your application",
    "start": "635760",
    "end": "637200"
  },
  {
    "text": "and uh prometheus scrapes this and",
    "start": "637200",
    "end": "640000"
  },
  {
    "text": "stores this in memory stores the latest",
    "start": "640000",
    "end": "641680"
  },
  {
    "text": "values in memory",
    "start": "641680",
    "end": "642959"
  },
  {
    "text": "and then has an api so the the client",
    "start": "642959",
    "end": "645200"
  },
  {
    "text": "library their client applications to",
    "start": "645200",
    "end": "646720"
  },
  {
    "text": "prometheus like grafana or",
    "start": "646720",
    "end": "648240"
  },
  {
    "text": "or the prometheus ui can can query this",
    "start": "648240",
    "end": "650880"
  },
  {
    "text": "and use it to help build these kind of",
    "start": "650880",
    "end": "652320"
  },
  {
    "text": "uis",
    "start": "652320",
    "end": "653200"
  },
  {
    "text": "um so grafana builds this particular ui",
    "start": "653200",
    "end": "655279"
  },
  {
    "text": "just allowing you to see what each each",
    "start": "655279",
    "end": "656880"
  },
  {
    "text": "metric is",
    "start": "656880",
    "end": "658480"
  },
  {
    "text": "we want to enable um systems that",
    "start": "658480",
    "end": "661519"
  },
  {
    "text": "implement remote right to have the same",
    "start": "661519",
    "end": "663120"
  },
  {
    "text": "information and basically the same",
    "start": "663120",
    "end": "664720"
  },
  {
    "text": "experience",
    "start": "664720",
    "end": "665920"
  },
  {
    "text": "uh as prometheus and so back in",
    "start": "665920",
    "end": "669519"
  },
  {
    "text": "uh february last year so over a year ago",
    "start": "669519",
    "end": "672880"
  },
  {
    "text": "josh added support for um uh metadata to",
    "start": "672880",
    "end": "676079"
  },
  {
    "text": "the remote right protocol",
    "start": "676079",
    "end": "677200"
  },
  {
    "text": "so it's an extra field and it's kind of",
    "start": "677200",
    "end": "678959"
  },
  {
    "text": "a bit best effort right we're",
    "start": "678959",
    "end": "680640"
  },
  {
    "text": "we're taking some of the metadata and",
    "start": "680640",
    "end": "682160"
  },
  {
    "text": "sending it on a period",
    "start": "682160",
    "end": "683920"
  },
  {
    "text": "alongside your samples we want to make a",
    "start": "683920",
    "end": "686800"
  },
  {
    "text": "series of improvements to this",
    "start": "686800",
    "end": "688000"
  },
  {
    "text": "we want to write the metadata to the",
    "start": "688000",
    "end": "689360"
  },
  {
    "text": "right head log we want to send it",
    "start": "689360",
    "end": "691360"
  },
  {
    "text": "alongside the same metrics that it's",
    "start": "691360",
    "end": "693279"
  },
  {
    "text": "supposed to be sent with instead of just",
    "start": "693279",
    "end": "694800"
  },
  {
    "text": "kind of",
    "start": "694800",
    "end": "695519"
  },
  {
    "text": "arbitrarily sharding it um and and rob",
    "start": "695519",
    "end": "698399"
  },
  {
    "text": "from uh from chronosphere",
    "start": "698399",
    "end": "699920"
  },
  {
    "text": "actually has a pr that achieves some of",
    "start": "699920",
    "end": "701519"
  },
  {
    "text": "this that we want to work with him to",
    "start": "701519",
    "end": "702959"
  },
  {
    "text": "get in over the next few months",
    "start": "702959",
    "end": "706079"
  },
  {
    "text": "so the next example um we want to give",
    "start": "706079",
    "end": "709279"
  },
  {
    "text": "is exemplars right spelled correctly",
    "start": "709279",
    "end": "711360"
  },
  {
    "text": "this time in exemplars",
    "start": "711360",
    "end": "713600"
  },
  {
    "text": "allow you in grafana to to overlay kind",
    "start": "713600",
    "end": "716000"
  },
  {
    "text": "of dots",
    "start": "716000",
    "end": "716639"
  },
  {
    "text": "on a graph and then when you click on",
    "start": "716639",
    "end": "718399"
  },
  {
    "text": "one of those dots one of those exemplars",
    "start": "718399",
    "end": "720320"
  },
  {
    "text": "you can jump straight to the trace that",
    "start": "720320",
    "end": "722240"
  },
  {
    "text": "that dot kind of represents",
    "start": "722240",
    "end": "724160"
  },
  {
    "text": "right so so bjorn added exemplar support",
    "start": "724160",
    "end": "727200"
  },
  {
    "text": "to client golang quite a while ago",
    "start": "727200",
    "end": "729279"
  },
  {
    "text": "and callum added exemplar support to um",
    "start": "729279",
    "end": "732000"
  },
  {
    "text": "to prometheus in the last release",
    "start": "732000",
    "end": "734560"
  },
  {
    "text": "and together you can implement this",
    "start": "734560",
    "end": "736160"
  },
  {
    "text": "really cool experience that really",
    "start": "736160",
    "end": "737839"
  },
  {
    "text": "speeds up kind of",
    "start": "737839",
    "end": "739360"
  },
  {
    "text": "incident response and debugging",
    "start": "739360",
    "end": "740959"
  },
  {
    "text": "workflows and and really kind of makes",
    "start": "740959",
    "end": "743200"
  },
  {
    "text": "the whole system feel",
    "start": "743200",
    "end": "744000"
  },
  {
    "text": "a lot more integrated prometheus doesn't",
    "start": "744000",
    "end": "746880"
  },
  {
    "text": "actually care where these traces are",
    "start": "746880",
    "end": "748399"
  },
  {
    "text": "stored you can store them in jager",
    "start": "748399",
    "end": "750079"
  },
  {
    "text": "you can store them in zipkin or you can",
    "start": "750079",
    "end": "751519"
  },
  {
    "text": "store them in grafana tempo itself",
    "start": "751519",
    "end": "753839"
  },
  {
    "text": "um we want to make this available",
    "start": "753839",
    "end": "757120"
  },
  {
    "text": "to uh to remote right endpoints to to",
    "start": "757120",
    "end": "760880"
  },
  {
    "text": "people who are implementing remote right",
    "start": "760880",
    "end": "762320"
  },
  {
    "text": "should also be able to receive exemplars",
    "start": "762320",
    "end": "764079"
  },
  {
    "text": "and",
    "start": "764079",
    "end": "764399"
  },
  {
    "text": "and offer the same apis in the same",
    "start": "764399",
    "end": "766079"
  },
  {
    "text": "experience",
    "start": "766079",
    "end": "767519"
  },
  {
    "text": "and to that end callum from grafana labs",
    "start": "767519",
    "end": "770079"
  },
  {
    "text": "he is adding",
    "start": "770079",
    "end": "771279"
  },
  {
    "text": "uh a remote right uh for example so this",
    "start": "771279",
    "end": "774079"
  },
  {
    "text": "is",
    "start": "774079",
    "end": "774480"
  },
  {
    "text": "gonna be writing the exemplars to the",
    "start": "774480",
    "end": "776160"
  },
  {
    "text": "right ahead log and then tailing that",
    "start": "776160",
    "end": "778000"
  },
  {
    "text": "right head log",
    "start": "778000",
    "end": "778800"
  },
  {
    "text": "is is as part of the remote right code",
    "start": "778800",
    "end": "781200"
  },
  {
    "text": "and and sending them out in batches",
    "start": "781200",
    "end": "783839"
  },
  {
    "text": "this will also enable kind of long-term",
    "start": "783839",
    "end": "785440"
  },
  {
    "text": "storage of exemplars and",
    "start": "785440",
    "end": "787040"
  },
  {
    "text": "and some really cool use cases around",
    "start": "787040",
    "end": "788720"
  },
  {
    "text": "that callum assures me this is going to",
    "start": "788720",
    "end": "790880"
  },
  {
    "text": "be merged by the time you uh you're",
    "start": "790880",
    "end": "792480"
  },
  {
    "text": "listening to this talk",
    "start": "792480",
    "end": "793760"
  },
  {
    "text": "and and we really hope that this is",
    "start": "793760",
    "end": "795040"
  },
  {
    "text": "going to be in the next major release of",
    "start": "795040",
    "end": "798839"
  },
  {
    "text": "prometheus",
    "start": "798839",
    "end": "800320"
  },
  {
    "start": "800000",
    "end": "1254000"
  },
  {
    "text": "so finally what's next what are the kind",
    "start": "800320",
    "end": "803600"
  },
  {
    "text": "of more long-term things we want to do",
    "start": "803600",
    "end": "805360"
  },
  {
    "text": "with uh with remote right",
    "start": "805360",
    "end": "807760"
  },
  {
    "text": "first thing i want to talk about is",
    "start": "807760",
    "end": "809120"
  },
  {
    "text": "atomicity so prometheus has this really",
    "start": "809120",
    "end": "811600"
  },
  {
    "text": "cool guarantee that",
    "start": "811600",
    "end": "813120"
  },
  {
    "text": "um sorry before i go into the guarantee",
    "start": "813120",
    "end": "815839"
  },
  {
    "text": "a lot of you will know that prometheus",
    "start": "815839",
    "end": "818079"
  },
  {
    "text": "metrics are normally you know sometimes",
    "start": "818079",
    "end": "820240"
  },
  {
    "text": "composite and actually made up of",
    "start": "820240",
    "end": "821600"
  },
  {
    "text": "multiple time series",
    "start": "821600",
    "end": "822880"
  },
  {
    "text": "you know the example here being a",
    "start": "822880",
    "end": "824240"
  },
  {
    "text": "histogram which is made up of uh",
    "start": "824240",
    "end": "826160"
  },
  {
    "text": "time series per bucket alongside a kind",
    "start": "826160",
    "end": "827920"
  },
  {
    "text": "of a count and a sum",
    "start": "827920",
    "end": "829839"
  },
  {
    "text": "time series um this is this is kind of",
    "start": "829839",
    "end": "832480"
  },
  {
    "text": "how we build up these histograms and how",
    "start": "832480",
    "end": "834240"
  },
  {
    "text": "we can tell",
    "start": "834240",
    "end": "835120"
  },
  {
    "text": "latencies in your application and so",
    "start": "835120",
    "end": "837040"
  },
  {
    "text": "it's really important that",
    "start": "837040",
    "end": "838959"
  },
  {
    "text": "when you run a query you only see a",
    "start": "838959",
    "end": "841040"
  },
  {
    "text": "complete scrape",
    "start": "841040",
    "end": "842000"
  },
  {
    "text": "you see a consistent snapshot of a",
    "start": "842000",
    "end": "843760"
  },
  {
    "text": "scrape you don't you don't see kind of",
    "start": "843760",
    "end": "845519"
  },
  {
    "text": "partial data or",
    "start": "845519",
    "end": "846720"
  },
  {
    "text": "half updates from one scrape and half",
    "start": "846720",
    "end": "848480"
  },
  {
    "text": "updates from another scrape",
    "start": "848480",
    "end": "850560"
  },
  {
    "text": "um prometheus offers this right it's",
    "start": "850560",
    "end": "853680"
  },
  {
    "text": "it's quite a cool feature of tsdb and",
    "start": "853680",
    "end": "855519"
  },
  {
    "text": "it's uh it's",
    "start": "855519",
    "end": "856399"
  },
  {
    "text": "it's really uh really useful remote",
    "start": "856399",
    "end": "859040"
  },
  {
    "text": "right unfortunately doesn't do this",
    "start": "859040",
    "end": "860560"
  },
  {
    "text": "actually",
    "start": "860560",
    "end": "861040"
  },
  {
    "text": "prevents systems from from offering this",
    "start": "861040",
    "end": "862959"
  },
  {
    "text": "guarantee because of the way the remote",
    "start": "862959",
    "end": "864800"
  },
  {
    "text": "right",
    "start": "864800",
    "end": "865279"
  },
  {
    "text": "uh the remote right client inside",
    "start": "865279",
    "end": "867440"
  },
  {
    "text": "prometheus",
    "start": "867440",
    "end": "868480"
  },
  {
    "text": "um splits up uh batches of requests to",
    "start": "868480",
    "end": "871440"
  },
  {
    "text": "send them in parallel",
    "start": "871440",
    "end": "872639"
  },
  {
    "text": "right so this means that you you know",
    "start": "872639",
    "end": "874639"
  },
  {
    "text": "remote right systems might actually get",
    "start": "874639",
    "end": "877199"
  },
  {
    "text": "um metrics or samples for different",
    "start": "877199",
    "end": "879519"
  },
  {
    "text": "series within a histogram in in a",
    "start": "879519",
    "end": "881600"
  },
  {
    "text": "different order",
    "start": "881600",
    "end": "882399"
  },
  {
    "text": "right and we'll actually see these",
    "start": "882399",
    "end": "883680"
  },
  {
    "text": "partial states this means they don't",
    "start": "883680",
    "end": "886000"
  },
  {
    "text": "have the opportunity to implement this",
    "start": "886000",
    "end": "888160"
  },
  {
    "text": "um which we we think kind of sucks right",
    "start": "888160",
    "end": "890399"
  },
  {
    "text": "so we want to fix this we we haven't",
    "start": "890399",
    "end": "892320"
  },
  {
    "text": "decided yet",
    "start": "892320",
    "end": "893199"
  },
  {
    "text": "how we're going to fix this you know one",
    "start": "893199",
    "end": "895120"
  },
  {
    "text": "of the thoughts is that we're going to",
    "start": "895120",
    "end": "897040"
  },
  {
    "text": "make sure that this scrape the entire",
    "start": "897040",
    "end": "898800"
  },
  {
    "text": "batch of samples",
    "start": "898800",
    "end": "900240"
  },
  {
    "text": "that are gathered in a single scrape are",
    "start": "900240",
    "end": "902480"
  },
  {
    "text": "written to the right head log in a",
    "start": "902480",
    "end": "904160"
  },
  {
    "text": "single batch which is kind of already",
    "start": "904160",
    "end": "905920"
  },
  {
    "text": "the case",
    "start": "905920",
    "end": "906959"
  },
  {
    "text": "but then the the the remote right system",
    "start": "906959",
    "end": "909839"
  },
  {
    "text": "reads that entire batch in",
    "start": "909839",
    "end": "911680"
  },
  {
    "text": "a single um in a single kind of scrape",
    "start": "911680",
    "end": "914800"
  },
  {
    "text": "in a single read of the writehead log",
    "start": "914800",
    "end": "917680"
  },
  {
    "text": "and",
    "start": "917680",
    "end": "917920"
  },
  {
    "text": "sends it out to the remote system in a",
    "start": "917920",
    "end": "919760"
  },
  {
    "text": "single batch as well",
    "start": "919760",
    "end": "921360"
  },
  {
    "text": "and so kind of aligning this throughout",
    "start": "921360",
    "end": "923120"
  },
  {
    "text": "the entire pipeline will",
    "start": "923120",
    "end": "924959"
  },
  {
    "text": "will at least give the kind of uh the",
    "start": "924959",
    "end": "927600"
  },
  {
    "text": "systems at the other end of the remote",
    "start": "927600",
    "end": "928959"
  },
  {
    "text": "right will give them the opportunity",
    "start": "928959",
    "end": "931279"
  },
  {
    "text": "to uh to offer atomicity",
    "start": "931279",
    "end": "934399"
  },
  {
    "text": "um another thing we're working on",
    "start": "934399",
    "end": "936000"
  },
  {
    "text": "solving is kind of or improving at least",
    "start": "936000",
    "end": "937839"
  },
  {
    "text": "is that",
    "start": "937839",
    "end": "938480"
  },
  {
    "text": "the handling of four to nine so four to",
    "start": "938480",
    "end": "940800"
  },
  {
    "text": "nine is the",
    "start": "940800",
    "end": "941519"
  },
  {
    "text": "is the status code that remote systems",
    "start": "941519",
    "end": "943279"
  },
  {
    "text": "will send when prometheus is sending",
    "start": "943279",
    "end": "945360"
  },
  {
    "text": "samples to them too quickly it's 429 is",
    "start": "945360",
    "end": "947600"
  },
  {
    "text": "kind of rate limit is a back off",
    "start": "947600",
    "end": "948959"
  },
  {
    "text": "right so prometheus is is designed to",
    "start": "948959",
    "end": "952480"
  },
  {
    "text": "back off and retry on 500s",
    "start": "952480",
    "end": "954639"
  },
  {
    "text": "now 500s indicate there was something",
    "start": "954639",
    "end": "956480"
  },
  {
    "text": "wrong with the system you know it's the",
    "start": "956480",
    "end": "958000"
  },
  {
    "text": "server's fault",
    "start": "958000",
    "end": "958959"
  },
  {
    "text": "we couldn't handle the request you know",
    "start": "958959",
    "end": "960880"
  },
  {
    "text": "please try again",
    "start": "960880",
    "end": "962079"
  },
  {
    "text": "um but but prometheus doesn't retry",
    "start": "962079",
    "end": "964720"
  },
  {
    "text": "400's right and it that's on purpose",
    "start": "964720",
    "end": "966320"
  },
  {
    "text": "because 400s indicate there's something",
    "start": "966320",
    "end": "967920"
  },
  {
    "text": "wrong with the request",
    "start": "967920",
    "end": "969120"
  },
  {
    "text": "right and that request will not succeed",
    "start": "969120",
    "end": "971199"
  },
  {
    "text": "if you try it again",
    "start": "971199",
    "end": "972399"
  },
  {
    "text": "in particular like 400 might be an",
    "start": "972399",
    "end": "974079"
  },
  {
    "text": "invalid request like it's just gibberish",
    "start": "974079",
    "end": "975519"
  },
  {
    "text": "like please don't send me gibberish",
    "start": "975519",
    "end": "977279"
  },
  {
    "text": "you know it might be that the you know",
    "start": "977279",
    "end": "979600"
  },
  {
    "text": "you've hit some limits on the",
    "start": "979600",
    "end": "981440"
  },
  {
    "text": "total number of series there's no point",
    "start": "981440",
    "end": "982880"
  },
  {
    "text": "in trying again because you've hit these",
    "start": "982880",
    "end": "984000"
  },
  {
    "text": "limits",
    "start": "984000",
    "end": "984639"
  },
  {
    "text": "and it's weird i think that 429 is a is",
    "start": "984639",
    "end": "987199"
  },
  {
    "text": "a",
    "start": "987199",
    "end": "988320"
  },
  {
    "text": "is a is a rate limit right because you",
    "start": "988320",
    "end": "990720"
  },
  {
    "text": "know actually if you back off and retry",
    "start": "990720",
    "end": "992399"
  },
  {
    "text": "the 429",
    "start": "992399",
    "end": "993360"
  },
  {
    "text": "uh the request that received a 429",
    "start": "993360",
    "end": "994959"
  },
  {
    "text": "response might actually succeed",
    "start": "994959",
    "end": "996720"
  },
  {
    "text": "either way what happens is you know we",
    "start": "996720",
    "end": "998720"
  },
  {
    "text": "talked about how prometheus",
    "start": "998720",
    "end": "999920"
  },
  {
    "text": "is uh collecting data from your",
    "start": "999920",
    "end": "1001759"
  },
  {
    "text": "applications and writing them to a write",
    "start": "1001759",
    "end": "1003519"
  },
  {
    "text": "head log and then",
    "start": "1003519",
    "end": "1004560"
  },
  {
    "text": "reading that right head log and sending",
    "start": "1004560",
    "end": "1006320"
  },
  {
    "text": "it to a remote system",
    "start": "1006320",
    "end": "1007839"
  },
  {
    "text": "and if that if that if there's a network",
    "start": "1007839",
    "end": "1009839"
  },
  {
    "text": "outage or a heaven forbid an outage on",
    "start": "1009839",
    "end": "1011600"
  },
  {
    "text": "the remote system",
    "start": "1011600",
    "end": "1012880"
  },
  {
    "text": "um then that will start to buffer up on",
    "start": "1012880",
    "end": "1014720"
  },
  {
    "text": "disk right and these samples will buff",
    "start": "1014720",
    "end": "1016800"
  },
  {
    "text": "on disk",
    "start": "1016800",
    "end": "1018000"
  },
  {
    "text": "and prometheus will basically wait you",
    "start": "1018000",
    "end": "1020079"
  },
  {
    "text": "know periodically retrying",
    "start": "1020079",
    "end": "1021759"
  },
  {
    "text": "but wait for um wait for the system to",
    "start": "1021759",
    "end": "1024240"
  },
  {
    "text": "come back up",
    "start": "1024240",
    "end": "1025360"
  },
  {
    "text": "and then after that outage prometheus",
    "start": "1025360",
    "end": "1027038"
  },
  {
    "text": "will try and replay that right head log",
    "start": "1027039",
    "end": "1028959"
  },
  {
    "text": "to the remote system to fill in any gaps",
    "start": "1028959",
    "end": "1032079"
  },
  {
    "text": "you know prometheus will replay as",
    "start": "1032079",
    "end": "1033678"
  },
  {
    "text": "quickly as it can and it can replay",
    "start": "1033679",
    "end": "1035600"
  },
  {
    "text": "pretty quickly",
    "start": "1035600",
    "end": "1036558"
  },
  {
    "text": "so it replays many many many samples and",
    "start": "1036559",
    "end": "1038720"
  },
  {
    "text": "that upstream system",
    "start": "1038720",
    "end": "1040240"
  },
  {
    "text": "sent a 429 saying you're replaying too",
    "start": "1040240",
    "end": "1041918"
  },
  {
    "text": "quickly at that point",
    "start": "1041919",
    "end": "1044160"
  },
  {
    "text": "prometheus will basically just uh drop",
    "start": "1044160",
    "end": "1046558"
  },
  {
    "text": "the data",
    "start": "1046559",
    "end": "1047678"
  },
  {
    "text": "so after after doing all this really",
    "start": "1047679",
    "end": "1049440"
  },
  {
    "text": "hard work to",
    "start": "1049440",
    "end": "1051039"
  },
  {
    "text": "to batch up the you know to buffer up",
    "start": "1051039",
    "end": "1052799"
  },
  {
    "text": "the data on disk and and make sure it's",
    "start": "1052799",
    "end": "1054640"
  },
  {
    "text": "there for",
    "start": "1054640",
    "end": "1055200"
  },
  {
    "text": "you know during the period of the outage",
    "start": "1055200",
    "end": "1057360"
  },
  {
    "text": "when the system comes back",
    "start": "1057360",
    "end": "1058640"
  },
  {
    "text": "we replay 429 and drop the data and it's",
    "start": "1058640",
    "end": "1060960"
  },
  {
    "text": "a real shame we do this so",
    "start": "1060960",
    "end": "1062640"
  },
  {
    "text": "we think we can improve this by backing",
    "start": "1062640",
    "end": "1065840"
  },
  {
    "text": "off on four two nines and",
    "start": "1065840",
    "end": "1067520"
  },
  {
    "text": "and knowing when to kind of balance um",
    "start": "1067520",
    "end": "1070799"
  },
  {
    "text": "you know catching up against kind of",
    "start": "1070799",
    "end": "1072960"
  },
  {
    "text": "falling behind because",
    "start": "1072960",
    "end": "1074640"
  },
  {
    "text": "you know you never want a system to kind",
    "start": "1074640",
    "end": "1076320"
  },
  {
    "text": "of get behind and stay behind so finally",
    "start": "1076320",
    "end": "1080640"
  },
  {
    "text": "and another area we're actively looking",
    "start": "1080640",
    "end": "1082640"
  },
  {
    "text": "in",
    "start": "1082640",
    "end": "1082880"
  },
  {
    "text": "uh and investigating and looking at",
    "start": "1082880",
    "end": "1084880"
  },
  {
    "text": "improvements for the remote write system",
    "start": "1084880",
    "end": "1086960"
  },
  {
    "text": "is its bandwidth usage you know i i",
    "start": "1086960",
    "end": "1089360"
  },
  {
    "text": "perhaps touched on a bit earlier how we",
    "start": "1089360",
    "end": "1091039"
  },
  {
    "text": "designed the system to be pretty",
    "start": "1091039",
    "end": "1093200"
  },
  {
    "text": "pretty simple pretty stateless right and",
    "start": "1093200",
    "end": "1095200"
  },
  {
    "text": "this is a key principle that",
    "start": "1095200",
    "end": "1096720"
  },
  {
    "text": "i think has really made the protocol",
    "start": "1096720",
    "end": "1098799"
  },
  {
    "text": "easy to implement",
    "start": "1098799",
    "end": "1100080"
  },
  {
    "text": "right there are no interdependencies",
    "start": "1100080",
    "end": "1101919"
  },
  {
    "text": "between messages in the protocol",
    "start": "1101919",
    "end": "1104480"
  },
  {
    "text": "and this simply just drastically",
    "start": "1104480",
    "end": "1106080"
  },
  {
    "text": "simplifies downstream implementations",
    "start": "1106080",
    "end": "1108320"
  },
  {
    "text": "it makes things like cortex easy to",
    "start": "1108320",
    "end": "1110080"
  },
  {
    "text": "write it makes the",
    "start": "1110080",
    "end": "1111520"
  },
  {
    "text": "um the adapters between prometheus",
    "start": "1111520",
    "end": "1114960"
  },
  {
    "text": "and graphite and prometheus and influx",
    "start": "1114960",
    "end": "1117120"
  },
  {
    "text": "it makes those adapters simple to write",
    "start": "1117120",
    "end": "1119600"
  },
  {
    "text": "and i think this has been pretty",
    "start": "1119600",
    "end": "1120559"
  },
  {
    "text": "successful um you know we've seen as i",
    "start": "1120559",
    "end": "1122720"
  },
  {
    "text": "said 30 different",
    "start": "1122720",
    "end": "1123919"
  },
  {
    "text": "uh implementations of remote right and i",
    "start": "1123919",
    "end": "1126559"
  },
  {
    "text": "think one of those",
    "start": "1126559",
    "end": "1127679"
  },
  {
    "text": "one of the reasons this has been",
    "start": "1127679",
    "end": "1128880"
  },
  {
    "text": "successful is because it's a relatively",
    "start": "1128880",
    "end": "1130640"
  },
  {
    "text": "simple process",
    "start": "1130640",
    "end": "1131520"
  },
  {
    "text": "protocol however",
    "start": "1131520",
    "end": "1134880"
  },
  {
    "text": "this comes with downsides right it's",
    "start": "1134880",
    "end": "1136720"
  },
  {
    "text": "expensive right the",
    "start": "1136720",
    "end": "1138160"
  },
  {
    "text": "the fact that the batches are stateless",
    "start": "1138160",
    "end": "1140320"
  },
  {
    "text": "means that they have to repeat labels",
    "start": "1140320",
    "end": "1142000"
  },
  {
    "text": "many many times you know the same label",
    "start": "1142000",
    "end": "1143840"
  },
  {
    "text": "was",
    "start": "1143840",
    "end": "1144240"
  },
  {
    "text": "sent in most batches and this really",
    "start": "1144240",
    "end": "1146640"
  },
  {
    "text": "eats bandwidth you know we used between",
    "start": "1146640",
    "end": "1148400"
  },
  {
    "text": "10 and 20",
    "start": "1148400",
    "end": "1149440"
  },
  {
    "text": "bytes per sample to send via remote",
    "start": "1149440",
    "end": "1152240"
  },
  {
    "text": "right and",
    "start": "1152240",
    "end": "1153120"
  },
  {
    "text": "prometheus only uses one or two bytes",
    "start": "1153120",
    "end": "1156160"
  },
  {
    "text": "per sample on local disks so you can see",
    "start": "1156160",
    "end": "1158559"
  },
  {
    "text": "there's a big",
    "start": "1158559",
    "end": "1159200"
  },
  {
    "text": "big room for for improvement here",
    "start": "1159200",
    "end": "1162240"
  },
  {
    "text": "and our internal monitoring at grafana",
    "start": "1162240",
    "end": "1164080"
  },
  {
    "text": "labs um just to propagate samples",
    "start": "1164080",
    "end": "1166400"
  },
  {
    "text": "between our internal prometheus nodes",
    "start": "1166400",
    "end": "1168240"
  },
  {
    "text": "and",
    "start": "1168240",
    "end": "1168480"
  },
  {
    "text": "and our internal cortex cluster we're",
    "start": "1168480",
    "end": "1170880"
  },
  {
    "text": "doing over",
    "start": "1170880",
    "end": "1171520"
  },
  {
    "text": "over 90 megabytes a second of remote",
    "start": "1171520",
    "end": "1174000"
  },
  {
    "text": "right",
    "start": "1174000",
    "end": "1174799"
  },
  {
    "text": "so there's there's probably a 10x gain",
    "start": "1174799",
    "end": "1176559"
  },
  {
    "text": "here and there's various ideas we think",
    "start": "1176559",
    "end": "1179200"
  },
  {
    "text": "a lot of the work we're going to do on",
    "start": "1179200",
    "end": "1180559"
  },
  {
    "text": "atomicity and and batching and you know",
    "start": "1180559",
    "end": "1182720"
  },
  {
    "text": "building these consistent batches",
    "start": "1182720",
    "end": "1184400"
  },
  {
    "text": "will allow us to have a kind of symbol",
    "start": "1184400",
    "end": "1186160"
  },
  {
    "text": "table in the in the remote right",
    "start": "1186160",
    "end": "1188960"
  },
  {
    "text": "um requests that that will probably",
    "start": "1188960",
    "end": "1192240"
  },
  {
    "text": "reduce reduce bandwidth usage quite a",
    "start": "1192240",
    "end": "1194320"
  },
  {
    "text": "lot",
    "start": "1194320",
    "end": "1196080"
  },
  {
    "text": "and that's it really you know we've",
    "start": "1196080",
    "end": "1197840"
  },
  {
    "text": "covered kind of what is remote right",
    "start": "1197840",
    "end": "1199360"
  },
  {
    "text": "what's the history",
    "start": "1199360",
    "end": "1200400"
  },
  {
    "text": "why does it exist how did it start um",
    "start": "1200400",
    "end": "1203440"
  },
  {
    "text": "we've covered our efforts over the last",
    "start": "1203440",
    "end": "1205200"
  },
  {
    "text": "couple of months to standardize remote",
    "start": "1205200",
    "end": "1207039"
  },
  {
    "text": "right to",
    "start": "1207039",
    "end": "1207679"
  },
  {
    "text": "really document how it works why it",
    "start": "1207679",
    "end": "1209600"
  },
  {
    "text": "works that way and then",
    "start": "1209600",
    "end": "1210960"
  },
  {
    "text": "test implementations to make sure that",
    "start": "1210960",
    "end": "1213200"
  },
  {
    "text": "they work this the way they should",
    "start": "1213200",
    "end": "1216159"
  },
  {
    "text": "we talked about what's coming kind of",
    "start": "1216159",
    "end": "1217840"
  },
  {
    "text": "you know pretty soon hopefully in the",
    "start": "1217840",
    "end": "1219520"
  },
  {
    "text": "next release or two of prometheus we",
    "start": "1219520",
    "end": "1221280"
  },
  {
    "text": "should",
    "start": "1221280",
    "end": "1222000"
  },
  {
    "text": "uh improve the way we send metadata via",
    "start": "1222000",
    "end": "1224240"
  },
  {
    "text": "remote right and and start sending",
    "start": "1224240",
    "end": "1225679"
  },
  {
    "text": "exemplars",
    "start": "1225679",
    "end": "1226720"
  },
  {
    "text": "right and finally we've talked about",
    "start": "1226720",
    "end": "1229280"
  },
  {
    "text": "some of the ideas we have for the more",
    "start": "1229280",
    "end": "1231039"
  },
  {
    "text": "long-term future",
    "start": "1231039",
    "end": "1232240"
  },
  {
    "text": "how we want to make it uh remote right",
    "start": "1232240",
    "end": "1234159"
  },
  {
    "text": "atomic how we want to",
    "start": "1234159",
    "end": "1236400"
  },
  {
    "text": "uh deal with back off and retry on four",
    "start": "1236400",
    "end": "1238559"
  },
  {
    "text": "two nines and and how we want to reduce",
    "start": "1238559",
    "end": "1240559"
  },
  {
    "text": "the",
    "start": "1240559",
    "end": "1240880"
  },
  {
    "text": "bandwidth consumption of remote right",
    "start": "1240880",
    "end": "1244080"
  },
  {
    "text": "so i'm gonna i'm gonna hang around now",
    "start": "1244080",
    "end": "1245679"
  },
  {
    "text": "um take some live questions",
    "start": "1245679",
    "end": "1247679"
  },
  {
    "text": "if any of this was interesting please do",
    "start": "1247679",
    "end": "1249840"
  },
  {
    "text": "please do ask and",
    "start": "1249840",
    "end": "1250960"
  },
  {
    "text": "thank you very much for listening bye",
    "start": "1250960",
    "end": "1256720"
  }
]