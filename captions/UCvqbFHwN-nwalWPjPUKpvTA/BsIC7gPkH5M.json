[
  {
    "text": "so good morning everybody thank you for coming over here so quickly over the",
    "start": "140",
    "end": "5640"
  },
  {
    "text": "keynotes actually cut out for it ended so I wanted to welcome you to my",
    "start": "5640",
    "end": "13230"
  },
  {
    "text": "talk called machines can do the work automation and the kubernetes contributor experience now when I",
    "start": "13230",
    "end": "23490"
  },
  {
    "text": "practice this talk the first time I practiced it I ran 75 minutes second",
    "start": "23490",
    "end": "30720"
  },
  {
    "text": "time I ran 45 minutes so if I move quickly",
    "start": "30720",
    "end": "36329"
  },
  {
    "text": "I apologize I'll definitely try and leave time for questions at the end but also because I know I may not make it to",
    "start": "36329",
    "end": "43530"
  },
  {
    "text": "the end I wanted to take some time upfront and like even though I'm the one up here giving this talk my name is",
    "start": "43530",
    "end": "51840"
  },
  {
    "text": "Aaron Berger wathah why I co-founded sig testing I participated in a number of kubernetes releases i'm a member of the",
    "start": "51840",
    "end": "58829"
  },
  {
    "text": "kubernetes steering committee and i'm an active participant in the contributor experience but all these people up here",
    "start": "58829",
    "end": "65610"
  },
  {
    "text": "are responsible for contributing to or writing a lot of the infrastructure and tooling that i'm going to talk about",
    "start": "65610",
    "end": "71640"
  },
  {
    "text": "today and if you don't recognize their github avatars off the top of your head you know here the user names for you to",
    "start": "71640",
    "end": "79619"
  },
  {
    "text": "go stock them later oh I don't have these slides posted online right now because of course I",
    "start": "79619",
    "end": "86430"
  },
  {
    "text": "wanted to keep you all in suspense but I promise I will upload this as soon as I'm done with this talk so you can keep",
    "start": "86430",
    "end": "92189"
  },
  {
    "text": "this cheat sheet with you at all times to go thank these people for all of their hard work so I wanted to tell you",
    "start": "92189",
    "end": "98460"
  },
  {
    "text": "the story of kubernetes as a project and how sort of early on we decided that if",
    "start": "98460",
    "end": "105299"
  },
  {
    "text": "this was going to be a successful project we needed to go to where the developers are which is github and so we",
    "start": "105299",
    "end": "111090"
  },
  {
    "text": "figured that if we did things the github way we would succeed beyond our wildest",
    "start": "111090",
    "end": "116189"
  },
  {
    "text": "dreams and unfortunately this came true but we found that over time we've come",
    "start": "116189",
    "end": "125159"
  },
  {
    "text": "to to adapt to you know this this this is fine dog is basically our",
    "start": "125159",
    "end": "132599"
  },
  {
    "text": "our spirit animal in the testing world for kubernetes there's a lot of stuff",
    "start": "132599",
    "end": "138720"
  },
  {
    "text": "that goes on in the project but things are actually okay if we can figure out",
    "start": "138720",
    "end": "143760"
  },
  {
    "text": "the right problems to solve and deal with it figure out ways to get automation to help us do the boring work",
    "start": "143760",
    "end": "150000"
  },
  {
    "text": "and we can get to do the interesting work and the reason that things are fine today is because we live in this nice",
    "start": "150000",
    "end": "156150"
  },
  {
    "text": "tropical abyss of using a thing called prowl this is a diagram put together by",
    "start": "156150",
    "end": "161459"
  },
  {
    "text": "Ben the elder he posted on his blog back in December and I'm just showing it up",
    "start": "161459",
    "end": "167459"
  },
  {
    "text": "here real quickly not to walk you through it but to show you that this diagram exists if you would like",
    "start": "167459",
    "end": "173329"
  },
  {
    "text": "somebody to walk you through it I encourage you to check out sig testing but basically this is a bunch of little",
    "start": "173329",
    "end": "181019"
  },
  {
    "text": "micro services that help us sort of do testing in a more kubernetes native way so here's the logo for prowl prowl was",
    "start": "181019",
    "end": "189720"
  },
  {
    "text": "initially started by members of cig testing and the engineering productivity team on the kubernetes side of Google",
    "start": "189720",
    "end": "198230"
  },
  {
    "text": "but today it's actively used and contributed to by members of Sto jet",
    "start": "198230",
    "end": "204389"
  },
  {
    "text": "stack and OpenShift and the project has become significantly better for it",
    "start": "204389",
    "end": "211489"
  },
  {
    "text": "prowl is made up basically of a bunch of different plugins that allow it to",
    "start": "211799",
    "end": "219380"
  },
  {
    "text": "accomplish certain things in response to github events if this looks a lot like",
    "start": "219380",
    "end": "224940"
  },
  {
    "text": "robots as some of you might be familiar with that it's because it started before",
    "start": "224940",
    "end": "230190"
  },
  {
    "text": "Probot it's sort of considered to be prior art the main way of interacting",
    "start": "230190",
    "end": "237959"
  },
  {
    "text": "with prowl as an end user is via these slash commands and we have most of them",
    "start": "237959",
    "end": "246540"
  },
  {
    "text": "are updated on the fly and Prowse UI so you get to see which command corresponds",
    "start": "246540",
    "end": "251940"
  },
  {
    "text": "to which plug-in what it allows you to do and who gets to use it and if you want to find out more about exactly what",
    "start": "251940",
    "end": "259289"
  },
  {
    "text": "prowl is made of and how it works I encourage you to come to the sig testing deep dive Friday",
    "start": "259289",
    "end": "265639"
  },
  {
    "text": "at two o'clock so when I talk about machines doing the work what do I mean",
    "start": "265639",
    "end": "272750"
  },
  {
    "text": "by the work you know if you break it in town into four categories it's basically",
    "start": "272750",
    "end": "281349"
  },
  {
    "text": "you know implementing your typical PR workflow of testing pull requests making",
    "start": "281349",
    "end": "287840"
  },
  {
    "text": "sure they look good and then merging them it's helping out with issue triaging and pull request triage you",
    "start": "287840",
    "end": "293419"
  },
  {
    "text": "make sure that they you know they're categorized appropriately and they get to the right it's about making sure that",
    "start": "293419",
    "end": "301219"
  },
  {
    "text": "we can create and and configure and manage hundreds of jobs and it's about taking all of this data that we produce",
    "start": "301219",
    "end": "308029"
  },
  {
    "text": "and using it to gain insight into the health of the project so I wanted to",
    "start": "308029",
    "end": "314300"
  },
  {
    "text": "walk you through our pull request workflow sort of as the lens for the bulk of the automation and this looks",
    "start": "314300",
    "end": "320930"
  },
  {
    "text": "relatively non-controversial I think as with any large open-source project you",
    "start": "320930",
    "end": "326659"
  },
  {
    "text": "know people need to sign a CLA to make sure that their code gets contributed the pull request needs to pass all of",
    "start": "326659",
    "end": "332180"
  },
  {
    "text": "the tests it's got to be approved by human beings it's got to be mirja below there can't",
    "start": "332180",
    "end": "337610"
  },
  {
    "text": "be any merge conflicts and we've got to make sure that it passes tests right before we push the merge commit so when",
    "start": "337610",
    "end": "344960"
  },
  {
    "text": "it comes to signing the CLA there's really not much for me to say here other than the Linux Foundation provides an",
    "start": "344960",
    "end": "351680"
  },
  {
    "text": "awesome CLA bot and all we do is talk to it as like a web hook so as long as we",
    "start": "351680",
    "end": "359300"
  },
  {
    "text": "see a checkmark come back from that we're satisfied that every author of every commit in a given pull request to",
    "start": "359300",
    "end": "366169"
  },
  {
    "text": "sign the CLA and we can move on from that step so when it comes to running",
    "start": "366169",
    "end": "372529"
  },
  {
    "text": "tests it sure looks like there are a lot of tests here now when we started this",
    "start": "372529",
    "end": "377930"
  },
  {
    "text": "project off we knew it was a distributed system and so it was going to involve a lot of moving parts you know you just",
    "start": "377930",
    "end": "384439"
  },
  {
    "text": "saw Dan's keynote where he talked about continuous integration is is really super fundamentally important to the",
    "start": "384439",
    "end": "391490"
  },
  {
    "text": "cloud native way of doing things so you know we definitely wanted to test all of the things and so we got super",
    "start": "391490",
    "end": "398419"
  },
  {
    "text": "enthusiastic about making sure that we're not just testing individual components of",
    "start": "398419",
    "end": "403550"
  },
  {
    "text": "kubernetes in isolation we're not just writing unit tests we're not just writing integration tests we're writing end-to-end tests because this is a",
    "start": "403550",
    "end": "410569"
  },
  {
    "text": "distributed system so we're gonna stand up entire clusters we're gonna exercise",
    "start": "410569",
    "end": "416089"
  },
  {
    "text": "everything we're gonna not actually trust that anything works until we've tested the whole thing and and all the",
    "start": "416089",
    "end": "423770"
  },
  {
    "text": "way through the problem is pretty much everybody felt like they couldn't",
    "start": "423770",
    "end": "428899"
  },
  {
    "text": "confirm that their code was feature complete or that it logically worked until they did and and tests and the",
    "start": "428899",
    "end": "434869"
  },
  {
    "text": "problem with n n tests is at least back in the bad old days there's just thousands and thousands of lines of bash",
    "start": "434869",
    "end": "441830"
  },
  {
    "text": "everywhere there's bash used to stand up a cluster there was like a thousand line",
    "start": "441830",
    "end": "447499"
  },
  {
    "text": "bash file to define how to actually run a test job and worst of all all of this",
    "start": "447499",
    "end": "453649"
  },
  {
    "text": "stuff was configured with environment variables and so you could be something",
    "start": "453649",
    "end": "459110"
  },
  {
    "text": "like six layers deep of inclusion in bash scripts and you wouldn't know where I give an environment variable came from",
    "start": "459110",
    "end": "464870"
  },
  {
    "text": "you wouldn't know what an environment variable here did over there and because",
    "start": "464870",
    "end": "469879"
  },
  {
    "text": "it's bash I mean you can write unit tests for bash but it's by no means type",
    "start": "469879",
    "end": "476149"
  },
  {
    "text": "safe it's by no means refactor friendly and so it was kind of really painful to",
    "start": "476149",
    "end": "482629"
  },
  {
    "text": "manage this stuff further much like anybody else",
    "start": "482629",
    "end": "489199"
  },
  {
    "text": "the knowing laughs indicate you to have lived through Jenkins I don't have hard",
    "start": "489199",
    "end": "494869"
  },
  {
    "text": "numbers for you but I can tell you that early on we had somewhere between a hundred to a",
    "start": "494869",
    "end": "502399"
  },
  {
    "text": "hundred and fifty Jenkins nodes just for running builds and we were talking",
    "start": "502399",
    "end": "508099"
  },
  {
    "text": "directly to Jenkins and Jenkins doesn't take kindly to being talked to about",
    "start": "508099",
    "end": "513318"
  },
  {
    "text": "hundreds of pull requests a day or thousands of tests a day Jenkins job",
    "start": "513319",
    "end": "520008"
  },
  {
    "text": "configuration is really atrocious to manage we went through a period of time with Jenkins job builder where we define",
    "start": "520009",
    "end": "525860"
  },
  {
    "text": "jobs as yamo files that then got rendered to XML that we then used bash to diff to see if the XML",
    "start": "525860",
    "end": "532730"
  },
  {
    "text": "actually looked saying because of course we didn't have a linter for valid XML configurations until we loaded it into",
    "start": "532730",
    "end": "538370"
  },
  {
    "text": "Jenkins and it blew up and yeah so the the other thing I wanted to hit home",
    "start": "538370",
    "end": "544250"
  },
  {
    "text": "though was that this Jenkins instance that was responsible for driving most of the testing for the project was visible",
    "start": "544250",
    "end": "551480"
  },
  {
    "text": "primarily to people inside the walls of Google so if you were a contributor to the project who worked anywhere else you",
    "start": "551480",
    "end": "558500"
  },
  {
    "text": "would hear people talk about the blocking jobs or the Bill of blocking jobs or people who could click through",
    "start": "558500",
    "end": "564440"
  },
  {
    "text": "and see historical artifacts and results and of you know a large community of",
    "start": "564440",
    "end": "570199"
  },
  {
    "text": "people couldn't see this so over time we kind of got to do we really need to test",
    "start": "570199",
    "end": "576470"
  },
  {
    "text": "all the things isn't there some way we can like spend less energy running tests and so I wanted to take you briefly back",
    "start": "576470",
    "end": "583339"
  },
  {
    "text": "to around September of 2016 when instead",
    "start": "583339",
    "end": "588529"
  },
  {
    "text": "of that pull request shot I showed you earlier we were only running like six to seven tests for every pull request and",
    "start": "588529",
    "end": "594949"
  },
  {
    "text": "they were still you know does it run end to end on Google does the note look good and and you know we're doing smoke",
    "start": "594949",
    "end": "600860"
  },
  {
    "text": "testing like Dan said we're doing unit and integration testing that's great the",
    "start": "600860",
    "end": "606560"
  },
  {
    "text": "problem was your code wasn't allowed to merge until all of these other tests were passing on what we called periodic",
    "start": "606560",
    "end": "614360"
  },
  {
    "text": "or continuous and continuous or post submit blocking jobs",
    "start": "614360",
    "end": "620420"
  },
  {
    "text": "these were sets of jobs or tests that would run every hour every 15 minutes as",
    "start": "620420",
    "end": "627410"
  },
  {
    "text": "often as possible on the latest and greatest commits and if any of these were failing your code wouldn't be",
    "start": "627410",
    "end": "634069"
  },
  {
    "text": "allowed to merge and it got into this unfortunate situation where you can see",
    "start": "634069",
    "end": "640100"
  },
  {
    "text": "here like all these tests are passing but these tests are failing well that's",
    "start": "640100",
    "end": "645139"
  },
  {
    "text": "just the build cops problem that's not my problem as the pull request author it's somebody else's job to go chase",
    "start": "645139",
    "end": "651500"
  },
  {
    "text": "down why those you know 20 25 other jobs are failing and then to figure out who",
    "start": "651500",
    "end": "657620"
  },
  {
    "text": "to chase down to ask them very kindly to revert their code or troubleshoot why the test wasn't working and it",
    "start": "657620",
    "end": "664040"
  },
  {
    "text": "ultimately ended up in this really frustrating where I could check code in that would break the build and I would have no idea",
    "start": "664040",
    "end": "670620"
  },
  {
    "text": "that I had done it and nobody would really notice until the build cop got paged and came looking for you so fast",
    "start": "670620",
    "end": "678660"
  },
  {
    "text": "forward today to today where we're using prowl and Prowse kind of helped us get",
    "start": "678660",
    "end": "684390"
  },
  {
    "text": "out of this situation if nothing for nothing else than the fact that it's significantly better at running tests",
    "start": "684390",
    "end": "690540"
  },
  {
    "text": "concurrently and it's much easier to manage than Jenkins so we really are testing all the things so we're making",
    "start": "690540",
    "end": "697410"
  },
  {
    "text": "sure first and foremost that your code you know passes our coding conventions are you following the right API",
    "start": "697410",
    "end": "704580"
  },
  {
    "text": "conventions is it formatted cleanly things like that we're also making sure",
    "start": "704580",
    "end": "710040"
  },
  {
    "text": "that it builds and we're doing a quick type check to make sure that it kind of",
    "start": "710040",
    "end": "715800"
  },
  {
    "text": "pseudo compiles across all different architectures that we support so most of",
    "start": "715800",
    "end": "721080"
  },
  {
    "text": "our testing is done for the linux amd64 architecture you know we also release",
    "start": "721080",
    "end": "727530"
  },
  {
    "text": "artifacts for things like arm and we want to make sure we're not breaking those builds unbeknownst to us then you",
    "start": "727530",
    "end": "735840"
  },
  {
    "text": "know you've got your pretty standard we want to make sure it passes unit and integration tests we want to make sure that it passes end-to-end tests on two",
    "start": "735840",
    "end": "743100"
  },
  {
    "text": "different cloud platforms so if it doesn't work in either Google or AWS",
    "start": "743100",
    "end": "748350"
  },
  {
    "text": "we want to prevent this code from merging we want to make sure that we can sort of do specific end-to-end tests",
    "start": "748350",
    "end": "756390"
  },
  {
    "text": "just on the note level because a cluster is a distributed system and it could fail for a variety of reasons we really",
    "start": "756390",
    "end": "762390"
  },
  {
    "text": "want to look at specific things like does the container runtime interface work well for this engine versus this",
    "start": "762390",
    "end": "768390"
  },
  {
    "text": "other engine and then of course we also want to make sure that we can we can",
    "start": "768390",
    "end": "774960"
  },
  {
    "text": "stick within the realm of our performance boundaries by using simulated performance tests called cube",
    "start": "774960",
    "end": "781170"
  },
  {
    "text": "mark stands up like a real kubernetes cluster but with fake nodes so we can pretend like we're scheduling to a",
    "start": "781170",
    "end": "787500"
  },
  {
    "text": "hundred node or 500 node cluster without expending all of those resources and",
    "start": "787500",
    "end": "792800"
  },
  {
    "text": "then finally we also allow the ability to run optional tests for every pull",
    "start": "792800",
    "end": "798240"
  },
  {
    "text": "request but these don't necessarily prevent it from merging usually these are tests that get skipped because they",
    "start": "798240",
    "end": "803790"
  },
  {
    "text": "don't have to run on every poll request the only run of certain lines of code or certain files have changed or it could",
    "start": "803790",
    "end": "810269"
  },
  {
    "text": "be because we're trying them out as non-blocking builds right now to maybe",
    "start": "810269",
    "end": "815370"
  },
  {
    "text": "collect data to promote them to a block the build down the line so this is",
    "start": "815370",
    "end": "822180"
  },
  {
    "text": "roughly two years worth of data it starts when instead of using Jenkins as",
    "start": "822180",
    "end": "827699"
  },
  {
    "text": "an authoritative source for artifacts we started pushing all of our data to publicly accessible Google Google Cloud",
    "start": "827699",
    "end": "833819"
  },
  {
    "text": "Storage buckets and from there could scrape to",
    "start": "833819",
    "end": "839329"
  },
  {
    "text": "from there we could scrape the data into bigquery tables where I could start to",
    "start": "853090",
    "end": "859600"
  },
  {
    "text": "put together graphs like this for you so around October of 2016 we started",
    "start": "859600",
    "end": "867220"
  },
  {
    "text": "using prowl as the primary like front to kick-off jobs we initially had prowl",
    "start": "867220",
    "end": "873880"
  },
  {
    "text": "than talking to Jenkins but because prowl was the thing receiving these hundreds and thousands of requests we",
    "start": "873880",
    "end": "879550"
  },
  {
    "text": "could throttle and not kill our Jenkins so often soon we we started migrating",
    "start": "879550",
    "end": "885400"
  },
  {
    "text": "from running jobs on Jenkins to running jobs directly on kubernetes clusters as pods and eventually we got so confident",
    "start": "885400",
    "end": "894250"
  },
  {
    "text": "in the sheer number of pull request jobs that we were capable of running that we disabled the whole concept of blocking",
    "start": "894250",
    "end": "900820"
  },
  {
    "text": "jobs on head so if you were pull requests past its its pull request tests",
    "start": "900820",
    "end": "906640"
  },
  {
    "text": "that's the only thing it needed to do to merge and then six months after that we retired the build cop role because it",
    "start": "906640",
    "end": "912400"
  },
  {
    "text": "was just punishment and pain on whoever was unfortunate enough to come up in the rotation for that and people have been a",
    "start": "912400",
    "end": "920170"
  },
  {
    "text": "lot happier for it so when I say prowl has gotten has made things a lot better for us what do I mean by that you know fast forward to",
    "start": "920170",
    "end": "926350"
  },
  {
    "text": "today and over the past year from March 2017 to March 2018 we ran 4.3 million",
    "start": "926350",
    "end": "932680"
  },
  {
    "text": "jobs using prowl and these are jobs running entirely on a kubernetes cluster now there's no Jenkins involved this",
    "start": "932680",
    "end": "941260"
  },
  {
    "text": "graph here shows you that about 600,000 of those jobs were for pull requests the blue blue line is for kubernetes",
    "start": "941260",
    "end": "948400"
  },
  {
    "text": "kubernetes related jobs and the green line is for any other project that could be in the kubernetes or incubator or",
    "start": "948400",
    "end": "954550"
  },
  {
    "text": "kubernetes SIG's orgs or other projects such as cube flow you can see that the",
    "start": "954550",
    "end": "959890"
  },
  {
    "text": "other 3.7 million jobs were some of those continuously running after the fact jobs these are the sorts of",
    "start": "959890",
    "end": "966070"
  },
  {
    "text": "long-running performance tests or off-the-beaten-path feature tests that we want to make sure we can use to",
    "start": "966070",
    "end": "972040"
  },
  {
    "text": "verify a release of kubernetes before it goes out the door because you can see that over time we found that it's kind",
    "start": "972040",
    "end": "978490"
  },
  {
    "text": "of less useful from a signal perspective because more people are paying it",
    "start": "978490",
    "end": "983990"
  },
  {
    "text": "to their poll requests that are paying attention to these continuously running jobs you can also see just by the number",
    "start": "983990",
    "end": "992630"
  },
  {
    "text": "of unique jobs not necessarily the number of runs that have happened that many more projects beyond kubernetes",
    "start": "992630",
    "end": "998930"
  },
  {
    "text": "have started to use our infrastructure it's gotten to the point where our infrastructure is friendly enough and",
    "start": "998930",
    "end": "1004000"
  },
  {
    "text": "reusable enough that it works for projects beyond just kubernetes kubernetes so I know you know cops and",
    "start": "1004000",
    "end": "1010630"
  },
  {
    "text": "coop flow and the community repo all use this stuff today and you can see that's",
    "start": "1010630",
    "end": "1017770"
  },
  {
    "text": "not really the case for jobs that run after pull requests have been submitted because again we find that wow this is a",
    "start": "1017770",
    "end": "1024339"
  },
  {
    "text": "pattern that's useful for a project as large as kubernetes it's maybe not necessary for your project today so",
    "start": "1024339",
    "end": "1032438"
  },
  {
    "text": "that's a little bit about testing next let's talk about our code review",
    "start": "1032439",
    "end": "1037780"
  },
  {
    "text": "workflow so you know what is code review you want to make sure that you find",
    "start": "1037780",
    "end": "1044170"
  },
  {
    "text": "somebody to review UPR you got to make sure that you find the right person to find your Pete to review your PR but how",
    "start": "1044170",
    "end": "1050770"
  },
  {
    "text": "do you know who that right person is and then how do you notify them that they should take a look at your PR and then",
    "start": "1050770",
    "end": "1057460"
  },
  {
    "text": "how do you know that they're all of the right necessary people have taken a look at your PR and so things that we've",
    "start": "1057460",
    "end": "1063190"
  },
  {
    "text": "tried in the past is why don't you just open your PR and wait and see if company if somebody comes and reviews it that",
    "start": "1063190",
    "end": "1069700"
  },
  {
    "text": "doesn't work on a project that the size of kubernetes there are just too many people and the codebase is too large let's try using github notifications",
    "start": "1069700",
    "end": "1076960"
  },
  {
    "text": "you've you've figured out the person who's most responsible for this area of code why don't you add them that doesn't",
    "start": "1076960",
    "end": "1083020"
  },
  {
    "text": "work because github notifications tend to just go into the void my notification",
    "start": "1083020",
    "end": "1088240"
  },
  {
    "text": "inbox collects about a hundred to three hundred notifications on a daily basis it's as good as useless for me we could",
    "start": "1088240",
    "end": "1096640"
  },
  {
    "text": "assign PRS to people to ask them to review it that way they could use a github issue query to figure out you",
    "start": "1096640",
    "end": "1102520"
  },
  {
    "text": "know all the things that are assigned to me but how do you know who to assign well maybe you could use github feature",
    "start": "1102520",
    "end": "1108370"
  },
  {
    "text": "of like the recommended who's committed to this recently you could stock them through commit logs or something or",
    "start": "1108370",
    "end": "1114040"
  },
  {
    "text": "maybe you could try using github zko donors feature where you can specify through regular expressions",
    "start": "1114040",
    "end": "1119150"
  },
  {
    "text": "you know like which files to use unfortunately github Skoda owners thing",
    "start": "1119150",
    "end": "1124760"
  },
  {
    "text": "if you if you lay out like say there's ten possible people who could know be",
    "start": "1124760",
    "end": "1131150"
  },
  {
    "text": "knowledgeable about code in the couplet subdirectory if you assign a review to",
    "start": "1131150",
    "end": "1136250"
  },
  {
    "text": "if you change a file in there and use github code owners feature it will assign to all ten of those people at",
    "start": "1136250",
    "end": "1142880"
  },
  {
    "text": "once it doesn't just randomly choose a subset further if you were to assign to github teams instead of individual",
    "start": "1142880",
    "end": "1148730"
  },
  {
    "text": "people that's great if you're a member of the org and know who is on that team so you know who to go bug but if you're",
    "start": "1148730",
    "end": "1154640"
  },
  {
    "text": "a new contributor you don't get any visibility into who's on a given team so you have no idea who to ask or talk to",
    "start": "1154640",
    "end": "1160760"
  },
  {
    "text": "next if you need some follow-up finally what if we just like use the fact that",
    "start": "1160760",
    "end": "1166760"
  },
  {
    "text": "somebody has write access to the repo to figure it to say that this is a person that you should pay attention to you",
    "start": "1166760",
    "end": "1172580"
  },
  {
    "text": "know do they have the commitment fliped can they manually set labels we found that none of these really helped us",
    "start": "1172580",
    "end": "1179060"
  },
  {
    "text": "scale as effectively as using owners files so here's an example of an owner's file at the very top of this directory",
    "start": "1179060",
    "end": "1185420"
  },
  {
    "text": "for the contributors guide in the community repo let's say I wanted to add something to any of these documents I",
    "start": "1185420",
    "end": "1191600"
  },
  {
    "text": "would open up a pull request and our our automation would look at the owners file",
    "start": "1191600",
    "end": "1197450"
  },
  {
    "text": "closest to the code that I am changing so in this case the owners file specifies two groups of reviewers there",
    "start": "1197450",
    "end": "1204650"
  },
  {
    "text": "are reviewers and approvers and then there are labels down here for triage so",
    "start": "1204650",
    "end": "1210140"
  },
  {
    "text": "reviewers are people who are looking at your code qualitatively is it written well you know is it checking for nil",
    "start": "1210140",
    "end": "1216050"
  },
  {
    "text": "does it catch all the corner cases I should know enough about go lying but I don't necessarily have to know about",
    "start": "1216050",
    "end": "1222200"
  },
  {
    "text": "every single internal of all parts of kubernetes to review an arbitrary pull request on the other hand if I'm an",
    "start": "1222200",
    "end": "1229610"
  },
  {
    "text": "approver I should know exactly how this area of code relates to the rest of the",
    "start": "1229610",
    "end": "1234770"
  },
  {
    "text": "project is it doing the right thing is it maintaining backwards compatibility is it forward-looking enough that sort",
    "start": "1234770",
    "end": "1240950"
  },
  {
    "text": "of thing and then finally you know we can use these labels for triage like I said you could use issue queries to look",
    "start": "1240950",
    "end": "1247280"
  },
  {
    "text": "for PRS assigned to you we could also have issue queries for PRS are assigned to a specific cig or a",
    "start": "1247280",
    "end": "1253259"
  },
  {
    "text": "specific area and so much like code",
    "start": "1253259",
    "end": "1258539"
  },
  {
    "text": "owner's files by github we can also do this by regular expression not just by hierarchy we can have so we can have",
    "start": "1258539",
    "end": "1268200"
  },
  {
    "text": "people signify whether or not they are they're good with the code by using some",
    "start": "1268200",
    "end": "1274320"
  },
  {
    "text": "of those slash commands that prow implements so /lg TM is what a reviewer would do and we allow anybody who is a",
    "start": "1274320",
    "end": "1281820"
  },
  {
    "text": "member of the kubernetes organization to /lg TM so while we request review from",
    "start": "1281820",
    "end": "1286889"
  },
  {
    "text": "the most knowledgeable people as spelled out in the owners files we want to grow our reviewer pool so anybody who is",
    "start": "1286889",
    "end": "1293639"
  },
  {
    "text": "knowledgeable enough about go could theoretically review any pull request however when it comes to somebody who",
    "start": "1293639",
    "end": "1299070"
  },
  {
    "text": "wants to holistically look at whether or not the PR is doing the right thing we want to make sure we get buy-in from all",
    "start": "1299070",
    "end": "1305309"
  },
  {
    "text": "the right approvers so approvers who are recommended have to say whether or not",
    "start": "1305309",
    "end": "1310499"
  },
  {
    "text": "it's good or not you can find out more at that link there so I talked about",
    "start": "1310499",
    "end": "1316169"
  },
  {
    "text": "applying late labels to pull requests you know here's one of my favorite pull",
    "start": "1316169",
    "end": "1321359"
  },
  {
    "text": "requests I managed to find this set of labels on it and I had no idea of what these labels meant for the longest time",
    "start": "1321359",
    "end": "1327059"
  },
  {
    "text": "I finally put together some documentation here but honestly my perspective on the label set like this",
    "start": "1327059",
    "end": "1332940"
  },
  {
    "text": "is that you really should like you only need the labels that you absolutely need",
    "start": "1332940",
    "end": "1338100"
  },
  {
    "text": "to survive and I've come to realize on the kubernetes project that like these are my industrial-strength github labels",
    "start": "1338100",
    "end": "1344369"
  },
  {
    "text": "and the project can't live without them right if you break it down here's the",
    "start": "1344369",
    "end": "1349859"
  },
  {
    "text": "description of the labels that sort of shows you know what are they what do they do what's the Proud plugin that handles",
    "start": "1349859",
    "end": "1355919"
  },
  {
    "text": "them and who can apply or use these labels so all the green labels are the",
    "start": "1355919",
    "end": "1361679"
  },
  {
    "text": "labels that need to show up on your pull request in order for it to be mirja pool you know have the reviewers looked at it",
    "start": "1361679",
    "end": "1367049"
  },
  {
    "text": "there's the URL GTM label how the approvers looked at it there's your approved label did you sign the CLA",
    "start": "1367049",
    "end": "1372269"
  },
  {
    "text": "great all of these labels are things that are applied for a triage purpose",
    "start": "1372269",
    "end": "1377700"
  },
  {
    "text": "you know is it a bug what kind of priority is this issue or pull requests what area does it apply to this helps",
    "start": "1377700",
    "end": "1383879"
  },
  {
    "text": "the right people find issues that they care about or are interested in more easily and further",
    "start": "1383879",
    "end": "1389370"
  },
  {
    "text": "well these are labels that you normally have to be like you have to have right access to a repo to apply labels through",
    "start": "1389370",
    "end": "1396690"
  },
  {
    "text": "prowl we've allowed anybody you don't even have to be a member of the organization to help sort of triage",
    "start": "1396690",
    "end": "1402570"
  },
  {
    "text": "these things more appropriately so anybody can apply a priority anybody can",
    "start": "1402570",
    "end": "1408180"
  },
  {
    "text": "you know apply an area or a cig to help us more effectively find things and further we can have automation to help",
    "start": "1408180",
    "end": "1414330"
  },
  {
    "text": "us out so prowl automatically labels pull requests by the number of lines of code that they change into t-shirt",
    "start": "1414330",
    "end": "1420570"
  },
  {
    "text": "sizing so that at a glimpse is a reviewer you can get a feel for how difficult this whole request is going to",
    "start": "1420570",
    "end": "1426240"
  },
  {
    "text": "be to review if you happen to have some spare time there's not much to say about",
    "start": "1426240",
    "end": "1431310"
  },
  {
    "text": "these labels other than to say that they sort of helped the kubernetes release team heard the the cats that are the",
    "start": "1431310",
    "end": "1440280"
  },
  {
    "text": "organized chaos of open-source into something resembling a top-down hierarchy and a consistent release",
    "start": "1440280",
    "end": "1446430"
  },
  {
    "text": "process because these labels are so important for us we want to make sure",
    "start": "1446430",
    "end": "1452250"
  },
  {
    "text": "that the same labels are present in every single repo in the kubernetes project so that's all sixty repos in the",
    "start": "1452250",
    "end": "1459450"
  },
  {
    "text": "kubernetes org all twenty repos and the kubernetes incubator org and the number of repos that are showing up in the",
    "start": "1459450",
    "end": "1465210"
  },
  {
    "text": "kubernetes SIG's org is something like eight today so we use a syncing tool that allows us to specify you know new",
    "start": "1465210",
    "end": "1472560"
  },
  {
    "text": "labels and what they should be to migrate old labels or rename old labels to new labels and to also deprecated",
    "start": "1472560",
    "end": "1479280"
  },
  {
    "text": "labels and delete them after some amount of time this is what's allowed us to migrate the kubernetes repo from two",
    "start": "1479280",
    "end": "1486630"
  },
  {
    "text": "hundred and twenty odd labels down to about a hundred and seventy labels today",
    "start": "1486630",
    "end": "1491870"
  },
  {
    "text": "labels are also great because they empower the community to you know write some of their own triage tools so here's",
    "start": "1491870",
    "end": "1498570"
  },
  {
    "text": "an example of an issue query that a community member dims often uses to find",
    "start": "1498570",
    "end": "1504780"
  },
  {
    "text": "first-time contributors who might want to be shepherded through pull requests if you're not a member of the project we",
    "start": "1504780",
    "end": "1510600"
  },
  {
    "text": "want to make sure that your pull request isn't turning kubernetes into a Bitcoin miner so we need a human to just take a",
    "start": "1510600",
    "end": "1517560"
  },
  {
    "text": "brief look at your poll requests and apply a slash okay to test command to it to remove that needs okay to test label so dims",
    "start": "1517560",
    "end": "1524950"
  },
  {
    "text": "mentioned he'd been using that query just on kind of a daily basis when he had time we wanted more people in the",
    "start": "1524950",
    "end": "1530320"
  },
  {
    "text": "community to use it so JC Mars bought a domain that just redirects to that query",
    "start": "1530320",
    "end": "1536139"
  },
  {
    "text": "and now anybody who wants to help out or identify first-time contributors to help Shepherd through the project can click",
    "start": "1536139",
    "end": "1541840"
  },
  {
    "text": "through that finally let's talk about the fact that we need to test your code",
    "start": "1541840",
    "end": "1547179"
  },
  {
    "text": "before we merge it in the game of CI CD",
    "start": "1547179",
    "end": "1553870"
  },
  {
    "text": "you always you have to always be merging right code is for closers so I mentioned",
    "start": "1553870",
    "end": "1562870"
  },
  {
    "text": "that everybody wants to test all the things and fully end-to-end distributed tests and over time you can see that the",
    "start": "1562870",
    "end": "1569769"
  },
  {
    "text": "the longest test that any given pull request has takes anywhere from 40 to 50",
    "start": "1569769",
    "end": "1574929"
  },
  {
    "text": "minutes but it's kind of trending up towards an hour and so if you assume that plus the fact that because we have",
    "start": "1574929",
    "end": "1581649"
  },
  {
    "text": "you know end end tests that are flaky and kind of depend upon the nature of distributed systems where nothing ever",
    "start": "1581649",
    "end": "1587470"
  },
  {
    "text": "works a hundred percent of the time and some things can be susceptible to environmental conditions like the relative humidity and the alignment of",
    "start": "1587470",
    "end": "1593889"
  },
  {
    "text": "the stars if your code is supposed to pass there's a 75% chance that it",
    "start": "1593889",
    "end": "1599679"
  },
  {
    "text": "actually will pass when we're having our worst times that what that roughly means",
    "start": "1599679",
    "end": "1606220"
  },
  {
    "text": "is if I must serially passed the pull request each and every pull request before I merge it that our ideal merge",
    "start": "1606220",
    "end": "1612429"
  },
  {
    "text": "velocity is somewhere around twenty to forty pull requests a day so how are we",
    "start": "1612429",
    "end": "1618129"
  },
  {
    "text": "actually doing compared to that theoretical ideal well if I go over to dev stats and take a look at the seven",
    "start": "1618129",
    "end": "1623440"
  },
  {
    "text": "day moving average of our pull request merged we're actually beating the ideal and if I get rid of the seven day moving",
    "start": "1623440",
    "end": "1629830"
  },
  {
    "text": "average and look at what we're actually doing at a day to day basis we're beating that ideal by a lot and the way",
    "start": "1629830",
    "end": "1635740"
  },
  {
    "text": "we're beating that ideal is we don't actually test a single pull request before merge when we're right at the",
    "start": "1635740",
    "end": "1643360"
  },
  {
    "text": "moment of merge you know when we're just sanity checking that even though the code has moved on since the pull request",
    "start": "1643360",
    "end": "1649330"
  },
  {
    "text": "was initially tested we take up to five pull requests at once",
    "start": "1649330",
    "end": "1654520"
  },
  {
    "text": "merge them all together and test them as a batch this way if it passes great we",
    "start": "1654520",
    "end": "1660310"
  },
  {
    "text": "can merge all five of them at once if it fails we're not going to know for sure which one of the five failed the test so",
    "start": "1660310",
    "end": "1668320"
  },
  {
    "text": "unfortunately we're gonna have to take a loss on that but by and large you can see that most of our pull requests are",
    "start": "1668320",
    "end": "1675310"
  },
  {
    "text": "now tested in batches in fact by relative amounts over 50% of our poll requests are tested in batch there's",
    "start": "1675310",
    "end": "1681760"
  },
  {
    "text": "literally no way our project could maintain the velocity it does if we didn't implement batch testing which we",
    "start": "1681760",
    "end": "1687700"
  },
  {
    "text": "did around November of 2017 as I recall",
    "start": "1687700",
    "end": "1692460"
  },
  {
    "text": "you know just as a sanity check is our infrastructure doing well this is mostly",
    "start": "1693750",
    "end": "1699340"
  },
  {
    "text": "a monday to friday project not too many people are contributing large amounts of code on the weekend so I would expect",
    "start": "1699340",
    "end": "1705760"
  },
  {
    "text": "the majority of our merges to be happening Monday to Friday assuming everything is going well with",
    "start": "1705760",
    "end": "1711460"
  },
  {
    "text": "their merge infrastructure and for the most part we are merging less and less",
    "start": "1711460",
    "end": "1716980"
  },
  {
    "text": "over the weekend those red spikes there one of those is the coop con dip and one",
    "start": "1716980",
    "end": "1723190"
  },
  {
    "text": "of those was after a code fall where we just like opened up the submit queue right before the weekend to let it drain",
    "start": "1723190",
    "end": "1731050"
  },
  {
    "text": "over the weekend so the other part of the work issued triage some of you",
    "start": "1731050",
    "end": "1738790"
  },
  {
    "text": "who've worked on the project may be familiar with fada bot faina BOTS actually doing stuff that humans could",
    "start": "1738790",
    "end": "1745330"
  },
  {
    "text": "100% do on their own fada BOTS issuing comments that's all",
    "start": "1745330",
    "end": "1750400"
  },
  {
    "text": "he's doing he's he's issuing a comment on issues or pull requests that haven't had any",
    "start": "1750400",
    "end": "1756070"
  },
  {
    "text": "activity by a human in 90 days and then if nobody does anything for another 30",
    "start": "1756070",
    "end": "1761800"
  },
  {
    "text": "days he applies another label and then if nobody does anything after another 30 days he closes the issue these are all",
    "start": "1761800",
    "end": "1769840"
  },
  {
    "text": "things that so the life cycle things anybody can do closing the issue any",
    "start": "1769840",
    "end": "1775240"
  },
  {
    "text": "member of the kubernetes org can do you can also as a human respond and say no",
    "start": "1775240",
    "end": "1781540"
  },
  {
    "text": "no wait I actually think this is a really important issue and should be considered for more than 120 days without any comment",
    "start": "1781540",
    "end": "1790179"
  },
  {
    "text": "so I can apply the frozen lifecycle label to it say you know the lifecycle of this issue should be frozen until the",
    "start": "1790179",
    "end": "1797409"
  },
  {
    "text": "heat death of the universe because I know it's important enough for somebody to come take a look at it as a result",
    "start": "1797409",
    "end": "1805210"
  },
  {
    "text": "the number of open issues on the kubernetes project at least in the kubernetes kubernetes repo has gone from",
    "start": "1805210",
    "end": "1811690"
  },
  {
    "text": "about 4,500 down to 2,500 and interestingly over the past couple of",
    "start": "1811690",
    "end": "1817450"
  },
  {
    "text": "weeks it's kind of hit this nice steady state where issues are getting open but",
    "start": "1817450",
    "end": "1822669"
  },
  {
    "text": "nobody's really paying attention to them so they end up aging out now I recognize this isn't ideal in an ideal world",
    "start": "1822669",
    "end": "1829360"
  },
  {
    "text": "people would come and take the most important issues and be working on them so this is kind of a problem of capacity",
    "start": "1829360",
    "end": "1835270"
  },
  {
    "text": "and one where we'd like to make the project easier to contribute to so that people are working on the most important",
    "start": "1835270",
    "end": "1840940"
  },
  {
    "text": "issues that we can work on right now this is the this is another graph from",
    "start": "1840940",
    "end": "1848590"
  },
  {
    "text": "dev stats that shows the number of times that people issued the slash lifecycle command probably to freeze an issue and",
    "start": "1848590",
    "end": "1855789"
  },
  {
    "text": "so this probably tells you when we turned on Veda bot and asked him to start commenting on issues that hadn't",
    "start": "1855789",
    "end": "1861610"
  },
  {
    "text": "had any activity it forced people to start doing planning down the line that they hadn't done up front this is the",
    "start": "1861610",
    "end": "1871480"
  },
  {
    "text": "prow job that does it and I'm only pointing this out just to show that it's just a simple label query it's something",
    "start": "1871480",
    "end": "1877000"
  },
  {
    "text": "we were you could do by hand but we have a bot to do this for us similarly we also offer the ability for",
    "start": "1877000",
    "end": "1883000"
  },
  {
    "text": "somebody to issue a slash retest command and any test that failed will automatically be retried and rerun this",
    "start": "1883000",
    "end": "1890289"
  },
  {
    "text": "was one of the most useful commands this is one of the most useful commands on",
    "start": "1890289",
    "end": "1895570"
  },
  {
    "text": "the project you can see its usage spiked hugely once we introduced it but the reason it's gone down since then is",
    "start": "1895570",
    "end": "1901360"
  },
  {
    "text": "because we have fada bot automatically issue this command to any pull request that's had an LG TM applied and it's",
    "start": "1901360",
    "end": "1907419"
  },
  {
    "text": "approved so it's good to go it just the tests are flaking for for whatever reason and so it'll come through and",
    "start": "1907419",
    "end": "1913539"
  },
  {
    "text": "automatically just apply the retest command until things actually work and it gets pushed through again it's just",
    "start": "1913539",
    "end": "1919390"
  },
  {
    "text": "yeah so as far as the rest of the work that I laid out I don't think I have any time",
    "start": "1919390",
    "end": "1926320"
  },
  {
    "text": "to get that that's okay this is fine because if you go to the cig testing deep dive on Friday at 2:00 o'clock",
    "start": "1926320",
    "end": "1933490"
  },
  {
    "text": "you'll get to hear a lot more about how we actually configure manage and run our jobs and how you can use this on your",
    "start": "1933490",
    "end": "1940389"
  },
  {
    "text": "project so thank you very much [Applause]",
    "start": "1940389",
    "end": "1948660"
  }
]