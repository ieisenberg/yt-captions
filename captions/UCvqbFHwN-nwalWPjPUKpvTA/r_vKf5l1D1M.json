[
  {
    "text": "hi everyone um so this is uh the top get ops for helm",
    "start": "2639",
    "end": "8880"
  },
  {
    "text": "users uh i am scott rigby i'm on the dev experience team at weedworks i'm",
    "start": "8880",
    "end": "14240"
  },
  {
    "text": "involved in various cncf things including co-chairing the get ops",
    "start": "14240",
    "end": "19840"
  },
  {
    "text": "working group uh i also co-maintain cncf projects um including helm",
    "start": "19840",
    "end": "26560"
  },
  {
    "text": "flux and open githubs so that's why i'm giving this talk on using flux to implement get outs for",
    "start": "26560",
    "end": "32640"
  },
  {
    "text": "home users today um here's my twitter twitter here's my twitter handle r6by",
    "start": "32640",
    "end": "40960"
  },
  {
    "text": "um i'm also scott on all of the slacks um and also scott rigble one word in",
    "start": "40960",
    "end": "48000"
  },
  {
    "text": "github so feel free to reach out to me in any ways about open source projects",
    "start": "48000",
    "end": "55199"
  },
  {
    "text": "um or other things related to cncf get ops flops or helm",
    "start": "55199",
    "end": "62079"
  },
  {
    "text": "so uh quickly what to expect i am going to clarify the intended audience",
    "start": "62079",
    "end": "67600"
  },
  {
    "text": "for this talk just so you know you're in the right place um i'm gonna level set um for everyone",
    "start": "67600",
    "end": "73600"
  },
  {
    "text": "by briefly introducing what helm githubs and flux are for newcomers um that'll be very short",
    "start": "73600",
    "end": "79280"
  },
  {
    "text": "then i will explain some of the benefits of flux specifically for home users",
    "start": "79280",
    "end": "86320"
  },
  {
    "text": "i'll give a few notes on comfort levels around migrating from the helm cli",
    "start": "86560",
    "end": "92240"
  },
  {
    "text": "whether in event driven ci or used manually",
    "start": "92240",
    "end": "97520"
  },
  {
    "text": "to get ops in continuous and progressive delivery um then finally we'll end with a demo",
    "start": "97520",
    "end": "104159"
  },
  {
    "text": "showing you how flux makes it really easy to do just that",
    "start": "104159",
    "end": "109438"
  },
  {
    "text": "so you may be using helm cli by hand",
    "start": "111119",
    "end": "116880"
  },
  {
    "text": "and or in ci automation you may be just getting started with",
    "start": "116880",
    "end": "122320"
  },
  {
    "text": "them however long you've been using helm whether for years in very complex or",
    "start": "122320",
    "end": "128319"
  },
  {
    "text": "simple situations or whether you just downloaded it today and started uh playing with the commands this talk is",
    "start": "128319",
    "end": "134480"
  },
  {
    "text": "definitely for you so i've met a lot of you over the years in the helm community",
    "start": "134480",
    "end": "140160"
  },
  {
    "text": "on the kubernetes helm and charts slack channels uh in weekly helm dev meetings",
    "start": "140160",
    "end": "146319"
  },
  {
    "text": "uh irl at conferences a lot of you um",
    "start": "146319",
    "end": "152319"
  },
  {
    "text": "uh and through github and uh in the twitter verse generally etc so",
    "start": "152319",
    "end": "158000"
  },
  {
    "text": "i'm really looking forward to following up on your questions after this talk with you um and i",
    "start": "158000",
    "end": "164319"
  },
  {
    "text": "meant what i said about reaching out on these topics so um",
    "start": "164319",
    "end": "171080"
  },
  {
    "text": "okay so the brief context for new users um you probably you're probably watching this because you have some interest or",
    "start": "172720",
    "end": "179680"
  },
  {
    "text": "at least curiosity uh in these topics but i'm not going to assume any specific knowledge about git ops or flux",
    "start": "179680",
    "end": "187040"
  },
  {
    "text": "um or or help in fact but that'll be the quickest one so we'll start with a short intro to all",
    "start": "187040",
    "end": "194000"
  },
  {
    "text": "of these to be welcoming to to all helm users and to level sets so everyone can follow along and then we'll get right",
    "start": "194000",
    "end": "200319"
  },
  {
    "text": "into um the meat of um",
    "start": "200319",
    "end": "205680"
  },
  {
    "text": "more season 10 users are looking for so uh what is helm it is a widely",
    "start": "205920",
    "end": "213120"
  },
  {
    "text": "adopted package manager for finding sharing and deploying apps on kubernetes",
    "start": "213120",
    "end": "218640"
  },
  {
    "text": "um in the context of helm you're going to hear terms like charts releases revisions",
    "start": "218640",
    "end": "226720"
  },
  {
    "text": "if you're not sure what those are here's a super quick intro so helm similar to apt or yum for linux",
    "start": "226720",
    "end": "235200"
  },
  {
    "text": "helm manages packages for kubernetes called charts charts are the actual packages that this",
    "start": "235200",
    "end": "241040"
  },
  {
    "text": "package manager for kubernetes manages so charts contain a set of related kubernetes resource",
    "start": "241040",
    "end": "247360"
  },
  {
    "text": "definitions for applications when uh so these application definitions",
    "start": "247360",
    "end": "253920"
  },
  {
    "text": "uh can be deployed to a cluster as a set along with uh user-specified configs things that",
    "start": "253920",
    "end": "260639"
  },
  {
    "text": "you specify um for how the application is supposed to behave in kubernetes or just behave on",
    "start": "260639",
    "end": "266320"
  },
  {
    "text": "its own so the deployed kubernetes objects and these those",
    "start": "266320",
    "end": "271919"
  },
  {
    "text": "uh user-defined configuration values together are called releases",
    "start": "271919",
    "end": "277360"
  },
  {
    "text": "releases also have revisions that that's important to know just because when we talk about rollbacks",
    "start": "277360",
    "end": "284639"
  },
  {
    "text": "users can roll back to previous revisions uh if needed for a reason so um",
    "start": "284639",
    "end": "290960"
  },
  {
    "text": "uh if you don't know you you probably do but but it's just important to say that helm charts uh",
    "start": "290960",
    "end": "297440"
  },
  {
    "text": "are when i say it's a widely adopted package manager it's very wildly popular and it's",
    "start": "297440",
    "end": "303039"
  },
  {
    "text": "a big way that um many people get introduced to kubernetes because it helps to simplify",
    "start": "303039",
    "end": "309680"
  },
  {
    "text": "um some of the complexity around kubernetes resources um and people are often",
    "start": "309680",
    "end": "316639"
  },
  {
    "text": "not only interested in infrastructure they're interested in what they can do with it and that usually includes apps so um",
    "start": "316639",
    "end": "323840"
  },
  {
    "text": "helm charts exists for most applications that can be run on kubernetes um there are nearly 7 000 of them uh 7000 charts",
    "start": "323840",
    "end": "330960"
  },
  {
    "text": "to choose from on the cncf artifact hub so go check that out that's at artifacthub.io",
    "start": "330960",
    "end": "338120"
  },
  {
    "text": "so uh in order to guide you through the benefits that flux brings to helm i'm",
    "start": "341360",
    "end": "346639"
  },
  {
    "text": "going to briefly note some things that are in and out of scope for helm by design",
    "start": "346639",
    "end": "351759"
  },
  {
    "text": "this is important to note so that you know which tool the select and why you would even need",
    "start": "351759",
    "end": "357440"
  },
  {
    "text": "something to extend so helm is a client and sdk only",
    "start": "357440",
    "end": "364160"
  },
  {
    "text": "that was by design for home free um which has been around for several years now",
    "start": "364160",
    "end": "371280"
  },
  {
    "text": "the current version of the only supported version of film so helm provides the",
    "start": "371360",
    "end": "377720"
  },
  {
    "text": "sli direct that sdk is meant to to provide the internal functionality of helm so that other tools extending it",
    "start": "387919",
    "end": "394639"
  },
  {
    "text": "don't have to be constricted by the limits of the cli um it's output exact uh it's specific output um",
    "start": "394639",
    "end": "401840"
  },
  {
    "text": "it's uh things that are that are that are meant to be used for cli only",
    "start": "401840",
    "end": "408800"
  },
  {
    "text": "those internal functions that powers the cli can then be mixed in",
    "start": "408800",
    "end": "414479"
  },
  {
    "text": "in other can be used in other ways so um here are some of the things that are",
    "start": "414479",
    "end": "420160"
  },
  {
    "text": "designed to be out of scope for help uh one of the big ones is crd upgrades um",
    "start": "420160",
    "end": "425280"
  },
  {
    "text": "this is a long asked for feature that is explicitly outside of the scope of helm there's a dedicated page to this uh in",
    "start": "425280",
    "end": "431520"
  },
  {
    "text": "the helm docs um it's not just because we don't want to do it it's because there are there are very good reasons",
    "start": "431520",
    "end": "438960"
  },
  {
    "text": "why you you wouldn't want this to be inside of this in the scope of a cli tool",
    "start": "438960",
    "end": "446960"
  },
  {
    "text": "um so please read that if you're interested i don't want to spend too much time on",
    "start": "446960",
    "end": "453120"
  },
  {
    "text": "that here but that is something that users of charts uh that that update crds care about",
    "start": "453120",
    "end": "458479"
  },
  {
    "text": "so uh what other things just brief briefly listed uh that are out of scope",
    "start": "458479",
    "end": "464000"
  },
  {
    "text": "you can read this on the slide but i'll just note them real quick managing or structuring multiple",
    "start": "464000",
    "end": "470080"
  },
  {
    "text": "environments so that's uh most people use scripting for that of some kind or some kind of",
    "start": "470080",
    "end": "476639"
  },
  {
    "text": "tool to help do that helm file has been a popular one over the years",
    "start": "476639",
    "end": "482160"
  },
  {
    "text": "and there are now others to do this including flux so uh any kind of control loop or retry",
    "start": "482160",
    "end": "488240"
  },
  {
    "text": "logic outside of just under the hood functionality for short uh for short uh",
    "start": "488240",
    "end": "493919"
  },
  {
    "text": "functional retries are outside of the scope of client because it is it is a cli um it's meant for attended",
    "start": "493919",
    "end": "500400"
  },
  {
    "text": "operations you can automate it and script it but you have to write logic around",
    "start": "500400",
    "end": "506960"
  },
  {
    "text": "the cli to catch any failures and retry if you need",
    "start": "506960",
    "end": "513518"
  },
  {
    "text": "that kind of functionality using the cli so or any other kind of controller",
    "start": "513519",
    "end": "520159"
  },
  {
    "text": "functionality has to come it has to be outside of that scope um",
    "start": "520159",
    "end": "525600"
  },
  {
    "text": "any kind of automated responses beyond beyond automated rollback which is an amazing feature of helm by the way",
    "start": "525600",
    "end": "531760"
  },
  {
    "text": "um automated drift detection this is definitely outside of the scope so um imperatively you can do this with the",
    "start": "531760",
    "end": "537839"
  },
  {
    "text": "helm diff plugin in some way and that is a wonderful tool um but",
    "start": "537839",
    "end": "544399"
  },
  {
    "text": "anything else around automated uh detection of differences as outside of the scope",
    "start": "544399",
    "end": "551680"
  },
  {
    "text": "so uh brief intro to gitops",
    "start": "551839",
    "end": "557279"
  },
  {
    "text": "um and then i'm gonna do a brief intro to flux and we'll give you the benefits and we'll give you the demo",
    "start": "557360",
    "end": "562399"
  },
  {
    "text": "um so get ops is a set of principles for operating and managing software systems these principles are derived from modern",
    "start": "562399",
    "end": "568560"
  },
  {
    "text": "software operations but they're also rooted in pre-existing and widely adopted best practices so this is not a",
    "start": "568560",
    "end": "574320"
  },
  {
    "text": "brand new thing uh at all it is just a a uh a current iteration of",
    "start": "574320",
    "end": "581360"
  },
  {
    "text": "of of knowledge that's been around for a long time just put together in a way that that is now",
    "start": "581360",
    "end": "587120"
  },
  {
    "text": "becoming very so the desired state of the github's",
    "start": "587120",
    "end": "592720"
  },
  {
    "text": "managed system must be declarative uh versioned and immutable",
    "start": "592720",
    "end": "598320"
  },
  {
    "text": "pulled automatically and continuously reconciled those are the four principles um so a quick note about what we mean by",
    "start": "598320",
    "end": "605680"
  },
  {
    "text": "declarative in principle one because you may not know this so uh declarative and imperative are",
    "start": "605680",
    "end": "610800"
  },
  {
    "text": "are generally um they're two different things so with",
    "start": "610800",
    "end": "616240"
  },
  {
    "text": "declarative management you declare the system that you you declare to the system",
    "start": "616240",
    "end": "622160"
  },
  {
    "text": "what you want the end state to look like so the system then works um to make this reality usually reports on the status",
    "start": "622160",
    "end": "630160"
  },
  {
    "text": "on the progress of making that happen it's making that declared state of reality in the end over time the the way the system makes",
    "start": "630160",
    "end": "638079"
  },
  {
    "text": "the declared state a reality can change without the need for you to declare the status of the progress to change in any",
    "start": "638079",
    "end": "644160"
  },
  {
    "text": "way so that is you say i want this and the system does that for you on your behalf",
    "start": "644160",
    "end": "650560"
  },
  {
    "text": "imperative management has to do with telling the system what to do stem so instead of declaring",
    "start": "650560",
    "end": "656800"
  },
  {
    "text": "what you want at the end you tell the system each step that you want to take to achieve that end goal",
    "start": "656800",
    "end": "663040"
  },
  {
    "text": "helm cli for example is a tool that's that offers imperative commands",
    "start": "663040",
    "end": "670399"
  },
  {
    "text": "just to put that in perspective so principle one is very similar so the gets principles in",
    "start": "671600",
    "end": "677200"
  },
  {
    "text": "short press one is very similar to infrastructure as code except that applies also to apps as well",
    "start": "677200",
    "end": "682959"
  },
  {
    "text": "as infrastructure principle two is where the get in get ops comes from um",
    "start": "682959",
    "end": "689519"
  },
  {
    "text": "although any system that fits the criteria defined by this principle can be used uh any other",
    "start": "689519",
    "end": "695440"
  },
  {
    "text": "version control or or any other um storage system that that that has that",
    "start": "695440",
    "end": "700640"
  },
  {
    "text": "that has these uh criteria principle three",
    "start": "700640",
    "end": "706000"
  },
  {
    "text": "um is what differentiates get ops from event-driven ci jobs triggered by changes in git",
    "start": "706000",
    "end": "711600"
  },
  {
    "text": "um here the desired state is pulled by the system whenever it's needed by the system",
    "start": "711600",
    "end": "716880"
  },
  {
    "text": "uh for any reason without the need to be triggered by some kind of action on the source repository or something like that",
    "start": "716880",
    "end": "724720"
  },
  {
    "text": "and principle four is where software agents are always assessing the actual system state and they're working to",
    "start": "724720",
    "end": "730720"
  },
  {
    "text": "bring it closer to your desired state that you declared in your version control so that's it that's uh notes i didn't",
    "start": "730720",
    "end": "736880"
  },
  {
    "text": "mention kubernetes at all uh the get ups principles are agnostic about your system but we're going to be",
    "start": "736880",
    "end": "742720"
  },
  {
    "text": "talking uh we're going to um be using this in the context the context of kubernetes uh to explain how git ops can",
    "start": "742720",
    "end": "750880"
  },
  {
    "text": "let you manage your home releases um excuse me how flux can help you manage",
    "start": "750880",
    "end": "756160"
  },
  {
    "text": "your home releases and githubs so uh so that's that's the brief venture",
    "start": "756160",
    "end": "761839"
  },
  {
    "text": "to get ups briefventure flux is this it's a cnci incubating project",
    "start": "761839",
    "end": "768560"
  },
  {
    "text": "um we call it the flux family of projects",
    "start": "768560",
    "end": "774639"
  },
  {
    "text": "because it's a set of continuous and progressive delivery solutions",
    "start": "774639",
    "end": "779839"
  },
  {
    "text": "from git to kubernetes uh this includes the flux cli",
    "start": "779839",
    "end": "785839"
  },
  {
    "text": "git ops toolkit which is a set of controllers and go packages that i'll show you a brief diagram of next",
    "start": "785839",
    "end": "791760"
  },
  {
    "text": "um and it includes flagger a progressive delivery tool that's",
    "start": "791760",
    "end": "797839"
  },
  {
    "text": "that's that can be used on its own at this point but it's also um built uh",
    "start": "797839",
    "end": "802880"
  },
  {
    "text": "heavily built with git ops in mind and built to to work with get ops",
    "start": "802880",
    "end": "808160"
  },
  {
    "text": "so remember those things i said that helm didn't do by design flux",
    "start": "808160",
    "end": "814399"
  },
  {
    "text": "picks up where that leads off so where helms the packaging and release tool",
    "start": "814399",
    "end": "819440"
  },
  {
    "text": "flux allows for collaborative declarative and automated management of complex environments",
    "start": "819440",
    "end": "825839"
  },
  {
    "text": "flux is some of the benefits are flux is the only cd tool uh continuous delivery tool",
    "start": "825839",
    "end": "833120"
  },
  {
    "text": "that i know of anyway uh that may change but um that purely uses helm's sdk",
    "start": "833120",
    "end": "838639"
  },
  {
    "text": "there's no shelling out to a binary and it also doesn't fork to it doesn't",
    "start": "838639",
    "end": "843760"
  },
  {
    "text": "fork helm in order to um do that either um",
    "start": "843760",
    "end": "849120"
  },
  {
    "text": "so uh this allows flux to be very flexible and powerful um to do uh",
    "start": "849120",
    "end": "857519"
  },
  {
    "text": "many things while maintaining a solid architecture and also a low memory footprint in your cluster",
    "start": "857519",
    "end": "863360"
  },
  {
    "text": "um and because we're big sdk users uh the helmets decay uh it means we contribute to helm upstream quite a bit",
    "start": "863360",
    "end": "870639"
  },
  {
    "text": "so everyone gets everyone gets the benefits not just flux",
    "start": "870639",
    "end": "876959"
  },
  {
    "text": "so you know benefits of open source um some of the other really important",
    "start": "876959",
    "end": "883120"
  },
  {
    "text": "things to note are uh flux's health controller manages crd upgrades so when i said",
    "start": "883120",
    "end": "889279"
  },
  {
    "text": "that was out of scope of hell for helm i focused on that because uh it's not out of the scope for the",
    "start": "889279",
    "end": "895600"
  },
  {
    "text": "flexsound controller and that is huge news so um while helm cli has an initial",
    "start": "895600",
    "end": "902160"
  },
  {
    "text": "installation support for sorry support for initial installation of crds",
    "start": "902160",
    "end": "907839"
  },
  {
    "text": "um that are required for the other resources um in your chart um it doesn't handle",
    "start": "907839",
    "end": "913199"
  },
  {
    "text": "upgrades um and that's as i said before by design so normally this is a manual step for",
    "start": "913199",
    "end": "920000"
  },
  {
    "text": "charts that install apps um which update their crds periodically",
    "start": "920000",
    "end": "926480"
  },
  {
    "text": "for example think cert manager and there are other charts that are widely that are very popular",
    "start": "926480",
    "end": "933120"
  },
  {
    "text": "this um so the helm controller allows you to do this out of the box in an unattended way",
    "start": "933120",
    "end": "939199"
  },
  {
    "text": "and it's got options to let you fine-tune um uh this automated process as you need uh",
    "start": "939199",
    "end": "945440"
  },
  {
    "text": "timeouts and other things so it's that's uh that's a huge benefit um the helm controller also includes a",
    "start": "945440",
    "end": "952959"
  },
  {
    "text": "depends on feature that allows you to manage uh a tree of",
    "start": "952959",
    "end": "958639"
  },
  {
    "text": "could be complex could be simple but a a tree of um chart dependencies without",
    "start": "958639",
    "end": "963839"
  },
  {
    "text": "having to make a large umbrella sharp which you which is one of the main",
    "start": "963839",
    "end": "968880"
  },
  {
    "text": "solutions um when you're doing this with the helm cli only",
    "start": "968880",
    "end": "974560"
  },
  {
    "text": "so this also saves a bit of memory because umbrella charts store all of that information in memory",
    "start": "974560",
    "end": "981120"
  },
  {
    "text": "in order to do what it does so um that's very very helpful",
    "start": "981120",
    "end": "986399"
  },
  {
    "text": "um it depends on feature um so flux also makes it easy to manage",
    "start": "986399",
    "end": "992160"
  },
  {
    "text": "multiple multiple environments for home um it's uh it's built on controller",
    "start": "992160",
    "end": "997360"
  },
  {
    "text": "runtime kubernetes support controller runtime so it includes control loop another retry logic out of the box um",
    "start": "997360",
    "end": "1004720"
  },
  {
    "text": "which can be extended as well um it gives feedback on how automating your home release",
    "start": "1004720",
    "end": "1010800"
  },
  {
    "text": "is going through the flex notification controller i'll show you in a second and it includes automated drift detection",
    "start": "1010800",
    "end": "1016240"
  },
  {
    "text": "that's one of its big features so uh when the resources in the cluster uh",
    "start": "1016240",
    "end": "1022079"
  },
  {
    "text": "that are defined by your chart uh diverge from your desired state that you specified in your chart and your configs",
    "start": "1022079",
    "end": "1028880"
  },
  {
    "text": "um it will notify you um on divergence or whenever anything was wrong",
    "start": "1028880",
    "end": "1034959"
  },
  {
    "text": "so that's a slightly detailed but introduction to flux in the helm controller",
    "start": "1034959",
    "end": "1042000"
  },
  {
    "text": "so uh here are some things that flux does in short i'm not going to go over them now um just uh please take a look",
    "start": "1042079",
    "end": "1049360"
  },
  {
    "text": "at the slide and these are also on the home page of the flux website flexcb.io just note things like flux",
    "start": "1049360",
    "end": "1056160"
  },
  {
    "text": "does uh support multi-tenancy at a multi-cluster",
    "start": "1056160",
    "end": "1061280"
  },
  {
    "text": "multiple git repos uh it integrates with with uh with with",
    "start": "1061280",
    "end": "1068000"
  },
  {
    "text": "existing tools with almost all popular um tools for for uh working with kubernetes",
    "start": "1068000",
    "end": "1075039"
  },
  {
    "text": "um and uh you know just just take a look at some",
    "start": "1075039",
    "end": "1080320"
  },
  {
    "text": "of these points and there's a lot of information about other reasons why flux is useful and that you may want it anyway",
    "start": "1080320",
    "end": "1086720"
  },
  {
    "text": "um on the flux website so in short floss is a set of specialized",
    "start": "1086720",
    "end": "1094080"
  },
  {
    "text": "controllers that rely on each other to do a specific job um here's just a very it's not an",
    "start": "1094080",
    "end": "1099440"
  },
  {
    "text": "architectural diagram but it's a it's a short it's a brief slide showing you what the different controllers do i'll",
    "start": "1099440",
    "end": "1104559"
  },
  {
    "text": "just list them real fast so the source controller um watches your defined sources where you specify your your",
    "start": "1104559",
    "end": "1110960"
  },
  {
    "text": "desired state um so when you put your home charts in git and your other yaml",
    "start": "1110960",
    "end": "1116240"
  },
  {
    "text": "files and git the source controller brings any of those changes that you make um into the",
    "start": "1116240",
    "end": "1123280"
  },
  {
    "text": "cluster so that these other controllers can act on those it does that very well",
    "start": "1123280",
    "end": "1128720"
  },
  {
    "text": "um so uh the desired state can be in a variety of popular formats it can be",
    "start": "1128720",
    "end": "1134640"
  },
  {
    "text": "inflaming ammo customization or helm charts",
    "start": "1134640",
    "end": "1139840"
  },
  {
    "text": "there's even a newer terraform uh controller a flex terraform controller that lets you store your desired state",
    "start": "1139840",
    "end": "1146000"
  },
  {
    "text": "in that format um and i expect more uh controllers to support other formats to",
    "start": "1146000",
    "end": "1151120"
  },
  {
    "text": "come soon or as we as we go as as as needed by the community",
    "start": "1151120",
    "end": "1158000"
  },
  {
    "text": "so the customized controller next one the list gets your changes from from the source",
    "start": "1158000",
    "end": "1164240"
  },
  {
    "text": "controller because that already brought them into your cluster right and it applies uh",
    "start": "1164240",
    "end": "1169440"
  },
  {
    "text": "those both the plain yellow as well as any optional um customized overlays",
    "start": "1169440",
    "end": "1174799"
  },
  {
    "text": "um to the cube api it's it's basically applying that information from your source to the",
    "start": "1174799",
    "end": "1180880"
  },
  {
    "text": "controller um it's actually doing the reconciling of that in the cube api",
    "start": "1180880",
    "end": "1186080"
  },
  {
    "text": "so the yaml files also include kubernetes resources well they include kubernetes resources but they also",
    "start": "1186080",
    "end": "1192160"
  },
  {
    "text": "include custom resources uh that other controllers such as help uh such as helm",
    "start": "1192160",
    "end": "1198559"
  },
  {
    "text": "uh rely on to do their job so that's really an important thing to",
    "start": "1198559",
    "end": "1203840"
  },
  {
    "text": "note because uh some people when they install flips wonder why uh if they're doing installing it primarily for help wonder",
    "start": "1203840",
    "end": "1211840"
  },
  {
    "text": "why they're using the customized controller as well when they don't use customize as a tool in their workflows you don't",
    "start": "1211840",
    "end": "1218240"
  },
  {
    "text": "specifically have to use customizes tool your workflows customize is just built into cube control and so it's built into",
    "start": "1218240",
    "end": "1225200"
  },
  {
    "text": "the libraries as well so uh that controller was made to handle both plain yaml and any additional customized",
    "start": "1225200",
    "end": "1231520"
  },
  {
    "text": "overlays that you might be using on top of those so uh once the helm repo and home",
    "start": "1231520",
    "end": "1239120"
  },
  {
    "text": "release crds are applied to the cube api but by the customized controller or however you decide to get them in",
    "start": "1239120",
    "end": "1245440"
  },
  {
    "text": "there if you you want to get them in there in your own way um the helm controller uses that information those crds in the cube api",
    "start": "1245440",
    "end": "1252320"
  },
  {
    "text": "to automate when your home releases you um",
    "start": "1252320",
    "end": "1257600"
  },
  {
    "text": "then uh and i'll i'll tell you a little bit more about this as we go through the demo but uh notification controller",
    "start": "1257600",
    "end": "1263840"
  },
  {
    "text": "keeps you posted about how things are going and it notifies you of any problem with divergence as i mentioned um that's what",
    "start": "1263840",
    "end": "1270480"
  },
  {
    "text": "it does that's the notification controller is what handles that side for flux it can post to slack it can post to",
    "start": "1270480",
    "end": "1277840"
  },
  {
    "text": "many different um team",
    "start": "1277840",
    "end": "1282000"
  },
  {
    "text": "tools that you need for notifications and uh finally the image automation",
    "start": "1283440",
    "end": "1288640"
  },
  {
    "text": "controllers handle writing the exact image versions back to your git source",
    "start": "1288640",
    "end": "1293679"
  },
  {
    "text": "if your desired state if when you declare what you want for your images in your desired state as a",
    "start": "1293679",
    "end": "1298960"
  },
  {
    "text": "simver range or a similar constraint that's really helpful uh if say you just",
    "start": "1298960",
    "end": "1305039"
  },
  {
    "text": "want to you want uh images that are um any minor or patch versions of a",
    "start": "1305039",
    "end": "1310799"
  },
  {
    "text": "specific image to be updated automatically because you trust that's that source but you want to uh open a pr",
    "start": "1310799",
    "end": "1318960"
  },
  {
    "text": "have an automatic pr open for um for whenever there is a a new major version or something like",
    "start": "1318960",
    "end": "1325120"
  },
  {
    "text": "that there's you can specify your own rules and your own constraints but um this is essentially version pinning for",
    "start": "1325120",
    "end": "1330960"
  },
  {
    "text": "git ops so about home controller in the middle there um you know i'm experiencing help",
    "start": "1330960",
    "end": "1336799"
  },
  {
    "text": "myself as a user and contributor and maintainer and i wanted to contribute to",
    "start": "1336799",
    "end": "1342320"
  },
  {
    "text": "flux a few years ago because i was very interested in git ups and after",
    "start": "1342320",
    "end": "1347440"
  },
  {
    "text": "researching what was available i found the helm controller would be for me anyway the most stable powerful",
    "start": "1347440",
    "end": "1354080"
  },
  {
    "text": "get ops tool for the wider helm ecosystem so i wanted to put my efforts there there",
    "start": "1354080",
    "end": "1359280"
  },
  {
    "text": "are other tools and uh there are many good ones and um i'm hoping that we'll",
    "start": "1359280",
    "end": "1364720"
  },
  {
    "text": "continue to work for more interoperability between those in the future but uh",
    "start": "1364720",
    "end": "1370720"
  },
  {
    "text": "in short the helm controller is built on kubernetes core controller runtime like i said before so that means anyone with",
    "start": "1370720",
    "end": "1376640"
  },
  {
    "text": "kubernetes knowledge can contribute uh your you may be here listening this talk",
    "start": "1376640",
    "end": "1382640"
  },
  {
    "text": "as a user but you may be interested in contributing so just keep that in mind that it is uh made not to be a special",
    "start": "1382640",
    "end": "1388559"
  },
  {
    "text": "snowflake but to to follow best practices and be very open to contributions so let's um let's take a",
    "start": "1388559",
    "end": "1395280"
  },
  {
    "text": "very quick look at the architecture uh diagram of how these controllers work together to manage home releases and",
    "start": "1395280",
    "end": "1401120"
  },
  {
    "text": "then we'll just move right on so um here here's here's something that you",
    "start": "1401120",
    "end": "1407520"
  },
  {
    "text": "see on the flux cd website if you go to the helm the components",
    "start": "1407520",
    "end": "1413679"
  },
  {
    "text": "home controller you'll see this diagram so a very short description is when running",
    "start": "1413679",
    "end": "1418880"
  },
  {
    "text": "flux bootstrap which is optional but it is the easiest way",
    "start": "1418880",
    "end": "1424080"
  },
  {
    "text": "um that sets up a git repo for you if one doesn't already exist um it installs",
    "start": "1424080",
    "end": "1431039"
  },
  {
    "text": "flux components in your cluster and mirrors those mirrors those manifests for you",
    "start": "1431039",
    "end": "1436640"
  },
  {
    "text": "into your git repo so you can see exactly what's going on um",
    "start": "1436640",
    "end": "1442840"
  },
  {
    "text": "it uh it imperatively adds um custom resources telling the source controller to watch your git repo",
    "start": "1444080",
    "end": "1450799"
  },
  {
    "text": "and it mirrors those manifests in your git repo as well and from this point on the customized",
    "start": "1450799",
    "end": "1456559"
  },
  {
    "text": "controllers i mentioned before periodically works to reconcile those all those manifests with the resources running your cluster so",
    "start": "1456559",
    "end": "1462720"
  },
  {
    "text": "uh so while you have to bootstrap flux for it to actually do its get ops magic uh",
    "start": "1462720",
    "end": "1470320"
  },
  {
    "text": "once those controllers are running you the the the customized controller will actually be reading your manifests",
    "start": "1470320",
    "end": "1477120"
  },
  {
    "text": "including the manifest for the flux control for flux itself so you can from that point on really be doing git ops uh",
    "start": "1477120",
    "end": "1484640"
  },
  {
    "text": "and you can use the bootstrap command to even update your um your flux",
    "start": "1484640",
    "end": "1489760"
  },
  {
    "text": "installation um your um or any of your other tool including the",
    "start": "1489760",
    "end": "1495440"
  },
  {
    "text": "the flux components themselves so that's that's one of the design um",
    "start": "1495440",
    "end": "1501360"
  },
  {
    "text": "that's one of the uh features of its design that i think is really excellent that you're doing good ops really right out of the gate",
    "start": "1501360",
    "end": "1508400"
  },
  {
    "text": "um so the helm controller sinks",
    "start": "1508400",
    "end": "1514960"
  },
  {
    "text": "um the home controller as i mentioned since the hell repo and home release custom resources which i'll show you in",
    "start": "1514960",
    "end": "1520080"
  },
  {
    "text": "a moment and use the helm sdk to do all the helm",
    "start": "1520080",
    "end": "1525279"
  },
  {
    "text": "things you're already used to that's kind of the summary of this slide for home users",
    "start": "1525279",
    "end": "1530880"
  },
  {
    "text": "so okay so the benefits ensure are uh you know flux introduces an additional layer of reliability",
    "start": "1530880",
    "end": "1537520"
  },
  {
    "text": "consistency observability and audibility to the benefits of using helm",
    "start": "1537520",
    "end": "1543440"
  },
  {
    "text": "cli uh or for that manually or nci",
    "start": "1543440",
    "end": "1549120"
  },
  {
    "text": "so um",
    "start": "1549120",
    "end": "1552399"
  },
  {
    "text": "on comfortability levels uh and kind of like just what you need to",
    "start": "1554159",
    "end": "1559200"
  },
  {
    "text": "do to move from the helm cli to the helm controller right before i show you a demo of doing exactly that is that um it",
    "start": "1559200",
    "end": "1566159"
  },
  {
    "text": "all starts with using problem declaratively so uh you may want to look at this cncf",
    "start": "1566159",
    "end": "1574000"
  },
  {
    "text": "blog post that was just published um by tomo nakahara the vp of um",
    "start": "1574000",
    "end": "1580240"
  },
  {
    "text": "of dx at weworks on how flux lets you use helm declaratively",
    "start": "1580240",
    "end": "1586320"
  },
  {
    "text": "there's there's a link to it in the in the slide deck that we'll provide to you later and um and just please check that",
    "start": "1586320",
    "end": "1593039"
  },
  {
    "text": "out it's a very good write-up of how that works um so you just need to make sure one way or",
    "start": "1593039",
    "end": "1598960"
  },
  {
    "text": "the other whatever tools you're using that you uh that in order to do git ups with helm or any other tool it needs to",
    "start": "1598960",
    "end": "1605440"
  },
  {
    "text": "be declared at first so um flux has a format for you to do that for",
    "start": "1605440",
    "end": "1611840"
  },
  {
    "text": "help so for for helm ci automation users this is mainly just think of this as a",
    "start": "1611840",
    "end": "1618240"
  },
  {
    "text": "process of decoupling your ci and your cd um so and for any helm users whether you",
    "start": "1618240",
    "end": "1624880"
  },
  {
    "text": "already have ci in place or whether you're just starting from scratch um helm releases",
    "start": "1624880",
    "end": "1630320"
  },
  {
    "text": "uh through flux um are properly separated into continuous delivery for you already just by using",
    "start": "1630320",
    "end": "1636799"
  },
  {
    "text": "the tool so uh just a quick note on comfortability that change can be scary",
    "start": "1636799",
    "end": "1643520"
  },
  {
    "text": "for various people um but i assume that you're here because you",
    "start": "1643520",
    "end": "1648880"
  },
  {
    "text": "you you want that change and you know it's necessary so uh here's a few list of tips to",
    "start": "1648880",
    "end": "1655120"
  },
  {
    "text": "to help um uh to help convince those that you need to um",
    "start": "1655120",
    "end": "1661360"
  },
  {
    "text": "to uh to share uh account to share ownership and to",
    "start": "1661360",
    "end": "1667279"
  },
  {
    "text": "share the risk ultimately of making that change um there's there's a lot of good resources on the",
    "start": "1667279",
    "end": "1673679"
  },
  {
    "text": "flux cd website about this um how to convince who needs to be convinced uh",
    "start": "1673679",
    "end": "1680399"
  },
  {
    "text": "and just know that there are there are organizations um mature organizations",
    "start": "1680399",
    "end": "1685600"
  },
  {
    "text": "and risk-averse ones uh that are large small um old and even new ones that are",
    "start": "1685600",
    "end": "1691440"
  },
  {
    "text": "they're adopting get-ups so and they're using flux so um so that is",
    "start": "1691440",
    "end": "1696880"
  },
  {
    "text": "also fuel for you to help uh make your case um",
    "start": "1696880",
    "end": "1702720"
  },
  {
    "text": "and uh if you need to defer to additional experts to help with that there are many people in the community",
    "start": "1702720",
    "end": "1709760"
  },
  {
    "text": "through you can find us on slack as i said before on the various the various um ways to do that in the cncf",
    "start": "1709760",
    "end": "1717200"
  },
  {
    "text": "flux channel and in other channels on slack",
    "start": "1717200",
    "end": "1723200"
  },
  {
    "text": "and if you have a if you're in a business that is that",
    "start": "1723200",
    "end": "1728320"
  },
  {
    "text": "cannot be talking publicly about what you need um there are um vendors there",
    "start": "1728320",
    "end": "1733760"
  },
  {
    "text": "are people um uh who who can help for paid pri uh in a paid",
    "start": "1733760",
    "end": "1740159"
  },
  {
    "text": "way um so if you go to the flock cd website the support page has a section called my employer needs additional help",
    "start": "1740159",
    "end": "1747039"
  },
  {
    "text": "and it lists people who um provide paid support and if you're also",
    "start": "1747039",
    "end": "1753360"
  },
  {
    "text": "if you're in a company that does provide paid support and you're not on that list let us know and we will add you or just make a pull request and add yourself",
    "start": "1753360",
    "end": "1761039"
  },
  {
    "text": "so all right it's demo time and i am now going to stop sharing these slides and instead",
    "start": "1761840",
    "end": "1769760"
  },
  {
    "text": "share a uh and then share um a gist that i made and a terminal and we'll go through this",
    "start": "1769760",
    "end": "1777200"
  },
  {
    "text": "really quickly uh so that you can see how easy it is to to",
    "start": "1777200",
    "end": "1782559"
  },
  {
    "text": "move from helm releases managed with the cli to",
    "start": "1782559",
    "end": "1787600"
  },
  {
    "text": "um to manage with get ops",
    "start": "1787600",
    "end": "1792360"
  },
  {
    "text": "this one right here",
    "start": "1807679",
    "end": "1810720"
  },
  {
    "text": "okay great so here's my terminal on the left terminal on the left and here's a gist",
    "start": "1820080",
    "end": "1825840"
  },
  {
    "text": "that i made on the right uh and the link to that just is in the slides",
    "start": "1825840",
    "end": "1832559"
  },
  {
    "text": "okay so so i have gone ahead and started this process you don't have to um so you",
    "start": "1833679",
    "end": "1841039"
  },
  {
    "text": "don't have to wait for it to happen uh but i haven't i haven't created um i'm starting from scratch here so there's",
    "start": "1841039",
    "end": "1847360"
  },
  {
    "text": "nothing special except for i've uh i've saved 55 seconds creating a kind cluster",
    "start": "1847360",
    "end": "1853039"
  },
  {
    "text": "um but just there there are there are some instructions uh for users on mac or linux to use",
    "start": "1853039",
    "end": "1859679"
  },
  {
    "text": "homebrew if you want to you can install flux and kind any other way you can also do this demo on a cluster that's not a",
    "start": "1859679",
    "end": "1866480"
  },
  {
    "text": "kind cluster i just recommend uh this because anyone can do it without even",
    "start": "1866480",
    "end": "1871840"
  },
  {
    "text": "having a cloud account to that or pay for a kubernetes kubernetes instance to demo them on for",
    "start": "1871840",
    "end": "1878960"
  },
  {
    "text": "themselves um uh and it's",
    "start": "1878960",
    "end": "1884720"
  },
  {
    "text": "cross system compatible so this should work out fine regardless of the system you're on um my gist is in is in shell",
    "start": "1884720",
    "end": "1893039"
  },
  {
    "text": "or bashed so or rather just shell so um so it should be posits compliant if you",
    "start": "1893039",
    "end": "1898960"
  },
  {
    "text": "find a plug in that i'm using bash if you find a bug in that in another shell let me know um but this should get you",
    "start": "1898960",
    "end": "1904720"
  },
  {
    "text": "on your way and at least helped you there so just make sure that you have the most updated versions um",
    "start": "1904720",
    "end": "1911200"
  },
  {
    "text": "i i do",
    "start": "1911200",
    "end": "1916240"
  },
  {
    "text": "um and um make sure that you have a personal access token",
    "start": "1916240",
    "end": "1921760"
  },
  {
    "text": "uh that's exported into your your cli um the personal assets token",
    "start": "1921760",
    "end": "1928399"
  },
  {
    "text": "have a real scope i have that um just know that",
    "start": "1928399",
    "end": "1934320"
  },
  {
    "text": "know that this is handled",
    "start": "1935360",
    "end": "1941519"
  },
  {
    "text": "from a security point of view don't be scared when you hear that because you know that gives any tool access to all of your repos in",
    "start": "1941519",
    "end": "1949840"
  },
  {
    "text": "uh in github if you're using github like i am in this demo uh but don't fear that",
    "start": "1949840",
    "end": "1955679"
  },
  {
    "text": "is not passed in any way to any of the automated controllers um or to your cluster at all um so don't",
    "start": "1955679",
    "end": "1962880"
  },
  {
    "text": "be scared it's only used within the context of your uh cli session",
    "start": "1962880",
    "end": "1968720"
  },
  {
    "text": "uh excuse me your terminal session and um and then flux will",
    "start": "1968720",
    "end": "1974720"
  },
  {
    "text": "uh do take care of security for access to git repo properly by",
    "start": "1974720",
    "end": "1980880"
  },
  {
    "text": "creating a deploy token and github loading uh that loading what's necessary",
    "start": "1980880",
    "end": "1986159"
  },
  {
    "text": "into the cluster etc so i'm just going to show you that i have",
    "start": "1986159",
    "end": "1991760"
  },
  {
    "text": "my and know myself that i have my github token set that is the length for",
    "start": "1991760",
    "end": "1997360"
  },
  {
    "text": "um that i expect to see for a github token i've created a kind cluster and now i'm",
    "start": "1997360",
    "end": "2003679"
  },
  {
    "text": "going to do a flux bootstrap command so i'll just paste it here so that's starting while we're",
    "start": "2003679",
    "end": "2009679"
  },
  {
    "text": "while i'm explaining it the output itself explains this um",
    "start": "2009679",
    "end": "2015600"
  },
  {
    "text": "but just to be clear on some of these settings that i made i i wanted this to be in my personal uh github so it's",
    "start": "2015600",
    "end": "2022799"
  },
  {
    "text": "under my scott rigby github username um i set the interval to 10 seconds which",
    "start": "2022799",
    "end": "2028240"
  },
  {
    "text": "is unusual for uh for an installation that's for a flux",
    "start": "2028240",
    "end": "2035039"
  },
  {
    "text": "installation that's not a demo i'm doing that so that for demo purposes we'll never have to wait for more than 10",
    "start": "2035039",
    "end": "2040720"
  },
  {
    "text": "seconds and half the time i'll have to wait for less than that",
    "start": "2040720",
    "end": "2047039"
  },
  {
    "text": "generally you might want to set this to something i think the default is one minute and you may want to set this to",
    "start": "2047039",
    "end": "2052079"
  },
  {
    "text": "something like five or ten minutes depending on your setup that that can be covered and is covered in separate demos",
    "start": "2052079",
    "end": "2058638"
  },
  {
    "text": "but uh just know that when i uh gave a path that",
    "start": "2058639",
    "end": "2064320"
  },
  {
    "text": "creates the structure for where flux flux writes those manifests in your get repo as i mentioned before",
    "start": "2064320",
    "end": "2070720"
  },
  {
    "text": "um and there's no gold standard for that there's no specific way that that needs to be done um flux is completely",
    "start": "2070720",
    "end": "2077760"
  },
  {
    "text": "unopinionated about that and is made to be very flexible in that way that said there are some good practices",
    "start": "2077760",
    "end": "2083040"
  },
  {
    "text": "that are covered in other talks um and uh for now i'm just doing a very basic one at a path called clusters dev",
    "start": "2083040",
    "end": "2090320"
  },
  {
    "text": "where you may also have a folder clusters stage clusters prod etc",
    "start": "2090320",
    "end": "2096240"
  },
  {
    "text": "so uh that was already done and all components are healthy within the flux system so we're good to go",
    "start": "2096240",
    "end": "2102560"
  },
  {
    "text": "i'm going to go ahead and um go to where i keep my code",
    "start": "2102560",
    "end": "2109760"
  },
  {
    "text": "notice this'll happen so far without writing any code or uh",
    "start": "2110880",
    "end": "2116880"
  },
  {
    "text": "for for for bootstrap and convenience only um and to help make this process much",
    "start": "2116880",
    "end": "2122960"
  },
  {
    "text": "easier on you the flux bootstrap command does write this git repo uh as you can",
    "start": "2122960",
    "end": "2128320"
  },
  {
    "text": "see well i'll show you uh now um",
    "start": "2128320",
    "end": "2135200"
  },
  {
    "text": "yes it's there i just created this two minutes ago now so um",
    "start": "2136240",
    "end": "2142800"
  },
  {
    "text": "you do not have to use the bootstrap command to install flux uh you can do it",
    "start": "2142800",
    "end": "2149280"
  },
  {
    "text": "in in various ways and there are instructions on the flux uh in the flux stocks on how to do it but this is by",
    "start": "2149280",
    "end": "2154880"
  },
  {
    "text": "far the easiest way and it sets up a lot of best practices for you so i'm going to just show you",
    "start": "2154880",
    "end": "2161359"
  },
  {
    "text": "now that i have uh i've cloned that repo that it's made into my local cd into",
    "start": "2161359",
    "end": "2166400"
  },
  {
    "text": "into that repo and now i'm going to go ahead and show you",
    "start": "2166400",
    "end": "2171839"
  },
  {
    "text": "the files that it made you can inspect them when you want to the geotk components",
    "start": "2171839",
    "end": "2177839"
  },
  {
    "text": "shows you uh literally everything that flux needs to run if you have these files and you just did",
    "start": "2177839",
    "end": "2184720"
  },
  {
    "text": "a cube control apply um it would also similarly install flux you would just then need to",
    "start": "2184720",
    "end": "2191280"
  },
  {
    "text": "set up the deploy keys and and other things yourself that the bootstrap command does for you in a handy way",
    "start": "2191280",
    "end": "2198480"
  },
  {
    "text": "um let's uh let's go ahead now quickly and",
    "start": "2198800",
    "end": "2205280"
  },
  {
    "text": "i'm gonna simulate a a helm release",
    "start": "2205280",
    "end": "2211040"
  },
  {
    "text": "um you probably have one or",
    "start": "2211040",
    "end": "2216240"
  },
  {
    "text": "dozens or possibly hundreds in your cluster that you've made using amazing made using the helm cli uh either",
    "start": "2216240",
    "end": "2222560"
  },
  {
    "text": "manually or through automation uh and uh and i'm just going to go ahead and use the pod info um chart which",
    "start": "2222560",
    "end": "2230400"
  },
  {
    "text": "installs this pod info app um that was written by stefan rodin as an example because it's it loads",
    "start": "2230400",
    "end": "2237119"
  },
  {
    "text": "quickly and it's good for demos so i'm going to go ahead and",
    "start": "2237119",
    "end": "2242800"
  },
  {
    "text": "in order to show you in order to show you",
    "start": "2242800",
    "end": "2249200"
  },
  {
    "text": "something slightly more complex i'm going to add custom values too and show you how the how how the flux cli tool",
    "start": "2253280",
    "end": "2259839"
  },
  {
    "text": "allows you to migrate those very easily from your existing home installations into",
    "start": "2259839",
    "end": "2266000"
  },
  {
    "text": "a declaration for your home release so uh",
    "start": "2266000",
    "end": "2271040"
  },
  {
    "text": "you can see that i'm just going to go ahead and use a few of them um replica count log",
    "start": "2271040",
    "end": "2276560"
  },
  {
    "text": "level and i wanted to show you a nested one so i'll just do ui color",
    "start": "2276560",
    "end": "2281599"
  },
  {
    "text": "those are here in the normal helm way again this is doing nothing with flux yet",
    "start": "2281599",
    "end": "2287359"
  },
  {
    "text": "i just have it installed waiting for us and i will go ahead and do do a helm cli",
    "start": "2287359",
    "end": "2294320"
  },
  {
    "text": "installation using the upgrade dash dash install or dash i command",
    "start": "2294320",
    "end": "2299359"
  },
  {
    "text": "making a release called my release of uh the pod info um",
    "start": "2299359",
    "end": "2305520"
  },
  {
    "text": "the pod info chart and you can see you can use normal helm tools helm s helm list to see that that's there and",
    "start": "2305520",
    "end": "2312400"
  },
  {
    "text": "it's not revision one so we're going to go ahead and quickly convert these to declaration or sorry",
    "start": "2312400",
    "end": "2317839"
  },
  {
    "text": "declarative customer resources that flux understands",
    "start": "2317839",
    "end": "2323599"
  },
  {
    "text": "so i'm going to go ahead and create a custom source sorry a custom resource locally",
    "start": "2324800",
    "end": "2331280"
  },
  {
    "text": "um for the helm repository that maps to to really the same",
    "start": "2331280",
    "end": "2337920"
  },
  {
    "text": "uh thing that we did excuse me here with helm repo ad the name of the name",
    "start": "2337920",
    "end": "2344720"
  },
  {
    "text": "of the repo and the path um this is very similar we're going to do",
    "start": "2344720",
    "end": "2350480"
  },
  {
    "text": "instead flux create source helm which is a a helm repo definition that's in the",
    "start": "2350480",
    "end": "2357520"
  },
  {
    "text": "cluster um and we're going to give it the url i'm going to tell it what name space i'm",
    "start": "2357520",
    "end": "2362720"
  },
  {
    "text": "going to use the default namespace just for now and i'm going to export it into a file as opposed to loading it directly",
    "start": "2362720",
    "end": "2368240"
  },
  {
    "text": "imperatively into the cluster because we want to do this declaratively i'm showing you how to do it",
    "start": "2368240",
    "end": "2373280"
  },
  {
    "text": "so i'm going to load this into a file called sourcehomereplay.info.yaml",
    "start": "2373280",
    "end": "2379079"
  },
  {
    "text": "and i'm going to uh i'm going to to",
    "start": "2379920",
    "end": "2386560"
  },
  {
    "text": "show you what that looks like um",
    "start": "2386560",
    "end": "2391320"
  },
  {
    "text": "sorry i cleared my screen without trying to uh",
    "start": "2398160",
    "end": "2403000"
  },
  {
    "text": "oh i see i went to the wrong tab okay thanks for your patience there okay so so let me show you what that looks like",
    "start": "2411440",
    "end": "2418800"
  },
  {
    "text": "um and this is it that just shows you ultimately the same uh",
    "start": "2418800",
    "end": "2426000"
  },
  {
    "text": "um and this is really just the information about the home repository okay there are several ways to there are",
    "start": "2426000",
    "end": "2431680"
  },
  {
    "text": "several different types of sources for a helm chart with flux this is just using the most popular one",
    "start": "2431680",
    "end": "2437920"
  },
  {
    "text": "at home repo there's also uh just to get a folder in git or",
    "start": "2437920",
    "end": "2445039"
  },
  {
    "text": "a git source itself so you can have a a custom helm chart or something like that inside of your git repo and that",
    "start": "2445440",
    "end": "2452000"
  },
  {
    "text": "will work you can also use a storage bucket an s any s3 compatible bucket whether mineo",
    "start": "2452000",
    "end": "2458079"
  },
  {
    "text": "or any other cloud provider's version of a storage",
    "start": "2458079",
    "end": "2463119"
  },
  {
    "text": "bucket and um uh coming very soon you'll be able to",
    "start": "2463119",
    "end": "2469119"
  },
  {
    "text": "use oci as a source now that that is a full feature in helm um that's pretty big news",
    "start": "2469119",
    "end": "2474480"
  },
  {
    "text": "uh we have by pushing that through um and congratulations to all the rest of",
    "start": "2474480",
    "end": "2479920"
  },
  {
    "text": "the helm team on that too um we uh we now have",
    "start": "2479920",
    "end": "2486480"
  },
  {
    "text": "unblocked sdk users uh specific um including flux",
    "start": "2486480",
    "end": "2491839"
  },
  {
    "text": "uh for from um doing that too and providing that support so there's a design document in",
    "start": "2491839",
    "end": "2497040"
  },
  {
    "text": "progress uh or in process and there's actually going to be a demo uh of uh this working with the source",
    "start": "2497040",
    "end": "2504160"
  },
  {
    "text": "controller with oci working as a source at the next community flux meeting so please",
    "start": "2504160",
    "end": "2509359"
  },
  {
    "text": "join that um it'll be next next thursday",
    "start": "2509359",
    "end": "2514400"
  },
  {
    "text": "or if you watch this recording afterwards you can go back and look at the recording of that community flux",
    "start": "2514400",
    "end": "2520880"
  },
  {
    "text": "the demo at that community flex meeting it's pretty exciting so uh next we're going to create a helm",
    "start": "2520880",
    "end": "2527440"
  },
  {
    "text": "release custom resource locally um the reason that this is separated",
    "start": "2527440",
    "end": "2533920"
  },
  {
    "text": "uh the reason that this is separated the the repo on the release is because you may have one helm repo with many charts",
    "start": "2533920",
    "end": "2540160"
  },
  {
    "text": "in it um or you may have many releases that use the same chart or some of the same charts that are in the same repo",
    "start": "2540160",
    "end": "2546240"
  },
  {
    "text": "with other charts so you don't want to have to to to give the information over and over",
    "start": "2546240",
    "end": "2553280"
  },
  {
    "text": "about your home repo as a source um especially if it's a private repo and you need off and other things like that",
    "start": "2553280",
    "end": "2559520"
  },
  {
    "text": "for your source um so you do that once and then we reference that um when we create the home release",
    "start": "2559520",
    "end": "2566880"
  },
  {
    "text": "custom resource so just to show you the the example with values i'm going to go ahead and get use",
    "start": "2566880",
    "end": "2573440"
  },
  {
    "text": "the helmcli as you normally would to get those values into a file and show you how easy it is to migrate",
    "start": "2573440",
    "end": "2578800"
  },
  {
    "text": "those into your home release when you create your custom resource um so i'm gonna go ahead and do helm get",
    "start": "2578800",
    "end": "2585359"
  },
  {
    "text": "values and i'll show you what that looks like in the my values file i just downloaded that's what i just said we",
    "start": "2585359",
    "end": "2590480"
  },
  {
    "text": "were we were we had created when we deployed the chart and",
    "start": "2590480",
    "end": "2596319"
  },
  {
    "text": "now um the flux cli has a command that makes it super easy to create the sound resource uh i'm calling it my release",
    "start": "2596319",
    "end": "2603200"
  },
  {
    "text": "because that's what we did uh that's the release name um and the source is the helm repository",
    "start": "2603200",
    "end": "2609280"
  },
  {
    "text": "that i just mentioned so it's a pointer not all the information about it because that object will uh be there on its own",
    "start": "2609280",
    "end": "2615839"
  },
  {
    "text": "the chart is the pub info chart we're giving a simvar uh constraint for the version it's just got to be",
    "start": "2615839",
    "end": "2622240"
  },
  {
    "text": "above 4.0 um we're telling it the default namespace and we're importing the values",
    "start": "2622240",
    "end": "2627440"
  },
  {
    "text": "automatically from that file uh this command that could be loaded direct excuse me that could be loaded",
    "start": "2627440",
    "end": "2633119"
  },
  {
    "text": "directly into the cube api but this command exports it into a file for uh so we can do this declaratively",
    "start": "2633119",
    "end": "2641119"
  },
  {
    "text": "i'm going to do that and i'm going to show you that file",
    "start": "2641119",
    "end": "2646760"
  },
  {
    "text": "just so you see what this looks like um and there we have it you can see that",
    "start": "2648960",
    "end": "2654640"
  },
  {
    "text": "the values for the chart itself are their own um",
    "start": "2654640",
    "end": "2659920"
  },
  {
    "text": "its own uh map and that works for any chart",
    "start": "2659920",
    "end": "2667039"
  },
  {
    "text": "here so we no longer need to use this temporary values file so i'm going to remove it",
    "start": "2667680",
    "end": "2673280"
  },
  {
    "text": "i don't necessarily have to but i'll do it to stay tidy so i can use git add everything",
    "start": "2673280",
    "end": "2680000"
  },
  {
    "text": "because now we're going to go ahead and deploy this to our repo you purely using um by",
    "start": "2680000",
    "end": "2686560"
  },
  {
    "text": "pushing to get and that will work because the uh the flux components",
    "start": "2686560",
    "end": "2692000"
  },
  {
    "text": "specifically the customized controller is looking at our excuse me the source controller is looking at our source",
    "start": "2692000",
    "end": "2698560"
  },
  {
    "text": "and when we push it there that will be automatically imported into",
    "start": "2698560",
    "end": "2704319"
  },
  {
    "text": "our cluster so uh and do we get status you can see these two new files i'm gonna do again commit",
    "start": "2704319",
    "end": "2711599"
  },
  {
    "text": "for now i'm just gonna do something simple i'll do it but ultimately you're configuring the chart",
    "start": "2711599",
    "end": "2719839"
  },
  {
    "text": "okay and now i'm gonna do git push so",
    "start": "2723440",
    "end": "2729040"
  },
  {
    "text": "let's go ahead and check out the magic now uh if you if you had a longer timeout you",
    "start": "2729040",
    "end": "2734480"
  },
  {
    "text": "could you you could demo this um by using the flux record soft command we don't need to do that because we set the",
    "start": "2734480",
    "end": "2739920"
  },
  {
    "text": "limit to 10 we set the the interval to 10 seconds so i'm going to go ahead and",
    "start": "2739920",
    "end": "2746880"
  },
  {
    "text": "i'm going to go ahead and show you that that should have already",
    "start": "2746880",
    "end": "2754160"
  },
  {
    "text": "changed flux should have already taken over this helm release that you would earlier made",
    "start": "2754319",
    "end": "2760079"
  },
  {
    "text": "with the cli i'll show you this by first doing a helm list again",
    "start": "2760079",
    "end": "2765680"
  },
  {
    "text": "it's now revision status 2 and that's because flux have added labels to those",
    "start": "2765680",
    "end": "2771520"
  },
  {
    "text": "resources and updated to the new revision there so i'm going to go ahead and show you the deploy object managed",
    "start": "2771520",
    "end": "2778000"
  },
  {
    "text": "by that chart oops here i'll just go ahead and show you the ammo itself so you can see",
    "start": "2778000",
    "end": "2783440"
  },
  {
    "text": "it in context if you look under the labels flux adds late excuse me the flux",
    "start": "2783440",
    "end": "2789839"
  },
  {
    "text": "controller adds labels for this to denote that it's controlling this um",
    "start": "2789839",
    "end": "2795520"
  },
  {
    "text": "but uh you know let's uh don't take my word for it let's let's",
    "start": "2795520",
    "end": "2801040"
  },
  {
    "text": "let's prove it here i'm gonna go ahead and update the the helm um",
    "start": "2801040",
    "end": "2807839"
  },
  {
    "text": "uh release custom resource that flux understands",
    "start": "2807839",
    "end": "2813760"
  },
  {
    "text": "and push it just through git and that should update our home release as well so",
    "start": "2813760",
    "end": "2819520"
  },
  {
    "text": "i'm gonna i'm going to add my change i'm just changing the ui from red",
    "start": "2819520",
    "end": "2824560"
  },
  {
    "text": "to blue uh yes um",
    "start": "2824560",
    "end": "2831040"
  },
  {
    "text": "uh let's go ahead and commit it but before",
    "start": "2831040",
    "end": "2837359"
  },
  {
    "text": "i push it i want to show you what it looked like before and after so um",
    "start": "2837359",
    "end": "2844280"
  },
  {
    "text": "let me uh let me get a visual here",
    "start": "2845440",
    "end": "2849680"
  },
  {
    "text": "i'm going to go ahead and port forward so you can see excuse me go ahead and put forward so you can see",
    "start": "2850559",
    "end": "2856079"
  },
  {
    "text": "uh yeah you can see that when we first",
    "start": "2856079",
    "end": "2861680"
  },
  {
    "text": "launched the the helm chart we we colored it red uh i'm going to go do let me go ahead and",
    "start": "2861680",
    "end": "2867680"
  },
  {
    "text": "do a git push and um",
    "start": "2867680",
    "end": "2874000"
  },
  {
    "text": "as long as once that revision updates",
    "start": "2874160",
    "end": "2878400"
  },
  {
    "text": "it's uh in between revisions now there we go once that revision updates um i should be able to port forward this",
    "start": "2880240",
    "end": "2885599"
  },
  {
    "text": "again and show you that just by pushing to get",
    "start": "2885599",
    "end": "2890720"
  },
  {
    "text": "it automatically changed um that helm release",
    "start": "2890720",
    "end": "2895759"
  },
  {
    "text": "okay so we did that uh we showed you that it worked uh we get to the visual on regard",
    "start": "2897440",
    "end": "2903920"
  },
  {
    "text": "it's blue okay so that's that's uh",
    "start": "2903920",
    "end": "2909440"
  },
  {
    "text": "that is really great it should and that shows you how um the helm release object",
    "start": "2909440",
    "end": "2915359"
  },
  {
    "text": "and that the i the concept of home release itself is retained in the cluster using this tool for get ops",
    "start": "2915359",
    "end": "2922960"
  },
  {
    "text": "that is not the case with all tools there are different strategies but we think that there's a high value in being",
    "start": "2923359",
    "end": "2929839"
  },
  {
    "text": "able to still use the helm cli as you need it for example during instant management so if you wanted to use home",
    "start": "2929839",
    "end": "2935359"
  },
  {
    "text": "rollback here is an example of seeing that happen real fast and we're nearing the end of this demo so um",
    "start": "2935359",
    "end": "2942400"
  },
  {
    "text": "uh let's do uh well",
    "start": "2942400",
    "end": "2947520"
  },
  {
    "text": "let's go ahead and do um in order to do a helm rollback i'm gonna show you pause and resume how that works",
    "start": "2947520",
    "end": "2954880"
  },
  {
    "text": "with the resources for whether it's for instance management or for some other purpose you still as a",
    "start": "2954880",
    "end": "2962640"
  },
  {
    "text": "human operator have the ability to control what's happening with this automated process so don't let the fact",
    "start": "2962640",
    "end": "2969760"
  },
  {
    "text": "that don't let the idea of continuous delivery scare you you can pull the emergency brake anytime you want and you",
    "start": "2969760",
    "end": "2975280"
  },
  {
    "text": "don't have to do it for all of your processes uh you can do it on a per home release basis",
    "start": "2975280",
    "end": "2980400"
  },
  {
    "text": "so i'll go ahead and suspend this helm release there's a handy command to do that you can also do it with annotations",
    "start": "2980400",
    "end": "2986720"
  },
  {
    "text": "you don't need to use the flux cli at all but this is just very convenient and then let's go ahead and",
    "start": "2986720",
    "end": "2993520"
  },
  {
    "text": "uh roll back to the last revision back from blue to red",
    "start": "2993520",
    "end": "3000400"
  },
  {
    "text": "uh and to be clear the reason that we've suspended this is because i have this on a very uh the",
    "start": "3000400",
    "end": "3006559"
  },
  {
    "text": "interval on a 10 second interval so even if i have done a helm rollback uh 10 seconds or half the time",
    "start": "3006559",
    "end": "3013359"
  },
  {
    "text": "uh five seconds or less um later uh it would uh",
    "start": "3013359",
    "end": "3020480"
  },
  {
    "text": "flux would automatically heal that and take and and and change my roll my manual helm roll back back to",
    "start": "3020480",
    "end": "3027119"
  },
  {
    "text": "uh the desired state that i have specified in in git so we we paused it in order to show you",
    "start": "3027119",
    "end": "3033280"
  },
  {
    "text": "that this um can happen i'll pour it forward again so you excuse me i'll put four port",
    "start": "3033280",
    "end": "3038720"
  },
  {
    "text": "forward again so you can see that we're back to red um and then i'll go ahead and resume",
    "start": "3038720",
    "end": "3046400"
  },
  {
    "text": "um uh say we're finished with our incident",
    "start": "3046400",
    "end": "3052079"
  },
  {
    "text": "management or whatever we wanted to do and we're going to go ahead and and resume reconciliation automatic",
    "start": "3052079",
    "end": "3058480"
  },
  {
    "text": "reconciliation i'm going to resume that again well yeah i'll resume that again",
    "start": "3058480",
    "end": "3067000"
  },
  {
    "text": "and now i will pour it forward again just to show you that yes indeed that did happen and now",
    "start": "3071040",
    "end": "3076400"
  },
  {
    "text": "we're back to blue so uh now we can clean up and um",
    "start": "3076400",
    "end": "3085040"
  },
  {
    "text": "uh we can do a kind delete cluster to clean up but don't go away yet because there's a",
    "start": "3085040",
    "end": "3091359"
  },
  {
    "text": "big gotcha here uh while this is a cleanup i'm gonna go ahead and use this",
    "start": "3091359",
    "end": "3096400"
  },
  {
    "text": "to show you one last thing um you could delete your helm your uh your",
    "start": "3096400",
    "end": "3101599"
  },
  {
    "text": "git repo now this demo get repo but wait there's more um now that we deleted this cluster i'm",
    "start": "3101599",
    "end": "3109280"
  },
  {
    "text": "going to go ahead and show you how flux flux handles your helm releases in a disaster recovery scenario",
    "start": "3109280",
    "end": "3116000"
  },
  {
    "text": "let me go ahead and create the cluster again we deleted it entirely",
    "start": "3116240",
    "end": "3122319"
  },
  {
    "text": "and all we should need to do now is make sure to bootstrap the flux components back into your cluster so",
    "start": "3123040",
    "end": "3129119"
  },
  {
    "text": "it can do the automatic reconciliation with what you already have specified and get you don't have to do anything else",
    "start": "3129119",
    "end": "3135760"
  },
  {
    "text": "so i'm going to go ahead and go back to the bootstrap command",
    "start": "3135760",
    "end": "3142400"
  },
  {
    "text": "this should take only a few more seconds in the meantime i'll describe to you why",
    "start": "3144240",
    "end": "3150960"
  },
  {
    "text": "this is valuable it may be obvious just from what i've shown you so far but this is not",
    "start": "3150960",
    "end": "3156160"
  },
  {
    "text": "something that most kubernetes users uh helm users or kubernetes users",
    "start": "3156160",
    "end": "3162319"
  },
  {
    "text": "have the ability to do normally when you're when your cluster is deleted you have to",
    "start": "3162319",
    "end": "3167760"
  },
  {
    "text": "rerun a lot of things to make that happen so i'm going to bootstrap this again",
    "start": "3167760",
    "end": "3172800"
  },
  {
    "text": "this time it'll go much faster because it doesn't have to create that repository um this command is item",
    "start": "3172800",
    "end": "3179119"
  },
  {
    "text": "potent so you can run it over and over without fear of messing something up um",
    "start": "3179119",
    "end": "3185200"
  },
  {
    "text": "it sees that there's a cluster in place it finds that deploy key it generates the",
    "start": "3185200",
    "end": "3190240"
  },
  {
    "text": "source secret it puts the proper the proper keys in place for access",
    "start": "3190240",
    "end": "3196480"
  },
  {
    "text": "and as soon as the uh the flux components are um are healthy",
    "start": "3196480",
    "end": "3201599"
  },
  {
    "text": "and running we it will uh will automatically reconcile your home",
    "start": "3201599",
    "end": "3207920"
  },
  {
    "text": "release that you have specified and get if you had more than one if you had hundreds of them it would do the same thing and so now it's done let's do a",
    "start": "3207920",
    "end": "3214800"
  },
  {
    "text": "helm list let's wait for a minute for it to",
    "start": "3214800",
    "end": "3220319"
  },
  {
    "text": "reconcile in or a second and there we go we now have your app uh",
    "start": "3220319",
    "end": "3226640"
  },
  {
    "text": "and uh you can see it running um right now",
    "start": "3227680",
    "end": "3233519"
  },
  {
    "text": "so there we have it um thanks very much um",
    "start": "3233680",
    "end": "3240240"
  },
  {
    "text": "i'll go back down to the bottom that's basically a wrap uh just as a quick review of what we of",
    "start": "3240240",
    "end": "3246079"
  },
  {
    "text": "what we of what we did so that you can walk away and remember this uh without necessarily",
    "start": "3246079",
    "end": "3251520"
  },
  {
    "text": "having to watch every step of the video again um on a local kind cluster we simulated an existing home release by",
    "start": "3251520",
    "end": "3259200"
  },
  {
    "text": "just using the helmcli that you already are familiar with and you know how to use and if you're a brand new user this",
    "start": "3259200",
    "end": "3265280"
  },
  {
    "text": "is essentially helm install chart uh we used the flux cli to bootstrap",
    "start": "3265280",
    "end": "3272559"
  },
  {
    "text": "flux components into the cluster simultaneously define and create if a a",
    "start": "3272559",
    "end": "3278079"
  },
  {
    "text": "git repo for you if it didn't already exist and um uh",
    "start": "3278079",
    "end": "3283440"
  },
  {
    "text": "and go ahead and include them its own manifests for itself to run in that git repo so that if that cluster died just",
    "start": "3283440",
    "end": "3291280"
  },
  {
    "text": "then um you could run the fl you could um you could go ahead and",
    "start": "3291280",
    "end": "3297520"
  },
  {
    "text": "get flux back up and running just from git",
    "start": "3297520",
    "end": "3302720"
  },
  {
    "text": "so uh it also gives you a lot of visibility into exactly what's on there and what it's doing there's",
    "start": "3303920",
    "end": "3309119"
  },
  {
    "text": "really no magic behind the scenes that you're uh that you should be unaware of it's all very accessible",
    "start": "3309119",
    "end": "3315520"
  },
  {
    "text": "that's good for security folks um we use the flux cli to easily create custom resources for the helm repo and",
    "start": "3315520",
    "end": "3322000"
  },
  {
    "text": "the helm release which can multiple releases can reference that repo",
    "start": "3322000",
    "end": "3327760"
  },
  {
    "text": "along with our existing helm releases",
    "start": "3327760",
    "end": "3332960"
  },
  {
    "text": "custom values that we wrote when we first used the helm cli to make it that was pretty cool",
    "start": "3332960",
    "end": "3338079"
  },
  {
    "text": "uh for those of you that uh that have more complex charts or lots of values maybe values from different environments",
    "start": "3338079",
    "end": "3344079"
  },
  {
    "text": "you can immediately see the benefit of that convenience function",
    "start": "3344079",
    "end": "3349359"
  },
  {
    "text": "uh we pushed the files to get and we we showed how the flux labels uh are there",
    "start": "3349359",
    "end": "3355280"
  },
  {
    "text": "which means it has taken ownership of managing that existing home release that you had earlier deployed with the",
    "start": "3355280",
    "end": "3360400"
  },
  {
    "text": "helmcli um and we proved that that actually is managed um",
    "start": "3360400",
    "end": "3366640"
  },
  {
    "text": "by making changes to get only and we watched flux magically update your home",
    "start": "3366640",
    "end": "3371760"
  },
  {
    "text": "release from git uh we showed you how to pause and resume um which you might do use during in",
    "start": "3371760",
    "end": "3378240"
  },
  {
    "text": "cluster development or incident management um and we simulated disaster recovery of",
    "start": "3378240",
    "end": "3384000"
  },
  {
    "text": "your helm release by deleting the entire cluster all we had to do was bootstrap flux again onto a new cluster and we got your",
    "start": "3384000",
    "end": "3391040"
  },
  {
    "text": "application up and running again so i hope that helps give you uh an idea",
    "start": "3391040",
    "end": "3396079"
  },
  {
    "text": "of the power of flux for helm users why you as a helm user would want to",
    "start": "3396079",
    "end": "3401359"
  },
  {
    "text": "do helm declaratively and you would want flux to do that and how additionally by using flux you are using um you're",
    "start": "3401359",
    "end": "3408720"
  },
  {
    "text": "getting all of the benefits of github says so thanks a lot and we'll uh see you um",
    "start": "3408720",
    "end": "3414799"
  },
  {
    "text": "in the q a",
    "start": "3414799",
    "end": "3418280"
  },
  {
    "text": "you",
    "start": "3420480",
    "end": "3422559"
  }
]