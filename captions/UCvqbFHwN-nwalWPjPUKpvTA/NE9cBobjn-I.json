[
  {
    "text": "thank you very much",
    "start": "1740",
    "end": "3200"
  },
  {
    "text": "ah sorry my vpn's trying to connect okay",
    "start": "3200",
    "end": "6779"
  },
  {
    "text": "so thank you very much thank you for the",
    "start": "6779",
    "end": "8400"
  },
  {
    "text": "invitation it's really great to be here",
    "start": "8400",
    "end": "10080"
  },
  {
    "text": "it's super exciting",
    "start": "10080",
    "end": "11580"
  },
  {
    "text": "um yeah so I'm going to be talking to",
    "start": "11580",
    "end": "13200"
  },
  {
    "text": "you about observability at scale",
    "start": "13200",
    "end": "15480"
  },
  {
    "text": "um I think this presentation might be a",
    "start": "15480",
    "end": "17100"
  },
  {
    "text": "bit different",
    "start": "17100",
    "end": "18300"
  },
  {
    "text": "um because what open systems is doing is",
    "start": "18300",
    "end": "20580"
  },
  {
    "text": "we're actually uh it's in the title",
    "start": "20580",
    "end": "22439"
  },
  {
    "text": "we're actually focused primarily on edge",
    "start": "22439",
    "end": "23880"
  },
  {
    "text": "devices so I think most of the stuff",
    "start": "23880",
    "end": "26039"
  },
  {
    "text": "which we hear about nowadays is on",
    "start": "26039",
    "end": "27480"
  },
  {
    "text": "cluster monitoring up cluster",
    "start": "27480",
    "end": "29099"
  },
  {
    "text": "observability we're going to see how we",
    "start": "29099",
    "end": "31679"
  },
  {
    "text": "kind of do this but for Edge devices",
    "start": "31679",
    "end": "34920"
  },
  {
    "text": "so there's a lot to get through so I'm",
    "start": "34920",
    "end": "36600"
  },
  {
    "text": "not going to um",
    "start": "36600",
    "end": "38280"
  },
  {
    "text": "mess around so this is what we are going",
    "start": "38280",
    "end": "40079"
  },
  {
    "text": "to talk about so this is the agenda I'm",
    "start": "40079",
    "end": "42480"
  },
  {
    "text": "going to spend a bit of time saying what",
    "start": "42480",
    "end": "43980"
  },
  {
    "text": "we do and what we've been doing for the",
    "start": "43980",
    "end": "45840"
  },
  {
    "text": "past two decades or so",
    "start": "45840",
    "end": "48300"
  },
  {
    "text": "um and then sort of outline the",
    "start": "48300",
    "end": "49559"
  },
  {
    "text": "challenges which we're now facing give",
    "start": "49559",
    "end": "51780"
  },
  {
    "text": "you a brief overview of the action plan",
    "start": "51780",
    "end": "53160"
  },
  {
    "text": "and uh then just give you an update on",
    "start": "53160",
    "end": "55800"
  },
  {
    "text": "kind of how we are where we are on the",
    "start": "55800",
    "end": "57840"
  },
  {
    "text": "roadmap of putting it into motion",
    "start": "57840",
    "end": "60239"
  },
  {
    "text": "so I promise there is only one kind of",
    "start": "60239",
    "end": "62460"
  },
  {
    "text": "marketing type slide this is it the",
    "start": "62460",
    "end": "65040"
  },
  {
    "text": "reason I chose this slide is because I",
    "start": "65040",
    "end": "66479"
  },
  {
    "text": "think it really uh in one picture it",
    "start": "66479",
    "end": "69540"
  },
  {
    "text": "really shows what we are really doing so",
    "start": "69540",
    "end": "71040"
  },
  {
    "text": "what our kind of business model is",
    "start": "71040",
    "end": "73140"
  },
  {
    "text": "um so we are a sassy company it stands",
    "start": "73140",
    "end": "75479"
  },
  {
    "text": "for secure access service edge and this",
    "start": "75479",
    "end": "77700"
  },
  {
    "text": "basically splits into sort of two so you",
    "start": "77700",
    "end": "79560"
  },
  {
    "text": "have the networking side over here this",
    "start": "79560",
    "end": "81180"
  },
  {
    "text": "is wide area network this is so software",
    "start": "81180",
    "end": "83820"
  },
  {
    "text": "defined networks this is basically that",
    "start": "83820",
    "end": "86700"
  },
  {
    "text": "our customers can talk to each other in",
    "start": "86700",
    "end": "88680"
  },
  {
    "text": "offices around the world so it's VPN",
    "start": "88680",
    "end": "90540"
  },
  {
    "text": "this kind of stuff on the right hand",
    "start": "90540",
    "end": "92640"
  },
  {
    "text": "side you have the secure the security",
    "start": "92640",
    "end": "95000"
  },
  {
    "text": "aspect so this is about proxy this is",
    "start": "95000",
    "end": "98220"
  },
  {
    "text": "about firewalling this is about",
    "start": "98220",
    "end": "100500"
  },
  {
    "text": "um zero trust network access and these",
    "start": "100500",
    "end": "102780"
  },
  {
    "text": "two things come together",
    "start": "102780",
    "end": "104479"
  },
  {
    "text": "to make sassy which Gartner invented in",
    "start": "104479",
    "end": "107700"
  },
  {
    "text": "2019 turned out we've been doing it for",
    "start": "107700",
    "end": "109439"
  },
  {
    "text": "two decades but doesn't matter and on",
    "start": "109439",
    "end": "111720"
  },
  {
    "text": "top of that we have the manage sassy",
    "start": "111720",
    "end": "113399"
  },
  {
    "text": "component so this is a 24 7 Global",
    "start": "113399",
    "end": "116399"
  },
  {
    "text": "network operations center which is uh",
    "start": "116399",
    "end": "119100"
  },
  {
    "text": "you know on top of the sassy we're also",
    "start": "119100",
    "end": "121020"
  },
  {
    "text": "making sure that everything is working",
    "start": "121020",
    "end": "122280"
  },
  {
    "text": "as it should be",
    "start": "122280",
    "end": "124500"
  },
  {
    "text": "just to give you an idea of how this can",
    "start": "124500",
    "end": "126060"
  },
  {
    "text": "look this is what a customer might see",
    "start": "126060",
    "end": "127740"
  },
  {
    "text": "when they log into the portal you get an",
    "start": "127740",
    "end": "130140"
  },
  {
    "text": "overview of uh my you get an overview of",
    "start": "130140",
    "end": "133680"
  },
  {
    "text": "where your hosts are where they are",
    "start": "133680",
    "end": "135540"
  },
  {
    "text": "around the world",
    "start": "135540",
    "end": "137099"
  },
  {
    "text": "um and yeah you've got a lot of kind of",
    "start": "137099",
    "end": "138980"
  },
  {
    "text": "metrics that you can drill into already",
    "start": "138980",
    "end": "141120"
  },
  {
    "text": "in this portal",
    "start": "141120",
    "end": "143840"
  },
  {
    "text": "so",
    "start": "143840",
    "end": "145379"
  },
  {
    "text": "the start of the journey",
    "start": "145379",
    "end": "147060"
  },
  {
    "text": "is really",
    "start": "147060",
    "end": "148560"
  },
  {
    "text": "um well if we think about our Fleet of",
    "start": "148560",
    "end": "150120"
  },
  {
    "text": "edge devices uh they're sort of they're",
    "start": "150120",
    "end": "153120"
  },
  {
    "text": "lovingly provisioned in a workshop",
    "start": "153120",
    "end": "154680"
  },
  {
    "text": "before they are delivered to our",
    "start": "154680",
    "end": "156480"
  },
  {
    "text": "customers so we ship them off to our",
    "start": "156480",
    "end": "157800"
  },
  {
    "text": "customers",
    "start": "157800",
    "end": "158879"
  },
  {
    "text": "um they're individually named they're",
    "start": "158879",
    "end": "160319"
  },
  {
    "text": "really pets right so they're our kind of",
    "start": "160319",
    "end": "162000"
  },
  {
    "text": "pets which we send off into the world",
    "start": "162000",
    "end": "163379"
  },
  {
    "text": "and we we hope they're looked after this",
    "start": "163379",
    "end": "165840"
  },
  {
    "text": "is uh to give you an idea of what they",
    "start": "165840",
    "end": "167040"
  },
  {
    "text": "might look like this is one of the most",
    "start": "167040",
    "end": "169440"
  },
  {
    "text": "I think this is the most commonly used",
    "start": "169440",
    "end": "171060"
  },
  {
    "text": "box which you might receive this is the",
    "start": "171060",
    "end": "173280"
  },
  {
    "text": "new line of boxes which has kind of more",
    "start": "173280",
    "end": "175560"
  },
  {
    "text": "options as you can see and then the",
    "start": "175560",
    "end": "178379"
  },
  {
    "text": "customers will take the boxes and put",
    "start": "178379",
    "end": "179760"
  },
  {
    "text": "them into some home like this which",
    "start": "179760",
    "end": "183300"
  },
  {
    "text": "breaks our heart a little bit no it's",
    "start": "183300",
    "end": "184860"
  },
  {
    "text": "okay",
    "start": "184860",
    "end": "185819"
  },
  {
    "text": "um",
    "start": "185819",
    "end": "186420"
  },
  {
    "text": "this is to give you an idea of how we've",
    "start": "186420",
    "end": "188160"
  },
  {
    "text": "kind of grown over the past two decades",
    "start": "188160",
    "end": "189920"
  },
  {
    "text": "so back in 2004 we had 80 physical hosts",
    "start": "189920",
    "end": "193440"
  },
  {
    "text": "uh 2007 we reached the 1000 host Mark",
    "start": "193440",
    "end": "196700"
  },
  {
    "text": "and sometime between 22 and 23 we cross",
    "start": "196700",
    "end": "200400"
  },
  {
    "text": "the 10K host Mark so there's a lot of",
    "start": "200400",
    "end": "202980"
  },
  {
    "text": "devices out there which need to be",
    "start": "202980",
    "end": "204239"
  },
  {
    "text": "looked after",
    "start": "204239",
    "end": "206340"
  },
  {
    "text": "now what happens when a device gets sick",
    "start": "206340",
    "end": "208440"
  },
  {
    "text": "so they're actually nursed back to",
    "start": "208440",
    "end": "211260"
  },
  {
    "text": "health by Mission Control mission",
    "start": "211260",
    "end": "213300"
  },
  {
    "text": "control is I'm going to talk about that",
    "start": "213300",
    "end": "215159"
  },
  {
    "text": "next it basically follows the same kind",
    "start": "215159",
    "end": "217440"
  },
  {
    "text": "of recipe you log into the box you grab",
    "start": "217440",
    "end": "219840"
  },
  {
    "text": "the logs you check the service statuses",
    "start": "219840",
    "end": "222540"
  },
  {
    "text": "and you do your kind of Linux diagnostic",
    "start": "222540",
    "end": "224700"
  },
  {
    "text": "stuff which you can do this is how",
    "start": "224700",
    "end": "226739"
  },
  {
    "text": "Mission Control looks it's a bit blurry",
    "start": "226739",
    "end": "228780"
  },
  {
    "text": "sorry about that basically you have",
    "start": "228780",
    "end": "230459"
  },
  {
    "text": "tickets which come in tickets can either",
    "start": "230459",
    "end": "232799"
  },
  {
    "text": "be made by a customer or they can be",
    "start": "232799",
    "end": "234720"
  },
  {
    "text": "made automatically by the monitoring",
    "start": "234720",
    "end": "236580"
  },
  {
    "text": "Pipeline and that's what we're going to",
    "start": "236580",
    "end": "238080"
  },
  {
    "text": "talk about",
    "start": "238080",
    "end": "239400"
  },
  {
    "text": "when something goes wrong it ends up in",
    "start": "239400",
    "end": "241620"
  },
  {
    "text": "a ticket that's what you take away from",
    "start": "241620",
    "end": "243060"
  },
  {
    "text": "that",
    "start": "243060",
    "end": "244980"
  },
  {
    "text": "how do we actually monitor the fleet so",
    "start": "244980",
    "end": "246720"
  },
  {
    "text": "this is how we've done it up until now",
    "start": "246720",
    "end": "248640"
  },
  {
    "text": "let's say so we have three kind of",
    "start": "248640",
    "end": "251000"
  },
  {
    "text": "components to the monitoring pipeline",
    "start": "251000",
    "end": "253620"
  },
  {
    "text": "service nurses Guma and Matrix",
    "start": "253620",
    "end": "257160"
  },
  {
    "text": "so service nervous sorry service nurses",
    "start": "257160",
    "end": "260160"
  },
  {
    "text": "and Guma go together this is about",
    "start": "260160",
    "end": "261600"
  },
  {
    "text": "application monitoring so this is small",
    "start": "261600",
    "end": "264360"
  },
  {
    "text": "scripts which basically continuously",
    "start": "264360",
    "end": "265979"
  },
  {
    "text": "monitor the status of services on the",
    "start": "265979",
    "end": "268800"
  },
  {
    "text": "device",
    "start": "268800",
    "end": "269580"
  },
  {
    "text": "when something goes wrong they emit a",
    "start": "269580",
    "end": "272340"
  },
  {
    "text": "notification which is a log line and",
    "start": "272340",
    "end": "274320"
  },
  {
    "text": "each nurse is effectively a state",
    "start": "274320",
    "end": "275639"
  },
  {
    "text": "machine so different events can trigger",
    "start": "275639",
    "end": "277800"
  },
  {
    "text": "the nurse to emit different log lines",
    "start": "277800",
    "end": "279360"
  },
  {
    "text": "this is how the log line sort of looks",
    "start": "279360",
    "end": "281639"
  },
  {
    "text": "and this is fed into syslog and labeled",
    "start": "281639",
    "end": "284280"
  },
  {
    "text": "and all that kind of metadata is",
    "start": "284280",
    "end": "286919"
  },
  {
    "text": "attached",
    "start": "286919",
    "end": "288180"
  },
  {
    "text": "on the other side we have Guma this is",
    "start": "288180",
    "end": "290460"
  },
  {
    "text": "the grand unified monitoring",
    "start": "290460",
    "end": "292259"
  },
  {
    "text": "architecture that gives you an idea of",
    "start": "292259",
    "end": "293820"
  },
  {
    "text": "the kind of importance this thing has in",
    "start": "293820",
    "end": "295680"
  },
  {
    "text": "the whole thing its job is basically to",
    "start": "295680",
    "end": "298320"
  },
  {
    "text": "pass classify and filter syslog and to",
    "start": "298320",
    "end": "301380"
  },
  {
    "text": "give you an idea this thing is basically",
    "start": "301380",
    "end": "303600"
  },
  {
    "text": "matching against a list of around 3 000",
    "start": "303600",
    "end": "305880"
  },
  {
    "text": "regex's on every log line which comes in",
    "start": "305880",
    "end": "308040"
  },
  {
    "text": "and then it will decide whether it needs",
    "start": "308040",
    "end": "311400"
  },
  {
    "text": "to forward that centrally and once it",
    "start": "311400",
    "end": "313860"
  },
  {
    "text": "gets Central it will enter this",
    "start": "313860",
    "end": "315300"
  },
  {
    "text": "implication engine and the implication",
    "start": "315300",
    "end": "317400"
  },
  {
    "text": "engine is 20 years of business logic",
    "start": "317400",
    "end": "319259"
  },
  {
    "text": "which",
    "start": "319259",
    "end": "320220"
  },
  {
    "text": "decides whether or not to make a ticket",
    "start": "320220",
    "end": "321960"
  },
  {
    "text": "to Mission Control it's a black box",
    "start": "321960",
    "end": "323699"
  },
  {
    "text": "really",
    "start": "323699",
    "end": "325199"
  },
  {
    "text": "so this was in 2008 we had Guma",
    "start": "325199",
    "end": "328380"
  },
  {
    "text": "um now we also have metrics so we have a",
    "start": "328380",
    "end": "330660"
  },
  {
    "text": "metric stack we've had metrics along the",
    "start": "330660",
    "end": "333720"
  },
  {
    "text": "hallway the most recent incarnation of",
    "start": "333720",
    "end": "336000"
  },
  {
    "text": "the metric stack beyond what I'm going",
    "start": "336000",
    "end": "337680"
  },
  {
    "text": "to talk to talk about later is with",
    "start": "337680",
    "end": "339660"
  },
  {
    "text": "influxdb and this is where most of the",
    "start": "339660",
    "end": "342780"
  },
  {
    "text": "statistics are coming from in the",
    "start": "342780",
    "end": "344340"
  },
  {
    "text": "customer portal we scrape locally on the",
    "start": "344340",
    "end": "346440"
  },
  {
    "text": "host with Prometheus and then we feed",
    "start": "346440",
    "end": "348300"
  },
  {
    "text": "that into Kafka Kafka consumer then",
    "start": "348300",
    "end": "350460"
  },
  {
    "text": "takes that into influx DB",
    "start": "350460",
    "end": "352380"
  },
  {
    "text": "this started in 2015 and this is how",
    "start": "352380",
    "end": "356100"
  },
  {
    "text": "influxdb looked in 2015 we have two",
    "start": "356100",
    "end": "358440"
  },
  {
    "text": "physical data centers where influx is",
    "start": "358440",
    "end": "360120"
  },
  {
    "text": "living",
    "start": "360120",
    "end": "361020"
  },
  {
    "text": "in 2021 this is how influx looked so it",
    "start": "361020",
    "end": "364680"
  },
  {
    "text": "wasn't um doing so well we had scaled",
    "start": "364680",
    "end": "366840"
  },
  {
    "text": "out as much as we could",
    "start": "366840",
    "end": "368400"
  },
  {
    "text": "um but it was sort of needing a lot of",
    "start": "368400",
    "end": "370740"
  },
  {
    "text": "manual intervention by this point",
    "start": "370740",
    "end": "373440"
  },
  {
    "text": "um with my favorite Gyra ever the trip",
    "start": "373440",
    "end": "375300"
  },
  {
    "text": "to DC to add more round to influx so",
    "start": "375300",
    "end": "379139"
  },
  {
    "text": "this sort of basically in 2021 this kind",
    "start": "379139",
    "end": "382139"
  },
  {
    "text": "of prompted a review of the whole kind",
    "start": "382139",
    "end": "384419"
  },
  {
    "text": "of monitoring stack you know can we",
    "start": "384419",
    "end": "386039"
  },
  {
    "text": "really go forward with things as they",
    "start": "386039",
    "end": "387840"
  },
  {
    "text": "are I think it's clear we cannot and we",
    "start": "387840",
    "end": "389940"
  },
  {
    "text": "identified maybe three big challenges",
    "start": "389940",
    "end": "392160"
  },
  {
    "text": "which we needed to solve one is new",
    "start": "392160",
    "end": "394380"
  },
  {
    "text": "environments so we're very good at Edge",
    "start": "394380",
    "end": "396300"
  },
  {
    "text": "devices but Cloud virtual machines we",
    "start": "396300",
    "end": "400020"
  },
  {
    "text": "are novices there log Centric alerting",
    "start": "400020",
    "end": "403080"
  },
  {
    "text": "so everything that we do is based on",
    "start": "403080",
    "end": "405360"
  },
  {
    "text": "logs every alert which comes into",
    "start": "405360",
    "end": "406860"
  },
  {
    "text": "Mission Control started as a log Line",
    "start": "406860",
    "end": "408840"
  },
  {
    "text": "This is not very efficient especially",
    "start": "408840",
    "end": "410699"
  },
  {
    "text": "when we're evaluating 3000 regexes and",
    "start": "410699",
    "end": "413639"
  },
  {
    "text": "uh that list of regex's is very poorly",
    "start": "413639",
    "end": "416460"
  },
  {
    "text": "maintained let's say",
    "start": "416460",
    "end": "418400"
  },
  {
    "text": "this all leads into the basic problem",
    "start": "418400",
    "end": "420419"
  },
  {
    "text": "which is scalability the current",
    "start": "420419",
    "end": "421979"
  },
  {
    "text": "solution works really well for Edge",
    "start": "421979",
    "end": "423720"
  },
  {
    "text": "devices but it does not scale to Beyond",
    "start": "423720",
    "end": "426000"
  },
  {
    "text": "this so we need to have a rethink",
    "start": "426000",
    "end": "429000"
  },
  {
    "text": "so this is why in 22 and 23 we've had a",
    "start": "429000",
    "end": "432440"
  },
  {
    "text": "observability focus",
    "start": "432440",
    "end": "435259"
  },
  {
    "text": "now each challenge which we need to",
    "start": "435259",
    "end": "438000"
  },
  {
    "text": "solve it kind of nicely Maps into each",
    "start": "438000",
    "end": "441539"
  },
  {
    "text": "part of our monitoring pipeline as it",
    "start": "441539",
    "end": "443639"
  },
  {
    "text": "exists so we have the customer Fleet we",
    "start": "443639",
    "end": "445680"
  },
  {
    "text": "need to make sure that we can ingest",
    "start": "445680",
    "end": "446940"
  },
  {
    "text": "metrics from anywhere not just Edge",
    "start": "446940",
    "end": "448979"
  },
  {
    "text": "devices but cloud-based services",
    "start": "448979",
    "end": "452099"
  },
  {
    "text": "virtual machines any cloud provider GC",
    "start": "452099",
    "end": "454560"
  },
  {
    "text": "whatever we need to make sure that we",
    "start": "454560",
    "end": "456000"
  },
  {
    "text": "can take the metrics and we don't care",
    "start": "456000",
    "end": "457380"
  },
  {
    "text": "where it came from",
    "start": "457380",
    "end": "458819"
  },
  {
    "text": "on the alerting side we need to make",
    "start": "458819",
    "end": "461400"
  },
  {
    "text": "sure that we well we should make sure",
    "start": "461400",
    "end": "463440"
  },
  {
    "text": "that we're alerting on things which",
    "start": "463440",
    "end": "464580"
  },
  {
    "text": "matter there is a lot of noise and",
    "start": "464580",
    "end": "466259"
  },
  {
    "text": "Mission Control because of how we",
    "start": "466259",
    "end": "468360"
  },
  {
    "text": "generate the alerts which is based on",
    "start": "468360",
    "end": "469919"
  },
  {
    "text": "log lines and things can just happen",
    "start": "469919",
    "end": "471300"
  },
  {
    "text": "which make a log go crazy so you get 500",
    "start": "471300",
    "end": "473880"
  },
  {
    "text": "ticket submission control which are",
    "start": "473880",
    "end": "475139"
  },
  {
    "text": "noise",
    "start": "475139",
    "end": "476099"
  },
  {
    "text": "if you can change to alerting on metrics",
    "start": "476099",
    "end": "479160"
  },
  {
    "text": "you only alert when things are actually",
    "start": "479160",
    "end": "481560"
  },
  {
    "text": "going wrong when your CPU temperature is",
    "start": "481560",
    "end": "483240"
  },
  {
    "text": "going crazy for some reason that's",
    "start": "483240",
    "end": "485039"
  },
  {
    "text": "something which you should know about",
    "start": "485039",
    "end": "486539"
  },
  {
    "text": "and finally this big one is the",
    "start": "486539",
    "end": "488220"
  },
  {
    "text": "implication engine",
    "start": "488220",
    "end": "489539"
  },
  {
    "text": "we need to take this 20 years of",
    "start": "489539",
    "end": "491280"
  },
  {
    "text": "business logic and somehow break it",
    "start": "491280",
    "end": "493800"
  },
  {
    "text": "apart and make it accessible to all the",
    "start": "493800",
    "end": "496680"
  },
  {
    "text": "service teams not just in some gurus",
    "start": "496680",
    "end": "500039"
  },
  {
    "text": "now",
    "start": "500039",
    "end": "502520"
  },
  {
    "text": "where are we in the process so we have",
    "start": "502699",
    "end": "506099"
  },
  {
    "text": "uh let's say we started back in 21 with",
    "start": "506099",
    "end": "509639"
  },
  {
    "text": "this project 22 was really focused on",
    "start": "509639",
    "end": "512039"
  },
  {
    "text": "tackling uh the first part of the",
    "start": "512039",
    "end": "514500"
  },
  {
    "text": "pipelines of the of building a sort of",
    "start": "514500",
    "end": "517140"
  },
  {
    "text": "environment agnostic observability",
    "start": "517140",
    "end": "518700"
  },
  {
    "text": "platform and now 23 and plus we're",
    "start": "518700",
    "end": "522240"
  },
  {
    "text": "moving into the alerting on metrics side",
    "start": "522240",
    "end": "524219"
  },
  {
    "text": "of things so I'm going to talk today",
    "start": "524219",
    "end": "526680"
  },
  {
    "text": "um mainly about these two stacks",
    "start": "526680",
    "end": "528180"
  },
  {
    "text": "actually only one of these stacks",
    "start": "528180",
    "end": "530640"
  },
  {
    "text": "on the right hand side we have our",
    "start": "530640",
    "end": "532740"
  },
  {
    "text": "logging back end which is based on",
    "start": "532740",
    "end": "534300"
  },
  {
    "text": "grafana Loki these are the sort of stats",
    "start": "534300",
    "end": "538200"
  },
  {
    "text": "of the cluster",
    "start": "538200",
    "end": "539820"
  },
  {
    "text": "I don't know it's three terabytes or",
    "start": "539820",
    "end": "541920"
  },
  {
    "text": "three terabytes per day",
    "start": "541920",
    "end": "543600"
  },
  {
    "text": "um I don't think it's a small cluster I",
    "start": "543600",
    "end": "545279"
  },
  {
    "text": "don't think it's a huge cluster it's",
    "start": "545279",
    "end": "547140"
  },
  {
    "text": "pretty big I would love to talk about",
    "start": "547140",
    "end": "549600"
  },
  {
    "text": "Loki but today I'm going to focus on",
    "start": "549600",
    "end": "551519"
  },
  {
    "text": "Thanos on the other side on the left",
    "start": "551519",
    "end": "553800"
  },
  {
    "text": "hand side because Thanos is really what",
    "start": "553800",
    "end": "556019"
  },
  {
    "text": "sort of inspired that's where we started",
    "start": "556019",
    "end": "558120"
  },
  {
    "text": "with this change so it feels right to to",
    "start": "558120",
    "end": "560880"
  },
  {
    "text": "to start with Thanos basically",
    "start": "560880",
    "end": "562980"
  },
  {
    "text": "so we have 50 cores 800 gigabytes of RAM",
    "start": "562980",
    "end": "565519"
  },
  {
    "text": "370 pods and we are ingesting 110",
    "start": "565519",
    "end": "568320"
  },
  {
    "text": "million metrics into Thanos typically",
    "start": "568320",
    "end": "573000"
  },
  {
    "text": "we burst up to 240 million sometimes",
    "start": "573860",
    "end": "576720"
  },
  {
    "text": "there are reasons for this there are",
    "start": "576720",
    "end": "578100"
  },
  {
    "text": "different sort of processes which",
    "start": "578100",
    "end": "579240"
  },
  {
    "text": "generate metrics",
    "start": "579240",
    "end": "580980"
  },
  {
    "text": "um but this is uh pretty typical load",
    "start": "580980",
    "end": "583680"
  },
  {
    "text": "level which we're dealing with with",
    "start": "583680",
    "end": "584700"
  },
  {
    "text": "Thanos",
    "start": "584700",
    "end": "586140"
  },
  {
    "text": "um now a bit of I think probably most",
    "start": "586140",
    "end": "589440"
  },
  {
    "text": "people here know what Thanos is but just",
    "start": "589440",
    "end": "591660"
  },
  {
    "text": "do a basic refresher this is the kind of",
    "start": "591660",
    "end": "594180"
  },
  {
    "text": "classic Thanos architecture so this is",
    "start": "594180",
    "end": "597360"
  },
  {
    "text": "the Thanos sidecar model which basically",
    "start": "597360",
    "end": "599940"
  },
  {
    "text": "plugs Prometheus as a into the store API",
    "start": "599940",
    "end": "602519"
  },
  {
    "text": "exposes Prometheus so you can query",
    "start": "602519",
    "end": "604560"
  },
  {
    "text": "Prometheus with Thanos but it also",
    "start": "604560",
    "end": "606980"
  },
  {
    "text": "allows you to flush blocks from",
    "start": "606980",
    "end": "609899"
  },
  {
    "text": "Prometheus into object storage so it's a",
    "start": "609899",
    "end": "612240"
  },
  {
    "text": "long-term retention of those Prometheus",
    "start": "612240",
    "end": "613980"
  },
  {
    "text": "metrics this is really good",
    "start": "613980",
    "end": "616019"
  },
  {
    "text": "now we actually well we run both",
    "start": "616019",
    "end": "618440"
  },
  {
    "text": "architectures but the one which is",
    "start": "618440",
    "end": "621180"
  },
  {
    "text": "actually most interesting for us is the",
    "start": "621180",
    "end": "623480"
  },
  {
    "text": "receiver so the the receiver model so",
    "start": "623480",
    "end": "626940"
  },
  {
    "text": "there is another way of running phallus",
    "start": "626940",
    "end": "628200"
  },
  {
    "text": "where you have routing receivers and",
    "start": "628200",
    "end": "629880"
  },
  {
    "text": "ingesting receivers and so basically",
    "start": "629880",
    "end": "631800"
  },
  {
    "text": "these routing receivers can accept",
    "start": "631800",
    "end": "633720"
  },
  {
    "text": "Prometheus remote write requests pass",
    "start": "633720",
    "end": "636720"
  },
  {
    "text": "them along to injectors and then the",
    "start": "636720",
    "end": "638339"
  },
  {
    "text": "ingesters push them push the metrics",
    "start": "638339",
    "end": "640200"
  },
  {
    "text": "into the object storage that's what's",
    "start": "640200",
    "end": "642120"
  },
  {
    "text": "going on here of course this is",
    "start": "642120",
    "end": "643860"
  },
  {
    "text": "important for us because our devices for",
    "start": "643860",
    "end": "646019"
  },
  {
    "text": "sure are not living on a kubernetes",
    "start": "646019",
    "end": "647459"
  },
  {
    "text": "cluster let alone the same kubernetes",
    "start": "647459",
    "end": "649079"
  },
  {
    "text": "cluster so we need this functionality",
    "start": "649079",
    "end": "651360"
  },
  {
    "text": "this is the main reason I think that we",
    "start": "651360",
    "end": "653459"
  },
  {
    "text": "chose Thanos is because we were able to",
    "start": "653459",
    "end": "655380"
  },
  {
    "text": "have",
    "start": "655380",
    "end": "656579"
  },
  {
    "text": "um",
    "start": "656579",
    "end": "657720"
  },
  {
    "text": "the sort of coexistence of the sidecar",
    "start": "657720",
    "end": "660000"
  },
  {
    "text": "model with the routing receive model in",
    "start": "660000",
    "end": "662279"
  },
  {
    "text": "one Global query view which is really",
    "start": "662279",
    "end": "663839"
  },
  {
    "text": "really nice",
    "start": "663839",
    "end": "665760"
  },
  {
    "text": "so this is how the the architecture kind",
    "start": "665760",
    "end": "667800"
  },
  {
    "text": "of looks for our global view of all",
    "start": "667800",
    "end": "669660"
  },
  {
    "text": "metrics coming from all sources",
    "start": "669660",
    "end": "672360"
  },
  {
    "text": "so everything is written essentially",
    "start": "672360",
    "end": "674760"
  },
  {
    "text": "this is a key kind of compliance driven",
    "start": "674760",
    "end": "677040"
  },
  {
    "text": "architecture",
    "start": "677040",
    "end": "678920"
  },
  {
    "text": "we're in Switzerland they like to have",
    "start": "678920",
    "end": "681600"
  },
  {
    "text": "the data centrally in Switzerland it's",
    "start": "681600",
    "end": "683459"
  },
  {
    "text": "good it's safe it's okay so we want to",
    "start": "683459",
    "end": "686399"
  },
  {
    "text": "put everything centrally we have to do",
    "start": "686399",
    "end": "687959"
  },
  {
    "text": "that so what we do is we have a Ingress",
    "start": "687959",
    "end": "692399"
  },
  {
    "text": "on our Central kubernetes which is",
    "start": "692399",
    "end": "694560"
  },
  {
    "text": "backed by nginx this is nginx Gateway we",
    "start": "694560",
    "end": "696959"
  },
  {
    "text": "can call it and so when we want to write",
    "start": "696959",
    "end": "698880"
  },
  {
    "text": "something we actually write to a public",
    "start": "698880",
    "end": "700260"
  },
  {
    "text": "endpoint and we authenticate with a",
    "start": "700260",
    "end": "702420"
  },
  {
    "text": "client certificate so all of the edge",
    "start": "702420",
    "end": "704459"
  },
  {
    "text": "devices have client certificates which",
    "start": "704459",
    "end": "705779"
  },
  {
    "text": "then get checked by nginx we can also",
    "start": "705779",
    "end": "708779"
  },
  {
    "text": "accept stuff from external kubernetes",
    "start": "708779",
    "end": "711240"
  },
  {
    "text": "clusters so maybe we have Regional hubs",
    "start": "711240",
    "end": "713339"
  },
  {
    "text": "sort of different kubernetes clusters",
    "start": "713339",
    "end": "714899"
  },
  {
    "text": "running in UK wherever Germany all over",
    "start": "714899",
    "end": "718500"
  },
  {
    "text": "the world we can also write metrics to",
    "start": "718500",
    "end": "720480"
  },
  {
    "text": "our Central cluster and then what",
    "start": "720480",
    "end": "723000"
  },
  {
    "text": "happens in nginx is uh we get rooted",
    "start": "723000",
    "end": "726660"
  },
  {
    "text": "based on the header which is the Thanos",
    "start": "726660",
    "end": "728459"
  },
  {
    "text": "tenant header oops",
    "start": "728459",
    "end": "730680"
  },
  {
    "text": "now nginx sends the metrics based on the",
    "start": "730680",
    "end": "734100"
  },
  {
    "text": "value of the Thanos tenant header into",
    "start": "734100",
    "end": "736140"
  },
  {
    "text": "one of several Thanos instances and I'm",
    "start": "736140",
    "end": "738660"
  },
  {
    "text": "not sure what the proper term for",
    "start": "738660",
    "end": "739920"
  },
  {
    "text": "multiple Thanos is Thani Thanos is we",
    "start": "739920",
    "end": "742860"
  },
  {
    "text": "can debate that later",
    "start": "742860",
    "end": "744540"
  },
  {
    "text": "and so there is a dedicated pipeline for",
    "start": "744540",
    "end": "747600"
  },
  {
    "text": "each",
    "start": "747600",
    "end": "748620"
  },
  {
    "text": "Thanos Tenon and we've also got the",
    "start": "748620",
    "end": "750600"
  },
  {
    "text": "Prometheus sidecar running to collect",
    "start": "750600",
    "end": "752100"
  },
  {
    "text": "the local cluster metrics so we have",
    "start": "752100",
    "end": "754320"
  },
  {
    "text": "everything ending up in different",
    "start": "754320",
    "end": "755459"
  },
  {
    "text": "buckets",
    "start": "755459",
    "end": "757880"
  },
  {
    "text": "so what do we mean by a tenant",
    "start": "758600",
    "end": "762000"
  },
  {
    "text": "so for us it's very important that we",
    "start": "762000",
    "end": "763620"
  },
  {
    "text": "don't blow up the ingestion pipeline I'm",
    "start": "763620",
    "end": "765660"
  },
  {
    "text": "sure maybe you have some experience with",
    "start": "765660",
    "end": "768180"
  },
  {
    "text": "cardinality explosion this has happened",
    "start": "768180",
    "end": "770339"
  },
  {
    "text": "in influx and it ain't pretty our",
    "start": "770339",
    "end": "772740"
  },
  {
    "text": "problem is that we're kind of at the uh",
    "start": "772740",
    "end": "775740"
  },
  {
    "text": "at the mercy of the service teams so if",
    "start": "775740",
    "end": "778139"
  },
  {
    "text": "the service teams decide to make a new",
    "start": "778139",
    "end": "779940"
  },
  {
    "text": "metric which labels on domain then we",
    "start": "779940",
    "end": "783060"
  },
  {
    "text": "are that's horrible cardinality goes",
    "start": "783060",
    "end": "785820"
  },
  {
    "text": "through the roof",
    "start": "785820",
    "end": "787079"
  },
  {
    "text": "we did it to ourselves once",
    "start": "787079",
    "end": "789480"
  },
  {
    "text": "um so we actually sort of have a hard",
    "start": "789480",
    "end": "792000"
  },
  {
    "text": "tendency so we have a dedicated pipeline",
    "start": "792000",
    "end": "793980"
  },
  {
    "text": "for each service component each service",
    "start": "793980",
    "end": "795959"
  },
  {
    "text": "team that may want to write metrics into",
    "start": "795959",
    "end": "797399"
  },
  {
    "text": "Thanos",
    "start": "797399",
    "end": "799820"
  },
  {
    "text": "so this is kind of yeah so we have sort",
    "start": "799860",
    "end": "801600"
  },
  {
    "text": "of uh proxy teams Wan teams and this",
    "start": "801600",
    "end": "805200"
  },
  {
    "text": "also extends to Cluster metrics so it's",
    "start": "805200",
    "end": "808200"
  },
  {
    "text": "a similar kind of thing we have a",
    "start": "808200",
    "end": "809519"
  },
  {
    "text": "dedicated Pipeline and that's it",
    "start": "809519",
    "end": "813120"
  },
  {
    "text": "we can also help with the cardinality",
    "start": "813120",
    "end": "815459"
  },
  {
    "text": "explosion mitigation by doing active",
    "start": "815459",
    "end": "818279"
  },
  {
    "text": "series limiting so this was a new",
    "start": "818279",
    "end": "819899"
  },
  {
    "text": "feature in Thanos 0.29 I think that was",
    "start": "819899",
    "end": "822240"
  },
  {
    "text": "back in November last year so what",
    "start": "822240",
    "end": "825180"
  },
  {
    "text": "effectively happens is the routing",
    "start": "825180",
    "end": "826620"
  },
  {
    "text": "receiver is constantly querying the",
    "start": "826620",
    "end": "828600"
  },
  {
    "text": "ingesting receiver via a meta Monitor",
    "start": "828600",
    "end": "831000"
  },
  {
    "text": "and it effectively says how many series",
    "start": "831000",
    "end": "833519"
  },
  {
    "text": "are coming in for this Tenon and then it",
    "start": "833519",
    "end": "835500"
  },
  {
    "text": "checks against the configured series",
    "start": "835500",
    "end": "836820"
  },
  {
    "text": "limit and if it if the current active",
    "start": "836820",
    "end": "839579"
  },
  {
    "text": "series is greater than the series limit",
    "start": "839579",
    "end": "840959"
  },
  {
    "text": "it will block the request so we have",
    "start": "840959",
    "end": "843000"
  },
  {
    "text": "this kind of two different ways of",
    "start": "843000",
    "end": "844260"
  },
  {
    "text": "mitigating the effects of cardinality",
    "start": "844260",
    "end": "845880"
  },
  {
    "text": "explosion it's very important when we",
    "start": "845880",
    "end": "847800"
  },
  {
    "text": "don't have real control over what the",
    "start": "847800",
    "end": "849660"
  },
  {
    "text": "service teams are doing",
    "start": "849660",
    "end": "852440"
  },
  {
    "text": "how do we actually collect the metrics",
    "start": "853019",
    "end": "854639"
  },
  {
    "text": "on the edge devices",
    "start": "854639",
    "end": "856440"
  },
  {
    "text": "so the metrics are mapped to tenants in",
    "start": "856440",
    "end": "859019"
  },
  {
    "text": "the device we have a Prometheus instance",
    "start": "859019",
    "end": "860639"
  },
  {
    "text": "which is running in the device and we",
    "start": "860639",
    "end": "863220"
  },
  {
    "text": "have a telegraph instance which is",
    "start": "863220",
    "end": "865019"
  },
  {
    "text": "actually scraping metrics and pushing",
    "start": "865019",
    "end": "866760"
  },
  {
    "text": "them into Prometheus Prometheus then",
    "start": "866760",
    "end": "869220"
  },
  {
    "text": "pushes everything to a telegraph",
    "start": "869220",
    "end": "870660"
  },
  {
    "text": "producer and the producer then remote",
    "start": "870660",
    "end": "872820"
  },
  {
    "text": "writes everything to Thanos I can",
    "start": "872820",
    "end": "875160"
  },
  {
    "text": "already hear the question why do we have",
    "start": "875160",
    "end": "876420"
  },
  {
    "text": "this guy",
    "start": "876420",
    "end": "877680"
  },
  {
    "text": "there is a reason",
    "start": "877680",
    "end": "879000"
  },
  {
    "text": "and the reason we need the telegraph",
    "start": "879000",
    "end": "880560"
  },
  {
    "text": "producer is because Prometheus has",
    "start": "880560",
    "end": "882899"
  },
  {
    "text": "separate shards or separate kind of",
    "start": "882899",
    "end": "884940"
  },
  {
    "text": "streams to which",
    "start": "884940",
    "end": "886860"
  },
  {
    "text": "each metric is written now what happens",
    "start": "886860",
    "end": "889860"
  },
  {
    "text": "if one of the tenants goes crazy is it",
    "start": "889860",
    "end": "893220"
  },
  {
    "text": "can actually fill the buffer it can fill",
    "start": "893220",
    "end": "894600"
  },
  {
    "text": "the stream and when that happens all",
    "start": "894600",
    "end": "897540"
  },
  {
    "text": "streams fail in Prometheus so one tenant",
    "start": "897540",
    "end": "900660"
  },
  {
    "text": "can break everything on the device we",
    "start": "900660",
    "end": "902639"
  },
  {
    "text": "cannot have a hard tenancy Pipeline on",
    "start": "902639",
    "end": "904380"
  },
  {
    "text": "the device so that's a problem",
    "start": "904380",
    "end": "906300"
  },
  {
    "text": "now what we do with the telegraph",
    "start": "906300",
    "end": "908519"
  },
  {
    "text": "producer buffer is we actually",
    "start": "908519",
    "end": "910260"
  },
  {
    "text": "constantly read stuff from Prometheus so",
    "start": "910260",
    "end": "911940"
  },
  {
    "text": "the Prometheus cue doesn't get full the",
    "start": "911940",
    "end": "915060"
  },
  {
    "text": "telegraph producer is then a nice buffer",
    "start": "915060",
    "end": "916800"
  },
  {
    "text": "and it keeps the metrics flowing on the",
    "start": "916800",
    "end": "918360"
  },
  {
    "text": "devices and then that's why we have this",
    "start": "918360",
    "end": "920040"
  },
  {
    "text": "guy remote writing",
    "start": "920040",
    "end": "921600"
  },
  {
    "text": "the config is quite simple here",
    "start": "921600",
    "end": "923699"
  },
  {
    "text": "so you can see we basically match on",
    "start": "923699",
    "end": "926100"
  },
  {
    "text": "particular metric names and they get",
    "start": "926100",
    "end": "928680"
  },
  {
    "text": "written into a service component label",
    "start": "928680",
    "end": "930899"
  },
  {
    "text": "and then in the telegraph output we map",
    "start": "930899",
    "end": "934980"
  },
  {
    "text": "the Thanos tenant header based on the",
    "start": "934980",
    "end": "937560"
  },
  {
    "text": "value of the service component label",
    "start": "937560",
    "end": "939180"
  },
  {
    "text": "there",
    "start": "939180",
    "end": "941360"
  },
  {
    "text": "now for the read path",
    "start": "942139",
    "end": "944820"
  },
  {
    "text": "the goal is to have a global view again",
    "start": "944820",
    "end": "946380"
  },
  {
    "text": "so regardless of whether it came from a",
    "start": "946380",
    "end": "949019"
  },
  {
    "text": "edge device or if it came from the",
    "start": "949019",
    "end": "950639"
  },
  {
    "text": "cluster or a different cluster we want",
    "start": "950639",
    "end": "952980"
  },
  {
    "text": "to be able to query it with one instance",
    "start": "952980",
    "end": "954480"
  },
  {
    "text": "of of Thanos of Thanos query or grafana",
    "start": "954480",
    "end": "956820"
  },
  {
    "text": "or whatever",
    "start": "956820",
    "end": "958199"
  },
  {
    "text": "so the naive approach would be to just",
    "start": "958199",
    "end": "960779"
  },
  {
    "text": "add a store API for each bucket store",
    "start": "960779",
    "end": "963180"
  },
  {
    "text": "API is doing the querying is actually",
    "start": "963180",
    "end": "965160"
  },
  {
    "text": "fetching the data from the buckets plug",
    "start": "965160",
    "end": "967500"
  },
  {
    "text": "those into a single query have a query",
    "start": "967500",
    "end": "969660"
  },
  {
    "text": "front end if you like and say job solved",
    "start": "969660",
    "end": "974839"
  },
  {
    "text": "what we have to think about is query a",
    "start": "975120",
    "end": "976800"
  },
  {
    "text": "quality of service so in this",
    "start": "976800",
    "end": "978779"
  },
  {
    "text": "architecture all the users have the same",
    "start": "978779",
    "end": "980820"
  },
  {
    "text": "priority so oh sorry",
    "start": "980820",
    "end": "984120"
  },
  {
    "text": "I skipped ahead the problem here is that",
    "start": "984120",
    "end": "986760"
  },
  {
    "text": "you have one entry point for the queries",
    "start": "986760",
    "end": "988920"
  },
  {
    "text": "and so this means that if you have an",
    "start": "988920",
    "end": "991260"
  },
  {
    "text": "important user like the portal portals",
    "start": "991260",
    "end": "993120"
  },
  {
    "text": "our customer facing side we cannot in",
    "start": "993120",
    "end": "995579"
  },
  {
    "text": "this setup we cannot say that portal",
    "start": "995579",
    "end": "998699"
  },
  {
    "text": "should have more importance",
    "start": "998699",
    "end": "1000440"
  },
  {
    "text": "so what we can do is we can introduce",
    "start": "1000440",
    "end": "1001880"
  },
  {
    "text": "user cues so this is separate instances",
    "start": "1001880",
    "end": "1004399"
  },
  {
    "text": "of the query which are dedicated for",
    "start": "1004399",
    "end": "1007040"
  },
  {
    "text": "particular users like the portal like",
    "start": "1007040",
    "end": "1009800"
  },
  {
    "text": "the ruler like grafana",
    "start": "1009800",
    "end": "1013240"
  },
  {
    "text": "this makes it slightly more complicated",
    "start": "1013399",
    "end": "1016180"
  },
  {
    "text": "but we can at least then guarantee that",
    "start": "1016180",
    "end": "1018740"
  },
  {
    "text": "the portal team will get one third of",
    "start": "1018740",
    "end": "1020839"
  },
  {
    "text": "the available kind of",
    "start": "1020839",
    "end": "1022880"
  },
  {
    "text": "power which is available for reading",
    "start": "1022880",
    "end": "1024558"
  },
  {
    "text": "queries right",
    "start": "1024559",
    "end": "1026780"
  },
  {
    "text": "can we do better",
    "start": "1026780",
    "end": "1028160"
  },
  {
    "text": "so can we actually prioritize the portal",
    "start": "1028160",
    "end": "1030918"
  },
  {
    "text": "queries if we want to",
    "start": "1030919",
    "end": "1033319"
  },
  {
    "text": "it turns out that we can and what we can",
    "start": "1033319",
    "end": "1035298"
  },
  {
    "text": "do is we can effectively layer queries",
    "start": "1035299",
    "end": "1037418"
  },
  {
    "text": "and we basically introduce bottlenecks",
    "start": "1037419",
    "end": "1040160"
  },
  {
    "text": "which are intended to make the portal",
    "start": "1040160",
    "end": "1042199"
  },
  {
    "text": "query",
    "start": "1042199",
    "end": "1043640"
  },
  {
    "text": "um higher priority so what we have here",
    "start": "1043640",
    "end": "1045980"
  },
  {
    "text": "is we have two queries the the ruler and",
    "start": "1045980",
    "end": "1047720"
  },
  {
    "text": "the grafana query they have equal",
    "start": "1047720",
    "end": "1049100"
  },
  {
    "text": "priority in this queue but they then get",
    "start": "1049100",
    "end": "1051440"
  },
  {
    "text": "bottlenecked here and so at least 50 of",
    "start": "1051440",
    "end": "1054559"
  },
  {
    "text": "the available kind of um",
    "start": "1054559",
    "end": "1056480"
  },
  {
    "text": "let's say store requests are reserved",
    "start": "1056480",
    "end": "1058700"
  },
  {
    "text": "for the portal query I I didn't come up",
    "start": "1058700",
    "end": "1061400"
  },
  {
    "text": "with this this is actually taken from a",
    "start": "1061400",
    "end": "1062960"
  },
  {
    "text": "really nice feature in grafana Loki 2.8",
    "start": "1062960",
    "end": "1065419"
  },
  {
    "text": "where they introduced a sort of",
    "start": "1065419",
    "end": "1067039"
  },
  {
    "text": "cascading or stacked query scheduler and",
    "start": "1067039",
    "end": "1070100"
  },
  {
    "text": "we decided to see if we could try this",
    "start": "1070100",
    "end": "1071960"
  },
  {
    "text": "in Thanos and it turned out that it",
    "start": "1071960",
    "end": "1073220"
  },
  {
    "text": "worked pretty nicely",
    "start": "1073220",
    "end": "1075940"
  },
  {
    "text": "so",
    "start": "1076280",
    "end": "1077539"
  },
  {
    "text": "this is where we are today",
    "start": "1077539",
    "end": "1079600"
  },
  {
    "text": "we have the new metrics pipeline we also",
    "start": "1079600",
    "end": "1082160"
  },
  {
    "text": "have the login pipeline working and what",
    "start": "1082160",
    "end": "1083960"
  },
  {
    "text": "we want to think about now is where are",
    "start": "1083960",
    "end": "1085280"
  },
  {
    "text": "we going with this how are we going to",
    "start": "1085280",
    "end": "1086720"
  },
  {
    "text": "achieve our goals going forward and the",
    "start": "1086720",
    "end": "1088760"
  },
  {
    "text": "goal is going forward really you know at",
    "start": "1088760",
    "end": "1090080"
  },
  {
    "text": "the moment we're not delivering value we",
    "start": "1090080",
    "end": "1092000"
  },
  {
    "text": "have a fancy pipelines but we're not",
    "start": "1092000",
    "end": "1094220"
  },
  {
    "text": "really delivering value because mission",
    "start": "1094220",
    "end": "1095480"
  },
  {
    "text": "control is still getting a lot of noise",
    "start": "1095480",
    "end": "1097600"
  },
  {
    "text": "so our job is done when mission control",
    "start": "1097600",
    "end": "1099980"
  },
  {
    "text": "is happy",
    "start": "1099980",
    "end": "1101360"
  },
  {
    "text": "so we want smarter alerts and we want",
    "start": "1101360",
    "end": "1103820"
  },
  {
    "text": "smarter alert handling so when an alert",
    "start": "1103820",
    "end": "1105919"
  },
  {
    "text": "comes in what can we how can we handle",
    "start": "1105919",
    "end": "1108380"
  },
  {
    "text": "it better",
    "start": "1108380",
    "end": "1110679"
  },
  {
    "text": "let's say the new pipeline so we have",
    "start": "1112160",
    "end": "1115100"
  },
  {
    "text": "our environment agnostic",
    "start": "1115100",
    "end": "1118120"
  },
  {
    "text": "inputs they're going to the logs backend",
    "start": "1118120",
    "end": "1120500"
  },
  {
    "text": "the metrics backend this is all working",
    "start": "1120500",
    "end": "1122000"
  },
  {
    "text": "really nicely",
    "start": "1122000",
    "end": "1123200"
  },
  {
    "text": "but we still have this",
    "start": "1123200",
    "end": "1124820"
  },
  {
    "text": "implication engine this black box which",
    "start": "1124820",
    "end": "1126980"
  },
  {
    "text": "we we still don't really know what to do",
    "start": "1126980",
    "end": "1128539"
  },
  {
    "text": "with",
    "start": "1128539",
    "end": "1130039"
  },
  {
    "text": "the idea is that we're going to use the",
    "start": "1130039",
    "end": "1132320"
  },
  {
    "text": "alert manager and actually we we say",
    "start": "1132320",
    "end": "1134299"
  },
  {
    "text": "we're going to we're currently feeding",
    "start": "1134299",
    "end": "1136220"
  },
  {
    "text": "alerts into alert manager so when our",
    "start": "1136220",
    "end": "1139460"
  },
  {
    "text": "back ends generate alerts they send to",
    "start": "1139460",
    "end": "1143240"
  },
  {
    "text": "alert manager and the alert manager",
    "start": "1143240",
    "end": "1144980"
  },
  {
    "text": "actually channels them into our piece of",
    "start": "1144980",
    "end": "1146840"
  },
  {
    "text": "software which is our business logic",
    "start": "1146840",
    "end": "1148400"
  },
  {
    "text": "which is called alert Handler",
    "start": "1148400",
    "end": "1150080"
  },
  {
    "text": "and alert Handler is",
    "start": "1150080",
    "end": "1152200"
  },
  {
    "text": "effectively an interface which allows us",
    "start": "1152200",
    "end": "1154880"
  },
  {
    "text": "to insert additional logic so we can",
    "start": "1154880",
    "end": "1158059"
  },
  {
    "text": "enrich alerts with",
    "start": "1158059",
    "end": "1160160"
  },
  {
    "text": "information from a database like a run",
    "start": "1160160",
    "end": "1162140"
  },
  {
    "text": "book for example",
    "start": "1162140",
    "end": "1163480"
  },
  {
    "text": "we can decide to group alerts we can",
    "start": "1163480",
    "end": "1167120"
  },
  {
    "text": "cross correlate alerts one example of",
    "start": "1167120",
    "end": "1169220"
  },
  {
    "text": "why this is important could be when",
    "start": "1169220",
    "end": "1171140"
  },
  {
    "text": "there are um",
    "start": "1171140",
    "end": "1172700"
  },
  {
    "text": "an ISP outage so if there's an ISP",
    "start": "1172700",
    "end": "1175220"
  },
  {
    "text": "outage a whole ISP goes down you might",
    "start": "1175220",
    "end": "1177200"
  },
  {
    "text": "expect maybe all hosts connected to this",
    "start": "1177200",
    "end": "1180080"
  },
  {
    "text": "ISP to go down so you're going to have",
    "start": "1180080",
    "end": "1181700"
  },
  {
    "text": "100 Tiki Snapseed if you pass them",
    "start": "1181700",
    "end": "1183919"
  },
  {
    "text": "through a smart alert Handler you can",
    "start": "1183919",
    "end": "1185299"
  },
  {
    "text": "say ah look this IP ISB is down",
    "start": "1185299",
    "end": "1187039"
  },
  {
    "text": "therefore all these connected hosts will",
    "start": "1187039",
    "end": "1189380"
  },
  {
    "text": "also be down and I group those tickets",
    "start": "1189380",
    "end": "1191240"
  },
  {
    "text": "together",
    "start": "1191240",
    "end": "1192679"
  },
  {
    "text": "and this will reduce noise and reduce",
    "start": "1192679",
    "end": "1194539"
  },
  {
    "text": "toil in MC which is a really this is",
    "start": "1194539",
    "end": "1197120"
  },
  {
    "text": "this is the main target that we want to",
    "start": "1197120",
    "end": "1199160"
  },
  {
    "text": "do",
    "start": "1199160",
    "end": "1201340"
  },
  {
    "text": "what's up",
    "start": "1202039",
    "end": "1204799"
  },
  {
    "text": "so this is the goal this is actually to",
    "start": "1204799",
    "end": "1206780"
  },
  {
    "text": "to build the unified alerting pipeline",
    "start": "1206780",
    "end": "1208960"
  },
  {
    "text": "this is now where our Focus lies so we",
    "start": "1208960",
    "end": "1211760"
  },
  {
    "text": "have the um we have the the back ends",
    "start": "1211760",
    "end": "1214460"
  },
  {
    "text": "which are which are running really",
    "start": "1214460",
    "end": "1215780"
  },
  {
    "text": "nicely a key thing about the alert",
    "start": "1215780",
    "end": "1219380"
  },
  {
    "text": "Handler component is that we've designed",
    "start": "1219380",
    "end": "1220820"
  },
  {
    "text": "it as a kubernetes operator and what",
    "start": "1220820",
    "end": "1222980"
  },
  {
    "text": "this means is that service teams can",
    "start": "1222980",
    "end": "1224600"
  },
  {
    "text": "actually break open the black box and",
    "start": "1224600",
    "end": "1227240"
  },
  {
    "text": "they can configure the alert Handler by",
    "start": "1227240",
    "end": "1230539"
  },
  {
    "text": "themselves so they can enrich the alerts",
    "start": "1230539",
    "end": "1233000"
  },
  {
    "text": "however they like they can they can also",
    "start": "1233000",
    "end": "1235880"
  },
  {
    "text": "create the alerts however they like they",
    "start": "1235880",
    "end": "1237320"
  },
  {
    "text": "have the Prometheus ruler right so we",
    "start": "1237320",
    "end": "1239179"
  },
  {
    "text": "really empower the service teams to tell",
    "start": "1239179",
    "end": "1241100"
  },
  {
    "text": "us how alert should be handled and we",
    "start": "1241100",
    "end": "1243440"
  },
  {
    "text": "give them the tooling that which which",
    "start": "1243440",
    "end": "1245480"
  },
  {
    "text": "lets them happy",
    "start": "1245480",
    "end": "1249039"
  },
  {
    "text": "so",
    "start": "1249500",
    "end": "1251480"
  },
  {
    "text": "in conclusion",
    "start": "1251480",
    "end": "1253220"
  },
  {
    "text": "I think the scalability dragon is sort",
    "start": "1253220",
    "end": "1255980"
  },
  {
    "text": "of there for everybody everybody will",
    "start": "1255980",
    "end": "1257419"
  },
  {
    "text": "fight against this at some point for us",
    "start": "1257419",
    "end": "1259760"
  },
  {
    "text": "it was a big challenge scalability going",
    "start": "1259760",
    "end": "1262580"
  },
  {
    "text": "forward and um",
    "start": "1262580",
    "end": "1265039"
  },
  {
    "text": "dealing with new environments but",
    "start": "1265039",
    "end": "1267740"
  },
  {
    "text": "I think that we are doing well on our",
    "start": "1267740",
    "end": "1269980"
  },
  {
    "text": "implementation of the action plan",
    "start": "1269980",
    "end": "1273140"
  },
  {
    "text": "so what we now need to focus on is",
    "start": "1273140",
    "end": "1276260"
  },
  {
    "text": "actually making use of the raw",
    "start": "1276260",
    "end": "1278360"
  },
  {
    "text": "observability data to actually let's say",
    "start": "1278360",
    "end": "1280760"
  },
  {
    "text": "take the the pillars of observability",
    "start": "1280760",
    "end": "1282799"
  },
  {
    "text": "and actually make it valuable this is",
    "start": "1282799",
    "end": "1285020"
  },
  {
    "text": "the the next steps so hopefully next",
    "start": "1285020",
    "end": "1287059"
  },
  {
    "text": "year we can have a have a review",
    "start": "1287059",
    "end": "1290299"
  },
  {
    "text": "so cheers to 100K plus hosts and uh",
    "start": "1290299",
    "end": "1293360"
  },
  {
    "text": "thank you very much I just want to",
    "start": "1293360",
    "end": "1294799"
  },
  {
    "text": "mention we are hiring so we're also",
    "start": "1294799",
    "end": "1297500"
  },
  {
    "text": "growing internally and if you'd like to",
    "start": "1297500",
    "end": "1300200"
  },
  {
    "text": "if you're interested then please come",
    "start": "1300200",
    "end": "1301580"
  },
  {
    "text": "say hi and thank you very much",
    "start": "1301580",
    "end": "1305320"
  },
  {
    "text": "[Applause]",
    "start": "1305320",
    "end": "1312620"
  },
  {
    "text": "any questions okay we have two here",
    "start": "1312620",
    "end": "1317020"
  },
  {
    "text": "um I'm interested to know how the",
    "start": "1322340",
    "end": "1323960"
  },
  {
    "text": "integration between the alert manager",
    "start": "1323960",
    "end": "1325880"
  },
  {
    "text": "and your custom alert Handler works like",
    "start": "1325880",
    "end": "1327799"
  },
  {
    "text": "is it a web hook or how does how do they",
    "start": "1327799",
    "end": "1330140"
  },
  {
    "text": "interact technically",
    "start": "1330140",
    "end": "1331820"
  },
  {
    "text": "so we have a custom channel it's like a",
    "start": "1331820",
    "end": "1334640"
  },
  {
    "text": "web hook channel in the alert manager",
    "start": "1334640",
    "end": "1336620"
  },
  {
    "text": "and so this is the link it's it's a web",
    "start": "1336620",
    "end": "1338840"
  },
  {
    "text": "hook between the alert Handler and the",
    "start": "1338840",
    "end": "1340700"
  },
  {
    "text": "alert manager",
    "start": "1340700",
    "end": "1343360"
  },
  {
    "text": "sorry I'm just wondering at your scale",
    "start": "1345559",
    "end": "1347659"
  },
  {
    "text": "have you ever seen the issue when let's",
    "start": "1347659",
    "end": "1350000"
  },
  {
    "text": "say you upgrade premiers restarted and",
    "start": "1350000",
    "end": "1353120"
  },
  {
    "text": "it consumes lots of memory and time in",
    "start": "1353120",
    "end": "1356360"
  },
  {
    "text": "order to process the files in right",
    "start": "1356360",
    "end": "1358580"
  },
  {
    "text": "ahead log directory",
    "start": "1358580",
    "end": "1361760"
  },
  {
    "text": "so we've seen something similar in our",
    "start": "1361760",
    "end": "1363679"
  },
  {
    "text": "receivers this kind of writer hag log",
    "start": "1363679",
    "end": "1365659"
  },
  {
    "text": "replay is that the sort of issue that",
    "start": "1365659",
    "end": "1368419"
  },
  {
    "text": "you're talking about now",
    "start": "1368419",
    "end": "1370280"
  },
  {
    "text": "um yeah I mean yeah yeah and how do you",
    "start": "1370280",
    "end": "1372799"
  },
  {
    "text": "deal with this one",
    "start": "1372799",
    "end": "1374679"
  },
  {
    "text": "increasing the memory have you found",
    "start": "1374679",
    "end": "1377059"
  },
  {
    "text": "some something yeah so what we do is we",
    "start": "1377059",
    "end": "1379520"
  },
  {
    "text": "we try and keep a reasonable we try and",
    "start": "1379520",
    "end": "1381919"
  },
  {
    "text": "balance the retention so we keep the",
    "start": "1381919",
    "end": "1383780"
  },
  {
    "text": "retention quite low actually like about",
    "start": "1383780",
    "end": "1385340"
  },
  {
    "text": "six hours in the receivers so we don't",
    "start": "1385340",
    "end": "1387500"
  },
  {
    "text": "have huge retention because that'll just",
    "start": "1387500",
    "end": "1389000"
  },
  {
    "text": "you'll be murdered",
    "start": "1389000",
    "end": "1390880"
  },
  {
    "text": "also you can scale out horizontally to",
    "start": "1390880",
    "end": "1393559"
  },
  {
    "text": "reduce the number of series which each",
    "start": "1393559",
    "end": "1395419"
  },
  {
    "text": "receive",
    "start": "1395419",
    "end": "1396700"
  },
  {
    "text": "is actually handling so we have",
    "start": "1396700",
    "end": "1400400"
  },
  {
    "text": "I think our sort of let's say",
    "start": "1400400",
    "end": "1402620"
  },
  {
    "text": "empirically found guidelines about 200k",
    "start": "1402620",
    "end": "1404960"
  },
  {
    "text": "200 000 series",
    "start": "1404960",
    "end": "1407120"
  },
  {
    "text": "or 160 000 series per gigabyte of ram",
    "start": "1407120",
    "end": "1410380"
  },
  {
    "text": "please don't quote me on that now I've",
    "start": "1410380",
    "end": "1412700"
  },
  {
    "text": "said it but",
    "start": "1412700",
    "end": "1413840"
  },
  {
    "text": "um so this is our sort of empirically",
    "start": "1413840",
    "end": "1416600"
  },
  {
    "text": "found guideline for",
    "start": "1416600",
    "end": "1418220"
  },
  {
    "text": "um how much RAM you need per",
    "start": "1418220",
    "end": "1420080"
  },
  {
    "text": "chunk of series and then this is this we",
    "start": "1420080",
    "end": "1422240"
  },
  {
    "text": "just kind of scale horizontally or",
    "start": "1422240",
    "end": "1423740"
  },
  {
    "text": "vertically to to meet the demands and we",
    "start": "1423740",
    "end": "1426200"
  },
  {
    "text": "have um we have the active series",
    "start": "1426200",
    "end": "1428120"
  },
  {
    "text": "limiting so we can we receive alerts",
    "start": "1428120",
    "end": "1430940"
  },
  {
    "text": "when let's say 70 of the of the active",
    "start": "1430940",
    "end": "1434539"
  },
  {
    "text": "series limit is met and so then we can",
    "start": "1434539",
    "end": "1436400"
  },
  {
    "text": "go and have a look we check the",
    "start": "1436400",
    "end": "1437600"
  },
  {
    "text": "resources and usually that's enough to",
    "start": "1437600",
    "end": "1439460"
  },
  {
    "text": "get a prompt before things actually turn",
    "start": "1439460",
    "end": "1441260"
  },
  {
    "text": "into fire so",
    "start": "1441260",
    "end": "1443600"
  },
  {
    "text": "great may we have time for one quick",
    "start": "1443600",
    "end": "1446059"
  },
  {
    "text": "question if there's any one more",
    "start": "1446059",
    "end": "1450340"
  },
  {
    "text": "okay thank you thank you very much",
    "start": "1451100",
    "end": "1455200"
  },
  {
    "text": "we have now 10",
    "start": "1458179",
    "end": "1460960"
  }
]