[
  {
    "text": "hello everyone my name is B sh I'm a",
    "start": "280",
    "end": "2760"
  },
  {
    "text": "Staff software engineer in LinkedIn and",
    "start": "2760",
    "end": "4359"
  },
  {
    "text": "I'm here to talk to you about what it",
    "start": "4359",
    "end": "5920"
  },
  {
    "text": "was like to design and operate an XDS",
    "start": "5920",
    "end": "8280"
  },
  {
    "text": "control plane for the LinkedIn",
    "start": "8280",
    "end": "10040"
  },
  {
    "text": "scale so first a little bit of",
    "start": "10040",
    "end": "12440"
  },
  {
    "text": "background as to you know why we're here",
    "start": "12440",
    "end": "14280"
  },
  {
    "text": "and what we're doing at LinkedIn",
    "start": "14280",
    "end": "16400"
  },
  {
    "text": "linkedin's not much of a JPC shop just",
    "start": "16400",
    "end": "18920"
  },
  {
    "text": "yet but we're making big efforts in that",
    "start": "18920",
    "end": "20840"
  },
  {
    "text": "direction with Envoy and JPC proxy list",
    "start": "20840",
    "end": "23720"
  },
  {
    "text": "which I'll talk about in a second today",
    "start": "23720",
    "end": "26560"
  },
  {
    "text": "everything is built on top of our own",
    "start": "26560",
    "end": "28400"
  },
  {
    "text": "stack which is called rley which is it's",
    "start": "28400",
    "end": "30359"
  },
  {
    "text": "basically just a rest Json framework and",
    "start": "30359",
    "end": "33040"
  },
  {
    "text": "the control plane for rley is Zookeeper",
    "start": "33040",
    "end": "34879"
  },
  {
    "text": "what that means is that zookeeper stores",
    "start": "34879",
    "end": "37160"
  },
  {
    "text": "all of the service Discovery",
    "start": "37160",
    "end": "38920"
  },
  {
    "text": "configuration such as you know routes",
    "start": "38920",
    "end": "40640"
  },
  {
    "text": "load balancing parameters timeouts Etc",
    "start": "40640",
    "end": "43879"
  },
  {
    "text": "each server registers itself to",
    "start": "43879",
    "end": "46360"
  },
  {
    "text": "zookeeper by adding a you know an AAL Z",
    "start": "46360",
    "end": "49000"
  },
  {
    "text": "node in the corresponding cluster and",
    "start": "49000",
    "end": "51120"
  },
  {
    "text": "then clients then set watches on those",
    "start": "51120",
    "end": "53520"
  },
  {
    "text": "clusters and then get notified whenever",
    "start": "53520",
    "end": "55120"
  },
  {
    "text": "the cluster changes this way uh when",
    "start": "55120",
    "end": "58359"
  },
  {
    "text": "they're trying to send requests to a",
    "start": "58359",
    "end": "59480"
  },
  {
    "text": "specific service they look up the",
    "start": "59480",
    "end": "60800"
  },
  {
    "text": "cluster that that service belongs to and",
    "start": "60800",
    "end": "62879"
  },
  {
    "text": "then get a host list directly from",
    "start": "62879",
    "end": "64839"
  },
  {
    "text": "zuker so but you know for those of you",
    "start": "64840",
    "end": "67600"
  },
  {
    "text": "who don't already know this zookeeper",
    "start": "67600",
    "end": "69840"
  },
  {
    "text": "has got a bit of a tendency to blow up",
    "start": "69840",
    "end": "72360"
  },
  {
    "text": "whenever you least expect it so um as",
    "start": "72360",
    "end": "75960"
  },
  {
    "text": "we're making a push to GPC and Envoy we",
    "start": "75960",
    "end": "79159"
  },
  {
    "text": "decided to develop our own XDS control",
    "start": "79159",
    "end": "81479"
  },
  {
    "text": "plane that could speak both to Envoy and",
    "start": "81479",
    "end": "83360"
  },
  {
    "text": "GPC but also to the old rley clients",
    "start": "83360",
    "end": "86280"
  },
  {
    "text": "this way we could reduce a load on",
    "start": "86280",
    "end": "87720"
  },
  {
    "text": "zookeeper by having the restle clients",
    "start": "87720",
    "end": "90040"
  },
  {
    "text": "stock to the XTS control plane um and",
    "start": "90040",
    "end": "92399"
  },
  {
    "text": "the way that we did this was basically",
    "start": "92399",
    "end": "93799"
  },
  {
    "text": "replacing the Zookeeper Connection in",
    "start": "93799",
    "end": "95640"
  },
  {
    "text": "those clients with the grp the grpc XDS",
    "start": "95640",
    "end": "98720"
  },
  {
    "text": "connection to the control plane and",
    "start": "98720",
    "end": "100320"
  },
  {
    "text": "having the control plane return uh",
    "start": "100320",
    "end": "102960"
  },
  {
    "text": "basically the Zookeeper data data that",
    "start": "102960",
    "end": "104719"
  },
  {
    "text": "it was used to so what even is XDS",
    "start": "104719",
    "end": "107840"
  },
  {
    "text": "anyway I'm was probably ter me for it a",
    "start": "107840",
    "end": "109079"
  },
  {
    "text": "couple times today but um what it is is",
    "start": "109079",
    "end": "111920"
  },
  {
    "text": "that it's the configuration for onvoy",
    "start": "111920",
    "end": "114840"
  },
  {
    "text": "and it's got two components it's the a",
    "start": "114840",
    "end": "117399"
  },
  {
    "text": "set of protos schemas which Define the",
    "start": "117399",
    "end": "119920"
  },
  {
    "text": "service like service Discovery",
    "start": "119920",
    "end": "121640"
  },
  {
    "text": "configuration or otherwise known as",
    "start": "121640",
    "end": "123799"
  },
  {
    "text": "resources and a protocol for subscribing",
    "start": "123799",
    "end": "126960"
  },
  {
    "text": "to and then receiving updates on those",
    "start": "126960",
    "end": "129560"
  },
  {
    "text": "resources um a little bit more",
    "start": "129560",
    "end": "131440"
  },
  {
    "text": "terminology the DS in XDS stands for",
    "start": "131440",
    "end": "134720"
  },
  {
    "text": "Discovery service and then the X stands",
    "start": "134720",
    "end": "136640"
  },
  {
    "text": "for the resource type that's being",
    "start": "136640",
    "end": "138080"
  },
  {
    "text": "discovered so CDs stands for cluster",
    "start": "138080",
    "end": "140920"
  },
  {
    "text": "Discovery service or RDS is Route",
    "start": "140920",
    "end": "142519"
  },
  {
    "text": "Discovery service it's supported",
    "start": "142519",
    "end": "144800"
  },
  {
    "text": "natively by grpc and what I mean by that",
    "start": "144800",
    "end": "147080"
  },
  {
    "text": "is that a GPC client can directly talk",
    "start": "147080",
    "end": "149200"
  },
  {
    "text": "to the XD control plane and will behave",
    "start": "149200",
    "end": "151879"
  },
  {
    "text": "exactly like Envoy except without having",
    "start": "151879",
    "end": "153879"
  },
  {
    "text": "to have that proxy in the middle so you",
    "start": "153879",
    "end": "156920"
  },
  {
    "text": "basically configure both Envoy and JPC",
    "start": "156920",
    "end": "158959"
  },
  {
    "text": "to just talk to the same XDS control",
    "start": "158959",
    "end": "162599"
  },
  {
    "text": "plane um so what do we want the stack to",
    "start": "162800",
    "end": "166400"
  },
  {
    "text": "look like as we migrate to",
    "start": "166400",
    "end": "168560"
  },
  {
    "text": "grpc um as I mentioned before the new",
    "start": "168560",
    "end": "171280"
  },
  {
    "text": "XDS control plane can support all three",
    "start": "171280",
    "end": "174159"
  },
  {
    "text": "client types and so you know rustly",
    "start": "174159",
    "end": "176920"
  },
  {
    "text": "talking and getting the Zookeeper data",
    "start": "176920",
    "end": "178400"
  },
  {
    "text": "from the XTS control plane while the GPC",
    "start": "178400",
    "end": "181200"
  },
  {
    "text": "and Envoy clients get the corresponding",
    "start": "181200",
    "end": "183480"
  },
  {
    "text": "you know Envoy configuration or XTS",
    "start": "183480",
    "end": "185959"
  },
  {
    "text": "configuration um the cluster",
    "start": "185959",
    "end": "187959"
  },
  {
    "text": "registration which used to happen over",
    "start": "187959",
    "end": "189599"
  },
  {
    "text": "zuker now happens over Kafka because",
    "start": "189599",
    "end": "191879"
  },
  {
    "text": "it's much more",
    "start": "191879",
    "end": "192920"
  },
  {
    "text": "scalable and in the future as we're",
    "start": "192920",
    "end": "196640"
  },
  {
    "text": "migrating towards kubernetes we're",
    "start": "196640",
    "end": "199200"
  },
  {
    "text": "hoping to just completely get rid of or",
    "start": "199200",
    "end": "201920"
  },
  {
    "text": "almost completely get rid of the kfka",
    "start": "201920",
    "end": "203840"
  },
  {
    "text": "registration service because most",
    "start": "203840",
    "end": "205120"
  },
  {
    "text": "Services don't have to have complex",
    "start": "205120",
    "end": "207560"
  },
  {
    "text": "registration logic they just say hey I'm",
    "start": "207560",
    "end": "209599"
  },
  {
    "text": "up I'm the service just send me some",
    "start": "209599",
    "end": "213400"
  },
  {
    "text": "traffic um so how does this how does",
    "start": "213400",
    "end": "216159"
  },
  {
    "text": "this talk apply to you the rest of the",
    "start": "216159",
    "end": "219159"
  },
  {
    "text": "Ser the rest the clients and the JPC and",
    "start": "219159",
    "end": "222239"
  },
  {
    "text": "Envoy clients are all using the same",
    "start": "222239",
    "end": "223840"
  },
  {
    "text": "settings when they're opening the XDS",
    "start": "223840",
    "end": "225400"
  },
  {
    "text": "stream the JPC stream to the XDS control",
    "start": "225400",
    "end": "227879"
  },
  {
    "text": "plane so at this point we can",
    "start": "227879",
    "end": "230760"
  },
  {
    "text": "effectively treat all of those clients",
    "start": "230760",
    "end": "232319"
  },
  {
    "text": "as behaving the same so at this point",
    "start": "232319",
    "end": "235599"
  },
  {
    "text": "this sort of becomes the abstract",
    "start": "235599",
    "end": "237879"
  },
  {
    "text": "problem of scaling out the XDS control",
    "start": "237879",
    "end": "239879"
  },
  {
    "text": "plane for any large service or any large",
    "start": "239879",
    "end": "243000"
  },
  {
    "text": "company and everything at this point",
    "start": "243000",
    "end": "244519"
  },
  {
    "text": "should be applicable to all of",
    "start": "244519",
    "end": "246480"
  },
  {
    "text": "you",
    "start": "246480",
    "end": "248239"
  },
  {
    "text": "so start rolling it out again everything",
    "start": "248239",
    "end": "251280"
  },
  {
    "text": "has got the default settings and uh",
    "start": "251280",
    "end": "253400"
  },
  {
    "text": "start to see some pretty weird traffic",
    "start": "253400",
    "end": "256079"
  },
  {
    "text": "distribution we've got some hosts here",
    "start": "256079",
    "end": "258000"
  },
  {
    "text": "taking 10 times the traffic of the",
    "start": "258000",
    "end": "260720"
  },
  {
    "text": "pretty much the rest of the average in",
    "start": "260720",
    "end": "262199"
  },
  {
    "text": "this case 100K is 100 clients each",
    "start": "262199",
    "end": "266120"
  },
  {
    "text": "requesting and receiving resources so",
    "start": "266120",
    "end": "268000"
  },
  {
    "text": "this is actually really high load um and",
    "start": "268000",
    "end": "271400"
  },
  {
    "text": "they sort of",
    "start": "271400",
    "end": "272560"
  },
  {
    "text": "revealed that we really have to make",
    "start": "272560",
    "end": "274720"
  },
  {
    "text": "sure that the implementation of the ex",
    "start": "274720",
    "end": "276960"
  },
  {
    "text": "control plane is as efficient and as",
    "start": "276960",
    "end": "280240"
  },
  {
    "text": "performant as possible which I'll talk",
    "start": "280240",
    "end": "281840"
  },
  {
    "text": "about a little bit later on but yeah so",
    "start": "281840",
    "end": "284639"
  },
  {
    "text": "what's happening here is that the",
    "start": "284639",
    "end": "286080"
  },
  {
    "text": "default setting for GPC is the pick",
    "start": "286080",
    "end": "289000"
  },
  {
    "text": "first",
    "start": "289000",
    "end": "290240"
  },
  {
    "text": "strategy pick first strategy just picks",
    "start": "290240",
    "end": "292440"
  },
  {
    "text": "the first IP it gets from the DNS record",
    "start": "292440",
    "end": "295919"
  },
  {
    "text": "which at LinkedIn the DNS records are",
    "start": "295919",
    "end": "298800"
  },
  {
    "text": "shuffled every 3 seconds and that's what",
    "start": "298800",
    "end": "301560"
  },
  {
    "text": "the TTL is so we would expect that every",
    "start": "301560",
    "end": "304320"
  },
  {
    "text": "single time it picks an IP it should",
    "start": "304320",
    "end": "305800"
  },
  {
    "text": "pick a random IP so what's happening",
    "start": "305800",
    "end": "308800"
  },
  {
    "text": "like why aren't we getting just a more",
    "start": "308800",
    "end": "310160"
  },
  {
    "text": "even",
    "start": "310160",
    "end": "311600"
  },
  {
    "text": "distribution so it's at this point you",
    "start": "311600",
    "end": "314320"
  },
  {
    "text": "guys get to meet my personal Nemesis uh",
    "start": "314320",
    "end": "316639"
  },
  {
    "text": "RFC",
    "start": "316639",
    "end": "317960"
  },
  {
    "text": "3484 which uh corresponds to uh the IPv6",
    "start": "317960",
    "end": "322759"
  },
  {
    "text": "migration that was actually happening at",
    "start": "322759",
    "end": "324440"
  },
  {
    "text": "the same time as we were rolling this",
    "start": "324440",
    "end": "325759"
  },
  {
    "text": "out see uh little that you know that",
    "start": "325759",
    "end": "329000"
  },
  {
    "text": "when you ask for the oper like ask the",
    "start": "329000",
    "end": "330960"
  },
  {
    "text": "operating system hey what are the IPS",
    "start": "330960",
    "end": "332400"
  },
  {
    "text": "for this DNS record it'll in ipv4 you",
    "start": "332400",
    "end": "335319"
  },
  {
    "text": "get back the IP addresses in the order",
    "start": "335319",
    "end": "337520"
  },
  {
    "text": "that are present in the record in IPv6",
    "start": "337520",
    "end": "340600"
  },
  {
    "text": "you actually get them according to a",
    "start": "340600",
    "end": "342759"
  },
  {
    "text": "very specific set of rules that are",
    "start": "342759",
    "end": "344600"
  },
  {
    "text": "dictated by RFC 3484 and the way that",
    "start": "344600",
    "end": "348199"
  },
  {
    "text": "this works is the IPS are sorted based",
    "start": "348199",
    "end": "351919"
  },
  {
    "text": "on the Target and how close it is to the",
    "start": "351919",
    "end": "354880"
  },
  {
    "text": "source IP so up to the first 64 bits so",
    "start": "354880",
    "end": "357280"
  },
  {
    "text": "you're basically just doing the longest",
    "start": "357280",
    "end": "358680"
  },
  {
    "text": "prefix match so you can see up on the",
    "start": "358680",
    "end": "361240"
  },
  {
    "text": "board here addresses one and four",
    "start": "361240",
    "end": "364160"
  },
  {
    "text": "actually share the same prefix length uh",
    "start": "364160",
    "end": "367599"
  },
  {
    "text": "and so and they have the highest prefix",
    "start": "367599",
    "end": "369880"
  },
  {
    "text": "length so the client is going to try one",
    "start": "369880",
    "end": "372479"
  },
  {
    "text": "of those two first before going down um",
    "start": "372479",
    "end": "376160"
  },
  {
    "text": "in the order of prefix length",
    "start": "376160",
    "end": "378080"
  },
  {
    "text": "so technically you know this is good",
    "start": "378080",
    "end": "381000"
  },
  {
    "text": "that's what you want right because IPv6",
    "start": "381000",
    "end": "382880"
  },
  {
    "text": "addresses are roughly matching to sort",
    "start": "382880",
    "end": "385880"
  },
  {
    "text": "of their geographical location each IPv6",
    "start": "385880",
    "end": "388000"
  },
  {
    "text": "segment is going to go like from you",
    "start": "388000",
    "end": "389319"
  },
  {
    "text": "know continent then country then data",
    "start": "389319",
    "end": "390919"
  },
  {
    "text": "center then rack Etc so you would expect",
    "start": "390919",
    "end": "393520"
  },
  {
    "text": "it to still work roughly as expected but",
    "start": "393520",
    "end": "396960"
  },
  {
    "text": "what ends up happening is that most or",
    "start": "396960",
    "end": "399199"
  },
  {
    "text": "there's some servers that are just",
    "start": "399199",
    "end": "401240"
  },
  {
    "text": "closer than others and no matter how",
    "start": "401240",
    "end": "403080"
  },
  {
    "text": "many times we shifted the host around",
    "start": "403080",
    "end": "404720"
  },
  {
    "text": "like taking them out of different racks",
    "start": "404720",
    "end": "406599"
  },
  {
    "text": "and putting them somewhere else it just",
    "start": "406599",
    "end": "407840"
  },
  {
    "text": "always ended up that some hosts were",
    "start": "407840",
    "end": "409639"
  },
  {
    "text": "taking significantly more traffic than",
    "start": "409639",
    "end": "411240"
  },
  {
    "text": "the others okay",
    "start": "411240",
    "end": "413759"
  },
  {
    "text": "so how do we address this right uh I",
    "start": "413759",
    "end": "416680"
  },
  {
    "text": "guess this is the uh ultimately the",
    "start": "416680",
    "end": "418560"
  },
  {
    "text": "order in which it's going to get those",
    "start": "418560",
    "end": "420120"
  },
  {
    "text": "uh try those hosts so at this point",
    "start": "420120",
    "end": "423879"
  },
  {
    "text": "we're kind of scrambling right we've got",
    "start": "423879",
    "end": "425240"
  },
  {
    "text": "some hosts pretty much saturating the",
    "start": "425240",
    "end": "427680"
  },
  {
    "text": "network cards and then some other hosts",
    "start": "427680",
    "end": "429160"
  },
  {
    "text": "are completely sitting idle so we start",
    "start": "429160",
    "end": "431759"
  },
  {
    "text": "looking at the GPC docs looking at sort",
    "start": "431759",
    "end": "433560"
  },
  {
    "text": "of what's available because we still own",
    "start": "433560",
    "end": "435400"
  },
  {
    "text": "the rest a clients so we can still make",
    "start": "435400",
    "end": "436960"
  },
  {
    "text": "some changes there and we see R Robin",
    "start": "436960",
    "end": "441440"
  },
  {
    "text": "okay so how does r robin look let's take",
    "start": "441440",
    "end": "443319"
  },
  {
    "text": "a like a quick look at what it looks",
    "start": "443319",
    "end": "445000"
  },
  {
    "text": "like uh it's supposed to iterate over",
    "start": "445000",
    "end": "447280"
  },
  {
    "text": "all the sub channels okay and then send",
    "start": "447280",
    "end": "449599"
  },
  {
    "text": "and uh the next just going to pick a",
    "start": "449599",
    "end": "452199"
  },
  {
    "text": "random offset into the list of",
    "start": "452199",
    "end": "453919"
  },
  {
    "text": "subchannels that it has and start",
    "start": "453919",
    "end": "455520"
  },
  {
    "text": "sending traffic to it there okay so",
    "start": "455520",
    "end": "458560"
  },
  {
    "text": "that's it we just turn it on and talk",
    "start": "458560",
    "end": "460160"
  },
  {
    "text": "over right you guys can go home not",
    "start": "460160",
    "end": "464000"
  },
  {
    "text": "really uh because it turns out there's a",
    "start": "464000",
    "end": "466639"
  },
  {
    "text": "little piece of extra information that's",
    "start": "466639",
    "end": "468840"
  },
  {
    "text": "needed and it turns out round robin will",
    "start": "468840",
    "end": "472120"
  },
  {
    "text": "eagerly create connections to every",
    "start": "472120",
    "end": "474720"
  },
  {
    "text": "single Target that it gets from the DNS",
    "start": "474720",
    "end": "477360"
  },
  {
    "text": "resolution which means that it's got",
    "start": "477360",
    "end": "480639"
  },
  {
    "text": "hundreds of thousands of clients each",
    "start": "480639",
    "end": "483360"
  },
  {
    "text": "opening connections to the you know",
    "start": "483360",
    "end": "485560"
  },
  {
    "text": "couple dozen XDS control plane hosts",
    "start": "485560",
    "end": "487759"
  },
  {
    "text": "that we had wait a minute really what",
    "start": "487759",
    "end": "490879"
  },
  {
    "text": "does that look like so suddenly uh got a",
    "start": "490879",
    "end": "494840"
  },
  {
    "text": "couple",
    "start": "494840",
    "end": "495759"
  },
  {
    "text": "hosts you know as those changes are",
    "start": "495759",
    "end": "497919"
  },
  {
    "text": "making their way through the system we",
    "start": "497919",
    "end": "499720"
  },
  {
    "text": "got a couple hosts inexplicably start",
    "start": "499720",
    "end": "501720"
  },
  {
    "text": "running out of memory and crashing so",
    "start": "501720",
    "end": "503759"
  },
  {
    "text": "out of curiosity I take a quick Heap",
    "start": "503759",
    "end": "506199"
  },
  {
    "text": "dump and I see this for those of you who",
    "start": "506199",
    "end": "509080"
  },
  {
    "text": "haven't had the pleasure of you know",
    "start": "509080",
    "end": "511360"
  },
  {
    "text": "looking through go Heap dumps uh for",
    "start": "511360",
    "end": "513640"
  },
  {
    "text": "hours on",
    "start": "513640",
    "end": "514719"
  },
  {
    "text": "end what we're looking at here is that",
    "start": "514719",
    "end": "517518"
  },
  {
    "text": "about 80% of the overall Heap is",
    "start": "517519",
    "end": "520560"
  },
  {
    "text": "actually being used by effectively idle",
    "start": "520560",
    "end": "523120"
  },
  {
    "text": "TLS buffers um and at this point we've",
    "start": "523120",
    "end": "526720"
  },
  {
    "text": "so we had the entire fleet connecting to",
    "start": "526720",
    "end": "528480"
  },
  {
    "text": "just a couple hosts and we can't even",
    "start": "528480",
    "end": "530760"
  },
  {
    "text": "scale it up right if we add a host it",
    "start": "530760",
    "end": "532560"
  },
  {
    "text": "add an extra record in the IP or like an",
    "start": "532560",
    "end": "535040"
  },
  {
    "text": "an extra IP address in the record and",
    "start": "535040",
    "end": "538040"
  },
  {
    "text": "everybody connects to that host too and",
    "start": "538040",
    "end": "539560"
  },
  {
    "text": "it instantly runs out of memory so we're",
    "start": "539560",
    "end": "542000"
  },
  {
    "text": "pretty much screwed right um we can't",
    "start": "542000",
    "end": "544760"
  },
  {
    "text": "even add more hosts we can't do anything",
    "start": "544760",
    "end": "546440"
  },
  {
    "text": "so yeah I mean sure we had a great",
    "start": "546440",
    "end": "547880"
  },
  {
    "text": "traffic distribution everything was uh",
    "start": "547880",
    "end": "549880"
  },
  {
    "text": "perfectly balanced but if you know what",
    "start": "549880",
    "end": "551440"
  },
  {
    "text": "cost we're getting completely",
    "start": "551440",
    "end": "554079"
  },
  {
    "text": "overwhelmed uh and the XDS streams",
    "start": "554079",
    "end": "557040"
  },
  {
    "text": "they're really long living streams so",
    "start": "557040",
    "end": "558600"
  },
  {
    "text": "that traffic is basically just once it's",
    "start": "558600",
    "end": "560200"
  },
  {
    "text": "connected it's there forever so our only",
    "start": "560200",
    "end": "563760"
  },
  {
    "text": "way out is just roll it back go back to",
    "start": "563760",
    "end": "566880"
  },
  {
    "text": "pick first but now I mean we're back to",
    "start": "566880",
    "end": "569839"
  },
  {
    "text": "square one right so what do we do we",
    "start": "569839",
    "end": "572760"
  },
  {
    "text": "what we want is we want to limit the",
    "start": "572760",
    "end": "574760"
  },
  {
    "text": "number of XTS streams that we have on",
    "start": "574760",
    "end": "576560"
  },
  {
    "text": "each host and that way we can hopefully",
    "start": "576560",
    "end": "579920"
  },
  {
    "text": "avoid a massive skew in traffic I mean",
    "start": "579920",
    "end": "581920"
  },
  {
    "text": "it's still going to be pretty bad some",
    "start": "581920",
    "end": "583360"
  },
  {
    "text": "hosts are going to get more streams but",
    "start": "583360",
    "end": "585079"
  },
  {
    "text": "at least there's a limit we can predict",
    "start": "585079",
    "end": "587320"
  },
  {
    "text": "how they're going to behave so we can't",
    "start": "587320",
    "end": "590800"
  },
  {
    "text": "close the port on the JPC the JPC Port",
    "start": "590800",
    "end": "593560"
  },
  {
    "text": "because as soon as that the limit is",
    "start": "593560",
    "end": "595880"
  },
  {
    "text": "reached because the round robin hosts",
    "start": "595880",
    "end": "598240"
  },
  {
    "text": "are going to be taking up all the all",
    "start": "598240",
    "end": "599760"
  },
  {
    "text": "that capacity so that's not that's out",
    "start": "599760",
    "end": "602480"
  },
  {
    "text": "of the question so we have to look at",
    "start": "602480",
    "end": "604320"
  },
  {
    "text": "what we can do at the protocol level so",
    "start": "604320",
    "end": "608040"
  },
  {
    "text": "at the XDS protocol um we can't really",
    "start": "608040",
    "end": "612240"
  },
  {
    "text": "do anything there's no way to tell the a",
    "start": "612240",
    "end": "613959"
  },
  {
    "text": "client to go away and there's no way to",
    "start": "613959",
    "end": "615880"
  },
  {
    "text": "do that at the grpc layer either so we",
    "start": "615880",
    "end": "618519"
  },
  {
    "text": "got to look somewhere else if we just",
    "start": "618519",
    "end": "621160"
  },
  {
    "text": "close the XTS stream what happens well",
    "start": "621160",
    "end": "623240"
  },
  {
    "text": "that's no good the client the pick first",
    "start": "623240",
    "end": "625360"
  },
  {
    "text": "client will always reuse the same",
    "start": "625360",
    "end": "627000"
  },
  {
    "text": "connection that it had if it already has",
    "start": "627000",
    "end": "629360"
  },
  {
    "text": "a successful one so if you close the XDS",
    "start": "629360",
    "end": "632040"
  },
  {
    "text": "stream it's just going to open it again",
    "start": "632040",
    "end": "633480"
  },
  {
    "text": "on that same client okay so can we just",
    "start": "633480",
    "end": "637360"
  },
  {
    "text": "close the connection then well the pick",
    "start": "637360",
    "end": "640000"
  },
  {
    "text": "first client is always just going to go",
    "start": "640000",
    "end": "641639"
  },
  {
    "text": "back through that list in the same order",
    "start": "641639",
    "end": "643519"
  },
  {
    "text": "that it initially saw it so even if you",
    "start": "643519",
    "end": "645160"
  },
  {
    "text": "close the connection that same host its",
    "start": "645160",
    "end": "647920"
  },
  {
    "text": "favorite host is just going to go back",
    "start": "647920",
    "end": "649959"
  },
  {
    "text": "to it and it's going to open another uh",
    "start": "649959",
    "end": "651839"
  },
  {
    "text": "connection",
    "start": "651839",
    "end": "652880"
  },
  {
    "text": "again okay fine have it your way like",
    "start": "652880",
    "end": "656560"
  },
  {
    "text": "what we ended up having to do is",
    "start": "656560",
    "end": "658079"
  },
  {
    "text": "basically anytime a client tries to",
    "start": "658079",
    "end": "660680"
  },
  {
    "text": "connect and sets up an XDS stream we",
    "start": "660680",
    "end": "663360"
  },
  {
    "text": "kill the connection store that client's",
    "start": "663360",
    "end": "665680"
  },
  {
    "text": "address in a in a ban list and",
    "start": "665680",
    "end": "667920"
  },
  {
    "text": "essentially say if that client tries to",
    "start": "667920",
    "end": "669880"
  },
  {
    "text": "reconnect again we we kill the",
    "start": "669880",
    "end": "671839"
  },
  {
    "text": "connection immediately what that means",
    "start": "671839",
    "end": "674120"
  },
  {
    "text": "for the pick first client is pick first",
    "start": "674120",
    "end": "677040"
  },
  {
    "text": "clients will basically recognize that a",
    "start": "677040",
    "end": "679040"
  },
  {
    "text": "connection is bad if it can't do",
    "start": "679040",
    "end": "680200"
  },
  {
    "text": "anything meaningful like open the TLs",
    "start": "680200",
    "end": "681800"
  },
  {
    "text": "connection Etc so as long as that",
    "start": "681800",
    "end": "683440"
  },
  {
    "text": "happens early enough we're actually good",
    "start": "683440",
    "end": "685320"
  },
  {
    "text": "to go um but I mean this is obviously",
    "start": "685320",
    "end": "689000"
  },
  {
    "text": "not super ideal solution right we're",
    "start": "689000",
    "end": "691040"
  },
  {
    "text": "really sort of counting on the semantics",
    "start": "691040",
    "end": "692600"
  },
  {
    "text": "of pick first and we really get this I",
    "start": "692600",
    "end": "695120"
  },
  {
    "text": "mean this mess uh sitting right in front",
    "start": "695120",
    "end": "698279"
  },
  {
    "text": "of the TCP port and it's just not an",
    "start": "698279",
    "end": "700600"
  },
  {
    "text": "ideal solution so what do we do well",
    "start": "700600",
    "end": "703680"
  },
  {
    "text": "turns out as we were working on this uh",
    "start": "703680",
    "end": "707639"
  },
  {
    "text": "JPC got a little bit of an upgrade the",
    "start": "707639",
    "end": "709360"
  },
  {
    "text": "pick first strategy was upgraded to be",
    "start": "709360",
    "end": "711959"
  },
  {
    "text": "able to support shuffling the IP address",
    "start": "711959",
    "end": "713800"
  },
  {
    "text": "list and I mean that's perfect right",
    "start": "713800",
    "end": "715839"
  },
  {
    "text": "it's just like Ron Robin it's going to",
    "start": "715839",
    "end": "717079"
  },
  {
    "text": "pick a random address at the beginning",
    "start": "717079",
    "end": "719240"
  },
  {
    "text": "except that um it's not actually going",
    "start": "719240",
    "end": "721079"
  },
  {
    "text": "to open a new connection or a connection",
    "start": "721079",
    "end": "722519"
  },
  {
    "text": "for every single Target now that's",
    "start": "722519",
    "end": "725680"
  },
  {
    "text": "pretty much the long-term solution that",
    "start": "725680",
    "end": "726959"
  },
  {
    "text": "we've got it's slowly making its way",
    "start": "726959",
    "end": "728760"
  },
  {
    "text": "through the system the problem is that",
    "start": "728760",
    "end": "730519"
  },
  {
    "text": "some applications have really really",
    "start": "730519",
    "end": "733440"
  },
  {
    "text": "long deployment Cycles like you know",
    "start": "733440",
    "end": "735760"
  },
  {
    "text": "multiple quarters sometimes but and",
    "start": "735760",
    "end": "738360"
  },
  {
    "text": "turns out the longer the deployment",
    "start": "738360",
    "end": "739680"
  },
  {
    "text": "cycle you have it turns out most of",
    "start": "739680",
    "end": "741399"
  },
  {
    "text": "those applications are also the ones",
    "start": "741399",
    "end": "742600"
  },
  {
    "text": "with the biggest impact so we really",
    "start": "742600",
    "end": "745240"
  },
  {
    "text": "don't have much of a choice that we have",
    "start": "745240",
    "end": "746680"
  },
  {
    "text": "to keep this in for a really long time",
    "start": "746680",
    "end": "750079"
  },
  {
    "text": "even though the strategy is available",
    "start": "750079",
    "end": "752000"
  },
  {
    "text": "today so as a quick side note I did want",
    "start": "752000",
    "end": "756120"
  },
  {
    "text": "to mention that as a last resort we",
    "start": "756120",
    "end": "758040"
  },
  {
    "text": "ended up figuring out a way to",
    "start": "758040",
    "end": "759320"
  },
  {
    "text": "dynamically remove the hosts that are at",
    "start": "759320",
    "end": "761600"
  },
  {
    "text": "capacity from the DNS",
    "start": "761600",
    "end": "763680"
  },
  {
    "text": "record what that means for the clients",
    "start": "763680",
    "end": "765839"
  },
  {
    "text": "is that they don't even see that IP they",
    "start": "765839",
    "end": "767240"
  },
  {
    "text": "never connect to it and so we looking at",
    "start": "767240",
    "end": "769639"
  },
  {
    "text": "significantly more even distribution the",
    "start": "769639",
    "end": "772240"
  },
  {
    "text": "problem is that this talk doesn't this",
    "start": "772240",
    "end": "774560"
  },
  {
    "text": "doesn't really work for everyone not",
    "start": "774560",
    "end": "775839"
  },
  {
    "text": "everybody's got the capability to do",
    "start": "775839",
    "end": "777320"
  },
  {
    "text": "that and I didn't want to focus on",
    "start": "777320",
    "end": "779639"
  },
  {
    "text": "on this talk on solutions that not",
    "start": "779639",
    "end": "781560"
  },
  {
    "text": "everybody could do it's also something",
    "start": "781560",
    "end": "783120"
  },
  {
    "text": "that really messes with the way that we",
    "start": "783120",
    "end": "784519"
  },
  {
    "text": "do alerting um and it's also gotten like",
    "start": "784519",
    "end": "787000"
  },
  {
    "text": "a own set of risk so we really didn't",
    "start": "787000",
    "end": "788720"
  },
  {
    "text": "want to do it and this helped a lot but",
    "start": "788720",
    "end": "791600"
  },
  {
    "text": "it's ultimately slowly rolling out the",
    "start": "791600",
    "end": "793639"
  },
  {
    "text": "new pick first strategy that's working",
    "start": "793639",
    "end": "795279"
  },
  {
    "text": "out for",
    "start": "795279",
    "end": "796639"
  },
  {
    "text": "us so what are we at now uh just a",
    "start": "796639",
    "end": "799800"
  },
  {
    "text": "little reminder this is where we were at",
    "start": "799800",
    "end": "801480"
  },
  {
    "text": "before some hosts taking 10 times of",
    "start": "801480",
    "end": "803880"
  },
  {
    "text": "traffic some host basically sitting idle",
    "start": "803880",
    "end": "806880"
  },
  {
    "text": "and um this is what it looks like now",
    "start": "806880",
    "end": "809199"
  },
  {
    "text": "it's still not a super great spread",
    "start": "809199",
    "end": "810760"
  },
  {
    "text": "because we still got a bunch of hosts",
    "start": "810760",
    "end": "812600"
  },
  {
    "text": "and pick first and so they're still",
    "start": "812600",
    "end": "813839"
  },
  {
    "text": "picking their whatever closest hosts",
    "start": "813839",
    "end": "815279"
  },
  {
    "text": "there are but the spread is obviously",
    "start": "815279",
    "end": "817600"
  },
  {
    "text": "significantly Tighter and it's getting",
    "start": "817600",
    "end": "819279"
  },
  {
    "text": "tighter pretty much every day as the",
    "start": "819279",
    "end": "821760"
  },
  {
    "text": "applications um progress",
    "start": "821760",
    "end": "824519"
  },
  {
    "text": "so the uh yeah that custom listener code",
    "start": "824519",
    "end": "828040"
  },
  {
    "text": "is still going to stay in because we",
    "start": "828040",
    "end": "830160"
  },
  {
    "text": "still actually want to have a hard limit",
    "start": "830160",
    "end": "832519"
  },
  {
    "text": "on how much how many resources a single",
    "start": "832519",
    "end": "834880"
  },
  {
    "text": "host is going to use but um we're really",
    "start": "834880",
    "end": "838160"
  },
  {
    "text": "looking we're really looking",
    "start": "838160",
    "end": "839399"
  },
  {
    "text": "significantly better and finally my",
    "start": "839399",
    "end": "842320"
  },
  {
    "text": "fellow uncles and I can get a a good",
    "start": "842320",
    "end": "844120"
  },
  {
    "text": "night's sleep",
    "start": "844120",
    "end": "846360"
  },
  {
    "text": "um before we close up I did mention that",
    "start": "846360",
    "end": "850519"
  },
  {
    "text": "uh we had to make sure that our XDS",
    "start": "850519",
    "end": "852120"
  },
  {
    "text": "control plane was as performant as",
    "start": "852120",
    "end": "853759"
  },
  {
    "text": "possible and it's time for us to put our",
    "start": "853759",
    "end": "855880"
  },
  {
    "text": "money where our mouth is we're not",
    "start": "855880",
    "end": "857240"
  },
  {
    "text": "afraid to hide it uh so we actually open",
    "start": "857240",
    "end": "859920"
  },
  {
    "text": "source it um so you can go check it out",
    "start": "859920",
    "end": "862560"
  },
  {
    "text": "it's basically a if we call a dero",
    "start": "862560",
    "end": "865920"
  },
  {
    "text": "following the long-standing tradition of",
    "start": "865920",
    "end": "867519"
  },
  {
    "text": "naming LinkedIn projects after",
    "start": "867519",
    "end": "869839"
  },
  {
    "text": "philosophers but the idea is it's really",
    "start": "869839",
    "end": "872839"
  },
  {
    "text": "fast it's super flexible and it just",
    "start": "872839",
    "end": "874759"
  },
  {
    "text": "offers you the XDS protocol",
    "start": "874759",
    "end": "876399"
  },
  {
    "text": "implementation and a data structure that",
    "start": "876399",
    "end": "878240"
  },
  {
    "text": "goes along with it and then you pick",
    "start": "878240",
    "end": "880639"
  },
  {
    "text": "what you give to the clients so it's",
    "start": "880639",
    "end": "882759"
  },
  {
    "text": "actually completely unopinionated as to",
    "start": "882759",
    "end": "885440"
  },
  {
    "text": "what your actual configuration is and",
    "start": "885440",
    "end": "887279"
  },
  {
    "text": "this is what we use to send zookeeper",
    "start": "887279",
    "end": "890839"
  },
  {
    "text": "data to restly clients over XCS um it's",
    "start": "890839",
    "end": "894440"
  },
  {
    "text": "also got you know all the advanced",
    "start": "894440",
    "end": "895880"
  },
  {
    "text": "features of um XDS like state of the",
    "start": "895880",
    "end": "898600"
  },
  {
    "text": "world Delta it also supports glob",
    "start": "898600",
    "end": "900240"
  },
  {
    "text": "collections which is the new way to do",
    "start": "900240",
    "end": "902959"
  },
  {
    "text": "cluster or like endpoint",
    "start": "902959",
    "end": "904759"
  },
  {
    "text": "Discovery the other thing that we ended",
    "start": "904759",
    "end": "906639"
  },
  {
    "text": "up doing is that because we had to have",
    "start": "906639",
    "end": "909279"
  },
  {
    "text": "had to squeeze so much performance out",
    "start": "909279",
    "end": "911959"
  },
  {
    "text": "of each and every one of our instances",
    "start": "911959",
    "end": "914240"
  },
  {
    "text": "that we realize there's a pretty big",
    "start": "914240",
    "end": "916040"
  },
  {
    "text": "hole in the the grpc go implementation",
    "start": "916040",
    "end": "918720"
  },
  {
    "text": "there's a lot of uh memory leaks that",
    "start": "918720",
    "end": "921639"
  },
  {
    "text": "could have been fixed with a stronger",
    "start": "921639",
    "end": "923639"
  },
  {
    "text": "like buffer we're using and so the",
    "start": "923639",
    "end": "926759"
  },
  {
    "text": "contribution that we made is basically",
    "start": "926759",
    "end": "928560"
  },
  {
    "text": "allow ing JPC go to reuse buffers from",
    "start": "928560",
    "end": "932519"
  },
  {
    "text": "what it reads off of The Wire all the",
    "start": "932519",
    "end": "934120"
  },
  {
    "text": "way to the distalizer and vice versa",
    "start": "934120",
    "end": "936319"
  },
  {
    "text": "from the sterilizer all the way to the",
    "start": "936319",
    "end": "938079"
  },
  {
    "text": "wire and we're close to or at least",
    "start": "938079",
    "end": "941560"
  },
  {
    "text": "opening the door to having a zero copy",
    "start": "941560",
    "end": "943560"
  },
  {
    "text": "framework in the future and um it's",
    "start": "943560",
    "end": "945959"
  },
  {
    "text": "checked in so should be available in the",
    "start": "945959",
    "end": "947959"
  },
  {
    "text": "next release everybody who uses go GPC",
    "start": "947959",
    "end": "950560"
  },
  {
    "text": "should just be able to have it no",
    "start": "950560",
    "end": "952240"
  },
  {
    "text": "problem by default um for free no",
    "start": "952240",
    "end": "954600"
  },
  {
    "text": "strings attached so in uh closing",
    "start": "954600",
    "end": "958399"
  },
  {
    "text": "remarks I I hope you guys learned a",
    "start": "958399",
    "end": "960560"
  },
  {
    "text": "couple things um tried to make this talk",
    "start": "960560",
    "end": "962680"
  },
  {
    "text": "as agnostic as possible in terms of what",
    "start": "962680",
    "end": "965680"
  },
  {
    "text": "your actual infrastructure is or where",
    "start": "965680",
    "end": "967120"
  },
  {
    "text": "your stack is I didn't want the answer",
    "start": "967120",
    "end": "969279"
  },
  {
    "text": "to be you know what does it take to make",
    "start": "969279",
    "end": "972160"
  },
  {
    "text": "something like this work at the LinkedIn",
    "start": "972160",
    "end": "973240"
  },
  {
    "text": "scale oh just write better code or throw",
    "start": "973240",
    "end": "975519"
  },
  {
    "text": "more Hardware at it I mean we covered a",
    "start": "975519",
    "end": "977040"
  },
  {
    "text": "problem where you couldn't throw more",
    "start": "977040",
    "end": "978279"
  },
  {
    "text": "Hardware at it though we did write a lot",
    "start": "978279",
    "end": "980600"
  },
  {
    "text": "of really good code but now you guys can",
    "start": "980600",
    "end": "982360"
  },
  {
    "text": "have access to it too um and also really",
    "start": "982360",
    "end": "984839"
  },
  {
    "text": "just wanted to express how important it",
    "start": "984839",
    "end": "986120"
  },
  {
    "text": "is to have a deep understanding of how",
    "start": "986120",
    "end": "988199"
  },
  {
    "text": "your stack works how big problems can be",
    "start": "988199",
    "end": "990360"
  },
  {
    "text": "solved with small things but how small",
    "start": "990360",
    "end": "992560"
  },
  {
    "text": "things can cause really big problems",
    "start": "992560",
    "end": "995279"
  },
  {
    "text": "thank",
    "start": "995279",
    "end": "997440"
  },
  {
    "text": "you and I think we've got some time for",
    "start": "998720",
    "end": "1000920"
  },
  {
    "text": "some questions",
    "start": "1000920",
    "end": "1003519"
  },
  {
    "text": "yeah thank you so was the decision to",
    "start": "1008639",
    "end": "1012279"
  },
  {
    "text": "write your own XDS server uh mainly",
    "start": "1012279",
    "end": "1014880"
  },
  {
    "text": "motivated by also having to support your",
    "start": "1014880",
    "end": "1017399"
  },
  {
    "text": "old clients or but there are other",
    "start": "1017399",
    "end": "1019680"
  },
  {
    "text": "reasons as well that was a big one uh we",
    "start": "1019680",
    "end": "1023680"
  },
  {
    "text": "looked at using sto for a really long",
    "start": "1023680",
    "end": "1025798"
  },
  {
    "text": "time and basically using the sto",
    "start": "1025799",
    "end": "1028280"
  },
  {
    "text": "configuration language to generate all",
    "start": "1028280",
    "end": "1030400"
  },
  {
    "text": "the envoy configs but forking over all",
    "start": "1030400",
    "end": "1034558"
  },
  {
    "text": "the sdo code ended up just being like a",
    "start": "1034559",
    "end": "1036319"
  },
  {
    "text": "really big hassle it was too opinionated",
    "start": "1036319",
    "end": "1039079"
  },
  {
    "text": "about kubernetes and so in the end there",
    "start": "1039079",
    "end": "1042160"
  },
  {
    "text": "were no good open source like go control",
    "start": "1042160",
    "end": "1045360"
  },
  {
    "text": "planes that we could use so that was the",
    "start": "1045360",
    "end": "1047360"
  },
  {
    "text": "main reason just we wanted to be able to",
    "start": "1047360",
    "end": "1049960"
  },
  {
    "text": "not use it in the kubernetes world",
    "start": "1049960",
    "end": "1054159"
  },
  {
    "text": "thanks um the customer St server that",
    "start": "1055760",
    "end": "1058120"
  },
  {
    "text": "you wrote um I know in your redesigned",
    "start": "1058120",
    "end": "1061480"
  },
  {
    "text": "stack Kafka also talking to the XDS uh",
    "start": "1061480",
    "end": "1065240"
  },
  {
    "text": "was it what protocol was it um was it",
    "start": "1065240",
    "end": "1067720"
  },
  {
    "text": "using sorry what protocol was it using",
    "start": "1067720",
    "end": "1070440"
  },
  {
    "text": "uh was it gopc and know XTS uses we have",
    "start": "1070440",
    "end": "1072760"
  },
  {
    "text": "J risk line you have Kafka right so all",
    "start": "1072760",
    "end": "1076520"
  },
  {
    "text": "the clients emit to Kafka and or the",
    "start": "1076520",
    "end": "1079120"
  },
  {
    "text": "servers that want to announce statement",
    "start": "1079120",
    "end": "1080400"
  },
  {
    "text": "to Kafka and then the control plane",
    "start": "1080400",
    "end": "1081760"
  },
  {
    "text": "itself directly consumes from",
    "start": "1081760",
    "end": "1083880"
  },
  {
    "text": "Kafka okay does that answer your",
    "start": "1083880",
    "end": "1086080"
  },
  {
    "text": "question no it doesn't so was was I know",
    "start": "1086080",
    "end": "1088760"
  },
  {
    "text": "when when you had uh zookeeper it was",
    "start": "1088760",
    "end": "1091679"
  },
  {
    "text": "using TCP right okay um after it was zuk",
    "start": "1091679",
    "end": "1096039"
  },
  {
    "text": "was replaced with the custom XDS so what",
    "start": "1096039",
    "end": "1098600"
  },
  {
    "text": "protocol was it using under oh so that's",
    "start": "1098600",
    "end": "1100159"
  },
  {
    "text": "just JPC that's just a JPC by",
    "start": "1100159",
    "end": "1101760"
  },
  {
    "text": "directional stream that's why it uses",
    "start": "1101760",
    "end": "1104159"
  },
  {
    "text": "pick first and that's why we ended up in",
    "start": "1104159",
    "end": "1105559"
  },
  {
    "text": "this situation got it okay yeah",
    "start": "1105559",
    "end": "1109720"
  },
  {
    "text": "uh what what kind of hack did you use to",
    "start": "1114480",
    "end": "1116880"
  },
  {
    "text": "prevent uh drpc from connecting to",
    "start": "1116880",
    "end": "1119840"
  },
  {
    "text": "certain XDS control planes at the like",
    "start": "1119840",
    "end": "1122679"
  },
  {
    "text": "TC so at the TCP level if you as soon as",
    "start": "1122679",
    "end": "1126039"
  },
  {
    "text": "you get the connection you we store the",
    "start": "1126039",
    "end": "1129280"
  },
  {
    "text": "map of IP addresses that are banned and",
    "start": "1129280",
    "end": "1133760"
  },
  {
    "text": "if it's in that map we immediately close",
    "start": "1133760",
    "end": "1135679"
  },
  {
    "text": "the connection so we have to wait for it",
    "start": "1135679",
    "end": "1137200"
  },
  {
    "text": "to establish and but then kill and as",
    "start": "1137200",
    "end": "1139240"
  },
  {
    "text": "long as that happens early enough then",
    "start": "1139240",
    "end": "1141200"
  },
  {
    "text": "it works out",
    "start": "1141200",
    "end": "1142640"
  },
  {
    "text": "okay but how does GPC detect that this",
    "start": "1142640",
    "end": "1145919"
  },
  {
    "text": "connection like that it should go to to",
    "start": "1145919",
    "end": "1148360"
  },
  {
    "text": "another host basically so the pick first",
    "start": "1148360",
    "end": "1151280"
  },
  {
    "text": "client it first tries it's going to try",
    "start": "1151280",
    "end": "1153600"
  },
  {
    "text": "every single host in the list and if the",
    "start": "1153600",
    "end": "1155720"
  },
  {
    "text": "first host it can't successfully",
    "start": "1155720",
    "end": "1157240"
  },
  {
    "text": "establish the connection it's going to",
    "start": "1157240",
    "end": "1158360"
  },
  {
    "text": "go look somewhere else so the server the",
    "start": "1158360",
    "end": "1161360"
  },
  {
    "text": "XTS control plane itself isn't saying go",
    "start": "1161360",
    "end": "1163960"
  },
  {
    "text": "look elsewhere it's just saying you",
    "start": "1163960",
    "end": "1165360"
  },
  {
    "text": "can't connect to me so figure it out but",
    "start": "1165360",
    "end": "1168480"
  },
  {
    "text": "how did you make sure that the that the",
    "start": "1168480",
    "end": "1171240"
  },
  {
    "text": "the sub Channel never gets ready",
    "start": "1171240",
    "end": "1172799"
  },
  {
    "text": "basically if you close the connection",
    "start": "1172799",
    "end": "1174520"
  },
  {
    "text": "early enough like I said before the T",
    "start": "1174520",
    "end": "1176120"
  },
  {
    "text": "like for example the TLs handshake",
    "start": "1176120",
    "end": "1177480"
  },
  {
    "text": "happens it never gets ready yeah which",
    "start": "1177480",
    "end": "1180159"
  },
  {
    "text": "is hairy it's not great but it just is",
    "start": "1180159",
    "end": "1182760"
  },
  {
    "text": "what it is",
    "start": "1182760",
    "end": "1185240"
  },
  {
    "text": "yeah thank you so if I understand the",
    "start": "1193640",
    "end": "1196240"
  },
  {
    "text": "problem um in your pick first if you",
    "start": "1196240",
    "end": "1199480"
  },
  {
    "text": "have um thousand number of servers to",
    "start": "1199480",
    "end": "1201919"
  },
  {
    "text": "which your DNS is resolving so was there",
    "start": "1201919",
    "end": "1206919"
  },
  {
    "text": "a u solution considered in which you",
    "start": "1206919",
    "end": "1211000"
  },
  {
    "text": "would take a subset of those host which",
    "start": "1211000",
    "end": "1213080"
  },
  {
    "text": "would be available and then you know",
    "start": "1213080",
    "end": "1215480"
  },
  {
    "text": "rather than in which you show 87% 90% of",
    "start": "1215480",
    "end": "1218840"
  },
  {
    "text": "the memory was using your uh TLS",
    "start": "1218840",
    "end": "1221000"
  },
  {
    "text": "connections yeah like was a solution",
    "start": "1221000",
    "end": "1223679"
  },
  {
    "text": "considered in which uh you would still",
    "start": "1223679",
    "end": "1226000"
  },
  {
    "text": "choose round robin but with a subset of",
    "start": "1226000",
    "end": "1228880"
  },
  {
    "text": "host to which your DNS is uh resolving",
    "start": "1228880",
    "end": "1232000"
  },
  {
    "text": "so the problem is that",
    "start": "1232000",
    "end": "1234559"
  },
  {
    "text": "um I mean we'd have to have a pretty",
    "start": "1234559",
    "end": "1236679"
  },
  {
    "text": "custom DNS solution right where you have",
    "start": "1236679",
    "end": "1239679"
  },
  {
    "text": "every application I guess is going to",
    "start": "1239679",
    "end": "1241240"
  },
  {
    "text": "get a different subset but the problem",
    "start": "1241240",
    "end": "1243400"
  },
  {
    "text": "is that ultimately this is happening um",
    "start": "1243400",
    "end": "1247600"
  },
  {
    "text": "at like onvoy JPC proxy list they're",
    "start": "1247600",
    "end": "1250240"
  },
  {
    "text": "just opening that connection that that",
    "start": "1250240",
    "end": "1251760"
  },
  {
    "text": "connection is really configurable so",
    "start": "1251760",
    "end": "1254360"
  },
  {
    "text": "it's just going to pick whatever the",
    "start": "1254360",
    "end": "1255559"
  },
  {
    "text": "default settings are but then how do you",
    "start": "1255559",
    "end": "1257240"
  },
  {
    "text": "decide which one to choose so for examp",
    "start": "1257240",
    "end": "1258640"
  },
  {
    "text": "example right like one server could be",
    "start": "1258640",
    "end": "1260159"
  },
  {
    "text": "in uh your SF other server could be in",
    "start": "1260159",
    "end": "1262919"
  },
  {
    "text": "your like Europe and it's giving you all",
    "start": "1262919",
    "end": "1265960"
  },
  {
    "text": "the all the uh DNS resolving to your",
    "start": "1265960",
    "end": "1269120"
  },
  {
    "text": "thousand host in which either one could",
    "start": "1269120",
    "end": "1271240"
  },
  {
    "text": "be you know in us or other one could be",
    "start": "1271240",
    "end": "1273520"
  },
  {
    "text": "Europe or any other location like then",
    "start": "1273520",
    "end": "1276240"
  },
  {
    "text": "how do you know which one to choose yeah",
    "start": "1276240",
    "end": "1277919"
  },
  {
    "text": "so in um at LinkedIn we're still on Prem",
    "start": "1277919",
    "end": "1281159"
  },
  {
    "text": "so we got three data centers and there's",
    "start": "1281159",
    "end": "1283520"
  },
  {
    "text": "a sort of data center Global",
    "start": "1283520",
    "end": "1285760"
  },
  {
    "text": "configuration where if you're in LTX one",
    "start": "1285760",
    "end": "1288200"
  },
  {
    "text": "you're going get connect to the lx1",
    "start": "1288200",
    "end": "1289799"
  },
  {
    "text": "control plane fundamentally every",
    "start": "1289799",
    "end": "1292279"
  },
  {
    "text": "control plane instance has to have the",
    "start": "1292279",
    "end": "1293799"
  },
  {
    "text": "whole data we can really partition it",
    "start": "1293799",
    "end": "1296159"
  },
  {
    "text": "out so it's not like we could have done",
    "start": "1296159",
    "end": "1297840"
  },
  {
    "text": "something like that either where we",
    "start": "1297840",
    "end": "1298880"
  },
  {
    "text": "could have just some hosts go to that",
    "start": "1298880",
    "end": "1302000"
  },
  {
    "text": "partition because they might want to",
    "start": "1302000",
    "end": "1304200"
  },
  {
    "text": "talk to some other service which is on a",
    "start": "1304200",
    "end": "1305840"
  },
  {
    "text": "different partition and that's not",
    "start": "1305840",
    "end": "1307600"
  },
  {
    "text": "something that's compatible with the XTS",
    "start": "1307600",
    "end": "1309000"
  },
  {
    "text": "protocol so we couldn't even Shard it",
    "start": "1309000",
    "end": "1311520"
  },
  {
    "text": "well unfortunately but yeah so the the",
    "start": "1311520",
    "end": "1314120"
  },
  {
    "text": "config that you mentioned it's just per",
    "start": "1314120",
    "end": "1315880"
  },
  {
    "text": "Data Center",
    "start": "1315880",
    "end": "1319080"
  },
  {
    "text": "okay I think we're pretty much just done",
    "start": "1319480",
    "end": "1321039"
  },
  {
    "text": "so thank you so much everyone have a",
    "start": "1321039",
    "end": "1323679"
  },
  {
    "text": "good",
    "start": "1323679",
    "end": "1326679"
  }
]