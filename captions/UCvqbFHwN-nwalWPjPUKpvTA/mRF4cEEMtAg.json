[
  {
    "text": "today we're going to be talking about uh how you can improve your argd experience uh with UI extensions uh but before I",
    "start": "1160",
    "end": "8200"
  },
  {
    "text": "get to that I'd like to introduce myself uh my name is Remington Breeze I'm a software engineer at a uh and I'm also",
    "start": "8200",
    "end": "15320"
  },
  {
    "text": "an argd uh project maintainer Leo would you like to introduce yourself sure hi",
    "start": "15320",
    "end": "20920"
  },
  {
    "text": "everyone uh my name is leonarda I usually go by Leo I am a staff software",
    "start": "20920",
    "end": "26359"
  },
  {
    "text": "developer add into it and I am one of the uh Main engers in the Argo C and",
    "start": "26359",
    "end": "31720"
  },
  {
    "text": "Argo rollouts projects thanks Leo all right um so before we get",
    "start": "31720",
    "end": "37800"
  },
  {
    "text": "started I think uh it's important to understand why we decided to make the Argos CD user interface uh more",
    "start": "37800",
    "end": "44320"
  },
  {
    "text": "extensible in the first place um so one of the core tenets of our development",
    "start": "44320",
    "end": "49480"
  },
  {
    "text": "philosophy uh for the Argo CD product um has always been Focus um so we want to",
    "start": "49480",
    "end": "55000"
  },
  {
    "text": "prioritize core functionality um without adding a lot of unnecessary Cru and bloat",
    "start": "55000",
    "end": "61120"
  },
  {
    "text": "um but over time we kind of noticed that more and more people adopted argd and some more unique use cases arose that",
    "start": "61120",
    "end": "67720"
  },
  {
    "text": "needed uh unique solutions that we couldn't just put into the main project",
    "start": "67720",
    "end": "72920"
  },
  {
    "text": "um so one of these use cases that we found ourselves in a pretty unique situation to solve was a lot of folks",
    "start": "72920",
    "end": "78439"
  },
  {
    "text": "run Argo CD with Argo rollouts um and they wanted more information about their Argo rollouts at a glance uh in the user",
    "start": "78439",
    "end": "85720"
  },
  {
    "text": "interface um but we didn't want to tightly couple Argo CD with Argo",
    "start": "85720",
    "end": "91680"
  },
  {
    "text": "rollouts uh so to solve this we built extensions uh to try to keep delivering",
    "start": "91680",
    "end": "96759"
  },
  {
    "text": "what we think is a worldclass uh developer experience to folks that just want to use Argos CD by itself um but",
    "start": "96759",
    "end": "103119"
  },
  {
    "text": "also allowing users uh with those more complex needs uh an option to adapt the user interface to meet those",
    "start": "103119",
    "end": "109680"
  },
  {
    "text": "needs um so there are two sections of today's talk um I'm going to be discussing the first uh that's going to",
    "start": "109680",
    "end": "115560"
  },
  {
    "text": "that's uh standard UI extensions and then Leo's going to go over the second part which is is proxy extensions uh a",
    "start": "115560",
    "end": "121799"
  },
  {
    "text": "different type of extension uh so first I want to briefly go over uh each type of extension so that you know what to",
    "start": "121799",
    "end": "127920"
  },
  {
    "text": "look for when I give my demo uh and then in that demo uh I'm going to first show you where each type of extension gets",
    "start": "127920",
    "end": "133800"
  },
  {
    "text": "installed to uh and how you can use them and then I'll move to the main uh main subjects of my my part of the",
    "start": "133800",
    "end": "140440"
  },
  {
    "text": "presentation so the first is rollets extension uh and the timeline extension so I'm I'm pretty excited to show you",
    "start": "140440",
    "end": "147200"
  },
  {
    "text": "the uh timeline extension today uh it's in develop M and will be released soon um and it takes advantage of an",
    "start": "147200",
    "end": "153599"
  },
  {
    "text": "improvement to the extension extensions mechanism of the UI uh which I'll talk a little bit more about uh later in the",
    "start": "153599",
    "end": "161239"
  },
  {
    "text": "presentation and then after you see these in action uh I'm going to pull back the curtain a little bit um and",
    "start": "161239",
    "end": "166920"
  },
  {
    "text": "show you exactly where these extensions were installed on my local machine uh and then I'll talk about how you can",
    "start": "166920",
    "end": "172200"
  },
  {
    "text": "install them in a production environment because it is a little bit different uh and after that we'll that concludes the",
    "start": "172200",
    "end": "178239"
  },
  {
    "text": "demo and we'll talk a little bit about uh the anatomy of a UI extension um and",
    "start": "178239",
    "end": "183760"
  },
  {
    "text": "see what API Argo Argo CD exposes uh for you to inject your own extensions uh and",
    "start": "183760",
    "end": "189799"
  },
  {
    "text": "how it renders data and what data it receives from from the UI uh then for Leo's portion of the presentation he's",
    "start": "189799",
    "end": "196120"
  },
  {
    "text": "going to demonstrate another type of uh extension which I mentioned called proxy extensions uh the example of that here",
    "start": "196120",
    "end": "201959"
  },
  {
    "text": "is the metrics extension um and then after his demo he's going to go into some detail about how these extensions",
    "start": "201959",
    "end": "207879"
  },
  {
    "text": "work both uh with a basic example and then a more complex real world example that um is what they use it into it uh",
    "start": "207879",
    "end": "215760"
  },
  {
    "text": "and then finally if uh what we talked about today resonated with you we're going to um discuss some next steps and",
    "start": "215760",
    "end": "221680"
  },
  {
    "text": "how you can get involved and maybe build your own extensions all right um so like I said",
    "start": "221680",
    "end": "228439"
  },
  {
    "text": "there are four types of extension um the first is a resource tab extension uh the second is a system",
    "start": "228439",
    "end": "234840"
  },
  {
    "text": "level extension the third is an application view extension and the four is an fourth",
    "start": "234840",
    "end": "240840"
  },
  {
    "text": "is an application tab extension uh which is really just a special case of a resource tab",
    "start": "240840",
    "end": "246720"
  },
  {
    "text": "extension uh and with that uh I think it makes the most sense to show you guys the where these extensions are in the",
    "start": "246720",
    "end": "252120"
  },
  {
    "text": "user interface so I'm going to give a quick demo all",
    "start": "252120",
    "end": "257560"
  },
  {
    "text": "right great",
    "start": "264759",
    "end": "271440"
  },
  {
    "text": "so this is the argocd user interface if you're unfamiliar with it um what we're looking at here is uh an overview of our",
    "start": "271440",
    "end": "277759"
  },
  {
    "text": "application this is all of the resource in it resources in it um and this is a roll outs application um so the first",
    "start": "277759",
    "end": "285600"
  },
  {
    "text": "place that extensions would get installed is the application tab extension uh we don't have a good",
    "start": "285600",
    "end": "290680"
  },
  {
    "text": "example of an application tab extension to show you today um but if you were to install one it would show up here in the",
    "start": "290680",
    "end": "296680"
  },
  {
    "text": "application details panel uh and up here at the top you can see uh there are multiple tabs and it would essentially",
    "start": "296680",
    "end": "303320"
  },
  {
    "text": "just be uh a new tab so like I said it's a special case of a resource tab extension uh I will be showing you that",
    "start": "303320",
    "end": "309680"
  },
  {
    "text": "in a little bit um so it might make more sense uh the second type of extension is",
    "start": "309680",
    "end": "314720"
  },
  {
    "text": "a system level extension um and that's going to show up over here on the left um with these icons and if you're",
    "start": "314720",
    "end": "321240"
  },
  {
    "text": "familiar with the argd interface uh you'll know that this cat icon is not usually there uh and that's because I",
    "start": "321240",
    "end": "327319"
  },
  {
    "text": "installed a system level extension um so let's take a look at it so system level",
    "start": "327319",
    "end": "332479"
  },
  {
    "text": "extensions take up your whole screen um and this extension is really simple uh it uses a public facing API external API",
    "start": "332479",
    "end": "340440"
  },
  {
    "text": "uh to get pictures of cats so if I refresh the page there will be a new",
    "start": "340440",
    "end": "345639"
  },
  {
    "text": "picture um so this is really useful for things like maybe adding documentation or configuration um that you want at a",
    "start": "345639",
    "end": "351919"
  },
  {
    "text": "global level and not at an application Level uh and the reason that I use this API is to demonstrate that you don't",
    "start": "351919",
    "end": "357759"
  },
  {
    "text": "actually just have to rely on data from the Argo CD us uh interface or API server uh you can query external",
    "start": "357759",
    "end": "365280"
  },
  {
    "text": "apis and that's really good for things like say you have an internal VPN or corporate VPN and you have some publicly",
    "start": "365280",
    "end": "372160"
  },
  {
    "text": "exposed uh endpoints that are accessible only on the VPN you don't need to authenticate um you could absolutely",
    "start": "372160",
    "end": "378240"
  },
  {
    "text": "create an extension that that leverages that data so uh moving back to our",
    "start": "378240",
    "end": "383280"
  },
  {
    "text": "application um I'll demonstrate the roll outs extension so like I said this is a roll outs application um and when I",
    "start": "383280",
    "end": "389919"
  },
  {
    "text": "started the demo you might have noticed I had the roll outs dashboard open if you're unfamiliar with this this is a",
    "start": "389919",
    "end": "395800"
  },
  {
    "text": "user interface that gets shipped with Argo rollouts by default um it's really easy to spin up um but sometimes you",
    "start": "395800",
    "end": "402120"
  },
  {
    "text": "don't want to spin it up locally and you don't want to host it yourself um so it would be really useful to have some of",
    "start": "402120",
    "end": "407199"
  },
  {
    "text": "this information uh in the argd interface itself so that's what we did with the RS extension so if I go back",
    "start": "407199",
    "end": "414000"
  },
  {
    "text": "here to the user interface and click on this RS resource uh you'll notice that there is an additional tab called more",
    "start": "414000",
    "end": "421199"
  },
  {
    "text": "um and this is the resource tab extension type that I was discussing earlier so here we have a simplified",
    "start": "421199",
    "end": "427639"
  },
  {
    "text": "version of that rollas dashboard that we saw before um and this is readon or this",
    "start": "427639",
    "end": "433199"
  },
  {
    "text": "specific extension is readon uh but if I go back here to the dashboard I can uh",
    "start": "433199",
    "end": "438319"
  },
  {
    "text": "edit the image and I'll show you what happens when we make a change so I update the image",
    "start": "438319",
    "end": "445199"
  },
  {
    "text": "here and now if we go back here you see that the the two interfaces match and we're on a pause step um but Argo CD is",
    "start": "445199",
    "end": "452960"
  },
  {
    "text": "not readon so what we can do is promote this roll out from the resource tree so",
    "start": "452960",
    "end": "458000"
  },
  {
    "text": "I'll come back here and click promote",
    "start": "458000",
    "end": "462599"
  },
  {
    "text": "full and once I do that if I click here again we can see that the roll out has been promoted and it's gone through each",
    "start": "463080",
    "end": "469720"
  },
  {
    "text": "and every one of the steps um so that's the roll out extension and like I said that's an example of a resource tab extension uh",
    "start": "469720",
    "end": "477319"
  },
  {
    "text": "so the final type of extension that I'll demonstrate St for you today is called an application view extension um and",
    "start": "477319",
    "end": "483319"
  },
  {
    "text": "where those show up is up here on the right so um again if you're familiar with the UI you know that there are",
    "start": "483319",
    "end": "488759"
  },
  {
    "text": "typically four different types of view so there's the resource prev viiew which is what we've been looking at uh there's",
    "start": "488759",
    "end": "494599"
  },
  {
    "text": "the Pod view which is really useful for seeing pods and and who owns them then there's the network view which is really",
    "start": "494599",
    "end": "500960"
  },
  {
    "text": "useful for visualizing Network traffic in your application and then there's the list view which is just a simple list um but",
    "start": "500960",
    "end": "508440"
  },
  {
    "text": "you'll notice that there's a fifth icon that's not normally there and that is for the timeline extension so this is a",
    "start": "508440",
    "end": "514279"
  },
  {
    "text": "brand new extension that I mentioned uh that's still in development um but what this is really good for is giving you uh",
    "start": "514279",
    "end": "520959"
  },
  {
    "text": "at a glance information an overview of what's recently been going on in your application so up at the top we have",
    "start": "520959",
    "end": "527200"
  },
  {
    "text": "some uh just basic metrics of total resources total pods uh there's one",
    "start": "527200",
    "end": "532240"
  },
  {
    "text": "resource out of sync uh we have the number of nodes uh and then on the right we have uh memory pressure and CPU",
    "start": "532240",
    "end": "538200"
  },
  {
    "text": "pressure this is just an average across all nodes if we had more than one um it would be a little bit more useful um and",
    "start": "538200",
    "end": "544640"
  },
  {
    "text": "actually if I click this uh oh button which is simply for the demo um something's going to happen to our",
    "start": "544640",
    "end": "549680"
  },
  {
    "text": "application and I'll show you uh what happens what it looks like if uh memory pressure and CPU pressure go up um so it",
    "start": "549680",
    "end": "556320"
  },
  {
    "text": "just changes color uh and then down here we have the uh the meat of the timeline view which",
    "start": "556320",
    "end": "562279"
  },
  {
    "text": "is uh the events timeline so these are kubernetes events that are being passed to the extension uh and it all looks",
    "start": "562279",
    "end": "569200"
  },
  {
    "text": "pretty good here uh as most of you probably know kubernetes only stores about an hour of events by default uh so",
    "start": "569200",
    "end": "575480"
  },
  {
    "text": "we don't have a ton of them here but um they're enough to make it useful uh and we can sort by new or sort by old so the",
    "start": "575480",
    "end": "583680"
  },
  {
    "text": "oldest one happened about an hour ago uh we can also filter by warnings only so if you want to just see the warnings",
    "start": "583680",
    "end": "589560"
  },
  {
    "text": "that have happened um there aren't any right now but um if there were they'd show up when you click that",
    "start": "589560",
    "end": "595640"
  },
  {
    "text": "button uh all right so that concludes uh the demo of all the different types of",
    "start": "595640",
    "end": "600760"
  },
  {
    "text": "extension but I'd like to show you now how they were installed on my local machine so if I go over to my terminal",
    "start": "600760",
    "end": "606880"
  },
  {
    "text": "here um I have uh the /tmp extensions directory on my local machine up for you",
    "start": "606880",
    "end": "614160"
  },
  {
    "text": "and I'll go ahead and run tree to show you what's in it uh so there are two directories roll out and timeline and",
    "start": "614160",
    "end": "619760"
  },
  {
    "text": "that corresponds to the two extensions that you just saw um and this is how extensions get hosted so really at the",
    "start": "619760",
    "end": "625680"
  },
  {
    "text": "end of the day the API server just needs to be able to access this /tmp extensions directory um and each",
    "start": "625680",
    "end": "632680"
  },
  {
    "text": "extension must be in its own uh uniquely named directory and in that directory we expect a Javascript file with the prefix",
    "start": "632680",
    "end": "640200"
  },
  {
    "text": "extension um it can be called simply extension JJs but we've named them more",
    "start": "640200",
    "end": "645560"
  },
  {
    "text": "appropriately here um and that's how I'm running it locally so the API server is running locally and it's simply looking",
    "start": "645560",
    "end": "651760"
  },
  {
    "text": "at this directory on my machine but in the real world you can't really do that um your API server will be running uh in",
    "start": "651760",
    "end": "658560"
  },
  {
    "text": "a pod so we need to do something a little bit more complex so here I have an example of an",
    "start": "658560",
    "end": "666000"
  },
  {
    "text": "argocd server deployment uh and Leo recently created a new image to make it super simple to install these extensions",
    "start": "666000",
    "end": "672880"
  },
  {
    "text": "uh in a production environment uh so you'll notice that there's a new init container that's not typically on an",
    "start": "672880",
    "end": "678320"
  },
  {
    "text": "arusd server deployment uh and this init container is the extensions installer um",
    "start": "678320",
    "end": "684320"
  },
  {
    "text": "and all it needs to be able to install this extension is a URL to the bundle that contains the JavaScript files um",
    "start": "684320",
    "end": "691240"
  },
  {
    "text": "you can additionally include a check sum if you'd like but you don't have to uh and then here's uh this is where it's",
    "start": "691240",
    "end": "697600"
  },
  {
    "text": "really uh getting mounted to this is a volume Mount uh and as I said it must uh",
    "start": "697600",
    "end": "702639"
  },
  {
    "text": "live in /tmp extensions um and this is a shared directory between the argd server",
    "start": "702639",
    "end": "708639"
  },
  {
    "text": "pod sorry argd server container uh and the andit container that's essentially",
    "start": "708639",
    "end": "714480"
  },
  {
    "text": "just downloading the the tarball UN taring it and moving it into the directory um so it makes it really easy",
    "start": "714480",
    "end": "720399"
  },
  {
    "text": "to get these installed uh and that concludes my demo so I'll move back to the",
    "start": "720399",
    "end": "728040"
  },
  {
    "text": "presentation all right so I'd like to talk a little bit about the anatomy of a UI extension um and how these actually",
    "start": "738880",
    "end": "746079"
  },
  {
    "text": "get registered in the JavaScript so Aro uh UI exposes uh this function register",
    "start": "746079",
    "end": "752480"
  },
  {
    "text": "resource extension um and a number of others uh there are appropriate functions for uh system level extensions",
    "start": "752480",
    "end": "759160"
  },
  {
    "text": "for example or application view extensions um I've chosen this one as an example uh but it attaches this this",
    "start": "759160",
    "end": "765800"
  },
  {
    "text": "function to the window variable the global window variable so when you build an extension you'll just call window.",
    "start": "765800",
    "end": "770880"
  },
  {
    "text": "register resource extension uh and pass at these uh parameters so the first is a react component um it's pretty",
    "start": "770880",
    "end": "777399"
  },
  {
    "text": "straightforward I'll show you what what properties this react component expects in a little bit uh the second is group",
    "start": "777399",
    "end": "784320"
  },
  {
    "text": "and the third is kind so for res resource tab extension um this is rendering for a specific type of",
    "start": "784320",
    "end": "791000"
  },
  {
    "text": "kubernetes resource so you do need to specify the group kind uh for a roll out that's",
    "start": "791000",
    "end": "796160"
  },
  {
    "text": "argo.io rollout um and then finally we have the tab title um so this is going",
    "start": "796160",
    "end": "801680"
  },
  {
    "text": "to be the name of the tab uh in the argd user interface uh and for other types of extensions there's simply a title so for",
    "start": "801680",
    "end": "808600"
  },
  {
    "text": "the um for the application view extension for example um it'll change the browser type title among other",
    "start": "808600",
    "end": "815160"
  },
  {
    "text": "things uh so now looking a little bit closer at the actual react component so",
    "start": "815160",
    "end": "820600"
  },
  {
    "text": "this is a standard react component and it accepts a few uh different props so the first is application and this is the",
    "start": "820600",
    "end": "827600"
  },
  {
    "text": "application uh Json data the same data that's being used to render the rest of the user interface it just gets passed",
    "start": "827600",
    "end": "833600"
  },
  {
    "text": "to the extensions here same with resource um for the other types of extension you're not going to be using",
    "start": "833600",
    "end": "839800"
  },
  {
    "text": "the resource uh there won't be a resource but for resource tab extension there will so this is where for the roll",
    "start": "839800",
    "end": "845199"
  },
  {
    "text": "out extension um the data gets passed there and then there's the application tree uh so again this is the exact same",
    "start": "845199",
    "end": "852079"
  },
  {
    "text": "Json data that the argocd user interface is using to render that uh resource Tre",
    "start": "852079",
    "end": "857519"
  },
  {
    "text": "view um and finally we have events so this is the uh the data that's powering",
    "start": "857519",
    "end": "863480"
  },
  {
    "text": "that timeline extension view that I showed you and as I mentioned is coming soon so it's it's in development um and",
    "start": "863480",
    "end": "869399"
  },
  {
    "text": "this data will soon be passed to application view extensions so with that um I'll pass it",
    "start": "869399",
    "end": "875360"
  },
  {
    "text": "over to Leo all right thanks Remington um all",
    "start": "875360",
    "end": "881839"
  },
  {
    "text": "right so my part of the presentation I'm going to be talking about uh proxy extensions um which is not something",
    "start": "881839",
    "end": "889360"
  },
  {
    "text": "really independent from the UI extension that Remington just presented it actually works in conjunction so the",
    "start": "889360",
    "end": "895680"
  },
  {
    "text": "first my My Demo is demonstrating uh one extension that works with this uh",
    "start": "895680",
    "end": "902240"
  },
  {
    "text": "Concept in mind which is the metrix extension is a is an extension that we run add into it in all our our clusters",
    "start": "902240",
    "end": "909600"
  },
  {
    "text": "so we have more than 300 clusters today running this extension so let's jump in",
    "start": "909600",
    "end": "915600"
  },
  {
    "text": "and uh see how this looks like so I recorded this requires uh quite a bit of",
    "start": "915600",
    "end": "921199"
  },
  {
    "text": "infrastructure so I'm going to run through the through the through the recording so here I have uh Argo City",
    "start": "921199",
    "end": "928160"
  },
  {
    "text": "running and one application deployed called metric demo and on the right you",
    "start": "928160",
    "end": "934120"
  },
  {
    "text": "have the application itself uh running so the the the way the application works is pretty simplistic it just sends uh",
    "start": "934120",
    "end": "941480"
  },
  {
    "text": "requests to itself and it has the ability to configure the the the",
    "start": "941480",
    "end": "946519"
  },
  {
    "text": "percentage of 500 errors that will be returned as well as the latency so right",
    "start": "946519",
    "end": "951639"
  },
  {
    "text": "now as you can see it is configured with 5 50% of 500 errors and latency of 10",
    "start": "951639",
    "end": "958160"
  },
  {
    "text": "seconds uh and that's why you see the the red octopuses uh there in the",
    "start": "958160",
    "end": "963519"
  },
  {
    "text": "UI okay so here on the left we have a standard Agro City application it has a",
    "start": "963519",
    "end": "970079"
  },
  {
    "text": "roll out resource uh there is uh one uh one replica set deployed and uh what I'm",
    "start": "970079",
    "end": "977160"
  },
  {
    "text": "going to be showing is a resarch tab extension which is a category of extension that remon mentioned before so",
    "start": "977160",
    "end": "984360"
  },
  {
    "text": "if you click the roll out resource you'll see this new uh metric tab and uh",
    "start": "984360",
    "end": "989519"
  },
  {
    "text": "clicking the metrix tab you'll be uh displayed a collection of graphs that is",
    "start": "989519",
    "end": "994759"
  },
  {
    "text": "preconfigured so this actually configured in the backend component of this extension and it allows you to",
    "start": "994759",
    "end": "1001480"
  },
  {
    "text": "Define any uh metrix to be extracted from Prometheus um so yeah you have the",
    "start": "1001480",
    "end": "1007360"
  },
  {
    "text": "latency so those are metrics that we use at in it which are uh the golden signal metrics U at the bottom you see uh pod",
    "start": "1007360",
    "end": "1014880"
  },
  {
    "text": "metrics so uh CPU um and memory and um",
    "start": "1014880",
    "end": "1020759"
  },
  {
    "text": "here at the bottom you see that there is a u checkbox uh that shows threshold so",
    "start": "1020759",
    "end": "1028038"
  },
  {
    "text": "here if you hover you see the current uh usage of uh each of the pods belonging",
    "start": "1028039",
    "end": "1034000"
  },
  {
    "text": "to that uh that that roll out and if you click show thresholds it will show you",
    "start": "1034000",
    "end": "1039678"
  },
  {
    "text": "the the CPU request so this doesn't have CPU limit configured but so it allows",
    "start": "1039679",
    "end": "1045079"
  },
  {
    "text": "you to correlate uh what is the actual usage and what are you requesting in",
    "start": "1045079",
    "end": "1050360"
  },
  {
    "text": "terms of resource for your application to run so the idea is allowing uh different types of correlation so to",
    "start": "1050360",
    "end": "1056200"
  },
  {
    "text": "show that the next type of correlation this extension uh uh shows you uh what",
    "start": "1056200",
    "end": "1061640"
  },
  {
    "text": "I'm going to do I'm going to simulate a new deployment so let's say developers worked and they fixed the 500 errors and",
    "start": "1061640",
    "end": "1068960"
  },
  {
    "text": "they reduced the latency to 4 seconds and the way I'm going to simulate this I'm just going to change one of the",
    "start": "1068960",
    "end": "1074799"
  },
  {
    "text": "annotations that we have in this roll out uh to a different value um and when",
    "start": "1074799",
    "end": "1081280"
  },
  {
    "text": "I save this it will trigger a new roll out right so you can see now the new",
    "start": "1081280",
    "end": "1087000"
  },
  {
    "text": "replica set got uh created then there's a new pod being uh initiated so once",
    "start": "1087000",
    "end": "1092880"
  },
  {
    "text": "that is done what I'm going to do is just uh click promote full and go",
    "start": "1092880",
    "end": "1098799"
  },
  {
    "text": "straight to the end I don't want to go o over to each step in this particular roll out um all right so now the roll",
    "start": "1098799",
    "end": "1106159"
  },
  {
    "text": "out is uh concluded uh so as I said I'm simulating a um a fix by the development",
    "start": "1106159",
    "end": "1113919"
  },
  {
    "text": "team and I'm setting the latency to 4 seconds and um if I go and um click back",
    "start": "1113919",
    "end": "1121600"
  },
  {
    "text": "in the roll out resource um let's see what happens",
    "start": "1121600",
    "end": "1127600"
  },
  {
    "text": "now yeah let's click the metrix extension and let me pause here for a",
    "start": "1127600",
    "end": "1132880"
  },
  {
    "text": "second um now you can you can notice that there's a a new icon displaying in the graph",
    "start": "1132880",
    "end": "1138880"
  },
  {
    "text": "and uh what this uh yeah before that sorry you can already see that the graph",
    "start": "1138880",
    "end": "1144360"
  },
  {
    "text": "was uh it is displaying that the latency was was reduced and uh this new this new",
    "start": "1144360",
    "end": "1150480"
  },
  {
    "text": "icon what it relates to it it will bring the the kubernetes event so every",
    "start": "1150480",
    "end": "1156799"
  },
  {
    "text": "kubernetes event related to your uh rollout will will be displayed so that's",
    "start": "1156799",
    "end": "1162080"
  },
  {
    "text": "the next correlation that this particular PL plugin will allow uh",
    "start": "1162080",
    "end": "1167600"
  },
  {
    "text": "consumers and users to to see so they can correlate when specific kubernetes event have happened in their application",
    "start": "1167600",
    "end": "1175720"
  },
  {
    "text": "life cycle and that concludes the metrix extension demo as I said we run this uh",
    "start": "1175720",
    "end": "1181360"
  },
  {
    "text": "in production today adding to it in more than 300 clusters so let's see uh uh",
    "start": "1181360",
    "end": "1187520"
  },
  {
    "text": "let's do a a deep dive right and um understand what what is happening behind",
    "start": "1187520",
    "end": "1193320"
  },
  {
    "text": "the scenes here uh as I said before the the proxy extension uh is is uh actually",
    "start": "1193320",
    "end": "1200960"
  },
  {
    "text": "working in conjunction with UI extension so the UI extension the way it works it",
    "start": "1200960",
    "end": "1206400"
  },
  {
    "text": "will uh it can communicate with Argo CD API server and every single uh uh",
    "start": "1206400",
    "end": "1212080"
  },
  {
    "text": "operation provided by Argo CD API server can be uh leveraged to build any UI",
    "start": "1212080",
    "end": "1217760"
  },
  {
    "text": "extension today we don't need to use proxy extension but in some cases like in The Matrix extension uh we need to",
    "start": "1217760",
    "end": "1225159"
  },
  {
    "text": "retrieve M uh this metric data the data points come from Prometheus right so we",
    "start": "1225159",
    "end": "1231080"
  },
  {
    "text": "don't have that available in Aro City API so the idea here here is extending",
    "start": "1231080",
    "end": "1236400"
  },
  {
    "text": "the Argo C API so it will proxy requests from what's going",
    "start": "1236400",
    "end": "1242000"
  },
  {
    "text": "on oh that's not a good",
    "start": "1242000",
    "end": "1246000"
  },
  {
    "text": "idea no Java version please okay it's",
    "start": "1247039",
    "end": "1252960"
  },
  {
    "text": "right sorry about that",
    "start": "1255880",
    "end": "1260120"
  },
  {
    "text": "okay all right and um all right so let's simulate uh what happens uh when a",
    "start": "1266520",
    "end": "1273880"
  },
  {
    "text": "request is sent from the UI uh UI extension to the proxy extension so when",
    "start": "1273880",
    "end": "1279720"
  },
  {
    "text": "a request reaches the API server the the first layer that it reaches in the API",
    "start": "1279720",
    "end": "1285200"
  },
  {
    "text": "server in this authen is this authentication middle workare and uh the authentication middleware",
    "start": "1285200",
    "end": "1291000"
  },
  {
    "text": "responsibility is to authenticate that request it does so by delegating that test to the session manager uh which",
    "start": "1291000",
    "end": "1297600"
  },
  {
    "text": "lives in a in a different layer inside Argo City Cod base and the request is",
    "start": "1297600",
    "end": "1302840"
  },
  {
    "text": "delegated to the YDC provider preconfigured in your Argo City instance",
    "start": "1302840",
    "end": "1308360"
  },
  {
    "text": "and that is uh if that that validates the token and if everything is fine the",
    "start": "1308360",
    "end": "1314400"
  },
  {
    "text": "request is sent back to the authentication mware and is handed over to to the proxy Handler so the proxy",
    "start": "1314400",
    "end": "1319840"
  },
  {
    "text": "Handler um the first task it does is is authorize that request and it does so by",
    "start": "1319840",
    "end": "1327440"
  },
  {
    "text": "leveraging the Argo City orbac model so it will U extract information from the",
    "start": "1327440",
    "end": "1334159"
  },
  {
    "text": "user and from from from the incoming request um and it will provide to this",
    "start": "1334159",
    "end": "1340120"
  },
  {
    "text": "or back layer in Aro city which uh which is powered by caspin and once this",
    "start": "1340120",
    "end": "1346039"
  },
  {
    "text": "policy is enforced uh then the request is is uh sent over to the back end but",
    "start": "1346039",
    "end": "1352679"
  },
  {
    "text": "before that there's one additional thing that happens is a sanitization so there are some uh sensitive data that is",
    "start": "1352679",
    "end": "1358559"
  },
  {
    "text": "removed from from the request and yeah at the very end the request is finally sent to the backend service so let's see",
    "start": "1358559",
    "end": "1366720"
  },
  {
    "text": "a very hypothetical scenario if someone wants to build um um Naro City extension",
    "start": "1366720",
    "end": "1373880"
  },
  {
    "text": "that leverages a proxy extension and let's see how that would look look like in terms of requests right so the UI",
    "start": "1373880",
    "end": "1382000"
  },
  {
    "text": "part of the extension would have to send a request to the API server uh that looks like this so um the API server",
    "start": "1382000",
    "end": "1389520"
  },
  {
    "text": "host uh Slash extensions slash the name of the extension and then whatever that",
    "start": "1389520",
    "end": "1396320"
  },
  {
    "text": "uh endpoint will be able to handle so in this case I'm exemplifying this uh using",
    "start": "1396320",
    "end": "1401640"
  },
  {
    "text": "htb bean and um so if you familiar with htb Bean any slash anything will just",
    "start": "1401640",
    "end": "1408360"
  },
  {
    "text": "return everything that was sent uh in in the in the request so it will return in the response everything that was sent",
    "start": "1408360",
    "end": "1414679"
  },
  {
    "text": "with the headers things so it's it's good for testing especially proxy uh tools so um when that request gets sent",
    "start": "1414679",
    "end": "1424039"
  },
  {
    "text": "then the proxy extension Handler will identify that this request is uh needs",
    "start": "1424039",
    "end": "1429320"
  },
  {
    "text": "to be um handled by the proxy uh Handler and the name of the extension is HTTP",
    "start": "1429320",
    "end": "1435640"
  },
  {
    "text": "Bean um and it has an internal configuration that htpb extension needs",
    "start": "1435640",
    "end": "1441000"
  },
  {
    "text": "to be forwarded to this uh particular URL here uh which is which lives outside",
    "start": "1441000",
    "end": "1446840"
  },
  {
    "text": "of the cluster hpb.org so it appends that anything in all the headers that are sent if it's a post request it it",
    "start": "1446840",
    "end": "1454000"
  },
  {
    "text": "also sends the the the the request body and uh it really works as as a reverse",
    "start": "1454000",
    "end": "1460440"
  },
  {
    "text": "proxy um okay so let's see what it takes to uh configure this uh this HP being",
    "start": "1460440",
    "end": "1468240"
  },
  {
    "text": "hypothetical extension in Argo CD so the first thing uh that needs to be done is",
    "start": "1468240",
    "end": "1473760"
  },
  {
    "text": "enabling the feature so this is still in Alpha um so the feature was implemented",
    "start": "1473760",
    "end": "1479279"
  },
  {
    "text": "into in Argo CD 2.7 so if you have Argo CD 2.7 and uh later you're already uh",
    "start": "1479279",
    "end": "1486440"
  },
  {
    "text": "able to use uh and leverage this feature but you have to enable first and you do so by editing or patching this config",
    "start": "1486440",
    "end": "1494000"
  },
  {
    "text": "config map Aro City CMD Pam cm and enabling this feature flag okay so the",
    "start": "1494000",
    "end": "1500600"
  },
  {
    "text": "next step is um as I said uh the all requests to the to the to the backend",
    "start": "1500600",
    "end": "1507720"
  },
  {
    "text": "service needs to be authorized first and it does so by as I said um leveraging",
    "start": "1507720",
    "end": "1513480"
  },
  {
    "text": "our our back model and uh it will look like this so the the the configuration",
    "start": "1513480",
    "end": "1518760"
  },
  {
    "text": "to enable this uh htpb um extension to be to be uh to be",
    "start": "1518760",
    "end": "1526360"
  },
  {
    "text": "authorized need would would need to have a pro a policy that looks like this so",
    "start": "1526360",
    "end": "1531520"
  },
  {
    "text": "uh here what I'm doing I'm just uh configuring the read only role uh to",
    "start": "1531520",
    "end": "1537159"
  },
  {
    "text": "invoke uh the extension HTTP with name htpb and the policy is allowed uh okay",
    "start": "1537159",
    "end": "1545120"
  },
  {
    "text": "once this is uh ready and applied the last piece of configuration is adding a new entry in the Argo City uh CM config",
    "start": "1545120",
    "end": "1553320"
  },
  {
    "text": "map uh that looks like this uh the uh there's a new attribute that was was introduced called extension. config",
    "start": "1553320",
    "end": "1560559"
  },
  {
    "text": "which accepts a yo object in it and basically what we do you can configure a",
    "start": "1560559",
    "end": "1566679"
  },
  {
    "text": "list of extensions in it and what we have here is the uh htpb um extension",
    "start": "1566679",
    "end": "1573320"
  },
  {
    "text": "configure targeting uh backend Service uh pointing to this uh specific URL",
    "start": "1573320",
    "end": "1580279"
  },
  {
    "text": "let's say the backend requires authentication so we also uh allow uh a",
    "start": "1580279",
    "end": "1585880"
  },
  {
    "text": "configuration to Define uh headers so in this case and this is something similar",
    "start": "1585880",
    "end": "1591440"
  },
  {
    "text": "that that we use that into it as well so we are able to Define uh uh arbitrary",
    "start": "1591440",
    "end": "1598000"
  },
  {
    "text": "headers here so you can if you if you if you need to to Define additional headers you can um and you can also uh reference",
    "start": "1598000",
    "end": "1605880"
  },
  {
    "text": "uh Argos City secrets so if you're familiar with how how Argo City Secrets work if you use this syntax here it",
    "start": "1605880",
    "end": "1613760"
  },
  {
    "text": "allows uh to uh AR CD will inject that secret from the Aro City secret so you",
    "start": "1613760",
    "end": "1619000"
  },
  {
    "text": "don't have to add this uh secret right in the config Mac because it's a terrible thing to do all right let's",
    "start": "1619000",
    "end": "1626760"
  },
  {
    "text": "move on so this was a um a very very simplistic uh use case let me go uh into",
    "start": "1626760",
    "end": "1633880"
  },
  {
    "text": "uh something a little bit more complex which is exactly what we have uh add into it and uh yeah let me explain how",
    "start": "1633880",
    "end": "1642080"
  },
  {
    "text": "the The Matrix extension actually works in our company so um",
    "start": "1642080",
    "end": "1648279"
  },
  {
    "text": "we have U the deployment model in Argo City where we have Argo City instances",
    "start": "1648279",
    "end": "1653720"
  },
  {
    "text": "syncing clusters uh remotely right so we have uh more than 300 clusters uh uh in",
    "start": "1653720",
    "end": "1661039"
  },
  {
    "text": "the company and 40 Argo City instances sinking uh uh on the sharing the load",
    "start": "1661039",
    "end": "1667320"
  },
  {
    "text": "over those uh 300 clusters um so in this case we will have uh Argo City",
    "start": "1667320",
    "end": "1673080"
  },
  {
    "text": "applications configured with a destination uh with different destination so the same Aros City",
    "start": "1673080",
    "end": "1678960"
  },
  {
    "text": "instance will have a collection of applications and each one of them uh can be deployed in a different cluster right",
    "start": "1678960",
    "end": "1686679"
  },
  {
    "text": "so um um so the the the way the the the the Matrix extension work um it needs it",
    "start": "1686679",
    "end": "1694559"
  },
  {
    "text": "needs some additional uh in a slightly more uh complex configuration because in",
    "start": "1694559",
    "end": "1699720"
  },
  {
    "text": "order to retrieve the metric from that particular application the Prometheus matric actually leaves in the same",
    "start": "1699720",
    "end": "1706760"
  },
  {
    "text": "cluster where the application is deployed so I cannot deploy the backend part of the metrix extension in the same",
    "start": "1706760",
    "end": "1713519"
  },
  {
    "text": "server Argo City runs because the metrix won't be available there so we need to",
    "start": "1713519",
    "end": "1718600"
  },
  {
    "text": "deploy the the metrix server in every single cluster uh that uh We sync uh",
    "start": "1718600",
    "end": "1724320"
  },
  {
    "text": "with Argo City so uh and the way this works is that every request that is sent",
    "start": "1724320",
    "end": "1732000"
  },
  {
    "text": "to the to the to the extension Handler it will uh be required to it will always",
    "start": "1732000",
    "end": "1738200"
  },
  {
    "text": "be made on the context of a an application sln namespace SL project um",
    "start": "1738200",
    "end": "1745440"
  },
  {
    "text": "so with that in mind so then the proxy extension can then inspect to which um",
    "start": "1745440",
    "end": "1752320"
  },
  {
    "text": "application that uh particular request is uh related to and retrieve the",
    "start": "1752320",
    "end": "1757679"
  },
  {
    "text": "application resource see the destination cluster where that cluster is uh uh",
    "start": "1757679",
    "end": "1763080"
  },
  {
    "text": "targeting to and then uh proc use use the dedicated proxy that will forward",
    "start": "1763080",
    "end": "1770640"
  },
  {
    "text": "the request to that particular cluster so let's see how this configuration looks like in real life um so I don't",
    "start": "1770640",
    "end": "1777320"
  },
  {
    "text": "know if you noticed uh the service part of the extension accepts an array um so",
    "start": "1777320",
    "end": "1783640"
  },
  {
    "text": "here I'm defining a matrix extension as the name of the extension and it has",
    "start": "1783640",
    "end": "1789440"
  },
  {
    "text": "multiple service multiple backend services and in the in the service",
    "start": "1789440",
    "end": "1795080"
  },
  {
    "text": "object you can define a new uh this additional attribute called cluster and",
    "start": "1795080",
    "end": "1801000"
  },
  {
    "text": "you can provide the cluster name and the cluster uh the server URL for that for",
    "start": "1801000",
    "end": "1806519"
  },
  {
    "text": "that cluster and the way it works so the every time this uh config map is saved",
    "start": "1806519",
    "end": "1812600"
  },
  {
    "text": "uh if you're using Argo City 2.9 that was released a few days ago this uh will be automatically uh build building a uh",
    "start": "1812600",
    "end": "1821880"
  },
  {
    "text": "um a proxy registry so you don't have to restart the the API server uh anymore",
    "start": "1821880",
    "end": "1828399"
  },
  {
    "text": "and uh the way it works Aro C uh API server will keep this proxy registry in",
    "start": "1828399",
    "end": "1834880"
  },
  {
    "text": "memory it with a list of all proxies for each cluster that it syncs with so",
    "start": "1834880",
    "end": "1842000"
  },
  {
    "text": "that's how it works to uh retrieve the the the metrix from specific cluster",
    "start": "1842000",
    "end": "1847799"
  },
  {
    "text": "okay so that wraps up my part of the proxy extensions I'll will hand back to",
    "start": "1847799",
    "end": "1853799"
  },
  {
    "text": "remon to conclude the talk thanks Leo all",
    "start": "1853799",
    "end": "1860559"
  },
  {
    "text": "right great well if What We Said Today resonated with any of you um we would",
    "start": "1860679",
    "end": "1866000"
  },
  {
    "text": "love it if you created your own extension uh the best way to get started with that is to look at the documentation all of the links that we",
    "start": "1866000",
    "end": "1873200"
  },
  {
    "text": "mentioned today are available uh via the QR code here um but if you're not willing to create your own extension but",
    "start": "1873200",
    "end": "1879440"
  },
  {
    "text": "you have some ideas for some uh we would love to hear from you so reach out to us on the Argo CD slack Channel um or on",
    "start": "1879440",
    "end": "1886159"
  },
  {
    "text": "the Argo CD GitHub open an issue or create a discussion and uh give us your thoughts uh so I think we have a few",
    "start": "1886159",
    "end": "1892600"
  },
  {
    "text": "minutes for some questions uh I think there's microphones in the",
    "start": "1892600",
    "end": "1897960"
  },
  {
    "text": "center um just real quick um so why would you use the metrics um extension instead of a grafana",
    "start": "1899480",
    "end": "1906559"
  },
  {
    "text": "dashboard yeah yeah the idea is not to compete with grafana uh we also have",
    "start": "1906559",
    "end": "1912000"
  },
  {
    "text": "that internally so Our intention was to make that uh um because because as I",
    "start": "1912000",
    "end": "1917559"
  },
  {
    "text": "said we Ed the golden signals right and uh Our intention was to show that",
    "start": "1917559",
    "end": "1923120"
  },
  {
    "text": "dashboard close to the developers so developers already there using Argo CD to the bug issues and we wanted to",
    "start": "1923120",
    "end": "1930120"
  },
  {
    "text": "provide a easy way to correlate uh kubernetes events and also requests and",
    "start": "1930120",
    "end": "1935399"
  },
  {
    "text": "resource consumption uh for for specific uh application so that's what that was",
    "start": "1935399",
    "end": "1940480"
  },
  {
    "text": "our intention the intention was never compete with Gana this is a much more mature project sure sure and then real",
    "start": "1940480",
    "end": "1947480"
  },
  {
    "text": "quick it sounds like there's very few extensions right now like an ecosystem you said there's only two extensions",
    "start": "1947480",
    "end": "1953240"
  },
  {
    "text": "right now no there's very few is that very few yes correct yeah yeah yeah so uh the only that we have developed are",
    "start": "1953240",
    "end": "1958919"
  },
  {
    "text": "the roll outs extension and the timeline extension uh I guess the metrics extension as well uh so yes very few um",
    "start": "1958919",
    "end": "1965440"
  },
  {
    "text": "but yeah if you have ideas we're we're open yeah thank you um first Kudos on live demo that's",
    "start": "1965440",
    "end": "1972519"
  },
  {
    "text": "awesome that worked um question on the the metrics for example uh obviously",
    "start": "1972519",
    "end": "1978080"
  },
  {
    "text": "that would I'm super excited to try it I haven't tried it yet but uh I was wondering it looks like it's a fixed window right maybe it's 15 minutes or 1",
    "start": "1978080",
    "end": "1984639"
  },
  {
    "text": "hour whatever it is I was wondering if the extensions allow for controls where you can pass in parameters saying hey",
    "start": "1984639",
    "end": "1991440"
  },
  {
    "text": "instead of whatever that time window is I want to extend it yeah today the the the metrix",
    "start": "1991440",
    "end": "1998200"
  },
  {
    "text": "extension allows you to Define uh uh to look back uh in 1 hour 2 hours and 6",
    "start": "1998200",
    "end": "2005240"
  },
  {
    "text": "hours that's the configuration we have this is totally configurable uh because we have internal constraints in the",
    "start": "2005240",
    "end": "2011200"
  },
  {
    "text": "company we just allow users to look back uh for these time ranges but this is also configurable so I didn't show the",
    "start": "2011200",
    "end": "2018159"
  },
  {
    "text": "metrix extension configuration all the possibilities there but there there's a qu quite a few and uh to be very honest",
    "start": "2018159",
    "end": "2024799"
  },
  {
    "text": "with you we need help documenting it so if you're uh willing to to to try it out",
    "start": "2024799",
    "end": "2030679"
  },
  {
    "text": "please reach out we can we can help you out um thank you thank",
    "start": "2030679",
    "end": "2035960"
  },
  {
    "text": "you uh for the proxy extensions um if I",
    "start": "2035960",
    "end": "2041679"
  },
  {
    "text": "don't need like a unique endpoint per cluster that my Argo C manages do I have to like paste the same one for each",
    "start": "2041679",
    "end": "2048919"
  },
  {
    "text": "cluster I have or is there like a default if if you sink Argo CD with different clusters you would have to add",
    "start": "2048919",
    "end": "2056118"
  },
  {
    "text": "that that in the extension configuration that's the only way that we can uh uh",
    "start": "2056119",
    "end": "2062800"
  },
  {
    "text": "correlate that particular Aro City application to which cluster in needs to be uh synced and and and to where it to",
    "start": "2062800",
    "end": "2071240"
  },
  {
    "text": "retrieve the the the Matrix extension so I'm not sure if I understood your question 100% okay and the other one was",
    "start": "2071240",
    "end": "2079358"
  },
  {
    "text": "um what how much information about like who invoke the extension comes through",
    "start": "2079359",
    "end": "2084398"
  },
  {
    "text": "to the proxy extension I know you get past certain headers about like the",
    "start": "2084399",
    "end": "2089560"
  },
  {
    "text": "application but uh uh but I was curious to see like if I",
    "start": "2089560",
    "end": "2095040"
  },
  {
    "text": "wanted to look back and say like if this who like invoked this extension yeah",
    "start": "2095040",
    "end": "2101400"
  },
  {
    "text": "that's totally doable because when uh the request reaches the proxy Handler uh",
    "start": "2101400",
    "end": "2106560"
  },
  {
    "text": "uh at that point um the proxy Handler knows uh he has the cookie session so",
    "start": "2106560",
    "end": "2114440"
  },
  {
    "text": "this is sent to the UI so the however if you want to know that specific",
    "start": "2114440",
    "end": "2120280"
  },
  {
    "text": "information in the extension itself that is today not uh part of the request so",
    "start": "2120280",
    "end": "2126119"
  },
  {
    "text": "what all all we provide to the backend uh to the backend service is uh the the",
    "start": "2126119",
    "end": "2132440"
  },
  {
    "text": "the application that uh extension is related to the project and the name space so the actual user is not sent",
    "start": "2132440",
    "end": "2140440"
  },
  {
    "text": "over to the to the to the prod to the to the backend service sorry is that logged",
    "start": "2140440",
    "end": "2146359"
  },
  {
    "text": "in an event somewhere if it if that is logged logged",
    "start": "2146359",
    "end": "2151760"
  },
  {
    "text": "and like or like sent out as a kubernetes event no I don't think it is no not",
    "start": "2151760",
    "end": "2159880"
  },
  {
    "text": "today all right uh I think that is time so thank everyone for",
    "start": "2159880",
    "end": "2165170"
  },
  {
    "text": "[Applause] attending",
    "start": "2165170",
    "end": "2170359"
  }
]