[
  {
    "text": "all right thank you boss",
    "start": "240",
    "end": "3480"
  },
  {
    "text": "all right so hi there welcome to",
    "start": "3480",
    "end": "6240"
  },
  {
    "text": "fungusilefc",
    "start": "6240",
    "end": "9240"
  },
  {
    "text": "um my name is Jesus gonzaleza Labs at",
    "start": "9300",
    "end": "12120"
  },
  {
    "text": "the office of the CTO with some other",
    "start": "12120",
    "end": "13860"
  },
  {
    "text": "folks over there",
    "start": "13860",
    "end": "15540"
  },
  {
    "text": "um let's talk about circulite so I",
    "start": "15540",
    "end": "17940"
  },
  {
    "text": "assume everyone here really knows about",
    "start": "17940",
    "end": "19440"
  },
  {
    "text": "circulite so I'm gonna highlight just",
    "start": "19440",
    "end": "21539"
  },
  {
    "text": "one single aspect",
    "start": "21539",
    "end": "23760"
  },
  {
    "text": "um it's the most used DV engine",
    "start": "23760",
    "end": "26400"
  },
  {
    "text": "worldwide you can find it into your",
    "start": "26400",
    "end": "28980"
  },
  {
    "text": "smartphone you can find it into your",
    "start": "28980",
    "end": "30900"
  },
  {
    "text": "tablet",
    "start": "30900",
    "end": "32099"
  },
  {
    "text": "you also can find it into your browser",
    "start": "32099",
    "end": "34920"
  },
  {
    "text": "or even in some iot devices appliances",
    "start": "34920",
    "end": "37680"
  },
  {
    "text": "and even in your car",
    "start": "37680",
    "end": "39540"
  },
  {
    "text": "so",
    "start": "39540",
    "end": "41160"
  },
  {
    "text": "that's a notion about how important",
    "start": "41160",
    "end": "43200"
  },
  {
    "text": "really is sqlite so we thought that to",
    "start": "43200",
    "end": "47100"
  },
  {
    "text": "bring more application into the",
    "start": "47100",
    "end": "48660"
  },
  {
    "text": "webassembly ecosystem it would be great",
    "start": "48660",
    "end": "50940"
  },
  {
    "text": "to have sqlite build for wassce",
    "start": "50940",
    "end": "54239"
  },
  {
    "text": "all right so how would you compile",
    "start": "54239",
    "end": "56160"
  },
  {
    "text": "circulite",
    "start": "56160",
    "end": "57840"
  },
  {
    "text": "so if you look at the traditional tool",
    "start": "57840",
    "end": "60960"
  },
  {
    "text": "chain you will make use of a c standard",
    "start": "60960",
    "end": "63780"
  },
  {
    "text": "Library",
    "start": "63780",
    "end": "64680"
  },
  {
    "text": "that will allow your source code to",
    "start": "64680",
    "end": "68159"
  },
  {
    "text": "you know emit some Cisco to apostix OS",
    "start": "68159",
    "end": "73080"
  },
  {
    "text": "and if you want to build it as a web",
    "start": "73080",
    "end": "75540"
  },
  {
    "text": "assembly for the browser you can make",
    "start": "75540",
    "end": "77520"
  },
  {
    "text": "use of a tool chain like M scripting",
    "start": "77520",
    "end": "79979"
  },
  {
    "text": "and by the way this is what we use back",
    "start": "79979",
    "end": "82860"
  },
  {
    "text": "in July last year to Showcase how",
    "start": "82860",
    "end": "85080"
  },
  {
    "text": "WordPress could be run entirely in in",
    "start": "85080",
    "end": "87659"
  },
  {
    "text": "your browser powered by sqlite",
    "start": "87659",
    "end": "91380"
  },
  {
    "text": "and you can also believe for you know as",
    "start": "91380",
    "end": "94799"
  },
  {
    "text": "webassembly for the server using a tool",
    "start": "94799",
    "end": "97439"
  },
  {
    "text": "chain like wasi SDK",
    "start": "97439",
    "end": "99360"
  },
  {
    "text": "it will make use of wasi Lipsy which is",
    "start": "99360",
    "end": "102540"
  },
  {
    "text": "an implementation that will map some of",
    "start": "102540",
    "end": "105479"
  },
  {
    "text": "the post-exist calls into vocals and for",
    "start": "105479",
    "end": "109259"
  },
  {
    "text": "the missing features he will try to",
    "start": "109259",
    "end": "111320"
  },
  {
    "text": "excuse me to emulate them",
    "start": "111320",
    "end": "114780"
  },
  {
    "text": "um",
    "start": "114780",
    "end": "115500"
  },
  {
    "text": "now if we focus on the letter use case",
    "start": "115500",
    "end": "121200"
  },
  {
    "text": "um from the developer point of view the",
    "start": "121200",
    "end": "123899"
  },
  {
    "text": "workflow is pretty much the same than in",
    "start": "123899",
    "end": "126420"
  },
  {
    "text": "the traditional tool chain",
    "start": "126420",
    "end": "128459"
  },
  {
    "text": "so if you remember that ACT test you",
    "start": "128459",
    "end": "130979"
  },
  {
    "text": "know like if it looks like a duck swims",
    "start": "130979",
    "end": "133800"
  },
  {
    "text": "like a duck and works like a dag it will",
    "start": "133800",
    "end": "136680"
  },
  {
    "text": "probably probably attack right",
    "start": "136680",
    "end": "139620"
  },
  {
    "text": "um it turns out that for what he lives c",
    "start": "139620",
    "end": "143459"
  },
  {
    "text": "um it looks like posix",
    "start": "143459",
    "end": "145580"
  },
  {
    "text": "compiles like posix but is definitely",
    "start": "145580",
    "end": "148860"
  },
  {
    "text": "not posix",
    "start": "148860",
    "end": "151140"
  },
  {
    "text": "part of the reason is because of the",
    "start": "151140",
    "end": "153360"
  },
  {
    "text": "emulated functions",
    "start": "153360",
    "end": "156000"
  },
  {
    "text": "and they assist to work around some of",
    "start": "156000",
    "end": "157980"
  },
  {
    "text": "the missing pieces in wassce and",
    "start": "157980",
    "end": "159959"
  },
  {
    "text": "webassembly",
    "start": "159959",
    "end": "161519"
  },
  {
    "text": "they are API compatible so you don't",
    "start": "161519",
    "end": "164760"
  },
  {
    "text": "need to change the source code",
    "start": "164760",
    "end": "167220"
  },
  {
    "text": "and you must activate them explicitly",
    "start": "167220",
    "end": "171120"
  },
  {
    "text": "which by the way I I believe it's a you",
    "start": "171120",
    "end": "174060"
  },
  {
    "text": "know smart decision",
    "start": "174060",
    "end": "176959"
  },
  {
    "text": "um",
    "start": "177120",
    "end": "177780"
  },
  {
    "text": "so let me share now what was our",
    "start": "177780",
    "end": "180120"
  },
  {
    "text": "experience with one of those simulated",
    "start": "180120",
    "end": "182160"
  },
  {
    "text": "functions while trying to Port seculite",
    "start": "182160",
    "end": "184800"
  },
  {
    "text": "into wasi",
    "start": "184800",
    "end": "187319"
  },
  {
    "text": "so first of all the implementation of",
    "start": "187319",
    "end": "190739"
  },
  {
    "text": "was ellipsey I mean the M map",
    "start": "190739",
    "end": "193260"
  },
  {
    "text": "implementation in wasilif C doesn't",
    "start": "193260",
    "end": "195720"
  },
  {
    "text": "really pretend to fulfill the posix",
    "start": "195720",
    "end": "198840"
  },
  {
    "text": "specification",
    "start": "198840",
    "end": "201840"
  },
  {
    "text": "one of the limitations is that it won't",
    "start": "201900",
    "end": "204000"
  },
  {
    "text": "write back into the file system once I",
    "start": "204000",
    "end": "206580"
  },
  {
    "text": "mean once you are done we you know with",
    "start": "206580",
    "end": "208620"
  },
  {
    "text": "your map file you map a file into the",
    "start": "208620",
    "end": "211500"
  },
  {
    "text": "into the memory",
    "start": "211500",
    "end": "213480"
  },
  {
    "text": "but also and more importantly it won't",
    "start": "213480",
    "end": "216540"
  },
  {
    "text": "return you alignment memory so this",
    "start": "216540",
    "end": "219360"
  },
  {
    "text": "particular limitation you know gave us a",
    "start": "219360",
    "end": "222000"
  },
  {
    "text": "strong headache while proteinsiculite",
    "start": "222000",
    "end": "224580"
  },
  {
    "text": "because",
    "start": "224580",
    "end": "226560"
  },
  {
    "text": "the side effect was that SQL wasn't able",
    "start": "226560",
    "end": "229500"
  },
  {
    "text": "to read some of the databases while it",
    "start": "229500",
    "end": "231599"
  },
  {
    "text": "worked with others",
    "start": "231599",
    "end": "233580"
  },
  {
    "text": "so that was at the same time you know",
    "start": "233580",
    "end": "236159"
  },
  {
    "text": "hard and fun to debug",
    "start": "236159",
    "end": "239840"
  },
  {
    "text": "so let me share a couple of takeaways",
    "start": "240360",
    "end": "244019"
  },
  {
    "text": "from our lessons we learned by porting",
    "start": "244019",
    "end": "246299"
  },
  {
    "text": "secular into wasi that I do believe it",
    "start": "246299",
    "end": "249000"
  },
  {
    "text": "will be useful for other C C plus plus",
    "start": "249000",
    "end": "251420"
  },
  {
    "text": "code bases",
    "start": "251420",
    "end": "253739"
  },
  {
    "text": "so first of all you really really really",
    "start": "253739",
    "end": "256320"
  },
  {
    "text": "want to understand the differences",
    "start": "256320",
    "end": "258359"
  },
  {
    "text": "between the two the different tool",
    "start": "258359",
    "end": "260100"
  },
  {
    "text": "chains",
    "start": "260100",
    "end": "261720"
  },
  {
    "text": "and as an example you know process ident",
    "start": "261720",
    "end": "264660"
  },
  {
    "text": "processes identifiers they don't have",
    "start": "264660",
    "end": "266580"
  },
  {
    "text": "any sense on webassembly",
    "start": "266580",
    "end": "268919"
  },
  {
    "text": "so wasilif C do you know just returns a",
    "start": "268919",
    "end": "272580"
  },
  {
    "text": "fixed value there and I believe that",
    "start": "272580",
    "end": "275820"
  },
  {
    "text": "will work in you know 99.99 of their",
    "start": "275820",
    "end": "279060"
  },
  {
    "text": "cases but it could be the it could",
    "start": "279060",
    "end": "280979"
  },
  {
    "text": "happen that it won't work in others",
    "start": "280979",
    "end": "284160"
  },
  {
    "text": "also remember that wasi is not posix",
    "start": "284160",
    "end": "287880"
  },
  {
    "text": "they have a common core like you know",
    "start": "287880",
    "end": "290820"
  },
  {
    "text": "opening file closing files",
    "start": "290820",
    "end": "293340"
  },
  {
    "text": "there are missing pieces as I mentioned",
    "start": "293340",
    "end": "295320"
  },
  {
    "text": "before and unfortunately we are keep",
    "start": "295320",
    "end": "297900"
  },
  {
    "text": "standing Washi with new set of features",
    "start": "297900",
    "end": "300180"
  },
  {
    "text": "like washing and wasi Cloud",
    "start": "300180",
    "end": "302460"
  },
  {
    "text": "Etc",
    "start": "302460",
    "end": "304560"
  },
  {
    "text": "the second main takeaway is that if",
    "start": "304560",
    "end": "307560"
  },
  {
    "text": "compiled it doesn't necessarily mean",
    "start": "307560",
    "end": "310139"
  },
  {
    "text": "that it will work",
    "start": "310139",
    "end": "312900"
  },
  {
    "text": "um",
    "start": "312900",
    "end": "313740"
  },
  {
    "text": "so here is kind of a few steps that I",
    "start": "313740",
    "end": "316380"
  },
  {
    "text": "would suggest to follow",
    "start": "316380",
    "end": "317880"
  },
  {
    "text": "the first one is you go on directly on",
    "start": "317880",
    "end": "320880"
  },
  {
    "text": "debug what is the outcome from wasi and",
    "start": "320880",
    "end": "323820"
  },
  {
    "text": "wasilisi because it probably I mean",
    "start": "323820",
    "end": "325500"
  },
  {
    "text": "there are good chains that it's not what",
    "start": "325500",
    "end": "327600"
  },
  {
    "text": "your software is expecting",
    "start": "327600",
    "end": "330000"
  },
  {
    "text": "so if you still doesn't I mean if you",
    "start": "330000",
    "end": "331979"
  },
  {
    "text": "find the root cause there",
    "start": "331979",
    "end": "333960"
  },
  {
    "text": "um",
    "start": "333960",
    "end": "334800"
  },
  {
    "text": "you should try",
    "start": "334800",
    "end": "336720"
  },
  {
    "text": "to disable that feature that is missing",
    "start": "336720",
    "end": "339120"
  },
  {
    "text": "in Washington",
    "start": "339120",
    "end": "340919"
  },
  {
    "text": "and that's what we did with Escalade",
    "start": "340919",
    "end": "343860"
  },
  {
    "text": "because it was relying on a full and map",
    "start": "343860",
    "end": "347100"
  },
  {
    "text": "implementation that wasn't there",
    "start": "347100",
    "end": "349979"
  },
  {
    "text": "fortunately for us",
    "start": "349979",
    "end": "352320"
  },
  {
    "text": "disabling",
    "start": "352320",
    "end": "353880"
  },
  {
    "text": "M map in circular was easy because I",
    "start": "353880",
    "end": "356460"
  },
  {
    "text": "mean SQL was designed to not use it at",
    "start": "356460",
    "end": "360300"
  },
  {
    "text": "the cost of using a less performant",
    "start": "360300",
    "end": "363800"
  },
  {
    "text": "journaling method but it would work",
    "start": "363800",
    "end": "367860"
  },
  {
    "text": "and finally if you cannot disable you",
    "start": "367860",
    "end": "370080"
  },
  {
    "text": "should really try to patch it",
    "start": "370080",
    "end": "372120"
  },
  {
    "text": "um",
    "start": "372120",
    "end": "372840"
  },
  {
    "text": "that was something that we found not in",
    "start": "372840",
    "end": "374639"
  },
  {
    "text": "circular but in PHP in the I mean in The",
    "start": "374639",
    "end": "377340"
  },
  {
    "text": "Interpreter and as you can imagine you",
    "start": "377340",
    "end": "379500"
  },
  {
    "text": "cannot disable The Interpreter because",
    "start": "379500",
    "end": "380880"
  },
  {
    "text": "it's part of the of the core function so",
    "start": "380880",
    "end": "383460"
  },
  {
    "text": "we had to work around and Patch it with",
    "start": "383460",
    "end": "385620"
  },
  {
    "text": "a different way to get alignment memory",
    "start": "385620",
    "end": "389600"
  },
  {
    "text": "um with that that's all I have for today",
    "start": "390060",
    "end": "391979"
  },
  {
    "text": "I hope you find it useful",
    "start": "391979",
    "end": "394319"
  },
  {
    "text": "um thank you thank you for your",
    "start": "394319",
    "end": "395580"
  },
  {
    "text": "attention see you around",
    "start": "395580",
    "end": "397320"
  },
  {
    "text": "[Applause]",
    "start": "397320",
    "end": "403259"
  },
  {
    "text": "thank you very much for the presentation",
    "start": "403259",
    "end": "405479"
  },
  {
    "text": "Jesus I think we have time for one",
    "start": "405479",
    "end": "407520"
  },
  {
    "text": "question before the next one",
    "start": "407520",
    "end": "410780"
  },
  {
    "text": "hey great presentation",
    "start": "415520",
    "end": "417720"
  },
  {
    "text": "um I was wondering if there are any uh",
    "start": "417720",
    "end": "419340"
  },
  {
    "text": "system call functions that you found",
    "start": "419340",
    "end": "421199"
  },
  {
    "text": "that you could not patch",
    "start": "421199",
    "end": "423180"
  },
  {
    "text": "sorry a good thing here because of the",
    "start": "423180",
    "end": "425100"
  },
  {
    "text": "background noise oh sure I was wondering",
    "start": "425100",
    "end": "427620"
  },
  {
    "text": "if there were any functions that you",
    "start": "427620",
    "end": "428819"
  },
  {
    "text": "found when you were doing this that you",
    "start": "428819",
    "end": "430199"
  },
  {
    "text": "could not patch",
    "start": "430199",
    "end": "431699"
  },
  {
    "text": "oh yeah",
    "start": "431699",
    "end": "433680"
  },
  {
    "text": "um",
    "start": "433680",
    "end": "435419"
  },
  {
    "text": "well I do believe that",
    "start": "435419",
    "end": "438539"
  },
  {
    "text": "well let's use a mapasana that's what",
    "start": "438539",
    "end": "441180"
  },
  {
    "text": "this is simple so in posix a map is kind",
    "start": "441180",
    "end": "444720"
  },
  {
    "text": "of a Swiss knife",
    "start": "444720",
    "end": "446639"
  },
  {
    "text": "so depending on the use of that function",
    "start": "446639",
    "end": "449880"
  },
  {
    "text": "there is no way to patch it like",
    "start": "449880",
    "end": "454520"
  },
  {
    "text": "um",
    "start": "454620",
    "end": "455639"
  },
  {
    "text": "so for example in the in the sense of",
    "start": "455639",
    "end": "457199"
  },
  {
    "text": "the memory if you really want allocated",
    "start": "457199",
    "end": "459360"
  },
  {
    "text": "memory that will imply that in the",
    "start": "459360",
    "end": "461280"
  },
  {
    "text": "webassembly module linear memory you",
    "start": "461280",
    "end": "463199"
  },
  {
    "text": "will waste a lot of memory because of",
    "start": "463199",
    "end": "467099"
  },
  {
    "text": "the minimum page size that in",
    "start": "467099",
    "end": "468960"
  },
  {
    "text": "webassembly 64 kilobytes and in the",
    "start": "468960",
    "end": "471539"
  },
  {
    "text": "linear memory you know in in the x86 is",
    "start": "471539",
    "end": "474419"
  },
  {
    "text": "just four kilobytes so the way was he",
    "start": "474419",
    "end": "476580"
  },
  {
    "text": "lives C",
    "start": "476580",
    "end": "477960"
  },
  {
    "text": "is using that function",
    "start": "477960",
    "end": "481560"
  },
  {
    "text": "it needs to provide a header into the",
    "start": "481560",
    "end": "484259"
  },
  {
    "text": "linear memory",
    "start": "484259",
    "end": "485639"
  },
  {
    "text": "before the memory that you are mapping",
    "start": "485639",
    "end": "488520"
  },
  {
    "text": "actually so I don't see a way an easy",
    "start": "488520",
    "end": "490979"
  },
  {
    "text": "way to patch that unless you don't you",
    "start": "490979",
    "end": "493740"
  },
  {
    "text": "don't care of wasting a lot of memory in",
    "start": "493740",
    "end": "495419"
  },
  {
    "text": "webassembly I think that's one of the",
    "start": "495419",
    "end": "497460"
  },
  {
    "text": "simple I have others that we can catch",
    "start": "497460",
    "end": "499620"
  },
  {
    "text": "our fly and tell you yeah",
    "start": "499620",
    "end": "502680"
  },
  {
    "text": "thank you for the presentation uh Jesus",
    "start": "502680",
    "end": "505259"
  },
  {
    "text": "please give a round of applause",
    "start": "505259",
    "end": "507950"
  },
  {
    "text": "[Applause]",
    "start": "507950",
    "end": "511779"
  }
]