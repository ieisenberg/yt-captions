[
  {
    "text": "all right welcome everyone to scratching the surface uh we are going to be simulating kubernetes today using the",
    "start": "480",
    "end": "7640"
  },
  {
    "text": "MIT scratch programming language uh and before you ask yourself why in the world",
    "start": "7640",
    "end": "13000"
  },
  {
    "text": "would anyone simulate kubernetes in the MIT scratch programming language uh let's set some context as we get started",
    "start": "13000",
    "end": "20119"
  },
  {
    "text": "how many of you have ever uh engaged with a getting started with kubernetes",
    "start": "20119",
    "end": "25279"
  },
  {
    "text": "guide an intro guide that looked something like this okay yeah I see a couple hands I",
    "start": "25279",
    "end": "31439"
  },
  {
    "text": "think I've written a couple so guilty as charged I don't want to shame or blame",
    "start": "31439",
    "end": "37399"
  },
  {
    "text": "any of these These are well-intentioned people but I think that the key problem to most getting started guides that I",
    "start": "37399",
    "end": "43480"
  },
  {
    "text": "read is that they are written by people a lot like me my name is Mitch Connors",
    "start": "43480",
    "end": "50520"
  },
  {
    "text": "I'm a principal software engineer for Microsoft I've been a maintainer on the iso project for six years now where I",
    "start": "50520",
    "end": "56840"
  },
  {
    "text": "currently serve on the TOC I'm also a CNC Ambassador and that is a list of",
    "start": "56840",
    "end": "62199"
  },
  {
    "text": "reasons why I should not be allowed to give an intro to kubernetes talk uh I",
    "start": "62199",
    "end": "67960"
  },
  {
    "text": "have not been intro to kubernetes in quite some time I'm way too far down in the weeds and I immediately want to tell",
    "start": "67960",
    "end": "73320"
  },
  {
    "text": "you about how cool validating admission policies are when you don't know what a pot is they're not that",
    "start": "73320",
    "end": "79159"
  },
  {
    "text": "cool so what we need for a talk like this is someone who is indeed new to the",
    "start": "79159",
    "end": "84920"
  },
  {
    "text": "community so that we can see kubernetes through new eyes uh I'm hopeful that this will help the those of us who are",
    "start": "84920",
    "end": "90479"
  },
  {
    "text": "new to cubec con new to kubernetes to understand some of the fundamentals of the project and how it works what makes",
    "start": "90479",
    "end": "95720"
  },
  {
    "text": "it great but I'm also hopeful that for those of us who have been around in the community for quite a long time this",
    "start": "95720",
    "end": "101159"
  },
  {
    "text": "will give us a new perspective on what's important what matters and where the next generation will take kubernetes so",
    "start": "101159",
    "end": "108079"
  },
  {
    "text": "for that I'd like to invite my designated expert non-expert also my son",
    "start": "108079",
    "end": "113360"
  },
  {
    "text": "Jude coners up to the stage",
    "start": "113360",
    "end": "117560"
  },
  {
    "text": "and just for the audience's sake Jude did I make you do this no all right are",
    "start": "121680",
    "end": "126960"
  },
  {
    "text": "you turned on on your mic there okay good so Jude why don't you tell us a little bit about yourself hello I'm",
    "start": "126960",
    "end": "134400"
  },
  {
    "text": "Jude I started coding about 2 years ago um in my free time I like to read books",
    "start": "134400",
    "end": "142200"
  },
  {
    "text": "and play games currently my favorite games are MTG and",
    "start": "142200",
    "end": "148120"
  },
  {
    "text": "Warhammer all right we got some fans in the room that's good and Jude how many years of experience do you have with",
    "start": "148840",
    "end": "154319"
  },
  {
    "text": "kubernetes none okay okay well then we're in the right place there's a QR",
    "start": "154319",
    "end": "159519"
  },
  {
    "text": "code on this slide that's going to connect you to our uh demo and I'm going to keep it up for the next couple of",
    "start": "159519",
    "end": "164560"
  },
  {
    "text": "slides I always end up pointing it up and then moving off of that slide with about 5 Seconds notice so it's going to",
    "start": "164560",
    "end": "169840"
  },
  {
    "text": "be there for a little bit so Jude to get us started why don't you tell us in 30",
    "start": "169840",
    "end": "175000"
  },
  {
    "text": "seconds what is kubernetes kubernetes basically scheduled",
    "start": "175000",
    "end": "180640"
  },
  {
    "text": "different pods or programs to a variety of nodes or computers so it's like a",
    "start": "180640",
    "end": "186840"
  },
  {
    "text": "calendar app no um basically once they're scheduled the",
    "start": "186840",
    "end": "194560"
  },
  {
    "text": "cubet runs them on that computer making it so that if one computer crashes your",
    "start": "194560",
    "end": "200519"
  },
  {
    "text": "entire application doesn't fail okay so a lot about resiliency a lot about scale there we'll be able to",
    "start": "200519",
    "end": "206799"
  },
  {
    "text": "dig into those topics here in just a minute as we get started there's a few items of sort of vocabulary or",
    "start": "206799",
    "end": "213040"
  },
  {
    "text": "foundational principles that we want to cover uh and probably oh I haven't brought Jude can you go grab my",
    "start": "213040",
    "end": "220120"
  },
  {
    "text": "backpack probably uh a lot of you when you got started in computer science did you ever do the peanut butter and jelly",
    "start": "220120",
    "end": "226000"
  },
  {
    "text": "experiment with your kids you're going to act like a robot and they're supposed to give you instructions for how to make",
    "start": "226000",
    "end": "232159"
  },
  {
    "text": "a peanut butter and jelly sandwich and usually the results if it's done right look something like what you have up on",
    "start": "232159",
    "end": "237799"
  },
  {
    "text": "the screen uh a not all of this but a lot of this is",
    "start": "237799",
    "end": "243480"
  },
  {
    "text": "because humans have a hard time speaking the way that computers expect us or to",
    "start": "243480",
    "end": "248560"
  },
  {
    "text": "speak uh typically computer apis have been written imperatively that means you",
    "start": "248560",
    "end": "254560"
  },
  {
    "text": "tell them what to do and they will do it whether it was a good idea or not regardless of what you told them to do",
    "start": "254560",
    "end": "260160"
  },
  {
    "text": "before or not uh kubernetes is not imperative kubernetes is declarative and",
    "start": "260160",
    "end": "265360"
  },
  {
    "text": "that's a little bit of a hard concept to wrap our heads around so to get started uh we're going to give an example of a",
    "start": "265360",
    "end": "272080"
  },
  {
    "text": "declarative API versus an imperative API dude can you open",
    "start": "272080",
    "end": "279080"
  },
  {
    "text": "that what we got here we've got a captain Cube and we've got some kubernetes the ping pong ball they've",
    "start": "281639",
    "end": "287680"
  },
  {
    "text": "got kubernetes pickle ball now I'm still waiting for kubernetes the flamethrower to show up in the cncf store come on ask",
    "start": "287680",
    "end": "295680"
  },
  {
    "text": "Elon if he can spot us a couple all all right so Jude I want you",
    "start": "295680",
    "end": "302240"
  },
  {
    "text": "to do everything I tell you to in imperative mode so go ahead and uh hang",
    "start": "302240",
    "end": "308479"
  },
  {
    "text": "on to this ball for me hold this ball for me hold this ball for me hold this",
    "start": "308479",
    "end": "314520"
  },
  {
    "text": "for me all right so Jude did exactly what I told him to do uh and nothing",
    "start": "314520",
    "end": "319639"
  },
  {
    "text": "that I expected uh any parent giving instructions to their children would have been very frustrated with that",
    "start": "319639",
    "end": "325400"
  },
  {
    "text": "interaction right we've got some corrective action to take so humans tend to speak a bit more declaratively and we",
    "start": "325400",
    "end": "332840"
  },
  {
    "text": "tend to use the word let uh when we talk about declarative API so Jude don't let",
    "start": "332840",
    "end": "338240"
  },
  {
    "text": "Captain Cube Hit the Floor don't let this ball hit the floor don't let this ball hit the floor don't let this ball",
    "start": "338240",
    "end": "344000"
  },
  {
    "text": "hit the floor or this ball hit the floor good luck that's declarative mode I've given",
    "start": "344000",
    "end": "349840"
  },
  {
    "text": "Jude rules and you notice Jude had to switch hands a couple of times there he had to load balance between uh the",
    "start": "349840",
    "end": "357440"
  },
  {
    "text": "resources that he had you might say there was some scheduling going on uh Jude did whatever it took to make the",
    "start": "357440",
    "end": "364000"
  },
  {
    "text": "rules that I gave true uh eventually I could have given him so many ping pong balls and I I brought another thing of",
    "start": "364000",
    "end": "371039"
  },
  {
    "text": "them that uh they just spill all over the floor because there's just not enough hands to keep them from falling",
    "start": "371039",
    "end": "376720"
  },
  {
    "text": "on the floor he'd need to get some help in fulfilling those rules but that's how a declarative API works and that's going",
    "start": "376720",
    "end": "382440"
  },
  {
    "text": "to be a core concept for kubernetes all right so anybody somewhere that I can throw want a captain Cube here we go",
    "start": "382440",
    "end": "390160"
  },
  {
    "text": "I'd throw pingpong balls but I think they won't make it past the first row I should have planned this out let's see here oh just to the first row well you",
    "start": "390160",
    "end": "397039"
  },
  {
    "text": "can come up and grab a pingpong ball afterwards I don't need to demonstrate my lack of throwing skills for you",
    "start": "397039",
    "end": "403400"
  },
  {
    "text": "all all right another core concept that we're going to need to talk about not core to kubernetes but core to what we're doing today is scratch so scratch",
    "start": "403400",
    "end": "410199"
  },
  {
    "text": "is a graphical programming language developed by MIT to help students get an",
    "start": "410199",
    "end": "415240"
  },
  {
    "text": "introduction to software engineering without necessarily having to know how to type to read complex curly braces and",
    "start": "415240",
    "end": "421639"
  },
  {
    "text": "square braces and parentheses uh to tell what a TI is ETC",
    "start": "421639",
    "end": "426960"
  },
  {
    "text": "uh so it's a great way for kids to get started building kubernetes or sorry no building video games not such a great",
    "start": "426960",
    "end": "432479"
  },
  {
    "text": "way to get started building uh kubernetes simulator and after Jude and I wrote the cfp we actually found there",
    "start": "432479",
    "end": "437800"
  },
  {
    "text": "was some functionality that was missing so I want to introduce you to Berkeley snap snap started as a plugin for",
    "start": "437800",
    "end": "445440"
  },
  {
    "text": "scratch that allowed you to create custom blocks and over time it evolved in 2014 they actually forked the project",
    "start": "445440",
    "end": "451599"
  },
  {
    "text": "all together as you can see it's very similar to the scratch programming environment just with more functions",
    "start": "451599",
    "end": "456879"
  },
  {
    "text": "that you're able to make use of so uh we're not going to be using MIT scratch as advertised sorry to disappoint you",
    "start": "456879",
    "end": "462720"
  },
  {
    "text": "all we're going to be using snap that being said updating the talk name to snapping the surface just really didn't",
    "start": "462720",
    "end": "468720"
  },
  {
    "text": "have the same ring to it so we've gone ahead and left it as is we're going to tackle kubernetes across three modules",
    "start": "468720",
    "end": "475199"
  },
  {
    "text": "this morning we're going to talk about theer the replicator and the employment",
    "start": "475199",
    "end": "480800"
  },
  {
    "text": "last couple of things before we get started we can deep dive into each of these modules and their code uh there's",
    "start": "480800",
    "end": "485919"
  },
  {
    "text": "a we need to set some expectations um if you thought that you were going to see running containers and rest servers",
    "start": "485919",
    "end": "492440"
  },
  {
    "text": "implemented in kubernetes or implemented in MIT scratch I want to apologize right",
    "start": "492440",
    "end": "497560"
  },
  {
    "text": "now this is a simulator not a reimplementation uh this will not pass",
    "start": "497560",
    "end": "502759"
  },
  {
    "text": "the kubernetes conformance tests in any way shape or form the purpose here is rather to demonstrate to you how",
    "start": "502759",
    "end": "509639"
  },
  {
    "text": "kubernetes responds to different situations So to that end we're not using yaml to declare any of our objects",
    "start": "509639",
    "end": "515320"
  },
  {
    "text": "or anything along those lines we're simply starting with the objects themselves to understand what does",
    "start": "515320",
    "end": "521159"
  },
  {
    "text": "kubernetes do we can get into Nam spacing and labeling Etc later on uh because scratch lacks strong",
    "start": "521159",
    "end": "529040"
  },
  {
    "text": "typing we've got some kind of interesting code uh in a couple of places where we just iterate over all",
    "start": "529040",
    "end": "534680"
  },
  {
    "text": "objects uh you'll see those later on and then of course uh there's very little room on a scratch screen it's 480 pixels",
    "start": "534680",
    "end": "541920"
  },
  {
    "text": "x 360 pixels there's really not a lot of room to give a complex user interface uh",
    "start": "541920",
    "end": "547800"
  },
  {
    "text": "and so we've gone ahead and dropped the status field even though that's a very important part of a declarative API you",
    "start": "547800",
    "end": "553399"
  },
  {
    "text": "write your intent to spec you get what is actually happening back in the status",
    "start": "553399",
    "end": "558880"
  },
  {
    "text": "uh we're going to be showing what is actually happening graphically on the screen for us all so hopefully this is a",
    "start": "558880",
    "end": "564600"
  },
  {
    "text": "simulation will be realistic enough to get the principles across for new",
    "start": "564600",
    "end": "569880"
  },
  {
    "text": "users all right hopefully this is my last slide I'm talking too much here brief tour of the code base each of",
    "start": "569880",
    "end": "575279"
  },
  {
    "text": "these are functions that we built along the left side you see mostly functions that I built I designed our object model",
    "start": "575279",
    "end": "581959"
  },
  {
    "text": "Getters Setters Etc all of the really boring boilerplate that no 14-year-old",
    "start": "581959",
    "end": "587200"
  },
  {
    "text": "wants to spend 3 hours of his time doing uh I went ahead and laid out and then I handed those objects and Getters and",
    "start": "587200",
    "end": "594240"
  },
  {
    "text": "Setters over to Jude to implement the actual business logic so on the right side you see something node for a pod uh",
    "start": "594240",
    "end": "602120"
  },
  {
    "text": "you see let's see what else do we have schedule a pod update the replica set the replicas on a replica set those are",
    "start": "602120",
    "end": "610079"
  },
  {
    "text": "all functions that Jude took care of writing those are effectively the business logic not the object model all",
    "start": "610079",
    "end": "616120"
  },
  {
    "text": "right and with that I think we're ready to talk about the scheduler so Jude why don't you take us through what is the",
    "start": "616120",
    "end": "621160"
  },
  {
    "text": "Schuler's job what are the different terms that we need to know to understand the Schuler well the Schuler assigns",
    "start": "621160",
    "end": "628640"
  },
  {
    "text": "different p pods to nodes again the Pod is the code and the node is the computer",
    "start": "628640",
    "end": "635480"
  },
  {
    "text": "um once they're assigned the CU blit runs the pods and immutable just means",
    "start": "635480",
    "end": "641800"
  },
  {
    "text": "like they can't be affected or changed at all okay so if you if you put a pod on a",
    "start": "641800",
    "end": "649399"
  },
  {
    "text": "node and you don't like something about it what do you need to do uh you have to delete the Pod and reschedule another",
    "start": "649399",
    "end": "655920"
  },
  {
    "text": "one okay okay and the C chop the cuet",
    "start": "655920",
    "end": "661079"
  },
  {
    "text": "runs the code on the Node okay so theer assigns to a node the cuet then is the one that executes that assignment yeah",
    "start": "661079",
    "end": "667880"
  },
  {
    "text": "sounds good a couple of exceptions to to what we're going to show off here uh for pod we're only showing two properties",
    "start": "667880",
    "end": "674160"
  },
  {
    "text": "name and size name approximates what the pod's going to be doing and the size",
    "start": "674160",
    "end": "679399"
  },
  {
    "text": "replaces our compute requirements normally we would Express these as requests for CPU and memory or even",
    "start": "679399",
    "end": "685279"
  },
  {
    "text": "limits on how much it can claim uh for the demo sake we're only using one Dimension and if you're familiar with",
    "start": "685279",
    "end": "691320"
  },
  {
    "text": "what the latest developments in the kubernetes ecosystem it's going to be more than two-dimensional in the future so using an approximation of that is a",
    "start": "691320",
    "end": "697639"
  },
  {
    "text": "is a I think a good idea for the demo and once again we're not actually executing any containers here container D is not involved uh with that said Jude",
    "start": "697639",
    "end": "705240"
  },
  {
    "text": "why don't you take us through the code you can walk over",
    "start": "705240",
    "end": "709680"
  },
  {
    "text": "there so set pod to new pod basically is just",
    "start": "710440",
    "end": "718079"
  },
  {
    "text": "creating the pod and then pick node for pod is looking around seeing what nodes",
    "start": "718079",
    "end": "725959"
  },
  {
    "text": "have space for a pod of this size uh ask node for my lowest pod",
    "start": "725959",
    "end": "732279"
  },
  {
    "text": "bottom is checking just to lay it out so if there's more than one pod inside a",
    "start": "732279",
    "end": "737399"
  },
  {
    "text": "node they go underneath each other and they're not overlapping or anything like that if node equals zero that means",
    "start": "737399",
    "end": "744320"
  },
  {
    "text": "there aren't any nodes so the Pod is unschedulable and we delete it",
    "start": "744320",
    "end": "751160"
  },
  {
    "text": "um and that unschedulable by the way is one area where status would normally come into play We would write to the Pod",
    "start": "751760",
    "end": "758600"
  },
  {
    "text": "status that it's unschedulable and that's how you'd know that you're not able to execute that pod again we don't have status so we just go ahead and",
    "start": "758600",
    "end": "764160"
  },
  {
    "text": "remove the Pod from the simulation then on the right side is the",
    "start": "764160",
    "end": "769680"
  },
  {
    "text": "assigning it and having it go to its node uh writing the pod's",
    "start": "769680",
    "end": "776880"
  },
  {
    "text": "name um yeah okay so this is sort of an interesting thing here the the business",
    "start": "776880",
    "end": "782720"
  },
  {
    "text": "logic is really creating a new pod and picking a new node all the other lines of code that you see here all the other",
    "start": "782720",
    "end": "788639"
  },
  {
    "text": "blocks that are laid out are just about laying the Pod out getting it to be the right height to represent its size",
    "start": "788639",
    "end": "794360"
  },
  {
    "text": "getting it to sit with its node it turns out scratch and snap are really good at",
    "start": "794360",
    "end": "799399"
  },
  {
    "text": "games where little characters bump into each other on the screen and cause effects on one another they're not so",
    "start": "799399",
    "end": "804839"
  },
  {
    "text": "good at diagramming uh having a large box contain a smaller box writing its name name on things like that so you're",
    "start": "804839",
    "end": "810760"
  },
  {
    "text": "going to see a lot of UI layout code here uh Jude are you ready to take us through the demo oh no apparently you're",
    "start": "810760",
    "end": "817320"
  },
  {
    "text": "not sorry uh we did some hand waving there pick node for was actually the most interesting function on the page so",
    "start": "817320",
    "end": "822760"
  },
  {
    "text": "let's drill down and see how do we pick a node for a pod pick a node for the Pod basically we put all the nodes into a",
    "start": "822760",
    "end": "831000"
  },
  {
    "text": "list and for each node we check does it have space to run a pod of this size it",
    "start": "831000",
    "end": "838360"
  },
  {
    "text": "for all the noes that do we add to another list and we take a random number",
    "start": "838360",
    "end": "844360"
  },
  {
    "text": "from that list um and that's the node that the Pod is",
    "start": "844360",
    "end": "850000"
  },
  {
    "text": "assigned to if there are no nodes then the Pod is",
    "start": "850000",
    "end": "855639"
  },
  {
    "text": "unschedulable and in the case of unschedulable we ran into another sharp edge no concept of null or nil in",
    "start": "855639",
    "end": "861839"
  },
  {
    "text": "scratch totally get why they wouldn't put that into a children's programming language but it sure would have been useful for us uh so you're going to see",
    "start": "861839",
    "end": "868399"
  },
  {
    "text": "zeros used all over the place in lie of null because there's no strong typing and we can set it to whatever we want to",
    "start": "868399",
    "end": "874399"
  },
  {
    "text": "all right Jude why don't you take us through the demo here I'll get you over just the scratch environment oops we",
    "start": "874399",
    "end": "879759"
  },
  {
    "text": "should reset that have reset that let's clear that out clear that out there you",
    "start": "879759",
    "end": "886120"
  },
  {
    "text": "go all right so I'll name the node node",
    "start": "886120",
    "end": "892399"
  },
  {
    "text": "one node size will be five and then I'll create another one so now the the the",
    "start": "892399",
    "end": "899120"
  },
  {
    "text": "node is as long as it is because of its size if we were to create a node of size one it should be 1/5 as",
    "start": "899120",
    "end": "905720"
  },
  {
    "text": "long yeah so node two nope that's not a two node two size three and you can see",
    "start": "905720",
    "end": "915000"
  },
  {
    "text": "it's smaller then if we create a pod we'll",
    "start": "915000",
    "end": "920040"
  },
  {
    "text": "call it pod one and I'll give it size six so there's not space for it so the",
    "start": "920040",
    "end": "927000"
  },
  {
    "text": "Pod is unschedulable and doesn't show show up but if I make it smaller pod",
    "start": "927000",
    "end": "934759"
  },
  {
    "text": "two it's not a typing test you're okay yes but I like it being better pod two",
    "start": "935000",
    "end": "941560"
  },
  {
    "text": "four and then it does end up fitting it went to node one because it doesn't fit in node two all right very nice okay so",
    "start": "941560",
    "end": "949920"
  },
  {
    "text": "that's our scheduler demo and it really is as simple as all that at a high level",
    "start": "949920",
    "end": "955399"
  },
  {
    "text": "in kubernetes the Schuler's job is just to assign to the correct assign each pod",
    "start": "955399",
    "end": "960880"
  },
  {
    "text": "that's created to the correct node and if that were all ketes was uh I think",
    "start": "960880",
    "end": "966519"
  },
  {
    "text": "that we probably would not all be here this week uh because any of us can look at a fleet of computers and pick a",
    "start": "966519",
    "end": "972680"
  },
  {
    "text": "particular one to run a pod so let's go ahead and move into our next module module two where we're going to cover",
    "start": "972680",
    "end": "979040"
  },
  {
    "text": "the replicator Jude do you want to lay out sort of at a high level what does the replicator do and what are what's the terminology we need to understand",
    "start": "979040",
    "end": "985199"
  },
  {
    "text": "here a replica set is it basically creates a bunch of identical pods and",
    "start": "985199",
    "end": "993240"
  },
  {
    "text": "assigns them to a variety of different nodes and replicas are basically the",
    "start": "993240",
    "end": "999519"
  },
  {
    "text": "number of PODS it creates all right uh and uh sharp edges",
    "start": "999519",
    "end": "1006480"
  },
  {
    "text": "here before we get going on the demo we don't have a way to show a replica set but that's fine because what our",
    "start": "1006480",
    "end": "1011720"
  },
  {
    "text": "simulator is showing is nodes and pods so you're going to see the effect of a replica set in our simulator but not",
    "start": "1011720",
    "end": "1017800"
  },
  {
    "text": "having it in the UI means there's no way to modify it uh as you saw we were crowded out with buttons already so uh",
    "start": "1017800",
    "end": "1025438"
  },
  {
    "text": "we're going to cover modifying replica sets a little bit in the next module with deployments we'll talk about that when we get there uh and I know we we",
    "start": "1025439",
    "end": "1033038"
  },
  {
    "text": "call this the replicator kubernetes calls it the replication controller but replicator sounds a lot cooler uh so if",
    "start": "1033039",
    "end": "1039199"
  },
  {
    "text": "you want to petition the uh Sig app to rename replication controller to replicator you all have a GitHub issue",
    "start": "1039199",
    "end": "1045199"
  },
  {
    "text": "you can go ahead and give a thumbs up to there um the last is that within this uh",
    "start": "1045199",
    "end": "1050280"
  },
  {
    "text": "demo we don't really have the ability to watch individual objects in kubernetes the replicator is going to be",
    "start": "1050280",
    "end": "1055840"
  },
  {
    "text": "aggressively watching its own pods to make sure that there's always the number of them that it expects to exist uh",
    "start": "1055840",
    "end": "1063000"
  },
  {
    "text": "however in our demo that's a little bit more Nuance than we can achieve so we simply have a global",
    "start": "1063000",
    "end": "1068320"
  },
  {
    "text": "broadcast uh that we that's called reconcile that lets all of the controllers know they should read their",
    "start": "1068320",
    "end": "1074799"
  },
  {
    "text": "intended State their actual State and take steps towards the intended state uh so it's a little bit of a a sharp edge",
    "start": "1074799",
    "end": "1080840"
  },
  {
    "text": "for our demo that being said Jude why don't you take us through the code okay so we're setting diff to replicas minus",
    "start": "1080840",
    "end": "1089280"
  },
  {
    "text": "the length of PODS um that means that's how many pods we",
    "start": "1089280",
    "end": "1096960"
  },
  {
    "text": "want to have but we don't and so we repeat diff times we're scheduling a",
    "start": "1096960",
    "end": "1103600"
  },
  {
    "text": "pod um if diff is less than zero then",
    "start": "1103600",
    "end": "1109240"
  },
  {
    "text": "that means we have too many pods so multiply by NE one to make it a positive",
    "start": "1109240",
    "end": "1114280"
  },
  {
    "text": "number and we are",
    "start": "1114280",
    "end": "1119840"
  },
  {
    "text": "removing pods from nodes now because we have too many so you're saying like everything at",
    "start": "1119840",
    "end": "1126559"
  },
  {
    "text": "the bottom of the screen there is all about removing a pod more more graphical layout code there again business objects",
    "start": "1126559",
    "end": "1134080"
  },
  {
    "text": "were not meant to be implemented in scratch we're really abusing it at this point all right uh I think that's all of",
    "start": "1134080",
    "end": "1139679"
  },
  {
    "text": "the code so should we get to the demo let's see the replicator in",
    "start": "1139679",
    "end": "1144960"
  },
  {
    "text": "action okay so if I clear that create more",
    "start": "1145000",
    "end": "1153000"
  },
  {
    "text": "nodes another one and",
    "start": "1157640",
    "end": "1164600"
  },
  {
    "text": "then I'm creating a replica set I'll have pod size three and I'll create",
    "start": "1164600",
    "end": "1171880"
  },
  {
    "text": "three pods Oo we didn't get three pods there what's going on so currently there's not",
    "start": "1171880",
    "end": "1178919"
  },
  {
    "text": "enough room to run all three pods okay so what we need to do is make",
    "start": "1178919",
    "end": "1185159"
  },
  {
    "text": "more room and then run the replicator again uh no we broadcast reconcile and",
    "start": "1185159",
    "end": "1190520"
  },
  {
    "text": "then it will take care of all the pods we don't have Okay show us so if I create another node",
    "start": "1190520",
    "end": "1200600"
  },
  {
    "text": "still nothing's happened but if I broadcast reconcile then you'll see another pod shows up all right so this",
    "start": "1201640",
    "end": "1208159"
  },
  {
    "text": "shows off the difference between a declarative and an imperative API in kubernetes if this had been an imperative API we would have told it",
    "start": "1208159",
    "end": "1215000"
  },
  {
    "text": "make three pods it would have tried it would have failed on the third one and then later on when there is room nothing",
    "start": "1215000",
    "end": "1221080"
  },
  {
    "text": "would have changed we would have to tell it to make another pod again we would need something to understand that difference instead we said let there be",
    "start": "1221080",
    "end": "1227640"
  },
  {
    "text": "three pods and so even when it couldn't fulfill the rule it kept trying and when",
    "start": "1227640",
    "end": "1232760"
  },
  {
    "text": "there be finally became capacity we were able to fulfill our expectations for replica sets and this is fundamental to",
    "start": "1232760",
    "end": "1239679"
  },
  {
    "text": "95% of applications that run on kubernetes are going to be using the replica set controller under the hood",
    "start": "1239679",
    "end": "1245640"
  },
  {
    "text": "but they're not going to be using replica set controller directly uh if you're doing gitops you should almost",
    "start": "1245640",
    "end": "1251039"
  },
  {
    "text": "never see a replica set stored in yaml uh and the reason is we have another",
    "start": "1251039",
    "end": "1256600"
  },
  {
    "text": "demo to cover another module that is the deployment Jude can you take us through",
    "start": "1256600",
    "end": "1261960"
  },
  {
    "text": "what is the deployment controller's job and what are the terms that we need to understand here the deployment is",
    "start": "1261960",
    "end": "1268480"
  },
  {
    "text": "basically a replica set but you can change what it what's inside of it and",
    "start": "1268480",
    "end": "1274559"
  },
  {
    "text": "once you make that change it slowly shifts from the old one to the new and",
    "start": "1274559",
    "end": "1281120"
  },
  {
    "text": "how's that different from what replica set would do if I changed something there uh with replica that if you change",
    "start": "1281120",
    "end": "1286360"
  },
  {
    "text": "it it'll just instantly delete delete all the old ones and spin up some new ones sounds like a great strategy for",
    "start": "1286360",
    "end": "1292559"
  },
  {
    "text": "production right and somebody want to have delete all my apps before deploying the new ones okay so deployment",
    "start": "1292559",
    "end": "1298360"
  },
  {
    "text": "controller has been around for a long time it sits on top of replica Set uh couple of sharp edges here in kubernetes",
    "start": "1298360",
    "end": "1305360"
  },
  {
    "text": "the deployment doesn't just wait to know that a pod exists because remember pods can exist and be unschedulable that's",
    "start": "1305360",
    "end": "1311360"
  },
  {
    "text": "not terribly helpful in kubernetes it's going to wait for the Pod to exist and be ready and each pod gets to Define",
    "start": "1311360",
    "end": "1317760"
  },
  {
    "text": "what Readiness look looks like for itself Readiness should be approximately I'm actually serving traffic I'm doing",
    "start": "1317760",
    "end": "1324200"
  },
  {
    "text": "whatever my job is as a piece of software uh we don't have pod Readiness",
    "start": "1324200",
    "end": "1329320"
  },
  {
    "text": "we're not running containers there's no HTTP happening in the background here so we're going to keep it pretty simple and",
    "start": "1329320",
    "end": "1334760"
  },
  {
    "text": "approximate Readiness with pod existence the other sharp edge which you've been seeing all along is we are interacting",
    "start": "1334760",
    "end": "1341440"
  },
  {
    "text": "with our kubernetes simulator through some buttons on a screen that will almost certainly not be the way that you",
    "start": "1341440",
    "end": "1346480"
  },
  {
    "text": "interact with kubernetes whether you're in development or in production touching a kubernetes cluster usually looks like",
    "start": "1346480",
    "end": "1351960"
  },
  {
    "text": "using the cube cuddle tool is that right Jude Cube cuddle or cube",
    "start": "1351960",
    "end": "1358039"
  },
  {
    "text": "control was a long-standing debate in the community it stands for cube control but Cube cuddle just rolls off the",
    "start": "1358039",
    "end": "1363200"
  },
  {
    "text": "tongue so much easier and it lets me put fun pictures of cats cuddling cubes into my slideshows so we're going to stick",
    "start": "1363200",
    "end": "1369640"
  },
  {
    "text": "with cuddling cubes for this uh for this demo you guys can pronounce it differently if you like let's get to the",
    "start": "1369640",
    "end": "1375520"
  },
  {
    "text": "code Jude take us through this if new RS equals z that means there are new replic",
    "start": "1375520",
    "end": "1381760"
  },
  {
    "text": "or there are no replica sents currently so we create a new replica set otherwise",
    "start": "1381760",
    "end": "1388440"
  },
  {
    "text": "if the name of the replica set we're trying to make does not equal the name of our current replica set we set our",
    "start": "1388440",
    "end": "1395559"
  },
  {
    "text": "current replica set to Old replica set and create a new new replica set now why",
    "start": "1395559",
    "end": "1402480"
  },
  {
    "text": "would the name change um whenever we edit anything in",
    "start": "1402480",
    "end": "1408520"
  },
  {
    "text": "ins side of the Pod any of its characteristics its version also changes which is a part of its name inside of",
    "start": "1408520",
    "end": "1414880"
  },
  {
    "text": "the deployment right yeah yeah okay keep going for us uh if replicas is greater",
    "start": "1414880",
    "end": "1421080"
  },
  {
    "text": "than current replicas that means we want more replicas than we have then we just spin up more",
    "start": "1421080",
    "end": "1427320"
  },
  {
    "text": "replicas uh if we have too many replicas and there are old replicas that means we",
    "start": "1427320",
    "end": "1433480"
  },
  {
    "text": "start getting rid of old replicas and",
    "start": "1433480",
    "end": "1438559"
  },
  {
    "text": "if there um if we have too many replicas otherwise if we have too many",
    "start": "1438559",
    "end": "1443880"
  },
  {
    "text": "replicas we'll start taking away from the new replica set meaning we scale slowly from one to the other and if old",
    "start": "1443880",
    "end": "1453799"
  },
  {
    "text": "replicas is less than one then we get rid of it because we don't need it anymore what's this last block so if",
    "start": "1453799",
    "end": "1460120"
  },
  {
    "text": "you've gotten down to this very bottom block where you're updating to new replicas plus one you've already",
    "start": "1460120",
    "end": "1466039"
  },
  {
    "text": "determined that you have exactly as many replicas as want between old and new so why would you add one because that helps",
    "start": "1466039",
    "end": "1472640"
  },
  {
    "text": "scale from the old to the new if you're adding one new one that means you have too many so you take away one of the old",
    "start": "1472640",
    "end": "1479399"
  },
  {
    "text": "ones okay so we're going to say if we have like say four we're going to go with one new and four old then one new",
    "start": "1479399",
    "end": "1485240"
  },
  {
    "text": "and three old then two new and three old then two new and two old like that yeah okay can you show us how it works in",
    "start": "1485240",
    "end": "1493159"
  },
  {
    "text": "action oh let's one moment here so that you don't have to watch us painstakingly",
    "start": "1493159",
    "end": "1499360"
  },
  {
    "text": "create a bunch of nodes we have a little helper function for our",
    "start": "1499360",
    "end": "1503919"
  },
  {
    "text": "demo there we go so we've got a four node cluster",
    "start": "1505360",
    "end": "1511880"
  },
  {
    "text": "looks like uh some nodes of size four size five size six Jude show us what the deployment is going to do all right so",
    "start": "1511880",
    "end": "1519360"
  },
  {
    "text": "I'm naming it set the size and set how many I want",
    "start": "1519360",
    "end": "1525960"
  },
  {
    "text": "now nothing's happened yet because we haven't broadcasted reconcile with the",
    "start": "1525960",
    "end": "1531720"
  },
  {
    "text": "deployment so if I do that you'll see we created the ones we need okay so we",
    "start": "1531720",
    "end": "1538320"
  },
  {
    "text": "asked for three of size three and we got that now now in this case we have a little bit of an interesting thing once",
    "start": "1538320",
    "end": "1544440"
  },
  {
    "text": "again it's hard to show modifying objects uh through such a primitive user interface so we've got a function bound",
    "start": "1544440",
    "end": "1551480"
  },
  {
    "text": "to a key here that is going to take the deployment and we're going to change the size of the deployment to to plus one",
    "start": "1551480",
    "end": "1557799"
  },
  {
    "text": "from We're going to increment it by one and that'll show us the process of a replica set rolling out those new",
    "start": "1557799",
    "end": "1563760"
  },
  {
    "text": "versions Jude why don't you take us through that so currently nothing's happened yet but if I broadcast reconcile we add a",
    "start": "1563760",
    "end": "1571320"
  },
  {
    "text": "new one then we're slowly scaling down from the old and now we have all three",
    "start": "1571320",
    "end": "1577480"
  },
  {
    "text": "with the new size okay so a progressive roll out from large to new and just like",
    "start": "1577480",
    "end": "1582919"
  },
  {
    "text": "with replica set if we hadn't had enough space to spin up everything we wanted uh the deploy controller would sit there",
    "start": "1582919",
    "end": "1589320"
  },
  {
    "text": "waiting and it keep trying until we finally did have space to achieve our desired",
    "start": "1589320",
    "end": "1594799"
  },
  {
    "text": "result okay so that's our last demo let me switch back to our slideshow real quickly uh if we had 30 more minutes",
    "start": "1594799",
    "end": "1602080"
  },
  {
    "text": "with you uh we would cover how services and endpoints and gateways stateful sets config Maps uh work in kubernetes but",
    "start": "1602080",
    "end": "1609960"
  },
  {
    "text": "all of these Concepts build on top of the foundational ideas you've seen today so if you're new in the community I'm",
    "start": "1609960",
    "end": "1615760"
  },
  {
    "text": "hopeful that between understanding the schedulers the replicator and the deployment controller you'll have a",
    "start": "1615760",
    "end": "1621559"
  },
  {
    "text": "foundation to engage in conversations about the Thousand other amazing things that you can do with kubernetes I would",
    "start": "1621559",
    "end": "1628039"
  },
  {
    "text": "also be remiss in doing a tech talk with my son if I didn't spend some time teaching him to chop wood and carry",
    "start": "1628039",
    "end": "1633640"
  },
  {
    "text": "water uh scratch and snap really don't have any kind of a testing system that I could find that's available to users so",
    "start": "1633640",
    "end": "1640640"
  },
  {
    "text": "we went ahead and implemented one you may have seen it a little bit earlier on the screen we put it inside of a whole",
    "start": "1640640",
    "end": "1645880"
  },
  {
    "text": "bunch of if blocks with manual switch toggles so that you can turn them on or off whenever you start it we run tests",
    "start": "1645880",
    "end": "1651399"
  },
  {
    "text": "on the replication controller as well as on the deployment controller making sure we've always got the expected number",
    "start": "1651399",
    "end": "1657120"
  },
  {
    "text": "because let me tell you we broke this demo a lot as we were working through so the test gave us great feedback and",
    "start": "1657120",
    "end": "1662960"
  },
  {
    "text": "helped us to uh earn the favor of the demo Gods this morning which I'm very thankful for so that is our talk you can",
    "start": "1662960",
    "end": "1670799"
  },
  {
    "text": "uh give us feedback with the QR code on the right you can try it out for yourself with the QR code on the left",
    "start": "1670799",
    "end": "1675840"
  },
  {
    "text": "and we do still have 6 minutes for questions [Applause]",
    "start": "1675840",
    "end": "1685100"
  },
  {
    "text": "hi there thanks thanks for doing this I don't have a question this was freaking brilliant it absolutely brilliant",
    "start": "1686440",
    "end": "1693519"
  },
  {
    "text": "because we've been trying to figure out a way to teach these Concepts in our company we will absolutely go this route",
    "start": "1693519",
    "end": "1699960"
  },
  {
    "text": "absolutely brilliant thank you so much thank you where to go",
    "start": "1699960",
    "end": "1706679"
  },
  {
    "text": "yeah up front I noticed you diligently made sure not to name anything the same",
    "start": "1709440",
    "end": "1715799"
  },
  {
    "text": "what happens reuse the same names the truth is that we didn't diligently not",
    "start": "1715799",
    "end": "1720880"
  },
  {
    "text": "rename anything the same and what happens is extraordinarily confusing uh scratch and and snap don't have any way",
    "start": "1720880",
    "end": "1728039"
  },
  {
    "text": "to introspect a running process uh there's pause there's a break point that you can use but you can't inspect any",
    "start": "1728039",
    "end": "1734519"
  },
  {
    "text": "variables or see any internal State uh so when it behaves you are limited very",
    "start": "1734519",
    "end": "1740080"
  },
  {
    "text": "much to the print statement which is effectively like those questions you saw it asking at the bottom of the screen for each prompt uh in order to figure",
    "start": "1740080",
    "end": "1747240"
  },
  {
    "text": "out what the internal state is how dude how many times did we get bit by that many even even the even when you use",
    "start": "1747240",
    "end": "1754840"
  },
  {
    "text": "like a function parameter or or a custom block that has a name and you're calling it from a Sprite that has a variable of",
    "start": "1754840",
    "end": "1761720"
  },
  {
    "text": "that same name it seems to be completely non-deterministic which one of those values it's going to refer to um so you",
    "start": "1761720",
    "end": "1768600"
  },
  {
    "text": "know we're abusing the system quite a bit here and that was actually those experiments were what led to the need",
    "start": "1768600",
    "end": "1774159"
  },
  {
    "text": "for unit tests another question in the back yeah so I love this um you might consider",
    "start": "1774159",
    "end": "1780960"
  },
  {
    "text": "looking at App Inventor just a little bit more sophisticated environment for kids as well we can make mobile apps and",
    "start": "1780960",
    "end": "1787799"
  },
  {
    "text": "much more sophisticated UI I'm actually struggling to hear you the speakers are pointed your direction sorry about that",
    "start": "1787799",
    "end": "1793440"
  },
  {
    "text": "oh so you might consider looking to App Inventor MIT App Inventor it's like scratch it's for kids but you can make",
    "start": "1793440",
    "end": "1800039"
  },
  {
    "text": "mobile apps with a with a much better UI I will have to check that out maybe uh maybe next year's cubec con can see a",
    "start": "1800039",
    "end": "1806320"
  },
  {
    "text": "demo there all right well thanks everybody it was great for you to come out",
    "start": "1806320",
    "end": "1815000"
  }
]