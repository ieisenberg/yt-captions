[
  {
    "start": "0",
    "end": "23000"
  },
  {
    "text": "all right can everybody hear me thank you all right let's get started so hey everyone this is the sigo Deep dive for",
    "start": "160",
    "end": "8080"
  },
  {
    "text": "cucon na 2023 uh so this year we're going to focus pretty heavily on cell and our",
    "start": "8080",
    "end": "14320"
  },
  {
    "text": "usage of it in seot so I'm Mo from Microsoft I'm one of the leads for sigo",
    "start": "14320",
    "end": "19600"
  },
  {
    "text": "I'm Jordan liot also lead for sigo from Google all right so we're going to mix",
    "start": "19600",
    "end": "24720"
  },
  {
    "text": "it up this year so normally we wait till the end to do this but this year we're going to do it at the beginning uh so I",
    "start": "24720",
    "end": "30640"
  },
  {
    "text": "see Anish I see you in the audience there uh thank you very much for all your contributions this year uh to here",
    "start": "30640",
    "end": "36200"
  },
  {
    "text": "I know you're not here hopefully you're watching this uh thank you also I don't think I saw James maybe if he's here uh",
    "start": "36200",
    "end": "43039"
  },
  {
    "text": "but also thank you for your contributions NE I know you're not here but hopefully you'll watch this uh and",
    "start": "43039",
    "end": "49480"
  },
  {
    "text": "say yeah so NE Brun I hope you were here I know you're here at the conference but",
    "start": "49480",
    "end": "55039"
  },
  {
    "text": "uh thank you also for all the work you did uh Rita I know you're hopefully going to watch this afterwards and thank",
    "start": "55039",
    "end": "61199"
  },
  {
    "text": "you for all your hard work and tting I know you're not here but we very much appreciate your contributions I'm gonna",
    "start": "61199",
    "end": "67880"
  },
  {
    "text": "go over some of the stuff we did generically in um we won 129 before we sort of Deep dive more into the self",
    "start": "67880",
    "end": "74159"
  },
  {
    "text": "stuff so there was like six High Lev things we worked on uh csv2 went GA and",
    "start": "74159",
    "end": "79920"
  },
  {
    "text": "129 so yay it's over um uh cluster trust",
    "start": "79920",
    "end": "86400"
  },
  {
    "text": "bundle just landed in Alpha so like I know I see certain manager folks here I",
    "start": "86400",
    "end": "91560"
  },
  {
    "text": "hope that they will adopt it at some point um we made some great improvements to bound service account tokens they",
    "start": "91560",
    "end": "98759"
  },
  {
    "text": "contain node references as Alpha in v229 James helped with that uh uh We've made",
    "start": "98759",
    "end": "105560"
  },
  {
    "text": "a bunch of improvements to aen and ID that we'll talk about in detail and we",
    "start": "105560",
    "end": "110640"
  },
  {
    "text": "are continuing possibly the longest journey of any single thing which is the reduction of Secrets spased service",
    "start": "110640",
    "end": "117320"
  },
  {
    "text": "account tokens all right so you've heard probably",
    "start": "117320",
    "end": "123360"
  },
  {
    "start": "120000",
    "end": "170000"
  },
  {
    "text": "people in various sessions talking about cell uh what is it if you're unfamiliar with it it stands for common expression",
    "start": "123360",
    "end": "129440"
  },
  {
    "text": "language um it's a non-touring complete language and it's designed to be pretty",
    "start": "129440",
    "end": "135360"
  },
  {
    "text": "intuitive to read and write uh with a heavy focus on being able to bound execution time run quickly run in",
    "start": "135360",
    "end": "142959"
  },
  {
    "text": "performance critical paths uh and be able to limit the amount of memory and CPU that's used um here's a just an",
    "start": "142959",
    "end": "150440"
  },
  {
    "text": "example of what it might look like uh it's pretty natural syntax you sort of have dot accessors to to Fields um",
    "start": "150440",
    "end": "157879"
  },
  {
    "text": "there's the ability to have macros or functions that the integrator provides",
    "start": "157879",
    "end": "163319"
  },
  {
    "text": "to the expression so that the person who's writing expression can make use of but doesn't actually have the ability to",
    "start": "163319",
    "end": "168440"
  },
  {
    "text": "Define and do like crazy dangerous things um so why why did we settle on",
    "start": "168440",
    "end": "174080"
  },
  {
    "start": "170000",
    "end": "267000"
  },
  {
    "text": "Cell we we started this uh exploration a couple years ago U on the SE API Machinery side",
    "start": "174080",
    "end": "180519"
  },
  {
    "text": "and uh we looked at a lot of different sort of extensibility languages things",
    "start": "180519",
    "end": "185599"
  },
  {
    "text": "like Rego and JavaScript and Lua and wum uh and none of them really hit all the",
    "start": "185599",
    "end": "192319"
  },
  {
    "text": "points that we needed uh it had to be really really lightweight some of those were not lightweight we had to be able",
    "start": "192319",
    "end": "199360"
  },
  {
    "text": "to ensure that the Expressions had a bounded cost so cell does that by",
    "start": "199360",
    "end": "204560"
  },
  {
    "text": "limiting the complexity but also allowing us to compute the cost uh",
    "start": "204560",
    "end": "210120"
  },
  {
    "text": "at compile time so we can just not allow Expressions that would be too expensive",
    "start": "210120",
    "end": "215439"
  },
  {
    "text": "um this was especially important for cell use in areas that were API facing",
    "start": "215439",
    "end": "221280"
  },
  {
    "text": "where sort of end users or maybe less trusted users were the ones providing the Expressions uh so we because that",
    "start": "221280",
    "end": "227720"
  },
  {
    "text": "was the first place where we were using cell in kubernetes uh it was critical to get that right um another benefit of",
    "start": "227720",
    "end": "234360"
  },
  {
    "text": "cell we can do really really deep uh type checking integration so um rather",
    "start": "234360",
    "end": "239400"
  },
  {
    "text": "than just sort of accepting a blob and then at runtime maybe it works maybe it doesn't uh we can actually do that",
    "start": "239400",
    "end": "244519"
  },
  {
    "text": "checking at the beginning and tell you when you're starting up or loading the uh the Expressions this is going to work",
    "start": "244519",
    "end": "250599"
  },
  {
    "text": "well this isn't going to work well uh and then as we've used cell in more and more places in kubernetes uh we",
    "start": "250599",
    "end": "257720"
  },
  {
    "text": "have the ability to customize what the Expressions have access to in terms of variables and functions and macros and",
    "start": "257720",
    "end": "262880"
  },
  {
    "text": "helpers for each uh each specific",
    "start": "262880",
    "end": "267280"
  },
  {
    "text": "use so here's just some of the places that outside of cot cell is being used",
    "start": "268039",
    "end": "273759"
  },
  {
    "text": "uh we won't go into them too deeply because these have been covered in the API machiner Deep dive and I think at",
    "start": "273759",
    "end": "279560"
  },
  {
    "text": "least one other talk from CC covered these but I just want to highlight one thing which is all of these used cases",
    "start": "279560",
    "end": "286400"
  },
  {
    "text": "are either directly um or indirectly related to the usage of cell in rest apis whereas the",
    "start": "286400",
    "end": "293039"
  },
  {
    "text": "next two things we're going to talk about are usage of cell in a filebase config that's passed to the API server",
    "start": "293039",
    "end": "300960"
  },
  {
    "start": "299000",
    "end": "380000"
  },
  {
    "text": "so uh this went Alpha in v229 there's a lot of improvements that",
    "start": "300960",
    "end": "307800"
  },
  {
    "text": "we made overall to how oidc can be configured in this cap but I want to",
    "start": "307800",
    "end": "313320"
  },
  {
    "text": "really narrow our focus on the aspects of this that are related to cell and how cell improved this so there's a lot of",
    "start": "313320",
    "end": "320840"
  },
  {
    "text": "advanced uses that you can imagine where you want a full blown authentication web hook but there's a there can be",
    "start": "320840",
    "end": "327600"
  },
  {
    "text": "significant problems when your web Hook is down than just the maintenance cost of having such an integration point so",
    "start": "327600",
    "end": "333960"
  },
  {
    "text": "we wanted to see how far we could let people get by just having static configuration on the API server right",
    "start": "333960",
    "end": "341520"
  },
  {
    "text": "that kind of means you have to make some hard choices right so you have to sort of Define what kind of tokens you're",
    "start": "341520",
    "end": "346600"
  },
  {
    "text": "going to accept and what they mean right so if you had an opaque token there's really nothing you could do with",
    "start": "346600",
    "end": "352160"
  },
  {
    "text": "something like sell because there's no way to like interpret that without making like a database query or",
    "start": "352160",
    "end": "357280"
  },
  {
    "text": "something right we're not going to hand you like network access in the cell environment right that kind of goes against what we want to be able to do",
    "start": "357280",
    "end": "362880"
  },
  {
    "text": "there but if you limit yourself to something like jots that means you have a mechanism for understanding how you",
    "start": "362880",
    "end": "369479"
  },
  {
    "text": "can verify a payload you have a mechanism for key distribution which is basically oidc style Discovery now",
    "start": "369479",
    "end": "376039"
  },
  {
    "text": "you've constrained the input in a way that cell can really help you so let's walk through an example so on the top left there you can",
    "start": "376039",
    "end": "382639"
  },
  {
    "start": "380000",
    "end": "557000"
  },
  {
    "text": "see the exploded like payload from a Json web token right it's just a Json object and you can kind of see the",
    "start": "382639",
    "end": "388680"
  },
  {
    "text": "claims that are available so as we talked about earlier you can define a custom environment right so where you",
    "start": "388680",
    "end": "394639"
  },
  {
    "text": "see the cell expression that claims variable maps to that object at the top",
    "start": "394639",
    "end": "399759"
  },
  {
    "text": "that you can see right and now you can kind of start seeing what things you can do right so",
    "start": "399759",
    "end": "405599"
  },
  {
    "text": "it just so happens that this user's IDP emits a string that happens to be a",
    "start": "405599",
    "end": "411560"
  },
  {
    "text": "concatenation of basically their group membership previously you would have to write some kind of authentication web",
    "start": "411560",
    "end": "417400"
  },
  {
    "text": "hook to sort of explode this information out now you can just use uh cell functions split that out and in this",
    "start": "417400",
    "end": "424199"
  },
  {
    "text": "example we've purposely injected a static group into the list as well you",
    "start": "424199",
    "end": "429759"
  },
  {
    "text": "can imagine how you would use that for example if you want every user from your IDP to belong to a particular group so",
    "start": "429759",
    "end": "435759"
  },
  {
    "text": "that way you can assign policy to them right another one of the things that the authentication config will let you do is",
    "start": "435759",
    "end": "441240"
  },
  {
    "text": "just have as many of these authenticators as you want right so you can kind of mix and match how all these configs work out for",
    "start": "441240",
    "end": "447520"
  },
  {
    "text": "you uh so as we kind of walk through the username is going to arbit just be",
    "start": "447520",
    "end": "452560"
  },
  {
    "text": "statically suffixed with this external user and we're also going to take the audience from the token and put it in an",
    "start": "452560",
    "end": "459960"
  },
  {
    "text": "extra field right now this means that if you had like an admission web hook or admission cell policy you can make",
    "start": "459960",
    "end": "466240"
  },
  {
    "text": "decisions based off of that if you wanted to right so for example if your IDP encodes in the token that the user",
    "start": "466240",
    "end": "473599"
  },
  {
    "text": "logged in with TFA you can make decisions based off of that right you might not allow any action in Cube",
    "start": "473599",
    "end": "479360"
  },
  {
    "text": "system from a user that didn't log in with TFA or something like that right uh",
    "start": "479360",
    "end": "484440"
  },
  {
    "text": "and we can keep going and take this further uh it is unlikely that your corporate IDP has the concept of like",
    "start": "484440",
    "end": "491240"
  },
  {
    "text": "kubernetes system users right it probably does not have any concept of a kubernetes service account or a kubernetes cuet and so a user info",
    "start": "491240",
    "end": "499639"
  },
  {
    "text": "validation cell expression basically lets you say I never expect that to happen and you can sort of constrain",
    "start": "499639",
    "end": "506680"
  },
  {
    "text": "that down right so this one is basically saying hey if for any reason I ever see a user that has a system colum prefix in",
    "start": "506680",
    "end": "513599"
  },
  {
    "text": "their name just flat out reject the authentication um this example doesn't cover it but you can actually do the",
    "start": "513599",
    "end": "519080"
  },
  {
    "text": "same exact thing with the claim payload as well so you can say that hey if the user is not in like a particular group",
    "start": "519080",
    "end": "526480"
  },
  {
    "text": "they can't authenticate at all right so in kubernetes if you authenticate you get a baseline level of access like for",
    "start": "526480",
    "end": "532240"
  },
  {
    "text": "example you can hit disc Discovery and get all the metadata about the cluster right that's not great if you know that",
    "start": "532240",
    "end": "539800"
  },
  {
    "text": "that user has no business being in that environment right so you know sometimes your IDP lets you configure these things",
    "start": "539800",
    "end": "546160"
  },
  {
    "text": "other times the IDP could configure it but you don't happen to have access to that that's a different team and you",
    "start": "546160",
    "end": "552519"
  },
  {
    "text": "just want to manage your kubernetes environment now you can do that no web book's",
    "start": "552519",
    "end": "558200"
  },
  {
    "start": "557000",
    "end": "708000"
  },
  {
    "text": "necessary so that was the the set of authentication configuration that we've added more flexibility to in 129 we also",
    "start": "559320",
    "end": "566560"
  },
  {
    "text": "worked on uh expanding what you could do with authorization config uh so again",
    "start": "566560",
    "end": "572440"
  },
  {
    "text": "previously the way you configure authorization you just pass command line flags and say here are the modes I want",
    "start": "572440",
    "end": "577600"
  },
  {
    "text": "I want node authorization and arbac authorization and maybe web hook",
    "start": "577600",
    "end": "583560"
  },
  {
    "text": "authorization uh and then if you said you wanted a web hook authorizer you had to give it a cube config file to tell it",
    "start": "583560",
    "end": "590279"
  },
  {
    "text": "where to talk to the web hook authorizer um it's a lot of flags not super intuitive uh and a lot of people came to",
    "start": "590279",
    "end": "597959"
  },
  {
    "text": "us and said you know I've got got one web hook authorization integration off to some you know I am system uh but I",
    "start": "597959",
    "end": "605200"
  },
  {
    "text": "actually have a second one I want to run locally to maybe do some deny rules or",
    "start": "605200",
    "end": "610440"
  },
  {
    "text": "something I I want to run two web hooks uh and you know this the system we had",
    "start": "610440",
    "end": "616200"
  },
  {
    "text": "only let you configure one you start trying to add multiple versions of web",
    "start": "616200",
    "end": "622079"
  },
  {
    "text": "hooks via command line Flags it just kind of becomes a mess uh and so we we",
    "start": "622079",
    "end": "627200"
  },
  {
    "text": "added the ability in 129 to have a config file that lays out exactly what authorizers you want and you can have",
    "start": "627200",
    "end": "633360"
  },
  {
    "text": "more than one web hook authorizer you can order them the way you want uh when you do that some questions come up right",
    "start": "633360",
    "end": "642040"
  },
  {
    "text": "web hooks tend to be slow they tend to be less reliable than the authorizers",
    "start": "642040",
    "end": "647839"
  },
  {
    "text": "that are built in and so as soon as we start talking about running more than one of these we have some some questions",
    "start": "647839",
    "end": "655079"
  },
  {
    "text": "some goals can we limit the blast radius uh of these web hooks right can we if we",
    "start": "655079",
    "end": "663040"
  },
  {
    "text": "know that the the local one we're going to run that has some deny opinions we know that it only cares about requests",
    "start": "663040",
    "end": "668399"
  },
  {
    "text": "shaped a certain way can we avoid sending other requests to that web hook",
    "start": "668399",
    "end": "673639"
  },
  {
    "text": "avoid paying the latency cost avoid paying the the reliability cost uh and then finally some some users want to",
    "start": "673639",
    "end": "681639"
  },
  {
    "text": "host authorization web hooks on the cluster and so right away you've got a cycle problem right if the if the",
    "start": "681639",
    "end": "687720"
  },
  {
    "text": "authorization web hook is going to maybe make uh certain requests not be able to be authorized what about the requests to",
    "start": "687720",
    "end": "695160"
  },
  {
    "text": "make the pods to run the web hook that's making the authorization decisions right it's easy to get into cycles and",
    "start": "695160",
    "end": "701240"
  },
  {
    "text": "problems like that so uh in addition to just being able to express having multiple web",
    "start": "701240",
    "end": "707800"
  },
  {
    "text": "hooks um we added the ability to exclude certain requests from going to web hooks",
    "start": "707800",
    "end": "714880"
  },
  {
    "start": "708000",
    "end": "1066000"
  },
  {
    "text": "based on something called match conditions uh for those of you who have seen match conditions on admission web",
    "start": "714880",
    "end": "720680"
  },
  {
    "text": "hooks that API Machinery did this is a very similar concept we followed the same approach but this is in a file",
    "start": "720680",
    "end": "726600"
  },
  {
    "text": "based config so we're gonna we're gonna demo that now we'll see uh See if the",
    "start": "726600",
    "end": "731839"
  },
  {
    "text": "demo works and while Jordan gets that going just as a reminder admission web hooks run on mutating requests",
    "start": "731839",
    "end": "739040"
  },
  {
    "text": "authorization web hooks run on every request so it's an excellent way to Breck your cluster if you do it wrong",
    "start": "739040",
    "end": "745959"
  },
  {
    "text": "all right so what I have here I've got a",
    "start": "745959",
    "end": "751480"
  },
  {
    "text": "little status dashboard showing three types of clients on the top here I've got a load balancer that's poking at my",
    "start": "751480",
    "end": "757760"
  },
  {
    "text": "health Z end point right this thing may or may not be authenticated it just wants to know is this server good so I",
    "start": "757760",
    "end": "763639"
  },
  {
    "text": "can include it in the load balancer then I've got a a System Controller this is a cube system service account um it does",
    "start": "763639",
    "end": "771560"
  },
  {
    "text": "really important things if we disrupt it bad things are going to happen this is sort of a standin for every System",
    "start": "771560",
    "end": "776600"
  },
  {
    "text": "Controller that exists in kubernetes and then then down here I've Got My Demo client right this is this is the thing",
    "start": "776600",
    "end": "782399"
  },
  {
    "text": "that maybe I want to authorize in a different way or you know put some safeguards around uh and so this is what",
    "start": "782399",
    "end": "789720"
  },
  {
    "text": "the authorization configuration looks like in 129 so to start I just have you",
    "start": "789720",
    "end": "795199"
  },
  {
    "text": "know the node authorizer and the rback authorizer pretty standard setup um if I",
    "start": "795199",
    "end": "802120"
  },
  {
    "text": "enable a web hook authorizer at the end uh first of all uh Dynamic reload not in",
    "start": "802120",
    "end": "810959"
  },
  {
    "text": "129 but coming in 130 so that's uh that's pretty great you can",
    "start": "810959",
    "end": "816160"
  },
  {
    "text": "change your config without restarting your API server um now I've got a web hook at the end and so you notice a few",
    "start": "816160",
    "end": "822040"
  },
  {
    "text": "things first of all it is now authorizing My Demo client so that's cool uh you'll notice the latency is",
    "start": "822040",
    "end": "828800"
  },
  {
    "text": "higher for the demo client right but not for the system clients that's because these are being authorized by the the",
    "start": "828800",
    "end": "834720"
  },
  {
    "text": "arbac rules and so they don't even make it to the web hook but I am paying a little bit of a Laten cost on my demo",
    "start": "834720",
    "end": "840040"
  },
  {
    "text": "client that's okay um some other things that you see here you can actually",
    "start": "840040",
    "end": "845560"
  },
  {
    "text": "customize the timeout and customize the failure policy like if I hit an error",
    "start": "845560",
    "end": "850920"
  },
  {
    "text": "with this webbook what what should happen uh previously the time out defaulted to 30 seconds which is really",
    "start": "850920",
    "end": "857360"
  },
  {
    "text": "bad and the failure policy just continued on in the authorizer chain which might not be so bad but if you're",
    "start": "857360",
    "end": "863120"
  },
  {
    "text": "wanting to put deny rules in um you actually probably want it to to hard fail all right so so now we've got a",
    "start": "863120",
    "end": "869480"
  },
  {
    "text": "setup where you know I've got my web hook at the end that's fine but what if we wanted to have some deny stuff maybe",
    "start": "869480",
    "end": "875360"
  },
  {
    "text": "we don't want anything outside the system controllers messing with Cube system namespace well to do that we have",
    "start": "875360",
    "end": "880720"
  },
  {
    "text": "to put maybe another web hook a local web hook that knows about deny stuff up at the top uh so let's uh let's do that",
    "start": "880720",
    "end": "888959"
  },
  {
    "text": "real",
    "start": "888959",
    "end": "891279"
  },
  {
    "text": "quick so I'm just going to do this part to start all right all right",
    "start": "894199",
    "end": "899720"
  },
  {
    "text": "so now I've got a deny web hook up at the top and you see right away like I'm paying latency cost on everything now",
    "start": "899720",
    "end": "906920"
  },
  {
    "text": "okay uh I'm actually double paying it on my demo client uh so everything just got",
    "start": "906920",
    "end": "912839"
  },
  {
    "text": "slower across the system so that's not ideal um but that's not even the worst thing that could happen right like this",
    "start": "912839",
    "end": "919399"
  },
  {
    "text": "is when the web Hook is working well if it's what if I get errors from it right",
    "start": "919399",
    "end": "925600"
  },
  {
    "text": "okay my deny web hook just went down and I've just completely toasted my cluster you know the load balancer thinks it's",
    "start": "925600",
    "end": "931600"
  },
  {
    "text": "unhealthy the system controllers are broken everything is broken um so what we really want to do is scope down this",
    "start": "931600",
    "end": "938040"
  },
  {
    "text": "web hook to only requests that we know we might want to deny and so we're g to uh add a few match conditions so the",
    "start": "938040",
    "end": "945120"
  },
  {
    "text": "first thing we're going to do we're only going to pay attention to Resource requests we don't care about this this",
    "start": "945120",
    "end": "950319"
  },
  {
    "text": "deny web hook doesn't care about non-resource requests like Discovery or health Z or metrics okay so we made that",
    "start": "950319",
    "end": "956920"
  },
  {
    "text": "decision so right away our load balance isn't impacted at all if this web hook goes away uh the second thing we want to",
    "start": "956920",
    "end": "963600"
  },
  {
    "text": "do this is only in our use case we're only caring about protecting Cube system okay so we're only going to pay",
    "start": "963600",
    "end": "970839"
  },
  {
    "text": "attention to requests inside Cube system everything else doesn't even touch this web hook okay so now my system",
    "start": "970839",
    "end": "976560"
  },
  {
    "text": "controllers are happy in other namespaces that's good we're not playing paying latency cost there that's good um",
    "start": "976560",
    "end": "982720"
  },
  {
    "text": "but we still have Cube system broken so that's obviously not good and so the last thing we're going to do is we're going to exempt",
    "start": "982720",
    "end": "989399"
  },
  {
    "text": "system service accounts from even being intercepted by this web hook and so once we do",
    "start": "989399",
    "end": "995279"
  },
  {
    "text": "that um my load balancer is happy my system service accounts are happy uh my",
    "start": "995279",
    "end": "1002000"
  },
  {
    "text": "non-system service accounts are totally fine in other namespaces right the only thing that would be impacted by an error",
    "start": "1002000",
    "end": "1007720"
  },
  {
    "text": "if this web Hook was completely available completely unavailable is the clients I was trying to deny anyway",
    "start": "1007720",
    "end": "1014240"
  },
  {
    "text": "inside the namespace I was trying to deny anyway and so that one's still hitting an error but you know when we",
    "start": "1014240",
    "end": "1020480"
  },
  {
    "text": "fix the web hook and it is actually working properly now it you know it can",
    "start": "1020480",
    "end": "1025600"
  },
  {
    "text": "get the Forbidden error we want uh but we've really really scoped down the worst case",
    "start": "1025600",
    "end": "1032079"
  },
  {
    "text": "scenario that makes me so happy when people say I want to run multiple web hooks I say why would you put yourself",
    "start": "1032079",
    "end": "1038199"
  },
  {
    "text": "in that position with this we actually have a tool to make that a reasonable thing to",
    "start": "1038199",
    "end": "1043880"
  },
  {
    "text": "do all right thank you democ cards",
    "start": "1043880",
    "end": "1050400"
  },
  {
    "text": "um couple notes on that uh automatic reload is not in 129 uh for 129 you just",
    "start": "1050960",
    "end": "1056720"
  },
  {
    "text": "start up your server and this config you start with That's What You Get U but automatic reload will be in 130 before",
    "start": "1056720",
    "end": "1061799"
  },
  {
    "text": "it goes to Beta all right um if you have questions",
    "start": "1061799",
    "end": "1067000"
  },
  {
    "start": "1066000",
    "end": "1403000"
  },
  {
    "text": "about any of the sell stuff or any of the other stuff that we talked about or did this release or stuff that's coming",
    "start": "1067000",
    "end": "1072679"
  },
  {
    "text": "up I want wanted to let you know how to get in touch with us um that's a link to the Community page for Sig",
    "start": "1072679",
    "end": "1080000"
  },
  {
    "text": "um we have by weekly meetings we have mailing list we have uh slack channel uh",
    "start": "1080000",
    "end": "1085720"
  },
  {
    "text": "we're very friendly we promise if you have questions or have ideas or want to help with uh progression of some of",
    "start": "1085720",
    "end": "1092240"
  },
  {
    "text": "these things please come join us participate give your feedback give your thoughts um yeah so with that we have",
    "start": "1092240",
    "end": "1099559"
  },
  {
    "text": "some time I wanted to open it up for questions about this or any of the other stuff we talked about there's a",
    "start": "1099559",
    "end": "1105640"
  },
  {
    "text": "microphone there I think if you want to line up if you have questions thank",
    "start": "1105640",
    "end": "1111400"
  },
  {
    "text": "you also a lot of the stuff we talked about is Alpha so please go play with it and give us feedback because we can",
    "start": "1116440",
    "end": "1122520"
  },
  {
    "text": "still fix it against once it's beta then I mean we can fix it with permanent",
    "start": "1122520",
    "end": "1129399"
  },
  {
    "text": "Tech I've heard that in that",
    "start": "1135000",
    "end": "1141360"
  },
  {
    "text": "eved resty",
    "start": "1149000",
    "end": "1153919"
  },
  {
    "text": "l is there something uh the question was about like",
    "start": "1167240",
    "end": "1173320"
  },
  {
    "text": "where what's the motivation for the restrictions on Cell execution and and resource consumption it wasn't nearly as",
    "start": "1173320",
    "end": "1178679"
  },
  {
    "text": "specific as like hard specific Hardware uh it's just the knowledge that you the",
    "start": "1178679",
    "end": "1184280"
  },
  {
    "text": "person operating the cube API server uh providing the hardware the resources for that is not always the same person",
    "start": "1184280",
    "end": "1190559"
  },
  {
    "text": "that's you know uh populating cell Expressions via the API and so uh we",
    "start": "1190559",
    "end": "1196200"
  },
  {
    "text": "needed to be able to prevent abuse essentially um for something like what we talked about here where it's actually",
    "start": "1196200",
    "end": "1203080"
  },
  {
    "text": "config files for the API server abuse is not really as much of a concern but it",
    "start": "1203080",
    "end": "1210280"
  },
  {
    "text": "is still critical path you know execution and so where it might be might be acceptable to pay like milliseconds",
    "start": "1210280",
    "end": "1216840"
  },
  {
    "text": "of latency going out to a web Hook when you're talking about the conditions that are going to be evaluated to avoid going",
    "start": "1216840",
    "end": "1222440"
  },
  {
    "text": "down that path you really want like Nan seconds to micros seconds and so that's",
    "start": "1222440",
    "end": "1227559"
  },
  {
    "text": "that's where cell fits",
    "start": "1227559",
    "end": "1235240"
  },
  {
    "text": "yeah um for authenticating out to a an authorization web hook um we don't have",
    "start": "1252240",
    "end": "1259480"
  },
  {
    "text": "that planned right now but we structured the config file so that there's a spot",
    "start": "1259480",
    "end": "1264679"
  },
  {
    "text": "for it if we get there so the initial connection type uh there are actually two connection types there's you know",
    "start": "1264679",
    "end": "1271159"
  },
  {
    "text": "run in cluster so this is if you're running inside a pod and you're like delegating back to the main Cube API",
    "start": "1271159",
    "end": "1276320"
  },
  {
    "text": "server for people running extension API servers the second connection type is here's my Cube config file so the first",
    "start": "1276320",
    "end": "1281559"
  },
  {
    "text": "goal was really to get parody with what we already had from the command lines but um we have a spot for a additional",
    "start": "1281559",
    "end": "1288720"
  },
  {
    "text": "connection information Styles in the future yeah I I really wanted what you",
    "start": "1288720",
    "end": "1294720"
  },
  {
    "text": "asked for but like there was a separate kept that had tried to do it a couple years back that didn't really make",
    "start": "1294720",
    "end": "1299880"
  },
  {
    "text": "progress and it it was it was probably going to prevent this kept from",
    "start": "1299880",
    "end": "1304919"
  },
  {
    "text": "progressing if we tried to solve that problem at the same time so I listened to Jordan basically and said just we try",
    "start": "1304919",
    "end": "1310200"
  },
  {
    "text": "to be incremental and actually deliver some things and then and then build those out yeah yeah yes to D",
    "start": "1310200",
    "end": "1320039"
  },
  {
    "text": "um the whether you use http1 or HTTP http2 is not uh currently under the",
    "start": "1332320",
    "end": "1339159"
  },
  {
    "text": "control of this config um the client that it builds will actually try to use http2 so it it will try to keep",
    "start": "1339159",
    "end": "1345200"
  },
  {
    "text": "connections open to it um but that's not part of the control there",
    "start": "1345200",
    "end": "1351400"
  },
  {
    "text": "yeah no not at all yeah the client that's constructed when you load the big and say I'm going to be talking out to a",
    "start": "1352400",
    "end": "1358159"
  },
  {
    "text": "web hook it creates a client that same client gets reused this is just sort of putting conditions in front so sometimes",
    "start": "1358159",
    "end": "1364760"
  },
  {
    "text": "we don't even call the client yeah now like the one cavey out there is like when your config will change then your",
    "start": "1364760",
    "end": "1370600"
  },
  {
    "text": "clients are going to get recycled y so but that doesn't happen thank you for going to the mic I've got kind of a",
    "start": "1370600",
    "end": "1377039"
  },
  {
    "text": "beginner uh cell question for you can you talk a little bit about how you guys like bind it seems like cell fields are",
    "start": "1377039",
    "end": "1384279"
  },
  {
    "text": "sort of dynamically generated on the context in which the cell is running can you talk a little bit about how you bind",
    "start": "1384279",
    "end": "1390480"
  },
  {
    "text": "or like validate that like the the field that you're operating on actually exists and like I or just maybe give me resour",
    "start": "1390480",
    "end": "1398039"
  },
  {
    "text": "uh you know a guide on where to find resources for that let me let me take the start of that so I'm going to back",
    "start": "1398039",
    "end": "1403760"
  },
  {
    "start": "1403000",
    "end": "1717000"
  },
  {
    "text": "up right so it's situational specific right so if you look at uh for example",
    "start": "1403760",
    "end": "1410279"
  },
  {
    "text": "the username expression where it's doing claims. username we have absolutely no idea",
    "start": "1410279",
    "end": "1415640"
  },
  {
    "text": "what's in your claims because your jot has no known schema to kubernetes and there's no way for you to tell us what the schema is right so that is a runtime",
    "start": "1415640",
    "end": "1423960"
  },
  {
    "text": "check and the runtime check will basically make sure that that cell expression returns a string right uh and",
    "start": "1423960",
    "end": "1430120"
  },
  {
    "text": "if it doesn't it's going to error out so if it for some reason returned an integer or the claims that username wasn't there uh it's going to fail uh",
    "start": "1430120",
    "end": "1438360"
  },
  {
    "text": "but for example in the user info validation on the right side that user info object is a kubernetes internal",
    "start": "1438360",
    "end": "1446480"
  },
  {
    "text": "well-known schema object so if you tried to type in userinfo Fu your API server",
    "start": "1446480",
    "end": "1451960"
  },
  {
    "text": "is not going to start because it's like there's no Foo field on that so uh so we basically try to do the absolute best we",
    "start": "1451960",
    "end": "1458240"
  },
  {
    "text": "can with the schema that we know uh but on things like arbitrary payloads we",
    "start": "1458240",
    "end": "1463400"
  },
  {
    "text": "can't help you there now uh cell does have the question Mar operator so it has",
    "start": "1463400",
    "end": "1468880"
  },
  {
    "text": "like optionals so you can write cell Expressions that can optionally pull in",
    "start": "1468880",
    "end": "1475240"
  },
  {
    "text": "information uh depending on like if you think it's going to be there or not right so you can be as restrictive or as",
    "start": "1475240",
    "end": "1481600"
  },
  {
    "text": "open as you want in those expressions but go ahead sorry no no I I",
    "start": "1481600",
    "end": "1487520"
  },
  {
    "text": "was gonna say thank you there there's two steps to um using",
    "start": "1487520",
    "end": "1493360"
  },
  {
    "text": "cell internally there's a compile step type checking step and then there's an evaluation step step and so for things",
    "start": "1493360",
    "end": "1500159"
  },
  {
    "text": "where we know the schema the compile step will actually catch any errors where you're using a string where it's",
    "start": "1500159",
    "end": "1505840"
  },
  {
    "text": "actually an in you're using a field that doesn't exist for a dynamic things like the claims like Mo mentioned it's it's",
    "start": "1505840",
    "end": "1511240"
  },
  {
    "text": "all runtime",
    "start": "1511240",
    "end": "1516279"
  },
  {
    "text": "thanks else",
    "start": "1520640",
    "end": "1525360"
  },
  {
    "text": "yes",
    "start": "1526679",
    "end": "1529679"
  },
  {
    "text": "B yeah that's correct so the the things that you have access to are the token if",
    "start": "1557200",
    "end": "1563679"
  },
  {
    "text": "you're doing token authentication uh and then request attributes so Source IP is",
    "start": "1563679",
    "end": "1569960"
  },
  {
    "text": "not included in request attributes yet but if it's included in the token itself then you could map that into extra",
    "start": "1569960",
    "end": "1576360"
  },
  {
    "text": "information and that would be visible to the authorizer yeah so what what you might want to do instead of saying that",
    "start": "1576360",
    "end": "1582919"
  },
  {
    "text": "I'm going to encode like Source IP into the token you you could instead en code",
    "start": "1582919",
    "end": "1588159"
  },
  {
    "text": "like the concept of like internal Network or uh like as I mentioned like something like Tua right like some claim",
    "start": "1588159",
    "end": "1595720"
  },
  {
    "text": "that uh gives you the sense of okay I trust this client in a in a different way than I normally do so when they're",
    "start": "1595720",
    "end": "1601840"
  },
  {
    "text": "going to do like uh you know maybe they're going to exec into a production pod right sometimes you have to do that",
    "start": "1601840",
    "end": "1608200"
  },
  {
    "text": "and but you still might want to I see you laughing Jordan sometimes you do um and so you could constrain it that",
    "start": "1608200",
    "end": "1614799"
  },
  {
    "text": "way but yes that is totally possible I saw a hand over here here",
    "start": "1614799",
    "end": "1620519"
  },
  {
    "text": "yeah no no no um cell is just evaluates expressions and the variables that the",
    "start": "1622240",
    "end": "1630080"
  },
  {
    "text": "expression has access to are entirely up to the integrator so in this case for",
    "start": "1630080",
    "end": "1635240"
  },
  {
    "text": "the claim mappings uh the inputs we we provide it a map of string",
    "start": "1635240",
    "end": "1641640"
  },
  {
    "text": "to anything uh based on the claims and the token for the validation rules the",
    "start": "1641640",
    "end": "1648640"
  },
  {
    "text": "input variable is a user object that has really well-known Fields so it's entirely up to us as we integrate cell",
    "start": "1648640",
    "end": "1655679"
  },
  {
    "text": "into different uh different aspects of the server what the variables are that it has access to what the schema of",
    "start": "1655679",
    "end": "1661600"
  },
  {
    "text": "those variables are and we try really hard to make the schema match the same types you would be dealing with if you",
    "start": "1661600",
    "end": "1667679"
  },
  {
    "text": "were using a web hook so for um so for the authorization uh rules the object that",
    "start": "1667679",
    "end": "1674279"
  },
  {
    "text": "you have access to is a subject access review schema it's the same object you would be dealing with if we actually",
    "start": "1674279",
    "end": "1680880"
  },
  {
    "text": "sent it out to your web hook for admission web hook conditions the object",
    "start": "1680880",
    "end": "1686720"
  },
  {
    "text": "that the cell Expressions have access to is an admission review object so it's the same object your web hook would see",
    "start": "1686720",
    "end": "1692240"
  },
  {
    "text": "if we ended up sending it out to your webbook we try to make the schemas sort of a line between the cell expressions",
    "start": "1692240",
    "end": "1697679"
  },
  {
    "text": "and the integration of that area",
    "start": "1697679",
    "end": "1704240"
  },
  {
    "text": "yeah",
    "start": "1706440",
    "end": "1709440"
  },
  {
    "start": "1717000",
    "end": "1850000"
  },
  {
    "text": "um API Machinery has the ability to run cell expressions in validating admission",
    "start": "1717640",
    "end": "1724559"
  },
  {
    "text": "so this is the uh 3488 3488 um and it's very generic it it basically is running",
    "start": "1724559",
    "end": "1730919"
  },
  {
    "text": "cell on an admission review so you can do anything you want to do from the",
    "start": "1730919",
    "end": "1736679"
  },
  {
    "text": "information in an admission object so if if you want to talk meta so sell for admission control has access to a",
    "start": "1736679",
    "end": "1743519"
  },
  {
    "text": "function which lets you invoke the authorizer and that authorizer you can",
    "start": "1743519",
    "end": "1748559"
  },
  {
    "text": "ask it any question you want which then might flow into your web hook that we just configured right um so yes you can",
    "start": "1748559",
    "end": "1754559"
  },
  {
    "text": "go as far as you want Turtles all the way down yes yeah",
    "start": "1754559",
    "end": "1759799"
  },
  {
    "text": "just just be careful right if you end up making like seven authorization calls you can't we don't let you so this this",
    "start": "1759799",
    "end": "1765440"
  },
  {
    "text": "goes back to the cost oh right right right the cost uh aspect one of the great things about cell is we can be",
    "start": "1765440",
    "end": "1771200"
  },
  {
    "text": "very specific in like attributing cost to different parts of the expression so when you're working with data we the",
    "start": "1771200",
    "end": "1777600"
  },
  {
    "text": "cost is based on the function you're calling or the macro you're calling and the size of the data for something like",
    "start": "1777600",
    "end": "1782640"
  },
  {
    "text": "the authorizer uh function that we make available um to admission cell",
    "start": "1782640",
    "end": "1787960"
  },
  {
    "text": "Expressions uh we actually give that a really high cost so you I think you can basically only do two calls okay um just",
    "start": "1787960",
    "end": "1796279"
  },
  {
    "text": "because that could be going out to web hooks like it's it's a pretty expensive",
    "start": "1796279",
    "end": "1801600"
  },
  {
    "text": "call um so the cost is actually done at compile time so when you are setting up",
    "start": "1802240",
    "end": "1808000"
  },
  {
    "text": "your admission rules if you tried to create a validating admission policy and",
    "start": "1808000",
    "end": "1813120"
  },
  {
    "text": "you your rules were too expensive you wouldn't be allowed to create that API object yeah so it'll just fail before",
    "start": "1813120",
    "end": "1818600"
  },
  {
    "text": "you can create it so and and then there are additional uh protections at runtime so you know if if something unexpected",
    "start": "1818600",
    "end": "1826279"
  },
  {
    "text": "happens you know we we thought you fit within the cost parameters but then at runtime you're actually going long there's there's also like a context",
    "start": "1826279",
    "end": "1832159"
  },
  {
    "text": "cancellation uh mechanism so we can keep the server from running away with with",
    "start": "1832159",
    "end": "1838919"
  },
  {
    "text": "cost all right well thank you for coming we'll hang out here for a few minutes appreciate",
    "start": "1841720",
    "end": "1847600"
  },
  {
    "text": "it",
    "start": "1849799",
    "end": "1852799"
  }
]