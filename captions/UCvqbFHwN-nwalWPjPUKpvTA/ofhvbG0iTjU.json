[
  {
    "text": "hi uh firston is pretty neat to",
    "start": "240",
    "end": "3840"
  },
  {
    "text": "be honest uh as Bok said so neat that I",
    "start": "3840",
    "end": "7839"
  },
  {
    "text": "have traveled halfway around the world",
    "start": "7839",
    "end": "10240"
  },
  {
    "text": "and I'm currently enduring jet lag that",
    "start": "10240",
    "end": "12480"
  },
  {
    "text": "would make Kronos blush in order",
    "start": "12480",
    "end": "15400"
  },
  {
    "text": "to come here and talk to you about uh",
    "start": "15400",
    "end": "19240"
  },
  {
    "text": "Thanos right in particular I want to",
    "start": "19240",
    "end": "22039"
  },
  {
    "text": "talk about running a highly available",
    "start": "22039",
    "end": "23680"
  },
  {
    "text": "globally distributed Thanos that SES",
    "start": "23680",
    "end": "26439"
  },
  {
    "text": "more than 50 terabytes of metrics a day",
    "start": "26439",
    "end": "28760"
  },
  {
    "text": "from over a thousand side cars in Cloud",
    "start": "28760",
    "end": "30679"
  },
  {
    "text": "Flair's 600 or so data centers around",
    "start": "30679",
    "end": "33280"
  },
  {
    "text": "the world and if all that sounds like",
    "start": "33280",
    "end": "36040"
  },
  {
    "text": "something in s might scream in some sort",
    "start": "36040",
    "end": "38160"
  },
  {
    "text": "of night terror uh it is and I've had it",
    "start": "38160",
    "end": "41039"
  },
  {
    "text": "you can ask my partner but thankfully in",
    "start": "41039",
    "end": "43600"
  },
  {
    "text": "order to Stave off all of the nightmares",
    "start": "43600",
    "end": "47480"
  },
  {
    "text": "that lurk around every corner of our",
    "start": "47480",
    "end": "50000"
  },
  {
    "text": "infrastructure these days we put a bunch",
    "start": "50000",
    "end": "52199"
  },
  {
    "text": "of tooling to help and today I want to",
    "start": "52199",
    "end": "54440"
  },
  {
    "text": "talk about that I want to talk about our",
    "start": "54440",
    "end": "55760"
  },
  {
    "text": "Thanos Journey how we've started from",
    "start": "55760",
    "end": "59519"
  },
  {
    "text": "kind of Beginnings up to what we have",
    "start": "59519",
    "end": "61879"
  },
  {
    "text": "now which helps us meet a decently",
    "start": "61879",
    "end": "64478"
  },
  {
    "text": "respectable set of slos but before we",
    "start": "64479",
    "end": "67280"
  },
  {
    "text": "get into all that hi I'm G DCH I teally",
    "start": "67280",
    "end": "70640"
  },
  {
    "text": "our observability team at Cloud Flair we",
    "start": "70640",
    "end": "73200"
  },
  {
    "text": "build maintain and operate all the",
    "start": "73200",
    "end": "75000"
  },
  {
    "text": "tooling that helps Cloud flare debug",
    "start": "75000",
    "end": "76960"
  },
  {
    "text": "Cloud flare and part of that is",
    "start": "76960",
    "end": "79400"
  },
  {
    "text": "operating this nightmare of a Thanos",
    "start": "79400",
    "end": "82880"
  },
  {
    "text": "cluster our Thanos Journey started",
    "start": "82880",
    "end": "85799"
  },
  {
    "text": "pretty early on as B said around the",
    "start": "85799",
    "end": "88200"
  },
  {
    "text": "beginning of 2018 we had just replaced",
    "start": "88200",
    "end": "91200"
  },
  {
    "text": "our old monitoring setup nagios with",
    "start": "91200",
    "end": "95399"
  },
  {
    "text": "Prometheus and we were looking to",
    "start": "95399",
    "end": "97439"
  },
  {
    "text": "replace our long-term metric storage",
    "start": "97439",
    "end": "99720"
  },
  {
    "text": "which at the time came in the form of a",
    "start": "99720",
    "end": "102399"
  },
  {
    "text": "decently large open tsdb",
    "start": "102399",
    "end": "104719"
  },
  {
    "text": "instance few main reasons for that but",
    "start": "104719",
    "end": "107719"
  },
  {
    "text": "Chief among them open tsdb relies on",
    "start": "107719",
    "end": "110479"
  },
  {
    "text": "hbas and hbas relies on Hadoop and",
    "start": "110479",
    "end": "113880"
  },
  {
    "text": "Hadoop is Nightmare software created by",
    "start": "113880",
    "end": "116600"
  },
  {
    "text": "the trickster God Janus in order to",
    "start": "116600",
    "end": "118640"
  },
  {
    "text": "confuse and befuddle any SRE who tries",
    "start": "118640",
    "end": "122000"
  },
  {
    "text": "to deal with it or at least that's what",
    "start": "122000",
    "end": "124320"
  },
  {
    "text": "I would say if I wasn't just trying to",
    "start": "124320",
    "end": "126399"
  },
  {
    "text": "pass paper over the fact that Java was",
    "start": "126399",
    "end": "129599"
  },
  {
    "text": "not a core competency of our team at the",
    "start": "129599",
    "end": "131599"
  },
  {
    "text": "time we were very much a go shop and so",
    "start": "131599",
    "end": "134400"
  },
  {
    "text": "maintaining it was a real",
    "start": "134400",
    "end": "137200"
  },
  {
    "text": "bear back then our numbers were a hell",
    "start": "137200",
    "end": "140599"
  },
  {
    "text": "of a lot smaller we had just under a 100",
    "start": "140599",
    "end": "143760"
  },
  {
    "text": "data centers just under a billion active",
    "start": "143760",
    "end": "145840"
  },
  {
    "text": "Time",
    "start": "145840",
    "end": "148080"
  },
  {
    "text": "series our Thanos infrastructure was",
    "start": "148840",
    "end": "153160"
  },
  {
    "text": "obviously quite simple as well in each",
    "start": "153160",
    "end": "156160"
  },
  {
    "text": "of our data centers we operate a few",
    "start": "156160",
    "end": "158680"
  },
  {
    "text": "management nodes ranging from one up to",
    "start": "158680",
    "end": "161760"
  },
  {
    "text": "I think 10 depending on the size of our",
    "start": "161760",
    "end": "164200"
  },
  {
    "text": "data center each of those management",
    "start": "164200",
    "end": "166560"
  },
  {
    "text": "nodes runs uh Prometheus so hey let's",
    "start": "166560",
    "end": "170200"
  },
  {
    "text": "slap a Thanos side car next to all those",
    "start": "170200",
    "end": "173040"
  },
  {
    "text": "we'll create a bucket in our internal S3",
    "start": "173040",
    "end": "176319"
  },
  {
    "text": "storage it could upload to that we'll",
    "start": "176319",
    "end": "178760"
  },
  {
    "text": "throw in a store we'll throw on a query",
    "start": "178760",
    "end": "181280"
  },
  {
    "text": "hey done right and that worked really",
    "start": "181280",
    "end": "184680"
  },
  {
    "text": "well for about a year and a",
    "start": "184680",
    "end": "187840"
  },
  {
    "text": "half",
    "start": "187840",
    "end": "189560"
  },
  {
    "text": "but it had a few glaring problems",
    "start": "189560",
    "end": "192159"
  },
  {
    "text": "chiefly it didn't really scale",
    "start": "192159",
    "end": "194319"
  },
  {
    "text": "well these days you can split up a",
    "start": "194319",
    "end": "196560"
  },
  {
    "text": "bucket with like time based partitioning",
    "start": "196560",
    "end": "198319"
  },
  {
    "text": "and things like that that didn't exist",
    "start": "198319",
    "end": "201360"
  },
  {
    "text": "at the time and so we were mostly stuck",
    "start": "201360",
    "end": "203200"
  },
  {
    "text": "with just vertically scaling our store",
    "start": "203200",
    "end": "206080"
  },
  {
    "text": "at the same time our compactors were",
    "start": "206080",
    "end": "208599"
  },
  {
    "text": "really struggling with sporadic bursts",
    "start": "208599",
    "end": "211239"
  },
  {
    "text": "of memory and CPU that our",
    "start": "211239",
    "end": "213599"
  },
  {
    "text": "infrastructure was really struggling to",
    "start": "213599",
    "end": "215920"
  },
  {
    "text": "accommodate so once our Thanos got too",
    "start": "215920",
    "end": "220640"
  },
  {
    "text": "slow to be really acceptable it was time",
    "start": "220640",
    "end": "223000"
  },
  {
    "text": "to do some shouting right our one bucket",
    "start": "223000",
    "end": "225439"
  },
  {
    "text": "became nine one for each region we",
    "start": "225439",
    "end": "227799"
  },
  {
    "text": "operate in each data center uploads to",
    "start": "227799",
    "end": "231360"
  },
  {
    "text": "the bucket corresponding to its region",
    "start": "231360",
    "end": "234120"
  },
  {
    "text": "alongside each region we have a store",
    "start": "234120",
    "end": "235760"
  },
  {
    "text": "compactor Central query typ them all",
    "start": "235760",
    "end": "237760"
  },
  {
    "text": "together again pretty B boring",
    "start": "237760",
    "end": "241040"
  },
  {
    "text": "right the one interesting thing to note",
    "start": "241040",
    "end": "243680"
  },
  {
    "text": "there is we chose regions because",
    "start": "243680",
    "end": "246640"
  },
  {
    "text": "they're pretty static at least until we",
    "start": "246640",
    "end": "248680"
  },
  {
    "text": "make a Antarctica data center or",
    "start": "248680",
    "end": "250599"
  },
  {
    "text": "something which aami has for some",
    "start": "250599",
    "end": "254799"
  },
  {
    "text": "reason we can sort of create a set of",
    "start": "254799",
    "end": "257359"
  },
  {
    "text": "Thanos infrastructure for our regions",
    "start": "257359",
    "end": "259600"
  },
  {
    "text": "and then sort of set it and forget it",
    "start": "259600",
    "end": "261959"
  },
  {
    "text": "like we're not getting new regions",
    "start": "261959",
    "end": "264000"
  },
  {
    "text": "anytime",
    "start": "264000",
    "end": "265040"
  },
  {
    "text": "soon when time base sharding dropped in",
    "start": "265040",
    "end": "267639"
  },
  {
    "text": "Thanos we took the opportunity to",
    "start": "267639",
    "end": "269720"
  },
  {
    "text": "normalize our stores a bit despite being",
    "start": "269720",
    "end": "272039"
  },
  {
    "text": "a Global Network our regions are very",
    "start": "272039",
    "end": "274440"
  },
  {
    "text": "mismatched in terms of capacity",
    "start": "274440",
    "end": "277400"
  },
  {
    "text": "our North America has much more capacity",
    "start": "277400",
    "end": "280520"
  },
  {
    "text": "than APAC for example these differences",
    "start": "280520",
    "end": "283639"
  },
  {
    "text": "in capacity filter damage difference in",
    "start": "283639",
    "end": "285440"
  },
  {
    "text": "Time series differences in bucket sizes",
    "start": "285440",
    "end": "287520"
  },
  {
    "text": "differences in compute requirements for",
    "start": "287520",
    "end": "289800"
  },
  {
    "text": "our stores so time based sharding allows",
    "start": "289800",
    "end": "292479"
  },
  {
    "text": "us to normalize that a bit",
    "start": "292479",
    "end": "297199"
  },
  {
    "text": "but we can spin up multiple stores for",
    "start": "297199",
    "end": "300639"
  },
  {
    "text": "each",
    "start": "300639",
    "end": "301960"
  },
  {
    "text": "bucket but at the time we weren't",
    "start": "301960",
    "end": "303919"
  },
  {
    "text": "collecting any query metrics or anything",
    "start": "303919",
    "end": "305560"
  },
  {
    "text": "like that so it was very much Vibe based",
    "start": "305560",
    "end": "309160"
  },
  {
    "text": "like we would spin up a new store when",
    "start": "309160",
    "end": "310600"
  },
  {
    "text": "everything started to feel slow it's not",
    "start": "310600",
    "end": "314759"
  },
  {
    "text": "super rigorous but honestly Vibe based",
    "start": "314759",
    "end": "317720"
  },
  {
    "text": "scaling kind of great for anything you",
    "start": "317720",
    "end": "319800"
  },
  {
    "text": "don't need to be too rigorous about",
    "start": "319800",
    "end": "322520"
  },
  {
    "text": "eventually though as we got more",
    "start": "322520",
    "end": "324600"
  },
  {
    "text": "capacity as a team and as our Thanos",
    "start": "324600",
    "end": "327120"
  },
  {
    "text": "continued to grow towards the nightmare",
    "start": "327120",
    "end": "329800"
  },
  {
    "text": "it is today it came time when we did",
    "start": "329800",
    "end": "333720"
  },
  {
    "text": "need to start being a bit more rigorous",
    "start": "333720",
    "end": "336440"
  },
  {
    "text": "new data centers were coming online",
    "start": "336440",
    "end": "338600"
  },
  {
    "text": "faster than we could keep up with",
    "start": "338600",
    "end": "340199"
  },
  {
    "text": "sharting our stores and as much as we",
    "start": "340199",
    "end": "343759"
  },
  {
    "text": "wanted to we were really falling behind",
    "start": "343759",
    "end": "346319"
  },
  {
    "text": "in our Thanos user experience was",
    "start": "346319",
    "end": "349600"
  },
  {
    "text": "suffering as a",
    "start": "349600",
    "end": "352039"
  },
  {
    "text": "result so that's what brings me this",
    "start": "352039",
    "end": "355199"
  },
  {
    "text": "talk scaling Thanos and dynamic",
    "start": "355199",
    "end": "357880"
  },
  {
    "text": "Prometheus environments it turns out",
    "start": "357880",
    "end": "359800"
  },
  {
    "text": "scaling Thanos is really difficult in a",
    "start": "359800",
    "end": "361919"
  },
  {
    "text": "world where bits of your infrastructure",
    "start": "361919",
    "end": "364319"
  },
  {
    "text": "can come and go on a whim and I want to",
    "start": "364319",
    "end": "368160"
  },
  {
    "text": "talk about all the tooling we've",
    "start": "368160",
    "end": "369919"
  },
  {
    "text": "developed to handle that it came in four",
    "start": "369919",
    "end": "372880"
  },
  {
    "text": "main flavors we've got our storage we've",
    "start": "372880",
    "end": "376160"
  },
  {
    "text": "got our compactors we've got our Thanos",
    "start": "376160",
    "end": "378240"
  },
  {
    "text": "stores and we've got our Thanos queries",
    "start": "378240",
    "end": "380599"
  },
  {
    "text": "let's talk about SE for the uninitiated",
    "start": "380599",
    "end": "383800"
  },
  {
    "text": "seph is a blob storage you can throw",
    "start": "383800",
    "end": "387240"
  },
  {
    "text": "files at it it stores them you can slap",
    "start": "387240",
    "end": "389240"
  },
  {
    "text": "an 3 API in front of it voila you got",
    "start": "389240",
    "end": "391800"
  },
  {
    "text": "your own private",
    "start": "391800",
    "end": "393120"
  },
  {
    "text": "S3 Cloud Player SE was one of these",
    "start": "393120",
    "end": "395960"
  },
  {
    "text": "things that everyone loved to use and no",
    "start": "395960",
    "end": "400120"
  },
  {
    "text": "one wanted to own so it fell down to our",
    "start": "400120",
    "end": "402599"
  },
  {
    "text": "core SRE team who I feel very sad for",
    "start": "402599",
    "end": "405319"
  },
  {
    "text": "but it meant it was basically",
    "start": "405319",
    "end": "407039"
  },
  {
    "text": "unmaintained which is a bit of a problem",
    "start": "407039",
    "end": "409160"
  },
  {
    "text": "when we use a lot of surf for our",
    "start": "409160",
    "end": "412639"
  },
  {
    "text": "Thanos thankfully Cloud flare when we",
    "start": "412639",
    "end": "415919"
  },
  {
    "text": "started looking for Alternatives",
    "start": "415919",
    "end": "417800"
  },
  {
    "text": "was just around the corner from",
    "start": "417800",
    "end": "419800"
  },
  {
    "text": "announcing our own object storage this",
    "start": "419800",
    "end": "421919"
  },
  {
    "text": "isn't a sales pitch and my marketing",
    "start": "421919",
    "end": "423720"
  },
  {
    "text": "team is going to hate me for this but I",
    "start": "423720",
    "end": "425280"
  },
  {
    "text": "don't give a if you use it just a",
    "start": "425280",
    "end": "427919"
  },
  {
    "text": "bit of flavor to our",
    "start": "427919",
    "end": "429919"
  },
  {
    "text": "experience R2 was pretty much a perfect",
    "start": "429919",
    "end": "432280"
  },
  {
    "text": "solution for us a it was maintained B we",
    "start": "432280",
    "end": "436440"
  },
  {
    "text": "could dog food our products which our",
    "start": "436440",
    "end": "439039"
  },
  {
    "text": "product teams really really like and see",
    "start": "439039",
    "end": "442000"
  },
  {
    "text": "not having things centralized in our qu",
    "start": "442000",
    "end": "445120"
  },
  {
    "text": "AR Center meant that we could start to",
    "start": "445120",
    "end": "448800"
  },
  {
    "text": "treat Thanos is a bit of a stateless",
    "start": "448800",
    "end": "451240"
  },
  {
    "text": "application which did wonders for our ha",
    "start": "451240",
    "end": "454599"
  },
  {
    "text": "Story the question was how do we migrate",
    "start": "454599",
    "end": "458440"
  },
  {
    "text": "we keep 13 months of retention by",
    "start": "458440",
    "end": "460440"
  },
  {
    "text": "default so just lopping that off and",
    "start": "460440",
    "end": "462599"
  },
  {
    "text": "starting fresh in R2 it's not really",
    "start": "462599",
    "end": "465440"
  },
  {
    "text": "workable at the same time that 13 months",
    "start": "465440",
    "end": "468560"
  },
  {
    "text": "is about 50 pedabytes or so of data so",
    "start": "468560",
    "end": "473000"
  },
  {
    "text": "migrating that manually over any form of",
    "start": "473000",
    "end": "475240"
  },
  {
    "text": "net Network link is not going to work",
    "start": "475240",
    "end": "478440"
  },
  {
    "text": "either",
    "start": "478440",
    "end": "480120"
  },
  {
    "text": "the recommended Upstream solution to",
    "start": "480120",
    "end": "481560"
  },
  {
    "text": "this is to run two side Cars Sorry not",
    "start": "481560",
    "end": "484400"
  },
  {
    "text": "yet uh to upload to one object storage",
    "start": "484400",
    "end": "488360"
  },
  {
    "text": "and then replicate out to another we",
    "start": "488360",
    "end": "492400"
  },
  {
    "text": "didn't really want to fuss with our",
    "start": "492400",
    "end": "494520"
  },
  {
    "text": "existing Seth stuff because we had to",
    "start": "494520",
    "end": "497360"
  },
  {
    "text": "keep it going while we were migrating so",
    "start": "497360",
    "end": "500120"
  },
  {
    "text": "in our case this would mean that we",
    "start": "500120",
    "end": "502400"
  },
  {
    "text": "would have to centralize into SE and",
    "start": "502400",
    "end": "504919"
  },
  {
    "text": "then decentralize out back to R2 which",
    "start": "504919",
    "end": "508680"
  },
  {
    "text": "fell a little bit icky to",
    "start": "508680",
    "end": "512919"
  },
  {
    "text": "us again the obvious solution to us was",
    "start": "512919",
    "end": "516320"
  },
  {
    "text": "to run two side",
    "start": "516320",
    "end": "519159"
  },
  {
    "text": "Cars one uploading to Seth one uploading",
    "start": "519279",
    "end": "522560"
  },
  {
    "text": "to",
    "start": "522560",
    "end": "524680"
  },
  {
    "text": "R2 uh but no Thanos doesn't want you",
    "start": "525040",
    "end": "527839"
  },
  {
    "text": "doing",
    "start": "527839",
    "end": "528600"
  },
  {
    "text": "that when you run a Thanos side car it",
    "start": "528600",
    "end": "531560"
  },
  {
    "text": "stores uh which blocks that's uploaded",
    "start": "531560",
    "end": "534200"
  },
  {
    "text": "in a Json file in your Prometheus data",
    "start": "534200",
    "end": "536240"
  },
  {
    "text": "directory ship a metadata Json file just",
    "start": "536240",
    "end": "538839"
  },
  {
    "text": "a gin array of block IDs uh that file is",
    "start": "538839",
    "end": "542360"
  },
  {
    "text": "a const in Thanos so no matter how many",
    "start": "542360",
    "end": "545160"
  },
  {
    "text": "side cars you want to run uh every block",
    "start": "545160",
    "end": "547920"
  },
  {
    "text": "will only ever be uploaded once even if",
    "start": "547920",
    "end": "549720"
  },
  {
    "text": "they're pointing to completely different",
    "start": "549720",
    "end": "551279"
  },
  {
    "text": "object storages bit of a problem but hey",
    "start": "551279",
    "end": "554800"
  },
  {
    "text": "one patch later and we make that",
    "start": "554800",
    "end": "557640"
  },
  {
    "text": "configurable we can start to put up a",
    "start": "557640",
    "end": "559680"
  },
  {
    "text": "bit bit of retention in our two while",
    "start": "559680",
    "end": "562000"
  },
  {
    "text": "keeping our existing SE more or less",
    "start": "562000",
    "end": "564600"
  },
  {
    "text": "unchanged hey you're",
    "start": "564600",
    "end": "567079"
  },
  {
    "text": "welcome let's talk about those region",
    "start": "567079",
    "end": "570040"
  },
  {
    "text": "buckets",
    "start": "570040",
    "end": "572720"
  },
  {
    "text": "though despite being able to scale out",
    "start": "573600",
    "end": "576360"
  },
  {
    "text": "with time Bas Shing those sort of per",
    "start": "576360",
    "end": "579760"
  },
  {
    "text": "region buckets put a bit of a vertical",
    "start": "579760",
    "end": "582040"
  },
  {
    "text": "limit on how much we can scale out as",
    "start": "582040",
    "end": "585000"
  },
  {
    "text": "much as we can keep sharding out our",
    "start": "585000",
    "end": "588040"
  },
  {
    "text": "stores you start to get diminishing",
    "start": "588040",
    "end": "590519"
  },
  {
    "text": "returns when your stores are handling 24",
    "start": "590519",
    "end": "593839"
  },
  {
    "text": "or even 12 hours of data in order to",
    "start": "593839",
    "end": "596120"
  },
  {
    "text": "meet our slos what we really wanted to",
    "start": "596120",
    "end": "598600"
  },
  {
    "text": "do was push the to its logical",
    "start": "598600",
    "end": "601440"
  },
  {
    "text": "conclusion down into per data center",
    "start": "601440",
    "end": "604800"
  },
  {
    "text": "buckets which brings me to the dynamic",
    "start": "604800",
    "end": "607680"
  },
  {
    "text": "part of our journey because Cloud",
    "start": "607680",
    "end": "609760"
  },
  {
    "text": "players network has been growing pretty",
    "start": "609760",
    "end": "611839"
  },
  {
    "text": "quickly recently it used to be that we",
    "start": "611839",
    "end": "615000"
  },
  {
    "text": "would get a new data center online every",
    "start": "615000",
    "end": "617480"
  },
  {
    "text": "couple of months or so which might have",
    "start": "617480",
    "end": "620279"
  },
  {
    "text": "been workable if we wanted to manually",
    "start": "620279",
    "end": "622399"
  },
  {
    "text": "create this Thanos",
    "start": "622399",
    "end": "624040"
  },
  {
    "text": "infrastructure but that doesn't really",
    "start": "624040",
    "end": "625760"
  },
  {
    "text": "work these days these days we have a new",
    "start": "625760",
    "end": "628120"
  },
  {
    "text": "data center coming up or an old data",
    "start": "628120",
    "end": "629760"
  },
  {
    "text": "center going away every week or so it's",
    "start": "629760",
    "end": "633760"
  },
  {
    "text": "far too much to be managing manually we",
    "start": "633760",
    "end": "636519"
  },
  {
    "text": "needed some sort of automated way to do",
    "start": "636519",
    "end": "638480"
  },
  {
    "text": "it",
    "start": "638480",
    "end": "639360"
  },
  {
    "text": "right the way we started was a central",
    "start": "639360",
    "end": "642279"
  },
  {
    "text": "provisioning service in our core data",
    "start": "642279",
    "end": "644519"
  },
  {
    "text": "centers our Central data centers we keep",
    "start": "644519",
    "end": "647079"
  },
  {
    "text": "a database of data centers which is a",
    "start": "647079",
    "end": "649560"
  },
  {
    "text": "hell of a sentence to say",
    "start": "649560",
    "end": "651959"
  },
  {
    "text": "apparently we have a system that can",
    "start": "651959",
    "end": "655440"
  },
  {
    "text": "poll that database and so hey we'll",
    "start": "655440",
    "end": "658720"
  },
  {
    "text": "create fos infrastructure whenever we",
    "start": "658720",
    "end": "660920"
  },
  {
    "text": "notice a new data center in that",
    "start": "660920",
    "end": "663079"
  },
  {
    "text": "database unfortunately that comes with a",
    "start": "663079",
    "end": "665839"
  },
  {
    "text": "bit of a race",
    "start": "665839",
    "end": "668120"
  },
  {
    "text": "condition if our data center comes up",
    "start": "668120",
    "end": "671360"
  },
  {
    "text": "before our Central provisioning service",
    "start": "671360",
    "end": "673440"
  },
  {
    "text": "has noticed that that new data center",
    "start": "673440",
    "end": "676160"
  },
  {
    "text": "exists well our side car comes up it",
    "start": "676160",
    "end": "679320"
  },
  {
    "text": "doesn't have a bucket and it immediately",
    "start": "679320",
    "end": "681200"
  },
  {
    "text": "crashes and Pages you at 3:00 a.m. and",
    "start": "681200",
    "end": "683480"
  },
  {
    "text": "our infrastructure team gets s because",
    "start": "683480",
    "end": "685200"
  },
  {
    "text": "they can't bring up the data center bit",
    "start": "685200",
    "end": "687079"
  },
  {
    "text": "of a problem what we wanted was",
    "start": "687079",
    "end": "689079"
  },
  {
    "text": "something a bit more in line to the side",
    "start": "689079",
    "end": "692040"
  },
  {
    "text": "car process so we ended up building this",
    "start": "692040",
    "end": "694360"
  },
  {
    "text": "into the Thanos in its script when now",
    "start": "694360",
    "end": "697360"
  },
  {
    "text": "Thanos side cars come up they're",
    "start": "697360",
    "end": "699120"
  },
  {
    "text": "provisioned with admin credentials to",
    "start": "699120",
    "end": "701320"
  },
  {
    "text": "our R2 when they first start they check",
    "start": "701320",
    "end": "704480"
  },
  {
    "text": "whether they have a bucket if they have",
    "start": "704480",
    "end": "706560"
  },
  {
    "text": "a bucket great if they don't they can",
    "start": "706560",
    "end": "709079"
  },
  {
    "text": "make their own one and then drop",
    "start": "709079",
    "end": "711560"
  },
  {
    "text": "themselves back down to write",
    "start": "711560",
    "end": "712639"
  },
  {
    "text": "credentials so we don't get any",
    "start": "712639",
    "end": "714600"
  },
  {
    "text": "privilege escalation or anything like",
    "start": "714600",
    "end": "717040"
  },
  {
    "text": "that with that in place it means that",
    "start": "717040",
    "end": "719519"
  },
  {
    "text": "ourside cars can never crash because",
    "start": "719519",
    "end": "721200"
  },
  {
    "text": "they don't have a bucket whenever a data",
    "start": "721200",
    "end": "722880"
  },
  {
    "text": "center comes up there will always be a",
    "start": "722880",
    "end": "725519"
  },
  {
    "text": "place for it to put Thanos",
    "start": "725519",
    "end": "726959"
  },
  {
    "text": "infrastructure into which is pretty nice",
    "start": "726959",
    "end": "730360"
  },
  {
    "text": "the St about",
    "start": "730360",
    "end": "732079"
  },
  {
    "text": "compactors compactors are annoying",
    "start": "732079",
    "end": "735199"
  },
  {
    "text": "they're really really bursty they",
    "start": "735199",
    "end": "737199"
  },
  {
    "text": "Slumber for eons until eventually waking",
    "start": "737199",
    "end": "740519"
  },
  {
    "text": "up and consuming The Souls of your poor",
    "start": "740519",
    "end": "743560"
  },
  {
    "text": "CPUs and RAM",
    "start": "743560",
    "end": "746240"
  },
  {
    "text": "sticks in our infrastructure there's two",
    "start": "746240",
    "end": "749240"
  },
  {
    "text": "places we could use to confine such a",
    "start": "749240",
    "end": "751760"
  },
  {
    "text": "being we can put them in kubernetes in",
    "start": "751760",
    "end": "754519"
  },
  {
    "text": "our C out centers or we can decentralize",
    "start": "754519",
    "end": "757199"
  },
  {
    "text": "them out on our Edge you might think",
    "start": "757199",
    "end": "760160"
  },
  {
    "text": "that kubernetes is the perfect place for",
    "start": "760160",
    "end": "761800"
  },
  {
    "text": "this R that's what kubernetes does it",
    "start": "761800",
    "end": "764160"
  },
  {
    "text": "scales up and down really really quickly",
    "start": "764160",
    "end": "766760"
  },
  {
    "text": "but we have a nice thing being an",
    "start": "766760",
    "end": "769480"
  },
  {
    "text": "entirely bare metal",
    "start": "769480",
    "end": "772160"
  },
  {
    "text": "organization AR Edge traffic is",
    "start": "772160",
    "end": "774000"
  },
  {
    "text": "interesting this is CPU traffic from one",
    "start": "774000",
    "end": "776639"
  },
  {
    "text": "of our Ed colos and you can see it's",
    "start": "776639",
    "end": "778440"
  },
  {
    "text": "really sick",
    "start": "778440",
    "end": "779920"
  },
  {
    "text": "right when a new data center or when a",
    "start": "779920",
    "end": "782720"
  },
  {
    "text": "data center wakes up for the day and",
    "start": "782720",
    "end": "785800"
  },
  {
    "text": "people are using the internet and people",
    "start": "785800",
    "end": "787120"
  },
  {
    "text": "are sending traffic through Cloud flare",
    "start": "787120",
    "end": "789199"
  },
  {
    "text": "our CPUs are pretty busy they're doing",
    "start": "789199",
    "end": "791279"
  },
  {
    "text": "stuff serving the",
    "start": "791279",
    "end": "793160"
  },
  {
    "text": "internet when it's night time for that",
    "start": "793160",
    "end": "796040"
  },
  {
    "text": "data center fewer people are using the",
    "start": "796040",
    "end": "797720"
  },
  {
    "text": "internet we're serving less traffic and",
    "start": "797720",
    "end": "800120"
  },
  {
    "text": "we have a bunch of wasted CPU perfect",
    "start": "800120",
    "end": "803480"
  },
  {
    "text": "for these sort of batch jobs to mop up",
    "start": "803480",
    "end": "805959"
  },
  {
    "text": "that that sort of capacity this isn't",
    "start": "805959",
    "end": "809279"
  },
  {
    "text": "common in an on-prem environment we have",
    "start": "809279",
    "end": "812000"
  },
  {
    "text": "to provision for that Peak load we can't",
    "start": "812000",
    "end": "815519"
  },
  {
    "text": "use ec2 and scale up and down as we want",
    "start": "815519",
    "end": "819040"
  },
  {
    "text": "to on our Edge we use Nomad to provision",
    "start": "819040",
    "end": "822800"
  },
  {
    "text": "these things so we can create a periodic",
    "start": "822800",
    "end": "824600"
  },
  {
    "text": "job basically a",
    "start": "824600",
    "end": "826639"
  },
  {
    "text": "Chron this allows us to start a",
    "start": "826639",
    "end": "828839"
  },
  {
    "text": "compactor at the low time for that data",
    "start": "828839",
    "end": "832000"
  },
  {
    "text": "center it can keep chugging and you'll",
    "start": "832000",
    "end": "835160"
  },
  {
    "text": "not we have to time it out before the",
    "start": "835160",
    "end": "838199"
  },
  {
    "text": "data center wakes up for the morning cuz",
    "start": "838199",
    "end": "840360"
  },
  {
    "text": "otherwise we're chewing resources that",
    "start": "840360",
    "end": "842160"
  },
  {
    "text": "would be better served serving our",
    "start": "842160",
    "end": "844680"
  },
  {
    "text": "customer requests which is not great if",
    "start": "844680",
    "end": "847920"
  },
  {
    "text": "we ever hit that timeout that's a real",
    "start": "847920",
    "end": "849880"
  },
  {
    "text": "problem though because it means we",
    "start": "849880",
    "end": "851079"
  },
  {
    "text": "haven't been able to compact all the",
    "start": "851079",
    "end": "852639"
  },
  {
    "text": "blocks for that",
    "start": "852639",
    "end": "854240"
  },
  {
    "text": "day if we ever hit it multiple days in a",
    "start": "854240",
    "end": "856800"
  },
  {
    "text": "row we start to get a bit of a backlog",
    "start": "856800",
    "end": "859199"
  },
  {
    "text": "and that becomes a real",
    "start": "859199",
    "end": "860839"
  },
  {
    "text": "problem thankfully we haven't hit it yet",
    "start": "860839",
    "end": "863720"
  },
  {
    "text": "we have Solutions when we do hit that",
    "start": "863720",
    "end": "865839"
  },
  {
    "text": "timeout we can increase resource quars",
    "start": "865839",
    "end": "867880"
  },
  {
    "text": "we can shout it out again but it's a",
    "start": "867880",
    "end": "871959"
  },
  {
    "text": "easy enough problem to fix when we do",
    "start": "871959",
    "end": "873440"
  },
  {
    "text": "hit it let's talk about stores stores",
    "start": "873440",
    "end": "877320"
  },
  {
    "text": "are really",
    "start": "877320",
    "end": "878519"
  },
  {
    "text": "annoying because unlike compactors they",
    "start": "878519",
    "end": "881240"
  },
  {
    "text": "don't operate in a vacuum you actually",
    "start": "881240",
    "end": "883880"
  },
  {
    "text": "have to be able to query them and that",
    "start": "883880",
    "end": "886040"
  },
  {
    "text": "means that they have to be in a place",
    "start": "886040",
    "end": "887480"
  },
  {
    "text": "that is convenient to query and the",
    "start": "887480",
    "end": "890279"
  },
  {
    "text": "Annoying fact about our Edge is that",
    "start": "890279",
    "end": "893440"
  },
  {
    "text": "most of our Edge is not convenient to",
    "start": "893440",
    "end": "895560"
  },
  {
    "text": "talk",
    "start": "895560",
    "end": "896440"
  },
  {
    "text": "to at any given time maybe a quarter of",
    "start": "896440",
    "end": "899399"
  },
  {
    "text": "our data centers are offline fully or",
    "start": "899399",
    "end": "902279"
  },
  {
    "text": "have data or packet loss on on one or",
    "start": "902279",
    "end": "906320"
  },
  {
    "text": "more of their links so there's really",
    "start": "906320",
    "end": "908199"
  },
  {
    "text": "only one place we can put these we have",
    "start": "908199",
    "end": "909839"
  },
  {
    "text": "to centralize them next to our",
    "start": "909839",
    "end": "912279"
  },
  {
    "text": "queries scaling a store is an",
    "start": "912279",
    "end": "915279"
  },
  {
    "text": "interesting problem though like",
    "start": "915279",
    "end": "917560"
  },
  {
    "text": "compactors they're really bursty",
    "start": "917560",
    "end": "920120"
  },
  {
    "text": "whenever someone issues a query but in",
    "start": "920120",
    "end": "922759"
  },
  {
    "text": "much more variable bursts depending on",
    "start": "922759",
    "end": "925440"
  },
  {
    "text": "the sort of size or or weight of that",
    "start": "925440",
    "end": "928160"
  },
  {
    "text": "query",
    "start": "928160",
    "end": "929560"
  },
  {
    "text": "this makes it really hard to",
    "start": "929560",
    "end": "932639"
  },
  {
    "text": "run automated scaling Solutions like",
    "start": "932639",
    "end": "936680"
  },
  {
    "text": "horizontal pod Auto",
    "start": "936680",
    "end": "938519"
  },
  {
    "text": "scalers",
    "start": "938519",
    "end": "940040"
  },
  {
    "text": "Because by the time your new resources",
    "start": "940040",
    "end": "942440"
  },
  {
    "text": "have come up well the query it's over",
    "start": "942440",
    "end": "945360"
  },
  {
    "text": "you can't use those new resources",
    "start": "945360",
    "end": "947560"
  },
  {
    "text": "anymore what we really wanted was",
    "start": "947560",
    "end": "950000"
  },
  {
    "text": "something a bit more stable that we",
    "start": "950000",
    "end": "952360"
  },
  {
    "text": "could use to pre-provision a bunch of",
    "start": "952360",
    "end": "954240"
  },
  {
    "text": "infrastructure so that it would be",
    "start": "954240",
    "end": "955720"
  },
  {
    "text": "around when those queries first started",
    "start": "955720",
    "end": "958199"
  },
  {
    "text": "hitting",
    "start": "958199",
    "end": "959720"
  },
  {
    "text": "what we found is that actually it's kind",
    "start": "959720",
    "end": "961959"
  },
  {
    "text": "of trivial this graph is incredibly",
    "start": "961959",
    "end": "964160"
  },
  {
    "text": "noisy right but I'm a bit blind and",
    "start": "964160",
    "end": "967680"
  },
  {
    "text": "there is a bit of a trend",
    "start": "967680",
    "end": "970560"
  },
  {
    "text": "there this is uh query times versus the",
    "start": "970560",
    "end": "975000"
  },
  {
    "text": "amount of data that a store has to",
    "start": "975000",
    "end": "977079"
  },
  {
    "text": "process taking into account like",
    "start": "977079",
    "end": "978480"
  },
  {
    "text": "indexing for blocks and things like that",
    "start": "978480",
    "end": "981160"
  },
  {
    "text": "if we measure that for our desired slos",
    "start": "981160",
    "end": "983959"
  },
  {
    "text": "we work out that we can handle about 5",
    "start": "983959",
    "end": "986319"
  },
  {
    "text": "terabytes of blocks per store to be",
    "start": "986319",
    "end": "989000"
  },
  {
    "text": "within those",
    "start": "989000",
    "end": "990199"
  },
  {
    "text": "slos and with that information we",
    "start": "990199",
    "end": "992839"
  },
  {
    "text": "created what we call a store Sinker the",
    "start": "992839",
    "end": "995399"
  },
  {
    "text": "store Sinker job is to take that 5",
    "start": "995399",
    "end": "998759"
  },
  {
    "text": "terabyte number and chunk up each of our",
    "start": "998759",
    "end": "1001759"
  },
  {
    "text": "buckets into those chunks and then",
    "start": "1001759",
    "end": "1003759"
  },
  {
    "text": "create a store for each of those",
    "start": "1003759",
    "end": "1006519"
  },
  {
    "text": "chunks within those chunks we can then",
    "start": "1006519",
    "end": "1010199"
  },
  {
    "text": "scale normally with so traditional",
    "start": "1010199",
    "end": "1013519"
  },
  {
    "text": "signals CPU memory all that stuff we do",
    "start": "1013519",
    "end": "1016319"
  },
  {
    "text": "some additional logic around",
    "start": "1016319",
    "end": "1018079"
  },
  {
    "text": "pre-provisioning more stores for the",
    "start": "1018079",
    "end": "1022279"
  },
  {
    "text": "most recent data because that's what",
    "start": "1022279",
    "end": "1024319"
  },
  {
    "text": "people query but this is kind of nice it",
    "start": "1024319",
    "end": "1028360"
  },
  {
    "text": "helps us scale out a bit more stably",
    "start": "1028360",
    "end": "1031480"
  },
  {
    "text": "than we would if we were using",
    "start": "1031480",
    "end": "1032918"
  },
  {
    "text": "horizontal pod AO scalers and things",
    "start": "1032919",
    "end": "1034760"
  },
  {
    "text": "like that finally let's talk about",
    "start": "1034760",
    "end": "1038640"
  },
  {
    "text": "queries queries are interesting do you",
    "start": "1038640",
    "end": "1042280"
  },
  {
    "text": "know what happens when Thanos issues a",
    "start": "1042280",
    "end": "1045880"
  },
  {
    "text": "query well by default it doesn't know",
    "start": "1045880",
    "end": "1049080"
  },
  {
    "text": "where all your data is so if you Chuck a",
    "start": "1049080",
    "end": "1051520"
  },
  {
    "text": "query into",
    "start": "1051520",
    "end": "1052640"
  },
  {
    "text": "Thanos it fans out to every store API it",
    "start": "1052640",
    "end": "1055720"
  },
  {
    "text": "knows of which is really bad in a",
    "start": "1055720",
    "end": "1059160"
  },
  {
    "text": "distributed world because it means that",
    "start": "1059160",
    "end": "1062640"
  },
  {
    "text": "every query you do is bottlenecked by",
    "start": "1062640",
    "end": "1065600"
  },
  {
    "text": "your slowest side car or store",
    "start": "1065600",
    "end": "1069400"
  },
  {
    "text": "API which is a problem in Cloud flow's",
    "start": "1069400",
    "end": "1071799"
  },
  {
    "text": "world because our slowest store API is",
    "start": "1071799",
    "end": "1074799"
  },
  {
    "text": "generally somewhere really badly",
    "start": "1074799",
    "end": "1076400"
  },
  {
    "text": "connected subsaharan Africa that's sort",
    "start": "1076400",
    "end": "1078720"
  },
  {
    "text": "of thing so all of our queries are slow",
    "start": "1078720",
    "end": "1082640"
  },
  {
    "text": "not great thankfully Thanos has artech",
    "start": "1082640",
    "end": "1087320"
  },
  {
    "text": "mention can limit that fan out if you",
    "start": "1087320",
    "end": "1090559"
  },
  {
    "text": "include one or more external label",
    "start": "1090559",
    "end": "1092760"
  },
  {
    "text": "filters",
    "start": "1092760",
    "end": "1094440"
  },
  {
    "text": "basically your side cars they can read",
    "start": "1094440",
    "end": "1098039"
  },
  {
    "text": "the Prometheus config that they sit next",
    "start": "1098039",
    "end": "1100080"
  },
  {
    "text": "to they can pick up the external labels",
    "start": "1100080",
    "end": "1102880"
  },
  {
    "text": "for that Prometheus and they can",
    "start": "1102880",
    "end": "1105080"
  },
  {
    "text": "broadcast that to your query so if you",
    "start": "1105080",
    "end": "1107200"
  },
  {
    "text": "have a query",
    "start": "1107200",
    "end": "1109320"
  },
  {
    "text": "that has an external label filter that",
    "start": "1109320",
    "end": "1111919"
  },
  {
    "text": "doesn't match the external labels of",
    "start": "1111919",
    "end": "1114039"
  },
  {
    "text": "your side car well great we don't have",
    "start": "1114039",
    "end": "1116440"
  },
  {
    "text": "to talk to that side car this can",
    "start": "1116440",
    "end": "1119120"
  },
  {
    "text": "dramatically improve your P99 query",
    "start": "1119120",
    "end": "1124200"
  },
  {
    "text": "times which is where our last component",
    "start": "1124200",
    "end": "1127280"
  },
  {
    "text": "comes in the label",
    "start": "1127280",
    "end": "1130880"
  },
  {
    "text": "enforcer this is the smallest component",
    "start": "1130880",
    "end": "1134640"
  },
  {
    "text": "we run but also the most effective what",
    "start": "1134640",
    "end": "1137520"
  },
  {
    "text": "it is it's a little reverse proxy that",
    "start": "1137520",
    "end": "1140760"
  },
  {
    "text": "sits between our query front end and our",
    "start": "1140760",
    "end": "1143280"
  },
  {
    "text": "query and it inspects every query that",
    "start": "1143280",
    "end": "1146360"
  },
  {
    "text": "comes through that path what it then",
    "start": "1146360",
    "end": "1149440"
  },
  {
    "text": "does is that if that query has an",
    "start": "1149440",
    "end": "1151960"
  },
  {
    "text": "external label it lets it through and if",
    "start": "1151960",
    "end": "1154400"
  },
  {
    "text": "it doesn't it rejects it this allows us",
    "start": "1154400",
    "end": "1157159"
  },
  {
    "text": "to communicate this to our Engineers",
    "start": "1157159",
    "end": "1159760"
  },
  {
    "text": "incredibly nicely so many of our",
    "start": "1159760",
    "end": "1161840"
  },
  {
    "text": "engineering teams are I think first",
    "start": "1161840",
    "end": "1164919"
  },
  {
    "text": "weaning on to metrics in general when",
    "start": "1164919",
    "end": "1167640"
  },
  {
    "text": "they first join us we don't expect",
    "start": "1167640",
    "end": "1169360"
  },
  {
    "text": "observability as a core competency so to",
    "start": "1169360",
    "end": "1171840"
  },
  {
    "text": "be able to teach people about",
    "start": "1171840",
    "end": "1174760"
  },
  {
    "text": "Thanos is pretty great for example you",
    "start": "1174760",
    "end": "1178520"
  },
  {
    "text": "can query one data center with a data",
    "start": "1178520",
    "end": "1180480"
  },
  {
    "text": "center name label that's one of our",
    "start": "1180480",
    "end": "1182039"
  },
  {
    "text": "external labels you can query multiple",
    "start": "1182039",
    "end": "1184520"
  },
  {
    "text": "with a Rex or you can query all of them",
    "start": "1184520",
    "end": "1186840"
  },
  {
    "text": "with a Rex that matches all of them but",
    "start": "1186840",
    "end": "1189600"
  },
  {
    "text": "that makes the slowc case opt in you opt",
    "start": "1189600",
    "end": "1192799"
  },
  {
    "text": "into querying all of them you opt into",
    "start": "1192799",
    "end": "1194880"
  },
  {
    "text": "that slow query which I think is kind of",
    "start": "1194880",
    "end": "1198200"
  },
  {
    "text": "neat",
    "start": "1198200",
    "end": "1199280"
  },
  {
    "text": "and that gives us our full components we",
    "start": "1199280",
    "end": "1201320"
  },
  {
    "text": "have our side cars that automatically",
    "start": "1201320",
    "end": "1203640"
  },
  {
    "text": "create their own buckets we have our",
    "start": "1203640",
    "end": "1205760"
  },
  {
    "text": "compactors that get scheduled around the",
    "start": "1205760",
    "end": "1207640"
  },
  {
    "text": "world in order to mop up that spare",
    "start": "1207640",
    "end": "1210120"
  },
  {
    "text": "capacity we have stores that scale out",
    "start": "1210120",
    "end": "1213880"
  },
  {
    "text": "automatically depending on the compute",
    "start": "1213880",
    "end": "1215720"
  },
  {
    "text": "requirements for the buckets and we have",
    "start": "1215720",
    "end": "1218320"
  },
  {
    "text": "queries that guide our Engineers towards",
    "start": "1218320",
    "end": "1221240"
  },
  {
    "text": "fast queries by",
    "start": "1221240",
    "end": "1223360"
  },
  {
    "text": "default that's about all I have those",
    "start": "1223360",
    "end": "1225840"
  },
  {
    "text": "four components together help us meet a",
    "start": "1225840",
    "end": "1228000"
  },
  {
    "text": "decently risk respectable set of slos I",
    "start": "1228000",
    "end": "1230559"
  },
  {
    "text": "think it's going to become increasingly",
    "start": "1230559",
    "end": "1232840"
  },
  {
    "text": "a problem in a world of sort of data",
    "start": "1232840",
    "end": "1235760"
  },
  {
    "text": "locality and in a world of edge",
    "start": "1235760",
    "end": "1238720"
  },
  {
    "text": "Computing that these sort of distributed",
    "start": "1238720",
    "end": "1241400"
  },
  {
    "text": "Thanos problems are going to become more",
    "start": "1241400",
    "end": "1243679"
  },
  {
    "text": "of a thing and I hope that we can",
    "start": "1243679",
    "end": "1245559"
  },
  {
    "text": "continue to work towards a proper",
    "start": "1245559",
    "end": "1248640"
  },
  {
    "text": "solution for this as I mentioned slides",
    "start": "1248640",
    "end": "1252080"
  },
  {
    "text": "will be on that link after this when I",
    "start": "1252080",
    "end": "1254159"
  },
  {
    "text": "get around to filling them up but thank",
    "start": "1254159",
    "end": "1257600"
  },
  {
    "text": "you",
    "start": "1257600",
    "end": "1260600"
  },
  {
    "text": "I think we have time for some",
    "start": "1264559",
    "end": "1267000"
  },
  {
    "text": "questions any questions to",
    "start": "1267000",
    "end": "1270919"
  },
  {
    "text": "Callin are you ever going to contribute",
    "start": "1271919",
    "end": "1274080"
  },
  {
    "text": "the label enforcer to Upstream Thanos",
    "start": "1274080",
    "end": "1276720"
  },
  {
    "text": "yes once our legal team ticks",
    "start": "1276720",
    "end": "1281240"
  },
  {
    "text": "it uh you mentioned time based",
    "start": "1283559",
    "end": "1285679"
  },
  {
    "text": "partitioning um have you also done any",
    "start": "1285679",
    "end": "1287559"
  },
  {
    "text": "of the hash based part partitioning and",
    "start": "1287559",
    "end": "1289240"
  },
  {
    "text": "have you found a difference between the",
    "start": "1289240",
    "end": "1291080"
  },
  {
    "text": "two time based partitioning works really",
    "start": "1291080",
    "end": "1294320"
  },
  {
    "text": "well for us because we can sort of work",
    "start": "1294320",
    "end": "1297200"
  },
  {
    "text": "out which time blocks are queried most",
    "start": "1297200",
    "end": "1301880"
  },
  {
    "text": "hash base becomes pretty random and hard",
    "start": "1301880",
    "end": "1304240"
  },
  {
    "text": "to deal",
    "start": "1304240",
    "end": "1306559"
  },
  {
    "text": "with maybe last",
    "start": "1306559",
    "end": "1310200"
  },
  {
    "text": "question B",
    "start": "1311000",
    "end": "1314320"
  },
  {
    "text": "once okay thank you Colleen amazing r",
    "start": "1314919",
    "end": "1320519"
  }
]