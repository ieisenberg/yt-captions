[
  {
    "text": "good afternoon everyone and thank you for joining us uh so for the next 30 minutes we're going to talk about",
    "start": "560",
    "end": "6200"
  },
  {
    "text": "kubernetes policy management uh so really excited to cover uh you know and",
    "start": "6200",
    "end": "11960"
  },
  {
    "text": "we have quite a lot of topics prepared so we're going to start with some quick introductions talk about why you need",
    "start": "11960",
    "end": "17720"
  },
  {
    "text": "policies in kubernetes what kubernetes policies are what types of policies are",
    "start": "17720",
    "end": "22840"
  },
  {
    "text": "supported then we're going to go into some details about you know specific policy implementations in including pod",
    "start": "22840",
    "end": "30800"
  },
  {
    "text": "security admissions um or uh for also",
    "start": "30800",
    "end": "36079"
  },
  {
    "text": "like talk a little bit about PSPs why they were deprecated and then go into",
    "start": "36079",
    "end": "41840"
  },
  {
    "text": "validating admission policies which is a new type in kubernetes compare that with what dynamic admission controllers can",
    "start": "41840",
    "end": "48760"
  },
  {
    "text": "do uh and also introduce cell which is the language used by validating",
    "start": "48760",
    "end": "54079"
  },
  {
    "text": "admission policies so quite a lot of topics to cover and we'll go through these and of course we'll try and save",
    "start": "54079",
    "end": "59680"
  },
  {
    "text": "some time for questions and answers so happy to have the conversation um so to",
    "start": "59680",
    "end": "64920"
  },
  {
    "text": "start off with just some quick introductions on who we are and why we care about this uh subject so I'm Jim",
    "start": "64920",
    "end": "70200"
  },
  {
    "text": "badia co-founder CEO at nirmata I'm a co-chair in the policy working group",
    "start": "70200",
    "end": "75400"
  },
  {
    "text": "within cncf also a maintainer on the cerno project which is a cncf policy",
    "start": "75400",
    "end": "81439"
  },
  {
    "text": "engine and I'm Andy I'm the CTO at Fairwinds uh I've been working in the cloud native space for about 8 to 10",
    "start": "81439",
    "end": "88040"
  },
  {
    "text": "years at this point I'm a maintainer of several open source projects that you may be familiar with Goldilocks Pluto",
    "start": "88040",
    "end": "94159"
  },
  {
    "text": "Polaris and uh also a co-chair of the policy working group as of late last",
    "start": "94159",
    "end": "100159"
  },
  {
    "text": "year all right so just to kick things off introducing what we do in the policy",
    "start": "100159",
    "end": "105600"
  },
  {
    "text": "working group and this is a community Forum everybody's welcome to join we have bi-weekly meetings so the charter",
    "start": "105600",
    "end": "111799"
  },
  {
    "text": "of the working group is to define or at least catalog architectures different policy",
    "start": "111799",
    "end": "117799"
  },
  {
    "text": "implementation types and and provide some guidance on what users should use",
    "start": "117799",
    "end": "123079"
  },
  {
    "text": "right so we've done things like the policy reporting API is one of the initiatives that came out of the policy",
    "start": "123079",
    "end": "129280"
  },
  {
    "text": "working group there's a number of different producers and consumers including cerno Falco trivy all of them",
    "start": "129280",
    "end": "136680"
  },
  {
    "text": "can report policy results in a common structured Manner and we're looking at other initiatives as we move forward",
    "start": "136680",
    "end": "144000"
  },
  {
    "text": "including like you know of course white papers things like we can do to help out",
    "start": "144000",
    "end": "149640"
  },
  {
    "text": "again educate or inform the community um so starting with what is a",
    "start": "149640",
    "end": "155959"
  },
  {
    "text": "policy right so there's a definition and one of the things we contributed from the working group there's a chapter on",
    "start": "155959",
    "end": "161599"
  },
  {
    "text": "policies in the kubernetes Dos so here very quite simply you know what we think",
    "start": "161599",
    "end": "167120"
  },
  {
    "text": "of as policies are configurations that manage other configurations or behaviors",
    "start": "167120",
    "end": "172760"
  },
  {
    "text": "right and if you think about that a policy is nothing more than just another config object a resource it could be a",
    "start": "172760",
    "end": "180319"
  },
  {
    "text": "custom resource could be a built-in resource or some type of control you're providing which is defining behaviors",
    "start": "180319",
    "end": "187440"
  },
  {
    "text": "for other things in your cluster or in what you're managing right there's a more formal n definition too but it's",
    "start": "187440",
    "end": "194280"
  },
  {
    "text": "very similar it's talking about you know making sure you're managing expected",
    "start": "194280",
    "end": "199519"
  },
  {
    "text": "behaviors and you know what we think about over here is it's not just about restricting or validating checks but you",
    "start": "199519",
    "end": "206760"
  },
  {
    "text": "can also generate mutate its full configuration life cycle management right um so but why do we need policies",
    "start": "206760",
    "end": "214200"
  },
  {
    "text": "we have config objects you can configure them you can manage them what's the value policies bring in so the one thing",
    "start": "214200",
    "end": "220959"
  },
  {
    "text": "to always think about with kubernetes in many ways kubernetes is the first",
    "start": "220959",
    "end": "226040"
  },
  {
    "text": "platform which really is built for developers operators security to all",
    "start": "226040",
    "end": "231680"
  },
  {
    "text": "collaborate right it's a set of standard apis where all of these roles can",
    "start": "231680",
    "end": "236760"
  },
  {
    "text": "interact and the idea behind policies is if if you have these shared resources",
    "start": "236760",
    "end": "241799"
  },
  {
    "text": "who's managing it so if you have a pod or a deployment there's parts of the deployment that security might care",
    "start": "241799",
    "end": "248239"
  },
  {
    "text": "about there's parts of the deployment the application developer cares about and there's other parts that the",
    "start": "248239",
    "end": "253920"
  },
  {
    "text": "operator cares about so how do you bring all of these together and have them collaborate on the same artifact or on",
    "start": "253920",
    "end": "260400"
  },
  {
    "text": "the same resource and that's where policies can add a lot of value by providing that way to collaborate across",
    "start": "260400",
    "end": "267080"
  },
  {
    "text": "those and but kubernetes you know it's not designed to be secure by default you",
    "start": "267080",
    "end": "272360"
  },
  {
    "text": "need to add some tooling some other ways to secure it policies become in an ideal",
    "start": "272360",
    "end": "279039"
  },
  {
    "text": "way for these various constraints to be applied security teams to get the compliance and results they need whereas",
    "start": "279039",
    "end": "286360"
  },
  {
    "text": "operations and development teams to be able to do their work without stepping on each other's toes right so that's the",
    "start": "286360",
    "end": "293199"
  },
  {
    "text": "main value and of course if you extend that to policy as code why not use the",
    "start": "293199",
    "end": "298240"
  },
  {
    "text": "same gitops and the other best practices we love in Cloud native apply that to",
    "start": "298240",
    "end": "303440"
  },
  {
    "text": "policies as well right now you can do full life cycle management manage your policies across clusters get you know",
    "start": "303440",
    "end": "310320"
  },
  {
    "text": "reports things like that and even manage exceptions with using the same kubernetes",
    "start": "310320",
    "end": "317080"
  },
  {
    "text": "apis so in kubes there's four policy types right and this is even as we were",
    "start": "317080",
    "end": "324440"
  },
  {
    "text": "going through this and we added this to the kubes docs took a while to classify there's four main there's several other",
    "start": "324440",
    "end": "330520"
  },
  {
    "text": "ways of configuring policies but there's built-in objects like obviously Network policy right so the name itself say",
    "start": "330520",
    "end": "338039"
  },
  {
    "text": "policy so it defines what you can do on the networking side uh so it matches",
    "start": "338039",
    "end": "343960"
  },
  {
    "text": "that description or definition we talked about uh so those are built-in objects and there's arbac and several others",
    "start": "343960",
    "end": "350199"
  },
  {
    "text": "which would qualify as policy objects then you have admission controls and these are flags or these are",
    "start": "350199",
    "end": "356479"
  },
  {
    "text": "configurations on the API server which you can enable disa sometimes there's",
    "start": "356479",
    "end": "361759"
  },
  {
    "text": "additional settings for these but things like you know if you want to have your default Ingress class you can actually",
    "start": "361759",
    "end": "368440"
  },
  {
    "text": "specify this on the API server and say Here's my default Ingress that will apply to all your cluster manage that",
    "start": "368440",
    "end": "374759"
  },
  {
    "text": "configuration for you that is not you know it's different than Dynamic admission controls which is the next",
    "start": "374759",
    "end": "380639"
  },
  {
    "text": "category where you have tools like you know kerno or Opa gatekeeper which are",
    "start": "380639",
    "end": "387039"
  },
  {
    "text": "not built into the API server but they can receive requests from the API server and apply policies right and finally now",
    "start": "387039",
    "end": "394440"
  },
  {
    "text": "we have validating admission policies which is currently beta moving to graduation uh and that is also a",
    "start": "394440",
    "end": "400840"
  },
  {
    "text": "built-in type so that allows you to now configure the API server with some",
    "start": "400840",
    "end": "405880"
  },
  {
    "text": "customizable policy checks and we'll talk about that too so next Andy is going to go over a",
    "start": "405880",
    "end": "412400"
  },
  {
    "text": "timeline of how all of this happened yeah and uh before you all start squinting and trying to read that uh",
    "start": "412400",
    "end": "419560"
  },
  {
    "text": "we're going to break it down here in a second but we uh set out to write this talk and we uh thought started talking",
    "start": "419560",
    "end": "426639"
  },
  {
    "text": "about like all the different historical pieces of policy uh throughout the timeline of kubernetes and even you know",
    "start": "426639",
    "end": "432360"
  },
  {
    "text": "us in the policy working group were like oh when did that happen and when did that happen so we decided to put",
    "start": "432360",
    "end": "437919"
  },
  {
    "text": "together this timeline to show where we started and how far we've come and maybe",
    "start": "437919",
    "end": "443639"
  },
  {
    "text": "talk a little bit about what's coming next so if we go all the way back kubernetes 1.3",
    "start": "443639",
    "end": "450360"
  },
  {
    "text": "I think this might have been before I even started working on kubernetes we had security context constraints these",
    "start": "450360",
    "end": "455919"
  },
  {
    "text": "are thing in open shift I actually didn't know what they were until about two weeks ago so we're going to skip right over",
    "start": "455919",
    "end": "462160"
  },
  {
    "text": "that and then we get into uh kubernetes 1.3 and Beyond in 2016 to 2018 and a few",
    "start": "462160",
    "end": "470400"
  },
  {
    "text": "things start happening so we get our first policy engine accepted into the cncf so this is when Opa went into the",
    "start": "470400",
    "end": "477360"
  },
  {
    "text": "sandbox uh category and then uh PSP was introduced and became kind of the",
    "start": "477360",
    "end": "483639"
  },
  {
    "text": "standard for a long time and we'll see that uh throughout the rest of this timeline and uh that gave us granular",
    "start": "483639",
    "end": "490919"
  },
  {
    "text": "control over lots of different settings in the Pod and we were able to control it via rbac and it was rather powerful",
    "start": "490919",
    "end": "498120"
  },
  {
    "text": "but it was kind of difficult to use so we step forward into the future 1.4 to",
    "start": "498120",
    "end": "503479"
  },
  {
    "text": "1.20 PSP was refined maligned hated people talked poorly",
    "start": "503479",
    "end": "511680"
  },
  {
    "text": "about it people didn't use it people didn't adopt it uh and so there was a kep introduced to uh talk about pod",
    "start": "511680",
    "end": "519599"
  },
  {
    "text": "security admission and um you know get us into the future and so that started",
    "start": "519599",
    "end": "525320"
  },
  {
    "text": "becoming the thing that people wanted to talk about and opa moved into the",
    "start": "525320",
    "end": "530440"
  },
  {
    "text": "incubating status so it started becoming much more popular and caverno entered",
    "start": "530440",
    "end": "536399"
  },
  {
    "text": "the scene uh into the cncf and um was uh released its GA",
    "start": "536399",
    "end": "543240"
  },
  {
    "text": "release uh came about and then um we got the policy report crd from the policy",
    "start": "543240",
    "end": "550320"
  },
  {
    "text": "working group in what is that 2021 it's about so um that was kind of the",
    "start": "550320",
    "end": "558560"
  },
  {
    "text": "formative time for what we see now as the current state of policy so then we",
    "start": "558560",
    "end": "563760"
  },
  {
    "text": "step into the last few years and a lot of different stuff happened across all of these different projects so PSP was",
    "start": "563760",
    "end": "569839"
  },
  {
    "text": "officially deprecated and removed from the API um and then pod security admission",
    "start": "569839",
    "end": "576320"
  },
  {
    "text": "moved into stable and then we started seeing validating admission policy so",
    "start": "576320",
    "end": "582160"
  },
  {
    "text": "validating admission policy using the cell expression language is now in beta in the current versions of 1.20 uh 1.28",
    "start": "582160",
    "end": "590200"
  },
  {
    "text": "and on and then uh caverno just applied for graduation just last year and so",
    "start": "590200",
    "end": "595800"
  },
  {
    "text": "it's becoming much more stable and opa also graduated during this time so we're starting to see all of these different",
    "start": "595800",
    "end": "600920"
  },
  {
    "text": "engines mature and the inry uh policy engines mature as",
    "start": "600920",
    "end": "607200"
  },
  {
    "text": "well now what's going to happen this year and moving forward ideally cerno will",
    "start": "607200",
    "end": "612839"
  },
  {
    "text": "graduate uh at some point we're not entirely certain when valid validating admission policy will move to stable and",
    "start": "612839",
    "end": "619760"
  },
  {
    "text": "we'll also see uh an extension to validating admission policy which will be mutating admission policy which will",
    "start": "619760",
    "end": "625880"
  },
  {
    "text": "allow us to mutate objects rather than just reject them and the policy working group is hoping",
    "start": "625880",
    "end": "632399"
  },
  {
    "text": "to finish moving the policy report API definition into a more stable State a",
    "start": "632399",
    "end": "638480"
  },
  {
    "text": "more permanent home underneath",
    "start": "638480",
    "end": "642680"
  },
  {
    "text": "sigth so next let's talk a little bit about why PSPs got deprecated and you",
    "start": "643760",
    "end": "649680"
  },
  {
    "text": "know what some of the challenges there were right and there's a great um you know white paper article blog written by",
    "start": "649680",
    "end": "656680"
  },
  {
    "text": "taba who leads six Security in kues um where you know they mention a lot of the",
    "start": "656680",
    "end": "663920"
  },
  {
    "text": "usability challenges a lot of problems and there were prior you know ccon talks on this too and the main challenge was",
    "start": "663920",
    "end": "671760"
  },
  {
    "text": "like Andy also mentioned that although everybody understood why PSPs are important it was just hard to configure",
    "start": "671760",
    "end": "678320"
  },
  {
    "text": "and use correctly especially at scale right and there were just too many variations too many ways to trip",
    "start": "678320",
    "end": "684279"
  },
  {
    "text": "yourself and misconfigure things which is sort of the opposite of why you want a poliy right you want policies to help",
    "start": "684279",
    "end": "690800"
  },
  {
    "text": "with configuration not create more problems in your cluster right and diagnosing troubleshooting was also a",
    "start": "690800",
    "end": "696760"
  },
  {
    "text": "major problem with this right so with the deprecation as this was being",
    "start": "696760",
    "end": "702880"
  },
  {
    "text": "discussed in seot s security a lot of people felt that yes we need some",
    "start": "702880",
    "end": "708519"
  },
  {
    "text": "something basic in kubernetes but it's also time to acknowledge there's other powerful policy engines there's other",
    "start": "708519",
    "end": "715519"
  },
  {
    "text": "Solutions so let them do some of the more complex things that are required",
    "start": "715519",
    "end": "721440"
  },
  {
    "text": "and you know instead of just sort of having these configuration objects let's",
    "start": "721440",
    "end": "726639"
  },
  {
    "text": "think of this almost like a compliance standard right so if you look at PCI DSS or Hippa or you know any compliance",
    "start": "726639",
    "end": "733800"
  },
  {
    "text": "standard it's a document it's well defined you can go and see exactly what you know you need to do so one thing",
    "start": "733800",
    "end": "740800"
  },
  {
    "text": "which is great which emerged out of this all these discussions is POD security standards this is part of the kubernetes",
    "start": "740800",
    "end": "747720"
  },
  {
    "text": "docs itself it's maintained by the kubernetes maintainers for every release of kubernetes and it defines about 17",
    "start": "747720",
    "end": "756519"
  },
  {
    "text": "controls for pod security and and all of this everything we're talking about here",
    "start": "756519",
    "end": "761880"
  },
  {
    "text": "is for the security context within pods right so within pods as well as containers inside of PODS you can",
    "start": "761880",
    "end": "768160"
  },
  {
    "text": "configure security contexts which various settings so these controls go into a lot of detail about what should",
    "start": "768160",
    "end": "774440"
  },
  {
    "text": "be you know what's safe to configure how you should configure them what the allowed values are and they evolve with",
    "start": "774440",
    "end": "781160"
  },
  {
    "text": "new versions of kubernetes you will see changes in this right so it's not static it's not a one-time thing as kubernetes",
    "start": "781160",
    "end": "788639"
  },
  {
    "text": "evolves these standards also evolve so once you have these standards you can have multiple implementations and the",
    "start": "788639",
    "end": "795279"
  },
  {
    "text": "entry implementation of this is POD security admission and pod security admission the idea was let's provide",
    "start": "795279",
    "end": "801839"
  },
  {
    "text": "again something basic which you know can be easily enabled which may not cover",
    "start": "801839",
    "end": "807399"
  },
  {
    "text": "all the use cases but at least lets you to get to a secure default and the idea",
    "start": "807399",
    "end": "812600"
  },
  {
    "text": "here was to you know have a three level privilege which of course allows everything but then you have a baseline",
    "start": "812600",
    "end": "819120"
  },
  {
    "text": "which any known vulnerability any known issue or misconfiguration is covered by",
    "start": "819120",
    "end": "824320"
  },
  {
    "text": "Baseline and then restricted which is the you know recommended way of running",
    "start": "824320",
    "end": "829959"
  },
  {
    "text": "highly secure clusters um to go into the restricted level of policy and and this",
    "start": "829959",
    "end": "836000"
  },
  {
    "text": "allows you to set it very easily just using label at a namespace level so that",
    "start": "836000",
    "end": "841759"
  },
  {
    "text": "you know again is super easy to configure but has some limitations and in the real world what we've seen is it",
    "start": "841759",
    "end": "849000"
  },
  {
    "text": "often doesn't get used because it's only at the namespace level and we'll talk a little bit more about this",
    "start": "849000",
    "end": "855360"
  },
  {
    "text": "later next Andy's going to go into validating admission policies and",
    "start": "855360",
    "end": "861720"
  },
  {
    "text": "cell so we removed pod security policy and",
    "start": "861720",
    "end": "867000"
  },
  {
    "text": "then we created pod security admission and like Jim was saying it's not highly config",
    "start": "867000",
    "end": "873959"
  },
  {
    "text": "pod security admission is not configurable it's not even highly configurable it's just not configurable and so we were relying on Dynamic",
    "start": "873959",
    "end": "882560"
  },
  {
    "text": "admission controllers to do all of our policy and then some folks brought up",
    "start": "882560",
    "end": "887800"
  },
  {
    "text": "the need to uh write policy at admission time and",
    "start": "887800",
    "end": "893959"
  },
  {
    "text": "some people wanted to do it in tree so what we got out of that was this uh",
    "start": "893959",
    "end": "900279"
  },
  {
    "text": "validating admission policy so validating admission policy uses cell we've mentioned it a couple times that's",
    "start": "900279",
    "end": "905720"
  },
  {
    "text": "a common expression language it's a relatively straightforward language for",
    "start": "905720",
    "end": "911040"
  },
  {
    "text": "defining policy uh it requires bindings to bind the policy to a specific object",
    "start": "911040",
    "end": "917959"
  },
  {
    "text": "or set of objects you can declare as a separate crd uh parameters that are used",
    "start": "917959",
    "end": "924240"
  },
  {
    "text": "by that policy so it is configurable per namespace or per binding to allow you to",
    "start": "924240",
    "end": "930079"
  },
  {
    "text": "modify how the policy behaves and as we mentioned before it's currently in beta keep forgetting I have a clicker",
    "start": "930079",
    "end": "937360"
  },
  {
    "text": "all right so um if we look at cell how these policies are defined it is fairly",
    "start": "937360",
    "end": "943079"
  },
  {
    "text": "developer friendly it's sort of small we'll get into that in a second um it's",
    "start": "943079",
    "end": "948959"
  },
  {
    "text": "very extensible so there's quite a few different macros that are in the current implementation of validating emmission",
    "start": "948959",
    "end": "954480"
  },
  {
    "text": "policy that allow you to do fancy things like reg X matching um",
    "start": "954480",
    "end": "959680"
  },
  {
    "text": "optional types you can compare different types of ins together uh and one of the interesting ones that I learned about",
    "start": "959680",
    "end": "965279"
  },
  {
    "text": "recently is the authorizer so you can actually check groups and users of the",
    "start": "965279",
    "end": "970800"
  },
  {
    "text": "the whoever's performing that admission action um but really the issue with cell",
    "start": "970800",
    "end": "977399"
  },
  {
    "text": "that we see is that it gets rather verbose this right here is just one",
    "start": "977399",
    "end": "982639"
  },
  {
    "text": "check to say don't let the container run its route and the reason that it gets",
    "start": "982639",
    "end": "987800"
  },
  {
    "text": "over bothast is because I have to check every single container I have to check and make sure that um the run as rout",
    "start": "987800",
    "end": "996160"
  },
  {
    "text": "the um run as root section exists and then I also have to check the init containers separately so we end up with",
    "start": "996160",
    "end": "1002759"
  },
  {
    "text": "this very veros policy for what is a relatively simple and straightforward check in kubernetes so we could split",
    "start": "1002759",
    "end": "1009800"
  },
  {
    "text": "this into multiple uh policies but then we're running multiple checks against every object every time we do that and",
    "start": "1009800",
    "end": "1016160"
  },
  {
    "text": "also here we don't get great uh error messages is cuz right now it's like well one container in this pod somewhere is",
    "start": "1016160",
    "end": "1022680"
  },
  {
    "text": "running his route but we don't know which one because we just had to run 12 checks as part of this single check so",
    "start": "1022680",
    "end": "1030038"
  },
  {
    "text": "this is Cell It's relatively straightforward to use for simple things it gets you a lot further than pod",
    "start": "1030039",
    "end": "1035558"
  },
  {
    "text": "security admission um but I think there's more Improvement to be had",
    "start": "1035559",
    "end": "1041400"
  },
  {
    "text": "here um and then the next thing coming up on top of that is mutating emission policy so there's a cap out there for",
    "start": "1041400",
    "end": "1047480"
  },
  {
    "text": "this this is just kind of a a side note here uh currently in it's not even in",
    "start": "1047480",
    "end": "1052640"
  },
  {
    "text": "Alpha yet right yeah so it's uh coming hopefully in Alpha in I think 1.31",
    "start": "1052640",
    "end": "1058120"
  },
  {
    "text": "possibly 1.32 so just keep an eye out for that so we put together this table to",
    "start": "1058120",
    "end": "1065760"
  },
  {
    "text": "compare all of the different policy options and talk about you know what they're good at what they're not good at we've talked about this a little bit",
    "start": "1065760",
    "end": "1071880"
  },
  {
    "text": "already but it's nice to see it all in one big table um so we've got you know the First Column there with pod security",
    "start": "1071880",
    "end": "1078400"
  },
  {
    "text": "admission got validating admission policy which gets you a little bit further um it gives you more granular",
    "start": "1078400",
    "end": "1084080"
  },
  {
    "text": "control it's still built in just like PSA is um and then you know we've got a",
    "start": "1084080",
    "end": "1089840"
  },
  {
    "text": "weird little symbol there for exception management to denote that since validating admission policy is opt in",
    "start": "1089840",
    "end": "1097000"
  },
  {
    "text": "not opt out exception management is a little bit odd so you know if we say",
    "start": "1097000",
    "end": "1102919"
  },
  {
    "text": "this applies to every object in the cluster there's no way to opt a single workload out of it but you could write",
    "start": "1102919",
    "end": "1109400"
  },
  {
    "text": "in a Cell expression to you know exempt various workloads or pods or containers",
    "start": "1109400",
    "end": "1115559"
  },
  {
    "text": "from your policy uh but then you're modifying your policy every time you need an exemption which we've found",
    "start": "1115559",
    "end": "1121080"
  },
  {
    "text": "across the various people that we talk to is not the ideal way you want to sort of have one solid policy that works all",
    "start": "1121080",
    "end": "1126520"
  },
  {
    "text": "the time and then make your exceptions somewhere else um and then um none of",
    "start": "1126520",
    "end": "1132559"
  },
  {
    "text": "the built-in controllers support the policy report API which the working group has published um and and neither",
    "start": "1132559",
    "end": "1139440"
  },
  {
    "text": "of them work in in the CLI U and so really what we end up at is dynamic",
    "start": "1139440",
    "end": "1145720"
  },
  {
    "text": "admission controllers still as kind of the deao way to do all these things if you want to do them all I think Jim",
    "start": "1145720",
    "end": "1151960"
  },
  {
    "text": "wants to talk a little bit more about some of the the other bits yeah so one question that comes up often and you",
    "start": "1151960",
    "end": "1158000"
  },
  {
    "text": "know like Andy was describing is so you can do checks and sell but validating",
    "start": "1158000",
    "end": "1164120"
  },
  {
    "text": "admission policies do have some limitations to what they can check right so what exactly can you do and can you",
    "start": "1164120",
    "end": "1171120"
  },
  {
    "text": "not do and when do you need Dynamic admission controllers so you know the the usual answer is well for more",
    "start": "1171120",
    "end": "1177159"
  },
  {
    "text": "complex policies use um something like Opa gatekeeper or cerno or other tools",
    "start": "1177159",
    "end": "1183919"
  },
  {
    "text": "um but if you kind of dig in a little bit into more detail really the way to think about it is any",
    "start": "1183919",
    "end": "1190440"
  },
  {
    "text": "policy that operates on a single object which is the thing that's being changed",
    "start": "1190440",
    "end": "1197039"
  },
  {
    "text": "at admission controls you write a cell expression to do that there's also builtin you know like Andre was saying",
    "start": "1197039",
    "end": "1203919"
  },
  {
    "text": "with the authorizer if you want to do um like a self check review for you know Access Control you can do things like",
    "start": "1203919",
    "end": "1211000"
  },
  {
    "text": "that because the kubernetes authors have put in extensions into cell to allow that right but you can't look up some",
    "start": "1211000",
    "end": "1217840"
  },
  {
    "text": "other API object as part of your policy classic example if you want to limit",
    "start": "1217840",
    "end": "1223440"
  },
  {
    "text": "every name space to a single load balancer you know Opa or you know with Rego or kerno can do that fairly easily",
    "start": "1223440",
    "end": "1231039"
  },
  {
    "text": "with something like sell and validating admission policies you can't do that lookup so that's one thing to think",
    "start": "1231039",
    "end": "1236760"
  },
  {
    "text": "about anything that you know expands beyond the scope of that single admission control it's not possible to",
    "start": "1236760",
    "end": "1243600"
  },
  {
    "text": "do in the you know with validating admission policy other things like if you want to do image verification right",
    "start": "1243600",
    "end": "1250480"
  },
  {
    "text": "you want to check signatures uh you want to do that you can't you know now call an external registry to fetch the",
    "start": "1250480",
    "end": "1257960"
  },
  {
    "text": "signature artifact and to compare that you it's not something validating",
    "start": "1257960",
    "end": "1263240"
  },
  {
    "text": "admission policy will support it's not something you can want to do in the API server because of the latency and other",
    "start": "1263240",
    "end": "1269679"
  },
  {
    "text": "things it introduces right um also like of course with policy going back to the",
    "start": "1269679",
    "end": "1274919"
  },
  {
    "text": "definition we started with if policies are configurations to manage other",
    "start": "1274919",
    "end": "1280520"
  },
  {
    "text": "configurations the keyword they're being managed you want to think about the full life cycle of configurations right so",
    "start": "1280520",
    "end": "1287080"
  },
  {
    "text": "you want to be able to mutate which will you know again simple mutations will be allowed in the API server and but you",
    "start": "1287080",
    "end": "1294919"
  },
  {
    "text": "want to do even complex mutations on existing resources right so let's say some API gets deprecated you want to",
    "start": "1294919",
    "end": "1301559"
  },
  {
    "text": "write a mutate policy and you want to update it to a new group a new type why not write a policy for that it's a great",
    "start": "1301559",
    "end": "1308000"
  },
  {
    "text": "way of you know handling that um things also like you might want to generate resources when a new namespace is",
    "start": "1308000",
    "end": "1314360"
  },
  {
    "text": "created generate secure defaults generate fine grain roles and role binding generate Network policies so all",
    "start": "1314360",
    "end": "1320919"
  },
  {
    "text": "of those things when you think about managing configuration are within the scope of policy management which you",
    "start": "1320919",
    "end": "1327720"
  },
  {
    "text": "know will not of course be handled within validating admission policy or the upcoming mutating admission policy",
    "start": "1327720",
    "end": "1334720"
  },
  {
    "text": "you'll need external tools for that right so that's those are some of the trade-offs to think about as you're",
    "start": "1334720",
    "end": "1340480"
  },
  {
    "text": "comparing these tools so ultimately you know one of the things to think about is",
    "start": "1340480",
    "end": "1346679"
  },
  {
    "text": "so you can use validating admission policies and you should whenever possible but you'll still need Dynamic",
    "start": "1346679",
    "end": "1353039"
  },
  {
    "text": "admission controllers so what is the best you know way to manage these and the good news here is both kerno as well",
    "start": "1353039",
    "end": "1361200"
  },
  {
    "text": "as Opa gatekeeper both cncf projects they're fully embracing and supporting",
    "start": "1361200",
    "end": "1366320"
  },
  {
    "text": "validating admission policies so with the latest releases of these you know",
    "start": "1366320",
    "end": "1371360"
  },
  {
    "text": "these policy engines they will generate and manage the life cycle of validating admission policies for you so you don't",
    "start": "1371360",
    "end": "1378679"
  },
  {
    "text": "need to necessarily think about which one to choose and when to do what if",
    "start": "1378679",
    "end": "1383840"
  },
  {
    "text": "you're using you know gatekeeper and you use their way of you know declaring",
    "start": "1383840",
    "end": "1389039"
  },
  {
    "text": "policies wherever possible they will execute that policy in the API server",
    "start": "1389039",
    "end": "1394240"
  },
  {
    "text": "same thing with kerno if you write kerno with cell it will automatically generate",
    "start": "1394240",
    "end": "1399600"
  },
  {
    "text": "and manage the life cycle of validating admission policies as well as bindings",
    "start": "1399600",
    "end": "1404799"
  },
  {
    "text": "automatically for you so that these policies can execute in the API server",
    "start": "1404799",
    "end": "1410440"
  },
  {
    "text": "rather than receiving the webook which you know is the normal way of processing policies in cerno right so gives a lot",
    "start": "1410440",
    "end": "1418200"
  },
  {
    "text": "of power in terms of how you can kind of balance between those",
    "start": "1418200",
    "end": "1423880"
  },
  {
    "text": "two yeah so just you know on that and there's a lot of discussion on so what",
    "start": "1424840",
    "end": "1430799"
  },
  {
    "text": "are the challenges uh or why run something in the API server if I'm still going to use you know a dynamic",
    "start": "1430799",
    "end": "1437760"
  },
  {
    "text": "admission control controller right so why not just put everything there the problem with Dynamic admission",
    "start": "1437760",
    "end": "1443720"
  },
  {
    "text": "controllers is so few things like first off of Once Dynamic admission controls",
    "start": "1443720",
    "end": "1449159"
  },
  {
    "text": "uh came about it's like you know they say if you have a hammer in your hand everything looks like a nail every",
    "start": "1449159",
    "end": "1455159"
  },
  {
    "text": "problem in kubernetes was solved by another Dynamic admission controller obviously not a good scenario where you",
    "start": "1455159",
    "end": "1461320"
  },
  {
    "text": "have if you have a half a dozen Dynamic admission controllers running in your cluster all trying to mutate or validate",
    "start": "1461320",
    "end": "1467480"
  },
  {
    "text": "things you are going to run into issues so don't do that right just pick one or two try to keep it as minimum as",
    "start": "1467480",
    "end": "1474039"
  },
  {
    "text": "possible but as you're running Dynamic and Mission controllers these are highly",
    "start": "1474039",
    "end": "1479480"
  },
  {
    "text": "Mission critical workloads these are things which have to be managed carefully if you just take the default",
    "start": "1479480",
    "end": "1485200"
  },
  {
    "text": "Helm chart from any of these projects and slap it into your cluster and expect it to work in production that's not",
    "start": "1485200",
    "end": "1491480"
  },
  {
    "text": "going to happen right you need to tune this you need to understand what is happening in these controllers they",
    "start": "1491480",
    "end": "1497960"
  },
  {
    "text": "receive like you know in the very early days of even kerno naively it was receiving",
    "start": "1497960",
    "end": "1505000"
  },
  {
    "text": "every request from the API server and of course you know keeping up with that it will you know slow down your API",
    "start": "1505000",
    "end": "1512080"
  },
  {
    "text": "requests it will impact other workloads so there's a lot of tuning that can be",
    "start": "1512080",
    "end": "1517159"
  },
  {
    "text": "done with these projects and the way to think about it is it has to be a highly available highly secure low latency type",
    "start": "1517159",
    "end": "1524279"
  },
  {
    "text": "of workload and you want to minimize what goes to these Dynamics DC admission controllers uh and do as much as",
    "start": "1524279",
    "end": "1531679"
  },
  {
    "text": "possible in the API server itself right so and that's what both of these projects now are moving towards is very",
    "start": "1531679",
    "end": "1538919"
  },
  {
    "text": "fine grain configuration of the webook configuration objects which is where you",
    "start": "1538919",
    "end": "1544679"
  },
  {
    "text": "can Define which requests go to the ad you know the dynamic admission controller like the cerno workload or",
    "start": "1544679",
    "end": "1552000"
  },
  {
    "text": "the gatekeeper workload and which request should be handled directly in the API server and you can tune that in",
    "start": "1552000",
    "end": "1558480"
  },
  {
    "text": "many ways there's also defaults of excluding certain Nam spaces one common problem like with Coupe system or your",
    "start": "1558480",
    "end": "1565080"
  },
  {
    "text": "cni Nam space if you have let's let's say for example kerno now policing your",
    "start": "1565080",
    "end": "1571720"
  },
  {
    "text": "you know Cube system name space or your cni name space and if you're trying to do a cni upgrade that might get blocked",
    "start": "1571720",
    "end": "1578520"
  },
  {
    "text": "now that will of course impact your cluster So to avoid things like that you want to make sure youve configured it",
    "start": "1578520",
    "end": "1584840"
  },
  {
    "text": "correctly based on your set of add-ons based on how your managing kerno and you",
    "start": "1584840",
    "end": "1590480"
  },
  {
    "text": "continue to monitor that right so there's a lot of metrics even traceability in these projects which",
    "start": "1590480",
    "end": "1596960"
  },
  {
    "text": "show you exactly what requests are being handled how much latency it takes for each so keeping these within",
    "start": "1596960",
    "end": "1603279"
  },
  {
    "text": "milliseconds anything that goes over 10 milliseconds is a problem veb books can also they have this failure Mode called",
    "start": "1603279",
    "end": "1609960"
  },
  {
    "text": "fail open and fail closed and basically what that means is how do you handle a",
    "start": "1609960",
    "end": "1615440"
  },
  {
    "text": "failure fail open means well even if there's a failure something unknown happens continue with the operation but",
    "start": "1615440",
    "end": "1622520"
  },
  {
    "text": "the problem is you have to wait for 10 seconds for that failure to happen so let's say all your you know admission",
    "start": "1622520",
    "end": "1628880"
  },
  {
    "text": "controller pods are down and you have to wait 10 seconds for each API request",
    "start": "1628880",
    "end": "1634000"
  },
  {
    "text": "which should go there of course it's going to slow down other things right so these are things to be aware of and just",
    "start": "1634000",
    "end": "1640200"
  },
  {
    "text": "use best practices much like you would with the database or with other Mission critical workloads you're going to apply",
    "start": "1640200",
    "end": "1646480"
  },
  {
    "text": "best practices for monitoring manag in that workload apply the same for your Dynamic admission controllers and try",
    "start": "1646480",
    "end": "1653200"
  },
  {
    "text": "and keep them to a minimum in the sense again if you have too many of these it",
    "start": "1653200",
    "end": "1658320"
  },
  {
    "text": "starts creating problems in your",
    "start": "1658320",
    "end": "1661840"
  },
  {
    "text": "clusters yeah so just you know in terms of guidance and some of this we covered",
    "start": "1664360",
    "end": "1669760"
  },
  {
    "text": "already so wherever possible use what's built in right so start with that as",
    "start": "1669760",
    "end": "1675279"
  },
  {
    "text": "validating admission policies are going to ja if you haven't kind of started you",
    "start": "1675279",
    "end": "1680320"
  },
  {
    "text": "know experimenting with them start using them try out what can be done uh you can",
    "start": "1680320",
    "end": "1686159"
  },
  {
    "text": "like in with in the CNO project there's also a library of policies for everything for pod security uh you now",
    "start": "1686159",
    "end": "1692640"
  },
  {
    "text": "there's a cell version of those as well so they can be executed directly in the API server so take a look at that or",
    "start": "1692640",
    "end": "1700120"
  },
  {
    "text": "just take a look at other examples for what needs to be done and and then for you know as you kind of pick and choose",
    "start": "1700120",
    "end": "1706799"
  },
  {
    "text": "different policy engines figure out what applies best to your workloads to your use case but try and prefer tooling",
    "start": "1706799",
    "end": "1714519"
  },
  {
    "text": "which automatically uses and leverages these tools right so again there are",
    "start": "1714519",
    "end": "1719760"
  },
  {
    "text": "other tools which may not know how to deal with a validating admission policy so then you're missing out on certain",
    "start": "1719760",
    "end": "1726200"
  },
  {
    "text": "features coming in kubernetes because all of this has to be now offloaded into some other check or some other",
    "start": "1726200",
    "end": "1732880"
  },
  {
    "text": "configuration tool right and and for uh you know thinking about like other uh",
    "start": "1732880",
    "end": "1738640"
  },
  {
    "text": "stuff like applying things in pipelines so as much as you can if you're following gitops and if you're not you",
    "start": "1738640",
    "end": "1744519"
  },
  {
    "text": "should be looking at seeing how you can leverage kops if you can apply these checks directly in your cic CD pipeline",
    "start": "1744519",
    "end": "1752600"
  },
  {
    "text": "but then apply the same policy as well at admission controls and periodically",
    "start": "1752600",
    "end": "1757919"
  },
  {
    "text": "as background checks now you have defense in depth at every layer right so",
    "start": "1757919",
    "end": "1763080"
  },
  {
    "text": "but at the earlier you can apply this the better so definitely executing some of the is um you know in your pipeline",
    "start": "1763080",
    "end": "1770080"
  },
  {
    "text": "should be something you look at as well all right now it's time for the",
    "start": "1770080",
    "end": "1777519"
  },
  {
    "text": "audience participation part of the talk um we always like to do this uh when we",
    "start": "1777519",
    "end": "1783919"
  },
  {
    "text": "talk with various folks and this is the biggest audience we get because people not this many people show up to the policy working group meetings so I'd",
    "start": "1783919",
    "end": "1791399"
  },
  {
    "text": "love to ask a couple questions of the audience how many of you in the audience by showing your hand uh are using pod",
    "start": "1791399",
    "end": "1798600"
  },
  {
    "text": "security admission in your workloads I've got one two three four",
    "start": "1798600",
    "end": "1804519"
  },
  {
    "text": "five people it's like 3% of the room all right how many people are using some",
    "start": "1804519",
    "end": "1810760"
  },
  {
    "text": "sort of dynamic admission controller for their policy a lot more people",
    "start": "1810760",
    "end": "1819519"
  },
  {
    "text": "sorry sure why not we still love python there's nothing wrong with it um and how",
    "start": "1819519",
    "end": "1826960"
  },
  {
    "text": "many people are you using validating admission policies even though they're not GA yet got one all",
    "start": "1826960",
    "end": "1835320"
  },
  {
    "text": "right and how many of you are planning to use validating admission policies once they hit",
    "start": "1835320",
    "end": "1841080"
  },
  {
    "text": "GA okay few more few more all right great um and then uh we'd love to",
    "start": "1841080",
    "end": "1848320"
  },
  {
    "text": "hear your questions so if you have any questions please raise your hand and also we'd love to see you know as a policy working group what you would like",
    "start": "1848320",
    "end": "1855519"
  },
  {
    "text": "to hear from us next what you know what can we do that's valuable for the community and you know what guidance can",
    "start": "1855519",
    "end": "1863080"
  },
  {
    "text": "we provide or what content can we put out or you know is the policy report API useful we love all that feedback we are",
    "start": "1863080",
    "end": "1870039"
  },
  {
    "text": "going to be working on putting together a survey for the entire Community uh so keep an eye out for that and please tell",
    "start": "1870039",
    "end": "1875320"
  },
  {
    "text": "us all of your policy wants and woes does anybody have any",
    "start": "1875320",
    "end": "1882840"
  },
  {
    "text": "questions think there's a microphone coming to you ah thank you",
    "start": "1883399",
    "end": "1889919"
  },
  {
    "text": "hello oh this worked immediately nice um so uh a question and a request so a a",
    "start": "1891960",
    "end": "1899919"
  },
  {
    "text": "question of um we obviously like using a bunch of policy stuff of the three that",
    "start": "1899919",
    "end": "1906279"
  },
  {
    "text": "you just said we don't use the alpha one but we use the other two um and we'll",
    "start": "1906279",
    "end": "1912679"
  },
  {
    "text": "like apply things in the cicd pipeline but we also want to apply even earlier like shift left we want to get it down",
    "start": "1912679",
    "end": "1918919"
  },
  {
    "text": "to being like our developers are writing Java code they get compile time errors they write the yl they get errors in",
    "start": "1918919",
    "end": "1925519"
  },
  {
    "text": "their IDE that say this is going to break the policy before they even commit",
    "start": "1925519",
    "end": "1931360"
  },
  {
    "text": "um do you know if there's like further development within the policy tools for developing plugins for like vs code or",
    "start": "1931360",
    "end": "1936639"
  },
  {
    "text": "intellig or any other of the IDS that are popularly used uh for hooking that",
    "start": "1936639",
    "end": "1941760"
  },
  {
    "text": "in to make sure the policies can work there's one project that was attempting",
    "start": "1941760",
    "end": "1947559"
  },
  {
    "text": "that and I don't recall the name I'll have to look it up but they were using a",
    "start": "1947559",
    "end": "1953200"
  },
  {
    "text": "CLI both from cerno and Gator which is the gatekeeper CLI to do almost exactly",
    "start": "1953200",
    "end": "1959360"
  },
  {
    "text": "that uh to provide validations and those you know again VSS code plugins of course uh can be developed so both as",
    "start": "1959360",
    "end": "1968000"
  },
  {
    "text": "long as you have a CLI you should be able to do those type of validation checks and apply them as well cool yeah",
    "start": "1968000",
    "end": "1974720"
  },
  {
    "text": "but I'll I'll look up the thing and maybe try and post it at least in the you know policy working group slack",
    "start": "1974720",
    "end": "1981240"
  },
  {
    "text": "sweet uh and then my thing for the future is like we use backstage and we",
    "start": "1981240",
    "end": "1986480"
  },
  {
    "text": "uh see a lot of other people using backstage as well and getting those policy reports and things into backstage and visible for developers as well to",
    "start": "1986480",
    "end": "1993120"
  },
  {
    "text": "see like hey maybe we're allowing things but you have a bunch of stuff that's kind of a bit of a red flag that you",
    "start": "1993120",
    "end": "1999720"
  },
  {
    "text": "should probably fix soon and getting that reports easily available so similarly to VSS plugins is like",
    "start": "1999720",
    "end": "2005639"
  },
  {
    "text": "backstage plugins and the and the tooling for visib um would be amazing uh as just a general",
    "start": "2005639",
    "end": "2011960"
  },
  {
    "text": "request to the room we will also be probably doing development work but if anyone else is interested in that that would be really appreciated yeah I think",
    "start": "2011960",
    "end": "2018799"
  },
  {
    "text": "that would be a great addition and if anybody wants to come work on Backstage plugin as part of the policy working",
    "start": "2018799",
    "end": "2024080"
  },
  {
    "text": "group I'm sure we would be happy to talk about that I think we had a question over",
    "start": "2024080",
    "end": "2032279"
  },
  {
    "text": "here thank you both for the talk um we've been using Dynamic controllers now for",
    "start": "2036720",
    "end": "2042639"
  },
  {
    "text": "probably three years and we've racked up perhaps 100 200 different policies mutating validating and generating and",
    "start": "2042639",
    "end": "2050599"
  },
  {
    "text": "uh now with VAP I've not thought about it much but have you got a view as to whether we should start thinking about",
    "start": "2050599",
    "end": "2056440"
  },
  {
    "text": "refactoring some of these think about cal um how do you see that uh tension",
    "start": "2056440",
    "end": "2061919"
  },
  {
    "text": "between the two in a sense for someone who's already been doing this for a long time and has a body of policies already",
    "start": "2061919",
    "end": "2067480"
  },
  {
    "text": "in in production yeah I think Jim probably has a great so if you're not",
    "start": "2067480",
    "end": "2072960"
  },
  {
    "text": "having any issues or problems with what you have there's no you know necessary reason to change right so but at the",
    "start": "2072960",
    "end": "2080720"
  },
  {
    "text": "same time if there are these any of these simpler checks which can be moved to the API server think of it as",
    "start": "2080720",
    "end": "2087079"
  },
  {
    "text": "offloading your Dynamic admission controllers executing these you know",
    "start": "2087079",
    "end": "2092280"
  },
  {
    "text": "further down into the system so you're just embedding it at the API server level so it really comes back to how",
    "start": "2092280",
    "end": "2098720"
  },
  {
    "text": "expensive are your policies are you seeing issues in the workload which you want to offload and if you don't have",
    "start": "2098720",
    "end": "2105359"
  },
  {
    "text": "any complaints or any challenges with that uh it's fine to stay as",
    "start": "2105359",
    "end": "2111560"
  },
  {
    "text": "is no no all right we're being told we are out of time I think they're going to",
    "start": "2112000",
    "end": "2118599"
  },
  {
    "text": "kick us out so so we do have a session tomorrow uh there is a come like a meet",
    "start": "2118599",
    "end": "2125320"
  },
  {
    "text": "and greet at 11: tomorrow um so again please stop by if you have",
    "start": "2125320",
    "end": "2130920"
  },
  {
    "text": "any other questions if you want to know more about what we do in the policy working group or even join one of our",
    "start": "2130920",
    "end": "2136680"
  },
  {
    "text": "future meetings hope to see everybody there and thank you thanks",
    "start": "2136680",
    "end": "2142560"
  },
  {
    "text": "everybody",
    "start": "2143440",
    "end": "2146440"
  }
]