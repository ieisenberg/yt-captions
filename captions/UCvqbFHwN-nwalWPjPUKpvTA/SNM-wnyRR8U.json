[
  {
    "text": "all right good morning everyone uh buenos dias um i i don't know about you but adam and i",
    "start": "240",
    "end": "6879"
  },
  {
    "text": "talk about envoy and technologies built on top of envoy to people all the time and for the past two years",
    "start": "6879",
    "end": "13920"
  },
  {
    "text": "most of that talking has been to you know two-dimensional people on the other side of the zoom uh meeting and so to",
    "start": "13920",
    "end": "20400"
  },
  {
    "text": "see this many people here in three-dimensional form is is pretty exciting for us so so we're really glad",
    "start": "20400",
    "end": "26400"
  },
  {
    "text": "you're here we hope you're going to get some really useful information perhaps a spark of inspiration",
    "start": "26400",
    "end": "32800"
  },
  {
    "text": "out of this workshop we are going to be talking about envoy proxy and specifically we're going to be",
    "start": "32800",
    "end": "39040"
  },
  {
    "text": "talking about it in the context of a hands-on workshop that's going to give you the opportunity",
    "start": "39040",
    "end": "44480"
  },
  {
    "text": "to uh to get your hands dirty just a bit to get a taste of what using raw envoy",
    "start": "44480",
    "end": "50239"
  },
  {
    "text": "proxy is uh is like so if you're interested in following along",
    "start": "50239",
    "end": "55600"
  },
  {
    "text": "with the hands-on exercise you know get your laptop out if you have uh if you have chrome installed on your",
    "start": "55600",
    "end": "61840"
  },
  {
    "text": "laptop we've had we've had great results from chrome with this with this particular workshop uh occasionally",
    "start": "61840",
    "end": "67920"
  },
  {
    "text": "there can be issues with with other browsers so yeah so absolutely get that fired up and we'll give you we'll give",
    "start": "67920",
    "end": "74240"
  },
  {
    "text": "you some instructions for uh for for getting connected to that in just uh in",
    "start": "74240",
    "end": "79280"
  },
  {
    "text": "just a bit uh before we start into the actual uh hands-on workshop part what we",
    "start": "79280",
    "end": "85680"
  },
  {
    "text": "want to do is uh is just lay a little bit of groundwork for uh for for who we",
    "start": "85680",
    "end": "91360"
  },
  {
    "text": "are and what is envoy so so my name is jim barton i am a field engineer with",
    "start": "91360",
    "end": "96479"
  },
  {
    "text": "solo.io i've been here for a couple of years now adam uh adam sayah i'm a field engineer working with jim and the team a",
    "start": "96479",
    "end": "103119"
  },
  {
    "text": "couple of years too can you take any questions here yep so um if you if you have questions over the",
    "start": "103119",
    "end": "109600"
  },
  {
    "text": "course of the uh of this session what we'd encourage you to do given the size of the audience",
    "start": "109600",
    "end": "115439"
  },
  {
    "text": "and the fact that a large percentage of it is remote what we'd like to do is encourage you to get onto the the",
    "start": "115439",
    "end": "121600"
  },
  {
    "text": "session chat you can do that by following this bitly link up here bit.ly",
    "start": "121600",
    "end": "126880"
  },
  {
    "text": "slash envoy dash chat and we have one of our solo colleagues here somewhere alex",
    "start": "126880",
    "end": "132560"
  },
  {
    "text": "over here stage right heading in the corner yep in the corner we keep him back there in the corner um and uh he",
    "start": "132560",
    "end": "138879"
  },
  {
    "text": "will be he will be happy to answer your questions just go to the q a tab and i think that can work as kind of a",
    "start": "138879",
    "end": "144239"
  },
  {
    "text": "quasi-chat mechanism um if you have issues we we hope that you won't but but just in case alex will be there to",
    "start": "144239",
    "end": "150319"
  },
  {
    "text": "answer your questions we also there's a lot of content in the next 90 minutes and so uh we hope to have some time for",
    "start": "150319",
    "end": "157760"
  },
  {
    "text": "interactive questions but let's let's save those uh for the end if you don't mind yeah i want to also mention that",
    "start": "157760",
    "end": "165280"
  },
  {
    "text": "if you guys have questions right now or like i mean during after this workshop we are still",
    "start": "165280",
    "end": "170480"
  },
  {
    "text": "available we're going to be available hanging out outside the alley here or at our booth or you know you guys can find",
    "start": "170480",
    "end": "176160"
  },
  {
    "text": "us on slack we're always happy to answer any questions all right so let's get started um",
    "start": "176160",
    "end": "183680"
  },
  {
    "text": "so just a couple of slides to level set so back in the mid 2010s",
    "start": "183680",
    "end": "190000"
  },
  {
    "text": "lyft had something of a problem they envisioned a future that involved collections of",
    "start": "190000",
    "end": "196239"
  },
  {
    "text": "microservices that would be operating their organization rather than a set of static",
    "start": "196239",
    "end": "201680"
  },
  {
    "text": "monoliths you've heard this story before right and so you're probably living the story some of you and so uh and so they were",
    "start": "201680",
    "end": "209200"
  },
  {
    "text": "looking at api gateway technology reverse proxy technology to allow them to publish those services out to their",
    "start": "209200",
    "end": "216319"
  },
  {
    "text": "consumers both internal and external and what they found as they looked around the api gateway landscape of that",
    "start": "216319",
    "end": "223519"
  },
  {
    "text": "time was that most of them weren't really designed for the kind of dynamic environment with ephemeral compute that",
    "start": "223519",
    "end": "230319"
  },
  {
    "text": "they faced at that time and so they made the fateful decision that a lot of you",
    "start": "230319",
    "end": "235439"
  },
  {
    "text": "have no doubt made you know do we build or do we buy and so in their case they decided to build and so they built an",
    "start": "235439",
    "end": "242799"
  },
  {
    "text": "internal technology and with that uh with that technology it went really well",
    "start": "242799",
    "end": "247920"
  },
  {
    "text": "uh by 2016 they they had this thing called envoy they donated it",
    "start": "247920",
    "end": "253280"
  },
  {
    "text": "to the cncf in 2017. it gained popularity very rapidly and in",
    "start": "253280",
    "end": "258639"
  },
  {
    "text": "2018 it graduated from from as a cncf project so a lot of",
    "start": "258639",
    "end": "264800"
  },
  {
    "text": "success very quickly and since that time its adoption has really exploded across",
    "start": "264800",
    "end": "270320"
  },
  {
    "text": "the uh the enterprise computing universe so you know why is that why is it that envoy has become so popular well number",
    "start": "270320",
    "end": "276960"
  },
  {
    "text": "one it was built to be extraordinarily fast and scalable it's implemented in c",
    "start": "276960",
    "end": "282240"
  },
  {
    "text": "plus plus i know that we use it uh we talk to customers every day who have who are",
    "start": "282240",
    "end": "288479"
  },
  {
    "text": "managing hundreds of millions of transactions per day in mission critical applications all on top of fleets of",
    "start": "288479",
    "end": "295759"
  },
  {
    "text": "envoy proxies and so very fast very scalable it's also very comprehensive it works at both l4",
    "start": "295759",
    "end": "302639"
  },
  {
    "text": "and l7 being able to manage and route requests in with with those protocols",
    "start": "302639",
    "end": "309840"
  },
  {
    "text": "it's really built from the ground up to work in a dynamic services environment so an environment like kubernetes where",
    "start": "309840",
    "end": "317440"
  },
  {
    "text": "services can be ephemeral they're going up they're going down new things are being added it's not a single static",
    "start": "317440",
    "end": "322960"
  },
  {
    "text": "environment with a collection of you know 10 or 12 software monoliths behind it it's actually designed for a dynamic",
    "start": "322960",
    "end": "330320"
  },
  {
    "text": "environment it's also built from the ground up to be",
    "start": "330320",
    "end": "335759"
  },
  {
    "text": "dynamically configurable so one of the things that adam will talk about a bit later as we get deeper into the workshop",
    "start": "335759",
    "end": "342000"
  },
  {
    "text": "is the fact that you can use a uh it's not just you know traditional api gateway technology",
    "start": "342000",
    "end": "348880"
  },
  {
    "text": "traditional proxy technology is based on the static configuration file right so",
    "start": "348880",
    "end": "354880"
  },
  {
    "text": "if you change that file you want to change a route or something like that often what you have to do is balance",
    "start": "354880",
    "end": "360720"
  },
  {
    "text": "balance your api gateway in order for those changes to take effect envoy was designed from day one to be unique in",
    "start": "360720",
    "end": "366720"
  },
  {
    "text": "that it works with a dynamic uh control plane so in other words you can have a control plane that serves up",
    "start": "366720",
    "end": "373120"
  },
  {
    "text": "configuration as as situations change on the ground as new policies are added as new services",
    "start": "373120",
    "end": "380160"
  },
  {
    "text": "come in or go away you can have those those policies served up dynamically to your proxy without",
    "start": "380160",
    "end": "387199"
  },
  {
    "text": "having to balance anything so it's designed to be that way from from day one it's",
    "start": "387199",
    "end": "393039"
  },
  {
    "text": "also designed to be a very extensible environment so envoy was built from day one to work on a a filter chain",
    "start": "393039",
    "end": "400560"
  },
  {
    "text": "architecture so if you go to the envoy proxy dot io website you'll see an entire library of filters that you can",
    "start": "400560",
    "end": "407759"
  },
  {
    "text": "use to apply various policies and routing techniques to your uh to your request and we'll be",
    "start": "407759",
    "end": "414160"
  },
  {
    "text": "looking at a number of those today as we go through as we go through this exercise",
    "start": "414160",
    "end": "420840"
  },
  {
    "text": "um all right it's also very very observable so out of the box you have integrations",
    "start": "420840",
    "end": "428319"
  },
  {
    "text": "with things like uh prometheus and grafana which we'll show you today is also an extensive collection of",
    "start": "428319",
    "end": "434720"
  },
  {
    "text": "metrics that are published from uh from envoy so um",
    "start": "434720",
    "end": "440080"
  },
  {
    "text": "why envoy proxy for api infrastructure there are clearly a number of alternatives that are out there open source alternatives like envoy that have",
    "start": "440080",
    "end": "446639"
  },
  {
    "text": "been out there for years why envoy for me it really boils down to four reasons",
    "start": "446639",
    "end": "451840"
  },
  {
    "text": "number one and i think the most important one from my standpoint is the large vibrant community that that that",
    "start": "451840",
    "end": "458160"
  },
  {
    "text": "uh supports and sponsors uh of envoy proxy right so um you look at you know",
    "start": "458160",
    "end": "464240"
  },
  {
    "text": "the the the list there on the screen uh comes from envoy proxy.oh just a sample",
    "start": "464240",
    "end": "469440"
  },
  {
    "text": "of the companies who have adopted and and promote um envoy proxy it's also um",
    "start": "469440",
    "end": "475919"
  },
  {
    "text": "we've already talked about the fact that it's extensible it's dynamically configurable but also i would say most",
    "start": "475919",
    "end": "481280"
  },
  {
    "text": "importantly it is something that's battle tested so envoy's been chosen as the foundation for a lot of the cloud",
    "start": "481280",
    "end": "488400"
  },
  {
    "text": "native application networking technologies that are growing very quickly right now so technologies like",
    "start": "488400",
    "end": "494000"
  },
  {
    "text": "istio are based on envoy proxy as the side car uh that manages traffic going in and out of your",
    "start": "494000",
    "end": "500639"
  },
  {
    "text": "of your service pods also multiple api gateway technologies like uh like blue edge from",
    "start": "500639",
    "end": "508400"
  },
  {
    "text": "solo and others uh are are built on are built on envoy proxy as well so it is it",
    "start": "508400",
    "end": "514080"
  },
  {
    "text": "is at this point it is definitely battle tested it is something that you can that you can put into production environments",
    "start": "514080",
    "end": "520000"
  },
  {
    "text": "and when it's properly configured it will it will work as expected okay",
    "start": "520000",
    "end": "526240"
  },
  {
    "text": "so what we're going to do today is a hands-on workshop if you'd like to follow along that would",
    "start": "527600",
    "end": "534399"
  },
  {
    "text": "be that would be great i think you'll get a lot out of that out of that process um if you want to just watch we'll actually be we'll actually be",
    "start": "534399",
    "end": "541200"
  },
  {
    "text": "doing everything that's going to be part of the workshop up on the big screen here so you should be able to follow",
    "start": "541200",
    "end": "546320"
  },
  {
    "text": "along in that fashion as well but what i'd like you to do if you are",
    "start": "546320",
    "end": "552080"
  },
  {
    "text": "planning to follow along go ahead and navigate to that bigly link that's up there in red on the screen right now",
    "start": "552080",
    "end": "558080"
  },
  {
    "text": "bit dot l y slash envoy dash workshop that's going to take you to the instruct",
    "start": "558080",
    "end": "564240"
  },
  {
    "text": "platform i don't know how many of you have used instruct in the past it's a really really effective platform for",
    "start": "564240",
    "end": "570160"
  },
  {
    "text": "these kinds of large-scale interactive sessions in fact i think there's some instruct people in the audience just",
    "start": "570160",
    "end": "575600"
  },
  {
    "text": "want to give you a shout out there it's very solid technology we use it for a lot of our workshops and big events",
    "start": "575600",
    "end": "581440"
  },
  {
    "text": "like this so yeah so go ahead and navigate there bit.ly slash envoy dash workshop",
    "start": "581440",
    "end": "587279"
  },
  {
    "text": "there'll be a provision compute environment for you there if you have a browser and an internet connection you should be able to connect to it we're",
    "start": "587279",
    "end": "594480"
  },
  {
    "text": "going to go through five exercises today uh we're going to start off with just some envoy basics",
    "start": "594480",
    "end": "600640"
  },
  {
    "text": "adam is going to cover a lot of the core principles of envoy and give you a couple of exercises to to sort of",
    "start": "600640",
    "end": "607360"
  },
  {
    "text": "reinforce those we're going to talk about http connection manager which is one of the foundational filters in envoy",
    "start": "607360",
    "end": "613920"
  },
  {
    "text": "that manages routing of traffic to uh to services we're going to talk a bit about security and then we're going to talk",
    "start": "613920",
    "end": "620320"
  },
  {
    "text": "about observability which when you're talking about managing collections of microservices observability becomes a",
    "start": "620320",
    "end": "626399"
  },
  {
    "text": "critical component adam is going to discuss that and as well we're going to walk you through a a live debugging",
    "start": "626399",
    "end": "632880"
  },
  {
    "text": "exercise so hopefully all the principles you're going to learn in the next in the next few minutes we're going to be able",
    "start": "632880",
    "end": "637920"
  },
  {
    "text": "to take those and then solve a real uh common problem that you see when you're working with envoy proxy and adam is",
    "start": "637920",
    "end": "644240"
  },
  {
    "text": "going to walk us through that as well now as a bonus for the first time anywhere in the world we are we're going",
    "start": "644240",
    "end": "650720"
  },
  {
    "text": "to be offering a a certification based on the results of this workshop it's an",
    "start": "650720",
    "end": "655760"
  },
  {
    "text": "envoy foundation certification this is something we've done quite a bit uh with other open source technologies like",
    "start": "655760",
    "end": "662240"
  },
  {
    "text": "istio and ebpf um where we offer certifications at different levels this is the first one of these we've done",
    "start": "662240",
    "end": "668320"
  },
  {
    "text": "with envoy so we have a foundational certification that's available today uh feel free to take the exam we'll post a",
    "start": "668320",
    "end": "674640"
  },
  {
    "text": "link to that at the end and and we'll actually talk more about that as we go forward all right so hopefully those of",
    "start": "674640",
    "end": "680720"
  },
  {
    "text": "you who are following along have had a chance to follow this link perhaps you've seen a screen like this",
    "start": "680720",
    "end": "687360"
  },
  {
    "text": "at this point you shouldn't need to enter an email address or anything like that you should just be able to",
    "start": "687360",
    "end": "692800"
  },
  {
    "text": "click the button to add this to your study room once you've done that you should see an",
    "start": "692800",
    "end": "698720"
  },
  {
    "text": "interface that looks something like this so click through the my exclusives button and then you'll see the intro to",
    "start": "698720",
    "end": "706000"
  },
  {
    "text": "envoy proxy instructrack and simply click on the on the view track button there",
    "start": "706000",
    "end": "713040"
  },
  {
    "text": "and that should take you to a screen something like this one and at this point",
    "start": "713040",
    "end": "720320"
  },
  {
    "text": "we'll actually start working alongside you so i'm going to go ahead and start this track up",
    "start": "720320",
    "end": "727440"
  },
  {
    "text": "all right do not watch the video that's on there that's me blabbering on for about 20 minutes about what is envoy",
    "start": "727440",
    "end": "733200"
  },
  {
    "text": "proxy instead you can listen to me blabber on in person um so you'll see there's a there's a uh",
    "start": "733200",
    "end": "739920"
  },
  {
    "text": "there's a spinning green circle down there this basically means that the environment is being provisioned so",
    "start": "739920",
    "end": "745600"
  },
  {
    "text": "definitely go ahead and get that process started it takes a couple of minutes for the environment to spin up",
    "start": "745600",
    "end": "752000"
  },
  {
    "text": "and then once that's done we'll actually be ready to to get started with the interactive bits",
    "start": "752000",
    "end": "758880"
  },
  {
    "text": "okay",
    "start": "758880",
    "end": "761279"
  },
  {
    "text": "all right so um as i as i said while we're waiting for everyone's environment to spin up we do have a we do have an",
    "start": "766399",
    "end": "773440"
  },
  {
    "text": "exam we'll offer at the end of this we've been doing certifications now at solo.io for over a year on a number of",
    "start": "773440",
    "end": "779760"
  },
  {
    "text": "popular open source technologies istio and ebpf being two notable examples",
    "start": "779760",
    "end": "786639"
  },
  {
    "text": "um it uh so it'll be a 12 question exam a requires greater than 80 in order to uh",
    "start": "786639",
    "end": "793440"
  },
  {
    "text": "in order to pass uh you can retake the exam as often as you like however you have to use a different email address",
    "start": "793440",
    "end": "799760"
  },
  {
    "text": "for every uh for every retake of the exam it's just a google form and we need a unique email address to sort those",
    "start": "799760",
    "end": "806720"
  },
  {
    "text": "and if you pass the test the badge will be issued within a few weeks by our very",
    "start": "806720",
    "end": "811839"
  },
  {
    "text": "efficient marketing department and it is suitable for framing or putting on your",
    "start": "811839",
    "end": "817440"
  },
  {
    "text": "linkedin profile whichever you prefer all right also if you are as passionate",
    "start": "817440",
    "end": "824480"
  },
  {
    "text": "about application networking as we are at solo if you're interested in api gateway and service mesh technology we",
    "start": "824480",
    "end": "831600"
  },
  {
    "text": "are always hiring and we would love to chat with you again as adam said um you can chat with us here after the session",
    "start": "831600",
    "end": "837839"
  },
  {
    "text": "or we'll also be available in the booth uh for a while this afternoon at booth s10 and pavilion one i believe anyway",
    "start": "837839",
    "end": "845360"
  },
  {
    "text": "one of the pavilions s10 first one yeah first one all right",
    "start": "845360",
    "end": "851360"
  },
  {
    "text": "so let's see if we are ready to roll here are we ready yeah we're good we are ready so uh hopefully you're all looking",
    "start": "851360",
    "end": "858320"
  },
  {
    "text": "at a screen similar to this with a little green start button and so press that start button and away",
    "start": "858320",
    "end": "863760"
  },
  {
    "text": "we go awesome uh i'll try to zoom in a bit i don't know if you guys see",
    "start": "863760",
    "end": "868880"
  },
  {
    "text": "the",
    "start": "868880",
    "end": "871040"
  },
  {
    "text": "all right the guys in the back you get you guys able to see the the terminal here just a thumbs up oh awesome awesome",
    "start": "879279",
    "end": "885680"
  },
  {
    "text": "thank you um all right all right all right so thanks jim for this amazing introduction",
    "start": "885680",
    "end": "892240"
  },
  {
    "text": "to why actually we need envoy um during this",
    "start": "892240",
    "end": "897360"
  },
  {
    "text": "first lap is mainly we're gonna cover the basics of like just envoy components",
    "start": "897360",
    "end": "903760"
  },
  {
    "text": "and just technology itself i guess envoy everyone is",
    "start": "903760",
    "end": "910000"
  },
  {
    "text": "if you guys came here there's two either there's two possibilities either you are new to android technology and want to",
    "start": "910000",
    "end": "916480"
  },
  {
    "text": "just understand the basics of envoy itself which is great or there's also maybe you are using an",
    "start": "916480",
    "end": "923279"
  },
  {
    "text": "envoy technology that's embedded into for example istio or",
    "start": "923279",
    "end": "928480"
  },
  {
    "text": "blue edge or any other technology it's kind of like abstracting the envoy complexity from you and",
    "start": "928480",
    "end": "935680"
  },
  {
    "text": "it's good to take this workshop to basically understand the",
    "start": "935680",
    "end": "941199"
  },
  {
    "text": "basics and be able to debug and and see basically the magic happening and how",
    "start": "941199",
    "end": "946480"
  },
  {
    "text": "things are getting transformed into complex envoy configuration so again the the main",
    "start": "946480",
    "end": "953759"
  },
  {
    "text": "the main goal of this workshop the one-on-one foundation here is to give you",
    "start": "953759",
    "end": "959600"
  },
  {
    "text": "the tools to understand basic android configuration that will probably help you",
    "start": "959600",
    "end": "964959"
  },
  {
    "text": "to kind of debug an environment or just have pointers to be able to ask the right questions and figure out instead",
    "start": "964959",
    "end": "971600"
  },
  {
    "text": "of just you know have been completely abstracted from your data plane all right",
    "start": "971600",
    "end": "977600"
  },
  {
    "text": "so um this workshop is based on we try to simplify it",
    "start": "977600",
    "end": "983600"
  },
  {
    "text": "enough so it's going to be just like a a docker stack a docker compose stack it's",
    "start": "983600",
    "end": "988880"
  },
  {
    "text": "uh it's going to have couple components one demo application one a graffana and primitives installed",
    "start": "988880",
    "end": "994959"
  },
  {
    "text": "already we're going to have envoy and we're going to have like an xod server i'm going to use later during",
    "start": "994959",
    "end": "1000880"
  },
  {
    "text": "this workshop but something to to notice here is that we are using static configuration and jim mentioned",
    "start": "1000880",
    "end": "1007680"
  },
  {
    "text": "earlier envoy either we can we can figure it using dynamic configuration or",
    "start": "1007680",
    "end": "1012720"
  },
  {
    "text": "we configure it using a static file for the simplicity today just to understand the basics we're going to be",
    "start": "1012720",
    "end": "1018320"
  },
  {
    "text": "using static files but everything done here can be done first on communities obviously and also can be done using",
    "start": "1018320",
    "end": "1025839"
  },
  {
    "text": "control plane like istio and control like blue edge and other uh do",
    "start": "1025839",
    "end": "1031438"
  },
  {
    "text": "all right time to start so uh again you can you guys can follow up",
    "start": "1031439",
    "end": "1037839"
  },
  {
    "text": "follow with me here um like doing the same thing i'm doing on your laptop",
    "start": "1037839",
    "end": "1042880"
  },
  {
    "text": "or you can just follow along and um you know if you if i think this this",
    "start": "1042880",
    "end": "1048799"
  },
  {
    "text": "environment is uh available for you for a couple hours so don't be in rush if at the end you're not able to to",
    "start": "1048799",
    "end": "1056240"
  },
  {
    "text": "finish you still have a couple hours to you know to wrap up your work there and obviously take",
    "start": "1056240",
    "end": "1061919"
  },
  {
    "text": "the exam all right i think we're ready to start here um",
    "start": "1061919",
    "end": "1067200"
  },
  {
    "text": "awesome just also way to communicate between every single lab we're going to",
    "start": "1067200",
    "end": "1074000"
  },
  {
    "text": "give a couple of minutes for you guys to be ready so i'll ask you guys just do a",
    "start": "1074000",
    "end": "1079280"
  },
  {
    "text": "a thumbs up just for me to know that you guys are ready to continue so if you guys are ready to start just please a",
    "start": "1079280",
    "end": "1084559"
  },
  {
    "text": "thumbs up awesome awesome audience all right",
    "start": "1084559",
    "end": "1090320"
  },
  {
    "text": "let's get rolling here first step is to just start the stack we're not going to",
    "start": "1090320",
    "end": "1095919"
  },
  {
    "text": "talk about envoy configuration at this point it's mainly to get your",
    "start": "1095919",
    "end": "1101440"
  },
  {
    "text": "demo stack example running and to do this what we're going to do we're going to do here is we're going to",
    "start": "1101440",
    "end": "1109200"
  },
  {
    "text": "set up the workshop so just go in the right directory",
    "start": "1109200",
    "end": "1115360"
  },
  {
    "text": "and then we're going to again we're going to use a docker compose here so if you guys want to take a look at the docker",
    "start": "1115600",
    "end": "1122400"
  },
  {
    "text": "compose configuration super straightforward we'll have envoy itself and it's going to be",
    "start": "1122400",
    "end": "1128400"
  },
  {
    "text": "mounting some files and we don't get we don't have to get into details but it's basically mounting the basic",
    "start": "1128400",
    "end": "1133600"
  },
  {
    "text": "configuration we're going to going gonna be modifying every time and restarting right",
    "start": "1133600",
    "end": "1138880"
  },
  {
    "text": "then it has an upstream service which is just a demo service for us just to test the connection all the way to your back",
    "start": "1138880",
    "end": "1145600"
  },
  {
    "text": "end and then we have an off server that one gonna be used for authentication uh later in another lab",
    "start": "1145600",
    "end": "1153200"
  },
  {
    "text": "and we have the primitives plus grafina stack for monitoring and also we're gonna see that in in the next uh lab all",
    "start": "1153200",
    "end": "1158720"
  },
  {
    "text": "right so first step here just starting the stack that's pretty much it uh for that we're",
    "start": "1158720",
    "end": "1164960"
  },
  {
    "text": "gonna do a docker compose up and um it's probably gonna take a couple",
    "start": "1164960",
    "end": "1170400"
  },
  {
    "text": "seconds here to to pull all the the images and start your or your uh",
    "start": "1170400",
    "end": "1175919"
  },
  {
    "text": "your stack um there's sometimes some maybe if you guys have trouble with",
    "start": "1175919",
    "end": "1181600"
  },
  {
    "text": "internet i mean either use your your data or keep refreshing if you refresh the page",
    "start": "1181600",
    "end": "1187280"
  },
  {
    "text": "you won't lose your session it's fine you know if you see something stuck refresh the page try to not do it often",
    "start": "1187280",
    "end": "1193919"
  },
  {
    "text": "but if you really see that refresh would be helpful please do",
    "start": "1193919",
    "end": "1199760"
  },
  {
    "text": "okay so now creating the services we see that everything is done here so we have",
    "start": "1202720",
    "end": "1208159"
  },
  {
    "text": "our services running um do a docker ps and we see a couple components here",
    "start": "1208159",
    "end": "1213280"
  },
  {
    "text": "ready for us to to demo so uh one thing",
    "start": "1213280",
    "end": "1219600"
  },
  {
    "text": "the first step here what we did is that we created a couple components with envoy itself which used",
    "start": "1219600",
    "end": "1225600"
  },
  {
    "text": "a basic configuration having only the admin interface now what's the admin",
    "start": "1225600",
    "end": "1230960"
  },
  {
    "text": "interface it's one of it's basically the way to interact with envoy from an administrative",
    "start": "1230960",
    "end": "1236720"
  },
  {
    "text": "administrative uh standpoint where you can see the configuration if you want to see the admin interface configuration",
    "start": "1236720",
    "end": "1242799"
  },
  {
    "text": "click on android config there on top if you if you click there you'll see if you click on the file here",
    "start": "1242799",
    "end": "1248400"
  },
  {
    "text": "that is the bootstrap configuration we use for android right now and we see to configure the admin",
    "start": "1248400",
    "end": "1254640"
  },
  {
    "text": "interface we just have to set up like a a port and an address and",
    "start": "1254640",
    "end": "1260080"
  },
  {
    "text": "that's it now the admin interface is one of the really important component",
    "start": "1260080",
    "end": "1266320"
  },
  {
    "text": "for you to understand if you want to debug android now the admin interface itself sometimes",
    "start": "1266320",
    "end": "1272559"
  },
  {
    "text": "is masked right like for example istio and other technologies we don't do it in",
    "start": "1272559",
    "end": "1278000"
  },
  {
    "text": "blue edge but there's some technologies that mask the the the ad interface from a user",
    "start": "1278000",
    "end": "1284159"
  },
  {
    "text": "because it's risky using an ad interface you can drain listeners you can fail health",
    "start": "1284159",
    "end": "1290400"
  },
  {
    "text": "checks you can really interact with envoy itself in dynamic manner that can be",
    "start": "1290400",
    "end": "1295520"
  },
  {
    "text": "hurtful to your system so i i would really advise to",
    "start": "1295520",
    "end": "1300559"
  },
  {
    "text": "understand how the admin interface work but not expose it externally something internal to just check what's going on",
    "start": "1300559",
    "end": "1307039"
  },
  {
    "text": "right so for that there's a couple things to really be aware in the admin interface and we're",
    "start": "1307039",
    "end": "1314080"
  },
  {
    "text": "gonna check them later but one that i like looking at every time i start the",
    "start": "1314080",
    "end": "1319600"
  },
  {
    "text": "admin interface on on envoy is the config dump right the config dump is basically the state or the state of",
    "start": "1319600",
    "end": "1326799"
  },
  {
    "text": "envoy at this time especially if using dynamic configuration configuration pushed by a server",
    "start": "1326799",
    "end": "1332559"
  },
  {
    "text": "you want to be able to just go to envoy and see what android is seeing what's the configuration envoy is",
    "start": "1332559",
    "end": "1338000"
  },
  {
    "text": "having right so config dump is one of the most important things you're going to see in the admin",
    "start": "1338000",
    "end": "1344159"
  },
  {
    "text": "interface another thing that i would advise they can look at is clusters and",
    "start": "1344159",
    "end": "1349840"
  },
  {
    "text": "listeners but we are not there yet since we haven't created any listener or cluster okay",
    "start": "1349840",
    "end": "1356000"
  },
  {
    "text": "but we're going to see that in a second all right so again admin interface super",
    "start": "1356000",
    "end": "1361760"
  },
  {
    "text": "important we're going to be using a couple times um in the in the in the first labs and then we're",
    "start": "1361760",
    "end": "1367200"
  },
  {
    "text": "going to try to switch to more like a primitives and graph the stack for metrics later ah that reminds me that",
    "start": "1367200",
    "end": "1373120"
  },
  {
    "text": "also the link to stats is really important too uh you're gonna see that here either",
    "start": "1373120",
    "end": "1378400"
  },
  {
    "text": "stats or stats per meters that just you know formatted for primitives but it will allow you to give you an idea of",
    "start": "1378400",
    "end": "1385200"
  },
  {
    "text": "like why what's going on like why request is failing and things like that we're going to see that later all",
    "start": "1385200",
    "end": "1390960"
  },
  {
    "text": "right so admin interface is there installed so",
    "start": "1390960",
    "end": "1396960"
  },
  {
    "text": "now next step what's the one of the most important component in envoy i would say",
    "start": "1396960",
    "end": "1404159"
  },
  {
    "text": "a listener all right a listener in envoy i'm gonna just switch to this a listener in envoy",
    "start": "1404159",
    "end": "1411760"
  },
  {
    "text": "is um basically a way for us to open the port simplify it easily is a",
    "start": "1411760",
    "end": "1418320"
  },
  {
    "text": "way for us to open a report in envoy and be able to interact like send requests",
    "start": "1418320",
    "end": "1423440"
  },
  {
    "text": "there okay and envoy intercept the request there and do something with it either right reroute it or terminate it",
    "start": "1423440",
    "end": "1428799"
  },
  {
    "text": "and so on so a non-void listener is basically a network address open on your",
    "start": "1428799",
    "end": "1437440"
  },
  {
    "text": "envoy so let's create one listener for",
    "start": "1437440",
    "end": "1442799"
  },
  {
    "text": "envoy here to do this what we're going to do is just use git check checkout already have all the",
    "start": "1442799",
    "end": "1448640"
  },
  {
    "text": "configuration it's going to get messy if we have to do it you know manually so we use git to kind of switch",
    "start": "1448640",
    "end": "1455440"
  },
  {
    "text": "configuration from a lab to another in this case if you go to the admin interface at the android configuration",
    "start": "1455440",
    "end": "1461520"
  },
  {
    "text": "we see here that we have only the admin interface configuration now let's",
    "start": "1461520",
    "end": "1467679"
  },
  {
    "text": "do a git check out of lab one two",
    "start": "1467679",
    "end": "1473360"
  },
  {
    "text": "do this if we go back to the unvoid configuration we see a little bit more content here and",
    "start": "1473360",
    "end": "1479679"
  },
  {
    "text": "what's important to understand here is that we added one static listener that's opening a port 8000 on envoy",
    "start": "1479679",
    "end": "1488240"
  },
  {
    "text": "now a listener always needs a filter and it's a good time to for us to introduce",
    "start": "1488240",
    "end": "1495600"
  },
  {
    "text": "the second important concept in envoy is a filter so we started with the listener",
    "start": "1495600",
    "end": "1501360"
  },
  {
    "text": "is the one taking the connection and is the one you know we we talk to as a client",
    "start": "1501360",
    "end": "1508720"
  },
  {
    "text": "then there's a filter a filter is the one processing that connection and that",
    "start": "1508720",
    "end": "1515039"
  },
  {
    "text": "request there's two types of filters there's the tcp filters we deal with l4",
    "start": "1515039",
    "end": "1520480"
  },
  {
    "text": "type level where we can just do a kind of pass-through tcp proxy somewhere or",
    "start": "1520480",
    "end": "1526400"
  },
  {
    "text": "there's some l7 type filter that will be able to",
    "start": "1526400",
    "end": "1531840"
  },
  {
    "text": "attach to the http connection measure we're going to be talking about later in this example we're just using a",
    "start": "1531840",
    "end": "1538000"
  },
  {
    "text": "simple filter called direct response operating at the l4 level you see here it's a tcp it's an",
    "start": "1538000",
    "end": "1546559"
  },
  {
    "text": "network it's a network filter and what it does here it just return",
    "start": "1546559",
    "end": "1551840"
  },
  {
    "text": "helloworld to any connection on that specific port okay so once we got this",
    "start": "1551840",
    "end": "1557919"
  },
  {
    "text": "configuration we'll have to restart envoy quick just to pick up this and to do this we're going to do",
    "start": "1557919",
    "end": "1564960"
  },
  {
    "text": "a restart all right there you go do restart here",
    "start": "1564960",
    "end": "1571520"
  },
  {
    "text": "that's good now envoy is picking up the config if you again if you want to check the",
    "start": "1571520",
    "end": "1576960"
  },
  {
    "text": "config dump you should be able to see the listener added to the envoy configuration itself not only in the",
    "start": "1576960",
    "end": "1582960"
  },
  {
    "text": "static file and if you do just a curl here we get hello er",
    "start": "1582960",
    "end": "1590159"
  },
  {
    "text": "back right so at this stage we have only a listener and we have a filter he's",
    "start": "1590159",
    "end": "1596159"
  },
  {
    "text": "taking communication and returning hello world all right now time to",
    "start": "1596159",
    "end": "1602000"
  },
  {
    "text": "one um okay okay so i want to talk about something before",
    "start": "1602000",
    "end": "1607679"
  },
  {
    "text": "something really important envoy and jim mentioned earlier is be able to observe what's going on and envoy has a ton of",
    "start": "1607679",
    "end": "1614960"
  },
  {
    "text": "metrics really valuable to understand what's happening so during this workshop we're going to be",
    "start": "1614960",
    "end": "1621279"
  },
  {
    "text": "pointing to some metrics that we think that are variable but we invite you to check all the lists to see exactly what",
    "start": "1621279",
    "end": "1627520"
  },
  {
    "text": "you you're looking for so one thing to do here if you go back to",
    "start": "1627520",
    "end": "1634720"
  },
  {
    "text": "the admin interface before if you guys clicked on listener there were nothing",
    "start": "1634720",
    "end": "1640080"
  },
  {
    "text": "here if you click this time we'll see that we added one listener listening on zero zero zero eight thousand okay and",
    "start": "1640080",
    "end": "1647679"
  },
  {
    "text": "this is a really important debug tip here if you see envoy not receiving any",
    "start": "1647679",
    "end": "1653840"
  },
  {
    "text": "configuration just like this kind of a connection failure not like for example",
    "start": "1653840",
    "end": "1659360"
  },
  {
    "text": "the network the the server is not there at all first thing to verify if your listener is created",
    "start": "1659360",
    "end": "1666480"
  },
  {
    "text": "okay you need to check first if basically the door is open right",
    "start": "1666480",
    "end": "1672960"
  },
  {
    "text": "okay um now we talked about listeners we talked about filters",
    "start": "1673679",
    "end": "1680000"
  },
  {
    "text": "a third really important concept in envoy is envoy clusters",
    "start": "1680000",
    "end": "1685039"
  },
  {
    "text": "a cluster is a grouping of addresses to point to a certain",
    "start": "1685039",
    "end": "1690640"
  },
  {
    "text": "destination okay so you'll think about the cluster as a representation of a",
    "start": "1690640",
    "end": "1696799"
  },
  {
    "text": "back end a backend service for example either it can be your local community service or it can be pointing to",
    "start": "1696799",
    "end": "1703919"
  },
  {
    "text": "an external service somehow but basically just a collection of ips that envoy can use to interact with the",
    "start": "1703919",
    "end": "1711760"
  },
  {
    "text": "back-end system in this case earlier we just terminated the request right there but",
    "start": "1711760",
    "end": "1718720"
  },
  {
    "text": "this time we're gonna you know we're gonna route traffic all the way to our back end to do this we",
    "start": "1718720",
    "end": "1725360"
  },
  {
    "text": "again i'm gonna check out this time uh lab one two",
    "start": "1725360",
    "end": "1731520"
  },
  {
    "text": "one three sorry and if you go back to the android configuration this time something is added here which is a",
    "start": "1731520",
    "end": "1737600"
  },
  {
    "text": "cluster okay a cluster definition is pretty straightforward here we're just pointing",
    "start": "1737600",
    "end": "1743440"
  },
  {
    "text": "to a dns address upstream 8080. appstream again is a reminder just a",
    "start": "1743440",
    "end": "1749039"
  },
  {
    "text": "demo application we installed with our docker compose stack okay so",
    "start": "1749039",
    "end": "1754399"
  },
  {
    "text": "here we have a backend service now that we have this name and this cluster called app stream defined let's define",
    "start": "1754399",
    "end": "1761120"
  },
  {
    "text": "the routing to that and i mentioned earlier using tcp filters you can do a tcp proxy routing",
    "start": "1761120",
    "end": "1767600"
  },
  {
    "text": "all tcp to back end in this case we're using the tcp proxy",
    "start": "1767600",
    "end": "1773039"
  },
  {
    "text": "filter instead of the direct response filter we had previously right so here we're doing",
    "start": "1773039",
    "end": "1778799"
  },
  {
    "text": "a pass through all the way back to the back end and if you see we're just referencing the cluster upstream that we",
    "start": "1778799",
    "end": "1785840"
  },
  {
    "text": "defined which is our demo application so let's now that we had the we have the",
    "start": "1785840",
    "end": "1792640"
  },
  {
    "text": "configuration again let's restart envoy to pick up this",
    "start": "1792640",
    "end": "1799200"
  },
  {
    "text": "and let's let's make a call here um we are going to",
    "start": "1799200",
    "end": "1804799"
  },
  {
    "text": "make a call to our backend system there you go so here we're getting hell",
    "start": "1804799",
    "end": "1812480"
  },
  {
    "text": "back hello back is coming from our backend system raw tcp going through",
    "start": "1812480",
    "end": "1818080"
  },
  {
    "text": "envoy to our backend system that returned hello back",
    "start": "1818080",
    "end": "1823679"
  },
  {
    "text": "okay so that's really an important concept to understand here the concept of clusters because if",
    "start": "1823679",
    "end": "1830480"
  },
  {
    "text": "ultimately if you're dealing with istio or you're dealing with any other technology behind the scene the control",
    "start": "1830480",
    "end": "1836720"
  },
  {
    "text": "plane is transforming a set of like kubernetes servers for example to a set of apis that envoy in the sense right so",
    "start": "1836720",
    "end": "1844399"
  },
  {
    "text": "if you see that your envoy is not able to interact with let's say an end like a side car and for side car not able to",
    "start": "1844399",
    "end": "1852240"
  },
  {
    "text": "interact with a certain service first thing to do is to verify if if the cluster is defined there",
    "start": "1852240",
    "end": "1859279"
  },
  {
    "text": "does envoy know about that specific service you're trying to reach so something to keep in mind",
    "start": "1859279",
    "end": "1864720"
  },
  {
    "text": "all right um just i want to show you certain diagrams if you want to just you know look at it you can just uh",
    "start": "1864720",
    "end": "1872240"
  },
  {
    "text": "expand this on the side and here is kind of the example that what we did during the lab one what we did we have a client",
    "start": "1872240",
    "end": "1879279"
  },
  {
    "text": "talking to a listener that we just opened on the port 8000 it's going to talk to a set of",
    "start": "1879279",
    "end": "1885600"
  },
  {
    "text": "filters it can be one or many right it's a filter chain so you can chain multiple",
    "start": "1885600",
    "end": "1890880"
  },
  {
    "text": "filters to do multiple things one on top of the other and then route to your back-end service",
    "start": "1890880",
    "end": "1898640"
  },
  {
    "text": "all right so and one last important thing here again",
    "start": "1898640",
    "end": "1904640"
  },
  {
    "text": "if you have a cluster defined you need you can check the ips that",
    "start": "1904640",
    "end": "1910880"
  },
  {
    "text": "actually the endpoint as envoy is trying to use if you go back to yet the admin interface just go back here with",
    "start": "1910880",
    "end": "1916880"
  },
  {
    "text": "the arrow and this time going under clusters so we can find it here",
    "start": "1916880",
    "end": "1923360"
  },
  {
    "text": "cluster up top second one oh thank you all right clusters in this now we see that we have",
    "start": "1923360",
    "end": "1930320"
  },
  {
    "text": "an upstream cluster defined but it's really important here we see the end point also we see this 172 1805 defined",
    "start": "1930320",
    "end": "1939360"
  },
  {
    "text": "this is our ip that we're trying to reach right this is our back end service",
    "start": "1939360",
    "end": "1944559"
  },
  {
    "text": "um something really too important to to notice like a deep active again",
    "start": "1944559",
    "end": "1950080"
  },
  {
    "text": "if even even if you have the cluster defined try to check the cluster",
    "start": "1950080",
    "end": "1956559"
  },
  {
    "text": "uh path in the admin interface or the metric right try to see if the end",
    "start": "1956559",
    "end": "1962880"
  },
  {
    "text": "points are defined right okay i have the upstream cluster but do i have a",
    "start": "1962880",
    "end": "1968640"
  },
  {
    "text": "an end point do i have an ip defined that talks to this service okay i have an ip here then",
    "start": "1968640",
    "end": "1975679"
  },
  {
    "text": "check if the health check is passing is this back end end point healthy right",
    "start": "1975679",
    "end": "1983279"
  },
  {
    "text": "this is important to note all right that was the fundamentals of",
    "start": "1983279",
    "end": "1989200"
  },
  {
    "text": "couple components really important in envoy so again thumbs up if you guys ready to continue",
    "start": "1989200",
    "end": "1996559"
  },
  {
    "text": "sweet",
    "start": "1996559",
    "end": "1999120"
  },
  {
    "text": "yeah okay http 0.9 news is just for curl like we're dealing with raw tcp and somehow kerr doesn't handle it well um",
    "start": "2002240",
    "end": "2009840"
  },
  {
    "text": "that's it if when we gonna switch to the http connection manager we we won't deal with this situation anymore",
    "start": "2009840",
    "end": "2017039"
  },
  {
    "text": "um all right awesome back to you man all right very good thank you adam",
    "start": "2017039",
    "end": "2022240"
  },
  {
    "text": "so um that was a great introduction to uh",
    "start": "2022240",
    "end": "2027760"
  },
  {
    "text": "to the basics and the core concepts of envoy proxy if you haven't already go ahead and hit the green check button at",
    "start": "2027760",
    "end": "2033440"
  },
  {
    "text": "the end of the first exercise that will hopefully say everything is correct and we'll load up the next",
    "start": "2033440",
    "end": "2040799"
  },
  {
    "text": "challenge which is we're going to talk about http connection manager so um adam worked",
    "start": "2040799",
    "end": "2047519"
  },
  {
    "text": "with a couple of examples with um with tcp uh and he also",
    "start": "2047519",
    "end": "2054158"
  },
  {
    "text": "uh in some of his examples used uh you know direct responses straight from the proxy there was not even a back-end",
    "start": "2054159",
    "end": "2060000"
  },
  {
    "text": "service that was that was handling the response um that's not the most common scenario when at least with our",
    "start": "2060000",
    "end": "2066960"
  },
  {
    "text": "customers what we see uh using envoy proxy very commonly what we see is uh",
    "start": "2066960",
    "end": "2073358"
  },
  {
    "text": "people who are using http connection manager to be able to process requests at layer seven uh to be able to apply",
    "start": "2073359",
    "end": "2080800"
  },
  {
    "text": "you know let's say transformations to apply uh a policies based on headers and that sort of thing and so you need the",
    "start": "2080800",
    "end": "2087200"
  },
  {
    "text": "l7 access in order to do that so envoy has a l7 capability and the core the core of",
    "start": "2087200",
    "end": "2095679"
  },
  {
    "text": "that is something called http connection manager and so that's what we're going to explore in this",
    "start": "2095679",
    "end": "2101119"
  },
  {
    "text": "in this second exercise so what we're going to uh what we're going",
    "start": "2101119",
    "end": "2107520"
  },
  {
    "text": "to do here let's go ahead and move into the correct directory",
    "start": "2107520",
    "end": "2114079"
  },
  {
    "text": "and check out uh check out lab 2-1",
    "start": "2114079",
    "end": "2119599"
  },
  {
    "text": "and so um i just want to show you first uh graphically what we're going to be doing",
    "start": "2119599",
    "end": "2126320"
  },
  {
    "text": "this time so it's a little different right we still have a client we still have a listener at http 8000 now we're",
    "start": "2126320",
    "end": "2132160"
  },
  {
    "text": "going to be going through the http connection manager is the only filter in our filter chain it's going to route",
    "start": "2132160",
    "end": "2139200"
  },
  {
    "text": "to our upstream service which is simply going to give us back a a hello world",
    "start": "2139200",
    "end": "2144720"
  },
  {
    "text": "example of sorry hello world response so let's take a look at",
    "start": "2144720",
    "end": "2150960"
  },
  {
    "text": "let's take a look at the configuration",
    "start": "2150960",
    "end": "2156680"
  },
  {
    "text": "so here is uh here's what we've added here so",
    "start": "2157359",
    "end": "2163200"
  },
  {
    "text": "you can see the http connection manager filters specified and here are the real",
    "start": "2163200",
    "end": "2168800"
  },
  {
    "text": "the real key bits right here in in this section um you can see we've we have",
    "start": "2168800",
    "end": "2177040"
  },
  {
    "text": "we have identified a virtual host here that we're calling upstream um it is listening on domain uh",
    "start": "2177040",
    "end": "2184280"
  },
  {
    "text": "hello.envoyproxy.io so if it sees that um in the host in the host header um",
    "start": "2184280",
    "end": "2189599"
  },
  {
    "text": "that's going to be like passing the first gate for this filter to uh to fire",
    "start": "2189599",
    "end": "2194640"
  },
  {
    "text": "you can see we also have a we have a route defined okay so we're basically saying um any request",
    "start": "2194640",
    "end": "2201520"
  },
  {
    "text": "that has a prefix the path prefix begins with hello we want to capture that we",
    "start": "2201520",
    "end": "2207839"
  },
  {
    "text": "want to capture that request and we want to take that request and then we want to route it to this cluster called uh",
    "start": "2207839",
    "end": "2214160"
  },
  {
    "text": "upstream which is basically the little hello world app that's written in python that's running behind the scenes",
    "start": "2214160",
    "end": "2220560"
  },
  {
    "text": "okay so that's um that's pretty much all we're doing for this uh for this first example",
    "start": "2220560",
    "end": "2227200"
  },
  {
    "text": "so let's go back let's go back here we've already applied",
    "start": "2227200",
    "end": "2233599"
  },
  {
    "text": "we've already applied that config now what do we need to do because we're not using a dynamic control plane we're just",
    "start": "2233839",
    "end": "2239839"
  },
  {
    "text": "using a static configuration file every time we make a change like this we have to restart envoy to pick up the new",
    "start": "2239839",
    "end": "2245680"
  },
  {
    "text": "config as we said before adam's going to talk a bit about control planes more in the in the end and you'll get some sense of the",
    "start": "2245680",
    "end": "2253280"
  },
  {
    "text": "value that they can add here so you'll notice now our curl command is uh we don't have the http 0.9 requirement",
    "start": "2253280",
    "end": "2261119"
  },
  {
    "text": "before because this is not this is not tcp this is an http connection you can see it's going to",
    "start": "2261119",
    "end": "2266480"
  },
  {
    "text": "local host 8000 with with a path of hello you can also see we're specifying the host header",
    "start": "2266480",
    "end": "2273599"
  },
  {
    "text": "hello.envoyproxy.io and uh when we do that right we get we",
    "start": "2273599",
    "end": "2278960"
  },
  {
    "text": "get a hello world back just as expected now you know just to show you kind of a a counter example let's say we didn't",
    "start": "2278960",
    "end": "2285920"
  },
  {
    "text": "have the host proxy specified properly what do you expect in that case the filter is not going to match and you're",
    "start": "2285920",
    "end": "2292079"
  },
  {
    "text": "going to see what 404 404 excellent well you didn't actually see it but if we do this then",
    "start": "2292079",
    "end": "2299119"
  },
  {
    "text": "you'll actually see there's a 404 if we if we don't specify the host header correctly okay",
    "start": "2299119",
    "end": "2305760"
  },
  {
    "text": "all right now as we've said before really a core bit of value from envoy is observability",
    "start": "2305760",
    "end": "2313359"
  },
  {
    "text": "and metrics and so not surprisingly uh you're going to see that with with this",
    "start": "2313359",
    "end": "2318560"
  },
  {
    "text": "example as well so um adam showed you just briefly the admin interface and so you can go in here and",
    "start": "2318560",
    "end": "2325119"
  },
  {
    "text": "hit you know hit the stats interface and you can actually see this whole raft of metrics here",
    "start": "2325119",
    "end": "2330880"
  },
  {
    "text": "of course you can also we can just access this via curl and then just uh filter out the the bits that we that we",
    "start": "2330880",
    "end": "2338079"
  },
  {
    "text": "want to see and so in this case you can see here here is a metric that indicates um you know there's been one",
    "start": "2338079",
    "end": "2345599"
  },
  {
    "text": "request that's been completed successfully uh with this since envoy has restarted if we go off and",
    "start": "2345599",
    "end": "2352720"
  },
  {
    "text": "let's say we run the we run it again right we run the curl command again the correct one and we",
    "start": "2352720",
    "end": "2362240"
  },
  {
    "text": "and then we we take a look at that metric again not surprisingly you can see that metric has been updated to two",
    "start": "2363440",
    "end": "2369119"
  },
  {
    "text": "uh from one so um so the uh definitely as you as you get deeper into envoy if",
    "start": "2369119",
    "end": "2375200"
  },
  {
    "text": "you haven't been there before we definitely encourage you to spend some time encouraging uh",
    "start": "2375200",
    "end": "2380480"
  },
  {
    "text": "understanding this vast metrics library that envoy uh publishes",
    "start": "2380480",
    "end": "2386640"
  },
  {
    "text": "okay there's also a prometheus instance as adam talked about that is uh that's",
    "start": "2386640",
    "end": "2392160"
  },
  {
    "text": "included with this example we're not going to go into this deeply right now adam's going to cover that in lab 4 on",
    "start": "2392160",
    "end": "2397839"
  },
  {
    "text": "observability but you can see if we wanted to we could go take a look and actually see this same metric you know",
    "start": "2397839",
    "end": "2403760"
  },
  {
    "text": "graphed out using using our little prometheus setup that we have in this example as well okay",
    "start": "2403760",
    "end": "2412000"
  },
  {
    "text": "so let's uh let's run our check on that and uh",
    "start": "2412000",
    "end": "2419040"
  },
  {
    "text": "oh wait oh i said let's not run our check on that because we're not done yet all right um",
    "start": "2419040",
    "end": "2426000"
  },
  {
    "text": "i got to the bottom there i thought it was at the end of the lab all right so uh we're going to go",
    "start": "2426000",
    "end": "2431119"
  },
  {
    "text": "through one other example with http connection manager so what we showed you first was just a very simple you know",
    "start": "2431119",
    "end": "2438480"
  },
  {
    "text": "hey here's the request route it to this back-end server you know it works everyone's happy",
    "start": "2438480",
    "end": "2444240"
  },
  {
    "text": "uh now we're going to deal with something that's a slightly more real-world situation which is let's say our back-end service is unreliable right",
    "start": "2444240",
    "end": "2451200"
  },
  {
    "text": "in fact let's say it's really unreliable in our case we're going to simulate a service that",
    "start": "2451200",
    "end": "2456400"
  },
  {
    "text": "actually fails 80 of the time hopefully you don't have any of those but if you do you can you can appreciate what we're",
    "start": "2456400",
    "end": "2462480"
  },
  {
    "text": "going to do here so what we're going to do if you look at it from a graphical standpoint um it's it's",
    "start": "2462480",
    "end": "2469280"
  },
  {
    "text": "pretty much exactly like the previous example except on the connection from the upstream cluster to the upstream",
    "start": "2469280",
    "end": "2475760"
  },
  {
    "text": "service we're going to modify the envoy configuration to add in some retry capabilities this is going to be very",
    "start": "2475760",
    "end": "2482720"
  },
  {
    "text": "basic there's a whole a library of enhancements you can provide but we're",
    "start": "2482720",
    "end": "2488480"
  },
  {
    "text": "just going to show you the basic configuration of how to do how to do these retries okay",
    "start": "2488480",
    "end": "2495119"
  },
  {
    "text": "so let's um let's dig into that so um first of all what i want to show you",
    "start": "2495119",
    "end": "2500560"
  },
  {
    "text": "is the way we're going to trigger this unreliable behavior so we have a little",
    "start": "2500560",
    "end": "2506000"
  },
  {
    "text": "python server back there that's operating as our upstream and so our python server pretty stupidly if it sees",
    "start": "2506000",
    "end": "2512319"
  },
  {
    "text": "the header unreliable set to true then it's going to fail 80 of the time",
    "start": "2512319",
    "end": "2517520"
  },
  {
    "text": "hopefully your you know app developers you work with are a little smarter than that but so let's go ahead and try this out",
    "start": "2517520",
    "end": "2525680"
  },
  {
    "text": "and so if we run this curl here with unreliable set to true you'll see that",
    "start": "2525680",
    "end": "2531520"
  },
  {
    "text": "80 percent of the time you're going to get back a 500 internal server error now some of you will actually see that",
    "start": "2531520",
    "end": "2537680"
  },
  {
    "text": "request succeed if you do simply retry it it will most likely fail on the next uh on the next occurrence",
    "start": "2537680",
    "end": "2544800"
  },
  {
    "text": "all right so what can we what can we do about that well let's take a look at how we have",
    "start": "2544800",
    "end": "2552079"
  },
  {
    "text": "how we've modified the configuration here",
    "start": "2552079",
    "end": "2556400"
  },
  {
    "text": "let me get a little more screen real estate and so",
    "start": "2558319",
    "end": "2563599"
  },
  {
    "text": "well we haven't done anything yet because we haven't we haven't brought in the new configuration so let's uh",
    "start": "2563599",
    "end": "2570000"
  },
  {
    "text": "let's restart our envoy proxy i think you missed the checkout did i",
    "start": "2570000",
    "end": "2575920"
  },
  {
    "text": "not did i not do the uh the checkout yeah",
    "start": "2575920",
    "end": "2580800"
  },
  {
    "text": "yep all right so where was that must be back up here somewhere",
    "start": "2581280",
    "end": "2587200"
  },
  {
    "text": "somewhere there it is yep skips right over that all right so you want to be sure before you do that",
    "start": "2591200",
    "end": "2597760"
  },
  {
    "text": "you want to check out uh lab 2-2 which will be the uh the retry part of this",
    "start": "2597760",
    "end": "2603119"
  },
  {
    "text": "lab all right so once you switch over to that now you go back to the envoy config and you'll see",
    "start": "2603119",
    "end": "2609359"
  },
  {
    "text": "um you'll see there is a change and the change is right here so within the context of this",
    "start": "2609359",
    "end": "2615760"
  },
  {
    "text": "http connection manager config we have added this retry policy right here",
    "start": "2615760",
    "end": "2621680"
  },
  {
    "text": "you're noticing we're only retrying on certain conditions so envoy has a number of",
    "start": "2621680",
    "end": "2626720"
  },
  {
    "text": "conditions that you can specify you can also you can also aggregate them into into a list",
    "start": "2626720",
    "end": "2633280"
  },
  {
    "text": "but there are only certain connections that we're going to retry on in this case we're only going to retry on 500",
    "start": "2633280",
    "end": "2638319"
  },
  {
    "text": "class internal server errors um and then we're also going to limit the number of retries so we're only going to allow 10",
    "start": "2638319",
    "end": "2644400"
  },
  {
    "text": "retries if we see more failures than that then then we're going to punt there's a whole host of other things you",
    "start": "2644400",
    "end": "2650079"
  },
  {
    "text": "can specify here as well but again this is just a basic a basic configuration to",
    "start": "2650079",
    "end": "2655599"
  },
  {
    "text": "show you the uh the the foundational idea all right",
    "start": "2655599",
    "end": "2661359"
  },
  {
    "text": "so now if we restart envoy we should see some good things happen",
    "start": "2661359",
    "end": "2669760"
  },
  {
    "text": "so note this time we called it in exactly the same way we did before we passed in the unreliable flag but this",
    "start": "2670720",
    "end": "2678000"
  },
  {
    "text": "time uh what we see is that is that it returns true i mean it",
    "start": "2678000",
    "end": "2683200"
  },
  {
    "text": "returns a 200 okay now the question is what um what happened there right",
    "start": "2683200",
    "end": "2690560"
  },
  {
    "text": "did our retry mechanism actually work and so to confirm that what we're going",
    "start": "2690560",
    "end": "2696000"
  },
  {
    "text": "to do is we're going to run we're going to run this command right here",
    "start": "2696000",
    "end": "2703040"
  },
  {
    "text": "to take a look at the logs of our of our upstream service okay",
    "start": "2703280",
    "end": "2709359"
  },
  {
    "text": "now if you look very carefully what you can see the last on this last time that",
    "start": "2709359",
    "end": "2714960"
  },
  {
    "text": "we executed the service you can see the first two times uh actually it looks like it was just",
    "start": "2714960",
    "end": "2721520"
  },
  {
    "text": "these these two here maybe you should do like uh some spaces and read around the curl",
    "start": "2721520",
    "end": "2726880"
  },
  {
    "text": "yeah yeah i think that's a good idea so let's uh yeah let's put some space in here you can see it more clearly",
    "start": "2726880",
    "end": "2732800"
  },
  {
    "text": "if we run this again all right so you can see the request returned true and actually at that time of course it",
    "start": "2732800",
    "end": "2739200"
  },
  {
    "text": "worked the first time all right well you know one out of every five times that's going to happen so let's try again",
    "start": "2739200",
    "end": "2746480"
  },
  {
    "text": "okay here we go and so you can see what happened on the last time the first try um you know this is pretty good we",
    "start": "2746480",
    "end": "2752560"
  },
  {
    "text": "actually got it on the first try and then the second try we should go to vegas next week and try our luck let's do it uh so you can",
    "start": "2752560",
    "end": "2758880"
  },
  {
    "text": "see the first attempt fail with the 500 but then you know completely without client knowledge or you know the envoy",
    "start": "2758880",
    "end": "2765599"
  },
  {
    "text": "proxy intervened and said hey i've got this retry configuration i'm going to retry that and on the second occurrence",
    "start": "2765599",
    "end": "2771040"
  },
  {
    "text": "it succeeded and so it returned a successful uh successful 200 code to the",
    "start": "2771040",
    "end": "2776960"
  },
  {
    "text": "to the downstream client okay all right hopefully that makes perfect",
    "start": "2776960",
    "end": "2782960"
  },
  {
    "text": "sense now you will not be surprised excuse me",
    "start": "2782960",
    "end": "2788800"
  },
  {
    "text": "you'll not be surprised to learn that there are also metrics associated with these retry capabilities as well",
    "start": "2788800",
    "end": "2796160"
  },
  {
    "text": "so if we take a look at that here's a here's a set of metrics that",
    "start": "2796160",
    "end": "2801839"
  },
  {
    "text": "give us a lot of um useful information about what we're seeing you can see first of all at the bottom of that list",
    "start": "2801839",
    "end": "2808560"
  },
  {
    "text": "we see that there's a total of five requests that have been issued to this upstream since the envoy uh since the",
    "start": "2808560",
    "end": "2815280"
  },
  {
    "text": "envoy proxy was restarted you can also see that of those of those five um two",
    "start": "2815280",
    "end": "2821280"
  },
  {
    "text": "of them uh two of them succeeded or sorry three that's right we ran it right we yeah right we ran it the first time then",
    "start": "2821280",
    "end": "2827760"
  },
  {
    "text": "we re-ran it twice to show the logs and so there are three of those that succeeded just as expected",
    "start": "2827760",
    "end": "2835040"
  },
  {
    "text": "you can you can also see that there were a number of retry so right here you can",
    "start": "2835040",
    "end": "2840880"
  },
  {
    "text": "see the count of the number of 500 uh responses that we got and the number of",
    "start": "2840880",
    "end": "2846240"
  },
  {
    "text": "retries so each one of these elements this this http connection manager filter is emitting metrics that are associated",
    "start": "2846240",
    "end": "2852800"
  },
  {
    "text": "with with all of these capabilities and you can see we're seeing those we're seeing those here",
    "start": "2852800",
    "end": "2859440"
  },
  {
    "text": "both both in the aggregate as well as as well as broken down by particular",
    "start": "2859440",
    "end": "2867040"
  },
  {
    "text": "error codes that are being returned all right so that's just",
    "start": "2867040",
    "end": "2872720"
  },
  {
    "text": "an introduction to some of the things you can do with http connection manager we're going to be using it as we go",
    "start": "2872720",
    "end": "2880079"
  },
  {
    "text": "forward in the next exercise as well so if you haven't already hit the check button at the at the bottom of your",
    "start": "2880079",
    "end": "2886079"
  },
  {
    "text": "screen and let's go forward to the next lab i think we can do a quick check who is ready for oh yeah",
    "start": "2886079",
    "end": "2891520"
  },
  {
    "text": "thank you adam all right cool great great and so we're going to talk a little bit about securing traffic using envoy",
    "start": "2891520",
    "end": "2899119"
  },
  {
    "text": "and we're going to discuss two separate topics here one is",
    "start": "2899119",
    "end": "2904880"
  },
  {
    "text": "you know really really basic something that every every one of you no doubt has probably done which is you're going to",
    "start": "2904880",
    "end": "2911040"
  },
  {
    "text": "we're going to set up tls configuration to encrypt the communication channel between the downstream client and the",
    "start": "2911040",
    "end": "2917520"
  },
  {
    "text": "proxy so we're going to take a look at that and then we're also going to uh investigate a second uh envoy filter",
    "start": "2917520",
    "end": "2924960"
  },
  {
    "text": "which is the x off z filter so we're going to add in a little custom authorization service into the mix and",
    "start": "2924960",
    "end": "2932000"
  },
  {
    "text": "we're going to configure envoy to con to properly authorize our request",
    "start": "2932000",
    "end": "2937520"
  },
  {
    "text": "before we actually go off and hit the upstream service so we'll show you how to do that with envoy as well",
    "start": "2937520",
    "end": "2944240"
  },
  {
    "text": "okay so let's uh let's go to the correct",
    "start": "2944240",
    "end": "2950559"
  },
  {
    "text": "directory let's check out the",
    "start": "2950559",
    "end": "2955760"
  },
  {
    "text": "the configuration for this exercise and so here is what we're going to do",
    "start": "2955760",
    "end": "2961680"
  },
  {
    "text": "uh in graphic form we're again going to have a downstream client we're going to be talking to a different",
    "start": "2961680",
    "end": "2968000"
  },
  {
    "text": "listener this time we're going to be talking to an https listener that's listening on a different port 8443 this",
    "start": "2968000",
    "end": "2974000"
  },
  {
    "text": "communication channel is going to be encrypted and then it's going to delegate similarly to what we did before",
    "start": "2974000",
    "end": "2979920"
  },
  {
    "text": "in this first example through http connection manager which is going to route to the upstream cluster",
    "start": "2979920",
    "end": "2985520"
  },
  {
    "text": "and then ultimately the service that backs that okay so the way we're going to do that is",
    "start": "2985520",
    "end": "2992079"
  },
  {
    "text": "we're going to configure something called a downstream tls context and we",
    "start": "2992079",
    "end": "2997280"
  },
  {
    "text": "will provide some certificate information in context to that let's look at that over here",
    "start": "2997280",
    "end": "3004400"
  },
  {
    "text": "so you can see one change we made was simply changing from port 8000 to 8443",
    "start": "3004400",
    "end": "3010240"
  },
  {
    "text": "we didn't have to do that it's simply a convention based on you know the traditional values for http versus https",
    "start": "3010240",
    "end": "3017440"
  },
  {
    "text": "port values and then you can see we've added this bit of configuration this transport",
    "start": "3017440",
    "end": "3022880"
  },
  {
    "text": "socket stanza into our envoy config everything else is the same so you can",
    "start": "3022880",
    "end": "3027920"
  },
  {
    "text": "see um you can see we're using this downstream tls context um",
    "start": "3027920",
    "end": "3033920"
  },
  {
    "text": "it's we're actually configuring this to require a client certificate be presented and then we're specifying the",
    "start": "3033920",
    "end": "3040800"
  },
  {
    "text": "uh the certificate chain that uh that we're going to be that we're going to be using and that's really all there is to",
    "start": "3040800",
    "end": "3047599"
  },
  {
    "text": "it uh we're using self-signed uh search in this you know in this lab exercise uh",
    "start": "3047599",
    "end": "3052800"
  },
  {
    "text": "so that will that will uh change things just a bit from what you'd see in the uh in the real world but you'll definitely",
    "start": "3052800",
    "end": "3060000"
  },
  {
    "text": "get the idea okay so",
    "start": "3060000",
    "end": "3065520"
  },
  {
    "text": "because we've changed configuration we again need to restart envoy",
    "start": "3065520",
    "end": "3071200"
  },
  {
    "text": "and now what we're going to do let's just let's test the same uh let's test what we had before and just",
    "start": "3071200",
    "end": "3077839"
  },
  {
    "text": "confirm that that no longer works so if we try to hit http",
    "start": "3077839",
    "end": "3082960"
  },
  {
    "text": "the http listener at port 8000 not surprisingly that's going to fail because that listener is no longer",
    "start": "3082960",
    "end": "3089359"
  },
  {
    "text": "active let's say we just correct let's say we just correct the port",
    "start": "3089359",
    "end": "3094880"
  },
  {
    "text": "number but we don't correct the protocol to https again you can see that's going to fail right because the listener is",
    "start": "3094880",
    "end": "3101520"
  },
  {
    "text": "expecting expecting https and it's not it's not getting that",
    "start": "3101520",
    "end": "3106880"
  },
  {
    "text": "and then finally let's let's get uh let's get everything right uh now you",
    "start": "3106880",
    "end": "3112880"
  },
  {
    "text": "get back from curl you get a warning hey this is a self-signed certificate are you sure you're sure you're okay with",
    "start": "3112880",
    "end": "3118400"
  },
  {
    "text": "this and of course we are so we're going to add in the minus k flag to basically",
    "start": "3118400",
    "end": "3123680"
  },
  {
    "text": "say ignore that warning and now you can see we are have a properly secured",
    "start": "3123680",
    "end": "3129599"
  },
  {
    "text": "connection to our service to our proxy that's delegating to the service and returning the value we all expect",
    "start": "3129599",
    "end": "3136720"
  },
  {
    "text": "okay so that is a very quick tour of configuring tls",
    "start": "3136720",
    "end": "3142640"
  },
  {
    "text": "in envoy proxy all right now",
    "start": "3142640",
    "end": "3148079"
  },
  {
    "text": "let's take a look at something that's a little more complex and this is this is the the more probably the most complex",
    "start": "3148079",
    "end": "3155200"
  },
  {
    "text": "flow we're going to use in this in this exercise and what we're doing is we're adding",
    "start": "3155200",
    "end": "3161520"
  },
  {
    "text": "another element to our filter chain here and the the element we're going to add is the xdot z the authorization filter",
    "start": "3161520",
    "end": "3168160"
  },
  {
    "text": "so this this is a standard envoy filter that you can you know pick up open source you can plug it into your envoy",
    "start": "3168160",
    "end": "3174880"
  },
  {
    "text": "uh into your envoy instance and what that's going to do is it's going to give you the ability before you actually",
    "start": "3174880",
    "end": "3181200"
  },
  {
    "text": "process the request you'll be able to delegate first to an off cluster and the",
    "start": "3181200",
    "end": "3187119"
  },
  {
    "text": "auth cluster will simply take your request and based on whatever criteria you specify we'll give you a thumbs up",
    "start": "3187119",
    "end": "3193200"
  },
  {
    "text": "or a thumbs down this request is acceptable or this request isn't acceptable by default you'll get back a",
    "start": "3193200",
    "end": "3198720"
  },
  {
    "text": "403 if it is unacceptable and if it is acceptable it's simply then going to delegate on to the second step in the",
    "start": "3198720",
    "end": "3205920"
  },
  {
    "text": "process which is to your upstream cluster uh which is exactly the same one that we've been using before",
    "start": "3205920",
    "end": "3212319"
  },
  {
    "text": "okay i want to just mention something quick if you guys want to take a look at the code we'll have all this example yeah we",
    "start": "3212319",
    "end": "3218960"
  },
  {
    "text": "have we have it on public github so you can take a look at the ex-auth code that we use it's super basic",
    "start": "3218960",
    "end": "3225040"
  },
  {
    "text": "yeah it's all it's all right here if you if you um if you drill down into this um",
    "start": "3225040",
    "end": "3231359"
  },
  {
    "text": "you can tell adam and i spent you know we spent a ton of time working on this",
    "start": "3231359",
    "end": "3237359"
  },
  {
    "text": "we were actually thinking about closed sourcing this code and you know but instead we'll just we'll put it out",
    "start": "3237359",
    "end": "3242640"
  },
  {
    "text": "there for you so yeah you can see this is our this is our sophisticated all services it's a simple uh python server",
    "start": "3242640",
    "end": "3248960"
  },
  {
    "text": "that looks for hey is there a header called uh called authorization in the request and does it have the value of",
    "start": "3248960",
    "end": "3255520"
  },
  {
    "text": "workshop if it does thumbs up if it doesn't thumbs down okay simple stuff",
    "start": "3255520",
    "end": "3261599"
  },
  {
    "text": "and our our upstream service is equally sophisticated as as this",
    "start": "3261599",
    "end": "3266960"
  },
  {
    "text": "all right",
    "start": "3266960",
    "end": "3269520"
  },
  {
    "text": "okay so let's check out the um let's check out the new configuration",
    "start": "3273119",
    "end": "3280319"
  },
  {
    "text": "here and what you're going to see",
    "start": "3280319",
    "end": "3285440"
  },
  {
    "text": "when you look at the differences notice what we've done here in the context",
    "start": "3285440",
    "end": "3291359"
  },
  {
    "text": "in the context of our of our filters we have added in",
    "start": "3291359",
    "end": "3296400"
  },
  {
    "text": "this x auth z filter and you can see what it's going to do",
    "start": "3296400",
    "end": "3302640"
  },
  {
    "text": "is it is going to delegate to this cluster called off right",
    "start": "3302640",
    "end": "3307760"
  },
  {
    "text": "we weren't very creative with our naming conventions either and and you can see we've also added now",
    "start": "3307760",
    "end": "3314960"
  },
  {
    "text": "an auth cluster with you know the location where where it can be reached so that that will be the first step in",
    "start": "3314960",
    "end": "3321440"
  },
  {
    "text": "that process is for the request comes in the xf z filter is going to pick that up it's going to send it off to the auth",
    "start": "3321440",
    "end": "3327520"
  },
  {
    "text": "service all service is going to give a thumbs up or a thumbs down if it gives a thumbs down we'll return a 403 forbidden",
    "start": "3327520",
    "end": "3334160"
  },
  {
    "text": "back to the client if it gives a thumbs up then we will delegate the request off to our upstream server and allow it to",
    "start": "3334160",
    "end": "3340480"
  },
  {
    "text": "do whatever processing it wants to do okay",
    "start": "3340480",
    "end": "3345960"
  },
  {
    "text": "all right so again for the",
    "start": "3349839",
    "end": "3355040"
  },
  {
    "text": "fifth or sixth time let's restart envoy",
    "start": "3355040",
    "end": "3360240"
  },
  {
    "text": "and then let's test out a couple of uh let's test out a couple of options here to see if this is working as expected so",
    "start": "3360559",
    "end": "3366160"
  },
  {
    "text": "at first we're going to test this using exactly the same uh call sequence we did",
    "start": "3366160",
    "end": "3371359"
  },
  {
    "text": "before and what do you see so we did not supply the authorization header we don't supply",
    "start": "3371359",
    "end": "3377680"
  },
  {
    "text": "the authorization header what happens we get back the default 403 forbidden response so that's working as expected",
    "start": "3377680",
    "end": "3386400"
  },
  {
    "text": "let's uh let's try something slightly different let's uh let's say we provide a bad authentication key is that going",
    "start": "3386880",
    "end": "3394000"
  },
  {
    "text": "to work yep just like expected it gives us back a 403 forbidden code",
    "start": "3394000",
    "end": "3399320"
  },
  {
    "text": "[Music] and then finally let's do the let's offer the correct",
    "start": "3399320",
    "end": "3406960"
  },
  {
    "text": "header with the correct value and now you can see we get back a 200 okay so",
    "start": "3406960",
    "end": "3412480"
  },
  {
    "text": "it's working just as expected all right so that's that's the basics of",
    "start": "3412480",
    "end": "3419280"
  },
  {
    "text": "how to use the uh uh the the out of the box xdolf z filter that comes with that",
    "start": "3419280",
    "end": "3425920"
  },
  {
    "text": "comes with envoy all right now you're not going to be surprised to learn that",
    "start": "3425920",
    "end": "3430960"
  },
  {
    "text": "like every other filter that comes with envoy the x dot z filter publishes a",
    "start": "3430960",
    "end": "3436240"
  },
  {
    "text": "a nice collection of metrics that you can use to understand what it's actually doing so",
    "start": "3436240",
    "end": "3443119"
  },
  {
    "text": "let's uh let's take a look at that take a look at some of the take a look at some of the metrics and then let's see if we can",
    "start": "3443119",
    "end": "3450319"
  },
  {
    "text": "interpret uh interpret what's going on there so what you'll see is that here um here at",
    "start": "3450319",
    "end": "3457359"
  },
  {
    "text": "the top you'll notice that the upstream",
    "start": "3457359",
    "end": "3462799"
  },
  {
    "text": "for the or the x dot z that delegates to upstream there was one request that was that was okay right that was the last",
    "start": "3462799",
    "end": "3468880"
  },
  {
    "text": "one but then there were two requests here that were that were denied okay so",
    "start": "3468880",
    "end": "3474480"
  },
  {
    "text": "that's all good you can see also similarly here um at the at the ingress level we also so",
    "start": "3474480",
    "end": "3481599"
  },
  {
    "text": "we got metrics that were published at the individual upstream level we also get metrics that are published at the",
    "start": "3481599",
    "end": "3487760"
  },
  {
    "text": "ingress level so if we had multiple services running here that were that were fronted by by uh this the same",
    "start": "3487760",
    "end": "3495040"
  },
  {
    "text": "filter we would see this broken down by different upstreams and then aggregated here into this http ingress set of",
    "start": "3495040",
    "end": "3503119"
  },
  {
    "text": "metrics okay so you can see that again um we have",
    "start": "3503119",
    "end": "3508319"
  },
  {
    "text": "we have two that were denied uh from the from the ingress point and one that was okay",
    "start": "3508319",
    "end": "3513839"
  },
  {
    "text": "you can also see at the bottom at the listener level you can also see a breakdown by response code so you can",
    "start": "3513839",
    "end": "3520880"
  },
  {
    "text": "see right there was one that was a 200 200 class response and two that were",
    "start": "3520880",
    "end": "3526880"
  },
  {
    "text": "that were 403 class responses and a total number of requests that were completed for three so you can",
    "start": "3526880",
    "end": "3533599"
  },
  {
    "text": "see how this produces a whole lot of metrics that are really useful for you observing what's going on in the system",
    "start": "3533599",
    "end": "3539760"
  },
  {
    "text": "adam is going to talk about that in just a minute in more detail okay",
    "start": "3539760",
    "end": "3545839"
  },
  {
    "text": "so at this point we are done with lab three hope that was helpful in understanding some of the envoy security",
    "start": "3545839",
    "end": "3552880"
  },
  {
    "text": "mechanisms now we're going to hit the check button and this time it's going to say",
    "start": "3552880",
    "end": "3558799"
  },
  {
    "text": "everything is good and so that's going to move us over to lab four and i'll turn it over to adam",
    "start": "3558799",
    "end": "3564559"
  },
  {
    "text": "are we be good with the thumbs up to move on to lab four awesome you guys been killing it today",
    "start": "3564559",
    "end": "3570480"
  },
  {
    "text": "that's great uh i'll be asking a quick question here",
    "start": "3570480",
    "end": "3577040"
  },
  {
    "text": "if something goes wrong in your environment what's the first thing you have to look at",
    "start": "3577040",
    "end": "3583599"
  },
  {
    "text": "metrics logs things like that right and we saw during this workshop that envoy just",
    "start": "3584160",
    "end": "3590640"
  },
  {
    "text": "produces a ton of data that is really",
    "start": "3590640",
    "end": "3596400"
  },
  {
    "text": "useful to debug and see what's going on right so during this lab what we're going to do",
    "start": "3596400",
    "end": "3603040"
  },
  {
    "text": "we're just going to take a look at limit is already configured to basically have",
    "start": "3603040",
    "end": "3608720"
  },
  {
    "text": "an aggregate for all what we saw previously right so if you go back to",
    "start": "3608720",
    "end": "3614400"
  },
  {
    "text": "if you can start this workshop and we go under graffana graffana here you can just you know use",
    "start": "3614400",
    "end": "3622319"
  },
  {
    "text": "i don't know if you guys are familiar with the grafana basically the default credentials admin admin",
    "start": "3622319",
    "end": "3627440"
  },
  {
    "text": "so use admin admin you're going to be able to log in here just skip this you don't have to to put a new password",
    "start": "3627440",
    "end": "3634559"
  },
  {
    "text": "and we're going to take a look at what we have here",
    "start": "3634559",
    "end": "3640160"
  },
  {
    "text": "just try to take the 15 last seconds gonna be useful for us just to see what's going",
    "start": "3640160",
    "end": "3645680"
  },
  {
    "text": "on and also in terms of upstreams try to take the upstream one which is our fine",
    "start": "3645680",
    "end": "3651440"
  },
  {
    "text": "like the demo application right so here this is just an aggregate right using",
    "start": "3651440",
    "end": "3656880"
  },
  {
    "text": "grafana if you guys familiar with you can always create your own panels use all the metrics we used to have like",
    "start": "3656880",
    "end": "3662799"
  },
  {
    "text": "define you can you know create your alerting if your system is down and so on so",
    "start": "3662799",
    "end": "3668319"
  },
  {
    "text": "something super important is if something is going down check your metrics that's the first thing to do",
    "start": "3668319",
    "end": "3675440"
  },
  {
    "text": "like why i mean what's happening there it's gonna get you like uh some some key data there",
    "start": "3675440",
    "end": "3680880"
  },
  {
    "text": "and then after that obviously you're going to check something else which is locked and we're going to talk about this in a second so",
    "start": "3680880",
    "end": "3688079"
  },
  {
    "text": "here we have just a collection of some metrics that are important that can be used as a framework or you",
    "start": "3688079",
    "end": "3693839"
  },
  {
    "text": "guys can do your own create your own dashboards we saw that we have of the night because",
    "start": "3693839",
    "end": "3700319"
  },
  {
    "text": "we added the odd filter in the third lab we saw that we have couple of the night there that's because of that for",
    "start": "3700319",
    "end": "3706720"
  },
  {
    "text": "regarding the upstream the the cluster upstream cluster membership we see that everything is healthy everything has",
    "start": "3706720",
    "end": "3712559"
  },
  {
    "text": "been good for the couple past minutes 15 seconds uh 15 minutes sorry",
    "start": "3712559",
    "end": "3718640"
  },
  {
    "text": "we see the success rate is is good the only time when something didn't happen",
    "start": "3718640",
    "end": "3724000"
  },
  {
    "text": "well is because we did this unreliable header and so on so connection timeout",
    "start": "3724000",
    "end": "3729599"
  },
  {
    "text": "we see there was no connection timeout which is which is awesome uh we see some 400s mainly because of our 403",
    "start": "3729599",
    "end": "3738240"
  },
  {
    "text": "xod denied there and uh and so on so really valuable to understand the core concept of like dealing with metrics if",
    "start": "3738240",
    "end": "3746240"
  },
  {
    "text": "you debug your environment if you set up envoy you need to set up your metrics either directly with envoy or if you're",
    "start": "3746240",
    "end": "3752160"
  },
  {
    "text": "using like something and control plane and so on if using like uh like an istio or blue edge so on to",
    "start": "3752160",
    "end": "3759280"
  },
  {
    "text": "always have some sort of automatically pushing injecting this metric collection to your primitives",
    "start": "3759280",
    "end": "3765839"
  },
  {
    "text": "sometimes it even comes with a primitive server with you all right so that was super quick for just",
    "start": "3765839",
    "end": "3772880"
  },
  {
    "text": "uh grafana and we're going to go back to this like in couple seconds for a debug exercise",
    "start": "3772880",
    "end": "3778559"
  },
  {
    "text": "but another thing that is i think even more important is",
    "start": "3778559",
    "end": "3784240"
  },
  {
    "text": "logs right something goes down something doesn't work okay metrics will alert",
    "start": "3784240",
    "end": "3789520"
  },
  {
    "text": "we're going to receive a 3 a.m notification that everyone loves then we're going to have to check logs",
    "start": "3789520",
    "end": "3796720"
  },
  {
    "text": "right so let's see what we can do to add logs to envoy",
    "start": "3796720",
    "end": "3802640"
  },
  {
    "text": "to do this we're gonna use something called access logs so access logs are really useful piece",
    "start": "3802640",
    "end": "3811200"
  },
  {
    "text": "of data that is produced by envoy on each request if envoy interceptor",
    "start": "3811200",
    "end": "3816319"
  },
  {
    "text": "requests and something happen either good or bad like if everything's successful you're gonna have a log",
    "start": "3816319",
    "end": "3822480"
  },
  {
    "text": "saying all good 200 no problems there now if something goes out what do you",
    "start": "3822480",
    "end": "3828240"
  },
  {
    "text": "have to do check also the x logs and check to see what eric which error code",
    "start": "3828240",
    "end": "3834079"
  },
  {
    "text": "was was provided and so on so let's uh let's just set up the x logs quick here",
    "start": "3834079",
    "end": "3840319"
  },
  {
    "text": "to do this let's check out the lab 4-2",
    "start": "3840319",
    "end": "3847000"
  },
  {
    "text": "and oh sorry i have to go in the envoy folder",
    "start": "3848559",
    "end": "3854160"
  },
  {
    "text": "check out lab4-2 and let's take a look at the",
    "start": "3854160",
    "end": "3860160"
  },
  {
    "text": "envoy configuration this time to add access logs we added that on our http",
    "start": "3860160",
    "end": "3866079"
  },
  {
    "text": "connection manager it's basically just one line okay if you add the one line",
    "start": "3866079",
    "end": "3871119"
  },
  {
    "text": "type thing it's just using default format that i'm providing here in the lab that you guys can check",
    "start": "3871119",
    "end": "3878000"
  },
  {
    "text": "that one here i think is better for me to squeeze it this way but you can configure your access logs",
    "start": "3878000",
    "end": "3884240"
  },
  {
    "text": "like you want you can add specific data like you can print specific headers that",
    "start": "3884240",
    "end": "3889359"
  },
  {
    "text": "you care about headers coming from your client and things like that you can print uh what's",
    "start": "3889359",
    "end": "3894799"
  },
  {
    "text": "the uh client ip address for example things that are really important uh which",
    "start": "3894799",
    "end": "3900640"
  },
  {
    "text": "upstream where the traffic should be going and what kind of answer you guys got from the upstream so all this is",
    "start": "3900640",
    "end": "3907920"
  },
  {
    "text": "super valuable to have on in your x logs now one key thing if i have to advise",
    "start": "3907920",
    "end": "3914640"
  },
  {
    "text": "for only one thing to watch in your access logs is the response flags",
    "start": "3914640",
    "end": "3920559"
  },
  {
    "text": "okay response flags and invoice and are super super important",
    "start": "3920559",
    "end": "3926960"
  },
  {
    "text": "if something goes if everything if everything works fine you don't have any response flag gonna",
    "start": "3926960",
    "end": "3932720"
  },
  {
    "text": "be a dash everything's fine now if everything is not working fine you're going to have a response flag which is a",
    "start": "3932720",
    "end": "3939599"
  },
  {
    "text": "two letter or more uh code and this code will tell you why",
    "start": "3939599",
    "end": "3945760"
  },
  {
    "text": "at least give you a good hint on why this request failed you're going to grab that response flag go on google go on",
    "start": "3945760",
    "end": "3953920"
  },
  {
    "text": "the end void documentation match that to what's the core what's why actually what",
    "start": "3953920",
    "end": "3959119"
  },
  {
    "text": "the explanation around that specific response flag and from there it's going to give you the good hint to continue",
    "start": "3959119",
    "end": "3964960"
  },
  {
    "text": "your debugging journey okay so again response flags so",
    "start": "3964960",
    "end": "3970160"
  },
  {
    "text": "let's just restart the configuration here to pick up our",
    "start": "3970160",
    "end": "3975359"
  },
  {
    "text": "access logs config and now let's you know",
    "start": "3975359",
    "end": "3980640"
  },
  {
    "text": "make a couple calls and see how things are printed",
    "start": "3980640",
    "end": "3986079"
  },
  {
    "text": "let's do this alright so i just made five requests here",
    "start": "3986079",
    "end": "3992640"
  },
  {
    "text": "to my back end again but this time i have x logs on so if i go to",
    "start": "3992640",
    "end": "3998559"
  },
  {
    "text": "if i check the logs of envoy this time i would",
    "start": "3998559",
    "end": "4003839"
  },
  {
    "text": "see my access log and this is if you fi if you guys see the the five last lines",
    "start": "4003839",
    "end": "4010720"
  },
  {
    "text": "here this is x logs that can be collected right you guys can collect that using um your",
    "start": "4010720",
    "end": "4017599"
  },
  {
    "text": "blog collection metric you know we have fuel and d and so on aggregating this data sending it to any anywhere you guys",
    "start": "4017599",
    "end": "4024240"
  },
  {
    "text": "persisting your logs and you guys can query on it so on but this is really important here where you see that we",
    "start": "4024240",
    "end": "4029440"
  },
  {
    "text": "using the basic access log format we see that we're making calls hello we got the",
    "start": "4029440",
    "end": "4034559"
  },
  {
    "text": "200 it was a one one http one one connection uh we see um",
    "start": "4034559",
    "end": "4041520"
  },
  {
    "text": "basically which host was using we use and which app stream ip we try to",
    "start": "4041520",
    "end": "4046799"
  },
  {
    "text": "target something important here is that the response flag is not provided it's not",
    "start": "4046799",
    "end": "4052640"
  },
  {
    "text": "implemented we should we see a dash awesome dash means good",
    "start": "4052640",
    "end": "4059039"
  },
  {
    "text": "all right so this is basically a quick intro to",
    "start": "4059039",
    "end": "4064160"
  },
  {
    "text": "monitoring in envoy this is super important to understand and if you have to remember one thing from that response",
    "start": "4064160",
    "end": "4070880"
  },
  {
    "text": "flags all right thumbs up if you guys are ready for the last lab which is",
    "start": "4070880",
    "end": "4076960"
  },
  {
    "text": "a super super small debugging exercise but just to kind of what we tried to do",
    "start": "4076960",
    "end": "4082720"
  },
  {
    "text": "during this workshop is just to you know take you through this journey of understanding the basics and designing metrics and sending",
    "start": "4082720",
    "end": "4089440"
  },
  {
    "text": "hcm and now we try to we're going to try to put everything together in a quick exercise let's see if something doesn't",
    "start": "4089440",
    "end": "4095920"
  },
  {
    "text": "work well how to how to debug it all right click on check",
    "start": "4095920",
    "end": "4102000"
  },
  {
    "text": "once ready and let's start debugging the fun part of the software engineer life",
    "start": "4102000",
    "end": "4109838"
  },
  {
    "text": "okay it's going to take a couple seconds because i have to set up because because adam's script is doing something evil behind the scenes that",
    "start": "4111920",
    "end": "4118400"
  },
  {
    "text": "we're not going to tell you about yet that needs second to mess up that's right",
    "start": "4118400",
    "end": "4123758"
  },
  {
    "text": "all right let's start um great so",
    "start": "4123759",
    "end": "4128798"
  },
  {
    "text": "i'm gonna go back to the folder always been using for for this workshop and now",
    "start": "4128799",
    "end": "4134159"
  },
  {
    "text": "that just makes some calls right i mean expecting everything works well no we have",
    "start": "4134159",
    "end": "4140798"
  },
  {
    "text": "problems connecting to envoy and voice returning something but i don't know what it is he's saying",
    "start": "4140799",
    "end": "4147600"
  },
  {
    "text": "it looks bad well it looks really bad no healthy abstract and well this time",
    "start": "4147600",
    "end": "4153679"
  },
  {
    "text": "appstream doesn't mean that our cluster upstream just mean like i can can do anything with your request",
    "start": "4153679",
    "end": "4160159"
  },
  {
    "text": "okay uh well this is not a fun time to you know with our with our system so what what",
    "start": "4160159",
    "end": "4166238"
  },
  {
    "text": "can we do first thing again as i mentioned um just kind of an extended version of",
    "start": "4166239",
    "end": "4172318"
  },
  {
    "text": "this debug exercise first thing to do if something doesn't happen now i now i know that",
    "start": "4172319",
    "end": "4178318"
  },
  {
    "text": "at least end voice returning something for me in my mind if envoy is returning something i was",
    "start": "4178319",
    "end": "4184960"
  },
  {
    "text": "able to connect to envoy so a listener is there all right i'm removing the listener",
    "start": "4184960",
    "end": "4190640"
  },
  {
    "text": "possibility from my equation now if i have the listener defined and staking traffic and something is",
    "start": "4190640",
    "end": "4197040"
  },
  {
    "text": "happening something so either something is happening within envoy or something is happening on the",
    "start": "4197040",
    "end": "4204560"
  },
  {
    "text": "you know backhand side of it so now let's try to figure out if it's the",
    "start": "4204560",
    "end": "4209679"
  },
  {
    "text": "between envoy or in the back end uh what you're going to do",
    "start": "4209679",
    "end": "4215440"
  },
  {
    "text": "again check the um logs we have ax logs defined already so this",
    "start": "4215440",
    "end": "4222480"
  },
  {
    "text": "time oh hey there's a code there yeah we have a bad thing going on we",
    "start": "4222480",
    "end": "4229840"
  },
  {
    "text": "should not see any code and we see u h right so if you see that",
    "start": "4229840",
    "end": "4236400"
  },
  {
    "text": "i'm sending a link here to a documentation so hopefully it doesn't mess up everything but i mean it's super",
    "start": "4236400",
    "end": "4242560"
  },
  {
    "text": "super small i'll see if you guys go on the envoy documentation uh now that we have you",
    "start": "4242560",
    "end": "4249679"
  },
  {
    "text": "edge like and we can check what it means oh sorry up",
    "start": "4249679",
    "end": "4254800"
  },
  {
    "text": "there you go it gives us a bit more explanation at least you know this is super basic one",
    "start": "4254800",
    "end": "4261360"
  },
  {
    "text": "right yes but you guys can also see the more complicated ones and that's the one that's really you know really important",
    "start": "4261360",
    "end": "4268000"
  },
  {
    "text": "hint for us so no healthy upstream hosts in upstream cluster in addition to a 503",
    "start": "4268000",
    "end": "4275920"
  },
  {
    "text": "response code okay well no healthy upstream hosts so there is",
    "start": "4275920",
    "end": "4283280"
  },
  {
    "text": "something with endpoints like there is something going on that i can connect to my back end so what you do",
    "start": "4283280",
    "end": "4290239"
  },
  {
    "text": "i'm gonna go back here and take a look at well i'm gonna start taking a look at grafana first to see what's happening",
    "start": "4290239",
    "end": "4297600"
  },
  {
    "text": "uh i'm gonna check my well 15 minutes should be enough and i'm",
    "start": "4297600",
    "end": "4302880"
  },
  {
    "text": "gonna take a look at the upstream one oh this is super maxed out so i can see",
    "start": "4302880",
    "end": "4309440"
  },
  {
    "text": "everything oh okay so i'm looking at the upstream one",
    "start": "4309440",
    "end": "4314560"
  },
  {
    "text": "i can scroll down here i'm looking at the upstream cluster and something is telling me that the",
    "start": "4314560",
    "end": "4319760"
  },
  {
    "text": "cluster membership just dipped down right um the number of healthy members just",
    "start": "4319760",
    "end": "4326840"
  },
  {
    "text": "crashed no healthy members we can't connect to the back end so",
    "start": "4326840",
    "end": "4332800"
  },
  {
    "text": "let's also take a look at the admin interface if you guys remember when we talked about clusters",
    "start": "4332800",
    "end": "4339360"
  },
  {
    "text": "we said when we have clusters we have clusters definition plus endpoints ips",
    "start": "4339360",
    "end": "4345920"
  },
  {
    "text": "where we can connect to and if we look at the upstream one nothing is there there's no ips",
    "start": "4345920",
    "end": "4353440"
  },
  {
    "text": "so basically the envoy doesn't know about your backend you know it knows by definition that i need to talk to",
    "start": "4353440",
    "end": "4359760"
  },
  {
    "text": "something called upstream but i don't have the address right i just have the name no address kind of switch right so",
    "start": "4359760",
    "end": "4368000"
  },
  {
    "text": "everything is pointing to the fact that envoy doesn't have a way to connect to my back end and that can be because of",
    "start": "4368000",
    "end": "4375440"
  },
  {
    "text": "mainly one thing the service is not there or",
    "start": "4375440",
    "end": "4380960"
  },
  {
    "text": "the health check is failing and health cycle all endpoints are failing in this case we have only one ip",
    "start": "4380960",
    "end": "4387120"
  },
  {
    "text": "so when envoy evicts this host there's no way to connect to it at all",
    "start": "4387120",
    "end": "4392320"
  },
  {
    "text": "so let me just quick check the the list of services i have running oh",
    "start": "4392320",
    "end": "4400880"
  },
  {
    "text": "where is my back-end service here right super basic but i think",
    "start": "4400880",
    "end": "4406480"
  },
  {
    "text": "what's important to note here during this quick debugging journey is that envoy will give you some hints",
    "start": "4406480",
    "end": "4413120"
  },
  {
    "text": "to take a look somewhere else first going to tell you hey there's no healthy hosts like i have i'm having a trouble",
    "start": "4413120",
    "end": "4419760"
  },
  {
    "text": "they're connecting something you're going to go check your response flag it tells you a little bit more hey",
    "start": "4419760",
    "end": "4425040"
  },
  {
    "text": "maybe there is no endpoint and then you're gonna go check your grafana usually i mean if you can",
    "start": "4425040",
    "end": "4430640"
  },
  {
    "text": "connect to the admin interface that's fine if not you're gonna connect to grafana check if there is",
    "start": "4430640",
    "end": "4436239"
  },
  {
    "text": "data there if there is endpoint there is no if there is configuration we saw in graffana there's like a cluster",
    "start": "4436239",
    "end": "4441920"
  },
  {
    "text": "membership dip so we saw that something happened which is bad from there",
    "start": "4441920",
    "end": "4446960"
  },
  {
    "text": "you can you can have a hint on what's the next step in our scenario we just see",
    "start": "4446960",
    "end": "4452960"
  },
  {
    "text": "that there is no back-end service well that's an easy fix at least for us today",
    "start": "4452960",
    "end": "4458000"
  },
  {
    "text": "it's just to start back our upstream and that's all if we make a call again",
    "start": "4458000",
    "end": "4466400"
  },
  {
    "text": "amazing right so super quick debug exercise uh",
    "start": "4467440",
    "end": "4472719"
  },
  {
    "text": "going through the things yeah that was that was so tough one right oh man that",
    "start": "4472719",
    "end": "4479679"
  },
  {
    "text": "kept me from sleeping all night exactly yeah all right awesome um",
    "start": "4479679",
    "end": "4485760"
  },
  {
    "text": "i want to just uh start talking about a really important concept here we saw today the configuration of envoy",
    "start": "4485760",
    "end": "4492080"
  },
  {
    "text": "and we can open it again and see how it looks like right today we did something super simple",
    "start": "4492080",
    "end": "4499280"
  },
  {
    "text": "we just like had an hcm matching on a host directing traffic to an app stream to my",
    "start": "4499280",
    "end": "4505199"
  },
  {
    "text": "backend service and having xot and tls on it that's super straightforward but",
    "start": "4505199",
    "end": "4510480"
  },
  {
    "text": "we see that it's super complicated configuration and honestly maintaining that on file and",
    "start": "4510480",
    "end": "4516400"
  },
  {
    "text": "dealing with this it's no go you guys can do that it's that's one service imagine about like",
    "start": "4516400",
    "end": "4522640"
  },
  {
    "text": "you know 200. so this is why envoy and we mentioned it earlier envoy has a mechanism to push",
    "start": "4522640",
    "end": "4528960"
  },
  {
    "text": "data through uh what we call an xds server okay",
    "start": "4528960",
    "end": "4534000"
  },
  {
    "text": "which is basically your control plane server it's going to be a like just a server serving android",
    "start": "4534000",
    "end": "4539600"
  },
  {
    "text": "configuration and voice connects to fetch the configuration automatically update and be able to route traffic",
    "start": "4539600",
    "end": "4545440"
  },
  {
    "text": "right so it's really important to have a control plane and we know there is a lot of advantages to have you know to use a",
    "start": "4545440",
    "end": "4552800"
  },
  {
    "text": "control plane it's pretty straightforward if you want to use envoy for a simple exposing of one service it's fine to use",
    "start": "4552800",
    "end": "4559360"
  },
  {
    "text": "a file i would say now if you are doing you know enterprise",
    "start": "4559360",
    "end": "4564480"
  },
  {
    "text": "networking and application exposure and stuff like that you need you care about couple things",
    "start": "4564480",
    "end": "4570960"
  },
  {
    "text": "and i'll just you know just a summary here or thing that you really care about is mainly um i want to",
    "start": "4570960",
    "end": "4578400"
  },
  {
    "text": "simplify the interaction i want to have a way to just create i mean i'm a user what matters for me just i want to i",
    "start": "4578400",
    "end": "4585440"
  },
  {
    "text": "want to tell the system hey expose this service called upstream",
    "start": "4585440",
    "end": "4591520"
  },
  {
    "text": "through um like either a cloud native way of doing it using you know cr crds in in",
    "start": "4591520",
    "end": "4597760"
  },
  {
    "text": "communities i create my cr automatically a control plan will pick up the configuration and modify",
    "start": "4597760",
    "end": "4604320"
  },
  {
    "text": "my data plane which is envoy to do this so it's really important that simplify",
    "start": "4604320",
    "end": "4609920"
  },
  {
    "text": "the way to simplifying configuration and as part of the simplification another",
    "start": "4609920",
    "end": "4615120"
  },
  {
    "text": "point is mainly configuration validation right we were",
    "start": "4615120",
    "end": "4620560"
  },
  {
    "text": "doing modifications here i mean we helped you guys using git to kind of check out the configurations imagine if",
    "start": "4620560",
    "end": "4627440"
  },
  {
    "text": "you guys had to write this with the ammo and mess up one tab right",
    "start": "4627440",
    "end": "4632560"
  },
  {
    "text": "and restart and somehow just push your configuration that would be a mess bringing all your infrastructure down",
    "start": "4632560",
    "end": "4637840"
  },
  {
    "text": "for like a real real silly mistake so having configuration validation is a key component that control planes",
    "start": "4637840",
    "end": "4644640"
  },
  {
    "text": "provide you're going to have a cr pushed this cr going to be validated by either you know kubernetes schemas",
    "start": "4644640",
    "end": "4652320"
  },
  {
    "text": "in in the crs or you're going to have like a backend type validation that will take this configuration that you provided compared to whatever exists if",
    "start": "4652320",
    "end": "4659600"
  },
  {
    "text": "you see that we're defining another host on top of a host that's already defined for example this is a problem i don't",
    "start": "4659600",
    "end": "4664800"
  },
  {
    "text": "want this i don't want to do that so i'm going to return this configuration to the client saying hey this already",
    "start": "4664800",
    "end": "4670320"
  },
  {
    "text": "exists figure out your problem again also you know canary upgrades and",
    "start": "4670320",
    "end": "4677840"
  },
  {
    "text": "so on if you have a decoupling between your multiple version of envoy with a control plane you can always you know",
    "start": "4677840",
    "end": "4684560"
  },
  {
    "text": "let's say it's rare we didn't void to change stuff but let's say tomorrow they migrated to",
    "start": "4684560",
    "end": "4691120"
  },
  {
    "text": "the new version of envoy like we did between v2 and v3 if you guys familiar with enjoy a bit it was a change of app",
    "start": "4691120",
    "end": "4698080"
  },
  {
    "text": "of api so if you have a control plane that understand this change automatically convert an old",
    "start": "4698080",
    "end": "4704239"
  },
  {
    "text": "configuration to a new version of an envoy api it will make a way smarter",
    "start": "4704239",
    "end": "4710800"
  },
  {
    "text": "upgrade to your system instead of like modifying every single file you know thousand times so with this",
    "start": "4710800",
    "end": "4717360"
  },
  {
    "text": "being said i really invite you to look at a control plane for your envoy okay",
    "start": "4717360",
    "end": "4722640"
  },
  {
    "text": "so it will avoid you the headache of going through manual change of files or",
    "start": "4722640",
    "end": "4728800"
  },
  {
    "text": "restart and so on um we have an open source solution called blue edge",
    "start": "4728800",
    "end": "4734480"
  },
  {
    "text": "that's is a simplified control plane uh of on top of envoy where you can just",
    "start": "4734480",
    "end": "4740560"
  },
  {
    "text": "create crs on communities and that transform your cr into an envoy",
    "start": "4740560",
    "end": "4745840"
  },
  {
    "text": "configuration basically all we did today that can be do done through through crs um all right so i'm gonna",
    "start": "4745840",
    "end": "4754960"
  },
  {
    "text": "give back the mic to jim so you can give us a",
    "start": "4754960",
    "end": "4760080"
  },
  {
    "text": "bit more probably a closing statement absolutely",
    "start": "4760080",
    "end": "4766080"
  },
  {
    "text": "uh so yeah we have had some uh we've had some questions come in over the chat and",
    "start": "4766080",
    "end": "4771360"
  },
  {
    "text": "uh i think uh alex is answering those now so we appreciate that",
    "start": "4771360",
    "end": "4776800"
  },
  {
    "text": "all right um if you would like to continue this conversation so adam and i will be",
    "start": "4776800",
    "end": "4783280"
  },
  {
    "text": "available immediately after this we'll also have a number of people who understand envoy much much better than i",
    "start": "4783280",
    "end": "4789760"
  },
  {
    "text": "do at our at our booth um s10 and we'll be happy to talk to you about uh more",
    "start": "4789760",
    "end": "4796080"
  },
  {
    "text": "more details about envoy there and you can win a millennium falcon lego",
    "start": "4796080",
    "end": "4802000"
  },
  {
    "text": "set and all that good stuff all right now some of you will be interested in this",
    "start": "4802000",
    "end": "4807440"
  },
  {
    "text": "if you would like to take the exam to get your envoy foundations badge",
    "start": "4807440",
    "end": "4813280"
  },
  {
    "text": "uh there are some additional instructions here again you need 80 you can take the test multiple times but",
    "start": "4813280",
    "end": "4819440"
  },
  {
    "text": "you'll need a different email address it's just a google form uh most of the questions are just multiple choice and",
    "start": "4819440",
    "end": "4825840"
  },
  {
    "text": "they're going to be drawn directly from the material that we've presented uh during this workshop so if you would",
    "start": "4825840",
    "end": "4832320"
  },
  {
    "text": "like me in a bit do you think we can zoom in the link there or select what's that just to zoom in a bit i",
    "start": "4832320",
    "end": "4838719"
  },
  {
    "text": "don't know oh i see i see yep um so um this is a this is a program that uh",
    "start": "4838719",
    "end": "4846639"
  },
  {
    "text": "that we've been running for a while at solo with a number of open source technologies istio",
    "start": "4846639",
    "end": "4851840"
  },
  {
    "text": "ebpf being the most notable ones but if you see the link there at the bottom or you can scan the qr code",
    "start": "4851840",
    "end": "4858800"
  },
  {
    "text": "the link to get to the google form that is the exam is uh bitly slash envoy dash",
    "start": "4858800",
    "end": "4864480"
  },
  {
    "text": "exam again bitly slash envoy dash exam and so you can uh you can do that you'll",
    "start": "4864480",
    "end": "4871040"
  },
  {
    "text": "also have access if you want to continue to play around with your environments and maybe explore",
    "start": "4871040",
    "end": "4877360"
  },
  {
    "text": "some things that you didn't get to do as deeply as you would like in the course of the discussion here you can actually",
    "start": "4877360",
    "end": "4883280"
  },
  {
    "text": "restart the track if you would like to and you have access to it for probably",
    "start": "4883280",
    "end": "4888560"
  },
  {
    "text": "another two and a half hours or so uh and certainly if you you know if you want to get access to it later just",
    "start": "4888560",
    "end": "4894639"
  },
  {
    "text": "contact us at solo we can we can set you up to be able to to do it on your own",
    "start": "4894639",
    "end": "4899840"
  },
  {
    "text": "okay and uh again did i mention we're hiring so yep you're passionate about",
    "start": "4899840",
    "end": "4904960"
  },
  {
    "text": "application networking we would love to talk with you about uh about working at solo okay i think we",
    "start": "4904960",
    "end": "4912800"
  },
  {
    "text": "have yeah and i want to really mention something that was like a one-on-one basic debugging yes uh foundation",
    "start": "4912800",
    "end": "4920880"
  },
  {
    "text": "and envoy has a lot more to offer at different levels and we're planning on doing something more intermediate and",
    "start": "4920880",
    "end": "4927120"
  },
  {
    "text": "something more expert in the future so yeah please just uh check out our website or reach us to us i'll tell you",
    "start": "4927120",
    "end": "4934560"
  },
  {
    "text": "if there is any update there but yeah we hope to see each one of you in our next workshop uh envoy envoy workshop we have",
    "start": "4934560",
    "end": "4942080"
  },
  {
    "text": "about five minutes left if there's anyone who has any questions you'd like to ask at this time there are microphones set up in the aisles feel",
    "start": "4942080",
    "end": "4948800"
  },
  {
    "text": "free to ask us most anything",
    "start": "4948800",
    "end": "4954080"
  },
  {
    "text": "all right go ahead",
    "start": "4955840",
    "end": "4959840"
  },
  {
    "text": "uh can we can we get the mics live up the front mike live here",
    "start": "4962560",
    "end": "4967840"
  },
  {
    "text": "okay try again um hi uh thanks for your great workshop um",
    "start": "4967840",
    "end": "4975360"
  },
  {
    "text": "i have a question or something that was always bothering me was it possible to",
    "start": "4975360",
    "end": "4980480"
  },
  {
    "text": "actually see the requests coming into envoy and debug them",
    "start": "4980480",
    "end": "4986480"
  },
  {
    "text": "because this was always something that didn't manage to do that",
    "start": "4986480",
    "end": "4991440"
  },
  {
    "text": "go ahead so once you see them you mean like uh like",
    "start": "4991920",
    "end": "4997679"
  },
  {
    "text": "like i just understand like what do you mean by seed and because you can obviously through metrics you can always",
    "start": "4997679",
    "end": "5003199"
  },
  {
    "text": "see multiple filters sometimes expose different different metrics right so if it's a filter chain you can always see",
    "start": "5003199",
    "end": "5010000"
  },
  {
    "text": "that the listener got the connection um and then you can go to every single",
    "start": "5010000",
    "end": "5015679"
  },
  {
    "text": "filter and see if it just intercepted the connection now if you're looking into like a specific request and how it's",
    "start": "5015679",
    "end": "5023520"
  },
  {
    "text": "flying into the filter chain definitely logs right well access logs it's something simple but you can always",
    "start": "5023520",
    "end": "5030239"
  },
  {
    "text": "turn on debug likes on the debug log sorry on on android itself envoy every",
    "start": "5030239",
    "end": "5035840"
  },
  {
    "text": "time it turns out to request it it puts like a request id right so using the request",
    "start": "5035840",
    "end": "5042560"
  },
  {
    "text": "id that you're trying to track you're gonna be able to track it down all the way down to uh to basically your your backend so i",
    "start": "5042560",
    "end": "5050560"
  },
  {
    "text": "would say logs is is the way to do it yeah let me offer one other piece of advice too there there is an there is a filter in",
    "start": "5050560",
    "end": "5057120"
  },
  {
    "text": "the envoy library called the tap tab filter yes and the tap filter basically allows you at any point to tap into the",
    "start": "5057120",
    "end": "5063280"
  },
  {
    "text": "request chain and to see what the state of the request is at that moment so that might be one that i think to address",
    "start": "5063280",
    "end": "5069679"
  },
  {
    "text": "your specific question the tap filter might be something that would help you okay great thanks all right certainly",
    "start": "5069679",
    "end": "5075280"
  },
  {
    "text": "thank you all right anyone else",
    "start": "5075280",
    "end": "5080480"
  },
  {
    "text": "all right let's let's put a wrap on it then thank you so much for being here uh as i said at the opening we really",
    "start": "5082000",
    "end": "5087840"
  },
  {
    "text": "appreciate talking to three-dimensional people and uh we look forward to uh to",
    "start": "5087840",
    "end": "5092960"
  },
  {
    "text": "seeing you at the booth and seeing you around the show have a great conference thank you everyone",
    "start": "5092960",
    "end": "5099320"
  }
]