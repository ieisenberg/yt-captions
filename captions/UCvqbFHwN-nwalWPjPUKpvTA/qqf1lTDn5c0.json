[
  {
    "text": "and here we go hi everyone thanks so much for joining us today uh today's",
    "start": "2600",
    "end": "9880"
  },
  {
    "text": "cncf live webinar data protection guard rails using open policy agent I'm Libby",
    "start": "9880",
    "end": "15440"
  },
  {
    "text": "Schulz and I'll be moderating today's webinar I'm going to read our code of conduct and then hand over to Joey Lei",
    "start": "15440",
    "end": "20880"
  },
  {
    "text": "with Caston VI beam beam and Andrew ekner with sta a few housekeeping items",
    "start": "20880",
    "end": "26519"
  },
  {
    "text": "before we get started during the webinar you are not able to speak as an attendee but there's a chat box that I think",
    "start": "26519",
    "end": "32000"
  },
  {
    "text": "you've all found where you can drop your questions and um we'll get to as many as we can at the end or intermittently if",
    "start": "32000",
    "end": "39040"
  },
  {
    "text": "they're um if we have time this is an official webinar of the cncf and as such",
    "start": "39040",
    "end": "44360"
  },
  {
    "text": "is subject to the cncf code of conduct please do not add anything to the chat or questions that would be in violation",
    "start": "44360",
    "end": "50399"
  },
  {
    "text": "of that code of conduct basically please be respectful of all of your fellow participants and presenters please also",
    "start": "50399",
    "end": "57399"
  },
  {
    "text": "note that the recording and slides will be posted later today day to the cncf online programs page at community. cncf",
    "start": "57399",
    "end": "64559"
  },
  {
    "text": "doio under online programs they're also available via your registration link and the recording will also be available on",
    "start": "64559",
    "end": "70920"
  },
  {
    "text": "our online programs YouTube playlist with that I will hand things over to Joey and Anders to kick off today's",
    "start": "70920",
    "end": "79280"
  },
  {
    "text": "presentation thank you very much Libby and good morning good evening everybody depending on where you are my name is",
    "start": "79280",
    "end": "85400"
  },
  {
    "text": "Joey Le I'm one of the product managers with Casten byv I'm joined here by Anders ner who's a developer Advocate",
    "start": "85400",
    "end": "91439"
  },
  {
    "text": "from styra and we're going to talking to you about A New Concept called the data",
    "start": "91439",
    "end": "97920"
  },
  {
    "text": "protection guard rails uh which is focused on helping misconfigurations with your data",
    "start": "97920",
    "end": "103880"
  },
  {
    "text": "protection environment so think of backups think of Disaster Recovery Solutions um and we're going to talk",
    "start": "103880",
    "end": "109399"
  },
  {
    "text": "about how to do that with the open policy agent policy engine um and I I'll",
    "start": "109399",
    "end": "114560"
  },
  {
    "text": "let Anders um introduce himself yeah thanks yoy hey I'm Anders and uh work as",
    "start": "114560",
    "end": "120399"
  },
  {
    "text": "a developer advocate for styra which is the creators of the open policy agent",
    "start": "120399",
    "end": "126600"
  },
  {
    "text": "project uh so yeah today we'll talk about using Opa for the purpose of data",
    "start": "126600",
    "end": "132440"
  },
  {
    "text": "protection and uh I'll be covering like the OPA side of things and uh Joey will",
    "start": "132440",
    "end": "138959"
  },
  {
    "text": "talk more on like the topic of of data protection so uh just to get",
    "start": "138959",
    "end": "146040"
  },
  {
    "text": "started we'll see here what's going on uh okay so before we get uh started on on",
    "start": "146040",
    "end": "154080"
  },
  {
    "text": "Opa uh what is policy as code or what is even policy so opai is an open source",
    "start": "154080",
    "end": "160360"
  },
  {
    "text": "general purpose policy engine so before we uh dive into what that entails we can",
    "start": "160360",
    "end": "168720"
  },
  {
    "text": "it's a it's a good good to remind ourselves what policy is and and what policy as code is so basically policy is",
    "start": "168720",
    "end": "176560"
  },
  {
    "text": "a set of rules uh and these rules could be anything from organizational",
    "start": "176560",
    "end": "182200"
  },
  {
    "text": "rules uh permissions and uh for authorization uh kubernetes admission",
    "start": "182200",
    "end": "188799"
  },
  {
    "text": "control given rules on what can be deployed or not infrastructure policy",
    "start": "188799",
    "end": "194200"
  },
  {
    "text": "and infrastructure rules what kind of what kind of instance types should we allow what kind of security",
    "start": "194200",
    "end": "200280"
  },
  {
    "text": "configuration and so on uh build and deployment rules and policy is something",
    "start": "200280",
    "end": "206599"
  },
  {
    "text": "we're going to cover today as well we will show how we can use like uh policy",
    "start": "206599",
    "end": "213319"
  },
  {
    "text": "as part of our C cicd pipeline to enforce things that uh that apply to the",
    "start": "213319",
    "end": "220799"
  },
  {
    "text": "data protection space uh data filtering is another uh item for policy and",
    "start": "220799",
    "end": "227760"
  },
  {
    "text": "there's so much more so basically anywhere you have rules uh that's pretty",
    "start": "227760",
    "end": "233640"
  },
  {
    "text": "much where Opa shines uh so that's policy and why would",
    "start": "233640",
    "end": "239000"
  },
  {
    "text": "we treat this as code uh the simple answer is basically that creating policy as code it kind of",
    "start": "239000",
    "end": "246239"
  },
  {
    "text": "provides all the benefits of treating anything as code so we can work with our policy I.E our rules uh in a",
    "start": "246239",
    "end": "254280"
  },
  {
    "text": "collaborative manner so we can work with cool requests we can uh test our policies in isolation we can work with",
    "start": "254280",
    "end": "261639"
  },
  {
    "text": "tooling like anal static analysis lters and so on so uh no more PDF documents",
    "start": "261639",
    "end": "269080"
  },
  {
    "text": "our policy should be code just as anything else and when we talk about policy as",
    "start": "269080",
    "end": "274800"
  },
  {
    "text": "code we often talk about decoupling meaning that just as we can",
    "start": "274800",
    "end": "280520"
  },
  {
    "text": "uh decouple storage from our application and move that into a dedicated database",
    "start": "280520",
    "end": "287039"
  },
  {
    "text": "we can of want to treat policy the same way so ideally our uh applications and",
    "start": "287039",
    "end": "292600"
  },
  {
    "text": "business logic should not need to deal with uh authorization or perhaps not even users but uh that should be treated",
    "start": "292600",
    "end": "301680"
  },
  {
    "text": "uh by a separate system so that kind of decouples and removes responsibility",
    "start": "301680",
    "end": "308039"
  },
  {
    "text": "from our applications and into a dedicated uh entity like",
    "start": "308039",
    "end": "314120"
  },
  {
    "text": "Opa all right so that that's policy and that's uh what a policy has code so what",
    "start": "314120",
    "end": "319440"
  },
  {
    "text": "is Opa then so Opa is kind of an implementation uh for all all these ideas it's an open source general",
    "start": "319440",
    "end": "326479"
  },
  {
    "text": "purpose policy engine and as of February last year it's a graduated cncf project",
    "start": "326479",
    "end": "333680"
  },
  {
    "text": "it offers a unified tool set and a framework for working with policy across the whole stack so there's uh even if",
    "start": "333680",
    "end": "341400"
  },
  {
    "text": "the topic of today here is uh data protection Opa is general purpose again",
    "start": "341400",
    "end": "347680"
  },
  {
    "text": "so it's meant to to cover all of the all of these places where we might need rules so the idea is to bring a unified",
    "start": "347680",
    "end": "355400"
  },
  {
    "text": "platform framework for working with rules and policy in Opa decouples policy",
    "start": "355400",
    "end": "361720"
  },
  {
    "text": "from your application logic so your application would commonly query Opa rather than to uh to do things like app",
    "start": "361720",
    "end": "369120"
  },
  {
    "text": "authorization or whatnot uh one thing to note is that Opa",
    "start": "369120",
    "end": "375720"
  },
  {
    "text": "separates the actual decision from enforcing it so when you query Opa for a",
    "start": "375720",
    "end": "381680"
  },
  {
    "text": "decision Opa is going to give you a response but it's still up to you to do something with that response that is the",
    "start": "381680",
    "end": "388280"
  },
  {
    "text": "actual enforcement and that is of course highly dependent on the kind of context",
    "start": "388280",
    "end": "393560"
  },
  {
    "text": "you're you're working in so one type of enforcement which we're going to look into later is uh for example in a in a",
    "start": "393560",
    "end": "402199"
  },
  {
    "text": "build pipeline where you might want to say that you cannot merge a PR unless uh",
    "start": "402199",
    "end": "408919"
  },
  {
    "text": "this manifest or this resource passes all the policy shaks and these policy checks are",
    "start": "408919",
    "end": "415520"
  },
  {
    "text": "written in a declarative language called Rego and that's kind of glue uh that",
    "start": "415520",
    "end": "421319"
  },
  {
    "text": "kind of binds all these diverse and different kind of policies together and",
    "start": "421319",
    "end": "426440"
  },
  {
    "text": "we'll uh look into uh what that looks like a bit later",
    "start": "426440",
    "end": "431599"
  },
  {
    "text": "too so Opa again it's an open source project it's got a a a huge Community a",
    "start": "431599",
    "end": "438599"
  },
  {
    "text": "big ecosystem of of tools and uh and whatnot there's currently over 250",
    "start": "438599",
    "end": "445720"
  },
  {
    "text": "contributors to the project over 70 integration is listed uh and that's is",
    "start": "445720",
    "end": "452199"
  },
  {
    "text": "everything from like job applications PHP databases Kafka and whatnot pretty",
    "start": "452199",
    "end": "458639"
  },
  {
    "text": "much anywhere uh where there's a need for policy there's probably going to be an",
    "start": "458639",
    "end": "464199"
  },
  {
    "text": "existing integration and there are more added uh pretty much",
    "start": "464199",
    "end": "469720"
  },
  {
    "text": "weekly so uh OPI is used by over 800 GitHub project so it's it's very common",
    "start": "469720",
    "end": "475840"
  },
  {
    "text": "to integrate uh for authorization or for any of these other project or",
    "start": "475840",
    "end": "482440"
  },
  {
    "text": "purposes uh 6,600 GitHub Stars almost 6,000 slack users and more than 130",
    "start": "482440",
    "end": "489199"
  },
  {
    "text": "million downloads and an ecosystem which includes not just Opa the actual policy",
    "start": "489199",
    "end": "495280"
  },
  {
    "text": "engine but also things like conf test for running policy against uh files",
    "start": "495280",
    "end": "500879"
  },
  {
    "text": "there's the gatekeeper uh project which is uh Opa applied to to the kuber nandes",
    "start": "500879",
    "end": "507599"
  },
  {
    "text": "admission control space there are editor Integrations for vs code intellig and so",
    "start": "507599",
    "end": "513279"
  },
  {
    "text": "on so it's a big ecosystem and just to kind of summarize",
    "start": "513279",
    "end": "518640"
  },
  {
    "text": "what Opa is uh or what what the benefits Opa brings I like this quote from Kelsey",
    "start": "518640",
    "end": "524240"
  },
  {
    "text": "hiow so the open policy agent project is super dope I finally have a framework",
    "start": "524240",
    "end": "529680"
  },
  {
    "text": "that helps me translate written security policies into executable code for every",
    "start": "529680",
    "end": "534760"
  },
  {
    "text": "layer of the stack that's kind of what Opa does and what Opa is",
    "start": "534760",
    "end": "540839"
  },
  {
    "text": "so if that is what Opa does how does it work I think there's two aspects that I",
    "start": "540839",
    "end": "547480"
  },
  {
    "text": "tend to focus on and uh those are the policy decision model and it's Rego the",
    "start": "547480",
    "end": "554200"
  },
  {
    "text": "policy language so if we start with a policy decision model and this is kind of key",
    "start": "554200",
    "end": "560079"
  },
  {
    "text": "to how can Opa integrate with all these projects that they really weren't built",
    "start": "560079",
    "end": "566399"
  },
  {
    "text": "with Opa in mind uh and of course they are enormously different from each other so",
    "start": "566399",
    "end": "573440"
  },
  {
    "text": "very a very heterogeneous Tex stack here with everything from like Linux pad",
    "start": "573440",
    "end": "578640"
  },
  {
    "text": "modules to Kafka or databases so the way it works is that",
    "start": "578640",
    "end": "584560"
  },
  {
    "text": "any service and and by service we have a very broad definition it kind of covers all of these things it's basically",
    "start": "584560",
    "end": "590680"
  },
  {
    "text": "anything that can service a request from a user or another service when that",
    "start": "590680",
    "end": "596200"
  },
  {
    "text": "request uh is received in the service uh the service passes that request to",
    "start": "596200",
    "end": "603640"
  },
  {
    "text": "Opa in order to have Opa make a policy decision and this policy query is just",
    "start": "603640",
    "end": "610600"
  },
  {
    "text": "basically any Json any Json value and opad uh looks at that uh query and based",
    "start": "610600",
    "end": "618959"
  },
  {
    "text": "on the policy and based on any data it has loaded it makes a policy decision and this policy decision is also just",
    "start": "618959",
    "end": "626320"
  },
  {
    "text": "Json so pretty much any service that understands Jason can communicate with",
    "start": "626320",
    "end": "633399"
  },
  {
    "text": "Opa so the next aspect uh which makes Opa work uh for all these different",
    "start": "633399",
    "end": "640120"
  },
  {
    "text": "Technologies I'd say that's Rego it's a declarative high level policy",
    "start": "640120",
    "end": "645880"
  },
  {
    "text": "language uh which is uh generic enough to work with pretty much any uh Json",
    "start": "645880",
    "end": "653519"
  },
  {
    "text": "data or jaml data uh while it's still uh tailor made for the policy space and it",
    "start": "653519",
    "end": "661440"
  },
  {
    "text": "allows you to describe policy across the whole Cloud native stack and again just",
    "start": "661440",
    "end": "666480"
  },
  {
    "text": "like a real world policy a Rego policy is just a number of rules these rules they come to return uh",
    "start": "666480",
    "end": "674639"
  },
  {
    "text": "true or false should the user be allowed or not but it could return any type of uh data available in Json so you could",
    "start": "674639",
    "end": "681800"
  },
  {
    "text": "return strings lists objects and and whatnot uh opai includes a testing",
    "start": "681800",
    "end": "688480"
  },
  {
    "text": "framework so you can run tests uh directly on your policy and you can kind of build confidence in in your policy",
    "start": "688480",
    "end": "695360"
  },
  {
    "text": "just as you would with any other code it's a Well documented project so check out the official docs and there's",
    "start": "695360",
    "end": "702760"
  },
  {
    "text": "also a playground so you can try you can try policy offering without even having uh Opa",
    "start": "702760",
    "end": "709920"
  },
  {
    "text": "installed so with that I'm going to hop over here to uh an editor I'm just",
    "start": "709920",
    "end": "716839"
  },
  {
    "text": "gonna open that just to just to kind of show you the basics of Rego I hope you",
    "start": "716839",
    "end": "723000"
  },
  {
    "text": "can all see my screen here I'm just going to say policy. Rego I'm going to create a Rego file first thing to do is",
    "start": "723000",
    "end": "730760"
  },
  {
    "text": "to create a package and this is similar to a namespace and other languages just",
    "start": "730760",
    "end": "736040"
  },
  {
    "text": "going to call it policy and uh and now let's write our",
    "start": "736040",
    "end": "741240"
  },
  {
    "text": "first rule so what a rule is the first thing we do is to just provide a name in",
    "start": "741240",
    "end": "747399"
  },
  {
    "text": "this case I'm going to I'm going to name my r Ru allow and the way rule",
    "start": "747399",
    "end": "752440"
  },
  {
    "text": "evaluation works is basically you have the rule head here which includes the name and optionally you provide a a a",
    "start": "752440",
    "end": "762000"
  },
  {
    "text": "return value so in this case we might want to say that allow is equal to",
    "start": "762000",
    "end": "767240"
  },
  {
    "text": "true if all the conditions or assertions provided in the body here are also equal",
    "start": "767240",
    "end": "773760"
  },
  {
    "text": "to true so if we do something silly like one is equal to one yeah that's",
    "start": "773760",
    "end": "779279"
  },
  {
    "text": "obviously true so if we now go and we evaluate the allow rule we should hopefully see",
    "start": "779279",
    "end": "787639"
  },
  {
    "text": "that uh this this rule evaluates to True uh",
    "start": "787639",
    "end": "793440"
  },
  {
    "text": "so I'm going to load I'm going to run Opa eval here which is a simple command line tool to evaluate any value from a",
    "start": "793440",
    "end": "801680"
  },
  {
    "text": "policy I'm just going to say uh data policy",
    "start": "801680",
    "end": "807920"
  },
  {
    "text": "allow and we can format that a little nicer just going to say pretty and we can see that indeed this",
    "start": "807920",
    "end": "815600"
  },
  {
    "text": "is true so if we change this to something that's not true we can see",
    "start": "815600",
    "end": "820680"
  },
  {
    "text": "that uh the result is now undefined so uh when when a rule does not evaluate",
    "start": "820680",
    "end": "829120"
  },
  {
    "text": "Opa simply says like this is undefined so if we want to ensure that there's some value return we can provide a",
    "start": "829120",
    "end": "835160"
  },
  {
    "text": "default one so we can say by default allow is equal to false and now we see that we will always",
    "start": "835160",
    "end": "843279"
  },
  {
    "text": "get something back we we have an uh we have either true or false so the user is",
    "start": "843279",
    "end": "848440"
  },
  {
    "text": "either allowed or is not what we might want to do here is of course uh have something more uh",
    "start": "848440",
    "end": "856079"
  },
  {
    "text": "realistic so we might want to add again remember that when we query Opa we can",
    "start": "856079",
    "end": "862000"
  },
  {
    "text": "provide any type of value so we could uh or any type of Json document so I'm",
    "start": "862000",
    "end": "867240"
  },
  {
    "text": "going to add an input a document here to just simulate some",
    "start": "867240",
    "end": "872880"
  },
  {
    "text": "data I'm going to say user and and that user has some",
    "start": "872880",
    "end": "879720"
  },
  {
    "text": "roles and one of those roles is going to be the admin role and I'm going to have",
    "start": "879720",
    "end": "884839"
  },
  {
    "text": "my policy here check that uh if one of the",
    "start": "884839",
    "end": "890519"
  },
  {
    "text": "roles uh is admin say input user",
    "start": "890519",
    "end": "896800"
  },
  {
    "text": "roles I'm going to say admin in input user roles and for this",
    "start": "896800",
    "end": "903120"
  },
  {
    "text": "I'm gonna have to import the in",
    "start": "903120",
    "end": "907800"
  },
  {
    "text": "keyword is part of the future keywords uh so like that so if the user is in the",
    "start": "908240",
    "end": "916920"
  },
  {
    "text": "admin or group or if he has the admin role this should be",
    "start": "916920",
    "end": "923279"
  },
  {
    "text": "allowed and we can see oh right because we did not provide the input file here",
    "start": "923279",
    "end": "928680"
  },
  {
    "text": "so I'm going to say Jon and we can see now that",
    "start": "928680",
    "end": "934120"
  },
  {
    "text": "providing this we see that op allow evaluates the rule and Returns the",
    "start": "934120",
    "end": "939440"
  },
  {
    "text": "provided return value and remember here that this could be any Json value so we",
    "start": "939440",
    "end": "944519"
  },
  {
    "text": "could say uh we could return a string that said yes or no or even a complex",
    "start": "944519",
    "end": "951440"
  },
  {
    "text": "nested object but in this case I'm just going to uh I'm just going to settle for",
    "start": "951440",
    "end": "956639"
  },
  {
    "text": "True here uh so if we change the the groups here to be or the roles let's say",
    "start": "956639",
    "end": "963959"
  },
  {
    "text": "this is a developer and we evaluate this again we'll see that the the decision is",
    "start": "963959",
    "end": "969920"
  },
  {
    "text": "now false because the user is no longer part of the admin group so that's",
    "start": "969920",
    "end": "975040"
  },
  {
    "text": "basically super simple policy or the anatomy of a policy the anatomy of a",
    "start": "975040",
    "end": "981720"
  },
  {
    "text": "rule in a few minutes all right so I'm going to head",
    "start": "981720",
    "end": "987480"
  },
  {
    "text": "back to the presentation here",
    "start": "987480",
    "end": "990920"
  },
  {
    "text": "uh and I think it's over to you Joey hey Andrew there's a question in",
    "start": "992639",
    "end": "998800"
  },
  {
    "text": "the chat U from Patrick could we integrate Opa with Az your active",
    "start": "998800",
    "end": "1004560"
  },
  {
    "text": "directory oh yeah for sure so pretty much anything that can be that exports",
    "start": "1004560",
    "end": "1011600"
  },
  {
    "text": "anything as Json or jaml or that can be transformed to do so is is definitely a",
    "start": "1011600",
    "end": "1018480"
  },
  {
    "text": "viable integration so uh for Asher ad or any active directory yeah you can you",
    "start": "1018480",
    "end": "1026079"
  },
  {
    "text": "can definitely do so I think like uh the way you'd commonly do it is to either uh",
    "start": "1026079",
    "end": "1032438"
  },
  {
    "text": "provide the data from from your active directory in an access token or",
    "start": "1032439",
    "end": "1038079"
  },
  {
    "text": "something similar maybe a Json web token that is included uh as part of the query",
    "start": "1038079",
    "end": "1044079"
  },
  {
    "text": "but you can also provide data uh beforehand to Opa so Opa is an inmemory",
    "start": "1044079",
    "end": "1049919"
  },
  {
    "text": "store so you could kind of mirror parts of your active directory uh with all any data that",
    "start": "1049919",
    "end": "1056280"
  },
  {
    "text": "might be relevant for uh policy",
    "start": "1056280",
    "end": "1060520"
  },
  {
    "text": "evaluation all right cool hey ERS can I just share my screen yep instead",
    "start": "1061400",
    "end": "1069400"
  },
  {
    "text": "okay right you guys can see that okay so let's talk about guard rails for data",
    "start": "1071160",
    "end": "1077000"
  },
  {
    "text": "protection now the one thing that to to learn about data protection is it's all",
    "start": "1077000",
    "end": "1082440"
  },
  {
    "text": "about the application data itself and the backups of application data and",
    "start": "1082440",
    "end": "1087760"
  },
  {
    "text": "historically you know data data protection and data Management Solutions they're historically focused on",
    "start": "1087760",
    "end": "1093520"
  },
  {
    "text": "availability right so the quick recovery the disaster recovery the business continuity of application data but",
    "start": "1093520",
    "end": "1100080"
  },
  {
    "text": "there's more to it than that you know the security attacks these days are very",
    "start": "1100080",
    "end": "1105440"
  },
  {
    "text": "um full Compromise type of attacks so things like exfiltration things like",
    "start": "1105440",
    "end": "1110600"
  },
  {
    "text": "ransomware the concerns that people have been their customers have been raising to us has largely been full spectrum",
    "start": "1110600",
    "end": "1118159"
  },
  {
    "text": "confidentiality issues with the Seft of data the privacy of data Integrity",
    "start": "1118159",
    "end": "1123320"
  },
  {
    "text": "issues that really affect is the data that the application presenting is it legitimate or is it you know manipulated",
    "start": "1123320",
    "end": "1130039"
  },
  {
    "text": "by an adversary or is it corrupted uh in the case of an Integrity attack in",
    "start": "1130039",
    "end": "1135200"
  },
  {
    "text": "addition to the availability requirements and so we we need to start thinking about the data protection",
    "start": "1135200",
    "end": "1141840"
  },
  {
    "text": "objectives much earlier in the process historically it's a day two operation right let production be deployed Let It",
    "start": "1141840",
    "end": "1148360"
  },
  {
    "text": "Be provisioned and hand off that responsibility to a data Protection Team or you know an operations engineering",
    "start": "1148360",
    "end": "1155600"
  },
  {
    "text": "staff right there are definitely techniques to get the business to start thinking about the data protection",
    "start": "1155600",
    "end": "1161600"
  },
  {
    "text": "objectives well early and Advance early in the death cycle and these are a few things that we want to show you now",
    "start": "1161600",
    "end": "1167960"
  },
  {
    "text": "historically there are two ways to control and enforce access to different objects right we have role based access",
    "start": "1167960",
    "end": "1174760"
  },
  {
    "text": "control that's more of a granting an authorization technique to say hey this",
    "start": "1174760",
    "end": "1180240"
  },
  {
    "text": "this admin or this unprivileged user can read you know the PVCs the stateful data",
    "start": "1180240",
    "end": "1186080"
  },
  {
    "text": "the services the secrets um but sometimes we we want to actually enforce",
    "start": "1186080",
    "end": "1191200"
  },
  {
    "text": "or deny behaviors and this is going to be more specific to the data protection objectives think of the recovery Point",
    "start": "1191200",
    "end": "1198039"
  },
  {
    "text": "objective the RPO think of the RTO the recovery time objectives retention so if",
    "start": "1198039",
    "end": "1203159"
  },
  {
    "text": "you're in a specific industry subject to compliance like Hippa or you know PCI",
    "start": "1203159",
    "end": "1209039"
  },
  {
    "text": "compliance you have specific retention requirements um but if you have confidential or sensitive data that you",
    "start": "1209039",
    "end": "1214320"
  },
  {
    "text": "know is going to be a target for an adversary you're going to want something called amable backups and so uh it's",
    "start": "1214320",
    "end": "1221200"
  },
  {
    "text": "really important to enforce the existence of these objectives upon your data protection infrastructure as code",
    "start": "1221200",
    "end": "1227960"
  },
  {
    "text": "and we're going to just show few pseudo code examples um about how you would Implement those guard rails using Opa",
    "start": "1227960",
    "end": "1235679"
  },
  {
    "text": "itself so the first example that we have is if you're if you're a developer and",
    "start": "1235679",
    "end": "1242600"
  },
  {
    "text": "you're um if you're using a technique called gitops now gitops is where we",
    "start": "1242600",
    "end": "1249799"
  },
  {
    "text": "check sort infrastructure as code into a git repository and that represents the",
    "start": "1249799",
    "end": "1254960"
  },
  {
    "text": "source of Truth for how a new production environment should be stood up a new autoscaled node should be stood up and",
    "start": "1254960",
    "end": "1261760"
  },
  {
    "text": "that includes of course your production infrastructures code right your stle sets your PVCs your secrets your network",
    "start": "1261760",
    "end": "1267480"
  },
  {
    "text": "policies it also includes your data protection infrastructure as code and so",
    "start": "1267480",
    "end": "1273000"
  },
  {
    "text": "if if this code is peer reviewed you can also have it checked by the policy engine right the OPA policy engine and",
    "start": "1273000",
    "end": "1279279"
  },
  {
    "text": "it's going to be inspecting your data protection code to see that it's meeting the right data protection objectives so",
    "start": "1279279",
    "end": "1285760"
  },
  {
    "text": "you can see in the example we have here on the right we have some example policies and an example backup Target in",
    "start": "1285760",
    "end": "1292799"
  },
  {
    "text": "that policy you would want to look for things like 321 3 to1 is where we are",
    "start": "1292799",
    "end": "1298279"
  },
  {
    "text": "ensuring that we have multiple copies of data we've exported it to an off-site Cloud location you know for Disaster",
    "start": "1298279",
    "end": "1304559"
  },
  {
    "text": "Recovery purposes and that it's meeting our compliance for retention maybe it's seven years and that it's has an RPO",
    "start": "1304559",
    "end": "1311360"
  },
  {
    "text": "that actually meets the mission critical objective it might be minutes it might be hourly in some cases it could be just",
    "start": "1311360",
    "end": "1316960"
  },
  {
    "text": "daily but we want the policy to actually look at that we wanted to look at it and enforce that when an application",
    "start": "1316960",
    "end": "1322880"
  },
  {
    "text": "developer is deploying a new application that it's also of course deploying the right backup policies in the bottom",
    "start": "1322880",
    "end": "1329760"
  },
  {
    "text": "example here on the backup Target we've got a bug where the object of mutability was accidentally left out you know I",
    "start": "1329760",
    "end": "1336600"
  },
  {
    "text": "commented it out here so I can actually show you the bug but in a lot of cases we might just stand up a backup policy",
    "start": "1336600",
    "end": "1342400"
  },
  {
    "text": "and kind of just forget about these Advanced configuration settings and that ultimately is very dangerous especially",
    "start": "1342400",
    "end": "1347760"
  },
  {
    "text": "in the case of rans whereare attack if you don't have immutable backups it means the adversary can obviously steal",
    "start": "1347760",
    "end": "1353840"
  },
  {
    "text": "your data but it can also delete your backups and if they can corrupt production and delete your backups you",
    "start": "1353840",
    "end": "1360039"
  },
  {
    "text": "now have a double failure situation where you can't recover your data and that M configuration is particularly",
    "start": "1360039",
    "end": "1366080"
  },
  {
    "text": "dangerous especially in in in data protection so how does this work exactly",
    "start": "1366080",
    "end": "1371720"
  },
  {
    "text": "let's say you're using a gups workflow you know and if some riew are doing that that's great um let's say you have a",
    "start": "1371720",
    "end": "1377640"
  },
  {
    "text": "developer who wants to create a new tier zero Mission critical data protection policy for their app they write some",
    "start": "1377640",
    "end": "1384159"
  },
  {
    "text": "prod code they write their secrets their policies their stateful sets the provisioning of those PVCs and they",
    "start": "1384159",
    "end": "1390240"
  },
  {
    "text": "write the data protection policy and the data protection backup targets they commit it all to a new GitHub repo a new",
    "start": "1390240",
    "end": "1397120"
  },
  {
    "text": "branch and then they initiate a poll request that poll request goes off to other developers on the team maybe the",
    "start": "1397120",
    "end": "1403760"
  },
  {
    "text": "cloud platform Ops Team maybe the data Protection Team to review the that policy is actually meeting our standards",
    "start": "1403760",
    "end": "1411320"
  },
  {
    "text": "and then in the background if you have Opa the the engine integrated as well as the policy code Opa is going to give you",
    "start": "1411320",
    "end": "1418240"
  },
  {
    "text": "instantaneous feedback about whether it meets your objectives or not and once",
    "start": "1418240",
    "end": "1423600"
  },
  {
    "text": "all those reviews are signed off once the OPA engine is actually validated that the code signs off against the",
    "start": "1423600",
    "end": "1429960"
  },
  {
    "text": "policy you're now going to have and and once you merge it back into the main branch you're now going to have secure",
    "start": "1429960",
    "end": "1437520"
  },
  {
    "text": "protection and production infrastructure code to deploy to any new region to you",
    "start": "1437520",
    "end": "1443039"
  },
  {
    "text": "know any new clusters from Day Zero and day one now the second way to leverage the",
    "start": "1443039",
    "end": "1450039"
  },
  {
    "text": "guard rails it it may be more of a for more M the more mainstream audiences is",
    "start": "1450039",
    "end": "1456080"
  },
  {
    "text": "if you have a dedicated Cloud team or a dedicated data Protection Team who is writing this code to handoff to an",
    "start": "1456080",
    "end": "1463320"
  },
  {
    "text": "application developer and the application developer you know they may not necessarily be seasoned experts in",
    "start": "1463320",
    "end": "1468679"
  },
  {
    "text": "writing data protection policies but they don't need to be they can easily consume for example by name the name of",
    "start": "1468679",
    "end": "1475000"
  },
  {
    "text": "you know our gold standard policy our standard you know bronze or silver level policies make it easy for them is how I",
    "start": "1475000",
    "end": "1482120"
  },
  {
    "text": "always like to think of it when you're consuming security and data protection make it easy for your application developers and you guys are going to",
    "start": "1482120",
    "end": "1488039"
  },
  {
    "text": "have a great partnership in deploying a secure platform of course and delivering your applications to your end users U so",
    "start": "1488039",
    "end": "1496000"
  },
  {
    "text": "this this this concept is called admission control and for Opa you would you would achieve this through the",
    "start": "1496000",
    "end": "1501600"
  },
  {
    "text": "gatekeeper project and this is helpful if you want to apply your protections a little bit more closer to staging or",
    "start": "1501600",
    "end": "1507799"
  },
  {
    "text": "production that you actually want the kubernetes API server to not only do the",
    "start": "1507799",
    "end": "1512960"
  },
  {
    "text": "authorization and authentication according to our back but you want an extra layer to actually ensure that that",
    "start": "1512960",
    "end": "1519799"
  },
  {
    "text": "for example that backup policy or that backup Target is actually meeting the uh",
    "start": "1519799",
    "end": "1524919"
  },
  {
    "text": "data protection objectives and that's something called admission control where it's going to send a request to the OPA",
    "start": "1524919",
    "end": "1531480"
  },
  {
    "text": "policy agent right using the Regal language and it's going to give a decision that says hey this this API",
    "start": "1531480",
    "end": "1536760"
  },
  {
    "text": "this code meets or does not meet our compliance",
    "start": "1536760",
    "end": "1542360"
  },
  {
    "text": "requirements um so let's talk about some example policies you should be thinking about if you're responsible for",
    "start": "1542360",
    "end": "1547919"
  },
  {
    "text": "deploying data protection in your environment and you want to leverage infrastructure as code as a way to",
    "start": "1547919",
    "end": "1553840"
  },
  {
    "text": "accelerate and get to Market faster here are some of the policies that we recommend",
    "start": "1553840",
    "end": "1558960"
  },
  {
    "text": "employe um a basic primer you know on data protection it usually is centered around two things recovery points uh",
    "start": "1558960",
    "end": "1566840"
  },
  {
    "text": "recovery Point objectives which is RPO and recovery time objectives put it simply this is really um how much data",
    "start": "1566840",
    "end": "1574640"
  },
  {
    "text": "you you would be able to tolerate in a data loss scenario that typically uh",
    "start": "1574640",
    "end": "1580279"
  },
  {
    "text": "States your RPO requirement so if your RPO was one hour your business is saying",
    "start": "1580279",
    "end": "1585760"
  },
  {
    "text": "you can only tolerate about an hour of data loss in the event of a disaster or a security incident moving to the right",
    "start": "1585760",
    "end": "1592720"
  },
  {
    "text": "is the RTO the recovery objective and this usually States the continuity requirements how much time should pass",
    "start": "1592720",
    "end": "1599760"
  },
  {
    "text": "before an end user might notice or it starts to disrupt you know Core Business",
    "start": "1599760",
    "end": "1604880"
  },
  {
    "text": "activities usually this is negotiated with a general manager a business leader",
    "start": "1604880",
    "end": "1610200"
  },
  {
    "text": "somebody who owns the application it's very important to get that alignment of course with your business stakeholder",
    "start": "1610200",
    "end": "1616000"
  },
  {
    "text": "because this ultimately affects Revenue it affects adoption it affects retention andur and brand loyalty of your",
    "start": "1616000",
    "end": "1622720"
  },
  {
    "text": "customers so as we're Cod defining these data protection policies make sure they",
    "start": "1622720",
    "end": "1627799"
  },
  {
    "text": "align with the business and that's going to help you when you start to author these uh directly in code because you",
    "start": "1627799",
    "end": "1634000"
  },
  {
    "text": "can actually show that back to your your stakeholders and actually say hey does this meet your business",
    "start": "1634000",
    "end": "1640159"
  },
  {
    "text": "objectives so the first example here is exactly that it's talking about the",
    "start": "1640159",
    "end": "1645399"
  },
  {
    "text": "recovery objectives so in this pseudo code example we have here we have a backup policy that's tuned to do hourly",
    "start": "1645399",
    "end": "1653120"
  },
  {
    "text": "backups and that's great for general purpose U sorry Mission critical workloads a general purpose workload",
    "start": "1653120",
    "end": "1658440"
  },
  {
    "text": "might accept a daily backup 24 hours um but in this case you know we want to also make sure that there's availability",
    "start": "1658440",
    "end": "1664799"
  },
  {
    "text": "of that data so that we have a copy of that data off on a third party Cloud",
    "start": "1664799",
    "end": "1670159"
  },
  {
    "text": "array Object Store NFS Target somewhere that's that where if production fails",
    "start": "1670159",
    "end": "1676399"
  },
  {
    "text": "that you have a secondary Target of course and so this is looking for and and you",
    "start": "1676399",
    "end": "1681720"
  },
  {
    "text": "know depending on the back of software that you use you might have different objects you'd want to Target so there's policy objects there's scheduling",
    "start": "1681720",
    "end": "1687840"
  },
  {
    "text": "objects there's Chron job objects and you're going to typically want to look for that RPO and validate is it lower",
    "start": "1687840",
    "end": "1695000"
  },
  {
    "text": "than or equal to what you expect from a data loss",
    "start": "1695000",
    "end": "1700039"
  },
  {
    "text": "perspective you can see here in the rioo code maybe actually Andrew can explain a little bit what the Rigo code um is",
    "start": "1700039",
    "end": "1707000"
  },
  {
    "text": "actually doing here uh go ahead yeah sure okay so yeah we",
    "start": "1707000",
    "end": "1712559"
  },
  {
    "text": "have an allow allow rule here pretty much like what what we have had in showed in the in the example before and",
    "start": "1712559",
    "end": "1720880"
  },
  {
    "text": "uh in this case we can just check the the type of the input so in this case",
    "start": "1720880",
    "end": "1727120"
  },
  {
    "text": "the resource is of the type policy which is is a little little confusing though because it's it's it's a it's actually a",
    "start": "1727120",
    "end": "1734200"
  },
  {
    "text": "backup policy so it's it this doesn't check a Rego policy but it it it verifies at backup policy yeah just to",
    "start": "1734200",
    "end": "1742200"
  },
  {
    "text": "check that uh the kind of the request is policy uh and the group is backup. iio",
    "start": "1742200",
    "end": "1749360"
  },
  {
    "text": "and what it does on the third line here it references another rule so rules are",
    "start": "1749360",
    "end": "1754640"
  },
  {
    "text": "composable so one rule can reference any other number of rule and if they all are",
    "start": "1754640",
    "end": "1760679"
  },
  {
    "text": "uh evaluated true then the allow rule will evaluate to true so in this case",
    "start": "1760679",
    "end": "1766120"
  },
  {
    "text": "allow is only going to be true if uh the house backup policy rule evaluates to",
    "start": "1766120",
    "end": "1772279"
  },
  {
    "text": "True uh and the house backup policy rule uh below it's kind of simple we just uh",
    "start": "1772279",
    "end": "1779480"
  },
  {
    "text": "take this uh the spec from from the input and I should say here that the input in this case it's uh a kubernetes",
    "start": "1779480",
    "end": "1787559"
  },
  {
    "text": "admission review object which is what the kubernetes API server sends to Opa",
    "start": "1787559",
    "end": "1793679"
  },
  {
    "text": "for validation uh so that kind of explains the the structure here of like the",
    "start": "1793679",
    "end": "1799640"
  },
  {
    "text": "input. request. object so uh for the for the object we",
    "start": "1799640",
    "end": "1805840"
  },
  {
    "text": "we use uh some action in and I think we're me missing something here but uh",
    "start": "1805840",
    "end": "1810919"
  },
  {
    "text": "so we're iterating over all the actions provided and if there's one that matches",
    "start": "1810919",
    "end": "1817240"
  },
  {
    "text": "or is equal to hourly we say that we have an acceptable backup",
    "start": "1817240",
    "end": "1823440"
  },
  {
    "text": "policy all right and and kind of paired with that the other most common thing to",
    "start": "1823480",
    "end": "1829799"
  },
  {
    "text": "definitely look for and this is particularly important if your data is typically a Target so the adversaries",
    "start": "1829799",
    "end": "1835760"
  },
  {
    "text": "especially ransomware operators they're they're looking for sensitive data that you know is valuable it has purpose it",
    "start": "1835760",
    "end": "1841679"
  },
  {
    "text": "has business value and they're looking to hold it hostage of course by encrypting that data so ransomware",
    "start": "1841679",
    "end": "1847840"
  },
  {
    "text": "protection is also known as immutability or air gap and it really depends on your backup product and you know if you're in",
    "start": "1847840",
    "end": "1854000"
  },
  {
    "text": "a private cloud or a public Cloud scenario typic typically in a private Cloud you would go for an air gap backup",
    "start": "1854000",
    "end": "1860120"
  },
  {
    "text": "that that's meaning that there's no network access on a regular basis to that backup unless authorized by a",
    "start": "1860120",
    "end": "1867120"
  },
  {
    "text": "privileged admin for example but if you're working in public cloud of course everything is always online so they",
    "start": "1867120",
    "end": "1873519"
  },
  {
    "text": "typically have a right once read many Object Store so and S3 calls this an",
    "start": "1873519",
    "end": "1879240"
  },
  {
    "text": "object lock um bucket for example and the backup software you know if it",
    "start": "1879240",
    "end": "1885039"
  },
  {
    "text": "supports object lock it's going to enable writing those backups to that object lock store so that it can create",
    "start": "1885039",
    "end": "1891639"
  },
  {
    "text": "a a property of immutability and so depending on how that code looks you might have an advanced configuration",
    "start": "1891639",
    "end": "1897480"
  },
  {
    "text": "value um in this example you know we have a configuration value called object lock true this this might set up the",
    "start": "1897480",
    "end": "1904120"
  },
  {
    "text": "bucket to configure it using that object lock and then of course send the backups to that that same object and I think the",
    "start": "1904120",
    "end": "1910639"
  },
  {
    "text": "reg code here is also pretty straightforward right it's looking for that specific action or Advanced metric",
    "start": "1910639",
    "end": "1916399"
  },
  {
    "text": "configuration that says hey is is it true is this object lock being enabled if it doesn't find this you know then",
    "start": "1916399",
    "end": "1923120"
  },
  {
    "text": "you're putting putting the backups at risk for deletion or corruption um and some of the resource",
    "start": "1923120",
    "end": "1929480"
  },
  {
    "text": "types you know you might have here are backup targets locations location profiles pvc's um just targets NFS in",
    "start": "1929480",
    "end": "1936399"
  },
  {
    "text": "general and you know it it varies of course across depending on what software you're",
    "start": "1936399",
    "end": "1942240"
  },
  {
    "text": "using um the third example is related to an availability of your of your backups",
    "start": "1942240",
    "end": "1948240"
  },
  {
    "text": "so a common Disaster Recovery policy would have you know you have your production you have your copy of",
    "start": "1948240",
    "end": "1953799"
  },
  {
    "text": "production which is sometimes a storage snapshot and then you have an ability to copy that storage snapshot to an",
    "start": "1953799",
    "end": "1960039"
  },
  {
    "text": "off-site Cloud location and so that's what we would call 321 321 is having three copies of your data two of them on",
    "start": "1960039",
    "end": "1966679"
  },
  {
    "text": "different storage targets prod and secondary and then one of those of course being in another region or",
    "start": "1966679",
    "end": "1972120"
  },
  {
    "text": "another off-site location um you can extend that concept further if you want to include the air",
    "start": "1972120",
    "end": "1977480"
  },
  {
    "text": "gap mutability property with something called 32110 um and again it varies by data",
    "start": "1977480",
    "end": "1983799"
  },
  {
    "text": "protection software if it supports immutability you can have a check for that if it supports data verification or",
    "start": "1983799",
    "end": "1989880"
  },
  {
    "text": "verification of those application backups that can be that can be restored of course um you know you'll want to",
    "start": "1989880",
    "end": "1995600"
  },
  {
    "text": "write your policies to ensure that it's able to kick off that test and again the Rego here is very straight forward it's",
    "start": "1995600",
    "end": "2002480"
  },
  {
    "text": "looking for two actions in the actions array there's a backup action followed by some kind of copy action or export",
    "start": "2002480",
    "end": "2009440"
  },
  {
    "text": "action to another object storage location and if it doesn't find both of",
    "start": "2009440",
    "end": "2014840"
  },
  {
    "text": "those specific actions it's going to reject admission right it's going to reject make a decision that says this",
    "start": "2014840",
    "end": "2020200"
  },
  {
    "text": "doesn't comply with our policy um the last one I want to leave you with is a little bit less common and",
    "start": "2020200",
    "end": "2027039"
  },
  {
    "text": "a little bit more unique uh which is a scenario that is starting to come up more and more um in the ransomware",
    "start": "2027039",
    "end": "2033279"
  },
  {
    "text": "attack pattern it's not enough to just get your data encrypted but nowadays the Aries are also stealing data and they're",
    "start": "2033279",
    "end": "2040440"
  },
  {
    "text": "using um a variety of techniques to do that they might steal it directly from production if they've breached a pod and",
    "start": "2040440",
    "end": "2048158"
  },
  {
    "text": "escalated privileges to the node they might steal it directly from production which is a bit trickier to protect from",
    "start": "2048159",
    "end": "2055079"
  },
  {
    "text": "the alternative is that they've breached the data protection infrastructure and they've gotten credential access to a",
    "start": "2055079",
    "end": "2061638"
  },
  {
    "text": "restore admin or a privileged admin uh this is an attack with what we call living off the land and living off the",
    "start": "2061639",
    "end": "2068760"
  },
  {
    "text": "land attacks are particularly dangerous because they use legitimate software to",
    "start": "2068760",
    "end": "2073919"
  },
  {
    "text": "perform malicious acts and most detection software is typically not",
    "start": "2073919",
    "end": "2079560"
  },
  {
    "text": "tuned to um detect incidents on trusted software so if for example your data",
    "start": "2079560",
    "end": "2086520"
  },
  {
    "text": "protection software is compromised or the access to your data protection software has been compromised there's",
    "start": "2086520",
    "end": "2092440"
  },
  {
    "text": "potential they can use the restore functionality to exfiltrate data itself and so depending on how the data",
    "start": "2092440",
    "end": "2099119"
  },
  {
    "text": "protection software creates jobs or backup jobs or restore jobs in kubernetes they would typically be",
    "start": "2099119",
    "end": "2105880"
  },
  {
    "text": "another resource and you can actually track that resource and re and using Opa if you can write a r for example that",
    "start": "2105880",
    "end": "2112800"
  },
  {
    "text": "says hey for any restore job that's created let's look at where it's going you know you might want to create a",
    "start": "2112800",
    "end": "2118320"
  },
  {
    "text": "white list to say these are approved locations or approved name spaces or approved you know approved Cloud",
    "start": "2118320",
    "end": "2125079"
  },
  {
    "text": "locations the beauty of the Regal language here is that it's very flexible how you want to to author it and so in",
    "start": "2125079",
    "end": "2132359"
  },
  {
    "text": "this case in the exploitation protection you might want to write a rule that says if we see a restore job going to",
    "start": "2132359",
    "end": "2137960"
  },
  {
    "text": "somewhere we don't expect shut it down you know don't let that job actually kick off and that's going to prevent any",
    "start": "2137960",
    "end": "2144040"
  },
  {
    "text": "extration of data coming through the backup",
    "start": "2144040",
    "end": "2148400"
  },
  {
    "text": "application um so I'm going to double check to see if there's any questions because we do have a demo for you that's actually going to show the data",
    "start": "2149400",
    "end": "2156280"
  },
  {
    "text": "protection concept Garo Concept in a cicd pipeline so let me just um stop",
    "start": "2156280",
    "end": "2162960"
  },
  {
    "text": "sharing for a second here um any questions at all about",
    "start": "2162960",
    "end": "2168800"
  },
  {
    "text": "policies or anything we spoke about so",
    "start": "2168800",
    "end": "2173680"
  },
  {
    "text": "far okay then we can go ahead and just get to the example then Anders all right great yeah so we have some like basic",
    "start": "2176760",
    "end": "2184000"
  },
  {
    "text": "knowledge of Rego and what the rules look like and as Joey showed we also",
    "start": "2184000",
    "end": "2189480"
  },
  {
    "text": "know like what what does these kind of backup policies look like and again like",
    "start": "2189480",
    "end": "2194880"
  },
  {
    "text": "given how Opa is is kind of agnostic or general purpose framework we can work",
    "start": "2194880",
    "end": "2200240"
  },
  {
    "text": "with any any type of Json or yaml data uh so one thing to not note here",
    "start": "2200240",
    "end": "2206800"
  },
  {
    "text": "though that uh the way if if we check these manifest so in this uh demo",
    "start": "2206800",
    "end": "2212839"
  },
  {
    "text": "repository we have manifests which are the yaml files that we want to deploy to",
    "start": "2212839",
    "end": "2218240"
  },
  {
    "text": "uh to kubernetes and we have some policies uh where we have all these",
    "start": "2218240",
    "end": "2223319"
  },
  {
    "text": "rules like any backup action must be accompanied by a backup copy and so on",
    "start": "2223319",
    "end": "2230520"
  },
  {
    "text": "so we have we have a bunch of manifests uh and we have a bunch of",
    "start": "2230520",
    "end": "2236280"
  },
  {
    "text": "policies so uh for example I don't know here let's check some something here like the",
    "start": "2236280",
    "end": "2243960"
  },
  {
    "text": "ransom one we uh where we're checking that uh as Joey demonstrated we need to",
    "start": "2243960",
    "end": "2249680"
  },
  {
    "text": "ensure that for any uh AWS backup Target uh we we should deny that",
    "start": "2249680",
    "end": "2256119"
  },
  {
    "text": "deployment if it does not have either an object lock or an air gap uh",
    "start": "2256119",
    "end": "2262319"
  },
  {
    "text": "type uh or for the recovery scenario we're just going to check that uh for",
    "start": "2262319",
    "end": "2269359"
  },
  {
    "text": "any uh policy there needs to be a backup uh for any I don't know is there",
    "start": "2269359",
    "end": "2276480"
  },
  {
    "text": "uh for the restore job we want to ensure that uh the",
    "start": "2276480",
    "end": "2283599"
  },
  {
    "text": "restore can only be performed in one of our allowed Nam spaces so we want to",
    "start": "2283599",
    "end": "2288960"
  },
  {
    "text": "protect ourselves from like the exfiltration scenario so uh one thing to note here",
    "start": "2288960",
    "end": "2295880"
  },
  {
    "text": "when we look at all these kind of manifests uh the format of these manifests are going to be a bit",
    "start": "2295880",
    "end": "2303079"
  },
  {
    "text": "different from what we'll actually be working with when uh these manifests are presented to us uh by the",
    "start": "2303079",
    "end": "2311359"
  },
  {
    "text": "kubernetes API server so the way the kubernetes API server presents these",
    "start": "2311359",
    "end": "2316839"
  },
  {
    "text": "again it's going to be in the form of admission review object so uh we could of course spin up",
    "start": "2316839",
    "end": "2323520"
  },
  {
    "text": "a cube cluster have Opa installed ask the uh admission controller and test",
    "start": "2323520",
    "end": "2331240"
  },
  {
    "text": "things uh that way but in the context of a cicd pipeline we're we're going to",
    "start": "2331240",
    "end": "2337200"
  },
  {
    "text": "want to have uh some form of quicker feedback so in this case uh I I've",
    "start": "2337200",
    "end": "2343079"
  },
  {
    "text": "written a little tool it's called cube review which simply takes uh any kubernetes manifest like a deployment in",
    "start": "2343079",
    "end": "2350440"
  },
  {
    "text": "this case and it it simply turns that into an admission review object so in",
    "start": "2350440",
    "end": "2357400"
  },
  {
    "text": "that way we can kind of shift left uh the testing so we create admission",
    "start": "2357400",
    "end": "2362560"
  },
  {
    "text": "review objects and we can push those into opad directly in the in the CI",
    "start": "2362560",
    "end": "2367599"
  },
  {
    "text": "Pipeline and run our tests uh on those objects so the way we've done it here in",
    "start": "2367599",
    "end": "2373760"
  },
  {
    "text": "this demo repository is if we check the the pr uh workflow here you see this",
    "start": "2373760",
    "end": "2381040"
  },
  {
    "text": "applies on pull requests so we're just checking out the the Manifest checking out the policies we download Opa using",
    "start": "2381040",
    "end": "2389119"
  },
  {
    "text": "the the setup Opa project which is basically just a downloader for Opa in the context of GitHub",
    "start": "2389119",
    "end": "2395599"
  },
  {
    "text": "actions then we download CU review and we run the validate script and and of",
    "start": "2395599",
    "end": "2401560"
  },
  {
    "text": "course if this fails the pr is is going to fail or it's going to have errors so if we check them",
    "start": "2401560",
    "end": "2410119"
  },
  {
    "text": "the validate script here we're going to see there's some just uh scaffolding",
    "start": "2410119",
    "end": "2415839"
  },
  {
    "text": "here to uh check that the cuber review tool is installed and so on what we do",
    "start": "2415839",
    "end": "2421880"
  },
  {
    "text": "here is we iterate over all the manifests in in the Manifest directory",
    "start": "2421880",
    "end": "2427400"
  },
  {
    "text": "and for each of these we create using the KR or cube review tool we create uh",
    "start": "2427400",
    "end": "2433960"
  },
  {
    "text": "an admission review object which would be identical to what uh the cube API would present us so we can run the same",
    "start": "2433960",
    "end": "2441200"
  },
  {
    "text": "policies here as we would in in a later deployment step but we'd rather we'd rather want fast feedback and we'd",
    "start": "2441200",
    "end": "2448680"
  },
  {
    "text": "rather not have to run a cube cluster in uh in the build step we can we we will",
    "start": "2448680",
    "end": "2454240"
  },
  {
    "text": "obviously want that later in in the deployment but for for quick feedback uh",
    "start": "2454240",
    "end": "2460079"
  },
  {
    "text": "quick iteration we just want to run something to verify that the Manifest are fine so again you might remember the",
    "start": "2460079",
    "end": "2468520"
  },
  {
    "text": "OPA eval tool which is a simple simple way of just evaluating uh a policy so",
    "start": "2468520",
    "end": "2475240"
  },
  {
    "text": "what we do here is for each of these uh manifests we uh we pipe that into Opa",
    "start": "2475240",
    "end": "2481960"
  },
  {
    "text": "eval and we run that over all the policies in the policy directory and and",
    "start": "2481960",
    "end": "2487720"
  },
  {
    "text": "in this case we have one rule that kind of Aggregates uh all the results from",
    "start": "2487720",
    "end": "2492839"
  },
  {
    "text": "all the rules and if it's not an empty array meaning if we check the rules over",
    "start": "2492839",
    "end": "2499520"
  },
  {
    "text": "here uh or the policies you can see what what we're using here we're calling all",
    "start": "2499520",
    "end": "2505680"
  },
  {
    "text": "of these deny and these rules look a little different uh they have a string",
    "start": "2505680",
    "end": "2511839"
  },
  {
    "text": "in the name which means these are partial rules so you can have any number of deny rules",
    "start": "2511839",
    "end": "2517920"
  },
  {
    "text": "and uh when evaluated uh each of them that evaluate to True will build up a set uh in uh",
    "start": "2517920",
    "end": "2526240"
  },
  {
    "text": "containing all of these strings so it's basically a way to have your rules",
    "start": "2526240",
    "end": "2532359"
  },
  {
    "text": "return not just true or false but what we want to do here is we want to provide uh a reason or a message back to the",
    "start": "2532359",
    "end": "2539280"
  },
  {
    "text": "user to tell them uh why did this not work so if we were to change something",
    "start": "2539280",
    "end": "2545640"
  },
  {
    "text": "here and we make this uh we'll remove the backup copy here and",
    "start": "2545640",
    "end": "2551559"
  },
  {
    "text": "I'm going to run the validate script I'm going to see here that oh",
    "start": "2551559",
    "end": "2557960"
  },
  {
    "text": "when when validating the recovery yaml file uh we have a policy violation",
    "start": "2557960",
    "end": "2563520"
  },
  {
    "text": "because policy resource must include both backup and backup copy actions so",
    "start": "2563520",
    "end": "2569640"
  },
  {
    "text": "very fast feedback I can modify uh my manifests and try things out and then",
    "start": "2569640",
    "end": "2575720"
  },
  {
    "text": "just uh run the valid script to have Opa evaluate the Manifest and of course if I",
    "start": "2575720",
    "end": "2582680"
  },
  {
    "text": "am to uh it's called feature Branch where I now have one changed file",
    "start": "2582680",
    "end": "2592280"
  },
  {
    "text": "I'm going to try and add that commit I'm gonna",
    "start": "2592280",
    "end": "2599200"
  },
  {
    "text": "say remove backup copy",
    "start": "2599200",
    "end": "2604920"
  },
  {
    "text": "action and I'm going to push that",
    "start": "2604920",
    "end": "2609119"
  },
  {
    "text": "and I'm going to try and create a uh a pull request on that",
    "start": "2610440",
    "end": "2617000"
  },
  {
    "text": "uh so now we're now now hopefully Opa or uh the giab action is going to run the",
    "start": "2618559",
    "end": "2625960"
  },
  {
    "text": "pr shs which will run the same validate script as as we we just uh ran",
    "start": "2625960",
    "end": "2634359"
  },
  {
    "text": "locally and we're hopefully gonna get some pretty fast feedback uh or get to",
    "start": "2634359",
    "end": "2640200"
  },
  {
    "text": "know uh what went wrong here so we see that okay Opa or Opa did not validate",
    "start": "2640200",
    "end": "2646480"
  },
  {
    "text": "the resource we can check in the details here we'll see that uh yeah pretty much",
    "start": "2646480",
    "end": "2653920"
  },
  {
    "text": "the same output as as we did locally and and and GitHub will now not allow us to",
    "start": "2653920",
    "end": "2659599"
  },
  {
    "text": "merge this pull request so a very a pretty simple way uh to to verify uh",
    "start": "2659599",
    "end": "2666640"
  },
  {
    "text": "manif tests uh there are obviously more like elaborate things like conf test and",
    "start": "2666640",
    "end": "2672359"
  },
  {
    "text": "so on but for the purpose of the demo I wanted to keep it uh basic uh and show",
    "start": "2672359",
    "end": "2678960"
  },
  {
    "text": "how you can use like simple tools uh like Opa eal to run as part of uh of the",
    "start": "2678960",
    "end": "2686119"
  },
  {
    "text": "build process and uh yeah I think that's pretty much it if there's any questions",
    "start": "2686119",
    "end": "2693680"
  },
  {
    "text": "or or so so Anders in that scenario you know I'm",
    "start": "2693680",
    "end": "2700920"
  },
  {
    "text": "I'm a platform developer I'm writing code for deploying into a a new region",
    "start": "2700920",
    "end": "2706000"
  },
  {
    "text": "or a new Mission critical and I don't necessarily have to wait for other people to give me",
    "start": "2706000",
    "end": "2711400"
  },
  {
    "text": "feedback right Opa is going to give me feedback and I can fix the bug right there right without any human",
    "start": "2711400",
    "end": "2717000"
  },
  {
    "text": "interaction potentially yeah exactly so GitHub is gonna tell you like this PR cannot be merged uh due to the",
    "start": "2717000",
    "end": "2724960"
  },
  {
    "text": "validation errors that opa returned so of course we we could we",
    "start": "2724960",
    "end": "2730599"
  },
  {
    "text": "could uh do these checks in in admission control but I would mean like uh we",
    "start": "2730599",
    "end": "2736000"
  },
  {
    "text": "wouldn't know at the at the uh at the time or at the point in time when we created a PR that this is not going to",
    "start": "2736000",
    "end": "2742680"
  },
  {
    "text": "work so we'd have the pr merged and then when uh we deploy that code we'd see",
    "start": "2742680",
    "end": "2748720"
  },
  {
    "text": "like oh this this cannot be deployed because uh this is in a violation of this or that policy so the idea is of",
    "start": "2748720",
    "end": "2756520"
  },
  {
    "text": "course to shift lab we want to we want to get feedback as quickly as",
    "start": "2756520",
    "end": "2762599"
  },
  {
    "text": "possible right before you know before we're on the stage of oh we have to get the production in the next 24 hours and",
    "start": "2763160",
    "end": "2769640"
  },
  {
    "text": "we find all these problems we can actually find them as we're developing the code to get ready for staging in",
    "start": "2769640",
    "end": "2775440"
  },
  {
    "text": "production right to give us a little bit more time yeah exactly so like the same kind of validation steps that you run",
    "start": "2775440",
    "end": "2782559"
  },
  {
    "text": "locally uh are run in the Ci or in the build pipeline so which is which I think",
    "start": "2782559",
    "end": "2788400"
  },
  {
    "text": "is ideal because then you can you can use like pre-commit hooks or whatever you want to ensure that you're probably",
    "start": "2788400",
    "end": "2795160"
  },
  {
    "text": "don't even want to create that PR in in case there are violations and opa will",
    "start": "2795160",
    "end": "2800280"
  },
  {
    "text": "provide you with uh detailed messages telling you which resources in violation",
    "start": "2800280",
    "end": "2805599"
  },
  {
    "text": "and and for what reason",
    "start": "2805599",
    "end": "2811079"
  },
  {
    "text": "okay um so does anybody have any questions about anything you saw you",
    "start": "2811079",
    "end": "2816240"
  },
  {
    "text": "know clarification that we need to provide I've got a few questions if",
    "start": "2816240",
    "end": "2821400"
  },
  {
    "text": "not is there a website to learn R oh yeah for sure so uh again the the",
    "start": "2821880",
    "end": "2828760"
  },
  {
    "text": "official docs are great and in addition to that there's also the styra academy",
    "start": "2828760",
    "end": "2835440"
  },
  {
    "text": "which is a a Learning Resource with things like uh video based content tests",
    "start": "2835440",
    "end": "2841319"
  },
  {
    "text": "and so on so I can definitely recommend that",
    "start": "2841319",
    "end": "2846720"
  },
  {
    "text": "okay what is the URL all right yeah you can put in the chat I'll I'll add it in",
    "start": "2850839",
    "end": "2856920"
  },
  {
    "text": "the chat for sure okay um I have a question that I",
    "start": "2856920",
    "end": "2862520"
  },
  {
    "text": "saw from a developer form so on Reddit revops um was about policy as code and",
    "start": "2862520",
    "end": "2869680"
  },
  {
    "text": "one of the one of the developers actually commented that we're writing um declarative code you know like a like a",
    "start": "2869680",
    "end": "2876319"
  },
  {
    "text": "yammo right right policy is code is also declarative and that developer's opinion was actually that's a little bit",
    "start": "2876319",
    "end": "2882119"
  },
  {
    "text": "redundant where he would rather see this used with a declarative imperative concept so the scripts trying to deploy",
    "start": "2882119",
    "end": "2888720"
  },
  {
    "text": "something more specifically and a declarative policy to validate that that",
    "start": "2888720",
    "end": "2894000"
  },
  {
    "text": "imperative is actually doing what is what what we want it to do right so he had the opinion that declarative was",
    "start": "2894000",
    "end": "2900800"
  },
  {
    "text": "declarative was redundant do you agree with that I mean how do you how do you see that uh yeah I'm not sure I I've",
    "start": "2900800",
    "end": "2910119"
  },
  {
    "text": "followed uh entirely but I think like are was he referring to like having uh",
    "start": "2910119",
    "end": "2915599"
  },
  {
    "text": "the actual kind of uh restrictions defined as part of of the actual like",
    "start": "2915599",
    "end": "2922640"
  },
  {
    "text": "policy or like the backup or the Manifest yeah because I think it has to",
    "start": "2922640",
    "end": "2928359"
  },
  {
    "text": "do with um we're trying to gu we're trying to meet an outcome right in a decorative language defines the outcome",
    "start": "2928359",
    "end": "2934520"
  },
  {
    "text": "you want and the policy is code is is is enforcing the outcome you want so it it",
    "start": "2934520",
    "end": "2940040"
  },
  {
    "text": "will protect against of course typos and things like we forget code but if they're just trying to to test the",
    "start": "2940040",
    "end": "2946400"
  },
  {
    "text": "outcome in theory both of those approaches will meet the outcome if written correctly but the imperative is",
    "start": "2946400",
    "end": "2953359"
  },
  {
    "text": "not outcome based it's action based right it's scripting so you tell it to do this command line and this action or",
    "start": "2953359",
    "end": "2958799"
  },
  {
    "text": "this API and it's not objective based outcome based rather and it is a good",
    "start": "2958799",
    "end": "2964280"
  },
  {
    "text": "pairing of enforce enforcement on and imperative language yeah no I think I I think I",
    "start": "2964280",
    "end": "2970599"
  },
  {
    "text": "understand I think like the benefit uh that I would you know emphasize is",
    "start": "2970599",
    "end": "2976760"
  },
  {
    "text": "having the rules decoupled from the actual like specifications so the manifests in this",
    "start": "2976760",
    "end": "2984000"
  },
  {
    "text": "file are separate and the policies could live in like an an entirely different repository or be managed by a different",
    "start": "2984000",
    "end": "2991359"
  },
  {
    "text": "team uh for some cases of course if if it's just a simple check sometimes you",
    "start": "2991359",
    "end": "2996760"
  },
  {
    "text": "you might just want to add like an if then if or else or like as part of the",
    "start": "2996760",
    "end": "3002040"
  },
  {
    "text": "of the Bild script or something like that but once you start to kind of scale up and you have like hundreds of",
    "start": "3002040",
    "end": "3008079"
  },
  {
    "text": "resources and you might uh have like tens or hundreds of teams and you want",
    "start": "3008079",
    "end": "3014319"
  },
  {
    "text": "to have like uh how do you know like what what what policies are applied to",
    "start": "3014319",
    "end": "3019599"
  },
  {
    "text": "this type of resource uh in a unified way across our whole organization how do",
    "start": "3019599",
    "end": "3024760"
  },
  {
    "text": "we audit that and things like that so I think sure for the simple use case",
    "start": "3024760",
    "end": "3030720"
  },
  {
    "text": "you can definitely like add some simple checks and uh and so uh as close to the",
    "start": "3030720",
    "end": "3036839"
  },
  {
    "text": "to the actual like data as possible but once you kind of go past that you're",
    "start": "3036839",
    "end": "3042160"
  },
  {
    "text": "going to need something more organized I definitely think this is",
    "start": "3042160",
    "end": "3048240"
  },
  {
    "text": "this is kind of the technology you would use in a much more distributed environment you have a distributed team",
    "start": "3048240",
    "end": "3053359"
  },
  {
    "text": "um distributed applications maybe there's one Central Cloud platform team that's responsible for production also",
    "start": "3053359",
    "end": "3059079"
  },
  {
    "text": "responsible for data protection and you've got a series of application stakeholders there's not enough meetings",
    "start": "3059079",
    "end": "3065520"
  },
  {
    "text": "in the day well you you don't want that many meetings in the day to kind of coordinate things yeah so if you can",
    "start": "3065520",
    "end": "3071680"
  },
  {
    "text": "codify organizations practices in policy as code publish distribute to the",
    "start": "3071680",
    "end": "3078520"
  },
  {
    "text": "developers and you know make it simple for them to consume you're going to have a very highly scalable organization um",
    "start": "3078520",
    "end": "3085160"
  },
  {
    "text": "and you know deploying would be the least of your concerns at that point so yeah you can definitely have it in",
    "start": "3085160",
    "end": "3090920"
  },
  {
    "text": "different repos and different different repositories oh yeah definitely and and",
    "start": "3090920",
    "end": "3096680"
  },
  {
    "text": "opa provides several ways to kind of now we're just running Opa eval which kind",
    "start": "3096680",
    "end": "3101880"
  },
  {
    "text": "of just takes a file on this but uh there are there are more advanced ways of fetching like data and policy there",
    "start": "3101880",
    "end": "3108640"
  },
  {
    "text": "is like a a concept of remote bundle servers where Opa can go and and and get",
    "start": "3108640",
    "end": "3114160"
  },
  {
    "text": "policies and so on so there are many ways of of doing this I I just wanted to keep it like very basic for for the",
    "start": "3114160",
    "end": "3120799"
  },
  {
    "text": "purpose of this demo okay um any other questions and",
    "start": "3120799",
    "end": "3127240"
  },
  {
    "text": "I'll close it out if",
    "start": "3127240",
    "end": "3131119"
  },
  {
    "text": "not okay well I just wanted to thank everyone for attending today I hope it",
    "start": "3132720",
    "end": "3138599"
  },
  {
    "text": "was helpful and you know hope hopefully we can uh you know provide you some guidance on you know if use case that",
    "start": "3138599",
    "end": "3144640"
  },
  {
    "text": "you have might be for I see a question question here um are there any use cases for using Opa against a",
    "start": "3144640",
    "end": "3153359"
  },
  {
    "text": "serverless oh is that a question for me I think so yeah using op like a",
    "start": "3154440",
    "end": "3161839"
  },
  {
    "text": "serverless environment right we we mostly talked about a kubernetes environment right and you can use server lless in kubernetes by the way but um",
    "start": "3161839",
    "end": "3169119"
  },
  {
    "text": "yeah go for it yeah sure so there's uh yeah for you can Opa itself kind of the",
    "start": "3169119",
    "end": "3175520"
  },
  {
    "text": "common mode of operation is is having Opa run as a service so you'd have an",
    "start": "3175520",
    "end": "3180760"
  },
  {
    "text": "actual like HTTP server that Services requests uh there are there are ways to",
    "start": "3180760",
    "end": "3187240"
  },
  {
    "text": "have Opa a more uh to run Opa in more kind of a stateless context which which",
    "start": "3187240",
    "end": "3194000"
  },
  {
    "text": "is uh suitable for Server serverless so yeah that can can definitely be done I I",
    "start": "3194000",
    "end": "3201040"
  },
  {
    "text": "think like uh another pretty common way of doing it is have Opa run somewhere",
    "start": "3201040",
    "end": "3207280"
  },
  {
    "text": "and then have something like the the a AWS like Gateway query Opa before it",
    "start": "3207280",
    "end": "3213200"
  },
  {
    "text": "kind of forwards uh the request to to lambas and things like that so there",
    "start": "3213200",
    "end": "3218280"
  },
  {
    "text": "there are many ways of doing it uh either having Opa itself run serverless",
    "start": "3218280",
    "end": "3224280"
  },
  {
    "text": "or or or just have Opa run as a server but still in in the serverless",
    "start": "3224280",
    "end": "3232599"
  },
  {
    "text": "context I think there's a similar question here can we can we package maybe the r and the OPA engine you know",
    "start": "3233319",
    "end": "3240079"
  },
  {
    "text": "for a functions as a service offering maybe it's the same question no I'm I'm",
    "start": "3240079",
    "end": "3246599"
  },
  {
    "text": "actually not sure about open FS I've never used that uh so I'd love to know",
    "start": "3246599",
    "end": "3254000"
  },
  {
    "text": "too yeah I mean I think our our contacts might be available somewhere but I will I will drop my email Anders maybe you",
    "start": "3254000",
    "end": "3260280"
  },
  {
    "text": "can drop your email and we can uh have any followup questions of course",
    "start": "3260280",
    "end": "3267920"
  },
  {
    "text": "all right thank you everyone uh we're just just about out of time and uh see",
    "start": "3270160",
    "end": "3276720"
  },
  {
    "text": "next so much thank you Andrew and Joey and thank you everyone for joining us um",
    "start": "3276720",
    "end": "3282720"
  },
  {
    "text": "you know where to find them and we will see you next week for another version of cncf live webinars thank you all so much",
    "start": "3282720",
    "end": "3290040"
  },
  {
    "text": "for coming thanks everyone I know",
    "start": "3290040",
    "end": "3295680"
  }
]