[
  {
    "start": "0",
    "end": "80000"
  },
  {
    "text": "so what we're gonna do is I'm going to talk through a little bit of the introductory stuff to kick us off and",
    "start": "30",
    "end": "5700"
  },
  {
    "text": "then about midway through variety was going to come up here and show some about about a half dozen different demos",
    "start": "5700",
    "end": "11790"
  },
  {
    "text": "of using brigade so Brigade is a project that is part of",
    "start": "11790",
    "end": "18000"
  },
  {
    "text": "the CNC F we I want to kick off by putting the documentation and the github",
    "start": "18000",
    "end": "23070"
  },
  {
    "text": "link right here at the front so that you can pull that up and look at that whenever it's convenient to you but if you can get to Brigade dot SH from there",
    "start": "23070",
    "end": "30539"
  },
  {
    "text": "you should be able to kind of follow along from wherever wherever you are so",
    "start": "30539",
    "end": "37100"
  },
  {
    "text": "one of the things that my team is responsible for is we are kind of charged with kind of pushing the limits",
    "start": "37100",
    "end": "43230"
  },
  {
    "text": "of what sort of things we can do in the cloud native ecosystem and one of the exercises that we do to do this is we",
    "start": "43230",
    "end": "49379"
  },
  {
    "text": "say okay well let's try and think about the systems we use in a little bit of a different way so we're hanging around at",
    "start": "49379",
    "end": "55649"
  },
  {
    "text": "breakfast one morning and we got to talking about operating systems and what and and you know the similarities of",
    "start": "55649",
    "end": "61260"
  },
  {
    "text": "operating systems and the cloud native ecosystem that was emerging and we basically said all right well when we're",
    "start": "61260",
    "end": "66600"
  },
  {
    "text": "talking about an operating system what are we talking about and we looked it up of course as probably this is probably",
    "start": "66600",
    "end": "72030"
  },
  {
    "text": "the Wikipedia definition an operating system is the program that basically manages all the other programs and we",
    "start": "72030",
    "end": "80189"
  },
  {
    "start": "80000",
    "end": "125000"
  },
  {
    "text": "said all right so what if we started talking about kubernetes as an operating system can we apply that metaphor and a",
    "start": "80189",
    "end": "87600"
  },
  {
    "text": "does it make sense but B does it show us any new things that we could do with kubernetes now that we didn't realize we",
    "start": "87600",
    "end": "93180"
  },
  {
    "text": "could do before so we said all right well if an operating system manages processes on a machine we should be able",
    "start": "93180",
    "end": "99479"
  },
  {
    "text": "to talk about kubernetes as something that manages containers on a cluster and the analogy kind of roughly holds from",
    "start": "99479",
    "end": "106710"
  },
  {
    "text": "there so then we said all right well if we can kind of get away with talking with this analogy what are some of the",
    "start": "106710",
    "end": "113040"
  },
  {
    "text": "things we like to do on our operating system that we haven't figured out how to do in kubernetes yet one of the",
    "start": "113040",
    "end": "119939"
  },
  {
    "text": "answers that we had was well package management would be good and that's where helm came from but another one was",
    "start": "119939",
    "end": "126090"
  },
  {
    "start": "125000",
    "end": "175000"
  },
  {
    "text": "it'd be kind of cool if we could do shell scripting because we keep hacking",
    "start": "126090",
    "end": "131640"
  },
  {
    "text": "all kinds of interesting things to get with shell scripts right because shell scripts give us this opportunity to add",
    "start": "131640",
    "end": "137610"
  },
  {
    "text": "some flow control to the commands that come on our operating system right so",
    "start": "137610",
    "end": "143010"
  },
  {
    "text": "I've got commands like LS that by itself is useful when I'm interactively working on LS - lih or whatever but when I start",
    "start": "143010",
    "end": "151740"
  },
  {
    "text": "scripting them up I can add some flow control around those and take some basic building blocks and build something",
    "start": "151740",
    "end": "157350"
  },
  {
    "text": "that's slightly more sophisticated and then maybe even more sophisticated and so on right so we have these OS",
    "start": "157350",
    "end": "163050"
  },
  {
    "text": "operating system shell scripts that kind of look like this we get some flow control we get variables we get",
    "start": "163050",
    "end": "168510"
  },
  {
    "text": "conditionals and then we can make use of the commands that are already built in so we're kind of excitedly talking",
    "start": "168510",
    "end": "175290"
  },
  {
    "start": "175000",
    "end": "207000"
  },
  {
    "text": "through this stuff and we said all right well what would it look like if I tried to do shell scripting inside of a cluster what would it look like if I",
    "start": "175290",
    "end": "182910"
  },
  {
    "text": "could basically take that kind of flow control logic and apply that to",
    "start": "182910",
    "end": "187950"
  },
  {
    "text": "containers instead of two individual programs and what if I could basically say just like shell scripting doesn't",
    "start": "187950",
    "end": "195420"
  },
  {
    "text": "doesn't have to know what LS does before I can write a shell script can I come up with kind of a general-purpose scripting",
    "start": "195420",
    "end": "202320"
  },
  {
    "text": "like thinger that will allow me to take containers and just kind of work with them as they are so remember I showed",
    "start": "202320",
    "end": "211140"
  },
  {
    "start": "207000",
    "end": "227000"
  },
  {
    "text": "this shell scripting example for something bash like well we want the same kind of feel all right we want to",
    "start": "211140",
    "end": "218610"
  },
  {
    "text": "be able to say if I run this kind of container for each time I run this container until I meet some particular",
    "start": "218610",
    "end": "224700"
  },
  {
    "text": "condition I want to execute these other containers and I want to take that data and do something interesting with them",
    "start": "224700",
    "end": "230370"
  },
  {
    "start": "227000",
    "end": "260000"
  },
  {
    "text": "so that's kind of the shell of the idea around which we built Brigade so Brigade",
    "start": "230370",
    "end": "237000"
  },
  {
    "text": "is now a cloud native a CNC F sandbox project but it started out as at Deus",
    "start": "237000",
    "end": "242340"
  },
  {
    "text": "and then when Deus was acquired by Microsoft we just my team basically has just continued to work on it",
    "start": "242340",
    "end": "248400"
  },
  {
    "text": "we have contributors from multiple different companies and we have users",
    "start": "248400",
    "end": "254250"
  },
  {
    "text": "from all around the world at this point but we do still contribute quite a bit",
    "start": "254250",
    "end": "259859"
  },
  {
    "text": "to this project all right so what is Brigade then how do we describe this",
    "start": "259859",
    "end": "265440"
  },
  {
    "start": "260000",
    "end": "345000"
  },
  {
    "text": "thing one way to describe it would be the shell scripting thing another way would",
    "start": "265440",
    "end": "271260"
  },
  {
    "text": "be to say well it's sort of like a framework for doing a vent based or",
    "start": "271260",
    "end": "276540"
  },
  {
    "text": "event-driven scripting inside of kubernetes we built it to be as",
    "start": "276540",
    "end": "281580"
  },
  {
    "text": "lightweight as possible and we built it to be utterly kubernetes native in some",
    "start": "281580",
    "end": "288060"
  },
  {
    "text": "cases I think we made some mistakes there that we will get a chance to redo when we kick off the brigade 2.0",
    "start": "288060",
    "end": "294500"
  },
  {
    "text": "planning cycle early next year but when we built it we wanted to build",
    "start": "294500",
    "end": "299790"
  },
  {
    "text": "it as kubernetes native as possible and keep it as lightweight with the fewest possible dependencies and then of course",
    "start": "299790",
    "end": "306300"
  },
  {
    "text": "we wanted to make sure that we could chain together different containers to make workflows so what I'm thinking",
    "start": "306300",
    "end": "311400"
  },
  {
    "text": "about when I say containers and workflows right we're familiar with containers a workflow is basically",
    "start": "311400",
    "end": "318050"
  },
  {
    "text": "something where you're saying okay well I do a and then I do B and then I do C and if C passes I do D but if it fails I",
    "start": "318050",
    "end": "324930"
  },
  {
    "text": "do e you know that kind of thing where you're basically plotting this out a lot of times when we're talking in Brigade",
    "start": "324930",
    "end": "330479"
  },
  {
    "text": "we use that as sort of a rough way to explain what's going on and we use",
    "start": "330479",
    "end": "335640"
  },
  {
    "text": "workflows because a lot of CI and CD systems have that sort of inherently but still in the back of my mind I tend to",
    "start": "335640",
    "end": "341580"
  },
  {
    "text": "think of it as shell scripting so we",
    "start": "341580",
    "end": "348930"
  },
  {
    "start": "345000",
    "end": "355000"
  },
  {
    "text": "started with this at pattern and we said how are we gonna build something that can do this well the first question is",
    "start": "348930",
    "end": "355640"
  },
  {
    "start": "355000",
    "end": "418000"
  },
  {
    "text": "what programming language do we want to do we could write our own Bashi like",
    "start": "355640",
    "end": "361830"
  },
  {
    "text": "thing we could we could select one of the many existing programming languages",
    "start": "361830",
    "end": "368340"
  },
  {
    "text": "or we could try and Express everything interring complete yeah Mille well the last idea didn't sound like a good one",
    "start": "368340",
    "end": "373729"
  },
  {
    "text": "so we just skipped that one then then we said okay well how are we gonna share",
    "start": "373729",
    "end": "378960"
  },
  {
    "text": "data between them because one of the coolest things about the way you shell script in UNIX is you can just pipe data back and forth you can pipe the output",
    "start": "378960",
    "end": "386130"
  },
  {
    "text": "of one thing to the next thing write it to a file then read the file and then pipe that data back on to something else and we liked that particular metaphor",
    "start": "386130",
    "end": "393210"
  },
  {
    "text": "and we wanted to keep that and then finally we had to ask this question and this one was a little bit harder",
    "start": "393210",
    "end": "398970"
  },
  {
    "text": "initially because when you're thinking shell scripts in the UNIX environment you're thinking all",
    "start": "398970",
    "end": "404040"
  },
  {
    "text": "right well I died in dot slash Fuu dot SH and it runs it well in the cluster environment we might need something a",
    "start": "404040",
    "end": "410310"
  },
  {
    "text": "little more say reactive than that and actually and I'll come back to this in a moment because we'll talk about each of",
    "start": "410310",
    "end": "415350"
  },
  {
    "text": "these but Apple script ended up being the inspiration for that feature alright so language question number one",
    "start": "415350",
    "end": "421110"
  },
  {
    "start": "418000",
    "end": "448000"
  },
  {
    "text": "how do you pick a language well one method would be to say what's the most popular programming language and can we",
    "start": "421110",
    "end": "428310"
  },
  {
    "text": "just use that number one JavaScript okay",
    "start": "428310",
    "end": "433320"
  },
  {
    "text": "done so we picked JavaScript we tried several others we tried Lua which we really liked Python and a couple others",
    "start": "433320",
    "end": "440460"
  },
  {
    "text": "but JavaScript just seems sort of like the clear easy winner we knew how to do it there are plenty of open source implementations and it's the number one",
    "start": "440460",
    "end": "447330"
  },
  {
    "text": "programming language so it also had a rich ecosystem of tools available to us",
    "start": "447330",
    "end": "454320"
  },
  {
    "text": "we didn't have to worry about IDE integration and it was extremely flexible as we've seen throughout its",
    "start": "454320",
    "end": "460710"
  },
  {
    "text": "lifecycle it started as a browser-based language now there's a lot of server development there's a lot of edge development and of course we saw graphs",
    "start": "460710",
    "end": "468240"
  },
  {
    "text": "that looked like this that convinced us that Java scripts life is still very very healthy right it's still growing",
    "start": "468240",
    "end": "476160"
  },
  {
    "text": "that's pulls from the NPM package manager I think crossed 1 billion and when was this 2017 maybe 2016 somewhere",
    "start": "476160",
    "end": "485520"
  },
  {
    "text": "right in there ok so that was question number one settled we're gonna do JavaScript question number two how do we",
    "start": "485520",
    "end": "492090"
  },
  {
    "text": "get that pypy kind of feel so we wanted to be able to pass information to",
    "start": "492090",
    "end": "498090"
  },
  {
    "text": "containers right and we looked at UNIX and unix-like Scenic's has environment",
    "start": "498090",
    "end": "503250"
  },
  {
    "text": "variables and pipes we said okay well what do containers have well containers we can we can do commands we can execute",
    "start": "503250",
    "end": "510210"
  },
  {
    "text": "commands inside of a container by by exec um in there right we can use",
    "start": "510210",
    "end": "515310"
  },
  {
    "text": "environment variables to send data in and out and we still have file IO available to us what about getting",
    "start": "515310",
    "end": "521250"
  },
  {
    "text": "information out of containers well we've got standard out we got exit codes and we've got files that we can write to a",
    "start": "521250",
    "end": "527250"
  },
  {
    "text": "shared file system space so we got that second question sort of settled and then we hit the third one",
    "start": "527250",
    "end": "533490"
  },
  {
    "text": "all right we got a scripting language we know how to what our inputs and outputs are how do we share them between the two",
    "start": "533490",
    "end": "540710"
  },
  {
    "text": "big criterion for us was we didn't want to make it so that everybody had to learn some kind of new weird pattern so",
    "start": "540710",
    "end": "548580"
  },
  {
    "text": "we wanted to keep as JavaScript native as possible when you're writing your script it should look like regular",
    "start": "548580",
    "end": "555150"
  },
  {
    "text": "JavaScript and we wanted to preserve kind of the existing paradigms inside of",
    "start": "555150",
    "end": "561030"
  },
  {
    "text": "the container so we didn't want you to have to shim in extra code inside of your containers to make this work so on",
    "start": "561030",
    "end": "567870"
  },
  {
    "text": "one hand we've got the conundrum where okay well with nothing new in containers nothing new in JavaScript we have to",
    "start": "567870",
    "end": "573420"
  },
  {
    "text": "make it look plain whether you're building a container or whether you're inside JavaScript mode of thought and",
    "start": "573420",
    "end": "579480"
  },
  {
    "text": "you're writing the script so radu in a minute or two is going to get up here and show a bunch of examples of the",
    "start": "579480",
    "end": "585180"
  },
  {
    "start": "580000",
    "end": "605000"
  },
  {
    "text": "JavaScript API but it basically looks like this it's a lot of stuff is you're",
    "start": "585180",
    "end": "590880"
  },
  {
    "text": "creating new objects you're executing objects you're passing variables and parameters into these into these objects",
    "start": "590880",
    "end": "598530"
  },
  {
    "text": "before you run them and then you execute them and the data comes back out just like a return as a return value and",
    "start": "598530",
    "end": "605280"
  },
  {
    "text": "actually rod is going to show some other cool things ways that we can deal with file i/o and things like that so the",
    "start": "605280",
    "end": "611160"
  },
  {
    "text": "next question was alright how are we gonna execute these when do we know when to fire off one of these things the I",
    "start": "611160",
    "end": "619830"
  },
  {
    "text": "said we we took inspiration from Apple script I can barely hack out a very very",
    "start": "619830",
    "end": "627240"
  },
  {
    "text": "simple Apple script commands but what I thought was cool was that it was very easy on a Mac to basically say when this",
    "start": "627240",
    "end": "634320"
  },
  {
    "text": "window maximizes I'd like you to trigger this kind of thing so you can shut off this other thing right or when I click",
    "start": "634320",
    "end": "641040"
  },
  {
    "text": "on this special hotkey that I made up I want you to map this to a particular script that I want to run that results",
    "start": "641040",
    "end": "647670"
  },
  {
    "text": "in a window starting up and being positioned here right I liked that feel for scripting as never",
    "start": "647670",
    "end": "653040"
  },
  {
    "text": "any good at it but I liked it and I kind of felt like Brigade we kind of felt",
    "start": "653040",
    "end": "658620"
  },
  {
    "text": "like Brigade should be able to act like that it should be able to watch for some kind of event or some kind of action and",
    "start": "658620",
    "end": "665280"
  },
  {
    "text": "then react to it by executing script so the event handlers basically",
    "start": "665280",
    "end": "670320"
  },
  {
    "text": "become the entry point for our JavaScript so as you read a brigade script what you'll see is you know on",
    "start": "670320",
    "end": "676410"
  },
  {
    "text": "some event do this function so where",
    "start": "676410",
    "end": "683490"
  },
  {
    "text": "would these events come from in a cluster well our first project was",
    "start": "683490",
    "end": "688980"
  },
  {
    "text": "basically how do we wire this up to github and at the time github only had web hooks and so we created a web hook",
    "start": "688980",
    "end": "697050"
  },
  {
    "text": "gateway and it seemed like well that should be good you get a web hook you map a web hook to a script that should be a good starting place but we then",
    "start": "697050",
    "end": "704010"
  },
  {
    "text": "quickly found out we wanted to be able to do other things we wanted to do scripts that got triggered when you pushed a new image to docker hub or when",
    "start": "704010",
    "end": "710550"
  },
  {
    "text": "you pushed a new image to a CR github introduced get act and github actions and we wanted to be able to use those as",
    "start": "710550",
    "end": "717840"
  },
  {
    "text": "well and that was a more sophisticated callback system and then of course we're running inside of kubernetes so it would",
    "start": "717840",
    "end": "724320"
  },
  {
    "text": "be awfully nice to be able to respond to kubernetes events and the more we kept talking the more we thought well at the",
    "start": "724320",
    "end": "730440"
  },
  {
    "text": "at the end you kind of just want to be able to react to whatever is important to the user so that led us to a design",
    "start": "730440",
    "end": "737370"
  },
  {
    "text": "decision where we wanted to make this kind of this thing we call gateways where a gateway can translate some kind",
    "start": "737370",
    "end": "743250"
  },
  {
    "text": "of external prompt into an event that Brigade understands I think we currently",
    "start": "743250",
    "end": "750090"
  },
  {
    "text": "have maybe a dozen gateways probably a dozen gateways and in the advance",
    "start": "750090",
    "end": "755760"
  },
  {
    "text": "session for Brigade tomorrow one of the two topics we're going to talk about is how to build an event gateway they are",
    "start": "755760",
    "end": "762840"
  },
  {
    "text": "designed to be fairly easy to build and they're designed to be very very easy to operate so this is kind of where we",
    "start": "762840",
    "end": "771360"
  },
  {
    "start": "768000",
    "end": "785000"
  },
  {
    "text": "ended up and you'll see several examples of this as Raju talks but we've got events dot on some particular event that",
    "start": "771360",
    "end": "778020"
  },
  {
    "text": "MyGateway emits do this particular function and execute this particular",
    "start": "778020",
    "end": "783150"
  },
  {
    "text": "container so again that's just a glimpse when Ronnie who comes up here he's gonna show a half dozen different examples of",
    "start": "783150",
    "end": "789600"
  },
  {
    "start": "785000",
    "end": "822000"
  },
  {
    "text": "the different things you can do to change things together to access different kinds of storage and things like that",
    "start": "789600",
    "end": "795590"
  },
  {
    "text": "okay so the hardest part about Brigade believe was when we got close to launch time the",
    "start": "795590",
    "end": "805110"
  },
  {
    "text": "communication people say okay explain what Brigade is and I gave this kind of",
    "start": "805110",
    "end": "810500"
  },
  {
    "text": "explanation they're like yes but what is it so I explained it again and they said",
    "start": "810500",
    "end": "816060"
  },
  {
    "text": "we're okay what do you do with it and I went see ICD because that's what",
    "start": "816060",
    "end": "823019"
  },
  {
    "start": "822000",
    "end": "924000"
  },
  {
    "text": "everybody says right that's always the right answer to the question you can build a C ICD pipeline with this and so",
    "start": "823019",
    "end": "828930"
  },
  {
    "text": "we went with that and we built several C ICD platforms and showed how we could do how we could build a brigade J s script",
    "start": "828930",
    "end": "835440"
  },
  {
    "text": "that took a pull request automatically ran the test build images stuff like",
    "start": "835440",
    "end": "840450"
  },
  {
    "text": "that but we discovered that there were actually a lot of other very interesting things because if you can shell script",
    "start": "840450",
    "end": "846570"
  },
  {
    "text": "on these cluster events then you've got things like automatically running security audits one company that I",
    "start": "846570",
    "end": "852570"
  },
  {
    "text": "talked to has a program that runs nightly as a brigade cron trigger that loops through all the different internal",
    "start": "852570",
    "end": "859380"
  },
  {
    "text": "repos and runs static analysis on their code base and then dumps reports in each team's inbox if anything in their static",
    "start": "859380",
    "end": "866190"
  },
  {
    "text": "analysis failed I'm like oh that's cool I like that idea a lot of places where",
    "start": "866190",
    "end": "871920"
  },
  {
    "text": "brigade is getting used right now is for aggregating and analyzing data so write different jobs that will pull in data",
    "start": "871920",
    "end": "878190"
  },
  {
    "text": "from your object storage from databases do run various operations to migrate",
    "start": "878190",
    "end": "884700"
  },
  {
    "text": "data from one place to another and then run analyses of this and then you know maybe generate reports and drop them",
    "start": "884700",
    "end": "890399"
  },
  {
    "text": "somewhere and then we wanted to be able to or one of the other things we've been",
    "start": "890399",
    "end": "896520"
  },
  {
    "text": "able to watch people build as sort of like creating new environments in kubernetes to do pull requests so Radu",
    "start": "896520",
    "end": "903779"
  },
  {
    "text": "had done some work basically standing up a kind cluster inside of a kubernetes cluster executing a bunch of integration",
    "start": "903779",
    "end": "911100"
  },
  {
    "text": "and functional tests on that and then tearing down the cluster and that was pretty cool we actually built turn that into a library so that other people",
    "start": "911100",
    "end": "917339"
  },
  {
    "text": "could use that particular library to build their own Brigade scripts and and I have played around with it last week",
    "start": "917339",
    "end": "922949"
  },
  {
    "text": "when I built this thing called buck that I'll talk about just a moment we've seen",
    "start": "922949",
    "end": "928740"
  },
  {
    "start": "924000",
    "end": "950000"
  },
  {
    "text": "people use it for order processing we've seen people use this to build large-scale DevOps II kinds of pipelines",
    "start": "928740",
    "end": "936540"
  },
  {
    "text": "we've built github interactions and basically anything where you think that",
    "start": "936540",
    "end": "941940"
  },
  {
    "text": "you can take this idea of piping things in and out of containers and building scripts on it that's the kind of use",
    "start": "941940",
    "end": "947790"
  },
  {
    "text": "case that we were shooting for so again in a moment Radu is going to come up here and walk through it but I wanted to",
    "start": "947790",
    "end": "953579"
  },
  {
    "text": "give you one last example here of how easy it is get started with Brigade if",
    "start": "953579",
    "end": "959069"
  },
  {
    "text": "you're already running kubernetes brigades got its own helmet chart and its own helm repo so you can basically",
    "start": "959069",
    "end": "965100"
  },
  {
    "text": "do a hell marito add and then add the BRIT this whole line brigade and then that that URL then you've run the helm",
    "start": "965100",
    "end": "972209"
  },
  {
    "text": "install on it and then just to make sure everything installed correctly you wait a couple moments and then you run brigh",
    "start": "972209",
    "end": "977819"
  },
  {
    "text": "check brig check will make sure that everything is up and running in your cluster the way you think it should be and you should be off to the races so",
    "start": "977819",
    "end": "984899"
  },
  {
    "text": "from there you're just writing scripts and creating projects and and ready who's going to come up here and show us",
    "start": "984899",
    "end": "990000"
  },
  {
    "start": "989000",
    "end": "1040000"
  },
  {
    "text": "some of those",
    "start": "990000",
    "end": "992690"
  },
  {
    "text": "hello everyone okay so we've seen so far",
    "start": "1010910",
    "end": "1019790"
  },
  {
    "text": "the thinking behind how the game came to be the way it is and a bunch of use",
    "start": "1019790",
    "end": "1026280"
  },
  {
    "text": "cases so right now it'd be nice to walk through some simple scenarios of actual things that you could run and how you",
    "start": "1026280",
    "end": "1033000"
  },
  {
    "text": "would operate Brigade how you would monitor things look for logs and exactly what is happening when you're running",
    "start": "1033000",
    "end": "1038250"
  },
  {
    "text": "Brigade scripts so let's start with a very simple one we've seen that on the",
    "start": "1038250",
    "end": "1043589"
  },
  {
    "start": "1040000",
    "end": "1169000"
  },
  {
    "text": "slide so essentially this script says whenever the exact event happens I want",
    "start": "1043589",
    "end": "1050250"
  },
  {
    "text": "to start a container based on Alpine and execute echo hello and then echo world",
    "start": "1050250",
    "end": "1056730"
  },
  {
    "text": "and then run the job so this is what I expect to happen when I run this job the",
    "start": "1056730",
    "end": "1063360"
  },
  {
    "text": "way we would run this so brigade comes with a bunch of components there's a component that's running in the cluster",
    "start": "1063360",
    "end": "1069450"
  },
  {
    "text": "and then there's a command line for it called Brig that you can get from from",
    "start": "1069450",
    "end": "1074580"
  },
  {
    "text": "github so you would get started with Brig you do a brig check and then create a project and then I just created a very",
    "start": "1074580",
    "end": "1081120"
  },
  {
    "text": "simple project called called hello cube con and at this point I can do a brig",
    "start": "1081120",
    "end": "1086250"
  },
  {
    "text": "run and pass the script file or break",
    "start": "1086250",
    "end": "1093240"
  },
  {
    "text": "you one hello ojs and then I run this and there are a bunch of ways that I can interact with this running job so",
    "start": "1093240",
    "end": "1100380"
  },
  {
    "text": "there's a command called rig dashboard which will connect to the cluster and then open your default browser in the",
    "start": "1100380",
    "end": "1106860"
  },
  {
    "text": "brigade dashboard so right now I can see the the project name and then the event",
    "start": "1106860",
    "end": "1112980"
  },
  {
    "text": "that just happened and then I can see the actual job will do nothing and the logs from it itself so if you want you",
    "start": "1112980",
    "end": "1120570"
  },
  {
    "text": "can expose this dashboard internally or individual users can just do break dashboard we actually recommend you do",
    "start": "1120570",
    "end": "1127860"
  },
  {
    "text": "that because you're not exposing any ports from your cluster and then if you don't have access to a browser or you're",
    "start": "1127860",
    "end": "1134400"
  },
  {
    "text": "just more comfortable using a command line there's a command called brig term and this is actually something someone",
    "start": "1134400",
    "end": "1141300"
  },
  {
    "text": "from the community built from scratch which is extremely cool which it is a terminal dashboard that you can use",
    "start": "1141300",
    "end": "1147149"
  },
  {
    "text": "and see the exact same things that you would see from a web dashboard so you can see the list of the jobs that ran",
    "start": "1147149",
    "end": "1154320"
  },
  {
    "text": "and then you can deep dive into individual jobs and see logs and things like that job statuses and then this",
    "start": "1154320",
    "end": "1161640"
  },
  {
    "text": "actually is a timeline of jobs so as you have multiple jobs you can see the way they overlap and how they're running so",
    "start": "1161640",
    "end": "1169620"
  },
  {
    "start": "1169000",
    "end": "1237000"
  },
  {
    "text": "this is how you would run a single job right but we've been talking about Brigade as something that's helpful when",
    "start": "1169620",
    "end": "1175350"
  },
  {
    "text": "you want to do scrip the kind of things when you want to run something wait for it to finish best data back and forth so",
    "start": "1175350",
    "end": "1181919"
  },
  {
    "text": "let's see a second example where we run a second job and we just run them one at one after the other so the only special",
    "start": "1181919",
    "end": "1189570"
  },
  {
    "text": "thing let you see here there's required Brigade Corp brigade's here ah this is",
    "start": "1189570",
    "end": "1195240"
  },
  {
    "text": "just an NPM package that Brigade uses and then we do the same thing right we",
    "start": "1195240",
    "end": "1200370"
  },
  {
    "text": "define two jobs and then we run them one after the other so and right now Matt's",
    "start": "1200370",
    "end": "1208289"
  },
  {
    "text": "been talking about where do events in Brigade come from and he's been talking about gateways and this scenario brig",
    "start": "1208289",
    "end": "1214320"
  },
  {
    "text": "the command-line interface it just fires up an exec you've entered it acts as a",
    "start": "1214320",
    "end": "1219779"
  },
  {
    "text": "gateway right imagine this coming from a web hook or from some somewhere else so",
    "start": "1219779",
    "end": "1226860"
  },
  {
    "text": "we fired this event and then let's move over to to the dashboard terminal and see how the jobs are running so this is",
    "start": "1226860",
    "end": "1233700"
  },
  {
    "text": "automatically updating every five seconds and if you see here I actually wanted to run hello first and then",
    "start": "1233700",
    "end": "1240390"
  },
  {
    "start": "1237000",
    "end": "1286000"
  },
  {
    "text": "goodbye and goodbye start at first and then hello so how would we control this",
    "start": "1240390",
    "end": "1246890"
  },
  {
    "text": "well there are two ways we can do that there's something called groups where",
    "start": "1246890",
    "end": "1251940"
  },
  {
    "text": "essentially you can add multiple jobs in a single group and then have a command called run each which essentially means",
    "start": "1251940",
    "end": "1258630"
  },
  {
    "text": "run each individual job wait for it to finish and then start the other one so we can go back end and right now what",
    "start": "1258630",
    "end": "1269970"
  },
  {
    "text": "I'm expecting to see is hello getting started waiting for it to finish and",
    "start": "1269970",
    "end": "1275040"
  },
  {
    "text": "goodbye getting started so if you go back we can see Hello started it",
    "start": "1275040",
    "end": "1282520"
  },
  {
    "text": "finished executing and then goodbye started but because this is JavaScript",
    "start": "1282520",
    "end": "1288010"
  },
  {
    "start": "1286000",
    "end": "1333000"
  },
  {
    "text": "and it's fairly modern JavaScript we can actually take advantage of a lot of language features and this is where",
    "start": "1288010",
    "end": "1294190"
  },
  {
    "text": "actually having language feature differentiates itself from doing things in Yahoo right so right here what we're",
    "start": "1294190",
    "end": "1301240"
  },
  {
    "text": "doing is we're defining the jobs and then we're actually using a weight and a sink from JavaScript so this is an a",
    "start": "1301240",
    "end": "1307000"
  },
  {
    "text": "synchronous function and we're waiting for the first job and then a wait for the second job to finish and the result",
    "start": "1307000",
    "end": "1313360"
  },
  {
    "text": "is gonna be exactly the same this is just for you to see that you can actually use any language features from",
    "start": "1313360",
    "end": "1319870"
  },
  {
    "text": "from JavaScript that you might need right so if you go back we can see",
    "start": "1319870",
    "end": "1325840"
  },
  {
    "text": "exactly the same thing happened job one starting finishing and then job two now",
    "start": "1325840",
    "end": "1334890"
  },
  {
    "start": "1333000",
    "end": "1465000"
  },
  {
    "text": "we've been talking a lot about being able to pass data up between containers",
    "start": "1334890",
    "end": "1340090"
  },
  {
    "text": "between multiple jobs in kubernetes this is done through persistent volumes right",
    "start": "1340090",
    "end": "1347320"
  },
  {
    "text": "either you can do it with environment variables input arguments or persistent",
    "start": "1347320",
    "end": "1352600"
  },
  {
    "text": "volumes and if you want to react to something like start this job and attach",
    "start": "1352600",
    "end": "1358360"
  },
  {
    "text": "this persistent volume claim this persistent volume to it then start",
    "start": "1358360",
    "end": "1363400"
  },
  {
    "text": "another container and attach the same persistent volume this is getting fairly difficult to do in plain geometry",
    "start": "1363400",
    "end": "1369940"
  },
  {
    "text": "kubernetes so in this example we're defining a shared file that all jobs are",
    "start": "1369940",
    "end": "1377830"
  },
  {
    "text": "gonna use you can define a directory or a single file and then we're defining three jobs right all of them based on",
    "start": "1377830",
    "end": "1384970"
  },
  {
    "text": "alpine the first two will start echoing in the destination file and the third",
    "start": "1384970",
    "end": "1390550"
  },
  {
    "text": "one will simply write right on output whatever the two jobs finished the jobs",
    "start": "1390550",
    "end": "1397840"
  },
  {
    "text": "wrote and the only thing that you have to do to enable a persistent volume that's attached across all jobs running",
    "start": "1397840",
    "end": "1403900"
  },
  {
    "text": "there is do storage enabled equals true and then we will run each individual job",
    "start": "1403900",
    "end": "1411300"
  },
  {
    "text": "we could have switched this within a wait for each job so what we expect to",
    "start": "1411300",
    "end": "1420690"
  },
  {
    "text": "happen here is Brigade is gonna create a persistent volume and it will create the",
    "start": "1420690",
    "end": "1426960"
  },
  {
    "text": "first job it will attach a persistent volume claim to the first job it will then attach the same persistent volume",
    "start": "1426960",
    "end": "1433260"
  },
  {
    "text": "to the second one that will finish and then it will attach it to the third one and what we expect to see in this is in",
    "start": "1433260",
    "end": "1439100"
  },
  {
    "text": "job number three's outputs to see whatever was written in that file which",
    "start": "1439100",
    "end": "1445200"
  },
  {
    "text": "we expect to be hello and world so if we take a look at the logs of job number three we essentially see the outputs of",
    "start": "1445200",
    "end": "1452670"
  },
  {
    "text": "all of the jobs that what they've written and in that persistence volume and this is created as a new persistent",
    "start": "1452670",
    "end": "1459690"
  },
  {
    "text": "volume for each new event that's happening a second type of storage that",
    "start": "1459690",
    "end": "1467310"
  },
  {
    "start": "1465000",
    "end": "1568000"
  },
  {
    "text": "we can attach to Brigade jobs is something called a cache so if you've",
    "start": "1467310",
    "end": "1472590"
  },
  {
    "text": "ever waited for an it for exactly the same build on github to build the same",
    "start": "1472590",
    "end": "1478050"
  },
  {
    "text": "thing and then it took the same amount of time then you could probably attach of attach a build cache which in this",
    "start": "1478050",
    "end": "1484860"
  },
  {
    "text": "case the only thing you have to do is cache enabled equals true and what will",
    "start": "1484860",
    "end": "1490650"
  },
  {
    "text": "happen is based on the job name Brigade will attach the same persistent volume",
    "start": "1490650",
    "end": "1495750"
  },
  {
    "text": "to the same job across multiple executions so even if you had an event happening yesterday and then another",
    "start": "1495750",
    "end": "1502290"
  },
  {
    "text": "event happening today if the job job name is consistent and if it's the same cluster then Brigade will attach the",
    "start": "1502290",
    "end": "1509160"
  },
  {
    "text": "same persistence volume so this becomes interesting when you execute the same event multiple times so what we're gonna",
    "start": "1509160",
    "end": "1515460"
  },
  {
    "text": "do is we'll execute the same event a couple of times and essentially this is",
    "start": "1515460",
    "end": "1525810"
  },
  {
    "text": "gonna write its job ID into into a shared file and then print out what's in",
    "start": "1525810",
    "end": "1533130"
  },
  {
    "text": "that file so we can already see that there's there have been multiple",
    "start": "1533130",
    "end": "1539040"
  },
  {
    "text": "executions of the same event now there are three things here if I execute it again",
    "start": "1539040",
    "end": "1544300"
  },
  {
    "text": "you should see another another job ID in the same persistent volume so imagine",
    "start": "1544300",
    "end": "1552010"
  },
  {
    "text": "using this for something like a build cache right where you execute multiple go builds you can attach the same",
    "start": "1552010",
    "end": "1557290"
  },
  {
    "text": "directory to the go compiler and it can use a an existing build cash or",
    "start": "1557290",
    "end": "1562900"
  },
  {
    "text": "accumulating logs or things like that",
    "start": "1562900",
    "end": "1567060"
  },
  {
    "text": "but there's also a simpler way to pass data if you if you actually need",
    "start": "1568020",
    "end": "1573520"
  },
  {
    "text": "persistent volumes to pass complex data and actual files you can use persistent volumes with build storage and build",
    "start": "1573520",
    "end": "1580570"
  },
  {
    "text": "caches but if you only want to pass out very simple data like an ID or an output",
    "start": "1580570",
    "end": "1586450"
  },
  {
    "text": "a result an exit code you can use stander and put an output right so we",
    "start": "1586450",
    "end": "1591700"
  },
  {
    "text": "define two jobs both of them based on Alpine and then for job one we echo",
    "start": "1591700",
    "end": "1597610"
  },
  {
    "text": "something to stand out and then for job - once job one is finished and this is",
    "start": "1597610",
    "end": "1602950"
  },
  {
    "text": "another way you could wait for a job to finish just JavaScript we could have",
    "start": "1602950",
    "end": "1608800"
  },
  {
    "text": "used groups or we could have used the wait and a sink here well after job one is done I want to take the results of",
    "start": "1608800",
    "end": "1617110"
  },
  {
    "text": "job one as a string and then pass it to the console of job two right so we're",
    "start": "1617110",
    "end": "1624610"
  },
  {
    "text": "getting the data whatever standard output was in the first job and using it as input in this in the second one so if",
    "start": "1624610",
    "end": "1631000"
  },
  {
    "text": "we execute this",
    "start": "1631000",
    "end": "1633900"
  },
  {
    "text": "you can see job one that just out with he'll work world and then job to which",
    "start": "1645399",
    "end": "1653110"
  },
  {
    "text": "took the output world and then can get in it with the first one so this is how we could get simple data out of the jobs",
    "start": "1653110",
    "end": "1659830"
  },
  {
    "text": "and pass them to other jobs and then finally you could imagine trying to",
    "start": "1659830",
    "end": "1666759"
  },
  {
    "start": "1662000",
    "end": "1790000"
  },
  {
    "text": "react in case of failures so this is this is some use cases where it becomes",
    "start": "1666759",
    "end": "1674110"
  },
  {
    "text": "clear the things that you could do with llamo and things that really difficult to do so essentially this is executed a",
    "start": "1674110",
    "end": "1682139"
  },
  {
    "text": "number of jobs and then if something fails I wanted to catch an error and",
    "start": "1682139",
    "end": "1687940"
  },
  {
    "text": "then do some cleanup process right so job Juan is gonna exit successfully and",
    "start": "1687940",
    "end": "1693340"
  },
  {
    "text": "then job - this is gonna exit with a code one which is failure and then",
    "start": "1693340",
    "end": "1698499"
  },
  {
    "text": "essentially we're wrapping everything in a try-catch block and because again this is JavaScript you can use try-catch",
    "start": "1698499",
    "end": "1704889"
  },
  {
    "text": "blocks and then in case of an error I want you to console I want to do",
    "start": "1704889",
    "end": "1710259"
  },
  {
    "text": "something right tear down something closing database connection and things like that so what",
    "start": "1710259",
    "end": "1715450"
  },
  {
    "text": "we expect to happen is job to failing but us being able to recover and continue the process here so it's",
    "start": "1715450",
    "end": "1722679"
  },
  {
    "text": "essentially I can do a retry if I want to maybe there's a flaking connection I want to retry every time so if you",
    "start": "1722679",
    "end": "1730419"
  },
  {
    "text": "execute this",
    "start": "1730419",
    "end": "1733169"
  },
  {
    "text": "you can use any dashboard you want right so we see job one succeeding and then",
    "start": "1743539",
    "end": "1748909"
  },
  {
    "text": "job two just failed but this is what we wanted to do in case of an error caching",
    "start": "1748909",
    "end": "1755600"
  },
  {
    "text": "I want to I just want a console log caught exception right so if you look at the pod logs caught exception and then I",
    "start": "1755600",
    "end": "1763340"
  },
  {
    "text": "can continue the execution a final thing I want to show is because everything is",
    "start": "1763340",
    "end": "1769129"
  },
  {
    "text": "running as kubernetes objects you can continue to use any logging method you",
    "start": "1769129",
    "end": "1774409"
  },
  {
    "text": "want you have right now we can look at the logs of this with prometheus if you",
    "start": "1774409",
    "end": "1779869"
  },
  {
    "text": "want to we have an explorer for Prometheus so it is just made of a couple of pods and you can continue to",
    "start": "1779869",
    "end": "1787190"
  },
  {
    "text": "use any any tools you want now this is the the demo that I have do we have any",
    "start": "1787190",
    "end": "1793460"
  },
  {
    "start": "1790000",
    "end": "2220000"
  },
  {
    "text": "questions and we have a couple of more slides if you want to so if you want to",
    "start": "1793460",
    "end": "1804590"
  },
  {
    "text": "get started dr. brigade sh you can have examples for most of the things that I show you right",
    "start": "1804590",
    "end": "1810229"
  },
  {
    "text": "now there's a scripting guide and we have a bunch of good first issues on",
    "start": "1810229",
    "end": "1815359"
  },
  {
    "text": "github so we do encourage everyone to check that out we would be more than happy to help you get started with everything and we have a brigade channel",
    "start": "1815359",
    "end": "1823249"
  },
  {
    "text": "in the kubernetes lac that we are welcome you too we have bi-weekly community meetings and janus in the",
    "start": "1823249",
    "end": "1831320"
  },
  {
    "text": "Yukon there's a session the intro session tomorrow Matt butcher and Kent will have a deep",
    "start": "1831320",
    "end": "1837200"
  },
  {
    "text": "dive session well show you how to build gateways and some other things do we",
    "start": "1837200",
    "end": "1842599"
  },
  {
    "text": "have questions and everyone and from the maintainer please answer two questions",
    "start": "1842599",
    "end": "1848259"
  },
  {
    "text": "yes",
    "start": "1848259",
    "end": "1851259"
  },
  {
    "text": "sorry I so there took questions when it",
    "start": "1853600",
    "end": "1860180"
  },
  {
    "text": "comes to typescript support if you're using an IDE we have a library called",
    "start": "1860180",
    "end": "1869840"
  },
  {
    "text": "brigade's here which essentially comes with every type of object that you have that there's written type scripts we",
    "start": "1869840",
    "end": "1875030"
  },
  {
    "text": "have intellisense support for everything if you're and if you're asking about",
    "start": "1875030",
    "end": "1880040"
  },
  {
    "text": "writing writing Brigade type script scripts we don't have right now a compilation hook for type scripts the",
    "start": "1880040",
    "end": "1888470"
  },
  {
    "text": "the brigade a script has to be JavaScript right now but we're actually interested in and having a hook for",
    "start": "1888470",
    "end": "1893840"
  },
  {
    "text": "compilation to type script yeah yeah yeah so the question is just for the",
    "start": "1893840",
    "end": "1906200"
  },
  {
    "text": "recording if their support for init containers and sidecars essentially the",
    "start": "1906200",
    "end": "1912430"
  },
  {
    "text": "every-every Brigade job has an init container that can be configured to for example pull something from github to do",
    "start": "1912430",
    "end": "1918800"
  },
  {
    "text": "a clone before you get into the main execution the question about sidecars is",
    "start": "1918800",
    "end": "1923810"
  },
  {
    "text": "something that we've been actively looking game so for the past year and a half more than that and I think Kent can",
    "start": "1923810",
    "end": "1929840"
  },
  {
    "text": "talk to that",
    "start": "1929840",
    "end": "1932559"
  },
  {
    "text": "but specifically you can work around the sidecar requirement right now by just",
    "start": "1964799",
    "end": "1970990"
  },
  {
    "text": "starting a long-running job for example something that starts on my sequel database started as a brigade job and",
    "start": "1970990",
    "end": "1977230"
  },
  {
    "text": "then use job number two after that started so you can continue to use it and then they're done both of them after",
    "start": "1977230",
    "end": "1983889"
  },
  {
    "text": "you finished executing are there any",
    "start": "1983889",
    "end": "1989350"
  },
  {
    "text": "questions yeah again yeah so we did a",
    "start": "1989350",
    "end": "2007769"
  },
  {
    "text": "lot of low-level kubernetes stuff so when you create the gateway works by generating secrets and so when you're",
    "start": "2007769",
    "end": "2014970"
  },
  {
    "text": "writing a gateway all you have to do is generate a secret and that acts as the event but but kubernetes is not as",
    "start": "2014970",
    "end": "2021570"
  },
  {
    "text": "flexible as a as a message bus as we",
    "start": "2021570",
    "end": "2027750"
  },
  {
    "text": "want it to be we can't guarantee delivery for example so Kent has been doing a lot of research on if we fixed",
    "start": "2027750",
    "end": "2034440"
  },
  {
    "text": "that in Brigade - what would that look like that's that's probably the main one what are the others big ones that we",
    "start": "2034440",
    "end": "2040340"
  },
  {
    "text": "we've discovered as we went and we'll talk about this at length tomorrow that",
    "start": "2040340",
    "end": "2045809"
  },
  {
    "text": "that we should be able to rip out the JavaScript piece and plug in something else and use and and allow somebody to",
    "start": "2045809",
    "end": "2052200"
  },
  {
    "text": "build one that used its own interpreter Kent piloted that we actually got that work with a necessary background working",
    "start": "2052200",
    "end": "2059158"
  },
  {
    "text": "but in Brigade two that will be much much easier so if you want to write your own custom worker we'd be able to do that I'm forgetting at least one other",
    "start": "2059159",
    "end": "2067908"
  },
  {
    "text": "and other stuff yeah we're gonna and so in January we will start kicking off",
    "start": "2069230",
    "end": "2074398"
  },
  {
    "text": "formally the brigade 2.0 process and we'll basically just start dropping issues in the issue queue labelled",
    "start": "2074399",
    "end": "2080040"
  },
  {
    "text": "proposal anybody is welcome to drop in issues in the issue queue labelled proposal and we'll try and figure out",
    "start": "2080040",
    "end": "2085200"
  },
  {
    "text": "what we want to do how much we can do and get going on that so again that'll be in January once you know the the",
    "start": "2085200",
    "end": "2090868"
  },
  {
    "text": "holiday season has passed I think we are out of time oh yeah then",
    "start": "2090869",
    "end": "2096230"
  },
  {
    "text": "we have one more question okay yep yeah",
    "start": "2096230",
    "end": "2107210"
  },
  {
    "text": "so we we had this really cool demo that I gave once and then it got it was too daring for me to try and set up my",
    "start": "2107210",
    "end": "2112670"
  },
  {
    "text": "environment where we had at Windows jobs and our Windows pods and Linux pods and we were piping data out from one into",
    "start": "2112670",
    "end": "2119180"
  },
  {
    "text": "the other so if you can get your cluster running a combination of Windows nodes and Linux nodes you can actually run a",
    "start": "2119180",
    "end": "2126560"
  },
  {
    "text": "cross process which means you can do some really crazy like legacy stuff where you're of one of the weirdest",
    "start": "2126560",
    "end": "2133370"
  },
  {
    "text": "things I have heard anybody come up to us and say we did this with Brigade was we had this language that some guy wrote",
    "start": "2133370",
    "end": "2139190"
  },
  {
    "text": "in the late 70s and we have all this code written in it we managed to get it to compile for this particular target",
    "start": "2139190",
    "end": "2144800"
  },
  {
    "text": "and we can run at kubernetes node there and he comes in and he says to me so what we did was we've got these running",
    "start": "2144800",
    "end": "2150530"
  },
  {
    "text": "in containers here and we can pipe stuff in and out of that coming out of the windows and Linux containers that we normally use and I'm like that's really",
    "start": "2150530",
    "end": "2157790"
  },
  {
    "text": "cool I mean just way outside the box of anything I thought people would be able to do but yeah if you can get it to run",
    "start": "2157790",
    "end": "2163820"
  },
  {
    "text": "and schedule nodes and kubernetes then you can basically tag your jobs and say this has to run on a Windows node and",
    "start": "2163820",
    "end": "2170360"
  },
  {
    "text": "this has to run on the Linux node and it'll take care of all of that for you but most of the the ways you would",
    "start": "2170360",
    "end": "2178240"
  },
  {
    "text": "constrain and use dainty and kubernetes working begin as well all right thank",
    "start": "2178240",
    "end": "2185090"
  },
  {
    "text": "you all very much do we have do we have time for one more fit I see one more",
    "start": "2185090",
    "end": "2190450"
  },
  {
    "text": "we know about these three implementations of having declarative support for Brigade and Kant has been",
    "start": "2200430",
    "end": "2207160"
  },
  {
    "text": "working on one right now so if you're interested in that go to tomorrow session yeah we will talk about that one",
    "start": "2207160",
    "end": "2213549"
  },
  {
    "text": "at length tomorrow all right thank you all very much enjoy your morning",
    "start": "2213549",
    "end": "2218640"
  }
]