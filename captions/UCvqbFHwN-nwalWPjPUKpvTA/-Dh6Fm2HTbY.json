[
  {
    "start": "0",
    "end": "65000"
  },
  {
    "text": "so here we go again um I must say when I don't I work on",
    "start": "2040",
    "end": "9540"
  },
  {
    "text": "kubernetes like I think a couple of you here and when I when I read the outline",
    "start": "9540",
    "end": "15179"
  },
  {
    "text": "of this talk I must say I absolutely don't care about kubernetes I I study Physics so for me",
    "start": "15179",
    "end": "22020"
  },
  {
    "text": "CERN is the Mecca or something close to it so when I was particularly excited to",
    "start": "22020",
    "end": "28320"
  },
  {
    "text": "to to hear what Jack our friend Jack and engineer sir has to tell us so please",
    "start": "28320",
    "end": "36120"
  },
  {
    "text": "give it up for Jack think",
    "start": "36120",
    "end": "41579"
  },
  {
    "text": "hi everyone thanks for the nice introduction yes so I'll be talking about how we're",
    "start": "42719",
    "end": "47820"
  },
  {
    "text": "using kubernetes and openshift at CERN and I was getting a little bit worried before when we had to talk from ING from",
    "start": "47820",
    "end": "55199"
  },
  {
    "text": "from Robin about how they're having their namespace as a service product but I promise you they will simply enough",
    "start": "55199",
    "end": "61440"
  },
  {
    "text": "new things in this talk here so first a little bit about me so I",
    "start": "61440",
    "end": "67560"
  },
  {
    "start": "65000",
    "end": "65000"
  },
  {
    "text": "studied I.T security and cloud computing at Alta University in Finland and in my free time I like cycling and",
    "start": "67560",
    "end": "75600"
  },
  {
    "text": "also hiking in nature and Aya then I'm also a engineer at CERN",
    "start": "75600",
    "end": "80640"
  },
  {
    "text": "which is actually quite nice because this is the landscape of CERN so we have the",
    "start": "80640",
    "end": "87600"
  },
  {
    "text": "Lake Geneva here and at the tip there is Geneva you can see in the background we have the Alps close by so that's really",
    "start": "87600",
    "end": "94259"
  },
  {
    "text": "good if you're into cycling and hiking and yeah here on the right side there's",
    "start": "94259",
    "end": "99299"
  },
  {
    "text": "the main campus and there's a red ring here that's the LHC the Large Hadron",
    "start": "99299",
    "end": "104640"
  },
  {
    "text": "Collider that's this huge underground proton accelerator that we have where lots of experiments are being performed",
    "start": "104640",
    "end": "113040"
  },
  {
    "text": "you might also know that this guy was also working at CERN sir Tim Bernice Lee",
    "start": "113040",
    "end": "118560"
  },
  {
    "text": "and he invented the World Wide Web there and",
    "start": "118560",
    "end": "124758"
  },
  {
    "text": "and what that also means is that we have a long Legacy of running web services at",
    "start": "125340",
    "end": "130619"
  },
  {
    "text": "CERN because the web was invented there and most of these web services well",
    "start": "130619",
    "end": "136260"
  },
  {
    "start": "135000",
    "end": "135000"
  },
  {
    "text": "actually all of them are running in this data center so this is the CERN Data Center",
    "start": "136260",
    "end": "141319"
  },
  {
    "text": "so basically everything we do is on premise",
    "start": "141319",
    "end": "146340"
  },
  {
    "text": "um but actually 80 of the workload that's running in this data center is just what we call physics workload so",
    "start": "146340",
    "end": "152819"
  },
  {
    "text": "it's just running simulations computations analytics machine learning etc etc",
    "start": "152819",
    "end": "161120"
  },
  {
    "start": "162000",
    "end": "162000"
  },
  {
    "text": "but more and more of our users of course also want modern ways of deploying",
    "start": "162060",
    "end": "167519"
  },
  {
    "text": "applications doing it in a cloud native way and we as discern I.T department",
    "start": "167519",
    "end": "172920"
  },
  {
    "text": "offer two ways to do that we have a kubernetes service that is",
    "start": "172920",
    "end": "178860"
  },
  {
    "text": "based on openshift Magnum and or sorry an openstack Magnum and we have a",
    "start": "178860",
    "end": "184739"
  },
  {
    "text": "managed kubernetes service that is based on okd and we frequently get the question why",
    "start": "184739",
    "end": "191220"
  },
  {
    "text": "do you offer both like I mean managing like doing a kubernetes management is",
    "start": "191220",
    "end": "196800"
  },
  {
    "text": "already enough of a hassle why do you duplicate the effort and this is one of the things that I",
    "start": "196800",
    "end": "203099"
  },
  {
    "text": "want to explain in this talk because both of them have really different use",
    "start": "203099",
    "end": "208319"
  },
  {
    "text": "cases and in the end I will also highlight the benefits of kind of splitting these use",
    "start": "208319",
    "end": "214800"
  },
  {
    "start": "213000",
    "end": "213000"
  },
  {
    "text": "cases so let's first have a look at the the benefits of an unmanaged kubernetes",
    "start": "214800",
    "end": "220260"
  },
  {
    "text": "cluster so it's basically like a VM you create",
    "start": "220260",
    "end": "225480"
  },
  {
    "text": "the thing we give you an SSH key and you are root on that thing you can do whatever you like",
    "start": "225480",
    "end": "232500"
  },
  {
    "text": "you have the full control if you want to install packages or in the case of kubernetes you want to deploy a service",
    "start": "232500",
    "end": "240299"
  },
  {
    "text": "mesh or you want a different cni or whatever you can go ahead but you also need to know what you're doing",
    "start": "240299",
    "end": "246599"
  },
  {
    "text": "so it requires more skill more knowledge from the user and further on you also need to",
    "start": "246599",
    "end": "253860"
  },
  {
    "text": "understand how to scale your infrastructure but this is then one of the nice things because it's just your",
    "start": "253860",
    "end": "259320"
  },
  {
    "text": "cluster you can for example have dedicated nodes in the cluster that let's say have gpus in them so you can",
    "start": "259320",
    "end": "266340"
  },
  {
    "text": "run your machine learning workloads or you can take kubernetes nodes that have more memory if you have very memory",
    "start": "266340",
    "end": "272699"
  },
  {
    "text": "intensive workloads and all of these things are are aspects that you can customize when you have your own cluster",
    "start": "272699",
    "end": "281400"
  },
  {
    "text": "and finally one of the best benefits that we also see is that with a dedicated cluster you can really decide",
    "start": "281400",
    "end": "288780"
  },
  {
    "text": "which type of dependencies you want to take on so let's say for example you have a stateless application and you",
    "start": "288780",
    "end": "295740"
  },
  {
    "text": "basically just want HTTP traffic in and then you're connecting to a database somewhere else in that case your cluster",
    "start": "295740",
    "end": "303120"
  },
  {
    "text": "doesn't need any storage so it doesn't need a dependency on this additional service and the lower the the lower",
    "start": "303120",
    "end": "309540"
  },
  {
    "text": "dependent number of dependencies you have the lower the the risk is that",
    "start": "309540",
    "end": "315240"
  },
  {
    "text": "you're gonna have some kind of outage because one of your dependencies is not available",
    "start": "315240",
    "end": "321020"
  },
  {
    "text": "on the other hand the benefit of a managed kubernetes service where you only have access to the API and not the",
    "start": "322320",
    "end": "329280"
  },
  {
    "start": "329000",
    "end": "329000"
  },
  {
    "text": "underlying infrastructure is that we can optimize the resource user usage much",
    "start": "329280",
    "end": "335880"
  },
  {
    "text": "better this is also what Robin mentioned in his talk earlier today because by",
    "start": "335880",
    "end": "341639"
  },
  {
    "text": "putting multiple different tenants on the same cluster we can utilize the the",
    "start": "341639",
    "end": "348539"
  },
  {
    "text": "inefficiencies between the different workloads much better or we can kind of smoothen out traffic Peaks and and",
    "start": "348539",
    "end": "355139"
  },
  {
    "text": "bursts in in whichever workload you have in general also we can",
    "start": "355139",
    "end": "361320"
  },
  {
    "text": "um it's better for the if we have smaller and medium-sized workloads so if you have just a small python",
    "start": "361320",
    "end": "368280"
  },
  {
    "text": "application for example or just a standard Java application that doesn't need like a lot of resources then it's",
    "start": "368280",
    "end": "374460"
  },
  {
    "text": "it's much more efficient to run this in a shared cluster and finally the the most important point",
    "start": "374460",
    "end": "381539"
  },
  {
    "text": "is that you have a managed infrastructure so you as a user you just come to us and you basically have a have",
    "start": "381539",
    "end": "388080"
  },
  {
    "text": "a container as a service platform so you you give us a pod and we just run",
    "start": "388080",
    "end": "393479"
  },
  {
    "text": "it for you and that's all you need to take care of and we take care of handling security upgrades for the for",
    "start": "393479",
    "end": "399479"
  },
  {
    "text": "the kubernetes infrastructure for the underlying VM infrastructure for anything else that needs to be done",
    "start": "399479",
    "end": "406139"
  },
  {
    "text": "replacing nodes if they are unhealthy all of these things",
    "start": "406139",
    "end": "411240"
  },
  {
    "text": "and finally especially with with okd or openshift you also get a nice",
    "start": "411240",
    "end": "416360"
  },
  {
    "text": "user-friendly web UI and I really want I want to to to highlight how important",
    "start": "416360",
    "end": "422400"
  },
  {
    "text": "this is and how many of our users for for this is this is actually their main entry point to our platform because yeah",
    "start": "422400",
    "end": "429840"
  },
  {
    "text": "we as experts we know how to use cubectl or OC or Helm or whatever is our the",
    "start": "429840",
    "end": "436259"
  },
  {
    "text": "command line tool of the day but users are really happy when they can",
    "start": "436259",
    "end": "441419"
  },
  {
    "text": "just see their port that is running and they can click on it and they're going to see the logs and this is just really",
    "start": "441419",
    "end": "447300"
  },
  {
    "text": "nicely prepared and it it's a very smooth entry to the kubernetes cloud native world",
    "start": "447300",
    "end": "454880"
  },
  {
    "text": "now at CERN uh CERN is an academic institution a research institution and",
    "start": "456240",
    "end": "462300"
  },
  {
    "text": "that means our users also have a lot of academic freedom to put it lightly so we don't have a",
    "start": "462300",
    "end": "469259"
  },
  {
    "start": "463000",
    "end": "463000"
  },
  {
    "text": "golden path for deploying containers some people are just using the the web",
    "start": "469259",
    "end": "474900"
  },
  {
    "text": "dashboard like I just said others are using Cube CTL maybe from a from a CI CD",
    "start": "474900",
    "end": "480720"
  },
  {
    "text": "pipeline others again are using customize manifest or Helm charts and",
    "start": "480720",
    "end": "485819"
  },
  {
    "text": "then we see that the most advanced users have already adopted github's approaches such as flux or Argo CD but we also see",
    "start": "485819",
    "end": "494220"
  },
  {
    "text": "that there is not really a one-size-fits-all solution because we have a very very wide range of users we",
    "start": "494220",
    "end": "501960"
  },
  {
    "text": "have people who are from inside it too who are absolute experts who have time",
    "start": "501960",
    "end": "507360"
  },
  {
    "text": "to understand all of the details of kubernetes yaml but we have also people who maybe just wrote a small dashboard",
    "start": "507360",
    "end": "514860"
  },
  {
    "text": "so they can monitor what they are what their sensor is doing or maybe they just",
    "start": "514860",
    "end": "521099"
  },
  {
    "text": "want a small application that checks if their job that they have submitted to the bad service is still running",
    "start": "521099",
    "end": "528300"
  },
  {
    "text": "and they don't care about all of these details they just have their python app or or a Javascript app or whatever and",
    "start": "528300",
    "end": "536399"
  },
  {
    "text": "they just want to put it somewhere and just let it run there and in this case of course just using a",
    "start": "536399",
    "end": "541800"
  },
  {
    "text": "web dashboard to create this deployment once and just let it run there and updating the container image whenever I",
    "start": "541800",
    "end": "547740"
  },
  {
    "text": "need to is perfectly fine",
    "start": "547740",
    "end": "551360"
  },
  {
    "text": "one thing that is very important for us to turn is the topic of resource management",
    "start": "553320",
    "end": "558600"
  },
  {
    "text": "so all of our projects have a well-defined owner and usually also an",
    "start": "558600",
    "end": "564060"
  },
  {
    "start": "563000",
    "end": "563000"
  },
  {
    "text": "administrator group and this is necessary because again as a research institution we have a lot of people",
    "start": "564060",
    "end": "569580"
  },
  {
    "text": "coming and going people who are maybe only temporarily associated with CERN because they have a let's say they are",
    "start": "569580",
    "end": "576959"
  },
  {
    "text": "doing a PhD thesis or or maybe just a student thesis",
    "start": "576959",
    "end": "582240"
  },
  {
    "text": "so it's really important to keep track of the owner for us so that resources don't get orphaned and then something",
    "start": "582240",
    "end": "588779"
  },
  {
    "text": "has been sitting there for five years and we don't know if we can turn it off and if we turn it off if it's if",
    "start": "588779",
    "end": "595140"
  },
  {
    "text": "something is going to blow up somewhere that we don't know about",
    "start": "595140",
    "end": "599540"
  },
  {
    "text": "um and finally also Associated to these projects are also always resource quotas",
    "start": "600300",
    "end": "606180"
  },
  {
    "text": "um that kind of restrict how much you're allowed to use because we don't do internal accounting so we don't account",
    "start": "606180",
    "end": "612060"
  },
  {
    "text": "for how many resources you're using but that that's why we need a a restriction",
    "start": "612060",
    "end": "617220"
  },
  {
    "text": "a limit on by default how many resources you're allowed to use of course people are allowed to request",
    "start": "617220",
    "end": "623399"
  },
  {
    "text": "more resources if they need to but by default we have low quotas",
    "start": "623399",
    "end": "629420"
  },
  {
    "text": "so let's get into the topic of how people can get a kubernetes clusterance",
    "start": "629940",
    "end": "635399"
  },
  {
    "text": "term so this is a service that is managed by it and as I already mentioned before it's based on openstack Magnum",
    "start": "635399",
    "end": "642360"
  },
  {
    "text": "and which completely automates the initial provisioning of the cluster",
    "start": "642360",
    "end": "648420"
  },
  {
    "text": "and our team has introduced feature toggles so that you can enable or",
    "start": "648420",
    "end": "654300"
  },
  {
    "text": "disable very common integration so this is things like um that your that your kubernetes",
    "start": "654300",
    "end": "661079"
  },
  {
    "text": "cluster will report to the central monitoring service that it will log that they will also send the logs to a",
    "start": "661079",
    "end": "668399"
  },
  {
    "text": "central location there which kind of storage endpoints you want to have all",
    "start": "668399",
    "end": "673800"
  },
  {
    "text": "of this is very flexible and and this is what I mentioned before is is what people appreciate about this service",
    "start": "673800",
    "end": "679620"
  },
  {
    "text": "that they can really choose which Integrations they have and also then of course which dependencies you have",
    "start": "679620",
    "end": "686459"
  },
  {
    "text": "and the team is using Argo workflows since very recently to do continuous",
    "start": "686459",
    "end": "691620"
  },
  {
    "text": "testing so spinning up a new cluster running the entire test suit over the cluster and then deprovisioning it again",
    "start": "691620",
    "end": "699260"
  },
  {
    "text": "in practice it looks something like this so you just run openstack Coe cluster",
    "start": "700079",
    "end": "705600"
  },
  {
    "text": "template list and then you can see which kind of flavors are currently available then you run a cluster create command",
    "start": "705600",
    "end": "713579"
  },
  {
    "text": "and you specify which flavor you want to have you just need to specify also then",
    "start": "713579",
    "end": "718680"
  },
  {
    "text": "an SSH key so that you can access your nodes and finally you can specify additional",
    "start": "718680",
    "end": "724200"
  },
  {
    "text": "labels so in this case I'm enabling the monitoring component and a couple of",
    "start": "724200",
    "end": "729240"
  },
  {
    "text": "minutes later after running this command your cluster will be ready it's pretty simple for users who know",
    "start": "729240",
    "end": "735420"
  },
  {
    "text": "what they're doing behind the scenes it looks something",
    "start": "735420",
    "end": "740820"
  },
  {
    "start": "739000",
    "end": "739000"
  },
  {
    "text": "like this so we have at the bottom here we have the openstack layer so where we have compute so that means VMS and then",
    "start": "740820",
    "end": "747959"
  },
  {
    "text": "Magnum is the openstack component that takes care of the provisioning together with the heat component and this kind of",
    "start": "747959",
    "end": "755519"
  },
  {
    "text": "spits out some some resources so the virtual machines Etc and then the actual",
    "start": "755519",
    "end": "761160"
  },
  {
    "text": "cluster configuration gets applied with a Helm chart and this this is where these feature toggles feed into into",
    "start": "761160",
    "end": "768000"
  },
  {
    "text": "this Helm chart which will then kind of configure your cluster the way you initially requested it",
    "start": "768000",
    "end": "775440"
  },
  {
    "text": "but I should note that this only happens during the initial provisioning so afterwards you can really do whatever",
    "start": "775440",
    "end": "781560"
  },
  {
    "text": "you want if you want to take out the Prometheus and put something else there that's totally your thing you're free to",
    "start": "781560",
    "end": "787200"
  },
  {
    "text": "go on the other hand we're also using okd",
    "start": "787200",
    "end": "793920"
  },
  {
    "start": "790000",
    "end": "790000"
  },
  {
    "text": "so that is the community edition of Red Hats openshift container platform",
    "start": "793920",
    "end": "800899"
  },
  {
    "text": "which by now since a couple of years is really the foundation of the web",
    "start": "800899",
    "end": "806579"
  },
  {
    "text": "services infrastructure at Stern and that is because it provides a multi-tenant highly available and secure",
    "start": "806579",
    "end": "813120"
  },
  {
    "text": "base it's it's really amazing if you compare vanilla kubernetes deployment to",
    "start": "813120",
    "end": "818459"
  },
  {
    "text": "an openshift deployment how much you get out of the box we then go ahead and enhance this kind",
    "start": "818459",
    "end": "826800"
  },
  {
    "text": "of out of the box okd with additional features that are either requested by",
    "start": "826800",
    "end": "831839"
  },
  {
    "text": "our users or that are just necessary to integrate well in the certain Computing environment",
    "start": "831839",
    "end": "837420"
  },
  {
    "text": "so these are things like registering your hostname for you the Ingress in the",
    "start": "837420",
    "end": "842760"
  },
  {
    "text": "DNS servers handling automatic certificate renewal and requests",
    "start": "842760",
    "end": "849839"
  },
  {
    "text": "um very important also for us and for our users is the fact that we provide lots of different storage Integrations",
    "start": "849839",
    "end": "855660"
  },
  {
    "text": "so our main persistent storage is CFS but we also have this thing at CERN that",
    "start": "855660",
    "end": "863519"
  },
  {
    "text": "is called EOS which is a giant shared file system which basically houses all",
    "start": "863519",
    "end": "868620"
  },
  {
    "text": "of the physics data that gets produced at CERN and is partially backed by by",
    "start": "868620",
    "end": "873959"
  },
  {
    "text": "tape drives actually and then there's also things like cbmfs which is a which",
    "start": "873959",
    "end": "879959"
  },
  {
    "text": "is basically a software repository that gets served by the network and so these These Things Are",
    "start": "879959",
    "end": "887160"
  },
  {
    "text": "something that you don't get out of the box uh even with okb we also handle custom English router",
    "start": "887160",
    "end": "894540"
  },
  {
    "text": "sharding and something that I will come later to is we also add our own operators on top of okt",
    "start": "894540",
    "end": "902240"
  },
  {
    "text": "so this then what I just described is then kind of the shared base of okd",
    "start": "908339",
    "end": "914279"
  },
  {
    "text": "and based on this we then have different cluster flavors that are specialized in",
    "start": "914279",
    "end": "920160"
  },
  {
    "text": "a particular use case so our our most generic and kind of",
    "start": "920160",
    "end": "925560"
  },
  {
    "text": "lowest complexity use case is the platform as a service which currently",
    "start": "925560",
    "end": "931079"
  },
  {
    "text": "houses around 1 400 different projects and it's actually our largest production",
    "start": "931079",
    "end": "936120"
  },
  {
    "text": "okd cluster and this is really just container as a service so users just put pods inside or",
    "start": "936120",
    "end": "943199"
  },
  {
    "text": "well deployments to be precise uh and and we run it for them and we take care",
    "start": "943199",
    "end": "948540"
  },
  {
    "text": "of handling all of the infrastructure but basically the user sees a completely normal kubernetes API",
    "start": "948540",
    "end": "955199"
  },
  {
    "text": "we also have what we call the app catalog that gives the users much less control over their application",
    "start": "955199",
    "end": "961800"
  },
  {
    "text": "and they only have access to predefined application templates so these are things like grafana",
    "start": "961800",
    "end": "969480"
  },
  {
    "text": "instance Nexus WordPress and",
    "start": "969480",
    "end": "974820"
  },
  {
    "text": "you don't actually have a deployment in there but instead you'd only deal with",
    "start": "974820",
    "end": "980100"
  },
  {
    "text": "custom resources that are backed by operators that we have developed which will then deploy the application as",
    "start": "980100",
    "end": "986639"
  },
  {
    "text": "necessary for you then there's also the the web us cluster",
    "start": "986639",
    "end": "993300"
  },
  {
    "text": "which was actually our first okd cluster which is at the moment housing around 4000 projects and this is basically just",
    "start": "993300",
    "end": "1000800"
  },
  {
    "text": "a shared web hosting cluster so it's serving files from the EOS file system",
    "start": "1000800",
    "end": "1006980"
  },
  {
    "text": "that I that I mentioned before but at the same time uh it's highly",
    "start": "1006980",
    "end": "1012500"
  },
  {
    "text": "multi-tenant so it yeah like I said it's housing four four thousand websites but",
    "start": "1012500",
    "end": "1018560"
  },
  {
    "text": "as you can see from the numbers it's actually only 20 nodes so it's very very efficient at what it's doing and um",
    "start": "1018560",
    "end": "1025640"
  },
  {
    "text": "sometimes also serving terabytes of data in very short time when one of our",
    "start": "1025640",
    "end": "1030678"
  },
  {
    "text": "experiments for example releases new data on the web and people start downloading it",
    "start": "1030679",
    "end": "1037178"
  },
  {
    "text": "and finally there's the Drupal use case where our colleagues from the Drupal team have developed an extremely",
    "start": "1037280",
    "end": "1043819"
  },
  {
    "text": "Advanced operator for running Drupal websites because Drupal is the most",
    "start": "1043819",
    "end": "1049100"
  },
  {
    "text": "widely used content management system at CERN so all of the main websites are currently using it and this Drupal",
    "start": "1049100",
    "end": "1056000"
  },
  {
    "text": "operator provides a really simple interface for users to say I want a Drupal website with that version and",
    "start": "1056000",
    "end": "1064039"
  },
  {
    "text": "they don't need to take care of anything else and then the operator goes to the cluster or is running inside the cluster",
    "start": "1064039",
    "end": "1070640"
  },
  {
    "text": "and creates deployments as necessary Provisions databases make sure that database migrations are applied and so",
    "start": "1070640",
    "end": "1077360"
  },
  {
    "text": "on and so forth now we don't of course want to bore our",
    "start": "1077360",
    "end": "1083840"
  },
  {
    "start": "1082000",
    "end": "1082000"
  },
  {
    "text": "users then with having to write yaml manifest so they that our kubernetes operators know what they need to do",
    "start": "1083840",
    "end": "1091039"
  },
  {
    "text": "instead we have this thing called the web services portal which exposes all of these features in a really user-friendly",
    "start": "1091039",
    "end": "1098240"
  },
  {
    "text": "UI so for example to create a website on",
    "start": "1098240",
    "end": "1104120"
  },
  {
    "text": "this webios cluster that I mentioned before you basically just need to fill out this form where you say what the",
    "start": "1104120",
    "end": "1111140"
  },
  {
    "text": "host name should be and what the description is and from which path it should be served and you click on create",
    "start": "1111140",
    "end": "1117919"
  },
  {
    "text": "but what happens behind the scenes is that this portal actually does not have any state itself it just takes the",
    "start": "1117919",
    "end": "1124820"
  },
  {
    "text": "permissions that the user has and creates a resource in the cluster in this case a custom resource",
    "start": "1124820",
    "end": "1131299"
  },
  {
    "text": "definition or a custom resource with the parameters that you put in here",
    "start": "1131299",
    "end": "1137900"
  },
  {
    "text": "the same happens for the Drupal side so again I'm just I just need to say what the hostname should be and then kind of",
    "start": "1137900",
    "end": "1144559"
  },
  {
    "text": "which version of Drupal I want and I click on create and behind the scenes something like",
    "start": "1144559",
    "end": "1149960"
  },
  {
    "start": "1149000",
    "end": "1149000"
  },
  {
    "text": "this gets put into the cluster and we entirely rely on the role-based",
    "start": "1149960",
    "end": "1155299"
  },
  {
    "text": "access control that kubernetes already implements and that the multi-tenant okd gives us out of the box",
    "start": "1155299",
    "end": "1161419"
  },
  {
    "text": "so if the user is in principle to allow to create such an object against the API then our web services portal will do the",
    "start": "1161419",
    "end": "1169340"
  },
  {
    "text": "same on behalf of the user and you can see that the same Fields kind of show up here again so we can see",
    "start": "1169340",
    "end": "1175160"
  },
  {
    "text": "the site URL we can see that the the Drupal version has been specified and",
    "start": "1175160",
    "end": "1180440"
  },
  {
    "text": "then we can see what the the operator has been doing so the deployment has been rolled out as expected",
    "start": "1180440",
    "end": "1186340"
  },
  {
    "text": "it checked if the any database migrations need to be applied and which",
    "start": "1186340",
    "end": "1191539"
  },
  {
    "text": "backups are available and all of this is completely automated",
    "start": "1191539",
    "end": "1196779"
  },
  {
    "start": "1198000",
    "end": "1198000"
  },
  {
    "text": "I also want to mention how we actually manage these clusters so we have these four clusters that I showed on the",
    "start": "1198440",
    "end": "1204260"
  },
  {
    "text": "previous slide in in production plus additional ones in staging and deaf environments",
    "start": "1204260",
    "end": "1209419"
  },
  {
    "text": "and contrary to to the current Trend we are actually treating these clusters as pets because",
    "start": "1209419",
    "end": "1216799"
  },
  {
    "text": "they are stateful in our case users are putting their workloads directly into",
    "start": "1216799",
    "end": "1221960"
  },
  {
    "text": "our clusters be it at Drupal side or a regular kubernetes deployment and we",
    "start": "1221960",
    "end": "1227600"
  },
  {
    "text": "need to make sure that we don't lose it because we cannot just reprovision the cluster because then all of this state would be gone",
    "start": "1227600",
    "end": "1235179"
  },
  {
    "text": "um furthermore we have we have implemented this architecture that each cluster that we create is completely",
    "start": "1236600",
    "end": "1243140"
  },
  {
    "text": "self-sufficient and isolated so it has a separate openstack project it uses separate application registrations",
    "start": "1243140",
    "end": "1249440"
  },
  {
    "text": "everything is isolated from each other and we don't um for example connect them with",
    "start": "1249440",
    "end": "1256280"
  },
  {
    "text": "different Argo CD deployments or something like this and this is very important for us so that when we make a",
    "start": "1256280",
    "end": "1262520"
  },
  {
    "text": "mistake we reduce the blast radius as much as possible",
    "start": "1262520",
    "end": "1268720"
  },
  {
    "text": "finally also we don't really have a need to like other people to throw clusters away and create new ones and move the",
    "start": "1270620",
    "end": "1277039"
  },
  {
    "text": "workloads because okd4 makes In-Place cluster upgrades completely seamless I",
    "start": "1277039",
    "end": "1283340"
  },
  {
    "text": "don't know who of you ever tried to upgrade an openshift cluster but it's really amazing openshift by itself will",
    "start": "1283340",
    "end": "1289640"
  },
  {
    "text": "just go through the entire cluster and update each component that it needs to in the right order and highly available",
    "start": "1289640",
    "end": "1296240"
  },
  {
    "text": "and as a user you don't even notice that it's happening so it will first update your hcd nodes and then it will update",
    "start": "1296240",
    "end": "1302900"
  },
  {
    "text": "your API server and so on and so forth and it goes through each one of them",
    "start": "1302900",
    "end": "1308679"
  },
  {
    "text": "now as I mentioned before we deploy a lot of things on top of okd actually and for this we're using Argo CD",
    "start": "1309320",
    "end": "1316539"
  },
  {
    "text": "which is I'll come to in in a in a future slide which is a very nice",
    "start": "1316539",
    "end": "1321620"
  },
  {
    "text": "integration into this way of managing an okd cluster and finally we recently also developed",
    "start": "1321620",
    "end": "1328340"
  },
  {
    "text": "an what we call okdctl tool that allows us to facilitate common operations such",
    "start": "1328340",
    "end": "1334100"
  },
  {
    "text": "as creating a cluster deleting a cluster performing maintenance tasks such as replacing nodes or maybe freezing a work",
    "start": "1334100",
    "end": "1341360"
  },
  {
    "text": "node so that we can debug something overall the deployment then looks",
    "start": "1341360",
    "end": "1348260"
  },
  {
    "start": "1346000",
    "end": "1346000"
  },
  {
    "text": "something like this so at the at the bottom we still have our openstack cloud then we put okd on top of it and Argo CD",
    "start": "1348260",
    "end": "1356480"
  },
  {
    "text": "is kind of the brain of the entire operation so it's managing both the okd",
    "start": "1356480",
    "end": "1361520"
  },
  {
    "text": "configuration because if you're not familiar with openshift everything in openshift is managed through an operator",
    "start": "1361520",
    "end": "1368240"
  },
  {
    "text": "itself so if you want to change the configuration of an API server you just edit the API service crd and you need to",
    "start": "1368240",
    "end": "1376820"
  },
  {
    "text": "change some parameters in there and then the operator will go ahead and actually put those changes onto the nodes",
    "start": "1376820",
    "end": "1383179"
  },
  {
    "text": "and similarly for all other components such as image registry English controllers Etc",
    "start": "1383179",
    "end": "1390559"
  },
  {
    "text": "and in addition to managing okd Argo CD also manages all of the other things and this is actually just a small",
    "start": "1390559",
    "end": "1397340"
  },
  {
    "text": "sample of the things that we deploy such as Manila and cefs Integrations for the",
    "start": "1397340",
    "end": "1402440"
  },
  {
    "text": "storage I previously mentioned third manager open policy agent then also",
    "start": "1402440",
    "end": "1408620"
  },
  {
    "text": "integration with the CERN single sign-on Etc",
    "start": "1408620",
    "end": "1413320"
  },
  {
    "start": "1414000",
    "end": "1414000"
  },
  {
    "text": "now using agrocd for this is really great because it's a natural extension of the",
    "start": "1414679",
    "end": "1420679"
  },
  {
    "text": "of the of what we are already used to in kubernetes it's this continuous reconciliation of resources if a",
    "start": "1420679",
    "end": "1427880"
  },
  {
    "text": "resource is not in the state that we declared it to then argocd will just make it that stage",
    "start": "1427880",
    "end": "1434360"
  },
  {
    "text": "and then this is very nice because The Operators either our own operators",
    "start": "1434360",
    "end": "1440299"
  },
  {
    "text": "or The okd Operators will then pick up this change again So eventually this the cluster always",
    "start": "1440299",
    "end": "1446659"
  },
  {
    "text": "converges into the desired state that has been described by a git Repository",
    "start": "1446659",
    "end": "1452860"
  },
  {
    "text": "and what in in addition what we also like about this approach is that if something cannot be converged into the",
    "start": "1454280",
    "end": "1461120"
  },
  {
    "text": "desired State we automatically get an alert about it because the rocd",
    "start": "1461120",
    "end": "1466340"
  },
  {
    "text": "application is out of sync then so it might not be that something is necessarily broken in the cluster so",
    "start": "1466340",
    "end": "1472280"
  },
  {
    "text": "that the cluster is completely offline in which case of course we would also notice but maybe there is just a small",
    "start": "1472280",
    "end": "1478100"
  },
  {
    "text": "misconfiguration let's say in the DNS setup this would then also get picked up by",
    "start": "1478100",
    "end": "1484039"
  },
  {
    "text": "Argo CD and if it cannot ensure that the resources in the desired State we will get an alarm about it",
    "start": "1484039",
    "end": "1491539"
  },
  {
    "text": "so it combines really well with this operator driven management that is already built into okd clusters",
    "start": "1491539",
    "end": "1500240"
  },
  {
    "text": "and finally where argocd both the the command line and the web UI also gives",
    "start": "1500240",
    "end": "1507380"
  },
  {
    "text": "us a great overview of the resources that we have manually deployed into the cluster and by now they're really a lot",
    "start": "1507380",
    "end": "1513380"
  },
  {
    "text": "like we're deploying hundreds of resources into the into a cluster and of course you cannot keep all of them in in",
    "start": "1513380",
    "end": "1519140"
  },
  {
    "text": "your head or always understand where each resource is coming from but this is why the Argo UI is really nice to to",
    "start": "1519140",
    "end": "1526640"
  },
  {
    "text": "kind of understand where is this resource coming from which state should it be in and why is it there in the",
    "start": "1526640",
    "end": "1532640"
  },
  {
    "text": "first place",
    "start": "1532640",
    "end": "1535000"
  },
  {
    "text": "I also want to give a special Spotlight to the open policy agent which is a",
    "start": "1539539",
    "end": "1544820"
  },
  {
    "start": "1543000",
    "end": "1543000"
  },
  {
    "text": "component that we're really using for many many different use cases including helping us as the administrators but",
    "start": "1544820",
    "end": "1551659"
  },
  {
    "text": "also helping our users with some tasks so for example helping us the administrators is ensuring that each",
    "start": "1551659",
    "end": "1558919"
  },
  {
    "text": "hostname because we have this shared namespace of or shared DNS zone of of",
    "start": "1558919",
    "end": "1565700"
  },
  {
    "text": "host names that users can use is only used once across each cluster so that you cannot steal someone else's DNS name",
    "start": "1565700",
    "end": "1573020"
  },
  {
    "text": "it's also used for for the Ingress up setup for volumes",
    "start": "1573020",
    "end": "1579080"
  },
  {
    "text": "um for networking visibility so that an application for example is only Exposed",
    "start": "1579080",
    "end": "1584539"
  },
  {
    "text": "on our intranet or to the internet or on the technical Network which is then another internal Network that we have",
    "start": "1584539",
    "end": "1591620"
  },
  {
    "text": "um but also for more tedious tasks like automation of Mount points so for this",
    "start": "1591620",
    "end": "1596779"
  },
  {
    "text": "when when a user wants to mount this EOS file system we need to make sure that it",
    "start": "1596779",
    "end": "1602240"
  },
  {
    "text": "has valid cables credentials and then these credentials expire after 24 hours so we help users by actually injecting",
    "start": "1602240",
    "end": "1609380"
  },
  {
    "text": "an init container and a side guard container automatically into their deployment that already has sets up",
    "start": "1609380",
    "end": "1615320"
  },
  {
    "text": "everything as it needs to and the only thing the user needs to do is set a small annotation in their deployment and",
    "start": "1615320",
    "end": "1621679"
  },
  {
    "text": "open policy agent will take care of the rest",
    "start": "1621679",
    "end": "1625778"
  },
  {
    "start": "1626000",
    "end": "1626000"
  },
  {
    "text": "like I mentioned operators okds operators were using Upstream operators such as developer backup operator or",
    "start": "1628220",
    "end": "1635720"
  },
  {
    "text": "assert manager for requesting certificates but we have also developed a lot of operators ourselves and these",
    "start": "1635720",
    "end": "1642380"
  },
  {
    "text": "are what is powering these other clusters that are not the generic platform as a service",
    "start": "1642380",
    "end": "1647960"
  },
  {
    "text": "so we have the webios operator that takes care of handling this shared site",
    "start": "1647960",
    "end": "1653600"
  },
  {
    "text": "hosting we have a gitlab Pages site operator that integrates with our gitlab deployment we have the authentication",
    "start": "1653600",
    "end": "1660679"
  },
  {
    "text": "operator that takes care of the entire Project Life Cycle and tying it back",
    "start": "1660679",
    "end": "1665779"
  },
  {
    "text": "into the CERN single sign-on we have a land B operator landib is",
    "start": "1665779",
    "end": "1671299"
  },
  {
    "text": "cern's internal kind of dhp management solution so that needs to be integrated",
    "start": "1671299",
    "end": "1677900"
  },
  {
    "text": "with DNS if you want to request a new hostname and finally also for each of these application templates we are using",
    "start": "1677900",
    "end": "1685460"
  },
  {
    "text": "Helm operators which are a very thin layer if you're not familiar so it's you basically the operator SDK allows you to",
    "start": "1685460",
    "end": "1694340"
  },
  {
    "text": "build these hum operators just by giving it a Helm chart and then based on the input values of this Helm chart it will",
    "start": "1694340",
    "end": "1701360"
  },
  {
    "text": "automatically generate a crd for you and this is nice for simple use cases such as grafana for example where the",
    "start": "1701360",
    "end": "1709039"
  },
  {
    "text": "user just needs to needs to say I want this version of grafana with that and",
    "start": "1709039",
    "end": "1714559"
  },
  {
    "text": "that hostname then the operator basically just runs a Helm template once and installs the necessary resources in",
    "start": "1714559",
    "end": "1720919"
  },
  {
    "text": "the classroom and again it continuously reconciles those",
    "start": "1720919",
    "end": "1726640"
  },
  {
    "text": "now what did we learn during this time of operating these services users are very happy about the Internal",
    "start": "1726740",
    "end": "1734480"
  },
  {
    "start": "1731000",
    "end": "1731000"
  },
  {
    "text": "Documentation that we have this might be something if you're if you're building such a service you might be tempted to",
    "start": "1734480",
    "end": "1741320"
  },
  {
    "text": "just skip because well there is so much great Upstream documentation and that's true",
    "start": "1741320",
    "end": "1746779"
  },
  {
    "text": "but still your users like to have a friendly entry point into your specific service and then from there you can link",
    "start": "1746779",
    "end": "1753440"
  },
  {
    "text": "to external resources we're also very happy that operators can",
    "start": "1753440",
    "end": "1759919"
  },
  {
    "text": "help us in so many different tasks both for us as admins but also for the users",
    "start": "1759919",
    "end": "1765159"
  },
  {
    "text": "but we also really need to pay attention how we use them because they are very sharp tools and we just recently two",
    "start": "1765159",
    "end": "1773299"
  },
  {
    "text": "months ago had a pretty big incident where one of the operators was actually misconfigured and started deleting a",
    "start": "1773299",
    "end": "1779240"
  },
  {
    "text": "bunch of resources in the classroom this is where I want to point out that",
    "start": "1779240",
    "end": "1784640"
  },
  {
    "text": "wherever possible you should try to use soft deletion so marketing resource is deleted Market is unavailable and then",
    "start": "1784640",
    "end": "1791240"
  },
  {
    "text": "just clean it up 30 days later at the same time not everything has to",
    "start": "1791240",
    "end": "1796880"
  },
  {
    "text": "be automated we frequent relatively frequently have steps that we could automate but",
    "start": "1796880",
    "end": "1803840"
  },
  {
    "text": "actually it would not be worth the effort because in the end we just need to run one or two commands for five minutes and honestly in five minutes you",
    "start": "1803840",
    "end": "1811220"
  },
  {
    "text": "cannot reliably script it finally splitting the kubernetes as a",
    "start": "1811220",
    "end": "1817460"
  },
  {
    "text": "service offering a CERN into both this kind of unmanaged flavor and the more managed flavor is really beneficial for",
    "start": "1817460",
    "end": "1825260"
  },
  {
    "text": "both Services because we can share expertise knowledge and experiences but",
    "start": "1825260",
    "end": "1832580"
  },
  {
    "text": "at the same time we can serve very very different use cases that we could never satisfy with either one of them if we",
    "start": "1832580",
    "end": "1839539"
  },
  {
    "text": "just did unmanaged kubernetes because then most of our users would just be completely overloaded but at the same",
    "start": "1839539",
    "end": "1846440"
  },
  {
    "text": "time if we only had the managed service we also could not serve all of our users because some of them just have really",
    "start": "1846440",
    "end": "1852500"
  },
  {
    "text": "special requests some of them have different compliancy or auditing requirements some of them have different",
    "start": "1852500",
    "end": "1858799"
  },
  {
    "text": "compute requirements others just want a service mesh that maybe we cannot offer",
    "start": "1858799",
    "end": "1863899"
  },
  {
    "text": "to all of our users because it's too complex to implement so having these two separate Services overall is very",
    "start": "1863899",
    "end": "1870200"
  },
  {
    "text": "beneficial for us with that I would like to thank you for",
    "start": "1870200",
    "end": "1875539"
  },
  {
    "text": "your attention and thank the organizers of this awesome Meetup for putting this",
    "start": "1875539",
    "end": "1880700"
  },
  {
    "text": "all together I think it's really well organized and you can find the slides",
    "start": "1880700",
    "end": "1885740"
  },
  {
    "text": "under this link thank you very much thank you very much Jack",
    "start": "1885740",
    "end": "1893799"
  },
  {
    "text": "um I just have one question for everyone before I open up for questions how many shivers",
    "start": "1894620",
    "end": "1900740"
  },
  {
    "text": "when he said tape there you go hi",
    "start": "1900740",
    "end": "1906980"
  },
  {
    "text": "impressive thank you very much Jack do you have any questions project we have time for three questions",
    "start": "1906980",
    "end": "1914740"
  },
  {
    "text": "yes we do",
    "start": "1917720",
    "end": "1920500"
  },
  {
    "text": "with customers",
    "start": "1930700",
    "end": "1935019"
  },
  {
    "text": "how do you handle customers that meet their own self-managed kubernetes cluster and cry for support",
    "start": "1937120",
    "end": "1944679"
  },
  {
    "text": "um well so it's for for us it's it's internal users so well if they want to",
    "start": "1945020",
    "end": "1951980"
  },
  {
    "text": "run their own cluster they can we don't forbid them from doing it um this is again something that we",
    "start": "1951980",
    "end": "1958760"
  },
  {
    "text": "really try to adjust to whatever the whatever the people need they are also",
    "start": "1958760",
    "end": "1964399"
  },
  {
    "text": "unmanaged completely unmanaged kubernetes clusters it's really coming back to that academic freedom if you",
    "start": "1964399",
    "end": "1970700"
  },
  {
    "text": "want to do something you can",
    "start": "1970700",
    "end": "1975158"
  },
  {
    "text": "I've noticed that you got like thousands of different projects and I'm curious",
    "start": "1977600",
    "end": "1982760"
  },
  {
    "text": "how do you do kind of API updates in terms of our call specifications that change like",
    "start": "1982760",
    "end": "1989779"
  },
  {
    "text": "from uh one version of kids to another like how to handle that for so many",
    "start": "1989779",
    "end": "1995899"
  },
  {
    "text": "workloads that's a that's a good point so I would",
    "start": "1995899",
    "end": "2001539"
  },
  {
    "text": "say um as a starting point okd really helps with this because well you have all of this support from from Red Hat openshift",
    "start": "2001539",
    "end": "2009640"
  },
  {
    "text": "um that they already make sure that you get warnings early enough hey this thing is going to be deprecated into",
    "start": "2009640",
    "end": "2015940"
  },
  {
    "text": "kubernetes versions like you should really look into uh fixing that now like",
    "start": "2015940",
    "end": "2021399"
  },
  {
    "text": "what we recently had with kubernetes chrome jobs that the one better one was",
    "start": "2021399",
    "end": "2026559"
  },
  {
    "text": "deprecated um so that is one thing and for our internal self",
    "start": "2026559",
    "end": "2032740"
  },
  {
    "text": "um self-developed crds there we can actually kind of collaborate with our",
    "start": "2032740",
    "end": "2038080"
  },
  {
    "text": "users and and do the patches on the fly as we need to let's say if something",
    "start": "2038080",
    "end": "2043419"
  },
  {
    "text": "changes in the spec we can say hey you need to modify this or that it's gonna the behavior is gonna stay the same just",
    "start": "2043419",
    "end": "2049839"
  },
  {
    "text": "add that field there I do have one question Jack yes please",
    "start": "2049839",
    "end": "2055480"
  },
  {
    "text": "um how do you guarantee a good security posture of those clusters that you end totally over to your users",
    "start": "2055480",
    "end": "2062618"
  },
  {
    "text": "um I would say we don't guarantee it you can definitely mess that up we try to",
    "start": "2062619",
    "end": "2068500"
  },
  {
    "text": "provide a good base as a starting point and sufficient references",
    "start": "2068500",
    "end": "2073540"
  },
  {
    "text": "um then there's an additional check that unlike unlike these okd clusters you",
    "start": "2073540",
    "end": "2081040"
  },
  {
    "text": "basically need if you want to expose it to the internet for example you need additional approval from the security",
    "start": "2081040",
    "end": "2086500"
  },
  {
    "text": "team and in that case they will also check that what you're doing in that kubernetes cluster is actually somewhat",
    "start": "2086500",
    "end": "2092618"
  },
  {
    "text": "secure so those unmanaged clusters by default they are not exposed at least to the internet",
    "start": "2092619",
    "end": "2098380"
  },
  {
    "text": "thank you very much Jack so CERN",
    "start": "2098380",
    "end": "2104820"
  },
  {
    "text": "impresses as usual we we are going to have the next talk at",
    "start": "2104820",
    "end": "2111099"
  },
  {
    "text": "five o'clock just before the next talk we're gonna have two very short pitches from our",
    "start": "2111099",
    "end": "2119320"
  },
  {
    "text": "very beloved sponsors and we are so you guys have 10 minutes",
    "start": "2119320",
    "end": "2126460"
  },
  {
    "text": "to stretch your legs if you like if so should you want to but this is the best room so come back here please",
    "start": "2126460",
    "end": "2133839"
  },
  {
    "text": "thank you",
    "start": "2133839",
    "end": "2136560"
  }
]