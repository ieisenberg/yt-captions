[
  {
    "text": "okay um thank you so hello everyone um my name is and I'm like six",
    "start": "10320",
    "end": "16619"
  },
  {
    "text": "scalability TL for ever almost um uh at least that's that's my feeling",
    "start": "16619",
    "end": "24600"
  },
  {
    "text": "um so I moved this community for eight and a half years um at this point ish so um and then",
    "start": "24600",
    "end": "31500"
  },
  {
    "text": "today I'm going to to give this presentation about sequence k6 scalable what we are doing in six scalability",
    "start": "31500",
    "end": "37860"
  },
  {
    "text": "um both the introduction and a little bit more of a deep dive um so let's start what we what with",
    "start": "37860",
    "end": "45960"
  },
  {
    "text": "talking what we are doing as part of sex scalability and there are a couple couple different categories of things so",
    "start": "45960",
    "end": "53879"
  },
  {
    "text": "um first we Define and drive what scalability of kubernetes really is it's",
    "start": "53879",
    "end": "59160"
  },
  {
    "text": "um as you will see in a moment like it's it's not really obvious and what are our goals",
    "start": "59160",
    "end": "65100"
  },
  {
    "text": "um in terms of where where we would like the system to to get um based on that like we coordinate and",
    "start": "65100",
    "end": "72180"
  },
  {
    "text": "contribute the actual improvements to to to reach those goals that we defined",
    "start": "72180",
    "end": "77880"
  },
  {
    "text": "um we Monitor and measure the system and performance of the system to to actually",
    "start": "77880",
    "end": "83520"
  },
  {
    "text": "see that our goals were really reached um based on based on the actual",
    "start": "83520",
    "end": "90540"
  },
  {
    "text": "um system Behavior we protect the system from scalability regressions that's",
    "start": "90540",
    "end": "96000"
  },
  {
    "text": "that's probably one of the most important things um and and finally we um",
    "start": "96000",
    "end": "102360"
  },
  {
    "text": "we go to the community and consult many different many different improvements or many different features that are happening across the",
    "start": "102360",
    "end": "109560"
  },
  {
    "text": "the whole kubernetes area one more note here is we are at least",
    "start": "109560",
    "end": "117420"
  },
  {
    "text": "sometimes confused with like the outer scaling sick those are two different things um here we are we are focusing and sex",
    "start": "117420",
    "end": "124079"
  },
  {
    "text": "scalability we are focusing on like the overall um performance of the system how how far",
    "start": "124079",
    "end": "129780"
  },
  {
    "text": "you can go how how far you can push certain certain limits of kubernetes out",
    "start": "129780",
    "end": "136260"
  },
  {
    "text": "of sync Auto scaling is focused on how to how to horizontally or vertically scale",
    "start": "136260",
    "end": "144420"
  },
  {
    "text": "like certain aspects of the system so for example horizontal pod Auto scaling",
    "start": "144420",
    "end": "149700"
  },
  {
    "text": "or cluster Auto skating is part of a single to scaling um and it's sometimes",
    "start": "149700",
    "end": "155099"
  },
  {
    "text": "being confused by people so um it's not what we are doing here in six scalability",
    "start": "155099",
    "end": "161940"
  },
  {
    "text": "um okay so let's start with the the first thing defining and driving",
    "start": "161940",
    "end": "168239"
  },
  {
    "text": "um so what what is actually kubernetes scalability um and I think that the most important",
    "start": "168239",
    "end": "174599"
  },
  {
    "text": "thing which is not like specific to kubernetes itself but um it's it's important to keep in mind that",
    "start": "174599",
    "end": "181800"
  },
  {
    "text": "um we shouldn't be optimizing the system for the sake of optimizing itself um it's important like every single",
    "start": "181800",
    "end": "188640"
  },
  {
    "text": "optimization is making the system a little bit more complex harder to debug Hardware to reason about and so on so",
    "start": "188640",
    "end": "194220"
  },
  {
    "text": "it's important to always Encore all the optimizations in the actual like user needs so",
    "start": "194220",
    "end": "202680"
  },
  {
    "text": "if we really ask users what what they really want um is they are often like saying they",
    "start": "202680",
    "end": "209340"
  },
  {
    "text": "want scalable clusters and so on they want kubernetes to be as scalable as possible",
    "start": "209340",
    "end": "214739"
  },
  {
    "text": "but if we really ask them further what that really means um that",
    "start": "214739",
    "end": "220799"
  },
  {
    "text": "isn't obvious for them and in many cases it's it's not that they don't know they don't even want to know",
    "start": "220799",
    "end": "227760"
  },
  {
    "text": "um what that is because they they want the system but they want to focus on their own business and they want the",
    "start": "227760",
    "end": "233640"
  },
  {
    "text": "system to just work for them and they don't want to understand all the all the details of the system how that works how",
    "start": "233640",
    "end": "240480"
  },
  {
    "text": "they're interact with each other and so on um so what we did is we historically",
    "start": "240480",
    "end": "246440"
  },
  {
    "text": "thought about kubernetes scalability in terms of like size of the cluster or number of nodes but it's it's not really",
    "start": "246440",
    "end": "253439"
  },
  {
    "text": "true or it's at least it's not the full Truth at this time um kubernetes scalability is like a",
    "start": "253439",
    "end": "259739"
  },
  {
    "text": "multi-dimensional problem with many different dimensions um um like and number of notes or sites of",
    "start": "259739",
    "end": "266820"
  },
  {
    "text": "the Clusters actually only one of them those many dimensions like number of Secrets number of float balancers number",
    "start": "266820",
    "end": "273660"
  },
  {
    "text": "of persistent volumes number of pods in the cluster and so on those are all like",
    "start": "273660",
    "end": "279960"
  },
  {
    "text": "Dimensions that like affect and that affect the scalability and um those are things that that our users",
    "start": "279960",
    "end": "286620"
  },
  {
    "text": "are asking for um um one thing that is is maybe interesting to mention is posture like",
    "start": "286620",
    "end": "292979"
  },
  {
    "text": "with a lot of um uh work happening currently in the community towards better support for",
    "start": "292979",
    "end": "299460"
  },
  {
    "text": "batch workloads on top of kubernetes um both churn is one of the most most",
    "start": "299460",
    "end": "306419"
  },
  {
    "text": "frequently asked asked the questions about from the users so they",
    "start": "306419",
    "end": "313620"
  },
  {
    "text": "are basically asking us how like we would like to support many more can we create how many parts per second we can",
    "start": "313620",
    "end": "320460"
  },
  {
    "text": "create in the cluster and this is one of the dimensions that is probably that the most frequently Asked currently as",
    "start": "320460",
    "end": "327120"
  },
  {
    "text": "something that we should we should improve um okay so what is the scalability envelope",
    "start": "327120",
    "end": "333840"
  },
  {
    "text": "I mentioned this so the scalability envelope is is a Zone within which or",
    "start": "333840",
    "end": "339000"
  },
  {
    "text": "the subset of this this multi-dimensional space within which your cluster is supposed to be happy",
    "start": "339000",
    "end": "345780"
  },
  {
    "text": "um what does it really mean that it's the cluster is Happy it basically means that like the scalability slos are",
    "start": "345780",
    "end": "352080"
  },
  {
    "text": "satisfied so so basically if you are within this Subspace within the scalability envelope",
    "start": "352080",
    "end": "359580"
  },
  {
    "text": "it means that like yours or our scalability slos um",
    "start": "359580",
    "end": "364800"
  },
  {
    "text": "will be set or at least should be satisfied um so",
    "start": "364800",
    "end": "370139"
  },
  {
    "text": "um I hope that you are familiar with this this terminology but just very quickly like SLI is service level",
    "start": "370139",
    "end": "375720"
  },
  {
    "text": "indicator and it's like you can conceptually think about it as as a metric SLO",
    "start": "375720",
    "end": "381900"
  },
  {
    "text": "um is service level objective you can conceptually think about it as like um dot metric plus a threshold that that",
    "start": "381900",
    "end": "388860"
  },
  {
    "text": "needs to be satisfied in order to SL in order that's allowed to be satisfied so",
    "start": "388860",
    "end": "393900"
  },
  {
    "text": "we have a couple this allows defined for for",
    "start": "393900",
    "end": "399419"
  },
  {
    "text": "um for kubernetes for scalability of kubernetes as you can see they are",
    "start": "399419",
    "end": "404699"
  },
  {
    "text": "definitely not covering like the the all surface of kubernetes in fact they are",
    "start": "404699",
    "end": "409800"
  },
  {
    "text": "covering probably less than a half or significantly less than a half and it's it's not definitely",
    "start": "409800",
    "end": "415919"
  },
  {
    "text": "it's not the desired State we would like to to have much bigger coverage",
    "start": "415919",
    "end": "421199"
  },
  {
    "text": "um but it requires a lot of work and it's it's one of the areas where um you can many of you can help hopefully",
    "start": "421199",
    "end": "429360"
  },
  {
    "text": "um so if you are working on a feature like it would be good to to reach out to six scalability and and also think about",
    "start": "429360",
    "end": "436740"
  },
  {
    "text": "what like how you can measure how we can measure it how we can Define the scalability limits of of your area and",
    "start": "436740",
    "end": "442740"
  },
  {
    "text": "so on and um so um please reach out and and let's work",
    "start": "442740",
    "end": "447840"
  },
  {
    "text": "together on extending this this coverage and make it better for for our users",
    "start": "447840",
    "end": "453780"
  },
  {
    "text": "um okay so let's look into one of one example of like SLO",
    "start": "453780",
    "end": "459539"
  },
  {
    "text": "um here um and and let's let's talk about like API call latent cslo um then the first",
    "start": "459539",
    "end": "466080"
  },
  {
    "text": "mention of this SLO is coming from my blog post from 2015. when it was",
    "start": "466080",
    "end": "471120"
  },
  {
    "text": "formulated as like 99 of all our API calls return in less than one second",
    "start": "471120",
    "end": "477539"
  },
  {
    "text": "which is something but it's it has many problems with it in particular I bet",
    "start": "477539",
    "end": "483780"
  },
  {
    "text": "that uh my understanding of that and your understanding of that is slightly",
    "start": "483780",
    "end": "489300"
  },
  {
    "text": "different um I would even say a little bit more it's even that my understanding of this SLO now and my understanding when I was",
    "start": "489300",
    "end": "496860"
  },
  {
    "text": "writing it even those were different so um one of the the core principles when",
    "start": "496860",
    "end": "503099"
  },
  {
    "text": "defining slos that they they need to be very precise because it's effectively our contract with our users",
    "start": "503099",
    "end": "510180"
  },
  {
    "text": "um so we need to ensure that what we want to um we want to what we want to guarantee",
    "start": "510180",
    "end": "515599"
  },
  {
    "text": "for them is exactly how they understand those guarantees so",
    "start": "515599",
    "end": "520979"
  },
  {
    "text": "uh how is how this SLO looks like today",
    "start": "520979",
    "end": "526140"
  },
  {
    "text": "um we at least like we or we finally split into the actual SLI and SLO and",
    "start": "526140",
    "end": "533100"
  },
  {
    "text": "um the SLI is is currently the latency of processing the processing part was added like couple weeks ago",
    "start": "533100",
    "end": "539760"
  },
  {
    "text": "um to to basically exclude the the waiting time with this like um one",
    "start": "539760",
    "end": "546000"
  },
  {
    "text": "of the things that is happening in kubernetes currently is uh is adding that the API priority and",
    "start": "546000",
    "end": "553620"
  },
  {
    "text": "fairness to the API server which is which is basically our overload protection um and one of the",
    "start": "553620",
    "end": "561000"
  },
  {
    "text": "consequences of that is that like requests that are things in in case the",
    "start": "561000",
    "end": "566160"
  },
  {
    "text": "control plane is overloaded by the load coming from different clients um many some requests may be hanging in",
    "start": "566160",
    "end": "572760"
  },
  {
    "text": "the queue before they start being processing uh before being they start being processed so",
    "start": "572760",
    "end": "579240"
  },
  {
    "text": "given that it's it's basically depending on the load on on the control plane we can't really provide any guarantees",
    "start": "579240",
    "end": "585720"
  },
  {
    "text": "about that so we are we are basically excluding this this waiting time that or time those requests are spending waiting",
    "start": "585720",
    "end": "592019"
  },
  {
    "text": "in those queues so um so this is the this process thing so",
    "start": "592019",
    "end": "598260"
  },
  {
    "text": "like every single word basically every single word in in the um in the S both SRI and SLO definitions",
    "start": "598260",
    "end": "606060"
  },
  {
    "text": "actually matters um the mutating part we have a sibling Castle also for Donnelly just with like",
    "start": "606060",
    "end": "612720"
  },
  {
    "text": "slightly different thresholds um the single object is is also something",
    "start": "612720",
    "end": "619500"
  },
  {
    "text": "important because it excludes the lead collection we can't guarantee like low enough thresholds for delete collections",
    "start": "619500",
    "end": "625620"
  },
  {
    "text": "that is that may potentially want to delete like hundred thousands of objects in one call",
    "start": "625620",
    "end": "631740"
  },
  {
    "text": "um there for every resource Vapor shows",
    "start": "631740",
    "end": "637140"
  },
  {
    "text": "that we are not really putting everything into single back but we are treating every every request type like",
    "start": "637140",
    "end": "643080"
  },
  {
    "text": "post pods or food endpoint slices or whatever like separately and like for and and finally like measured as like 99",
    "start": "643080",
    "end": "650940"
  },
  {
    "text": "percentile over the last five minutes shows exactly like how we are how we are measuring like over what period and so",
    "start": "650940",
    "end": "657540"
  },
  {
    "text": "on so um this is um this is super important to make it precise to ensure that like we",
    "start": "657540",
    "end": "663000"
  },
  {
    "text": "all understand the way we measure it is is the way like everyone understands it and the SLO",
    "start": "663000",
    "end": "670380"
  },
  {
    "text": "similarly like um in default kubernetes installation this is similar to the like",
    "start": "670380",
    "end": "675839"
  },
  {
    "text": "processing word we want to exclude the web hooks which we which any user or any operator can like install whatever they",
    "start": "675839",
    "end": "682680"
  },
  {
    "text": "want and we have no control over that so we can't like they can potentially even",
    "start": "682680",
    "end": "687959"
  },
  {
    "text": "install a web hook that will be sleeping for 10 seconds and not doing anything else so we wouldn't be able to guarantee",
    "start": "687959",
    "end": "694200"
  },
  {
    "text": "anything in that point so we want to exclude that and and then we are saying that for every such resource verb or",
    "start": "694200",
    "end": "702000"
  },
  {
    "text": "excluding virtual and aggregated resources that that's another thing but um the 99 percentile per cluster day is",
    "start": "702000",
    "end": "708540"
  },
  {
    "text": "less than one second so um I think that the slots are are super important because that's exactly what",
    "start": "708540",
    "end": "714899"
  },
  {
    "text": "how we Define like scalability um it's part of the scalability definition so it's important like if",
    "start": "714899",
    "end": "721800"
  },
  {
    "text": "um if you are interested a little bit more in this topic I had a talk like in Barcelona if I remember correctly that",
    "start": "721800",
    "end": "727800"
  },
  {
    "text": "was purely focused on like slis and slos um in kubernetes so so you may want to",
    "start": "727800",
    "end": "733079"
  },
  {
    "text": "watch if you are interested in this topic but um let's move on um",
    "start": "733079",
    "end": "738300"
  },
  {
    "text": "we have those slos we that Define us this scalability envelope but that is",
    "start": "738300",
    "end": "744300"
  },
  {
    "text": "very implicit definition so it's it's not exactly what our users want um",
    "start": "744300",
    "end": "749640"
  },
  {
    "text": "and unfortunately like precisely um defining the scalability or envelope",
    "start": "749640",
    "end": "755160"
  },
  {
    "text": "is is almost impossible um and it's it's not what our users want",
    "start": "755160",
    "end": "760260"
  },
  {
    "text": "the they they really want to understand if they've set up who is within this envelope or not unfortunately we can",
    "start": "760260",
    "end": "767880"
  },
  {
    "text": "actually approximate it relatively simply by like providing different",
    "start": "767880",
    "end": "774839"
  },
  {
    "text": "um different dimensions like number of nodes less than 5000 number of services less than 10 000 and so on",
    "start": "774839",
    "end": "781680"
  },
  {
    "text": "um there are there are many of those limits um you can look into the link of the representation many of them are",
    "start": "781680",
    "end": "788459"
  },
  {
    "text": "still marked as to do and it's again something we would like to fill in and if you want to help with filling that in",
    "start": "788459",
    "end": "796079"
  },
  {
    "text": "um that would be that would be great and reach out to us and let's make that um better for our users",
    "start": "796079",
    "end": "803579"
  },
  {
    "text": "um okay so um that's mostly about like defining scalability so let's see",
    "start": "803579",
    "end": "811139"
  },
  {
    "text": "um a little bit more on how we are actually how we are measuring those slos",
    "start": "811139",
    "end": "816420"
  },
  {
    "text": "what we are testing how we are testing and so on so um over over the last couple years we defined or",
    "start": "816420",
    "end": "823620"
  },
  {
    "text": "rebuilt like a bunch of scalability testing infrastructure",
    "start": "823620",
    "end": "828720"
  },
  {
    "text": "um the the first and probably the most important thing is our testing framework called cluster loader 2. um it's",
    "start": "828720",
    "end": "836459"
  },
  {
    "text": "basically effectively I like a bring your own yum test framework where as a",
    "start": "836459",
    "end": "842279"
  },
  {
    "text": "user or as a test Creator you are semi-declaratively describing the desired state of the cluster and the",
    "start": "842279",
    "end": "849060"
  },
  {
    "text": "cluster all there behind the scenes is bringing your cluster to that state and and verifying whether all those slos",
    "start": "849060",
    "end": "856200"
  },
  {
    "text": "that I I mentioned before are actually satisfied uh why semi-declaratively because in",
    "start": "856200",
    "end": "863579"
  },
  {
    "text": "addition to defining the actual state of the cluster that for example I want like",
    "start": "863579",
    "end": "869040"
  },
  {
    "text": "10 000 Parts across 500 deployments and another",
    "start": "869040",
    "end": "874440"
  },
  {
    "text": "thousands of stateful jobs stateful sets and so on and so on um you also can define a little bit how",
    "start": "874440",
    "end": "882000"
  },
  {
    "text": "day creation or the updates or whatever should be spread over time so for example saying that I want those those",
    "start": "882000",
    "end": "888660"
  },
  {
    "text": "spots to be or those deployments to be created over the evenly across like five",
    "start": "888660",
    "end": "893820"
  },
  {
    "text": "minutes or something like that um it was designed for like easy extensibility",
    "start": "893820",
    "end": "899279"
  },
  {
    "text": "so adding new slos adding new new functionality so helper functionality",
    "start": "899279",
    "end": "905639"
  },
  {
    "text": "should be relatively simple to do that it already provides a bunch of like extra observability bunch of extra",
    "start": "905639",
    "end": "912180"
  },
  {
    "text": "features um so but you can read that a little bit more we don't have enough time to go",
    "start": "912180",
    "end": "917639"
  },
  {
    "text": "over all of those today so you can you can read a little bit more about that in the in our documentation",
    "start": "917639",
    "end": "924480"
  },
  {
    "text": "and I will go to the next thing which is um cluster simulation tool called we",
    "start": "924480",
    "end": "930240"
  },
  {
    "text": "called it Cube Mark we built it like a couple years ago which is um which is a tool that allows us to",
    "start": "930240",
    "end": "936060"
  },
  {
    "text": "simulate the kubernetes or large kubernetes clusters with much less",
    "start": "936060",
    "end": "941100"
  },
  {
    "text": "capacity the um with much less capacity so that that is primarily focused on",
    "start": "941100",
    "end": "947519"
  },
  {
    "text": "validating scalability or performance of the control plane itself so what we are",
    "start": "947519",
    "end": "953279"
  },
  {
    "text": "doing is we are running a regular control plane regular kubernetes control",
    "start": "953279",
    "end": "958860"
  },
  {
    "text": "plane just we are faking a little bit the notes that are the notes of the",
    "start": "958860",
    "end": "963899"
  },
  {
    "text": "cluster so um we call them Hollow notes and those are almost almost regular or almost regular",
    "start": "963899",
    "end": "973440"
  },
  {
    "text": "kubernetes node components like cubelet and Cube proxy and so on just they are",
    "start": "973440",
    "end": "979199"
  },
  {
    "text": "faking some of their stuff so uh so for example like Q black it's an actual Cube like code but",
    "start": "979199",
    "end": "985800"
  },
  {
    "text": "underneath it's not really like the um the CRI is actually faked there and it's not",
    "start": "985800",
    "end": "992100"
  },
  {
    "text": "really starting any parts or anything like that it's just pretending it started then and or similarly for cube",
    "start": "992100",
    "end": "997680"
  },
  {
    "text": "proxy it's like watching all this services and endpoint slices and so on",
    "start": "997680",
    "end": "1002779"
  },
  {
    "text": "Computing how the IP table should should be looking at but it's not updating the real IP tables and so on so so we are",
    "start": "1002779",
    "end": "1009740"
  },
  {
    "text": "actually running those as pods in some other different cluster and thanks to",
    "start": "1009740",
    "end": "1015259"
  },
  {
    "text": "that we can we can simulate the actual large cluster with roughly like 10",
    "start": "1015259",
    "end": "1020899"
  },
  {
    "text": "percent of capacity that would be needed to run this cluster um around this really run this cluster",
    "start": "1020899",
    "end": "1027319"
  },
  {
    "text": "um um to really learn this cluster um Okay so",
    "start": "1027319",
    "end": "1034280"
  },
  {
    "text": "the next thing is observability and debuggability of of our tests in general so we have a couple tools here the first",
    "start": "1034280",
    "end": "1041839"
  },
  {
    "text": "one is pair of Dash that allows us to track how a certain metric that we are interested in",
    "start": "1041839",
    "end": "1048140"
  },
  {
    "text": "um like we have many of those but um how a given metric is is looking over time so how certain things that we are doing",
    "start": "1048140",
    "end": "1056539"
  },
  {
    "text": "or we are not doing what they are happening for example regressions and so on when those happens how how exactly",
    "start": "1056539",
    "end": "1063260"
  },
  {
    "text": "that looks like over time and so on um if we are if we want to debug a",
    "start": "1063260",
    "end": "1068419"
  },
  {
    "text": "single in or look into into a single single test run we are generally using",
    "start": "1068419",
    "end": "1073880"
  },
  {
    "text": "grafana we have a bunch of like defined dashboards for",
    "start": "1073880",
    "end": "1079280"
  },
  {
    "text": "that um uh we have like a custom tooling that makes it super easy",
    "start": "1079280",
    "end": "1084860"
  },
  {
    "text": "to set this up for for a given test it's literally a single comment and so on and it's in it's what we are using for",
    "start": "1084860",
    "end": "1092840"
  },
  {
    "text": "um for debunking a single test",
    "start": "1092840",
    "end": "1097299"
  },
  {
    "text": "um and finally like profiling is another thing that we are we are often using it's it's",
    "start": "1098059",
    "end": "1103520"
  },
  {
    "text": "natively integrated into cluster loader so it's it's you can just request it and",
    "start": "1103520",
    "end": "1108620"
  },
  {
    "text": "it will happen out of the box for you if you if you want um okay so this is about the infrastructure",
    "start": "1108620",
    "end": "1115039"
  },
  {
    "text": "so how we are using it to to actually verify the performance or how we are",
    "start": "1115039",
    "end": "1121100"
  },
  {
    "text": "and how we are like primarily protecting kubernetes scalability um",
    "start": "1121100",
    "end": "1126620"
  },
  {
    "text": "so we have like the main test that we call Cloud test which is which is basically supposed to stress the control",
    "start": "1126620",
    "end": "1133580"
  },
  {
    "text": "plane of the cluster it creates a bunch of like pots deployments stay tool sets persistent",
    "start": "1133580",
    "end": "1140960"
  },
  {
    "text": "volume services and so on and like it's it's stressing the control plane um this is",
    "start": "1140960",
    "end": "1146720"
  },
  {
    "text": "um this is a release blocking test so um it's we are running it at scale like",
    "start": "1146720",
    "end": "1152539"
  },
  {
    "text": "of 100 nodes and 5000 nodes periodically um it's something that we like release",
    "start": "1152539",
    "end": "1158720"
  },
  {
    "text": "team is also paying for paying attention to so um",
    "start": "1158720",
    "end": "1164539"
  },
  {
    "text": "um it's an important thing to keep in mind we used to also have like pre-submit tests um at the scale of 100",
    "start": "1164539",
    "end": "1171020"
  },
  {
    "text": "nodes you might if you are contributing you might be you probably familiar with them um they are no longer required at",
    "start": "1171020",
    "end": "1179179"
  },
  {
    "text": "this point they are only optional if you if you explicitly trigger them which is good good thing to to do with um if you",
    "start": "1179179",
    "end": "1186799"
  },
  {
    "text": "are not entirely sure like how your change um is affecting the system but due to",
    "start": "1186799",
    "end": "1193880"
  },
  {
    "text": "the cost cuttings that we had to do that you might have heard like we are we are",
    "start": "1193880",
    "end": "1199820"
  },
  {
    "text": "on track to be out of the budget for like second half of the year or second um last quarter of the year",
    "start": "1199820",
    "end": "1207260"
  },
  {
    "text": "um we we had to do a bunch of cuttings across the whole project to reduce the cost of our infrastructure and like um",
    "start": "1207260",
    "end": "1213919"
  },
  {
    "text": "that was one of the areas that was hit by by by all of that so they are they",
    "start": "1213919",
    "end": "1220160"
  },
  {
    "text": "still exist they are just like optional and not not run not running by default and we have a bunch of like other tests",
    "start": "1220160",
    "end": "1226460"
  },
  {
    "text": "like Cube Mark test Benchmark and so on and um if you are interested to learning to",
    "start": "1226460",
    "end": "1232820"
  },
  {
    "text": "learn a little bit more about them like there's like a we have a whole six scalability dashboard when",
    "start": "1232820",
    "end": "1238520"
  },
  {
    "text": "where all of those um tests are actually shown um they are",
    "start": "1238520",
    "end": "1243860"
  },
  {
    "text": "fortunately fairly stable at this point so um some regressions are happening from",
    "start": "1243860",
    "end": "1250640"
  },
  {
    "text": "time to time but I think we didn't have really any in the last release for example so it's it's much better than it",
    "start": "1250640",
    "end": "1257960"
  },
  {
    "text": "used to be like a couple years ago where we were facing like multiple regressions per release usually",
    "start": "1257960",
    "end": "1265179"
  },
  {
    "text": "um okay so um about the regressions it's it's worth mentioning that",
    "start": "1265220",
    "end": "1272799"
  },
  {
    "text": "they are happening across all the system like obviously many of them were in API",
    "start": "1273260",
    "end": "1278600"
  },
  {
    "text": "server or scheduler or like the core control car control plane components but",
    "start": "1278600",
    "end": "1284960"
  },
  {
    "text": "we had a bunch of regressions with in cubelet or cube proxy or or and so on",
    "start": "1284960",
    "end": "1290539"
  },
  {
    "text": "um because in a in a like in the large clusters that the number of",
    "start": "1290539",
    "end": "1297320"
  },
  {
    "text": "doses is like the multiplying factor of how many of those is is super important",
    "start": "1297320",
    "end": "1302419"
  },
  {
    "text": "but we also have that like regressions in in go itself like they go like the",
    "start": "1302419",
    "end": "1307460"
  },
  {
    "text": "the newer versions of go were making our components behave differently and",
    "start": "1307460",
    "end": "1313280"
  },
  {
    "text": "introducing regressions we had like we've we've seen regressions in operating systems and cells so",
    "start": "1313280",
    "end": "1320000"
  },
  {
    "text": "um even if like from the first glance like the thing that you are working on",
    "start": "1320000",
    "end": "1325220"
  },
  {
    "text": "um doesn't look like like scalability related like it's It's always important",
    "start": "1325220",
    "end": "1330320"
  },
  {
    "text": "to keep the scalability in the back of your mind when you are working on whatever change in in in in the system",
    "start": "1330320",
    "end": "1339440"
  },
  {
    "text": "um okay and the the last thing which is usually the most interesting for for",
    "start": "1339440",
    "end": "1344900"
  },
  {
    "text": "many people which is like driving the scalability improvements so what we are doing here",
    "start": "1344900",
    "end": "1350539"
  },
  {
    "text": "um unfortunately less than we would like to do again due to capacity",
    "start": "1350539",
    "end": "1356240"
  },
  {
    "text": "um constraints but there are still a couple things that are worth mentioning from the last",
    "start": "1356240",
    "end": "1361400"
  },
  {
    "text": "two freed releases or so um the like given that scalable six scalability is not really owning any",
    "start": "1361400",
    "end": "1368419"
  },
  {
    "text": "non-test code or non-test framework code um like most of them are are generally",
    "start": "1368419",
    "end": "1374179"
  },
  {
    "text": "joined with some other six majority of them is is like joined with ckp and Machinery",
    "start": "1374179",
    "end": "1380059"
  },
  {
    "text": "um but we are like heavily contributing or driving those um those things ourselves",
    "start": "1380059",
    "end": "1386360"
  },
  {
    "text": "um just under supervision of of that other stick and um the things that are worth mentioning",
    "start": "1386360",
    "end": "1392600"
  },
  {
    "text": "here is like the API priority and fairness it's it's the overall protection in the API",
    "start": "1392600",
    "end": "1399799"
  },
  {
    "text": "server that we are we are adding and we are working on that for like last",
    "start": "1399799",
    "end": "1405020"
  },
  {
    "text": "nine releases or something that's that's a huge thing that we are we are doing at a huge change",
    "start": "1405020",
    "end": "1410720"
  },
  {
    "text": "um and the the biggest the biggest um Advantage from it is is obviously reliability it's like overall protection",
    "start": "1410720",
    "end": "1418820"
  },
  {
    "text": "um but um this is this also matters for scalability because like you can think about scalability like the way we are",
    "start": "1418820",
    "end": "1425900"
  },
  {
    "text": "thinking about scalability is that scalability is really a reliability at scale so reliability is like in the core",
    "start": "1425900",
    "end": "1432919"
  },
  {
    "text": "of scalability um but there are also like other aspects of of priority and fairness that are",
    "start": "1432919",
    "end": "1438440"
  },
  {
    "text": "important here which is that are purely scalability related is is the system throughput that I",
    "start": "1438440",
    "end": "1445520"
  },
  {
    "text": "mentioned before that is appearing a lot in terms of in the context of of batch workloads",
    "start": "1445520",
    "end": "1452360"
  },
  {
    "text": "um API priority and fairness is actually enabler for that um because",
    "start": "1452360",
    "end": "1458720"
  },
  {
    "text": "um the throughput in in many places across the system is actually artificially blocked a little bit today by by our QPS",
    "start": "1458720",
    "end": "1467720"
  },
  {
    "text": "limits on the client side um for communication with API server or the control plane in general",
    "start": "1467720",
    "end": "1474679"
  },
  {
    "text": "um and the only way we can get rid of them is",
    "start": "1474679",
    "end": "1480380"
  },
  {
    "text": "to really um make overall protection on the server side like robust because otherwise",
    "start": "1480380",
    "end": "1487880"
  },
  {
    "text": "um those clients could potentially break the control plane completely so so it's critical to or it's actually an enabler",
    "start": "1487880",
    "end": "1494179"
  },
  {
    "text": "there are many different things that we would have to do but it's an enabler for improving the system throughput in",
    "start": "1494179",
    "end": "1499940"
  },
  {
    "text": "general um streaming risks are another thing",
    "start": "1499940",
    "end": "1505100"
  },
  {
    "text": "which is which is also again a little bit more on the reliability area than the scalability area but those are like",
    "start": "1505100",
    "end": "1512419"
  },
  {
    "text": "tightly coupled with each other the idea here is that instead of like the",
    "start": "1512419",
    "end": "1518179"
  },
  {
    "text": "the way we are thinking about getting all the resources so send a request and get all the response response back it's",
    "start": "1518179",
    "end": "1524659"
  },
  {
    "text": "used um is here use the watch protocol for getting all the data so getting the",
    "start": "1524659",
    "end": "1530539"
  },
  {
    "text": "list data but using the watch protocol it's something that went Alpha in 127",
    "start": "1530539",
    "end": "1535940"
  },
  {
    "text": "like a couple weeks ago last week I think was the wrist um",
    "start": "1535940",
    "end": "1541240"
  },
  {
    "text": "and it's it's it's hugely helping for memory consumption of of API server but",
    "start": "1541240",
    "end": "1546980"
  },
  {
    "text": "it's also helping a lot for um for very large collections so if we if",
    "start": "1546980",
    "end": "1552559"
  },
  {
    "text": "you have like gigabytes of data so like let's say you have you want to have 100 000 of PODS and like they can",
    "start": "1552559",
    "end": "1560059"
  },
  {
    "text": "actually be relatively large if if you are end up having",
    "start": "1560059",
    "end": "1565220"
  },
  {
    "text": "um um having gigabytes of data then just",
    "start": "1565220",
    "end": "1571100"
  },
  {
    "text": "downloading them in a single API call is is just time consuming and it can even",
    "start": "1571100",
    "end": "1576380"
  },
  {
    "text": "exceed the the limit of like one minute that we have for all API API requests",
    "start": "1576380",
    "end": "1582320"
  },
  {
    "text": "and with um switching that to what we are actually um working around that limitation",
    "start": "1582320",
    "end": "1589279"
  },
  {
    "text": "um Grace will shut down is another interesting thing that",
    "start": "1589279",
    "end": "1594320"
  },
  {
    "text": "that we did it's it's it's we've seen a bunch of cases where the ACT once the",
    "start": "1594320",
    "end": "1599419"
  },
  {
    "text": "cluster is is working and stable that it works fine but even without any changes to the load if you try to recreate the",
    "start": "1599419",
    "end": "1607400"
  },
  {
    "text": "control pane or or like upgrade the control plane and so on that was like blowing out the cluster so and the",
    "start": "1607400",
    "end": "1613460"
  },
  {
    "text": "reason was primarily watches so like there are in the biggest clusters we observe like even hundreds of thousands",
    "start": "1613460",
    "end": "1619580"
  },
  {
    "text": "of watches so if we bring down one of the API server or a couple of IPI",
    "start": "1619580",
    "end": "1625640"
  },
  {
    "text": "servers at the same time suddenly all those watches that were established and in a like just worked",
    "start": "1625640",
    "end": "1633320"
  },
  {
    "text": "um in a stable State they suddenly all want to recreate or re-establish themselves",
    "start": "1633320",
    "end": "1638720"
  },
  {
    "text": "again at the same time so that was like blowing up um control plane completely",
    "start": "1638720",
    "end": "1644179"
  },
  {
    "text": "in some cases even even to the extent that it couldn't like",
    "start": "1644179",
    "end": "1649520"
  },
  {
    "text": "um um recreate itself correctly um at all so so that was something that was also",
    "start": "1649520",
    "end": "1656120"
  },
  {
    "text": "improved in the 127 release and a bunch of like other smaller things um",
    "start": "1656120",
    "end": "1662000"
  },
  {
    "text": "um unfortunately we don't have much time to to talk about them so um one thing that I want to mention like",
    "start": "1662000",
    "end": "1667940"
  },
  {
    "text": "at the at the end again is you might have seen me or someone else like rejecting some of the",
    "start": "1667940",
    "end": "1674179"
  },
  {
    "text": "improvements um it's important to um that something to to get back to what",
    "start": "1674179",
    "end": "1680179"
  },
  {
    "text": "I initially said at the beginning is um we shouldn't be optimizing the system",
    "start": "1680179",
    "end": "1685340"
  },
  {
    "text": "for the sake of the optimizing like I've seen the optimizations that like they were improving like by one percent one",
    "start": "1685340",
    "end": "1692960"
  },
  {
    "text": "of the random functions somewhere and they were introducing like hundreds of lines of code that's not really",
    "start": "1692960",
    "end": "1698600"
  },
  {
    "text": "something that we really want so um it's important to to keep the complexity",
    "start": "1698600",
    "end": "1704779"
  },
  {
    "text": "versus like return on investment trade-off in in the back of your mind when you are on to optimize something",
    "start": "1704779",
    "end": "1711860"
  },
  {
    "text": "um and yeah so um if you are interested in any of those like um as you have seen",
    "start": "1711860",
    "end": "1717679"
  },
  {
    "text": "like we need help and we have like a bunch of work that it would be great to to have done and many in all those areas",
    "start": "1717679",
    "end": "1724940"
  },
  {
    "text": "like please reach out to us please join our um our bi-weekly meetings reach out to",
    "start": "1724940",
    "end": "1731299"
  },
  {
    "text": "us on on slack Channel mailing list or whatever and let's um",
    "start": "1731299",
    "end": "1736880"
  },
  {
    "text": "Let's help us to make the system better for our users um and with that I think we have five",
    "start": "1736880",
    "end": "1744020"
  },
  {
    "text": "more minutes or something yes five more minutes um I'm I'm happy to take any questions that you",
    "start": "1744020",
    "end": "1749240"
  },
  {
    "text": "have um that's all what I have um prepared for today",
    "start": "1749240",
    "end": "1754600"
  },
  {
    "text": "excellent presentation thanks for that and uh from the user perspective we know that",
    "start": "1759039",
    "end": "1765799"
  },
  {
    "text": "many organizations tend to have more than one cluster and can you reveal some",
    "start": "1765799",
    "end": "1771559"
  },
  {
    "text": "tips for for those who want to divide the workloads among many clusters for",
    "start": "1771559",
    "end": "1777260"
  },
  {
    "text": "example which kind of workloads are so intensive in terms of performance that they could you know impact other",
    "start": "1777260",
    "end": "1783980"
  },
  {
    "text": "workloads so can you share some you know some some tips for that yeah",
    "start": "1783980",
    "end": "1789799"
  },
  {
    "text": "um sure yeah that that's a great question like and it's something that we um in really in order to be done",
    "start": "1789799",
    "end": "1796279"
  },
  {
    "text": "correctly it's something we need to cooperate more deeply with multi-clusters sick so it's it's",
    "start": "1796279",
    "end": "1801679"
  },
  {
    "text": "somewhere in between um but I'm sorry I think that there isn't like",
    "start": "1801679",
    "end": "1807380"
  },
  {
    "text": "a strict rule that like those should be running together on those like shouldn't be running together",
    "start": "1807380",
    "end": "1813620"
  },
  {
    "text": "um I think that in general networking area is is the most stressing for the",
    "start": "1813620",
    "end": "1819679"
  },
  {
    "text": "control plane it's and it's where we when where we've seen the biggest number of like",
    "start": "1819679",
    "end": "1825799"
  },
  {
    "text": "um issues um so I think networking in general like how",
    "start": "1825799",
    "end": "1831799"
  },
  {
    "text": "how your how your how whole your networking stack",
    "start": "1831799",
    "end": "1837320"
  },
  {
    "text": "works like it's it's also very different between like Cloud providers or whatever technology you are running if you're",
    "start": "1837320",
    "end": "1842960"
  },
  {
    "text": "running it or bare metal and so on those have like very different characteristics so it's it's it's important to keep it",
    "start": "1842960",
    "end": "1849679"
  },
  {
    "text": "in mind but it's also important even when you are using like um Cube",
    "start": "1849679",
    "end": "1855980"
  },
  {
    "text": "proxy based stock or psyllium based Taco whatever those are also",
    "start": "1855980",
    "end": "1861620"
  },
  {
    "text": "um super heavy for for for the control plane so uh understanding like how big",
    "start": "1861620",
    "end": "1869480"
  },
  {
    "text": "churn forward or like you will observe in your on your services and so on that that might be a significant factor of",
    "start": "1869480",
    "end": "1877340"
  },
  {
    "text": "how to split your workloads across clusters multiple services",
    "start": "1877340",
    "end": "1882740"
  },
  {
    "text": "yeah thousands of services especially like thousands of stable services that just are there are usually fine but like",
    "start": "1882740",
    "end": "1889760"
  },
  {
    "text": "if there's like a big churn of in all of those that that is like what is um often problematic",
    "start": "1889760",
    "end": "1897080"
  },
  {
    "text": "um the current scalability limits of 5000 nodes I know that was quite a few",
    "start": "1897080",
    "end": "1902360"
  },
  {
    "text": "years back that came about and there's been loads and loads of work going on since then are there any plans to kind",
    "start": "1902360",
    "end": "1907760"
  },
  {
    "text": "of revisit that limit or see if we can test Beyond it and what are the current bottlenecks that you're seeing so um to",
    "start": "1907760",
    "end": "1914539"
  },
  {
    "text": "be to be honest like um this is what we officially support in in the open source",
    "start": "1914539",
    "end": "1919700"
  },
  {
    "text": "stack like um internally in Google when I'm working like the gke supports like 15 000 note",
    "start": "1919700",
    "end": "1926059"
  },
  {
    "text": "clusters and underneath we are using over like like open source kubernetes we",
    "start": "1926059",
    "end": "1932120"
  },
  {
    "text": "are just tuning it differently and setting but it's not that we are like a gazillion patches that are improving",
    "start": "1932120",
    "end": "1937159"
  },
  {
    "text": "that so um it's definitely not a hard limit like the 5000 notes it's um it's just like um",
    "start": "1937159",
    "end": "1943580"
  },
  {
    "text": "many of the like the ecosystem around is is needs to be improved also so like",
    "start": "1943580",
    "end": "1949700"
  },
  {
    "text": "they're they're all all of those all of those things around that would need to be improved",
    "start": "1949700",
    "end": "1955460"
  },
  {
    "text": "um there we don't have any plans to push it further really in open source because a",
    "start": "1955460",
    "end": "1962120"
  },
  {
    "text": "it's expensive to test for regressions and so on and so on um and second",
    "start": "1962120",
    "end": "1970039"
  },
  {
    "text": "there isn't much desire from like the actual users for that and and we are getting back to like if people don't",
    "start": "1970039",
    "end": "1977120"
  },
  {
    "text": "need that let's not complicate the system so um at least for now like we are we are",
    "start": "1977120",
    "end": "1983960"
  },
  {
    "text": "focusing more on pushing those other aspects like what throughput for example or system throughput in general and so",
    "start": "1983960",
    "end": "1989480"
  },
  {
    "text": "on and we don't have any plans to do that at least in the next year or two for pushing the the size of the cluster",
    "start": "1989480",
    "end": "1996620"
  },
  {
    "text": "makes sense so it's largely you're seeing a lot with like other external factors like third-party controllers",
    "start": "1996620",
    "end": "2002200"
  },
  {
    "text": "there as well and is that like edcd is that one of the issues there is it just like the sheer number of watches and",
    "start": "2002200",
    "end": "2008140"
  },
  {
    "text": "um hcd is becoming to be a bottleneck but we are running in GK also with with",
    "start": "2008140",
    "end": "2013899"
  },
  {
    "text": "hcd underneath so it's it's possible to do that so um",
    "start": "2013899",
    "end": "2019860"
  },
  {
    "text": "that's how if you hit a scalability issue what is the first step you would do to diagnose where the problem is",
    "start": "2022840",
    "end": "2028659"
  },
  {
    "text": "because I I'm a bit blind when SD Covenant it's hanging or everything stopped working I don't know where where",
    "start": "2028659",
    "end": "2035200"
  },
  {
    "text": "the problem is here um this is a good question and I I don't have a good answer to it to be honest",
    "start": "2035200",
    "end": "2041919"
  },
  {
    "text": "like I mean um usually the scalability questions scalability problems are the toughest",
    "start": "2041919",
    "end": "2049720"
  },
  {
    "text": "one to debug and like there are many like even in in our team and like GK",
    "start": "2049720",
    "end": "2055240"
  },
  {
    "text": "team like there aren't that many people who can who can debug those so it's it's a matter of like having expertise and",
    "start": "2055240",
    "end": "2061839"
  },
  {
    "text": "understand the whole kubernetes and like looking a little bit like what was happening in the into cluster looking",
    "start": "2061839",
    "end": "2067960"
  },
  {
    "text": "into meters like gazillion of different metrics and trying to to have some intuition so I I don't have really a",
    "start": "2067960",
    "end": "2074080"
  },
  {
    "text": "good answer you saw I saw a dashboard there on your slides can this be used to see where bottlenecks sure yeah those",
    "start": "2074080",
    "end": "2082060"
  },
  {
    "text": "those are like um yes I mean in at least in some cases they are",
    "start": "2082060",
    "end": "2087099"
  },
  {
    "text": "helpful so that the dashboards the grafana dashboards that we have um are are open source that they are like in",
    "start": "2087099",
    "end": "2092679"
  },
  {
    "text": "our our like first test they can be used in a live cluster too um they can be used yes you can just like um",
    "start": "2092679",
    "end": "2100060"
  },
  {
    "text": "yes yes basically like if you if you are using Prometheus or something like that you can just just",
    "start": "2100060",
    "end": "2107320"
  },
  {
    "text": "like um open then for your cluster and then try to to look how those so yes um",
    "start": "2107320",
    "end": "2112420"
  },
  {
    "text": "if um yes I recommend looking into them they may they in many cases they might",
    "start": "2112420",
    "end": "2117579"
  },
  {
    "text": "help you um to see what is happening there",
    "start": "2117579",
    "end": "2122160"
  },
  {
    "text": "okay I think we are running out of time I don't know yeah I think we have like one more question you don't have time at",
    "start": "2122760",
    "end": "2129099"
  },
  {
    "text": "all so maybe the last one last question one question okay who was first",
    "start": "2129099",
    "end": "2135960"
  },
  {
    "text": "I'm happy to answer like some offline questions to um after the presentation uh is there some subset of of the",
    "start": "2138160",
    "end": "2146400"
  },
  {
    "text": "current tests that uh someone uh developing and",
    "start": "2146400",
    "end": "2153099"
  },
  {
    "text": "an operator run to check that it like has",
    "start": "2153099",
    "end": "2158859"
  },
  {
    "text": "um uh to to find how scalable it is where it",
    "start": "2158859",
    "end": "2165700"
  },
  {
    "text": "breaks and and stuff like that so um yes and no um I mean like all the tests are",
    "start": "2165700",
    "end": "2171400"
  },
  {
    "text": "there available so you can you can run them it's a matter of like do you have an like infrastructure to run it like",
    "start": "2171400",
    "end": "2177940"
  },
  {
    "text": "you can we can you can do that as a pre-stop meet for your PR once you have something working",
    "start": "2177940",
    "end": "2183579"
  },
  {
    "text": "um so so that is that is one potential um the the caveat here is that they are",
    "start": "2183579",
    "end": "2189460"
  },
  {
    "text": "not really covering all aspects of the system so if you are looking into if you are working on I know some random",
    "start": "2189460",
    "end": "2195880"
  },
  {
    "text": "feature on the Note site and like our tests probably don't exercise it at all um so",
    "start": "2195880",
    "end": "2202000"
  },
  {
    "text": "um it really depends what exactly you are you are um you are doing",
    "start": "2202000",
    "end": "2208440"
  },
  {
    "text": "okay I think we are um out of time I'm around here like until end of week so feel free to",
    "start": "2208599",
    "end": "2214599"
  },
  {
    "text": "um grab me on the corridor and or whatever and I'm happy to chat more with you um and um",
    "start": "2214599",
    "end": "2220780"
  },
  {
    "text": "thank you very much for for trying [Applause]",
    "start": "2220780",
    "end": "2226339"
  }
]