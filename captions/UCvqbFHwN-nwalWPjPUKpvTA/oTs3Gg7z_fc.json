[
  {
    "text": "so hi I'm Bob Wise I'm with Samsung SDS you might have noticed we did a very fun",
    "start": "30",
    "end": "7350"
  },
  {
    "text": "announcement for us this morning we're sponsoring the CNC F I'm here today it's talked to you about",
    "start": "7350",
    "end": "13009"
  },
  {
    "text": "kubernetes topic what we call control plane engineering I'm trying to popularize this term",
    "start": "13009",
    "end": "20150"
  },
  {
    "text": "so we have a team here in Seattle a few",
    "start": "20150",
    "end": "25920"
  },
  {
    "text": "other places as well we're centered here in Seattle like all we do especially in open source projects these are team",
    "start": "25920",
    "end": "32040"
  },
  {
    "text": "efforts so there were a few folks on the team here that put some extra effort into this I wanted to make sure I put",
    "start": "32040",
    "end": "37800"
  },
  {
    "text": "their names up here and with that out I'll keep going ok so",
    "start": "37800",
    "end": "43760"
  },
  {
    "text": "this is a real honest-to-goodness disclaimer yes I work for a very large company",
    "start": "43760",
    "end": "49579"
  },
  {
    "text": "but they can't keep me from showing you grumpy cat if you really want to read all that come",
    "start": "49579",
    "end": "56760"
  },
  {
    "text": "talk to me later I'm sure I can arrange it ok so before I get into control plane",
    "start": "56760",
    "end": "63000"
  },
  {
    "text": "engineering I think it's really important to talk about why we care why you might care and there are a bunch of",
    "start": "63000",
    "end": "70710"
  },
  {
    "text": "things we believe some of these things that we believe are not necessarily relevant to this discussion but some of",
    "start": "70710",
    "end": "77189"
  },
  {
    "text": "them are of course open source at the heart of invisible infrastructure were",
    "start": "77189",
    "end": "82350"
  },
  {
    "text": "deeply involved the notion of high velocity organizations seeking failures he can",
    "start": "82350",
    "end": "89610"
  },
  {
    "text": "change the automation tooling that's required this is all I would say the motherhood and apple pie of invisible",
    "start": "89610",
    "end": "95909"
  },
  {
    "text": "open source infrastructure the notion of container orchestration as you know one of the big moves that's",
    "start": "95909",
    "end": "102090"
  },
  {
    "text": "happening now is is important our business both internal to Samsung",
    "start": "102090",
    "end": "108479"
  },
  {
    "text": "and external is around this last bullet which is this is really hard stuff but",
    "start": "108479",
    "end": "114899"
  },
  {
    "text": "technically and organizationally and organizations often need help making some of these shifts and that's what we",
    "start": "114899",
    "end": "120180"
  },
  {
    "text": "do we help with the shift but the piece I wanted to talk about here is",
    "start": "120180",
    "end": "125549"
  },
  {
    "text": "that part of orchestration orchestrating container is a notion around portability",
    "start": "125549",
    "end": "133440"
  },
  {
    "text": "to find the right zone here at some point I'm getting a really bad echo so so the the notion of kubernetes as a",
    "start": "133440",
    "end": "141480"
  },
  {
    "text": "great way to run the same systems on multiple clouds multiple public clouds and on multiple kinds of private clouds",
    "start": "141480",
    "end": "148620"
  },
  {
    "text": "is really important and this is if you care about that then you care about control plane engineering we have a",
    "start": "148620",
    "end": "155610"
  },
  {
    "text": "bunch of our team here I just wanted throw the pictures up in case you see some of the folks wandering around here",
    "start": "155610",
    "end": "162090"
  },
  {
    "text": "the conference please stop them and bother them with whatever questions so anyway all right so so this talk",
    "start": "162090",
    "end": "169860"
  },
  {
    "text": "there's a lot of great talks here a pretty wide variety of talks here some things at a more advanced level some",
    "start": "169860",
    "end": "176280"
  },
  {
    "text": "things that more of a I'll say beginner to intermediate level this talk is designed specifically to be more of a",
    "start": "176280",
    "end": "183180"
  },
  {
    "text": "like your next step in kubernetes but it's not quite a beginner talk as",
    "start": "183180",
    "end": "188970"
  },
  {
    "text": "i'm i make some assumptions here i'm actually i'll cover a couple of these but you know i'm gonna assume you know a",
    "start": "188970",
    "end": "194280"
  },
  {
    "text": "little bit about kubernetes kubernetes fundamentals what it means to run a application on that probably if you know",
    "start": "194280",
    "end": "201120"
  },
  {
    "text": "about these things you've played with it somewhere probably on gke that's a really easy way",
    "start": "201120",
    "end": "207120"
  },
  {
    "text": "to get a kubernetes have a kubernetes cluster you can play with chances are you've run something on your on your",
    "start": "207120",
    "end": "213330"
  },
  {
    "text": "desktop there's easy ways to get down on your laptop but",
    "start": "213330",
    "end": "219140"
  },
  {
    "text": "fundamentally you're here or you'll find this interesting or you can go get a cup",
    "start": "219140",
    "end": "224190"
  },
  {
    "text": "of coffee if you don't care because you want to run kubernetes in different places under your own control and it",
    "start": "224190",
    "end": "231090"
  },
  {
    "text": "possibly different scales may be very large scales maybe smaller scales okay so just a quick baseline here so",
    "start": "231090",
    "end": "238940"
  },
  {
    "text": "I'm gonna do hand waving there's this control plane thing but this is really the basics I have a three node empty",
    "start": "238940",
    "end": "245880"
  },
  {
    "text": "cluster here I ask it to do some work please you know manage some replicas as",
    "start": "245880",
    "end": "252330"
  },
  {
    "text": "creamy some pods and the system will do that they'll create a pod with multiple",
    "start": "252330",
    "end": "258359"
  },
  {
    "text": "containers in it of type X and maybe I need a couple of type Y this is all the stuff I said you're",
    "start": "258359",
    "end": "265050"
  },
  {
    "text": "gonna assume I would assume you knew but I covered here quickly anyway so this happens things change in your system a",
    "start": "265050",
    "end": "273400"
  },
  {
    "text": "node dies so automatic healing of the system has to",
    "start": "273400",
    "end": "278830"
  },
  {
    "text": "occur this is all magic that the control plane is doing and when you're",
    "start": "278830",
    "end": "284550"
  },
  {
    "text": "running multiple applications in production environment whether these are applications or micro services kind of",
    "start": "284550",
    "end": "290860"
  },
  {
    "text": "doesn't matter you have a bunch of different kinds of things that I'll get mapped onto the cluster in under control the control control of the",
    "start": "290860",
    "end": "298419"
  },
  {
    "text": "control plane so they're really what is control plane engineering so here right magic alert",
    "start": "298419",
    "end": "305410"
  },
  {
    "text": "you know something happens here that seems very magical and there is a lot of magic here so let here let's dig into",
    "start": "305410",
    "end": "311470"
  },
  {
    "text": "the let's dig into that piece a little bit so I'm gonna put those nodes aside so really what I want to talk about is what's going on inside the control plane",
    "start": "311470",
    "end": "318520"
  },
  {
    "text": "here so basic building blocks what are the building blocks inside the control plane",
    "start": "318520",
    "end": "325229"
  },
  {
    "text": "not that many of them some of the interactions are it can be complicated but at this level these are the main",
    "start": "325229",
    "end": "332110"
  },
  {
    "text": "things you need to know about API server this is fundamental system architecture design",
    "start": "332110",
    "end": "338979"
  },
  {
    "text": "choice around how everything goes through an API server scheduler which is",
    "start": "338979",
    "end": "344410"
  },
  {
    "text": "doing the basics of like what what pods should run where the system assistant called at CD",
    "start": "344410",
    "end": "351510"
  },
  {
    "text": "distributed database system this is where cluster state is maintained and then a controller manager which is where",
    "start": "351510",
    "end": "357940"
  },
  {
    "text": "the basic control loops implementation of business logic system logic is done",
    "start": "357940",
    "end": "363280"
  },
  {
    "text": "so those are the those are the main pieces I'm there are so when you say",
    "start": "363280",
    "end": "369220"
  },
  {
    "text": "control plane to a kubernetes expert will probably start they might quibble",
    "start": "369220",
    "end": "375099"
  },
  {
    "text": "with this because I'm gonna kind of push the stuff that's on the node like cube light and COO proxy I'm gonna push that",
    "start": "375099",
    "end": "381220"
  },
  {
    "text": "out I'm just going to concentrate on the server bits those are probably technically part of the control plane but that's another set of conversations",
    "start": "381220",
    "end": "386919"
  },
  {
    "text": "I'm just gonna worry about the server bits in the middle right so the different kinds of",
    "start": "386919",
    "end": "393669"
  },
  {
    "text": "kubernetes concepts there's more but replica sets deployments",
    "start": "393669",
    "end": "400090"
  },
  {
    "text": "all of these things are implemented in the controller manager all right so so if you want to so those",
    "start": "400090",
    "end": "408310"
  },
  {
    "text": "are the pieces here's the basic relationship between those control plane pieces again everything's going through",
    "start": "408310",
    "end": "414729"
  },
  {
    "text": "the API server API server talks that CD nothing else talks that CD",
    "start": "414729",
    "end": "420449"
  },
  {
    "text": "and then the scheduler and the controller manager talk to everything else through the API server so as you",
    "start": "420449",
    "end": "426849"
  },
  {
    "text": "can see the API server is a pretty critical piece in the system for those of you who are interested in",
    "start": "426849",
    "end": "434050"
  },
  {
    "text": "perhaps a little bit more about this marek who's one of the Google engineers who works on performance he gave a talk",
    "start": "434050",
    "end": "440229"
  },
  {
    "text": "earlier perhaps if you didn't go to that you could go back and look at it afterwards he spent spent a fair bit of time earlier today explaining a bunch of",
    "start": "440229",
    "end": "447699"
  },
  {
    "text": "the transactions that occur through the API server that helped kind of explain what's going on there and and also that",
    "start": "447699",
    "end": "454870"
  },
  {
    "text": "it's a pretty critical part of the overall control plane performance but I'm not going to spend a lot of time on",
    "start": "454870",
    "end": "459879"
  },
  {
    "text": "that so if you use one of the standard off-the-shelf",
    "start": "459879",
    "end": "467639"
  },
  {
    "text": "community tools to start a kubernetes cluster let's say on your laptop or an AWS",
    "start": "467669",
    "end": "474930"
  },
  {
    "text": "what you're most likely gonna get is this you're gonna get a single virtual machine with all of the control plane",
    "start": "474930",
    "end": "482469"
  },
  {
    "text": "plane components running inside that single VM",
    "start": "482469",
    "end": "487529"
  },
  {
    "text": "that is an interesting way to experiment with some things it's it's actually a",
    "start": "489419",
    "end": "495699"
  },
  {
    "text": "very decent pattern if for certain kinds of applications for example if you're using kubernetes as like a large job",
    "start": "495699",
    "end": "502689"
  },
  {
    "text": "managing system management system like I've got a where let's say like an HPC or some like big data load and what I",
    "start": "502689",
    "end": "510430"
  },
  {
    "text": "want to do is I want to build a cluster I want to run a job the completion and then I want to shut the cluster down and",
    "start": "510430",
    "end": "515948"
  },
  {
    "text": "while the cluster is running I want kubernetes to manage the balancing of the pods handle machine failures during",
    "start": "515949",
    "end": "521680"
  },
  {
    "text": "that case because you know if you bring let's say you bring up a thousand a thousand nodes you're gonna have failures you're gonna have node failures",
    "start": "521680",
    "end": "528220"
  },
  {
    "text": "in a thousand nodes so you need something to handle that so if you're if you have a a",
    "start": "528220",
    "end": "533769"
  },
  {
    "text": "system that kind of looks like that then that single like everything running on a",
    "start": "533769",
    "end": "540019"
  },
  {
    "text": "single machine pattern might well be fine if you're doing some kind of CI",
    "start": "540019",
    "end": "545120"
  },
  {
    "text": "jobs that might be another way another reason you would want to do work that way if you're just doing some development",
    "start": "545120",
    "end": "550790"
  },
  {
    "text": "you need something quick but really what I'm trying to talk about here is a notion of like how would you work how",
    "start": "550790",
    "end": "556879"
  },
  {
    "text": "would you think about running a kubernetes cluster on an infrastructure amazon bare metal",
    "start": "556879",
    "end": "564319"
  },
  {
    "text": "or GCE where the cluster is going to stay up and running for a long period of time",
    "start": "564319",
    "end": "570319"
  },
  {
    "text": "probably used by multiple applications multiple users so what we worry about with that case is",
    "start": "570319",
    "end": "579639"
  },
  {
    "text": "single server performance is the sink is the single server I have does it have enough horsepower to actually run all of",
    "start": "579639",
    "end": "586279"
  },
  {
    "text": "the control plane probably the most important thing here is high availability if you lose your",
    "start": "586279",
    "end": "592220"
  },
  {
    "text": "entire control plan your cluster state everything is all sitting on one machine chances are that machine is gonna go",
    "start": "592220",
    "end": "598279"
  },
  {
    "text": "away at some point you got to worry about that that's gonna have a poor effect on your cluster availability",
    "start": "598279",
    "end": "604509"
  },
  {
    "text": "you do want to worry about instance cost perhaps depending on the",
    "start": "604509",
    "end": "610069"
  },
  {
    "text": "size of the cluster so you need to worry about that but generally we're looking at fewer larger clusters the topic I'm",
    "start": "610069",
    "end": "616220"
  },
  {
    "text": "gonna push to the advanced topic I'm not going to try to talk about today although it's a very interesting topic",
    "start": "616220",
    "end": "621499"
  },
  {
    "text": "is if you're running in multiple availability zones how would you tackle that problem I would certainly recommend",
    "start": "621499",
    "end": "628309"
  },
  {
    "text": "there I think there two schools of thought on this one one school of thought is encapsulated in kubernetes",
    "start": "628309",
    "end": "635149"
  },
  {
    "text": "project called uber Nettie's which is a pattern for running multiple clusters a",
    "start": "635149",
    "end": "641170"
  },
  {
    "text": "a collection of compute a per availability zone",
    "start": "641170",
    "end": "646749"
  },
  {
    "text": "availability zone might be and I'm using that in the most generic turnt sense not in the Amazon availability zone right",
    "start": "646749",
    "end": "652819"
  },
  {
    "text": "availability zone might be a rack or it could be a data center with its with a",
    "start": "652819",
    "end": "658519"
  },
  {
    "text": "single generator or something there is another school of thought around how do you how do you take",
    "start": "658519",
    "end": "666080"
  },
  {
    "text": "how do you spread a single cluster across multiple availability zones and manage that you could actually distribute you could have built a single",
    "start": "666080",
    "end": "672350"
  },
  {
    "text": "cluster have a control plane be built out across multiple availability zones as opposed to going with a more",
    "start": "672350",
    "end": "678770"
  },
  {
    "text": "federated approach again that's a topic for perhaps the next cube con so not",
    "start": "678770",
    "end": "685700"
  },
  {
    "text": "gonna try to tackle that although you can see there's a lot of interesting possibilities here okay so",
    "start": "685700",
    "end": "692440"
  },
  {
    "text": "complications mostly what I have here are the complications with regards to",
    "start": "692440",
    "end": "698240"
  },
  {
    "text": "scalability and one one thing I'll talk a little bit more about this later because this is not really a solved",
    "start": "698240",
    "end": "705110"
  },
  {
    "text": "problem in the community it's something that we're putting some effort into would love to have contribution to help",
    "start": "705110",
    "end": "710660"
  },
  {
    "text": "discussion around this the complications when you're building this kind of cluster are I would say these are like",
    "start": "710660",
    "end": "717440"
  },
  {
    "text": "the major axes of you know sort of performance issues total number of pods in the system",
    "start": "717440",
    "end": "724450"
  },
  {
    "text": "pods in the system nodes in the system the the",
    "start": "725710",
    "end": "730720"
  },
  {
    "text": "scalability issues tend to be more related to number of pods then it does number of nodes based on the the testing",
    "start": "730720",
    "end": "737660"
  },
  {
    "text": "we've done which means if you have a really big cluster system but if",
    "start": "737660",
    "end": "742670"
  },
  {
    "text": "relatively small number of nodes starting on it you're probably not going to have scaling issues you're gonna",
    "start": "742670",
    "end": "747680"
  },
  {
    "text": "start seeing scaling issues when you're running really large clusters with a really high density of pods high density",
    "start": "747680",
    "end": "754310"
  },
  {
    "text": "of pods I'd say hundred pods per server is probably in the zone of the add",
    "start": "754310",
    "end": "759890"
  },
  {
    "text": "that's probably high density and then you know the pod creation rate",
    "start": "759890",
    "end": "766660"
  },
  {
    "text": "really interestingly this should be probably to be in a surprise but if you're using I'll say the most basic",
    "start": "766660",
    "end": "773930"
  },
  {
    "text": "features of kubernetes you're gonna find that your cluster scalability is a lot better and when you",
    "start": "773930",
    "end": "780380"
  },
  {
    "text": "start using if you start using a lot of the more advanced features then the control plane performance starts to take",
    "start": "780380",
    "end": "786950"
  },
  {
    "text": "a hit I just threw a couple of example up here like a replication set is lower load a stateful controller this is what",
    "start": "786950",
    "end": "793940"
  },
  {
    "text": "used to be called a pet set as much higher load and then of course if you have external system that's making",
    "start": "793940",
    "end": "800900"
  },
  {
    "text": "really high demands on the API server you know pulling for status for example that of",
    "start": "800900",
    "end": "806600"
  },
  {
    "text": "course can cause some issues as well so so what we want to do here is come up",
    "start": "806600",
    "end": "813980"
  },
  {
    "text": "with kind of a deployment pattern and way of thinking about this we want to try to cover the you know",
    "start": "813980",
    "end": "820190"
  },
  {
    "text": "what it what is it I really need in a longer running cluster so within this I think the important",
    "start": "820190",
    "end": "827000"
  },
  {
    "text": "concept is that it's okay if the control plane is unavailable for short periods",
    "start": "827000",
    "end": "832490"
  },
  {
    "text": "of time the cluster should still be able to keep running it might mean you can't schedule a new job for example but",
    "start": "832490",
    "end": "837920"
  },
  {
    "text": "that's probably okay if it's available for short periods you can spend enormous amounts of effort trying to come up with",
    "start": "837920",
    "end": "844490"
  },
  {
    "text": "something with a hundred percent availability but again like the if components are dying the cluster itself",
    "start": "844490",
    "end": "850820"
  },
  {
    "text": "can't go away and you want a way to think about how am I going to adapt this cluster for different conditions I've",
    "start": "850820",
    "end": "856970"
  },
  {
    "text": "gone through a bunch of the complications here complications around number of pods and what kind of features",
    "start": "856970",
    "end": "862880"
  },
  {
    "text": "I'm using so this means that today the engineering that you have to do here around this is a little bit custom to",
    "start": "862880",
    "end": "870320"
  },
  {
    "text": "your situation so you want to have a way of thinking about how to do that so this last bullet",
    "start": "870320",
    "end": "876440"
  },
  {
    "text": "sharing configurations of performance info one of the things that that we're fostering trying to foster trying to",
    "start": "876440",
    "end": "882890"
  },
  {
    "text": "build some tooling and make some contribution around is a way for members",
    "start": "882890",
    "end": "888950"
  },
  {
    "text": "of the community to grab their cluster configuration what they have including",
    "start": "888950",
    "end": "894380"
  },
  {
    "text": "things like settings of the cluster be able to dump that and capture that and",
    "start": "894380",
    "end": "900170"
  },
  {
    "text": "export it for sharing and also to be able to take performance information from that cluster and do the same and",
    "start": "900170",
    "end": "906440"
  },
  {
    "text": "the goal here is to be able to cross a like a wide range of different kinds of circumstances be able to start comparing",
    "start": "906440",
    "end": "913910"
  },
  {
    "text": "notes across the community because this is a bit early and these configurations are very custom I think you know at",
    "start": "913910",
    "end": "921260"
  },
  {
    "text": "least it would be great if there was I'll say even a version of a wizard",
    "start": "921260",
    "end": "926270"
  },
  {
    "text": "grade like a new community members should be able to come along say oh well like here's the here's the",
    "start": "926270",
    "end": "931760"
  },
  {
    "text": "characteristics of the Buster's I'm trying to build and we should have a better database of information that",
    "start": "931760",
    "end": "937940"
  },
  {
    "text": "helps guide what the configuration of those clusters should be okay so there let me let me go here with",
    "start": "937940",
    "end": "946839"
  },
  {
    "text": "go back to the starting point by the way if you're if you're interested in the different systems they kind of create",
    "start": "946839",
    "end": "952820"
  },
  {
    "text": "this pattern here's a few of them",
    "start": "952820",
    "end": "956320"
  },
  {
    "text": "hello my back alright alright so this is a typical default",
    "start": "967180",
    "end": "974490"
  },
  {
    "text": "alright so first I was going to go through a few problems with solutions here no my keys back",
    "start": "974490",
    "end": "982710"
  },
  {
    "text": "I might have just bumped it I can keep going if you like",
    "start": "985920",
    "end": "990529"
  },
  {
    "text": "the true multitasker would have just kept going with the talk uh",
    "start": "995720",
    "end": "1000750"
  },
  {
    "text": "that's okay you can stay here while I do",
    "start": "1004170",
    "end": "1008490"
  },
  {
    "text": "excellent all right okay so first big problem yay thank you first big problem",
    "start": "1015840",
    "end": "1021610"
  },
  {
    "text": "is losing cluster state is bad consequently cluster state lives in @cd",
    "start": "1021610",
    "end": "1028689"
  },
  {
    "text": "having your entire cluster state live in a database on a single node is",
    "start": "1028690",
    "end": "1035880"
  },
  {
    "text": "living a risky life @cd is based on raf consensus algorithm",
    "start": "1035880",
    "end": "1041920"
  },
  {
    "text": "so really I'd say you in fact if you if you talk to the if you talk to the at CD",
    "start": "1041920",
    "end": "1048520"
  },
  {
    "text": "folks I don't know it's I don't know if my child was here but if you the sed developers are here and if you go and",
    "start": "1048520",
    "end": "1056410"
  },
  {
    "text": "ask them about it they'll say three nodes or five nodes that's kind of the T once you get beyond five nodes and you're probably into extreme at CD",
    "start": "1056410",
    "end": "1063280"
  },
  {
    "text": "territory although I know people do it so really three node minimum is what you want so let's we'll start building our",
    "start": "1063280",
    "end": "1070240"
  },
  {
    "text": "cluster out a little bit okay so that's great I got I have three at CD things here okay so here's another another pro",
    "start": "1070240",
    "end": "1078640"
  },
  {
    "text": "tip so there's a lot of events that flow through the system the event the event",
    "start": "1078640",
    "end": "1083980"
  },
  {
    "text": "load is partition 'l from the cluster state but",
    "start": "1083980",
    "end": "1089380"
  },
  {
    "text": "they both live in at CD so just as a kind of principle you really want to protect that cluster state database as",
    "start": "1089380",
    "end": "1096070"
  },
  {
    "text": "much as you can best practice and I'm no Prince here gke this is the way gke runs",
    "start": "1096070",
    "end": "1102010"
  },
  {
    "text": "in production is to split the cluster state at CD from the event",
    "start": "1102010",
    "end": "1108760"
  },
  {
    "text": "storage at cee so if I was going to run three node systems I'd end up with something that looks a little bit like",
    "start": "1108760",
    "end": "1114970"
  },
  {
    "text": "this okay so that's that's a piece of the puzzle",
    "start": "1114970",
    "end": "1121290"
  },
  {
    "text": "the API server can be stressed with high loads so it's a relatively Stratasys",
    "start": "1121290",
    "end": "1126790"
  },
  {
    "text": "like standard web deployment type stuff in terms of proxy's it does a whole bunch of state watching a net CD it",
    "start": "1126790",
    "end": "1134990"
  },
  {
    "text": "turns out the performance issues here a little bit complicated because in the newer versions of kubernetes there's a",
    "start": "1134990",
    "end": "1140090"
  },
  {
    "text": "bunch of caching that goes on inside the API server but still it's pretty easy to load balance you do noodle do you do",
    "start": "1140090",
    "end": "1145910"
  },
  {
    "text": "need a load balancer though so here let's do this all right I'm running multiple API servers now",
    "start": "1145910",
    "end": "1153370"
  },
  {
    "text": "that's great okay so scheduler and controller manager are not chargeable",
    "start": "1153370",
    "end": "1159260"
  },
  {
    "text": "but you still need a chase you can't run multiple multiple hots",
    "start": "1159260",
    "end": "1164470"
  },
  {
    "text": "but you still have to solve this problem so you need something that kind of looks",
    "start": "1164470",
    "end": "1170090"
  },
  {
    "text": "like this so this here I'm showing scheduler as a",
    "start": "1170090",
    "end": "1176900"
  },
  {
    "text": "backup backup scheduler or backup controller manager again going through the load",
    "start": "1176900",
    "end": "1182480"
  },
  {
    "text": "balancer to get to the API server okay so what about load balancers",
    "start": "1182480",
    "end": "1189400"
  },
  {
    "text": "so here's where my like my intuition is",
    "start": "1189400",
    "end": "1194420"
  },
  {
    "text": "try to do the same thing everywhere if I'm gonna run on Amazon and Google and bare-metal all at the same time what I",
    "start": "1194420",
    "end": "1201680"
  },
  {
    "text": "kind of want to do is deploy it the same way in every place this is a place where I think it's not such a good idea",
    "start": "1201680",
    "end": "1207520"
  },
  {
    "text": "so you really like the easiest thing to do is use something outside the cluster",
    "start": "1207520",
    "end": "1212660"
  },
  {
    "text": "so I'd say a cloud provider load balancer or let's say you have f5 big IP",
    "start": "1212660",
    "end": "1217910"
  },
  {
    "text": "some other kind of appliance you'd use that you can use something inside the cluster I think I've got a slide or two",
    "start": "1217910",
    "end": "1224600"
  },
  {
    "text": "on that around some ideas although that now you're getting into a little bit trickier trickier range but this load",
    "start": "1224600",
    "end": "1230390"
  },
  {
    "text": "balancer there's a very key part to the overall system performance and",
    "start": "1230390",
    "end": "1235670"
  },
  {
    "text": "availability the public cloud providers have put enormous investment into really",
    "start": "1235670",
    "end": "1240860"
  },
  {
    "text": "great solutions here use them and be happy it's worth the configuration drift that happens between multiple",
    "start": "1240860",
    "end": "1247010"
  },
  {
    "text": "deployments so I'd also say again if you have",
    "start": "1247010",
    "end": "1256930"
  },
  {
    "text": "on-premises and you're trying to do deployments and you already have these load balancers then they work well there",
    "start": "1256930",
    "end": "1263299"
  },
  {
    "text": "pretty simple to configure usually the configurations that kubernetes requires the support or not especially",
    "start": "1263299",
    "end": "1269299"
  },
  {
    "text": "complicated if you have them use them be happy but I wouldn't recommend going and",
    "start": "1269299",
    "end": "1275570"
  },
  {
    "text": "buying those appliances new if you're building new clusters there are some other approaches you can use",
    "start": "1275570",
    "end": "1280749"
  },
  {
    "text": "all right okay so there's a magic alert here I did a",
    "start": "1280749",
    "end": "1287779"
  },
  {
    "text": "little bit of hand waving let's let's dig in on some of the hand waving here okay so how does that work there's got",
    "start": "1287779",
    "end": "1293480"
  },
  {
    "text": "to be something that deals with heart beating and fail overs and so forth turns out that that's built into",
    "start": "1293480",
    "end": "1300470"
  },
  {
    "text": "kubernetes itself so implementation there's an implementation of leader election patterns negotiated among the",
    "start": "1300470",
    "end": "1306710"
  },
  {
    "text": "various components the followers keeps track of state a failure relieve lead to a new leader election so good news is it",
    "start": "1306710",
    "end": "1314929"
  },
  {
    "text": "is pretty magical because the software is already there to do it you don't have to roll in anything on top of it okay so",
    "start": "1314929",
    "end": "1321109"
  },
  {
    "text": "so that's kind of the next dive down into the pieces why don't we actually",
    "start": "1321109",
    "end": "1326600"
  },
  {
    "text": "try to lay this out onto some real servers so this would be a pretty typical pattern let's say I'm gonna run",
    "start": "1326600",
    "end": "1333889"
  },
  {
    "text": "three machines so really if you think about it three machines is kind of a minimum because you have to have at CD",
    "start": "1333889",
    "end": "1340639"
  },
  {
    "text": "you need at CD you need at CD consensus so what you're seeing here is I've just",
    "start": "1340639",
    "end": "1347869"
  },
  {
    "text": "laid out all of these components in pretty much the same way every time so lay down at CD on all three lay down at",
    "start": "1347869",
    "end": "1354049"
  },
  {
    "text": "CD and all three again scheduler and controller manager we use leader election to deal with that spread",
    "start": "1354049",
    "end": "1359779"
  },
  {
    "text": "the API server out magical load balancer and I'm happy so this I'd say for kind of that next",
    "start": "1359779",
    "end": "1367879"
  },
  {
    "text": "step of how is it that you build a che cluster for a cluster that's going to be using a hangar over a long period of",
    "start": "1367879",
    "end": "1374179"
  },
  {
    "text": "time this is your this is your minimum configuration you could even depending",
    "start": "1374179",
    "end": "1379340"
  },
  {
    "text": "on the usage of the cluster you could even simplify this once by going back to non split at CD but",
    "start": "1379340",
    "end": "1384879"
  },
  {
    "text": "let's say our recommendation is that this is a minimum a minimum config for running your own",
    "start": "1384879",
    "end": "1390940"
  },
  {
    "text": "your own control plane all right once again",
    "start": "1390940",
    "end": "1397500"
  },
  {
    "text": "magic alert a little bit of hand waving us there although if you have an f5 the",
    "start": "1397500",
    "end": "1402570"
  },
  {
    "text": "hand waving is pretty good alright so so let's say you've got a",
    "start": "1402570",
    "end": "1407730"
  },
  {
    "text": "bunch of hardware and you really should be able to do this right you should be able to have a cluster with a bunch of",
    "start": "1407730",
    "end": "1413400"
  },
  {
    "text": "commodity Hardware lay it all out in such a way that you can get what you want",
    "start": "1413400",
    "end": "1418640"
  },
  {
    "text": "it turns out that in kubernetes there's a there's this there's this cube proxy",
    "start": "1418640",
    "end": "1425340"
  },
  {
    "text": "that does magic with IP tables so that you can create a notion of a service IP",
    "start": "1425340",
    "end": "1430650"
  },
  {
    "text": "so what we're recommending here just use that same capability within the cluster you can put a bend put a proxy in front",
    "start": "1430650",
    "end": "1437549"
  },
  {
    "text": "of it engine acts are each a proxy or pry it's actually possible that those are",
    "start": "1437549",
    "end": "1443190"
  },
  {
    "text": "probably possibly overkill even for this it's probably possible to maybe do something even a little bit more simply",
    "start": "1443190",
    "end": "1449630"
  },
  {
    "text": "so I'm kind of constraining the problem here a little bit for the bare metal",
    "start": "1449630",
    "end": "1454860"
  },
  {
    "text": "case because you're my assumption here is that you're",
    "start": "1454860",
    "end": "1460320"
  },
  {
    "text": "building a cluster bare metal on premises and you have some control over",
    "start": "1460320",
    "end": "1465750"
  },
  {
    "text": "DNS and so the approach here is have a stable I have some kind of stable IP",
    "start": "1465750",
    "end": "1470880"
  },
  {
    "text": "that's mapped to DNS map that I address into into this system here have and then",
    "start": "1470880",
    "end": "1479909"
  },
  {
    "text": "have some way to do some kind of virtual IP or some kind of takeover of that IP address within the cluster should one of",
    "start": "1479909",
    "end": "1486330"
  },
  {
    "text": "those nodes fail this is pretty common this is a pretty common approach I'm used for a great many things the",
    "start": "1486330",
    "end": "1493700"
  },
  {
    "text": "alternative to an approach like this is just use DNS itself I think there's a",
    "start": "1493700",
    "end": "1499020"
  },
  {
    "text": "pretty well-known history of like that should probably work but DNS has all kinds of",
    "start": "1499020",
    "end": "1505380"
  },
  {
    "text": "issues with ptl's and TTL is not being honored and so we try to avoid some of",
    "start": "1505380",
    "end": "1512220"
  },
  {
    "text": "the downside of dns for a system like this ok so moving on here a little bit",
    "start": "1512220",
    "end": "1519200"
  },
  {
    "text": "alright what if that control plane that I just laid out is not quite big enough here's we're having a pattern a",
    "start": "1519200",
    "end": "1525990"
  },
  {
    "text": "deployment pattern that you can use or something like this gives you a method for thinking about how you",
    "start": "1525990",
    "end": "1532270"
  },
  {
    "text": "would do the control plane engineering here and so here's an example of how you could do it right so instead of running",
    "start": "1532270",
    "end": "1538360"
  },
  {
    "text": "on three machines I've now I'm now running nine machines",
    "start": "1538360",
    "end": "1544560"
  },
  {
    "text": "this is probably overkill for most folks although I guess I should say overkill",
    "start": "1544560",
    "end": "1549640"
  },
  {
    "text": "depending on what kind of servers you have if you have a big pile of really small servers maybe maybe a pattern like",
    "start": "1549640",
    "end": "1554980"
  },
  {
    "text": "this work so again it's back to trying to figure out how to customize this kind of system for your particular",
    "start": "1554980",
    "end": "1561160"
  },
  {
    "text": "requirements so that'd be one way here let's let's go",
    "start": "1561160",
    "end": "1566710"
  },
  {
    "text": "let's go even a little bit more extreme here I'm gonna I want to run more API servers for some reason my pattern works",
    "start": "1566710",
    "end": "1572680"
  },
  {
    "text": "in that case probably three since I have to run a master",
    "start": "1572680",
    "end": "1578110"
  },
  {
    "text": "election system I'm not doing load balancing across the scheduler and the controller manager probably three is",
    "start": "1578110",
    "end": "1583780"
  },
  {
    "text": "plenty and then it might be that for my configuration",
    "start": "1583780",
    "end": "1591510"
  },
  {
    "text": "the performance characteristics that I'm seeing of the event of the event flow",
    "start": "1593400",
    "end": "1598630"
  },
  {
    "text": "are different than the cluster state and so I might actually configure the two",
    "start": "1598630",
    "end": "1603790"
  },
  {
    "text": "different MCD clusters differently you'll notice here though that I have a three node cluster and a five node cluster",
    "start": "1603790",
    "end": "1610680"
  },
  {
    "text": "there you go okay so all right now you should you should already be thinking",
    "start": "1611850",
    "end": "1617310"
  },
  {
    "text": "so how many people went to the self hosted the self hosted thing a couple of few people that one probably is starting",
    "start": "1617310",
    "end": "1624520"
  },
  {
    "text": "to fall into the advanced territory but I'm gonna I'm also want to use this talk for a little bit of a basic case for why",
    "start": "1624520",
    "end": "1632170"
  },
  {
    "text": "you would care because I'm really starting to do a lot of work by hand here right I'm not doing a lot",
    "start": "1632170",
    "end": "1638620"
  },
  {
    "text": "and doing a lot of picking systems allocating software to",
    "start": "1638620",
    "end": "1643720"
  },
  {
    "text": "them worrying about these failure cases in spreadsheets rather than with",
    "start": "1643720",
    "end": "1651550"
  },
  {
    "text": "automation tools and the the sort of goofy thing about this is that what I'm",
    "start": "1651550",
    "end": "1657520"
  },
  {
    "text": "building here is a system that's designed to do exactly this kind of work for us",
    "start": "1657520",
    "end": "1663039"
  },
  {
    "text": "so yeah a lot of shouldn't the system be doing that and yes and the system you",
    "start": "1663039",
    "end": "1670159"
  },
  {
    "text": "would want to be using for this as gerber Nettie's itself partly this is eat the dog food you",
    "start": "1670159",
    "end": "1675499"
  },
  {
    "text": "already have the system they're running you already have the familiarity with how it works so we believe I think a lot",
    "start": "1675499",
    "end": "1681289"
  },
  {
    "text": "of people in the community believe that the notion of self owes hosting kubernetes is the right one so the idea",
    "start": "1681289",
    "end": "1688339"
  },
  {
    "text": "here is it's a you know entirely you know system entirely running of kubernetes objects you have this common",
    "start": "1688339",
    "end": "1694249"
  },
  {
    "text": "operations said it's gonna make scaling like this pictures I was showing scaling and H a easier",
    "start": "1694249",
    "end": "1701959"
  },
  {
    "text": "the tricky part here is that bootstrapping a cluster from I mean you have you don't",
    "start": "1701959",
    "end": "1707899"
  },
  {
    "text": "have the cluster from go so you have to kind of get the cluster running and then hand control of it back to itself and so",
    "start": "1707899",
    "end": "1714289"
  },
  {
    "text": "there's some tricky bootstrapping things that need to happen there which is why this is not you know just a done deal",
    "start": "1714289",
    "end": "1719679"
  },
  {
    "text": "but I think we certainly believe that that tricky bootstrapping is worth it",
    "start": "1719679",
    "end": "1725089"
  },
  {
    "text": "especially if you're running a big cluster if you're really running really small clusters just stamping them out really small with a single node I mean",
    "start": "1725089",
    "end": "1732549"
  },
  {
    "text": "is it worth the complication maybe not you start getting into places where",
    "start": "1732549",
    "end": "1738049"
  },
  {
    "text": "you're really worrying about control plane engineering this is definitely one of the places you want to you want to go",
    "start": "1738049",
    "end": "1743089"
  },
  {
    "text": "I'm also actually upgrading and updating the system is gonna be a lot easier",
    "start": "1743089",
    "end": "1748450"
  },
  {
    "text": "there's one of the things kubernetes is really great at is doing updates enough updates and upgrades so I put a note",
    "start": "1748450",
    "end": "1754820"
  },
  {
    "text": "here this is the core OS blog post they had a talk today if you didn't see the talk and you're interested in this I'd",
    "start": "1754820",
    "end": "1760639"
  },
  {
    "text": "strongly recommend you find it online I don't know when the videos are gonna be",
    "start": "1760639",
    "end": "1765679"
  },
  {
    "text": "posted but I'm sure it'll be worthwhile I know that that session was standing room only or you couldn't I was seeing",
    "start": "1765679",
    "end": "1773179"
  },
  {
    "text": "pictures of people not even being able to get in there so I'm sorry oh there is oh okay great the the comment",
    "start": "1773179",
    "end": "1780169"
  },
  {
    "text": "was there's another talk on it tomorrow so but let me make one more point on",
    "start": "1780169",
    "end": "1785809"
  },
  {
    "text": "that which is we're kind of part of the way there already so if you so if I go back to my three node cluster layout",
    "start": "1785809",
    "end": "1792940"
  },
  {
    "text": "here let me let me turn this down a little bit a little bit easier so",
    "start": "1792940",
    "end": "1798600"
  },
  {
    "text": "this is the way we run our clusters today I don't actually have a very good",
    "start": "1798990",
    "end": "1804670"
  },
  {
    "text": "feel for how common this is across I'll say kubernetes users generally my sense",
    "start": "1804670",
    "end": "1810520"
  },
  {
    "text": "is that this is fairly common although you certainly don't have to run your brandies this way so we run we run this today as a set of",
    "start": "1810520",
    "end": "1820720"
  },
  {
    "text": "so we run pods but we run them as statically scheduled as opposed to using the kubernetes capability to do the scheduling so today for us these are",
    "start": "1820720",
    "end": "1828310"
  },
  {
    "text": "static pods but dynamic pods are coming I'm not really sure how long that's going to take I'd say maybe across the",
    "start": "1828310",
    "end": "1835510"
  },
  {
    "text": "course of the next year at least you know at least a couple of releases maybe more I think we'll continue to the",
    "start": "1835510",
    "end": "1841240"
  },
  {
    "text": "community will continue to move this forward but it really does make it a lot",
    "start": "1841240",
    "end": "1846520"
  },
  {
    "text": "easier to manage the upgrades the updates laying these Langly these",
    "start": "1846520",
    "end": "1852420"
  },
  {
    "text": "components out across systems if you're thinking of them as containers",
    "start": "1852420",
    "end": "1857790"
  },
  {
    "text": "containers and pods okay so final thoughts on this",
    "start": "1857790",
    "end": "1864480"
  },
  {
    "text": "yeah it's complicated sharing experience around this kind of stuff helps everybody",
    "start": "1864480",
    "end": "1871020"
  },
  {
    "text": "today sharing this kind of information is not as easy as we would like for it",
    "start": "1871020",
    "end": "1876310"
  },
  {
    "text": "to be and so we're putting effort into a couple of related things one is we're calling cluster config dumping",
    "start": "1876310",
    "end": "1883030"
  },
  {
    "text": "I've put a couple of a couple of pull requests here that we've been working on and the other is so there's the",
    "start": "1883030",
    "end": "1890500"
  },
  {
    "text": "configuration and then there's performance dumping the notion around the performance dumping here is although",
    "start": "1890500",
    "end": "1895840"
  },
  {
    "text": "you could use it for you could use it for any workload our",
    "start": "1895840",
    "end": "1901180"
  },
  {
    "text": "notion here is that you really do want to be able to take the cluster that you have run one of the standard community tests on that cluster you know density",
    "start": "1901180",
    "end": "1908410"
  },
  {
    "text": "for example and then grab that and then be able to use that to compare your",
    "start": "1908410",
    "end": "1913600"
  },
  {
    "text": "configurations with other folks in the community so this is early work some of the cluster performance dumping",
    "start": "1913600",
    "end": "1920710"
  },
  {
    "text": "we've been doing in our own github repo but we've been working on this in the with scaling sig as the home in fact you",
    "start": "1920710",
    "end": "1928960"
  },
  {
    "text": "can if you go and look at the YouTube videos you can even see some of the demo stuff we're working without so that's",
    "start": "1928960",
    "end": "1934179"
  },
  {
    "text": "work in progress if you're interested in that please come talk to me or come attend scaleability sings",
    "start": "1934179",
    "end": "1940919"
  },
  {
    "text": "meetings Thursdays 9:00 a.m. it's on the it's on the the kubernetes page alright",
    "start": "1940919",
    "end": "1949210"
  },
  {
    "text": "so that is my talk for today here's some contact info",
    "start": "1949210",
    "end": "1956010"
  },
  {
    "text": "all of the work all of the work that our team does is in open source so we're either contributing to kubernetes or I",
    "start": "1956010",
    "end": "1963400"
  },
  {
    "text": "mean other projects as needed but any work that we're doing that sort of outside a project we also do and is on",
    "start": "1963400",
    "end": "1970750"
  },
  {
    "text": "our github and our github repo it is available in the public and feel free to",
    "start": "1970750",
    "end": "1975790"
  },
  {
    "text": "hit me on kubernetes slack or by email all right that's all I have",
    "start": "1975790",
    "end": "1983309"
  },
  {
    "text": "clock says 4 minutes and 30 seconds so I can do some QA if you like all right",
    "start": "1983309",
    "end": "1988750"
  },
  {
    "text": "Patrick yes",
    "start": "1988750",
    "end": "1992010"
  },
  {
    "text": "boy that was a complicated enough question I'm I'm uh I'd have to actually",
    "start": "2021240",
    "end": "2027060"
  },
  {
    "text": "think about that for a minute unless there were some reaction here from",
    "start": "2027060",
    "end": "2031880"
  },
  {
    "text": "ya",
    "start": "2034280",
    "end": "2037280"
  },
  {
    "text": "right yeah I think I think I think the",
    "start": "2045680",
    "end": "2051500"
  },
  {
    "text": "question was what do we think about kind of a distributed load balancer that's running",
    "start": "2051500",
    "end": "2057230"
  },
  {
    "text": "and more of the cluster so that the load balancing capability could move be moved to the edges and I'd have to think about",
    "start": "2057230",
    "end": "2063800"
  },
  {
    "text": "that and one of the other Samsung folks here is saying you know might be more complication than it's worth so",
    "start": "2063800",
    "end": "2071169"
  },
  {
    "text": "anyone anyone else oh don't be shy I have a whole two minutes",
    "start": "2071169",
    "end": "2081339"
  },
  {
    "text": "all right I guess we'll call it a wrap thanks very much [Applause]",
    "start": "2081520",
    "end": "2090800"
  }
]