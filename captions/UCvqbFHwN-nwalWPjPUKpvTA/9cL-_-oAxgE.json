[
  {
    "text": "good afternoon everybody welcome this is a session for cig VMware",
    "start": "860",
    "end": "7770"
  },
  {
    "text": "and today we're gonna do a deep dive into the cluster API VCO provider just a",
    "start": "7770",
    "end": "15570"
  },
  {
    "text": "little introduction my name is low Corinne and my co-presenter is Siddhartha Sarada and the first thing",
    "start": "15570",
    "end": "21689"
  },
  {
    "text": "we're both in VMware and the first thing I want to do is just define some definitions where we internally have",
    "start": "21689",
    "end": "28080"
  },
  {
    "text": "been using some acronyms Kathy and taffy taffy refers to just general cluster API",
    "start": "28080",
    "end": "35820"
  },
  {
    "text": "and Kathy refers to the Bistro provider and this is the repo for the link to the",
    "start": "35820",
    "end": "43770"
  },
  {
    "text": "repo and the agenda today is that we're gonna go over a very brief review of cluster API but not too in-depth about",
    "start": "43770",
    "end": "51120"
  },
  {
    "text": "clustering API there were other sessions already we'll go into the history of",
    "start": "51120",
    "end": "56430"
  },
  {
    "text": "Kathy and that followed with by some",
    "start": "56430",
    "end": "61620"
  },
  {
    "text": "discussion on architecture and workflow and and then the future directions are",
    "start": "61620",
    "end": "67229"
  },
  {
    "text": "for cat a and cat B and at the very end we'll do a demo so I think I want to",
    "start": "67229",
    "end": "75450"
  },
  {
    "text": "start off with a problem statement why does Kathy and Kathy exist well the",
    "start": "75450",
    "end": "82830"
  },
  {
    "text": "reason is deploying kubernetes cluster and managing them his heart okay so now",
    "start": "82830",
    "end": "91380"
  },
  {
    "text": "on to a brief overview of cluster API what is it",
    "start": "91380",
    "end": "96509"
  },
  {
    "text": "it's a project and the goal is to manage the lifecycle of kubernetes cluster and",
    "start": "96509",
    "end": "102240"
  },
  {
    "text": "we follow the philosophy of two bananas managing kubernetes you'll see that in",
    "start": "102240",
    "end": "108930"
  },
  {
    "text": "in future slides and the provider code or the code that provides the glue to",
    "start": "108930",
    "end": "115619"
  },
  {
    "text": "the infrastructure so cluster API will use that glute you to actually provision",
    "start": "115619",
    "end": "120960"
  },
  {
    "text": "the or whatever it needs cluster API right",
    "start": "120960",
    "end": "127790"
  },
  {
    "text": "now is at V 1 alpha 1 that's the API version and we released that at the end",
    "start": "127790",
    "end": "134270"
  },
  {
    "text": "of last quarter q1 of 2019 it's built on top of C Rd and it",
    "start": "134270",
    "end": "139280"
  },
  {
    "text": "implements a set of container controllers it currently supports two",
    "start": "139280",
    "end": "145160"
  },
  {
    "text": "operational model the first one is cluster API and manages the cluster that is deployed on you can",
    "start": "145160",
    "end": "152269"
  },
  {
    "text": "call that the self managing cluster and the second model is cluster API manages",
    "start": "152269",
    "end": "158959"
  },
  {
    "text": "the child clusters that it creates and you can call that centrally managed",
    "start": "158959",
    "end": "164450"
  },
  {
    "text": "clusters so when I said earlier on this",
    "start": "164450",
    "end": "169610"
  },
  {
    "text": "page that we were following the philosophy of qu Benes management kuba needs this is what a diagram would that",
    "start": "169610",
    "end": "175519"
  },
  {
    "text": "mean it looks like so on the left hand side you have what's called bootstrap",
    "start": "175519",
    "end": "180950"
  },
  {
    "text": "level management cluster and on the right hand side you have to target workload clusters on the left hand side",
    "start": "180950",
    "end": "188140"
  },
  {
    "text": "you have to deploy kuben a cluster api and the provider on an existing",
    "start": "188140",
    "end": "193720"
  },
  {
    "text": "kubernetes cluster in order to use it",
    "start": "193720",
    "end": "200560"
  },
  {
    "text": "i'll refer back to this diagram once we get to the demo so a little bit about",
    "start": "200560",
    "end": "206930"
  },
  {
    "text": "the history of the vSphere provider so q3 of 2018 vmware joined sig cluster",
    "start": "206930",
    "end": "214220"
  },
  {
    "text": "lifecycle and the cluster api working group and we transitioned the the",
    "start": "214220",
    "end": "220250"
  },
  {
    "text": "provider from terraform to go v mami api's and go v mommy api's are just",
    "start": "220250",
    "end": "225260"
  },
  {
    "text": "eight guys to interact with the B sphere it's a open source project so you guys",
    "start": "225260",
    "end": "232790"
  },
  {
    "text": "can all access be sure to go v mommy also q4 of 2018 we",
    "start": "232790",
    "end": "241130"
  },
  {
    "text": "transitioned the provider from an aggregate API server to Co DS we added",
    "start": "241130",
    "end": "248959"
  },
  {
    "text": "as central repo for official containers automated at it automated CIA",
    "start": "248959",
    "end": "254930"
  },
  {
    "text": "III test and created and helper OVA and we tagged that as the Geo dot one key",
    "start": "254930",
    "end": "263880"
  },
  {
    "text": "one of 2019 we added a few features did some bug fixes and ensured compatibility",
    "start": "263880",
    "end": "269760"
  },
  {
    "text": "with Cathy v1 alpha 1 and tagged that as v02 okay and now I'm gonna turn it over",
    "start": "269760",
    "end": "277650"
  },
  {
    "text": "to my co-presenter and he's going to talk about the architecture in workflow",
    "start": "277650",
    "end": "286130"
  },
  {
    "text": "thanks luck so let's look at another covers what's happening when you actually try to use the clustered API",
    "start": "286130",
    "end": "292560"
  },
  {
    "text": "vSphere provider so what you see on the screen is a quick diagram of an oxide",
    "start": "292560",
    "end": "297600"
  },
  {
    "text": "that you need a cluster to run these controllers so what you see on the top is the let's say the bootstrap pressure",
    "start": "297600",
    "end": "303300"
  },
  {
    "text": "or the management cluster where your cluster API pods are running so you see",
    "start": "303300",
    "end": "309090"
  },
  {
    "text": "there are two parts that you will get when you actually deploy this I'd refer that one is the kappahd and the other is",
    "start": "309090",
    "end": "315960"
  },
  {
    "text": "the cap V part the Cappy pol is essentially running to set of",
    "start": "315960",
    "end": "321200"
  },
  {
    "text": "controllers the machines set controller and the Machine deployment controllers and these controllers are responsible",
    "start": "321200",
    "end": "328710"
  },
  {
    "text": "for processing two specific types of resources which is the machine set and",
    "start": "328710",
    "end": "333870"
  },
  {
    "text": "the Machine deployment on the other hand their cap V part which is more like vSphere specific powered that is running",
    "start": "333870",
    "end": "340440"
  },
  {
    "text": "the machine controller as well as the cluster controller and they in general process again the cluster resource as",
    "start": "340440",
    "end": "346470"
  },
  {
    "text": "well as the machine resource and alongside with that it also processes vSphere specific resources as we have",
    "start": "346470",
    "end": "352260"
  },
  {
    "text": "listed in the diagram there and we'll look more into details we'll probably when we go to the demo as well so just",
    "start": "352260",
    "end": "360510"
  },
  {
    "text": "from when you do start using or trying out the cluster API we should provide or",
    "start": "360510",
    "end": "365670"
  },
  {
    "text": "what exactly supported out-of-the-box so first of all the ubuntu cloud images is the default set of images that we",
    "start": "365670",
    "end": "372420"
  },
  {
    "text": "support today using which you can use to deploy kubernetes cluster but it's easy",
    "start": "372420",
    "end": "378270"
  },
  {
    "text": "enough to support other distributions as well and will briefly touch base form as well from the vSphere stack",
    "start": "378270",
    "end": "384430"
  },
  {
    "text": "perspective again vCenter server ESX server 6.5 or above that should should",
    "start": "384430",
    "end": "390310"
  },
  {
    "text": "do Kuban ADC and I weave is what we've chosen right now to deploy in the",
    "start": "390310",
    "end": "396699"
  },
  {
    "text": "kubernetes cluster that you're going to get out of it the cloud provided the kubernetes cloud provider of course we",
    "start": "396699",
    "end": "404229"
  },
  {
    "text": "configure it with the vSphere cloud provider with kubernetes so there's there two different versions there is an",
    "start": "404229",
    "end": "410020"
  },
  {
    "text": "entry version and there is an out of free version right now we're using the entry version of the cloud provider that",
    "start": "410020",
    "end": "415780"
  },
  {
    "text": "you get but again we we have our work cut out to move to the out of the tree version of the cloud provider as well",
    "start": "415780",
    "end": "422850"
  },
  {
    "text": "cloud in it you will be familiar with some of these tools cloud knit is the primary tool that is being used to",
    "start": "422850",
    "end": "429990"
  },
  {
    "text": "literally like bootstrap the VM when it powers on QB ADM is another cube atom",
    "start": "429990",
    "end": "437200"
  },
  {
    "text": "work your ATM is the another tool that we're using to bootstrap the kubernetes cluster itself inside that we am if you",
    "start": "437200",
    "end": "445210"
  },
  {
    "text": "want to do a quick start we also have a helper OVA that is part of the repo and there are instructions how to build that",
    "start": "445210",
    "end": "450940"
  },
  {
    "text": "real quick so that you can you know get jumpstart on you know trying it flying things out let's quickly look at some of",
    "start": "450940",
    "end": "459220"
  },
  {
    "text": "the resource yeah Mel's since its kubernetes as all Yama's a few very important means i want to just touch",
    "start": "459220",
    "end": "464470"
  },
  {
    "text": "base upon first is provided compliments at Yambol now this is a file that when you go through the instruction this will",
    "start": "464470",
    "end": "471400"
  },
  {
    "text": "be a generated file but the key thing to notice this particular file is responsible for installing and setting",
    "start": "471400",
    "end": "476860"
  },
  {
    "text": "up your cluster API controllers on to your target cluster like bootstrap",
    "start": "476860",
    "end": "482680"
  },
  {
    "text": "cluster or management cluster similarly the other two main ones that I've highlighted here and again this is not",
    "start": "482680",
    "end": "488560"
  },
  {
    "text": "entirely a comprehensive list but this is the main ones cluster out yeah Mel and the Machine bottom out these are primarily what",
    "start": "488560",
    "end": "495550"
  },
  {
    "text": "gives you what is your cluster level things that you want to find and similarly on the machine yeah defines",
    "start": "495550",
    "end": "502090"
  },
  {
    "text": "what is that one machine is going to look like and we'll look into in the next slide some more details of",
    "start": "502090",
    "end": "507430"
  },
  {
    "text": "what these are so let's look at this is the sample clustered Gamal would look",
    "start": "507430",
    "end": "512919"
  },
  {
    "text": "like on the right hand side that you see two main pieces of information first is",
    "start": "512919",
    "end": "518710"
  },
  {
    "text": "the cluster networking so some bit of exciter selection and things like that and the second part is the provider spec",
    "start": "518710",
    "end": "525040"
  },
  {
    "text": "which is more provided specific information for our case we have like where is every center server what are",
    "start": "525040",
    "end": "531700"
  },
  {
    "text": "the credentials that you want to use to access those these are the two pieces of information that is that we will find in",
    "start": "531700",
    "end": "536830"
  },
  {
    "text": "the cluster data Yambol moving on machine level this is how it looks like",
    "start": "536830",
    "end": "542620"
  },
  {
    "text": "as an example this is really what is giving you the how what what is the",
    "start": "542620",
    "end": "547959"
  },
  {
    "text": "shape in the size of the VM that you ultimately are going to deploy when you use this machine Yama so it has things",
    "start": "547959",
    "end": "555100"
  },
  {
    "text": "like data center data store resource pools like which defines where that VM will be placed for example then some bit",
    "start": "555100",
    "end": "562450"
  },
  {
    "text": "of sizing like CPU memory and so on for then it also has some specific things like which VM template that you want",
    "start": "562450",
    "end": "569770"
  },
  {
    "text": "clone this is going to point to for example whatever the template that you have prepared in vSphere things like NTP",
    "start": "569770",
    "end": "575230"
  },
  {
    "text": "servers or certain certain injection so this is if you have let's say custom shirts that you want to make sure that",
    "start": "575230",
    "end": "580690"
  },
  {
    "text": "you you know inject when the VM comes up so this is where you will define them that will be used similarly again",
    "start": "580690",
    "end": "587770"
  },
  {
    "text": "networking information and so on so forth we both support like DHCP as well as",
    "start": "587770",
    "end": "593620"
  },
  {
    "text": "static IP from the networking point of view for these VMs so so this is just in",
    "start": "593620",
    "end": "600070"
  },
  {
    "text": "a general sense like how the bootstrap workflow words so you define the machines George Jamell which we just saw",
    "start": "600070",
    "end": "605260"
  },
  {
    "text": "a moment ago which is your intent to what my VM should look like and then we",
    "start": "605260",
    "end": "610570"
  },
  {
    "text": "have some scripts which are right now existing in a file called templates or go which is in the source code but these",
    "start": "610570",
    "end": "616330"
  },
  {
    "text": "are essentially what defines your cloud net based configuration and all ultimately these are the two source of",
    "start": "616330",
    "end": "622089"
  },
  {
    "text": "input that gets in the machine controller running running as part of the captive part",
    "start": "622089",
    "end": "627390"
  },
  {
    "text": "processes these resources clone is responsible for cloning the VM",
    "start": "627390",
    "end": "632410"
  },
  {
    "text": "generating the metadata that needs to be injected in that VM and then ultimately powers that off once that VM is powered",
    "start": "632410",
    "end": "639940"
  },
  {
    "text": "on first thing cloud it kicks in cloud net takes care of a networking and anything like certain",
    "start": "639940",
    "end": "645889"
  },
  {
    "text": "ejection whatever the things that you've specified cloud new takes care of that then it also emits out a shelf square",
    "start": "645889",
    "end": "652190"
  },
  {
    "text": "boot got a search in temp location which is basically has all these steps that is",
    "start": "652190",
    "end": "658519"
  },
  {
    "text": "needed to be executed to bring this node online ultimately at the end of the day that boot data set contains calls to",
    "start": "658519",
    "end": "664759"
  },
  {
    "text": "Cuvier DM you know you can imagine the last call as the cube a DM join or qvd a minute essentially start here to turn",
    "start": "664759",
    "end": "671930"
  },
  {
    "text": "this VM into a kubernetes node for you a little bit of the where they're headed",
    "start": "671930",
    "end": "678500"
  },
  {
    "text": "towards so from a Cappy perspective there is V 1 alpha 2 is the current release that is being worked on at the",
    "start": "678500",
    "end": "685250"
  },
  {
    "text": "moment and there's a lot of redesign that is happening is part of even alpha 2 some of the work streams have listed",
    "start": "685250",
    "end": "690949"
  },
  {
    "text": "out on this slide here things like the data model which is your cre definitions",
    "start": "690949",
    "end": "696050"
  },
  {
    "text": "itself some of them might undergo some changes how the how the extensions are",
    "start": "696050",
    "end": "701329"
  },
  {
    "text": "being used like how is the provider talking to the main controller those things are also under consideration for",
    "start": "701329",
    "end": "706639"
  },
  {
    "text": "changes similarly the control plane lifecycle or the node life cycle individually and the",
    "start": "706639",
    "end": "713689"
  },
  {
    "text": "last not really is the image building like there is a again versioning for image stamping how do you reliably",
    "start": "713689",
    "end": "718880"
  },
  {
    "text": "reproduce or generate an image that you can you know reliably use in in the capi world from the cap V perspective more",
    "start": "718880",
    "end": "726800"
  },
  {
    "text": "specific to the vSphere provider first and foremost caffeine needs to align with whatever the changes that come out",
    "start": "726800",
    "end": "732769"
  },
  {
    "text": "of the Vivaan alpha to redesign of the cap e then other than that we want to",
    "start": "732769",
    "end": "739490"
  },
  {
    "text": "align the cap we feature said along with the other providers for example things",
    "start": "739490",
    "end": "744829"
  },
  {
    "text": "like add high availability multi master support we don't have that yet but that's something that we probably going",
    "start": "744829",
    "end": "751250"
  },
  {
    "text": "to get soon enough again as I mentioned we want to switch to using the out of three version of the vSphere cloud",
    "start": "751250",
    "end": "757250"
  },
  {
    "text": "provider instead of using the entry version which is now getting ping getting deprecated at the moment enabled",
    "start": "757250",
    "end": "763579"
  },
  {
    "text": "zone support again vSphere cloud provider already has these own support capability but it's just that in the cap",
    "start": "763579",
    "end": "768889"
  },
  {
    "text": "v-world we have not yet enabled that configuration option so again that's again",
    "start": "768889",
    "end": "774270"
  },
  {
    "text": "similarly CSI implementation the moment we move to the out of treviso a cloud to wider we also enable the dedicated CSI",
    "start": "774270",
    "end": "782020"
  },
  {
    "text": "plugin for the vSphere provider then some things on more vSphere specific",
    "start": "782020",
    "end": "788710"
  },
  {
    "text": "things things like the VMware like the vSphere VM affinity and anti affinity policies so we'll start enabling that as well so",
    "start": "788710",
    "end": "795850"
  },
  {
    "text": "that when you were defining your cluster you can express your intent as to how you want your dreams to be placed so and",
    "start": "795850",
    "end": "801730"
  },
  {
    "text": "so forth last point here is more touches upon if you go back to the last diagram that I",
    "start": "801730",
    "end": "806740"
  },
  {
    "text": "saw showed like the scripts in template dot go here it's not very useful because",
    "start": "806740",
    "end": "812440"
  },
  {
    "text": "right now they're kind of hard built in the go templates I figure out to modify in order to adapt something you can I",
    "start": "812440",
    "end": "818140"
  },
  {
    "text": "have to modify the source code which is less than ideal so one of the thing that we want to focus on is can externalize that in a way that you can easily modify",
    "start": "818140",
    "end": "825640"
  },
  {
    "text": "that so that you can adapt to your needs real quick time for a demo lock so I",
    "start": "825640",
    "end": "835990"
  },
  {
    "text": "want to what happened okay I want to",
    "start": "835990",
    "end": "846130"
  },
  {
    "text": "start off by just talking about the demo",
    "start": "846130",
    "end": "852040"
  },
  {
    "text": "so the demo I'm gonna show today is is from the perspective way of a developer",
    "start": "852040",
    "end": "857680"
  },
  {
    "text": "so if you want to start looking at Cap B and you want to get involved this is how",
    "start": "857680",
    "end": "865140"
  },
  {
    "text": "you you can start out so up here let's",
    "start": "865140",
    "end": "872380"
  },
  {
    "text": "go into the",
    "start": "872380",
    "end": "875250"
  },
  {
    "text": "Oh okay",
    "start": "881720",
    "end": "887780"
  },
  {
    "text": "okay so in in here I'm at the root",
    "start": "887780",
    "end": "895160"
  },
  {
    "text": "folder of the the repo and in this folder we have a make file and I'm gonna",
    "start": "895160",
    "end": "902660"
  },
  {
    "text": "step through how you would build it how you would deploy it and then we'll and",
    "start": "902660",
    "end": "911240"
  },
  {
    "text": "how do would you interact with the the cluster that we created it so in this we",
    "start": "911240",
    "end": "917420"
  },
  {
    "text": "have a make file and inside this make",
    "start": "917420",
    "end": "922790"
  },
  {
    "text": "file there is a definite right here URL",
    "start": "922790",
    "end": "927860"
  },
  {
    "text": "and you can put in if you have your own private registry or you have an account",
    "start": "927860",
    "end": "933020"
  },
  {
    "text": "on doctor hub you can build your own container here and and then push it up",
    "start": "933020",
    "end": "938300"
  },
  {
    "text": "for for debugging okay so this is what I have for my container on docker hub and",
    "start": "938300",
    "end": "947080"
  },
  {
    "text": "once you once you put that information into this make file I'm not gonna do it",
    "start": "947080",
    "end": "953480"
  },
  {
    "text": "here I'm just gonna talk through it you can say he make Deb PMO and what that",
    "start": "953480",
    "end": "959540"
  },
  {
    "text": "would do is it's going to generate an outfitter with sample yellow files and",
    "start": "959540",
    "end": "965210"
  },
  {
    "text": "it will generate some certificates for you that cluster API will use to set up",
    "start": "965210",
    "end": "971540"
  },
  {
    "text": "the SSH for the the nodes of the target",
    "start": "971540",
    "end": "977720"
  },
  {
    "text": "cluster once you do that then you can say dev build yamo and that will build",
    "start": "977720",
    "end": "985730"
  },
  {
    "text": "the container and tag it with the name that you specifying in last of all make",
    "start": "985730",
    "end": "990980"
  },
  {
    "text": "push ammo and that will push it up to your to your to your registry and and",
    "start": "990980",
    "end": "998180"
  },
  {
    "text": "then you can use it so I've already generated a the sample folder and inside",
    "start": "998180",
    "end": "1008800"
  },
  {
    "text": "of out you see that there are a bunch of a bunch of yellow flowers right here",
    "start": "1008800",
    "end": "1018029"
  },
  {
    "text": "you know when Siddhartha was talking and he mentioned the provider components machines and cluster gamal there are a",
    "start": "1018029",
    "end": "1025329"
  },
  {
    "text": "couple other yeah mo files but we're in our than discussing them today because I really just want to focus on showing a",
    "start": "1025329",
    "end": "1032438"
  },
  {
    "text": "basic bringing up a cluster I won't go",
    "start": "1032439",
    "end": "1037870"
  },
  {
    "text": "back to this diagram that we had we showed earlier where we had kubernetes",
    "start": "1037870",
    "end": "1044558"
  },
  {
    "text": "managing kubernetes right so on the left hand side we you have to have an existing cluster and then we run deploy",
    "start": "1044559",
    "end": "1052889"
  },
  {
    "text": "cluster API on top of that existing cluster and from then on we can create",
    "start": "1052889",
    "end": "1058149"
  },
  {
    "text": "target clusters so for today I'm going",
    "start": "1058149",
    "end": "1065260"
  },
  {
    "text": "to use kind as my bootstrap cluster or for those of you guys who don't know",
    "start": "1065260",
    "end": "1071649"
  },
  {
    "text": "what kind is kind as a project in the community that basically instantiates a",
    "start": "1071649",
    "end": "1077610"
  },
  {
    "text": "kubernetes cluster on top of docker containers okay so it's really handy and",
    "start": "1077610",
    "end": "1086370"
  },
  {
    "text": "in order to save time I went ahead and created a time cluster previously I",
    "start": "1086370",
    "end": "1092200"
  },
  {
    "text": "didn't want you guys to watch it get up",
    "start": "1092200",
    "end": "1099639"
  },
  {
    "text": "and going so if I do coop CTL get node you see that it is running a kind",
    "start": "1099639",
    "end": "1108580"
  },
  {
    "text": "cluster right here okay and we go down here you know and we're just gonna watch",
    "start": "1108580",
    "end": "1117840"
  },
  {
    "text": "we're just gonna watch all the pots that are starting up",
    "start": "1117840",
    "end": "1123450"
  },
  {
    "text": "okay so for this demo today what I might",
    "start": "1124360",
    "end": "1131270"
  },
  {
    "text": "show you in the main Cappy repo there's a CLI tool called cluster CTO that",
    "start": "1131270",
    "end": "1139940"
  },
  {
    "text": "that's that's that's a good development tool to use but if you haven't played",
    "start": "1139940",
    "end": "1148669"
  },
  {
    "text": "with cluster API before you don't know what cluster CTO is doing so today I'm",
    "start": "1148669",
    "end": "1153770"
  },
  {
    "text": "gonna actually do everything from scratch so you could actually see what cluster CTL was doing okay so the first",
    "start": "1153770",
    "end": "1160850"
  },
  {
    "text": "thing I'm gonna do is now I'm going to go ahead and apply the cluster API and",
    "start": "1160850",
    "end": "1169779"
  },
  {
    "text": "the provider on top of this kind cluster",
    "start": "1169779",
    "end": "1175299"
  },
  {
    "text": "as Siddharth mentioned earlier that the",
    "start": "1175630",
    "end": "1182539"
  },
  {
    "text": "provider components is the file that deploys the cluster API and the provider",
    "start": "1182539",
    "end": "1189880"
  },
  {
    "text": "so we're gonna go ahead so that is starting up",
    "start": "1189880",
    "end": "1197950"
  },
  {
    "text": "and while while we wait for that to finish and we'll we'll just move on to",
    "start": "1199909",
    "end": "1209779"
  },
  {
    "text": "the next step okay so it looks like the",
    "start": "1209779",
    "end": "1215479"
  },
  {
    "text": "cluster API system is up and running now so now we go ahead and create all",
    "start": "1215479",
    "end": "1221329"
  },
  {
    "text": "cluster you won't see anything captain down here and [Music]",
    "start": "1221329",
    "end": "1229289"
  },
  {
    "text": "so one thing that was mentioned earlier was that we currently support vCenter",
    "start": "1233430",
    "end": "1240530"
  },
  {
    "text": "6.5 and above we also support ESX for",
    "start": "1240530",
    "end": "1248220"
  },
  {
    "text": "development purposes so for those of you guys so right here I have ESX running in",
    "start": "1248220",
    "end": "1253410"
  },
  {
    "text": "a fusion so I have nessip ESX and right",
    "start": "1253410",
    "end": "1258720"
  },
  {
    "text": "here I'm showing that we don't have any VMs running so now we'll go ahead and",
    "start": "1258720",
    "end": "1268200"
  },
  {
    "text": "create a machine for that cluster and as",
    "start": "1268200",
    "end": "1276420"
  },
  {
    "text": "soon as we do that will shortly see a machine a VM created and booting up",
    "start": "1276420",
    "end": "1285360"
  },
  {
    "text": "there we go so now we have a VM booting up a one",
    "start": "1285360",
    "end": "1295380"
  },
  {
    "text": "node cluster what we need now what I'm going to show you now is how do you get",
    "start": "1295380",
    "end": "1300690"
  },
  {
    "text": "the coop config out of that VM so that you can actually interact with that target cluster and while that's booting",
    "start": "1300690",
    "end": "1309660"
  },
  {
    "text": "up I am going to we have this tool",
    "start": "1309660",
    "end": "1316380"
  },
  {
    "text": "that's um open source tool called OBC if you I'm going to use that",
    "start": "1316380",
    "end": "1326179"
  },
  {
    "text": "okay",
    "start": "1327340",
    "end": "1329580"
  },
  {
    "text": "okay and I'm gonna watch way to the IP address comes up",
    "start": "1333600",
    "end": "1340970"
  },
  {
    "text": "so that this is not the actual correct okay there we go",
    "start": "1350500",
    "end": "1355930"
  },
  {
    "text": "so cancer that so remember I said that",
    "start": "1355930",
    "end": "1362210"
  },
  {
    "text": "when you do make Deb llamo it generates some certificates if you look in your",
    "start": "1362210",
    "end": "1368840"
  },
  {
    "text": "dot sa folder you will see these fear attempt in VC attempt at pub you could",
    "start": "1368840",
    "end": "1375890"
  },
  {
    "text": "use those keys to si SSH into the node Oh",
    "start": "1375890",
    "end": "1381790"
  },
  {
    "text": "okay there will",
    "start": "1413120",
    "end": "1416830"
  },
  {
    "text": "so now we're on them on the node of the target cluster that we created using a",
    "start": "1425870",
    "end": "1431059"
  },
  {
    "text": "cluster API so we look around so the",
    "start": "1431059",
    "end": "1439730"
  },
  {
    "text": "fact that we see an admin that top folder here of file here that tells me that Kubb ATM has successfully bootstrap",
    "start": "1439730",
    "end": "1448100"
  },
  {
    "text": "the VM into a kuba native snowed so now",
    "start": "1448100",
    "end": "1458149"
  },
  {
    "text": "I'm going to go ahead and pull that file out",
    "start": "1458149",
    "end": "1462250"
  },
  {
    "text": "and we'll just call this target that",
    "start": "1493400",
    "end": "1499250"
  },
  {
    "text": "time oh yeah",
    "start": "1499250",
    "end": "1504290"
  },
  {
    "text": "now the system that we're youwere that the they're always that we're using",
    "start": "1508299",
    "end": "1514089"
  },
  {
    "text": "today at it's an extra line in our target death cough so I'm just going to",
    "start": "1514089",
    "end": "1520209"
  },
  {
    "text": "go ahead and remove it oh it's not there",
    "start": "1520209",
    "end": "1531059"
  },
  {
    "text": "okay okay so apparently it's not there this time we'll just go ahead and use",
    "start": "1536500",
    "end": "1543610"
  },
  {
    "text": "coop CTL passing the target Tech Talk",
    "start": "1543610",
    "end": "1549549"
  },
  {
    "text": "file and and we see here that the",
    "start": "1549549",
    "end": "1556120"
  },
  {
    "text": "machine is up and running so now you can interact with that that target cluster",
    "start": "1556120",
    "end": "1562000"
  },
  {
    "text": "using that target that conf file okay",
    "start": "1562000",
    "end": "1570150"
  },
  {
    "text": "and so now the last thing I want to do is I'm going to delete the delete the",
    "start": "1570150",
    "end": "1576820"
  },
  {
    "text": "machine and in order to delete the machine you actually have to do it from",
    "start": "1576820",
    "end": "1582070"
  },
  {
    "text": "the original bootstrap cluster so remember when I do it's the GL if I",
    "start": "1582070",
    "end": "1592690"
  },
  {
    "text": "don't pass in coop config target comp then I'm actually targeting the original",
    "start": "1592690",
    "end": "1598450"
  },
  {
    "text": "bootstrap cluster with the kind cluster so if I do oops VL the machine on the",
    "start": "1598450",
    "end": "1607179"
  },
  {
    "text": "original bootstrap cluster",
    "start": "1607179",
    "end": "1610500"
  },
  {
    "text": "we back here you see that machine is there and the machine is gone so what I",
    "start": "1613470",
    "end": "1623680"
  },
  {
    "text": "was demonstrating me said if you if you ever get cloned the main tapi repo",
    "start": "1623680",
    "end": "1630430"
  },
  {
    "text": "you'll you'll see that there is that CLI tool plus your CTL it does a lot of this",
    "start": "1630430",
    "end": "1636010"
  },
  {
    "text": "stuff for you but I wanted to show you guys how everything underneath what is",
    "start": "1636010",
    "end": "1641530"
  },
  {
    "text": "doing from scratch using coups CTL so at this point if we go back to you",
    "start": "1641530",
    "end": "1650700"
  },
  {
    "text": "everything I showed is on the next page this is everything I did okay",
    "start": "1657570",
    "end": "1664770"
  },
  {
    "text": "my mind go through this because I have reaches already did that I think at this",
    "start": "1664770",
    "end": "1670320"
  },
  {
    "text": "point it's time for a Q&A and we'll",
    "start": "1670320",
    "end": "1676140"
  },
  {
    "text": "answer any questions they people have the guy in the back he had his hand up first",
    "start": "1676140",
    "end": "1683300"
  },
  {
    "text": "no-no-no so what what happens is that coop CTL just submits this year the",
    "start": "1698950",
    "end": "1706309"
  },
  {
    "text": "llamo files and on kubernetes we have those controllers that siddharth",
    "start": "1706309",
    "end": "1713090"
  },
  {
    "text": "mentioned before it sees the request and then it will call go v mommy to actually",
    "start": "1713090",
    "end": "1720049"
  },
  {
    "text": "provision the vm and boot up",
    "start": "1720049",
    "end": "1724898"
  },
  {
    "text": "I didn't hear that are you trying to just confirm the workflow is that",
    "start": "1735870",
    "end": "1742760"
  },
  {
    "text": "No well so so the kubernetes api sell them in itself is not doing it so",
    "start": "1753140",
    "end": "1759650"
  },
  {
    "text": "remember in the one of the diagram we had like the two parts here for example",
    "start": "1759650",
    "end": "1764809"
  },
  {
    "text": "so the parts that are running it that they're running some controllers here right so when you submit that machine",
    "start": "1764809",
    "end": "1770660"
  },
  {
    "text": "dot yeah Mel with Q CTL apply that that creates a new custom resource of type",
    "start": "1770660",
    "end": "1776030"
  },
  {
    "text": "machine and that type resource is being processed by the controller that is",
    "start": "1776030",
    "end": "1781220"
  },
  {
    "text": "running of the s part of the cap real part so it's waiting it's sitting there",
    "start": "1781220",
    "end": "1786620"
  },
  {
    "text": "waiting for requests so this controller right here is what then receive that oh",
    "start": "1786620",
    "end": "1792890"
  },
  {
    "text": "there's a new object for machine that has been created and I need to do something about it and that's what it",
    "start": "1792890",
    "end": "1798620"
  },
  {
    "text": "basically goes ahead and then says let me look at the spec clonaid make it realize",
    "start": "1798620",
    "end": "1805720"
  },
  {
    "text": "so currently cap a and Jaffe does not do cluster upgrade yet as part there is a",
    "start": "1821330",
    "end": "1830299"
  },
  {
    "text": "project that we're working on to do",
    "start": "1830299",
    "end": "1835429"
  },
  {
    "text": "cluster upgrade inside VMware and I think we're going to eventually just upstream that into tapi so that's like",
    "start": "1835429",
    "end": "1854960"
  },
  {
    "text": "automated so essentially the way you saw in this demo how we had like the machine's not gamal you will create one",
    "start": "1854960",
    "end": "1861889"
  },
  {
    "text": "more so in here okay so we saw this",
    "start": "1861889",
    "end": "1880730"
  },
  {
    "text": "machine's dot yeah mill file if we look at that quickly you know so this is very",
    "start": "1880730",
    "end": "1886879"
  },
  {
    "text": "similar to what we show what you saw in the slide now the interesting part is now when you want to add let's say more",
    "start": "1886879",
    "end": "1893029"
  },
  {
    "text": "worker nodes for your cluster you cannot define almost identical to this file how",
    "start": "1893029",
    "end": "1898879"
  },
  {
    "text": "your worker nodes what sizing and things like that what you want the only difference between the master node and",
    "start": "1898879",
    "end": "1904220"
  },
  {
    "text": "the vector node for example will be in this last line here we've seen in the versions section for a master node it",
    "start": "1904220",
    "end": "1910789"
  },
  {
    "text": "also includes something called a control plane version which kind of identifies that this is a master and signifies that",
    "start": "1910789",
    "end": "1916580"
  },
  {
    "text": "so for a vertical mode you basically just remove this particular line for example and basically resubmit this back",
    "start": "1916580",
    "end": "1923539"
  },
  {
    "text": "and of course if you have static IP change the IPS and all but the moment you do that the controller that is",
    "start": "1923539",
    "end": "1929749"
  },
  {
    "text": "running as part of the cap V part that is responsible for generating an on-the-fly cube ADM program from the",
    "start": "1929749",
    "end": "1937340"
  },
  {
    "text": "master it ensures that that cube ATM token that it's going to utilize is valid at a minimum for fifteen minutes",
    "start": "1937340",
    "end": "1944330"
  },
  {
    "text": "and I don't think it caps up at like a twenty minute so within that time range",
    "start": "1944330",
    "end": "1949850"
  },
  {
    "text": "if the VM has that's the time frame when you're working nodes can basically clone powered on and the cube ATM in it",
    "start": "1949850",
    "end": "1956750"
  },
  {
    "text": "automatically will happen to join the main cluster yes so essentially even if",
    "start": "1956750",
    "end": "1965660"
  },
  {
    "text": "even when we do support the multi master remember like the Li from the a cube and it is API perspective",
    "start": "1965660",
    "end": "1971179"
  },
  {
    "text": "you still will be a talking to just one community's APN time because even with the multi master then you have to put in",
    "start": "1971179",
    "end": "1977480"
  },
  {
    "text": "into the picture is the load balancer for the API server so yes",
    "start": "1977480",
    "end": "1983620"
  },
  {
    "text": "so so in the current implementation that exists as of today cluster API like say",
    "start": "2014860",
    "end": "2021740"
  },
  {
    "text": "the cap V has already made certain choices that unfortunately right now you cannot like configure so for example in",
    "start": "2021740",
    "end": "2028910"
  },
  {
    "text": "your cluster or jam and you cannot specify oh I don't want vivre I won't let say calico as a CNI that flexibility",
    "start": "2028910",
    "end": "2036200"
  },
  {
    "text": "today doesn't exist but we I mean I think Cappy in general it doesn't even",
    "start": "2036200",
    "end": "2042470"
  },
  {
    "text": "exist I think in general as a Cappy level itself like across the various cloud providers it's not a general",
    "start": "2042470",
    "end": "2048200"
  },
  {
    "text": "option that you will find anywhere at the moment however that is going to change and as we even alpha-2 comes",
    "start": "2048200",
    "end": "2053870"
  },
  {
    "text": "along the way I'm sure if not and even alpha-2 but immediately the nips at subsequent releases there will be",
    "start": "2053870",
    "end": "2061450"
  },
  {
    "text": "available these kind of choices in a such that when you are defining your cluster for example the cluster or DML",
    "start": "2061450",
    "end": "2067040"
  },
  {
    "text": "you should potentially be able to specify I want calico or I want be but I want planner or whatever the choice of",
    "start": "2067040",
    "end": "2073850"
  },
  {
    "text": "your CNI with whatever configuration you might want to pass being made available as you know intent based definitions but",
    "start": "2073850",
    "end": "2082879"
  },
  {
    "text": "they don't exist as of not today today those choices are kind of fix you but you can of course when you are if you're",
    "start": "2082880",
    "end": "2089720"
  },
  {
    "text": "developer you can of course clone the repo make those final modifications the remember I point out like this is a",
    "start": "2089720",
    "end": "2094909"
  },
  {
    "text": "template go file that's really where the main definitions are so if you want to let's say in your environment deploy",
    "start": "2094910",
    "end": "2101090"
  },
  {
    "text": "calico in that file you will find you can easily find the snippet Yama's snippet that basically",
    "start": "2101090",
    "end": "2106910"
  },
  {
    "text": "instantiates we've today you can easily replace that with the scene I have a choice and then when you build go",
    "start": "2106910",
    "end": "2113420"
  },
  {
    "text": "through the developer process I'm going to deploy a cluster your cluster will then have whatever the scene a that you choose but again it's not a configurable",
    "start": "2113420",
    "end": "2120830"
  },
  {
    "text": "option yet",
    "start": "2120830",
    "end": "2123400"
  },
  {
    "text": "so so the NSX features our NSX the CN n for n s xt is called n CP right now as",
    "start": "2131490",
    "end": "2138810"
  },
  {
    "text": "of today for example n CP is not an open-source project so there is no way",
    "start": "2138810",
    "end": "2145500"
  },
  {
    "text": "in the open source world directly where we can actually instruct cluster API to",
    "start": "2145500",
    "end": "2150990"
  },
  {
    "text": "deploy a seer like the NCP plugin but hopefully again you know I don't know",
    "start": "2150990",
    "end": "2156690"
  },
  {
    "text": "really what the future would be but hopefully you know I think it might become reality that you know along with",
    "start": "2156690",
    "end": "2163230"
  },
  {
    "text": "the other CNI choices NCP will or potentially may become a possible CNI",
    "start": "2163230",
    "end": "2168359"
  },
  {
    "text": "deployment option if you have any sixty already in your environment the mechanics of that might again I don't",
    "start": "2168359",
    "end": "2174300"
  },
  {
    "text": "know really at the moment what that would be but definitely should be possible in somewhat near future",
    "start": "2174300",
    "end": "2181430"
  },
  {
    "text": "any other questions okay",
    "start": "2181609",
    "end": "2185599"
  },
  {
    "text": "right so right now it uses username password based credentials which of",
    "start": "2226780",
    "end": "2232550"
  },
  {
    "text": "course always have the caveat that okay whatever if somebody rotated the password or something like that and now",
    "start": "2232550",
    "end": "2238160"
  },
  {
    "text": "how do you update it so so those are some of these operational challenges but unfortunately at the moment they can",
    "start": "2238160",
    "end": "2244010"
  },
  {
    "text": "again only talking about what the current code is it doesn't really handle like for example the password rotation",
    "start": "2244010",
    "end": "2250070"
  },
  {
    "text": "you deploy you can of course manually go in update that but it's not really automated very well now as far as other",
    "start": "2250070",
    "end": "2255890"
  },
  {
    "text": "type of credentials mechanism that may be supported things like you know",
    "start": "2255890",
    "end": "2260960"
  },
  {
    "text": "exchange I think start base I serve based authentication things like that",
    "start": "2260960",
    "end": "2266030"
  },
  {
    "text": "I think cap V is is really more of a tooling right now to kind of in able the",
    "start": "2266030",
    "end": "2271280"
  },
  {
    "text": "cluster at the end of the day those credentials are being used by let's say the vSphere cloud provider now so we",
    "start": "2271280",
    "end": "2278330"
  },
  {
    "text": "switch the moment like I'm not entirely sure if the vSphere cloud provider especially in the out of the tree",
    "start": "2278330",
    "end": "2283400"
  },
  {
    "text": "version of that currently supports let's say a solution you know solution based",
    "start": "2283400",
    "end": "2288620"
  },
  {
    "text": "authentication mechanism at the moment or not but it oh it does okay okay so",
    "start": "2288620",
    "end": "2296529"
  },
  {
    "text": "yes",
    "start": "2297880",
    "end": "2300880"
  },
  {
    "text": "right so essentially so in theory then essentially even with the with what you saw here then because because what the",
    "start": "2305420",
    "end": "2312650"
  },
  {
    "text": "credentials and how they're used are pretty much identical to how any vsphere api is how when you're consuming we're",
    "start": "2312650",
    "end": "2318320"
  },
  {
    "text": "going to be used so i guess even today when you have so the cap we supports the",
    "start": "2318320",
    "end": "2323630"
  },
  {
    "text": "secret based definition which is very identity which is actually identical to how you know I think the visa cloud",
    "start": "2323630",
    "end": "2330920"
  },
  {
    "text": "provider supports so you cannot generate it in the same way so if you can use solution users there then I'm guessing",
    "start": "2330920",
    "end": "2337730"
  },
  {
    "text": "again I haven't tried it myself but you should be able to use this as well okay",
    "start": "2337730",
    "end": "2343220"
  },
  {
    "text": "I think we're at time or we actually a little bit over so if there are if there",
    "start": "2343220",
    "end": "2351590"
  },
  {
    "text": "are any other questions well we'll stick behind and answer them but the last just",
    "start": "2351590",
    "end": "2357920"
  },
  {
    "text": "a last thing I went we want thank you guys if you guys want to reach us there",
    "start": "2357920",
    "end": "2363380"
  },
  {
    "text": "are there are two slack channels under the kubernetes organization cluster API",
    "start": "2363380",
    "end": "2369110"
  },
  {
    "text": "and SiC VMware we have bi-weekly meetings on Monday at 1:00 p.m. Pacific",
    "start": "2369110",
    "end": "2375890"
  },
  {
    "text": "Standard Time the next one is on June 4th and last of all this is the git repo",
    "start": "2375890",
    "end": "2381560"
  },
  {
    "text": "so thank you all for coming",
    "start": "2381560",
    "end": "2385840"
  }
]