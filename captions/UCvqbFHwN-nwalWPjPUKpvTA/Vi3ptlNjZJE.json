[
  {
    "start": "0",
    "end": "128000"
  },
  {
    "text": "thanks everyone for coming this is the kubernetes multi-tenancy working group deep dive and I'm David Oppenheimer I'm",
    "start": "0",
    "end": "8250"
  },
  {
    "text": "a software engineer at Google and unfortunately my co-lead of the working group",
    "start": "8250",
    "end": "13590"
  },
  {
    "text": "jester's l was not able to come to Cuba con otherwise she'd be here coley ting",
    "start": "13590",
    "end": "19140"
  },
  {
    "text": "this session with me so we kind of have two parts of the session planned one is",
    "start": "19140",
    "end": "25590"
  },
  {
    "text": "a few folks had presentations that they wanted to do a few slides about ideas",
    "start": "25590",
    "end": "31050"
  },
  {
    "text": "they've been thinking around about around multi-tenancy and policies and things in that area and then also we had",
    "start": "31050",
    "end": "38280"
  },
  {
    "text": "some collected some some some brainstorming ideas and a doc that people were interested in just having",
    "start": "38280",
    "end": "44820"
  },
  {
    "text": "freeform discussion about but we don't have to stick to what's there we can also talk about whatever folks in the",
    "start": "44820",
    "end": "50340"
  },
  {
    "text": "audience are interested in talking about one of the things that went pretty well last cube con we did a multi-tenancy",
    "start": "50340",
    "end": "58140"
  },
  {
    "text": "working group deep dive that was actually the first deep dive session we",
    "start": "58140",
    "end": "63300"
  },
  {
    "text": "had for the working group was people who talked about how they're using multi-tenancy and kubernetes today and",
    "start": "63300",
    "end": "68700"
  },
  {
    "text": "like what kinds of features are missing from the system or are difficult to use that they'd like to see and so that's",
    "start": "68700",
    "end": "75420"
  },
  {
    "text": "something that we could do if people are interested in talking about their use cases because we obviously one to the",
    "start": "75420",
    "end": "81900"
  },
  {
    "text": "the feature set in kubernetes to be driven by the things people actually need not just something that's you know",
    "start": "81900",
    "end": "87000"
  },
  {
    "text": "created in some kind of ivory tower so maybe we can do that when we when we get to the discussion section so the first",
    "start": "87000",
    "end": "94439"
  },
  {
    "text": "of the four I think it's four presentations is something that I'll be",
    "start": "94439",
    "end": "100710"
  },
  {
    "text": "presenting so it's an idea we've been developing at Google and proposed in the",
    "start": "100710",
    "end": "107820"
  },
  {
    "text": "Pali Tennessee working group and sig off and the policy working group called kubernetes security profile and actually",
    "start": "107820",
    "end": "113970"
  },
  {
    "text": "the work was done by my colleague esuite who who's another engineer at Google in",
    "start": "113970",
    "end": "120960"
  },
  {
    "text": "the kubernetes and container engine team unfortunately he was not able to attend so I'm gonna be presenting this in his",
    "start": "120960",
    "end": "127829"
  },
  {
    "text": "in his place so the idea of security profile",
    "start": "127829",
    "end": "133680"
  },
  {
    "start": "128000",
    "end": "292000"
  },
  {
    "text": "is to improve the usability of kubernetes security and multi-tenancy features so the observation we made was",
    "start": "133680",
    "end": "140400"
  },
  {
    "text": "that today in order to operate a secure or multi tenant cluster a cluster administrator has to have a pretty deep",
    "start": "140400",
    "end": "147299"
  },
  {
    "text": "understanding both of security in general and also about the specific security policies that kubernetes lets",
    "start": "147299",
    "end": "154799"
  },
  {
    "text": "you Express and so this can be pretty complicated and especially for for people who are new to the system or who",
    "start": "154799",
    "end": "161400"
  },
  {
    "text": "just don't want to understand things that deeply but do want a secure system and then even if you do develop that",
    "start": "161400",
    "end": "167400"
  },
  {
    "text": "kind of understanding of the policies and figure out what is appropriate for your environment the actual process of",
    "start": "167400",
    "end": "175560"
  },
  {
    "text": "writing down those policies in the in the yeah moles you know in the in the format that kubernetes requires is",
    "start": "175560",
    "end": "180629"
  },
  {
    "text": "error-prone and if you want to do that reproducibly you need tooling and then lastly even if you're able to figure out",
    "start": "180629",
    "end": "187290"
  },
  {
    "text": "the right policies and write them down and develop tools for applying them say in new clusters that you bring up or in",
    "start": "187290",
    "end": "192419"
  },
  {
    "text": "new namespaces that you create the policy configurations need to be updated as new kubernetes features are added",
    "start": "192419",
    "end": "199109"
  },
  {
    "text": "over time and so there's kind of a versioning a challenge that that you have as an administrator and so the idea",
    "start": "199109",
    "end": "206549"
  },
  {
    "text": "of a security profile is to create a small menu of versioned community curated policy profiles to enable",
    "start": "206549",
    "end": "214049"
  },
  {
    "text": "turnkey cluster creation with the desired security and tenant isolation so",
    "start": "214049",
    "end": "219299"
  },
  {
    "text": "that's kind of a lot of words but kind of conveys what the idea is that were that we're getting at and by everywhere",
    "start": "219299",
    "end": "225540"
  },
  {
    "text": "we mean like these should run the same way whether you're running on any of the cloud providers or on Prem using a tool",
    "start": "225540",
    "end": "231810"
  },
  {
    "text": "like cube atom and so on and so the idea would be that you would run a command",
    "start": "231810",
    "end": "236819"
  },
  {
    "text": "like cube atom an it and then pass in the name of one of these security profiles there might be kind of a secure",
    "start": "236819",
    "end": "242310"
  },
  {
    "text": "by default security profile or one that say intended for saz where you have you",
    "start": "242310",
    "end": "249989"
  },
  {
    "text": "know strong isolation between namespaces because you're running say instances of a single tenant application multiple",
    "start": "249989",
    "end": "256829"
  },
  {
    "text": "replicas of that one for each of the users of the system and so on and and then also this would work across",
    "start": "256829",
    "end": "263340"
  },
  {
    "text": "upgrades both of the cluster and of the security profiles themselves and so you can see there's kind of two",
    "start": "263340",
    "end": "268949"
  },
  {
    "text": "pieces to the names of these profiles there's the the name that describes the",
    "start": "268949",
    "end": "274050"
  },
  {
    "text": "use case like saz multi-tenancy or default and then also a version associated with it and since this is",
    "start": "274050",
    "end": "280470"
  },
  {
    "text": "only supposed to be like a five minute talk I can't go into all the details the versioning and and and that but there",
    "start": "280470",
    "end": "286050"
  },
  {
    "text": "are proposals that are out for review by the community that go into more detail",
    "start": "286050",
    "end": "291770"
  },
  {
    "text": "and so the idea behind the security profile what's going on under the covers",
    "start": "291770",
    "end": "297060"
  },
  {
    "start": "292000",
    "end": "416000"
  },
  {
    "text": "is that it kind of wraps three places where policies get specified today so",
    "start": "297060",
    "end": "304770"
  },
  {
    "text": "one is what we call bootstrapping rules so these are for example command line",
    "start": "304770",
    "end": "309960"
  },
  {
    "text": "flags so if you want a secure cluster you have to have the right Flags pass to the API server the cubelet and so on and",
    "start": "309960",
    "end": "318090"
  },
  {
    "text": "so today you read these in some blog posts on the internet or occasionally",
    "start": "318090",
    "end": "324090"
  },
  {
    "text": "they'll be documentation saying what the right choices are the idea here is to you know kind of encode these in in kind",
    "start": "324090",
    "end": "329729"
  },
  {
    "text": "of curated and and well-accepted profiles so bootstrapping rules is the first one cluster scope policy objects",
    "start": "329729",
    "end": "336779"
  },
  {
    "text": "like pod security policy and then the third is namespace Co policy objects like network policy and then we don't",
    "start": "336779",
    "end": "344900"
  },
  {
    "text": "dictate how these how the security profile gets unwrapped and how these policies that it embeds get applied to",
    "start": "344900",
    "end": "352590"
  },
  {
    "text": "the system the idea would be that there would be a variety of what we were calling enforcers that could apply them",
    "start": "352590",
    "end": "359849"
  },
  {
    "text": "to the system and it depends on what kind of policy you're talking about so for example I showed that you know the",
    "start": "359849",
    "end": "367560"
  },
  {
    "text": "command line flags would be applied by say cube Adam when you bring up the cluster the cluster scope policy objects",
    "start": "367560",
    "end": "374250"
  },
  {
    "text": "could be injected into the system by the add-on manager or just through invoking",
    "start": "374250",
    "end": "379560"
  },
  {
    "text": "acute control apply and then the namespace Co policy objects the idea being that you could automatically",
    "start": "379560",
    "end": "384719"
  },
  {
    "text": "populate new namespaces with particular policy objects when they get created that could be done the dirts through",
    "start": "384719",
    "end": "391650"
  },
  {
    "text": "something like admission control and then the little cube earn a DS conformance test box that's off to the",
    "start": "391650",
    "end": "397680"
  },
  {
    "text": "side is just to mention that we want these profiles to be integrated",
    "start": "397680",
    "end": "403469"
  },
  {
    "text": "into kubernetes conformance so that when you bring up a cluster using one of these named profiles it behaves the same",
    "start": "403469",
    "end": "412289"
  },
  {
    "text": "everywhere no matter where you're running the security profile and so we",
    "start": "412289",
    "end": "418889"
  },
  {
    "start": "416000",
    "end": "642000"
  },
  {
    "text": "have a demo that may or may not work let's see yes",
    "start": "418889",
    "end": "427610"
  },
  {
    "text": "so I showed this the other day and found that going to 1.25 speed is slightly",
    "start": "427610",
    "end": "435659"
  },
  {
    "text": "better and so anyway the demo is going to show unfortunately the text of the",
    "start": "435659",
    "end": "442139"
  },
  {
    "text": "top left which is kind of the most important was covered up but it was doing that queue bottom command that",
    "start": "442139",
    "end": "449099"
  },
  {
    "text": "that I that I did before where you're passing in the name is security profile and here it's bringing up the cluster",
    "start": "449099",
    "end": "457699"
  },
  {
    "text": "and we're gonna add a node to the cluster and install Calico the reason",
    "start": "457699",
    "end": "465569"
  },
  {
    "text": "we're installing calcio is so we can use network policy and the reason we're using network policy is so we can give an example of a policy that gets",
    "start": "465569",
    "end": "471930"
  },
  {
    "text": "automatically populated into the namespace when you create a namespace so we will see that part in a second but",
    "start": "471930",
    "end": "478069"
  },
  {
    "text": "here were installing Calico and maybe I",
    "start": "478069",
    "end": "489509"
  },
  {
    "text": "should do this at 1.5 speed so yeah then",
    "start": "489509",
    "end": "494729"
  },
  {
    "text": "in the on the right side we're gonna do a watch to wait for the nodes to become",
    "start": "494729",
    "end": "499740"
  },
  {
    "text": "ready I think I will actually go to 1.5",
    "start": "499740",
    "end": "506089"
  },
  {
    "text": "and right and so the security profiles are represented as CRD so that that kind",
    "start": "511620",
    "end": "520200"
  },
  {
    "text": "of thing that box that was at the top of the chart that was the security profile itself that wraps the other policies is",
    "start": "520200",
    "end": "526830"
  },
  {
    "text": "represented as a custom resource you can see here that we installed three of these custom resources three you know",
    "start": "526830",
    "end": "534750"
  },
  {
    "text": "objects of that custom resource type and then separately we can select which one",
    "start": "534750",
    "end": "540090"
  },
  {
    "text": "should be enabled in the cluster I think that's the command that's going to be",
    "start": "540090",
    "end": "545970"
  },
  {
    "text": "next or maybe that was already run but anyway the idea is that there is a",
    "start": "545970",
    "end": "551100"
  },
  {
    "text": "separate object called a selector that lets you choose which of the installed policies security profiles rather to",
    "start": "551100",
    "end": "558810"
  },
  {
    "text": "enable so that allows you to sort of install the policies without running them and then activate them separately",
    "start": "558810",
    "end": "565080"
  },
  {
    "text": "and then here we create a namespace and",
    "start": "565080",
    "end": "571160"
  },
  {
    "text": "you know normally a namespace would be empty but with this security profile it",
    "start": "571160",
    "end": "577200"
  },
  {
    "text": "automatically creates a network policy in the namespace and so when we do get",
    "start": "577200",
    "end": "582390"
  },
  {
    "text": "name space over here you can see that in in this demo one namespace it has a",
    "start": "582390",
    "end": "587880"
  },
  {
    "text": "security profile and actually also role bindings were automatically added to the namespace when it got created so and",
    "start": "587880",
    "end": "595410"
  },
  {
    "text": "then I think the last piece of the demo is just showing that there's also a pod",
    "start": "595410",
    "end": "601800"
  },
  {
    "text": "secure pod security policy which is a cluster level this is still doing the",
    "start": "601800",
    "end": "607490"
  },
  {
    "text": "the the namespace level configuration but then there's also the pod security policy was installed as an example of a",
    "start": "607490",
    "end": "615780"
  },
  {
    "text": "cluster level policy when when the cluster was brought up so the demo goes",
    "start": "615780",
    "end": "621150"
  },
  {
    "text": "on a little longer but that's kind of just enough to give you the gist of it and that is the end of the discussion",
    "start": "621150",
    "end": "628710"
  },
  {
    "text": "about the end of the discussion about",
    "start": "628710",
    "end": "633440"
  },
  {
    "text": "the security profiles and if you have questions I'd be happy to answer them after the talk okay well yeah sure go",
    "start": "635300",
    "end": "642590"
  },
  {
    "start": "642000",
    "end": "723000"
  },
  {
    "text": "ahead yeah so there's a this is not",
    "start": "642590",
    "end": "658220"
  },
  {
    "text": "necessarily a hundred percent what would be the final version this was just sort",
    "start": "658220",
    "end": "663860"
  },
  {
    "text": "of a prototype but there's a mission controller that is responsible for",
    "start": "663860",
    "end": "669820"
  },
  {
    "text": "populating the namespace with the policy objects when it gets created yeah yeah",
    "start": "669820",
    "end": "677560"
  },
  {
    "text": "yeah so that that is a question we've kind of debated there's pros and cons of",
    "start": "683710",
    "end": "689870"
  },
  {
    "text": "that so we were trying to avoid having some kind of templating system built in",
    "start": "689870",
    "end": "695000"
  },
  {
    "text": "here and when you start getting into something like quota the issue is that that's gonna be very specific to a",
    "start": "695000",
    "end": "702020"
  },
  {
    "text": "particular installation you know everybody everybody's organization is gonna have different quotas and so if we want to avoid having",
    "start": "702020",
    "end": "709910"
  },
  {
    "text": "some way of doing like templates and and parameter substitution we kind of have to only stick to policies that could be",
    "start": "709910",
    "end": "717200"
  },
  {
    "text": "you know very generic and applicable to all say all use cases of a particular",
    "start": "717200",
    "end": "722240"
  },
  {
    "text": "type so it's possible that we could extend this to handle something like resource quota that would be you know",
    "start": "722240",
    "end": "729860"
  },
  {
    "start": "723000",
    "end": "810000"
  },
  {
    "text": "specific to a particular organization but for now we were trying to avoid that",
    "start": "729860",
    "end": "735290"
  },
  {
    "text": "because that gets into kind of a big a big rat's nest of customization and how to do that you can of course add your",
    "start": "735290",
    "end": "741530"
  },
  {
    "text": "own resource quotas later after this is started up",
    "start": "741530",
    "end": "745660"
  },
  {
    "text": "no so there is I didn't show that enough of the I didn't show an example of how",
    "start": "754529",
    "end": "759610"
  },
  {
    "text": "you define the pod security policy because I was supposed to just be five minute talk but there is a way to",
    "start": "759610",
    "end": "765430"
  },
  {
    "text": "specify exceptions and we haven't really",
    "start": "765430",
    "end": "771509"
  },
  {
    "text": "decided like right now you can list which namespaces by name and then also",
    "start": "771509",
    "end": "778690"
  },
  {
    "text": "exceptions by name we've also talked about just selecting the namespaces by label selector but yeah definitely",
    "start": "778690",
    "end": "786970"
  },
  {
    "text": "for example the cube system namespace you probably may want different policies",
    "start": "786970",
    "end": "792490"
  },
  {
    "text": "on than other namespaces for example and so yeah so that's an important feature okay I don't want to take up too much",
    "start": "792490",
    "end": "799449"
  },
  {
    "text": "time for this we have other folks who have presentations and so the next one",
    "start": "799449",
    "end": "805300"
  },
  {
    "text": "is let's see right ray yes ray is gonna",
    "start": "805300",
    "end": "811959"
  },
  {
    "start": "810000",
    "end": "1088000"
  },
  {
    "text": "talk about config as code API design and you so you might wonder why I'm",
    "start": "811959",
    "end": "824800"
  },
  {
    "text": "presenting this at a multi-tenancy working group talk and the reason is is",
    "start": "824800",
    "end": "829839"
  },
  {
    "text": "as as we push forward on multi-tenancy what we're gonna find is that clusters",
    "start": "829839",
    "end": "834850"
  },
  {
    "text": "are used by more and more people and they're become more multi tenant by nature and so the variance that you get",
    "start": "834850",
    "end": "840850"
  },
  {
    "text": "between different namespaces and different workloads is going to increase and so what that results in is different",
    "start": "840850",
    "end": "849130"
  },
  {
    "text": "policies and different configurations in each namespace but also because they're also becoming used in a bigger way",
    "start": "849130",
    "end": "855029"
  },
  {
    "text": "they're going to be done in an annealing type way where config as code is generally the way that people do this so",
    "start": "855029",
    "end": "860889"
  },
  {
    "text": "you're gonna have a repo the repo is going to represent the configuration the cluster state and you're gonna want to go ahead and push out policies via this",
    "start": "860889",
    "end": "868870"
  },
  {
    "text": "this this config so how we do API design and what we kind of do with especially with the admission control really",
    "start": "868870",
    "end": "874810"
  },
  {
    "text": "matters so I'll just give a quick overview of kind of the configures code",
    "start": "874810",
    "end": "880920"
  },
  {
    "text": "workflow right so API objects are represented as file",
    "start": "880920",
    "end": "885970"
  },
  {
    "text": "the workflow generally is you edit a file you get it reviewed you push it to your CI DC staging repo tests run on it",
    "start": "885970",
    "end": "895029"
  },
  {
    "text": "you wait for them to pass that gets pushed to your source of truth repo and then the CI CD system invokes a config",
    "start": "895029",
    "end": "902020"
  },
  {
    "text": "management tool and then the config management tool calls an API to reify",
    "start": "902020",
    "end": "908020"
  },
  {
    "text": "the changes to the platform right and sometimes CI CD systems may repeat steps to allowing slow rollout and things like",
    "start": "908020",
    "end": "914170"
  },
  {
    "text": "that so that's generally the workflow so things can go wrong in this workflow and where they generally go wrong and then",
    "start": "914170",
    "end": "920230"
  },
  {
    "text": "to the worst cases at the last stage of the pipeline so you made a change you got it reviewed you pushed it up",
    "start": "920230",
    "end": "926080"
  },
  {
    "text": "there and it went all the way through and in that last step which I bolded in the previous one it fails and so you end up with an error the error is generally",
    "start": "926080",
    "end": "932649"
  },
  {
    "text": "you know some sort of kubernetes error wrapped in let's say a terraform error wrapped in you know jenkins and so",
    "start": "932649",
    "end": "938800"
  },
  {
    "text": "you're kind of looking at that and wondering what to do and then you find out oh you know what some admission control are fired I didn't know that I",
    "start": "938800",
    "end": "944770"
  },
  {
    "text": "was going to be restricted on this and so therefore I have to go back and change my thing and then you got to repeat the whole process again get",
    "start": "944770",
    "end": "950680"
  },
  {
    "text": "another review and go through and hope right so the other problem that happens is is that that thing has changed that",
    "start": "950680",
    "end": "956980"
  },
  {
    "text": "the change that you made is in the actual source of truth repo and if",
    "start": "956980",
    "end": "962200"
  },
  {
    "text": "you're not diligent it will stay there forever and so now you have differing between your source of truth repo and",
    "start": "962200",
    "end": "967300"
  },
  {
    "text": "what's in in production okay so causes",
    "start": "967300",
    "end": "972880"
  },
  {
    "text": "of this is that your config management tools validation do not match the API",
    "start": "972880",
    "end": "979959"
  },
  {
    "text": "validation and so this is where the you know and then pipelines that aim to test",
    "start": "979959",
    "end": "986110"
  },
  {
    "text": "and validate separate separate these are from the actual deployment and reduce the ability to react quickly so what we",
    "start": "986110",
    "end": "991899"
  },
  {
    "text": "want to do is get that validation to happen as early in the process as possible and so if we can do that then",
    "start": "991899",
    "end": "998470"
  },
  {
    "text": "we don't have to go through these steps and we can guarantee that we can have a better guarantee that once it makes it through the CI CD pipeline it will apply",
    "start": "998470",
    "end": "1005959"
  },
  {
    "text": "so what is our general approach that we recommend when doing and thinking about ap iodine's and especially around",
    "start": "1005959",
    "end": "1012870"
  },
  {
    "text": "admission control and how we want to control and constrain our our api's so",
    "start": "1012870",
    "end": "1018420"
  },
  {
    "text": "so we want to make the API validation code portable right so not only is it",
    "start": "1018420",
    "end": "1024298"
  },
  {
    "text": "run as an emission controller on the API server but it also can run as a pre-commit hook in your git system or",
    "start": "1024299",
    "end": "1030688"
  },
  {
    "text": "whatever your source repo system is and ideally it's the same code so when they rev they Rev together write validation",
    "start": "1030689",
    "end": "1039298"
  },
  {
    "text": "code needs to give very explicit errors about what went wrong and where to go to get documentation to understand what the",
    "start": "1039299",
    "end": "1045780"
  },
  {
    "text": "constraints are so you're not guessing we want to reduce the guest because the the make a change and apply cycle is so",
    "start": "1045780",
    "end": "1053429"
  },
  {
    "text": "long on these configures code pipelines you want to reduce that as as much as possible and then you know again where",
    "start": "1053429",
    "end": "1061169"
  },
  {
    "text": "we're at is CIC D pipeline is there to ensure the commit so what you the reason why you have a CIC D pipeline in this",
    "start": "1061169",
    "end": "1066270"
  },
  {
    "text": "case is because you can do you know get pre submit dash n and ignore pre-commit hooks so you need something there that",
    "start": "1066270",
    "end": "1071940"
  },
  {
    "text": "can actually run those and guarantee that they happen that's what your CI C D pipeline is doing its effectively verifying that you have done the",
    "start": "1071940",
    "end": "1078480"
  },
  {
    "text": "appropriate setup so that the error fails in the in the in the pipeline",
    "start": "1078480",
    "end": "1083640"
  },
  {
    "text": "rather than at commit time so that's basically all I got just a super quick",
    "start": "1083640",
    "end": "1089610"
  },
  {
    "start": "1088000",
    "end": "1120000"
  },
  {
    "text": "overview on what they think about ah go ahead this is like apply moving to",
    "start": "1089610",
    "end": "1104490"
  },
  {
    "text": "server-side yeah so the the question was is the API Machinery's consider is is",
    "start": "1104490",
    "end": "1110880"
  },
  {
    "text": "working to move cube apply into the server side rather than it currently being a client side and how does this",
    "start": "1110880",
    "end": "1117120"
  },
  {
    "text": "play with that so unfortunately well I mean we should",
    "start": "1117120",
    "end": "1122280"
  },
  {
    "start": "1120000",
    "end": "1183000"
  },
  {
    "text": "we should find out so at the end of the day what you want to be able to do is give someone the permission to be able to validate something without the",
    "start": "1122280",
    "end": "1129030"
  },
  {
    "text": "ability to actually run the command so the recommendation I would make is to is to have a lower privileged command that",
    "start": "1129030",
    "end": "1135179"
  },
  {
    "text": "says hey I can do like an apply - dry run right it'll run that dry run it'll run it against all the the validations",
    "start": "1135179",
    "end": "1142679"
  },
  {
    "text": "and return it and then I can put that in like in my pre-commit hook right so that would be the recommendation to do there and they could do that server-side but",
    "start": "1142679",
    "end": "1148740"
  },
  {
    "text": "it would introduce a new set of roles which are basically these lower privilege role that let you do dry runs so good",
    "start": "1148740",
    "end": "1153869"
  },
  {
    "text": "question all right thanks ray and so",
    "start": "1153869",
    "end": "1168149"
  },
  {
    "text": "next I guess Lutz is gonna talk about the tenant operator Christian is gonna talk about tenant operator also fine",
    "start": "1168149",
    "end": "1174659"
  },
  {
    "text": "thank you okay so hi I'm Christian from the University of Applied Sciences in",
    "start": "1174659",
    "end": "1181080"
  },
  {
    "text": "Hamburg and for the past one and a half years Lutz and me are running a single",
    "start": "1181080",
    "end": "1186869"
  },
  {
    "text": "cluster for about a thousand students that all use the same cluster as tenants",
    "start": "1186869",
    "end": "1192239"
  },
  {
    "text": "and from that we brought the idea to create a tenant operator because what we",
    "start": "1192239",
    "end": "1198080"
  },
  {
    "start": "1198000",
    "end": "1372000"
  },
  {
    "text": "effectively faced here was the problem that how do we get all those tenants",
    "start": "1198080",
    "end": "1205470"
  },
  {
    "text": "configured into the cluster in the way that is meaningful like we want to create a namespace for them we want to give them all the security profiles",
    "start": "1205470",
    "end": "1212039"
  },
  {
    "text": "which basically is a very good idea I think to eat up our lives we want to provide peace peace for them we want to",
    "start": "1212039",
    "end": "1218460"
  },
  {
    "text": "enable certain projects to have access to certain privileged stuff like GPUs",
    "start": "1218460",
    "end": "1224849"
  },
  {
    "text": "etc so the motivation here really was to come up with a specialized",
    "start": "1224849",
    "end": "1230340"
  },
  {
    "text": "implementation that would allow us to do so in a very common way so what we have",
    "start": "1230340",
    "end": "1236999"
  },
  {
    "text": "at the moment it's a bit down there at the example is we have an integration with git lab as our source of truth so",
    "start": "1236999",
    "end": "1242789"
  },
  {
    "text": "how that works is you create a project and get a lab and then we have a piece of code basically just a service that then creates a namespace and the",
    "start": "1242789",
    "end": "1249149"
  },
  {
    "text": "according rules in the cluster which is a bit of a fast-paced solution that we",
    "start": "1249149",
    "end": "1254789"
  },
  {
    "text": "just need it because we needed something to allow for all those students to have a secure way to access the cluster to",
    "start": "1254789",
    "end": "1260039"
  },
  {
    "text": "lock into the cluster and then have all the rights in place so the idea here is",
    "start": "1260039",
    "end": "1265440"
  },
  {
    "text": "that we want to shout implementation for that common functionality that we can use to monitor the resource used by the",
    "start": "1265440",
    "end": "1271590"
  },
  {
    "text": "tenant because we need the quotas here and of course and force the limits for CPU memory net bandwidth and probably",
    "start": "1271590",
    "end": "1279389"
  },
  {
    "text": "also the number of declared objects because we have some students that really fire up a lot of parts and a lot",
    "start": "1279389",
    "end": "1284429"
  },
  {
    "text": "of containers like of them per ten minutes or so it's crazy",
    "start": "1284429",
    "end": "1290000"
  },
  {
    "text": "so just to give you some numbers here that the currently the cluster has 2000 namespaces and about 12,000 role",
    "start": "1290000",
    "end": "1296670"
  },
  {
    "text": "bindings so that's the numbers we run and 5,000 parts or 6,000 parts exactly",
    "start": "1296670",
    "end": "1304470"
  },
  {
    "text": "so what we faced here was that we have now a tight integration between gitlab as our source of truth and the cluster",
    "start": "1304470",
    "end": "1311660"
  },
  {
    "text": "so get a lab in our case is the organization specific implementation of where stuff comes from whereas the",
    "start": "1311660",
    "end": "1319020"
  },
  {
    "text": "common functionality here is that we provide access to namespaces and to allow people to do things so we wanted",
    "start": "1319020",
    "end": "1325230"
  },
  {
    "text": "to petition these concerns and that's where we thought a data Tanen operator",
    "start": "1325230",
    "end": "1330810"
  },
  {
    "text": "would actually be quite nice and at the multi-tenancy working group we had the discussion about what should be the",
    "start": "1330810",
    "end": "1338040"
  },
  {
    "text": "leave if you think about your organization structure as a tree what should be the leaf that reaches into the cluster and how far should we take the",
    "start": "1338040",
    "end": "1345480"
  },
  {
    "text": "tree and let it drip into the cluster and our approach or our suggestion is to",
    "start": "1345480",
    "end": "1351120"
  },
  {
    "text": "just have a CR D that represents the tenant as being the leaf of this tree that is actually in the cluster and the",
    "start": "1351120",
    "end": "1356850"
  },
  {
    "text": "rest remains into your organizational structure so - the idea was to finally",
    "start": "1356850",
    "end": "1363300"
  },
  {
    "text": "be able to make an opinionated behavior that is explicit and configurable from your organizational structure into the",
    "start": "1363300",
    "end": "1370290"
  },
  {
    "text": "cluster so the intended mode of operation is quite simple you have some kind of external system that is your",
    "start": "1370290",
    "end": "1377190"
  },
  {
    "start": "1372000",
    "end": "1406000"
  },
  {
    "text": "source of truth that might be your IDM system or your gitlab github or whatever you use and then we aim to implement",
    "start": "1377190",
    "end": "1386040"
  },
  {
    "text": "basically starting next week a tenant operator and a tenant resource quota admission controller to enforce those",
    "start": "1386040",
    "end": "1392100"
  },
  {
    "text": "resource limits and with the addition of today I think the security profiles would also be a nice fit here so that",
    "start": "1392100",
    "end": "1397950"
  },
  {
    "text": "you could also say I want to have these tenant objects a specific profile applied to in their namespaces for",
    "start": "1397950",
    "end": "1404520"
  },
  {
    "text": "instance so we came up with the definition of a tenant in our case which",
    "start": "1404520",
    "end": "1410670"
  },
  {
    "start": "1406000",
    "end": "1476000"
  },
  {
    "text": "says that a tenant consists of a set of namespaces in which any account with sufficient permissions may create Cuba",
    "start": "1410670",
    "end": "1416910"
  },
  {
    "text": "Nettie's objects the number of these objects and Teresa sumption are totaled overall namespaces of a tenant because it's also a problem",
    "start": "1416910",
    "end": "1423629"
  },
  {
    "text": "we have we can limit the amount of resources a quota per namespace but what",
    "start": "1423629",
    "end": "1429090"
  },
  {
    "text": "we really want to do is we want to say that student or that working group has that amount of course and memory etc",
    "start": "1429090",
    "end": "1434330"
  },
  {
    "text": "that they may use and that should be totaled over all of their namespaces because we don't want to enforce them to",
    "start": "1434330",
    "end": "1441029"
  },
  {
    "text": "use only a single namespace and that's not possible currently as as far as I'm aware so that would essentially be the",
    "start": "1441029",
    "end": "1448979"
  },
  {
    "text": "other thing that the tenant resource quota admission thing should actually do that it totals all the namespaces and",
    "start": "1448979",
    "end": "1455609"
  },
  {
    "text": "adds that to the quota and then your tenant says ok you cannot create any more parts because you use them all in",
    "start": "1455609",
    "end": "1460769"
  },
  {
    "text": "your namespaces so the idea in that in the tenant CRD would then be that for",
    "start": "1460769",
    "end": "1467399"
  },
  {
    "text": "each of these metrics a limit might be set for a namespace or for the total after of the tenant that depends a bit",
    "start": "1467399",
    "end": "1473159"
  },
  {
    "text": "on how specific you want to go so for now what we did was we came up with the",
    "start": "1473159",
    "end": "1479489"
  },
  {
    "start": "1476000",
    "end": "1605000"
  },
  {
    "text": "tenancy Radi proposal that is also available here in the google docs and we also link that to the mailing list and",
    "start": "1479489",
    "end": "1486799"
  },
  {
    "text": "that a tenant should contain of course a unique name that is also unique across the whole system externally so the name",
    "start": "1486799",
    "end": "1493259"
  },
  {
    "text": "needs to be only one time there and a list of namespaces that that should be",
    "start": "1493259",
    "end": "1499289"
  },
  {
    "text": "valid for and then of course at least all the things that cause memory API storage volumes maybe that could also",
    "start": "1499289",
    "end": "1504960"
  },
  {
    "text": "include the type of storage that the tenant may use but also of course the amount of storage it may use reek",
    "start": "1504960",
    "end": "1511019"
  },
  {
    "text": "respect I'm unit because we had some students that code it against the kubernetes api and just hammered the api server and brought it down or i",
    "start": "1511019",
    "end": "1517109"
  },
  {
    "text": "essentially at CD so we also might want to restrict here on appurtenant base",
    "start": "1517109",
    "end": "1524249"
  },
  {
    "text": "which is also I mean you can't restrict the API server but not on a pro tenant pace because I think the control plan is",
    "start": "1524249",
    "end": "1530190"
  },
  {
    "text": "not really a multi-tenancy aware at the moment yeah and optionally it may",
    "start": "1530190",
    "end": "1537059"
  },
  {
    "text": "contain a map of user name and roles to be able to map back and forth between those in the future what we would also",
    "start": "1537059",
    "end": "1543450"
  },
  {
    "text": "like to have is a time to live for objects so we can say okay you can burst",
    "start": "1543450",
    "end": "1548489"
  },
  {
    "text": "for the weekend for instance to do your experiment or whatever and then the time to live is over and we redirect",
    "start": "1548489",
    "end": "1555239"
  },
  {
    "text": "that possibility from your attendant object again so we have a little",
    "start": "1555239",
    "end": "1560759"
  },
  {
    "text": "proposal in here that is also editable I think or at least comment below and we would really",
    "start": "1560759",
    "end": "1566849"
  },
  {
    "text": "like to have your thoughts on that and see what else we can add to that and if you find it useful or not and also",
    "start": "1566849",
    "end": "1574199"
  },
  {
    "text": "around the discussion of is that tenancy are these thing really what we need or",
    "start": "1574199",
    "end": "1579239"
  },
  {
    "text": "do we need further levels of abstraction in the cluster itself or not we had some discussions with Ray on that on on the",
    "start": "1579239",
    "end": "1587059"
  },
  {
    "text": "zoom talk so also so yeah I think that's it yeah so far it's this one",
    "start": "1587059",
    "end": "1599639"
  },
  {
    "text": "sorry available no not yet because we have still to develop it which first wanted to see what do you think about",
    "start": "1599639",
    "end": "1605909"
  },
  {
    "start": "1605000",
    "end": "1717000"
  },
  {
    "text": "that before we start but essentially we aim to start on Monday to to provide some code at the NIC level we don't have",
    "start": "1605909",
    "end": "1628499"
  },
  {
    "text": "those problems I'm yeah no not at the moment they can share the disks and",
    "start": "1628499",
    "end": "1635099"
  },
  {
    "text": "tenten eggs and a memory until yeah",
    "start": "1635099",
    "end": "1638869"
  },
  {
    "text": "yeah I was just wondering because this is this might be something that you have",
    "start": "1671760",
    "end": "1678130"
  },
  {
    "text": "already considered this is a very nice abstraction that is simple and it lets you implement very quickly fairness in",
    "start": "1678130",
    "end": "1684070"
  },
  {
    "text": "between tenants which is very relevant in the case of a university but the default of a simple abstraction that",
    "start": "1684070",
    "end": "1690040"
  },
  {
    "text": "people may want to map their more complex ideas especially teams into that",
    "start": "1690040",
    "end": "1695290"
  },
  {
    "text": "and they might want to show um teams into the tenant concept and suddenly",
    "start": "1695290",
    "end": "1700630"
  },
  {
    "text": "teams don't necessarily have the same sizes him requirements and they are not",
    "start": "1700630",
    "end": "1705910"
  },
  {
    "text": "equal to each other and suddenly fairness becomes much more complicated how does that evolve in that kind of",
    "start": "1705910",
    "end": "1712960"
  },
  {
    "text": "address are ya thinks that is an",
    "start": "1712960",
    "end": "1718750"
  },
  {
    "text": "approach that we think the idea of having it's actually not in here we see",
    "start": "1718750",
    "end": "1725260"
  },
  {
    "text": "this as a problem as well because we of course have different sized teams that's",
    "start": "1725260",
    "end": "1730330"
  },
  {
    "text": "basically research projects that have their grant money turned into into computing power and they have different",
    "start": "1730330",
    "end": "1736929"
  },
  {
    "text": "amounts of computing power here of course and so we think that we need a",
    "start": "1736929",
    "end": "1741970"
  },
  {
    "text": "different tool for that we adapt that currently Tamia's which is the name that",
    "start": "1741970",
    "end": "1747669"
  },
  {
    "text": "we have for it we have some outlines on that we didn't get develop it it would be the system way or define who gets how",
    "start": "1747669",
    "end": "1753130"
  },
  {
    "text": "much resources on which and which guarantees to those resources are",
    "start": "1753130",
    "end": "1759070"
  },
  {
    "text": "delivered and you can also share resources or lease resources for a period of time so we see these two",
    "start": "1759070",
    "end": "1764140"
  },
  {
    "text": "systems and separate it this is basically to enforce the stuff and to connect to the kubernetes thing here and",
    "start": "1764140",
    "end": "1770320"
  },
  {
    "text": "then the other thing would be to how do you I fill these resource Kota limits to to adjust that for different team sizes",
    "start": "1770320",
    "end": "1777669"
  },
  {
    "text": "requirements etc that's the idea thanks",
    "start": "1777669",
    "end": "1786220"
  },
  {
    "text": "Christian yeah I just wanted to make sure we could squeeze in Kevin blasts speaker before we run out of time it's",
    "start": "1786220",
    "end": "1795610"
  },
  {
    "text": "not that this is what yeah I can do you wanna do this hi I'm Kevin",
    "start": "1795610",
    "end": "1810540"
  },
  {
    "text": "from Huawei cloud so uh physically I don't get time to make elegant slides so",
    "start": "1810540",
    "end": "1817500"
  },
  {
    "start": "1812000",
    "end": "2254000"
  },
  {
    "text": "I just the document we recently roll out our clock containing instant service and",
    "start": "1817500",
    "end": "1824760"
  },
  {
    "text": "it's you under preview but we'd like to share ours and some of our experience",
    "start": "1824760",
    "end": "1831120"
  },
  {
    "text": "and some issue we are facing two so the first is how we use that current",
    "start": "1831120",
    "end": "1838320"
  },
  {
    "text": "currently the clouding container instance a little bit different to",
    "start": "1838320",
    "end": "1843450"
  },
  {
    "text": "others is that we also expose kubernetes api so basically here we just roughly",
    "start": "1843450",
    "end": "1849960"
  },
  {
    "text": "block all this route scope api because that's kind of issue under multi-tenancy",
    "start": "1849960",
    "end": "1857130"
  },
  {
    "text": "so uh it's too limited preview and only available in china so sadly you cannot",
    "start": "1857130",
    "end": "1865110"
  },
  {
    "text": "try easily so first off voice about the Teaneck concept so currently we don't",
    "start": "1865110",
    "end": "1873680"
  },
  {
    "text": "explicitly define a tenant with just maybe two namespace so each user our",
    "start": "1873920",
    "end": "1880830"
  },
  {
    "text": "tenant have one namespace and for name we just generate by the platform",
    "start": "1880830",
    "end": "1888180"
  },
  {
    "text": "actually the CCI controller and actually the name I think it's not very big issue",
    "start": "1888180",
    "end": "1895800"
  },
  {
    "text": "imagine you creating a character on multiplayer online game you would always",
    "start": "1895800",
    "end": "1902160"
  },
  {
    "text": "get some notification that now this name is taken by someone else right so API",
    "start": "1902160",
    "end": "1908220"
  },
  {
    "text": "access currently all like cubelet it's",
    "start": "1908220",
    "end": "1913590"
  },
  {
    "text": "it will directly talk to the true banana ceiba so a bar for and the user we just",
    "start": "1913590",
    "end": "1921270"
  },
  {
    "text": "let them only able to talk to the a packet way so we can view the pertinent",
    "start": "1921270",
    "end": "1929330"
  },
  {
    "text": "API call rate limiting also our Becca are enforced that their",
    "start": "1929330",
    "end": "1935100"
  },
  {
    "text": "level that makes easier to start because currently we don't have a pertinent rate",
    "start": "1935100",
    "end": "1943020"
  },
  {
    "text": "limiting or put her name space very limiting in kubernetes api maybe a silver okay for the note that's right",
    "start": "1943020",
    "end": "1951440"
  },
  {
    "text": "okay okay so for the note currently",
    "start": "1951440",
    "end": "1958650"
  },
  {
    "text": "because it's a shared the mounting tenon clusters though we also are manage the",
    "start": "1958650",
    "end": "1964500"
  },
  {
    "text": "notes and user don't have any access to the machine and we use a circular",
    "start": "1964500",
    "end": "1971010"
  },
  {
    "text": "container as a runtime so we are facing some detailed issue because for example",
    "start": "1971010",
    "end": "1979190"
  },
  {
    "text": "some of the matrix currently not they cannot be easily collected for the",
    "start": "1979190",
    "end": "1986220"
  },
  {
    "text": "network we do have a network API as NC Rd and we currently it's a one network",
    "start": "1986220",
    "end": "1994590"
  },
  {
    "text": "for namespace and the underlying container network work we have our own",
    "start": "1994590",
    "end": "2000820"
  },
  {
    "text": "implementation it's an how to isolation which is very similar to a neutron but",
    "start": "2000820",
    "end": "2009049"
  },
  {
    "text": "for the network creation currently we don't block party creation but it will",
    "start": "2009049",
    "end": "2015250"
  },
  {
    "text": "get ready finally for storage actually here's just a some issue as we know that",
    "start": "2015250",
    "end": "2025760"
  },
  {
    "text": "empty dir by default we can indicate the limit but but the behavior is that if if",
    "start": "2025760",
    "end": "2032540"
  },
  {
    "text": "the part is using too much space and it exceeds the limit kubernetes will evict",
    "start": "2032540",
    "end": "2042200"
  },
  {
    "text": "a victor the pod we think that's not good experience so we introduced to",
    "start": "2042200",
    "end": "2049100"
  },
  {
    "text": "something out a native to empty dir so and on the line we use a VM to manage to",
    "start": "2049100",
    "end": "2057200"
  },
  {
    "text": "the disk so it will prevent the part using more than",
    "start": "2057200",
    "end": "2063149"
  },
  {
    "text": "it claimed so but the part will not be victim and another one open issue is",
    "start": "2063150",
    "end": "2070320"
  },
  {
    "text": "that how to are how to to keep the pod always on because for example the why we",
    "start": "2070320",
    "end": "2079139"
  },
  {
    "text": "introduce something out a native to MT dir is also that because we have no control what a kind of workload will",
    "start": "2079140",
    "end": "2088560"
  },
  {
    "text": "will the end user wrong in the container we don't want to evict the container or",
    "start": "2088560",
    "end": "2096480"
  },
  {
    "text": "reboot container so but there are do some issues like what do we do if if the",
    "start": "2096480",
    "end": "2103320"
  },
  {
    "text": "couplet needs to be upgraded or sometimes we need to to do some OS",
    "start": "2103320",
    "end": "2110910"
  },
  {
    "text": "upgrade the node may have to be shut down but so we we have not yet solved",
    "start": "2110910",
    "end": "2120420"
  },
  {
    "text": "that yet but it's we think that's a very important issue another one is the root",
    "start": "2120420",
    "end": "2128190"
  },
  {
    "text": "scope API access for example CRD currently we know that like on the cuban",
    "start": "2128190",
    "end": "2135600"
  },
  {
    "text": "s engine because end-user has the full access to the whole cluster as well as",
    "start": "2135600",
    "end": "2141360"
  },
  {
    "text": "the kubernetes api so they can easily create a CR D and install whatever",
    "start": "2141360",
    "end": "2146670"
  },
  {
    "text": "operator they want but on on a multi-tenant to analyse cluster it's because CR DS",
    "start": "2146670",
    "end": "2154530"
  },
  {
    "text": "root scope so currently our solution is just we store some of actually we just",
    "start": "2154530",
    "end": "2162360"
  },
  {
    "text": "register some of the CR d2 to available",
    "start": "2162360",
    "end": "2167910"
  },
  {
    "text": "for end user but for the operator they depends on and the user if they want to",
    "start": "2167910",
    "end": "2174030"
  },
  {
    "text": "use they can run operated operator on in their namespace and use the CR and an",
    "start": "2174030",
    "end": "2181620"
  },
  {
    "text": "otherwise the PV PV API because end user currently we for computer resources",
    "start": "2181620",
    "end": "2188880"
  },
  {
    "text": "actually we just charge by can pie container so that's fine it's kind of resale from reselling",
    "start": "2188880",
    "end": "2198470"
  },
  {
    "text": "the the computing resources but the storage and user could directly could",
    "start": "2198470",
    "end": "2205420"
  },
  {
    "text": "for example create volume on how a clown but it's it's kind of weird that they",
    "start": "2205420",
    "end": "2212600"
  },
  {
    "text": "have they cannot manage persistent the elements no they can they can create PVC but",
    "start": "2212600",
    "end": "2220610"
  },
  {
    "text": "that's not enough so that's another urban issue of the root scope API thanks",
    "start": "2220610",
    "end": "2230330"
  },
  {
    "text": "let's give Kevin a round of applause and if you have questions for him please come up and talk afterwards or any of",
    "start": "2230330",
    "end": "2236960"
  },
  {
    "text": "the folks who talked thanks a lot we hope you'll join us at the working group bi-weekly meetings they're at 11 a.m. on",
    "start": "2236960",
    "end": "2245630"
  },
  {
    "text": "Wednesdays I think Pacific time but you can look that up on the github site all",
    "start": "2245630",
    "end": "2251660"
  },
  {
    "text": "right thanks everyone",
    "start": "2251660",
    "end": "2254170"
  }
]