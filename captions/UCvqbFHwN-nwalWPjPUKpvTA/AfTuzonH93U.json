[
  {
    "text": "a bunch beyond the room so I'm here to talk about unit testing your kubernetes configurations using open policy agent",
    "start": "0",
    "end": "6390"
  },
  {
    "text": "hopefully that's clear from this slide if you're not here for that talk like too late",
    "start": "6390",
    "end": "12170"
  },
  {
    "text": "so I'm Gareth rush Grove Gareth are basically everywhere on the internet I",
    "start": "12170",
    "end": "17690"
  },
  {
    "text": "am now a director of product management at a company called sneaked doing container and just generally open source",
    "start": "17690",
    "end": "24900"
  },
  {
    "text": "software vulnerabilities stuff when the movies if you're like in their hot hole if you're like um two years later and",
    "start": "24900",
    "end": "31279"
  },
  {
    "text": "I'm gonna talk about a quit Ivanov those quick introduction to open policy agent",
    "start": "31279",
    "end": "37410"
  },
  {
    "text": "there are a load of really good on policy agent talks throughout the conference it's one of the CN CF",
    "start": "37410",
    "end": "43309"
  },
  {
    "text": "projects and this isn't an introduction I'll sort of fly through it hopefully",
    "start": "43309",
    "end": "48840"
  },
  {
    "text": "I'm a tense Biden courage you should go to a bunch of the other talks as well um I'm going",
    "start": "48840",
    "end": "54210"
  },
  {
    "text": "to talk about testing and in the context of policy and enforcement of policy and",
    "start": "54210",
    "end": "60059"
  },
  {
    "text": "I'm gonna introduce a new tool that I've been building to sort of try and bring these two worlds together",
    "start": "60059",
    "end": "65750"
  },
  {
    "text": "Rigo is the programming language that's used in open policy agent I think it's really cool I'm a DSL geek I'm gonna try",
    "start": "65750",
    "end": "73950"
  },
  {
    "text": "and convince you all it's really cool and see how that goes I'm going to talk about portability between different committees like",
    "start": "73950",
    "end": "81450"
  },
  {
    "text": "configuration solutions turns out different people using different tools that's fine can we solve some of the",
    "start": "81450",
    "end": "87540"
  },
  {
    "text": "testing parts in one go rather than per tool and also honestly infrastructure",
    "start": "87540",
    "end": "94650"
  },
  {
    "text": "isn't all and configuration isn't all committees but can we solve even more",
    "start": "94650",
    "end": "101520"
  },
  {
    "text": "general problems with one hammer and we'll see how we go bunch of live demos",
    "start": "101520",
    "end": "106590"
  },
  {
    "text": "hopefully if everything works so open policy agent um whose all right who's",
    "start": "106590",
    "end": "113850"
  },
  {
    "text": "already heard of open policy agent in the room lots of hands but not everyone that's fine and who's actually using a",
    "start": "113850",
    "end": "120869"
  },
  {
    "text": "pulse agent already for things and the scalp a scattering of hands cool yeah",
    "start": "120869",
    "end": "125880"
  },
  {
    "text": "open solids Oh toys in is really interesting um but what is it",
    "start": "125880",
    "end": "131450"
  },
  {
    "text": "so again like this is a very abridged version of this but it's a well",
    "start": "131450",
    "end": "137090"
  },
  {
    "text": "described is a policy based control the cloud native environments like we need to dig down a little bit more than that",
    "start": "137090",
    "end": "142459"
  },
  {
    "text": "it's ultimately and how I see it is it's a language for describing policy against",
    "start": "142459",
    "end": "150950"
  },
  {
    "text": "structured data and we'll show some examples and what that looks like and it's the engine which you then you give",
    "start": "150950",
    "end": "157640"
  },
  {
    "text": "it your structured data and it takes that policy and tells you whether that that document you've given it is",
    "start": "157640",
    "end": "164560"
  },
  {
    "text": "compliant against your policy or basically extracts out meaning now",
    "start": "164560",
    "end": "171230"
  },
  {
    "text": "that's again fairly low-level it's a library which has a whole bunch of use cases and that's the sort of general",
    "start": "171230",
    "end": "181850"
  },
  {
    "text": "take you'll have some data you'll have some policy open port agent will combine those things together it's a low-level sort of component to",
    "start": "181850",
    "end": "188239"
  },
  {
    "text": "other tools and what's happening in the ecosystem is people are building on top of this and so you're starting to see",
    "start": "188239",
    "end": "195310"
  },
  {
    "text": "anywhere where people are saying we need some policy like our software does one",
    "start": "195310",
    "end": "200780"
  },
  {
    "text": "thing but customers need to bring some of their business understanding to it that like different people want to do",
    "start": "200780",
    "end": "206450"
  },
  {
    "text": "different things lots of people talk about policy of port agent is",
    "start": "206450",
    "end": "211519"
  },
  {
    "text": "implementing that in software that's what that allows is a lot of those times where you've been in a large",
    "start": "211519",
    "end": "216950"
  },
  {
    "text": "organization and you've had a policy conversation and that's resulted in a word document now we can convert that",
    "start": "216950",
    "end": "223040"
  },
  {
    "text": "into code and you're seeing this cropping up in loads of places gatekeeper is a really popular project",
    "start": "223040",
    "end": "229850"
  },
  {
    "text": "now in the communities at space it's a an admission controller that users of",
    "start": "229850",
    "end": "236120"
  },
  {
    "text": "policy agent but you're also seeing it in sto there's an open policy agent",
    "start": "236120",
    "end": "242620"
  },
  {
    "text": "aspect there and the Ceph project as well again has a policy need and they've been able to plug in up and policy agent",
    "start": "242620",
    "end": "249200"
  },
  {
    "text": "it's becoming sort of something that's supported in lots of invoices I this is",
    "start": "249200",
    "end": "257570"
  },
  {
    "text": "sort of how I think Varian have written things about is my new favorite hammer so you can apply it in lots of different",
    "start": "257570",
    "end": "263450"
  },
  {
    "text": "places the place where I'm most interested in",
    "start": "263450",
    "end": "268500"
  },
  {
    "text": "applying it has been in actually testing as the title of the talk would give you",
    "start": "268500",
    "end": "273960"
  },
  {
    "text": "a clearer and and there's this concept of shifting left and this is how so",
    "start": "273960",
    "end": "281700"
  },
  {
    "text": "Wikipedia describes it as an approach to software testing and system testing in which testing is performed earlier in",
    "start": "281700",
    "end": "288120"
  },
  {
    "text": "the life cycle I what that comes down to really is broadly speaking you're going",
    "start": "288120",
    "end": "295050"
  },
  {
    "text": "to have and what you're going to have some work flow and yes most of the value is over here in your cluster but testing",
    "start": "295050",
    "end": "302580"
  },
  {
    "text": "things there can be slower and it's a lot faster today than it was maybe even",
    "start": "302580",
    "end": "307950"
  },
  {
    "text": "a few years ago where you might be like well I can shoot once every six months and hopefully you're past that point but",
    "start": "307950",
    "end": "314700"
  },
  {
    "text": "it's still always a bit slower to ship something to your cluster them to test in your continuous integration",
    "start": "314700",
    "end": "320220"
  },
  {
    "text": "environment and having a local like on your machine table environment where you",
    "start": "320220",
    "end": "326970"
  },
  {
    "text": "can test even faster is even more useful and it's not that you don't want like to",
    "start": "326970",
    "end": "333840"
  },
  {
    "text": "test over here it's just that if you can do more tests here you can be more predictable like testing later at least",
    "start": "333840",
    "end": "343290"
  },
  {
    "text": "around communities most of the focus around open policy agent has been over here it's been testing in the cluster",
    "start": "343290",
    "end": "349980"
  },
  {
    "text": "and it's been admission controllers it's been gating your cluster according to",
    "start": "349980",
    "end": "355110"
  },
  {
    "text": "some policy and that's really useful and I think there'll be other talks that will cover that sort of use case in more",
    "start": "355110",
    "end": "361170"
  },
  {
    "text": "detail I'm more interested in well what if we could use of policy agent in local",
    "start": "361170",
    "end": "366870"
  },
  {
    "text": "environments in continuous integration as well I think that's the sort of the",
    "start": "366870",
    "end": "372570"
  },
  {
    "text": "open policy agent being quite a general purpose tool means that it can be a plot",
    "start": "372570",
    "end": "377580"
  },
  {
    "text": "like we can build higher level tools for in different places and I was at the CDF",
    "start": "377580",
    "end": "384270"
  },
  {
    "text": "the continuous delivery foundation meeting is palm books are wider coop con yesterday and people kept talking about",
    "start": "384270",
    "end": "391650"
  },
  {
    "text": "everything as code just as a general movement and we've gotta whether it's been infrastructure",
    "start": "391650",
    "end": "397150"
  },
  {
    "text": "configuration whether it's been software we we're taking things that were traditionally conversations and people",
    "start": "397150",
    "end": "404230"
  },
  {
    "text": "and documents and converting them into software because then we can have a conversation that is both people but",
    "start": "404230",
    "end": "410290"
  },
  {
    "text": "also computers and that's true of communities configuration as a general",
    "start": "410290",
    "end": "416380"
  },
  {
    "text": "domain we've been moving that into and often lots and lots of yel documents but",
    "start": "416380",
    "end": "422740"
  },
  {
    "text": "other tools as well but would you write code without writing tests I'd say if",
    "start": "422740",
    "end": "430060"
  },
  {
    "text": "this was a Java conference like everyone be like well yeah I mean I even written",
    "start": "430060",
    "end": "435700"
  },
  {
    "text": "any Java without writing some JUnit tests for I can't remember and actually",
    "start": "435700",
    "end": "442210"
  },
  {
    "text": "where we are today with the languages that we're building around the communities API I would say most people",
    "start": "442210",
    "end": "448570"
  },
  {
    "text": "are not writing tests for those things we don't have the tools or the culture rod or setup yet so that's where my new",
    "start": "448570",
    "end": "458740"
  },
  {
    "text": "favourite hammer comes in contest so this is a new open-source project it's on the internet I've demoed it to a",
    "start": "458740",
    "end": "465250"
  },
  {
    "text": "bunch of people but not really shown this many people at all so yup this is all very new so the basic gist is um",
    "start": "465250",
    "end": "476580"
  },
  {
    "text": "well in the inner kubernetes context at least given a deployment of given any",
    "start": "476580",
    "end": "482229"
  },
  {
    "text": "other committees manifest but we'll we'll start with the deployment for now",
    "start": "482229",
    "end": "487979"
  },
  {
    "text": "we can write policies about that deployment and maybe it's just specific",
    "start": "488250",
    "end": "494710"
  },
  {
    "text": "to what namespace maybe it's specific to your organization maybe it's specific to a specific cluster and whatever it is we",
    "start": "494710",
    "end": "502150"
  },
  {
    "text": "can write policies using open policy agent and this is rego code and and if",
    "start": "502150",
    "end": "509860"
  },
  {
    "text": "you think about in that in the context of you might have multiple teams using multiple clusters in your organization",
    "start": "509860",
    "end": "516219"
  },
  {
    "text": "and but you want to have that conversation about what other practices we all follow and this is a way of busy",
    "start": "516219",
    "end": "523930"
  },
  {
    "text": "describing those incurred and enforcing them at many different places so rego is a",
    "start": "523930",
    "end": "530870"
  },
  {
    "text": "new language some people are gonna like that not that's fine and virtually it's reasonably straightforward once you get",
    "start": "530870",
    "end": "537230"
  },
  {
    "text": "going and so what we actually said here so we've said input input is the the",
    "start": "537230",
    "end": "544340"
  },
  {
    "text": "document I'm passing in so in this case it's that kameez deployment structure",
    "start": "544340",
    "end": "551150"
  },
  {
    "text": "and I'm saying well it will it will have a kind property and that property will",
    "start": "551150",
    "end": "557540"
  },
  {
    "text": "have a value of deployment saying Kim yetis world it's yeah it's a deployment",
    "start": "557540",
    "end": "562720"
  },
  {
    "text": "where then saying runners not route equals true not so basically we're",
    "start": "562720",
    "end": "569300"
  },
  {
    "text": "saying and if it does not have that value if it does not have that key",
    "start": "569300",
    "end": "575600"
  },
  {
    "text": "runners really not in true set to true then we're going to deny so and in this",
    "start": "575600",
    "end": "583160"
  },
  {
    "text": "case we're going to put a message saying containers must not run as reach so for those that aren't as familiar with the",
    "start": "583160",
    "end": "589010"
  },
  {
    "text": "humanities configuration structure and what that's saying is if you don't have",
    "start": "589010",
    "end": "595340"
  },
  {
    "text": "that flag set those containers have a lot more permissions on your cluster and might do bad things it's a reasonably",
    "start": "595340",
    "end": "601400"
  },
  {
    "text": "good best practice to wait where you can default having that set and here's a way",
    "start": "601400",
    "end": "608720"
  },
  {
    "text": "of us actually writing a test to make sure that's the case and obviously that's a nice simple example you can",
    "start": "608720",
    "end": "615620"
  },
  {
    "text": "write quite elaborate policies based on your real world real domain messy",
    "start": "615620",
    "end": "621190"
  },
  {
    "text": "organizational policy structures Rigo is a language that gives you that flexibility contests simply provides you",
    "start": "621190",
    "end": "630020"
  },
  {
    "text": "a nice friendly local CLI tool to run that so contests test 20 ITR config that",
    "start": "630020",
    "end": "637520"
  },
  {
    "text": "that you want to test in the background here there's a policy folder and with the code we just saw in and you can",
    "start": "637520",
    "end": "645290"
  },
  {
    "text": "point at policy from different places and there's some other bits pieces and you can point it out multiple files and",
    "start": "645290",
    "end": "650660"
  },
  {
    "text": "we can test those but let's see that in action because everyone likes a quick",
    "start": "650660",
    "end": "655820"
  },
  {
    "text": "demo let's go the right way so here I've got a",
    "start": "655820",
    "end": "662050"
  },
  {
    "text": "akima this configuration file and we'll show some examples of this with other",
    "start": "665139",
    "end": "670610"
  },
  {
    "text": "tools but we'll start with the basic sort of API wire format if you like there's nothing special there and",
    "start": "670610",
    "end": "679269"
  },
  {
    "text": "actually we so we've got a number of different policy files in here and I'll show some of them and now and I'll show",
    "start": "680829",
    "end": "686779"
  },
  {
    "text": "a few later this one is pretty similar to what I just showed there we've got a",
    "start": "686779",
    "end": "692870"
  },
  {
    "text": "couple of policies one is doing exactly what we were talking about which was looking for non route sorry root",
    "start": "692870",
    "end": "700100"
  },
  {
    "text": "containers in deployments and saying nope we're not having any of that and the other one is saying you must have",
    "start": "700100",
    "end": "706910"
  },
  {
    "text": "set these two labels and again that's a common practice in organization saying hey we we've set a bunch of labels and",
    "start": "706910",
    "end": "713930"
  },
  {
    "text": "we have tools that look for those that consume that if you don't enforce that those levels exist those tools are not",
    "start": "713930",
    "end": "719930"
  },
  {
    "text": "gonna work here's a way of describing that parsing code and having it implemented we've also got a few other",
    "start": "719930",
    "end": "732019"
  },
  {
    "text": "bits in there here again similarly and",
    "start": "732019",
    "end": "739220"
  },
  {
    "text": "this is a bit of a sort of example policy this is just simply saying and if there's any community services that nope",
    "start": "739220",
    "end": "746779"
  },
  {
    "text": "not having any of that obviously that's not a real world policy but it's a nice demonstration and the difference here is",
    "start": "746779",
    "end": "753139"
  },
  {
    "text": "instead of being deny this is one and and this is really a way of saying yeah we've got these policies but we want to",
    "start": "753139",
    "end": "759649"
  },
  {
    "text": "nudge people not stop them so I can then",
    "start": "759649",
    "end": "765500"
  },
  {
    "text": "do confess'd test again I could point it in multiple files I could do all sorts",
    "start": "765500",
    "end": "770870"
  },
  {
    "text": "of things let's just do that one and that will",
    "start": "770870",
    "end": "776300"
  },
  {
    "text": "give me though because that configuration has those problems you can",
    "start": "776300",
    "end": "788300"
  },
  {
    "text": "see doesn't have that property so so so far so simple and",
    "start": "788300",
    "end": "795480"
  },
  {
    "text": "we'll get some more interesting examples in a moment that's the general gist it's a configuration it's a tool for",
    "start": "795480",
    "end": "801660"
  },
  {
    "text": "testing your configuration using open policy agent under the hood and the Rio",
    "start": "801660",
    "end": "807780"
  },
  {
    "text": "language to describe those policies so let's dig into Rigo a little bit because",
    "start": "807780",
    "end": "813750"
  },
  {
    "text": "again there's always a barrier to entry when you're faced with a new language and one of the nice things with Rio is",
    "start": "813750",
    "end": "821790"
  },
  {
    "text": "actually the document the documentation is pretty good it's a domain-specific language specifically for describing policy",
    "start": "821790",
    "end": "828450"
  },
  {
    "text": "against structured data so it's not trying to be everything it's not a huge language here and the documentation",
    "start": "828450",
    "end": "834540"
  },
  {
    "text": "provided by the opposed agent project itself is actually really good and there's lots of examples and there's",
    "start": "834540",
    "end": "840150"
  },
  {
    "text": "also the under the hood details to understand what the syntax is so",
    "start": "840150",
    "end": "846360"
  },
  {
    "text": "definitely check out the open policy agent website and look at the language I think once you play around with it and",
    "start": "846360",
    "end": "851880"
  },
  {
    "text": "comtesse provides a nice easy way of playing around with it it's just one command you run it against your config",
    "start": "851880",
    "end": "858750"
  },
  {
    "text": "and some policy if you saw well I'm not sure I want to download anything yet",
    "start": "858750",
    "end": "864870"
  },
  {
    "text": "there's the rego playground and this is an online website you can go along to",
    "start": "864870",
    "end": "870990"
  },
  {
    "text": "the on the open policy agent website you'll find the links here you can just",
    "start": "870990",
    "end": "876990"
  },
  {
    "text": "write and you can give it some input you can give it your policy and you can see",
    "start": "876990",
    "end": "882420"
  },
  {
    "text": "what the output would be were that applied this is a good way of just of experimenting with the language and",
    "start": "882420",
    "end": "888150"
  },
  {
    "text": "getting a feel for it and seeing some examples and again just from a web browser rather than having to download",
    "start": "888150",
    "end": "893880"
  },
  {
    "text": "anything but it's more than just yeah",
    "start": "893880",
    "end": "900450"
  },
  {
    "text": "there's some syntax and some policy bits it is a language and it is a language with some tooling so open policy it has",
    "start": "900450",
    "end": "907080"
  },
  {
    "text": "built-in support for actually bit like writing unit tests of your policies in",
    "start": "907080",
    "end": "912420"
  },
  {
    "text": "Rego if you're thinking of this is getting meta you would be correct here we're writing unit tests in Rego of",
    "start": "912420",
    "end": "919380"
  },
  {
    "text": "our policies in Rego which are testing our configuration and that makes sense it just sounds",
    "start": "919380",
    "end": "925090"
  },
  {
    "text": "weird so here actually we're writing tests against some of those policies and if I pass it in a sort of fake",
    "start": "925090",
    "end": "931300"
  },
  {
    "text": "deployment here well that definitely doesn't have that flag saying don't run",
    "start": "931300",
    "end": "936460"
  },
  {
    "text": "your containers this route and it's going to successfully deny and you can see more example more sort of detailed",
    "start": "936460",
    "end": "943630"
  },
  {
    "text": "examples here and but that's just built into the OPA tool itself so then you can",
    "start": "943630",
    "end": "949660"
  },
  {
    "text": "just go into your policies run OPA tests and you'll have a sense of yeah not only",
    "start": "949660",
    "end": "955330"
  },
  {
    "text": "have we had that conversation about our policies but we've described them correctly as well because often those",
    "start": "955330",
    "end": "962320"
  },
  {
    "text": "pop that policy conversation is separate to your usage of your configuration it's a little bit different to look a",
    "start": "962320",
    "end": "968830"
  },
  {
    "text": "conversation around like unit testing code we're not most the time you're",
    "start": "968830",
    "end": "973900"
  },
  {
    "text": "doing that together this is more the unit testing your policy you're then applying that policy to your code now",
    "start": "973900",
    "end": "979720"
  },
  {
    "text": "but you have a lot more confidence that your policy is correctly described because you've written tests against it",
    "start": "979720",
    "end": "984930"
  },
  {
    "text": "and lots of people complain about dear cells because they lack the tooling and that's not true in the case of rego and",
    "start": "984930",
    "end": "994140"
  },
  {
    "text": "again lots of people hadn't come across open policy agent yet or weren't using",
    "start": "994140",
    "end": "999250"
  },
  {
    "text": "it yet and it's an early project and there's not loads of real code on github",
    "start": "999250",
    "end": "1004560"
  },
  {
    "text": "yet so like this is something that's pretty new but very interesting too alone projects there's obviously more",
    "start": "1004560",
    "end": "1010560"
  },
  {
    "text": "Riga code there isn't public in different private places people are using it elsewhere",
    "start": "1010560",
    "end": "1016170"
  },
  {
    "text": "sharing public policies is an interesting conversation um but I'd love to see this number explode because I",
    "start": "1016170",
    "end": "1023130"
  },
  {
    "text": "think there's lots of utility um open policy agent also has a concept on",
    "start": "1023130",
    "end": "1029730"
  },
  {
    "text": "bundles because it turns out that some of that policy is going to be reusable",
    "start": "1029730",
    "end": "1035880"
  },
  {
    "text": "and that might be reusable in the context of your own organization it might be reusable in the context of the",
    "start": "1035880",
    "end": "1043079"
  },
  {
    "text": "policies you're writing have similar constructs and it has a built in bundle",
    "start": "1043079",
    "end": "1049080"
  },
  {
    "text": "concept and this is fairly like simples my it's a MANET there's a manifest file and there's a tar file and you can",
    "start": "1049080",
    "end": "1055980"
  },
  {
    "text": "download them but you can I think one thing I would love to see as we grow the open",
    "start": "1055980",
    "end": "1062550"
  },
  {
    "text": "policy aging community is sharing these sort of helpers and things where",
    "start": "1062550",
    "end": "1068490"
  },
  {
    "text": "actually you don't need to become the expert in all the things you can use a bunch of helpers to get you there so",
    "start": "1068490",
    "end": "1075590"
  },
  {
    "text": "maybe it's helpers like this or sort of has feels like it's really like from a policy point of view you might want to",
    "start": "1075590",
    "end": "1081480"
  },
  {
    "text": "just check it's something there we go housing the syntax do so badly we commit",
    "start": "1081480",
    "end": "1086790"
  },
  {
    "text": "we can write abstractions to make that easier to use tests helpers as well",
    "start": "1086790",
    "end": "1092900"
  },
  {
    "text": "they're like writing tests that are more expressive you see this in all programming languages writing like just",
    "start": "1092900",
    "end": "1099330"
  },
  {
    "text": "slightly more expressive versions of things that's definitely open for sharing and I think there's a load of",
    "start": "1099330",
    "end": "1106550"
  },
  {
    "text": "potential in and this is a very trivial example of sharing domain-specific helpers and the types of policy let your",
    "start": "1106550",
    "end": "1115230"
  },
  {
    "text": "organization's policy might be different someone else's but if we're all working with communities the types of things",
    "start": "1115230",
    "end": "1121830"
  },
  {
    "text": "we're probably likely to ask are similar and so building libraries and around",
    "start": "1121830",
    "end": "1127650"
  },
  {
    "text": "committees or other project configuration I think is a really interesting place and we can wrap all these with bundles but one of the things",
    "start": "1127650",
    "end": "1137040"
  },
  {
    "text": "that bundles doesn't have yet is a sort of like a first class concept of sharing and yes you can put them on the internet",
    "start": "1137040",
    "end": "1145530"
  },
  {
    "text": "you could put them on an HTTP server and there's a mechanism within the Opia tools to download those but that's not",
    "start": "1145530",
    "end": "1151320"
  },
  {
    "text": "the same thing as whether it's like NPM",
    "start": "1151320",
    "end": "1157440"
  },
  {
    "text": "as a registry or obviously cost all our hearts they're like docker registries",
    "start": "1157440",
    "end": "1162480"
  },
  {
    "text": "where we've actually the ability to nearly frictionlessly share things has",
    "start": "1162480",
    "end": "1169740"
  },
  {
    "text": "interesting properties it becomes very easy for you to get started because you just do wide with docker docker run",
    "start": "1169740",
    "end": "1176460"
  },
  {
    "text": "thing and that's downloaded a lot of stuff from the internet someone's packaged there are pros and cons but we like that model the other thing here is",
    "start": "1176460",
    "end": "1184320"
  },
  {
    "text": "that the standards underpinning that have become very widely implemented",
    "start": "1184320",
    "end": "1189760"
  },
  {
    "text": "so basically at this point everyone has one or more or CI registries and there",
    "start": "1189760",
    "end": "1195730"
  },
  {
    "text": "are public ones that like I'm like docker hub there are the all the main",
    "start": "1195730",
    "end": "1200800"
  },
  {
    "text": "cloud providers have the one that they'll tell you everyone has one if your on-prem there are multiple options",
    "start": "1200800",
    "end": "1206560"
  },
  {
    "text": "there there's the harbour project and within the CN CF and most of the commercial vendors will give you on",
    "start": "1206560",
    "end": "1211840"
  },
  {
    "text": "everyone has one of these registries and they're broadly speaking compatible but up till now we've really only used them",
    "start": "1211840",
    "end": "1218500"
  },
  {
    "text": "for like those docker images that we run on out like curious clusters all with",
    "start": "1218500",
    "end": "1224020"
  },
  {
    "text": "docker and what about using them for everything else Steve Glasgow from Microsoft has been",
    "start": "1224020",
    "end": "1230320"
  },
  {
    "text": "pushing this within the OCI community for a little while and as part of this",
    "start": "1230320",
    "end": "1236980"
  },
  {
    "text": "sort of wall opa would benefit from sharing like first-class sharing",
    "start": "1236980",
    "end": "1242140"
  },
  {
    "text": "mechanisms and we've set up a bunch of our CI media types for our PA that's now",
    "start": "1242140",
    "end": "1248560"
  },
  {
    "text": "closed we've got that done we're actually demonstrating that with contest",
    "start": "1248560",
    "end": "1254280"
  },
  {
    "text": "so contest provides basically simple push and pull semantics and this doesn't",
    "start": "1254280",
    "end": "1260140"
  },
  {
    "text": "work on every registry yet because of some of the ambiguities around the spec that's getting worked out and on the OCI",
    "start": "1260140",
    "end": "1266710"
  },
  {
    "text": "side but it works with like the open source registry I think it will work with harbor that I haven't checked it",
    "start": "1266710",
    "end": "1273430"
  },
  {
    "text": "works with Azure container registry at the moment hopefully in the future this will work with everything else well this",
    "start": "1273430",
    "end": "1279430"
  },
  {
    "text": "is also under the hood how helm 3 is doing distribution of charts as well",
    "start": "1279430",
    "end": "1284620"
  },
  {
    "text": "rather than again having yet another registry let's build on top of what we've already got",
    "start": "1284620",
    "end": "1290020"
  },
  {
    "text": "so we can actually just have our policy folders push them to our registries",
    "start": "1290020",
    "end": "1295750"
  },
  {
    "text": "other people and we can pull our own policies it's not as interesting all the people can now just do contest pulled",
    "start": "1295750",
    "end": "1302350"
  },
  {
    "text": "and we downloaded all the right this it's early days for this but is working",
    "start": "1302350",
    "end": "1309490"
  },
  {
    "text": "today so expanding on that idea and because this is not specific to PA we're",
    "start": "1309490",
    "end": "1317050"
  },
  {
    "text": "just one of the first people to try this out to start with I think the scene up folks and the helm folks from",
    "start": "1317050",
    "end": "1322970"
  },
  {
    "text": "the other ones are experimenting in this area as of yesterday",
    "start": "1322970",
    "end": "1328480"
  },
  {
    "text": "Jocelyn's the Microsoft launched bundle bar which is a basically a front page",
    "start": "1328480",
    "end": "1334430"
  },
  {
    "text": "for a bunch of these sort of media type new package format things focused on",
    "start": "1334430",
    "end": "1340160"
  },
  {
    "text": "small OCI images for configuration purposes so this has actually mirrored the helm",
    "start": "1340160",
    "end": "1347840"
  },
  {
    "text": "charts repository and also is now starting to get some of the OPA bits and pieces in there so again like brand-new",
    "start": "1347840",
    "end": "1354320"
  },
  {
    "text": "bits and pieces to play with over time I'd love is to collectively build up",
    "start": "1354320",
    "end": "1360250"
  },
  {
    "text": "like those OPA helpers on bundle bar or other repositories where we go so one of",
    "start": "1360250",
    "end": "1368780"
  },
  {
    "text": "the things with the coop iron committee's configs is that's the API and being able to test that is useful",
    "start": "1368780",
    "end": "1376430"
  },
  {
    "text": "and if you're writing that by hand then you can use the toiling but also we're",
    "start": "1376430",
    "end": "1382670"
  },
  {
    "text": "all starting to use different tools for the configuration for different purposes and having one way of writing tests I",
    "start": "1382670",
    "end": "1389240"
  },
  {
    "text": "think is useful because it basically will allow you to more easily move between those tools so maybe you start",
    "start": "1389240",
    "end": "1395270"
  },
  {
    "text": "out writing a bunch of can make these configs by hand then you move to like",
    "start": "1395270",
    "end": "1400760"
  },
  {
    "text": "customizer you move to hell when you move to other things or you're using multiple tools at the same time you can",
    "start": "1400760",
    "end": "1406400"
  },
  {
    "text": "use a policy agent to describe the test for all of those things and ultimately",
    "start": "1406400",
    "end": "1412400"
  },
  {
    "text": "because they compile down to the same config structures so if you were using customized well you can do customized",
    "start": "1412400",
    "end": "1418730"
  },
  {
    "text": "build and pipe the output there and if you're using helm helm template does the same thing that will render the helm",
    "start": "1418730",
    "end": "1425270"
  },
  {
    "text": "template as a finished config in this case it would be nice to have a helm",
    "start": "1425270",
    "end": "1431630"
  },
  {
    "text": "again that broadly speaking does that there's some prior art around that as well in the helm community and if you",
    "start": "1431630",
    "end": "1437840"
  },
  {
    "text": "were writing your communities configurations in typescript because you wanted a full-on programming",
    "start": "1437840",
    "end": "1442970"
  },
  {
    "text": "language well the communities type mots module has all of the bits in so you can",
    "start": "1442970",
    "end": "1449060"
  },
  {
    "text": "do that and it's easy enough to output that in a structured format that we could then pipe into contest",
    "start": "1449060",
    "end": "1456660"
  },
  {
    "text": "my new favorite configuration tools I thought I'd throw in for their giggles is Q and this is again another way of",
    "start": "1456660",
    "end": "1465040"
  },
  {
    "text": "describing config with much nicer semantics than Yama log Jason it's there",
    "start": "1465040",
    "end": "1470860"
  },
  {
    "text": "for authors not just as a wire format so you can have more expressive bits pieces",
    "start": "1470860",
    "end": "1476470"
  },
  {
    "text": "and you can combine things in different ways q also supports the idea of",
    "start": "1476470",
    "end": "1482650"
  },
  {
    "text": "extending the Q command line with the Q language I said I like meta things and",
    "start": "1482650",
    "end": "1489040"
  },
  {
    "text": "so actually there's a contest plugin for Q so you can do a Q test and it will",
    "start": "1489040",
    "end": "1494920"
  },
  {
    "text": "just use contests for all those things",
    "start": "1494920",
    "end": "1498120"
  },
  {
    "text": "we can also test our live cluster",
    "start": "1500910",
    "end": "1506760"
  },
  {
    "text": "because it's possible to get back from obviously the communities API the documents and it turns out the documents",
    "start": "1506760",
    "end": "1514060"
  },
  {
    "text": "to come back a lists and you're probably not putting lists in and so you can absolutely do this if you choose like",
    "start": "1514060",
    "end": "1521290"
  },
  {
    "text": "nested pipes in the bash fascism's maybe not the best approach handily I've been",
    "start": "1521290",
    "end": "1530650"
  },
  {
    "text": "building a committees CLI coop CTL plugin it's not actually available in",
    "start": "1530650",
    "end": "1537580"
  },
  {
    "text": "the crew index yet and we're having a conversation with the crew folks about that at the moment crew if you haven't",
    "start": "1537580",
    "end": "1542920"
  },
  {
    "text": "seen it is a plug-in manager for coop CTL plugins there's a talk going on right now about it which you've missed",
    "start": "1542920",
    "end": "1549160"
  },
  {
    "text": "but you should catch up on the video on that and hopefully we'll get this sorted but yet then you can do coop CTL",
    "start": "1549160",
    "end": "1554350"
  },
  {
    "text": "contests and in the same way as cube CTL get where you'll do well type and",
    "start": "1554350",
    "end": "1560560"
  },
  {
    "text": "specific specific thing if you want we can test our real cluster this is a",
    "start": "1560560",
    "end": "1566500"
  },
  {
    "text": "great way of iterating on that policy so let's see a quick demo of that so",
    "start": "1566500",
    "end": "1579960"
  },
  {
    "text": "here I'm saying grab me all deployments and check what's going on so actually",
    "start": "1582930",
    "end": "1588809"
  },
  {
    "text": "there was one of the deployments there had does not house containers which do not have that flag on and the message is",
    "start": "1588809",
    "end": "1595140"
  },
  {
    "text": "telling me which ones so we can actually point and shoot a real cluster as well",
    "start": "1595140",
    "end": "1601140"
  },
  {
    "text": "as use it say locally as well as use it in a CI environment we can apply all of",
    "start": "1601140",
    "end": "1606510"
  },
  {
    "text": "us in different places and you can use the same of re going up and policy edging code in gatekeeper to get your",
    "start": "1606510",
    "end": "1614820"
  },
  {
    "text": "cluster for new things we've got like it's all very flexible using the same tile toolset and it's not just",
    "start": "1614820",
    "end": "1628559"
  },
  {
    "text": "kubernetes and we've we can we can absolutely right policy for our coup message configurations we can absolutely",
    "start": "1628559",
    "end": "1634080"
  },
  {
    "text": "use it for different configuration management tooling in the community space but config isn't a communities",
    "start": "1634080",
    "end": "1640830"
  },
  {
    "text": "specific problem it's generally computing so we can actually apply this in lots of places and having said that",
    "start": "1640830",
    "end": "1648809"
  },
  {
    "text": "there are a lot of communities configs around and there are a million there are more than a million communities shaped",
    "start": "1648809",
    "end": "1656429"
  },
  {
    "text": "documents on github and this isn't a hundred percent accurate but like it's",
    "start": "1656429",
    "end": "1661650"
  },
  {
    "text": "near enough and that's a large enough number and to be very scared of so well",
    "start": "1661650",
    "end": "1668550"
  },
  {
    "text": "done sort of um there's had chilling more than seventy million near enough",
    "start": "1668550",
    "end": "1674370"
  },
  {
    "text": "seventy million that's that numbers probably gone up in the last few days and and yet not all this is going to be",
    "start": "1674370",
    "end": "1680280"
  },
  {
    "text": "handwritten but quite a bit of it is and so it's generated and sometimes do you",
    "start": "1680280",
    "end": "1685320"
  },
  {
    "text": "want to apply policy against generate echo in as well and there's and this is just llamo this isn't all the other",
    "start": "1685320",
    "end": "1691260"
  },
  {
    "text": "formats that were playing with contest contest at the moment supports yeah mall",
    "start": "1691260",
    "end": "1697710"
  },
  {
    "text": "or jason as inputs and but that's not that's basically just an implantation",
    "start": "1697710",
    "end": "1703740"
  },
  {
    "text": "needle at the moment there are issues open to support other formats and whether that might be Tamil or HCl or",
    "start": "1703740",
    "end": "1710870"
  },
  {
    "text": "edn or whatever structured format speaking put into there's an awful lot of config",
    "start": "1710870",
    "end": "1716940"
  },
  {
    "text": "out there that it's probably just Yolo having some policy around it would be good I know I was gonna do so the",
    "start": "1716940",
    "end": "1730080"
  },
  {
    "text": "comtesse repo has a lot of different examples for different tooling and I won't obviously show a lot loads of",
    "start": "1730080",
    "end": "1735960"
  },
  {
    "text": "different things and one tool that's actually often used alongside and some",
    "start": "1735960",
    "end": "1741599"
  },
  {
    "text": "other infrastructure tool this is terrifying and some people use it for their communities configs or just",
    "start": "1741599",
    "end": "1748229"
  },
  {
    "text": "managing their cloud estates more often conflict doesn't yet have HCL input and",
    "start": "1748229",
    "end": "1754739"
  },
  {
    "text": "but I'll probably add that soon or someone can do so if they're interested and terraform however in the latest",
    "start": "1754739",
    "end": "1761239"
  },
  {
    "text": "beaters or 12 or 12 how they the",
    "start": "1761239",
    "end": "1766919"
  },
  {
    "text": "basically is set that the the plan file format and in such a way that we can",
    "start": "1766919",
    "end": "1772529"
  },
  {
    "text": "actually access that so I've got a make file to help me because the commands are a bit gnarly but what all we're really",
    "start": "1772529",
    "end": "1780059"
  },
  {
    "text": "doing here is running terraform plat plan grabbing the output of that we're doing terraform show as jason then we're",
    "start": "1780059",
    "end": "1786629"
  },
  {
    "text": "passing that into confessed so we can write policies like these ones this",
    "start": "1786629",
    "end": "1795210"
  },
  {
    "text": "terraform code happens to be using the google cloud api's and but i'm banning",
    "start": "1795210",
    "end": "1802200"
  },
  {
    "text": "anyone using google container and google i am and for whatever arbitrary reason",
    "start": "1802200",
    "end": "1807349"
  },
  {
    "text": "and in a real world context though actually you might be like no only",
    "start": "1807349",
    "end": "1813599"
  },
  {
    "text": "certain people or certain repos or certain places can like manage I am things if you're doing that then I have",
    "start": "1813599",
    "end": "1819690"
  },
  {
    "text": "a problem and we will either warn or we will say no you need to do that for a different route and so here is a simple",
    "start": "1819690",
    "end": "1826080"
  },
  {
    "text": "blacklist implemented in Rego again there's probably lots of cases where white listing and black listing is",
    "start": "1826080",
    "end": "1832109"
  },
  {
    "text": "useful rego makes that relatively straightforward to do so you can see this is a bit more of an accomplished",
    "start": "1832109",
    "end": "1838529"
  },
  {
    "text": "rego example but it's not complicated so if I do make tests and again all I'm",
    "start": "1838529",
    "end": "1846479"
  },
  {
    "text": "doing there is terraform show piping outputting the that and then piping that contest here actually our terraform code",
    "start": "1846479",
    "end": "1853260"
  },
  {
    "text": "is going to change some of those prohibited resources and I'm gonna say nope that's a bad thing I didn't mention",
    "start": "1853260",
    "end": "1859530"
  },
  {
    "text": "before but that the contest does",
    "start": "1859530",
    "end": "1864750"
  },
  {
    "text": "obviously output like the relevant status codes so you can fail builds and",
    "start": "1864750",
    "end": "1870150"
  },
  {
    "text": "the like so we can do terraform config testing and we can do civilus conflict",
    "start": "1870150",
    "end": "1877590"
  },
  {
    "text": "testing and again all these things where like when you start thinking about them are yeah there are certain things there",
    "start": "1877590",
    "end": "1883950"
  },
  {
    "text": "are constraints I want to put on them if it's a small team a small organization those are probably don't need to be in",
    "start": "1883950",
    "end": "1891660"
  },
  {
    "text": "code as you move into regulated environments as you move into larger organizations and and Oh bits of your",
    "start": "1891660",
    "end": "1898620"
  },
  {
    "text": "organization that isn't as familiar with the tooling putting some guardrails around things is really useful you might",
    "start": "1898620",
    "end": "1905100"
  },
  {
    "text": "have composed files and be writing policies around those any structured data I could have obviously gone on for",
    "start": "1905100",
    "end": "1910590"
  },
  {
    "text": "that section for a while any structured data you can write rego to pass against",
    "start": "1910590",
    "end": "1916950"
  },
  {
    "text": "it and have calm tests test so I'm",
    "start": "1916950",
    "end": "1922800"
  },
  {
    "text": "running up and I wanted to say thank you to a bunch of folks in the open source community and Torian is the person",
    "start": "1922800",
    "end": "1930000"
  },
  {
    "text": "behind open policy agent like and the styrofoam is in Lord of the maintain is around that project is really",
    "start": "1930000",
    "end": "1936480"
  },
  {
    "text": "interesting and can be used in lots of different places and I just have one specific use case Steve let's go",
    "start": "1936480",
    "end": "1942840"
  },
  {
    "text": "Microsoft drove most of the Aussie I work and Josh is doing a bunch of that there with bundle bar as well so thanks",
    "start": "1942840",
    "end": "1949680"
  },
  {
    "text": "open source community it makes it easier to build things when people will give you feedback and help you along the way",
    "start": "1949680",
    "end": "1956300"
  },
  {
    "text": "so summarizing the talk parts an open policy agent is really interesting super",
    "start": "1956300",
    "end": "1963120"
  },
  {
    "text": "flexible and check it out even if you're like I don't want this contest thing and but check out contest anyway it's on the",
    "start": "1963120",
    "end": "1970440"
  },
  {
    "text": "internet play around with it open issues let me know what you think I would",
    "start": "1970440",
    "end": "1977070"
  },
  {
    "text": "expect like predicting things a load more integrations with open policy Asian",
    "start": "1977070",
    "end": "1982190"
  },
  {
    "text": "in the future I think there's loads of potential for as to have a shared language for Policy I think that's",
    "start": "1982190",
    "end": "1988039"
  },
  {
    "text": "powerful in loads of places and if anyone else is super interested in",
    "start": "1988039",
    "end": "1993279"
  },
  {
    "text": "tooling around configuration ping me I'd love to have more conversations there I",
    "start": "1993279",
    "end": "1998710"
  },
  {
    "text": "think as a community we maybe got good at a bunch of runtime stuff like service",
    "start": "1998710",
    "end": "2004360"
  },
  {
    "text": "mesh is really interesting however we may be not built the developer tool chain yet to really like for everyone to",
    "start": "2004360",
    "end": "2012159"
  },
  {
    "text": "embrace cloud native computing and so hopefully you enjoyed the talk if you've",
    "start": "2012159",
    "end": "2017320"
  },
  {
    "text": "got any questions if you've got some time I'm happy to answer by I'll be around the rest of the conference if you can't find me after this I'll",
    "start": "2017320",
    "end": "2023379"
  },
  {
    "text": "probably around the sneak booth a bunch you can go there anyway and check out demos of sneek which I didn't cover here",
    "start": "2023379",
    "end": "2028929"
  },
  {
    "text": "at all no thank you all [Applause]",
    "start": "2028929",
    "end": "2041519"
  }
]