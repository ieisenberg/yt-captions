[
  {
    "text": "hello everyone thanks for stopping by our session and we hope you've been having an amazing",
    "start": "1040",
    "end": "6720"
  },
  {
    "text": "conference so far our talk today is going to be about on a",
    "start": "6720",
    "end": "12320"
  },
  {
    "text": "topic which is close to every contributor but it is a nightmare for every implementer at least",
    "start": "12320",
    "end": "18960"
  },
  {
    "text": "that is what we feel like just a couple of days ago in the contributor summit we actually met",
    "start": "18960",
    "end": "24720"
  },
  {
    "text": "someone who was trying to implement prow which we'll cover don't worry that's what we're here for and they faced a lot",
    "start": "24720",
    "end": "31359"
  },
  {
    "text": "of trouble and that sort of just reinforced our own belief that",
    "start": "31359",
    "end": "37120"
  },
  {
    "text": "prow is something every contributor everyone who has made a pulled request to kubernetes is at",
    "start": "37120",
    "end": "43920"
  },
  {
    "text": "least somewhat familiar with they have seen it comment on their pr or their issue",
    "start": "43920",
    "end": "49200"
  },
  {
    "text": "but they've liked it but when it comes to installing it for their own repos or",
    "start": "49200",
    "end": "54399"
  },
  {
    "text": "setting it up or just understanding what is happening behind the scenes of prow",
    "start": "54399",
    "end": "59600"
  },
  {
    "text": "how it is working that is not clear and that is what we aim to solve in this",
    "start": "59600",
    "end": "65040"
  },
  {
    "text": "talk we aim that once you go through our session after this you",
    "start": "65040",
    "end": "70720"
  },
  {
    "text": "feel confident enough in trying out prow on your own installing it on your repositories and",
    "start": "70720",
    "end": "77520"
  },
  {
    "text": "basically having fun with it so before we begin a bit of introductions are in order who are we",
    "start": "77520",
    "end": "85280"
  },
  {
    "text": "i am sharma i work as a developer and experience engineer at octato",
    "start": "85280",
    "end": "91200"
  },
  {
    "text": "i also actively contribute to the kubernetes project i will be leading the ci signal team in the 125 release and",
    "start": "91200",
    "end": "98560"
  },
  {
    "text": "i'm a new contributor ambassador for kubernetes sig docs where i help people contribute to the project i'll hand over",
    "start": "98560",
    "end": "104880"
  },
  {
    "text": "to nabarron now hey everyone i'm nabarun i work as a senior engineer at vmware",
    "start": "104880",
    "end": "110960"
  },
  {
    "text": "i have been contributing to kubernetes for the past three years and spent around two and a half years",
    "start": "110960",
    "end": "116719"
  },
  {
    "text": "contributing to sig release having led kubernetes 1.21 last year which is going to be deprecated this month",
    "start": "116719",
    "end": "123520"
  },
  {
    "text": "next week possibly and i'm also the current currently a release manager uh in the communities",
    "start": "123520",
    "end": "130319"
  },
  {
    "text": "release engineering uh sub project i am also an elected member of the kubernetes code of conduct committee um",
    "start": "130319",
    "end": "136720"
  },
  {
    "text": "i have been uh in the committee for the past eight or so months besides that i",
    "start": "136720",
    "end": "142879"
  },
  {
    "text": "helped maintaining some other areas in communities like github administration and contributing to",
    "start": "142879",
    "end": "149599"
  },
  {
    "text": "other areas of the project now why are we here what is prop",
    "start": "149599",
    "end": "155840"
  },
  {
    "text": "is a kubernetes based cicd system being based on top of kubernetes it",
    "start": "155840",
    "end": "161040"
  },
  {
    "text": "brings all the pros of running any application of kubernetes",
    "start": "161040",
    "end": "166480"
  },
  {
    "text": "like you get replication you get scaling you get rolling updates you get highly available nature of",
    "start": "166480",
    "end": "172879"
  },
  {
    "text": "any stateless workload that you usually run on kubernetes brow can manage a life cycle of pull",
    "start": "172879",
    "end": "180000"
  },
  {
    "text": "requests like review approvals merging them based on some criteria",
    "start": "180000",
    "end": "186159"
  },
  {
    "text": "through a component called tide which we will take a brief look at later",
    "start": "186159",
    "end": "192239"
  },
  {
    "text": "browse configuration can be managed through structures inside yaml files now there can be",
    "start": "193519",
    "end": "199599"
  },
  {
    "text": "two ways to manage them one is inside the repository where you host code and",
    "start": "199599",
    "end": "206000"
  },
  {
    "text": "can also be stored in a central repository aside from your code",
    "start": "206000",
    "end": "211599"
  },
  {
    "text": "there are pros and cons of both the approaches uh i shall be covering them uh later on in a future section",
    "start": "211599",
    "end": "218879"
  },
  {
    "text": "pro plus pro ships with a very very highly extensible uh plugin system which",
    "start": "218879",
    "end": "224480"
  },
  {
    "text": "helps you to infinitely extend prow and change its and modify its behavior to",
    "start": "224480",
    "end": "230000"
  },
  {
    "text": "however you need we also set a we also ship with pro a set of",
    "start": "230000",
    "end": "236400"
  },
  {
    "text": "inbuilt plugins which help you manage several parts of a developer's experience in that system",
    "start": "236400",
    "end": "244480"
  },
  {
    "text": "while doing continuous integration or deployment of your uh code",
    "start": "244480",
    "end": "251599"
  },
  {
    "text": "pro also includes something called chat ops we might have heard this uh",
    "start": "252080",
    "end": "257600"
  },
  {
    "text": "a lot of times and how we do it is through slash something like commands like slash",
    "start": "257600",
    "end": "263280"
  },
  {
    "text": "honk which will essentially give you an image of a duck doing some some naughty things around",
    "start": "263280",
    "end": "269600"
  },
  {
    "text": "the wild ash is now going to show you around",
    "start": "269600",
    "end": "275440"
  },
  {
    "text": "the chat ops system so chad ops is probably my favorite bits",
    "start": "275440",
    "end": "282479"
  },
  {
    "text": "about brow because i feel like when i was starting out as a contributor to kubernetes and you look at all these",
    "start": "282479",
    "end": "289040"
  },
  {
    "text": "pr's and all these maintainers super experienced folks talking in languages you don't understand brow is the only simple thing",
    "start": "289040",
    "end": "296080"
  },
  {
    "text": "there it's showing me images of cats and dogs that's what they're what i'm there for no chat ops basically allows you to have a",
    "start": "296080",
    "end": "303680"
  },
  {
    "text": "forward slash and then a command which allows you to interact with github issues and prs so yolo is not a command",
    "start": "303680",
    "end": "311680"
  },
  {
    "text": "please don't try that you can assign you can assign issues to contributors so let's say if you're a",
    "start": "311680",
    "end": "317680"
  },
  {
    "text": "new contributor getting started and you want to work on an issue you can just do forward slash assign and that would",
    "start": "317680",
    "end": "323759"
  },
  {
    "text": "actually assign the issue and let everyone know that you're working on it similarly you can label issues and pull",
    "start": "323759",
    "end": "330320"
  },
  {
    "text": "requests uh maintainers can provide approval for pull requests and once they provide",
    "start": "330320",
    "end": "336080"
  },
  {
    "text": "approval the pull requests get merged using another plugin which we'll cover later",
    "start": "336080",
    "end": "341680"
  },
  {
    "text": "and other than that you can also run tests for a particular pr and there is a lot more you can do",
    "start": "341680",
    "end": "348320"
  },
  {
    "text": "so for those of you who have not had a chance to look at how this all looks like",
    "start": "348320",
    "end": "354240"
  },
  {
    "text": "we'll actually go to a pull request which is made by our very good friend and active contributor madhav who said",
    "start": "354240",
    "end": "361520"
  },
  {
    "text": "you should meet him by the way and to give some context for this we'll not go into detail so don't worry",
    "start": "361520",
    "end": "367759"
  },
  {
    "text": "basically go 18 introduced something and uh we had a fix for that but then",
    "start": "367759",
    "end": "373520"
  },
  {
    "text": "18.1 fixed that and we wanted to remove our work around so that's what this pr was for and let's see how",
    "start": "373520",
    "end": "380639"
  },
  {
    "text": "proud has been helping with this pr so first what happened is that kubernetes has a bunch of six for those who are not",
    "start": "380639",
    "end": "386960"
  },
  {
    "text": "familiar and every part of some code belongs to a six so this belong to sig",
    "start": "386960",
    "end": "392160"
  },
  {
    "text": "testing and using forward slash sig testing mother was able to apply this label to",
    "start": "392160",
    "end": "398880"
  },
  {
    "text": "the pull request and then there's some conversation which we are definitely not going into and then uh you can apply labels like",
    "start": "398880",
    "end": "406560"
  },
  {
    "text": "this and this label is applied to the pr which is a priority important soon label",
    "start": "406560",
    "end": "412479"
  },
  {
    "text": "and let's see what else you can edit milestones for pull requests",
    "start": "412479",
    "end": "418960"
  },
  {
    "text": "and tests uh so when you make a pr tests are",
    "start": "418960",
    "end": "424160"
  },
  {
    "text": "run and sometimes some of those tests are flaky and you feel that",
    "start": "424160",
    "end": "429599"
  },
  {
    "text": "a lot of times what happens is that you need to rerun those tests and for that you can simply run the forward slash",
    "start": "429599",
    "end": "435280"
  },
  {
    "text": "test all command and once you see that ci turning green as soon as it happens",
    "start": "435280",
    "end": "440639"
  },
  {
    "text": "please get maintainers to approve an lgtm because that ci might turn purple anytime and you will not have a good",
    "start": "440639",
    "end": "446720"
  },
  {
    "text": "time so once you get the approve and lgtm labels then",
    "start": "446720",
    "end": "452000"
  },
  {
    "text": "your pr is almost there but uh you can add more uh retests and labels",
    "start": "452000",
    "end": "458080"
  },
  {
    "text": "like this like if it's urgent and if someone's working on it you can triage it and then retest",
    "start": "458080",
    "end": "464080"
  },
  {
    "text": "and then that is how you basically contribute and get your pr accepted",
    "start": "464080",
    "end": "469520"
  },
  {
    "text": "so i think this now gave you a idea of how",
    "start": "469520",
    "end": "475360"
  },
  {
    "text": "brow looks like and we'll now go back to the slides",
    "start": "475360",
    "end": "481360"
  },
  {
    "text": "which seem to be lost murphy's law",
    "start": "481360",
    "end": "485919"
  },
  {
    "text": "yay we are back",
    "start": "490639",
    "end": "493840"
  },
  {
    "text": "yeah uh so now that we have seen chat ops in action i am going to hand it over to",
    "start": "500560",
    "end": "508080"
  },
  {
    "text": "nabarun and he has a diagram which will scare you but i've heard him speak and i think he makes it easy so now please",
    "start": "508080",
    "end": "514399"
  },
  {
    "text": "take it from here so thanks thanks he scared us everyone here but i'll",
    "start": "514399",
    "end": "521599"
  },
  {
    "text": "actually try to declutter through user story of how do they interact so i showed you how motherhood",
    "start": "521599",
    "end": "529040"
  },
  {
    "text": "created a pull request which changes and we will take that journey through how",
    "start": "529040",
    "end": "534640"
  },
  {
    "text": "it actually got tested in pro so first",
    "start": "534640",
    "end": "539680"
  },
  {
    "text": "we do have a user who interacts on github right on the left i wish i had a pointer but i'll try to",
    "start": "539680",
    "end": "546240"
  },
  {
    "text": "explain as well i can and when you",
    "start": "546240",
    "end": "551279"
  },
  {
    "text": "create a pull request on github github essentially generates an event and that event goes through a github app or a bot",
    "start": "551279",
    "end": "558160"
  },
  {
    "text": "account to a component called hook which is in our brow cluster and that",
    "start": "558160",
    "end": "564480"
  },
  {
    "text": "component keeps on processing those github events and packages them into",
    "start": "564480",
    "end": "570480"
  },
  {
    "text": "internal structures which have some more metadata for example they also contain uh pro plugin config",
    "start": "570480",
    "end": "577760"
  },
  {
    "text": "pro job config and through this",
    "start": "577760",
    "end": "583519"
  },
  {
    "text": "and another plugin called trigger plugin it creates a custom resource called",
    "start": "583519",
    "end": "588640"
  },
  {
    "text": "proud job so it's a crd crow job is a customer resource definition that is",
    "start": "588640",
    "end": "594560"
  },
  {
    "text": "a central core concept in browse landscape and whenever any job",
    "start": "594560",
    "end": "600320"
  },
  {
    "text": "has to run in prague you basically create a brow job custom resource",
    "start": "600320",
    "end": "606160"
  },
  {
    "text": "notice i told you about the trigger plugin if you don't enable the trigger plugin uh this thing won't be done uh",
    "start": "606160",
    "end": "612880"
  },
  {
    "text": "fortunately by default the starter templates that we have the plugin uh the trigger plugin is enabled so any web",
    "start": "612880",
    "end": "620640"
  },
  {
    "text": "hook coming through a hook will process an event uh will trigger an event essentially",
    "start": "620640",
    "end": "627279"
  },
  {
    "text": "now we have a custom resource what do we do we have to reconcile it right we have to",
    "start": "627279",
    "end": "632800"
  },
  {
    "text": "act on that created custom resource we have a component called planck",
    "start": "632800",
    "end": "638720"
  },
  {
    "text": "right there planck processes this custom resource and",
    "start": "638720",
    "end": "644320"
  },
  {
    "text": "sees where should i run this and how should i run this depending on that it creates a pod in any of the job",
    "start": "644320",
    "end": "651839"
  },
  {
    "text": "clusters you can have multiple job clusters for isolation for example you might have some kind of trusted job some kind of",
    "start": "651839",
    "end": "657600"
  },
  {
    "text": "untrusted jobs or let's say you are working on a private repository and you don't want to mix code",
    "start": "657600",
    "end": "665760"
  },
  {
    "text": "and you want to have proper isolation so you can run on any class any job cluster you want",
    "start": "665760",
    "end": "672240"
  },
  {
    "text": "once that is done planck keeps on looking for statuses of those job pods",
    "start": "672240",
    "end": "678880"
  },
  {
    "text": "once they uh execute fine like if there's an error of if they exit successfully it",
    "start": "678880",
    "end": "685519"
  },
  {
    "text": "reports back the status to the status sub resource of the projob custom resource",
    "start": "685519",
    "end": "692640"
  },
  {
    "text": "now how how do we get that status back to github which is where our user is user won't see a custom resource for a",
    "start": "692959",
    "end": "699519"
  },
  {
    "text": "status right we have a component called cryer which essentially cries all the",
    "start": "699519",
    "end": "704720"
  },
  {
    "text": "output in the status sub-resource to github it knows how and what to infer",
    "start": "704720",
    "end": "710800"
  },
  {
    "text": "from that status sub-resource and it sends back the data to uh github",
    "start": "710800",
    "end": "717360"
  },
  {
    "text": "when motherweight created that pr at the end of the pr at the end of a gita pull request you essentially see a list of checks",
    "start": "717360",
    "end": "724079"
  },
  {
    "text": "these are the same checks that cryer updates and it also would provide like a message on if you're failing something",
    "start": "724079",
    "end": "730399"
  },
  {
    "text": "what test is failing um it will basically reversely show and then you can retest those specific tests",
    "start": "730399",
    "end": "737839"
  },
  {
    "text": "there are some other components which uh not necessarily come in the life cycle but life cycle of a uh user",
    "start": "737839",
    "end": "745519"
  },
  {
    "text": "creating a pull request and getting an output of a uh c test",
    "start": "745519",
    "end": "750880"
  },
  {
    "text": "but they are very important uh we have one component called horologame which essentially",
    "start": "750880",
    "end": "756399"
  },
  {
    "text": "looks at your configuration for any periodic job that you may have created for example you just want to check your",
    "start": "756399",
    "end": "761839"
  },
  {
    "text": "code sanity like you want to check the code coverage every day and post them somewhere it will create",
    "start": "761839",
    "end": "767839"
  },
  {
    "text": "that project cr from your configuration so that uh",
    "start": "767839",
    "end": "773200"
  },
  {
    "text": "planck can reconcile it and run that job and then report the status back syncer is basically your",
    "start": "773200",
    "end": "781040"
  },
  {
    "text": "recycle bin what it does is it looks at pods which have passed a certain retention policy",
    "start": "781040",
    "end": "787519"
  },
  {
    "text": "for example let's say there are job pods which have been lying around for uh more than 24 hours just an",
    "start": "787519",
    "end": "793040"
  },
  {
    "text": "example we might set like more uh strict or less stricter configs",
    "start": "793040",
    "end": "800320"
  },
  {
    "text": "and when it sees those jobs it basically deletes the parts as well as the project crs",
    "start": "800320",
    "end": "807200"
  },
  {
    "text": "so that the system remains same now i'm talking about like statuses",
    "start": "807200",
    "end": "813760"
  },
  {
    "text": "logs we we have a lot of artifacts that are generated in this process where do you see them",
    "start": "813760",
    "end": "819519"
  },
  {
    "text": "so we have a friend called deck uh if you ever go to prow.ks.io",
    "start": "819519",
    "end": "824720"
  },
  {
    "text": "what you see is essentially deck deck is basically a dashboard where you",
    "start": "824720",
    "end": "830079"
  },
  {
    "text": "see what jobs we have in the community around all repositories",
    "start": "830079",
    "end": "835199"
  },
  {
    "text": "what is their status what was the last pr that they run for if it was a pre-submit job which is basically a",
    "start": "835199",
    "end": "840880"
  },
  {
    "text": "pre-merge job or any periodic job status or post submits for example",
    "start": "840880",
    "end": "848480"
  },
  {
    "text": "we have a process in kubernetes community called promoting images we essentially build images into staging",
    "start": "848480",
    "end": "854639"
  },
  {
    "text": "environment and then push them into production registries which you consume",
    "start": "854639",
    "end": "859920"
  },
  {
    "text": "in ketes.gcr.iot github container registry domain",
    "start": "859920",
    "end": "865440"
  },
  {
    "text": "for example that job is like a post submit job it runs after a promotion configuration has been changed",
    "start": "865440",
    "end": "874079"
  },
  {
    "text": "this was about the core components of pro we will talk about",
    "start": "874480",
    "end": "880000"
  },
  {
    "text": "two components which are needed when you want like full life cycle of a",
    "start": "880000",
    "end": "886160"
  },
  {
    "text": "cicd system in brow first one is tied so we have talked about",
    "start": "886160",
    "end": "892399"
  },
  {
    "text": "testing of your changes and labeling of your changes or whatever",
    "start": "892399",
    "end": "897760"
  },
  {
    "text": "chat ups you want to do what about merging now if i go about uh",
    "start": "897760",
    "end": "904079"
  },
  {
    "text": "in the kubernetes repository we see probably like 100 to 500 pr's every 15 days",
    "start": "904079",
    "end": "911199"
  },
  {
    "text": "or something like that if we go about like testing all those pr's against our base",
    "start": "911199",
    "end": "918000"
  },
  {
    "text": "uh main reference and keep on reconciling the status we might",
    "start": "918000",
    "end": "924560"
  },
  {
    "text": "run into a lot of issues or a lot of resource usage issues what tide helps us doing in one way is",
    "start": "924560",
    "end": "932240"
  },
  {
    "text": "manage a pool of github prs it collects a",
    "start": "932320",
    "end": "938320"
  },
  {
    "text": "list of pr's from the same repository for example we are talking about the core commodities repository which is kubernetes slash queries it let's say",
    "start": "938320",
    "end": "945199"
  },
  {
    "text": "collect collects 10 pull requests and then merges like merges them",
    "start": "945199",
    "end": "951600"
  },
  {
    "text": "onto the base branch and tries to test it in this way you can test like a lot of",
    "start": "951600",
    "end": "958320"
  },
  {
    "text": "prs in short amount of time",
    "start": "958320",
    "end": "962079"
  },
  {
    "text": "tide also automatically re-tests prs when they meet the criteria for example",
    "start": "964720",
    "end": "970240"
  },
  {
    "text": "we saw jordan lgtm approved and cancelled the hold on madhav's pr",
    "start": "970240",
    "end": "976720"
  },
  {
    "text": "after doing that it satisfied all of the criterias but still after that we do a",
    "start": "976720",
    "end": "981759"
  },
  {
    "text": "re-test of that pr once the retest passes then only we merge it",
    "start": "981759",
    "end": "989199"
  },
  {
    "text": "and you don't require an user intervention after all of these checks have passed and another retest has gone",
    "start": "989519",
    "end": "994560"
  },
  {
    "text": "through we don't need any more user intervention automatically the pr would be immersed if it satisfies all the criteria",
    "start": "994560",
    "end": "1002320"
  },
  {
    "text": "tied also serves live data about current merge pools and a history of actions",
    "start": "1002320",
    "end": "1008639"
  },
  {
    "text": "which can be consumed by deck to populate the tight dashboard or the pr dashboard",
    "start": "1008639",
    "end": "1014639"
  },
  {
    "text": "or the history page which i mentioned earlier apart from tide the other component",
    "start": "1014639",
    "end": "1020880"
  },
  {
    "text": "which we use in the kubernetes community is great it's not entirely open source",
    "start": "1020880",
    "end": "1027839"
  },
  {
    "text": "the front end is not open source but the backend is open source it's basically an interactive dashboard",
    "start": "1027839",
    "end": "1033918"
  },
  {
    "text": "to view test results our later will show you what a",
    "start": "1033919",
    "end": "1040160"
  },
  {
    "text": "test grid entails and how we use it in our day to day workflow when he shows you",
    "start": "1040160",
    "end": "1045760"
  },
  {
    "text": "configuring a pro job and they are shown in a grid",
    "start": "1045760",
    "end": "1051840"
  },
  {
    "text": "for example we're showing the sig release test grid and where signal is mastered",
    "start": "1051840",
    "end": "1058160"
  },
  {
    "text": "blocking is a group of jobs and verify master is a job where this certain set of tests are run",
    "start": "1058160",
    "end": "1064960"
  },
  {
    "text": "and we can see for the previous runs what what was the status and this is how we can decipher",
    "start": "1064960",
    "end": "1071360"
  },
  {
    "text": "what is failing in a very verb we don't need to churn through all the logs of",
    "start": "1071360",
    "end": "1076559"
  },
  {
    "text": "previous runs and how do we find them what are the refs they ran against what was the test intraref",
    "start": "1076559",
    "end": "1082960"
  },
  {
    "text": "all those kind of things i would now hand it over to us who would explain you how do you configure pro",
    "start": "1082960",
    "end": "1091360"
  },
  {
    "text": "so when it comes to defining proud jobs there are two main approaches you can",
    "start": "1091360",
    "end": "1097200"
  },
  {
    "text": "choose from this choice it might seem that this choice is very",
    "start": "1097200",
    "end": "1102480"
  },
  {
    "text": "trivial at first and you could just go ahead with whatever you want but if you plan to scale your project to the",
    "start": "1102480",
    "end": "1108640"
  },
  {
    "text": "size of kubernetes this will come and bite you later if you do not give it thought",
    "start": "1108640",
    "end": "1114320"
  },
  {
    "text": "so the two approaches we have is one and in repo configuration and",
    "start": "1114320",
    "end": "1121440"
  },
  {
    "text": "in this configuration you basically define the jobs the brow jobs in the",
    "start": "1121440",
    "end": "1126480"
  },
  {
    "text": "same repository where your source code is living so you would have a dot proud directory",
    "start": "1126480",
    "end": "1133520"
  },
  {
    "text": "or just a dot brow.ml file at the root of the repository where you would just",
    "start": "1133520",
    "end": "1138799"
  },
  {
    "text": "list down all of your jobs it is important to note that in this approach your jobs are not defined",
    "start": "1138799",
    "end": "1145679"
  },
  {
    "text": "centrally they would be present for each repository in that particular repository",
    "start": "1145679",
    "end": "1151120"
  },
  {
    "text": "the other approach is centralizing your job configuration what this means is that you have a",
    "start": "1151120",
    "end": "1158400"
  },
  {
    "text": "separate repository and the purpose for that repository is to have all the configuration for all the",
    "start": "1158400",
    "end": "1164799"
  },
  {
    "text": "jobs you might be running across many different repositories you have in this approach jobs get defined",
    "start": "1164799",
    "end": "1171360"
  },
  {
    "text": "centrally so let us look at kubernetes test infra",
    "start": "1171360",
    "end": "1176559"
  },
  {
    "text": "where we will see this approach in action",
    "start": "1176559",
    "end": "1180880"
  },
  {
    "text": "yep no all right so for kubernetes test infra if you go",
    "start": "1183200",
    "end": "1190080"
  },
  {
    "text": "to the config directory here and you go to jobs",
    "start": "1190080",
    "end": "1195200"
  },
  {
    "text": "we are grouping jobs based on the organization and i'm going to show you one of the first jobs i wrote and",
    "start": "1195200",
    "end": "1201600"
  },
  {
    "text": "that is under the kubernetes directory inside sig architecture",
    "start": "1201600",
    "end": "1207840"
  },
  {
    "text": "and this is a periodical job a periodical job is like nabarron mentioned earlier a job which runs",
    "start": "1209679",
    "end": "1216559"
  },
  {
    "text": "periodically on the uh on a particular repository so it's pretty simple and",
    "start": "1216559",
    "end": "1222000"
  },
  {
    "text": "intuitive if you try to read it it's like any other yaml you tell that you want the job to be run every six hours",
    "start": "1222000",
    "end": "1228400"
  },
  {
    "text": "you tell a name for the job and you tell decorate to what decorate 2",
    "start": "1228400",
    "end": "1233840"
  },
  {
    "text": "does is add sidecar containers which help in source code checkout and other related stuff",
    "start": "1233840",
    "end": "1240000"
  },
  {
    "text": "and then you mention what repository you want this job to be run for in this case we wanted to run for the main kubernetes",
    "start": "1240000",
    "end": "1246640"
  },
  {
    "text": "repository so we specified the org and uh the repository and the branch two",
    "start": "1246640",
    "end": "1252720"
  },
  {
    "text": "path alias is basically when this job checks out the source code which",
    "start": "1252720",
    "end": "1257919"
  },
  {
    "text": "which we need for the job to do its action what directly do we want it for",
    "start": "1257919",
    "end": "1263200"
  },
  {
    "text": "after that the spec is pretty simple we just used a golang based image",
    "start": "1263200",
    "end": "1268640"
  },
  {
    "text": "and what we did is essentially install a tool we wanted to run called defstat and",
    "start": "1268640",
    "end": "1274880"
  },
  {
    "text": "then run the command in it and that's it that's this is how simple it is it is nothing but a container where you're",
    "start": "1274880",
    "end": "1281600"
  },
  {
    "text": "running some commands and that's how simple prom makes your life and that is why we love it",
    "start": "1281600",
    "end": "1288159"
  },
  {
    "text": "towards the end you see we have annotations and this is where the test grid navarone just talked about comes",
    "start": "1288159",
    "end": "1293840"
  },
  {
    "text": "into picture so if you notice we mentioned that the test grid dashboard we want this job to be associated with",
    "start": "1293840",
    "end": "1300159"
  },
  {
    "text": "is sick testing miscellaneous so if you go to testgrid.gates.io you'd see a list of",
    "start": "1300159",
    "end": "1307280"
  },
  {
    "text": "all the dashboards here and that dashboard was sick testing miscellaneous so if we go here",
    "start": "1307280",
    "end": "1314400"
  },
  {
    "text": "that's it that's where it is and this is the periodic job look flaky how nice",
    "start": "1315600",
    "end": "1322320"
  },
  {
    "text": "uh but we go to here and this is every each run it did for the job and you can",
    "start": "1322320",
    "end": "1328480"
  },
  {
    "text": "if you click on any one of these green cells it'll take you to spyglass where",
    "start": "1328480",
    "end": "1334000"
  },
  {
    "text": "you can see the logs for the job and it is these logs that we wanted for this particular job so if we just look here",
    "start": "1334000",
    "end": "1340880"
  },
  {
    "text": "this is the information we were interested in and this is what proud it for us it basically grabbed a binary a",
    "start": "1340880",
    "end": "1347120"
  },
  {
    "text": "go binary and ran the results for uh the binary on the kubernetes repository and",
    "start": "1347120",
    "end": "1352480"
  },
  {
    "text": "give this a central place for the logs so another place where you",
    "start": "1352480",
    "end": "1359039"
  },
  {
    "text": "could have like seen the logs for this and this is something uh specific to kubernetes and",
    "start": "1359039",
    "end": "1365200"
  },
  {
    "text": "not so if you have if you have your own instance you would have this kind of url for your own thing but",
    "start": "1365200",
    "end": "1371840"
  },
  {
    "text": "this is where you can search through all the jobs running across all kubernetes repositories so",
    "start": "1371840",
    "end": "1377919"
  },
  {
    "text": "that job was called yep so you can just search for jobs and similarly you can see the",
    "start": "1377919",
    "end": "1384000"
  },
  {
    "text": "last few runs of the job this way",
    "start": "1384000",
    "end": "1389480"
  },
  {
    "text": "where is it so just bring it again",
    "start": "1394320",
    "end": "1399720"
  },
  {
    "text": "yep this this dashboard that's that",
    "start": "1403039",
    "end": "1407039"
  },
  {
    "text": "so uh we're going to now get to the fun bits of actually deploying pro and then we'll see how that gets configured",
    "start": "1408799",
    "end": "1417840"
  },
  {
    "text": "so yep coming to the interesting parts the paths where you most of you were here probably for is",
    "start": "1418720",
    "end": "1425279"
  },
  {
    "text": "how do you actually deploy your own instance of prow to use it with your own repositories",
    "start": "1425279",
    "end": "1431039"
  },
  {
    "text": "well step one is creating a github app to configure all of",
    "start": "1431039",
    "end": "1437760"
  },
  {
    "text": "this give me a second",
    "start": "1437760",
    "end": "1441520"
  },
  {
    "text": "yeah is creating a github app the only rule you need to follow for",
    "start": "1442840",
    "end": "1448080"
  },
  {
    "text": "this particular step is be creative with the name because we all want a friendly robot in our repositories",
    "start": "1448080",
    "end": "1454960"
  },
  {
    "text": "next uh when you're creating the github app this is something you need to be careful of is that it'll ask you for a",
    "start": "1454960",
    "end": "1461039"
  },
  {
    "text": "webhook url and when you're doing this step it doesn't actually matter what url",
    "start": "1461039",
    "end": "1466159"
  },
  {
    "text": "you add right now because we are going to change that later but remember to",
    "start": "1466159",
    "end": "1471360"
  },
  {
    "text": "keep a note of this that you need to change this later and we'll provide a secret here but we'll get to that later",
    "start": "1471360",
    "end": "1477520"
  },
  {
    "text": "the third thing you need to uh take care of is adding a bunch of permissions because",
    "start": "1477520",
    "end": "1483279"
  },
  {
    "text": "these permissions are needed for pro otherwise it will not be able to interact with your",
    "start": "1483279",
    "end": "1489600"
  },
  {
    "text": "github repositories and this is just a snapshot there are more uh there are more permissions you need to",
    "start": "1489600",
    "end": "1495360"
  },
  {
    "text": "add but we didn't want to add a url right now in the slides we'll do that later we promise so",
    "start": "1495360",
    "end": "1501760"
  },
  {
    "text": "the final thing you need to take care of is in there's a section called subscribe to events and you need to subscribe to all",
    "start": "1501760",
    "end": "1507919"
  },
  {
    "text": "events because brown needs to know what's happening to the repository in order to react to it this is where the",
    "start": "1507919",
    "end": "1513760"
  },
  {
    "text": "hook system uh navarone talked about comes into picture because if it is not getting notified of the events it really",
    "start": "1513760",
    "end": "1520400"
  },
  {
    "text": "can't do anything for you once you are done creating the app make",
    "start": "1520400",
    "end": "1525679"
  },
  {
    "text": "sure to note the app id and to generate a private key keep them very secure",
    "start": "1525679",
    "end": "1531760"
  },
  {
    "text": "because we are going to be using them later now i don't take it from him",
    "start": "1531760",
    "end": "1537360"
  },
  {
    "text": "awesome so uh after you set up your github app",
    "start": "1537360",
    "end": "1543919"
  },
  {
    "text": "upstream kubernetes maintains a binary called tackle uh recently we made some changes to tackle",
    "start": "1543919",
    "end": "1550320"
  },
  {
    "text": "which uh made it a little bit trivial to use or easier to use we fixed",
    "start": "1550320",
    "end": "1555360"
  },
  {
    "text": "some bugs a few months back so since we have already set up our github app",
    "start": "1555360",
    "end": "1560799"
  },
  {
    "text": "and we are not relying on a bot account what you can do is just run tackle skip github and how do you get tackle is if",
    "start": "1560799",
    "end": "1567679"
  },
  {
    "text": "you go to the test infra repo that are short if you go to cmd",
    "start": "1567679",
    "end": "1574080"
  },
  {
    "text": "the command directory you'll see the tackle subdirectory and you just need to go install uh check out the source code",
    "start": "1574080",
    "end": "1579919"
  },
  {
    "text": "and go install that should do it we don't ship a tackle binary right now but maybe in the future when it becomes",
    "start": "1579919",
    "end": "1586799"
  },
  {
    "text": "more stable and supports more providers uh we may start like shipping it",
    "start": "1586799",
    "end": "1591840"
  },
  {
    "text": "it runs perfectly for gke right now and our demo is also based on gke",
    "start": "1591840",
    "end": "1596880"
  },
  {
    "text": "but in case you have any other provider",
    "start": "1596880",
    "end": "1602080"
  },
  {
    "text": "we are working towards it in future you will have other providers in built into tackle who which",
    "start": "1602080",
    "end": "1608559"
  },
  {
    "text": "which tackle can use to create kubernetes clusters appropriately just to be sure you still can run your prior",
    "start": "1608559",
    "end": "1614799"
  },
  {
    "text": "instance with other providers just that the simple route of tackle will not work and currently only works for gke",
    "start": "1614799",
    "end": "1621440"
  },
  {
    "text": "yes the documentation also tells you about like manual deploy steps",
    "start": "1621440",
    "end": "1626559"
  },
  {
    "text": "but in the interest of sanity we are demonstrating using tackle so you let",
    "start": "1626559",
    "end": "1631840"
  },
  {
    "text": "tackle run you tell tackle if you already have a gcp project and a gcp gke cluster",
    "start": "1631840",
    "end": "1639600"
  },
  {
    "text": "running if you have one you can just mention the name and it will install everything for you in that cluster",
    "start": "1639600",
    "end": "1645279"
  },
  {
    "text": "otherwise it can create a cluster for you as well and you run it and let it run",
    "start": "1645279",
    "end": "1651360"
  },
  {
    "text": "and pause when it asks you to provide a starter yaml now why we are going to pause here is",
    "start": "1651360",
    "end": "1656799"
  },
  {
    "text": "because we have to backfill certain information into that yaml",
    "start": "1656799",
    "end": "1661840"
  },
  {
    "text": "what are those things and even before that we have to apply the pro",
    "start": "1661840",
    "end": "1667200"
  },
  {
    "text": "crds oh my god it's too small on the display but",
    "start": "1667200",
    "end": "1673440"
  },
  {
    "text": "we will make it bigger when we uh put the pdfs on sched",
    "start": "1673440",
    "end": "1678720"
  },
  {
    "text": "but what it does is it when i talked about the proud of crs uh it just creates the browser of crds for later",
    "start": "1678720",
    "end": "1685039"
  },
  {
    "text": "when you want to create browsers here so that kubernetes api server knows hey what is this resource and how it is",
    "start": "1685039",
    "end": "1690720"
  },
  {
    "text": "structured one thing we need is we talked about a lot of uh",
    "start": "1690720",
    "end": "1696799"
  },
  {
    "text": "things artifacts like logs uh did the test run successfully or what was the exit code all of",
    "start": "1696799",
    "end": "1703200"
  },
  {
    "text": "that is currently stored in a gcs bucket now you might see this commands are very scary but i'll decipher it for you it",
    "start": "1703200",
    "end": "1709520"
  },
  {
    "text": "just creates a service account it creates a bucket it binds it to the server it binds the service account to the",
    "start": "1709520",
    "end": "1715600"
  },
  {
    "text": "bucket gives it appropriate permissions and then you can use the credentials in your starter.ml make sure to keep",
    "start": "1715600",
    "end": "1723039"
  },
  {
    "text": "your gcs bucket name globally unique because otherwise you're going to spend 15 minutes like us figuring out what",
    "start": "1723039",
    "end": "1728240"
  },
  {
    "text": "went wrong yes also you need to create a secret to give it to the github app so that",
    "start": "1728240",
    "end": "1736559"
  },
  {
    "text": "when when the web calls there is a unique token which it uh communicates",
    "start": "1736559",
    "end": "1741600"
  },
  {
    "text": "through now when you do all those changes uh you",
    "start": "1741600",
    "end": "1746720"
  },
  {
    "text": "by this step you would have almost everything that you want to replace in startup tamil and start like creating",
    "start": "1746720",
    "end": "1753919"
  },
  {
    "text": "or creating the resources which pro uses in that kubernetes cluster so you get the",
    "start": "1753919",
    "end": "1759679"
  },
  {
    "text": "starter template from the url and then you basically",
    "start": "1759679",
    "end": "1765200"
  },
  {
    "text": "grip through all of the templated strings and replace them with the appropriate values that we created",
    "start": "1765200",
    "end": "1770240"
  },
  {
    "text": "before now once you did that you can just",
    "start": "1770240",
    "end": "1775679"
  },
  {
    "text": "tell tackle because tackle would be waiting for you to give a location of a starter ml you can just give it the",
    "start": "1775679",
    "end": "1782159"
  },
  {
    "text": "location it will download or read it from local disk and then apply it once it is done it will tell you hey you",
    "start": "1782159",
    "end": "1789200"
  },
  {
    "text": "are done now you have to get the ingress controller's",
    "start": "1789200",
    "end": "1795039"
  },
  {
    "text": "external ip from the cluster that was just created or your existing cluster and point the domain that we put earlier",
    "start": "1795039",
    "end": "1801360"
  },
  {
    "text": "when configuring the github hook for the app there this is how you get access to deck also",
    "start": "1801360",
    "end": "1807279"
  },
  {
    "text": "which we were talking about earlier yes uh the one of the final steps is to just",
    "start": "1807279",
    "end": "1812640"
  },
  {
    "text": "update the token that we created uh before the secret in your github app and that is very important otherwise all the",
    "start": "1812640",
    "end": "1818799"
  },
  {
    "text": "web deliveries would fail and the url you use this is what you fill in the github",
    "start": "1818799",
    "end": "1824399"
  },
  {
    "text": "webhub web app section i talked about earlier and the final step is to install the app",
    "start": "1824399",
    "end": "1829760"
  },
  {
    "text": "on a repo whatever you want the org that you put in there the or can be user account itself if you just want to try",
    "start": "1829760",
    "end": "1836159"
  },
  {
    "text": "out for now but if you are doing it in production also the starter template doesn't",
    "start": "1836159",
    "end": "1842240"
  },
  {
    "text": "is not suggested for production because the starter template creates proud clusters and job class brow clusters and",
    "start": "1842240",
    "end": "1847840"
  },
  {
    "text": "job clusters on the same kubernetes cluster ideally they should be separate that is what we do in",
    "start": "1847840",
    "end": "1853440"
  },
  {
    "text": "upstream kubernetes and once you have all of this set up you just enjoy",
    "start": "1853440",
    "end": "1860960"
  },
  {
    "text": "now ash can talk about benefits of using pro so",
    "start": "1862799",
    "end": "1868480"
  },
  {
    "text": "coming to the benefits uh i feel like we all know that collaboration is like",
    "start": "1868480",
    "end": "1874320"
  },
  {
    "text": "the backbone of open source you cannot have open source if you are not able to collaborate effectively and",
    "start": "1874320",
    "end": "1881039"
  },
  {
    "text": "i like brow because i feel that it really makes the process very efficient",
    "start": "1881039",
    "end": "1886159"
  },
  {
    "text": "so if you have like a lot of repositories right and you set a pro for all of them what this does is ensure",
    "start": "1886159",
    "end": "1893120"
  },
  {
    "text": "that developers get a similar experience across all repositories for your organization so they don't have to learn",
    "start": "1893120",
    "end": "1899919"
  },
  {
    "text": "the processes again and learn new commands or figure out or ask what's going to happen and this is why i",
    "start": "1899919",
    "end": "1906960"
  },
  {
    "text": "love pro because developer experience is something which is very close to my heart and i feel that brow provides an excellent",
    "start": "1906960",
    "end": "1913600"
  },
  {
    "text": "developer experience the chat ops based interaction ensures that you do not have to be a github wizard like if even if",
    "start": "1913600",
    "end": "1921120"
  },
  {
    "text": "like someone has not gone through the nuts and bolts of github understanding commands like",
    "start": "1921120",
    "end": "1926240"
  },
  {
    "text": "forward slash assign are pretty intuitive because you get the idea that",
    "start": "1926240",
    "end": "1931600"
  },
  {
    "text": "you want to assign someone and lastly i feel that prow is new contributor",
    "start": "1931600",
    "end": "1936799"
  },
  {
    "text": "friendly because if i'm a new contributor i sometimes feel lost what are the next steps i've",
    "start": "1936799",
    "end": "1942000"
  },
  {
    "text": "created a pr now where do i go from here and with brow you can set up automated messages and friendly stuff which",
    "start": "1942000",
    "end": "1947919"
  },
  {
    "text": "provide next steps that hey you have your pr here these are the persons you need to ping for review now we agree",
    "start": "1947919",
    "end": "1954480"
  },
  {
    "text": "that all like it's not it does not always get them correct but as a new contributor i would at least have a",
    "start": "1954480",
    "end": "1960880"
  },
  {
    "text": "first point of contact even if that is not the correct point of contact and i would not feel lost",
    "start": "1960880",
    "end": "1966480"
  },
  {
    "text": "so i feel like these are the benefits of brow which is why we love it in upstream kubernetes",
    "start": "1966480",
    "end": "1973279"
  },
  {
    "text": "now what's the point of this talk [Music] we want you to use pro we want you to",
    "start": "1973279",
    "end": "1980080"
  },
  {
    "text": "use prav for production and we want you to come back to us as in sick test kubernetes testing and tell us",
    "start": "1980080",
    "end": "1987760"
  },
  {
    "text": "what more we can do and not just that we want your help",
    "start": "1987760",
    "end": "1993039"
  },
  {
    "text": "when you use prow you report us back issues and even you can contribute to that yourself uh",
    "start": "1993039",
    "end": "2000000"
  },
  {
    "text": "be those good samaritans of the open source community and just have fun uh we hang",
    "start": "2000000",
    "end": "2006000"
  },
  {
    "text": "around in the sick testing channel on kubernetes slack uh how you can join the",
    "start": "2006000",
    "end": "2011440"
  },
  {
    "text": "community slack is you can go to uh slack.kts.io and get an invite for yourself",
    "start": "2011440",
    "end": "2018000"
  },
  {
    "text": "when we publish the pdf i'm sorry when we publish the pdf the pdf would",
    "start": "2018000",
    "end": "2024080"
  },
  {
    "text": "have the links so you can just click on it and join the kubernetes slack and go to the channel",
    "start": "2024080",
    "end": "2030159"
  },
  {
    "text": "you can also join our mailing list uh and that mailing list would give you access",
    "start": "2030159",
    "end": "2036559"
  },
  {
    "text": "to our meeting docs it will put a meeting invite to your calendar so that you can",
    "start": "2036559",
    "end": "2043519"
  },
  {
    "text": "come to the meeting and ask us questions and see how you can contribute more",
    "start": "2043519",
    "end": "2048560"
  },
  {
    "text": "with that we both thank you all for joining us uh we would like to take questions if you",
    "start": "2048560",
    "end": "2055280"
  },
  {
    "text": "have like one or two minutes please any questions just catch us after the dog thank you so much for attending",
    "start": "2055280",
    "end": "2063119"
  },
  {
    "text": "okay so uh we have one minute to take one question um and then we can talk in the hallway obviously",
    "start": "2066879",
    "end": "2075200"
  },
  {
    "text": "do you support multiple architectures",
    "start": "2075200",
    "end": "2079960"
  },
  {
    "text": "like having one of these",
    "start": "2081119",
    "end": "2085158"
  },
  {
    "text": "um i'm not sure about that because i think at this point but we do run a lot",
    "start": "2090720",
    "end": "2096800"
  },
  {
    "text": "of different kind of jobs since we built kubernetes for a lot of different kind of platforms",
    "start": "2096800",
    "end": "2103839"
  },
  {
    "text": "the question is can we run different platforms uh test tests for different platforms on the",
    "start": "2104079",
    "end": "2110400"
  },
  {
    "text": "same build cluster or the same job cluster",
    "start": "2110400",
    "end": "2115560"
  },
  {
    "text": "yeah yeah you mean like uh arm or amd on the",
    "start": "2118079",
    "end": "2123599"
  },
  {
    "text": "same cluster right uh right now we do ship uh but i have to verify and we can talk like yes",
    "start": "2123599",
    "end": "2132559"
  },
  {
    "text": "okay",
    "start": "2134560",
    "end": "2136800"
  },
  {
    "text": "okay do we have time to take more do you have time to take more questions no no no",
    "start": "2140240",
    "end": "2145920"
  },
  {
    "text": "okay uh you can join us in the hallway or ping us on slack or email or anywhere",
    "start": "2145920",
    "end": "2151680"
  },
  {
    "text": "thank you so much thank you so much for attending",
    "start": "2151680",
    "end": "2156160"
  }
]