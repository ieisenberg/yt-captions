[
  {
    "text": "so our talk today is uh entitled mission accomplished kubernetes is not a mono",
    "start": "0",
    "end": "5160"
  },
  {
    "text": "repo Network begins uh thank you for attending on one of the last slots today uh I am Justin Santa Barbara I have been",
    "start": "5160",
    "end": "12599"
  },
  {
    "text": "contributing to kubernetes for I guess longer than I care to admit now I've done a lot of work on the initially on",
    "start": "12599",
    "end": "18119"
  },
  {
    "text": "the AWS cloud provider I kicked off the chaops project a number of years ago and",
    "start": "18119",
    "end": "23220"
  },
  {
    "text": "I've been at Google Now for a number of years trying to help people with their adoption of kubernetes",
    "start": "23220",
    "end": "30439"
  },
  {
    "text": "hi everyone my name is cyprian uh I'm a an Syria ability engineer at Microsoft",
    "start": "30679",
    "end": "37739"
  },
  {
    "text": "these days I am also helping companies migrate to kubernetes in and in my spare",
    "start": "37739",
    "end": "45239"
  },
  {
    "text": "time I'm a maintainer and contributor to various Cloud native projects",
    "start": "45239",
    "end": "52280"
  },
  {
    "text": "okay so this is what we're going to be covering today broadly why did we split up the monorepa",
    "start": "55860",
    "end": "62940"
  },
  {
    "text": "why did we go from one big git repository source of Truth into the many",
    "start": "62940",
    "end": "68159"
  },
  {
    "text": "repositories that we have today um when we did that did we lose things",
    "start": "68159",
    "end": "73320"
  },
  {
    "text": "or was it all just just upside and spoiler uh the things that we did lose",
    "start": "73320",
    "end": "79020"
  },
  {
    "text": "how can we get those things back that's what we're gonna be covering today",
    "start": "79020",
    "end": "85280"
  },
  {
    "text": "okay uh in the beginning there was one big kubernetes repo so everything in one",
    "start": "85500",
    "end": "91619"
  },
  {
    "text": "place uh all components were versioned together like there was no cloud",
    "start": "91619",
    "end": "97020"
  },
  {
    "text": "provider or other things uh and there was end-to-end testing",
    "start": "97020",
    "end": "103860"
  },
  {
    "text": "um multiple clouds on every PR",
    "start": "103860",
    "end": "109820"
  },
  {
    "text": "and that was actually pretty good um it was the right architecture for the",
    "start": "112500",
    "end": "117540"
  },
  {
    "text": "time it was actually very easy to make big cross-cutting changes across multiple layers you could have one PR",
    "start": "117540",
    "end": "123899"
  },
  {
    "text": "that could change you know the API it could change the cube API server the controller manager Cube cuddle could",
    "start": "123899",
    "end": "130259"
  },
  {
    "text": "change the scripts that installed kubernetes you could do that all in one PR and everything would just sort of go together it was a very productive way to",
    "start": "130259",
    "end": "136980"
  },
  {
    "text": "move quickly and we had good test coverage as well you know we had test coverage that would",
    "start": "136980",
    "end": "142080"
  },
  {
    "text": "test on AWS and gcp we had some other tests on other Cloud providers that",
    "start": "142080",
    "end": "147480"
  },
  {
    "text": "um you know were a little bit more complicated but those the AWS and gcp tests were kicked off on every single PR so every time you made any change to",
    "start": "147480",
    "end": "154140"
  },
  {
    "text": "kubernetes even if you just changed the docs you know we would make sure that you hadn't broken AWS and you hadn't",
    "start": "154140",
    "end": "159180"
  },
  {
    "text": "broken gcp and we were able to test all those all that cloud provider functionality all the functionality in",
    "start": "159180",
    "end": "165060"
  },
  {
    "text": "kubernetes on every single PR so it was a good productive place where we were",
    "start": "165060",
    "end": "171680"
  },
  {
    "text": "so is it was pretty good but why did we stop doing this uh there were",
    "start": "172620",
    "end": "180420"
  },
  {
    "text": "a lot of technical issues uh many related to GitHub there were tons of notifications so people could not keep",
    "start": "180420",
    "end": "186959"
  },
  {
    "text": "up with them uh there was a huge volume of comments and it even broke GitHub",
    "start": "186959",
    "end": "194459"
  },
  {
    "text": "loading PRS um and",
    "start": "194459",
    "end": "199620"
  },
  {
    "text": "the worst and most frustrating you couldn't merge PRS like it could take two three days to merge your PR because",
    "start": "199620",
    "end": "206580"
  },
  {
    "text": "there was a huge queue right before each release so",
    "start": "206580",
    "end": "211800"
  },
  {
    "text": "and this was when bulk merge was introduced but still was not",
    "start": "211800",
    "end": "217920"
  },
  {
    "text": "perfect we also had a bunch of what we call people issues so it was hard to know in",
    "start": "217920",
    "end": "226019"
  },
  {
    "text": "this growing community of of people who needed to see each PR and who didn't",
    "start": "226019",
    "end": "231420"
  },
  {
    "text": "need to see HPR and make sure that like the right people had had approved the PRS we introduced owners files to try to",
    "start": "231420",
    "end": "240299"
  },
  {
    "text": "Route things more intelligently to the right people but it ends up that basically we would bottleneck on a few",
    "start": "240299",
    "end": "245640"
  },
  {
    "text": "key people um uh it was very hard as these people",
    "start": "245640",
    "end": "251340"
  },
  {
    "text": "obviously have more and more people to get everyone onto the at the time quarterly release schedule and get",
    "start": "251340",
    "end": "257340"
  },
  {
    "text": "everyone synchronized and that just became harder and harder as you know we added more Cloud providers and generally",
    "start": "257340",
    "end": "262979"
  },
  {
    "text": "more functionality so a lot of what I would call people issues as well",
    "start": "262979",
    "end": "269300"
  },
  {
    "text": "okay um why did we stop doing this it enabled us",
    "start": "271500",
    "end": "277560"
  },
  {
    "text": "to do a lot of architectural improvements uh This Way",
    "start": "277560",
    "end": "282840"
  },
  {
    "text": "um Things Are not depending that much of",
    "start": "282840",
    "end": "289620"
  },
  {
    "text": "a single person can be split up of the kubernetes repo",
    "start": "289620",
    "end": "295020"
  },
  {
    "text": "um and also projects that use various pieces of",
    "start": "295020",
    "end": "301259"
  },
  {
    "text": "kubernetes could just Source those components instead of just having a big",
    "start": "301259",
    "end": "306360"
  },
  {
    "text": "dependency of kubernetes and conflict with other dependencies",
    "start": "306360",
    "end": "312120"
  },
  {
    "text": "that don't upgrade at the same time",
    "start": "312120",
    "end": "316880"
  },
  {
    "text": "and fundamentally you know those uh technical people and Architectural reasons were solid but really there was",
    "start": "318540",
    "end": "326580"
  },
  {
    "text": "an underlying reason that was sort of a philosophical philosophical reason about how we wanted to be as a project we did",
    "start": "326580",
    "end": "333419"
  },
  {
    "text": "not want to be a monorepo where we were like the centralized Gatekeepers for you",
    "start": "333419",
    "end": "339120"
  },
  {
    "text": "know this is cloud native and this is not Cloud native and you know you're in you're out and you're hot you're not we",
    "start": "339120",
    "end": "345240"
  },
  {
    "text": "didn't want to be that we wanted to have this industry we wanted to have a large number of tools uh where anyone could",
    "start": "345240",
    "end": "351600"
  },
  {
    "text": "could come and collaborate and put their ideas in and you know that that is what effectively became the cloud native",
    "start": "351600",
    "end": "357419"
  },
  {
    "text": "ecosystem that we have today um and we had a bunch of technical strategies that we use to enable this",
    "start": "357419",
    "end": "363419"
  },
  {
    "text": "idea so basically the core idea was to make sure that you you did not have to contribute to KK so you could get",
    "start": "363419",
    "end": "370199"
  },
  {
    "text": "anything done without having to contribute into KK KK being kubernetes kubernetes uh that you know is largely",
    "start": "370199",
    "end": "378419"
  },
  {
    "text": "the case today but at the time in the early days it was not and so things like crds enable you to add types without",
    "start": "378419",
    "end": "384600"
  },
  {
    "text": "having to extend the API server that was not always the case things like web hooks enable to change the behavior of",
    "start": "384600",
    "end": "390539"
  },
  {
    "text": "any of any type we added apis where there were not extension points before for things like",
    "start": "390539",
    "end": "396479"
  },
  {
    "text": "CRI cni CSI so so that is you know some of the tactics that we used to get to",
    "start": "396479",
    "end": "402960"
  },
  {
    "text": "this point uh with the release of kubernetes 127 uh",
    "start": "402960",
    "end": "410039"
  },
  {
    "text": "even Cloud providers are out of the main tree this is a huge success",
    "start": "410039",
    "end": "416340"
  },
  {
    "text": "um this was the last to go so now we have broken up the monorepo we have CSI CRI",
    "start": "416340",
    "end": "424020"
  },
  {
    "text": "cni Cloud providers and probably a few other things uh all are developed in",
    "start": "424020",
    "end": "429960"
  },
  {
    "text": "different GitHub repos and by the people that are actually",
    "start": "429960",
    "end": "435900"
  },
  {
    "text": "interested in those topics um and maintaining them",
    "start": "435900",
    "end": "442580"
  },
  {
    "text": "and so here is uh here are some vanity uh stats that sort of reflect where we are",
    "start": "444419",
    "end": "449639"
  },
  {
    "text": "um so in in the kubernetes organization there are 77 repositories uh in the",
    "start": "449639",
    "end": "454800"
  },
  {
    "text": "kubernetes six organization there are 161 repositories uh there are 240 uh",
    "start": "454800",
    "end": "461460"
  },
  {
    "text": "GitHub projects tagged with kubernetes controller so that's a good sort of proxy for operators there are 27 000",
    "start": "461460",
    "end": "468360"
  },
  {
    "text": "plus uh tagged with kubernetes and there are like more than 47 000 repositories",
    "start": "468360",
    "end": "474960"
  },
  {
    "text": "that consume client go so if you think about where we were we're all that all that development was happening in that",
    "start": "474960",
    "end": "480599"
  },
  {
    "text": "kubernetes that second entry in that left-hand column so now where we have 48 000 repositories on GitHub you know this",
    "start": "480599",
    "end": "486780"
  },
  {
    "text": "is a this is a huge success in terms of de-bottlenecking ourselves and enabling",
    "start": "486780",
    "end": "491960"
  },
  {
    "text": "uh activity to happen outside of just that second line there",
    "start": "491960",
    "end": "497900"
  },
  {
    "text": "as Justin was saying Innovation can now happen outside of KK uh and we have now",
    "start": "499919",
    "end": "505740"
  },
  {
    "text": "Carpenter tons of operators uh we have worked separately from KK on IPv6 for",
    "start": "505740",
    "end": "514320"
  },
  {
    "text": "some time um even Docker was removed and everything kept going with the container",
    "start": "514320",
    "end": "520500"
  },
  {
    "text": "D and cryo well now we have Docker back also",
    "start": "520500",
    "end": "525540"
  },
  {
    "text": "um and it's much easier to contribute to individual CSI cni and cloud provider",
    "start": "525540",
    "end": "531060"
  },
  {
    "text": "projects uh the IPv6 story was quite interesting technically it was supported by",
    "start": "531060",
    "end": "538860"
  },
  {
    "text": "kubernetes since I think version 1.4 but it only worked in specific setups",
    "start": "538860",
    "end": "548300"
  },
  {
    "text": "without any cloud provider support um with some work being done on dual",
    "start": "548300",
    "end": "555240"
  },
  {
    "text": "stack like two three years ago um many of",
    "start": "555240",
    "end": "560640"
  },
  {
    "text": "the blockers were fixed and inconsistencies and enabled external",
    "start": "560640",
    "end": "568620"
  },
  {
    "text": "Cloud providers to do their own thing around IPv6",
    "start": "568620",
    "end": "574040"
  },
  {
    "text": "also the release of IPv6 prefixes by the major Cloud providers",
    "start": "574040",
    "end": "581120"
  },
  {
    "text": "helped us add it to cloud provider AWS and now we're working on",
    "start": "581120",
    "end": "588480"
  },
  {
    "text": "GC for example and it's much much easier because you just have to talk with a",
    "start": "588480",
    "end": "596160"
  },
  {
    "text": "bunch of people from AWS or Google and that's it if they say it's okay you",
    "start": "596160",
    "end": "603600"
  },
  {
    "text": "don't have to consult any other person",
    "start": "603600",
    "end": "609079"
  },
  {
    "text": "and of course it is not all roses though there are some Thorns here and so what have we lost",
    "start": "612720",
    "end": "618839"
  },
  {
    "text": "um well I think the big thing that we've lost is that the experience for kubernetes administrators the people whose job it is to take those 47 000",
    "start": "618839",
    "end": "625860"
  },
  {
    "text": "pieces and put them back together that experience is worse than when it was pre-assembled it for them and tested for",
    "start": "625860",
    "end": "631980"
  },
  {
    "text": "them in the KK repo at least in kubernetes kubernetes we don't actually test these things",
    "start": "631980",
    "end": "637440"
  },
  {
    "text": "together anymore you have no guarantees and there's no one putting these things together for you so a lot of people will",
    "start": "637440",
    "end": "643320"
  },
  {
    "text": "go and you're almost compelled to rely on distribution now whether it's a commercial distribution like gke or eks",
    "start": "643320",
    "end": "651060"
  },
  {
    "text": "or AKs or whoever it is or an open source distribution like chaos you're you're very much compelled to or it's",
    "start": "651060",
    "end": "658980"
  },
  {
    "text": "much easier if you you have to get your testing from somewhere else um and the problem of doing this",
    "start": "658980",
    "end": "665160"
  },
  {
    "text": "yourself is now so much harder right there are all these components now which didn't used to exist and they're all",
    "start": "665160",
    "end": "670560"
  },
  {
    "text": "developed independently on different schedules by groups that may or may not actually talk to each other that much",
    "start": "670560",
    "end": "675959"
  },
  {
    "text": "and it is a harder problem than it was before it was it was never easy and now",
    "start": "675959",
    "end": "681480"
  },
  {
    "text": "it's even like a bigger problem than it ever was and that complexity is only magnified when",
    "start": "681480",
    "end": "688620"
  },
  {
    "text": "you have upgrades and and gradual upgrades and and you have to worry about all",
    "start": "688620",
    "end": "695279"
  },
  {
    "text": "these different release schedules and you are you are now responsible for putting those things all back together",
    "start": "695279",
    "end": "700320"
  },
  {
    "text": "so we have definitely lost something okay should we put everything back",
    "start": "700320",
    "end": "707760"
  },
  {
    "text": "together for testing uh to make it resemble more to a mono repo uh is this",
    "start": "707760",
    "end": "713820"
  },
  {
    "text": "practical at this moment of choosing version is very difficult",
    "start": "713820",
    "end": "719760"
  },
  {
    "text": "and the complexity becomes exponential with the",
    "start": "719760",
    "end": "725459"
  },
  {
    "text": "subsets of features and versions for each component",
    "start": "725459",
    "end": "731040"
  },
  {
    "text": "caps does this uh but so do other distros um",
    "start": "731040",
    "end": "736680"
  },
  {
    "text": "so does every project that wants to run e2e tests but all of us do it separately",
    "start": "736680",
    "end": "744260"
  },
  {
    "text": "uh duplicating various efforts and we do it better or worse",
    "start": "744260",
    "end": "752899"
  },
  {
    "text": "uh I'm going to talk through a little uh sort of case study of one of the problems that arose here which was um",
    "start": "756480",
    "end": "761579"
  },
  {
    "text": "the cloud provider for gcp uh we had a bug that came up on the chaos e",
    "start": "761579",
    "end": "767880"
  },
  {
    "text": "to e testing where a particular combination was failing the combination was chaos and external the external",
    "start": "767880",
    "end": "775019"
  },
  {
    "text": "version of the cloud provider gcp in a particular networking mode uh it's called IP Alias networking mode and that",
    "start": "775019",
    "end": "781440"
  },
  {
    "text": "combination was failing e to e tests and we didn't really know why and",
    "start": "781440",
    "end": "786540"
  },
  {
    "text": "the details aren't that important but effectively what we the Manifest that we were using to install the cloud provider",
    "start": "786540",
    "end": "793019"
  },
  {
    "text": "gcp there's a little bit of that manifest over there on the right right yeah uh was a little bit different",
    "start": "793019",
    "end": "799019"
  },
  {
    "text": "from the Manifest in the cloud provider gcp repo and it actually turned out that",
    "start": "799019",
    "end": "804360"
  },
  {
    "text": "uh both sides were broken the manifests we were using was uh exercising",
    "start": "804360",
    "end": "810060"
  },
  {
    "text": "functionality that was different from uh the the version from the functionality that they were testing in cloud provider",
    "start": "810060",
    "end": "815700"
  },
  {
    "text": "gcp that functionality was actually broken on the gcp side uh arguably they",
    "start": "815700",
    "end": "820920"
  },
  {
    "text": "were testing the wrong functionality there but you know there were things broken on both sides and the problem is",
    "start": "820920",
    "end": "827160"
  },
  {
    "text": "that we catch these things only after like cloud provider gcp has been released typically you know it's",
    "start": "827160",
    "end": "833220"
  },
  {
    "text": "kubernetes has been released the cloud provider gcps is then does their release and so on this is really really late in",
    "start": "833220",
    "end": "839639"
  },
  {
    "text": "the day to be catching these sorts of problems um we would like to catch them much much",
    "start": "839639",
    "end": "845040"
  },
  {
    "text": "earlier and so what we're working with specifically for cloud provider gcp uh and chaos but we're going to be doing",
    "start": "845040",
    "end": "850980"
  },
  {
    "text": "effectively on all the all all the all the components",
    "start": "850980",
    "end": "856260"
  },
  {
    "text": "um and we would hope that other distributions do the same is this idea of sort of continuous testing with",
    "start": "856260",
    "end": "862079"
  },
  {
    "text": "production manifests so uh cloud provider we're adding tests to cloud provider gcp we've added test to",
    "start": "862079",
    "end": "868380"
  },
  {
    "text": "collaborator gcp so that they continuously test with k-ops and their",
    "start": "868380",
    "end": "874860"
  },
  {
    "text": "uh their manifest and they publish that manifest that they intend for us to",
    "start": "874860",
    "end": "880320"
  },
  {
    "text": "consume uh chaops will consume that manifest that they are continuously testing with so we have some test",
    "start": "880320",
    "end": "886920"
  },
  {
    "text": "coverage there other tooling cluster API kube8m whatever it may be they can also",
    "start": "886920",
    "end": "893339"
  },
  {
    "text": "do the same thing they can obviously they can consume the tested manifest that cloud provider gcp is now",
    "start": "893339",
    "end": "899420"
  },
  {
    "text": "publishing which is great and better than they are today and if they also want to they can add",
    "start": "899420",
    "end": "906540"
  },
  {
    "text": "additional testing to cloudfrider gcp so the cloud provider gcp can test with more sort of production environments and",
    "start": "906540",
    "end": "913320"
  },
  {
    "text": "fewer of its own test scenarios",
    "start": "913320",
    "end": "917420"
  },
  {
    "text": "okay uh we are asking components to publish working manifests not just",
    "start": "919279",
    "end": "925800"
  },
  {
    "text": "container images uh if all the kubernetes components start testing their manifesting fully assembled",
    "start": "925800",
    "end": "933180"
  },
  {
    "text": "distributions caps and others uh then all the distributions can consume these",
    "start": "933180",
    "end": "939180"
  },
  {
    "text": "manifests for testing purposes at least we should catch all single Source bugs",
    "start": "939180",
    "end": "945660"
  },
  {
    "text": "in this way where bugs are introduced by the component a combination bugs will be",
    "start": "945660",
    "end": "952920"
  },
  {
    "text": "caught by the distros and are hopefully much rarer",
    "start": "952920",
    "end": "958760"
  },
  {
    "text": "um yeah absolutely yeah so like that a single Source bug being a bug that's introduced",
    "start": "959639",
    "end": "965760"
  },
  {
    "text": "in Copperhead or gcp should now be caught basically when they introduce that PR the that the cloud provider gcp",
    "start": "965760",
    "end": "973500"
  },
  {
    "text": "PR will will run against gcp with production tooling with chaops at some",
    "start": "973500",
    "end": "979740"
  },
  {
    "text": "relatively recent version of chaos getting back to where we were back in the days where everything was in KK that",
    "start": "979740",
    "end": "986639"
  },
  {
    "text": "that test will run against Real gcp infrastructure with real production scripting",
    "start": "986639",
    "end": "993000"
  },
  {
    "text": "and so hopefully if it's a the single Source versus multiple source and multiple single single Source versus",
    "start": "993000",
    "end": "998459"
  },
  {
    "text": "combination is sort of subtle but the idea is if if it's a bug that is specific to cloud provider gcp uh that",
    "start": "998459",
    "end": "1005360"
  },
  {
    "text": "should hopefully get caught there uh there are bugs that happen only when two things go wrong at once as it were so uh",
    "start": "1005360",
    "end": "1011480"
  },
  {
    "text": "you know you have uh Linker D in combination with some psyllium uh some",
    "start": "1011480",
    "end": "1017600"
  },
  {
    "text": "psyllium configuration uh those sorts of things where they both need to happen that'll only get caught later on by the",
    "start": "1017600",
    "end": "1024620"
  },
  {
    "text": "distributions but those are much rarer than the single Source uh bugs",
    "start": "1024620",
    "end": "1031600"
  },
  {
    "text": "yeah uh so uh components or projects",
    "start": "1033160",
    "end": "1038660"
  },
  {
    "text": "should think about how this road do upgrades or how their customers do the",
    "start": "1038660",
    "end": "1044418"
  },
  {
    "text": "upgrades uh because if you release manifest you have to take into consideration uh immutability there are",
    "start": "1044419",
    "end": "1052400"
  },
  {
    "text": "various fields that you cannot change with an upgrade like selectors uh or if",
    "start": "1052400",
    "end": "1061100"
  },
  {
    "text": "you change the name space you might end up with awkward awkward things",
    "start": "1061100",
    "end": "1067100"
  },
  {
    "text": "um there's disruption um people don't really like to apply a new",
    "start": "1067100",
    "end": "1075260"
  },
  {
    "text": "manifest and then uh their cluster be broken because you had to run some",
    "start": "1075260",
    "end": "1080960"
  },
  {
    "text": "special command or something that was you know you cannot express via",
    "start": "1080960",
    "end": "1086960"
  },
  {
    "text": "the Manifest so it's not quite good uh and the skew",
    "start": "1086960",
    "end": "1093080"
  },
  {
    "text": "because uh the components don't necessarily think of their manifest as production",
    "start": "1093080",
    "end": "1099919"
  },
  {
    "text": "ready they tend to use a simple",
    "start": "1099919",
    "end": "1106600"
  },
  {
    "text": "versions of this manifests um that the distributions have to enrich",
    "start": "1106600",
    "end": "1113600"
  },
  {
    "text": "with the various things like anti-affinity or you",
    "start": "1113600",
    "end": "1120080"
  },
  {
    "text": "know and in time this uh this gets to a",
    "start": "1120080",
    "end": "1126080"
  },
  {
    "text": "certain versions queue compared to for distribution compared to what the",
    "start": "1126080",
    "end": "1131200"
  },
  {
    "text": "components release and in time it's hard to keep track of",
    "start": "1131200",
    "end": "1138440"
  },
  {
    "text": "all this smaller or bigger changes around",
    "start": "1138440",
    "end": "1144740"
  },
  {
    "text": "the Manifest and besides all these smaller problems",
    "start": "1144740",
    "end": "1152020"
  },
  {
    "text": "there are non-kubernetes objects that cannot be",
    "start": "1152020",
    "end": "1157460"
  },
  {
    "text": "expressed in manifests like IM policies firewall rules TLS certificates",
    "start": "1157460",
    "end": "1165880"
  },
  {
    "text": "which should be somehow specified in a way that the distribution",
    "start": "1165880",
    "end": "1172700"
  },
  {
    "text": "can keep track of them and can set it up so that the components works as expected",
    "start": "1172700",
    "end": "1181700"
  },
  {
    "text": "like not just have some well a bunch of documents somewhere they say hey in this",
    "start": "1181700",
    "end": "1188240"
  },
  {
    "text": "version you have to set up this this and this in time they get lost",
    "start": "1188240",
    "end": "1196059"
  },
  {
    "text": "yeah the dream on on this second one there is that uh we'd be able to install a cni for example that we'd never seen",
    "start": "1196880",
    "end": "1203419"
  },
  {
    "text": "before in in a distribution Tool uh that the cni would Express you know the firewall ports that needed to be opened",
    "start": "1203419",
    "end": "1210620"
  },
  {
    "text": "um so it's not it's not a huge problem and that there's a fairly small Universe today uh this is you know surmountable",
    "start": "1210620",
    "end": "1216679"
  },
  {
    "text": "and that we can sort of hard code and we know oh you know psyllium needs this particular port to be opened",
    "start": "1216679",
    "end": "1222020"
  },
  {
    "text": "um but just when we're thinking about like the next 100x growth how are we going to like enable these things to",
    "start": "1222020",
    "end": "1228440"
  },
  {
    "text": "move for like to move forwards and and grow another 100x as it were",
    "start": "1228440",
    "end": "1234620"
  },
  {
    "text": "um so these are the things we're going to be working on they aren't they aren't insurmountable another another problem is that we don't",
    "start": "1234620",
    "end": "1239840"
  },
  {
    "text": "actually have a great standard today um for what a manifest should look like",
    "start": "1239840",
    "end": "1246020"
  },
  {
    "text": "if it isn't static and a lot of these manifests are not static so a lot of the",
    "start": "1246020",
    "end": "1252140"
  },
  {
    "text": "components need some per cluster information so a lot of them need the cluster name or they need the cluster",
    "start": "1252140",
    "end": "1259340"
  },
  {
    "text": "ciders some of the ciders serviceiders pod cider and that information there's",
    "start": "1259340",
    "end": "1264380"
  },
  {
    "text": "no there's no like standard today for how we are going to plumb that through once again I suspect we'll make do on a",
    "start": "1264380",
    "end": "1273260"
  },
  {
    "text": "one by one you know one by one interaction basis try to generalize those sorts of things but these are some",
    "start": "1273260",
    "end": "1279799"
  },
  {
    "text": "of the challenges we're going to be working through with the components as just as distros another one is a lot of",
    "start": "1279799",
    "end": "1287419"
  },
  {
    "text": "the components have what I would what I classify as variance so they have whole feature sets that are enabled or",
    "start": "1287419",
    "end": "1293419"
  },
  {
    "text": "disabled in different combinations and a canonical example is you can enable or disable encryption uh in psyllium for",
    "start": "1293419",
    "end": "1300740"
  },
  {
    "text": "example that's okay if you have a small number of those features but when you have a large number of features you're",
    "start": "1300740",
    "end": "1307159"
  },
  {
    "text": "potentially talking about you know 2 to the N uh manifests that we're now asking",
    "start": "1307159",
    "end": "1312980"
  },
  {
    "text": "them to publish so I think there's a interesting discussion there about how the components want to publish the",
    "start": "1312980",
    "end": "1321260"
  },
  {
    "text": "feature sets that they want to be consumed we obviously we can publish multiple",
    "start": "1321260",
    "end": "1327260"
  },
  {
    "text": "manifests if that number of feature sets is small enough but if they genuinely believe they want",
    "start": "1327260",
    "end": "1333380"
  },
  {
    "text": "to publish 2 to the n and n is big enough that is going to break down pretty fast",
    "start": "1333380",
    "end": "1339100"
  },
  {
    "text": "okay what about the helm charts it's very popular",
    "start": "1342380",
    "end": "1347480"
  },
  {
    "text": "these days um is this the answer uh we think that",
    "start": "1347480",
    "end": "1353059"
  },
  {
    "text": "not quite it's close but it's not perfect",
    "start": "1353059",
    "end": "1359720"
  },
  {
    "text": "ah Helm charts by default allow a large number of",
    "start": "1359720",
    "end": "1366140"
  },
  {
    "text": "setting combinations because of that you may end up with a generated manifest",
    "start": "1366140",
    "end": "1373220"
  },
  {
    "text": "that is not quite what the component expected when the helm chart was created",
    "start": "1373220",
    "end": "1381380"
  },
  {
    "text": "or what they test with there's no standards for the parameters",
    "start": "1381380",
    "end": "1390039"
  },
  {
    "text": "structure like the name of all of them so you may have to",
    "start": "1390039",
    "end": "1397520"
  },
  {
    "text": "read all of those or they will differ for similar components",
    "start": "1397520",
    "end": "1404980"
  },
  {
    "text": "and this is kind of like an API that has to remain stable across upgrades of the",
    "start": "1404980",
    "end": "1413419"
  },
  {
    "text": "helm charts",
    "start": "1413419",
    "end": "1416200"
  },
  {
    "text": "so um our proposal is this we ask the",
    "start": "1420559",
    "end": "1426640"
  },
  {
    "text": "components to publish manifests in a way that they should be used in production",
    "start": "1426640",
    "end": "1435159"
  },
  {
    "text": "um and we ask of them to test with this manifests but ideally with production",
    "start": "1435260",
    "end": "1441740"
  },
  {
    "text": "tooling doesn't matter which production tooling but not use internal things that",
    "start": "1441740",
    "end": "1447980"
  },
  {
    "text": "they cannot be reproduced by other people uh easily",
    "start": "1447980",
    "end": "1454840"
  },
  {
    "text": "and in return for that this is the sort of we ask and we promise contracts that we are working with the components on WE",
    "start": "1455539",
    "end": "1464080"
  },
  {
    "text": "chaops and hopefully other distributions will join us in this we'll help those components to test their manifests with",
    "start": "1464080",
    "end": "1470900"
  },
  {
    "text": "production tooling like chaops so we'll you know work with with the components to add those e to e tests",
    "start": "1470900",
    "end": "1478220"
  },
  {
    "text": "um we'd like for it to be k-pops but it's we would like for the chaos and cluster API and qbdm and a broad ecosystem of",
    "start": "1478220",
    "end": "1485299"
  },
  {
    "text": "production tooling what matters is that the manifests are tested in ways that",
    "start": "1485299",
    "end": "1490520"
  },
  {
    "text": "are the same as they're going to be run in production and in return we won't you know",
    "start": "1490520",
    "end": "1496700"
  },
  {
    "text": "arbitrarily patch your manifest so the Manifest that you publish will be the one that goes into into production",
    "start": "1496700",
    "end": "1504500"
  },
  {
    "text": "um if we have to change it in some way we we will at least talk to you",
    "start": "1504500",
    "end": "1509539"
  },
  {
    "text": "um in other and that this is sort of you know this is not surprising but this is somehow different from where we have landed uh recently where people aren't",
    "start": "1509539",
    "end": "1518000"
  },
  {
    "text": "even aware of the fact that these manifests that are actually running in production are not the same things as the projects themselves are publishing",
    "start": "1518000",
    "end": "1525080"
  },
  {
    "text": "and testing and in short so there's you know we've",
    "start": "1525080",
    "end": "1530600"
  },
  {
    "text": "come a long way uh we are very close I think we have a",
    "start": "1530600",
    "end": "1536720"
  },
  {
    "text": "way to achieve some of the things that we may have lost when we broke the monorepo up",
    "start": "1536720",
    "end": "1542659"
  },
  {
    "text": "um it's not the most technically challenging work I think at this point uh there are definitely some technical",
    "start": "1542659",
    "end": "1548419"
  },
  {
    "text": "challenges as we talked about but it's as much organizational and making sure that we go through and and set up those",
    "start": "1548419",
    "end": "1554779"
  },
  {
    "text": "testing jobs and make sure that the pipelines work so that we're consuming the same manifest that the components",
    "start": "1554779",
    "end": "1560480"
  },
  {
    "text": "think we're consuming and we believe that if we do this that we actually are now going to be able to",
    "start": "1560480",
    "end": "1567380"
  },
  {
    "text": "get back to that uh reliable and easy kubernetes experience while at the same",
    "start": "1567380",
    "end": "1572659"
  },
  {
    "text": "time supporting this Grand ecosystem that we have deliberately created and",
    "start": "1572659",
    "end": "1578600"
  },
  {
    "text": "get back to where we were and with that I think we'll draw our",
    "start": "1578600",
    "end": "1583640"
  },
  {
    "text": "talk to a close if there are any questions uh we can we can take them",
    "start": "1583640",
    "end": "1589640"
  },
  {
    "text": "um and there is a QR code if you would like to leave feedback on this session um I don't know if we have any mics but",
    "start": "1589640",
    "end": "1595520"
  },
  {
    "text": "it's a small room so you can probably just shout if you have any questions thank you",
    "start": "1595520",
    "end": "1601778"
  },
  {
    "text": "at the back there question when",
    "start": "1606919",
    "end": "1610120"
  },
  {
    "text": "you just go yeah I have a question because as far as I know kubernetes is the biggest go like",
    "start": "1612860",
    "end": "1620299"
  },
  {
    "text": "open source repository and I have a question did you encounter any problems regarding for example go modules or you",
    "start": "1620299",
    "end": "1628159"
  },
  {
    "text": "know sharing code between between the repositories and how you were tackling it do have you left any feedback to the",
    "start": "1628159",
    "end": "1634700"
  },
  {
    "text": "go team Etc basically your your yeah thank you yes it's a great question",
    "start": "1634700",
    "end": "1642740"
  },
  {
    "text": "um there has so the there's definitely been a lot of back and forth with the go team about uh how go modules work how we",
    "start": "1642740",
    "end": "1650900"
  },
  {
    "text": "should structure things uh anyone that has seen the staging uh subdirectory",
    "start": "1650900",
    "end": "1656179"
  },
  {
    "text": "knows that the go team we're not you know we're not the canonical example of how you should write well-structured go",
    "start": "1656179",
    "end": "1662960"
  },
  {
    "text": "um a lot of it has evolved over the years and as you say it's because we have been the one of the biggest go",
    "start": "1662960",
    "end": "1668659"
  },
  {
    "text": "projects in pushing the boundaries uh that Communication channel is open I think is healthier than ever",
    "start": "1668659",
    "end": "1674480"
  },
  {
    "text": "um people like Tim Hawkin for example have done a lot of work on trying to use go workspaces recently and yes there is",
    "start": "1674480",
    "end": "1680720"
  },
  {
    "text": "a lot of feedback that gets fed back to the to the go team in that regard and uh",
    "start": "1680720",
    "end": "1686659"
  },
  {
    "text": "historically they the relationship is healthier than ever how about that",
    "start": "1686659",
    "end": "1694059"
  },
  {
    "text": "Daniel do you wanna it's for Daniel then David",
    "start": "1695419",
    "end": "1700000"
  },
  {
    "text": "thanks um so I imagine a scenario where let's say there are 10 providers uh and one",
    "start": "1702020",
    "end": "1707720"
  },
  {
    "text": "component right and and so you a change to the component manifest gets tested",
    "start": "1707720",
    "end": "1713120"
  },
  {
    "text": "against these 10 providers and let's say today one or two providers run the test",
    "start": "1713120",
    "end": "1719140"
  },
  {
    "text": "and or how you know however that that works and one of those tests fails is the burden",
    "start": "1719140",
    "end": "1726980"
  },
  {
    "text": "on that provider or on the component now let's say then a week later",
    "start": "1726980",
    "end": "1732320"
  },
  {
    "text": "uh all 10 of the providers have run the test and now it's failing for eight out",
    "start": "1732320",
    "end": "1737840"
  },
  {
    "text": "of the Ten of them now is the you know that question of the burden where yeah do you have any thoughts on that",
    "start": "1737840",
    "end": "1744980"
  },
  {
    "text": "yeah I mean I think the the tests that run in in the provider in the",
    "start": "1744980",
    "end": "1752059"
  },
  {
    "text": "components repos we would expect for them to run on every PR and if there's a",
    "start": "1752059",
    "end": "1757220"
  },
  {
    "text": "breakage there that's where we'd expect the the component to pick up on that um",
    "start": "1757220",
    "end": "1762980"
  },
  {
    "text": "I feel like if we if we somehow see that something then fails in chaos when we",
    "start": "1762980",
    "end": "1768500"
  },
  {
    "text": "pull the latest version you know we we'll probably look at what's going on there first because our assumption will",
    "start": "1768500",
    "end": "1774020"
  },
  {
    "text": "be that it's our fault somehow um I think we'll see what happens going forwards I",
    "start": "1774020",
    "end": "1780440"
  },
  {
    "text": "there's at least some expectation there now that uh the the code the the Manifest",
    "start": "1780440",
    "end": "1787279"
  },
  {
    "text": "that we're getting has worked at some stage and we can now go back and look at those tests and having those two test",
    "start": "1787279",
    "end": "1793340"
  },
  {
    "text": "results in the history of those test results will enable us to hopefully like get some idea of where that problem may",
    "start": "1793340",
    "end": "1799039"
  },
  {
    "text": "may lie um but yeah we will we'll figure it out sort of as we go",
    "start": "1799039",
    "end": "1804080"
  },
  {
    "text": "um yeah David please thank you",
    "start": "1804080",
    "end": "1810580"
  },
  {
    "text": "a similar vein slightly more pointed uh so so I'm now a component I support 10",
    "start": "1812299",
    "end": "1819260"
  },
  {
    "text": "different platforms and I'm trying to do the most good for the most people uh and",
    "start": "1819260",
    "end": "1824539"
  },
  {
    "text": "one out of the ten fails do you believe this should prevent a repo from saying",
    "start": "1824539",
    "end": "1830059"
  },
  {
    "text": "yeah I'm real sorry you're broken but this is an important fix for the other night",
    "start": "1830059",
    "end": "1836360"
  },
  {
    "text": "and as you know someone with the distro we Face the issue",
    "start": "1836360",
    "end": "1841399"
  },
  {
    "text": "honestly I think that should be up to you I think I think when you take those you're not obliged to accept the 10 e to",
    "start": "1841399",
    "end": "1847640"
  },
  {
    "text": "e tests um I think it it helps you to have more e to e tests and I think if you want to",
    "start": "1847640",
    "end": "1855320"
  },
  {
    "text": "say yes we don't care about Google then that's up to you right and I I think",
    "start": "1855320",
    "end": "1861140"
  },
  {
    "text": "it's I think it's a fair statement anyone should be allowed to make that statement and say that and make that choice and you know we're certainly not",
    "start": "1861140",
    "end": "1868100"
  },
  {
    "text": "going to stand in the way of that I think one of the things that has happened today is that those statements",
    "start": "1868100",
    "end": "1873919"
  },
  {
    "text": "are not explicit right um so at least now we'll be able to say yeah we are deliberately doing this",
    "start": "1873919",
    "end": "1879559"
  },
  {
    "text": "rather than I've accidentally broken like this thing over here and I have no idea really until six months later when",
    "start": "1879559",
    "end": "1885320"
  },
  {
    "text": "you're like oh yeah I forgot about that entirely which is sort of where we are today um so I I think we're in a better place",
    "start": "1885320",
    "end": "1891080"
  },
  {
    "text": "I don't want to I don't think anyone in this room wants to centralize and say thou shalt not break you know other",
    "start": "1891080",
    "end": "1897440"
  },
  {
    "text": "people but uh I I think if uh trying to think of any any good examples",
    "start": "1897440",
    "end": "1903740"
  },
  {
    "text": "if we had a Secrets operator right that was maintained by Google and somehow it was breaking a lot on Azure for example",
    "start": "1903740",
    "end": "1910279"
  },
  {
    "text": "right presumably some pointed questions even more pointed questions would be asked at that time uh but I you know I",
    "start": "1910279",
    "end": "1916279"
  },
  {
    "text": "think we are as you say all trying to do the best we can and that to date that sort of uh Behavior has not Arisen so",
    "start": "1916279",
    "end": "1923600"
  },
  {
    "text": "we're we're in we're hopefully okay if we if we're able to make the choices deliberately I think",
    "start": "1923600",
    "end": "1929360"
  },
  {
    "text": "except Sarah was there one more question there and then maybe that's maybe the last one",
    "start": "1929360",
    "end": "1935720"
  },
  {
    "text": "um this this work on removing the like the cloud providers code from the repo I think it can be seen like a major",
    "start": "1935720",
    "end": "1942100"
  },
  {
    "text": "Paradigm Shift Cleanup in the in the in the repo so I'm curious can you can you",
    "start": "1942100",
    "end": "1948320"
  },
  {
    "text": "think of any other like major cleanup efforts that's going on right now that is kind of like worthy of uh to take a",
    "start": "1948320",
    "end": "1955580"
  },
  {
    "text": "look or maybe even contribute to",
    "start": "1955580",
    "end": "1959620"
  },
  {
    "text": "David do you want to I mean I feel like a lot of it has happened but",
    "start": "1961460",
    "end": "1966519"
  },
  {
    "text": "what we've had a lot of Cleanup in a lot of spaces I think if I were looking at like",
    "start": "1967220",
    "end": "1974179"
  },
  {
    "text": "what is this closest to um I would see this as comparable to the effort like when we introduced rvac we",
    "start": "1974179",
    "end": "1980539"
  },
  {
    "text": "went everywhere and updated everyone and like Jordan did half of them have one by",
    "start": "1980539",
    "end": "1986240"
  },
  {
    "text": "himself right and it was a lot of work I think we're gonna face something similar when we do sell admission where it's",
    "start": "1986240",
    "end": "1992240"
  },
  {
    "text": "going to be we want to replace these web hooks someone has to do all the work uh so it's not the first time we've had",
    "start": "1992240",
    "end": "1998120"
  },
  {
    "text": "something like this this is one of the most costly though but it would have a huge benefit um this would be awesome",
    "start": "1998120",
    "end": "2005820"
  },
  {
    "text": "yeah another one might be that there's going to be I think more around uh maybe pulling some more stuff out of staging I",
    "start": "2006460",
    "end": "2012039"
  },
  {
    "text": "think like some of the work going into workspaces is is maybe going to enable that uh and so like maybe we'll split",
    "start": "2012039",
    "end": "2019240"
  },
  {
    "text": "Cube cuddle out you know it's it's uh I don't know we'll see I don't know I'm not saying I'm not volunteering nor am I",
    "start": "2019240",
    "end": "2026799"
  },
  {
    "text": "volunteering anyone to do that work but you know I think there will be we're certainly unblocking a bunch of these things and the cell work is as David",
    "start": "2026799",
    "end": "2033159"
  },
  {
    "text": "said super exciting I would like to add like we are removing entry volume plugins in favor of CSI it was a huge",
    "start": "2033159",
    "end": "2040659"
  },
  {
    "text": "effort on storyside here we are storage volumes",
    "start": "2040659",
    "end": "2046659"
  },
  {
    "text": "the next next all right thank you very much thank you thank you",
    "start": "2046659",
    "end": "2055500"
  }
]