[
  {
    "start": "0",
    "end": "168000"
  },
  {
    "text": "so I was going so far you're enjoying the speakers",
    "start": "143720",
    "end": "148920"
  },
  {
    "text": "I think they're amazing um all right do you know guys the one from the Italian the German and the",
    "start": "148920",
    "end": "155340"
  },
  {
    "text": "English that work in a bar now I'm joking I'm just not gonna talk we have Salman from apvia please give it",
    "start": "155340",
    "end": "161459"
  },
  {
    "text": "up from Salman",
    "start": "161459",
    "end": "164180"
  },
  {
    "start": "168000",
    "end": "412000"
  },
  {
    "text": "give me one second",
    "start": "168780",
    "end": "172160"
  },
  {
    "text": "okay uh welcome everybody good morning Amsterdam how are we all doing yay this is the last session before",
    "start": "183420",
    "end": "190980"
  },
  {
    "text": "lunch so try and keep it light right imagine you have a website could be any",
    "start": "190980",
    "end": "196200"
  },
  {
    "text": "website and there's some traffic coming to it and it's working fine but at some point you",
    "start": "196200",
    "end": "204180"
  },
  {
    "text": "launch a new product I don't know iPhone or whatever and there's a lot of people coming to your",
    "start": "204180",
    "end": "209400"
  },
  {
    "text": "website now and there's not enough traffic being served and people are not happy",
    "start": "209400",
    "end": "214440"
  },
  {
    "text": "what should happen is that we should use what kubernetes been promising us right the auto scaler you can Auto scale it",
    "start": "214440",
    "end": "220560"
  },
  {
    "text": "but it doesn't do everything by default there's some work that we have to do in order to do that and that's what we're",
    "start": "220560",
    "end": "226200"
  },
  {
    "text": "going to look at today how do we Auto Scale based on some events and basically scale out the website and let people do",
    "start": "226200",
    "end": "232620"
  },
  {
    "text": "what they need to do but before we start because you've all come here I thought we should reward you with something",
    "start": "232620",
    "end": "238379"
  },
  {
    "text": "everybody know this talks right the Linux talks it's a Lego I have this Lego",
    "start": "238379",
    "end": "243540"
  },
  {
    "text": "right here we like like who likes Lego yeah but everybody's not going to get",
    "start": "243540",
    "end": "248940"
  },
  {
    "text": "like that you know uh there'll be a bit of a quiz just one question shout out the number people know about the",
    "start": "248940",
    "end": "254640"
  },
  {
    "text": "landscape cncf landscape the cncf landscape no not that one",
    "start": "254640",
    "end": "262019"
  },
  {
    "text": "this one right so this this landscape this shows you know we were talking about Sarah was talking about this",
    "start": "262019",
    "end": "267600"
  },
  {
    "text": "morning about choices and how many choices we have there's a lot of projects on there or cards so here's a simple question the",
    "start": "267600",
    "end": "275040"
  },
  {
    "text": "question is how many cards are on the cncf landscape some of you might already know this but I'm not unreasonable so",
    "start": "275040",
    "end": "280680"
  },
  {
    "text": "I'm going to give you a bit of a hint this is what 20 cards look like right so that's 20 cards for service mesh right",
    "start": "280680",
    "end": "287220"
  },
  {
    "text": "so here you go shout and number whoever's closest my uh William here will give you this so just shout a",
    "start": "287220",
    "end": "293699"
  },
  {
    "text": "number 400 400 higher 600 keep going up keep going up",
    "start": "293699",
    "end": "302479"
  },
  {
    "text": "was that one thousand keep going 1200 I think yeah let's let's stop here",
    "start": "303840",
    "end": "310080"
  },
  {
    "text": "one one Central that's very good a rhino flows to that gentleman there can you just pass it on",
    "start": "310080",
    "end": "316759"
  },
  {
    "text": "1174 enjoy the Lego I don't know how long it takes to make it but apparently the instructions are as good as what we",
    "start": "316759",
    "end": "323039"
  },
  {
    "text": "see so just a few more things that's one one seven four projects on there I I just put out some more stats on here",
    "start": "323039",
    "end": "329520"
  },
  {
    "text": "it's from it says of last night three six the 3.6 million stars but more",
    "start": "329520",
    "end": "334919"
  },
  {
    "text": "importantly like countless of community Stars right people who are working on these projects in their own time so",
    "start": "334919",
    "end": "340080"
  },
  {
    "text": "great and some some of the other stuff there so this was as of last night uh 1174 but when I woke up this morning",
    "start": "340080",
    "end": "347100"
  },
  {
    "text": "it's uh it looks a bit like this it keeps increasing every day right so but I know you're a bit disappointed that",
    "start": "347100",
    "end": "352560"
  },
  {
    "text": "you didn't you didn't win uh maybe that Lego but don't worry uh I work for app beer and we have boots downstairs if",
    "start": "352560",
    "end": "358800"
  },
  {
    "text": "you'd like to win some of this stuff we have some cool stuff so just come through we are downstairs uh the mark",
    "start": "358800",
    "end": "364860"
  },
  {
    "text": "Lucy and um auroria down there and I'm gonna read myself there so if you want to come and",
    "start": "364860",
    "end": "370080"
  },
  {
    "text": "have a chat I work for a company called Appiah as an mlops engineer and we are a",
    "start": "370080",
    "end": "375120"
  },
  {
    "text": "startup we're a consultancy we have a product that helps you deploy stuff to Cloud easier and also work as a",
    "start": "375120",
    "end": "380699"
  },
  {
    "text": "kubernetes instructor for learnkates check out our website learncase.io and we have we have a bunch of blogs you can",
    "start": "380699",
    "end": "387060"
  },
  {
    "text": "find me on Twitter at soulmatebar I also have a bit of a YouTube channel you can check that out so romantic ball so",
    "start": "387060",
    "end": "392220"
  },
  {
    "text": "that's Appiah appia.io check us out uh I have to make sure I put that there because I need to get paid so we're done",
    "start": "392220",
    "end": "398460"
  },
  {
    "text": "with that but yeah so that's my YouTube channel just check out my YouTube channel but before I start really want to thank the hosts and the organizers",
    "start": "398460",
    "end": "405479"
  },
  {
    "text": "you know they've done an awesome job putting an event together would you agree with that yeah yeah",
    "start": "405479",
    "end": "412740"
  },
  {
    "start": "412000",
    "end": "441000"
  },
  {
    "text": "thank you thank you so much so uh and also I want to thank my friend Daniella palencies from learnkates who helped me",
    "start": "412740",
    "end": "418680"
  },
  {
    "text": "put together this uh this presentation so thanks to Danielle so here's what we're going to do brief look at services",
    "start": "418680",
    "end": "424380"
  },
  {
    "text": "and a quick look at ingresses I'm sure you're already aware of what those are but just to make sure we're all uh on",
    "start": "424380",
    "end": "430440"
  },
  {
    "text": "the same page and then we'll look at cada how do we Auto scale it and then I'm going to show you how to auto scale the Ingress whatever I show you even",
    "start": "430440",
    "end": "437100"
  },
  {
    "text": "though we're going to scaling the Ingress you can also apply to any other workloads that you have so it should",
    "start": "437100",
    "end": "442620"
  },
  {
    "start": "441000",
    "end": "551000"
  },
  {
    "text": "work fine so imagine uh just a just a bit of a quick recap this is imagine a deploy a website and",
    "start": "442620",
    "end": "450120"
  },
  {
    "text": "uh it's just a static page and if you want to deploy this in kubernetes usually you deploy the website and you",
    "start": "450120",
    "end": "456900"
  },
  {
    "text": "have to stick in a load balancer because you need to make sure the traffic is distributed evenly and you can have",
    "start": "456900",
    "end": "462660"
  },
  {
    "text": "multiple load balances because you might be running multiple applications inside and then if you're running multiple",
    "start": "462660",
    "end": "467759"
  },
  {
    "text": "applications you want to make sure you route the request based on the request that they've sent to so in kubernetes as",
    "start": "467759",
    "end": "474180"
  },
  {
    "text": "we all know the internal load balances are Services they pick the right pot to",
    "start": "474180",
    "end": "479520"
  },
  {
    "text": "send and then the the the the the top layer load balancer is called in Ingress so this is sending requests from outside",
    "start": "479520",
    "end": "486060"
  },
  {
    "text": "the cluster to inside the cluster and then we have pods I'm sure we'll we all know this so this is so this is what it",
    "start": "486060",
    "end": "491520"
  },
  {
    "text": "is we're going to focus on on Ingress today but before I can talk about Ingress it's important to just point out",
    "start": "491520",
    "end": "497160"
  },
  {
    "text": "really quickly what services are and or the limitations of services in in the",
    "start": "497160",
    "end": "503039"
  },
  {
    "text": "context of running websites and why do we need Ingress so every time you deploy an application inside a pod a container",
    "start": "503039",
    "end": "509280"
  },
  {
    "text": "or multiple containers gets an IP address and then we use Service as an abstraction layer because it's",
    "start": "509280",
    "end": "514740"
  },
  {
    "text": "convenient to to have an abstraction layer we've sent a request from another pod or from outside somewhere the",
    "start": "514740",
    "end": "522360"
  },
  {
    "text": "service knows how many pods live underneath it and it can basically you request you send a request to the",
    "start": "522360",
    "end": "528120"
  },
  {
    "text": "service and it's it's an abstraction so that makes a request and only the service knows how many pods are running",
    "start": "528120",
    "end": "533220"
  },
  {
    "text": "so you could have two uh and if if a pod dies or comes back up it doesn't matter it will keep track of it it'll pick it",
    "start": "533220",
    "end": "539640"
  },
  {
    "text": "and all if it goes up to 10 pods up or down doesn't matter the Pod that is",
    "start": "539640",
    "end": "545640"
  },
  {
    "text": "sending a requests doesn't need to know anything it's the service that needs denied so that's very high level service",
    "start": "545640",
    "end": "552899"
  },
  {
    "start": "551000",
    "end": "623000"
  },
  {
    "text": "definition uh if you would ask chat GPS I guess that's where it would give you",
    "start": "552899",
    "end": "558120"
  },
  {
    "text": "um but there's different kind of services we have a headless service that's a building block and the most",
    "start": "558120",
    "end": "563339"
  },
  {
    "text": "basic service it's basically like all it is just an endpoint the IP address it's",
    "start": "563339",
    "end": "568980"
  },
  {
    "text": "not very good with load balancing so what what kubernetes also provides is a is the default service so if you create",
    "start": "568980",
    "end": "574740"
  },
  {
    "text": "a service in kubernetes cluster IP extends headlets kind of like a load balancer so it does a better job than",
    "start": "574740",
    "end": "581480"
  },
  {
    "text": "headless for load balancing then we have so the two services so far",
    "start": "581480",
    "end": "587459"
  },
  {
    "text": "they're all internal Services you can't expose it to the outside cluster outside of the cluster so then we have this",
    "start": "587459",
    "end": "592980"
  },
  {
    "text": "thing called node Port this external service you it basically opens a port on each node",
    "start": "592980",
    "end": "598440"
  },
  {
    "text": "but you might have multiple nodes running so what kubernetes provides is another kind of service called the load",
    "start": "598440",
    "end": "604620"
  },
  {
    "text": "balancer service and it it just has a node port and if you're in a cloud provider it Provisions an actual",
    "start": "604620",
    "end": "610860"
  },
  {
    "text": "a load balancer and attaches it to the nodes if you're doing this on premises that you've used a service type load",
    "start": "610860",
    "end": "616800"
  },
  {
    "text": "balancer you have to have some kind of a project like metal lb that allows you to do that but it's kind of useful if",
    "start": "616800",
    "end": "622380"
  },
  {
    "text": "you're doing with the cloud provider there's a couple of things uh there there's a few gotchas with uh",
    "start": "622380",
    "end": "629580"
  },
  {
    "start": "623000",
    "end": "692000"
  },
  {
    "text": "services the good thing is that automatically Provisions the the load balancer so",
    "start": "629580",
    "end": "635700"
  },
  {
    "text": "we're talking about external Services because we want to make sure we can access the website from outside of the cluster it's automatic provisioning it",
    "start": "635700",
    "end": "642480"
  },
  {
    "text": "Provisions the nodes on the ports and attaches it to the load balancer but as I said it's cloud provider specific and",
    "start": "642480",
    "end": "651019"
  },
  {
    "text": "if you're doing on-premises yet there's extra work you need to do and I don't know if you have done this like I'm",
    "start": "651019",
    "end": "657120"
  },
  {
    "text": "pretty sure you're aware Cloud providers are not cheap in the club in sorry load balances are not cheap in the cloud provider imagine if everybody's spinning",
    "start": "657120",
    "end": "663899"
  },
  {
    "text": "up a load balancer for their application could be could cost a lot of money and the limitation is it's basically",
    "start": "663899",
    "end": "670140"
  },
  {
    "text": "just layer four uh if you wish to expose services that use TCP or UDP services are good uh your application is good so",
    "start": "670140",
    "end": "677279"
  },
  {
    "text": "this is where we need something like this an Ingress uh something that can",
    "start": "677279",
    "end": "682620"
  },
  {
    "text": "understand HTTP requests and can deal with it and send the request to a service and that's why we have the",
    "start": "682620",
    "end": "687839"
  },
  {
    "text": "service we have this Ingress that sits on top of service I'm sure you will know but that is what it is what we can do",
    "start": "687839",
    "end": "694680"
  },
  {
    "start": "692000",
    "end": "727000"
  },
  {
    "text": "with an Ingress is we can root traffic based on the requests that we make",
    "start": "694680",
    "end": "700380"
  },
  {
    "text": "for example in this I have this cluster with multiple applications the red the green and the yellow and",
    "start": "700380",
    "end": "706860"
  },
  {
    "text": "you can do part based routing so if somebody says example.com forward slash account send them to uh the the Reds the",
    "start": "706860",
    "end": "714899"
  },
  {
    "text": "red pods if somebody says forward slash checkout send them to the yellow pod and so this is where Ingress comes in quite",
    "start": "714899",
    "end": "721680"
  },
  {
    "text": "handy or also you can do subdomains like if you need to do domain-based routing you can do all of this so that's what an",
    "start": "721680",
    "end": "728579"
  },
  {
    "start": "727000",
    "end": "959000"
  },
  {
    "text": "Ingress is right so that's the Ingress the point of in English everybody happy so far are we are we all good okay cool",
    "start": "728579",
    "end": "735720"
  },
  {
    "text": "so so far I've shown you Ingress as just a black bar that's all it is and I'm sure",
    "start": "735720",
    "end": "742260"
  },
  {
    "text": "you already know this it turns out that an Ingress is just a deployment a",
    "start": "742260",
    "end": "747300"
  },
  {
    "text": "regular deployment of depending on the type of Ingress controller you pick there's different Ingress controllers",
    "start": "747300",
    "end": "752579"
  },
  {
    "text": "and a service usually load balancer or notebook because you know it's like external service so you can expose it",
    "start": "752579",
    "end": "758100"
  },
  {
    "text": "and in this diagram you can see that the black bar has been disappeared has disappeared and now we have this service",
    "start": "758100",
    "end": "765180"
  },
  {
    "text": "load balancer type and we have an Ingress pod in this case we have nginx you could pick any uh that you like",
    "start": "765180",
    "end": "771779"
  },
  {
    "text": "there's there's many and there's quite a few which which Ingress controller you should pick depending on what your",
    "start": "771779",
    "end": "777060"
  },
  {
    "text": "requirements are there's some there's some research out there that you can check out on learnkates.io",
    "start": "777060",
    "end": "784500"
  },
  {
    "text": "so it's basically a regular deployment and Ingress comes in two parts you have this thing called the Ingress controller",
    "start": "784500",
    "end": "790440"
  },
  {
    "text": "basically the pod that's running that understands what to do with the rules",
    "start": "790440",
    "end": "795779"
  },
  {
    "text": "that you write and the rules are those Ingress manifests that you write these yaml files right so these yaml people",
    "start": "795779",
    "end": "801660"
  },
  {
    "text": "written the singular saml file before right yeah have people written it one person has in this room I'm sure there's",
    "start": "801660",
    "end": "807120"
  },
  {
    "text": "more than one oh good good excellent people have written this right um so this is this in Ingress is writing",
    "start": "807120",
    "end": "813839"
  },
  {
    "text": "the rules of defining what should happen to the request where should it go to which service should the request go to",
    "start": "813839",
    "end": "820500"
  },
  {
    "text": "so we write this yaml file and we submit that to the kubernetes cluster the cluster takes that request and it stores",
    "start": "820500",
    "end": "826980"
  },
  {
    "text": "the information inside a net CD database and we have a couple of components and here we have a scheduler of a controller",
    "start": "826980",
    "end": "832920"
  },
  {
    "text": "manager but that information goes in and goes and goes ahead and gets stored in the hcd database that's why we store the",
    "start": "832920",
    "end": "838200"
  },
  {
    "text": "state the desired State and the current state and the controllers do the magic and make sure the the state the desired",
    "start": "838200",
    "end": "844139"
  },
  {
    "text": "state the current state always goes closer to the desired state so that's what it does but",
    "start": "844139",
    "end": "850139"
  },
  {
    "text": "when you deploy this rule the Ingress yaml file the cluster itself will the",
    "start": "850139",
    "end": "856200"
  },
  {
    "text": "the Ingress pod the controller will spin up it will get the information from the",
    "start": "856200",
    "end": "861600"
  },
  {
    "text": "Ingress because hcd and it will configure the rules so nginx config if you use nginx it will configure the",
    "start": "861600",
    "end": "867959"
  },
  {
    "text": "rules in nginx config to say if this is the the Pod you need to send the request to this service that's all it does right",
    "start": "867959",
    "end": "873600"
  },
  {
    "text": "and then it will just write or if you write another another Ingress we'll take that rule it will update its config and",
    "start": "873600",
    "end": "879600"
  },
  {
    "text": "it will understand this so here's the thing if you're running a",
    "start": "879600",
    "end": "884639"
  },
  {
    "text": "website so that's Ingress and service and that's our backstory but if you run",
    "start": "884639",
    "end": "890339"
  },
  {
    "text": "a website now we understand the request has to come from outside of the cluster so it has to go via the Ingress pod in",
    "start": "890339",
    "end": "898079"
  },
  {
    "text": "this case it's nginx if it goes by the engine export and if a lot of traffic comes in you might end up with a",
    "start": "898079",
    "end": "904260"
  },
  {
    "text": "bottleneck if you have just one replica running you might say hey uh what should happen is that if if a ton of traffic comes in",
    "start": "904260",
    "end": "911339"
  },
  {
    "text": "we should scale out you might say oh maybe I can just start with the 10 Ingress pods running at all",
    "start": "911339",
    "end": "918240"
  },
  {
    "text": "times which is fine you can do that but of course it's going to cost you money so if you want to save some money in",
    "start": "918240",
    "end": "924060"
  },
  {
    "text": "these times especially in the UK because the pound is very down we need to make sure that we can scale down when we need to",
    "start": "924060",
    "end": "931440"
  },
  {
    "text": "so what you can do as I said in Ingress the deployment is a normal deployment you can configure this if you deploy a",
    "start": "931440",
    "end": "938160"
  },
  {
    "text": "new cluster as a Helm chart or whatever it is you can configure these settings you can change these settings you can say there's there's a file in here",
    "start": "938160",
    "end": "944639"
  },
  {
    "text": "there's a line in here called replicas I can open the file change it to three replicas and submit it to the cluster",
    "start": "944639",
    "end": "950639"
  },
  {
    "text": "and I'll have three replicas but it's not very scalable it's not very",
    "start": "950639",
    "end": "956399"
  },
  {
    "text": "um you know you have to maybe you have to wake up at 2 am in the morning we need we need something good right we we",
    "start": "956399",
    "end": "961560"
  },
  {
    "start": "959000",
    "end": "1042000"
  },
  {
    "text": "don't want to wake up to him in the morning we want it to happen automatically so this is enter our",
    "start": "961560",
    "end": "966959"
  },
  {
    "text": "helper the horizontal pod Auto scaler it's a resource in kubernetes that",
    "start": "966959",
    "end": "972420"
  },
  {
    "text": "scales out the pods the vertical pod Auto scaler is different it changes the",
    "start": "972420",
    "end": "978720"
  },
  {
    "text": "CPU and memory so it can increase more CPU and memory for horizontal portal to scalar spins up more pods",
    "start": "978720",
    "end": "985740"
  },
  {
    "text": "so you can see this in this case what should happen is imagine there's a deployment for the Ingress we've",
    "start": "985740",
    "end": "991680"
  },
  {
    "text": "deployed we deployed this Ingress controller in our cluster and it's running with three replicas",
    "start": "991680",
    "end": "997680"
  },
  {
    "text": "what horizontal pod Auto scale can do is it can query some Metric let's say",
    "start": "997680",
    "end": "1002959"
  },
  {
    "text": "number of active connections inside each pod right that sounds like a reasonable reasonable metric let's say you can",
    "start": "1002959",
    "end": "1009740"
  },
  {
    "text": "query that metric and we can write a rule we can say hey if each part is has got more than 100 connections we need to",
    "start": "1009740",
    "end": "1017000"
  },
  {
    "text": "scale up reasonable request let's say then what should what horizontal plot",
    "start": "1017000",
    "end": "1022880"
  },
  {
    "text": "autoscaler do it does is it will do its calculation and if you breach the threshold it will automatically adjust",
    "start": "1022880",
    "end": "1029000"
  },
  {
    "text": "the deployment and it can you can scale up add another pod and scale back down",
    "start": "1029000",
    "end": "1034579"
  },
  {
    "text": "and remove all the pods that we that we don't need so what we want to do is Scale based on",
    "start": "1034579",
    "end": "1041418"
  },
  {
    "text": "incoming traffic with me so far everybody good",
    "start": "1041419",
    "end": "1046780"
  },
  {
    "text": "I know it's 15 minutes to lunch so we're we're on track don't worry we're on track",
    "start": "1047480",
    "end": "1053600"
  },
  {
    "text": "so what we want to do is we basically want to scale on HTTP requests coming in",
    "start": "1053600",
    "end": "1059299"
  },
  {
    "text": "basically the request is coming in but you can do it on any metric you prefer in our case we'll just do it on let's",
    "start": "1059299",
    "end": "1065299"
  },
  {
    "text": "say active connections so we first of all we need to have metrics available and we need to expose it so the",
    "start": "1065299",
    "end": "1070880"
  },
  {
    "text": "horizontal part autoscaler can take those metrics and do something with it so usually you would write in in your",
    "start": "1070880",
    "end": "1076640"
  },
  {
    "text": "application you do forward slash metrics and you can write key value pairs in there and just in your application make",
    "start": "1076640",
    "end": "1082100"
  },
  {
    "text": "it available so something like Prometheus can can scrape it but we take that metrics we need to",
    "start": "1082100",
    "end": "1088820"
  },
  {
    "text": "store those metrics because you know the requests have to come over time we need to store it just run our calculation and",
    "start": "1088820",
    "end": "1095480"
  },
  {
    "text": "then once we store it so collect and store it and then we're going to do auto scaling we have based on those metrics",
    "start": "1095480",
    "end": "1101179"
  },
  {
    "text": "we'll write some rules and we'll Auto scale and this is what you see in the demo as well so uh what we have is luckily for me it",
    "start": "1101179",
    "end": "1110120"
  },
  {
    "text": "makes the demo easier nginx provides already some metrics that's so I don't",
    "start": "1110120",
    "end": "1115340"
  },
  {
    "text": "have to write anything from scratch engine export has forward slash metrics it provides these metrics in here we can",
    "start": "1115340",
    "end": "1121580"
  },
  {
    "text": "take this metric nginx connections active so this is all the actual connections coming in that's what we're",
    "start": "1121580",
    "end": "1127580"
  },
  {
    "text": "going to take they're available but we need to scrape the metrics uh so what we can do is we",
    "start": "1127580",
    "end": "1134840"
  },
  {
    "text": "can use Prometheus people like Prometheus here anybody like Prometheus yeah we've got it's a great project right so we basically what it does is it",
    "start": "1134840",
    "end": "1143299"
  },
  {
    "text": "helps us you have something called a metrics server in kubernetes that that can that",
    "start": "1143299",
    "end": "1149780"
  },
  {
    "text": "can be that can be used to pull out the metrics from whatever resource that we want to pull out from you take that off",
    "start": "1149780",
    "end": "1155240"
  },
  {
    "text": "from cubelet and provides it to other resources like horizontal pod Auto scalar",
    "start": "1155240",
    "end": "1160400"
  },
  {
    "text": "and this is where we can use Prometheus Prometheus allows us in Prometheus we can scrape the metric and then store it",
    "start": "1160400",
    "end": "1167360"
  },
  {
    "text": "whatever we like in this case we're going to store it in something else but what we're going to use is Prometheus you don't have to use Prometheus but in",
    "start": "1167360",
    "end": "1174320"
  },
  {
    "text": "this in this one we're going to use premises and I have a cluster that's running locally which has parameters",
    "start": "1174320",
    "end": "1179660"
  },
  {
    "text": "already installed and then we're going to use this project called cada or Kita",
    "start": "1179660",
    "end": "1185900"
  },
  {
    "text": "kubernetes event Driven Auto skating have people heard or use this project oh yeah excellent we have quite a few",
    "start": "1185900",
    "end": "1192320"
  },
  {
    "text": "people so if you get stuck you can come up and you know give me a hand if the demo doesn't work but it should be good so",
    "start": "1192320",
    "end": "1198919"
  },
  {
    "text": "here's the thing we need to expose the metrics we need to store them so we can scrape it using Prometheus we",
    "start": "1198919",
    "end": "1205700"
  },
  {
    "text": "need to store the metrics and then we basically needed some kind of an adapter that can take the information and feed",
    "start": "1205700",
    "end": "1212600"
  },
  {
    "text": "it to the resource metrics so we can we can act upon that and then we need something that scales based on requests",
    "start": "1212600",
    "end": "1219260"
  },
  {
    "text": "coming in uh to coming in from from wherever they're coming in",
    "start": "1219260",
    "end": "1224419"
  },
  {
    "text": "and this is where we can use this cader kubernetes event Driven Auto scaling I'll show you in a second uh a couple of",
    "start": "1224419",
    "end": "1231080"
  },
  {
    "text": "diagrams for what it looks like it lets you basically Drive the old scaling of kubernetes based on events events that",
    "start": "1231080",
    "end": "1238220"
  },
  {
    "text": "happen inside the cluster or events that happen outside the cluster too which is",
    "start": "1238220",
    "end": "1243320"
  },
  {
    "text": "amazing if you have a bunch of requests outstanding in a Kafka queue you can scale on that so there's a bunch of",
    "start": "1243320",
    "end": "1250220"
  },
  {
    "text": "scalers that KDA already provides that we can plug into even stuff like SQL queries run SQL query if the result is",
    "start": "1250220",
    "end": "1257780"
  },
  {
    "text": "above some number do something with it so that's where we're going to use cater what we can do",
    "start": "1257780",
    "end": "1263660"
  },
  {
    "text": "is quite flexible it's open source and it drives the horizontal pod or the",
    "start": "1263660",
    "end": "1269240"
  },
  {
    "text": "scalar something needs to feed all this information to the horizontal pod Auto scaler to be able to scale it and and",
    "start": "1269240",
    "end": "1275059"
  },
  {
    "text": "that's what we're going to use Cada what is it so we have the metric server as I talked about before just briefly is",
    "start": "1275059",
    "end": "1282140"
  },
  {
    "text": "used to collect metrics from cubelet so the cubelet that's running on each node it collects metrics from there and",
    "start": "1282140",
    "end": "1287539"
  },
  {
    "text": "exposes it to the kubernetes API and it plugs into the aggregator API but what",
    "start": "1287539",
    "end": "1292640"
  },
  {
    "text": "we have is this metric server it's not enabled by default so you have to enable it but when you install with",
    "start": "1292640",
    "end": "1298400"
  },
  {
    "text": "the in Kate on the cluster it will be enabled and then we need an adapter it would you",
    "start": "1298400",
    "end": "1305480"
  },
  {
    "text": "know Prometheus adapter same Cade also provides one it can collect and serve custom metrics to an external",
    "start": "1305480",
    "end": "1313760"
  },
  {
    "text": "metrics to the horizontal portal to scaler Kayla has it and a controller that sits in the",
    "start": "1313760",
    "end": "1321500"
  },
  {
    "text": "cluster and acts upon the events so that's that's what we need so if the controller is there we're going to have",
    "start": "1321500",
    "end": "1326539"
  },
  {
    "text": "a bunch of custom resource definitions so things that with things that cater defines and I'll show you an example of",
    "start": "1326539",
    "end": "1331940"
  },
  {
    "text": "that and controller is something that extends kubernetes and does a functionality and",
    "start": "1331940",
    "end": "1338480"
  },
  {
    "text": "then we have what are called scalers we're not going to talk about them today but this is I",
    "start": "1338480",
    "end": "1343760"
  },
  {
    "text": "briefly mentioned it um you know if you for example you can based on you can Define some rules based",
    "start": "1343760",
    "end": "1349940"
  },
  {
    "text": "on requests coming in from rabbitmq you can scale out your application or there's a lot of cloud watch events like",
    "start": "1349940",
    "end": "1356780"
  },
  {
    "text": "AWS cloudwatch anything in Pub sub in the cloud provider it's very neat and it's quite easy to set up and so this is",
    "start": "1356780",
    "end": "1363620"
  },
  {
    "text": "where cada is cada comes in handy and that's what we're going to do a demo on so we have 10 minutes so a lot can go",
    "start": "1363620",
    "end": "1371780"
  },
  {
    "start": "1371000",
    "end": "1403000"
  },
  {
    "text": "wrong in 10 minutes but so there's the demo uh we're going to do live if it fails",
    "start": "1371780",
    "end": "1377000"
  },
  {
    "text": "I have a video as well but we'll Pretender was live if it if it failed but I'm sure it'll work so you can if",
    "start": "1377000",
    "end": "1383000"
  },
  {
    "text": "you want to check out Danny Elliot wrote the blog for this bit.ly forward slash kcd scaling and it runs on minicube you",
    "start": "1383000",
    "end": "1389299"
  },
  {
    "text": "can run it yourself or you can run in any cluster you like um so that's that's where that's where",
    "start": "1389299",
    "end": "1394720"
  },
  {
    "text": "explanation and and the code and everything is there so definitely check that out so what what I got which I'll",
    "start": "1394720",
    "end": "1401000"
  },
  {
    "text": "show you in a minute is a mini Cube cluster is running I've installed Ingress nginx Ingress on it already",
    "start": "1401000",
    "end": "1407419"
  },
  {
    "start": "1403000",
    "end": "1442000"
  },
  {
    "text": "because I do not trust the internet during demos so it's already running and I've also installed Prometheus and cada",
    "start": "1407419",
    "end": "1414380"
  },
  {
    "text": "I've used hum for it but you can install however you like it's just one command",
    "start": "1414380",
    "end": "1419480"
  },
  {
    "text": "line spins up the pods I'll show you the pods in a second and then what we need to do is we need to have a way of",
    "start": "1419480",
    "end": "1425659"
  },
  {
    "text": "generating some load right because otherwise you'll think I'm making it up so we're going to use a locust it's an",
    "start": "1425659",
    "end": "1431960"
  },
  {
    "text": "open source project to just generate some load and hopefully if everything works we should see scaling Auto scaling",
    "start": "1431960",
    "end": "1439580"
  },
  {
    "text": "Ingress so are we ready for the demo less mirror",
    "start": "1439580",
    "end": "1446020"
  },
  {
    "start": "1442000",
    "end": "1809000"
  },
  {
    "text": "we'll give it a second for it to pop up all right we're cool here so here's a few things",
    "start": "1448220",
    "end": "1454100"
  },
  {
    "text": "that we got which I'll put actually put in around",
    "start": "1454100",
    "end": "1459200"
  },
  {
    "text": "so this is all real uh there is a deployment file I've deployed uh Stefan's pod info pod I'm sure you've",
    "start": "1459200",
    "end": "1467419"
  },
  {
    "text": "seen this it's running and everything is running locally at uh I trust internet but not during demos so",
    "start": "1467419",
    "end": "1473419"
  },
  {
    "text": "everything is running locally so that's the pod that's running it has a service of course as well",
    "start": "1473419",
    "end": "1479179"
  },
  {
    "text": "support and a service I don't know if it's big enough but let me is that is that good",
    "start": "1479179",
    "end": "1484940"
  },
  {
    "text": "reasonable size cool so we have service and a pod that's already deployed and we",
    "start": "1484940",
    "end": "1490340"
  },
  {
    "text": "have an Ingress and in Ingress you can see there's a there's a bit of a the rule here example that goes to example",
    "start": "1490340",
    "end": "1496039"
  },
  {
    "text": "if if the request is for example.com send it to the Pod info service so I'm",
    "start": "1496039",
    "end": "1501620"
  },
  {
    "text": "not making any of this up because if I can do a clear k get pods you can see in",
    "start": "1501620",
    "end": "1509240"
  },
  {
    "text": "a second there's some some stuff running so we have um we have our deployment",
    "start": "1509240",
    "end": "1514460"
  },
  {
    "text": "here the podium for deployment we have kader I've also installed K down here the operator is running and we got a",
    "start": "1514460",
    "end": "1519860"
  },
  {
    "text": "bunch of crds to go with it and we have uh pod info sorry we have nginx Ingress running and",
    "start": "1519860",
    "end": "1527419"
  },
  {
    "text": "we've got some of the Prometheus stuff I know no kubernetes demo is complete without running Cube CT or get pods so I",
    "start": "1527419",
    "end": "1534440"
  },
  {
    "text": "just want to get that out of the way so that's done now we can we don't have to look at this instead of me showing you",
    "start": "1534440",
    "end": "1539720"
  },
  {
    "text": "lines we have a dashboard here right so these are all the pods that running in the cluster uh let me see if I can zoom",
    "start": "1539720",
    "end": "1546260"
  },
  {
    "text": "in these are all the pauses running in a cluster it's not uh it's not a photo it's an actual like dashboard and we",
    "start": "1546260",
    "end": "1553880"
  },
  {
    "text": "have one nginx uh pod running so that's all good I'm going to put that to the side",
    "start": "1553880",
    "end": "1559220"
  },
  {
    "text": "uh and we're gonna step onto here and Prometheus is also running we've got",
    "start": "1559220",
    "end": "1566539"
  },
  {
    "text": "five minutes which is good but that's all we need and let me just quickly zoom out for a sec if I execute this this is",
    "start": "1566539",
    "end": "1573260"
  },
  {
    "text": "nginx ingress active connections basically what we're talking about you can't see this is quite small but there's only one request because there's",
    "start": "1573260",
    "end": "1579919"
  },
  {
    "text": "only one request that that was running and then what I've also deployed is Locust and Locust is an open source",
    "start": "1579919",
    "end": "1587600"
  },
  {
    "text": "project let's just open this and all it has got is got its own deployment but in here you can define a config map and a",
    "start": "1587600",
    "end": "1594440"
  },
  {
    "text": "config map we're defining you have this Locust file dot py that's written in Python but you can give it a task and",
    "start": "1594440",
    "end": "1600740"
  },
  {
    "text": "all this is doing is allowing me to send requests to example.com that's all it's doing I want to send request to",
    "start": "1600740",
    "end": "1605900"
  },
  {
    "text": "example.com and because it's Locust I can do a bunch of things I can give the",
    "start": "1605900",
    "end": "1611059"
  },
  {
    "text": "host I need to send the request to how many users I want to send per second and what's the what's the so what we can do",
    "start": "1611059",
    "end": "1617659"
  },
  {
    "text": "is we can start swarming The Host we can start sending requests let's hit on the chart uh uh I don't know if it's",
    "start": "1617659",
    "end": "1625159"
  },
  {
    "text": "uh let's just do this is this is that stuff",
    "start": "1625159",
    "end": "1631640"
  },
  {
    "text": "there's some something's about to go wrong bound to go wrong but let's go there you go charts",
    "start": "1631640",
    "end": "1639400"
  },
  {
    "text": "okay so let's go hundreds what was it which is going to stick here and also",
    "start": "1640159",
    "end": "1645500"
  },
  {
    "text": "what we have is uh",
    "start": "1645500",
    "end": "1650620"
  },
  {
    "text": "let's go with that I think I need this nginx Ingress",
    "start": "1651140",
    "end": "1658299"
  },
  {
    "text": "and spawn concurrency is 10.",
    "start": "1659480",
    "end": "1664419"
  },
  {
    "text": "so it should start sending requests right so we start started started sending requests and I should see some",
    "start": "1665600",
    "end": "1672440"
  },
  {
    "text": "other quests go up on here in a second we'll have more requests for Ingress active connections outstanding so if I",
    "start": "1672440",
    "end": "1680419"
  },
  {
    "text": "just quickly do a refresh here sometimes it will come up in a second so",
    "start": "1680419",
    "end": "1685700"
  },
  {
    "text": "basically what we've got is number of users are increasing our requests are going in and the response time will keep",
    "start": "1685700",
    "end": "1691159"
  },
  {
    "text": "going up but what we need is to scale up so for that we have to Define this code",
    "start": "1691159",
    "end": "1696679"
  },
  {
    "text": "something called the scaled object which is a crd and in here I'm saying what kind of deployment I want to Target the",
    "start": "1696679",
    "end": "1702860"
  },
  {
    "text": "main nginx Ingress deployment and I just Define how many replicas I need and",
    "start": "1702860",
    "end": "1708080"
  },
  {
    "text": "we're Gathering metrics from from Prometheus because that's that's where it's scraping it from this is the one",
    "start": "1708080",
    "end": "1714559"
  },
  {
    "text": "I'm looking for the metrics that's the name and the query is this all we're saying is if the nginx Ingress",
    "start": "1714559",
    "end": "1721100"
  },
  {
    "text": "connections active is more than 100 so that's the threshold do your scaling do your thing",
    "start": "1721100",
    "end": "1727220"
  },
  {
    "text": "so uh let's just see if I can execute this you can see in here it's a very",
    "start": "1727220",
    "end": "1732740"
  },
  {
    "text": "faint line on on the edge there but there's there's a number of uh requests",
    "start": "1732740",
    "end": "1737960"
  },
  {
    "text": "there going in there's only one now we're going to focus on this part here what we'll do is deploy the scaled",
    "start": "1737960",
    "end": "1743419"
  },
  {
    "text": "object and we should see a number of nginx PODS increase if it does go wild if it doesn't still go wild",
    "start": "1743419",
    "end": "1750559"
  },
  {
    "text": "Let's uh let's let's do this we're gonna do a minus F4 we'll apply the scaled",
    "start": "1750559",
    "end": "1757220"
  },
  {
    "text": "object and what this will do is okay that's created and what this will do is we'll",
    "start": "1757220",
    "end": "1763760"
  },
  {
    "text": "you look at the metrics and it will start increasing uh okay get deployed",
    "start": "1763760",
    "end": "1769100"
  },
  {
    "text": "let's just do that it should eventually start increasing the number of pods",
    "start": "1769100",
    "end": "1775100"
  },
  {
    "text": "let's just make sure there you go the pods have started to spin up and it will",
    "start": "1775100",
    "end": "1780440"
  },
  {
    "text": "spin up based on the request that we said right so no yeah we've got it working we got there",
    "start": "1780440",
    "end": "1787820"
  },
  {
    "text": "so this is as you can see now on here the total number of requests are going",
    "start": "1787820",
    "end": "1792980"
  },
  {
    "text": "down because we scaled up based on the request but based on the based on an event and if I keep this running uh once all",
    "start": "1792980",
    "end": "1799940"
  },
  {
    "text": "the traffic's served it'll scale back down that's where the scaled object is and you can do this for not only Ingress you can do this for any any workload",
    "start": "1799940",
    "end": "1806960"
  },
  {
    "text": "that you might need so uh I'm just going to do one last thing",
    "start": "1806960",
    "end": "1813260"
  },
  {
    "start": "1809000",
    "end": "2064000"
  },
  {
    "text": "if you if you want to let's just hop back on this okay",
    "start": "1813260",
    "end": "1818720"
  },
  {
    "text": "where's my point uh let's go in here all right let's go",
    "start": "1818720",
    "end": "1824299"
  },
  {
    "text": "so that's what you saw you saw us gather some metrics and we just talked about Services ingresses then we expose some",
    "start": "1824299",
    "end": "1831500"
  },
  {
    "text": "metrics and we gather them we kubernetes doesn't do this by default there's a lot of work we have to do to get all of this",
    "start": "1831500",
    "end": "1837679"
  },
  {
    "text": "running and you saw that if you want to try it try it out as I said it already is a Blog for this bit.ly forward slash",
    "start": "1837679",
    "end": "1845240"
  },
  {
    "text": "kcd scaling check out learnkates.io we do we have some awesome blogs in kubernetes and we do some training as",
    "start": "1845240",
    "end": "1852380"
  },
  {
    "text": "well to check that out also check out appear.io if you have any questions or anything like that I am downstairs all",
    "start": "1852380",
    "end": "1857539"
  },
  {
    "text": "day this is our booth in one of the areas come and grab me let me know if the if it was useful or not um if you",
    "start": "1857539",
    "end": "1864200"
  },
  {
    "text": "want to stay in touch with me my name is Salman Iqbal you can find me on Twitter at soulman or also YouTube apart from",
    "start": "1864200",
    "end": "1869659"
  },
  {
    "text": "that thank you so much have a great day and a great conference [Applause]",
    "start": "1869659",
    "end": "1878360"
  },
  {
    "text": "thank you Salman uh that was uh pretty pretty intense very good the demo guards",
    "start": "1878360",
    "end": "1883820"
  },
  {
    "text": "have been listening to you while I was watching Salman I I started thinking uh",
    "start": "1883820",
    "end": "1888980"
  },
  {
    "text": "of an experience I had uh excuse me excuse me people that are leaving the room one thing there is a workshop going",
    "start": "1888980",
    "end": "1896480"
  },
  {
    "text": "on please go outside through and to left to the",
    "start": "1896480",
    "end": "1901520"
  },
  {
    "text": "sponsor area lunch is going to be in the sponsor area served and lightning talks",
    "start": "1901520",
    "end": "1907039"
  },
  {
    "text": "in the workshop area so back to us what I was what I was thinking is I always",
    "start": "1907039",
    "end": "1913100"
  },
  {
    "text": "thought I am very intelligent guy and above average certainly the average in",
    "start": "1913100",
    "end": "1918980"
  },
  {
    "text": "this room but I I I realized it wasn't the case where",
    "start": "1918980",
    "end": "1926000"
  },
  {
    "text": "to uh went to a when I had to Marshall uh yamo into go anybody knows what I'm",
    "start": "1926000",
    "end": "1932960"
  },
  {
    "text": "talking about yeah yeah did you did you hate your very existence when that",
    "start": "1932960",
    "end": "1938299"
  },
  {
    "text": "happens yeah there are line true true there are",
    "start": "1938299",
    "end": "1943820"
  },
  {
    "text": "online too so that's what I thought I thought why shouldn't it be an online tool so I went the stupid way that's",
    "start": "1943820",
    "end": "1949039"
  },
  {
    "text": "when I realized that I'm I'm not above average quite below and I wrote my old my my very own tool to Marshall",
    "start": "1949039",
    "end": "1956000"
  },
  {
    "text": "two days later the color mindset but I use this one online tool and yeah you're not very kind",
    "start": "1956000",
    "end": "1962320"
  },
  {
    "text": "so anyway thank you very much it was very good thank you and what I would",
    "start": "1962320",
    "end": "1967940"
  },
  {
    "text": "like to invite you again guys please let the workshop guys go on",
    "start": "1967940",
    "end": "1972980"
  },
  {
    "text": "go through the smoking area outside grab a smoke if you like or don't and",
    "start": "1972980",
    "end": "1979580"
  },
  {
    "text": "then you go through the sponsor area there you can grab your lunch is going to be served we're going to be having",
    "start": "1979580",
    "end": "1985940"
  },
  {
    "text": "the lightning talks in the workshop area and I'm gonna see you here at quarter to",
    "start": "1985940",
    "end": "1992899"
  },
  {
    "text": "two at 1 45 with uh Robin sickman from ING thank you very much",
    "start": "1992899",
    "end": "1998780"
  },
  {
    "text": "[Applause]",
    "start": "1998780",
    "end": "2002549"
  },
  {
    "text": "can you please give us the screen for a moment we want to test one laptop",
    "start": "2041220",
    "end": "2047640"
  }
]