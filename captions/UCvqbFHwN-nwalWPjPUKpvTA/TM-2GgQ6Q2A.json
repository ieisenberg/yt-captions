[
  {
    "text": "okay so uh hello I'm Ross and this is",
    "start": "30",
    "end": "4170"
  },
  {
    "text": "Taryn and we're here to talk to you",
    "start": "4170",
    "end": "6629"
  },
  {
    "text": "about writing your own controllers and",
    "start": "6629",
    "end": "8970"
  },
  {
    "text": "extending your kubernetes cluster so",
    "start": "8970",
    "end": "11730"
  },
  {
    "text": "yeah",
    "start": "11730",
    "end": "13219"
  },
  {
    "text": "that's our Twitter if you want to follow",
    "start": "13219",
    "end": "15540"
  },
  {
    "text": "us later we'll link these slides and the",
    "start": "15540",
    "end": "18270"
  },
  {
    "text": "example code that we publish so yeah",
    "start": "18270",
    "end": "24119"
  },
  {
    "text": "first we need to talk about kubernetes a",
    "start": "24119",
    "end": "26189"
  },
  {
    "text": "cobbler before kubernetes we have a",
    "start": "26189",
    "end": "29939"
  },
  {
    "text": "bunch of ways of managing processes and",
    "start": "29939",
    "end": "34170"
  },
  {
    "text": "configuration and business code review",
    "start": "34170",
    "end": "37050"
  },
  {
    "text": "comments or on developer laptops and",
    "start": "37050",
    "end": "39809"
  },
  {
    "text": "developers don't seem to like having",
    "start": "39809",
    "end": "41250"
  },
  {
    "text": "their laptops go to production and email",
    "start": "41250",
    "end": "43379"
  },
  {
    "text": "change in pieces we kind of wanted to",
    "start": "43379",
    "end": "46230"
  },
  {
    "text": "consolidate all of these into one source",
    "start": "46230",
    "end": "48539"
  },
  {
    "text": "of truth which we think we can do with",
    "start": "48539",
    "end": "50340"
  },
  {
    "text": "kubernetes and kind of all these things",
    "start": "50340",
    "end": "56039"
  },
  {
    "text": "together is Slough cohesion everything",
    "start": "56039",
    "end": "58949"
  },
  {
    "text": "was spread across multiple things and",
    "start": "58949",
    "end": "60210"
  },
  {
    "text": "highly coupling so you needed to know",
    "start": "60210",
    "end": "62100"
  },
  {
    "text": "about the configuration that was in all",
    "start": "62100",
    "end": "64559"
  },
  {
    "text": "the different places to understand what",
    "start": "64559",
    "end": "65970"
  },
  {
    "text": "the system was doing so we want to keep",
    "start": "65970",
    "end": "69540"
  },
  {
    "text": "it simple we want to automate the",
    "start": "69540",
    "end": "70920"
  },
  {
    "text": "processes as much as possible abstract",
    "start": "70920",
    "end": "72930"
  },
  {
    "text": "implementations so move the",
    "start": "72930",
    "end": "75720"
  },
  {
    "text": "decision-making away from developer",
    "start": "75720",
    "end": "77670"
  },
  {
    "text": "teams to the teams that are control of",
    "start": "77670",
    "end": "79409"
  },
  {
    "text": "infrastructure and remove duplicate",
    "start": "79409",
    "end": "81780"
  },
  {
    "text": "state so that it's easy to understand",
    "start": "81780",
    "end": "83310"
  },
  {
    "text": "what's going on in the system and",
    "start": "83310",
    "end": "88560"
  },
  {
    "text": "another thing that's kind of different",
    "start": "88560",
    "end": "89759"
  },
  {
    "text": "than many communities clusters that we",
    "start": "89759",
    "end": "91590"
  },
  {
    "text": "talk to people here at coop Carnivale is",
    "start": "91590",
    "end": "93150"
  },
  {
    "text": "we run all of our own physical",
    "start": "93150",
    "end": "94259"
  },
  {
    "text": "infrastructure so we're doing kubernetes",
    "start": "94259",
    "end": "97470"
  },
  {
    "text": "in the salt way it's pretty much our",
    "start": "97470",
    "end": "99450"
  },
  {
    "text": "only option there's no G cloud salt",
    "start": "99450",
    "end": "102659"
  },
  {
    "text": "start kubernetes and so since we don't",
    "start": "102659",
    "end": "107549"
  },
  {
    "text": "have a child provider we need to bridge",
    "start": "107549",
    "end": "112530"
  },
  {
    "text": "the gap between what kubernetes expects",
    "start": "112530",
    "end": "115530"
  },
  {
    "text": "the cloud provider to provide and what",
    "start": "115530",
    "end": "117000"
  },
  {
    "text": "we have on bare metal so we've built a",
    "start": "117000",
    "end": "120299"
  },
  {
    "text": "couple different services there's no",
    "start": "120299",
    "end": "123000"
  },
  {
    "text": "cloud load balancer without the cloud as",
    "start": "123000",
    "end": "125520"
  },
  {
    "text": "we bought Leifer which is a load",
    "start": "125520",
    "end": "127740"
  },
  {
    "text": "balancer for about bare metal hardware",
    "start": "127740",
    "end": "133590"
  },
  {
    "text": "at a much slower rate than what you can",
    "start": "133590",
    "end": "135810"
  },
  {
    "text": "do in the cloud also we built pile Iowa",
    "start": "135810",
    "end": "138390"
  },
  {
    "text": "to automate user control and namespace",
    "start": "138390",
    "end": "140519"
  },
  {
    "text": "creation in our back so that we can",
    "start": "140519",
    "end": "142950"
  },
  {
    "text": "share Asuma cluster across teams and",
    "start": "142950",
    "end": "145040"
  },
  {
    "text": "projects and we already have an existing",
    "start": "145040",
    "end": "148709"
  },
  {
    "text": "Paloma triometrics platform for our",
    "start": "148709",
    "end": "152610"
  },
  {
    "text": "previous system and also our edge",
    "start": "152610",
    "end": "153959"
  },
  {
    "text": "network so we've built a rule loader as",
    "start": "153959",
    "end": "156930"
  },
  {
    "text": "a controller to configure Prometheus to",
    "start": "156930",
    "end": "159750"
  },
  {
    "text": "report to the current an existing 20",
    "start": "159750",
    "end": "162239"
  },
  {
    "text": "pipeline so you can't believe it's not",
    "start": "162239",
    "end": "166709"
  },
  {
    "text": "server this some guy I've never heard so",
    "start": "166709",
    "end": "171360"
  },
  {
    "text": "to fully appreciate the service movement",
    "start": "171360",
    "end": "173430"
  },
  {
    "text": "functions as a service more specifically",
    "start": "173430",
    "end": "177209"
  },
  {
    "text": "I had to first understand the role",
    "start": "177209",
    "end": "178620"
  },
  {
    "text": "event-driven architecture of play in",
    "start": "178620",
    "end": "180569"
  },
  {
    "text": "modern day computing it's not just IOT",
    "start": "180569",
    "end": "182810"
  },
  {
    "text": "that kind of brings us to what this",
    "start": "182810",
    "end": "184769"
  },
  {
    "text": "presentation is about which is",
    "start": "184769",
    "end": "185879"
  },
  {
    "text": "controllers they're pretty much",
    "start": "185879",
    "end": "188090"
  },
  {
    "text": "event-driven",
    "start": "188090",
    "end": "189739"
  },
  {
    "text": "responses to things that kubernetes",
    "start": "189739",
    "end": "192480"
  },
  {
    "text": "doing so that you can extend your",
    "start": "192480",
    "end": "195180"
  },
  {
    "text": "kubernetes cluster in an automated",
    "start": "195180",
    "end": "198060"
  },
  {
    "text": "fashion so our example problem we as",
    "start": "198060",
    "end": "203310"
  },
  {
    "text": "we've mentioned what a namespace for",
    "start": "203310",
    "end": "204359"
  },
  {
    "text": "every developer and the communities",
    "start": "204359",
    "end": "205889"
  },
  {
    "text": "cluster there's a couple ways that we",
    "start": "205889",
    "end": "208049"
  },
  {
    "text": "can implement this I'll type kubernetes",
    "start": "208049",
    "end": "209639"
  },
  {
    "text": "we can have IT provision namespace when",
    "start": "209639",
    "end": "213209"
  },
  {
    "text": "people start we can have people file",
    "start": "213209",
    "end": "215310"
  },
  {
    "text": "tickets when they first start in the",
    "start": "215310",
    "end": "216780"
  },
  {
    "text": "first week they love creating tickets it",
    "start": "216780",
    "end": "218519"
  },
  {
    "text": "turns out or we can write a standalone",
    "start": "218519",
    "end": "220650"
  },
  {
    "text": "service for them to talk to and then",
    "start": "220650",
    "end": "223470"
  },
  {
    "text": "that will prevent provision name stays",
    "start": "223470",
    "end": "225840"
  },
  {
    "text": "for them or we can write a controller",
    "start": "225840",
    "end": "228120"
  },
  {
    "text": "that can do that automatically based on",
    "start": "228120",
    "end": "230099"
  },
  {
    "text": "logging into kubernetes cluster and so",
    "start": "230099",
    "end": "233819"
  },
  {
    "text": "that's what we decided built with within",
    "start": "233819",
    "end": "236190"
  },
  {
    "text": "PI life so there's a four steps to",
    "start": "236190",
    "end": "239700"
  },
  {
    "text": "writing controller the first step is",
    "start": "239700",
    "end": "242040"
  },
  {
    "text": "defined CR d2 is actually generate the",
    "start": "242040",
    "end": "245790"
  },
  {
    "text": "client code so you can work with it",
    "start": "245790",
    "end": "248630"
  },
  {
    "text": "threes listen to events and Forests",
    "start": "248630",
    "end": "251370"
  },
  {
    "text": "handle events in the queue so talking",
    "start": "251370",
    "end": "254130"
  },
  {
    "text": "about the first one",
    "start": "254130",
    "end": "254880"
  },
  {
    "text": "creating custom resource it's",
    "start": "254880",
    "end": "258209"
  },
  {
    "text": "unfortunately kind of small but fairly",
    "start": "258209",
    "end": "261450"
  },
  {
    "text": "simple yeah most structure",
    "start": "261450",
    "end": "263570"
  },
  {
    "text": "that defines a new festive resource or",
    "start": "263570",
    "end": "268820"
  },
  {
    "text": "third-party resource and you can also",
    "start": "268820",
    "end": "272050"
  },
  {
    "text": "automatically on admission make sure",
    "start": "272050",
    "end": "275840"
  },
  {
    "text": "that this matches the schema if you want",
    "start": "275840",
    "end": "278060"
  },
  {
    "text": "DeFede to find one for code generation",
    "start": "278060",
    "end": "282290"
  },
  {
    "text": "converter you ships with a coach in tool",
    "start": "282290",
    "end": "284860"
  },
  {
    "text": "that helps them build the client code",
    "start": "284860",
    "end": "287180"
  },
  {
    "text": "and farmers listeners and automatic deep",
    "start": "287180",
    "end": "290720"
  },
  {
    "text": "copping support so that you can easily",
    "start": "290720",
    "end": "293150"
  },
  {
    "text": "change these objects without changing",
    "start": "293150",
    "end": "296480"
  },
  {
    "text": "all our presentations of them and so",
    "start": "296480",
    "end": "299630"
  },
  {
    "text": "here we have an example type a user type",
    "start": "299630",
    "end": "302660"
  },
  {
    "text": "which embeds a user spec type we've",
    "start": "302660",
    "end": "305150"
  },
  {
    "text": "added some comments in the go code but",
    "start": "305150",
    "end": "307160"
  },
  {
    "text": "tell the code generation tool how to",
    "start": "307160",
    "end": "310040"
  },
  {
    "text": "generate the code then you can depend on",
    "start": "310040",
    "end": "314300"
  },
  {
    "text": "the code gin tool in your favorite",
    "start": "314300",
    "end": "316010"
  },
  {
    "text": "package manager for go and then you once",
    "start": "316010",
    "end": "320240"
  },
  {
    "text": "you there's a script that can set that",
    "start": "320240",
    "end": "323030"
  },
  {
    "text": "all up and run it and we'll actually to",
    "start": "323030",
    "end": "324290"
  },
  {
    "text": "write the generator code for you and",
    "start": "324290",
    "end": "329630"
  },
  {
    "text": "that pretty much we take types if that",
    "start": "329630",
    "end": "332630"
  },
  {
    "text": "turns it into types and Zizi generated",
    "start": "332630",
    "end": "335030"
  },
  {
    "text": "deep copy and similar things for",
    "start": "335030",
    "end": "338900"
  },
  {
    "text": "Lister's and Informer's so the next part",
    "start": "338900",
    "end": "347210"
  },
  {
    "text": "about writing a controller is hooking up",
    "start": "347210",
    "end": "349730"
  },
  {
    "text": "your business logic to events that are",
    "start": "349730",
    "end": "353090"
  },
  {
    "text": "happening in the cluster and one of the",
    "start": "353090",
    "end": "355790"
  },
  {
    "text": "things that we realized after we had",
    "start": "355790",
    "end": "357290"
  },
  {
    "text": "finished writing these these four or",
    "start": "357290",
    "end": "359390"
  },
  {
    "text": "five extensive x/y a different services",
    "start": "359390",
    "end": "365330"
  },
  {
    "text": "that extend our kubernetes cluster was",
    "start": "365330",
    "end": "366890"
  },
  {
    "text": "that we really didn't write that much",
    "start": "366890",
    "end": "370190"
  },
  {
    "text": "code that wasn't related to the business",
    "start": "370190",
    "end": "372080"
  },
  {
    "text": "logic and it came up that we might",
    "start": "372080",
    "end": "374600"
  },
  {
    "text": "actually be able to fit all of the code",
    "start": "374600",
    "end": "376160"
  },
  {
    "text": "that we wrote that wasn't business logic",
    "start": "376160",
    "end": "377690"
  },
  {
    "text": "into a presentation so that's not going",
    "start": "377690",
    "end": "380270"
  },
  {
    "text": "to try and do here to show you how",
    "start": "380270",
    "end": "382370"
  },
  {
    "text": "simple it is to actually like write to",
    "start": "382370",
    "end": "384860"
  },
  {
    "text": "just focus on your business logic",
    "start": "384860",
    "end": "387460"
  },
  {
    "text": "because it's not actually service but it",
    "start": "387460",
    "end": "391130"
  },
  {
    "text": "is very it feels very server list",
    "start": "391130",
    "end": "394650"
  },
  {
    "text": "so the first thing first bits of code",
    "start": "394650",
    "end": "398190"
  },
  {
    "text": "that we need to write ourselves are",
    "start": "398190",
    "end": "399810"
  },
  {
    "text": "hooking up into the event framework for",
    "start": "399810",
    "end": "403320"
  },
  {
    "text": "kubernetes and there's a ton of stuff",
    "start": "403320",
    "end": "404820"
  },
  {
    "text": "that's already written for this one of",
    "start": "404820",
    "end": "408090"
  },
  {
    "text": "the first things is informers so there's",
    "start": "408090",
    "end": "412260"
  },
  {
    "text": "a concept of informers that's written in",
    "start": "412260",
    "end": "415020"
  },
  {
    "text": "the client go big shout out to all the",
    "start": "415020",
    "end": "417150"
  },
  {
    "text": "people that work on the API machinery",
    "start": "417150",
    "end": "419310"
  },
  {
    "text": "because this is awesome and it makes",
    "start": "419310",
    "end": "420930"
  },
  {
    "text": "your life so much easier",
    "start": "420930",
    "end": "422820"
  },
  {
    "text": "these Informer's lets you react to",
    "start": "422820",
    "end": "427020"
  },
  {
    "text": "changes in resources in the communities",
    "start": "427020",
    "end": "429479"
  },
  {
    "text": "cluster they've reduced the burden on",
    "start": "429479",
    "end": "432300"
  },
  {
    "text": "the API server by removing all the",
    "start": "432300",
    "end": "435510"
  },
  {
    "text": "polling essentially and they also do",
    "start": "435510",
    "end": "438930"
  },
  {
    "text": "another nice thing which is populate a",
    "start": "438930",
    "end": "440669"
  },
  {
    "text": "read-only cache so whenever you need to",
    "start": "440669",
    "end": "442830"
  },
  {
    "text": "read a resource from the API server you",
    "start": "442830",
    "end": "445050"
  },
  {
    "text": "don't incur a round-trip to the API",
    "start": "445050",
    "end": "447330"
  },
  {
    "text": "server you essentially just read it from",
    "start": "447330",
    "end": "450389"
  },
  {
    "text": "the cache that was populated efficiently",
    "start": "450389",
    "end": "452340"
  },
  {
    "text": "by the watch mechanism so then the the",
    "start": "452340",
    "end": "457950"
  },
  {
    "text": "next part in your arsenal is a Lister",
    "start": "457950",
    "end": "460229"
  },
  {
    "text": "this is the read-only cache that is",
    "start": "460229",
    "end": "462810"
  },
  {
    "text": "populated by the informer so this is one",
    "start": "462810",
    "end": "466410"
  },
  {
    "text": "of the tools to reduce the burden on the",
    "start": "466410",
    "end": "468090"
  },
  {
    "text": "API server so that your kubernetes",
    "start": "468090",
    "end": "470460"
  },
  {
    "text": "administrator it doesn't tell you know",
    "start": "470460",
    "end": "472260"
  },
  {
    "text": "you have to shut that off and the last",
    "start": "472260",
    "end": "477030"
  },
  {
    "text": "bit that we found to be super useful was",
    "start": "477030",
    "end": "480150"
  },
  {
    "text": "actually the the work use they're a",
    "start": "480150",
    "end": "482850"
  },
  {
    "text": "really simple and straightforward",
    "start": "482850",
    "end": "485039"
  },
  {
    "text": "interface to implementing a asynchronous",
    "start": "485039",
    "end": "489450"
  },
  {
    "text": "queue and some of the big selling points",
    "start": "489450",
    "end": "493740"
  },
  {
    "text": "is that these queues are stingy which",
    "start": "493740",
    "end": "496500"
  },
  {
    "text": "means that they if you add a single item",
    "start": "496500",
    "end": "500250"
  },
  {
    "text": "twice to the queue it will only be",
    "start": "500250",
    "end": "501870"
  },
  {
    "text": "processed once and then they are fair",
    "start": "501870",
    "end": "506010"
  },
  {
    "text": "which means that items are processed in",
    "start": "506010",
    "end": "508800"
  },
  {
    "text": "the order which they're added and then",
    "start": "508800",
    "end": "510450"
  },
  {
    "text": "they support multiple consumers and",
    "start": "510450",
    "end": "512640"
  },
  {
    "text": "producers so you can it allow us a item",
    "start": "512640",
    "end": "517080"
  },
  {
    "text": "to be recued while something is",
    "start": "517080",
    "end": "520050"
  },
  {
    "text": "currently processing the item so that's",
    "start": "520050",
    "end": "523320"
  },
  {
    "text": "really super useful for handling",
    "start": "523320",
    "end": "525880"
  },
  {
    "text": "errors which we'll see in a few slides",
    "start": "525880",
    "end": "528149"
  },
  {
    "text": "so the first question that you well that",
    "start": "528149",
    "end": "532690"
  },
  {
    "text": "usually comes up is what to actually put",
    "start": "532690",
    "end": "534910"
  },
  {
    "text": "on the cue it it's a really free form",
    "start": "534910",
    "end": "538259"
  },
  {
    "text": "but we do have some guidelines for this",
    "start": "538259",
    "end": "540670"
  },
  {
    "text": "we've tried it a couple of different",
    "start": "540670",
    "end": "542500"
  },
  {
    "text": "ways and this seems to be the best way",
    "start": "542500",
    "end": "544870"
  },
  {
    "text": "is the cues use go go map equivalents to",
    "start": "544870",
    "end": "553540"
  },
  {
    "text": "actually determine whether or not an",
    "start": "553540",
    "end": "555250"
  },
  {
    "text": "item is match matches to an item that's",
    "start": "555250",
    "end": "557680"
  },
  {
    "text": "already in the queue so keep it as",
    "start": "557680",
    "end": "559839"
  },
  {
    "text": "simple as possible and the simplest key",
    "start": "559839",
    "end": "563350"
  },
  {
    "text": "that we've been able to find that works",
    "start": "563350",
    "end": "565060"
  },
  {
    "text": "reliably is actually just a metadata",
    "start": "565060",
    "end": "568720"
  },
  {
    "text": "that name",
    "start": "568720",
    "end": "569949"
  },
  {
    "text": "we've tried other things like the UID",
    "start": "569949",
    "end": "572860"
  },
  {
    "text": "the revision and UID but really those",
    "start": "572860",
    "end": "577600"
  },
  {
    "text": "don't they kind of throw away a lot of",
    "start": "577600",
    "end": "579519"
  },
  {
    "text": "the guarantees of the cue",
    "start": "579519",
    "end": "581050"
  },
  {
    "text": "it won't stop you from doing this but",
    "start": "581050",
    "end": "583120"
  },
  {
    "text": "just try not to because the cues work",
    "start": "583120",
    "end": "585339"
  },
  {
    "text": "way better when you're using something",
    "start": "585339",
    "end": "587649"
  },
  {
    "text": "that doesn't change every time you try",
    "start": "587649",
    "end": "591069"
  },
  {
    "text": "and process a an item so here's the",
    "start": "591069",
    "end": "595180"
  },
  {
    "text": "first bit of code so in this code",
    "start": "595180",
    "end": "598149"
  },
  {
    "text": "example we we set up a cue this is a",
    "start": "598149",
    "end": "602290"
  },
  {
    "text": "rate limiting cue and we set up an",
    "start": "602290",
    "end": "606220"
  },
  {
    "text": "informer so the cue there for processing",
    "start": "606220",
    "end": "609970"
  },
  {
    "text": "events the informer is there for for",
    "start": "609970",
    "end": "613300"
  },
  {
    "text": "getting updates so it's really simple",
    "start": "613300",
    "end": "616389"
  },
  {
    "text": "these two lights essentially get you set",
    "start": "616389",
    "end": "618970"
  },
  {
    "text": "up watching kubernetes resources and",
    "start": "618970",
    "end": "621910"
  },
  {
    "text": "then this function that we have defined",
    "start": "621910",
    "end": "623709"
  },
  {
    "text": "below in cue user this is really all it",
    "start": "623709",
    "end": "627189"
  },
  {
    "text": "takes to take an event from a user and",
    "start": "627189",
    "end": "630850"
  },
  {
    "text": "actually just put it into the queue so",
    "start": "630850",
    "end": "632829"
  },
  {
    "text": "this cache delete yeah",
    "start": "632829",
    "end": "636040"
  },
  {
    "text": "delete handling meta name space key func",
    "start": "636040",
    "end": "638319"
  },
  {
    "text": "a really long name all that does is if",
    "start": "638319",
    "end": "642970"
  },
  {
    "text": "an object is deleted in the time since",
    "start": "642970",
    "end": "647139"
  },
  {
    "text": "the last sync period and you didn't see",
    "start": "647139",
    "end": "650350"
  },
  {
    "text": "the deletion for whatever reason due to",
    "start": "650350",
    "end": "652720"
  },
  {
    "text": "a network failure or something like that",
    "start": "652720",
    "end": "655059"
  },
  {
    "text": "you look at the object tombstone",
    "start": "655059",
    "end": "657030"
  },
  {
    "text": "- instead of an actual object and this",
    "start": "657030",
    "end": "660330"
  },
  {
    "text": "function just unpacks the object",
    "start": "660330",
    "end": "663300"
  },
  {
    "text": "tombstone for you and extracts the name",
    "start": "663300",
    "end": "665910"
  },
  {
    "text": "for you and by default it assumes that",
    "start": "665910",
    "end": "669660"
  },
  {
    "text": "the key that you want is just the name",
    "start": "669660",
    "end": "672170"
  },
  {
    "text": "so once you get the key back you just do",
    "start": "672170",
    "end": "676470"
  },
  {
    "text": "Q add and it's off to be processed so we",
    "start": "676470",
    "end": "684330"
  },
  {
    "text": "have to hook up the informer and that",
    "start": "684330",
    "end": "686010"
  },
  {
    "text": "function that we just showed so it's",
    "start": "686010",
    "end": "689280"
  },
  {
    "text": "really simple to do and in forward",
    "start": "689280",
    "end": "691290"
  },
  {
    "text": "produces three types of events creation",
    "start": "691290",
    "end": "693930"
  },
  {
    "text": "update and delete and one of the weird",
    "start": "693930",
    "end": "698070"
  },
  {
    "text": "things here is that we handle all of",
    "start": "698070",
    "end": "699840"
  },
  {
    "text": "these things the same way so we found",
    "start": "699840",
    "end": "703470"
  },
  {
    "text": "this to be actually really kind of",
    "start": "703470",
    "end": "706200"
  },
  {
    "text": "empowering it makes your function on",
    "start": "706200",
    "end": "710430"
  },
  {
    "text": "that function",
    "start": "710430",
    "end": "711480"
  },
  {
    "text": "it makes writing the code later on way",
    "start": "711480",
    "end": "713580"
  },
  {
    "text": "easier and it means that you have way",
    "start": "713580",
    "end": "716190"
  },
  {
    "text": "less code paths to worry about so every",
    "start": "716190",
    "end": "718560"
  },
  {
    "text": "time we see a creation updation or",
    "start": "718560",
    "end": "722040"
  },
  {
    "text": "deletion for an event we always just add",
    "start": "722040",
    "end": "724980"
  },
  {
    "text": "it to the queue to be processed and we",
    "start": "724980",
    "end": "727830"
  },
  {
    "text": "handle the difference between deletion",
    "start": "727830",
    "end": "729810"
  },
  {
    "text": "and yeah the difference between deletion",
    "start": "729810",
    "end": "734160"
  },
  {
    "text": "and creation or update separately and we",
    "start": "734160",
    "end": "737640"
  },
  {
    "text": "found that to be like way more reliable",
    "start": "737640",
    "end": "739230"
  },
  {
    "text": "than actually being present for the",
    "start": "739230",
    "end": "741420"
  },
  {
    "text": "delete so in this case you can see that",
    "start": "741420",
    "end": "745260"
  },
  {
    "text": "we always just call the same user func",
    "start": "745260",
    "end": "747990"
  },
  {
    "text": "and queue user function from before and",
    "start": "747990",
    "end": "751230"
  },
  {
    "text": "that just takes the queue and the object",
    "start": "751230",
    "end": "753780"
  },
  {
    "text": "that was just operated on so the next",
    "start": "753780",
    "end": "758940"
  },
  {
    "text": "thing now that we're watching our actual",
    "start": "758940",
    "end": "761940"
  },
  {
    "text": "user objects so yeah now that we're",
    "start": "761940",
    "end": "766620"
  },
  {
    "text": "actually watching the user CRD that we",
    "start": "766620",
    "end": "768720"
  },
  {
    "text": "had before we actually want to watch our",
    "start": "768720",
    "end": "772620"
  },
  {
    "text": "children so one of the things that we",
    "start": "772620",
    "end": "774630"
  },
  {
    "text": "found well that was confusing was that",
    "start": "774630",
    "end": "777350"
  },
  {
    "text": "you might have processed the initial",
    "start": "777350",
    "end": "780360"
  },
  {
    "text": "creation of a user properly where you've",
    "start": "780360",
    "end": "783240"
  },
  {
    "text": "mapped the user to a namespace and it",
    "start": "783240",
    "end": "785190"
  },
  {
    "text": "appears but then if someone with",
    "start": "785190",
    "end": "786540"
  },
  {
    "text": "permissions to goes and deletes the",
    "start": "786540",
    "end": "788490"
  },
  {
    "text": "namespace it may take",
    "start": "788490",
    "end": "791130"
  },
  {
    "text": "well up to your resync period before the",
    "start": "791130",
    "end": "794370"
  },
  {
    "text": "namespace comes back and that was",
    "start": "794370",
    "end": "796950"
  },
  {
    "text": "confusing and a little bit strange to",
    "start": "796950",
    "end": "800040"
  },
  {
    "text": "users so the way that we've gotten",
    "start": "800040",
    "end": "803460"
  },
  {
    "text": "around this is by triggering updates",
    "start": "803460",
    "end": "806940"
  },
  {
    "text": "reprocessing the user every time one of",
    "start": "806940",
    "end": "809610"
  },
  {
    "text": "the children is updated as well so",
    "start": "809610",
    "end": "811770"
  },
  {
    "text": "kubernetes has a metadata owner",
    "start": "811770",
    "end": "815250"
  },
  {
    "text": "references filled in every object and",
    "start": "815250",
    "end": "818070"
  },
  {
    "text": "this is essentially just a list of every",
    "start": "818070",
    "end": "820470"
  },
  {
    "text": "kubernetes object or ya object that can",
    "start": "820470",
    "end": "823860"
  },
  {
    "text": "is considered to be a parent of the",
    "start": "823860",
    "end": "826140"
  },
  {
    "text": "other object so in the kubernetes",
    "start": "826140",
    "end": "828480"
  },
  {
    "text": "namespace we set the owner references to",
    "start": "828480",
    "end": "831300"
  },
  {
    "text": "be the user and then what we do is we",
    "start": "831300",
    "end": "836100"
  },
  {
    "text": "just watch for events on all the",
    "start": "836100",
    "end": "838200"
  },
  {
    "text": "namespaces and if that namespace has an",
    "start": "838200",
    "end": "840750"
  },
  {
    "text": "owner reference to a user we add that",
    "start": "840750",
    "end": "843240"
  },
  {
    "text": "user to the queue so that means that if",
    "start": "843240",
    "end": "848040"
  },
  {
    "text": "someone deletes or mucks around with a",
    "start": "848040",
    "end": "850399"
  },
  {
    "text": "namespace that's owned by one of our",
    "start": "850399",
    "end": "852899"
  },
  {
    "text": "things we have the chance to immediately",
    "start": "852899",
    "end": "855420"
  },
  {
    "text": "go back out and fix it and make sure",
    "start": "855420",
    "end": "857100"
  },
  {
    "text": "that it's not broken so that's the input",
    "start": "857100",
    "end": "860010"
  },
  {
    "text": "side of the queue for listening for",
    "start": "860010",
    "end": "863010"
  },
  {
    "text": "events from both the parent and the",
    "start": "863010",
    "end": "866370"
  },
  {
    "text": "child in this relationship and we're",
    "start": "866370",
    "end": "869880"
  },
  {
    "text": "adding the item to the queue based on",
    "start": "869880",
    "end": "873089"
  },
  {
    "text": "the name of the parent and now we",
    "start": "873089",
    "end": "877050"
  },
  {
    "text": "actually need to go out and edit or",
    "start": "877050",
    "end": "879000"
  },
  {
    "text": "actually go out and do the work so we",
    "start": "879000",
    "end": "882779"
  },
  {
    "text": "have we use a pattern here of worker go",
    "start": "882779",
    "end": "886560"
  },
  {
    "text": "routines so we can process multiple",
    "start": "886560",
    "end": "889560"
  },
  {
    "text": "items in the same time",
    "start": "889560",
    "end": "890580"
  },
  {
    "text": "so what each worker go routine does is",
    "start": "890580",
    "end": "893459"
  },
  {
    "text": "it just sits in a loop of popping items",
    "start": "893459",
    "end": "896040"
  },
  {
    "text": "off of the queue and then calling a work",
    "start": "896040",
    "end": "898290"
  },
  {
    "text": "function and it one of the things that",
    "start": "898290",
    "end": "901079"
  },
  {
    "text": "it does is it'll never block forever on",
    "start": "901079",
    "end": "904050"
  },
  {
    "text": "one item because if you take forever on",
    "start": "904050",
    "end": "906950"
  },
  {
    "text": "ten items or so and you only have ten go",
    "start": "906950",
    "end": "910350"
  },
  {
    "text": "routines and you stop processing good",
    "start": "910350",
    "end": "911850"
  },
  {
    "text": "items so we make a point of avoiding",
    "start": "911850",
    "end": "915990"
  },
  {
    "text": "that situation altogether by timing out",
    "start": "915990",
    "end": "918630"
  },
  {
    "text": "work functions so then a work function",
    "start": "918630",
    "end": "921720"
  },
  {
    "text": "in this model it needs to",
    "start": "921720",
    "end": "924540"
  },
  {
    "text": "handle deletion since we didn't do that",
    "start": "924540",
    "end": "926640"
  },
  {
    "text": "earlier and it also needs to be Adam",
    "start": "926640",
    "end": "928770"
  },
  {
    "text": "potent because since we watch our",
    "start": "928770",
    "end": "932700"
  },
  {
    "text": "children resources if there's a",
    "start": "932700",
    "end": "935580"
  },
  {
    "text": "potential for a loop here if you update",
    "start": "935580",
    "end": "938520"
  },
  {
    "text": "the child and then add go back to",
    "start": "938520",
    "end": "942450"
  },
  {
    "text": "processing the item again and then",
    "start": "942450",
    "end": "944820"
  },
  {
    "text": "update the child again and then go back",
    "start": "944820",
    "end": "946380"
  },
  {
    "text": "to processing the item again it'll never",
    "start": "946380",
    "end": "948180"
  },
  {
    "text": "end so it's really important that if",
    "start": "948180",
    "end": "951660"
  },
  {
    "text": "there's no work to be done the work",
    "start": "951660",
    "end": "953400"
  },
  {
    "text": "function doesn't do any work which is",
    "start": "953400",
    "end": "956540"
  },
  {
    "text": "easy it's potentially problematic",
    "start": "956540",
    "end": "960240"
  },
  {
    "text": "sometimes so the first part we have here",
    "start": "960240",
    "end": "964530"
  },
  {
    "text": "is this process for Chrome this is",
    "start": "964530",
    "end": "966540"
  },
  {
    "text": "essentially the same thing across every",
    "start": "966540",
    "end": "968250"
  },
  {
    "text": "single one of these that we've written",
    "start": "968250",
    "end": "971960"
  },
  {
    "text": "should open source this it is a function",
    "start": "971960",
    "end": "976860"
  },
  {
    "text": "which you call once and it processes an",
    "start": "976860",
    "end": "980280"
  },
  {
    "text": "item from the queue if it returns true",
    "start": "980280",
    "end": "983040"
  },
  {
    "text": "then you call it again if it returns",
    "start": "983040",
    "end": "985650"
  },
  {
    "text": "false you don't call it again so you",
    "start": "985650",
    "end": "988110"
  },
  {
    "text": "just do for process work item and sit",
    "start": "988110",
    "end": "991590"
  },
  {
    "text": "forever in your girl routine but this",
    "start": "991590",
    "end": "994500"
  },
  {
    "text": "function it does a little bit of work it",
    "start": "994500",
    "end": "998010"
  },
  {
    "text": "the first thing it does is it gets the",
    "start": "998010",
    "end": "999690"
  },
  {
    "text": "item from the queue and when you get an",
    "start": "999690",
    "end": "1002150"
  },
  {
    "text": "item from the queue you get both the key",
    "start": "1002150",
    "end": "1004250"
  },
  {
    "text": "and a indication of whether or not the",
    "start": "1004250",
    "end": "1008120"
  },
  {
    "text": "queue is shutting down so if the queue",
    "start": "1008120",
    "end": "1010490"
  },
  {
    "text": "is shutting down then we just don't do",
    "start": "1010490",
    "end": "1012500"
  },
  {
    "text": "anything here and return false this",
    "start": "1012500",
    "end": "1015260"
  },
  {
    "text": "means that this go routine will exit so",
    "start": "1015260",
    "end": "1019270"
  },
  {
    "text": "your controller when it's told to exit",
    "start": "1019270",
    "end": "1022220"
  },
  {
    "text": "exits cleanly and doesn't need",
    "start": "1022220",
    "end": "1024290"
  },
  {
    "text": "kubernetes to like say kill it",
    "start": "1024290",
    "end": "1025939"
  },
  {
    "text": "it's important and then the next thing",
    "start": "1025940",
    "end": "1029000"
  },
  {
    "text": "that it does is it defers queue done and",
    "start": "1029000",
    "end": "1031850"
  },
  {
    "text": "this essentially just tells the queue",
    "start": "1031850",
    "end": "1034040"
  },
  {
    "text": "that we are done processing the item and",
    "start": "1034040",
    "end": "1037550"
  },
  {
    "text": "that it can put it back into the queue",
    "start": "1037550",
    "end": "1040370"
  },
  {
    "text": "in a way where other processing items",
    "start": "1040370",
    "end": "1043550"
  },
  {
    "text": "can or other processors can operate on",
    "start": "1043550",
    "end": "1046250"
  },
  {
    "text": "that item so no matter what what no",
    "start": "1046250",
    "end": "1049790"
  },
  {
    "text": "matter whether it's a success or a",
    "start": "1049790",
    "end": "1051020"
  },
  {
    "text": "failure",
    "start": "1051020",
    "end": "1051410"
  },
  {
    "text": "you still need to indicate that you're",
    "start": "1051410",
    "end": "1053960"
  },
  {
    "text": "done and then",
    "start": "1053960",
    "end": "1056260"
  },
  {
    "text": "the next important bit is this we call",
    "start": "1056260",
    "end": "1059830"
  },
  {
    "text": "the work function here so remember it's",
    "start": "1059830",
    "end": "1062470"
  },
  {
    "text": "idempotent and it handles deletes so",
    "start": "1062470",
    "end": "1064809"
  },
  {
    "text": "really it's really simple in this sort",
    "start": "1064809",
    "end": "1067149"
  },
  {
    "text": "of go routine code all you do is call",
    "start": "1067149",
    "end": "1070539"
  },
  {
    "text": "the work function and return an error",
    "start": "1070539",
    "end": "1073020"
  },
  {
    "text": "capture the air if there's an error well",
    "start": "1073020",
    "end": "1075909"
  },
  {
    "text": "then we didn't succeed so we need to add",
    "start": "1075909",
    "end": "1079750"
  },
  {
    "text": "the Q back or add the item back to the Q",
    "start": "1079750",
    "end": "1082450"
  },
  {
    "text": "at a later time and the actual the work",
    "start": "1082450",
    "end": "1085870"
  },
  {
    "text": "queue functions do this for you they",
    "start": "1085870",
    "end": "1088090"
  },
  {
    "text": "have this ad rate limited key which will",
    "start": "1088090",
    "end": "1091360"
  },
  {
    "text": "mean that your you won't sit in the hot",
    "start": "1091360",
    "end": "1094750"
  },
  {
    "text": "loop trying something that's family and",
    "start": "1094750",
    "end": "1096669"
  },
  {
    "text": "over and over and over again it'll it'll",
    "start": "1096669",
    "end": "1099070"
  },
  {
    "text": "essentially back off up to a certain",
    "start": "1099070",
    "end": "1102580"
  },
  {
    "text": "point and you can tweak the settings",
    "start": "1102580",
    "end": "1103690"
  },
  {
    "text": "here we just used the default so this",
    "start": "1103690",
    "end": "1105880"
  },
  {
    "text": "seemed to work pretty well so if you",
    "start": "1105880",
    "end": "1108130"
  },
  {
    "text": "have an error though or if you don't",
    "start": "1108130",
    "end": "1110860"
  },
  {
    "text": "have an error you have to tell the Q",
    "start": "1110860",
    "end": "1112840"
  },
  {
    "text": "that it was successful so you do Q dot",
    "start": "1112840",
    "end": "1115210"
  },
  {
    "text": "forget and that means that the Q if it",
    "start": "1115210",
    "end": "1118090"
  },
  {
    "text": "hasn't already been re adding well just",
    "start": "1118090",
    "end": "1120159"
  },
  {
    "text": "forget that the item was in the queue in",
    "start": "1120159",
    "end": "1121630"
  },
  {
    "text": "the first place when you call done so in",
    "start": "1121630",
    "end": "1125049"
  },
  {
    "text": "the happy path you have to call Q dot",
    "start": "1125049",
    "end": "1127120"
  },
  {
    "text": "forget it doesn't seem it's a weird",
    "start": "1127120",
    "end": "1129309"
  },
  {
    "text": "function name but it's absolutely",
    "start": "1129309",
    "end": "1131919"
  },
  {
    "text": "required so that those slides of code",
    "start": "1131919",
    "end": "1137559"
  },
  {
    "text": "that's pretty much it you those are",
    "start": "1137559",
    "end": "1140260"
  },
  {
    "text": "really only the only functions and the",
    "start": "1140260",
    "end": "1143919"
  },
  {
    "text": "only code that you need to write that",
    "start": "1143919",
    "end": "1145419"
  },
  {
    "text": "isn't business logic code it was kind of",
    "start": "1145419",
    "end": "1148870"
  },
  {
    "text": "really surprising to us that we were",
    "start": "1148870",
    "end": "1151179"
  },
  {
    "text": "able to write so little code and",
    "start": "1151179",
    "end": "1154419"
  },
  {
    "text": "essentially have like event-driven",
    "start": "1154419",
    "end": "1158500"
  },
  {
    "text": "code that's resilient that handles",
    "start": "1158500",
    "end": "1161020"
  },
  {
    "text": "failures and that is fast and doesn't",
    "start": "1161020",
    "end": "1164350"
  },
  {
    "text": "use a poly mechanism so but there are a",
    "start": "1164350",
    "end": "1168220"
  },
  {
    "text": "few more tips and tricks for this so one",
    "start": "1168220",
    "end": "1172570"
  },
  {
    "text": "of the things that you may have noticed",
    "start": "1172570",
    "end": "1174250"
  },
  {
    "text": "is that I never actually handled an",
    "start": "1174250",
    "end": "1176080"
  },
  {
    "text": "error in those codes in that code and",
    "start": "1176080",
    "end": "1180130"
  },
  {
    "text": "that doesn't just extend to the the",
    "start": "1180130",
    "end": "1184360"
  },
  {
    "text": "generic code that actually extends into",
    "start": "1184360",
    "end": "1189179"
  },
  {
    "text": "the actual work function so one of the",
    "start": "1189300",
    "end": "1192610"
  },
  {
    "text": "things that we we we started out doing",
    "start": "1192610",
    "end": "1194590"
  },
  {
    "text": "was handling our errors in retrying and",
    "start": "1194590",
    "end": "1197550"
  },
  {
    "text": "trying to do all this fancy like diff",
    "start": "1197550",
    "end": "1200170"
  },
  {
    "text": "and fetch the object again and make sure",
    "start": "1200170",
    "end": "1202630"
  },
  {
    "text": "that you have the proper revision and",
    "start": "1202630",
    "end": "1204910"
  },
  {
    "text": "then we just decided to you know what",
    "start": "1204910",
    "end": "1206650"
  },
  {
    "text": "let's not even worry about it if we get",
    "start": "1206650",
    "end": "1208690"
  },
  {
    "text": "an error anytime just return it you",
    "start": "1208690",
    "end": "1212380"
  },
  {
    "text": "don't panic and you don't make sure that",
    "start": "1212380",
    "end": "1215230"
  },
  {
    "text": "you catch the air but just return it and",
    "start": "1215230",
    "end": "1218920"
  },
  {
    "text": "let the queue retry them so it's",
    "start": "1218920",
    "end": "1221950"
  },
  {
    "text": "actually really incredible it makes all",
    "start": "1221950",
    "end": "1225190"
  },
  {
    "text": "of our if statements for errors really",
    "start": "1225190",
    "end": "1227080"
  },
  {
    "text": "simple on one line also reduces like",
    "start": "1227080",
    "end": "1230610"
  },
  {
    "text": "dramatically there's like three or four",
    "start": "1230610",
    "end": "1232450"
  },
  {
    "text": "times reduction in code size by just not",
    "start": "1232450",
    "end": "1235030"
  },
  {
    "text": "handling the errors and just letting the",
    "start": "1235030",
    "end": "1238780"
  },
  {
    "text": "cute retry them so another thing that we",
    "start": "1238780",
    "end": "1242530"
  },
  {
    "text": "struggled on for a little while which I",
    "start": "1242530",
    "end": "1245980"
  },
  {
    "text": "would like to hopefully help you avoid",
    "start": "1245980",
    "end": "1248200"
  },
  {
    "text": "is handling deletes essentially don't if",
    "start": "1248200",
    "end": "1252940"
  },
  {
    "text": "you don't have to so if you have the two",
    "start": "1252940",
    "end": "1256810"
  },
  {
    "text": "questions that I ask whenever we're",
    "start": "1256810",
    "end": "1259150"
  },
  {
    "text": "writing a new controller is do you have",
    "start": "1259150",
    "end": "1261880"
  },
  {
    "text": "external state and do you need to",
    "start": "1261880",
    "end": "1265090"
  },
  {
    "text": "guarantee that you witness a deletion",
    "start": "1265090",
    "end": "1266680"
  },
  {
    "text": "like are you keeping track of a state",
    "start": "1266680",
    "end": "1270850"
  },
  {
    "text": "really just two ways of asking the same",
    "start": "1270850",
    "end": "1272740"
  },
  {
    "text": "question sometimes you get different",
    "start": "1272740",
    "end": "1274090"
  },
  {
    "text": "answers though so if you have well I",
    "start": "1274090",
    "end": "1279640"
  },
  {
    "text": "guess don't handle onto the differently",
    "start": "1279640",
    "end": "1282730"
  },
  {
    "text": "which is the first part so if you handle",
    "start": "1282730",
    "end": "1286000"
  },
  {
    "text": "on delete code differently you're",
    "start": "1286000",
    "end": "1288040"
  },
  {
    "text": "essentially duplicating your deletion",
    "start": "1288040",
    "end": "1289900"
  },
  {
    "text": "code in two different places because",
    "start": "1289900",
    "end": "1293520"
  },
  {
    "text": "it's still possible that even if you've",
    "start": "1293520",
    "end": "1297190"
  },
  {
    "text": "received an update or create or a",
    "start": "1297190",
    "end": "1299020"
  },
  {
    "text": "refresh that by the time you go to",
    "start": "1299020",
    "end": "1301030"
  },
  {
    "text": "process it the thing will have been",
    "start": "1301030",
    "end": "1302590"
  },
  {
    "text": "deleted so you're going to have to",
    "start": "1302590",
    "end": "1304300"
  },
  {
    "text": "handle the deletion in the worker code",
    "start": "1304300",
    "end": "1305830"
  },
  {
    "text": "anyway so just skip that whole thing and",
    "start": "1305830",
    "end": "1308380"
  },
  {
    "text": "then check in your worker code to be to",
    "start": "1308380",
    "end": "1312910"
  },
  {
    "text": "see if the deletion is necessary if you",
    "start": "1312910",
    "end": "1316660"
  },
  {
    "text": "need to handle deletes if you don't need",
    "start": "1316660",
    "end": "1319210"
  },
  {
    "text": "to handle the leads then just use the",
    "start": "1319210",
    "end": "1321730"
  },
  {
    "text": "curve",
    "start": "1321730",
    "end": "1322029"
  },
  {
    "text": "garbage collection so earlier we said",
    "start": "1322029",
    "end": "1326499"
  },
  {
    "text": "talked about building the parent-child",
    "start": "1326499",
    "end": "1328149"
  },
  {
    "text": "relationship if you've done this you",
    "start": "1328149",
    "end": "1330279"
  },
  {
    "text": "essentially get garbage collection for",
    "start": "1330279",
    "end": "1331869"
  },
  {
    "text": "free the garbage collector will delete",
    "start": "1331869",
    "end": "1335019"
  },
  {
    "text": "objects that once had an owner but no",
    "start": "1335019",
    "end": "1336940"
  },
  {
    "text": "longer have an owner so if you've set up",
    "start": "1336940",
    "end": "1339700"
  },
  {
    "text": "that owner relationship to your parent",
    "start": "1339700",
    "end": "1343149"
  },
  {
    "text": "resource then when the parent resource",
    "start": "1343149",
    "end": "1345700"
  },
  {
    "text": "is deleted which is when you would be",
    "start": "1345700",
    "end": "1347379"
  },
  {
    "text": "handling the delete kubernetes will go",
    "start": "1347379",
    "end": "1350379"
  },
  {
    "text": "around and delete any child resources",
    "start": "1350379",
    "end": "1355539"
  },
  {
    "text": "for you so this way you don't actually",
    "start": "1355539",
    "end": "1357249"
  },
  {
    "text": "have to write any code at all",
    "start": "1357249",
    "end": "1358749"
  },
  {
    "text": "two-handled leash and kubernetes will do",
    "start": "1358749",
    "end": "1360820"
  },
  {
    "text": "it for you",
    "start": "1360820",
    "end": "1361359"
  },
  {
    "text": "so no code is best I think you've all",
    "start": "1361359",
    "end": "1364989"
  },
  {
    "text": "seen Kelsey Hightower's",
    "start": "1364989",
    "end": "1367979"
  },
  {
    "text": "framework no code is definitely better",
    "start": "1367979",
    "end": "1371139"
  },
  {
    "text": "than code so it's essentially free but",
    "start": "1371139",
    "end": "1375789"
  },
  {
    "text": "unfortunately if you answered yes to",
    "start": "1375789",
    "end": "1377710"
  },
  {
    "text": "either those questions you should use",
    "start": "1377710",
    "end": "1380440"
  },
  {
    "text": "finalizes for deletion so what this",
    "start": "1380440",
    "end": "1384820"
  },
  {
    "text": "means is that you don't rely on watching",
    "start": "1384820",
    "end": "1388119"
  },
  {
    "text": "or being present at the time that the",
    "start": "1388119",
    "end": "1390759"
  },
  {
    "text": "deletion event is fired because you",
    "start": "1390759",
    "end": "1392589"
  },
  {
    "text": "might miss that and instead you use a",
    "start": "1392589",
    "end": "1396210"
  },
  {
    "text": "finalizar list which is present in any",
    "start": "1396210",
    "end": "1398619"
  },
  {
    "text": "kubernetes object that uses them API",
    "start": "1398619",
    "end": "1401679"
  },
  {
    "text": "metadata so in reality what a finalizar",
    "start": "1401679",
    "end": "1407559"
  },
  {
    "text": "does is that when you delete a resource",
    "start": "1407559",
    "end": "1410009"
  },
  {
    "text": "kubernetes sets the object as having a",
    "start": "1410009",
    "end": "1413649"
  },
  {
    "text": "deletion timestamp and then will prevent",
    "start": "1413649",
    "end": "1416830"
  },
  {
    "text": "any other things from actually updating",
    "start": "1416830",
    "end": "1419169"
  },
  {
    "text": "the object and adding more finalizes to",
    "start": "1419169",
    "end": "1422799"
  },
  {
    "text": "the list and then once the list of",
    "start": "1422799",
    "end": "1425259"
  },
  {
    "text": "finalize errs is empty the resource will",
    "start": "1425259",
    "end": "1429009"
  },
  {
    "text": "be removed from the cluster",
    "start": "1429009",
    "end": "1430679"
  },
  {
    "text": "automatically so yes this is the same",
    "start": "1430679",
    "end": "1436659"
  },
  {
    "text": "thing that I just said waits for each",
    "start": "1436659",
    "end": "1439570"
  },
  {
    "text": "final order to complete before removing",
    "start": "1439570",
    "end": "1441820"
  },
  {
    "text": "the resource so this way you don't have",
    "start": "1441820",
    "end": "1443200"
  },
  {
    "text": "to be present for the deletion to",
    "start": "1443200",
    "end": "1444969"
  },
  {
    "text": "actually go out and clean up your",
    "start": "1444969",
    "end": "1446679"
  },
  {
    "text": "external state you can tell curb",
    "start": "1446679",
    "end": "1448779"
  },
  {
    "text": "entities to wait for you to be done this",
    "start": "1448779",
    "end": "1451809"
  },
  {
    "text": "means that you can run you can handle",
    "start": "1451809",
    "end": "1455019"
  },
  {
    "text": "restarts",
    "start": "1455019",
    "end": "1455900"
  },
  {
    "text": "without worrying about missing the",
    "start": "1455900",
    "end": "1457400"
  },
  {
    "text": "delete because if your service starts",
    "start": "1457400",
    "end": "1459980"
  },
  {
    "text": "back up in time then you can still",
    "start": "1459980",
    "end": "1461900"
  },
  {
    "text": "process the delete even if you weren't",
    "start": "1461900",
    "end": "1463520"
  },
  {
    "text": "running at the time that someone deleted",
    "start": "1463520",
    "end": "1465350"
  },
  {
    "text": "the parent resource so this is an",
    "start": "1465350",
    "end": "1469160"
  },
  {
    "text": "example of the worker function we have a",
    "start": "1469160",
    "end": "1471410"
  },
  {
    "text": "whole bunch of arguments here because",
    "start": "1471410",
    "end": "1473210"
  },
  {
    "text": "these are the things that we interact",
    "start": "1473210",
    "end": "1475100"
  },
  {
    "text": "with but essentially if we have what we",
    "start": "1475100",
    "end": "1481160"
  },
  {
    "text": "do is we have essentially an if",
    "start": "1481160",
    "end": "1483080"
  },
  {
    "text": "statement is one of the first things in",
    "start": "1483080",
    "end": "1484760"
  },
  {
    "text": "this worker function that checks to see",
    "start": "1484760",
    "end": "1487220"
  },
  {
    "text": "if the deletion timestamp is zero and if",
    "start": "1487220",
    "end": "1491170"
  },
  {
    "text": "the finalize errs list has our finalizar",
    "start": "1491170",
    "end": "1495140"
  },
  {
    "text": "on it so if that's true that means that",
    "start": "1495140",
    "end": "1497540"
  },
  {
    "text": "the object is deleted and we haven't yet",
    "start": "1497540",
    "end": "1499370"
  },
  {
    "text": "done the work that we need to do so we",
    "start": "1499370",
    "end": "1502700"
  },
  {
    "text": "need to handle the delete so this is",
    "start": "1502700",
    "end": "1506059"
  },
  {
    "text": "different from depending on whatever",
    "start": "1506059",
    "end": "1508010"
  },
  {
    "text": "your business's needs are so I don't",
    "start": "1508010",
    "end": "1510980"
  },
  {
    "text": "have any code here for it but at the end",
    "start": "1510980",
    "end": "1513170"
  },
  {
    "text": "what you do is you need to remove",
    "start": "1513170",
    "end": "1515600"
  },
  {
    "text": "example.com from your or whatever your",
    "start": "1515600",
    "end": "1518570"
  },
  {
    "text": "finalized name is called from the list",
    "start": "1518570",
    "end": "1520730"
  },
  {
    "text": "of finalized errs and then return if",
    "start": "1520730",
    "end": "1523990"
  },
  {
    "text": "neither of these are true that means you",
    "start": "1523990",
    "end": "1527120"
  },
  {
    "text": "have nothing to do either the object",
    "start": "1527120",
    "end": "1528760"
  },
  {
    "text": "well",
    "start": "1528760",
    "end": "1530030"
  },
  {
    "text": "yeah isn't if neither of them are true",
    "start": "1530030",
    "end": "1533300"
  },
  {
    "text": "then you just continue on with the happy",
    "start": "1533300",
    "end": "1535250"
  },
  {
    "text": "path of actually creating and updating",
    "start": "1535250",
    "end": "1537440"
  },
  {
    "text": "the resource and then yeah actually",
    "start": "1537440",
    "end": "1545390"
  },
  {
    "text": "doing the work so thank you this is",
    "start": "1545390",
    "end": "1548929"
  },
  {
    "text": "actually all that we have does anyone",
    "start": "1548929",
    "end": "1551660"
  },
  {
    "text": "have any questions yes in the front down",
    "start": "1551660",
    "end": "1558620"
  },
  {
    "text": "in front",
    "start": "1558620",
    "end": "1560840"
  },
  {
    "text": "okay the question was tell us more about",
    "start": "1560840",
    "end": "1563519"
  },
  {
    "text": "Leifer okay so Leifer is our since we",
    "start": "1563519",
    "end": "1567450"
  },
  {
    "text": "run on bare metal",
    "start": "1567450",
    "end": "1568679"
  },
  {
    "text": "we have no cloud load balancer so Leifer",
    "start": "1568679",
    "end": "1573090"
  },
  {
    "text": "is our approach at doing load balance or",
    "start": "1573090",
    "end": "1575309"
  },
  {
    "text": "service IPS and it works it's very",
    "start": "1575309",
    "end": "1578909"
  },
  {
    "text": "similar to metal lb from google except",
    "start": "1578909",
    "end": "1582149"
  },
  {
    "text": "for it makes no sort of assumptions at",
    "start": "1582149",
    "end": "1585360"
  },
  {
    "text": "all about your networking environment",
    "start": "1585360",
    "end": "1587279"
  },
  {
    "text": "and it you can plug it into whatever you",
    "start": "1587279",
    "end": "1591450"
  },
  {
    "text": "want if you have like a network team",
    "start": "1591450",
    "end": "1593399"
  },
  {
    "text": "that wants to own the network then you",
    "start": "1593399",
    "end": "1594990"
  },
  {
    "text": "can just let them configure it but it'll",
    "start": "1594990",
    "end": "1597840"
  },
  {
    "text": "do the kubernetes side of load balance",
    "start": "1597840",
    "end": "1600690"
  },
  {
    "text": "or IP so it should work really well with",
    "start": "1600690",
    "end": "1602730"
  },
  {
    "text": "mini cube and we're kind of working",
    "start": "1602730",
    "end": "1604950"
  },
  {
    "text": "right now and making it available to",
    "start": "1604950",
    "end": "1607559"
  },
  {
    "text": "people outside of clouds are so high a",
    "start": "1607559",
    "end": "1618120"
  },
  {
    "text": "nice talk do fine lines exist for things",
    "start": "1618120",
    "end": "1622200"
  },
  {
    "text": "that I created so far knob typing crated",
    "start": "1622200",
    "end": "1624899"
  },
  {
    "text": "and set of things that are being looted",
    "start": "1624899",
    "end": "1626929"
  },
  {
    "text": "to finalizar yes so as not as I guess",
    "start": "1626929",
    "end": "1630980"
  },
  {
    "text": "for what sorry",
    "start": "1630980",
    "end": "1632760"
  },
  {
    "text": "it started rather than finalizes",
    "start": "1632760",
    "end": "1634350"
  },
  {
    "text": "finalizes is about term yes they do and",
    "start": "1634350",
    "end": "1637409"
  },
  {
    "text": "they're called initializers okay yes so",
    "start": "1637409",
    "end": "1641120"
  },
  {
    "text": "there are yeah they have some fun quirks",
    "start": "1641120",
    "end": "1644399"
  },
  {
    "text": "but they are there one of the things to",
    "start": "1644399",
    "end": "1647340"
  },
  {
    "text": "be to be worried for the file with an",
    "start": "1647340",
    "end": "1649710"
  },
  {
    "text": "initializer is that you can't delete an",
    "start": "1649710",
    "end": "1651600"
  },
  {
    "text": "object that hasn't finished to no",
    "start": "1651600",
    "end": "1653519"
  },
  {
    "text": "civilization yeah which is confusing a",
    "start": "1653519",
    "end": "1658889"
  },
  {
    "text": "little bit but yes they do exist",
    "start": "1658889",
    "end": "1662010"
  },
  {
    "text": "I think they've existed for longer than",
    "start": "1662010",
    "end": "1663809"
  },
  {
    "text": "finalized use even it's awesome funny",
    "start": "1663809",
    "end": "1667638"
  },
  {
    "text": "any other questions oh so I'm being told",
    "start": "1670159",
    "end": "1674820"
  },
  {
    "text": "we have t-shirts if you want a cloth or",
    "start": "1674820",
    "end": "1677039"
  },
  {
    "text": "a t-shirt",
    "start": "1677039",
    "end": "1677700"
  },
  {
    "text": "they're down in the front in boxes free",
    "start": "1677700",
    "end": "1683870"
  },
  {
    "text": "all right thank you",
    "start": "1684270",
    "end": "1688320"
  }
]