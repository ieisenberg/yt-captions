[
  {
    "start": "0",
    "end": "48000"
  },
  {
    "text": "hi I'm James 1 and from Spotify and I'll be talking about making an internal",
    "start": "50",
    "end": "6480"
  },
  {
    "text": "communities offering generally available so we're currently in the process of migrating our runtime over to kubernetes",
    "start": "6480",
    "end": "13620"
  },
  {
    "text": "it's modify and it only took about two years to go from just two developers",
    "start": "13620",
    "end": "19490"
  },
  {
    "text": "investigating the potential usage of criminais DS that's modify to going to",
    "start": "19490",
    "end": "24539"
  },
  {
    "text": "having a full GA generally available offering for all of our developers and so we've given past talks about the",
    "start": "24539",
    "end": "31920"
  },
  {
    "text": "first few migration phases but this talk aims to share on kind of the latter parts and what it went into bringing our",
    "start": "31920",
    "end": "39300"
  },
  {
    "text": "GA offering over like the finish line in a sense it's quick about me I'm a senior",
    "start": "39300",
    "end": "45600"
  },
  {
    "text": "at Surry at Spotify I started out on a team that worked on provisioning and DNS and now within the same core",
    "start": "45600",
    "end": "52530"
  },
  {
    "start": "48000",
    "end": "48000"
  },
  {
    "text": "infrastructure organization I'm on a team that maintains deployment and is one of the teams responsible for our",
    "start": "52530",
    "end": "58739"
  },
  {
    "text": "kubernetes migration so in terms of the agenda I'll talk about briefly introduce",
    "start": "58739",
    "end": "64140"
  },
  {
    "text": "that Spotify how we do operations and what our runtime looks like what we're migrating from to kind of seed the",
    "start": "64140",
    "end": "70229"
  },
  {
    "text": "context there and then we'll dive into the GA journey and cover some learnings and takeaways so very quick about",
    "start": "70229",
    "end": "77100"
  },
  {
    "text": "Spotify we're an audio streaming platform across a variety of different devices and we aim to connect millions",
    "start": "77100",
    "end": "83460"
  },
  {
    "text": "of artists with billions of fans in doing so we have a fair amount of users",
    "start": "83460",
    "end": "88650"
  },
  {
    "text": "and subscribers who listen to a fair amount of audio content and all of this",
    "start": "88650",
    "end": "94409"
  },
  {
    "text": "is supported by a large amount of Engineers across a large amount of teams that are maintaining a lot of micro",
    "start": "94409",
    "end": "101009"
  },
  {
    "text": "services that get a fair amount of load and generate a fair amount of data and",
    "start": "101009",
    "end": "106500"
  },
  {
    "text": "events so how are these engineers doing operations for these applications and",
    "start": "106500",
    "end": "112259"
  },
  {
    "text": "micro services so if we have like an operational spectrum where say on one side you have teams that have complete",
    "start": "112259",
    "end": "119490"
  },
  {
    "text": "team autonomy and how they do their operations they can deploy or run stuff set up metrics using whatever tools or",
    "start": "119490",
    "end": "125219"
  },
  {
    "text": "processes they want and then on the other side of the spectrum you might have like a centralized ops team that is",
    "start": "125219",
    "end": "130920"
  },
  {
    "text": "responsible for all the DevOps relay things for your product and is responsible for like ultimately your",
    "start": "130920",
    "end": "137380"
  },
  {
    "text": "product being up and running Spotify kind of operates in the middle with like an ops and teams model so here",
    "start": "137380",
    "end": "144160"
  },
  {
    "text": "teams build their own services they are operating them as well but they're doing",
    "start": "144160",
    "end": "149470"
  },
  {
    "text": "so using pretty extensive tooling and like a platform that the court infrastructure organization provides for",
    "start": "149470",
    "end": "156040"
  },
  {
    "text": "them so they're still doing operations but they're doing it at a much higher abstraction level and a great",
    "start": "156040",
    "end": "162970"
  },
  {
    "text": "actualization of this is something we call the golden path so this is an opinionated blessed like set of best",
    "start": "162970",
    "end": "169990"
  },
  {
    "text": "practices for building and operating services at Spotify which includes a pretty comprehensive tutorial that",
    "start": "169990",
    "end": "176350"
  },
  {
    "text": "developers can follow on like the very first day to build the new service like",
    "start": "176350",
    "end": "181390"
  },
  {
    "text": "put it into production and set up things like metrics alerting on call for it so",
    "start": "181390",
    "end": "187770"
  },
  {
    "start": "187000",
    "end": "187000"
  },
  {
    "text": "let's talk abou quickly about our old runtime or what we're migrating from so our old runtime involves having like one",
    "start": "187770",
    "end": "194560"
  },
  {
    "text": "docker container or like instance of a micro service per host and the host",
    "start": "194560",
    "end": "202000"
  },
  {
    "text": "configuration is set up is done by puppet and the docker orchestration is done by Helios which is our own open",
    "start": "202000",
    "end": "209170"
  },
  {
    "text": "source container orchestration system that was conveniently conveniently announced the day before kubernetes was",
    "start": "209170",
    "end": "218220"
  },
  {
    "text": "so we're moving from that old runtime to our new runtime kubernetes or more",
    "start": "218220",
    "end": "224800"
  },
  {
    "text": "specifically like gke and with our offering we with kubernetes we no longer",
    "start": "224800",
    "end": "230200"
  },
  {
    "text": "need helios or puppet the concerns and like management around docker and like",
    "start": "230200",
    "end": "236110"
  },
  {
    "text": "GCE hosts are now offloaded to gke which lets has let us build a much more",
    "start": "236110",
    "end": "242590"
  },
  {
    "text": "advanced like criminales offering for developers on top of it that is using soft multi-tenancy and is a multi",
    "start": "242590",
    "end": "250060"
  },
  {
    "text": "cluster internal offering and I think the last piece of like important pre",
    "start": "250060",
    "end": "255580"
  },
  {
    "text": "context is that our goal for this migration has been scoped to running all stateless back-end services at Spotify",
    "start": "255580",
    "end": "263260"
  },
  {
    "text": "on kubernetes and if you're interested in some like the earlier migration phases because this definitely wasn't like a",
    "start": "263260",
    "end": "269020"
  },
  {
    "text": "big monolithic migration effort you can see some previous talks we've given on",
    "start": "269020",
    "end": "274240"
  },
  {
    "text": "that so general general availability for",
    "start": "274240",
    "end": "279520"
  },
  {
    "start": "276000",
    "end": "276000"
  },
  {
    "text": "our offering like what does it actually mean how did we define it so we roughly defined it as any new service at Spotify",
    "start": "279520",
    "end": "286810"
  },
  {
    "text": "would be deployed only to kubernetes and have full integration integration and",
    "start": "286810",
    "end": "292360"
  },
  {
    "text": "support for both the like pre-existing ops tooling and also like new native",
    "start": "292360",
    "end": "299320"
  },
  {
    "text": "kubernetes benefits and features that people wanted to use and an additional",
    "start": "299320",
    "end": "305020"
  },
  {
    "text": "piece of this was that teams with existing services on Helios could fully",
    "start": "305020",
    "end": "311410"
  },
  {
    "text": "migrate them over and are pretty easy self service manner and so this has been",
    "start": "311410",
    "end": "318340"
  },
  {
    "text": "pretty successful so far but if I do say so and even though we're not currently",
    "start": "318340",
    "end": "323950"
  },
  {
    "text": "like actively pushing or forcing our developers to move over to communities we've seen that roughly 33% of eligible",
    "start": "323950",
    "end": "332350"
  },
  {
    "text": "stateless back-end services have moved over to kubernetes so to put that in",
    "start": "332350",
    "end": "338140"
  },
  {
    "text": "perspective like all of these migrations were done by teams that did so through",
    "start": "338140",
    "end": "343510"
  },
  {
    "text": "the self-service experience and they did so on their own of their own volition like on their own time so now let's get",
    "start": "343510",
    "end": "352810"
  },
  {
    "text": "into what we had to do to actually make the offering ready for a general availability these break down into like",
    "start": "352810",
    "end": "360310"
  },
  {
    "text": "a few big domains the first being operational solidity kind of like",
    "start": "360310",
    "end": "365770"
  },
  {
    "text": "scalability reliability observability first topic I want to talk about here is our multi cluster strategy and how we",
    "start": "365770",
    "end": "373570"
  },
  {
    "start": "369000",
    "end": "369000"
  },
  {
    "text": "manage the clusters so we started out with three just three product production",
    "start": "373570",
    "end": "379720"
  },
  {
    "text": "clusters but now we're running about like 2,500 fairly large nodes across 15",
    "start": "379720",
    "end": "386020"
  },
  {
    "text": "production clusters that are across like three different regions and so in the beginning we had automated scripts and",
    "start": "386020",
    "end": "393850"
  },
  {
    "text": "they were pretty quick to create quick to change easy to run that did all of this like cluster creation and manage",
    "start": "393850",
    "end": "401040"
  },
  {
    "text": "but as we scaled up with more clusters and those clusters got more complex we started to encounter a few issues for",
    "start": "401040",
    "end": "408510"
  },
  {
    "text": "example these scripts were not idempotent in the case of like this script failing out in the middle of it",
    "start": "408510",
    "end": "414630"
  },
  {
    "text": "and additionally the creation part of the scripting which I would say is the",
    "start": "414630",
    "end": "419700"
  },
  {
    "text": "most important part actually that wasn't something that got tested or executed that often again in practice because we",
    "start": "419700",
    "end": "425850"
  },
  {
    "text": "weren't creating new clusters all that often yeah and so we moved to a declarative",
    "start": "425850",
    "end": "432270"
  },
  {
    "text": "approach with terraform and if you're interested in some like deeper details",
    "start": "432270",
    "end": "438150"
  },
  {
    "text": "on our experiences there my colleague David gave a really great keynote on that last year at Cuba Khan and the",
    "start": "438150",
    "end": "443810"
  },
  {
    "text": "takeaway for like the multi cluster strategy and our management of it is if",
    "start": "443810",
    "end": "448860"
  },
  {
    "text": "it's possible offload the cluster management we realized is that somebody",
    "start": "448860",
    "end": "454380"
  },
  {
    "text": "has to be like consistently concerned with making sure that cluster creation bootstrapping is like up to date work as",
    "start": "454380",
    "end": "461100"
  },
  {
    "text": "expected that kind of thing and it's really great to be able to offload this to like an open source tool like",
    "start": "461100",
    "end": "467100"
  },
  {
    "text": "terraform or like a managed solution or like a provider of some sort the other",
    "start": "467100",
    "end": "473370"
  },
  {
    "text": "aspect of multi cluster are multi class strategy was deployment how is the deployment to multiple sets of clusters",
    "start": "473370",
    "end": "480540"
  },
  {
    "text": "occurring and so here we were able to leverage an existing deployment system",
    "start": "480540",
    "end": "485730"
  },
  {
    "text": "that we had called tugboat which served as our like deployment abstraction layer our for developers and so this existed",
    "start": "485730",
    "end": "493560"
  },
  {
    "text": "before I moved to chrome Nettie's the kind of left branch there already existed and was how people used",
    "start": "493560",
    "end": "501090"
  },
  {
    "text": "tugboat to deploy their services dude helios namely their c ICD pipelines",
    "start": "501090",
    "end": "508560"
  },
  {
    "text": "would basically talk to tugboat and talk about would orchestrate the deploy out",
    "start": "508560",
    "end": "513900"
  },
  {
    "text": "to GCE and so we kind of hid or built our deployment to kubernetes behind this",
    "start": "513900",
    "end": "520469"
  },
  {
    "text": "existing abstraction that's that right branch right there and how multi cluster",
    "start": "520470",
    "end": "526290"
  },
  {
    "text": "plays into this is that we built the service called compass fairly simple",
    "start": "526290",
    "end": "531690"
  },
  {
    "text": "service that we'll talk to two basically requests",
    "start": "531690",
    "end": "538040"
  },
  {
    "text": "what clusters should I deploy my this application to so for that example request their tugboat is trying to",
    "start": "538040",
    "end": "545460"
  },
  {
    "text": "deploy playlist proxy it sends a request to compass saying I had this application called playlist proxy that wants to be",
    "start": "545460",
    "end": "551910"
  },
  {
    "text": "deployed to the US and Asia regions and it wants to be in two clusters per",
    "start": "551910",
    "end": "557430"
  },
  {
    "text": "region and then compass will basically return what clusters tugboat should deploy that application to and that",
    "start": "557430",
    "end": "566730"
  },
  {
    "start": "566000",
    "end": "566000"
  },
  {
    "text": "assignment of applications to clusters is like a sticky assignment so that people's deployed resources they stay on",
    "start": "566730",
    "end": "573480"
  },
  {
    "text": "the same clusters across like multiple deploys and the current behavior for",
    "start": "573480",
    "end": "579000"
  },
  {
    "text": "compass is that we select clusters based on available capacity and we also added",
    "start": "579000",
    "end": "584130"
  },
  {
    "text": "some features around like reliability that clusters per region thing that I mentioned and our guiding principle here",
    "start": "584130",
    "end": "591030"
  },
  {
    "start": "590000",
    "end": "590000"
  },
  {
    "text": "was to try to keep it simple for developers to reason about even though",
    "start": "591030",
    "end": "596460"
  },
  {
    "text": "we're running on like we have a multi cluster offering developers what we assume most of them like cared about was",
    "start": "596460",
    "end": "604560"
  },
  {
    "text": "the regional level especially as their failure domain not on like a per cluster level so this is proven to be pretty",
    "start": "604560",
    "end": "612120"
  },
  {
    "text": "true and what we wanted to do on the deployment tooling layer was that just ensure that their app is on some cluster",
    "start": "612120",
    "end": "619500"
  },
  {
    "text": "in the region that they want to be in I'm just interested in some I'm plugging",
    "start": "619500",
    "end": "624780"
  },
  {
    "text": "a lot of different talks here but uh if you were interested in some of the deeper details around like our multi",
    "start": "624780",
    "end": "630360"
  },
  {
    "text": "cluster strategy and also some things around scalability with running large clusters my colleague Austin and Iago",
    "start": "630360",
    "end": "638040"
  },
  {
    "text": "Jago from Google or giving a talk on this tomorrow a cube con so let's move on to",
    "start": "638040",
    "end": "645480"
  },
  {
    "start": "644000",
    "end": "644000"
  },
  {
    "text": "operational metrics and alerts so this is for us as the owners of the cluster",
    "start": "645480",
    "end": "651510"
  },
  {
    "text": "not specifically for like application developers using the clusters so we had",
    "start": "651510",
    "end": "656700"
  },
  {
    "text": "to set up pretty solid monitoring on like integration components error latency saturation on these components",
    "start": "656700",
    "end": "662700"
  },
  {
    "text": "so what do I mean by integration components these were things that we the cluster owners were running on the",
    "start": "662700",
    "end": "669980"
  },
  {
    "text": "clusters or interfacing with the clusters that provided integration with our like existing infrastructure for",
    "start": "669980",
    "end": "677959"
  },
  {
    "text": "example things like service discovery IT general controls and our in-house secret",
    "start": "677959",
    "end": "684139"
  },
  {
    "text": "system so we wanted to monitor the monitor those pretty closely ensure that there was integrations like I've kept",
    "start": "684139",
    "end": "690769"
  },
  {
    "text": "working we also had a pretty important smoke tests metric that would basically",
    "start": "690769",
    "end": "695860"
  },
  {
    "text": "periodic periodically deploy a test app to our clusters and this was less about",
    "start": "695860",
    "end": "701689"
  },
  {
    "text": "the cluster health and more about the deployment tool chain and making sure",
    "start": "701689",
    "end": "707629"
  },
  {
    "text": "that that was working end to end we also set up a lot of metrics around like available cluster capacity the",
    "start": "707629",
    "end": "715069"
  },
  {
    "text": "scheduling like status of backups and we set up alerts for all of these as well",
    "start": "715069",
    "end": "722029"
  },
  {
    "text": "and the takeaway there is - it's a really great chance to establish trust",
    "start": "722029",
    "end": "727279"
  },
  {
    "text": "through monitoring for your offering basically make sure that you have",
    "start": "727279",
    "end": "732290"
  },
  {
    "text": "whatever metrics or alerts that you need so that you as the cluster owners are aware of issues or like cluster",
    "start": "732290",
    "end": "739850"
  },
  {
    "text": "degradation before your tenants on the clusters are it goes a long way towards like establishing confidence in your",
    "start": "739850",
    "end": "746629"
  },
  {
    "text": "system when if they have an issue they might like pop in your select Channel or something and then see that you're",
    "start": "746629",
    "end": "752149"
  },
  {
    "text": "already aware of the issue and also like working on it the next thing we did was around birding",
    "start": "752149",
    "end": "758839"
  },
  {
    "text": "so dirt stands for disaster recovery test and so we planned and executed a",
    "start": "758839",
    "end": "764600"
  },
  {
    "text": "few dirts around primarily around cluster deletion and the master being",
    "start": "764600",
    "end": "770600"
  },
  {
    "text": "down and fees is validated and improved for us like metrics and alerting they made sure that we had the proper metrics",
    "start": "770600",
    "end": "777949"
  },
  {
    "text": "and alerts set up to be able to be aware of the situation like during these dirt tests dirts and also it validated that",
    "start": "777949",
    "end": "787189"
  },
  {
    "text": "our playbooks were working as expected specifically around things like cluster creation backup restoration and it",
    "start": "787189",
    "end": "794689"
  },
  {
    "text": "validated that our backups were actually working because during the cluster deletions we had to restore",
    "start": "794689",
    "end": "801260"
  },
  {
    "text": "resources that we had backed up because as they say if you don't have if you",
    "start": "801260",
    "end": "806270"
  },
  {
    "text": "don't test restoring your backups you don't actually have backups so this ensured that we actually had backups and",
    "start": "806270",
    "end": "813320"
  },
  {
    "text": "the take over here is to plan for and simulate failures before general",
    "start": "813320",
    "end": "818330"
  },
  {
    "text": "availability whether you're operating your own like kubernetes clusters or",
    "start": "818330",
    "end": "824000"
  },
  {
    "text": "you're using a cloud manage like offering of some kind I don't make the assumption that the clusters will always",
    "start": "824000",
    "end": "830420"
  },
  {
    "text": "be there and be stable have a plan and processes in place for when this",
    "start": "830420",
    "end": "835580"
  },
  {
    "text": "assumption is broken also I would say to",
    "start": "835580",
    "end": "840710"
  },
  {
    "text": "not assume that cluster deletion or absence is the only failure scenario we",
    "start": "840710",
    "end": "846320"
  },
  {
    "text": "learn pretty different things from like the cluster deletion dirt test versus the master being down so think about",
    "start": "846320",
    "end": "852950"
  },
  {
    "text": "different scenarios as well the next overall domain is something in the realm",
    "start": "852950",
    "end": "859250"
  },
  {
    "text": "of the business impact here we set up metrics and dashboards around things",
    "start": "859250",
    "end": "865580"
  },
  {
    "text": "like resource utilization cost percentage apps migrated developer productivity and so this wasn't just for",
    "start": "865580",
    "end": "875870"
  },
  {
    "text": "us but also for developers things like the costs metrics were pretty important because it allowed developers like who",
    "start": "875870",
    "end": "883730"
  },
  {
    "text": "were migrating their workloads over to see how much they saved by doing that migration and so far like cost",
    "start": "883730",
    "end": "890540"
  },
  {
    "text": "attribution and savings have proven to be one of the most compelling reasons for developers to like migrate over to",
    "start": "890540",
    "end": "896690"
  },
  {
    "text": "our offering and it's also really important for us as the cluster owners",
    "start": "896690",
    "end": "901810"
  },
  {
    "text": "because it allows for things like cost tracking this is a graph of our cost",
    "start": "901810",
    "end": "909320"
  },
  {
    "start": "903000",
    "end": "903000"
  },
  {
    "text": "over time of micro services that are currently fully migrated over from",
    "start": "909320",
    "end": "914660"
  },
  {
    "text": "helios to helios on GCE to our kubernetes offering on gke so a quick",
    "start": "914660",
    "end": "923000"
  },
  {
    "text": "explanation of what you're seeing here in our old runtime with like the one service instance per host we didn't have",
    "start": "923000",
    "end": "929750"
  },
  {
    "text": "been packing and we had some limitations around auto-scaling so once with a move to kubernetes we",
    "start": "929750",
    "end": "936800"
  },
  {
    "text": "have been packing an auto scaling and our cost savings are kind of like showing that and that little spike you",
    "start": "936800",
    "end": "942200"
  },
  {
    "text": "see at the end is due to some like relatively minor recent incidents that we had where auto scaling played a part",
    "start": "942200",
    "end": "948920"
  },
  {
    "text": "in mitigating the impact so they take away for like having these kind of",
    "start": "948920",
    "end": "955040"
  },
  {
    "start": "953000",
    "end": "953000"
  },
  {
    "text": "metrics is to before GA track enough data to answer questions from a business",
    "start": "955040",
    "end": "962120"
  },
  {
    "text": "perspective and it's also important because business related metrics can be difficult or like not as effective if",
    "start": "962120",
    "end": "969440"
  },
  {
    "text": "you add them later for example if we just started tracking cost when we went GA then we wouldn't have been able to",
    "start": "969440",
    "end": "975770"
  },
  {
    "text": "produce like a cost over time graph or like analysis like that make sure you give yourself enough like",
    "start": "975770",
    "end": "981740"
  },
  {
    "text": "info or data to answer things like how can I tell if my migration or my",
    "start": "981740",
    "end": "987500"
  },
  {
    "text": "kubernetes offering is like a success from a business standpoint the next",
    "start": "987500",
    "end": "994250"
  },
  {
    "text": "domain is around self-service so to give some context here teams at Spotify have",
    "start": "994250",
    "end": "1001350"
  },
  {
    "text": "a lot of choices about what they want to run their stuff on and our aim here was",
    "start": "1001350",
    "end": "1007090"
  },
  {
    "text": "to make the kubernetes offering like the best choice for most developers and so",
    "start": "1007090",
    "end": "1012520"
  },
  {
    "text": "part of that involves having like a very smooth and easy user experience around",
    "start": "1012520",
    "end": "1017710"
  },
  {
    "text": "like actually getting on to the offering and so the first aspect here was a",
    "start": "1017710",
    "end": "1023230"
  },
  {
    "start": "1022000",
    "end": "1022000"
  },
  {
    "text": "namespaces so like what is involved in the developer or team getting their own",
    "start": "1023230",
    "end": "1028270"
  },
  {
    "text": "namespace that they fully own and like have full control over so we had this",
    "start": "1028270",
    "end": "1035829"
  },
  {
    "text": "gke onboard dr container that we supplied to users that they could run like locally on their machines and this",
    "start": "1035829",
    "end": "1044410"
  },
  {
    "text": "would basically generate the proper like namespace related resources for their",
    "start": "1044410",
    "end": "1050850"
  },
  {
    "text": "team or like desired namespace on a mono repo called system resource manifests so",
    "start": "1050850",
    "end": "1059610"
  },
  {
    "text": "to explain this our resource manifest like distribution model and",
    "start": "1059610",
    "end": "1065080"
  },
  {
    "text": "is that the resource manifests or resources that we want applied to all",
    "start": "1065080",
    "end": "1070840"
  },
  {
    "text": "clusters so for example things like namespace information things like integrations that we as the cluster",
    "start": "1070840",
    "end": "1077789"
  },
  {
    "text": "owners operate these go into this SRM system resource manifests mono repo and",
    "start": "1077789",
    "end": "1084399"
  },
  {
    "text": "get applied to all clusters and then for people's like resource manifests that",
    "start": "1084399",
    "end": "1090220"
  },
  {
    "text": "are like related to their application those live with the actual application repos so there's really just like one",
    "start": "1090220",
    "end": "1097989"
  },
  {
    "text": "step for a user or like a team to run to get their own namespace and the takeaway",
    "start": "1097989",
    "end": "1104830"
  },
  {
    "text": "there is to not be afraid of taking complexity for your developers I'm",
    "start": "1104830",
    "end": "1110320"
  },
  {
    "text": "speaking from the standpoint of like being a person in infrastructure who like owns the kubernetes offering I",
    "start": "1110320",
    "end": "1116789"
  },
  {
    "text": "think it's always said things like you know keep it simple but you shouldn't",
    "start": "1116789",
    "end": "1122529"
  },
  {
    "text": "necessarily like keep your design of the offering like behind the scenes simple if that introduces extra complexity for",
    "start": "1122529",
    "end": "1129519"
  },
  {
    "text": "your developers like don't be afraid of making things a little more complex under the hood so that for our case",
    "start": "1129519",
    "end": "1134950"
  },
  {
    "text": "developers only have to run a single doctor container to like get their namespace set up and ready the next next",
    "start": "1134950",
    "end": "1143350"
  },
  {
    "start": "1142000",
    "end": "1142000"
  },
  {
    "text": "aspect is around applications and like how so they have their name space like",
    "start": "1143350",
    "end": "1148539"
  },
  {
    "text": "how are they actually getting their applications there so this shows what the workflow was before kubernetes the",
    "start": "1148539",
    "end": "1155169"
  },
  {
    "text": "like kind of dotted box there is what is in their application repo and here it is a Helios configuration file that they're",
    "start": "1155169",
    "end": "1164070"
  },
  {
    "text": "the C ICD pipelines basically run these two commands related to tugboat on to",
    "start": "1164070",
    "end": "1171429"
  },
  {
    "text": "create a new version and then set that as the desired like target version and that causes tugboat to actually deploy",
    "start": "1171429",
    "end": "1178600"
  },
  {
    "text": "out to GCE and Helios so with the kubernetes experience or say migrating",
    "start": "1178600",
    "end": "1185350"
  },
  {
    "text": "from that to running on both Helios and kubernetes all developers had to do was",
    "start": "1185350",
    "end": "1190840"
  },
  {
    "text": "basically run this cookie cutter tool that we provided them to get like a working set of manifests for their",
    "start": "1190840",
    "end": "1197649"
  },
  {
    "text": "applique and then also add this like yellow file shown on the right called like",
    "start": "1197649",
    "end": "1202850"
  },
  {
    "text": "deployment info dot llamo that specifies in this case I want to deploy to both Helios and kubernetes and so the CI CD",
    "start": "1202850",
    "end": "1211460"
  },
  {
    "text": "pipeline part stays exactly the same it's the same exact two commands talked",
    "start": "1211460",
    "end": "1216710"
  },
  {
    "text": "about commands that are being run to then deploy to Helios and gke criminales",
    "start": "1216710",
    "end": "1222499"
  },
  {
    "text": "so that the top to the top right boxes are like all that's new and the and then",
    "start": "1222499",
    "end": "1233119"
  },
  {
    "text": "after that if they want to remove the Helios capacity or if they're starting out like with the say Golden Path and",
    "start": "1233119",
    "end": "1239720"
  },
  {
    "text": "they're only on kubernetes that's what this would look like and I think the thing I want to point out is that in",
    "start": "1239720",
    "end": "1246019"
  },
  {
    "text": "this deployment info mo they can also specify like very high level deployment",
    "start": "1246019",
    "end": "1251779"
  },
  {
    "text": "or like kubernetes related configuration for example like the region's that they want to be in things around like region",
    "start": "1251779",
    "end": "1258679"
  },
  {
    "text": "redundancy with like clusters per region things like whether you want a canary also goes into this file and our",
    "start": "1258679",
    "end": "1265999"
  },
  {
    "text": "takeaway here was to use existing tools and abstractions wherever possible to",
    "start": "1265999",
    "end": "1272419"
  },
  {
    "text": "make it as frictionless as possible for your developers to migrate over themselves",
    "start": "1272419",
    "end": "1278769"
  },
  {
    "text": "so like tugboat tugboat was deployment for most of our developers from both",
    "start": "1278769",
    "end": "1284809"
  },
  {
    "text": "like a tooling and like an abstraction level kind of perspective so we hidden",
    "start": "1284809",
    "end": "1289999"
  },
  {
    "text": "build the kubernetes deploying process behind this existing abstraction and because of that like the CIC via",
    "start": "1289999",
    "end": "1297230"
  },
  {
    "text": "pipelines stayed exactly the same and the overall deployment workflows that developers were used to stayed the same",
    "start": "1297230",
    "end": "1303230"
  },
  {
    "text": "and how they conceptualize deployment stayed the same for the most part the",
    "start": "1303230",
    "end": "1311359"
  },
  {
    "start": "1310000",
    "end": "1310000"
  },
  {
    "text": "next aspect is around documentation everyone's favorite which has become our favorite as well we wrote an extensive",
    "start": "1311359",
    "end": "1318950"
  },
  {
    "text": "amount of internal documentation and you know these are always like workin Proctor work-in-progress you're always",
    "start": "1318950",
    "end": "1324980"
  },
  {
    "text": "iterating on them and are like I think use we put that on to stack overflow and",
    "start": "1324980",
    "end": "1331399"
  },
  {
    "text": "prai's are internal like stackoverflow enterprise in the form of questions and we also had to update that like back-end",
    "start": "1331399",
    "end": "1338539"
  },
  {
    "text": "golden path tutorial that I mentioned to deploy to kibriya DS by default and in",
    "start": "1338539",
    "end": "1344479"
  },
  {
    "text": "writing this documentation are kind of like guiding principles were to assume as a baseline that our developers do not",
    "start": "1344479",
    "end": "1351259"
  },
  {
    "text": "know kubernetes but we did find it like difficult to strike a balance a careful",
    "start": "1351259",
    "end": "1358039"
  },
  {
    "text": "balance between informing them of what kubernetes is and avoid rewriting like",
    "start": "1358039",
    "end": "1364639"
  },
  {
    "text": "the open source documents out there for kubernetes and so for this we basically leaned on",
    "start": "1364639",
    "end": "1370629"
  },
  {
    "text": "linking to the open source crew Nettie's documents were relevant but we made sure",
    "start": "1370629",
    "end": "1375679"
  },
  {
    "text": "to like enhance it with Spotify specific content and for documentation it's I",
    "start": "1375679",
    "end": "1382099"
  },
  {
    "text": "think it's pretty important to remember that you as the owners of the offering or the clusters are not the intended",
    "start": "1382099",
    "end": "1387379"
  },
  {
    "text": "audience for the documentation your understanding of like kubernetes or even",
    "start": "1387379",
    "end": "1393769"
  },
  {
    "text": "infrastructure in general does not represent what your readers are going to understand or like approach your",
    "start": "1393769",
    "end": "1399919"
  },
  {
    "text": "documentation with so even if you have very good documentation developers will",
    "start": "1399919",
    "end": "1407869"
  },
  {
    "start": "1402000",
    "end": "1402000"
  },
  {
    "text": "always find a way to have questions or like advanced use cases that they will want to ask you about",
    "start": "1407869",
    "end": "1413869"
  },
  {
    "text": "so for us we established established support ships covering both of the main",
    "start": "1413869",
    "end": "1420529"
  },
  {
    "text": "time zones that our developers are in specifically like US East Coast and two time zones in Europe and when I say",
    "start": "1420529",
    "end": "1427940"
  },
  {
    "text": "support shift this isn't like some third-party support or something like that this is people on the teams who own",
    "start": "1427940",
    "end": "1435440"
  },
  {
    "text": "the offering and have designed it and like work on the infrastructure behind it basically being interrupted Bowl",
    "start": "1435440",
    "end": "1442460"
  },
  {
    "text": "during these shifts and being responsible for answering questions and discussing with developers any questions",
    "start": "1442460",
    "end": "1449719"
  },
  {
    "text": "they may have about the offering and we found that this process can be really",
    "start": "1449719",
    "end": "1455659"
  },
  {
    "text": "mutually beneficial it's beneficial it's a really great two-way experience your users or your developers who are using",
    "start": "1455659",
    "end": "1462889"
  },
  {
    "text": "the offering get the support that they need dedicated support from people who you know created the product in a sense and",
    "start": "1462889",
    "end": "1469380"
  },
  {
    "text": "then you as the cluster or like the offering owners get to talk firsthand",
    "start": "1469380",
    "end": "1474390"
  },
  {
    "text": "with your users about what issues they're having you can really see like what parts of your Docs might be",
    "start": "1474390",
    "end": "1480480"
  },
  {
    "text": "confusing you can find in financial improvements in the user experience a",
    "start": "1480480",
    "end": "1485790"
  },
  {
    "text": "lot of the like user experience improvements that we added were basically from us during our support",
    "start": "1485790",
    "end": "1491760"
  },
  {
    "text": "ships noticing like common trends or repeated issues that our users who are",
    "start": "1491760",
    "end": "1497250"
  },
  {
    "text": "trying to get onto the offering we're having and the next section is feature",
    "start": "1497250",
    "end": "1504300"
  },
  {
    "text": "parity so I left out some of the stuff around like that may be more specific to",
    "start": "1504300",
    "end": "1510840"
  },
  {
    "text": "Spotify including stuff like our internal technical portal or UI I tgc like event",
    "start": "1510840",
    "end": "1516660"
  },
  {
    "text": "mission like we needed support with all of these but I'm not gonna talk about",
    "start": "1516660",
    "end": "1522600"
  },
  {
    "text": "them too in detail because of like time and time constraints and it's a little company specific the one I'm going to",
    "start": "1522600",
    "end": "1529230"
  },
  {
    "text": "point out is canary support so this was an existing feature that we had in",
    "start": "1529230",
    "end": "1535440"
  },
  {
    "text": "tugboat for helios basically developers would specified that they want a canary",
    "start": "1535440",
    "end": "1542100"
  },
  {
    "text": "for their like deployments and it would deploy to that first and then you know",
    "start": "1542100",
    "end": "1548070"
  },
  {
    "text": "it would receive production traffic and then you would hit a button to advance that to the rest of like the production",
    "start": "1548070",
    "end": "1553320"
  },
  {
    "text": "hosts so we built a similar feature on kubernetes via tugboat where we would",
    "start": "1553320",
    "end": "1558990"
  },
  {
    "text": "basically have talked about deploy out a separate set of resources like suffix",
    "start": "1558990",
    "end": "1564120"
  },
  {
    "text": "with - canary for the resources like that were appropriate but in a way that",
    "start": "1564120",
    "end": "1571110"
  },
  {
    "text": "these replicas would still get production traffic and so the takeaway",
    "start": "1571110",
    "end": "1576900"
  },
  {
    "start": "1576000",
    "end": "1576000"
  },
  {
    "text": "here is that for your offering developers need feature parity or better",
    "start": "1576900",
    "end": "1583220"
  },
  {
    "text": "so the first part need feature parity the important operational things or",
    "start": "1583220",
    "end": "1589530"
  },
  {
    "text": "features that developers are doing with the old runtime they need to be either able to do the exact same things or",
    "start": "1589530",
    "end": "1595380"
  },
  {
    "text": "start do the same things or in this case we're like puppet not need to do them",
    "start": "1595380",
    "end": "1600460"
  },
  {
    "text": "anymore and then when you're like deciding what features you want to",
    "start": "1600460",
    "end": "1606369"
  },
  {
    "text": "basically have in place before GA it kind of depends on how widely used the",
    "start": "1606369",
    "end": "1613389"
  },
  {
    "text": "feature is and like how business-critical it is I wanted to talk more about Canaries for this example",
    "start": "1613389",
    "end": "1620169"
  },
  {
    "text": "because a lot of our production services are using Canaries in their workflows and a lot of like business critical",
    "start": "1620169",
    "end": "1627100"
  },
  {
    "text": "applications are as well so it's not something that we could go to general availability without",
    "start": "1627100",
    "end": "1633490"
  },
  {
    "text": "supporting and so our general",
    "start": "1633490",
    "end": "1638559"
  },
  {
    "start": "1635000",
    "end": "1635000"
  },
  {
    "text": "availability requirements kind of fell into these for like no main categories that I covered operational solidity so",
    "start": "1638559",
    "end": "1646440"
  },
  {
    "text": "reliability scalability observability business impact basically the correct",
    "start": "1646440",
    "end": "1653919"
  },
  {
    "text": "metrics tracking and the ability to answer like business oriented questions having a good self-service experience",
    "start": "1653919",
    "end": "1660429"
  },
  {
    "text": "that was frictionless and smooth and important feature parity again the",
    "start": "1660429",
    "end": "1666490"
  },
  {
    "text": "important things that developers do with the old runtime they need to be able to either do these same things or not need",
    "start": "1666490",
    "end": "1672879"
  },
  {
    "text": "to do them anymore and then if you're interested in hearing some of the future plans we have for our",
    "start": "1672879",
    "end": "1678909"
  },
  {
    "start": "1676000",
    "end": "1676000"
  },
  {
    "text": "offering cuz I may have mentioned the first slide there's like crossing the finish line there actually is no finish",
    "start": "1678909",
    "end": "1683919"
  },
  {
    "text": "line you know we're always iterating and trying to improve things for our offering so the first thing is as I",
    "start": "1683919",
    "end": "1691749"
  },
  {
    "text": "mentioned we scoped the migration to stateful state lists back in services so",
    "start": "1691749",
    "end": "1696879"
  },
  {
    "text": "we are potentially looking at maybe supporting staple services in the future",
    "start": "1696879",
    "end": "1702990"
  },
  {
    "text": "data jobs consolidation on the data infrastructure side there are like",
    "start": "1702990",
    "end": "1710559"
  },
  {
    "text": "separate clusters and a separate offering for running data jobs there's always been talk of like consolidating",
    "start": "1710559",
    "end": "1715929"
  },
  {
    "text": "the two and then cron jobs as first-class citizens",
    "start": "1715929",
    "end": "1720999"
  },
  {
    "text": "so although we allow developers to run cron jobs on their clusters it",
    "start": "1720999",
    "end": "1727899"
  },
  {
    "text": "definitely doesn't have the like first-class support that things like deployments do because again like it was back in mic",
    "start": "1727899",
    "end": "1734890"
  },
  {
    "text": "back in stateless services that was like our primary scope so this one's pretty",
    "start": "1734890",
    "end": "1741100"
  },
  {
    "text": "near and dear to me and myself to myself basically supporting con jobs as first-class citizens and then higher",
    "start": "1741100",
    "end": "1748870"
  },
  {
    "text": "level abstractions so with this right now developers still have to know what a",
    "start": "1748870",
    "end": "1754480"
  },
  {
    "text": "deployment is what a service is what an HPA is on some level maybe one day there",
    "start": "1754480",
    "end": "1759610"
  },
  {
    "text": "will be like a Spotify micro service custom resource that they can use and that would abstract all of this away",
    "start": "1759610",
    "end": "1765850"
  },
  {
    "text": "from them and so I want to cover some",
    "start": "1765850",
    "end": "1771750"
  },
  {
    "start": "1768000",
    "end": "1768000"
  },
  {
    "text": "general learnings from our migration and general availability journey to the general availability to end with so the",
    "start": "1771750",
    "end": "1779440"
  },
  {
    "text": "first is to be mindful and deliberate in dictating terminology so what I mean",
    "start": "1779440",
    "end": "1785169"
  },
  {
    "text": "here is that when you're adopting or using kubernetes you're not really adopting or picking up a single tool or",
    "start": "1785169",
    "end": "1792250"
  },
  {
    "text": "technology you're really picking up an entire ecosystem and with that comes a",
    "start": "1792250",
    "end": "1797350"
  },
  {
    "text": "lot of overloaded terms like deployment and services endpoints these can get actually pretty confusing when you're",
    "start": "1797350",
    "end": "1804370"
  },
  {
    "text": "discussing with developers or like in things like documentation so being aware of this and doing even what may be",
    "start": "1804370",
    "end": "1812140"
  },
  {
    "text": "considered little things like always the tala sizing or capitalizing like resource types like deployment service",
    "start": "1812140",
    "end": "1818409"
  },
  {
    "text": "in your documentation can go a long way and like alleviating that confusion",
    "start": "1818409",
    "end": "1824549"
  },
  {
    "text": "migrate and stages or series goals that increase in scope so as I mentioned we definitely wanted to avoid a monolithic",
    "start": "1824549",
    "end": "1831820"
  },
  {
    "text": "migration for this entire process and by basically having like a series of little",
    "start": "1831820",
    "end": "1838929"
  },
  {
    "text": "migration stages that had different scopes we were able to like discover and",
    "start": "1838929",
    "end": "1844690"
  },
  {
    "text": "deal with a lot of unknowns and like hidden problems at a pretty controllable pace like we found out things at this",
    "start": "1844690",
    "end": "1852100"
  },
  {
    "text": "stage found out things at this stage versus undergoing a kind of waterfall monolithic migration and ending up with",
    "start": "1852100",
    "end": "1858820"
  },
  {
    "text": "a lot of unknowns hitting us at once and then the biggest learning for GA is that",
    "start": "1858820",
    "end": "1866779"
  },
  {
    "text": "developers will adopt and/or moderate to your kubernetes offering if it is easy complete and compelling so this is kind",
    "start": "1866779",
    "end": "1873950"
  },
  {
    "text": "of a refining of the saying like if you build it they will come that's not true developers are pretty",
    "start": "1873950",
    "end": "1881240"
  },
  {
    "text": "busy and they hate complexity and pain so if you implement your offering in a way that has those things they're not",
    "start": "1881240",
    "end": "1887419"
  },
  {
    "text": "going to migrate to it but if you design your user experience for your kubernetes offering in a way that is like easy to",
    "start": "1887419",
    "end": "1894830"
  },
  {
    "text": "use get support for move on to its complete and the features that",
    "start": "1894830",
    "end": "1900049"
  },
  {
    "text": "developers are currently using and perhaps expect and then also has is also",
    "start": "1900049",
    "end": "1905570"
  },
  {
    "text": "compelling and that it introduces new features that they want for our example like auto scaling then despite having",
    "start": "1905570",
    "end": "1912289"
  },
  {
    "text": "pretty busy backlogs developers will find the time to move over we've seen",
    "start": "1912289",
    "end": "1917360"
  },
  {
    "text": "that firsthand and the last thing is to talk to other companies about how they",
    "start": "1917360",
    "end": "1922639"
  },
  {
    "text": "do infrastructure and solve infrastructure problems it's one of my another talk plug but two years ago one",
    "start": "1922639",
    "end": "1929330"
  },
  {
    "text": "of my colleagues Dave's all the tusky give a really great keynote on this basically about our joining the CN CF",
    "start": "1929330",
    "end": "1936860"
  },
  {
    "text": "and the impact that has had and basically like since we've joined the CN CF we've greatly increased the amount of",
    "start": "1936860",
    "end": "1942950"
  },
  {
    "text": "time that we spend talking to like our infrastructure counterparts at different",
    "start": "1942950",
    "end": "1948559"
  },
  {
    "text": "companies about how they use kubernetes about like infrastructure problems in general and so in doing so we've learned",
    "start": "1948559",
    "end": "1954860"
  },
  {
    "text": "a lot from them they've learned a lot from us and we've learned a lot in terms of like potential approaches pitfalls to",
    "start": "1954860",
    "end": "1962090"
  },
  {
    "text": "avoid that kind of thing just as I hope in that in sharing this talk some of our",
    "start": "1962090",
    "end": "1969529"
  },
  {
    "text": "experiences here at Spotify resonate with all of y'all so thanks for",
    "start": "1969529",
    "end": "1975409"
  },
  {
    "text": "listening if you're interested in working on these kinds of problems or you just want to work at Spotify we are",
    "start": "1975409",
    "end": "1981590"
  },
  {
    "text": "hiring and my email and social media are up there and I'm always happy to talk about infrastructure technology",
    "start": "1981590",
    "end": "1987019"
  },
  {
    "text": "kubernetes whatever please reach out thanks for listening [Applause]",
    "start": "1987019",
    "end": "1996409"
  },
  {
    "text": "and provider",
    "start": "1997149",
    "end": "2000629"
  }
]