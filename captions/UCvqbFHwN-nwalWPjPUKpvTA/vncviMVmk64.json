[
  {
    "text": "hello everyone so we are coming up right on the tail end of the day here it is",
    "start": "30",
    "end": "6930"
  },
  {
    "text": "4:35 and I have 35 minutes to go so let's get this show on the road so to",
    "start": "6930",
    "end": "12230"
  },
  {
    "text": "jump into things I'm red beard I'm with core OS I talk about weird",
    "start": "12230",
    "end": "17699"
  },
  {
    "text": "things apparently we're talking about making cloud native weird so I'm in the right place jumping into it I am here to",
    "start": "17699",
    "end": "23789"
  },
  {
    "text": "tell you a whole bunch of lies now these are going to be lies in the sense of they are lies like high school physics",
    "start": "23789",
    "end": "29910"
  },
  {
    "text": "where I tell you that the smallest particle in the universe is an atom and then you learned that there are quarks",
    "start": "29910",
    "end": "36420"
  },
  {
    "text": "and antiquarks and positive spin and anti positive and all of that so as with any good presentation we should be able",
    "start": "36420",
    "end": "42480"
  },
  {
    "text": "to answer a number of questions by the end of this and this presentation will not be any different if you can answer",
    "start": "42480",
    "end": "48059"
  },
  {
    "text": "all of these questions by the time we're done then I've succeeded if you cannot answer them then I have failed so first off who",
    "start": "48059",
    "end": "54780"
  },
  {
    "text": "who is the target audience of this this is going to be organizations who are looking to run kubernetes in some",
    "start": "54780",
    "end": "60629"
  },
  {
    "text": "redundant manner what are we going to be talking about in the words of Mike Tyson everybody has a plan until they get",
    "start": "60629",
    "end": "66900"
  },
  {
    "text": "punched in the mouth so what we are going to talk about are the considerations that you have to make to",
    "start": "66900",
    "end": "72270"
  },
  {
    "text": "be able to build out these types of multi environment possibly multi cloud systems and making sure that you've kind",
    "start": "72270",
    "end": "80460"
  },
  {
    "text": "of planned the steps and that the execution makes some sense and what are",
    "start": "80460",
    "end": "86759"
  },
  {
    "text": "the common misunderstandings there so when are we going to do this well we're gonna let you know when everything is",
    "start": "86759",
    "end": "92640"
  },
  {
    "text": "going to be generally available within kubernetes I will be talking at once",
    "start": "92640",
    "end": "99060"
  },
  {
    "text": "Mall point about tectonic but this largely has very little to do with tectonic I am a huge believer in making",
    "start": "99060",
    "end": "105509"
  },
  {
    "text": "sure that you know they're part of the reason why you're looking at kubernetes is to make sure that things are as",
    "start": "105509",
    "end": "111090"
  },
  {
    "text": "agnostic as possible within some realm of general influence so we are going to",
    "start": "111090",
    "end": "117630"
  },
  {
    "text": "make sure that these are applicable across whatever district of kubernetes you happen to be using the wear of this",
    "start": "117630",
    "end": "123869"
  },
  {
    "text": "are you know what are the considerations kind of broken down by the compute environment are there specific things",
    "start": "123869",
    "end": "129629"
  },
  {
    "text": "that you have to worry about on digitalocean versus packet net you know is there anything that's exclusive to bare metal versus AWS and",
    "start": "129629",
    "end": "137329"
  },
  {
    "text": "finally getting into the why can you answer why you want to do this because",
    "start": "137329",
    "end": "144469"
  },
  {
    "text": "is not an answer to that or at least a valid answer so we want to make sure that you're able to break some of this",
    "start": "144469",
    "end": "150019"
  },
  {
    "text": "down and then with the last one how do you actually achieve these goals so as I",
    "start": "150019",
    "end": "155540"
  },
  {
    "text": "like to say kind of in a from the trenches type perspective let's jump step one into the past so we need to",
    "start": "155540",
    "end": "163700"
  },
  {
    "text": "make sure that we don't forget the past and one of my colleagues coined the term cloud kids as a pejorative for himself",
    "start": "163700",
    "end": "170629"
  },
  {
    "text": "you know he back when I ran the infrastructure team at core OS he said",
    "start": "170629",
    "end": "176120"
  },
  {
    "text": "you know that there were a whole lot of things that just weren't possible and that you know he as a cloud kid because",
    "start": "176120",
    "end": "181700"
  },
  {
    "text": "he had ran and where he was working on an infrastructure team and had never touched a physical server that blew my",
    "start": "181700",
    "end": "190400"
  },
  {
    "text": "mind an infrastructure s re-type individual who had never grabbed a piece",
    "start": "190400",
    "end": "196700"
  },
  {
    "text": "of metal and kind of worked with it so for the cloud kits in the room this tidbit is for you for everybody else",
    "start": "196700",
    "end": "203510"
  },
  {
    "text": "we'll move through it real fast so to understand where we're at let's analyze",
    "start": "203510",
    "end": "208819"
  },
  {
    "text": "an example from the past which for this one I will pick Oracle real application",
    "start": "208819",
    "end": "214310"
  },
  {
    "text": "clusters so to use Oracle RAC you had to have a sand and to understand what that",
    "start": "214310",
    "end": "219979"
  },
  {
    "text": "starts to look like let's look at this very pretty picture so in this picture we have to compute nodes we have two",
    "start": "219979",
    "end": "228319"
  },
  {
    "text": "disks you'll notice that each of those disks is connected to both of the",
    "start": "228319",
    "end": "233870"
  },
  {
    "text": "servers concurrently this is not something where you know you're kind of",
    "start": "233870",
    "end": "240319"
  },
  {
    "text": "doing an e BS kind of magically attaching and detaching both servers can access both of the disks at the same",
    "start": "240319",
    "end": "247519"
  },
  {
    "text": "time that's part of the basis behind us and and it is up to the things that",
    "start": "247519",
    "end": "253099"
  },
  {
    "text": "consume those resources as block devices to be able to intelligently consume them",
    "start": "253099",
    "end": "258889"
  },
  {
    "text": "now for Oracle RAC they understood how to partition out the use of that disk by",
    "start": "258889",
    "end": "265610"
  },
  {
    "text": "machine to make sure that if one machine failed another machine was able to take over the consumption and utilization of the",
    "start": "265610",
    "end": "273620"
  },
  {
    "text": "rest of that disk to be able to serve resources this was for high performance more than where it's for high",
    "start": "273620",
    "end": "280189"
  },
  {
    "text": "availability more than high performance but the reason why folks began to think",
    "start": "280189",
    "end": "285919"
  },
  {
    "text": "of this in as a pattern that you couldn't do was because the way that most people consumed block devices is",
    "start": "285919",
    "end": "292159"
  },
  {
    "text": "not directly attaching them to some piece of software like Oracle database but instead they put file systems on",
    "start": "292159",
    "end": "298909"
  },
  {
    "text": "them and if you don't have a file system that is cluster aware like GFS to OCFS",
    "start": "298909",
    "end": "305060"
  },
  {
    "text": "to or lustre that's lus tr√© not Gluster",
    "start": "305060",
    "end": "310340"
  },
  {
    "text": "then you are going to end up in a situation where when you try to concurrently utilize that file system on",
    "start": "310340",
    "end": "317210"
  },
  {
    "text": "two hosts readwrite you'll probably corrupt the file system now for what it's worth there are still",
    "start": "317210",
    "end": "324589"
  },
  {
    "text": "useful things that we can do with this but in the end using a sand also meant dealing with what are called worldwide",
    "start": "324589",
    "end": "331310"
  },
  {
    "text": "names so for a real quick thing of welcome to the world of worldwide names",
    "start": "331310",
    "end": "337330"
  },
  {
    "text": "this ugly thing is a worldwide name so to make it just a little bit more",
    "start": "337330",
    "end": "343159"
  },
  {
    "text": "understandable we're gonna reformat it and we'll reformat it again and we'll keep reformatting it and as you go you",
    "start": "343159",
    "end": "349819"
  },
  {
    "text": "notice that it starts to look like a MAC address the reason for that is is because it's basically a MAC address for",
    "start": "349819",
    "end": "357439"
  },
  {
    "text": "a disk the I Triple E issues what is called an organizationally unique identifier and those oh you is are used",
    "start": "357439",
    "end": "365120"
  },
  {
    "text": "for hardware manufacturers to be able to produce what are called media access",
    "start": "365120",
    "end": "371779"
  },
  {
    "text": "control numbers that are used with network cards and storage vendor use them to give individual serial numbers",
    "start": "371779",
    "end": "378319"
  },
  {
    "text": "to dynamically provisioned disks so in this sense right here this gives us the",
    "start": "378319",
    "end": "384349"
  },
  {
    "text": "sort of high-level overview of what it starts to look like because now you refer to a disk by the worldwide name",
    "start": "384349",
    "end": "390529"
  },
  {
    "text": "within the operating system so that if you have multiple machines concurrently accessing the same disk they're able to",
    "start": "390529",
    "end": "397250"
  },
  {
    "text": "access it by a stable ID this will make more sense in a moment as to why I'm talking about this but this",
    "start": "397250",
    "end": "402530"
  },
  {
    "text": "lack of knowledge about things like sands and everything was largely driven by the cloud and you know nobody needed",
    "start": "402530",
    "end": "409280"
  },
  {
    "text": "to really know what a LUN was anymore or what it meant to be zoned into a host but your sand doesn't limit you to those",
    "start": "409280",
    "end": "417500"
  },
  {
    "text": "things as well and as I said we should not get bogged down by what the cloud can't do because we will come back to",
    "start": "417500",
    "end": "423620"
  },
  {
    "text": "that so moving into a bit more of the present let's talk about the planning and anytime you want to develop a plan",
    "start": "423620",
    "end": "431060"
  },
  {
    "text": "you've got to map some of your needs so first and foremost know the problem that you are solving for are you trying to do",
    "start": "431060",
    "end": "437479"
  },
  {
    "text": "multi cloud or multi environment things to be able to achieve higher latency",
    "start": "437479",
    "end": "443530"
  },
  {
    "text": "hopefully not hopefully you're trying to get to lower latency but you know is it that you are trying to increase",
    "start": "443530",
    "end": "449240"
  },
  {
    "text": "throughput is it that you're trying to ensure that your data locality puts your services to as close to your end users",
    "start": "449240",
    "end": "456139"
  },
  {
    "text": "as possible thus you know a user accessing your resource in Singapore gets sent to a data center in Singapore",
    "start": "456139",
    "end": "463130"
  },
  {
    "text": "and a user accessing your resource in London gets sent to a data center in London are you trying to optimize for",
    "start": "463130",
    "end": "469520"
  },
  {
    "text": "other types of resource utilization like RAM or CPU you know are you trying to",
    "start": "469520",
    "end": "475190"
  },
  {
    "text": "avoid the next five nines attack do you not want to be e Corp you know kind of",
    "start": "475190",
    "end": "480590"
  },
  {
    "text": "responsible for having all of your data destroyed because it was in a single location or especially press into the",
    "start": "480590",
    "end": "487910"
  },
  {
    "text": "world that we live in right now are you trying to avoid disaster through global thermonuclear war hopefully this is not",
    "start": "487910",
    "end": "496130"
  },
  {
    "text": "something that you are trying to protect against but in other words what we are",
    "start": "496130",
    "end": "501440"
  },
  {
    "text": "talking about here is you need to know what your failure domains are you need to understand whether you're trying to",
    "start": "501440",
    "end": "507139"
  },
  {
    "text": "protect against disk loss or data center loss because sure you may be",
    "start": "507139",
    "end": "513979"
  },
  {
    "text": "provisioning things at an Equinix data center in Ashburn Virginia and then a",
    "start": "513979",
    "end": "519260"
  },
  {
    "text": "tornado comes through and takes out your resources and s3 so if you're not",
    "start": "519260",
    "end": "527209"
  },
  {
    "text": "thinking about some of those things like region locality and kind of how",
    "start": "527209",
    "end": "532820"
  },
  {
    "text": "your resources play out across different providers as well you may not be protecting against your failure domains",
    "start": "532820",
    "end": "539480"
  },
  {
    "text": "so the big question is are you prepared to answer these questions I have a hint",
    "start": "539480",
    "end": "549650"
  },
  {
    "text": "for you so now that you have at least thought through this and you're starting to map",
    "start": "549650",
    "end": "555140"
  },
  {
    "text": "out what your reasons for wanting to do this are this means that you are going",
    "start": "555140",
    "end": "560600"
  },
  {
    "text": "to have to define your environment via some configuration manifest what this means is that you're probably going to",
    "start": "560600",
    "end": "566660"
  },
  {
    "text": "do things in the realm of configuration as code so how do I get this done this",
    "start": "566660",
    "end": "573020"
  },
  {
    "text": "is where things start getting actually interesting for folks because I dig into a little bit more concrete ideas this",
    "start": "573020",
    "end": "579890"
  },
  {
    "text": "means your configuration files must be in some version control system even if",
    "start": "579890",
    "end": "587090"
  },
  {
    "text": "in a strange way this version control system is you are stuffing them as objects into Etsy D where with Etsy D",
    "start": "587090",
    "end": "595250"
  },
  {
    "text": "you can then go back through and play back the index over time to be able to",
    "start": "595250",
    "end": "600470"
  },
  {
    "text": "recover things now in reality you probably are not going to do that because we have a much better system for",
    "start": "600470",
    "end": "605990"
  },
  {
    "text": "versioning text documents and that is git but you must have something like",
    "start": "605990",
    "end": "611330"
  },
  {
    "text": "this if you do not have this you are doing it wrong on top of that I use this",
    "start": "611330",
    "end": "619390"
  },
  {
    "text": "beloved piece of software to react to the changes in those repositories and",
    "start": "619390",
    "end": "626140"
  },
  {
    "text": "monitor and take action when things are occurring now if I'm doing this with a",
    "start": "626140",
    "end": "634250"
  },
  {
    "text": "bunch of terraform definitions there's probably going to be secrets involved in",
    "start": "634250",
    "end": "639800"
  },
  {
    "text": "some form now because like I said I used to run the infrastructure team at core",
    "start": "639800",
    "end": "644990"
  },
  {
    "text": "OS we've been doing this for quite a while and all of the pieces of software that are available today were not",
    "start": "644990",
    "end": "650630"
  },
  {
    "text": "necessarily available in the past so the way that we historically got this done was using a utility called git crypt and",
    "start": "650630",
    "end": "656960"
  },
  {
    "text": "I'm going to actually give you a snippet of Jenkins pipeline showing exactly how we use it it's not complex but get crypt",
    "start": "656960",
    "end": "664220"
  },
  {
    "text": "gives you a GPG based mechanism for pulling secrets out of",
    "start": "664220",
    "end": "670990"
  },
  {
    "text": "encrypted at rest storage using them while you're done and then purging them from memory but just because I am doing",
    "start": "670990",
    "end": "679040"
  },
  {
    "text": "it the with these tools does not mean that you have to do it using these tools",
    "start": "679040",
    "end": "684640"
  },
  {
    "text": "there are other things that can be used in similar fashions like you can use",
    "start": "684640",
    "end": "690140"
  },
  {
    "text": "terraform you can use things like cops you can use Kubb spray all of these are mechanisms for kind of bringing up your",
    "start": "690140",
    "end": "696680"
  },
  {
    "text": "underlying compute you'll also talk about here in a moment you can also use things like helm charts to actually",
    "start": "696680",
    "end": "702560"
  },
  {
    "text": "manage the lifecycle of your applications and for anybody who's sat through Vic's talk right before this you",
    "start": "702560",
    "end": "707750"
  },
  {
    "text": "kind of were kind of handed some direct design patterns on how to successfully",
    "start": "707750",
    "end": "713510"
  },
  {
    "text": "use these but again the tooling is less important than committing to the process",
    "start": "713510",
    "end": "719680"
  },
  {
    "text": "that everybody loves to dig into tools and be like well what's the thing that I",
    "start": "719680",
    "end": "724700"
  },
  {
    "text": "can just install that does this for me well I've given you a list of things that you can just install and just do",
    "start": "724700",
    "end": "731150"
  },
  {
    "text": "that for you but if you use perforce",
    "start": "731150",
    "end": "736690"
  },
  {
    "text": "yeah there's a whole lot of feelings I have about that but you know just use",
    "start": "737320",
    "end": "742430"
  },
  {
    "text": "perforce if you are one of those dyed-in-the-wool like Jenkins is garbage and we have successfully migrated",
    "start": "742430",
    "end": "749930"
  },
  {
    "text": "everything to drone i/o or to Travis great you have a solution use the",
    "start": "749930",
    "end": "756140"
  },
  {
    "text": "solution you have and the one you understand these are ideas and these are design patterns that you use to build",
    "start": "756140",
    "end": "762800"
  },
  {
    "text": "these systems in this way so continuing to move on this is one that you have to",
    "start": "762800",
    "end": "770870"
  },
  {
    "text": "get burned by it to know that it's important but this is to say if you deploy three clusters with kubernetes",
    "start": "770870",
    "end": "779020"
  },
  {
    "text": "you should have three distinct ranges of addresses that are used for those",
    "start": "779020",
    "end": "786740"
  },
  {
    "text": "clusters yes Amazon will let you use the",
    "start": "786740",
    "end": "792140"
  },
  {
    "text": "same 10.0.0.0 slash 16 in every V PC you",
    "start": "792140",
    "end": "797660"
  },
  {
    "text": "set up it does not mean you should do that you know back in the day the kind of",
    "start": "797660",
    "end": "803690"
  },
  {
    "text": "state-of-the-art system for IP address management or I Pam's was an Excel spreadsheet that sat on a shared drive",
    "start": "803690",
    "end": "810230"
  },
  {
    "text": "you know the synchronization problems with that were definitely non-trivial if",
    "start": "810230",
    "end": "815990"
  },
  {
    "text": "you have nothing Google sheets is good enough if you're",
    "start": "815990",
    "end": "821570"
  },
  {
    "text": "paying for Infoblox right on but it does not matter whether you are in your data center or whether",
    "start": "821570",
    "end": "828589"
  },
  {
    "text": "you're referencing the assets on a cloud provider make sure your network ranges",
    "start": "828589",
    "end": "833720"
  },
  {
    "text": "are non-overlapping that now means that you can start to do things much much easier where you have just dynamic",
    "start": "833720",
    "end": "840459"
  },
  {
    "text": "site-to-site VPN links to allow your users to just access the resources that",
    "start": "840459",
    "end": "846200"
  },
  {
    "text": "are on a cluster and firewall them at layer 3 and possibly layer 2 rather than",
    "start": "846200",
    "end": "851720"
  },
  {
    "text": "having to get into nat translations and everybody goes through one address and then you have to have proxy filtering",
    "start": "851720",
    "end": "857120"
  },
  {
    "text": "and everything else so this does not seem like a big deal but just do it and",
    "start": "857120",
    "end": "863060"
  },
  {
    "text": "if you need some help with this I had an intern last summer write a utility to",
    "start": "863060",
    "end": "869029"
  },
  {
    "text": "make this easier to do and I'm going to move on to an example of this but we will have this back up here in a moment",
    "start": "869029",
    "end": "876019"
  },
  {
    "text": "so let's actually look at this and for this I'm going to try to refresh it there we go so what we've got going on",
    "start": "876019",
    "end": "882800"
  },
  {
    "text": "is I run the CLI utility and I have two different failure domains and an arbitrary address range that I pick I",
    "start": "882800",
    "end": "890329"
  },
  {
    "text": "pick it saying that we have a slash 20 that we want to use for the whole environment and it breaks down what the",
    "start": "890329",
    "end": "896240"
  },
  {
    "text": "ranges should be to have a public a private and a protected network as well as extras I change it to a different",
    "start": "896240",
    "end": "902990"
  },
  {
    "text": "subnet size it does all the math for me and fixes everything I then decide that hey I want to have a different number of",
    "start": "902990",
    "end": "909649"
  },
  {
    "text": "failure domains so I can just do that and it takes that slash 21 and now cuts it down into smaller chunks to make sure",
    "start": "909649",
    "end": "917149"
  },
  {
    "text": "that I have a reasonable breakdown of all of this now maybe I don't want it",
    "start": "917149",
    "end": "922399"
  },
  {
    "text": "just in a table maybe I need a terraform definition for bringing this up on AWS so it renders the terraform definitions",
    "start": "922399",
    "end": "929329"
  },
  {
    "text": "giving me the nat gateways and all of these other things gives me the routing table and yet I know that everybody is not",
    "start": "929329",
    "end": "936090"
  },
  {
    "text": "using terraform so maybe you want a cloud formation and we can just do this and render a cloud formation as well",
    "start": "936090",
    "end": "942420"
  },
  {
    "text": "these are common design patterns that everybody should not be reinventing the",
    "start": "942420",
    "end": "949170"
  },
  {
    "text": "same wheel and that is the value of open-source utilities like this so if you need something like this we have the",
    "start": "949170",
    "end": "957510"
  },
  {
    "text": "ability to make something like this available so continuing on here digging",
    "start": "957510",
    "end": "964500"
  },
  {
    "text": "in there we go perfect so the next step knowing what your storage is stop",
    "start": "964500",
    "end": "971640"
  },
  {
    "text": "freaking out about storage seriously I have sat through enough",
    "start": "971640",
    "end": "977370"
  },
  {
    "text": "talks here and enough lightning talks and everything of being folks going why are we going to do about storage",
    "start": "977370",
    "end": "984350"
  },
  {
    "text": "when is storage going to be a solved problem in kubernetes guess what if you",
    "start": "984350",
    "end": "992580"
  },
  {
    "text": "are running any reasonable size it is a solved problems let's talk about it what",
    "start": "992580",
    "end": "997770"
  },
  {
    "text": "is your platform are using AWS cool you've got EBS volumes are using GCP",
    "start": "997770",
    "end": "1004250"
  },
  {
    "text": "you've got persistent disks are you on Azure well they have a whole matrix of",
    "start": "1004250",
    "end": "1009590"
  },
  {
    "text": "managed and unmanaged and premium and standard and all of that but it's more",
    "start": "1009590",
    "end": "1015020"
  },
  {
    "text": "important to think about what's generically happening here under the hood so we'll walk through an example so",
    "start": "1015020",
    "end": "1020300"
  },
  {
    "text": "I have two servers server green and server blue and I have an EBS volume",
    "start": "1020300",
    "end": "1026630"
  },
  {
    "text": "attached to server green and then that tornado strikes and server green goes",
    "start": "1026630",
    "end": "1033290"
  },
  {
    "text": "down it comes unavailable and the whole point of my cluster scheduler in knowing",
    "start": "1033290",
    "end": "1039920"
  },
  {
    "text": "about these remote storage objects is that it intelligently D schedules that",
    "start": "1039920",
    "end": "1045410"
  },
  {
    "text": "disk from being attached to server red and attaches it to server blue and tada",
    "start": "1045410",
    "end": "1051470"
  },
  {
    "text": "my stateful application still has all of its data and is able to migrate to a",
    "start": "1051470",
    "end": "1056780"
  },
  {
    "text": "different system now the whole point here is that kubernetes is giving you shoulders to stand on the what are we",
    "start": "1056780",
    "end": "1064850"
  },
  {
    "text": "going to do about storage is a concept of what are we going to do without the",
    "start": "1064850",
    "end": "1070700"
  },
  {
    "text": "concepts of persistent volumes or persistent volume claims or storage",
    "start": "1070700",
    "end": "1076160"
  },
  {
    "text": "classes or all of these other things by using these primitives that are built-in",
    "start": "1076160",
    "end": "1081650"
  },
  {
    "text": "and saying I have defined a storage class that is the default for this cluster meaning that if I'm on AWS my",
    "start": "1081650",
    "end": "1088880"
  },
  {
    "text": "default storage class is just use EBS volumes and if I'm on packet net it is",
    "start": "1088880",
    "end": "1095270"
  },
  {
    "text": "please just give me their remote block storage then you are able to make better",
    "start": "1095270",
    "end": "1101480"
  },
  {
    "text": "and more intelligent decisions here that whole concept that I just showed you is the read/write read/write once mechanism",
    "start": "1101480",
    "end": "1109820"
  },
  {
    "text": "and you'll notice that that process of migrating a disk from one machine to",
    "start": "1109820",
    "end": "1115760"
  },
  {
    "text": "another that is the missing piece in historic compute systems when you have a",
    "start": "1115760",
    "end": "1123559"
  },
  {
    "text": "SAN because you needed some mechanism to intelligently go hey this host has gone",
    "start": "1123559",
    "end": "1129830"
  },
  {
    "text": "down reschedule that workload on a different host and attach the disk there",
    "start": "1129830",
    "end": "1135440"
  },
  {
    "text": "were entire mechanisms like what are the",
    "start": "1135440",
    "end": "1141260"
  },
  {
    "text": "tools there is CL VMD which is like a",
    "start": "1141260",
    "end": "1146720"
  },
  {
    "text": "whole cluster Dell VM system that uses multicast addresses to be able to",
    "start": "1146720",
    "end": "1152679"
  },
  {
    "text": "dynamically change a instance from B or a disk that's mounted from being read",
    "start": "1152679",
    "end": "1158360"
  },
  {
    "text": "only to read/write but that brings up a very good point these are design",
    "start": "1158360",
    "end": "1163490"
  },
  {
    "text": "patterns from the past that folks are now just relearning and kubernetes being",
    "start": "1163490",
    "end": "1168679"
  },
  {
    "text": "built by a number of individuals who have also interacted with these design patterns in the past knows that so",
    "start": "1168679",
    "end": "1173840"
  },
  {
    "text": "you're able to have a disk that is simultaneously mounted into multiple",
    "start": "1173840",
    "end": "1179450"
  },
  {
    "text": "machines and is available read-only and you're able to have a disk that is",
    "start": "1179450",
    "end": "1184850"
  },
  {
    "text": "simultaneously mounted in to multiple machines read/write and that is readwrite many but just because you've",
    "start": "1184850",
    "end": "1193070"
  },
  {
    "text": "never done it on the cloud again doesn't mean it's not possible so let's talk",
    "start": "1193070",
    "end": "1198230"
  },
  {
    "text": "about bare metal for a second because hint hint it works extremely similarly you have some concept of a",
    "start": "1198230",
    "end": "1206560"
  },
  {
    "text": "disk that is remote possibly it's via San using I scuzzy or fiber channel and",
    "start": "1206560",
    "end": "1212080"
  },
  {
    "text": "you've got h bas in place that know how to use that possibly it's a cinder volume because",
    "start": "1212080",
    "end": "1217300"
  },
  {
    "text": "you already have some OpenStack service running and you just want to be able to use that possibly you've set up SEF and",
    "start": "1217300",
    "end": "1223570"
  },
  {
    "text": "you have either sefa fest which if you have set F s now means that you can have",
    "start": "1223570",
    "end": "1228730"
  },
  {
    "text": "that filesystem concurrently mounted on multiple machines readwrite and when you",
    "start": "1228730",
    "end": "1234700"
  },
  {
    "text": "make a sync call on a file down on machine number one you're able to immediately see that data on machine",
    "start": "1234700",
    "end": "1240820"
  },
  {
    "text": "number two or possibly you just use the RBD mechanism from seth where you're still back to just the vanilla kind of",
    "start": "1240820",
    "end": "1247270"
  },
  {
    "text": "EBS type mechanism of I have some storage object I want it to be available as a block device please make that",
    "start": "1247270",
    "end": "1253660"
  },
  {
    "text": "available but the big thing is you just need an API for your storage engine and",
    "start": "1253660",
    "end": "1258880"
  },
  {
    "text": "if you're already paying for NetApp they give that to you if you're already paying for EMC they give that to you and",
    "start": "1258880",
    "end": "1266800"
  },
  {
    "text": "if you're not paying for any of those things then guess what other api's do exist for storage and it doesn't have to",
    "start": "1266800",
    "end": "1273130"
  },
  {
    "text": "be expensive you can so I am a huge open source rattler I started out my career",
    "start": "1273130",
    "end": "1282060"
  },
  {
    "text": "doing a little bit of Windows and then I saw the light and I saw that draconian",
    "start": "1282060",
    "end": "1288520"
  },
  {
    "text": "evil open license called the GPL and learned that you know the BSD license",
    "start": "1288520",
    "end": "1293860"
  },
  {
    "text": "was far superior because it had more freedom and then I learned the error of",
    "start": "1293860",
    "end": "1299410"
  },
  {
    "text": "my ways but regardless FreeBSD is still a legit operating system and in freeing",
    "start": "1299410",
    "end": "1304630"
  },
  {
    "text": "as you have the ability to use ZFS whereas the prospect of doing that on",
    "start": "1304630",
    "end": "1310420"
  },
  {
    "text": "Linux is still a bit dodgy err so what does this look like when you download that free nas ISO and you decide you",
    "start": "1310420",
    "end": "1317470"
  },
  {
    "text": "want to have this storage area network so that you can use your kubernetes",
    "start": "1317470",
    "end": "1322960"
  },
  {
    "text": "cluster on the cheap and you know still have all of these types of easy disk",
    "start": "1322960",
    "end": "1328390"
  },
  {
    "text": "accesses well you have some disk and you have some",
    "start": "1328390",
    "end": "1333580"
  },
  {
    "text": "API which is probably going to be you and you have some server and you install",
    "start": "1333580",
    "end": "1339670"
  },
  {
    "text": "the software in the server that has the disks and then you are going to",
    "start": "1339670",
    "end": "1344920"
  },
  {
    "text": "configure raid so that you have redundant or even better a redundant array of inexpensive disks and then you",
    "start": "1344920",
    "end": "1352420"
  },
  {
    "text": "just take the easy route and you export I scuzzy and now kubernetes which natively understands how does support I",
    "start": "1352420",
    "end": "1359740"
  },
  {
    "text": "scuzzy is able to just take these block devices and plug them in and you don't have to go to the effort of thinking",
    "start": "1359740",
    "end": "1366340"
  },
  {
    "text": "about all of this now getting back into this I promised some more thoughts about",
    "start": "1366340",
    "end": "1371530"
  },
  {
    "text": "setup so let's take a moment and let's put all of these pieces together so what",
    "start": "1371530",
    "end": "1378130"
  },
  {
    "text": "do we need to worry about here well hint there are the things that you should already be doing so you have a single",
    "start": "1378130",
    "end": "1386080"
  },
  {
    "text": "sign-on system in place right because you don't want to be running local users",
    "start": "1386080",
    "end": "1392500"
  },
  {
    "text": "on the machines that power your cluster and you don't want to be running local users on the cluster itself so that",
    "start": "1392500",
    "end": "1398650"
  },
  {
    "text": "means that you should have some component like Dex hood hooked up and you should then have that talking back",
    "start": "1398650",
    "end": "1405160"
  },
  {
    "text": "to some identity provider like LDAP or like oh ID see you also are going to",
    "start": "1405160",
    "end": "1411010"
  },
  {
    "text": "need some log aggregation mechanism that is to say collecting logs from the host",
    "start": "1411010",
    "end": "1416860"
  },
  {
    "text": "from kubernetes scheduler from your applications in a central location and",
    "start": "1416860",
    "end": "1421900"
  },
  {
    "text": "if you don't already have Splunk or you don't already have something that you set up today then i highly encourage you",
    "start": "1421900",
    "end": "1428230"
  },
  {
    "text": "to go with this relatively easy thing to set up and I say relatively easy because",
    "start": "1428230",
    "end": "1434770"
  },
  {
    "text": "you will get it up and running and it will be perfectly fine and then when you get to the point of having about a",
    "start": "1434770",
    "end": "1440400"
  },
  {
    "text": "terabyte or two of logs and you have to start learning elasticsearch re-indexing",
    "start": "1440400",
    "end": "1446040"
  },
  {
    "text": "well life is an adventure good luck with that but when you are just at the realm",
    "start": "1446040",
    "end": "1451990"
  },
  {
    "text": "of getting started here this is going to work just fine you are also going to be",
    "start": "1451990",
    "end": "1458260"
  },
  {
    "text": "wanting to do reasonable monitoring and alerting because you need to measure the performance and alert on all of your",
    "start": "1458260",
    "end": "1464830"
  },
  {
    "text": "problems that means that you will want to have Prometheus running you will want to get alert manager configured and",
    "start": "1464830",
    "end": "1470380"
  },
  {
    "text": "you will want to have Jager in place so that you can actually trace the statistics of your application this is",
    "start": "1470380",
    "end": "1476560"
  },
  {
    "text": "not rocket science this is just making sure that you are doing the same things",
    "start": "1476560",
    "end": "1482080"
  },
  {
    "text": "on all of your clusters so that you have central places of being able to go I go",
    "start": "1482080",
    "end": "1487600"
  },
  {
    "text": "to my tracing dashboard and I am able to trace components of the various",
    "start": "1487600",
    "end": "1493540"
  },
  {
    "text": "applications that I have regardless of where they happen to be at the big one here it's always a DNS problem I make",
    "start": "1493540",
    "end": "1503230"
  },
  {
    "text": "every single person who works for me read the first three chapters of DNS and bind and they laugh about that and then",
    "start": "1503230",
    "end": "1509410"
  },
  {
    "text": "I tell them I'm serious and they will read the first three chapters of DNS and bind because it is always a DNS problem",
    "start": "1509410",
    "end": "1515530"
  },
  {
    "text": "so this means properly federates your DNS when I meet when I say that I mean",
    "start": "1515530",
    "end": "1522490"
  },
  {
    "text": "DNS has a global scope do not pretend that it does not have a global scope",
    "start": "1522490",
    "end": "1529350"
  },
  {
    "text": "because when you do that you are doing yourself a disservice when I logged into",
    "start": "1529350",
    "end": "1534640"
  },
  {
    "text": "our developer AWS account and I saw two",
    "start": "1534640",
    "end": "1541500"
  },
  {
    "text": "hundred tectonic dot local zones come on",
    "start": "1541500",
    "end": "1548920"
  },
  {
    "text": "folks what are you doing there's there's not two hundred concepts of tectonic dot",
    "start": "1548920",
    "end": "1554800"
  },
  {
    "text": "local that's the whole point of name spacing we have this global lee names based resource called DNS that means",
    "start": "1554800",
    "end": "1562030"
  },
  {
    "text": "that if you are doing things just think about it because if you have an LDAP system for example and you want to be",
    "start": "1562030",
    "end": "1568480"
  },
  {
    "text": "able to talk to or fail through a number of LDAP systems one SRV records already",
    "start": "1568480",
    "end": "1574060"
  },
  {
    "text": "handled that for you but if you don't necessarily want to go that route let's think about it this way if you named the",
    "start": "1574060",
    "end": "1579610"
  },
  {
    "text": "host names of your LDAP servers LDAP dot SFO dot example.com and you name your",
    "start": "1579610",
    "end": "1587860"
  },
  {
    "text": "other LDAP servers LDAP dot NYC example comm and LDAP BER for Berlin example.com",
    "start": "1587860",
    "end": "1593770"
  },
  {
    "text": "and then you use the built in mechanisms of DNS resolution like n dots and like",
    "start": "1593770",
    "end": "1599680"
  },
  {
    "text": "search suffixes where you are able to provide a priority of search suffix resolution",
    "start": "1599680",
    "end": "1605230"
  },
  {
    "text": "then that means that you can say I wish for all of the san francisco resources to automatically attempt to resolve",
    "start": "1605230",
    "end": "1612340"
  },
  {
    "text": "whatever my name is dot SFO dot example.com and if that does not work then they may fall back to NYC dot",
    "start": "1612340",
    "end": "1619840"
  },
  {
    "text": "example.com and be er example.com and just finally example.com and that now gives you the mechanism of saying when",
    "start": "1619840",
    "end": "1626860"
  },
  {
    "text": "you are deploying an application to your cluster the name that you are trying to request is just LDAP and when you deploy",
    "start": "1626860",
    "end": "1635800"
  },
  {
    "text": "that same application to your resources in New York it will just go to the local",
    "start": "1635800",
    "end": "1641080"
  },
  {
    "text": "resource so this means that you can either utilize components like core DNS",
    "start": "1641080",
    "end": "1646330"
  },
  {
    "text": "with your cluster to handle some of this type of Federation and to be able to expose both the cluster dot local type",
    "start": "1646330",
    "end": "1652450"
  },
  {
    "text": "concept as well as federating that out to your external DNS systems but it also",
    "start": "1652450",
    "end": "1657940"
  },
  {
    "text": "means you're just going to use your external DNS infrastructure do not reinvent this wheel one of the most",
    "start": "1657940",
    "end": "1664270"
  },
  {
    "text": "beautiful things that OpenShift v-0 and v1 did was that you defined a domain for",
    "start": "1664270",
    "end": "1672010"
  },
  {
    "text": "your OpenShift cluster and then you delegated that domain there and then as",
    "start": "1672010",
    "end": "1677830"
  },
  {
    "text": "they dynamically handed out host names or you requested a hostname it automatically appended that domain name",
    "start": "1677830",
    "end": "1686020"
  },
  {
    "text": "to whatever your application name was called and because it was federated through the just vanilla DNS",
    "start": "1686020",
    "end": "1691780"
  },
  {
    "text": "infrastructure it was just available because especially when you start building micro service type applications",
    "start": "1691780",
    "end": "1697720"
  },
  {
    "text": "you don't really care what the host name is because it's always going to be behind some other API proxy or in the",
    "start": "1697720",
    "end": "1706240"
  },
  {
    "text": "case of kubernetes ingress controller or something like that finally you are going to want to sync your are back",
    "start": "1706240",
    "end": "1713290"
  },
  {
    "text": "configuration generally across your clusters this means today our trusty",
    "start": "1713290",
    "end": "1721750"
  },
  {
    "text": "Butler or spinnaker can handle some of these things it's the concept of continuous deployment where as you are",
    "start": "1721750",
    "end": "1728890"
  },
  {
    "text": "making changes to those configuration files that you have in revision control that Jenkins is monitoring that it is",
    "start": "1728890",
    "end": "1736100"
  },
  {
    "text": "able to pull down the credentials from get Crypt or vault and then be able to",
    "start": "1736100",
    "end": "1744170"
  },
  {
    "text": "apply those changes to the cluster traffic distribution cluster traffic",
    "start": "1744170",
    "end": "1751970"
  },
  {
    "text": "needs redundancy this is to say that utilize either your cloud load balancers",
    "start": "1751970",
    "end": "1757130"
  },
  {
    "text": "if you are D you're paying for f5 it doesn't mean that you should just throw away your f5 now it should does mean",
    "start": "1757130",
    "end": "1766610"
  },
  {
    "text": "that you should be looking into BGP an equal cost multi path and if you already have a properly configured Clause",
    "start": "1766610",
    "end": "1772790"
  },
  {
    "text": "network or leaf spine same thing basically just ones the fancy academic",
    "start": "1772790",
    "end": "1778790"
  },
  {
    "text": "name then you should be utilizing that even if you have a small number of",
    "start": "1778790",
    "end": "1783950"
  },
  {
    "text": "cluster or a small number of machines in a cluster it's not unreasonable to set",
    "start": "1783950",
    "end": "1789620"
  },
  {
    "text": "aside address ranges and to use static routes to route that again equal cost",
    "start": "1789620",
    "end": "1795520"
  },
  {
    "text": "multi paths to all of the nodes in the cluster it does not mean that you will",
    "start": "1795520",
    "end": "1801950"
  },
  {
    "text": "always have the most optimal traffic path resolution if you are doing static",
    "start": "1801950",
    "end": "1807230"
  },
  {
    "text": "routes we've got BGP you can do that but it means that now you don't have to worry",
    "start": "1807230",
    "end": "1812900"
  },
  {
    "text": "about having separate pieces of hardware which you have to buy two of for everything and then setting up heartbeat",
    "start": "1812900",
    "end": "1818360"
  },
  {
    "text": "connections to them and then learning their API and everything else because in this case BGP is a simple enough API to",
    "start": "1818360",
    "end": "1824929"
  },
  {
    "text": "do this what this means is that when you are taking all these components you need to demand the having network api's",
    "start": "1824929",
    "end": "1831799"
  },
  {
    "text": "because in distributed systems everything becomes a network resource whether it is storage or whether it is a",
    "start": "1831799",
    "end": "1837080"
  },
  {
    "text": "database as a service or whether it is something else so now we move in to the",
    "start": "1837080",
    "end": "1842270"
  },
  {
    "text": "execution of this and we discuss how we begin to take action so step one cluster",
    "start": "1842270",
    "end": "1847669"
  },
  {
    "text": "provisioning understand that there are separate stages here you deploy hosts",
    "start": "1847669",
    "end": "1852679"
  },
  {
    "text": "and those hosts have some manifest and you have clusters and that cluster has some manifest configuration it then",
    "start": "1852679",
    "end": "1860240"
  },
  {
    "text": "means that as you do that you're going to normalize your temp normalize and template eyes your host can fix that's",
    "start": "1860240",
    "end": "1866570"
  },
  {
    "text": "very easy to do with Linux same manifests can be used generally for both bare-metal machines",
    "start": "1866570",
    "end": "1872299"
  },
  {
    "text": "and cloud and if you're using something like kickstart and cloud configs in separate systems it may you just want to",
    "start": "1872299",
    "end": "1879110"
  },
  {
    "text": "break things down to kind of the the minimum state or kind of use ansible to manage that and avoid static configs at",
    "start": "1879110",
    "end": "1885440"
  },
  {
    "text": "all cost if you think you need static IP addresses you probably don't there are",
    "start": "1885440",
    "end": "1892970"
  },
  {
    "text": "cases where you may need that but again if your answer is well it's because we've always done it that way that's the",
    "start": "1892970",
    "end": "1899990"
  },
  {
    "text": "wrong answer things like DHCP exist for a reason and things like DHCP have been made",
    "start": "1899990",
    "end": "1905899"
  },
  {
    "text": "redundant for a reason these are things that you need to begin exploring so",
    "start": "1905899",
    "end": "1912169"
  },
  {
    "text": "let's get into the cluster configuration so the things that change over time are the couplet flags ensure that everything",
    "start": "1912169",
    "end": "1918110"
  },
  {
    "text": "is as we like to call it a core OS under management that means that you have the ability to change the couplet flags if",
    "start": "1918110",
    "end": "1924799"
  },
  {
    "text": "new fields are deprecated or new fields are added also use robots to do your",
    "start": "1924799",
    "end": "1931010"
  },
  {
    "text": "bidding and by robots I know as I said that people love to hate on Jenkins but",
    "start": "1931010",
    "end": "1936020"
  },
  {
    "text": "this Butler does my bidding quite well so this is an example of like the crazy",
    "start": "1936020",
    "end": "1942740"
  },
  {
    "text": "matrix build that we have that deploys things to different clusters in different regions and does it",
    "start": "1942740",
    "end": "1948740"
  },
  {
    "text": "automatically based on if it's a production resource or it's a development resource and when you start",
    "start": "1948740",
    "end": "1956690"
  },
  {
    "text": "getting into that let's talk about this step-by-step so first you're going to unlock your credentials using greek crypt or vault this is where we pull a",
    "start": "1956690",
    "end": "1964760"
  },
  {
    "text": "key from escrow it's pretty simple literally a bash script that knows how",
    "start": "1964760",
    "end": "1969950"
  },
  {
    "text": "to call get crypt and is using variables embedded into Jenkins and some of the",
    "start": "1969950",
    "end": "1974990"
  },
  {
    "text": "identity and secret management built into Jenkins from there it just gives us",
    "start": "1974990",
    "end": "1980390"
  },
  {
    "text": "the ability to pull this in as a pipeline stage so I can unlock my credentials then I do a get clean and a",
    "start": "1980390",
    "end": "1987350"
  },
  {
    "text": "terraform validate pretty straightforward against calling these",
    "start": "1987350",
    "end": "1992960"
  },
  {
    "text": "things as bash scripts in a Jenkins pipeline the validation script itself runs terraform validate but then",
    "start": "1992960",
    "end": "2000760"
  },
  {
    "text": "a lot of you are also go developers and you know that you should be running go fump thanh your code you should be running to terraform thumped and we have",
    "start": "2000760",
    "end": "2007330"
  },
  {
    "text": "components here that exit non zero because this is the Van Halen's brown M&Ms moment it shows whether or not you",
    "start": "2007330",
    "end": "2014890"
  },
  {
    "text": "actually read through that contract and made sure that you were doing all of the things that were required after that we",
    "start": "2014890",
    "end": "2021730"
  },
  {
    "text": "plan we send a message over slack asking a human being to confirm that the work should be done and then we deploy it",
    "start": "2021730",
    "end": "2028030"
  },
  {
    "text": "with terraform apply so working in a cluster this way adding a new cluster is as easy as defining an environment",
    "start": "2028030",
    "end": "2033370"
  },
  {
    "text": "variable then you have to maintain what you've got so we also use a similar set",
    "start": "2033370",
    "end": "2038710"
  },
  {
    "text": "of Jenkins jobs to manage these environments again we define the environments we give them names they",
    "start": "2038710",
    "end": "2044020"
  },
  {
    "text": "have paths to the location of those configs within the various repositories",
    "start": "2044020",
    "end": "2049510"
  },
  {
    "text": "and we use a similar set of processes get crypt get clean helm lint and helm",
    "start": "2049510",
    "end": "2055628"
  },
  {
    "text": "upgrade and thanks very much to Brad Ison from the infrastructure team who did a lot of this work and like really",
    "start": "2055629",
    "end": "2061330"
  },
  {
    "text": "insisted on making that the way that we did everything so then we have manual operations don't do them seriously don't",
    "start": "2061330",
    "end": "2068350"
  },
  {
    "text": "do them okay fine if you're going to do them at least make sure that you export things so thanks to Duffy Cooley for",
    "start": "2068350",
    "end": "2075760"
  },
  {
    "text": "this one I had no idea about this until he pointed out that there's an export flag that you can use of coop CT I'll",
    "start": "2075760",
    "end": "2081040"
  },
  {
    "text": "get and this removes all specific information that is to that cluster from",
    "start": "2081040",
    "end": "2088060"
  },
  {
    "text": "the resource so then you're just a coops ETL apply away from mucking up all the",
    "start": "2088060",
    "end": "2093128"
  },
  {
    "text": "work that your robot is done so finally disaster recovery things will go wrong this is LA yesterday this is",
    "start": "2093129",
    "end": "2101440"
  },
  {
    "text": "the 405 freeway going down by the Getty Center so for all those folks who came from Los Angeles have fun going home",
    "start": "2101440",
    "end": "2108690"
  },
  {
    "text": "have a plan and get prepared to be punched in the mouth and test the plan",
    "start": "2108690",
    "end": "2113850"
  },
  {
    "text": "do things like backing up Etsy d and running multiple clusters in different",
    "start": "2113850",
    "end": "2119440"
  },
  {
    "text": "failure domains and use certain purpose-built tools like hep do arc which is utility for managing disaster",
    "start": "2119440",
    "end": "2126100"
  },
  {
    "text": "recovery specifically for your kubernetes cluster so who is you what is",
    "start": "2126100",
    "end": "2131500"
  },
  {
    "text": "making sure that you know how to build out a multi cloud and multi kubernetes system i'm 19 seconds over",
    "start": "2131500",
    "end": "2136720"
  },
  {
    "text": "which is why I'm rushing so what are the common misunderstandings you know understanding or thinking that clouds",
    "start": "2136720",
    "end": "2142119"
  },
  {
    "text": "are beautiful and unique snowflakes and you have to do things differently they're not you just have to think about them differently all of these features",
    "start": "2142119",
    "end": "2148090"
  },
  {
    "text": "are available now this is not things that you have to wait on you can take this and do it all today so knowing why",
    "start": "2148090",
    "end": "2156609"
  },
  {
    "text": "how yeah we can do all this so tectonic you can free for up to 10 nodes it has",
    "start": "2156609",
    "end": "2161920"
  },
  {
    "text": "hooks for doing a lot of this stuff automatically you should check it out and we're hiring and that's me thanks",
    "start": "2161920",
    "end": "2170940"
  }
]