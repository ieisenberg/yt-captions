[
  {
    "start": "0",
    "end": "57000"
  },
  {
    "text": "thank you everyone for coming to the session I'm really proud to be a part of the 101 track and a little bit about",
    "start": "0",
    "end": "7200"
  },
  {
    "text": "myself I'm originally from Eastern Europe so my native language is Russian and coming to United States definitely I",
    "start": "7200",
    "end": "13799"
  },
  {
    "text": "had to learn English and what is interesting the transition for me from",
    "start": "13799",
    "end": "19650"
  },
  {
    "text": "being a Java developer to being a goal and developer was pretty similar so I had to learn different language I had to",
    "start": "19650",
    "end": "26519"
  },
  {
    "text": "understood the concepts and it was a pretty fun journey and I would like to",
    "start": "26519",
    "end": "32430"
  },
  {
    "text": "know a little bit more about you like how many of you use kubernetes in any way as a user as a developer",
    "start": "32430",
    "end": "38309"
  },
  {
    "text": "all right great how many of you right tools for kubernetes all right how many",
    "start": "38309",
    "end": "45030"
  },
  {
    "text": "of you use go oh I really like the diversity all right so this session is",
    "start": "45030",
    "end": "51180"
  },
  {
    "text": "going to be about using kubernetes api from go first let's talk about why we",
    "start": "51180",
    "end": "59430"
  },
  {
    "start": "57000",
    "end": "115000"
  },
  {
    "text": "all love kubernetes as a user you probably appreciate the feature set",
    "start": "59430",
    "end": "64768"
  },
  {
    "text": "there's so many things that you can use from communities for the workloads for",
    "start": "64769",
    "end": "70950"
  },
  {
    "text": "the node management and if you're a big company you appreciate the community's",
    "start": "70950",
    "end": "78900"
  },
  {
    "text": "ability to handle the big workloads in its performance and if your community is a contributor you definitely appreciate",
    "start": "78900",
    "end": "85110"
  },
  {
    "text": "the community which is very friendly very approachable very helpful but the",
    "start": "85110",
    "end": "91920"
  },
  {
    "text": "one thing that I wanted to focus on is kubernetes extensibility so that was",
    "start": "91920",
    "end": "97320"
  },
  {
    "text": "actually very useful from the developer",
    "start": "97320",
    "end": "102509"
  },
  {
    "text": "standpoint you can extend communities in so many ways you can develop your own api's if it suits your use case you can",
    "start": "102509",
    "end": "110520"
  },
  {
    "text": "use custom resource definitions we're going to talk more about it on the next slide and that extensibility that what",
    "start": "110520",
    "end": "118079"
  },
  {
    "text": "actually makes kubernetes a platform so what plus room means that is there's a core feature set and this pretty much",
    "start": "118079",
    "end": "125579"
  },
  {
    "text": "set and it can be extended by the third parties without actually disrupting the",
    "start": "125579",
    "end": "131250"
  },
  {
    "text": "main code base so you don't have to if you need something extra you don't have to go and modify the kubernetes",
    "start": "131250",
    "end": "136980"
  },
  {
    "text": "repo you can write it and push it to your own repo you can deploy it and use it even the EPS can be plugged and this",
    "start": "136980",
    "end": "144540"
  },
  {
    "text": "new API that you plug in can be used from the cube control and then you can",
    "start": "144540",
    "end": "150120"
  },
  {
    "text": "write your own custom controllers if you want to control your own resources and",
    "start": "150120",
    "end": "155510"
  },
  {
    "text": "that what makes the kubernetes ecosystem all the tools on the slide I was too",
    "start": "155510",
    "end": "161580"
  },
  {
    "start": "156000",
    "end": "197000"
  },
  {
    "text": "lazy to put them all but there's like a bunch of them there they would extend kubernetes those are basically the",
    "start": "161580",
    "end": "168390"
  },
  {
    "text": "custom controllers so they extend the login functionality they provide you the DNS the service mash the monitoring and",
    "start": "168390",
    "end": "178080"
  },
  {
    "text": "that is pretty cool and if you think about the ways that you would like to contribute to kubernetes well you would",
    "start": "178080",
    "end": "185160"
  },
  {
    "text": "like to extend existing communities functionality you would like to make a better logging then you you have to",
    "start": "185160",
    "end": "191700"
  },
  {
    "text": "become a part of the ecosystem and there",
    "start": "191700",
    "end": "197190"
  },
  {
    "start": "197000",
    "end": "305000"
  },
  {
    "text": "are several ways to extend kubernetes like on this slide I've listed all the main communities components we should",
    "start": "197190",
    "end": "203700"
  },
  {
    "text": "like the controller the API server the scheduler and then in the worker there's",
    "start": "203700",
    "end": "208920"
  },
  {
    "text": "a cubelet and their cube proxy and if you look at the cubelet there's a way to extend the continue around time",
    "start": "208920",
    "end": "214860"
  },
  {
    "text": "interface which is sounds pretty intimidating to me like too complicated I've never looked into it but there is a",
    "start": "214860",
    "end": "220980"
  },
  {
    "text": "way to do it so you can do docker you can use rocket then on the controller manager side there is a cloud provider",
    "start": "220980",
    "end": "227730"
  },
  {
    "text": "so you know that kubernetes supports multiple cloud providers like google",
    "start": "227730",
    "end": "232800"
  },
  {
    "text": "cloud provider Amazon and those that all these components are all pluggable and",
    "start": "232800",
    "end": "237930"
  },
  {
    "text": "there is a big initiative in the kubernetes like the some of them are part of the kubernetes core base but",
    "start": "237930",
    "end": "242940"
  },
  {
    "text": "they're working on moving it out so it's going to be more flexible like if you're a digital ocean for example you can",
    "start": "242940",
    "end": "248040"
  },
  {
    "text": "develop your own plugin and you don't have to contribute it to the kubernetes core you can just keep it in your own repo and handle the deployment and then",
    "start": "248040",
    "end": "255630"
  },
  {
    "text": "if you look at the API server there it becomes more interesting and more user",
    "start": "255630",
    "end": "261959"
  },
  {
    "text": "in developer friendly you can build your own API extension so kubernetes name",
    "start": "261960",
    "end": "267150"
  },
  {
    "text": "API they have a bunch of objects like no spots you can design your own objects",
    "start": "267150",
    "end": "273360"
  },
  {
    "text": "like for example if you do monitoring you can think about your custom object that you can use just for monitoring",
    "start": "273360",
    "end": "279090"
  },
  {
    "text": "purposes and then you can write custom controllers for these resources that",
    "start": "279090",
    "end": "284100"
  },
  {
    "text": "would came to the left of the slide and that's what we are going to be focusing on today writing the custom controllers",
    "start": "284100",
    "end": "290960"
  },
  {
    "text": "that component that just talks to the EPI it can monitor either existing",
    "start": "290960",
    "end": "295979"
  },
  {
    "text": "kubernetes resource it can monitor your custom resource then it can act on it modify it do a bunch of stuff and you'll",
    "start": "295979",
    "end": "306630"
  },
  {
    "start": "305000",
    "end": "386000"
  },
  {
    "text": "hear a term controller a lot and there is no exact definition for it if you",
    "start": "306630",
    "end": "311729"
  },
  {
    "text": "google what is kubernetes controller you're going to be given like a bunch of stuff and then I try to think about it",
    "start": "311729",
    "end": "319169"
  },
  {
    "text": "like what would be the best way to just to to explain it so have any one of you use kubernetes ingress so yeah",
    "start": "319169",
    "end": "327199"
  },
  {
    "text": "so communities ingress is just a way to provide the entry point for application",
    "start": "327199",
    "end": "332940"
  },
  {
    "text": "and to balance it but if you look closer the ingress kubernetes ingress resource",
    "start": "332940",
    "end": "337979"
  },
  {
    "text": "is just a shell it doesn't have any implementation so you create kubernetes ingress resource and then there is some",
    "start": "337979",
    "end": "344520"
  },
  {
    "text": "magic happens and what this magic is the people deploy the ingress controllers which is a separate piece of code that",
    "start": "344520",
    "end": "351570"
  },
  {
    "text": "runs monitors kubernetes ingress resource and configures the external",
    "start": "351570",
    "end": "357510"
  },
  {
    "text": "load balancer or internal load balancer to provide the actual functionality and then it modifies ingress resource will",
    "start": "357510",
    "end": "364680"
  },
  {
    "text": "load bouncer AP address so as a user you create your ingress and then you magically get the IP address back that's",
    "start": "364680",
    "end": "371520"
  },
  {
    "text": "what ingress controller does that's what controller is if you monitor something it does something and then it updates",
    "start": "371520",
    "end": "377669"
  },
  {
    "text": "the resource and gives gives it back to the user so now how does the control",
    "start": "377669",
    "end": "383669"
  },
  {
    "text": "what are the ways to talk to the kubernetes api the most simple and the",
    "start": "383669",
    "end": "389370"
  },
  {
    "start": "386000",
    "end": "438000"
  },
  {
    "text": "most user-friendly way is of course the UI the dashboard then cube CTO is also",
    "start": "389370",
    "end": "396840"
  },
  {
    "text": "very user friendly if you prefer CLI that's a great tool and then there is a programmatic access",
    "start": "396840",
    "end": "403229"
  },
  {
    "text": "so if you're gonna write your tool in any language go whatever you'd probably call this API",
    "start": "403229",
    "end": "409080"
  },
  {
    "text": "is programmatically you're not gonna be calling the cube control although it's like cube control has a bunch of commands that I actually appreciate a",
    "start": "409080",
    "end": "415530"
  },
  {
    "text": "lot like you see TL apply it's great so yeah programmatic access use an API but",
    "start": "415530",
    "end": "421740"
  },
  {
    "text": "then how are you call the CEP is so community's API server is just the HTTP server that accepts a request list",
    "start": "421740",
    "end": "428610"
  },
  {
    "text": "resources get the resource update remove but how do you call them like is it just",
    "start": "428610",
    "end": "435120"
  },
  {
    "text": "a row HTTP request no so well you can send us the Royal City request but",
    "start": "435120",
    "end": "441719"
  },
  {
    "text": "they're like a bunch of libraries out there that are developed for different languages for Python Java go and as any",
    "start": "441719",
    "end": "449520"
  },
  {
    "text": "language you can think of but those three are like the most popular one and today we are gonna focus on the top one",
    "start": "449520",
    "end": "456139"
  },
  {
    "text": "client client that go so that's a great library I've been using it a lot I work",
    "start": "456139",
    "end": "462360"
  },
  {
    "text": "for the company that does a lot of stuff for Internet is around kubernetes we use client that go a lot we Amani through",
    "start": "462360",
    "end": "468930"
  },
  {
    "text": "kubernetes clusters and yeah so I've been using this tool for a while",
    "start": "468930",
    "end": "474680"
  },
  {
    "text": "why would I recommend to use the go client as opposed to any other language so kubernetes is reading and go and I",
    "start": "474680",
    "end": "482190"
  },
  {
    "start": "475000",
    "end": "517000"
  },
  {
    "text": "always find it it's better to develop the client in the language in which the main component is written because like",
    "start": "482190",
    "end": "489389"
  },
  {
    "text": "it implies the Foster update if that if the main component gets updated like kubernetes gets updated client that go",
    "start": "489389",
    "end": "495210"
  },
  {
    "text": "better days almost immediately I'm not saying that the other tools don't get the immediate updates but the client",
    "start": "495210",
    "end": "500550"
  },
  {
    "text": "that goes probably the fastest one go is pretty simple it's easy to use and it's",
    "start": "500550",
    "end": "507330"
  },
  {
    "text": "very easy to be used for applications that are meant to be deployed in the container and that's something that we",
    "start": "507330",
    "end": "513810"
  },
  {
    "text": "are going to do today so the best way to",
    "start": "513810",
    "end": "518880"
  },
  {
    "start": "517000",
    "end": "546000"
  },
  {
    "text": "learn something is actually to build something from scratch so today we're",
    "start": "518880",
    "end": "524370"
  },
  {
    "text": "gonna build the tool that is going to monitor kubernetes nodes and it's gonna alert when the storage occupied by the",
    "start": "524370",
    "end": "532140"
  },
  {
    "text": "images Changez so here's the link to the to the repo where the Tory side it's a pretty",
    "start": "532140",
    "end": "538529"
  },
  {
    "text": "simple tool but you're gonna go from the very beginning to the very end you're gonna do it like everything so I as a",
    "start": "538529",
    "end": "546209"
  },
  {
    "start": "546000",
    "end": "632000"
  },
  {
    "text": "developer I like to sneak a pick up what people use for the development what makes their life easier so here are some",
    "start": "546209",
    "end": "553200"
  },
  {
    "text": "tools that I use for Democratic those are all internal tools open-source we",
    "start": "553200",
    "end": "559440"
  },
  {
    "text": "just use them you just use them in rancher to make the developer life easier so that go scale if you're not",
    "start": "559440",
    "end": "565589"
  },
  {
    "text": "familiar with go and you wonder what should be my go project structure you can just run this tool and it will",
    "start": "565589",
    "end": "570899"
  },
  {
    "text": "create the basic structure for you it will even create you the main class that you can actually invoke and run without",
    "start": "570899",
    "end": "576870"
  },
  {
    "text": "any compile error then the trash so it's a tool that manages the third-party",
    "start": "576870",
    "end": "585089"
  },
  {
    "text": "dependencies usually managing third-party dependencies can be very very painful and there are many tools",
    "start": "585089",
    "end": "592200"
  },
  {
    "text": "out there but I like this one just because it's very simple I'll show you how I use it",
    "start": "592200",
    "end": "597720"
  },
  {
    "text": "and then there is tool called dapper so if you have an application that is meant to run in the container then you would",
    "start": "597720",
    "end": "604770"
  },
  {
    "text": "probably like to build image for it I use Mac but if I run the container it",
    "start": "604770",
    "end": "610709"
  },
  {
    "text": "can be a one two so I need to find some simple way to actually build my application so it can run on a bunch so",
    "start": "610709",
    "end": "618720"
  },
  {
    "text": "I used the upper tool for that it will it will span the container we want from the one to image it will build your",
    "start": "618720",
    "end": "624660"
  },
  {
    "text": "program in it and it will give you by recognize docker image so what would be",
    "start": "624660",
    "end": "630959"
  },
  {
    "text": "the first step the first step would be to add client that go dependency so you",
    "start": "630959",
    "end": "637290"
  },
  {
    "start": "632000",
    "end": "699000"
  },
  {
    "text": "have to make sure that it this that the dependency is compatible with whatever could be or natus version you're using",
    "start": "637290",
    "end": "642709"
  },
  {
    "text": "so I'm currently using them in for this demo I'm using the I think it's for that",
    "start": "642709",
    "end": "648240"
  },
  {
    "text": "oh so it works pretty well with kubernetes 1.7 and one that a but I think there's a newer version of client",
    "start": "648240",
    "end": "654149"
  },
  {
    "text": "that go it's it shouldn't be any different so what you do you just add this to the file mentor conf and then",
    "start": "654149",
    "end": "661740"
  },
  {
    "text": "you just run the trash command the tool that I've shared earlier what is going to do is gonna pull all the third-party",
    "start": "661740",
    "end": "667900"
  },
  {
    "text": "dependencies to your project and that's it the job is done the tool is pretty smooth I haven't had any problems with",
    "start": "667900",
    "end": "674440"
  },
  {
    "text": "that then the second step so you define the vendor you got all the third-party",
    "start": "674440",
    "end": "680080"
  },
  {
    "text": "dependencies that you need by the way it's gonna it's gonna if this client that go uses some other dependencies",
    "start": "680080",
    "end": "686560"
  },
  {
    "text": "transitive dependencies it's gonna put in as well you don't have to define them in this file so trash will do all the",
    "start": "686560",
    "end": "692140"
  },
  {
    "text": "job for you to figuring out what needs to be pulled extra and that's it now the",
    "start": "692140",
    "end": "699700"
  },
  {
    "start": "699000",
    "end": "779000"
  },
  {
    "text": "second way if you look at the client that go dog the first thing you're gonna you're gonna see is like how you wanna",
    "start": "699700",
    "end": "705310"
  },
  {
    "text": "run it do you want around your tool in cluster or you want to run your tool outside of the cluster I'm just like I don't know",
    "start": "705310",
    "end": "712150"
  },
  {
    "text": "what are the advantages of what approaches so what did what does it mean to run in cluster it means that your",
    "start": "712150",
    "end": "717970"
  },
  {
    "text": "application is going around as a part of the content inside the container that is going to be deployed as a part in kubernetes what advantages it gives you",
    "start": "717970",
    "end": "725200"
  },
  {
    "text": "cuneta is going to manage your application you can configure health check if your application dies kubernetes is going to bring it back if",
    "start": "725200",
    "end": "732220"
  },
  {
    "text": "you want to run it on every node you can you can deploy it as a daemon set then why would you choose to run application",
    "start": "732220",
    "end": "739600"
  },
  {
    "text": "outside of the cluster one of the use cases I'm working on I'm one of my tools",
    "start": "739600",
    "end": "744910"
  },
  {
    "text": "actually monitors multiple kubernetes clusters so it has to be deployed outside so I deployed the outside around",
    "start": "744910",
    "end": "751570"
  },
  {
    "text": "as a binary I monitor it myself then another way like another good use case",
    "start": "751570",
    "end": "757210"
  },
  {
    "text": "for that it's like let's say you develop something and you really like you want to test things fast you don't want to",
    "start": "757210",
    "end": "762820"
  },
  {
    "text": "build the image every time you make a change so you just run it as a binary just build run into the binary and then",
    "start": "762820",
    "end": "769390"
  },
  {
    "text": "at the end you can choose override at the end my application is perfect I'm going to deploy it in cluster I'm going",
    "start": "769390",
    "end": "774400"
  },
  {
    "text": "to use the first approach for testing I'm going to use the second approach all right devil time I'm switching to my ID",
    "start": "774400",
    "end": "783940"
  },
  {
    "text": "I'm using Visual Studio code for go development",
    "start": "783940",
    "end": "790660"
  },
  {
    "text": "is that is the sisal okay should I make it bigger it's great and before we move",
    "start": "790660",
    "end": "798879"
  },
  {
    "text": "on to the IDE fun part any questions about the previous slides",
    "start": "798879",
    "end": "804430"
  },
  {
    "text": "no alright alright let's move on let's start from the top so in go here all the",
    "start": "804430",
    "end": "813100"
  },
  {
    "text": "imports it's all the third-party packages that I'm using in my tool and this one is my favorite one that's a CLI",
    "start": "813100",
    "end": "821459"
  },
  {
    "text": "so my application is going to accept the config parameter which is going to be",
    "start": "821459",
    "end": "826870"
  },
  {
    "text": "the path to the cube config file so my tool can run outside of the cluster so",
    "start": "826870",
    "end": "833350"
  },
  {
    "text": "if you got a cube control the cube configure is probably gonna be already there so just specify the path to it",
    "start": "833350",
    "end": "840850"
  },
  {
    "text": "when you run it when when you run it then once you get this config it's time",
    "start": "840850",
    "end": "848110"
  },
  {
    "text": "to get the client here we go",
    "start": "848110",
    "end": "855430"
  },
  {
    "start": "855000",
    "end": "922000"
  },
  {
    "text": "so this is this is the part where you actually decide on how you wanna how you",
    "start": "855430",
    "end": "861189"
  },
  {
    "text": "want to run your application do you want to run it outside of the clustering if",
    "start": "861189",
    "end": "866800"
  },
  {
    "text": "the faster config is not empty then you use this package to build the config",
    "start": "866800",
    "end": "872459"
  },
  {
    "text": "from the content of the file from this pot or if the path is empty then you're",
    "start": "872459",
    "end": "880750"
  },
  {
    "text": "on it in clustering so what it is like what are the internals so usually people use service account for authentication",
    "start": "880750",
    "end": "887110"
  },
  {
    "text": "in the pod what it means is that this default service account if you don't specify anything is going to be a sent",
    "start": "887110",
    "end": "892480"
  },
  {
    "text": "to the pod and it means that the credentials are going to be saved somewhere in the pod and this tool it",
    "start": "892480",
    "end": "897819"
  },
  {
    "text": "will know where to look for them to initiate that in cluster can see once",
    "start": "897819",
    "end": "903009"
  },
  {
    "text": "the config is created that's where you call kubernetes which is a client that",
    "start": "903009",
    "end": "908769"
  },
  {
    "text": "go package to create a new client for the config so we've got the client and",
    "start": "908769",
    "end": "915370"
  },
  {
    "text": "this client will help to make the request to the kubernetes api server now",
    "start": "915370",
    "end": "922209"
  },
  {
    "start": "922000",
    "end": "995000"
  },
  {
    "text": "before you actually start implementing something when I work with a new package I just test basic functions and one of",
    "start": "922209",
    "end": "929950"
  },
  {
    "text": "the basic functions for the HTTP server is crowd basic crowd create remove or",
    "start": "929950",
    "end": "936520"
  },
  {
    "text": "create read update and delete so let's move to this so the third basic function",
    "start": "936520",
    "end": "950710"
  },
  {
    "text": "we know that for our application we need to monitor the nodes so we need to get the list of the nodes somehow for that",
    "start": "950710",
    "end": "957490"
  },
  {
    "text": "I'm gonna call client set which we just created and then I'm going to call core kubernetes api is because i know that my",
    "start": "957490",
    "end": "964570"
  },
  {
    "text": "nose at the part of the core kubernetes api is and then i'm going to say okay so I need the nodes object and then comes",
    "start": "964570",
    "end": "972010"
  },
  {
    "text": "the operation that you that you are calling for this node function I want to list them and the you can pass the list",
    "start": "972010",
    "end": "981100"
  },
  {
    "text": "option parameters like for example you want to filter the node that you want to check like in my case and running mini",
    "start": "981100",
    "end": "986380"
  },
  {
    "text": "cube which is pretty simple to install and I know that the node name for them in your cube is always mini cube so I'm",
    "start": "986380",
    "end": "991810"
  },
  {
    "text": "just saying okay give me the mini cube now and what it can give you back it can",
    "start": "991810",
    "end": "997120"
  },
  {
    "start": "995000",
    "end": "1057000"
  },
  {
    "text": "give you either the nodes or it can give you the area so there is something something went wrong I'm just gonna skip",
    "start": "997120",
    "end": "1004130"
  },
  {
    "text": "if my nose are fine I got them I can iterate through them but I just choose",
    "start": "1004130",
    "end": "1009300"
  },
  {
    "text": "override I'm just going to get the first of them and then what you can do with the object that you get you can update",
    "start": "1009300",
    "end": "1014880"
  },
  {
    "text": "it so that's a second a creation that I demo here so basically you can set any",
    "start": "1014880",
    "end": "1020310"
  },
  {
    "text": "field you can reset any field on the object and then you call client set very similar to the list you can just instead",
    "start": "1020310",
    "end": "1028709"
  },
  {
    "text": "of list you call update and you pass the reference to the node and here's some commanded code which demonstrate removal",
    "start": "1028709",
    "end": "1035790"
  },
  {
    "text": "I didn't want to remove the emini cube now so I commented it out but it's pretty similar like you also call the",
    "start": "1035790",
    "end": "1042360"
  },
  {
    "text": "client set for api's you call the delete and then you can pass the delete options which is pretty cool like you can say",
    "start": "1042360",
    "end": "1048540"
  },
  {
    "text": "alright so what is grace period I'm passing the grace period that means delete my object but delete it only",
    "start": "1048540",
    "end": "1054360"
  },
  {
    "text": "after 10 seconds so okay so now we've got the client we know how to do",
    "start": "1054360",
    "end": "1059760"
  },
  {
    "start": "1057000",
    "end": "1112000"
  },
  {
    "text": "the basic crust now it's time to think about it like how we're going to implement our node polling so yeah and",
    "start": "1059760",
    "end": "1067080"
  },
  {
    "text": "that I usually start simple I don't think about like complicated way of",
    "start": "1067080",
    "end": "1073169"
  },
  {
    "text": "doing things so I start with boiler like the basic way to do it is to pull something by pulling something means that you list something and then you",
    "start": "1073169",
    "end": "1080130"
  },
  {
    "text": "wait for some period of time and then you list again and you continue doing it over and over again but there is",
    "start": "1080130",
    "end": "1086519"
  },
  {
    "text": "certainly downsides to this approach it's like you only need to get the information when something gets changed",
    "start": "1086519",
    "end": "1093000"
  },
  {
    "text": "like we are interested in the changes in the images storage and what I would like",
    "start": "1093000",
    "end": "1099120"
  },
  {
    "text": "to have ideally I would like to I would like to get the notification when something gets changed for the node so I",
    "start": "1099120",
    "end": "1105419"
  },
  {
    "text": "want to watch for the changes and I want to be notified on understant if ocation outside of what I'm gonna do so that's",
    "start": "1105419",
    "end": "1113250"
  },
  {
    "start": "1112000",
    "end": "1169000"
  },
  {
    "text": "where the informers come and now what is the informer Informer it's a very nice",
    "start": "1113250",
    "end": "1121919"
  },
  {
    "text": "way of watching for the resource and actually passing the callback function",
    "start": "1121919",
    "end": "1128490"
  },
  {
    "text": "which can be called when the resource is modified so here is an example here we",
    "start": "1128490",
    "end": "1134789"
  },
  {
    "text": "are calling the cache package which is the part of the client that go here you",
    "start": "1134789",
    "end": "1142500"
  },
  {
    "text": "go and then we say okay give me the informer and what we are passing to the",
    "start": "1142500",
    "end": "1147659"
  },
  {
    "text": "informant we are passing several things so first of all we are passing on the instructions of how we want our resource",
    "start": "1147659",
    "end": "1153720"
  },
  {
    "text": "to be listed and how we want our resource to be watched so we are passing the least watch function so you want to",
    "start": "1153720",
    "end": "1162389"
  },
  {
    "text": "get the notes and well know the note is not namespace so we just say namespace",
    "start": "1162389",
    "end": "1167669"
  },
  {
    "text": "all and we're gonna get all the fields so we are passing the watch list and",
    "start": "1167669",
    "end": "1173880"
  },
  {
    "start": "1169000",
    "end": "1237000"
  },
  {
    "text": "then we are passing the object that we want to get so we want to get the API node and then we are passing our",
    "start": "1173880",
    "end": "1180120"
  },
  {
    "text": "callback functions and we are passing the callback functions for to handle the ad and the remove we don't us add an",
    "start": "1180120",
    "end": "1187320"
  },
  {
    "text": "update we don't care about the remove because we know what once the node is gone we no longer care about the image storage capacity so I'm just saying okay",
    "start": "1187320",
    "end": "1194490"
  },
  {
    "text": "call this functions whenever the node gets added and whenever the node gets",
    "start": "1194490",
    "end": "1199679"
  },
  {
    "text": "updated and there is one more parameter that you can pass in which is a received",
    "start": "1199679",
    "end": "1204900"
  },
  {
    "text": "period so what is the resting period sometimes like well there are no perfect things in the world and sometimes the",
    "start": "1204900",
    "end": "1211140"
  },
  {
    "text": "list or watch can break it would be nice to have some backup mechanism which will be called periodically like what I'm",
    "start": "1211140",
    "end": "1217770"
  },
  {
    "text": "saying here like every 30 seconds even if nothing happens to the nodes please give me them back so I can I can do",
    "start": "1217770",
    "end": "1224730"
  },
  {
    "text": "something so even though even when the watch function fails by some reason I'm still backed up by this periodic calling",
    "start": "1224730",
    "end": "1231360"
  },
  {
    "text": "so I just I made it a bit extreme like 30 seconds you can do it five minutes or anything you like then so you're passing",
    "start": "1231360",
    "end": "1238020"
  },
  {
    "text": "all this parameters what are you getting back so you're going you're getting back the controller that you have that there",
    "start": "1238020",
    "end": "1246360"
  },
  {
    "text": "is going to actually do the watches and you're getting back something else very nice the store what a store this is cash",
    "start": "1246360",
    "end": "1252330"
  },
  {
    "text": "so you're getting back the cash which will be for sure updated to the latest",
    "start": "1252330",
    "end": "1257549"
  },
  {
    "text": "objects so you're a tool if if it's needed you don't have to call the kubernetes api is directly you can just",
    "start": "1257549",
    "end": "1264659"
  },
  {
    "text": "retrieve the objects from the cache and that will actually reduce the memory footprint so once you get this",
    "start": "1264659",
    "end": "1273659"
  },
  {
    "text": "controller back you have to start it to make it watch for something and then you're going to be notified on the",
    "start": "1273659",
    "end": "1280169"
  },
  {
    "text": "changes happen into your nodes now there",
    "start": "1280169",
    "end": "1285179"
  },
  {
    "start": "1284000",
    "end": "1343000"
  },
  {
    "text": "is an informer and there is something called shared informer so what is the difference what is in whether you use",
    "start": "1285179",
    "end": "1291929"
  },
  {
    "text": "one and whether you use another so you can see that in the informer you you can",
    "start": "1291929",
    "end": "1297059"
  },
  {
    "text": "define one function for every I creations like you define one callback to add one go back for update and you",
    "start": "1297059",
    "end": "1304289"
  },
  {
    "text": "get the cash back and the controller share Informer allows you to actually",
    "start": "1304289",
    "end": "1309779"
  },
  {
    "text": "add more than one callback for the function and it gives you back the shared cash as well so let's say you",
    "start": "1309779",
    "end": "1315990"
  },
  {
    "text": "have your application consists of multiple parts and there are multiple",
    "start": "1315990",
    "end": "1321559"
  },
  {
    "text": "there mark actually here an example I give just the same function but it's usually the different function",
    "start": "1321559",
    "end": "1327690"
  },
  {
    "text": "like different callback so different callback are interested in the node information and ideally they would like",
    "start": "1327690",
    "end": "1334649"
  },
  {
    "text": "to share the same cache so to reduce the memory footprint that's where I would use the shared Informer all right and",
    "start": "1334649",
    "end": "1343710"
  },
  {
    "text": "that before we move on I wanted to share the way of accessing the cache that we got back from the informer so here is an",
    "start": "1343710",
    "end": "1350820"
  },
  {
    "text": "example as our cache stores the node objects there is a way to retrieve it by the name which is going to be the cache",
    "start": "1350820",
    "end": "1357899"
  },
  {
    "text": "key and you get back and you get back the node and you can do whatever you like with that so what we did we created",
    "start": "1357899",
    "end": "1365220"
  },
  {
    "text": "the config we created the client we decided on the most optimal way of how",
    "start": "1365220",
    "end": "1372269"
  },
  {
    "text": "to actually watch for the node changes and well now it is time to actually run",
    "start": "1372269",
    "end": "1380130"
  },
  {
    "text": "the application so here is my go project it's called cube con and the first",
    "start": "1380130",
    "end": "1387720"
  },
  {
    "text": "command I'm going to do I'm going to round go build just to make sure it compiles all right it works and just to",
    "start": "1387720",
    "end": "1402120"
  },
  {
    "text": "share that the the structure of the directory it has some so this is just one class made up go this is a binary",
    "start": "1402120",
    "end": "1410100"
  },
  {
    "text": "that I've just created and this is a vendor folder that we previously populated with trash so we can look at",
    "start": "1410100",
    "end": "1417179"
  },
  {
    "text": "it what is this directory structure where this third party folder structure",
    "start": "1417179",
    "end": "1422299"
  },
  {
    "text": "it has a bunch of stuff on it and if you look at the kubernetes data oh that's",
    "start": "1422299",
    "end": "1427950"
  },
  {
    "text": "for our client that goes right so we've",
    "start": "1427950",
    "end": "1433230"
  },
  {
    "text": "build it now we run it how do we run it here we go so you run as a cube con and",
    "start": "1433230",
    "end": "1440370"
  },
  {
    "text": "then you're passing the config your to your cube config and then it starts doing its job but no changes yet so the",
    "start": "1440370",
    "end": "1447600"
  },
  {
    "text": "first the very first change is that you see you see okay something that changed for my node but it's only because it's",
    "start": "1447600",
    "end": "1453990"
  },
  {
    "text": "reading it for the very first time from the cache once it's read there are no changes so we have to",
    "start": "1453990",
    "end": "1460559"
  },
  {
    "text": "trigger the changes somehow I want to I want to input to be changed okay so what",
    "start": "1460559",
    "end": "1469559"
  },
  {
    "text": "I'm going to do I'm actually going to deploy something using the image that is not on the on the mini cube node yet",
    "start": "1469559",
    "end": "1474960"
  },
  {
    "text": "just to increase the size occupied by the images so I have this all right so",
    "start": "1474960",
    "end": "1482910"
  },
  {
    "text": "he it's just a simple deployment it's going to deploy Obon - 1804",
    "start": "1482910",
    "end": "1488270"
  },
  {
    "text": "all right and now we're going to watch and every change is happening please",
    "start": "1494050",
    "end": "1503190"
  },
  {
    "text": "please no let's check on our pal",
    "start": "1503190",
    "end": "1511980"
  },
  {
    "text": "okay so anyone give me the any image like any of your favorite images that I could pull and use don't say in genetic",
    "start": "1520320",
    "end": "1527200"
  },
  {
    "text": "because it already has internet busybox all right I don't think it matters I'm",
    "start": "1527200",
    "end": "1541420"
  },
  {
    "text": "just going to remove this deployment because I want to use the same name",
    "start": "1541420",
    "end": "1546120"
  },
  {
    "text": "all right",
    "start": "1554340",
    "end": "1557580"
  },
  {
    "text": "ah yeah you see this line yeah yeah the",
    "start": "1567110",
    "end": "1574850"
  },
  {
    "text": "tomb works okay but that's an example of how to run it outside the cluster so you run it as a binary now it is time to",
    "start": "1574850",
    "end": "1581540"
  },
  {
    "start": "1575000",
    "end": "1790000"
  },
  {
    "text": "deploy it as a kubernetes application and that's gonna be fun",
    "start": "1581540",
    "end": "1586970"
  },
  {
    "text": "all right so what do we start with we start with the docker file so here's a",
    "start": "1586970",
    "end": "1593030"
  },
  {
    "text": "doctor file that I use so the base is gonna be a bunch of and that's the commander he's got a cold which is my binary basically and now how I'm gonna",
    "start": "1593030",
    "end": "1600470"
  },
  {
    "text": "build this image I'm gonna build it using that tool that I've shared earlier called dapping and here is the way of",
    "start": "1600470",
    "end": "1606320"
  },
  {
    "text": "how I'm gonna call it so I'm gonna say okay my repo my doctor ha bleep was going to be aligned around zero eight my",
    "start": "1606320",
    "end": "1612890"
  },
  {
    "text": "tag all right let's make it today's date I always change the minor version",
    "start": "1612890",
    "end": "1619220"
  },
  {
    "text": "because like my code is never that good to change the major version so V zero seven zero and then I'm gonna call that",
    "start": "1619220",
    "end": "1625820"
  },
  {
    "text": "Bray so what it does it creates a docker",
    "start": "1625820",
    "end": "1631580"
  },
  {
    "text": "container from Ubuntu it builds the application in this Ubuntu container because if I build it on Mac and then I",
    "start": "1631580",
    "end": "1637790"
  },
  {
    "text": "try to run it on Ubuntu is gonna complain so I have to build it in a bun - I don't but and I don't want to create",
    "start": "1637790",
    "end": "1644330"
  },
  {
    "text": "like a virtual machine of something so I build it inside a container it's usually",
    "start": "1644330",
    "end": "1650000"
  },
  {
    "text": "first okay so let me just share it",
    "start": "1650000",
    "end": "1659690"
  },
  {
    "text": "let me kill something",
    "start": "1659690",
    "end": "1662740"
  },
  {
    "text": "this is right this is a different doctor",
    "start": "1666500",
    "end": "1672210"
  },
  {
    "text": "files yeah that's what DARPA does it creates a container it builds the application and then it gives you back",
    "start": "1672210",
    "end": "1677880"
  },
  {
    "text": "the image the image gets stored in Mike it doesn't push it doesn't push to the",
    "start": "1677880",
    "end": "1683850"
  },
  {
    "text": "to the docker hub automatically so you have to do it manually",
    "start": "1683850",
    "end": "1689240"
  },
  {
    "text": "the output is like it just gives the image so here you see it built the image cubic on V zero seven zero so and it's",
    "start": "1693800",
    "end": "1700800"
  },
  {
    "text": "on my machine so now I have to push it to the doctor huh",
    "start": "1700800",
    "end": "1706039"
  },
  {
    "text": "no no it's on my machine all right so I've built this image and I'm gonna push",
    "start": "1706670",
    "end": "1712740"
  },
  {
    "text": "it and now to deploy it on the UM kubernetes we have to define the llamo",
    "start": "1712740",
    "end": "1718380"
  },
  {
    "text": "file again let me let me remove the",
    "start": "1718380",
    "end": "1722930"
  },
  {
    "text": "alright so I'm removing the old stuff",
    "start": "1726680",
    "end": "1731120"
  },
  {
    "text": "let's look at the llamo definition for the the tool so it's simple it's just",
    "start": "1732290",
    "end": "1738930"
  },
  {
    "text": "okay so we just have to change the image to the one that we've just built and that's the name the cube condiamo image",
    "start": "1738930",
    "end": "1746400"
  },
  {
    "text": "full policy all this okay I think I've tape it okay let's see what happens",
    "start": "1746400",
    "end": "1758270"
  },
  {
    "text": "something tells me that",
    "start": "1758270",
    "end": "1762020"
  },
  {
    "text": "okay so one is terminating that's the one that we just killed and this one is continue creating that's the one that is",
    "start": "1767360",
    "end": "1773280"
  },
  {
    "text": "new one that's probably still pulling the image okay so this is the one I'm",
    "start": "1773280",
    "end": "1785910"
  },
  {
    "text": "gonna I'm going to look at blocks for this container oh it doesn't like",
    "start": "1785910",
    "end": "1791640"
  },
  {
    "start": "1790000",
    "end": "1923000"
  },
  {
    "text": "something let's look at what it doesn't like so looks like some permissions that",
    "start": "1791640",
    "end": "1796950"
  },
  {
    "text": "said which is an hour back I have our back in enable in my mini queue so it means that by default nobody can just",
    "start": "1796950",
    "end": "1802710"
  },
  {
    "text": "run their tools and execute any random API calls I have to grant the permissions to the tool to actually do",
    "start": "1802710",
    "end": "1809520"
  },
  {
    "text": "something so let's kill this bad guy and let's",
    "start": "1809520",
    "end": "1821850"
  },
  {
    "text": "define the permissions",
    "start": "1821850",
    "end": "1824660"
  },
  {
    "text": "all right so what are we gonna do we're gonna create a cluster row which is gonna allow to operate on the nodes",
    "start": "1829250",
    "end": "1836750"
  },
  {
    "text": "object and it's gonna allow to get watch lists and update so all the code that we",
    "start": "1836750",
    "end": "1843950"
  },
  {
    "text": "use in the tool and then we're going to create a service account that can be later on assigned to our application and",
    "start": "1843950",
    "end": "1850929"
  },
  {
    "text": "we're gonna call it cube Khan I already have it deployed I think so",
    "start": "1850929",
    "end": "1859429"
  },
  {
    "text": "I'm just gonna call apply to the right stuff all right and now we're going to",
    "start": "1859429",
    "end": "1867320"
  },
  {
    "text": "deploy the proper application let's look at it so the only one difference from the previous Yama file is here you have",
    "start": "1867320",
    "end": "1873320"
  },
  {
    "text": "the service accounting which is a cube con and same type of okay",
    "start": "1873320",
    "end": "1880630"
  },
  {
    "text": "let's see now so we are getting the pod",
    "start": "1886059",
    "end": "1891369"
  },
  {
    "text": "and we're gonna see the logs looking better now cool so now our application runs as a",
    "start": "1894070",
    "end": "1901039"
  },
  {
    "text": "kubernetes pod and well I'm down thank you yes no difference is just another",
    "start": "1901039",
    "end": "1924109"
  },
  {
    "start": "1923000",
    "end": "2007000"
  },
  {
    "text": "definition and I usually like okay what I see a new definition I think it's a new thing but it's usually the same",
    "start": "1924109",
    "end": "1929779"
  },
  {
    "text": "thing just you know explain differently so controller is something that just does this custom stuff outside of the",
    "start": "1929779",
    "end": "1935899"
  },
  {
    "text": "kubernetes so but it can be deployed in the regular pod it can be deployed as a deployment anything you can do a bunch",
    "start": "1935899",
    "end": "1950059"
  },
  {
    "text": "of stuff like you can you can extend the kubernetes api but what if you just monitored the kubernetes resource is",
    "start": "1950059",
    "end": "1956779"
  },
  {
    "text": "similar to the way like I do what if you just want to yeah well if it does some",
    "start": "1956779",
    "end": "1965269"
  },
  {
    "text": "useful thing you can call it a controller yeah any more questions",
    "start": "1965269",
    "end": "1972730"
  },
  {
    "text": "so usually I use Alpine actually but this tool that I've shared earlier the go scale that actually creates the basic",
    "start": "1981390",
    "end": "1987760"
  },
  {
    "text": "structure it uses a bun - I'm not sure why I'll find is my favorite one because it's so tiny and just for this you don't",
    "start": "1987760",
    "end": "1995320"
  },
  {
    "text": "need one - you don't need a wanta for this kind of functionality yeah it can",
    "start": "1995320",
    "end": "2007860"
  },
  {
    "text": "be anything can be monitoring this is basically bringing the resource from the DS from the actual state to the desired",
    "start": "2007860",
    "end": "2014730"
  },
  {
    "text": "state that's how they put it and that's how like I explained it for the ingress controller like ingress what is the",
    "start": "2014730",
    "end": "2020100"
  },
  {
    "text": "desired state of the ingress just give me the access to the load balancer and what is the actual state like when the",
    "start": "2020100",
    "end": "2027300"
  },
  {
    "text": "user creates ingress he just says okay so what I want to do I want to balance between service a and service be my",
    "start": "2027300",
    "end": "2033420"
  },
  {
    "text": "desire state I want to get a load bouncer IP address and the ingress controller will actually populate this",
    "start": "2033420",
    "end": "2039060"
  },
  {
    "text": "ingress with a IP address of the load bouncer that is gonna create somewhere oh yeah of course",
    "start": "2039060",
    "end": "2052970"
  },
  {
    "text": "and yes I'm using PowerPoint for my slides okay here you go",
    "start": "2052970",
    "end": "2061190"
  },
  {
    "text": "of course",
    "start": "2061190",
    "end": "2064429"
  },
  {
    "text": "no advantages unless you unless your permissions don't let you you know leave",
    "start": "2073280",
    "end": "2078330"
  },
  {
    "text": "the resources which I ran into yeah yeah",
    "start": "2078330",
    "end": "2092960"
  },
  {
    "text": "yeah that's that's actually the informal part so basically the shared Informer is meant to watch for the resource let me",
    "start": "2100130",
    "end": "2107160"
  },
  {
    "text": "go back to the let me go back from this 4.22 ID no no I'm happy to go to idea I",
    "start": "2107160",
    "end": "2112830"
  },
  {
    "text": "love ID better than PowerPoint okay so this is it this watch is just an",
    "start": "2112830",
    "end": "2121350"
  },
  {
    "text": "instruction for the informer on how to how to watch the resources so here what I'm going to do I'm gonna watch on the",
    "start": "2121350",
    "end": "2127920"
  },
  {
    "text": "no changes like all the nodes in my system please watch for their changes whenever the add or update happens call",
    "start": "2127920",
    "end": "2136619"
  },
  {
    "text": "these functions and those are mine functions will the node children when",
    "start": "2136619",
    "end": "2150390"
  },
  {
    "text": "the node definition changes by some by some way so if you look at the cube keep CTL if you do Oh Jason it will give you",
    "start": "2150390",
    "end": "2163080"
  },
  {
    "text": "like the entire object because keep CTL doesn't display you everything so you look at the the Jason output and what do",
    "start": "2163080",
    "end": "2169859"
  },
  {
    "text": "you see here you actually see all the images oh yeah somebody yeah so it gives",
    "start": "2169859",
    "end": "2176609"
  },
  {
    "text": "you the list of the images with their names and the respective sizes so and yeah if if if node object gets changed",
    "start": "2176609",
    "end": "2184109"
  },
  {
    "text": "gets changed it doesn't mean that the image gets changed but we like we are making our best effort here so",
    "start": "2184109",
    "end": "2191900"
  },
  {
    "text": "watches from a piano you can watch any you can watch any resource there is a",
    "start": "2194619",
    "end": "2200710"
  },
  {
    "text": "bit of a difference if you decide to watch the customer resource it's not as easy but it's doable but if you want to",
    "start": "2200710",
    "end": "2208029"
  },
  {
    "text": "watch this to any core community this resource like pods it's very similar similar thing yeah I just",
    "start": "2208029",
    "end": "2225609"
  },
  {
    "text": "it's the the advantages of that is basically a cache you've you've said that cache is very important and then it",
    "start": "2225609",
    "end": "2232450"
  },
  {
    "text": "handles all the like a failure cases like what if what if the connection to the API server is lost then it's going to handle it for you so",
    "start": "2232450",
    "end": "2238690"
  },
  {
    "text": "you don't have to worry about it's like okay if something wrong just go this way so the inform is gonna handle it for you",
    "start": "2238690",
    "end": "2245970"
  },
  {
    "text": "no more question all right thank you everyone yeah",
    "start": "2247619",
    "end": "2254490"
  }
]