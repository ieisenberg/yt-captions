[
  {
    "text": "can you all hear me okay in the back awesome yeah so thank you for joining us",
    "start": "120",
    "end": "6020"
  },
  {
    "text": "today we'll be talking about securing communication between meshes and beyond",
    "start": "6020",
    "end": "12059"
  },
  {
    "text": "the spiffy Federation I'm having Gilman I work for a site Alice mentioned I'm a maintainer of spiffy and spire project",
    "start": "12059",
    "end": "18900"
  },
  {
    "text": "I'm here with Oliver hi I'm Oliver working in Google for a steel awesome so",
    "start": "18900",
    "end": "26519"
  },
  {
    "text": "today we'll talk about first kind of kick off with the role of identity in a",
    "start": "26519",
    "end": "33930"
  },
  {
    "text": "service what is a service mesh why is identity important in one I'll toss it to Oliver he'll talk a little bit about",
    "start": "33930",
    "end": "40520"
  },
  {
    "text": "some of the challenges that are presented when you have more than one mesh or when you have hybrid workloads",
    "start": "40520",
    "end": "45750"
  },
  {
    "text": "where you have some stuff that is on a security mission some stuff that is not on security mesh then we're going to",
    "start": "45750",
    "end": "52020"
  },
  {
    "text": "talk a little bit about making Federation how it addresses how to address these problems and finally a",
    "start": "52020",
    "end": "58350"
  },
  {
    "text": "demo which I hope works which will show us pitting Federation in action between",
    "start": "58350",
    "end": "64170"
  },
  {
    "text": "estion and inspire so I thought it would be",
    "start": "64170",
    "end": "69180"
  },
  {
    "text": "appropriate to start the talk with the question like what is a service mesh I",
    "start": "69180",
    "end": "74509"
  },
  {
    "text": "thought about it for a while like what what if I would make up a definition what would it be and I was curious when",
    "start": "74509",
    "end": "81030"
  },
  {
    "text": "doing this talk of what other folks thought security mesh would be so I googled it and and I then this is the first thing",
    "start": "81030",
    "end": "89189"
  },
  {
    "text": "that popped up it says the service mesh is a configurable low-latency infrastructure layer designed to handle a high volume of network based inter",
    "start": "89189",
    "end": "96180"
  },
  {
    "text": "process communication among application infrastructure services using application programming interfaces and",
    "start": "96180",
    "end": "104820"
  },
  {
    "text": "so if you're anything like me there's like raises more questions and the",
    "start": "104820",
    "end": "111689"
  },
  {
    "text": "answer is and this is not a slide on nginx it's just the first thing that popped up I looked at a bunch of other definitions say they are all kind of",
    "start": "111689",
    "end": "117840"
  },
  {
    "text": "equally confusing some better than others but for our talk I thought we'd",
    "start": "117840",
    "end": "123030"
  },
  {
    "text": "kind of use the simple definition of service mesh is an architectural pattern",
    "start": "123030",
    "end": "129270"
  },
  {
    "text": "that provides common network services as a feature of infrastructure I think that wraps it up",
    "start": "129270",
    "end": "136860"
  },
  {
    "text": "fairly well and give us a little bit more concrete okay so this is the",
    "start": "136860",
    "end": "144239"
  },
  {
    "text": "context that that we'll use for this talk and you know the question that at",
    "start": "144239",
    "end": "149459"
  },
  {
    "text": "least in my mind this the statement elicits is you know how do you accomplish this how do you how do you provide these kinds of services as",
    "start": "149459",
    "end": "156090"
  },
  {
    "text": "feature of the infrastructure and remove those concerns from application the most popular way to do that is to use a proxy",
    "start": "156090",
    "end": "163040"
  },
  {
    "text": "where all this logic these network services and this infrastructure logic is kind of extracted from the",
    "start": "163040",
    "end": "168299"
  },
  {
    "text": "application and then put into a dedicated layer seven proxy that is deployed with every application this",
    "start": "168299",
    "end": "176010"
  },
  {
    "text": "proxy provides like really convenient control point for traffic coming in and out of that happen provides that that",
    "start": "176010",
    "end": "181650"
  },
  {
    "text": "point of control for all the services to be kind of exposed and we'll talk a little bit about what those services",
    "start": "181650",
    "end": "187470"
  },
  {
    "text": "might be there's a whole bevy of features that these proxies can bring",
    "start": "187470",
    "end": "193349"
  },
  {
    "text": "this is just a few of them these are some of the bigger capabilities I think",
    "start": "193349",
    "end": "198480"
  },
  {
    "text": "folks associated with service mesh there are others of course or many others but these are just the ones that that I find",
    "start": "198480",
    "end": "204480"
  },
  {
    "text": "that are like most motivating the most common reasons that folks will come and ask about service matters for these and",
    "start": "204480",
    "end": "210980"
  },
  {
    "text": "you'll note that there's no shortage of security related features here among",
    "start": "210980",
    "end": "216630"
  },
  {
    "text": "them strong authentication authorization and mutual TLS or some of the more",
    "start": "216630",
    "end": "222030"
  },
  {
    "text": "popular security features folks look for when deploying service mesh but in order to deliver on those things are some",
    "start": "222030",
    "end": "228299"
  },
  {
    "text": "prerequisites of course you think about authentication authorization that's all",
    "start": "228299",
    "end": "234660"
  },
  {
    "text": "about like can I talk to B and how does B know that it's really a those",
    "start": "234660",
    "end": "240569"
  },
  {
    "text": "requesting this thing so it becomes clear that in order to answer that question you need like a clear",
    "start": "240569",
    "end": "246299"
  },
  {
    "text": "definition of what a is and what B is so you need identity we call that service",
    "start": "246299",
    "end": "253049"
  },
  {
    "text": "or workload identity that's where spiffy comes in spiffy is a identity framework",
    "start": "253049",
    "end": "258930"
  },
  {
    "text": "for production workloads actually it stands for secure production identity framework for everyone",
    "start": "258930",
    "end": "264040"
  },
  {
    "text": "and it provides a standardized notion of identity and provides these well-defined",
    "start": "264040",
    "end": "269170"
  },
  {
    "text": "methods for proving that identity it all actually also provides all defined methods for obtaining that identity but",
    "start": "269170",
    "end": "275800"
  },
  {
    "text": "those bits are out of scope for this talk today this is what a smithy ID",
    "start": "275800",
    "end": "282070"
  },
  {
    "text": "looks like it's a structured string essentially models URI which represents",
    "start": "282070",
    "end": "289180"
  },
  {
    "text": "a workloads identity and one way to think about it it's like a username for",
    "start": "289180",
    "end": "294370"
  },
  {
    "text": "workloads right and there's two components of this thing the first is the trust domain which is the one on the",
    "start": "294370",
    "end": "300520"
  },
  {
    "text": "left here that one of the blue underlined and then the second one is the path with a green underline and a",
    "start": "300520",
    "end": "306310"
  },
  {
    "text": "trusted main represents a the security domain that the workload is residing him so one example might be staging her",
    "start": "306310",
    "end": "313180"
  },
  {
    "text": "production and then the path represents the name of the workload and and the",
    "start": "313180",
    "end": "318400"
  },
  {
    "text": "spivey spec we're not very prescriptive about the formation of this you can form the path however you want you to form",
    "start": "318400",
    "end": "323890"
  },
  {
    "text": "the trust I mean however you want we're only specific about the meaning of those of those things so next up we have",
    "start": "323890",
    "end": "331350"
  },
  {
    "text": "what we call an identity document it's called an S Vettes they feed verifiable identity document and this is how we",
    "start": "331350",
    "end": "338500"
  },
  {
    "text": "define that the how you prove the identity to someone else right and there",
    "start": "338500",
    "end": "343600"
  },
  {
    "text": "are two flavors of this two ways to do it one which is based on x.509",
    "start": "343600",
    "end": "349150"
  },
  {
    "text": "certificates one which is based on JWT for this talk we'll we'll focus on only",
    "start": "349150",
    "end": "355090"
  },
  {
    "text": "x.509 sv and that's important because",
    "start": "355090",
    "end": "360180"
  },
  {
    "text": "x.509 certificates can be used not just for authentication but they can also be used to establish mutual TLS now to",
    "start": "360180",
    "end": "372700"
  },
  {
    "text": "create these s fibs and manage the identities associated with them you need",
    "start": "372700",
    "end": "378370"
  },
  {
    "text": "some sort of authority and a service mesh usually you have this centralized",
    "start": "378370",
    "end": "383590"
  },
  {
    "text": "authority is the most common way to do it and this responsible not just for creating and managing but also",
    "start": "383590",
    "end": "389050"
  },
  {
    "text": "distributing these identities throughout the mesh and this Authority is common to",
    "start": "389050",
    "end": "394390"
  },
  {
    "text": "all the applications and all the proxies that live inside that everyone kind of mutually trust it and",
    "start": "394390",
    "end": "399460"
  },
  {
    "text": "trust the identities that it creates by default but this raises the question",
    "start": "399460",
    "end": "404470"
  },
  {
    "text": "what happens when you have more than one right or what happens when you have you",
    "start": "404470",
    "end": "411759"
  },
  {
    "text": "know some things that are inside of some things that are outside and maybe they after two different authorities so that",
    "start": "411759",
    "end": "416919"
  },
  {
    "text": "the Smithee provides these things clearly needed to talk to each other rice Biffy provides this lingua franca",
    "start": "416919",
    "end": "421930"
  },
  {
    "text": "over which they can communicate but you still need to manage these authorities",
    "start": "421930",
    "end": "427240"
  },
  {
    "text": "right and what are the right ways to think about the authorities when you have multiple measures or you have this",
    "start": "427240",
    "end": "433270"
  },
  {
    "text": "kind of hybrid deployment so I'm gonna toss this to Oliver he's going to talk a little bit more about the challenges",
    "start": "433270",
    "end": "438460"
  },
  {
    "text": "that pop up in these multi mesh configurations awesome Thank You Evan um",
    "start": "438460",
    "end": "445080"
  },
  {
    "text": "okay when talking about hybrid and multi mash examples what are the use cases",
    "start": "445080",
    "end": "452050"
  },
  {
    "text": "right we can think about a lot but there are three typical things that we want to",
    "start": "452050",
    "end": "457750"
  },
  {
    "text": "mention here suppose I'm running an operation and Alvin is running another",
    "start": "457750",
    "end": "462810"
  },
  {
    "text": "we've got a deal and we want to feather in our services how do we do that that's",
    "start": "462810",
    "end": "470349"
  },
  {
    "text": "a first use case second one is I'm a service provider and I want to expose my service to my tenants I get a bunch of",
    "start": "470349",
    "end": "477430"
  },
  {
    "text": "different tenants on to secure the connection with them and allow them to call my service security the third one",
    "start": "477430",
    "end": "484570"
  },
  {
    "text": "would be I'm say running a big company that is using pretty old infrastructure",
    "start": "484570",
    "end": "492669"
  },
  {
    "text": "I don't want to adopt the new fancy service match framework I do that",
    "start": "492669",
    "end": "498009"
  },
  {
    "text": "gradually so that I want their sources running in the mesh in the new mesh to be able to still work with their",
    "start": "498009",
    "end": "504699"
  },
  {
    "text": "services in the old infrastructure then we come to their basic rules you need to",
    "start": "504699",
    "end": "512229"
  },
  {
    "text": "consider in terms of the security so we list the four of them here so first all",
    "start": "512229",
    "end": "518890"
  },
  {
    "text": "the identities and must be derived from a trusted root right you don't want any",
    "start": "518890",
    "end": "525610"
  },
  {
    "text": "untrusted PKI the usual identity is that pretending to be some identity",
    "start": "525610",
    "end": "531130"
  },
  {
    "text": "or federated Network the second way is trusting me associated with their parties if I'm associating with Alan I",
    "start": "531130",
    "end": "539980"
  },
  {
    "text": "want Evans PKI to be only able to usual identities for",
    "start": "539980",
    "end": "545080"
  },
  {
    "text": "his trust domain so that a compromised seeing his trust woman won't be able to",
    "start": "545080",
    "end": "551380"
  },
  {
    "text": "have a big blast blast radius to impact my service mesh identities the third one",
    "start": "551380",
    "end": "559150"
  },
  {
    "text": "is of course we want their transport plus authentication compatibility compatibility to be able to establish",
    "start": "559150",
    "end": "566830"
  },
  {
    "text": "their authentication between the message fourth one of course security policies",
    "start": "566830",
    "end": "572050"
  },
  {
    "text": "we don't want any unauthorized services coming from external to be able to call",
    "start": "572050",
    "end": "579160"
  },
  {
    "text": "my service successfully okay in this presentation we are going to focus on",
    "start": "579160",
    "end": "585790"
  },
  {
    "text": "their first two items which are about identities when we're talking about identity Federation's",
    "start": "585790",
    "end": "591870"
  },
  {
    "text": "may be their simplest idea camera or taste this picture you share the common route right this is well this is common",
    "start": "591870",
    "end": "599680"
  },
  {
    "text": "in big organizations if you have like multiple transformants and they are",
    "start": "599680",
    "end": "605890"
  },
  {
    "text": "running in their different departments they could share their common route and",
    "start": "605890",
    "end": "611670"
  },
  {
    "text": "you have intermediaries that had derived from the common route the issue certificates for the workloads in the",
    "start": "611670",
    "end": "617980"
  },
  {
    "text": "corresponding meshes okay well that is true in many cases and there are",
    "start": "617980",
    "end": "623410"
  },
  {
    "text": "limitations in industry in depart independent parties are not likely to",
    "start": "623410",
    "end": "628690"
  },
  {
    "text": "share the common with you right and the second one is if you are going to share",
    "start": "628690",
    "end": "633970"
  },
  {
    "text": "the common Lussier you're still facing a problem that your mesh Authority are",
    "start": "633970",
    "end": "639390"
  },
  {
    "text": "different from the rest of the authorities for the mesh eternally so we need name constraints on the",
    "start": "639390",
    "end": "646930"
  },
  {
    "text": "intermediacy A's but unfortunately the name constraints are not commonly used and respected in",
    "start": "646930",
    "end": "653590"
  },
  {
    "text": "the industry second approach we come to the multipole independent authorities so",
    "start": "653590",
    "end": "661630"
  },
  {
    "text": "each mesh runs a single read stand-alone Lussier and we favorite them",
    "start": "661630",
    "end": "668260"
  },
  {
    "text": "right this solved the problem of the common rule CA but there are also",
    "start": "668260",
    "end": "673990"
  },
  {
    "text": "challenges so first of all how does their measure is securely exchange the root of trust the second one in this",
    "start": "673990",
    "end": "682540"
  },
  {
    "text": "picture how to prevent the Lussier 2 from issuing the identities for their",
    "start": "682540",
    "end": "688210"
  },
  {
    "text": "mash rat and the buzzer vice versa right then the solution is",
    "start": "688210",
    "end": "693940"
  },
  {
    "text": "what CB fee very let's go back to avan alright yeah so this cross-domain",
    "start": "693940",
    "end": "705520"
  },
  {
    "text": "communication where different authorities are involved as exactly what spiffy Federation is designed to solve",
    "start": "705520",
    "end": "713220"
  },
  {
    "text": "specifically how to identify how to validate identities and other trust domains and to do this we define a",
    "start": "713220",
    "end": "720520"
  },
  {
    "text": "fairly simple API and I quote API because in the end of the day is really",
    "start": "720520",
    "end": "726760"
  },
  {
    "text": "just a simple HTTP GET there's not anything complicated every a spiffy",
    "start": "726760",
    "end": "735070"
  },
  {
    "text": "trust domain exposes an endpoint that serves this this HTTP request and we",
    "start": "735070",
    "end": "740140"
  },
  {
    "text": "call that the spiffy bundle endpoint and",
    "start": "740140",
    "end": "745260"
  },
  {
    "text": "when you call that endpoint there's a document that's returned which contains the authorities public keys",
    "start": "745260",
    "end": "751290"
  },
  {
    "text": "this provides the mechanism for exchanging the authority information between each other once these keys are",
    "start": "751290",
    "end": "756760"
  },
  {
    "text": "obtained identities from that trust I mean from which you obtain them can be validated using those keys so spiffy",
    "start": "756760",
    "end": "764650"
  },
  {
    "text": "bundle itself is just a shade of eks document if you've ever used o ADC",
    "start": "764650",
    "end": "769810"
  },
  {
    "text": "before it's might sound familiar this is an example of what a spiffy bundle looks",
    "start": "769810",
    "end": "774910"
  },
  {
    "text": "like and this is what is returned by a spiffy bundle end point and you know see",
    "start": "774910",
    "end": "780730"
  },
  {
    "text": "in this example that both estimate types are represented I have alluded before that both tradable ETN x509 er are",
    "start": "780730",
    "end": "788080"
  },
  {
    "text": "supported by spiffy but obviously for this talk we're talking only x.509 and",
    "start": "788080",
    "end": "795120"
  },
  {
    "text": "the x5 c the x5 seek you can see they're kind of in the middle which has the ellipses is",
    "start": "795120",
    "end": "802420"
  },
  {
    "text": "normally aware of see a certificate lives but I truncated truncating it out so that it would fit on the slide but if",
    "start": "802420",
    "end": "808870"
  },
  {
    "text": "we zoom out and we think what does a full picture look like it's something like this so we can see that there are",
    "start": "808870",
    "end": "816070"
  },
  {
    "text": "two authorities red authority and green Authority and each Authority provides identities for applications and proxies",
    "start": "816070",
    "end": "822519"
  },
  {
    "text": "of those in their respective trust image or service meshes but they also exchange",
    "start": "822519",
    "end": "828420"
  },
  {
    "text": "information with each other via fifteen Federation and this information the public keys of the authority are also",
    "start": "828420",
    "end": "835570"
  },
  {
    "text": "propagated down to the applications and the proxies and this allows them to authenticate identities of workloads which are it not other domains so you",
    "start": "835570",
    "end": "842410"
  },
  {
    "text": "know when the workload and the read domain encounters a workload that has an identity from the green domain it has",
    "start": "842410",
    "end": "847810"
  },
  {
    "text": "the keys necessary to validate that identity so this is how smoothly",
    "start": "847810",
    "end": "853449"
  },
  {
    "text": "Federation works kind of in a nutshell today we will show you how spiffy",
    "start": "853449",
    "end": "858970"
  },
  {
    "text": "Federation works in action between an STI deployment and respire deployment on",
    "start": "858970",
    "end": "864639"
  },
  {
    "text": "the case you have not familiar with either these projects this do is a full-blown service mesh that provides",
    "start": "864639",
    "end": "871120"
  },
  {
    "text": "all those fancy bells and whistles that we showed earlier but under the hood at use is also spiffy for identity inspire",
    "start": "871120",
    "end": "879190"
  },
  {
    "text": "is a spiffy implementation their sole purpose in life is to create manage and",
    "start": "879190",
    "end": "885190"
  },
  {
    "text": "issues with the identities well they're most serviced measures have a similar component inside them this project just",
    "start": "885190",
    "end": "891730"
  },
  {
    "text": "focused purely on this does not provide any of the other fancy stuff so this is",
    "start": "891730",
    "end": "897850"
  },
  {
    "text": "a simplified diagram of the demo that will show you on the left is an sto",
    "start": "897850",
    "end": "904690"
  },
  {
    "text": "cluster and we have this component called ifs which is the sto Federation",
    "start": "904690",
    "end": "909730"
  },
  {
    "text": "server when it is the one which exposes the bundle endpoint server and also a bundle endpoint client to fetch bundles",
    "start": "909730",
    "end": "916389"
  },
  {
    "text": "from other trust commands now the right hand side we have spire deployment and",
    "start": "916389",
    "end": "921459"
  },
  {
    "text": "this is just spires deployed just on regular VMs there's no kubernetes or mesh or anything like that there is a",
    "start": "921459",
    "end": "927730"
  },
  {
    "text": "proxy but it is not there's not as far far from managed the",
    "start": "927730",
    "end": "933310"
  },
  {
    "text": "same way that the work was in this dealer and on the spire side to aspire server which is at the top there",
    "start": "933310",
    "end": "939420"
  },
  {
    "text": "built-in has spiffy bundle endpoint server and client spire and the right",
    "start": "939420",
    "end": "945130"
  },
  {
    "text": "hand side acts as the identity issuer for the spire deployment and on the left hand side there's component and this do",
    "start": "945130",
    "end": "950680"
  },
  {
    "text": "calls to the dough which acts as the issuer authority for this do so some",
    "start": "950680",
    "end": "960250"
  },
  {
    "text": "keen-eyed folks in the audience might be wondering exactly how this particular connection in the middle is managed and",
    "start": "960250",
    "end": "966730"
  },
  {
    "text": "authenticated I mentioned earlier that this connection uses this regular HTTP",
    "start": "966730",
    "end": "973050"
  },
  {
    "text": "which means that we can use certificates from a public CA to secure just secure",
    "start": "973050",
    "end": "978400"
  },
  {
    "text": "that connection there's no client authentication or anything like that but sometimes it's not practical or it's not",
    "start": "978400",
    "end": "983890"
  },
  {
    "text": "desirable to use public CA for this instead in this demo we're using spiffy",
    "start": "983890",
    "end": "990820"
  },
  {
    "text": "authentication which is nice because it doesn't rely on an external authority to",
    "start": "990820",
    "end": "996670"
  },
  {
    "text": "issue those certs but the downside is that it does require an operator to",
    "start": "996670",
    "end": "1001860"
  },
  {
    "text": "supply the CA certificates in order to bootstrap this connection now I'll note",
    "start": "1001860",
    "end": "1007290"
  },
  {
    "text": "that while an operator has to apply the CA certificates to be strap this connection it only happens once it's the",
    "start": "1007290",
    "end": "1013950"
  },
  {
    "text": "cost has incurred at the beginning of the relationship because once this relationship has established rotation of",
    "start": "1013950",
    "end": "1019890"
  },
  {
    "text": "those root certificates can happen in band over that same channel so without",
    "start": "1019890",
    "end": "1025589"
  },
  {
    "text": "further ado I will pass back to Oliver who will run through the demo for us all",
    "start": "1025590",
    "end": "1031079"
  },
  {
    "text": "right Thank You Evan um I hope they don't and probably not yeah I don't need",
    "start": "1031080",
    "end": "1037860"
  },
  {
    "text": "that let me switch back to a single screen sorry",
    "start": "1037860",
    "end": "1044240"
  },
  {
    "text": "all right oh good so first let's introduce the setup we do",
    "start": "1045200",
    "end": "1054240"
  },
  {
    "text": "have two VMs that are set up for running the spire server and the spire agents",
    "start": "1054240",
    "end": "1061230"
  },
  {
    "text": "plus the workload right on the right side we do have a terminal that is controlling their kubernetes",
    "start": "1061230",
    "end": "1068580"
  },
  {
    "text": "sorry the e steel so if I do get part - II still system you can see I have",
    "start": "1068580",
    "end": "1077370"
  },
  {
    "text": "pre-installed there you still can't open in there and beyond that I do have ifs right this is a new thing okay so first",
    "start": "1077370",
    "end": "1086790"
  },
  {
    "text": "of all let's start this by a server on their left side evan has putas put up",
    "start": "1086790",
    "end": "1094230"
  },
  {
    "text": "all those nice scripts for me so that I can run them okay ignore the error message here I don't think that matters",
    "start": "1094230",
    "end": "1100820"
  },
  {
    "text": "and then let's run the spire sorry",
    "start": "1100820",
    "end": "1107180"
  },
  {
    "text": "sprite it okay so now both the server and the agent are running server is",
    "start": "1107180",
    "end": "1114900"
  },
  {
    "text": "there just double check agent is there let me bring up their workload as the",
    "start": "1114900",
    "end": "1121200"
  },
  {
    "text": "next step zero three start workload okay the workload it started listening under",
    "start": "1121200",
    "end": "1127920"
  },
  {
    "text": "8 for force really hard on this VM so now what I'm gonna do is I'm going to",
    "start": "1127920",
    "end": "1134510"
  },
  {
    "text": "deploy a sleep pod in there sto side which is cluster 1 and use it to call to",
    "start": "1134510",
    "end": "1143070"
  },
  {
    "text": "the VM so I do have this let me see - and foo ok it's it's going up",
    "start": "1143070",
    "end": "1152010"
  },
  {
    "text": "ok no it's not and I do I did also configure the service entry you still to",
    "start": "1152010",
    "end": "1159930"
  },
  {
    "text": "route the traffic to the external IP address this is the external part and",
    "start": "1159930",
    "end": "1165900"
  },
  {
    "text": "this is the service name I'm calling match internal means this is going",
    "start": "1165900",
    "end": "1173400"
  },
  {
    "text": "through the sidecar to meet with us with the other side and sort of this okay now I'm gonna make",
    "start": "1173400",
    "end": "1182590"
  },
  {
    "text": "it a call so what's the result it's",
    "start": "1182590",
    "end": "1188500"
  },
  {
    "text": "gonna fail right because we have not federated the mutant TLS handshake and we all fail because they don't trust",
    "start": "1188500",
    "end": "1195340"
  },
  {
    "text": "each other okay that's he spat eight let's feather eight them sorry I do have",
    "start": "1195340",
    "end": "1202330"
  },
  {
    "text": "this nice cheat sheet over here because a lot of those comments are not very",
    "start": "1202330",
    "end": "1209140"
  },
  {
    "text": "easy to configure okay do this okay we",
    "start": "1209140",
    "end": "1216790"
  },
  {
    "text": "improve the user experience this is just a prototype okay I'm copying their certificate out",
    "start": "1216790",
    "end": "1222550"
  },
  {
    "text": "of the classroom one to class or two right I go to their spire server and do it",
    "start": "1222550",
    "end": "1229810"
  },
  {
    "text": "zero four okay sorry wait no it's good I",
    "start": "1229810",
    "end": "1237220"
  },
  {
    "text": "have copied that into this spire and",
    "start": "1237220",
    "end": "1242670"
  },
  {
    "text": "then next what I'm gonna do is to copy out their certificate out of spire all",
    "start": "1242670",
    "end": "1251290"
  },
  {
    "text": "right this one gives me their certificate and configure that into my",
    "start": "1251290",
    "end": "1256510"
  },
  {
    "text": "easter cluster so what I'm gonna do is now I'm going to write this into a file",
    "start": "1256510",
    "end": "1262590"
  },
  {
    "text": "okay this is the new one and then I put this file into the system using",
    "start": "1262590",
    "end": "1270400"
  },
  {
    "text": "configure terrific map deploy can take a map okay",
    "start": "1270400",
    "end": "1278050"
  },
  {
    "text": "meanwhile on the left side you see this message that means is able to successfully call ifs ifs and refresh",
    "start": "1278050",
    "end": "1286570"
  },
  {
    "text": "this configured certificate for cluster what okay on the right side I have",
    "start": "1286570",
    "end": "1292950"
  },
  {
    "text": "created this click map let's double check sorry",
    "start": "1292950",
    "end": "1299640"
  },
  {
    "text": "okay so it does have a transponder which is the base64 encoded Pam file and also",
    "start": "1302659",
    "end": "1313140"
  },
  {
    "text": "the trust domain which is closer to this one is loaded by the IFS hmm",
    "start": "1313140",
    "end": "1318899"
  },
  {
    "text": "once ifs lost that it's able to call to the VM to their aspire server and",
    "start": "1318899",
    "end": "1325590"
  },
  {
    "text": "authenticate it as well let's see what stir lock okay the log has successfully",
    "start": "1325590",
    "end": "1332370"
  },
  {
    "text": "called fungal endpoint together card roots so that that's a good sign it's",
    "start": "1332370",
    "end": "1338250"
  },
  {
    "text": "able to retrieve their transponder from the spy server now I can just run this",
    "start": "1338250",
    "end": "1345539"
  },
  {
    "text": "command again and see what's going on",
    "start": "1345539",
    "end": "1351200"
  },
  {
    "text": "all right 200 it works it works that's good again okay",
    "start": "1351200",
    "end": "1359140"
  },
  {
    "text": "[Applause] all right that's good this is a very",
    "start": "1359140",
    "end": "1364490"
  },
  {
    "text": "simple demo but takes a lot of work okay let's go back",
    "start": "1364490",
    "end": "1372100"
  },
  {
    "text": "food is color here we do have some workarounds there because this is just a",
    "start": "1372549",
    "end": "1377960"
  },
  {
    "text": "prototype what we are doing here I want to mention is not the final ultimate",
    "start": "1377960",
    "end": "1383270"
  },
  {
    "text": "solution we are working on the final solutions but it will be greatly be",
    "start": "1383270",
    "end": "1389330"
  },
  {
    "text": "nicer and their user experience really will be much better ok so but I want to",
    "start": "1389330",
    "end": "1397400"
  },
  {
    "text": "briefly talk about what we did so first of all we define the service entry on a",
    "start": "1397400",
    "end": "1403429"
  },
  {
    "text": "pilot right to define the service name service name microservice thought",
    "start": "1403429",
    "end": "1408530"
  },
  {
    "text": "cluster 2 dot global and with their eastern IP Pilar takes that and extracts",
    "start": "1408530",
    "end": "1414679"
  },
  {
    "text": "the cluster 2 in the middle and then put that as a validation contest as the ass",
    "start": "1414679",
    "end": "1421070"
  },
  {
    "text": "name on the right side there is T of",
    "start": "1421070",
    "end": "1426320"
  },
  {
    "text": "Federation service takes this consumes this config map the config map it's I",
    "start": "1426320",
    "end": "1431990"
  },
  {
    "text": "can figure that using their trust the root key of their aspire server and",
    "start": "1431990",
    "end": "1438799"
  },
  {
    "text": "configure that to IFS so that is s is able to authenticate",
    "start": "1438799",
    "end": "1444230"
  },
  {
    "text": "their spire server right what ifs retrieves the new transponder it's also",
    "start": "1444230",
    "end": "1450140"
  },
  {
    "text": "updates this config map so that this config map is always reflecting the",
    "start": "1450140",
    "end": "1455299"
  },
  {
    "text": "route of trust for cluster to this wide consumed also by the node agent know the",
    "start": "1455299",
    "end": "1462710"
  },
  {
    "text": "agent which sees this config map it will extract the cluster to name and",
    "start": "1462710",
    "end": "1468640"
  },
  {
    "text": "construct that to the SDS and use this Pam in the transponder who that has the",
    "start": "1468640",
    "end": "1474679"
  },
  {
    "text": "value now the node agent has the SDS name to cluster 2 and proxy also has a",
    "start": "1474679",
    "end": "1480169"
  },
  {
    "text": "CD s that points to cluster 2 as the SDS name when the app calls to this external",
    "start": "1480169",
    "end": "1487850"
  },
  {
    "text": "service proxy can just call the node agent to retrieve the SDS which in",
    "start": "1487850",
    "end": "1494360"
  },
  {
    "text": "the pan and proxy will use this pan to call to authenticate the other end and",
    "start": "1494360",
    "end": "1500350"
  },
  {
    "text": "also I didn't mention it here this proxy is using its own certificate",
    "start": "1500350",
    "end": "1507519"
  },
  {
    "text": "which is signed by sailrite to get authenticated by the other end this is muted your s ok one candidate",
    "start": "1507519",
    "end": "1515390"
  },
  {
    "text": "here is we are able to make a call from castor what across or to now and we are working on implementation to enable the",
    "start": "1515390",
    "end": "1522440"
  },
  {
    "text": "other the other way from closer to across the way it's what will progress",
    "start": "1522440",
    "end": "1527710"
  },
  {
    "text": "ok I think that's that's pretty much it",
    "start": "1527710",
    "end": "1533419"
  },
  {
    "text": "we've got this some links up here feel are interested in learning more about what we've done or how this works",
    "start": "1533419",
    "end": "1539000"
  },
  {
    "text": "on the left at the top is the sto resources if you look to join this do community or checkout github on the top",
    "start": "1539000",
    "end": "1545480"
  },
  {
    "text": "right is the spire resources for a spiffy spire community please feel free to join us Lanka everyone is welcome to",
    "start": "1545480",
    "end": "1551690"
  },
  {
    "text": "join we'd love to have you there and then on the bottom is some links to some of this demo scripts and stuff that",
    "start": "1551690",
    "end": "1557299"
  },
  {
    "text": "we used here and the history of federation server that we wrote for this demo thank you very much for coming I",
    "start": "1557299",
    "end": "1563389"
  },
  {
    "text": "think",
    "start": "1563389",
    "end": "1565600"
  },
  {
    "text": "all right question time this is super cool securing service meshes and beyond",
    "start": "1569190",
    "end": "1577419"
  },
  {
    "text": "what does beyond mean off mesh what applications does that again is like off",
    "start": "1577419",
    "end": "1584109"
  },
  {
    "text": "mesh like understanding that not only between service measures but also back into your on-prem infrastructure onto",
    "start": "1584109",
    "end": "1590469"
  },
  {
    "text": "your bare metal or something like this awesome very cool maybe I missed it but",
    "start": "1590469",
    "end": "1606279"
  },
  {
    "text": "you mentioned that the certificate minted by the red or green I forgot one",
    "start": "1606279",
    "end": "1612339"
  },
  {
    "text": "could not be used or one CA in green could not mean certificate as if it was",
    "start": "1612339",
    "end": "1619210"
  },
  {
    "text": "coming from red so this mutual deal has at least in demo I couldn't figure out where it actually checked that the",
    "start": "1619210",
    "end": "1627549"
  },
  {
    "text": "certificate was signed by the other party yes you want to talk to us that is the cluster discovery first yeah so for",
    "start": "1627549",
    "end": "1635320"
  },
  {
    "text": "this demo specifically we are using it CVS to control which cluster which",
    "start": "1635320",
    "end": "1641200"
  },
  {
    "text": "endpoint is using which trust bundle right remember the CDA is pointing to cluster",
    "start": "1641200",
    "end": "1646479"
  },
  {
    "text": "to cluster to only has the transponder for cluster to which is VM so that you",
    "start": "1646479",
    "end": "1653080"
  },
  {
    "text": "want to use like your any other like transponder to authenticate cluster to and for the listener side we are still",
    "start": "1653080",
    "end": "1660460"
  },
  {
    "text": "implementing that we need to do a mapping check to check their identity to",
    "start": "1660460",
    "end": "1666519"
  },
  {
    "text": "trust potency but trust domain specifically in your identity actually matches their transponder that we use to",
    "start": "1666519",
    "end": "1673690"
  },
  {
    "text": "authenticate so there's always a matching check on the reasoner site to",
    "start": "1673690",
    "end": "1679299"
  },
  {
    "text": "say in another way the the left side is deicide matches on a host header and",
    "start": "1679299",
    "end": "1685149"
  },
  {
    "text": "from the host header lookup knows this is something and trusts domain to or trust remain read or whatever and then",
    "start": "1685149",
    "end": "1691599"
  },
  {
    "text": "picks up the bundle to use for that outbound connection for server validation on the right side we use",
    "start": "1691599",
    "end": "1698289"
  },
  {
    "text": "ghost tunnel proxy which understands how to introspect client certificate to pull the trust",
    "start": "1698289",
    "end": "1703720"
  },
  {
    "text": "domain out inspire provides ghost tunnel with a map of trust domain names and",
    "start": "1703720",
    "end": "1709030"
  },
  {
    "text": "bundles and so it knows how to switch the bundle to validate the client based on what the trust domain and the",
    "start": "1709030",
    "end": "1714280"
  },
  {
    "text": "presented certificate is does that answer okay on the Envoy side I believe",
    "start": "1714280",
    "end": "1723700"
  },
  {
    "text": "because that is like the hack right yeah ideally ideally it will will introspect",
    "start": "1723700",
    "end": "1729400"
  },
  {
    "text": "the server certificate yeah and pull the correct bundle based on the trust and I presented I think that's the final solution yes so make this work we",
    "start": "1729400",
    "end": "1736210"
  },
  {
    "text": "we have a workaround yes any other questions all right I'll be",
    "start": "1736210",
    "end": "1742210"
  },
  {
    "text": "over hi so this was some really good",
    "start": "1742210",
    "end": "1751270"
  },
  {
    "text": "walkthrough fruit through the mutual TLS side of this I'm just wondering how does like if you have an authentication",
    "start": "1751270",
    "end": "1757990"
  },
  {
    "text": "policy and you're in your cluster and you're trying to do like authorization right within your services how might",
    "start": "1757990",
    "end": "1764920"
  },
  {
    "text": "this work with authorization policies if you want to allow an identity from one cluster into the other cluster through",
    "start": "1764920",
    "end": "1771670"
  },
  {
    "text": "those policies is that you are talking",
    "start": "1771670",
    "end": "1777130"
  },
  {
    "text": "about authorization policies specifically easier right so we are working on that to support",
    "start": "1777130",
    "end": "1783190"
  },
  {
    "text": "internal right and it is basically we are for the authorization policies you",
    "start": "1783190",
    "end": "1790210"
  },
  {
    "text": "encode their identities as the streams for you to check those streams can be",
    "start": "1790210",
    "end": "1797370"
  },
  {
    "text": "including including everything it's includes their trusted me as well so now",
    "start": "1797370",
    "end": "1803890"
  },
  {
    "text": "it's already supported I think you just put your trust them in there as long as it passes through their authentication",
    "start": "1803890",
    "end": "1810550"
  },
  {
    "text": "part it gets their external identity you can define whatever authorization policy",
    "start": "1810550",
    "end": "1817360"
  },
  {
    "text": "is there so there's no problem there I think we could also do like world card",
    "start": "1817360",
    "end": "1823230"
  },
  {
    "text": "for like all the identities in the external palabra trust domain always",
    "start": "1823230",
    "end": "1829120"
  },
  {
    "text": "allow obviously nine something like that I think it's you can you can go back to me and check with our",
    "start": "1829120",
    "end": "1835510"
  },
  {
    "text": "expertise deal okay cool one last are we",
    "start": "1835510",
    "end": "1842290"
  },
  {
    "text": "all good oh there's one okay on the fire side",
    "start": "1842290",
    "end": "1853630"
  },
  {
    "text": "what is the proxy a proxy that was used did this River just call them for close API or was there I can Envoy there the",
    "start": "1853630",
    "end": "1861460"
  },
  {
    "text": "server the proxy on this on the spire side is approximate cause tunnel which is an I probably should have linked to",
    "start": "1861460",
    "end": "1868060"
  },
  {
    "text": "here it's on this where organization on github square slash ghost tunnel it is a very very simple MPLS proxy that",
    "start": "1868060",
    "end": "1874990"
  },
  {
    "text": "operates at layer 3 for who does not layer 7 that proxy knows how to speak directly to so if you work with API and",
    "start": "1874990",
    "end": "1881020"
  },
  {
    "text": "also knows how to do the federated validation that spiffy requires four different different bundles but dot",
    "start": "1881020",
    "end": "1888930"
  },
  {
    "text": "awesome well thank you very much a big round of applause for the speakers [Applause]",
    "start": "1888930",
    "end": "1900260"
  }
]