[
  {
    "start": "0",
    "end": "180000"
  },
  {
    "text": "okay well we're hey everybody welcome to this week in cloud native this is episode number five",
    "start": "111920",
    "end": "119280"
  },
  {
    "text": "good to see you good to see you i'm saying hello to somebody who's coming to say hello good to see you uh darkseid",
    "start": "119280",
    "end": "126920"
  },
  {
    "text": "darkside21 awesome welcome welcome all right so if you're in the chat and",
    "start": "126920",
    "end": "133200"
  },
  {
    "text": "you want to say hi just drop a note into the chat over into the chat and i can highlight it ask your questions anything else like that",
    "start": "133200",
    "end": "139599"
  },
  {
    "text": "just let me know i'm happy to um to bring you to raise you up in this way",
    "start": "139599",
    "end": "145200"
  },
  {
    "text": "if you are here for the first time one of the most important things to understand is that i",
    "start": "145200",
    "end": "150720"
  },
  {
    "text": "keep a weekly notes document uh this is a a carryover from something i did in um",
    "start": "150720",
    "end": "157680"
  },
  {
    "text": "tgik this uh which was thank goodness it's kubernetes and so that i've created for that i've",
    "start": "157680",
    "end": "163680"
  },
  {
    "text": "created a team account and let's go just go ahead and check that out real quick",
    "start": "163680",
    "end": "171840"
  },
  {
    "text": "let me set up my environment so you can see it",
    "start": "174480",
    "end": "181120"
  },
  {
    "start": "180000",
    "end": "340000"
  },
  {
    "text": "so this is the this week in cloud native if you go to hackmd",
    "start": "181360",
    "end": "187560"
  },
  {
    "text": "twicn you're gonna see this week's notes along with along with any previous notes",
    "start": "187560",
    "end": "192800"
  },
  {
    "text": "that came earlier in the session uh these notes are editable by you if you sign in then i can see who's",
    "start": "192800",
    "end": "199360"
  },
  {
    "text": "actually putting content up uh if you don't sign in you won't be able to see it there but if you do sign in then you'll be able to edit the",
    "start": "199360",
    "end": "206080"
  },
  {
    "text": "content directly just notice something i want to change here in one moment",
    "start": "206080",
    "end": "213840"
  },
  {
    "text": "all right so so that's this is where i keep my notes and everything else like",
    "start": "216799",
    "end": "222000"
  },
  {
    "text": "that anybody else who wants to say hello go ahead and say hello in the chat and i",
    "start": "222000",
    "end": "227360"
  },
  {
    "text": "will raise you up hello good to see you welcome welcome so this",
    "start": "227360",
    "end": "233519"
  },
  {
    "text": "will be an interesting session but um well yeah let's dig into it so as you know there's a ton of really great",
    "start": "233519",
    "end": "238720"
  },
  {
    "text": "content on cloud native tv i'm just one of them it's one of the many shows there are playlists for each of the content so if",
    "start": "238720",
    "end": "245760"
  },
  {
    "text": "you if you missed a show or you want to make sure that you catch a show you can actually go check out the playlist and",
    "start": "245760",
    "end": "251040"
  },
  {
    "text": "all of the all of our sessions are captured and then upstreamed into a youtube playlist so you'll be able to",
    "start": "251040",
    "end": "257359"
  },
  {
    "text": "see them later if you miss them so don't worry about that there's lots of content that happened there was actually a",
    "start": "257359",
    "end": "263199"
  },
  {
    "text": "really great um uh cncf face-off with matt stratton it was actually",
    "start": "263199",
    "end": "269520"
  },
  {
    "text": "i came it was like the rogues gallery versus i can't remember what the other piece of it was but it was a really funny show you should",
    "start": "269520",
    "end": "275840"
  },
  {
    "text": "definitely check it out it was really a kick search magic with siam lgtm",
    "start": "275840",
    "end": "281199"
  },
  {
    "text": "with rockcote is also is doing opa and i think that spotlive is all spotlight is also doing opa so lots of",
    "start": "281199",
    "end": "286479"
  },
  {
    "text": "opa love this week if you're not familiar with opa it is the open policy agent so there's lots",
    "start": "286479",
    "end": "292160"
  },
  {
    "text": "going on there thank you i'm doing great great to have you here",
    "start": "292160",
    "end": "298400"
  },
  {
    "text": "um what else do we have oh you know what i just realized i wanted to change this real quick",
    "start": "299759",
    "end": "305360"
  },
  {
    "text": "because i'm realizing it is redundant",
    "start": "305360",
    "end": "311840"
  },
  {
    "text": "there we go nope that's not what i want you get to watch me do this kind of stuff live",
    "start": "313199",
    "end": "320240"
  },
  {
    "text": "perfect there we go so if you want to go out of our notes you can see here in the bottom left-hand corner it says hackmd",
    "start": "323360",
    "end": "328400"
  },
  {
    "text": "dot at twicken that's where our notes are located we have the cloud native classroom with cat costco of 100 days",
    "start": "328400",
    "end": "334320"
  },
  {
    "text": "with anais and fields tested with caslin all of these great shows definitely go check them out",
    "start": "334320",
    "end": "340880"
  },
  {
    "start": "340000",
    "end": "520000"
  },
  {
    "text": "one of the things i wanted to point out this week there was a lot of hubbub of course on twitter because that's what hubbub that's what twitter is for",
    "start": "341199",
    "end": "347759"
  },
  {
    "text": "it is a hubbub factory there's always something going on um",
    "start": "347759",
    "end": "353120"
  },
  {
    "text": "and this week one of the things that was raised up was the api removals in 122 version 122.",
    "start": "353120",
    "end": "359280"
  },
  {
    "text": "now i covered this in 116 as well in a session very like this where we caught we talked about like basically",
    "start": "359280",
    "end": "365440"
  },
  {
    "text": "how to identify those manifests that have been deprecated and things like that",
    "start": "365440",
    "end": "370639"
  },
  {
    "text": "and i figured i would dedicate this episode to that same sort of a a piece of it and we're gonna",
    "start": "370639",
    "end": "375680"
  },
  {
    "text": "get into that here in just a little bit but if you want to jump ahead or read ahead you can always jump over to the",
    "start": "375680",
    "end": "382240"
  },
  {
    "text": "kubernetes blog that's blog.kh io and the first one here is a really",
    "start": "382240",
    "end": "387440"
  },
  {
    "text": "well written and uh well thought out post from krishna khilari at amazon web",
    "start": "387440",
    "end": "392880"
  },
  {
    "text": "services and tim bannister at the scale factory writing a blog post on kubernetes api",
    "start": "392880",
    "end": "398160"
  },
  {
    "text": "and feature removals i don't know if it's feature removals per se but like api api removals portions of the api",
    "start": "398160",
    "end": "404400"
  },
  {
    "text": "that are being removed from the generally available api inside of your kubernetes cluster when you",
    "start": "404400",
    "end": "409440"
  },
  {
    "text": "deploy version 1.22 and we're going to kind of play with that and see what that looks like and",
    "start": "409440",
    "end": "414560"
  },
  {
    "text": "how that feels during this episode but if you want to read ahead this is where you can find out information so the",
    "start": "414560",
    "end": "421039"
  },
  {
    "text": "version 122 release will stop serving this is an important distinction stop serving the",
    "start": "421039",
    "end": "426319"
  },
  {
    "text": "api versions that we've listed below these are all beta apis that were previously",
    "start": "426319",
    "end": "431680"
  },
  {
    "text": "depicted in favor of newer and more stable api versions so some of the stuff that's been removed",
    "start": "431680",
    "end": "438960"
  },
  {
    "text": "are things like the custom resource definition in this particular path right and we're going to play with this a little bit",
    "start": "438960",
    "end": "444800"
  },
  {
    "text": "we're going to get hands on with it so if this is confusing to you at this point don't worry we're going to get more into detail",
    "start": "444800",
    "end": "450400"
  },
  {
    "text": "i'm going to show you just exactly what this means to you in your cluster during this episode that's really my",
    "start": "450400",
    "end": "455919"
  },
  {
    "text": "target for this episode the api service the token review subject",
    "start": "455919",
    "end": "461520"
  },
  {
    "text": "access review certificate of signing of the request and lease and this is a going to be a really",
    "start": "461520",
    "end": "467919"
  },
  {
    "text": "big one this is probably going to be the one where people really get caught out is ingress is no longer going to be",
    "start": "467919",
    "end": "473120"
  },
  {
    "text": "available at extension's v1 beta 1 and is now um or",
    "start": "473120",
    "end": "478560"
  },
  {
    "text": "at the networking k i o v one beta one so we'll see what at what path it is",
    "start": "478560",
    "end": "484240"
  },
  {
    "text": "available at and we're gonna dig into like how that works so the kubernetes documentation covers",
    "start": "484240",
    "end": "489759"
  },
  {
    "text": "these api removals for v2122 and that's actually in the deprecation",
    "start": "489759",
    "end": "495120"
  },
  {
    "text": "guide which is a really great one and you can actually see um when things are removed and what things",
    "start": "495120",
    "end": "501440"
  },
  {
    "text": "were removed at what versions so if you want to understand more about it the docs are a great source of information looks",
    "start": "501440",
    "end": "507440"
  },
  {
    "text": "like the next set of removals are going to happen in one two five",
    "start": "507440",
    "end": "513039"
  },
  {
    "text": "but that is some of the content that we're going to dig into this week",
    "start": "513440",
    "end": "519200"
  },
  {
    "text": "one of the other things i saw i mean of course you know you know one version 1.21 is out and so the next version",
    "start": "519760",
    "end": "526000"
  },
  {
    "start": "520000",
    "end": "675000"
  },
  {
    "text": "of kubernetes is going to be the one that removes those apis so if you want to um look into the",
    "start": "526000",
    "end": "531680"
  },
  {
    "text": "change log but difference between what happened in 120 and 121 this is always a good thing i i",
    "start": "531680",
    "end": "538000"
  },
  {
    "text": "try to spend an episode on i'm probably not going to do that in this episode but",
    "start": "538000",
    "end": "543920"
  },
  {
    "text": "right now uh this i'm just reminding folks this is actually how you would go about reading the release notes",
    "start": "543920",
    "end": "550080"
  },
  {
    "text": "for a given uh upcoming release and so if you're if you're looking to adopt version 1.2.1",
    "start": "550080",
    "end": "556480"
  },
  {
    "text": "or 121.21 1 this is where you will actually look for information and it has a lot of",
    "start": "556480",
    "end": "562800"
  },
  {
    "text": "really important information uh some of the major themes that are happening some versions of customized or upgraded",
    "start": "562800",
    "end": "570720"
  },
  {
    "text": "from version 203 to version 405 people who have used cube kettle customized you can see why that's an",
    "start": "570720",
    "end": "576480"
  },
  {
    "text": "important one the default container hello",
    "start": "576480",
    "end": "583920"
  },
  {
    "text": "good to see you thanks for saying hi hello",
    "start": "583920",
    "end": "588080"
  },
  {
    "text": "um we have immutable secrets and config maps that now graduates to ga which means the api path will change",
    "start": "589360",
    "end": "595279"
  },
  {
    "text": "whatever you see graduates to ga you know that there's going to be an api change right that's that's one of the",
    "start": "595279",
    "end": "600640"
  },
  {
    "text": "ways that you can determine that structured logging in the cubelet has changed generic ephemeral volumes",
    "start": "600640",
    "end": "606800"
  },
  {
    "text": "but there's lots of good content here and one of the other pieces i really wanted to call out was this section",
    "start": "606800",
    "end": "612000"
  },
  {
    "text": "of the release notes for every release and one of the really important bits is this piece here urgent upgrade notes",
    "start": "612000",
    "end": "618640"
  },
  {
    "text": "and i really like how they actually call this out i feel like this is a repeated every every release of",
    "start": "618640",
    "end": "623680"
  },
  {
    "text": "kubernetes no you really must read this before you upgrade so",
    "start": "623680",
    "end": "629360"
  },
  {
    "text": "this says information this tells us information that is important to us if we're going to upgrade from a",
    "start": "629360",
    "end": "635040"
  },
  {
    "text": "previous version of kubernetes to the current released version of kubernetes so definitely read this stuff if you",
    "start": "635040",
    "end": "640560"
  },
  {
    "text": "have if that if that's you or if that's something that you're going to be working on",
    "start": "640560",
    "end": "646480"
  },
  {
    "text": "so this was just a quick reminder of where to go and find information regarding uh upgrade pads and release",
    "start": "646480",
    "end": "652800"
  },
  {
    "text": "notes for kubernetes clusters and so the release notes for 122 haven't been cut yet but i i imagine portions and pieces and",
    "start": "652800",
    "end": "660320"
  },
  {
    "text": "portions of them are already in there and we're kind of getting a little bit of a preview into what that looks like here",
    "start": "660320",
    "end": "668480"
  },
  {
    "text": "from the deprecated api migration guide all right what is next up",
    "start": "668480",
    "end": "676320"
  },
  {
    "start": "675000",
    "end": "865000"
  },
  {
    "text": "in our notes i did see a new cbe being announced and the way that i track this stuff is",
    "start": "676320",
    "end": "681920"
  },
  {
    "text": "i'm actually a member of the security announce group if security in kubernetes is important to you i recommend that you become",
    "start": "681920",
    "end": "688000"
  },
  {
    "text": "a member of the security announce group right and if you click on over here it's a google group you can go ahead and join that google",
    "start": "688000",
    "end": "695040"
  },
  {
    "text": "group and you'll be able to get notified when things when things interesting and security wise have happened",
    "start": "695040",
    "end": "703360"
  },
  {
    "text": "this particular one is a security issue was discovered within kubernetes that could enable",
    "start": "703360",
    "end": "709680"
  },
  {
    "text": "users to send network traffic to locations that they would otherwise not have access to via a confused deputy attack",
    "start": "709680",
    "end": "717839"
  },
  {
    "text": "it's a low severity it was assigned cbe 2021 25740 it gets into the details and i",
    "start": "719600",
    "end": "727519"
  },
  {
    "text": "really like how cj has done this and how i'm sure that many members of the c security are responsible on this one as",
    "start": "727519",
    "end": "734160"
  },
  {
    "text": "well it says if a potential attacker can create or edit endpoints or endpoint slices and",
    "start": "734160",
    "end": "739440"
  },
  {
    "text": "that means that you have the ability to define that object within kubernetes then they can potentially direct a load",
    "start": "739440",
    "end": "745200"
  },
  {
    "text": "balancer or ingress implementation to expose back and dye piece the attacker should not have access to",
    "start": "745200",
    "end": "752800"
  },
  {
    "text": "importantly if the target's network policy already trusts the load balancer or ingress implementation",
    "start": "753600",
    "end": "759360"
  },
  {
    "text": "network policy cannot be used to prevent exposure from other namespaces potentially bypassing any security",
    "start": "759360",
    "end": "765519"
  },
  {
    "text": "controls such as load balancer source ranges this issue is a design flaw that can be fully made",
    "start": "765519",
    "end": "771440"
  },
  {
    "text": "that cannot be fully mitigated without user facing changes with this public announcement we can begin the conversations about a",
    "start": "771440",
    "end": "777600"
  },
  {
    "text": "long-term fix so if this i mean if you're making use of uh load balancer ingress which you",
    "start": "777600",
    "end": "784639"
  },
  {
    "text": "probably are in your production clusters this is probably something to be aware of and to and be aware of that that those",
    "start": "784639",
    "end": "790320"
  },
  {
    "text": "things could actually uh be changed so there's information on how to mitigate it it's basically changing",
    "start": "790320",
    "end": "796240"
  },
  {
    "text": "the permissions for that particular object or those objects the endpoint and the endpoint",
    "start": "796240",
    "end": "801760"
  },
  {
    "text": "slice object how you can detect if anything has actually used this",
    "start": "801760",
    "end": "808560"
  },
  {
    "text": "and there was an additional advisory a similar check is possible using the ingress implementations to",
    "start": "810480",
    "end": "815600"
  },
  {
    "text": "support forwarding to external name services which are one of the valid services within kubernetes this can be used to",
    "start": "815600",
    "end": "822720"
  },
  {
    "text": "forward two services in other name spaces or in some cases sensitive endpoints within the ingress implementation",
    "start": "822720",
    "end": "829120"
  },
  {
    "text": "so really good update from the um from sig security and if you're interested in understanding more about",
    "start": "829120",
    "end": "835600"
  },
  {
    "text": "this vulnerability put this here and one of the things they always add here at the kind of at the bottom oh is actually",
    "start": "835600",
    "end": "840880"
  },
  {
    "text": "rob scott sent on behalf of the kubernetes product security committee so awesome stuff so there's a link to",
    "start": "840880",
    "end": "848639"
  },
  {
    "text": "the github issue if you want to know more about it or if you want to follow along for the resolution of this particular cbe",
    "start": "848639",
    "end": "854399"
  },
  {
    "text": "definitely check out that issue and you'll be able to see those things so pretty cool stuff",
    "start": "854399",
    "end": "861680"
  },
  {
    "text": "lots of good information coming out of cube weekly and also out of this week in kubernetes it's coming",
    "start": "864320",
    "end": "869600"
  },
  {
    "start": "865000",
    "end": "1167000"
  },
  {
    "text": "right up and then the next thing i wanted to get into were these two pieces here so",
    "start": "869600",
    "end": "874959"
  },
  {
    "text": "this was the twitter thread i was describing earlier uh it started with cat cosgrove putting",
    "start": "874959",
    "end": "881279"
  },
  {
    "text": "out a twitter thread saying you need to pay attention to the release notes for kubernetes version 122.",
    "start": "881279",
    "end": "886800"
  },
  {
    "text": "i know not i know nobody likes reading release notes but you gotta and in this version multiple beta apis will be removed",
    "start": "886800",
    "end": "894560"
  },
  {
    "text": "not deprecated they've already been deprecated or we wouldn't be removing them",
    "start": "894560",
    "end": "899600"
  },
  {
    "text": "um and this is a and this is a removal of those apis from serving and we're going to play with that",
    "start": "899600",
    "end": "905680"
  },
  {
    "text": "during this session that's one of the things we're going to dig into but one of the comments to this thread that i got a lot out of was actually from",
    "start": "905680",
    "end": "911920"
  },
  {
    "text": "stefan and stefan is a core contributor to kubernetes and",
    "start": "911920",
    "end": "917120"
  },
  {
    "text": "he makes a few valid points about how to understand this particular state that we're in when",
    "start": "917120",
    "end": "923040"
  },
  {
    "text": "we're going to stop serving a particular api inside of kubernetes",
    "start": "923040",
    "end": "928399"
  },
  {
    "text": "he says that apis go away in 1.22 but understands that existing objects",
    "start": "928399",
    "end": "934079"
  },
  {
    "text": "created with old apis are not and what that means is if you're in version 1.21 you can still create",
    "start": "934079",
    "end": "940880"
  },
  {
    "text": "those objects using those those same versions and those objects will then be inside of your cluster's database inside",
    "start": "940880",
    "end": "947759"
  },
  {
    "text": "of xcd stored as objects and when you",
    "start": "947759",
    "end": "952880"
  },
  {
    "text": "when you then upgrade that cluster to version 1.22 that means that those objects are still",
    "start": "952880",
    "end": "959279"
  },
  {
    "text": "defined within kubernetes and we'll talk about how and why that works when we get to the play time part of this session",
    "start": "959279",
    "end": "967440"
  },
  {
    "text": "how's it going dev good to see you welcome",
    "start": "967440",
    "end": "971759"
  },
  {
    "text": "so there is no object version of v1 beta 1 in the cluster concept objects are converted on the fly",
    "start": "976160",
    "end": "983759"
  },
  {
    "text": "and that means that there is an abstraction layer in the api server that is responsible",
    "start": "983759",
    "end": "989519"
  },
  {
    "text": "for defining that mapping between the api object that you create and the",
    "start": "989519",
    "end": "995279"
  },
  {
    "text": "stored object that is stored inside of etcd and this is going to be one of the fun",
    "start": "995279",
    "end": "1001519"
  },
  {
    "text": "things that we play with today we're going to look at the difference there and see how that works",
    "start": "1001519",
    "end": "1006639"
  },
  {
    "text": "hey pop good to see you pop",
    "start": "1006639",
    "end": "1011839"
  },
  {
    "text": "but suffice to say what that means is that as we change api versions that are made available or",
    "start": "1014639",
    "end": "1020160"
  },
  {
    "text": "unavailable within the kubernetes api server those api versions are not generally stored as an object within",
    "start": "1020160",
    "end": "1026720"
  },
  {
    "text": "etcd it's actually just the core object itself that's stored in ncd and the abstraction that the kubernetes",
    "start": "1026720",
    "end": "1033199"
  },
  {
    "text": "api server provides is how we surface those objects either to",
    "start": "1033199",
    "end": "1038640"
  },
  {
    "text": "uh post commit i mean vote to post to posts when you're going to be creating those objects or whether they",
    "start": "1038640",
    "end": "1044480"
  },
  {
    "text": "are um gets or reads when you're actually trying to get or update those objects",
    "start": "1044480",
    "end": "1049679"
  },
  {
    "text": "that's actually how that bit of it's going to work right we're not in a situation necessarily where we um",
    "start": "1049679",
    "end": "1056320"
  },
  {
    "text": "we store the api version that was that it was that it was created under",
    "start": "1056320",
    "end": "1062080"
  },
  {
    "text": "all right so that's actually pretty interesting stuff and we're going",
    "start": "1063280",
    "end": "1068400"
  },
  {
    "text": "to play with this and i like how he says this is magic it's not ap it's not magic it's it's software you know it's all it's all",
    "start": "1068400",
    "end": "1073840"
  },
  {
    "text": "right there all right when storage",
    "start": "1073840",
    "end": "1081760"
  },
  {
    "text": "versions are removed and released but etsy still has objects of the old storage versions cube api server fails starting up",
    "start": "1081760",
    "end": "1090400"
  },
  {
    "text": "that is actually incorrect you have to touch the objects to convert them before the upgrade and the kubo storage version",
    "start": "1092080",
    "end": "1097919"
  },
  {
    "text": "migrator can help read the release notes and there's there's going to be documentation on how to do that and then the last thing that",
    "start": "1097919",
    "end": "1104559"
  },
  {
    "text": "stefan calls out is this piece here which is where i'm gonna spend the most of the",
    "start": "1104559",
    "end": "1109600"
  },
  {
    "text": "time in playing with this stuff because i feel like this article by evan cordell who's somebody i worked with at core os a great guy",
    "start": "1109600",
    "end": "1116400"
  },
  {
    "text": "um really gets into like so one of like really deserves more time right",
    "start": "1116400",
    "end": "1122160"
  },
  {
    "text": "because i feel like this article really gets into just like some of the internals about how kubernetes api server works",
    "start": "1122160",
    "end": "1129760"
  },
  {
    "text": "and how those api versions actually are surfaced and manipulated when you do a cube kettle get or a cube",
    "start": "1129760",
    "end": "1135679"
  },
  {
    "text": "get all apply or those sorts of things when you're when you're working with the api server um directly and so my plan today is to",
    "start": "1135679",
    "end": "1143600"
  },
  {
    "text": "kind of get into this this is gonna be the play time we're gonna we're gonna walk through some of these scenarios there's actually",
    "start": "1143600",
    "end": "1149360"
  },
  {
    "text": "i think this blog post does an incredible job and so if you want to skip out and just read the blog post that's the thing that you can do but i",
    "start": "1149360",
    "end": "1155280"
  },
  {
    "text": "really feel like a lot of the points that are made in this blog post are worth kind of exploring live and we're going to play with them",
    "start": "1155280",
    "end": "1164799"
  },
  {
    "text": "all right but there was one more thing i had which is something i learned uh and i",
    "start": "1164799",
    "end": "1171280"
  },
  {
    "start": "1167000",
    "end": "1393000"
  },
  {
    "text": "wanted to play with you and i wanted to share this with you it was one of the things on on my side that i thought was actually kind of",
    "start": "1171280",
    "end": "1176640"
  },
  {
    "text": "interesting so i'm working with um i surveillant which you already are aware i'm sure and i'm working as",
    "start": "1176640",
    "end": "1183200"
  },
  {
    "text": "their field cto there and so i'm having a great time at i surveillance and um my work computer is a linux laptop",
    "start": "1183200",
    "end": "1188960"
  },
  {
    "text": "and this is generally true whenever i'm not working at a place that doesn't allow that uh but right now i have a linux laptop and",
    "start": "1188960",
    "end": "1195039"
  },
  {
    "text": "one of my goals was to get to a place where i could do better work with like bpf trace and those sorts of things",
    "start": "1195039",
    "end": "1200400"
  },
  {
    "text": "and the way that bpf does that bit of tooling is that it needs the it needs header information not",
    "start": "1200400",
    "end": "1206559"
  },
  {
    "text": "header information it needs um uh btf symbol information so they can understand",
    "start": "1206559",
    "end": "1212559"
  },
  {
    "text": "how to map events that happen in the linux kernel with context around what's related to",
    "start": "1212559",
    "end": "1218880"
  },
  {
    "text": "that particular event the way that it does that uh is that it actually",
    "start": "1218880",
    "end": "1224640"
  },
  {
    "text": "holds you could consider it kind of like a dictionary of simple data so if you've ever built a",
    "start": "1224640",
    "end": "1229919"
  },
  {
    "text": "debug package for a package in linux right you could create a debug package and that debug",
    "start": "1229919",
    "end": "1235200"
  },
  {
    "text": "package will hold the simple the simple data for the package that you're going to debug and that way when you're doing a trace",
    "start": "1235200",
    "end": "1241520"
  },
  {
    "text": "on that application to understand where it's spending its time or where a particular bug has happened or",
    "start": "1241520",
    "end": "1246960"
  },
  {
    "text": "you're digging into a crash that symbol data will actually allow you to kind of like really kind of in a more human readable way",
    "start": "1246960",
    "end": "1253600"
  },
  {
    "text": "understand what's happening with that particular data so btf is very similar it holds that type data",
    "start": "1253600",
    "end": "1259280"
  },
  {
    "text": "for events so that we can use bpf to map what's happening at the type you know",
    "start": "1259280",
    "end": "1264720"
  },
  {
    "text": "with at an event layer with what's actually happening inside of the kernel when a particular syscall or a particular event happens",
    "start": "1264720",
    "end": "1271600"
  },
  {
    "text": "at the kernel layer that was a lot of information and i hope it made sense but if it didn't feel free",
    "start": "1271600",
    "end": "1278080"
  },
  {
    "text": "to reach out to me and like let me know that uh the thing i said doesn't make any sense like you can hit me up on twitter you can hit me up on the cooper news",
    "start": "1278080",
    "end": "1284320"
  },
  {
    "text": "slack there's lots of ways to get ahold of me but i'm maui lyon everywhere",
    "start": "1284320",
    "end": "1289520"
  },
  {
    "text": "suffice to say what i was working on uh i wanted to get to a place where i could actually do bpf trace and those sorts of",
    "start": "1289520",
    "end": "1295520"
  },
  {
    "text": "things uh from my own linux kernel that i that i have running on my laptop now what i noticed was that the linux",
    "start": "1295520",
    "end": "1302159"
  },
  {
    "text": "kernel that i was operating didn't have access to btf information or",
    "start": "1302159",
    "end": "1307280"
  },
  {
    "text": "bpf type information and there's a couple of different ways that i can solve this",
    "start": "1307280",
    "end": "1312320"
  },
  {
    "text": "problem one of the ways is to build a debug kernel and then to grab",
    "start": "1312320",
    "end": "1318000"
  },
  {
    "text": "yes the link to the evan cordell is definitely in the in the blog post but you know what i'll",
    "start": "1318000",
    "end": "1323039"
  },
  {
    "text": "i can actually just put the link in the chat i think let's try it",
    "start": "1323039",
    "end": "1333840"
  },
  {
    "text": "hopefully you can all see that that work",
    "start": "1334240",
    "end": "1338720"
  },
  {
    "text": "also hi diane good to see you",
    "start": "1340000",
    "end": "1344080"
  },
  {
    "text": "um so the way this works is that you can",
    "start": "1345360",
    "end": "1350960"
  },
  {
    "text": "build like a debug kernel and that debug kernel will basically build a a version of the um",
    "start": "1350960",
    "end": "1357360"
  },
  {
    "text": "a kernel that that gives you access to all of that type data and then what i've i found a new config",
    "start": "1357360",
    "end": "1363600"
  },
  {
    "text": "option in the linux kernel well new to me anyway i'm sure it's not like super new that gives you the ability to define",
    "start": "1363600",
    "end": "1370640"
  },
  {
    "text": "that you want the kernel to make that btf of that btf uh",
    "start": "1370640",
    "end": "1376720"
  },
  {
    "text": "data available inside of cisfs which is really cool so let's look at",
    "start": "1376720",
    "end": "1383280"
  },
  {
    "text": "that real quick because this is actually the thing that i kind of learned this week so",
    "start": "1383280",
    "end": "1389840"
  },
  {
    "text": "again here so we move into uh so i've got my my linux kernel",
    "start": "1390240",
    "end": "1397440"
  },
  {
    "start": "1393000",
    "end": "1659000"
  },
  {
    "text": "i'm using arch as a linux uh as as my operating system for my laptop",
    "start": "1397440",
    "end": "1402480"
  },
  {
    "text": "and it seems a little contentious so i think a lot of people kind of kind of chuckle about the whole like i",
    "start": "1402480",
    "end": "1409280"
  },
  {
    "text": "use arch kind of thing but that's not really where i'm coming from i like that it's actually very flexible and i like the packaging system and i",
    "start": "1409280",
    "end": "1415120"
  },
  {
    "text": "like the aur stuff um but let's dig into how this would work inside of arch because that was",
    "start": "1415120",
    "end": "1420640"
  },
  {
    "text": "actually the problem that i had to solve so this is the actual build package for the linux kernel that is shipped that",
    "start": "1420640",
    "end": "1427279"
  },
  {
    "text": "works that is most compatible with the version of laptop that i'm using i'm using a t-14s so it's got an amd chip it's a ryzen",
    "start": "1427279",
    "end": "1434159"
  },
  {
    "text": "chip and i'm using the zen version 2 uh chip right so it's the i carry with like",
    "start": "1434159",
    "end": "1440240"
  },
  {
    "text": "a sazan family or something like that regardless this kernel has a lot of the",
    "start": "1440240",
    "end": "1445840"
  },
  {
    "text": "optimizations for the amd chip that i'm using on my laptop and what i had to figure out was how to",
    "start": "1445840",
    "end": "1452720"
  },
  {
    "text": "make it so that i could build that btf information so let me first let's just take a look at where that",
    "start": "1452720",
    "end": "1458480"
  },
  {
    "text": "data is actually being made available so it's in the csfs underneath kernel btf",
    "start": "1458480",
    "end": "1465440"
  },
  {
    "text": "inside of here we can see these are actually all of the btf data that are actually stored for not only my",
    "start": "1465440",
    "end": "1471360"
  },
  {
    "text": "linux kernel which is right here but also for all of the modules that have been compiled for the for the",
    "start": "1471360",
    "end": "1476799"
  },
  {
    "text": "kernel so anything i compiled as a module btf symbols are also generated and made available here",
    "start": "1476799",
    "end": "1483200"
  },
  {
    "text": "and when these things are available and when these things are made available um inside of the csfs that means that",
    "start": "1483200",
    "end": "1490640"
  },
  {
    "text": "bpf trace and other tools that leverage lid bpf can just make use of those",
    "start": "1490640",
    "end": "1496080"
  },
  {
    "text": "symbols directly without having to go look anywhere else they can immediately find the simple the symbols they're looking for",
    "start": "1496080",
    "end": "1502400"
  },
  {
    "text": "and then give you really good contextual information about what's happening at an event level",
    "start": "1502400",
    "end": "1507600"
  },
  {
    "text": "for bpf trace at the kernel layer which i thought was mind-blowing really really cool stuff",
    "start": "1507600",
    "end": "1513600"
  },
  {
    "text": "so if we do it that way then we don't we don't have to worry about like actually making that btf symbol information",
    "start": "1513600",
    "end": "1519520"
  },
  {
    "text": "available to some other application say i wanted to run bpf trace inside of a container or if i",
    "start": "1519520",
    "end": "1525440"
  },
  {
    "text": "wanted to like run some other application that would need btf symbol data within a container or",
    "start": "1525440",
    "end": "1531360"
  },
  {
    "text": "something else that was going to share the same linux kernel as my laptop so if i were to do docker excuse me",
    "start": "1531360",
    "end": "1539440"
  },
  {
    "text": "run bash ls cis",
    "start": "1539440",
    "end": "1545120"
  },
  {
    "text": "uh yeah we can see that we have that",
    "start": "1545840",
    "end": "1557120"
  },
  {
    "text": "same data available inside the inside the internal and so what this means to me",
    "start": "1557120",
    "end": "1562960"
  },
  {
    "text": "this is actually the thing that i was playing with on the very beginning was i needed some way i wanted to play with some tracing",
    "start": "1562960",
    "end": "1568799"
  },
  {
    "text": "information in a kubernetes cluster but i wanted to be able to leverage kind",
    "start": "1568799",
    "end": "1574400"
  },
  {
    "text": "to be able to do that and so to do to be able to get across that finish line what i needed what i was missing was",
    "start": "1574400",
    "end": "1580400"
  },
  {
    "text": "making that btf symbol data available to my linux kernel directly and then any containers",
    "start": "1580400",
    "end": "1586480"
  },
  {
    "text": "that are also associated with that same linux kernel so anything running inside of a a kind cluster or anything any other",
    "start": "1586480",
    "end": "1592960"
  },
  {
    "text": "docker container that i run locally on my laptop will not have access to that same data and i don't have to make a file",
    "start": "1592960",
    "end": "1599200"
  },
  {
    "text": "available to that to bpf trace i could actually just build it right into the kernel cfs which",
    "start": "1599200",
    "end": "1604640"
  },
  {
    "text": "is so cool anyway that's what i wanted to show you so the differences that i made between my",
    "start": "1604640",
    "end": "1610640"
  },
  {
    "text": "the upstream kernel that is available to my laptop and my own are pretty are pr are not very substantial the difference was",
    "start": "1610640",
    "end": "1618720"
  },
  {
    "text": "it diff or the master config all i had to do was add these",
    "start": "1618720",
    "end": "1625760"
  },
  {
    "text": "three lines and actually only two of them are applying right now so it's config debug info and config debug info",
    "start": "1625760",
    "end": "1631279"
  },
  {
    "text": "btf and this makes my uh that makes that cis fs piece work and that makes it",
    "start": "1631279",
    "end": "1636720"
  },
  {
    "text": "so that btf symbols are available to anything that would actually try and leverage bpf inside of my laptop",
    "start": "1636720",
    "end": "1643520"
  },
  {
    "text": "at any layer as long as it's not a virtualized layer so really neat stuff anyway that's what",
    "start": "1643520",
    "end": "1649279"
  },
  {
    "text": "i wanted to share with you on that piece of it and now we can kind",
    "start": "1649279",
    "end": "1654320"
  },
  {
    "text": "of get back into that incredible blog post",
    "start": "1654320",
    "end": "1658799"
  },
  {
    "start": "1659000",
    "end": "1890000"
  },
  {
    "text": "so six things i i love the call out here too this this made me chuckle as soon as",
    "start": "1660159",
    "end": "1665600"
  },
  {
    "text": "i saw it 16 things you didn't know about cube apis and crds number 15 will shock you",
    "start": "1665600",
    "end": "1671279"
  },
  {
    "text": "that's so great so this is actually i mean i think i had known this but i hadn't",
    "start": "1671279",
    "end": "1677919"
  },
  {
    "text": "really thought about it before but what this says is not all kubernetes apis have controllers",
    "start": "1677919",
    "end": "1684559"
  },
  {
    "text": "so the thing that might be modifying state for a cluster may not be a controller right the thing",
    "start": "1684559",
    "end": "1689679"
  },
  {
    "text": "that updates that object may not be an actual controller uh necessarily it could be um it could",
    "start": "1689679",
    "end": "1695760"
  },
  {
    "text": "be something it could be some it could be some shared context that is updating status so let's read this a little bit and see",
    "start": "1695760",
    "end": "1702000"
  },
  {
    "text": "what it says the qbi server is largely responsible for the storage of api data into a backing store",
    "start": "1702000",
    "end": "1707760"
  },
  {
    "text": "and typically that's as cd as we know the queue controller runs a series of reconciliation loops i consider these to",
    "start": "1707760",
    "end": "1714399"
  },
  {
    "text": "be controllers because it's i could a bunch of controllers that are response that are just really kind of sharing",
    "start": "1714399",
    "end": "1720880"
  },
  {
    "text": "using a shared cache and so it's a more efficient set of controllers than you might think of for like controllers for crds for",
    "start": "1720880",
    "end": "1727279"
  },
  {
    "text": "example but in this particular case because they're using a shared cache they can kind of get back",
    "start": "1727279",
    "end": "1732559"
  },
  {
    "text": "back and forth to that data very quickly an example of that set of controllers",
    "start": "1732559",
    "end": "1737760"
  },
  {
    "text": "that happen at the at the controller manager for example when i create a kubernetes uh when i create a deployment if i do cubekill",
    "start": "1737760",
    "end": "1745120"
  },
  {
    "text": "apply or keep it'll create deployment then that creates a deployment object",
    "start": "1745120",
    "end": "1750799"
  },
  {
    "text": "and then there's a series of controllers that are responsible that are being managed by the controller manager",
    "start": "1750799",
    "end": "1755840"
  },
  {
    "text": "that that uh progress that deployment object to a set of running pods right and so",
    "start": "1755840",
    "end": "1763200"
  },
  {
    "text": "for example there is a deployment controller that is responsible for breaking that deployment into a replica set",
    "start": "1763200",
    "end": "1768960"
  },
  {
    "text": "and there's a replica controller that is responsible for breaking that replica set into a set of pods that have been",
    "start": "1768960",
    "end": "1775039"
  },
  {
    "text": "defined and then we pass the control or life cycle of those pods",
    "start": "1775039",
    "end": "1780240"
  },
  {
    "text": "down to the cubelet where are actually no once those pod objects are created then the cube scheduler kicks in cube",
    "start": "1780240",
    "end": "1786720"
  },
  {
    "text": "scheduler associates those pod objects that have not already been attributed to a node",
    "start": "1786720",
    "end": "1792000"
  },
  {
    "text": "with a node and then once you have a complete pod object the pod object exists",
    "start": "1792000",
    "end": "1797440"
  },
  {
    "text": "it's been scheduled to a node all of those things are are checked off the list then the",
    "start": "1797440",
    "end": "1802480"
  },
  {
    "text": "cubelet sees that that pod object has been created and is associated with itself and then",
    "start": "1802480",
    "end": "1807679"
  },
  {
    "text": "goes about managing the cl the pod again in a controller kind of way right there's a reconciliation loop",
    "start": "1807679",
    "end": "1813440"
  },
  {
    "text": "that happens on the cubelet that we're that is responsible for ensuring a that we know about all of the",
    "start": "1813440",
    "end": "1818559"
  },
  {
    "text": "pods that are associated with this node b that we understand the life cycle where",
    "start": "1818559",
    "end": "1823840"
  },
  {
    "text": "we are in the life cycle of each of those pods and that we're reporting that life where we are in that status",
    "start": "1823840",
    "end": "1829840"
  },
  {
    "text": "to the kubernetes api server so that those objects can be updated",
    "start": "1829840",
    "end": "1835200"
  },
  {
    "text": "and this is i think where evan is going with this right is that when you go ahead and create those",
    "start": "1835679",
    "end": "1840720"
  },
  {
    "text": "things there are different pieces that are responsible from updating perhaps comparts of that object",
    "start": "1840720",
    "end": "1847120"
  },
  {
    "text": "over time right so the deployment controller may not be the thing that marks itself as",
    "start": "1847120",
    "end": "1852720"
  },
  {
    "text": "progressed and that might be the replica set controller that pods are active or unactive it's",
    "start": "1852720",
    "end": "1859679"
  },
  {
    "text": "actually something that is going or active or not active or or something that's going to be kind of",
    "start": "1859679",
    "end": "1865600"
  },
  {
    "text": "bubbled up from the cubelet to the pod status object and then to the status object at the controller",
    "start": "1865600",
    "end": "1872159"
  },
  {
    "text": "right so what information is reported at at the api server when you do cubekill get",
    "start": "1872159",
    "end": "1877440"
  },
  {
    "text": "deployment whether you have the where you whether you've reached the current running state of that object or not can",
    "start": "1877440",
    "end": "1883360"
  },
  {
    "text": "be updated by different sets of controllers not by one particular one so let's take a look at how this works",
    "start": "1883360",
    "end": "1889250"
  },
  {
    "text": "[Music] clear",
    "start": "1889250",
    "end": "1893840"
  },
  {
    "start": "1890000",
    "end": "2279000"
  },
  {
    "text": "i'm gonna go ahead and create a cluster here let's take a look at what he did so he",
    "start": "1896480",
    "end": "1901600"
  },
  {
    "text": "had i think it was just doing the single",
    "start": "1901600",
    "end": "1908720"
  },
  {
    "text": "node let's bring up our cube cluster",
    "start": "1918840",
    "end": "1924720"
  },
  {
    "text": "thank you dan for updating that i thought i'd put the link in there but if i didn't thank you for putting me in there for me i appreciate it and thank",
    "start": "1933200",
    "end": "1938240"
  },
  {
    "text": "you diane for the great for the great comment makes me happy glad to i'm glad you're here i'm glad",
    "start": "1938240",
    "end": "1943600"
  },
  {
    "text": "everybody's here i'm going to do a cube kettle create",
    "start": "1943600",
    "end": "1949519"
  },
  {
    "text": "cluster or create um deployment dash and uh let's call it",
    "start": "1949519",
    "end": "1956000"
  },
  {
    "text": "um quicken image equals nginx port",
    "start": "1956000",
    "end": "1963440"
  },
  {
    "text": "equals 80.",
    "start": "1963440",
    "end": "1966720"
  },
  {
    "text": "click those equal to i just created a deployment object and if i look at that object",
    "start": "1971360",
    "end": "1979440"
  },
  {
    "text": "events there's a couple different things that",
    "start": "1981360",
    "end": "1988000"
  },
  {
    "text": "happen",
    "start": "1988840",
    "end": "1991840"
  },
  {
    "text": "hello some of which are oh here we go so we",
    "start": "2002840",
    "end": "2008000"
  },
  {
    "text": "see the the the deployment object get created and then we see the replica set object get created and then we see the",
    "start": "2008000",
    "end": "2013919"
  },
  {
    "text": "pods get created so here's a deployment object here's the replica set",
    "start": "2013919",
    "end": "2020480"
  },
  {
    "text": "replica set controller basically creating two pods then we have um the pods themselves",
    "start": "2020480",
    "end": "2027840"
  },
  {
    "text": "being pulled and created starting the country starting the container nginx and this is being reported usually by the node that is that is",
    "start": "2027840",
    "end": "2035440"
  },
  {
    "text": "reporting it pulling the image and",
    "start": "2035440",
    "end": "2041360"
  },
  {
    "text": "creating it and so what we see there is that like those controllers are responsible for each of those controllers are responsible for",
    "start": "2041360",
    "end": "2047360"
  },
  {
    "text": "that the command i just ran was cube kettle get events and i was just",
    "start": "2047360",
    "end": "2052800"
  },
  {
    "text": "targeting the the namespace in fact",
    "start": "2052800",
    "end": "2061599"
  },
  {
    "text": "deployment i think you do i always",
    "start": "2061599",
    "end": "2074320"
  },
  {
    "text": "forget if there's a way to actually get competitive events for a specific object i think there are",
    "start": "2074320",
    "end": "2081440"
  },
  {
    "text": "i'm used to just looking at here there we go",
    "start": "2082159",
    "end": "2089839"
  },
  {
    "text": "oh you know what it is describe deployment okay",
    "start": "2092480",
    "end": "2098399"
  },
  {
    "text": "so these are the events this is the event data happening at the um at the deployment object itself and so",
    "start": "2100960",
    "end": "2106400"
  },
  {
    "text": "this is an event data that is actually represented inside of the um object itself",
    "start": "2106400",
    "end": "2111839"
  },
  {
    "text": "and then if you look at the cube kettle events for the namespace then you'll be able to see even more event data",
    "start": "2111839",
    "end": "2118960"
  },
  {
    "text": "for all of the things associated with that deployment right and so what we saw was a deployment be created two minutes and",
    "start": "2118960",
    "end": "2125359"
  },
  {
    "text": "30 seconds ago we then saw a replica set telling us about things that have changed right so we've done a successful create",
    "start": "2125359",
    "end": "2132320"
  },
  {
    "text": "for the pod and then we saw the pods being started",
    "start": "2132320",
    "end": "2137520"
  },
  {
    "text": "up and we're kind of getting a little bit out of order right because we're seeing",
    "start": "2137520",
    "end": "2143040"
  },
  {
    "text": "like two minutes and 29 seconds ago we're seeing the poll image and then 20",
    "start": "2143040",
    "end": "2148320"
  },
  {
    "text": "two minutes and 23 seconds ago we saw the creation of the pod so we're seeing actually we're not",
    "start": "2148320",
    "end": "2153440"
  },
  {
    "text": "seeing out of order we're seeing the the order of events so a creation of a pod object is different than",
    "start": "2153440",
    "end": "2159280"
  },
  {
    "text": "it's showing up on the cubelet and cubelet reporting okay i'm pulling the image so that i can actually start that thing up",
    "start": "2159280",
    "end": "2165519"
  },
  {
    "text": "all right so i'm going to do cube kettle describe",
    "start": "2169760",
    "end": "2177599"
  },
  {
    "text": "deployment quicken and then we're going to look through some of the data that is being",
    "start": "2177599",
    "end": "2182800"
  },
  {
    "text": "presented by the deployment object right now i'm only looking at the deployment object i'm not looking at pods",
    "start": "2182800",
    "end": "2188000"
  },
  {
    "text": "i'm not looking at replica sets i'm just looking at the thing that i created which is the deployment object",
    "start": "2188000",
    "end": "2193520"
  },
  {
    "text": "and it's interesting stuff because i have a lot of information that is made available to me here at the",
    "start": "2193520",
    "end": "2198560"
  },
  {
    "text": "deployment object that might have been set or or made available to that deployment object",
    "start": "2198560",
    "end": "2204320"
  },
  {
    "text": "through some other controller right or has been bubbled up by some other controller",
    "start": "2204320",
    "end": "2210320"
  },
  {
    "text": "replicas for example right i did say when i created the deployment that i wanted two replicas",
    "start": "2210320",
    "end": "2216800"
  },
  {
    "text": "but the deployment object is not responsible for creating replicas it doesn't understand that it doesn't",
    "start": "2216800",
    "end": "2223680"
  },
  {
    "text": "understand necessarily that those replicas that those replicas have been created",
    "start": "2223680",
    "end": "2229440"
  },
  {
    "text": "but it can surface the answer to that question right so it's surfacing that i requested two replicas that two",
    "start": "2229440",
    "end": "2237119"
  },
  {
    "text": "have been updated that there are two total and that there are two available and this information is made",
    "start": "2237119",
    "end": "2244160"
  },
  {
    "text": "available to me via the deployment object when i'm doing cube kettle describe deployment i can",
    "start": "2244160",
    "end": "2249520"
  },
  {
    "text": "see that data but this information was not uh this did not does not come from the deployment",
    "start": "2249520",
    "end": "2256000"
  },
  {
    "text": "controller it come it's bubbled up to the deployment controller from",
    "start": "2256000",
    "end": "2261280"
  },
  {
    "text": "or to that static to that object from the replica set controller",
    "start": "2261280",
    "end": "2270320"
  },
  {
    "text": "which i think is really kind of the important point that um evan was getting to in his blog post",
    "start": "2270320",
    "end": "2277760"
  },
  {
    "start": "2279000",
    "end": "2384000"
  },
  {
    "text": "so let's move on to the next one here so that was the point of it i thought was pretty interesting and then he has some other examples right so",
    "start": "2279520",
    "end": "2285760"
  },
  {
    "text": "controller manager has a deployment object subject access review is one that actually exists but it's actually the",
    "start": "2285760",
    "end": "2292000"
  },
  {
    "text": "abstraction for that is entirely within the api server so this would actually just be a function call within the api server when",
    "start": "2292000",
    "end": "2297839"
  },
  {
    "text": "you do a subject access review although we create an object to hold state for that",
    "start": "2297839",
    "end": "2303280"
  },
  {
    "text": "object the thing that is actually manipulating that object is actually going to be the api server itself because the api",
    "start": "2303280",
    "end": "2310000"
  },
  {
    "text": "server handles the authorization piece of it so there's no controller necessarily inside the controller manager even or on",
    "start": "2310000",
    "end": "2316640"
  },
  {
    "text": "the cubelet or any of those things that is responsible for managing that subject access review object when",
    "start": "2316640",
    "end": "2322880"
  },
  {
    "text": "you do a when you so when you create one you're actually only seeing the um we're only capturing the state of",
    "start": "2322880",
    "end": "2329920"
  },
  {
    "text": "that leveraging a function within the api server itself kind of interesting stuff so we return",
    "start": "2329920",
    "end": "2336160"
  },
  {
    "text": "the controller manager off we would be able to see the object get created",
    "start": "2336160",
    "end": "2342400"
  },
  {
    "text": "so here he's actually pointing out that like that up the subject access review gets created and so there is an object",
    "start": "2353440",
    "end": "2360000"
  },
  {
    "text": "inside of the api server that is known but then there's actually a status right whether it's allowed or not allowed",
    "start": "2360000",
    "end": "2366720"
  },
  {
    "text": "and that status is set by the api server itself",
    "start": "2366720",
    "end": "2372000"
  },
  {
    "text": "so instead of actually just creating the object and letting some control or handle it the api server itself is handling that",
    "start": "2372000",
    "end": "2378400"
  },
  {
    "text": "object that status update that's pretty deep",
    "start": "2378400",
    "end": "2385200"
  },
  {
    "start": "2384000",
    "end": "2449000"
  },
  {
    "text": "now here's another one i think i personally had internalized but i had never really thought about it in these terms and i think evan does a great job",
    "start": "2385839",
    "end": "2392480"
  },
  {
    "text": "of making this very approachable and understandable and that uh if you've worked with the",
    "start": "2392480",
    "end": "2398240"
  },
  {
    "text": "kubernetes api at all um one of the things that you learn about",
    "start": "2398240",
    "end": "2403359"
  },
  {
    "text": "is this idea of gvk group version kind right and and this is going to be",
    "start": "2403359",
    "end": "2409359"
  },
  {
    "text": "really relevant to those those removed or deprecated apis because group and version are part of",
    "start": "2409359",
    "end": "2416640"
  },
  {
    "text": "what gets deprecated or removed from the api server in these circumstances but the but the",
    "start": "2416640",
    "end": "2423200"
  },
  {
    "text": "kind persists right we still have an ingress",
    "start": "2423200",
    "end": "2428480"
  },
  {
    "text": "object that you can define in version 1.22 but what's different is the group and",
    "start": "2428480",
    "end": "2435920"
  },
  {
    "text": "version the path to that object that gets created is different",
    "start": "2435920",
    "end": "2442960"
  },
  {
    "text": "so and we're going to dig into like how this works in this in this article and i think he does a great job of describing it but",
    "start": "2443119",
    "end": "2449839"
  },
  {
    "start": "2449000",
    "end": "2787000"
  },
  {
    "text": "the other piece that i think highlight the highlights is that you also have group version",
    "start": "2449839",
    "end": "2455359"
  },
  {
    "text": "resource and these things i these three coordinates identify apis right and so we think about custom",
    "start": "2455359",
    "end": "2462560"
  },
  {
    "text": "resource definitions we're defining group version resource we're defining whether that resource is",
    "start": "2462560",
    "end": "2468240"
  },
  {
    "text": "scoped to a namespace or to a cluster but this is a resource it's an api that is",
    "start": "2468240",
    "end": "2473440"
  },
  {
    "text": "extended right and then the objects the representation of objects",
    "start": "2473440",
    "end": "2479040"
  },
  {
    "text": "that can that are consumed by that api that's gvk group version kind",
    "start": "2479040",
    "end": "2485440"
  },
  {
    "text": "so if i defined a new crd for pieces and i might say my group and version",
    "start": "2485440",
    "end": "2493680"
  },
  {
    "text": "i don't know uh trying to think of you know some really",
    "start": "2493680",
    "end": "2500079"
  },
  {
    "text": "famous new york italian pizzeria right um as the as the group right so and another",
    "start": "2500079",
    "end": "2508000"
  },
  {
    "text": "another practical example is it might be like isovent.com or yourcompany.com or you know cluster.com",
    "start": "2508000",
    "end": "2515920"
  },
  {
    "text": "any any of those particular groups that you define and then the version is where in the api",
    "start": "2515920",
    "end": "2521599"
  },
  {
    "text": "versioning scheme am i for this particular api that i've extended right so is it",
    "start": "2521599",
    "end": "2526960"
  },
  {
    "text": "an alpha is it out is it an alpha um api is it a beta api and what version",
    "start": "2526960",
    "end": "2533440"
  },
  {
    "text": "or or or where in the life cycle of that versioning scheme am i so the very first one i might i might",
    "start": "2533440",
    "end": "2538560"
  },
  {
    "text": "call it v one alpha one",
    "start": "2538560",
    "end": "2542480"
  },
  {
    "text": "rows there you go thank you dad i mean thank you pop so the group could be roused and the",
    "start": "2544160",
    "end": "2549760"
  },
  {
    "text": "version could be v1 actually that's probably v1 right because like these guys are very mature in making pizza",
    "start": "2549760",
    "end": "2555920"
  },
  {
    "text": "and then the um resource object might be pizzas",
    "start": "2555920",
    "end": "2561200"
  },
  {
    "text": "but when i create a pizza like say i want a just an amazing um pizza that has like",
    "start": "2562240",
    "end": "2571760"
  },
  {
    "text": "basil and tomato and just like really just like i want to go for like the og pizza i",
    "start": "2573839",
    "end": "2580160"
  },
  {
    "text": "want to go for like you know really good like the the the really good just like",
    "start": "2580160",
    "end": "2585599"
  },
  {
    "text": "base upon which all things are built pizza right then i might create that object and i",
    "start": "2585599",
    "end": "2591359"
  },
  {
    "text": "have to create an object of kind pizza and then i can say what the ingredients would be basil tomato",
    "start": "2591359",
    "end": "2597599"
  },
  {
    "text": "um the really amazing dough and that's going to be my that's i mean and some cheese and that's going to be my it's going to be my pizza",
    "start": "2597599",
    "end": "2606000"
  },
  {
    "text": "and so this is where the gvk part comes in right when i define a pizza leveraging that api made available to me",
    "start": "2606000",
    "end": "2612240"
  },
  {
    "text": "by a resource then we can actually uh let me create the gvk",
    "start": "2612240",
    "end": "2617920"
  },
  {
    "text": "we create that object and that object is represented by the conversion kind all right so let's take",
    "start": "2617920",
    "end": "2623359"
  },
  {
    "text": "a look a little bit more into how they do how he defines it here",
    "start": "2623359",
    "end": "2628720"
  },
  {
    "text": "and the example here saying let's take a look at a single object right and so in this in this particular",
    "start": "2633359",
    "end": "2638720"
  },
  {
    "text": "case we're looking at the an rbac object that's been defined kind of by default within your cluster",
    "start": "2638720",
    "end": "2644560"
  },
  {
    "text": "oh no this is actually one that he created because it's inside the namespace default so this is a this is a role",
    "start": "2644560",
    "end": "2652560"
  },
  {
    "text": "interesting why is that namespace there because he created the role within the namespace so this is a namespace role that",
    "start": "2652560",
    "end": "2660160"
  },
  {
    "text": "has been generated that he generated directly and you can see that the group is our back authorization case to io and",
    "start": "2660160",
    "end": "2666880"
  },
  {
    "text": "the version is v1 right so this is the actual object that's been created and this is how this",
    "start": "2666880",
    "end": "2673119"
  },
  {
    "text": "was created right so if i do cube kettle create roll",
    "start": "2673119",
    "end": "2681440"
  },
  {
    "text": "and default gonna give it a name like",
    "start": "2686480",
    "end": "2691920"
  },
  {
    "text": "pod reader and then",
    "start": "2691920",
    "end": "2697920"
  },
  {
    "text": "we're going to verb equals",
    "start": "2698560",
    "end": "2705520"
  },
  {
    "text": "get watch",
    "start": "2706160",
    "end": "2710559"
  },
  {
    "text": "lists resource equals",
    "start": "2716839",
    "end": "2721520"
  },
  {
    "text": "this is actually just using the cube kettle command line to go ahead and create that same object that we see in the blog post",
    "start": "2724960",
    "end": "2730400"
  },
  {
    "text": "and if i do cube kettle get",
    "start": "2730400",
    "end": "2733838"
  },
  {
    "text": "roll pod reader oh yemo we should be able to see the basically",
    "start": "2736160",
    "end": "2741920"
  },
  {
    "text": "that same output that we saw on the left and it gives us the ability to play with this stuff right so we can actually just create that object directly",
    "start": "2741920",
    "end": "2748640"
  },
  {
    "text": "now this is an object like i said before and this is actually one of the things i thought was really succinct about the blog post right",
    "start": "2748640",
    "end": "2754960"
  },
  {
    "text": "this is the group this is the version and this is the kind and this is defined here because this is",
    "start": "2754960",
    "end": "2761520"
  },
  {
    "text": "an object that has been created if you're if you're extending kubernetes",
    "start": "2761520",
    "end": "2767119"
  },
  {
    "text": "to understand a particular crd then the group and version might be it might be something else",
    "start": "2767119",
    "end": "2772640"
  },
  {
    "text": "but this particular group inversion is made it's part is made available via the core api",
    "start": "2772640",
    "end": "2788160"
  },
  {
    "start": "2787000",
    "end": "2869000"
  },
  {
    "text": "there's nothing in the object that tells you what the resource is the cube api server maintains a mapping",
    "start": "2788160",
    "end": "2794000"
  },
  {
    "text": "of resource types to kinds as do cube clients like cube kettler client go",
    "start": "2794000",
    "end": "2799040"
  },
  {
    "text": "this is called the rest mapping in these client projects and related docs once",
    "start": "2799040",
    "end": "2804319"
  },
  {
    "text": "you know the resource there are simple rules for building urls apis group version resource name api's",
    "start": "2804319",
    "end": "2811200"
  },
  {
    "text": "group version name space is a name if it's a namespace object if it's a cluster scope object you'd be able to see it here",
    "start": "2811200",
    "end": "2816480"
  },
  {
    "text": "if it's a namespace object you'd be able to see it there now if you want to like explore that stuff live or if you want",
    "start": "2816480",
    "end": "2821599"
  },
  {
    "text": "to kind of dig into like playing with this pathing information you can actually look at this information",
    "start": "2821599",
    "end": "2827119"
  },
  {
    "text": "directly if you just turn on cube general cubecattleproxy right so let's just say cubekiddle proxy",
    "start": "2827119",
    "end": "2834800"
  },
  {
    "text": "and now i'm serving the entire api server in a kind of a read-only mode at one two",
    "start": "2834800",
    "end": "2840559"
  },
  {
    "text": "seven zero zero one call it 8001. it's not only you could you could do all kinds of stuff and stuff there but",
    "start": "2840559",
    "end": "2846720"
  },
  {
    "text": "let's go ahead and pull this up so in the let me make this a little bit bigger",
    "start": "2846720",
    "end": "2853839"
  },
  {
    "text": "so in the um blog post you know i'm going to clean up my browser tabs here i know people don't generally do that",
    "start": "2853839",
    "end": "2859760"
  },
  {
    "text": "but i'm i'm i'm a wild person that way let's do some",
    "start": "2859760",
    "end": "2865119"
  },
  {
    "text": "stuff so we see apis group version",
    "start": "2865119",
    "end": "2873359"
  },
  {
    "text": "resource name right so let's see if we can find the resource associated with rbac",
    "start": "2873359",
    "end": "2879839"
  },
  {
    "text": "so i know that this is going to be under authentication k8 to io because that's where the r backs",
    "start": "2879839",
    "end": "2888240"
  },
  {
    "text": "actually it's going to be in our back well where would it be that's a great interesting question",
    "start": "2888240",
    "end": "2893680"
  },
  {
    "text": "so our object is a roll and actually we can see from the header",
    "start": "2893680",
    "end": "2900160"
  },
  {
    "text": "information it's going to be our back authorization so if we look inside of here we can see",
    "start": "2900160",
    "end": "2907040"
  },
  {
    "text": "our back authorization so this gives us that same path that we",
    "start": "2907040",
    "end": "2913040"
  },
  {
    "text": "talked about in the blog post right if i wanted to understand for the role",
    "start": "2913040",
    "end": "2918559"
  },
  {
    "text": "what the path would be it would be under slash apis group version resource name so my group and",
    "start": "2918559",
    "end": "2924960"
  },
  {
    "text": "version are our back authorization cage to i o and my version is v1 so let's go check",
    "start": "2924960",
    "end": "2931920"
  },
  {
    "text": "out that path and see what we see so i'm going to go ahead and grab this url",
    "start": "2931920",
    "end": "2937359"
  },
  {
    "text": "copy and i'm going to paste it against the our back proxy that i see here",
    "start": "2939200",
    "end": "2946400"
  },
  {
    "text": "inside of here this is that rest mapping that evan is referring to right so these are the things that can",
    "start": "2946960",
    "end": "2954319"
  },
  {
    "text": "be created so this is the um the resources that have been defined you",
    "start": "2954319",
    "end": "2961119"
  },
  {
    "text": "can define a cluster role binding and the kind or object that can be defined for this",
    "start": "2961119",
    "end": "2967520"
  },
  {
    "text": "particular resource is a cluster role binding the resource for cluster roles",
    "start": "2967520",
    "end": "2973440"
  },
  {
    "text": "and the object or kind that can be defined is cluster role and these are the things that can be",
    "start": "2973440",
    "end": "2978880"
  },
  {
    "text": "done to that particular object so that for the for this particular rest mapping",
    "start": "2978880",
    "end": "2984160"
  },
  {
    "text": "so when we create this object these are the things that can be done with it",
    "start": "2984160",
    "end": "2989760"
  },
  {
    "text": "if we cruise down a little bit further i think we can see rolls right and this is an interesting",
    "start": "2992079",
    "end": "2997680"
  },
  {
    "text": "one because roles are defined not a cluster scope but in a namespace scope so in this rest mapping we can see that",
    "start": "2997680",
    "end": "3005200"
  },
  {
    "text": "this is a role it is represented by a kind or an object called a role",
    "start": "3005200",
    "end": "3010559"
  },
  {
    "text": "and it is a namespace object meaning that it can only be created at a namespace level i can't create a",
    "start": "3010559",
    "end": "3017119"
  },
  {
    "text": "cluster-wide role with this object there's a different object for that but",
    "start": "3017119",
    "end": "3022240"
  },
  {
    "text": "since this one's namespaced it can only be created within a namespace and that's why when i did my",
    "start": "3022240",
    "end": "3027599"
  },
  {
    "text": "cube kettle command to create the object which i think i made go away but when i used like when i",
    "start": "3027599",
    "end": "3034800"
  },
  {
    "text": "when i did the um command to create the object i had to specify a namespace in which to put it",
    "start": "3034800",
    "end": "3040240"
  },
  {
    "text": "and then the verbs associated with this one it can be you can do a create a delete you can delete a whole bunch of",
    "start": "3040240",
    "end": "3045520"
  },
  {
    "text": "them you can get them all list them you can patch them or update them and you can also watch for them",
    "start": "3045520",
    "end": "3052558"
  },
  {
    "text": "now in this rest mapping we also have storage version and this is actually",
    "start": "3053760",
    "end": "3058960"
  },
  {
    "text": "kind of an interesting one let's go ahead and decode this because i think it's kind of interesting that it's in base",
    "start": "3058960",
    "end": "3064640"
  },
  {
    "text": "64. i thought that would actually not be but go whenever i see base64 i can almost",
    "start": "3064640",
    "end": "3072800"
  },
  {
    "text": "always want to just decode it to see what it says",
    "start": "3072800",
    "end": "3082960"
  },
  {
    "text": "awful dress i wonder if i messed something up here",
    "start": "3082960",
    "end": "3089599"
  },
  {
    "text": "oh storage version hash i'm silly up here at the",
    "start": "3089599",
    "end": "3097838"
  },
  {
    "text": "so for the group in the v1 we can see what the preferred version is that we're",
    "start": "3119599",
    "end": "3124880"
  },
  {
    "text": "going to store it as or make it available let's go back to our blog post here",
    "start": "3124880",
    "end": "3131440"
  },
  {
    "text": "so this is actually how we can see it and there's actually another great doc in the docs that says api concepts document that gives you",
    "start": "3131440",
    "end": "3136960"
  },
  {
    "text": "information about how this stuff works thank you for coming by diane see you next time",
    "start": "3136960",
    "end": "3143359"
  },
  {
    "start": "3144000",
    "end": "3353000"
  },
  {
    "text": "all right the next one up is objects are accessible at all api versions which i think is another",
    "start": "3144319",
    "end": "3150480"
  },
  {
    "text": "really important one and i i think i think we're probably gonna have to hop through these a little quicker because i think we're taking our street time about it but i i",
    "start": "3150480",
    "end": "3156960"
  },
  {
    "text": "feel like there are some really distinct points that we should mix first that we should get out of this right so objects are accessible at all api",
    "start": "3156960",
    "end": "3163119"
  },
  {
    "text": "versions and this is actually a really useful one for understanding how to convert objects and how that",
    "start": "3163119",
    "end": "3168640"
  },
  {
    "text": "conversion process works as you handle an upgrade right let's take a look here",
    "start": "3168640",
    "end": "3175119"
  },
  {
    "text": "so we create an ingress at this new newly to be deprecated version networking for",
    "start": "3176960",
    "end": "3182400"
  },
  {
    "text": "uh networking.k8s to io at v1 beta1 and then we do a get or a create of that",
    "start": "3182400",
    "end": "3188079"
  },
  {
    "text": "we'll see that object get created",
    "start": "3188079",
    "end": "3195839"
  },
  {
    "text": "and we can see that instead of and then it's made available to us on the get at this new version and that means in",
    "start": "3203760",
    "end": "3210400"
  },
  {
    "text": "this particular case it's calling out the preferred version that's what he's that's what he's referring to here right",
    "start": "3210400",
    "end": "3215599"
  },
  {
    "text": "so when we looked at the group version right we can see that the preferred version so anything that",
    "start": "3215599",
    "end": "3220960"
  },
  {
    "text": "when somebody just does a random get of roles then i'm going to provide them the result as mapped in this way",
    "start": "3220960",
    "end": "3227839"
  },
  {
    "text": "but if i had a different preferred version then i would then even though i might have compatible versions like in",
    "start": "3227839",
    "end": "3233520"
  },
  {
    "text": "this particular case i support uh creating i mean the it's it's supported to be able to create a",
    "start": "3233520",
    "end": "3239920"
  },
  {
    "text": "role using v1 beta 1 or v1 you can create either one but when you",
    "start": "3239920",
    "end": "3244960"
  },
  {
    "text": "ask me for the result of that object that was created then i'm only going to provide that data unless otherwise specified as that",
    "start": "3244960",
    "end": "3251119"
  },
  {
    "text": "particular version",
    "start": "3251119",
    "end": "3254000"
  },
  {
    "text": "you can find out what the preferred version is by looking at the group okay and if we're looking at it here but he also calls out another really cool",
    "start": "3258559",
    "end": "3264720"
  },
  {
    "text": "command which is this one oop control c",
    "start": "3264720",
    "end": "3270160"
  },
  {
    "text": "you can get raw apis and so in our example",
    "start": "3270160",
    "end": "3275200"
  },
  {
    "text": "let's just do networking okay it's the i o so that's the group",
    "start": "3275200",
    "end": "3293838"
  },
  {
    "text": "we can see the version that is being um made up that is preferred is v1 just like they were talking about before",
    "start": "3294319",
    "end": "3299839"
  },
  {
    "text": "right the version of the object stored in sdd may differ that from the",
    "start": "3299839",
    "end": "3305200"
  },
  {
    "text": "submerged from the submitted version or and of the preferred version for every group and resource the kubernetes api",
    "start": "3305200",
    "end": "3311440"
  },
  {
    "text": "server knows the served versions the decodable versions the storage or",
    "start": "3311440",
    "end": "3317040"
  },
  {
    "text": "encodable version and the preferred version if you submit an object to the api",
    "start": "3317040",
    "end": "3323920"
  },
  {
    "text": "server and it doesn't match the storage version the api server will convert it to the storage version",
    "start": "3323920",
    "end": "3329119"
  },
  {
    "text": "before storing it in scd to be more precise it first it converts it to an internal version before converting it back to the",
    "start": "3329119",
    "end": "3335760"
  },
  {
    "text": "storage version but this is an implementation detail",
    "start": "3335760",
    "end": "3340640"
  },
  {
    "text": "now this is where like some deep magic happens at the api server and i think it's worth understanding that this",
    "start": "3341119",
    "end": "3346799"
  },
  {
    "text": "happens because it's actually pretty neat i'm trying to think we can actually have an example here",
    "start": "3346799",
    "end": "3352319"
  },
  {
    "text": "to walk through it but maybe he's actually answered that for us so for example in cube 120 the preferred",
    "start": "3352319",
    "end": "3358400"
  },
  {
    "start": "3353000",
    "end": "3488000"
  },
  {
    "text": "version of aggressors v1 but the storage version is v1 beta1 this can be seen by looking at the data the",
    "start": "3358400",
    "end": "3364559"
  },
  {
    "text": "api server stores in sed directly",
    "start": "3364559",
    "end": "3377839"
  },
  {
    "text": "uh but he's created the ingress object and he's going ahead and grabbing the",
    "start": "3388839",
    "end": "3396079"
  },
  {
    "text": "content the data from scd directly leveraging auger",
    "start": "3396319",
    "end": "3405838"
  },
  {
    "text": "and we can see that the api version stored inside of lcd is a networking k8 it's to io flash v1",
    "start": "3406160",
    "end": "3411920"
  },
  {
    "text": "beta 1 or v1 beta 1.",
    "start": "3411920",
    "end": "3419839"
  },
  {
    "text": "now that's a little bit contrary to what something we said before when like the object that is stored the content that's",
    "start": "3426720",
    "end": "3432000"
  },
  {
    "text": "stored in lcd doesn't know about group version and kind and i want to clear that up a little bit",
    "start": "3432000",
    "end": "3440240"
  },
  {
    "text": "so i think where the disconnect is happening is that we say",
    "start": "3442880",
    "end": "3448559"
  },
  {
    "text": "that the object doesn't know anything about it now while that's true it means that",
    "start": "3448559",
    "end": "3460720"
  },
  {
    "text": "if you look at the object that's stored in std there is some content that's stored about it right so we can actually",
    "start": "3460720",
    "end": "3466160"
  },
  {
    "text": "have a preferred storage version or storage version that is represented by that storage version but that storage version",
    "start": "3466160",
    "end": "3472240"
  },
  {
    "text": "isn't necessarily the entire api that is exposed by that by that uh extended api itself",
    "start": "3472240",
    "end": "3478880"
  },
  {
    "text": "right it's just whatever uh is necessary to store the object in that cd",
    "start": "3478880",
    "end": "3484880"
  },
  {
    "text": "uh and these can differ and this is i think where evan's point is coming in right so in 120 for example we stored only",
    "start": "3484880",
    "end": "3491920"
  },
  {
    "text": "that only that data that was made available inside of that beta api but in the newer version the start this",
    "start": "3491920",
    "end": "3499599"
  },
  {
    "text": "the stable version the content might have changed it might have required new fields and so there's some conversion that has",
    "start": "3499599",
    "end": "3505440"
  },
  {
    "text": "to happen now if we cared",
    "start": "3505440",
    "end": "3510720"
  },
  {
    "text": "if if we get caught up in it here what that means is that like",
    "start": "3510720",
    "end": "3516480"
  },
  {
    "text": "we can easily get into a position where the data that's being presented when you",
    "start": "3516480",
    "end": "3521760"
  },
  {
    "text": "do a cube kettle get of an object might be materially different than",
    "start": "3521760",
    "end": "3527920"
  },
  {
    "text": "the way that that object is stored so let's say i created that pizza that we talked about before",
    "start": "3527920",
    "end": "3534640"
  },
  {
    "text": "and before i didn't particularly care about what the contents of the dough were or you know a particular topping like i",
    "start": "3534640",
    "end": "3540799"
  },
  {
    "text": "didn't make i didn't even make it available that you could put pepperoni on a pizza and so i didn't really have like the",
    "start": "3540799",
    "end": "3547440"
  },
  {
    "text": "topping section built out and so to make the topping section to build out the topping section i needed to",
    "start": "3547440",
    "end": "3552480"
  },
  {
    "text": "change the api so if i created a version of pizza at",
    "start": "3552480",
    "end": "3557520"
  },
  {
    "text": "v1 beta 1 that didn't have toppings and i made that my storage versions and",
    "start": "3557520",
    "end": "3562720"
  },
  {
    "text": "the thing i'm storing in lcd wouldn't actually have information about toppings at all and so even if i were to make a new extended",
    "start": "3562720",
    "end": "3569520"
  },
  {
    "text": "api that had that topping information i would need to have some way of defaulting or making available the",
    "start": "3569520",
    "end": "3575680"
  },
  {
    "text": "the toppings option so that that object could be stored with toppings as we move forward",
    "start": "3575680",
    "end": "3580880"
  },
  {
    "text": "right and so the storage version that is represented inside of std might be materially different",
    "start": "3580880",
    "end": "3586000"
  },
  {
    "text": "than the version of the api that i made available via the via the crd",
    "start": "3586000",
    "end": "3593280"
  },
  {
    "text": "i know it wasn't super easy to follow it was a little bit confusing but suffice to say the storage version is",
    "start": "3593280",
    "end": "3600160"
  },
  {
    "text": "usually the preferred version but it can be overridden so in in 120 for example the storage",
    "start": "3600160",
    "end": "3605440"
  },
  {
    "text": "version was different than the preferred version",
    "start": "3605440",
    "end": "3609440"
  },
  {
    "text": "changing the object stored version requires writing a newer api server or a newer crd depending on how you know on",
    "start": "3611040",
    "end": "3618240"
  },
  {
    "text": "what you're working with here right so if we wanted to change the object storage version for something that was built into the api so",
    "start": "3618240",
    "end": "3624480"
  },
  {
    "text": "we're like that role object that we talked about before we would need to change the",
    "start": "3624480",
    "end": "3630000"
  },
  {
    "text": "we'd need to change the api server because that's actually where we're defining the api for a particular version of",
    "start": "3630000",
    "end": "3638799"
  },
  {
    "text": "kubernetes in this example we create an object at",
    "start": "3640839",
    "end": "3646160"
  },
  {
    "text": "v1 in q120 which stores at v1 beta1 we update the api server to version 1.21",
    "start": "3646160",
    "end": "3652559"
  },
  {
    "text": "and check an sdd that it's still stored as v1 beta1 and then we overwrite the object with a",
    "start": "3652559",
    "end": "3657920"
  },
  {
    "text": "new api server to see it stored at v1 so check this out this is how you might migrate or how you earlier",
    "start": "3657920",
    "end": "3664559"
  },
  {
    "text": "we talked about i'm going to pause this for a moment earlier we talked about the very salient",
    "start": "3664559",
    "end": "3669680"
  },
  {
    "text": "point that um stefan pointed out right wherein if you create an object at version that at a version that",
    "start": "3669680",
    "end": "3676799"
  },
  {
    "text": "will be removed from api serving how do we actually convert that object on the back end",
    "start": "3676799",
    "end": "3682240"
  },
  {
    "text": "to make it available so that we don't just like abandon those objects that don't work anymore right and this is actually practically",
    "start": "3682240",
    "end": "3688640"
  },
  {
    "text": "how it works and this is a great example right so we have a cluster it's version is is serving v120.7",
    "start": "3688640",
    "end": "3697200"
  },
  {
    "text": "and then they go ahead and create a new ingress object using v1 and we can see because we're",
    "start": "3697200",
    "end": "3704640"
  },
  {
    "text": "still running running at cube 120 that when we go through the cube api server version at 120 the object is",
    "start": "3704640",
    "end": "3711599"
  },
  {
    "text": "stored in ncd as v1 beta1 so it's that same scdctl command",
    "start": "3711599",
    "end": "3719039"
  },
  {
    "text": "and we can see that it's stored as v1 beta1 so now with that api server operating at",
    "start": "3721280",
    "end": "3728039"
  },
  {
    "text": "v1.20 this is the only way we're going to store these objects",
    "start": "3728039",
    "end": "3733920"
  },
  {
    "text": "now he's migrating his api server to version 1.21",
    "start": "3735359",
    "end": "3741839"
  },
  {
    "text": "and we can see that the change has been made",
    "start": "3743839",
    "end": "3747760"
  },
  {
    "text": "we reconfigure scd using the same storage backend",
    "start": "3750240",
    "end": "3756799"
  },
  {
    "text": "now even though you couldn't you wouldn't be able to create this object at v1 beta1 anymore",
    "start": "3763760",
    "end": "3769599"
  },
  {
    "text": "you would still be able to see that it's stored that way because this object came from before the cluster was upgraded",
    "start": "3769599",
    "end": "3774720"
  },
  {
    "text": "before the api server was moved to version view 1.121",
    "start": "3774720",
    "end": "3783839"
  },
  {
    "text": "now what this is doing is it's just doing a straight replace of the object",
    "start": "3788640",
    "end": "3793920"
  },
  {
    "text": "and we can see now that the store that the version that we do a cube if we do it stdget we can see that the",
    "start": "3795200",
    "end": "3801280"
  },
  {
    "text": "stored version gets updated and this kind of happens somewhat",
    "start": "3801280",
    "end": "3806319"
  },
  {
    "text": "organically within kubernetes which is actually pretty neat so it means that anytime you modify that",
    "start": "3806319",
    "end": "3811839"
  },
  {
    "text": "object and the storage version has changed anytime you modify that object",
    "start": "3811839",
    "end": "3818319"
  },
  {
    "text": "the object will get stored as the new preferred storage version so if i created a whole bunch of",
    "start": "3818319",
    "end": "3824319"
  },
  {
    "text": "resources like deployments for example at v1 beta 1 and i haven't modified that",
    "start": "3824319",
    "end": "3829520"
  },
  {
    "text": "deployment but my cluster has moved forward in versions right so i'm no longer a 116 i moved to",
    "start": "3829520",
    "end": "3835760"
  },
  {
    "text": "117 and moved to 180 and move to 119 what have you the um those objects need to be touched",
    "start": "3835760",
    "end": "3842319"
  },
  {
    "text": "or modified in the cluster before you move to the next version so that we can store those in the new storage version",
    "start": "3842319",
    "end": "3850799"
  },
  {
    "text": "and this is where that uh those release notes that stefan was talking about before you have a couple of different options so you could actually run a keep",
    "start": "3850799",
    "end": "3856559"
  },
  {
    "text": "cutting command that just goes through and does a replace on every object in the lcd data store",
    "start": "3856559",
    "end": "3861839"
  },
  {
    "text": "and it's an intensive thing but you can even like you know stash it right you can you can go buy api paths let's do all of our",
    "start": "3861839",
    "end": "3868240"
  },
  {
    "text": "back let's do all of ingress let's do all of networking let's do all of you know deployments and replica sets",
    "start": "3868240",
    "end": "3873680"
  },
  {
    "text": "and all the different crds that we want to modify and this gives us the ability to go through and touch all of those objects",
    "start": "3873680",
    "end": "3879839"
  },
  {
    "text": "and get them stored to the new version before we move to the next version of kubernetes now you might have heard",
    "start": "3879839",
    "end": "3885359"
  },
  {
    "text": "like in the upgrade guide or red in the upgrade guide inside of kubernetes that you want that you need to",
    "start": "3885359",
    "end": "3890400"
  },
  {
    "text": "ensure that you don't skip any patch versions when upgrading your kubernetes cluster",
    "start": "3890400",
    "end": "3897280"
  },
  {
    "text": "so if you're going to go from 116 to 117 or if your target is from 116",
    "start": "3897280",
    "end": "3902480"
  },
  {
    "text": "to say like 120 you can't just go from 116 to 120. the steps that are",
    "start": "3902480",
    "end": "3909440"
  },
  {
    "text": "necessary to do that are that you bring up a 117 cluster that might have",
    "start": "3909440",
    "end": "3914799"
  },
  {
    "text": "changed the storage version for those objects stored in your data store",
    "start": "3914799",
    "end": "3919839"
  },
  {
    "text": "and then you touch all of those objects to make sure that they're now at that new storage version and then you",
    "start": "3919839",
    "end": "3926880"
  },
  {
    "text": "can upgrade to 117. right so you go 116 117 you upgrade all",
    "start": "3926880",
    "end": "3934319"
  },
  {
    "text": "the things to the new storage version 118 upgrade all the things in the storage version 119 upgrade to all of things to",
    "start": "3934319",
    "end": "3940400"
  },
  {
    "text": "do storage version because that's the guarantee the api guarantee that we have is that we'll get you from old version",
    "start": "3940400",
    "end": "3947599"
  },
  {
    "text": "to new version but not necessarily old version to some forward version",
    "start": "3947599",
    "end": "3953599"
  },
  {
    "text": "and now you kind of understand materially why that's important the storage version the thing that's",
    "start": "3954079",
    "end": "3959680"
  },
  {
    "text": "actually stored in scd needs to maintain needs to mean needs to",
    "start": "3959680",
    "end": "3965119"
  },
  {
    "text": "be stored in a way that is compatible both with this version of the api server and potentially the next one and that's",
    "start": "3965119",
    "end": "3971760"
  },
  {
    "text": "actually how we how we manage that",
    "start": "3971760",
    "end": "3978400"
  },
  {
    "text": "so these are the pieces of this of this blog post that i think really really apply to api removals and",
    "start": "3978400",
    "end": "3984480"
  },
  {
    "text": "deprecations right what we talked about so far is if we're going to remove an api from serving then that means that the objects",
    "start": "3984480",
    "end": "3991760"
  },
  {
    "text": "that you created with that old api server are still around they're still hosted inside of the lcd cluster",
    "start": "3991760",
    "end": "3998400"
  },
  {
    "text": "and they may be hosted in scd at some older version of storage version",
    "start": "3998400",
    "end": "4004000"
  },
  {
    "text": "right but the thing that's important is that those objects don't just get dropped on the",
    "start": "4004000",
    "end": "4010000"
  },
  {
    "text": "floor they don't stop existing inside of your kubernetes cluster they're still there they just need to be migrated to a new",
    "start": "4010000",
    "end": "4015680"
  },
  {
    "text": "storage version because you've changed the version that is available via the api server",
    "start": "4015680",
    "end": "4021760"
  },
  {
    "text": "and that fact and that may have actually already taken place in fact so like the preferred version is likely",
    "start": "4021760",
    "end": "4028000"
  },
  {
    "text": "forward for all of those objects that we talked about in the blog post right so whenever you're creating even",
    "start": "4028000",
    "end": "4033039"
  },
  {
    "text": "the old versions right now they're being stored as the new version the conversion is already happening for",
    "start": "4033039",
    "end": "4038079"
  },
  {
    "text": "you but suffice to say that as you move from 121 the scenario of",
    "start": "4038079",
    "end": "4044799"
  },
  {
    "text": "i had a cluster it was operating at version 120. i created a bunch of objects against old",
    "start": "4044799",
    "end": "4051599"
  },
  {
    "text": "api against old apis that were available to me in version 120",
    "start": "4051599",
    "end": "4057280"
  },
  {
    "text": "and then i upgraded my cluster to 1.21 are those objects still there yes",
    "start": "4057280",
    "end": "4063520"
  },
  {
    "text": "they're still there and they're still available and you can still modify them and touch",
    "start": "4063520",
    "end": "4069039"
  },
  {
    "text": "them and make use of them but you can't create new objects",
    "start": "4069039",
    "end": "4074960"
  },
  {
    "text": "at that api version anymore if you tried you would get an error back saying that",
    "start": "4074960",
    "end": "4080319"
  },
  {
    "text": "that api version is not available but all of those things that you did",
    "start": "4080319",
    "end": "4085680"
  },
  {
    "text": "create are still present within the api server if you want quick ways to understand",
    "start": "4085680",
    "end": "4092559"
  },
  {
    "text": "what versions are available right so this is actually one of the tricks i wanted to share with you here",
    "start": "4092559",
    "end": "4099678"
  },
  {
    "text": "one of my favorite commands i i give so much i give so many shout outs to this command it's like seriously a lifesaver i think",
    "start": "4100239",
    "end": "4107278"
  },
  {
    "text": "cube kettle explain",
    "start": "4107279",
    "end": "4110480"
  },
  {
    "text": "deployment but even if your crd hasn't implemented",
    "start": "4116839",
    "end": "4122080"
  },
  {
    "text": "uh the explained piece completely this bit up here will already be made available inside of",
    "start": "4122080",
    "end": "4128960"
  },
  {
    "text": "cube cuddle explain so if you want to know what the current preferred version of an object is you can actually look in",
    "start": "4128960",
    "end": "4136719"
  },
  {
    "text": "cube kindle explain and it will tell you if you're going to create a deployment go ahead and create that as",
    "start": "4136719",
    "end": "4142960"
  },
  {
    "text": "group apps version v1",
    "start": "4142960",
    "end": "4147838"
  },
  {
    "text": "and if you have crds defined inside of your cluster you'll be able to see that as well right because crds also extend the api",
    "start": "4148400",
    "end": "4154719"
  },
  {
    "text": "server and they also have to define what their preferred version is so if you do cube kettle explain of",
    "start": "4154719",
    "end": "4161199"
  },
  {
    "text": "some crd that has been defined you'll be able to see what the preferred version for that object is there as well",
    "start": "4161199",
    "end": "4175839"
  },
  {
    "text": "i'm not going to get into ratcheting validation",
    "start": "4176480",
    "end": "4180640"
  },
  {
    "text": "there is in 120 plus there is actually a storage version api this is something new that i had i was",
    "start": "4181679",
    "end": "4187120"
  },
  {
    "text": "unaware of apparently it stuck behind a feature gate which is pretty neat but",
    "start": "4187120",
    "end": "4193838"
  },
  {
    "text": "apparently it would it would perhaps show us information oh that's cool",
    "start": "4193839",
    "end": "4200880"
  },
  {
    "text": "okay so with the storage version api this is a relatively new thing i don't think it's actually",
    "start": "4200880",
    "end": "4206960"
  },
  {
    "text": "there by default uh",
    "start": "4207040",
    "end": "4216320"
  },
  {
    "text": "internal api server ksio so let's see i'm going to check to see if my cluster",
    "start": "4216320",
    "end": "4221360"
  },
  {
    "text": "has this resource defined so let's take a look and see if it is right so because i'm looking for a",
    "start": "4221360",
    "end": "4227440"
  },
  {
    "text": "resource the way that i'm going to determine that resource is available or not is i'm",
    "start": "4227440",
    "end": "4232480"
  },
  {
    "text": "going to do cubekittle get actually q kettle api",
    "start": "4232480",
    "end": "4238320"
  },
  {
    "text": "resources and i'm going to look for i'm just going to grab for internal",
    "start": "4242840",
    "end": "4248719"
  },
  {
    "text": "and it looks like this particular cluster does not have that feature gate enabled",
    "start": "4251120",
    "end": "4256159"
  },
  {
    "text": "and the way that he enables that i kind of want to play with this one so let's go ahead and turn this on",
    "start": "4256159",
    "end": "4261199"
  },
  {
    "text": "because i think that looks really cool unfortunately evan gave us an example of",
    "start": "4261199",
    "end": "4267040"
  },
  {
    "text": "what to do from",
    "start": "4267040",
    "end": "4273840"
  },
  {
    "text": "from the uh kind config to go ahead and enable this right so let's go ahead and do that",
    "start": "4276239",
    "end": "4282400"
  },
  {
    "text": "new kind delete cluster if you wanted to play",
    "start": "4282400",
    "end": "4288719"
  },
  {
    "text": "with this stuff you could play with this stuff in this way as well i'm going to make a directory that we're going to work on here we're going to",
    "start": "4288719",
    "end": "4294239"
  },
  {
    "text": "call this uh twicken 5 cd tweaking zero zero five",
    "start": "4294239",
    "end": "4301520"
  },
  {
    "text": "and then we're gonna do okay uh caps kinda",
    "start": "4301520",
    "end": "4311280"
  },
  {
    "text": "ammo",
    "start": "4312840",
    "end": "4315840"
  },
  {
    "text": "and so i know that this is a kind.yaml because of the api version in this right so it says kinda case i o",
    "start": "4318400",
    "end": "4324320"
  },
  {
    "text": "v one alpha four and then these are parameters so i can pass to my kind cluster that configure the the cluster in a",
    "start": "4324320",
    "end": "4330640"
  },
  {
    "text": "specific way and these parameters get passed to cube adm inside of the",
    "start": "4330640",
    "end": "4336400"
  },
  {
    "text": "cluster on startup so these feature gates if you want to enable a feature gate inside of kind you",
    "start": "4336400",
    "end": "4342080"
  },
  {
    "text": "can just use a feature gate stanza and then enable particular features and then inside of the runtime config",
    "start": "4342080",
    "end": "4348080"
  },
  {
    "text": "it's also enabling this piece of the api server it's an api piece",
    "start": "4348080",
    "end": "4353199"
  },
  {
    "text": "so this enables the api on the back end and you can think of this as enabling the api on the front end whether we",
    "start": "4353199",
    "end": "4358960"
  },
  {
    "text": "surface that api or make it available it's it are kind of two different pieces",
    "start": "4358960",
    "end": "4364000"
  },
  {
    "text": "here with this configuration we can do kind",
    "start": "4364000",
    "end": "4369199"
  },
  {
    "text": "create cluster dash dash config",
    "start": "4369199",
    "end": "4375199"
  },
  {
    "text": "find.yml this will create our cluster",
    "start": "4375840",
    "end": "4382320"
  },
  {
    "text": "and as we saw before we didn't see any internal version when when i did a grep for that instead",
    "start": "4382560",
    "end": "4388800"
  },
  {
    "text": "of api resources but let's see what happens after the this new cluster starts up we'll see if",
    "start": "4388800",
    "end": "4393920"
  },
  {
    "text": "we actually see it there now love to play with this api and see kind",
    "start": "4393920",
    "end": "4399360"
  },
  {
    "text": "of like what it exposes that's actually pretty neat",
    "start": "4399360",
    "end": "4403280"
  },
  {
    "text": "again huge shout out you'll always hear me say this consistently every single time huge",
    "start": "4405199",
    "end": "4411440"
  },
  {
    "text": "shout out to the kind community and the project for making stuff like this not only possible but but relatively",
    "start": "4411440",
    "end": "4418640"
  },
  {
    "text": "simple right like i can't imagine being able to do this kind of work without having some way of locally creating a",
    "start": "4418640",
    "end": "4425199"
  },
  {
    "text": "kubernetes cluster and playing with all the knobs and dials and and learning about these environments in a place that is like safe to break",
    "start": "4425199",
    "end": "4431840"
  },
  {
    "text": "and not in your production clusters and also something that is very quick to start up",
    "start": "4431840",
    "end": "4441840"
  },
  {
    "text": "now i do see that api okay so i'm going to go ahead and do uh come",
    "start": "4445920",
    "end": "4454080"
  },
  {
    "text": "back over here real quick break my cue proxy start it up again",
    "start": "4454080",
    "end": "4460480"
  },
  {
    "text": "we're gonna go explore that api just like we did before we'll do a refresh",
    "start": "4461679",
    "end": "4470960"
  },
  {
    "text": "and internal api server kh dot io",
    "start": "4473840",
    "end": "4483840"
  },
  {
    "text": "okay",
    "start": "4522840",
    "end": "4525840"
  },
  {
    "text": "hmm so i would think that this would be our path",
    "start": "4533760",
    "end": "4540400"
  },
  {
    "text": "so our group is internal",
    "start": "4541360",
    "end": "4548719"
  },
  {
    "text": "there it is found it i was like why don't i see that in here but i see it now all right so there's our group in our",
    "start": "4549440",
    "end": "4555920"
  },
  {
    "text": "version right so our group is apis internal let's go ahead and go to the group first and just take a look at the content on",
    "start": "4555920",
    "end": "4561199"
  },
  {
    "text": "that page slash",
    "start": "4561199",
    "end": "4567840"
  },
  {
    "text": "here is the content that is made available on the group so we see the group version this is kind of meta so i can get the group version",
    "start": "4568400",
    "end": "4574800"
  },
  {
    "text": "of uh group version or storage version",
    "start": "4574800",
    "end": "4580159"
  },
  {
    "text": "and we can see that the only version that is available right now is v one alpha one and the preferred version is also v one alpha one no shocker there",
    "start": "4580159",
    "end": "4586560"
  },
  {
    "text": "it's only the only one available and if we go and look at the api",
    "start": "4586560",
    "end": "4594320"
  },
  {
    "text": "that is exposed there and we're gonna look at the kind of oh i messed up something there",
    "start": "4594320",
    "end": "4599520"
  },
  {
    "text": "sorry about that",
    "start": "4599520",
    "end": "4608159"
  },
  {
    "text": "e1 alpha one copy",
    "start": "4608159",
    "end": "4613920"
  },
  {
    "text": "paste there we go so these are the resources that have",
    "start": "4617120",
    "end": "4622719"
  },
  {
    "text": "been defined one of the resources is the kind storage version",
    "start": "4622719",
    "end": "4628400"
  },
  {
    "text": "it looks like it can be it looks like it's the only object that's been that's been oh there's a",
    "start": "4628400",
    "end": "4635199"
  },
  {
    "text": "status object and the resource object itself both of them are exposed",
    "start": "4635199",
    "end": "4641199"
  },
  {
    "text": "likely these are um uh differentiated by the permissions that are associated or the way that you can update them right",
    "start": "4641199",
    "end": "4647199"
  },
  {
    "text": "and so the object itself can be created deleted delete collection list patch update watch and then there's",
    "start": "4647199",
    "end": "4652960"
  },
  {
    "text": "a different permission if you want to apply get patch or update to storage object to the storage version",
    "start": "4652960",
    "end": "4659040"
  },
  {
    "text": "object status if you think about our back that makes a",
    "start": "4659040",
    "end": "4664320"
  },
  {
    "text": "little bit more sense but",
    "start": "4664320",
    "end": "4667360"
  },
  {
    "text": "so if i go one step further",
    "start": "4670880",
    "end": "4675600"
  },
  {
    "text": "storage version",
    "start": "4676840",
    "end": "4680560"
  },
  {
    "text": "i can actually see the api that is extended right like what objects what they what the actual",
    "start": "4691360",
    "end": "4697040"
  },
  {
    "text": "framework for that api looks like so this is the spec status the storage",
    "start": "4697040",
    "end": "4703360"
  },
  {
    "text": "versions things that i i can learn about it right so it's a this is the encoding version",
    "start": "4703360",
    "end": "4708800"
  },
  {
    "text": "this is the decodable version for the admission registration object",
    "start": "4708800",
    "end": "4715040"
  },
  {
    "text": "so really neat stuff a relatively new api it's still behind a feature gate but it really gives us like",
    "start": "4717600",
    "end": "4724560"
  },
  {
    "text": "some interesting view into how storage version is being managed",
    "start": "4724560",
    "end": "4730960"
  },
  {
    "text": "right so in this case uh let's see",
    "start": "4730960",
    "end": "4735840"
  },
  {
    "text": "apps v1 there are three decodable versions apps v1 fc1 beta 2 and app c1 beta 1",
    "start": "4744800",
    "end": "4751760"
  },
  {
    "text": "in my cluster the encoding version is appsv1 so i want",
    "start": "4751760",
    "end": "4758320"
  },
  {
    "text": "to look into etcd for anything stored at the group appsv1 then i would",
    "start": "4758320",
    "end": "4763360"
  },
  {
    "text": "understand that it would be stored in this particular version and this particular group and that if i were to do a gre get for",
    "start": "4763360",
    "end": "4770640"
  },
  {
    "text": "one of these things i could get at any one of these other decodable versions right so for example",
    "start": "4770640",
    "end": "4776400"
  },
  {
    "text": "let's just play with that real quick and i could show you exactly what that means if i do cube kettle get deployments",
    "start": "4776400",
    "end": "4783520"
  },
  {
    "text": "oh cutepittle create deployment quicken image equals nginx",
    "start": "4783520",
    "end": "4791679"
  },
  {
    "text": "replicas2 port equals 8080.",
    "start": "4791679",
    "end": "4804239"
  },
  {
    "text": "deployment tweaking dash oh yemo this is the object that was created for",
    "start": "4804239",
    "end": "4810080"
  },
  {
    "text": "me right if the deployment is stored in sv1 beta1 but can i get the older versions of that",
    "start": "4810080",
    "end": "4815280"
  },
  {
    "text": "right so if i do understand what versions might be available one of the other commands you",
    "start": "4815280",
    "end": "4820400"
  },
  {
    "text": "can do is api versions",
    "start": "4820400",
    "end": "4832239"
  },
  {
    "text": "these are all the versions that are available so that might not work but let's try it anyway so cube kettle",
    "start": "4832239",
    "end": "4839678"
  },
  {
    "text": "deployment um yeah",
    "start": "4842400",
    "end": "4847760"
  },
  {
    "text": "i want to create uh let's see can get all api resources",
    "start": "4847760",
    "end": "4861840"
  },
  {
    "text": "there we go so ingress exists in both kind of like the example that um evan",
    "start": "4864960",
    "end": "4870400"
  },
  {
    "text": "pointed out before right ingress exists in extensions v1 beta 1",
    "start": "4870400",
    "end": "4875760"
  },
  {
    "text": "and exists in uh networking v1 so if i do this do cubekittle create",
    "start": "4875760",
    "end": "4883520"
  },
  {
    "text": "ingress tests",
    "start": "4883520",
    "end": "4889840"
  },
  {
    "text": "rule i've actually tried creating an ingress this way",
    "start": "4910239",
    "end": "4917840"
  },
  {
    "text": "uh",
    "start": "4928840",
    "end": "4931840"
  },
  {
    "text": "expose deployment test trickin and then i can do cucudo",
    "start": "4935520",
    "end": "4943520"
  },
  {
    "text": "ingress",
    "start": "4943520",
    "end": "4945840"
  },
  {
    "text": "rule",
    "start": "4950800",
    "end": "4953198"
  },
  {
    "text": "dot com default equals",
    "start": "4956159",
    "end": "4963600"
  },
  {
    "text": "in ah sweet all right",
    "start": "4963600",
    "end": "4972000"
  },
  {
    "text": "so cube kettle get ingress quicken oemo",
    "start": "4972000",
    "end": "4979280"
  },
  {
    "text": "you can see that right now it's giving me the result as this new version networking.ks.iov1",
    "start": "4980159",
    "end": "4987199"
  },
  {
    "text": "but this is the fun part so i'm using uh cube kettle bash completion right so if",
    "start": "4987199",
    "end": "4993280"
  },
  {
    "text": "i do cube kettle get i can see the things that i can get um i want to look at ingress the ingress",
    "start": "4993280",
    "end": "4999120"
  },
  {
    "text": "object and if i look here there's a few different versions that are available to me",
    "start": "4999120",
    "end": "5004960"
  },
  {
    "text": "which is really pretty deep so what this means is these are the avail these are the decodable versions available within",
    "start": "5004960",
    "end": "5011360"
  },
  {
    "text": "the ingress object i can actually get the old version",
    "start": "5011360",
    "end": "5016960"
  },
  {
    "text": "it says dot extensions dash o yaml",
    "start": "5017120",
    "end": "5024719"
  },
  {
    "text": "and it will it will on the fly convert this object according to the api that was presented",
    "start": "5024719",
    "end": "5031600"
  },
  {
    "text": "when this api was available right so i can actually get i can",
    "start": "5031600",
    "end": "5038400"
  },
  {
    "text": "convert this object in this way i can do cubekill get ingresses dot extensions which tells it that i want to",
    "start": "5038400",
    "end": "5044880"
  },
  {
    "text": "see extensions v1 beta 1 for that particular group this particular ingress object",
    "start": "5044880",
    "end": "5051920"
  },
  {
    "text": "and i can also look at the other one right so i had ingresses and i also had uh i'd",
    "start": "5051920",
    "end": "5058880"
  },
  {
    "text": "class oh there it is so there's only the two storage versions right now they're ingresses.networking",
    "start": "5064320",
    "end": "5071840"
  },
  {
    "text": "and that's the v1 and",
    "start": "5077520",
    "end": "5082239"
  },
  {
    "text": "ingresses.extensions",
    "start": "5082840",
    "end": "5085840"
  },
  {
    "text": "and that's the older one and then in a relatively recent change i can't remember exactly when this was incred",
    "start": "5088639",
    "end": "5093840"
  },
  {
    "text": "introduced but it was in like 1.20 or maybe 19. if you start interacting with an api",
    "start": "5093840",
    "end": "5099679"
  },
  {
    "text": "that has been deprecated even if it's just a get you're going to get a warning it tells you hey heads up this is the thing you",
    "start": "5099679",
    "end": "5105679"
  },
  {
    "text": "probably want to know about you created this object using extensions v1 beta1 that's a deprecated api so we're doing",
    "start": "5105679",
    "end": "5113280"
  },
  {
    "text": "as much as you can in the community to make it possible that you won't get caught out by this",
    "start": "5113280",
    "end": "5119120"
  },
  {
    "text": "all right i think we've covered quite a lot and i want to go back to our notes here and see where we are",
    "start": "5119760",
    "end": "5127840"
  },
  {
    "text": "well that's a pretty new api the cube storage version migrator can",
    "start": "5128880",
    "end": "5134560"
  },
  {
    "text": "handle um migrating changes so we can just take a look at how this works so like i said if you're going to do like an upgrade",
    "start": "5134560",
    "end": "5140000"
  },
  {
    "text": "from version 116 and you're aiming for 120 how do you get there uh one way to do it",
    "start": "5140000",
    "end": "5145760"
  },
  {
    "text": "is by leveraging tools like this right where",
    "start": "5145760",
    "end": "5150320"
  },
  {
    "text": "we see the old version is still stored at the old version but we want to change that",
    "start": "5151679",
    "end": "5157520"
  },
  {
    "text": "so we have this tool",
    "start": "5158800",
    "end": "5162638"
  },
  {
    "text": "that gives us the ability to modify the stored version",
    "start": "5165120",
    "end": "5169840"
  },
  {
    "text": "and it goes through basically and touches everything that needs to be migrated actually this touches everything it doesn't care whether it needs to be",
    "start": "5194880",
    "end": "5200320"
  },
  {
    "text": "migrated",
    "start": "5200320",
    "end": "5202800"
  },
  {
    "text": "we can see what the migrator did it touched a bunch of different stuff",
    "start": "5207199",
    "end": "5212639"
  },
  {
    "text": "if you think about it this is like database migration almost effectively what it's doing",
    "start": "5220159",
    "end": "5226480"
  },
  {
    "text": "once that's all done we should see the ingress object be changed",
    "start": "5228080",
    "end": "5233360"
  },
  {
    "text": "and there it is",
    "start": "5235520",
    "end": "5239840"
  },
  {
    "text": "all right crds define new apis new resources like we talked about all apis are",
    "start": "5242080",
    "end": "5247679"
  },
  {
    "text": "cluster scoped even scope namespace crds meaning that the api itself is expressed as a cluster",
    "start": "5247679",
    "end": "5253600"
  },
  {
    "text": "operation now this is an interesting point i'm not going to harp on it too long but when we think about multi-tenancy",
    "start": "5253600",
    "end": "5259360"
  },
  {
    "text": "this becomes a very important point because when you define a new api you make that available you make that api you define that api at",
    "start": "5259360",
    "end": "5266560"
  },
  {
    "text": "the cluster level not at the namespace level and so it means that you have to think about the permissions piece of it a little bit",
    "start": "5266560",
    "end": "5274239"
  },
  {
    "text": "a crd has a stored version just like any other api",
    "start": "5274239",
    "end": "5281840"
  },
  {
    "text": "this field indicates every version that has been a stored version all of them you can't remove version",
    "start": "5289280",
    "end": "5295760"
  },
  {
    "text": "from a crd until it's been removed from status oh that's neat so this is more details",
    "start": "5295760",
    "end": "5301440"
  },
  {
    "text": "about how crds themselves are managed anyway so that's what i wanted to cover",
    "start": "5301440",
    "end": "5308480"
  },
  {
    "text": "today um i do recommend reading this blog post there's some really great stuff uh and it really gets into the detail",
    "start": "5308480",
    "end": "5315040"
  },
  {
    "text": "and i think it really highlights you know some ways of understanding and playing with how these things could work and how you",
    "start": "5315040",
    "end": "5322320"
  },
  {
    "text": "can kind of explore this stuff leveraging kind and explore this stuff in a non-prod",
    "start": "5322320",
    "end": "5327600"
  },
  {
    "text": "environment where you can learn all about the way that storage versions and all these pieces are actually managed over time",
    "start": "5327600",
    "end": "5332880"
  },
  {
    "text": "and you can take away you can you can work in a really safe environment without having to worry about uh learning this stuff on the fly in",
    "start": "5332880",
    "end": "5339920"
  },
  {
    "text": "production environments which i also really highly recommend i hope you enjoyed this episode i",
    "start": "5339920",
    "end": "5346080"
  },
  {
    "text": "enjoyed doing it i'll be back in two weeks uh and i will see you then and if you have any questions or if you ever want",
    "start": "5346080",
    "end": "5352639"
  },
  {
    "text": "to chat about anything or anything else like that you can reach out to me on twitter or on kubernetes slack",
    "start": "5352639",
    "end": "5358159"
  },
  {
    "text": "i am at maui lion everywhere thank you so much for tuning in and i'll see you next time",
    "start": "5358159",
    "end": "5365840"
  },
  {
    "text": "all right bye [Music] thank you",
    "start": "5378639",
    "end": "5385280"
  },
  {
    "text": "and then graphics",
    "start": "5390480",
    "end": "5405600"
  }
]