[
  {
    "text": "welcome everyone for our session we're going to talk about remote control",
    "start": "520",
    "end": "7080"
  },
  {
    "text": "planes and and how to build those or construct them with with a component",
    "start": "7080",
    "end": "12759"
  },
  {
    "text": "called connectivity and of course we'll start with uh what it is",
    "start": "12759",
    "end": "18960"
  },
  {
    "text": "and why would you do something like this and and and then we'll focus a bit also on the the sort of building blocks that",
    "start": "18960",
    "end": "25800"
  },
  {
    "text": "that how to do how to do things so I'm yusi from manantis working mostly with",
    "start": "25800",
    "end": "34360"
  },
  {
    "text": "the our kzer Cube drro hi my name is m kazm and I am uh",
    "start": "34360",
    "end": "40800"
  },
  {
    "text": "working by cuber medic and uh mainly working on cluster provisioning cluster",
    "start": "40800",
    "end": "46079"
  },
  {
    "text": "networking and life cycle glad to be",
    "start": "46079",
    "end": "50160"
  },
  {
    "text": "here all right so as said the the kind of outline for our session is is",
    "start": "53079",
    "end": "59440"
  },
  {
    "text": "focusing first on what we actually mean when we talk about a concept called remote remote control",
    "start": "59440",
    "end": "65960"
  },
  {
    "text": "plan uh we'll have a look at couple of uh different use cases where would you",
    "start": "65960",
    "end": "73119"
  },
  {
    "text": "actually want to do something like this and then what are the building plugs and",
    "start": "73119",
    "end": "79119"
  },
  {
    "text": "and Concepts in in in kubernetes and and in other components that you can",
    "start": "79119",
    "end": "84240"
  },
  {
    "text": "actually actually kind of pull this off in a way and of course we'll we'll have a bit of bit of kind of a history lesson",
    "start": "84240",
    "end": "92000"
  },
  {
    "text": "too that that what what has been there and what what what is there now in kubernetes and a couple of real world",
    "start": "92000",
    "end": "99600"
  },
  {
    "text": "integration examples on on on",
    "start": "99600",
    "end": "104880"
  },
  {
    "text": "this uh of course as always we're standing on shoulders of giants here so",
    "start": "105200",
    "end": "111920"
  },
  {
    "text": "uh we're as as two we're not really the sort of inventors of of of this stuff uh",
    "start": "111920",
    "end": "120119"
  },
  {
    "text": "like more like happy users of of what what the community is is",
    "start": "120119",
    "end": "126479"
  },
  {
    "text": "building uh why we wanted to have this sort of a talk is is uh the main thing is that that there's very very little",
    "start": "126479",
    "end": "133360"
  },
  {
    "text": "documentation and knowledge on this topic so we want to raise the awareness that that okay you can actually do",
    "start": "133360",
    "end": "139879"
  },
  {
    "text": "something like this whether it makes sense for you your use case or not that's that's a different",
    "start": "139879",
    "end": "146160"
  },
  {
    "text": "discussion so basically kudos to the all the original inventors and and people",
    "start": "146160",
    "end": "153200"
  },
  {
    "text": "that have been working on the different caps in the in the past and to to make this actually",
    "start": "153200",
    "end": "160400"
  },
  {
    "text": "happen all right okay so um as what you say already",
    "start": "160640",
    "end": "167440"
  },
  {
    "text": "spoke about we're we're not going to dive into the whole um technical",
    "start": "167440",
    "end": "173879"
  },
  {
    "text": "backgrounds of how we achieve things so usually a catus cluster just looks like",
    "start": "173879",
    "end": "179200"
  },
  {
    "text": "this you have have a master control playe component it's a node and you have other worker nodes as well where you",
    "start": "179200",
    "end": "186440"
  },
  {
    "text": "have you know your API server or the whole control plane components deployed uh on the same node and then your worker",
    "start": "186440",
    "end": "192680"
  },
  {
    "text": "noes just keep talking with that guy now this was working still working it has",
    "start": "192680",
    "end": "199120"
  },
  {
    "text": "you know as what we say we have a bidirectional connection between the worker nodes and the control plane notes",
    "start": "199120",
    "end": "204959"
  },
  {
    "text": "it's unrestricted so they can speak smoothly one another whether that's you know required or not it's fast since",
    "start": "204959",
    "end": "212720"
  },
  {
    "text": "again there is no a lot of restriction in there reliable of course and",
    "start": "212720",
    "end": "219480"
  },
  {
    "text": "secure and um often no local or you know you have they are on the same L tet",
    "start": "219480",
    "end": "225799"
  },
  {
    "text": "working probably and yeah nice things are working everything is",
    "start": "225799",
    "end": "232000"
  },
  {
    "text": "okay dat direct ah sorry",
    "start": "235920",
    "end": "241360"
  },
  {
    "text": "yeah and uh what's really this whole fuzz is all about about remote uh kubernetes control plane where you have",
    "start": "241799",
    "end": "248840"
  },
  {
    "text": "the um the contol play components being running on a completely different um",
    "start": "248840",
    "end": "254480"
  },
  {
    "text": "probably data center or different node out of that subnet and use and and those",
    "start": "254480",
    "end": "260479"
  },
  {
    "text": "are quite hard to tweak and play with it's really not that easy to have your",
    "start": "260479",
    "end": "265759"
  },
  {
    "text": "ping pong connection going through your worker nodes and the master note or the control plane component components um it",
    "start": "265759",
    "end": "271560"
  },
  {
    "text": "you need a lot of moderation a lot of configuration a lot of tweaking and with that we have quite few challenges such",
    "start": "271560",
    "end": "278400"
  },
  {
    "text": "as probably One Direction since you have you know you will have some n going",
    "start": "278400",
    "end": "283600"
  },
  {
    "text": "between your control plane components and the worker nodes it could be very",
    "start": "283600",
    "end": "288919"
  },
  {
    "text": "restricted because again you might be hooking into a different network so there should be or I assume there should",
    "start": "288919",
    "end": "294320"
  },
  {
    "text": "be some firewall rules and uh whatever Lo balancers that you speaking with so it's not that easy to have kind of uh a",
    "start": "294320",
    "end": "301560"
  },
  {
    "text": "smooth Connection in there slow of course latency as we said could be in a",
    "start": "301560",
    "end": "306600"
  },
  {
    "text": "different data center different subnet could be here in the US and your work notes are in Europe not sure if that's a",
    "start": "306600",
    "end": "312039"
  },
  {
    "text": "wise idea but who knows yeah hash it so um less reliable of course again Network",
    "start": "312039",
    "end": "319080"
  },
  {
    "text": "partitioning could happen between your worker and uh your master node probably",
    "start": "319080",
    "end": "324600"
  },
  {
    "text": "insecure because there are a lot of Plumbing between your worker nodes and your master node or your control playing modes component",
    "start": "324600",
    "end": "330880"
  },
  {
    "text": "and of course that everybody don't like I hope that don't like that there is a",
    "start": "330880",
    "end": "336800"
  },
  {
    "text": "possibility that you're doing thing over the internet and if not probably going to do a lot of you know tunneling into",
    "start": "336800",
    "end": "344120"
  },
  {
    "text": "that guy exactly so what kind of use cases",
    "start": "344120",
    "end": "350680"
  },
  {
    "text": "that we are looking here at where you would like to go for a remote cluster instead of just being a very happy user",
    "start": "350680",
    "end": "356479"
  },
  {
    "text": "with these local cluster I spoke about in the beginning so to begin with you have of course this",
    "start": "356479",
    "end": "362759"
  },
  {
    "text": "um the the trust or so to say the um the uh",
    "start": "362759",
    "end": "367919"
  },
  {
    "text": "segmentation where you have like the control plan components being on a different data zone or different data",
    "start": "367919",
    "end": "373800"
  },
  {
    "text": "center where your worker notes are next we have also like of course you need to",
    "start": "373800",
    "end": "379319"
  },
  {
    "text": "do a lot of configuration and plumbing and uh this could be actually also something that uh you know where you",
    "start": "379319",
    "end": "385759"
  },
  {
    "text": "isolate your control plan components away from your worker nodes so whatever happens there you're still safe in a way",
    "start": "385759",
    "end": "392440"
  },
  {
    "text": "it is also human error I mean less human error because usually when you have those control plane components being",
    "start": "392440",
    "end": "398400"
  },
  {
    "text": "somewhere else than your were your real work is being carried out on your work on notes probably human wouldn't be or",
    "start": "398400",
    "end": "405080"
  },
  {
    "text": "users in other words normal users wouldn't be able or shouldn't be able to get access on your main components or",
    "start": "405080",
    "end": "412199"
  },
  {
    "text": "control plane components that easily in addition to that you have also as I mentioned earlier The kubernetes",
    "start": "412199",
    "end": "418639"
  },
  {
    "text": "Edge use case where your workloads or apps that you are running is on a very very remote",
    "start": "418639",
    "end": "425919"
  },
  {
    "text": "cluster meaning that it could be in someone else's house or in someone else's I don't know garage car you name",
    "start": "425919",
    "end": "433039"
  },
  {
    "text": "it and of course the last but not least is hybrid Cloud the thing that you know",
    "start": "433039",
    "end": "439520"
  },
  {
    "text": "hopefully everybody is now aware of you know where you might have some connections to the cloud providers but",
    "start": "439520",
    "end": "445560"
  },
  {
    "text": "still you have some kind of somewhere dark where you still run your physical",
    "start": "445560",
    "end": "450599"
  },
  {
    "text": "data centers and uh you like to achieve this kind of hybrid model where you have you know things are on multicloud and",
    "start": "450599",
    "end": "456960"
  },
  {
    "text": "other things on your data centers that gives you a lot of flexibility and this is exactly what we",
    "start": "456960",
    "end": "463319"
  },
  {
    "text": "are looking at in this uh image here what we see here as you can see on the",
    "start": "463319",
    "end": "468440"
  },
  {
    "text": "left side you have your control plane components being deployed somewhere and your workloads are completely isolated",
    "start": "468440",
    "end": "476800"
  },
  {
    "text": "could be running really far away from where those control planes are and U",
    "start": "476800",
    "end": "483039"
  },
  {
    "text": "they could be even like collocated mean meaning that you could have one node or one cluster where your control plane",
    "start": "483039",
    "end": "490080"
  },
  {
    "text": "components for different clusters are being in the same place of course you should have then you should take care of",
    "start": "490080",
    "end": "496639"
  },
  {
    "text": "name space isolation things like that and for you you could if you are",
    "start": "496639",
    "end": "502400"
  },
  {
    "text": "building a multi-tenancy application here and you would like to get get a grip on your uh Contra plane components",
    "start": "502400",
    "end": "508159"
  },
  {
    "text": "of course and clusters you could come up with a very nice architecture where you can uh operate and run hundreds or even",
    "start": "508159",
    "end": "515399"
  },
  {
    "text": "thousands based on how your initial architecture scales of course with that you have ha because eventually what you",
    "start": "515399",
    "end": "522518"
  },
  {
    "text": "have on that Isola thing it's your game it's your playground as a service provider so you can really um scale up",
    "start": "522519",
    "end": "529920"
  },
  {
    "text": "scale Down based on the demands that you have and of course you have the very",
    "start": "529920",
    "end": "535120"
  },
  {
    "text": "same control plane experience across multiple clusters meaning that there's not too much um context is being given",
    "start": "535120",
    "end": "542000"
  },
  {
    "text": "to one cluster to another you treat every single control plane as you know as the same and you leave whatever",
    "start": "542000",
    "end": "548720"
  },
  {
    "text": "that's have to run on these clusters for the users and of course if you have you",
    "start": "548720",
    "end": "553760"
  },
  {
    "text": "need some orchestrations for these uh for these contol plane components and if they are existing in the same place and",
    "start": "553760",
    "end": "559200"
  },
  {
    "text": "you have your controllers for example in one place you could easily operate in that without any I hope slowness or",
    "start": "559200",
    "end": "565480"
  },
  {
    "text": "latency because you're probably speaking to the same um uh hat to the same uh end",
    "start": "565480",
    "end": "570720"
  },
  {
    "text": "point of course could be like more a lot of specifications into that and",
    "start": "570720",
    "end": "575760"
  },
  {
    "text": "eventually yeah it's a kubernetes as a service it's just you know you don't need to let your users think a lot about",
    "start": "575760",
    "end": "582920"
  },
  {
    "text": "the control planes think a lot about the kubernetes is not that easy I mean",
    "start": "582920",
    "end": "588800"
  },
  {
    "text": "probably you know that already networking is not that easy so um you need to try",
    "start": "588800",
    "end": "596320"
  },
  {
    "text": "to you know surround these bottlenecks and these obstacles as as much as you can otherwise yeah have",
    "start": "596320",
    "end": "604360"
  },
  {
    "text": "fun all right back to yussi right thanks",
    "start": "604360",
    "end": "610959"
  },
  {
    "text": "so why is why is all this like like a challenge I can run my API server",
    "start": "610959",
    "end": "618920"
  },
  {
    "text": "schedulers all the control plane components I can run it on one box and then I can have a worker that connects",
    "start": "618920",
    "end": "625200"
  },
  {
    "text": "to the API right what's the what's the challenge there",
    "start": "625200",
    "end": "630399"
  },
  {
    "text": "so the API server actually has to talk to the in cluster components in in many",
    "start": "630399",
    "end": "636519"
  },
  {
    "text": "different use cases so when you want to do something like Cube CDL logs",
    "start": "636519",
    "end": "643680"
  },
  {
    "text": "XYZ the API actually calls to the cuet which then talks to The Container runtime so API needs to be able to talk",
    "start": "643680",
    "end": "651600"
  },
  {
    "text": "to the cubet but remember previous pictures we had some net layers or firewalls in",
    "start": "651600",
    "end": "657720"
  },
  {
    "text": "between so API I just cannot do that in those those circumstan",
    "start": "657720",
    "end": "663680"
  },
  {
    "text": "days uh there's few different use cases where",
    "start": "663680",
    "end": "669040"
  },
  {
    "text": "API server expects to be able to actually communicate with the cluster",
    "start": "669040",
    "end": "674320"
  },
  {
    "text": "Network too like service IPS pod IPS so when you do c CDL proxy the API",
    "start": "674320",
    "end": "683240"
  },
  {
    "text": "actually takes a proxy connection to the poort or service IP",
    "start": "683240",
    "end": "690920"
  },
  {
    "text": "admission controllers which API expects to be able",
    "start": "691000",
    "end": "697079"
  },
  {
    "text": "to call with web hooks which are on the cluster Network so it's really this this kind of",
    "start": "697079",
    "end": "705120"
  },
  {
    "text": "a from the API to the cluster communication that is the main challenge",
    "start": "705120",
    "end": "712800"
  },
  {
    "text": "with these remote control planes it it's it's not the part where you run the control plane itself that's super easy",
    "start": "712800",
    "end": "720480"
  },
  {
    "text": "or well it's still kubernetes so it's easyish",
    "start": "720480",
    "end": "726519"
  },
  {
    "text": "relative so looking back in time which is always",
    "start": "727880",
    "end": "733760"
  },
  {
    "text": "fun uh there actually was something for this specific use case built in in the",
    "start": "733760",
    "end": "739680"
  },
  {
    "text": "AP server in in in the past uh so the API server actually",
    "start": "739680",
    "end": "748000"
  },
  {
    "text": "supported as thing called SSH tunnels in the past but that was deprecated on on",
    "start": "748000",
    "end": "754320"
  },
  {
    "text": "version 109 for various reasons uh and after that the there",
    "start": "754320",
    "end": "761360"
  },
  {
    "text": "there's been People Like Us for example building the same or or similar",
    "start": "761360",
    "end": "768040"
  },
  {
    "text": "capabilities using various different custom Solutions like openvpn tunnels or",
    "start": "768040",
    "end": "774480"
  },
  {
    "text": "some other other networking gimmicks let's put it that",
    "start": "774480",
    "end": "780160"
  },
  {
    "text": "way uh but then luckily there's there was as as I mentioned we're standing on",
    "start": "780160",
    "end": "786440"
  },
  {
    "text": "on shoulders of giants here so uh there was this cap 1281 was born in Spring",
    "start": "786440",
    "end": "795079"
  },
  {
    "text": "2019 and that's really the the the kind of foundation on the on the actual solution",
    "start": "795079",
    "end": "801920"
  },
  {
    "text": "and the kind of architecture building blocks that we can utilize nowadays to",
    "start": "801920",
    "end": "808240"
  },
  {
    "text": "to to kind of punch through the firewalls and and network segments and and all that",
    "start": "808240",
    "end": "815040"
  },
  {
    "text": "stuff so basically the the cap 1281 lays out the the Architectural",
    "start": "815040",
    "end": "821920"
  },
  {
    "text": "Components and Concepts how we can actually route this API server to",
    "start": "821920",
    "end": "828079"
  },
  {
    "text": "Cluster calls and and different use cases via something that actually makes",
    "start": "828079",
    "end": "834639"
  },
  {
    "text": "it makes it work in these use cases",
    "start": "834639",
    "end": "839399"
  },
  {
    "text": "so one of the concepts in in that cap is is uh defining a concept of egress",
    "start": "842000",
    "end": "848120"
  },
  {
    "text": "selector on the API server so it's essentially config flag plus of course",
    "start": "848120",
    "end": "856240"
  },
  {
    "text": "yo so basically this this agress selector on the API server side acts as",
    "start": "856240",
    "end": "862519"
  },
  {
    "text": "as as sort of a routing mechanism that that uh when the API server in this",
    "start": "862519",
    "end": "869160"
  },
  {
    "text": "different use cases wants to talk to to the cluster or to some other external",
    "start": "869160",
    "end": "874360"
  },
  {
    "text": "components how do we route that call that it actually can reach the cluster",
    "start": "874360",
    "end": "879959"
  },
  {
    "text": "whether it's a podt or whether it's cubet or whatever it",
    "start": "879959",
    "end": "885240"
  },
  {
    "text": "is the as as you see in the in the yaml",
    "start": "886480",
    "end": "891720"
  },
  {
    "text": "config example you usually have something the the routing the proxying",
    "start": "891720",
    "end": "897720"
  },
  {
    "text": "component running kind of has a site car is set up for the",
    "start": "897720",
    "end": "903360"
  },
  {
    "text": "API server so the API server actually talks to a local unique socket and then",
    "start": "903360",
    "end": "908880"
  },
  {
    "text": "there's something behind that unique socket that then routes the the call towards the",
    "start": "908880",
    "end": "916360"
  },
  {
    "text": "cluster there's various different types that you can configure for the X a",
    "start": "917639",
    "end": "923759"
  },
  {
    "text": "selection so when you're having a type called cluster we mean when AP API",
    "start": "923759",
    "end": "930360"
  },
  {
    "text": "server wants to talk to pods wants to get lcks from CU blets When you do proxy",
    "start": "930360",
    "end": "937959"
  },
  {
    "text": "stuff and and and those sort of use cases uh at CD well that's kind of",
    "start": "937959",
    "end": "945279"
  },
  {
    "text": "obvious when API wants to talk tocd you can actually route that even through",
    "start": "945279",
    "end": "950600"
  },
  {
    "text": "this x selection mechanism and then for the control plane",
    "start": "950600",
    "end": "957440"
  },
  {
    "text": "you can configure how the API talks to admission hook web",
    "start": "957440",
    "end": "964399"
  },
  {
    "text": "Hooks and and admission controllers and and all that stuff",
    "start": "964399",
    "end": "970480"
  },
  {
    "text": "so essentially like our title says it's connectivity so connectivity component",
    "start": "970480",
    "end": "978120"
  },
  {
    "text": "is is kind of born through that cap so the cap is is like like many other caps",
    "start": "978120",
    "end": "984800"
  },
  {
    "text": "in in in in kubernetes it's it's kind of laying the architectural Foundation defining the interfaces how things work",
    "start": "984800",
    "end": "993240"
  },
  {
    "text": "and and and it's it's really the same here too so the AG selection and and how",
    "start": "993240",
    "end": "999240"
  },
  {
    "text": "the API talks to the the uni socket",
    "start": "999240",
    "end": "1004560"
  },
  {
    "text": "that's like the interface you can have basically anything behind it but connectivity is one of the Sig projects",
    "start": "1004560",
    "end": "1013279"
  },
  {
    "text": "which is kind of the sort of like the reference implementation for this whole thing as far as I know it's actually the",
    "start": "1013279",
    "end": "1020319"
  },
  {
    "text": "only implementation but but but still and I wouldn't want to write one",
    "start": "1020319",
    "end": "1027319"
  },
  {
    "text": "on my own because it's it's actually quite complex if you if you look at the look at the whole",
    "start": "1027319",
    "end": "1034399"
  },
  {
    "text": "thing all right so how does it actually work and",
    "start": "1036039",
    "end": "1042160"
  },
  {
    "text": "how do we punch through the firewalls and that layers so in this case when we",
    "start": "1042160",
    "end": "1047959"
  },
  {
    "text": "use connectivity so it's divided to two different components a connectivity server and connectivity agent so the",
    "start": "1047959",
    "end": "1056400"
  },
  {
    "text": "connectivity server is is acting kind of like the routing logic kind of as a",
    "start": "1056400",
    "end": "1061440"
  },
  {
    "text": "sidekick to the API server so the agent is running within",
    "start": "1061440",
    "end": "1067400"
  },
  {
    "text": "the cluster on the worker nodes whether it's a demon set whether you run it as a deployment there's",
    "start": "1067400",
    "end": "1073720"
  },
  {
    "text": "options and and the agent actually opens up a connection",
    "start": "1073720",
    "end": "1079400"
  },
  {
    "text": "to the connectivity server so now we have a grpc tunnel that",
    "start": "1079400",
    "end": "1086360"
  },
  {
    "text": "we can use now when the API wants to talk to say cuet to get",
    "start": "1086360",
    "end": "1096200"
  },
  {
    "text": "locks of a pod API server talks to the local uni socket and behind that socket",
    "start": "1096200",
    "end": "1103520"
  },
  {
    "text": "we have the connectivity server and now the connectivity server knows that okay I have this a agent connected to me and",
    "start": "1103520",
    "end": "1110440"
  },
  {
    "text": "they have an open grpc Tunnel so we actually use that",
    "start": "1110440",
    "end": "1116120"
  },
  {
    "text": "tunnel to call to the agent basically saying that that hey we want to get logs",
    "start": "1116120",
    "end": "1121480"
  },
  {
    "text": "from this specific cuet or well it doesn't actually say",
    "start": "1121480",
    "end": "1127960"
  },
  {
    "text": "anything about logs but it basically says that we want to connect to this specific cuet on this IP",
    "start": "1127960",
    "end": "1136000"
  },
  {
    "text": "address so in a nutshell it's pretty much like SSH",
    "start": "1136120",
    "end": "1143400"
  },
  {
    "text": "reverse tunnels I bet many of you have used those in the past to do fancy",
    "start": "1143400",
    "end": "1151240"
  },
  {
    "text": "tricks and all of this is is is going on top of grpc so it's",
    "start": "1151240",
    "end": "1158400"
  },
  {
    "text": "secure because it's on top of TLS of",
    "start": "1158400",
    "end": "1163200"
  },
  {
    "text": "course and it's actually my in in my First",
    "start": "1164240",
    "end": "1169559"
  },
  {
    "text": "Impressions it it was actually even quite fast I mean I I I was thinking that okay",
    "start": "1169559",
    "end": "1176080"
  },
  {
    "text": "when we built this it's reverse tunnels on top of TLS on top of grpc oh God it",
    "start": "1176080",
    "end": "1182440"
  },
  {
    "text": "must be slow as hell but actually it's it's pretty pretty pretty",
    "start": "1182440",
    "end": "1188520"
  },
  {
    "text": "slick all right some real world examples all right",
    "start": "1192960",
    "end": "1199200"
  },
  {
    "text": "so as you could have as you have already seen what uh us showed the uh the stack",
    "start": "1199200",
    "end": "1205440"
  },
  {
    "text": "is quite interesting for the whole networking with that at cuber Matic we",
    "start": "1205440",
    "end": "1212520"
  },
  {
    "text": "leverage how connectivity do things and what you see over here is a true",
    "start": "1212520",
    "end": "1218919"
  },
  {
    "text": "multi-tenant architecture that we run every day where you have those on the on",
    "start": "1218919",
    "end": "1225360"
  },
  {
    "text": "the right side these blue boxes that has user cluster those are simply a",
    "start": "1225360",
    "end": "1231440"
  },
  {
    "text": "kubernetes clusters that only run node applications so workloads not on any of",
    "start": "1231440",
    "end": "1238440"
  },
  {
    "text": "these um clusters there will be no node that's being marked as a master node no",
    "start": "1238440",
    "end": "1244240"
  },
  {
    "text": "all of them if you end up with a three node cluster and you do the usual Cube ctlg node you will only see three node",
    "start": "1244240",
    "end": "1250840"
  },
  {
    "text": "clusters and none of them is actually marked as Master because none of them are Master what we do instead is on the",
    "start": "1250840",
    "end": "1259280"
  },
  {
    "text": "left side we have these seed clusters we call them and there in that specific",
    "start": "1259280",
    "end": "1265840"
  },
  {
    "text": "kubernetes cluster we Compact and collocate collocate the controll pain",
    "start": "1265840",
    "end": "1273279"
  },
  {
    "text": "components name spaced with all what you need it is completely isolated from what",
    "start": "1273279",
    "end": "1279279"
  },
  {
    "text": "the user the regular user is seeing there is no way that they could you know communicate and see what's going on in",
    "start": "1279279",
    "end": "1285559"
  },
  {
    "text": "that control plane Nam space because it's already on a different clusters and of course there are a lot of you know um",
    "start": "1285559",
    "end": "1292520"
  },
  {
    "text": "uh rback rules for example you have a lot of uh Network um isolation so it's",
    "start": "1292520",
    "end": "1298320"
  },
  {
    "text": "not really easy if you get up if if you if you end up with a kubernetes or cube config for the kubernetes cluster on the",
    "start": "1298320",
    "end": "1303840"
  },
  {
    "text": "right side for you you won't be able even to see how these control how how",
    "start": "1303840",
    "end": "1309960"
  },
  {
    "text": "these pots for the for the control plane components pots for example looks like they're not there you only see what it",
    "start": "1309960",
    "end": "1315520"
  },
  {
    "text": "matters to you it only you only see your applications your workload and this is exactly what we are",
    "start": "1315520",
    "end": "1321480"
  },
  {
    "text": "doing and how we are leveraging connectivity on the left side on the seed cluster we actually inject the um I",
    "start": "1321480",
    "end": "1328679"
  },
  {
    "text": "mean the API um dur like alongside the API server the connectivity agent and",
    "start": "1328679",
    "end": "1335039"
  },
  {
    "text": "there is a connectivity agent running on the left on the right side on the user",
    "start": "1335039",
    "end": "1340159"
  },
  {
    "text": "cluster side what happens then when you create a cluster the we have some certain controllers that take care of",
    "start": "1340159",
    "end": "1346679"
  },
  {
    "text": "the control plane are in place now or all the components are now ready and then we spawn the machines machines gets",
    "start": "1346679",
    "end": "1353520"
  },
  {
    "text": "worker machines only gets what they need and then user connectivity the agent for",
    "start": "1353520",
    "end": "1359000"
  },
  {
    "text": "example receives um a request it finds the right one as what you already mentioned and then the the connection",
    "start": "1359000",
    "end": "1366760"
  },
  {
    "text": "between cuet on the right side and the API server on the left side will be",
    "start": "1366760",
    "end": "1371840"
  },
  {
    "text": "there and what is quite interesting about this you don't have to run the the connectivity agent on each node these",
    "start": "1371840",
    "end": "1379200"
  },
  {
    "text": "these nodes they would know each other they're observant about each other and they can they can forward the uh the",
    "start": "1379200",
    "end": "1385159"
  },
  {
    "text": "traffic or rout it I mean from one Noe to another very actively and a lot of",
    "start": "1385159",
    "end": "1392720"
  },
  {
    "text": "observability is being induced so this is exactly how our so to say multitenant",
    "start": "1392720",
    "end": "1399159"
  },
  {
    "text": "collocation for the control plane components work again right side user clusters or clusters in general those",
    "start": "1399159",
    "end": "1405440"
  },
  {
    "text": "are accumulated clusters there are no contr relation there is like they're not there when you try to list",
    "start": "1405440",
    "end": "1413278"
  },
  {
    "text": "them and this is a very very real world scenario as as what us already mentioned",
    "start": "1414960",
    "end": "1420120"
  },
  {
    "text": "like we in the past we only had to fiddle a lot with a lot of different applications for example openvpn server",
    "start": "1420120",
    "end": "1426279"
  },
  {
    "text": "where you needed to yeah manage this manage that and uh run an openvpn client",
    "start": "1426279",
    "end": "1432039"
  },
  {
    "text": "on the right side it was like a whole mess for us for us we really wanted just",
    "start": "1432039",
    "end": "1437200"
  },
  {
    "text": "to have a reliable connection between the API server or between the control plane components and the worker noes and",
    "start": "1437200",
    "end": "1442640"
  },
  {
    "text": "call it a day it should be of course reliable secure fast and this is what we experienced so far with connectivity and",
    "start": "1442640",
    "end": "1448840"
  },
  {
    "text": "that's why we like it on the left side as you can see also it's not you will see a lot of containers like 35",
    "start": "1448840",
    "end": "1455640"
  },
  {
    "text": "containers that were only there for connectivity that's all you need these containers to have connections between your worker notes and the control plane",
    "start": "1455640",
    "end": "1462880"
  },
  {
    "text": "components which was too much for us and on the like left side down you you look",
    "start": "1462880",
    "end": "1468039"
  },
  {
    "text": "like you see the um the openvpn client that eventually will connect and if you",
    "start": "1468039",
    "end": "1474279"
  },
  {
    "text": "I mean openvpn server that's yeah openvpn is nice but if you do it on that scale very automated sometimes it could",
    "start": "1474279",
    "end": "1480320"
  },
  {
    "text": "be really hard to be to debug and know what's going on of course never to mention the a lot of IB tables rules",
    "start": "1480320",
    "end": "1487200"
  },
  {
    "text": "that we have to introduced to make that on the right side you see the happy path where we use connectivity we have one",
    "start": "1487200",
    "end": "1495120"
  },
  {
    "text": "connectivity um injected into our control plane compon component part up uh on on top and on the lower part you",
    "start": "1495120",
    "end": "1503200"
  },
  {
    "text": "already see that yeah we have only like two agents two pods those are no demon sets they don't have to run on each node",
    "start": "1503200",
    "end": "1510200"
  },
  {
    "text": "so you don't have to worry about having like hundred of nodes and taking care of Agents being running on each one of those this is not the case here and all",
    "start": "1510200",
    "end": "1518520"
  },
  {
    "text": "that done beautifully like the connectivity that you have between your API server or control plane components",
    "start": "1518520",
    "end": "1524440"
  },
  {
    "text": "in general and your worker node is being smooth and secure as",
    "start": "1524440",
    "end": "1530600"
  },
  {
    "text": "possible to and and there's a lot of similarities of course what I've been",
    "start": "1531080",
    "end": "1537799"
  },
  {
    "text": "working on is is the K drro and and in our case we really build connectivity",
    "start": "1537799",
    "end": "1543880"
  },
  {
    "text": "into the picture from day one and and for us the one of the main",
    "start": "1543880",
    "end": "1550720"
  },
  {
    "text": "driving use cases actually was not this like like Network segregation or anything but the fact that",
    "start": "1550720",
    "end": "1558799"
  },
  {
    "text": "who are who can deploy stuff on Master notes so if you if you take your",
    "start": "1558799",
    "end": "1564240"
  },
  {
    "text": "traditional Cube ADM setup cluster where you have actual Master nodes and worker",
    "start": "1564240",
    "end": "1569720"
  },
  {
    "text": "nodes how do you control if Joe can deploy stuff on Master",
    "start": "1569720",
    "end": "1574760"
  },
  {
    "text": "nodes there's no rback for that yeah of course you can throw in some Opa",
    "start": "1574760",
    "end": "1581600"
  },
  {
    "text": "Gatekeepers whatnot but but should you have to do that in my opinion no",
    "start": "1581600",
    "end": "1590039"
  },
  {
    "text": "so that's why we landed landed on on having connectivity in the picture and and and sort of as as an added bonus we",
    "start": "1590039",
    "end": "1598919"
  },
  {
    "text": "got the ability to have this real Network segregation and that really really enabl some super super",
    "start": "1598919",
    "end": "1606039"
  },
  {
    "text": "interesting deployment scenarios where you run your control plane in an",
    "start": "1606039",
    "end": "1611320"
  },
  {
    "text": "location X and then the workers are somewhere deep down in your bunker and",
    "start": "1611320",
    "end": "1617080"
  },
  {
    "text": "it's enough that that they just can call out to the control plane and everything works as as in your traditional cadm",
    "start": "1617080",
    "end": "1625320"
  },
  {
    "text": "cluster that's super cool we actually managed the the the",
    "start": "1625320",
    "end": "1631520"
  },
  {
    "text": "agents as a demon set to have also High availability for the",
    "start": "1631520",
    "end": "1638480"
  },
  {
    "text": "connections well of course there's no Solutions without challenges so uh as I",
    "start": "1639399",
    "end": "1646360"
  },
  {
    "text": "mentioned and and we we actually giving this talk is is lack of documentation and lack of general knowledge that that",
    "start": "1646360",
    "end": "1653159"
  },
  {
    "text": "you can actually do something like this the ha setup for the connectivity",
    "start": "1653159",
    "end": "1660960"
  },
  {
    "text": "server and agents is actually a bit tricky how they how they if you have",
    "start": "1660960",
    "end": "1666480"
  },
  {
    "text": "multiple agents and multiple servers each agent has to have a connection to",
    "start": "1666480",
    "end": "1672279"
  },
  {
    "text": "many servers of course otherwise it's not it's not AJ so it's like M * n issue",
    "start": "1672279",
    "end": "1679760"
  },
  {
    "text": "so that's bit of a tricky topic debuging things is bit hard because there's",
    "start": "1679760",
    "end": "1685320"
  },
  {
    "text": "something in between the call now so you can't do like like TCP dump at least",
    "start": "1685320",
    "end": "1691000"
  },
  {
    "text": "that easily on on on things and then when the connection",
    "start": "1691000",
    "end": "1696760"
  },
  {
    "text": "tunnels are not working as as expected and you do something like chep CDL logs",
    "start": "1696760",
    "end": "1702159"
  },
  {
    "text": "the errors that you see on your CLI are super super weird you're not going to",
    "start": "1702159",
    "end": "1707360"
  },
  {
    "text": "able to figure out that it it's actually somewhere in connectivity unless you've seen those errors too many times as I",
    "start": "1707360",
    "end": "1714559"
  },
  {
    "text": "have it's like shooting in the dark so to say yeah exactly yeah yeah we have",
    "start": "1714559",
    "end": "1719799"
  },
  {
    "text": "those uh and also what I'd encourage everyone who's interested in",
    "start": "1719799",
    "end": "1725440"
  },
  {
    "text": "this join the Sig that that's maintaining this because",
    "start": "1725440",
    "end": "1732559"
  },
  {
    "text": "there is a a a true lack of contributors so we're trying to do of course our best and and uh but it takes",
    "start": "1732559",
    "end": "1740600"
  },
  {
    "text": "time to land PRS and fixes and all that so join in and help all of",
    "start": "1740600",
    "end": "1748039"
  },
  {
    "text": "us all right there's couple of minutes for questions and and I guess we can",
    "start": "1749000",
    "end": "1754840"
  },
  {
    "text": "hang around in the in the hallway after the after the",
    "start": "1754840",
    "end": "1760120"
  },
  {
    "text": "talk okay thank you thank",
    "start": "1766399",
    "end": "1773760"
  },
  {
    "text": "you thank you for sharing your knowledge and is it possible to apply this",
    "start": "1773760",
    "end": "1778960"
  },
  {
    "text": "principle to distribute the controllers of the root cluster I mean in this",
    "start": "1778960",
    "end": "1784720"
  },
  {
    "text": "scenario the root cluster is the single point of failure so can we use the",
    "start": "1784720",
    "end": "1791840"
  },
  {
    "text": "connectivity to extend this this idea also to the",
    "start": "1791840",
    "end": "1796880"
  },
  {
    "text": "controllers yeah thank you yeah so I mean we can maybe quickly go back to the uh to the slide I don't know if you can",
    "start": "1796880",
    "end": "1803320"
  },
  {
    "text": "do this but let's try there so what we have over there the root as we call the root cluster this is actually a",
    "start": "1803320",
    "end": "1809640"
  },
  {
    "text": "component that would keep things um synced down like from Upstream to Downstream to those seat clusters so",
    "start": "1809640",
    "end": "1816120"
  },
  {
    "text": "it's just if you are not able to speak with the root cluster for some reason maybe it's not available I mean",
    "start": "1816120",
    "end": "1822480"
  },
  {
    "text": "eventually it's one cluster as you already mentioned the real active work so the heavy lifters isn't the real the root cluster are the seed clusters so",
    "start": "1822480",
    "end": "1829760"
  },
  {
    "text": "the seed cluster this is where your contol plane components are going to be collocated right usually how we treat",
    "start": "1829760",
    "end": "1835120"
  },
  {
    "text": "those you have like a seed cluster with with multiple data centers across I don't know maybe multiple Cloud providers as well and then what happens",
    "start": "1835120",
    "end": "1842440"
  },
  {
    "text": "is when uh when you when you lose access for the root clusters because in general",
    "start": "1842440",
    "end": "1847480"
  },
  {
    "text": "when you access root clusters you will be accessing in the seats based on of course some a lot of uh authentication",
    "start": "1847480",
    "end": "1853519"
  },
  {
    "text": "authorization and if you lose access to that you can just simply connect to that seat cluster Because by the end of the",
    "start": "1853519",
    "end": "1859440"
  },
  {
    "text": "day it's a seed it's it's a kubernetes cluster that it has its own Cube config right and then um instead of doing it",
    "start": "1859440",
    "end": "1865519"
  },
  {
    "text": "you know from Upstream to Downstream you can just do it Downstream like right away hook into it and then see what's",
    "start": "1865519",
    "end": "1870720"
  },
  {
    "text": "going on over there so this is like the model that we kind of think makes sense for",
    "start": "1870720",
    "end": "1877799"
  },
  {
    "text": "that so starting with the openvpn implementation and looking towards the",
    "start": "1882639",
    "end": "1888720"
  },
  {
    "text": "connectivity implementation is there a migration path there that you were able to achieve or look at or is it tear down",
    "start": "1888720",
    "end": "1895600"
  },
  {
    "text": "the old clusters and the new ones just get connectivity I think it's pretty much",
    "start": "1895600",
    "end": "1901799"
  },
  {
    "text": "turn down and buil again yeah I mean there's no uh there's no real kind of uh",
    "start": "1901799",
    "end": "1908799"
  },
  {
    "text": "kubernetes or or any configuration in the API server that that you can say that okay you have an open VPN tunnel",
    "start": "1908799",
    "end": "1915240"
  },
  {
    "text": "here so you you have to build it yourselves so you have to rotate your",
    "start": "1915240",
    "end": "1920399"
  },
  {
    "text": "machine at some point sadly but",
    "start": "1920399",
    "end": "1925200"
  },
  {
    "text": "yeah this is pretty awesome um what are the strategies that are in place or what",
    "start": "1925639",
    "end": "1931519"
  },
  {
    "text": "are the thoughts on how to make this easier for dynamic environments things like API server pods changing or yeah",
    "start": "1931519",
    "end": "1939159"
  },
  {
    "text": "bouncing around and having new IPS that you need to configure with all the agents yeah all right so uh that",
    "start": "1939159",
    "end": "1947120"
  },
  {
    "text": "involves something kind of a sort of an external load balancer I mean external from kues",
    "start": "1947120",
    "end": "1954720"
  },
  {
    "text": "point of view so in in normal case you configure the agents to talk to a load",
    "start": "1954720",
    "end": "1961080"
  },
  {
    "text": "balancer and and and basically the the connectivity servers you configure that",
    "start": "1961080",
    "end": "1968039"
  },
  {
    "text": "okay there's three servers running so what happens in the agents and and this is why I said that a is bit tricky so so",
    "start": "1968039",
    "end": "1975880"
  },
  {
    "text": "what happens in the agents is that they connect to the load balancer and they take as many connections to the load",
    "start": "1975880",
    "end": "1982399"
  },
  {
    "text": "balancers so that the load balancer does unique connections for the agent so it's",
    "start": "1982399",
    "end": "1987559"
  },
  {
    "text": "kind of like a sort of like a brute forcing the the ha connections gotcha",
    "start": "1987559",
    "end": "1993000"
  },
  {
    "text": "okay uh and then one other question is there plans to do this uh bir directionally as well things like going",
    "start": "1993000",
    "end": "1999120"
  },
  {
    "text": "from the kubernetes service inside the cluster yeah okay what uh is that in",
    "start": "1999120",
    "end": "2005679"
  },
  {
    "text": "plans or where is that as well or uh there an there's an open long long standing open PR on on on doing the",
    "start": "2005679",
    "end": "2013440"
  },
  {
    "text": "tunnel like like so that the agent opens up the API port on the on the worker note and then goes through the same",
    "start": "2013440",
    "end": "2020039"
  },
  {
    "text": "tunnel it's it's in the works but as as mentioned we all can help to make that",
    "start": "2020039",
    "end": "2027039"
  },
  {
    "text": "land and help in testing it and all you too can help also actually we have a question here",
    "start": "2027039",
    "end": "2033799"
  },
  {
    "text": "okay one one last question we are running out of time people is and I said I can I can hang out in the hallway if",
    "start": "2033799",
    "end": "2040480"
  },
  {
    "text": "anyone has any more questions or wants to actually um so first off which which",
    "start": "2040480",
    "end": "2046760"
  },
  {
    "text": "Sig sorry what you which Sig would we engage with special interest group it's",
    "start": "2046760",
    "end": "2054320"
  },
  {
    "text": "a sik called sik API server proxy okay something I I should have had",
    "start": "2054320",
    "end": "2061079"
  },
  {
    "text": "it on and the real question was what what breaks with this um um like things",
    "start": "2061079",
    "end": "2069040"
  },
  {
    "text": "like service meshes and Submariner and other funky Network stuff does does this",
    "start": "2069040",
    "end": "2075118"
  },
  {
    "text": "still work or do I do I limit myself by by doing this uh I don't think you're",
    "start": "2075119",
    "end": "2080919"
  },
  {
    "text": "limiting yourself at all doing this in in what what we've seen in in K Zero's",
    "start": "2080919",
    "end": "2086040"
  },
  {
    "text": "use Cas is what usually is broken is the AJ connections load balancer having wrong",
    "start": "2086040",
    "end": "2092839"
  },
  {
    "text": "configuration to have sticky sessions or something and those sort of things which are paying the debuck yeah same here I",
    "start": "2092839",
    "end": "2099960"
  },
  {
    "text": "mean um for us as I said you could like run hundreds or maybe depends how your",
    "start": "2099960",
    "end": "2105720"
  },
  {
    "text": "main infrastructure eventually the underlay and overlay infrastructure scales but mainly what we saw that um",
    "start": "2105720",
    "end": "2111599"
  },
  {
    "text": "the agent and the server of connectivity they they run smooth as long as they are satisfied with the resources and I don't",
    "start": "2111599",
    "end": "2118280"
  },
  {
    "text": "think that they need a lot of resources as we said like um some cases you really need to have um as as what you already",
    "start": "2118280",
    "end": "2124680"
  },
  {
    "text": "said a lot of redundancy like demon said running on all these notes in other cases you only need uh for example one",
    "start": "2124680",
    "end": "2131040"
  },
  {
    "text": "um deployment and you call it a day and with that as I said like we are running this in production so this is production",
    "start": "2131040",
    "end": "2137200"
  },
  {
    "text": "this is not some kind of POC or demo and so far it has been working multiple",
    "start": "2137200",
    "end": "2142880"
  },
  {
    "text": "clusters multicloud slbe metal all right thanks everyone for",
    "start": "2142880",
    "end": "2149480"
  },
  {
    "text": "joining and hope you learn something new thank you very much",
    "start": "2149480",
    "end": "2155160"
  }
]