[
  {
    "text": "all righty well let us close out this conference I am the guy between you and beer so uh",
    "start": "20",
    "end": "8870"
  },
  {
    "text": "click there we go hey my name is Steve Santee I am an architect at Salesforce",
    "start": "8870",
    "end": "15599"
  },
  {
    "text": "and I'm here to talk to you about the journey of bringing kubernetes to",
    "start": "15599",
    "end": "21330"
  },
  {
    "text": "Salesforce so just to set expectations this starts with talking about how we went about doing it then we'll go",
    "start": "21330",
    "end": "27210"
  },
  {
    "text": "through a bit of how we built it and then where we see going next and",
    "start": "27210",
    "end": "34160"
  },
  {
    "text": "depending on what you guys are looking for it may not be as deep technically in terms of what we did but I think there's",
    "start": "34160",
    "end": "39570"
  },
  {
    "text": "time at the end and I'm happy to answer questions about that as well so first off cs4 says that I need to say",
    "start": "39570",
    "end": "46739"
  },
  {
    "text": "this to you that even though it's so cool we're building cobranet we're using kubernetes and here at this conference",
    "start": "46739",
    "end": "52199"
  },
  {
    "text": "you shouldn't base any purchasing decisions based on that so like I said we're going to start with motivations",
    "start": "52199",
    "end": "59340"
  },
  {
    "text": "why are we doing this and then get into how we got people to buy off on this",
    "start": "59340",
    "end": "65549"
  },
  {
    "text": "sort of thing some big technical decisions that we made upfront what we",
    "start": "65549",
    "end": "71790"
  },
  {
    "text": "built and then where we are and where we're going of course come on motivations sorry pardon me",
    "start": "71790",
    "end": "83090"
  },
  {
    "text": "don't swear at the audience unintentionally all right so I'm just going to start with a couple of the",
    "start": "83090",
    "end": "88710"
  },
  {
    "text": "slides that we present to our corporate customers actually because it turns out that they care very much about",
    "start": "88710",
    "end": "94189"
  },
  {
    "text": "understanding how we manage our systems because we're the back end to a bunch of",
    "start": "94189",
    "end": "99560"
  },
  {
    "text": "companies whose names you may have heard of so in the book between 2014 and 2016",
    "start": "99560",
    "end": "104960"
  },
  {
    "text": "we doubled our instance count that is what others would call a cluster",
    "start": "104960",
    "end": "111060"
  },
  {
    "text": "actually internally salesforce calls calls these things pods which means that the kubernetes choice of the term pod is",
    "start": "111060",
    "end": "117689"
  },
  {
    "text": "the worst possible thing because every time I say pod people get confused so we actually internally when we're talking about pods we refer to k pods double the",
    "start": "117689",
    "end": "126540"
  },
  {
    "text": "number of transactions doubled the number of data centers the net here is the business is growing like a weed and",
    "start": "126540",
    "end": "133140"
  },
  {
    "text": "we have a a lot of work just to keep up nice all",
    "start": "133140",
    "end": "145120"
  },
  {
    "text": "right you're getting previews of some slides there we go so our customers say",
    "start": "145120",
    "end": "151210"
  },
  {
    "text": "hey what are you doing how are you making this work I'll just highlight a couple of things here from the standard free so we go to give customers service",
    "start": "151210",
    "end": "158920"
  },
  {
    "text": "ownership we are pushing really hard to move from a monolithic software model",
    "start": "158920",
    "end": "163960"
  },
  {
    "text": "where a large number of people all right code into a multi gigabyte jar file hypothetically there's not really",
    "start": "163960",
    "end": "171970"
  },
  {
    "text": "it's hard to have a sense of service ownership in that case to a model where we have we were breaking them up into",
    "start": "171970",
    "end": "177190"
  },
  {
    "text": "smaller services micro services if you will and the team's own the software they create we're pushing scale out",
    "start": "177190",
    "end": "185200"
  },
  {
    "text": "architectures which means it's easy to just add new hardware when you need when you need to that's all I'll highlight there and then",
    "start": "185200",
    "end": "192370"
  },
  {
    "text": "the picture we present outside is we talk about software-defined everything which I think would play reasonably well",
    "start": "192370",
    "end": "198190"
  },
  {
    "text": "to the room here that's what we're thinking about it as well",
    "start": "198190",
    "end": "203250"
  },
  {
    "text": "so we started about 15 years ago with a fairly an architecture that you would",
    "start": "203520",
    "end": "209380"
  },
  {
    "text": "recognize if you were a Deb in the late 90s big monolith we've evolved it since",
    "start": "209380",
    "end": "215440"
  },
  {
    "text": "then obviously but in some places it still feels like that and there's a lot of ops tools which is fairly manual or",
    "start": "215440",
    "end": "222160"
  },
  {
    "text": "the human does everything they've moved to what we call DevOps which I don't think is what the the industry would",
    "start": "222160",
    "end": "228850"
  },
  {
    "text": "call DevOps necessarily where the human still involved but you do get a little bit of machine help with some scripting",
    "start": "228850",
    "end": "235390"
  },
  {
    "text": "and such we're looking to go autonomous what we call no ops where the humans job",
    "start": "235390",
    "end": "240400"
  },
  {
    "text": "is simply to set the goal and the software does the rest unless the world literally goes to hell and you're",
    "start": "240400",
    "end": "246820"
  },
  {
    "text": "operating outside of the parameters say like your entire data center I think I need to reboot my entire data center then we get humans involved so a couple",
    "start": "246820",
    "end": "255100"
  },
  {
    "text": "of years ago we decided we were looking for a new way to run software we wanted",
    "start": "255100",
    "end": "261850"
  },
  {
    "text": "to build a system out that would make it easy to do micro-services so the things we were looking for easy",
    "start": "261850",
    "end": "268430"
  },
  {
    "text": "onboarding for these new services we want to make it quick and simple for people to come on and bring up their",
    "start": "268430",
    "end": "273860"
  },
  {
    "text": "service one of the business metrics that we are going to measure ourselves by is",
    "start": "273860",
    "end": "278979"
  },
  {
    "text": "how long does it take from the time I have an idea for a service to the time when it's running in production we want",
    "start": "278979",
    "end": "286069"
  },
  {
    "text": "a high fidelity B produc products and non production environments I don't know",
    "start": "286069",
    "end": "291740"
  },
  {
    "text": "if we're the only ones but there are cases where our production environments don't exactly look like the integration",
    "start": "291740",
    "end": "296990"
  },
  {
    "text": "environments don't exactly look like the developer's environments to the point where in some cases you have to build",
    "start": "296990",
    "end": "302060"
  },
  {
    "text": "two or three different release mechanisms and deployments deployment",
    "start": "302060",
    "end": "307189"
  },
  {
    "text": "controls we don't want that we want production to look just like integration and such and to the greatest extent",
    "start": "307189",
    "end": "313909"
  },
  {
    "text": "possible the developers workstation should look the same declarative rather than imperative interface this goes right back to the",
    "start": "313909",
    "end": "319849"
  },
  {
    "text": "autonomous nature of this we don't tell me how to get the site to the state you",
    "start": "319849",
    "end": "326569"
  },
  {
    "text": "want tell me the state you want and I will um I will get it there and keep it there secure by default I'm not going to talk",
    "start": "326569",
    "end": "334279"
  },
  {
    "text": "about this too much but the notion is there's a lot of security practices we would like to push through the org and",
    "start": "334279",
    "end": "340430"
  },
  {
    "text": "to the extent that we can do that underneath or help people make the right choices we'd like two fully automated I think",
    "start": "340430",
    "end": "347060"
  },
  {
    "text": "I've covered that needs to be usable across public cloud and private cloud most of our stuff is in private data",
    "start": "347060",
    "end": "353810"
  },
  {
    "text": "centers but we do have some public cloud investments as well so we decided we",
    "start": "353810",
    "end": "359449"
  },
  {
    "text": "wanted a simple model deployment artifacts would be containers you",
    "start": "359449",
    "end": "365389"
  },
  {
    "text": "provide a health probe the health probe is used in a couple of ways one kubernetes obviously uses it spoiler",
    "start": "365389",
    "end": "372289"
  },
  {
    "text": "alert we chose kubernetes uses that for your container health but we also use it to monitor your application health",
    "start": "372289",
    "end": "378169"
  },
  {
    "text": "because we're doing things like trying to move applications safely from one version to the next and declare you to",
    "start": "378169",
    "end": "385279"
  },
  {
    "text": "desire deployment state we ended up calling it the Salesforce application model which is a bit of a grandiose term",
    "start": "385279",
    "end": "391969"
  },
  {
    "text": "frankly but as our one of our technical founders coin the term I said yes sir if that will",
    "start": "391969",
    "end": "397499"
  },
  {
    "text": "make you greenlight the project you're on so that's where we were in midsummer",
    "start": "397499",
    "end": "407029"
  },
  {
    "text": "so we chose kubernetes again shocking what drove us that way well we went up",
    "start": "407930",
    "end": "415229"
  },
  {
    "text": "to OS Con for the 1o launch and spent time talking to them talking to the",
    "start": "415229",
    "end": "421080"
  },
  {
    "text": "community and talking to the people and we're frankly blown away a lot of the",
    "start": "421080",
    "end": "426569"
  },
  {
    "text": "people on my team have done this sort of work before for hotmail back at",
    "start": "426569",
    "end": "431879"
  },
  {
    "text": "Microsoft and other companies and we recognized people who had the same basic",
    "start": "431879",
    "end": "438990"
  },
  {
    "text": "model for how you run these sorts of things open source container based the",
    "start": "438990",
    "end": "444569"
  },
  {
    "text": "development velocity was incredible even then it looked like we would have a good",
    "start": "444569",
    "end": "449879"
  },
  {
    "text": "opportunity to affect the direction of the the project if we needed to so far we have not an opportunity to help build",
    "start": "449879",
    "end": "457349"
  },
  {
    "text": "it and there we've done a little bit the community seemed really broad-based and",
    "start": "457349",
    "end": "462779"
  },
  {
    "text": "welcoming we did have to make sure that we looked around because we were sitting",
    "start": "462779",
    "end": "468509"
  },
  {
    "text": "there drinking beer with them everybody's welcoming at that point and the vision was very much aligned with",
    "start": "468509",
    "end": "473969"
  },
  {
    "text": "our own the way we wanted to go and you know a lot of this a lot of the people were coming out of work right these",
    "start": "473969",
    "end": "479580"
  },
  {
    "text": "people clearly knew what they were doing so to get from decision to actually building the goddamn thing first off we",
    "start": "479580",
    "end": "486689"
  },
  {
    "text": "needed executive support this took a couple of months and involved things like I alluded to horse trading with the",
    "start": "486689",
    "end": "493349"
  },
  {
    "text": "founder over the name in the end but this was a very this is a 100 of an",
    "start": "493349",
    "end": "499050"
  },
  {
    "text": "open-source project and there was some worry about getting there but we felt that showing good demos and such we got",
    "start": "499050",
    "end": "507029"
  },
  {
    "text": "enough we got it across we then needed to convince an interestingly large portion of the company to ride along",
    "start": "507029",
    "end": "513870"
  },
  {
    "text": "because this isn't I mean deploying kubernetes isn't isn't enough we had to bring up a full docker pipeline a",
    "start": "513870",
    "end": "519360"
  },
  {
    "text": "trusted promotion mechanism to get it out there we had to get the CI folks lined up on this we needed the right OS",
    "start": "519360",
    "end": "526140"
  },
  {
    "text": "deployed we needed a docker version out there and get all this past security minor problem well lastly we need to launch",
    "start": "526140",
    "end": "533639"
  },
  {
    "text": "partners and I will talk a little bit more about that so finding the right launch partners was actually kind of",
    "start": "533639",
    "end": "539670"
  },
  {
    "text": "hard these people needed to be comfortable with ambiguity the these",
    "start": "539670",
    "end": "546839"
  },
  {
    "text": "slides should be up on the on the website as well comfortable they have big UT people would come to me and say",
    "start": "546839",
    "end": "552989"
  },
  {
    "text": "Steve how are we going to do X and I'd say that's a really good question we're",
    "start": "552989",
    "end": "557999"
  },
  {
    "text": "gonna have to figure that up together so we needed teams that were comfortable with that some teams are some teams are",
    "start": "557999",
    "end": "564179"
  },
  {
    "text": "like look I have a project to deliver get out of my way if you're not ready that's fine we additionally wanted",
    "start": "564179",
    "end": "571350"
  },
  {
    "text": "people who were interested in actually defining the platform with us that helped a lot people who are comfortable with ambiguity in general are willing to",
    "start": "571350",
    "end": "578069"
  },
  {
    "text": "define new platform as well so they were it took some work we wanted to pick teams that covered a spectrum across the",
    "start": "578069",
    "end": "584160"
  },
  {
    "text": "org buddy would feel brought in or bought in they need to be willing to wait to ship at this point we were about",
    "start": "584160",
    "end": "591660"
  },
  {
    "text": "this was a little over a year ago on kubernetes one one I think one two was",
    "start": "591660",
    "end": "596819"
  },
  {
    "text": "just about to happen they need to be willing to wait to ship because it turned out we weren't going to be shipping until January of this year",
    "start": "596819",
    "end": "603059"
  },
  {
    "text": "basically and they needed to be stateless because we wanted to stateless apps to start that turns out to be an",
    "start": "603059",
    "end": "609149"
  },
  {
    "text": "easier easier nut to crack so I'll talk",
    "start": "609149",
    "end": "614669"
  },
  {
    "text": "about a couple of the big decisions we made as we went into this number one we",
    "start": "614669",
    "end": "619919"
  },
  {
    "text": "built an abstraction on top of kubernetes at the time I was a little worried about this actually even here",
    "start": "619919",
    "end": "625739"
  },
  {
    "text": "seeing other people talk about their abstractions the digitalocean guy yesterday was talking about an",
    "start": "625739",
    "end": "630779"
  },
  {
    "text": "abstraction basically doing a talk that have you squinted and our systems are different but have you squinted hey okay",
    "start": "630779",
    "end": "636720"
  },
  {
    "text": "yeah we're doing the same thing why were we doing this guardrails are important",
    "start": "636720",
    "end": "642720"
  },
  {
    "text": "kubernetes is incredibly powerful you can do so many different things there's lots of",
    "start": "642720",
    "end": "648989"
  },
  {
    "text": "fine grained stuff you can do and coarse grain stuff you can do and as an engineer and during the prototyping we",
    "start": "648989",
    "end": "654600"
  },
  {
    "text": "have blast with it however we don't want to foist that upon a several thousand",
    "start": "654600",
    "end": "661050"
  },
  {
    "text": "upper organization because they will go off and do stuff and they will go off the rails so we're putting up guardrails",
    "start": "661050",
    "end": "666810"
  },
  {
    "text": "also and this is based on bitter past experience building systems like this it",
    "start": "666810",
    "end": "672000"
  },
  {
    "text": "is far easier to expose a new feature than it is to take one away we also knew",
    "start": "672000",
    "end": "677910"
  },
  {
    "text": "that we were going to build infrastructure related extensions into this anyway so we ended up with the concept of what we call a deployment",
    "start": "677910",
    "end": "683940"
  },
  {
    "text": "manifest no direct relationship but there's an indirect relationship to the kubernetes one I'll show you one in a",
    "start": "683940",
    "end": "691620"
  },
  {
    "text": "minute it looks like a unified set of deployment and service packs next up",
    "start": "691620",
    "end": "697730"
  },
  {
    "text": "where do these deployment manifests live we put them and get and get drives the",
    "start": "697730",
    "end": "703230"
  },
  {
    "text": "deployment the deployment controls so nice thing about this is so we want",
    "start": "703230",
    "end": "708959"
  },
  {
    "text": "service owners who are developers to manage this stuff turns out developers are reasonably good at using git and",
    "start": "708959",
    "end": "715620"
  },
  {
    "text": "they're comfortable with using things like pull requests to look at the difference in a proposed deployment you",
    "start": "715620",
    "end": "720959"
  },
  {
    "text": "also get a full history of all these production deployments it can take a while to learn I don't know if you've",
    "start": "720959",
    "end": "728760"
  },
  {
    "text": "ever just given up and removed a repo and cloned it again because you couldn't figure out how to dodge the damn thing but in these use cases we don't have",
    "start": "728760",
    "end": "735540"
  },
  {
    "text": "that problem so basically when you do a deployment in our system if I want to",
    "start": "735540",
    "end": "741029"
  },
  {
    "text": "deploy a new version of software I just check out a manifest make my changes and",
    "start": "741029",
    "end": "747540"
  },
  {
    "text": "I submit a pull request to approve that deployment someone else and this is a",
    "start": "747540",
    "end": "753360"
  },
  {
    "text": "policy decision that we had we made someone else has to to approve the deployment there's some auditing and",
    "start": "753360",
    "end": "761310"
  },
  {
    "text": "process associated with this that our customers were demanding or customer contracts and so we do two factor auth",
    "start": "761310",
    "end": "767970"
  },
  {
    "text": "so I can do a strong audit that says Lincoln over their Salesforce employee shout out approve this request so it's",
    "start": "767970",
    "end": "777000"
  },
  {
    "text": "all good next up we chose to put all the manifests in one repo for all of production this was an interesting one",
    "start": "777000",
    "end": "786889"
  },
  {
    "text": "but in the end we felt that it's best to put it there you can see everything in one place you can audit it's actually",
    "start": "786889",
    "end": "793399"
  },
  {
    "text": "easier for our tooling to consume and I swear that that was not the main reason that we did that we are finding even now",
    "start": "793399",
    "end": "801350"
  },
  {
    "text": "with limited number of customers that the repository is a bit noisy well that's okay doing this though you",
    "start": "801350",
    "end": "807619"
  },
  {
    "text": "basically had different teams with different access profiles all checking into a same get the same get repo so we",
    "start": "807619",
    "end": "813679"
  },
  {
    "text": "added some fine-grained access control and who could change what and we did that entirely with hooks and get last",
    "start": "813679",
    "end": "824540"
  },
  {
    "text": "thing is interesting going to some of the security talks today where they",
    "start": "824540",
    "end": "830239"
  },
  {
    "text": "talked about like we think by 1/8 might have been 1 7 you'll be ready to run",
    "start": "830239",
    "end": "835549"
  },
  {
    "text": "multi-tenant fully multi-tenant in a kubernetes cluster well we have one kubernetes cluster in each data center",
    "start": "835549",
    "end": "841489"
  },
  {
    "text": "and we're running fully multi-tenant so big decision was we isolate security",
    "start": "841489",
    "end": "848779"
  },
  {
    "text": "profiles pretty pretty dramatically what do I mean by a security profile so for a given service who's calling me Who am I",
    "start": "848779",
    "end": "855829"
  },
  {
    "text": "calling and most importantly what kind of data there's other pieces too but",
    "start": "855829",
    "end": "861499"
  },
  {
    "text": "these are the main ones so for example one of the services that we ended up bringing onboard is a Redis based",
    "start": "861499",
    "end": "867369"
  },
  {
    "text": "caching layer that's used by our front-ends it turns out that has",
    "start": "867369",
    "end": "873019"
  },
  {
    "text": "customer data in there and it talks to some services that are pretty close to the Internet that's one security profile",
    "start": "873019",
    "end": "879850"
  },
  {
    "text": "another service that we brought on the backend monitoring services it just takes metrics and such from different",
    "start": "879850",
    "end": "886249"
  },
  {
    "text": "applications that's a different security profile so we put we put the pods",
    "start": "886249",
    "end": "891829"
  },
  {
    "text": "associated with a given circuity profile alone on their nodes you can't have we don't share right now and we take",
    "start": "891829",
    "end": "898850"
  },
  {
    "text": "further actions to to isolate these things there are some network boundaries there are some let's just say our back",
    "start": "898850",
    "end": "907970"
  },
  {
    "text": "was an interesting thing for us to see the the community deliver them we've done some stuff ourselves in the absence",
    "start": "907970",
    "end": "913039"
  },
  {
    "text": "of that right now does this decrease the efficiency the efficiency of our usage yeah",
    "start": "913039",
    "end": "919430"
  },
  {
    "text": "but we need to at the moment and the nice thing is this is entirely hidden from the application developer as as for",
    "start": "919430",
    "end": "927680"
  },
  {
    "text": "example I saw some hypervisor based so I could run some of these things in a hypervisor or we get better at security",
    "start": "927680",
    "end": "934029"
  },
  {
    "text": "or our security team me gets more comfortable we can slide all this",
    "start": "934029",
    "end": "940310"
  },
  {
    "text": "underneath customers will never see those are the main decisions so what",
    "start": "940310",
    "end": "946220"
  },
  {
    "text": "have we build well first off I will show you a deployment manifest at the",
    "start": "946220",
    "end": "953089"
  },
  {
    "text": "beginning we were actually thinking we were going to abstract kubernetes away pretty completely over time we decided",
    "start": "953089",
    "end": "961040"
  },
  {
    "text": "we didn't really need to do that so that you can see what we call a function raise your hand if you think it looks",
    "start": "961040",
    "end": "967490"
  },
  {
    "text": "like a deployment that's because it is we expose most of the pieces in the",
    "start": "967490",
    "end": "972589"
  },
  {
    "text": "deployment the de port of deployment artifact fun fact we were at the time we",
    "start": "972589",
    "end": "980089"
  },
  {
    "text": "started building this there was no deployment thing we thought we were gonna have to build build the equivalent",
    "start": "980089",
    "end": "986870"
  },
  {
    "text": "of a deployment to manage replica sets and all that fun stuff but the community has been ahead of us we're just now",
    "start": "986870",
    "end": "994070"
  },
  {
    "text": "getting to the point where we feel like there's things that we need that aren't there which is good I guess it took us a",
    "start": "994070",
    "end": "1000010"
  },
  {
    "text": "while to deliver this load balancers they just map into services right now eventually I'm not showing it here but",
    "start": "1000010",
    "end": "1006790"
  },
  {
    "text": "we imagine we're gonna put in information so that we can bind into our existing Salesforce alerting systems and",
    "start": "1006790",
    "end": "1014350"
  },
  {
    "text": "such we do not have the luxury of just sail Prometheus everything's great we've",
    "start": "1014350",
    "end": "1020680"
  },
  {
    "text": "got a bunch of infrastructure that we have to bind into so the overall flow a",
    "start": "1020680",
    "end": "1027280"
  },
  {
    "text": "laser pointer would be nice here at the",
    "start": "1027280",
    "end": "1032920"
  },
  {
    "text": "upper right you see our beautiful service owner they write code they check",
    "start": "1032920",
    "end": "1037928"
  },
  {
    "text": "it in the build pipelines run docker images get created and they sit there",
    "start": "1037929",
    "end": "1043870"
  },
  {
    "text": "the big the the thick dash line has but the difference between R&D and production right so these pipelines run",
    "start": "1043870",
    "end": "1051550"
  },
  {
    "text": "CI can happen all of that when they owner service owner wants to actually do a deployment",
    "start": "1051550",
    "end": "1057390"
  },
  {
    "text": "they check in a change to get over there once that pull request is approved a",
    "start": "1057390",
    "end": "1063640"
  },
  {
    "text": "couple of things happen first off if you have a deployment manifest that has been",
    "start": "1063640",
    "end": "1070020"
  },
  {
    "text": "that's been approved any docker image that's referenced in there is approved",
    "start": "1070020",
    "end": "1076630"
  },
  {
    "text": "for promotion that into production we do not want images that haven't been",
    "start": "1076630",
    "end": "1082630"
  },
  {
    "text": "approved for deployment to be out there where they could run attorney I mean it's really easy to docker run it's really easy to start bringing things up",
    "start": "1082630",
    "end": "1088540"
  },
  {
    "text": "at that time we actually also sign them because we do signature verification",
    "start": "1088540",
    "end": "1093850"
  },
  {
    "text": "that out in production to verify that only trusted trusted signed images are",
    "start": "1093850",
    "end": "1099790"
  },
  {
    "text": "out there the same time the manifest goes out to a dedicated manifest repo where our little controller which is not",
    "start": "1099790",
    "end": "1106420"
  },
  {
    "text": "much code actually looks at those manifests like you saw before translates them into the kubernetes artifacts talks",
    "start": "1106420",
    "end": "1114910"
  },
  {
    "text": "to the kubernetes controller and watches the deployment move forward the deployment object handles most of that but if it stalls or there are",
    "start": "1114910",
    "end": "1122200"
  },
  {
    "text": "errors then the the then our controller is Racal is responsible for pulling it back it also talks to some of the other",
    "start": "1122200",
    "end": "1128620"
  },
  {
    "text": "Salesforce infrastructure we run that controller we've thought about making",
    "start": "1128620",
    "end": "1134050"
  },
  {
    "text": "that a third-party resource they weren't really available at the time we wrote that but for the moment it's just it",
    "start": "1134050",
    "end": "1141610"
  },
  {
    "text": "just runs as a pod inside the cluster with a with a count of one one thing I",
    "start": "1141610",
    "end": "1147430"
  },
  {
    "text": "will note on the quote Federation thing deployments go in parallel if I check in a manifest that says that says this",
    "start": "1147430",
    "end": "1154810"
  },
  {
    "text": "should go into DC one two and three that pipeline runs in parallel and those things go out and they are deployed",
    "start": "1154810",
    "end": "1160000"
  },
  {
    "text": "completely in parallel on all of them we're not using Federation here a Federation wasn't available at the time",
    "start": "1160000",
    "end": "1166270"
  },
  {
    "text": "we were doing this and B the the call direction yeah this picture doesn't",
    "start": "1166270",
    "end": "1171940"
  },
  {
    "text": "quite work that way sorry I'm debugging my picture as I describe that but the call Direction doesn't actually work with our security model for Federation",
    "start": "1171940",
    "end": "1178600"
  },
  {
    "text": "in this form so that is what we built as",
    "start": "1178600",
    "end": "1183730"
  },
  {
    "text": "I said it's pretty high level so I'm going to talk about where we are",
    "start": "1183730",
    "end": "1188820"
  },
  {
    "text": "so right now the coolest stat for me is 30 minutes after checking in or",
    "start": "1188820",
    "end": "1194710"
  },
  {
    "text": "approving the manifest change your systems are running live in production",
    "start": "1194710",
    "end": "1200020"
  },
  {
    "text": "with no humans involved whatsoever now I think a lot of us have worked in environments worth like 30 minutes ok",
    "start": "1200020",
    "end": "1207400"
  },
  {
    "text": "that's exciting I'll just say that's a significant improvement both in terms of human",
    "start": "1207400",
    "end": "1214300"
  },
  {
    "text": "involvement and especially in terms of time for these deployments and the nice thing is the service owners just do it",
    "start": "1214300",
    "end": "1221020"
  },
  {
    "text": "and we don't actually even know sometimes we've got a couple of services",
    "start": "1221020",
    "end": "1226810"
  },
  {
    "text": "like three services in production right now caching a monitoring service and then a little feature flag service we",
    "start": "1226810",
    "end": "1233830"
  },
  {
    "text": "expect by the end of the year we'll have at least 20 if not more we're running 100 maybe a little more nodes in",
    "start": "1233830",
    "end": "1241960"
  },
  {
    "text": "production almost entirely on bare metal that's a journey in and of itself we expect to have well over a thousand",
    "start": "1241960",
    "end": "1248520"
  },
  {
    "text": "running live production stuff by the end of the year we have a few of our data centers only we're still we're still in",
    "start": "1248520",
    "end": "1254890"
  },
  {
    "text": "pilot phase and that we're not in every data center all of the data centers will be going by the end of the year and",
    "start": "1254890",
    "end": "1259930"
  },
  {
    "text": "while we have ten clusters right now several for development we'll be running at least 20 by the end and whereas we",
    "start": "1259930",
    "end": "1267070"
  },
  {
    "text": "have dozens of daily service deployments right now we expect hundreds or even more and one are actually - somebody",
    "start": "1267070",
    "end": "1272920"
  },
  {
    "text": "corrected me last night kubernetes contributions we hope to have more the team really wants to be involved in",
    "start": "1272920",
    "end": "1278230"
  },
  {
    "text": "giving back they've been doing looking for bug fixes and small features and such there is a metric ton more to do",
    "start": "1278230",
    "end": "1289770"
  },
  {
    "text": "we're intentionally starting slow because it turns out running kubernetes clusters is an art and you have to learn",
    "start": "1289770",
    "end": "1296290"
  },
  {
    "text": "how to do it and I monitor it and find all the fault modes so scaling that out over the course of the year we're",
    "start": "1296290",
    "end": "1301510"
  },
  {
    "text": "spending a lot of time on that making it easier for service owners to onboard is an important focus here well I said what",
    "start": "1301510",
    "end": "1308800"
  },
  {
    "text": "I wanted it to be super easy it's still not it's much it's easier than it was but there's a lot more to do that's",
    "start": "1308800",
    "end": "1314380"
  },
  {
    "text": "important because we have an amazing queue of people trying to pull onto this",
    "start": "1314380",
    "end": "1319450"
  },
  {
    "text": "we need to get better at pulling in more infrastructure things we do we want to",
    "start": "1319450",
    "end": "1325480"
  },
  {
    "text": "do certificate management with automatic certificate generation so that these services can do mutual TLS for example",
    "start": "1325480",
    "end": "1332350"
  },
  {
    "text": "and we're looking to hook that in secrets kubernetes has secrets",
    "start": "1332350",
    "end": "1338440"
  },
  {
    "text": "mechanisms Salesforce as a whole which it turns out is running most of the",
    "start": "1338440",
    "end": "1344110"
  },
  {
    "text": "Salesforce infrastructure doesn't run on our stuff and they have a secret secrets mechanism so we have to tie that in",
    "start": "1344110",
    "end": "1351600"
  },
  {
    "text": "we're looking to support clustered applications I used Redis both and Sentinel and cluster mode as an example",
    "start": "1351600",
    "end": "1357130"
  },
  {
    "text": "but you know you can think of things like Etsy deep post Chris zookeeper those sorts of things and persistence",
    "start": "1357130",
    "end": "1365470"
  },
  {
    "text": "which I had a its own slide for we um we",
    "start": "1365470",
    "end": "1370480"
  },
  {
    "text": "see at least three versions of persistence right now just giving people static local disk mounts works in a",
    "start": "1370480",
    "end": "1377530"
  },
  {
    "text": "couple of cases just given the topology the way we deploy things and that's fine",
    "start": "1377530",
    "end": "1382720"
  },
  {
    "text": "for them it's great for lightweight caching which at least one of our services really needs that's all they",
    "start": "1382720",
    "end": "1389170"
  },
  {
    "text": "need and they don't actually care if it goes away but they would just prefer that it not we just do this for ourselves with a local agent which",
    "start": "1389170",
    "end": "1395430"
  },
  {
    "text": "provisions the disk as I as a pod lands their persistent volumes is a big focus",
    "start": "1395430",
    "end": "1403150"
  },
  {
    "text": "of work for us right now this year which is stateful sets and it it sounds like",
    "start": "1403150",
    "end": "1408790"
  },
  {
    "text": "we will get automatic upgrades before we have to go do it ourselves and that would be wonderful this does require a persistent back-end",
    "start": "1408790",
    "end": "1415870"
  },
  {
    "text": "which we're also in the midst of deploying eventually a lot of the people",
    "start": "1415870",
    "end": "1421060"
  },
  {
    "text": "especially on the infrastructure side are curious about doing what what we kind of colloquially call stateful set",
    "start": "1421060",
    "end": "1427240"
  },
  {
    "text": "local disk Edition wherein you have it's a stateful set but your volume claim is basically to say no I want I want SSD on",
    "start": "1427240",
    "end": "1434770"
  },
  {
    "text": "a physical machine and I want my pod to land next to it and then you'd need a scheduler which understands that you",
    "start": "1434770",
    "end": "1440320"
  },
  {
    "text": "have a fairly strong affinity to that for that pod to that node but understands that in the end if it's got",
    "start": "1440320",
    "end": "1446050"
  },
  {
    "text": "to go it's got to go we haven't built this yet I don't think that's coming anytime soon but I thought I mentioned it because we",
    "start": "1446050",
    "end": "1452800"
  },
  {
    "text": "see the need that's actually all I have",
    "start": "1452800",
    "end": "1460320"
  },
  {
    "text": "we're using kubernetes in other areas as well I just picked the the project that I run here one other one I'll mention is",
    "start": "1460320",
    "end": "1467350"
  },
  {
    "text": "a kubernetes hosted streaming spark clusters on demand got kubernetes",
    "start": "1467350",
    "end": "1474370"
  },
  {
    "text": "deployed and hosting live services and our service owners are really excited we are turning away far more people than",
    "start": "1474370",
    "end": "1480370"
  },
  {
    "text": "we're taking right now just because honestly we're kind of afraid like I want to find problems with four or five",
    "start": "1480370",
    "end": "1487450"
  },
  {
    "text": "customers rather than find that same problem where maybe a bunch of manual labor is required to get out of it when",
    "start": "1487450",
    "end": "1493900"
  },
  {
    "text": "you've got 50 and this would not be a Tech Talk at a tech conference if I didn't say this sounds interesting we",
    "start": "1493900",
    "end": "1500500"
  },
  {
    "text": "are hiring that's all I got any questions sir well you can do one and",
    "start": "1500500",
    "end": "1519400"
  },
  {
    "text": "we'll come back to you so the question",
    "start": "1519400",
    "end": "1528970"
  },
  {
    "text": "is how do we sync docker containers across the data centers we not my team",
    "start": "1528970",
    "end": "1534550"
  },
  {
    "text": "let's see so basically it's a pull from",
    "start": "1534550",
    "end": "1539800"
  },
  {
    "text": "the data center so we're actually doing a there's a signal to there's a there's",
    "start": "1539800",
    "end": "1546340"
  },
  {
    "text": "a trusted registry which is where we stage and then there's registries out in production that are monitoring that and",
    "start": "1546340",
    "end": "1552520"
  },
  {
    "text": "just pulling them down",
    "start": "1552520",
    "end": "1555210"
  },
  {
    "text": "yeah I mean basically once once the once we agree that we're going to promote one",
    "start": "1558149",
    "end": "1563169"
  },
  {
    "text": "of these things to production it gets signed and dropped into a place where then it gets just pulled from there",
    "start": "1563169",
    "end": "1569950"
  },
  {
    "text": "because we don't call out into our production data centers in general someone over here sir",
    "start": "1569950",
    "end": "1576720"
  },
  {
    "text": "question-is sounds like a big project what's the size of the team it was eight",
    "start": "1579129",
    "end": "1584230"
  },
  {
    "text": "people well so it depends the core kubernetes stuff eight to ten people",
    "start": "1584230",
    "end": "1590620"
  },
  {
    "text": "it's ten now we're expanding but we pulled in it was probably 60 or 70",
    "start": "1590620",
    "end": "1597129"
  },
  {
    "text": "people I would say we're involved in some way I mean we had people who had to bring Santo s7 and figure out okay what",
    "start": "1597129",
    "end": "1604330"
  },
  {
    "text": "does a sent to a seven image look like for this how do we get it out there and they're building docker containers",
    "start": "1604330",
    "end": "1611700"
  },
  {
    "text": "securely and stuff and pushing them out consumed a fair number of people as well",
    "start": "1611700",
    "end": "1617490"
  },
  {
    "text": "I didn't manage to convince developers to do this oh so okay so the question is",
    "start": "1618929",
    "end": "1628649"
  },
  {
    "text": "how do we convince developers to change their minds on which access because on the one axis the hard thing is service",
    "start": "1628649",
    "end": "1636209"
  },
  {
    "text": "ownership it's like you're gonna be on call turns out developers don't like that in some cases especially in an organization",
    "start": "1636209",
    "end": "1641820"
  },
  {
    "text": "where previously they didn't have to cuz they were kind of tossing stuff over the wall to a dedicated sre org in terms of",
    "start": "1641820",
    "end": "1650579"
  },
  {
    "text": "using our stuff I will say that what we've deployed is so much easier to use",
    "start": "1650579",
    "end": "1656989"
  },
  {
    "text": "then than the way it was done before that we have we have not had problems there may be a bit of selection bias",
    "start": "1656989",
    "end": "1663779"
  },
  {
    "text": "there because I only most of the time I end up talking to teams who are",
    "start": "1663779",
    "end": "1669059"
  },
  {
    "text": "interested in this but I don't think so there's there's a lot there so how did",
    "start": "1669059",
    "end": "1679709"
  },
  {
    "text": "we convince the execs the main vector was improvement in velocity the the",
    "start": "1679709",
    "end": "1688799"
  },
  {
    "text": "distance from code check in to production is so much less under this that that's something that we really",
    "start": "1688799",
    "end": "1695219"
  },
  {
    "text": "needed we understood that the processes that we had weren't scaling as we tried to break break apart some of our more",
    "start": "1695219",
    "end": "1700979"
  },
  {
    "text": "monolithic apps so the execs knew they needed to do something like this the most interesting piece was saying this",
    "start": "1700979",
    "end": "1707489"
  },
  {
    "text": "technology that took a couple of months of just talking through some of the people who I was talking to had",
    "start": "1707489",
    "end": "1714089"
  },
  {
    "text": "literally built Borg equivalents at other companies and so yeah I had to convince them that this seemed",
    "start": "1714089",
    "end": "1719549"
  },
  {
    "text": "reasonable dot see in front first sorry your neck",
    "start": "1719549",
    "end": "1726528"
  },
  {
    "text": "Oh our abstraction yeah we actually win and like I said we kind of expected we",
    "start": "1731610",
    "end": "1741390"
  },
  {
    "text": "were going to abstract it away more than we did so we actually started with the DSL we started with our abstraction you",
    "start": "1741390",
    "end": "1747360"
  },
  {
    "text": "saw those functions and load balancers at the beginning it didn't look anything like kubernetes but over time we're",
    "start": "1747360",
    "end": "1754380"
  },
  {
    "text": "slowly exposing more and more honestly I expect that a year or two from now we'll have a subtly different format if I were",
    "start": "1754380",
    "end": "1763920"
  },
  {
    "text": "gonna do it again what I am what I have an abstraction absolutely I mean fundamentally because we are actually",
    "start": "1763920",
    "end": "1769290"
  },
  {
    "text": "are very much trying to draw a box and say you get to you get to color inside this box they do not want 4000",
    "start": "1769290",
    "end": "1776550"
  },
  {
    "text": "developers going and experimenting with kubernetes hey sorry I'm gonna revoke my",
    "start": "1776550",
    "end": "1782310"
  },
  {
    "text": "engineering credentials but no actually he was next oh so we hope so we have a we have a",
    "start": "1782310",
    "end": "1802230"
  },
  {
    "text": "couple of secret services but the main one is just a vault that lives in the in",
    "start": "1802230",
    "end": "1807630"
  },
  {
    "text": "the data center and you can go query your secrets and so you know you can pull them out of puppet and such right now we use puppet to manage some of our",
    "start": "1807630",
    "end": "1814590"
  },
  {
    "text": "other infrastructure and what we're trying to do here is say you just mention your secrets in your manifest",
    "start": "1814590",
    "end": "1820260"
  },
  {
    "text": "and we will go pull it out and drop it into we're thinking the file system mount abstraction is the way we'll do",
    "start": "1820260",
    "end": "1826170"
  },
  {
    "text": "that",
    "start": "1826170",
    "end": "1828350"
  },
  {
    "text": "I mentioned what yes we we don't use",
    "start": "1831639",
    "end": "1840879"
  },
  {
    "text": "Jenkins we actually use and I don't know the official name it go it's go something go CD yes fans good yeah I",
    "start": "1840879",
    "end": "1851919"
  },
  {
    "text": "mean so we use it the one challenge I have is more than I know Jenkins a little bit more but we have a team that",
    "start": "1851919",
    "end": "1857830"
  },
  {
    "text": "that that does it it works fine sorry",
    "start": "1857830",
    "end": "1866340"
  },
  {
    "text": "question is are the customers deployed on VMs or officially on there straight bare metal straight bare metal which is",
    "start": "1869249",
    "end": "1876369"
  },
  {
    "text": "what go ahead storage in what sense what storage are we using I mean so at the moment we're",
    "start": "1876369",
    "end": "1889029"
  },
  {
    "text": "not exposing storage to people we're looking at SEF right now as the as the",
    "start": "1889029",
    "end": "1894879"
  },
  {
    "text": "storage mechanism that we do end up exposing right I mean we did stateless apps first don't make sense we're using",
    "start": "1894879",
    "end": "1900580"
  },
  {
    "text": "s CD as as part of kubernetes but that's it yes",
    "start": "1900580",
    "end": "1909749"
  },
  {
    "text": "yes I think um I was in it I was in a helm talk just now actually staring at",
    "start": "1914810",
    "end": "1921330"
  },
  {
    "text": "him like yes I think when we were there when we were just starting this out helm was not fully out there yet I think I",
    "start": "1921330",
    "end": "1928260"
  },
  {
    "text": "mean they were going along around the same time as us I remember them presenting it the first coupe cut or being at the first coupe con but at that",
    "start": "1928260",
    "end": "1935190"
  },
  {
    "text": "point honestly and I think this is on me we had our abstraction and we were we were just running I think the helm",
    "start": "1935190",
    "end": "1940770"
  },
  {
    "text": "abstraction looks like it might actually cover quite a bit more so like I said I think over the next year or two we may",
    "start": "1940770",
    "end": "1947820"
  },
  {
    "text": "look to tune that abstraction and if we could use something standard we'd be",
    "start": "1947820",
    "end": "1953670"
  },
  {
    "text": "fine with that all the way in the back",
    "start": "1953670",
    "end": "1958460"
  },
  {
    "text": "have we moved to databases to kubernetes we have not yet there are Sagan I'd say",
    "start": "1962450",
    "end": "1973230"
  },
  {
    "text": "we're exploring it I mean we've got some efforts of foot to try and try and bring them up the truth is I mean for the",
    "start": "1973230",
    "end": "1980610"
  },
  {
    "text": "moment Salesforce which if you don't know is just this massive Oracle",
    "start": "1980610",
    "end": "1986150"
  },
  {
    "text": "database with business logic on top it's incredibly complex and cool we're pretty",
    "start": "1986150",
    "end": "1991890"
  },
  {
    "text": "good at running databases so that's not the the first thing we're trying to do there's somebody over there next",
    "start": "1991890",
    "end": "1999710"
  },
  {
    "text": "see again we wanted to make the development environment look as close to",
    "start": "2001980",
    "end": "2008799"
  },
  {
    "text": "production as possible and on the one hand maybe that's mini cube with a little bit of our abstraction on top the",
    "start": "2008799",
    "end": "2014230"
  },
  {
    "text": "harder problem which is actually not related to this but more around micro-services in general is I have 40",
    "start": "2014230",
    "end": "2019720"
  },
  {
    "text": "micro services out there I'm not going to run all 40 of those on my dev box and so we have teams I'm not part of my",
    "start": "2019720",
    "end": "2026799"
  },
  {
    "text": "teams that I'm enabling to run micro services we have people trying to figure",
    "start": "2026799",
    "end": "2031840"
  },
  {
    "text": "out how best to do that from a developer perspective in general the idea is if I have a cluster of them I have 39 of the",
    "start": "2031840",
    "end": "2038409"
  },
  {
    "text": "services running over here and I can configure discovery such that my service is the one that you talk to in a",
    "start": "2038409",
    "end": "2044500"
  },
  {
    "text": "development environment then that's fine does that make sense",
    "start": "2044500",
    "end": "2048809"
  },
  {
    "text": "so they can build the containers and run them directly which works for a lot of the use cases we've got mini cube mostly",
    "start": "2057060",
    "end": "2064649"
  },
  {
    "text": "up and running and that but the main thing we have is a a cluster where you",
    "start": "2064650",
    "end": "2069690"
  },
  {
    "text": "can just run your stuff which I think which I find gets you most of the way",
    "start": "2069690",
    "end": "2074940"
  },
  {
    "text": "there and then there are some cases where an integration environments we're actually building up bespoke bespoke",
    "start": "2074940",
    "end": "2080970"
  },
  {
    "text": "capacity for them we're not though so we",
    "start": "2080970",
    "end": "2090658"
  },
  {
    "text": "are the question was are we using one of the commercial past platforms now we run straight kubernetes we're on 1/5 as of",
    "start": "2090659",
    "end": "2097020"
  },
  {
    "text": "this week actually we just upgraded sir",
    "start": "2097020",
    "end": "2103010"
  },
  {
    "text": "yes how how does security feel about",
    "start": "2103010",
    "end": "2109200"
  },
  {
    "text": "bare metal you saw a picture up there where I talked about the isolation mechanism that we have in place we",
    "start": "2109200",
    "end": "2115650"
  },
  {
    "text": "isolate those machines pretty hard right now the fear of escape from containers",
    "start": "2115650",
    "end": "2125970"
  },
  {
    "text": "is greater than the fear of escape from vm's I think you can pop both of them in some senses at present were early enough",
    "start": "2125970",
    "end": "2132570"
  },
  {
    "text": "that we're we're picking and choosing what we're close we run to ones that that they're ok with and we're expecting",
    "start": "2132570",
    "end": "2138180"
  },
  {
    "text": "that as the as the community matures the security stuff like if and if you went",
    "start": "2138180",
    "end": "2144030"
  },
  {
    "text": "to the Google Talk there's a bunch of capabilities there and we're looking at",
    "start": "2144030",
    "end": "2149340"
  },
  {
    "text": "how we can basically give people confidence that it's unlikely that you",
    "start": "2149340",
    "end": "2154740"
  },
  {
    "text": "break out I mean the other thing is we are these are friendly developers in that like I'm not running a pass and so",
    "start": "2154740",
    "end": "2160110"
  },
  {
    "text": "and that's amending up has internal pads and I'm not running up has where any Tom Dick or Jane can come and run their code",
    "start": "2160110",
    "end": "2166860"
  },
  {
    "text": "but that that said no I mean bare metal bare metal for now",
    "start": "2166860",
    "end": "2173119"
  },
  {
    "text": "and you said you're working on environmental and did you have to implement your own ingress or load",
    "start": "2173570",
    "end": "2181340"
  },
  {
    "text": "balancers or as I call it with a better mental it's pretty our networking",
    "start": "2181340",
    "end": "2187720"
  },
  {
    "text": "continues to evolve our Sdn capabilities are maturing shall I say so we have at",
    "start": "2187720",
    "end": "2195980"
  },
  {
    "text": "the moment and so we're working on both Sdn and alb SLB deployments which will",
    "start": "2195980",
    "end": "2202190"
  },
  {
    "text": "help there in the meantime there is some f5 programming going on yeah",
    "start": "2202190",
    "end": "2211510"
  },
  {
    "text": "how do we handle rolling upgrades for nodes and masters so we have a little",
    "start": "2214720",
    "end": "2220040"
  },
  {
    "text": "deployer that basically does that right so it's it's basically just one two",
    "start": "2220040",
    "end": "2226760"
  },
  {
    "text": "three and are we we run three master nodes and then for the actual nodes we",
    "start": "2226760",
    "end": "2232130"
  },
  {
    "text": "just do it slowly it's simple it's something we could do a lot more of I think we could we could do more there but for the moment main thing is for",
    "start": "2232130",
    "end": "2239450"
  },
  {
    "text": "patching because we patched the OSS underneath on a somewhat regular basis",
    "start": "2239450",
    "end": "2246160"
  },
  {
    "text": "as we put the developers on call what have we done with the sres whose jobs are no longer needed they're not so",
    "start": "2251599",
    "end": "2258630"
  },
  {
    "text": "first off I mean we only have a few services right now in general the notion",
    "start": "2258630",
    "end": "2264750"
  },
  {
    "text": "is that we want us Ari's to be broader maybe they're the first tier in some cases but but as I show that the",
    "start": "2264750",
    "end": "2274049"
  },
  {
    "text": "business is scaling so fast that I we can't keep up in that sense so we",
    "start": "2274049",
    "end": "2281309"
  },
  {
    "text": "haven't had any that problem yet I have no idea how much time is left we're",
    "start": "2281309",
    "end": "2290280"
  },
  {
    "text": "finished all right thanks if you want to all hang out here if you guys want to talk or see us at the party",
    "start": "2290280",
    "end": "2296900"
  }
]