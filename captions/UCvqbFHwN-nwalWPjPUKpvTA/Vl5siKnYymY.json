[
  {
    "start": "0",
    "end": "96000"
  },
  {
    "text": "I think we can start yeah perfect um so hello everyone thanks for joining",
    "start": "0",
    "end": "5460"
  },
  {
    "text": "me this morning I hope you're having a great time so far and today I'm gonna talk about our Google Earth at scale or",
    "start": "5460",
    "end": "11160"
  },
  {
    "text": "oh we brought automated rollbacks to more than 2 100 micro services at monzo",
    "start": "11160",
    "end": "17160"
  },
  {
    "text": "so a little thing about me and why I'm doing this talk in the first place so under the paramedic a picture of me with",
    "start": "17160",
    "end": "22859"
  },
  {
    "text": "like much more air um I'm a back-end engineer working in the platform team at monzo I like this",
    "start": "22859",
    "end": "29519"
  },
  {
    "text": "migration project where we essentially replace our default deployment strategy to basically use our goal out and",
    "start": "29519",
    "end": "35219"
  },
  {
    "text": "automated rollbacker countering by default some and I was detective of the engineering Effectiveness team as we",
    "start": "35219",
    "end": "41760"
  },
  {
    "text": "have a couple of discussions this morning during the keynote so the Medicare team doing everything in the backs all the tooling that engineer used",
    "start": "41760",
    "end": "49140"
  },
  {
    "text": "to use to interface with the platform and also deployment pipeline CI CD and observability stack uh and I you could",
    "start": "49140",
    "end": "56039"
  },
  {
    "text": "probably hear already I have a strong accent and unfortunately I cannot do anything about it so please bear with me",
    "start": "56039",
    "end": "62760"
  },
  {
    "text": "um so first of all what I'm gonna talk about this morning um this is a study case of oh we make it",
    "start": "62760",
    "end": "68580"
  },
  {
    "text": "migrated all of our services to our Google out as I said they can become like a default deployment strategy at monzo uh oh we did it safely because",
    "start": "68580",
    "end": "75479"
  },
  {
    "text": "we're a regulating Bank in the UK um and them of the bank is is monzo and",
    "start": "75479",
    "end": "81119"
  },
  {
    "text": "that we're actually quite happy with what we uh what we got and what we achieved with our Google art and there",
    "start": "81119",
    "end": "87000"
  },
  {
    "text": "will be a lot of emojis because it's part of monzo branding so uh so yeah a little bit uh scene setting",
    "start": "87000",
    "end": "94740"
  },
  {
    "text": "a little bit of context so what is manto it's a regulated Bank in the UK it's seven years old it has more than 5",
    "start": "94740",
    "end": "100920"
  },
  {
    "start": "96000",
    "end": "96000"
  },
  {
    "text": "million uh customer it's one best British Bank um this year I believe",
    "start": "100920",
    "end": "106920"
  },
  {
    "text": "um it is a mobile only banking up as you can see",
    "start": "106920",
    "end": "112020"
  },
  {
    "text": "um like what the basic art look like and if you've been in the UK you've probably seen those very flashy odd Coral cards",
    "start": "112020",
    "end": "118380"
  },
  {
    "text": "that we're famous for and that basically um what's it look like from the tech point of view which is uh yeah the tech",
    "start": "118380",
    "end": "124979"
  },
  {
    "text": "stack point of view the more interesting bit is uh monthly really brought in the micros into the microservices philosophy",
    "start": "124979",
    "end": "131700"
  },
  {
    "text": "we have more than 2 100 macro services or application depending if you recall",
    "start": "131700",
    "end": "136860"
  },
  {
    "text": "them uh we have over 200 Engineers um a good most of them back engineer and",
    "start": "136860",
    "end": "143700"
  },
  {
    "text": "that's where like the interesting number come in we did last year 20 27 000 Pro",
    "start": "143700",
    "end": "150060"
  },
  {
    "text": "deployments and those are actual Pro deployments this is not conflict change this is actual code that we push to and",
    "start": "150060",
    "end": "156980"
  },
  {
    "text": "to production everything is going and the other interesting bit is everything",
    "start": "156980",
    "end": "162840"
  },
  {
    "text": "is running in in one Mega Community kubernetes cluster of like 300 nodes uh",
    "start": "162840",
    "end": "168420"
  },
  {
    "text": "20 000 pods um massive scale it's it's a really chunky uh Community cluster",
    "start": "168420",
    "end": "174840"
  },
  {
    "text": "another entire platform is quite centralized and quite uh homogeneous every golden Services looks the same and",
    "start": "174840",
    "end": "181140"
  },
  {
    "text": "basically use the same libraries um so as I mentioned basically deploying and monzo is a bread and butter we made",
    "start": "181140",
    "end": "188220"
  },
  {
    "start": "183000",
    "end": "183000"
  },
  {
    "text": "that process like incredibly efficient if we uh like artificial as fictionless as possible for engineers to be able to",
    "start": "188220",
    "end": "193739"
  },
  {
    "text": "deploy um and basically our deployment pipeline is enrolled uh and you can deploy",
    "start": "193739",
    "end": "201720"
  },
  {
    "text": "um in less than two minutes and that's include building the images so it's very efficient but we kind of like realize",
    "start": "201720",
    "end": "208260"
  },
  {
    "text": "that really it's something we do like soft and on a daily basis or the percentage was kind of simple we still",
    "start": "208260",
    "end": "213599"
  },
  {
    "text": "rely on communities deployment Community native deployment and use Like a Rolling update strategy which basically means",
    "start": "213599",
    "end": "220140"
  },
  {
    "text": "that the engineer when you deploy stuff and because we do it so much you kind of like needed to we had like alerting",
    "start": "220140",
    "end": "225180"
  },
  {
    "text": "genocide and also like um business level alert but Indiana kind of like add to",
    "start": "225180",
    "end": "230760"
  },
  {
    "text": "BBC deployments look at graphene dashboard which is as you know not super interesting and also with a current",
    "start": "230760",
    "end": "236879"
  },
  {
    "text": "setup every time you do like a new release you basically release it directly to 100 of the customers",
    "start": "236879",
    "end": "243780"
  },
  {
    "text": "um as I mentioned we are in a banking is a regulation industry downtime is very costly uh financially in terms of",
    "start": "243780",
    "end": "250140"
  },
  {
    "text": "reputation I mean for all of us in this room like you don't definitely do not want done time uh but for us it's also",
    "start": "250140",
    "end": "255780"
  },
  {
    "text": "bear like the risk some like regulatory risk uh if we're down too often or if like some very important payments as a",
    "start": "255780",
    "end": "262740"
  },
  {
    "text": "system are down for a long enough time that might actually show you some regulatory action and those are quite",
    "start": "262740",
    "end": "268560"
  },
  {
    "text": "unsorry we kind of want to avoid that so in order to do this we kind of like try to try to stick to like",
    "start": "268560",
    "end": "276600"
  },
  {
    "text": "um best practices and we have like this cheese approach to like change management so uh we try to catch badge",
    "start": "276600",
    "end": "283320"
  },
  {
    "text": "changes but 10g is an error at multiple layer um could review",
    "start": "283320",
    "end": "288479"
  },
  {
    "text": "um two lack of CI pipeline uh having a staging environment that is actually quite close to the production",
    "start": "288479",
    "end": "294020"
  },
  {
    "text": "environmental editing but we kind of realized that we did not add anything after you deploy you basically deploy",
    "start": "294020",
    "end": "300900"
  },
  {
    "text": "and then it's it's a new except for like obviously a smaller thing so we kind of found environmental",
    "start": "300900",
    "end": "307919"
  },
  {
    "text": "deployment uh safer we wanted to reduce the connective overhead of like deploying and also to a lot of like",
    "start": "307919",
    "end": "314220"
  },
  {
    "text": "automation so just like continuous deployment in short I can make the point",
    "start": "314220",
    "end": "319320"
  },
  {
    "text": "safer and quicker um so we onboarding this uh Progressive volat initiative and the big idea at the",
    "start": "319320",
    "end": "325620"
  },
  {
    "text": "beginning were to move gradually move traffic gradually to a new version of the code of the club and also uh",
    "start": "325620",
    "end": "332880"
  },
  {
    "text": "automatically rolling back but a bad change if that happened um I need to do like a bit of",
    "start": "332880",
    "end": "339479"
  },
  {
    "start": "336000",
    "end": "336000"
  },
  {
    "text": "introduction about our Google ads so this is like stolen from the from the project documentation so algor alerts is a",
    "start": "339479",
    "end": "346259"
  },
  {
    "text": "kubernetes controller and set of CID which provide Advanced deployment capabilities such as blue green and",
    "start": "346259",
    "end": "351419"
  },
  {
    "text": "Canary Canary deployment and um what I got a Google ads more or",
    "start": "351419",
    "end": "356460"
  },
  {
    "text": "less is it's uh it can be used as a replacement of kubernetes native",
    "start": "356460",
    "end": "361680"
  },
  {
    "text": "development objects that basically essentially provide uh more feature and you know those uh Advanced",
    "start": "361680",
    "end": "368639"
  },
  {
    "text": "um deployment capabilities such as doing uh staged stage rollout to kind of ring",
    "start": "368639",
    "end": "374699"
  },
  {
    "text": "and things like that but in essence it can be used either as a replacement for kubernetes Native deployment or",
    "start": "374699",
    "end": "382259"
  },
  {
    "text": "alongside them by essentially referencing an existing deployment uh development objects",
    "start": "382259",
    "end": "389600"
  },
  {
    "text": "so this slide is a bit like there's a lot of things going on um what I really wanted to like convey",
    "start": "389600",
    "end": "395699"
  },
  {
    "text": "here is you have the rollout controller that's basically managed a different followed object but the central thing of",
    "start": "395699",
    "end": "402600"
  },
  {
    "text": "um I go out are the rollout objects like like I say can be used as a replacement",
    "start": "402600",
    "end": "408539"
  },
  {
    "text": "for like Community native deployments that's why you default you can Define like your um spec",
    "start": "408539",
    "end": "415199"
  },
  {
    "text": "um annotations but also where you define what's the deployment strategies would be like like for example a canary",
    "start": "415199",
    "end": "421639"
  },
  {
    "text": "shift traffic 10 for like the first five minutes and then like 100 after that and that where you define",
    "start": "421639",
    "end": "430020"
  },
  {
    "text": "all those things that's also where you can Define like some analysis so an",
    "start": "430020",
    "end": "435300"
  },
  {
    "text": "analysis essentially like a condition uh using some Metric providers some metal",
    "start": "435300",
    "end": "441360"
  },
  {
    "text": "provider in our case permitters or you cannot Define rules such as a rollback if",
    "start": "441360",
    "end": "447599"
  },
  {
    "text": "um you know that metric is above a certain threshold for like a couple of this amount of time and so",
    "start": "447599",
    "end": "453300"
  },
  {
    "text": "on and so on so yeah in essence that's basically what a Google ads look like if you've been to",
    "start": "453300",
    "end": "459479"
  },
  {
    "text": "the workshop yes or yesterday you probably played with it and you put them so you played with it a little bit and",
    "start": "459479",
    "end": "464580"
  },
  {
    "text": "that basically all there is to it which is great so great and simple tool",
    "start": "464580",
    "end": "469740"
  },
  {
    "text": "um and what did we decided to choose our goal a lot in the first place is uh",
    "start": "469740",
    "end": "474840"
  },
  {
    "start": "474000",
    "end": "474000"
  },
  {
    "text": "because it was easy to understand and experiment with uh very well maintained and well documented and it kind of had",
    "start": "474840",
    "end": "482220"
  },
  {
    "text": "this kind of like Plug and Play quality to it as you can just like install it alongside your like existing cluster",
    "start": "482220",
    "end": "488460"
  },
  {
    "text": "Oculus has like I said very big very complex we pushed a lot of like business logic at the community level especially",
    "start": "488460",
    "end": "495240"
  },
  {
    "text": "every single related security um we have like a custom like Network isolation capability built into",
    "start": "495240",
    "end": "502860"
  },
  {
    "text": "I was a community leader at monzo but even through all of that you can just easily add a Google out and you don't",
    "start": "502860",
    "end": "510720"
  },
  {
    "text": "need much requirements for it to be working fine it worked better if you have like a service mesh that allow you",
    "start": "510720",
    "end": "516479"
  },
  {
    "text": "to do like final grain uh traffic shaping",
    "start": "516479",
    "end": "521240"
  },
  {
    "text": "I find our grain traffic shaping but even if you don't have a service mesh it will work like traffic shipping still",
    "start": "523200",
    "end": "528540"
  },
  {
    "text": "work it's just like a bit more accounts and it's highly customizable you can basically Define a custom rule for each",
    "start": "528540",
    "end": "534240"
  },
  {
    "text": "of your like rollouts for each of the services which is what we are looking for in the first place",
    "start": "534240",
    "end": "540360"
  },
  {
    "text": "um so now we need to talk a little bit about like our journey how we uh all we did get to automatically roll back at",
    "start": "540360",
    "end": "545640"
  },
  {
    "text": "monzo um the first thing is a bit of a bait and switch so I talk about kind of being a bit so coloring is other one economic",
    "start": "545640",
    "end": "553140"
  },
  {
    "start": "546000",
    "end": "546000"
  },
  {
    "text": "deployment is when you shift traffic like progressively uh to a new version of the oven up",
    "start": "553140",
    "end": "558839"
  },
  {
    "text": "um and that's why we're looking for in the first place but then we ask ourselves the question is that really what we want is that really what we",
    "start": "558839",
    "end": "564600"
  },
  {
    "text": "needed because we're going from like a really simple process of you know engineering and not having to like think",
    "start": "564600",
    "end": "570300"
  },
  {
    "text": "about that could be rolled back uh you only have like one couple of assumptions you",
    "start": "570300",
    "end": "575940"
  },
  {
    "text": "only have like one version of the code like running the cluster and so on and so on so something much more complex and",
    "start": "575940",
    "end": "581820"
  },
  {
    "text": "there was a clear need to like you know educate engineer and the rest of the of the org and those are consistential",
    "start": "581820",
    "end": "587519"
  },
  {
    "text": "tooling and we're like is that really what we want is that really what we need",
    "start": "587519",
    "end": "592620"
  },
  {
    "text": "right now um by the way this illustration is made with Daddy which is a game changer when",
    "start": "592620",
    "end": "598019"
  },
  {
    "text": "you actually need to put illustration in in your like presentation and as you can",
    "start": "598019",
    "end": "603120"
  },
  {
    "text": "see with this kind of fluently giant Canadian giant cage",
    "start": "603120",
    "end": "608200"
  },
  {
    "text": "[Music] so um you know reviewing canopy deployment we're like active what we care is",
    "start": "608200",
    "end": "615480"
  },
  {
    "start": "610000",
    "end": "610000"
  },
  {
    "text": "reducing the impact of a bad change and what we're really actually looking",
    "start": "615480",
    "end": "621120"
  },
  {
    "text": "for is automated rollbacks so that's what we decided to implement first we kind of using a blue green like strategy",
    "start": "621120",
    "end": "628500"
  },
  {
    "text": "at the moment it still use Argo canopy strategy except you still go straight to",
    "start": "628500",
    "end": "634019"
  },
  {
    "text": "100 of the shift the new version to the 100 of the traffic but you have this",
    "start": "634019",
    "end": "640680"
  },
  {
    "text": "analysis period where you basically run the stack to know if you need to roll back or not and we did that to basically",
    "start": "640680",
    "end": "647339"
  },
  {
    "text": "allow for us to move to real Canary in the future because we got most of the infrastructure in most of the work in",
    "start": "647339",
    "end": "655019"
  },
  {
    "text": "place to be able to do that basically going instead going from like ruling updates strategy to just having",
    "start": "655019",
    "end": "661200"
  },
  {
    "text": "automated rollback and later on move to um canary",
    "start": "661200",
    "end": "666540"
  },
  {
    "start": "666000",
    "end": "666000"
  },
  {
    "text": "and this is what the deployment workflow look in this new world essentially and essentially an engineer started",
    "start": "666540",
    "end": "672660"
  },
  {
    "text": "deployment that updates the World objects the new version of the app become live then for like a short period",
    "start": "672660",
    "end": "680399"
  },
  {
    "text": "of time this is analysis step uh where like the different rules like because",
    "start": "680399",
    "end": "685920"
  },
  {
    "text": "I'm rollback rules um evaluated and if the successful the engine is notified of",
    "start": "685920",
    "end": "690959"
  },
  {
    "text": "success we do that in slack because we also like um we use basically a lot of",
    "start": "690959",
    "end": "696180"
  },
  {
    "text": "flag stack UPS we have a lot of processes in slack and if it's not if",
    "start": "696180",
    "end": "701339"
  },
  {
    "text": "there is one of the rules actually evaluate to false we automatically roll back to previous version where we notify",
    "start": "701339",
    "end": "708480"
  },
  {
    "text": "the engineer and the team um this workflow allows us to choose a",
    "start": "708480",
    "end": "713579"
  },
  {
    "text": "strategy uh the different strategy per service and per deployment so for each individual deployment that you make that",
    "start": "713579",
    "end": "720899"
  },
  {
    "text": "allow you to potentially change what type of Department you want do you want to donate it rollback do you want Canary",
    "start": "720899",
    "end": "726240"
  },
  {
    "text": "in do you want something more fancy in the future and that's what this flow allow us to do",
    "start": "726240",
    "end": "732140"
  },
  {
    "start": "732000",
    "end": "732000"
  },
  {
    "text": "so again this is probably not super interesting right now it's more like if you're reviewing this talk later on and want to like look more about the details",
    "start": "732140",
    "end": "739860"
  },
  {
    "text": "um this is what it looked like from like an architecture point of view so as I mentioned everything or the print pipeline is enrolled so we have a",
    "start": "739860",
    "end": "746820"
  },
  {
    "text": "service that basically generates a manifest and so you think Engineers use CLI tooling called cheaper to to get a",
    "start": "746820",
    "end": "754380"
  },
  {
    "text": "deployment that's trigger that's basically make one of the service create a new manifests for it put that negative",
    "start": "754380",
    "end": "760500"
  },
  {
    "text": "people and then this is applied to another like Services another service that applies that to kubernetes and",
    "start": "760500",
    "end": "767399"
  },
  {
    "text": "updates about objects and then creates a new replica set and so on so basically",
    "start": "767399",
    "end": "773459"
  },
  {
    "text": "this is just to prove that we actually use githubs and yeah there will be a complementary",
    "start": "773459",
    "end": "779760"
  },
  {
    "text": "blog post about this talk with like all the nice gritty technical details um but all the aspects of the work that",
    "start": "779760",
    "end": "786480"
  },
  {
    "text": "we did um for all of you yeah if you actually love the ammos um so that's what the tooling is look",
    "start": "786480",
    "end": "792959"
  },
  {
    "text": "like so at Momo we have like this philosophy of back-end Engineers should not know about the platform they should",
    "start": "792959",
    "end": "800040"
  },
  {
    "text": "be able to interact with it but they should not actually need to know things about you know kubernetes like",
    "start": "800040",
    "end": "805260"
  },
  {
    "text": "networking and or even Auto scanning um so we have this one tool called shipper",
    "start": "805260",
    "end": "810600"
  },
  {
    "text": "to deploy and the output is not super interesting here again here but what we just wanted to show you is you basically",
    "start": "810600",
    "end": "817260"
  },
  {
    "text": "just deploy by calling shipper giving it a commit Ash a name of service and",
    "start": "817260",
    "end": "822899"
  },
  {
    "text": "deploy it for you and we basically completely abstracted away Argo a lot our Google ads itself provide like great",
    "start": "822899",
    "end": "828959"
  },
  {
    "text": "tooling and great dashboard but we decided not to like expose that to our engineer and basically abstract all of",
    "start": "828959",
    "end": "834779"
  },
  {
    "text": "that away which basically required us to require to integrate with our goal out",
    "start": "834779",
    "end": "840180"
  },
  {
    "text": "in a slightly different way same thing here that's basically what our stack notification look like when you start a",
    "start": "840180",
    "end": "846540"
  },
  {
    "text": "deployment I basically tell you oh you started your payment with this strategy here's a dashboard to by the end the",
    "start": "846540",
    "end": "853079"
  },
  {
    "text": "logs if you want to see what's going on um and um you know and the notification",
    "start": "853079",
    "end": "858480"
  },
  {
    "text": "kind of success of a successful deployment or like failed deployments",
    "start": "858480",
    "end": "863700"
  },
  {
    "start": "863000",
    "end": "863000"
  },
  {
    "text": "um so I talk about rules and rollback rules so we actually started with only one",
    "start": "863700",
    "end": "870660"
  },
  {
    "text": "rule and we try to keep our rule as simple and generic as possible at the",
    "start": "870660",
    "end": "876240"
  },
  {
    "text": "moment all the services in our backend use assembled back rules uh so they have to be like quite generic",
    "start": "876240",
    "end": "883920"
  },
  {
    "text": "um and we started basically with um if the total um error rate of a facilities is above a",
    "start": "883920",
    "end": "891240"
  },
  {
    "text": "certain threshold then you need to uh to roll back um and about the rule themselves we",
    "start": "891240",
    "end": "897360"
  },
  {
    "text": "decided to basically tweak them and add them based on our incident handling",
    "start": "897360",
    "end": "902459"
  },
  {
    "text": "process so basically every time we have an incident or something that looked like an incident we of course have the",
    "start": "902459",
    "end": "908160"
  },
  {
    "text": "question should that be caught at deployment time of could that have been called a deployment and if yes would",
    "start": "908160",
    "end": "914699"
  },
  {
    "text": "have we made a rule to actually catch that issue the issue with like rules when you come to electron knowing an",
    "start": "914699",
    "end": "920399"
  },
  {
    "text": "automated rollback is a false positive is annoying for your engineers because the change the deployment is well back",
    "start": "920399",
    "end": "927899"
  },
  {
    "text": "customers should not see much problem hopefully but it's really annoying and it's not quite a growth ux and you don't",
    "start": "927899",
    "end": "935160"
  },
  {
    "text": "definitely want to avoid like a false negative where you're not rolling back where you actually really should",
    "start": "935160",
    "end": "941959"
  },
  {
    "text": "see so the takeaway here is basically if you're planning to move your entire",
    "start": "941959",
    "end": "948060"
  },
  {
    "start": "944000",
    "end": "944000"
  },
  {
    "text": "organization to something more complex like I'll go out do it in Step start as simple as possible you don't need to go",
    "start": "948060",
    "end": "954720"
  },
  {
    "text": "from like um you know simple process to something like state of the art with like very complex Canary strategy uh",
    "start": "954720",
    "end": "960959"
  },
  {
    "text": "just start with what actually matter for you org and in our case that was automated rollbacks",
    "start": "960959",
    "end": "966540"
  },
  {
    "text": "um ago is relatively easy to integrate as you can see with our Custom Custom",
    "start": "966540",
    "end": "972779"
  },
  {
    "text": "tooling because they provide a lot of thing out of the box like it will choose notification managing the ago rollout",
    "start": "972779",
    "end": "980060"
  },
  {
    "text": "other controller like metrics like the robot metrics and it's CLI and dashboard",
    "start": "980060",
    "end": "986760"
  },
  {
    "text": "are quite useful when you're like in development phase in the development phase now I'm going to talk a little bit",
    "start": "986760",
    "end": "993060"
  },
  {
    "text": "about audio actually migrate to our Google out and um as I mentioned before Argo",
    "start": "993060",
    "end": "999899"
  },
  {
    "start": "996000",
    "end": "996000"
  },
  {
    "text": "rollout allow you to do it in a manicure mental incremental fashion where the rollout objects essentially reference an",
    "start": "999899",
    "end": "1008000"
  },
  {
    "text": "existing deployment so the world object essentially defines the strategy and a",
    "start": "1008000",
    "end": "1013279"
  },
  {
    "text": "couple of other parameter but the put template spec and",
    "start": "1013279",
    "end": "1018500"
  },
  {
    "text": "everything related to the actual deployment is still on the deployment object and as well as just reference it",
    "start": "1018500",
    "end": "1025240"
  },
  {
    "text": "and this allowed to basically migrate travel ago a lot in a safe manner that's",
    "start": "1025240",
    "end": "1031100"
  },
  {
    "text": "avoid on time because you essentially just bring a new rollout object that reference the deployment object at that",
    "start": "1031100",
    "end": "1036678"
  },
  {
    "text": "point you have two replica sets one managed by the department Resource One managed by the world resource and then",
    "start": "1036679",
    "end": "1043760"
  },
  {
    "text": "you can safely decide to set the number of replicas deployments to zero so you",
    "start": "1043760",
    "end": "1049940"
  },
  {
    "text": "just have like a replica set both managed by the rollout object and doing this it's all over like you know",
    "start": "1049940",
    "end": "1055760"
  },
  {
    "text": "downtime immigration which is great and also doing it this way allow you to",
    "start": "1055760",
    "end": "1061100"
  },
  {
    "text": "easily revert uh reverse the process if you don't want uh wallet again or you're",
    "start": "1061100",
    "end": "1066320"
  },
  {
    "text": "just in an experimental phase um so that is great that is super easy to do Cube CTL command probably like two",
    "start": "1066320",
    "end": "1073580"
  },
  {
    "text": "three minutes relatively safe to do uh except as I mentioned earlier we have like 2 100",
    "start": "1073580",
    "end": "1079600"
  },
  {
    "text": "applications so we need to do that a lot more which kind of make us actually",
    "start": "1079600",
    "end": "1084980"
  },
  {
    "start": "1084000",
    "end": "1084000"
  },
  {
    "text": "there was a clear need to or to the automated process and through this automation we also decided to like",
    "start": "1084980",
    "end": "1091460"
  },
  {
    "text": "unsolve the tone Force even more safety because as I mentioned earlier we are regulated Bank who cannot really allow",
    "start": "1091460",
    "end": "1097940"
  },
  {
    "text": "downtime and um and also part of our like Company motto make money work for everyone and there is nothing more like",
    "start": "1097940",
    "end": "1104539"
  },
  {
    "text": "a scary for our customers and having the card not working in the supermarket because you know product is down",
    "start": "1104539",
    "end": "1111320"
  },
  {
    "text": "um so we wanted to make to make sure like we're extra safe and the world process is repeatable observable and",
    "start": "1111320",
    "end": "1117980"
  },
  {
    "text": "inappropants so that's what basically what the",
    "start": "1117980",
    "end": "1123620"
  },
  {
    "text": "immigration looked like for us is we first notify the service online stock we",
    "start": "1123620",
    "end": "1129140"
  },
  {
    "text": "create a new product object for that service that we're migrating with freezy deployments because we want to limit the",
    "start": "1129140",
    "end": "1135020"
  },
  {
    "text": "amount of change we'll be doing this process which is not available",
    "start": "1135020",
    "end": "1140740"
  },
  {
    "text": "and only then we decide to scale down the deployment to zero replica because we know that we have enough enough",
    "start": "1169640",
    "end": "1176539"
  },
  {
    "text": "rollout maybe we can manageable by the by the balance object um and we then checks that we don't have",
    "start": "1176539",
    "end": "1183740"
  },
  {
    "text": "any deployment pods um but managed by the depends object left and then if the",
    "start": "1183740",
    "end": "1189140"
  },
  {
    "text": "establish using HPI we switch the target of the HPR from the deployment to the rollout and for the deployment notify",
    "start": "1189140",
    "end": "1195380"
  },
  {
    "text": "people of owner of success um that is great so that's basically",
    "start": "1195380",
    "end": "1201140"
  },
  {
    "text": "what it the process looked like and we decided to like execute on it by going",
    "start": "1201140",
    "end": "1206480"
  },
  {
    "text": "before like a migrator part a migride immigrator pattern where essentially all the step I just described are",
    "start": "1206480",
    "end": "1212840"
  },
  {
    "text": "Independence um because certain other pattern that migrator said is that we're using uh",
    "start": "1212840",
    "end": "1219260"
  },
  {
    "text": "will we try all the steps",
    "start": "1219260",
    "end": "1222820"
  },
  {
    "text": "without so much services to migrate we only wanted to do them like doing business hours uh we want to spread the",
    "start": "1225100",
    "end": "1231559"
  },
  {
    "text": "immigration across like the entire day because we want to avoid adding too many too much per turn in a short amount of",
    "start": "1231559",
    "end": "1237740"
  },
  {
    "text": "time for example and just you know to basically control the amount of of risk",
    "start": "1237740",
    "end": "1243200"
  },
  {
    "text": "um and we yeah develop that through like immigration service where the user decide which side is to migrate and then",
    "start": "1243200",
    "end": "1249440"
  },
  {
    "text": "we are the Chrome every day that um [Music]",
    "start": "1249440",
    "end": "1254620"
  },
  {
    "text": "triggers immigration for the services and supporting them out through the to the day we did it by using your service",
    "start": "1254620",
    "end": "1262220"
  },
  {
    "text": "tiering so we went for like the lowest tier services to the IST services so the less important service to the most",
    "start": "1262220",
    "end": "1268220"
  },
  {
    "text": "important service and by the time we actually got to migrate our TSO services including you know The Ledger service",
    "start": "1268220",
    "end": "1274700"
  },
  {
    "text": "which is you know no big deal like just managing like 4 million quid um so you want that won't not be down",
    "start": "1274700",
    "end": "1282260"
  },
  {
    "text": "because if it's down all the payments um or the payment system is actually done",
    "start": "1282260",
    "end": "1287480"
  },
  {
    "text": "um by the time we got to those tiers there was hard disease we already immigrated with that process more than",
    "start": "1287480",
    "end": "1292960"
  },
  {
    "text": "1700 services so we were quite confident about it being quite safe",
    "start": "1292960",
    "end": "1299299"
  },
  {
    "text": "um so take away if make it safe automated like if you automate it",
    "start": "1299299",
    "end": "1304820"
  },
  {
    "text": "um you can unforce like some additional like safety and safety rules um obviously if you have like 10 or 20",
    "start": "1304820",
    "end": "1310460"
  },
  {
    "text": "application you can still do it by hand it's probably much quicker but as as if your like backend is like big enough",
    "start": "1310460",
    "end": "1316760"
  },
  {
    "text": "that might be worse actually um adding some automation um the migration is actually what took",
    "start": "1316760",
    "end": "1322940"
  },
  {
    "text": "the most time uh the act of integrating is actually what to do the most time because we had to do it slowly and",
    "start": "1322940",
    "end": "1329059"
  },
  {
    "text": "carefully um so and and where to invest in tooling and monitoring to make sure that we",
    "start": "1329059",
    "end": "1335000"
  },
  {
    "text": "could do this process safely so in terms of like deployment could be like half the time was just actually running the",
    "start": "1335000",
    "end": "1340700"
  },
  {
    "text": "immigration after we developed and developed everything um so what did we learn like moving to",
    "start": "1340700",
    "end": "1347419"
  },
  {
    "text": "agoral Art and running it at this scale um first of all some numbers because everyone like numbers so we have in our",
    "start": "1347419",
    "end": "1354559"
  },
  {
    "text": "production cluster right now 2143 rollouts um so",
    "start": "1354559",
    "end": "1361659"
  },
  {
    "text": "2143 Services running a production probably a couple more inside like this I did the slide like a week ago we have",
    "start": "1361659",
    "end": "1368840"
  },
  {
    "text": "seven rollback rules that cover like some things that are very specific to us but um are they enough to catch a large",
    "start": "1368840",
    "end": "1376640"
  },
  {
    "text": "class of large classes of problem and we've been running our Google ads in production for essentially every",
    "start": "1376640",
    "end": "1382580"
  },
  {
    "text": "services for like four months now which means we did 7000 production",
    "start": "1382580",
    "end": "1387980"
  },
  {
    "text": "deployment with a global out and 22 000 production deployments in staging because I told you it only did 27 000",
    "start": "1387980",
    "end": "1395120"
  },
  {
    "text": "production deployment per year but the truth is we did like more than 100 100K different staging last year",
    "start": "1395120",
    "end": "1403100"
  },
  {
    "text": "so yeah we have like we built like the confidence that our Google art is actually capable of operating at this",
    "start": "1403100",
    "end": "1408200"
  },
  {
    "text": "scale um and we are like 63 rollbacks um since we basically",
    "start": "1408200",
    "end": "1414260"
  },
  {
    "text": "um start using our Google out um yeah so a little bit like less than one",
    "start": "1414260",
    "end": "1419840"
  },
  {
    "text": "percent um a couple of them are like full uh for enough false positive that's why there",
    "start": "1419840",
    "end": "1427159"
  },
  {
    "text": "is a new equipment to actually kill your roads um so what about operating role with a",
    "start": "1427159",
    "end": "1433039"
  },
  {
    "start": "1430000",
    "end": "1430000"
  },
  {
    "text": "scale which is like the whole point of this presentation right um actually there was very little thing",
    "start": "1433039",
    "end": "1438440"
  },
  {
    "text": "for us to do it just kind of scaled uh really well with all kind of like unconventional architecture like it's",
    "start": "1438440",
    "end": "1445039"
  },
  {
    "text": "very unlikely that we have like one kubernetes that big and that many people out running when um but the aguilac",
    "start": "1445039",
    "end": "1452960"
  },
  {
    "text": "controller did not have any issue with our scale of like operation at monzo which was quite surprising we even had a",
    "start": "1452960",
    "end": "1459919"
  },
  {
    "text": "small incident in staging where we did like 5000 departments over the course of like three hours and it worked which is",
    "start": "1459919",
    "end": "1467240"
  },
  {
    "text": "great all the stuff broke black Primitives but because of the per term but other than that it actually worked",
    "start": "1467240",
    "end": "1473840"
  },
  {
    "text": "quite well at like this very large scale um there's a clinic to like share the",
    "start": "1473840",
    "end": "1478880"
  },
  {
    "text": "knowledge about our Google out because it's become a new critical component that your opt-in platform team need to",
    "start": "1478880",
    "end": "1484460"
  },
  {
    "text": "understand quite well um and as well as the rest of the organizations that need to understand that the process is a bit different now",
    "start": "1484460",
    "end": "1491539"
  },
  {
    "text": "um there are still one little performance issue about leftover like analysis for an objects but we are in",
    "start": "1491539",
    "end": "1497539"
  },
  {
    "text": "the case and we hope to be able to push a PR like soonish to actually fix that issue",
    "start": "1497539",
    "end": "1502820"
  },
  {
    "text": "um and uh yeah and it's important to invest into our lighting and observability",
    "start": "1502820",
    "end": "1509260"
  },
  {
    "text": "from when operating ago Alert in general and especially at this scale and that",
    "start": "1509260",
    "end": "1514580"
  },
  {
    "text": "the project make it easy because it already provide like most of the metrics you can think of that you would want to",
    "start": "1514580",
    "end": "1520340"
  },
  {
    "text": "to monitor um would we do it again and should you",
    "start": "1520340",
    "end": "1526100"
  },
  {
    "text": "the answer to that fast but the question is yes and the answer and for the other question yes as well so for us it was a",
    "start": "1526100",
    "end": "1533240"
  },
  {
    "text": "clear positive outcome uh we would use connective uh the connective load of like deploying we catch loads of issue",
    "start": "1533240",
    "end": "1538640"
  },
  {
    "text": "across like tons of deployments uh we're quite happy with what we got in return",
    "start": "1538640",
    "end": "1544039"
  },
  {
    "text": "and and also with all easy it was to act to this set it set it up in given the",
    "start": "1544039",
    "end": "1550940"
  },
  {
    "text": "amount of customization and you know like business specific stuff that is",
    "start": "1550940",
    "end": "1556100"
  },
  {
    "text": "running in our cluster um and it's a nice addition for like um swiss cheese approach like that one's",
    "start": "1556100",
    "end": "1562820"
  },
  {
    "text": "in-depth strategy to control from Bad changes and the most important thing is",
    "start": "1562820",
    "end": "1568640"
  },
  {
    "text": "like Engineers actually love it so this is one feedback that we got from backend engineer",
    "start": "1568640",
    "end": "1574820"
  },
  {
    "text": "um that's basically got paid for initiative deployment and it was automatically rolled back in I think less than a minute",
    "start": "1574820",
    "end": "1580400"
  },
  {
    "text": "uh and that would have been like a rather nasty um and nasty problem with basically the",
    "start": "1580400",
    "end": "1586700"
  },
  {
    "text": "MasterCard 3DS processor and on our end that would have [Music] um",
    "start": "1586700",
    "end": "1592940"
  },
  {
    "text": "um predicted like every every request which we basically mean that a customer",
    "start": "1592940",
    "end": "1598039"
  },
  {
    "text": "will not be able to pay with a monzo carbon line for the duration of that incident but that was automatically",
    "start": "1598039",
    "end": "1604880"
  },
  {
    "text": "reverted within within one minute um and yeah thanks you very much for",
    "start": "1604880",
    "end": "1610279"
  },
  {
    "text": "listening to me uh we have a sometime for like a few questions if you",
    "start": "1610279",
    "end": "1615440"
  },
  {
    "text": "have any and like I mentioned earlier like um we will do like a complimentary blog post with all the actual technical",
    "start": "1615440",
    "end": "1621980"
  },
  {
    "text": "detail of how we enabled um the different aspect of this migration and our setup and if you have",
    "start": "1621980",
    "end": "1628279"
  },
  {
    "text": "any question in general about the gritty details please um you know grab me after",
    "start": "1628279",
    "end": "1634220"
  },
  {
    "text": "this got me doing the conference any any questions",
    "start": "1634220",
    "end": "1639940"
  },
  {
    "text": "yes",
    "start": "1639980",
    "end": "1642640"
  },
  {
    "text": "um I yeah I kind of um I got the essence of what you're asking",
    "start": "1657679",
    "end": "1663740"
  },
  {
    "text": "about so about the the migration process when we scale up and down the difference exactly yeah so when you're scaling up",
    "start": "1663740",
    "end": "1670340"
  },
  {
    "text": "and down the deployment versus rollout I think sometimes what I've heard is that there can be some kind of cast repercussions because you have two",
    "start": "1670340",
    "end": "1676100"
  },
  {
    "text": "workloads you know that are both scaled up fully or you have to have downtime to scale one down to roll out the the",
    "start": "1676100",
    "end": "1682400"
  },
  {
    "text": "rollout um did you guys was that ever a conversation in terms of that process especially with the scale that you guys",
    "start": "1682400",
    "end": "1688400"
  },
  {
    "text": "were rolling out these micro services at uh so the question is like was it was it",
    "start": "1688400",
    "end": "1694100"
  },
  {
    "text": "a problem for us in general yeah I guess was it was it a topic of conversation like a concern about maybe like lack of",
    "start": "1694100",
    "end": "1700520"
  },
  {
    "text": "resources in duplicating these workloads or something um so we kind of like didn't add that much of the problem",
    "start": "1700520",
    "end": "1706220"
  },
  {
    "text": "because um due to the nature of what we are like a bank we basically run with a lot of",
    "start": "1706220",
    "end": "1713840"
  },
  {
    "text": "overhead in our clusters so we had like a loads of like uh capacity um capacity left over like the whole",
    "start": "1713840",
    "end": "1719720"
  },
  {
    "text": "point of doing this migration you know flexibility is bringing out immigration across like the entire day is to make",
    "start": "1719720",
    "end": "1725539"
  },
  {
    "text": "sure like you know to control for those kind of problem where yeah sure you're gonna run double the workload for like a",
    "start": "1725539",
    "end": "1731539"
  },
  {
    "text": "short amount of time for a couple of minutes and if you spread them out you know across across the day uh for",
    "start": "1731539",
    "end": "1737059"
  },
  {
    "text": "example for lowest tier Services we did batch of 200 like spread out of like eight hours which basically means you",
    "start": "1737059",
    "end": "1742460"
  },
  {
    "text": "have like one migration every five ten minutes and the immigration process itself only",
    "start": "1742460",
    "end": "1747860"
  },
  {
    "text": "lasts for like two three minutes so that's all we control for it and that's why we you know decided to go slow to be",
    "start": "1747860",
    "end": "1754760"
  },
  {
    "text": "to be extra safe but yeah indeed that's something to take care of because you don't and that also the wordpad about",
    "start": "1754760",
    "end": "1761299"
  },
  {
    "text": "doing this Amigo top having this migrator pattern and checking that we are the right number of posts that we're",
    "start": "1761299",
    "end": "1767360"
  },
  {
    "text": "expecting um because for very very large deployment um with like 500 bulbs sometimes it",
    "start": "1767360",
    "end": "1773899"
  },
  {
    "text": "would take like a couple of free tries to you know it would take time for us to actually um come up due to scheduling pressure so",
    "start": "1773899",
    "end": "1781640"
  },
  {
    "text": "yeah that's why we yeah thank you 17 seconds any question",
    "start": "1781640",
    "end": "1789940"
  },
  {
    "text": "okay cool perfect uh well thank you very much thank you very much and",
    "start": "1790760",
    "end": "1797799"
  }
]