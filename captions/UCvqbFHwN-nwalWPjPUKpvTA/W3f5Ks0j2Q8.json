[
  {
    "text": "all",
    "start": "0",
    "end": "719"
  },
  {
    "text": "right hello everybody um welcome",
    "start": "719",
    "end": "4040"
  },
  {
    "text": "um we're gonna talk about core DNS today",
    "start": "4040",
    "end": "6799"
  },
  {
    "text": "so I hope you're in the right place um",
    "start": "6799",
    "end": "9040"
  },
  {
    "text": "my name is John Belame i'm with Google",
    "start": "9040",
    "end": "11519"
  },
  {
    "text": "and uh uh my name is Yang uh I'm working",
    "start": "11519",
    "end": "14639"
  },
  {
    "text": "for Cord DNS",
    "start": "14639",
    "end": "16960"
  },
  {
    "text": "yeah um",
    "start": "16960",
    "end": "19880"
  },
  {
    "text": "so you're probably a little bit familiar",
    "start": "19880",
    "end": "22560"
  },
  {
    "text": "with cordns at least because most of you",
    "start": "22560",
    "end": "24560"
  },
  {
    "text": "are here for Kubernetes and uh core DNS",
    "start": "24560",
    "end": "27279"
  },
  {
    "text": "is the default DNS server in uh in",
    "start": "27279",
    "end": "29800"
  },
  {
    "text": "Kubernetes um but it is it is more than",
    "start": "29800",
    "end": "32398"
  },
  {
    "text": "that it is um a general purpose DNS",
    "start": "32399",
    "end": "35200"
  },
  {
    "text": "server pretty much everything but a",
    "start": "35200",
    "end": "36960"
  },
  {
    "text": "recursive DNS server although there's",
    "start": "36960",
    "end": "38320"
  },
  {
    "text": "ways to make it that too",
    "start": "38320",
    "end": "40440"
  },
  {
    "text": "um so it's an authoritative DNS server",
    "start": "40440",
    "end": "43440"
  },
  {
    "text": "primarily but it's um you know it it's a",
    "start": "43440",
    "end": "46719"
  },
  {
    "text": "little different than than your",
    "start": "46719",
    "end": "48239"
  },
  {
    "text": "traditional uh bind type of thing",
    "start": "48239",
    "end": "51039"
  },
  {
    "text": "because we are written in Go which is a",
    "start": "51039",
    "end": "54000"
  },
  {
    "text": "memory safe language uh a lot of people",
    "start": "54000",
    "end": "57280"
  },
  {
    "text": "had a lot of CVES in bind and uh so one",
    "start": "57280",
    "end": "60239"
  },
  {
    "text": "of the reasons that cordiness exists is",
    "start": "60239",
    "end": "62079"
  },
  {
    "text": "for that but more interestingly it",
    "start": "62079",
    "end": "64640"
  },
  {
    "text": "exists because of the level of",
    "start": "64640",
    "end": "66799"
  },
  {
    "text": "flexibility it offers so it's really",
    "start": "66799",
    "end": "69680"
  },
  {
    "text": "really easy to build integrations of",
    "start": "69680",
    "end": "72880"
  },
  {
    "text": "cordns with other backends so sure we",
    "start": "72880",
    "end": "75840"
  },
  {
    "text": "support zone files sure we support",
    "start": "75840",
    "end": "78479"
  },
  {
    "text": "Kubernetes as a backend um but it's",
    "start": "78479",
    "end": "81439"
  },
  {
    "text": "super easy to build other support and uh",
    "start": "81439",
    "end": "84159"
  },
  {
    "text": "in a few minutes Yang is going to show",
    "start": "84159",
    "end": "86000"
  },
  {
    "text": "you how to do that um but uh uh",
    "start": "86000",
    "end": "90840"
  },
  {
    "text": "essentially you know it's just a few you",
    "start": "90840",
    "end": "95040"
  },
  {
    "text": "know obviously it depends on how",
    "start": "95040",
    "end": "96240"
  },
  {
    "text": "complicated your back end is but it's",
    "start": "96240",
    "end": "97520"
  },
  {
    "text": "just a few lines of code in general uh",
    "start": "97520",
    "end": "100400"
  },
  {
    "text": "today because of it so easy we support a",
    "start": "100400",
    "end": "102560"
  },
  {
    "text": "bunch of different backends um with as I",
    "start": "102560",
    "end": "105040"
  },
  {
    "text": "said file being the biggest one zone",
    "start": "105040",
    "end": "107280"
  },
  {
    "text": "files and then kubernetes actually",
    "start": "107280",
    "end": "108720"
  },
  {
    "text": "probably kubernetes is more widely used",
    "start": "108720",
    "end": "110240"
  },
  {
    "text": "than file um which means we back using",
    "start": "110240",
    "end": "114079"
  },
  {
    "text": "the kubernetes api um And uh but you can",
    "start": "114079",
    "end": "118240"
  },
  {
    "text": "also do back directly um be backed",
    "start": "118240",
    "end": "121920"
  },
  {
    "text": "directly by like your cloud provers uh",
    "start": "121920",
    "end": "124479"
  },
  {
    "text": "DNS service so essentially we can",
    "start": "124479",
    "end": "126240"
  },
  {
    "text": "provide a caching layer um for those um",
    "start": "126240",
    "end": "130479"
  },
  {
    "text": "reading from their APIs rather than from",
    "start": "130479",
    "end": "132319"
  },
  {
    "text": "their upstream",
    "start": "132319",
    "end": "134599"
  },
  {
    "text": "DNS",
    "start": "134599",
    "end": "136120"
  },
  {
    "text": "um as a community we're pretty I mean",
    "start": "136120",
    "end": "139680"
  },
  {
    "text": "there's 387 contributors but actively",
    "start": "139680",
    "end": "142959"
  },
  {
    "text": "there's just a handful of people it's",
    "start": "142959",
    "end": "144560"
  },
  {
    "text": "pretty small friendly place so if you",
    "start": "144560",
    "end": "146400"
  },
  {
    "text": "are interested in this um and I'll I'll",
    "start": "146400",
    "end": "149440"
  },
  {
    "text": "I'll go through in detail some recent um",
    "start": "149440",
    "end": "153040"
  },
  {
    "text": "things that contributors added that are",
    "start": "153040",
    "end": "154720"
  },
  {
    "text": "are pretty cool but um the you know",
    "start": "154720",
    "end": "157680"
  },
  {
    "text": "we're we're very welcoming as a as a",
    "start": "157680",
    "end": "160000"
  },
  {
    "text": "project um and uh it's pretty easy to",
    "start": "160000",
    "end": "163120"
  },
  {
    "text": "get to get involved",
    "start": "163120",
    "end": "166200"
  },
  {
    "text": "um and uh I think now I'll hand it off",
    "start": "166200",
    "end": "169440"
  },
  {
    "text": "to Yang who's going to talk a little bit",
    "start": "169440",
    "end": "170800"
  },
  {
    "text": "about how you might extend it uh and",
    "start": "170800",
    "end": "173440"
  },
  {
    "text": "then I'll talk about like I said some",
    "start": "173440",
    "end": "175440"
  },
  {
    "text": "new things that are in there and we'll",
    "start": "175440",
    "end": "176640"
  },
  {
    "text": "then we'll leave some time for Q&A",
    "start": "176640",
    "end": "180599"
  },
  {
    "text": "okay thanks J for introduction so I'm",
    "start": "180640",
    "end": "183040"
  },
  {
    "text": "going to walk through a demo plugin",
    "start": "183040",
    "end": "185760"
  },
  {
    "text": "you're going to say what exactly is this",
    "start": "185760",
    "end": "187280"
  },
  {
    "text": "plug-in doing this plugin is doing a",
    "start": "187280",
    "end": "189360"
  },
  {
    "text": "very simple thing uh this is actually",
    "start": "189360",
    "end": "192239"
  },
  {
    "text": "one of the most requested features by",
    "start": "192239",
    "end": "194480"
  },
  {
    "text": "the community many times people come to",
    "start": "194480",
    "end": "196720"
  },
  {
    "text": "us and say okay I have a network my",
    "start": "196720",
    "end": "199440"
  },
  {
    "text": "network is like internal network but I",
    "start": "199440",
    "end": "202319"
  },
  {
    "text": "have a DNS server that's going to serve",
    "start": "202319",
    "end": "204239"
  },
  {
    "text": "both internal network at the outside I",
    "start": "204239",
    "end": "207440"
  },
  {
    "text": "do want a way to differentiate those uh",
    "start": "207440",
    "end": "209920"
  },
  {
    "text": "internal and external networks so if",
    "start": "209920",
    "end": "212239"
  },
  {
    "text": "it's internal I'm going to return one IP",
    "start": "212239",
    "end": "214560"
  },
  {
    "text": "address for uh DNS requests and if it's",
    "start": "214560",
    "end": "218080"
  },
  {
    "text": "external I'm going to return another IP",
    "start": "218080",
    "end": "219760"
  },
  {
    "text": "which is pretty straightforward right",
    "start": "219760",
    "end": "222239"
  },
  {
    "text": "many people requested a lot of times uh",
    "start": "222239",
    "end": "225519"
  },
  {
    "text": "I'm going to show this how you can do",
    "start": "225519",
    "end": "227840"
  },
  {
    "text": "that with Golang because many people",
    "start": "227840",
    "end": "229680"
  },
  {
    "text": "come to us say okay can you make a",
    "start": "229680",
    "end": "232000"
  },
  {
    "text": "plug-in or can you",
    "start": "232000",
    "end": "234560"
  },
  {
    "text": "uh allow us to uh achieve this goal with",
    "start": "234560",
    "end": "238000"
  },
  {
    "text": "some you know configuration files but",
    "start": "238000",
    "end": "240799"
  },
  {
    "text": "eventually we have some debate about if",
    "start": "240799",
    "end": "243439"
  },
  {
    "text": "it's worth effort to write a plug-in",
    "start": "243439",
    "end": "245360"
  },
  {
    "text": "because the the plug-in the complexity",
    "start": "245360",
    "end": "248080"
  },
  {
    "text": "of how exact exactly going to handle",
    "start": "248080",
    "end": "250400"
  },
  {
    "text": "different configuration is going to be a",
    "start": "250400",
    "end": "252000"
  },
  {
    "text": "little convoluted so we say okay maybe",
    "start": "252000",
    "end": "254159"
  },
  {
    "text": "we can show a uh plugin write a plug-in",
    "start": "254159",
    "end": "257759"
  },
  {
    "text": "in Golang and see how easy that is",
    "start": "257759",
    "end": "260160"
  },
  {
    "text": "actually that one took me I think it",
    "start": "260160",
    "end": "262880"
  },
  {
    "text": "took me one day to get this one done yes",
    "start": "262880",
    "end": "265280"
  },
  {
    "text": "and you probably can get everything done",
    "start": "265280",
    "end": "267680"
  },
  {
    "text": "with less than one day maybe a couple",
    "start": "267680",
    "end": "269440"
  },
  {
    "text": "hours okay so as as as you can see this",
    "start": "269440",
    "end": "273520"
  },
  {
    "text": "is how this plug-in is going to serve",
    "start": "273520",
    "end": "276320"
  },
  {
    "text": "your uh serve your network DS entry you",
    "start": "276320",
    "end": "280880"
  },
  {
    "text": "have internal network that's going to",
    "start": "280880",
    "end": "282800"
  },
  {
    "text": "start with 172 uh prefix of 172 you have",
    "start": "282800",
    "end": "286720"
  },
  {
    "text": "external network that's can be anything",
    "start": "286720",
    "end": "288960"
  },
  {
    "text": "and you have a putting a server sitting",
    "start": "288960",
    "end": "292000"
  },
  {
    "text": "on the edge serving both inside and",
    "start": "292000",
    "end": "293919"
  },
  {
    "text": "outside if uh your network is going to",
    "start": "293919",
    "end": "297280"
  },
  {
    "text": "receive a DNS query of the same name and",
    "start": "297280",
    "end": "300400"
  },
  {
    "text": "if it's the traffic is coming from the",
    "start": "300400",
    "end": "303600"
  },
  {
    "text": "internal you're going to return",
    "start": "303600",
    "end": "305479"
  },
  {
    "text": "1.1.1.1 this is a faked IP anyway right",
    "start": "305479",
    "end": "308960"
  },
  {
    "text": "just give you example and if it's",
    "start": "308960",
    "end": "311039"
  },
  {
    "text": "external you're going to return 8.8.8.8",
    "start": "311039",
    "end": "314000"
  },
  {
    "text": "eight fairly straightforward so how do",
    "start": "314000",
    "end": "316960"
  },
  {
    "text": "we achieve this goal so there are only",
    "start": "316960",
    "end": "319680"
  },
  {
    "text": "three function you need to implement the",
    "start": "319680",
    "end": "322240"
  },
  {
    "text": "first function is to it's called init",
    "start": "322240",
    "end": "324639"
  },
  {
    "text": "function acc me function is going to",
    "start": "324639",
    "end": "327039"
  },
  {
    "text": "perform a one-time initialization and",
    "start": "327039",
    "end": "329840"
  },
  {
    "text": "register the setup function with caddy",
    "start": "329840",
    "end": "333039"
  },
  {
    "text": "and the setup function is a second",
    "start": "333039",
    "end": "334960"
  },
  {
    "text": "function you are going to uh handle that",
    "start": "334960",
    "end": "338160"
  },
  {
    "text": "is to pass a configuration file because",
    "start": "338160",
    "end": "340240"
  },
  {
    "text": "you do have some very minimal",
    "start": "340240",
    "end": "342080"
  },
  {
    "text": "configuration to say what you want to",
    "start": "342080",
    "end": "343759"
  },
  {
    "text": "pass and uh it add a handler and it will",
    "start": "343759",
    "end": "347039"
  },
  {
    "text": "be called once for each of the plugin in",
    "start": "347039",
    "end": "349199"
  },
  {
    "text": "the core file and that's it you'll set",
    "start": "349199",
    "end": "351360"
  },
  {
    "text": "up the uh plug-in but finally how",
    "start": "351360",
    "end": "354400"
  },
  {
    "text": "exactly your plug-in is going to handle",
    "start": "354400",
    "end": "356560"
  },
  {
    "text": "or process DNS requests that's a key",
    "start": "356560",
    "end": "358960"
  },
  {
    "text": "right it's also very fairly",
    "start": "358960",
    "end": "360800"
  },
  {
    "text": "straightforward there's only one",
    "start": "360800",
    "end": "362080"
  },
  {
    "text": "function called the serve DNS this",
    "start": "362080",
    "end": "364880"
  },
  {
    "text": "function will process the DNS request uh",
    "start": "364880",
    "end": "368160"
  },
  {
    "text": "after you receive request you can decide",
    "start": "368160",
    "end": "370080"
  },
  {
    "text": "what to do you can either uh reply back",
    "start": "370080",
    "end": "373440"
  },
  {
    "text": "with a response or if you say this is",
    "start": "373440",
    "end": "377120"
  },
  {
    "text": "not my domain I don't know what to do",
    "start": "377120",
    "end": "379280"
  },
  {
    "text": "with that you can pass the request to",
    "start": "379280",
    "end": "382000"
  },
  {
    "text": "the next chain of the plug-in so you",
    "start": "382000",
    "end": "385199"
  },
  {
    "text": "just say I don't know how to handle that",
    "start": "385199",
    "end": "386800"
  },
  {
    "text": "someone else will take care of that and",
    "start": "386800",
    "end": "388319"
  },
  {
    "text": "that's it uh I'm going to show the code",
    "start": "388319",
    "end": "391440"
  },
  {
    "text": "the whole code of how exactly this is",
    "start": "391440",
    "end": "393440"
  },
  {
    "text": "being done as you can see the init",
    "start": "393440",
    "end": "395520"
  },
  {
    "text": "function is straightforward this is",
    "start": "395520",
    "end": "397360"
  },
  {
    "text": "nothing just a stop function to say this",
    "start": "397360",
    "end": "399919"
  },
  {
    "text": "is uh demo plugin with a server type of",
    "start": "399919",
    "end": "404199"
  },
  {
    "text": "DNS and the second function that's a",
    "start": "404199",
    "end": "406800"
  },
  {
    "text": "setup setup is going to pass the core",
    "start": "406800",
    "end": "409840"
  },
  {
    "text": "file but because this is a demo plug-in",
    "start": "409840",
    "end": "412400"
  },
  {
    "text": "we don't have lot of configurations we",
    "start": "412400",
    "end": "414720"
  },
  {
    "text": "just say let's just pass the simple",
    "start": "414720",
    "end": "418240"
  },
  {
    "text": "standard core file without anything okay",
    "start": "418240",
    "end": "420720"
  },
  {
    "text": "so that's several lines of code again",
    "start": "420720",
    "end": "424720"
  },
  {
    "text": "uh now we move to the served DNS which",
    "start": "424720",
    "end": "427440"
  },
  {
    "text": "is the key of this plug-in so how",
    "start": "427440",
    "end": "430400"
  },
  {
    "text": "exactly you're going to do that uh you",
    "start": "430400",
    "end": "432960"
  },
  {
    "text": "take a state which is going to be",
    "start": "432960",
    "end": "434400"
  },
  {
    "text": "request you get a state and then with a",
    "start": "434400",
    "end": "436800"
  },
  {
    "text": "state You can get the name of the query",
    "start": "436800",
    "end": "439919"
  },
  {
    "text": "that's a Q name now you can decide what",
    "start": "439919",
    "end": "442800"
  },
  {
    "text": "to do with that in this function as you",
    "start": "442800",
    "end": "445039"
  },
  {
    "text": "can see we are going to reply with",
    "start": "445039",
    "end": "448000"
  },
  {
    "text": "either",
    "start": "448000",
    "end": "449160"
  },
  {
    "text": "1.1.1.1 or",
    "start": "449160",
    "end": "451479"
  },
  {
    "text": "8.8.8.8 depending on the IP address of",
    "start": "451479",
    "end": "455759"
  },
  {
    "text": "the query the source IP of a query and",
    "start": "455759",
    "end": "458639"
  },
  {
    "text": "that's it as you can see only one two",
    "start": "458639",
    "end": "461479"
  },
  {
    "text": "three four five six seven eight lines of",
    "start": "461479",
    "end": "465039"
  },
  {
    "text": "code of course that's uh pretty much it",
    "start": "465039",
    "end": "468960"
  },
  {
    "text": "i actually added uh print line function",
    "start": "468960",
    "end": "472319"
  },
  {
    "text": "just to let us see how exactly this is",
    "start": "472319",
    "end": "476080"
  },
  {
    "text": "going to play out but if you try this",
    "start": "476080",
    "end": "477680"
  },
  {
    "text": "one you're going to see it fairly",
    "start": "477680",
    "end": "479039"
  },
  {
    "text": "straightforward and that's it like I",
    "start": "479039",
    "end": "480800"
  },
  {
    "text": "said I spent one day but you probably",
    "start": "480800",
    "end": "482479"
  },
  {
    "text": "can spend maybe like a 20 minutes to get",
    "start": "482479",
    "end": "485599"
  },
  {
    "text": "everything done",
    "start": "485599",
    "end": "487080"
  },
  {
    "text": "right okay so now you say okay I have a",
    "start": "487080",
    "end": "490720"
  },
  {
    "text": "plug-in how exactly am I supposed to",
    "start": "490720",
    "end": "493280"
  },
  {
    "text": "configure that because we said this is a",
    "start": "493280",
    "end": "495440"
  },
  {
    "text": "demo plug-in so you really don't have a",
    "start": "495440",
    "end": "497440"
  },
  {
    "text": "lot of configuration if it happens that",
    "start": "497440",
    "end": "500400"
  },
  {
    "text": "you do need a lot of reconfigurations",
    "start": "500400",
    "end": "502319"
  },
  {
    "text": "you may need to make a little",
    "start": "502319",
    "end": "504319"
  },
  {
    "text": "complicated on the setup part passer but",
    "start": "504319",
    "end": "507360"
  },
  {
    "text": "for now it's just a demo plugin you set",
    "start": "507360",
    "end": "509599"
  },
  {
    "text": "up one line to say I'm going to invoke a",
    "start": "509599",
    "end": "511680"
  },
  {
    "text": "demo plugin that's it the core file and",
    "start": "511680",
    "end": "515200"
  },
  {
    "text": "uh that's it uh the finally you're going",
    "start": "515200",
    "end": "517919"
  },
  {
    "text": "to say how exactly am I going to build",
    "start": "517919",
    "end": "519518"
  },
  {
    "text": "that the building of the uh cording",
    "start": "519519",
    "end": "523440"
  },
  {
    "text": "plug-in is a little I'm going to say",
    "start": "523440",
    "end": "525680"
  },
  {
    "text": "it's a little convoluted unfortunately",
    "start": "525680",
    "end": "528160"
  },
  {
    "text": "you had to configure the setup uh file",
    "start": "528160",
    "end": "531279"
  },
  {
    "text": "of your cording you add one line to say",
    "start": "531279",
    "end": "534640"
  },
  {
    "text": "you are going to invoke this demo plugin",
    "start": "534640",
    "end": "536959"
  },
  {
    "text": "you also need to copy a source code but",
    "start": "536959",
    "end": "539839"
  },
  {
    "text": "there are some easy way to make it",
    "start": "539839",
    "end": "541680"
  },
  {
    "text": "happen uh if you copy this line a little",
    "start": "541680",
    "end": "544880"
  },
  {
    "text": "little strange line with a Docker you",
    "start": "544880",
    "end": "547120"
  },
  {
    "text": "can just uh run this command and it will",
    "start": "547120",
    "end": "549279"
  },
  {
    "text": "build the binary uh once the the uh your",
    "start": "549279",
    "end": "553680"
  },
  {
    "text": "source code is compiled you're going to",
    "start": "553680",
    "end": "555120"
  },
  {
    "text": "see a binary called cordiness on your",
    "start": "555120",
    "end": "556959"
  },
  {
    "text": "local directory and you can just run",
    "start": "556959",
    "end": "559560"
  },
  {
    "text": "that so that's uh pretty much it uh we",
    "start": "559560",
    "end": "564320"
  },
  {
    "text": "do have the code available in",
    "start": "564320",
    "end": "565920"
  },
  {
    "text": "coordinates repo that's uh uh github.com",
    "start": "565920",
    "end": "569680"
  },
  {
    "text": "coding as demo and you can take a look",
    "start": "569680",
    "end": "572080"
  },
  {
    "text": "and the total lamb code is 80 lines and",
    "start": "572080",
    "end": "574959"
  },
  {
    "text": "that's it okay",
    "start": "574959",
    "end": "578640"
  },
  {
    "text": "thanks Yang um yeah so you can see it's",
    "start": "578640",
    "end": "580640"
  },
  {
    "text": "it's super easy to extend which means um",
    "start": "580640",
    "end": "582800"
  },
  {
    "text": "we do have a bunch of external plugins",
    "start": "582800",
    "end": "584720"
  },
  {
    "text": "if you go to our website you'll see um a",
    "start": "584720",
    "end": "588240"
  },
  {
    "text": "section for external plugins where",
    "start": "588240",
    "end": "589519"
  },
  {
    "text": "people have built plugins you can pull",
    "start": "589519",
    "end": "591200"
  },
  {
    "text": "those in and build your own cords few",
    "start": "591200",
    "end": "593440"
  },
  {
    "text": "little notes that we don't have in the",
    "start": "593440",
    "end": "595120"
  },
  {
    "text": "deck but probably should you know it",
    "start": "595120",
    "end": "598080"
  },
  {
    "text": "they're statically compiled in there's",
    "start": "598080",
    "end": "599839"
  },
  {
    "text": "no dynamic loading of plugins and two",
    "start": "599839",
    "end": "602800"
  },
  {
    "text": "the ordering of plugins is fixed in the",
    "start": "602800",
    "end": "606800"
  },
  {
    "text": "request what you put in your",
    "start": "606800",
    "end": "608000"
  },
  {
    "text": "configuration file of your how your",
    "start": "608000",
    "end": "609680"
  },
  {
    "text": "plugins doesn't matter at all um between",
    "start": "609680",
    "end": "613200"
  },
  {
    "text": "plugins like within a plugin if you have",
    "start": "613200",
    "end": "615040"
  },
  {
    "text": "multiple directives for a plugin it",
    "start": "615040",
    "end": "616320"
  },
  {
    "text": "might that order might matter but um",
    "start": "616320",
    "end": "619040"
  },
  {
    "text": "that means that if you want to change",
    "start": "619040",
    "end": "620560"
  },
  {
    "text": "that ordering for some reason you have",
    "start": "620560",
    "end": "621680"
  },
  {
    "text": "to recompile so those are some little",
    "start": "621680",
    "end": "623279"
  },
  {
    "text": "gotchas but otherwise it's super easy to",
    "start": "623279",
    "end": "625800"
  },
  {
    "text": "extend um to give you an idea of some of",
    "start": "625800",
    "end": "628800"
  },
  {
    "text": "the things that uh that have been going",
    "start": "628800",
    "end": "631600"
  },
  {
    "text": "on lately um so we just released I think",
    "start": "631600",
    "end": "637120"
  },
  {
    "text": "two days ago yesterday maybe um",
    "start": "637120",
    "end": "640920"
  },
  {
    "text": "1.12.1 and um the probably the key thing",
    "start": "640920",
    "end": "644560"
  },
  {
    "text": "I want to call out in that is it it",
    "start": "644560",
    "end": "647720"
  },
  {
    "text": "uh back in in 1.11.4 four um so about",
    "start": "647720",
    "end": "652399"
  },
  {
    "text": "six months ago I think um we we we broke",
    "start": "652399",
    "end": "656079"
  },
  {
    "text": "something in Kubernetes um which is the",
    "start": "656079",
    "end": "658800"
  },
  {
    "text": "way the PTR records which are the",
    "start": "658800",
    "end": "661120"
  },
  {
    "text": "reverse DNS records are created for um",
    "start": "661120",
    "end": "665600"
  },
  {
    "text": "for for different service endpoints and",
    "start": "665600",
    "end": "667760"
  },
  {
    "text": "so we reverted that change um so if you",
    "start": "667760",
    "end": "671519"
  },
  {
    "text": "are using uh cordiness in your",
    "start": "671519",
    "end": "674320"
  },
  {
    "text": "Kubernetes environment um and you're on",
    "start": "674320",
    "end": "676800"
  },
  {
    "text": "a version before 1.11.4 four you're",
    "start": "676800",
    "end": "680880"
  },
  {
    "text": "going to want to skip all the way to to",
    "start": "680880",
    "end": "682079"
  },
  {
    "text": "1.12.1 and not not go anywhere in",
    "start": "682079",
    "end": "684240"
  },
  {
    "text": "between um just an FY a little warning",
    "start": "684240",
    "end": "686959"
  },
  {
    "text": "there um but over the course of the last",
    "start": "686959",
    "end": "690640"
  },
  {
    "text": "year or so we've added a few different",
    "start": "690640",
    "end": "692000"
  },
  {
    "text": "interesting um plugins one is uh the",
    "start": "692000",
    "end": "695120"
  },
  {
    "text": "timeouts plugin which just allows you to",
    "start": "695120",
    "end": "697360"
  },
  {
    "text": "configure some more options um bunch of",
    "start": "697360",
    "end": "699760"
  },
  {
    "text": "changes to other plugins but what I'm",
    "start": "699760",
    "end": "701839"
  },
  {
    "text": "going to drill into next is the the",
    "start": "701839",
    "end": "704399"
  },
  {
    "text": "multisocket plugin and I'll explain the",
    "start": "704399",
    "end": "706079"
  },
  {
    "text": "the problem this solves",
    "start": "706079",
    "end": "710120"
  },
  {
    "text": "so we've had a long-standing issue in",
    "start": "710440",
    "end": "713360"
  },
  {
    "text": "cordns where we sort of hit a we hit a",
    "start": "713360",
    "end": "717200"
  },
  {
    "text": "limit uh a QPS limit when no matter how",
    "start": "717200",
    "end": "721920"
  },
  {
    "text": "much more CPU you give to cords uh you",
    "start": "721920",
    "end": "724560"
  },
  {
    "text": "can't get more QPS out of it in fact as",
    "start": "724560",
    "end": "726639"
  },
  {
    "text": "you can see on this little graph your",
    "start": "726639",
    "end": "727880"
  },
  {
    "text": "QPS starts to decline um and so we we",
    "start": "727880",
    "end": "733360"
  },
  {
    "text": "could we weren't sure what the",
    "start": "733360",
    "end": "734320"
  },
  {
    "text": "bottleneck is and as I mentioned like",
    "start": "734320",
    "end": "737600"
  },
  {
    "text": "it's a friendly friendly place so we",
    "start": "737600",
    "end": "739839"
  },
  {
    "text": "actually had a brand new contributor",
    "start": "739839",
    "end": "741279"
  },
  {
    "text": "come in um this is now maybe about a",
    "start": "741279",
    "end": "743839"
  },
  {
    "text": "year and a half ago because this one",
    "start": "743839",
    "end": "744880"
  },
  {
    "text": "took a while to figure out but um they",
    "start": "744880",
    "end": "747200"
  },
  {
    "text": "came in and started uh asking questions",
    "start": "747200",
    "end": "749600"
  },
  {
    "text": "showing graphs and trying to figure out",
    "start": "749600",
    "end": "751519"
  },
  {
    "text": "what was going on and a couple other",
    "start": "751519",
    "end": "753839"
  },
  {
    "text": "even new contributors jumped in and and",
    "start": "753839",
    "end": "756560"
  },
  {
    "text": "over the course of a few months um we",
    "start": "756560",
    "end": "759600"
  },
  {
    "text": "noticed a a few things um and I'm going",
    "start": "759600",
    "end": "763680"
  },
  {
    "text": "to show a little bit of the internal",
    "start": "763680",
    "end": "765040"
  },
  {
    "text": "structure of cordiness to show how kind",
    "start": "765040",
    "end": "767200"
  },
  {
    "text": "of this evolved um internally right we",
    "start": "767200",
    "end": "770800"
  },
  {
    "text": "have a thing we call a server um and it",
    "start": "770800",
    "end": "773680"
  },
  {
    "text": "it's what handles a given port so when",
    "start": "773680",
    "end": "775600"
  },
  {
    "text": "you in your core file this basically um",
    "start": "775600",
    "end": "778560"
  },
  {
    "text": "corresponds",
    "start": "778560",
    "end": "780040"
  },
  {
    "text": "to one stanza that's got a a port um a",
    "start": "780040",
    "end": "784880"
  },
  {
    "text": "domain and a port and",
    "start": "784880",
    "end": "787639"
  },
  {
    "text": "um that one server object basically has",
    "start": "787639",
    "end": "791040"
  },
  {
    "text": "a routine that's pulling um that's",
    "start": "791040",
    "end": "794079"
  },
  {
    "text": "pulling requests you know off the the",
    "start": "794079",
    "end": "796240"
  },
  {
    "text": "UDP socket or or whatever it may be and",
    "start": "796240",
    "end": "798720"
  },
  {
    "text": "then it's doing them out to go routines",
    "start": "798720",
    "end": "801279"
  },
  {
    "text": "and um dispatches them to go routines",
    "start": "801279",
    "end": "804480"
  },
  {
    "text": "and then the actual resolution chain so",
    "start": "804480",
    "end": "807040"
  },
  {
    "text": "so I guess maybe we didn't say it",
    "start": "807040",
    "end": "808959"
  },
  {
    "text": "earlier but when we talk about plugins",
    "start": "808959",
    "end": "810480"
  },
  {
    "text": "the way the the DNS resolutions happens",
    "start": "810480",
    "end": "812880"
  },
  {
    "text": "in in cordns is we have this list of",
    "start": "812880",
    "end": "816000"
  },
  {
    "text": "plugins they're either enabled or",
    "start": "816000",
    "end": "817920"
  },
  {
    "text": "disabled based upon what's in the core",
    "start": "817920",
    "end": "819480"
  },
  {
    "text": "file and when we get a request we just",
    "start": "819480",
    "end": "822160"
  },
  {
    "text": "hand to the first one in the in the",
    "start": "822160",
    "end": "823760"
  },
  {
    "text": "chain and then it calls the next plugin",
    "start": "823760",
    "end": "826480"
  },
  {
    "text": "which calls the next plugin which calls",
    "start": "826480",
    "end": "827920"
  },
  {
    "text": "the next plugin which allows any and",
    "start": "827920",
    "end": "830240"
  },
  {
    "text": "then and then there's a reverse right as",
    "start": "830240",
    "end": "832399"
  },
  {
    "text": "they return you get another opportunity",
    "start": "832399",
    "end": "834399"
  },
  {
    "text": "to to affect the request so this is this",
    "start": "834399",
    "end": "836560"
  },
  {
    "text": "plug-in chain depending on what plugins",
    "start": "836560",
    "end": "838880"
  },
  {
    "text": "you have enabled that could be very fast",
    "start": "838880",
    "end": "840240"
  },
  {
    "text": "or very slow and um so you know in order",
    "start": "840240",
    "end": "843920"
  },
  {
    "text": "to you know parallelize the requests the",
    "start": "843920",
    "end": "847199"
  },
  {
    "text": "server picks the requests off dispatches",
    "start": "847199",
    "end": "849680"
  },
  {
    "text": "them in go routines so parallel in",
    "start": "849680",
    "end": "851440"
  },
  {
    "text": "parallel running execution threads",
    "start": "851440",
    "end": "854000"
  },
  {
    "text": "effectively um and uh",
    "start": "854000",
    "end": "857560"
  },
  {
    "text": "lets lets them all operate",
    "start": "857560",
    "end": "861160"
  },
  {
    "text": "concurrently um so this is where we're",
    "start": "861160",
    "end": "864000"
  },
  {
    "text": "we're hitting this is the sort of",
    "start": "864000",
    "end": "865360"
  },
  {
    "text": "internal structure and where we're",
    "start": "865360",
    "end": "866480"
  },
  {
    "text": "hitting the the",
    "start": "866480",
    "end": "868600"
  },
  {
    "text": "the QPS limit and so during all this",
    "start": "868600",
    "end": "872480"
  },
  {
    "text": "experimentation somebody said well let's",
    "start": "872480",
    "end": "875040"
  },
  {
    "text": "see what happens if we create two",
    "start": "875040",
    "end": "876560"
  },
  {
    "text": "servers what because we could do this",
    "start": "876560",
    "end": "878399"
  },
  {
    "text": "without even changing code we can just",
    "start": "878399",
    "end": "879760"
  },
  {
    "text": "do this in the configuration file and so",
    "start": "879760",
    "end": "882480"
  },
  {
    "text": "they just opened up another socket and",
    "start": "882480",
    "end": "884639"
  },
  {
    "text": "just you know duplicated their",
    "start": "884639",
    "end": "887040"
  },
  {
    "text": "environments and then just sprayed",
    "start": "887040",
    "end": "888399"
  },
  {
    "text": "traffic across both of those ports and",
    "start": "888399",
    "end": "890959"
  },
  {
    "text": "lo and behold the throughput doubled um",
    "start": "890959",
    "end": "893760"
  },
  {
    "text": "and so it became clear that the b the",
    "start": "893760",
    "end": "896399"
  },
  {
    "text": "the the bottleneck was in that in that",
    "start": "896399",
    "end": "899480"
  },
  {
    "text": "the server couldn't pull things off of",
    "start": "899480",
    "end": "902480"
  },
  {
    "text": "the the",
    "start": "902480",
    "end": "904199"
  },
  {
    "text": "um out of the socket fast enough and",
    "start": "904199",
    "end": "907120"
  },
  {
    "text": "dispatch them fast enough uh to to get a",
    "start": "907120",
    "end": "910560"
  },
  {
    "text": "larger a better QPS than than what we",
    "start": "910560",
    "end": "912639"
  },
  {
    "text": "had",
    "start": "912639",
    "end": "913800"
  },
  {
    "text": "so what we decided to do is the next",
    "start": "913800",
    "end": "917040"
  },
  {
    "text": "experiment was okay if you use so reuse",
    "start": "917040",
    "end": "920480"
  },
  {
    "text": "port which is a sort of kernel feature",
    "start": "920480",
    "end": "922000"
  },
  {
    "text": "that lets multiple sockets be attached",
    "start": "922000",
    "end": "924320"
  },
  {
    "text": "to that same port um you can you know",
    "start": "924320",
    "end": "928120"
  },
  {
    "text": "internally without you can serve things",
    "start": "928120",
    "end": "930720"
  },
  {
    "text": "still off the same port 53 um but you",
    "start": "930720",
    "end": "933920"
  },
  {
    "text": "can do it with multiple sockets the",
    "start": "933920",
    "end": "935839"
  },
  {
    "text": "kernel will distribute the packets",
    "start": "935839",
    "end": "937839"
  },
  {
    "text": "across those different sockets for you",
    "start": "937839",
    "end": "940000"
  },
  {
    "text": "don't need to do anything it's actually",
    "start": "940000",
    "end": "941199"
  },
  {
    "text": "super simple on the internal side too",
    "start": "941199",
    "end": "944240"
  },
  {
    "text": "and",
    "start": "944240",
    "end": "945560"
  },
  {
    "text": "um so that's that's what we implemented",
    "start": "945560",
    "end": "948639"
  },
  {
    "text": "and then uh what we found was that um",
    "start": "948639",
    "end": "952160"
  },
  {
    "text": "the number of sockets that we have um",
    "start": "952160",
    "end": "955680"
  },
  {
    "text": "really corresponds best to the sort of",
    "start": "955680",
    "end": "958399"
  },
  {
    "text": "simplest default is uh just for every",
    "start": "958399",
    "end": "962160"
  },
  {
    "text": "for every processor you have you know",
    "start": "962160",
    "end": "964160"
  },
  {
    "text": "for every CPU you have create one socket",
    "start": "964160",
    "end": "966399"
  },
  {
    "text": "and when we did and so we use this this",
    "start": "966399",
    "end": "968720"
  },
  {
    "text": "uh if you're familiar with",
    "start": "968720",
    "end": "971000"
  },
  {
    "text": "go limits its concurrency based on an",
    "start": "971000",
    "end": "974079"
  },
  {
    "text": "environment variable but Uber has this",
    "start": "974079",
    "end": "976480"
  },
  {
    "text": "this uh go module you can pull in which",
    "start": "976480",
    "end": "978560"
  },
  {
    "text": "automatically in a containerized",
    "start": "978560",
    "end": "980240"
  },
  {
    "text": "environment sets that appropriately",
    "start": "980240",
    "end": "983440"
  },
  {
    "text": "so we pulled that in and I can show you",
    "start": "983440",
    "end": "986079"
  },
  {
    "text": "this was the result of course with the",
    "start": "986079",
    "end": "987680"
  },
  {
    "text": "single threaded environment and then",
    "start": "987680",
    "end": "991480"
  },
  {
    "text": "um with two sockets uh you can see that",
    "start": "991480",
    "end": "996079"
  },
  {
    "text": "all the way up through five CPUs we're",
    "start": "996079",
    "end": "998639"
  },
  {
    "text": "seeing a you know basically linear",
    "start": "998639",
    "end": "1001560"
  },
  {
    "text": "um a linear path with the with growth",
    "start": "1001560",
    "end": "1005600"
  },
  {
    "text": "with of QPS um three sockets four",
    "start": "1005600",
    "end": "1009399"
  },
  {
    "text": "sockets five sockets so really we get",
    "start": "1009399",
    "end": "1014920"
  },
  {
    "text": "now really good vertical scaling as long",
    "start": "1014920",
    "end": "1018160"
  },
  {
    "text": "as you configure the multisockets",
    "start": "1018160",
    "end": "1021040"
  },
  {
    "text": "appropriately",
    "start": "1021040",
    "end": "1022720"
  },
  {
    "text": "um you can scale to as many CPUs as you",
    "start": "1022720",
    "end": "1025199"
  },
  {
    "text": "want and you get basically linear linear",
    "start": "1025199",
    "end": "1027520"
  },
  {
    "text": "QPS scaling until you hit other limits",
    "start": "1027520",
    "end": "1029438"
  },
  {
    "text": "right so so I think if you figure it's",
    "start": "1029439",
    "end": "1033438"
  },
  {
    "text": "512 bytes per UDB packet you hit a you",
    "start": "1033439",
    "end": "1037199"
  },
  {
    "text": "saturate a one gig nick at around 250k",
    "start": "1037199",
    "end": "1041438"
  },
  {
    "text": "QPS maybe um most likely if you're",
    "start": "1041439",
    "end": "1044720"
  },
  {
    "text": "running in a cloud environment they're",
    "start": "1044720",
    "end": "1045839"
  },
  {
    "text": "going to cap you before that anyway so",
    "start": "1045839",
    "end": "1048480"
  },
  {
    "text": "um those are the kind of limits you",
    "start": "1048480",
    "end": "1049679"
  },
  {
    "text": "start having to worry about",
    "start": "1049679",
    "end": "1052760"
  },
  {
    "text": "um so this was released in 1.12 um it",
    "start": "1052760",
    "end": "1056480"
  },
  {
    "text": "requires SRU port so this is not on by",
    "start": "1056480",
    "end": "1058640"
  },
  {
    "text": "default because that's a it might not be",
    "start": "1058640",
    "end": "1060960"
  },
  {
    "text": "there in your kernel or or you might",
    "start": "1060960",
    "end": "1062480"
  },
  {
    "text": "need some configuration to make that",
    "start": "1062480",
    "end": "1063760"
  },
  {
    "text": "happen but it's uh all you need to do to",
    "start": "1063760",
    "end": "1066160"
  },
  {
    "text": "enable it is put multisocket in your",
    "start": "1066160",
    "end": "1068559"
  },
  {
    "text": "config file and it will automatically",
    "start": "1068559",
    "end": "1070160"
  },
  {
    "text": "adjust based upon the number of uh cores",
    "start": "1070160",
    "end": "1073039"
  },
  {
    "text": "you give to that container and",
    "start": "1073039",
    "end": "1075720"
  },
  {
    "text": "um you should see better performance",
    "start": "1075720",
    "end": "1080679"
  },
  {
    "text": "um so that's really all we had then had",
    "start": "1080880",
    "end": "1083360"
  },
  {
    "text": "to discuss other than uh you know Q&A so",
    "start": "1083360",
    "end": "1086880"
  },
  {
    "text": "um please uh come join us at according",
    "start": "1086880",
    "end": "1090000"
  },
  {
    "text": "us it's super like I said super friendly",
    "start": "1090000",
    "end": "1092320"
  },
  {
    "text": "small small world and uh easy to become",
    "start": "1092320",
    "end": "1095559"
  },
  {
    "text": "a a really uh make a significant",
    "start": "1095559",
    "end": "1100600"
  },
  {
    "text": "impact any",
    "start": "1100600",
    "end": "1102440"
  },
  {
    "text": "questions yes sir so one of the biggest",
    "start": "1102440",
    "end": "1105440"
  },
  {
    "text": "problems with the",
    "start": "1105440",
    "end": "1108440"
  },
  {
    "text": "scale is based",
    "start": "1108440",
    "end": "1112159"
  },
  {
    "text": "little amplification",
    "start": "1114559",
    "end": "1117799"
  },
  {
    "text": "thank you so currently the main problem",
    "start": "1118720",
    "end": "1121360"
  },
  {
    "text": "with coordinates is the scaling because",
    "start": "1121360",
    "end": "1123679"
  },
  {
    "text": "coordinates is scaled based on the",
    "start": "1123679",
    "end": "1125360"
  },
  {
    "text": "number of nodes and not by the number of",
    "start": "1125360",
    "end": "1128120"
  },
  {
    "text": "requests is there any planning on",
    "start": "1128120",
    "end": "1130880"
  },
  {
    "text": "changing it",
    "start": "1130880",
    "end": "1132919"
  },
  {
    "text": "so that's a that's a great question uh",
    "start": "1132919",
    "end": "1135919"
  },
  {
    "text": "yeah that's a great question but",
    "start": "1135919",
    "end": "1138160"
  },
  {
    "text": "actually I was I was thinking about this",
    "start": "1138160",
    "end": "1139760"
  },
  {
    "text": "last night we should maybe add a slide",
    "start": "1139760",
    "end": "1141280"
  },
  {
    "text": "on this but so our yes our current sort",
    "start": "1141280",
    "end": "1144720"
  },
  {
    "text": "of default recommendation is use a",
    "start": "1144720",
    "end": "1147679"
  },
  {
    "text": "cluster proportional autoscaler which is",
    "start": "1147679",
    "end": "1150160"
  },
  {
    "text": "not really a very good um recommendation",
    "start": "1150160",
    "end": "1153280"
  },
  {
    "text": "especially now that we have this",
    "start": "1153280",
    "end": "1154640"
  },
  {
    "text": "vertical better vertical scaling",
    "start": "1154640",
    "end": "1157400"
  },
  {
    "text": "um so you know I guess it's more about",
    "start": "1157400",
    "end": "1162240"
  },
  {
    "text": "the recommendation at this point um",
    "start": "1162240",
    "end": "1165200"
  },
  {
    "text": "definitely you'd be better off looking",
    "start": "1165200",
    "end": "1166799"
  },
  {
    "text": "at say CPU utilization um especially",
    "start": "1166799",
    "end": "1169919"
  },
  {
    "text": "with this configuration now you also",
    "start": "1169919",
    "end": "1172480"
  },
  {
    "text": "frankly probably can get away with so",
    "start": "1172480",
    "end": "1174559"
  },
  {
    "text": "one of the one of the big problems we",
    "start": "1174559",
    "end": "1175840"
  },
  {
    "text": "have uh we see repeatedly is early in",
    "start": "1175840",
    "end": "1180080"
  },
  {
    "text": "Kubernetes",
    "start": "1180080",
    "end": "1181600"
  },
  {
    "text": "um life uh a decision was made",
    "start": "1181600",
    "end": "1185320"
  },
  {
    "text": "to to make it easy for um developers as",
    "start": "1185320",
    "end": "1190080"
  },
  {
    "text": "they're developing to like feed in a DNS",
    "start": "1190080",
    "end": "1194240"
  },
  {
    "text": "request for a service that's like just",
    "start": "1194240",
    "end": "1195919"
  },
  {
    "text": "the service name right and if the",
    "start": "1195919",
    "end": "1197200"
  },
  {
    "text": "service is in your same namespace",
    "start": "1197200",
    "end": "1199600"
  },
  {
    "text": "um then you just need that name and and",
    "start": "1199600",
    "end": "1202320"
  },
  {
    "text": "you can kind of allows you an",
    "start": "1202320",
    "end": "1203520"
  },
  {
    "text": "indirection where you can move that",
    "start": "1203520",
    "end": "1204880"
  },
  {
    "text": "service around and your manifest doesn't",
    "start": "1204880",
    "end": "1206640"
  },
  {
    "text": "have to change or whatever but what that",
    "start": "1206640",
    "end": "1208240"
  },
  {
    "text": "led to is this this we call the end dots",
    "start": "1208240",
    "end": "1210400"
  },
  {
    "text": "problem where the the way DNS resolution",
    "start": "1210400",
    "end": "1213440"
  },
  {
    "text": "works is um on the client side in the",
    "start": "1213440",
    "end": "1217440"
  },
  {
    "text": "resolve.com file so this is before",
    "start": "1217440",
    "end": "1219280"
  },
  {
    "text": "cordiness is involved at all there's a a",
    "start": "1219280",
    "end": "1222160"
  },
  {
    "text": "configuration option called n dots and",
    "start": "1222160",
    "end": "1224320"
  },
  {
    "text": "it and and there's a uh a search path",
    "start": "1224320",
    "end": "1227280"
  },
  {
    "text": "and basically any query that has like",
    "start": "1227280",
    "end": "1230080"
  },
  {
    "text": "fewer than n dots dots in the query and",
    "start": "1230080",
    "end": "1232799"
  },
  {
    "text": "it's not fully qualified so it doesn't",
    "start": "1232799",
    "end": "1234400"
  },
  {
    "text": "end in a dot will go through that search",
    "start": "1234400",
    "end": "1236720"
  },
  {
    "text": "path so what does that mean it means if",
    "start": "1236720",
    "end": "1238640"
  },
  {
    "text": "you put foo and you feed that into your",
    "start": "1238640",
    "end": "1240880"
  },
  {
    "text": "process as your service name",
    "start": "1240880",
    "end": "1243559"
  },
  {
    "text": "then then the the resolver on the client",
    "start": "1243559",
    "end": "1246559"
  },
  {
    "text": "side will start trying names in that",
    "start": "1246559",
    "end": "1249200"
  },
  {
    "text": "search path and in kubernetes the search",
    "start": "1249200",
    "end": "1250799"
  },
  {
    "text": "path is long it's like you first you try",
    "start": "1250799",
    "end": "1254200"
  },
  {
    "text": "fooser name then you funamespace and",
    "start": "1254200",
    "end": "1257760"
  },
  {
    "text": "then you try like or fu namespaces svc",
    "start": "1257760",
    "end": "1261679"
  },
  {
    "text": "and then you like like right you end up",
    "start": "1261679",
    "end": "1263679"
  },
  {
    "text": "basically an any DNS name that's not",
    "start": "1263679",
    "end": "1266640"
  },
  {
    "text": "fully qualified",
    "start": "1266640",
    "end": "1268320"
  },
  {
    "text": "results in six queries before it hits",
    "start": "1268320",
    "end": "1269840"
  },
  {
    "text": "the right one if it's for an external",
    "start": "1269840",
    "end": "1271280"
  },
  {
    "text": "service at least six um if it's for and",
    "start": "1271280",
    "end": "1274799"
  },
  {
    "text": "depending on if it's for an internal",
    "start": "1274799",
    "end": "1276960"
  },
  {
    "text": "service it's going to hit anywhere from",
    "start": "1276960",
    "end": "1279039"
  },
  {
    "text": "one to six depending on if it's in a",
    "start": "1279039",
    "end": "1281120"
  },
  {
    "text": "different name space or whatever so",
    "start": "1281120",
    "end": "1283600"
  },
  {
    "text": "that's like an ampl query amplification",
    "start": "1283600",
    "end": "1285520"
  },
  {
    "text": "and that has nothing to do with cords",
    "start": "1285520",
    "end": "1286960"
  },
  {
    "text": "that's about how Kubernetes configures",
    "start": "1286960",
    "end": "1288400"
  },
  {
    "text": "the resolve.com but it leads to this",
    "start": "1288400",
    "end": "1289919"
  },
  {
    "text": "scale problem that you're bringing up",
    "start": "1289919",
    "end": "1292080"
  },
  {
    "text": "because if you are doing a lot of",
    "start": "1292080",
    "end": "1294799"
  },
  {
    "text": "queries for external services your your",
    "start": "1294799",
    "end": "1297840"
  },
  {
    "text": "number of like we see this with like say",
    "start": "1297840",
    "end": "1300640"
  },
  {
    "text": "like buckets right then so the",
    "start": "1300640",
    "end": "1303840"
  },
  {
    "text": "recommendations I would give you on the",
    "start": "1303840",
    "end": "1306640"
  },
  {
    "text": "scale issue is first if you can do it",
    "start": "1306640",
    "end": "1310080"
  },
  {
    "text": "most people can't is make everybody put",
    "start": "1310080",
    "end": "1313440"
  },
  {
    "text": "a a fully qualified domain name and when",
    "start": "1313440",
    "end": "1315360"
  },
  {
    "text": "I say fully qualified I don't mean",
    "start": "1315360",
    "end": "1316640"
  },
  {
    "text": "ending in.com I mean ending in.com",
    "start": "1316640",
    "end": "1319039"
  },
  {
    "text": "dot right that last dot is the most",
    "start": "1319039",
    "end": "1321440"
  },
  {
    "text": "critical piece because it tells it don't",
    "start": "1321440",
    "end": "1323120"
  },
  {
    "text": "use the search path so that that cuts",
    "start": "1323120",
    "end": "1325480"
  },
  {
    "text": "immediately any external queries in to",
    "start": "1325480",
    "end": "1329280"
  },
  {
    "text": "one sixth of what they would be",
    "start": "1329280",
    "end": "1330440"
  },
  {
    "text": "otherwise um most people can't enforce",
    "start": "1330440",
    "end": "1333440"
  },
  {
    "text": "that easily um so in that case I would",
    "start": "1333440",
    "end": "1337760"
  },
  {
    "text": "say now that we have this multisocket",
    "start": "1337760",
    "end": "1339280"
  },
  {
    "text": "thing just run two cords and give them",
    "start": "1339280",
    "end": "1342320"
  },
  {
    "text": "like you know eight CPUs or whatever and",
    "start": "1342320",
    "end": "1345360"
  },
  {
    "text": "for most people that's going to be fine",
    "start": "1345360",
    "end": "1347280"
  },
  {
    "text": "but otherwise I'm going to scale suggest",
    "start": "1347280",
    "end": "1349440"
  },
  {
    "text": "scaling based upon uh CPU utilization",
    "start": "1349440",
    "end": "1353440"
  },
  {
    "text": "and do horizontally so give it a bunch",
    "start": "1353440",
    "end": "1355679"
  },
  {
    "text": "of or or a vertical pod autoscaler i",
    "start": "1355679",
    "end": "1357840"
  },
  {
    "text": "haven't thought it all through but that",
    "start": "1357840",
    "end": "1359039"
  },
  {
    "text": "that would be my recommendation the the",
    "start": "1359039",
    "end": "1361200"
  },
  {
    "text": "other scale factor and I'm sorry I'm",
    "start": "1361200",
    "end": "1363039"
  },
  {
    "text": "going on long on this topic the the",
    "start": "1363039",
    "end": "1365280"
  },
  {
    "text": "other limit um you have to worry about",
    "start": "1365280",
    "end": "1367120"
  },
  {
    "text": "is the number of services in your",
    "start": "1367120",
    "end": "1368559"
  },
  {
    "text": "cluster which directly affects the",
    "start": "1368559",
    "end": "1370080"
  },
  {
    "text": "memory used by cordns so in your memory",
    "start": "1370080",
    "end": "1372480"
  },
  {
    "text": "limits um if you're if you have a lot of",
    "start": "1372480",
    "end": "1375360"
  },
  {
    "text": "services or a lot of endpoints in",
    "start": "1375360",
    "end": "1377919"
  },
  {
    "text": "headless services then that's that's",
    "start": "1377919",
    "end": "1380720"
  },
  {
    "text": "basically what the memory correlates",
    "start": "1380720",
    "end": "1383000"
  },
  {
    "text": "to any other",
    "start": "1383000",
    "end": "1386480"
  },
  {
    "text": "questions are we out of time or oh",
    "start": "1388840",
    "end": "1391200"
  },
  {
    "text": "there's another question here",
    "start": "1391200",
    "end": "1393320"
  },
  {
    "text": "uh we still have a lot of time on that",
    "start": "1393320",
    "end": "1396240"
  },
  {
    "text": "same topic um we're using node local DNS",
    "start": "1396240",
    "end": "1399039"
  },
  {
    "text": "on our side to like kind of cache at the",
    "start": "1399039",
    "end": "1401679"
  },
  {
    "text": "at the node level um like how would you",
    "start": "1401679",
    "end": "1404559"
  },
  {
    "text": "compare like that um that new capacity",
    "start": "1404559",
    "end": "1407679"
  },
  {
    "text": "that you have now to vertical scale",
    "start": "1407679",
    "end": "1410480"
  },
  {
    "text": "compared to node local DNS great",
    "start": "1410480",
    "end": "1413200"
  },
  {
    "text": "question um so node local DNS",
    "start": "1413200",
    "end": "1416840"
  },
  {
    "text": "solves similar and but also different",
    "start": "1416840",
    "end": "1419840"
  },
  {
    "text": "problems additional problems as well i",
    "start": "1419840",
    "end": "1422159"
  },
  {
    "text": "would recommend in general you do want",
    "start": "1422159",
    "end": "1424000"
  },
  {
    "text": "to run node local DNS but it it's if",
    "start": "1424000",
    "end": "1427200"
  },
  {
    "text": "you've got a lot of nodes it's actually",
    "start": "1427200",
    "end": "1428400"
  },
  {
    "text": "more expensive right you're using",
    "start": "1428400",
    "end": "1429679"
  },
  {
    "text": "resources on every node but it um the",
    "start": "1429679",
    "end": "1433360"
  },
  {
    "text": "problems it solves is one it uh it",
    "start": "1433360",
    "end": "1436080"
  },
  {
    "text": "shortcuts any requests to like",
    "start": "1436080",
    "end": "1440000"
  },
  {
    "text": "subdomains or external domains I believe",
    "start": "1440000",
    "end": "1442240"
  },
  {
    "text": "it does external domains too um and it",
    "start": "1442240",
    "end": "1445039"
  },
  {
    "text": "will look those up directly and cache",
    "start": "1445039",
    "end": "1446960"
  },
  {
    "text": "them",
    "start": "1446960",
    "end": "1448520"
  },
  {
    "text": "um the other big thing it does is",
    "start": "1448520",
    "end": "1451799"
  },
  {
    "text": "it we had this problem in the highest",
    "start": "1451799",
    "end": "1454880"
  },
  {
    "text": "scale environments where um so",
    "start": "1454880",
    "end": "1458159"
  },
  {
    "text": "internally the kernel the kernel has a",
    "start": "1458159",
    "end": "1460559"
  },
  {
    "text": "connection tracking table and it's got a",
    "start": "1460559",
    "end": "1463120"
  },
  {
    "text": "limited number of slots and if you have",
    "start": "1463120",
    "end": "1465360"
  },
  {
    "text": "make a TCP connection and then you close",
    "start": "1465360",
    "end": "1467600"
  },
  {
    "text": "the TCP connection it it there's there's",
    "start": "1467600",
    "end": "1470159"
  },
  {
    "text": "a close it disconnects and so it removes",
    "start": "1470159",
    "end": "1472320"
  },
  {
    "text": "the entry but UDP connections don't",
    "start": "1472320",
    "end": "1475600"
  },
  {
    "text": "because they're connectionless it",
    "start": "1475600",
    "end": "1477600"
  },
  {
    "text": "doesn't know when to remove the entry",
    "start": "1477600",
    "end": "1478880"
  },
  {
    "text": "from the table so it lets them time out",
    "start": "1478880",
    "end": "1480640"
  },
  {
    "text": "So when basically when that entry when",
    "start": "1480640",
    "end": "1482320"
  },
  {
    "text": "you're it's like 75 seconds or some",
    "start": "1482320",
    "end": "1484880"
  },
  {
    "text": "really long time period so you if you",
    "start": "1484880",
    "end": "1487600"
  },
  {
    "text": "have a lot of queries going out you fill",
    "start": "1487600",
    "end": "1490320"
  },
  {
    "text": "up that connection table and you start",
    "start": "1490320",
    "end": "1491840"
  },
  {
    "text": "like literally dropping packets right so",
    "start": "1491840",
    "end": "1494320"
  },
  {
    "text": "so you see failures in your resolution",
    "start": "1494320",
    "end": "1497279"
  },
  {
    "text": "at that point so node local DNS fixes",
    "start": "1497279",
    "end": "1499360"
  },
  {
    "text": "that because it turns off connection",
    "start": "1499360",
    "end": "1501440"
  },
  {
    "text": "tracking for um those UDP connections",
    "start": "1501440",
    "end": "1505279"
  },
  {
    "text": "going out for DNS and it it actually",
    "start": "1505279",
    "end": "1509720"
  },
  {
    "text": "upgrades connections from to the",
    "start": "1509720",
    "end": "1512960"
  },
  {
    "text": "upstream cords to use TCP instead so so",
    "start": "1512960",
    "end": "1516080"
  },
  {
    "text": "node local DNS is cordns it's just a",
    "start": "1516080",
    "end": "1518320"
  },
  {
    "text": "special build of it with most of the the",
    "start": "1518320",
    "end": "1520960"
  },
  {
    "text": "features stripped out to make it smaller",
    "start": "1520960",
    "end": "1523919"
  },
  {
    "text": "but um so I would recommend yes you use",
    "start": "1523919",
    "end": "1526480"
  },
  {
    "text": "it the only downsides that I can think",
    "start": "1526480",
    "end": "1530080"
  },
  {
    "text": "of are one um you have to run it on",
    "start": "1530080",
    "end": "1533600"
  },
  {
    "text": "every node if you've got 50,000 nodes",
    "start": "1533600",
    "end": "1535600"
  },
  {
    "text": "well most people don't have 50,000 if",
    "start": "1535600",
    "end": "1537120"
  },
  {
    "text": "you've got 10,000 5,000 that might be",
    "start": "1537120",
    "end": "1539200"
  },
  {
    "text": "more expensive than running a few small",
    "start": "1539200",
    "end": "1540880"
  },
  {
    "text": "a few cord DNS's um to",
    "start": "1540880",
    "end": "1544840"
  },
  {
    "text": "um the default TTL for services is 5",
    "start": "1544840",
    "end": "1548679"
  },
  {
    "text": "seconds in a centralized core DNS you",
    "start": "1548679",
    "end": "1552799"
  },
  {
    "text": "can turn off DNS cache for those because",
    "start": "1552799",
    "end": "1555919"
  },
  {
    "text": "we already have them in memory i think",
    "start": "1555919",
    "end": "1557360"
  },
  {
    "text": "we we probably do in our recommendations",
    "start": "1557360",
    "end": "1560400"
  },
  {
    "text": "so you don't have a a delay when pods",
    "start": "1560400",
    "end": "1563679"
  },
  {
    "text": "come and go out of a service of 5",
    "start": "1563679",
    "end": "1565120"
  },
  {
    "text": "seconds whereas if it's in a local cache",
    "start": "1565120",
    "end": "1568880"
  },
  {
    "text": "node local DNS cache will keep that so",
    "start": "1568880",
    "end": "1571279"
  },
  {
    "text": "you could that's not much of an issue",
    "start": "1571279",
    "end": "1573360"
  },
  {
    "text": "but there's a little issue there and",
    "start": "1573360",
    "end": "1575279"
  },
  {
    "text": "then",
    "start": "1575279",
    "end": "1576440"
  },
  {
    "text": "um it's a single point of failure on",
    "start": "1576440",
    "end": "1578880"
  },
  {
    "text": "your node because we don't run two",
    "start": "1578880",
    "end": "1581679"
  },
  {
    "text": "cordiness instances in node local DNS",
    "start": "1581679",
    "end": "1584159"
  },
  {
    "text": "just one but it's only on that node so",
    "start": "1584159",
    "end": "1586320"
  },
  {
    "text": "it's scoped to the node so that's not",
    "start": "1586320",
    "end": "1587760"
  },
  {
    "text": "that bad",
    "start": "1587760",
    "end": "1590080"
  },
  {
    "text": "either does that answer your question",
    "start": "1590679",
    "end": "1593480"
  },
  {
    "text": "okay any other",
    "start": "1593480",
    "end": "1596279"
  },
  {
    "text": "questions we have uh three and a half",
    "start": "1596279",
    "end": "1599279"
  },
  {
    "text": "minutes lots of time",
    "start": "1599279",
    "end": "1603000"
  },
  {
    "text": "okay well we'll be uh right over here if",
    "start": "1612000",
    "end": "1615200"
  },
  {
    "text": "you need us and um happy to answer any",
    "start": "1615200",
    "end": "1617440"
  },
  {
    "text": "any any additional questions should you",
    "start": "1617440",
    "end": "1619120"
  },
  {
    "text": "have",
    "start": "1619120",
    "end": "1622120"
  }
]