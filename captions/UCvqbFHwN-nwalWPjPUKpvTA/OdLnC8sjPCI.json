[
  {
    "text": "all right we're gonna get started we have a lot to cover thank you so much for coming thank you for your time uh my",
    "start": "60",
    "end": "6540"
  },
  {
    "text": "name is Amir Abbas I'm a product manager at Google I focus on application modernization service mesh also part of",
    "start": "6540",
    "end": "13139"
  },
  {
    "text": "the istio steering committee for all the istio folks out there I'll be I'll be at the istio booth later I've been with",
    "start": "13139",
    "end": "19619"
  },
  {
    "text": "Google for about six years uh and now I focus on reliability and multi-cluster architecture patterns Steve and I'm",
    "start": "19619",
    "end": "27060"
  },
  {
    "text": "Steve McGee uh I'm a reliability Advocate which is a title I just made up part of devrel but I used to be an SRE",
    "start": "27060",
    "end": "33840"
  },
  {
    "text": "for a long time so I sort of like feel like I am just an SRE uh has anyone here",
    "start": "33840",
    "end": "38940"
  },
  {
    "text": "an SRE raise your hand yeah my people right on um so I I worked on a bunch of services",
    "start": "38940",
    "end": "45660"
  },
  {
    "text": "like Android and YouTube Cloud for a while and then I left I left Google I",
    "start": "45660",
    "end": "51120"
  },
  {
    "text": "became a customer so I I moved to California I helped this company move from on-prem you know monolith you know",
    "start": "51120",
    "end": "58260"
  },
  {
    "text": "big knock all this stuff onto the cloud and it was difficult let me tell you it",
    "start": "58260",
    "end": "63780"
  },
  {
    "text": "was very difficult I learned a lot in that year um so I actually came back to Google to",
    "start": "63780",
    "end": "69119"
  },
  {
    "text": "basically help more companies go through that process because uh I don't think it's easy to go through it alone",
    "start": "69119",
    "end": "74760"
  },
  {
    "text": "so I'm hoping we can show you guys a couple ideas here today to help you build more reliable services and just",
    "start": "74760",
    "end": "81720"
  },
  {
    "text": "kind of make the internet more reliable as a whole the first step uh question you can",
    "start": "81720",
    "end": "87780"
  },
  {
    "text": "answer this in your head you can raise your hand whatever um the question is can you build four or nine services on top of three nines",
    "start": "87780",
    "end": "94740"
  },
  {
    "text": "infrastructure can you is it possible so my favorite thing about this question",
    "start": "94740",
    "end": "99900"
  },
  {
    "text": "is not what the answer is it's the fact that every time I ask a room full of people I get half yes and half no",
    "start": "99900",
    "end": "106320"
  },
  {
    "text": "not necessarily like left and right but like half and half you know um I actually asked that question at",
    "start": "106320",
    "end": "111600"
  },
  {
    "text": "srecon here in Amsterdam last year still half yes half no so it's not a",
    "start": "111600",
    "end": "117299"
  },
  {
    "text": "straightforward answer so this question is kind of weird",
    "start": "117299",
    "end": "123119"
  },
  {
    "text": "so uh to help understand what I mean by all this and and why I think I think the",
    "start": "123119",
    "end": "128880"
  },
  {
    "text": "answer is yes I'm hoping that uh by the end of the talk today you will agree with me if you don't already but to help",
    "start": "128880",
    "end": "136500"
  },
  {
    "text": "understand that and we're going to use a couple uh kind of symbols and and uh",
    "start": "136500",
    "end": "141660"
  },
  {
    "text": "analogies I guess so first up we have these uh pyramids uh this is a little",
    "start": "141660",
    "end": "146700"
  },
  {
    "text": "abstract but bear with me uh the way that we have done reliability in the past for a very long time was like the",
    "start": "146700",
    "end": "153959"
  },
  {
    "text": "pyramids in Giza you know big giant thing very stable base the thing at the",
    "start": "153959",
    "end": "159120"
  },
  {
    "text": "top just kind of inherits the reliability from the stuff below it and this makes perfect sense this is how",
    "start": "159120",
    "end": "164700"
  },
  {
    "text": "buildings work humans just kind of understand this you know if you want something to be stable the stuff",
    "start": "164700",
    "end": "169980"
  },
  {
    "text": "underneath it should be more stable um so if you think about this if we have like a three nines application we want",
    "start": "169980",
    "end": "175739"
  },
  {
    "text": "like a three and a half nines you know database and we want like a four nine Network under that something like that",
    "start": "175739",
    "end": "181500"
  },
  {
    "text": "right uh the trick is when we move to Cloud it flips around and nobody tells",
    "start": "181500",
    "end": "187440"
  },
  {
    "text": "you that before you get there so for example I've had many customers come to me and say like Hey Google guy your VMS",
    "start": "187440",
    "end": "194400"
  },
  {
    "text": "have two and a half nines what's the deal like how come your VMS have so few nights how can I build a 409 service on",
    "start": "194400",
    "end": "200879"
  },
  {
    "text": "top of Two and a Half nine VMS and the answer is this it's the pyramid right so your application needs to increase its",
    "start": "200879",
    "end": "208860"
  },
  {
    "text": "reliability as you go up the stack and how in the world do we do that think about raid right so we have a bunch of",
    "start": "208860",
    "end": "214080"
  },
  {
    "text": "disks they all have like a 99 availability because disks fail all the time but if you stick them all together",
    "start": "214080",
    "end": "219480"
  },
  {
    "text": "and put a bunch of software and maybe some hardware and some complexity around it you get a San and your sand is way",
    "start": "219480",
    "end": "225780"
  },
  {
    "text": "more reliable right like how did you do that how did you make something more than the sum of its parts the answer is",
    "start": "225780",
    "end": "231780"
  },
  {
    "text": "software we we did software to it right so this is uh distributed systems are a thing that allow us to do this at",
    "start": "231780",
    "end": "237599"
  },
  {
    "text": "greater and greater scales pretty great um here's just kind of breakdown of I don't know if you can read the text but",
    "start": "237599",
    "end": "243360"
  },
  {
    "text": "essentially in the old days we had our data center and we had our networks and things on the cloud we think about you know you have is on the bottom you build",
    "start": "243360",
    "end": "249840"
  },
  {
    "text": "your platform on how you're going to use the infrastructure and you put your your app on top of that that make sense",
    "start": "249840",
    "end": "256139"
  },
  {
    "text": "so um I want to make sure that we we point out that the way we're doing this is through software right so the software",
    "start": "256139",
    "end": "263040"
  },
  {
    "text": "actually increases the availability of the the systems underneath",
    "start": "263040",
    "end": "268199"
  },
  {
    "text": "and I think the important part is that once you move to the cloud you have to change the way you think if you're in",
    "start": "268199",
    "end": "275040"
  },
  {
    "text": "the cloud and you're thinking in the right hand side and the upside right side up pyramid it's not going to work",
    "start": "275040",
    "end": "280199"
  },
  {
    "text": "as well so the first thing we have to do is change our way of thinking and then we have to build reliable applications which we're going to show you some",
    "start": "280199",
    "end": "286500"
  },
  {
    "text": "Frameworks and stuff that Steve's going to get into that's right so let's define a few terms first so",
    "start": "286500",
    "end": "292199"
  },
  {
    "text": "that we're using this word archetype it comes from a paper you can just think of this maybe also as just a pattern but an",
    "start": "292199",
    "end": "297300"
  },
  {
    "text": "archetype is essentially just an abstracted architecture right and specifically we're talking about reliability focused archetypes so we're",
    "start": "297300",
    "end": "304020"
  },
  {
    "text": "looking through a lens of reliability here there's many lenses you could use to decide your architectures this is one of them",
    "start": "304020",
    "end": "309780"
  },
  {
    "text": "uh the architecture is what you do next so once you have the basic idea of what you want to build now we have to fill it",
    "start": "309780",
    "end": "315060"
  },
  {
    "text": "in with real services that you know products that you can buy you know projects that you can download things like that",
    "start": "315060",
    "end": "321780"
  },
  {
    "text": "uh then you need to write code right you have to actually fill it with Services your own system and this is something that's going to change all the time",
    "start": "321780",
    "end": "327479"
  },
  {
    "text": "you're on constantly upgrading your code and writing new things uh the other term we use here is footprint so it's you're",
    "start": "327479",
    "end": "333720"
  },
  {
    "text": "not just going to deploy your code once to like a production you have to put it in many places right you're gonna have many regions and zones and instances and",
    "start": "333720",
    "end": "341220"
  },
  {
    "text": "you know clusters and things like that and your footprint is going to change as well it might be because your business",
    "start": "341220",
    "end": "346259"
  },
  {
    "text": "goes into a new market it might be because you couldn't get quota in that one place and now you got quote on the other place like there's many reasons",
    "start": "346259",
    "end": "352320"
  },
  {
    "text": "why your footprint might change and finally you're going to be tracking your slos constantly so the pattern that",
    "start": "352320",
    "end": "358080"
  },
  {
    "text": "we have here is you have a really tight loop at the bottom your slos are constantly being measured making sure things are working well you have a",
    "start": "358080",
    "end": "364020"
  },
  {
    "text": "slightly less tight Loop above that which is the the changes that we see every day or week however often you",
    "start": "364020",
    "end": "370560"
  },
  {
    "text": "deploy and change things your architecture you will change every once in a while slightly broader Loop your",
    "start": "370560",
    "end": "376440"
  },
  {
    "text": "archetype should really stay the same as long as you kind of understand what it is that you're getting out of it if you",
    "start": "376440",
    "end": "381539"
  },
  {
    "text": "change your archetype it's going to change your architecture it's going to change your code it's going to change your slos so there's like a a pattern",
    "start": "381539",
    "end": "387780"
  },
  {
    "text": "arriving here so let's let's let's learn about this in",
    "start": "387780",
    "end": "393060"
  },
  {
    "text": "another way as well like graphically yeah so let's talk about what we're actually trying to do so we're trying to build applications for our consumers for",
    "start": "393060",
    "end": "399660"
  },
  {
    "text": "our customers and since I'm a product manager we'll start with the products so at the very outset you have something",
    "start": "399660",
    "end": "405060"
  },
  {
    "text": "called a product like that's what you're trying to sell right and they have product managers that are building these products for example let's say you want",
    "start": "405060",
    "end": "411060"
  },
  {
    "text": "to sell some hipster fashion lifestyle product uh within that you have applications and your applications could",
    "start": "411060",
    "end": "418080"
  },
  {
    "text": "be a marketing application or in this case like an online application a product can have multiple applications right so in this case let's just say we",
    "start": "418080",
    "end": "424319"
  },
  {
    "text": "have an online app online store or something where we're trying to sell this fashion accessories and then within",
    "start": "424319",
    "end": "429600"
  },
  {
    "text": "that an application is composed of one or more services right so now it's starting to maybe look a little familiar we're all at kubecon we know what a",
    "start": "429600",
    "end": "435900"
  },
  {
    "text": "kubernetes service is this is very similar to a kubernetes service but just think more canonical think more Universal right this doesn't have to run",
    "start": "435900",
    "end": "442380"
  },
  {
    "text": "in kubernetes but it's not sort of the same concept so in this case for example I need to have some sort of a web front",
    "start": "442380",
    "end": "448020"
  },
  {
    "text": "end maybe a product catalog maybe a checkout service a bunch of these Services collectively form this application and then these Services have",
    "start": "448020",
    "end": "455340"
  },
  {
    "text": "workloads right the workloads are the actual tasks and functions that are running within them you can think of that those as deployments or pods that",
    "start": "455340",
    "end": "461460"
  },
  {
    "text": "are running there so this is what we're ultimately trying to build but we're trying to build this on top of a",
    "start": "461460",
    "end": "467340"
  },
  {
    "text": "platform right so the way we Define a platform or a simple definition of a platform would be a set of capabilities",
    "start": "467340",
    "end": "473880"
  },
  {
    "text": "where you abstract these capabilities away from your developers right you provide them through some form or",
    "start": "473880",
    "end": "479460"
  },
  {
    "text": "fashion notice that we did not put any product names here right so for example your platform could have virtualization",
    "start": "479460",
    "end": "485099"
  },
  {
    "text": "as a capability or container orchestration or serverless or TI CD observability right or you may not have",
    "start": "485099",
    "end": "491280"
  },
  {
    "text": "CI CD right now you may have to open a ticket and then do a manual rollout that's perfectly fine right you you sort",
    "start": "491280",
    "end": "497160"
  },
  {
    "text": "of iterate on your platform what do we call that when we do it that way oh paperwork as a platform has anybody ever",
    "start": "497160",
    "end": "502919"
  },
  {
    "text": "heard that term I think it's great that's a perfectly right still counts it's still a platform it's still a platform right so and we're consider",
    "start": "502919",
    "end": "509460"
  },
  {
    "text": "continuously iterating it so in a ways you can think of a platform or at least we think of platforms as also products a",
    "start": "509460",
    "end": "515039"
  },
  {
    "text": "platform is sort of your internal product for your internal consumers developers application owners product",
    "start": "515039",
    "end": "520860"
  },
  {
    "text": "managers uh that have capabilities you can even Market that platform in turn you can name it so at Google we call our",
    "start": "520860",
    "end": "527100"
  },
  {
    "text": "platform Borg you can name your Cylon any Battlestar Galactica fence out there",
    "start": "527100",
    "end": "532560"
  },
  {
    "text": "yeah some nods thanks all right where archetypes sort of fit in is this idea",
    "start": "532560",
    "end": "537779"
  },
  {
    "text": "that how do we connect these services to the platform and this is sort of where the archetypes when this is kind of a",
    "start": "537779",
    "end": "543720"
  },
  {
    "text": "new term and we're kind of rolling this out and see see if this lands on you so an archetype is an application or a",
    "start": "543720",
    "end": "550080"
  },
  {
    "text": "service concept a service belongs to an archetype for instance we can say that this platform called Cylon supports",
    "start": "550080",
    "end": "556320"
  },
  {
    "text": "three archetypes we're going to get into what these are Global archetype active passive region active passive Zone",
    "start": "556320",
    "end": "561899"
  },
  {
    "text": "hopefully they're starting to make sense what they are now you can place your services on top of these archetypes",
    "start": "561899",
    "end": "567360"
  },
  {
    "text": "right so in my online store I have many many services but I want the front end to run everywhere it's a global aha web",
    "start": "567360",
    "end": "574560"
  },
  {
    "text": "service I want everybody in the world to be able to buy the clothes that I'm selling but my product catalog might be",
    "start": "574560",
    "end": "580320"
  },
  {
    "text": "regionally significant or geographically because every every region has different products let's say so I'm going to run that as active passive zone so I still",
    "start": "580320",
    "end": "586800"
  },
  {
    "text": "need some redundancy we think archetypes is great because it's a unified language that you can speak with your developers so if you're",
    "start": "586800",
    "end": "593459"
  },
  {
    "text": "a platform admin you're talking to your application owners your product managers you're not talking about products you're not talking about kubernetes and service",
    "start": "593459",
    "end": "600240"
  },
  {
    "text": "mesh and you know get Ops and those types of things you're just talking about capabilities and specifically in",
    "start": "600240",
    "end": "605279"
  },
  {
    "text": "terms of reliability so now you have these two two products you have an internal product called culture platform and then you have this",
    "start": "605279",
    "end": "611760"
  },
  {
    "text": "external product which is your applications where reliability comes in is the goal",
    "start": "611760",
    "end": "616920"
  },
  {
    "text": "of how we measure the the health or where we want this product to do what we want it to do so you can think of it as",
    "start": "616920",
    "end": "622740"
  },
  {
    "text": "this sort of a dotted line and the way we measure it through slos and we're going to get into slos here shortly",
    "start": "622740",
    "end": "628080"
  },
  {
    "text": "notice that the the line so if you're above this line you're healthy if you're below this line you're unhealthy notice",
    "start": "628080",
    "end": "633779"
  },
  {
    "text": "that we did not draw this line below it we don't want 100 of time think of it as",
    "start": "633779",
    "end": "638820"
  },
  {
    "text": "like water these like boats on water right yeah so we always want to allow for a",
    "start": "638820",
    "end": "644820"
  },
  {
    "text": "little bit of error right and that's perfectly fine this is this is the whole idea of building four nine services on",
    "start": "644820",
    "end": "649860"
  },
  {
    "text": "top of three nines risks are the ways your applications or your products can break there are two",
    "start": "649860",
    "end": "655980"
  },
  {
    "text": "types of risks known and unknown and you can think of risks are forces that are trying to push these things below water",
    "start": "655980",
    "end": "661740"
  },
  {
    "text": "they're trying to sink them resilience our mitigations or countermeasures you put into to defend",
    "start": "661740",
    "end": "668579"
  },
  {
    "text": "against those risks specifically known risks right as unknown becomes known then you start doing that and that's sort of the life of and I'm sorry if I'm",
    "start": "668579",
    "end": "675240"
  },
  {
    "text": "not mistaken right that's right so uh an SRE team provides resilience to a platform the platform becomes more",
    "start": "675240",
    "end": "681000"
  },
  {
    "text": "robust and it can handle these risks yeah so visually you can think that risk is trying to push these things down in",
    "start": "681000",
    "end": "686760"
  },
  {
    "text": "some cases they're further down you're breaking your slos or something your your errors are going up and then your resilience is trying to push these",
    "start": "686760",
    "end": "692640"
  },
  {
    "text": "things back up and then you're measuring these two reliability of these two products independently of one another so",
    "start": "692640",
    "end": "697740"
  },
  {
    "text": "your platform might be going through some sort of a rebuild you're moving from VMS to kubernetes or what have you",
    "start": "697740",
    "end": "703440"
  },
  {
    "text": "but your applications are perfectly fine so Steve's going to talk about five",
    "start": "703440",
    "end": "708959"
  },
  {
    "text": "application archetypes yeah this is this is the meat right so let's get into it so this all comes from a white paper it",
    "start": "708959",
    "end": "714779"
  },
  {
    "text": "was written by two googlers named Anna and Brad uh their names are up there the link is up there these will all be in",
    "start": "714779",
    "end": "720480"
  },
  {
    "text": "the slides this is one example we'll get into this in just a second but just so you know this comes from a paper which",
    "start": "720480",
    "end": "725880"
  },
  {
    "text": "has way more in it like you should totally read the whole paper okay the first one you've all seen before like this is our old friend hot",
    "start": "725880",
    "end": "732420"
  },
  {
    "text": "cold so if you have like a system and someone's like we need this to be slightly more reliable the first answer",
    "start": "732420",
    "end": "738300"
  },
  {
    "text": "is let's make two of them right have one Beyond and the other one be like ready and we'll get to it if we need it that's",
    "start": "738300",
    "end": "744300"
  },
  {
    "text": "all this is specifically though what we're doing is we're putting one in one zone and one in the other Zone",
    "start": "744300",
    "end": "750060"
  },
  {
    "text": "and the reason why is because a zone is the basic like unit of failure domain",
    "start": "750060",
    "end": "756360"
  },
  {
    "text": "right is the smallest failure demanding Cloud so if you know something's going to fail it's going to fail on a Zone",
    "start": "756360",
    "end": "762360"
  },
  {
    "text": "um so this is why we split them in half um we have a few things you can kind of measure here I'm just going to point out",
    "start": "762360",
    "end": "768180"
  },
  {
    "text": "a couple of them one is like what can this be robust against and specifically we're saying it's robust against Zone",
    "start": "768180",
    "end": "774540"
  },
  {
    "text": "failure and that doesn't necessarily mean like the whole Zone just like evaporates it can mean like a service in",
    "start": "774540",
    "end": "780720"
  },
  {
    "text": "a Zone fails whether it's your own service or maybe a managed service that you depend on but the granularity is",
    "start": "780720",
    "end": "786899"
  },
  {
    "text": "within a Zone this is not robust against a region failure again Regional services",
    "start": "786899",
    "end": "791940"
  },
  {
    "text": "or like think of natural disasters like a hurricane will take out an entire region at a time or a flood or an",
    "start": "791940",
    "end": "798180"
  },
  {
    "text": "earthquake or something like that so if you're in some sort of like regulated industry you have a lot of contingencies required where you say we have to be in",
    "start": "798180",
    "end": "805139"
  },
  {
    "text": "multiple regions because floods happen right and so this will not defend against that I think we get that",
    "start": "805139",
    "end": "811620"
  },
  {
    "text": "this is a good model for something like uh cots off-the-shelf software or anything where you pay by the license",
    "start": "811620",
    "end": "817200"
  },
  {
    "text": "right because only one is available at a time okay this one's pretty straightforward next one is multi-zonal",
    "start": "817200",
    "end": "822420"
  },
  {
    "text": "so this is like hot hot hot so if you need to move from the last one to this one you're gonna have to make some",
    "start": "822420",
    "end": "828000"
  },
  {
    "text": "changes so you can't really just lift and shift into this in fact often what we see is someone kind of like thinks",
    "start": "828000",
    "end": "834060"
  },
  {
    "text": "let's just do this they lift and shift onto this model and like it doesn't work because the sessions were held like in",
    "start": "834060",
    "end": "839639"
  },
  {
    "text": "the in memory not in a database and it all breaks right everyone has seen this before so yeah some changes are going to",
    "start": "839639",
    "end": "845760"
  },
  {
    "text": "be made if you move to this model but you're going to get more out of it right now we're able to handle uh the The Zone",
    "start": "845760",
    "end": "851700"
  },
  {
    "text": "failure we still can't handle the region failure but in this case the Zone failure is way less fail Ops like",
    "start": "851700",
    "end": "858060"
  },
  {
    "text": "there's there's fewer things we have to do and the cost is a little bit better instead of doubling what we're spending",
    "start": "858060",
    "end": "863940"
  },
  {
    "text": "it's actually just 1.5 x and it has to do with the fact that we're using three zones here and we can get into the math",
    "start": "863940",
    "end": "870000"
  },
  {
    "text": "if you'd like in the back later this is great for just kind of standard web services",
    "start": "870000",
    "end": "875880"
  },
  {
    "text": "okay the next one is active passive region so we're kind of combining the last two so we take the three active",
    "start": "875880",
    "end": "881760"
  },
  {
    "text": "active actives and then we do a backup version of that this is getting more expensive right we're spending a lot",
    "start": "881760",
    "end": "887820"
  },
  {
    "text": "more on on our capacity but we can now handle a new risk that we couldn't handle before we are now capable of",
    "start": "887820",
    "end": "894720"
  },
  {
    "text": "handling a regional failure in this case you may have to still do some stuff in your your fail UPS you might have to",
    "start": "894720",
    "end": "900540"
  },
  {
    "text": "change the load balancer in this case we're changing the the DNS entry and you're you may have to like promote the",
    "start": "900540",
    "end": "906720"
  },
  {
    "text": "the read replica in in the surviving Zone to to be like a a primary database sure",
    "start": "906720",
    "end": "912839"
  },
  {
    "text": "but now we can do we can survive both Zone and region failures uh this one's funny uh because it's",
    "start": "912839",
    "end": "918779"
  },
  {
    "text": "almost exactly like the last one I'm going to back up and see if you can Spot the Difference what change between this one",
    "start": "918779",
    "end": "924240"
  },
  {
    "text": "and that one it's right at the very top you have two host entries and basically what you're",
    "start": "924240",
    "end": "930240"
  },
  {
    "text": "saying is your customers either go to one side or the other side and this is actually pretty common again in regulated Industries when we say these",
    "start": "930240",
    "end": "936959"
  },
  {
    "text": "customers all their data has to live over there and can never leave and these customers have to live over there and they can never leave so the interesting",
    "start": "936959",
    "end": "943920"
  },
  {
    "text": "thing about this model is that if one region fails the other region is not affected",
    "start": "943920",
    "end": "949680"
  },
  {
    "text": "the services that are in the region that fails they they are failed they're down but the other customers are unaffected",
    "start": "949680",
    "end": "956160"
  },
  {
    "text": "because they're isolated so you can imagine this this might be useful in some instances and not others",
    "start": "956160",
    "end": "962399"
  },
  {
    "text": "um the last one here is kind of the big fancy one this is for Global consumer services so this is like the Google",
    "start": "962399",
    "end": "967800"
  },
  {
    "text": "model this is like Google ads and Gmail and search and all this kind of stuff so this is when we're using you know Global",
    "start": "967800",
    "end": "973500"
  },
  {
    "text": "anycast load balancer at the top we're using spanner or cockroach at the bottom and this is great because you can handle",
    "start": "973500",
    "end": "978899"
  },
  {
    "text": "Zone and Regional failures in the fail Ops in this case is absolutely nothing like you you just keep drinking coffee",
    "start": "978899",
    "end": "983940"
  },
  {
    "text": "like that's your plan um and it's great so zones they go down no big deal region goes down no big deal",
    "start": "983940",
    "end": "990240"
  },
  {
    "text": "you have to have the capacity in place sure but uh it you can handle it pretty",
    "start": "990240",
    "end": "995339"
  },
  {
    "text": "great so that was like a lightning round of archetypes what do we do with them so",
    "start": "995339",
    "end": "1001759"
  },
  {
    "text": "first thing is that an archetype is used by a service a service cannot occupy two",
    "start": "1001759",
    "end": "1007160"
  },
  {
    "text": "archetypes it has to kind of pick one so it has to do with its footprint okay that's cool",
    "start": "1007160",
    "end": "1013279"
  },
  {
    "text": "an application can have many services this is what microservices are all about right so in this case you can actually",
    "start": "1013279",
    "end": "1018860"
  },
  {
    "text": "have some of your services be one archetype and some of them be another archetype okay that sounds crazy Steve",
    "start": "1018860",
    "end": "1024199"
  },
  {
    "text": "like why would you possibly do that what we're trying to get at here is graceful degradation we want to allow",
    "start": "1024199",
    "end": "1030500"
  },
  {
    "text": "some services to be run in a cheaper way because we don't care about them if they fail no big deal right this is how we",
    "start": "1030500",
    "end": "1037280"
  },
  {
    "text": "get graceful degradation so we get the application is still running it's not perfect but it's still running it is not",
    "start": "1037280",
    "end": "1043699"
  },
  {
    "text": "down right sometimes you hear things about uh soft dependencies right so if we have a system that has a soft",
    "start": "1043699",
    "end": "1049640"
  },
  {
    "text": "dependency in letter D here we can allow D to fail and our fail Ops in this case is do nothing let it fail right move on",
    "start": "1049640",
    "end": "1057320"
  },
  {
    "text": "it's great you don't have to answer the pager okay how do we measure them slos this is",
    "start": "1057320",
    "end": "1063440"
  },
  {
    "text": "going to be a quick reminder if you haven't seen them before yeah so we're gonna now take some of these archetypes",
    "start": "1063440",
    "end": "1068660"
  },
  {
    "text": "and actually build clusters out because you you probably see them and you say well it's kind of is common sense you're putting stuff in more clusters we're",
    "start": "1068660",
    "end": "1075320"
  },
  {
    "text": "going to end that with uh talking about very discrete archetypes as well as what types of applications that are there but",
    "start": "1075320",
    "end": "1081980"
  },
  {
    "text": "before we build architectures and kubernetes and all that stuff let's just quick recap and SLI is a service level",
    "start": "1081980",
    "end": "1087860"
  },
  {
    "text": "indicator it is a quantitative way to measure the health of any system we're using some sort of a metric so metrics",
    "start": "1087860",
    "end": "1093679"
  },
  {
    "text": "would be like latency throughput availability I think most people know this there's a lot of sres here an SLO",
    "start": "1093679",
    "end": "1098780"
  },
  {
    "text": "is service level objective and that is where you take an SLI and you create a goal around it and this is what measures",
    "start": "1098780",
    "end": "1104360"
  },
  {
    "text": "the health of a service or anything so for example 99 of all get calls should complete in less than 100 milliseconds",
    "start": "1104360",
    "end": "1110720"
  },
  {
    "text": "in a given day that's your SLO collectively it's uncontroversial you're trying to achieve that goal as both the",
    "start": "1110720",
    "end": "1116780"
  },
  {
    "text": "platform team and a product team uh here's another way of looking at it your slis are constantly changing right so",
    "start": "1116780",
    "end": "1123740"
  },
  {
    "text": "sometimes your applications are healthy sometimes they're not and your SLO is that dotted red line that's that surface of the water and you want to make sure",
    "start": "1123740",
    "end": "1129740"
  },
  {
    "text": "that the SLI stays above that rarely we talk about aggregate or cumulative slis or slos I should say",
    "start": "1129740",
    "end": "1136880"
  },
  {
    "text": "right so here's an example here are here's a typical microservice chain service a talks to B talks to C talks to",
    "start": "1136880",
    "end": "1142700"
  },
  {
    "text": "D so in order for this request to pass all four Services must be up for the life of that request not one of them",
    "start": "1142700",
    "end": "1148700"
  },
  {
    "text": "could go down so these are hard dependencies uh the numbers below them are just examples let's just call them availability slos so individually",
    "start": "1148700",
    "end": "1156260"
  },
  {
    "text": "they're 99.9 available but if we want to calculate the SLO of this entire system we just multiply the slos together and",
    "start": "1156260",
    "end": "1163340"
  },
  {
    "text": "when we multiply them together you'll notice something that the SLO actually goes down a little bit right so you would think maybe uh you know Common",
    "start": "1163340",
    "end": "1170179"
  },
  {
    "text": "Sense would say like oh the SLO if this is three nines if they're all three nines it should just be three nines like what's the problem you know right but",
    "start": "1170179",
    "end": "1176120"
  },
  {
    "text": "that's that's not that's not the case so sometimes Steve and I just call this the bad math right because it's it's going in the right wrong direction the number",
    "start": "1176120",
    "end": "1182900"
  },
  {
    "text": "here is not that important we just want to look at the trend is it going down or up that's that's what we want to focus on 99.6 is the best you can do that's",
    "start": "1182900",
    "end": "1190580"
  },
  {
    "text": "your best case scenario buying nothing else you can always do worse obviously the other model is the distributed model",
    "start": "1190580",
    "end": "1196520"
  },
  {
    "text": "right A lot of people kind of know this so this is the same service where previously it was four separate services this is the same service service a but",
    "start": "1196520",
    "end": "1202940"
  },
  {
    "text": "now we have four instances running so these could be the four pods or four VMS uh and now the formula is a little bit",
    "start": "1202940",
    "end": "1209059"
  },
  {
    "text": "different so now if we want to calculate the SLO of this it's 1 minus the failure rates multiplied together so 1 minus",
    "start": "1209059",
    "end": "1215120"
  },
  {
    "text": ".001 raised to the 4. this is great let's just do this 11 9 11 nines does anybody want eleven signs",
    "start": "1215120",
    "end": "1222160"
  },
  {
    "text": "four pods everywhere you get 11 9. now that so that's that we know that's not right so if we have any like probability",
    "start": "1222160",
    "end": "1228559"
  },
  {
    "text": "and statistics majors in the house like what are we doing here we have four independent events that's how you get",
    "start": "1228559",
    "end": "1234320"
  },
  {
    "text": "the math to work but if you have systems that are not independent they share some failure domain this math does not work",
    "start": "1234320",
    "end": "1240799"
  },
  {
    "text": "this way right so how do we get independence between these events we have to span failure domains so in this",
    "start": "1240799",
    "end": "1246620"
  },
  {
    "text": "case these pods cannot be in the same cluster because a cluster is a failure domain they cannot be in the same zone right because the zone is also a failure",
    "start": "1246620",
    "end": "1253280"
  },
  {
    "text": "domain they also can't be in the same region or the same planet right in which the same universe like yeah we thought",
    "start": "1253280",
    "end": "1259160"
  },
  {
    "text": "maybe Multiverse possibly but we haven't invented a load balancer that spans multiverses yet so we can't really do",
    "start": "1259160",
    "end": "1264860"
  },
  {
    "text": "that yet so someday we'll get to 11 nines but not until we get that Marvel has taught us anything multiverses",
    "start": "1264860",
    "end": "1271340"
  },
  {
    "text": "exists but actually we found out that you can cross multiverses so it's still it's shared fade yeah so let's get back",
    "start": "1271340",
    "end": "1277400"
  },
  {
    "text": "on track so again we're looking at the trends here if we do math this is what we call the good math it's always in",
    "start": "1277400",
    "end": "1282559"
  },
  {
    "text": "green greens are good so we're going up this way we're going down the other way and we can't ignore both of them so now",
    "start": "1282559",
    "end": "1288679"
  },
  {
    "text": "let's let's start taking those archetypes and actually build architectures remember we started with",
    "start": "1288679",
    "end": "1293720"
  },
  {
    "text": "archetypes now we're going to build architectures for our platforms and the reason we talked about slos is because we want to talk about reliability and we",
    "start": "1293720",
    "end": "1300260"
  },
  {
    "text": "want to do it measurably so we're going to give you a bonus archetype this was 2.1 and by the way the numbers up there",
    "start": "1300260",
    "end": "1305659"
  },
  {
    "text": "were what was in the paper you don't have you don't have to memorize them or whatever so this is where typically",
    "start": "1305659",
    "end": "1310700"
  },
  {
    "text": "people start right so you you just are getting started in your kubernetes journey and you deploy a kubernetes",
    "start": "1310700",
    "end": "1316159"
  },
  {
    "text": "cluster you throw some services on there you use Ingress maybe you have a back-end database so it has a load",
    "start": "1316159",
    "end": "1321440"
  },
  {
    "text": "balancer a kubernetes cluster with a service and a load and a database the numbers that you see underneath each are",
    "start": "1321440",
    "end": "1327440"
  },
  {
    "text": "the SLA numbers that at least Google Cloud publishes uh externally we're",
    "start": "1327440",
    "end": "1332539"
  },
  {
    "text": "going to just use them as slos SLA service level agreement it's the commercialized version of an SLO why not again we're just interested in the",
    "start": "1332539",
    "end": "1338960"
  },
  {
    "text": "trends and these are the SLA numbers of of Google's managed services so not of",
    "start": "1338960",
    "end": "1344299"
  },
  {
    "text": "the service a but of the load balancer kubernetes cluster and the cloud SQL so",
    "start": "1344299",
    "end": "1349760"
  },
  {
    "text": "we know that this is the bad math so these are all connected together and in order for this request to pass the load balancer must be up the cluster and the",
    "start": "1349760",
    "end": "1356059"
  },
  {
    "text": "service as well as the cloud SQL so we just multiply them together and you get less than two and a half nines",
    "start": "1356059",
    "end": "1361460"
  },
  {
    "text": "bummer right that's why we didn't even put that archetype up there in terms of reliability but this is just to show you",
    "start": "1361460",
    "end": "1367039"
  },
  {
    "text": "that the math there and we have a we have a baseline we have a bottom line important thing to note is this is the best you can do in this architecture you",
    "start": "1367039",
    "end": "1374780"
  },
  {
    "text": "can definitely do worse than this you can always you can operate this poorly and get like zero nines",
    "start": "1374780",
    "end": "1379820"
  },
  {
    "text": "so this is the best you can do your your less than two and a half nines uh okay let's now let's start building it on the",
    "start": "1379820",
    "end": "1386059"
  },
  {
    "text": "five archetypes that we showed you so this is what the architecture would look like by the way we're using gke and",
    "start": "1386059",
    "end": "1391700"
  },
  {
    "text": "Google stuff you don't have to but this is just because we work at Google and legal told us to do it",
    "start": "1391700",
    "end": "1397820"
  },
  {
    "text": "and the fact that we wanted to use the SLA so here we have a active passive Zone",
    "start": "1397820",
    "end": "1403940"
  },
  {
    "text": "uh the couple of things that we notice here and we're going to go through this very quickly is we have two kubernetes clusters in one region in two separate",
    "start": "1403940",
    "end": "1410720"
  },
  {
    "text": "zones right so we've separated out the failure domains here same service running on both clusters so we need some",
    "start": "1410720",
    "end": "1416539"
  },
  {
    "text": "sort of a way to connect this we're this beyond the scope of this talk but let's just say we figured that part out and then we have two SQL servers or two SQL",
    "start": "1416539",
    "end": "1423919"
  },
  {
    "text": "databases as well again in separate zones now we have this good math happening in the middle for these",
    "start": "1423919",
    "end": "1429020"
  },
  {
    "text": "subsystems for the kubernetes system as well as the the SQL so we've done that math right below them in green but then",
    "start": "1429020",
    "end": "1435440"
  },
  {
    "text": "we still need the entire thing to be up and then we've done that math at the bottom and you can see that just going from one cluster to two cluster we're",
    "start": "1435440",
    "end": "1441799"
  },
  {
    "text": "headed in the right direction we're almost at four nines so please start here right and this should work for a",
    "start": "1441799",
    "end": "1447799"
  },
  {
    "text": "lot of applications next one was active active active it doesn't look that different now we have",
    "start": "1447799",
    "end": "1453500"
  },
  {
    "text": "three kubernetes clusters in the same region but in three separate zones where we can survive one or more Zone failures",
    "start": "1453500",
    "end": "1459440"
  },
  {
    "text": "within that and there's no fail-ops for this one right so your service must be able to handle this idea of distributed",
    "start": "1459440",
    "end": "1464720"
  },
  {
    "text": "Ness uh Cloud SQL doesn't change and then again we've done the good math for the three clusters for the two SQL",
    "start": "1464720",
    "end": "1471200"
  },
  {
    "text": "servers and then if we connect them together we're at four nines we're headed in the right direction everything is moving up let's go into multi-regions",
    "start": "1471200",
    "end": "1478280"
  },
  {
    "text": "and and this is a good sort of progression right where you start maybe in a single region and then something either bad happens or you've identified",
    "start": "1478280",
    "end": "1485000"
  },
  {
    "text": "that there could be a risk to a region or you've pushed a bad config to a load balancer one time you said we don't want",
    "start": "1485000",
    "end": "1490760"
  },
  {
    "text": "to have that happen again and then you start moving to multi-regional architectures so now we have two regions so it's",
    "start": "1490760",
    "end": "1496100"
  },
  {
    "text": "basically the the it's almost like times two of the previous one so you have a blue region up top with the three",
    "start": "1496100",
    "end": "1501620"
  },
  {
    "text": "clusters in three different zones a green region at the bottom three clusters in three different zones now we",
    "start": "1501620",
    "end": "1506659"
  },
  {
    "text": "have two Regional load balancers so you have two two times uh two ways to get",
    "start": "1506659",
    "end": "1512120"
  },
  {
    "text": "things right right in case something happens we have a cloud SQL pair in region a cloud SQL pair in region B and then DNS",
    "start": "1512120",
    "end": "1519020"
  },
  {
    "text": "is doing its thing lots of parallel math happening now we have load balancers and",
    "start": "1519020",
    "end": "1524059"
  },
  {
    "text": "six clusters and four SQL there's a lot of complexity yeah and like we're not claiming that you will actually get",
    "start": "1524059",
    "end": "1529700"
  },
  {
    "text": "those nines this is just like showing you the direction of travel so now we have I don't even know like 18",
    "start": "1529700",
    "end": "1535640"
  },
  {
    "text": "nines or something so looking good uh the next one is actually exactly the same it the only difference here was",
    "start": "1535640",
    "end": "1542120"
  },
  {
    "text": "this idea that we're sending half of the users to region a half of the users to region B they may be able to fail over",
    "start": "1542120",
    "end": "1547520"
  },
  {
    "text": "that's that's that's beyond the scope and we've also changed the the database into a more sort of I don't know Cloud",
    "start": "1547520",
    "end": "1554539"
  },
  {
    "text": "native database in this case we're using spanner uh but you could use cockroach or something like that too but otherwise",
    "start": "1554539",
    "end": "1559760"
  },
  {
    "text": "it's exactly the same again we're headed in the right direction and then the last one was Global and this was this",
    "start": "1559760",
    "end": "1565400"
  },
  {
    "text": "multi-regional no fail Ops using a global database layer and a global load balancing layer it actually got simple",
    "start": "1565400",
    "end": "1572179"
  },
  {
    "text": "right so we have one Global load balancer front ending a bunch of clusters in this case we're just doing",
    "start": "1572179",
    "end": "1577940"
  },
  {
    "text": "it in two two regions so six clusters total three clusters in region a and three different zones three clusters in",
    "start": "1577940",
    "end": "1584360"
  },
  {
    "text": "region B and then a global database in the back and then we have this",
    "start": "1584360",
    "end": "1589520"
  },
  {
    "text": "so yeah I just noticed that I don't know if does anybody notice something weird happened here in terms of SLO",
    "start": "1589520",
    "end": "1596000"
  },
  {
    "text": "and it went down right embarrassing that's not cool so like let's just go back so like we went back this",
    "start": "1596000",
    "end": "1601880"
  },
  {
    "text": "multi-regions sort of a thing we have I don't know so many nines here and then we have less here what's What's Happening Here Yeah so the the reason",
    "start": "1601880",
    "end": "1607520"
  },
  {
    "text": "why like this is okay it's like it's still a lot of nines like four nines is kind of a lot um there's way less to screw up here",
    "start": "1607520",
    "end": "1614059"
  },
  {
    "text": "right so there's there's fewer chances to to mess up remember this is the best case scenario you can definitely get you",
    "start": "1614059",
    "end": "1621080"
  },
  {
    "text": "can do worse than this when you build this out so Simplicity matters a lot when it comes to operations and making",
    "start": "1621080",
    "end": "1626419"
  },
  {
    "text": "changes um so you know take these numbers with a grain of salt there's there's a lot more",
    "start": "1626419",
    "end": "1632360"
  },
  {
    "text": "going on here than than just what's on this one screen yeah now previously we talked about this idea that a service can belong to one",
    "start": "1632360",
    "end": "1638779"
  },
  {
    "text": "archetype and we've just showed you five different architectures so maybe you're thinking like well do I have to build five platforms one for each type of",
    "start": "1638779",
    "end": "1645140"
  },
  {
    "text": "service well that's not the case as a matter of fact the astute amongst you might have noticed that the further we move along the other archetype sort of",
    "start": "1645140",
    "end": "1652220"
  },
  {
    "text": "gets subsumed into the one so here's the the same archetype as the last diagram so this is the global archetype and",
    "start": "1652220",
    "end": "1658039"
  },
  {
    "text": "we're showing an application that let's say has three services a b and c and they're running in three different",
    "start": "1658039",
    "end": "1663440"
  },
  {
    "text": "archetypes so your service a that could be your front end that's running as a global archetype your service B that could be a product catalog it's running",
    "start": "1663440",
    "end": "1669140"
  },
  {
    "text": "as a regional or an act or like a multi-zonal archetype and then your service C that could be your rating service or some sort of an email service",
    "start": "1669140",
    "end": "1675860"
  },
  {
    "text": "that gets sent out when you order something that's just running it as an active passive sort of a way",
    "start": "1675860",
    "end": "1682460"
  },
  {
    "text": "so what we're trying to show here at the end of the day is you have this Continuum right if you want to get more",
    "start": "1682460",
    "end": "1687919"
  },
  {
    "text": "reliability you have to spend more effort think of that either as money or just time or technical debt or whatever",
    "start": "1687919",
    "end": "1693799"
  },
  {
    "text": "right and this is an exponential curve so the further you go on here the steeper and steeper it gets what we're",
    "start": "1693799",
    "end": "1699860"
  },
  {
    "text": "trying to present here today is just some discrete points along that line so you don't have to just invent everything",
    "start": "1699860",
    "end": "1705620"
  },
  {
    "text": "from scratch every single time you have some known good starting points and we're calling them archetypes they come",
    "start": "1705620",
    "end": "1710720"
  },
  {
    "text": "from the paper you can call them patterns you can call them points you can call them whatever you want but at least you're starting somewhere and you",
    "start": "1710720",
    "end": "1716720"
  },
  {
    "text": "can present these to your Dev teams right you can say like pick one of the five like you don't have to learn all of",
    "start": "1716720",
    "end": "1722059"
  },
  {
    "text": "kubernetes and all of istio and all the things just pick one of these things and they'll go like oh the middle one and",
    "start": "1722059",
    "end": "1727279"
  },
  {
    "text": "you're like great we're done right we can move on the best part about this is then if they're wrong you just graduate them up",
    "start": "1727279",
    "end": "1733880"
  },
  {
    "text": "or down right pretty straightforward so if you think about like the types of",
    "start": "1733880",
    "end": "1739460"
  },
  {
    "text": "services that will go along here they just map to these to these points right so like your cots probably doesn't need",
    "start": "1739460",
    "end": "1745760"
  },
  {
    "text": "alt to be all the way at the top right it's probably not going to work anyway but you can give them the options right",
    "start": "1745760",
    "end": "1752919"
  },
  {
    "text": "don't forget about the effort if you really want that fifth nine look how big that e is right and look how far to the",
    "start": "1752960",
    "end": "1760640"
  },
  {
    "text": "to the right it goes like not a lot it's like a lot of up and not a lot of right this is this is the uh the problem with",
    "start": "1760640",
    "end": "1766880"
  },
  {
    "text": "exponential curves is it gets harder and harder to Hill Climb so don't forget that uh make sure that when people say I",
    "start": "1766880",
    "end": "1773480"
  },
  {
    "text": "want five nines you show them this graph and say like are you sure you want to spend all the money um another thing you can do with this",
    "start": "1773480",
    "end": "1778880"
  },
  {
    "text": "graph is if someone says I want 100 you just point at them and say here you go it will be infinite money right that's",
    "start": "1778880",
    "end": "1784700"
  },
  {
    "text": "how that's how limits work right and I think oh we have some conclusions",
    "start": "1784700",
    "end": "1790100"
  },
  {
    "text": "good um so start with archetypes that's a good that you know if you're if you remember anything from this talk",
    "start": "1790100",
    "end": "1795860"
  },
  {
    "text": "remember that just start with these things it's a good good place to start before you start drawing your architectures",
    "start": "1795860",
    "end": "1802700"
  },
  {
    "text": "don't forget that your applications have many services in them right we do microservices for a reason let's use",
    "start": "1802700",
    "end": "1808940"
  },
  {
    "text": "them we want them to degrade gracefully uh and finally what we're trying to get here is we want to have resilient teams",
    "start": "1808940",
    "end": "1816140"
  },
  {
    "text": "that's us humans right we want to build robust platforms that can handle these risks because we want more reliable",
    "start": "1816140",
    "end": "1822200"
  },
  {
    "text": "services and products right we want the internet to be more reliable that's the state we want to get it in this is how",
    "start": "1822200",
    "end": "1827539"
  },
  {
    "text": "we do it don't forget to give us feedback",
    "start": "1827539",
    "end": "1832880"
  },
  {
    "text": "I think we have um five minutes for questions if you guys want to ask us some questions we'll",
    "start": "1832880",
    "end": "1838520"
  },
  {
    "text": "both be you'll be at the Google Booth from two to four I think yep uh I'll be at the istio booth from like 1 30 to 3",
    "start": "1838520",
    "end": "1844279"
  },
  {
    "text": "30 on Google Booth from four to six I don't know if you guys will remember that uh or just come on up after the talk otherwise thank you so much for",
    "start": "1844279",
    "end": "1850640"
  },
  {
    "text": "your time [Applause]",
    "start": "1850640",
    "end": "1857500"
  }
]