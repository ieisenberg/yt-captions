[
  {
    "text": "hello everyone welcome bonjus",
    "start": "1240",
    "end": "6439"
  },
  {
    "text": "um as you may have noticed already um Argo City is not an opinionated project",
    "start": "6439",
    "end": "13320"
  },
  {
    "text": "um what I mean by that is that it doesn't dictate how you use the tool you can do things like using the",
    "start": "13320",
    "end": "21800"
  },
  {
    "text": "generated manifest like he was mentioned yesterday and aroon in different talks",
    "start": "21800",
    "end": "27519"
  },
  {
    "text": "or you can do something a little bit more isoteric like using NX to generate your",
    "start": "27519",
    "end": "34760"
  },
  {
    "text": "manifest and hook that up in Argo CD during runtime those are use cases that",
    "start": "34760",
    "end": "40039"
  },
  {
    "text": "are available and it's up to you to decide how to use it how to use the tool this talk is about those use cases where",
    "start": "40039",
    "end": "48039"
  },
  {
    "text": "you want to generate manifests in a specific way that is uh specific to your",
    "start": "48039",
    "end": "55600"
  },
  {
    "text": "company let me quickly introduce myself my name is uh Leonardo I usually go by Leo I'm a Staff uh software developer at",
    "start": "55600",
    "end": "63079"
  },
  {
    "text": "into it and I am a Argo CD and Argo roll outs",
    "start": "63079",
    "end": "68280"
  },
  {
    "text": "maintainer uh hello everyone uh my name is Alexander matv I prefer to go by Alex",
    "start": "68280",
    "end": "74759"
  },
  {
    "text": "and uh I'm a longtime maintainer of Argo project I started working on it from day one and currently I'm a Chief Architect",
    "start": "74759",
    "end": "81479"
  },
  {
    "text": "and co-founder of AC the company that tries to make Argo even better and um",
    "start": "81479",
    "end": "88240"
  },
  {
    "text": "I'm going to start the presentation so this is the plan and agenda for today's",
    "start": "88240",
    "end": "94560"
  },
  {
    "text": "talk so as Leo mentioned we are going to talk about uh config management and",
    "start": "94560",
    "end": "99680"
  },
  {
    "text": "first I will describe what does it mean what do we mean by saying config management Tools in argu CD next I will",
    "start": "99680",
    "end": "106439"
  },
  {
    "text": "jump into the feature that we're going to uh describe in details today it's config management plugins or CMP for",
    "start": "106439",
    "end": "113439"
  },
  {
    "text": "shortness so I will describe first iteration second iteration and then I will do a demo where I will try to teach",
    "start": "113439",
    "end": "120119"
  },
  {
    "text": "you how to create your own config management plugin and then I will uh give it back to Leo and he will do a",
    "start": "120119",
    "end": "126840"
  },
  {
    "text": "deep dive and describe security enhancements high level architecture of a feature some challenges and",
    "start": "126840",
    "end": "132840"
  },
  {
    "text": "improvements that are coming uh soon and with that let's go ahead and start the",
    "start": "132840",
    "end": "140080"
  },
  {
    "text": "presentation so uh as I mentioned I want to give a brief overview of what config",
    "start": "140080",
    "end": "146000"
  },
  {
    "text": "management tools means in Argo CD and um so from day one I'm sorry I have to stay",
    "start": "146000",
    "end": "152599"
  },
  {
    "text": "away from my mic uh from day one we decided that Argo CD is not going to force Engineers to store yaml files in",
    "start": "152599",
    "end": "159879"
  },
  {
    "text": "git repositories obviously because it requires a lot of repetition no developers wants to do it and everyone",
    "start": "159879",
    "end": "166840"
  },
  {
    "text": "prefer to use tools like Helm or customized to generate yaml on the Fly",
    "start": "166840",
    "end": "172159"
  },
  {
    "text": "and so uh as a maintainers we realized it's a huge requirement and so we decided to introduce first class support",
    "start": "172159",
    "end": "179480"
  },
  {
    "text": "of those Tools in ARG CD itself and first class support means uh those tools",
    "start": "179480",
    "end": "185000"
  },
  {
    "text": "are baked into argd image and available with no configuration out of the box and",
    "start": "185000",
    "end": "191560"
  },
  {
    "text": "the next big decision we've made is argu CD is going to be smart about those tools which means it will decide",
    "start": "191560",
    "end": "199239"
  },
  {
    "text": "automatically with no input from from a user which tools supposed to be used for manifest generation and uh to describe",
    "start": "199239",
    "end": "207440"
  },
  {
    "text": "it even simpler so if Argo CD sees chart. yaml file in the git directory it",
    "start": "207440",
    "end": "213640"
  },
  {
    "text": "uses Helm if it's customization it uses customize and so on and so uh and then",
    "start": "213640",
    "end": "220319"
  },
  {
    "text": "after some few iterations we decided to go even one step ahead and argd got a",
    "start": "220319",
    "end": "226799"
  },
  {
    "text": "user interface support and CLI support and I'm kind of trying to show it on the screen right now so argd allows end user",
    "start": "226799",
    "end": "234519"
  },
  {
    "text": "to interact with the config management tool and quickly change influence the",
    "start": "234519",
    "end": "240599"
  },
  {
    "text": "Manifest generation through parameters and so in this particular example developer can overwrite image text uh on",
    "start": "240599",
    "end": "248879"
  },
  {
    "text": "the Fly using customize and that enables use cases such as dynamically generate",
    "start": "248879",
    "end": "255239"
  },
  {
    "text": "applications for pool requests and provide so-called preview applications or simply modify your QA environment to",
    "start": "255239",
    "end": "263080"
  },
  {
    "text": "test the changes that you want to test and without committing code to git and",
    "start": "263080",
    "end": "268520"
  },
  {
    "text": "so uh looking back I can say um it was a really great decision to",
    "start": "268520",
    "end": "275199"
  },
  {
    "text": "support those tools out of the box it really help with adoption but after a year or two we learn about some",
    "start": "275199",
    "end": "282720"
  },
  {
    "text": "disadvantages and uh the list of problems is on the screen right now uh",
    "start": "282720",
    "end": "288120"
  },
  {
    "text": "the first biggest issue was uh our opinion about the most popular tools not",
    "start": "288120",
    "end": "294039"
  },
  {
    "text": "necessar much as with everyone else's opinion so one mistake we learned very quickly is for example queset the very",
    "start": "294039",
    "end": "301440"
  },
  {
    "text": "first tool by the way that was supported by argd it just died a year after release of argd so obviously not the",
    "start": "301440",
    "end": "308919"
  },
  {
    "text": "most popular tool anymore and uh on top of that we've got a lot of requests to",
    "start": "308919",
    "end": "314520"
  },
  {
    "text": "support more tools such as tanka heli cdk and those tools are very obviously",
    "start": "314520",
    "end": "321520"
  },
  {
    "text": "great tools and deserves to be supported however we learn our lesson from supporting queset and then we realized",
    "start": "321520",
    "end": "329960"
  },
  {
    "text": "that it's a lot of Maintenance burden to support a new tool in Argo CD um and so finally uh we've got a lot",
    "start": "329960",
    "end": "338840"
  },
  {
    "text": "of complaints from end users developers that Argo CD release cycle not necessary",
    "start": "338840",
    "end": "344840"
  },
  {
    "text": "matches with the release cycle of all those tools and so the caveat is let's",
    "start": "344840",
    "end": "350039"
  },
  {
    "text": "say Helm release a new awesome feature that's available for you today but if you want to use it in Argo CD you have",
    "start": "350039",
    "end": "356720"
  },
  {
    "text": "to wait for the next Argo CD release which is which is probably happening two months in the future which is obviously",
    "start": "356720",
    "end": "363199"
  },
  {
    "text": "not not optimal and so uh it was clear that change is required and that's",
    "start": "363199",
    "end": "370199"
  },
  {
    "text": "why we come up with an improvement and Improvement was a new functionality called config management plugins or CMP",
    "start": "370199",
    "end": "378240"
  },
  {
    "text": "and uh this is this slide represents the first iteration of this feature and uh",
    "start": "378240",
    "end": "384280"
  },
  {
    "text": "to quickly describe it uh the main feature that it provide is ability to",
    "start": "384280",
    "end": "390560"
  },
  {
    "text": "take the CLI that you want to use for manifest generation and then just",
    "start": "390560",
    "end": "396000"
  },
  {
    "text": "dynamically configure it in Argo CD and so as an administrator you would have to provide pretty much two pieces of",
    "start": "396000",
    "end": "403199"
  },
  {
    "text": "information first the name of this tool and second just a CLI command that",
    "start": "403199",
    "end": "409479"
  },
  {
    "text": "invoke the binary of your tool and produce Json or yl and this way you can",
    "start": "409479",
    "end": "415639"
  },
  {
    "text": "pretty much take anything and convert it into config management tool in AR CD and uh we even supported limited uh",
    "start": "415639",
    "end": "425160"
  },
  {
    "text": "version of parameters so end user have ability to provide a list of environment",
    "start": "425160",
    "end": "431560"
  },
  {
    "text": "variables that will be passed to uh the environment while executing the shell command to generate manifests and so um",
    "start": "431560",
    "end": "439520"
  },
  {
    "text": "the result was pretty good we the yaml snippet that you are seeing right now it's the real time snippet that a lot of",
    "start": "439520",
    "end": "445960"
  },
  {
    "text": "people used in production it allows to take Helman and customize and combine it into one tool customized Helm so Helm",
    "start": "445960",
    "end": "454000"
  },
  {
    "text": "will produce a manifest from a Helm chart and customize provide some patches on top and as usual uh we solved like",
    "start": "454000",
    "end": "463280"
  },
  {
    "text": "80% of use cases and didn't solve remaining 20% that required a lot of",
    "start": "463280",
    "end": "470000"
  },
  {
    "text": "work here is a list of things that we didn't do well or just didn't plan even",
    "start": "470080",
    "end": "475560"
  },
  {
    "text": "to solving un solving so first of all parameters support was not ideal like",
    "start": "475560",
    "end": "482240"
  },
  {
    "text": "end users had to know the list of environment variable names with no suggestion from user interface which",
    "start": "482240",
    "end": "487599"
  },
  {
    "text": "environment variables even make sense uh second uh we did not Implement autod",
    "start": "487599",
    "end": "492840"
  },
  {
    "text": "detection so let's say if you have a plugin that's meant for hel Helm file",
    "start": "492840",
    "end": "497919"
  },
  {
    "text": "and if you point argocd to a directory which has a Helm file configuration argd",
    "start": "497919",
    "end": "503120"
  },
  {
    "text": "would not know what to do and end user would have to explicitly specify it in",
    "start": "503120",
    "end": "508440"
  },
  {
    "text": "application spec which is not ideal again not the perfect user experience and uh finally administrators",
    "start": "508440",
    "end": "517640"
  },
  {
    "text": "Argo administrators we were not super happy because we did not really provide any help for them to deliver binaries",
    "start": "517640",
    "end": "524959"
  },
  {
    "text": "and they had to do tricks that you see on the screen right now the yaml snippet",
    "start": "524959",
    "end": "530160"
  },
  {
    "text": "uh on the right side of the screen shows a patch that they need to apply to a",
    "start": "530160",
    "end": "535519"
  },
  {
    "text": "particular Argo CD component and use tricks like in containers to download",
    "start": "535519",
    "end": "540720"
  },
  {
    "text": "binaries on the Fly and then volume Mount copy it into the main container which is not ideal and so finally we're",
    "start": "540720",
    "end": "548279"
  },
  {
    "text": "getting to a feature that I'm going to demonstrate soon uh config management plugins V2 so",
    "start": "548279",
    "end": "556680"
  },
  {
    "text": "um we kind of worked on on the feedback of a first iteration and implemented the",
    "start": "556680",
    "end": "563120"
  },
  {
    "text": "new version of config management plugins functionality it had some it basically",
    "start": "563120",
    "end": "569040"
  },
  {
    "text": "had a it it's like a complete right so it had breaking changes but it provided a set of improvements so the",
    "start": "569040",
    "end": "576880"
  },
  {
    "text": "biggest Improvement was uh ability to automatically detect uh the tool that's",
    "start": "576880",
    "end": "583360"
  },
  {
    "text": "supposed to be used for Generation which means if you yeah for the helm file that",
    "start": "583360",
    "end": "588480"
  },
  {
    "text": "as you will see soon you can literally configure it once in the centralized",
    "start": "588480",
    "end": "594160"
  },
  {
    "text": "manag configuration and then argd is going to know that the plugin supposed to be used to generate to use Helm file",
    "start": "594160",
    "end": "601640"
  },
  {
    "text": "for Helm file based application manifest generation next big Improvement was",
    "start": "601640",
    "end": "607240"
  },
  {
    "text": "parameters support so pretty much as a developer of a config management plug-in",
    "start": "607240",
    "end": "613519"
  },
  {
    "text": "you can provide first class like experience in argd UI so argd is going",
    "start": "613519",
    "end": "618880"
  },
  {
    "text": "to know which parameters you can possibly provide to this application and",
    "start": "618880",
    "end": "624560"
  },
  {
    "text": "default values of those application which is a big Improvement and uh finally we improved security and Leo",
    "start": "624560",
    "end": "632240"
  },
  {
    "text": "will cover the security improvements in details once I'm done and so that's",
    "start": "632240",
    "end": "637720"
  },
  {
    "text": "enough of theory now I'm going to I will try to do a demo with those microphone",
    "start": "637720",
    "end": "643200"
  },
  {
    "text": "issues and show you how that feature Works in in real",
    "start": "643200",
    "end": "648360"
  },
  {
    "text": "life so for this demo I created a git repository so you can just basically",
    "start": "649519",
    "end": "655720"
  },
  {
    "text": "repeat your demo repeat the same demo on your laptop the only requirement is you need to have some kind of kubernetes",
    "start": "655720",
    "end": "662040"
  },
  {
    "text": "cluster mini Cube KS whatever works for you so now I'm going to switch off the",
    "start": "662040",
    "end": "668160"
  },
  {
    "text": "presentation and jump into the git repository let me make screen a little",
    "start": "668160",
    "end": "674040"
  },
  {
    "text": "bigger and so um basically the git repository has all the information you",
    "start": "674040",
    "end": "680399"
  },
  {
    "text": "need to to try the demo yourself it's going to teach us how to use CMP V2 and",
    "start": "680399",
    "end": "688240"
  },
  {
    "text": "create a plugin that enables Helm file uh as a manifest generation tool in Argo",
    "start": "688240",
    "end": "694360"
  },
  {
    "text": "CD in case you don't know here is the link to the helm file home directory a",
    "start": "694360",
    "end": "700560"
  },
  {
    "text": "short summary it's the CLI tool built on top of Helm that adds a lot of awesome",
    "start": "700560",
    "end": "706040"
  },
  {
    "text": "features it simplifies secret management environment variables usage and more so",
    "start": "706040",
    "end": "711440"
  },
  {
    "text": "I encourage you to try it I I really like it and use it and um next I want to",
    "start": "711440",
    "end": "717680"
  },
  {
    "text": "switch to content of this repper just briefly explain what what do we have here and we literally have three files",
    "start": "717680",
    "end": "724040"
  },
  {
    "text": "in addition to RM uh the most boring file is customization yaml I hope you know what",
    "start": "724040",
    "end": "731560"
  },
  {
    "text": "customize is but basically it's the tool that bring together a bunch of yaml files and so first thing I'm doing here",
    "start": "731560",
    "end": "738600"
  },
  {
    "text": "I just take open source Argo CG manifests that install plain Argo CD",
    "start": "738600",
    "end": "744920"
  },
  {
    "text": "with no modifications and then next we slightly ify it by applying a patch to argd repo",
    "start": "744920",
    "end": "753279"
  },
  {
    "text": "server the component that's responsible for manifest generation and next I want to show you",
    "start": "753279",
    "end": "760440"
  },
  {
    "text": "the changes that patch applies and so as a short summary it",
    "start": "760440",
    "end": "767320"
  },
  {
    "text": "introduces a sidecar container that represents our plugin so the name of",
    "start": "767320",
    "end": "773920"
  },
  {
    "text": "plugin is a Helm file because it supports Helm file usage in AR CD and the m difference of the first version",
    "start": "773920",
    "end": "780760"
  },
  {
    "text": "comparing to second is that here you're able to use any image that has binaries",
    "start": "780760",
    "end": "786279"
  },
  {
    "text": "of your of your tool and so you are no longer limited to argd image you can use your own image here and so for this demo",
    "start": "786279",
    "end": "794680"
  },
  {
    "text": "I'm using Community maintain image uh that supports integration between Argo",
    "start": "794680",
    "end": "800959"
  },
  {
    "text": "and Helm and then next uh I have volume mounts that just must be there for every",
    "start": "800959",
    "end": "809360"
  },
  {
    "text": "a config management plugin so you can find those volume mounts in documentation or just copy it from this",
    "start": "809360",
    "end": "815040"
  },
  {
    "text": "demo and last bit is I need to provide a yaml file that has configuration detail",
    "start": "815040",
    "end": "821959"
  },
  {
    "text": "of a plugin and in this case I'm using just a config map customized config map",
    "start": "821959",
    "end": "827639"
  },
  {
    "text": "generator and uh config map volume Mount so basically the content of this the",
    "start": "827639",
    "end": "835000"
  },
  {
    "text": "file that will be delivered using volume Mount is defined here here in the plug-in. yaml",
    "start": "835000",
    "end": "841000"
  },
  {
    "text": "file and it explains to argd First how to generate manifests so I just selected",
    "start": "841000",
    "end": "848399"
  },
  {
    "text": "two commands init command behind the scene download Helm chart dependencies",
    "start": "848399",
    "end": "854839"
  },
  {
    "text": "and generate command eventually execute Helm template to produce yaml output into standard",
    "start": "854839",
    "end": "860839"
  },
  {
    "text": "out next more interesting part is this is a part of configuration that explains",
    "start": "860839",
    "end": "867759"
  },
  {
    "text": "argu CD how to detect that application in the git is managed by Helm file so",
    "start": "867759",
    "end": "876440"
  },
  {
    "text": "and as you can guess it looks at the content of the git reposit git folder in a git repository and if it sees Helm",
    "start": "876440",
    "end": "883240"
  },
  {
    "text": "file. yaml it's going to use this particular plugin and last bit the most",
    "start": "883240",
    "end": "888639"
  },
  {
    "text": "complex one that you can learn in Aro CD documentation it's parameter detection so basically it's a shell command that",
    "start": "888639",
    "end": "895360"
  },
  {
    "text": "produces a Json list of elements where each element as a parameter that has a",
    "start": "895360",
    "end": "900920"
  },
  {
    "text": "name type and default value and that's pretty much it so we have this git",
    "start": "900920",
    "end": "907519"
  },
  {
    "text": "repository and it's ready to be used to use it just execute this yamel snippet",
    "start": "907519",
    "end": "913440"
  },
  {
    "text": "which will create a name space and then uh apply the Manifest generated by this",
    "start": "913440",
    "end": "920480"
  },
  {
    "text": "repo it will install Argo CD configure it to use the plugin and so for the sake",
    "start": "920480",
    "end": "925880"
  },
  {
    "text": "of time I did it before the demo so now I just have a ARG CD running locally I",
    "start": "925880",
    "end": "931920"
  },
  {
    "text": "can open it it's running on my local host and as you can see it basically has",
    "start": "931920",
    "end": "936959"
  },
  {
    "text": "no applications and sorry let me open it again I had just a bookmark that creates",
    "start": "936959",
    "end": "943959"
  },
  {
    "text": "an application using um Helm file so I",
    "start": "943959",
    "end": "949319"
  },
  {
    "text": "hope you are familiar with zargo CD user interface but long story short it creates an application based on content",
    "start": "949319",
    "end": "954680"
  },
  {
    "text": "of this repository Helm file I'm using it because it's a it has the examples",
    "start": "954680",
    "end": "960720"
  },
  {
    "text": "that I need to use and I'm going to use it for the demo and the first enhancement I want to demonstrate is",
    "start": "960720",
    "end": "967120"
  },
  {
    "text": "detection so as you can see argd inspected the content of this repo and it detected all the helm Helm file based",
    "start": "967120",
    "end": "975000"
  },
  {
    "text": "applications so as a end user I don't have to guess like what's my path is so it's a nice",
    "start": "975000",
    "end": "981279"
  },
  {
    "text": "convenience I'm going to use this uh sample deployment based on Helm file and",
    "start": "981279",
    "end": "989240"
  },
  {
    "text": "next Improvement is as you can see argd knows that it's based on a plugin and it",
    "start": "989240",
    "end": "994720"
  },
  {
    "text": "detected all the parameters that as a end user I can specify and uh kind of",
    "start": "994720",
    "end": "1000839"
  },
  {
    "text": "influence how manifest are being generated so I'm very happy it worked",
    "start": "1000839",
    "end": "1006560"
  },
  {
    "text": "basically demo already successful but just to finish it I need to finally create application it will take few",
    "start": "1006560",
    "end": "1013000"
  },
  {
    "text": "seconds and as you can see application was created if you are familiar with ARG",
    "start": "1013000",
    "end": "1019160"
  },
  {
    "text": "then great you already know what happened if not then basically argd knows that this directory has two",
    "start": "1019160",
    "end": "1025558"
  },
  {
    "text": "kubernetes resources one of them is deployment and it's supposed to be deployed to you know to namespace that I",
    "start": "1025559",
    "end": "1032678"
  },
  {
    "text": "chose and that's it so pretty much you have enough of information to create",
    "start": "1032679",
    "end": "1037959"
  },
  {
    "text": "your own plugin it can be a Helm file or whatever tool you like like tanka and",
    "start": "1037959",
    "end": "1043558"
  },
  {
    "text": "now I want to pass it back to R so he can explain what happened you know in background and how it how it works Leo",
    "start": "1043559",
    "end": "1051559"
  },
  {
    "text": "please continue okay thank you Alex for the demo and I want to start this section of",
    "start": "1051559",
    "end": "1058559"
  },
  {
    "text": "the presentation just opening um a really short parenthesis just to say that by the time the Argo City project",
    "start": "1058559",
    "end": "1066080"
  },
  {
    "text": "was about to be graduated by cncf one of the prerequisites uh that",
    "start": "1066080",
    "end": "1071320"
  },
  {
    "text": "was brought to us is that we had to uh step up in our security posture at that",
    "start": "1071320",
    "end": "1077720"
  },
  {
    "text": "point in time um we were having cves happening and being presented to us on a",
    "start": "1077720",
    "end": "1084760"
  },
  {
    "text": "weekly basis sometimes even three CVS at a week and uh as a matter of fact uh CMP",
    "start": "1084760",
    "end": "1091760"
  },
  {
    "text": "was one of the main targets CMP V1 and even V2 H when it first came out was um",
    "start": "1091760",
    "end": "1099400"
  },
  {
    "text": "yeah one of the the the main targets of those uh cves uh and at the end we we we",
    "start": "1099400",
    "end": "1106120"
  },
  {
    "text": "uh we got graduated um but if you if you",
    "start": "1106120",
    "end": "1111320"
  },
  {
    "text": "if you analyze all the issues that we faced uh it boils down to those two main",
    "start": "1111320",
    "end": "1116760"
  },
  {
    "text": "categories that I'm showing you here um and it and it has to do with the the",
    "start": "1116760",
    "end": "1122080"
  },
  {
    "text": "fact that um the CMP process was running in the same",
    "start": "1122080",
    "end": "1127960"
  },
  {
    "text": "process as the repo server and they were sharing the git environment so with that we could have",
    "start": "1127960",
    "end": "1135240"
  },
  {
    "text": "some really bad things happening like uh from a CMP we could access another git repository",
    "start": "1135240",
    "end": "1142000"
  },
  {
    "text": "nothing not not related with the application itself which is uh even private reposing sometimes which is uh",
    "start": "1142000",
    "end": "1148760"
  },
  {
    "text": "yeah pretty bad thing to have um the other problem that we had the other category that we had um of issues is the",
    "start": "1148760",
    "end": "1157799"
  },
  {
    "text": "the possibility to have direct to traversal attacks so again uh the the",
    "start": "1157799",
    "end": "1163840"
  },
  {
    "text": "the CMP process was mounting the same volume where the repos server has cloned",
    "start": "1163840",
    "end": "1170520"
  },
  {
    "text": "all repos that it needs that is configured with that particular Aro City instance so uh from from a CMP project",
    "start": "1170520",
    "end": "1179960"
  },
  {
    "text": "uh uh a repo server I could have something like a uh symbolic link there",
    "start": "1179960",
    "end": "1185240"
  },
  {
    "text": "defined that go one level up and have access to other repos maybe we find uh a",
    "start": "1185240",
    "end": "1192679"
  },
  {
    "text": "secret committed to a repo uh and well I'm kidding nobody commits uh Secret it",
    "start": "1192679",
    "end": "1199200"
  },
  {
    "text": "right um anyhow uh and what is the solution to the problem uh it's quite",
    "start": "1199200",
    "end": "1206440"
  },
  {
    "text": "simple actually uh we don't need we can't share the gate environment uh with",
    "start": "1206440",
    "end": "1212400"
  },
  {
    "text": "the CMP process and uh we can't share the file system uh the the the challenge",
    "start": "1212400",
    "end": "1219080"
  },
  {
    "text": "here is how we can achieve this uh how can we improve this uh security issue um",
    "start": "1219080",
    "end": "1226200"
  },
  {
    "text": "avoiding breaking the existing um CMP CMP um plugins that existed at the point",
    "start": "1226200",
    "end": "1233679"
  },
  {
    "text": "in time right unfortunately for the gate environment we had no choice it was just",
    "start": "1233679",
    "end": "1239240"
  },
  {
    "text": "too much power to provide to the CMP process to have so we had to cut that it",
    "start": "1239240",
    "end": "1244919"
  },
  {
    "text": "was that that was a a conscious uh decision that we made unfortunately we had to break uh the compatibility",
    "start": "1244919",
    "end": "1252600"
  },
  {
    "text": "there um but for the file system we found a solution to the problem um but",
    "start": "1252600",
    "end": "1259159"
  },
  {
    "text": "before jumping on how we address the problem I want to provide you uh brief",
    "start": "1259159",
    "end": "1266760"
  },
  {
    "text": "overview of how CMP Works behind the scenes okay so when Alex explained about",
    "start": "1266760",
    "end": "1272200"
  },
  {
    "text": "the side C the CMP V2 that runs in the side car basically that side car what it",
    "start": "1272200",
    "end": "1277360"
  },
  {
    "text": "does is it runs an implementation of this interface here so this is the interface the repo server uses um to",
    "start": "1277360",
    "end": "1285279"
  },
  {
    "text": "communicate with CMP uh plugin so it's a grpc interface SP and we provide the the",
    "start": "1285279",
    "end": "1290480"
  },
  {
    "text": "the default implementation already for CMP developers so it's a binary that ships it's uh it's uh yeah it's in those",
    "start": "1290480",
    "end": "1299159"
  },
  {
    "text": "uh uh config maps and configurations that Alex showed before but uh let's say the Argo City",
    "start": "1299159",
    "end": "1307400"
  },
  {
    "text": "needs to generate manifest so how how that works like right behind the scenes how actually Argo City um generate",
    "start": "1307400",
    "end": "1315360"
  },
  {
    "text": "manest leveraging uh CMP pling uh and that's how it works uh basically uh on",
    "start": "1315360",
    "end": "1322320"
  },
  {
    "text": "this diagram here on uh your right side um I'm I'm",
    "start": "1322320",
    "end": "1328279"
  },
  {
    "text": "exemplifying uh an Aro City instance right so we have the application",
    "start": "1328279",
    "end": "1334400"
  },
  {
    "text": "controller uh so the the yellow boxes are um representing pods the blue box",
    "start": "1334400",
    "end": "1341760"
  },
  {
    "text": "inside those yellow boxes are containers okay so uh from the application control",
    "start": "1341760",
    "end": "1348480"
  },
  {
    "text": "controller pod we have the controller uh service running there and whenever a manifest needs to be generated by Argo",
    "start": "1348480",
    "end": "1355240"
  },
  {
    "text": "CD um uh that is done uh invoking a grpc service to the repo server that that",
    "start": "1355240",
    "end": "1363279"
  },
  {
    "text": "request goes over uh http2 and repo server is the component responsible for generating manifest in",
    "start": "1363279",
    "end": "1369840"
  },
  {
    "text": "Argo City when that request reaches the repo server if there is a a config",
    "start": "1369840",
    "end": "1375240"
  },
  {
    "text": "management plug-in uh uh register to that repo server um the repo server will",
    "start": "1375240",
    "end": "1380880"
  },
  {
    "text": "automatically get notified by that and that communication also happens over JPC",
    "start": "1380880",
    "end": "1386159"
  },
  {
    "text": "but at this time using a Unix socket so it doesn't go out of the vetwork and we",
    "start": "1386159",
    "end": "1391440"
  },
  {
    "text": "can apply uh uh additional security uh because it's file system based um and if",
    "start": "1391440",
    "end": "1400000"
  },
  {
    "text": "you notice this interface that I mentioned here on the on the left is",
    "start": "1400000",
    "end": "1405240"
  },
  {
    "text": "aside from this init attribute here uh is a oneto one match to the pro to the",
    "start": "1405240",
    "end": "1410360"
  },
  {
    "text": "to the to the uh to the other attributes so this uh yellow square that you see",
    "start": "1410360",
    "end": "1417000"
  },
  {
    "text": "here at this part this represents exactly the config map Alex was showing you okay so it's a onetoone match so",
    "start": "1417000",
    "end": "1424000"
  },
  {
    "text": "basically reple server will invoke this generate manifest method and the method",
    "start": "1424000",
    "end": "1429960"
  },
  {
    "text": "will basically just execute whatever the CMP developer defined in the generate",
    "start": "1429960",
    "end": "1435679"
  },
  {
    "text": "attribute of the config map so that's basically how you Define and create new cmps to attach",
    "start": "1435679",
    "end": "1442360"
  },
  {
    "text": "nargo City and I'm representing here that we can have multiple containers",
    "start": "1442360",
    "end": "1447760"
  },
  {
    "text": "multiple uh CMP plugins um running at the same time right okay but let's go",
    "start": "1447760",
    "end": "1454880"
  },
  {
    "text": "back to the problem that were I was referring to right how how we address the issue with the shared file system uh",
    "start": "1454880",
    "end": "1461520"
  },
  {
    "text": "as I said we don't share the same file system any anymore so from the from the",
    "start": "1461520",
    "end": "1466799"
  },
  {
    "text": "CNP uh Pro that runs in in this container here there is no uh notion of",
    "start": "1466799",
    "end": "1473320"
  },
  {
    "text": "the file system running in the repo server container what we do is when this",
    "start": "1473320",
    "end": "1479679"
  },
  {
    "text": "request reaches the the the the repo server service um the service will",
    "start": "1479679",
    "end": "1485919"
  },
  {
    "text": "identify the directory that is related to that particular application it will",
    "start": "1485919",
    "end": "1491480"
  },
  {
    "text": "um compress that directory in a tgz file send it over the grpc to the to the to",
    "start": "1491480",
    "end": "1498600"
  },
  {
    "text": "the repo server process that repo server automatically uh extract that file and",
    "start": "1498600",
    "end": "1505240"
  },
  {
    "text": "just those files are available to the process so there's no possibility to uh",
    "start": "1505240",
    "end": "1510919"
  },
  {
    "text": "inspect other files that are belonging to the repo server",
    "start": "1510919",
    "end": "1516039"
  },
  {
    "text": "okay so known issues we know uh the current this is the current state this is where we are today with CMP and uh in",
    "start": "1516039",
    "end": "1524440"
  },
  {
    "text": "the between the maintainers we all agree that uh the the CMP installation process is is",
    "start": "1524440",
    "end": "1531880"
  },
  {
    "text": "complex right the thing the thing that you have to patch a repo server and add",
    "start": "1531880",
    "end": "1538039"
  },
  {
    "text": "an additional sidecar container maybe there's a better way of doing this right and we all agree that there there must",
    "start": "1538039",
    "end": "1544159"
  },
  {
    "text": "be um it's a little bit hard to the bug because it runs as as as an additional",
    "start": "1544159",
    "end": "1549760"
  },
  {
    "text": "container so you have to remember if you in if you want to inspect the log to",
    "start": "1549760",
    "end": "1555120"
  },
  {
    "text": "really filter the Lo the container that you want it's a little bit annoying on super big deal but the fact is that you",
    "start": "1555120",
    "end": "1561120"
  },
  {
    "text": "have to to deploy uh all those components locally in order to develop a",
    "start": "1561120",
    "end": "1566919"
  },
  {
    "text": "test properly a a CMP PL um there is a nonissue so this",
    "start": "1566919",
    "end": "1573880"
  },
  {
    "text": "there's a a GitHub issue opened already and we are aware of that related to uh",
    "start": "1573880",
    "end": "1579640"
  },
  {
    "text": "monor repos so basically the thing is uh if the repo has more than 200 megabytes",
    "start": "1579640",
    "end": "1585760"
  },
  {
    "text": "um there there are situations where you users are facing timeouts because this tgz process and send sending it over to",
    "start": "1585760",
    "end": "1594600"
  },
  {
    "text": "the the other uh process over JPC sometimes it takes longer there's a way",
    "start": "1594600",
    "end": "1599919"
  },
  {
    "text": "to address this problem by filtering the files in the git so uh like excluding",
    "start": "1599919",
    "end": "1605520"
  },
  {
    "text": "the dogit folder uh before compressing it is uh one alternative and the feature",
    "start": "1605520",
    "end": "1612360"
  },
  {
    "text": "is there it was implemented by one contributor uh it uh yeah one more issue",
    "start": "1612360",
    "end": "1620039"
  },
  {
    "text": "that we're aware is that um the CMP as it is today it doesn't provide you out",
    "start": "1620039",
    "end": "1627480"
  },
  {
    "text": "of a box access to specific features of customizing Helm and that's why we",
    "start": "1627480",
    "end": "1633240"
  },
  {
    "text": "implemented the parameterization in Argo City in the CMP um implementation in",
    "start": "1633240",
    "end": "1638720"
  },
  {
    "text": "Argo City to allow having those use cases possible so basically an CMP",
    "start": "1638720",
    "end": "1644480"
  },
  {
    "text": "developer needs to implement those features in a specific CMP leveraging",
    "start": "1644480",
    "end": "1650120"
  },
  {
    "text": "those those parameters okay and uh where do we want",
    "start": "1650120",
    "end": "1655760"
  },
  {
    "text": "to go uh and uh before jumping here I want to clarify that there's no real",
    "start": "1655760",
    "end": "1662760"
  },
  {
    "text": "ongoing work on those uh in any of those uh um topics here uh basically this",
    "start": "1662760",
    "end": "1671080"
  },
  {
    "text": "between the maintainers this is kind of an agreement that where we think um the",
    "start": "1671080",
    "end": "1676120"
  },
  {
    "text": "CMP should go so we all agree that uh we we could have a better installation",
    "start": "1676120",
    "end": "1682320"
  },
  {
    "text": "process right a streamlined not maybe not only for cmps but also for the other",
    "start": "1682320",
    "end": "1688399"
  },
  {
    "text": "extension points that exists in Argo City so this is something that could be uh very well",
    "start": "1688399",
    "end": "1695360"
  },
  {
    "text": "improved um the other topic that we would love to see happening and this is",
    "start": "1695360",
    "end": "1701200"
  },
  {
    "text": "the first direction that we went uh when we wanted to uh address the problem with",
    "start": "1701200",
    "end": "1707360"
  },
  {
    "text": "traversal attack tax is doing in the repo server something similar to what",
    "start": "1707360",
    "end": "1712880"
  },
  {
    "text": "Docker does and what I mean by that is leveraging Linux username space so the",
    "start": "1712880",
    "end": "1717919"
  },
  {
    "text": "idea here what we try to do right was that from the repo server we wanted to",
    "start": "1717919",
    "end": "1724039"
  },
  {
    "text": "open a new process um in a in an isolated username space that has only",
    "start": "1724039",
    "end": "1730760"
  },
  {
    "text": "the specific directory mounted for that specific application I ran a PC uh uh at",
    "start": "1730760",
    "end": "1739080"
  },
  {
    "text": "that point in time I called it limbo and I got I got this concept working locally",
    "start": "1739080",
    "end": "1744840"
  },
  {
    "text": "in in eks clusters uh unfortunately Argo City needs uh not unfortunately but the",
    "start": "1744840",
    "end": "1751480"
  },
  {
    "text": "fact is Argo City needs to run in uh Red Hat clusters so uh in that um in that",
    "start": "1751480",
    "end": "1759320"
  },
  {
    "text": "environment we we we uh ran this uh PC together with our uh Red Hat friends uh",
    "start": "1759320",
    "end": "1766960"
  },
  {
    "text": "contributors to Aro City and for this functionality to work we",
    "start": "1766960",
    "end": "1772200"
  },
  {
    "text": "needed to have a um a Linux um specific capability enable at",
    "start": "1772200",
    "end": "1778919"
  },
  {
    "text": "the node level if I remember correctly and that wasn't the case in open shift clusters at that point in time maybe",
    "start": "1778919",
    "end": "1785760"
  },
  {
    "text": "that changed I don't know that that would be a much uh better way to address",
    "start": "1785760",
    "end": "1792320"
  },
  {
    "text": "that problem because we wouldn't have to you know uh compress that file over over",
    "start": "1792320",
    "end": "1798480"
  },
  {
    "text": "send over drpc to the the to the CMP process things will be uh way way faster",
    "start": "1798480",
    "end": "1806480"
  },
  {
    "text": "and and still safe um last but not least one thing I was discussing with Alex",
    "start": "1806480",
    "end": "1812440"
  },
  {
    "text": "yesterday about the timeout issue um maybe there is an easy way to fix that",
    "start": "1812440",
    "end": "1818880"
  },
  {
    "text": "problem we can't make uh any promises at this point we need to make sure that",
    "start": "1818880",
    "end": "1824120"
  },
  {
    "text": "this is not bringing um uh the security issues that we we had to to to to fix in",
    "start": "1824120",
    "end": "1830559"
  },
  {
    "text": "the past um but uh maybe in the next version we're",
    "start": "1830559",
    "end": "1835880"
  },
  {
    "text": "going to have a solution for that problem and uh that's about it uh this QR code here",
    "start": "1835880",
    "end": "1844760"
  },
  {
    "text": "um will drive you to link tree it has uh links to um every uh content presented",
    "start": "1844760",
    "end": "1852519"
  },
  {
    "text": "today by us and as well as the presentation itself if you want to have the link to it",
    "start": "1852519",
    "end": "1858639"
  },
  {
    "text": "um it also has a link for for you to provide uh feedback to to us if you want",
    "start": "1858639",
    "end": "1865080"
  },
  {
    "text": "and uh thanks",
    "start": "1865080",
    "end": "1868638"
  },
  {
    "text": "everybody we still have five minutes for for any questions and I just wanted to add that maybe last slide consider it a",
    "start": "1874480",
    "end": "1881440"
  },
  {
    "text": "call for Action so a list of improvements kind of were agreed by",
    "start": "1881440",
    "end": "1886720"
  },
  {
    "text": "maintainers if you curious about contributing to Argo this is the awesome list that you won't have to prove that",
    "start": "1886720",
    "end": "1894159"
  },
  {
    "text": "those improvements are necessary because mainers is like really looking forward for you know for help to implementing",
    "start": "1894159",
    "end": "1901799"
  },
  {
    "text": "them",
    "start": "1901799",
    "end": "1904799"
  }
]