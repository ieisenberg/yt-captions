[
  {
    "text": "hello good morning good morning good to see y'all here nearly full room I hope",
    "start": "380",
    "end": "7799"
  },
  {
    "text": "you enjoy the the next talk it is by James Minelli the author of cert manager",
    "start": "7799",
    "end": "15210"
  },
  {
    "text": "do you know cert manager many of you use it until kind do you use kind been elder",
    "start": "15210",
    "end": "27689"
  },
  {
    "text": "is the author of kind and the ban and James are gonna talk about testing was",
    "start": "27689",
    "end": "33000"
  },
  {
    "text": "kind some of it will be a little bit about what do you do for certain manager regimes yep yeah yeah so just just just",
    "start": "33000",
    "end": "41760"
  },
  {
    "text": "wondering like how many of you use kubernetes in production and think that",
    "start": "41760",
    "end": "47190"
  },
  {
    "text": "you have your testing store stories sorted out okay yeah but like generally",
    "start": "47190",
    "end": "56070"
  },
  {
    "text": "how many of you use it in production and such alright okay cool and how many of",
    "start": "56070",
    "end": "62399"
  },
  {
    "text": "you first time at cube con Berlin okay cool",
    "start": "62399",
    "end": "68670"
  },
  {
    "text": "well welcome all the new timers and the old timers and over to James and then",
    "start": "68670",
    "end": "75710"
  },
  {
    "text": "you go yeah thanks very much for coming today this is a very very full room I",
    "start": "75710",
    "end": "82350"
  },
  {
    "text": "can still see more and more people coming in we're gonna be talking about testing kubernetes applications using",
    "start": "82350",
    "end": "87780"
  },
  {
    "text": "kind today and a bit more generally too so first of all what is a kubernetes",
    "start": "87780",
    "end": "95430"
  },
  {
    "text": "application I realized that it's kind of a very loose concept yeah we could be talking about a thing so it's pretty",
    "start": "95430",
    "end": "101759"
  },
  {
    "text": "much anything that runs in kubernetes but we're going to be putting a big focus on extensions and controllers",
    "start": "101759",
    "end": "107189"
  },
  {
    "text": "today in this talk so who here has kind",
    "start": "107189",
    "end": "112619"
  },
  {
    "text": "of looked at running operators extending kubernetes anything like that",
    "start": "112619",
    "end": "117710"
  },
  {
    "text": "yeah nice like cute builder and operator SDKs yeah so this is a good tool for you",
    "start": "117710",
    "end": "125630"
  },
  {
    "text": "so yeah different types of tests first of all is something I'd like to define because I think the difference between",
    "start": "125630",
    "end": "131459"
  },
  {
    "text": "unit tests integration tests end-to-end tests it's kind of a",
    "start": "131459",
    "end": "136810"
  },
  {
    "text": "very undefined thing I've never really come up with a good strict definition so",
    "start": "136810",
    "end": "142230"
  },
  {
    "text": "I'll start by saying unit tests they typically would make use of something called the fake client in client go they",
    "start": "142230",
    "end": "150430"
  },
  {
    "text": "are it's effectively an in-memory implementation of the kubernetes api server and client it works great it does",
    "start": "150430",
    "end": "158440"
  },
  {
    "text": "have a lot of caveats it's very simple you don't get the full admission control chain on the API server side you don't",
    "start": "158440",
    "end": "164709"
  },
  {
    "text": "have additional controllers running you're missing quite a lot but it's great for quick simple unit testing yeah",
    "start": "164709",
    "end": "173650"
  },
  {
    "text": "one big thing that I found is that race conditions timing issues with the actual controller reconciling and having to run",
    "start": "173650",
    "end": "181660"
  },
  {
    "text": "multiple times you don't pick up on that so yeah you it's great it's very good",
    "start": "181660",
    "end": "187420"
  },
  {
    "text": "for testing kind of state machine style actions you know given this input state what is the output but it doesn't really",
    "start": "187420",
    "end": "194200"
  },
  {
    "text": "test the whole system as a whole something like this this is an example from cert manager's code base",
    "start": "194200",
    "end": "201040"
  },
  {
    "text": "we obviously build more packages around it but in short you can see here the difference is we've got this challenge",
    "start": "201040",
    "end": "208540"
  },
  {
    "text": "presented true is the starting state and then we actually check we have expected actions so here I don't know if I've",
    "start": "208540",
    "end": "215850"
  },
  {
    "text": "might have a pointer nope I don't have a pointer but you can see",
    "start": "215850",
    "end": "221830"
  },
  {
    "text": "here we've got the new update action so we're expecting an update to be we're",
    "start": "221830",
    "end": "227200"
  },
  {
    "text": "expecting an update to happen that's like against the API server and we're expecting that state to be set to false",
    "start": "227200",
    "end": "232959"
  },
  {
    "text": "so you can see here given that input state we expect one running the reconcile function once that will end",
    "start": "232959",
    "end": "238269"
  },
  {
    "text": "out with a different output state so then integration test so who's used cube",
    "start": "238269",
    "end": "244120"
  },
  {
    "text": "builder here or looked at it whew okay so within cube builder they actually",
    "start": "244120",
    "end": "250959"
  },
  {
    "text": "provide a load of extra testing functionality so it will give you a bit of a framework that will start up at CD",
    "start": "250959",
    "end": "256989"
  },
  {
    "text": "and an API server and optionally I think even a controller manager on your local machine compared to unit testing that",
    "start": "256989",
    "end": "264640"
  },
  {
    "text": "does give you admission control we now have an actual API server running we can pick up on timing issues because",
    "start": "264640",
    "end": "270190"
  },
  {
    "text": "this is kind of a bare-bones so I'm not going to say Kiva Nettie's cluster but bare bones keep Nettie's control plane right there so that's yeah they work",
    "start": "270190",
    "end": "277990"
  },
  {
    "text": "brilliant and it gets you to the next next stage but there are more things out",
    "start": "277990",
    "end": "286419"
  },
  {
    "text": "there to test then well there's more to it than that sometimes with all these kind of",
    "start": "286419",
    "end": "291610"
  },
  {
    "text": "integration unit tests you find yourself tying itself to the implementation of your particular controller rather than",
    "start": "291610",
    "end": "298389"
  },
  {
    "text": "the actual behavior that you're looking for so that's where end-to-end tests",
    "start": "298389",
    "end": "304330"
  },
  {
    "text": "sort of come in and I'm sure we've all heard the term end-to-end tests what we mean here is actually bringing up a cuba",
    "start": "304330",
    "end": "310000"
  },
  {
    "text": "Nettie's cluster deploying your application and actually encoding what we expect and want users to be doing",
    "start": "310000",
    "end": "316210"
  },
  {
    "text": "into our tests so saying if I apply this I expect that after some amount of time two pods won't exist and the kubernetes",
    "start": "316210",
    "end": "324030"
  },
  {
    "text": "code base is full of end-to-end tests you've got conformance tests all sorts and these are very blackbox",
    "start": "324030",
    "end": "330580"
  },
  {
    "text": "you know you you go and apply something and then you wait to see what happens and if it doesn't do that then that's a",
    "start": "330580",
    "end": "336759"
  },
  {
    "text": "failed test it gives us a lot of flexibility you're really looking at this from the users point of view and",
    "start": "336759",
    "end": "341979"
  },
  {
    "text": "they're really valuable to have yeah it's black box and everything else the",
    "start": "341979",
    "end": "348820"
  },
  {
    "text": "one downside here is we need a whole cube Nettie's cluster and there are lots of different ways to start cube Nettie's",
    "start": "348820",
    "end": "354310"
  },
  {
    "text": "run kubernetes you could spin up a cluster on economy on a cloud provider",
    "start": "354310",
    "end": "359740"
  },
  {
    "text": "or something like that and run tests against there but over time if you're doing it's on every pull request or every change that gets more and more",
    "start": "359740",
    "end": "366009"
  },
  {
    "text": "expensive and I think kubernetes project itself does so by running standing up GC",
    "start": "366009",
    "end": "372219"
  },
  {
    "text": "clusters for a while which again costs money all of its slow I think then you",
    "start": "372219",
    "end": "379090"
  },
  {
    "text": "probably know it's probably Bana was it an hour hour and 15 to actually go through that whole process yeah most tests on Cabernets pull requests take",
    "start": "379090",
    "end": "385690"
  },
  {
    "text": "about an hour plus to run yep so you can see that's kind of if you want the open your fast iterative feedback loop that",
    "start": "385690",
    "end": "392380"
  },
  {
    "text": "doesn't quite cut it as a developer I have never run that test suite from my own local machine because",
    "start": "392380",
    "end": "399190"
  },
  {
    "text": "like I don't really want to dig into how to do it and I also don't really want to run some cloud some cloud VMS for that",
    "start": "399190",
    "end": "406780"
  },
  {
    "text": "period of time and also yeah who pays for that so yeah why and to us though",
    "start": "406780",
    "end": "414340"
  },
  {
    "text": "and to end tests though some of these edge cases some of these problems only",
    "start": "414340",
    "end": "419590"
  },
  {
    "text": "come up in a real environment so you don't actually get to see issues with",
    "start": "419590",
    "end": "424960"
  },
  {
    "text": "say running out of memory because your applications done so like there's all sorts in there that you might not pick",
    "start": "424960",
    "end": "430630"
  },
  {
    "text": "up on and yeah the way that other components in kubernetes interact with",
    "start": "430630",
    "end": "435640"
  },
  {
    "text": "your own application as well can make a massive difference something that passes unit and integration tests in isolation",
    "start": "435640",
    "end": "441310"
  },
  {
    "text": "all of a sudden you realize that one other cool kubernetes component is fighting against you and so you end up",
    "start": "441310",
    "end": "447760"
  },
  {
    "text": "with this flapping back and forth and that can go on forever and that'll either generate tons of logs use nodes",
    "start": "447760",
    "end": "453220"
  },
  {
    "text": "of memory or it'll just it's just doing the wrong thing we're just causing excessive load on our clusters so",
    "start": "453220",
    "end": "459190"
  },
  {
    "text": "without end-to-end tests at least I've found everything looks like theoretically it's perfect but users are",
    "start": "459190",
    "end": "465010"
  },
  {
    "text": "opening issues saying like you kind of just killed my API server nothing will continue running I can't start pods",
    "start": "465010",
    "end": "470380"
  },
  {
    "text": "anymore so we have an example of where this came",
    "start": "470380",
    "end": "475870"
  },
  {
    "text": "in really helpful in certain manager recently we've gone and refactored some API types we needed to make sure that as",
    "start": "475870",
    "end": "483310"
  },
  {
    "text": "part of that refactoring we didn't break the old API format so I started out by",
    "start": "483310",
    "end": "490200"
  },
  {
    "text": "implementing the changes so actually implementing the new format of API I",
    "start": "490200",
    "end": "495419"
  },
  {
    "text": "didn't touch a single thing in our end-to-end test suite and pushed all that code up or ran it locally run the",
    "start": "495419",
    "end": "502390"
  },
  {
    "text": "test suite locally and made sure that those tests still passed and because they are blackbox they don't understand the actual implementation what's going",
    "start": "502390",
    "end": "509680"
  },
  {
    "text": "on if they pass from my point of view that's like I just ran users like users just sat there and ran this same flow",
    "start": "509680",
    "end": "516669"
  },
  {
    "text": "and the fact that that passed gave me confidence to know that I could actually move forward with doing this of course I",
    "start": "516669",
    "end": "522700"
  },
  {
    "text": "then went and added new tests at the end because you can't just add new functionality but yeah you gradually",
    "start": "522700",
    "end": "528490"
  },
  {
    "text": "grow and grow your test suite and as you're doing that it bill your confidence and it just means you",
    "start": "528490",
    "end": "533720"
  },
  {
    "text": "can actually ship faster we've done this countless times before before the test this week and where you think everything's perfect it turns out it's",
    "start": "533720",
    "end": "540380"
  },
  {
    "text": "not quite so much yeah because it says",
    "start": "540380",
    "end": "545660"
  },
  {
    "text": "they give you confidence to ship without it who knows what will happen",
    "start": "545660",
    "end": "551650"
  },
  {
    "text": "so that leads us onto kind so we've been talking a lot about how difficult it is",
    "start": "551650",
    "end": "557720"
  },
  {
    "text": "to get these clusters then I think you've got today so hopefully James has",
    "start": "557720",
    "end": "563210"
  },
  {
    "text": "convinced you that into and tests are definitely something you should be thinking about and if you're thinking about into and tests you should think",
    "start": "563210",
    "end": "568640"
  },
  {
    "text": "about kind kind is kubernetes and docker so we run docker containers to simulate",
    "start": "568640",
    "end": "575000"
  },
  {
    "text": "nodes it does multi node multi cluster works offline if you pull the node image",
    "start": "575000",
    "end": "580730"
  },
  {
    "text": "first and if you're putting a single node with the image pre-poll should take",
    "start": "580730",
    "end": "586580"
  },
  {
    "text": "about 30 seconds to boot up a node so this takes away a lot of those problems",
    "start": "586580",
    "end": "591800"
  },
  {
    "text": "and it hits these key goals a one if you're gonna be doing testing ideally as much as possible you want it to be fast",
    "start": "591800",
    "end": "597680"
  },
  {
    "text": "so you get that iteration cycle you want to be lightweight so that you don't mind running it all the time you want to be",
    "start": "597680",
    "end": "603290"
  },
  {
    "text": "cross-platform so developers can run it on their machines doesn't matter where they're at we're gonna be hermetic which",
    "start": "603290",
    "end": "608990"
  },
  {
    "text": "is a term I mostly heard at Google but the idea being that we don't want external dependencies because those will",
    "start": "608990",
    "end": "614750"
  },
  {
    "text": "decrease the reliability of your tests you just want to be testing your application not the internet so kinds of",
    "start": "614750",
    "end": "624140"
  },
  {
    "text": "testing tool typical workflow Buddha cluster build your application and inside load",
    "start": "624140",
    "end": "629600"
  },
  {
    "text": "application images we're gonna come back to that you don't have to do it this way we're gonna recommend that then you run",
    "start": "629600",
    "end": "634850"
  },
  {
    "text": "your tests do again creating a cluster is just kinda create cluster you need",
    "start": "634850",
    "end": "641150"
  },
  {
    "text": "the kind binary and you need docker that's it sometimes you might want custom",
    "start": "641150",
    "end": "648230"
  },
  {
    "text": "configuration if you're doing this with kind you can configure the entire QP item interface it's Q beta underneath we",
    "start": "648230",
    "end": "655040"
  },
  {
    "text": "have customized caches which we're going to show in a second and so you can configure anything you need to make kubernetes look like how you want it to",
    "start": "655040",
    "end": "661190"
  },
  {
    "text": "look and that can just includes things like changing the service cider or enabling helpful features anything that",
    "start": "661190",
    "end": "668360"
  },
  {
    "text": "you would expect to be able to do with a fairly real cluster so this example actually from some assert managers",
    "start": "668360",
    "end": "674240"
  },
  {
    "text": "testing so what you're seeing here is kind zone configuration so we've got this just configure object I believe",
    "start": "674240",
    "end": "680000"
  },
  {
    "text": "it's cluster now and so we've got one node and on that node we're saying we need to patch the Kuban config the set",
    "start": "680000",
    "end": "686540"
  },
  {
    "text": "of particular service net because kindness herb sorry cert manager is doing some fun things with networking",
    "start": "686540",
    "end": "691850"
  },
  {
    "text": "because they're doing like DNS challenges and whatnot so they're very particular about which subnets things are on so you can just configure like",
    "start": "691850",
    "end": "698780"
  },
  {
    "text": "that very simple or if you want a bunch of nodes you can have multiple control",
    "start": "698780",
    "end": "704690"
  },
  {
    "text": "planes will set up a load balancer container and do H a and you can have workers and you can simulate doing like",
    "start": "704690",
    "end": "711170"
  },
  {
    "text": "rolling things across your cluster between nodes and if you want to do",
    "start": "711170",
    "end": "717650"
  },
  {
    "text": "things like okay kind ships its own lightweight CNI but I wanted to integrate with weave then you can",
    "start": "717650",
    "end": "723890"
  },
  {
    "text": "disable the default c9 deploy your own so now that you got your cluster up and",
    "start": "723890",
    "end": "729740"
  },
  {
    "text": "ready to go what you're gonna want to do is load your image into it and the idea",
    "start": "729740",
    "end": "735260"
  },
  {
    "text": "here is again avoiding flakiness avoiding being not hermetic no dependency on the internet instead of",
    "start": "735260",
    "end": "741170"
  },
  {
    "text": "pushing your image to a registry in your testing flow what you do is you can build it and then you can tell kinda",
    "start": "741170",
    "end": "746360"
  },
  {
    "text": "load it into all the nodes and so basically it's just going to take a docker archive of your images and then",
    "start": "746360",
    "end": "752900"
  },
  {
    "text": "stream those to all the nodes and load it in so that when you tell kubernetes to run your image in a deployment it's",
    "start": "752900",
    "end": "759710"
  },
  {
    "text": "already present it doesn't need a full you don't need to use the Internet you can do this offline",
    "start": "759710",
    "end": "765519"
  },
  {
    "text": "so now you're gonna get the cute config kind generates a unique cube config for each cluster so you can ask kind where",
    "start": "765550",
    "end": "771410"
  },
  {
    "text": "the cube config is point cube config environment variable at that run your tests now dreams gonna do a live demo",
    "start": "771410",
    "end": "779500"
  },
  {
    "text": "sure this will go smoothly yeah cool let's see hopefully go a little bit",
    "start": "779500",
    "end": "788740"
  },
  {
    "text": "bigger hopefully at the battery web see so in this demo I'm actually going to deploy the sample controller from the",
    "start": "788740",
    "end": "794560"
  },
  {
    "text": "cupola to use code base so this is just a really basic example I've put together a very very basic run test script so",
    "start": "794560",
    "end": "802900"
  },
  {
    "text": "here we can see we do first of all a little bit of cleanup because I had to do a bit of testing here and then we're",
    "start": "802900",
    "end": "808780"
  },
  {
    "text": "using this client create cluster command that been mentioned earlier well go into and have a look at that config file in a",
    "start": "808780",
    "end": "815080"
  },
  {
    "text": "second but once that's run just like Ben showed we go and get the client a cube config path notice here that we're",
    "start": "815080",
    "end": "822280"
  },
  {
    "text": "passing a name variable this is because we can run multiple clusters at once so for example the federation v2 project",
    "start": "822280",
    "end": "829720"
  },
  {
    "text": "they utilize kind to actually test federating multiple clusters together they pass different names for each one",
    "start": "829720",
    "end": "836740"
  },
  {
    "text": "and yeah and that all runs on one machine here we then go and build our",
    "start": "836740",
    "end": "843700"
  },
  {
    "text": "application so obviously depends on what you're doing here but in our example we're doing sample controller we've",
    "start": "843700",
    "end": "850360"
  },
  {
    "text": "built a docker image for it and then just like Ben said we load the docker image into the node now if there were",
    "start": "850360",
    "end": "857560"
  },
  {
    "text": "multiple nodes I think in this example rowing into a single one that would actually get loaded into every single",
    "start": "857560",
    "end": "863080"
  },
  {
    "text": "one of those nodes so it's available for use we deployed the sample controller",
    "start": "863080",
    "end": "868090"
  },
  {
    "text": "and then we'll start using it so enough looking at scripts let's bite the bullet and see how this goes so do a bit of",
    "start": "868090",
    "end": "877540"
  },
  {
    "text": "cleanup and here we go kind is going along and it's creating a cluster so we're booting version one",
    "start": "877540",
    "end": "883300"
  },
  {
    "text": "point fourteen point two this is just using one of the prepackaged ones that Ben has pushed up forever on it prepares",
    "start": "883300",
    "end": "891370"
  },
  {
    "text": "the nodes first of all so that's creating the containers it then goes and initialize queue initializes cube Adam",
    "start": "891370",
    "end": "896800"
  },
  {
    "text": "it applies all those patches that we've specified onto a base config and then it",
    "start": "896800",
    "end": "903100"
  },
  {
    "text": "will start actually initializing so that under the hood is running cube Adam in it within a container we've already gone",
    "start": "903100",
    "end": "908410"
  },
  {
    "text": "and configured systemd docker and the like and there we go we install see and the class is up and running",
    "start": "908410",
    "end": "916100"
  },
  {
    "text": "so we're on to the next bit our script going we've built sample controller there it's getting a little bit too",
    "start": "916100",
    "end": "921440"
  },
  {
    "text": "quick and we're building a docker image containing it and you can see here we've",
    "start": "921440",
    "end": "926480"
  },
  {
    "text": "gone unloaded that image into the client container and we've gone ahead and actually deployed the sample controller",
    "start": "926480",
    "end": "932720"
  },
  {
    "text": "so in your application here obviously the manifest you use the commands you run will be slightly different we're",
    "start": "932720",
    "end": "938750"
  },
  {
    "text": "just trying to illustrate what a typical workflow would look like that at the end we've actually gone and managed to",
    "start": "938750",
    "end": "945020"
  },
  {
    "text": "deploy one of our few resources this is an example it's not particularly useful and you can see we've got our command to",
    "start": "945020",
    "end": "953150"
  },
  {
    "text": "run here and this is as been said the hopefully you can see at the back this",
    "start": "953150",
    "end": "958700"
  },
  {
    "text": "here is the cube cube config file that kind is created this is typical works",
    "start": "958700",
    "end": "963890"
  },
  {
    "text": "with everything everything I worked with keeps ETL and we can now go ahead and",
    "start": "963890",
    "end": "970210"
  },
  {
    "text": "check our cluster there we go so you can see just like any other kubernetes",
    "start": "970210",
    "end": "977270"
  },
  {
    "text": "cluster that you're used to we've got all the different components we've got our CNI here we actually run a custom",
    "start": "977270",
    "end": "983440"
  },
  {
    "text": "lightweight CNI that's perfect just for testing on a single host because we know",
    "start": "983440",
    "end": "988850"
  },
  {
    "text": "where we're running we can understand the network topology better and we've actually got our example application",
    "start": "988850",
    "end": "993980"
  },
  {
    "text": "here our sample controller here so as you kind of continue to build now that",
    "start": "993980",
    "end": "999860"
  },
  {
    "text": "we've got a cluster up and running you can continuously run that kind load docker image command and load more and",
    "start": "999860",
    "end": "1005470"
  },
  {
    "text": "more images into your nodes when you roll out changes and then just restart that pod and off you go so this gives us",
    "start": "1005470",
    "end": "1013240"
  },
  {
    "text": "not only a testing environment but also a development environment here I'm running on my laptop but this could have",
    "start": "1013240",
    "end": "1018550"
  },
  {
    "text": "run under CI and it will be identical the fact that it is identical is so valuable like if you have varying if you",
    "start": "1018550",
    "end": "1026470"
  },
  {
    "text": "have varying different environments between different developers and everything else it's frustrating we go you know you see your tests are failing",
    "start": "1026470",
    "end": "1033160"
  },
  {
    "text": "but you can't possibly actually debug it because you don't know where to start you don't know how to actually get this up and running so we haven't I will",
    "start": "1033160",
    "end": "1042490"
  },
  {
    "text": "clarify we've not written a full test suite here this isn't telling you how to right tests in bash please don't write",
    "start": "1042490",
    "end": "1050410"
  },
  {
    "text": "your tests in bash anyone really doing please yeah so looks like didn't go",
    "start": "1050410",
    "end": "1060010"
  },
  {
    "text": "wrong and yeah so we are running here",
    "start": "1060010",
    "end": "1065500"
  },
  {
    "text": "kind in on my on my laptop we do support",
    "start": "1065500",
    "end": "1070930"
  },
  {
    "text": "running kind obviously in various different CI platforms just put together a kind CI slash examples repository so",
    "start": "1070930",
    "end": "1078310"
  },
  {
    "text": "that's coming together gradually we currently have some examples for running kind on circle CI and Travis gradually",
    "start": "1078310",
    "end": "1084730"
  },
  {
    "text": "adding more there but technically anything that's Linux your pretty good to go or Linux OS X or Windows I should",
    "start": "1084730",
    "end": "1091330"
  },
  {
    "text": "say probably the most one that's not in this repo yet is kubernetes its own CI which is of course running on kubernetes",
    "start": "1091330",
    "end": "1096850"
  },
  {
    "text": "so we run kubernetes on kubernetes because who wouldn't want to do that yeah you can go many layers deep yeah",
    "start": "1096850",
    "end": "1106480"
  },
  {
    "text": "and one extra thing to note here we've kind of used the CLI side of kind we do also try and like we want kind of itself",
    "start": "1106480",
    "end": "1114700"
  },
  {
    "text": "to be consumable as a library within go line so here's an example where we",
    "start": "1114700",
    "end": "1119920"
  },
  {
    "text": "actually go and create a cluster all in code now anyone who's familiar with golang testing you can just go and chuck",
    "start": "1119920",
    "end": "1125290"
  },
  {
    "text": "this into your test functions and stand up a cluster that's used for a single test and that I mean you can see the",
    "start": "1125290",
    "end": "1132100"
  },
  {
    "text": "clusters boot within about 30 seconds but we can actually just bring up a cluster for each individual test which",
    "start": "1132100",
    "end": "1138550"
  },
  {
    "text": "means that you know that if it passes once it should pass again and again because the cluster bring up is as Ben",
    "start": "1138550",
    "end": "1143860"
  },
  {
    "text": "said hermetic so we know we don't depend on any external sources yeah no more",
    "start": "1143860",
    "end": "1150280"
  },
  {
    "text": "bash so I'm gonna talk about what's next",
    "start": "1150280",
    "end": "1155760"
  },
  {
    "text": "we're hoping to get better network management we found that you know we want it to work perfectly everywhere but",
    "start": "1155760",
    "end": "1161050"
  },
  {
    "text": "one thing that is actually different for everyone is your local DNS on your host and that gets picked up by kind right now we're figure out what to do we'd",
    "start": "1161050",
    "end": "1167410"
  },
  {
    "text": "love to hear ideas ipv6 support and testing so kind was actually originally written for kubernetes testing of",
    "start": "1167410",
    "end": "1173950"
  },
  {
    "text": "kubernetes the project and we don't have any ipv6 CI so we're working on getting ipv6 worked",
    "start": "1173950",
    "end": "1180670"
  },
  {
    "text": "out in kind so we can get single stack and then next will be dual stack as kubernetes starts to grow that we want",
    "start": "1180670",
    "end": "1185740"
  },
  {
    "text": "to make note ports easier to access on Mac and Windows this is a bit of a caveat for application development now if you're on Linux all of the nodes have",
    "start": "1185740",
    "end": "1193360"
  },
  {
    "text": "IPS as you would expect that you can reach because they're just docker containers on the docker bridge but on",
    "start": "1193360",
    "end": "1198550"
  },
  {
    "text": "Mac and Windows they're inside like the docker for Mac theam which doesn't expose one so you'll have to port forward we're still",
    "start": "1198550",
    "end": "1204940"
  },
  {
    "text": "figuring out the best option there you love to hear feedback there we want to make it easier for you to build like an",
    "start": "1204940",
    "end": "1211000"
  },
  {
    "text": "exact kubernetes version but chiefly kubernetes on CI is building tar balls all the time that you can just download",
    "start": "1211000",
    "end": "1217060"
  },
  {
    "text": "it like whatever version you want so we want to just take that pack it into a kind image then you can run it we're",
    "start": "1217060",
    "end": "1223300"
  },
  {
    "text": "always trying to make things faster we have few more ideas there and we're trying to move from alpha to beta very soon hopefully but if you use a release",
    "start": "1223300",
    "end": "1230560"
  },
  {
    "text": "version we probably won't break you and I'd really love to hear from interview your use cases and like what features",
    "start": "1230560",
    "end": "1237040"
  },
  {
    "text": "you'd like to see because it's a small project right now but there seems to be a lot of attention we're trying to",
    "start": "1237040",
    "end": "1242830"
  },
  {
    "text": "figure out what a prioritize so appreciate that here's where you can",
    "start": "1242830",
    "end": "1248590"
  },
  {
    "text": "contact us this is under the sink testing and the kubernetes sub project we have a bi-weekly project meeting on",
    "start": "1248590",
    "end": "1254440"
  },
  {
    "text": "zoom' like the most kubernetes projects we're on the sig testing mailing list and we have our own slack channel on the",
    "start": "1254440",
    "end": "1260230"
  },
  {
    "text": "kubernetes slack you gonna invite that's like buckets do the repo at 6:00 our",
    "start": "1260230",
    "end": "1265780"
  },
  {
    "text": "kids do / kind which is also you can just go get that if you have go modules on and the docs are it kind of sig stuck",
    "start": "1265780",
    "end": "1273220"
  },
  {
    "text": "he'd say oh thanks for coming and I want to do a special shout out to Liz frost",
    "start": "1273220",
    "end": "1279340"
  },
  {
    "text": "and hep tio who actually put together the CFP but couldn't come and James for jumping in and helping square this away",
    "start": "1279340",
    "end": "1285880"
  },
  {
    "text": "rework the talk of it and bitching and thanks everyone for coming",
    "start": "1285880",
    "end": "1291570"
  },
  {
    "text": "thank you very much thanks for making kind such an awesome project and well we",
    "start": "1297820",
    "end": "1304960"
  },
  {
    "text": "do have plenty of time for questions actually and yeah please raise your",
    "start": "1304960",
    "end": "1310419"
  },
  {
    "text": "hands and I'll run over to you as a mic okay so we got two hands here one there let's start here yeah um",
    "start": "1310419",
    "end": "1323700"
  },
  {
    "text": "ipv6 support hasn't been merged already in the kind or it still exists as a extra PR it's in a PR it's almost there",
    "start": "1323700",
    "end": "1332440"
  },
  {
    "text": "I'm gonna be reviewing that some more when I get back I mean could you be a bit more specific for the time when it's",
    "start": "1332440",
    "end": "1338109"
  },
  {
    "text": "gonna get merged it's kind of important and we're he was at the same state about",
    "start": "1338109",
    "end": "1343690"
  },
  {
    "text": "month ago so right it was for about two months we had a bunch of other chaos",
    "start": "1343690",
    "end": "1348759"
  },
  {
    "text": "going on and we got back to that we've had a lot of progress on it recently but we're not quite there were very close it",
    "start": "1348759",
    "end": "1354700"
  },
  {
    "text": "turns out one of the components we're using is not working in ipv6 properly we're gonna swap that out and then I",
    "start": "1354700",
    "end": "1359799"
  },
  {
    "text": "think we're good to go but she's a bit of a filling one we're",
    "start": "1359799",
    "end": "1366639"
  },
  {
    "text": "hope when it's ready we're hoping for another release about a month from the end of cube con we try to do monthly",
    "start": "1366639",
    "end": "1373359"
  },
  {
    "text": "releases we did release just before cube con so hopefully that one okay and sorry",
    "start": "1373359",
    "end": "1380349"
  },
  {
    "text": "second one very shortly let's say if my PRS actually changes the API server what",
    "start": "1380349",
    "end": "1387249"
  },
  {
    "text": "would be my workflow to use when basically to use the custom API server",
    "start": "1387249",
    "end": "1392619"
  },
  {
    "text": "image when it when your lustre comes up kubernetes PR yeah you just need to do",
    "start": "1392619",
    "end": "1398440"
  },
  {
    "text": "slash test pull kubernetes kind et with hyphens between them and we've got an",
    "start": "1398440",
    "end": "1403720"
  },
  {
    "text": "optional pre cement now we're hoping to probably make that a default one soon",
    "start": "1403720",
    "end": "1409470"
  },
  {
    "text": "do you have a plan to support creating image retreats and share the volumes",
    "start": "1416850",
    "end": "1423280"
  },
  {
    "text": "such as universe or ice cozy around with creatives across sir I'm sorry I'm not",
    "start": "1423280",
    "end": "1431500"
  },
  {
    "text": "sure I understood the question so I create Cresta I want to create a registry as well so I can just pushing",
    "start": "1431500",
    "end": "1439600"
  },
  {
    "text": "images from humanities using dictor or 1080 wheel and I also want to create",
    "start": "1439600",
    "end": "1445720"
  },
  {
    "text": "shared volumes such as I knew it NFS or Isis target I wrote with the cross so we",
    "start": "1445720",
    "end": "1453160"
  },
  {
    "text": "we do have support for adding extra volumes to the notes to pass through things we do not have any special",
    "start": "1453160",
    "end": "1458559"
  },
  {
    "text": "support for registries right now but it is something we're tracking",
    "start": "1458559",
    "end": "1462809"
  },
  {
    "text": "just go in order",
    "start": "1469799",
    "end": "1473220"
  },
  {
    "text": "1 - is it possible to use card with another container real-time like",
    "start": "1486660",
    "end": "1494070"
  },
  {
    "text": "competitor de or cry or something like this using kind of the other controllers",
    "start": "1494070",
    "end": "1500880"
  },
  {
    "text": "not yet we're looking at that we so that's a big thing that we want to do probably after we finish the ipv6 stuff",
    "start": "1500880",
    "end": "1507340"
  },
  {
    "text": "is a refactor out so that we're not talking to Dockers in many places and we have like a little kind of CRA Ashim for",
    "start": "1507340",
    "end": "1515590"
  },
  {
    "text": "unit testing and pod mana will be the next one we're targeting CRI functionality as much as possible like",
    "start": "1515590",
    "end": "1521650"
  },
  {
    "text": "we don't use excessively docker specific things where we can avoid it but it will take some time we're big fans that we're",
    "start": "1521650",
    "end": "1531520"
  },
  {
    "text": "running container D on the nodes now because we've been able to do a number of optimizations around how the food up",
    "start": "1531520",
    "end": "1536650"
  },
  {
    "text": "happens because of that and I'd like to see more of that all right one more",
    "start": "1536650",
    "end": "1542440"
  },
  {
    "text": "question here ok since you're suggesting",
    "start": "1542440",
    "end": "1548380"
  },
  {
    "text": "that we should use it as a library you not use bash and you're still alpha do",
    "start": "1548380",
    "end": "1554410"
  },
  {
    "text": "you have any plans on how you're doing versioning with kubernetes for example you have a project using 1/12 typically",
    "start": "1554410",
    "end": "1561970"
  },
  {
    "text": "if you're in education or something you are a little bit behind so any plans on how to do that in in future possibly",
    "start": "1561970",
    "end": "1570100"
  },
  {
    "text": "using replace um that's a really tough one and that's part of why we focus on the command line first",
    "start": "1570100",
    "end": "1576100"
  },
  {
    "text": "because yeah that one's tricky why not one solution is to just have your test",
    "start": "1576100",
    "end": "1582040"
  },
  {
    "text": "suite import this and hopefully your test suite can be decoupled enough to just talk to your application and then",
    "start": "1582040",
    "end": "1588790"
  },
  {
    "text": "you can version that separately yeah I think I think that comes about kind of from the blackbox nature for example or",
    "start": "1588790",
    "end": "1596110"
  },
  {
    "text": "our test suite never really touches any core application code it's it is",
    "start": "1596110",
    "end": "1601420"
  },
  {
    "text": "basically its own application we compile that to its own binary",
    "start": "1601420",
    "end": "1605880"
  },
  {
    "text": "I would like to ask is it possible to deploy images using hell you mean the",
    "start": "1611120",
    "end": "1618340"
  },
  {
    "text": "the docker images or deploying the applications on it yes so I mean you can",
    "start": "1618340",
    "end": "1624020"
  },
  {
    "text": "yeah you can use helm against the cluster helm and teller against the cluster that you're deploying to in fact",
    "start": "1624020",
    "end": "1630080"
  },
  {
    "text": "manager does exactly that so we can verify that our helm charts also work as part of our end-to-end testing flow the",
    "start": "1630080",
    "end": "1636890"
  },
  {
    "text": "docker image side of things I don't think that's something that helm does generally anyway publishing images using",
    "start": "1636890",
    "end": "1644059"
  },
  {
    "text": "helm I think it's more as the deployment although lots of things change in this space quite rapidly so I'll disclaimer",
    "start": "1644059",
    "end": "1650090"
  },
  {
    "text": "that okay thank you okay time for",
    "start": "1650090",
    "end": "1655550"
  },
  {
    "text": "questions still any more questions on this sides one down at the front one down in front all right",
    "start": "1655550",
    "end": "1663160"
  },
  {
    "text": "if we already use prowl at the CIE would you recommend a starting path to use",
    "start": "1670860",
    "end": "1677230"
  },
  {
    "text": "kind you should send one of us a ping we",
    "start": "1677230",
    "end": "1682270"
  },
  {
    "text": "do have that set up but it is a little bit hairy might give you a hand with that to clarify we use prowl as well and",
    "start": "1682270",
    "end": "1689950"
  },
  {
    "text": "yeah I've been running kinda nerf quite a while now you just need to make sure you make your pods privileged enough if",
    "start": "1689950",
    "end": "1698320"
  },
  {
    "text": "nothing else kinds own pre submits run probes so we can point to that another",
    "start": "1698320",
    "end": "1705250"
  },
  {
    "text": "question here okay hi any plans or work",
    "start": "1705250",
    "end": "1713050"
  },
  {
    "text": "already being dumped to use kind as a library from other languages I I think",
    "start": "1713050",
    "end": "1722380"
  },
  {
    "text": "not I'm hoping that I mean so the command line is meant to be used from",
    "start": "1722380",
    "end": "1727480"
  },
  {
    "text": "these things but that's an interesting topic there's a bit of logic in the kind",
    "start": "1727480",
    "end": "1733420"
  },
  {
    "text": "library to do some of the setup we have to do things like generate the config or like we used to do more things during",
    "start": "1733420",
    "end": "1741220"
  },
  {
    "text": "boot up to control that we've moved a lot more of it to be basically just running the image but there are a few",
    "start": "1741220",
    "end": "1746440"
  },
  {
    "text": "things that we have to set up and configure and whatnot we basically probably have to like rewrite the kind aspect in another",
    "start": "1746440",
    "end": "1753910"
  },
  {
    "text": "language and I think maybe over time it could be more",
    "start": "1753910",
    "end": "1762409"
  },
  {
    "text": "possible if we manage to reduce the amount of stuff that kind itself has to do until we can just get it to the point of a docker run I mean I guess you can",
    "start": "1762409",
    "end": "1770269"
  },
  {
    "text": "rap you know right docker run in Python or something perhaps I was thinking maybe that there's the kind cluster API",
    "start": "1770269",
    "end": "1778820"
  },
  {
    "text": "provider which turns kind into something that you can access with cluster API and",
    "start": "1778820",
    "end": "1784210"
  },
  {
    "text": "after that he could use any other any any client any kubernetes client",
    "start": "1784210",
    "end": "1789320"
  },
  {
    "text": "attention to to to to do things with it I can't speak of the maturity of the",
    "start": "1789320",
    "end": "1794359"
  },
  {
    "text": "project or anything like that we have actually discussed that it gets a little goofy because right now cluster API uses",
    "start": "1794359",
    "end": "1801499"
  },
  {
    "text": "kind to bootstrap by default so would you like bootstrap in kind with kind but sure theoretical purely theoretical idea",
    "start": "1801499",
    "end": "1809149"
  },
  {
    "text": "so there's another question here yes I",
    "start": "1809149",
    "end": "1820220"
  },
  {
    "text": "was wondering how do you approach or if you have any plan to approach the",
    "start": "1820220",
    "end": "1825379"
  },
  {
    "text": "problem of external dependencies for instance let's say the case I'm I",
    "start": "1825379",
    "end": "1831649"
  },
  {
    "text": "declared a PVC using a storage class which is a natively a storage class",
    "start": "1831649",
    "end": "1838249"
  },
  {
    "text": "because I've got an e KS managed cluster or I'm using an ALP ingress controller",
    "start": "1838249",
    "end": "1843559"
  },
  {
    "text": "or even I'm using an external database let's say dynamo DB so - so you would",
    "start": "1843559",
    "end": "1851720"
  },
  {
    "text": "want to sort of mock it out its storage",
    "start": "1851720",
    "end": "1857389"
  },
  {
    "text": "is a particularly tricky one with kind I think you can install a fake storage",
    "start": "1857389",
    "end": "1863869"
  },
  {
    "text": "class that pretends to be the same but like some level when you start to get pretty far in those things I would",
    "start": "1863869",
    "end": "1870169"
  },
  {
    "text": "recommend like you have a QA pass at some point further in the dev cycle where you actually run in a more broad",
    "start": "1870169",
    "end": "1876679"
  },
  {
    "text": "like environment and make sure that everything works out is expect there because storage is one of those points where like if you're not",
    "start": "1876679",
    "end": "1882950"
  },
  {
    "text": "specifying many things it's gonna work great and be exactly same everywhere if you start tuning things and whatnot is",
    "start": "1882950",
    "end": "1888320"
  },
  {
    "text": "it's gonna be a little bit different that's hard to avoid more questions",
    "start": "1888320",
    "end": "1894410"
  },
  {
    "text": "please we've got five more minutes okay one over there I'll try to come over all",
    "start": "1894410",
    "end": "1901490"
  },
  {
    "text": "right okay somebody hello I have a",
    "start": "1901490",
    "end": "1911270"
  },
  {
    "text": "question more about testing operators and how you do this internally with kind and particularly with eventual",
    "start": "1911270",
    "end": "1917030"
  },
  {
    "text": "consistency so the problem we are having as our operators are just eventually consistent so you run into like flapping",
    "start": "1917030",
    "end": "1924140"
  },
  {
    "text": "tests because you have a time limit set how do we handle this internally or do you have any wise advice to do with this",
    "start": "1924140",
    "end": "1931000"
  },
  {
    "text": "yeah that's a great question that's we had a good discussion about this the",
    "start": "1931000",
    "end": "1936620"
  },
  {
    "text": "other day in some colleagues so like you say unit tests don't really pick that up",
    "start": "1936620",
    "end": "1941630"
  },
  {
    "text": "because you run a reconcile function once and actually things are eventually consistent we need to keep going this is",
    "start": "1941630",
    "end": "1949970"
  },
  {
    "text": "where I'd say kind really shines because obviously you are running your controller you are doing that whole",
    "start": "1949970",
    "end": "1955400"
  },
  {
    "text": "thing you do need to be careful to maybe count the number of times it takes to",
    "start": "1955400",
    "end": "1960440"
  },
  {
    "text": "get to your finally consistent state or how long and that can generally be handled quite well with test timeouts",
    "start": "1960440",
    "end": "1966350"
  },
  {
    "text": "and the like I think some of the other strategies on a more like a unit testing level could be considering running kind",
    "start": "1966350",
    "end": "1973910"
  },
  {
    "text": "of the reconcile function in a for loop up to 10 times 15 times 20 times whatever is appropriate for your code",
    "start": "1973910",
    "end": "1981820"
  },
  {
    "text": "yeah that that's what I'd say for the eventually consistent things but with kind itself you do kind of want to do",
    "start": "1981820",
    "end": "1988010"
  },
  {
    "text": "this in a larger cluster because it may be that you're not actually getting to your consistent state because something",
    "start": "1988010",
    "end": "1993260"
  },
  {
    "text": "else is fighting you basically yeah does",
    "start": "1993260",
    "end": "1999560"
  },
  {
    "text": "kind give you an ability to restart your entire kubernetes environment between tests or between tests Suites do you",
    "start": "1999560",
    "end": "2007630"
  },
  {
    "text": "mean reusing the same cluster all like let's suppose that I want to clear my state",
    "start": "2007630",
    "end": "2013190"
  },
  {
    "text": "between the test suites and maybe clear some kind of database state would it be",
    "start": "2013190",
    "end": "2019159"
  },
  {
    "text": "possible to restart it so grammatically we actually recommend just throwing away the cluster and making another one it'll",
    "start": "2019159",
    "end": "2025519"
  },
  {
    "text": "take you about 30 seconds to boot occult but like would it be done in an external",
    "start": "2025519",
    "end": "2031039"
  },
  {
    "text": "script or is it like can it be coded into my test like in like in your test",
    "start": "2031039",
    "end": "2037609"
  },
  {
    "text": "harness like okay so this test these set of tests are gonna run with this cluster and then this set of tests are gonna use",
    "start": "2037609",
    "end": "2042950"
  },
  {
    "text": "a new one just spend one up tear down tear down is near instantaneous it'll take you a second or two and up is about",
    "start": "2042950",
    "end": "2050059"
  },
  {
    "text": "30 seconds so if you really want that clean state there's no better way than just actually having a clean slate",
    "start": "2050059",
    "end": "2056200"
  },
  {
    "text": "Thanks",
    "start": "2056200",
    "end": "2059200"
  },
  {
    "text": "someone he had a question is one of you",
    "start": "2073700",
    "end": "2080378"
  },
  {
    "text": "alright if that's all the question oh there's one there yeah I can see",
    "start": "2081760",
    "end": "2087790"
  },
  {
    "text": "so could you raise your hand again please",
    "start": "2091050",
    "end": "2095190"
  },
  {
    "text": "[Music]",
    "start": "2101950",
    "end": "2105160"
  },
  {
    "text": "so so so time to ask really quickly I want a heist on stage here anyone who has sent us a PR would you",
    "start": "2107850",
    "end": "2114090"
  },
  {
    "text": "come up I know they're a bunch of people are here I see you Antonio okay the",
    "start": "2114090",
    "end": "2124320"
  },
  {
    "text": "question would be you mentioned that you also run in Windows so using kind as a deaf environment for",
    "start": "2124320",
    "end": "2131550"
  },
  {
    "text": "like a prod like environment or to work on Cuba natives on Windows what is it possible or do you what what",
    "start": "2131550",
    "end": "2140310"
  },
  {
    "text": "are the major problems surrounding this when using kind it should run fine",
    "start": "2140310",
    "end": "2146340"
  },
  {
    "text": "because it's just using docker containers that said we don't support Windows nodes yet but we do support Windows as a host it's a little bit not",
    "start": "2146340",
    "end": "2153450"
  },
  {
    "text": "quite as well supported because we don't have CI for it yet and I don't develop from it but I do periodically check and",
    "start": "2153450",
    "end": "2159930"
  },
  {
    "text": "make sure and we avoid anything that's operating system specific on the host side Thanks thank you Thanks thanks very",
    "start": "2159930",
    "end": "2167970"
  },
  {
    "text": "much everyone [Applause]",
    "start": "2167970",
    "end": "2175469"
  }
]