[
  {
    "text": "all right uh hello everybody uh we're here to talk to you today about uh our journey through uh getting the open tofu",
    "start": "359",
    "end": "6520"
  },
  {
    "text": "registry up and running uh it's been a long process and",
    "start": "6520",
    "end": "12679"
  },
  {
    "text": "hopefully we'll take you through all of the steps uh but just to get things started first um my name is James humph",
    "start": "12679",
    "end": "18039"
  },
  {
    "text": "I'm a software engineer at spacelift and I'm an open tofu core engineer I've been around in the open tofu project since",
    "start": "18039",
    "end": "23760"
  },
  {
    "text": "day number one and and I'm arol I've also been an open tofu since day number",
    "start": "23760",
    "end": "28960"
  },
  {
    "text": "one and I'm a principal engineering mzero so let's get started we have a lot to go through uh first of all I'll give",
    "start": "28960",
    "end": "35960"
  },
  {
    "text": "you a bit of background on the start of open tofu uh we started off as a fork of terraform some pre 1.6.0 version of it",
    "start": "35960",
    "end": "44239"
  },
  {
    "text": "and we had a bunch of stuff we had to get going uh we had to stabilize work in uh in progress features like the testing",
    "start": "44239",
    "end": "50840"
  },
  {
    "text": "feature uh that was new at the time we had to fix some bugs and crashes that were in the testing feature mainly",
    "start": "50840",
    "end": "57480"
  },
  {
    "text": "during that time and uh remove a lot of uh potential tra trademark violations of",
    "start": "57480",
    "end": "63160"
  },
  {
    "text": "tform for obvious reasons well uh that should have been very straightforward at",
    "start": "63160",
    "end": "68520"
  },
  {
    "text": "least that's what we thought because later we found out that tform registry has changed its terms of service uh now",
    "start": "68520",
    "end": "76159"
  },
  {
    "text": "it can all be used with or in support of hashicorp terraform and we are not Hashi",
    "start": "76159",
    "end": "81520"
  },
  {
    "text": "Corp terraform so we're in a bit of a pickle so we had to create our own registry now uh most of you here",
    "start": "81520",
    "end": "88799"
  },
  {
    "text": "probably know what a terraform or open tofu registry is if you're using terraform or open tofu but I'll give you",
    "start": "88799",
    "end": "94920"
  },
  {
    "text": "a quick rown anyway it's basically a catalog of providers and modules",
    "start": "94920",
    "end": "100079"
  },
  {
    "text": "providers and modules are the main building blocks of uh ter of terraform",
    "start": "100079",
    "end": "105320"
  },
  {
    "text": "and TF configuration in general and U terraform and open to can't function",
    "start": "105320",
    "end": "111759"
  },
  {
    "text": "without that they need providers and modules for every TF configuration you have your pro if you're using AWS",
    "start": "111759",
    "end": "117920"
  },
  {
    "text": "whatever you're using the regist so that's a very important part of",
    "start": "117920",
    "end": "123719"
  },
  {
    "text": "terraform and open tofu uh when you run terraform in it or open tofu in it uh",
    "start": "123719",
    "end": "130039"
  },
  {
    "text": "that's when you contact and communicate with the registry and you download the providers and modules that you",
    "start": "130039",
    "end": "136640"
  },
  {
    "text": "need and if you've ever had issues with your providers or modules you probably know that their implementations are in",
    "start": "136640",
    "end": "143480"
  },
  {
    "text": "public GitHub repositories and for every new version there's a release that's how they manage versions for Prov ERS and",
    "start": "143480",
    "end": "151360"
  },
  {
    "text": "modules now for how the registry Works behind the scenes there's an API called",
    "start": "151360",
    "end": "156879"
  },
  {
    "text": "the V1 API that it implements it has four endpoints two for listing versions",
    "start": "156879",
    "end": "162040"
  },
  {
    "text": "for modules and providers and two for getting download information uh for a specific version of a provider or module",
    "start": "162040",
    "end": "169200"
  },
  {
    "text": "so when terraform CLI or open to CLI uh decides that it needs a specific",
    "start": "169200",
    "end": "174760"
  },
  {
    "text": "provider or module it first of all asks what are the available versions and gets",
    "start": "174760",
    "end": "180120"
  },
  {
    "text": "back the available versions and when it decides okay this is the specific version that I need of the provider home",
    "start": "180120",
    "end": "186599"
  },
  {
    "text": "module it asks for download information of that provider module and gets back a",
    "start": "186599",
    "end": "192080"
  },
  {
    "text": "download URL from the registry so that's basically a quick round of how it works now we'll talk",
    "start": "192080",
    "end": "198799"
  },
  {
    "text": "about the alpha registry yep so uh we call it the alpha registry because it was what we wanted to really get started",
    "start": "198799",
    "end": "205360"
  },
  {
    "text": "with and we knew we were going to throw part of this away so we realized really really quickly that we had a couple of",
    "start": "205360",
    "end": "211159"
  },
  {
    "text": "requirements for this Alpha registry uh to get things going so we first off we wanted to get started immediately we",
    "start": "211159",
    "end": "218360"
  },
  {
    "text": "realized we had to move quickly we wanted to be making sure that we can get a release of tofu out and into the hands",
    "start": "218360",
    "end": "223599"
  },
  {
    "text": "of people because people really wanted to be moving over and testing it so to get us going we decided to take a",
    "start": "223599",
    "end": "229400"
  },
  {
    "text": "two-pronged approach we started off with getting the alpha registry set up first and this was a quick and hacky solution",
    "start": "229400",
    "end": "235720"
  },
  {
    "text": "which I'm going to talk you through and you'll realize how quick and hacky it was uh and then uh alongside that we",
    "start": "235720",
    "end": "242040"
  },
  {
    "text": "wanted to take all of our learning from the alpha registry take that work with the community and build our stable",
    "start": "242040",
    "end": "247439"
  },
  {
    "text": "registry which is what we're using today so we had a couple of requirements",
    "start": "247439",
    "end": "253120"
  },
  {
    "text": "uh a drop in replacement is what we were aiming for and what we kept saying throughout open tofu and uh hopefully",
    "start": "253120",
    "end": "259400"
  },
  {
    "text": "you'll see that we achieved this um but we wanted people to come along and just run tofu in it on their existing",
    "start": "259400",
    "end": "265280"
  },
  {
    "text": "projects we didn't want people to have to go and make code changes we didn't want people to have to worry about how",
    "start": "265280",
    "end": "270680"
  },
  {
    "text": "do I migrate people should be able to come along and use tofu out of the box with no problem our next uh requirement",
    "start": "270680",
    "end": "277960"
  },
  {
    "text": "sorry was that it had to handle the load of the open tofu usage we know that for every single provider every single run",
    "start": "277960",
    "end": "284560"
  },
  {
    "text": "that's going on there's a lot of HTTP requests and we have to handle all of those so we want to make sure that our",
    "start": "284560",
    "end": "289800"
  },
  {
    "text": "Alpha registry isn't going to fall over because if we go and do a fork and release it and no one can use it it's no",
    "start": "289800",
    "end": "296520"
  },
  {
    "text": "good uh but we wanted to make sure that it was there and ready for everyone to use so to go into detail about the alpha",
    "start": "296520",
    "end": "303000"
  },
  {
    "text": "registry a little bit uh we dove in deep with AWS because it's what we know and what we what we use uh and we tried to",
    "start": "303000",
    "end": "309840"
  },
  {
    "text": "keep it as simple as possible because we uh our Focus was to move fast so we set up one AWS lamba which handled all of",
    "start": "309840",
    "end": "316800"
  },
  {
    "text": "our API requests these are the four requests that Arrow was talking about earlier and then we uh threw an API",
    "start": "316800",
    "end": "323080"
  },
  {
    "text": "Gateway in front of it we preemptively tried to cash as much as we could because we realized a lot of people are",
    "start": "323080",
    "end": "328240"
  },
  {
    "text": "requesting the same data a lot of people love the AWS provider but not many people are using it to manage their",
    "start": "328240",
    "end": "334199"
  },
  {
    "text": "Spotify playlist or anything like this so this was working really well we were",
    "start": "334199",
    "end": "339319"
  },
  {
    "text": "handing a lot of requests very cheap and very quickly and once we got through all of",
    "start": "339319",
    "end": "346960"
  },
  {
    "text": "this we hit an issue we were talking over to GitHub every single time someone",
    "start": "346960",
    "end": "352280"
  },
  {
    "text": "made one of these API requests and we were quickly getting re limited 5,000 request is what GitHub gives us and that",
    "start": "352280",
    "end": "358120"
  },
  {
    "text": "was not enough for the load that we were doing doing we were quickly falling over and we was taking down the registry a",
    "start": "358120",
    "end": "363720"
  },
  {
    "text": "lot so it everything was working until it didn't and so we panicked and we",
    "start": "363720",
    "end": "368800"
  },
  {
    "text": "added in caching we threw in an API Gateway between ourselves our Lambda and",
    "start": "368800",
    "end": "374120"
  },
  {
    "text": "the uh GitHub repository and what this allowed us to do was Cash every request that we done to GitHub we're doing a lot",
    "start": "374120",
    "end": "380280"
  },
  {
    "text": "of the same requests and we wanted to make sure that we're not wasting our API uh rate limit because that's a very",
    "start": "380280",
    "end": "386120"
  },
  {
    "text": "precious resource and that was working really well",
    "start": "386120",
    "end": "391560"
  },
  {
    "text": "and this is a common theme in this section of the alpha registry where we'd fix one thing and another thing would pop up and we're just moving bottlenecks",
    "start": "391560",
    "end": "398240"
  },
  {
    "text": "all over the place we were hitting API Lambda timeouts people were requesting the API provider we were trying to talk",
    "start": "398240",
    "end": "405000"
  },
  {
    "text": "to GitHub and fetch information about every one of its 232 releases and GitHub",
    "start": "405000",
    "end": "411080"
  },
  {
    "text": "doesn't like having a fast API so what did we do we added in more caching we we",
    "start": "411080",
    "end": "418520"
  },
  {
    "text": "implemented a document DB store where we would every time somebody makes a request we' try and serve that",
    "start": "418520",
    "end": "424319"
  },
  {
    "text": "information as quickly as possible and store it away in a document DB we realized that we can dump this data and",
    "start": "424319",
    "end": "430639"
  },
  {
    "text": "serve it back up for another hour we've implemented our own version of caching and we're simplifying things and we also",
    "start": "430639",
    "end": "436759"
  },
  {
    "text": "introduced uh another Lambda here which may seem a little bit confusing but we were asynchronously um doing update so",
    "start": "436759",
    "end": "444000"
  },
  {
    "text": "anytime a user came in and requested a version of our provider we'd also tell our other Lambda hey go and update",
    "start": "444000",
    "end": "450199"
  },
  {
    "text": "document DB if we need to and this meant sure that made sure that what we were doing was great but as you've all",
    "start": "450199",
    "end": "457520"
  },
  {
    "text": "probably preempted caching is difficult and cash invalidation is one of the biggest problems in programming as",
    "start": "457520",
    "end": "464199"
  },
  {
    "text": "always so we were hitting problems where github's API would fail for one of our",
    "start": "464199",
    "end": "470240"
  },
  {
    "text": "few requests and all of a sudden a version of the AWS provider wasn't available a version of the cloud posy",
    "start": "470240",
    "end": "477440"
  },
  {
    "text": "deep merge module wasn't available and all of a sudden people couldn't use tofu",
    "start": "477440",
    "end": "482599"
  },
  {
    "text": "100% of the time it was down for 5 seconds every hour and I wasn't very happy with that we weren't very happy",
    "start": "482599",
    "end": "488840"
  },
  {
    "text": "with that so it was good enough it got us going it",
    "start": "488840",
    "end": "494639"
  },
  {
    "text": "got us working with an alpha release uh I believe once we got through and we were releasing to Alpha we got to a",
    "start": "494639",
    "end": "501479"
  },
  {
    "text": "point where we were hitting maybe one issue a day for 30 seconds uh it's not",
    "start": "501479",
    "end": "506919"
  },
  {
    "text": "the up time that I would like but it was good enough and we got it working really quickly but we took away some of these",
    "start": "506919",
    "end": "513080"
  },
  {
    "text": "learnings we made sure that we we knew we had to keep it simple we didn't want to keep adding lambas we don't want to",
    "start": "513080",
    "end": "518159"
  },
  {
    "text": "keep adding uh caching in different places we didn't want to keep adding to the situation we wanted to try and",
    "start": "518159",
    "end": "523479"
  },
  {
    "text": "simplify our process and then we also realized that we had to make it make it work along with how open tofu work we've",
    "start": "523479",
    "end": "529800"
  },
  {
    "text": "inherited this code we've inherited how it talks to the registry and we want to make sure that we're doing things in the",
    "start": "529800",
    "end": "535360"
  },
  {
    "text": "right kind of way and low maintenance arol and I and",
    "start": "535360",
    "end": "540399"
  },
  {
    "text": "other open to tofu Corp members were spending all of our times looking in AWS x-ray looking in Cloud uh Cloud watch",
    "start": "540399",
    "end": "548880"
  },
  {
    "text": "trying to figure out why a certain request was failing and we didn't want to do this anymore it's not that we",
    "start": "548880",
    "end": "554200"
  },
  {
    "text": "don't love debugging and firefighting we do but it's something that we can't keep",
    "start": "554200",
    "end": "560320"
  },
  {
    "text": "doing and especially when we're an open source Community uh we are full-time Engineers working on the open tofu",
    "start": "560320",
    "end": "565760"
  },
  {
    "text": "project but our time is really valuable we've got a website to run we've got a CLI to add features to and we've got to",
    "start": "565760",
    "end": "571079"
  },
  {
    "text": "prioritize our time so this is where we came into picking a stable design alongside all of",
    "start": "571079",
    "end": "577920"
  },
  {
    "text": "this work on the alpha registry that we were doing we were trying to make sure that we had a stable design ready for",
    "start": "577920",
    "end": "583240"
  },
  {
    "text": "our implementation this was our V2 we wanted to take that Alpha and throw it away so we took everything that we",
    "start": "583240",
    "end": "589120"
  },
  {
    "text": "learned we went out to the community and started asking for uh rfc's request for comments and this was a great process we",
    "start": "589120",
    "end": "596760"
  },
  {
    "text": "went out to our slack Community uh which should all join us put a link at the end uh and we went out to everyone in",
    "start": "596760",
    "end": "603320"
  },
  {
    "text": "general saying hey we would like to talk to the community about how to best do this design we're all smart people but",
    "start": "603320",
    "end": "609440"
  },
  {
    "text": "we're aware that there's thousands of smart people in the community as well and we would be silly to ignore any solutions that they come to us",
    "start": "609440",
    "end": "616120"
  },
  {
    "text": "with so uh at the end of this process we decided that we should let the technical steering committee decide now the",
    "start": "616120",
    "end": "622040"
  },
  {
    "text": "technical steering committee is something you might hear thrown around with open tofu is a board of some of the founding members of the open tofu",
    "start": "622040",
    "end": "628640"
  },
  {
    "text": "project so from from each of the people who are submitting full-time Engineers a lot of the projects uh who are involved",
    "start": "628640",
    "end": "635240"
  },
  {
    "text": "uh and we have a board of members who make decisions so we put it out we put out a request myself and one of my",
    "start": "635240",
    "end": "642120"
  },
  {
    "text": "co-workers Kuba ended up uh putting in uh two different requests here uh we ended up getting uh an external",
    "start": "642120",
    "end": "648399"
  },
  {
    "text": "contribution from a uh existing registry called Terror rag uh and we were also",
    "start": "648399",
    "end": "653680"
  },
  {
    "text": "talking to another member of the cncf called uh artifact Hub to try and figure out if we can piggy back on some of",
    "start": "653680",
    "end": "659839"
  },
  {
    "text": "their existing uh infrastructure and providers and things like this they offer Helm charts so when we got toward",
    "start": "659839",
    "end": "668800"
  },
  {
    "text": "the end of the day uh we ended up deciding and the technical steering committee ended up deciding as well on",
    "start": "668800",
    "end": "674240"
  },
  {
    "text": "working with a Homebrew like registry design uh and this was King and just to talk you through a little bit of",
    "start": "674240",
    "end": "680279"
  },
  {
    "text": "background on Homebrew and what it is I'll pass over to ARL yeah so I'll talk a bit first of all about the inspiration",
    "start": "680279",
    "end": "687200"
  },
  {
    "text": "I had for this uh show this RFC uh Homebrew uh first of all is anyone here",
    "start": "687200",
    "end": "693200"
  },
  {
    "text": "using Mac OS do you know Homebrew yeah okay not enough hands but good enough um",
    "start": "693200",
    "end": "700519"
  },
  {
    "text": "yeah so I'll give a quick round down of of what Homebrew is uh it's basically a",
    "start": "700519",
    "end": "706440"
  },
  {
    "text": "package manager for Macos it's a very popular one uh you can use it to download pretty much any package or",
    "start": "706440",
    "end": "712680"
  },
  {
    "text": "binary you would like for so for example if you'd like to use open tofu you can just use Brew install open tofu and it",
    "start": "712680",
    "end": "719839"
  },
  {
    "text": "will download and install open Tofu for you yeah that's it that's Homebrew now",
    "start": "719839",
    "end": "725120"
  },
  {
    "text": "how does it work behind the scenes well home pretty much has its own registry kind of uh it has the home brw core",
    "start": "725120",
    "end": "731440"
  },
  {
    "text": "public repository that has all of the formulas there uh you can see the",
    "start": "731440",
    "end": "736680"
  },
  {
    "text": "formula folder there if we click on that we will see a bunch of folders of mostly",
    "start": "736680",
    "end": "742199"
  },
  {
    "text": "single letters which are the first letters of the binary you would like to use for in our case it's O and you'll",
    "start": "742199",
    "end": "748399"
  },
  {
    "text": "find open to RB there now um one point regarding these folders uh uh we talked",
    "start": "748399",
    "end": "754720"
  },
  {
    "text": "to the home group project Le actually commented on the issue for the RFC itself and told us why they did that",
    "start": "754720",
    "end": "761480"
  },
  {
    "text": "it's mainly for better git performance uh in case of projects with a huge git",
    "start": "761480",
    "end": "767160"
  },
  {
    "text": "history so that was very helpful when they talked to us about that we actually did the same thing and you'll see that",
    "start": "767160",
    "end": "772680"
  },
  {
    "text": "in a minute so uh let's take a look at what's inside the open tofu RB file it's",
    "start": "772680",
    "end": "778639"
  },
  {
    "text": "mainly just metadata that you need in order to download uh the open tofu",
    "start": "778639",
    "end": "783920"
  },
  {
    "text": "binary uh it doesn't have it contain the binary itself it just redirects there's",
    "start": "783920",
    "end": "788959"
  },
  {
    "text": "a URL for the artifact in the GitHub releases so that's all there is",
    "start": "788959",
    "end": "796480"
  },
  {
    "text": "there um now Homebrew only manages the latest version of binary so what happens",
    "start": "796480",
    "end": "802880"
  },
  {
    "text": "when there's a new version coming in well you can bump it up you run a brew",
    "start": "802880",
    "end": "808000"
  },
  {
    "text": "bump formula PR command with you provide the tag and the binary and it creates a",
    "start": "808000",
    "end": "813279"
  },
  {
    "text": "GitHub PR for you uh changing the Ruby file according to the new information",
    "start": "813279",
    "end": "819279"
  },
  {
    "text": "new check sums and everything that needs to change um yeah so that's it regarding",
    "start": "819279",
    "end": "825760"
  },
  {
    "text": "Homebrew what I really liked about this is the clarity and open source nature of it everyone can see when a formula was",
    "start": "825760",
    "end": "832480"
  },
  {
    "text": "added and when it was changed and why VI PRS which is what the entire Community",
    "start": "832480",
    "end": "838360"
  },
  {
    "text": "knows uh how to look at so uh we really like that and adding a new um a new",
    "start": "838360",
    "end": "845800"
  },
  {
    "text": "formula would be VPR as well uh people would be it would be pretty easy for the community to add new formulas uh we did",
    "start": "845800",
    "end": "853279"
  },
  {
    "text": "want to streamline that a bit more we will talk about that in a second and something we could not do ourselves",
    "start": "853279",
    "end": "859720"
  },
  {
    "text": "would have this Brew bump formula PR um version for providers or modules there",
    "start": "859720",
    "end": "865440"
  },
  {
    "text": "are a ton of versions all the time uh we have a bunch of providers and modules we",
    "start": "865440",
    "end": "871320"
  },
  {
    "text": "couldn't expect a community or people to run these commands whenever there's a new version coming up so uh we couldn't",
    "start": "871320",
    "end": "878199"
  },
  {
    "text": "do that so now let's talk about the actual stable registry design that we ended up",
    "start": "878199",
    "end": "884040"
  },
  {
    "text": "with um it had four parts first of all uh it had uh repository folder structure",
    "start": "884040",
    "end": "891959"
  },
  {
    "text": "pretty similar to what we had in Homebrew uh we had uh Json files containing metadata for the provider and",
    "start": "891959",
    "end": "898440"
  },
  {
    "text": "module and versions and uh each version you have metad data that I'll talk about",
    "start": "898440",
    "end": "905040"
  },
  {
    "text": "uh in a second and uh we had to run a oneoff hydration uh to have all of the",
    "start": "905040",
    "end": "910519"
  },
  {
    "text": "existing providers and modules there uh we used GitHub search API and uh Google big query for that you can take a look",
    "start": "910519",
    "end": "917240"
  },
  {
    "text": "at the PRS we had with the hydration to see to have more info on how we did that",
    "start": "917240",
    "end": "923399"
  },
  {
    "text": "and okay now that we have the Json files we had to get new versions so we had to",
    "start": "923399",
    "end": "928720"
  },
  {
    "text": "pick periodically update um the existing Json files with new versions um after",
    "start": "928720",
    "end": "936000"
  },
  {
    "text": "that uh the V1 API we ended up not having a V1 API we ended up mimicking it",
    "start": "936000",
    "end": "941199"
  },
  {
    "text": "with hosting static files uh you'll see that again in one minute and uh for",
    "start": "941199",
    "end": "947000"
  },
  {
    "text": "adding a new provider all module all you had to do uh was create a PR but we",
    "start": "947000",
    "end": "953399"
  },
  {
    "text": "decided to simplify that a bit more so for the folder structure you can see pretty similar to home we have the",
    "start": "953399",
    "end": "959800"
  },
  {
    "text": "modules and providers folders here if you'd like to go to integration GitHub",
    "start": "959800",
    "end": "965079"
  },
  {
    "text": "provider for example you'll have to go to Providers and then I Integrations and then you find",
    "start": "965079",
    "end": "972600"
  },
  {
    "text": "it contains download URLs and all of the necessary data uh to get those binaries",
    "start": "989519",
    "end": "995160"
  },
  {
    "text": "they are mainly hosted on GitHub uh release",
    "start": "995160",
    "end": "1000360"
  },
  {
    "text": "artifacts now for version bumping uh we decided to go with uh scheduled GitHub",
    "start": "1000360",
    "end": "1006680"
  },
  {
    "text": "actions uh what we liked about that is this is very visible to the community the community could take a look and see",
    "start": "1006680",
    "end": "1013839"
  },
  {
    "text": "okay the new version is not here yet it's going to be there in 10 minutes for example or they can actually see if a",
    "start": "1013839",
    "end": "1020120"
  },
  {
    "text": "version bump process failed and notify us about that so uh that's something we",
    "start": "1020120",
    "end": "1025640"
  },
  {
    "text": "really liked about that the op so nature of it uh we use some tics to not hit the",
    "start": "1025640",
    "end": "1030839"
  },
  {
    "text": "GitHub API rate limit that you saw earlier in the graphs uh and I'll talk",
    "start": "1030839",
    "end": "1037120"
  },
  {
    "text": "about that soon and that what that's what helped us scrape around 30,000",
    "start": "1037120",
    "end": "1042880"
  },
  {
    "text": "repositories every hour uh which we do right now every hour um yeah so that's",
    "start": "1042880",
    "end": "1049600"
  },
  {
    "text": "how we did it for modules instead of relying all releases uh we could just rely on the tags so we ran git commands",
    "start": "1049600",
    "end": "1056919"
  },
  {
    "text": "at specifically git LS remote and we get all of the taxs for all of the modules and if there's a new one we rebuild the",
    "start": "1056919",
    "end": "1064080"
  },
  {
    "text": "Json file with the new versions now for providers we did have to rely on releases so uh we went to uh gab",
    "start": "1064080",
    "end": "1073039"
  },
  {
    "text": "releases RSS feed and try to check for each provider if there's a new version and only if there was one then we call",
    "start": "1073039",
    "end": "1078840"
  },
  {
    "text": "called GitHub API to get the release and rebuild the Json file so that's how we went from a thous couple thousands",
    "start": "1078840",
    "end": "1086120"
  },
  {
    "text": "requests uh each hour to just a few dozen um yeah so that that's how we",
    "start": "1086120",
    "end": "1091640"
  },
  {
    "text": "periodically build the Json files so uh on the back of that one",
    "start": "1091640",
    "end": "1097360"
  },
  {
    "text": "please don't tell GitHub that we're circumventing their API request away limits with the best we can to try and",
    "start": "1097360",
    "end": "1103559"
  },
  {
    "text": "don't talk about that one so um we had to go and Implement those four different API V1 calls that we had described at",
    "start": "1103559",
    "end": "1111440"
  },
  {
    "text": "the start of the registry so we're fetching the module and the provider versions and then fetching a download",
    "start": "1111440",
    "end": "1116600"
  },
  {
    "text": "link for each of those individual ones so um we wanted to make sure that all of",
    "start": "1116600",
    "end": "1122960"
  },
  {
    "text": "the data that we're storing going back to what we were talking about as a requirement was simple so we realized that we can serve all of this data",
    "start": "1122960",
    "end": "1130000"
  },
  {
    "text": "statically if we can take all of the metadata that we're storing in GitHub and turn it into these Json files that",
    "start": "1130000",
    "end": "1135440"
  },
  {
    "text": "ARL is describing we can serve everything statically or 100% from cloudflare R2 now cloudflare R2 we're",
    "start": "1135440",
    "end": "1142640"
  },
  {
    "text": "really thankful for uh there are a business sponsor of ours and so they've given us everything but you can",
    "start": "1142640",
    "end": "1149120"
  },
  {
    "text": "completely take our registry we're working with it right now and it sits 100% in the free tier uh and we're",
    "start": "1149120",
    "end": "1155799"
  },
  {
    "text": "currently handling like hundreds of gigabytes of data coming through this uh so we're really thankful for cloud flare R2 but we made sure that everything was",
    "start": "1155799",
    "end": "1162799"
  },
  {
    "text": "static we have no compute going on here we're really simplifying everything down to just serving files",
    "start": "1162799",
    "end": "1170720"
  },
  {
    "text": "so for example if you want to go and fetch the Integrations GitHub that ARL mentioned earlier uh you can go and",
    "start": "1170960",
    "end": "1176679"
  },
  {
    "text": "request this and we're not quite sure if this is a URL or a folder path it's because they both match uh what we're",
    "start": "1176679",
    "end": "1182200"
  },
  {
    "text": "doing is we're we're creating of directory structure that matches the API that we're doing we're mimicking an",
    "start": "1182200",
    "end": "1187840"
  },
  {
    "text": "actual API but what we're really doing is we're just serving up static data we have no compute no complexity we just",
    "start": "1187840",
    "end": "1194720"
  },
  {
    "text": "leave everything up to Cloud flare to serve a book it so for each of these uh modules or",
    "start": "1194720",
    "end": "1202080"
  },
  {
    "text": "providers we'll create a a set of files we'll create one versions file and this maintains like a list of all of the",
    "start": "1202080",
    "end": "1208000"
  },
  {
    "text": "versions operating systems and architectures that we support for that provider or module uh and then for each",
    "start": "1208000",
    "end": "1214159"
  },
  {
    "text": "of those versions will create individual download links uh and what this means is",
    "start": "1214159",
    "end": "1219480"
  },
  {
    "text": "we've got a lot of files being generated from the metadata that we're going through we we got what did you say",
    "start": "1219480",
    "end": "1224600"
  },
  {
    "text": "almost 30,000 providers and modules so for each of those they can have hundred of releases we're creating a lot of",
    "start": "1224600",
    "end": "1230440"
  },
  {
    "text": "files here um and then we host it all in R2 R2 is again free egress like go and",
    "start": "1230440",
    "end": "1236679"
  },
  {
    "text": "use them they're great you don't have to pay as much as AWS want to charge you um",
    "start": "1236679",
    "end": "1243000"
  },
  {
    "text": "so as you can see here we have our two GitHub actions at the top one is to go and generate all of that data this takes",
    "start": "1243000",
    "end": "1248840"
  },
  {
    "text": "about 10 minutes to go and we're running this hourly uh and that generates all of these Json files and stores them and",
    "start": "1248840",
    "end": "1255360"
  },
  {
    "text": "then we take another 10 minutes to go and sync it all up to R2 which talking thousands and thousands and thousands of",
    "start": "1255360",
    "end": "1261440"
  },
  {
    "text": "files so we have to make sure that we're specifically only uploading those that change because otherwise it I think our",
    "start": "1261440",
    "end": "1267679"
  },
  {
    "text": "initial hydration was like two hours to go and get it all up there it costs a bit of money to go and upload it and we",
    "start": "1267679",
    "end": "1273279"
  },
  {
    "text": "don't want to be hitting that every time so we're trying to be smart about what we're uploading um if you want to go and add a",
    "start": "1273279",
    "end": "1279960"
  },
  {
    "text": "new module or provider we hydrated our registry initially with 30,000 different items roughly uh but there are new",
    "start": "1279960",
    "end": "1286320"
  },
  {
    "text": "modules and providers being created all the time and we can't keep scanning GitHub because they're going to hate us",
    "start": "1286320",
    "end": "1292799"
  },
  {
    "text": "uh so uh if you want to go and add your own module or provided to our registry it's really simple you just need to go and create a PO request to go and add",
    "start": "1292799",
    "end": "1299400"
  },
  {
    "text": "your uh to the registry so to do this you can go to our registry we've",
    "start": "1299400",
    "end": "1304720"
  },
  {
    "text": "automated everything for you go to our registry repository and you can create a new issue there'll be one of two",
    "start": "1304720",
    "end": "1310360"
  },
  {
    "text": "templates there a provider or a module there's also some other templates if you've got issues or anything you want to raise but these are the main two that",
    "start": "1310360",
    "end": "1316720"
  },
  {
    "text": "people are going to be using and we ask you to fill in a super complicated form of two fields we just want to look at your",
    "start": "1316720",
    "end": "1323760"
  },
  {
    "text": "GitHub repository and where it is if you want to add a provider to the repository that you're not an author of that's perfectly fine if it's public and on",
    "start": "1323760",
    "end": "1330320"
  },
  {
    "text": "GitHub we're going to go bring it into our registry so you can use it um what this means is there's a low",
    "start": "1330320",
    "end": "1336400"
  },
  {
    "text": "barrier of Entry coming along and adding your stuff to open tofu is a much much simplified",
    "start": "1336400",
    "end": "1342480"
  },
  {
    "text": "process if you want to uh once once you've added that and you created that issue we have a bunch of automation that",
    "start": "1342480",
    "end": "1348159"
  },
  {
    "text": "happens on the hood we'll go and check that this provider has a bunch of releases it is an actual terraform",
    "start": "1348159",
    "end": "1353320"
  },
  {
    "text": "provider repository um it's got releases that are valid it's not trying to be",
    "start": "1353320",
    "end": "1358400"
  },
  {
    "text": "malicious by swapping some gpg keys around and things like this we're trying to do our best that we can to validate these providers before they come into",
    "start": "1358400",
    "end": "1364760"
  },
  {
    "text": "our registry but this is all automated takes about 5 Seconds to run anytime soone creates the issue the only thing",
    "start": "1364760",
    "end": "1370360"
  },
  {
    "text": "you're going to be GED by is that right now is a human merging those PRS we for security reasons we don't want people",
    "start": "1370360",
    "end": "1376760"
  },
  {
    "text": "misusing the registry there still requires a human to hit that merge button at the end uh but we're getting dozens a day uh dozens a week sorry and",
    "start": "1376760",
    "end": "1383720"
  },
  {
    "text": "we can handle this load perfectly fine for now so where are we today we have been really great in uh",
    "start": "1383720",
    "end": "1392679"
  },
  {
    "text": "everything that we designed and it's really paid off so we're serving hundreds of gigabytes of data and we're",
    "start": "1392679",
    "end": "1397880"
  },
  {
    "text": "hitting uh Cloud flares cashier at like 99.9% uh we are handling all of the load",
    "start": "1397880",
    "end": "1405159"
  },
  {
    "text": "perfectly fine we've had people load testers and uh get blocked by Cloud flare and if Cloud flare is going to",
    "start": "1405159",
    "end": "1411360"
  },
  {
    "text": "block you before we do then I'm really happy with that um we've had dozens of",
    "start": "1411360",
    "end": "1417039"
  },
  {
    "text": "contributions we've had people come in and add their module to the registry we've had people go to their providers and say hey can you add to the open tofu",
    "start": "1417039",
    "end": "1423279"
  },
  {
    "text": "registry and it's there in five minutes 10 minutes because it's super quick to do we were we're successfully a drop in",
    "start": "1423279",
    "end": "1430159"
  },
  {
    "text": "replacement we are super happy today to say that you can come along take your existing terraform code and just run",
    "start": "1430159",
    "end": "1436480"
  },
  {
    "text": "tofu in it and it works perfectly fine you are not going to be hitting the Hashi cor registry you are not going to",
    "start": "1436480",
    "end": "1442120"
  },
  {
    "text": "be uh abusing their terms of service and they can't chase someone down I'm not a lawyer please don't come after me or",
    "start": "1442120",
    "end": "1447880"
  },
  {
    "text": "talk to me about this um but the main thing is this a drop in replacement uh",
    "start": "1447880",
    "end": "1453120"
  },
  {
    "text": "and then uh yeah so migration is super easy just come along take your existing code you know code change is needed just",
    "start": "1453120",
    "end": "1459520"
  },
  {
    "text": "run tofu in it so takeaways from all this stable registry and where we're",
    "start": "1459520",
    "end": "1466240"
  },
  {
    "text": "at community-driven design this was super important to go and get all the community's input uh as ARL mentioned",
    "start": "1466240",
    "end": "1472240"
  },
  {
    "text": "earlier we had the Homebrew uh core contributor get in touch with us and give us some advice about how to host",
    "start": "1472240",
    "end": "1477440"
  },
  {
    "text": "things in GitHub we had multiple people from across the existing ecosystem of",
    "start": "1477440",
    "end": "1482880"
  },
  {
    "text": "providers provider um Registries that are already existing for privates and",
    "start": "1482880",
    "end": "1488000"
  },
  {
    "text": "they all came to us and started talking about how we can do things and we've ended up with a great design we really",
    "start": "1488000",
    "end": "1493760"
  },
  {
    "text": "can't go wrong um maximum visibility if you want to go and say Hey where's my",
    "start": "1493760",
    "end": "1499919"
  },
  {
    "text": "provider you can go and check if it's there in GitHub you can go and see if the file has been added when it was",
    "start": "1499919",
    "end": "1505039"
  },
  {
    "text": "added when the versions were updated when it was synced up to our registry there's full visibility and this helps",
    "start": "1505039",
    "end": "1511760"
  },
  {
    "text": "people debug all of their issues to this day we we're very rarely having issues I think we're at total of three and the",
    "start": "1511760",
    "end": "1518840"
  },
  {
    "text": "biggest impact was that something was an hour late so I'm really happy with that",
    "start": "1518840",
    "end": "1524080"
  },
  {
    "text": "um maintenance maintenance cost has been zero we we have had this running now for",
    "start": "1524080",
    "end": "1530559"
  },
  {
    "text": "a few months and we have had zero issues like we say just one issue where someone's uh provider was an hour late",
    "start": "1530559",
    "end": "1536520"
  },
  {
    "text": "we've put no development time into this and this is really important because as we're a small team of an open source",
    "start": "1536520",
    "end": "1542039"
  },
  {
    "text": "Community we have to make sure that our developer time is put into things like adding features to open tofu that you",
    "start": "1542039",
    "end": "1547360"
  },
  {
    "text": "guys want State encryption and stuff is coming soon we've got a website to run we've got a lot of poor requests and issues to",
    "start": "1547360",
    "end": "1553840"
  },
  {
    "text": "come in and we've got to triage them and we've got to say that our time is really valuable so publicity is key this is the",
    "start": "1553840",
    "end": "1559600"
  },
  {
    "text": "fun part all of this design all of our Alpha registry learnings this meant that we could go and make this registry in a",
    "start": "1559600",
    "end": "1566320"
  },
  {
    "text": "week we wrote some simple code it's I think it's under a thousand lines now we",
    "start": "1566320",
    "end": "1571720"
  },
  {
    "text": "wrote it in a week it's publicly visible and it just works and we're really happy so what's next for the",
    "start": "1571720",
    "end": "1579279"
  },
  {
    "text": "registry we are looking at adding a user interface for our registry right now we don't have one and hashicorp does and we",
    "start": "1579279",
    "end": "1584840"
  },
  {
    "text": "don't like that uh so we want to make sure that people can go and read the provider documentation their module",
    "start": "1584840",
    "end": "1590279"
  },
  {
    "text": "documentation through a user interface and we're looking to go through that same design process it was successful before and we're hoping it's going to be",
    "start": "1590279",
    "end": "1596760"
  },
  {
    "text": "successful again so we're looking forward to the community giving us some contributions about how we can do a register user interface we've already",
    "start": "1596760",
    "end": "1603080"
  },
  {
    "text": "had a couple community members who are working on like proof of Concepts uh and we're really happy to go and see all",
    "start": "1603080",
    "end": "1608600"
  },
  {
    "text": "this unfold so uh if you do have anything you want to go and see you can go and look up our uh repository open",
    "start": "1608600",
    "end": "1614720"
  },
  {
    "text": "tofu registry raise some issues have a poke around or submit an RSC for how you want the design to",
    "start": "1614720",
    "end": "1620640"
  },
  {
    "text": "be so uh the cncf has asked us to add a QR code here if you want to go give us",
    "start": "1620640",
    "end": "1626279"
  },
  {
    "text": "feedback you can scan this uh and we'd be a Miss if we didn't mention that you can join our open T through slack over",
    "start": "1626279",
    "end": "1632039"
  },
  {
    "text": "here with this QR code as well we've got over 1500 members it's a very active community and we'd love to have you all",
    "start": "1632039",
    "end": "1638000"
  },
  {
    "text": "there uh thank you fantastic thank you very much thank",
    "start": "1638000",
    "end": "1645399"
  },
  {
    "text": "you do we have time for questions or yes any",
    "start": "1647159",
    "end": "1654399"
  },
  {
    "text": "questions anybody hi uh can you hear me yes yeah",
    "start": "1654399",
    "end": "1661440"
  },
  {
    "text": "okay so um does it support right now module signing verification of modules",
    "start": "1661440",
    "end": "1668679"
  },
  {
    "text": "the registry or is there any plan to support that so right now there isn't a",
    "start": "1668679",
    "end": "1675360"
  },
  {
    "text": "mechanism to go and check the signatures of modules because modules under the hood work as just cloning a git repo and",
    "start": "1675360",
    "end": "1681919"
  },
  {
    "text": "so what we're doing is we're trusting the git repository uh there to work under the hood I believe there's an",
    "start": "1681919",
    "end": "1687159"
  },
  {
    "text": "issue open if not I'll go and open one right now and we can go and discuss it uh but uh we are currently supporting uh",
    "start": "1687159",
    "end": "1693919"
  },
  {
    "text": "signing for providers so if you are already signing your providers with a gpg key uh in the same process that I",
    "start": "1693919",
    "end": "1700559"
  },
  {
    "text": "mentioned about adding a provider in a module there's also a form for uploading a GP a public gpg key uh and it's all",
    "start": "1700559",
    "end": "1706640"
  },
  {
    "text": "automated and works perfectly fine if your modu provider is either missing from the registry or the gpg key is",
    "start": "1706640",
    "end": "1712919"
  },
  {
    "text": "missing and someone runs tofu in it there's a nice little help message that says you can go and submit this here and",
    "start": "1712919",
    "end": "1718399"
  },
  {
    "text": "uh hopefully that pushes people to go and do this because we're looking forward to the the world where everyone's uploaded all of their keys",
    "start": "1718399",
    "end": "1724919"
  },
  {
    "text": "and everything's super secure and there's no man in the middle attack or anything like this okay great thank you",
    "start": "1724919",
    "end": "1730880"
  },
  {
    "text": "thank you any other questions I think there was another one we have a couple we have",
    "start": "1730880",
    "end": "1736799"
  },
  {
    "text": "to get through this quickly yeah good morning guys thank you for all the work by the way um are there any",
    "start": "1736799",
    "end": "1743960"
  },
  {
    "text": "plans to support anything other than GitHub for example gitlab or are they",
    "start": "1743960",
    "end": "1749399"
  },
  {
    "text": "the enemy yeah not right now I didn't see any issues regarding that but for",
    "start": "1749399",
    "end": "1755640"
  },
  {
    "text": "now no I think you can raise an issue for that if you'd like on the registry okay but I think it's pretty standard",
    "start": "1755640",
    "end": "1761960"
  },
  {
    "text": "right now at least 30,000 uh repositories are on GitHub right now um",
    "start": "1761960",
    "end": "1768760"
  },
  {
    "text": "yeah I don't know we can take a look at that if there's a need for that we we've discussed it and we can do it it's just",
    "start": "1768760",
    "end": "1774559"
  },
  {
    "text": "Hashi cor decided that everything had to be on GitHub G gitlab is definitely not the enemy at all uh we've been talking",
    "start": "1774559",
    "end": "1780200"
  },
  {
    "text": "to a couple of gitlab guys are great um is the implementation compatible with other git providers as long as they",
    "start": "1780200",
    "end": "1786799"
  },
  {
    "text": "support the HTTP yeah it it is we just need to uh work have different API",
    "start": "1786799",
    "end": "1793240"
  },
  {
    "text": "requests that that's it the the register itself still will be on GitHub but we can request any data from wherever we",
    "start": "1793240",
    "end": "1800360"
  },
  {
    "text": "want so yeah it should work fine okay thank you guys no problem we have time",
    "start": "1800360",
    "end": "1806519"
  },
  {
    "text": "for one or two more questions there was one over here was first I think yeah right at the end run run",
    "start": "1806519",
    "end": "1814279"
  },
  {
    "text": "run excise and we need to R thank you so",
    "start": "1814279",
    "end": "1819440"
  },
  {
    "text": "first of all thanks for explaining how it works underneath also knowledge uh one question is",
    "start": "1819440",
    "end": "1825640"
  },
  {
    "text": "regarding the how the open t binary and this registry is coupled because if I",
    "start": "1825640",
    "end": "1831679"
  },
  {
    "text": "understand it correctly it is the same like in the terraform so it is tightly coupled and there's no way to host or",
    "start": "1831679",
    "end": "1838120"
  },
  {
    "text": "just create your own registry and Point open tof to your own registry are there any plans or decisions regarding that go",
    "start": "1838120",
    "end": "1846240"
  },
  {
    "text": "ahead yeah so this is a really fun one uh because I think other people want to be running the registry uh I think Pepe",
    "start": "1846240",
    "end": "1851760"
  },
  {
    "text": "who spoke earlier raised an issue about running the alpha registry uh we want people to be able to run mirrors of our registry we want people to be able to",
    "start": "1851760",
    "end": "1858000"
  },
  {
    "text": "take this data and host it themselves somewhere if they want to the fun part behind that is that we've inherited a",
    "start": "1858000",
    "end": "1863880"
  },
  {
    "text": "large code base and that large code base was maintained by Hashi Corp who hardcoded registry. terraform doio",
    "start": "1863880",
    "end": "1869559"
  },
  {
    "text": "everywhere into their codebase uh we have an issue open about making a dynamic uh registry so we're hoping that",
    "start": "1869559",
    "end": "1875840"
  },
  {
    "text": "you may be able to set either a piece of configuration or an environment variable where you can say this is where my",
    "start": "1875840",
    "end": "1881000"
  },
  {
    "text": "registry is the default registry and it fetches all of the providers and modules from there uh and that would be great",
    "start": "1881000",
    "end": "1887120"
  },
  {
    "text": "for going forward there's a a lot of people who like to run providers uh provider Registries internally or privately and we're hoping to Target",
    "start": "1887120",
    "end": "1894120"
  },
  {
    "text": "that um just one point about that uh that was just for a default registry",
    "start": "1894120",
    "end": "1899679"
  },
  {
    "text": "right now if for every provider you define you just write your own registry path you can use a private registry if",
    "start": "1899679",
    "end": "1906080"
  },
  {
    "text": "you'd like and we a for you to have you could have our implementation for that or Terror or anything else so it is",
    "start": "1906080",
    "end": "1914240"
  },
  {
    "text": "possible right now exactly what I wanted to know thank you okay sure",
    "start": "1914240",
    "end": "1919519"
  },
  {
    "text": "all right one more question oh we have time",
    "start": "1919519",
    "end": "1926000"
  },
  {
    "text": "okay thank you um now I think most of it is based on the terraform registry API",
    "start": "1927799",
    "end": "1933639"
  },
  {
    "text": "like are you planning to diverge a lot in any near future it's a really well documented API",
    "start": "1933639",
    "end": "1942159"
  },
  {
    "text": "and what we would like to say is that we we want to try and keep compatibility with terraform as much as possible as well um um whilst the V1 API is great",
    "start": "1942159",
    "end": "1951039"
  },
  {
    "text": "for downloading modules and providers we are going to have to diverge so Hashi Corp has a V2 API which um Powers their",
    "start": "1951039",
    "end": "1958399"
  },
  {
    "text": "uh documentation engine their front end and we're going to be looking at implementing our own version of that",
    "start": "1958399",
    "end": "1963679"
  },
  {
    "text": "when we're looking at the registry UI I think so we're trying our best not to diverge we don't our provider Community",
    "start": "1963679",
    "end": "1969799"
  },
  {
    "text": "is really important to us and uh making it easy to move from terraform to Hashi Corp is really important and making sure",
    "start": "1969799",
    "end": "1976600"
  },
  {
    "text": "that people can use private Registries on top of this really well documented V1 API is really important so we're trying",
    "start": "1976600",
    "end": "1982799"
  },
  {
    "text": "not to diverge where possible we're trying to make sure everything's a dropping replacement as I've said a few times uh hopefully people get the very",
    "start": "1982799",
    "end": "1989960"
  },
  {
    "text": "Lial message uh um yeah we're trying to keep it as close as possible uh where we can there",
    "start": "1989960",
    "end": "1996960"
  },
  {
    "text": "is there has been one small change with the registry and how we handle modules but where where possible we're trying to",
    "start": "1996960",
    "end": "2002399"
  },
  {
    "text": "keep it the same yeah and then the as the fol said at Atlantis said it's really hard to know who's using what in",
    "start": "2002399",
    "end": "2009480"
  },
  {
    "text": "the community so uh we have no idea if there are third party tools using that API so we we're trying to be a bit",
    "start": "2009480",
    "end": "2017240"
  },
  {
    "text": "cautious about that before we make any big breaking changes MH",
    "start": "2017240",
    "end": "2024240"
  },
  {
    "text": "done and uh if anyone wants any if anyone wants any open tofu swag uh you",
    "start": "2026559",
    "end": "2032720"
  },
  {
    "text": "can go find some at uh spacelift h24 it's on the the things in front of you or I think zero and Scala also have swag",
    "start": "2032720",
    "end": "2039399"
  },
  {
    "text": "around go get open tofu t-shirt stickers and treat yourself thank you thank you very much",
    "start": "2039399",
    "end": "2047240"
  }
]