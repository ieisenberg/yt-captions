[
  {
    "text": "so today I'm going to talk about Metal lb metal lb is a cncf sbox set project",
    "start": "1599",
    "end": "7520"
  },
  {
    "text": "that allows us uh to have Services of type loot balancer on bare",
    "start": "7520",
    "end": "14799"
  },
  {
    "text": "metal some quick words about me I'm Federico I'm part of this uh networking",
    "start": "14799",
    "end": "21840"
  },
  {
    "text": "team uh at rat in charge of making the open shet platform suitable for um Telco",
    "start": "21840",
    "end": "28560"
  },
  {
    "text": "workloads uh during my time there I contributed to a variety of kubernetes",
    "start": "28560",
    "end": "33800"
  },
  {
    "text": "related projects and network related projects and I've been maintaining metal",
    "start": "33800",
    "end": "38960"
  },
  {
    "text": "lb since a couple of years in order to understand how metal",
    "start": "38960",
    "end": "44680"
  },
  {
    "text": "lb works I'm going to introduce or reintroduce uh the concept of",
    "start": "44680",
    "end": "51600"
  },
  {
    "text": "services um let's say that you have your application it's running in multiple",
    "start": "51600",
    "end": "56840"
  },
  {
    "text": "replicas inside the cluster and you want to load balance the traffic directed to those uh end points and the construct",
    "start": "56840",
    "end": "65360"
  },
  {
    "text": "that kubernetes gives us is a service you have an internal accessible uh virtual IP the",
    "start": "65360",
    "end": "73080"
  },
  {
    "text": "cluster IP a given pod can access the cluster IP and the kubernetes",
    "start": "73080",
    "end": "79840"
  },
  {
    "text": "networking um will lot balance the traffic uh among all these different end",
    "start": "79840",
    "end": "87079"
  },
  {
    "text": "points it's a bit more complex than this you have um various uh Fields like IP",
    "start": "87079",
    "end": "93560"
  },
  {
    "text": "family protocols and PS and stuff like that but that's the that's the gist of",
    "start": "93560",
    "end": "100079"
  },
  {
    "text": "it but what if you have your application still running on the cluster uh still uh",
    "start": "100079",
    "end": "108320"
  },
  {
    "text": "running multiple replicas and you want to advertise it outside of the cluster",
    "start": "108320",
    "end": "114079"
  },
  {
    "text": "one of the constructs that we have is a service of typ Lo balancer um",
    "start": "114079",
    "end": "120560"
  },
  {
    "text": "this is taken from the kubernetes documentation a service of typo balancer",
    "start": "120560",
    "end": "125680"
  },
  {
    "text": "exposes the service externally using a cloud provider slot balancer not Prov",
    "start": "125680",
    "end": "132040"
  },
  {
    "text": "not part and cluster IP service are automatically created the emphasis here is the fact that it leverages a cloud",
    "start": "132040",
    "end": "140000"
  },
  {
    "text": "provider slot balancer and what does this loot balancer give us",
    "start": "140000",
    "end": "146720"
  },
  {
    "text": "um it gives us uh an external p in first instance something that we can uh give",
    "start": "146720",
    "end": "154239"
  },
  {
    "text": "out that is accessible from uh the external network the internet um and",
    "start": "154239",
    "end": "160080"
  },
  {
    "text": "that can um be given out to reach our application",
    "start": "160080",
    "end": "165959"
  },
  {
    "text": "um let me turn the ler on the second thing that uh that uh cloud provider",
    "start": "165959",
    "end": "173360"
  },
  {
    "text": "gives us is the load balancing part so you have somebody trying to access your",
    "start": "173360",
    "end": "178519"
  },
  {
    "text": "virtual IP from outside side and the cloud providers Network infrastructure will do the multiplexing of that traffic",
    "start": "178519",
    "end": "186120"
  },
  {
    "text": "reaching the the virtual IP among the all the nodes of the Clusters something that I want to",
    "start": "186120",
    "end": "192480"
  },
  {
    "text": "emphasize here once the traffic reach the node all the rest is handled by the by the cluster cni the role of the load",
    "start": "192480",
    "end": "201640"
  },
  {
    "text": "balancer ends when the traffic reach one of the nodes so a service of typ Lo",
    "start": "201640",
    "end": "207360"
  },
  {
    "text": "balancer gives us a couple of things one is a stable IP to reach our application",
    "start": "207360",
    "end": "213480"
  },
  {
    "text": "from outside we can give it out uh uh around we can ping add DNS entry to it",
    "start": "213480",
    "end": "219760"
  },
  {
    "text": "and the other part is the load balancing part across the different nodes now",
    "start": "219760",
    "end": "226000"
  },
  {
    "text": "let's have a look at what happens on bare metal and in bare metal we don't",
    "start": "226000",
    "end": "232200"
  },
  {
    "text": "have anyone giving as um an external IP so the first thing that happens is is",
    "start": "232200",
    "end": "239799"
  },
  {
    "text": "the fact that our external IP stays in pending we don't have an IP to give out",
    "start": "239799",
    "end": "245720"
  },
  {
    "text": "but even if we had another part that is missing is that part that Network",
    "start": "245720",
    "end": "251400"
  },
  {
    "text": "infrastructure that uh um redirect the traffic to towards the virtual IP to the",
    "start": "251400",
    "end": "257919"
  },
  {
    "text": "nodes to the Clusters so that the cni can do its part and these two particular problems",
    "start": "257919",
    "end": "266240"
  },
  {
    "text": "assigning the IP routing the traffic to the given nodes uh are the problems that metal lb uh",
    "start": "266240",
    "end": "273560"
  },
  {
    "text": "tries to address metal lb is a loot balancer implementation for bare metal kubernetes clusters using standard",
    "start": "273560",
    "end": "280199"
  },
  {
    "text": "routing protocols um the first thing I want to mention",
    "start": "280199",
    "end": "286160"
  },
  {
    "text": "about Metal lb is that sadly or at least it was uh it was worth to me to discover",
    "start": "286160",
    "end": "292639"
  },
  {
    "text": "that metal lb is not a network load balancer meaning that it doesn't Implement that part that takes the",
    "start": "292639",
    "end": "298560"
  },
  {
    "text": "connection and and redirects it directly to to the nodes of the cluster but this",
    "start": "298560",
    "end": "304400"
  },
  {
    "text": "doesn't mean that it's useless so let's have a look at those two issues and uh",
    "start": "304400",
    "end": "310680"
  },
  {
    "text": "try to see how metal solves them uh by leveraging the external network",
    "start": "310680",
    "end": "316320"
  },
  {
    "text": "infrastructure um in I think a quite elegant way so the first part is the",
    "start": "316320",
    "end": "322280"
  },
  {
    "text": "address assignment it's probably the most boring and less networking part we",
    "start": "322280",
    "end": "327560"
  },
  {
    "text": "have a regular kubernetes controller listen for the configuration and the services give them an IP or claims the",
    "start": "327560",
    "end": "334319"
  },
  {
    "text": "IP when the services are deleted but what IPS are we talking about here we are not in a cloud environment uh the",
    "start": "334319",
    "end": "341720"
  },
  {
    "text": "only bit that is in control of the infrastructure is the cluster administrator so metal lb must be",
    "start": "341720",
    "end": "348800"
  },
  {
    "text": "instructed of which IPS are available this is done via this um IP address pool",
    "start": "348800",
    "end": "356199"
  },
  {
    "text": "crd you can have a cider uh set of ips",
    "start": "356199",
    "end": "361800"
  },
  {
    "text": "you can have a range you can have ipv4 and IPv6 addresses",
    "start": "361800",
    "end": "368360"
  },
  {
    "text": "um you can pin a service to a specific IP this is done in two ways the spec. Lo",
    "start": "368360",
    "end": "375720"
  },
  {
    "text": "balancer IP uh field which is now deprecated but still working or an",
    "start": "375720",
    "end": "381520"
  },
  {
    "text": "annotation this is how you ask hey I want my IP to have this particular IP or",
    "start": "381520",
    "end": "387360"
  },
  {
    "text": "you can ask for some I p is from a given pool still in the in the in the service",
    "start": "387360",
    "end": "393919"
  },
  {
    "text": "definition or uh from a cluster",
    "start": "393919",
    "end": "399120"
  },
  {
    "text": "administrator's point of view if you implement some kind of multinet tency",
    "start": "399120",
    "end": "404360"
  },
  {
    "text": "you can say this particular address pool is reserved only to this subset of the",
    "start": "404360",
    "end": "410319"
  },
  {
    "text": "Nam space or you can do even more and say this particular set of ips are is",
    "start": "410319",
    "end": "416840"
  },
  {
    "text": "reserved only to this particular set of services",
    "start": "416840",
    "end": "421400"
  },
  {
    "text": "um a couple of things to note no selector means that the IP address pool",
    "start": "422800",
    "end": "428199"
  },
  {
    "text": "can be applied to all the services we have a priority field that needs to be taken care of um if we have a service",
    "start": "428199",
    "end": "437520"
  },
  {
    "text": "that ask for a specific IP for like this one for example but in the uh pool",
    "start": "437520",
    "end": "443360"
  },
  {
    "text": "configuration it says you you can't have that IP then the service the service IP",
    "start": "443360",
    "end": "448440"
  },
  {
    "text": "will stay pend um and then let's talk about the address advertisement part which is the more",
    "start": "448440",
    "end": "455120"
  },
  {
    "text": "Network heavy part so again we have somebody tries to uh trying to access uh",
    "start": "455120",
    "end": "461800"
  },
  {
    "text": "the virtual IP from outside and we need to find a way to attract that service to our nodes and we have something in the",
    "start": "461800",
    "end": "468199"
  },
  {
    "text": "middle um and another thing that metal B does and should do uh is to honor the",
    "start": "468199",
    "end": "474080"
  },
  {
    "text": "local traffic policy meaning that if we have the pods running only on the subset",
    "start": "474080",
    "end": "479360"
  },
  {
    "text": "of the nodes it metal lb uh must be smart enough to attract the traffic only to those nodes where an end point is",
    "start": "479360",
    "end": "487840"
  },
  {
    "text": "running there are two ways to attract the service two uh advertisement modes",
    "start": "487840",
    "end": "494000"
  },
  {
    "text": "one is L2 uh is uh quite simple it requires uh",
    "start": "494000",
    "end": "500080"
  },
  {
    "text": "some um some gymnastic in the network or to have the client and the cluster to to",
    "start": "500080",
    "end": "506840"
  },
  {
    "text": "be in the same uh subnet and bgp which is more complex and more powerful and",
    "start": "506840",
    "end": "512320"
  },
  {
    "text": "requires the interaction with a bgp enabled router let's start with L2 mode again uh",
    "start": "512320",
    "end": "519599"
  },
  {
    "text": "the easiest way is to have the client on the sa subnet of the of the cluster the",
    "start": "519599",
    "end": "525640"
  },
  {
    "text": "way it work it works is more or less similar to what keep alive does keep",
    "start": "525640",
    "end": "530800"
  },
  {
    "text": "alive D does um you have the client tries to know who is owning this",
    "start": "530800",
    "end": "536560"
  },
  {
    "text": "particular IP sends out an ARP request the ARP request gets to all the nodes of",
    "start": "536560",
    "end": "541680"
  },
  {
    "text": "the cluster uh metal LBA for a given service elects a leader the only uh node",
    "start": "541680",
    "end": "549920"
  },
  {
    "text": "that is going to to reply to that AR request that is on per service bases",
    "start": "549920",
    "end": "555640"
  },
  {
    "text": "different service might have different leaders the Ary gets to the client and",
    "start": "555640",
    "end": "560680"
  },
  {
    "text": "then the client is able to reach the the service",
    "start": "560680",
    "end": "566120"
  },
  {
    "text": "um one thing to note is that metal be replies with a Mac address of the interface it receives uh the r uh",
    "start": "566120",
    "end": "574279"
  },
  {
    "text": "request from so it if it has multiple interfaces it's still work what happens when a node fails failover happens the",
    "start": "574279",
    "end": "582240"
  },
  {
    "text": "new a new leader is elected sends out a gutu s reaches the client the client is able to reach the the service again the",
    "start": "582240",
    "end": "589720"
  },
  {
    "text": "traffic gets to the node all the rest is done by the cni um again couple of notes",
    "start": "589720",
    "end": "597079"
  },
  {
    "text": "uh it listens to all all the interfaces unless you put a interface selector we",
    "start": "597079",
    "end": "604399"
  },
  {
    "text": "don't assign uh the IP to any interfaces on the H on on the host uh only one node",
    "start": "604399",
    "end": "610680"
  },
  {
    "text": "is active so it's not really load balancing it's more uh a load balancer",
    "start": "610680",
    "end": "616040"
  },
  {
    "text": "implementation a load balancer service implementation uh when a fover happens",
    "start": "616040",
    "end": "621800"
  },
  {
    "text": "uh new election uh gut to SARP the configuration is pretty easy address",
    "start": "621800",
    "end": "627720"
  },
  {
    "text": "pools and uh simple L2 uh advertisement and this is the simplest this is to say",
    "start": "627720",
    "end": "634160"
  },
  {
    "text": "hey I want all the services to be advertised via L2 you can say I want",
    "start": "634160",
    "end": "639560"
  },
  {
    "text": "only the service where uh whose uh IPS is coming from this set of IP address pools to be advertised via um",
    "start": "639560",
    "end": "648440"
  },
  {
    "text": "L2 um and we can also have a not selector so if you have",
    "start": "648440",
    "end": "654079"
  },
  {
    "text": "your uh only subset of the nodes belonging to to a given subnet uh if you",
    "start": "654079",
    "end": "661160"
  },
  {
    "text": "use a no selector matalb will elected the leader among uh the subnets of of the nodes and matching the node selector",
    "start": "661160",
    "end": "669040"
  },
  {
    "text": "um to to reply to the ARP request and you can specify a set of",
    "start": "669040",
    "end": "674920"
  },
  {
    "text": "interfaces so if you have uh fancy uh interfaces com combination that",
    "start": "674920",
    "end": "681120"
  },
  {
    "text": "might uh cause troubles this is how you select only a subset of the interfaces",
    "start": "681120",
    "end": "686480"
  },
  {
    "text": "to instruct metal B to uh to reply uh from um couple of notes the interface",
    "start": "686480",
    "end": "692279"
  },
  {
    "text": "selector doesn't influence the way the leader is selected if you are choosing one uh if you specify uh an interface",
    "start": "692279",
    "end": "700760"
  },
  {
    "text": "selector with no existing interfaces the service won't be announced uh if you don't specify any address po selector it",
    "start": "700760",
    "end": "708040"
  },
  {
    "text": "means that the L2 advertisement is applied to all the IP address pools if",
    "start": "708040",
    "end": "713279"
  },
  {
    "text": "you have multiple L2 advertisements those L2 advertisement",
    "start": "713279",
    "end": "719560"
  },
  {
    "text": "uh matching a given IP address pool are merged together the interfaces are the",
    "start": "719560",
    "end": "724800"
  },
  {
    "text": "union of the selected interfaces the nodes are the unions of the selected nodes so again with L2 you don't get",
    "start": "724800",
    "end": "733079"
  },
  {
    "text": "real load balancing uh slightly similar to keep Al live d uh but it",
    "start": "733079",
    "end": "741519"
  },
  {
    "text": "works bgp mode um bgp this is taken from the",
    "start": "741519",
    "end": "747279"
  },
  {
    "text": "rfcc uh the primary function of a bgp speaking system is to exchange Network reachability information with other bgp",
    "start": "747279",
    "end": "754279"
  },
  {
    "text": "systems so this is exactly what we what we need we need to exchange the",
    "start": "754279",
    "end": "759360"
  },
  {
    "text": "reachability of our service IP through our nodes so in bgp mode each node acts",
    "start": "759360",
    "end": "767079"
  },
  {
    "text": "as a mini router it establishes a bgp session up front with a with an external",
    "start": "767079",
    "end": "774240"
  },
  {
    "text": "router metal ATB must be instructed uh of the presence of that router",
    "start": "774240",
    "end": "779800"
  },
  {
    "text": "when we want to announce a service uh the bgp messages are sent to the router",
    "start": "779800",
    "end": "785760"
  },
  {
    "text": "saying if you want to reach the service IP then the next stop is the IP of the node and the same for for this one um so",
    "start": "785760",
    "end": "794040"
  },
  {
    "text": "then the the routers routing table will look something like this uh for to reach",
    "start": "794040",
    "end": "799800"
  },
  {
    "text": "the service you have this set of next stops and if the client tries to reach",
    "start": "799800",
    "end": "805480"
  },
  {
    "text": "the the service now we get real load balance uh given by the router it's e andp",
    "start": "805480",
    "end": "812240"
  },
  {
    "text": "routes equal uh equal cost um it's active active so the traffic will go",
    "start": "812240",
    "end": "819240"
  },
  {
    "text": "sometimes on one node some other times to the other uh once the traffic gets the node all the rest is done by the by",
    "start": "819240",
    "end": "825839"
  },
  {
    "text": "the cni um and of course you can have more",
    "start": "825839",
    "end": "832040"
  },
  {
    "text": "complex scenarios you can have multiple routers you can have spine and leave",
    "start": "832040",
    "end": "837759"
  },
  {
    "text": "routers uh and all the fancy stuff that uh bgp allows us to do how to do the",
    "start": "837759",
    "end": "843959"
  },
  {
    "text": "configuration we still need an IP address pool to give the IP to the to the service and then we need to instruct",
    "start": "843959",
    "end": "851639"
  },
  {
    "text": "metal about the presence of a of a given Pier uh with the address the autonomous",
    "start": "851639",
    "end": "858839"
  },
  {
    "text": "system number of mealb and of the pier and some other details about the bgp",
    "start": "858839",
    "end": "864839"
  },
  {
    "text": "session um and then you need to tell metal B to advertise uh the services via",
    "start": "864839",
    "end": "870120"
  },
  {
    "text": "bgp this is the simplest way as L2 uh an empty one just tells metb to announce",
    "start": "870120",
    "end": "876360"
  },
  {
    "text": "all the services uh via bgp but bgp offers uh a lot of extra",
    "start": "876360",
    "end": "884040"
  },
  {
    "text": "configurations um we have a not selector for the bgp session if your router is",
    "start": "884040",
    "end": "890199"
  },
  {
    "text": "reachable only from a subset of the nodes and you don't want to waste resources in trying to connect to a",
    "start": "890199",
    "end": "896680"
  },
  {
    "text": "router that is not reachable with the node selector the bgp session will be established only by a subset of the",
    "start": "896680",
    "end": "903199"
  },
  {
    "text": "nodes we have communities and local preferences that allow uh fancy bgp",
    "start": "903199",
    "end": "909639"
  },
  {
    "text": "configurations uh like for example specifying the uh fine grain",
    "start": "909639",
    "end": "916160"
  },
  {
    "text": "sl32 uh router to the local router and the course grained uh to the to the",
    "start": "916160",
    "end": "921240"
  },
  {
    "text": "external router we support BFD um bgp max failover detection is",
    "start": "921240",
    "end": "928759"
  },
  {
    "text": "around 3 seconds BFD is much faster than that and by specifying a BFD profile we",
    "start": "928759",
    "end": "936319"
  },
  {
    "text": "will have the bgp session backed up by a BFD session um to to uh provide faster U",
    "start": "936319",
    "end": "945319"
  },
  {
    "text": "failover and the link broken link detection",
    "start": "945319",
    "end": "951160"
  },
  {
    "text": "um as much as with L2 we can specify uh",
    "start": "951160",
    "end": "956319"
  },
  {
    "text": "we can tell metal to advertise by B GP only the IP is coming from a given um",
    "start": "956319",
    "end": "961399"
  },
  {
    "text": "pool of ips um we have not selectors if we want",
    "start": "961399",
    "end": "966440"
  },
  {
    "text": "to advertise uh this is orthogonal to the to the bgp section session uh not",
    "start": "966440",
    "end": "972480"
  },
  {
    "text": "selector uh but we want to advertise some IPS only from a subset of the nodes",
    "start": "972480",
    "end": "977959"
  },
  {
    "text": "uh we have a node selector in the bgp advertisement and we can say I want to",
    "start": "977959",
    "end": "983079"
  },
  {
    "text": "advertise this set of uh IPS only to a subset of the peers instead of uh to all",
    "start": "983079",
    "end": "989519"
  },
  {
    "text": "of them um again some quick notes uh no IP",
    "start": "989519",
    "end": "996519"
  },
  {
    "text": "address pool selector means the bgp advertisement uh is applied to all the services uh when you have multiple bgp",
    "start": "996519",
    "end": "1004000"
  },
  {
    "text": "advertisement matching the same IP address pool they are combined together and applied together",
    "start": "1004000",
    "end": "1012079"
  },
  {
    "text": "um quick recap about bgp mode you now get active active load balancing uh it's",
    "start": "1012160",
    "end": "1019319"
  },
  {
    "text": "handled by the exteral routers not by metal but it's still uh active active",
    "start": "1019319",
    "end": "1024918"
  },
  {
    "text": "and load balancing um we need some extra configuration we support BFD uh one",
    "start": "1024919",
    "end": "1032319"
  },
  {
    "text": "thing to note is that as of today uh more on this later uh but metal is not",
    "start": "1032319",
    "end": "1039240"
  },
  {
    "text": "meant to accept incoming routes so it refuses incoming routes by default uh we",
    "start": "1039240",
    "end": "1044400"
  },
  {
    "text": "have a ton of uh configurations not selector we support ibgp and ebgp single",
    "start": "1044400",
    "end": "1051039"
  },
  {
    "text": "and multihop and of course all of these can mix together um and metal is meant to be",
    "start": "1051039",
    "end": "1059200"
  },
  {
    "text": "uh simple to configure when you deal with the default you just configure an IP address pool and mtl2 mbgp",
    "start": "1059200",
    "end": "1066320"
  },
  {
    "text": "advertisement um but we can also have complex configurations that can be achieved with all the configuration",
    "start": "1066320",
    "end": "1073200"
  },
  {
    "text": "knobs that we uh just um spoke about and",
    "start": "1073200",
    "end": "1078480"
  },
  {
    "text": "those extra knobs came out from uh long discussions with the communities and with the metal users and they evolved",
    "start": "1078480",
    "end": "1086000"
  },
  {
    "text": "over time um so for example by with the current configuration we can express uh",
    "start": "1086000",
    "end": "1093440"
  },
  {
    "text": "some nice things like announcing both via L2 and and Via bgp a given Service",
    "start": "1093440",
    "end": "1100960"
  },
  {
    "text": "uh announcing bya L2 but only from a subet of the nodes and only from a given",
    "start": "1100960",
    "end": "1106520"
  },
  {
    "text": "interface or announce in only to a given bgpp and only from the nodes with a",
    "start": "1106520",
    "end": "1112000"
  },
  {
    "text": "given label uh and so on uh announcing all the services to the peers but only some",
    "start": "1112000",
    "end": "1118520"
  },
  {
    "text": "services to a subset of the peers and announcing",
    "start": "1118520",
    "end": "1124840"
  },
  {
    "text": "uh all the services of a given tenant only via specific bgp session so this is",
    "start": "1124840",
    "end": "1130799"
  },
  {
    "text": "to say that uh nalb has a very comprehensive configuration that should",
    "start": "1130799",
    "end": "1136880"
  },
  {
    "text": "cover the majority of the of the needs um and if not just come and file an",
    "start": "1136880",
    "end": "1142000"
  },
  {
    "text": "issue um said that um I'm going to talk",
    "start": "1142000",
    "end": "1147039"
  },
  {
    "text": "a bit about the architecture let's have a look under the hood of metal lb um we",
    "start": "1147039",
    "end": "1153080"
  },
  {
    "text": "have the two categories of PODS one is the controller the controller is the boring one that listens from for uh the",
    "start": "1153080",
    "end": "1161280"
  },
  {
    "text": "services the IP pools allocates the IPS to the services gets back the IP when",
    "start": "1161280",
    "end": "1167200"
  },
  {
    "text": "the service is done uh so it the that IP can be um given to",
    "start": "1167200",
    "end": "1173159"
  },
  {
    "text": "another another service the speaker on the other hand on the other hand is a demon set an instance per node it's a",
    "start": "1173159",
    "end": "1180679"
  },
  {
    "text": "host Network pod it has to mess up with the host network uh and it handles the",
    "start": "1180679",
    "end": "1186840"
  },
  {
    "text": "IP announcement in L2 we have an R responder the speaker listen for",
    "start": "1186840",
    "end": "1193720"
  },
  {
    "text": "services uh does the leader election for each service and and creates an R",
    "start": "1193720",
    "end": "1199360"
  },
  {
    "text": "responder for each service on bgp we have several implementation we have",
    "start": "1199360",
    "end": "1204760"
  },
  {
    "text": "the native one that uh was the original one it's a subset of the bgp protocol",
    "start": "1204760",
    "end": "1211640"
  },
  {
    "text": "implemented in go it listen for services plus metal B configuration and uh reacts",
    "start": "1211640",
    "end": "1217760"
  },
  {
    "text": "to the bgp session according to the to what it has to do which is what we said",
    "start": "1217760",
    "end": "1223080"
  },
  {
    "text": "in the previous uh slides and then there is the F frr mode uh this is something that we introduced",
    "start": "1223080",
    "end": "1229799"
  },
  {
    "text": "a couple of u a couple of summers ago FR frr is a real router software",
    "start": "1229799",
    "end": "1238880"
  },
  {
    "text": "router implementation is a very popular project Rock Solid super stable it uh implements",
    "start": "1238880",
    "end": "1245960"
  },
  {
    "text": "a variety of networking protocols including bgp and BFD among the others",
    "start": "1245960",
    "end": "1253080"
  },
  {
    "text": "um and um in Fr frr mode is the the",
    "start": "1253080",
    "end": "1258679"
  },
  {
    "text": "current BG bgp implementations that we are investing our efforts into in F frr",
    "start": "1258679",
    "end": "1265480"
  },
  {
    "text": "mode the speaker listen for the for the services for the metal B",
    "start": "1265480",
    "end": "1271000"
  },
  {
    "text": "configuration um yeah it generates an frr",
    "start": "1271000",
    "end": "1277760"
  },
  {
    "text": "configuration uh and reloads the frr configuration inside inside FR frr so",
    "start": "1277760",
    "end": "1284279"
  },
  {
    "text": "frr can interact with the router and Implement all the protocols for us and",
    "start": "1284279",
    "end": "1289480"
  },
  {
    "text": "by doing this witch now all all it takes to implement something new that is",
    "start": "1289480",
    "end": "1294559"
  },
  {
    "text": "already supported by FR frr and frr supports basically everything is to find",
    "start": "1294559",
    "end": "1299799"
  },
  {
    "text": "the right F frr configuration and to translate the kubernetes API into the right frr configuration this allowed us",
    "start": "1299799",
    "end": "1307159"
  },
  {
    "text": "to implement BFD and IPv6 support uh quite quickly for example and again the",
    "start": "1307159",
    "end": "1314919"
  },
  {
    "text": "native go implementation is more under maintenance mode mod this is where uh we",
    "start": "1314919",
    "end": "1320080"
  },
  {
    "text": "are putting U the majority of our efforts and this was more or less what",
    "start": "1320080",
    "end": "1326799"
  },
  {
    "text": "metal lb is about until today uh how it evolved uh based on the user requests",
    "start": "1326799",
    "end": "1334480"
  },
  {
    "text": "and and so on but now I want to talk also about what's next um of course I",
    "start": "1334480",
    "end": "1340279"
  },
  {
    "text": "can't foresee the long distant future um but I can talk briefly about what we've",
    "start": "1340279",
    "end": "1346760"
  },
  {
    "text": "been working on the last uh six months uh which is something that came out from",
    "start": "1346760",
    "end": "1353240"
  },
  {
    "text": "uh Community requests um this is something that come",
    "start": "1353240",
    "end": "1358679"
  },
  {
    "text": "um come pretty often basically there are users saying hey now that you are",
    "start": "1358679",
    "end": "1364240"
  },
  {
    "text": "running f frr frr is a full-fledged router uh can you do this and this and this with metalab can you accept routes",
    "start": "1364240",
    "end": "1371440"
  },
  {
    "text": "into your nodes with metal and I tend to",
    "start": "1371440",
    "end": "1376520"
  },
  {
    "text": "push back because metal B's purpose is only to announce services but given this",
    "start": "1376520",
    "end": "1382799"
  },
  {
    "text": "was something that users requested together with running uh multiple F",
    "start": "1382799",
    "end": "1388240"
  },
  {
    "text": "instances on the same node we started thinking about ways to share the same",
    "start": "1388240",
    "end": "1394120"
  },
  {
    "text": "frr instance between metal and B but also to be able to use it uh for other",
    "start": "1394120",
    "end": "1400559"
  },
  {
    "text": "purposes and this is efficient because you have only one single F frr you have only one single",
    "start": "1400559",
    "end": "1408520"
  },
  {
    "text": "bgp session with the router that can do multiple things um so this is now",
    "start": "1408520",
    "end": "1415600"
  },
  {
    "text": "available as an experimental mode in in metal lb the way it works is you have a",
    "start": "1415600",
    "end": "1422400"
  },
  {
    "text": "series of API the usual API uh now we have a new crd frr",
    "start": "1422400",
    "end": "1428240"
  },
  {
    "text": "configuration which is read by this F frr demon that can be deployed as a",
    "start": "1428240",
    "end": "1434039"
  },
  {
    "text": "standalone or as part of metalab to the cluster this new demo rates this new F frr",
    "start": "1434039",
    "end": "1440760"
  },
  {
    "text": "configuration and then f frr is configured to interact with the router but at the same time a user can",
    "start": "1440760",
    "end": "1447000"
  },
  {
    "text": "come and apply an F configuration that is compatible with a metal the one generated by metal lb to do more stuff",
    "start": "1447000",
    "end": "1454799"
  },
  {
    "text": "and this is f frr kubernetes f frr kubernetes is a spinoff uh of metal lb is deployed",
    "start": "1454799",
    "end": "1461840"
  },
  {
    "text": "directly by metal um if you choose the experimental frr is most",
    "start": "1461840",
    "end": "1468760"
  },
  {
    "text": "um and it can also deployed as a standalone component um now I'm going to",
    "start": "1468760",
    "end": "1475159"
  },
  {
    "text": "show a very quick demo um first I want to describe the uh",
    "start": "1475159",
    "end": "1482679"
  },
  {
    "text": "the development environment that I'm going to show it's a kind cluster you have each node connected via the K",
    "start": "1482679",
    "end": "1489799"
  },
  {
    "text": "Docker Network each node is a Docker container and we also have an external Docker container that is running fr frr",
    "start": "1489799",
    "end": "1497919"
  },
  {
    "text": "that is mimicking an external router and now I'm going to show the demo so this is the demo",
    "start": "1497919",
    "end": "1507200"
  },
  {
    "text": "um is a kind cluster uh and I also",
    "start": "1507200",
    "end": "1514960"
  },
  {
    "text": "have an extra container which is frr which is representing the router the way",
    "start": "1514960",
    "end": "1521000"
  },
  {
    "text": "I spone up this is we have this in Dev command in the in the metal lb repo that",
    "start": "1521000",
    "end": "1529360"
  },
  {
    "text": "does all the setup for us if you want to Tinker with metal lb you can specify the back end native bgp uh sorry native frr",
    "start": "1529360",
    "end": "1538200"
  },
  {
    "text": "or F frr kubernetes uh and you can specify the protocol you want to test",
    "start": "1538200",
    "end": "1543799"
  },
  {
    "text": "bgp or L2 with bgp it will spin up the external FR frr",
    "start": "1543799",
    "end": "1549080"
  },
  {
    "text": "container um so and we",
    "start": "1549080",
    "end": "1556679"
  },
  {
    "text": "can also have a look at the",
    "start": "1556679",
    "end": "1563360"
  },
  {
    "text": "external configuration um the external container is meant to be peered with a three nodes",
    "start": "1563360",
    "end": "1570240"
  },
  {
    "text": "these are the IPS of the three nodes and it's trying to advertise uh a couple of of prefixes",
    "start": "1570240",
    "end": "1576600"
  },
  {
    "text": "which metal doesn't uh doesn't want to receive if I",
    "start": "1576600",
    "end": "1583679"
  },
  {
    "text": "do summary then the status is active mean meaning that the external container",
    "start": "1583799",
    "end": "1589520"
  },
  {
    "text": "is trying to connect and it's not connecting because we don't have a configuration yet um let's have a look",
    "start": "1589520",
    "end": "1596480"
  },
  {
    "text": "at the configuration bgp Pi the IP address of the external container an IP address",
    "start": "1596480",
    "end": "1603159"
  },
  {
    "text": "pool and a an empty bgpr advertisement which is the bare minimum configuration",
    "start": "1603159",
    "end": "1608720"
  },
  {
    "text": "that we can have and I can also have a look at the services and we have an",
    "start": "1608720",
    "end": "1614480"
  },
  {
    "text": "engine X instance with external IP pending because we don't have a configuration yet but now I can do this",
    "start": "1614480",
    "end": "1622720"
  },
  {
    "text": "and create this configuration and then our external IP",
    "start": "1622720",
    "end": "1628520"
  },
  {
    "text": "has um has a value",
    "start": "1628520",
    "end": "1633640"
  },
  {
    "text": "so now metal lb will try to metal B first is connected now the session is",
    "start": "1633640",
    "end": "1643240"
  },
  {
    "text": "up and if I have a look oh",
    "start": "1645799",
    "end": "1651120"
  },
  {
    "text": "sorry too many commands um so then the virtual IP is reachable from all the",
    "start": "1655200",
    "end": "1662120"
  },
  {
    "text": "three nodes and now I want to also quickly quickly",
    "start": "1662120",
    "end": "1667240"
  },
  {
    "text": "show the um the new FR frr configuration so this",
    "start": "1667240",
    "end": "1676600"
  },
  {
    "text": "is something that will tell the FR frr demon to accept all the routes which is",
    "start": "1676600",
    "end": "1681919"
  },
  {
    "text": "something that metal doesn't allow by default this configuration is going to be",
    "start": "1681919",
    "end": "1689120"
  },
  {
    "text": "merged with the metal lb1 we have a not selector only on kind",
    "start": "1689320",
    "end": "1698120"
  },
  {
    "text": "worker and I want to",
    "start": "1701760",
    "end": "1709440"
  },
  {
    "text": "show the routes now then I created the configuration and the external router is",
    "start": "1712640",
    "end": "1719799"
  },
  {
    "text": "still trying to inject those routes and because of this extra configuration now these routes are",
    "start": "1719799",
    "end": "1726240"
  },
  {
    "text": "available um this is it for the demo you can run it locally again the development",
    "start": "1726240",
    "end": "1733679"
  },
  {
    "text": "envirment uh environment is pretty easy to speak pin up um the last thing I want to mention",
    "start": "1733679",
    "end": "1741120"
  },
  {
    "text": "is that we are trying to maintain uh metal lb as a contributor friendly",
    "start": "1741120",
    "end": "1746919"
  },
  {
    "text": "project um there is this uh community and contributing uh section in the",
    "start": "1746919",
    "end": "1752919"
  },
  {
    "text": "official website we are active in the metal lb Dev and metal lb slack channel",
    "start": "1752919",
    "end": "1759279"
  },
  {
    "text": "on the kubernetes slack um we try to keep the list of issues uh well groomed",
    "start": "1759279",
    "end": "1766679"
  },
  {
    "text": "with help wanted uh good first issue if you want to work on something or you",
    "start": "1766679",
    "end": "1772240"
  },
  {
    "text": "think that a feature is missing just file an issue we'll try to engage a",
    "start": "1772240",
    "end": "1777279"
  },
  {
    "text": "discussion um metal lb is not a huge project but you can have an impact on a",
    "start": "1777279",
    "end": "1784159"
  },
  {
    "text": "good amount of uh Community users that are using it in their home Labs or even",
    "start": "1784159",
    "end": "1790600"
  },
  {
    "text": "in big Enterprise environments uh so it's a nice way to get in the kubernetes",
    "start": "1790600",
    "end": "1796880"
  },
  {
    "text": "ecosystem and contributing to something kubernetes related without being too much",
    "start": "1796880",
    "end": "1803600"
  },
  {
    "text": "intimidated um and I'm on the kubernetes slack feel free to reach out I'll be",
    "start": "1803600",
    "end": "1809440"
  },
  {
    "text": "happy to guide you into your first contribution and with that I guess we",
    "start": "1809440",
    "end": "1815200"
  },
  {
    "text": "can wrap it up so mealb um addresses two",
    "start": "1815200",
    "end": "1821159"
  },
  {
    "text": "major tasks one is the IP allocation the other one is the IP advertisement with",
    "start": "1821159",
    "end": "1827440"
  },
  {
    "text": "to you don't get real load balancing uh only failure detection uh but not uh uh",
    "start": "1827440",
    "end": "1834240"
  },
  {
    "text": "High availability bgp is more complex and more powerful but it requires the",
    "start": "1834240",
    "end": "1839640"
  },
  {
    "text": "interaction with the router uh we have Upstream documentation uh again we try",
    "start": "1839640",
    "end": "1845679"
  },
  {
    "text": "to keep it up to dat uh we have a troubleshooting guide and a few tools",
    "start": "1845679",
    "end": "1851840"
  },
  {
    "text": "and also if you want to learn more about FR frr their website is um very well",
    "start": "1851840",
    "end": "1858159"
  },
  {
    "text": "documented with this I'm done uh again if you want to reach me out my Twitter",
    "start": "1858159",
    "end": "1863799"
  },
  {
    "text": "handle is fed pow fedw is my uh Gmail handle I'm fedw on the kubernetes lck",
    "start": "1863799",
    "end": "1871080"
  },
  {
    "text": "channel LinkedIn whatever if you want to ask me question related to metal B I'd",
    "start": "1871080",
    "end": "1877080"
  },
  {
    "text": "be happy to answer",
    "start": "1877080",
    "end": "1881279"
  }
]