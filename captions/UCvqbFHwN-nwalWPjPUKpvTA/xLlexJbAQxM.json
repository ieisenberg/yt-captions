[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "hey everyone welcome to the contour maintainer track um today we have all the contour maintainers here um",
    "start": "960",
    "end": "7919"
  },
  {
    "text": "doing a presentation on contour so let's just go around the room first and introduce ourselves um i'm",
    "start": "7919",
    "end": "15040"
  },
  {
    "text": "alex shu i'm a product manager at vmware in a cloud native business unit",
    "start": "15040",
    "end": "20080"
  },
  {
    "text": "um i hand it off to nick hi everybody uh my name is nick young i",
    "start": "20080",
    "end": "25760"
  },
  {
    "text": "am a the technical lead encounterer and i'm a staff engineer at vmware in the same business unit as alex",
    "start": "25760",
    "end": "31359"
  },
  {
    "text": "odu steve k yeah hi everyone i'm steve chris i'm an engineer at vmware and i'm maintainer on",
    "start": "31359",
    "end": "37360"
  },
  {
    "text": "contour and i'll pass it over to steve siloca hey everyone uh steve i've silke working",
    "start": "37360",
    "end": "43600"
  },
  {
    "text": "on contour for a while i also um an engineer at vmware uh off to you sanjay",
    "start": "43600",
    "end": "50480"
  },
  {
    "text": "hey everyone my name is sanjay uh a member of the contour maintenance team and an engineer",
    "start": "50480",
    "end": "56719"
  },
  {
    "text": "at vmware as well",
    "start": "56719",
    "end": "59840"
  },
  {
    "start": "60000",
    "end": "176000"
  },
  {
    "text": "all right um yeah thanks everyone so i'll start with you know what is contour",
    "start": "62000",
    "end": "67439"
  },
  {
    "text": "so contour is a kubernetes and grass controller um if you have no experience with",
    "start": "67439",
    "end": "72799"
  },
  {
    "text": "ingress this is basically a way to bring external traffic into your kubernetes cluster",
    "start": "72799",
    "end": "78720"
  },
  {
    "text": "um so ingress is it's part of the kubernetes api but in order to to use grass to leverage",
    "start": "78720",
    "end": "86080"
  },
  {
    "text": "congress you need an ingress controller um just a piece of software that",
    "start": "86080",
    "end": "91680"
  },
  {
    "text": "you'd have to install into your cluster and it controls how traffic you know hits your cluster from the outside and",
    "start": "91680",
    "end": "97759"
  },
  {
    "text": "how it gets routed to different services with so contour works by packaging and",
    "start": "97759",
    "end": "102799"
  },
  {
    "text": "deploying envoy which is another open source project it's a really popular one",
    "start": "102799",
    "end": "108079"
  },
  {
    "text": "and that functions as a reverse proxy and the layer 7 little bouncer deployed",
    "start": "108079",
    "end": "113119"
  },
  {
    "text": "within your race cluster um so basically any you know contour is",
    "start": "113119",
    "end": "118960"
  },
  {
    "text": "is a control plane for envoy and envoy is the reverse proxy which exposes any http",
    "start": "118960",
    "end": "125040"
  },
  {
    "text": "or https routes from the outside to your upstream services within the",
    "start": "125040",
    "end": "130160"
  },
  {
    "text": "cluster project contours supports tls termination pass-through we have various slow",
    "start": "130160",
    "end": "137360"
  },
  {
    "text": "balancing options for you know controlling this traffic or bouncing this traffic between your",
    "start": "137360",
    "end": "143120"
  },
  {
    "text": "different backends as you scale up and down we can take the request header um and then do some basic",
    "start": "143120",
    "end": "149520"
  },
  {
    "text": "manipulation and then use that as the input for determining you know exactly which back end to send the",
    "start": "149520",
    "end": "155680"
  },
  {
    "text": "traffic to we support authenticated requests unauthenticated requests you can add ray",
    "start": "155680",
    "end": "162640"
  },
  {
    "text": "limiting to your requests there's also sticky sessions or we call it session affinity",
    "start": "162640",
    "end": "168239"
  },
  {
    "text": "and much much more and there's lots of telemetry and tracing capabilities on top",
    "start": "168239",
    "end": "174720"
  },
  {
    "text": "next slide please so this is a basic overview of the",
    "start": "174720",
    "end": "181599"
  },
  {
    "text": "project um know since inception started in heptio in 2017.",
    "start": "181599",
    "end": "187280"
  },
  {
    "text": "um it was donated to cncf at incubation level if you know what that is basically every",
    "start": "187280",
    "end": "192720"
  },
  {
    "text": "project in cncf goes through several stages right they go from",
    "start": "192720",
    "end": "198400"
  },
  {
    "text": "sandbox to incubation to donation and this this stage that",
    "start": "198400",
    "end": "203599"
  },
  {
    "text": "you're at is basically an indication of the maturity level of the project",
    "start": "203599",
    "end": "208799"
  },
  {
    "text": "from a community health perspective right in terms of user adoption in terms of",
    "start": "208799",
    "end": "214480"
  },
  {
    "text": "external contributions and usage or deployments in the wild right",
    "start": "214480",
    "end": "219760"
  },
  {
    "text": "production deployments of contour so we've done a couple of these talks",
    "start": "219760",
    "end": "225040"
  },
  {
    "text": "before um and i just want to cover you know what we've been doing since the last talk about a couple months ago",
    "start": "225040",
    "end": "232080"
  },
  {
    "text": "um so a couple of highlights here first one is that uh we're still doing really really well",
    "start": "232080",
    "end": "237439"
  },
  {
    "text": "in terms of supporting gateway api um api is an upstream project from sig",
    "start": "237439",
    "end": "243599"
  },
  {
    "text": "network that's you know about doing service networking kubernetes um",
    "start": "243599",
    "end": "248959"
  },
  {
    "text": "and contour is probably the furthest along in terms of adopting gateway pi and also helping design some of the uh the upstream api",
    "start": "248959",
    "end": "256799"
  },
  {
    "text": "our maintainer here nicky allen is actually a maintainer of the gateway pi project itself as well",
    "start": "256799",
    "end": "262800"
  },
  {
    "text": "so right now you know we're just trying to bring some of the features in gateway",
    "start": "262800",
    "end": "268080"
  },
  {
    "text": "api up to parity with what we already have encountered today um and i think we just had a big release",
    "start": "268080",
    "end": "273360"
  },
  {
    "text": "in the v1 alpha 2 and that's the version we're going to be using the upcoming contour release as well",
    "start": "273360",
    "end": "280240"
  },
  {
    "text": "the second highlight is for exploring a new model where contour is basically",
    "start": "280720",
    "end": "285759"
  },
  {
    "text": "managing or it's provisioning and it's managing the fleet of envoys in your kubernetes cluster",
    "start": "285759",
    "end": "291360"
  },
  {
    "text": "and this configuration is specified on the new configuration crd and",
    "start": "291360",
    "end": "297040"
  },
  {
    "text": "a lot of design here was really motivated by you know our support for gateway api and thinking",
    "start": "297040",
    "end": "303360"
  },
  {
    "text": "about how might a cluster operator want to deploy this right and how it envoys",
    "start": "303360",
    "end": "308880"
  },
  {
    "text": "should be configured and how statuses and errors should be reflected and we will be going over those in in",
    "start": "308880",
    "end": "315680"
  },
  {
    "text": "detail in later slides the last thing i want to mention is that contour is moving to a quarterly release",
    "start": "315680",
    "end": "322080"
  },
  {
    "text": "from the monthly release that we have today um and this is supposed to allow us to align better with",
    "start": "322080",
    "end": "328639"
  },
  {
    "text": "the upstream envoy releases as well as kubernetes kubernetes releases um",
    "start": "328639",
    "end": "334400"
  },
  {
    "text": "there's a lot of you know if you head over to the contour github there are a lot of issues and discussions happening",
    "start": "334400",
    "end": "340080"
  },
  {
    "text": "on on why that is and you know what this allows us to do in terms of",
    "start": "340080",
    "end": "345280"
  },
  {
    "text": "just removing some of the overhead with release engineering and really focus on future delivery",
    "start": "345280",
    "end": "351360"
  },
  {
    "text": "also it allows us to support multiple releases so three releases at a time instead of",
    "start": "351360",
    "end": "357199"
  },
  {
    "text": "just the latest release next slide please",
    "start": "357199",
    "end": "363520"
  },
  {
    "start": "362000",
    "end": "542000"
  },
  {
    "text": "all right so i'll go over briefly what project contour um is really doing when you deploy it into",
    "start": "365039",
    "end": "371600"
  },
  {
    "text": "your kubernetes cluster um so you have traffic coming from the external world right it hits your",
    "start": "371600",
    "end": "379120"
  },
  {
    "text": "external load balancer and then hits your envoy and this external bouncer could be any number of options depending",
    "start": "379120",
    "end": "385840"
  },
  {
    "text": "on how your kubernetes cluster is deployed so if it's deployed on public cloud",
    "start": "385840",
    "end": "391280"
  },
  {
    "text": "or bare metal or on some kind of a managed service right this little balancer is brought up differently",
    "start": "391280",
    "end": "397759"
  },
  {
    "text": "so if we look at you know this deployment in in the context of public cloud the contour is basically invoking cloud",
    "start": "397759",
    "end": "404400"
  },
  {
    "text": "apis to instantiate a cloud load bouncer right and traffic gets your",
    "start": "404400",
    "end": "409680"
  },
  {
    "text": "your envoy proxy which is sitting at the edge of your kubernetes cluster and then traffic gets",
    "start": "409680",
    "end": "415360"
  },
  {
    "text": "routed to different applications that you have in your cluster right so we have a web",
    "start": "415360",
    "end": "420400"
  },
  {
    "text": "application and then we have a blog application and typically this routing behavior is",
    "start": "420400",
    "end": "425440"
  },
  {
    "text": "defined using ingress yamls right so you specify a path and how that maps to a different",
    "start": "425440",
    "end": "432319"
  },
  {
    "text": "to it to a service or cluster so you can use planing rest channels you can also use the crd that we have here",
    "start": "432319",
    "end": "439680"
  },
  {
    "text": "called http proxy it's just a a much more prescriptive way of defining the the",
    "start": "439680",
    "end": "446560"
  },
  {
    "text": "routing behavior and gateway api has another option called http route which we're",
    "start": "446560",
    "end": "453440"
  },
  {
    "text": "implementing today so this is basically what the data path",
    "start": "453440",
    "end": "459199"
  },
  {
    "text": "looks like going to external load bouncer going to envoy and then it goes to your application and you can see that contour",
    "start": "459199",
    "end": "465840"
  },
  {
    "text": "is sitting here um that's on that side talking to envoy almost like a sidecar",
    "start": "465840",
    "end": "472000"
  },
  {
    "text": "we know that there's a kubernetes api server in your cluster somewhere",
    "start": "472000",
    "end": "477360"
  },
  {
    "text": "and so what contour is doing is basically it's watching the kubernetes api server it's pulsing api server for",
    "start": "477360",
    "end": "483840"
  },
  {
    "text": "changes to any relevant resources that envoy might be interested in right so",
    "start": "483840",
    "end": "489039"
  },
  {
    "text": "um changes to your applications to your services and their endpoints",
    "start": "489039",
    "end": "494879"
  },
  {
    "text": "changes to ingress camels ingress resources or http proxy resources and it's reflecting",
    "start": "494879",
    "end": "501360"
  },
  {
    "text": "all these changes back to envoy instantaneously and dynamically",
    "start": "501360",
    "end": "507360"
  },
  {
    "text": "this is one of the value propositions of building on envoys that allows itself to be",
    "start": "507360",
    "end": "512800"
  },
  {
    "text": "configured dynamically and so you know in the absence of contour basically",
    "start": "512800",
    "end": "519120"
  },
  {
    "text": "envoy cannot directly consume kubernetes api so contour is acting as that translation layer",
    "start": "519120",
    "end": "525120"
  },
  {
    "text": "and reflecting these changes to envoy so it can reconfigure itself",
    "start": "525120",
    "end": "531040"
  },
  {
    "text": "and so this is basically you know hopefully this gives a good overview of what happens when you deploy contouring",
    "start": "531040",
    "end": "537440"
  },
  {
    "text": "to your uh your cluster and with that i'll hand it over to steve",
    "start": "537440",
    "end": "542959"
  },
  {
    "start": "542000",
    "end": "674000"
  },
  {
    "text": "uh hey everyone um i'm sorry i wanted to talk about as just touch on",
    "start": "547040",
    "end": "553040"
  },
  {
    "text": "again when alex mentioned about what's new in contour um so we've been on hard work working on uh gateway api",
    "start": "553040",
    "end": "559040"
  },
  {
    "text": "implementation as alex mentioned we are pretty far along and should be one of the most",
    "start": "559040",
    "end": "564160"
  },
  {
    "text": "advanced implementations of the api um uh the gateway apis have",
    "start": "564160",
    "end": "570399"
  },
  {
    "text": "recently released uh the v1 alpha 2 version of the api and we're um working",
    "start": "570399",
    "end": "575680"
  },
  {
    "text": "on implementing that that should be coming up in the next next uh release or so of contour um",
    "start": "575680",
    "end": "581279"
  },
  {
    "text": "currently contour um supports the v1 alpha one release and steve um k will be",
    "start": "581279",
    "end": "588560"
  },
  {
    "text": "demoing that in a few minutes um um we're also uh moving to a quarter",
    "start": "588560",
    "end": "594560"
  },
  {
    "text": "quarterly releases we've announced it recently in the um uh community call that we have and we've outlined how",
    "start": "594560",
    "end": "601200"
  },
  {
    "text": "we're going to um uh perform this support and uh how we're going to uh",
    "start": "601200",
    "end": "607839"
  },
  {
    "text": "support contour with an increased window um and",
    "start": "607839",
    "end": "613600"
  },
  {
    "text": "we have a new config crd that's going to allow us to",
    "start": "613600",
    "end": "619120"
  },
  {
    "text": "more dynamically respond to configuration changes and and uh give more feedback to users about",
    "start": "619120",
    "end": "625680"
  },
  {
    "text": "control configuration and hopefully um make contour a bit more operational and",
    "start": "625680",
    "end": "630839"
  },
  {
    "text": "mature as that also combined with gateway api work and",
    "start": "630839",
    "end": "637279"
  },
  {
    "text": "moving towards a version of contour where we will manage our deployment of envoy because",
    "start": "638000",
    "end": "644079"
  },
  {
    "text": "currently you uh actually deploy envoy as a separate uh deployment or daemon",
    "start": "644079",
    "end": "649279"
  },
  {
    "text": "set from your contour deployment in the future we're hoping to have contour",
    "start": "649279",
    "end": "654880"
  },
  {
    "text": "manage envoy itself and see some advantages",
    "start": "654880",
    "end": "660480"
  },
  {
    "text": "in terms of interoperability with gateway api and dynamic changes and and being able to",
    "start": "660480",
    "end": "667440"
  },
  {
    "text": "also continually be more more uh operationally mature",
    "start": "667440",
    "end": "672959"
  },
  {
    "text": "next next slide please so talking a little bit more in detail",
    "start": "672959",
    "end": "678160"
  },
  {
    "start": "674000",
    "end": "759000"
  },
  {
    "text": "about gateway api um gateway api is a project in the sig network um community",
    "start": "678160",
    "end": "685680"
  },
  {
    "text": "um aimed at kind of transforming how",
    "start": "685680",
    "end": "690720"
  },
  {
    "text": "ingress is represented in kubernetes uh formerly known as ingress v2 or or",
    "start": "690720",
    "end": "696320"
  },
  {
    "text": "service apis now known as gateway api because the concept of a gateway if you um",
    "start": "696320",
    "end": "703839"
  },
  {
    "text": "look into some of the the documentation on the on the site that's linked here",
    "start": "703839",
    "end": "709920"
  },
  {
    "text": "that's kind of an important idea and it it's represented in a collection of resources that",
    "start": "709920",
    "end": "717279"
  },
  {
    "text": "can be targeted at different personas in the in operational sense and deployment",
    "start": "717279",
    "end": "723200"
  },
  {
    "text": "of applications so you may have your infrastructure provider your cluster operator and application developers that manage",
    "start": "723200",
    "end": "730160"
  },
  {
    "text": "different resources at different levels api um so we introduced support for gateway api",
    "start": "730160",
    "end": "736399"
  },
  {
    "text": "first and contour uh version 1.13 um and as i mentioned before we're currently implementing",
    "start": "736399",
    "end": "742839"
  },
  {
    "text": "uh v1 alpha one of the api but uh there's big changes that have come in v1",
    "start": "742839",
    "end": "749200"
  },
  {
    "text": "alpha two of the gateway api so we will uh uh be implementing those soon we should be able to use those shortly so",
    "start": "749200",
    "end": "756639"
  },
  {
    "text": "uh for a quick demo of gateway api and contour here we go uh with steve steve",
    "start": "756639",
    "end": "762959"
  },
  {
    "start": "759000",
    "end": "1204000"
  },
  {
    "text": "chris all right thanks sanjay so i'm just gonna switch over to a vs code window",
    "start": "762959",
    "end": "770240"
  },
  {
    "text": "here so um i have a kind cluster deployed here on my local laptop uh it's got contour",
    "start": "770240",
    "end": "776480"
  },
  {
    "text": "installed in it and so i'm gonna do a quick walkthrough of how to get up and running with gateway api and contour",
    "start": "776480",
    "end": "782480"
  },
  {
    "text": "so the first thing we need to do is is tell contour through its config map",
    "start": "782480",
    "end": "787839"
  },
  {
    "text": "that it should listen uh watch for a gateway class and a gateway and tell it specifically which gateway class and",
    "start": "787839",
    "end": "793680"
  },
  {
    "text": "gateway to watch for and so the way that's done is by specifying a controller name here under the gateway",
    "start": "793680",
    "end": "799279"
  },
  {
    "text": "stanza in the config map so i'm going to go ahead and apply this file",
    "start": "799279",
    "end": "805440"
  },
  {
    "text": "okay so we've updated our config map now we need to restart contour to pick up the changes um this",
    "start": "808079",
    "end": "815120"
  },
  {
    "text": "is sort of alludes to some of the changes we've talked about as far as using a crd for config and then making",
    "start": "815120",
    "end": "820320"
  },
  {
    "text": "these things more uh let's see more dynamic but for now we",
    "start": "820320",
    "end": "826240"
  },
  {
    "text": "need to restart the deployment so restart contour",
    "start": "826240",
    "end": "832240"
  },
  {
    "text": "and just wait for it to be up",
    "start": "832240",
    "end": "837120"
  },
  {
    "text": "okay so we got a new pod coming up so i'll move on and that should be up and running by the time we get to the next step",
    "start": "838320",
    "end": "844639"
  },
  {
    "text": "so the next thing we need to do is create a gateway class that has a controller uh string matching this this",
    "start": "844639",
    "end": "851519"
  },
  {
    "text": "value that we put in the config file and so here i have a file that's defining a gateway class this is in the",
    "start": "851519",
    "end": "857760"
  },
  {
    "text": "gateway api group um and that's sanjay and others have mentioned we're currently using v1 alpha",
    "start": "857760",
    "end": "863680"
  },
  {
    "text": "1 but we'll be moving to v1 alpha 2 shortly so i'm going to go ahead and apply this file",
    "start": "863680",
    "end": "871560"
  },
  {
    "text": "and so now we have a gateway class i can list the gateway classes here and",
    "start": "871680",
    "end": "878160"
  },
  {
    "text": "we can also describe it and so at the bottom here you can see in the status that we've got a condition",
    "start": "878160",
    "end": "884560"
  },
  {
    "text": "added to the gateway class that says it's valid and it's been admitted with the status of true and so this means",
    "start": "884560",
    "end": "889839"
  },
  {
    "text": "contour has picked it up and seen that it should process it so the next thing we need to do then is",
    "start": "889839",
    "end": "895040"
  },
  {
    "text": "define a gateway for that gateway class so this is uh this file contains a gateway spec",
    "start": "895040",
    "end": "901040"
  },
  {
    "text": "we can see that it uses the gateway class that i showed in the previous file and this is a just a very simple gateway",
    "start": "901040",
    "end": "906959"
  },
  {
    "text": "that has a single uh listener listing on port 80 for http and",
    "start": "906959",
    "end": "912800"
  },
  {
    "text": "also it can select any http route across all namespaces",
    "start": "912800",
    "end": "917839"
  },
  {
    "text": "so there's there's a bunch of uh sort of configurability here as far as what kind of routes",
    "start": "917839",
    "end": "923360"
  },
  {
    "text": "each gateway should match what listeners it should have and which namespaces it should connect to but for the purposes of this demo we'll",
    "start": "923360",
    "end": "929920"
  },
  {
    "text": "just stick with a basic configuration here so i'll apply this file as well we've",
    "start": "929920",
    "end": "936800"
  },
  {
    "text": "got a gateway this one was created in the project contour namespace so we can",
    "start": "936800",
    "end": "944320"
  },
  {
    "text": "take a quick look at the gateways in that namespace and you can see here that we've also got a",
    "start": "944959",
    "end": "951600"
  },
  {
    "text": "condition here indicating that this gateway is is ready uh it's valid and so this means contour has picked it up and",
    "start": "951600",
    "end": "956959"
  },
  {
    "text": "now is ready to pick up some routes for it so just before i define the routes",
    "start": "956959",
    "end": "963759"
  },
  {
    "text": "in the default namespace here i've got a couple of sample workloads s1 and s2 that we'll be",
    "start": "963759",
    "end": "969199"
  },
  {
    "text": "routing some traffic to so let's take a look at the route that we have so",
    "start": "969199",
    "end": "974880"
  },
  {
    "text": "this is an http route again in the gateway api api group",
    "start": "974880",
    "end": "980480"
  },
  {
    "text": "and this one will pick up traffic that's directed at local.projectcontour.io and so to start",
    "start": "980480",
    "end": "986320"
  },
  {
    "text": "i'm going to have a just a simple rule that says uh any request with a prefix of slash",
    "start": "986320",
    "end": "992160"
  },
  {
    "text": "meaning match any request should be forwarded to s1 so i'll go ahead and apply this",
    "start": "992160",
    "end": "999360"
  },
  {
    "text": "this file okay we've got a route so now if i uh",
    "start": "999600",
    "end": "1004639"
  },
  {
    "text": "just curl local.projectcontour.io we get a response from echo server one",
    "start": "1004639",
    "end": "1010079"
  },
  {
    "text": "uh which was that first service and uh regardless of the path i put here we get routed to s1",
    "start": "1010079",
    "end": "1016240"
  },
  {
    "text": "so um we know we have two services in here so let's let's actually um set up a couple of rules to route to the",
    "start": "1016240",
    "end": "1022480"
  },
  {
    "text": "different services so i'll change this first rule to say that if there's a prefix on the path of s1 we should route",
    "start": "1022480",
    "end": "1028640"
  },
  {
    "text": "to service s1 and i'll uncomment this section here and this says that",
    "start": "1028640",
    "end": "1033678"
  },
  {
    "text": "if i have a request with a prefix of s2 we should route to s2 so i'll reapply",
    "start": "1033679",
    "end": "1039360"
  },
  {
    "text": "this route and so now if we route to s1 we still get echo server 1",
    "start": "1039360",
    "end": "1047678"
  },
  {
    "text": "if we use path of s2 looks like that didn't actually go through so thank you forgot to say",
    "start": "1047679",
    "end": "1054880"
  },
  {
    "text": "ah thanks nick good call okay so let's try that one more time so",
    "start": "1054880",
    "end": "1061679"
  },
  {
    "text": "we go to s1 hits echo server one go to s2 it hits echo server 2.",
    "start": "1061679",
    "end": "1067120"
  },
  {
    "text": "um and then we can do a few more complex things with the the matching rules here",
    "start": "1067120",
    "end": "1072640"
  },
  {
    "text": "so let's instead of using this one let's use this one down here",
    "start": "1072640",
    "end": "1078840"
  },
  {
    "text": "um so in this case let's say that we we only want to route traffic to service s2",
    "start": "1078840",
    "end": "1084720"
  },
  {
    "text": "if the request has a prefix of s2 and the request also has",
    "start": "1084720",
    "end": "1090880"
  },
  {
    "text": "this header specified in the request um and so this this uh configuration",
    "start": "1090880",
    "end": "1096799"
  },
  {
    "text": "allows you to do that so i'm gonna save this file again and reapply it and so now if we",
    "start": "1096799",
    "end": "1103520"
  },
  {
    "text": "uh if we add that header to the request",
    "start": "1103520",
    "end": "1108960"
  },
  {
    "text": "so i'm specifying the header that was defined as a match in that uh we'll get traffic routed to echo",
    "start": "1108960",
    "end": "1114320"
  },
  {
    "text": "server 2 but if i take that header out we don't get routed anywhere so this is",
    "start": "1114320",
    "end": "1120880"
  },
  {
    "text": "a simple way to add additional conditions to your your routing now you might have an alternate scenario where",
    "start": "1120880",
    "end": "1127120"
  },
  {
    "text": "you actually want to say i want any traffic that has the s2 prefix to be routed to s2 but",
    "start": "1127120",
    "end": "1133679"
  },
  {
    "text": "or i want any traffic that has this header uh to be routed to s2 and so the way you do that is to",
    "start": "1133679",
    "end": "1140320"
  },
  {
    "text": "create a separate match within your your route rule and this treats them as kind of as logical ores rather than logical",
    "start": "1140320",
    "end": "1147120"
  },
  {
    "text": "ands so i'll reapply this route one more time and now if we do",
    "start": "1147120",
    "end": "1154480"
  },
  {
    "text": "if we simply curl the path without the header uh we get routed to echo server 2 and then if i change this to just foo",
    "start": "1154880",
    "end": "1161760"
  },
  {
    "text": "actually so if i add back the header um and",
    "start": "1161760",
    "end": "1167679"
  },
  {
    "text": "change the uh the path prefix to something other than s2 we can see that we still get routed to echo server too",
    "start": "1167679",
    "end": "1174320"
  },
  {
    "text": "so that shows you a couple of different ways that you can set up your routing rules and get traffic to different backends",
    "start": "1174320",
    "end": "1180080"
  },
  {
    "text": "so hopefully that gives you a good sense of kind of the basics of using gateway api with contour there's a lot more to",
    "start": "1180080",
    "end": "1185919"
  },
  {
    "text": "dig into into the api here and certain things will definitely be changing with v1 alpha 2 but we plan to",
    "start": "1185919",
    "end": "1193120"
  },
  {
    "text": "stay on top of the changes and and continue to build out our support year so with that i'll go back to the slides",
    "start": "1193120",
    "end": "1201600"
  },
  {
    "text": "and i'll turn it over to nick hi everyone um okay uh my job today is",
    "start": "1203360",
    "end": "1211039"
  },
  {
    "start": "1204000",
    "end": "1479000"
  },
  {
    "text": "to talk a little bit about the quarterly release um so yeah up till now contour has been releasing",
    "start": "1211039",
    "end": "1216480"
  },
  {
    "text": "monthly using like a release train model where at around about the end of the month the",
    "start": "1216480",
    "end": "1221520"
  },
  {
    "text": "release train pulls out of the station and everything that is merged into the",
    "start": "1221520",
    "end": "1226640"
  },
  {
    "text": "repo is what is in what ends up in the release um as of our october release we're going",
    "start": "1226640",
    "end": "1232400"
  },
  {
    "text": "to be moving to quarterly releases though so it's still going to be pretty much a",
    "start": "1232400",
    "end": "1237600"
  },
  {
    "text": "release train model um whatever is ready um at about the time we're due to release will be what gets",
    "start": "1237600",
    "end": "1242640"
  },
  {
    "text": "cut but given that we're going to have three months instead of one month we're hoping that we should be able to do a bit better",
    "start": "1242640",
    "end": "1248720"
  },
  {
    "text": "planning and be able to tell you more about what's going to be in the release before the release actually comes out and to be able to plan a little bit more",
    "start": "1248720",
    "end": "1255120"
  },
  {
    "text": "ahead and say that will make it into release x um",
    "start": "1255120",
    "end": "1260400"
  },
  {
    "text": "the other thing that we're that's really important um is that we're going to be moving to supporting three contour releases now",
    "start": "1260400",
    "end": "1266080"
  },
  {
    "text": "there's a little there's some fiddly bits there in the slide but i just wanted to talk briefly about the reason why we're doing this and the",
    "start": "1266080",
    "end": "1271679"
  },
  {
    "text": "reason why we're doing this is your contour is getting to be more mature we're not making as big changes",
    "start": "1271679",
    "end": "1276720"
  },
  {
    "text": "every time we don't have like a huge number of features left to hit feature parity with a lot of the",
    "start": "1276720",
    "end": "1282480"
  },
  {
    "text": "other ingress controllers on the market um and so i think we're hoping here to make the life of",
    "start": "1282480",
    "end": "1289200"
  },
  {
    "text": "the person of the user of contour easier that you don't have to update every month to get the latest security fixes",
    "start": "1289200",
    "end": "1294880"
  },
  {
    "text": "or to get the latest fixes and patches and stuff like that but it shouldn't be we shouldn't need to be updating as",
    "start": "1294880",
    "end": "1300000"
  },
  {
    "text": "often as we have been uh previously in the part previously contour has been",
    "start": "1300000",
    "end": "1305280"
  },
  {
    "text": "you know updating very frequently because we've been changing things very frequently but as we sort of start to round out some of those things and need",
    "start": "1305280",
    "end": "1311120"
  },
  {
    "text": "to work on bigger features that are taking a longer time to release it's starting to mean that we end up with a much smaller",
    "start": "1311120",
    "end": "1317360"
  },
  {
    "text": "set of features in each release and so we're having to make your life easier by as i said by lengthening these",
    "start": "1317360",
    "end": "1324240"
  },
  {
    "text": "releases and making the releases a bit more meaty so",
    "start": "1324240",
    "end": "1329760"
  },
  {
    "text": "how are we going to move to uh to supporting three releases well",
    "start": "1329760",
    "end": "1335120"
  },
  {
    "text": "this is this is the plan um the we're going to for uh 120 which is currently scheduled for",
    "start": "1335120",
    "end": "1341440"
  },
  {
    "text": "october all these days here i've got uh very tentative dates obviously we haven't done quarterly releases before",
    "start": "1341440",
    "end": "1347679"
  },
  {
    "text": "so this is the the rough plan as of today um but this may change obviously as we as",
    "start": "1347679",
    "end": "1354720"
  },
  {
    "text": "we have a crack at this and find that things are easier or harder than we intended to be so for for 120 which is scheduled for",
    "start": "1354720",
    "end": "1361600"
  },
  {
    "text": "october um the only release that will be supported is 120. that's no change to today only one version however when 121 comes",
    "start": "1361600",
    "end": "1369120"
  },
  {
    "text": "out which is three months from then is sort of end of january 2022",
    "start": "1369120",
    "end": "1374159"
  },
  {
    "text": "we will support 120 and 121 and the and then as we go to 122 which is",
    "start": "1374159",
    "end": "1380880"
  },
  {
    "text": "about the end of april then it'll be 120 121 122 and then once we get to 123 which is",
    "start": "1380880",
    "end": "1387840"
  },
  {
    "text": "july 22 that's when we'll drop support for 120. so then we'll support 121 122",
    "start": "1387840",
    "end": "1393120"
  },
  {
    "text": "123. and what does support mean support means in this case that uh",
    "start": "1393120",
    "end": "1398320"
  },
  {
    "text": "critical fixes like security fixes or other bug fixes will be back ported to",
    "start": "1398320",
    "end": "1403679"
  },
  {
    "text": "multiple releases so if someone finds a severe bug in some feature that we built then we will backport",
    "start": "1403679",
    "end": "1410159"
  },
  {
    "text": "that fix to all of the features all of the releases that have that feature available but we're not going to be",
    "start": "1410159",
    "end": "1415200"
  },
  {
    "text": "doing uh feature backboarding um so we're not going to back port if we add",
    "start": "1415200",
    "end": "1420240"
  },
  {
    "text": "you something some new nifty featurex we're not going to backport that to our previous features it's only going to be",
    "start": "1420240",
    "end": "1426000"
  },
  {
    "text": "fixes that's just to make sure that we're not spending all our time just doing back putting and not actually getting to do",
    "start": "1426000",
    "end": "1432080"
  },
  {
    "text": "any uh future things so yeah so what that means at the end of the day is that any particular version",
    "start": "1432080",
    "end": "1437600"
  },
  {
    "text": "once we get to so 122 any version will get nine months of security and other urgent feature fixes",
    "start": "1437600",
    "end": "1444320"
  },
  {
    "text": "um so we're hoping that that should be much better than you um obviously nine months is a slightly weird cadence um",
    "start": "1444320",
    "end": "1450400"
  },
  {
    "text": "you know kubernetes kubernetes has specifically moved away from doing that by uh changing them into",
    "start": "1450400",
    "end": "1456400"
  },
  {
    "text": "a year but we're hoping that this will be good enough and we will see how we go once we've",
    "start": "1456400",
    "end": "1462720"
  },
  {
    "text": "once we've run this sort of three quarterly release support for a while and see how much effort it is how much",
    "start": "1462720",
    "end": "1468640"
  },
  {
    "text": "value everybody's getting out of it so yeah uh very interested to hear what everyone thinks about this um yeah and",
    "start": "1468640",
    "end": "1474880"
  },
  {
    "text": "uh hopefully it should be more useful for you uh now i can't remember who's who's up next um steven stevens thanks dfk uh cbs",
    "start": "1474880",
    "end": "1482480"
  },
  {
    "start": "1479000",
    "end": "1716000"
  },
  {
    "text": "over to you for the config crd discussion well thanks nick yeah so uh we're looking at moving to uh to",
    "start": "1482480",
    "end": "1488799"
  },
  {
    "text": "contours config into a uh a crd so right now steve if you want to pop down a couple clicks",
    "start": "1488799",
    "end": "1496320"
  },
  {
    "text": "yeah right now we restore configuration options um in a config map so there's a",
    "start": "1496320",
    "end": "1501840"
  },
  {
    "text": "config map you edit you saw steve do that in the demo where you had to edit that config map they had to restart contour for contour",
    "start": "1501840",
    "end": "1507679"
  },
  {
    "text": "to pick that up that's where things live today um and there's also command flags that you can",
    "start": "1507679",
    "end": "1513520"
  },
  {
    "text": "pass so in the you know contour serve uh in the in the contoured pod there's different commands you can",
    "start": "1513520",
    "end": "1519760"
  },
  {
    "text": "pass to that or flags that overlap as well with the config maps right now we've got this sort of mishmash of where",
    "start": "1519760",
    "end": "1525919"
  },
  {
    "text": "the config map overrides the environment variables which get overwritten by the the command line flags um and we're sort",
    "start": "1525919",
    "end": "1532480"
  },
  {
    "text": "of in a weird spot so our goal here is to help make this simpler um and and solve some problems",
    "start": "1532480",
    "end": "1538159"
  },
  {
    "text": "here so i think there's four different problems in this slide and i should have put transitions in here um but uh so",
    "start": "1538159",
    "end": "1543760"
  },
  {
    "text": "right now the operator that we have the contour operator has to translate from a crd into the config map so um and the",
    "start": "1543760",
    "end": "1550240"
  },
  {
    "text": "crd that the operator is managing is different from what contour manages so the goal here is to centralize this and have this live as one",
    "start": "1550240",
    "end": "1556480"
  },
  {
    "text": "one type so one configuration's you know ghost struct in a sense we didn't have any way to surface errors",
    "start": "1556480",
    "end": "1563039"
  },
  {
    "text": "so other than logs and contours so if you did something wrong you can figure something wrong contour would crash loop",
    "start": "1563039",
    "end": "1568640"
  },
  {
    "text": "you'd have to go tell the logs and see what was wrong we can also implement some simple crd validation so if a field should be you",
    "start": "1568640",
    "end": "1575039"
  },
  {
    "text": "know a number and you put a string in there we can throw that out before you try to apply that steering to the to the to the cluster",
    "start": "1575039",
    "end": "1581279"
  },
  {
    "text": "and then eventually like to have dynamic resource of contour so if you make a config change it'll just contour",
    "start": "1581279",
    "end": "1587279"
  },
  {
    "text": "pick that up and just restart itself automatically all right next slide see",
    "start": "1587279",
    "end": "1593440"
  },
  {
    "text": "cool so the implementation kind of looks like this um it's like there was something on the left there but maybe not um so the the",
    "start": "1593440",
    "end": "1599840"
  },
  {
    "text": "the configuration file has um has been simplified so we've taken all those little bits and put them together um",
    "start": "1599840",
    "end": "1606080"
  },
  {
    "text": "actually there may be some transitions here as well so you can click click yeah so all the fields now are camel case so we had a mix of camelcase and",
    "start": "1606080",
    "end": "1612640"
  },
  {
    "text": "hyphenated values um all the non-required startup command flags are now in this file so again you can have a",
    "start": "1612640",
    "end": "1618640"
  },
  {
    "text": "simple file that's portable across deployments and then we've grouped things together so things that were dealing with the xds",
    "start": "1618640",
    "end": "1625679"
  },
  {
    "text": "server they're all put together things that are debug related things or health or metrics again they have a proper",
    "start": "1625679",
    "end": "1630880"
  },
  {
    "text": "grouping now which before we didn't have as well there's a design dock you can check out for more information on this down at the bottom it's in our design",
    "start": "1630880",
    "end": "1637840"
  },
  {
    "text": "directory and the contour repo and the next section here is going to talk about uh manage envoy which is the",
    "start": "1637840",
    "end": "1644480"
  },
  {
    "text": "next part of this so um contour's gonna moving moving to manage envoy itself so",
    "start": "1644480",
    "end": "1649919"
  },
  {
    "text": "envoys is the critical datapath component that it has to go with contour contours the configuration server for",
    "start": "1649919",
    "end": "1655440"
  },
  {
    "text": "envoy so the goal here is to have contour read this spec that we just wrote and then in that new configuration crd",
    "start": "1655440",
    "end": "1662399"
  },
  {
    "text": "there's a new managed option under envoy and this will tell contour hey i'm going to manage envoy and then there's the",
    "start": "1662399",
    "end": "1667919"
  },
  {
    "text": "details of how that envoy demonstrated deployment should look or work in your cluster",
    "start": "1667919",
    "end": "1672960"
  },
  {
    "text": "that'll define how it's published to the outside of the cluster what noza put this on and various things this is",
    "start": "1672960",
    "end": "1678720"
  },
  {
    "text": "obviously a very simplified window of this uh but essentially you'll just deploy contour and then control then",
    "start": "1678720",
    "end": "1684080"
  },
  {
    "text": "manage the envoy fleet for you uh when you upgrade contour and change this configuration then contour will manage",
    "start": "1684080",
    "end": "1689679"
  },
  {
    "text": "rolling out that envoy fleet uh for you uh in the future looking with the operator we will have a spec that the",
    "start": "1689679",
    "end": "1695919"
  },
  {
    "text": "operator will read to help you manage contour so um everything will work kind of as it is today uh but we're looking",
    "start": "1695919",
    "end": "1702000"
  },
  {
    "text": "hoping that this layered approach will help you uh manage your environment in the best way that fits your fits your",
    "start": "1702000",
    "end": "1707760"
  },
  {
    "text": "world so again all these all these design docs out in our repo and the design folder uh please check them out and give us some",
    "start": "1707760",
    "end": "1713200"
  },
  {
    "text": "feedback so i think nick you are next with the roadmap",
    "start": "1713200",
    "end": "1718799"
  },
  {
    "start": "1716000",
    "end": "2112000"
  },
  {
    "text": "thanks very much steve um yes so i mean if i would summarize this roadmap in a very short number of words uh it",
    "start": "1719440",
    "end": "1725200"
  },
  {
    "text": "would be yeah main thing we're going to do is do what we just talked about um so but i mean to just run down like you",
    "start": "1725200",
    "end": "1731520"
  },
  {
    "text": "know we're going to finish up the release cadence and support window change we're going to migrate the config to the cid um this is the i think one of",
    "start": "1731520",
    "end": "1737919"
  },
  {
    "text": "the things that you know steve has done a great job of designing but maybe you missed a little bit there was that we um",
    "start": "1737919",
    "end": "1744000"
  },
  {
    "text": "we're not gonna we're gonna make sure we this is gonna be a nice slow process everybody's gonna have plenty of change plans chances to move across um",
    "start": "1744000",
    "end": "1751600"
  },
  {
    "text": "we're not going to drop this on you and then you know you're going to have to change this quickly there's going to be plenty of time for you to move across to",
    "start": "1751600",
    "end": "1757039"
  },
  {
    "text": "this safely um and the same goes for managed we're going to bring this stuff on board let everybody have a chance to",
    "start": "1757039",
    "end": "1763039"
  },
  {
    "text": "try it out before before you know before we do anything about mandating the gateway api support is um you know a",
    "start": "1763039",
    "end": "1769760"
  },
  {
    "text": "lot of these changes asked to support being under uh implement go api in the best way we can imagine",
    "start": "1769760",
    "end": "1775919"
  },
  {
    "text": "and as gateway api comes on moves through its versions we're gonna try and get our best to keep up now",
    "start": "1775919",
    "end": "1782880"
  },
  {
    "text": "you know i think alex mentioned earlier i'm also a maintainer on the go api project one of the things we're trying to do with the current release of v1",
    "start": "1782880",
    "end": "1789279"
  },
  {
    "text": "alpha 2 is to make sure that all of the breaking changes that we need to make are in v1 alpha 2. so as the gateway api",
    "start": "1789279",
    "end": "1796000"
  },
  {
    "text": "moves forward um implementers of the api like us like contour won't have to make as bigger",
    "start": "1796000",
    "end": "1802480"
  },
  {
    "text": "changes in order to support it so hopefully as gateway api moves to beta and then and then to ga there's going to",
    "start": "1802480",
    "end": "1809200"
  },
  {
    "text": "be minimal changes that we're going to need to make to our api processing code that's the plan um so that's sort of",
    "start": "1809200",
    "end": "1816559"
  },
  {
    "text": "the the gateway api is really like the future of ingress in kubernetes um it's going",
    "start": "1816559",
    "end": "1822080"
  },
  {
    "text": "to be the way to describe things in a more complicated anything more complicated than sort of",
    "start": "1822080",
    "end": "1827279"
  },
  {
    "text": "the really basic ingress use cases that are handled already by the base ingress object that's going to be done that's",
    "start": "1827279",
    "end": "1832399"
  },
  {
    "text": "going to be pushed towards gateway api i think that nobody really thinks that",
    "start": "1832399",
    "end": "1837520"
  },
  {
    "text": "the place that ingress has ended up uh with uh lots of annotations is the best place um and the gateway api is sort of",
    "start": "1837520",
    "end": "1843840"
  },
  {
    "text": "very much a response to that and a response to being able to make this stuff more exposed and declarative and",
    "start": "1843840",
    "end": "1851120"
  },
  {
    "text": "understandable and so that's one of the risks that's the reason why contra is very involved",
    "start": "1851120",
    "end": "1856480"
  },
  {
    "text": "and very um and very bullish about the prospect of the",
    "start": "1856480",
    "end": "1862320"
  },
  {
    "text": "um so the last couple of things we're going to um we're going to look at be looking forward to is um where you know",
    "start": "1862320",
    "end": "1867600"
  },
  {
    "text": "qantas has been around for quite a few years now um the state of the art for xds control planes has moved on",
    "start": "1867600",
    "end": "1874399"
  },
  {
    "text": "and so some of our xts code is getting a bit long in the tooth and there's probably there's a bunch of optimizations we can do there so we've",
    "start": "1874399",
    "end": "1880159"
  },
  {
    "text": "got sort of a longer running stream um that has kicked off but new uh we'll",
    "start": "1880159",
    "end": "1885360"
  },
  {
    "text": "we're hoping we'll deliver some value over the next while to modernize our xcs code to enable some of the more advanced",
    "start": "1885360",
    "end": "1891840"
  },
  {
    "text": "ways in which xds code works that hopefully should mean that contour should be more efficient talking on the wire to envoy and vice versa",
    "start": "1891840",
    "end": "1899360"
  },
  {
    "text": "um and lastly um we're aiming to push for cncf graduation in 2022 um",
    "start": "1899360",
    "end": "1906240"
  },
  {
    "text": "we've done a lot of the sort of basic background work that we've got to do for that um and a lot but a lot of what's",
    "start": "1906240",
    "end": "1911840"
  },
  {
    "text": "required is um your community interaction so you we're looking for contributors we you know we love to have",
    "start": "1911840",
    "end": "1918559"
  },
  {
    "text": "new people come and contribute we've got a bunch of stuff labeled as a good first issue and help wanted we have a tech",
    "start": "1918559",
    "end": "1924080"
  },
  {
    "text": "docs working group so if you don't you know if you're not a coder but you want to contribute to contour there are",
    "start": "1924080",
    "end": "1929919"
  },
  {
    "text": "definitely ways to do that and we would really love to welcome you into our community um you with that said as well",
    "start": "1929919",
    "end": "1935840"
  },
  {
    "text": "yeah we're always looking for more maintainers and so if you have bandwidth to uh you know really throw yourself into contour and would like to be a",
    "start": "1935840",
    "end": "1941600"
  },
  {
    "text": "maintainer then talk to us um and we can direct you to places in which you can contribute so",
    "start": "1941600",
    "end": "1946799"
  },
  {
    "text": "you can start climbing that contribution later that's one of the requirements for cnc graduation is that we need to have a",
    "start": "1946799",
    "end": "1952000"
  },
  {
    "text": "more diverse uh maintainer pool across every access uh and you know i for one would really",
    "start": "1952000",
    "end": "1957039"
  },
  {
    "text": "like to see more more people be maintainers and for us to have a better",
    "start": "1957039",
    "end": "1962559"
  },
  {
    "text": "diversity you know in thinking in companies in you know in who people are",
    "start": "1962559",
    "end": "1968640"
  },
  {
    "text": "so that we can build a better product that serves more people more easily",
    "start": "1968640",
    "end": "1973679"
  },
  {
    "text": "obviously our public roadmap that's linked down the bottom which is in our community repo is the canonical place to",
    "start": "1973679",
    "end": "1978720"
  },
  {
    "text": "talk about the sort of more lower level roadmap features and so um",
    "start": "1978720",
    "end": "1984399"
  },
  {
    "text": "you know that's the place to go to to find out sort of all the detail on that i think uh with that uh i'll uh flip",
    "start": "1984399",
    "end": "1990799"
  },
  {
    "text": "over to alex for uh yeah to finish up yeah bye",
    "start": "1990799",
    "end": "1995919"
  },
  {
    "text": "thanks nick um so this is you know um i think thanks for sticking with us you've made it to",
    "start": "1996720",
    "end": "2002960"
  },
  {
    "text": "the last slide this is the state of the world of the contour community",
    "start": "2002960",
    "end": "2008240"
  },
  {
    "text": "so you know some telemetry here we have six maintainers but again like nick said we would",
    "start": "2008240",
    "end": "2015120"
  },
  {
    "text": "love for more people to join us and you don't have to join as a maintainer right there are other ways to contribute um",
    "start": "2015120",
    "end": "2022240"
  },
  {
    "text": "just you know coming to these talks and coming to community meetings um are really you know really beneficial",
    "start": "2022240",
    "end": "2028640"
  },
  {
    "text": "to all of us um so you know we have these community meetings",
    "start": "2028640",
    "end": "2034000"
  },
  {
    "text": "um so feel free to drop by and you can ask any questions or just you know watch",
    "start": "2034000",
    "end": "2040080"
  },
  {
    "text": "um you know watch us discuss releases and discuss prs",
    "start": "2040080",
    "end": "2045279"
  },
  {
    "text": "talk about the road map things like that all the community meetings are recorded so you can watch these on youtube um",
    "start": "2045279",
    "end": "2052158"
  },
  {
    "text": "i think we've also explored we've been exploring an idea of making the maintainer meetings public as well",
    "start": "2052159",
    "end": "2057599"
  },
  {
    "text": "probably through a zoom webinar of some kind also anyone can come and attend and",
    "start": "2057599",
    "end": "2064480"
  },
  {
    "text": "follow us but it allows us to stick to our agenda um",
    "start": "2064480",
    "end": "2069839"
  },
  {
    "text": "so yeah i want to thank everyone who has attended in the past",
    "start": "2069839",
    "end": "2075280"
  },
  {
    "text": "giving us really great feedback and all the things that you've been hearing us discussed just now like the",
    "start": "2075280",
    "end": "2081520"
  },
  {
    "text": "managed envoy uh the gateway api support that we're doing all these things are still in",
    "start": "2081520",
    "end": "2086800"
  },
  {
    "text": "flight so definitely appreciate anyone comment and share your perspective",
    "start": "2086800",
    "end": "2092720"
  },
  {
    "text": "so that's it for me um that's it from all of us i want to thank you for attending this talk um and then we also",
    "start": "2092720",
    "end": "2099599"
  },
  {
    "text": "have a couple of office hours during this cooper con that you can drop by and you know ask any questions you like deep",
    "start": "2099599",
    "end": "2106000"
  },
  {
    "text": "dive any issue or any future requests so that's it thank you",
    "start": "2106000",
    "end": "2114400"
  }
]