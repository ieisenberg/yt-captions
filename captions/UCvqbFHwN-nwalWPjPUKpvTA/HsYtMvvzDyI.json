[
  {
    "start": "0",
    "end": "47000"
  },
  {
    "text": "so good morning everybody we are pretty impressed by the number of people cadsr",
    "start": "30",
    "end": "6779"
  },
  {
    "text": "developer topic and to see so many people interested in that it's just amazing we were also surprised about the",
    "start": "6779",
    "end": "13769"
  },
  {
    "text": "comic I think everybody has seen that in the in the keynote this morning fantastic comic and yeah we couldn't",
    "start": "13769",
    "end": "19619"
  },
  {
    "text": "stop to foe it as a first slide today yeah my name is Jeff Rancher Manske I'm",
    "start": "19619",
    "end": "24930"
  },
  {
    "text": "looking for that it's part of my work is on CDs my name is Betty Botta I'm",
    "start": "24930",
    "end": "31740"
  },
  {
    "text": "working for Google cow yeah that CRD is my project for last year working on",
    "start": "31740",
    "end": "37530"
  },
  {
    "text": "different aspect of it this one is going to be about versioning and conversions",
    "start": "37530",
    "end": "46129"
  },
  {
    "text": "so first let's set up let's set some terms here we are talking about custom",
    "start": "46129",
    "end": "52680"
  },
  {
    "start": "47000",
    "end": "47000"
  },
  {
    "text": "resources there are two ways in kubernetes to define custom resources one is true custom resource definitions",
    "start": "52680",
    "end": "59910"
  },
  {
    "text": "that probably most of you heard but the other one is aggregated api server and yes our documentation called those",
    "start": "59910",
    "end": "66900"
  },
  {
    "text": "resources custom resources - here we are focusing on CR DS we're going from now",
    "start": "66900",
    "end": "74790"
  },
  {
    "text": "on when we are talking about C ours we are talking about defined using C or DS",
    "start": "74790",
    "end": "81000"
  },
  {
    "text": "and there are you know there are sometimes these terms goes wrong that we call it C or D versioning and C or D",
    "start": "81000",
    "end": "87060"
  },
  {
    "text": "conversion but it's actually CR versioning and see our conversion to c rd so c rd before 111 had one version",
    "start": "87060",
    "end": "97890"
  },
  {
    "start": "92000",
    "end": "92000"
  },
  {
    "text": "field that you specify your version and group and coin in 111 we start adding",
    "start": "97890",
    "end": "103290"
  },
  {
    "text": "this versions list that is going to actually replace the version field",
    "start": "103290",
    "end": "109590"
  },
  {
    "text": "version field was required now it's optional and if you set it it should be the first item in this",
    "start": "109590",
    "end": "115530"
  },
  {
    "text": "versions list and if it's not such that that's fine it will be defaulted to the first item in the versions this the",
    "start": "115530",
    "end": "122700"
  },
  {
    "text": "simplest version definition is actually named served and storage for each",
    "start": "122700",
    "end": "128310"
  },
  {
    "text": "version name is obviously name of the version that going to be using the in the URL to or",
    "start": "128310",
    "end": "135720"
  },
  {
    "text": "anywhere else we are referring to the version servlet you actually disable and",
    "start": "135720",
    "end": "141360"
  },
  {
    "text": "enable this version and I will talk more about that why why we just don't remove",
    "start": "141360",
    "end": "146730"
  },
  {
    "text": "it sometimes you can just remove a version and then storage is specifying",
    "start": "146730",
    "end": "152549"
  },
  {
    "text": "which version is going to be used when we are storing see our days in at CD",
    "start": "152549",
    "end": "159180"
  },
  {
    "text": "only an own only one of these versions can be can have this flag on only one",
    "start": "159180",
    "end": "167310"
  },
  {
    "text": "version should be a specified up as a storage version other than those three",
    "start": "167310",
    "end": "173849"
  },
  {
    "start": "172000",
    "end": "172000"
  },
  {
    "text": "simple fields we actually starting 113 be moved other CRD fields into the",
    "start": "173849",
    "end": "180930"
  },
  {
    "text": "versioning remove them perversion first one is validation we had a validation",
    "start": "180930",
    "end": "185970"
  },
  {
    "text": "fill that top level now we have a schema filled at each level as each version",
    "start": "185970",
    "end": "191400"
  },
  {
    "text": "each version can have its its own schema because we fought for backward",
    "start": "191400",
    "end": "198449"
  },
  {
    "text": "compatibility and for to make sure that we can do upgrade the dungarees we did some validation here if you set",
    "start": "198449",
    "end": "205410"
  },
  {
    "text": "perversion fills any of these you cannot set the top level one so either top the other one should be set or perversion",
    "start": "205410",
    "end": "211829"
  },
  {
    "text": "fields if top level one is said also use for all versions if perversions fields are set the top level should be empty",
    "start": "211829",
    "end": "219260"
  },
  {
    "text": "because of some we actually look at many upgraded Ungar in scenarios there are",
    "start": "219260",
    "end": "224819"
  },
  {
    "text": "scenarios that actually an all the operator may not know about perversion fields and may try to patch the C or D",
    "start": "224819",
    "end": "232260"
  },
  {
    "text": "to set a top-level field in that case we will also clear perversion fields if the",
    "start": "232260",
    "end": "239430"
  },
  {
    "text": "top-level said top-level one is set but other than that you should make sure that either top-level or perversion",
    "start": "239430",
    "end": "245400"
  },
  {
    "text": "fields are set for sub resources we did the same so we can define sub resources",
    "start": "245400",
    "end": "250949"
  },
  {
    "text": "perversion this is very actually useful example for example you want to add status to a new version adding status to",
    "start": "250949",
    "end": "258389"
  },
  {
    "text": "the only version you have would be would have problems because you're all controller may not work status changes",
    "start": "258389",
    "end": "265260"
  },
  {
    "text": "the behavior of of your object so you can actually define a new version and enable status",
    "start": "265260",
    "end": "270270"
  },
  {
    "text": "in that version also for additional printer columns you can define them perversion and again the same rule if",
    "start": "270270",
    "end": "277590"
  },
  {
    "text": "you set the table level one it will be used for all of them and these are serving alpha in 113 I will hand you",
    "start": "277590",
    "end": "286740"
  },
  {
    "text": "hand it to Stefan yeah a bit back point about versions",
    "start": "286740",
    "end": "291860"
  },
  {
    "text": "versions are representations of the same resource so on the slide here I have one",
    "start": "291860",
    "end": "298260"
  },
  {
    "text": "object that's called your your resource and it's actually the same just three",
    "start": "298260",
    "end": "303570"
  },
  {
    "text": "different representations so when you create an object using v1 you can get",
    "start": "303570",
    "end": "309389"
  },
  {
    "text": "the same object again in V 1 beta 1 or V 1 I for one this example so it's",
    "start": "309389",
    "end": "315450"
  },
  {
    "text": "important it's one object just representation nothing else and to do",
    "start": "315450",
    "end": "321830"
  },
  {
    "text": "that we've object in a different version of course we need conversions and this",
    "start": "321830",
    "end": "326940"
  },
  {
    "text": "is the topic of the talk and you can imagine that maybe your controllers",
    "start": "326940",
    "end": "332220"
  },
  {
    "text": "creates a v1 and the user uses V 1 beta 1 and another controller once I have one",
    "start": "332220",
    "end": "339680"
  },
  {
    "text": "it's very important that you don't lose information so this this conversion must go back and forth between versions and",
    "start": "339680",
    "end": "346110"
  },
  {
    "text": "there wouldn't be any data loss because it's representation and it it must be yeah without any information was this",
    "start": "346110",
    "end": "355470"
  },
  {
    "text": "conversion is very deep in in the API server so you can imagine that we saw something actually when we saw something",
    "start": "355470",
    "end": "362310"
  },
  {
    "text": "at CD you remember MIDI shows the storage version just just one store",
    "start": "362310",
    "end": "367410"
  },
  {
    "text": "which version which means when the user sends a v1 object and you have a storage version for B 1 Peter 1 so version was",
    "start": "367410",
    "end": "374729"
  },
  {
    "text": "the object is converted before so you have convert from basically everywhere and if you look at this picture here it",
    "start": "374729",
    "end": "381030"
  },
  {
    "text": "can be that in on one request you have 2 or 3 conversion chords so this is central and the reason again why you",
    "start": "381030",
    "end": "389130"
  },
  {
    "text": "have B to be very very careful to to have no data loss when converting for",
    "start": "389130",
    "end": "396630"
  },
  {
    "text": "native resources this is implemented obviously in go so what conversion it's done in go in",
    "start": "396630",
    "end": "402689"
  },
  {
    "text": "substitute ABI server 4c ADIZ we couldn't do that for obvious reasons so we needed something - yeah - put those",
    "start": "402689",
    "end": "410189"
  },
  {
    "text": "conversions in - and what we did we proposed to use the rap hoop for that so",
    "start": "410189",
    "end": "418729"
  },
  {
    "text": "we talked about the cell phone talked about the conversion well how we did it in C are these so starting from 111 when",
    "start": "418729",
    "end": "426240"
  },
  {
    "text": "we introduced the versions we assume that there's no conversion in all the object would be the same that's the",
    "start": "426240",
    "end": "432569"
  },
  {
    "text": "first version we wanted to get the versioning out so people can try it in that one we call it a non conversion",
    "start": "432569",
    "end": "438900"
  },
  {
    "text": "that means the only thing the conversion will do is to set the API versions of",
    "start": "438900",
    "end": "444150"
  },
  {
    "text": "the crs when you go from one version to the other and assume the schema of that",
    "start": "444150",
    "end": "449669"
  },
  {
    "text": "CR is staying the same so for example in that Windows version if you want to add",
    "start": "449669",
    "end": "455219"
  },
  {
    "text": "a field you need to add it to all versions you can add it only to one or if you want to rename it you need to",
    "start": "455219",
    "end": "461189"
  },
  {
    "text": "rename it everywhere you can the schema cannot be different if it's a non conversion then we actually start",
    "start": "461189",
    "end": "467490"
  },
  {
    "text": "discussing of how how we want to do the conversion in in C or DS we had a long",
    "start": "467490",
    "end": "473430"
  },
  {
    "text": "discussion on declarative conversion how to define it what is good what is good",
    "start": "473430",
    "end": "479159"
  },
  {
    "text": "operator we can have and I put actually two links there you can go there and see",
    "start": "479159",
    "end": "484199"
  },
  {
    "text": "the discussion long discussion but at the end we decided not to do the declarative and decided to go with a",
    "start": "484199",
    "end": "489899"
  },
  {
    "text": "webhook conversion basically API server calls to an external web hook to do to",
    "start": "489899",
    "end": "495719"
  },
  {
    "text": "ask for the conversion and we thought that this actually this is generally",
    "start": "495719",
    "end": "500849"
  },
  {
    "text": "mode enough that you know we can do everything with it but it comes with it's actually problems that I will talk",
    "start": "500849",
    "end": "506909"
  },
  {
    "text": "later but basically what what would happen is when Cuba has ever gets a request for we want and you have a v1",
    "start": "506909",
    "end": "513959"
  },
  {
    "text": "best r1 stored in your net CD QA / server will send a request to an in",
    "start": "513959",
    "end": "519419"
  },
  {
    "text": "cluster web hook server it doesn't need to be in closer is normally in cluster it's a you know service is call into it",
    "start": "519419",
    "end": "526260"
  },
  {
    "text": "and ask for conversion between V from v1 better one to be one and then the",
    "start": "526260",
    "end": "533180"
  },
  {
    "text": "service will return a conversion response with v1 and will return that to the user this is in 113 and this is",
    "start": "533180",
    "end": "544070"
  },
  {
    "text": "alpha so how we define that in the spec",
    "start": "544070",
    "end": "549529"
  },
  {
    "start": "545000",
    "end": "545000"
  },
  {
    "text": "of the C or D we added a section called conversion the first fill in conversion",
    "start": "549529",
    "end": "555260"
  },
  {
    "text": "is strategy it will be defaulted to num if you don't have this field yet if you",
    "start": "555260",
    "end": "562610"
  },
  {
    "text": "set it to webhook that's the only other value that is allowed if you set it to webhook you should define a verbal",
    "start": "562610",
    "end": "568459"
  },
  {
    "text": "client configuration that basically will point the API server to the service that",
    "start": "568459",
    "end": "573560"
  },
  {
    "text": "implements the web hook it's a service name it's a namespace and the connection",
    "start": "573560",
    "end": "579560"
  },
  {
    "text": "should be HTTP on under CTS port or otherwise it won't work so let's do a",
    "start": "579560",
    "end": "590060"
  },
  {
    "text": "demo so here what I'm going to do is I",
    "start": "590060",
    "end": "597980"
  },
  {
    "text": "have a C or D that has some versions in it and I can actually show you this erd",
    "start": "597980",
    "end": "606940"
  },
  {
    "text": "so it has v1 with some schema v2 with some schema and also I define the",
    "start": "606940",
    "end": "613339"
  },
  {
    "text": "conversion that is a service name and",
    "start": "613339",
    "end": "618410"
  },
  {
    "text": "the namespace so I'm going to create the CRD hopefully it works with the Wi-Fi",
    "start": "618410",
    "end": "629589"
  },
  {
    "text": "waiting",
    "start": "630190",
    "end": "633190"
  },
  {
    "text": "no doesn't work if you're on your phone downloading",
    "start": "636810",
    "end": "643669"
  },
  {
    "text": "something please stop let's see let's",
    "start": "643669",
    "end": "650509"
  },
  {
    "text": "see if I can connect to my phone hopefully that works I'll see",
    "start": "650509",
    "end": "657339"
  },
  {
    "text": "okay stop it I'm sorry the game",
    "start": "660630",
    "end": "666740"
  },
  {
    "text": "okay okay first so the theory is created",
    "start": "669110",
    "end": "674300"
  },
  {
    "text": "let's create a CR in CR one is only a you know CRD and it's a custom resource",
    "start": "674300",
    "end": "682580"
  },
  {
    "text": "in v1 so if we call it for instance one if we get it in v1 what happened yeah",
    "start": "682580",
    "end": "695740"
  },
  {
    "text": "let's do it again that's clean everything up",
    "start": "695890",
    "end": "702759"
  },
  {
    "text": "no Jason could be decoded that's good so",
    "start": "710190",
    "end": "715300"
  },
  {
    "text": "but bills keep that for it should be something there but I don't know why so",
    "start": "715300",
    "end": "721440"
  },
  {
    "text": "we try to actually create another C or D another CR this CR is actually has a",
    "start": "721440",
    "end": "727330"
  },
  {
    "text": "different version v2 and API server will return and or or say I can I can convert it because you know that we didn't",
    "start": "727330",
    "end": "736510"
  },
  {
    "text": "actually deploy our web cookie F so let's let's create our web book for",
    "start": "736510",
    "end": "742780"
  },
  {
    "text": "every need some our back rules to let the web hook access to it or I need to",
    "start": "742780",
    "end": "748540"
  },
  {
    "text": "talk about this verbal the one that I implemented here there is one actually a good example of web hook that is in our",
    "start": "748540",
    "end": "755050"
  },
  {
    "text": "end-to-end test you can look at that is simply do the conversion between house port and host and port it divided host",
    "start": "755050",
    "end": "761950"
  },
  {
    "text": "port into host and port in one version to the other this one I implemented here because we did a lot of you know we",
    "start": "761950",
    "end": "769450"
  },
  {
    "text": "spend a lot of time on declarative conversion I I told we can I can actually implement a web hook that do",
    "start": "769450",
    "end": "776500"
  },
  {
    "text": "the declarative conversion for us so the one that I implemented is a declarative",
    "start": "776500",
    "end": "782260"
  },
  {
    "text": "conversion based on this schema so basically it will listen to the C or DS it'll watch the RDS and cache this",
    "start": "782260",
    "end": "788920"
  },
  {
    "text": "scheme of different versions of c or DS and there are some tags in the schema that tells tells the converter how to",
    "start": "788920",
    "end": "795460"
  },
  {
    "text": "convert from one version to another so if anybody just want to rename for example that's the only operation is",
    "start": "795460",
    "end": "801640"
  },
  {
    "text": "supports right now it doesn't you don't need to write a book you can use my web book but this is not official this is",
    "start": "801640",
    "end": "808120"
  },
  {
    "text": "just a demo that I wrote for this talk so let's create the web hook so the web",
    "start": "808120",
    "end": "818080"
  },
  {
    "text": "hook is created and running so basically what we can do is we can actually look at look into the logs owned on that part",
    "start": "818080",
    "end": "825130"
  },
  {
    "text": "let me see if I can get v2 it works now so let's see if I can actually look at",
    "start": "825130",
    "end": "830860"
  },
  {
    "text": "the logs on that part",
    "start": "830860",
    "end": "834510"
  },
  {
    "text": "see what the webhook gets the namespaces",
    "start": "837130",
    "end": "846380"
  },
  {
    "text": "default this should work yes that's for",
    "start": "846380",
    "end": "852680"
  },
  {
    "text": "follow what the see let's see again",
    "start": "852680",
    "end": "857290"
  },
  {
    "text": "I see wait wait that's right",
    "start": "859820",
    "end": "865300"
  },
  {
    "text": "okay works so let me just follow the law so basically what what is sent to the",
    "start": "870930",
    "end": "878610"
  },
  {
    "text": "API to the web hook is a web hook request that is has a desired version",
    "start": "878610",
    "end": "884999"
  },
  {
    "text": "ApS ever wants a v2 and the object is passing is actually a v1 it has a field",
    "start": "884999",
    "end": "891209"
  },
  {
    "text": "call server and then the conversion actually renamed that to pass and and I",
    "start": "891209",
    "end": "897869"
  },
  {
    "text": "can actually show you the CRD to see how I defined it the schema of the v1 in the",
    "start": "897869",
    "end": "906360"
  },
  {
    "text": "description it has something like plus conversion from stable v2 renamed the host to this field that is server so",
    "start": "906360",
    "end": "916110"
  },
  {
    "text": "let's go back to the demo so now if I create cr2 that is in version 2 it will",
    "start": "916110",
    "end": "924660"
  },
  {
    "text": "create it it will convert it to be one and a story I can actually get it in v1 or v2 if you see the v1 has server and",
    "start": "924660",
    "end": "933749"
  },
  {
    "text": "the v2 has Haas in it here and here I'm",
    "start": "933749",
    "end": "938759"
  },
  {
    "text": "sorry and here and it's fun let's create a",
    "start": "938759",
    "end": "944730"
  },
  {
    "text": "third one and then listlessly stir everything when you list it actually we",
    "start": "944730",
    "end": "950429"
  },
  {
    "text": "listed in v1 when you listen v1 because the storage is we want no conversion is",
    "start": "950429",
    "end": "955709"
  },
  {
    "text": "required so all of the objects will return without any conversion but if I list in v2 it needs to convert all of",
    "start": "955709",
    "end": "963149"
  },
  {
    "text": "them actually to v2 and now if you look at me if you look at the logs for for",
    "start": "963149",
    "end": "971879"
  },
  {
    "text": "this conversion you see actually that a list of objects is sense to webhook for",
    "start": "971879",
    "end": "976980"
  },
  {
    "text": "conversion three objects sensible for conversion and three object returned in v2 it's very important to keep in mind",
    "start": "976980",
    "end": "983730"
  },
  {
    "text": "that this this list API server can't send any list and it doesn't need it doesn't mean that a user sent at least",
    "start": "983730",
    "end": "990420"
  },
  {
    "text": "request that we are sending a list of objects to webhook for any kind of optimization we can send more than one",
    "start": "990420",
    "end": "997350"
  },
  {
    "text": "object to the verb book for conversion and the webhook should convert them independently",
    "start": "997350",
    "end": "1005319"
  },
  {
    "start": "1006000",
    "end": "1006000"
  },
  {
    "text": "yeah one addition this Lepik of course it's caught in real time so it's not",
    "start": "1006340",
    "end": "1011480"
  },
  {
    "text": "like a version was created and be one and then there's one call once for this",
    "start": "1011480",
    "end": "1017060"
  },
  {
    "text": "object it's really on on request so on each chord when we add a new birth",
    "start": "1017060",
    "end": "1025280"
  },
  {
    "text": "that's what we do here in the first box on the left the question is when will",
    "start": "1025280",
    "end": "1031160"
  },
  {
    "text": "you when will you change the storage River so V 1 V 2 1 is new it's not the storage version so we we keep storage in",
    "start": "1031160",
    "end": "1038120"
  },
  {
    "text": "V alpha v 1 I for one and at some point",
    "start": "1038120",
    "end": "1043250"
  },
  {
    "text": "we want to switch as the question is when so I switch here so we want everyone get sports me one vita one gets",
    "start": "1043250",
    "end": "1049970"
  },
  {
    "text": "to this will not have any effect on objects in HC d so at CD it has objects",
    "start": "1049970",
    "end": "1057710"
  },
  {
    "text": "in V 1 I for one and they stay there so just on white so if you update an object",
    "start": "1057710",
    "end": "1062900"
  },
  {
    "text": "or create a new object then the storage version has an effect and everything which is written to a CD from this point",
    "start": "1062900",
    "end": "1068000"
  },
  {
    "text": "on will be in the new storage version at",
    "start": "1068000",
    "end": "1073429"
  },
  {
    "text": "some point you have to do migration obviously to make this easier we have in the status of the CAG a field called",
    "start": "1073429",
    "end": "1080480"
  },
  {
    "text": "stored version so we're like what all versions which have in storage version at some point in time and you can use",
    "start": "1080480",
    "end": "1087500"
  },
  {
    "text": "that yeah to know when it's necessary to to convert all objects which are maybe",
    "start": "1087500",
    "end": "1093200"
  },
  {
    "text": "in the old version and eventually when you decide everything is converted",
    "start": "1093200",
    "end": "1099410"
  },
  {
    "text": "migrated and you don't have me whenever one at all in the system anymore so it's it is completely updated then you can",
    "start": "1099410",
    "end": "1104750"
  },
  {
    "text": "say now let's switch off we want I for one so the first thing you do we switch",
    "start": "1104750",
    "end": "1110420"
  },
  {
    "text": "off the serving so the words are still known but a user controller whatever cannot retrieve it anymore that's the",
    "start": "1110420",
    "end": "1116990"
  },
  {
    "text": "first step and the last step would be just to delete server from the status",
    "start": "1116990",
    "end": "1122330"
  },
  {
    "text": "field it's very important to really think",
    "start": "1122330",
    "end": "1128780"
  },
  {
    "text": "about when to do those steps so in kubernetes when we introduce a new version we wait quite some time usually",
    "start": "1128780",
    "end": "1135950"
  },
  {
    "text": "at least in the release maybe two releases until we switch storage versions so easy simple users have to be",
    "start": "1135950",
    "end": "1143179"
  },
  {
    "text": "able to hold back and hold back means you installed server binary or controller by new whatever and it",
    "start": "1143179",
    "end": "1149929"
  },
  {
    "text": "doesn't know the new version but there might be versions objects in the in the system of the new version which was just",
    "start": "1149929",
    "end": "1156770"
  },
  {
    "text": "introduced with last lease so always wait one two releases just rule of thumb and we follow that in kubernetes so just",
    "start": "1156770",
    "end": "1164720"
  },
  {
    "text": "yeah yeah that's what you usually you shouldn't do you shouldn't just introduce a new version and directly",
    "start": "1164720",
    "end": "1170720"
  },
  {
    "text": "switch to storage storage migration I",
    "start": "1170720",
    "end": "1176179"
  },
  {
    "start": "1173000",
    "end": "1173000"
  },
  {
    "text": "sketched it already um it's very important to keep this in mind changing the storage work in the CID does not",
    "start": "1176179",
    "end": "1182240"
  },
  {
    "text": "mean at CD changes everything at least stays the same so you always have to do migration migration means you have to",
    "start": "1182240",
    "end": "1189500"
  },
  {
    "text": "write every object to a CD which means as a simplest case what we do in in who",
    "start": "1189500",
    "end": "1195020"
  },
  {
    "text": "Anita specific resources we just do an empty patch empty patch means nothing changes but TSM I to a CD so just list",
    "start": "1195020",
    "end": "1203000"
  },
  {
    "text": "all objects patch all of them without any change they have written back to a CD and you're fine so migration is done",
    "start": "1203000",
    "end": "1209980"
  },
  {
    "text": "at the moment this must be done by the developer of the controller of the CID",
    "start": "1209980",
    "end": "1215679"
  },
  {
    "text": "there's a tool in the works by some colleagues and API machinery for generic",
    "start": "1215679",
    "end": "1222169"
  },
  {
    "text": "mechanism for that but it's not ready I think but this will come so I will be in generic official way to do that at the",
    "start": "1222169",
    "end": "1230030"
  },
  {
    "text": "moment just be prepared to do migrations in your own code I mentioned already a",
    "start": "1230030",
    "end": "1239900"
  },
  {
    "start": "1236000",
    "end": "1236000"
  },
  {
    "text": "couple of times this is about data of the user so conversion means you change",
    "start": "1239900",
    "end": "1245929"
  },
  {
    "text": "representation of data and do not lose anything lot of yield",
    "start": "1245929",
    "end": "1251150"
  },
  {
    "text": "not a comma it's really important to get conversions right",
    "start": "1251150",
    "end": "1256520"
  },
  {
    "text": "it's not easy everybody who has done that outside of CDs in native resources to get some whites might take days many",
    "start": "1256520",
    "end": "1265550"
  },
  {
    "text": "reviews and many tests here's one pattern which is it's separate in",
    "start": "1265550",
    "end": "1271700"
  },
  {
    "text": "upstream in Internet resources we call it our tube tests so as idea is very",
    "start": "1271700",
    "end": "1277670"
  },
  {
    "text": "basic very simple we start with a v1 object in this example we put in just",
    "start": "1277670",
    "end": "1283850"
  },
  {
    "text": "random data so we have something that's called a father or fussing so we have a function which can further object with",
    "start": "1283850",
    "end": "1290540"
  },
  {
    "text": "random swings and all the structures to us were randomized then you convert for",
    "start": "1290540",
    "end": "1295700"
  },
  {
    "text": "example to be 1 Peter 1 to this middle one here and you come to convert back to",
    "start": "1295700",
    "end": "1301309"
  },
  {
    "text": "V 1 so back and force for born were v1 to another version and back to everyone and if conversion is correct it should",
    "start": "1301309",
    "end": "1308630"
  },
  {
    "text": "be the same object so this test can be of course repeated we do that a thousand",
    "start": "1308630",
    "end": "1314240"
  },
  {
    "text": "times with random objects and if this survives you conversion survives this",
    "start": "1314240",
    "end": "1319970"
  },
  {
    "text": "test you can be pretty sure that it works so our tube testing is very",
    "start": "1319970",
    "end": "1325130"
  },
  {
    "text": "important there are many many examples in kubernetes it's a source code you can",
    "start": "1325130",
    "end": "1330830"
  },
  {
    "text": "you can follow we also have some some library kind of testing Bible on that so",
    "start": "1330830",
    "end": "1337100"
  },
  {
    "text": "just take a look at the types we have in kubernetes for examples",
    "start": "1337100",
    "end": "1343030"
  },
  {
    "start": "1344000",
    "end": "1344000"
  },
  {
    "text": "so again as Stefan said round trip ability is very very important and I will discuss it before that I was just",
    "start": "1346120",
    "end": "1353590"
  },
  {
    "text": "going back to what I showed you actually the served version and I told you can",
    "start": "1353590",
    "end": "1359140"
  },
  {
    "text": "just remove a version that's because in the upgrading your storage when you are",
    "start": "1359140",
    "end": "1364960"
  },
  {
    "text": "done with a version and you want to remove it you should first set the flag to false you cannot remove it because",
    "start": "1364960",
    "end": "1371230"
  },
  {
    "text": "the version is still available in s CD and a PI server will not to let you do",
    "start": "1371230",
    "end": "1376450"
  },
  {
    "text": "that because the stored version of the status has the version and it will not allow you to remove the version so what",
    "start": "1376450",
    "end": "1382419"
  },
  {
    "text": "you should do is disable the version so no other new a request comes for that",
    "start": "1382419",
    "end": "1387580"
  },
  {
    "text": "version upgrade your storage update the status stored version to remove that",
    "start": "1387580",
    "end": "1393340"
  },
  {
    "text": "version from it first and then remove it from there version space so what can go",
    "start": "1393340",
    "end": "1398470"
  },
  {
    "text": "wrong your webhook may stop working for any reason you know there's no connection",
    "start": "1398470",
    "end": "1404590"
  },
  {
    "text": "between a PI server and webhook what will happen is very important to understand the web who calls is on",
    "start": "1404590",
    "end": "1410440"
  },
  {
    "text": "demand so if they are failing everything else works just that C or D that C or",
    "start": "1410440",
    "end": "1417070"
  },
  {
    "text": "that you're trying to access an e and needs conversion will fail so other",
    "start": "1417070",
    "end": "1422649"
  },
  {
    "text": "types works if you request for the C are in the same version as a storage it will",
    "start": "1422649",
    "end": "1427809"
  },
  {
    "text": "work if you try to store it in the same version as storage it will work but if it needs a conversion it will fail so",
    "start": "1427809",
    "end": "1434970"
  },
  {
    "text": "for emergency you can actually try to get the C are in different versions to see which version is the storage version",
    "start": "1434970",
    "end": "1441789"
  },
  {
    "text": "even if you don't know that sometimes looking at C or D doesn't help you because you don't know when they see are",
    "start": "1441789",
    "end": "1447820"
  },
  {
    "text": "when they see or is stored what storage version was at that time but you can just try a different version to see",
    "start": "1447820",
    "end": "1453039"
  },
  {
    "text": "which one it working and patch it or do whatever we want with it to make it work but you should make the web book works",
    "start": "1453039",
    "end": "1460240"
  },
  {
    "text": "as soon as possible and conversion can fail for a subset of C or sued your web",
    "start": "1460240",
    "end": "1465700"
  },
  {
    "text": "book may still work for you know the connection can be available between a PI",
    "start": "1465700",
    "end": "1470980"
  },
  {
    "text": "server and the web book what the vehicle conversion may fail for some CCR's the same concept only fails for those ers",
    "start": "1470980",
    "end": "1477070"
  },
  {
    "text": "nothing else the the last one is actually webhook",
    "start": "1477070",
    "end": "1482499"
  },
  {
    "text": "returns that conversion here it's something that is not drawn three pible",
    "start": "1482499",
    "end": "1488409"
  },
  {
    "text": "and again putting a stress on this because this is a failure that you don't",
    "start": "1488409",
    "end": "1493509"
  },
  {
    "text": "see if something goes wrong this is a logical failure you don't see an error from cue cuttle or an api things will",
    "start": "1493509",
    "end": "1501190"
  },
  {
    "text": "work seems to be working normally but you will have data loss users data does",
    "start": "1501190",
    "end": "1506799"
  },
  {
    "text": "so very very important to run tests on run trip ability because this is not something that you can catch in",
    "start": "1506799",
    "end": "1513309"
  },
  {
    "text": "production easily so we'll have more",
    "start": "1513309",
    "end": "1518440"
  },
  {
    "text": "more about this in capi machinery deep dives if you are interested please come",
    "start": "1518440",
    "end": "1525399"
  },
  {
    "text": "and available to discuss more implementation details of that what's",
    "start": "1525399",
    "end": "1532710"
  },
  {
    "text": "beyond this what are we going to work on in 2019 so basically the plan is to make",
    "start": "1532710",
    "end": "1541330"
  },
  {
    "text": "the C or D conversion SCR these generally as a ga feature they are a",
    "start": "1541330",
    "end": "1546580"
  },
  {
    "text": "couple of you know blocking issues that we are working on CR D conversion and",
    "start": "1546580",
    "end": "1552999"
  },
  {
    "text": "versioning is still alpha it should be better in 1:14 and it should be GA",
    "start": "1552999",
    "end": "1558269"
  },
  {
    "text": "version or two after that there is an issue 586 a 2 if you're interested just",
    "start": "1558269",
    "end": "1564070"
  },
  {
    "text": "look at that issued or list of things that we are working on these stuff blockers and lists of things that we",
    "start": "1564070",
    "end": "1569289"
  },
  {
    "text": "wish we want to work on and some people like to work on but the main ones that",
    "start": "1569289",
    "end": "1576610"
  },
  {
    "text": "blocks GA is generating of an API spec for C or DS actually open if you see are",
    "start": "1576610",
    "end": "1584440"
  },
  {
    "text": "these needs to actually provide their schema true through the validation",
    "start": "1584440",
    "end": "1589450"
  },
  {
    "text": "schema that we are calling a schema perversion right now but we are not serving it if you're providing the",
    "start": "1589450",
    "end": "1596470"
  },
  {
    "text": "schema is not served for kube Cottle and other you know other client generator",
    "start": "1596470",
    "end": "1601840"
  },
  {
    "text": "for example so that's something that we are working on it barely actually missed 1:13 is going to be in 114 Kota support",
    "start": "1601840",
    "end": "1609879"
  },
  {
    "text": "is very important defaulting and pruning something that we have a designer for and the conversion conversation is",
    "start": "1609879",
    "end": "1615060"
  },
  {
    "text": "actually going on on it and there are a number of smaller issues but these are these are the main ones that we are",
    "start": "1615060",
    "end": "1621900"
  },
  {
    "text": "working on yes this issue which is listed there has many many more topics and some days ago it was updated so we",
    "start": "1621900",
    "end": "1630330"
  },
  {
    "text": "have discussion what is really needed for GA and as media showed those those other points here there many more and",
    "start": "1630330",
    "end": "1638150"
  },
  {
    "text": "some of them are completely undecided which means there's no consensus most of them have no proposal attached so I",
    "start": "1638150",
    "end": "1647130"
  },
  {
    "text": "listed some here if there are some which are really critical for you come to us come to the sick meeting if you're able",
    "start": "1647130",
    "end": "1654800"
  },
  {
    "text": "write a proposal for that starts a discussion we know we cannot do all of",
    "start": "1654800",
    "end": "1660270"
  },
  {
    "text": "that in to 2019 that's why we have selected so was here those are we leave we won't go to GA",
    "start": "1660270",
    "end": "1667320"
  },
  {
    "text": "before those are sort of that's basically the plan or what you want to do ya see a conversion so this is kind",
    "start": "1667320",
    "end": "1676560"
  },
  {
    "start": "1673000",
    "end": "1673000"
  },
  {
    "text": "of a take away slight so they're books that's what we have now it's IFR this",
    "start": "1676560",
    "end": "1683550"
  },
  {
    "text": "means in 1:13 you have to enable it manually there's a feature I get for that you can play with it but of course",
    "start": "1683550",
    "end": "1689460"
  },
  {
    "text": "it's not ready for production as Midea said we plan to enable that as Peter so",
    "start": "1689460",
    "end": "1694770"
  },
  {
    "text": "it's a between every cluster which has PDF features in the next release let's",
    "start": "1694770",
    "end": "1700560"
  },
  {
    "text": "see if I for face what goes well this is a plan the eye sees a picture of the",
    "start": "1700560",
    "end": "1708120"
  },
  {
    "text": "architecture and yeah cannot be said often enough conversion is not easy it's",
    "start": "1708120",
    "end": "1714720"
  },
  {
    "text": "hard to get it right but it's about user data so this is really important so take",
    "start": "1714720",
    "end": "1720090"
  },
  {
    "text": "care all to the ability it's important point here and what I you know discussed",
    "start": "1720090",
    "end": "1726540"
  },
  {
    "text": "what most of the discussion was around the declarative conversion the people that like that was mostly because of the",
    "start": "1726540",
    "end": "1733410"
  },
  {
    "text": "round trip ability because we can actually make sure a declarative conversion is round trip able but",
    "start": "1733410",
    "end": "1739170"
  },
  {
    "text": "Vanessa web book we as API server as kubernetes cannot have any guaranteed as",
    "start": "1739170",
    "end": "1745690"
  },
  {
    "text": "we are calling into a web hook and the conversion is happening there so it's up to the web developer to make sure that",
    "start": "1745690",
    "end": "1751390"
  },
  {
    "text": "it's renewable and the conversion is logically correct I you know I will put",
    "start": "1751390",
    "end": "1758830"
  },
  {
    "text": "all of the codes and demos on my github page if you like to know to see what how",
    "start": "1758830",
    "end": "1764140"
  },
  {
    "text": "I did it or if you'll contribute add adding some you know operators to it or see how it's done it will be available",
    "start": "1764140",
    "end": "1769809"
  },
  {
    "text": "and my github page yeah I think we will just like so we are some minutes for",
    "start": "1769809",
    "end": "1776230"
  },
  {
    "text": "questions okay is there a microphone",
    "start": "1776230",
    "end": "1781299"
  },
  {
    "text": "around since that I can I can repeat the question",
    "start": "1781299",
    "end": "1787529"
  },
  {
    "text": "yeah so we have admission mutating",
    "start": "1795630",
    "end": "1801720"
  },
  {
    "text": "admission webhooks can be used for defaulting today so there is a way admission is not really where you should",
    "start": "1801720",
    "end": "1808650"
  },
  {
    "text": "do that I'm a I'm a few point of you the proposal we have is about",
    "start": "1808650",
    "end": "1814679"
  },
  {
    "text": "declarative so they have in the open API validation you get just a field default and you want to apply that in the deep",
    "start": "1814679",
    "end": "1827010"
  },
  {
    "text": "dive I have a slight we're defaulting is done so maybe you come there you will see it yes",
    "start": "1827010",
    "end": "1835760"
  },
  {
    "text": "so the change itself is not transferable so when you change something for example",
    "start": "1845380",
    "end": "1850670"
  },
  {
    "text": "of renaming something renaming a field is run through pible because when you go from v1 it yeah it depends a lot on the",
    "start": "1850670",
    "end": "1863930"
  },
  {
    "text": "operation you use all operations should be should have an inverse right this can",
    "start": "1863930",
    "end": "1871250"
  },
  {
    "text": "be easy in some cases rename can be in the inverted of obviously but there are cases where as it's not possible there",
    "start": "1871250",
    "end": "1879860"
  },
  {
    "text": "are long long discussions for native types if this happens sometimes one has to accept it that something wakes can",
    "start": "1879860",
    "end": "1886940"
  },
  {
    "text": "also happen in the example is host port so having host and port in one version",
    "start": "1886940",
    "end": "1894530"
  },
  {
    "text": "and having one string proposed in the other one it's also important",
    "start": "1894530",
    "end": "1899590"
  },
  {
    "text": "virgins yes okay but this is about it's always just about",
    "start": "1905649",
    "end": "1912350"
  },
  {
    "text": "to see a teasers the meta level I know and exactly about this question there is",
    "start": "1912350",
    "end": "1919299"
  },
  {
    "text": "there was a proposal was I know a thousand comments how to get set White's",
    "start": "1919299",
    "end": "1926559"
  },
  {
    "text": "he talked about we only one top-level schema or",
    "start": "1926559",
    "end": "1933100"
  },
  {
    "text": "especially Birds in schema not goes we cannot mix them there's a long discussion about that",
    "start": "1933100",
    "end": "1938270"
  },
  {
    "text": "maybe it's it's nice to read that to really understand how to solve this case so it's complicated",
    "start": "1938270",
    "end": "1943610"
  },
  {
    "text": "and one has to put invariance I want two types like this is a top level or",
    "start": "1943610",
    "end": "1949309"
  },
  {
    "text": "version to make it a little bit so it's important to look at it this way",
    "start": "1949309",
    "end": "1955100"
  },
  {
    "text": "yes the CR DS if you're talking about the conversion of see ours here but C or",
    "start": "1955100",
    "end": "1960169"
  },
  {
    "text": "D is an object in our system and that's we need to be around three people but when we store it still in the old",
    "start": "1960169",
    "end": "1966770"
  },
  {
    "text": "version and run going from old version to new version and coming back to the old version is always round-trip ago",
    "start": "1966770",
    "end": "1972559"
  },
  {
    "text": "right now when we change the storage then we need to actually keep her versions even if many we are going to v1",
    "start": "1972559",
    "end": "1979340"
  },
  {
    "text": "even if you're doing that we need to somehow keep the information to make it round three people but right now we are",
    "start": "1979340",
    "end": "1985010"
  },
  {
    "text": "storing in in all versions so we don't have the round strippable problem yet but if we store in new version that's",
    "start": "1985010",
    "end": "1990980"
  },
  {
    "text": "yes maybe the answer for your question so we have we had cases many cases where we use annotations so we move new fields",
    "start": "1990980",
    "end": "1998179"
  },
  {
    "text": "into annotations in the old version that's one solution it's not secure",
    "start": "1998179",
    "end": "2003279"
  },
  {
    "text": "because those are not protected sometimes for native resources so there are many consequences in other cases we",
    "start": "2003279",
    "end": "2009549"
  },
  {
    "text": "also edit the new fields in the old position just to makes us want to probability possible so you change the",
    "start": "2009549",
    "end": "2017649"
  },
  {
    "text": "old version clients will maybe just to observe you I mean the feeds are there",
    "start": "2017649",
    "end": "2023049"
  },
  {
    "text": "as they are returned by as a request response but the clients don't have them",
    "start": "2023049",
    "end": "2028539"
  },
  {
    "text": "in there and I go along struck so they dropped them on decoding so this odds way but there's a long discussion around",
    "start": "2028539",
    "end": "2034570"
  },
  {
    "text": "that how to do that in Cuba needs in general it's not a CID problem it's a general",
    "start": "2034570",
    "end": "2041460"
  }
]