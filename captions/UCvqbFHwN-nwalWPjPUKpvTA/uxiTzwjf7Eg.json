[
  {
    "start": "0",
    "end": "56000"
  },
  {
    "text": "alright it looks like our numbers have stabilized so let's go ahead and get started welcome everyone to today's CN",
    "start": "30",
    "end": "5790"
  },
  {
    "text": "CF webinar Canary deployments with kubernetes and sto I'm Kaitlin Barnard",
    "start": "5790",
    "end": "10920"
  },
  {
    "text": "marketing manager for CNCs and I'd like to thank you all for joining us today I'd also like to welcome today's",
    "start": "10920",
    "end": "17400"
  },
  {
    "text": "presenter Jason Yee who's a Technical Evangelist at data dawg so just a few",
    "start": "17400",
    "end": "23039"
  },
  {
    "text": "housekeeping items before we get started during the webinar you're not able to talk as an attendee so if you have any",
    "start": "23039",
    "end": "29609"
  },
  {
    "text": "questions or comments throughout the webinar there is a chat a chat box and a",
    "start": "29609",
    "end": "34649"
  },
  {
    "text": "Q&A box at the bottom of your screen so please drop any questions that you have in there and we'll get to as many as we",
    "start": "34649",
    "end": "40890"
  },
  {
    "text": "can at the end and just a reminder that the session is being recorded and will",
    "start": "40890",
    "end": "45930"
  },
  {
    "text": "be sent out afterwards along with the slides within about 24 hours and with",
    "start": "45930",
    "end": "51899"
  },
  {
    "text": "that I'll hand it over to Jason to kick off today's presentation thanks Caitlin",
    "start": "51899",
    "end": "57680"
  },
  {
    "start": "56000",
    "end": "436000"
  },
  {
    "text": "welcome everyone so hopefully you're here to hear about deployments so",
    "start": "57680",
    "end": "65150"
  },
  {
    "text": "deployments right what could possibly go wrong that's a stupid question",
    "start": "65150",
    "end": "71180"
  },
  {
    "text": "because the answer is obviously a lot that's why you're all on this call",
    "start": "71180",
    "end": "76729"
  },
  {
    "text": "anybody who's ever made a deployment has inevitably like encountered a problem",
    "start": "76729",
    "end": "81840"
  },
  {
    "text": "whenever I talk and I'm in front of an audience I usually ask people that you know who's experienced a deploy issue",
    "start": "81840",
    "end": "88619"
  },
  {
    "text": "today or this week or this month and inevitably by the time you get to the",
    "start": "88619",
    "end": "94829"
  },
  {
    "text": "point of like this month everybody's raised their hands for that because it's it's really obvious that",
    "start": "94829",
    "end": "101820"
  },
  {
    "text": "deployment as much as we try to make them go flawlessly there's always problems and so I like to bring up this",
    "start": "101820",
    "end": "109770"
  },
  {
    "text": "meme that it's the most interesting man in the world it was at Osakis campaign but adapted",
    "start": "109770",
    "end": "116340"
  },
  {
    "text": "for tech the meme is when I do blank I do it in production because oftentimes we do silly things and we just do them",
    "start": "116340",
    "end": "123810"
  },
  {
    "text": "straight in production without even try trying things and staging or things like that you know it's kind of this bravado",
    "start": "123810",
    "end": "129979"
  },
  {
    "text": "but the problem when it comes to deployments is that deploy to production you always do that",
    "start": "129979",
    "end": "135880"
  },
  {
    "text": "in production so as close as we try to get test environments and staging",
    "start": "135880",
    "end": "142420"
  },
  {
    "text": "environments and developer environments all looking exactly the same you still",
    "start": "142420",
    "end": "148120"
  },
  {
    "text": "end up deploying bad things to production and some of that really isn't even the code that you're deploying",
    "start": "148120",
    "end": "154030"
  },
  {
    "text": "being bad it could pass all the tests and it could simply be that you know developers thought that users would use",
    "start": "154030",
    "end": "160780"
  },
  {
    "text": "the application or the product in a certain way and you deploy and everything passes the tests and deploys",
    "start": "160780",
    "end": "167410"
  },
  {
    "text": "cleanly only to find out that it's a there's a fundamental flaw with how we think our users are actually going to be",
    "start": "167410",
    "end": "173710"
  },
  {
    "text": "using our application so that's why it's basically impossible to guarantee",
    "start": "173710",
    "end": "179610"
  },
  {
    "text": "against deploying bad code or code that doesn't work the way we think it should",
    "start": "179610",
    "end": "185980"
  },
  {
    "text": "and I think that's why canary deployments and using a canary deployment strategy should be critical",
    "start": "185980",
    "end": "192880"
  },
  {
    "text": "and should be the strategy that we adopt for every single deployment that we do moving forward and I'll be showing you",
    "start": "192880",
    "end": "200800"
  },
  {
    "text": "with with kubernetes and SEO how that can be a much easier process so a little",
    "start": "200800",
    "end": "209860"
  },
  {
    "text": "bit about me before I dive into this I am Jason and a Technical Evangelist at data dog I like to say that my job is",
    "start": "209860",
    "end": "217150"
  },
  {
    "text": "essentially Docs and talks so I help out with a technical documentation I do",
    "start": "217150",
    "end": "222550"
  },
  {
    "text": "quite a bit of code side maintaining some integrations and things like that and I also travel around to events and",
    "start": "222550",
    "end": "229480"
  },
  {
    "text": "do webinars and essentially do a lot of the community outreach for for data dog so both as someone who gets to go out",
    "start": "229480",
    "end": "237190"
  },
  {
    "text": "there and espouse cool technologies and you know promote monitoring in general",
    "start": "237190",
    "end": "242470"
  },
  {
    "text": "but also someone who can take your needs and relate those back to our product teams within data dog aside from that I",
    "start": "242470",
    "end": "250480"
  },
  {
    "text": "am a nomad so I travel around so bones rolled in Montreal currently in Montreal",
    "start": "250480",
    "end": "257919"
  },
  {
    "text": "but I've been traveling around it's been about one city every week so I'll be in Portland Oregon next week if you're in",
    "start": "257919",
    "end": "265000"
  },
  {
    "text": "Portland hit me up I'd love to say hi but I'll be traveling around for for the rest of the",
    "start": "265000",
    "end": "271360"
  },
  {
    "text": "year into December and then I plan on settling gonnigan also do love whisky so",
    "start": "271360",
    "end": "277180"
  },
  {
    "text": "that's a photo of my favorite whiskey that's available and also am totally",
    "start": "277180",
    "end": "282700"
  },
  {
    "text": "obsessed with Pokemon goes so if you play that's my friend code feel free to friend me I will send you",
    "start": "282700",
    "end": "288010"
  },
  {
    "text": "gifts from around the world a little bit about data dog data dog is SAS based",
    "start": "288010",
    "end": "295390"
  },
  {
    "text": "monitoring platforms so we do monitoring what you traditionally think of as monitoring with metrics automated alerts",
    "start": "295390",
    "end": "301840"
  },
  {
    "text": "but we also do APM so we'll do distributed tracing we also do log analytics which is our latest product to",
    "start": "301840",
    "end": "309280"
  },
  {
    "text": "give you an idea of the scale on the metrics side we handle trillions of metrics points of data every single day",
    "start": "309280",
    "end": "315520"
  },
  {
    "text": "if you count traces and logging then that number is just astronomically huge",
    "start": "315520",
    "end": "321450"
  },
  {
    "text": "we are hiring so if you are considering",
    "start": "321450",
    "end": "327220"
  },
  {
    "text": "a new opportunity if you'd like to help build amazing tools that help other engineers be better at their jobs we are",
    "start": "327220",
    "end": "335200"
  },
  {
    "text": "hiring so take a look at that link and just to give you a caveat as we talk about this we do do Khmer u2 plays",
    "start": "335200",
    "end": "341320"
  },
  {
    "text": "within data dog we are running kubernetes almost all of our services are running on kubernetes now we have",
    "start": "341320",
    "end": "348190"
  },
  {
    "text": "been playing a lot with this deal and working on that so our what we call our compute team which is our infrastructure",
    "start": "348190",
    "end": "353770"
  },
  {
    "text": "team they've been doing a lot and contributing contributing back to the is do project around the multi cluster",
    "start": "353770",
    "end": "361000"
  },
  {
    "text": "abilities so all of this said before we",
    "start": "361000",
    "end": "366820"
  },
  {
    "text": "launch into this talk Kelsey Hightower back in February gave this warning that SDO is very early project don't run out",
    "start": "366820",
    "end": "374530"
  },
  {
    "text": "and try to deploy it in production because you'll end up on the news in a bad way and this was when sto was still",
    "start": "374530",
    "end": "381790"
  },
  {
    "text": "version 0.8 so I'd like to update this I",
    "start": "381790",
    "end": "386980"
  },
  {
    "text": "haven't talked with Kelsey about his CEO recently but sto is now 1.0 in fact it's one point 0.2 and one point 0.3 is going",
    "start": "386980",
    "end": "394630"
  },
  {
    "text": "to be coming out soon the api's are mostly stable you'll notice in the Yama",
    "start": "394630",
    "end": "399700"
  },
  {
    "text": "files there's a couple spots where it still says alpha which means that theoretically they could change but at",
    "start": "399700",
    "end": "405310"
  },
  {
    "text": "this point sto is stable enough that you should be really considering whether you need a service mesh and it you do which",
    "start": "405310",
    "end": "412030"
  },
  {
    "text": "I think most people are running kubernetes in large-scale environments with alumni micro services I think those",
    "start": "412030",
    "end": "418660"
  },
  {
    "text": "people do need service meshes so if that's you it's something that you should consider going out and and trying",
    "start": "418660",
    "end": "425890"
  },
  {
    "text": "and playing with because I think it'll solve a lot of the problems that you either currently have or will have as",
    "start": "425890",
    "end": "431320"
  },
  {
    "text": "you grow out a large micro services distributed architecture so let's talk",
    "start": "431320",
    "end": "438640"
  },
  {
    "start": "436000",
    "end": "655000"
  },
  {
    "text": "about how we're doing deploys currently blue green deploys very very common",
    "start": "438640",
    "end": "444520"
  },
  {
    "text": "practice these days on how to deploy software if you're not familiar with blue green it really doesn't matter what",
    "start": "444520",
    "end": "451270"
  },
  {
    "text": "color it is I've heard people call these red black I've heard it all all sorts of colors across the entire color spectrum",
    "start": "451270",
    "end": "458200"
  },
  {
    "text": "but the concept is very simple you start with version 1 of your application and",
    "start": "458200",
    "end": "463300"
  },
  {
    "text": "you have version 2 sitting in the sidelines it's deployed on infrastructure but it's hidden behind",
    "start": "463300",
    "end": "468490"
  },
  {
    "text": "some sort of load balancer and when you want to deploy that in software you simply make a change to that load",
    "start": "468490",
    "end": "474430"
  },
  {
    "text": "balancer that load balancer could be something as simple as a DMS entry or it",
    "start": "474430",
    "end": "479830"
  },
  {
    "text": "could be even on the software level if we think about how Capistrano deploys weren't Capistrano really was just using",
    "start": "479830",
    "end": "486790"
  },
  {
    "text": "symlinks here so you would sim link you know for example your dub dub dub folder",
    "start": "486790",
    "end": "492130"
  },
  {
    "text": "for web application from one folder to another and now your new application",
    "start": "492130",
    "end": "497200"
  },
  {
    "text": "would be deployed and this was great at the time because they offered this pro",
    "start": "497200",
    "end": "502300"
  },
  {
    "text": "of having basically zero downtime deploys right in the time that it took",
    "start": "502300",
    "end": "507820"
  },
  {
    "text": "to just make that switch from a load balancer or DNS or symlink really you",
    "start": "507820",
    "end": "514570"
  },
  {
    "text": "had no downtime and it always promised easy roll backs right if I need a to roll back from version 2 back to version",
    "start": "514570",
    "end": "520960"
  },
  {
    "text": "1 well I could just go into my load balancer settings or some one of my other settings and make that flip back",
    "start": "520960",
    "end": "527980"
  },
  {
    "text": "and now all traffic's were getting directed to that old version of my software",
    "start": "527980",
    "end": "533270"
  },
  {
    "text": "I like to say that the idea of this was a giant undo button right you can make that simple change but the cons of it",
    "start": "533270",
    "end": "542360"
  },
  {
    "text": "we're always this easy wall backs and I say that in air quotes because as anybody who's ever deployed a lot with",
    "start": "542360",
    "end": "549380"
  },
  {
    "text": "Bluegreen nose you know that it's it's one of those things that when you make",
    "start": "549380",
    "end": "555020"
  },
  {
    "text": "that change and you move back yes your code is now looking at the old version of code but our applications are never",
    "start": "555020",
    "end": "561560"
  },
  {
    "text": "truly stateless right we have data that's stored along with them so you always have this issue that you know one",
    "start": "561560",
    "end": "568460"
  },
  {
    "text": "of your updates may have made an update to a data store like a database schema and now when you do this rollback",
    "start": "568460",
    "end": "574670"
  },
  {
    "text": "suddenly those queries that used to work with the old state of your data no",
    "start": "574670",
    "end": "580130"
  },
  {
    "text": "longer works with with the current state of your data because it's been updated and your date",
    "start": "580130",
    "end": "587440"
  },
  {
    "text": "stores are much harder all back and so things inevitably break if you're using",
    "start": "587440",
    "end": "593300"
  },
  {
    "text": "kubernetes well the nice thing is kubernetes uses a process called rolling deployments so rolling deployments are",
    "start": "593300",
    "end": "600410"
  },
  {
    "text": "quite a bit better than Bluegreen so for if we're looking at rolling deployments",
    "start": "600410",
    "end": "605870"
  },
  {
    "text": "how does that look well it's similar in a sense to Bluegreen you have a bunch of now replicas",
    "start": "605870",
    "end": "611480"
  },
  {
    "text": "replicas of one version of your software but similarly you have a load balancer sitting there and this would be",
    "start": "611480",
    "end": "618260"
  },
  {
    "text": "kubernetes itself if you're running that and you simply remove one of your old",
    "start": "618260",
    "end": "623570"
  },
  {
    "text": "versions and spin up one of your new versions and you keep doing this until all of your your replicas are rolled",
    "start": "623570",
    "end": "631160"
  },
  {
    "text": "over and one of the nice things now is that again this provides us with almost no downtime but similarly because we're",
    "start": "631160",
    "end": "638030"
  },
  {
    "text": "having a support version 1 and version 2 of the software at the same time it means it forces our developers or our",
    "start": "638030",
    "end": "644600"
  },
  {
    "text": "DBA is to keep that data store accessible and compatible with both",
    "start": "644600",
    "end": "650390"
  },
  {
    "text": "versions of our software so that makes things a lot easier if we do need to rollback so then what is a canary",
    "start": "650390",
    "end": "658670"
  },
  {
    "start": "655000",
    "end": "747000"
  },
  {
    "text": "deployment well a canary deployment is really the idea that if I have a problem",
    "start": "658670",
    "end": "663800"
  },
  {
    "text": "if I do something really stupid do I want that to be in front of a very large audience or would",
    "start": "663800",
    "end": "669170"
  },
  {
    "text": "I rather constrain that and have it to a very small audience similarly if I were on this this webinar and I say something",
    "start": "669170",
    "end": "675770"
  },
  {
    "text": "really ridiculous and stupid or I say something wrong well I rather say that",
    "start": "675770",
    "end": "681050"
  },
  {
    "text": "if there's only one of you on this call but obviously there's a there's a lot of people and they'd have joined us today",
    "start": "681050",
    "end": "686300"
  },
  {
    "text": "so if I make a mistake the ramifications are much larger so canary two plays",
    "start": "686300",
    "end": "693230"
  },
  {
    "text": "really do look similar to rolling deploys you have a bunch of replicas of one version of your software you have",
    "start": "693230",
    "end": "700370"
  },
  {
    "text": "your load balancer essentially redirect some of your your users to a new version",
    "start": "700370",
    "end": "706460"
  },
  {
    "text": "as you tear down your old version and you spin up that new version but rather than continuing this you pause and you",
    "start": "706460",
    "end": "713330"
  },
  {
    "text": "monitor so this is one of the areas that Akuma Nettie's unfortunately is really good at rolling deploys because it's",
    "start": "713330",
    "end": "719750"
  },
  {
    "text": "very fast it doesn't really give you the opportunity to pause and to monitor but",
    "start": "719750",
    "end": "726590"
  },
  {
    "text": "with carry employment then we would continue on if everything looks okay if our monitoring system say hey this looks",
    "start": "726590",
    "end": "731810"
  },
  {
    "text": "exactly want it to you continue and then you pause again and you double check and you keep going",
    "start": "731810",
    "end": "738740"
  },
  {
    "text": "pausing occasionally to see and to check your metrics right so think of it as a",
    "start": "738740",
    "end": "744320"
  },
  {
    "text": "slow rolled deploy and when you're done then it's obviously time to party so",
    "start": "744320",
    "end": "752510"
  },
  {
    "start": "747000",
    "end": "864000"
  },
  {
    "text": "canary deploys are fantastic because they limit the scope of what we're doing in case we have a problems we're",
    "start": "752510",
    "end": "759110"
  },
  {
    "text": "limiting our blast radius there's far fewer ramifications when we only expose",
    "start": "759110",
    "end": "764300"
  },
  {
    "text": "a small group of users to a potential problem they also provide us those easier rollbacks similar to what we saw",
    "start": "764300",
    "end": "771380"
  },
  {
    "text": "the rolling deployment but with by having this this graduated or the stepped approach it allows us to roll",
    "start": "771380",
    "end": "777920"
  },
  {
    "text": "back whenever we see problems or to it even not even roll back but just to",
    "start": "777920",
    "end": "783020"
  },
  {
    "text": "pause to actually look into things when we see something that might be erroneous",
    "start": "783020",
    "end": "789370"
  },
  {
    "text": "another thing that a lot of people don't take advantage of when they're doing canary deploys but I think is a",
    "start": "789370",
    "end": "795800"
  },
  {
    "text": "fantastic feature is that it's much more load tolerant when we talk",
    "start": "795800",
    "end": "800810"
  },
  {
    "text": "about things like kubernetes or going to the cloud whether that's managed kubernetes something like eks in amazon",
    "start": "800810",
    "end": "807529"
  },
  {
    "text": "or or gks and google or any of the other managed providers or whether that's just",
    "start": "807529",
    "end": "812960"
  },
  {
    "text": "running your own kubernetes on top of cloud infrastructure one of the nice",
    "start": "812960",
    "end": "818480"
  },
  {
    "text": "things is as we roll things out if we see that it's having increased demand on",
    "start": "818480",
    "end": "823700"
  },
  {
    "text": "our resources it gives us a chance to actually scale those up right so if",
    "start": "823700",
    "end": "829130"
  },
  {
    "text": "suddenly I see that whatever my new deployment is maybe it's a fantastic deployed I'm seeing thousands more users",
    "start": "829130",
    "end": "836210"
  },
  {
    "text": "hit my application because it's a much better version of my application well now it can scale up those resources and",
    "start": "836210",
    "end": "844550"
  },
  {
    "text": "another thing that canary deployments provide is concurrency so as you're able to roll out multiple versions of your",
    "start": "844550",
    "end": "851270"
  },
  {
    "text": "application you can start to concurrently roll those out you can do things like a be testing figuring out",
    "start": "851270",
    "end": "857540"
  },
  {
    "text": "which new feature when you roll it out which one actually has better performance or engages your users more",
    "start": "857540",
    "end": "865360"
  },
  {
    "start": "864000",
    "end": "1149000"
  },
  {
    "text": "so that's the the whys of canary to plays let's talk about how we should think about the strategies of how we",
    "start": "865570",
    "end": "872240"
  },
  {
    "text": "actually can implement this so some of the strategies when you think about Canaria deployments you really should",
    "start": "872240",
    "end": "878540"
  },
  {
    "text": "focus on your end users right your end users are the reason that you have your",
    "start": "878540",
    "end": "884120"
  },
  {
    "text": "job that you're doing what you do whether those are external to your organization or internal but you should",
    "start": "884120",
    "end": "890900"
  },
  {
    "text": "think about how you choose the sample sets those subsets where you deploy that canary deployment and so number one way",
    "start": "890900",
    "end": "897830"
  },
  {
    "text": "that most people choose to do things is random right you just say I'm gonna randomly send 5% of my users to my new",
    "start": "897830",
    "end": "905959"
  },
  {
    "text": "deployment random unfortunately as we all know anybody who's ever worked with technology we know that computers are",
    "start": "905959",
    "end": "912560"
  },
  {
    "text": "very very bad at random numbers right there's always some sort of issue",
    "start": "912560",
    "end": "917930"
  },
  {
    "text": "whether that's people forgetting to seed random or other things but random usually doesn't give us the results that",
    "start": "917930",
    "end": "924740"
  },
  {
    "text": "we want so I highly recommend you think about representative sets so",
    "start": "924740",
    "end": "931910"
  },
  {
    "text": "representative sets essentially means again keep your focus on your end users how are your end users going to be using your application",
    "start": "931910",
    "end": "938630"
  },
  {
    "text": "think about their geography where in the world are they right for example I'm currently in Montreal which is North",
    "start": "938630",
    "end": "945840"
  },
  {
    "text": "America or eastern North America time but if I'm going to roll out a new",
    "start": "945840",
    "end": "952110"
  },
  {
    "text": "feature and it particularly targets or it particularly highlights uses that for",
    "start": "952110",
    "end": "958440"
  },
  {
    "text": "example my customer base in Australia might be using well I have to think about where they're at and what time is",
    "start": "958440",
    "end": "964800"
  },
  {
    "text": "it in the world right so if I deploy this and I have a canary deployment and I look at and say hey it looks like",
    "start": "964800",
    "end": "971040"
  },
  {
    "text": "everything's fine resource usage is perfectly normal but it turns out well those people are all",
    "start": "971040",
    "end": "977430"
  },
  {
    "text": "asleep then it's not a useful canary deployment also consider the usage",
    "start": "977430",
    "end": "983820"
  },
  {
    "text": "patterns for your users when you roll out a new feature who are the users that",
    "start": "983820",
    "end": "989010"
  },
  {
    "text": "it's intending to target is it logged in users is it administrative users versus",
    "start": "989010",
    "end": "994620"
  },
  {
    "text": "end users so think about these usage patterns and what you're rolling out and this really does force you to think in",
    "start": "994620",
    "end": "1001970"
  },
  {
    "text": "terms of DevOps and when I say DevOps I don't mean automation or things like",
    "start": "1001970",
    "end": "1007370"
  },
  {
    "text": "that I mean the actual developers talking with operations to to work on",
    "start": "1007370",
    "end": "1013370"
  },
  {
    "text": "canary strategy when your developers are working on that new feature you have to really engage with them to figure out",
    "start": "1013370",
    "end": "1019070"
  },
  {
    "text": "those what they're working on who those users are come up with those use use case stories work with operations to",
    "start": "1019070",
    "end": "1026360"
  },
  {
    "text": "deploy those and to implement your canary strategy you also have to think",
    "start": "1026360",
    "end": "1032600"
  },
  {
    "text": "about the granularity when I say granularity I mean those steps so in my example earlier I had four replicas and",
    "start": "1032600",
    "end": "1039319"
  },
  {
    "text": "I said I was having it pause in between each of those as replicas from version 1",
    "start": "1039319",
    "end": "1044750"
  },
  {
    "text": "world over to version 2 but we have to think about the granularity how are we going to target a small set of users",
    "start": "1044750",
    "end": "1052630"
  },
  {
    "text": "that's enough users for us to monitor and then how are we going to scale that up to the next step and the step beyond",
    "start": "1052630",
    "end": "1059390"
  },
  {
    "text": "that because you really don't want your canary strategy to be let's deploy to a small subset and if it works okay",
    "start": "1059390",
    "end": "1066170"
  },
  {
    "text": "we're just going to go whole hog percent of our users get this you really want to increment that up at least with",
    "start": "1066170",
    "end": "1072860"
  },
  {
    "text": "a few steps GrubHub is a customer of data dog and they recently had a talk about how they",
    "start": "1072860",
    "end": "1080330"
  },
  {
    "text": "do canary deployments at one of our our use of their summits and they have this interesting strategy that I hadn't even",
    "start": "1080330",
    "end": "1087500"
  },
  {
    "text": "considered where they do a canary a deployment to small Sadie's in small towns so for example in the US if you're",
    "start": "1087500",
    "end": "1094820"
  },
  {
    "text": "us-based they might roll out to a city like Detroit before rolling out to a",
    "start": "1094820",
    "end": "1100340"
  },
  {
    "text": "larger city like Chicago or New York before rolling out countrywide so start",
    "start": "1100340",
    "end": "1106610"
  },
  {
    "text": "to think about about that how can you segment off your users in ways that will scale up and provide you with useful",
    "start": "1106610",
    "end": "1112790"
  },
  {
    "text": "feedback and as mentioned Kerry employees do get that opportunity to",
    "start": "1112790",
    "end": "1119360"
  },
  {
    "text": "scale up our infrastructure as well so along with that think about the resource",
    "start": "1119360",
    "end": "1124550"
  },
  {
    "text": "mapping and do roll out a new feature how's that new feature going to impact your infrastructure are there additional",
    "start": "1124550",
    "end": "1130910"
  },
  {
    "text": "calls to a datastore or an API endpoint well that caused additional load or",
    "start": "1130910",
    "end": "1136160"
  },
  {
    "text": "network traffic to that particular resource that data store or that server that's providing that API so start to",
    "start": "1136160",
    "end": "1143840"
  },
  {
    "text": "think about everything that's involved from a user perspective and from an infrastructure perspective all of this",
    "start": "1143840",
    "end": "1150980"
  },
  {
    "text": "does assume that you are monitoring though you can't do a proper canary deploy if you're not monitoring how",
    "start": "1150980",
    "end": "1157820"
  },
  {
    "text": "you're using your resources how people are using your application so some",
    "start": "1157820",
    "end": "1163130"
  },
  {
    "text": "things to think about when you're actually doing a strategy around canary deployments for your monitoring first is",
    "start": "1163130",
    "end": "1170000"
  },
  {
    "text": "that you need tags whether those are tags and data dog whether those are labels and Prometheus you can't think of",
    "start": "1170000",
    "end": "1176510"
  },
  {
    "text": "a data point as simply a value of how much it is and what it is and when it",
    "start": "1176510",
    "end": "1182720"
  },
  {
    "text": "happened you really need that tag of where did this come from what application was it what version was a",
    "start": "1182720",
    "end": "1189830"
  },
  {
    "text": "what lease they things like that without a fish no metadata it's going to be",
    "start": "1189830",
    "end": "1196100"
  },
  {
    "text": "virtually impossible for you to figure out what metrics are coming from your canary deployment versus",
    "start": "1196100",
    "end": "1201650"
  },
  {
    "text": "what metrics are coming from your actual production environment along with that",
    "start": "1201650",
    "end": "1208580"
  },
  {
    "text": "you have to start looking at the extremes many people already look at the the p90 or the 90th percentile when it",
    "start": "1208580",
    "end": "1216500"
  },
  {
    "text": "comes to things like latency or other metrics some people push that further to the 95th but when you start to roll out",
    "start": "1216500",
    "end": "1223190"
  },
  {
    "text": "to Canaries you really need to start thinking about pushing that all the way to the 99 start to go all the way to",
    "start": "1223190",
    "end": "1230930"
  },
  {
    "text": "that boundary because if you're rolling out a canary deployment to a small subset of your users any sort of errors",
    "start": "1230930",
    "end": "1237680"
  },
  {
    "text": "or latency issues or problems that they have when that's just a small group",
    "start": "1237680",
    "end": "1243320"
  },
  {
    "text": "those will scale massively as you roll out to all our users right so that small problem will become a very very large",
    "start": "1243320",
    "end": "1250760"
  },
  {
    "text": "problem so you need to look at those extremes and start to anticipate and you see a problem out at the extremes that",
    "start": "1250760",
    "end": "1257240"
  },
  {
    "text": "that may grow the other thing that you need to look at is the outliers and I",
    "start": "1257240",
    "end": "1264140"
  },
  {
    "text": "like to call outliers that one of these things does not look like the other right",
    "start": "1264140",
    "end": "1269240"
  },
  {
    "text": "outliers really is the idea that with a canary deployment hopefully you'll have",
    "start": "1269240",
    "end": "1274760"
  },
  {
    "text": "some sort of graph or some sort of dashboard that shows you that you can highlight where's my production metrics",
    "start": "1274760",
    "end": "1281900"
  },
  {
    "text": "what do these look like and then have some sort of machine learning or way to tell the difference between what's an",
    "start": "1281900",
    "end": "1288830"
  },
  {
    "text": "outlier what isn't part of that normal grouping the other thing that you need",
    "start": "1288830",
    "end": "1295340"
  },
  {
    "text": "to think about is anomalies and I like to say that anomalies is this what isn't like what it was before it's not acting",
    "start": "1295340",
    "end": "1302540"
  },
  {
    "text": "how it has before and this is a key point that this is where machine learning or if you've got AI or you've",
    "start": "1302540",
    "end": "1309710"
  },
  {
    "text": "got some sort of algorithmic anomaly detection this is where it comes in really handy because of our search to",
    "start": "1309710",
    "end": "1316880"
  },
  {
    "text": "show you a graph like this and say well how is this canary deployment different",
    "start": "1316880",
    "end": "1322430"
  },
  {
    "text": "right from from how things have worked in the past well with machine learning you can start to derive more information",
    "start": "1322430",
    "end": "1330440"
  },
  {
    "text": "machines can spot patterns better than we can and obviously nobody wants to stare at this down",
    "start": "1330440",
    "end": "1335540"
  },
  {
    "text": "for doll day but it can highlight things like this like well what happened on this particular Tuesday why didn't we",
    "start": "1335540",
    "end": "1342080"
  },
  {
    "text": "have the normal bump was a holiday or maybe it is something that's anomalous that we should look at so using machine",
    "start": "1342080",
    "end": "1349520"
  },
  {
    "text": "learning using some AI really will help you to understand the context behind",
    "start": "1349520",
    "end": "1355100"
  },
  {
    "text": "your canary deploys some other signals",
    "start": "1355100",
    "end": "1360140"
  },
  {
    "text": "to watch when you're going into your monitoring I particularly like the four golden signals which was part of the",
    "start": "1360140",
    "end": "1367220"
  },
  {
    "text": "Google s our ebook that was published by O'Reilly a couple years back and so the",
    "start": "1367220",
    "end": "1372560"
  },
  {
    "text": "four golden signals I've reordered them I like to call it let's L ETS because it helps me remember things better but the",
    "start": "1372560",
    "end": "1379370"
  },
  {
    "text": "L is latency so when you're looking at your canary deployments take a look at",
    "start": "1379370",
    "end": "1384950"
  },
  {
    "text": "changes in latency right again push all the way out to the p99 how's your latency changing because that'll be",
    "start": "1384950",
    "end": "1391940"
  },
  {
    "text": "important for your users the e'en let lets is for errors so what are the",
    "start": "1391940",
    "end": "1397550"
  },
  {
    "text": "errors that you're seeing not just error rates but what are the the actual errors because as you deploy new code you're",
    "start": "1397550",
    "end": "1403520"
  },
  {
    "text": "gonna see different errors than you have in the past the T unless is for traffic",
    "start": "1403520",
    "end": "1409190"
  },
  {
    "text": "so traffic is is sort of a double-edged sword you might see increased traffic",
    "start": "1409190",
    "end": "1414230"
  },
  {
    "text": "and that can be a fantastic thing could mean that you've deployed fantastic new features in your users just love it and",
    "start": "1414230",
    "end": "1420650"
  },
  {
    "text": "so you're seeing much more traffic but it could also be a bad thing it could mean that maybe a developer really some",
    "start": "1420650",
    "end": "1427850"
  },
  {
    "text": "unoptimized code that's making duplicate requests against the data source or an",
    "start": "1427850",
    "end": "1433190"
  },
  {
    "text": "API similarly decreased traffic could be a good thing it could be that your developers optimized code and now",
    "start": "1433190",
    "end": "1440600"
  },
  {
    "text": "they're only making one call to that data store rather than two or it could mean that you deployed something bad and",
    "start": "1440600",
    "end": "1446840"
  },
  {
    "text": "users are having problems actually using the software so take a look at those changes either way and the last is",
    "start": "1446840",
    "end": "1455150"
  },
  {
    "text": "saturation so take a look at how your infrastructure how your resources are",
    "start": "1455150",
    "end": "1460190"
  },
  {
    "text": "being used compared to your deployment again if you see an increase in resource",
    "start": "1460190",
    "end": "1465320"
  },
  {
    "text": "usage that could be a good thing and the Canary deployment could allow you to scale up so take a look again",
    "start": "1465320",
    "end": "1472140"
  },
  {
    "text": "both ways so what's all of this have to do with kubernetes right well kubernetes how",
    "start": "1472140",
    "end": "1480510"
  },
  {
    "start": "1475000",
    "end": "1568000"
  },
  {
    "text": "many people listening think that this is kubernetes it's a container Orchestrator right you you deploy containers on it",
    "start": "1480510",
    "end": "1488370"
  },
  {
    "text": "and manage desert containers well I used to think it was a container Orchestrator but it's actually not it's a service",
    "start": "1488370",
    "end": "1495780"
  },
  {
    "text": "Orchestrator the base unit within kubernetes is service the containers the pods the",
    "start": "1495780",
    "end": "1504060"
  },
  {
    "text": "rest of it they're all ephemeral the thing that matters again to hammer home the point is you have to be aware of",
    "start": "1504060",
    "end": "1510090"
  },
  {
    "text": "your users and your users care about services they don't care about your containers or your pots so there's those",
    "start": "1510090",
    "end": "1516300"
  },
  {
    "text": "are just the resources that provide the service so services are what we care about and",
    "start": "1516300",
    "end": "1521910"
  },
  {
    "text": "if we're thinking about deployments well if we want it to deploy the one service with kubernetes it wouldn't make sense",
    "start": "1521910",
    "end": "1528060"
  },
  {
    "text": "to have two separate meshes of services and just have one giant load balance in",
    "start": "1528060",
    "end": "1534690"
  },
  {
    "text": "front of all of them so obviously kubernetes makes that much easier as a service Orchestrator something that",
    "start": "1534690",
    "end": "1540810"
  },
  {
    "text": "manages services it handles those service deployments right so we can change individual services within",
    "start": "1540810",
    "end": "1546900"
  },
  {
    "text": "kubernetes they'll do rolling deployment it's really fantastic at that so why",
    "start": "1546900",
    "end": "1552900"
  },
  {
    "text": "might you need a service mesh like Sto well as mentioned kubernetes does is",
    "start": "1552900",
    "end": "1558570"
  },
  {
    "text": "rolling deployments very very well right it doesn't so well that it happens quickly but it doesn't do canary",
    "start": "1558570",
    "end": "1565260"
  },
  {
    "text": "deployments very well at all so how would you do it right give you an",
    "start": "1565260",
    "end": "1570930"
  },
  {
    "start": "1568000",
    "end": "1724000"
  },
  {
    "text": "example kubernetes let's set up a service right so there's a basic web",
    "start": "1570930",
    "end": "1576240"
  },
  {
    "text": "service here I'm gonna have my llamo it says I'm declaring service if it's a metadata which is my application I'm",
    "start": "1576240",
    "end": "1582780"
  },
  {
    "text": "going to expose port 80 because it's a web application so that's the service",
    "start": "1582780",
    "end": "1588360"
  },
  {
    "text": "part but if I wanted to actually implement this will I need to deployment and my deployment sets up my pods and",
    "start": "1588360",
    "end": "1593970"
  },
  {
    "text": "how many replicas I want so if I were to do a deployment with version 1 and version 2 of my application well if I",
    "start": "1593970",
    "end": "1601410"
  },
  {
    "text": "say the same replica is what would this do well generally this would just split my",
    "start": "1601410",
    "end": "1608520"
  },
  {
    "text": "traffic fifty-fifty right and one service I've two deployments so when it",
    "start": "1608520",
    "end": "1613590"
  },
  {
    "text": "comes to actually directing traffic or doing any sort of routing kubernetes just sort of is agnostic it says I don't",
    "start": "1613590",
    "end": "1620370"
  },
  {
    "text": "know which one of these really matters so it's gonna split my traffic 5050 mostly randomly so if I wanted to do",
    "start": "1620370",
    "end": "1628380"
  },
  {
    "text": "canary deployment but you could see how this could be useful I could deploy version 1 of my",
    "start": "1628380",
    "end": "1633540"
  },
  {
    "text": "application with for example nine replicas and version two with one replica and now I'm generally going to",
    "start": "1633540",
    "end": "1639600"
  },
  {
    "text": "get 10% of my traffic going to version two so I can start to scale this up as a",
    "start": "1639600",
    "end": "1646260"
  },
  {
    "text": "canary deployment right everything looks good with nine and one I can now shift that tape to or I can shift that to",
    "start": "1646260",
    "end": "1652920"
  },
  {
    "text": "seven and three all the way to the point where I can go from one version of",
    "start": "1652920",
    "end": "1659360"
  },
  {
    "text": "version one or one writer out to comfort someone to nine replicas of version two",
    "start": "1659360",
    "end": "1664410"
  },
  {
    "text": "and then I just delete version one and shift version two to ten replicas",
    "start": "1664410",
    "end": "1671450"
  },
  {
    "text": "because there is a bug in kubernetes you do not want the replicas to be zero but",
    "start": "1671450",
    "end": "1679170"
  },
  {
    "text": "you can see how this could be a problem right if I wanted to say do one percent canary deployment to version two well do",
    "start": "1679170",
    "end": "1687420"
  },
  {
    "text": "I really have to do 99 replicas a version one and one of version two that's kind of silly especially if I",
    "start": "1687420",
    "end": "1694590"
  },
  {
    "text": "don't need 99 replicas on top of the fact that I gave you all that great advice about how you should think about",
    "start": "1694590",
    "end": "1699990"
  },
  {
    "text": "canary deployments and you know have representative sets and all of this other information were really just",
    "start": "1699990",
    "end": "1707190"
  },
  {
    "text": "locked down to having percentages with kubernetes so this is why kubernetes",
    "start": "1707190",
    "end": "1712410"
  },
  {
    "text": "well it's a fantastic tool not so great it at canary deployments",
    "start": "1712410",
    "end": "1718370"
  },
  {
    "text": "so what's the service mesh get you well off the bat it gets you routing a load",
    "start": "1721040",
    "end": "1727169"
  },
  {
    "start": "1724000",
    "end": "1880000"
  },
  {
    "text": "balancing right so this is again going to be the important parts when it comes to Canary deployments it's how we we do",
    "start": "1727169",
    "end": "1733590"
  },
  {
    "text": "that routing and the load balancing but it also provides you some some better service discovery other things that it",
    "start": "1733590",
    "end": "1740910"
  },
  {
    "text": "provides as timeouts and retries so if you in particular will allow you to set a timeout for your services and an",
    "start": "1740910",
    "end": "1748320"
  },
  {
    "text": "overall timeout and it'll do retries for you so your developers no longer have to worry about what if that other service",
    "start": "1748320",
    "end": "1755850"
  },
  {
    "text": "that they're making an API call to what if that's down how do they manage that code you can just automatically have",
    "start": "1755850",
    "end": "1762059"
  },
  {
    "text": "your service mesh like Sto handle that it also handles policy enforcement so",
    "start": "1762059",
    "end": "1767669"
  },
  {
    "text": "rather than relying on your developers to always implement a secure connection",
    "start": "1767669",
    "end": "1772830"
  },
  {
    "text": "to TLS encrypt all of their their calls you can enforce that within within a",
    "start": "1772830",
    "end": "1778500"
  },
  {
    "text": "service mesh and the other the final thing that provides is a really great point for monitoring and tracing because",
    "start": "1778500",
    "end": "1785460"
  },
  {
    "text": "everything all the network traffic is flowing through your service mesh it's a great way to start getting some of that",
    "start": "1785460",
    "end": "1791010"
  },
  {
    "text": "tracing down and you can monitor how long things take and you can start tracer because as they make calls fyssas",
    "start": "1791010",
    "end": "1799500"
  },
  {
    "text": "and you can put timers on those to understand which services or which parts of your application are taking the most",
    "start": "1799500",
    "end": "1805559"
  },
  {
    "text": "time so how does this all work well you have kubernetes it's monitoring a bunch of your services in particular it's",
    "start": "1805559",
    "end": "1813090"
  },
  {
    "text": "going to be having a bunch of pods so the first thing that you have to do is add a data plane the data plane really",
    "start": "1813090",
    "end": "1819270"
  },
  {
    "text": "is here is just going to be envoy envoys a fantastic CN CF project started by the",
    "start": "1819270",
    "end": "1825330"
  },
  {
    "text": "the folks at lyft and it's obviously open source but really when it comes to",
    "start": "1825330",
    "end": "1830580"
  },
  {
    "text": "implementing SEO it's relying on envoy for what we call that data plan in order",
    "start": "1830580",
    "end": "1835590"
  },
  {
    "text": "to do that really it's going to modify your deployments that's going to add a and NIC container that's going to modify",
    "start": "1835590",
    "end": "1841290"
  },
  {
    "text": "your IP tables and redirect all of your container traffic through an envoy sidecar so now that's the first step in",
    "start": "1841290",
    "end": "1848610"
  },
  {
    "text": "starting off we've have all of our network traffic going through Envoy the next portion",
    "start": "1848610",
    "end": "1854070"
  },
  {
    "text": "it and the reason that I think on sto is so fantastic is it provides us this control plane the control plane is",
    "start": "1854070",
    "end": "1860790"
  },
  {
    "text": "really what I like to say is the guts of this do it's where we have the ability to create new modules to update our",
    "start": "1860790",
    "end": "1868260"
  },
  {
    "text": "logic if we want to have custom logic to pull out monitoring and metrics to do a",
    "start": "1868260",
    "end": "1873540"
  },
  {
    "text": "lot of the things that makes this deal so exciting those are all within the",
    "start": "1873540",
    "end": "1878550"
  },
  {
    "text": "control plane so won't dive too deep into the guts of ISTE oh but let's talk",
    "start": "1878550",
    "end": "1884700"
  },
  {
    "text": "about how we should do or how we would do a canary deployment with is do what is that actually they look like well we",
    "start": "1884700",
    "end": "1891630"
  },
  {
    "text": "start off again with the service right this is again kubernetes yeah Mille we have a service it's basically the same",
    "start": "1891630",
    "end": "1897270"
  },
  {
    "text": "thing yes tio doesn't touch your services at all when it comes to our deployments",
    "start": "1897270",
    "end": "1902810"
  },
  {
    "text": "again it's just going to be a basic yeah mol file and for the most part it's",
    "start": "1902810",
    "end": "1908070"
  },
  {
    "text": "gonna be the same as well at least as far as we're concerned as far as operators you don't have to do anything",
    "start": "1908070",
    "end": "1913890"
  },
  {
    "text": "special to your deployments the reason for that is sto comes with a fantastic tool called cube inject so really what",
    "start": "1913890",
    "end": "1921360"
  },
  {
    "text": "this does is you pass your llamo in it does an injection like I said before",
    "start": "1921360",
    "end": "1927330"
  },
  {
    "text": "that injection really is the guts of it is to inject and emit containers about",
    "start": "1927330",
    "end": "1932910"
  },
  {
    "text": "before your service or before your pod starts up it's going to modify those IP tables now this isn't the the standard",
    "start": "1932910",
    "end": "1941520"
  },
  {
    "text": "way of starting SEO but it's the way that I recommend for most people because just like when someone tells you to oh",
    "start": "1941520",
    "end": "1949080"
  },
  {
    "text": "just curl this the shell script and pipe it to bash you know that's that's a really a silly thing to do because you",
    "start": "1949080",
    "end": "1955470"
  },
  {
    "text": "have no idea what's in that shell script and similarly even though SDO is an open-source project and it's totally",
    "start": "1955470",
    "end": "1961560"
  },
  {
    "text": "safe you should know what's going on so I highly recommend that in between this in between this first line of Sto CTL",
    "start": "1961560",
    "end": "1968880"
  },
  {
    "text": "cube inject and the cube CTL apply really you should run a diff of your",
    "start": "1968880",
    "end": "1975510"
  },
  {
    "text": "version of that yeah Mille and the sto version you should see take a look at what changes are being made they'll",
    "start": "1975510",
    "end": "1981420"
  },
  {
    "text": "really help you understand what's going on with this deal once you understand that difference then of course go ahead",
    "start": "1981420",
    "end": "1987270"
  },
  {
    "text": "and apply and you'll you'll get that rollout with issue the other way though the more",
    "start": "1987270",
    "end": "1994240"
  },
  {
    "text": "standard way of implementing sto is through kubernetes mutating webhook",
    "start": "1994240",
    "end": "1999250"
  },
  {
    "text": "admission controllers really it's just a fancy way of saying there's a web hook within kubernetes that allows for auto",
    "start": "1999250",
    "end": "2006840"
  },
  {
    "text": "sidecar injection so you'll just namespace your service with the with the",
    "start": "2006840",
    "end": "2013650"
  },
  {
    "text": "sto namespace to allow it to identify what you want to auto injector and then",
    "start": "2013650",
    "end": "2020250"
  },
  {
    "text": "because of the web hook whenever you do a deployment when you're ever you applies in the ml that'll do a",
    "start": "2020250",
    "end": "2025320"
  },
  {
    "text": "deployment it'll automatically note that and that web hook will be invoked and",
    "start": "2025320",
    "end": "2030420"
  },
  {
    "text": "the init container will be started so",
    "start": "2030420",
    "end": "2036180"
  },
  {
    "text": "just like kubernetes is a service Orchestrator it's service-oriented yes",
    "start": "2036180",
    "end": "2041340"
  },
  {
    "text": "do as a service mesh and so it is also service-oriented so the first thing that we would do to do a canary deployment is",
    "start": "2041340",
    "end": "2048540"
  },
  {
    "text": "over we set up a virtual service this is essentially similar to setting up a service and kubernetes it tells us here",
    "start": "2048540",
    "end": "2054929"
  },
  {
    "text": "that we have a service that's going to be running this one's really basic it's just pointing out that I do have a",
    "start": "2054930",
    "end": "2060179"
  },
  {
    "text": "service I've got a basic route there the second step is to set up a destination",
    "start": "2060180",
    "end": "2066270"
  },
  {
    "text": "role and this is what I like to call the glue this is the glue between sto and kubernetes so really all it's doing here",
    "start": "2066270",
    "end": "2073409"
  },
  {
    "text": "it's going to be tying my virtual service and sto to a deployment in",
    "start": "2073410",
    "end": "2078750"
  },
  {
    "text": "kubernetes so here's just some some really bare-bones Yambol highlighting",
    "start": "2078750",
    "end": "2083879"
  },
  {
    "text": "the important parts but this is how it connects so it's really just going to connect the name of a subset and a",
    "start": "2083880",
    "end": "2089399"
  },
  {
    "text": "version to that template metadata for my kubernetes deployment really pretty",
    "start": "2089400",
    "end": "2094860"
  },
  {
    "text": "simple but you can see because this is so simple with that destination role if i wanted to do a canary deployment well",
    "start": "2094860",
    "end": "2101010"
  },
  {
    "text": "then i would simply do a secondary deployment like i had before with",
    "start": "2101010",
    "end": "2106200"
  },
  {
    "text": "kubernetes but rather than telling kubernetes are letting kubernetes randomly split that i'm going to put",
    "start": "2106200",
    "end": "2112980"
  },
  {
    "text": "that entry into that destination rule so again i'm going to apply that clue and make that a second deployment available",
    "start": "2112980",
    "end": "2120390"
  },
  {
    "text": "to test you and then from there really everything",
    "start": "2120390",
    "end": "2125610"
  },
  {
    "text": "again is service-oriented so I get to control everything through my service so here I can set up some additional",
    "start": "2125610",
    "end": "2132030"
  },
  {
    "text": "routing right so in this case I said that it weight is 80% gonna go to my",
    "start": "2132030",
    "end": "2137730"
  },
  {
    "text": "version 1 of my application and 20% is gonna go to version 2 but as I mentioned",
    "start": "2137730",
    "end": "2144690"
  },
  {
    "text": "there were all these great advice about you should use representative sets and",
    "start": "2144690",
    "end": "2150390"
  },
  {
    "text": "you should think about various things and that's the fantastic thing that issue provides us it really gives us",
    "start": "2150390",
    "end": "2156900"
  },
  {
    "text": "that ability to add additional layers so rather than just setting us static weight of a percentage we can actually",
    "start": "2156900",
    "end": "2164130"
  },
  {
    "text": "do things like inspect headers and look at cookies things like that so we can target logged in users or we can use a",
    "start": "2164130",
    "end": "2170790"
  },
  {
    "text": "Goyt lookup service to target users from a particular part of the world so what",
    "start": "2170790",
    "end": "2182310"
  },
  {
    "start": "2180000",
    "end": "2306000"
  },
  {
    "text": "else can a CEO do obviously it can do tons of other things that was just the simple canary deployment or the cyclic",
    "start": "2182310",
    "end": "2190290"
  },
  {
    "text": "routing rule for forests EO but as mentioned service meshes like his do",
    "start": "2190290",
    "end": "2195330"
  },
  {
    "text": "provide you a lot timeouts and retries feel less policy enforcement metrics and",
    "start": "2195330",
    "end": "2201510"
  },
  {
    "text": "monitoring things like that so take a look at the documentation and play with",
    "start": "2201510",
    "end": "2207630"
  },
  {
    "text": "this view so just a quick recap service meshes give you a lot more control than",
    "start": "2207630",
    "end": "2213780"
  },
  {
    "text": "what you'll get out of the box with kubernetes and what you'll get from kubernetes itself kubernetes is a",
    "start": "2213780",
    "end": "2220530"
  },
  {
    "text": "fantastic project and it's nicely limited to the core things that it does really well but serve as meshes like sto",
    "start": "2220530",
    "end": "2227250"
  },
  {
    "text": "will give you the control that you need when it comes to canary deployments",
    "start": "2227250",
    "end": "2232470"
  },
  {
    "text": "think about representative sets think about your end-users how are they actually using your product and then",
    "start": "2232470",
    "end": "2238620"
  },
  {
    "text": "think about how you can granularly scale them up I'm gonna come some monitoring",
    "start": "2238620",
    "end": "2244200"
  },
  {
    "text": "you absolutely need monitoring if you're doing canary deployments if you're not monitoring your Kara nary deployments",
    "start": "2244200",
    "end": "2249570"
  },
  {
    "text": "are going to be completely useless so ensure that you're using tags or you're using labels if you're using prometheus",
    "start": "2249570",
    "end": "2256110"
  },
  {
    "text": "think about outliers you know the things that don't look like the others and the anomalies take a look at your past",
    "start": "2256110",
    "end": "2262650"
  },
  {
    "text": "history of your metrics and then when it",
    "start": "2262650",
    "end": "2269430"
  },
  {
    "text": "comes to what to watch for look for changes in late and see look for errors not only error rates but what type of",
    "start": "2269430",
    "end": "2275610"
  },
  {
    "text": "sub errors take a look at your traffic whether that's gone up or down both of those could be either really good or",
    "start": "2275610",
    "end": "2281760"
  },
  {
    "text": "they can be bad and similarly take a look at your saturation how are you resources doing and if",
    "start": "2281760",
    "end": "2287940"
  },
  {
    "text": "they're doing fine if what they're creeping up gives you a chance to scale up and then finally my number one",
    "start": "2287940",
    "end": "2295110"
  },
  {
    "text": "takeaway point go play with is do is see as a fantastic open source project it's",
    "start": "2295110",
    "end": "2300270"
  },
  {
    "text": "making a lot of headway it's super exciting I think you'll really love it so go play with it and with that we'll",
    "start": "2300270",
    "end": "2307740"
  },
  {
    "start": "2306000",
    "end": "2456000"
  },
  {
    "text": "open it up to questions awesome thing",
    "start": "2307740",
    "end": "2314080"
  },
  {
    "text": "Jason for the great presentation so we have some time for questions now and just a reminder if you do have a",
    "start": "2314080",
    "end": "2319540"
  },
  {
    "text": "question that you'd like to ask please drop that in the Q&A tab at the bottom of your screen and we'll get to as many as we have time",
    "start": "2319540",
    "end": "2326110"
  },
  {
    "text": "for so one of the questions is if an",
    "start": "2326110",
    "end": "2333220"
  },
  {
    "text": "application is working on staging but it fails once it's deployed to production can you kind of talk about how you would",
    "start": "2333220",
    "end": "2340300"
  },
  {
    "text": "approach this and a canary deployment yeah so if you deploy something it's",
    "start": "2340300",
    "end": "2346450"
  },
  {
    "text": "working great and staging you make it the same deployment to production and things aren't working it really depends",
    "start": "2346450",
    "end": "2354820"
  },
  {
    "text": "on why they're not working right and so again it really comes down to the monitoring that you have when you deploy",
    "start": "2354820",
    "end": "2360460"
  },
  {
    "text": "that you're monitoring tools whatever that is should note that it's not working and there should be other",
    "start": "2360460",
    "end": "2365920"
  },
  {
    "text": "additional information about that and so the way that I like to approach going",
    "start": "2365920",
    "end": "2371950"
  },
  {
    "text": "from monitoring seeing that something's wrong to actually figuring out the issue is really just this drill down it's it's",
    "start": "2371950",
    "end": "2379660"
  },
  {
    "text": "sort of this circular loop this imagine a for loop but it starts with the what",
    "start": "2379660",
    "end": "2384880"
  },
  {
    "text": "we call a work resource right a work resources really or work metric is",
    "start": "2384880",
    "end": "2390550"
  },
  {
    "text": "really just a top-level metric so it could be things like my users aren't",
    "start": "2390550",
    "end": "2397240"
  },
  {
    "text": "able to see a page so then you you have to drill down into what are the",
    "start": "2397240",
    "end": "2402910"
  },
  {
    "text": "resources that provide that right it's probably going to be a web application that web application is composed of a",
    "start": "2402910",
    "end": "2408790"
  },
  {
    "text": "data store and a web server and maybe some you know application like a Python script or a ruby script things like that",
    "start": "2408790",
    "end": "2415650"
  },
  {
    "text": "so you drill in and then see check out the events that have changed right like has anything changed about this that we",
    "start": "2415650",
    "end": "2423970"
  },
  {
    "text": "weren't expecting and they continue to drill down right so those resources things like the data store become your",
    "start": "2423970",
    "end": "2431050"
  },
  {
    "text": "work metric right so what does a data store need to run well it needs disk space and it needs processor right so",
    "start": "2431050",
    "end": "2438040"
  },
  {
    "text": "you start to drill down so I highly recommend that you go from a top-down approach right what am i users seeing",
    "start": "2438040",
    "end": "2443920"
  },
  {
    "text": "what am users experiencing figure out the things that's or that and then drill it look at each",
    "start": "2443920",
    "end": "2449710"
  },
  {
    "text": "of those and continue to drill down is usually the best way to do that and then",
    "start": "2449710",
    "end": "2458230"
  },
  {
    "start": "2456000",
    "end": "2544000"
  },
  {
    "text": "kind of going off of that how can you automatically roll back to a previously known good version if an",
    "start": "2458230",
    "end": "2463930"
  },
  {
    "text": "issue is found with the canary deployment yes so the nice thing is",
    "start": "2463930",
    "end": "2469990"
  },
  {
    "text": "because everything is you know API based really you know with both kubernetes and",
    "start": "2469990",
    "end": "2477370"
  },
  {
    "text": "Sto you know we generally think of interacting with them as llamo because llamo files are easy for humans to read",
    "start": "2477370",
    "end": "2485140"
  },
  {
    "text": "and to edit but at the end of the day it's really an API that's driving it so",
    "start": "2485140",
    "end": "2491260"
  },
  {
    "text": "if you if you want it to automate canary deployments you know you could use a tool like within data dog we have a web",
    "start": "2491260",
    "end": "2497710"
  },
  {
    "text": "hooks integration you know so you could use something simple like web hook stuff when I do a canary deployment wait for a",
    "start": "2497710",
    "end": "2505870"
  },
  {
    "text": "certain amount of time modern or my you know certain metrics if they all look good then you can automate you know",
    "start": "2505870",
    "end": "2512170"
  },
  {
    "text": "going forward or you can automate going backward by invoking the web hooks so you know it's it's different with all",
    "start": "2512170",
    "end": "2520360"
  },
  {
    "text": "monitoring products but generally within data dog the way that you do it is you set up an automated alert it's the same",
    "start": "2520360",
    "end": "2526780"
  },
  {
    "text": "type of alert that would fire off pager duty or Vic drops to alert you to the problem but rather than sending you know",
    "start": "2526780",
    "end": "2533380"
  },
  {
    "text": "you a message or sending a message through page of duty all its gonna do is fire off a web hook so that's one way",
    "start": "2533380",
    "end": "2540010"
  },
  {
    "text": "that you can automate it awesome and",
    "start": "2540010",
    "end": "2545650"
  },
  {
    "start": "2544000",
    "end": "2593000"
  },
  {
    "text": "another question is how would Canary deployments and dynamic database management work with tools such as",
    "start": "2545650",
    "end": "2551680"
  },
  {
    "text": "liquid base that's a great question and I'm not too familiar with liquid base so",
    "start": "2551680",
    "end": "2561970"
  },
  {
    "text": "yeah since I'm not familiar with the tool you know I'm assuming what you mean",
    "start": "2561970",
    "end": "2567640"
  },
  {
    "text": "is well I can make assumptions about what you mean by dynamic database but again I'm not too familiar with what's",
    "start": "2567640",
    "end": "2573550"
  },
  {
    "text": "being referred to there so I think I should probably pass on that but whoever",
    "start": "2573550",
    "end": "2579040"
  },
  {
    "text": "asked that question happy to dig into that further so my email and my twitter handle are on",
    "start": "2579040",
    "end": "2585330"
  },
  {
    "text": "screen feel free to ping me on one of those those methods and I'd be happy to",
    "start": "2585330",
    "end": "2591320"
  },
  {
    "start": "2593000",
    "end": "3291000"
  },
  {
    "text": "awesome so do you need to define a service in kubernetes before you create",
    "start": "2593000",
    "end": "2599460"
  },
  {
    "text": "a virtual service in Sto or does the virtual service take the place of the kubernetes service that's a good",
    "start": "2599460",
    "end": "2609900"
  },
  {
    "text": "question I have always defined a service before implementing it in is do so be",
    "start": "2609900",
    "end": "2616800"
  },
  {
    "text": "honest I'm not quite sure what happens if you don't implement the service in",
    "start": "2616800",
    "end": "2621900"
  },
  {
    "text": "kubernetes yeah that's something to try",
    "start": "2621900",
    "end": "2629280"
  },
  {
    "text": "out that's a fantastic question and it's just one of those that I think I'm just",
    "start": "2629280",
    "end": "2634770"
  },
  {
    "text": "so used to with kubernetes just you know always doing the service in the deployment that I've never bothered to",
    "start": "2634770",
    "end": "2640320"
  },
  {
    "text": "do that again hit me up on my email and",
    "start": "2640320",
    "end": "2646170"
  },
  {
    "text": "I would love to just explore that and see what happens my my suspicion is that it's gonna be missing something",
    "start": "2646170",
    "end": "2653130"
  },
  {
    "text": "things might break I might go and play with that after after this calls done",
    "start": "2653130",
    "end": "2661370"
  },
  {
    "text": "awesome lots of good questions to dive into further how does this fit into a CD",
    "start": "2661370",
    "end": "2669150"
  },
  {
    "text": "pipeline yeah so within a CD pipeline",
    "start": "2669150",
    "end": "2678170"
  },
  {
    "text": "you know you could automate it again because everything's API driven so you",
    "start": "2678170",
    "end": "2684210"
  },
  {
    "text": "could automatically run a canary deployment but generally I'm very much a",
    "start": "2684210",
    "end": "2692210"
  },
  {
    "text": "fan of continuous integration but not continuous deployment so when it comes",
    "start": "2692210",
    "end": "2698340"
  },
  {
    "text": "to actually you know get committing your code and pushing that I don't think that",
    "start": "2698340",
    "end": "2705060"
  },
  {
    "text": "by default everything should like push out into production even though it is ",
    "start": "2705060",
    "end": "2710220"
  },
  {
    "text": "so I would say that I you know if the idea is to do a continuous deployment maybe",
    "start": "2710220",
    "end": "2716400"
  },
  {
    "text": "not at least to production so generally because if you're doing a continuous",
    "start": "2716400",
    "end": "2723240"
  },
  {
    "text": "deployment to a staging environment I'd say just go ahead go whole hog with that like there's generally no reason to",
    "start": "2723240",
    "end": "2730530"
  },
  {
    "text": "canary to a staging environment so that's where I would see the the CI part",
    "start": "2730530",
    "end": "2737430"
  },
  {
    "text": "going when it comes to production I'd say that it should you know prepare things you might want to have it",
    "start": "2737430",
    "end": "2743220"
  },
  {
    "text": "automatically generate yeah mole for you but when it comes to actually deployment and running the Canaria deploys I am",
    "start": "2743220",
    "end": "2749670"
  },
  {
    "text": "very much a fan of manually doing it simply because I've seen automation run",
    "start": "2749670",
    "end": "2755790"
  },
  {
    "text": "away way too many times so that that might be my PTSD getting invoked there",
    "start": "2755790",
    "end": "2764010"
  },
  {
    "text": "but I highly recommend that you just do things manually when it comes to deployments and and monitoring what's",
    "start": "2764010",
    "end": "2769950"
  },
  {
    "text": "going on all right can you talk a little",
    "start": "2769950",
    "end": "2776640"
  },
  {
    "text": "bit about the process to add sto to an existing kubernetes environment yeah the",
    "start": "2776640",
    "end": "2782640"
  },
  {
    "text": "process is really pretty simple the preferred way these days is to use a",
    "start": "2782640",
    "end": "2788190"
  },
  {
    "text": "helmet art so if you go to sto IO and you click on there's a button that will",
    "start": "2788190",
    "end": "2794609"
  },
  {
    "text": "have you download things and that download really is a bunch of fiamma files and charts and the sto CTL command",
    "start": "2794609",
    "end": "2803309"
  },
  {
    "text": "itself the binary which is the thing that just modifies your yellow files but when it comes to actually deploying it",
    "start": "2803309",
    "end": "2809490"
  },
  {
    "text": "it really is do is just a bunch of namespaced",
    "start": "2809490",
    "end": "2814640"
  },
  {
    "text": "services and pods that are running so there's nothing magic about it it actually is just an application that's",
    "start": "2814640",
    "end": "2822119"
  },
  {
    "text": "sitting on kubernetes similarly to any other application that you would deploy",
    "start": "2822119",
    "end": "2828170"
  },
  {
    "text": "but yeah the the default way or the preferred way these days of deploying it is just to apply the health chart all",
    "start": "2828230",
    "end": "2839790"
  },
  {
    "text": "right and so this next one is about kind of envoy versus distance so unbeli",
    "start": "2839790",
    "end": "2845450"
  },
  {
    "text": "mirroring and shadowing do you think that sto will expose and support this and does that reduce the need for",
    "start": "2845450",
    "end": "2852599"
  },
  {
    "text": "Canario deployments that's a fantastic question so I don't know if sto will",
    "start": "2852599",
    "end": "2864869"
  },
  {
    "text": "support that I suspect that they will it you know like any open source project it",
    "start": "2864869",
    "end": "2873030"
  },
  {
    "text": "really comes down to what I like to say is a democracy versus democracy",
    "start": "2873030",
    "end": "2878579"
  },
  {
    "text": "democracy being that when people start saying things that things generally get",
    "start": "2878579",
    "end": "2884400"
  },
  {
    "text": "done or the will of the people open-source is very much a duoc recei of if you proposed it and you'd like to see",
    "start": "2884400",
    "end": "2891030"
  },
  {
    "text": "it and you submit code to the project that's how things get done right you have to actually start to get involved",
    "start": "2891030",
    "end": "2898099"
  },
  {
    "text": "so that's one way to get that going is just to like start taking a look at the",
    "start": "2898099",
    "end": "2903660"
  },
  {
    "text": "code figuring out how you can add that start working with the community to add that if it's something you really want",
    "start": "2903660",
    "end": "2909660"
  },
  {
    "text": "to see that said shadow traffic is fantastic for those who don't know who",
    "start": "2909660",
    "end": "2917549"
  },
  {
    "text": "are on the call shadow traffic essentially is when a request comes in rather than just routing that request",
    "start": "2917549",
    "end": "2923339"
  },
  {
    "text": "for example - a canary deployment actually just like splitting that and saying I'm gonna send this request - to",
    "start": "2923339",
    "end": "2930150"
  },
  {
    "text": "my actual production version that's gonna run in one way and then I'm also going to send the request to you know a",
    "start": "2930150",
    "end": "2937049"
  },
  {
    "text": "duplicate version of my infrastructure my application that's testing out a new",
    "start": "2937049",
    "end": "2942150"
  },
  {
    "text": "thing so essentially allows you to Canaria deploy without ever exposing that canary to your actual end-users and",
    "start": "2942150",
    "end": "2951510"
  },
  {
    "text": "I think that's a fantastic way to do things I think that if it were implemented then then yes essentially if",
    "start": "2951510",
    "end": "2958619"
  },
  {
    "text": "you know by routing things to that shadow version it may negate some of the",
    "start": "2958619",
    "end": "2965400"
  },
  {
    "text": "need for canary deployments and I say maybe cuz with shadow traffic now you are having to set up duplicate",
    "start": "2965400",
    "end": "2972000"
  },
  {
    "text": "environment and depending on the size of your environment and you know the size of your organization what you're running",
    "start": "2972000",
    "end": "2978540"
  },
  {
    "text": "that may be cost prohibitive right if I suddenly have 100 developers all working on different features multiplying my",
    "start": "2978540",
    "end": "2986070"
  },
  {
    "text": "current infrastructure times 100 even if just parts of that infrastructure could get very expensive so really depends on",
    "start": "2986070",
    "end": "2994860"
  },
  {
    "text": "the organization your application your needs but I think shadow traffic is going to be a very very widely used tool",
    "start": "2994860",
    "end": "3002090"
  },
  {
    "text": "in the future all right so does Istria",
    "start": "3002090",
    "end": "3009260"
  },
  {
    "text": "replace a service match like link or D or can it potentially supplement link or D that is also a fantastic question",
    "start": "3009260",
    "end": "3018050"
  },
  {
    "text": "partly because linker D is a CNC F project and surprisingly sto isn't or at",
    "start": "3018050",
    "end": "3024860"
  },
  {
    "text": "least not yet there's been there's been talk but nothing has been decided upon and it hasn't been applied for you so",
    "start": "3024860",
    "end": "3033380"
  },
  {
    "text": "that said it really depends on who you talk to you know if you talk to the",
    "start": "3033380",
    "end": "3038480"
  },
  {
    "text": "folks buoyant who have created linker D they would tell you that that linker D",
    "start": "3038480",
    "end": "3044630"
  },
  {
    "text": "and s to actually work really really well together so linker D is as I",
    "start": "3044630",
    "end": "3050360"
  },
  {
    "text": "understand it does a lot of the data plane layer so essentially you can",
    "start": "3050360",
    "end": "3055640"
  },
  {
    "text": "replace envoy with linker D and then use sto to provide additional control plane",
    "start": "3055640",
    "end": "3064100"
  },
  {
    "text": "elements that linker D doesn't so really depends on how you're using linker D",
    "start": "3064100",
    "end": "3069560"
  },
  {
    "text": "right now and what sort of additional features you would like to see potentially then they could work well",
    "start": "3069560",
    "end": "3077360"
  },
  {
    "text": "together but depending again if you're using linker D for for some of the basics and those are also basics",
    "start": "3077360",
    "end": "3083840"
  },
  {
    "text": "provided by SDO then it may not be a good reason to run both of them they may",
    "start": "3083840",
    "end": "3090500"
  },
  {
    "text": "be duplicating efforts awesome",
    "start": "3090500",
    "end": "3098660"
  },
  {
    "text": "can you talk a little bit about how sto works in an environment with multiple kubernetes",
    "start": "3098660",
    "end": "3104970"
  },
  {
    "text": "clusters yeah so that's a fantastic question that's actually something that",
    "start": "3104970",
    "end": "3110910"
  },
  {
    "text": "data dogs been working on quite a bit I haven't been on so I'm not on the team",
    "start": "3110910",
    "end": "3117570"
  },
  {
    "text": "that's actually implementing that so I don't have too many of the details for",
    "start": "3117570",
    "end": "3123690"
  },
  {
    "text": "the person who did ask that feel free to send me an email I'm happy to connect you with with some of the engineers on",
    "start": "3123690",
    "end": "3129450"
  },
  {
    "text": "that team and they can dive into it a little bit more but as I understand it",
    "start": "3129450",
    "end": "3136430"
  },
  {
    "text": "you know sto really with multi clusters the the trick just becomes where you",
    "start": "3136430",
    "end": "3144780"
  },
  {
    "text": "want that that control plane to be managed so that's something that you",
    "start": "3144780",
    "end": "3150110"
  },
  {
    "text": "know they're working on with that project there is some documentation around that but again I'm gonna say hit",
    "start": "3150110",
    "end": "3157470"
  },
  {
    "text": "me up I'm happy to connect you with the engineers on our team who are actually doing that in production alright um",
    "start": "3157470",
    "end": "3172110"
  },
  {
    "text": "another one how would you configure a load balancer to work with this do yeah so generally",
    "start": "3172110",
    "end": "3182000"
  },
  {
    "text": "you know sto is going to be handling all of the load balancing and routing for you I'm so if if the idea is you know if",
    "start": "3182000",
    "end": "3190560"
  },
  {
    "text": "you're in public cloud and you've got you know a load balancer all provided by",
    "start": "3190560",
    "end": "3195600"
  },
  {
    "text": "by your public cloud and really you just want to point your traffic directly to",
    "start": "3195600",
    "end": "3200940"
  },
  {
    "text": "to sto SEO has its own ingress and egress components that will handle all",
    "start": "3200940",
    "end": "3206190"
  },
  {
    "text": "of that for you so it's one of those things that if you have a load balancer out front really to simplify things I",
    "start": "3206190",
    "end": "3214980"
  },
  {
    "text": "would say push everything into sto rather than trying to manage it in both",
    "start": "3214980",
    "end": "3220849"
  },
  {
    "text": "all right so do you know if sto glue can be managed by spinnaker and if not you",
    "start": "3226319",
    "end": "3232599"
  },
  {
    "text": "happen to know if it's being worked on I",
    "start": "3232599",
    "end": "3239670"
  },
  {
    "text": "do not I don't know if I'm assuming that",
    "start": "3239670",
    "end": "3244980"
  },
  {
    "text": "spinnaker actually has integrations but",
    "start": "3244980",
    "end": "3250089"
  },
  {
    "text": "that's not something that I've looked into all right I think we're at the end",
    "start": "3250089",
    "end": "3257470"
  },
  {
    "text": "of our questions for today if for any reason we missed something or you have additional questions after the fact",
    "start": "3257470",
    "end": "3264450"
  },
  {
    "text": "please feel free to send an email to either webinars at CNCs IO or contact",
    "start": "3264450",
    "end": "3270280"
  },
  {
    "text": "Jason directly with the information on his slide so with that thank you",
    "start": "3270280",
    "end": "3277060"
  },
  {
    "text": "everyone for joining us today as a reminder the webinar recording and slides will be online within about 24",
    "start": "3277060",
    "end": "3284079"
  },
  {
    "text": "hours and we look forward to seeing you at a future ciancia webinar thanks again Jason and everyone have a",
    "start": "3284079",
    "end": "3290440"
  },
  {
    "text": "great day",
    "start": "3290440",
    "end": "3292800"
  }
]