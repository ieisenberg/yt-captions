[
  {
    "start": "0",
    "end": "42000"
  },
  {
    "text": "hi my name's elissa milk I'm one of the",
    "start": "1510",
    "end": "4028"
  },
  {
    "text": "senior maintainer of envoy as well as a",
    "start": "4029",
    "end": "6220"
  },
  {
    "text": "senior staff engineer at Google I've",
    "start": "6220",
    "end": "8559"
  },
  {
    "text": "said my last 11 years at Google working",
    "start": "8559",
    "end": "10090"
  },
  {
    "text": "on the GFE team the GP is a Google front",
    "start": "10090",
    "end": "12580"
  },
  {
    "text": "end it's the each to be proxied that",
    "start": "12580",
    "end": "14710"
  },
  {
    "text": "front ends all of Google's web traffic",
    "start": "14710",
    "end": "16209"
  },
  {
    "text": "so everything from Gmail to ads to web",
    "start": "16209",
    "end": "18190"
  },
  {
    "text": "search to cloud the whole shebang",
    "start": "18190",
    "end": "20050"
  },
  {
    "text": "so doing this for 11 years I've learned",
    "start": "20050",
    "end": "22990"
  },
  {
    "text": "a lot about how to do proxy incorrectly",
    "start": "22990",
    "end": "24970"
  },
  {
    "text": "and seen some spectacular failures when",
    "start": "24970",
    "end": "27820"
  },
  {
    "text": "practicing goes wrong and I kind of see",
    "start": "27820",
    "end": "29770"
  },
  {
    "text": "it as my personal mission on envoy to",
    "start": "29770",
    "end": "32349"
  },
  {
    "text": "bring the GE fees level of resilience",
    "start": "32349",
    "end": "34059"
  },
  {
    "text": "and reliability to the Anglais codebase",
    "start": "34059",
    "end": "35949"
  },
  {
    "text": "essentially as Google adopts envoy I",
    "start": "35949",
    "end": "38499"
  },
  {
    "text": "want to make sure that if we're going to",
    "start": "38499",
    "end": "39789"
  },
  {
    "text": "make mistakes at least we're making new",
    "start": "39789",
    "end": "41319"
  },
  {
    "text": "ones so before I get into what we're",
    "start": "41319",
    "end": "44170"
  },
  {
    "start": "42000",
    "end": "114000"
  },
  {
    "text": "doing with hardening envoy I want to",
    "start": "44170",
    "end": "45489"
  },
  {
    "text": "talk a little bit about why we have to",
    "start": "45489",
    "end": "46929"
  },
  {
    "text": "do this right we've been here all",
    "start": "46929",
    "end": "48280"
  },
  {
    "text": "morning hearing about people who've been",
    "start": "48280",
    "end": "49780"
  },
  {
    "text": "deploying envoy and how they're running",
    "start": "49780",
    "end": "51670"
  },
  {
    "text": "it as they're enter proxy it's great",
    "start": "51670",
    "end": "53199"
  },
  {
    "text": "lists been using it for years so what is",
    "start": "53199",
    "end": "55420"
  },
  {
    "text": "there left to do",
    "start": "55420",
    "end": "56109"
  },
  {
    "text": "well first off again lyft originally",
    "start": "56109",
    "end": "58539"
  },
  {
    "text": "open-source envoy there behind AWS so",
    "start": "58539",
    "end": "60760"
  },
  {
    "text": "they have AWS as a front line of defense",
    "start": "60760",
    "end": "62199"
  },
  {
    "text": "but as we've heard today there's more",
    "start": "62199",
    "end": "64628"
  },
  {
    "text": "and more people using envoy as an",
    "start": "64629",
    "end": "67060"
  },
  {
    "text": "unprotected edge proxy and this kind of",
    "start": "67060",
    "end": "68890"
  },
  {
    "text": "increases your attack surface because",
    "start": "68890",
    "end": "70570"
  },
  {
    "text": "it's different attack modes and and more",
    "start": "70570",
    "end": "73030"
  },
  {
    "text": "interesting targets for attacking and",
    "start": "73030",
    "end": "75340"
  },
  {
    "text": "then also as envoys adopted as a cloud",
    "start": "75340",
    "end": "77530"
  },
  {
    "text": "proxy you have to worry about the case",
    "start": "77530",
    "end": "79600"
  },
  {
    "text": "of untrusted and possibly malicious",
    "start": "79600",
    "end": "82000"
  },
  {
    "text": "upstreams as well as a control plane as",
    "start": "82000",
    "end": "84730"
  },
  {
    "text": "an attack surface you know people doing",
    "start": "84730",
    "end": "86950"
  },
  {
    "text": "conflicts of death so some of the work",
    "start": "86950",
    "end": "89440"
  },
  {
    "text": "that you know I and my team my larger",
    "start": "89440",
    "end": "91930"
  },
  {
    "text": "team at Google as well as the own voice",
    "start": "91930",
    "end": "93340"
  },
  {
    "text": "communication doing is trying to address",
    "start": "93340",
    "end": "95620"
  },
  {
    "text": "this through a combination of software",
    "start": "95620",
    "end": "97180"
  },
  {
    "text": "improvements improving resilience",
    "start": "97180",
    "end": "99070"
  },
  {
    "text": "against external attacks and hopefully",
    "start": "99070",
    "end": "101020"
  },
  {
    "text": "accidental internal attacks as the less",
    "start": "101020",
    "end": "103240"
  },
  {
    "text": "test improvements so improvements to",
    "start": "103240",
    "end": "105159"
  },
  {
    "text": "envoy integration test the integration",
    "start": "105159",
    "end": "106870"
  },
  {
    "text": "tests framework our Cir continuous",
    "start": "106870",
    "end": "109390"
  },
  {
    "text": "integration through adding fuzzing and",
    "start": "109390",
    "end": "111640"
  },
  {
    "text": "then coming soon and adding load testing",
    "start": "111640",
    "end": "113700"
  },
  {
    "text": "so starting with resilience against",
    "start": "113700",
    "end": "116350"
  },
  {
    "start": "114000",
    "end": "204000"
  },
  {
    "text": "external attacks because of course this",
    "start": "116350",
    "end": "117820"
  },
  {
    "text": "is where things get really fun my",
    "start": "117820",
    "end": "119979"
  },
  {
    "text": "starter project and envoy was trying to",
    "start": "119979",
    "end": "122110"
  },
  {
    "text": "close a trickle attack vector and what",
    "start": "122110",
    "end": "124150"
  },
  {
    "text": "the trickle attack is essentially envoy",
    "start": "124150",
    "end": "126790"
  },
  {
    "text": "eagerly buffers from upstream it really",
    "start": "126790",
    "end": "128769"
  },
  {
    "text": "wants to have data ready for the clients",
    "start": "128769",
    "end": "130989"
  },
  {
    "text": "to read as soon as a client is available",
    "start": "130989",
    "end": "132579"
  },
  {
    "text": "you know has available bandwidth",
    "start": "132579",
    "end": "134049"
  },
  {
    "text": "descendant",
    "start": "134049",
    "end": "134600"
  },
  {
    "text": "but the problem is is that means with",
    "start": "134600",
    "end": "136610"
  },
  {
    "text": "very few resources with a botnet and you",
    "start": "136610",
    "end": "139370"
  },
  {
    "text": "know opening a number of connections",
    "start": "139370",
    "end": "140570"
  },
  {
    "text": "that have large responses you can pretty",
    "start": "140570",
    "end": "142910"
  },
  {
    "text": "easily cause could cause envoy to early",
    "start": "142910",
    "end": "145820"
  },
  {
    "text": "buffer and buffer more and buffer more",
    "start": "145820",
    "end": "147260"
  },
  {
    "text": "and then crash out of memory which is",
    "start": "147260",
    "end": "149300"
  },
  {
    "text": "obviously not optimal",
    "start": "149300",
    "end": "150470"
  },
  {
    "text": "so my startup ratchet and envoy was",
    "start": "150470",
    "end": "152680"
  },
  {
    "text": "rewriting bits of the data plane based",
    "start": "152680",
    "end": "155060"
  },
  {
    "text": "on a design by Harvey - and that Cline",
    "start": "155060",
    "end": "156740"
  },
  {
    "text": "to add in memory buffer limits on every",
    "start": "156740",
    "end": "159560"
  },
  {
    "text": "buffer down from the network connection",
    "start": "159560",
    "end": "161210"
  },
  {
    "text": "buffer up to individual HT filters and",
    "start": "161210",
    "end": "163580"
  },
  {
    "text": "basically as buffers fill up they would",
    "start": "163580",
    "end": "165710"
  },
  {
    "text": "signal the source of incoming data to",
    "start": "165710",
    "end": "167600"
  },
  {
    "text": "back off you take a combination of TCP",
    "start": "167600",
    "end": "169940"
  },
  {
    "text": "congestion control and h2b to flow",
    "start": "169940",
    "end": "171560"
  },
  {
    "text": "control so coming back to this case of a",
    "start": "171560",
    "end": "173870"
  },
  {
    "text": "fast upstream and a slow downstream",
    "start": "173870",
    "end": "175370"
  },
  {
    "text": "again if you have this you know botnet",
    "start": "175370",
    "end": "177770"
  },
  {
    "text": "aimed at envoy and the downstream is",
    "start": "177770",
    "end": "179300"
  },
  {
    "text": "reading really slowly eventually the TCP",
    "start": "179300",
    "end": "182240"
  },
  {
    "text": "socket buffer to downstream and Philip",
    "start": "182240",
    "end": "183800"
  },
  {
    "text": "but a network connection would fill up",
    "start": "183800",
    "end": "185480"
  },
  {
    "text": "and then envoy would signal the router",
    "start": "185480",
    "end": "187790"
  },
  {
    "text": "to either 4-h to stop acknowledging data",
    "start": "187790",
    "end": "190220"
  },
  {
    "text": "so the peer would stop sending data for",
    "start": "190220",
    "end": "192050"
  },
  {
    "text": "that stream or 4-h to be one one or TCA",
    "start": "192050",
    "end": "194420"
  },
  {
    "text": "proxying simply stop reading from the",
    "start": "194420",
    "end": "196130"
  },
  {
    "text": "TCP socket and let TCP do its thing and",
    "start": "196130",
    "end": "198550"
  },
  {
    "text": "this is great but it is woefully",
    "start": "198550",
    "end": "200720"
  },
  {
    "text": "insufficient all it does is make your",
    "start": "200720",
    "end": "202670"
  },
  {
    "text": "attacker change their attack mode so the",
    "start": "202670",
    "end": "204860"
  },
  {
    "start": "204000",
    "end": "321000"
  },
  {
    "text": "next thing we had to do was downstream",
    "start": "204860",
    "end": "206060"
  },
  {
    "text": "circuit braking again you can have an",
    "start": "206060",
    "end": "208370"
  },
  {
    "text": "upper bound on how much memory each",
    "start": "208370",
    "end": "209900"
  },
  {
    "text": "stream can take and so then your",
    "start": "209900",
    "end": "211460"
  },
  {
    "text": "attacker just switches to opening many",
    "start": "211460",
    "end": "213200"
  },
  {
    "text": "many streams until again envoy crash is",
    "start": "213200",
    "end": "215030"
  },
  {
    "text": "that a memory or they keep opening new",
    "start": "215030",
    "end": "217130"
  },
  {
    "text": "connections until your system runs out",
    "start": "217130",
    "end": "218930"
  },
  {
    "text": "of file descriptors and again on boyhood",
    "start": "218930",
    "end": "221000"
  },
  {
    "text": "crash and this sort of attack mode has a",
    "start": "221000",
    "end": "223550"
  },
  {
    "text": "really high potential for cascading",
    "start": "223550",
    "end": "225110"
  },
  {
    "text": "failure you can imagine it's not even a",
    "start": "225110",
    "end": "226850"
  },
  {
    "text": "malicious botnet right if you run your",
    "start": "226850",
    "end": "228320"
  },
  {
    "text": "own voice hot you could just have an",
    "start": "228320",
    "end": "230270"
  },
  {
    "text": "unusually high traffic spike and your",
    "start": "230270",
    "end": "232700"
  },
  {
    "text": "traffic spikes you're on boys are",
    "start": "232700",
    "end": "233870"
  },
  {
    "text": "running hot some on way instance goes",
    "start": "233870",
    "end": "235640"
  },
  {
    "text": "over its limit it crashes and then your",
    "start": "235640",
    "end": "238160"
  },
  {
    "text": "fronted load balancer ends up spreading",
    "start": "238160",
    "end": "239690"
  },
  {
    "text": "the rest of that load that used to go to",
    "start": "239690",
    "end": "241400"
  },
  {
    "text": "that envoy to the rest of your cluster",
    "start": "241400",
    "end": "242990"
  },
  {
    "text": "and then one by one the on ways get",
    "start": "242990",
    "end": "245450"
  },
  {
    "text": "knocked over and beyond that it can be",
    "start": "245450",
    "end": "247520"
  },
  {
    "text": "really hard to recover that from this",
    "start": "247520",
    "end": "249110"
  },
  {
    "text": "type of failure because even if a",
    "start": "249110",
    "end": "250460"
  },
  {
    "text": "traffic spike is excited as your envoys",
    "start": "250460",
    "end": "252710"
  },
  {
    "text": "come up it's like a game of whack-a-mole",
    "start": "252710",
    "end": "253910"
  },
  {
    "text": "right they come up they sinkhole the",
    "start": "253910",
    "end": "256070"
  },
  {
    "text": "incoming traffic and they go right back",
    "start": "256070",
    "end": "257450"
  },
  {
    "text": "down again",
    "start": "257450",
    "end": "258739"
  },
  {
    "text": "and then again this is even more",
    "start": "258739",
    "end": "260840"
  },
  {
    "text": "dangerous when coupled with envoys prior",
    "start": "260840",
    "end": "263000"
  },
  {
    "text": "lack of keepalive timeouts on boy had",
    "start": "263000",
    "end": "265040"
  },
  {
    "text": "timeouts on the request path if you had",
    "start": "265040",
    "end": "266870"
  },
  {
    "text": "the buffer filter your",
    "start": "266870",
    "end": "268010"
  },
  {
    "text": "running without the buffer filter it was",
    "start": "268010",
    "end": "269600"
  },
  {
    "text": "pretty easy for again a malicious",
    "start": "269600",
    "end": "271370"
  },
  {
    "text": "attacker to send a bunch of post",
    "start": "271370",
    "end": "273020"
  },
  {
    "text": "requests and then have malicious use of",
    "start": "273020",
    "end": "275900"
  },
  {
    "text": "more system resources than you want them",
    "start": "275900",
    "end": "277430"
  },
  {
    "text": "to and again there was also a connection",
    "start": "277430",
    "end": "279770"
  },
  {
    "text": "League bug which I'll get into later",
    "start": "279770",
    "end": "281060"
  },
  {
    "text": "which would again allow attackers to",
    "start": "281060",
    "end": "283340"
  },
  {
    "text": "potentially use more system resources",
    "start": "283340",
    "end": "285110"
  },
  {
    "text": "and we want them to so Elijah and my",
    "start": "285110",
    "end": "287270"
  },
  {
    "text": "greater team implemented downstream",
    "start": "287270",
    "end": "288860"
  },
  {
    "text": "circuit braking and now you can",
    "start": "288860",
    "end": "290420"
  },
  {
    "text": "configure file descriptive limits and",
    "start": "290420",
    "end": "292490"
  },
  {
    "text": "memory limits and essentially as you",
    "start": "292490",
    "end": "294470"
  },
  {
    "text": "approach those FD limits envoy will stop",
    "start": "294470",
    "end": "296540"
  },
  {
    "text": "accepting new connections as you get new",
    "start": "296540",
    "end": "298460"
  },
  {
    "text": "those memory bounds on voice stops",
    "start": "298460",
    "end": "299870"
  },
  {
    "text": "accepting your streams so now this",
    "start": "299870",
    "end": "301730"
  },
  {
    "text": "combined with flow control gives you a",
    "start": "301730",
    "end": "303560"
  },
  {
    "text": "bound on system resources right you may",
    "start": "303560",
    "end": "305780"
  },
  {
    "text": "not serve everything that you want to",
    "start": "305780",
    "end": "307160"
  },
  {
    "text": "serve right where you're not accepting",
    "start": "307160",
    "end": "308690"
  },
  {
    "text": "you're going to have high latency or",
    "start": "308690",
    "end": "310400"
  },
  {
    "text": "timeouts and where you're rejecting",
    "start": "310400",
    "end": "311960"
  },
  {
    "text": "streams are going to have five hundreds",
    "start": "311960",
    "end": "313280"
  },
  {
    "text": "but having some number of five hundreds",
    "start": "313280",
    "end": "315020"
  },
  {
    "text": "is certainly better than having a",
    "start": "315020",
    "end": "316220"
  },
  {
    "text": "system-wide cascade failure",
    "start": "316220",
    "end": "317380"
  },
  {
    "text": "so that's resilience against external",
    "start": "317380",
    "end": "320660"
  },
  {
    "text": "attacks",
    "start": "320660",
    "end": "321230"
  },
  {
    "start": "321000",
    "end": "601000"
  },
  {
    "text": "moving on to internal attacks um one of",
    "start": "321230",
    "end": "324980"
  },
  {
    "text": "the areas Google's put a lot of work",
    "start": "324980",
    "end": "326750"
  },
  {
    "text": "into is protecting our back ends our up",
    "start": "326750",
    "end": "329300"
  },
  {
    "text": "streams from our proxies right it's",
    "start": "329300",
    "end": "331760"
  },
  {
    "text": "really really easy for a high",
    "start": "331760",
    "end": "333200"
  },
  {
    "text": "performance proxy to proxy enough",
    "start": "333200",
    "end": "334970"
  },
  {
    "text": "requests that you're gonna take out your",
    "start": "334970",
    "end": "336650"
  },
  {
    "text": "backends so one of the things we put a",
    "start": "336650",
    "end": "338990"
  },
  {
    "text": "lot of work into is improving on voice",
    "start": "338990",
    "end": "341870"
  },
  {
    "text": "load balancing so the first thing we did",
    "start": "341870",
    "end": "343610"
  },
  {
    "text": "is give unvoyage concept priorities",
    "start": "343610",
    "end": "345730"
  },
  {
    "text": "in-house at Google we tend to have",
    "start": "345730",
    "end": "348010"
  },
  {
    "text": "primaries and failover clusters so",
    "start": "348010",
    "end": "350510"
  },
  {
    "text": "essentially if something happens and you",
    "start": "350510",
    "end": "352160"
  },
  {
    "text": "have traffic routing to your primary",
    "start": "352160",
    "end": "354250"
  },
  {
    "text": "your primary up streams and then they",
    "start": "354250",
    "end": "356660"
  },
  {
    "text": "get overloaded or you forget to change",
    "start": "356660",
    "end": "358820"
  },
  {
    "text": "your config and you drain something you",
    "start": "358820",
    "end": "360500"
  },
  {
    "text": "want that traffic to gradually shift to",
    "start": "360500",
    "end": "362180"
  },
  {
    "text": "the fail overs with no interruption for",
    "start": "362180",
    "end": "364400"
  },
  {
    "text": "user web browsing on Voisine more",
    "start": "364400",
    "end": "367610"
  },
  {
    "text": "flexible than this because it allows an",
    "start": "367610",
    "end": "369530"
  },
  {
    "text": "unbounded number of priorities",
    "start": "369530",
    "end": "371030"
  },
  {
    "text": "essentially priority zero is your",
    "start": "371030",
    "end": "373010"
  },
  {
    "text": "primaries priority one is kind of",
    "start": "373010",
    "end": "375110"
  },
  {
    "text": "concept of failovers but you can have P",
    "start": "375110",
    "end": "376760"
  },
  {
    "text": "equals to P equals three you know as",
    "start": "376760",
    "end": "378650"
  },
  {
    "text": "many as you want to have and again the",
    "start": "378650",
    "end": "380450"
  },
  {
    "text": "algorithm is used to shift this traffic",
    "start": "380450",
    "end": "382400"
  },
  {
    "text": "over there's been a lot of thought put",
    "start": "382400",
    "end": "383780"
  },
  {
    "text": "into them they've worked at Google for",
    "start": "383780",
    "end": "385160"
  },
  {
    "text": "well over a decade making sure that as",
    "start": "385160",
    "end": "387440"
  },
  {
    "text": "you're up streams go unhealthy you shift",
    "start": "387440",
    "end": "389360"
  },
  {
    "text": "traffic over really gradually and shift",
    "start": "389360",
    "end": "391250"
  },
  {
    "text": "it back gradually so you don't have",
    "start": "391250",
    "end": "392810"
  },
  {
    "text": "query is kind of sloshing back and forth",
    "start": "392810",
    "end": "394490"
  },
  {
    "text": "in a way that could overwhelm your up",
    "start": "394490",
    "end": "396170"
  },
  {
    "text": "streams and cause outages in the first",
    "start": "396170",
    "end": "398060"
  },
  {
    "text": "place there's been some work put in to",
    "start": "398060",
    "end": "400580"
  },
  {
    "text": "improve fairness",
    "start": "400580",
    "end": "401660"
  },
  {
    "text": "so for example an earlier iteration of",
    "start": "401660",
    "end": "403610"
  },
  {
    "text": "one of the Envoy load balancers I had a",
    "start": "403610",
    "end": "407060"
  },
  {
    "text": "classic load balancing problem or didn't",
    "start": "407060",
    "end": "408680"
  },
  {
    "text": "have random offset as lift discovered",
    "start": "408680",
    "end": "410750"
  },
  {
    "text": "that they just may essentially what you",
    "start": "410750",
    "end": "412340"
  },
  {
    "text": "can have is a coordinated fleet of",
    "start": "412340",
    "end": "413690"
  },
  {
    "text": "envoys sending requests to upstream",
    "start": "413690",
    "end": "415280"
  },
  {
    "text": "number one and then upstream number two",
    "start": "415280",
    "end": "416810"
  },
  {
    "text": "and taking things out as I go along the",
    "start": "416810",
    "end": "418940"
  },
  {
    "text": "line and this is fairly easily fixed",
    "start": "418940",
    "end": "420920"
  },
  {
    "text": "with random offset but there's still a",
    "start": "420920",
    "end": "422630"
  },
  {
    "text": "little bit of work that needs to be done",
    "start": "422630",
    "end": "423980"
  },
  {
    "text": "if you have up streams with very",
    "start": "423980",
    "end": "426200"
  },
  {
    "text": "disparate weights and that'll happen",
    "start": "426200",
    "end": "427880"
  },
  {
    "text": "over the next year and then finally",
    "start": "427880",
    "end": "429830"
  },
  {
    "text": "there's been a lot of work put into",
    "start": "429830",
    "end": "431300"
  },
  {
    "text": "flexibility and load balancing on Blois",
    "start": "431300",
    "end": "433340"
  },
  {
    "text": "already had a great number of load",
    "start": "433340",
    "end": "434870"
  },
  {
    "text": "balancers and you know different ways",
    "start": "434870",
    "end": "436370"
  },
  {
    "text": "that you can route your traffic in terms",
    "start": "436370",
    "end": "437750"
  },
  {
    "text": "of least request or ram Brahman or",
    "start": "437750",
    "end": "440000"
  },
  {
    "text": "weighted round robin but Snow Patterson",
    "start": "440000",
    "end": "442010"
  },
  {
    "text": "as you talked about earlier also made it",
    "start": "442010",
    "end": "443630"
  },
  {
    "text": "that we had flexibility in retry",
    "start": "443630",
    "end": "445490"
  },
  {
    "text": "behaviour because again if you're",
    "start": "445490",
    "end": "447260"
  },
  {
    "text": "sending so much traffic through your up",
    "start": "447260",
    "end": "448760"
  },
  {
    "text": "streams that you're overloading them",
    "start": "448760",
    "end": "449990"
  },
  {
    "text": "they're going to send back signals and",
    "start": "449990",
    "end": "451880"
  },
  {
    "text": "then the retry logic to try to actually",
    "start": "451880",
    "end": "454730"
  },
  {
    "text": "send this craze somewhere else may be",
    "start": "454730",
    "end": "456620"
  },
  {
    "text": "different for Google than it is for lift",
    "start": "456620",
    "end": "459260"
  },
  {
    "text": "than it is for square so having this be",
    "start": "459260",
    "end": "461360"
  },
  {
    "text": "an easily pluggable interface as many",
    "start": "461360",
    "end": "463910"
  },
  {
    "text": "things and envoy are so that everyone",
    "start": "463910",
    "end": "465770"
  },
  {
    "text": "can put in their own custom business",
    "start": "465770",
    "end": "466880"
  },
  {
    "text": "logic and do retries based on the",
    "start": "466880",
    "end": "469280"
  },
  {
    "text": "particulars of their deployment is a",
    "start": "469280",
    "end": "470810"
  },
  {
    "text": "really cool option that we've added on",
    "start": "470810",
    "end": "473180"
  },
  {
    "text": "the way along with improvements to load",
    "start": "473180",
    "end": "475580"
  },
  {
    "text": "balancing we'd added a configuration",
    "start": "475580",
    "end": "477530"
  },
  {
    "text": "safeguard so the folks at list upstream",
    "start": "477530",
    "end": "479750"
  },
  {
    "text": "they're pretty validation suite so",
    "start": "479750",
    "end": "481640"
  },
  {
    "text": "essentially as people add new envoy",
    "start": "481640",
    "end": "483290"
  },
  {
    "text": "config you can annotate it with bounce",
    "start": "483290",
    "end": "485570"
  },
  {
    "text": "so put a limit on how much memory a",
    "start": "485570",
    "end": "487220"
  },
  {
    "text": "given string can take or put a limit on",
    "start": "487220",
    "end": "489050"
  },
  {
    "text": "how many entries or repeated field can",
    "start": "489050",
    "end": "491180"
  },
  {
    "text": "have and this allows us to do very very",
    "start": "491180",
    "end": "493160"
  },
  {
    "text": "low costs at best effort avoidance of",
    "start": "493160",
    "end": "495350"
  },
  {
    "text": "poison can fix right everyone should",
    "start": "495350",
    "end": "497300"
  },
  {
    "text": "absolutely validate customer config",
    "start": "497300",
    "end": "499160"
  },
  {
    "text": "before they littered onto envoys it",
    "start": "499160",
    "end": "500780"
  },
  {
    "text": "should not be trusting the Envoy config",
    "start": "500780",
    "end": "502700"
  },
  {
    "text": "validation alone but again making sure",
    "start": "502700",
    "end": "505070"
  },
  {
    "text": "that Naga has some built in resilience",
    "start": "505070",
    "end": "506630"
  },
  {
    "text": "is is fairly important and then it's",
    "start": "506630",
    "end": "509780"
  },
  {
    "text": "coming soon hopefully you'll a queue for",
    "start": "509780",
    "end": "511400"
  },
  {
    "text": "if not early q1 we're gonna be adding",
    "start": "511400",
    "end": "513349"
  },
  {
    "text": "the idea of reload and rollback test and",
    "start": "513349",
    "end": "515270"
  },
  {
    "text": "I want to get in a little bit on why",
    "start": "515270",
    "end": "517010"
  },
  {
    "text": "Google thinks this is really important",
    "start": "517010",
    "end": "519190"
  },
  {
    "text": "we learned this internally unfortunately",
    "start": "519190",
    "end": "521960"
  },
  {
    "text": "do overdo a particularly memorable adage",
    "start": "521960",
    "end": "524270"
  },
  {
    "text": "like with Envoy internal at Google we",
    "start": "524270",
    "end": "527870"
  },
  {
    "text": "tend to roll out features separate for",
    "start": "527870",
    "end": "529970"
  },
  {
    "text": "the binary so we configured them we flag",
    "start": "529970",
    "end": "531980"
  },
  {
    "text": "guard them we roll out the binary and",
    "start": "531980",
    "end": "533450"
  },
  {
    "text": "the way push a config to turn these",
    "start": "533450",
    "end": "534860"
  },
  {
    "text": "features",
    "start": "534860",
    "end": "535250"
  },
  {
    "text": "in case they're buggy what's really",
    "start": "535250",
    "end": "537170"
  },
  {
    "text": "important is that all of these features",
    "start": "537170",
    "end": "538550"
  },
  {
    "text": "are well back safe",
    "start": "538550",
    "end": "539540"
  },
  {
    "text": "if you roll out a config it doesn't work",
    "start": "539540",
    "end": "541370"
  },
  {
    "text": "the way that you want you need that roll",
    "start": "541370",
    "end": "542810"
  },
  {
    "text": "back to actually reinstate prior",
    "start": "542810",
    "end": "544160"
  },
  {
    "text": "behavior and we had one particularly",
    "start": "544160",
    "end": "546439"
  },
  {
    "text": "memorable instance where that didn't",
    "start": "546439",
    "end": "548029"
  },
  {
    "text": "work right we rolled config out it",
    "start": "548029",
    "end": "550129"
  },
  {
    "text": "didn't work the way one in she or",
    "start": "550129",
    "end": "551120"
  },
  {
    "text": "operations team like you do rolled it",
    "start": "551120",
    "end": "552589"
  },
  {
    "text": "back and then the outage continued right",
    "start": "552589",
    "end": "555259"
  },
  {
    "text": "and then you said around dinner angle",
    "start": "555259",
    "end": "556699"
  },
  {
    "text": "was it actually they could think that",
    "start": "556699",
    "end": "557720"
  },
  {
    "text": "caused the problem with something else",
    "start": "557720",
    "end": "559040"
  },
  {
    "text": "and then the only way to guarantee the",
    "start": "559040",
    "end": "561500"
  },
  {
    "text": "prior behavior is do a sleep ride",
    "start": "561500",
    "end": "563029"
  },
  {
    "text": "restart right resetting every TCP",
    "start": "563029",
    "end": "565100"
  },
  {
    "text": "connection",
    "start": "565100",
    "end": "565639"
  },
  {
    "text": "resetting every stream it's really not",
    "start": "565639",
    "end": "567620"
  },
  {
    "text": "enjoyable and I've caught bugs in review",
    "start": "567620",
    "end": "570709"
  },
  {
    "text": "visually that were sent up you know for",
    "start": "570709",
    "end": "573560"
  },
  {
    "text": "review and upstream envoy that were not",
    "start": "573560",
    "end": "575209"
  },
  {
    "text": "rollback safe",
    "start": "575209",
    "end": "575959"
  },
  {
    "text": "so in house let me have this particular",
    "start": "575959",
    "end": "577670"
  },
  {
    "text": "outage we added best practices that when",
    "start": "577670",
    "end": "580730"
  },
  {
    "text": "we're turning on a new feature via",
    "start": "580730",
    "end": "581899"
  },
  {
    "text": "config we do reload a rollback test so",
    "start": "581899",
    "end": "583910"
  },
  {
    "text": "essentially an integration test where",
    "start": "583910",
    "end": "585649"
  },
  {
    "text": "you send a request through get a",
    "start": "585649",
    "end": "586730"
  },
  {
    "text": "response back and then use the internal",
    "start": "586730",
    "end": "588649"
  },
  {
    "text": "equivalent of XDS to change the conflict",
    "start": "588649",
    "end": "591079"
  },
  {
    "text": "to turn the feature on send another",
    "start": "591079",
    "end": "592610"
  },
  {
    "text": "request through and back make sure that",
    "start": "592610",
    "end": "594470"
  },
  {
    "text": "the behavior has changed and then again",
    "start": "594470",
    "end": "596180"
  },
  {
    "text": "and one line of code ruled that back and",
    "start": "596180",
    "end": "597800"
  },
  {
    "text": "make sure that the original behavior is",
    "start": "597800",
    "end": "599509"
  },
  {
    "text": "reinstated super important and getting",
    "start": "599509",
    "end": "602360"
  },
  {
    "start": "601000",
    "end": "763000"
  },
  {
    "text": "into that there's a whole slew of",
    "start": "602360",
    "end": "604160"
  },
  {
    "text": "improvements we've made to the Envoy",
    "start": "604160",
    "end": "606160"
  },
  {
    "text": "integration test framework and this is",
    "start": "606160",
    "end": "608059"
  },
  {
    "text": "where I tend to geek out of it I love",
    "start": "608059",
    "end": "609470"
  },
  {
    "text": "integration tests this dates back to",
    "start": "609470",
    "end": "612050"
  },
  {
    "text": "when I started at Google 11 years ago I",
    "start": "612050",
    "end": "613639"
  },
  {
    "text": "was a terrified niggler and I was very",
    "start": "613639",
    "end": "615259"
  },
  {
    "text": "well aware that any code I checked in",
    "start": "615259",
    "end": "617600"
  },
  {
    "text": "could not you know not just break you",
    "start": "617600",
    "end": "619939"
  },
  {
    "text": "know Google ads that break all of Google",
    "start": "619939",
    "end": "621589"
  },
  {
    "text": "right so I invested a lot of time in the",
    "start": "621589",
    "end": "623959"
  },
  {
    "text": "GPS integration test framework and I've",
    "start": "623959",
    "end": "625550"
  },
  {
    "text": "been trying to bring these things one by",
    "start": "625550",
    "end": "627439"
  },
  {
    "text": "one over nominally so the first thing I",
    "start": "627439",
    "end": "630050"
  },
  {
    "text": "did again starting out envoy I basically",
    "start": "630050",
    "end": "632449"
  },
  {
    "text": "made it really easy to do what most",
    "start": "632449",
    "end": "634160"
  },
  {
    "text": "people want to do when they're doing",
    "start": "634160",
    "end": "635389"
  },
  {
    "text": "testing is send a request and get a",
    "start": "635389",
    "end": "636829"
  },
  {
    "text": "response right we're testing a proxy",
    "start": "636829",
    "end": "638449"
  },
  {
    "text": "there should be pretty simple so it's",
    "start": "638449",
    "end": "640370"
  },
  {
    "text": "now 90% fewer lines of code for testing",
    "start": "640370",
    "end": "642949"
  },
  {
    "text": "than happy path we also added utilities",
    "start": "642949",
    "end": "645620"
  },
  {
    "text": "to test to end end configuration so",
    "start": "645620",
    "end": "647420"
  },
  {
    "text": "again most apartment features an envoy",
    "start": "647420",
    "end": "649040"
  },
  {
    "text": "are conflict guarded people put them in",
    "start": "649040",
    "end": "650509"
  },
  {
    "text": "filters people put them you know as",
    "start": "650509",
    "end": "652399"
  },
  {
    "text": "fields on the HTTP connection manager so",
    "start": "652399",
    "end": "654470"
  },
  {
    "text": "instead of doing a copy-paste edit of",
    "start": "654470",
    "end": "656360"
  },
  {
    "text": "something like 40 lines of JSON which",
    "start": "656360",
    "end": "658100"
  },
  {
    "text": "again I always end up getting wrong it's",
    "start": "658100",
    "end": "660740"
  },
  {
    "text": "now one to two lines of C++ code right I",
    "start": "660740",
    "end": "663170"
  },
  {
    "text": "just want to add this filter here's my",
    "start": "663170",
    "end": "664579"
  },
  {
    "text": "filter config I just want to tweak this",
    "start": "664579",
    "end": "666079"
  },
  {
    "text": "particular field I'm making it really",
    "start": "666079",
    "end": "668029"
  },
  {
    "text": "easy",
    "start": "668029",
    "end": "668570"
  },
  {
    "text": "people to write integration tests",
    "start": "668570",
    "end": "669740"
  },
  {
    "text": "because I've seen multiple multiple PRS",
    "start": "669740",
    "end": "671870"
  },
  {
    "text": "or people did comprehensive unit tests",
    "start": "671870",
    "end": "673820"
  },
  {
    "text": "envoy has a really high bar for code",
    "start": "673820",
    "end": "675440"
  },
  {
    "text": "coverage but when they ask people to add",
    "start": "675440",
    "end": "677180"
  },
  {
    "text": "integration tests it turns out that the",
    "start": "677180",
    "end": "679220"
  },
  {
    "text": "unit test did it test the exact stream",
    "start": "679220",
    "end": "681380"
  },
  {
    "text": "lifetime that actually happens in",
    "start": "681380",
    "end": "683000"
  },
  {
    "text": "production right so these unit tests",
    "start": "683000",
    "end": "684620"
  },
  {
    "text": "ended up finding issues that weren't",
    "start": "684620",
    "end": "685880"
  },
  {
    "text": "caught the integration test down here",
    "start": "685880",
    "end": "687620"
  },
  {
    "text": "she's at work up by the unit tests we",
    "start": "687620",
    "end": "689960"
  },
  {
    "text": "made it a lot easier to do a cross",
    "start": "689960",
    "end": "691670"
  },
  {
    "text": "particle testing so again if you want to",
    "start": "691670",
    "end": "693560"
  },
  {
    "text": "test full mesh of HTP one one downstream",
    "start": "693560",
    "end": "695990"
  },
  {
    "text": "edge to downstream h1 upstream h2",
    "start": "695990",
    "end": "698210"
  },
  {
    "text": "upstream you can do it just by",
    "start": "698210",
    "end": "699970"
  },
  {
    "text": "subclassing the appropriate class and",
    "start": "699970",
    "end": "702170"
  },
  {
    "text": "this is really important as people are",
    "start": "702170",
    "end": "703400"
  },
  {
    "text": "messing around in the G RPC and adding",
    "start": "703400",
    "end": "704960"
  },
  {
    "text": "trailers and making sure that as you do",
    "start": "704960",
    "end": "706880"
  },
  {
    "text": "these upgrades and downgrades from H to",
    "start": "706880",
    "end": "708290"
  },
  {
    "text": "B 1 to H 2 that things are working as",
    "start": "708290",
    "end": "710720"
  },
  {
    "text": "they expect we added an automated",
    "start": "710720",
    "end": "713090"
  },
  {
    "text": "upstream and you know this both helps",
    "start": "713090",
    "end": "715870"
  },
  {
    "text": "again make the happy path of sending",
    "start": "715870",
    "end": "718100"
  },
  {
    "text": "requests and response easier but it also",
    "start": "718100",
    "end": "719960"
  },
  {
    "text": "ends up fussing timing conditions we",
    "start": "719960",
    "end": "722150"
  },
  {
    "text": "found out at Google a lot of the time",
    "start": "722150",
    "end": "723410"
  },
  {
    "text": "when you have crashing bugs it's due to",
    "start": "723410",
    "end": "724970"
  },
  {
    "text": "a specific timing where you disconnect",
    "start": "724970",
    "end": "726890"
  },
  {
    "text": "at just the wrong moment or you reset a",
    "start": "726890",
    "end": "728900"
  },
  {
    "text": "stream at just the wrong moment so",
    "start": "728900",
    "end": "730400"
  },
  {
    "text": "having the timing of the client and the",
    "start": "730400",
    "end": "732650"
  },
  {
    "text": "timing of the upstream completely",
    "start": "732650",
    "end": "734000"
  },
  {
    "text": "decoupled and tests and allows you to",
    "start": "734000",
    "end": "735560"
  },
  {
    "text": "kind of Fuzzy's time and conditions and",
    "start": "735560",
    "end": "737000"
  },
  {
    "text": "hopefully catch them over repeated CI",
    "start": "737000",
    "end": "738830"
  },
  {
    "text": "runs and then finally an improved debug",
    "start": "738830",
    "end": "741890"
  },
  {
    "text": "ability sorry I'm skipping that we made",
    "start": "741890",
    "end": "744140"
  },
  {
    "text": "it a lot easier to debug the integration",
    "start": "744140",
    "end": "745580"
  },
  {
    "text": "test so moving things out of the closure",
    "start": "745580",
    "end": "747170"
  },
  {
    "text": "base so you can use gdb Michael on my",
    "start": "747170",
    "end": "749840"
  },
  {
    "text": "greater team did a lot of work to change",
    "start": "749840",
    "end": "751430"
  },
  {
    "text": "the he failure mode from infinite",
    "start": "751430",
    "end": "752870"
  },
  {
    "text": "timeouts to fast fail timeouts telling",
    "start": "752870",
    "end": "754880"
  },
  {
    "text": "you what went wrong and then again",
    "start": "754880",
    "end": "756380"
  },
  {
    "text": "changing it so that a lot of the test",
    "start": "756380",
    "end": "758420"
  },
  {
    "text": "failures inform you what you've done",
    "start": "758420",
    "end": "760190"
  },
  {
    "text": "wrong and point you to documentation on",
    "start": "760190",
    "end": "761720"
  },
  {
    "text": "how you might be able to fix it and so",
    "start": "761720",
    "end": "764930"
  },
  {
    "start": "763000",
    "end": "881000"
  },
  {
    "text": "all of these integration test",
    "start": "764930",
    "end": "766070"
  },
  {
    "text": "improvements are kind of have their",
    "start": "766070",
    "end": "767510"
  },
  {
    "text": "effect multiplied by improvements we've",
    "start": "767510",
    "end": "769070"
  },
  {
    "text": "made a CI so now every PR that goes out",
    "start": "769070",
    "end": "771650"
  },
  {
    "text": "for review for Envoy gets run through",
    "start": "771650",
    "end": "773360"
  },
  {
    "text": "address sanitizer thread sanitizer on",
    "start": "773360",
    "end": "775430"
  },
  {
    "text": "the undefined behavior sanitizer and",
    "start": "775430",
    "end": "777470"
  },
  {
    "text": "clanked ID and these regularly catch",
    "start": "777470",
    "end": "779420"
  },
  {
    "text": "issues before they're actually checked",
    "start": "779420",
    "end": "781070"
  },
  {
    "text": "in I can't tell you the number of peers",
    "start": "781070",
    "end": "783080"
  },
  {
    "text": "I've seen that passive release built and",
    "start": "783080",
    "end": "784580"
  },
  {
    "text": "failed one of the sanitizers I didn't",
    "start": "784580",
    "end": "786350"
  },
  {
    "text": "want to admit how many peers of my own",
    "start": "786350",
    "end": "787790"
  },
  {
    "text": "have passed the release valve but failed",
    "start": "787790",
    "end": "789770"
  },
  {
    "text": "one of these sanitizers they're really",
    "start": "789770",
    "end": "791870"
  },
  {
    "text": "important they catch a lot of bugs also",
    "start": "791870",
    "end": "794030"
  },
  {
    "text": "the increased sirens do catch real",
    "start": "794030",
    "end": "795920"
  },
  {
    "text": "production bugs on their own we've had",
    "start": "795920",
    "end": "797780"
  },
  {
    "text": "two issues I can remember offhand that",
    "start": "797780",
    "end": "800120"
  },
  {
    "text": "were caught by CI",
    "start": "800120",
    "end": "801950"
  },
  {
    "text": "by these increased runs because the more",
    "start": "801950",
    "end": "804139"
  },
  {
    "text": "people we have developing on envoy the",
    "start": "804139",
    "end": "805820"
  },
  {
    "text": "more times our CI gets executed",
    "start": "805820",
    "end": "807980"
  },
  {
    "text": "so the to remember offhand there was a",
    "start": "807980",
    "end": "809779"
  },
  {
    "text": "backup bug a race condition between L 7",
    "start": "809779",
    "end": "812269"
  },
  {
    "text": "and L 4 where essentially a user was",
    "start": "812269",
    "end": "814760"
  },
  {
    "text": "doing a post the upstream sent in early",
    "start": "814760",
    "end": "817459"
  },
  {
    "text": "400 close a connection an envoy detected",
    "start": "817459",
    "end": "819920"
  },
  {
    "text": "the connection close before it had read",
    "start": "819920",
    "end": "821329"
  },
  {
    "text": "that 400 so it treated as a server error",
    "start": "821329",
    "end": "823279"
  },
  {
    "text": "and translated a 400 and form these are",
    "start": "823279",
    "end": "825410"
  },
  {
    "text": "what they done wrong into a 500 you know",
    "start": "825410",
    "end": "827600"
  },
  {
    "text": "and Google takes five hundreds pretty",
    "start": "827600",
    "end": "829070"
  },
  {
    "text": "seriously this actually had been caught",
    "start": "829070",
    "end": "831079"
  },
  {
    "text": "and filed by sto but it was caught by CI",
    "start": "831079",
    "end": "833089"
  },
  {
    "text": "as well and if we'd had more CI runs see",
    "start": "833089",
    "end": "835070"
  },
  {
    "text": "I would have caught it first and there",
    "start": "835070",
    "end": "836810"
  },
  {
    "text": "was another issue in this connection",
    "start": "836810",
    "end": "837829"
  },
  {
    "text": "League I mentioned earlier and this was",
    "start": "837829",
    "end": "840050"
  },
  {
    "text": "an issue where a classic errno bug where",
    "start": "840050",
    "end": "842300"
  },
  {
    "text": "envoy write to a close socket the kernel",
    "start": "842300",
    "end": "844310"
  },
  {
    "text": "wouldn't form envoy that the wrote",
    "start": "844310",
    "end": "845630"
  },
  {
    "text": "failed",
    "start": "845630",
    "end": "846019"
  },
  {
    "text": "we'd logged the err no and the very act",
    "start": "846019",
    "end": "848120"
  },
  {
    "text": "of logging the air overrode it if the",
    "start": "848120",
    "end": "850519"
  },
  {
    "text": "login flash very rare race condition",
    "start": "850519",
    "end": "852440"
  },
  {
    "text": "maybe one in five thousand times but our",
    "start": "852440",
    "end": "854600"
  },
  {
    "text": "CI caught it we debugged it and fixed it",
    "start": "854600",
    "end": "856250"
  },
  {
    "text": "and this had been a bug that had been an",
    "start": "856250",
    "end": "857449"
  },
  {
    "text": "envoy since it was written right and",
    "start": "857449",
    "end": "859519"
  },
  {
    "text": "that's now fixed and along with you know",
    "start": "859519",
    "end": "862040"
  },
  {
    "text": "all the CI improvements we now have",
    "start": "862040",
    "end": "863540"
  },
  {
    "text": "detailed instructions for reproducing",
    "start": "863540",
    "end": "864980"
  },
  {
    "text": "and deflating test failures there's",
    "start": "864980",
    "end": "866839"
  },
  {
    "text": "essentially a magic magic Basel",
    "start": "866839",
    "end": "868610"
  },
  {
    "text": "invocation you can run that brings it",
    "start": "868610",
    "end": "870079"
  },
  {
    "text": "from one in five thousand to one in five",
    "start": "870079",
    "end": "871579"
  },
  {
    "text": "or so to make it a lot easier to debug",
    "start": "871579",
    "end": "873970"
  },
  {
    "text": "so again I'm a wax on about integration",
    "start": "873970",
    "end": "876829"
  },
  {
    "text": "test the problem with integration tests",
    "start": "876829",
    "end": "878420"
  },
  {
    "text": "is they only actually catch issues you",
    "start": "878420",
    "end": "880160"
  },
  {
    "text": "think to test and this is where fuzzing",
    "start": "880160",
    "end": "882019"
  },
  {
    "start": "881000",
    "end": "957000"
  },
  {
    "text": "comes in so Harvey - again on my team",
    "start": "882019",
    "end": "884000"
  },
  {
    "text": "has but a ton of work in - on boy",
    "start": "884000",
    "end": "885649"
  },
  {
    "text": "fuzzing",
    "start": "885649",
    "end": "886130"
  },
  {
    "text": "we now have 14 buzzers coming covering a",
    "start": "886130",
    "end": "889130"
  },
  {
    "text": "combination of untrusted code like our",
    "start": "889130",
    "end": "891110"
  },
  {
    "text": "each each to be at h2 code X as well as",
    "start": "891110",
    "end": "893570"
  },
  {
    "text": "internal fuzzing like convict buzzing",
    "start": "893570",
    "end": "895360"
  },
  {
    "text": "and these run as part of our CI but they",
    "start": "895360",
    "end": "897769"
  },
  {
    "text": "also run independently in cluster of us",
    "start": "897769",
    "end": "899380"
  },
  {
    "text": "Harvey's got a ton of work here it's",
    "start": "899380",
    "end": "901339"
  },
  {
    "text": "over 80 PRS and over 35 bug fixed I",
    "start": "901339",
    "end": "904490"
  },
  {
    "text": "started by going through git log to try",
    "start": "904490",
    "end": "906170"
  },
  {
    "text": "to find exactly what fixes are were and",
    "start": "906170",
    "end": "907730"
  },
  {
    "text": "I gave up and asked Harvey because it",
    "start": "907730",
    "end": "909110"
  },
  {
    "text": "was just too many",
    "start": "909110",
    "end": "909709"
  },
  {
    "text": "35 plus and these are serious bugs right",
    "start": "909709",
    "end": "912350"
  },
  {
    "text": "these are bugs that could crash Envoy",
    "start": "912350",
    "end": "913699"
  },
  {
    "text": "that could cause deadlock that would",
    "start": "913699",
    "end": "915589"
  },
  {
    "text": "fail internal code assertions",
    "start": "915589",
    "end": "916819"
  },
  {
    "text": "essentially undefined behavior that",
    "start": "916819",
    "end": "918889"
  },
  {
    "text": "would allow buffer overflow and goodness",
    "start": "918889",
    "end": "920360"
  },
  {
    "text": "only knows what I'm gonna let you know a",
    "start": "920360",
    "end": "921560"
  },
  {
    "text": "malicious person could do with that so",
    "start": "921560",
    "end": "923089"
  },
  {
    "text": "it's really really important and the",
    "start": "923089",
    "end": "925190"
  },
  {
    "text": "fuzzing is also an important part of",
    "start": "925190",
    "end": "926630"
  },
  {
    "text": "envoy security story right we have a",
    "start": "926630",
    "end": "928490"
  },
  {
    "text": "really good team a maintainer is doing",
    "start": "928490",
    "end": "930199"
  },
  {
    "text": "code reviews for envoy and paying a lot",
    "start": "930199",
    "end": "932390"
  },
  {
    "text": "of attention to what goes gets checked",
    "start": "932390",
    "end": "934610"
  },
  {
    "text": "in",
    "start": "934610",
    "end": "934970"
  },
  {
    "text": "but we also import libraries that other",
    "start": "934970",
    "end": "936560"
  },
  {
    "text": "people write right and the maintainers",
    "start": "936560",
    "end": "937730"
  },
  {
    "text": "don't pay a whole lot of attention as to",
    "start": "937730",
    "end": "939290"
  },
  {
    "text": "what goes into HTTP parser or ng HTTP -",
    "start": "939290",
    "end": "941959"
  },
  {
    "text": "for example so imagine someone getting",
    "start": "941959",
    "end": "944060"
  },
  {
    "text": "some malicious code at MGH - B - and",
    "start": "944060",
    "end": "945769"
  },
  {
    "text": "then envoy imports that right we need",
    "start": "945769",
    "end": "947629"
  },
  {
    "text": "some way of detecting that and the",
    "start": "947629",
    "end": "949579"
  },
  {
    "text": "fuzzer is again throwing some",
    "start": "949579",
    "end": "951050"
  },
  {
    "text": "combination of crafted and random data",
    "start": "951050",
    "end": "952660"
  },
  {
    "text": "and Envoy are the sort of thing that",
    "start": "952660",
    "end": "955069"
  },
  {
    "text": "would suss this sort of issue out along",
    "start": "955069",
    "end": "958519"
  },
  {
    "start": "957000",
    "end": "1035000"
  },
  {
    "text": "with flensing again we are working now",
    "start": "958519",
    "end": "960709"
  },
  {
    "text": "on load testing so Harvey and Josh",
    "start": "960709",
    "end": "962720"
  },
  {
    "text": "Marantz are working with an external",
    "start": "962720",
    "end": "964220"
  },
  {
    "text": "company we amp to try to have an",
    "start": "964220",
    "end": "965990"
  },
  {
    "text": "upstream envoy load testing harness and",
    "start": "965990",
    "end": "967910"
  },
  {
    "text": "this is super important you know another",
    "start": "967910",
    "end": "969889"
  },
  {
    "text": "way to catch bugs before they hit prod",
    "start": "969889",
    "end": "971240"
  },
  {
    "text": "for lyft or for any of the other Envoy",
    "start": "971240",
    "end": "973189"
  },
  {
    "text": "users and the last six months alone",
    "start": "973189",
    "end": "975110"
  },
  {
    "text": "despite all these improvements to",
    "start": "975110",
    "end": "976730"
  },
  {
    "text": "integration test despite all these",
    "start": "976730",
    "end": "978290"
  },
  {
    "text": "fuzzers we've still had six different",
    "start": "978290",
    "end": "979759"
  },
  {
    "text": "PRS that needed to be rolled back right",
    "start": "979759",
    "end": "982009"
  },
  {
    "text": "right after check-in a combination of",
    "start": "982009",
    "end": "983839"
  },
  {
    "text": "crashes CPU regressions and straight-up",
    "start": "983839",
    "end": "986329"
  },
  {
    "text": "buggy functional changes right I'd like",
    "start": "986329",
    "end": "989000"
  },
  {
    "text": "us to be better here and this doesn't",
    "start": "989000",
    "end": "991279"
  },
  {
    "text": "even include bugs that we found more",
    "start": "991279",
    "end": "992480"
  },
  {
    "text": "than a week or two later which you know",
    "start": "992480",
    "end": "994069"
  },
  {
    "text": "we're too complicated to rollback and we",
    "start": "994069",
    "end": "995480"
  },
  {
    "text": "essentially fixed in mind right and some",
    "start": "995480",
    "end": "997910"
  },
  {
    "text": "of these things really need to be in",
    "start": "997910",
    "end": "999949"
  },
  {
    "text": "covered with load testing right it's",
    "start": "999949",
    "end": "1001089"
  },
  {
    "text": "hard to figure out if something's gonna",
    "start": "1001089",
    "end": "1002529"
  },
  {
    "text": "be a CPU aggression just by doing static",
    "start": "1002529",
    "end": "1004240"
  },
  {
    "text": "code analysis so having an external load",
    "start": "1004240",
    "end": "1006430"
  },
  {
    "text": "testing harness where someone can run a",
    "start": "1006430",
    "end": "1008019"
  },
  {
    "text": "load test on a clean pr4 master and then",
    "start": "1008019",
    "end": "1010480"
  },
  {
    "text": "run with their high risk you knows maybe",
    "start": "1010480",
    "end": "1012550"
  },
  {
    "text": "this is causing CPU problems PR and see",
    "start": "1012550",
    "end": "1015309"
  },
  {
    "text": "what the actual production impact is",
    "start": "1015309",
    "end": "1016809"
  },
  {
    "text": "it's a lot nicer than saying hey guys at",
    "start": "1016809",
    "end": "1018699"
  },
  {
    "text": "lift you mind smoke testing this for us",
    "start": "1018699",
    "end": "1020110"
  },
  {
    "text": "which is our current best practice um",
    "start": "1020110",
    "end": "1022990"
  },
  {
    "text": "and again you know there's a lot of",
    "start": "1022990",
    "end": "1024400"
  },
  {
    "text": "things that you're you're only gonna",
    "start": "1024400",
    "end": "1025510"
  },
  {
    "text": "suss out with like load testing you know",
    "start": "1025510",
    "end": "1026798"
  },
  {
    "text": "finding issues with downstream circuit",
    "start": "1026799",
    "end": "1028298"
  },
  {
    "text": "braking or finding things where",
    "start": "1028299",
    "end": "1029380"
  },
  {
    "text": "different streams are interacting better",
    "start": "1029380",
    "end": "1030668"
  },
  {
    "text": "this is a sort of thing that you end up",
    "start": "1030669",
    "end": "1032980"
  },
  {
    "text": "finding through load testing and then",
    "start": "1032980",
    "end": "1036100"
  },
  {
    "start": "1035000",
    "end": "1211000"
  },
  {
    "text": "finally as much as I hate to admit it",
    "start": "1036100",
    "end": "1037418"
  },
  {
    "text": "which is why I didn't include it in my",
    "start": "1037419",
    "end": "1038860"
  },
  {
    "text": "index slide the really last line of",
    "start": "1038860",
    "end": "1041798"
  },
  {
    "text": "defense here is adoption you know while",
    "start": "1041799",
    "end": "1043630"
  },
  {
    "text": "production is the last place you ever",
    "start": "1043630",
    "end": "1044980"
  },
  {
    "text": "want to cache I choose it's bound to",
    "start": "1044980",
    "end": "1046329"
  },
  {
    "text": "happen what are the weirder bugs I've",
    "start": "1046329",
    "end": "1048280"
  },
  {
    "text": "seen in my time at Google was an issue",
    "start": "1048280",
    "end": "1050650"
  },
  {
    "text": "where it was only for users whose data",
    "start": "1050650",
    "end": "1053710"
  },
  {
    "text": "was transparently proxied coming from",
    "start": "1053710",
    "end": "1055840"
  },
  {
    "text": "one country running a specific version",
    "start": "1055840",
    "end": "1057850"
  },
  {
    "text": "of OS X right you're not gonna catch a",
    "start": "1057850",
    "end": "1060100"
  },
  {
    "text": "sort of thing with load testing you're",
    "start": "1060100",
    "end": "1061480"
  },
  {
    "text": "not likely to catch up as buzzing this",
    "start": "1061480",
    "end": "1062890"
  },
  {
    "text": "is the sort of thing you catch in prod",
    "start": "1062890",
    "end": "1064000"
  },
  {
    "text": "and the good news here is that envoys",
    "start": "1064000",
    "end": "1066039"
  },
  {
    "text": "now used by dozens of companies we've",
    "start": "1066039",
    "end": "1067870"
  },
  {
    "text": "got tens of",
    "start": "1067870",
    "end": "1068630"
  },
  {
    "text": "thousands of different deployments tens",
    "start": "1068630",
    "end": "1070310"
  },
  {
    "text": "of millions of QPS I listed a bunch of",
    "start": "1070310",
    "end": "1072590"
  },
  {
    "text": "people from the graduation proposal and",
    "start": "1072590",
    "end": "1074180"
  },
  {
    "text": "from people who are speaking at envoy",
    "start": "1074180",
    "end": "1075560"
  },
  {
    "text": "con but as an envoy senior maintainer I",
    "start": "1075560",
    "end": "1078050"
  },
  {
    "text": "can tell you there's a lot more people",
    "start": "1078050",
    "end": "1079610"
  },
  {
    "text": "than this using envoy I just don't know",
    "start": "1079610",
    "end": "1081290"
  },
  {
    "text": "who's actually admitting it nowadays",
    "start": "1081290",
    "end": "1082480"
  },
  {
    "text": "envoys has amazing uptake right and all",
    "start": "1082480",
    "end": "1085880"
  },
  {
    "text": "of these different deployments are going",
    "start": "1085880",
    "end": "1087200"
  },
  {
    "text": "to catch different bugs so the more",
    "start": "1087200",
    "end": "1088790"
  },
  {
    "text": "users envoy has the faster these issues",
    "start": "1088790",
    "end": "1091100"
  },
  {
    "text": "are gonna get found and the larger our",
    "start": "1091100",
    "end": "1092570"
  },
  {
    "text": "community is the faster it's going to",
    "start": "1092570",
    "end": "1093950"
  },
  {
    "text": "get fixed so in closing I want to thank",
    "start": "1093950",
    "end": "1096050"
  },
  {
    "text": "all of you who are here who've already",
    "start": "1096050",
    "end": "1097310"
  },
  {
    "text": "deployed on Glee or even Envoy curious",
    "start": "1097310",
    "end": "1099170"
  },
  {
    "text": "because you're going to end up being a",
    "start": "1099170",
    "end": "1100550"
  },
  {
    "text": "part of her reliability story and I",
    "start": "1100550",
    "end": "1102440"
  },
  {
    "text": "especially want to thank all the people",
    "start": "1102440",
    "end": "1103880"
  },
  {
    "text": "who've contributed to the online",
    "start": "1103880",
    "end": "1104780"
  },
  {
    "text": "codebase we've had amazing progress",
    "start": "1104780",
    "end": "1106610"
  },
  {
    "text": "hardening envoy in the last year and a",
    "start": "1106610",
    "end": "1108530"
  },
  {
    "text": "half and I really look forward to seeing",
    "start": "1108530",
    "end": "1110300"
  },
  {
    "text": "what we do in 2019 so thank you out of",
    "start": "1110300",
    "end": "1124940"
  },
  {
    "text": "memory test yeah so so if the question",
    "start": "1124940",
    "end": "1134180"
  },
  {
    "text": "was do we run any out of memory test we",
    "start": "1134180",
    "end": "1135950"
  },
  {
    "text": "do actually on import process run way",
    "start": "1135950",
    "end": "1138020"
  },
  {
    "text": "through memory sanitizer MSN and I hope",
    "start": "1138020",
    "end": "1140030"
  },
  {
    "text": "that we will get that up streamed at",
    "start": "1140030",
    "end": "1141170"
  },
  {
    "text": "some point so yeah we run that in-house",
    "start": "1141170",
    "end": "1143150"
  },
  {
    "text": "and when we catch things we upstream",
    "start": "1143150",
    "end": "1144860"
  },
  {
    "text": "fixes so the question of this is how",
    "start": "1144860",
    "end": "1162380"
  },
  {
    "text": "much of running envoy has good each",
    "start": "1162380",
    "end": "1163880"
  },
  {
    "text": "balls um I can tell you as I have not",
    "start": "1163880",
    "end": "1165590"
  },
  {
    "text": "personally deployed on Foyet scale I'm",
    "start": "1165590",
    "end": "1167660"
  },
  {
    "text": "not really sure I heard earlier today",
    "start": "1167660",
    "end": "1169610"
  },
  {
    "text": "that someone did have a less and",
    "start": "1169610",
    "end": "1170930"
  },
  {
    "text": "sensible default on on how many up",
    "start": "1170930",
    "end": "1172580"
  },
  {
    "text": "streams I think most of the defaults are",
    "start": "1172580",
    "end": "1174080"
  },
  {
    "text": "good and again not everyone needs all of",
    "start": "1174080",
    "end": "1176150"
  },
  {
    "text": "these features right if you're not",
    "start": "1176150",
    "end": "1177110"
  },
  {
    "text": "regularly attacked you may not need the",
    "start": "1177110",
    "end": "1178760"
  },
  {
    "text": "downstream circuit breaking but for",
    "start": "1178760",
    "end": "1180620"
  },
  {
    "text": "certainly the big industry players",
    "start": "1180620",
    "end": "1181850"
  },
  {
    "text": "regularly could hit my botnets so they",
    "start": "1181850",
    "end": "1183530"
  },
  {
    "text": "need that sort of thing",
    "start": "1183530",
    "end": "1184430"
  },
  {
    "text": "implemented and I would say the nice",
    "start": "1184430",
    "end": "1186500"
  },
  {
    "text": "thing is is that because envoy has our",
    "start": "1186500",
    "end": "1189350"
  },
  {
    "text": "little config if you hit a plate where",
    "start": "1189350",
    "end": "1190940"
  },
  {
    "text": "all of a sudden you're hit by your first",
    "start": "1190940",
    "end": "1192320"
  },
  {
    "text": "thought net you're like oh my god what",
    "start": "1192320",
    "end": "1193670"
  },
  {
    "text": "do I do you know you can read up on this",
    "start": "1193670",
    "end": "1195500"
  },
  {
    "text": "and then deploy that config rather than",
    "start": "1195500",
    "end": "1197480"
  },
  {
    "text": "not really having a choice other than",
    "start": "1197480",
    "end": "1199400"
  },
  {
    "text": "doing code fixes which is going to have",
    "start": "1199400",
    "end": "1201260"
  },
  {
    "text": "a much longer managed",
    "start": "1201260",
    "end": "1202370"
  },
  {
    "text": "raishin other questions okay great",
    "start": "1202370",
    "end": "1209450"
  },
  {
    "text": "thank you",
    "start": "1209450",
    "end": "1211809"
  }
]