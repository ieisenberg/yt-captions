[
  {
    "text": "thank you everyone for being here we're",
    "start": "320",
    "end": "2159"
  },
  {
    "text": "very excited to give this talk um so I'm",
    "start": "2159",
    "end": "4720"
  },
  {
    "text": "Claudia uh so we're going to talk about",
    "start": "4720",
    "end": "7200"
  },
  {
    "text": "uh challenges and opportunities that we",
    "start": "7200",
    "end": "9120"
  },
  {
    "text": "faced while running and also setting up",
    "start": "9120",
    "end": "12480"
  },
  {
    "text": "and deploying large scale a GPUs",
    "start": "12480",
    "end": "14799"
  },
  {
    "text": "workloads GPUs clusters for our AI",
    "start": "14799",
    "end": "18039"
  },
  {
    "text": "workloads so we're going to start with",
    "start": "18039",
    "end": "20720"
  },
  {
    "text": "um uh brief introduction of what type of",
    "start": "20720",
    "end": "24240"
  },
  {
    "text": "clusters we're talking about uh so both",
    "start": "24240",
    "end": "26880"
  },
  {
    "text": "on the hardware level and software level",
    "start": "26880",
    "end": "29760"
  },
  {
    "text": "and then we're going to focus on how do",
    "start": "29760",
    "end": "33239"
  },
  {
    "text": "we run the AI AI workloads and how do we",
    "start": "33239",
    "end": "37120"
  },
  {
    "text": "monitor them and that will be the",
    "start": "37120",
    "end": "39360"
  },
  {
    "text": "observability and fault detection and",
    "start": "39360",
    "end": "40879"
  },
  {
    "text": "recovery and and fault recovery uh part",
    "start": "40879",
    "end": "43760"
  },
  {
    "text": "of the presentation and then we will",
    "start": "43760",
    "end": "45440"
  },
  {
    "text": "wrap up with some",
    "start": "45440",
    "end": "47960"
  },
  {
    "text": "takeaways all right so GPU clusters",
    "start": "47960",
    "end": "51120"
  },
  {
    "text": "that's what we're talking about um so",
    "start": "51120",
    "end": "53760"
  },
  {
    "text": "we've been running AI workloads on two",
    "start": "53760",
    "end": "56239"
  },
  {
    "text": "generations of of um distributed uh",
    "start": "56239",
    "end": "60800"
  },
  {
    "text": "clusters with GPUs we have uh the our",
    "start": "60800",
    "end": "64158"
  },
  {
    "text": "first generation is cloud bella is",
    "start": "64159",
    "end": "66960"
  },
  {
    "text": "deployed and running on on IBM cloud and",
    "start": "66960",
    "end": "70159"
  },
  {
    "text": "it's composed of um several uh compute",
    "start": "70159",
    "end": "74799"
  },
  {
    "text": "nodes each of them having um 8 800 uh",
    "start": "74799",
    "end": "80640"
  },
  {
    "text": "GPUs Nvidia GPUs uh all of them",
    "start": "80640",
    "end": "83920"
  },
  {
    "text": "connected through of course MV MV link",
    "start": "83920",
    "end": "86479"
  },
  {
    "text": "and MV switch uh in addition we have um",
    "start": "86479",
    "end": "90960"
  },
  {
    "text": "a total of uh 8 800 gigabit per second",
    "start": "90960",
    "end": "96400"
  },
  {
    "text": "network in and out between the nodes and",
    "start": "96400",
    "end": "99520"
  },
  {
    "text": "of course there is always some uh",
    "start": "99520",
    "end": "101200"
  },
  {
    "text": "storage connected so we have about 3",
    "start": "101200",
    "end": "104000"
  },
  {
    "text": "something um 3.2 I think terabyte NVME",
    "start": "104000",
    "end": "108280"
  },
  {
    "text": "drivers um so that's the one that you",
    "start": "108280",
    "end": "111360"
  },
  {
    "text": "can see on the left hand side uh that's",
    "start": "111360",
    "end": "114079"
  },
  {
    "text": "Bella uh on the right hand side we have",
    "start": "114079",
    "end": "117360"
  },
  {
    "text": "a uh bumped up version of Bella is Bella",
    "start": "117360",
    "end": "121040"
  },
  {
    "text": "2 um this one runs um each compute node",
    "start": "121040",
    "end": "126079"
  },
  {
    "text": "has eight H100 Nvidia GPUs all connected",
    "start": "126079",
    "end": "130239"
  },
  {
    "text": "through MV link of course um and we have",
    "start": "130239",
    "end": "134800"
  },
  {
    "text": "a big bump up on the uh network in and",
    "start": "134800",
    "end": "139440"
  },
  {
    "text": "out of from the N we ramped that up to",
    "start": "139440",
    "end": "142400"
  },
  {
    "text": "3.2 two terabyt per second uh we have",
    "start": "142400",
    "end": "145280"
  },
  {
    "text": "storage it's about twice the size of the",
    "start": "145280",
    "end": "147680"
  },
  {
    "text": "previous VA generation",
    "start": "147680",
    "end": "150760"
  },
  {
    "text": "and yeah so this is",
    "start": "150760",
    "end": "153800"
  },
  {
    "text": "um those are the cluster where we are",
    "start": "153800",
    "end": "156400"
  },
  {
    "text": "running our um uh training and inference",
    "start": "156400",
    "end": "160760"
  },
  {
    "text": "workloads so that's the hardware let's",
    "start": "160760",
    "end": "163280"
  },
  {
    "text": "talk about the software so we run uh",
    "start": "163280",
    "end": "166400"
  },
  {
    "text": "Redat Open Shift as a base platform",
    "start": "166400",
    "end": "169560"
  },
  {
    "text": "um running for so to also be able to",
    "start": "169560",
    "end": "173680"
  },
  {
    "text": "exploit the net the network uh we run",
    "start": "173680",
    "end": "176319"
  },
  {
    "text": "the multinix CNI to access all the ports",
    "start": "176319",
    "end": "179120"
  },
  {
    "text": "that are available for for each pod um",
    "start": "179120",
    "end": "182480"
  },
  {
    "text": "as you can see everything is about AI",
    "start": "182480",
    "end": "185840"
  },
  {
    "text": "and um with those with this cluster and",
    "start": "185840",
    "end": "189760"
  },
  {
    "text": "the software cycle we deploy we're able",
    "start": "189760",
    "end": "191440"
  },
  {
    "text": "to cover pretty much the entire life",
    "start": "191440",
    "end": "193360"
  },
  {
    "text": "cycle of uh AI AI workload going from uh",
    "start": "193360",
    "end": "197120"
  },
  {
    "text": "data prep pre-processing training",
    "start": "197120",
    "end": "199040"
  },
  {
    "text": "finetuning and and model serving",
    "start": "199040",
    "end": "202840"
  },
  {
    "text": "um each job can be small or large few",
    "start": "202840",
    "end": "207280"
  },
  {
    "text": "few GPUs one GPU or hundreds of GPUs of",
    "start": "207280",
    "end": "210720"
  },
  {
    "text": "course that depends on the type of of",
    "start": "210720",
    "end": "212239"
  },
  {
    "text": "workload so you can imagine AI training",
    "start": "212239",
    "end": "214319"
  },
  {
    "text": "is going to take the largest chunk of",
    "start": "214319",
    "end": "217440"
  },
  {
    "text": "GPUs available and",
    "start": "217440",
    "end": "220760"
  },
  {
    "text": "and since this is a multi-eno cluster of",
    "start": "220760",
    "end": "224080"
  },
  {
    "text": "course you need to have support for um",
    "start": "224080",
    "end": "228200"
  },
  {
    "text": "priorities um preeemption of course the",
    "start": "228200",
    "end": "232000"
  },
  {
    "text": "idea is to try and have the best usage",
    "start": "232000",
    "end": "235440"
  },
  {
    "text": "uh possible of the cluster um so in this",
    "start": "235440",
    "end": "239360"
  },
  {
    "text": "presentation we're going to focus on",
    "start": "239360",
    "end": "243480"
  },
  {
    "text": "um job workload management workload",
    "start": "243480",
    "end": "246720"
  },
  {
    "text": "management and uh um in cooporation with",
    "start": "246720",
    "end": "250959"
  },
  {
    "text": "observability in the cluster so you you",
    "start": "250959",
    "end": "253360"
  },
  {
    "text": "may have seen that Q and approper in the",
    "start": "253360",
    "end": "256560"
  },
  {
    "text": "previous talk so that's where we are and",
    "start": "256560",
    "end": "258639"
  },
  {
    "text": "that's what we're going to talk about",
    "start": "258639",
    "end": "261320"
  },
  {
    "text": "um so still in the software stack uh MLB",
    "start": "261320",
    "end": "265199"
  },
  {
    "text": "batch is the workload and source",
    "start": "265199",
    "end": "267040"
  },
  {
    "text": "management for batch AI and machine",
    "start": "267040",
    "end": "269840"
  },
  {
    "text": "learning workloads on Kubernetes uh this",
    "start": "269840",
    "end": "272400"
  },
  {
    "text": "is all open source of course uh it it's",
    "start": "272400",
    "end": "275360"
  },
  {
    "text": "integrated with all the um AI framework",
    "start": "275360",
    "end": "279280"
  },
  {
    "text": "and runtimes that we've seen also",
    "start": "279280",
    "end": "280880"
  },
  {
    "text": "throughout the uh all the the morning",
    "start": "280880",
    "end": "283600"
  },
  {
    "text": "presentation and Cookflow panels so that",
    "start": "283600",
    "end": "285680"
  },
  {
    "text": "that's all there",
    "start": "285680",
    "end": "287800"
  },
  {
    "text": "um and what is the the major focus as I",
    "start": "287800",
    "end": "292639"
  },
  {
    "text": "was mentioning is to be able to run",
    "start": "292639",
    "end": "296400"
  },
  {
    "text": "efficiently a multi-tenant cluster uh so",
    "start": "296400",
    "end": "299440"
  },
  {
    "text": "we want to make sure",
    "start": "299440",
    "end": "301320"
  },
  {
    "text": "that users and admin can all access the",
    "start": "301320",
    "end": "304479"
  },
  {
    "text": "cluster and use it in a fair in a fair",
    "start": "304479",
    "end": "306639"
  },
  {
    "text": "way uh so we provide teams cues priority",
    "start": "306639",
    "end": "309680"
  },
  {
    "text": "and for enforced uh quotas and we also",
    "start": "309680",
    "end": "312400"
  },
  {
    "text": "we want to make sure that um",
    "start": "312400",
    "end": "315800"
  },
  {
    "text": "productivity and cluster utilization is",
    "start": "315800",
    "end": "318240"
  },
  {
    "text": "at the best possible we don't GPUs are",
    "start": "318240",
    "end": "320880"
  },
  {
    "text": "expensive we've been saying that also",
    "start": "320880",
    "end": "322880"
  },
  {
    "text": "this morning and we don't want to have",
    "start": "322880",
    "end": "325600"
  },
  {
    "text": "them just sitting idle while they could",
    "start": "325600",
    "end": "328639"
  },
  {
    "text": "be utilized",
    "start": "328639",
    "end": "330520"
  },
  {
    "text": "um and of course fall tolerance",
    "start": "330520",
    "end": "334800"
  },
  {
    "text": "um especially for for what concerns the",
    "start": "334800",
    "end": "337840"
  },
  {
    "text": "workloads we want to make sure that uh",
    "start": "337840",
    "end": "340720"
  },
  {
    "text": "the user can just forget that their",
    "start": "340720",
    "end": "345039"
  },
  {
    "text": "workload is running in in case something",
    "start": "345039",
    "end": "347440"
  },
  {
    "text": "happens the workload should be able to",
    "start": "347440",
    "end": "349600"
  },
  {
    "text": "recover by by itself and the fall",
    "start": "349600",
    "end": "354120"
  },
  {
    "text": "tolerance and utiliz productive",
    "start": "354120",
    "end": "356800"
  },
  {
    "text": "utilization part that's uh what is also",
    "start": "356800",
    "end": "360080"
  },
  {
    "text": "So working in collaboration with all the",
    "start": "360080",
    "end": "362560"
  },
  {
    "text": "monitoring parts you can see there's um",
    "start": "362560",
    "end": "365120"
  },
  {
    "text": "the monitoring phases going throughout",
    "start": "365120",
    "end": "367039"
  },
  {
    "text": "the entire life",
    "start": "367039",
    "end": "369000"
  },
  {
    "text": "cycle all right so that's about software",
    "start": "369000",
    "end": "372720"
  },
  {
    "text": "and hardware let's dive into uh the main",
    "start": "372720",
    "end": "377319"
  },
  {
    "text": "topics so why do we need advanced fall",
    "start": "377319",
    "end": "381039"
  },
  {
    "text": "tolerance it's a naive question maybe",
    "start": "381039",
    "end": "383840"
  },
  {
    "text": "but we also have to take care of that",
    "start": "383840",
    "end": "387639"
  },
  {
    "text": "um so in in in an ideal situation in",
    "start": "387639",
    "end": "393840"
  },
  {
    "text": "ideal uh world you would you would not",
    "start": "393840",
    "end": "396960"
  },
  {
    "text": "have any human intervention whatsoever",
    "start": "396960",
    "end": "399600"
  },
  {
    "text": "in your cluster so you just the usual",
    "start": "399600",
    "end": "402000"
  },
  {
    "text": "cloud thing when you say click click",
    "start": "402000",
    "end": "404080"
  },
  {
    "text": "button and run everything and I then",
    "start": "404080",
    "end": "405919"
  },
  {
    "text": "come back and everything is done and",
    "start": "405919",
    "end": "407840"
  },
  {
    "text": "that everything is done means also that",
    "start": "407840",
    "end": "410560"
  },
  {
    "text": "uh if something happened during the",
    "start": "410560",
    "end": "411840"
  },
  {
    "text": "cluster or in the cluster or the",
    "start": "411840",
    "end": "413520"
  },
  {
    "text": "workload stops or any type of um fault",
    "start": "413520",
    "end": "418639"
  },
  {
    "text": "uh crash or anything that would be",
    "start": "418639",
    "end": "420880"
  },
  {
    "text": "managed by the cluster auto",
    "start": "420880",
    "end": "422759"
  },
  {
    "text": "automatically",
    "start": "422759",
    "end": "424360"
  },
  {
    "text": "um so this means uh of course also um",
    "start": "424360",
    "end": "429520"
  },
  {
    "text": "cleaning up resources where jobs are",
    "start": "429520",
    "end": "432080"
  },
  {
    "text": "done so that those resources can be used",
    "start": "432080",
    "end": "434160"
  },
  {
    "text": "by other teams and other workloads also",
    "start": "434160",
    "end": "438160"
  },
  {
    "text": "given the current utilization of the",
    "start": "438160",
    "end": "439840"
  },
  {
    "text": "cluster you can also do some adjustment",
    "start": "439840",
    "end": "441840"
  },
  {
    "text": "to quota uh and match also the actual uh",
    "start": "441840",
    "end": "445199"
  },
  {
    "text": "cluster capacity and I want to focus on",
    "start": "445199",
    "end": "448160"
  },
  {
    "text": "the actual cluster capacity because it",
    "start": "448160",
    "end": "451039"
  },
  {
    "text": "doesn't mean that the um cap capacity or",
    "start": "451039",
    "end": "454160"
  },
  {
    "text": "the number of GPUs are always the same",
    "start": "454160",
    "end": "457039"
  },
  {
    "text": "uh because some crash can happen also",
    "start": "457039",
    "end": "460720"
  },
  {
    "text": "hardware faults and the GPUs some of the",
    "start": "460720",
    "end": "464319"
  },
  {
    "text": "GPUs might not be available uh so you",
    "start": "464319",
    "end": "466960"
  },
  {
    "text": "want to you want a system that is able",
    "start": "466960",
    "end": "469759"
  },
  {
    "text": "to avoid the uh GPUs with severe faults",
    "start": "469759",
    "end": "473280"
  },
  {
    "text": "so not having workloads running on those",
    "start": "473280",
    "end": "476000"
  },
  {
    "text": "jobs because you know where they're",
    "start": "476000",
    "end": "477360"
  },
  {
    "text": "going to",
    "start": "477360",
    "end": "478680"
  },
  {
    "text": "fail and there is evidence of that uh",
    "start": "478680",
    "end": "483520"
  },
  {
    "text": "this in particular is a set of",
    "start": "483520",
    "end": "485120"
  },
  {
    "text": "screenshots that I've took that that I",
    "start": "485120",
    "end": "486800"
  },
  {
    "text": "took uh from um three main parts three",
    "start": "486800",
    "end": "491280"
  },
  {
    "text": "main um places one on this side um this",
    "start": "491280",
    "end": "497120"
  },
  {
    "text": "this is uh one of the major latest um",
    "start": "497120",
    "end": "501440"
  },
  {
    "text": "white paper that have been released uh",
    "start": "501440",
    "end": "503440"
  },
  {
    "text": "by meta this is the for the training of",
    "start": "503440",
    "end": "506319"
  },
  {
    "text": "the llama 3 herd of models uh where they",
    "start": "506319",
    "end": "510879"
  },
  {
    "text": "report that nice table saying what went",
    "start": "510879",
    "end": "513360"
  },
  {
    "text": "wrong and there's a lot of things that",
    "start": "513360",
    "end": "515518"
  },
  {
    "text": "went wrong and especially on the",
    "start": "515519",
    "end": "518159"
  },
  {
    "text": "hardware level they they report uh",
    "start": "518159",
    "end": "521800"
  },
  {
    "text": "78% of the actual faults so when the the",
    "start": "521800",
    "end": "525920"
  },
  {
    "text": "workload would stop was because of",
    "start": "525920",
    "end": "528240"
  },
  {
    "text": "hardware failures and almost 60% of",
    "start": "528240",
    "end": "531760"
  },
  {
    "text": "those were GPUs failure",
    "start": "531760",
    "end": "534640"
  },
  {
    "text": "So that can be a major blocker for the",
    "start": "534640",
    "end": "538000"
  },
  {
    "text": "workloads that are running on the",
    "start": "538000",
    "end": "539279"
  },
  {
    "text": "cluster another very recent technical",
    "start": "539279",
    "end": "541920"
  },
  {
    "text": "block from Nvidia showing um uh failures",
    "start": "541920",
    "end": "546240"
  },
  {
    "text": "and reasons why the job their training",
    "start": "546240",
    "end": "548720"
  },
  {
    "text": "job failed over a range of four months I",
    "start": "548720",
    "end": "551760"
  },
  {
    "text": "think",
    "start": "551760",
    "end": "553080"
  },
  {
    "text": "um those are both hardware and software",
    "start": "553080",
    "end": "556200"
  },
  {
    "text": "failure",
    "start": "556200",
    "end": "558360"
  },
  {
    "text": "um and also on the at the very bottom",
    "start": "558360",
    "end": "562560"
  },
  {
    "text": "there is a very recent uh paper",
    "start": "562560",
    "end": "565760"
  },
  {
    "text": "published by uh University of Illinois",
    "start": "565760",
    "end": "568640"
  },
  {
    "text": "Survano Champagne and IBM",
    "start": "568640",
    "end": "571279"
  },
  {
    "text": "uh where they there is a in very",
    "start": "571279",
    "end": "575680"
  },
  {
    "text": "intensive um uh analysis of the the",
    "start": "575680",
    "end": "580320"
  },
  {
    "text": "workload failures especially when",
    "start": "580320",
    "end": "582959"
  },
  {
    "text": "concerning GPUs in that table and they",
    "start": "582959",
    "end": "585920"
  },
  {
    "text": "reported over um a time frame of 2.5 2",
    "start": "585920",
    "end": "591279"
  },
  {
    "text": "and a half three years uh there were",
    "start": "591279",
    "end": "593920"
  },
  {
    "text": "more than 4,000 job crashes because of",
    "start": "593920",
    "end": "597279"
  },
  {
    "text": "hardware failure so this is something",
    "start": "597279",
    "end": "599200"
  },
  {
    "text": "that you really want to take a look",
    "start": "599200",
    "end": "602200"
  },
  {
    "text": "at um monitoring that's how you do and",
    "start": "602200",
    "end": "607360"
  },
  {
    "text": "there are of course native tooling that",
    "start": "607360",
    "end": "609519"
  },
  {
    "text": "we're all familiar with uh Prometheus uh",
    "start": "609519",
    "end": "612959"
  },
  {
    "text": "is the major go-to on Kubernetes uh",
    "start": "612959",
    "end": "616440"
  },
  {
    "text": "platforms that's what we use what",
    "start": "616440",
    "end": "618640"
  },
  {
    "text": "everyone uses and it provides",
    "start": "618640",
    "end": "620560"
  },
  {
    "text": "information about uh workloads um",
    "start": "620560",
    "end": "624640"
  },
  {
    "text": "Kubernetes infrastructure node network",
    "start": "624640",
    "end": "626880"
  },
  {
    "text": "and all of that",
    "start": "626880",
    "end": "628480"
  },
  {
    "text": "on the GPU side we have the DCGM",
    "start": "628480",
    "end": "631200"
  },
  {
    "text": "exporter that you can install along with",
    "start": "631200",
    "end": "633360"
  },
  {
    "text": "the GPU operator and that provides a lot",
    "start": "633360",
    "end": "637120"
  },
  {
    "text": "of metrics for from the GPUs and that",
    "start": "637120",
    "end": "641680"
  },
  {
    "text": "will tell you GPUization power errors",
    "start": "641680",
    "end": "645279"
  },
  {
    "text": "there's a good chunk of information that",
    "start": "645279",
    "end": "647040"
  },
  {
    "text": "you can get graphana is great for um",
    "start": "647040",
    "end": "651640"
  },
  {
    "text": "visualization so that's of course",
    "start": "651640",
    "end": "653839"
  },
  {
    "text": "something that you want to have handy uh",
    "start": "653839",
    "end": "656000"
  },
  {
    "text": "instead of going and query all the the",
    "start": "656000",
    "end": "658320"
  },
  {
    "text": "the metrics all the time you just want",
    "start": "658320",
    "end": "660399"
  },
  {
    "text": "to see what's happening um we've built a",
    "start": "660399",
    "end": "665360"
  },
  {
    "text": "custom solution for um for our clusters",
    "start": "665360",
    "end": "669920"
  },
  {
    "text": "based on the experience that we've been",
    "start": "669920",
    "end": "672000"
  },
  {
    "text": "gaining while running those workloads",
    "start": "672000",
    "end": "674079"
  },
  {
    "text": "and running the clusters that's called",
    "start": "674079",
    "end": "676640"
  },
  {
    "text": "autopilot and this runs health checks on",
    "start": "676640",
    "end": "680640"
  },
  {
    "text": "the cluster which are things on things",
    "start": "680640",
    "end": "682800"
  },
  {
    "text": "that you would not uh immediately see",
    "start": "682800",
    "end": "685440"
  },
  {
    "text": "from the existing metrics and we're",
    "start": "685440",
    "end": "687600"
  },
  {
    "text": "going to dive into",
    "start": "687600",
    "end": "689000"
  },
  {
    "text": "that um so the autopilot tool comes from",
    "start": "689000",
    "end": "693920"
  },
  {
    "text": "uh the our experience and what we have",
    "start": "693920",
    "end": "696399"
  },
  {
    "text": "learned by uh running uh cloud vala uh",
    "start": "696399",
    "end": "700880"
  },
  {
    "text": "so we know that there are the there are",
    "start": "700880",
    "end": "703680"
  },
  {
    "text": "some common infrastructure errors that",
    "start": "703680",
    "end": "706160"
  },
  {
    "text": "are affecting uh the AI workloads and",
    "start": "706160",
    "end": "709920"
  },
  {
    "text": "those were some that we would not be a",
    "start": "709920",
    "end": "712640"
  },
  {
    "text": "we were not be able to find through the",
    "start": "712640",
    "end": "714800"
  },
  {
    "text": "existing metrics so we had to",
    "start": "714800",
    "end": "717560"
  },
  {
    "text": "um package those things and we want to",
    "start": "717560",
    "end": "721920"
  },
  {
    "text": "run those as uh periodic health checks",
    "start": "721920",
    "end": "724880"
  },
  {
    "text": "because we know those errors can occur",
    "start": "724880",
    "end": "727120"
  },
  {
    "text": "all the time so you want to have",
    "start": "727120",
    "end": "730000"
  },
  {
    "text": "something that will tell you when those",
    "start": "730000",
    "end": "732320"
  },
  {
    "text": "are happening and this doesn't really um",
    "start": "732320",
    "end": "736240"
  },
  {
    "text": "it's not just about GPUs it's also about",
    "start": "736240",
    "end": "738959"
  },
  {
    "text": "network and storage and once you're",
    "start": "738959",
    "end": "742399"
  },
  {
    "text": "running you know which tests you want to",
    "start": "742399",
    "end": "744160"
  },
  {
    "text": "run you know how to run them of course",
    "start": "744160",
    "end": "747120"
  },
  {
    "text": "you want to see what the the results of",
    "start": "747120",
    "end": "750240"
  },
  {
    "text": "those uh health checks uh and you want",
    "start": "750240",
    "end": "753440"
  },
  {
    "text": "to see them through Prometheus metrics",
    "start": "753440",
    "end": "755839"
  },
  {
    "text": "that's the best way to uh to show uh",
    "start": "755839",
    "end": "758399"
  },
  {
    "text": "metrics on uh on Kubernetes systems um",
    "start": "758399",
    "end": "762320"
  },
  {
    "text": "we also decided to add an extra uh",
    "start": "762320",
    "end": "766320"
  },
  {
    "text": "action which is to label the nodes with",
    "start": "766320",
    "end": "771120"
  },
  {
    "text": "the result of the of those tests so that",
    "start": "771120",
    "end": "773760"
  },
  {
    "text": "also the administrators could take",
    "start": "773760",
    "end": "776320"
  },
  {
    "text": "action if they wanted on on the cluster",
    "start": "776320",
    "end": "779600"
  },
  {
    "text": "and also those are then the easiest way",
    "start": "779600",
    "end": "782800"
  },
  {
    "text": "to have other tools uh steer the",
    "start": "782800",
    "end": "786160"
  },
  {
    "text": "workloads life cycle so just to wrap up",
    "start": "786160",
    "end": "790839"
  },
  {
    "text": "um we we built this tool autopilot which",
    "start": "790839",
    "end": "794639"
  },
  {
    "text": "runs health checks uh these health",
    "start": "794639",
    "end": "797279"
  },
  {
    "text": "checks GPU network and storage they are",
    "start": "797279",
    "end": "799440"
  },
  {
    "text": "periodic they run all the time on the",
    "start": "799440",
    "end": "802000"
  },
  {
    "text": "cluster and continuously check what is",
    "start": "802000",
    "end": "804399"
  },
  {
    "text": "going on uh the metrics are exported",
    "start": "804399",
    "end": "807760"
  },
  {
    "text": "through Prometheus and uh then we label",
    "start": "807760",
    "end": "812399"
  },
  {
    "text": "the nodes so that other tools like",
    "start": "812399",
    "end": "814320"
  },
  {
    "text": "scheduler queuing system can take action",
    "start": "814320",
    "end": "816880"
  },
  {
    "text": "based on the uh the current health of",
    "start": "816880",
    "end": "819200"
  },
  {
    "text": "the",
    "start": "819200",
    "end": "820120"
  },
  {
    "text": "node and those are this list of the",
    "start": "820120",
    "end": "823600"
  },
  {
    "text": "health checks that we run um so all of",
    "start": "823600",
    "end": "826560"
  },
  {
    "text": "all of those are information that you",
    "start": "826560",
    "end": "828720"
  },
  {
    "text": "can really get from like um GPU remap",
    "start": "828720",
    "end": "832720"
  },
  {
    "text": "rows or the power throttle you you get",
    "start": "832720",
    "end": "835279"
  },
  {
    "text": "those by running an Nvidia semi command",
    "start": "835279",
    "end": "837279"
  },
  {
    "text": "so you're we're not really inventing",
    "start": "837279",
    "end": "839199"
  },
  {
    "text": "anything here we're just reusing what we",
    "start": "839199",
    "end": "841440"
  },
  {
    "text": "have it's just that those that",
    "start": "841440",
    "end": "843839"
  },
  {
    "text": "information that's listed here is not",
    "start": "843839",
    "end": "846240"
  },
  {
    "text": "available through the DCM exporter for",
    "start": "846240",
    "end": "849120"
  },
  {
    "text": "instance so you need to check those",
    "start": "849120",
    "end": "851760"
  },
  {
    "text": "things manually and report when an error",
    "start": "851760",
    "end": "855440"
  },
  {
    "text": "is happening some problems may be more",
    "start": "855440",
    "end": "858079"
  },
  {
    "text": "or less problematic to the to the",
    "start": "858079",
    "end": "860600"
  },
  {
    "text": "workload um so some can just you know",
    "start": "860600",
    "end": "863920"
  },
  {
    "text": "pro um imply that there is a degradation",
    "start": "863920",
    "end": "867120"
  },
  {
    "text": "in the training performance for instance",
    "start": "867120",
    "end": "869680"
  },
  {
    "text": "uh while some other you just want to to",
    "start": "869680",
    "end": "872480"
  },
  {
    "text": "remove the job from that node reboot the",
    "start": "872480",
    "end": "874880"
  },
  {
    "text": "node take care of the node because it",
    "start": "874880",
    "end": "876480"
  },
  {
    "text": "the job you know is going to crash um",
    "start": "876480",
    "end": "879920"
  },
  {
    "text": "and also you want to run extensive",
    "start": "879920",
    "end": "882320"
  },
  {
    "text": "diagnostic on the GPUs that we can do",
    "start": "882320",
    "end": "884800"
  },
  {
    "text": "through the DCGM uh tool provided by",
    "start": "884800",
    "end": "887040"
  },
  {
    "text": "Nvidia so those are all things that uh",
    "start": "887040",
    "end": "890480"
  },
  {
    "text": "help us to steer the workloads and keep",
    "start": "890480",
    "end": "893680"
  },
  {
    "text": "the utilization of um uh of the cluster",
    "start": "893680",
    "end": "896639"
  },
  {
    "text": "very very high and with this I'll pass",
    "start": "896639",
    "end": "900240"
  },
  {
    "text": "it to David all right all right so",
    "start": "900240",
    "end": "902720"
  },
  {
    "text": "thanks so now that we've uh Claudia has",
    "start": "902720",
    "end": "904800"
  },
  {
    "text": "talked a little bit about how we do the",
    "start": "904800",
    "end": "906399"
  },
  {
    "text": "automated fault detection in our",
    "start": "906399",
    "end": "908079"
  },
  {
    "text": "clusters i'm going to talk about fault",
    "start": "908079",
    "end": "909399"
  },
  {
    "text": "recovery um so to get there first I need",
    "start": "909399",
    "end": "912240"
  },
  {
    "text": "to talk a little bit about some of the",
    "start": "912240",
    "end": "913360"
  },
  {
    "text": "other some of the components in our",
    "start": "913360",
    "end": "914560"
  },
  {
    "text": "system so we've heard about Q in the",
    "start": "914560",
    "end": "916000"
  },
  {
    "text": "previous talk um it's a Kubernetes",
    "start": "916000",
    "end": "918079"
  },
  {
    "text": "native system to manage queuing quotas",
    "start": "918079",
    "end": "919920"
  },
  {
    "text": "and jobs so Q on our clusters Q is",
    "start": "919920",
    "end": "922079"
  },
  {
    "text": "responsible for deciding when when jobs",
    "start": "922079",
    "end": "923920"
  },
  {
    "text": "should wait when they should be admitted",
    "start": "923920",
    "end": "925680"
  },
  {
    "text": "which means their resources and pods get",
    "start": "925680",
    "end": "927360"
  },
  {
    "text": "created and when a job should be pre",
    "start": "927360",
    "end": "929440"
  },
  {
    "text": "preempted so the pod's deleted and the",
    "start": "929440",
    "end": "931680"
  },
  {
    "text": "key abstraction that Q uses to do this",
    "start": "931680",
    "end": "934320"
  },
  {
    "text": "one of them is something called a",
    "start": "934320",
    "end": "935360"
  },
  {
    "text": "cluster Q so cluster cues are assigned",
    "start": "935360",
    "end": "937839"
  },
  {
    "text": "quotas um users end up submitting their",
    "start": "937839",
    "end": "940160"
  },
  {
    "text": "jobs to cluster cues the cluster Q logic",
    "start": "940160",
    "end": "942240"
  },
  {
    "text": "is what decides which job should be",
    "start": "942240",
    "end": "943920"
  },
  {
    "text": "admitted when they should run and um the",
    "start": "943920",
    "end": "946480"
  },
  {
    "text": "cluster cues are grouped together into",
    "start": "946480",
    "end": "948320"
  },
  {
    "text": "cohorts and in particular within a",
    "start": "948320",
    "end": "950720"
  },
  {
    "text": "cohort so you can have multiple cluster",
    "start": "950720",
    "end": "952320"
  },
  {
    "text": "cues in a cohort those cluster cues are",
    "start": "952320",
    "end": "954399"
  },
  {
    "text": "assigned quotas and they can borrow",
    "start": "954399",
    "end": "956240"
  },
  {
    "text": "quotas from each other um and that's",
    "start": "956240",
    "end": "958320"
  },
  {
    "text": "that barring mechanism is one of the key",
    "start": "958320",
    "end": "960000"
  },
  {
    "text": "mechanisms we use to deal with uh",
    "start": "960000",
    "end": "962000"
  },
  {
    "text": "varying size clusters in particular what",
    "start": "962000",
    "end": "964320"
  },
  {
    "text": "we do in our clusters in ML batch is we",
    "start": "964320",
    "end": "967360"
  },
  {
    "text": "reserve a few nodes of resources that we",
    "start": "967360",
    "end": "969440"
  },
  {
    "text": "is what we call a slack cluster queue so",
    "start": "969440",
    "end": "971519"
  },
  {
    "text": "this picture on the bottom is showing a",
    "start": "971519",
    "end": "973360"
  },
  {
    "text": "typical setup in one of our clusters",
    "start": "973360",
    "end": "974800"
  },
  {
    "text": "where we have a whole bunch of nodes",
    "start": "974800",
    "end": "976320"
  },
  {
    "text": "those are the the little boxes on top",
    "start": "976320",
    "end": "978160"
  },
  {
    "text": "and green or red uh the green nodes",
    "start": "978160",
    "end": "980240"
  },
  {
    "text": "represent healthy nodes nodes whose",
    "start": "980240",
    "end": "982240"
  },
  {
    "text": "resources are available and there are a",
    "start": "982240",
    "end": "983920"
  },
  {
    "text": "few nodes whose resources are",
    "start": "983920",
    "end": "984959"
  },
  {
    "text": "unavailable those are red and then the",
    "start": "984959",
    "end": "987120"
  },
  {
    "text": "entire capacity of this cluster is",
    "start": "987120",
    "end": "988800"
  },
  {
    "text": "sliced into pieces and assigned to",
    "start": "988800",
    "end": "991279"
  },
  {
    "text": "various teams and we um do that",
    "start": "991279",
    "end": "993920"
  },
  {
    "text": "basically so that the total quota",
    "start": "993920",
    "end": "995440"
  },
  {
    "text": "including the slack capacity assigned to",
    "start": "995440",
    "end": "997600"
  },
  {
    "text": "the slack cluster queue adds up to the",
    "start": "997600",
    "end": "999360"
  },
  {
    "text": "uh total available resources on the",
    "start": "999360",
    "end": "1000959"
  },
  {
    "text": "cluster um healthy and unhealthy and",
    "start": "1000959",
    "end": "1003680"
  },
  {
    "text": "then our system",
    "start": "1003680",
    "end": "1004920"
  },
  {
    "text": "automatically watches nodes it sees the",
    "start": "1004920",
    "end": "1007680"
  },
  {
    "text": "labels put in by autopilot and it",
    "start": "1007680",
    "end": "1009519"
  },
  {
    "text": "automatically adjustes what what Q calls",
    "start": "1009519",
    "end": "1011519"
  },
  {
    "text": "the lending limit the amount of uh",
    "start": "1011519",
    "end": "1013680"
  },
  {
    "text": "capacity that the Slack cluster Q is is",
    "start": "1013680",
    "end": "1016320"
  },
  {
    "text": "making available to other cues to borrow",
    "start": "1016320",
    "end": "1018480"
  },
  {
    "text": "to match the actual available capacity",
    "start": "1018480",
    "end": "1020399"
  },
  {
    "text": "this is how we're able to sort of smooth",
    "start": "1020399",
    "end": "1021600"
  },
  {
    "text": "out the sort of small small amounts of",
    "start": "1021600",
    "end": "1023839"
  },
  {
    "text": "failure clusters nodes coming in a out",
    "start": "1023839",
    "end": "1026000"
  },
  {
    "text": "of clusters and so this gives us several",
    "start": "1026000",
    "end": "1028240"
  },
  {
    "text": "benefits um and helps us prevent from uh",
    "start": "1028240",
    "end": "1030400"
  },
  {
    "text": "admitting too many jobs um it gives us",
    "start": "1030400",
    "end": "1033839"
  },
  {
    "text": "ability to reserve quota to sort of",
    "start": "1033839",
    "end": "1035438"
  },
  {
    "text": "migrate those jobs away from unhealthy",
    "start": "1035439",
    "end": "1037120"
  },
  {
    "text": "nodes and have space for them on healthy",
    "start": "1037120",
    "end": "1038720"
  },
  {
    "text": "nodes um and also it also lets us sort",
    "start": "1038720",
    "end": "1041120"
  },
  {
    "text": "of view system maintenance as just",
    "start": "1041120",
    "end": "1042480"
  },
  {
    "text": "another reason for things being",
    "start": "1042480",
    "end": "1043520"
  },
  {
    "text": "unhealthy so it's very easy for",
    "start": "1043520",
    "end": "1045199"
  },
  {
    "text": "administrators with this kind of setup",
    "start": "1045199",
    "end": "1046480"
  },
  {
    "text": "to go in and some cordon some nodes a",
    "start": "1046480",
    "end": "1048480"
  },
  {
    "text": "cordon node looks just like an unhealthy",
    "start": "1048480",
    "end": "1050640"
  },
  {
    "text": "node from auto as if it was from",
    "start": "1050640",
    "end": "1052240"
  },
  {
    "text": "autopilot and we can go ahead and and",
    "start": "1052240",
    "end": "1054160"
  },
  {
    "text": "deal with that capacity thing so we have",
    "start": "1054160",
    "end": "1055679"
  },
  {
    "text": "maintenance happening without really",
    "start": "1055679",
    "end": "1056960"
  },
  {
    "text": "disturbing things at all all right the",
    "start": "1056960",
    "end": "1060400"
  },
  {
    "text": "second thing is app wrap we've heard",
    "start": "1060400",
    "end": "1061760"
  },
  {
    "text": "about so Apprapper plays several roles",
    "start": "1061760",
    "end": "1063919"
  },
  {
    "text": "in our software stack um it has two of",
    "start": "1063919",
    "end": "1066720"
  },
  {
    "text": "two two of the key things I want to talk",
    "start": "1066720",
    "end": "1068080"
  },
  {
    "text": "about first it lets us group multiple",
    "start": "1068080",
    "end": "1069679"
  },
  {
    "text": "resources together as a single workload",
    "start": "1069679",
    "end": "1072080"
  },
  {
    "text": "so some of our workloads are are more",
    "start": "1072080",
    "end": "1074240"
  },
  {
    "text": "complex they may consider have multiple",
    "start": "1074240",
    "end": "1076480"
  },
  {
    "text": "kinds of compute resources um they have",
    "start": "1076480",
    "end": "1078799"
  },
  {
    "text": "may have auxiliary resources such as",
    "start": "1078799",
    "end": "1080600"
  },
  {
    "text": "services uh secrets or ingresses and so",
    "start": "1080600",
    "end": "1083440"
  },
  {
    "text": "we put all those inside an our users put",
    "start": "1083440",
    "end": "1085520"
  },
  {
    "text": "all the the resources for their job",
    "start": "1085520",
    "end": "1087280"
  },
  {
    "text": "inside a single app wrapper and that's",
    "start": "1087280",
    "end": "1089280"
  },
  {
    "text": "what gets admitted or or cued or",
    "start": "1089280",
    "end": "1090880"
  },
  {
    "text": "preempted by Q and so let us keep all",
    "start": "1090880",
    "end": "1092640"
  },
  {
    "text": "this stuff together and manages a single",
    "start": "1092640",
    "end": "1094720"
  },
  {
    "text": "thing um and for this talk the key",
    "start": "1094720",
    "end": "1096720"
  },
  {
    "text": "things app wrappers does is app wrapper",
    "start": "1096720",
    "end": "1098720"
  },
  {
    "text": "is also our mechanism for hardening the",
    "start": "1098720",
    "end": "1100480"
  },
  {
    "text": "workloads so the apprapper controller uh",
    "start": "1100480",
    "end": "1103200"
  },
  {
    "text": "monitors the workload health um ensures",
    "start": "1103200",
    "end": "1105600"
  },
  {
    "text": "that if the something goes wrong with",
    "start": "1105600",
    "end": "1107200"
  },
  {
    "text": "the workload that the resources are",
    "start": "1107200",
    "end": "1108720"
  },
  {
    "text": "robustly cleaned up so that they're",
    "start": "1108720",
    "end": "1110480"
  },
  {
    "text": "actually all gone and not we don't have",
    "start": "1110480",
    "end": "1112640"
  },
  {
    "text": "dead pods lying lying around sort of",
    "start": "1112640",
    "end": "1114559"
  },
  {
    "text": "tying up resources and it gives us a",
    "start": "1114559",
    "end": "1116640"
  },
  {
    "text": "uniform way to talk about our retry and",
    "start": "1116640",
    "end": "1118320"
  },
  {
    "text": "failure policy which I'm going to talk",
    "start": "1118320",
    "end": "1119760"
  },
  {
    "text": "about next and we have an integration",
    "start": "1119760",
    "end": "1121440"
  },
  {
    "text": "with autopilot with it in particular um",
    "start": "1121440",
    "end": "1124880"
  },
  {
    "text": "you know there there are a lot of",
    "start": "1124880",
    "end": "1126000"
  },
  {
    "text": "reasons why a workload might be",
    "start": "1126000",
    "end": "1127200"
  },
  {
    "text": "unhealthy um pods could fail um there",
    "start": "1127200",
    "end": "1130480"
  },
  {
    "text": "might not not be enough running pods for",
    "start": "1130480",
    "end": "1132559"
  },
  {
    "text": "a variety of reasons you know an image",
    "start": "1132559",
    "end": "1134640"
  },
  {
    "text": "pull problem some kind of scheduling",
    "start": "1134640",
    "end": "1136480"
  },
  {
    "text": "problem fragmentation for anything",
    "start": "1136480",
    "end": "1138160"
  },
  {
    "text": "running um and so on and so the basic",
    "start": "1138160",
    "end": "1141600"
  },
  {
    "text": "way the app wrapper does this is it sort",
    "start": "1141600",
    "end": "1143200"
  },
  {
    "text": "of monitoring the pods and uh their",
    "start": "1143200",
    "end": "1145760"
  },
  {
    "text": "health it gives the underlying",
    "start": "1145760",
    "end": "1147679"
  },
  {
    "text": "controller for example the PyTorch you",
    "start": "1147679",
    "end": "1149360"
  },
  {
    "text": "know that the trainer operator or the",
    "start": "1149360",
    "end": "1150960"
  },
  {
    "text": "job controller gives it a chance to try",
    "start": "1150960",
    "end": "1152640"
  },
  {
    "text": "to clean up um but then if it looks like",
    "start": "1152640",
    "end": "1154880"
  },
  {
    "text": "the the base controller for the resource",
    "start": "1154880",
    "end": "1156720"
  },
  {
    "text": "has not managed to recover the workload",
    "start": "1156720",
    "end": "1158720"
  },
  {
    "text": "then the app wrapper controller will",
    "start": "1158720",
    "end": "1160400"
  },
  {
    "text": "kick in and go through our fall",
    "start": "1160400",
    "end": "1162080"
  },
  {
    "text": "tolerance uh our life cycle um the",
    "start": "1162080",
    "end": "1165120"
  },
  {
    "text": "picture on the on the on the side there",
    "start": "1165120",
    "end": "1167200"
  },
  {
    "text": "shows the app wrapper life cycle and so",
    "start": "1167200",
    "end": "1169360"
  },
  {
    "text": "basically at the high level uh an app",
    "start": "1169360",
    "end": "1171600"
  },
  {
    "text": "wrapper is suspended or it's admitted uh",
    "start": "1171600",
    "end": "1173840"
  },
  {
    "text": "when it's admitted Q's decided it could",
    "start": "1173840",
    "end": "1175600"
  },
  {
    "text": "run it has quota assigned to it it has",
    "start": "1175600",
    "end": "1177679"
  },
  {
    "text": "resources being created and it's it's",
    "start": "1177679",
    "end": "1179760"
  },
  {
    "text": "it's running um within that admitted",
    "start": "1179760",
    "end": "1182320"
  },
  {
    "text": "state there basically are three",
    "start": "1182320",
    "end": "1183760"
  },
  {
    "text": "substates so resuming means the app",
    "start": "1183760",
    "end": "1186720"
  },
  {
    "text": "wrapper has been started to run and it's",
    "start": "1186720",
    "end": "1188400"
  },
  {
    "text": "creating the the other resources the",
    "start": "1188400",
    "end": "1189840"
  },
  {
    "text": "pietorrch job the the uh the pods that",
    "start": "1189840",
    "end": "1192480"
  },
  {
    "text": "belong to it the job object and so on",
    "start": "1192480",
    "end": "1193919"
  },
  {
    "text": "and those are being scheduled uh running",
    "start": "1193919",
    "end": "1195600"
  },
  {
    "text": "is a sort of normal state for it and",
    "start": "1195600",
    "end": "1197280"
  },
  {
    "text": "from running it can go to succeeded or",
    "start": "1197280",
    "end": "1198720"
  },
  {
    "text": "failed um if the app wrapper controller",
    "start": "1198720",
    "end": "1201440"
  },
  {
    "text": "decides that something is wrong with it",
    "start": "1201440",
    "end": "1203039"
  },
  {
    "text": "then we hit this reset phase and that's",
    "start": "1203039",
    "end": "1205039"
  },
  {
    "text": "when all the resources are removed um",
    "start": "1205039",
    "end": "1207600"
  },
  {
    "text": "and then potentially re reexecuted again",
    "start": "1207600",
    "end": "1209760"
  },
  {
    "text": "and we go around that loop some number",
    "start": "1209760",
    "end": "1211039"
  },
  {
    "text": "of times and there's sort of a this this",
    "start": "1211039",
    "end": "1213440"
  },
  {
    "text": "uniform retry by loop uh will retain the",
    "start": "1213440",
    "end": "1216320"
  },
  {
    "text": "quota so we have still the ability to",
    "start": "1216320",
    "end": "1218640"
  },
  {
    "text": "run um do the reset and then go ahead",
    "start": "1218640",
    "end": "1221280"
  },
  {
    "text": "and and do that and we configure the",
    "start": "1221280",
    "end": "1223280"
  },
  {
    "text": "system so there's a reasonable sort of",
    "start": "1223280",
    "end": "1224720"
  },
  {
    "text": "defaults for all these uh various pause",
    "start": "1224720",
    "end": "1227200"
  },
  {
    "text": "times and grace periods and retries um",
    "start": "1227200",
    "end": "1229679"
  },
  {
    "text": "those can be set by the cluster admin",
    "start": "1229679",
    "end": "1231120"
  },
  {
    "text": "and can be enforced and then users can",
    "start": "1231120",
    "end": "1233039"
  },
  {
    "text": "override them within limits on",
    "start": "1233039",
    "end": "1234559"
  },
  {
    "text": "individual jobs using",
    "start": "1234559",
    "end": "1237000"
  },
  {
    "text": "annotations and so putting it all",
    "start": "1237000",
    "end": "1238799"
  },
  {
    "text": "together we have autopilot um and the",
    "start": "1238799",
    "end": "1241440"
  },
  {
    "text": "the tools it uses checking the GPUs",
    "start": "1241440",
    "end": "1244400"
  },
  {
    "text": "checking the network health and labeling",
    "start": "1244400",
    "end": "1246240"
  },
  {
    "text": "nodes to tell us what's going on uh the",
    "start": "1246240",
    "end": "1248559"
  },
  {
    "text": "app wrapper controller automatically",
    "start": "1248559",
    "end": "1250320"
  },
  {
    "text": "injects affinities into the all the pods",
    "start": "1250320",
    "end": "1252400"
  },
  {
    "text": "that are created for the workload this",
    "start": "1252400",
    "end": "1253840"
  },
  {
    "text": "helps us steer away uh new workloads",
    "start": "1253840",
    "end": "1256640"
  },
  {
    "text": "from unhealthy nodes um it also when it",
    "start": "1256640",
    "end": "1259919"
  },
  {
    "text": "part of its monitoring is it detects uh",
    "start": "1259919",
    "end": "1262080"
  },
  {
    "text": "pods that are running on nodes that have",
    "start": "1262080",
    "end": "1263760"
  },
  {
    "text": "now been labeled as evict by autopilot",
    "start": "1263760",
    "end": "1265840"
  },
  {
    "text": "uh when that happens it'll go and",
    "start": "1265840",
    "end": "1267280"
  },
  {
    "text": "trigger a reset uh that will result in",
    "start": "1267280",
    "end": "1269600"
  },
  {
    "text": "the pods being removed and sort of",
    "start": "1269600",
    "end": "1271200"
  },
  {
    "text": "automates this whole recovery from the",
    "start": "1271200",
    "end": "1273120"
  },
  {
    "text": "failure and with the integration with",
    "start": "1273120",
    "end": "1275360"
  },
  {
    "text": "the Slack cluster Q with Q we do",
    "start": "1275360",
    "end": "1277760"
  },
  {
    "text": "capacity management so we adjust the",
    "start": "1277760",
    "end": "1279360"
  },
  {
    "text": "available quota that Q is using to admit",
    "start": "1279360",
    "end": "1281679"
  },
  {
    "text": "jobs based on what's healthy in the",
    "start": "1281679",
    "end": "1283280"
  },
  {
    "text": "cluster all right so we're going to do",
    "start": "1283280",
    "end": "1284960"
  },
  {
    "text": "now is show a demo of all this working",
    "start": "1284960",
    "end": "1287000"
  },
  {
    "text": "together it's always fun doing demos all",
    "start": "1287000",
    "end": "1289919"
  },
  {
    "text": "right so this is a recorded demo and so",
    "start": "1289919",
    "end": "1291520"
  },
  {
    "text": "here we do is we're going to submit a",
    "start": "1291520",
    "end": "1293039"
  },
  {
    "text": "workload um this is a relatively small",
    "start": "1293039",
    "end": "1295039"
  },
  {
    "text": "demo cluster we have we have three nodes",
    "start": "1295039",
    "end": "1296799"
  },
  {
    "text": "in it and so we're going to have Alice",
    "start": "1296799",
    "end": "1298320"
  },
  {
    "text": "submit a batch workload that's going to",
    "start": "1298320",
    "end": "1299919"
  },
  {
    "text": "use uh two of those nodes",
    "start": "1299919",
    "end": "1302799"
  },
  {
    "text": "um all right and we can see them running",
    "start": "1302799",
    "end": "1304720"
  },
  {
    "text": "in there we're seeing where the pods are",
    "start": "1304720",
    "end": "1306720"
  },
  {
    "text": "and now what we're going to do is we're",
    "start": "1306720",
    "end": "1307679"
  },
  {
    "text": "going to pretend to be autopilot and",
    "start": "1307679",
    "end": "1309280"
  },
  {
    "text": "we're going to label a node as if there",
    "start": "1309280",
    "end": "1310720"
  },
  {
    "text": "was a failure all right so we're going",
    "start": "1310720",
    "end": "1312400"
  },
  {
    "text": "to go in grab one of those node names",
    "start": "1312400",
    "end": "1314400"
  },
  {
    "text": "and we'll label that node with the label",
    "start": "1314400",
    "end": "1316720"
  },
  {
    "text": "that autopilot uses to indicate there's",
    "start": "1316720",
    "end": "1318400"
  },
  {
    "text": "a severe failure on that node so the",
    "start": "1318400",
    "end": "1319919"
  },
  {
    "text": "word any workload running on that ought",
    "start": "1319919",
    "end": "1321360"
  },
  {
    "text": "to be migrated away from it okay so it's",
    "start": "1321360",
    "end": "1324799"
  },
  {
    "text": "so we're going to go ahead and watch the",
    "start": "1324799",
    "end": "1326159"
  },
  {
    "text": "thing running it'll take about 45",
    "start": "1326159",
    "end": "1327679"
  },
  {
    "text": "seconds for the mechanism to kick in for",
    "start": "1327679",
    "end": "1329360"
  },
  {
    "text": "the apprapper controller to see the",
    "start": "1329360",
    "end": "1331120"
  },
  {
    "text": "nodes been labeled to wait for a little",
    "start": "1331120",
    "end": "1333120"
  },
  {
    "text": "bit and then to go through the reset",
    "start": "1333120",
    "end": "1334320"
  },
  {
    "text": "trial to do that so while it's doing",
    "start": "1334320",
    "end": "1336000"
  },
  {
    "text": "this um right so it's it's sort of",
    "start": "1336000",
    "end": "1338799"
  },
  {
    "text": "monitoring it notices the node has been",
    "start": "1338799",
    "end": "1340720"
  },
  {
    "text": "labeled and it will then go ahead and uh",
    "start": "1340720",
    "end": "1344000"
  },
  {
    "text": "trigger a reset",
    "start": "1344000",
    "end": "1346120"
  },
  {
    "text": "um and as we said before the it has",
    "start": "1346120",
    "end": "1349120"
  },
  {
    "text": "these affinities so when the new pods",
    "start": "1349120",
    "end": "1350960"
  },
  {
    "text": "get created they'll have those",
    "start": "1350960",
    "end": "1352320"
  },
  {
    "text": "affinities in them so when the after",
    "start": "1352320",
    "end": "1354640"
  },
  {
    "text": "this uh workload gets cleaned up and",
    "start": "1354640",
    "end": "1357280"
  },
  {
    "text": "recreated it'll be steered away the pods",
    "start": "1357280",
    "end": "1359280"
  },
  {
    "text": "will be steered away from the SK by",
    "start": "1359280",
    "end": "1360480"
  },
  {
    "text": "theuler from the nodes that are",
    "start": "1360480",
    "end": "1361960"
  },
  {
    "text": "unhealthy and uh you know it always you",
    "start": "1361960",
    "end": "1365120"
  },
  {
    "text": "know it takes there it goes so now now",
    "start": "1365120",
    "end": "1366880"
  },
  {
    "text": "we finally noticed so we're resetting",
    "start": "1366880",
    "end": "1368799"
  },
  {
    "text": "the app wrapper is being resetted",
    "start": "1368799",
    "end": "1370240"
  },
  {
    "text": "that'll take a few minutes now all the",
    "start": "1370240",
    "end": "1371919"
  },
  {
    "text": "resources are completely gone so it's",
    "start": "1371919",
    "end": "1373760"
  },
  {
    "text": "now safe to go ahead and resubmit it and",
    "start": "1373760",
    "end": "1376480"
  },
  {
    "text": "if we look at them we can see that that",
    "start": "1376480",
    "end": "1378240"
  },
  {
    "text": "it's running and the pods are none of",
    "start": "1378240",
    "end": "1380240"
  },
  {
    "text": "the pods are running on the victim node",
    "start": "1380240",
    "end": "1381679"
  },
  {
    "text": "that we had labeled right so going back",
    "start": "1381679",
    "end": "1385440"
  },
  {
    "text": "out of",
    "start": "1385440",
    "end": "1387240"
  },
  {
    "text": "there so just uh just to quickly sum up",
    "start": "1387240",
    "end": "1390880"
  },
  {
    "text": "um so we've talked a little about dodge",
    "start": "1390880",
    "end": "1392159"
  },
  {
    "text": "today is you know there are many",
    "start": "1392159",
    "end": "1393520"
  },
  {
    "text": "potential sources of failure degradation",
    "start": "1393520",
    "end": "1395600"
  },
  {
    "text": "on large ML clusters with GPUs high",
    "start": "1395600",
    "end": "1397600"
  },
  {
    "text": "performance networks and storage um if",
    "start": "1397600",
    "end": "1399679"
  },
  {
    "text": "you really want to make effective and",
    "start": "1399679",
    "end": "1400960"
  },
  {
    "text": "productive use of these things you need",
    "start": "1400960",
    "end": "1402480"
  },
  {
    "text": "to have automation so that if something",
    "start": "1402480",
    "end": "1404400"
  },
  {
    "text": "goes wrong you don't need a human in the",
    "start": "1404400",
    "end": "1406080"
  },
  {
    "text": "loop at 2:00 in the morning to come in",
    "start": "1406080",
    "end": "1407360"
  },
  {
    "text": "and fix it the system can fix it and you",
    "start": "1407360",
    "end": "1409440"
  },
  {
    "text": "can continue to get high utilization out",
    "start": "1409440",
    "end": "1410880"
  },
  {
    "text": "of it and we talked today about pieces",
    "start": "1410880",
    "end": "1413280"
  },
  {
    "text": "of our stack Autopilot and App Wrapper",
    "start": "1413280",
    "end": "1415039"
  },
  {
    "text": "that sort of capture our experience of",
    "start": "1415039",
    "end": "1416400"
  },
  {
    "text": "these clusters um they're both open",
    "start": "1416400",
    "end": "1418480"
  },
  {
    "text": "source and they're both parts of our MLB",
    "start": "1418480",
    "end": "1420880"
  },
  {
    "text": "software stack that we run in our",
    "start": "1420880",
    "end": "1422080"
  },
  {
    "text": "clusters um and if you're sort of",
    "start": "1422080",
    "end": "1423679"
  },
  {
    "text": "interested in this uh Claudia Libby and",
    "start": "1423679",
    "end": "1425679"
  },
  {
    "text": "I have a tutorial tomorrow where we're",
    "start": "1425679",
    "end": "1427200"
  },
  {
    "text": "talking about our entire stack um so",
    "start": "1427200",
    "end": "1429120"
  },
  {
    "text": "that's the QR code for that um so we'd",
    "start": "1429120",
    "end": "1432000"
  },
  {
    "text": "love to see some of you there if you're",
    "start": "1432000",
    "end": "1433200"
  },
  {
    "text": "interested in learning more about the",
    "start": "1433200",
    "end": "1434480"
  },
  {
    "text": "entire stack and how we use it and the",
    "start": "1434480",
    "end": "1436559"
  },
  {
    "text": "other Q QR code is for you to give us",
    "start": "1436559",
    "end": "1438400"
  },
  {
    "text": "some feedback on the talk so we'll be",
    "start": "1438400",
    "end": "1440159"
  },
  {
    "text": "happy to take questions now",
    "start": "1440159",
    "end": "1443690"
  },
  {
    "text": "[Applause]",
    "start": "1443690",
    "end": "1448858"
  }
]