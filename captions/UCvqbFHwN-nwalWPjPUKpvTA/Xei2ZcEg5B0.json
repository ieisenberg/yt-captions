[
  {
    "start": "0",
    "end": "85000"
  },
  {
    "text": "yeah thanks for joining my talk and i must admit i'm really grateful to god",
    "start": "0",
    "end": "5520"
  },
  {
    "text": "that i'm standing here right now because like on sunday i woke up to a very very",
    "start": "5520",
    "end": "10800"
  },
  {
    "text": "bad food intolerance like two bad symptoms of it from something i ate on saturday",
    "start": "10800",
    "end": "16880"
  },
  {
    "text": "and was laying in bed and was like i can't make it to gitobscon and then on monday i woke up nothing",
    "start": "16880",
    "end": "23359"
  },
  {
    "text": "happened like as if nothing happened i completely recovered and now i'm here so yeah i'm really grateful to be to be",
    "start": "23359",
    "end": "30480"
  },
  {
    "text": "able to do that here for the first time in years um i am max i work at data iq i'm a",
    "start": "30480",
    "end": "37520"
  },
  {
    "text": "kubernetes engineer there i'm also a flux maintainer uh have been for like uh half a year",
    "start": "37520",
    "end": "45120"
  },
  {
    "text": "uh nine months maybe and um at daddy iq we basically have two products one is",
    "start": "45120",
    "end": "51840"
  },
  {
    "text": "uh or they they are both sold under the umbrella term dkp which",
    "start": "51840",
    "end": "57840"
  },
  {
    "text": "is the data iq kubernetes platform one is enabling single cluster experience and",
    "start": "57840",
    "end": "65040"
  },
  {
    "text": "the other product building on top of that is for facilitating multi-cluster experience",
    "start": "65040",
    "end": "71200"
  },
  {
    "text": "right so we basically have multi-cluster running through our veins if you will",
    "start": "71200",
    "end": "77439"
  },
  {
    "text": "um and yeah it's one of my favorite topics of",
    "start": "77439",
    "end": "82720"
  },
  {
    "text": "last years um however",
    "start": "82720",
    "end": "88000"
  },
  {
    "start": "85000",
    "end": "195000"
  },
  {
    "text": "it is pretty cutting edge like all the companies talking about multi-cluster",
    "start": "88000",
    "end": "93520"
  },
  {
    "text": "here are from my experience um exceptions to the rule that",
    "start": "93520",
    "end": "99920"
  },
  {
    "text": "multi-cluster is still very cutting edge and very early in its stage right",
    "start": "99920",
    "end": "107360"
  },
  {
    "text": "the the main customers of data iq are big corporation enterprises government agencies",
    "start": "108640",
    "end": "115520"
  },
  {
    "text": "and they are slowly ramping up the kubernetes deployments in in a single cluster way right and those that do",
    "start": "115520",
    "end": "123040"
  },
  {
    "text": "um they already have kind of mature day two operations um with the help of of",
    "start": "123040",
    "end": "129520"
  },
  {
    "text": "vendors like data iq or with the help of an awesome platform team that they want them themselves",
    "start": "129520",
    "end": "136160"
  },
  {
    "text": "internally that's pretty much where single cluster let's say like that's problem solved",
    "start": "136160",
    "end": "144080"
  },
  {
    "text": "few enterprises are now entering like this this phase of experimenting with",
    "start": "144080",
    "end": "150720"
  },
  {
    "text": "multi-cluster environments right so they want to use multiple clusters",
    "start": "150720",
    "end": "157360"
  },
  {
    "text": "kubernetes clusters in particular for for heart multi-tenancy something michael",
    "start": "157360",
    "end": "163760"
  },
  {
    "text": "nicely laid out in in the talk today here as well",
    "start": "163760",
    "end": "169680"
  },
  {
    "text": "but it's only like dipping their toes into the waters of multi-cluster right it's",
    "start": "169680",
    "end": "174800"
  },
  {
    "text": "it's a very early stage and very few have mature day two operations of these",
    "start": "174800",
    "end": "180000"
  },
  {
    "text": "in place with like day zero being an experimentation phase day one being a setup phase you install",
    "start": "180000",
    "end": "186800"
  },
  {
    "text": "your first clusters you you play with it and day two being the actual taking to",
    "start": "186800",
    "end": "192239"
  },
  {
    "text": "production right from the experiences that",
    "start": "192239",
    "end": "199440"
  },
  {
    "start": "195000",
    "end": "349000"
  },
  {
    "text": "we made with our customers and what i've been talking to other people with",
    "start": "199440",
    "end": "205440"
  },
  {
    "text": "there are mainly four use cases that i was able to derive",
    "start": "205440",
    "end": "210480"
  },
  {
    "text": "that you want to facilitate and multi-cluster environments you want to treat your clusters",
    "start": "210480",
    "end": "216959"
  },
  {
    "text": "as cattle right i just had this had this uh quick conversation with chris before",
    "start": "216959",
    "end": "223200"
  },
  {
    "text": "the talk about customers loving their clusters right and he said customers shouldn't love their clusters no one",
    "start": "223200",
    "end": "229360"
  },
  {
    "text": "should love that cluster treat it as cattle if it breaks shut it down create a new one if the version is too old it gets",
    "start": "229360",
    "end": "236799"
  },
  {
    "text": "too far behind don't try to upgrade it just kill it and create a new one right treat it as cattle but that",
    "start": "236799",
    "end": "243840"
  },
  {
    "text": "means you need to make creation and deletion and modification of a cluster are very very simple",
    "start": "243840",
    "end": "250720"
  },
  {
    "text": "and replacement of an existing one as simple as creating a deployment and deleting it again",
    "start": "250720",
    "end": "258239"
  },
  {
    "text": "you also want to deploy a fixed set of components onto each managed clusters",
    "start": "258239",
    "end": "263440"
  },
  {
    "text": "so the scenario i'm laying out here is you have a management cluster and then you have several attached clusters or",
    "start": "263440",
    "end": "269280"
  },
  {
    "text": "adopted clusters however you want to call it and in order to make them manage to for",
    "start": "269280",
    "end": "275280"
  },
  {
    "text": "example roll up metrics to have insights into the cost of each",
    "start": "275280",
    "end": "280320"
  },
  {
    "text": "cluster you need to deploy a certain fixed set of management components onto",
    "start": "280320",
    "end": "285360"
  },
  {
    "text": "each cluster that is something that is mandated by the management cluster",
    "start": "285360",
    "end": "293280"
  },
  {
    "text": "but you also want to provide something as i call it here like a centrally managed application catalog so",
    "start": "293600",
    "end": "300000"
  },
  {
    "text": "you have like an ops team or a vendor maybe that maintains an application catalog for",
    "start": "300000",
    "end": "306479"
  },
  {
    "text": "you that you can provide to your users to deploy to every cluster something like i don't know i need this ingress",
    "start": "306479",
    "end": "313120"
  },
  {
    "text": "controller so they maintain it as part of the central application repository",
    "start": "313120",
    "end": "318400"
  },
  {
    "text": "together with certain configuration that maybe fits to to the internal enterprises environment best",
    "start": "318400",
    "end": "325840"
  },
  {
    "text": "and you can just pick from it and say i want to deploy that to this cluster or to the set of clusters",
    "start": "325840",
    "end": "332080"
  },
  {
    "text": "but i mean central to a multi-cluster environment is that you want to make it easy for users for the developers",
    "start": "332080",
    "end": "339360"
  },
  {
    "text": "to deploy their workloads onto the clusters right you have a tenant maybe multiple",
    "start": "339360",
    "end": "344880"
  },
  {
    "text": "tenants per cluster and they just want to run their applications",
    "start": "344880",
    "end": "350320"
  },
  {
    "start": "349000",
    "end": "474000"
  },
  {
    "text": "and obviously we're at get ups con get ups comes to the rescue here um",
    "start": "350320",
    "end": "355360"
  },
  {
    "text": "and and i liked how how michael said it and his talk before they they kind of converged to get",
    "start": "355360",
    "end": "361919"
  },
  {
    "text": "um because it's just such or to get ops it doesn't have to be good um",
    "start": "361919",
    "end": "369120"
  },
  {
    "text": "in in a natural fashion right it just comes natural that you that you converge",
    "start": "369120",
    "end": "374319"
  },
  {
    "text": "to the get-ups model but there are some things",
    "start": "374319",
    "end": "380639"
  },
  {
    "text": "that would have to change with regards to the mindset that you like apply to to",
    "start": "380639",
    "end": "386000"
  },
  {
    "text": "the model you can't exclusively rely on kubernetes are back anymore in fact you",
    "start": "386000",
    "end": "391520"
  },
  {
    "text": "actually shouldn't right because users don't need to be able to access the kubernetes api anymore",
    "start": "391520",
    "end": "397440"
  },
  {
    "text": "um because now what what you need to apply is like policies",
    "start": "397440",
    "end": "403440"
  },
  {
    "text": "to to for access to the get repositories because that's the entry point for all the users deploying the workloads",
    "start": "403440",
    "end": "410479"
  },
  {
    "text": "um you also need to employ multiple repositories we saw that in the several talks before",
    "start": "410479",
    "end": "415680"
  },
  {
    "text": "um but if you if you if you really want to isolate your tenants you need to provide",
    "start": "415680",
    "end": "422560"
  },
  {
    "text": "a good repository per tenant obviously",
    "start": "422560",
    "end": "427039"
  },
  {
    "text": "and you may want to provide a way to configure certain applications in a different way maybe like you have the",
    "start": "428880",
    "end": "435680"
  },
  {
    "text": "central application catalog but you want users to be able to say like oh yeah i want to deploy metal lb but i need to be",
    "start": "435680",
    "end": "442319"
  },
  {
    "text": "able to configure the address range of metal lb um yeah something like that um so that's",
    "start": "442319",
    "end": "449360"
  },
  {
    "text": "pretty important users need to be able to configure the applications that they deploy in a very simple manner",
    "start": "449360",
    "end": "456160"
  },
  {
    "text": "and of course you want to isolate tenants from each other on each cluster so you may still want to want to use",
    "start": "456160",
    "end": "462400"
  },
  {
    "text": "your cluster's resources in a reasonable way and maybe put several tenants on the",
    "start": "462400",
    "end": "468639"
  },
  {
    "text": "same cluster right and then you've got to make sure to isolate them",
    "start": "468639",
    "end": "474800"
  },
  {
    "start": "474000",
    "end": "516000"
  },
  {
    "text": "and that's like one principle that stuck to me uh from the first time i heard it",
    "start": "476479",
    "end": "482560"
  },
  {
    "text": "you don't need and maybe you don't want to give users access to the kubernetes api anymore maybe only in a read-only",
    "start": "482560",
    "end": "489680"
  },
  {
    "text": "fashion so they can see the status of their resources right but other than that they shouldn't be able or at least",
    "start": "489680",
    "end": "496400"
  },
  {
    "text": "shouldn't shouldn't want to create edit or delete any resources",
    "start": "496400",
    "end": "502080"
  },
  {
    "text": "because everything is going through git anyway right with flux if you added a resource the customization controller",
    "start": "502080",
    "end": "508400"
  },
  {
    "text": "will kick in uh right after that and just delete your changes again or roll back",
    "start": "508400",
    "end": "513919"
  },
  {
    "text": "changes again anyway um and what i wanted to create first like",
    "start": "513919",
    "end": "521760"
  },
  {
    "start": "516000",
    "end": "585000"
  },
  {
    "text": "as a prototype for myself and something that we wanted to experiment with internally was something like a",
    "start": "521760",
    "end": "527680"
  },
  {
    "text": "multi-cluster template something like we define a certain set of works uh",
    "start": "527680",
    "end": "534480"
  },
  {
    "text": "workflows and and personas and then we implement that model however we wanna",
    "start": "534480",
    "end": "541680"
  },
  {
    "text": "you we can use flux for that we can use argo cd for that",
    "start": "541680",
    "end": "546720"
  },
  {
    "text": "and i liked how like the githubs working group and the opengitups project",
    "start": "546720",
    "end": "551920"
  },
  {
    "text": "converged onto that definition of getups with these four principles and maybe this is something we can come up with as",
    "start": "551920",
    "end": "559040"
  },
  {
    "text": "a community for multi-cluster environments right because everyone's doing it differently right now because",
    "start": "559040",
    "end": "564480"
  },
  {
    "text": "it's so new right where that is doing it very differently from data iq and aws is",
    "start": "564480",
    "end": "570399"
  },
  {
    "text": "doing it differently from from everybody else again right and then there's many ops teams at this point like at this",
    "start": "570399",
    "end": "577519"
  },
  {
    "text": "time trying to figure out the best way to do multi-cluster right so maybe that's something the community can",
    "start": "577519",
    "end": "583360"
  },
  {
    "text": "provide help with at least um so i identified",
    "start": "583360",
    "end": "590240"
  },
  {
    "start": "585000",
    "end": "608000"
  },
  {
    "text": "several workflows that you want to enable or implement with your multi-cluster",
    "start": "590240",
    "end": "596320"
  },
  {
    "text": "setup the first is pretty obvious you want to deploy a management cluster right you",
    "start": "596320",
    "end": "601519"
  },
  {
    "text": "want to spin it up install certain components onto there um for example flux or whatever",
    "start": "601519",
    "end": "609200"
  },
  {
    "start": "608000",
    "end": "637000"
  },
  {
    "text": "then you want to be able to adopt the cluster so you have like several clusters and you you want to make them",
    "start": "609200",
    "end": "614560"
  },
  {
    "text": "managed and you want to have this like single pane of glass that shows you all your clusters that shows you how much",
    "start": "614560",
    "end": "620800"
  },
  {
    "text": "each cluster costs how much each workload costs you want to see metrics you want to see the logs maybe you want",
    "start": "620800",
    "end": "627040"
  },
  {
    "text": "to roll up the logs to the central management cluster you want to have something like sso all that has to come",
    "start": "627040",
    "end": "633920"
  },
  {
    "text": "from the management cluster and that's what i call adoption or attachment or yeah there's several",
    "start": "633920",
    "end": "641200"
  },
  {
    "start": "637000",
    "end": "678000"
  },
  {
    "text": "terms for that as i said before you maybe want to be",
    "start": "641200",
    "end": "646560"
  },
  {
    "text": "able to group your clusters um and",
    "start": "646560",
    "end": "651600"
  },
  {
    "text": "deploy the same set of workloads onto this group right so you have several groups you have several clusters in each",
    "start": "651600",
    "end": "657920"
  },
  {
    "text": "group and then define the workloads that each cluster in each group would would",
    "start": "657920",
    "end": "663839"
  },
  {
    "text": "get right so you would have like i don't know maybe a dev group and all the dev",
    "start": "663839",
    "end": "668880"
  },
  {
    "text": "clusters would get this set of applications deployed and then a staging group that would get a",
    "start": "668880",
    "end": "674560"
  },
  {
    "text": "different set of applications deployed and",
    "start": "674560",
    "end": "680399"
  },
  {
    "start": "678000",
    "end": "712000"
  },
  {
    "text": "also you want to be able to configure the workloads per cluster and which",
    "start": "680399",
    "end": "685839"
  },
  {
    "text": "workloads are deployed onto each cluster so you still need to be able need to be able even though you have groups",
    "start": "685839",
    "end": "692320"
  },
  {
    "text": "to to target a single cluster um [Music]",
    "start": "692320",
    "end": "698640"
  },
  {
    "text": "yeah oh yeah that's about configuration of the workloads and then you also want to want to",
    "start": "698640",
    "end": "704320"
  },
  {
    "text": "be able to like just deploy like your development team and you want to be able to like just deploy your application",
    "start": "704320",
    "end": "710560"
  },
  {
    "text": "onto a single cluster um and then there's different personas",
    "start": "710560",
    "end": "715839"
  },
  {
    "start": "712000",
    "end": "769000"
  },
  {
    "text": "acting on each cluster so the management cluster administrator that's like the person that has like them the the",
    "start": "715839",
    "end": "722320"
  },
  {
    "text": "highest privileges in in this hierarchy of multi multiple clusters",
    "start": "722320",
    "end": "727360"
  },
  {
    "text": "that's the person that deploys the management cluster that's the person that makes sure the set of the fixed set",
    "start": "727360",
    "end": "734560"
  },
  {
    "text": "of components of common components that each cluster receives is well maintained",
    "start": "734560",
    "end": "740160"
  },
  {
    "text": "and everything like that and then you have the workspace administrator that's the person that administrates a certain",
    "start": "740160",
    "end": "746959"
  },
  {
    "text": "group of clusters and you have",
    "start": "746959",
    "end": "752160"
  },
  {
    "text": "the manage cluster administrator that's the person that is responsible basically the tenant that is responsible for",
    "start": "752160",
    "end": "760240"
  },
  {
    "text": "for maintaining a single cluster right maybe the development team may be a single",
    "start": "760240",
    "end": "765839"
  },
  {
    "text": "person out of that development team",
    "start": "765839",
    "end": "769440"
  },
  {
    "start": "769000",
    "end": "873000"
  },
  {
    "text": "and of course i didn't want to leave it at that and just say yeah that's a nice concept um",
    "start": "771440",
    "end": "777360"
  },
  {
    "text": "one with it i also wanted to dip my toes into it and and actually implement it and see how hard it",
    "start": "777360",
    "end": "783920"
  },
  {
    "text": "actually is given the tools we have in the community right now and as a flux maintainer it came quite",
    "start": "783920",
    "end": "789920"
  },
  {
    "text": "natural to me that i used flux for that um if you don't know what flux is yet",
    "start": "789920",
    "end": "797519"
  },
  {
    "text": "it's basically a set of components that one on a cluster that let you",
    "start": "797519",
    "end": "804000"
  },
  {
    "text": "reconcile get repositories or other artifact storages like a",
    "start": "804000",
    "end": "810160"
  },
  {
    "text": "helm repository or an s3 bucket then you have a home controller over",
    "start": "810160",
    "end": "816079"
  },
  {
    "text": "there that creates helm releases from manifests in that get repository or in that source",
    "start": "816079",
    "end": "823199"
  },
  {
    "text": "and you have a customized controller running that basically uh uses customized to create",
    "start": "823199",
    "end": "828880"
  },
  {
    "text": "resources on the cluster from like bare bones kubernetes manifests in the",
    "start": "828880",
    "end": "834079"
  },
  {
    "text": "repository right so that's flux and that's why what i what i love about flux why i fell in",
    "start": "834079",
    "end": "840880"
  },
  {
    "text": "love with flux it's so simple right it's just a set of certain controllers each controller is",
    "start": "840880",
    "end": "847199"
  },
  {
    "text": "very very targeted at one use case and only one so it's like an implementation",
    "start": "847199",
    "end": "852880"
  },
  {
    "text": "of the unix principle which i really really dig each component like the source",
    "start": "852880",
    "end": "858320"
  },
  {
    "text": "controller comes with their own crds and it's easy to understand right you",
    "start": "858320",
    "end": "864160"
  },
  {
    "text": "don't need days or weeks to understand flux you just run flux install it has great cli and you can go go right away",
    "start": "864160",
    "end": "873920"
  },
  {
    "start": "873000",
    "end": "900000"
  },
  {
    "text": "if you want to dig deeper into flux there's a great documentation page",
    "start": "873920",
    "end": "879279"
  },
  {
    "text": "from [Music] created from by kingdom barrett from the flux project",
    "start": "879279",
    "end": "885839"
  },
  {
    "text": "um it's a huge page it's a lot of text but it explains flux from a to z and",
    "start": "885839",
    "end": "892800"
  },
  {
    "text": "it's a really great page i really love it i really love that we have that up now for like",
    "start": "892800",
    "end": "898480"
  },
  {
    "text": "since two months or so so the demo i'm i'm showing right now it's",
    "start": "898480",
    "end": "906240"
  },
  {
    "text": "pretty quick because you don't have too much time um is hosted in this repository i",
    "start": "906240",
    "end": "914399"
  },
  {
    "text": "created a qr code because i thought maybe the name is a little too long to",
    "start": "914399",
    "end": "919600"
  },
  {
    "text": "type it up um i don't know if the qr code works in this place um but yeah anyway you can ask me",
    "start": "919600",
    "end": "926320"
  },
  {
    "text": "for the link later if you want to um everything is there um and uh",
    "start": "926320",
    "end": "933040"
  },
  {
    "text": "let's just dive right into it so what do we have we have um",
    "start": "933040",
    "end": "939680"
  },
  {
    "start": "934000",
    "end": "978000"
  },
  {
    "text": "on the left side i'm i'm connected to the management cluster",
    "start": "939680",
    "end": "946399"
  },
  {
    "text": "and on the right side i'm connected to another cluster both are just kind clusters",
    "start": "946399",
    "end": "954160"
  },
  {
    "text": "for simplicity's sake and because you never know how the internet connection is at a conference",
    "start": "954160",
    "end": "962320"
  },
  {
    "text": "on the right hand side you can see it's a bare bones i'm gonna",
    "start": "963279",
    "end": "969279"
  },
  {
    "text": "make this bigger it's a bare bones kind cluster nothing exceptional is running in it",
    "start": "969279",
    "end": "976720"
  },
  {
    "text": "on the white side we have some customizations already running in it",
    "start": "976720",
    "end": "982639"
  },
  {
    "start": "978000",
    "end": "1048000"
  },
  {
    "text": "there is a script in this repository that's called create management cluster",
    "start": "982639",
    "end": "989519"
  },
  {
    "text": "and what i wanted to do with this demo is see how far can i go",
    "start": "989519",
    "end": "995759"
  },
  {
    "text": "without or with programming as little as possible right with just using what's",
    "start": "995759",
    "end": "1003199"
  },
  {
    "text": "out there as much as possible um and again",
    "start": "1003199",
    "end": "1008800"
  },
  {
    "text": "as michael said before they didn't have many programmers in their department and i guess that's true",
    "start": "1008800",
    "end": "1014800"
  },
  {
    "text": "for many enterprises so what i try to do is use what's out there and program as",
    "start": "1014800",
    "end": "1021120"
  },
  {
    "text": "little as possible so create management cluster is basically these uh four lines",
    "start": "1021120",
    "end": "1026798"
  },
  {
    "text": "of shell script that creates a kind cluster it installs flux",
    "start": "1026799",
    "end": "1034079"
  },
  {
    "text": "and then it applies two resources to it right that's it the rest comes",
    "start": "1034079",
    "end": "1040640"
  },
  {
    "text": "from the structure and layout of the repository of the get repository itself",
    "start": "1040640",
    "end": "1046880"
  },
  {
    "text": "so let's see how i attach a cluster that's a little more",
    "start": "1047280",
    "end": "1052480"
  },
  {
    "start": "1048000",
    "end": "1245000"
  },
  {
    "text": "shell scripting um but that's um [Music]",
    "start": "1052480",
    "end": "1058080"
  },
  {
    "text": "the the closest i could get to making it simple right um",
    "start": "1058080",
    "end": "1064160"
  },
  {
    "text": "maybe we can find ways to make it simpler so it also installs flux using the cli",
    "start": "1064160",
    "end": "1070320"
  },
  {
    "text": "that's something that's actually not extremely necessary because you can keep all the flux manifest and the get",
    "start": "1070320",
    "end": "1076160"
  },
  {
    "text": "repository and i have attached clusters just reconcile that and install flux that way",
    "start": "1076160",
    "end": "1082320"
  },
  {
    "text": "um but bootstrapping is always",
    "start": "1082320",
    "end": "1087440"
  },
  {
    "text": "kind of difficult sometimes then i create",
    "start": "1087440",
    "end": "1093280"
  },
  {
    "text": "whether the scripts creates a secret holding the cube config of the attached cluster or to be attached",
    "start": "1093280",
    "end": "1099360"
  },
  {
    "text": "cluster um it creates a customization a flux",
    "start": "1099360",
    "end": "1104640"
  },
  {
    "text": "customization and stores it in the sync file this customization is special in that it",
    "start": "1104640",
    "end": "1111919"
  },
  {
    "text": "uses a very very awesome flux feature where you can say this is a customization that targets a",
    "start": "1111919",
    "end": "1119600"
  },
  {
    "text": "different cluster and not the one that that flux itself is running in right so you can pass",
    "start": "1119600",
    "end": "1125520"
  },
  {
    "text": "a secret to it a kubernetes secret to it that has a cube config file",
    "start": "1125520",
    "end": "1131679"
  },
  {
    "text": "so flux will take that and apply all the resources from that customization onto",
    "start": "1131679",
    "end": "1136880"
  },
  {
    "text": "the other cluster right so and and that's like the starting point from where everything",
    "start": "1136880",
    "end": "1142480"
  },
  {
    "text": "gets installed uh from the management clusters point of view",
    "start": "1142480",
    "end": "1149559"
  },
  {
    "text": "and yeah then it stores the actual remote sync is what i called it so these",
    "start": "1151039",
    "end": "1157840"
  },
  {
    "text": "are the two resources that i apply that are applied on the managed cluster so",
    "start": "1157840",
    "end": "1164160"
  },
  {
    "text": "that's a git repository and this is the one that is cluster",
    "start": "1164160",
    "end": "1169679"
  },
  {
    "text": "specific and for simplicity's sake i'm using the same repository in just a different",
    "start": "1169679",
    "end": "1174799"
  },
  {
    "text": "branch right and and an actual production environment you would use a different repository obviously and",
    "start": "1174799",
    "end": "1181200"
  },
  {
    "text": "provide the team that is to be the tenant on that cluster access to that get repository",
    "start": "1181200",
    "end": "1188480"
  },
  {
    "text": "but yeah i wanna i i didn't wanna create like 10 giga repositories just for a demo so",
    "start": "1188480",
    "end": "1195039"
  },
  {
    "text": "yeah i hope it gets my point across and then it creates a customization this",
    "start": "1195039",
    "end": "1201280"
  },
  {
    "text": "is one of the intricacies with flux you have flux customizations and you have kubernetes customizations and when we",
    "start": "1201280",
    "end": "1209039"
  },
  {
    "text": "talked about customizations at data iq in the beginning everyone was so confused because nobody knew what the",
    "start": "1209039",
    "end": "1214799"
  },
  {
    "text": "other person was talking about like is this a flux customization or is this a customized customization",
    "start": "1214799",
    "end": "1221120"
  },
  {
    "text": "um yeah i i guess if you start when you start using it get that right first",
    "start": "1221120",
    "end": "1227679"
  },
  {
    "text": "and then it pushes all this stuff and for speed's sake it kicks off a",
    "start": "1227679",
    "end": "1234000"
  },
  {
    "text": "reconciliation right away if you don't do this you just wait for",
    "start": "1234000",
    "end": "1239600"
  },
  {
    "text": "the source controller to kick in aft and it's during its regular reconciliation loop",
    "start": "1239600",
    "end": "1247200"
  },
  {
    "start": "1245000",
    "end": "1317000"
  },
  {
    "text": "so let's attach a cluster i have prepared something here we're going to attach a cluster and call",
    "start": "1247200",
    "end": "1252720"
  },
  {
    "text": "it test right i'm providing i have to provide different cube configs",
    "start": "1252720",
    "end": "1258159"
  },
  {
    "text": "here because i'm using kind and the usual kind config uses localhost or",
    "start": "1258159",
    "end": "1265520"
  },
  {
    "text": "127.001 for the api server which obviously can work from in its side of the cluster for",
    "start": "1265520",
    "end": "1272960"
  },
  {
    "text": "flux to use so i'm providing two con cube configs one is the internal one to",
    "start": "1272960",
    "end": "1278240"
  },
  {
    "text": "be used by flux and the other one is the one to be used by the shell script directly for example to run flux install",
    "start": "1278240",
    "end": "1285280"
  },
  {
    "text": "um that's not necessary if you're using like actual",
    "start": "1285280",
    "end": "1290640"
  },
  {
    "text": "clusters and the w flag lets you add the cluster",
    "start": "1290640",
    "end": "1296640"
  },
  {
    "text": "to a certain workspace as i said a workspace is a group of clusters that has a different repository and um",
    "start": "1296640",
    "end": "1304480"
  },
  {
    "text": "receives all like all the clusters and network space receive the contents of that",
    "start": "1304480",
    "end": "1309600"
  },
  {
    "text": "gateway story so it's just no let's just",
    "start": "1309600",
    "end": "1315440"
  },
  {
    "text": "do it and watch on the white side",
    "start": "1315440",
    "end": "1320480"
  },
  {
    "start": "1317000",
    "end": "1363000"
  },
  {
    "text": "what is happening so flux is installed so it's not saying anymore it doesn't find the resource the like the",
    "start": "1320480",
    "end": "1326799"
  },
  {
    "text": "definitions the crds on the right side on the left side it's still verifying flux installation waiting for it to get",
    "start": "1326799",
    "end": "1333760"
  },
  {
    "text": "ready now it's cloning the the management cluster repository",
    "start": "1333760",
    "end": "1339520"
  },
  {
    "text": "i can't talk as fast as it's progressing um it's adding the resources to the",
    "start": "1339520",
    "end": "1344840"
  },
  {
    "text": "repository kicking off a reconcile and why at that point",
    "start": "1344840",
    "end": "1350480"
  },
  {
    "text": "the the attach cluster receives everything it needs",
    "start": "1350480",
    "end": "1356480"
  },
  {
    "text": "right so you can see it's a little hard to just to see maybe",
    "start": "1356480",
    "end": "1361520"
  },
  {
    "text": "make this a little smaller um you can see a git repository that's",
    "start": "1361520",
    "end": "1366960"
  },
  {
    "start": "1363000",
    "end": "1474000"
  },
  {
    "text": "called cluster that's the cluster specific repository then the common get repository is the",
    "start": "1366960",
    "end": "1373280"
  },
  {
    "text": "one that's the same across all the clusters that holds components such as cubecast for example",
    "start": "1373280",
    "end": "1379840"
  },
  {
    "text": "or q cost agents or whatever you want to deploy across all attached clusters to",
    "start": "1379840",
    "end": "1385120"
  },
  {
    "text": "make them manageable and then the third repository is the workspace repository",
    "start": "1385120",
    "end": "1393200"
  },
  {
    "text": "and this receives its own namespace right so each workspace",
    "start": "1393840",
    "end": "1399120"
  },
  {
    "text": "is an isolated tenant in a namespace on that cluster to make it actually",
    "start": "1399120",
    "end": "1404480"
  },
  {
    "text": "isolated we already saw michael showing that i'm i'm",
    "start": "1404480",
    "end": "1410240"
  },
  {
    "text": "referring to that talk a lot today because it had so many awesome points",
    "start": "1410240",
    "end": "1416640"
  },
  {
    "text": "i've been using gatekeeper here in this example to really isolate tenants so you",
    "start": "1416799",
    "end": "1421840"
  },
  {
    "text": "cannot escape escape your namespace",
    "start": "1421840",
    "end": "1427760"
  },
  {
    "text": "by creating for example home release that would install stuff in another in another namespace right so",
    "start": "1427760",
    "end": "1434960"
  },
  {
    "text": "gatekeeper enforces that or rather the policies that i defined in the",
    "start": "1434960",
    "end": "1440080"
  },
  {
    "text": "management repository enforce that um and tell flux don't let the user",
    "start": "1440080",
    "end": "1448480"
  },
  {
    "text": "create anything outside of this namespace right and then there's the workspace",
    "start": "1448480",
    "end": "1454000"
  },
  {
    "text": "customization that basically just points to the root folder of the workspace git",
    "start": "1454000",
    "end": "1459279"
  },
  {
    "text": "repository and then you can just put anything that that you want to deploy in the workspace",
    "start": "1459279",
    "end": "1464880"
  },
  {
    "text": "okay and there's a single hem release running right now which is gatekeeper which is like a prerequisite to using",
    "start": "1464880",
    "end": "1470880"
  },
  {
    "text": "workspaces and isolating tenants um so now the cluster is attached now it's",
    "start": "1470880",
    "end": "1477840"
  },
  {
    "start": "1474000",
    "end": "1534000"
  },
  {
    "text": "managed we can see it in the repository like in the management repository",
    "start": "1477840",
    "end": "1484480"
  },
  {
    "text": "there's a directory here that has the secret right here",
    "start": "1484480",
    "end": "1491360"
  },
  {
    "text": "um which holds the cube config of the cluster that's the sync manifest that",
    "start": "1491360",
    "end": "1497440"
  },
  {
    "text": "points to that secret and from then on and and um",
    "start": "1497440",
    "end": "1503440"
  },
  {
    "text": "let's see right so it points to the remote",
    "start": "1504159",
    "end": "1510720"
  },
  {
    "text": "directory um of clusters test so that's specific to each cluster and it uses the secret",
    "start": "1510720",
    "end": "1517760"
  },
  {
    "text": "ref right and then remote has",
    "start": "1517760",
    "end": "1524320"
  },
  {
    "text": "in turn the sync manifest of the cluster specificate repository all right",
    "start": "1524320",
    "end": "1530480"
  },
  {
    "text": "um everybody following it's",
    "start": "1530480",
    "end": "1535760"
  },
  {
    "start": "1534000",
    "end": "1556000"
  },
  {
    "text": "when i did this let's let's see how the attachment works it's pretty",
    "start": "1535760",
    "end": "1541520"
  },
  {
    "text": "simple it basically just removes the remote customization as soon as it's",
    "start": "1541520",
    "end": "1548880"
  },
  {
    "text": "done with that you will see that all the resources",
    "start": "1548880",
    "end": "1555360"
  },
  {
    "text": "on the attach cluster will vanish everything is gone the cluster is detached and it's in the same state as",
    "start": "1555360",
    "end": "1561919"
  },
  {
    "start": "1556000",
    "end": "1584000"
  },
  {
    "text": "it was before you attached it which is pretty nice and it's basically just removing stuff from the repository",
    "start": "1561919",
    "end": "1568559"
  },
  {
    "text": "waiting for flux to reconcile and be done with it what it doesn't do is it doesn't uninsult flux",
    "start": "1568559",
    "end": "1574720"
  },
  {
    "text": "so as not to remove the crds and any associated works",
    "start": "1574720",
    "end": "1580320"
  },
  {
    "text": "work loads that may come from somewhere else which shouldn't really happen but",
    "start": "1580320",
    "end": "1586880"
  },
  {
    "start": "1584000",
    "end": "1592000"
  },
  {
    "text": "i just wanted to make sure that i don't delete anything a cluster user has deployed before",
    "start": "1586880",
    "end": "1594000"
  },
  {
    "text": "how does this look like from like a maybe a 10 000 feet view um you have the management cluster you",
    "start": "1594000",
    "end": "1600799"
  },
  {
    "text": "have the management cluster git repository and the persona which is the management cluster administrator",
    "start": "1600799",
    "end": "1607039"
  },
  {
    "text": "um having access to the management repository and to the common repository which is",
    "start": "1607039",
    "end": "1612400"
  },
  {
    "text": "holding the stuff that every cluster receives then we create a workspace which basically means i create a",
    "start": "1612400",
    "end": "1617919"
  },
  {
    "text": "workspace repository and some resources in the management repository we have the workspace",
    "start": "1617919",
    "end": "1623600"
  },
  {
    "text": "administrator persona that has access to that then we create we spin up a cluster",
    "start": "1623600",
    "end": "1630720"
  },
  {
    "text": "it has its own cluster repository then we connect the cluster to the workspace",
    "start": "1630799",
    "end": "1637039"
  },
  {
    "text": "then we connect the cluster repository to the cluster and then we connect the common repository to the cluster right so",
    "start": "1637039",
    "end": "1644159"
  },
  {
    "text": "there's three repositories being reconciled by the cluster each",
    "start": "1644159",
    "end": "1652080"
  },
  {
    "text": "for different target groups another cluster in the same workspace",
    "start": "1652080",
    "end": "1659039"
  },
  {
    "text": "would look like this it would also be connected to the common repository and the workspace repository but have its",
    "start": "1659039",
    "end": "1665039"
  },
  {
    "text": "own repository for cluster-specific stuff right so these may be two different teams",
    "start": "1665039",
    "end": "1670640"
  },
  {
    "text": "uh working on different applications but still in the same workspace for various reasons like there's a million",
    "start": "1670640",
    "end": "1677520"
  },
  {
    "text": "reasons to be to to wanting to group clusters",
    "start": "1677520",
    "end": "1684000"
  },
  {
    "text": "and there's a third cluster there that's outside of the workspace so only reconcile the common repository to make",
    "start": "1684000",
    "end": "1689679"
  },
  {
    "text": "it manageable and the cluster-specific repository",
    "start": "1689679",
    "end": "1695520"
  },
  {
    "start": "1695000",
    "end": "1734000"
  },
  {
    "text": "if that sounds complicated um i tried to come up with a visualization",
    "start": "1695520",
    "end": "1700960"
  },
  {
    "text": "of what my demo repository actually does um and and this is like all the resources",
    "start": "1700960",
    "end": "1707840"
  },
  {
    "text": "that are being created and the different colors my which cluster receives them so the blue ones are for the remote cluster",
    "start": "1707840",
    "end": "1715120"
  },
  {
    "text": "the red ones are on the management cluster so it is really confusing like i i got so",
    "start": "1715120",
    "end": "1722720"
  },
  {
    "text": "confused when i initially bootstrapped that that model um like okay which",
    "start": "1722720",
    "end": "1728080"
  },
  {
    "text": "customization does what and at what point and what do they depend upon",
    "start": "1728080",
    "end": "1733520"
  },
  {
    "text": "and um it turns out that making things simple",
    "start": "1733520",
    "end": "1739279"
  },
  {
    "text": "like for each persona right they just have access to that repository and just put their stuff in",
    "start": "1739279",
    "end": "1746480"
  },
  {
    "text": "there but making this possible is really hard right using the tooling that's out",
    "start": "1746480",
    "end": "1752159"
  },
  {
    "text": "there in the world today and um",
    "start": "1752159",
    "end": "1757520"
  },
  {
    "text": "that's that's like one of the key takeaways um",
    "start": "1757520",
    "end": "1762720"
  },
  {
    "text": "and and why i wanted to come up with like a multi-cluster template because everyone's doing it differently and",
    "start": "1762720",
    "end": "1768399"
  },
  {
    "text": "because it's getting complicated really quickly um",
    "start": "1768399",
    "end": "1774170"
  },
  {
    "text": "[Music] there's so much you can do wrong right and i think as a community we can just",
    "start": "1774170",
    "end": "1781039"
  },
  {
    "text": "we can just provide this template to users actually wanting to use multiple clusters",
    "start": "1781039",
    "end": "1786559"
  },
  {
    "start": "1785000",
    "end": "1811000"
  },
  {
    "text": "um there's some takeaways that we as data iq took away from from",
    "start": "1786559",
    "end": "1792840"
  },
  {
    "text": "implementing a multi-cluster approach with flux very quickly embrace upstream open",
    "start": "1792840",
    "end": "1799600"
  },
  {
    "text": "source don't try to come up with your own solution if there is something out there already right",
    "start": "1799600",
    "end": "1805679"
  },
  {
    "text": "if there is something um contribute to it if it's missing something okay",
    "start": "1805679",
    "end": "1812559"
  },
  {
    "start": "1811000",
    "end": "1840000"
  },
  {
    "text": "keep it near to the ground like don't just stick to what you have but see where the",
    "start": "1812559",
    "end": "1817679"
  },
  {
    "text": "community and where the rest of the world is going right",
    "start": "1817679",
    "end": "1823440"
  },
  {
    "text": "like that's that's uh how we came up with using flux um uh because it it",
    "start": "1823440",
    "end": "1830159"
  },
  {
    "text": "gained traction and we saw like oh that's that's maybe an interesting an interesting project to to look at and we",
    "start": "1830159",
    "end": "1836960"
  },
  {
    "text": "actually incorporated it into our product at data iq right um",
    "start": "1836960",
    "end": "1842480"
  },
  {
    "start": "1840000",
    "end": "1871000"
  },
  {
    "text": "i love making it simple for users so i love creating very",
    "start": "1842480",
    "end": "1849039"
  },
  {
    "text": "fine-grained and very focused clies and using the tooling that's out there out",
    "start": "1849039",
    "end": "1854399"
  },
  {
    "text": "there it's so simple right we at data iq we build clies with go and there's like",
    "start": "1854399",
    "end": "1860480"
  },
  {
    "text": "all the tooling like viper and and cobra to to build clies in a very standardized",
    "start": "1860480",
    "end": "1866559"
  },
  {
    "text": "way make it simple for your users by creating these small little clis",
    "start": "1866559",
    "end": "1872960"
  },
  {
    "start": "1871000",
    "end": "1887000"
  },
  {
    "text": "don't stop experimenting play around with stuff and maybe",
    "start": "1872960",
    "end": "1879360"
  },
  {
    "text": "eventually it'll be incorporated into your platform uh one day maybe you just",
    "start": "1879360",
    "end": "1884559"
  },
  {
    "text": "throw it away but you always gain knowledge and um that's",
    "start": "1884559",
    "end": "1890399"
  },
  {
    "text": "it i it was really hard for me to pack everything i wanted to bring across in",
    "start": "1890399",
    "end": "1895679"
  },
  {
    "text": "this half hour um let's talk um you can reach out to me via email old school way",
    "start": "1895679",
    "end": "1903519"
  },
  {
    "text": "uh i'm on twitter and marcus is basically my nickname everywhere else as",
    "start": "1903519",
    "end": "1909039"
  },
  {
    "text": "well um i'm i'm active in the cncf slack and there you can post your question in the",
    "start": "1909039",
    "end": "1915519"
  },
  {
    "text": "flux channel if you have flux specific questions there's also a",
    "start": "1915519",
    "end": "1921120"
  },
  {
    "text": "sig multi-cluster in the kubernetes slack which is has gotten a little quiet",
    "start": "1921120",
    "end": "1927679"
  },
  {
    "text": "recently but that's a place where very very many talented people",
    "start": "1927679",
    "end": "1933519"
  },
  {
    "text": "sit that have much experience with multi-cluster deployments",
    "start": "1933519",
    "end": "1938720"
  },
  {
    "text": "and last but not least if you want to work on that stuff you can get hired by the audio iq and",
    "start": "1938720",
    "end": "1944960"
  },
  {
    "text": "work on the next level of multi-cluster thanks",
    "start": "1944960",
    "end": "1950270"
  },
  {
    "text": "[Applause]",
    "start": "1950270",
    "end": "1957919"
  },
  {
    "text": "awesome so are you do you want to take questions or not i would if you had the time",
    "start": "1957919",
    "end": "1963840"
  },
  {
    "text": "uh we got a couple minutes i think any questions",
    "start": "1963840",
    "end": "1970080"
  },
  {
    "text": "perfect hi um we've been there",
    "start": "1970080",
    "end": "1975279"
  },
  {
    "text": "and we've done all of that have you thought about actually scaling that to thousands of clusters",
    "start": "1975279",
    "end": "1981279"
  },
  {
    "text": "with things like staged rollouts or incremental or progressive rollouts across hundreds of",
    "start": "1981279",
    "end": "1987440"
  },
  {
    "text": "clusters at some point because the problems that we've run into with exactly this approach is that",
    "start": "1987440",
    "end": "1995360"
  },
  {
    "text": "if you change something somewhere in your repositories it will get rolled out very quickly to all of your clusters and",
    "start": "1995440",
    "end": "2001120"
  },
  {
    "text": "if you break something the impact creator is quite big yes",
    "start": "2001120",
    "end": "2006880"
  },
  {
    "text": "yes um absolutely so um another one thing that we built into the",
    "start": "2006880",
    "end": "2013039"
  },
  {
    "text": "data queue kubernetes platform is that this something that makes this not happen so for example when you upgrade a",
    "start": "2013039",
    "end": "2020399"
  },
  {
    "text": "certain application you can make it roll out gradually right and say like",
    "start": "2020399",
    "end": "2026240"
  },
  {
    "text": "and that's a reason to use workspaces you can start by rolling it out to a",
    "start": "2026240",
    "end": "2031360"
  },
  {
    "text": "single workspace and then if it works in that you can go to the next workspace and then to the next right so that's one",
    "start": "2031360",
    "end": "2038000"
  },
  {
    "text": "of the things that um that you can use to to",
    "start": "2038000",
    "end": "2043519"
  },
  {
    "text": "gradually roll out changes applying changes to all the clusters",
    "start": "2043519",
    "end": "2049040"
  },
  {
    "text": "most of the time is not the best decision right you're right we know",
    "start": "2049040",
    "end": "2055679"
  },
  {
    "text": "thank you um so i was noticing that when we're watching multiple repositories like the",
    "start": "2059200",
    "end": "2064398"
  },
  {
    "text": "common repository in the workspace um you gave the example of using cube cost as something that you might want to",
    "start": "2064399",
    "end": "2070158"
  },
  {
    "text": "apply in all your cases what if you had a coup cost version 1.0",
    "start": "2070159",
    "end": "2075280"
  },
  {
    "text": "and then in another repository coupe cost version 2.0 would these reconcile loops start",
    "start": "2075280",
    "end": "2080560"
  },
  {
    "text": "fighting each other or does one take precedence over the other um yeah i mean",
    "start": "2080560",
    "end": "2087118"
  },
  {
    "text": "you surely have to to to make sure that you don't like deploy",
    "start": "2087119",
    "end": "2092480"
  },
  {
    "text": "the same application in the same name space from different repositories right so",
    "start": "2092480",
    "end": "2097920"
  },
  {
    "text": "um the common repository would host something like that right and there",
    "start": "2097920",
    "end": "2104320"
  },
  {
    "text": "um like you have this you have this responsibility for that repository and make sure okay cubecast and that",
    "start": "2104320",
    "end": "2110720"
  },
  {
    "text": "repository works across my clusters um but sure you you have to find a",
    "start": "2110720",
    "end": "2117520"
  },
  {
    "text": "certain way how to how to polish that right and uh that is also something i've been",
    "start": "2117520",
    "end": "2123280"
  },
  {
    "text": "thinking about and not really like found a solution for what happens if something is deployed in a workspace and also in a",
    "start": "2123280",
    "end": "2129680"
  },
  {
    "text": "cluster-specific repository they would obviously be overriding each other right so that's something",
    "start": "2129680",
    "end": "2136880"
  },
  {
    "text": "like that's a problem you still need to solve yourself and that's i i haven't solved that yet",
    "start": "2136880",
    "end": "2145760"
  },
  {
    "text": "all right that's all the time we got for questions thank you max thank you everybody for watching",
    "start": "2145760",
    "end": "2151599"
  },
  {
    "text": "another round of applause please",
    "start": "2151599",
    "end": "2155520"
  }
]