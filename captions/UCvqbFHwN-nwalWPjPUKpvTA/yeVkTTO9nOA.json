[
  {
    "start": "0",
    "end": "91000"
  },
  {
    "text": "yeah the next talk is going to be about canario deployments and blue/green deployments on kubernetes by folks from",
    "start": "30",
    "end": "8189"
  },
  {
    "text": "Intuit and I just wanted to see a quick show hands how many of you are running",
    "start": "8189",
    "end": "14099"
  },
  {
    "text": "kubernetes and production alright great and and do you do you do you think you",
    "start": "14099",
    "end": "22920"
  },
  {
    "text": "figured out your deployment strategies do you have something in place for blue",
    "start": "22920",
    "end": "27930"
  },
  {
    "text": "grain deployments or canario deployments whatever your needs are okay and who is",
    "start": "27930",
    "end": "36270"
  },
  {
    "text": "looking for something in that area right well wonderful so I hope you learn",
    "start": "36270",
    "end": "43950"
  },
  {
    "text": "something in this talk from from Danny Thompson and Alexander a magician ski",
    "start": "43950",
    "end": "49230"
  },
  {
    "text": "from Intuit we're gonna talk a little bit about what they did for solving those needs thank you",
    "start": "49230",
    "end": "57440"
  },
  {
    "text": "[Applause]",
    "start": "57440",
    "end": "63470"
  },
  {
    "text": "hi everyone my name is Danny this is my colleague Alex and thank you so much for",
    "start": "63470",
    "end": "69540"
  },
  {
    "text": "attending our session on how into it does canary and blue green deployments",
    "start": "69540",
    "end": "75060"
  },
  {
    "text": "with a k-8 c-can't Roller so Alex and I are both and software engineers at",
    "start": "75060",
    "end": "81149"
  },
  {
    "text": "Intuit and for the last six months we've been working on our guerrilla outs and",
    "start": "81149",
    "end": "86640"
  },
  {
    "text": "we're really excited to give you a demo of it today so just a brief overview of",
    "start": "86640",
    "end": "93570"
  },
  {
    "start": "91000",
    "end": "123000"
  },
  {
    "text": "the talk today just it's a classic presentation we'll kind of talk about into it and some of the engineering",
    "start": "93570",
    "end": "101000"
  },
  {
    "text": "problems that we have challenges that we have especially in the context of deployments talk about kind of some of",
    "start": "101000",
    "end": "109259"
  },
  {
    "text": "the options that we came up with or really failed the tents I should say and then talk about our final solution which",
    "start": "109259",
    "end": "116819"
  },
  {
    "text": "offers a declarative way to do blue green and canary strategies so to jump",
    "start": "116819",
    "end": "123869"
  },
  {
    "text": "into it so into it is a company of there",
    "start": "123869",
    "end": "130979"
  },
  {
    "text": "is a company with a revenue of six billion and we have over 50 million",
    "start": "130979",
    "end": "136050"
  },
  {
    "text": "customers we provide financial and accounting software to our users in",
    "start": "136050",
    "end": "141270"
  },
  {
    "text": "order to simplify their lives to get that software to those users we have",
    "start": "141270",
    "end": "146400"
  },
  {
    "text": "around 4,000 engineers as a result this kind of creates a there are a lot of",
    "start": "146400",
    "end": "153959"
  },
  {
    "text": "different needs that all of these developers have and in order to help",
    "start": "153959",
    "end": "159450"
  },
  {
    "text": "move into the cloud we really adopted kubernetes as our underlying platform to",
    "start": "159450",
    "end": "166790"
  },
  {
    "text": "deploy into the cloud so here is our adoption of kubernetes over the last",
    "start": "166790",
    "end": "172530"
  },
  {
    "start": "168000",
    "end": "195000"
  },
  {
    "text": "year it was initially a little bit of a slow start as we were kind of learning getting a lot of learnings and building",
    "start": "172530",
    "end": "179220"
  },
  {
    "text": "up that muscle memory but we really started to pick up pace and started to address a bunch of different needs and",
    "start": "179220",
    "end": "185610"
  },
  {
    "text": "as the number of users kind of go up we've got a lot more knowledge and I've come",
    "start": "185610",
    "end": "192620"
  },
  {
    "text": "across a lot more problems just some more stats on into it's in general we have four different business units and",
    "start": "192620",
    "end": "200030"
  },
  {
    "text": "right now we have around 1200 engineers using kubernetes with out of our 4,000",
    "start": "200030",
    "end": "206300"
  },
  {
    "text": "employees some of our fund kubernetes stats we got around 120 clusters each of",
    "start": "206300",
    "end": "214010"
  },
  {
    "start": "208000",
    "end": "233000"
  },
  {
    "text": "those are around 200 to 300 nodes we want to keep them kind of medium sized and then also we do around 1300 deploys",
    "start": "214010",
    "end": "223400"
  },
  {
    "text": "a day with those deploys we are most of them are using the standard deployment",
    "start": "223400",
    "end": "230360"
  },
  {
    "text": "object as a result that leaves us with two deployment strategies recreate and",
    "start": "230360",
    "end": "237020"
  },
  {
    "start": "233000",
    "end": "259000"
  },
  {
    "text": "rolling update most of the engineers are using the rolling update but that",
    "start": "237020",
    "end": "242780"
  },
  {
    "text": "doesn't really solve all the use cases that our developers have for example we",
    "start": "242780",
    "end": "247880"
  },
  {
    "text": "have some legacy applications that really can't do a rolling update and",
    "start": "247880",
    "end": "253580"
  },
  {
    "text": "then we have more cutting-edge applications that want to do some more interesting strategies so result we're",
    "start": "253580",
    "end": "259850"
  },
  {
    "start": "259000",
    "end": "277000"
  },
  {
    "text": "looking to solve for blue green strategies canary and a be testing and",
    "start": "259850",
    "end": "265430"
  },
  {
    "text": "so one of the core principles of our",
    "start": "265430",
    "end": "270530"
  },
  {
    "text": "kubernetes platform is that we manage or we really take into account the get offs",
    "start": "270530",
    "end": "277160"
  },
  {
    "start": "277000",
    "end": "321000"
  },
  {
    "text": "methodology so what does get ups its using it as a single source the truth of",
    "start": "277160",
    "end": "282920"
  },
  {
    "text": "your desired state for your infrastructure and application so what",
    "start": "282920",
    "end": "288260"
  },
  {
    "text": "does that mean we store all of our kubernetes manifests in a git repository",
    "start": "288260",
    "end": "293720"
  },
  {
    "text": "and we use a tool we've developed called Argos an open source tool we've",
    "start": "293720",
    "end": "299780"
  },
  {
    "text": "developed called Argos CD to take those manifests compare them to what's in the",
    "start": "299780",
    "end": "305000"
  },
  {
    "text": "cluster identify what the differences are show that to the user and then kind of reconcile that difference and apply",
    "start": "305000",
    "end": "311420"
  },
  {
    "text": "those changes and so this kind of introduces a problem with the strategies",
    "start": "311420",
    "end": "317360"
  },
  {
    "text": "I talked about earlier how do you do a Bluegreen or or",
    "start": "317360",
    "end": "322580"
  },
  {
    "start": "321000",
    "end": "386000"
  },
  {
    "text": "canary deployment while still leveraging get-ups since there's no native support",
    "start": "322580",
    "end": "327740"
  },
  {
    "text": "for Bluegreen and canary and kubernetes we can't just use an off-the-shelf solution and there's this kind of",
    "start": "327740",
    "end": "336580"
  },
  {
    "text": "conflicting approach to get off sand",
    "start": "336580",
    "end": "341710"
  },
  {
    "text": "Bluegreen and canary deployments since get-ups is inherently declarative where",
    "start": "341710",
    "end": "347060"
  },
  {
    "text": "you say this is the state where I want to go here's where I am just get me there while Bluegreen and canary are more",
    "start": "347060",
    "end": "354740"
  },
  {
    "text": "imperative where you have a defined list of steps that you want to execute to get to the next step and so we really wanted",
    "start": "354740",
    "end": "361460"
  },
  {
    "text": "more of a declarative approach and we wanted to kind of integrate this with our CI tools so that our developers",
    "start": "361460",
    "end": "368779"
  },
  {
    "text": "could have a simple clean pipeline from commit to deploying a master and so we",
    "start": "368779",
    "end": "375949"
  },
  {
    "text": "had a problem and we were thinking all right how could be kind of approaches to provide a solution for our users who",
    "start": "375949",
    "end": "382039"
  },
  {
    "text": "want to use these different strategies our first approach was jenkins and it",
    "start": "382039",
    "end": "388639"
  },
  {
    "start": "386000",
    "end": "470000"
  },
  {
    "text": "works it had a bunch of problems though it didn't really fit our model of",
    "start": "388639",
    "end": "395330"
  },
  {
    "text": "get-ups because we were taking a lot of state and putting that into our Jenkins pipeline which meant we had two",
    "start": "395330",
    "end": "402649"
  },
  {
    "text": "different sources of truth your Jenkins pipeline and your git repository",
    "start": "402649",
    "end": "408819"
  },
  {
    "text": "additionally there are a lot of assumptions that our Jenkins pipeline would just assume in order to",
    "start": "408819",
    "end": "415159"
  },
  {
    "text": "orchestrate this deployment so if anything changed if anything was wrong with the pipe were wrong with the",
    "start": "415159",
    "end": "421250"
  },
  {
    "text": "cluster or different with the cluster I should say not wrong the pipeline would fail and if you try",
    "start": "421250",
    "end": "428149"
  },
  {
    "text": "to execute it again it fail again and that would require our users go in and change early modify the cluster to get",
    "start": "428149",
    "end": "435620"
  },
  {
    "text": "it back into the right state in order to run their pipeline and since he was",
    "start": "435620",
    "end": "440990"
  },
  {
    "text": "extremely brittle that wasn't really the solution we're looking for additionally we didn't we really don't like putting",
    "start": "440990",
    "end": "448339"
  },
  {
    "text": "kubernetes credentials on Jenkins and we found that taking our that",
    "start": "448339",
    "end": "453379"
  },
  {
    "text": "solution and distributing it across multiple pipelines was a lot more work than we'd really like to do so we took",
    "start": "453379",
    "end": "460129"
  },
  {
    "text": "step back and said okay how can we do this better well the next step was",
    "start": "460129",
    "end": "465229"
  },
  {
    "text": "trying to push a lot of that logic from the Jenkins pipeline into deployment",
    "start": "465229",
    "end": "470719"
  },
  {
    "start": "470000",
    "end": "526000"
  },
  {
    "text": "hooks executing them before and after the initial Huber Nettie's apply but",
    "start": "470719",
    "end": "478459"
  },
  {
    "text": "that also still took still had a lot of those underlying assumptions that we had",
    "start": "478459",
    "end": "483799"
  },
  {
    "text": "with our jenkins and it really wasn't following the get-ups model that we want",
    "start": "483799",
    "end": "489619"
  },
  {
    "text": "to give users because we didn't have a declarative spec saying this is where we're going we just said okay here are a",
    "start": "489619",
    "end": "496159"
  },
  {
    "text": "bunch of steps and you still need to execute so this worked but then but we",
    "start": "496159",
    "end": "501649"
  },
  {
    "text": "weren't happy with it so we took a step back again and we were like all right",
    "start": "501649",
    "end": "506719"
  },
  {
    "text": "both of our first two approaches were very imperative we very much said do",
    "start": "506719",
    "end": "514518"
  },
  {
    "text": "this do that instead we want to kind of really take advantage of what makes kubernetes one of the things that makes kubernetes",
    "start": "514519",
    "end": "520430"
  },
  {
    "text": "so great its declarative nature and so we decided to create a custom resource",
    "start": "520430",
    "end": "525920"
  },
  {
    "text": "with a custom controller with this custom controller we took these five design considerations into account first",
    "start": "525920",
    "end": "534319"
  },
  {
    "start": "526000",
    "end": "595000"
  },
  {
    "text": "we really wanted to take all of that logic that deployment orchestration logic and kind of just package it into",
    "start": "534319",
    "end": "541309"
  },
  {
    "text": "the controller so that our developers don't have to worry about the deployment logic really they should be focusing on",
    "start": "541309",
    "end": "549439"
  },
  {
    "text": "their application code and it should be a seamless deployment second we really wanted to make sure it was get-ups",
    "start": "549439",
    "end": "556220"
  },
  {
    "text": "friendly and regardless of the state of the cluster it should be able to handle",
    "start": "556220",
    "end": "561439"
  },
  {
    "text": "handle that stay and get back into a solid steady state we wanted it to run",
    "start": "561439",
    "end": "567050"
  },
  {
    "text": "inside the kubernetes cluster so that we didn't have to provide credentials to",
    "start": "567050",
    "end": "572089"
  },
  {
    "text": "some outside source in order to orchestrate the deployment and also in",
    "start": "572089",
    "end": "577339"
  },
  {
    "text": "terms of a migration pattern we really wanted people who are coming from deployments to have a seamless story to",
    "start": "577339",
    "end": "583819"
  },
  {
    "text": "switch roll out and not lose any of the functionality that they had with these rods and so with that and six months of",
    "start": "583819",
    "end": "592449"
  },
  {
    "text": "work we're really excited to introduce our go roll outs it is our advanced open-source k its",
    "start": "592449",
    "end": "599559"
  },
  {
    "start": "595000",
    "end": "621000"
  },
  {
    "text": "deployment controller it is completely kubernetes native and right now it",
    "start": "599559",
    "end": "604959"
  },
  {
    "text": "supports blue green and canary deployments so this thank you [Applause]",
    "start": "604959",
    "end": "614030"
  },
  {
    "text": "so this is great but how does it work well our garage we install a custom",
    "start": "616709",
    "end": "624939"
  },
  {
    "start": "621000",
    "end": "698000"
  },
  {
    "text": "resource called a roll out and then we install a controller that operates on that roll out resource one of the main",
    "start": "624939",
    "end": "633160"
  },
  {
    "text": "responsibilities of that controller is to handle the replica set creation scaling and deletion so handle the full",
    "start": "633160",
    "end": "641079"
  },
  {
    "text": "life cycle of that replica set similar to a deployment we wanted to have a",
    "start": "641079",
    "end": "648490"
  },
  {
    "text": "single desired state as a pots back so everyone who's coming from a deployment they get to leave that dot spec template",
    "start": "648490",
    "end": "656920"
  },
  {
    "text": "alone and they can just use that with the rollout so they could have a seamless transition we also support both",
    "start": "656920",
    "end": "663750"
  },
  {
    "text": "automated and manual promotions so if a user wants to run some automated tests",
    "start": "663750",
    "end": "670870"
  },
  {
    "text": "and then immediately deploy that's possible or if they want to have some",
    "start": "670870",
    "end": "676629"
  },
  {
    "text": "more manual tests that they want to run and then give a manual thumbs-up that's also possible and we wanted to stay in",
    "start": "676629",
    "end": "683980"
  },
  {
    "text": "line with the deployment functionality by integrating with existing tools like HP",
    "start": "683980",
    "end": "690250"
  },
  {
    "text": "a so this is still pretty high level and why don't we kind of dig down into some",
    "start": "690250",
    "end": "696309"
  },
  {
    "text": "manifests so here's the deployment nothing special nothing too exciting but",
    "start": "696309",
    "end": "702939"
  },
  {
    "start": "698000",
    "end": "732000"
  },
  {
    "text": "when we want to change it to a rollout the first thing we need to do is change the API version and kind to the rollout",
    "start": "702939",
    "end": "711120"
  },
  {
    "text": "second we need to add a bar guarulhos if",
    "start": "711120",
    "end": "717629"
  },
  {
    "text": "extraor castrates Early's define the orchestration you want to do",
    "start": "717629",
    "end": "723069"
  },
  {
    "text": "declaratively there are two currently available blue green and canary so I'll",
    "start": "723069",
    "end": "729639"
  },
  {
    "text": "start with blue green first so here is the blue green strategy spec the first",
    "start": "729639",
    "end": "737350"
  },
  {
    "text": "thing I want to point out is the active service in the preview service these are references to services in the same",
    "start": "737350",
    "end": "743709"
  },
  {
    "text": "namespace as the rollout the active is in 10 to be used for live production",
    "start": "743709",
    "end": "750339"
  },
  {
    "text": "consumer-facing traffic well the preview is more meant for kind of testing like",
    "start": "750339",
    "end": "755560"
  },
  {
    "text": "just an endpoint that you can kind of test before you switch it to the active and so the rollout controller will be",
    "start": "755560",
    "end": "761740"
  },
  {
    "text": "responsible for modifying these services to direct traffic to specific replicas",
    "start": "761740",
    "end": "768010"
  },
  {
    "text": "sets that were created by the rollout and so in order to do that similar to a",
    "start": "768010",
    "end": "773529"
  },
  {
    "text": "deployment each replica set has a label with a unique pod hash that we can use",
    "start": "773529",
    "end": "780399"
  },
  {
    "text": "to identify that specific replica set and so when we want to change traffic",
    "start": "780399",
    "end": "785620"
  },
  {
    "text": "from one replica set to another will modify the services selector to inject",
    "start": "785620",
    "end": "792130"
  },
  {
    "text": "that new pod hash to switch the traffic to the new one",
    "start": "792130",
    "end": "797500"
  },
  {
    "text": "we will do a demo of this in a bit but we also offer functionality to control",
    "start": "797500",
    "end": "804580"
  },
  {
    "text": "the size of the preview environment so if you want to try to save some resources while you do some testing and",
    "start": "804580",
    "end": "810459"
  },
  {
    "text": "we can do manual and automated or promotions up next we have the canary",
    "start": "810459",
    "end": "815950"
  },
  {
    "text": "strategy so the blue green strategy had a bunch of different knobs to kind of",
    "start": "815950",
    "end": "823209"
  },
  {
    "start": "817000",
    "end": "955000"
  },
  {
    "text": "control the behavior of the blue green deployment with the canary strategy we",
    "start": "823209",
    "end": "828430"
  },
  {
    "text": "found that different users have very different approaches to canary and we",
    "start": "828430",
    "end": "835180"
  },
  {
    "text": "didn't want to alienate any users when we went with when we provide the marga",
    "start": "835180",
    "end": "841420"
  },
  {
    "text": "rollout so we tried to make it as flexible as possible we allow users to define the steps that they want to take",
    "start": "841420",
    "end": "850060"
  },
  {
    "text": "to transition from their old version to the new and so those steps you can",
    "start": "850060",
    "end": "857140"
  },
  {
    "text": "either define a ratio that you would like to achieve or a ratio you'd like to",
    "start": "857140",
    "end": "863829"
  },
  {
    "text": "achieve of traffic to your canary which is the new version or you can have a",
    "start": "863829",
    "end": "871000"
  },
  {
    "text": "step that will pause your rollout for either a predetermined time or",
    "start": "871000",
    "end": "878310"
  },
  {
    "text": "indefinitely until an external and says that it's okay to progress and",
    "start": "878310",
    "end": "888860"
  },
  {
    "text": "so with this we don't modify a service",
    "start": "888860",
    "end": "894339"
  },
  {
    "text": "because we want to be able to send traffic to both versions and at the",
    "start": "894339",
    "end": "899660"
  },
  {
    "text": "moment we don't use a service mesh we're using just pure replicas the replicas",
    "start": "899660",
    "end": "905779"
  },
  {
    "text": "count ratio so we are going to scale both the canary and the stable replica",
    "start": "905779",
    "end": "912709"
  },
  {
    "text": "sets to reach the ratio listed in the canary steps so once that last step is",
    "start": "912709",
    "end": "921670"
  },
  {
    "text": "executed the the canary or at least the",
    "start": "921670",
    "end": "927259"
  },
  {
    "text": "rollout will switch the canary or switch the canary to the stable replica set and",
    "start": "927259",
    "end": "934430"
  },
  {
    "text": "do a complete roll out from the old version to the new this is very similar to a rolling update so if you don't list",
    "start": "934430",
    "end": "942829"
  },
  {
    "text": "any of these steps here it'll have the same behavior and so instead of just",
    "start": "942829",
    "end": "948620"
  },
  {
    "text": "kind of talking about it and on the stage I think it'd be easier to show a demo so I'm going to have Alex step in",
    "start": "948620",
    "end": "954410"
  },
  {
    "text": "and do a brief demo of our robots",
    "start": "954410",
    "end": "958720"
  },
  {
    "text": "[Applause]",
    "start": "959600",
    "end": "965379"
  },
  {
    "text": "hello everyone I hope you can hear me so as Dana mentioned my name is Alex and",
    "start": "965379",
    "end": "971209"
  },
  {
    "text": "we are colleagues on our NGO project and today I'm going to show all out",
    "start": "971209",
    "end": "976579"
  },
  {
    "text": "controller in action so let's get started so during the demo I'm going to deploy a",
    "start": "976579",
    "end": "984049"
  },
  {
    "start": "980000",
    "end": "1088000"
  },
  {
    "text": "very simple application using both Canary and deployment and blue-green strategies and I'm going to just drive",
    "start": "984049",
    "end": "991069"
  },
  {
    "text": "the deployment process step by step manually for the sake of the demo and I",
    "start": "991069",
    "end": "996499"
  },
  {
    "text": "will explain how you could automate it but if I do it manually I will have a chance to explain exactly what is",
    "start": "996499",
    "end": "1001989"
  },
  {
    "text": "happening so I'm going to start from my deployment report so since it is get ops",
    "start": "1001989",
    "end": "1008229"
  },
  {
    "text": "all the manifests in get github repository in this case and as you can",
    "start": "1008229",
    "end": "1014529"
  },
  {
    "text": "guess there is a bunch of llamo files and not all not all of them are very interesting service is just a service",
    "start": "1014529",
    "end": "1020949"
  },
  {
    "text": "but we have roll out the Tiamo and this one I want to show you so here",
    "start": "1020949",
    "end": "1026970"
  },
  {
    "text": "is roll out it's as promised it's pretty much deployment except it has different",
    "start": "1026970",
    "end": "1033250"
  },
  {
    "text": "IP inversion and kind and it has a strategy and I'm going to start from",
    "start": "1033250",
    "end": "1039808"
  },
  {
    "text": "canarian in this case I have just two steps first step just tells about",
    "start": "1039809",
    "end": "1047259"
  },
  {
    "text": "controller to go ahead and replace 20% of my application with the new version",
    "start": "1047259",
    "end": "1052539"
  },
  {
    "text": "and then wait for me to say it's ok to continue and that's pretty much it now",
    "start": "1052539",
    "end": "1060360"
  },
  {
    "text": "we just ready to deploy the application and to do that I'm going to use our goal",
    "start": "1060360",
    "end": "1066789"
  },
  {
    "text": "CG since Intuit use a server CD for github deployment this is our two of choice to to get ops",
    "start": "1066789",
    "end": "1073980"
  },
  {
    "text": "so this particular instance has applications I will explain later exactly what application is and actually",
    "start": "1073980",
    "end": "1081879"
  },
  {
    "text": "I'm just going to create a new one right now and to create an application I have",
    "start": "1081879",
    "end": "1089230"
  },
  {
    "text": "to tell our NGO CG two main pieces of information first is what I want to",
    "start": "1089230",
    "end": "1095350"
  },
  {
    "text": "deploy and that's my deployment people and I'll go CG will scan it it will figure out",
    "start": "1095350",
    "end": "1101679"
  },
  {
    "text": "which sources of applications there are in this case it's a whole repo just one customized application and second piece",
    "start": "1101679",
    "end": "1110230"
  },
  {
    "text": "is where I want to deploy it which is my cluster I'm going to deploy into the same cluster where our NGO CDs running I",
    "start": "1110230",
    "end": "1118230"
  },
  {
    "text": "also have to tell which namespace application supposed to be deployed into",
    "start": "1118230",
    "end": "1123850"
  },
  {
    "text": "which is rollouts demo I created it before the presentation I have to give a",
    "start": "1123850",
    "end": "1130899"
  },
  {
    "text": "name to my application as a reference plus this is optional field I can enable outer thinking so as you can guess outer",
    "start": "1130899",
    "end": "1138639"
  },
  {
    "text": "thinking means automatically sync all the changes from the git repo into the cluster so even if I change something",
    "start": "1138639",
    "end": "1145480"
  },
  {
    "text": "after their up creation it will be immediately synced into the customer and that's pretty much it we are ready to",
    "start": "1145480",
    "end": "1151929"
  },
  {
    "text": "create it there is a project so once application is there is created",
    "start": "1151929",
    "end": "1161619"
  },
  {
    "text": "you can see that something start happening so to get more information",
    "start": "1161619",
    "end": "1167259"
  },
  {
    "text": "about the application you can just click on the app icon and you would see all",
    "start": "1167259",
    "end": "1172990"
  },
  {
    "start": "1170000",
    "end": "1316000"
  },
  {
    "text": "the resources which we were created so this for are ones which are defined in",
    "start": "1172990",
    "end": "1178929"
  },
  {
    "text": "git repository and each one created some child resources so the most important",
    "start": "1178929",
    "end": "1186009"
  },
  {
    "text": "thing one is roll out it creates a duplicate set replica set created five ports all of them are running there is",
    "start": "1186009",
    "end": "1193149"
  },
  {
    "text": "two pieces of information I want to highlight the sync status and the hub",
    "start": "1193149",
    "end": "1198940"
  },
  {
    "text": "status so sync status I think you can guess what it is if it's green that",
    "start": "1198940",
    "end": "1204070"
  },
  {
    "text": "means we have in the cluster the same thing which we want and what we commit",
    "start": "1204070",
    "end": "1209169"
  },
  {
    "text": "it in to get and the second is health status so health status is again",
    "start": "1209169",
    "end": "1215499"
  },
  {
    "text": "self-explanatory if it's progressing that means your applications to have a chance to be healthy if once it is",
    "start": "1215499",
    "end": "1222220"
  },
  {
    "text": "healthy it's up and and let's go ahead and prove it so this is the shortcut which our Peugeot gives",
    "start": "1222220",
    "end": "1228610"
  },
  {
    "text": "us it's the external facing URL of an application and now I have took enough",
    "start": "1228610",
    "end": "1236200"
  },
  {
    "text": "diversity little bit I just need to explain what that application is doing it was built specifically for the demo",
    "start": "1236200",
    "end": "1242260"
  },
  {
    "text": "to demonstrate the process of deployment process so it is single page web",
    "start": "1242260",
    "end": "1249070"
  },
  {
    "text": "application it keeps sending high pay queries every like few milliseconds and each have a request solves a string",
    "start": "1249070",
    "end": "1255399"
  },
  {
    "text": "which is treated as a color and it's used to produce one of these little circles so we're getting all the red",
    "start": "1255399",
    "end": "1262659"
  },
  {
    "text": "circles continuously which means the version of application is only serving like a red color and great that's that's",
    "start": "1262659",
    "end": "1271659"
  },
  {
    "text": "it now we are ready to go and change something so as a step one",
    "start": "1271659",
    "end": "1277600"
  },
  {
    "text": "usually you would make a code change committed and then your pipeline would",
    "start": "1277600",
    "end": "1282700"
  },
  {
    "text": "pick it up make a build new version and committed a change into your deployment",
    "start": "1282700",
    "end": "1288100"
  },
  {
    "text": "repo which I am going to do manually so and of course I already built bunch of",
    "start": "1288100",
    "end": "1293830"
  },
  {
    "text": "images before the demo so happens to use customize to manage my manifests and so",
    "start": "1293830",
    "end": "1300460"
  },
  {
    "text": "I have a convenience I can just go and change image tag in customize docume file so lets me change the red color",
    "start": "1300460",
    "end": "1309669"
  },
  {
    "text": "into green and committed so and i want",
    "start": "1309669",
    "end": "1316960"
  },
  {
    "start": "1316000",
    "end": "1581000"
  },
  {
    "text": "to switch quickly to the algal UI so let me just explain what just happened",
    "start": "1316960",
    "end": "1322360"
  },
  {
    "text": "Agro noticed there was a change in repo and the things that has changed switched",
    "start": "1322360",
    "end": "1327669"
  },
  {
    "text": "into outer sync and then algo decided to fix it and immediately updated my rollout if we took like a longer time we",
    "start": "1327669",
    "end": "1335830"
  },
  {
    "text": "would notice that robot was out of sync as well so once robot is updated it",
    "start": "1335830",
    "end": "1343120"
  },
  {
    "text": "inspect the spec of its own spec and decides to",
    "start": "1343120",
    "end": "1348470"
  },
  {
    "text": "you know follow the steps of a canary deployment the first step was to just go ahead and get rid of 20% of previous",
    "start": "1348470",
    "end": "1356180"
  },
  {
    "text": "version and start the you know amount of pods which equivalent to 20 percent of",
    "start": "1356180",
    "end": "1362630"
  },
  {
    "text": "the whole application using new version and this has just happened so as you can see we have one more replica which just",
    "start": "1362630",
    "end": "1369590"
  },
  {
    "text": "have a single pot and the old replica has just four instead of five and if we",
    "start": "1369590",
    "end": "1375710"
  },
  {
    "text": "switch to the application you can see that some of the circles are now green and this is kind of a proof that",
    "start": "1375710",
    "end": "1381760"
  },
  {
    "text": "everything is working as expected successfully and we're serving a canal a",
    "start": "1381760",
    "end": "1388550"
  },
  {
    "text": "traffic and I want to highlight kind of two things here one than you already",
    "start": "1388550",
    "end": "1394130"
  },
  {
    "text": "mentioned so it is if you using a rolling update and you want to switch to",
    "start": "1394130",
    "end": "1400580"
  },
  {
    "text": "a rollout you can at the first step just change IP I version and kind and great",
    "start": "1400580",
    "end": "1408470"
  },
  {
    "text": "you keep using crawling update nothing happened at all as the next step you can decide to introduce canary strategy and great you",
    "start": "1408470",
    "end": "1415010"
  },
  {
    "text": "had you cannot easily migrate it from rolling update to canary and second I",
    "start": "1415010",
    "end": "1421310"
  },
  {
    "text": "did a single change in a get and I can",
    "start": "1421310",
    "end": "1426620"
  },
  {
    "text": "just define the target state and it's very good opt friendly because that's what you want to do we just want to make",
    "start": "1426620",
    "end": "1432740"
  },
  {
    "text": "one change even though the process takes two three or more steps and yeah so what",
    "start": "1432740",
    "end": "1440060"
  },
  {
    "text": "we did we just took all of that logic and put it into controller inside of a cluster and I promised to mention how",
    "start": "1440060",
    "end": "1446480"
  },
  {
    "text": "would you automate it so you have choices you can either use there is a",
    "start": "1446480",
    "end": "1451640"
  },
  {
    "text": "convenience which Argosy provides as a Argos CLI if you don't use algo you can use just keep CTL to kind of proceed",
    "start": "1451640",
    "end": "1461540"
  },
  {
    "text": "with the patch the roller up yeah yes and okay",
    "start": "1461540",
    "end": "1467200"
  },
  {
    "text": "one thing we have not done yet is we have not completed the deployment yet so",
    "start": "1467200",
    "end": "1472580"
  },
  {
    "text": "what else is changed is the application status its fished from the progressing",
    "start": "1472580",
    "end": "1477680"
  },
  {
    "text": "to suspended State and this is the signal to UCI where you actually want to",
    "start": "1477680",
    "end": "1483050"
  },
  {
    "text": "execute that CLI command to to tell they're a lot controller to continue and",
    "start": "1483050",
    "end": "1488740"
  },
  {
    "text": "as I mentioned there is CLI I'm going to just use UI and I'm going to tell to our guchigi okay send the signal to",
    "start": "1488740",
    "end": "1495380"
  },
  {
    "text": "controller at all all controller and signal means just update the spec overall out so once that happened robot",
    "start": "1495380",
    "end": "1511550"
  },
  {
    "text": "start doing his job yes and we can change that we suddenly start getting",
    "start": "1511550",
    "end": "1517100"
  },
  {
    "text": "all the green traffic which is great that means we kind of we slowly migrated",
    "start": "1517100",
    "end": "1522260"
  },
  {
    "text": "to the next version of our application so now we are ready to you know switch",
    "start": "1522260",
    "end": "1529520"
  },
  {
    "text": "back to deployment and I can demonstrate to one more kind of advantage of a rollout you can easily changed your",
    "start": "1529520",
    "end": "1537010"
  },
  {
    "text": "deployment strategy and switch into blue green strategy so let's go ahead and do",
    "start": "1537010",
    "end": "1543350"
  },
  {
    "text": "it so as you can imagine all I have to do just go ahead and change the",
    "start": "1543350",
    "end": "1549080"
  },
  {
    "text": "deployment strategy yep I'm going to use just github UI to make this change get",
    "start": "1549080",
    "end": "1555680"
  },
  {
    "text": "rid of an area keep blue green this is done nothing is going to happen with the",
    "start": "1555680",
    "end": "1562070"
  },
  {
    "text": "application here because we keep using the same image and I want to change the",
    "start": "1562070",
    "end": "1568670"
  },
  {
    "text": "color from green to as you can get to to blue and we will be doing the truly blue",
    "start": "1568670",
    "end": "1575330"
  },
  {
    "text": "green deployment yep that's so this is just done and we are",
    "start": "1575330",
    "end": "1583220"
  },
  {
    "start": "1581000",
    "end": "1731000"
  },
  {
    "text": "going to see exact same sequence of events so application fish from in sync",
    "start": "1583220",
    "end": "1592310"
  },
  {
    "text": "to out of seeing how our controller decided to go ahead and execute the strategy which is blue green",
    "start": "1592310",
    "end": "1598450"
  },
  {
    "text": "and blue green means create just a full copy of my production we can see the two",
    "start": "1598450",
    "end": "1604570"
  },
  {
    "text": "replica sets fully kind of scale up to the max number of replicas let's make",
    "start": "1604570",
    "end": "1610930"
  },
  {
    "text": "sure we're still serving green because I have not yet approved to you know promote my blue to green and I can",
    "start": "1610930",
    "end": "1618730"
  },
  {
    "text": "promote it in the same way I can just do the UCLA I mean if you use Jenkins this",
    "start": "1618730",
    "end": "1624910"
  },
  {
    "text": "is you che chance to test the blue",
    "start": "1624910",
    "end": "1630220"
  },
  {
    "text": "version and that is okay there is one more agro CG feature which I want to",
    "start": "1630220",
    "end": "1636310"
  },
  {
    "text": "demo which is network view it is meant to just visualize your traffic flow and I can use it to figure out you know the",
    "start": "1636310",
    "end": "1644290"
  },
  {
    "text": "where is my blue version this on the - I can see there are two external points",
    "start": "1644290",
    "end": "1649390"
  },
  {
    "text": "where which can sort the traffic so as they mentioned blue green has preview",
    "start": "1649390",
    "end": "1656170"
  },
  {
    "text": "service in my case it's a rollout demo preview I can get its IP address open it",
    "start": "1656170",
    "end": "1663160"
  },
  {
    "text": "in a browser and then I can make sure it's blue and almost see a light see a",
    "start": "1663160",
    "end": "1670510"
  },
  {
    "text": "drop can do that for me testing yes that's it so it's just tested it's really blue and",
    "start": "1670510",
    "end": "1678000"
  },
  {
    "text": "now let's let's confirm the deployment",
    "start": "1678000",
    "end": "1684180"
  },
  {
    "text": "using Qi which is confirmed and so yeah",
    "start": "1684180",
    "end": "1689380"
  },
  {
    "text": "once it is confirmed we're going to scale down all of them green version",
    "start": "1689380",
    "end": "1695230"
  },
  {
    "text": "right in green colors and just keep blue and as you can see that switch happened",
    "start": "1695230",
    "end": "1701050"
  },
  {
    "text": "kind of instantly because we didn't want this is the point of Bluegreen deployment and that's it that's all I",
    "start": "1701050",
    "end": "1708610"
  },
  {
    "text": "have",
    "start": "1708610",
    "end": "1710820"
  },
  {
    "text": "then you have couples let's look at let me give it back to him so that was our",
    "start": "1718710",
    "end": "1726220"
  },
  {
    "text": "go rollouts and from here we're gonna talk about what's next so we definitely",
    "start": "1726220",
    "end": "1732730"
  },
  {
    "start": "1731000",
    "end": "2163000"
  },
  {
    "text": "want to add a surface mesh integration that announcement with the server Smith's mesh interface is definitely",
    "start": "1732730",
    "end": "1740919"
  },
  {
    "text": "exciting because that will enable us to service a wide variety of service mesh providers and it also enabled us to do",
    "start": "1740919",
    "end": "1749379"
  },
  {
    "text": "more fine-grain traffic shaping so you don't have to expose nearly as much",
    "start": "1749379",
    "end": "1754830"
  },
  {
    "text": "traffic for two year canary without having to run large numbers of replicas",
    "start": "1754830",
    "end": "1761460"
  },
  {
    "text": "additionally probably one other thing you may have noticed is that we haven't really talked about actually analyzing",
    "start": "1761460",
    "end": "1770139"
  },
  {
    "text": "the new version that we release one of the core design principles that we had",
    "start": "1770139",
    "end": "1776200"
  },
  {
    "text": "with our go rollouts was to really keep it focused on just the orchestration we",
    "start": "1776200",
    "end": "1782950"
  },
  {
    "text": "didn't want to introduce any analysis on into the rollout controller because we",
    "start": "1782950",
    "end": "1789279"
  },
  {
    "text": "feel like that could be a separate problem that we could really solve with a separate promotion CRD that will",
    "start": "1789279",
    "end": "1796840"
  },
  {
    "text": "enable us to have more flexibility with the promotion process and integrate with",
    "start": "1796840",
    "end": "1803769"
  },
  {
    "text": "a bunch of different vendors versus just having it all kind of bundled into one say your need finally we want we are",
    "start": "1803769",
    "end": "1811210"
  },
  {
    "text": "also working on adding a be testing where we could run multiple versions at the same time so that we can really",
    "start": "1811210",
    "end": "1819609"
  },
  {
    "text": "enable experimentation throughout the deployment process so if you have any",
    "start": "1819609",
    "end": "1826840"
  },
  {
    "text": "questions please feel free to check out any of these links the Argo rollout so",
    "start": "1826840",
    "end": "1832179"
  },
  {
    "text": "the Argo CD web pages are a great resource and also if you're interested",
    "start": "1832179",
    "end": "1838570"
  },
  {
    "text": "by this please feel free to check out the into a careers page we're always hiring and yeah with that thank you so",
    "start": "1838570",
    "end": "1847149"
  },
  {
    "text": "much for your time [Music] [Applause]",
    "start": "1847149",
    "end": "1860800"
  },
  {
    "text": "one two good time for a few questions",
    "start": "1868080",
    "end": "1872730"
  },
  {
    "text": "thanks for the demo that's great ideas I was wondering what would it make sense",
    "start": "1875070",
    "end": "1881440"
  },
  {
    "text": "to maybe have all these ideas being",
    "start": "1881440",
    "end": "1887970"
  },
  {
    "text": "merged into the deployment from communities like why did you build your own way of deployment instead of going",
    "start": "1887970",
    "end": "1896410"
  },
  {
    "text": "to the communities project and contribute to having this supported by them first questions second questions",
    "start": "1896410",
    "end": "1903490"
  },
  {
    "text": "just out of curiosity people do stupid things what if someone have like one",
    "start": "1903490",
    "end": "1908740"
  },
  {
    "text": "replica and try to make percentages how are you dealing with this Thanks okay so",
    "start": "1908740",
    "end": "1921790"
  },
  {
    "text": "one I mean of course we will be happy to merge it back into kubernetes I guess we didn't even try to because we wanted to",
    "start": "1921790",
    "end": "1927970"
  },
  {
    "text": "prove ourselves that it makes sense and once we're stable yes I guess we will give it a shot and see if we can do that",
    "start": "1927970",
    "end": "1935260"
  },
  {
    "text": "Elson I also know that the release they're trying to really harden these",
    "start": "1935260",
    "end": "1942430"
  },
  {
    "text": "core kubernetes objects and they're not as I don't think there is open to you",
    "start": "1942430",
    "end": "1948430"
  },
  {
    "text": "adding new strategies it is understandable because it's opinionated",
    "start": "1948430",
    "end": "1953620"
  },
  {
    "text": "although we try to make it you know as flexible as possible it's still our opinion how flexible it should be but",
    "start": "1953620",
    "end": "1959440"
  },
  {
    "text": "yeah I agree if it will be beneficial for everyone to have it available in",
    "start": "1959440",
    "end": "1965110"
  },
  {
    "text": "communities and so can you repeat the second question",
    "start": "1965110",
    "end": "1970620"
  },
  {
    "text": "yes so oh yes idea that this is the point of a controller this is something",
    "start": "1979770",
    "end": "1986260"
  },
  {
    "text": "we could not do in Jenkins controller keep watching continuously no matter what you do I mean it will try to get",
    "start": "1986260",
    "end": "1992799"
  },
  {
    "text": "you back into the kind of state it thinks it's supposed to be so even if you try to you know engineer applica set",
    "start": "1992799",
    "end": "2000240"
  },
  {
    "text": "it will recreate if you try to scale up and controller would see oh the template is not supposed to have that many number",
    "start": "2000240",
    "end": "2006840"
  },
  {
    "text": "of particles kept down and you can do you know interesting things so if you in",
    "start": "2006840",
    "end": "2012120"
  },
  {
    "text": "the middle of blue green or canary deployment and you don't like what you see you can just go ahead and roll back",
    "start": "2012120",
    "end": "2018450"
  },
  {
    "text": "let's say your Oba committee and get and control would know what is it and it will treat it in a right way like it",
    "start": "2018450",
    "end": "2024690"
  },
  {
    "text": "would figure out that oh I just I was supposed to deploy canary new version of a canary I'm now supposed to run the",
    "start": "2024690",
    "end": "2031290"
  },
  {
    "text": "previous version so it would just cancel the canary and kind of BEC go back into active State and it was hard to do it is escaped if",
    "start": "2031290",
    "end": "2038340"
  },
  {
    "text": "you just give sequence of steps that Stadium thank you for a great talk and",
    "start": "2038340",
    "end": "2045720"
  },
  {
    "text": "what I'm assume will be a very successful tool as well having been to earlier talks on pod readiness gates and",
    "start": "2045720",
    "end": "2053330"
  },
  {
    "text": "knowing that you guys also work on for Mars are there any plans to integrate those",
    "start": "2053330",
    "end": "2058919"
  },
  {
    "text": "into the canary release process to have automatic canary analysis and promotion",
    "start": "2058919",
    "end": "2067350"
  },
  {
    "text": "throughout environments",
    "start": "2067350",
    "end": "2070700"
  },
  {
    "text": "short answer yes and with the with the promotion CRD the plan is for us to kind",
    "start": "2076000",
    "end": "2084550"
  },
  {
    "text": "of use that as the integration point with the different services so that we can kind of provide these smarter checks",
    "start": "2084550",
    "end": "2092789"
  },
  {
    "text": "last question at the beginning you mentioned you you have 120 classes how",
    "start": "2093210",
    "end": "2101770"
  },
  {
    "text": "does the tool work between all of them and how does the deployment process knows which target to which cluster to",
    "start": "2101770",
    "end": "2108940"
  },
  {
    "text": "target how does that thing work kind of",
    "start": "2108940",
    "end": "2115690"
  },
  {
    "text": "question about algo CT right so this is I think yeah so idea of Argus eg it's a",
    "start": "2115690",
    "end": "2121349"
  },
  {
    "text": "multi cluster management tool you can use it in two ways you can just manage objects in the same cluster where your",
    "start": "2121349",
    "end": "2128730"
  },
  {
    "text": "application is running apps algis it is running or you can just add credentials",
    "start": "2128730",
    "end": "2134079"
  },
  {
    "text": "to an external cluster and application has a target cluster URL and namespace",
    "start": "2134079",
    "end": "2142170"
  },
  {
    "text": "so yes and that's why Argo is able to connect to that external cluster and you know do the changes yeah thank you again",
    "start": "2142170",
    "end": "2154299"
  },
  {
    "text": "for your time and we'll be around for your questions thanks a lot everyone enjoy the rest of the shape",
    "start": "2154299",
    "end": "2160650"
  },
  {
    "text": "[Applause]",
    "start": "2160650",
    "end": "2164518"
  }
]