[
  {
    "start": "0",
    "end": "15000"
  },
  {
    "text": "hello and welcome to another portworx",
    "start": "320",
    "end": "2080"
  },
  {
    "text": "demo today's demo",
    "start": "2080",
    "end": "3840"
  },
  {
    "text": "will show zero rpo recover point object",
    "start": "3840",
    "end": "7200"
  },
  {
    "text": "disaster recovery across two different",
    "start": "7200",
    "end": "10320"
  },
  {
    "text": "kubernetes clusters in amazon web",
    "start": "10320",
    "end": "12960"
  },
  {
    "text": "services",
    "start": "12960",
    "end": "15120"
  },
  {
    "start": "15000",
    "end": "61000"
  },
  {
    "text": "to be specific we'll have an active site",
    "start": "15120",
    "end": "18080"
  },
  {
    "text": "running kubernetes",
    "start": "18080",
    "end": "19400"
  },
  {
    "text": "1.15 and a dr site also running",
    "start": "19400",
    "end": "22800"
  },
  {
    "text": "kubernetes 1.15 portworx will be",
    "start": "22800",
    "end": "25439"
  },
  {
    "text": "deployed across them as a single fabric",
    "start": "25439",
    "end": "28080"
  },
  {
    "text": "with two domains a primary and a",
    "start": "28080",
    "end": "29679"
  },
  {
    "text": "failover",
    "start": "29679",
    "end": "31359"
  },
  {
    "text": "this allows portworx to sync these",
    "start": "31359",
    "end": "34559"
  },
  {
    "text": "kubernetes clusters together allowing",
    "start": "34559",
    "end": "36960"
  },
  {
    "text": "kubernetes objects",
    "start": "36960",
    "end": "38640"
  },
  {
    "text": "as well as the data in the single fabric",
    "start": "38640",
    "end": "40640"
  },
  {
    "text": "to be synced across clusters",
    "start": "40640",
    "end": "43360"
  },
  {
    "text": "this enables portworx and kubernetes to",
    "start": "43360",
    "end": "46960"
  },
  {
    "text": "work together",
    "start": "46960",
    "end": "47840"
  },
  {
    "text": "in case of a failure we can turn on the",
    "start": "47840",
    "end": "50320"
  },
  {
    "text": "dr site as an active site",
    "start": "50320",
    "end": "52480"
  },
  {
    "text": "all the data will remain there giving us",
    "start": "52480",
    "end": "55120"
  },
  {
    "text": "zero",
    "start": "55120",
    "end": "56239"
  },
  {
    "text": "recover point object and a very low rto",
    "start": "56239",
    "end": "61519"
  },
  {
    "start": "61000",
    "end": "549000"
  },
  {
    "text": "so here are two clusters on the left",
    "start": "61680",
    "end": "63520"
  },
  {
    "text": "you'll see our primary cluster",
    "start": "63520",
    "end": "65280"
  },
  {
    "text": "on the right you'll see our secondary",
    "start": "65280",
    "end": "67439"
  },
  {
    "text": "cluster as",
    "start": "67439",
    "end": "68720"
  },
  {
    "text": "our dr site you can see there's three",
    "start": "68720",
    "end": "71439"
  },
  {
    "text": "workers",
    "start": "71439",
    "end": "72159"
  },
  {
    "text": "in each cluster our primary has worker",
    "start": "72159",
    "end": "74400"
  },
  {
    "text": "zero one two three",
    "start": "74400",
    "end": "76080"
  },
  {
    "text": "and in our dr site we have second worker",
    "start": "76080",
    "end": "79439"
  },
  {
    "text": "zero one two three they're both",
    "start": "79439",
    "end": "83200"
  },
  {
    "text": "running portworx as you can see is a",
    "start": "83200",
    "end": "86240"
  },
  {
    "text": "single cluster with all six",
    "start": "86240",
    "end": "87920"
  },
  {
    "text": "nodes across both kubernetes clusters",
    "start": "87920",
    "end": "91200"
  },
  {
    "text": "if we go to the demon set you can also",
    "start": "91200",
    "end": "92799"
  },
  {
    "text": "verify this by seeing that portworx is",
    "start": "92799",
    "end": "95200"
  },
  {
    "text": "running",
    "start": "95200",
    "end": "96079"
  },
  {
    "text": "with three pods one on each worker in",
    "start": "96079",
    "end": "98799"
  },
  {
    "text": "each cluster",
    "start": "98799",
    "end": "99600"
  },
  {
    "text": "for a total of six between them",
    "start": "99600",
    "end": "103758"
  },
  {
    "text": "inside the portworx daemon set we can",
    "start": "104479",
    "end": "107920"
  },
  {
    "text": "get into",
    "start": "107920",
    "end": "108960"
  },
  {
    "text": "the pxtl cli",
    "start": "108960",
    "end": "112240"
  },
  {
    "text": "by executing into the cluster here",
    "start": "112240",
    "end": "115280"
  },
  {
    "text": "and running a few commands here we're",
    "start": "115280",
    "end": "117680"
  },
  {
    "text": "going to show the cluster domains we",
    "start": "117680",
    "end": "119439"
  },
  {
    "text": "talked about in the diagram",
    "start": "119439",
    "end": "121360"
  },
  {
    "text": "you can see worker 1 2 and 3 belong to",
    "start": "121360",
    "end": "124560"
  },
  {
    "text": "a active site and",
    "start": "124560",
    "end": "128239"
  },
  {
    "text": "named primary and the second workers",
    "start": "128239",
    "end": "131039"
  },
  {
    "text": "belong to the active site",
    "start": "131039",
    "end": "132720"
  },
  {
    "text": "as a dr site they're both active because",
    "start": "132720",
    "end": "135680"
  },
  {
    "text": "both are healthy",
    "start": "135680",
    "end": "136959"
  },
  {
    "text": "even though our application is being",
    "start": "136959",
    "end": "138720"
  },
  {
    "text": "served off the primary site currently",
    "start": "138720",
    "end": "141920"
  },
  {
    "text": "you can see that",
    "start": "141920",
    "end": "142879"
  },
  {
    "text": "we have a demo namespace in our primary",
    "start": "142879",
    "end": "145040"
  },
  {
    "text": "but it doesn't yet exist in our dr site",
    "start": "145040",
    "end": "147599"
  },
  {
    "text": "because we haven't paired them together",
    "start": "147599",
    "end": "149440"
  },
  {
    "text": "or had a failure scenario",
    "start": "149440",
    "end": "153200"
  },
  {
    "text": "you can see the deployments exist in",
    "start": "153200",
    "end": "155840"
  },
  {
    "text": "this demo",
    "start": "155840",
    "end": "156560"
  },
  {
    "text": "namespace kubernetes counter is a web",
    "start": "156560",
    "end": "159120"
  },
  {
    "text": "application talking to a postgres",
    "start": "159120",
    "end": "160640"
  },
  {
    "text": "database backed by portworx",
    "start": "160640",
    "end": "162640"
  },
  {
    "text": "it's being served via route53 and you",
    "start": "162640",
    "end": "165360"
  },
  {
    "text": "can see that the primary cluster is",
    "start": "165360",
    "end": "166800"
  },
  {
    "text": "healthy",
    "start": "166800",
    "end": "168959"
  },
  {
    "text": "we can go ahead and interact with the",
    "start": "168959",
    "end": "170560"
  },
  {
    "text": "application",
    "start": "170560",
    "end": "172560"
  },
  {
    "text": "by going to this dns and clicking around",
    "start": "172560",
    "end": "175360"
  },
  {
    "text": "on the screen",
    "start": "175360",
    "end": "176239"
  },
  {
    "text": "this adds a database record to postgres",
    "start": "176239",
    "end": "178640"
  },
  {
    "text": "which is supported by portworx",
    "start": "178640",
    "end": "181200"
  },
  {
    "text": "for each logo that we have here so we",
    "start": "181200",
    "end": "183760"
  },
  {
    "text": "have eight records in the database",
    "start": "183760",
    "end": "185120"
  },
  {
    "text": "currently",
    "start": "185120",
    "end": "187519"
  },
  {
    "text": "if we go over to the cli we can also",
    "start": "189120",
    "end": "191920"
  },
  {
    "text": "view",
    "start": "191920",
    "end": "193440"
  },
  {
    "text": "our domains by using the stork ctl",
    "start": "193440",
    "end": "198800"
  },
  {
    "text": "you can see that they're both currently",
    "start": "198800",
    "end": "201680"
  },
  {
    "text": "active",
    "start": "201680",
    "end": "204079"
  },
  {
    "text": "now in order to create a working failure",
    "start": "204239",
    "end": "207360"
  },
  {
    "text": "scenario",
    "start": "207360",
    "end": "208560"
  },
  {
    "text": "we have to create what's called a",
    "start": "208560",
    "end": "210239"
  },
  {
    "text": "migration schedule",
    "start": "210239",
    "end": "211760"
  },
  {
    "text": "this migration schedule targets the",
    "start": "211760",
    "end": "213200"
  },
  {
    "text": "namespace a cluster pair",
    "start": "213200",
    "end": "215519"
  },
  {
    "text": "which is targeting our dr site cluster",
    "start": "215519",
    "end": "219440"
  },
  {
    "text": "and includes resources but not the",
    "start": "219440",
    "end": "222640"
  },
  {
    "text": "volumes because our volumes are already",
    "start": "222640",
    "end": "224239"
  },
  {
    "text": "there because we're running in stretch",
    "start": "224239",
    "end": "225680"
  },
  {
    "text": "cluster",
    "start": "225680",
    "end": "226080"
  },
  {
    "text": "mode we can create this migration",
    "start": "226080",
    "end": "230640"
  },
  {
    "text": "which will then allow us to see",
    "start": "230640",
    "end": "233920"
  },
  {
    "text": "the active migrations happening between",
    "start": "233920",
    "end": "235599"
  },
  {
    "text": "the clusters here you can see our first",
    "start": "235599",
    "end": "237680"
  },
  {
    "text": "migration",
    "start": "237680",
    "end": "238799"
  },
  {
    "text": "is in the application stage because it",
    "start": "238799",
    "end": "240640"
  },
  {
    "text": "doesn't need to move the volumes",
    "start": "240640",
    "end": "242319"
  },
  {
    "text": "as it's a single fat fabric so the",
    "start": "242319",
    "end": "244319"
  },
  {
    "text": "replicas are already over there",
    "start": "244319",
    "end": "247200"
  },
  {
    "text": "once the objects are moved we can",
    "start": "247200",
    "end": "248799"
  },
  {
    "text": "refresh our dr site and we can see that",
    "start": "248799",
    "end": "250799"
  },
  {
    "text": "the demo",
    "start": "250799",
    "end": "252159"
  },
  {
    "text": "project was just created",
    "start": "252159",
    "end": "255840"
  },
  {
    "text": "that's because the replication is now",
    "start": "258000",
    "end": "261600"
  },
  {
    "text": "moving objects of kubernetes",
    "start": "261600",
    "end": "264720"
  },
  {
    "text": "such as deployments and pods and secrets",
    "start": "264720",
    "end": "268320"
  },
  {
    "text": "from one cluster to the other in case of",
    "start": "268320",
    "end": "270000"
  },
  {
    "text": "a disaster scenario",
    "start": "270000",
    "end": "272160"
  },
  {
    "text": "to show this we can go to the primary",
    "start": "272160",
    "end": "274000"
  },
  {
    "text": "site",
    "start": "274000",
    "end": "275199"
  },
  {
    "text": "and edit our labels we can add",
    "start": "275199",
    "end": "278560"
  },
  {
    "text": "another label here directly called demo",
    "start": "278560",
    "end": "282000"
  },
  {
    "text": "label",
    "start": "282000",
    "end": "284320"
  },
  {
    "text": "and we update that and since",
    "start": "285040",
    "end": "289040"
  },
  {
    "text": "the migrations are continuously",
    "start": "289040",
    "end": "290800"
  },
  {
    "text": "migrating every one minute",
    "start": "290800",
    "end": "292720"
  },
  {
    "text": "as our schedule is tied to you can see",
    "start": "292720",
    "end": "296320"
  },
  {
    "text": "the next",
    "start": "296320",
    "end": "298560"
  },
  {
    "text": "migration is occurring right now now",
    "start": "298560",
    "end": "301520"
  },
  {
    "text": "it's done",
    "start": "301520",
    "end": "302800"
  },
  {
    "text": "and if we go back to the dr site we can",
    "start": "302800",
    "end": "304639"
  },
  {
    "text": "refresh and see that",
    "start": "304639",
    "end": "306240"
  },
  {
    "text": "our deployment now has that label so",
    "start": "306240",
    "end": "308800"
  },
  {
    "text": "it'll keep upgrading",
    "start": "308800",
    "end": "310080"
  },
  {
    "text": "and updating this as the primary gets",
    "start": "310080",
    "end": "313520"
  },
  {
    "text": "changed",
    "start": "313520",
    "end": "314720"
  },
  {
    "text": "it'll make sure that the dr site has all",
    "start": "314720",
    "end": "316479"
  },
  {
    "text": "these changes",
    "start": "316479",
    "end": "317840"
  },
  {
    "text": "note that the pods aren't running yet",
    "start": "317840",
    "end": "319440"
  },
  {
    "text": "though because we haven't had a failure",
    "start": "319440",
    "end": "320960"
  },
  {
    "text": "so let's go and create one",
    "start": "320960",
    "end": "322720"
  },
  {
    "text": "here we have a small script that'll go",
    "start": "322720",
    "end": "324240"
  },
  {
    "text": "ahead and deactivate our primary",
    "start": "324240",
    "end": "326880"
  },
  {
    "text": "cluster here you can see it's running a",
    "start": "326880",
    "end": "328880"
  },
  {
    "text": "deactivation command",
    "start": "328880",
    "end": "331039"
  },
  {
    "text": "this is in case of a failure you can go",
    "start": "331039",
    "end": "333680"
  },
  {
    "text": "ahead and deactivate the cluster",
    "start": "333680",
    "end": "335440"
  },
  {
    "text": "and it'll go ahead and start turning",
    "start": "335440",
    "end": "337520"
  },
  {
    "text": "over the pods",
    "start": "337520",
    "end": "339039"
  },
  {
    "text": "to allow them to run on the dr site",
    "start": "339039",
    "end": "342240"
  },
  {
    "text": "you can see now there's they're turning",
    "start": "342240",
    "end": "344320"
  },
  {
    "text": "off on the primary site and turning back",
    "start": "344320",
    "end": "346160"
  },
  {
    "text": "on",
    "start": "346160",
    "end": "347280"
  },
  {
    "text": "on the dr site",
    "start": "347280",
    "end": "350080"
  },
  {
    "text": "now we have all three running",
    "start": "351440",
    "end": "354639"
  },
  {
    "text": "of the web and the postgres is up",
    "start": "354639",
    "end": "357840"
  },
  {
    "text": "in the matter of 30 seconds here we can",
    "start": "357840",
    "end": "360479"
  },
  {
    "text": "go to route 53 and show that the primary",
    "start": "360479",
    "end": "362880"
  },
  {
    "text": "becomes unhealthy initially and",
    "start": "362880",
    "end": "366080"
  },
  {
    "text": "if we refresh the dr site",
    "start": "366080",
    "end": "370240"
  },
  {
    "text": "should take over as the healthy endpoint",
    "start": "370240",
    "end": "373919"
  },
  {
    "text": "there we see that the dr site's now",
    "start": "373919",
    "end": "375840"
  },
  {
    "text": "healthy so",
    "start": "375840",
    "end": "377520"
  },
  {
    "text": "rav53 understands that the application",
    "start": "377520",
    "end": "379919"
  },
  {
    "text": "is now running in the dr site and we",
    "start": "379919",
    "end": "381520"
  },
  {
    "text": "refresh all",
    "start": "381520",
    "end": "382560"
  },
  {
    "text": "our allowed data is still there and we",
    "start": "382560",
    "end": "384479"
  },
  {
    "text": "can go ahead and interact with the",
    "start": "384479",
    "end": "385759"
  },
  {
    "text": "application and add more records to that",
    "start": "385759",
    "end": "388400"
  },
  {
    "text": "database",
    "start": "388400",
    "end": "390960"
  },
  {
    "text": "while it's in the dr site",
    "start": "392080",
    "end": "395520"
  },
  {
    "text": "now if your primary site comes back",
    "start": "395520",
    "end": "398000"
  },
  {
    "text": "online so you recovered from that",
    "start": "398000",
    "end": "399600"
  },
  {
    "text": "failure",
    "start": "399600",
    "end": "400479"
  },
  {
    "text": "you can fail back uh to the primary site",
    "start": "400479",
    "end": "404080"
  },
  {
    "text": "so you can activate the primary",
    "start": "404080",
    "end": "406000"
  },
  {
    "text": "site which kicks off a process which",
    "start": "406000",
    "end": "410000"
  },
  {
    "text": "sinks any deltas any new data that was",
    "start": "410000",
    "end": "412000"
  },
  {
    "text": "written",
    "start": "412000",
    "end": "412720"
  },
  {
    "text": "while the application is on the dr site",
    "start": "412720",
    "end": "414720"
  },
  {
    "text": "back to the primary",
    "start": "414720",
    "end": "416560"
  },
  {
    "text": "once that data is written back to the",
    "start": "416560",
    "end": "418319"
  },
  {
    "text": "primary",
    "start": "418319",
    "end": "419680"
  },
  {
    "text": "it becomes active again and it'll go",
    "start": "419680",
    "end": "422560"
  },
  {
    "text": "ahead and turn on the applications in",
    "start": "422560",
    "end": "424080"
  },
  {
    "text": "the primary",
    "start": "424080",
    "end": "425599"
  },
  {
    "text": "you can see that they're spinning down",
    "start": "425599",
    "end": "427039"
  },
  {
    "text": "in the dr site once again",
    "start": "427039",
    "end": "428960"
  },
  {
    "text": "and spinning back up in the primary",
    "start": "428960",
    "end": "433520"
  },
  {
    "text": "in just a few seconds they're all down",
    "start": "433919",
    "end": "435599"
  },
  {
    "text": "on the dr site and back",
    "start": "435599",
    "end": "437120"
  },
  {
    "text": "up on the primary site",
    "start": "437120",
    "end": "441120"
  },
  {
    "text": "so now we've recovered our data any new",
    "start": "442880",
    "end": "445360"
  },
  {
    "text": "data that's been written to the dr site",
    "start": "445360",
    "end": "446880"
  },
  {
    "text": "back to the primary",
    "start": "446880",
    "end": "448240"
  },
  {
    "text": "our dr site becomes unhealthy because",
    "start": "448240",
    "end": "450160"
  },
  {
    "text": "it's not serving the application anymore",
    "start": "450160",
    "end": "452240"
  },
  {
    "text": "and the primary site becomes healthy",
    "start": "452240",
    "end": "455280"
  },
  {
    "text": "once again and we can go ahead and",
    "start": "455280",
    "end": "458000"
  },
  {
    "text": "interact with the application",
    "start": "458000",
    "end": "461199"
  },
  {
    "text": "and all our data is still there",
    "start": "461360",
    "end": "465840"
  },
  {
    "text": "now once it's back in the primary the",
    "start": "466560",
    "end": "469599"
  },
  {
    "text": "migrations get turned back down right so",
    "start": "469599",
    "end": "471440"
  },
  {
    "text": "in case there's another failure",
    "start": "471440",
    "end": "473199"
  },
  {
    "text": "in our primary site we want to make sure",
    "start": "473199",
    "end": "474800"
  },
  {
    "text": "our migrations are continuing to work",
    "start": "474800",
    "end": "477520"
  },
  {
    "text": "so we can go ahead and edit and add",
    "start": "477520",
    "end": "479680"
  },
  {
    "text": "another label",
    "start": "479680",
    "end": "480639"
  },
  {
    "text": "a third label here to show you that",
    "start": "480639",
    "end": "483520"
  },
  {
    "text": "that's still working",
    "start": "483520",
    "end": "485840"
  },
  {
    "text": "you can go ahead and add our third label",
    "start": "485840",
    "end": "490840"
  },
  {
    "text": "label again",
    "start": "490840",
    "end": "494160"
  },
  {
    "text": "perfect now that's being updated",
    "start": "494160",
    "end": "498560"
  },
  {
    "text": "we can go back and look at our",
    "start": "498560",
    "end": "500000"
  },
  {
    "text": "migrations which should be running",
    "start": "500000",
    "end": "501919"
  },
  {
    "text": "here we go great so that migration just",
    "start": "501919",
    "end": "506080"
  },
  {
    "text": "finished and if we go to the application",
    "start": "506080",
    "end": "509520"
  },
  {
    "text": "we can see that our third label is now",
    "start": "509520",
    "end": "511599"
  },
  {
    "text": "there again",
    "start": "511599",
    "end": "512479"
  },
  {
    "text": "and we're ready for another failure and",
    "start": "512479",
    "end": "515360"
  },
  {
    "text": "have continually been backing up",
    "start": "515360",
    "end": "517360"
  },
  {
    "text": "our cluster",
    "start": "517360",
    "end": "521120"
  },
  {
    "text": "thank you for watching portworx can be",
    "start": "521120",
    "end": "523839"
  },
  {
    "text": "installed",
    "start": "523839",
    "end": "525040"
  },
  {
    "text": "at install.portworks.com",
    "start": "525040",
    "end": "528880"
  },
  {
    "text": "and that should give you a way to",
    "start": "528880",
    "end": "530880"
  },
  {
    "text": "produce a spec",
    "start": "530880",
    "end": "533279"
  },
  {
    "text": "that can be generated to deploy portworx",
    "start": "533279",
    "end": "535360"
  },
  {
    "text": "and everything needed to deploy what",
    "start": "535360",
    "end": "536640"
  },
  {
    "text": "works on kubernetes",
    "start": "536640",
    "end": "538800"
  },
  {
    "text": "also visit our docs at",
    "start": "538800",
    "end": "540440"
  },
  {
    "text": "docs.portworks.com",
    "start": "540440",
    "end": "541920"
  },
  {
    "text": "and our socials at portworx on twitter",
    "start": "541920",
    "end": "546240"
  },
  {
    "text": "thanks for watching until next time",
    "start": "546240",
    "end": "549839"
  }
]