[
  {
    "text": "hello and welcome to the uh cni deep dive",
    "start": "80",
    "end": "5840"
  },
  {
    "text": "um we've got a couple of the cni project maintainers here um",
    "start": "6799",
    "end": "14799"
  },
  {
    "text": "before we get started i uh just want to put up some information this is this is the slide that usually appears",
    "start": "14799",
    "end": "21039"
  },
  {
    "text": "at the end i will put it up again at the end but uh if you",
    "start": "21039",
    "end": "26160"
  },
  {
    "text": "um are totally new to cni i'd really recommend you start with the intro session",
    "start": "26160",
    "end": "31279"
  },
  {
    "text": "uh which which if you're watching this live streamed yesterday but uh there's a link there um if you",
    "start": "31279",
    "end": "37520"
  },
  {
    "text": "want to look at the software the spec anything like that it's in the those github repos and we do",
    "start": "37520",
    "end": "43120"
  },
  {
    "text": "have our own slack um although i i hope uh if you're live i hope you're on the",
    "start": "43120",
    "end": "49840"
  },
  {
    "text": "kubecon chat and uh we do have uh we're here bruce and i should be live",
    "start": "49840",
    "end": "56640"
  },
  {
    "text": "at that time so please get asking your questions if you have some",
    "start": "56640",
    "end": "62559"
  },
  {
    "text": "this talk we're going to go through very brief what is cni just kind of set",
    "start": "63120",
    "end": "70240"
  },
  {
    "text": "the scene bruce is going to talk it's a deep dive so he's going to go really deep into the",
    "start": "70240",
    "end": "76720"
  },
  {
    "text": "technical details of cni extensibility and then i'm going to talk about some security issues that",
    "start": "76720",
    "end": "83520"
  },
  {
    "text": "shed a different light on the project um then we should have",
    "start": "83520",
    "end": "88960"
  },
  {
    "text": "time for questions at the end so let's get going",
    "start": "88960",
    "end": "94880"
  },
  {
    "text": "bruce yes hi everyone this is bruce i'm a software",
    "start": "95680",
    "end": "102640"
  },
  {
    "text": "um software engineer at san francisco from china my major work is",
    "start": "102640",
    "end": "109439"
  },
  {
    "text": "you know on some container networking including the you know building some",
    "start": "109439",
    "end": "115119"
  },
  {
    "text": "network plugins for our communities clusters the ingress controller and the best operator or",
    "start": "115119",
    "end": "121920"
  },
  {
    "text": "something like this uh for the cni team i'm a freshman i joined the team",
    "start": "121920",
    "end": "128399"
  },
  {
    "text": "since september last year my github id is mars 1024",
    "start": "128399",
    "end": "135680"
  },
  {
    "text": "so if you have any questions just ping me online hey brian",
    "start": "135680",
    "end": "142800"
  },
  {
    "text": "thanks bruce um so my name is brian borum i work for weaveworks uh which is is",
    "start": "142800",
    "end": "150000"
  },
  {
    "text": "probably best known as the gitops company right now but we were very early into the container networking",
    "start": "150000",
    "end": "155760"
  },
  {
    "text": "scene with weave net i've been lead maintainer on weavenet for about five years now",
    "start": "155760",
    "end": "162080"
  },
  {
    "text": "i'm also a maintainer on the cni project and a couple of other cncf open source",
    "start": "162080",
    "end": "168840"
  },
  {
    "text": "projects like cortex for instance i'm on github tube although",
    "start": "168840",
    "end": "174239"
  },
  {
    "text": "it's probably more entertaining to find me on twitter beborum is my handle most places",
    "start": "174239",
    "end": "181920"
  },
  {
    "text": "okay um let's open up uh i'm just gonna give you the the um",
    "start": "182239",
    "end": "188480"
  },
  {
    "text": "very uh high level view of uh what is cni um",
    "start": "188480",
    "end": "196000"
  },
  {
    "text": "so the basic idea uh is that uh that you or or probably a container",
    "start": "196000",
    "end": "202000"
  },
  {
    "text": "runtime run by you uh has some containers uh and you wanna attach them to",
    "start": "202000",
    "end": "208080"
  },
  {
    "text": "uh the network which is at the the bottom of the screen um so the",
    "start": "208080",
    "end": "214879"
  },
  {
    "text": "uh cni is the kind of the glue in the middle um a lot of the the hard work about",
    "start": "214879",
    "end": "222480"
  },
  {
    "text": "setting up the containers is one is done by what we refer to as a container runtime so that's",
    "start": "222480",
    "end": "228159"
  },
  {
    "text": "very commonly kubernetes but cni is used with mesos with cloud foundry with",
    "start": "228159",
    "end": "233439"
  },
  {
    "text": "rocket with podman so cni is agnostic to all those",
    "start": "233439",
    "end": "239599"
  },
  {
    "text": "different runtimes and it's equally uh wants to be even-handed about which",
    "start": "239599",
    "end": "244959"
  },
  {
    "text": "network you're using so cni defines a specification that's the most important part how you",
    "start": "244959",
    "end": "250480"
  },
  {
    "text": "talk and make a request um and then it we also have some library",
    "start": "250480",
    "end": "256720"
  },
  {
    "text": "code to help you implement that and some some um base plugins that uh are used by many",
    "start": "256720",
    "end": "262720"
  },
  {
    "text": "people but uh it's important to say that that a lot of the",
    "start": "262720",
    "end": "268240"
  },
  {
    "text": "um cni kind of sits in the middle and a lot of questions people have are",
    "start": "268240",
    "end": "273520"
  },
  {
    "text": "really about the upper layer about who's calling cni and a lot of the questions about the lower layer um",
    "start": "273520",
    "end": "280240"
  },
  {
    "text": "uh who's implementing cni but um that's that's where it sits that's kind",
    "start": "280240",
    "end": "286400"
  },
  {
    "text": "of sets out the uh overall position",
    "start": "286400",
    "end": "291840"
  },
  {
    "text": "okay i'm going to hand over to bruce now and bruce is going to tell us about the",
    "start": "291840",
    "end": "297040"
  },
  {
    "text": "whole subject of cni extensibility yes first let's",
    "start": "297040",
    "end": "304080"
  },
  {
    "text": "take overview to the singing accessibility as we know the singer has defined the",
    "start": "304080",
    "end": "311919"
  },
  {
    "text": "specification between the container runtime and the plugins but",
    "start": "311919",
    "end": "317280"
  },
  {
    "text": "this is not enough because sometimes we want to pass some you know dynamic or custom",
    "start": "317280",
    "end": "323520"
  },
  {
    "text": "information to our plugins uh for some case for example if we want",
    "start": "323520",
    "end": "328639"
  },
  {
    "text": "to assign some ip address for a container if you want to set batteries",
    "start": "328639",
    "end": "336479"
  },
  {
    "text": "host formatting mac or mtu for our container interfaces",
    "start": "336479",
    "end": "342479"
  },
  {
    "text": "this is this is this cannot be done by spec so to handle these user cases we need to",
    "start": "342479",
    "end": "351280"
  },
  {
    "text": "override the impulse to our plugins this is called ci accessibility you know beyond spec",
    "start": "351280",
    "end": "359199"
  },
  {
    "text": "and we have been thinking this question from the beginning of c9 and actually",
    "start": "359199",
    "end": "365840"
  },
  {
    "text": "they say i have evolution way from the senior arguments to arguments in",
    "start": "365840",
    "end": "372960"
  },
  {
    "text": "conflict to capabilities uh in my opinion i think this way is you know from easy to wise",
    "start": "372960",
    "end": "381520"
  },
  {
    "text": "from free to customized so let's come to the first",
    "start": "381520",
    "end": "388800"
  },
  {
    "text": "answer of let's come to the first answer of cnn accessibility to sing",
    "start": "388800",
    "end": "395759"
  },
  {
    "text": "arguments the senior argument is born with the original scene aspect",
    "start": "395759",
    "end": "401840"
  },
  {
    "text": "you know it appeared long time ago and just as its name it was passed by the",
    "start": "401840",
    "end": "409120"
  },
  {
    "text": "environment variables you know when we're calling the plugin and this format is some key value pairs",
    "start": "409120",
    "end": "416319"
  },
  {
    "text": "separated by semi columns in a single string and you know",
    "start": "416319",
    "end": "422479"
  },
  {
    "text": "uh seeing arguments is you know it's an easy way it's easy to",
    "start": "422479",
    "end": "429680"
  },
  {
    "text": "be implemented and easy to be used to be big to be debugged and",
    "start": "429680",
    "end": "436000"
  },
  {
    "text": "because we can cameras we can carry several cubed pairs in a spring",
    "start": "436000",
    "end": "444080"
  },
  {
    "text": "in one time it's flexible but scene",
    "start": "444080",
    "end": "451280"
  },
  {
    "text": "arguments has a worst limitation it's because the string is flat it cannot it's not easy for for it to",
    "start": "451280",
    "end": "459520"
  },
  {
    "text": "hold the structure data so such like jason so cena arguments",
    "start": "459520",
    "end": "466560"
  },
  {
    "text": "has been deprecated and takes the lowest priority so here's the question if i",
    "start": "466560",
    "end": "474400"
  },
  {
    "text": "uh do not use events to pass our arguments what should we use instead",
    "start": "474400",
    "end": "482560"
  },
  {
    "text": "so with this question we come to the second answer of cni accessibility",
    "start": "482560",
    "end": "489840"
  },
  {
    "text": "the arguments in configuration you know please take a look at the right picture",
    "start": "489840",
    "end": "496160"
  },
  {
    "text": "we can see the arguments is a special field in the network computation so this is because we think the json",
    "start": "496160",
    "end": "504639"
  },
  {
    "text": "network config is a better place to hold all the dynamic information",
    "start": "504639",
    "end": "509759"
  },
  {
    "text": "and this way is easy to hold the structural data",
    "start": "509759",
    "end": "515919"
  },
  {
    "text": "because it's just in a structured editor jason and the history the argument in",
    "start": "515919",
    "end": "523399"
  },
  {
    "text": "configuration is introduced in spec 0.2.0 and",
    "start": "523399",
    "end": "528880"
  },
  {
    "text": "is implemented in code release 0.4.0",
    "start": "528880",
    "end": "535519"
  },
  {
    "text": "but this way we still have some limitations the first limitation is you",
    "start": "535519",
    "end": "543040"
  },
  {
    "text": "usually we get the network configuration from disk",
    "start": "543040",
    "end": "548080"
  },
  {
    "text": "it's a fixed value but if we want to fill the dynamic",
    "start": "548080",
    "end": "554880"
  },
  {
    "text": "information into it we have to read it pass it and fill it you know override it so",
    "start": "554880",
    "end": "562880"
  },
  {
    "text": "the override function has to be implemented by ourselves you know by the user",
    "start": "562880",
    "end": "569920"
  },
  {
    "text": "the second limitation is you know just at the format you know we carried all the",
    "start": "569920",
    "end": "576880"
  },
  {
    "text": "dynamic information in a single map so this map will be passed to every",
    "start": "576880",
    "end": "582640"
  },
  {
    "text": "plugin whatever the info is needed or not so i don't think this is a good way",
    "start": "582640",
    "end": "590800"
  },
  {
    "text": "uh the senior accessibility is designed for carrying extra information",
    "start": "590800",
    "end": "597839"
  },
  {
    "text": "you know the ability beyond spec but",
    "start": "597839",
    "end": "602959"
  },
  {
    "text": "should it be fully customized i don't think so because this will cause",
    "start": "602959",
    "end": "609839"
  },
  {
    "text": "some controllers we want to pass specific arguments to specific",
    "start": "609839",
    "end": "617440"
  },
  {
    "text": "plugins you know this is what we want and with these questions we come to the",
    "start": "617440",
    "end": "625519"
  },
  {
    "text": "latest answer the capabilities yes which has another name the runtime configuration and the",
    "start": "625519",
    "end": "633519"
  },
  {
    "text": "capabilities take to two main advantages over the previous",
    "start": "633519",
    "end": "638640"
  },
  {
    "text": "ones two ones and the first advantage is you know plugin can define is additional",
    "start": "638640",
    "end": "646000"
  },
  {
    "text": "fields in network config you know this can be used as providation and",
    "start": "646000",
    "end": "653440"
  },
  {
    "text": "secondly the we can use this additional failed to",
    "start": "653440",
    "end": "660160"
  },
  {
    "text": "to you know to filter the information pass specific information to specific plugins",
    "start": "660160",
    "end": "668079"
  },
  {
    "text": "this will help to remove related information and the second advantages advantage",
    "start": "668079",
    "end": "675360"
  },
  {
    "text": "is the libya similar has implemented uh override function for us",
    "start": "675360",
    "end": "682480"
  },
  {
    "text": "we we don't have to implement a",
    "start": "682480",
    "end": "687519"
  },
  {
    "text": "config override function ourselves and then the picture below shows how the capability works",
    "start": "687519",
    "end": "695519"
  },
  {
    "text": "you know here is a plugin named podmapper and it declared in the",
    "start": "695519",
    "end": "701920"
  },
  {
    "text": "configuration that it needs a capability named port mappings",
    "start": "701920",
    "end": "707519"
  },
  {
    "text": "then the libsima will gather the dynamic information from",
    "start": "707519",
    "end": "715120"
  },
  {
    "text": "streams and into a map then the libsaner will search the map",
    "start": "715120",
    "end": "721120"
  },
  {
    "text": "with with the key for the mappings a font it will generate",
    "start": "721120",
    "end": "727920"
  },
  {
    "text": "a new json which is filled by the value",
    "start": "727920",
    "end": "734639"
  },
  {
    "text": "yes you can see the runtime config field is a new field filled by",
    "start": "734639",
    "end": "742639"
  },
  {
    "text": "filled by the lip scene eye then the the website will pass the new json",
    "start": "742639",
    "end": "750160"
  },
  {
    "text": "to the plugin you know with extra information so as we know the",
    "start": "750160",
    "end": "758480"
  },
  {
    "text": "c9 accessibility has you know a long journey to the capabilities but is capability",
    "start": "758480",
    "end": "766399"
  },
  {
    "text": "the final answer for the dynamic configuration uh for now in my opinion i don't think",
    "start": "766399",
    "end": "774160"
  },
  {
    "text": "so because capabilities still have some limitations",
    "start": "774160",
    "end": "779440"
  },
  {
    "text": "the first limitation is uh if you want to introduce a new capability it needs some",
    "start": "779440",
    "end": "787200"
  },
  {
    "text": "cost first we need to change the network config",
    "start": "787200",
    "end": "793200"
  },
  {
    "text": "secondly we need to do some code changing container runtime",
    "start": "793200",
    "end": "798800"
  },
  {
    "text": "this is you know cost uh the second limitation is now the capabilities is only come from",
    "start": "798800",
    "end": "807120"
  },
  {
    "text": "continue right time which means that the actual information can only be",
    "start": "807120",
    "end": "812480"
  },
  {
    "text": "passed from upstream to plugins but in some cases we think that",
    "start": "812480",
    "end": "820560"
  },
  {
    "text": "you know the extra information can be generated by the previous plugin",
    "start": "820560",
    "end": "826720"
  },
  {
    "text": "which is expected to be passed to the next plugin in this case capability",
    "start": "826720",
    "end": "834240"
  },
  {
    "text": "won't happen so i i think capabilities still need some",
    "start": "834240",
    "end": "842000"
  },
  {
    "text": "improvements in the future first i think capability needs self discovery",
    "start": "842000",
    "end": "849040"
  },
  {
    "text": "and secondly the i think capabilities should be passed over plugins you know not",
    "start": "849040",
    "end": "856800"
  },
  {
    "text": "just from the upstream uh that at last i think you know for the",
    "start": "856800",
    "end": "863600"
  },
  {
    "text": "exam team we should provide more utility package about the c9 extensibility so if someone",
    "start": "863600",
    "end": "870560"
  },
  {
    "text": "want to introduce some you know extra information to their plugins",
    "start": "870560",
    "end": "876320"
  },
  {
    "text": "we want to make it easier",
    "start": "876320",
    "end": "879839"
  },
  {
    "text": "in the end of my part i will show you a comparison summary you know the",
    "start": "882240",
    "end": "889760"
  },
  {
    "text": "the three kind of ci accessibilities uh from different perspective",
    "start": "889760",
    "end": "896639"
  },
  {
    "text": "uh i think the capability is the most recommended way for",
    "start": "896639",
    "end": "903279"
  },
  {
    "text": "the ci accessibility so if you want to extend this in life use capabilities",
    "start": "903279",
    "end": "912480"
  },
  {
    "text": "so next part brian will give you to something about the recent cves",
    "start": "912480",
    "end": "920399"
  },
  {
    "text": "hi brian thanks bruce um that was really",
    "start": "920399",
    "end": "926079"
  },
  {
    "text": "interesting and uh just thinking while while you were talking uh you know if",
    "start": "926079",
    "end": "932079"
  },
  {
    "text": "anyone listening to this is is interested in in that idea of extensibility um please do a",
    "start": "932079",
    "end": "940079"
  },
  {
    "text": "message in the in the chat here or come over to our slack on the the cncf slack the cni project is",
    "start": "940079",
    "end": "949120"
  },
  {
    "text": "is pretty small and basically volunteer run so if you do want to engage with us you",
    "start": "949120",
    "end": "955360"
  },
  {
    "text": "have ideas for enhancements or or whatever um if if you're willing to",
    "start": "955360",
    "end": "960399"
  },
  {
    "text": "do some work uh please please come along and engage with us if you just want to request it that we do",
    "start": "960399",
    "end": "965920"
  },
  {
    "text": "work uh might take a bit longer um okay so i'm prepared some slides to talk",
    "start": "965920",
    "end": "973040"
  },
  {
    "text": "about cvs what do we what do we mean by cv we mean some kind of security vulnerability",
    "start": "973040",
    "end": "978959"
  },
  {
    "text": "and they're they're given uh numbers they're given unique identifiers",
    "start": "978959",
    "end": "984639"
  },
  {
    "text": "so that when we talk to someone uh we know we're talking about precisely the same",
    "start": "984639",
    "end": "991120"
  },
  {
    "text": "issue uh if we have that identifier so i i picked a couple um",
    "start": "991120",
    "end": "998079"
  },
  {
    "text": "uh first one i'm going to talk about has the uh glorious name of cve 2020",
    "start": "998079",
    "end": "1004920"
  },
  {
    "text": "10749. it name doesn't mean anything like i said it's just a just a tag just a unique identifier but",
    "start": "1004920",
    "end": "1013040"
  },
  {
    "text": "it is about this router advisory message um and then i'm going to talk about a",
    "start": "1013040",
    "end": "1018320"
  },
  {
    "text": "totally different issue after that um let's look at the the first one um",
    "start": "1018320",
    "end": "1026798"
  },
  {
    "text": "what is the scene i've got uh i've got one host here um",
    "start": "1026799",
    "end": "1033280"
  },
  {
    "text": "the blue box represents your ordinary code that you're running some containers uh in your system um and the red box",
    "start": "1033280",
    "end": "1042160"
  },
  {
    "text": "uh somehow an attacker is running code there now you might think you know my my system is protected",
    "start": "1042160",
    "end": "1049360"
  },
  {
    "text": "attackers can't get in and run code um but maybe they maybe they attacked",
    "start": "1049360",
    "end": "1054480"
  },
  {
    "text": "the upstream supply chain you know maybe maybe they coerced one of your",
    "start": "1054480",
    "end": "1060000"
  },
  {
    "text": "developers to put the code in or maybe uh some library that you're using some tool that goes into a container",
    "start": "1060000",
    "end": "1066799"
  },
  {
    "text": "really difficult to to ensure that the whole supply chain is is pure and perfect so um so maybe the",
    "start": "1066799",
    "end": "1075200"
  },
  {
    "text": "attacker can get some malicious code sneak it in in the the guise of something that you want to be running",
    "start": "1075200",
    "end": "1081840"
  },
  {
    "text": "anyway uh if that has happened and um the attacker sends this message",
    "start": "1081840",
    "end": "1088240"
  },
  {
    "text": "forges a fake rooter advisory message uh and and what they say in this attack",
    "start": "1088240",
    "end": "1093440"
  },
  {
    "text": "is is they they basically tell linux to send all the ipv6 traffic here",
    "start": "1093440",
    "end": "1099520"
  },
  {
    "text": "um many many systems are running with the capability of ipv4 and ipv6 but",
    "start": "1099520",
    "end": "1105919"
  },
  {
    "text": "really only ipv4 configured they're really only expecting to use v4",
    "start": "1105919",
    "end": "1112160"
  },
  {
    "text": "so if the attacker sends this fake message saying hey send me all your ipv6 traffic well",
    "start": "1112160",
    "end": "1119039"
  },
  {
    "text": "linux will obey that so the next part of the attack is when your innocent",
    "start": "1119039",
    "end": "1127280"
  },
  {
    "text": "software tries to open a connection you know maybe this is making a request maybe",
    "start": "1127280",
    "end": "1132400"
  },
  {
    "text": "uh maybe an http request something like that um there's this cool thing",
    "start": "1132400",
    "end": "1140160"
  },
  {
    "text": "that called happy eyeballs it's kind of a weird name you can look it up i didn't invent it",
    "start": "1140160",
    "end": "1148000"
  },
  {
    "text": "and the basic idea of happy eyeballs is is that when you open a connection it's gonna open",
    "start": "1148000",
    "end": "1153360"
  },
  {
    "text": "uh or attempt to open uh a ipv4 and an ipv6 connection simultaneously um",
    "start": "1153360",
    "end": "1161520"
  },
  {
    "text": "and it's gonna pick the fastest one to to come back and the the reason for this the reason",
    "start": "1161520",
    "end": "1168080"
  },
  {
    "text": "this exists this happy eyeballs algorithm uh is is we're kind of in a transition",
    "start": "1168080",
    "end": "1174080"
  },
  {
    "text": "from ipv4 to ipv6 and we we want to be even-handed we want to uh you know not",
    "start": "1174080",
    "end": "1181039"
  },
  {
    "text": "not favor one or the other so literally those requests are sent out",
    "start": "1181039",
    "end": "1186080"
  },
  {
    "text": "simultaneously as as far as possible um",
    "start": "1186080",
    "end": "1191679"
  },
  {
    "text": "so uh in if you have this uh malicious code unfortunately running",
    "start": "1191679",
    "end": "1197520"
  },
  {
    "text": "in your system then the um the v6 request is going to hit the",
    "start": "1197520",
    "end": "1202960"
  },
  {
    "text": "the attacker uh because they're running right next to your real code um their response is",
    "start": "1202960",
    "end": "1210640"
  },
  {
    "text": "very likely to be the fastest one so what we end up with is that your client is now talking to",
    "start": "1210640",
    "end": "1217360"
  },
  {
    "text": "the attacker and running a fake service they do have to um run the entire tcp stack",
    "start": "1217360",
    "end": "1225520"
  },
  {
    "text": "uh inside their code the linux won't kind of legitimately root packets um",
    "start": "1225520",
    "end": "1232159"
  },
  {
    "text": "to to uh a fake attacker in in this way um but it's it is perfectly feasible to",
    "start": "1232159",
    "end": "1239360"
  },
  {
    "text": "to implement a tcp stack in in user code so um so this attack can",
    "start": "1239360",
    "end": "1246080"
  },
  {
    "text": "work um they can make fake responses they can",
    "start": "1246080",
    "end": "1251120"
  },
  {
    "text": "mount a man in the middle attack you know take your take your real request and maybe change it slightly and",
    "start": "1251120",
    "end": "1257200"
  },
  {
    "text": "pass it on send the money to their bank account instead of your bank account um this uh this",
    "start": "1257200",
    "end": "1264559"
  },
  {
    "text": "this vulnerability was um reported to us and we had to take action",
    "start": "1264559",
    "end": "1270080"
  },
  {
    "text": "so what uh what did we do i've drawn a few uh different mitigations",
    "start": "1270080",
    "end": "1277600"
  },
  {
    "text": "on on this slide first one over on the far right is is the code change that we made",
    "start": "1277600",
    "end": "1284720"
  },
  {
    "text": "this was to change a setting in to linux saying do not accept router",
    "start": "1284720",
    "end": "1290880"
  },
  {
    "text": "advisory messages except ra equals zero uh like like many of these things the",
    "start": "1290880",
    "end": "1296400"
  },
  {
    "text": "actual code changes like two lines just set that setting it did have to be deployed",
    "start": "1296400",
    "end": "1302080"
  },
  {
    "text": "in every different implementation of cni so so the base plug-ins had to do it the",
    "start": "1302080",
    "end": "1308880"
  },
  {
    "text": "uh i had to do it in weave net you know maybe calico had to do it all the different",
    "start": "1308880",
    "end": "1314720"
  },
  {
    "text": "implementations had to make that change to disable it",
    "start": "1314720",
    "end": "1320480"
  },
  {
    "text": "and there's no legitimate reason why why linux would be accepting router advisories from a from an",
    "start": "1320480",
    "end": "1325760"
  },
  {
    "text": "ordinary container so that's one mitigation that we put up",
    "start": "1325760",
    "end": "1331440"
  },
  {
    "text": "um the next one coming left uh i i would definitely recommend that you",
    "start": "1331440",
    "end": "1336960"
  },
  {
    "text": "turn off what's called cap net raw this is a capability um which is like a linux permission to",
    "start": "1336960",
    "end": "1344880"
  },
  {
    "text": "send raw packets this is what allows an attacker to forge anything they like uh router",
    "start": "1344880",
    "end": "1351440"
  },
  {
    "text": "advisory messages the entire fake message the entire tcp stack none of that is",
    "start": "1351440",
    "end": "1356799"
  },
  {
    "text": "possible if you just don't allow people to to forge packets um if you insist that they go through",
    "start": "1356799",
    "end": "1363360"
  },
  {
    "text": "the operating system to open sockets and make requests so um",
    "start": "1363360",
    "end": "1369120"
  },
  {
    "text": "so very much recommend that it is it is on by default and uh so you have to turn it off",
    "start": "1369120",
    "end": "1376320"
  },
  {
    "text": "um but i it's for me that's a recommendation and the the last one i'll mention if you",
    "start": "1376320",
    "end": "1382000"
  },
  {
    "text": "had some kind of authentication on your connection i've put tls here it could be something else um if if that is the case then the",
    "start": "1382000",
    "end": "1390240"
  },
  {
    "text": "attacker has to work harder because not only do they have to get the fake code and send the fake messages",
    "start": "1390240",
    "end": "1395360"
  },
  {
    "text": "but they have to um have your credentials to participate in an authenticated connection whether it's",
    "start": "1395360",
    "end": "1401919"
  },
  {
    "text": "tls or something else so um uh so definitely think about those",
    "start": "1401919",
    "end": "1407360"
  },
  {
    "text": "kind of mitigations not only for this vulnerability but for future vulnerabilities that we've not",
    "start": "1407360",
    "end": "1413919"
  },
  {
    "text": "discovered yet um having described that one let's let's",
    "start": "1413919",
    "end": "1420559"
  },
  {
    "text": "look at another one um this one's about demons listening on 127.0.0.1 this is",
    "start": "1420559",
    "end": "1427039"
  },
  {
    "text": "this is the local host address or the loopback address um so in this picture we've got two",
    "start": "1427039",
    "end": "1432799"
  },
  {
    "text": "hosts um one of them is is listening on this address and",
    "start": "1432799",
    "end": "1437919"
  },
  {
    "text": "and most people i would certainly have told you this before i knew about this vulnerability most people will believe",
    "start": "1437919",
    "end": "1443279"
  },
  {
    "text": "that that address can only be accessed from the local host",
    "start": "1443279",
    "end": "1448480"
  },
  {
    "text": "so they think it's safe i just listen on that local host address",
    "start": "1448480",
    "end": "1453840"
  },
  {
    "text": "and nobody can come in for another machine um if somebody",
    "start": "1453840",
    "end": "1459919"
  },
  {
    "text": "does try to do that well they can an attacker on another machine can say uh you know please will you",
    "start": "1459919",
    "end": "1466400"
  },
  {
    "text": "route packets to that address if they have control of of this machine machine b in my picture um",
    "start": "1466400",
    "end": "1474720"
  },
  {
    "text": "then those packets will go out and if they're reasonably close if they're on a local",
    "start": "1474720",
    "end": "1479919"
  },
  {
    "text": "network to the host they're trying to attack i just made up an address here 36",
    "start": "1479919",
    "end": "1486159"
  },
  {
    "text": "whatever um if that's close the packets will arrive",
    "start": "1486159",
    "end": "1492400"
  },
  {
    "text": "uh but linux will will drop them um they're called martians uh martian packets they appear from",
    "start": "1492400",
    "end": "1498400"
  },
  {
    "text": "outer space so that's the normal the expected state of",
    "start": "1498400",
    "end": "1505120"
  },
  {
    "text": "affairs most people will tell you that's what happens you cannot root to that address",
    "start": "1505120",
    "end": "1510559"
  },
  {
    "text": "surprise there is uh ins in the cni software there's a",
    "start": "1510559",
    "end": "1517919"
  },
  {
    "text": "thing called the port map plug-in um and same thing happens in in other bits of software cube proxy",
    "start": "1517919",
    "end": "1524000"
  },
  {
    "text": "is an example it changes a setting it says i do want to root that local address",
    "start": "1524000",
    "end": "1530640"
  },
  {
    "text": "um and it it does it for kind of intricate reasons to do with with how traffic is redirected inside uh",
    "start": "1530640",
    "end": "1538640"
  },
  {
    "text": "for for the mapping of services but anyway the bottom line is if you have that setting",
    "start": "1538640",
    "end": "1545600"
  },
  {
    "text": "if you have root local net equals one um that connection is possible attackers",
    "start": "1545600",
    "end": "1552080"
  },
  {
    "text": "can now talk to those demons that believed there could only be accessed by somebody",
    "start": "1552080",
    "end": "1557200"
  },
  {
    "text": "already on the host so what to do about this um well the",
    "start": "1557200",
    "end": "1563279"
  },
  {
    "text": "code change that we we shipped in uh cubeproxy for instance and in",
    "start": "1563279",
    "end": "1569760"
  },
  {
    "text": "again put out a release with this change in it was was to add a rule of iptable's rule blocking those",
    "start": "1569760",
    "end": "1576000"
  },
  {
    "text": "connections um so that makes that safe again um but once again",
    "start": "1576000",
    "end": "1584159"
  },
  {
    "text": "i if those connections were authenticated you know tls is an example could be something else",
    "start": "1584159",
    "end": "1589200"
  },
  {
    "text": "uh then it makes it that much harder for the attacker so there you go quick walk through",
    "start": "1589200",
    "end": "1596840"
  },
  {
    "text": "of uh two different very different vulnerabilities but i hope",
    "start": "1596840",
    "end": "1602799"
  },
  {
    "text": "it gives an insight into just how these things interrelate how how a bunch of different",
    "start": "1602799",
    "end": "1609679"
  },
  {
    "text": "layers can kind of stack up and come up with a behavior that's unexpected",
    "start": "1609679",
    "end": "1614720"
  },
  {
    "text": "um and of course that's what attackers do they they do the unexpected because uh because they're trying to hack your",
    "start": "1614720",
    "end": "1620480"
  },
  {
    "text": "system so um that's the end of the prepared slides",
    "start": "1620480",
    "end": "1629120"
  },
  {
    "text": "uh i'll put that information slide up once again um if you uh",
    "start": "1629120",
    "end": "1636720"
  },
  {
    "text": "are in too deep the intro session link is up there the video should be up shortly after the original",
    "start": "1636720",
    "end": "1642960"
  },
  {
    "text": "streaming um our software is in two repos one for the spec and libraries one for the",
    "start": "1642960",
    "end": "1649200"
  },
  {
    "text": "plugins the base plugins that we support um we do have our own slack uh",
    "start": "1649200",
    "end": "1655600"
  },
  {
    "text": "lovely to see you there if you want to head over um do not uh kubernetes has its own",
    "start": "1655600",
    "end": "1661679"
  },
  {
    "text": "slack so so do note that difference um cni is not part of kubernetes it's",
    "start": "1661679",
    "end": "1667120"
  },
  {
    "text": "it's works across many different container runtimes so so if your question is really kubernetes",
    "start": "1667120",
    "end": "1673039"
  },
  {
    "text": "specific please head over to their uh their slack instead",
    "start": "1673039",
    "end": "1679440"
  },
  {
    "text": "okay we're done with the prepared section i hope you all have questions and are have been typing them",
    "start": "1679440",
    "end": "1686080"
  },
  {
    "text": "already but if not please start now and bruce and i should be online to answer them",
    "start": "1686080",
    "end": "1692960"
  },
  {
    "text": "thank you",
    "start": "1692960",
    "end": "1697840"
  },
  {
    "text": "all right uh brian here i hope you can hear me we had a we had a few technical issues uh hence",
    "start": "1704080",
    "end": "1711279"
  },
  {
    "text": "i'm not on video but i am here live um",
    "start": "1711279",
    "end": "1716559"
  },
  {
    "text": "so we had a few questions already uh a number of them were kind of touched",
    "start": "1716559",
    "end": "1722000"
  },
  {
    "text": "on by that last thing i said that the cni is an independent project of of kubernetes and a lot of uh obviously",
    "start": "1722000",
    "end": "1729520"
  },
  {
    "text": "kubernetes being a very large dominant project a lot of the questions that people have",
    "start": "1729520",
    "end": "1734640"
  },
  {
    "text": "relate to kubernetes um but we're not uh really in a in a",
    "start": "1734640",
    "end": "1740799"
  },
  {
    "text": "position to speak for kubernetes um they they have their own sig network",
    "start": "1740799",
    "end": "1745840"
  },
  {
    "text": "and uh uh [Music] yeah you're really better off asking",
    "start": "1745840",
    "end": "1750880"
  },
  {
    "text": "them um question just came in from",
    "start": "1750880",
    "end": "1756000"
  },
  {
    "text": "hirotaka i hope i said that right are there any plans to add grpc",
    "start": "1756000",
    "end": "1761039"
  },
  {
    "text": "interface to cni and observing that many cni implementations do run a server",
    "start": "1761039",
    "end": "1767360"
  },
  {
    "text": "on each node um so i think we touched on this in the intro session i mean the answer is broadly yes",
    "start": "1767360",
    "end": "1774159"
  },
  {
    "text": "um yes we've talked about this um",
    "start": "1774159",
    "end": "1779679"
  },
  {
    "text": "so uh cni was was created uh uh originally the very first project",
    "start": "1779679",
    "end": "1786399"
  },
  {
    "text": "to use it was the the rocket project rkt um",
    "start": "1786399",
    "end": "1791840"
  },
  {
    "text": "and rocket had no demon it everything was demonless it's just exact program so that sort of followed through to the",
    "start": "1791840",
    "end": "1798000"
  },
  {
    "text": "architecture of cni where you just exec a program and um yeah you're absolutely right so",
    "start": "1798000",
    "end": "1803919"
  },
  {
    "text": "if you've got a demon running then talking grpc to it is kind of more standard in in today's world more",
    "start": "1803919",
    "end": "1810480"
  },
  {
    "text": "expected um it's also easier to do kind of global state things cni",
    "start": "1810480",
    "end": "1819440"
  },
  {
    "text": "works container by container interface by interface in its interface in its api um so",
    "start": "1819440",
    "end": "1828399"
  },
  {
    "text": "that would definitely be an advantage of moving to grpc um that you you could have kind of",
    "start": "1828399",
    "end": "1835039"
  },
  {
    "text": "system-wide questions like is the network up at all um so yeah we definitely talked about",
    "start": "1835039",
    "end": "1841919"
  },
  {
    "text": "that you can find in the in the repos actually let me see if i can",
    "start": "1841919",
    "end": "1846960"
  },
  {
    "text": "uh move back to that slide that has the links on it does that work",
    "start": "1846960",
    "end": "1853679"
  },
  {
    "text": "i hope that worked um yeah take a look around you know just search for grpc in the",
    "start": "1853679",
    "end": "1859760"
  },
  {
    "text": "issues on the the cni repo you'll probably find a little bit of",
    "start": "1859760",
    "end": "1864799"
  },
  {
    "text": "discussion about that and you know we love we love help quite a",
    "start": "1864799",
    "end": "1872399"
  },
  {
    "text": "small project and basically volunteer run [Music]",
    "start": "1872399",
    "end": "1877679"
  },
  {
    "text": "so uh if you have great ideas about how to do grpc uh please get in touch uh you know",
    "start": "1877679",
    "end": "1883760"
  },
  {
    "text": "you could do the coding and uh we'd love that um okay let me try",
    "start": "1883760",
    "end": "1889440"
  },
  {
    "text": "any new questions um i don't see any new ones that have come in so let me",
    "start": "1889440",
    "end": "1895840"
  },
  {
    "text": "turn to a couple that i answered um earlier",
    "start": "1895840",
    "end": "1903519"
  },
  {
    "text": "on on the on the q a typing um which were about like extra attributes",
    "start": "1903519",
    "end": "1910240"
  },
  {
    "text": "passing information kind of specifically from kubernetes but",
    "start": "1910240",
    "end": "1915519"
  },
  {
    "text": "but as a more general point there's there's kind of a fine distinction",
    "start": "1915519",
    "end": "1920640"
  },
  {
    "text": "between what's interesting to you and what's useful to everyone and we try",
    "start": "1920640",
    "end": "1927120"
  },
  {
    "text": "and walk that line with the cni project we try and keep the",
    "start": "1927120",
    "end": "1932840"
  },
  {
    "text": "specification really minimal really down to the",
    "start": "1932840",
    "end": "1938480"
  },
  {
    "text": "things that apply in in many many many cases",
    "start": "1938480",
    "end": "1944880"
  },
  {
    "text": "and but on flip side we don't want to stop anyone from doing anything you know that's that's kind of",
    "start": "1945440",
    "end": "1950720"
  },
  {
    "text": "uh anathema the the whole point of cni is to allow everyone to play on a level playing field um all the all the",
    "start": "1950720",
    "end": "1958399"
  },
  {
    "text": "container runtimes and all the networks can come together with this very simple core interface that's the idea so",
    "start": "1958399",
    "end": "1966399"
  },
  {
    "text": "you know if you come across a situation where you say gee cni is preventing me from doing this thing that i want to do then then",
    "start": "1966399",
    "end": "1972799"
  },
  {
    "text": "by all means get in touch raise an issue talk to us um",
    "start": "1972799",
    "end": "1978640"
  },
  {
    "text": "because the requests and the responses are json uh fundamentally you can add",
    "start": "1978640",
    "end": "1986240"
  },
  {
    "text": "anything you like uh you know we do we do not barf on unexpected fields",
    "start": "1986240",
    "end": "1991840"
  },
  {
    "text": "um so you can add you know uh bruce and his bit was",
    "start": "1991840",
    "end": "1997519"
  },
  {
    "text": "talking about specific ways that we've tried to um",
    "start": "1997519",
    "end": "2005039"
  },
  {
    "text": "style the way that people add fields but fundamentally it's jason you can say whatever you like you know you can you",
    "start": "2005039",
    "end": "2010960"
  },
  {
    "text": "can put a megabyte in there saying uh you know whatever you want to",
    "start": "2010960",
    "end": "2016159"
  },
  {
    "text": "say in your json um and the only requirement really is that you get at least one",
    "start": "2016159",
    "end": "2022240"
  },
  {
    "text": "runtime implementing it and at least one plugin implementing that i would say if you",
    "start": "2022240",
    "end": "2028880"
  },
  {
    "text": "find you know lots of plugins implementing it or lots of runtimes um then that that would be a time to",
    "start": "2028880",
    "end": "2035760"
  },
  {
    "text": "come to the cni project and say you ought to standardize this uh we actually have two levels of",
    "start": "2035760",
    "end": "2040960"
  },
  {
    "text": "standardization we have we have the spec the formal spec that everyone has to conform to",
    "start": "2040960",
    "end": "2046960"
  },
  {
    "text": "and then we have a document called conventions which is exactly to get out of this compelling",
    "start": "2046960",
    "end": "2053520"
  },
  {
    "text": "everyone to do something so we can add things to the conventions document very easily",
    "start": "2053520",
    "end": "2059118"
  },
  {
    "text": "but you know you would need uh some evidence that it is actually a convention that there's a",
    "start": "2059119",
    "end": "2064398"
  },
  {
    "text": "you know more than you using it um in order for us to publish it to the world",
    "start": "2064399",
    "end": "2070158"
  },
  {
    "text": "uh so yeah you know we're we're definitely interested in playing our part but don't uh don't kind of confuse the",
    "start": "2070159",
    "end": "2077118"
  },
  {
    "text": "cni project which goes across everything with one specific project even kubernetes big as it is",
    "start": "2077119",
    "end": "2082720"
  },
  {
    "text": "but we love kubernetes so i'm uh that i'm gonna wrap up i'm on",
    "start": "2082720",
    "end": "2089280"
  },
  {
    "text": "slack um in the uh cncf slack um",
    "start": "2089280",
    "end": "2095839"
  },
  {
    "text": "you can ask there and uh or you can ask in the github issues and i hope to see you around",
    "start": "2095839",
    "end": "2102320"
  },
  {
    "text": "thank you very much and goodbye for now",
    "start": "2102320",
    "end": "2107040"
  }
]