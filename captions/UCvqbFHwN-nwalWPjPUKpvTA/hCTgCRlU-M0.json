[
  {
    "text": "hi everyone welcome to hell users what can flux 2 do for you",
    "start": "80",
    "end": "7120"
  },
  {
    "text": "with scott radiant king and barrett i'm i'm scott rigby um i'm a helm and flux maintainer",
    "start": "7120",
    "end": "13120"
  },
  {
    "text": "working on the developer experience team at wheatworks and i'm kingdom barrett i'm an oss",
    "start": "13120",
    "end": "19840"
  },
  {
    "text": "support engineer also working on the developer experience team at weaveworks",
    "start": "19840",
    "end": "25760"
  },
  {
    "text": "so yeah first of all welcome uh the assumption for people coming to or watching this",
    "start": "26320",
    "end": "33600"
  },
  {
    "text": "recording and coming to the q a are that you have some familiarity with helm",
    "start": "33600",
    "end": "38640"
  },
  {
    "text": "there is no assumption about familiarity with flux yet but we can guess that some people have there's",
    "start": "38640",
    "end": "43920"
  },
  {
    "text": "a variety or there's a range of experience so um some some of you may have tried",
    "start": "43920",
    "end": "49840"
  },
  {
    "text": "um the current version of fox some of you may have tried the older version of books some may just be looking to get into get",
    "start": "49840",
    "end": "57199"
  },
  {
    "text": "ups from your existing from your existing element uh",
    "start": "57199",
    "end": "62719"
  },
  {
    "text": "installations and releases so um i think flux's hub controller is the",
    "start": "62719",
    "end": "69840"
  },
  {
    "text": "best way to do hell according to get up's principles and our team and and me",
    "start": "69840",
    "end": "75840"
  },
  {
    "text": "um in particular i'm dedicated to uh doing whatever i can to help make",
    "start": "75840",
    "end": "81360"
  },
  {
    "text": "sure that you feel that way too so please uh in the q a and and outside of that please keep in touch about how you",
    "start": "81360",
    "end": "87680"
  },
  {
    "text": "feel about it and what and how it works for you so um so first of all",
    "start": "87680",
    "end": "92720"
  },
  {
    "text": "uh i'm just going to explain first for a moment what flux adds on top of what what you already get",
    "start": "92720",
    "end": "98720"
  },
  {
    "text": "when you use helm so at least as of film three",
    "start": "98720",
    "end": "103759"
  },
  {
    "text": "um i almost designed uh with a client and an sdk on which the client",
    "start": "103759",
    "end": "110159"
  },
  {
    "text": "was built um but no running software agents of any kind",
    "start": "110159",
    "end": "115360"
  },
  {
    "text": "and this architecture intended anything outside of the client scope to be addressed",
    "start": "115360",
    "end": "120799"
  },
  {
    "text": "by other tools in the wider ecosystem which could then make use of helm's sdk just as",
    "start": "120799",
    "end": "125920"
  },
  {
    "text": "as the helm client does so why am i even mentioning that it's because uh uh flux's held",
    "start": "125920",
    "end": "132879"
  },
  {
    "text": "controller um built on uh kubernetes controller runtime it is uh",
    "start": "132879",
    "end": "140400"
  },
  {
    "text": "it's an example of a mature software agent that uses helm's sdk to full effect um every feature",
    "start": "140400",
    "end": "147599"
  },
  {
    "text": "at least that is non-experimental is available uh of helm is available in the helm",
    "start": "147599",
    "end": "154480"
  },
  {
    "text": "controller using purely using sdk um however there are some things that are",
    "start": "154480",
    "end": "159920"
  },
  {
    "text": "added to this otherwise why would you bother using it um the main the main thing that's added",
    "start": "159920",
    "end": "165280"
  },
  {
    "text": "is the get out side of things right so so flux's biggest addition is a structured layer",
    "start": "165280",
    "end": "170879"
  },
  {
    "text": "for your releases that automatically gets for the release that automatically gets reconciled to",
    "start": "170879",
    "end": "177280"
  },
  {
    "text": "your cluster based on the rules that you configure in your in-git",
    "start": "177280",
    "end": "182640"
  },
  {
    "text": "or inversion control so the way i like to think about it is home client commands let you",
    "start": "182640",
    "end": "188879"
  },
  {
    "text": "imperatively do things or you say hello repo ad it's on repo um",
    "start": "188879",
    "end": "195120"
  },
  {
    "text": "update that repo um tell them install helm upgrade etc um flux's home",
    "start": "195120",
    "end": "203280"
  },
  {
    "text": "uh controllers custom resources let you declare what you want the helm sdk what you want and the help",
    "start": "203280",
    "end": "212000"
  },
  {
    "text": "uh and the hell mesty pape will do that for you automatically and that's the main benefit that it offers um but there are a couple of additional",
    "start": "212000",
    "end": "218319"
  },
  {
    "text": "benefits um that are worth noting i won't get into every detail but just just at the high level before as we're",
    "start": "218319",
    "end": "224159"
  },
  {
    "text": "diving in managing and structuring multiple environments outside of the scope of the health climate",
    "start": "224159",
    "end": "230400"
  },
  {
    "text": "you can do that with health controller very well also a control loop with configurable",
    "start": "230400",
    "end": "236480"
  },
  {
    "text": "retry logic there's automated drift detection between your your declared desired state in",
    "start": "236480",
    "end": "245040"
  },
  {
    "text": "your getups to collect declare your desired state in your version control and the actual state of your operations",
    "start": "245040",
    "end": "250319"
  },
  {
    "text": "running in the cluster and then there are automatic responses to that drift",
    "start": "250319",
    "end": "255439"
  },
  {
    "text": "so that includes trying to reconcile those two things um notifications",
    "start": "255439",
    "end": "261519"
  },
  {
    "text": "for you when that's not happening the way you intended it to happen and unified logging as well and and",
    "start": "261519",
    "end": "267919"
  },
  {
    "text": "other other really uh valuable things that come with flux's version of get out so",
    "start": "267919",
    "end": "274880"
  },
  {
    "text": "i hope that gives you some sort of a sense of uh of why um or at least what",
    "start": "274880",
    "end": "281520"
  },
  {
    "text": "and some of the why so let's go ahead and uh um and show you something so",
    "start": "281520",
    "end": "288160"
  },
  {
    "text": "just to introduce uh what king's gonna say is that i here's here's the truth with it i",
    "start": "288160",
    "end": "293840"
  },
  {
    "text": "wanted a blog and um i thought you know i really need a blog",
    "start": "293840",
    "end": "298880"
  },
  {
    "text": "and you know i'm doing all this kubernetes stuff so why don't i run this blog on kubernetes you know because why not",
    "start": "298880",
    "end": "305520"
  },
  {
    "text": "um what could go wrong and um and it should be easy right uh but kingdom how do i do that with get",
    "start": "305520",
    "end": "312800"
  },
  {
    "text": "offs and help yes that's right we're running our blog on kubernetes because we make bad life",
    "start": "312800",
    "end": "318080"
  },
  {
    "text": "decisions and uh we like to use kubernetes for everything um i'm gonna start the screen share here um",
    "start": "318080",
    "end": "325360"
  },
  {
    "text": "actually it's a great decision and and get ops makes this uh really easy um so to back up just a little bit talk",
    "start": "325360",
    "end": "333120"
  },
  {
    "text": "about um why why we chose to present helm itself",
    "start": "333120",
    "end": "340240"
  },
  {
    "text": "uh let me get this full screen here so orient myself um",
    "start": "340240",
    "end": "346720"
  },
  {
    "text": "so helm itself is is great at um corralling configuration and what i mean",
    "start": "346720",
    "end": "352880"
  },
  {
    "text": "by that is um we talk about configuration in kubernetes a lot we usually we mean yaml",
    "start": "352880",
    "end": "359120"
  },
  {
    "text": "files um sometimes those are the full deployment resource service resource",
    "start": "359120",
    "end": "367039"
  },
  {
    "text": "uh custom resource definition all different kinds of resources that we may install um defined in their",
    "start": "367039",
    "end": "374160"
  },
  {
    "text": "full glory as yaml and sometimes what we mean is uh no just parameters just",
    "start": "374160",
    "end": "382000"
  },
  {
    "text": "just what we actually want you to configure and that's what helm does with values.yaml so values.yaml is not a first class",
    "start": "382000",
    "end": "388720"
  },
  {
    "text": "object uh maybe it is if you apply the schema.json but",
    "start": "388720",
    "end": "394560"
  },
  {
    "text": "as as you work with alan releases you find that helm enables you to",
    "start": "394560",
    "end": "399840"
  },
  {
    "text": "install a lot more things uh what we're going to find on our cluster is that we actually need more",
    "start": "399840",
    "end": "404960"
  },
  {
    "text": "than just a blog to have a blog our blog uses persistent volumes um our blog",
    "start": "404960",
    "end": "411440"
  },
  {
    "text": "uses wordpress um there could be vulnerabilities in wordpress and and",
    "start": "411440",
    "end": "416639"
  },
  {
    "text": "we're not just going to use this cluster for one thing uh we want other things on the cluster we want to keep those things",
    "start": "416639",
    "end": "422880"
  },
  {
    "text": "protected and safe from wordpress we want to keep all of them isolated and protected from each other",
    "start": "422880",
    "end": "428560"
  },
  {
    "text": "so we're going to start with uh live activity we have a flux cluster that we've",
    "start": "428560",
    "end": "435599"
  },
  {
    "text": "already bootstrapped and i've suspended a bunch of things so that we can simulate a bootstrap so you",
    "start": "435599",
    "end": "441199"
  },
  {
    "text": "can see what comes up we were going to do a live bootstrap but it",
    "start": "441199",
    "end": "446479"
  },
  {
    "text": "caused too many problems when um when we get there uh you might see some",
    "start": "446479",
    "end": "452560"
  },
  {
    "text": "of the problems that haven't been resolved still if we're lucky uh we'll get a chance to debug something",
    "start": "452560",
    "end": "458479"
  },
  {
    "text": "um and we're gonna install some other things alongside of flux um caverno",
    "start": "458479",
    "end": "464720"
  },
  {
    "text": "webhook wordpress itself there's lots more we wanted to show you",
    "start": "464720",
    "end": "470960"
  },
  {
    "text": "jenkins way to get a terminal in a web browser linker d",
    "start": "470960",
    "end": "476800"
  },
  {
    "text": "is a service mesh flagger is a progressive delivery tool that's also under the flux cd org so we're going to",
    "start": "476800",
    "end": "483440"
  },
  {
    "text": "get to as much of this as we can and we have a little timer robot to keep us",
    "start": "483440",
    "end": "488960"
  },
  {
    "text": "pace uh you might see at the bottom of the screen the tortoise and the hair animation will help us",
    "start": "488960",
    "end": "495680"
  },
  {
    "text": "with uh timekeeping okay so",
    "start": "496400",
    "end": "500560"
  },
  {
    "text": "starting with flux bootstrap uh let's see if i can remember how did i",
    "start": "501520",
    "end": "506879"
  },
  {
    "text": "get that narrow and expand i have to remember the keystrokes here so",
    "start": "506879",
    "end": "513039"
  },
  {
    "text": "to expand the hole in my presentation i'm using linux to present here because",
    "start": "513039",
    "end": "519440"
  },
  {
    "text": "i think the presentation tools are nicer i'm a desktop linux user for about 20",
    "start": "519440",
    "end": "525839"
  },
  {
    "text": "years um that's a little uh joke",
    "start": "525839",
    "end": "531040"
  },
  {
    "text": "okay so i apologize in advance for some aliases that you will see me use throughout this",
    "start": "531040",
    "end": "536800"
  },
  {
    "text": "if you're not familiar who is not familiar with k as the others for cube control probably most of you uh ks",
    "start": "536800",
    "end": "544480"
  },
  {
    "text": "there's um a namespace cube system if you're not familiar with it where lots of things are deployed by",
    "start": "544480",
    "end": "550880"
  },
  {
    "text": "default on most clusters so we can see what those things are",
    "start": "550880",
    "end": "558720"
  },
  {
    "text": "okay we um to see all of them and we won't see them again for the rest",
    "start": "561120",
    "end": "566720"
  },
  {
    "text": "of the demo i'm going to filter them out with a grip so lots of things in in the cube system",
    "start": "566720",
    "end": "574640"
  },
  {
    "text": "these will not be controlled by get offs today uh we provisioned our cluster out of band and so",
    "start": "574640",
    "end": "581920"
  },
  {
    "text": "moving on",
    "start": "582880",
    "end": "590160"
  },
  {
    "text": "now try to avoid using abbreviations um until i've explained them um",
    "start": "590160",
    "end": "596720"
  },
  {
    "text": "so we see here we have one customization and it's in a suspended state",
    "start": "596720",
    "end": "602800"
  },
  {
    "text": "so uh i think it's actually on suspend",
    "start": "602839",
    "end": "609600"
  },
  {
    "text": "no",
    "start": "609600",
    "end": "611759"
  },
  {
    "text": "resume yeah okay here we go so uh one of the things you want to know uh when you're setting",
    "start": "616399",
    "end": "621920"
  },
  {
    "text": "up a demo for flux is make sure you've got your tab completion hooked up so you don't have to fumble around with cube ctl explained",
    "start": "621920",
    "end": "630480"
  },
  {
    "text": "i just push tab there and it let me know what verbs i have available uh if your tab completion is not set up you're",
    "start": "631600",
    "end": "637600"
  },
  {
    "text": "gonna be missing that um that is uh not explained here but it is in the manual",
    "start": "637600",
    "end": "643279"
  },
  {
    "text": "that we'll show you later",
    "start": "643279",
    "end": "647839"
  },
  {
    "text": "and what this is going to do is basically spring to life everything all of the things that we've",
    "start": "650880",
    "end": "657440"
  },
  {
    "text": "put into our git repo we haven't shown you yet",
    "start": "657440",
    "end": "662720"
  },
  {
    "text": "uh this is our question you know while kingdom's doing that it's probably worth me mentioning so this is a talk on",
    "start": "664959",
    "end": "670160"
  },
  {
    "text": "on flux and helm right and kingdom's uh resuming a suspended customization why",
    "start": "670160",
    "end": "678000"
  },
  {
    "text": "are we doing this um it's important to note for the moment that",
    "start": "678000",
    "end": "683040"
  },
  {
    "text": "the that flux's customized controller is what is used not only for people who",
    "start": "683040",
    "end": "689600"
  },
  {
    "text": "are doing more advanced customization overlay things and other and other other",
    "start": "689600",
    "end": "695920"
  },
  {
    "text": "benefits that customize can can give people if you choose to use that but also the customization controller is",
    "start": "695920",
    "end": "701440"
  },
  {
    "text": "what's used to ingest plain yaml and reconcile that into your cluster as well",
    "start": "701440",
    "end": "706560"
  },
  {
    "text": "so in this case right kingdom we're using the the customized controller to",
    "start": "706560",
    "end": "713279"
  },
  {
    "text": "to actually bring in the manifests for helm that's right we're installing our helm",
    "start": "713279",
    "end": "720000"
  },
  {
    "text": "release manifests using the customization controller so",
    "start": "720000",
    "end": "725920"
  },
  {
    "text": "our one customization [Music] flex system we're gonna look again and",
    "start": "725920",
    "end": "731760"
  },
  {
    "text": "we're gonna see there are a lot more now hopefully if everything worked okay great uh we got uh a flagger",
    "start": "731760",
    "end": "737920"
  },
  {
    "text": "customization uh customization for secrets we'll get to that in a little bit",
    "start": "737920",
    "end": "744320"
  },
  {
    "text": "and moreover we have flux get helm releases some helm releases that",
    "start": "744320",
    "end": "751920"
  },
  {
    "text": "have been installed or are being installed and so this is",
    "start": "751920",
    "end": "759120"
  },
  {
    "text": "one of the um points of the demo here is to show you can install a bunch of stuff with",
    "start": "759120",
    "end": "765200"
  },
  {
    "text": "just a couple of keystrokes um so granted that's a little bit of an exaggeration here i've done a bunch of",
    "start": "765200",
    "end": "770639"
  },
  {
    "text": "work to prepare this in advance but it's all in git so there's nothing undocumented here or surprising",
    "start": "770639",
    "end": "777600"
  },
  {
    "text": "there should be nothing surprising if you've read the git repo itself which we can start looking at as we move",
    "start": "777600",
    "end": "783920"
  },
  {
    "text": "along but we'll also give you a gist adjust at the end so that you can",
    "start": "783920",
    "end": "789519"
  },
  {
    "text": "do this in okay that's right so excuse me",
    "start": "789519",
    "end": "796320"
  },
  {
    "text": "uh so we have these examples prepared in order uh to talk about them in uh",
    "start": "796320",
    "end": "804320"
  },
  {
    "text": "so first i'm going to show us how we can install caverno that i've already prepared before i talk about why or what it's for",
    "start": "804320",
    "end": "812639"
  },
  {
    "text": "so in the clusters folder here this is",
    "start": "812839",
    "end": "821040"
  },
  {
    "text": "where flux bootstrap does its work i'll show you the flex bootstrap command i would",
    "start": "821040",
    "end": "826839"
  },
  {
    "text": "use here so we give it a path",
    "start": "826839",
    "end": "832000"
  },
  {
    "text": "we tell it to sync a cluster directory this is familiar form that you'll find if you've worked",
    "start": "832000",
    "end": "837440"
  },
  {
    "text": "through the flex getting started guide we tell if we wanted to be a personal repo as opposed to a repo",
    "start": "837440",
    "end": "843839"
  },
  {
    "text": "in some arc that we belong to the owner is me the repository is for this demo and",
    "start": "843839",
    "end": "851040"
  },
  {
    "text": "uh we're installing some extra components uh we we haven't talked about these um",
    "start": "851040",
    "end": "856240"
  },
  {
    "text": "we'll explain what these are for in a moment um",
    "start": "856240",
    "end": "861839"
  },
  {
    "text": "image automation controller and image reflector controller are the extras so we're going to install",
    "start": "861839",
    "end": "868839"
  },
  {
    "text": "caverno i wanted to show you the tree of things that we have here",
    "start": "868839",
    "end": "874959"
  },
  {
    "text": "it's grown a little bit since the last time we recorded the take of this demo i've expanded some things in the caverno",
    "start": "874959",
    "end": "881839"
  },
  {
    "text": "namespace and for the most part these were meant to be individually carbon copies of each other",
    "start": "881839",
    "end": "888160"
  },
  {
    "text": "but what you find as you try to prepare a demo like this is some tools are not really meant to be",
    "start": "888160",
    "end": "894160"
  },
  {
    "text": "installed with film um and and uh what what flex shows um is that you can still use those",
    "start": "894160",
    "end": "900240"
  },
  {
    "text": "things even if your strategy is all get ups uh so so um",
    "start": "900240",
    "end": "906880"
  },
  {
    "text": "the things that uh helm tends to struggle with are crds because everybody has a different",
    "start": "906880",
    "end": "912800"
  },
  {
    "text": "approach on how to install crds and if crds get upgraded the life cycle",
    "start": "912800",
    "end": "918000"
  },
  {
    "text": "gets complicated suffice it to say that if you're using crds in your helm chart",
    "start": "918000",
    "end": "923920"
  },
  {
    "text": "you'll probably find another way that's been provided in the documentation for that tool",
    "start": "923920",
    "end": "931279"
  },
  {
    "text": "so caverno particular we've commented something out",
    "start": "931920",
    "end": "938839"
  },
  {
    "text": "here and kingdom just to be clear in in flux",
    "start": "938839",
    "end": "944160"
  },
  {
    "text": "world uh that's taken care of by my customize and",
    "start": "944160",
    "end": "949279"
  },
  {
    "text": "you can use element customize together in that way yeah and that's what we're doing here we have a customization",
    "start": "949279",
    "end": "955920"
  },
  {
    "text": "that is strictly to install a helm release so if we go to this path",
    "start": "955920",
    "end": "962639"
  },
  {
    "text": "which we've excluded with another file",
    "start": "962639",
    "end": "966639"
  },
  {
    "text": "customization.yaml so we've excluded it by referring to all other files here and",
    "start": "967880",
    "end": "973600"
  },
  {
    "text": "and you can see what i'm talking about we want to install the crds separately from the helm release",
    "start": "973600",
    "end": "980000"
  },
  {
    "text": "because if we don't it will cause problems when we do upgrades um and this this is not exactly the best",
    "start": "980000",
    "end": "985519"
  },
  {
    "text": "way to do it and in the toolkit guide they're uh stronger demonstrations but anyway so",
    "start": "985519",
    "end": "993040"
  },
  {
    "text": "caverno helm release we'll see that file",
    "start": "993040",
    "end": "997120"
  },
  {
    "text": "okay so this this is another flux custom resource um",
    "start": "1003680",
    "end": "1010560"
  },
  {
    "text": "we're defining a helm release uh which if you've used helm this is",
    "start": "1010560",
    "end": "1016800"
  },
  {
    "text": "equivalent um roughly equivalent in get terms to an actual helm release uh it's the",
    "start": "1016800",
    "end": "1024319"
  },
  {
    "text": "declarative form of a helm release says i would like this helm release to be installed in the cluster",
    "start": "1024319",
    "end": "1030240"
  },
  {
    "text": "that's right the imperative version would be helm install uh actually could close the",
    "start": "1030240",
    "end": "1035918"
  },
  {
    "text": "window but any case you know those other values uh the name of the chart um",
    "start": "1035919",
    "end": "1040959"
  },
  {
    "text": "the version etc and all of those all of those parameters that you can generally pass imperatively",
    "start": "1040959",
    "end": "1047199"
  },
  {
    "text": "are are expressed within the custom resource uh the home release",
    "start": "1047199",
    "end": "1053280"
  },
  {
    "text": "custom resource defined by the books",
    "start": "1053280",
    "end": "1056799"
  },
  {
    "text": "no i got a merge conflict",
    "start": "1058799",
    "end": "1067840"
  },
  {
    "text": "oh no blow past it ammo gods you will not win",
    "start": "1068000",
    "end": "1075679"
  },
  {
    "text": "today okay so flux get case is an abbreviation",
    "start": "1075679",
    "end": "1081280"
  },
  {
    "text": "for flux get customizations um i'm not sure there's an equivalent",
    "start": "1081280",
    "end": "1087760"
  },
  {
    "text": "one for helm releases yeah i think it's hr",
    "start": "1087760",
    "end": "1094240"
  },
  {
    "text": "yeah there is okay great thanks so what you notice here is that nothing",
    "start": "1094240",
    "end": "1100240"
  },
  {
    "text": "happened when we did our git push and that's because uh nothing is reconciling our flex",
    "start": "1100240",
    "end": "1105600"
  },
  {
    "text": "system uh where that change was just applied so we're going to reconcile it manually",
    "start": "1105600",
    "end": "1110799"
  },
  {
    "text": "here and and um kingdom just to be clear we",
    "start": "1110799",
    "end": "1116240"
  },
  {
    "text": "if we uh what interval do we have our flux system",
    "start": "1116240",
    "end": "1121360"
  },
  {
    "text": "um automatically reconciling uh sorry",
    "start": "1121360",
    "end": "1126880"
  },
  {
    "text": "what is the configured interval for the flux system automatically reconciling right now yeah the default interval here",
    "start": "1126880",
    "end": "1133760"
  },
  {
    "text": "is uh one minute for the git repository and 10 minutes for the customization itself so if we wait a little while",
    "start": "1133760",
    "end": "1140480"
  },
  {
    "text": "um this will take care of itself but we're doing demo and we'd like this to proceed rapidly so we're going to synchronize it and",
    "start": "1140480",
    "end": "1147360"
  },
  {
    "text": "we're going to use this with source flag to reach through uh this is probably unnecessary at this",
    "start": "1147360",
    "end": "1153760"
  },
  {
    "text": "point because it's already been longer than one minute so the helm uh the git source is already",
    "start": "1153760",
    "end": "1159280"
  },
  {
    "text": "synchronized or it'll synchronize now we'll see status output that indicates",
    "start": "1159280",
    "end": "1164880"
  },
  {
    "text": "what revision is reached and then it's going to reconcile our",
    "start": "1164880",
    "end": "1170720"
  },
  {
    "text": "customization which should in turn reconcile our helm release oh it failed well",
    "start": "1170720",
    "end": "1179120"
  },
  {
    "text": "uh here we go what went wrong let's find out",
    "start": "1179120",
    "end": "1185360"
  },
  {
    "text": "validation error unknown uh field release name and customization",
    "start": "1185360",
    "end": "1190640"
  },
  {
    "text": "spec well that's because that's not a field in customization stick what were you thinking",
    "start": "1190640",
    "end": "1195840"
  },
  {
    "text": "this wasn't uh tested apparently is this uh the right file here",
    "start": "1195840",
    "end": "1202799"
  },
  {
    "text": "this is good to show yeah okay so i put this here because i i uh we'll see why in a second i'm gonna",
    "start": "1204799",
    "end": "1210880"
  },
  {
    "text": "take it out that doesn't belong there",
    "start": "1210880",
    "end": "1216158"
  },
  {
    "text": "and we're going to do the same reconcile uh we're going to take this away in the",
    "start": "1218720",
    "end": "1224320"
  },
  {
    "text": "next step of the demo i just want to do a time check here and see how we're doing um yeah where's our tortoise in here",
    "start": "1224320",
    "end": "1231440"
  },
  {
    "text": "okay we're doing great we're doing great we have lots of time okay okay",
    "start": "1231440",
    "end": "1238799"
  },
  {
    "text": "okay it says that was successfully applied this time",
    "start": "1247039",
    "end": "1251440"
  },
  {
    "text": "uh the dash a is for all namespaces",
    "start": "1253440",
    "end": "1258158"
  },
  {
    "text": "um so we don't see any any new home release yet and that's because",
    "start": "1260840",
    "end": "1267760"
  },
  {
    "text": "we can catch it in time we're still waiting for caverno hr to",
    "start": "1268320",
    "end": "1273679"
  },
  {
    "text": "reconcile we've set it up to wait for flex system to finish so we're just going to poke it because",
    "start": "1273679",
    "end": "1281440"
  },
  {
    "text": "otherwise it will wait another 10 minutes the way we have this set",
    "start": "1281440",
    "end": "1290960"
  },
  {
    "text": "okay let's get helm release all right we see helm controller says reconciliation in",
    "start": "1290960",
    "end": "1296960"
  },
  {
    "text": "progress um i'm going to switch to the default",
    "start": "1296960",
    "end": "1302960"
  },
  {
    "text": "name space here so i can use the helm client uh and you can see that helm itself",
    "start": "1302960",
    "end": "1309679"
  },
  {
    "text": "is aware of these releases um and in a moment it will become aware of caverno when it succeeds hopefully",
    "start": "1309679",
    "end": "1319120"
  },
  {
    "text": "looks like it did nice there's caverno and that's the reason",
    "start": "1319120",
    "end": "1324880"
  },
  {
    "text": "why i put that release name there because i've been trying to clean this up we had a couple of these duplicate things flux will name your",
    "start": "1324880",
    "end": "1333360"
  },
  {
    "text": "helm release um anyway long story short i put i should have put that field release",
    "start": "1333360",
    "end": "1338480"
  },
  {
    "text": "name into the film source got it",
    "start": "1338480",
    "end": "1344799"
  },
  {
    "text": "so next time yeah but it was good it's good to see the debugging that's good that's right okay so uh back up here",
    "start": "1344799",
    "end": "1352720"
  },
  {
    "text": "we've got caverno installed now let's get uh back to the slides so the reason that we",
    "start": "1352720",
    "end": "1359440"
  },
  {
    "text": "install caverno is because you need it to make flux safe for multi-tenancy",
    "start": "1359440",
    "end": "1365120"
  },
  {
    "text": "follow the link um to find out more this is one of the most important guides um now we're going to enable",
    "start": "1365600",
    "end": "1374480"
  },
  {
    "text": "the web hook uh i have a feeling that the tortoise is not really keeping pace uh but uh let's let's keep moving here",
    "start": "1374480",
    "end": "1382960"
  },
  {
    "text": "it looks like it is it's moving now but it seems like it hasn't gone far enough",
    "start": "1383760",
    "end": "1390159"
  },
  {
    "text": "so um i've i've prepared this in a directory called flux resources",
    "start": "1390159",
    "end": "1397280"
  },
  {
    "text": "flex system receiver so this is our our web hook",
    "start": "1397679",
    "end": "1404320"
  },
  {
    "text": "and i need to strip out the comment here",
    "start": "1404480",
    "end": "1409679"
  },
  {
    "text": "so that it can be applied",
    "start": "1409679",
    "end": "1417840"
  },
  {
    "text": "it goes with this notification controller load balancer that we've also provisioned already um",
    "start": "1419039",
    "end": "1427440"
  },
  {
    "text": "and so maybe i can explain this real quick while kingdom's enacting it so the you saw or we explained",
    "start": "1427440",
    "end": "1434799"
  },
  {
    "text": "why kingdom was manually issuing these flux reconcile commands",
    "start": "1434799",
    "end": "1440480"
  },
  {
    "text": "mainly just so that you don't have to wait 10 minutes and our demo can proceed along with a cooking show",
    "start": "1440480",
    "end": "1446080"
  },
  {
    "text": "it's something that you can also do on your own flux your own flux system if you if you want",
    "start": "1446080",
    "end": "1451919"
  },
  {
    "text": "to issue a reconciliation faster than the normal than the normal um excuse me uh interval",
    "start": "1451919",
    "end": "1460159"
  },
  {
    "text": "that you've configured right um one common use case is you want to make that happen every time",
    "start": "1460159",
    "end": "1467440"
  },
  {
    "text": "you push to get um or or your version control whatever right your buckets or whatever they are",
    "start": "1467440",
    "end": "1473039"
  },
  {
    "text": "um you can do that with a web that's that's a really common feature for or um for get workflows i just want to",
    "start": "1473039",
    "end": "1479840"
  },
  {
    "text": "be really clear though that that in itself is not um while it's acceptable",
    "start": "1479840",
    "end": "1485440"
  },
  {
    "text": "to uh add as if to extend what you're doing with githubs that in itself is not get ups that is",
    "start": "1485440",
    "end": "1491200"
  },
  {
    "text": "see get ci ops um the distinguishing feature of githubs",
    "start": "1491200",
    "end": "1496320"
  },
  {
    "text": "not just for flux but for other tools in the in the github ecosystem the wider githubs ecosystem um",
    "start": "1496320",
    "end": "1502159"
  },
  {
    "text": "is that you've got uh automatic reconciliation in a closed loop um based on your own",
    "start": "1502159",
    "end": "1509840"
  },
  {
    "text": "configured interval and rules so if we didn't poke this if we didn't have a web hook it would",
    "start": "1509840",
    "end": "1515279"
  },
  {
    "text": "eventually reconcile itself we just want to speed it along hope that makes sense",
    "start": "1515279",
    "end": "1522559"
  },
  {
    "text": "so we're going to look at our source our git source and the revision is caught up uh if you",
    "start": "1523200",
    "end": "1529760"
  },
  {
    "text": "look at the customization",
    "start": "1529760",
    "end": "1533919"
  },
  {
    "text": "uh it has also cut up um i'm not sure if that's because we got",
    "start": "1534960",
    "end": "1540080"
  },
  {
    "text": "lucky or because our web hook is working um it is called a receiver",
    "start": "1540080",
    "end": "1546559"
  },
  {
    "text": "you can check on the status here it looks like it should be working because uh this hook is the same as the last one",
    "start": "1546559",
    "end": "1554000"
  },
  {
    "text": "i saw so i think that's a hash based on a configured password",
    "start": "1554000",
    "end": "1559120"
  },
  {
    "text": "so from now on we don't have to run flux reconcile if you follow this webhook receivers",
    "start": "1560159",
    "end": "1566480"
  },
  {
    "text": "guide you'll get the same behavior um we looked at these files flex system",
    "start": "1566480",
    "end": "1572080"
  },
  {
    "text": "receiver and webhook lb we're going a little quickly because we have a lot more examples to get through",
    "start": "1572080",
    "end": "1578960"
  },
  {
    "text": "moving on we have the wordpress example",
    "start": "1578960",
    "end": "1585840"
  },
  {
    "text": "yeah where's my blog kingdom yeah so uh we've also skipped over some",
    "start": "1587200",
    "end": "1592960"
  },
  {
    "text": "things there's uh should be yep there's an ingress",
    "start": "1592960",
    "end": "1598960"
  },
  {
    "text": "controller and we have a wordpress installation here as you can see uh so you should be able to see some",
    "start": "1598960",
    "end": "1607200"
  },
  {
    "text": "pods yep looks like there's a mariadb database and the wordpress itself so how can i",
    "start": "1607200",
    "end": "1614960"
  },
  {
    "text": "prove that this is working well if i haven't managed to",
    "start": "1614960",
    "end": "1620480"
  },
  {
    "text": "change the load balancer accidentally since uh i ran this yesterday you should see",
    "start": "1620480",
    "end": "1626400"
  },
  {
    "text": "wordpress is actually responding there uh i'm using a local dns name",
    "start": "1626400",
    "end": "1632240"
  },
  {
    "text": "to skip the dns step altogether i just i just want this to",
    "start": "1632240",
    "end": "1638320"
  },
  {
    "text": "work for the purpose of showing for 10 seconds you're not really going to use wordpress",
    "start": "1638399",
    "end": "1643760"
  },
  {
    "text": "for anything for very long i have to tell it i'm not using",
    "start": "1643760",
    "end": "1652640"
  },
  {
    "text": "https hey it's wordpress oh thank you kingdom i have it set up",
    "start": "1652840",
    "end": "1658880"
  },
  {
    "text": "okay yeah go to your wordpress admin and log in and do all the things that you want to",
    "start": "1658880",
    "end": "1664640"
  },
  {
    "text": "do we're not going to do any of that because we have more examples to get to",
    "start": "1664640",
    "end": "1672080"
  },
  {
    "text": "um yeah so what else can i do with this now that i have this blog",
    "start": "1672080",
    "end": "1682000"
  },
  {
    "text": "well you can do all kinds of things and that's what we're using jenkins for is",
    "start": "1682000",
    "end": "1687760"
  },
  {
    "text": "all kinds of things lord only knows what we're using this for uh maybe you know if you're in the audience everyone knows jenkins",
    "start": "1687760",
    "end": "1694720"
  },
  {
    "text": "it's a it's a big uh mysterious boondoggle who's using it for what we don't know everyone nobody all at the",
    "start": "1694720",
    "end": "1701520"
  },
  {
    "text": "same time we have jenkins installed here too uh",
    "start": "1701520",
    "end": "1706559"
  },
  {
    "text": "we're gonna skip that for uh expedience because we're almost out of time actually the tardis is really not",
    "start": "1706559",
    "end": "1712320"
  },
  {
    "text": "keeping up but we have another application installed here uh that is a terminal we can show this",
    "start": "1712320",
    "end": "1718320"
  },
  {
    "text": "one real quick it's a little bit easier",
    "start": "1718320",
    "end": "1725840"
  },
  {
    "text": "so we've been careful to configure this so that it's not publicly exposed",
    "start": "1728000",
    "end": "1739200"
  },
  {
    "text": "and we want this to run and i'm gonna run it on zero yeah",
    "start": "1739200",
    "end": "1745759"
  },
  {
    "text": "and zero just dynamically if you haven't used that trick it's kind of nice it dynamically assigns um a port",
    "start": "1748559",
    "end": "1755360"
  },
  {
    "text": "or excuse me dynamically assigns uh from the acceptable range yeah we're just using that to make sure",
    "start": "1755360",
    "end": "1760480"
  },
  {
    "text": "that if we um manage to have port 8080 open some other",
    "start": "1760480",
    "end": "1765600"
  },
  {
    "text": "way we're not going to get a conflict",
    "start": "1765600",
    "end": "1769120"
  },
  {
    "text": "oh it's a terminal nice what i have root",
    "start": "1774240",
    "end": "1782880"
  },
  {
    "text": "can do anything i want here this is great okay moving on",
    "start": "1784559",
    "end": "1794559"
  },
  {
    "text": "linker d all right this this is in the list because this is a prerequisite for flagger uh the way that we have",
    "start": "1794559",
    "end": "1800559"
  },
  {
    "text": "configured it um don't really have much time to talk about linker d but linker d is a service",
    "start": "1800559",
    "end": "1807200"
  },
  {
    "text": "mesh that lets you use technologies like flagger that depend on",
    "start": "1807200",
    "end": "1815279"
  },
  {
    "text": "request inspection and other interesting behaviors that you can find",
    "start": "1815279",
    "end": "1821840"
  },
  {
    "text": "i recommend you check this stuff out heavily we will not unfortunately have",
    "start": "1821840",
    "end": "1827039"
  },
  {
    "text": "enough time to demonstrate flagger right now we can't do everything in one demo but",
    "start": "1827039",
    "end": "1832399"
  },
  {
    "text": "there are demos out there there are lots of demos in the flex of the york uh",
    "start": "1832399",
    "end": "1837679"
  },
  {
    "text": "we hope that you will check them out for example the customized helm example",
    "start": "1837679",
    "end": "1843760"
  },
  {
    "text": "which gives more detail about how to use customize and helm together um including how to avoid duplication of",
    "start": "1843760",
    "end": "1851760"
  },
  {
    "text": "resources in your manifest repository when you are working with multiple",
    "start": "1851760",
    "end": "1858720"
  },
  {
    "text": "environments and you want the same software to be installed in multiple environments perhaps with different configurations",
    "start": "1858720",
    "end": "1864720"
  },
  {
    "text": "this example goes into detail about that",
    "start": "1864720",
    "end": "1868799"
  },
  {
    "text": "so we're winding down there is a lot more that we wanted to show you there are some examples",
    "start": "1871120",
    "end": "1877600"
  },
  {
    "text": "that will be included in the gist at the end um secrets management with mozilla sops",
    "start": "1877600",
    "end": "1886399"
  },
  {
    "text": "is a core feature of flux 2 and customized controller we recommend you check that out so you",
    "start": "1886399",
    "end": "1892960"
  },
  {
    "text": "can handle secrets safely that uses gpg or new new encryption",
    "start": "1892960",
    "end": "1898000"
  },
  {
    "text": "types like age",
    "start": "1898000",
    "end": "1900880"
  },
  {
    "text": "we actually might have time for a quick demonstration of some automation",
    "start": "1903679",
    "end": "1908799"
  },
  {
    "text": "um let's do it let's try yeah",
    "start": "1908799",
    "end": "1913679"
  },
  {
    "text": "so in the jenkins helm release we've pinned a particular version here 3.3.0 um we can",
    "start": "1916480",
    "end": "1923560"
  },
  {
    "text": "[Music] insert some directives here i'm not exactly sure of all of the directives",
    "start": "1923560",
    "end": "1930000"
  },
  {
    "text": "that will work you can for example greater than equal to",
    "start": "1930000",
    "end": "1935559"
  },
  {
    "text": "3.3.0 less than 4.0",
    "start": "1935559",
    "end": "1940720"
  },
  {
    "text": "you can yeah so so to be clear uh flux2 and the flex to pump controller",
    "start": "1940720",
    "end": "1947840"
  },
  {
    "text": "specifically um allows sember ranges",
    "start": "1947840",
    "end": "1952960"
  },
  {
    "text": "so if we add this what we should see",
    "start": "1953600",
    "end": "1958000"
  },
  {
    "text": "we look at our helm releases",
    "start": "1958960",
    "end": "1963840"
  },
  {
    "text": "we have jenkins 3.0 3.3.0",
    "start": "1972799",
    "end": "1977840"
  },
  {
    "text": "and upgrade to latest in 3.2.x actually that's",
    "start": "1978000",
    "end": "1985200"
  },
  {
    "text": "that's point x the tilde means uh anything within the",
    "start": "1985200",
    "end": "1992159"
  },
  {
    "text": "same major number uh sorry the tilde is patch number the",
    "start": "1992159",
    "end": "1997519"
  },
  {
    "text": "carrot is anything with the same uh within a different minor number same major number and you can see you",
    "start": "1997519",
    "end": "2005039"
  },
  {
    "text": "can see the rules for that in the mastermind december project all of the yeah",
    "start": "2005039",
    "end": "2011919"
  },
  {
    "text": "the range rules are there that's linkable from the helm",
    "start": "2011919",
    "end": "2019039"
  },
  {
    "text": "so as you can see uh home controller is doing something that's promising",
    "start": "2021760",
    "end": "2033840"
  },
  {
    "text": "looks like our jenkins release has temporarily disappeared",
    "start": "2037840",
    "end": "2042880"
  },
  {
    "text": "while it's reconciling",
    "start": "2044799",
    "end": "2047840"
  },
  {
    "text": "go find out what it's waiting for ah it's an init container well it's doing the work",
    "start": "2052320",
    "end": "2057760"
  },
  {
    "text": "it is upgrading would you mind doing a helmet ls real real fast while you're here just",
    "start": "2057760",
    "end": "2063280"
  },
  {
    "text": "using the helm tool to see what's uh yeah it looks like our helm",
    "start": "2063280",
    "end": "2068878"
  },
  {
    "text": "release is uh vanished temporarily the config map that describes our home",
    "start": "2068879",
    "end": "2074720"
  },
  {
    "text": "release",
    "start": "2074720",
    "end": "2077118"
  },
  {
    "text": "is managed by home controller so we should expect it to put it back",
    "start": "2080240",
    "end": "2086319"
  },
  {
    "text": "yeah i'm not sure what the init container does but it takes a minute uh it also had to connect the persistent",
    "start": "2094960",
    "end": "2101040"
  },
  {
    "text": "volume",
    "start": "2101040",
    "end": "2103839"
  },
  {
    "text": "um there's a lot of stuff in here arcade we",
    "start": "2106079",
    "end": "2111599"
  },
  {
    "text": "use this to get some of the defaults in order um rather than curating our own opinions",
    "start": "2111599",
    "end": "2118400"
  },
  {
    "text": "sometimes we borrow those of others uh for how your package should be configured to work with other packages",
    "start": "2118400",
    "end": "2125200"
  },
  {
    "text": "um cert manager is installed we haven't done anything with it",
    "start": "2125200",
    "end": "2130320"
  },
  {
    "text": "uh multi-tenancy is a very complicated uh area there are many tools out there we",
    "start": "2130320",
    "end": "2136320"
  },
  {
    "text": "recommend you take a look at kiosk for some interesting perspective on how to manage multi-tenancy",
    "start": "2136320",
    "end": "2143839"
  },
  {
    "text": "another subject we had to skip over but all of this we were able to configure uh using helm releases in flux in",
    "start": "2143839",
    "end": "2151359"
  },
  {
    "text": "less than 30 minutes this presentation tool is called revit",
    "start": "2151359",
    "end": "2157839"
  },
  {
    "text": "and here's the bitly link where the instructions will be ready by the time you read this",
    "start": "2157839",
    "end": "2165040"
  },
  {
    "text": "great so uh anything else other than say thank you for our",
    "start": "2166480",
    "end": "2172640"
  },
  {
    "text": "audience for paying close attention uh we hope you join us at the flux pavilion uh yes",
    "start": "2172640",
    "end": "2178560"
  },
  {
    "text": "thank you to the cnn everyone else we'll sit on this side",
    "start": "2178560",
    "end": "2186480"
  },
  {
    "text": "uh we'll be at the flex pavilion after this talk so please come and see us yes we'll see you at the q a too bye",
    "start": "2186480",
    "end": "2195760"
  }
]