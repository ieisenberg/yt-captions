[
  {
    "start": "0",
    "end": "72000"
  },
  {
    "text": "told me that the key to a successful session is quoting Kelsey Hightower",
    "start": "0",
    "end": "6200"
  },
  {
    "text": "usage matures products faster than hype does that's definitely true",
    "start": "7020",
    "end": "13519"
  },
  {
    "text": "one more quote just to be sure this session is a success you haven't mastered the tool until you",
    "start": "14099",
    "end": "20340"
  },
  {
    "text": "understand when it should not be used",
    "start": "20340",
    "end": "24439"
  },
  {
    "text": "last quote for now smart people ask dumb questions luckily",
    "start": "25680",
    "end": "30720"
  },
  {
    "text": "Kelsey said nothing about dumb answers so you're welcome to ask me questions later on Slack",
    "start": "30720",
    "end": "38540"
  },
  {
    "text": "my name is Regina and I am a huge github's fan I am also a cloud platform team leading",
    "start": "39300",
    "end": "45000"
  },
  {
    "text": "Bank of volume ever since I was a little child I was the only female somewhere the only girl",
    "start": "45000",
    "end": "51420"
  },
  {
    "text": "in class one of the few women lecturing in devops areas and lately I have become one of the few female open source",
    "start": "51420",
    "end": "58379"
  },
  {
    "text": "contributors shout out to you ladies to participate as well",
    "start": "58379",
    "end": "65239"
  },
  {
    "text": "me and my husband have two boys which makes me outnumbered in my family as well",
    "start": "65460",
    "end": "72618"
  },
  {
    "start": "72000",
    "end": "72000"
  },
  {
    "text": "this session is about a misconfiguration while working with customize",
    "start": "72900",
    "end": "78479"
  },
  {
    "text": "how many people are watching this session to hear about a problem that happened to someone else",
    "start": "78479",
    "end": "84479"
  },
  {
    "text": "I will tell you about what caused it how we fixed it what we learned from it and how we improved our methodology as a",
    "start": "84479",
    "end": "91439"
  },
  {
    "text": "result I will be focusing on githubs for cluster management especially on",
    "start": "91439",
    "end": "97500"
  },
  {
    "text": "managing Argo City configure with githubs I will not be going it would I will not",
    "start": "97500",
    "end": "103140"
  },
  {
    "text": "be going into githubs for business apps what I will talk about today is from the",
    "start": "103140",
    "end": "108360"
  },
  {
    "text": "perspective of a cluster admin and from the operations perspective with the insights and the methodology are",
    "start": "108360",
    "end": "114420"
  },
  {
    "text": "relevant also for managing business applications configuration",
    "start": "114420",
    "end": "119840"
  },
  {
    "start": "119000",
    "end": "119000"
  },
  {
    "text": "the background github's manage desired state that we have",
    "start": "120299",
    "end": "125820"
  },
  {
    "text": "we manage multiple openshift clusters we have clusters with argocity that",
    "start": "125820",
    "end": "131099"
  },
  {
    "text": "manage other clusters we manage multiple tools products per",
    "start": "131099",
    "end": "136140"
  },
  {
    "text": "cluster and we manage multiple openshift operators per cluster",
    "start": "136140",
    "end": "142980"
  },
  {
    "text": "the tools that we manage some examples are Prometheus grafana Loki vpa the",
    "start": "142980",
    "end": "149340"
  },
  {
    "text": "vertical Port autoscaler litmus some clusters have cross-plane installed some have Argo CD installed and many many",
    "start": "149340",
    "end": "156060"
  },
  {
    "text": "more tools we are interested in configuring the",
    "start": "156060",
    "end": "161819"
  },
  {
    "text": "same product differently per cluster",
    "start": "161819",
    "end": "166640"
  },
  {
    "text": "we're dealing with lots of operative specific configuration",
    "start": "169800",
    "end": "175160"
  },
  {
    "text": "we upgrade those tools frequently and many tools that we managed are",
    "start": "175200",
    "end": "182340"
  },
  {
    "text": "kubernetes plane manifests stand that we manage a lot of stuff a",
    "start": "182340",
    "end": "188099"
  },
  {
    "text": "lot of tools and products and when we talk about githubs the Ripple structure is key",
    "start": "188099",
    "end": "193680"
  },
  {
    "text": "so let's see what was our initial Ripple structure and how it evolved",
    "start": "193680",
    "end": "199760"
  },
  {
    "start": "199000",
    "end": "199000"
  },
  {
    "text": "you see that there are multiple Argo City instances that each manages multiple clusters",
    "start": "201720",
    "end": "208260"
  },
  {
    "text": "more than the two in this chart at the beginning we duplicated that",
    "start": "208260",
    "end": "214019"
  },
  {
    "text": "architecture to our git results meaning we had one repo for the",
    "start": "214019",
    "end": "219120"
  },
  {
    "text": "configuration of Argo CDs and of the Clusters they live in and each such",
    "start": "219120",
    "end": "224220"
  },
  {
    "text": "control plane cluster desired state was in a separate branch and we had another repo for the desired",
    "start": "224220",
    "end": "231180"
  },
  {
    "text": "state of the Clusters Argo city managers also with a branch per cluster",
    "start": "231180",
    "end": "236640"
  },
  {
    "text": "we had a many repo with a many Branch a lot of configurations application",
    "start": "236640",
    "end": "242640"
  },
  {
    "text": "when a new product needed to be added to our desired State people didn't know where to commit it to",
    "start": "242640",
    "end": "248819"
  },
  {
    "text": "this structure was a mess and we decided to move to a monorepo mono branch in",
    "start": "248819",
    "end": "254939"
  },
  {
    "text": "order to avoid the duplication and so that there is one place to look",
    "start": "254939",
    "end": "260100"
  },
  {
    "text": "at to get the picture of the overall desired state",
    "start": "260100",
    "end": "264800"
  },
  {
    "start": "266000",
    "end": "266000"
  },
  {
    "text": "the branch pair cluster or pair environment is an anti-pattern",
    "start": "268320",
    "end": "273840"
  },
  {
    "text": "don't do that never ever you can read more at Costas capilani's",
    "start": "273840",
    "end": "280979"
  },
  {
    "text": "blog",
    "start": "280979",
    "end": "283220"
  },
  {
    "text": "so now we have a mono repo mono Branch for all the Clusters configuration but",
    "start": "287419",
    "end": "294240"
  },
  {
    "text": "you hopefully remember that we need to manage many Products that come as plain",
    "start": "294240",
    "end": "299580"
  },
  {
    "text": "manifests and we are focused on configuring the same products on many clusters differently",
    "start": "299580",
    "end": "305820"
  },
  {
    "text": "one option was to do that with hell so many people have heard of hell and",
    "start": "305820",
    "end": "312000"
  },
  {
    "start": "309000",
    "end": "309000"
  },
  {
    "text": "use it let's recap what hell is how is a kubernetes package manager",
    "start": "312000",
    "end": "318180"
  },
  {
    "text": "it is also a cncf graduated project this means that it is considered to be",
    "start": "318180",
    "end": "323580"
  },
  {
    "text": "stable widely adopted and production ready Helm automates software packages life",
    "start": "323580",
    "end": "330960"
  },
  {
    "text": "cycle such as installing upgrading and removing those packages",
    "start": "330960",
    "end": "336380"
  },
  {
    "text": "it uses a template engine and it enables us sharing and reusing",
    "start": "336960",
    "end": "343139"
  },
  {
    "text": "software packages that are called Helm charts",
    "start": "343139",
    "end": "347720"
  },
  {
    "text": "the chart consists of a template directory a values yaml file with the parameters to be used with the template",
    "start": "351000",
    "end": "357539"
  },
  {
    "text": "and a shared yaml file which describes the chart",
    "start": "357539",
    "end": "362580"
  },
  {
    "text": "the templates are yaml files with go template and template functions",
    "start": "362580",
    "end": "368479"
  },
  {
    "text": "another option offer configuring the same product on many clusters differently was to use",
    "start": "369960",
    "end": "375780"
  },
  {
    "text": "customize I'm sure that many have heard about customize and use it as well",
    "start": "375780",
    "end": "382199"
  },
  {
    "text": "there are people who love customize and there are people who hate customize my husband asked me why is customized",
    "start": "382199",
    "end": "389160"
  },
  {
    "text": "misspelled with a k so let's quickly cover what customize is and what problem does it solve",
    "start": "389160",
    "end": "397759"
  },
  {
    "text": "customize is a native kubernetes configuration management tool",
    "start": "398400",
    "end": "406039"
  },
  {
    "text": "and this is why it is spelled with a K there is a big Community around customize and it is even bundled into",
    "start": "407880",
    "end": "414060"
  },
  {
    "text": "Cube CDL it uses declarative approach to kubernetes configuration",
    "start": "414060",
    "end": "421400"
  },
  {
    "text": "it enables updating configuration without forking by traversing a kubernetes manifest to add remove or",
    "start": "421560",
    "end": "428340"
  },
  {
    "text": "update configuration it uses layering over base settings to",
    "start": "428340",
    "end": "434699"
  },
  {
    "text": "selectively overwrite default settings without changing original files add a voice configuration duplication",
    "start": "434699",
    "end": "442740"
  },
  {
    "text": "it enables writing shared configuration once and then overriding it per cluster of",
    "start": "442740",
    "end": "448860"
  },
  {
    "text": "your environment the camera configuration is referred to",
    "start": "448860",
    "end": "454919"
  },
  {
    "text": "as base and then the overrides of this common configuration are referred to as overlays",
    "start": "454919",
    "end": "461699"
  },
  {
    "text": "overlays are patches to base manifests or additional manifests",
    "start": "461699",
    "end": "467220"
  },
  {
    "text": "the final kubernetes manifests are produced upon running customized builds this command processes the base and",
    "start": "467220",
    "end": "475020"
  },
  {
    "text": "overlay files which are basically fragments of the configuration and produces the final plain kubernetes",
    "start": "475020",
    "end": "481620"
  },
  {
    "text": "manifests why we chose customize",
    "start": "481620",
    "end": "487440"
  },
  {
    "start": "483000",
    "end": "483000"
  },
  {
    "text": "you remember that we managed the configuration of many products of many openshift clusters",
    "start": "487440",
    "end": "493620"
  },
  {
    "text": "many openshift operators we need to be able to upgrade those products frequently",
    "start": "493620",
    "end": "499199"
  },
  {
    "text": "so we do not want to fall behind with old versions we also need to add openshift specific",
    "start": "499199",
    "end": "505379"
  },
  {
    "text": "configuration to many of those products manifest change in those products is",
    "start": "505379",
    "end": "512219"
  },
  {
    "text": "externally driven and frequent as opposed to manifests of self-developed",
    "start": "512219",
    "end": "518760"
  },
  {
    "text": "business apps the change in which is internally driven we are focused on configuring the same",
    "start": "518760",
    "end": "525959"
  },
  {
    "text": "tool all multiple clusters differently",
    "start": "525959",
    "end": "530060"
  },
  {
    "text": "we are not focused on versioned software artifacts in this case",
    "start": "531240",
    "end": "536940"
  },
  {
    "text": "we need a flexible configuration without changing original manifests because if",
    "start": "536940",
    "end": "542040"
  },
  {
    "text": "you've changed the original manifests upgrades to the product would get us to merge hell and would be slow and",
    "start": "542040",
    "end": "549240"
  },
  {
    "text": "error-prone so keeping the original product manifests separate and untouched",
    "start": "549240",
    "end": "554820"
  },
  {
    "text": "is crucial customize provides clear separation",
    "start": "554820",
    "end": "560180"
  },
  {
    "text": "between what is common and what is overriding so the original manifests of",
    "start": "560180",
    "end": "565920"
  },
  {
    "text": "the product naturally fit into customized base and then our configuration changes",
    "start": "565920",
    "end": "571560"
  },
  {
    "text": "naturally fit into customized overlays",
    "start": "571560",
    "end": "576200"
  },
  {
    "text": "wrapping those tools in Helm chart seemed in overhead if we choose Helm we would need to write",
    "start": "578519",
    "end": "585540"
  },
  {
    "text": "the helm templates ourselves for each such product or configuration now you remember that Helm template is a",
    "start": "585540",
    "end": "592380"
  },
  {
    "text": "combination of kubernetes manifest fragments and the old template code so when such tool has a new version that",
    "start": "592380",
    "end": "600660"
  },
  {
    "text": "has changed manifests the merge with our self-grown Helm chart would be time",
    "start": "600660",
    "end": "605760"
  },
  {
    "text": "consuming because with hell we wouldn't be able to avoid changing the original product",
    "start": "605760",
    "end": "611940"
  },
  {
    "text": "manifest the technology we use should be always working for us and not the other way",
    "start": "611940",
    "end": "618959"
  },
  {
    "text": "around and in the case of third-party products and tools that come as plain manifests writing our own Helm chart for",
    "start": "618959",
    "end": "627240"
  },
  {
    "text": "each such tool seemed like working for the technology however using customize for that looks",
    "start": "627240",
    "end": "634260"
  },
  {
    "text": "like the technology is working for us",
    "start": "634260",
    "end": "638180"
  },
  {
    "text": "we have started with Argo CD long before there was a stable Helm chart",
    "start": "640560",
    "end": "646740"
  },
  {
    "text": "migrating to helm chair didn't seem worth the effort until some point in time but we're constantly looking at it",
    "start": "646740",
    "end": "654000"
  },
  {
    "text": "and might migrate in the near future I want to stress that we are only",
    "start": "654000",
    "end": "660240"
  },
  {
    "text": "talking about how we manage play manifests and we manage tools and products that",
    "start": "660240",
    "end": "666240"
  },
  {
    "text": "come as a Helm chart with hell obviously",
    "start": "666240",
    "end": "670820"
  },
  {
    "start": "671000",
    "end": "671000"
  },
  {
    "text": "so now that we have covered why we chose customize let's see how we managed our",
    "start": "672660",
    "end": "678420"
  },
  {
    "text": "Argo City configuration we have argosity running on different",
    "start": "678420",
    "end": "683579"
  },
  {
    "text": "clusters the Arlo City configuration is self-managed by rocd",
    "start": "683579",
    "end": "691820"
  },
  {
    "text": "we managed Argo City config maps with customize there is a part of the article",
    "start": "692940",
    "end": "698820"
  },
  {
    "text": "siliconfig map that is common to all the article cities and there are parts that are relevant for only specific Argo",
    "start": "698820",
    "end": "705600"
  },
  {
    "text": "cities and they are different the config map part that is common to all other cities is in base",
    "start": "705600",
    "end": "713959"
  },
  {
    "text": "and the parts that are specific to each Argo CD are in overlays",
    "start": "714300",
    "end": "721399"
  },
  {
    "text": "this uh is a visualization of the Ripple structure this is the shared part",
    "start": "724800",
    "end": "731880"
  },
  {
    "text": "and those are the specific parts that override the shared one using patch",
    "start": "731880",
    "end": "737339"
  },
  {
    "text": "control planes are clusters where Argo CD is installed",
    "start": "737339",
    "end": "743000"
  },
  {
    "text": "this is Argo silicon figma part in customize space we use openshift routes",
    "start": "744779",
    "end": "752040"
  },
  {
    "text": "and our low CD needs to be instructed about some route fails to be ignored during Tiffin",
    "start": "752040",
    "end": "757560"
  },
  {
    "text": "the reason is that the route host field is automatically populated by openshift",
    "start": "757560",
    "end": "763079"
  },
  {
    "text": "at runtime those details are not significant and what is important is that this ignore",
    "start": "763079",
    "end": "769380"
  },
  {
    "text": "differences section is responsible for the routes to be displayed as synced in Argo City",
    "start": "769380",
    "end": "776639"
  },
  {
    "text": "a spoiler the resource customization section this one is a multi-line yaml",
    "start": "776639",
    "end": "783959"
  },
  {
    "text": "it is important for later",
    "start": "783959",
    "end": "787519"
  },
  {
    "text": "this is the rocd URL is unique to each Argo CD and",
    "start": "789000",
    "end": "795720"
  },
  {
    "text": "so is the Dex config",
    "start": "795720",
    "end": "798980"
  },
  {
    "start": "802000",
    "end": "802000"
  },
  {
    "text": "this file instructs customized to patch the base manifests with the contents of",
    "start": "804480",
    "end": "810060"
  },
  {
    "text": "the overlay manifest using strategic merge there are also other page strategies that can be used",
    "start": "810060",
    "end": "818180"
  },
  {
    "start": "818000",
    "end": "818000"
  },
  {
    "text": "now that you have all the background details I will tell you what happened on November 30.",
    "start": "819620",
    "end": "827120"
  },
  {
    "text": "November 13 is the world kindness day and what better day is there to Break Stuff in production and other",
    "start": "827639",
    "end": "834000"
  },
  {
    "text": "environments",
    "start": "834000",
    "end": "836839"
  },
  {
    "text": "so what happened on 13th of November we received a requirement to implement",
    "start": "839760",
    "end": "845760"
  },
  {
    "text": "an Argo CD custom health check for Ingress their requirement was pretty it was",
    "start": "845760",
    "end": "852540"
  },
  {
    "text": "relevant for a particular Argo CD and so the implementation was to add a",
    "start": "852540",
    "end": "859019"
  },
  {
    "text": "custom health check to the overlay Argo City config map",
    "start": "859019",
    "end": "864680"
  },
  {
    "start": "864000",
    "end": "864000"
  },
  {
    "text": "as you can see the research customization section was added to the overlay with a health section for",
    "start": "867600",
    "end": "874380"
  },
  {
    "text": "Ingress let's look at the base Argo CD config",
    "start": "874380",
    "end": "881100"
  },
  {
    "text": "map again the ones who are experienced with customized can probably spot the problem",
    "start": "881100",
    "end": "887160"
  },
  {
    "text": "the others would have to stay in suspense for a little while",
    "start": "887160",
    "end": "892760"
  },
  {
    "start": "895000",
    "end": "895000"
  },
  {
    "text": "those are the tasks I have done before merging I ran customized build results and",
    "start": "896040",
    "end": "902339"
  },
  {
    "text": "verified that the word Ingress was there I performed the cube CTL dry run and",
    "start": "902339",
    "end": "908519"
  },
  {
    "text": "Argo City Dry Run and I performed a run on a test cluster",
    "start": "908519",
    "end": "913680"
  },
  {
    "text": "all those tests were successful and so I confidently clicked merge after the merge I verified that the",
    "start": "913680",
    "end": "921240"
  },
  {
    "text": "Ingress resource now looked healthy and so the task was done",
    "start": "921240",
    "end": "926720"
  },
  {
    "text": "this is what happened five minutes later",
    "start": "927779",
    "end": "931820"
  },
  {
    "text": "we had a gazillion tickets opened the business app city was failing",
    "start": "935699",
    "end": "942060"
  },
  {
    "text": "most of the apps in order city were out of sync all the route resources in Argo City",
    "start": "942060",
    "end": "947880"
  },
  {
    "text": "were out of sync you remember that we now have a",
    "start": "947880",
    "end": "954360"
  },
  {
    "start": "950000",
    "end": "950000"
  },
  {
    "text": "honorable so the first thing we do when we troubleshoot a problem is looking at the commit history so I looked at the",
    "start": "954360",
    "end": "961500"
  },
  {
    "text": "commit history and surprisingly the last comet was mine now fixing the problem with mono repo is",
    "start": "961500",
    "end": "969360"
  },
  {
    "text": "as easy as reverting the commands",
    "start": "969360",
    "end": "974300"
  },
  {
    "text": "now we will see what the problem was what impact did it have and what did I learn from that",
    "start": "977699",
    "end": "984920"
  },
  {
    "start": "983000",
    "end": "983000"
  },
  {
    "text": "this slide is for those who were in suspense till now on the left there is the expected final",
    "start": "986100",
    "end": "993959"
  },
  {
    "text": "Argo CD manifest and on the right is the actual final Argo City manifest",
    "start": "993959",
    "end": "999660"
  },
  {
    "text": "as you can see the route ignore differences section is gone",
    "start": "999660",
    "end": "1006019"
  },
  {
    "text": "but I didn't delete this section so what happens well the problem",
    "start": "1006019",
    "end": "1012440"
  },
  {
    "text": "was the multi-line yaml this one",
    "start": "1012440",
    "end": "1017620"
  },
  {
    "text": "which got entirely replaced by patching the base with what was in the overlay",
    "start": "1017779",
    "end": "1025179"
  },
  {
    "start": "1025000",
    "end": "1025000"
  },
  {
    "text": "let's see what impact this problem had the actual application deployment was",
    "start": "1026540",
    "end": "1032360"
  },
  {
    "text": "success but the Arkansas",
    "start": "1032360",
    "end": "1037178"
  },
  {
    "text": "now the CD pipeline commits the manifests and waits for Argo CD app to",
    "start": "1037939",
    "end": "1043339"
  },
  {
    "text": "become synced meaning this is synchronous operation this sync state was never reached",
    "start": "1043339",
    "end": "1051740"
  },
  {
    "text": "and so the status of the city pipelines was failed",
    "start": "1051740",
    "end": "1057279"
  },
  {
    "start": "1057000",
    "end": "1057000"
  },
  {
    "text": "first Lesson Learned was about overlaying file contents I'm talking about having a part of a file in base",
    "start": "1058940",
    "end": "1065960"
  },
  {
    "text": "and a part of the file in overlays as opposed to having a copy of the whole",
    "start": "1065960",
    "end": "1072380"
  },
  {
    "text": "file in overlays it requires using patch which is",
    "start": "1072380",
    "end": "1078020"
  },
  {
    "text": "sometimes non-trivial the common use case for that is the",
    "start": "1078020",
    "end": "1083179"
  },
  {
    "text": "deployment image overlay so the question is whether other use",
    "start": "1083179",
    "end": "1088280"
  },
  {
    "text": "cases are a bad practice or a best practice",
    "start": "1088280",
    "end": "1093400"
  },
  {
    "text": "the pros are that it eliminates duplication and it eliminates the a",
    "start": "1101780",
    "end": "1106820"
  },
  {
    "text": "change in one place and I forgot to change in another place problem",
    "start": "1106820",
    "end": "1112240"
  },
  {
    "text": "the cons are that the impact of an overlay change is not obvious",
    "start": "1112760",
    "end": "1118880"
  },
  {
    "text": "so the conclusion is use it with care",
    "start": "1118880",
    "end": "1123100"
  },
  {
    "start": "1123000",
    "end": "1123000"
  },
  {
    "text": "lesson learned number two pension patching multi-line demo multi-line value can be a yaml structure",
    "start": "1125960",
    "end": "1133280"
  },
  {
    "text": "itself but the multi-line value is a string it is not a map",
    "start": "1133280",
    "end": "1140299"
  },
  {
    "text": "and so the so-called keys in the multi-line value are not real keys",
    "start": "1140299",
    "end": "1146600"
  },
  {
    "text": "and so patching such a key in a multi-line value will result in the",
    "start": "1146600",
    "end": "1151760"
  },
  {
    "text": "entire multi-line value being replaced so the conclusion is if multi-line",
    "start": "1151760",
    "end": "1158720"
  },
  {
    "text": "values should be patched consider getting the file out of base and keeping it in overlays in its entirety or use",
    "start": "1158720",
    "end": "1165500"
  },
  {
    "text": "helm lesson learned number three",
    "start": "1165500",
    "end": "1171400"
  },
  {
    "start": "1168000",
    "end": "1168000"
  },
  {
    "text": "understanding the impact of a change",
    "start": "1171400",
    "end": "1175480"
  },
  {
    "text": "so our goal now was to understand how a change in the overlay impacts the",
    "start": "1176419",
    "end": "1181880"
  },
  {
    "text": "overall configuration when Iran cubesatel dry run and Argo City Dry Run",
    "start": "1181880",
    "end": "1186919"
  },
  {
    "text": "I made sure that my change was valid from kubernetes and Argo City point of",
    "start": "1186919",
    "end": "1191960"
  },
  {
    "text": "view that this was not enough",
    "start": "1191960",
    "end": "1195760"
  },
  {
    "text": "the missing part of the puzzle is the diff between the final new and the final",
    "start": "1198980",
    "end": "1204260"
  },
  {
    "text": "existing configuration this is not a diff in a customized file content that I",
    "start": "1204260",
    "end": "1210080"
  },
  {
    "text": "have changed this is a div in the final kubernetes manifests",
    "start": "1210080",
    "end": "1215240"
  },
  {
    "text": "I will explain how we added the missing part soon had I seen this diff in",
    "start": "1215240",
    "end": "1220520"
  },
  {
    "text": "addition to the diff of the file I changed the problem would have probably not happened and I would have been",
    "start": "1220520",
    "end": "1226580"
  },
  {
    "text": "telling you another story today or just going to the beach instead",
    "start": "1226580",
    "end": "1232480"
  },
  {
    "start": "1232000",
    "end": "1232000"
  },
  {
    "text": "lesson learned number four get River projection",
    "start": "1233360",
    "end": "1238059"
  },
  {
    "text": "monorepole the github's desired state of all the cluster we managed is in this",
    "start": "1239600",
    "end": "1244760"
  },
  {
    "text": "repo and this includes monitoring tools cluster configuration storage operators and many many more",
    "start": "1244760",
    "end": "1251720"
  },
  {
    "text": "business apps github's desired state is managed separately and they are out of",
    "start": "1251720",
    "end": "1256760"
  },
  {
    "text": "scope for this session",
    "start": "1256760",
    "end": "1259660"
  },
  {
    "text": "our manoribo is most mostly customized based a change can affect a production cluster",
    "start": "1261919",
    "end": "1268539"
  },
  {
    "text": "a change can affect multiple clusters at once having a monorepo is very convenient for",
    "start": "1268539",
    "end": "1275539"
  },
  {
    "text": "cluster configuration because it enables us using tools like customize to efficiently manage what is common and",
    "start": "1275539",
    "end": "1282799"
  },
  {
    "text": "what is different from multiple clusters changes can be quickly introduced to",
    "start": "1282799",
    "end": "1288140"
  },
  {
    "text": "multiple clusters at once and operation can be lightning fast however breaking multiple clusters at",
    "start": "1288140",
    "end": "1295460"
  },
  {
    "text": "once can be lighting fast as well with great power comes great",
    "start": "1295460",
    "end": "1300559"
  },
  {
    "text": "responsibility so this repo must be protected well",
    "start": "1300559",
    "end": "1306039"
  },
  {
    "text": "so we realized that we needed a merge request approval merge requests is a",
    "start": "1308900",
    "end": "1314900"
  },
  {
    "text": "methodology of gitlab because this is what we use it's basically very similar or identical to pull requests at GitHub",
    "start": "1314900",
    "end": "1324039"
  },
  {
    "text": "we realized that we need automated validation and pre-testing of configuration changes",
    "start": "1325460",
    "end": "1332059"
  },
  {
    "text": "now merge request approvals and automatic tests sound familiar right",
    "start": "1332059",
    "end": "1337700"
  },
  {
    "text": "this is what people do for business application development NCI well managing kubernetes infrastructure",
    "start": "1337700",
    "end": "1344960"
  },
  {
    "text": "and operations has to follow the same path maybe even more strictly",
    "start": "1344960",
    "end": "1350240"
  },
  {
    "text": "especially in a world of kubernetes is a control plane for everything because then you end up managing not only the",
    "start": "1350240",
    "end": "1357500"
  },
  {
    "text": "cluster as the cluster but many other remote resources as well the same concepts of working with gitlab",
    "start": "1357500",
    "end": "1366140"
  },
  {
    "text": "GitHub issues merge requests Branch methodology CI tests apply here as well",
    "start": "1366140",
    "end": "1372320"
  },
  {
    "text": "just like our code needs to be tested properly and sometimes reviewed our",
    "start": "1372320",
    "end": "1377360"
  },
  {
    "text": "configuration also needs to be tested thoroughly and sometimes reviewed",
    "start": "1377360",
    "end": "1384039"
  },
  {
    "text": "the Hightower ipross automation is the serialization of understanding",
    "start": "1386659",
    "end": "1392360"
  },
  {
    "text": "so let's take a look at how this we serialized the insights from that incident",
    "start": "1392360",
    "end": "1398419"
  },
  {
    "text": "with regard to git Ripple protection combined with understanding the effect of a change in customized configuration",
    "start": "1398419",
    "end": "1407860"
  },
  {
    "start": "1408000",
    "end": "1408000"
  },
  {
    "text": "here are the steps in our pipeline Cube CTL dry run",
    "start": "1409159",
    "end": "1415460"
  },
  {
    "text": "Argo City Dry Run changes in base now require an approval",
    "start": "1415460",
    "end": "1421580"
  },
  {
    "text": "before merge changes in control plane cluster overlay also require an approval before merge",
    "start": "1421580",
    "end": "1430940"
  },
  {
    "text": "changes in critical cluster overlays acquire approval before merge as well",
    "start": "1430940",
    "end": "1439000"
  },
  {
    "text": "other changes are Auto approved as they are considered non-critical",
    "start": "1439820",
    "end": "1446179"
  },
  {
    "text": "regarding the emerge request approvals they will never replace automatic tests but having a review from a colleague is",
    "start": "1446840",
    "end": "1454100"
  },
  {
    "text": "a great way to spot problems otherwise overlooked unfortunately waiting for review is also",
    "start": "1454100",
    "end": "1460940"
  },
  {
    "text": "a great way to slow down or even block operations so we choose something in the middle",
    "start": "1460940",
    "end": "1469039"
  },
  {
    "text": "white scope changes like touching customized base and changes to critical clusters require a second I while",
    "start": "1469039",
    "end": "1476600"
  },
  {
    "text": "changes on a playground cluster can happen without waiting for anyone and",
    "start": "1476600",
    "end": "1481700"
  },
  {
    "text": "can be just merged this is an example of a critical cluster",
    "start": "1481700",
    "end": "1489679"
  },
  {
    "start": "1485000",
    "end": "1485000"
  },
  {
    "text": "change merge requests you can see the comment that was automatically added by",
    "start": "1489679",
    "end": "1495200"
  },
  {
    "text": "the merge request pipeline saying that a critical cluster overlay was changed and that a human approval is required",
    "start": "1495200",
    "end": "1504039"
  },
  {
    "start": "1510000",
    "end": "1510000"
  },
  {
    "text": "this is an example of a customized base change merge request you can see the comment that was automatically added by",
    "start": "1511220",
    "end": "1518059"
  },
  {
    "text": "the merge request pipeline saying that base was changed and that a human approval is required",
    "start": "1518059",
    "end": "1526659"
  },
  {
    "text": "however this merge request has no wide scope changes or changes to a critical",
    "start": "1530240",
    "end": "1535820"
  },
  {
    "text": "cluster and so it was automatically approved by the merge request pipeline",
    "start": "1535820",
    "end": "1541580"
  },
  {
    "text": "it can now be merged by the author of that merger Quest",
    "start": "1541580",
    "end": "1546880"
  },
  {
    "text": "but wait what about the impacts of a change in customize",
    "start": "1552260",
    "end": "1557419"
  },
  {
    "text": "this pipeline is not complete without handling this impact do you remember customized build I mentioned earlier",
    "start": "1557419",
    "end": "1565039"
  },
  {
    "text": "customized build produces the final manifests",
    "start": "1565039",
    "end": "1569679"
  },
  {
    "text": "if only we could see the diff of the result of customized build using the",
    "start": "1573380",
    "end": "1579200"
  },
  {
    "text": "changes section of the merger Quest",
    "start": "1579200",
    "end": "1583840"
  },
  {
    "text": "so the solution was to commit the customized build result file along with",
    "start": "1585320",
    "end": "1591620"
  },
  {
    "text": "the changes themselves so the merge request pipeline requires",
    "start": "1591620",
    "end": "1596900"
  },
  {
    "text": "the up-to-date customized build result file to be committed along with the changes",
    "start": "1596900",
    "end": "1604059"
  },
  {
    "text": "this is an example of a failed merger request pipeline now look at the comments on the merge request that was",
    "start": "1605539",
    "end": "1612080"
  },
  {
    "text": "created automatically you have changed customized configuration without committing the",
    "start": "1612080",
    "end": "1617539"
  },
  {
    "text": "customized build results the impact of your change is not determinable",
    "start": "1617539",
    "end": "1624320"
  },
  {
    "start": "1626000",
    "end": "1626000"
  },
  {
    "text": "this is a visualization of the implementation the is a familiar",
    "start": "1627200",
    "end": "1632720"
  },
  {
    "text": "merge request changes View you can see the small green parts",
    "start": "1632720",
    "end": "1638120"
  },
  {
    "text": "that was added and then the huge red part which got overwritten and now the",
    "start": "1638120",
    "end": "1643460"
  },
  {
    "text": "impact is clear a change similar to what I have performed on November 13 must not",
    "start": "1643460",
    "end": "1649580"
  },
  {
    "text": "have been merged the aftermath",
    "start": "1649580",
    "end": "1656980"
  },
  {
    "start": "1653000",
    "end": "1653000"
  },
  {
    "text": "the impact of A Change Is Now visibly is now visible and easily comparable using",
    "start": "1657020",
    "end": "1662659"
  },
  {
    "text": "the standard the standard merge request diff mechanism basically now after all the tests in the",
    "start": "1662659",
    "end": "1670279"
  },
  {
    "text": "merger Quest pipeline have passed I can also see what exactly I'm about to change and I can make a decision whether",
    "start": "1670279",
    "end": "1678020"
  },
  {
    "text": "this is what was intended or a mistake and then depending on the scope of my",
    "start": "1678020",
    "end": "1684980"
  },
  {
    "text": "change whether it affects multiple cluster or a critical cluster or just a playground cluster nobody cares about I",
    "start": "1684980",
    "end": "1692240"
  },
  {
    "text": "will either be able to merge immediately or be able to merge only after an",
    "start": "1692240",
    "end": "1697760"
  },
  {
    "text": "approving review of a colleague the overall Ripple protection is improved",
    "start": "1697760",
    "end": "1705220"
  },
  {
    "text": "Helm is a template engine and a package manager is constructing kubernetes manifest from fragments of configuration",
    "start": "1708020",
    "end": "1715240"
  },
  {
    "text": "code and value files and understanding the impact of a change",
    "start": "1715240",
    "end": "1720380"
  },
  {
    "text": "in any of those can be equally challenging and is equally important it can follow the same methodology I",
    "start": "1720380",
    "end": "1727460"
  },
  {
    "text": "have described earlier you can read more in Costa's capilani's",
    "start": "1727460",
    "end": "1733159"
  },
  {
    "text": "blog there are additional aspects covered in that article",
    "start": "1733159",
    "end": "1739120"
  },
  {
    "start": "1740000",
    "end": "1740000"
  },
  {
    "text": "to those who survived this far understanding the impacts of a",
    "start": "1740840",
    "end": "1747140"
  },
  {
    "text": "configuration change is important configuration testing is just as",
    "start": "1747140",
    "end": "1752539"
  },
  {
    "text": "important as code testing merge request pipelines for configuration are just as relevant as",
    "start": "1752539",
    "end": "1760039"
  },
  {
    "text": "merger with pipelines for code",
    "start": "1760039",
    "end": "1763720"
  },
  {
    "text": "choose the right tool for the job is important the technology must work for us and not",
    "start": "1765260",
    "end": "1772940"
  },
  {
    "text": "vice versa don't be afraid of making mistakes",
    "start": "1772940",
    "end": "1781600"
  },
  {
    "text": "I want to dedicate this slide to my kids they attended my session when I gave the",
    "start": "1785059",
    "end": "1791299"
  },
  {
    "text": "stock live on Cube day they are 9 and 11 years old and they do",
    "start": "1791299",
    "end": "1797179"
  },
  {
    "text": "not know what kubernetes or githubs is yet so I added QR codes of jokes riddles and",
    "start": "1797179",
    "end": "1804140"
  },
  {
    "text": "Dr Seuss wisdom in some of the slides of my live session just for them",
    "start": "1804140",
    "end": "1810399"
  },
  {
    "text": "we are hiring so if you want to come and break more stuff with us learn from that",
    "start": "1813200",
    "end": "1819080"
  },
  {
    "text": "and then improve what we're doing please contact me on LinkedIn or on cncf slack",
    "start": "1819080",
    "end": "1824840"
  },
  {
    "text": "workspace thank you so much",
    "start": "1824840",
    "end": "1832840"
  }
]