[
  {
    "text": "all right hello everybody uh welcome hope you enjoyed the the Keynotes today",
    "start": "919",
    "end": "6160"
  },
  {
    "text": "uh my name is John bam and uh from Google and here my uh co-speaker Yang",
    "start": "6160",
    "end": "13040"
  },
  {
    "text": "Tang from ianti um thanks for joining us today talk about CNS a little bit",
    "start": "13040",
    "end": "19760"
  },
  {
    "text": "um so uh the first uh bit of this we'll talk just kind of an update on the cords",
    "start": "19760",
    "end": "27119"
  },
  {
    "text": "project and a little bit of an overview and then we Yang will drill in a little bit on uh what it takes to develop a",
    "start": "27119",
    "end": "35239"
  },
  {
    "text": "core DNS plugin which is actually really really easy",
    "start": "35239",
    "end": "40800"
  },
  {
    "text": "um and then we'll we'll have time for some Q&A",
    "start": "40800",
    "end": "45680"
  },
  {
    "text": "probably so most of you use kubernetes I assume",
    "start": "46079",
    "end": "51239"
  },
  {
    "text": "uh which means you're probably using CNS whether you know it or not uh most kubernetes clusters out there uh use CNS",
    "start": "51239",
    "end": "59960"
  },
  {
    "text": "is their in-cluster DNS for service resolution but um in fact CNS is an",
    "start": "59960",
    "end": "66159"
  },
  {
    "text": "independent project with a uh uses outside of kubernetes and it kind of",
    "start": "66159",
    "end": "72880"
  },
  {
    "text": "grew up uh alongside kubernetes for the most part uh and was built to provide an",
    "start": "72880",
    "end": "80880"
  },
  {
    "text": "alternative to the traditional DNS server so if you look at something like bind uh it's you know it's a very",
    "start": "80880",
    "end": "87840"
  },
  {
    "text": "venerable code base uh quite difficult to extend um quite difficult to kind of",
    "start": "87840",
    "end": "94399"
  },
  {
    "text": "manage in a cloud native way and so cords was built to start to",
    "start": "94399",
    "end": "102680"
  },
  {
    "text": "um to to provide a DNS server that one was written in a sort of a modern",
    "start": "102720",
    "end": "107840"
  },
  {
    "text": "language that was memory safe so it's written in go uh but also because there lot of bind vulnerabilities uh came out",
    "start": "107840",
    "end": "114439"
  },
  {
    "text": "of just being in SE um a and to be able",
    "start": "114439",
    "end": "120159"
  },
  {
    "text": "to be uh evolved quickly and to be able to add functionality quickly to be able to kind of adapt to the rapidly changing",
    "start": "120159",
    "end": "127280"
  },
  {
    "text": "Cloud native environment that we saw happening uh a few years back uh as in the growth of containerized services so",
    "start": "127280",
    "end": "135599"
  },
  {
    "text": "cord started with a focus on service Discovery um but kind of the most",
    "start": "135599",
    "end": "140879"
  },
  {
    "text": "important part in my mind to it is this what we call a pluggin based architecture um and it's",
    "start": "140879",
    "end": "148840"
  },
  {
    "text": "a different than most DNS servers it's a sort of request handling",
    "start": "148840",
    "end": "154519"
  },
  {
    "text": "process so the individual DNS requests come in and we feed them through a",
    "start": "154519",
    "end": "159800"
  },
  {
    "text": "series of pip sort of pipeline of of plugins and those plugins can make decisions and we can compose the plugins",
    "start": "159800",
    "end": "166840"
  },
  {
    "text": "and the the configuration of those plugins to really do some interesting things uh with the DNS",
    "start": "166840",
    "end": "173640"
  },
  {
    "text": "requests uh we do have quite a few contributors uh nearly 400 now and you",
    "start": "174560",
    "end": "181519"
  },
  {
    "text": "know a lot of growth in the project uh part of cncf process is this idea of a",
    "start": "181519",
    "end": "187799"
  },
  {
    "text": "public contributors file so we don't Mo there's many many more or a public adopter file rather so we've got 35",
    "start": "187799",
    "end": "193400"
  },
  {
    "text": "people 35 companies who've said they they're using CNS in some way or another but really it's it's in the thousands uh",
    "start": "193400",
    "end": "200920"
  },
  {
    "text": "or more because uh like I said anybody using EK or AKs um or I'm from Google",
    "start": "200920",
    "end": "207080"
  },
  {
    "text": "but actually GK not uh not the C GK we don't use CNS but we do for our um our",
    "start": "207080",
    "end": "213480"
  },
  {
    "text": "on- Prem and bare metal uh offerings we we use CNS so um really the vast",
    "start": "213480",
    "end": "219080"
  },
  {
    "text": "majority of people using kubernetes out there uh are using uh CNS in some way or",
    "start": "219080",
    "end": "224280"
  },
  {
    "text": "another we did um in the last year or two shift from a uh benevolent dictator",
    "start": "224280",
    "end": "231360"
  },
  {
    "text": "for Life governance model to a steering committee um so now we have uh I think",
    "start": "231360",
    "end": "238280"
  },
  {
    "text": "five people on the steering committee both of both of us are on the steering committee but uh it's a pretty low drama",
    "start": "238280",
    "end": "243640"
  },
  {
    "text": "project so not much happens in the steering committee but uh uh if anybody's interested in you know jumping",
    "start": "243640",
    "end": "250239"
  },
  {
    "text": "in and participating in in cordian us we'd love to have you very um friendly welcoming Place uh and and",
    "start": "250239",
    "end": "258359"
  },
  {
    "text": "um we we'd love to love to see you there since the last uh ccot EU um this is",
    "start": "258359",
    "end": "266240"
  },
  {
    "text": "some of the new functionality that's been added so uh a new plugin for dealing with the",
    "start": "266240",
    "end": "273479"
  },
  {
    "text": "configuration of listener timeouts which we're just using the defaults before um and a bunch of new features on",
    "start": "273479",
    "end": "279199"
  },
  {
    "text": "individual plugins we had a release our most recent uh release was in uh August",
    "start": "279199",
    "end": "286800"
  },
  {
    "text": "but we should be having I think a new release in particular with the new using built with a newer version of go coming",
    "start": "286800",
    "end": "292560"
  },
  {
    "text": "out pretty soon um like I said uh CNS is really",
    "start": "292560",
    "end": "302360"
  },
  {
    "text": "originally targeted around service Discovery and what we'll show you in a moment is just an example use case of",
    "start": "302360",
    "end": "308800"
  },
  {
    "text": "how you can use C DNS outside of kubernetes as a uh you know DNS server",
    "start": "308800",
    "end": "316039"
  },
  {
    "text": "that can be backed by multiple different data sources rather than you know typical DNS server which is backed Say",
    "start": "316039",
    "end": "322360"
  },
  {
    "text": "Say by bind or um maybe just serves data for your kubernetes cluster you can",
    "start": "322360",
    "end": "328680"
  },
  {
    "text": "actually take NS out separately and configure it to do uh to do additional",
    "start": "328680",
    "end": "336080"
  },
  {
    "text": "things um so what uh the the example core file so",
    "start": "337520",
    "end": "345360"
  },
  {
    "text": "I guess I didn't give that much background so cordion s is you know as a process is configured by something we",
    "start": "345360",
    "end": "351280"
  },
  {
    "text": "call a core file not a core dump it's a different thing and it's just a very simple file uh that allows you to",
    "start": "351280",
    "end": "358319"
  },
  {
    "text": "specify for any given Zone what are the plugins that are active for that zone and what are the plugins that",
    "start": "358319",
    "end": "365000"
  },
  {
    "text": "are then um uh what what data sources are used for",
    "start": "365000",
    "end": "370479"
  },
  {
    "text": "that for those to serve up the data for that zone",
    "start": "370479",
    "end": "375759"
  },
  {
    "text": "and one of the interesting things I think in in CNS is that a single zone",
    "start": "375759",
    "end": "381319"
  },
  {
    "text": "can actually be divided among different data sources so you can sort of create a hierarchy of of your records that are",
    "start": "381319",
    "end": "388880"
  },
  {
    "text": "served for your different zones uh where you'd say I'm going to allow the I'm",
    "start": "388880",
    "end": "395360"
  },
  {
    "text": "going to allow you to override say directly in the core file a few a records for for this Zone but if you",
    "start": "395360",
    "end": "402319"
  },
  {
    "text": "don't find it in that list for like a host file type of list you can consult your kubernetes cluster if you don't",
    "start": "402319",
    "end": "407960"
  },
  {
    "text": "find it there you can consult a file or something like that so there's a sort of allows you to construct a single DNS",
    "start": "407960",
    "end": "415199"
  },
  {
    "text": "Zone from a composition of different data sources and in this example that we",
    "start": "415199",
    "end": "420919"
  },
  {
    "text": "have here what we've done is uh allowed you to compose a Zone from that that's",
    "start": "420919",
    "end": "428199"
  },
  {
    "text": "backed by your three different uh clouds so or I guess we have two here AWS and",
    "start": "428199",
    "end": "434080"
  },
  {
    "text": "Google Cloud DNS so essentially this allows a single zone to be served up in",
    "start": "434080",
    "end": "440120"
  },
  {
    "text": "part by AWS uh backed by the AWS API and in part backed up by the Google Cloud",
    "start": "440120",
    "end": "447879"
  },
  {
    "text": "API of services that are out there and in part backed up by a local local data source this who am I plug",
    "start": "447879",
    "end": "455120"
  },
  {
    "text": "in and honestly that's all there is to it it's not much to say uh this is what",
    "start": "456960",
    "end": "463639"
  },
  {
    "text": "this is an example core file we can digest this a little bit starts withon",
    "start": "463639",
    "end": "469120"
  },
  {
    "text": "53 so the dot just means root zone right any any query coming in for any Zone",
    "start": "469120",
    "end": "476800"
  },
  {
    "text": "will be processed by this block of uh of plugins um the first one processed is",
    "start": "476800",
    "end": "484400"
  },
  {
    "text": "Route 53 so what's happening here the the if we go back to this this diagram cordion S as a process is sitting there",
    "start": "484400",
    "end": "491720"
  },
  {
    "text": "you're configured with the Route 53 plugin so what you do is uh you actually take your AWS credentials and you",
    "start": "491720",
    "end": "497960"
  },
  {
    "text": "connect to the AWS API and you load the data from there and you use that to uh",
    "start": "497960",
    "end": "505879"
  },
  {
    "text": "synthesize the records for the Zone similarly for uh Cloud DNS this uh",
    "start": "505879",
    "end": "512919"
  },
  {
    "text": "connects back to Google Cloud brings in the the or synthesizes the record based on",
    "start": "512919",
    "end": "519800"
  },
  {
    "text": "the API data available in Google cloud and the fall through statement on here",
    "start": "519800",
    "end": "525120"
  },
  {
    "text": "basically says that we can um if we don't find an answer in this in that",
    "start": "525120",
    "end": "531720"
  },
  {
    "text": "data source fall through to the next data source so that's why it goes from Route 53 to Cloud DNS which then",
    "start": "531720",
    "end": "537600"
  },
  {
    "text": "eventually falls through to this just sort of plugin that returns an answer for everything um so that's really all",
    "start": "537600",
    "end": "544880"
  },
  {
    "text": "you need to configure this it's a really very simple simple process",
    "start": "544880",
    "end": "550000"
  },
  {
    "text": "um the the functionality and I don't know if we have a slide here Yang on the um no the the the functionality",
    "start": "550000",
    "end": "559360"
  },
  {
    "text": "available there's many plugins available and we tend to divide it into three different uh categories so there's",
    "start": "559360",
    "end": "565640"
  },
  {
    "text": "plugins that allow you to configure cords like the bind plugin which allows you to tell you which uh interface to",
    "start": "565640",
    "end": "571959"
  },
  {
    "text": "bind to there's plugins that provide different data sources so like I said the different Cloud uh vendors um a file",
    "start": "571959",
    "end": "579959"
  },
  {
    "text": "or a kubernetes cluster or even multiple kubernetes clusters can be can be used to back data for for zones or a database",
    "start": "579959",
    "end": "586839"
  },
  {
    "text": "um and each of these plugins uh you know if you have your own data source you may",
    "start": "586839",
    "end": "593079"
  },
  {
    "text": "decide that you want to be able to serve up data from that data source say an internal uh cmdb or something that",
    "start": "593079",
    "end": "600120"
  },
  {
    "text": "manages your services and what Yang is going to cover in a moment is how easy",
    "start": "600120",
    "end": "605279"
  },
  {
    "text": "it is to actually extend uh CNS to to do that kind of um",
    "start": "605279",
    "end": "611560"
  },
  {
    "text": "um at at a at a data source the Third Kind of",
    "start": "611560",
    "end": "616800"
  },
  {
    "text": "um plugin that we have is what we would call sort of data manipulation plugin so",
    "start": "616800",
    "end": "621920"
  },
  {
    "text": "here you can um you can use policies to block particular queries you can add",
    "start": "621920",
    "end": "628839"
  },
  {
    "text": "metadata data to a request and then you can alter the request based upon the content contents of that metadata so uh",
    "start": "628839",
    "end": "636200"
  },
  {
    "text": "we have another talk tomorrow where what we'll look at is uh in a kubernetes cluster you could actually configure the",
    "start": "636200",
    "end": "642639"
  },
  {
    "text": "kubernetes plug-in to append client data information so if a pod makes a query to",
    "start": "642639",
    "end": "648760"
  },
  {
    "text": "your cdns server uh within your cord DNS plug-in pipeline you'll be able to see",
    "start": "648760",
    "end": "655560"
  },
  {
    "text": "the the name space of that client pod and then can make a policy decision on",
    "start": "655560",
    "end": "661160"
  },
  {
    "text": "that and say hey this this client uh uh pod from this particular namespace is",
    "start": "661160",
    "end": "667720"
  },
  {
    "text": "trying to access a service in a different name space and I'm going to disallow that so that's the kind of",
    "start": "667720",
    "end": "673360"
  },
  {
    "text": "functionality you can do with these plugins and with the kind of infrastructure uh that's really would be",
    "start": "673360",
    "end": "679720"
  },
  {
    "text": "extremely challenging to do in any other uh DNS server with that um do you want to jump",
    "start": "679720",
    "end": "686800"
  },
  {
    "text": "in on the demo piece okay SS okay so first of all you know",
    "start": "686800",
    "end": "692839"
  },
  {
    "text": "like uh John just mentioned that uh if we are going to combine different",
    "start": "692839",
    "end": "697920"
  },
  {
    "text": "sources of DNS information from different sources like from cloud windows from let's say your local DNS uh",
    "start": "697920",
    "end": "704279"
  },
  {
    "text": "zones or from your local data servers you can combine them into one and that's the data consolidation process and why",
    "start": "704279",
    "end": "712000"
  },
  {
    "text": "you need that is because sometime you may want to have a let's go back you may want to have a so-called single source",
    "start": "712000",
    "end": "718320"
  },
  {
    "text": "of truths let's say you have DN server all the place because your it infrastructure had DN server your Cloud",
    "start": "718320",
    "end": "724680"
  },
  {
    "text": "vendor had DN server you have some Co clusters on AWS uh you have some let's",
    "start": "724680",
    "end": "730040"
  },
  {
    "text": "say uh uh database services on let's say on aure or maybe on Google cloud and",
    "start": "730040",
    "end": "736320"
  },
  {
    "text": "then you have your vpns with some like a corporate uh internal it stuff all those",
    "start": "736320",
    "end": "742199"
  },
  {
    "text": "things you can Consolidated into one and in this case the cing as is supposed to",
    "start": "742199",
    "end": "747720"
  },
  {
    "text": "be just uh what let say a front end of all the source of information you can",
    "start": "747720",
    "end": "753320"
  },
  {
    "text": "have one place to control the information uh you make sure there's no Collis if there a Collis qu will sort",
    "start": "753320",
    "end": "760720"
  },
  {
    "text": "out like you can you can go through the order of different uh information so you",
    "start": "760720",
    "end": "766079"
  },
  {
    "text": "can decide which information will be exposed first if the information is not available you move to the next plugin",
    "start": "766079",
    "end": "772560"
  },
  {
    "text": "and maybe you'll search for the next Source let's say uh Google cloud or AWS to find out that's that's one process of",
    "start": "772560",
    "end": "780160"
  },
  {
    "text": "consolidation but now here I'm going to share another example of",
    "start": "780160",
    "end": "786079"
  },
  {
    "text": "say you have the same uh DS",
    "start": "786079",
    "end": "792040"
  },
  {
    "text": "record and uh you want to adjust your response based on the the the request so",
    "start": "792040",
    "end": "801199"
  },
  {
    "text": "what does that mean is it's a source IP based service Discovery uh let's just",
    "start": "801199",
    "end": "806519"
  },
  {
    "text": "hypothetically say you maintain a let's say a uh DS server and uh this DS server",
    "start": "806519",
    "end": "814160"
  },
  {
    "text": "is located in your uh company VPN but of course your company may not just have a",
    "start": "814160",
    "end": "819880"
  },
  {
    "text": "vpns right your company may have some external information your company may also have some like a tester workload",
    "start": "819880",
    "end": "826920"
  },
  {
    "text": "and uh sometimes uh when you're doing test uh when you're doing testing of your companies let's say your company",
    "start": "826920",
    "end": "833079"
  },
  {
    "text": "have a app uh development you may want to manipulate in DNS to configure conf",
    "start": "833079",
    "end": "839120"
  },
  {
    "text": "big additional stuff so that let's say uh a city tester can potentially get a",
    "start": "839120",
    "end": "845160"
  },
  {
    "text": "different DS record based on which network it is in right so that's that's",
    "start": "845160",
    "end": "850800"
  },
  {
    "text": "very common practice but then you're going to ask a question how do I written",
    "start": "850800",
    "end": "856079"
  },
  {
    "text": "a different different response if I only know the source IP of the",
    "start": "856079",
    "end": "863639"
  },
  {
    "text": "request right so there is the easy way to do that of course you're going to say is there any existing plugin available",
    "start": "863639",
    "end": "871279"
  },
  {
    "text": "in cods so that I can utilize the you know qu file to manipulating different plugins and get the",
    "start": "871279",
    "end": "877560"
  },
  {
    "text": "information uh there's no such thing uh unfortunately because the there there",
    "start": "877560",
    "end": "883959"
  },
  {
    "text": "was some pretty know pretty extensive discussion in the past about you should we set up certain let's say Source IP",
    "start": "883959",
    "end": "890839"
  },
  {
    "text": "based uh service Discovery plugins and the conclusion was that the source based",
    "start": "890839",
    "end": "896639"
  },
  {
    "text": "service Discovery is fairly easy however to sort out different uh different use",
    "start": "896639",
    "end": "903720"
  },
  {
    "text": "cases by different users it's a hard process because we had to make sure if we going to uh write a plugin we have to",
    "start": "903720",
    "end": "910079"
  },
  {
    "text": "make sure it can fit in all different scenario unfortunately all the scenario look like to be totally different some",
    "start": "910079",
    "end": "916040"
  },
  {
    "text": "people may have one request some people have another request sometimes they say they want the source IP to be based on",
    "start": "916040",
    "end": "922399"
  },
  {
    "text": "side the block sometimes they say they want the source IP to be to be you know like a single standard long Source IP or",
    "start": "922399",
    "end": "928720"
  },
  {
    "text": "sometimes they say okay so they have some additional filtering rules to decide how they're going to do the",
    "start": "928720",
    "end": "934440"
  },
  {
    "text": "source IP based Discovery So eventually we say okay so maybe we can we we'll ask",
    "start": "934440",
    "end": "939959"
  },
  {
    "text": "about the source IP based Discovery plugin for many years eventually we just",
    "start": "939959",
    "end": "945000"
  },
  {
    "text": "okay so maybe we can just write a simple plugin as a demo plugin to let people",
    "start": "945000",
    "end": "950079"
  },
  {
    "text": "see how this can be done unfortunately this is is super easy I I'll just show",
    "start": "950079",
    "end": "955639"
  },
  {
    "text": "with let's the total of let's say lines of go Goan code and you can get job done",
    "start": "955639",
    "end": "962480"
  },
  {
    "text": "and this is actually going to be a lot of fun experience right I mean you can actually learn little Goan you can build",
    "start": "962480",
    "end": "968199"
  },
  {
    "text": "a plugin with codings and you can get uh get through all the necessary",
    "start": "968199",
    "end": "973959"
  },
  {
    "text": "customizations as you need need and uh fit your scenario right so let's let's",
    "start": "973959",
    "end": "980480"
  },
  {
    "text": "just give example of how exactly this temp plugin is going to work so as as this uh as this slide shows the them",
    "start": "980480",
    "end": "988480"
  },
  {
    "text": "plugin uh is the source IP based service Discovery uh let's say you your assist",
    "start": "988480",
    "end": "996199"
  },
  {
    "text": "admin or let's it admin and you'll just decided to say okay",
    "start": "996199",
    "end": "1001880"
  },
  {
    "text": "so uh I have a server This Server is going to be serving multiple purposes",
    "start": "1001880",
    "end": "1007399"
  },
  {
    "text": "this server has a DN server uh if if a request is within certain uh you know",
    "start": "1007399",
    "end": "1013720"
  },
  {
    "text": "like a CER block or within the internal VPN or a segment of vpm you want to",
    "start": "1013720",
    "end": "1020040"
  },
  {
    "text": "return to one IP address which potentially could be your let's say your testing server and then you'll say if",
    "start": "1020040",
    "end": "1027199"
  },
  {
    "text": "the request is not from this specific uh side block you're going to say okay so",
    "start": "1027199",
    "end": "1033120"
  },
  {
    "text": "let's just assume anyone else uh requesting a DNS uh DS record will return by default",
    "start": "1033120",
    "end": "1041520"
  },
  {
    "text": "one IP and uh if uh request is within a specific side Block it's going to return",
    "start": "1041520",
    "end": "1047678"
  },
  {
    "text": "return another IP so this diagram as you can see actually separates the network into two parts the first part is the",
    "start": "1047679",
    "end": "1054280"
  },
  {
    "text": "internal Network that's 1720 z.0 sl8 that's internal Network",
    "start": "1054280",
    "end": "1061240"
  },
  {
    "text": "then anything else will be outside so let let's just make is everything simple because we can certainly pick up any IPS",
    "start": "1061240",
    "end": "1068360"
  },
  {
    "text": "to return but just for fun I pick up like two IPS one IP is",
    "start": "1068360",
    "end": "1074840"
  },
  {
    "text": "1.11.1 another IP is 8.8.8.8 it's very unlikely you're going to use",
    "start": "1074840",
    "end": "1080600"
  },
  {
    "text": "those two IPS but 1.1.11 is cloud FL sdn server and at the",
    "start": "1080600",
    "end": "1087159"
  },
  {
    "text": "8.8.8.8 is uh actually Google's uh DS res right so let's just set up this",
    "start": "1087159",
    "end": "1094640"
  },
  {
    "text": "scenario and see how we can get the job done with minimum lines of Goan",
    "start": "1094640",
    "end": "1101039"
  },
  {
    "text": "code okay so as we can see if it's internal we're going to return",
    "start": "1101039",
    "end": "1107120"
  },
  {
    "text": "1.11.1 IP and and if it's external it's going to be a do a do a do8 and the",
    "start": "1107120",
    "end": "1113159"
  },
  {
    "text": "request just make it straightforward the request we always be example.org you set",
    "start": "1113159",
    "end": "1118799"
  },
  {
    "text": "up example. server you return different IPS that's fairly",
    "start": "1118799",
    "end": "1123960"
  },
  {
    "text": "simple uh so you're you're going to write a a plugin for coordinates and uh",
    "start": "1123960",
    "end": "1130919"
  },
  {
    "text": "the plugin surprisingly it's very simple so how simple it is it don't require three functions to fill in and uh two",
    "start": "1130919",
    "end": "1139240"
  },
  {
    "text": "out of three functions are just available star function you need to get the skeletons in place and there one",
    "start": "1139240",
    "end": "1145640"
  },
  {
    "text": "function that you need as you can see the first function is a init function which will perform a onetime",
    "start": "1145640",
    "end": "1152720"
  },
  {
    "text": "initialization because you need to register your plugin with coordinat so coordinates knows they will pass the the",
    "start": "1152720",
    "end": "1159039"
  },
  {
    "text": "information to a plugin uh allow your plugin to process the request setup is",
    "start": "1159039",
    "end": "1165159"
  },
  {
    "text": "some pluming in place so that it can pass the configuration from the file and capture it the",
    "start": "1165159",
    "end": "1171520"
  },
  {
    "text": "struct oh sorry okay uh the the setup plugin uh by",
    "start": "1171520",
    "end": "1179640"
  },
  {
    "text": "itself is also straightforward uh if you want to make uh your plugin a little",
    "start": "1179640",
    "end": "1185480"
  },
  {
    "text": "complicated because you have a different configurations then you need to add more content but in case all you need to do",
    "start": "1185480",
    "end": "1192960"
  },
  {
    "text": "is just register plugin then that's fairly straightforward and finally the",
    "start": "1192960",
    "end": "1198400"
  },
  {
    "text": "the me of the plugin is a Ser DNS function this function is doing the",
    "start": "1198400",
    "end": "1205080"
  },
  {
    "text": "processing of DNS request and the return return response uh and once the",
    "start": "1205080",
    "end": "1211600"
  },
  {
    "text": "processing uh has been done in this plugin you just return and allow the",
    "start": "1211600",
    "end": "1217039"
  },
  {
    "text": "next plugin to process the next plugin can be a a standalone Plugin or another",
    "start": "1217039",
    "end": "1222440"
  },
  {
    "text": "plug-in you WR right but let's just focusing on one plugin uh for this uh",
    "start": "1222440",
    "end": "1228320"
  },
  {
    "text": "demo plugin that's going to be this Source IP based service Discovery okay so as you can see the in",
    "start": "1228320",
    "end": "1235840"
  },
  {
    "text": "and setup function are fairly straightforward for need function you register plugin because uh uh because a",
    "start": "1235840",
    "end": "1242880"
  },
  {
    "text": "plug-in is a DS plugin so you going to register the server type as DNS uh by",
    "start": "1242880",
    "end": "1249679"
  },
  {
    "text": "the way you'll probably notice there's a cad in place uh the reason CAD appears",
    "start": "1249679",
    "end": "1255480"
  },
  {
    "text": "in in coding us is because uh uh coding has started by as a plugin of CAD",
    "start": "1255480",
    "end": "1264240"
  },
  {
    "text": "someone may some of you may know that caddy is a web server read go right so",
    "start": "1264240",
    "end": "1270360"
  },
  {
    "text": "at the beginning when cordin was developed uh there was some design you",
    "start": "1270360",
    "end": "1276440"
  },
  {
    "text": "know scenarios you had to figure out so you need to get a pluming in place but you know as we we are developers",
    "start": "1276440",
    "end": "1282720"
  },
  {
    "text": "sometimes we just think what's the best way to write some system you probably want to reuse some else code as much as",
    "start": "1282720",
    "end": "1290080"
  },
  {
    "text": "possible in open source field right because you don't want to waste time writing something from scratch uh so",
    "start": "1290080",
    "end": "1297240"
  },
  {
    "text": "that's how a quoting is get started quoting is started as a plug-in of caddy by itself of course you're going to say",
    "start": "1297240",
    "end": "1303919"
  },
  {
    "text": "caddy is a is a what should I say uh ATP server right but it's all similar right",
    "start": "1303919",
    "end": "1310600"
  },
  {
    "text": "it's either ATP or DNS it's it's pretty much the same thing you can utilize the plumbing to get the job done so that's",
    "start": "1310600",
    "end": "1317799"
  },
  {
    "text": "some of the cre s to uh you know like to make your your code like reusable to",
    "start": "1317799",
    "end": "1324840"
  },
  {
    "text": "reuse other people's code that's a un uh function now the second one is the setup",
    "start": "1324840",
    "end": "1330559"
  },
  {
    "text": "the setup is essentially just a pass configuration now for the service based",
    "start": "1330559",
    "end": "1336000"
  },
  {
    "text": "uh uh Source IP based service Discovery uh the the configuration we",
    "start": "1336000",
    "end": "1342200"
  },
  {
    "text": "don't want to have any configuration because we just want to hard code everything but in the future you want to",
    "start": "1342200",
    "end": "1347559"
  },
  {
    "text": "make it a little fun you can certainly write more stuffff but for now let's just assume there's nothing everything",
    "start": "1347559",
    "end": "1353159"
  },
  {
    "text": "is hardcoded right okay so that's a setup setup is to just uh uh get a",
    "start": "1353159",
    "end": "1359720"
  },
  {
    "text": "configuration and finally that's a sdns which is the truly the meat of the",
    "start": "1359720",
    "end": "1366520"
  },
  {
    "text": "plugin you need to write in go so first of all you uh the Ser Ser DS will pass",
    "start": "1366520",
    "end": "1374320"
  },
  {
    "text": "three parameters the first one is going to be context that's a pretty standard the second one is a uh response writer",
    "start": "1374320",
    "end": "1382320"
  },
  {
    "text": "and the third one is just the uh request so the first thing is you have to construct the the requested state to",
    "start": "1382320",
    "end": "1390480"
  },
  {
    "text": "figure out what exactly is the information that has been passed to this plugin uh as you can see you can get a",
    "start": "1390480",
    "end": "1398400"
  },
  {
    "text": "qill name which in our case uh in our example set of case that's going to be",
    "start": "1398400",
    "end": "1403720"
  },
  {
    "text": "example.org right then you're going to say I want to reply what can IP address",
    "start": "1403720",
    "end": "1409159"
  },
  {
    "text": "I'm going to reply I'm going to reply either 8.8.8.8 or I'm going to reply",
    "start": "1409159",
    "end": "1415679"
  },
  {
    "text": "1.11.1 and uh because I want to I want my plugin to be Source IP based I to",
    "start": "1415679",
    "end": "1421840"
  },
  {
    "text": "check the IP of the request and the IP request I'll just make a very simple go",
    "start": "1421840",
    "end": "1428200"
  },
  {
    "text": "on function of prefix search if it's h if the uh if IP start with 172 do",
    "start": "1428200",
    "end": "1435360"
  },
  {
    "text": "something okay that's going to that means it's internal IP I'm going to reply uh",
    "start": "1435360",
    "end": "1441200"
  },
  {
    "text": "1.1.11 otherwise I'm going to reply 8.8.8.8 that's fairly straightforward",
    "start": "1441200",
    "end": "1447159"
  },
  {
    "text": "right and then you have a uh there are some like a loging facility to say you",
    "start": "1447159",
    "end": "1453880"
  },
  {
    "text": "you just print the Q name the IP and reply so that you can keep track of what they have done and finally you just need",
    "start": "1453880",
    "end": "1461000"
  },
  {
    "text": "to construct the answer uh now you're going to say what else do you need well",
    "start": "1461000",
    "end": "1467240"
  },
  {
    "text": "that's pretty much all you need need you just return the the answer and if you",
    "start": "1467240",
    "end": "1472679"
  },
  {
    "text": "you know if if you cannot process you just let next plugin to to continue so",
    "start": "1472679",
    "end": "1478559"
  },
  {
    "text": "that's that's all you need uh then you say okay so if if I build this plugin so",
    "start": "1478559",
    "end": "1484360"
  },
  {
    "text": "what else do I need to launch this plugin uh in order to for cian to start",
    "start": "1484360",
    "end": "1491080"
  },
  {
    "text": "you also need to initiate the plug-in in the cor file the qu file the",
    "start": "1491080",
    "end": "1496399"
  },
  {
    "text": "configuration uh because our then plug in a hard code everything you saw the code we use IP addresses specific IP",
    "start": "1496399",
    "end": "1503840"
  },
  {
    "text": "addresses in the Goan code so there nothing to to config as I said that's a",
    "start": "1503840",
    "end": "1509159"
  },
  {
    "text": "setup function nothing so we just invoke by uh by specify that demo is a plugin",
    "start": "1509159",
    "end": "1516360"
  },
  {
    "text": "we wanted to invoke and that's it now next thing is going to say how to",
    "start": "1516360",
    "end": "1521760"
  },
  {
    "text": "build that in order to build this plug-in you have to do several things first of all you have to uh you you you",
    "start": "1521760",
    "end": "1528600"
  },
  {
    "text": "can just download uh cording source code and uh your goong plugin should be",
    "start": "1528600",
    "end": "1534120"
  },
  {
    "text": "placed under the plug-in directory uh in addition to that there is a plugin.",
    "start": "1534120",
    "end": "1539440"
  },
  {
    "text": "config which is needed in order to allow your Goan compiler to pick up this uh",
    "start": "1539440",
    "end": "1545760"
  },
  {
    "text": "code and build uh and that's it uh there are some easy way to to compile this",
    "start": "1545760",
    "end": "1552960"
  },
  {
    "text": "plug-in you know I maned to uh draft the pretty lensy down me do build code you",
    "start": "1552960",
    "end": "1560559"
  },
  {
    "text": "can just get the job done there are some Flags to to pass that's mostly just to",
    "start": "1560559",
    "end": "1565600"
  },
  {
    "text": "get around some security uh related uh know like uh uh restrictions so you can",
    "start": "1565600",
    "end": "1572279"
  },
  {
    "text": "you can just build if you run this one command one line command it's several lines but it's just just one uh do",
    "start": "1572279",
    "end": "1579760"
  },
  {
    "text": "command you can build the uh build a plugin as well as a cords code and uh",
    "start": "1579760",
    "end": "1586240"
  },
  {
    "text": "you will see a binary that's a CS in your local directory and then you can just write run this local directory uh",
    "start": "1586240",
    "end": "1594080"
  },
  {
    "text": "you can just run this coding as binary and that's it uh just one more thing is",
    "start": "1594080",
    "end": "1600279"
  },
  {
    "text": "you see like I in the quy use 10. 53 uh of course you can uh pick up a fif three",
    "start": "1600279",
    "end": "1607559"
  },
  {
    "text": "but in case you pick up F3 in certain Linux system you may realize that you need a root address right if you're just",
    "start": "1607559",
    "end": "1614799"
  },
  {
    "text": "doing some testing you can start with 1053 which will award the CIS and that's it uh okay so you're",
    "start": "1614799",
    "end": "1623840"
  },
  {
    "text": "going to say where the source code the source code in in a small repo uh the repo is part of the coordinat AR and if",
    "start": "1623840",
    "end": "1631960"
  },
  {
    "text": "you just go to this rle you're going to realize the whole REO consists of what",
    "start": "1631960",
    "end": "1638039"
  },
  {
    "text": "80 lines and with 80 lines of Goan code uh",
    "start": "1638039",
    "end": "1643880"
  },
  {
    "text": "you pretty much write a service uh uh service Discovery based on Source IP and",
    "start": "1643880",
    "end": "1650279"
  },
  {
    "text": "why we showcase this plug-in is because many people ask okay I want to achieve this thing how to get the job done is",
    "start": "1650279",
    "end": "1657320"
  },
  {
    "text": "any profile we can use and sometime the answer has been okay it's a little you know if you just want to grab the",
    "start": "1657320",
    "end": "1664440"
  },
  {
    "text": "existing plugin and TW around some configurations to get job done it you",
    "start": "1664440",
    "end": "1669760"
  },
  {
    "text": "know what it's going to take some time to be a little creative to to manipulating or even hack into the cor",
    "start": "1669760",
    "end": "1677000"
  },
  {
    "text": "file and you to you know spend a lot of effort uh and then if you say you want",
    "start": "1677000",
    "end": "1683760"
  },
  {
    "text": "to learn goolan you want to write some simple plugin you can just uh maybe",
    "start": "1683760",
    "end": "1689080"
  },
  {
    "text": "spend a spend you know like several hours uh write like 100 Lin of code and get your job done right it's I think",
    "start": "1689080",
    "end": "1695519"
  },
  {
    "text": "it's a fine process okay so that's uh that's a demo plugin we showcase uh as",
    "start": "1695519",
    "end": "1701320"
  },
  {
    "text": "as I said you can go through this Ripple you're going to realize it's super simple extremely simple that's something",
    "start": "1701320",
    "end": "1707919"
  },
  {
    "text": "very very important because we don't want to uh solve a problem in complex",
    "start": "1707919",
    "end": "1713279"
  },
  {
    "text": "way we want to solve a complex problem in a simple way not other way around",
    "start": "1713279",
    "end": "1718559"
  },
  {
    "text": "okay so that's uh that's a d plugin we showcased uh and finally we wanted to uh",
    "start": "1718559",
    "end": "1725480"
  },
  {
    "text": "go through several bullet point about uh uh according as the community uh if",
    "start": "1725480",
    "end": "1730519"
  },
  {
    "text": "anyone is interested in contribute to codings you have several ways to contribute uh you can start cods in",
    "start": "1730519",
    "end": "1736799"
  },
  {
    "text": "GitHub to uh increase the visibility of qus you can also add uh your institution's name",
    "start": "1736799",
    "end": "1744240"
  },
  {
    "text": "to adop the start uh MD uh this will actually uh you know like uh allow you",
    "start": "1744240",
    "end": "1750880"
  },
  {
    "text": "to have a chance to create a PO request you know you you can just create the PO request and should be easy uh you can",
    "start": "1750880",
    "end": "1757960"
  },
  {
    "text": "also uh become a maintainer in order to become maintainer you probably need to",
    "start": "1757960",
    "end": "1764960"
  },
  {
    "text": "contribute uh significant po request so what what is the definition of sign",
    "start": "1764960",
    "end": "1771320"
  },
  {
    "text": "request well if you write a plugin that's a you know that's a sign request you also need to to be sponsored by one",
    "start": "1771320",
    "end": "1778720"
  },
  {
    "text": "existing Mena which is a very low threshold and uh then you become Mena",
    "start": "1778720",
    "end": "1784120"
  },
  {
    "text": "which sounds like a badge small badge to you and you can just let people know that you're also part of Open Source",
    "start": "1784120",
    "end": "1790200"
  },
  {
    "text": "community and you're part of this CNC project and your Mainer right so it's a",
    "start": "1790200",
    "end": "1795480"
  },
  {
    "text": "interesting you can do uh like I said you know the like John mentioned we have 28 maintenance as the threshold to be a",
    "start": "1795480",
    "end": "1802960"
  },
  {
    "text": "Mainer is extremely low so just contribute something uh address some Goan code spend maybe several hours and",
    "start": "1802960",
    "end": "1810120"
  },
  {
    "text": "you know have little fun okay that's uh that's pretty much it from outside any",
    "start": "1810120",
    "end": "1815919"
  },
  {
    "text": "any questions",
    "start": "1815919",
    "end": "1820960"
  },
  {
    "text": "thank all right looks like we have about five minutes for questions so gentleman here there's a microphone there uh you",
    "start": "1824559",
    "end": "1831919"
  },
  {
    "text": "can go stand at that way uh you'll you'll show up on the recording properly",
    "start": "1831919",
    "end": "1837360"
  },
  {
    "text": "and whatever um yeah thank you for the talk very insightful um also very interesting",
    "start": "1837360",
    "end": "1844279"
  },
  {
    "text": "that gke does not use coordin um thank you for this Insight um I was wondering",
    "start": "1844279",
    "end": "1849440"
  },
  {
    "text": "whether you considered um using web assembly runtime um as an extension to your current plug-in system because on",
    "start": "1849440",
    "end": "1855440"
  },
  {
    "text": "the one hand side this would allow an author to create a plugin in basically any language plus you would avoid the",
    "start": "1855440",
    "end": "1861840"
  },
  {
    "text": "recompilation step of cordas you said wasm is that what you said web assembly was yeah wasm okay um I don't I haven't",
    "start": "1861840",
    "end": "1870080"
  },
  {
    "text": "explored that I mean it's definitely a possibility um at one point uh one of",
    "start": "1870080",
    "end": "1875679"
  },
  {
    "text": "our maintainers was looking at adding Lua support but I I think that that's a",
    "start": "1875679",
    "end": "1880960"
  },
  {
    "text": "reasonable thing to do we haven't I have not looked at it and you're welcome to to uh to to to to join in on GitHub and",
    "start": "1880960",
    "end": "1888760"
  },
  {
    "text": "our slack Channel we we have a slack channel on the cncf slack not on the kubernetes slack um and uh we we'd love",
    "start": "1888760",
    "end": "1896080"
  },
  {
    "text": "to see something like that right now you're right it requires a recompile of we don't have a a dynamic plugin system",
    "start": "1896080",
    "end": "1901919"
  },
  {
    "text": "it's it's a built-in compiled in plugin system all right I created the",
    "start": "1901919",
    "end": "1908880"
  },
  {
    "text": "ticket any other qu it looks like there's somebody here hey thank you for the presentation",
    "start": "1908880",
    "end": "1916519"
  },
  {
    "text": "um small question about about the testing what do you suggest for the testing of the plugins are there any",
    "start": "1916519",
    "end": "1923760"
  },
  {
    "text": "tools or techniques well unit tests for sure um",
    "start": "1923760",
    "end": "1929200"
  },
  {
    "text": "just go unit test standard go unit test but um we have some end to end tests",
    "start": "1929200",
    "end": "1934799"
  },
  {
    "text": "that are part of our CI infrastructure um and I'm not I don't recall what we're",
    "start": "1934799",
    "end": "1940279"
  },
  {
    "text": "using there specifically but um years ago I put together a container",
    "start": "1940279",
    "end": "1946880"
  },
  {
    "text": "a container image with testing Tools in it for DNS but I don't have anything",
    "start": "1946880",
    "end": "1952440"
  },
  {
    "text": "specific that I can recall off the top of my head we we do some performance tests um if we go look at the tooling we",
    "start": "1952440",
    "end": "1958559"
  },
  {
    "text": "have in our CI that's probably where I would start and and pick up the tools that we have there and what if the",
    "start": "1958559",
    "end": "1965639"
  },
  {
    "text": "plug-in is um not going to uh land in the how to say in the main base uh code",
    "start": "1965639",
    "end": "1974679"
  },
  {
    "text": "base of core DNS what if it is a homemade plugin and we would like just to run the test in our CI apart from the",
    "start": "1974679",
    "end": "1982159"
  },
  {
    "text": "unit test of course um yeah I mean I I whatever you",
    "start": "1982159",
    "end": "1988679"
  },
  {
    "text": "use in your CI now I mean it's just a process it's pretty it's pretty straightforward so as far as testing",
    "start": "1988679",
    "end": "1995720"
  },
  {
    "text": "like query tools I mean it all depends if you're doing right you want to do sort of end to end testing from a",
    "start": "1995720",
    "end": "2002399"
  },
  {
    "text": "functional standpoint then things like just your simple command line tools like dig or whatever are fine but if you want",
    "start": "2002399",
    "end": "2008840"
  },
  {
    "text": "to do um load testing um sorry it's been a couple years since I looked at the",
    "start": "2008840",
    "end": "2015000"
  },
  {
    "text": "testing to since I was working on the testing Tools in this so I can't recall we we there's a a few that we used um to",
    "start": "2015000",
    "end": "2022960"
  },
  {
    "text": "like really so one of the interesting things in I don't have two one minute left um",
    "start": "2022960",
    "end": "2029200"
  },
  {
    "text": "like when you when you do start start to do some of the load testing on DNS you know the you start to tend to be limited",
    "start": "2029200",
    "end": "2037440"
  },
  {
    "text": "by things like the the the the packets per second that your cloud provider will even allow right on",
    "start": "2037440",
    "end": "2044559"
  },
  {
    "text": "that on that particular level of node because they the packets per seconds tend to be pretty high on the DNS server",
    "start": "2044559",
    "end": "2050000"
  },
  {
    "text": "so but there's a bunch of tool do do you recall any of the names of the tools I would have to look it",
    "start": "2050000",
    "end": "2055118"
  },
  {
    "text": "up I mean frankly I'm going to say you know if you're going to test uh DNS I",
    "start": "2055119",
    "end": "2061358"
  },
  {
    "text": "mean d certain is the best tool available frankly on the other hand if you're going to say you want to write",
    "start": "2061359",
    "end": "2067320"
  },
  {
    "text": "something goong you know as as we walk through the plugin you'll probably",
    "start": "2067320",
    "end": "2073000"
  },
  {
    "text": "realize the DNS by itself is fairly straightforward you have the query you you're going to response uh you're going",
    "start": "2073000",
    "end": "2080960"
  },
  {
    "text": "to return a response I mean you you can find many ways to test frankly looks",
    "start": "2080960",
    "end": "2087240"
  },
  {
    "text": "like we have one more question maybe we can sneak it in quick we're being yelled at though yeah um so my question is",
    "start": "2087240",
    "end": "2093280"
  },
  {
    "text": "based on how C DNS might be used or be helpful for like blockchain networks",
    "start": "2093280",
    "end": "2099280"
  },
  {
    "text": "where you need to find peers and stuff like that but it's a bit different because in this case it's like some",
    "start": "2099280",
    "end": "2105359"
  },
  {
    "text": "peers my uh behave in some way that you might don't want to keep it up but but",
    "start": "2105359",
    "end": "2111119"
  },
  {
    "text": "not about Behavior just like about finding the peers and maybe uh putting them down if it's not working anymore or",
    "start": "2111119",
    "end": "2118000"
  },
  {
    "text": "something like that and this is the first question in in the following W is like if if those Spears uh are not",
    "start": "2118000",
    "end": "2124520"
  },
  {
    "text": "supposed to be kept in there like in a f if they're not working anymore more or if we can find them anymore like is",
    "start": "2124520",
    "end": "2130720"
  },
  {
    "text": "deploying C DNS on stateless service a way to go or that will be like a",
    "start": "2130720",
    "end": "2137040"
  },
  {
    "text": "noal I think I'm going to need a little more context and we're out of time why don't you come over here we can talk about it offline okay thank you thanks",
    "start": "2137040",
    "end": "2144359"
  },
  {
    "text": "everybody okay s",
    "start": "2144359",
    "end": "2149480"
  }
]