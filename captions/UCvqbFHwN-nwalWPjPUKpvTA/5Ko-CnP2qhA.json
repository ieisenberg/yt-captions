[
  {
    "text": "whoa it's 5 25 so many people thank you for joining us i hope we will make your",
    "start": "1120",
    "end": "6319"
  },
  {
    "text": "time here worth it i promise we will not say anything we'll just share our experience",
    "start": "6319",
    "end": "11840"
  },
  {
    "text": "my name is jason simeonov and i'm product manager at intuit in the looking after the developer",
    "start": "11840",
    "end": "17600"
  },
  {
    "text": "experience and i'm more focused on the service mentioned api gateway and",
    "start": "17600",
    "end": "22960"
  },
  {
    "text": "yeah henrik hi everyone my name is henrik blixt i'm also a product manager at intuit and i'm also one of the the",
    "start": "22960",
    "end": "29439"
  },
  {
    "text": "argo maintainers so we're quickly today going to talk a little bit about how we use service mesh and how it looks",
    "start": "29439",
    "end": "36160"
  },
  {
    "text": "at intuit i'm going to talk a bit about progressive delivery why we use it how we use it and then i'm going to talk",
    "start": "36160",
    "end": "42840"
  },
  {
    "text": "about how well they work together or how well they didn't work together and we kind of what we experienced and realized",
    "start": "42840",
    "end": "49039"
  },
  {
    "text": "as we tried to use these together a little bit look into the future what we think is coming next what are the big focus",
    "start": "49039",
    "end": "56719"
  },
  {
    "text": "areas for us and then we're going to round off with jason doing a live demo",
    "start": "56719",
    "end": "64399"
  },
  {
    "text": "so very quickly but into it since we're in europe not",
    "start": "64640",
    "end": "69840"
  },
  {
    "text": "too many of you probably know who we are because we have 95 of our business in in the us but we're one of the leading u.s",
    "start": "69840",
    "end": "76960"
  },
  {
    "text": "fintech companies we have roughly 10 billion dollars in in revenue",
    "start": "76960",
    "end": "82320"
  },
  {
    "text": "what you probably know is more for if you knew is that our the argo project",
    "start": "82320",
    "end": "87600"
  },
  {
    "text": "came out of intuit where it came out of a startup that we acquired and then we later donated argo to the",
    "start": "87600",
    "end": "94720"
  },
  {
    "text": "cncf we're big supporters of open source not just argo but a number of other projects",
    "start": "94720",
    "end": "100640"
  },
  {
    "text": "that we contribute to that we use basically if it's in this cnc but you've probably",
    "start": "100640",
    "end": "106159"
  },
  {
    "text": "all seen that massive map right if it's on that map we pretty much use it and we contribute to many of them uh as",
    "start": "106159",
    "end": "113200"
  },
  {
    "text": "well okay my turn",
    "start": "113200",
    "end": "118960"
  },
  {
    "text": "yeah before going to this slide i just out of curiosity how many of you are here because of the service mesh part can how",
    "start": "118960",
    "end": "127280"
  },
  {
    "text": "great yeah great and how many because of the progressive delivery in targo",
    "start": "127280",
    "end": "133360"
  },
  {
    "text": "whoa great okay excellent i think this slides uh shows our scale and it is important for",
    "start": "133360",
    "end": "140160"
  },
  {
    "text": "the service mesh part because you can see that we have around more than 230",
    "start": "140160",
    "end": "145760"
  },
  {
    "text": "uh kubernetes clusters and the service measure that i'm going to talk about in a moment stretches across all those",
    "start": "145760",
    "end": "151920"
  },
  {
    "text": "clusters so we have one single mesh across all those clusters rest is like uh dynamic so our",
    "start": "151920",
    "end": "158560"
  },
  {
    "text": "uh not count is growing depending on the period we have some peak periods where the count grows and some quad period",
    "start": "158560",
    "end": "166480"
  },
  {
    "text": "when the car goes down uh yeah so we have more than seven million",
    "start": "166480",
    "end": "172560"
  },
  {
    "text": "pots running in our infrastructure okay so why service mesh so we are a",
    "start": "172560",
    "end": "179760"
  },
  {
    "text": "fintech company and for us it is very important security is very important so we have this zero",
    "start": "179760",
    "end": "185840"
  },
  {
    "text": "trust infrastructure so in this particular example service a cannot talk to service b without proper",
    "start": "185840",
    "end": "192400"
  },
  {
    "text": "authentication and uh authorization so what we did in the past we have this",
    "start": "192400",
    "end": "197680"
  },
  {
    "text": "api gateway that you see on the top and service a cannot talk to service b we apply kubernetes network policy that",
    "start": "197680",
    "end": "204720"
  },
  {
    "text": "services can talk only to the api gateway and this is where we apply",
    "start": "204720",
    "end": "210799"
  },
  {
    "text": "all the security all the tls everything that that is needed and all advanced",
    "start": "210799",
    "end": "216000"
  },
  {
    "text": "traffic management however on my slides the api gateways",
    "start": "216000",
    "end": "221599"
  },
  {
    "text": "are just a circle however just for your information in the peak period we process more than a million transactions",
    "start": "221599",
    "end": "227200"
  },
  {
    "text": "per second so in reality it is not just a circle it is like a huge",
    "start": "227200",
    "end": "232879"
  },
  {
    "text": "set of replicas of the api gateway and yeah it is a complex environment",
    "start": "232879",
    "end": "239360"
  },
  {
    "text": "with growing of the service mesh we figure out that for us this is the right way to",
    "start": "239360",
    "end": "245120"
  },
  {
    "text": "deal with the security and the traffic management and that's why we started moving different services to",
    "start": "245120",
    "end": "251439"
  },
  {
    "text": "the mesh so for the services we add this",
    "start": "251439",
    "end": "256720"
  },
  {
    "text": "envoy proxy and now the traffic can flow between the services directly from",
    "start": "256720",
    "end": "262479"
  },
  {
    "text": "service a to service b without hooking to the api gateway so when you see at this point all services have two",
    "start": "262479",
    "end": "269120"
  },
  {
    "text": "endpoints the initial endpoint is the public endpoint through the api gateway",
    "start": "269120",
    "end": "274240"
  },
  {
    "text": "and service b has like service b dot api.intuit.com but service b now because it is mesh",
    "start": "274240",
    "end": "280479"
  },
  {
    "text": "enabled has second endpoint which is service b dot mesh for example and the client of service b in this",
    "start": "280479",
    "end": "286800"
  },
  {
    "text": "particular example service a can decide i want to call service bid through the api gateway with the",
    "start": "286800",
    "end": "292639"
  },
  {
    "text": "api service b dot api api.entry.com or through the mesh",
    "start": "292639",
    "end": "297919"
  },
  {
    "text": "so this was a step from the migration so when when we start switching the traffic and if the services don't need to be",
    "start": "297919",
    "end": "303919"
  },
  {
    "text": "exposed outside of our network for example service b and service c in this example they are just internal services",
    "start": "303919",
    "end": "310400"
  },
  {
    "text": "and service a need to be exposed outside we off-board those services from the api",
    "start": "310400",
    "end": "315759"
  },
  {
    "text": "gateway and now all service to service communication happens through the service mesh and services that need",
    "start": "315759",
    "end": "323039"
  },
  {
    "text": "external exposure are also on board to the api gateway",
    "start": "323039",
    "end": "329199"
  },
  {
    "text": "i think many of you uh think that the envoy proxy at latency in our case it is",
    "start": "329360",
    "end": "335759"
  },
  {
    "text": "completely opposite because we don't have to hook the traffic to it is a completely different",
    "start": "335759",
    "end": "341680"
  },
  {
    "text": "vpc completely different account for the api gateway now the traffic stays either local in the cluster or goes directly",
    "start": "341680",
    "end": "348160"
  },
  {
    "text": "from coaster to cluster we see more than 30 percent latency improvement on the service to service communication",
    "start": "348160",
    "end": "354080"
  },
  {
    "text": "again in this particular example the communication is mtls encrypted uh service a presents its identity to",
    "start": "354080",
    "end": "360400"
  },
  {
    "text": "service b service b presents its identity to service and they establish this communication channel",
    "start": "360400",
    "end": "367840"
  },
  {
    "text": "so the way that we implement the api gateway it is front-ended by",
    "start": "368560",
    "end": "373840"
  },
  {
    "text": "aob this means this is a public network so by moving the traffic the service to service traffic to through the service",
    "start": "373840",
    "end": "380479"
  },
  {
    "text": "mesh we keep the traffic in the private network we significantly reduce our public cloud",
    "start": "380479",
    "end": "386560"
  },
  {
    "text": "provider cost with this and yeah so one hopeless for the communication",
    "start": "386560",
    "end": "392800"
  },
  {
    "text": "also uh we were rotating certificates and keys for the services in order to communicate",
    "start": "392800",
    "end": "398240"
  },
  {
    "text": "with the api gateway manually every 90 days right now with service mesh it is a matter of hours and it is fully",
    "start": "398240",
    "end": "403919"
  },
  {
    "text": "automated so developers don't have to rotate certification keys also in the past when the traffic goes",
    "start": "403919",
    "end": "411199"
  },
  {
    "text": "through the api gateway the service owner can can have observability from the api",
    "start": "411199",
    "end": "416400"
  },
  {
    "text": "gateway to to their service right now we have transactional visibility we can see the",
    "start": "416400",
    "end": "422240"
  },
  {
    "text": "entire chain from service a to service b to service c we have this observability",
    "start": "422240",
    "end": "427759"
  },
  {
    "text": "so this is overall our architecturalist i will start from the bottom so",
    "start": "427759",
    "end": "435039"
  },
  {
    "text": "in in the kubernetes spot we push the envoy proxy and we have one additional",
    "start": "435039",
    "end": "441039"
  },
  {
    "text": "one additional container which is this third agent wrapper in our case uh our certificates are the",
    "start": "441039",
    "end": "449039"
  },
  {
    "text": "identity of the certificates are not specific and plans so we have different ways for the certificates that's why we",
    "start": "449039",
    "end": "454479"
  },
  {
    "text": "have our own implementation of the of the certificate rotation and we pull the certificate from our certificate",
    "start": "454479",
    "end": "461440"
  },
  {
    "text": "authority so this is for the for the data path for the control plane uh",
    "start": "461440",
    "end": "468080"
  },
  {
    "text": "we have issue deeper cluster so control plane per cluster and on the right side you can see the",
    "start": "468080",
    "end": "474400"
  },
  {
    "text": "certificate authority we can see you can see the admiral which i'm going to talk about in a moment and of course",
    "start": "474400",
    "end": "481440"
  },
  {
    "text": "integration with targo so this is more central component is to these bird clusters",
    "start": "481440",
    "end": "487919"
  },
  {
    "text": "just want to mention about admiral if you remember we have service a",
    "start": "487919",
    "end": "493280"
  },
  {
    "text": "service b service c however those services may be in different kubernetes clusters",
    "start": "493280",
    "end": "498720"
  },
  {
    "text": "and if you remember we have issued per cluster so we have to find a way how to",
    "start": "498720",
    "end": "505280"
  },
  {
    "text": "enable service discovery across the clusters and admiral is another uh open source project that",
    "start": "505280",
    "end": "512240"
  },
  {
    "text": "intuit donated to easter ecosystem now we teased you going to cncf hopefully",
    "start": "512240",
    "end": "518080"
  },
  {
    "text": "admiral also will go to cncf and admiral is responsible to synchronize the",
    "start": "518080",
    "end": "524880"
  },
  {
    "text": "endpoints to do service discovery across the clusters",
    "start": "524880",
    "end": "530240"
  },
  {
    "text": "just uh one example uh what we did initially for our developers uh we let them",
    "start": "533040",
    "end": "539680"
  },
  {
    "text": "menu manually onboard their services to service mesh uh they go to the dev portal they click",
    "start": "539680",
    "end": "546160"
  },
  {
    "text": "enable mesh and we send them prs with the istio",
    "start": "546160",
    "end": "551279"
  },
  {
    "text": "label and their services on mesh however what we did recently we made",
    "start": "551279",
    "end": "557360"
  },
  {
    "text": "this day zero experience if our developers create a new service we are not asking them so the service to",
    "start": "557360",
    "end": "562399"
  },
  {
    "text": "service communication always happens through damage so api gateway is only for",
    "start": "562399",
    "end": "567519"
  },
  {
    "text": "external communication okay that's it from it okay thank you",
    "start": "567519",
    "end": "574399"
  },
  {
    "text": "thank you jason so uh just interesting how many in here know what progressive delivery is",
    "start": "574399",
    "end": "580959"
  },
  {
    "text": "oh it's a half maybe so i'm going to give you a teaser on why progressive delivery is really cool why",
    "start": "581200",
    "end": "586480"
  },
  {
    "text": "we use it into it if you want to know more about progressive delivery please come by the the argo booth over in the",
    "start": "586480",
    "end": "592480"
  },
  {
    "text": "project pavilion and me or one of the maintainers would be happy to give you as much detail as you would possibly",
    "start": "592480",
    "end": "598800"
  },
  {
    "text": "want so one of the main reasons for using progressive deliveries at internet we're from the platform team we build the",
    "start": "598800",
    "end": "605519"
  },
  {
    "text": "developer experience platform for our 5 000 developers so one of the main reasons for this is increasing",
    "start": "605519",
    "end": "611040"
  },
  {
    "text": "operational excellence because we also run all the services you know for all intuits almost 100 million customers",
    "start": "611040",
    "end": "619760"
  },
  {
    "text": "so one thing that we do a lot is introduce change into the system so this could be",
    "start": "619760",
    "end": "626880"
  },
  {
    "text": "someone there's a configuration change someone deploys a new version someone deploys a brand new service",
    "start": "626880",
    "end": "632880"
  },
  {
    "text": "every time you introduce change into the system there is a chance that something might go wrong",
    "start": "632880",
    "end": "639760"
  },
  {
    "text": "when that happens we want to make sure that we minimize the impact from that change",
    "start": "639760",
    "end": "645519"
  },
  {
    "text": "but using progressive delivery we can actually roll out you know your new canary your new stack to subset of users",
    "start": "645519",
    "end": "652720"
  },
  {
    "text": "do some testing increase the number of users that see that canary we actually reduce you know",
    "start": "652720",
    "end": "658160"
  },
  {
    "text": "the blast radius from anything that might go wrong",
    "start": "658160",
    "end": "663040"
  },
  {
    "text": "the other one is when something happens it takes a while you know something goes wrong",
    "start": "663760",
    "end": "670480"
  },
  {
    "text": "a user finds out they call back some developer gets woken up",
    "start": "670480",
    "end": "675600"
  },
  {
    "text": "and you know you start trying to troubleshoot what's going on and then eventually figure out what the heck went wrong and then you start fixing it right",
    "start": "675600",
    "end": "681680"
  },
  {
    "text": "and that whole process i think most of us have been through that takes a while",
    "start": "681680",
    "end": "686959"
  },
  {
    "text": "and that just leads to the long mtgr along mean time to recovery so by using the automation that progressive delivery",
    "start": "686959",
    "end": "693279"
  },
  {
    "text": "offers we can increase the reliability of the process and also reduce the time because we can automate",
    "start": "693279",
    "end": "699760"
  },
  {
    "text": "a lot of that so if something happens during one of those steps would just automatically roll back so instead of",
    "start": "699760",
    "end": "705200"
  },
  {
    "text": "putting putting everything out there wait until something happens and user calls in will just automatically run a bunch of tests if they fail",
    "start": "705200",
    "end": "712000"
  },
  {
    "text": "boom we roll back right away so that just helps us troubleshoot or we don't even have to troubleshoot it just gets",
    "start": "712000",
    "end": "718079"
  },
  {
    "text": "us back to a known good state much faster the other one the other thing we noticed when we talked to some developers was",
    "start": "718079",
    "end": "724399"
  },
  {
    "text": "that they they spend quite a lot of time figuring out if they change the mate if a release",
    "start": "724399",
    "end": "729760"
  },
  {
    "text": "they did it's actually healthy they build their own custom dashboards they look at logs they look",
    "start": "729760",
    "end": "734959"
  },
  {
    "text": "at other dashboards and they just sit there babysitting their their applications to make sure that they're actually good and",
    "start": "734959",
    "end": "741680"
  },
  {
    "text": "they spend a fair amount of time doing that so by automating this process building",
    "start": "741680",
    "end": "747200"
  },
  {
    "text": "more reliability and dependability on this process we can free up time for",
    "start": "747200",
    "end": "752560"
  },
  {
    "text": "these developers so they don't have to babysit and make sure that everything is working because we're doing that automatically right so they can deploy",
    "start": "752560",
    "end": "760720"
  },
  {
    "text": "rest assured that the the automated tests fill the function of the dashboard and then they can you know keep doing what",
    "start": "760720",
    "end": "767680"
  },
  {
    "text": "they they want to do which is you know coding rather than babysitting applications",
    "start": "767680",
    "end": "774000"
  },
  {
    "text": "so as a surprise to no one here probably uh we use our rollers for progressive delivery",
    "start": "774000",
    "end": "780720"
  },
  {
    "text": "and just like justin mentioned for service mesh we've made it a day zero experience so when a user comes in",
    "start": "780720",
    "end": "787680"
  },
  {
    "text": "into a dev portal creates a new service they get automatically onboarded with argo rollouts",
    "start": "787680",
    "end": "794399"
  },
  {
    "text": "we still have a large number of services that were created before our grow lots and for them we",
    "start": "794399",
    "end": "800639"
  },
  {
    "text": "have a an opt-in migration experience that we built so they were not forcing them to migrate but there's a very",
    "start": "800639",
    "end": "808079"
  },
  {
    "text": "simple simple path to to get there and of course everything is stored and git probably don't even have to to",
    "start": "808079",
    "end": "814639"
  },
  {
    "text": "mention that these days and then rollouts we deploy into all our 250 260",
    "start": "814639",
    "end": "820079"
  },
  {
    "text": "clusters and then it's managed by by the argo teams and we've kind of divided up in waves depending on the business units",
    "start": "820079",
    "end": "826240"
  },
  {
    "text": "we have so the business units depending on how risk averse they are might be in a later wave when we start no wave one",
    "start": "826240",
    "end": "832720"
  },
  {
    "text": "is pretty proud and then we soak there for a bit and then we roll down roll down the wave so once we hit you know the really business critical ones you",
    "start": "832720",
    "end": "839279"
  },
  {
    "text": "know we know that everything is is working fine",
    "start": "839279",
    "end": "843839"
  },
  {
    "text": "so this process and this getting service mesh and progressive delivery working",
    "start": "845199",
    "end": "851199"
  },
  {
    "text": "together wasn't completely free of challenges so one thing we noted",
    "start": "851199",
    "end": "857199"
  },
  {
    "text": "initially was that we need multiple traffic providers and initially argo rolas didn't support more than one",
    "start": "857199",
    "end": "862880"
  },
  {
    "text": "traffic provider so having east-west traffic and northwest traffic coming in in into different different paths",
    "start": "862880",
    "end": "869600"
  },
  {
    "text": "meant we couldn't really track metrics for our progressive delivery from two different two different uh those two",
    "start": "869600",
    "end": "875279"
  },
  {
    "text": "different paths once we fixed that in order rollouts and actually now support that we realized",
    "start": "875279",
    "end": "881360"
  },
  {
    "text": "that it's it's actually pretty hard to figure out what metrics to use what aggregations to look at when you figure",
    "start": "881360",
    "end": "887760"
  },
  {
    "text": "out the health of your application so now we're actually the goal is actually instead to to make sure that we're using",
    "start": "887760",
    "end": "894720"
  },
  {
    "text": "service measure everything so even if this is actually a supported way in in rollouts now it actually makes it harder",
    "start": "894720",
    "end": "900079"
  },
  {
    "text": "for the service teams to figure out how if you're using the http request metrics which one are actually the ones that",
    "start": "900079",
    "end": "906079"
  },
  {
    "text": "tell me a better story on application health so we're looking at using service mesh for everything because then we have a single aggregation point through",
    "start": "906079",
    "end": "912720"
  },
  {
    "text": "service mesh another thing we ran into was that we were using the admiral tool that you",
    "start": "912720",
    "end": "917839"
  },
  {
    "text": "also mentioned earlier and it actually creates the endpoints as an abstraction over the",
    "start": "917839",
    "end": "924399"
  },
  {
    "text": "the kubernetes service names unfortunately our rolex depends on the community service names so that was",
    "start": "924399",
    "end": "931279"
  },
  {
    "text": "something you know we realized as we were starting to test is like hey this this is probably not working so we had to fix that it's now",
    "start": "931279",
    "end": "938160"
  },
  {
    "text": "fixed and working how many in here thinks that migrations",
    "start": "938160",
    "end": "945040"
  },
  {
    "text": "are fun okay we have we have five people that work for migration tool company",
    "start": "945040",
    "end": "953040"
  },
  {
    "text": "but we're now looking at two migrations here i've been talking about service mesh and progressive delivery and we have 2 000",
    "start": "953680",
    "end": "959279"
  },
  {
    "text": "services that were there before we made this a day zero experience and telling them to do not one migration but two",
    "start": "959279",
    "end": "967120"
  },
  {
    "text": "didn't really raise that much excitement so we spent a lot of time like like jason said as well making it a super",
    "start": "967120",
    "end": "973680"
  },
  {
    "text": "simple experience like in a developer portal there's a drop down i don't know if you can see that maybe",
    "start": "973680",
    "end": "979040"
  },
  {
    "text": "the first two rows came but for you guys in the back there's a drop down that says enable mesh and another on the",
    "start": "979040",
    "end": "984160"
  },
  {
    "text": "other one drop and it says migrate to progressive delivery so just by using going into a dev portal drop down click",
    "start": "984160",
    "end": "990320"
  },
  {
    "text": "you can move your service over to progressive delivery or or service mesh",
    "start": "990320",
    "end": "996240"
  },
  {
    "text": "uh we've also run a bunch of programs internally we're calling our fixed day or game days where we basically you know",
    "start": "996240",
    "end": "1002560"
  },
  {
    "text": "put up a challenge with teams the team that migrates the most services during the day you know they get they get a",
    "start": "1002560",
    "end": "1007920"
  },
  {
    "text": "price and you check checkpoints every hour and just kind of make it a competition and just encourage the the teams to do this",
    "start": "1007920",
    "end": "1014160"
  },
  {
    "text": "migration instead of coming in you know with a big hammer like thou shall migrate we're just trying to to spur",
    "start": "1014160",
    "end": "1019839"
  },
  {
    "text": "them to do it organically instead also super important stopping the bleeds",
    "start": "1019839",
    "end": "1024880"
  },
  {
    "text": "the first thing we did was the day zero experience and then the migration to make sure that we're not just on boarding more services",
    "start": "1024880",
    "end": "1032079"
  },
  {
    "text": "that we don't have to market so let's let's stop the bleed first and then you know we can migrate what's what's left",
    "start": "1032079",
    "end": "1038079"
  },
  {
    "text": "in the in in the the infrastructure",
    "start": "1038079",
    "end": "1043280"
  },
  {
    "text": "i already mentioned this a little bit but config and those analysis templates are actually would actually be challenges even for",
    "start": "1043280",
    "end": "1049679"
  },
  {
    "text": "the service teams that that know their services because we have a wide variety of services",
    "start": "1049679",
    "end": "1055440"
  },
  {
    "text": "a lot of our software is is tax preparation software for some reason",
    "start": "1055440",
    "end": "1060720"
  },
  {
    "text": "people like to do their taxes two days before tax filing deadline so we have some",
    "start": "1060720",
    "end": "1066400"
  },
  {
    "text": "services that have a very strong seasonality uh we have other services that are more",
    "start": "1066400",
    "end": "1071600"
  },
  {
    "text": "uh geared towards small business so they run all year but maybe peak around you know black friday or not so we have",
    "start": "1071600",
    "end": "1078720"
  },
  {
    "text": "big differences between the traffic that comes into these services some have just the same amount of traffic all year",
    "start": "1078720",
    "end": "1085200"
  },
  {
    "text": "some have almost all the traffic in two weeks and then there's almost nothing so if you want to do an http based",
    "start": "1085200",
    "end": "1091200"
  },
  {
    "text": "request http request based analysis how do you do that when you basically don't have any traffic in the service for for",
    "start": "1091200",
    "end": "1096640"
  },
  {
    "text": "three three weeks right and and so uh we've we spent a lot of time with our",
    "start": "1096640",
    "end": "1102720"
  },
  {
    "text": "teams to try and figure out what the like the 80 20 90 10 rule and figure out what's the best default that we can do",
    "start": "1102720",
    "end": "1110080"
  },
  {
    "text": "and then also make sure that when we we create these templates and clone them into the git repos when they create the",
    "start": "1110080",
    "end": "1116240"
  },
  {
    "text": "service there's also an easy way for them to to change those values in case they need to customize them with custom",
    "start": "1116240",
    "end": "1121760"
  },
  {
    "text": "metrics or change the values that that we provide",
    "start": "1121760",
    "end": "1126080"
  },
  {
    "text": "how are we doing time-wise um so what's next so some of the other things we're looking at",
    "start": "1127600",
    "end": "1133679"
  },
  {
    "text": "traffic mirroring is supported in service mesh we have some services that don't even",
    "start": "1133679",
    "end": "1139440"
  },
  {
    "text": "want to do progressive delivery at all they want to make sure they do an apple styles comparison so",
    "start": "1139440",
    "end": "1144559"
  },
  {
    "text": "traffic mirroring traffic shadowing traffic cloning whatever you want to call it basically doing a a",
    "start": "1144559",
    "end": "1151039"
  },
  {
    "text": "a new path where you send off a certain amount of production traffic to a stack that your users aren't on right so that",
    "start": "1151039",
    "end": "1158160"
  },
  {
    "text": "you can test those two stacks against each other without really affecting any users so we're looking at how we can use",
    "start": "1158160",
    "end": "1163280"
  },
  {
    "text": "that for for argo rollouts uh argo rollouts can do the canaries based",
    "start": "1163280",
    "end": "1170000"
  },
  {
    "text": "on on pods and just do do weight basically or we can do",
    "start": "1170000",
    "end": "1175679"
  },
  {
    "text": "percentage traffic you know 10 traffic scale up to 30 what not but there are use cases where you want to do something",
    "start": "1175679",
    "end": "1181840"
  },
  {
    "text": "a little bit smarter than i do it on maybe some people from a certain region or some that use a specific browser or whatever",
    "start": "1181840",
    "end": "1189360"
  },
  {
    "text": "go to the canary right so so we're also looking at using header-based routing so we can be doing a bit more intelligent",
    "start": "1189360",
    "end": "1195840"
  },
  {
    "text": "canaries rather than just a percentage based of of the traffic and i think the biggest thing that we're that we're",
    "start": "1195840",
    "end": "1201039"
  },
  {
    "text": "really excited about is anomaly detection and observability because even if you have these analysis templates run",
    "start": "1201039",
    "end": "1207039"
  },
  {
    "text": "these analysis before we do our progressive delivery it's still you know a fairly rudimentary",
    "start": "1207039",
    "end": "1212960"
  },
  {
    "text": "measurement of just being a metric right so what if we can do something a lot smarter than that we have a lot of data",
    "start": "1212960",
    "end": "1220320"
  },
  {
    "text": "scientists we do a lot of ml into it what if we can take our all our",
    "start": "1220320",
    "end": "1225360"
  },
  {
    "text": "operational data and utilize some of all that ml knowledge we have and and figure out something a smarter way of measuring",
    "start": "1225360",
    "end": "1231760"
  },
  {
    "text": "if if the rollout is progressing the way it should rather than just looking at you know cpu usage memory usage or http",
    "start": "1231760",
    "end": "1238240"
  },
  {
    "text": "requests which are still pretty pretty crude right so if you can use ml to figure out an anomaly score or",
    "start": "1238240",
    "end": "1245840"
  },
  {
    "text": "a good measure of how the application is doing that's a much better way of and will give engineers even you know",
    "start": "1245840",
    "end": "1251679"
  },
  {
    "text": "greater trust in the system if if it's healthy or not and you can take that even a step further why stop at",
    "start": "1251679",
    "end": "1258880"
  },
  {
    "text": "the progressive delivery you know if if you can figure out when your application has an anomaly why",
    "start": "1258880",
    "end": "1266480"
  },
  {
    "text": "wouldn't you want to run that all the time right it might not be part of the the delivery process but it might be",
    "start": "1266480",
    "end": "1272240"
  },
  {
    "text": "something might happen once you've fully promoted 100 what about something happening two days down the line right",
    "start": "1272240",
    "end": "1278559"
  },
  {
    "text": "you would still want to hey something anomalous happened i want to roll back so that's also something that we're",
    "start": "1278559",
    "end": "1284880"
  },
  {
    "text": "looking into how can we how can we not just make the roll out of a new version better but",
    "start": "1284880",
    "end": "1290000"
  },
  {
    "text": "also you know increase the reliability and and fault detection for the services",
    "start": "1290000",
    "end": "1295120"
  },
  {
    "text": "that run in our system after we fully promoted the canary",
    "start": "1295120",
    "end": "1300799"
  },
  {
    "text": "and i think with that we're going to switch over to to a live demo great other than uh normally detection my",
    "start": "1300960",
    "end": "1307760"
  },
  {
    "text": "favorite is the header based routing because you can do dark releases so we can do during the tax filling only henrik's",
    "start": "1307760",
    "end": "1314400"
  },
  {
    "text": "taxes to go through the new version right",
    "start": "1314400",
    "end": "1319000"
  },
  {
    "text": "okay so we knew that there will be some interest although yeah the room is like really full we would like to entertain",
    "start": "1319600",
    "end": "1326000"
  },
  {
    "text": "you a little bit with live demo hopefully it will all work let me quickly show you",
    "start": "1326000",
    "end": "1332799"
  },
  {
    "text": "what i have in the demo",
    "start": "1332799",
    "end": "1340679"
  },
  {
    "text": "this will be probably slow let me explain what the application that i'm",
    "start": "1350320",
    "end": "1356240"
  },
  {
    "text": "going to deploy so people that are experienced with with argo probably have seen such them",
    "start": "1356240",
    "end": "1361360"
  },
  {
    "text": "or have done this for themselves but i just want to go through it one more time",
    "start": "1361360",
    "end": "1369120"
  },
  {
    "text": "so i have three notes and in the cluster i have argo rollouts",
    "start": "1370799",
    "end": "1377760"
  },
  {
    "text": "and i have istio in a demo mode",
    "start": "1377760",
    "end": "1382880"
  },
  {
    "text": "and these two version is the latest one that i think is available right now 13.3",
    "start": "1384240",
    "end": "1389280"
  },
  {
    "text": "i will go back to this in a moment meanwhile i would like to show the application",
    "start": "1389280",
    "end": "1394880"
  },
  {
    "text": "that i'm going to deploy very simple so this is version one that i will deploy now initially and version 1 just says",
    "start": "1394880",
    "end": "1402080"
  },
  {
    "text": "hello valencia that's it once this is done i will i will deploy",
    "start": "1402080",
    "end": "1407679"
  },
  {
    "text": "version 2 and i artificially added some errors so",
    "start": "1407679",
    "end": "1414400"
  },
  {
    "text": "other than i added hello valencia with an error and actually i sent the http",
    "start": "1414400",
    "end": "1419520"
  },
  {
    "text": "500 statoscope this means uh argoroad need to figure out that something is wrong and throwback",
    "start": "1419520",
    "end": "1425600"
  },
  {
    "text": "and when it rolls back hopefully i will deploy version 3 which is again",
    "start": "1425600",
    "end": "1430960"
  },
  {
    "text": "healthy version so the status code is 200 and the message should be hello",
    "start": "1430960",
    "end": "1436000"
  },
  {
    "text": "valencia from into it",
    "start": "1436000",
    "end": "1439880"
  },
  {
    "text": "okay yeah i will fix this",
    "start": "1442840",
    "end": "1447840"
  },
  {
    "text": "so the algorith version is again the latest one i will create a namespace called kubecon",
    "start": "1451360",
    "end": "1460400"
  },
  {
    "text": "i will label it so to be enabled for istio",
    "start": "1460400",
    "end": "1467600"
  },
  {
    "text": "actually let me let me i will run a curve that will print the body and the status code",
    "start": "1468320",
    "end": "1475120"
  },
  {
    "text": "so right now there is no application deployed so it is 400",
    "start": "1475120",
    "end": "1480000"
  },
  {
    "text": "and i will deploy the first version",
    "start": "1481039",
    "end": "1487080"
  },
  {
    "text": "so the application responds to this fqdn and i'm deploying the first version",
    "start": "1487760",
    "end": "1496360"
  },
  {
    "text": "okay good catch can you send pr please",
    "start": "1508559",
    "end": "1513720"
  },
  {
    "text": "okay takes some time",
    "start": "1525120",
    "end": "1529158"
  },
  {
    "text": "hmm",
    "start": "1547679",
    "end": "1550679"
  },
  {
    "text": "yeah this is the problem with the live demo you cannot rely on the fluctuation in the internet",
    "start": "1556080",
    "end": "1561760"
  },
  {
    "text": "speed so",
    "start": "1561760",
    "end": "1564559"
  },
  {
    "text": "okay so the first version is the point let me see",
    "start": "1568400",
    "end": "1574159"
  },
  {
    "text": "okay so i have the i have two pots running and you can see it is hello okay typos with 200 status",
    "start": "1582880",
    "end": "1590559"
  },
  {
    "text": "code",
    "start": "1590559",
    "end": "1593559"
  },
  {
    "text": "so what i have in the row out here uh so you can see the strategies canary and",
    "start": "1598159",
    "end": "1603760"
  },
  {
    "text": "taiwan i want dynamic analysis and the canary service name is this one and the stable",
    "start": "1603760",
    "end": "1610159"
  },
  {
    "text": "service name is this one and the progress will happen like this 10 percent of the traffic will be directed to the canary version and we will wait",
    "start": "1610159",
    "end": "1616880"
  },
  {
    "text": "for one minute to make analysis then if everything is good you progress to the 30 percent we will wait for 30",
    "start": "1616880",
    "end": "1623200"
  },
  {
    "text": "seconds then the half of the traffic you wait for another another 30 seconds and you see that we are doing traffic router",
    "start": "1623200",
    "end": "1629840"
  },
  {
    "text": "routing with uh istio and we modify the virtual service i will actually show you",
    "start": "1629840",
    "end": "1634880"
  },
  {
    "text": "the virtual service in a moment so i will deploy the second version",
    "start": "1634880",
    "end": "1641840"
  },
  {
    "text": "yeah this is probably something that takes time",
    "start": "1643200",
    "end": "1648039"
  },
  {
    "text": "hmm",
    "start": "1655200",
    "end": "1658200"
  },
  {
    "text": "hmm",
    "start": "1669840",
    "end": "1672840"
  },
  {
    "text": "hmm please hold on i'm sure it will happen",
    "start": "1707039",
    "end": "1714880"
  },
  {
    "text": "you can see so now the new version is hello",
    "start": "1714880",
    "end": "1720720"
  },
  {
    "text": "valencia with status with error and status code 500",
    "start": "1720720",
    "end": "1726320"
  },
  {
    "text": "so you can see the virtual service in istio right now has",
    "start": "1726320",
    "end": "1732120"
  },
  {
    "text": "98.90 for the primary and 10 for the canary version and this is modified by",
    "start": "1732120",
    "end": "1737679"
  },
  {
    "text": "the by our robots so now",
    "start": "1737679",
    "end": "1743520"
  },
  {
    "text": "if we watch here my configuration is to wait 60 seconds or one minute",
    "start": "1743520",
    "end": "1749279"
  },
  {
    "text": "before start analysis right now we have 43 seconds 44 so it",
    "start": "1749279",
    "end": "1754320"
  },
  {
    "text": "should go to 30 percent in a second and start the analysis you can see",
    "start": "1754320",
    "end": "1760399"
  },
  {
    "text": "from time to time i'm getting this error",
    "start": "1760399",
    "end": "1765080"
  },
  {
    "text": "so yeah the analysis just run and my configuration is if it need to do to go",
    "start": "1775679",
    "end": "1783200"
  },
  {
    "text": "three times and if the three time it fails uh it will it will fail back on",
    "start": "1783200",
    "end": "1788240"
  },
  {
    "text": "the fourth time and you go back to the original version of the application",
    "start": "1788240",
    "end": "1795080"
  },
  {
    "text": "yeah so now it is supporting back and it will terminate this spot and you can",
    "start": "1801120",
    "end": "1806399"
  },
  {
    "text": "see all the messages now going back to the original version with statos code 200",
    "start": "1806399",
    "end": "1812480"
  },
  {
    "text": "and again to show you the virtual service in istio so the the weight for the new",
    "start": "1815919",
    "end": "1822080"
  },
  {
    "text": "version is zero and all the traffic goes to the original version",
    "start": "1822080",
    "end": "1827600"
  },
  {
    "text": "i will deploy now the healthy version three",
    "start": "1827600",
    "end": "1832640"
  },
  {
    "text": "hopefully it will take less time than earlier so this one if i go back",
    "start": "1832640",
    "end": "1838720"
  },
  {
    "text": "here you will see that this one sends stethoscope http 200 so it should be successful and",
    "start": "1838720",
    "end": "1845760"
  },
  {
    "text": "it should say hello okay valencia",
    "start": "1845760",
    "end": "1851398"
  },
  {
    "text": "i run through the demo just before the session started and it wasn't that",
    "start": "1863440",
    "end": "1868640"
  },
  {
    "text": "slow",
    "start": "1868640",
    "end": "1871640"
  },
  {
    "text": "so this probably will be the time for questions but we will stay longer and we can chat after this",
    "start": "1881360",
    "end": "1888759"
  },
  {
    "text": "yeah we have about three minutes left yeah it's done so this is the last version",
    "start": "1899200",
    "end": "1905880"
  },
  {
    "text": "thanks any questions so this will progress in a moment to",
    "start": "1917919",
    "end": "1923279"
  },
  {
    "text": "complete but yeah we can we can take questions now i think yes and you're you're using argo and",
    "start": "1923279",
    "end": "1929919"
  },
  {
    "text": "istio to keep uh your application up to date what are you using to keep argo and istio up to date",
    "start": "1929919",
    "end": "1935760"
  },
  {
    "text": "yeah so we are using cargo cd to use this uh up to date so we go to 100",
    "start": "1935760",
    "end": "1941919"
  },
  {
    "text": "gitobs so our configuration is in githubs and targo cd synchronize the configuration for those tools",
    "start": "1941919",
    "end": "1950080"
  },
  {
    "text": "a new question up yep the question i repeat the question",
    "start": "1956880",
    "end": "1962360"
  },
  {
    "text": "yeah because if i add one more component here it will take more time so if i add a targo cd and send prs to github with",
    "start": "1965200",
    "end": "1971919"
  },
  {
    "text": "you that's one more component that cannot latencies i just wanted to focus on argo rollouts and service mesh",
    "start": "1971919",
    "end": "1978320"
  },
  {
    "text": "otherwise in reality we are using cargo cd yes yeah another question down there yeah so",
    "start": "1978320",
    "end": "1984480"
  },
  {
    "text": "so i i have a question um right now we",
    "start": "1984480",
    "end": "1989600"
  },
  {
    "text": "we look at the http status code right and if it's not 200 we roll it back and",
    "start": "1989600",
    "end": "1996320"
  },
  {
    "text": "it's just possible to look at some other metrics like a cough car q nance or",
    "start": "1996320",
    "end": "2002880"
  },
  {
    "text": "some speechless metrics now payments success rates i mean you for example for the for the",
    "start": "2002880",
    "end": "2008960"
  },
  {
    "text": "analysis templates you can basically use and anything that can be served as a metrics i mean we we go to prometheus so",
    "start": "2008960",
    "end": "2015919"
  },
  {
    "text": "basically anything that you can serve as a metric through for me that you can use to base your analysis templates on",
    "start": "2015919",
    "end": "2021600"
  },
  {
    "text": "oh that's cool thank you any other questions",
    "start": "2021600",
    "end": "2026640"
  },
  {
    "text": "yeah great does your service mesh cross like vpc",
    "start": "2026640",
    "end": "2032640"
  },
  {
    "text": "boundaries or cloud boundaries uh and if so like how are you managing that like cross ppc cross cloud connection that's",
    "start": "2032640",
    "end": "2040000"
  },
  {
    "text": "correct we have a kubernetes cluster per vpc or eks question per vpc and",
    "start": "2040000",
    "end": "2045760"
  },
  {
    "text": "we have also issued instance per vpc however it is the same mesh across all clusters",
    "start": "2045760",
    "end": "2053280"
  },
  {
    "text": "yeah and i think under the mesh we are using uh transit gateway for connecting different",
    "start": "2053679",
    "end": "2060240"
  },
  {
    "text": "vpcs and actually this succeeded",
    "start": "2060240",
    "end": "2066960"
  },
  {
    "text": "eventually thank you",
    "start": "2067440",
    "end": "2072839"
  },
  {
    "text": "do you have time for one final question yeah i still have audio so let's do one more you use rcd to",
    "start": "2075200",
    "end": "2080398"
  },
  {
    "text": "deploy algorithms but what do you use to deploy argo city keep it up to date argo cd",
    "start": "2080399",
    "end": "2085919"
  },
  {
    "text": "and what breaks so we have so we have uh we have a number of argo cds like basically what",
    "start": "2085919",
    "end": "2092240"
  },
  {
    "text": "each one of our business entities has their own organ cd and then we have an argo cd that manages the the other argo",
    "start": "2092240",
    "end": "2097839"
  },
  {
    "text": "cds so uh what's what's the initial rxd how do you deploy it how do you play zero zero day rcd",
    "start": "2097839",
    "end": "2104800"
  },
  {
    "text": "sorry like who is the first",
    "start": "2104800",
    "end": "2110240"
  },
  {
    "text": "what is the first target cd is the question right yeah so the he means when you first bootstrap the",
    "start": "2110240",
    "end": "2116079"
  },
  {
    "text": "first ever argo city how do you go about doing the first one so when we started",
    "start": "2116079",
    "end": "2122000"
  },
  {
    "text": "argo when we did the very first one uh yeah like the bootstrap our cd that you use to deploy other city clusters",
    "start": "2122000",
    "end": "2128640"
  },
  {
    "text": "yeah so that one has been there for a while and i i wasn't there when i was done but i assumed that was done manually i don't know to be honest",
    "start": "2128640",
    "end": "2134800"
  },
  {
    "text": "actually yeah we have we have argo cds add-on for the eks cluster so when you deploy the",
    "start": "2134800",
    "end": "2140160"
  },
  {
    "text": "kubernetes cluster it goes pre-built with targo cd and all the services that you deploy in this cluster already rely",
    "start": "2140160",
    "end": "2146320"
  },
  {
    "text": "on the argo cd cluster with the with so it is not done in the kubernetes cluster yeah so for new clusters it gets",
    "start": "2146320",
    "end": "2152560"
  },
  {
    "text": "yeah it's part of the bootstrap but the original one is old thank you thanks",
    "start": "2152560",
    "end": "2159200"
  },
  {
    "text": "thanks everyone",
    "start": "2159200",
    "end": "2162440"
  }
]