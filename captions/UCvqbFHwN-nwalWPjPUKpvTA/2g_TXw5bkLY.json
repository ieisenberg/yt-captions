[
  {
    "text": "so what I'm going to talk about today so to begin with I'm going to introduce you something called micro VMS and explain what they are I'm then going to talk",
    "start": "420",
    "end": "7259"
  },
  {
    "text": "about the liquid metal project which is maintained and sponsored by weaveworks I'm going to talk about why the liquid",
    "start": "7259",
    "end": "13620"
  },
  {
    "text": "metal project and microvms is are useful and then I'm going to demo the thing",
    "start": "13620",
    "end": "21560"
  },
  {
    "text": "so let's begin with an introduction to micro VMS",
    "start": "21900",
    "end": "27420"
  },
  {
    "text": "so let me just expand my notes a little bit bigger there we go microamps are exactly what they sound like they are",
    "start": "27420",
    "end": "33899"
  },
  {
    "text": "smaller VMS they are smaller subset a virtualization tailored for a specific need so you don't have any unnecessary",
    "start": "33899",
    "end": "39960"
  },
  {
    "text": "overhead this makes them almost almost as fast you put up and tear down as",
    "start": "39960",
    "end": "46379"
  },
  {
    "text": "containers so if you think of your standard VM it has to be ready to run any operating system for any possible UK",
    "start": "46379",
    "end": "52140"
  },
  {
    "text": "use case you don't know what people are going to throw at it it's going to be ready for anything which means the hypervisor has to do a lot of work and",
    "start": "52140",
    "end": "57480"
  },
  {
    "text": "allocate a ton of resources to accommodate any of these possible scenarios uh with a micro VM you tell the",
    "start": "57480",
    "end": "64619"
  },
  {
    "text": "hypervisor to basically half-ass it and only set up the exact things that you need so like if you don't need any",
    "start": "64619",
    "end": "70799"
  },
  {
    "text": "hardware device devices or you need one or two you only do those things um so microbeans are designed to give",
    "start": "70799",
    "end": "78420"
  },
  {
    "text": "you the best of both worlds so uh VMS give security containers give",
    "start": "78420",
    "end": "85500"
  },
  {
    "text": "you speed so in this case you have the speed of almost as fast as a container with the",
    "start": "85500",
    "end": "92040"
  },
  {
    "text": "security of having your own kernel your own operating because I know containers have your own operating system but here you have your own sandbox environments",
    "start": "92040",
    "end": "98040"
  },
  {
    "text": "to do whatever it is that you like um and because you're excluding a lot of",
    "start": "98040",
    "end": "103860"
  },
  {
    "text": "unnecessary um functionality you have a lesser attack surface anyway",
    "start": "103860",
    "end": "109740"
  },
  {
    "text": "so those are microbms so what is the liquid metal project and why are microbm is relevant for it",
    "start": "109740",
    "end": "115200"
  },
  {
    "text": "so liquid metal are a is a set of tools to declaratively",
    "start": "115200",
    "end": "121860"
  },
  {
    "text": "provision kubernetes clusters on lightweight VMS so micro VMS",
    "start": "121860",
    "end": "127320"
  },
  {
    "text": "um so there this is built and maintained and sponsored by weaveworks and it's comprised of these four components that",
    "start": "127320",
    "end": "133020"
  },
  {
    "text": "I'm going to go through right now so the first one is Flintlock and I'm now regretting not",
    "start": "133020",
    "end": "140340"
  },
  {
    "text": "having any notes here because I had to keep looking up to see what's on the slide so Flintlock creates and manages uh the",
    "start": "140340",
    "end": "148200"
  },
  {
    "text": "life cycle of microbms so it's a grp series I've written ago and it runs on a",
    "start": "148200",
    "end": "153239"
  },
  {
    "text": "bare metal host it can technically Run Anywhere But Here I'm talking about bare metal hosts and you say I would like a micro VM I would like a ephemeral",
    "start": "153239",
    "end": "160440"
  },
  {
    "text": "throwaway environment started out really fast to run a very specific use case and Flintlock will handle that for you",
    "start": "160440",
    "end": "166920"
  },
  {
    "text": "um see it's too small here so this Flintlock can technically be",
    "start": "166920",
    "end": "172739"
  },
  {
    "text": "used independently of liquid metal and I actually do this myself sometimes if I want to create a micro VM real quick to run some tests and I don't really want",
    "start": "172739",
    "end": "179640"
  },
  {
    "text": "to use a container because it doesn't give me enough functionality for the test I want to run I'll quickly spin up Flintlock but it is primarily designed",
    "start": "179640",
    "end": "185519"
  },
  {
    "text": "to run kubernetes nodes and it works with cluster API provider",
    "start": "185519",
    "end": "191040"
  },
  {
    "text": "micro VM so cap MBM is a Cappy provider it's an infrastructure provider so when",
    "start": "191040",
    "end": "196980"
  },
  {
    "text": "you're operating a brand new Cappy workbook cluster you say I want to use cap NVM I want to create my kubernetes",
    "start": "196980",
    "end": "203280"
  },
  {
    "text": "nodes in microbms on bare metal um Hardware",
    "start": "203280",
    "end": "209519"
  },
  {
    "text": "so this as well as the flintlock components they're both open source in",
    "start": "209519",
    "end": "215700"
  },
  {
    "text": "the weedworks liquid metal organization and yeah that's all I've got on that side",
    "start": "215700",
    "end": "221099"
  },
  {
    "text": "sorry again and then it comes to fire cracker and Cloud hypervisor so these are both open",
    "start": "221099",
    "end": "228480"
  },
  {
    "text": "source bmms [Music]",
    "start": "228480",
    "end": "234200"
  },
  {
    "text": "they're written in Rust and they're basically the core uh process executors they're the things that are creating the",
    "start": "234200",
    "end": "240120"
  },
  {
    "text": "microbm so Flintlock is wrapping either one of these two so you can choose the one you want and that this will",
    "start": "240120",
    "end": "246840"
  },
  {
    "text": "um they're based on the KVM in Linux and so Flintlock will call out to either one",
    "start": "246840",
    "end": "251879"
  },
  {
    "text": "of these and create startup process which will run as a microbm and then on once that's booted you can then start",
    "start": "251879",
    "end": "258180"
  },
  {
    "text": "your kubernetes node so the last component I want to mention is containerd",
    "start": "258180",
    "end": "264000"
  },
  {
    "text": "you all know what this is you've seen it in kubernetes and Docker running containers and stuff in our case in",
    "start": "264000",
    "end": "270300"
  },
  {
    "text": "liquid Metals case we use it to pull down images so when you start your microgram you say I want this kernel I",
    "start": "270300",
    "end": "276479"
  },
  {
    "text": "want these kernel modules I want this operating system contained Egos and fetches those and prepares them for mounting into the microbien",
    "start": "276479",
    "end": "284699"
  },
  {
    "text": "so let's just go through what I said but with pictures so this is me you whatever uh talking to",
    "start": "284699",
    "end": "292979"
  },
  {
    "text": "a cafe management cluster let's pretend it's on my Dell and it's the client cluster I've got Cappy controllers running I've got cap NVM running",
    "start": "292979",
    "end": "300419"
  },
  {
    "text": "and so I apply my manifest and I say I want I know three kubernetes whatever",
    "start": "300419",
    "end": "305580"
  },
  {
    "text": "I'm gonna cluster um happy and then we'll look at my list of bare metal hosts and it will go and",
    "start": "305580",
    "end": "311520"
  },
  {
    "text": "talk to each one of them and it will go and talk to Flintlock the grpc service running on each of those hosts and say",
    "start": "311520",
    "end": "316620"
  },
  {
    "text": "Hey I want a micro game flat note will say okay it will go to",
    "start": "316620",
    "end": "321900"
  },
  {
    "text": "contain the DC all right I need this kernel I need these kernel modules and I need this operating system go get them containerdy does that once that's down",
    "start": "321900",
    "end": "329100"
  },
  {
    "text": "one too fast once that's down uh Flintlock D will talk to firecracker and",
    "start": "329100",
    "end": "334560"
  },
  {
    "text": "firecracker will then boot the process so it will start a process it looks a lot like a container actually because as",
    "start": "334560",
    "end": "339660"
  },
  {
    "text": "you know containers are just processes they're not actually real so it when you're looking at on the command line it",
    "start": "339660",
    "end": "344940"
  },
  {
    "text": "looks like a process so firecracker will start the microbm process um at which point",
    "start": "344940",
    "end": "350820"
  },
  {
    "text": "um I assume we'll know how Cappy works but Cappy will have set up some user data to bootstrap the machine into a uh",
    "start": "350820",
    "end": "358860"
  },
  {
    "text": "into a kubernetes node that will run the kubernetes number started and then I can use that as like a",
    "start": "358860",
    "end": "365699"
  },
  {
    "text": "cluster doing stuff whatever you use on cluster for um so use cases",
    "start": "365699",
    "end": "372960"
  },
  {
    "text": "why would you want to use Liquid Metal why microbm's cool why all of this so these are all kind of related so the",
    "start": "372960",
    "end": "378960"
  },
  {
    "text": "first obvious one is Edge Computing micrograms they have a lower footprint so you kind of can just use them at the edge we have a resource environments",
    "start": "378960",
    "end": "385620"
  },
  {
    "text": "that makes sense uh similar against number two so I've got like a home lab here this is my Raspberry Pi stuff I'm",
    "start": "385620",
    "end": "391440"
  },
  {
    "text": "going to get on tonight I know this is why you came you didn't come to listen to me talk about it like it's coming it's coming I promise",
    "start": "391440",
    "end": "397500"
  },
  {
    "text": "um bare metal again he's all really related I know I was just trying to write the list right um and the last one is an actual",
    "start": "397500",
    "end": "402900"
  },
  {
    "text": "practical use case which is CI spell posted Runners because if you want to maybe run tests more efficiently but",
    "start": "402900",
    "end": "409800"
  },
  {
    "text": "containers aren't quite doing it for you uh this is actually a very practical use case you don't have to you don't want to",
    "start": "409800",
    "end": "415860"
  },
  {
    "text": "Raspberry Pi again this is a toy you don't have to on a Raspberry Pi but you can do CI Runners on actual larger",
    "start": "415860",
    "end": "420960"
  },
  {
    "text": "systems so demo okay",
    "start": "420960",
    "end": "428160"
  },
  {
    "text": "so yeah this is the use case this is a proof of concept and I cannot stress that enough it is a proof of concept that I wrote just for this conference",
    "start": "429419",
    "end": "437039"
  },
  {
    "text": "um so I'm using self-hosted Hub actions and I've got a liquid metal cluster running on these Raspberry Pi boards",
    "start": "437039",
    "end": "445139"
  },
  {
    "text": "so the bear mustard cluster and what I'm going to do is I'm going to run some example CI jobs on a mixture of",
    "start": "445139",
    "end": "452340"
  },
  {
    "text": "ephemeral pots running inside my liquid metal cluster and dedicated ad hoc micro",
    "start": "452340",
    "end": "457919"
  },
  {
    "text": "VMS uh there are some next people who are watching the slides later",
    "start": "457919",
    "end": "463319"
  },
  {
    "text": "so what components am I using I'm using something called the actions Runner controller uh this is an open source",
    "start": "463319",
    "end": "468720"
  },
  {
    "text": "project um I can't remember if you started I believe it's sponsored by hellofresh it's now part of like the official GitHub actions organization",
    "start": "468720",
    "end": "475580"
  },
  {
    "text": "is because I can see the URL moved um and it's quite cool it lets you",
    "start": "475580",
    "end": "481440"
  },
  {
    "text": "um create like a runner deployment where you can have like a pool of ephemeral Runners that are just in pods they will",
    "start": "481440",
    "end": "486599"
  },
  {
    "text": "be registered as Runners and GitHub actions and when you start a job it will run in the Pod and then it will self-destruct afterwards and you'll get",
    "start": "486599",
    "end": "492300"
  },
  {
    "text": "a brand new pod very exciting the other component I'm doing and this",
    "start": "492300",
    "end": "498120"
  },
  {
    "text": "is the one that I made for for this demo is the microbm action Runner it's a proof of concept",
    "start": "498120",
    "end": "504479"
  },
  {
    "text": "um it's an HTTP service and it responds to a GitHub web hook so it will create ads about microbm so whenever you run a",
    "start": "504479",
    "end": "512099"
  },
  {
    "text": "job um saying that you want you know a dedicated micro VM it will spin up a new",
    "start": "512099",
    "end": "517260"
  },
  {
    "text": "micro VM on one of my boards run the job and then kill it afterwards [Music] um I had hoped to do this really nicely",
    "start": "517260",
    "end": "526020"
  },
  {
    "text": "like have a controller hot pools and some scaling but I I quit",
    "start": "526020",
    "end": "532260"
  },
  {
    "text": "we've worked like a month ago and then I hadn't actually had time to do the thing so I'm really sorry for service but you",
    "start": "532260",
    "end": "537839"
  },
  {
    "text": "know dream big imagine it's going to be really cool well cooler okay this is yeah",
    "start": "537839",
    "end": "545040"
  },
  {
    "text": "so benefits why would anyone want to go through the hassle of setting up a separate CI system why not use Jenkins",
    "start": "545040",
    "end": "554160"
  },
  {
    "text": "um so there's a lot of benefits I've only had a certain number of space on the",
    "start": "554160",
    "end": "559380"
  },
  {
    "text": "slide so I kind of just crushing old one so CI infrastructure is kind of I know when you think about the eye infrastructure it's kind of a bit of an",
    "start": "559380",
    "end": "565080"
  },
  {
    "text": "add-on when you're in a cloud native software shop we use you know Jenkins restart the cibs GitHub actions and so",
    "start": "565080",
    "end": "572160"
  },
  {
    "text": "it's kind of old-fashioned there's a lot of traditional Legacy infrastructure going on there which is a bit of a bottleneck",
    "start": "572160",
    "end": "578279"
  },
  {
    "text": "um micrograms are actually sort of more performant and because they have a lower overhead when it comes to setup that you",
    "start": "578279",
    "end": "585120"
  },
  {
    "text": "can get higher you know faster feedback on your tests and you end up using obviously because they're smaller you",
    "start": "585120",
    "end": "591060"
  },
  {
    "text": "have a higher utilization of your Runa infrastructure you're using more of the box that is running on rather than",
    "start": "591060",
    "end": "596580"
  },
  {
    "text": "starting up a huge VM which takes up more room than it needs um and you know you end up your tests",
    "start": "596580",
    "end": "602160"
  },
  {
    "text": "end up using very listen of it so traditional Runners have a long wait spin-up times microbms reduce that",
    "start": "602160",
    "end": "609899"
  },
  {
    "text": "um traditional CIA provides speed at the cost of complexity and or safety because yes you can run your CI in in Docker I",
    "start": "609899",
    "end": "616380"
  },
  {
    "text": "know GitHub actually gives you this but it's kind of encourages Docker and Docker or encourages privileged house",
    "start": "616380",
    "end": "622140"
  },
  {
    "text": "access and other workarounds which isn't massively secure um as I said before microbms provide the",
    "start": "622140",
    "end": "628080"
  },
  {
    "text": "flexibility of container builds with actual sandboxing so you don't doesn't share they don't share kernels with a",
    "start": "628080",
    "end": "633839"
  },
  {
    "text": "host and they don't require any privilege they have everything that they need to test all the crazy stuff that you're doing without anything interfering on the post",
    "start": "633839",
    "end": "641640"
  },
  {
    "text": "um CI infrastructure often requires that Runners are available from a hot pool of notes because I know I",
    "start": "641640",
    "end": "646860"
  },
  {
    "text": "said earlier you know traditional CI takes a long time to spin up you're thinking no it doesn't I have my Ubuntu VM at ready immediately yes because",
    "start": "646860",
    "end": "652079"
  },
  {
    "text": "there's a hot pool running all the time um and if you think of so get her back times for example because that's what",
    "start": "652079",
    "end": "657720"
  },
  {
    "text": "I'm using but I think they're using Azure or ec2 VMS I can't remember which they are running constantly to accommodate hundreds of thousands of",
    "start": "657720",
    "end": "664079"
  },
  {
    "text": "builds a minute probably so there's this stuff running all the damn time like rims you don't actually need that",
    "start": "664079",
    "end": "670019"
  },
  {
    "text": "because they start fast enough but unless you need an answer within three seconds you can wait 20 seconds for the",
    "start": "670019",
    "end": "675300"
  },
  {
    "text": "thing to start then run and you're golden you don't need all these massive VMS just waiting spinning for something",
    "start": "675300",
    "end": "682140"
  },
  {
    "text": "to pick it up um and Mike Williams let you test things that require low level things like a net",
    "start": "682140",
    "end": "687899"
  },
  {
    "text": "system D other you know lower level kernel things um containers and containers and many",
    "start": "687899",
    "end": "693060"
  },
  {
    "text": "other CI Runners don't let you do this for example when I was testing split look itself on GitHub actions I couldn't because they don't enable the KVM I",
    "start": "693060",
    "end": "699000"
  },
  {
    "text": "couldn't do that so that was opinion but now we've done through Flintlock to test and look itself it's like contestant",
    "start": "699000",
    "end": "705300"
  },
  {
    "text": "look on this which is actually really neat and other things that you're running tests at panels like you've got a ebpf",
    "start": "705300",
    "end": "712320"
  },
  {
    "text": "programmer so you can you can run those in micrograms where you can't run them in containers or a lot of traditional CI",
    "start": "712320",
    "end": "717959"
  },
  {
    "text": "so I need a drink now okay there we go Nikki am I speaking",
    "start": "717959",
    "end": "724140"
  },
  {
    "text": "slowly enough sorry do you need to check that okay",
    "start": "724140",
    "end": "730140"
  },
  {
    "text": "um other benefits are environmentally related um because you've got faster builds and",
    "start": "730140",
    "end": "735720"
  },
  {
    "text": "start times you're actually reducing your average time to results so that's always nice as I said before warm pools",
    "start": "735720",
    "end": "741360"
  },
  {
    "text": "aren't necessary unless you desperate you want them even if you do have them they're taking up less space so you're using your equipment more efficiency",
    "start": "741360",
    "end": "747839"
  },
  {
    "text": "and again because you're using the right size environment the smallest environment for your tests you end up",
    "start": "747839",
    "end": "753480"
  },
  {
    "text": "reducing the overall cost because you can fit more micrograms onto the same Hardware as you would regular VMS",
    "start": "753480",
    "end": "759200"
  },
  {
    "text": "build caches can be shared between Runners because they can be mounted which ensures we're not constantly",
    "start": "759200",
    "end": "765540"
  },
  {
    "text": "writing on change dependencies discs um I know that GitHub actions on the things to do this but it's not by Design",
    "start": "765540",
    "end": "771660"
  },
  {
    "text": "it's hack and finally um just my Koreans require lower disk",
    "start": "771660",
    "end": "777120"
  },
  {
    "text": "usage uh in general because they basically act like containers so you've got all the kernel layers all the operating system layers being",
    "start": "777120",
    "end": "783060"
  },
  {
    "text": "snapdropped and shared so you end up having less on disks to begin with",
    "start": "783060",
    "end": "788459"
  },
  {
    "text": "okay here's another picture still no demo for you yet um I'm just reiterating what I'm",
    "start": "788459",
    "end": "793620"
  },
  {
    "text": "shooting for so it's fresh in your mind so um what we've got here on the left is my laptop which is the Dell running my",
    "start": "793620",
    "end": "800639"
  },
  {
    "text": "kind management cluster it's running Kathy and Cath MVM then I've got four Raspberry Pi boards",
    "start": "800639",
    "end": "807540"
  },
  {
    "text": "um these are all model 4bs they're running Ubuntu 2004 because that's one I like they're four gigs of RAM and with",
    "start": "807540",
    "end": "815160"
  },
  {
    "text": "micro SD so they're a little bit slower simply because I didn't want to bring more stuff like ssds on here but yeah",
    "start": "815160",
    "end": "821820"
  },
  {
    "text": "we'll look at that it's fine so uh three of these boards are running a liquid metal cluster which I triggered",
    "start": "821820",
    "end": "827339"
  },
  {
    "text": "before I go on stage just because the demo was quite long already and I've only done one node per board because",
    "start": "827339",
    "end": "835620"
  },
  {
    "text": "there's not a lot going on there a really small micro SDs um so I've done",
    "start": "837079",
    "end": "842459"
  },
  {
    "text": "one no purple not just not to push it um and more importantly this is fun again this is fun this is a toy",
    "start": "842459",
    "end": "849720"
  },
  {
    "text": "don't use this as like professional setting okay",
    "start": "849720",
    "end": "855079"
  },
  {
    "text": "um okay some interesting stuff about the network if anyone cares so when Michael VM start they need an IP naturally",
    "start": "855420",
    "end": "862500"
  },
  {
    "text": "um I could just you know connected something to you know let it connect to uh to the Wi-Fi and get some automatic",
    "start": "862500",
    "end": "869100"
  },
  {
    "text": "you know allocated as they come up from the conference Wi-Fi but I wanted to control it so I have a DHCP server running on my Dell",
    "start": "869100",
    "end": "875760"
  },
  {
    "text": "um and the IPS are allocated from a private range in my dedicated VLAN which is configured by this managed switch",
    "start": "875760",
    "end": "883860"
  },
  {
    "text": "um so each like VM gets and like vtap interface with that IP which is parenting to the board's VLAN interface",
    "start": "883860",
    "end": "890339"
  },
  {
    "text": "which is parented to the board's ethernet interface traffic from and two VMS is then forwarded uh via Naturals",
    "start": "890339",
    "end": "898199"
  },
  {
    "text": "which are configured on the Dell so any traffic coming in on the VLAN subnet on these boards will get sent out",
    "start": "898199",
    "end": "905880"
  },
  {
    "text": "through my uh the Dell ethernet and then back again",
    "start": "905880",
    "end": "911040"
  },
  {
    "text": "um more pictures so this is a zoom out of the hackery to get this working and this",
    "start": "911040",
    "end": "916560"
  },
  {
    "text": "is what nearly broke me this morning when I tested it out to 10 a.m and it did not work because the network would",
    "start": "916560",
    "end": "922620"
  },
  {
    "text": "not connect because my hat originally began because I've done this at previous conferences before uh the hacking",
    "start": "922620",
    "end": "928680"
  },
  {
    "text": "originally began as a Wi-Fi extender which would connect to conference Wi-Fi and then I could plug in an ethernet cable to the switch then further",
    "start": "928680",
    "end": "935100"
  },
  {
    "text": "ethernet cables to all the boards in my Dell but the Wi-Fi extender trick wasn't working fortunately it was saved by the",
    "start": "935100",
    "end": "940320"
  },
  {
    "text": "AV guys who showed me there was an ethernet cable here so the day was saved you don't have to watch a recording",
    "start": "940320",
    "end": "945480"
  },
  {
    "text": "because if you watch recording then how do you know it's using Bulls at all it could just be using ec2 and it was all could have all been a fake out before we",
    "start": "945480",
    "end": "951660"
  },
  {
    "text": "know it is a fake out map actually I could be using ec2 these could be lights that I just turned on like you don't even know",
    "start": "951660",
    "end": "957779"
  },
  {
    "text": "um you can come find me off just to verify do you really want to um so why why did I go through all this",
    "start": "957779",
    "end": "964079"
  },
  {
    "text": "drama why did I not just connect to the conference Wi-Fi might be done with it uh four reasons one",
    "start": "964079",
    "end": "970500"
  },
  {
    "text": "um I wanted my own private Network I wanted to control the NAT traffic I wanted to control the DHCP the IP pool I",
    "start": "970500",
    "end": "975779"
  },
  {
    "text": "wanted it all to be private uh second one is when the liquid metal cluster starts it needs uh the API 789ip I need",
    "start": "975779",
    "end": "984060"
  },
  {
    "text": "to know what that is in advance because I can record some DNS or whatever so I couldn't exactly go and ask the conference people can I look at your",
    "start": "984060",
    "end": "989399"
  },
  {
    "text": "router to see where a free IP is in your pool that would be awkward so this way it's come from my private Network I know",
    "start": "989399",
    "end": "995699"
  },
  {
    "text": "what it is that's fine it's fine um the third reason is uh I wanted to power the boards over ethernet so I'm",
    "start": "995699",
    "end": "1001519"
  },
  {
    "text": "using a power over ethernet hat for each board I don't have a mess of cables turning it on so each board is getting",
    "start": "1001519",
    "end": "1007160"
  },
  {
    "text": "power and incent cable which is really cool and the last one is as I said",
    "start": "1007160",
    "end": "1013040"
  },
  {
    "text": "before the mic museums when they start they are created with like beat up interfaces and like vtab interfaces do",
    "start": "1013040",
    "end": "1019880"
  },
  {
    "text": "not work wirelessly they require a wired connection if you'll know more about that come find me after uh bring a",
    "start": "1019880",
    "end": "1025699"
  },
  {
    "text": "cookie and I will answer the question [Music] um also by the way I apologize for this",
    "start": "1025699",
    "end": "1032480"
  },
  {
    "text": "really attractive shoebox I kind of wanted to lift up to show it um and the shoe my running shoe box is kind of all",
    "start": "1032480",
    "end": "1038000"
  },
  {
    "text": "I had so sorry about that okay so I created the cluster ahead of time if you want to see how that",
    "start": "1038000",
    "end": "1043699"
  },
  {
    "text": "actually works I did I demoed that in kubernetes Community Days UK in November and I should have linked it here but I",
    "start": "1043699",
    "end": "1049820"
  },
  {
    "text": "forgot really sorry um so this is what I'm going to be showing so the first job is going to be running in the thermal pod so I'll",
    "start": "1049820",
    "end": "1056660"
  },
  {
    "text": "trigger a job in GitHub actions I'll trigger John and GitHub actions which will go to the action queue which",
    "start": "1056660",
    "end": "1062360"
  },
  {
    "text": "will be picked up by one of the runners which was started by the action Runner controller it will run the job self-destruct create a new one easy",
    "start": "1062360",
    "end": "1070100"
  },
  {
    "text": "uh the next one I will ask the job to be run in a dedicated micro VM so I'll",
    "start": "1070100",
    "end": "1075799"
  },
  {
    "text": "trigger the Dom and GitHub actions they'll get picked up by a web hook which will be sent to the micro VM",
    "start": "1075799",
    "end": "1081140"
  },
  {
    "text": "service which will talk to Flintlock on the top Raspberry Pi board and",
    "start": "1081140",
    "end": "1087500"
  },
  {
    "text": "um it will create a dedicated micro VM registered as a GitHub action runner for the job it will run the job it will",
    "start": "1087500",
    "end": "1093679"
  },
  {
    "text": "self-destruct and we're done um by the way the jobs that are going to run I did have them initially running",
    "start": "1093679",
    "end": "1099919"
  },
  {
    "text": "like go tests but then you have to wait for like the Go stuff to download and so it's just echoing like a string saying",
    "start": "1099919",
    "end": "1105799"
  },
  {
    "text": "congratulations your test pass um so we get to feel good about it",
    "start": "1105799",
    "end": "1111140"
  },
  {
    "text": "okay yeah let's let's demo the thing let's do it that's the backup video which you don't",
    "start": "1111140",
    "end": "1117380"
  },
  {
    "text": "have to watch so let me just you know actually I'm gonna mirror now I",
    "start": "1117380",
    "end": "1122960"
  },
  {
    "text": "think so I can see what I'm typing",
    "start": "1122960",
    "end": "1127419"
  },
  {
    "text": "no that's not what I want can someone like harm a theme tune to",
    "start": "1132320",
    "end": "1137360"
  },
  {
    "text": "something while I'm doing this just like some mood music",
    "start": "1137360",
    "end": "1141580"
  },
  {
    "text": "where are my display settings there we go mirror",
    "start": "1142820",
    "end": "1148480"
  },
  {
    "text": "you 'll do",
    "start": "1151520",
    "end": "1155919"
  },
  {
    "text": "all right I'm gonna how do I make it bigger like that no how do I does anyone know",
    "start": "1158419",
    "end": "1163820"
  },
  {
    "text": "how to work Ubuntu desktop I don't usually use this not that",
    "start": "1163820",
    "end": "1169460"
  },
  {
    "text": "oh there we go zoom in be bigger",
    "start": "1169460",
    "end": "1173200"
  },
  {
    "text": "is that big enough for everyone can people see stuff cool okay so lucky you this is all",
    "start": "1181100",
    "end": "1187760"
  },
  {
    "text": "scripted so nobody has to watch me type so I did this ahead of time but I'm just",
    "start": "1187760",
    "end": "1192919"
  },
  {
    "text": "going to show you what I did so you if you're following along at home these are the commands that you do to get this up and running so I've created my client",
    "start": "1192919",
    "end": "1198679"
  },
  {
    "text": "class set and yes that's exactly how fast client gets started on this machine",
    "start": "1198679",
    "end": "1204559"
  },
  {
    "text": "um I then set some uh cap MVM variables and I've done my cluster cuddle in it",
    "start": "1204559",
    "end": "1210919"
  },
  {
    "text": "you will know how this works and yay that happened really fast not even cert manager took that long to install this",
    "start": "1210919",
    "end": "1217160"
  },
  {
    "text": "time amazing I'm saying some more settings now for my",
    "start": "1217160",
    "end": "1223039"
  },
  {
    "text": "workload cluster so this is the cluster that will be applied the Sprint I haven't done it yet that will be applied to my my Raspberry Pi cluster here",
    "start": "1223039",
    "end": "1231919"
  },
  {
    "text": "so there we go I've set my IP I've set my work and machine counts at my control plane count just one control plane one",
    "start": "1231919",
    "end": "1237919"
  },
  {
    "text": "to two workers nothing massive here I've applied it",
    "start": "1237919",
    "end": "1243140"
  },
  {
    "text": "and yay it works cool let's have a look",
    "start": "1243140",
    "end": "1248840"
  },
  {
    "text": "at what that is so this is your workload cluster manifest if you're creating a cap MVM cluster uh most of it you",
    "start": "1248840",
    "end": "1254900"
  },
  {
    "text": "already know if you've done Cappy um key points are this is my list of uh",
    "start": "1254900",
    "end": "1261200"
  },
  {
    "text": "bare metal hosts right now you've only implemented static pool allocation so I",
    "start": "1261200",
    "end": "1266600"
  },
  {
    "text": "had to actually name my addresses where my Flintlock codes are running in future we're going to have some sort of clever",
    "start": "1266600",
    "end": "1271880"
  },
  {
    "text": "scheduler where it will know exactly when your new machines come up and down so we can find those bare metal ones and",
    "start": "1271880",
    "end": "1276919"
  },
  {
    "text": "put more nodes onto it so it's going to be cool um other things to note is oh yeah I am",
    "start": "1276919",
    "end": "1283400"
  },
  {
    "text": "using an image registry because this is not my first time doing a conference demo I'm not doing a single image from the",
    "start": "1283400",
    "end": "1289520"
  },
  {
    "text": "internet today um so we see that we've got our replicas we've got one control plane we've got",
    "start": "1289520",
    "end": "1296179"
  },
  {
    "text": "two workers and here are some settings for our microvm so you can see that I've specified my kernel I specified my",
    "start": "1296179",
    "end": "1303140"
  },
  {
    "text": "operating system so that's all very exciting let's go back out of there",
    "start": "1303140",
    "end": "1309620"
  },
  {
    "text": "what's next oh yeah so this already exists so I'm going to go get the secret",
    "start": "1309620",
    "end": "1315820"
  },
  {
    "text": "and there are my nodes and let's use canines to look at our",
    "start": "1319100",
    "end": "1325340"
  },
  {
    "text": "stuff so there is my liquid metal cluster running we can go have a look at that",
    "start": "1325340",
    "end": "1330380"
  },
  {
    "text": "actually so these four panes are SSH onto these boards again you're gonna have to trust",
    "start": "1330380",
    "end": "1336260"
  },
  {
    "text": "me on that that's not ec2 it's not anywhere else it's literally right here it's these ones for real Okay so",
    "start": "1336260",
    "end": "1342320"
  },
  {
    "text": "that's definitely What's Happening Here so uh the top left is",
    "start": "1342320",
    "end": "1350120"
  },
  {
    "text": "uh the bottom one so let's uh Raspberry Pi zero then uh bottom left that's Raspberry Pi one",
    "start": "1350120",
    "end": "1356480"
  },
  {
    "text": "top right is Raspberry Pi two and bottom right is Raspberry Pi three so I've got",
    "start": "1356480",
    "end": "1361760"
  },
  {
    "text": "the control plane running here on um Raspberry Pi one and you can see these",
    "start": "1361760",
    "end": "1368360"
  },
  {
    "text": "are the boot logs of firecracker starting them like rvm process it's not massively exciting it's just you know Linux booting but here you can see that",
    "start": "1368360",
    "end": "1375799"
  },
  {
    "text": "it was registered as a kubernetes control plane",
    "start": "1375799",
    "end": "1381440"
  },
  {
    "text": "um and then these are the two things that these actually showing the directory structure of Flintlock State there",
    "start": "1381440",
    "end": "1386960"
  },
  {
    "text": "um it doesn't prove anything it's just a directory but this is how I sub check to see where things exist at any given time so we've got a worker node there and a",
    "start": "1386960",
    "end": "1393919"
  },
  {
    "text": "worker node here this one I've got so Raspberry Pi 3 in the bottom right I've got nothing going on there because that's all I'm going to use to do ad hot",
    "start": "1393919",
    "end": "1399799"
  },
  {
    "text": "micro VMS in just a moment so let's go back here and let's use our cluster for Stuff",
    "start": "1399799",
    "end": "1407780"
  },
  {
    "text": "obviously I'm going to stop it with flux I'm not going to sit here manually applying manifest to my cluster",
    "start": "1407780",
    "end": "1413179"
  },
  {
    "text": "um so this is where we actually put the network to the test so what this is going to do it's going",
    "start": "1413179",
    "end": "1419600"
  },
  {
    "text": "to install the flex components it's going to install the action Runner controller or the arc oh there it goes",
    "start": "1419600",
    "end": "1425900"
  },
  {
    "text": "stuff doing again local registry it's also going to install the microvm",
    "start": "1425900",
    "end": "1431179"
  },
  {
    "text": "service and",
    "start": "1431179",
    "end": "1436280"
  },
  {
    "text": "yeah so talk about yourself it should be quite quick um",
    "start": "1436280",
    "end": "1441380"
  },
  {
    "text": "and luckily it's behaving today cool",
    "start": "1441380",
    "end": "1446480"
  },
  {
    "text": "so all components are healthy so I do this with flux because I was in",
    "start": "1446480",
    "end": "1451760"
  },
  {
    "text": "a hurry to get it working and you could use something else um there's lots of githubs tool like weed get ups that you could use to uh to",
    "start": "1451760",
    "end": "1458600"
  },
  {
    "text": "to do this and which will give you some nice visualization as well um so that's the cert manager coming up",
    "start": "1458600",
    "end": "1464600"
  },
  {
    "text": "the action run controller will use that and let's give it a moment",
    "start": "1464600",
    "end": "1472000"
  },
  {
    "text": "it should have had some like background music for this",
    "start": "1480020",
    "end": "1483880"
  },
  {
    "text": "foreign color scheme is pretty right",
    "start": "1486020",
    "end": "1494559"
  },
  {
    "text": "so there comes the actions Runner controller I think down the bottom yeah so the micro VM action Runner down there",
    "start": "1494720",
    "end": "1500900"
  },
  {
    "text": "at the bottom is already running so that's cool um just need to wait for that to begin",
    "start": "1500900",
    "end": "1506299"
  },
  {
    "text": "and then it will deploy some uh runner pods whenever it gets around to it",
    "start": "1506299",
    "end": "1514240"
  },
  {
    "text": "there we go and now if we jump back to not that go",
    "start": "1516620",
    "end": "1524419"
  },
  {
    "text": "away where's my internet there we go uh if we go back here",
    "start": "1524419",
    "end": "1531380"
  },
  {
    "text": "uh what do I actually want so I want my not their action runners",
    "start": "1531380",
    "end": "1538159"
  },
  {
    "text": "so there are no runs configured yet so if we keep an eye on this we'll see Runners eventually pop up",
    "start": "1538159",
    "end": "1545080"
  },
  {
    "text": "what am I doing for time okay I'm fine",
    "start": "1546559",
    "end": "1550419"
  },
  {
    "text": "what are you doing okay nothing's doing nothing great",
    "start": "1555020",
    "end": "1562778"
  },
  {
    "text": "what are you up to I don't know it's got everything it",
    "start": "1567620",
    "end": "1574279"
  },
  {
    "text": "needs just thinking about it",
    "start": "1574279",
    "end": "1578679"
  },
  {
    "text": "because I wanted to show you the Pod one first because it's less exciting than the micro VM one but the micro VM one is actually ready sooner",
    "start": "1582380",
    "end": "1590140"
  },
  {
    "text": "conundrum what else can I show you while I'm waiting",
    "start": "1590240",
    "end": "1596360"
  },
  {
    "text": "you want to see some network interfaces yes no yeah okay let's do that let's",
    "start": "1596360",
    "end": "1602059"
  },
  {
    "text": "look at that I bet as soon as I click over it's going to magically become ready okay",
    "start": "1602059",
    "end": "1607520"
  },
  {
    "text": "so if I control C out of there and I look at that so as I said before",
    "start": "1607520",
    "end": "1613220"
  },
  {
    "text": "um so this is on Raspberry Pi one here um so this is the VLAN interface there",
    "start": "1613220",
    "end": "1618679"
  },
  {
    "text": "which is parented to the uh General ethernet port and then here we can see",
    "start": "1618679",
    "end": "1623720"
  },
  {
    "text": "there are two interfaces that were created for the micro VM so one is the Mac V tap interface here",
    "start": "1623720",
    "end": "1628820"
  },
  {
    "text": "uh that was created and imperative um to the VLAN interface so this is what",
    "start": "1628820",
    "end": "1634940"
  },
  {
    "text": "the where the micro VM gets its you know IP and internet access and all that and um this is another one which I think is",
    "start": "1634940",
    "end": "1641120"
  },
  {
    "text": "actually the metadata service I can't really remember I think it's that there we go now it's no it's not ready",
    "start": "1641120",
    "end": "1646220"
  },
  {
    "text": "God damn it what are you doing fine I'll do the my career on the first",
    "start": "1646220",
    "end": "1651860"
  },
  {
    "text": "you like that oh wait no it began okay fine fine cool it's fine everyone Focus up again okay stop doing get off",
    "start": "1651860",
    "end": "1658520"
  },
  {
    "text": "your phones cool so we've now got a micro we've now got a pod Runner there it is it's offline get online",
    "start": "1658520",
    "end": "1666640"
  },
  {
    "text": "so this is actually something I learned while I was doing this is GitHub is I mean you all know this not massively",
    "start": "1666679",
    "end": "1672500"
  },
  {
    "text": "reliable right which is a great thing to use for a live demo with lots of moving",
    "start": "1672500",
    "end": "1677539"
  },
  {
    "text": "parts very high risk anyway let's TR let's trigger a job and",
    "start": "1677539",
    "end": "1682760"
  },
  {
    "text": "hope it comes up eventually so we go here I want to run an arc workflow so what this is going to do is",
    "start": "1682760",
    "end": "1688400"
  },
  {
    "text": "going to create a pod that a pod already exists it's going to run the job in the Pod that should be online",
    "start": "1688400",
    "end": "1694039"
  },
  {
    "text": "be online there we go it's active it's running it's running the job how exciting so we look at that",
    "start": "1694039",
    "end": "1700700"
  },
  {
    "text": "it's actually gonna be really quick because it's literally echoing a line um so this is running inside the um",
    "start": "1700700",
    "end": "1707659"
  },
  {
    "text": "yes thank you I was quite pleased with that seats yeah okay the job already won",
    "start": "1707659",
    "end": "1713299"
  },
  {
    "text": "already ran and yes I am awesome so they passed",
    "start": "1713299",
    "end": "1720080"
  },
  {
    "text": "right let's go on to the next one so if we go back into here you'll see that the original pod is destroyed and now we get",
    "start": "1720080",
    "end": "1726200"
  },
  {
    "text": "a new one coming up so that's that that's fine this running you know uh test in a pod on a liquid metal cluster",
    "start": "1726200",
    "end": "1731600"
  },
  {
    "text": "that's less exciting we're gonna now look at the micro VM the ad hoc micro VM one so we're going to go to run test",
    "start": "1731600",
    "end": "1736760"
  },
  {
    "text": "with micro VM run that do a thing",
    "start": "1736760",
    "end": "1743020"
  },
  {
    "text": "so that's going to start and if we go to here",
    "start": "1743179",
    "end": "1748360"
  },
  {
    "text": "oh yeah the previous one died don't worry about that um it should come back though so that should be running there",
    "start": "1749659",
    "end": "1757340"
  },
  {
    "text": "oh no you know what I forgot to do I forgot to port forward the service",
    "start": "1757340",
    "end": "1763580"
  },
  {
    "text": "I could have been doing that while it was waiting God damn it do the thing I don't know if it's gonna pick up what",
    "start": "1763580",
    "end": "1769460"
  },
  {
    "text": "I did so I'll just trigger it again why not do it again do the thing",
    "start": "1769460",
    "end": "1774399"
  },
  {
    "text": "please work I set up like anger I'm doing a hack I'm using angeroc to you know manage the service and the web hook",
    "start": "1776659",
    "end": "1782360"
  },
  {
    "text": "because I can be able to set up DNS and I really hope that works",
    "start": "1782360",
    "end": "1788980"
  },
  {
    "text": "it did done something I wouldn't worry about that 502 because that's just like oh yeah there we go created my Korean",
    "start": "1789919",
    "end": "1796340"
  },
  {
    "text": "you will get to watch me have a panic attack in real time and now we look at Raspberry Pi 3 down here we can see that",
    "start": "1796340",
    "end": "1802399"
  },
  {
    "text": "a new microwave has been created just for this job if we go back to our Runners we can",
    "start": "1802399",
    "end": "1808279"
  },
  {
    "text": "refresh that and now we have to wait for the microvm",
    "start": "1808279",
    "end": "1813380"
  },
  {
    "text": "to boot the GitHub action Runner to register itself which is reliant on the GitHub action API",
    "start": "1813380",
    "end": "1819320"
  },
  {
    "text": "which is just what you want so we go here we can actually watch it",
    "start": "1819320",
    "end": "1824419"
  },
  {
    "text": "boot all the way down to firecracker standard",
    "start": "1824419",
    "end": "1829940"
  },
  {
    "text": "out follow that seems to think it's fine",
    "start": "1829940",
    "end": "1835460"
  },
  {
    "text": "go up yeah it did a thing Runner successfully added though where",
    "start": "1835460",
    "end": "1840679"
  },
  {
    "text": "are you then there we go oh it's active it's already been picked up see literally I click away and it's fine",
    "start": "1840679",
    "end": "1848260"
  },
  {
    "text": "it's doing its thing",
    "start": "1850580",
    "end": "1854080"
  },
  {
    "text": "do the next bit wait did it already run I didn't there we go",
    "start": "1858679",
    "end": "1865580"
  },
  {
    "text": "yes there we go my test pass on a dedicated liquid metal VM the runner should have self-destructed",
    "start": "1865580",
    "end": "1873140"
  },
  {
    "text": "but don't worry that's the Pod that came back really slowly what was that doing and if we look back here",
    "start": "1873140",
    "end": "1879740"
  },
  {
    "text": "my microbm should be being deleted oh no it failed never mind let's pretend",
    "start": "1879740",
    "end": "1886820"
  },
  {
    "text": "that didn't happen it's all cool right don't worry about it okay I think that's the demo",
    "start": "1886820",
    "end": "1894080"
  },
  {
    "text": "how do I get to the next screen yep there we go [Music]",
    "start": "1894080",
    "end": "1902140"
  },
  {
    "text": "okay you did that earlier I've actually got a slide that tells you when to applaud okay so learnings as I said GitHub is",
    "start": "1906580",
    "end": "1913460"
  },
  {
    "text": "not the least reliable um a couple of times when I was testing this I had a known issue where Runners",
    "start": "1913460",
    "end": "1919340"
  },
  {
    "text": "were available jobs were triggered and yet they didn't didn't notice them at all",
    "start": "1919340",
    "end": "1926059"
  },
  {
    "text": "um so I was sat there and I was like okay when's it going to pick up then I would go and do a tour in the house and then 20 minutes later it's like oh now the job runs excellent well done GitHub",
    "start": "1926059",
    "end": "1933679"
  },
  {
    "text": "um so there are a couple of Americans I was like should I be using GitHub to do a live demo like this I went for it anyway",
    "start": "1933679",
    "end": "1940220"
  },
  {
    "text": "um when I was experimenting with all this I wrote a 40 page document analysis on how this could be more efficient than",
    "start": "1940220",
    "end": "1946700"
  },
  {
    "text": "running not this not a Raspberry Pi but a general bare metal liquid metal setup could be more efficient than using your",
    "start": "1946700",
    "end": "1952100"
  },
  {
    "text": "standard Enterprise CI package and theoretically it is more cost efficient if you set it up carefully but again",
    "start": "1952100",
    "end": "1959120"
  },
  {
    "text": "there's then the overhead of maintaining it so it's kind of swings around abouts is whatever your organization can afford to do but it is",
    "start": "1959120",
    "end": "1964520"
  },
  {
    "text": "I don't even notice but I keep saying loads of comments saying we're moving away from cloud we're back to on-premise like really so going back to that time",
    "start": "1964520",
    "end": "1970520"
  },
  {
    "text": "it seems to be hot these days so um I think this is a really interesting thing um there's lots of other tools that are",
    "start": "1970520",
    "end": "1975799"
  },
  {
    "text": "coming out that are using microvillium technology and liquid metal is is one of those options now you can clap",
    "start": "1975799",
    "end": "1981870"
  },
  {
    "text": "[Applause] [Music]",
    "start": "1981870",
    "end": "1989539"
  },
  {
    "text": "um so here's some documentation the one on the left is how to get this build uh the one on the right is the liquid",
    "start": "1990860",
    "end": "1997039"
  },
  {
    "text": "metal documentation um you can run liquid metal on any bare muscle service I test it on equinix",
    "start": "1997039",
    "end": "2002980"
  },
  {
    "text": "sometimes or I test on my Raspberry Pi setup um but yeah that's all I got for you and",
    "start": "2002980",
    "end": "2008080"
  },
  {
    "text": "I am literally 30 seconds until the end so there's no time for questions which I'm devastated about come and find me",
    "start": "2008080",
    "end": "2013720"
  },
  {
    "text": "afterwards thank you so much [Applause]",
    "start": "2013720",
    "end": "2019359"
  }
]