[
  {
    "text": "hello everybody thank you for coming we are going to talk about how to manage the quality in",
    "start": "240",
    "end": "8160"
  },
  {
    "text": "Kubernetes and explaining how the graduation process go from alpha to G my",
    "start": "8160",
    "end": "14160"
  },
  {
    "text": "name is Antonio i work at Google hi I'm Benjamin Elder i also work at Google",
    "start": "14160",
    "end": "20880"
  },
  {
    "text": "okay we are both of the sick testing",
    "start": "20880",
    "end": "27560"
  },
  {
    "text": "and members of steering and for all of you that that",
    "start": "27560",
    "end": "32719"
  },
  {
    "text": "know Kubernetes you may know this how Kubernetes work kubernetes is an",
    "start": "32719",
    "end": "39120"
  },
  {
    "text": "important open source project with a large ecosystem right it's not only Kubernetes you've been here you go to",
    "start": "39120",
    "end": "45200"
  },
  {
    "text": "the booth you see I don't know how thousands of projects depend on Kubernetes right",
    "start": "45200",
    "end": "51320"
  },
  {
    "text": "and to handle the development of of this project the way we are organized is",
    "start": "51320",
    "end": "58239"
  },
  {
    "text": "technically we have a special interesting groups right so each group",
    "start": "58239",
    "end": "64320"
  },
  {
    "text": "can be horizontal and handle things like API machinery or CLI or can be vertical",
    "start": "64320",
    "end": "70080"
  },
  {
    "text": "like networking or not but what is more important for for the",
    "start": "70080",
    "end": "78880"
  },
  {
    "text": "project and for the users is the project need to keep growing need to keep",
    "start": "78880",
    "end": "83920"
  },
  {
    "text": "evolving right and this means adding new features so I don't remember when this",
    "start": "83920",
    "end": "89840"
  },
  {
    "text": "started h we are very large and we need to get organized right so the the the",
    "start": "89840",
    "end": "95680"
  },
  {
    "text": "way we organize the new feature development is via caps right",
    "start": "95680",
    "end": "102040"
  },
  {
    "text": "so the cat process is it can be a bit heavy for newcomers or for",
    "start": "102040",
    "end": "109840"
  },
  {
    "text": "users but it has a purpose right has the purpose of communicating across it so everybody can look at the place oh I'm",
    "start": "109840",
    "end": "117119"
  },
  {
    "text": "proposing this because it's impossible to understand beforehand all the radius",
    "start": "117119",
    "end": "123680"
  },
  {
    "text": "that your f is going to have so it's important that we have a center plane a center point to communicate with with",
    "start": "123680",
    "end": "130160"
  },
  {
    "text": "all the fus and also to be transparent we are an open source project this is about community right if I want to add",
    "start": "130160",
    "end": "136640"
  },
  {
    "text": "something I need to get fib from the other six because you don't work in",
    "start": "136640",
    "end": "141680"
  },
  {
    "text": "isolation we try to break all the silos so there is no network there is no node",
    "start": "141680",
    "end": "147360"
  },
  {
    "text": "there is people that is interested in node that may work on network things and people that is interested in network",
    "start": "147360",
    "end": "153120"
  },
  {
    "text": "that may work on on all things so let's let's d a bit uh a bit more in",
    "start": "153120",
    "end": "160800"
  },
  {
    "text": "into the care process right so when you want to add a new feature then you need",
    "start": "160800",
    "end": "166239"
  },
  {
    "text": "to to consider what is going to be the life cycle of this feature right we have",
    "start": "166239",
    "end": "171519"
  },
  {
    "text": "three stages that are alpha the expectation of alpha is okay I have a a",
    "start": "171519",
    "end": "178080"
  },
  {
    "text": "feature a proposal I know more or less how this is going to work i discuss it",
    "start": "178080",
    "end": "183599"
  },
  {
    "text": "with the six and all the stakeholders and it's I wouldn't say a prototype",
    "start": "183599",
    "end": "189680"
  },
  {
    "text": "because we want alpha to be usable right people can try and should work it should",
    "start": "189680",
    "end": "196879"
  },
  {
    "text": "work no it must work but we understand that alpha has uh it's impossible to",
    "start": "196879",
    "end": "203760"
  },
  {
    "text": "know everything beforehand right we need to to allow innovation so we cannot been",
    "start": "203760",
    "end": "210319"
  },
  {
    "text": "forever trying new things or prototyping or getting feedback so the the quality bar for alpha is a bit lower then we",
    "start": "210319",
    "end": "219120"
  },
  {
    "text": "move to beta in beta we have um a more",
    "start": "219120",
    "end": "225360"
  },
  {
    "text": "how can I say a stronger requirement for stability right we if we have a feature",
    "start": "225360",
    "end": "231519"
  },
  {
    "text": "that is better and doesn't depend on APIs this is going to be enabled by default that means that every Kubernetes",
    "start": "231519",
    "end": "237439"
  },
  {
    "text": "user is going to run their cluster and it's going to have your new feature running so when something is running it",
    "start": "237439",
    "end": "245040"
  },
  {
    "text": "means that there is already a contract with this end user right we cannot break",
    "start": "245040",
    "end": "250640"
  },
  {
    "text": "them but we they still know that we are not fullying getting the end details of",
    "start": "250640",
    "end": "258400"
  },
  {
    "text": "the fetus so we may have some room for improvement so they need to be aware",
    "start": "258400",
    "end": "263759"
  },
  {
    "text": "that some things can change and then after beta we move to GA in GA we have a",
    "start": "263759",
    "end": "270240"
  },
  {
    "text": "strong strong commitment with with the end user and with implementation and",
    "start": "270240",
    "end": "275440"
  },
  {
    "text": "this is one of the key points of of Kubernetes right we have a very high quality bar and this means that we can",
    "start": "275440",
    "end": "282320"
  },
  {
    "text": "have an ecosystem that depend on our feature right you develop something in in one version against a J version and I",
    "start": "282320",
    "end": "289440"
  },
  {
    "text": "mean we are not perfect we fail there are bugs and there are things but I think that we are doing well on on our",
    "start": "289440",
    "end": "295680"
  },
  {
    "text": "stability of the features and we talked about features",
    "start": "295680",
    "end": "302479"
  },
  {
    "text": "but you see one of the strongest points of Kubernetes are the APIs right most of",
    "start": "302479",
    "end": "308320"
  },
  {
    "text": "the features depend on the APIs the the key of the APIs is that allow",
    "start": "308320",
    "end": "314919"
  },
  {
    "text": "to provide contrast with all these thousand project that depend on Kubernet",
    "start": "314919",
    "end": "321280"
  },
  {
    "text": "right so you don't need to absorb all the problems in Kubernetes you can create",
    "start": "321280",
    "end": "327919"
  },
  {
    "text": "the right interfaces define the right semantics and allow all the ecosystem to grow based on your interfaces and that's",
    "start": "327919",
    "end": "335280"
  },
  {
    "text": "why it's important and you see that if you go to any API review or or you have",
    "start": "335280",
    "end": "341759"
  },
  {
    "text": "a new feature there is a group of people that is specifically attending to this",
    "start": "341759",
    "end": "347440"
  },
  {
    "text": "APIs are very sensible and very critical and we invest a lot of that but most",
    "start": "347440",
    "end": "353039"
  },
  {
    "text": "important that I want to highlight APIs are not just for defining the syntaxes",
    "start": "353039",
    "end": "359680"
  },
  {
    "text": "right I'm going to put this field or whatever thing it also define the interactions with with the other",
    "start": "359680",
    "end": "366479"
  },
  {
    "text": "component right and it defines what the system should do it's not only to define",
    "start": "366479",
    "end": "373120"
  },
  {
    "text": "the fields you need to define how it's going to behave because people expect that when you add some field or when you",
    "start": "373120",
    "end": "380560"
  },
  {
    "text": "set your dam manifest in a certain way the system is going to react react in",
    "start": "380560",
    "end": "386080"
  },
  {
    "text": "certain way and this is what provides interoperability and portability that's the one of the biggest success of",
    "start": "386080",
    "end": "393360"
  },
  {
    "text": "kubernetes is that you get your hand chart your jaml you apply in one cloud and runs in the other cloud too right",
    "start": "393360",
    "end": "400319"
  },
  {
    "text": "because we have a strong APIs with clear defined",
    "start": "400319",
    "end": "405600"
  },
  {
    "text": "behaviors but here is when when the problematic start we talked about",
    "start": "406199",
    "end": "412000"
  },
  {
    "text": "features and now we talk at APIs the problem with APIs is that if the APIs",
    "start": "412000",
    "end": "418400"
  },
  {
    "text": "are better and are better forever it's hard to graduate them right so since uh",
    "start": "418400",
    "end": "425039"
  },
  {
    "text": "I don't remember now which version 121 or 1222 all these uh beta APIs are disabled",
    "start": "425039",
    "end": "432240"
  },
  {
    "text": "by default and as a consequence all the features that depend on beta API are disabled by default so we start to see a",
    "start": "432240",
    "end": "440319"
  },
  {
    "text": "bit more on the problematic of feature development right so now you have features but you have also APIs and we",
    "start": "440319",
    "end": "445840"
  },
  {
    "text": "need to be able to graduate both at the same time to offer the stability",
    "start": "445840",
    "end": "452120"
  },
  {
    "text": "but we also talked about Benjamin is going to dig a bit",
    "start": "453720",
    "end": "459599"
  },
  {
    "text": "deeper later on on these topics but we talked about kept we talked about the",
    "start": "459599",
    "end": "464720"
  },
  {
    "text": "feature gates and we talked about the APIs and in the ke process some years",
    "start": "464720",
    "end": "470319"
  },
  {
    "text": "ago we started to to find gaps in our stability right we were building a lot",
    "start": "470319",
    "end": "475759"
  },
  {
    "text": "of features and then the system was unstable i don't remember in",
    "start": "475759",
    "end": "481560"
  },
  {
    "text": "12123 we have a lot of flakes in the in the CI right things didn't work why",
    "start": "481560",
    "end": "486720"
  },
  {
    "text": "because we had a lot of features but the system was not stable we have kind of this is a joke but most of you that work",
    "start": "486720",
    "end": "493840"
  },
  {
    "text": "in software development I'm sure that you work in projects like this right so we have now the production business",
    "start": "493840",
    "end": "500560"
  },
  {
    "text": "group that's the one that when you go with the ke and you want to move to beta and to G they start to to ask these hard",
    "start": "500560",
    "end": "507919"
  },
  {
    "text": "questions what happen If how the end user is going to control this justice running 10,000 nodes what are your",
    "start": "507919",
    "end": "515518"
  },
  {
    "text": "scalability requirements so this is an important process an important group",
    "start": "515519",
    "end": "521360"
  },
  {
    "text": "that the project put in place to control that when we release something is production ready and production ready",
    "start": "521360",
    "end": "527839"
  },
  {
    "text": "means you can run it and have your business on top of your",
    "start": "527839",
    "end": "534000"
  },
  {
    "text": "features and well all these steps are needed to guarantee a quality bar we",
    "start": "534200",
    "end": "541360"
  },
  {
    "text": "want uh high quality bar for the project",
    "start": "541360",
    "end": "546720"
  },
  {
    "text": "but we know that the quality bar has to be adapted to the development because we",
    "start": "546720",
    "end": "552000"
  },
  {
    "text": "need to innovate and we need to keep the code stable and for achieving both things we need to to face this right",
    "start": "552000",
    "end": "559760"
  },
  {
    "text": "that's why we have this different stages and different criterias and then how we",
    "start": "559760",
    "end": "565519"
  },
  {
    "text": "enforce this well I think that's in the next slide",
    "start": "565519",
    "end": "571120"
  },
  {
    "text": "We we enfor this with testing so we have a different test suit right we we run",
    "start": "571279",
    "end": "578000"
  },
  {
    "text": "kind of a pyramid but it's a metaphor we we don't want to d to get into",
    "start": "578000",
    "end": "583120"
  },
  {
    "text": "technicalities but we have a strong fit integration and it test and we have this",
    "start": "583120",
    "end": "590680"
  },
  {
    "text": "the suite of test that is called conformance the the whole point of this test is that",
    "start": "590680",
    "end": "598800"
  },
  {
    "text": "uh integrations and third party projects can can build application depending on",
    "start": "598800",
    "end": "605600"
  },
  {
    "text": "the APIs and the behaviors that's why it's important we I said this several times and I will not stop saying this we",
    "start": "605600",
    "end": "612399"
  },
  {
    "text": "need to guarantee portability we need to guarantee that application works in different Kubernetes versions and",
    "start": "612399",
    "end": "618399"
  },
  {
    "text": "different Kubernetes installations and that's why it's so critical this this test this is the minimum necessary that",
    "start": "618399",
    "end": "628240"
  },
  {
    "text": "we consider for for a Kubernetes test cluster to be to run portable",
    "start": "628240",
    "end": "636320"
  },
  {
    "text": "applications okay how we enforce this well I touched",
    "start": "637160",
    "end": "642640"
  },
  {
    "text": "on this before we have a lot of erh we we spend a lot of money in",
    "start": "642640",
    "end": "651560"
  },
  {
    "text": "CI and we run a lot of test and we",
    "start": "651560",
    "end": "657279"
  },
  {
    "text": "invest heavily in automation and we rely heavily on six if you think in in the",
    "start": "657279",
    "end": "664959"
  },
  {
    "text": "traditional software development there is no developer QA and other people this",
    "start": "664959",
    "end": "671320"
  },
  {
    "text": "is an how can I say there is",
    "start": "671320",
    "end": "677880"
  },
  {
    "text": "a a share responsibility thank you a share responsibility right it's not that",
    "start": "677880",
    "end": "684399"
  },
  {
    "text": "this is my feature this is your feature this is our project and we need to take take care of that right and it's our",
    "start": "684399",
    "end": "691040"
  },
  {
    "text": "project and I'm responsible of this feature or of this area I need to be accountable of of this",
    "start": "691040",
    "end": "697079"
  },
  {
    "text": "area what is how we enfor is we really don't enforce it there are different",
    "start": "697079",
    "end": "703200"
  },
  {
    "text": "groups of people that everyone adds the value there is a a group on C release CI",
    "start": "703200",
    "end": "710720"
  },
  {
    "text": "signal that monitors some specific test that that rise that when something fails",
    "start": "710720",
    "end": "719120"
  },
  {
    "text": "just warn the the responsible of the job there is people in the six that are responsible of fixing these jobs and we",
    "start": "719120",
    "end": "727040"
  },
  {
    "text": "work as a community and I think that one of the most proud things that that I'm",
    "start": "727040",
    "end": "734160"
  },
  {
    "text": "of this project is that we have a zero flake policy so we don't allow test to",
    "start": "734160",
    "end": "739320"
  },
  {
    "text": "flake why because if a test flakes you don't know if it's working or if it's",
    "start": "739320",
    "end": "744480"
  },
  {
    "text": "not working if it's your code or what it is and we have a strong commitment with this and we had also this written in our",
    "start": "744480",
    "end": "753279"
  },
  {
    "text": "policies we don't allow",
    "start": "753279",
    "end": "757600"
  },
  {
    "text": "flakes this over to you so the SIG testing special interest",
    "start": "759000",
    "end": "766079"
  },
  {
    "text": "group um is dedicated to Kubernetes testing you've heard about this a bit we",
    "start": "766079",
    "end": "771440"
  },
  {
    "text": "to be very clear don't own the tests that's the shared responsibility that's not scalable there's so much complexity",
    "start": "771440",
    "end": "778000"
  },
  {
    "text": "in all the different parts of the project to have one central group own all of those it doesn't make sense but what we do own is the testing",
    "start": "778000",
    "end": "784959"
  },
  {
    "text": "infrastructure the standards the frameworks the best practices and working with all the SIGs on",
    "start": "784959",
    "end": "792880"
  },
  {
    "text": "that so why are we giving this talk now why are we making some changes to",
    "start": "792920",
    "end": "799040"
  },
  {
    "text": "improve this pretty much DRA i'm I'm looking at Patrick here who's one of our also sik testing TLS who's been working",
    "start": "799040",
    "end": "805440"
  },
  {
    "text": "on DRA dra makes this problem uh a lot more interesting because we have",
    "start": "805440",
    "end": "810959"
  },
  {
    "text": "multiple alpha features that depend on beta features and there's a huge demand to graduate quickly and get this",
    "start": "810959",
    "end": "816639"
  },
  {
    "text": "functionality available for all these people that are running all these huge clusters with accelerators and need more flexible scheduling and it is a lot more",
    "start": "816639",
    "end": "824800"
  },
  {
    "text": "complicated to understand how are we testing this correctly where can we run these when it maybe depends on various",
    "start": "824800",
    "end": "832079"
  },
  {
    "text": "things so we'll talk a little bit more about that so when we're testing uh a feature",
    "start": "832079",
    "end": "838560"
  },
  {
    "text": "that you've been developing ke the unit tests are like fairly self-explanatory you have the scoped piece of code that's",
    "start": "838560",
    "end": "844959"
  },
  {
    "text": "part of implementing it and you're controlling running that code and you write test cases for it pretty standard",
    "start": "844959",
    "end": "851040"
  },
  {
    "text": "same thing for the integration tests are a little weird ours are a little weird but the integration tests themselves are standing up the environment so you know",
    "start": "851040",
    "end": "858959"
  },
  {
    "text": "exactly what the API server looks like because you just started it when we get",
    "start": "858959",
    "end": "864320"
  },
  {
    "text": "to in to tests uh it's a lot more complicated we mentioned earlier that there a conformance suite well that's",
    "start": "864320",
    "end": "871199"
  },
  {
    "text": "part of it we have a test binary that needs to be able to point at different clusters it's not really feasible to",
    "start": "871199",
    "end": "878480"
  },
  {
    "text": "totally couple the end toend tests with each of the cluster environments directly so when we get to end toend",
    "start": "878480",
    "end": "884480"
  },
  {
    "text": "tests it is totally separate that we're bringing up some kind of cluster and then we're trying to run tests on it and",
    "start": "884480",
    "end": "889760"
  },
  {
    "text": "we need to know wait can I run this DRA test case or not is it depend on an alpha feature or beta feature and so on",
    "start": "889760",
    "end": "898079"
  },
  {
    "text": "so in the past uh the main way that you would tag one of these tests with a framework is you would just say well it",
    "start": "898079",
    "end": "904000"
  },
  {
    "text": "has a feature and feature is a super nebulous thing um and it would get inserted as sort of like a pseudo tag in",
    "start": "904000",
    "end": "910079"
  },
  {
    "text": "the generated test name with the rest of your like handwritten test name and it would be in braces and say feature and",
    "start": "910079",
    "end": "916240"
  },
  {
    "text": "then the name of the feature you gave and this is just an arbitrary string and it could mean that your test depends on",
    "start": "916240",
    "end": "921920"
  },
  {
    "text": "having a load balancer installed um it could mean that your test depends on having a feature gate turned on or it",
    "start": "921920",
    "end": "927440"
  },
  {
    "text": "could mean that the test depends on the cluster being configured in a certain way like we're going to test the dual",
    "start": "927440",
    "end": "932560"
  },
  {
    "text": "stack logic so the cluster needs to have dual stack enabled not be a single stack cluster um so this is really heavily",
    "start": "932560",
    "end": "938880"
  },
  {
    "text": "overloaded so what you would see is most of the CI jobs would just skip anything",
    "start": "938880",
    "end": "944160"
  },
  {
    "text": "with any feature tag like I didn't do any special setup i'm not dealing with this and if you're building a feature",
    "start": "944160",
    "end": "949600"
  },
  {
    "text": "then you're going to go make sure that you have something that instead says I'm going to run things that match this",
    "start": "949600",
    "end": "956360"
  },
  {
    "text": "feature and it just doesn't scale very well um you're pretty much on your own",
    "start": "956360",
    "end": "961839"
  },
  {
    "text": "to figure this out and you can talk to us but there's no shared um system",
    "start": "961839",
    "end": "968600"
  },
  {
    "text": "really patrick here did some work a while back to make us uh onto GKO v2",
    "start": "968600",
    "end": "974160"
  },
  {
    "text": "with some other members of the community which also got us access to GKO labels um we hadn't adopted them very much yet",
    "start": "974160",
    "end": "980000"
  },
  {
    "text": "genko labels with the tests they allow us to move metadata about the tests into selectable labels that aren't crammed",
    "start": "980000",
    "end": "986320"
  },
  {
    "text": "into the test name you can actually query them as we'll come back to and you're not just doing a regular",
    "start": "986320",
    "end": "991600"
  },
  {
    "text": "expression that's include and exclude so you can actually say you know I want to run certain things so we've uh in 133",
    "start": "991600",
    "end": "999759"
  },
  {
    "text": "towards the end of the release we were able to finish we tweaked uh this with feature gate method so now if your test",
    "start": "999759",
    "end": "1005199"
  },
  {
    "text": "just is testing a feature gated feature you pass with feature gate and you pass the actual standard feature gate",
    "start": "1005199",
    "end": "1012399"
  },
  {
    "text": "definition and I wrote here you may not be familiar with this in Kubernetes there is a centralized registry of",
    "start": "1012399",
    "end": "1018079"
  },
  {
    "text": "features that can be enabled across all the components and so there is like a package that has all the features",
    "start": "1018079",
    "end": "1024079"
  },
  {
    "text": "they're named they have a bunch of metadata about them like who owns them um and and centrally approved they have",
    "start": "1024079",
    "end": "1029438"
  },
  {
    "text": "the state alpha beta GA if they're on by default and so on so you can now actually pass to the ED tests this is my",
    "start": "1029439",
    "end": "1037959"
  },
  {
    "text": "canonical feature metadata and it can annotate the tests with the information",
    "start": "1037959",
    "end": "1043839"
  },
  {
    "text": "about the feature stability level whether it's turned on by default and and so on the feature name and no more",
    "start": "1043839",
    "end": "1051760"
  },
  {
    "text": "horrible broken redexes trying to select the right tests so you now say my test depends on this",
    "start": "1051760",
    "end": "1060640"
  },
  {
    "text": "feature gate and that information is there you say my test depends on this feature like special setup installing a",
    "start": "1060640",
    "end": "1068240"
  },
  {
    "text": "controller or in the case of DRA it depends on both we need to have a DRA driver installed because there isn't a",
    "start": "1068240",
    "end": "1074799"
  },
  {
    "text": "standard driver it's for whatever device you want whatever you're allocating dynamically so you need to have the",
    "start": "1074799",
    "end": "1080080"
  },
  {
    "text": "dynamic allocation features turned on and you need to have the dynamic allocation test feature which is",
    "start": "1080080",
    "end": "1086880"
  },
  {
    "text": "signaling that there's some extra setup required before it can run on a cluster so you tag it with both um and so this",
    "start": "1086880",
    "end": "1094559"
  },
  {
    "text": "is the this is this was talking about this is the metadata we we pass through what we um are doing as part of this is",
    "start": "1094559",
    "end": "1101760"
  },
  {
    "text": "setting up some standard CI jobs uh that will run all of the tests that just need",
    "start": "1101760",
    "end": "1107760"
  },
  {
    "text": "to turn on that feature gate and skip the ones that require extra things so for a lot of features in the project",
    "start": "1107760",
    "end": "1113840"
  },
  {
    "text": "they're doing something like declarative validation that is a totally server side feature in the API server it doesn't",
    "start": "1113840",
    "end": "1119919"
  },
  {
    "text": "have any external dependencies it just needs to be turned on because it's not a GA yet and to test that all they'll need",
    "start": "1119919",
    "end": "1126720"
  },
  {
    "text": "to do is annotate this and so we will be really pushing the feature approvers to say you should not be promoting features",
    "start": "1126720",
    "end": "1134960"
  },
  {
    "text": "that are have no tests or being handested uh as may have happened in the",
    "start": "1134960",
    "end": "1140520"
  },
  {
    "text": "past there will be an expectation that you definitely have CI all the way down",
    "start": "1140520",
    "end": "1146480"
  },
  {
    "text": "to an alpha feature even if it's brand new um we need to know that it's working if it's totally broken we shouldn't be",
    "start": "1146480",
    "end": "1153200"
  },
  {
    "text": "shipping it to users um and it definitely shouldn't be promoting to beta if it doesn't have reliable tests",
    "start": "1153200",
    "end": "1161559"
  },
  {
    "text": "yet so when we're doing this we're basically saying okay this cluster we're",
    "start": "1161559",
    "end": "1166960"
  },
  {
    "text": "turning on all the alpha features we're turning off evented because we that's",
    "start": "1166960",
    "end": "1173120"
  },
  {
    "text": "one of the features that had promoted further turned out it wasn't stable enough needs quite a bit of work but",
    "start": "1173120",
    "end": "1179520"
  },
  {
    "text": "hopefully going forward we're just turning on all the alphas we're turning on all the alpha and GA APIs so that you",
    "start": "1179520",
    "end": "1186320"
  },
  {
    "text": "don't have to worry about that distinction in CI we're standardizing on we turn on alpha and uh APIs and",
    "start": "1186320",
    "end": "1193679"
  },
  {
    "text": "features at the same level beta and so on makes it a little bit less confusing to think about and then we can write",
    "start": "1193679",
    "end": "1198960"
  },
  {
    "text": "this query that basically says if it has a feature that it's an off by default",
    "start": "1198960",
    "end": "1204000"
  },
  {
    "text": "feature gate or it doesn't have any other feature information we'll run that",
    "start": "1204000",
    "end": "1209200"
  },
  {
    "text": "if it's not a beta off by default because we're doing alpha tests and if",
    "start": "1209200",
    "end": "1215440"
  },
  {
    "text": "it's not a deprecated feature because that's another feature level that we didn't talk about some extra complexity",
    "start": "1215440",
    "end": "1221760"
  },
  {
    "text": "there for basically here's a way to toggle something that we're removing for one more release you can turn it back on",
    "start": "1221760",
    "end": "1228000"
  },
  {
    "text": "but it it's going away um and then this slow disruptive flaky is sometimes when",
    "start": "1228000",
    "end": "1233120"
  },
  {
    "text": "we're working on tests we've kind of kicked them out or or or said this is slower we're we're going to iterate some",
    "start": "1233120",
    "end": "1238240"
  },
  {
    "text": "more on that but basically there's some categories of like these tests are known bad um and we're not able to fix them",
    "start": "1238240",
    "end": "1244400"
  },
  {
    "text": "quickly let's make sure that they're not blocking um pull requests until we get that sorted out",
    "start": "1244400",
    "end": "1251159"
  },
  {
    "text": "um if you have a feature like DRA you still got to work with us to set up some CI for that but that will be a",
    "start": "1251159",
    "end": "1258600"
  },
  {
    "text": "diminishingly smaller set of features and we will expect uh to keep up and have that for everyone um also",
    "start": "1258600",
    "end": "1267760"
  },
  {
    "text": "uh let me come back to this one where did that so one other thing",
    "start": "1267760",
    "end": "1273360"
  },
  {
    "text": "that happened here as we were working on this is we actually found that while the Kubernetes feature policy says alphas",
    "start": "1273360",
    "end": "1279520"
  },
  {
    "text": "must be off by default uh this wasn't enforced which made this problem a bit",
    "start": "1279520",
    "end": "1285200"
  },
  {
    "text": "more complicated and also means we're not communicating things clearly to users there was in fact a feature that",
    "start": "1285200",
    "end": "1290480"
  },
  {
    "text": "was on by default since 126 that was in alpha quality and it's going away in 133",
    "start": "1290480",
    "end": "1295600"
  },
  {
    "text": "hopefully it's fine most of you probably won't run into it it relates to host network on Windows um but now we have",
    "start": "1295600",
    "end": "1302640"
  },
  {
    "text": "some tooling in place uh that you can't do that it will block the pull request",
    "start": "1302640",
    "end": "1307840"
  },
  {
    "text": "if you try to set on by default and alpha that's an inconsistent statement to the user um so that simplifies how we",
    "start": "1307840",
    "end": "1315440"
  },
  {
    "text": "communicate on the test to make sure we're shipping the right quality bar to production and this is the kind of thing that we're working on to make sure that",
    "start": "1315440",
    "end": "1320880"
  },
  {
    "text": "going forward um you know we're 10 years in the project and still having features",
    "start": "1320880",
    "end": "1325919"
  },
  {
    "text": "that are partway through the life cycle being hand tested locally just isn't good",
    "start": "1325919",
    "end": "1332159"
  },
  {
    "text": "enough and so this is an example when you have a feature that you do need to do extra setup so we're saying it's",
    "start": "1332760",
    "end": "1338960"
  },
  {
    "text": "allowed to be tagged as it requires this extra dynamic resource allocation setup um or an off by default feature because",
    "start": "1338960",
    "end": "1345679"
  },
  {
    "text": "we're going to turn all them on to run this because this has alpha and beta features um we've turned on uh the alpha",
    "start": "1345679",
    "end": "1352159"
  },
  {
    "text": "and beta APIs that we need um and we're ignoring the flaky tests until we've",
    "start": "1352159",
    "end": "1358240"
  },
  {
    "text": "gotten um that sorted out and uh there's some extra bit here that isn't inline",
    "start": "1358240",
    "end": "1365760"
  },
  {
    "text": "because it's some fun bash that sets up actually having a a mock DRA driver um",
    "start": "1365760",
    "end": "1372320"
  },
  {
    "text": "and this runs on a kind cluster which is another sig testing sub project and these are pretty like",
    "start": "1372320",
    "end": "1378960"
  },
  {
    "text": "copyable so if you have a relatively simple one um where you need something like a load balancer or a driver uh for",
    "start": "1378960",
    "end": "1386000"
  },
  {
    "text": "a dynamic resource we have like little local implementations you just need to make sure that if you're testing that",
    "start": "1386000",
    "end": "1392159"
  },
  {
    "text": "that you know we've taken like this DRA job made a version that installs the",
    "start": "1392159",
    "end": "1397280"
  },
  {
    "text": "load balancer instead and runs your load balancer tests and we're doing that so we'll be putting out some more",
    "start": "1397280",
    "end": "1404880"
  },
  {
    "text": "coms on 134 early in the release cycle kubernetes is about to ship 133 uh",
    "start": "1404880",
    "end": "1410000"
  },
  {
    "text": "shortly after CubeCon and we'll be making sure that everyone who's contributing in the community knows",
    "start": "1410000",
    "end": "1416000"
  },
  {
    "text": "about these changes knows the expectations to adopt them and the increased expectations on not just the",
    "start": "1416000",
    "end": "1422640"
  },
  {
    "text": "written quality bar that we've had but actually making sure that we've provided um the tooling and the shared resources",
    "start": "1422640",
    "end": "1430240"
  },
  {
    "text": "to execute on it more easily and that includes getting more of this signal",
    "start": "1430240",
    "end": "1435679"
  },
  {
    "text": "into release blocking and pull request blocking um we actually want to go as far as to say even just turning on an",
    "start": "1435679",
    "end": "1443760"
  },
  {
    "text": "alpha needs to be blocking releases um not the tests we know people are just",
    "start": "1443760",
    "end": "1450799"
  },
  {
    "text": "getting started iterating on those but we'll have that signal running somewhere so it can block promoting them to beta",
    "start": "1450799",
    "end": "1456559"
  },
  {
    "text": "um and pull requests should start blocking on beta APIs consistently uh",
    "start": "1456559",
    "end": "1461760"
  },
  {
    "text": "that's not actually guaranteed today make it a lot harder to have",
    "start": "1461760",
    "end": "1467600"
  },
  {
    "text": "regressions with these earlier in the process kubernetes used to lean a lot more heavily on stability in GA we're",
    "start": "1467600",
    "end": "1473760"
  },
  {
    "text": "bringing more of that back down to beta and even down to alpha that even an alpha feature shouldn't make GA features",
    "start": "1473760",
    "end": "1481600"
  },
  {
    "text": "unstable thanks let us know if you have any questions come join us in sik testing in the Kubernetes",
    "start": "1482120",
    "end": "1488520"
  },
  {
    "text": "Slack yeah [Applause]",
    "start": "1488520",
    "end": "1499730"
  },
  {
    "text": "do we",
    "start": "1501120",
    "end": "1503440"
  },
  {
    "text": "have how long does a typical feature take to run all the test suites in CI",
    "start": "1513000",
    "end": "1519840"
  },
  {
    "text": "for give it like one feature that's really hard to say they're all over the place for some features we need to run",
    "start": "1519840",
    "end": "1525919"
  },
  {
    "text": "scale testing you know uh we need to make sure that if you make some scheduler changes that you haven't",
    "start": "1525919",
    "end": "1531120"
  },
  {
    "text": "regressed the performance on large clusters and some of those test runs take 12 14 hours uh 5,000 node clusters",
    "start": "1531120",
    "end": "1540080"
  },
  {
    "text": "wow so the the there is when we talk about this there are two stages right",
    "start": "1540080",
    "end": "1546080"
  },
  {
    "text": "presummit that is we don't want this thing to merge and we have kind of a line of one hour to to run so you get",
    "start": "1546080",
    "end": "1553840"
  },
  {
    "text": "signal right you're developing you're sending something and you want to know I'm breaking something or not so we have",
    "start": "1553840",
    "end": "1558960"
  },
  {
    "text": "kind of a hard line in one hour it's not exactly but we try to keep that then we have a lot of of test that running in",
    "start": "1558960",
    "end": "1566960"
  },
  {
    "text": "periodic jobs right and then there are like a scalability test that run every two or three days and that's I don't",
    "start": "1566960",
    "end": "1574080"
  },
  {
    "text": "know 1,000 5,000 that can take longer but usually for developers that want to",
    "start": "1574080",
    "end": "1579679"
  },
  {
    "text": "submit something we we tend to get a bar of one hour for for getting feedback",
    "start": "1579679",
    "end": "1585279"
  },
  {
    "text": "we also have a two-hour bar for release blocking signal and then we have some release informing signal that's like the",
    "start": "1585279",
    "end": "1590320"
  },
  {
    "text": "release team should look at this but it it's not guarantee blocker also to be clear um we're talking about like a",
    "start": "1590320",
    "end": "1595360"
  },
  {
    "text": "whole suite we generally don't want to have like a CI run that we have to do",
    "start": "1595360",
    "end": "1600559"
  },
  {
    "text": "for like a specific feature there's some overhead to just like compiling Kubernetes and bringing up a cluster",
    "start": "1600559",
    "end": "1606640"
  },
  {
    "text": "even when we're running with kind we we have to throw a decent number of cores at just building Kubernetes in a",
    "start": "1606640",
    "end": "1611840"
  },
  {
    "text": "reasonable amount of time there's there's a lot of code uh so typically these are shared suites and individual",
    "start": "1611840",
    "end": "1617600"
  },
  {
    "text": "test cases are are expected to be pretty fast normally but Kubernetes has thousands and thousands of test cases to",
    "start": "1617600",
    "end": "1624000"
  },
  {
    "text": "cover all of the everything so um it really depends on the scope of the feature okay thank you very much",
    "start": "1624000",
    "end": "1633000"
  },
  {
    "text": "hey um can you expand a bit about the zero flakes policy",
    "start": "1635559",
    "end": "1641120"
  },
  {
    "text": "okay yeah uh uh we did a talk about that last time you want to Okay um so you",
    "start": "1641120",
    "end": "1647520"
  },
  {
    "text": "know if anybody spots a flake we are filing a bug we are assigning people that are working on that feature the",
    "start": "1647520",
    "end": "1654240"
  },
  {
    "text": "community is uh pushing to to fix that um it takes an initial push to get to a",
    "start": "1654240",
    "end": "1660320"
  },
  {
    "text": "place where things are pretty reliable so people aren't used to flakiness and I think we've achieved that so now that",
    "start": "1660320",
    "end": "1666000"
  },
  {
    "text": "people aren't used to flakiness the community is pretty good about why is this thing failing it doesn't seem",
    "start": "1666000",
    "end": "1671440"
  },
  {
    "text": "related to my change we also have a lot of tooling for this um we have this",
    "start": "1671440",
    "end": "1676559"
  },
  {
    "text": "system called triage go.kates.iotriage um and we basically",
    "start": "1676559",
    "end": "1681600"
  },
  {
    "text": "run a pipeline that does KN&N clustering of failure messages across all of the CI",
    "start": "1681600",
    "end": "1687120"
  },
  {
    "text": "jobs uh so you can say hm I have a graph of over time this error message started",
    "start": "1687120",
    "end": "1692720"
  },
  {
    "text": "cropping up more so we have some failure mode with like starting up a pod or something and you can prove that maybe",
    "start": "1692720",
    "end": "1699200"
  },
  {
    "text": "it only failed once or twice in a PR job but there are 10 other periodic tests that are also hitting it and that graph",
    "start": "1699200",
    "end": "1706000"
  },
  {
    "text": "has spiked and there's a button to collect that information and you can just like file an issue with all that",
    "start": "1706000",
    "end": "1712399"
  },
  {
    "text": "and um the release CI signal team also works really hard on this for uh all of",
    "start": "1712399",
    "end": "1717520"
  },
  {
    "text": "the release blocking and informing signal to make sure that the moment one of those crops up we're tracking it we're fixing it we're removing it the",
    "start": "1717520",
    "end": "1723520"
  },
  {
    "text": "the flaky tag you saw earlier was more of how we handled in the past we would just go okay we got to kick this test",
    "start": "1723520",
    "end": "1729120"
  },
  {
    "text": "out we still have some but we've also been eliminating those",
    "start": "1729120",
    "end": "1734720"
  },
  {
    "text": "there is also a cultural thing right so before we had these uh gingo flake",
    "start": "1734720",
    "end": "1740080"
  },
  {
    "text": "attempts or something no so if eventually pass it will we remove that the test pass or doesn't pass then yeah",
    "start": "1740080",
    "end": "1747279"
  },
  {
    "text": "but that that is the easy one like when when you say zero it's zero it means that if it flakes one then you you have",
    "start": "1747279",
    "end": "1755120"
  },
  {
    "text": "to chase it yeah and then that's what saying is then we have a a a strong",
    "start": "1755120",
    "end": "1763000"
  },
  {
    "text": "community position on the right so you have the releasing when they see that this periodic graph you know flake they",
    "start": "1763000",
    "end": "1770640"
  },
  {
    "text": "open the bag when when there is an investigation can happen several things that the test get fix it or that the",
    "start": "1770640",
    "end": "1777039"
  },
  {
    "text": "test get removed right so that's the thing if you keep the flakes going at",
    "start": "1777039",
    "end": "1783360"
  },
  {
    "text": "the end you are going to have a lot of flakes so you need to take a decision I think that in my experience in all the",
    "start": "1783360",
    "end": "1789360"
  },
  {
    "text": "other projects this is one project that takes this decision right or you can get your",
    "start": "1789360",
    "end": "1796480"
  },
  {
    "text": "feed out you have a feature that is flaking and it happened it was flaking",
    "start": "1796480",
    "end": "1802000"
  },
  {
    "text": "it was better and nobody did anything so it got demoted to alpha so when when you",
    "start": "1802000",
    "end": "1808640"
  },
  {
    "text": "start when the project has this you position and this strong commitment to quality then everybody start to absorb",
    "start": "1808640",
    "end": "1816080"
  },
  {
    "text": "this this behavior right and then is when you in the late run are able to to",
    "start": "1816080",
    "end": "1822120"
  },
  {
    "text": "to have a more stable CI because the person that develop the feature is also aware right and it's not that I'm going",
    "start": "1822120",
    "end": "1829279"
  },
  {
    "text": "to draw me a feature and leave it's I'm going to draw my feature i want my feature and I'm going to take care that my feature is just stable",
    "start": "1829279",
    "end": "1837440"
  },
  {
    "text": "i think to get there though we had to make a pretty big push around this and look at like what are sources of flakes",
    "start": "1837440",
    "end": "1844960"
  },
  {
    "text": "get rid of the systemic sources of flakes like noisy neighbor problems in CI get that cleaned up so there's no",
    "start": "1844960",
    "end": "1850720"
  },
  {
    "text": "excuse it's like oh the CI is making my test unreliable no no your test is unreliable and then burn those down and",
    "start": "1850720",
    "end": "1857520"
  },
  {
    "text": "then get people used to okay we're no longer doing flake attempts and we have a bot that auto posts retest the CI when",
    "start": "1857520",
    "end": "1865039"
  },
  {
    "text": "it fails none of that's going on it passes or it doesn't get people used to that uh so that it actually feels like",
    "start": "1865039",
    "end": "1872880"
  },
  {
    "text": "an outlier and then it's a lot easier to get buy in from all the developers that yeah we should address these when they",
    "start": "1872880",
    "end": "1878159"
  },
  {
    "text": "see lots of flakes it's really hard to convince people to work on it",
    "start": "1878159",
    "end": "1884120"
  },
  {
    "text": "i think that's it i think we're time thanks all okay [Applause]",
    "start": "1888960",
    "end": "1896449"
  }
]