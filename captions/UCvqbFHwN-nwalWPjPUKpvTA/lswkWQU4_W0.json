[
  {
    "text": "good good afternoon Welcome to our session",
    "start": "1160",
    "end": "7519"
  },
  {
    "text": "um distributed and enabling sorry enabling coordinated checkpointing for",
    "start": "7519",
    "end": "13759"
  },
  {
    "text": "distributed HPC applications my name is Adan REO I work at redhead for nine",
    "start": "13759",
    "end": "20359"
  },
  {
    "text": "years now I'm involved in um checkpoint restore which is the basis for all of",
    "start": "20359",
    "end": "26920"
  },
  {
    "text": "what we're doing here today for 14 years now um we're doing everything we do with",
    "start": "26920",
    "end": "32279"
  },
  {
    "text": "checkpoint restore is based on creu um I'm involved there I guess now",
    "start": "32279",
    "end": "38879"
  },
  {
    "text": "12 years and since I'm at redhead I'm mainly focusing on um container",
    "start": "38879",
    "end": "45079"
  },
  {
    "text": "migration today here with me is rtin so hello everyone my name is rtin I'm a PhD",
    "start": "45079",
    "end": "52520"
  },
  {
    "text": "student at University of Oxford supervised by Professor West Armor and my research is focusing on enabling",
    "start": "52520",
    "end": "59120"
  },
  {
    "text": "check restor for um HPC clusters okay and um today's agenda will",
    "start": "59120",
    "end": "67080"
  },
  {
    "text": "look something um like this where I will go through the background of of checkpoint restore a bit about the",
    "start": "67080",
    "end": "73960"
  },
  {
    "text": "history why the names are the way they are then I'll talk about integration",
    "start": "73960",
    "end": "79080"
  },
  {
    "text": "into existing container run times engines orchestration then I talk about use cases why you would want to use",
    "start": "79080",
    "end": "86400"
  },
  {
    "text": "checkpoint ReStore in combination with um containers then I will do a migration demo this is",
    "start": "86400",
    "end": "93880"
  },
  {
    "text": "not coordinated yet it's just a simple pot migrating from one one host to another host the distance between will",
    "start": "93880",
    "end": "100720"
  },
  {
    "text": "be about 500 kilomet and then um Rin will talk about coordinated checkpointing in an HPC",
    "start": "100720",
    "end": "107680"
  },
  {
    "text": "environment why it's necessary and what the challenges are there so background",
    "start": "107680",
    "end": "114920"
  },
  {
    "text": "so the tool we are using here is called creu it's called checkpoint ReStore in users space and the reason for the name",
    "start": "114920",
    "end": "122079"
  },
  {
    "text": "especially in user space is um because it's um a",
    "start": "122079",
    "end": "128520"
  },
  {
    "text": "tool and there were many different tools before so checkpoint restore is a technology in operating systems and",
    "start": "128520",
    "end": "135280"
  },
  {
    "text": "Linux for a long time in in the early years 20 years ago it was mainly done in",
    "start": "135280",
    "end": "141160"
  },
  {
    "text": "high performance Computing and the main use case was fall tolerance if you have",
    "start": "141160",
    "end": "146640"
  },
  {
    "text": "thousand notes running something stops working you don't want to restart from the beginning So you you're looking into",
    "start": "146640",
    "end": "153120"
  },
  {
    "text": "checkpoint restore your compute jobs regularly and at that time there were",
    "start": "153120",
    "end": "160000"
  },
  {
    "text": "two tools developed around 20 years ago one was an external kernel module which",
    "start": "160000",
    "end": "165959"
  },
  {
    "text": "was never inry and which you had to compile um separately to be able to use",
    "start": "165959",
    "end": "172720"
  },
  {
    "text": "it and then you had to preload libraries so the the solution was never what you would call a transparent checkpoint",
    "start": "172720",
    "end": "179040"
  },
  {
    "text": "because you had to prepare your application either recompile it or prepare it in some other way and to",
    "start": "179040",
    "end": "185760"
  },
  {
    "text": "solve this problem there was um approach for checkpoint restore which was in the kernel it was a huge patch set around I",
    "start": "185760",
    "end": "194840"
  },
  {
    "text": "think 2006 or 2005 or I don't know some time ago and",
    "start": "194840",
    "end": "200760"
  },
  {
    "text": "it was a working solution to do checkpoint ReStore in Linux but the problem was the Linux colel Community",
    "start": "200760",
    "end": "205920"
  },
  {
    "text": "was not convinced of the approach so the approach kind of diet and and so people",
    "start": "205920",
    "end": "213080"
  },
  {
    "text": "were looking at another way to do checkpoint ReStore in Linux and next one is now creu checkpoint ReStore in user",
    "start": "213080",
    "end": "220280"
  },
  {
    "text": "space mainly because the one that before was in kernal so now we're in user space in user space means there's no specific",
    "start": "220280",
    "end": "227040"
  },
  {
    "text": "code to do checkpoint ReStore in the Linux kernel in user space also means that Creo was designed in such a way",
    "start": "227040",
    "end": "233680"
  },
  {
    "text": "that it was using existing interfaces as much as possible over the last 10 years",
    "start": "233680",
    "end": "239200"
  },
  {
    "text": "cre introduced in additional interfaces none of the interfaces introduced in the Linux kernel are specific to checkpoint",
    "start": "239200",
    "end": "246760"
  },
  {
    "text": "restore they're usually kind of how can I get more information about my running",
    "start": "246760",
    "end": "252360"
  },
  {
    "text": "process and so often they are often used for debugging and and similar things so",
    "start": "252360",
    "end": "259160"
  },
  {
    "text": "this is um about checkpoint restore creu and now to the",
    "start": "259160",
    "end": "264720"
  },
  {
    "text": "Integrations so there are multiple Integrations of Creo in different container run times engines",
    "start": "264720",
    "end": "271360"
  },
  {
    "text": "orchestrations and uh first one I usually want to mention is open vet I never used open vet myself but they were",
    "start": "271360",
    "end": "278520"
  },
  {
    "text": "basically doing containers before the word container existed and what they",
    "start": "278520",
    "end": "284520"
  },
  {
    "text": "were doing you would probably call today something like a system container so not like an oci container where you have",
    "start": "284520",
    "end": "289759"
  },
  {
    "text": "just one application running in there you had a whole operating system running in there and they wanted to provide",
    "start": "289759",
    "end": "296560"
  },
  {
    "text": "their customers their users a way to live migr those system containers from one host to",
    "start": "296560",
    "end": "303320"
  },
  {
    "text": "another so they came up with creu and and the good thing here about creu to",
    "start": "303320",
    "end": "308840"
  },
  {
    "text": "remember is that creu was designed for containers all the other checkpoint restore implementations which existed",
    "start": "308840",
    "end": "315160"
  },
  {
    "text": "were for high performance Computing and they are still used in high performance Computing today some of them but creu",
    "start": "315160",
    "end": "321960"
  },
  {
    "text": "was designed for containers and that's why it works um as good as it does today",
    "start": "321960",
    "end": "329240"
  },
  {
    "text": "so um another interesting um integration of creu is Bor that's Google's container",
    "start": "329240",
    "end": "337199"
  },
  {
    "text": "orchestrator engine also something I never saw myself but um Google came to",
    "start": "337199",
    "end": "343199"
  },
  {
    "text": "us the Upstream Creer developers maybe I don't know seven years ago they talked at a couple of",
    "start": "343199",
    "end": "349600"
  },
  {
    "text": "conferences how they use it internally so before using creu and in their",
    "start": "349600",
    "end": "355080"
  },
  {
    "text": "container engine what they did is if there was a low priority task running on a note and resources were getting low",
    "start": "355080",
    "end": "362560"
  },
  {
    "text": "they just killed it and restarted it somewhere else which meant they had to",
    "start": "362560",
    "end": "367720"
  },
  {
    "text": "do redo all the work today from what we're told they're using um creu to live",
    "start": "367720",
    "end": "374000"
  },
  {
    "text": "migrate those low priority containers from one node to another node without",
    "start": "374000",
    "end": "379800"
  },
  {
    "text": "losing any of the work um examples they they like to give um is video re-encoding in the background so if they",
    "start": "379800",
    "end": "386639"
  },
  {
    "text": "need additional resolutions of video then do do it um in containers and those",
    "start": "386639",
    "end": "394120"
  },
  {
    "text": "are the containers which they um actually migrate today um in production",
    "start": "394120",
    "end": "399440"
  },
  {
    "text": "all the time from what we're told then there's Lexi Lex D incos ecosystem they",
    "start": "399440",
    "end": "406680"
  },
  {
    "text": "also have support for checkpoint Restore for a long time then doco introduced it many years",
    "start": "406680",
    "end": "412639"
  },
  {
    "text": "ago um I've been working since 2018 on on the potman integration of of",
    "start": "412639",
    "end": "418400"
  },
  {
    "text": "checkpoint restore and and one of the reasons I started to look at potman is because cryo is",
    "start": "418400",
    "end": "425520"
  },
  {
    "text": "similar to potman from some of the code so I could experiment with um with",
    "start": "425520",
    "end": "431520"
  },
  {
    "text": "potman getting a checkpoint restore working there and then I brought it to um to cryo today and the reason to bring",
    "start": "431520",
    "end": "439919"
  },
  {
    "text": "it to cryo was to bring it to kubernetes and in kubernetes checkpoint",
    "start": "439919",
    "end": "446520"
  },
  {
    "text": "checkpointing currently is available under the label forensic container checkpointing we made it um it was um so",
    "start": "446520",
    "end": "455919"
  },
  {
    "text": "this took us a couple of years to get it into kubernetes um it was um moved to",
    "start": "455919",
    "end": "461840"
  },
  {
    "text": "Alpha with 125 a couple of years ago two years I think three maybe and um and",
    "start": "461840",
    "end": "468440"
  },
  {
    "text": "just a couple of weeks ago we were able to to move it to Beta with 130 and this",
    "start": "468440",
    "end": "475080"
  },
  {
    "text": "means um from now on checkpoint support is",
    "start": "475080",
    "end": "480360"
  },
  {
    "text": "enabled by default the I say only checkpointing is available because the",
    "start": "480360",
    "end": "487280"
  },
  {
    "text": "forensic container checkpointing story is basically you have an container running something unexpected happens you",
    "start": "487280",
    "end": "494560"
  },
  {
    "text": "don't want to stop it immediately but you want to take a copy so forensic container checkpointing gives you the",
    "start": "494560",
    "end": "501560"
  },
  {
    "text": "opportunity to take a stateful copy of your running container the container will never know that it's checkpointed",
    "start": "501560",
    "end": "507840"
  },
  {
    "text": "and later you can analyze the container in a somewhere else or you can start it",
    "start": "507840",
    "end": "514599"
  },
  {
    "text": "again in a in a sandbox environment the restore part currently in cont uh in in",
    "start": "514599",
    "end": "520599"
  },
  {
    "text": "kubernetes is kind of a it's a bit of a trick we we trick kubernetes into",
    "start": "520599",
    "end": "527880"
  },
  {
    "text": "restoring a container so we we hook in cryo in the create and in the start call",
    "start": "527880",
    "end": "534480"
  },
  {
    "text": "we detect that it's a checkpoint and if a checkpoint is then we we do a a a",
    "start": "534480",
    "end": "540120"
  },
  {
    "text": "restore of the container so from kubernetes point of view it's a starting of a container but it actually is a",
    "start": "540120",
    "end": "546320"
  },
  {
    "text": "restore of the container so and this is something I will show later in my my",
    "start": "546320",
    "end": "552279"
  },
  {
    "text": "demo and now um couple of use cases just quickly going over why you want why you",
    "start": "552279",
    "end": "558839"
  },
  {
    "text": "would want to use um checkpoint ReStore in combination with kubernetes or",
    "start": "558839",
    "end": "564800"
  },
  {
    "text": "containers in general so one the first one is Quick Start quick startup kind of",
    "start": "564800",
    "end": "570240"
  },
  {
    "text": "it's um you have a container it takes a long time to run uh to start you need to update your host because you need a new",
    "start": "570240",
    "end": "576440"
  },
  {
    "text": "kernel so you can take a checkpoint reboot a host and the container will be restored much faster than it takes to",
    "start": "576440",
    "end": "583880"
  },
  {
    "text": "initialize all the libraries the multiple copies use case is similar to that um this is also people um talk to",
    "start": "583880",
    "end": "591160"
  },
  {
    "text": "us which they use in production so you have an application you want to offer to customers it takes a long time to start",
    "start": "591160",
    "end": "597079"
  },
  {
    "text": "maybe 10 minutes because it LO loads of libraries and so what they do they they take a checkpoint after the",
    "start": "597079",
    "end": "604079"
  },
  {
    "text": "initialization and and then they whenever a customer requests the application then they restore from the",
    "start": "604079",
    "end": "609760"
  },
  {
    "text": "checkpoint and the customer has to wait just a couple of seconds instead of 10",
    "start": "609760",
    "end": "614800"
  },
  {
    "text": "to 15 minutes then the container migration is is one of the most obvious",
    "start": "614800",
    "end": "619959"
  },
  {
    "text": "use cases from my point of view you want a container and you have it on one host you want to move it to another host",
    "start": "619959",
    "end": "626760"
  },
  {
    "text": "without losing the state then yesterday we had a talk um about checkpoint ReStore in spot",
    "start": "626760",
    "end": "632399"
  },
  {
    "text": "instances spot instances can go away anytime so what you want to do you to if",
    "start": "632399",
    "end": "638560"
  },
  {
    "text": "you get a signal that it goes away you take a checkpoint and continue to run the container on some other host all the",
    "start": "638560",
    "end": "645440"
  },
  {
    "text": "examples um at this point have been for stateful containers if you have a stateless container all this is not",
    "start": "645440",
    "end": "652279"
  },
  {
    "text": "really helpful because you don't have a state you want to save the forensic analysis use case is useful for all",
    "start": "652279",
    "end": "658560"
  },
  {
    "text": "containers because even if it's state stateless maybe you want to analyze it without",
    "start": "658560",
    "end": "664000"
  },
  {
    "text": "stopping the container and something which uh people talk to us a lot in the last year is AI training so you have a",
    "start": "664000",
    "end": "671600"
  },
  {
    "text": "container doing an AI model training with a GPU you want to checkpoint it and",
    "start": "671600",
    "end": "678079"
  },
  {
    "text": "run it somewhere else without losing all the work you've done so far so let's go to my migration",
    "start": "678079",
    "end": "687720"
  },
  {
    "text": "demo so I have a you can already see it here",
    "start": "688240",
    "end": "695480"
  },
  {
    "text": "I have a really simple um pot specification it's running two pots and I'm going to and this is",
    "start": "695480",
    "end": "703560"
  },
  {
    "text": "about 500 kilome M away the this VM so I'm going to",
    "start": "703560",
    "end": "711079"
  },
  {
    "text": "um it's not running let's start it so this is of course an um stateful",
    "start": "711240",
    "end": "719639"
  },
  {
    "text": "application it's a really simple application it just has a state nothing more and I can talk to it um just using",
    "start": "719639",
    "end": "727000"
  },
  {
    "text": "curl so now I have a counter it says one uh zero one",
    "start": "727000",
    "end": "733000"
  },
  {
    "text": "two no [Music]",
    "start": "733000",
    "end": "739360"
  },
  {
    "text": "two and now three and now I can create a checkpoint the checkpoint um is",
    "start": "739360",
    "end": "745240"
  },
  {
    "text": "currently available only as a CET only API and and this command does everything",
    "start": "745240",
    "end": "750639"
  },
  {
    "text": "I need but it's basically just call and curl on one of the cuet apis and now the",
    "start": "750639",
    "end": "756040"
  },
  {
    "text": "checkpoint is created and I have the name of the file in the",
    "start": "756040",
    "end": "762440"
  },
  {
    "text": "variable there it is and now I can we uh we we had a Google sum of code project",
    "start": "762440",
    "end": "768360"
  },
  {
    "text": "using two um two grade students who were helping us to write a tool to do the",
    "start": "768360",
    "end": "773600"
  },
  {
    "text": "forensic analysis um easily and we have a tool called checkpoint control and one",
    "start": "773600",
    "end": "779199"
  },
  {
    "text": "example what checkpoint control can do for example is the inspect command and what you see here is now you see",
    "start": "779199",
    "end": "786120"
  },
  {
    "text": "basically it's the the image it's based on then the runtime dates when it was",
    "start": "786120",
    "end": "791880"
  },
  {
    "text": "started when it was checkpointed the engine the IP address the size and and so on and to migrate this container to",
    "start": "791880",
    "end": "800839"
  },
  {
    "text": "another host I have now to um uh convert this image to an oci",
    "start": "800839",
    "end": "807920"
  },
  {
    "text": "image me do that on the top I'm using builder for that",
    "start": "807920",
    "end": "817399"
  },
  {
    "text": "so the first step should be to add the T file to the new container",
    "start": "817399",
    "end": "824480"
  },
  {
    "text": "image then we do no then we add some",
    "start": "824480",
    "end": "831720"
  },
  {
    "text": "um um annotation to it so that it can easily be detected as a",
    "start": "831720",
    "end": "837120"
  },
  {
    "text": "checkpoint then we do a commit and then I delete the",
    "start": "837120",
    "end": "843959"
  },
  {
    "text": "intermediate image and now I have to push the image to a container",
    "start": "843959",
    "end": "850560"
  },
  {
    "text": "registry let's push what there it is and I'm going to",
    "start": "852279",
    "end": "859680"
  },
  {
    "text": "call it 51 and now on another VM so this is now",
    "start": "859680",
    "end": "867120"
  },
  {
    "text": "local on my machine here I will so previously I had a pot with",
    "start": "867120",
    "end": "872320"
  },
  {
    "text": "two containers and now I'm migrating one of the containers into a pot with a",
    "start": "872320",
    "end": "877480"
  },
  {
    "text": "single [Music]",
    "start": "877480",
    "end": "881510"
  },
  {
    "text": "container and again really simple I'm just replacing here the 50 with the",
    "start": "884279",
    "end": "890160"
  },
  {
    "text": "51 and now I will say apply and now what will happen is that",
    "start": "890160",
    "end": "897720"
  },
  {
    "text": "cryo in the background will download the container image see it's a checkpoint",
    "start": "897720",
    "end": "903040"
  },
  {
    "text": "image and then uh do a restore kubernetes will believe it's a new",
    "start": "903040",
    "end": "908600"
  },
  {
    "text": "container but it's it's an old container like we will see soon hopefully and now",
    "start": "908600",
    "end": "913920"
  },
  {
    "text": "I will access the container and now it should say I know what was the last oh I don't",
    "start": "913920",
    "end": "921560"
  },
  {
    "text": "see it anymore so I think it should say four or five I don't know let's see five",
    "start": "921560",
    "end": "928399"
  },
  {
    "text": "four so the container has been migrated from one host to another host over a",
    "start": "928399",
    "end": "934040"
  },
  {
    "text": "large distance maybe and so um with this I'm at the end of the introduction part",
    "start": "934040",
    "end": "941839"
  },
  {
    "text": "about creu checkpoint restore and please",
    "start": "941839",
    "end": "947279"
  },
  {
    "text": "r hi everyone um so um HPC applications are driven by",
    "start": "947279",
    "end": "954360"
  },
  {
    "text": "scale and performance and in order to process large amounts of data they need to distributed or to be running on",
    "start": "954360",
    "end": "961399"
  },
  {
    "text": "multiple different servers um the HPC Community uh has been uh increasingly",
    "start": "961399",
    "end": "968440"
  },
  {
    "text": "adopting kubernetes mainly because of the features and benefits that it",
    "start": "968440",
    "end": "974399"
  },
  {
    "text": "provides however um the current checkpointing implementation um is not",
    "start": "974399",
    "end": "980440"
  },
  {
    "text": "able to checkpoint multiple containers at the same time and the fundamental reason is because a cre was not designed",
    "start": "980440",
    "end": "988240"
  },
  {
    "text": "to uh um checkpoint distributed applications it was designed to checkpoint a single process tree so um",
    "start": "988240",
    "end": "995839"
  },
  {
    "text": "the question is how can we extend cre to to support distributed applications and",
    "start": "995839",
    "end": "1000959"
  },
  {
    "text": "how can we um enable dysfunctionality in kubernetes and there there is a large",
    "start": "1000959",
    "end": "1008000"
  },
  {
    "text": "amount of research done um on distributed checkpointing and the",
    "start": "1008000",
    "end": "1013199"
  },
  {
    "text": "checkpointing and roll back recovery protocols this was then uh the fundamental concepts were uh created in",
    "start": "1013199",
    "end": "1020279"
  },
  {
    "text": "the 1980s and 1990s when um the resilience of computer systems uh was",
    "start": "1020279",
    "end": "1027798"
  },
  {
    "text": "fairly low and uh the most recent work um for example that enables distribute",
    "start": "1027799",
    "end": "1035000"
  },
  {
    "text": "checkpointing is dmcp um dmcp is um a tool Sim more to",
    "start": "1035000",
    "end": "1041360"
  },
  {
    "text": "creu it uh provides uh system level checkpoint restore um the way it works",
    "start": "1041360",
    "end": "1048919"
  },
  {
    "text": "it works in user space but the way it works is using the LD preload mechanism which means um if you it's not fully",
    "start": "1048919",
    "end": "1058160"
  },
  {
    "text": "transparent so uh to be able to checkpoint and restore application you need to uh be able to need to start this",
    "start": "1058160",
    "end": "1065880"
  },
  {
    "text": "application with GMT Speed Launcher um um gmtp is also very um very similar",
    "start": "1065880",
    "end": "1075720"
  },
  {
    "text": "to cre in a sense that has been integrated for example with container platforms such as obtainer however",
    "start": "1075720",
    "end": "1083919"
  },
  {
    "text": "um the way um uh the main point is that it provides",
    "start": "1083919",
    "end": "1090080"
  },
  {
    "text": "a coordination mechanism that allows to essentially synchronize um the checkpointing between",
    "start": "1090080",
    "end": "1097440"
  },
  {
    "text": "different instances and it's also doing this dur during restore um another",
    "start": "1097440",
    "end": "1104240"
  },
  {
    "text": "example is Apache Flink which uh provides very advanced tolerance",
    "start": "1104240",
    "end": "1109400"
  },
  {
    "text": "mechanism to provide uninterrupted execution for um data analytics and uh",
    "start": "1109400",
    "end": "1115679"
  },
  {
    "text": "data stream processing batch jobs um however a patch Flink is uh is a",
    "start": "1115679",
    "end": "1121440"
  },
  {
    "text": "framework it um um it it it cannot be used with",
    "start": "1121440",
    "end": "1127960"
  },
  {
    "text": "existing HPC applications so um to be",
    "start": "1127960",
    "end": "1133360"
  },
  {
    "text": "able to um to create a consistent Global checkpoint we first need to understand",
    "start": "1133360",
    "end": "1138919"
  },
  {
    "text": "what what does it mean to be a consistent checkpoint and essentially this diagram illustrates on the uh on",
    "start": "1138919",
    "end": "1146919"
  },
  {
    "text": "the xais the time of uh different contain how different containers are running and the red circles are",
    "start": "1146919",
    "end": "1154400"
  },
  {
    "text": "checkpoints and the checkpoint wave is essentially when uh we create",
    "start": "1154400",
    "end": "1160720"
  },
  {
    "text": "checkpoints for all containers and when uh a message has been sent um um a check",
    "start": "1160720",
    "end": "1168720"
  },
  {
    "text": "checkpoint is consistent when all arrows arrows are messages being sent between",
    "start": "1168720",
    "end": "1174400"
  },
  {
    "text": "different messages and for checkpoint to be consistent it means that all arrows",
    "start": "1174400",
    "end": "1179600"
  },
  {
    "text": "starting on should start on the left side and finish on the right side uh of",
    "start": "1179600",
    "end": "1185120"
  },
  {
    "text": "the checkpoint wave for example messages uh that are starting on the right side",
    "start": "1185120",
    "end": "1190840"
  },
  {
    "text": "and finishing on the left are called or fun messages or we have recorded in the",
    "start": "1190840",
    "end": "1196960"
  },
  {
    "text": "checkpoint the rece event of the message but not the sent event so this is the",
    "start": "1196960",
    "end": "1202400"
  },
  {
    "text": "definition of inconsistent checkpoint um",
    "start": "1202400",
    "end": "1208200"
  },
  {
    "text": "so most check uh distributed checkpointing implementations use a mechanism called barriers and these are",
    "start": "1208200",
    "end": "1216159"
  },
  {
    "text": "essentially points in the uh checkpointing process when we have to",
    "start": "1216159",
    "end": "1221200"
  },
  {
    "text": "synchronize um the uh the checkpoint across different instances cre doesn't",
    "start": "1221200",
    "end": "1228280"
  },
  {
    "text": "provide this type of barriers but it has a functionality called action scripts or",
    "start": "1228280",
    "end": "1235120"
  },
  {
    "text": "essentially um it has hooks or places during the checkpointing process or and",
    "start": "1235120",
    "end": "1241760"
  },
  {
    "text": "during the restore process where it can execute an external uh external utility",
    "start": "1241760",
    "end": "1247919"
  },
  {
    "text": "and waits until this external utility completes and in this case to",
    "start": "1247919",
    "end": "1253679"
  },
  {
    "text": "essentially enable synchronization we we developed a tool called cre coordinat",
    "start": "1253679",
    "end": "1259200"
  },
  {
    "text": "which essentially is used with this action script functionality to enable",
    "start": "1259200",
    "end": "1264280"
  },
  {
    "text": "synchronization between different cre instances um so the cre coordinat tool has a",
    "start": "1264280",
    "end": "1272600"
  },
  {
    "text": "client site and server site it's using the client site to essentially register",
    "start": "1272600",
    "end": "1278760"
  },
  {
    "text": "uh different instances with with the server and um essentially specify",
    "start": "1278760",
    "end": "1284279"
  },
  {
    "text": "dependencies or which cre instance depends on uh which others and then use this to uh",
    "start": "1284279",
    "end": "1292760"
  },
  {
    "text": "essentially pause the checkpoint and uh continue when all the dependencies have been",
    "start": "1292760",
    "end": "1299520"
  },
  {
    "text": "satisfied um the restore process works in a similar way",
    "start": "1299559",
    "end": "1305400"
  },
  {
    "text": "um um essentially during restore we um we execute cre cre starts the",
    "start": "1305400",
    "end": "1312559"
  },
  {
    "text": "coordinator and then synchronizes and waits for all other dependencies to get to this point and when the dependencies",
    "start": "1312559",
    "end": "1320360"
  },
  {
    "text": "have been satisfied it continues to to the next uh step",
    "start": "1320360",
    "end": "1326360"
  },
  {
    "text": "and uh this essentially allows us to um to provide uh distributed checkpointing",
    "start": "1326360",
    "end": "1333240"
  },
  {
    "text": "without um essentially needing to modify cre or modify kubernetes or essentially",
    "start": "1333240",
    "end": "1339799"
  },
  {
    "text": "how we can reuse the existing projects with with this",
    "start": "1339799",
    "end": "1346000"
  },
  {
    "text": "functionality um",
    "start": "1347120",
    "end": "1350520"
  },
  {
    "text": "uh so this is uh simple demo showing how it the coordination mechanism can be",
    "start": "1354679",
    "end": "1363320"
  },
  {
    "text": "used so we first start um to counter applications that are simply just",
    "start": "1366080",
    "end": "1373000"
  },
  {
    "text": "outputting uh a number every second then um there is a configuration file for the",
    "start": "1373000",
    "end": "1379120"
  },
  {
    "text": "coordinator to defined in the uh images directory where the checkpoint will be",
    "start": "1379120",
    "end": "1384440"
  },
  {
    "text": "created um and then we start this server on the right side and on on the left",
    "start": "1384440",
    "end": "1390000"
  },
  {
    "text": "side and um when the checkpoint is created the",
    "start": "1390000",
    "end": "1396600"
  },
  {
    "text": "application will well cre will start checkpointing but it will stop until the",
    "start": "1396600",
    "end": "1403080"
  },
  {
    "text": "the dependencies for the checkpoint are satisfied and um",
    "start": "1403080",
    "end": "1409720"
  },
  {
    "text": "when the second AC instance starts then it connects to the server and um this",
    "start": "1409720",
    "end": "1415640"
  },
  {
    "text": "essentially triggers the synchronization mechanism to uh continue the checkpoint so essentially both checkpoints complete",
    "start": "1415640",
    "end": "1422840"
  },
  {
    "text": "at the same time and assar during",
    "start": "1422840",
    "end": "1428039"
  },
  {
    "text": "restore um the restore process starts the uh the starts with the first",
    "start": "1428039",
    "end": "1434240"
  },
  {
    "text": "application then with the second and um essentially it makes sure that both um",
    "start": "1434240",
    "end": "1439880"
  },
  {
    "text": "the checkpointing and the restore process both happen at the same",
    "start": "1439880",
    "end": "1445559"
  },
  {
    "text": "time um so um now that essentially we can um",
    "start": "1448880",
    "end": "1455600"
  },
  {
    "text": "synchronize the checkpoint when when we have application running on different",
    "start": "1455600",
    "end": "1460720"
  },
  {
    "text": "nodes we also want to um transfer these checkpoints to a single location or uh",
    "start": "1460720",
    "end": "1467679"
  },
  {
    "text": "single server where um we can essentially form a global checkpoint that can be used",
    "start": "1467679",
    "end": "1473440"
  },
  {
    "text": "during prore and for this uh we essentially have we we're using the",
    "start": "1473440",
    "end": "1479360"
  },
  {
    "text": "streaming mechanism in crew that allows us to transfer the uh images from um",
    "start": "1479360",
    "end": "1485919"
  },
  {
    "text": "from all nodes during checkpoint and then collect them on the uh destination site or where the uh server is",
    "start": "1485919",
    "end": "1493919"
  },
  {
    "text": "running and uh some future work is to essentially integrate this two with the",
    "start": "1495320",
    "end": "1501960"
  },
  {
    "text": "um cry cryo and container D engines um to essentially automate the",
    "start": "1501960",
    "end": "1508960"
  },
  {
    "text": "dependency detection in kubernetes or these are essentially identifying the um",
    "start": "1508960",
    "end": "1515880"
  },
  {
    "text": "which container depends on which other containers um this is also very similar",
    "start": "1515880",
    "end": "1521679"
  },
  {
    "text": "to the way you would for example start a pod kubernetes is using a list of",
    "start": "1521679",
    "end": "1526720"
  },
  {
    "text": "dependencies to uh uh for example start the initialization container before",
    "start": "1526720",
    "end": "1532799"
  },
  {
    "text": "application containers um and uh the future work is also to",
    "start": "1532799",
    "end": "1540919"
  },
  {
    "text": "enable um integration with kubernetes objects such as uh stateful sets and",
    "start": "1540919",
    "end": "1549960"
  },
  {
    "text": "deployments I think that's it right yeah that's it we're at the end any",
    "start": "1553240",
    "end": "1559390"
  },
  {
    "text": "[Applause] [Music]",
    "start": "1559390",
    "end": "1565679"
  },
  {
    "text": "questions there are two I think you need to go to the mic or our mic is coming to you I don't",
    "start": "1565679",
    "end": "1571760"
  },
  {
    "text": "know there is one coming",
    "start": "1571760",
    "end": "1576360"
  },
  {
    "text": "yeah so I will answer the basic checkpoint Resort questions",
    "start": "1580360",
    "end": "1585880"
  },
  {
    "text": "about creu and kubernetes and will answer the first of all thanks thank you very much for the talk so question one",
    "start": "1585880",
    "end": "1593000"
  },
  {
    "text": "is in your demo when you did the checkpointing in restoring if I understood Drive kubernetes took knew",
    "start": "1593000",
    "end": "1598880"
  },
  {
    "text": "that it's a restore by the notation of the image again please how the kubernetes",
    "start": "1598880",
    "end": "1605760"
  },
  {
    "text": "knew that this is a restore okay kubernetes doesn't know it's just the container engine which doesn't know it",
    "start": "1605760",
    "end": "1611320"
  },
  {
    "text": "so that was a notation That's The annotation because yeah we so so what we do we we we pass the image to so",
    "start": "1611320",
    "end": "1618559"
  },
  {
    "text": "basically kubernetes passes the image during create to to cryo cryo downloads",
    "start": "1618559",
    "end": "1623880"
  },
  {
    "text": "the image and then we check if it has an annotation if it has an annotation then we go an extra code path to do the",
    "start": "1623880",
    "end": "1630279"
  },
  {
    "text": "restore yeah so there is a simple if condition in the container and in in Prior yeah it's it's really just if",
    "start": "1630279",
    "end": "1637679"
  },
  {
    "text": "string exists basically something and the second one is like in I assume we is",
    "start": "1637679",
    "end": "1643320"
  },
  {
    "text": "or do you know anything what's related being done in this space for the n networking to resolve let's say give the",
    "start": "1643320",
    "end": "1650240"
  },
  {
    "text": "same pod IP address service put under the same like networking stack yeah good",
    "start": "1650240",
    "end": "1656880"
  },
  {
    "text": "question so for the for the potman migration work I I did before um I I actually I I I'm restoring the IP",
    "start": "1656880",
    "end": "1664360"
  },
  {
    "text": "address of the of the container to be the same so that TCP connections can stay alive for kubernetes I never really",
    "start": "1664360",
    "end": "1671519"
  },
  {
    "text": "looked into it because um from my understanding the network stack can be",
    "start": "1671519",
    "end": "1676880"
  },
  {
    "text": "really complicated but there's actually a Google sum of cod project again um this year um in",
    "start": "1676880",
    "end": "1684720"
  },
  {
    "text": "combination with P4 yes uh so P4 is a uh programming language or programming",
    "start": "1684720",
    "end": "1691000"
  },
  {
    "text": "protocal independent packet processors it's essentially uh language used for programming um switches such as toino in",
    "start": "1691000",
    "end": "1699720"
  },
  {
    "text": "toino and um the organization participates in Google this year and we",
    "start": "1699720",
    "end": "1706600"
  },
  {
    "text": "have uh actually a project that aims to solve this problem essentially how do we",
    "start": "1706600",
    "end": "1712320"
  },
  {
    "text": "migrate containers and enable changing the IP address but the solution is essentially using loow balancer so you",
    "start": "1712320",
    "end": "1719840"
  },
  {
    "text": "have all clients sending buckets to the loan Bouncer and then the loow balcer keeps track of essentially the updated",
    "start": "1719840",
    "end": "1726480"
  },
  {
    "text": "IP address but I basically ignored it so far because the whole networking thing",
    "start": "1726480",
    "end": "1733519"
  },
  {
    "text": "is too complicated for me to understand I'm I'm focusing on a very small part right now so yeah",
    "start": "1733519",
    "end": "1741080"
  },
  {
    "text": "but there was yeah please hi this is abish from IBM research oh hi um so I",
    "start": "1741080",
    "end": "1748600"
  },
  {
    "text": "have a question related to AI workloads oh you have to speak up I cannot hear you sorry I have a question uh related to AI",
    "start": "1748600",
    "end": "1757120"
  },
  {
    "text": "workloads does it also checkpoint um this the status of the GPU memory and",
    "start": "1757120",
    "end": "1764159"
  },
  {
    "text": "and other things okay so the questions if if if we can checkpoint basically can",
    "start": "1764159",
    "end": "1769640"
  },
  {
    "text": "we checkpoint containers using the GPU right something like this okay yeah so",
    "start": "1769640",
    "end": "1775039"
  },
  {
    "text": "so it depends um so we can checkpoint uh processes which are using AMD gpus",
    "start": "1775039",
    "end": "1782720"
  },
  {
    "text": "because AMD came to the creu project and they provided the plug-in to support the",
    "start": "1782720",
    "end": "1789399"
  },
  {
    "text": "GPU so basically whenever you have external hardware which is not directly connected by the kernel which you go",
    "start": "1789399",
    "end": "1796440"
  },
  {
    "text": "around like infin band GP U then there is an additional state in the GPU in the infin band card",
    "start": "1796440",
    "end": "1804919"
  },
  {
    "text": "which we cannot extract from from Linux easily so we need the the plugin I",
    "start": "1804919",
    "end": "1810559"
  },
  {
    "text": "mentioned and for from my point of view this means that basically the vendor has to step up and write a plug-in AMD did",
    "start": "1810559",
    "end": "1817360"
  },
  {
    "text": "it there are videos around that there's also Nvidia doing it I think Microsoft",
    "start": "1817360",
    "end": "1823720"
  },
  {
    "text": "had a video with CAD GPT where they claimed they're using creu and Nvidia G gpus there was a video from mber in",
    "start": "1823720",
    "end": "1831679"
  },
  {
    "text": "combination with Nvidia gpus so people are working on it but people are not",
    "start": "1831679",
    "end": "1836799"
  },
  {
    "text": "talking to the Upstream creu developers so we are not aware of it just that we",
    "start": "1836799",
    "end": "1843960"
  },
  {
    "text": "see videos on YouTube on it yeah so what is necessary to enable GPU checkpointing",
    "start": "1843960",
    "end": "1849360"
  },
  {
    "text": "is essentially the ability to save the state of GPU and restore it back uh MD",
    "start": "1849360",
    "end": "1855080"
  },
  {
    "text": "um the driver for I'm jpus is open source so they already implemented this",
    "start": "1855080",
    "end": "1860159"
  },
  {
    "text": "and you can um checkpoint restore GPU applications with r gpus uh Nvidia also",
    "start": "1860159",
    "end": "1865720"
  },
  {
    "text": "have a team working on this and they there was a poster at uh a conference a",
    "start": "1865720",
    "end": "1870880"
  },
  {
    "text": "few days ago where they presented um something that hasn't been released yet",
    "start": "1870880",
    "end": "1876320"
  },
  {
    "text": "but it's a proof of concept demonstrating that you can checkpoint restore GP applications with cre there",
    "start": "1876320",
    "end": "1881760"
  },
  {
    "text": "is also a startup called sedan that are also focusing on essentially solving",
    "start": "1881760",
    "end": "1887399"
  },
  {
    "text": "this problem and yeah there are multiple people working on essentially uh",
    "start": "1887399",
    "end": "1894679"
  },
  {
    "text": "this hello thank you for the presentation that was great and",
    "start": "1895480",
    "end": "1900760"
  },
  {
    "text": "interesting um inde did you mention like a couple of use cases like uh running",
    "start": "1900760",
    "end": "1907080"
  },
  {
    "text": "some jobs basically long running jobs I could imagine uh be using that kind of",
    "start": "1907080",
    "end": "1913080"
  },
  {
    "text": "feature Whenever there is a node that is reclaimed because actually kubernetes knows are reclaim regularly are are",
    "start": "1913080",
    "end": "1921559"
  },
  {
    "text": "updated with versions so it's like a very emal uh",
    "start": "1921559",
    "end": "1926720"
  },
  {
    "text": "environment um so I I believe that's very interesting uh uh solution for that",
    "start": "1926720",
    "end": "1934000"
  },
  {
    "text": "kind of uh use cases but the demonstration that you made were was really",
    "start": "1934000",
    "end": "1940039"
  },
  {
    "text": "manual uh is there any plan to automate all of this actually make just asking",
    "start": "1940039",
    "end": "1946159"
  },
  {
    "text": "requesting the plat so so my my goal kind of is to have migration",
    "start": "1946159",
    "end": "1953919"
  },
  {
    "text": "working and in the best case it's done by the scheduler if there's a low priority container pot it will be",
    "start": "1953919",
    "end": "1960159"
  },
  {
    "text": "automatically moved anywhere else but for the first part which you saw now this took at least four years so and it feels",
    "start": "1960159",
    "end": "1968279"
  },
  {
    "text": "like this is 10% of the way so yes but it's it's a long",
    "start": "1968279",
    "end": "1975440"
  },
  {
    "text": "way hi thank thanks for the uh presentation okay question about the HPC",
    "start": "1976519",
    "end": "1983639"
  },
  {
    "text": "um part how do you determine at what point or in terms of time how do you",
    "start": "1983639",
    "end": "1990760"
  },
  {
    "text": "determine uh whether all the pods or the containers is a place where you can take",
    "start": "1990760",
    "end": "1996840"
  },
  {
    "text": "a checkpoint I think this for you um can you repeat the question sorry so you",
    "start": "1996840",
    "end": "2003880"
  },
  {
    "text": "talked about Flink for example in Flink they send a message to say hey that is the point all the processes needs to",
    "start": "2003880",
    "end": "2010639"
  },
  {
    "text": "take a checkpoint similar to that do you have something in the case of HPC when you do a checkpoint or yeah um so",
    "start": "2010639",
    "end": "2017679"
  },
  {
    "text": "essentially the question is how do we uh synchronize the checkpoint or how for example Flink is sending messages",
    "start": "2017679",
    "end": "2023880"
  },
  {
    "text": "between uh different um essentially to initiate a checkpoint and uh with cre we",
    "start": "2023880",
    "end": "2030120"
  },
  {
    "text": "can't really do that because uh essentially cre is not uh something that is continuously running on the server",
    "start": "2030120",
    "end": "2037120"
  },
  {
    "text": "it's something that that we need to start so essentially when we want to create a checkpoint we uh start all cre",
    "start": "2037120",
    "end": "2044919"
  },
  {
    "text": "instances and can just go back no I I can't but um essentially we",
    "start": "2044919",
    "end": "2052839"
  },
  {
    "text": "have uh action script hook called uh prump which uh essentially allows us to",
    "start": "2052839",
    "end": "2059560"
  },
  {
    "text": "pause uh cre until all other instances are running and this allows us to start",
    "start": "2059560",
    "end": "2065919"
  },
  {
    "text": "the checkpoint at the same time uh did that answer your question",
    "start": "2065919",
    "end": "2073040"
  },
  {
    "text": "okay hi uh first congratulations on your work one question on the distributed",
    "start": "2073040",
    "end": "2078520"
  },
  {
    "text": "setting when you're doing to achieve a consistent cut how are you capturing the messages in transit so are you using",
    "start": "2078520",
    "end": "2085158"
  },
  {
    "text": "sort of a Chand import algorithm or something like that yeah I mean we we",
    "start": "2085159",
    "end": "2090839"
  },
  {
    "text": "don't really capture the messages in in our case we just freeze the whole process tream so essentially when all",
    "start": "2090839",
    "end": "2098160"
  },
  {
    "text": "cre instances are um synchronized at the prump um hook then the next stage uh in",
    "start": "2098160",
    "end": "2106480"
  },
  {
    "text": "the next stage cre uses the freezer C group to essentially PA all processes so",
    "start": "2106480",
    "end": "2112040"
  },
  {
    "text": "in this case um all applications will will be paused and then when the checkpoint is complete uh again it will",
    "start": "2112040",
    "end": "2119599"
  },
  {
    "text": "synchronize the checkpoints and then it will resume them when they're all synchronized yeah I think I think",
    "start": "2119599",
    "end": "2125880"
  },
  {
    "text": "currently we don't have any this part there's no um messages could get lost",
    "start": "2125880",
    "end": "2131000"
  },
  {
    "text": "definitely if we talk about TCP then TCP will do the retransmission hopefully if we talk about infin band then we're out",
    "start": "2131000",
    "end": "2137359"
  },
  {
    "text": "of luck if you're looking at at what MPI does basically there used to be the MPI",
    "start": "2137359",
    "end": "2142480"
  },
  {
    "text": "fra or I know about open MPI there used to be the framework to do checkpoint restore there and what it did before was",
    "start": "2142480",
    "end": "2148240"
  },
  {
    "text": "basically it it qu all the processes in the MPI calculation to don't do any um",
    "start": "2148240",
    "end": "2155400"
  },
  {
    "text": "Transmissions anymore but if you're talking about Infinity band then your message will probably currently be lost",
    "start": "2155400",
    "end": "2160800"
  },
  {
    "text": "if we're talking about gcp then we hope that retransmission saves us and this do a research work so it's not something",
    "start": "2160800",
    "end": "2168119"
  },
  {
    "text": "that can be used in production yet maybe we will introduce the two-phase commit where we can capture this type of",
    "start": "2168119",
    "end": "2176000"
  },
  {
    "text": "issues um yeah thank you for the for the presentation um I was thinking of the",
    "start": "2176920",
    "end": "2182760"
  },
  {
    "text": "use case where we run basically a job like for an AI workload or something like that and and maybe during the",
    "start": "2182760",
    "end": "2189040"
  },
  {
    "text": "execution of the job which has a high high value we don't want to lose it um uh something silly happens to the node I",
    "start": "2189040",
    "end": "2195440"
  },
  {
    "text": "don't know this is full or or memory corruption and uh maybe to kind of",
    "start": "2195440",
    "end": "2201079"
  },
  {
    "text": "devise a way to restore the job on another node like in which case do you",
    "start": "2201079",
    "end": "2206160"
  },
  {
    "text": "think uh a not corruption uh would still be able to we would still be able to uh",
    "start": "2206160",
    "end": "2212960"
  },
  {
    "text": "do the checkpoint and restore and in which case it would not be possible so",
    "start": "2212960",
    "end": "2219319"
  },
  {
    "text": "I hard question so um I guess the the thing is as long as you can read memory",
    "start": "2219319",
    "end": "2226040"
  },
  {
    "text": "and and registers it might work but if if your uh storage subsystem doesn't work",
    "start": "2226040",
    "end": "2232560"
  },
  {
    "text": "anymore then I don't know then you maybe have to do it over Network so it really depends on on the things and and again",
    "start": "2232560",
    "end": "2239160"
  },
  {
    "text": "going back to HPC there are lots of papers about um fall tolerance using",
    "start": "2239160",
    "end": "2244400"
  },
  {
    "text": "checkpoint restore and there's a lot of research search what is the optimal checkpoint interval to to regularly take",
    "start": "2244400",
    "end": "2251880"
  },
  {
    "text": "checkpoints but don't you don't want to um create too much IO for the io",
    "start": "2251880",
    "end": "2258119"
  },
  {
    "text": "subsystem so that it's only writing all the time and not doing any calculations so this is heavily depends on your error",
    "start": "2258119",
    "end": "2264560"
  },
  {
    "text": "heavily depends on the application so basically we cannot answer it but uh yeah depends thank",
    "start": "2264560",
    "end": "2273920"
  },
  {
    "text": "you there's one more question in the second",
    "start": "2274560",
    "end": "2280920"
  },
  {
    "text": "row um in the cuet API path so you had like for coordination some pretty dump",
    "start": "2281960",
    "end": "2288240"
  },
  {
    "text": "action scripts when we use the CU API pad is there a way to tell creu to take",
    "start": "2288240",
    "end": "2293560"
  },
  {
    "text": "some actions pre dump State because some of the applications require like you know some preparation like deleting some",
    "start": "2293560",
    "end": "2300200"
  },
  {
    "text": "files or just something to prepare the application for a checkpoint yeah so so",
    "start": "2300200",
    "end": "2305640"
  },
  {
    "text": "basically I guess your question is how can you can you um tell creu to do",
    "start": "2305640",
    "end": "2311800"
  },
  {
    "text": "something differently because creu has many options and you want to select one of the options during um your your",
    "start": "2311800",
    "end": "2318440"
  },
  {
    "text": "kubernetes checkpointing creation yeah something likeing up an action yeah yeah so when I initially um brought this up",
    "start": "2318440",
    "end": "2325880"
  },
  {
    "text": "and and we had to introduce the new CRI um call I had I had a couple of",
    "start": "2325880",
    "end": "2331400"
  },
  {
    "text": "parameters there like TCP established and so on but they were all um removed during review because the the the story",
    "start": "2331400",
    "end": "2338920"
  },
  {
    "text": "currently is the forensic container checkpointing and so it's it's not needed um I think it would be nice to",
    "start": "2338920",
    "end": "2346119"
  },
  {
    "text": "have it in the future the question is do you want to expose it one to one to so",
    "start": "2346119",
    "end": "2351319"
  },
  {
    "text": "there is also a pull request currently from me open to do it on on cctl checkpoint this also exists it's not",
    "start": "2351319",
    "end": "2357520"
  },
  {
    "text": "merged so the question is do we really want to expose all parameters from creu in cctl and then pass them all the way",
    "start": "2357520",
    "end": "2364240"
  },
  {
    "text": "through there are also the the configuration f files but the configuration files are not really",
    "start": "2364240",
    "end": "2369720"
  },
  {
    "text": "useful if you're talking about a kubernetes cluster because the configuration file has to be on the Node",
    "start": "2369720",
    "end": "2375359"
  },
  {
    "text": "creu is running so I'm I'm undecided but I totally understand that we have to",
    "start": "2375359",
    "end": "2380720"
  },
  {
    "text": "have a way to have additional parameters passed from basically from Cube CTL down",
    "start": "2380720",
    "end": "2386400"
  },
  {
    "text": "to the cube to creu the lowest level yeah and actually there is um runc",
    "start": "2386400",
    "end": "2392480"
  },
  {
    "text": "supports custom configuration file so technically you can define a configuration file for every container",
    "start": "2392480",
    "end": "2399760"
  },
  {
    "text": "uh that you're checkpointing and restoring and this allows you to essentially specify additional create options that are being used for",
    "start": "2399760",
    "end": "2408640"
  },
  {
    "text": "checkpoint okay looks like we're done thanks a lot for your questions for your",
    "start": "2413000",
    "end": "2418240"
  },
  {
    "text": "[Applause]",
    "start": "2418240",
    "end": "2423400"
  },
  {
    "text": "time the microphone's too I think you you just turn it",
    "start": "2423400",
    "end": "2428960"
  },
  {
    "text": "down okay",
    "start": "2428960",
    "end": "2435040"
  }
]