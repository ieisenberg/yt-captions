[
  {
    "text": "hi everybody it's great to be here my name is elam i'm the cto and co-founder of algon and today i want to talk about",
    "start": "320",
    "end": "6399"
  },
  {
    "text": "the software supply chain so this is me coming to you today from",
    "start": "6399",
    "end": "11840"
  },
  {
    "text": "tel aviv and just a word about argon so argon's mission is to help companies release",
    "start": "11840",
    "end": "18640"
  },
  {
    "text": "software securely meaning we help protect each and every phase of the software supply chain and",
    "start": "18640",
    "end": "24720"
  },
  {
    "text": "we'll dive into that in just a few slides so what are we going to talk about today",
    "start": "24720",
    "end": "30880"
  },
  {
    "text": "um so an intro of me and algon is done uh and just a few words about the software supply chain what it is and how",
    "start": "30880",
    "end": "37440"
  },
  {
    "text": "it comes into play we're going to speak about a few of the recent attacks and we'll dive into two",
    "start": "37440",
    "end": "43920"
  },
  {
    "text": "of them specifically after that we're going to have a live demo of an attack and how it looks like",
    "start": "43920",
    "end": "49360"
  },
  {
    "text": "in the wild and we'll see how album comes into play and all of that and that's it for today",
    "start": "49360",
    "end": "56878"
  },
  {
    "text": "so a little bit about the software supply chain the software supply chain is actually a term that is borrowed from the physical",
    "start": "57039",
    "end": "63680"
  },
  {
    "text": "world uh where it is used to describe the path or the route uh physical products or services um take from the",
    "start": "63680",
    "end": "71280"
  },
  {
    "text": "moment they are composed in the factory uh from all those different ingredients throughout the entire chain of supply up",
    "start": "71280",
    "end": "78479"
  },
  {
    "text": "until the time they are delivered to my doorstep um so the software world",
    "start": "78479",
    "end": "84799"
  },
  {
    "text": "concept the concepts are pretty similar as we can see here the five different phases of the software supply chain",
    "start": "84799",
    "end": "91520"
  },
  {
    "text": "so starting from the code itself and the source code management platforms that manage it",
    "start": "91520",
    "end": "97119"
  },
  {
    "text": "throughout the materials which is another way of saying dependencies so open source dependencies and ci",
    "start": "97119",
    "end": "104079"
  },
  {
    "text": "pipeline dependencies we'll see how those look like later on um then we have the build phase",
    "start": "104079",
    "end": "111600"
  },
  {
    "text": "ci pipelines taking raw lines of source code are compiling them",
    "start": "111600",
    "end": "117119"
  },
  {
    "text": "and finally achieving a final form of artifact those need to be managed as well so we have all those",
    "start": "117119",
    "end": "123600"
  },
  {
    "text": "different package registries for artifact management and the final phase is the deployment",
    "start": "123600",
    "end": "129360"
  },
  {
    "text": "phase where you take the final docker image or npm package and deploy it to the relevant environment",
    "start": "129360",
    "end": "135920"
  },
  {
    "text": "let's say your kubernetes cluster in the production here we have a relatively simple example",
    "start": "135920",
    "end": "142800"
  },
  {
    "text": "i guess um of this type of chain we can see that uh the technological change that was",
    "start": "142800",
    "end": "149760"
  },
  {
    "text": "introduced here in the just recent years is very dramatic so we didn't used to",
    "start": "149760",
    "end": "155360"
  },
  {
    "text": "look anything like that just a couple of years ago um companies would release software uh completely different",
    "start": "155360",
    "end": "162160"
  },
  {
    "text": "um you would have this quarterly release night everything would go according to some project plan a lot of human",
    "start": "162160",
    "end": "168720"
  },
  {
    "text": "intervention in the process today this is not the case so software companies have",
    "start": "168720",
    "end": "174879"
  },
  {
    "text": "released software tens of times a day with full automation without any human",
    "start": "174879",
    "end": "179920"
  },
  {
    "text": "intervention and the technological chain was very quick to uh to come into play here we",
    "start": "179920",
    "end": "187280"
  },
  {
    "text": "can see some of the major recent events just in the last few years um to understand how quickly this",
    "start": "187280",
    "end": "193519"
  },
  {
    "text": "has come um so we can see that in 2015 lab",
    "start": "193519",
    "end": "198560"
  },
  {
    "text": "was just a 10 employees companies after that in 2016 google cloud build",
    "start": "198560",
    "end": "204319"
  },
  {
    "text": "was only released in beta today is one of the more popular build platform outdoors",
    "start": "204319",
    "end": "210640"
  },
  {
    "text": "bitbucket pipeline replaces bamboo just in late 2017 and azure devops cloud what",
    "start": "210640",
    "end": "217680"
  },
  {
    "text": "was introduced in 2018 um granted microsoft did have uh tfs",
    "start": "217680",
    "end": "223920"
  },
  {
    "text": "platforms but some would argue that is it is different",
    "start": "223920",
    "end": "228959"
  },
  {
    "text": "um github action i guess it this is the more interesting part so gita veteran um",
    "start": "228959",
    "end": "234799"
  },
  {
    "text": "is the third most ci use today um it was only released in",
    "start": "234799",
    "end": "239920"
  },
  {
    "text": "general availability in 2019 so just child two years ago um and github",
    "start": "239920",
    "end": "245760"
  },
  {
    "text": "container registry is production and production ready just last year so we can see how a lot of the services",
    "start": "245760",
    "end": "253360"
  },
  {
    "text": "a lot of the products of a lot of the companies that we use today and we almost take for",
    "start": "253360",
    "end": "258479"
  },
  {
    "text": "granted was just were just introduced in the last couple of years",
    "start": "258479",
    "end": "265040"
  },
  {
    "text": "so um argon conducted the survey uh to ask companies to ask security leaders how",
    "start": "265280",
    "end": "271759"
  },
  {
    "text": "this change has affected them uh we can see the results here but we don't have to look at all the numbers now this is",
    "start": "271759",
    "end": "277120"
  },
  {
    "text": "just for show um i'll tell you about three main data points that i find to be interesting",
    "start": "277120",
    "end": "282479"
  },
  {
    "text": "so the first one which is kind of obvious i guess over 90 of companies today use full cicd",
    "start": "282479",
    "end": "288160"
  },
  {
    "text": "automation to deploy software to production uh i guess today this is not a big",
    "start": "288160",
    "end": "293919"
  },
  {
    "text": "surprise however only 23 percent of those same companies um feel that they have",
    "start": "293919",
    "end": "300800"
  },
  {
    "text": "confidence in those processes meaning the rest feel they don't really know what goes on there they don't have the",
    "start": "300800",
    "end": "306960"
  },
  {
    "text": "proper control over it um and when we asked those security leaders those csos",
    "start": "306960",
    "end": "312479"
  },
  {
    "text": "and application security team um we asked them what was the number one challenge in securing the software",
    "start": "312479",
    "end": "318720"
  },
  {
    "text": "supply chain today um and the number one result that we got was collaboration between devops and security teams",
    "start": "318720",
    "end": "326000"
  },
  {
    "text": "which i find to be extremely interesting because it has nothing to do with technology and automation",
    "start": "326000",
    "end": "331600"
  },
  {
    "text": "and everything to do with people and processes so let's see some of the recent events",
    "start": "331600",
    "end": "338240"
  },
  {
    "text": "that took place involving that software supply chain uh so these are just some of the high",
    "start": "338240",
    "end": "343919"
  },
  {
    "text": "profile attacks i won't go into each and every one of them we'll just do a quick overview",
    "start": "343919",
    "end": "349680"
  },
  {
    "text": "uh so mercedes had um a major source called leakage through through their",
    "start": "349680",
    "end": "355440"
  },
  {
    "text": "gitlab on-prem uh server uh roughly 600 code repositories were leaked online",
    "start": "355440",
    "end": "361360"
  },
  {
    "text": "including very sensitive code projects um later on uh codecov an automation",
    "start": "361360",
    "end": "367280"
  },
  {
    "text": "company was breached um and attacker was able to modify uh the uh software uh basically",
    "start": "367280",
    "end": "374479"
  },
  {
    "text": "affecting all of codecov's customers running that same software in the ci environment",
    "start": "374479",
    "end": "381039"
  },
  {
    "text": "and cause the leakage of sensitive data directly from those environments",
    "start": "381039",
    "end": "388319"
  },
  {
    "text": "the third one here that we see is the one known as dependency confusion so a white hat hacker",
    "start": "388319",
    "end": "395360"
  },
  {
    "text": "demonstrated how easy it is to trick those package registries those artifact",
    "start": "395360",
    "end": "400479"
  },
  {
    "text": "manager into pulling their own packages from the outside world",
    "start": "400479",
    "end": "406080"
  },
  {
    "text": "instead of private one developed in-house um and the final and fourth one um",
    "start": "406080",
    "end": "411919"
  },
  {
    "text": "probably doesn't need a lot of explanation um solo wind was a major build time code manipulation attack uh",
    "start": "411919",
    "end": "419039"
  },
  {
    "text": "basically unticker gained access to the building environment of the orion app and was able to modify",
    "start": "419039",
    "end": "425039"
  },
  {
    "text": "its source code affecting thousands of users of it",
    "start": "425039",
    "end": "430400"
  },
  {
    "text": "and just last week we had another major incident involving this action the check",
    "start": "430400",
    "end": "437120"
  },
  {
    "text": "spelling action um basically we can see here a screenshot of the security advisory explaining that workflows using",
    "start": "437120",
    "end": "444319"
  },
  {
    "text": "it were vulnerable to leakage of the github token and we'll see a live demo of how this",
    "start": "444319",
    "end": "450880"
  },
  {
    "text": "looks like uh in the real world just yesterday less than 24 hours ago",
    "start": "450880",
    "end": "457840"
  },
  {
    "text": "travis i uh published this notice um noting that all public repositories",
    "start": "457840",
    "end": "464639"
  },
  {
    "text": "using travis as their ci were in danger of leaking secrets directly from those repositories",
    "start": "464639",
    "end": "472479"
  },
  {
    "text": "we can see that the issue is valid only for pub public repositories uh which which i",
    "start": "472479",
    "end": "478240"
  },
  {
    "text": "guess should be kind of uh um reassuring in a way um and this happened less than 24 hours",
    "start": "478240",
    "end": "484879"
  },
  {
    "text": "ago so let's see how one of those attacks looks like",
    "start": "484879",
    "end": "489919"
  },
  {
    "text": "when we dive a little deeper so taking the check spelling incident for example",
    "start": "489919",
    "end": "494960"
  },
  {
    "text": "um we can see here the lines of installation it's pretty amazing to consider the level of trust that we put",
    "start": "494960",
    "end": "500240"
  },
  {
    "text": "in them we can see here how a workflow could add the check spelling action directly onto",
    "start": "500240",
    "end": "507199"
  },
  {
    "text": "the gita repository using it um and we can see how the app store 4 action looks like um it's no",
    "start": "507199",
    "end": "515360"
  },
  {
    "text": "longer just your application today that contains dependencies but rather your workflows your ci pipelines um so this",
    "start": "515360",
    "end": "522640"
  },
  {
    "text": "means when you release software uh someone else's code running as part of this same process uh is taking place has",
    "start": "522640",
    "end": "530480"
  },
  {
    "text": "access to your repository to its secrets and to the code itself now this is not a dependency of your",
    "start": "530480",
    "end": "537200"
  },
  {
    "text": "application this is not listed in your manifest file in your package.json file this is",
    "start": "537200",
    "end": "543680"
  },
  {
    "text": "other people code running as part of your ci process so what happened with check spamming so we can see here that",
    "start": "543680",
    "end": "550800"
  },
  {
    "text": "it's a github action used by a lot of repositories to well check the spelling of each pull",
    "start": "550800",
    "end": "555920"
  },
  {
    "text": "request submitted against them now its workflow was say very improperly configured we can",
    "start": "555920",
    "end": "563279"
  },
  {
    "text": "see a switch from the official page about the recommendation of how to set it up",
    "start": "563279",
    "end": "568399"
  },
  {
    "text": "and essentially each repository using it allowed an attacker to gain write access to them",
    "start": "568399",
    "end": "574399"
  },
  {
    "text": "just by submitting a carefully crafted pull request",
    "start": "574399",
    "end": "579360"
  },
  {
    "text": "so this is a schedule from the advisory from the security advisory that was published we can see four repositories",
    "start": "580320",
    "end": "585760"
  },
  {
    "text": "using the check spelling action uh which enabled the trigger on police target um",
    "start": "585760",
    "end": "591360"
  },
  {
    "text": "and attacker was able to send the pull request and cause the github access token to be leaked um with that token",
    "start": "591360",
    "end": "597920"
  },
  {
    "text": "you can do a bunch of stuff including read including write to the target repository",
    "start": "597920",
    "end": "604959"
  },
  {
    "text": "so this is kind of what the workflow using spell checking action would look like you can see here that the event is",
    "start": "604959",
    "end": "611040"
  },
  {
    "text": "on police target um and when you put that together we check out all the",
    "start": "611040",
    "end": "616240"
  },
  {
    "text": "specific pull request this is when things uh become a little messy uh and for those of you who haven't used github",
    "start": "616240",
    "end": "622880"
  },
  {
    "text": "action before don't worry we're going to show live how this workflow can allow an attacker to gain access to your",
    "start": "622880",
    "end": "628959"
  },
  {
    "text": "repository so a couple of workarounds that were suggested suggested um",
    "start": "628959",
    "end": "636000"
  },
  {
    "text": "well the first one would be to simply disable the workflow which i guess is not that much of a fix",
    "start": "636000",
    "end": "641440"
  },
  {
    "text": "but rather kind of a first aid kit the other would be to",
    "start": "641440",
    "end": "647519"
  },
  {
    "text": "kind of change the way that you allow specific actions to run uh you can allow",
    "start": "647519",
    "end": "652640"
  },
  {
    "text": "only actions created by github or only actions verified by github for example",
    "start": "652640",
    "end": "657760"
  },
  {
    "text": "um and i'll show you how this looks like in just a few slides um plus you can change the github token uh",
    "start": "657760",
    "end": "665440"
  },
  {
    "text": "level of access its scope uh by default it is granted something else rather than",
    "start": "665440",
    "end": "670959"
  },
  {
    "text": "simply read uh so these are kind of just the quick fixes um so i created a completely new github",
    "start": "670959",
    "end": "678399"
  },
  {
    "text": "repository and added just an example workflow uh to see how those configuration are um configured by",
    "start": "678399",
    "end": "685600"
  },
  {
    "text": "default so we can see here that the workflow permission is granted read and write access to my repository these",
    "start": "685600",
    "end": "692399"
  },
  {
    "text": "permissions are reflected in the github token itself so an attacker gaining access to this github token actually has",
    "start": "692399",
    "end": "699040"
  },
  {
    "text": "read and write permissions by default to my depository containing this workflow",
    "start": "699040",
    "end": "705920"
  },
  {
    "text": "another security configuration here that i've also checked is the default uh action permission uh so basically if",
    "start": "705920",
    "end": "713440"
  },
  {
    "text": "you're managing a github organization you can control the different level of which actions you're allowed to run uh",
    "start": "713440",
    "end": "719920"
  },
  {
    "text": "the default as we can see here um is allow all uh this means i can run",
    "start": "719920",
    "end": "725040"
  },
  {
    "text": "anybody else's code which is wrapped in a github action and granted access to my repository to",
    "start": "725040",
    "end": "731200"
  },
  {
    "text": "my source code as part of my workflow now the solution itself is a little",
    "start": "731200",
    "end": "737680"
  },
  {
    "text": "trickier because you would have to not only fix the main branch of your repository",
    "start": "737680",
    "end": "743760"
  },
  {
    "text": "and update it to the latest version of check spelling but rather you would have to fix each and every branch containing",
    "start": "743760",
    "end": "749920"
  },
  {
    "text": "a copy of this workflow because the way this works is each branch has its own workflow file",
    "start": "749920",
    "end": "757120"
  },
  {
    "text": "and if it is still using the affected version then any pull request submitted against",
    "start": "757120",
    "end": "762160"
  },
  {
    "text": "this branch could also trigger uh this check spelling action with the",
    "start": "762160",
    "end": "767200"
  },
  {
    "text": "vulnerable version allowing the leakage of the github token",
    "start": "767200",
    "end": "772240"
  },
  {
    "text": "so let's see how this looks like in the real world",
    "start": "772240",
    "end": "777120"
  },
  {
    "text": "okay great so i have here this locato app which is just a simple node.js",
    "start": "778399",
    "end": "783760"
  },
  {
    "text": "public repository we can see here it's completely standard with an innocent",
    "start": "783760",
    "end": "788800"
  },
  {
    "text": "this is the okato app readme file plus i've added um a very standard node",
    "start": "788800",
    "end": "794399"
  },
  {
    "text": "starter workflow which i've copied directly from the example at um so we can see that it really doesn't",
    "start": "794399",
    "end": "801760"
  },
  {
    "text": "do much uh just a standard workflow for ci um plus i've altered the uh event",
    "start": "801760",
    "end": "808800"
  },
  {
    "text": "we're listening to to be the purpose target event together with checking out of the pull request itself",
    "start": "808800",
    "end": "815839"
  },
  {
    "text": "now this is the combination that could put you in a lot of trouble and we're gonna see exactly how just in",
    "start": "815839",
    "end": "822800"
  },
  {
    "text": "one second so another github profile which i have",
    "start": "822800",
    "end": "829839"
  },
  {
    "text": "my alter ego we can see it here um which doesn't have any access to the locator organization or the okto app",
    "start": "829839",
    "end": "837199"
  },
  {
    "text": "it can find it but just because this is a publicly double positor and in order to make changes uh the",
    "start": "837199",
    "end": "844000"
  },
  {
    "text": "other user would have to fork this repository and suggest modification using a blueprint so this is what we're",
    "start": "844000",
    "end": "850480"
  },
  {
    "text": "going to do now i'm going to focus ok to upload pository i'll give it a few seconds here we can see that now",
    "start": "850480",
    "end": "857519"
  },
  {
    "text": "i'm working on this four chord um so while i'm doing that i can suggest",
    "start": "857519",
    "end": "863360"
  },
  {
    "text": "modification to the source code specifically i'm going to suggest modification to the packet json file",
    "start": "863360",
    "end": "869440"
  },
  {
    "text": "now i'm going to use this script stack in order to run my arbitrary code now there are all these",
    "start": "869440",
    "end": "876320"
  },
  {
    "text": "different sorts of ways to run orbital record um specifically running npm test would be something a lot of ci platforms",
    "start": "876320",
    "end": "883440"
  },
  {
    "text": "would do so i'm going to use this one we can see here the file with the",
    "start": "883440",
    "end": "889440"
  },
  {
    "text": "instructions of my alberta record and what it is going to do uh it's divided",
    "start": "889440",
    "end": "894480"
  },
  {
    "text": "into three phases so the first one would be to obtain the github token now this is accessible because my code would run",
    "start": "894480",
    "end": "901600"
  },
  {
    "text": "in the context of the gitlab github runner and it does have right access which is",
    "start": "901600",
    "end": "906639"
  },
  {
    "text": "enabled by default um so i'm going to extract this github token using git config",
    "start": "906639",
    "end": "912560"
  },
  {
    "text": "just to see where it is stored once i have this token i can make a",
    "start": "912560",
    "end": "917760"
  },
  {
    "text": "request to github to modify the source code of the vocato app i would obviously have to use this token",
    "start": "917760",
    "end": "925040"
  },
  {
    "text": "and i will also send this token back so we can see it together so i'm taking all those lines and i've",
    "start": "925040",
    "end": "931519"
  },
  {
    "text": "compiled them into one long line uh just to be placed in the skip tab so we can copy paste this one here",
    "start": "931519",
    "end": "939839"
  },
  {
    "text": "and we'll suggest modification",
    "start": "939839",
    "end": "944560"
  },
  {
    "text": "so now these test scripts contain my arbitrary code i can commit the changes to the main branch this is only on my",
    "start": "946560",
    "end": "953040"
  },
  {
    "text": "fork copy of the repository however now that i have some modification i can offer them uh in the",
    "start": "953040",
    "end": "959759"
  },
  {
    "text": "form of a pull request so i'll open up a pull request targeting the okato app",
    "start": "959759",
    "end": "966639"
  },
  {
    "text": "great once i'll do that",
    "start": "966639",
    "end": "969839"
  },
  {
    "text": "the lokoto app which has my workflow would start validating checking my pull request",
    "start": "972639",
    "end": "979600"
  },
  {
    "text": "now while this is running we can take a look here",
    "start": "979600",
    "end": "983839"
  },
  {
    "text": "and the redmi file will give it a few seconds for the workflow to be done um",
    "start": "985839",
    "end": "991199"
  },
  {
    "text": "maybe we'll see what it does in the meantime so it's running npm test as part of my",
    "start": "991199",
    "end": "996880"
  },
  {
    "text": "uh workflow now this would run my arbitrary code uh we'll see in a second the",
    "start": "996880",
    "end": "1002079"
  },
  {
    "text": "results of it so if i go here this is the okay to app i guess if i refresh the page this no longer would be the case so",
    "start": "1002079",
    "end": "1009519"
  },
  {
    "text": "you can see i am in now this modification to one of the file the redmi file in my repository the",
    "start": "1009519",
    "end": "1015519"
  },
  {
    "text": "locator app was made by a user that doesn't have any access to this github repository",
    "start": "1015519",
    "end": "1022000"
  },
  {
    "text": "so we can see the workflow itself has run this uh cleverly put uh arbitrary",
    "start": "1022000",
    "end": "1027520"
  },
  {
    "text": "code uh with the changes and also sent back uh the access token for me to see",
    "start": "1027520",
    "end": "1033438"
  },
  {
    "text": "so we can see here uh the access token was sent i have this security listening",
    "start": "1033439",
    "end": "1039520"
  },
  {
    "text": "uh for any secrets being sent from the github flow uh we can see this github token here",
    "start": "1039520",
    "end": "1047280"
  },
  {
    "text": "okay now what are we going to do about this workflow so um the obvious thing would be to change the event right so um",
    "start": "1051039",
    "end": "1057760"
  },
  {
    "text": "that now we will no longer listen to the request target event so we can do that",
    "start": "1057760",
    "end": "1064880"
  },
  {
    "text": "and just listen to pulus different plus we'll remove this line because it doesn't really",
    "start": "1064880",
    "end": "1070480"
  },
  {
    "text": "it isn't really needed here now",
    "start": "1070480",
    "end": "1074919"
  },
  {
    "text": "great so now this workflow would only be triggered by polarquest event um so we",
    "start": "1083120",
    "end": "1088400"
  },
  {
    "text": "can go back here to the action tab and we'll try the same thing again so i'll go to my folk um",
    "start": "1088400",
    "end": "1096240"
  },
  {
    "text": "that is located here i'm gonna fetch the updates",
    "start": "1096240",
    "end": "1102960"
  },
  {
    "text": "and i'll do another change so this time maybe just kind of",
    "start": "1104000",
    "end": "1111039"
  },
  {
    "text": "change one of the lines in this javascript file just so that we can open a full request",
    "start": "1111039",
    "end": "1118559"
  },
  {
    "text": "great so now i have other modifications to suggest i'm going to open a pull request",
    "start": "1121280",
    "end": "1127360"
  },
  {
    "text": "with them and we",
    "start": "1127360",
    "end": "1132400"
  },
  {
    "text": "should see the workflow running here um so you can see that it was triggered um",
    "start": "1132400",
    "end": "1138240"
  },
  {
    "text": "and we immediately see different dessert uh so the buffalo was triggered but it didn't run it is waiting for uh over uh",
    "start": "1138240",
    "end": "1146000"
  },
  {
    "text": "so firstly this is obviously much better results than the previous coding",
    "start": "1146000",
    "end": "1151600"
  },
  {
    "text": "injection so i let this workflow run i'll give it the manual approval it",
    "start": "1151600",
    "end": "1156880"
  },
  {
    "text": "needs great and let's see how this looks like",
    "start": "1156880",
    "end": "1165039"
  },
  {
    "text": "we'll give it a few seconds to set up so it's still processing my pull request",
    "start": "1165039",
    "end": "1170960"
  },
  {
    "text": "however it is doing it in a different context on the event of the pull request instead of the police target",
    "start": "1170960",
    "end": "1178080"
  },
  {
    "text": "so we can see that the npm test has run successfully so my injected code is still running as",
    "start": "1178080",
    "end": "1185440"
  },
  {
    "text": "part of this workflow however now i'm getting this error message saying resource not accessible by integration",
    "start": "1185440",
    "end": "1192160"
  },
  {
    "text": "now this is github letting me know that the access token i've used here to try and alter the readme file of the okato",
    "start": "1192160",
    "end": "1198720"
  },
  {
    "text": "app again doesn't really allow me to do that now this access token only have read access it does it isn't",
    "start": "1198720",
    "end": "1206559"
  },
  {
    "text": "able to change uh the file in the target repository um and what about the other",
    "start": "1206559",
    "end": "1212559"
  },
  {
    "text": "code the one where i send the token back home so we can see that the third one another one was added here",
    "start": "1212559",
    "end": "1218559"
  },
  {
    "text": "so my secret either did get to eat another secret um and this is the github token generated by this uh workflow",
    "start": "1218559",
    "end": "1225919"
  },
  {
    "text": "runner so the case is a little better i i'm not able to",
    "start": "1225919",
    "end": "1230960"
  },
  {
    "text": "alter the repository however i did manage to send back home the access token now the reason i was",
    "start": "1230960",
    "end": "1236880"
  },
  {
    "text": "able to do that is because there is another important thing to notice when using this workflow",
    "start": "1236880",
    "end": "1244158"
  },
  {
    "text": "and this is this step so the checkout step uh now the checkout step uh has another uh kind of",
    "start": "1245200",
    "end": "1253120"
  },
  {
    "text": "property by default that is enabled which we need to pay attention to uh it is called persist credentials",
    "start": "1253120",
    "end": "1260159"
  },
  {
    "text": "so with suggest modification here using the width command and persist",
    "start": "1260159",
    "end": "1268080"
  },
  {
    "text": "and then it shows set to false",
    "start": "1268080",
    "end": "1273360"
  },
  {
    "text": "which is not the default then we should expect to see another flow of events",
    "start": "1273360",
    "end": "1280640"
  },
  {
    "text": "so let's target this pull this workflow sorry one more time",
    "start": "1282480",
    "end": "1288200"
  },
  {
    "text": "we're going to go to the folk the copy of it confetti updates",
    "start": "1292880",
    "end": "1299360"
  },
  {
    "text": "and again suggest a modification let's say just",
    "start": "1302880",
    "end": "1308320"
  },
  {
    "text": "add an empty line",
    "start": "1310240",
    "end": "1313200"
  },
  {
    "text": "so now we are able to open up request and trigger this workflow from remote",
    "start": "1315919",
    "end": "1322320"
  },
  {
    "text": "so we can see just now this workflow has been triggered i'm going to prove and run it",
    "start": "1324320",
    "end": "1331240"
  },
  {
    "text": "great and keep in mind here we are um waiting for the secret to be populated",
    "start": "1336320",
    "end": "1342000"
  },
  {
    "text": "so we can see the warfare started to run um it will run my arbitrary code and it would fail um",
    "start": "1342000",
    "end": "1349039"
  },
  {
    "text": "now just a second so we'll take a look at this failure so the reason for the error message here um is because the",
    "start": "1349039",
    "end": "1356159"
  },
  {
    "text": "github access token was not available to it and we can see that here we didn't get any new lines so the",
    "start": "1356159",
    "end": "1362720"
  },
  {
    "text": "secret detail that is listening for github tokens did not manage to get it",
    "start": "1362720",
    "end": "1368400"
  },
  {
    "text": "um so i hope this clarifies the change um of the different events of the workflow",
    "start": "1368400",
    "end": "1375360"
  },
  {
    "text": "um and the nuance of using persist credential",
    "start": "1375360",
    "end": "1380400"
  },
  {
    "text": "uh false together with the checkout action um because otherwise the default",
    "start": "1380400",
    "end": "1385600"
  },
  {
    "text": "would be true uh meaning that the rest of the workflow would have full access",
    "start": "1385600",
    "end": "1390640"
  },
  {
    "text": "to the git token and is able to send it out to whichever location",
    "start": "1390640",
    "end": "1396799"
  },
  {
    "text": "that it wants",
    "start": "1396799",
    "end": "1400360"
  },
  {
    "text": "great so going back to the um listen the text",
    "start": "1402000",
    "end": "1406960"
  },
  {
    "text": "another thing that is also around the issue of workflows um is code code we",
    "start": "1408720",
    "end": "1413919"
  },
  {
    "text": "touched on that in the overview and we can see the lines that are required to be targeted by this attack",
    "start": "1413919",
    "end": "1420640"
  },
  {
    "text": "here uh so if you're using the codecov action if you were using it",
    "start": "1420640",
    "end": "1425760"
  },
  {
    "text": "you were potentially leaked you have potentially leaked sensitive information directly from your",
    "start": "1425760",
    "end": "1431679"
  },
  {
    "text": "ci environment we can see that kodkov is an extremely popular test coverage tool",
    "start": "1431679",
    "end": "1437520"
  },
  {
    "text": "you use it as part of lci either with a dedicated gita version or simply by placing the",
    "start": "1437520",
    "end": "1443760"
  },
  {
    "text": "curl command to download it and it was hacked pretty bad so when attacker was able to modify",
    "start": "1443760",
    "end": "1450480"
  },
  {
    "text": "one of the automation skip basically affecting all of quadcop's customers using it at the time",
    "start": "1450480",
    "end": "1456799"
  },
  {
    "text": "um okay so to be a little more specific we don't really know how uh code cover was",
    "start": "1456799",
    "end": "1461919"
  },
  {
    "text": "hacked uh however um it was noted noted that its google cloud",
    "start": "1461919",
    "end": "1468480"
  },
  {
    "text": "access key was linked to one of the docker images which it turns out is an extremely easy thing to do when",
    "start": "1468480",
    "end": "1474799"
  },
  {
    "text": "constructing a docker image engineers can leave sensitive data behind we can see",
    "start": "1474799",
    "end": "1480960"
  },
  {
    "text": "here an example of a docker history command which can also be very conveiling by itself",
    "start": "1480960",
    "end": "1486640"
  },
  {
    "text": "now the bash uploader the util that was uh hacked is a small util looks kind of",
    "start": "1486640",
    "end": "1491679"
  },
  {
    "text": "like this um and it is responsible for uploading the test coverage results back",
    "start": "1491679",
    "end": "1496880"
  },
  {
    "text": "to the codecov platform and then all the attacker did once he was able to modify the file um",
    "start": "1496880",
    "end": "1503840"
  },
  {
    "text": "was at this one new line it's a pretty simple line uh most of you probably understand what it does just by looking",
    "start": "1503840",
    "end": "1510080"
  },
  {
    "text": "at it uh it prints out the environment variables that are accessible so in this sense this is something running in my ci",
    "start": "1510080",
    "end": "1516400"
  },
  {
    "text": "environment and sends them out to a remote server so we can expect to find data like",
    "start": "1516400",
    "end": "1522159"
  },
  {
    "text": "access token user connections and api keys now the results of this hack were pretty",
    "start": "1522159",
    "end": "1527679"
  },
  {
    "text": "massive so a lot of high high name profile companies did publicly notify they were affected",
    "start": "1527679",
    "end": "1534640"
  },
  {
    "text": "but not only private companies for a lot of open source projects using it as part of the ci",
    "start": "1534640",
    "end": "1540880"
  },
  {
    "text": "some of them are extremely popular so we can see algo cd webpack antibell even kubernetes are",
    "start": "1540880",
    "end": "1547200"
  },
  {
    "text": "using it uh in fact if you go to github and search for the command to download the",
    "start": "1547200",
    "end": "1552640"
  },
  {
    "text": "effective file you will get a few hundred thousand of results um of",
    "start": "1552640",
    "end": "1558080"
  },
  {
    "text": "reference references of it being used today so let's see how this looks like",
    "start": "1558080",
    "end": "1565679"
  },
  {
    "text": "so we'll jump back to this workflow this time we can look at this one here uh so this is another workflow just a pretty",
    "start": "1565840",
    "end": "1572320"
  },
  {
    "text": "standard one again with the produce target line however i've added this extra step",
    "start": "1572320",
    "end": "1578080"
  },
  {
    "text": "that i actually copied from the official website of the official instructions of how to upload my test coverage result",
    "start": "1578080",
    "end": "1585520"
  },
  {
    "text": "uh so you can see that i'm running the curl command to download this automation skip",
    "start": "1585520",
    "end": "1590720"
  },
  {
    "text": "as part of my release process now this is something a lot of companies",
    "start": "1590720",
    "end": "1596880"
  },
  {
    "text": "today have lurking as part of the ci pipeline we're talking about uh tens of pipelines",
    "start": "1596880",
    "end": "1603440"
  },
  {
    "text": "hundreds of pipelines um and it's extremely hard to keep track of anything that runs as part of that",
    "start": "1603440",
    "end": "1609360"
  },
  {
    "text": "so um one of the tools that argon has built to help mitigate these types",
    "start": "1609360",
    "end": "1614960"
  },
  {
    "text": "of risks is this um argon cli um and it accepts ci",
    "start": "1614960",
    "end": "1620799"
  },
  {
    "text": "workflows uh it goes over them deconstructs the instruction it doesn't matter if they are written",
    "start": "1620799",
    "end": "1626880"
  },
  {
    "text": "as a gita workflow azure pipeline a bit bucket pipeline or even gitlab ci um",
    "start": "1626880",
    "end": "1632559"
  },
  {
    "text": "anything you use you can deconstruct and apply custom logic on it so it helps you avoid these security issues those",
    "start": "1632559",
    "end": "1640039"
  },
  {
    "text": "misconfigurations those untrusted user inputs we can run it here um okay so we can see",
    "start": "1640039",
    "end": "1648159"
  },
  {
    "text": "here this is how it looks like this is util you can see that it's scanned",
    "start": "1648159",
    "end": "1654000"
  },
  {
    "text": "one workflow file this is the one to the left and it has all those insights on it so starting",
    "start": "1654000",
    "end": "1659840"
  },
  {
    "text": "from uh unpinned actions uh which allows kind of flexibility into which code",
    "start": "1659840",
    "end": "1665360"
  },
  {
    "text": "you're running how to suspicious use of environment variables um and even the",
    "start": "1665360",
    "end": "1671200"
  },
  {
    "text": "poluques target event which we referenced earlier so we can see here um that it lets me know that the pull",
    "start": "1671200",
    "end": "1677279"
  },
  {
    "text": "request elevated access could be granted we need to take a look at this specific",
    "start": "1677279",
    "end": "1683360"
  },
  {
    "text": "line here in my workflow when combined with the checkout action this is definitely something that we saw could put me in",
    "start": "1683360",
    "end": "1689840"
  },
  {
    "text": "risks um another thing we can see here is that finishes stored in disks so this",
    "start": "1689840",
    "end": "1695520"
  },
  {
    "text": "means uh i'm not setting the persist connections flag to false so uh github",
    "start": "1695520",
    "end": "1701679"
  },
  {
    "text": "token is kept on the disk and is available for any secret data out there",
    "start": "1701679",
    "end": "1706720"
  },
  {
    "text": "to consume them now the relevant line here is codecov so you can see here that um",
    "start": "1706720",
    "end": "1713200"
  },
  {
    "text": "the argon pipeline scanner has actually very noticed that there is an unverified",
    "start": "1713200",
    "end": "1718240"
  },
  {
    "text": "external dependency so someone else's code running in my ci um actively",
    "start": "1718240",
    "end": "1723360"
  },
  {
    "text": "running on every release and it lets me know which line it has been detected uh so we can see one file",
    "start": "1723360",
    "end": "1729360"
  },
  {
    "text": "scan with seven finding uh one is critical the other on medium um and it",
    "start": "1729360",
    "end": "1734640"
  },
  {
    "text": "also allows me to take action on it so not only find the relevant uh",
    "start": "1734640",
    "end": "1739760"
  },
  {
    "text": "security issues but also kind of to take action we can see here sorry um a pull",
    "start": "1739760",
    "end": "1744799"
  },
  {
    "text": "request so when when the workflow contains an unverified um step avon",
    "start": "1744799",
    "end": "1750080"
  },
  {
    "text": "helps you kind of add verification layer on that so it is added as a pinned kit of action",
    "start": "1750080",
    "end": "1757039"
  },
  {
    "text": "um which helps you kind of use um check some level verification that anything that is running as part of uci is in",
    "start": "1757039",
    "end": "1764480"
  },
  {
    "text": "fact uh should in fact run them um the same goes for any uh of those gotchas",
    "start": "1764480",
    "end": "1771440"
  },
  {
    "text": "those small kind of uh very dangerous misconfigurations that could be easily avoided um so we can do it kind of in an",
    "start": "1771440",
    "end": "1780159"
  },
  {
    "text": "automatic flow um and let's go back here",
    "start": "1780159",
    "end": "1785120"
  },
  {
    "text": "great so now that we saw some of how of those scenarios looks like in the wild",
    "start": "1788000",
    "end": "1793120"
  },
  {
    "text": "so um an important thing to realize about the software supply chain is that we often think of it as just one long",
    "start": "1793120",
    "end": "1800000"
  },
  {
    "text": "unified process uh however it is composed of five different uh layer of phases um so the first one would be to",
    "start": "1800000",
    "end": "1808080"
  },
  {
    "text": "secure the source code throughout the dependencies the pipelines themselves building it uh the artifacts that are",
    "start": "1808080",
    "end": "1814720"
  },
  {
    "text": "being managed and up until time of deployment um and in order to fully",
    "start": "1814720",
    "end": "1819760"
  },
  {
    "text": "protect uh this chain we need to secure each and every link in it and if we fail",
    "start": "1819760",
    "end": "1825039"
  },
  {
    "text": "to do so then we get incidents like um kodkov which was a fairly insecure in",
    "start": "1825039",
    "end": "1830240"
  },
  {
    "text": "one of the dependencies um or solarwind which we already talked about earlier a failure to secure the",
    "start": "1830240",
    "end": "1837919"
  },
  {
    "text": "building environment or the dependency confusion which could have been avoided with",
    "start": "1837919",
    "end": "1843919"
  },
  {
    "text": "portal control over the package registries the artifact servers themselves",
    "start": "1843919",
    "end": "1850240"
  },
  {
    "text": "and the list goes on so cncf on github can easily show you a list of the software supply chain incidents that",
    "start": "1850240",
    "end": "1856640"
  },
  {
    "text": "took place recently um the list does go on um you can find more details",
    "start": "1856640",
    "end": "1862559"
  },
  {
    "text": "by checking that out so a little bit about the solution uh",
    "start": "1862559",
    "end": "1868480"
  },
  {
    "text": "what to do about security of the software supply chain um so i'm gonna created this framework uh it is it",
    "start": "1868480",
    "end": "1875519"
  },
  {
    "text": "correlates very well to the five different phases and it offers 128 the set of controls",
    "start": "1875519",
    "end": "1881200"
  },
  {
    "text": "that are required to be put in place in order to fully secure the software supply chain",
    "start": "1881200",
    "end": "1886320"
  },
  {
    "text": "so we can see some of them here and if and only if those controls are in",
    "start": "1886320",
    "end": "1891760"
  },
  {
    "text": "place then we can hope to avoid incidents like the one that we mentioned we can see how",
    "start": "1891760",
    "end": "1897600"
  },
  {
    "text": "each one of them targeted a different phase of the supply chain um and how the",
    "start": "1897600",
    "end": "1902799"
  },
  {
    "text": "solution how those control gates could help medicate them",
    "start": "1902799",
    "end": "1908399"
  },
  {
    "text": "uh now obviously what we just saw uh with the algorithm and the pipeline scanner is only a small portion of the",
    "start": "1908399",
    "end": "1913519"
  },
  {
    "text": "solution in order to fully protect the supply chain uh we need a unified security solution so protecting each",
    "start": "1913519",
    "end": "1920720"
  },
  {
    "text": "phase of the process kind of helps you create a governance layer on top of it and obviously prevent",
    "start": "1920720",
    "end": "1927279"
  },
  {
    "text": "any um in any affected versions of your opponent from being released to",
    "start": "1927279",
    "end": "1932720"
  },
  {
    "text": "production so i'm going to end with one of the uh",
    "start": "1932720",
    "end": "1938080"
  },
  {
    "text": "more interesting quotes that i just recently saw from github security lab",
    "start": "1938080",
    "end": "1943519"
  },
  {
    "text": "any modern build orchestration is complex enough to have multiple code injection points uh so i think this kind",
    "start": "1943519",
    "end": "1950240"
  },
  {
    "text": "of reflects well uh the fact that the technology has changed uh build occasion",
    "start": "1950240",
    "end": "1955840"
  },
  {
    "text": "is now so complex uh that even github themselves uh let you know that multiple",
    "start": "1955840",
    "end": "1960960"
  },
  {
    "text": "code injection points uh can definitely be found there",
    "start": "1960960",
    "end": "1966159"
  },
  {
    "text": "so that's it for today i really appreciate your time if you have any questions or any thoughts on that feel",
    "start": "1966159",
    "end": "1971279"
  },
  {
    "text": "please feel free to keep in touch and this is it for today thank you bye",
    "start": "1971279",
    "end": "1977840"
  }
]