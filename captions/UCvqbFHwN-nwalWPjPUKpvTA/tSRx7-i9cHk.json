[
  {
    "text": "[Music]",
    "start": "2770",
    "end": "7419"
  },
  {
    "text": "do [Music]",
    "start": "7839",
    "end": "25520"
  },
  {
    "text": "hello everyone hi and welcome to cloud native live where we dive into the code behind cloud",
    "start": "30480",
    "end": "36239"
  },
  {
    "text": "native i'm itai shakuri and i'm director of open source at aqua security i'm also",
    "start": "36239",
    "end": "41360"
  },
  {
    "text": "a cloud native ambassador and will be hosting today's show so cloud native live this is where we bring",
    "start": "41360",
    "end": "47920"
  },
  {
    "text": "a new set of presenters every week to showcase how to work with cloud native technologies they will build things and",
    "start": "47920",
    "end": "54160"
  },
  {
    "text": "break things and they will answer your questions uh every week on wednesdays this week we have andy from fairwinds um",
    "start": "54160",
    "end": "63280"
  },
  {
    "text": "to talk to us about polaris and gridlocks uh before we get to that",
    "start": "63280",
    "end": "68479"
  },
  {
    "text": "um just a quick reminder that kubecon is coming up it's going to be both an",
    "start": "68479",
    "end": "75280"
  },
  {
    "text": "in-person and a virtual experience so make sure to register in time and now",
    "start": "75280",
    "end": "81439"
  },
  {
    "text": "is the time uh and another disclaimer that this is an official live stream of the cncf and",
    "start": "81439",
    "end": "87280"
  },
  {
    "text": "the such is subject to the cncf code of conduct so please don't add anything to the chat or questions that would be in",
    "start": "87280",
    "end": "92799"
  },
  {
    "text": "violation of that code of conduct basically just please be respected for for your fellow participants and",
    "start": "92799",
    "end": "99840"
  },
  {
    "text": "presenters so um hi andy why don't you introduce yourself",
    "start": "99840",
    "end": "105759"
  },
  {
    "text": "hi i'm andy i'm director of r d and technology at fairwinds fairwinds is",
    "start": "105759",
    "end": "113439"
  },
  {
    "text": "got its start as a managed service provider in kubernetes and uh we took the learnings from those um",
    "start": "113439",
    "end": "120880"
  },
  {
    "text": "years of managing lots and lots of clusters and we've we've built a lot of open source while we manage those clusters to solve a lot of the problems",
    "start": "120880",
    "end": "126560"
  },
  {
    "text": "that we have and then on top of that we built some sas so we just do all kubernetes all the",
    "start": "126560",
    "end": "132959"
  },
  {
    "text": "time and i get to tinker with all the fun stuff cool and and you've open sourced some of",
    "start": "132959",
    "end": "139680"
  },
  {
    "text": "the tools that you've discovered along the way i guess",
    "start": "139680",
    "end": "144959"
  },
  {
    "text": "yeah yeah the two tools i'm gonna i'm gonna show today really were built out of a need for",
    "start": "144959",
    "end": "151840"
  },
  {
    "text": "just some additional tooling to help us in our journey running kubernetes for all of our different customers so",
    "start": "151840",
    "end": "158959"
  },
  {
    "text": "polaris really focuses on best practice configuration of your application workloads and then goldilocks came out",
    "start": "158959",
    "end": "165280"
  },
  {
    "text": "of a need to help our clients set their resource requests and limits properly on all of their deployments in their clusters",
    "start": "165280",
    "end": "173920"
  },
  {
    "text": "yeah that sounds very both of them sounds very helpful how would you like to start this would",
    "start": "174000",
    "end": "179840"
  },
  {
    "text": "you like to start with one of them or how did you plan uh so what i'd like",
    "start": "179840",
    "end": "185360"
  },
  {
    "text": "to do i kind of have uh what i've done today is i've set up a cluster it's a",
    "start": "185360",
    "end": "190640"
  },
  {
    "text": "pretty barebones eks cluster and then i have installed an app on it this is a",
    "start": "190640",
    "end": "195680"
  },
  {
    "text": "demo app out there it's a multi-tiered app uh called yelp or ylb i'm not actually sure how we're",
    "start": "195680",
    "end": "201840"
  },
  {
    "text": "supposed to pronounce it but essentially it's just a basic voting app so i wrote a little loop over here in the",
    "start": "201840",
    "end": "208319"
  },
  {
    "text": "console to just randomly vote uh and so this app is running in my kubernetes cluster i got some yaml uh",
    "start": "208319",
    "end": "216319"
  },
  {
    "text": "for deploying it from um the repository that yelp came from it's very very bare-bones deployment so we",
    "start": "216319",
    "end": "223760"
  },
  {
    "text": "have um just a few different pods running here we've got a database a reddit",
    "start": "223760",
    "end": "228799"
  },
  {
    "text": "server we've got a front end and a back end and what i'd like to do today is uh start with uh polaris and i'm",
    "start": "228799",
    "end": "237040"
  },
  {
    "text": "gonna install polaris in the cluster and look at the findings that it has",
    "start": "237040",
    "end": "242080"
  },
  {
    "text": "regarding this particular application so kind of modeling if i had just deployed a brand new application into my cluster",
    "start": "242080",
    "end": "248080"
  },
  {
    "text": "how could polaris help me improve the security posture in the configuration of that",
    "start": "248080",
    "end": "254799"
  },
  {
    "text": "right sounds good and while we do that i just want to remind everyone uh that they can",
    "start": "254799",
    "end": "260079"
  },
  {
    "text": "type questions in the chat uh if you have anything just type it as you think about it and i'll pick it up sometime in",
    "start": "260079",
    "end": "266880"
  },
  {
    "text": "the maybe uh bring it up great",
    "start": "266880",
    "end": "272720"
  },
  {
    "text": "all right so um in order to install polaris i'm just going to use hum so",
    "start": "272720",
    "end": "277840"
  },
  {
    "text": "i've actually already installed it but show how to install it um so i'm gonna install polaris in the",
    "start": "277840",
    "end": "285360"
  },
  {
    "text": "namespace polaris uh from the fairwinds stable helm repository",
    "start": "285360",
    "end": "293199"
  },
  {
    "text": "uh and then if i were doing this from scratch i might want to add the create namespace flag just so that we get",
    "start": "293199",
    "end": "300880"
  },
  {
    "text": "i've been doing too many other things today helm upgrade dash dash install uh so this should install polaris in our",
    "start": "300880",
    "end": "309199"
  },
  {
    "text": "polaris namespace within our cluster and i'm going to pop over here and use canines because i really like the way it",
    "start": "309199",
    "end": "315440"
  },
  {
    "text": "does port forwarding so i'm in the polaris namespace here i'm going to look for services in this",
    "start": "315440",
    "end": "320880"
  },
  {
    "text": "namespace i see that we have a dashboard uh in this namespace so i'm gonna port forward to this using canines uh so i'm",
    "start": "320880",
    "end": "328160"
  },
  {
    "text": "just gonna port forward to the dashboard on localhost 8080.",
    "start": "328160",
    "end": "333199"
  },
  {
    "text": "and then i'm gonna go up here into my browser and we're gonna take a look look at what that looks like",
    "start": "333199",
    "end": "340800"
  },
  {
    "text": "maybe",
    "start": "342320",
    "end": "344639"
  },
  {
    "text": "all right let's make sure it's running shall we take a look at the pods in the polaris namespace",
    "start": "350080",
    "end": "356919"
  },
  {
    "text": "here",
    "start": "376160",
    "end": "379160"
  },
  {
    "text": "oh there's the problem i can't spell localhost dangers of a live demo all right",
    "start": "386400",
    "end": "393759"
  },
  {
    "text": "localhost 8080 there we go so we see the polaris namespace or the player's dashboard here and it's going to give us",
    "start": "393759",
    "end": "400479"
  },
  {
    "text": "just a rough score for our cluster it's going to give us some",
    "start": "400479",
    "end": "406960"
  },
  {
    "text": "just numbers on how many checks we have passing how many checks we have in the morning how many checks we consider dangerous",
    "start": "406960",
    "end": "412800"
  },
  {
    "text": "uh and then some basic information about the cluster um and i'm really going to focus on the",
    "start": "412800",
    "end": "420080"
  },
  {
    "text": "app namespace so i've deployed the yelp app into the yelled namespace you can look",
    "start": "420080",
    "end": "425919"
  },
  {
    "text": "through all of the different findings in polaris but it's going to give you stuff for the entire cluster",
    "start": "425919",
    "end": "432319"
  },
  {
    "text": "and when we filter down to just our name space here for our app we see we're doing really poorly we have an",
    "start": "432319",
    "end": "438880"
  },
  {
    "text": "f uh that's not a great score so let's take a look at the different",
    "start": "438880",
    "end": "444400"
  },
  {
    "text": "findings so we have like i said we have different deployments for the ui the database the app server",
    "start": "444400",
    "end": "451039"
  },
  {
    "text": "and redis and so let's just focus for now on the ui because that would be our you know",
    "start": "451039",
    "end": "457360"
  },
  {
    "text": "front-facing portion uh and i see we have some dangerous things that are enabled that are",
    "start": "457360",
    "end": "464479"
  },
  {
    "text": "going on here and we have some warning things so the top one here i'm going to just tackle that first so let's take a",
    "start": "464479",
    "end": "470960"
  },
  {
    "text": "look at what that means so it says privilege says privilege escalation should not be allowed if we click on the",
    "start": "470960",
    "end": "477039"
  },
  {
    "text": "question mark here i'm going to get a link to our docs where we see",
    "start": "477039",
    "end": "482400"
  },
  {
    "text": "uh prelims privilege escalation allowed danger security context dot allow",
    "start": "482400",
    "end": "488400"
  },
  {
    "text": "privilege escalation is true so that is the default setting so if we go into our",
    "start": "488400",
    "end": "495840"
  },
  {
    "text": "our yaml that we use to deploy the app which i have here in this folder we can take a look at the",
    "start": "495840",
    "end": "502240"
  },
  {
    "text": "ui yaml file and we see we have just a bare-bones deployment",
    "start": "502240",
    "end": "507360"
  },
  {
    "text": "here i mean just the bare minimum we need to get this uh running and",
    "start": "507360",
    "end": "513200"
  },
  {
    "text": "um i can make things a little bit bigger thank you the question there yeah no",
    "start": "513200",
    "end": "519599"
  },
  {
    "text": "problem let me i'm just going to let this take over for a moment i'll have to switch back and forth but uh that's all right",
    "start": "519599",
    "end": "526080"
  },
  {
    "text": "so we we know we need to set security context dot privilege allow privilege escalation",
    "start": "526080",
    "end": "532800"
  },
  {
    "text": "to false uh and really what we should do",
    "start": "532800",
    "end": "538880"
  },
  {
    "text": "is have another link back to the kubernetes talks but uh maybe i don't know what this means uh maybe i'm",
    "start": "538880",
    "end": "545040"
  },
  {
    "text": "unclear on this so i'm going to look for the docs",
    "start": "545040",
    "end": "551360"
  },
  {
    "text": "and we're going to find the kubernetes documentation on configuring a security context make this",
    "start": "554880",
    "end": "562560"
  },
  {
    "text": "a little bit bigger too uh and i tend to just kind of scroll",
    "start": "562560",
    "end": "567600"
  },
  {
    "text": "through until i find the yaml i'm looking for this is probably looking hey look at that",
    "start": "567600",
    "end": "574320"
  },
  {
    "text": "allow privilege escalation so this is going to prevent anything inside of our pod",
    "start": "574320",
    "end": "580000"
  },
  {
    "text": "from our inside of our container specifically because this is the container security context from uh escalating its own privileges so",
    "start": "580000",
    "end": "588880"
  },
  {
    "text": "let's add that to our bml file here so we've got our deployment spot container security",
    "start": "588880",
    "end": "596320"
  },
  {
    "text": "context allow privilege escalation false and i'm going to fix my yaml because i just broke it here",
    "start": "596320",
    "end": "604240"
  },
  {
    "text": "um central the wrong place let's put it here instead",
    "start": "604240",
    "end": "610399"
  },
  {
    "text": "there we go all right so we've got our container security contacts allow privilege escalation false",
    "start": "614240",
    "end": "619920"
  },
  {
    "text": "i'm going to save this and then i'm going to apply this to",
    "start": "619920",
    "end": "626720"
  },
  {
    "text": "the cluster and hopefully we then go into our polaris dashboard",
    "start": "626720",
    "end": "633200"
  },
  {
    "text": "and we can refresh this",
    "start": "633200",
    "end": "637680"
  },
  {
    "text": "and take a look at our ui and we see that our red x there has gone away and",
    "start": "638720",
    "end": "644560"
  },
  {
    "text": "we've just improved our security posture a little bit uh by fixing some of the default configuration in that app so i'm",
    "start": "644560",
    "end": "651519"
  },
  {
    "text": "gonna keep going with a couple of these um if we look we'll probably see that on all of these so i'm gonna",
    "start": "651519",
    "end": "658720"
  },
  {
    "text": "just take a quick look at my ammo here and i'm just gonna apply that to all of them so my goal today is i'd",
    "start": "658720",
    "end": "665519"
  },
  {
    "text": "love to get a higher score in our um",
    "start": "665519",
    "end": "671040"
  },
  {
    "text": "in our polaris dashboard for the same space so we started by uh installing uh",
    "start": "671839",
    "end": "677040"
  },
  {
    "text": "polaris just from helm uh we saw some issues we fixed an issue and we immediately saw the",
    "start": "677040",
    "end": "682959"
  },
  {
    "text": "the updated results so polaris is constantly watching for uh changes in",
    "start": "682959",
    "end": "688800"
  },
  {
    "text": "the kubernetes api and uh always always up to date right",
    "start": "688800",
    "end": "695360"
  },
  {
    "text": "that is correct so it's basically like an operator that",
    "start": "695360",
    "end": "700959"
  },
  {
    "text": "kubernetes operator that enforces these security configurations is that an accurate way to split it",
    "start": "700959",
    "end": "708000"
  },
  {
    "text": "that is correct so um initially what it does is it scans um so polaris also has",
    "start": "708000",
    "end": "714320"
  },
  {
    "text": "um a uh an admission web hook that you can install as well to enforce these uh on",
    "start": "714320",
    "end": "720959"
  },
  {
    "text": "apply to the cluster and then it also has um the ability to",
    "start": "720959",
    "end": "726480"
  },
  {
    "text": "uh add custom checks as well so we have all these built-in checks that we see here but we are also able to add additional checks",
    "start": "726480",
    "end": "733920"
  },
  {
    "text": "how does one add uh so i don't wanna interact your flow but if you could just uh say in a few words like what's the",
    "start": "733920",
    "end": "741600"
  },
  {
    "text": "uh the language where i can specify things yeah",
    "start": "741600",
    "end": "747120"
  },
  {
    "text": "let's see i actually haven't written a custom check a little while so let me go to",
    "start": "747120",
    "end": "752320"
  },
  {
    "text": "here and we can go to the polaris documentation at polaris polaris.docs.fairwinds.com",
    "start": "752320",
    "end": "759200"
  },
  {
    "text": "and go to the custom checks area um and we essentially write them",
    "start": "759200",
    "end": "765760"
  },
  {
    "text": "in yaml here but i believe we're using we're using json schema under the hood to write those checks",
    "start": "765760",
    "end": "771519"
  },
  {
    "text": "cool cool thank you yeah no problem",
    "start": "771519",
    "end": "776880"
  },
  {
    "text": "all right so we've got our security context uh we have",
    "start": "777760",
    "end": "784480"
  },
  {
    "text": "no we are no longer allowing privilege escalation hopefully everywhere we've got rid of all of our",
    "start": "784480",
    "end": "791279"
  },
  {
    "text": "dangerous checks we just went from an f to a d minus that's great i suppose these get degrees i believe was the",
    "start": "791279",
    "end": "797839"
  },
  {
    "text": "saying when i was in college and um so we can see that our",
    "start": "797839",
    "end": "804560"
  },
  {
    "text": "security score actually has gone up a little bit so that's great um so that's some of the security things",
    "start": "804560",
    "end": "810160"
  },
  {
    "text": "that you'll see if we keep looking you'll we may see some more",
    "start": "810160",
    "end": "815839"
  },
  {
    "text": "not allowed to run as root is another common one so that's also set in the security context",
    "start": "815839",
    "end": "822000"
  },
  {
    "text": "but that's set at the pod level security context so we probably want to disable that in fact uh the cbe that was",
    "start": "822000",
    "end": "827600"
  },
  {
    "text": "released last week um if you don't have the ability to run any containers as root would have um",
    "start": "827600",
    "end": "834480"
  },
  {
    "text": "not mitigated entirely but uh reduced the blast radius of that cbe that we",
    "start": "834480",
    "end": "840720"
  },
  {
    "text": "all had to deal with last week so um we can go ahead and",
    "start": "840720",
    "end": "846480"
  },
  {
    "text": "add that in as well",
    "start": "846480",
    "end": "849920"
  },
  {
    "text": "that's in the",
    "start": "853440",
    "end": "856920"
  },
  {
    "text": "oh we need to run as user run as group for the pod that's right so we're gonna modify the pod level security context",
    "start": "860160",
    "end": "869800"
  },
  {
    "text": "so in the pod spec not underneath containers i'm going to add in",
    "start": "871199",
    "end": "878480"
  },
  {
    "text": "our security context and",
    "start": "878480",
    "end": "883600"
  },
  {
    "text": "this one's a little more tricky uh to modify because you can just stop running as root but some containers depending on",
    "start": "883600",
    "end": "890639"
  },
  {
    "text": "how you've built your container doesn't necessarily always play nicely so we're gonna try this and see if it works",
    "start": "890639",
    "end": "897720"
  },
  {
    "text": "right for the ui i'm not horribly worried about it the uh database container in the reddit",
    "start": "898079",
    "end": "905120"
  },
  {
    "text": "server might have a little bit more promise all",
    "start": "905120",
    "end": "910839"
  },
  {
    "text": "right first things first let's make sure our app is still running looks like we've",
    "start": "910839",
    "end": "916480"
  },
  {
    "text": "refreshed our database restarted and took all of its data with it so our number of total",
    "start": "916480",
    "end": "922720"
  },
  {
    "text": "votes is way down feel free to throw some load at this thing while we're uh on here um see if you can get the one of",
    "start": "922720",
    "end": "929680"
  },
  {
    "text": "these to win we've got yelp.kepler.hillghost.com",
    "start": "929680",
    "end": "934040"
  },
  {
    "text": "uh is the url and it's http only i wasn't able to get uh tls certificate working with this particular app uh",
    "start": "934959",
    "end": "941120"
  },
  {
    "text": "while i was prepping for it so let's go back to our dashboard take a quick look at our ui",
    "start": "941120",
    "end": "948399"
  },
  {
    "text": "and see all right",
    "start": "948959",
    "end": "954079"
  },
  {
    "text": "so we've dropped our uh ability to run as root uh notice that",
    "start": "954079",
    "end": "961120"
  },
  {
    "text": "check has gone green for us so that's great um let's see what time we have 10 15. so",
    "start": "961120",
    "end": "967600"
  },
  {
    "text": "i'm going to do one more of these before i jump into the efficiency side of things so let's do",
    "start": "967600",
    "end": "974240"
  },
  {
    "text": "one more security one and let's do capabilities this is an interesting one um so again insecure capabilities this",
    "start": "974240",
    "end": "981759"
  },
  {
    "text": "will link specifically into um our our internal list of insecure",
    "start": "981759",
    "end": "988880"
  },
  {
    "text": "capabilities um these are the linux kernel capabilities that your",
    "start": "988880",
    "end": "994880"
  },
  {
    "text": "container has these are also covered in the documentation here um",
    "start": "994880",
    "end": "1001600"
  },
  {
    "text": "these capabilities oh that's not the link i wanted sorry to do",
    "start": "1003600",
    "end": "1011040"
  },
  {
    "text": "let's keep going",
    "start": "1011040",
    "end": "1016480"
  },
  {
    "text": "capabilities there we go all right so what we want the",
    "start": "1018639",
    "end": "1026319"
  },
  {
    "text": "in the pod in the container level security context for each container that we're running we have a list of capabilities that we can use",
    "start": "1026319",
    "end": "1033839"
  },
  {
    "text": "uh in theory for our ui container specifically",
    "start": "1033839",
    "end": "1042120"
  },
  {
    "text": "i don't think we'll need any i haven't looked too deeply into this path",
    "start": "1042720",
    "end": "1049919"
  },
  {
    "text": "but we have the ability to add capabilities but primarily what we want is the ability to let's take a look at",
    "start": "1049919",
    "end": "1057520"
  },
  {
    "text": "this again does it show the drop here",
    "start": "1057520",
    "end": "1063120"
  },
  {
    "text": "it doesn't i believe we can do the same list here",
    "start": "1063679",
    "end": "1071440"
  },
  {
    "text": "we can drop all",
    "start": "1071440",
    "end": "1076559"
  },
  {
    "text": "and then we can add the ones we want but let's try dropping all of them",
    "start": "1076559",
    "end": "1081840"
  },
  {
    "text": "apply that assuming i got my animal correct we did",
    "start": "1083760",
    "end": "1089840"
  },
  {
    "text": "and we'll take a look at our pods and we have a crash loop back off not",
    "start": "1089840",
    "end": "1096000"
  },
  {
    "text": "super surprised there so capability is kind of like changing your user and your group that you're running as depending",
    "start": "1096000",
    "end": "1101679"
  },
  {
    "text": "on how your container is built and what it requires to do you probably need some level of uh capabilities here so",
    "start": "1101679",
    "end": "1109919"
  },
  {
    "text": "my guess is we're going to need something related to networking so that we can actually run",
    "start": "1109919",
    "end": "1116240"
  },
  {
    "text": "whatever it is we're running here so let's take a look logs yep",
    "start": "1116240",
    "end": "1124400"
  },
  {
    "text": "all right ah we're running an nginx container i",
    "start": "1124559",
    "end": "1131520"
  },
  {
    "text": "see so um the yelp ui container is obviously built on",
    "start": "1131520",
    "end": "1136960"
  },
  {
    "text": "an nginx container and then serving up some files out of that and nginx is going to need some of those capabilities",
    "start": "1136960",
    "end": "1143039"
  },
  {
    "text": "to run so let's take a look and we're going to",
    "start": "1143039",
    "end": "1148840"
  },
  {
    "text": "add um actually i've done this in a little while so i'm going to",
    "start": "1148840",
    "end": "1155520"
  },
  {
    "text": "[Music] let's take a look let's close these",
    "start": "1155520",
    "end": "1162320"
  },
  {
    "text": "and we'll take a look at the list of capabilities i'm fairly certain",
    "start": "1162320",
    "end": "1169600"
  },
  {
    "text": "we're going well let's just guess here i need that let's try that",
    "start": "1169600",
    "end": "1175519"
  },
  {
    "text": "feel free to throw into the questions if you know exactly what capabilities",
    "start": "1175760",
    "end": "1181840"
  },
  {
    "text": "nginx needs but uh that doesn't work we can move on from that so you it's um",
    "start": "1181840",
    "end": "1190080"
  },
  {
    "text": "you know i like to run through this just kind of from a super clean perspective here because say i'm an ops person",
    "start": "1190080",
    "end": "1196240"
  },
  {
    "text": "working on a team with developers that built a container and i need to help you know change the security configuration",
    "start": "1196240",
    "end": "1201840"
  },
  {
    "text": "here there are some things that are easy that are low hanging fruit and then there's a lot of things that are more complex to change and more complex to",
    "start": "1201840",
    "end": "1208400"
  },
  {
    "text": "update and polaris does a great job of alerting you to potential issues there um but it still takes some effort to get",
    "start": "1208400",
    "end": "1215039"
  },
  {
    "text": "the to get these things all working",
    "start": "1215039",
    "end": "1219640"
  },
  {
    "text": "still crashing probably need",
    "start": "1223360",
    "end": "1228080"
  },
  {
    "text": "i think it sounds like it's uh related to the user change maybe not the capabilities change do you think",
    "start": "1228799",
    "end": "1235520"
  },
  {
    "text": "i was actually just wondering that myself so let's",
    "start": "1235520",
    "end": "1240240"
  },
  {
    "text": "drop this i think you might be right",
    "start": "1241200",
    "end": "1248200"
  },
  {
    "text": "because it does say it's attempting to run user directive makes sense if it's running with super user privileges which",
    "start": "1249520",
    "end": "1255360"
  },
  {
    "text": "it's not",
    "start": "1255360",
    "end": "1258520"
  },
  {
    "text": "again here now we're getting an operation",
    "start": "1265760",
    "end": "1271039"
  },
  {
    "text": "it's trying to chunk something so i can spend a horrible amount of time",
    "start": "1271039",
    "end": "1276400"
  },
  {
    "text": "attempting to get this working i just wanted to really show kind of the level of complexity that i",
    "start": "1276400",
    "end": "1281919"
  },
  {
    "text": "can take to get some of these configurations locked down um it's not just a matter of you know go",
    "start": "1281919",
    "end": "1287520"
  },
  {
    "text": "set the thing do the thing here change your yaml you really have to understand what's running inside your container",
    "start": "1287520",
    "end": "1293280"
  },
  {
    "text": "what capabilities it needs and um and also build your container in such a way that it doesn't require",
    "start": "1293280",
    "end": "1299679"
  },
  {
    "text": "you know root level access if you can so let's put this back",
    "start": "1299679",
    "end": "1305600"
  },
  {
    "text": "get this running again um so that's that's really a decent uh overview of some of the security checks",
    "start": "1305600",
    "end": "1312320"
  },
  {
    "text": "we have um there's probably additional ones i haven't talked about but those are really the",
    "start": "1312320",
    "end": "1318559"
  },
  {
    "text": "that they should be the most straightforward to get configured with your various uh",
    "start": "1318559",
    "end": "1324400"
  },
  {
    "text": "applications all right so let's just make sure we've got everything running here",
    "start": "1324400",
    "end": "1332600"
  },
  {
    "text": "that's about perfectly still that looks much better",
    "start": "1334240",
    "end": "1340559"
  },
  {
    "text": "all right this little refresh",
    "start": "1340559",
    "end": "1345720"
  },
  {
    "text": "all right and unfortunately though if we refresh this page we're gonna see",
    "start": "1349280",
    "end": "1356919"
  },
  {
    "text": "we've uh we've got our privilege escalation back because i commented that back out so um let's talk about some of",
    "start": "1360320",
    "end": "1366080"
  },
  {
    "text": "the reliability stuff next because this is actually really one of my favorite areas to to jump into is reliability and",
    "start": "1366080",
    "end": "1371919"
  },
  {
    "text": "efficiency so we'll see a couple of issues here specifically around and this",
    "start": "1371919",
    "end": "1377120"
  },
  {
    "text": "is still this one i apologize for that um for memory limits cpu limits cpu",
    "start": "1377120",
    "end": "1382480"
  },
  {
    "text": "requests memory requests and liveness and readiness probes and these things and again they'll link",
    "start": "1382480",
    "end": "1389440"
  },
  {
    "text": "out to the documentation if you click on the the question mark here but um these things the liveness and randomness",
    "start": "1389440",
    "end": "1395679"
  },
  {
    "text": "probes the cpu requests the memory requests are really kind of the bare minimum for",
    "start": "1395679",
    "end": "1401120"
  },
  {
    "text": "good reliability inside your kubernetes cluster especially if you're running multiple apps that need to",
    "start": "1401120",
    "end": "1406480"
  },
  {
    "text": "uh use different amounts of resources and things like that so um this is really where goldilocks comes into play",
    "start": "1406480",
    "end": "1412240"
  },
  {
    "text": "so cpu and memory requests are great we can say set them but the question is then okay what do i",
    "start": "1412240",
    "end": "1418000"
  },
  {
    "text": "set them to uh you know you can maybe you know you can profile your app you can run it for",
    "start": "1418000",
    "end": "1424640"
  },
  {
    "text": "a little while i could go in here and kind of get an idea of how much cpu memory is my application",
    "start": "1424640",
    "end": "1433120"
  },
  {
    "text": "using is each piece of my application using right at this moment maybe i have some sort of monitoring hooked up and i",
    "start": "1433120",
    "end": "1438559"
  },
  {
    "text": "can go look at historical graphs but it's really kind of a frustrating it can be a frustrating experience especially",
    "start": "1438559",
    "end": "1444159"
  },
  {
    "text": "across many apps trying to go in and figure out what do i set these to and so",
    "start": "1444159",
    "end": "1450159"
  },
  {
    "text": "we set out um a long while ago to try and make this at least a little bit easier just move the needle a little bit",
    "start": "1450159",
    "end": "1456400"
  },
  {
    "text": "give people a tool that would make it uh possible to set those memory requests some limits in an easier way and so what",
    "start": "1456400",
    "end": "1464400"
  },
  {
    "text": "what that resulted in was a project that we have called goldilocks and all these products around github in",
    "start": "1464400",
    "end": "1470320"
  },
  {
    "text": "our fairwinds or org but goldilocks is a controller",
    "start": "1470320",
    "end": "1477840"
  },
  {
    "text": "that manages vertical pod autoscaler objects in recommendation mode and then",
    "start": "1477840",
    "end": "1484159"
  },
  {
    "text": "aggregates the recommendations from those vertical pod autoscaler objects into a dashboard and so",
    "start": "1484159",
    "end": "1491840"
  },
  {
    "text": "the way this works is uh we install goldilocks in our cluster so we're gonna we would do the how the",
    "start": "1491840",
    "end": "1497520"
  },
  {
    "text": "same type of helm install um that we would have for polaris so we'd install",
    "start": "1497520",
    "end": "1503760"
  },
  {
    "text": "goldilocks in the goldilocks namespace from the fairwinds stable repository",
    "start": "1503760",
    "end": "1513120"
  },
  {
    "text": "and create namespace i'm gonna run this i already have it um if we take a look in the goldilocks",
    "start": "1513360",
    "end": "1519279"
  },
  {
    "text": "namespace uh we have two components as a controller and a dashboard one of the",
    "start": "1519279",
    "end": "1524400"
  },
  {
    "text": "prerequisites of installing goldilocks is that we also have the vertical pod auto scaler",
    "start": "1524400",
    "end": "1529520"
  },
  {
    "text": "in stalled so if we look in our vpa namespace i've",
    "start": "1529520",
    "end": "1534640"
  },
  {
    "text": "already installed the vertical auto scaler we have a chart for that it can be installed as a subchart of goldilocks",
    "start": "1534640",
    "end": "1540000"
  },
  {
    "text": "but essentially we only i i really only need the recommender portion i'm not going to run",
    "start": "1540000",
    "end": "1545360"
  },
  {
    "text": "uh vertical pod auto scaler in the uh automatic mode where it changes your requested limits i'm just going to run a",
    "start": "1545360",
    "end": "1551520"
  },
  {
    "text": "recommendation look and then the last thing we have to do",
    "start": "1551520",
    "end": "1557039"
  },
  {
    "text": "is label our namespaces so if we take a look at our namespace our app namespace yelp",
    "start": "1557039",
    "end": "1563360"
  },
  {
    "text": "we have this label goldilocks.fermins.com enabled equals true and what this does",
    "start": "1563360",
    "end": "1569520"
  },
  {
    "text": "is it goes and creates a vertical pot auto scaler object for all of the",
    "start": "1569520",
    "end": "1574559"
  },
  {
    "text": "deployments in our namespace here so we we see we have these have been here for a few days i built this a few days ago",
    "start": "1574559",
    "end": "1580240"
  },
  {
    "text": "um so they've been kind of collecting information over that time so vertical pod auto scaler will watch the resource",
    "start": "1580240",
    "end": "1586559"
  },
  {
    "text": "usage of your your pods your each container in your pod",
    "start": "1586559",
    "end": "1591679"
  },
  {
    "text": "and create a recommendation so if we look at the say for the ui",
    "start": "1591679",
    "end": "1597200"
  },
  {
    "text": "we look at the vpa object we see that in the status block there's",
    "start": "1597200",
    "end": "1603200"
  },
  {
    "text": "a set of recommendations there's a lower bound a target an uncapped target and an upper bound",
    "start": "1603200",
    "end": "1609760"
  },
  {
    "text": "currently these look all the same because they're using the minimum of what the vertical pod auto",
    "start": "1609760",
    "end": "1615600"
  },
  {
    "text": "scaler is set to it has a minimum target but over time if we had load on our",
    "start": "1615600",
    "end": "1621600"
  },
  {
    "text": "application we would see these numbers start to change and so we can take a look at the goldilocks dashboard",
    "start": "1621600",
    "end": "1630960"
  },
  {
    "text": "and we can see those recommendations across all of",
    "start": "1633440",
    "end": "1640159"
  },
  {
    "text": "our deployments across all of our containers aggregated in a nice dashboard so let me pull that up",
    "start": "1640159",
    "end": "1647320"
  },
  {
    "text": "i'm going to pull up the goldilocks dashboard i put forwarded to it we can list all of our namespaces we see",
    "start": "1669840",
    "end": "1677440"
  },
  {
    "text": "all of them that are labeled here and have vpa objects in them so we saw that the yelled namespace",
    "start": "1677440",
    "end": "1683440"
  },
  {
    "text": "had that label on it i'm going to click into this namespace and i'm going to see just a little bit",
    "start": "1683440",
    "end": "1689520"
  },
  {
    "text": "too big maybe i'm going to see the various deployments within there within that namespace",
    "start": "1689520",
    "end": "1697200"
  },
  {
    "text": "and then each within that deployment so if we had multiple containers we'd see those here and we see goldilocks is",
    "start": "1697200",
    "end": "1703279"
  },
  {
    "text": "giving us the same uh issue that uh polaris was which is that our limits",
    "start": "1703279",
    "end": "1709200"
  },
  {
    "text": "aren't set and it's going to give us a recommendation on how to set those and so if we install goldilocks alongside of",
    "start": "1709200",
    "end": "1715600"
  },
  {
    "text": "our applications we can",
    "start": "1715600",
    "end": "1721600"
  },
  {
    "text": "get some recommendations over time on how to set those another nice thing you can hook vpa or",
    "start": "1721600",
    "end": "1726720"
  },
  {
    "text": "the vertical pod autoscaler up to prometheus to get some more um",
    "start": "1726720",
    "end": "1732640"
  },
  {
    "text": "to get some more historical data incorporated into your recommendations so i'm going to go ahead",
    "start": "1732640",
    "end": "1738640"
  },
  {
    "text": "and apply the",
    "start": "1738640",
    "end": "1741840"
  },
  {
    "text": "recommendations that goldilocks is making",
    "start": "1743760",
    "end": "1748880"
  },
  {
    "text": "to my ui container",
    "start": "1750240",
    "end": "1755120"
  },
  {
    "text": "all right",
    "start": "1758640",
    "end": "1761799"
  },
  {
    "text": "take a look at the questions here is there anything",
    "start": "1766159",
    "end": "1770080"
  },
  {
    "text": "and we can take a look let's set up our put forward with",
    "start": "1775520",
    "end": "1783200"
  },
  {
    "text": "all right that's redis we applied to the ui so now",
    "start": "1806880",
    "end": "1812960"
  },
  {
    "text": "we're gonna see that uh goldilocks is seeing that we have our",
    "start": "1812960",
    "end": "1819039"
  },
  {
    "text": "uh resource requested limits set to exactly what it recommends so i'm going to talk a little bit about qos now uh if you're",
    "start": "1819039",
    "end": "1826000"
  },
  {
    "text": "not familiar with quality of service class it is when uh your",
    "start": "1826000",
    "end": "1831200"
  },
  {
    "text": "it's the configuration of the difference between your limit and your request so if your limits and requests are equal",
    "start": "1831200",
    "end": "1836399"
  },
  {
    "text": "it's in what's called the guaranteed qos cost because you're guaranteeing that amount of resources to your",
    "start": "1836399",
    "end": "1842240"
  },
  {
    "text": "uh container so uh we show both burstable and guaranteed versatiles when you have",
    "start": "1842240",
    "end": "1848320"
  },
  {
    "text": "requests that are lower than your limits so that your your workload can burst up to the limit",
    "start": "1848320",
    "end": "1853840"
  },
  {
    "text": "um and those are actually defined down here and link out to the kubernetes documentation when we talk about it but",
    "start": "1853840",
    "end": "1860559"
  },
  {
    "text": "we use the lower bound and upper bound to build the burstable qos recommendation and then we",
    "start": "1860559",
    "end": "1867360"
  },
  {
    "text": "use the uh the target from the vpa recommendation for both the request and",
    "start": "1867360",
    "end": "1873200"
  },
  {
    "text": "the limit for the guaranteed qos class",
    "start": "1873200",
    "end": "1878399"
  },
  {
    "text": "um so what i'd like to do is",
    "start": "1878399",
    "end": "1883840"
  },
  {
    "text": "rerun my loop here but i think i lost that",
    "start": "1884080",
    "end": "1889360"
  },
  {
    "text": "i could generate some more load on this so let me grab the",
    "start": "1889360",
    "end": "1895279"
  },
  {
    "text": "code for that real fast i'm not a javascript expert so",
    "start": "1895279",
    "end": "1900480"
  },
  {
    "text": "i have asked one of our lovely app developers to give me this",
    "start": "1900480",
    "end": "1908158"
  },
  {
    "text": "any questions that i can answer for people",
    "start": "1910640",
    "end": "1914799"
  },
  {
    "text": "so there was one question that uh maybe try to generalize um about polaris i",
    "start": "1919039",
    "end": "1924480"
  },
  {
    "text": "think specifically i'm not sure how it applies to gridlock whether it follows some",
    "start": "1924480",
    "end": "1929760"
  },
  {
    "text": "uh kind of standard um for the specific set of rules that you",
    "start": "1929760",
    "end": "1935760"
  },
  {
    "text": "chose to uh enforce there or maybe to even generalize this further how do you",
    "start": "1935760",
    "end": "1941840"
  },
  {
    "text": "choose which rules get into polaris which tests and how do you update them or",
    "start": "1941840",
    "end": "1948080"
  },
  {
    "text": "does it relate to any kind of compliance or standard",
    "start": "1948080",
    "end": "1952880"
  },
  {
    "text": "it's a great question um so this the current set of checks that are",
    "start": "1954320",
    "end": "1960159"
  },
  {
    "text": "built into polaris are not built on any particular standard they're really",
    "start": "1960159",
    "end": "1966960"
  },
  {
    "text": "kind of a collection of things that we've seen as common best practices over the years",
    "start": "1966960",
    "end": "1972080"
  },
  {
    "text": "so we don't currently have anything that maps specifically to standards we are talking",
    "start": "1972080",
    "end": "1978960"
  },
  {
    "text": "about what we can do in that area we just achieved our stock to certification so we're working on things to work with",
    "start": "1978960",
    "end": "1984880"
  },
  {
    "text": "standards like that um the other thing that we can do is in our",
    "start": "1984880",
    "end": "1990000"
  },
  {
    "text": "in our commercial product we started using qbench which will give you the cis benchmark which is a nice thing to do",
    "start": "1990000",
    "end": "1996799"
  },
  {
    "text": "and then there's definitely a potential for building custom checks that would align",
    "start": "1996799",
    "end": "2002799"
  },
  {
    "text": "with a a standard like that but currently it's just best practices that we've developed",
    "start": "2002799",
    "end": "2008399"
  },
  {
    "text": "over time okay",
    "start": "2008399",
    "end": "2013519"
  },
  {
    "text": "another kind of random question about which terminal uh you use but uh",
    "start": "2014000",
    "end": "2021279"
  },
  {
    "text": "i use it's called alacrity um it's a rust terminal emulator um",
    "start": "2021279",
    "end": "2029518"
  },
  {
    "text": "cool so yeah it's out there it's open source so i'm trying to get some load running on these different pods so that we can see",
    "start": "2029600",
    "end": "2036080"
  },
  {
    "text": "different recommendations in goldilocks uh the other thing that we can do is we can uh kind of tweak these a little bit",
    "start": "2036080",
    "end": "2041760"
  },
  {
    "text": "to see you know say we maybe say we we built our container and we've",
    "start": "2041760",
    "end": "2047279"
  },
  {
    "text": "got just these you know huge recommendations uh i'm not going to go that high because",
    "start": "2047279",
    "end": "2052960"
  },
  {
    "text": "i'm not sure how big these notes are but you know the original recommendation was much",
    "start": "2052960",
    "end": "2058800"
  },
  {
    "text": "lower than this let's take a look goldilocks will not only tell you if you haven't set your",
    "start": "2058800",
    "end": "2063839"
  },
  {
    "text": "your requests and limits it will also tell you",
    "start": "2063839",
    "end": "2069040"
  },
  {
    "text": "if it will tell you if you have over",
    "start": "2069040",
    "end": "2074480"
  },
  {
    "text": "provision your uh requests and limits as well so we can go back here and take a look at the",
    "start": "2074480",
    "end": "2080320"
  },
  {
    "text": "dashboard and see that hey we've we've over provisioned these maybe we were using uh",
    "start": "2080320",
    "end": "2086560"
  },
  {
    "text": "we allocated too many resources maybe we have an opportunity to save a little bit of money here and reduce the number of",
    "start": "2086560",
    "end": "2092398"
  },
  {
    "text": "uh nodes that we're using so",
    "start": "2092399",
    "end": "2098720"
  },
  {
    "text": "the other thing i want to look at is the db because it looks like it was under some load and we also don't have them",
    "start": "2099359",
    "end": "2105280"
  },
  {
    "text": "set here i'm going to go ahead and set them for the database as well",
    "start": "2105280",
    "end": "2112599"
  },
  {
    "text": "put it back",
    "start": "2139440",
    "end": "2142838"
  },
  {
    "text": "and reduce this again",
    "start": "2148240",
    "end": "2152760"
  },
  {
    "text": "all right so that nice copy paste there makes it relatively easy if you want to",
    "start": "2164720",
    "end": "2173838"
  },
  {
    "text": "everywhere [Music] all right i did dv redis let's do app",
    "start": "2174000",
    "end": "2181200"
  },
  {
    "text": "server all right",
    "start": "2181200",
    "end": "2187839"
  },
  {
    "text": "nice feature idea at the bottom that applies recommended",
    "start": "2201760",
    "end": "2206800"
  },
  {
    "text": "that would be cool uh although uh in an infrastructure as code world not",
    "start": "2206800",
    "end": "2212640"
  },
  {
    "text": "my favorite solution um but uh one ideal uh one thing that we've",
    "start": "2212640",
    "end": "2217760"
  },
  {
    "text": "been talking about doing actually is adding the ability to do uh you know kind of dependable style pull requests",
    "start": "2217760",
    "end": "2223440"
  },
  {
    "text": "so you have issues in your polaris and uh it goes",
    "start": "2223440",
    "end": "2228480"
  },
  {
    "text": "and creates a pull request on your infrastructure's code or your helm chart or you know whatever you have to apply these",
    "start": "2228480",
    "end": "2235280"
  },
  {
    "text": "settings which that would be super cool um but our issues are open on all these",
    "start": "2235280",
    "end": "2241280"
  },
  {
    "text": "open source projects so feel free to go make that request there",
    "start": "2241280",
    "end": "2246880"
  },
  {
    "text": "all right let's go refresh our dashboard here see what we've got great",
    "start": "2247359",
    "end": "2254640"
  },
  {
    "text": "great green green green oh well i changed it to lower than what",
    "start": "2254640",
    "end": "2261440"
  },
  {
    "text": "they recommend so let's just get it all green because green's good color",
    "start": "2261440",
    "end": "2267319"
  },
  {
    "text": "so that's goldilocks it's hoping to generate a little bit more load on this",
    "start": "2283599",
    "end": "2291040"
  },
  {
    "text": "but that's all right",
    "start": "2291200",
    "end": "2294920"
  },
  {
    "text": "they're still healthy we are",
    "start": "2318320",
    "end": "2323280"
  },
  {
    "text": "and let's do every 10 milliseconds let's see how much we can click on this thing",
    "start": "2323359",
    "end": "2328720"
  },
  {
    "text": "and how fast",
    "start": "2328720",
    "end": "2331599"
  },
  {
    "text": "effective load generation is one of the most difficult things",
    "start": "2334320",
    "end": "2340280"
  },
  {
    "text": "all right and the other nice thing if we refresh our polaris dashboard here because we've",
    "start": "2340320",
    "end": "2346640"
  },
  {
    "text": "set our resource requests and limits on all of our pods we're going to jump from a d minus to a c plus",
    "start": "2346640",
    "end": "2353280"
  },
  {
    "text": "hooray good for us yeah all right and i noticed our efficiency",
    "start": "2353280",
    "end": "2360240"
  },
  {
    "text": "score just went from zero what it was before up to 100 because really the the",
    "start": "2360240",
    "end": "2365599"
  },
  {
    "text": "number one thing about efficiency is getting your resource requests and limits set properly um",
    "start": "2365599",
    "end": "2373040"
  },
  {
    "text": "and if you've watched any of the stuff that i've done recently or you talked to me",
    "start": "2373040",
    "end": "2378400"
  },
  {
    "text": "you probably know that i tend to harp on that a lot it's one of the things that i just uh jumped back to frequently but i",
    "start": "2378400",
    "end": "2385760"
  },
  {
    "text": "have noticed over running uh clusters for so many different clients that so many problems can be solved by",
    "start": "2385760",
    "end": "2392079"
  },
  {
    "text": "really knowing uh your resource requests and limits and then setting those properly and you're",
    "start": "2392079",
    "end": "2397599"
  },
  {
    "text": "utilizing the horizontal plot auto scaler along with your cluster out of scaling effect just those few things",
    "start": "2397599",
    "end": "2402640"
  },
  {
    "text": "right there can increase the stability of your kubernetes deployments considerably",
    "start": "2402640",
    "end": "2408480"
  },
  {
    "text": "so we've done security we've done efficiency let's talk about reliability",
    "start": "2408480",
    "end": "2415040"
  },
  {
    "text": "um that's a security one that's security one let's talk about liveness and readiness probes",
    "start": "2415040",
    "end": "2421440"
  },
  {
    "text": "uh so right now uh you may have noticed that in my animal files here i have no",
    "start": "2421440",
    "end": "2427200"
  },
  {
    "text": "liveness and readiness probes whatsoever uh liveness and radiance probes are super important to reliability because",
    "start": "2427200",
    "end": "2434560"
  },
  {
    "text": "they allow you uh they essentially allow you to not route traffic when your app's",
    "start": "2434560",
    "end": "2440319"
  },
  {
    "text": "not ready and also allows your app to be uh your pod to be terminated and",
    "start": "2440319",
    "end": "2445359"
  },
  {
    "text": "brought back up when it's doing things that it shouldn't so i don't know if you notice but",
    "start": "2445359",
    "end": "2450720"
  },
  {
    "text": "whenever i restart the pods i get a bunch of errors in the console here i think they're further up this is a",
    "start": "2450720",
    "end": "2457440"
  },
  {
    "text": "different error here um but that's because we're still routing",
    "start": "2457440",
    "end": "2462640"
  },
  {
    "text": "traffic to a pod that's shutting down because the readiness probe hasn't there is no readiness probe configured",
    "start": "2462640",
    "end": "2468079"
  },
  {
    "text": "so traffic is always being routed to my pod so if we take a look at the polaris check where it says liveness probe",
    "start": "2468079",
    "end": "2474240"
  },
  {
    "text": "should be configured i'm going to hit the question mark here again it's going to take me to readiness",
    "start": "2474240",
    "end": "2479760"
  },
  {
    "text": "probe missing liveness probe missing should probably link out to the docs here so maybe i'll make a pull request",
    "start": "2479760",
    "end": "2485359"
  },
  {
    "text": "for that later but we can search the kubernetes documentation",
    "start": "2485359",
    "end": "2490800"
  },
  {
    "text": "for liveness probes",
    "start": "2490800",
    "end": "2494839"
  },
  {
    "text": "and we've got a nice document here on configuring liveness readiness and startup pros",
    "start": "2498480",
    "end": "2504000"
  },
  {
    "text": "uh and we can let's find one let's find an example that's in http because we're running an http",
    "start": "2504000",
    "end": "2511839"
  },
  {
    "text": "server here so in our container we want to configure loudness probe",
    "start": "2511839",
    "end": "2519000"
  },
  {
    "text": "this and then we'll have to modify it a little bit for this application we're in the ui we know it's listening on port",
    "start": "2522079",
    "end": "2527839"
  },
  {
    "text": "8080 all right sorry 480 due to the container report here uh we probably don't have a health path",
    "start": "2527839",
    "end": "2534640"
  },
  {
    "text": "that i'm aware of and we don't need to send any custom headers so there's our liveness probe",
    "start": "2534640",
    "end": "2540000"
  },
  {
    "text": "it's just going to be an http yet on port 80 if we get a 200 back it's going to pass if we don't get a 200 back it's",
    "start": "2540000",
    "end": "2545839"
  },
  {
    "text": "not going to pass fairly straightforward and then we can i think writing this",
    "start": "2545839",
    "end": "2554079"
  },
  {
    "text": "next copy paste today all right",
    "start": "2554079",
    "end": "2557920"
  },
  {
    "text": "let's try that out",
    "start": "2561359",
    "end": "2565160"
  },
  {
    "text": "we'll go back to our canines and",
    "start": "2572319",
    "end": "2578720"
  },
  {
    "text": "we'll get pots and we'll see we have",
    "start": "2578720",
    "end": "2584960"
  },
  {
    "text": "creating",
    "start": "2584960",
    "end": "2587960"
  },
  {
    "text": "so now it's running but we're not routing traffic just yet because the liveness probe has the readiness probe hasn't started and then the readiness",
    "start": "2592079",
    "end": "2598400"
  },
  {
    "text": "probe starts we have the ready pod and now we're ready to terminate the old one so hopefully we've handed over we've had",
    "start": "2598400",
    "end": "2604800"
  },
  {
    "text": "time for any connections to move to the new ready pod once it was actually ready to start",
    "start": "2604800",
    "end": "2609839"
  },
  {
    "text": "accepting connections and we'll go back to polaris",
    "start": "2609839",
    "end": "2615599"
  },
  {
    "text": "hey look at that we're getting a b now good times good times",
    "start": "2618240",
    "end": "2625119"
  },
  {
    "text": "we'll do the same for our and copy this",
    "start": "2625119",
    "end": "2630799"
  },
  {
    "text": "let's do the same for our app server i want to change the port here because",
    "start": "2636720",
    "end": "2642079"
  },
  {
    "text": "we're listening on a different port",
    "start": "2642079",
    "end": "2646200"
  },
  {
    "text": "apply that enamel",
    "start": "2652319",
    "end": "2655520"
  },
  {
    "text": "and watch our",
    "start": "2660079",
    "end": "2666480"
  },
  {
    "text": "pods here maybe",
    "start": "2666640",
    "end": "2674599"
  },
  {
    "text": "waiting for it to become ready",
    "start": "2682800",
    "end": "2687160"
  },
  {
    "text": "it's possible that this app doesn't respond on route and so we may have to change our problem slightly rebuild",
    "start": "2698720",
    "end": "2704480"
  },
  {
    "text": "system all right",
    "start": "2704480",
    "end": "2711359"
  },
  {
    "text": "let's see and get back into it",
    "start": "2712319",
    "end": "2720000"
  },
  {
    "text": "take a",
    "start": "2720000",
    "end": "2722400"
  },
  {
    "text": "good look",
    "start": "2731359",
    "end": "2731359"
  },
  {
    "text": "dance is unhappy with me",
    "start": "2740079",
    "end": "2744200"
  },
  {
    "text": "oh 137 that wasn't killed [Music]",
    "start": "2754240",
    "end": "2762059"
  },
  {
    "text": "ah so we don't respond directly on that port so our liveness and radius probe on",
    "start": "2765119",
    "end": "2770720"
  },
  {
    "text": "that port is not going to work",
    "start": "2770720",
    "end": "2775838"
  },
  {
    "text": "another one of those things and another good example that building this stuff into your application from the beginning",
    "start": "2776319",
    "end": "2782560"
  },
  {
    "text": "is much easier than trying to add it to an application that you",
    "start": "2782560",
    "end": "2789838"
  },
  {
    "text": "aren't super familiar with upfront to answer the top question there",
    "start": "2790160",
    "end": "2796240"
  },
  {
    "text": "goldilocks does not provide any security related recommendations that is entirely up to polaris",
    "start": "2796240",
    "end": "2803838"
  },
  {
    "text": "and then another good question there that i didn't cover that i think is really worth covering is",
    "start": "2810400",
    "end": "2816160"
  },
  {
    "text": "exceptions for exemptions for polaris so can you the question is is it",
    "start": "2816160",
    "end": "2822400"
  },
  {
    "text": "possible to configure in polaris to disable security context run as root for some pods",
    "start": "2822400",
    "end": "2828400"
  },
  {
    "text": "so essentially we want to say you know this pod is supposed to run as root or this pot has to run at root run",
    "start": "2828400",
    "end": "2836000"
  },
  {
    "text": "as root uh we can add exemptions so um",
    "start": "2836000",
    "end": "2841839"
  },
  {
    "text": "you can exempt an entire deployment from all checks",
    "start": "2841839",
    "end": "2847760"
  },
  {
    "text": "but you can also exempt from specific checks so if we want to for example annotate our",
    "start": "2847760",
    "end": "2857119"
  },
  {
    "text": "now let's let's do the ui or actually the app server deployment we weren't able to configure our liveness and arenas pro perhaps there's some reason",
    "start": "2857119",
    "end": "2863839"
  },
  {
    "text": "we want that to be the case we'll add a annotation to our app server deployments",
    "start": "2863839",
    "end": "2872319"
  },
  {
    "text": "to to exempt it from that check so",
    "start": "2872319",
    "end": "2879280"
  },
  {
    "text": "let's annotations polaris.fairwinds.com",
    "start": "2879520",
    "end": "2885800"
  },
  {
    "text": "slash",
    "start": "2886480",
    "end": "2889480"
  },
  {
    "text": "go to the app server liveness probe",
    "start": "2896400",
    "end": "2901760"
  },
  {
    "text": "is loudness probe missing so we will do that and let's also do",
    "start": "2901760",
    "end": "2908640"
  },
  {
    "text": "readiness probe",
    "start": "2908640",
    "end": "2912200"
  },
  {
    "text": "do",
    "start": "2925680",
    "end": "2928680"
  },
  {
    "text": "oh did my annotation wrong oh this",
    "start": "2934240",
    "end": "2940319"
  },
  {
    "text": "so the light is gets all mad at me",
    "start": "2941200",
    "end": "2945839"
  },
  {
    "text": "there we go all right",
    "start": "2946480",
    "end": "2952000"
  },
  {
    "text": "we're gonna take a look at our dashboard again [Music] lost my pull forward",
    "start": "2952000",
    "end": "2959640"
  },
  {
    "text": "all right of course we could put this behind an",
    "start": "2974960",
    "end": "2980720"
  },
  {
    "text": "ingress maybe front it with some oauth using proxy um but if we take a look at",
    "start": "2980720",
    "end": "2987280"
  },
  {
    "text": "our app server we see that the liveness probe",
    "start": "2987280",
    "end": "2992880"
  },
  {
    "text": "uh liveness probes still here but readiness is not i'm a spell",
    "start": "2992880",
    "end": "2999599"
  },
  {
    "text": "something that can happen",
    "start": "2999599",
    "end": "3003760"
  },
  {
    "text": "perhaps a bug",
    "start": "3009280",
    "end": "3012680"
  },
  {
    "text": "i may have discovered a bug live on cncf livestream today let's take a look at that later but we did drop the",
    "start": "3024559",
    "end": "3030800"
  },
  {
    "text": "readiness probe uh issue from the list so that is how you would do exemptions",
    "start": "3030800",
    "end": "3036079"
  },
  {
    "text": "obviously if we wanted our score to go straight to an a plus we could just turn on all the exemptions and we would get that which comes to the top question",
    "start": "3036079",
    "end": "3042720"
  },
  {
    "text": "there which is how is the score calculated um the i believe we may have changed this",
    "start": "3042720",
    "end": "3048880"
  },
  {
    "text": "recently but the the score is essentially a percentage of uh passing checks to miss it to failing",
    "start": "3048880",
    "end": "3056000"
  },
  {
    "text": "checks uh so that's how we get the 81 percent and then we just do a typical",
    "start": "3056000",
    "end": "3061040"
  },
  {
    "text": "letter grade score based on that percentage",
    "start": "3061040",
    "end": "3065520"
  },
  {
    "text": "all right another question there about uh any way to figure some sort of uh notification",
    "start": "3067040",
    "end": "3074078"
  },
  {
    "text": "that is a good question i don't remember if we have that in the open source",
    "start": "3075599",
    "end": "3083839"
  },
  {
    "text": "um so we definitely have that in our sas product we've used the data from polaris",
    "start": "3084240",
    "end": "3089680"
  },
  {
    "text": "and send that to our sas product we can do notifications there i don't think we do notifications from the open source",
    "start": "3089680",
    "end": "3095440"
  },
  {
    "text": "project all right",
    "start": "3095440",
    "end": "3099839"
  },
  {
    "text": "you can run so an additional feature of polaris is there is a cli and you can",
    "start": "3102079",
    "end": "3107200"
  },
  {
    "text": "run it in ci cd as well if you want um so if we had our yaml files here we",
    "start": "3107200",
    "end": "3112559"
  },
  {
    "text": "could run the polaris uh cli and we could run a polaris audit",
    "start": "3112559",
    "end": "3119200"
  },
  {
    "text": "i believe by default it tries to connect to your cluster um but",
    "start": "3119200",
    "end": "3125200"
  },
  {
    "text": "we can uh polaris audit",
    "start": "3125200",
    "end": "3131280"
  },
  {
    "text": "dash dash audit path and we can audit our yaml in place right here so if you wanted to put a ci cd check in place use",
    "start": "3131280",
    "end": "3138640"
  },
  {
    "text": "polaris to audit it and then you know write some automation to send a notification based on that it would be",
    "start": "3138640",
    "end": "3143760"
  },
  {
    "text": "relatively straightforward we just output this nice json object here that you can parse and see all the different",
    "start": "3143760",
    "end": "3150480"
  },
  {
    "text": "failing checks and the different name spaces uh and and what's going on with them so",
    "start": "3150480",
    "end": "3155599"
  },
  {
    "text": "we see like my ingress as i mentioned earlier doesn't have tls configured we would see this as",
    "start": "3155599",
    "end": "3163599"
  },
  {
    "text": "a result in our json object so it'd be relatively straightforward to",
    "start": "3163599",
    "end": "3169040"
  },
  {
    "text": "build a uh a pipeline notification for that using the cli",
    "start": "3169040",
    "end": "3174960"
  },
  {
    "text": "cool that's cool i think now would be a good time to start summarizing as we near the end",
    "start": "3174960",
    "end": "3182000"
  },
  {
    "text": "yeah yeah would be great uh so you know a quick summary of what i did",
    "start": "3182000",
    "end": "3187119"
  },
  {
    "text": "today is we took an app just deployed with some very basic yaml files",
    "start": "3187119",
    "end": "3193599"
  },
  {
    "text": "with almost no overrides for the defaults in kubernetes and we used polaris to identify some of",
    "start": "3193599",
    "end": "3200720"
  },
  {
    "text": "the security issues with those default deployment yamls and then we use the recommendations from",
    "start": "3200720",
    "end": "3206880"
  },
  {
    "text": "polaris to fix some of those security settings so not running his route not allowing privilege escalation looking at",
    "start": "3206880",
    "end": "3214400"
  },
  {
    "text": "um kernel capabilities and then we used goldilocks to take a",
    "start": "3214400",
    "end": "3221440"
  },
  {
    "text": "look at resource recommendations to set our resource limits and our resource",
    "start": "3221440",
    "end": "3227520"
  },
  {
    "text": "requests for the deployment that we had deployed to the cluster for that",
    "start": "3227520",
    "end": "3232960"
  },
  {
    "text": "application in order to work on the efficiency of it we also talked a little bit about reliability with liveness",
    "start": "3232960",
    "end": "3238559"
  },
  {
    "text": "probes and readiness probes and how polaris can identify where those are missing in your applications as well",
    "start": "3238559",
    "end": "3245680"
  },
  {
    "text": "yeah and where can people go to get started or ask questions after this show",
    "start": "3246000",
    "end": "3252800"
  },
  {
    "text": "oh yeah that's a great question so um we have uh our github repositories for all of our open",
    "start": "3252800",
    "end": "3259359"
  },
  {
    "text": "source our at our github organization fairwinds ops and then uh",
    "start": "3259359",
    "end": "3265119"
  },
  {
    "text": "slash polaris or slash goldilocks uh feel free to file an issue or take a look at pr's on any of those and in",
    "start": "3265119",
    "end": "3272880"
  },
  {
    "text": "addition to that we also if you go to any of our open source repos there's a link to our community slack",
    "start": "3272880",
    "end": "3278400"
  },
  {
    "text": "you can click on that and get an invite to join our community slack and talk about these projects as a channel for",
    "start": "3278400",
    "end": "3283680"
  },
  {
    "text": "each one of our open source projects and then we also have an open source user group that we've been working on on",
    "start": "3283680",
    "end": "3290079"
  },
  {
    "text": "building recently uh that meets every so often uh and there's also a link to do that there as well",
    "start": "3290079",
    "end": "3296640"
  },
  {
    "text": "so feel free to reach out through any of those mediums uh and i'm also in the kubernetes so if you",
    "start": "3296640",
    "end": "3302559"
  },
  {
    "text": "want to hit me up there i'm always available there as well",
    "start": "3302559",
    "end": "3308160"
  },
  {
    "text": "all right great so uh with that andy thank you uh so",
    "start": "3308160",
    "end": "3313520"
  },
  {
    "text": "much this was a really great introduction to polaris and gridlocks um yeah and",
    "start": "3313520",
    "end": "3320559"
  },
  {
    "text": "everyone else thank you as well for joining and see you next wednesday on cloud",
    "start": "3320559",
    "end": "3325839"
  },
  {
    "text": "native live thank you thank you",
    "start": "3325839",
    "end": "3331318"
  }
]