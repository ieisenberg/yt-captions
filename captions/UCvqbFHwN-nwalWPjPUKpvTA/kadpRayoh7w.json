[
  {
    "text": "so so I think let's get started my name is Ashwin Raveendran I'm a part",
    "start": "30",
    "end": "8130"
  },
  {
    "text": "of the ebay cloud engineering group and I'm here to talk about how we manage our",
    "start": "8130",
    "end": "13460"
  },
  {
    "text": "Cuban Ruiz clusters declaratively so",
    "start": "13460",
    "end": "20090"
  },
  {
    "text": "Before we jump in let's understand like know why eBay chose to use given a DS",
    "start": "20779",
    "end": "26939"
  },
  {
    "text": "and what are the some of the you know main reasons why we stand behind you know the Cuban it is a cluster management solution so first and",
    "start": "26939",
    "end": "34079"
  },
  {
    "text": "foremost like you know we like the simplicity aspect of cuban at ease there are a bunch of these primitives which",
    "start": "34079",
    "end": "41700"
  },
  {
    "text": "cuban it is brings in the idea of like the parts and replicas sets these are like pretty awesome representations the",
    "start": "41700",
    "end": "48660"
  },
  {
    "text": "abstractions which a developer can easily understand so think of these as patterns for distributed computing which",
    "start": "48660",
    "end": "55020"
  },
  {
    "text": "you know if more the people who know the more is your newer solutions can be built on top of these things so that",
    "start": "55020",
    "end": "61289"
  },
  {
    "text": "simplicity of like understanding how your application is laid out is the number one thing which cuban Indies brings to the eBay ecosystem for us the",
    "start": "61289",
    "end": "69090"
  },
  {
    "text": "second part is like flexibility so while it is very simple it also allows you",
    "start": "69090",
    "end": "74580"
  },
  {
    "text": "know flexibility in that a developer can take his application runtime decompose",
    "start": "74580",
    "end": "80640"
  },
  {
    "text": "it into one or many units and you know put it as part of a part and then you run these parts like in a distributed",
    "start": "80640",
    "end": "87240"
  },
  {
    "text": "manner so though it is very simple it's also extremely flexible and obviously",
    "start": "87240",
    "end": "92250"
  },
  {
    "text": "leg you know something like Cuban it is is very efficient because it has a dynamic scheduler in which powers like",
    "start": "92250",
    "end": "98790"
  },
  {
    "text": "how the workloads get portioned onto these different nodes and for operators",
    "start": "98790",
    "end": "104399"
  },
  {
    "text": "like us who are operating these Cuban Andes clusters at large scale it is really really flexible so we have bent",
    "start": "104399",
    "end": "110820"
  },
  {
    "text": "and adapted Cuban at least to match most of the operational challenges we have and this talk like we will cover some of",
    "start": "110820",
    "end": "117329"
  },
  {
    "text": "the challenges and how we have done that and the the last reason and I think the",
    "start": "117329",
    "end": "122610"
  },
  {
    "text": "kind of the foremost reasons is the open source community cube has like an extremely awesome community like we have",
    "start": "122610",
    "end": "128690"
  },
  {
    "text": "had like nothing but good things to say about them so Jimbo straighten to the declarative",
    "start": "128690",
    "end": "136750"
  },
  {
    "text": "models like what we are basing on for writing our abstractions so this starts",
    "start": "136750",
    "end": "144040"
  },
  {
    "text": "with understanding a little bit about a little bit about how cube itself is like",
    "start": "144040",
    "end": "149500"
  },
  {
    "text": "you know are designed to be so this is roughly like you know how we see the Cuban it is machinery so you have these",
    "start": "149500",
    "end": "159460"
  },
  {
    "text": "API server which is in the center of like you know the universe for Humanities so think of that as a",
    "start": "159460",
    "end": "165330"
  },
  {
    "text": "distributed state store which allows like in this global view or the global",
    "start": "165330",
    "end": "172660"
  },
  {
    "text": "store for all your API objects so whatever your objects are beter like a",
    "start": "172660",
    "end": "178030"
  },
  {
    "text": "pod or like you know any other specs which Cuba needs supports ends up in",
    "start": "178030",
    "end": "183070"
  },
  {
    "text": "this API server like that is what this diagram shows like a user here is",
    "start": "183070",
    "end": "190270"
  },
  {
    "text": "actually declaring a spec a spec is like nothing but like you know all the cube",
    "start": "190270",
    "end": "195280"
  },
  {
    "text": "objects are specs you have a part spec you are a replica spec you have like in a scaling expect all these fixed gets",
    "start": "195280",
    "end": "200650"
  },
  {
    "text": "declared on any on the API server so API server has the liquor storage which is a",
    "start": "200650",
    "end": "206050"
  },
  {
    "text": "distributed state store and in the default implementation it's an H CD back store there are a bunch of controllers",
    "start": "206050",
    "end": "214300"
  },
  {
    "text": "which are nothing but regular application code which understands basic HTTP primitives they talk to the API",
    "start": "214300",
    "end": "221860"
  },
  {
    "text": "server and they can actually pull out the objects which the user has",
    "start": "221860",
    "end": "227670"
  },
  {
    "text": "represented into the API server in addition to the regular crud operations which are rest api is normally support",
    "start": "227670",
    "end": "234160"
  },
  {
    "text": "the cube api server also support an additional one which is called a watch feature so one of these controllers can",
    "start": "234160",
    "end": "240510"
  },
  {
    "text": "let the api server knows about its intention of wanting to know about updates to certain events which are",
    "start": "240510",
    "end": "247300"
  },
  {
    "text": "happening on the api server and api server would push these events or updates back to the controllers so and",
    "start": "247300",
    "end": "254260"
  },
  {
    "text": "these controllers are also just regular application binaries which you deploy just as regular applications cube",
    "start": "254260",
    "end": "260170"
  },
  {
    "text": "ecosystem so you can have this complex modeling done",
    "start": "260170",
    "end": "266330"
  },
  {
    "text": "and the controller's written all using the Cuban IDs framework itself so to",
    "start": "266330",
    "end": "271460"
  },
  {
    "text": "understand how it works like you know let's look at this picture so this actually explains how we see an eBay",
    "start": "271460",
    "end": "279949"
  },
  {
    "text": "developer goes on with this job of like you know writing an application and getting it deployed onto a Cuban in this",
    "start": "279949",
    "end": "286250"
  },
  {
    "text": "cluster so like everything like any other project you obviously start your journey by writing some code into github",
    "start": "286250",
    "end": "293240"
  },
  {
    "text": "so that is like the the first step here you create like a project in github and",
    "start": "293240",
    "end": "299780"
  },
  {
    "text": "then you go and create a booth back a bill spec encodes the information about",
    "start": "299780",
    "end": "305090"
  },
  {
    "text": "which repository you have your code and where do you want these artifacts to be",
    "start": "305090",
    "end": "310759"
  },
  {
    "text": "built and published into it normally is like a darker repository or any other",
    "start": "310759",
    "end": "316610"
  },
  {
    "text": "repository which holds the binary data for the application but the build spec",
    "start": "316610",
    "end": "322250"
  },
  {
    "text": "is a spec which embodies that information and you have what is called a build controller which is constantly",
    "start": "322250",
    "end": "327979"
  },
  {
    "text": "watching your the bill spec so a developer comes and you say is that a this is like the four repos I want my my",
    "start": "327979",
    "end": "334909"
  },
  {
    "text": "code these are in the four different repos and I want you to actually build",
    "start": "334909",
    "end": "340069"
  },
  {
    "text": "if there is a change in the repo it's just nothing like nothing different it's just Jenkins and others liking it they",
    "start": "340069",
    "end": "346069"
  },
  {
    "text": "do the same thing but we can abstract that idea of building into this bill spec and the controllers can actually",
    "start": "346069",
    "end": "352190"
  },
  {
    "text": "spin off like a Jenkins to do the actual job but for developer it's just like a single place where it declares this bill",
    "start": "352190",
    "end": "357740"
  },
  {
    "text": "spec so the controller like in this case the build controller they keep if it has",
    "start": "357740",
    "end": "363680"
  },
  {
    "text": "the smarts can actually like kick off another builds another spec in this case",
    "start": "363680",
    "end": "370099"
  },
  {
    "text": "the deployment spec to take a compile and build binary and deploy it into the",
    "start": "370099",
    "end": "376460"
  },
  {
    "text": "Kuban it is cluster so the thing which embodies that is the deployment spec this is a stock given resub jecht and",
    "start": "376460",
    "end": "382669"
  },
  {
    "text": "obviously there's a deployment controller which comes as part of the cube machinery which watches on the",
    "start": "382669",
    "end": "387949"
  },
  {
    "text": "deployment objects the deployment basically says a you have a set of deployed parts and this is a new version",
    "start": "387949",
    "end": "393770"
  },
  {
    "text": "of the containers which i want to deploy on top of that the deployments",
    "start": "393770",
    "end": "399499"
  },
  {
    "text": "controller it looks at this information and it actually like powers it actually",
    "start": "399499",
    "end": "404839"
  },
  {
    "text": "creates like a bunch of replication specs or like other additional objects to deploy your application so that again",
    "start": "404839",
    "end": "412039"
  },
  {
    "text": "is watched by the replication controller which indeed in turn goes and creates a pot spec which is watched by the",
    "start": "412039",
    "end": "417679"
  },
  {
    "text": "scheduler the scheduler sees like you know there's a new part which is come up and these are all objects by the way all",
    "start": "417679",
    "end": "424099"
  },
  {
    "text": "these specs are just specs in the API server and all these controllers are watching the API server and they see",
    "start": "424099",
    "end": "429259"
  },
  {
    "text": "additional information getting created in the case of the part spec when the replication controller creates a part",
    "start": "429259",
    "end": "435499"
  },
  {
    "text": "spec there is no information about the the actual node where the part has to be run that information is filled in by the",
    "start": "435499",
    "end": "442519"
  },
  {
    "text": "scheduler which is also another controller so it puts it figures like where it has to be running and it",
    "start": "442519",
    "end": "447769"
  },
  {
    "text": "creates an entry into the pot spec and finally like there are the the node the controllers which are running on the",
    "start": "447769",
    "end": "453739"
  },
  {
    "text": "nodes this cubelet and the queue proxy they watch on the part spec and they realize that they have to be running",
    "start": "453739",
    "end": "459529"
  },
  {
    "text": "this particular load and then they really they run it they download the binaries from the cube the repos the",
    "start": "459529",
    "end": "466909"
  },
  {
    "text": "docker repos and a part runs on the node so this is how cuban artists deals with",
    "start": "466909",
    "end": "472909"
  },
  {
    "text": "you know specs and like how do you how you create your own controllers to deal",
    "start": "472909",
    "end": "479779"
  },
  {
    "text": "with various in e scenarios so we have taken the same approach and like in a we",
    "start": "479779",
    "end": "486349"
  },
  {
    "text": "are wanting to use the same approach with kubernetes takes to manage your applications to manage these clusters",
    "start": "486349",
    "end": "492409"
  },
  {
    "text": "themself to understand that part a little bit I have to just tell you like how you know the things are laid out at",
    "start": "492409",
    "end": "499099"
  },
  {
    "text": "eBay from an infrastructure side so we have a bunch of regions where we operate",
    "start": "499099",
    "end": "505759"
  },
  {
    "text": "our data centers in they are spirit you know for geographical reasons like if they're spread you closer to the",
    "start": "505759",
    "end": "511459"
  },
  {
    "text": "customers and stuff like that and within the each within each regions you have one or many available reasons",
    "start": "511459",
    "end": "516800"
  },
  {
    "text": "these are fault unit fall domain units where you recommend applications to be",
    "start": "516800",
    "end": "523669"
  },
  {
    "text": "in different availability zones for them to be highly available in light of any global failures or like in local",
    "start": "523669",
    "end": "530209"
  },
  {
    "text": "failures sorry so each of these availability zones are powered by one or many providers so in",
    "start": "530209",
    "end": "537130"
  },
  {
    "text": "our case we have OpenStack we have legacy like a bunch of like IAS primitives which are powering all this",
    "start": "537130",
    "end": "544170"
  },
  {
    "text": "availability zones so our cluster deployment leverages the underlying",
    "start": "544170",
    "end": "551200"
  },
  {
    "text": "infrastructure for that so we have like availability zones like like I mentioned",
    "start": "551200",
    "end": "557740"
  },
  {
    "text": "earlier and it in each of these availability zones we have this network segments which are created for placing",
    "start": "557740",
    "end": "566140"
  },
  {
    "text": "the cluster zone so in this example we are talking about like you know in one availability zone it has like two two",
    "start": "566140",
    "end": "574090"
  },
  {
    "text": "zones like we have a prods on and a def zone there segmented through some kind",
    "start": "574090",
    "end": "579460"
  },
  {
    "text": "of Sdn or other network segmentation mechanism most most of the times we use",
    "start": "579460",
    "end": "585310"
  },
  {
    "text": "software itself to segment those so the one example to think about that is like if you are in Amazon this is the V PC",
    "start": "585310",
    "end": "590590"
  },
  {
    "text": "constructs which you're talking about so each car is in a single V PC in our case this is like a we prominently use",
    "start": "590590",
    "end": "597430"
  },
  {
    "text": "OpenStack in our cloud so this will be a set of routers and the network segments which OpenStack exposes each of our",
    "start": "597430",
    "end": "604300"
  },
  {
    "text": "clusters like have the full set of those things and at some point in time like we",
    "start": "604300",
    "end": "612430"
  },
  {
    "text": "haven't done it yet we will have all the the Federation API server which connects all these clusters into one single unit",
    "start": "612430",
    "end": "618760"
  },
  {
    "text": "so that is like you know how you want to go so to managing to manage all these",
    "start": "618760",
    "end": "625660"
  },
  {
    "text": "different things we have built a component which we finally call it cube master the test",
    "start": "625660",
    "end": "631630"
  },
  {
    "text": "master so test is like the internal code name which we have for our the personal management solution and master obviously",
    "start": "631630",
    "end": "639040"
  },
  {
    "text": "because it's managing a bunch of these clusters all across the globe so it has",
    "start": "639040",
    "end": "645130"
  },
  {
    "text": "a bunch of responsibilities like you know and each of them are sufficiently compact in its own merits and we are",
    "start": "645130",
    "end": "650890"
  },
  {
    "text": "going to talk about some of these in the later sessions so let's talk about like",
    "start": "650890",
    "end": "656230"
  },
  {
    "text": "you know as an operator what are the major areas where we have to deal with starting with networking which is you",
    "start": "656230",
    "end": "662200"
  },
  {
    "text": "know probably predominantly one of the complex aspects of like our",
    "start": "662200",
    "end": "668130"
  },
  {
    "text": "infrastructure so the challenges we face in this area are like the following like",
    "start": "668140",
    "end": "673660"
  },
  {
    "text": "in do we have multiple networking models we have a flat layer 3 model which we dominantly like you know run our",
    "start": "673660",
    "end": "679570"
  },
  {
    "text": "production and you know the the real business critical workloads on we also have like you know a variety of overlay",
    "start": "679570",
    "end": "685780"
  },
  {
    "text": "based Sdn solutions which are there which runs like you know not so critical application no workloads like the dev",
    "start": "685780",
    "end": "692520"
  },
  {
    "text": "workloads and other experimentation workloads we have this legacy data",
    "start": "692520",
    "end": "698560"
  },
  {
    "text": "centers XZ infrastructure so we whatever solution we come up with has to operate and interoperate with that and we also",
    "start": "698560",
    "end": "705760"
  },
  {
    "text": "have this requirement that every single networking layer which we come up with has to share the single global private",
    "start": "705760",
    "end": "712300"
  },
  {
    "text": "IP space so the last one the global private IP space itself causes you know",
    "start": "712300",
    "end": "717760"
  },
  {
    "text": "some issues for managing the Kuban IDs the first thing is like in a Cuban this assumes a private a suitor block per",
    "start": "717760",
    "end": "726580"
  },
  {
    "text": "node if you look at the default implementation of humanities you say oh and again it has to have a network IP",
    "start": "726580",
    "end": "732220"
  },
  {
    "text": "block per host well in our case we have as I mentioned earlier we have like one",
    "start": "732220",
    "end": "737950"
  },
  {
    "text": "large IP space for everyone and then that is not going to work in our case because we easily will run out of the",
    "start": "737950",
    "end": "744160"
  },
  {
    "text": "IPS which we have and to prove and Cuban is such a flexible framework we were",
    "start": "744160",
    "end": "749260"
  },
  {
    "text": "able to actually abstract out the idea of like IP blocks per host two IP blocks",
    "start": "749260",
    "end": "754840"
  },
  {
    "text": "per whatever we are calling in an arbitrary network scope so we created",
    "start": "754840",
    "end": "760180"
  },
  {
    "text": "this new object called Network scope and we assign IP addressing to that scopes",
    "start": "760180",
    "end": "765280"
  },
  {
    "text": "and all the nodes in our systems get attached to this network scope so that is a how we have planned this particular",
    "start": "765280",
    "end": "773650"
  },
  {
    "text": "problem of not having to have IP blocks per host we also wrote an eye pam an IP",
    "start": "773650",
    "end": "780130"
  },
  {
    "text": "allocation management system on top of that so our IP allocation management system also leverages the cube machinery",
    "start": "780130",
    "end": "786190"
  },
  {
    "text": "and it works somewhat like this so the cluster administrator creates these",
    "start": "786190",
    "end": "791500"
  },
  {
    "text": "network scopes these network scopes are basically objects which are living in the API server space just like any other",
    "start": "791500",
    "end": "798220"
  },
  {
    "text": "cube of you know objects themself are and each of the nodes which approach into the the",
    "start": "798220",
    "end": "803870"
  },
  {
    "text": "clustered polls get associated with this network scopes and our I Pam actually is also another controller a",
    "start": "803870",
    "end": "809300"
  },
  {
    "text": "default Cuban DS controller which runs in the Cuban it is a cluster what it",
    "start": "809300",
    "end": "815570"
  },
  {
    "text": "does is like when scheduler assigns like a part to a particular node our ipam controller kicks in and figures out like",
    "start": "815570",
    "end": "821690"
  },
  {
    "text": "you know where that node is going to land in and it allow a locates an IP based on the location pool which is tied",
    "start": "821690",
    "end": "827030"
  },
  {
    "text": "to the node so this helps us like you know not have any requirements to",
    "start": "827030",
    "end": "833900"
  },
  {
    "text": "pre-allocate IP addresses to a particular node we can have a large pool of IP addresses however we want and then",
    "start": "833900",
    "end": "839150"
  },
  {
    "text": "we can assign the IPS from that block to a particular node of our choice so that",
    "start": "839150",
    "end": "846140"
  },
  {
    "text": "is like the networking challenge just like partly the you know quite a bit of like more complexities there I don't",
    "start": "846140",
    "end": "852380"
  },
  {
    "text": "want to go into all the details but we can talk about getting up to the talk the other set of challenges we have are",
    "start": "852380",
    "end": "857570"
  },
  {
    "text": "the cluster management challenges itself how do we set up like these clusters as I mentioned earlier we have many",
    "start": "857570",
    "end": "864140"
  },
  {
    "text": "available reasons many network zones many data centers like and we have many",
    "start": "864140",
    "end": "869450"
  },
  {
    "text": "many many clusters we are setting up so it's a chore to like actually manage all the state across like all these clusters",
    "start": "869450",
    "end": "875390"
  },
  {
    "text": "because as the SU would know each of these clusters would come up with its own cluster management components and",
    "start": "875390",
    "end": "880430"
  },
  {
    "text": "that's own version of like in software which as which it has to run there's a lot of bits which are moving there are",
    "start": "880430",
    "end": "886790"
  },
  {
    "text": "add-ons there's a configuration state and on the top of it do you have like the Federated state which is coming up so all these things have to be managed",
    "start": "886790",
    "end": "893240"
  },
  {
    "text": "obviously this is a space where a lot of tools exist you have chefs puppet ansible but none of them like you know",
    "start": "893240",
    "end": "900130"
  },
  {
    "text": "it gives us like the the declarative primitives to operate them like cuba",
    "start": "900130",
    "end": "905420"
  },
  {
    "text": "Nettie's does so we decided to like you know build as part of our test master we decided to build an object model which",
    "start": "905420",
    "end": "910700"
  },
  {
    "text": "roughly looks somewhat like this so we have an object which is called cluster which represents the the the needs of a",
    "start": "910700",
    "end": "919460"
  },
  {
    "text": "cluster for example what is the the domain which the cluster exposes so we numerically named our clusters so we",
    "start": "919460",
    "end": "925790"
  },
  {
    "text": "would have like in a cluster number 100 so then the hundred dot you know the Tesla Rio that is like our internal",
    "start": "925790",
    "end": "932240"
  },
  {
    "text": "core name that will be the name which we would want to create for the clusters and each clusters would have certain",
    "start": "932240",
    "end": "937760"
  },
  {
    "text": "storage class requirements certeyn resource like in capabilities so all those information about that gets",
    "start": "937760",
    "end": "944210"
  },
  {
    "text": "encoded into the cluster not just that it also like tells the operator can",
    "start": "944210",
    "end": "949250"
  },
  {
    "text": "declare which provider it needs to work with or what is the region it has to",
    "start": "949250",
    "end": "954770"
  },
  {
    "text": "work with so you specify all these details into the cluster object and there's a second set of objects which",
    "start": "954770",
    "end": "961400"
  },
  {
    "text": "are called compute node pools so these are if you would like the flavors in",
    "start": "961400",
    "end": "966980"
  },
  {
    "text": "Amazon or like you know flavors in OpenStack where you say oh I need to like get a bare-metal servers which are",
    "start": "966980",
    "end": "973580"
  },
  {
    "text": "of this size it's got like you know sixty cores or like you know finder GB of RAM and there's a set of these nodes",
    "start": "973580",
    "end": "980570"
  },
  {
    "text": "which I want to be part of this cluster there could be multiple such things that are part of our cluster but you represent them using the compute node",
    "start": "980570",
    "end": "987110"
  },
  {
    "text": "Falls and obviously it has got corresponding aspects of the the",
    "start": "987110",
    "end": "992420"
  },
  {
    "text": "specification of the machines they have the placement selectors and other",
    "start": "992420",
    "end": "997450"
  },
  {
    "text": "aspects which allows us to get the right machines to add into the cluster we also",
    "start": "997450",
    "end": "1004720"
  },
  {
    "text": "have the OS image spec which determines the operating system which you want to lay down on this thing so with all those",
    "start": "1004720",
    "end": "1011800"
  },
  {
    "text": "things this is lovely like how the the classification flow would look in our scenario the adminstrator create a",
    "start": "1011800",
    "end": "1019390"
  },
  {
    "text": "cluster spec across the spec as I mentioned is not just one it's a bunch of those objects which I showed it short",
    "start": "1019390",
    "end": "1025360"
  },
  {
    "text": "earlier so the post this cuts a spec into a mini cube or which is like",
    "start": "1025360",
    "end": "1031660"
  },
  {
    "text": "something which runs locally on your laptop or it could actually use an existing cluster which is already",
    "start": "1031660",
    "end": "1037930"
  },
  {
    "text": "running but as you'd notice both of them have the test master control a controller running in both places the",
    "start": "1037930",
    "end": "1044438"
  },
  {
    "text": "orange in that these are the controllers which are watching for the existing extents of this faster specs so the",
    "start": "1044439",
    "end": "1052570"
  },
  {
    "text": "atmosphere like you know proteins is bought this specs onto the clusters let's assume that it's a mini cube which",
    "start": "1052570",
    "end": "1059350"
  },
  {
    "text": "is locally onto your box so that the the controller component gets a hold of the the expectation which the user has",
    "start": "1059350",
    "end": "1065970"
  },
  {
    "text": "and it actually knows which provider to contact because all the information encoded into the cluster and it brings",
    "start": "1065970",
    "end": "1071880"
  },
  {
    "text": "up a cluster based on all this respect which it has and not just that once it",
    "start": "1071880",
    "end": "1078300"
  },
  {
    "text": "is provision it actually moves a controller over to the new cluster and it also moves all the specs into the new",
    "start": "1078300",
    "end": "1084360"
  },
  {
    "text": "cluster and then at that point of time the controller will start watching the",
    "start": "1084360",
    "end": "1089760"
  },
  {
    "text": "specs which it is managing in the same cluster where it is running so this is what is called a self hosting you know",
    "start": "1089760",
    "end": "1095670"
  },
  {
    "text": "you host all the the components which are required for managing the Cuban is cluster bezel for stood along with given",
    "start": "1095670",
    "end": "1102000"
  },
  {
    "text": "is itself so like that is like the so we",
    "start": "1102000",
    "end": "1108930"
  },
  {
    "text": "just talked about the cluster set up like complexities so after that like that the number one complexity for us is",
    "start": "1108930",
    "end": "1116190"
  },
  {
    "text": "like the hosts runtime itself these are the operating system bits which we are talking about so if you if you ask",
    "start": "1116190",
    "end": "1122820"
  },
  {
    "text": "things have progressed over this years the complexities have been moving more and more into the host which you are",
    "start": "1122820",
    "end": "1128100"
  },
  {
    "text": "dealing with so now like a host has to deal with a lot on lot of like you know things for example the cubelet and the",
    "start": "1128100",
    "end": "1133560"
  },
  {
    "text": "queue proxy two interesting things they both run on the host you have the networking plugins which are running on",
    "start": "1133560",
    "end": "1138660"
  },
  {
    "text": "the host we have to manage the keys and other security aspects we have local storage we have queue isolation logging",
    "start": "1138660",
    "end": "1144690"
  },
  {
    "text": "monitoring Damons a ton of stuff happens on the horse and its you know managing these host images and stuff like stuff",
    "start": "1144690",
    "end": "1153450"
  },
  {
    "text": "are like in really really complex and in also like when you think about how",
    "start": "1153450",
    "end": "1159030"
  },
  {
    "text": "frequently we have to upgrade each of those components it becomes like a big effort in itself so our solution to that",
    "start": "1159030",
    "end": "1164940"
  },
  {
    "text": "is like to use a minimalistic OS like we use fedora atomic fedora but this is roughly how it happens we have an open",
    "start": "1164940",
    "end": "1172200"
  },
  {
    "text": "oh is repo mirror and we take a snapshot of that you know so that we can freeze",
    "start": "1172200",
    "end": "1177780"
  },
  {
    "text": "them in time and out of this frozen time snapshots like we create what are called the oyster Erie post so os3 repost is",
    "start": "1177780",
    "end": "1185310"
  },
  {
    "text": "like a fedora atomic fedora you know construct which allows you to package your operating system binary and you",
    "start": "1185310",
    "end": "1191940"
  },
  {
    "text": "know exactly like all the packages and their respective versions and it's like signed image so you know what is in the images you are",
    "start": "1191940",
    "end": "1199110"
  },
  {
    "text": "dealing with what we do like once you create this create this image is also to push it into container registry so the",
    "start": "1199110",
    "end": "1205950"
  },
  {
    "text": "entire operating system bits and the repository for that are available as the container and with this particular image",
    "start": "1205950",
    "end": "1212340"
  },
  {
    "text": "we actually use a hash e Corp Packer tool to create like a base image for our",
    "start": "1212340",
    "end": "1217950"
  },
  {
    "text": "cloud which is OpenStack so you start with the known good set of an operating",
    "start": "1217950",
    "end": "1223530"
  },
  {
    "text": "system you create a binary which is specific to our cloud and the push that into the OpenStack lands and once the",
    "start": "1223530",
    "end": "1230520"
  },
  {
    "text": "compute nodes all the new compute nodes which are going to provision will use that particular image for getting the as",
    "start": "1230520",
    "end": "1237750"
  },
  {
    "text": "we add more nodes to the cluster that is what we use but what about the existing ones the existing applications the",
    "start": "1237750",
    "end": "1243900"
  },
  {
    "text": "company its existing operating systems which you have on the cluster will actually talk to the OS tree repo which",
    "start": "1243900",
    "end": "1250410"
  },
  {
    "text": "is also running as a container in our cluster to get the latest updates so you just restart them using your deployment",
    "start": "1250410",
    "end": "1257490"
  },
  {
    "text": "construct and then all of them lagina gets up to the latest date so that flow goes like that an administrator goes and",
    "start": "1257490",
    "end": "1264390"
  },
  {
    "text": "create a deployment spec a deployment spec will in turn goes and creates and changes the node spec and each node spec",
    "start": "1264390",
    "end": "1270870"
  },
  {
    "text": "has the corresponding node which it is watching so when you change the operating system on one of the snowed",
    "start": "1270870",
    "end": "1276510"
  },
  {
    "text": "the node controller does the right things on the back to contact though you know the machine and get it patched up",
    "start": "1276510",
    "end": "1283560"
  },
  {
    "text": "with the latest version of the operating system which we want it to have well in our case like the operating system has",
    "start": "1283560",
    "end": "1289410"
  },
  {
    "text": "like most of the binaries pre-baked in for example docker is pre-baked in and most of the bits are already pre-baked",
    "start": "1289410",
    "end": "1295200"
  },
  {
    "text": "into that image our policy is like to run pretty much everything into that in that mode and every components which you",
    "start": "1295200",
    "end": "1303030"
  },
  {
    "text": "want to run on the top of that runs as regular parts or you know in rare cases docker containers so nothing changes",
    "start": "1303030",
    "end": "1309450"
  },
  {
    "text": "like your host operating system so in",
    "start": "1309450",
    "end": "1314880"
  },
  {
    "text": "addition to these are like the couple of three areas like in a networking the cluster management and the host operating system ends when are the three",
    "start": "1314880",
    "end": "1321150"
  },
  {
    "text": "areas where we have defined models for us to operate these clusters but we also have application modeling challenges",
    "start": "1321150",
    "end": "1326850"
  },
  {
    "text": "like you know eBay application developers are you know they use a set of known internal models so when they move to the",
    "start": "1326850",
    "end": "1333740"
  },
  {
    "text": "Cuban it is kind of mode they also have to deal with the existing internal tools",
    "start": "1333740",
    "end": "1340040"
  },
  {
    "text": "so we have we are in the process of writing these internal models to declare",
    "start": "1340040",
    "end": "1346370"
  },
  {
    "text": "the aspects of application we have a well understood notion internally of what an application means so we have",
    "start": "1346370",
    "end": "1351830"
  },
  {
    "text": "encoded all those things as specs so a user would use the cube CTL command and use create application and you get an",
    "start": "1351830",
    "end": "1358550"
  },
  {
    "text": "application and he declares what all he wants inside that and our controllers like we'll go realize that information",
    "start": "1358550",
    "end": "1364550"
  },
  {
    "text": "in all the respective systems with an ebay to make sure that you know it's all good for the user to go also like in if",
    "start": "1364550",
    "end": "1373850"
  },
  {
    "text": "we have internal models we write we have a state singer which actually is another controller which sings to state from API",
    "start": "1373850",
    "end": "1379610"
  },
  {
    "text": "server and you know populates our internal data store for all the operational aspects we also had to write",
    "start": "1379610",
    "end": "1389000"
  },
  {
    "text": "a lot of at Mission Control respects so there was a leg you know when you operate a site like eBay there are lots of controls which we have had to put in",
    "start": "1389000",
    "end": "1396170"
  },
  {
    "text": "the past all those things like has to translate down because we are letting",
    "start": "1396170",
    "end": "1402020"
  },
  {
    "text": "users directly deal with Cuban IDs so all those controls we are using the admission controls that's a feature",
    "start": "1402020",
    "end": "1408710"
  },
  {
    "text": "which given it is has where on can write a pluggable solution which allows us to",
    "start": "1408710",
    "end": "1413720"
  },
  {
    "text": "you like in a control like for example we will only allow the image if it is scanned for any vulnerabilities and if",
    "start": "1413720",
    "end": "1419270"
  },
  {
    "text": "it is signed by a QA for running in production so all those kind of situation we handled through admission",
    "start": "1419270",
    "end": "1426140"
  },
  {
    "text": "control specs so this is another aspect which you are currently implementing so",
    "start": "1426140",
    "end": "1432200"
  },
  {
    "text": "the ingress becky's like a spec which Kuban it is has but like if you have",
    "start": "1432200",
    "end": "1437240"
  },
  {
    "text": "looked at it like there is a default implementation for GK obviously we don't run we don't have all those things",
    "start": "1437240",
    "end": "1443690"
  },
  {
    "text": "internally so we implement our own spec using our own internal tools like so",
    "start": "1443690",
    "end": "1448700"
  },
  {
    "text": "OpenStack if you're using OpenStack that elbe service will be Elbaz so we have variety of those will be services we",
    "start": "1448700",
    "end": "1455179"
  },
  {
    "text": "implement English controller to like have our own DNS our own L load balancers and we run all the else",
    "start": "1455179",
    "end": "1461400"
  },
  {
    "text": "as regular parts but an extension of this actually is like you know to do the",
    "start": "1461400",
    "end": "1466950"
  },
  {
    "text": "entire thing we don't we are planning to get to this model where we don't even need any physical Road bounces but you",
    "start": "1466950",
    "end": "1472530"
  },
  {
    "text": "know do the whole thing using the regular come already hardware using like you know Cuban Aries we're all there for",
    "start": "1472530",
    "end": "1477930"
  },
  {
    "text": "traffic direction and the l7 complexities are all handled as Cupid in these constructs and if you look at the",
    "start": "1477930",
    "end": "1484170"
  },
  {
    "text": "the cue proxy and other things there's they they are like almost there with some minimum changes I think we are we",
    "start": "1484170",
    "end": "1491130"
  },
  {
    "text": "are hoping that we can get to this model where we don't have to have physical Hardware physical load balancers and",
    "start": "1491130",
    "end": "1497400"
  },
  {
    "text": "other bits in our data center and yeah",
    "start": "1497400",
    "end": "1504360"
  },
  {
    "text": "in summary so for us like cube rocks like it's one of the awesome pieces of",
    "start": "1504360",
    "end": "1509370"
  },
  {
    "text": "software out there we can you know bend and you know change whatever we need behind the scenes to make it operational",
    "start": "1509370",
    "end": "1515160"
  },
  {
    "text": "in our situation the good part is like even after all those things the experience which the developer gets is",
    "start": "1515160",
    "end": "1521190"
  },
  {
    "text": "like pristine it's the same experience they should get on GCE that they can expect you know even",
    "start": "1521190",
    "end": "1527040"
  },
  {
    "text": "internally to us so the API missionary which it provides it's just pretty",
    "start": "1527040",
    "end": "1533460"
  },
  {
    "text": "awesome like you know you can write your own specs you can write your own controllers and you don't even have to use cuban at ease it does not even have",
    "start": "1533460",
    "end": "1540360"
  },
  {
    "text": "to be cuban at ease we are using it for many other purposes so my co-workers who these like you know",
    "start": "1540360",
    "end": "1546060"
  },
  {
    "text": "going to talk about how we are using the cube api machinery to build complex you",
    "start": "1546060",
    "end": "1551850"
  },
  {
    "text": "know policy languages and policy enforcement engines but that's nothing to do with cuban it is like you know it",
    "start": "1551850",
    "end": "1557670"
  },
  {
    "text": "it exists it can exist outside of cuban it is so it's pretty powerful framework in itself so you know please check it",
    "start": "1557670",
    "end": "1564210"
  },
  {
    "text": "out and we are also like you know seriously considering like open sourcing all the",
    "start": "1564210",
    "end": "1570000"
  },
  {
    "text": "tools which you have built like over this next few months will be like actively working on trying to see if we",
    "start": "1570000",
    "end": "1575430"
  },
  {
    "text": "can open source it and see if we can have a set of end users would love to use the same tools as us and then you",
    "start": "1575430",
    "end": "1583110"
  },
  {
    "text": "know go from there so that's pretty much it like in caissons",
    "start": "1583110",
    "end": "1590270"
  },
  {
    "text": "yep",
    "start": "1590429",
    "end": "1592820"
  },
  {
    "text": "so even has like a set of like existing plot scale monitoring solution but for",
    "start": "1597220",
    "end": "1604240"
  },
  {
    "text": "certain small clusters we also use Prometheus you know only for the Kuban",
    "start": "1604240",
    "end": "1612010"
  },
  {
    "text": "is there because for the application like there are like you know you know so many other complexities and scale is like a big issue so we leverage existing",
    "start": "1612010",
    "end": "1619780"
  },
  {
    "text": "solutions for that yeah so we have an",
    "start": "1619780",
    "end": "1630670"
  },
  {
    "text": "existing interface so for all the predominant line and good flows like you know which are the eBay flows there's a",
    "start": "1630670",
    "end": "1636910"
  },
  {
    "text": "good a pass layer which we have so we will continue to have those kind of layers but when you have applications which does not fit like in the keynote",
    "start": "1636910",
    "end": "1643870"
  },
  {
    "text": "as I said there are lots of applications which does not fit the paradigm of pass so for those like we are going to expose",
    "start": "1643870",
    "end": "1649780"
  },
  {
    "text": "like the the cube CTL command line itself but not just the standard cube seal but with souped up with all those",
    "start": "1649780",
    "end": "1655180"
  },
  {
    "text": "additional objects and stuff like that if you're an operator you get like all the cluster objects compute node pools",
    "start": "1655180",
    "end": "1660550"
  },
  {
    "text": "and all the other things so if you're an application developer you get application and other objects which you yeah we are writing or on CLI salsa yeah",
    "start": "1660550",
    "end": "1673529"
  },
  {
    "text": "so the the clusters vary from anywhere from hundred physical servers to you",
    "start": "1679110",
    "end": "1685200"
  },
  {
    "text": "know 200 300 so our plans are to accelerate you like in thousands of servers we are just in the early stages of that so our typical sizes are like 5",
    "start": "1685200",
    "end": "1693840"
  },
  {
    "text": "K to 10 K that's like size of this clusters which you are looking to get to but right now it's like 200 300",
    "start": "1693840",
    "end": "1700860"
  },
  {
    "text": "something like that so it's not based on",
    "start": "1700860",
    "end": "1710659"
  },
  {
    "text": "so like each availability zone we typically love to run a single cube clusters so our availability zones are",
    "start": "1710659",
    "end": "1717000"
  },
  {
    "text": "like you know let's fight 5 to 10k physical servers so you know if cube scales and everything scales we would",
    "start": "1717000",
    "end": "1722580"
  },
  {
    "text": "love to have that and that is that size is determined by like you know how much you wanna invest in one availability",
    "start": "1722580",
    "end": "1728399"
  },
  {
    "text": "zone because more the computing put it could run more application but the failure domain is going to be bigger so we have to be judicious about that",
    "start": "1728399",
    "end": "1735080"
  },
  {
    "text": "doesn't answer it is yeah",
    "start": "1735080",
    "end": "1740450"
  },
  {
    "text": "yeah yeah yeah so if you're the so if",
    "start": "1753270",
    "end": "1759460"
  },
  {
    "text": "you look at the the new project for called K or PS cops from Cuba notice they also like started doing that you",
    "start": "1759460",
    "end": "1765610"
  },
  {
    "text": "know the similar approaches of doing you know creating classes based on a declared respect it's no different than",
    "start": "1765610",
    "end": "1771220"
  },
  {
    "text": "the cube parts or anything else right you declare a part and cube realizes the part for you in our case you declare in",
    "start": "1771220",
    "end": "1776950"
  },
  {
    "text": "a cluster and the node poles and it actually goes and creates these you know bits behind the scenes",
    "start": "1776950",
    "end": "1784140"
  },
  {
    "text": "so right now like there are like bunch of clusters so that is what Federation is going to solve right you and all this",
    "start": "1805290",
    "end": "1812040"
  },
  {
    "text": "versus into Federation and then you specify like what you know envy you want to run it as a label or some other way",
    "start": "1812040",
    "end": "1818490"
  },
  {
    "text": "or like you can even we are thinking about right writing like the admission controllers like which default these",
    "start": "1818490",
    "end": "1824190"
  },
  {
    "text": "values for example if you know that Custer is earmarked for you know one particular purpose then every object",
    "start": "1824190",
    "end": "1830700"
  },
  {
    "text": "which gets created will automatically get annotated with that value and then you know it takes out of it eventually",
    "start": "1830700",
    "end": "1837360"
  },
  {
    "text": "like anybody want to run all these different environments in a single cluster but I don't think we are there",
    "start": "1837360",
    "end": "1843000"
  },
  {
    "text": "yet so that was like a ways to go but that is the goal ultimate goal is to get there yeah so if you delete the cluster",
    "start": "1843000",
    "end": "1859950"
  },
  {
    "text": "object it just gets really did it goes to the decom for flow like you know but a cluster itself is not significant it",
    "start": "1859950",
    "end": "1867450"
  },
  {
    "text": "alone I mean enough right so there are other bits which makes up the cluster for example the the different type of",
    "start": "1867450",
    "end": "1872820"
  },
  {
    "text": "compute node pools which makes up the Dominions so you could have like let's say a GPU compute node cluster so",
    "start": "1872820",
    "end": "1880169"
  },
  {
    "text": "another one which is like earmark for storage you know these are all compute node pools and then you have like a",
    "start": "1880169",
    "end": "1885780"
  },
  {
    "text": "large pool of like general you know computing cost you know pools so they are all part of like the same cluster",
    "start": "1885780",
    "end": "1891240"
  },
  {
    "text": "and they can independently be flexible and flex the out so for example I want to like say add another five or fifty",
    "start": "1891240",
    "end": "1897660"
  },
  {
    "text": "nodes into that you know you change the node pool spec to say that you expect 50 more and that will drive the back in",
    "start": "1897660",
    "end": "1904140"
  },
  {
    "text": "opposition to create more compute nodes run all the software's which are on in needed for running the cubelet and other",
    "start": "1904140",
    "end": "1910559"
  },
  {
    "text": "things and then join it to the cluster you know this is only for operators those are operating models like you know",
    "start": "1910559",
    "end": "1916650"
  },
  {
    "text": "and it's a back protector",
    "start": "1916650",
    "end": "1919850"
  },
  {
    "text": "so Federation so all the Cuban ADIZ clusters come with its own control plane",
    "start": "1928250",
    "end": "1933600"
  },
  {
    "text": "if you would so all the HCD and all the master components they're all in each",
    "start": "1933600",
    "end": "1940800"
  },
  {
    "text": "cluster has its own copy of that but obviously like if you have tens of clusters like user would have to know",
    "start": "1940800",
    "end": "1946380"
  },
  {
    "text": "like a lot of details for example application developer say said run this application like in the three regions",
    "start": "1946380",
    "end": "1951990"
  },
  {
    "text": "right you could actually go and look up all the clusters independently and then go deploy your application in each one",
    "start": "1951990",
    "end": "1958050"
  },
  {
    "text": "of them or ideally you would go to a single place and say we run this application so that is where the",
    "start": "1958050",
    "end": "1963120"
  },
  {
    "text": "Federation is coming in",
    "start": "1963120",
    "end": "1966290"
  },
  {
    "text": "all your addition is a Cuban it is feature so like with 1.5 it's going to be like in almost full fledge okay cool",
    "start": "1976660",
    "end": "1986050"
  },
  {
    "text": "let's take this no more kitchens the",
    "start": "1986050",
    "end": "1997270"
  },
  {
    "text": "operating system you mean yeah yeah so it's a time ago it's like right now there's no hard dependency on any of",
    "start": "1997270",
    "end": "2004230"
  },
  {
    "text": "those things so that you can write a new controller which you know understand and different operating systems upgrade",
    "start": "2004230",
    "end": "2009600"
  },
  {
    "text": "procedures the specs does not change that much it's just like.how so that's the beauty of it right the spec if you",
    "start": "2009600",
    "end": "2015750"
  },
  {
    "text": "are designing it properly like then you don't have your the only thing you are changing your the controllers themselves not the spec so you can yeah okay so we",
    "start": "2015750",
    "end": "2030020"
  },
  {
    "text": "we have like a as the insulation which you use internally and then we typically",
    "start": "2030020",
    "end": "2037080"
  },
  {
    "text": "like knit into favor the flat layer 3 Network so namespaces like so we ought",
    "start": "2037080",
    "end": "2045900"
  },
  {
    "text": "to create namespace so when you log in based on your record inches like the",
    "start": "2045900",
    "end": "2051240"
  },
  {
    "text": "authorization token which you have we figure out like the the your association",
    "start": "2051240",
    "end": "2057120"
  },
  {
    "text": "to some groups and you create namespaces automatically for you you can also create your own as many number of namespaces here so",
    "start": "2057120",
    "end": "2065179"
  },
  {
    "text": "well in its maturity curve right so you know we need to be comfortable at some point in time to run both because you",
    "start": "2077500",
    "end": "2084040"
  },
  {
    "text": "don't want the developer taking up all the space and you know preemption and other things are not yet there",
    "start": "2084040",
    "end": "2089108"
  },
  {
    "text": "so once the preemption and other features are there we would want to like you know run everything in one single",
    "start": "2089109",
    "end": "2094658"
  },
  {
    "text": "cluster that's a go cool thank you",
    "start": "2094659",
    "end": "2103200"
  }
]