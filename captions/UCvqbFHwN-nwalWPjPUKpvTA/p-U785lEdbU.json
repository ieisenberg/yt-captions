[
  {
    "text": "alrighty folks i think we're gonna go ahead and get started we're a few minutes past the hour of course",
    "start": "1680",
    "end": "6960"
  },
  {
    "text": "people will continue to trickle in and that's no issue whatsoever but we're gonna get things going",
    "start": "6960",
    "end": "12559"
  },
  {
    "text": "um good morning good afternoon good early afternoon good evening wherever",
    "start": "12559",
    "end": "17680"
  },
  {
    "text": "you're dialing in and joining us on the zoo meeting from from living rooms and from bedrooms",
    "start": "17680",
    "end": "23359"
  },
  {
    "text": "and from nooks and crannies of your house you never knew could fit a desk uh we're really glad that you're here to",
    "start": "23359",
    "end": "28560"
  },
  {
    "text": "join us today my name is spencer paul i'm the director of sales for do it international do it",
    "start": "28560",
    "end": "34880"
  },
  {
    "text": "it is actually do it as opposed to deut or do i t as you might have noticed on the",
    "start": "34880",
    "end": "40079"
  },
  {
    "text": "invitation it's a strange capitalization i can't claim responsibility for that but the",
    "start": "40079",
    "end": "45200"
  },
  {
    "text": "reason that we're here from from the doit perspective is we are a cncf organization ourselves we",
    "start": "45200",
    "end": "50879"
  },
  {
    "text": "employ a number of trainers and ambassadors and our main function uh for customers or or companies is to",
    "start": "50879",
    "end": "58320"
  },
  {
    "text": "help them test evaluate and potentially migrate between different clouds",
    "start": "58320",
    "end": "63600"
  },
  {
    "text": "along that journey you might use a number of different tools one of which we're here to discuss today",
    "start": "63600",
    "end": "68640"
  },
  {
    "text": "and it'll be in a lot more detail so i'd love to welcome our presenter today iran labe",
    "start": "68640",
    "end": "74479"
  },
  {
    "text": "the founder and vp of product management at the policy and i'll pass over to him in just a quick moment here",
    "start": "74479",
    "end": "81920"
  },
  {
    "text": "a few housekeeping items before we get started as we know no zoom meeting ever starts",
    "start": "81920",
    "end": "87840"
  },
  {
    "text": "on time and none finish on time usually either but that's all good we're going to have a couple ways of",
    "start": "87840",
    "end": "93600"
  },
  {
    "text": "making sure we can get you the information from this presentation afterward during the webinar however",
    "start": "93600",
    "end": "99040"
  },
  {
    "text": "you're not able to talk as an attendee it's not because we don't want to hear from you it's because we want to make sure this is uh organized in a way that's",
    "start": "99040",
    "end": "105360"
  },
  {
    "text": "respectful to all so there's a q a box in the bottom of your screen if you're not used to using zoom it's just going",
    "start": "105360",
    "end": "110640"
  },
  {
    "text": "to be on the bottom of that screen as you hover over the video and you can feel free to drop your questions in there and we'll get to as",
    "start": "110640",
    "end": "117040"
  },
  {
    "text": "many as we can at the end yes i mean we will have time dedicated to q a at the end",
    "start": "117040",
    "end": "122560"
  },
  {
    "text": "and my function apart from the introduction is to make sure i'm monitoring that cue so keep the questions coming",
    "start": "122560",
    "end": "128959"
  },
  {
    "text": "this is an official webinar of the cncf and as such is subject to the cncf code of contact please do not add",
    "start": "128959",
    "end": "136319"
  },
  {
    "text": "anything to the chat or questions that would be in violation of that code of contact in short be respectful of all of your",
    "start": "136319",
    "end": "143120"
  },
  {
    "text": "fellow participants and presenters please note that the recording and the slides will be posted later today",
    "start": "143120",
    "end": "150560"
  },
  {
    "text": "uh to the cncf webinar page which you all have the link to as well um so don't worry if you missed",
    "start": "150560",
    "end": "156720"
  },
  {
    "text": "any of the beginning or the middle or the end this will all be recorded for posterity and with that i'll hand it over to iran",
    "start": "156720",
    "end": "162879"
  },
  {
    "text": "to kick off today's presentation thank you spencer uh hello again",
    "start": "162879",
    "end": "167920"
  },
  {
    "text": "everyone it's a pleasure to be here today my name is iran labe and i'm here to speak about kubernetes policies",
    "start": "167920",
    "end": "175040"
  },
  {
    "text": "just fyi no prior knowledge is required to attend this webinar i'm going to try in the brief time that",
    "start": "175040",
    "end": "180959"
  },
  {
    "text": "we have to educate you to the best that i can about the subject let's see what's on our agenda today uh",
    "start": "180959",
    "end": "188560"
  },
  {
    "text": "first we'll start with some terminology so we all speak the same language second we'll double click",
    "start": "188560",
    "end": "194239"
  },
  {
    "text": "on the way kubernetes enforces policies in the cluster mainly at mission controllers third",
    "start": "194239",
    "end": "200400"
  },
  {
    "text": "we'll see if what we get is what we need and is it enough and lastly some",
    "start": "200400",
    "end": "206159"
  },
  {
    "text": "thoughts going and ideas going forward",
    "start": "206159",
    "end": "212159"
  },
  {
    "text": "so um heads up this is my first ever cncf webinar so you're in my premiere",
    "start": "212159",
    "end": "219120"
  },
  {
    "text": "um however it's not my first webinar ever i'm one of the founders and vp",
    "start": "219120",
    "end": "225200"
  },
  {
    "text": "product management at a policy as spencer mentioned and it's we're a kubernetes policy",
    "start": "225200",
    "end": "230560"
  },
  {
    "text": "orchestration solution um before that i co-founded whitebox security",
    "start": "230560",
    "end": "236000"
  },
  {
    "text": "where we built an amazing data access governance solution white box security was acquired in 2015",
    "start": "236000",
    "end": "241040"
  },
  {
    "text": "by cellphone technologies i started my journey about 20 years ago as a system programmer today you you",
    "start": "241040",
    "end": "248159"
  },
  {
    "text": "would probably call me devops my interests throughout my journey were focused",
    "start": "248159",
    "end": "253599"
  },
  {
    "text": "mainly around cyber security in general and more specifically around identity",
    "start": "253599",
    "end": "258639"
  },
  {
    "text": "access and policies you might even change that devops that we talked about the devsecops",
    "start": "258639",
    "end": "265040"
  },
  {
    "text": "and yes among my personal interests is lego and i really hope my wife isn't",
    "start": "265040",
    "end": "270320"
  },
  {
    "text": "listening right now because she would probably try to look at our amazon account and",
    "start": "270320",
    "end": "275360"
  },
  {
    "text": "see what did i order lately so without further ado let's get going",
    "start": "275360",
    "end": "281840"
  },
  {
    "text": "so cloud native change and still changes the world uh it gave everyone the freedom to work faster",
    "start": "281840",
    "end": "288000"
  },
  {
    "text": "release faster and be more efficient and there's nothing we all love more than efficiency it's very simple to start",
    "start": "288000",
    "end": "295440"
  },
  {
    "text": "with though it gets very complex very fast and it doesn't get it doesn't get go unnoticed i will",
    "start": "295440",
    "end": "301759"
  },
  {
    "text": "change the new stack quote here from likely to become an all-out chaos to is an all-out chaos",
    "start": "301759",
    "end": "311840"
  },
  {
    "text": "so let's focus on kubernetes it's probably one of the most notable cloud native projects",
    "start": "312000",
    "end": "317280"
  },
  {
    "text": "if not the most notable one and also this webinar is about kubernetes policies so we should",
    "start": "317280",
    "end": "323759"
  },
  {
    "text": "containerize workloads without orchestration becomes chaotic at scale working with kubernetes is easy just",
    "start": "323759",
    "end": "330960"
  },
  {
    "text": "define your workloads your desired state and kubernetes will take care of the rest kubernetes will schedule your workloads",
    "start": "330960",
    "end": "337680"
  },
  {
    "text": "for execution we'll reschedule them move them around when changes occur and make sure",
    "start": "337680",
    "end": "342720"
  },
  {
    "text": "everything is aligned according to your desired your desired state configuration",
    "start": "342720",
    "end": "347840"
  },
  {
    "text": "for some of us that install application clusters in the past that may seem like magic dynamic automated ephemeral that's the name of",
    "start": "347840",
    "end": "354720"
  },
  {
    "text": "the game here and that dynamic part is what makes it very very complex to at",
    "start": "354720",
    "end": "362400"
  },
  {
    "text": "scale so these charts actually speak for themselves containers are ephemeral by",
    "start": "362400",
    "end": "369039"
  },
  {
    "text": "design they are even more ephemeral when they're orchestrated their churn increases due to the automation",
    "start": "369039",
    "end": "374960"
  },
  {
    "text": "there's also proliferation of workloads with the introduction of microservices and serverless technologies",
    "start": "374960",
    "end": "381360"
  },
  {
    "text": "today we tend to break apps to smaller components and in turn that increases the ephemeral factor",
    "start": "381360",
    "end": "387039"
  },
  {
    "text": "with automation in place we can add more clusters making it more interesting and also more complex it's all good",
    "start": "387039",
    "end": "395360"
  },
  {
    "text": "we just need some order because what do you get from chaos plus chaos powered by chaos",
    "start": "395360",
    "end": "400800"
  },
  {
    "text": "all out chaos so let's see what kubernetes has to offer to bring order to this chaos",
    "start": "400800",
    "end": "409840"
  },
  {
    "text": "to get everyone on the same page i'll explain some kubernetes basics um and it's going to be very short so",
    "start": "410639",
    "end": "417199"
  },
  {
    "text": "kubernetes has many knobs and levers baked into the cluster control panel plane the control they control the",
    "start": "417199",
    "end": "425599"
  },
  {
    "text": "various behaviors of the cluster most of the time they have a very specific destination those controlled by the way might",
    "start": "425599",
    "end": "431919"
  },
  {
    "text": "implicitly influence other behavior and not specifically the one that the word only designed to",
    "start": "431919",
    "end": "437120"
  },
  {
    "text": "uh to address and that adds more complexity it's not always evident even to the",
    "start": "437120",
    "end": "444080"
  },
  {
    "text": "expert users how all of these play together and they can't even see the big picture",
    "start": "444080",
    "end": "449520"
  },
  {
    "text": "the flow here is very simple all access to the configuration database that's the lcd",
    "start": "449520",
    "end": "455199"
  },
  {
    "text": "goes through the api server the cube controller manager uses controllers with continuous loops",
    "start": "455199",
    "end": "461599"
  },
  {
    "text": "infinite loops if you may checking the current active configurations versus the desired state",
    "start": "461599",
    "end": "468160"
  },
  {
    "text": "it then tries to make the changes to guess to get us where we want to",
    "start": "468160",
    "end": "473840"
  },
  {
    "text": "so what's missing here seems like utopia right so can everyone just ask whatever they",
    "start": "473840",
    "end": "479039"
  },
  {
    "text": "want can the controller choose whichever strategy it wants to to use to get us to that point",
    "start": "479039",
    "end": "485759"
  },
  {
    "text": "that's why we have those policies",
    "start": "485759",
    "end": "492000"
  },
  {
    "text": "i'm gonna uh talk just for a second about policies versus configurations i often hear",
    "start": "492000",
    "end": "497199"
  },
  {
    "text": "people confused about these two especially in kubernetes and use them interchangeably so i thought it's a good",
    "start": "497199",
    "end": "503120"
  },
  {
    "text": "idea to make sure that we're all on the same page when it comes to these two in kubernetes",
    "start": "503120",
    "end": "508639"
  },
  {
    "text": "configurations define the desired state the desired behavior and desired state",
    "start": "508639",
    "end": "514320"
  },
  {
    "text": "parameters for a specific object for example replicas equals four for deployment will make sure that you get",
    "start": "514320",
    "end": "521279"
  },
  {
    "text": "four replicas for that deployment or volumes to attach capabilities parameters like running a privileged",
    "start": "521279",
    "end": "527760"
  },
  {
    "text": "workload or sharing the host network and of course labels it's very important to kubernetes to include labels",
    "start": "527760",
    "end": "534720"
  },
  {
    "text": "policies on the other hand define the behavior for other objects often called guard rails they define the",
    "start": "534720",
    "end": "541680"
  },
  {
    "text": "wiggle room for configuration some of them in a dynamic fashion and some less dynamic",
    "start": "541680",
    "end": "547760"
  },
  {
    "text": "it's also important it's also important to understand that guardrails are not the actual",
    "start": "547760",
    "end": "553360"
  },
  {
    "text": "configurations so policies help us to control what we",
    "start": "553360",
    "end": "558399"
  },
  {
    "text": "allow to to use inside our cluster",
    "start": "558399",
    "end": "563839"
  },
  {
    "text": "to quickly summarize kubernetes is a declarative infrastructure also known as desired state the desired",
    "start": "567600",
    "end": "574160"
  },
  {
    "text": "state is defined inside the various components configuration and it tries to satisfy them",
    "start": "574160",
    "end": "580000"
  },
  {
    "text": "the controllers are the one driving the change according to the policies in place",
    "start": "580000",
    "end": "585600"
  },
  {
    "text": "essentially the controllers enforce your policies in kubernetes",
    "start": "585600",
    "end": "591839"
  },
  {
    "text": "so our main focus today is going to be policies for admission controllers every change",
    "start": "595040",
    "end": "601040"
  },
  {
    "text": "before persisted to the lcd will go through the relevant admission controller",
    "start": "601040",
    "end": "606240"
  },
  {
    "text": "if it's not enabled it will be persisted immediately if if a specific admission controller",
    "start": "606240",
    "end": "611839"
  },
  {
    "text": "will be enabled it will check your guardrails the policies and they will verify if the change is",
    "start": "611839",
    "end": "618560"
  },
  {
    "text": "allowed and persist the change or deny it if the change is not allowed and keep the",
    "start": "618560",
    "end": "623920"
  },
  {
    "text": "configuration unchanged that's important because other controllers are trying to achieve the",
    "start": "623920",
    "end": "629680"
  },
  {
    "text": "desired state for you they're using that persistent configuration we want to make sure that",
    "start": "629680",
    "end": "636000"
  },
  {
    "text": "any change complies with our policies these controllers are serial and they're",
    "start": "636000",
    "end": "641440"
  },
  {
    "text": "also ordered so each of them runs passes or rejects the request according to the policy to each of their",
    "start": "641440",
    "end": "648800"
  },
  {
    "text": "own policy and pass it to the next controller in line there are basically",
    "start": "648800",
    "end": "654320"
  },
  {
    "text": "three stages we would examine today and their respective policies mutating and mission controllers objects",
    "start": "654320",
    "end": "661680"
  },
  {
    "text": "schema validations and the validating emission controllers not we're not going to discuss them",
    "start": "661680",
    "end": "666880"
  },
  {
    "text": "necessarily in this order but this is the order of execution first mutating then the validation and",
    "start": "666880",
    "end": "672399"
  },
  {
    "text": "then the webhook validations",
    "start": "672399",
    "end": "676399"
  },
  {
    "text": "so the first one i wanted to discuss is the image policy web hook images are of course a centerpiece in",
    "start": "680880",
    "end": "687600"
  },
  {
    "text": "your cluster which images are acceptable which repositories are okay to use and many other aspects the image",
    "start": "687600",
    "end": "694720"
  },
  {
    "text": "webhooks allows coding your corporate policies related to the images and repositories",
    "start": "694720",
    "end": "700000"
  },
  {
    "text": "and whatever you want the web hook would get all the requests related to all pods it does not",
    "start": "700000",
    "end": "706720"
  },
  {
    "text": "distinguish between different parts each request will include all images",
    "start": "706720",
    "end": "712320"
  },
  {
    "text": "in the pod with annotations from the pod you can think of the annotations as tags or labels",
    "start": "712320",
    "end": "718800"
  },
  {
    "text": "that you attach to the objects in the cluster they're they're kind of like labels but you cannot use them to do",
    "start": "718800",
    "end": "725040"
  },
  {
    "text": "different things that you are allowed to use labels for the webhook can either allow or deny the",
    "start": "725040",
    "end": "731920"
  },
  {
    "text": "request the null of the request will cause the pod creation to fail it's a good idea to add reason to your",
    "start": "731920",
    "end": "738880"
  },
  {
    "text": "decision because otherwise you'll get lost as you can imagine if all pod create and modify go through",
    "start": "738880",
    "end": "746399"
  },
  {
    "text": "the web hook it is important to make sure it is always available if the web hook is not available nothing",
    "start": "746399",
    "end": "753519"
  },
  {
    "text": "would run on your cluster because everything would just fail which brings us to the last challenge",
    "start": "753519",
    "end": "759600"
  },
  {
    "text": "default deny versus default allow you can avoid the nothing would run on your cluster",
    "start": "759600",
    "end": "765920"
  },
  {
    "text": "using the default allow however that's the eternal struggle between security and operations we want",
    "start": "765920",
    "end": "772240"
  },
  {
    "text": "to keep things secure and not necessarily only allow everything in",
    "start": "772240",
    "end": "779360"
  },
  {
    "text": "so here's a short example of the image review on the top snippet we see the request there are two",
    "start": "781600",
    "end": "788160"
  },
  {
    "text": "containers in the pod we see both images for them we can also see that there is an",
    "start": "788160",
    "end": "794079"
  },
  {
    "text": "annotation which says break glass that's the value of the of the annotation and we can see that",
    "start": "794079",
    "end": "799120"
  },
  {
    "text": "the namespace is over there it's called my namespace basically that's the context that you",
    "start": "799120",
    "end": "804480"
  },
  {
    "text": "need to take to take a decision below we see the decision which says allowed false and the reason which says",
    "start": "804480",
    "end": "810800"
  },
  {
    "text": "image currently blacklisted very simple right it's no no rocket",
    "start": "810800",
    "end": "816560"
  },
  {
    "text": "science here just write your code in the back end",
    "start": "816560",
    "end": "820880"
  },
  {
    "text": "so i wouldn't say it's that simple because i have some expectations um and um i",
    "start": "822639",
    "end": "830560"
  },
  {
    "text": "can't say that this web hook meets them as is so first i would expect kubernetes to",
    "start": "830560",
    "end": "836800"
  },
  {
    "text": "support some basic use cases for example create an allow list of repos without writing code",
    "start": "836800",
    "end": "842399"
  },
  {
    "text": "just type in your list second as i mentioned before the kind of web hook",
    "start": "842399",
    "end": "847600"
  },
  {
    "text": "that this kind of web hook just might enhance the ongoing tension between security and ops third i think",
    "start": "847600",
    "end": "855279"
  },
  {
    "text": "that there is some context that is missing here for example labels can be very useful here not only the annotation and last but not",
    "start": "855279",
    "end": "862639"
  },
  {
    "text": "least there should be some basic filtering without code for example i don't want",
    "start": "862639",
    "end": "867920"
  },
  {
    "text": "some specific namespaces to be going through the through this webhook",
    "start": "867920",
    "end": "874000"
  },
  {
    "text": "using labels using namespaces using any kind of selection that you wanted",
    "start": "874000",
    "end": "879600"
  },
  {
    "text": "this webhook capability can also be achieved using the validating admission controller we'll talk about that controller in a",
    "start": "879600",
    "end": "886639"
  },
  {
    "text": "few slides",
    "start": "886639",
    "end": "889279"
  },
  {
    "text": "our next subject is resources we always need more of these right",
    "start": "892160",
    "end": "897440"
  },
  {
    "text": "we need to keep in mind that a cluster in most cases is a shared economy think about wework",
    "start": "897440",
    "end": "904320"
  },
  {
    "text": "we need to distribute the resources according to the organization's need in this case kubernetes has two policies",
    "start": "904320",
    "end": "910959"
  },
  {
    "text": "a top down one and a bottom up the first resource quota defines the quota per name space from",
    "start": "910959",
    "end": "917839"
  },
  {
    "text": "the cluster level the second one limit ranger defines the rules for dividing the quota",
    "start": "917839",
    "end": "924320"
  },
  {
    "text": "between the workloads inside the specific namespace",
    "start": "924320",
    "end": "929600"
  },
  {
    "text": "the resource quota is of course an admission controller because that's what we're talking about here to enforce it you must have a quarter",
    "start": "934000",
    "end": "941600"
  },
  {
    "text": "object defined in every namespace the pitfall here is that if you leave a namespace without",
    "start": "941600",
    "end": "948320"
  },
  {
    "text": "a quota it's unlimited the default policy is unlimited",
    "start": "948320",
    "end": "953519"
  },
  {
    "text": "there are of course some rules and regulations unfortunately there is enough rope here to hang yourself",
    "start": "953519",
    "end": "960320"
  },
  {
    "text": "if your sum of defined resource quarters is more than what the cluster has there will be contention first come",
    "start": "960320",
    "end": "968160"
  },
  {
    "text": "first served defining resource quotas requires that all pods have limits",
    "start": "968160",
    "end": "973839"
  },
  {
    "text": "defined if you don't have limits defined on a workload it will fail and not be created a workaround for that",
    "start": "973839",
    "end": "982720"
  },
  {
    "text": "would be using the limit ranger which defines default values for the limits",
    "start": "982720",
    "end": "988399"
  },
  {
    "text": "for the limit of the workloads inside the namespace this quarter policy allows defining many",
    "start": "988399",
    "end": "995199"
  },
  {
    "text": "quarters on many different resources including how many objects of each type are allowed specifically on the last",
    "start": "995199",
    "end": "1002320"
  },
  {
    "text": "point i would suggest use what you need don't over configure",
    "start": "1002320",
    "end": "1007839"
  },
  {
    "text": "don't put limits if you don't actually need one",
    "start": "1007839",
    "end": "1012480"
  },
  {
    "text": "so let's talk about the limit ranger the limit ranger is focused on mainly on the cpu and the memory for",
    "start": "1018720",
    "end": "1025520"
  },
  {
    "text": "individual workloads inside the namespace same rule as resource quotas if you didn't define any",
    "start": "1025520",
    "end": "1031600"
  },
  {
    "text": "it's defaulting to unlimited generally speaking it is always important to make sure that",
    "start": "1031600",
    "end": "1037918"
  },
  {
    "text": "when you decide to define a policy make sure that you cover all your bases as expected there is",
    "start": "1037919",
    "end": "1043839"
  },
  {
    "text": "enough rope here as well if you allow too much your pods would run into contention",
    "start": "1043839",
    "end": "1049280"
  },
  {
    "text": "contention would cause pods creation failure which is not fun to summarize",
    "start": "1049280",
    "end": "1055919"
  },
  {
    "text": "resources and limits unlimited leads to contention contention leads to",
    "start": "1055919",
    "end": "1061520"
  },
  {
    "text": "failure and failure leads to well you know where that leads to right",
    "start": "1061520",
    "end": "1067840"
  },
  {
    "text": "our next subject is are the pod security policies and there's an important disclaimer here",
    "start": "1073440",
    "end": "1079280"
  },
  {
    "text": "before discussing it it it is like many other features in kubernetes a better feature",
    "start": "1079280",
    "end": "1085760"
  },
  {
    "text": "there are rumors of its death before arriving to ga they are probably true i suggest you go",
    "start": "1085760",
    "end": "1092160"
  },
  {
    "text": "to see goth and take a look at the discussions over there however a replacement solution was not",
    "start": "1092160",
    "end": "1098640"
  },
  {
    "text": "yet chosen there are some candidates but it's not specifically designed yet now let's dive into this psp",
    "start": "1098640",
    "end": "1107039"
  },
  {
    "text": "or call security policies defines the guardrails for workloads there are about 20 configuration it",
    "start": "1107039",
    "end": "1112960"
  },
  {
    "text": "controls psp unlike resource quota and limit ranger is a cluster level object so it's not",
    "start": "1112960",
    "end": "1119760"
  },
  {
    "text": "defined in each of the namespaces you can define as many psps as you want",
    "start": "1119760",
    "end": "1126080"
  },
  {
    "text": "or need and we'll see why that's actually needed hpsp is a permutation of the managed",
    "start": "1126080",
    "end": "1132799"
  },
  {
    "text": "configurations those permutations are profiles of the guardrail so if for example i want to",
    "start": "1132799",
    "end": "1138000"
  },
  {
    "text": "create one profile i will create a permutation of the psp and give it a name and then if i want",
    "start": "1138000",
    "end": "1143280"
  },
  {
    "text": "another profile i'll create another one and give it a different name so here's the tricky part you need to",
    "start": "1143280",
    "end": "1150400"
  },
  {
    "text": "allow your service accounts to read the profile for them to apply it",
    "start": "1150400",
    "end": "1155440"
  },
  {
    "text": "so they kind of need to want to to apply it's it's kind of weird",
    "start": "1155440",
    "end": "1160480"
  },
  {
    "text": "and to make this really fun if you define the loophole in one profile that allows workloads in",
    "start": "1160480",
    "end": "1166559"
  },
  {
    "text": "and that workload applies that profile on it they will go they will go through that",
    "start": "1166559",
    "end": "1172559"
  },
  {
    "text": "loophole i want to i want to explain this point more thoroughly because people get confused",
    "start": "1172559",
    "end": "1178000"
  },
  {
    "text": "about that let's say that i have five different profiles each of them defines a different permutation of psp",
    "start": "1178000",
    "end": "1184799"
  },
  {
    "text": "when i allow a workload to use a profile and we'll see that definition later on through a role",
    "start": "1184799",
    "end": "1192480"
  },
  {
    "text": "binding it essentially applies that profile on the workload having multiple profiles enforced on the",
    "start": "1192480",
    "end": "1198960"
  },
  {
    "text": "same workload gives freedom of choice which is not",
    "start": "1198960",
    "end": "1204080"
  },
  {
    "text": "really required to the workload the workload will try to match the configuration it currently has",
    "start": "1204080",
    "end": "1210240"
  },
  {
    "text": "and passed through a profile the first one it is able to go through without",
    "start": "1210240",
    "end": "1215520"
  },
  {
    "text": "changes to the workload configuration is the one that it will go through and it's also by the way alphabetically",
    "start": "1215520",
    "end": "1222159"
  },
  {
    "text": "ordered as a best practice it is better implementation to make sure every",
    "start": "1222159",
    "end": "1227760"
  },
  {
    "text": "workload matches just one profile which is the one we wanted to apply",
    "start": "1227760",
    "end": "1233120"
  },
  {
    "text": "otherwise you gave it a choice and what's what's the point that of course requires much more",
    "start": "1233120",
    "end": "1238159"
  },
  {
    "text": "planning and more objects role binding per name space and specific",
    "start": "1238159",
    "end": "1243840"
  },
  {
    "text": "roles etc to make this actually work better not use the default service account",
    "start": "1243840",
    "end": "1249919"
  },
  {
    "text": "if you do use this default service account you would probably assign too many profiles available to the default service account",
    "start": "1249919",
    "end": "1256159"
  },
  {
    "text": "because the user the the service account of the workload",
    "start": "1256159",
    "end": "1261760"
  },
  {
    "text": "is the one that is that needs to be able to use the profile so if you use default in too many places",
    "start": "1261760",
    "end": "1269120"
  },
  {
    "text": "many different profiles would be assigned to it and it would it could choose quote-unquote so that's going to",
    "start": "1269120",
    "end": "1275679"
  },
  {
    "text": "be your goal recently the kubernetes team released three standard profiles",
    "start": "1275679",
    "end": "1281200"
  },
  {
    "text": "um these the release came with a disclaimer that policies in this space needs to be",
    "start": "1281200",
    "end": "1287200"
  },
  {
    "text": "defined on a case-by-case basis so one size does not fit all it actually doesn't even fit most",
    "start": "1287200",
    "end": "1294960"
  },
  {
    "text": "meaning these profiles are a starting point you have work to do i would argue that over profiling is bad",
    "start": "1294960",
    "end": "1301440"
  },
  {
    "text": "practice it beats the purpose because it's harder to manage and keep under control",
    "start": "1301440",
    "end": "1306880"
  },
  {
    "text": "the bottom line here is balance keep your balance here",
    "start": "1306880",
    "end": "1312559"
  },
  {
    "text": "even though there are about 20 configurations keep in mind that some of them are not",
    "start": "1314400",
    "end": "1320240"
  },
  {
    "text": "flags meaning that they're not a true false thing and they can have multiple values and sub configuration for example",
    "start": "1320240",
    "end": "1326559"
  },
  {
    "text": "volumes so what's covered workload and port isolation parameters",
    "start": "1326559",
    "end": "1331760"
  },
  {
    "text": "such as denying sharing host network host process id etc those configurations are important",
    "start": "1331760",
    "end": "1337440"
  },
  {
    "text": "because they can result in qual breakouts security context for the container for",
    "start": "1337440",
    "end": "1343280"
  },
  {
    "text": "example user the user running the container allowed linux capabilities and also the",
    "start": "1343280",
    "end": "1348400"
  },
  {
    "text": "default values for the users and groups running the container",
    "start": "1348400",
    "end": "1354320"
  },
  {
    "text": "coming from the downstream to the containers those are important to define the actual",
    "start": "1354320",
    "end": "1359440"
  },
  {
    "text": "privileges of the container that of the of the privileges inside the",
    "start": "1359440",
    "end": "1364480"
  },
  {
    "text": "container that is running also storage related configurations for example allowed volume types",
    "start": "1364480",
    "end": "1371039"
  },
  {
    "text": "access to the container to the container root file system which is also kind of a problem and",
    "start": "1371039",
    "end": "1376799"
  },
  {
    "text": "accessor mode for the mount points too much wiggle room for for the containers could result again in",
    "start": "1376799",
    "end": "1382720"
  },
  {
    "text": "breakout and access to undesired information finally what's on everything on",
    "start": "1382720",
    "end": "1388720"
  },
  {
    "text": "everyone's agenda the privilege mode and escalations which guard which which guards from what uh guards",
    "start": "1388720",
    "end": "1395039"
  },
  {
    "text": "from workloads that can spawn other workloads in privilege mode or run themselves in privilege mode",
    "start": "1395039",
    "end": "1403200"
  },
  {
    "text": "just a reminder this is a policy of allowed and denied configuration it is by no means setting or changing",
    "start": "1403200",
    "end": "1410799"
  },
  {
    "text": "the configuration of any workload last point to remember many of us look to cis benchmark",
    "start": "1410799",
    "end": "1417120"
  },
  {
    "text": "for guidance there is a whole section section 5.2 in the latest cis benchmark for",
    "start": "1417120",
    "end": "1423840"
  },
  {
    "text": "kubernetes that's a version 1.5.1 discussing pod security policies it does",
    "start": "1423840",
    "end": "1429679"
  },
  {
    "text": "not prescribe you use psps it does however require setting psp-like",
    "start": "1429679",
    "end": "1434720"
  },
  {
    "text": "controls to enforce policies for pod",
    "start": "1434720",
    "end": "1439440"
  },
  {
    "text": "security this is the privileged profile example from the kubernetes website",
    "start": "1442840",
    "end": "1448400"
  },
  {
    "text": "as you can see you can basically admit any workload with any configuration uh most of these stuff is run as any run",
    "start": "1448400",
    "end": "1455200"
  },
  {
    "text": "as any run as any or just asterisk it's actually a good idea to have that profile to make sure that",
    "start": "1455200",
    "end": "1461600"
  },
  {
    "text": "there is a way out in emergency cases and also for the kubernetes the cube system workloads to be able to go in",
    "start": "1461600",
    "end": "1473039"
  },
  {
    "text": "this is the restricted example and it's not the whole file but just part of it",
    "start": "1473039",
    "end": "1478159"
  },
  {
    "text": "we can immediately see quite a few false flags denying configuration well it's restricted right this",
    "start": "1478159",
    "end": "1484960"
  },
  {
    "text": "configuration might fail quite a few workloads however if your workload can work with",
    "start": "1484960",
    "end": "1491200"
  },
  {
    "text": "this policy you better use it as it minimizes your attack surface originating from the workload",
    "start": "1491200",
    "end": "1497039"
  },
  {
    "text": "there's also a baseline profile which is the middle way between those two",
    "start": "1497039",
    "end": "1502559"
  },
  {
    "text": "the biggest issue other than it might be deprecated in about a year",
    "start": "1506320",
    "end": "1511679"
  },
  {
    "text": "when it comes to psps in my opinion is that it's it's too rigid from a configuration and also",
    "start": "1511679",
    "end": "1517520"
  },
  {
    "text": "implementation view and maybe even management every permutation is a new profile new",
    "start": "1517520",
    "end": "1523440"
  },
  {
    "text": "role and role binding otherwise if you permit them all in one role you might get the wrong result for",
    "start": "1523440",
    "end": "1529200"
  },
  {
    "text": "example allowing a workload you wanted to stop it's quite complex to debug psps",
    "start": "1529200",
    "end": "1536000"
  },
  {
    "text": "and finding the root cause for something that was blocked this policy type manages too many",
    "start": "1536000",
    "end": "1543279"
  },
  {
    "text": "attributes and was not built actually to do so from the ground up because i i don't think that it was built for the amount of",
    "start": "1543279",
    "end": "1549840"
  },
  {
    "text": "variations that exist however having said all that it is possible to use it",
    "start": "1549840",
    "end": "1554960"
  },
  {
    "text": "you should care for the configuration that psp looks after but you need to carefully",
    "start": "1554960",
    "end": "1560559"
  },
  {
    "text": "plan on how to do it",
    "start": "1560559",
    "end": "1563840"
  },
  {
    "text": "let's talk about labels i love labels they make everything in kubernetes so much easier",
    "start": "1568799",
    "end": "1573919"
  },
  {
    "text": "uh it's such an important mechanism uh that is used all around it helps in node selection it",
    "start": "1573919",
    "end": "1580320"
  },
  {
    "text": "helps a service for workloads matching and many more places you can also think about it the same way",
    "start": "1580320",
    "end": "1586640"
  },
  {
    "text": "you think about annotation just actually usable in some aspects so let's talk about the labeling policy",
    "start": "1586640",
    "end": "1592799"
  },
  {
    "text": "in kubernetes",
    "start": "1592799",
    "end": "1599840"
  },
  {
    "text": "there isn't one yep it just doesn't exist if you wanted to make sure for example",
    "start": "1599919",
    "end": "1605200"
  },
  {
    "text": "that all workloads have a label saying who is the owner or which app they are part of",
    "start": "1605200",
    "end": "1610240"
  },
  {
    "text": "or anything for that matter that you actually wanted to to label your workload with and make",
    "start": "1610240",
    "end": "1615760"
  },
  {
    "text": "sure that it is over there you have to actually write code for that we'll get back to that soon that's a big",
    "start": "1615760",
    "end": "1621600"
  },
  {
    "text": "shortcoming of that i would expect kubernetes to handle",
    "start": "1621600",
    "end": "1627840"
  },
  {
    "text": "so now we're going into the really interesting parts so this is somewhat of",
    "start": "1629679",
    "end": "1636480"
  },
  {
    "text": "a different beast it's not using a policy to make sure folks in the cluster play by your rules it is there to provide you",
    "start": "1636480",
    "end": "1644000"
  },
  {
    "text": "with the power to make sure that if they don't you will straighten them out",
    "start": "1644000",
    "end": "1649200"
  },
  {
    "text": "so mutating and mission controllers are the first to be evaluated they are the based on your code and they",
    "start": "1649200",
    "end": "1656559"
  },
  {
    "text": "have you can have multiple admission and mutating admission controllers it each of them gets the request it",
    "start": "1656559",
    "end": "1662880"
  },
  {
    "text": "inspects it mutate it if it needs to and moves it to the second in line trickles down the line the order of",
    "start": "1662880",
    "end": "1670399"
  },
  {
    "text": "evaluation here is very important because downstream admission controllers will get the request that might have",
    "start": "1670399",
    "end": "1676000"
  },
  {
    "text": "already been mutated as their input they will have to know how to deal with it",
    "start": "1676000",
    "end": "1681360"
  },
  {
    "text": "and they will not know how the original request came in sometimes knowing the original request can actually be a valuable information",
    "start": "1681360",
    "end": "1689200"
  },
  {
    "text": "it is pretty handy that you can inspect a request for any type of object so unlike the",
    "start": "1689200",
    "end": "1694240"
  },
  {
    "text": "image web hooks you you will get any request type not only for workloads",
    "start": "1694240",
    "end": "1699760"
  },
  {
    "text": "for example service accounts or ingress creation or modifications or services",
    "start": "1699760",
    "end": "1704799"
  },
  {
    "text": "and roles whatever you want can come into this this of course open up many more opportunities and allows you",
    "start": "1704799",
    "end": "1711600"
  },
  {
    "text": "to create a much more complex policy lastly the whole request goes as input",
    "start": "1711600",
    "end": "1718320"
  },
  {
    "text": "it means that you get a complete context very useful when making policy decisions",
    "start": "1718320",
    "end": "1723600"
  },
  {
    "text": "to know that it's very useful to know the complete context a good use of admission of you of those",
    "start": "1723600",
    "end": "1730080"
  },
  {
    "text": "mutating admission controllers can be to automatically label workloads it's not as simple as it sounds though",
    "start": "1730080",
    "end": "1736000"
  },
  {
    "text": "assuming you have access to metadata which is supposed to be added as label you could definitely do it here",
    "start": "1736000",
    "end": "1742640"
  },
  {
    "text": "a word of advice if you decide using this capability of mutating admission controllers",
    "start": "1742640",
    "end": "1748399"
  },
  {
    "text": "best practice dictates you should only set unset values rather than change existing",
    "start": "1748399",
    "end": "1754880"
  },
  {
    "text": "values that you get already inside the request because that can cause",
    "start": "1754880",
    "end": "1760080"
  },
  {
    "text": "a lot of problems to the downstream admission controllers",
    "start": "1760080",
    "end": "1767840"
  },
  {
    "text": "so the last type of admission controller to run are the validating web hooks basically the last keepers of pc",
    "start": "1770399",
    "end": "1776880"
  },
  {
    "text": "configuration unlike the mutating controllers these validating one",
    "start": "1776880",
    "end": "1782080"
  },
  {
    "text": "all run in parallel if one of them fails the request the request will fail completely it will",
    "start": "1782080",
    "end": "1788159"
  },
  {
    "text": "still allow the other admissions to complete so you would know if there are other issues you need to attend to",
    "start": "1788159",
    "end": "1795279"
  },
  {
    "text": "the police the possibilities here are endless anything enforceable in psps image policies",
    "start": "1795279",
    "end": "1802159"
  },
  {
    "text": "label uh existence anything can be enforced here and also much like the mutating and mission",
    "start": "1802159",
    "end": "1807600"
  },
  {
    "text": "controllers it opens pretty much the floodgates because you can validate objects other than",
    "start": "1807600",
    "end": "1812960"
  },
  {
    "text": "workloads enforcing naming convention for various objects minimum required configuration",
    "start": "1812960",
    "end": "1819360"
  },
  {
    "text": "label existence again anything here is possible the only caveat is that you have to",
    "start": "1819360",
    "end": "1825200"
  },
  {
    "text": "write it yourself and make sure it works and make sure it documents the decision well so",
    "start": "1825200",
    "end": "1832799"
  },
  {
    "text": "they're traceable and understandable these web hooks what's used to be called in you know in",
    "start": "1832799",
    "end": "1839520"
  },
  {
    "text": "in in the history of of uh you know in mainframe time it would would be called an exit is basically",
    "start": "1839520",
    "end": "1846159"
  },
  {
    "text": "write your own code do whatever you want just play by the basic rules and return the expected codes with great",
    "start": "1846159",
    "end": "1853120"
  },
  {
    "text": "power comes great responsibility this seems like you know if you if you",
    "start": "1853120",
    "end": "1858399"
  },
  {
    "text": "if you see this for the first time it seems like the answer for many issues we've discussed here and",
    "start": "1858399",
    "end": "1863679"
  },
  {
    "text": "yet your policy is still inside your code so everything is hard coded",
    "start": "1863679",
    "end": "1871518"
  },
  {
    "text": "so how does it look like every request to the validating controller brings in",
    "start": "1874000",
    "end": "1879679"
  },
  {
    "text": "all the data wrapped within the admission review object you can see the kind on the left side which says kind",
    "start": "1879679",
    "end": "1886000"
  },
  {
    "text": "admission review mutating validating and image web hooks require",
    "start": "1886000",
    "end": "1891440"
  },
  {
    "text": "you to first register the web hooks with it with the cluster for mutating and validating you can",
    "start": "1891440",
    "end": "1897519"
  },
  {
    "text": "define actions and resources pairs paired together for different web books so for example",
    "start": "1897519",
    "end": "1904000"
  },
  {
    "text": "you can say for create and modify of service accounts i want to go to a specific webhook and for",
    "start": "1904000",
    "end": "1910320"
  },
  {
    "text": "creating modify for roles i want to go for another one and four workloads for",
    "start": "1910320",
    "end": "1915519"
  },
  {
    "text": "a third one you should also note that the get is that get is not a verb that",
    "start": "1915519",
    "end": "1921440"
  },
  {
    "text": "you can use it's not an action that would go through the admission controller",
    "start": "1921440",
    "end": "1926640"
  },
  {
    "text": "on the right hand side we can see the response from the webhook which allows you to add messages so for example you can see that allowed",
    "start": "1926640",
    "end": "1934000"
  },
  {
    "text": "is false and you can see that the message is you cannot do this because something",
    "start": "1934000",
    "end": "1940640"
  },
  {
    "text": "there are some additional notable admission controllers that control very specific aspects for",
    "start": "1943440",
    "end": "1949200"
  },
  {
    "text": "example always pull images even though the name speaks for itself the complete behavior is not",
    "start": "1949200",
    "end": "1954320"
  },
  {
    "text": "so evident this admission controllers would modify every new pod to force pulling images",
    "start": "1954320",
    "end": "1960240"
  },
  {
    "text": "from the image repo basically it means that if you turn it on you set a policy saying that all pods",
    "start": "1960240",
    "end": "1966559"
  },
  {
    "text": "must always pull images simple to the point it's very simple so the reason behind it",
    "start": "1966559",
    "end": "1972880"
  },
  {
    "text": "is to avoid the possibility of someone using the image that you already pulled into a node even if it's not authorized just",
    "start": "1972880",
    "end": "1979360"
  },
  {
    "text": "because it exists on the node where his or hers workload is running",
    "start": "1979360",
    "end": "1986399"
  },
  {
    "text": "you can probably achieve this very similar functionality with the mutating and mission controller",
    "start": "1986399",
    "end": "1992240"
  },
  {
    "text": "and be more selective so this actually might contradict the recommendation to refrain from modifying set values",
    "start": "1992240",
    "end": "1999200"
  },
  {
    "text": "so just think about which one is better to use default storage class is also pretty",
    "start": "1999200",
    "end": "2004480"
  },
  {
    "text": "straightforward it will assign a default storage class for any persistent volume claim that is missing the storage class type",
    "start": "2004480",
    "end": "2011679"
  },
  {
    "text": "this way we can make sure that special storage classes that are probably more expensive are not assigned by default",
    "start": "2011679",
    "end": "2017519"
  },
  {
    "text": "and must be requested specifically the next the next one here is the event",
    "start": "2017519",
    "end": "2023519"
  },
  {
    "text": "rate limit it's actually a very useful admission controller focused on specific subject with fairly clear",
    "start": "2023519",
    "end": "2030840"
  },
  {
    "text": "policy the the previous one that we talked about each of them had is the policy is just defined by saying you",
    "start": "2030840",
    "end": "2037039"
  },
  {
    "text": "know yes no or defining the config file of for the default storage policy",
    "start": "2037039",
    "end": "2042080"
  },
  {
    "text": "the event rate limit is also very similar it has a config file for itself um so the api",
    "start": "2042080",
    "end": "2049679"
  },
  {
    "text": "server is important as you can imagine and we don't want it to be flooded with requests so the configuration file for",
    "start": "2049679",
    "end": "2056158"
  },
  {
    "text": "this admission controller defines buckets for queries to the api server it it uses",
    "start": "2056159",
    "end": "2061520"
  },
  {
    "text": "various levels like server namespace a specific user and also source plus",
    "start": "2061520",
    "end": "2066878"
  },
  {
    "text": "object probably it's it's very useful to define it to make sure that your api servers",
    "start": "2066879",
    "end": "2072398"
  },
  {
    "text": "are not flooded and probably one of the most useful is the pod node selector",
    "start": "2072399",
    "end": "2079040"
  },
  {
    "text": "that helps us to define which pod is going to be scheduled on which node here again for example if you wanted to",
    "start": "2079040",
    "end": "2085358"
  },
  {
    "text": "make sure that pci workloads can only run on pci approved nodes that's the controller that you can pro",
    "start": "2085359",
    "end": "2091118"
  },
  {
    "text": "that can help probably help you to do that",
    "start": "2091119",
    "end": "2094960"
  },
  {
    "text": "so to recap admission controllers are the mechanism that kubernetes used to",
    "start": "2098240",
    "end": "2104000"
  },
  {
    "text": "enforce many different policies but and there's a big but here policies are managed all around it's a",
    "start": "2104000",
    "end": "2111599"
  },
  {
    "text": "it's complex to understand the big picture and what's the actual effective policy even for simpler policies like paul not",
    "start": "2111599",
    "end": "2118960"
  },
  {
    "text": "selector there would be a configuration file per namespace so it's not so simple or evident to see",
    "start": "2118960",
    "end": "2125440"
  },
  {
    "text": "the big picture advancing to multi-clusters and multi-cloud",
    "start": "2125440",
    "end": "2131040"
  },
  {
    "text": "complicates the situation even more",
    "start": "2131040",
    "end": "2134880"
  },
  {
    "text": "so i thought it's a good idea to give you some homework now that schools are closed and no one know",
    "start": "2139760",
    "end": "2145040"
  },
  {
    "text": "no one knows if they ever reopen at least not here in california",
    "start": "2145040",
    "end": "2150240"
  },
  {
    "text": "so i suggest that you start by some simple checks list your active admission controllers",
    "start": "2150240",
    "end": "2156000"
  },
  {
    "text": "see what's running if you're running in a cloud provider there might be some variations um in the commands that are here",
    "start": "2156000",
    "end": "2164000"
  },
  {
    "text": "to understand what's running second if you use the default namespace",
    "start": "2164000",
    "end": "2169200"
  },
  {
    "text": "stop start name spacing it's super helpful and helps you to actually",
    "start": "2169200",
    "end": "2174240"
  },
  {
    "text": "bring some order very quickly even if you just start now and you don't have many projects or applications",
    "start": "2174240",
    "end": "2180880"
  },
  {
    "text": "better start with namespacing now it will be harder to do it later you can thank me later third",
    "start": "2180880",
    "end": "2187760"
  },
  {
    "text": "the default service account if you don't define a service account or if you define default see if you can",
    "start": "2187760",
    "end": "2193359"
  },
  {
    "text": "switch to a named account using the default service account makes your workload access to the api server",
    "start": "2193359",
    "end": "2200079"
  },
  {
    "text": "unaccounted for it is also important for the proper usage of psp",
    "start": "2200079",
    "end": "2206320"
  },
  {
    "text": "last and again this is comes with a grain of salt this recommendation cautiously enable",
    "start": "2206480",
    "end": "2212560"
  },
  {
    "text": "the psp using the predefined profiles from kubernetes website even if you plan later on moving to",
    "start": "2212560",
    "end": "2219599"
  },
  {
    "text": "another enforcement method it can be a good idea to know where you are and lock down",
    "start": "2219599",
    "end": "2225280"
  },
  {
    "text": "at least some of the usual suspects",
    "start": "2225280",
    "end": "2229839"
  },
  {
    "text": "so i'm going to really quickly um move to a really short demo just to demonstrate",
    "start": "2232480",
    "end": "2237839"
  },
  {
    "text": "some of the things that we discussed here today",
    "start": "2237839",
    "end": "2243760"
  },
  {
    "text": "um so i have a local cluster here and the first thing i want to show you is the resource quotas",
    "start": "2243760",
    "end": "2250560"
  },
  {
    "text": "um so here we have the compute resources",
    "start": "2250560",
    "end": "2255920"
  },
  {
    "text": "configuration file for namespace and the object counts that i defined here",
    "start": "2255920",
    "end": "2261920"
  },
  {
    "text": "i'm going to",
    "start": "2262079",
    "end": "2264880"
  },
  {
    "text": "apply",
    "start": "2268839",
    "end": "2271839"
  },
  {
    "text": "to a specific to a specific namespace that i created before",
    "start": "2275760",
    "end": "2282000"
  },
  {
    "text": "and i'm also going to apply the",
    "start": "2283520",
    "end": "2287440"
  },
  {
    "text": "so now that i have this in place um i'm actually going to",
    "start": "2292079",
    "end": "2299838"
  },
  {
    "text": "create a namespace here a wordle here sorry",
    "start": "2300320",
    "end": "2305520"
  },
  {
    "text": "um",
    "start": "2310839",
    "end": "2313839"
  },
  {
    "text": "and we can see that let's uh let's get that quarter",
    "start": "2317440",
    "end": "2324880"
  },
  {
    "text": "for",
    "start": "2324880",
    "end": "2327838"
  },
  {
    "text": "[Music] we can actually see the the",
    "start": "2333800",
    "end": "2339599"
  },
  {
    "text": "computer resources and object quota in my environment",
    "start": "2339599",
    "end": "2355838"
  },
  {
    "text": "just a second",
    "start": "2365839",
    "end": "2369839"
  },
  {
    "text": "oh sorry i made a mistake here",
    "start": "2383839",
    "end": "2397839"
  },
  {
    "text": "okay it's going to create it and we can see that now i'm using",
    "start": "2422839",
    "end": "2429680"
  },
  {
    "text": "one of the pods and that's the limit so if i'll try now to scale it up",
    "start": "2429680",
    "end": "2439838"
  },
  {
    "text": "[Music]",
    "start": "2454180",
    "end": "2457599"
  },
  {
    "text": "it's trying to scale it up [Music] you can see that it's not going to allow it so if i'll just do now keep color",
    "start": "2464560",
    "end": "2473040"
  },
  {
    "text": "get deployment minus and limit address",
    "start": "2473040",
    "end": "2478800"
  },
  {
    "text": "you can see that it's trying that it's configured for two and it just have one available so that's the uh that's",
    "start": "2478800",
    "end": "2485280"
  },
  {
    "text": "the first part um so just remember that if you define a resource quota and you already",
    "start": "2485280",
    "end": "2493040"
  },
  {
    "text": "have something uh in the in place it's not going to um to enforce it and and",
    "start": "2493040",
    "end": "2501280"
  },
  {
    "text": "scale down your resources only if they scale down and then try to scale up it won't be able to do so",
    "start": "2501280",
    "end": "2506560"
  },
  {
    "text": "the second thing that i wanted to show you is uh is actually the um how we deny privileged uh",
    "start": "2506560",
    "end": "2514079"
  },
  {
    "text": "workloads from running i'm not going to do this using uh uh port security policy i'm just",
    "start": "2514079",
    "end": "2519440"
  },
  {
    "text": "going to show you uh how to do it using the open policy agent",
    "start": "2519440",
    "end": "2525119"
  },
  {
    "text": "as an admission controller and we'll talk about the open policy agent in a second",
    "start": "2525119",
    "end": "2530240"
  },
  {
    "text": "so let's uh let's go in here i'll this workload that i tried to",
    "start": "2530240",
    "end": "2536640"
  },
  {
    "text": "create here is privileged so technically um",
    "start": "2536640",
    "end": "2542000"
  },
  {
    "text": "you will see here that there is a privilege true um and what i'm going to do now is actually",
    "start": "2542000",
    "end": "2548839"
  },
  {
    "text": "to create a rule here i created the rule",
    "start": "2548839",
    "end": "2554160"
  },
  {
    "text": "beforehand so you can see here and you can see that it's actually saying that",
    "start": "2554160",
    "end": "2559359"
  },
  {
    "text": "a privileged workload should should be um",
    "start": "2559359",
    "end": "2565359"
  },
  {
    "text": "sorry wrong folder",
    "start": "2565359",
    "end": "2569920"
  },
  {
    "text": "oh here it is um and what i'm going to do",
    "start": "2576839",
    "end": "2585359"
  },
  {
    "text": "now is i'm actually going to um to crying to try and create this",
    "start": "2585359",
    "end": "2591040"
  },
  {
    "text": "workload another one just inventory which is also",
    "start": "2591040",
    "end": "2596319"
  },
  {
    "text": "a previous workload i'm going to try and create it so if we go into",
    "start": "2596319",
    "end": "2603280"
  },
  {
    "text": "here and we do keep cuddle apply",
    "start": "2603280",
    "end": "2608240"
  },
  {
    "text": "so we can see that it cannot run the inventory mentioned because it's a privilege workload and it cannot run the inventory",
    "start": "2611760",
    "end": "2617599"
  },
  {
    "text": "update since it's a privileged workload so uh it's basically in um denying both of",
    "start": "2617599",
    "end": "2622960"
  },
  {
    "text": "them from running now let's say that i wanted to only do it for production uh for production workloads",
    "start": "2622960",
    "end": "2630960"
  },
  {
    "text": "then i'm actually going if i if i was using uh prosecutory policies i would start",
    "start": "2630960",
    "end": "2636480"
  },
  {
    "text": "needing to create new profiles and start labeling them differently and doing a lot of um",
    "start": "2636480",
    "end": "2642480"
  },
  {
    "text": "a lot of changes uh in here what i'm all all that i need to do is just to add it",
    "start": "2642480",
    "end": "2649040"
  },
  {
    "text": "you know change the code in here and i'm going to uh to make sure that this happens so now if i'll try to",
    "start": "2649040",
    "end": "2655520"
  },
  {
    "text": "create it it's actually going to be able to create it sorry i didn't update the workload just",
    "start": "2655520",
    "end": "2663119"
  },
  {
    "text": "yet so i'm going to delete the um the rule and reload it",
    "start": "2663119",
    "end": "2677839"
  },
  {
    "text": "and now i'm going to recreate it using this enhanced rule so to speak",
    "start": "2700880",
    "end": "2708240"
  },
  {
    "text": "so technically",
    "start": "2716800",
    "end": "2719839"
  },
  {
    "text": "if i'll try now to create it",
    "start": "2727520",
    "end": "2733839"
  },
  {
    "text": "should allow me to go in oh sorry it's with the environment of",
    "start": "2734800",
    "end": "2742000"
  },
  {
    "text": "production so it's not supposed to let me in but if i'll put this in comment",
    "start": "2742000",
    "end": "2749680"
  },
  {
    "text": "it will allow me to go in so to summarize",
    "start": "2749680",
    "end": "2754880"
  },
  {
    "text": "this allows me to to make a much more",
    "start": "2754880",
    "end": "2761119"
  },
  {
    "text": "dynamic policy without starting to change a lot of code in",
    "start": "2761119",
    "end": "2767280"
  },
  {
    "text": "let's go let's go back to the to the slides",
    "start": "2767280",
    "end": "2775838"
  },
  {
    "text": "so after everything we've learned here uh it's all awesome and no open challenges right um",
    "start": "2788880",
    "end": "2795680"
  },
  {
    "text": "not exactly as you've seen um let's let's focus the discussion on some very specific issues that are that are easily",
    "start": "2795680",
    "end": "2803119"
  },
  {
    "text": "identified we need to decouple policies from admission controllers code because otherwise if i try to do what i",
    "start": "2803119",
    "end": "2809599"
  },
  {
    "text": "just did with psps it would be hell running in a femoral environment",
    "start": "2809599",
    "end": "2815680"
  },
  {
    "text": "means everything is dynamic including our policies and we cannot change code every time our policy change",
    "start": "2815680",
    "end": "2820880"
  },
  {
    "text": "and they will change adding more clusters using different providers is a forcing",
    "start": "2820880",
    "end": "2827599"
  },
  {
    "text": "function to centrally manage and orchestrate our policies and last but not least the old practice",
    "start": "2827599",
    "end": "2833119"
  },
  {
    "text": "of maintaining a different policy for dev task un prod is well old if we wanted to shift left",
    "start": "2833119",
    "end": "2840559"
  },
  {
    "text": "and we do want to shift left we have to make sure we are consistent",
    "start": "2840559",
    "end": "2846160"
  },
  {
    "text": "so the first step here it must involve policy as code we've seen many you know something as",
    "start": "2847599",
    "end": "2853280"
  },
  {
    "text": "code predominantly infrastructure as code in the last few years",
    "start": "2853280",
    "end": "2859119"
  },
  {
    "text": "especially in the cloud native world the open policy agent that i just demonstrated you know like a small part",
    "start": "2859119",
    "end": "2864559"
  },
  {
    "text": "of it is a fir is a good first step in the right direction it allows decoupling code from policy",
    "start": "2864559",
    "end": "2869680"
  },
  {
    "text": "and it uses declarative language which works well in tandem with kubernetes declarative infrastructure",
    "start": "2869680",
    "end": "2875680"
  },
  {
    "text": "oppa gatekeeper is a project using the open policy agent that created a simple way to employ web hooks using",
    "start": "2875680",
    "end": "2882000"
  },
  {
    "text": "policy as code it has libraries and of policies which you can use as is or modify as needed",
    "start": "2882000",
    "end": "2890800"
  },
  {
    "text": "i would be amiss if i made you think that admission controllers and their policies are the silver bullet",
    "start": "2892720",
    "end": "2897760"
  },
  {
    "text": "you are searching for securing your kubernetes they are just one piece of a much bigger picture",
    "start": "2897760",
    "end": "2903760"
  },
  {
    "text": "admissions are the last enforcement point in a process that you must start as early as possible in your dev pipe",
    "start": "2903760",
    "end": "2909520"
  },
  {
    "text": "it's absolutely necessary to enforce this as left as possible in the process to be able to close the",
    "start": "2909520",
    "end": "2915359"
  },
  {
    "text": "loop successfully and resolve workloads issues the admission are actually",
    "start": "2915359",
    "end": "2920800"
  },
  {
    "text": "gatekeeper they don't help you remediate issues they help you make sure that once you remediate those issues",
    "start": "2920800",
    "end": "2927520"
  },
  {
    "text": "don't pop back up like an uninvited guest",
    "start": "2927520",
    "end": "2931760"
  },
  {
    "text": "so at a policy we look at policies as part of a broader process that includes risk analysis and remediation",
    "start": "2932640",
    "end": "2938800"
  },
  {
    "text": "we actually start with risk because we want to help our customers understand what is the current risk posture of",
    "start": "2938800",
    "end": "2944240"
  },
  {
    "text": "their clusters and where they are most vulnerable we use this information to guide our",
    "start": "2944240",
    "end": "2949280"
  },
  {
    "text": "customers and help them build the most appropriate policies for their clusters and workloads but we don't stop there when you know",
    "start": "2949280",
    "end": "2957040"
  },
  {
    "text": "where you are hence risk and where you want to go to hence policies will help you drive your clusters",
    "start": "2957040",
    "end": "2963599"
  },
  {
    "text": "towards this desired state by automating the remediation effort so it's not just here's the list of problems and good",
    "start": "2963599",
    "end": "2969599"
  },
  {
    "text": "luck or here are some policies now what it's about understanding where",
    "start": "2969599",
    "end": "2974800"
  },
  {
    "text": "we are what are the most important issues and how do we get to the best possible poster",
    "start": "2974800",
    "end": "2980240"
  },
  {
    "text": "for each and every one of our workloads once we started looking at risk policy",
    "start": "2980240",
    "end": "2987599"
  },
  {
    "text": "and remediation as a whole and had more and more discussions with organizations about this concept we've",
    "start": "2987599",
    "end": "2993440"
  },
  {
    "text": "learned that different organizations are often in different situations or maturity levels so we've built this",
    "start": "2993440",
    "end": "2999599"
  },
  {
    "text": "maturity model to help organizations identify where they are and where they would like to be",
    "start": "2999599",
    "end": "3004800"
  },
  {
    "text": "in the future we do think it's everything it's not we don't we don't think it's everything or nothing",
    "start": "3004800",
    "end": "3010400"
  },
  {
    "text": "we we think it's wherever you are you can get better what we are working on at the policy is",
    "start": "3010400",
    "end": "3015680"
  },
  {
    "text": "a solution to help organizations quickly and easily transform their risk policy and remediation processes",
    "start": "3015680",
    "end": "3023359"
  },
  {
    "text": "i really hope you've enjoyed today's session and i thank you for taking the time to learn about kubernetes policies",
    "start": "3024160",
    "end": "3029359"
  },
  {
    "text": "which is the topic that is very close to my heart and also my work at the policy i would recommend thinking about",
    "start": "3029359",
    "end": "3036240"
  },
  {
    "text": "policies in context of risk compliance and best practices while remedy remembering that eventually",
    "start": "3036240",
    "end": "3041760"
  },
  {
    "text": "policy is part of a broader process um",
    "start": "3041760",
    "end": "3046640"
  },
  {
    "text": "don't don't want to forget that we're also hiring a policy so just hop on our website and feel free",
    "start": "3047599",
    "end": "3055200"
  },
  {
    "text": "and a word from our sponsors again about kubecon at this point i'm happy to",
    "start": "3055200",
    "end": "3061520"
  },
  {
    "text": "answer any question you might have",
    "start": "3061520",
    "end": "3065359"
  },
  {
    "text": "perfect and thanks around for the great presentation uh there's a lot of information there so thanks for",
    "start": "3067359",
    "end": "3072880"
  },
  {
    "text": "patrick packaging it together for us really well um as a reminder we've got an open q a",
    "start": "3072880",
    "end": "3079680"
  },
  {
    "text": "in this zoom meeting so if you have any questions that were that popped up during the presentation please feel free to drop them in there",
    "start": "3079680",
    "end": "3086640"
  },
  {
    "text": "i'll start with the question we do have added which there was a specific person who's asking",
    "start": "3086640",
    "end": "3092640"
  },
  {
    "text": "is it possible iran for you to share the code those yaml files using for the demo um is that",
    "start": "3092640",
    "end": "3099280"
  },
  {
    "text": "something you're you're able to share i'm not sure okay cool yeah i can share it uh i just don't know",
    "start": "3099280",
    "end": "3105599"
  },
  {
    "text": "how it will be delivered because i know how to deliver the presentation but we can ask our cnc have cncf hosts",
    "start": "3105599",
    "end": "3113359"
  },
  {
    "text": "to uh to to share it as well sounds great and as a reminder to those",
    "start": "3113359",
    "end": "3118720"
  },
  {
    "text": "who might have joined a little late don't worry we've got this whole session recorded uh the content will be posted",
    "start": "3118720",
    "end": "3124240"
  },
  {
    "text": "on the cncf website later today um so there will be posterity's sake uh",
    "start": "3124240",
    "end": "3129760"
  },
  {
    "text": "some continuity from from what we discussed anyone else have any questions now is",
    "start": "3129760",
    "end": "3134880"
  },
  {
    "text": "the time to throw them into the q a i don't see him at the moment but christy let me know if you see something",
    "start": "3134880",
    "end": "3140160"
  },
  {
    "text": "different",
    "start": "3140160",
    "end": "3142400"
  },
  {
    "text": "looking good yeah couple compliments coming in we appreciate that as always",
    "start": "3150720",
    "end": "3155760"
  },
  {
    "text": "uh even if your your comments aren't questions we appreciate it a lot um there was a specific question can the",
    "start": "3155760",
    "end": "3161760"
  },
  {
    "text": "discount for ckad be applied before cubecon that's uh when i don't know",
    "start": "3161760",
    "end": "3169839"
  },
  {
    "text": "yeah i can um follow up with the person who asked that question uh separately this is christy from cncf",
    "start": "3169839",
    "end": "3175040"
  },
  {
    "text": "team so i'll follow up with you separately on that sounds good",
    "start": "3175040",
    "end": "3181838"
  },
  {
    "text": "and another question we just got for a greenfield project what is the best way to start adopting",
    "start": "3185599",
    "end": "3192800"
  },
  {
    "text": "policies around um oh that's a great question",
    "start": "3192800",
    "end": "3197839"
  },
  {
    "text": "um so for a grainfield project i would say that the best way to start",
    "start": "3197839",
    "end": "3204160"
  },
  {
    "text": "adopting the policies would be to start them to the left as much as you",
    "start": "3204160",
    "end": "3211040"
  },
  {
    "text": "can so start by uh educating um the developers and uh enforcing",
    "start": "3211040",
    "end": "3219359"
  },
  {
    "text": "policies already over there at the ci and cd processes uh making sure that uh",
    "start": "3219359",
    "end": "3226160"
  },
  {
    "text": "they don't do and don't use best bad practices uh for example like default service",
    "start": "3226160",
    "end": "3232480"
  },
  {
    "text": "accounts or using privileged workloads if they don't really have to uh so",
    "start": "3232480",
    "end": "3239040"
  },
  {
    "text": "great another question just came in um looks like there's a question are you",
    "start": "3240000",
    "end": "3245280"
  },
  {
    "text": "recommending for istio is there istio tool that you've seen a lot of action with her on any thoughts on that uh no comment",
    "start": "3245280",
    "end": "3254640"
  },
  {
    "text": "yeah i know you always have a lot of there are different uh there are different uh solutions that",
    "start": "3256000",
    "end": "3261680"
  },
  {
    "text": "can be used but service mesh in general is probably a good idea",
    "start": "3261680",
    "end": "3267520"
  },
  {
    "text": "cool any other questions in the q a i'm not",
    "start": "3267920",
    "end": "3273440"
  },
  {
    "text": "i'm not seeing any others come in but please we've still got a few minutes if anyone wants to get any further ones in",
    "start": "3273440",
    "end": "3280079"
  },
  {
    "text": "yes spence it looked like there was um someone andreas had something in the comments of why is",
    "start": "3280079",
    "end": "3286400"
  },
  {
    "text": "there a discussion about removing psp von kubernetes",
    "start": "3286400",
    "end": "3292240"
  },
  {
    "text": "um so i'm not on siege auth but from what i've seen uh and also",
    "start": "3292240",
    "end": "3298720"
  },
  {
    "text": "discussed with other people um it's kind of because of bureaucracy in a way",
    "start": "3298720",
    "end": "3304880"
  },
  {
    "text": "so there was um uh because it was mainly um uh they wanted to",
    "start": "3304880",
    "end": "3313280"
  },
  {
    "text": "know more beta forever so psp has been in as a better feature for a very very long",
    "start": "3313280",
    "end": "3318720"
  },
  {
    "text": "time and at some point um it's uh they decided no more beta forever",
    "start": "3318720",
    "end": "3326799"
  },
  {
    "text": "so um it kind of got you know like a grace period for now uh three releases forward which is about",
    "start": "3326799",
    "end": "3333760"
  },
  {
    "text": "nine to 12 months um and it will be either changed",
    "start": "3333760",
    "end": "3338880"
  },
  {
    "text": "uh with uh i don't know a v2 or maybe they would adopt gatekeeper which is",
    "start": "3338880",
    "end": "3345440"
  },
  {
    "text": "another option um that might be that might replace the psps again one of the reasons that",
    "start": "3345440",
    "end": "3351920"
  },
  {
    "text": "psp is uh is used but it's kind of hard to use it",
    "start": "3351920",
    "end": "3357119"
  },
  {
    "text": "because of all the limitations and management issues around it",
    "start": "3357119",
    "end": "3362720"
  },
  {
    "text": "cool and we had a follow-up on the istio question uh you said you said no comment what do",
    "start": "3362720",
    "end": "3368480"
  },
  {
    "text": "you mean no comment i know comment just because i i um i i don't have um",
    "start": "3368480",
    "end": "3374000"
  },
  {
    "text": "um enough um information and should you are you recommending istio is",
    "start": "3374000",
    "end": "3380240"
  },
  {
    "text": "is a very uh is a very uh general question uh recommending it in what context uh",
    "start": "3380240",
    "end": "3388079"
  },
  {
    "text": "it's it needs to be a very very specific question and you know and to to learn the project and see if it makes",
    "start": "3388079",
    "end": "3393920"
  },
  {
    "text": "sense it doesn't fit everything it's not your magic silver bullet you know that you can just",
    "start": "3393920",
    "end": "3399200"
  },
  {
    "text": "use and it will solve anything uh it's like people thought that mission controllers are a silver bullet they're not uh kubernetes as well",
    "start": "3399200",
    "end": "3406160"
  },
  {
    "text": "i heard kelsey hightower speak a few uh a couple of weeks ago i heard him say",
    "start": "3406160",
    "end": "3411599"
  },
  {
    "text": "people thought that you know they would throw kubernetes in and it will solve all their issues it's not it's it's not a solution it's",
    "start": "3411599",
    "end": "3418720"
  },
  {
    "text": "just part of a bigger scheme and you need to to look at everything around and see if it makes sense to use it",
    "start": "3418720",
    "end": "3426720"
  },
  {
    "text": "great and another attendee asked you did not talk about network policies",
    "start": "3426720",
    "end": "3432480"
  },
  {
    "text": "is this something different of our daily subject so network policies",
    "start": "3432480",
    "end": "3437599"
  },
  {
    "text": "is is somewhat of a of a different um of a different beast",
    "start": "3437599",
    "end": "3444559"
  },
  {
    "text": "and it's uh i think it's a whole webinar of its own uh that's why i didn't discuss it um",
    "start": "3444559",
    "end": "3452400"
  },
  {
    "text": "so that's mainly the reason right now and and i see that the",
    "start": "3453520",
    "end": "3460079"
  },
  {
    "text": "there's a follow-up question again on the istio so for workload segmentation yes it might be a good idea uh to use uh istio for workload",
    "start": "3460079",
    "end": "3466960"
  },
  {
    "text": "segmentation again we need to look at the specific project and specific uh scenario to see if it makes",
    "start": "3466960",
    "end": "3473440"
  },
  {
    "text": "sense or not",
    "start": "3473440",
    "end": "3475838"
  },
  {
    "text": "all right looks like we're just past the top of the hour any final questions",
    "start": "3479119",
    "end": "3484160"
  },
  {
    "text": "too many of the folks attending",
    "start": "3484160",
    "end": "3489520"
  },
  {
    "text": "christie around anything else from your side all good all right",
    "start": "3489520",
    "end": "3496640"
  },
  {
    "text": "yes indeed that's the takeaway as well but i thank you all so much for joining today i saw i think more than 100 folks",
    "start": "3496799",
    "end": "3504559"
  },
  {
    "text": "on the line so thank you very much for taking your time out of your your busy day to join us again the",
    "start": "3504559",
    "end": "3509920"
  },
  {
    "text": "webinar recording and the slides will be online later today so we look forward to seeing you at future cncf webinars",
    "start": "3509920",
    "end": "3517200"
  },
  {
    "text": "and have a fantastic day everyone awesome thank you very much spencer thank you ron",
    "start": "3517200",
    "end": "3525839"
  }
]