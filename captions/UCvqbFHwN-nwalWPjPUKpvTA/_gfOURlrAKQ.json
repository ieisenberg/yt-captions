[
  {
    "start": "0",
    "end": "101000"
  },
  {
    "text": "right good afternoon everyone the last day of cube con China",
    "start": "6480",
    "end": "13949"
  },
  {
    "text": "you're fun my colleague and I are gonna give you a brief introduction to who the",
    "start": "13949",
    "end": "19869"
  },
  {
    "text": "multi cluster special interest group in the kubernetes world is and and then",
    "start": "19869",
    "end": "24910"
  },
  {
    "text": "spend most of the time doing a deep dive into the Federation system that has been",
    "start": "24910",
    "end": "30160"
  },
  {
    "text": "built you can have a look at the API as you can have a look at the architecture and how you can use it for various",
    "start": "30160",
    "end": "35410"
  },
  {
    "text": "different things and then we'll have a Q&A at the end so this is roughly what",
    "start": "35410",
    "end": "42010"
  },
  {
    "text": "we'll cover I don't think I need to go into too much more detail there just",
    "start": "42010",
    "end": "47770"
  },
  {
    "text": "very briefly the the mission of the multi cluster special interest group is to help solve all of the common",
    "start": "47770",
    "end": "54670"
  },
  {
    "text": "challenges that relate to the management of multiple clusters and and also the applications that live in them so",
    "start": "54670",
    "end": "61629"
  },
  {
    "text": "there's a bunch of things we do api's tools documentation etc one of our big",
    "start": "61629",
    "end": "66700"
  },
  {
    "text": "projects is cluster Federation which is an entire control plane similar in size",
    "start": "66700",
    "end": "71740"
  },
  {
    "text": "and scope to kubernetes itself but to manage multiple clusters instead of multiple nodes but then we also have",
    "start": "71740",
    "end": "78490"
  },
  {
    "text": "some other sub projects and we anticipate in the future to deal with several other things related to mult managing multiple clusters",
    "start": "78490",
    "end": "87020"
  },
  {
    "text": "these are the sub projects as I mentioned Federation is the big one but we also have a cluster registry for",
    "start": "87020",
    "end": "93330"
  },
  {
    "text": "keeping track of clusters and a multi cluster ingress tool that helps you set",
    "start": "93330",
    "end": "98850"
  },
  {
    "text": "up load balancing across multiple clusters one of the questions that has",
    "start": "98850",
    "end": "104399"
  },
  {
    "start": "101000",
    "end": "101000"
  },
  {
    "text": "comes up fairly frequently is well why do people run multiple clusters and you",
    "start": "104399",
    "end": "109619"
  },
  {
    "text": "know to some people that's fairly obvious to others lesser and in fact there are numerous different reasons why",
    "start": "109619",
    "end": "114930"
  },
  {
    "text": "you might want to run multiple clusters the obvious one that a lot of people are aware of is capacity overflow so cloud",
    "start": "114930",
    "end": "122399"
  },
  {
    "text": "bursting is another name that goes by so if you have an on-premise cluster the classic example you ran out of",
    "start": "122399",
    "end": "127860"
  },
  {
    "text": "on-premise capacity and you have a bunch of users who arrive one day how do you you know make use of public cloud",
    "start": "127860",
    "end": "133980"
  },
  {
    "text": "automatically and overflow your capacity into the public cloud there are other",
    "start": "133980",
    "end": "139170"
  },
  {
    "text": "areas though you might have you might want to use public cloud but there might be some data protection reasons or other",
    "start": "139170",
    "end": "146459"
  },
  {
    "text": "reasons why you have certain sensitive workloads that need to run in one place and then other workloads that need to",
    "start": "146459",
    "end": "152820"
  },
  {
    "text": "run in another place and how do you manage that dynamically another common reason why people are interested in you",
    "start": "152820",
    "end": "159360"
  },
  {
    "text": "know hybrid or multi cloud environments multi cluster environments is to avoid you know locking into a single vendor as",
    "start": "159360",
    "end": "166260"
  },
  {
    "text": "much as some of the particularly the public cloud vendors have very good offerings you know big companies in particular",
    "start": "166260",
    "end": "173510"
  },
  {
    "text": "feel very hesitant about you know putting everything in one public cloud provider and never being able to move",
    "start": "173510",
    "end": "179609"
  },
  {
    "text": "out again so that's another common reason and you know a sub-sub section of",
    "start": "179609",
    "end": "185220"
  },
  {
    "text": "that whole area is you know if you have very big companies with mergers and acquisitions often you know many",
    "start": "185220",
    "end": "190980"
  },
  {
    "text": "companies merge together and this company chose vendor a or public cloud a and this other company Chad",
    "start": "190980",
    "end": "196920"
  },
  {
    "text": "chose a public lobby and now when they merge together that they have different clusters in different public cloud",
    "start": "196920",
    "end": "203640"
  },
  {
    "text": "providers that need to be managed and then you know arguably one of the strongest motivations is high",
    "start": "203640",
    "end": "209819"
  },
  {
    "text": "availability so if you do have an entire data center outage and these things happen you know not every day but they they",
    "start": "209819",
    "end": "216180"
  },
  {
    "text": "happen often enough that you need to be able to handle them so a single data center goes away you don't want your service to go away",
    "start": "216180",
    "end": "222840"
  },
  {
    "text": "with it so those are the you know the main areas where people are interested",
    "start": "222840",
    "end": "227910"
  },
  {
    "text": "in running multiple clusters and there are many many others as well different use cases you might have test clusters",
    "start": "227910",
    "end": "233010"
  },
  {
    "text": "and production clusters there's a scalability aspect you know kubernetes",
    "start": "233010",
    "end": "238530"
  },
  {
    "text": "clusters don't scale infinitely so if you need to run hundreds and hundreds of thousands of nodes you probably don't",
    "start": "238530",
    "end": "244769"
  },
  {
    "text": "want to build a cluster that big you probably want to build you know ten clusters of thousands of nodes each",
    "start": "244769",
    "end": "250950"
  },
  {
    "text": "rather than hundred thousand node clusters a lot of the impetus behind",
    "start": "250950",
    "end": "256549"
  },
  {
    "text": "this came from my work at Google running you know very large systems that ran",
    "start": "256549",
    "end": "262410"
  },
  {
    "text": "across many tens of clusters and some of the lessons that we learned in the problems with that and how do how to do",
    "start": "262410",
    "end": "269400"
  },
  {
    "text": "it with you know low maintenance overhead and not have this thing become the same problem that kubernetes solves",
    "start": "269400",
    "end": "275700"
  },
  {
    "text": "for nodes which is you know you have a large number of these things that you have to you have to manage manually",
    "start": "275700",
    "end": "280979"
  },
  {
    "text": "which you don't want to have to do we had two versions of the Federation",
    "start": "280979",
    "end": "287180"
  },
  {
    "start": "283000",
    "end": "283000"
  },
  {
    "text": "concept so what we've now called v1 was mostly a proof-of-concept",
    "start": "287180",
    "end": "292680"
  },
  {
    "text": "exercise taking the kubernetes api and trying to see how far we could go by using that to deploy things across",
    "start": "292680",
    "end": "299700"
  },
  {
    "text": "multiple clusters so you can imagine if you have a deployment or a replica set with multiple replicas inside it and you",
    "start": "299700",
    "end": "307200"
  },
  {
    "text": "want to make sure that that gets spread across three different clusters so that if any one goes down you only lose you",
    "start": "307200",
    "end": "313349"
  },
  {
    "text": "know one-third of your capacity and how do you do that I mean obviously you can do that manually so if you have you know",
    "start": "313349",
    "end": "319979"
  },
  {
    "text": "thirty replicas you could say right manually put ten in this cluster ten in that cluster ten in another cluster",
    "start": "319979",
    "end": "326030"
  },
  {
    "text": "because that's how many you know how much capacity I need but then one of them goes away so now you've only got 20",
    "start": "326030",
    "end": "331680"
  },
  {
    "text": "replicas left you know do you have to wake up in the middle of the night and going to add five to each of the other",
    "start": "331680",
    "end": "336900"
  },
  {
    "text": "clusters so you still have 30 replicas or does software just do that automatically for you and so you know the latter is the better",
    "start": "336900",
    "end": "343349"
  },
  {
    "text": "way to do it we then moved over so we we sort of took that we took most of the kubernetes api s and we implemented them",
    "start": "343349",
    "end": "350630"
  },
  {
    "text": "a multi cluster variance of them by adding annotations to the kubernetes api to say you know which clusters do you",
    "start": "350630",
    "end": "357380"
  },
  {
    "text": "want to go this what want this whatever it is resource to be replicated into what are the relative weights do you",
    "start": "357380",
    "end": "363800"
  },
  {
    "text": "want two-thirds in the US and one-third in Europe or you know those kinds of things and we then decided to once we'd",
    "start": "363800",
    "end": "371420"
  },
  {
    "text": "prove that out to actually create first class API objects in Federation v2 which",
    "start": "371420",
    "end": "376820"
  },
  {
    "text": "which give you much more stronger constructs to be able to express these",
    "start": "376820",
    "end": "382100"
  },
  {
    "text": "things and and build controllers around them that are more reliable the other",
    "start": "382100",
    "end": "389330"
  },
  {
    "text": "aspect of Federation v2 you know the first one was kind of a pretty quickly hacked together proof of concept but it",
    "start": "389330",
    "end": "396980"
  },
  {
    "text": "wasn't built by very strong software engineering standard so it was fairly monolithic we had a big controller for",
    "start": "396980",
    "end": "403700"
  },
  {
    "text": "replica sets that knew how to spread them across clusters we had another controller for you know other things",
    "start": "403700",
    "end": "409520"
  },
  {
    "text": "daemon sets and stateful sets etc but we decided to break this into more reusable",
    "start": "409520",
    "end": "416210"
  },
  {
    "text": "components that that you can then you know plug together for different use cases",
    "start": "416210",
    "end": "422470"
  },
  {
    "start": "422000",
    "end": "422000"
  },
  {
    "text": "and so it's based on CR DS it allows",
    "start": "422470",
    "end": "428760"
  },
  {
    "text": "Federation of any kind of resource so you don't actually have to write custom code per resource anymore in Federation",
    "start": "428760",
    "end": "435520"
  },
  {
    "text": "v2 you can federate your own CR DS so if you define your own custom resources in",
    "start": "435520",
    "end": "441130"
  },
  {
    "text": "kubernetes land you can you can just configuration to the Federation control",
    "start": "441130",
    "end": "446890"
  },
  {
    "text": "plane that will then be able to federate those across multiple clusters and I",
    "start": "446890",
    "end": "451930"
  },
  {
    "text": "think around about this point I'm gonna hand over to my esteemed colleague Irfan who's been spearheading the Federation",
    "start": "451930",
    "end": "459400"
  },
  {
    "text": "version 2 implementation and he's gonna take you into some of the details of the API is the architecture how it all fits",
    "start": "459400",
    "end": "465970"
  },
  {
    "text": "together and hopefully convince you that this is a good idea thanks Peter hello",
    "start": "465970",
    "end": "474670"
  },
  {
    "text": "folks so I have tried to keep it simple like the intention of this deep dive was",
    "start": "474670",
    "end": "482770"
  },
  {
    "text": "to tell you about the nuts and bolts of what Federation implementation it is",
    "start": "482770",
    "end": "488020"
  },
  {
    "text": "today so let's just jump right into so a",
    "start": "488020",
    "end": "494169"
  },
  {
    "text": "couple of people who were there in the intro yesterday I did show this particular slide yesterday also it looks",
    "start": "494169",
    "end": "501700"
  },
  {
    "text": "like a little cryptic diagram let's come",
    "start": "501700",
    "end": "506770"
  },
  {
    "text": "back to it later so I just showed your games to it and let's come back to it later let me break it down a little so",
    "start": "506770",
    "end": "515310"
  },
  {
    "text": "Quinton did talk about that we in Federation v2 we have broken down the",
    "start": "515310",
    "end": "521620"
  },
  {
    "text": "API so for example you are trying to federate a secret I'm taking an example of a simple resource which is secret it",
    "start": "521620",
    "end": "528790"
  },
  {
    "text": "does not does not have many fields and all that stuff so to federate a secret",
    "start": "528790",
    "end": "533920"
  },
  {
    "text": "what does it take so I'm showing some mammals to you first of all so this is a",
    "start": "533920",
    "end": "540430"
  },
  {
    "text": "type configure Amal so this type configure mil is to be used by the administrator so the admin can define",
    "start": "540430",
    "end": "548350"
  },
  {
    "text": "what is the type of my target which is going to be in the cluster so secret is",
    "start": "548350",
    "end": "553990"
  },
  {
    "text": "the type of the target so if you see here at the bottom there is a target which say sky in and",
    "start": "553990",
    "end": "560050"
  },
  {
    "text": "version so it also the admin can also specify what is the version to be used when creating or updating resources into",
    "start": "560050",
    "end": "566560"
  },
  {
    "text": "the particular clusters so that is specified by the target which is a roughly the sixth line from the bottom",
    "start": "566560",
    "end": "574080"
  },
  {
    "text": "then couple of other things because we have broken down the single federated resource into multiple types so you have",
    "start": "574080",
    "end": "581410"
  },
  {
    "text": "a placement you have overrides and a template template is basically nothing but the target specification and one",
    "start": "581410",
    "end": "591040"
  },
  {
    "text": "more field which I have marked as blue is of particular interest which is propagation so admin can also define",
    "start": "591040",
    "end": "598030"
  },
  {
    "text": "using this type or using this definition that for this particular target type",
    "start": "598030",
    "end": "604200"
  },
  {
    "text": "propagation should be enabled or disabled propagation true means the sync",
    "start": "604200",
    "end": "609610"
  },
  {
    "text": "controller which is the controller associated with this will if federated type secret is created in Federation",
    "start": "609610",
    "end": "616660"
  },
  {
    "text": "control plane then it will be propagated to individual clusters if it is false it will not be so it will just be defaulted",
    "start": "616660",
    "end": "626130"
  },
  {
    "text": "now let's see so we can also mention that we have come to a place where all",
    "start": "626130",
    "end": "631690"
  },
  {
    "text": "of our implementation is CRD based so when we talk about say federated type it",
    "start": "631690",
    "end": "637090"
  },
  {
    "text": "is a cre installed so this is so cid enables you to define your types and the",
    "start": "637090",
    "end": "642520"
  },
  {
    "text": "spec for that type so i the spec or the field specification is validated using a validation schema which i have skipped",
    "start": "642520",
    "end": "649240"
  },
  {
    "text": "from here because it's a long list i have tried to just give you some names",
    "start": "649240",
    "end": "654340"
  },
  {
    "text": "of what the types are so the three core of primitive types are this one is",
    "start": "654340",
    "end": "660040"
  },
  {
    "text": "particularly the template so for a secret our user would need to create a",
    "start": "660040",
    "end": "666010"
  },
  {
    "text": "federated secret which is which will wrap around a secret definition so in in",
    "start": "666010",
    "end": "674680"
  },
  {
    "text": "k test you would have a sacred secret definition which will have fields like say data or type of that data and couple",
    "start": "674680",
    "end": "680980"
  },
  {
    "text": "of other fields so that will be part of the template it will it it's the same type which is used in caters",
    "start": "680980",
    "end": "687280"
  },
  {
    "text": "the next one is the placement placement defines which clusters it should go into",
    "start": "687280",
    "end": "693810"
  },
  {
    "text": "so if you see the kind we have specified the name we just what we do is we append",
    "start": "693810",
    "end": "701790"
  },
  {
    "text": "federated and placement to the type now",
    "start": "701790",
    "end": "708520"
  },
  {
    "text": "that was the CID definition this is actually the resource so if you the for",
    "start": "708520",
    "end": "714940"
  },
  {
    "text": "example a template I am not showing you override not to overwhelm you right now so this is you saw this is the CID",
    "start": "714940",
    "end": "723220"
  },
  {
    "text": "definition and this is what actually the resource will look like so it it is a",
    "start": "723220",
    "end": "730960"
  },
  {
    "text": "federated secret and it has a name I have given it a test secret and template",
    "start": "730960",
    "end": "736870"
  },
  {
    "text": "is what it is exactly the same data which actually acade a secret has",
    "start": "736870",
    "end": "742680"
  },
  {
    "text": "placement is nothing cryptic all we do is just the name of the clusters list of",
    "start": "742920",
    "end": "749170"
  },
  {
    "text": "names of the clusters which the Federation knows about so there could be",
    "start": "749170",
    "end": "755320"
  },
  {
    "text": "any names which could be populated over here but if Federation doesn't know about those names and they'll just be",
    "start": "755320",
    "end": "760930"
  },
  {
    "text": "discarded this is an override object just to give",
    "start": "760930",
    "end": "767259"
  },
  {
    "text": "you a gist so you see overwrites at the bottom rest of all are just kind and type and all that if you see at the bottom last three",
    "start": "767259",
    "end": "773859"
  },
  {
    "text": "lines for a given cluster that particular field data should be",
    "start": "773859",
    "end": "779649"
  },
  {
    "text": "overwritten with null so you saw here this is this is the template which a",
    "start": "779649",
    "end": "786699"
  },
  {
    "text": "user is going to create in federal Federation control plane and the specified data over here is a some some",
    "start": "786699",
    "end": "795039"
  },
  {
    "text": "token and the type is opaque but user",
    "start": "795039",
    "end": "801279"
  },
  {
    "text": "also wants that that same data should not be propagated to cluster two so only one field which is data should be",
    "start": "801279",
    "end": "808359"
  },
  {
    "text": "overridden in cluster two so when a secret is created in cluster two the field data will be populated with nil it",
    "start": "808359",
    "end": "813699"
  },
  {
    "text": "wouldn't have any value so what it is giving you is it is giving",
    "start": "813699",
    "end": "818720"
  },
  {
    "text": "you the most basic level primitives using which you can create the resources",
    "start": "818720",
    "end": "826310"
  },
  {
    "text": "in individual clusters with the values you want for those resources and I am",
    "start": "826310",
    "end": "832550"
  },
  {
    "text": "showing this with an example of a secret but it is possible to do this exactly",
    "start": "832550",
    "end": "837800"
  },
  {
    "text": "same things with even the CRD types which are probably the most advanced or the more common or most complex things or say a deployment type or a replica",
    "start": "837800",
    "end": "844579"
  },
  {
    "text": "set type now coming back to that same",
    "start": "844579",
    "end": "850279"
  },
  {
    "start": "848000",
    "end": "848000"
  },
  {
    "text": "diagram so I have taken only this much consider this as the basic primitives",
    "start": "850279",
    "end": "855620"
  },
  {
    "text": "layer which has a template placement and override and there are three configurations generally done by admin",
    "start": "855620",
    "end": "862190"
  },
  {
    "text": "so there is a cluster configuration so there is a tool which we have written",
    "start": "862190",
    "end": "867529"
  },
  {
    "text": "which is called view fed to and join you can join a cluster to this Federation",
    "start": "867529",
    "end": "873800"
  },
  {
    "text": "after you have deployed the Federation you can say queue fed to join cluster one which is probably the name of the",
    "start": "873800",
    "end": "880370"
  },
  {
    "text": "context which you have in your queue config file for that cluster so then",
    "start": "880370",
    "end": "886190"
  },
  {
    "text": "once you do this the Federation knows about that cluster you can join as many clusters as you want they could be in different clouds they could be on Prem",
    "start": "886190",
    "end": "894290"
  },
  {
    "text": "or given that the clusters are accessible on the network reachable to those questions",
    "start": "894290",
    "end": "901090"
  },
  {
    "text": "so this is done by admin then the federated type configure a source is",
    "start": "901090",
    "end": "907210"
  },
  {
    "text": "what also created by the admin and it defines what are the associated type for",
    "start": "907210",
    "end": "913690"
  },
  {
    "text": "say a target secret in a particular cluster which reserved which reside in",
    "start": "913690",
    "end": "919540"
  },
  {
    "text": "the federation control plane the placement the override and the template and then there is an Associated",
    "start": "919540",
    "end": "926950"
  },
  {
    "text": "controller that controller would once these are configured the controller",
    "start": "926950",
    "end": "932230"
  },
  {
    "text": "would know about the clusters controller will would know about okay this for this particular type if I find the resource",
    "start": "932230",
    "end": "938650"
  },
  {
    "text": "created in control plane I should propagate in particular fashion and it will do that propagation or not",
    "start": "938650",
    "end": "946079"
  },
  {
    "text": "so now coming back to that full diagram so you have the basic types and using",
    "start": "947770",
    "end": "954080"
  },
  {
    "text": "which you get all the primitives which you can use to create specific resources",
    "start": "954080",
    "end": "962270"
  },
  {
    "text": "or with over aidable types or with different fields in individual clusters",
    "start": "962270",
    "end": "967310"
  },
  {
    "text": "the most simple type would be that you just create a template and there is no placement and there is no override so",
    "start": "967310",
    "end": "973940"
  },
  {
    "text": "the same resource will be just propagated to all the questions there is a possibility of writing higher-level",
    "start": "973940",
    "end": "980900"
  },
  {
    "text": "more complex schedulers or more complex controllers using those same primitives we have implemented some we have",
    "start": "980900",
    "end": "986510"
  },
  {
    "text": "implemented cross cluster service discovery which uses similar primitives and enables the discovery of services",
    "start": "986510",
    "end": "994610"
  },
  {
    "text": "across the questions and we have implemented some scheduling logic also",
    "start": "994610",
    "end": "1000070"
  },
  {
    "text": "using which replica based workloads like the deployment and replica sets can be",
    "start": "1000070",
    "end": "1005260"
  },
  {
    "text": "shed you'll de cross clusters such that you the user defines the total replicas which needs to be distributed in the",
    "start": "1005260",
    "end": "1011410"
  },
  {
    "text": "clusters and in case of failures or problems of clustering pleasure going out and coming in the workload total",
    "start": "1011410",
    "end": "1017230"
  },
  {
    "text": "replicas are still maintained across the questions and the same exactly same things are",
    "start": "1017230",
    "end": "1024920"
  },
  {
    "text": "possible for CRT types also so if the one of the main reasons we decompose the API into different types was this to",
    "start": "1024920",
    "end": "1032420"
  },
  {
    "text": "enable users to compose functionality using some primitives and writing their",
    "start": "1032420",
    "end": "1038569"
  },
  {
    "text": "own controllers if there are there is need",
    "start": "1038569",
    "end": "1042400"
  },
  {
    "start": "1043000",
    "end": "1043000"
  },
  {
    "text": "okay diving a little deep into the nuts and bolts of the controllers so Federation",
    "start": "1044630",
    "end": "1054060"
  },
  {
    "text": "API is all CR DS so on a given API server you install all the CR DS for the Federation then the first thing I told",
    "start": "1054060",
    "end": "1062580"
  },
  {
    "text": "you about the type config which is defined by an admin so a type config",
    "start": "1062580",
    "end": "1067830"
  },
  {
    "text": "controller with basically watches for that particular type and if it sees that there is a type config created then it",
    "start": "1067830",
    "end": "1075120"
  },
  {
    "text": "spawns controllers which we call the which I mentioned a sink controller so",
    "start": "1075120",
    "end": "1080820"
  },
  {
    "text": "it spawns the same sink controller but with that target type so the code base is all same for syncing the primitives",
    "start": "1080820",
    "end": "1087720"
  },
  {
    "text": "it's one controller but it is configured with all the different target types so it could be configured with a CRT type",
    "start": "1087720",
    "end": "1093930"
  },
  {
    "text": "also it could be configured with a simple type which is already existing in kaydessa so as of now which is the",
    "start": "1093930",
    "end": "1099420"
  },
  {
    "text": "secret and that controller basically starts sync loop which looks for the",
    "start": "1099420",
    "end": "1107340"
  },
  {
    "text": "associated federated types which will be the Federated secret federated placement",
    "start": "1107340",
    "end": "1112590"
  },
  {
    "text": "and federated overrides same way if it sees I mean this is just for",
    "start": "1112590",
    "end": "1118560"
  },
  {
    "text": "illustration if it sees that there is a federated type conf created for services it will start the same same controller",
    "start": "1118560",
    "end": "1124020"
  },
  {
    "text": "for services in case the type config says propagation disabled well I showed",
    "start": "1124020",
    "end": "1130980"
  },
  {
    "text": "one field which was propagation as enabled true or false if it sees a propagation delay will disabled all the",
    "start": "1130980",
    "end": "1136830"
  },
  {
    "text": "type config to remove then it can basically so the this can be done for",
    "start": "1136830",
    "end": "1143520"
  },
  {
    "text": "all the types at the dimension so different type CRE types all that",
    "start": "1143520",
    "end": "1149450"
  },
  {
    "text": "later if it sees that there is the type 1 fig delete it or disable it'll just",
    "start": "1149450",
    "end": "1154970"
  },
  {
    "text": "stop the sync controller for that particular type and that's how this controller logic works similarly the",
    "start": "1154970",
    "end": "1163309"
  },
  {
    "start": "1163000",
    "end": "1163000"
  },
  {
    "text": "scheduler controllers are also read written so there is a scheduler manager and different schedulers the scheduler",
    "start": "1163309",
    "end": "1170000"
  },
  {
    "text": "manager watches for the same target types so the scheduler basically works",
    "start": "1170000",
    "end": "1175190"
  },
  {
    "text": "on a target type so scheduler can be associated with a deployment or a replica set which needs some kind of",
    "start": "1175190",
    "end": "1181399"
  },
  {
    "text": "scheduling all say jobs which needs some kind of scheduling a simple type like secret does not need any scheduling so",
    "start": "1181399",
    "end": "1187730"
  },
  {
    "text": "associated scheduling controller would be started if the scheduler manager sees",
    "start": "1187730",
    "end": "1194029"
  },
  {
    "text": "that that target type is there and same way if it sees the target type is",
    "start": "1194029",
    "end": "1200210"
  },
  {
    "text": "removed or the type config for that self is removed then it will stop the",
    "start": "1200210",
    "end": "1205220"
  },
  {
    "text": "particular regular so if that's the target type is removed",
    "start": "1205220",
    "end": "1211299"
  },
  {
    "text": "all the type config is removed it stops that shred Allah this is about the",
    "start": "1211299",
    "end": "1219450"
  },
  {
    "start": "1217000",
    "end": "1217000"
  },
  {
    "text": "grouping of the API so how we are grouping the Federation API is those",
    "start": "1219450",
    "end": "1225850"
  },
  {
    "text": "primitives what we call the three basic types we are calling them primitives or",
    "start": "1225850",
    "end": "1230880"
  },
  {
    "text": "we also call them core earlier and the type config which basically defines what",
    "start": "1230880",
    "end": "1240730"
  },
  {
    "text": "are the associations between different types and there is a propagated version so the sync controller basically uses",
    "start": "1240730",
    "end": "1247269"
  },
  {
    "text": "the propagated version to differentiate between what is the resource which is in",
    "start": "1247269",
    "end": "1253690"
  },
  {
    "text": "the cluster and what was the desired resource which is in the Federation control plane this this we have used",
    "start": "1253690",
    "end": "1260139"
  },
  {
    "text": "differently because yesterday somebody asked a question about versions so",
    "start": "1260139",
    "end": "1265659"
  },
  {
    "text": "Federation control plane mites might have a template versions say secrets be",
    "start": "1265659",
    "end": "1271120"
  },
  {
    "text": "one of even secrets whereas the target cluster can handle only say v1 beta-1",
    "start": "1271120",
    "end": "1278139"
  },
  {
    "text": "secrets so but the API when it is",
    "start": "1278139",
    "end": "1283149"
  },
  {
    "text": "submitted it is backward compatible the ke test will honor it and the secret would be created but to compare the two",
    "start": "1283149",
    "end": "1290230"
  },
  {
    "text": "resources we use the generation or the we basically use the generation which is",
    "start": "1290230",
    "end": "1296799"
  },
  {
    "text": "specified in the metadata of that particular resource for that we use this propagated version scheduling resources",
    "start": "1296799",
    "end": "1304659"
  },
  {
    "text": "are our scheduling types are put into scheduling group and we have the service",
    "start": "1304659",
    "end": "1312039"
  },
  {
    "text": "or the networking types we have put them in multicast DNS each of them have a",
    "start": "1312039",
    "end": "1318460"
  },
  {
    "text": "much more complex or deeper you know explanation which can be given but given",
    "start": "1318460",
    "end": "1326799"
  },
  {
    "text": "the time limitations I can't go and deeper into those things okay so there",
    "start": "1326799",
    "end": "1335110"
  },
  {
    "start": "1331000",
    "end": "1331000"
  },
  {
    "text": "is one more point that for a for a target type we are creating different resources they all are conveying",
    "start": "1335110",
    "end": "1343500"
  },
  {
    "text": "one or they are all are converging into a creation of one resource of one particular type how do we map them so",
    "start": "1343500",
    "end": "1350700"
  },
  {
    "text": "each type and quotes the targets name so if you say I'm creating a taking an",
    "start": "1350700",
    "end": "1357419"
  },
  {
    "text": "example of a replica site I am I created a federated replica set I created a placement for that I created an override",
    "start": "1357419",
    "end": "1362820"
  },
  {
    "text": "for that all of them would be named the same so that's how the linking happens",
    "start": "1362820",
    "end": "1369080"
  },
  {
    "text": "and the target in the target clusters would also be named the same so my RS if",
    "start": "1369080",
    "end": "1376020"
  },
  {
    "text": "that is what is the name use the target cluster will get the replica set with that name scheduling is the same so if a",
    "start": "1376020",
    "end": "1383460"
  },
  {
    "text": "scheduler is enabled for replica sets with the name IRS then the scheduling",
    "start": "1383460",
    "end": "1390470"
  },
  {
    "text": "intent which is specified in the replica scheduling preferences which is probably",
    "start": "1390470",
    "end": "1395850"
  },
  {
    "text": "the total number of replicas and the weights which it needs to give to individual clusters would also be named",
    "start": "1395850",
    "end": "1401250"
  },
  {
    "text": "the same same is with services now coming to so",
    "start": "1401250",
    "end": "1410990"
  },
  {
    "text": "all this file what we had to do was I specified different API types and all that stuff if you see Kate s it was all",
    "start": "1410990",
    "end": "1420470"
  },
  {
    "text": "hand curated code earlier then the API machinery has been evolving and they are providing as mechanisms to you know",
    "start": "1420470",
    "end": "1427430"
  },
  {
    "text": "extend the API so we started with this project when we started we started with",
    "start": "1427430",
    "end": "1433430"
  },
  {
    "text": "API server builder which provided nonces to aggregate another API server with the",
    "start": "1433430",
    "end": "1438470"
  },
  {
    "text": "existing KS API server so that API server builder provided mechanisms to",
    "start": "1438470",
    "end": "1443630"
  },
  {
    "text": "bootstrap the API code and auto generate some code clients and all that stuff later we moved on to a queue builder",
    "start": "1443630",
    "end": "1451760"
  },
  {
    "text": "which basically provides you mechanisms to bootstrap API code when you want to",
    "start": "1451760",
    "end": "1458929"
  },
  {
    "text": "install it as a CR D now we are trying to even move one step further that we",
    "start": "1458929",
    "end": "1465350"
  },
  {
    "text": "don't have to write any code for that so if say you as a user want to federate a particular type a cid type or a type",
    "start": "1465350",
    "end": "1472940"
  },
  {
    "text": "which is not already the port for which is already not already there in today's federation v2 repo you can just simply",
    "start": "1472940",
    "end": "1480260"
  },
  {
    "text": "use the tool and it will auto generate the cid definitions and it will install",
    "start": "1480260",
    "end": "1485960"
  },
  {
    "text": "that on to your target API server so queue fit federate enable HPA is that",
    "start": "1485960",
    "end": "1493220"
  },
  {
    "text": "that command so it will create the different types for or the type",
    "start": "1493220",
    "end": "1498740"
  },
  {
    "text": "definitions for the associated types that might be there so HPA I chose because that is something which is not",
    "start": "1498740",
    "end": "1504800"
  },
  {
    "text": "there in the Federation's current repo the code for the API logic is not there",
    "start": "1504800",
    "end": "1513490"
  },
  {
    "text": "so it is as simple as Auto generation of that definitions is as simple as",
    "start": "1513880",
    "end": "1519559"
  },
  {
    "text": "federate enable HPA which is a type you can as well right horizontal pod auto scalars all the short name or the plural",
    "start": "1519559",
    "end": "1526640"
  },
  {
    "text": "name it will take any of that and disable is as simple as that disable",
    "start": "1526640",
    "end": "1532780"
  },
  {
    "text": "only disable the propagation it will just turn the propagation to false but",
    "start": "1532780",
    "end": "1538960"
  },
  {
    "text": "if you want to remove the CID definitions or then stall definitions from the API server you can as well use delete from API so I'll just show you",
    "start": "1538960",
    "end": "1549010"
  },
  {
    "text": "that how that works so let's see this",
    "start": "1549010",
    "end": "1554200"
  },
  {
    "text": "there is an there's a command in cube CTL which says API resources so what it",
    "start": "1554200",
    "end": "1560530"
  },
  {
    "text": "lists is it lists the available resource types",
    "start": "1560530",
    "end": "1568690"
  },
  {
    "text": "including the CRD types so it will list what so this is against kubernetes",
    "start": "1568690",
    "end": "1574460"
  },
  {
    "text": "cluster I am running so it is listening all the types and their kinds and their groups and all that stuff let's let me",
    "start": "1574460",
    "end": "1583010"
  },
  {
    "text": "just filter it for okay let me just",
    "start": "1583010",
    "end": "1593210"
  },
  {
    "text": "filter federated types so there are some federated types already installed so",
    "start": "1593210",
    "end": "1599029"
  },
  {
    "text": "these are the available federated types as of now so you see if federated config map deployments ingress and I mean all",
    "start": "1600920",
    "end": "1610560"
  },
  {
    "text": "those which we have already federated and are available in the Federation v2 report",
    "start": "1610560",
    "end": "1617059"
  },
  {
    "text": "now let's see",
    "start": "1619179",
    "end": "1622528"
  },
  {
    "text": "so you see a horizontal part autoscaler is available from the existing API",
    "start": "1629150",
    "end": "1634700"
  },
  {
    "text": "resource which is in the cases API what we are looking for is the definition of",
    "start": "1634700",
    "end": "1640820"
  },
  {
    "text": "the same to be installed which is the Federated counterpart of this target",
    "start": "1640820",
    "end": "1646340"
  },
  {
    "text": "type which will be the Federated horizontal part of the school and scalar and the Federated horizontal part",
    "start": "1646340",
    "end": "1651740"
  },
  {
    "text": "autoscaler placement and overrides",
    "start": "1651740",
    "end": "1655360"
  },
  {
    "text": "I will output what it actually creates",
    "start": "1656750",
    "end": "1662090"
  },
  {
    "text": "or creates against the API using Yami - oh yeah Mel",
    "start": "1662090",
    "end": "1668799"
  },
  {
    "text": "I hope it's legible so you see it is it",
    "start": "1673440",
    "end": "1684720"
  },
  {
    "text": "created type config which I showed the amyl for which is the type configuration by the admin so this also is something",
    "start": "1684720",
    "end": "1691020"
  },
  {
    "text": "the admin I really would do a user would just use the control plane to create his",
    "start": "1691020",
    "end": "1697050"
  },
  {
    "text": "resources so there is a type config created and then it will tell the",
    "start": "1697050",
    "end": "1703860"
  },
  {
    "text": "associated target and the kind is this and it just used the highest available",
    "start": "1703860",
    "end": "1709020"
  },
  {
    "text": "version from the target API server",
    "start": "1709020",
    "end": "1714410"
  },
  {
    "text": "then if you come down it has created the definitions for the associated type so",
    "start": "1714880",
    "end": "1720490"
  },
  {
    "text": "all of those are CR DS and if you see the type of this particular CI DS",
    "start": "1720490",
    "end": "1727480"
  },
  {
    "text": "federated horizontal part autoscaler which just wraps around the target template so when a user creates a",
    "start": "1727480",
    "end": "1733000"
  },
  {
    "text": "federated horizontal part or the scalar he'll actually be giving the definition of the quad autoscaler which he wants to",
    "start": "1733000",
    "end": "1738370"
  },
  {
    "text": "create in the target clusters and then there is a placement so",
    "start": "1738370",
    "end": "1746360"
  },
  {
    "text": "placement is a list of questions list of known clusters",
    "start": "1746360",
    "end": "1751149"
  },
  {
    "text": "so now let me do the same thing so you",
    "start": "1751590",
    "end": "1757950"
  },
  {
    "text": "see these types are now available so the resources are now available against the same API server so the original resource",
    "start": "1757950",
    "end": "1764879"
  },
  {
    "text": "which was available was the horizontal part or a scaler we have now the placement and the template overwrites we",
    "start": "1764879",
    "end": "1774720"
  },
  {
    "text": "are working on so overwrites we have a mechanism where we can override particular field but there's the generic",
    "start": "1774720",
    "end": "1781590"
  },
  {
    "text": "way where we we should be able to override any field in any of the target resources just by specifying the path",
    "start": "1781590",
    "end": "1787499"
  },
  {
    "text": "for example spec dot replicas is what you want to update or spec dot min limit maximum it is what you want to override",
    "start": "1787499",
    "end": "1793889"
  },
  {
    "text": "for cluster is in the pipeline",
    "start": "1793889",
    "end": "1798919"
  },
  {
    "text": "so the next step could be once this is done by the admin the user actually goes",
    "start": "1800869",
    "end": "1806100"
  },
  {
    "text": "ahead and creates the resources the resources which the user wants to create or the application which user was to",
    "start": "1806100",
    "end": "1812940"
  },
  {
    "text": "deploy into individual clusters it could be a set of yah meals all of them could be converted using this and then just",
    "start": "1812940",
    "end": "1819179"
  },
  {
    "text": "created into individual clusters so you have five clusters or ten clusters where you want to deploy a particular",
    "start": "1819179",
    "end": "1825559"
  },
  {
    "text": "application and you don't want to interact with each of the clusters you can just do this federate you create the",
    "start": "1825559",
    "end": "1831720"
  },
  {
    "text": "types here and then after that you deploy your application",
    "start": "1831720",
    "end": "1836748"
  },
  {
    "start": "1838000",
    "end": "1838000"
  },
  {
    "text": "so the next step for this would also be like I already have an existing",
    "start": "1841620",
    "end": "1847570"
  },
  {
    "text": "application with say a helm charts kind of stuff or you have a list of URLs for",
    "start": "1847570",
    "end": "1855400"
  },
  {
    "text": "the application which comprises of same say deployments replica sets some services front-end back-end all that",
    "start": "1855400",
    "end": "1861790"
  },
  {
    "text": "stuff so we are working on providing a mechanism where you can just up convert all of that into the federated types so",
    "start": "1861790",
    "end": "1869880"
  },
  {
    "text": "if you use this is something in pipeline and we are working on this so you say",
    "start": "1869880",
    "end": "1875050"
  },
  {
    "text": "cuvette federate up convert my some application okay and you should just be",
    "start": "1875050",
    "end": "1882100"
  },
  {
    "text": "able to so this should just be able to give you the MLS for that application or if you choose so it should just be",
    "start": "1882100",
    "end": "1889600"
  },
  {
    "text": "created in Federation control plane so the application gets deployed and all the clusters wherever you want and which",
    "start": "1889600",
    "end": "1896790"
  },
  {
    "text": "obviously overrides are not created right now if you want customizations in",
    "start": "1896790",
    "end": "1902650"
  },
  {
    "text": "each of the clusters you can change the overrides fill the data that you want to",
    "start": "1902650",
    "end": "1907840"
  },
  {
    "text": "be customizing in the overrides and create the overrides and the customizations would be applied to those",
    "start": "1907840",
    "end": "1914080"
  },
  {
    "text": "clusters you okay so already supported use cases",
    "start": "1914080",
    "end": "1921169"
  },
  {
    "start": "1918000",
    "end": "1918000"
  },
  {
    "text": "which are available with the working group is we can so simple logic you can",
    "start": "1921169",
    "end": "1928999"
  },
  {
    "text": "deploy unified workloads across multiple clusters with active reconciliation it's",
    "start": "1928999",
    "end": "1934129"
  },
  {
    "text": "not like you have deployed and forget once if there is something changed in the cluster it'll it'll remain changed a",
    "start": "1934129",
    "end": "1939919"
  },
  {
    "text": "reconciliation will happen periodically and you can also do clusters cluster",
    "start": "1939919",
    "end": "1946039"
  },
  {
    "text": "specific optima customizations we are",
    "start": "1946039",
    "end": "1951739"
  },
  {
    "text": "have implemented a cross cluster service discovery which is also a very good networking feature in which case if you",
    "start": "1951739",
    "end": "1957289"
  },
  {
    "text": "want to deploy an application across clusters and the endpoint reachable across clusters there is a mechanism to",
    "start": "1957289",
    "end": "1963739"
  },
  {
    "text": "do that we have implemented a dynamic rebalancing of replica workloads we have",
    "start": "1963739",
    "end": "1972739"
  },
  {
    "text": "also implemented namespace Federation's so that the same cluster can a same set",
    "start": "1972739",
    "end": "1978049"
  },
  {
    "text": "of clusters can be used by by different users so one user deploys the Federation",
    "start": "1978049",
    "end": "1987950"
  },
  {
    "text": "in one namespace another user can use the same base cluster to deploy flood protection in another namespace same way",
    "start": "1987950",
    "end": "1993889"
  },
  {
    "text": "the workloads can also be deployed in two different clusters in different namespaces by the same users",
    "start": "1993889",
    "end": "2000179"
  },
  {
    "text": "and we have almost completed federating Nek this API resource without writing",
    "start": "2000179",
    "end": "2006210"
  },
  {
    "text": "any code so in pipeline we are working on",
    "start": "2006210",
    "end": "2011730"
  },
  {
    "start": "2008000",
    "end": "2008000"
  },
  {
    "text": "overrides for arbitrary fields any fields we are working on status",
    "start": "2011730",
    "end": "2017080"
  },
  {
    "text": "aggregation we are working on more high-level scheduling resources and",
    "start": "2017080",
    "end": "2023100"
  },
  {
    "text": "tooling to ease translation of existing katas resources if they just need to be deployed in multiple clusters or",
    "start": "2023100",
    "end": "2030370"
  },
  {
    "text": "migrated there is another use case where is such that you have one cluster you have your deployed workload you want to",
    "start": "2030370",
    "end": "2037059"
  },
  {
    "text": "migrate so you can use Federation for that you just you just the Fed rate or",
    "start": "2037059",
    "end": "2043480"
  },
  {
    "text": "up convert that particular workload and then apply the placement in place of",
    "start": "2043480",
    "end": "2048940"
  },
  {
    "text": "cluster number one you can put it in cluster number two okay I think I almost",
    "start": "2048940",
    "end": "2054638"
  },
  {
    "text": "ran over time so this is what I there are more things I can explain but we are",
    "start": "2054639",
    "end": "2060790"
  },
  {
    "text": "running out of time so I can take questions as of now if they right",
    "start": "2060790",
    "end": "2065250"
  },
  {
    "text": "sure it is",
    "start": "2067119",
    "end": "2073750"
  },
  {
    "text": "the Federation API do the similar scenes in different custom but is there any",
    "start": "2073750",
    "end": "2080950"
  },
  {
    "text": "plan that the federal the Federation I can do different behavior in different",
    "start": "2080950",
    "end": "2087388"
  },
  {
    "text": "custards if we want to change the width between different caster we may change changing",
    "start": "2087389",
    "end": "2095230"
  },
  {
    "text": "the bomb replicas in the first cluster from three to one and another from one",
    "start": "2095230",
    "end": "2100750"
  },
  {
    "text": "to three is there any plan for days exactly this is doable by overrides overrides are meant exactly for this so",
    "start": "2100750",
    "end": "2107410"
  },
  {
    "text": "if you want to create a replica set same replica set but with different number of replicas and different clusters you use",
    "start": "2107410",
    "end": "2114280"
  },
  {
    "text": "override to specify that hi I have a",
    "start": "2114280",
    "end": "2122020"
  },
  {
    "text": "question so if you define the federated type of survey resource and users theory",
    "start": "2122020",
    "end": "2128940"
  },
  {
    "text": "in their individual cluster still creates the same resource how does the",
    "start": "2128940",
    "end": "2133990"
  },
  {
    "text": "conflict get resolved and is that an intended usage or you should advocate",
    "start": "2133990",
    "end": "2139080"
  },
  {
    "text": "everything goes through federated no so the individual clusters are also",
    "start": "2139080",
    "end": "2145300"
  },
  {
    "text": "accessible directly and users can update that or it's a a controller can update that but I mentioned in one of the slice",
    "start": "2145300",
    "end": "2153250"
  },
  {
    "text": "that there is an active reconciliation that's the whole point of active reconciliation that whatever is the",
    "start": "2153250",
    "end": "2158620"
  },
  {
    "text": "intent which is specified in the Federation control plane it will always be updated eventually so user doesn't",
    "start": "2158620",
    "end": "2165010"
  },
  {
    "text": "update the controller from here will update it again it'll notice that yes",
    "start": "2165010",
    "end": "2170850"
  },
  {
    "text": "you can think of it in the same way as if you've gone to a node in kubernetes and you terminate the pod then your",
    "start": "2170850",
    "end": "2177550"
  },
  {
    "text": "replication controller is going to make the",
    "start": "2177550",
    "end": "2181530"
  },
  {
    "text": "I mean I have a cousin for the federated",
    "start": "2183220",
    "end": "2191200"
  },
  {
    "text": "walk road API analysts say yeah I want you to play like a 100 replicas across",
    "start": "2191200",
    "end": "2198760"
  },
  {
    "text": "several clusters do I have it to specifies how many replicas so his",
    "start": "2198760",
    "end": "2208810"
  },
  {
    "text": "question is he wants to deploy say 100 replicas across many clusters some set",
    "start": "2208810",
    "end": "2215200"
  },
  {
    "text": "of clusters so what does it take a difficult approach would be you define",
    "start": "2215200",
    "end": "2221050"
  },
  {
    "text": "that these many replicas in each cluster say 5 in first 10 in second and 20 in",
    "start": "2221050",
    "end": "2226750"
  },
  {
    "text": "third and that kinds but we have I mentioned about the replica scheduling preferences controller that is exactly",
    "start": "2226750",
    "end": "2233500"
  },
  {
    "text": "for this use case where you just specify the total number of replicas and in the",
    "start": "2233500",
    "end": "2238599"
  },
  {
    "text": "template you will define that these are the remaining fields like the parts the specification the container that you want to create and the replica",
    "start": "2238599",
    "end": "2246880"
  },
  {
    "text": "scheduling controller will automatically distribute these replicas you can distribute them by weights for example",
    "start": "2246880",
    "end": "2254319"
  },
  {
    "text": "you can say my first cluster should get a weight ratio of 2 and second cluster should get a weight ratio of 1 so",
    "start": "2254319",
    "end": "2260109"
  },
  {
    "text": "replicas will be distributed in two is to one's ratio and you can specify min",
    "start": "2260109",
    "end": "2265180"
  },
  {
    "text": "max against each of the clusters so this is already available you just have to use that Percy does the caftan capacity",
    "start": "2265180",
    "end": "2273060"
  },
  {
    "text": "is considering yes the capacities considered in the sense that if a",
    "start": "2273060",
    "end": "2278530"
  },
  {
    "text": "cluster when say replicas by weights are automatically distributed one cluster",
    "start": "2278530",
    "end": "2285190"
  },
  {
    "text": "gets say 20 replicas but the capacity of that cluster is only 10 so the remaining",
    "start": "2285190",
    "end": "2291579"
  },
  {
    "text": "10 will remain unsaid yield so this is observed by the scheduling controller",
    "start": "2291579",
    "end": "2296920"
  },
  {
    "text": "and can move those replicas somewhere else where it had all the replicas scheduled because we can create",
    "start": "2296920",
    "end": "2306130"
  },
  {
    "text": "different parts in different Craster's so my question is how to",
    "start": "2306130",
    "end": "2312179"
  },
  {
    "text": "balance the traffic between these casters for the same type of pause okay",
    "start": "2312179",
    "end": "2318119"
  },
  {
    "text": "so the traffic or the users access to",
    "start": "2318119",
    "end": "2325229"
  },
  {
    "text": "individual clusters is a networking problem which we have kept it outside so",
    "start": "2325229",
    "end": "2330869"
  },
  {
    "text": "you need to install a load balancer you can discover you can discover the services in individual clusters but you",
    "start": "2330869",
    "end": "2336869"
  },
  {
    "text": "need to install or use an external load balancer to have exactly this this",
    "start": "2336869",
    "end": "2343799"
  },
  {
    "text": "particular feature use external other variants to traffic to different services in different different okay",
    "start": "2343799",
    "end": "2350039"
  },
  {
    "text": "okay instead",
    "start": "2350039",
    "end": "2352549"
  },
  {
    "text": "can we continue if there are more questions or are there any more",
    "start": "2360569",
    "end": "2365609"
  },
  {
    "text": "questions there's been a very useful discussion thank you very much for you for your informed questions that all we",
    "start": "2365609",
    "end": "2373169"
  },
  {
    "text": "will be available outside afterwards I think they need the room now so we'll have to thanks a lot outside",
    "start": "2373169",
    "end": "2379489"
  },
  {
    "text": "[Applause]",
    "start": "2380000",
    "end": "2382750"
  }
]