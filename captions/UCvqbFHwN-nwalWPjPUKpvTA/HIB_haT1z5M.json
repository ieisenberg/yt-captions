[
  {
    "start": "0",
    "end": "155000"
  },
  {
    "text": "so hello everyone so let's start this presentation about the project that we",
    "start": "30",
    "end": "5190"
  },
  {
    "text": "have started animals that's called Cuba Weiser ants about system stability and anomaly detection around both so Cedric",
    "start": "5190",
    "end": "13590"
  },
  {
    "text": "and I will run this presentation we're working at Emmaus so we have been using",
    "start": "13590",
    "end": "19710"
  },
  {
    "text": "a module software last week okay let me let me ask the",
    "start": "19710",
    "end": "26099"
  },
  {
    "text": "question in another way we took a plane to come to this conference here we are",
    "start": "26099",
    "end": "31320"
  },
  {
    "text": "so you have whole used almost our software we are an IT company we are a",
    "start": "31320",
    "end": "37200"
  },
  {
    "text": "company that provide IT solutions for the travel industry and we are a leader when it comes to traveling by plane so",
    "start": "37200",
    "end": "45120"
  },
  {
    "text": "few numbers here so this presentation will be divided in three parts the first",
    "start": "45120",
    "end": "52289"
  },
  {
    "text": "one quick slides around distributed systems and stability then we'll see",
    "start": "52289",
    "end": "57360"
  },
  {
    "text": "what we have already in the platform to enhance the stability of the system and finally we will discuss this Cuba Visor",
    "start": "57360",
    "end": "64290"
  },
  {
    "text": "project so when we have big systems like",
    "start": "64290",
    "end": "70200"
  },
  {
    "text": "this one I like to talk about the butterfly effect because you all know this butterfly effect when we you have",
    "start": "70200",
    "end": "76890"
  },
  {
    "text": "something very small happening but weird in one part of the system it can really",
    "start": "76890",
    "end": "83250"
  },
  {
    "text": "trigger some big chaos overall in the system and impacting all your clients and this can be even worse depending on",
    "start": "83250",
    "end": "91619"
  },
  {
    "text": "the load balancing strategy that you are using and all your application behave for example if we have a application and",
    "start": "91619",
    "end": "99360"
  },
  {
    "text": "be application if the a call to be only one time and you have only one instance",
    "start": "99360",
    "end": "105119"
  },
  {
    "text": "failing your client feel like it has a twenty percent failure rate on the system but if you a layer needs to be to",
    "start": "105119",
    "end": "113070"
  },
  {
    "text": "make multiple calls to the B layer for example and availability engine calling",
    "start": "113070",
    "end": "118350"
  },
  {
    "text": "a pricing engine and you have to call for multiple prices you may have more than 25 percent failure rate because",
    "start": "118350",
    "end": "125219"
  },
  {
    "text": "only all the calls are distributed to all the beam senses",
    "start": "125219",
    "end": "130399"
  },
  {
    "text": "in the industry we have many quotes about failure is the norm about stability of the system or big they are",
    "start": "131039",
    "end": "137970"
  },
  {
    "text": "and complex they are to operate today I bring you one new code from a French",
    "start": "137970",
    "end": "143220"
  },
  {
    "text": "artist Paul Susanne we live in a rainbow of chaos let's try to keep the rainbow",
    "start": "143220",
    "end": "148260"
  },
  {
    "text": "and remove the chaos and for that we have some solutions so let's talk about solutions so as always explaining in few",
    "start": "148260",
    "end": "158370"
  },
  {
    "start": "155000",
    "end": "224000"
  },
  {
    "text": "slides before we may have to call another service civil time so here an",
    "start": "158370",
    "end": "165810"
  },
  {
    "text": "example with 16 senses of P one out of six failure rate if you need to call B",
    "start": "165810",
    "end": "171150"
  },
  {
    "text": "only one time per client request from a farm or if you need to call them six",
    "start": "171150",
    "end": "176639"
  },
  {
    "text": "time because if you need to call six time and you have run rubbing as a load balancing algorithm then you will have a",
    "start": "176639",
    "end": "183569"
  },
  {
    "text": "very failure rate of one so if you manage to do some proximity based load",
    "start": "183569",
    "end": "191400"
  },
  {
    "text": "balancing and you're able to shut your system and your algorithm that does the load balancing managed to contain the",
    "start": "191400",
    "end": "197940"
  },
  {
    "text": "load balancing within this shot you may reduce this failure rate for your user so one of the things that you",
    "start": "197940",
    "end": "205829"
  },
  {
    "text": "can do is take availability zone as a shot as a shot of your system and try to",
    "start": "205829",
    "end": "211290"
  },
  {
    "text": "contain all the collateral cause of your services inside the validity zone more",
    "start": "211290",
    "end": "217199"
  },
  {
    "text": "than that it will be easier for you to spot the root cause of the problem in terms of locality how do you do that",
    "start": "217199",
    "end": "224690"
  },
  {
    "start": "224000",
    "end": "276000"
  },
  {
    "text": "well today natively in kubernetes you don't have solutions there are already",
    "start": "224690",
    "end": "230790"
  },
  {
    "text": "two issues open the very first one here is about trying to load balanced traffic",
    "start": "230790",
    "end": "236280"
  },
  {
    "text": "to the same node if the service exists on that same note the second one is trying to have load balancing topology",
    "start": "236280",
    "end": "244500"
  },
  {
    "text": "aware to do what exactly I've presented on the previous slide there is even a proposal for that in terms of",
    "start": "244500",
    "end": "250290"
  },
  {
    "text": "implementation and finally even if there's nothing that even kubernetes if",
    "start": "250290",
    "end": "255810"
  },
  {
    "text": "you're running a service mission especially the one called is - that comes with a proxy the skull envoy and",
    "start": "255810",
    "end": "261840"
  },
  {
    "text": "and voi this guy is availability zone where so you",
    "start": "261840",
    "end": "267420"
  },
  {
    "text": "will be able with a service mesh to achieve what we have on the left if you",
    "start": "267420",
    "end": "277170"
  },
  {
    "start": "276000",
    "end": "474000"
  },
  {
    "text": "have applications that behave in a bad way when it comes to memory consumption",
    "start": "277170",
    "end": "283190"
  },
  {
    "text": "maybe you can use limits if you are doing you have memory leaks then this",
    "start": "283190",
    "end": "288210"
  },
  {
    "text": "limit will prevent a container to eat all the resources of the system and the",
    "start": "288210",
    "end": "293400"
  },
  {
    "text": "cubelet will kill this container so this can in a way protect you and improve",
    "start": "293400",
    "end": "298620"
  },
  {
    "text": "stability but fix the bug have checks in",
    "start": "298620",
    "end": "304980"
  },
  {
    "text": "kubernetes if you type these keywords in the documentation you will reach the page that talked about props we have two",
    "start": "304980",
    "end": "311280"
  },
  {
    "text": "types of probes liveness probe and readiness Rob different purposes the first one will in case of non Elfie",
    "start": "311280",
    "end": "318750"
  },
  {
    "text": "container kill the container the second one will just remove the pod associated",
    "start": "318750",
    "end": "325500"
  },
  {
    "text": "with the container from the service discovery so the container will still be there that will not receive any traffic",
    "start": "325500",
    "end": "331350"
  },
  {
    "text": "more than that all the pole where the container is will not receive traffic ok",
    "start": "331350",
    "end": "337460"
  },
  {
    "text": "it's active I'll check that we have here the activity is triggered by the couplet",
    "start": "337460",
    "end": "343320"
  },
  {
    "text": "on every container where the probes are defined to define probes you have three",
    "start": "343320",
    "end": "349380"
  },
  {
    "text": "ways the first one being TCP socket trying to open a connection the second one being sent an HTTP request every",
    "start": "349380",
    "end": "358310"
  },
  {
    "text": "2,200 response will be okay everything else is non Elfi and finally you have",
    "start": "358310",
    "end": "363930"
  },
  {
    "text": "another opportunities to use your own script there are many parameters that",
    "start": "363930",
    "end": "369720"
  },
  {
    "text": "you can use when you define the probes inside the pod definition you can see",
    "start": "369720",
    "end": "374820"
  },
  {
    "text": "for example the first one is initial delay meaning that the cubelets will not challenge any container before this",
    "start": "374820",
    "end": "382680"
  },
  {
    "text": "initial delay when the post start a",
    "start": "382680",
    "end": "386900"
  },
  {
    "text": "couple of advice associated to probes keep them simple because I remember you",
    "start": "388250",
    "end": "394919"
  },
  {
    "text": "that what we are trying to achieve IRA's having a stable system if you introduce complexity somehow you may introduce",
    "start": "394919",
    "end": "401849"
  },
  {
    "text": "bugs and when it comes to probs this may be dramatic for your system okay if you",
    "start": "401849",
    "end": "408689"
  },
  {
    "text": "if you do bugs inside the probe you can completely create a service outage for",
    "start": "408689",
    "end": "415279"
  },
  {
    "text": "example keep it simple means don't try to check your external dependency you we",
    "start": "415279",
    "end": "421919"
  },
  {
    "text": "are in micro service environment and you are not going to check if your dependencies are there or not behaving",
    "start": "421919",
    "end": "428759"
  },
  {
    "text": "correctly or not this is their job also to do that for example if you reach the",
    "start": "428759",
    "end": "434429"
  },
  {
    "text": "state where you have cycles and this happens in big distributed systems you may not be able to restart your system",
    "start": "434429",
    "end": "441329"
  },
  {
    "text": "from scratch even if you have you are checking your dependency chain another",
    "start": "441329",
    "end": "447059"
  },
  {
    "text": "bad things when checking dependency chain is that one pod may have different paths let's say a B and a C if the probe",
    "start": "447059",
    "end": "455129"
  },
  {
    "text": "in a check the the validity of the C we",
    "start": "455129",
    "end": "460529"
  },
  {
    "text": "may have a problem because if the C is not healthy then a tones non LV but you",
    "start": "460529",
    "end": "467669"
  },
  {
    "text": "have cutted the AC but at the same time you have cut the a B that was working correctly the circuit breaker so on the",
    "start": "467669",
    "end": "477389"
  },
  {
    "start": "474000",
    "end": "554000"
  },
  {
    "text": "left side of the slide the the pattern circuit breaker that you may all know it's a state machine here that we have",
    "start": "477389",
    "end": "483389"
  },
  {
    "text": "and we have either a closer fit or an open circuit or half open okay how to",
    "start": "483389",
    "end": "489209"
  },
  {
    "text": "achieve this in our kubernetes environment you can use a service mesh",
    "start": "489209",
    "end": "494569"
  },
  {
    "text": "either with link ID of or east you again you will have a proxy being injected in",
    "start": "494569",
    "end": "501089"
  },
  {
    "text": "front of next to you or as a sidecar sorry inside your pods and this will be",
    "start": "501089",
    "end": "506610"
  },
  {
    "text": "the guy implementing the state machine and let's take the example again of a and B a does not is not connected",
    "start": "506610",
    "end": "514169"
  },
  {
    "text": "anymore to to all the the B instance all is not load balancing directly there it's the proxy that is doing that now",
    "start": "514169",
    "end": "520169"
  },
  {
    "text": "and the proxy does an analysis of what's happening on the on the request and",
    "start": "520169",
    "end": "525209"
  },
  {
    "text": "especially on the response tray if there is a timeout if it's returning an error or something like that",
    "start": "525209",
    "end": "530220"
  },
  {
    "text": "and if one of the instances is not behaving correctly then it removes them",
    "start": "530220",
    "end": "535230"
  },
  {
    "text": "it remove it from the pull off of potential end point for be so it's the",
    "start": "535230",
    "end": "541170"
  },
  {
    "text": "proxy that is doing this circuit breaker stuff keep this patter in mind because",
    "start": "541170",
    "end": "547560"
  },
  {
    "text": "the kubera is a project that we are presenting just after is doing this but another level still service mesh and",
    "start": "547560",
    "end": "559790"
  },
  {
    "start": "554000",
    "end": "610000"
  },
  {
    "text": "what they call the retry policy so here again we have this proxy that is doing",
    "start": "559790",
    "end": "566519"
  },
  {
    "text": "an analysis of the response of a dependency and that is able to trigger another call on another instance in case",
    "start": "566519",
    "end": "574709"
  },
  {
    "text": "of error so on the left side you have the dashboard of these two and you see what's happening when you you have a be",
    "start": "574709",
    "end": "581459"
  },
  {
    "text": "instance failing and that you activate the retry so on the top you have the the",
    "start": "581459",
    "end": "586829"
  },
  {
    "text": "success rate for the for the a and at the bottom you have the success and also",
    "start": "586829",
    "end": "593610"
  },
  {
    "text": "of course the volume of requests for the B so you can see that when the retry is activity the a finally returns only",
    "start": "593610",
    "end": "600779"
  },
  {
    "text": "valid Ric responses and on the B side we have an increase of traffic but still a",
    "start": "600779",
    "end": "605790"
  },
  {
    "text": "mix of success and error so all this solution that we have gone",
    "start": "605790",
    "end": "614069"
  },
  {
    "text": "through quickly you have a you have seen that they are making local decision I",
    "start": "614069",
    "end": "620519"
  },
  {
    "text": "mean it's always in the container the probe is defined at container level inside the pod with the service mesh",
    "start": "620519",
    "end": "626639"
  },
  {
    "text": "it's always the proxy that take the responsibility to remove an endpoint or not okay there is no orchestration of",
    "start": "626639",
    "end": "633059"
  },
  {
    "text": "the the activity of self-healing that is being done and another important thing",
    "start": "633059",
    "end": "639120"
  },
  {
    "text": "is that all the stuff is based on technical signals or KPIs memory",
    "start": "639120",
    "end": "645899"
  },
  {
    "text": "consumption connections response time timeout analysis of the written code and",
    "start": "645899",
    "end": "652610"
  },
  {
    "text": "even the circuit breaker that is needs to do layer seven analysis okay is only",
    "start": "652610",
    "end": "659339"
  },
  {
    "text": "link to return code of HTTP value of the sorry HTTP risk",
    "start": "659339",
    "end": "665770"
  },
  {
    "text": "response that means that if you have any other protocol than HTTP or not able to",
    "start": "665770",
    "end": "670810"
  },
  {
    "text": "use this feature even if you install the service mesh it will do the TCP stefani",
    "start": "670810",
    "end": "676630"
  },
  {
    "text": "and not being able to do the analysis for the HTTP layer so we introduced this",
    "start": "676630",
    "end": "687760"
  },
  {
    "text": "project to try to overcome with this limitation first we want to take",
    "start": "687760",
    "end": "694240"
  },
  {
    "text": "Orchestra set of orchestrated decision meaning that we don't want to look anymore at container or pod instance",
    "start": "694240",
    "end": "701440"
  },
  {
    "text": "we're gonna act there but we are going to take decision based on what's happening overall on the service and",
    "start": "701440",
    "end": "706960"
  },
  {
    "text": "also we take decision trying to not make things worse I mean if you have all your",
    "start": "706960",
    "end": "712210"
  },
  {
    "text": "instances that are failing there's no point in taking any action of on any of them we wanted to take this is being",
    "start": "712210",
    "end": "720580"
  },
  {
    "text": "able to take decision based on any other signal than technical signal and especially business signal okay so",
    "start": "720580",
    "end": "727420"
  },
  {
    "text": "you're gonna see that in the demo after we are using a business metric and it will be the price of of an air ticket",
    "start": "727420",
    "end": "737760"
  },
  {
    "text": "so the Cuba visor itself the project is a controller that we are going to run in",
    "start": "737760",
    "end": "742780"
  },
  {
    "text": "the in kubernetes cluster inside it's made of two parts the the breaker and",
    "start": "742780",
    "end": "748210"
  },
  {
    "text": "the activator you remember this a feedback a pattern opening or closing the circuit basically these two pieces",
    "start": "748210",
    "end": "753910"
  },
  {
    "text": "are taking responsibility to change the state of the system each time breaking",
    "start": "753910",
    "end": "762010"
  },
  {
    "text": "and reactivating some parts you will see we will have different strategy for that and to configure the system we are going",
    "start": "762010",
    "end": "769090"
  },
  {
    "text": "to use custom resource definition so",
    "start": "769090",
    "end": "774360"
  },
  {
    "start": "773000",
    "end": "1010000"
  },
  {
    "text": "here is an example of this custom resource so the let's focus on the",
    "start": "774360",
    "end": "781840"
  },
  {
    "text": "specification the very first thing which service are we monitoring and taking",
    "start": "781840",
    "end": "787060"
  },
  {
    "text": "action on okay the second part the breaker so here we have a different",
    "start": "787060",
    "end": "794200"
  },
  {
    "text": "value let's say that the global setting for the breaker where you say I want to take",
    "start": "794200",
    "end": "800720"
  },
  {
    "text": "action but with some limits I don't want to make things worse in case everything is failing so you can define either in",
    "start": "800720",
    "end": "807230"
  },
  {
    "text": "terms of count or our percentage the number of pots that you want to keep it's a bit like pedestrian budget but at",
    "start": "807230",
    "end": "814760"
  },
  {
    "text": "circuit breaker level and then you have the strategy I told you that they are",
    "start": "814760",
    "end": "819769"
  },
  {
    "text": "multiple strategies yeah we see continuous value deviation and how do",
    "start": "819769",
    "end": "825649"
  },
  {
    "text": "you configure this strategy we are going to reuse an external system that would",
    "start": "825649",
    "end": "831560"
  },
  {
    "text": "provide us monitoring metrics and here we are using Prometheus we first define",
    "start": "831560",
    "end": "837649"
  },
  {
    "text": "were to find Prometheus and then you can inject the prompt QL will this prompt",
    "start": "837649",
    "end": "844550"
  },
  {
    "text": "you all needs to be done in such a way that it returns we will see that in the demo a value that is 1 in case",
    "start": "844550",
    "end": "851779"
  },
  {
    "text": "everything is fine and then a 0.5 if we have a 50% deviation or 1.5 depends if",
    "start": "851779",
    "end": "857839"
  },
  {
    "text": "it's upper bound then you can say what is the deviation that you accept on this",
    "start": "857839",
    "end": "863990"
  },
  {
    "text": "KPI and the breaker of course we take action that if the the metric returned by the from QL exceed this as threshold",
    "start": "863990",
    "end": "872110"
  },
  {
    "text": "the activator it's more simpler you have to define the mode we have three modes",
    "start": "872110",
    "end": "877730"
  },
  {
    "text": "to power your dick and for the peyote to define the value in them in seconds",
    "start": "877730",
    "end": "883459"
  },
  {
    "text": "this is for the circuit breaker pattern when you go to alpha open again ok",
    "start": "883459",
    "end": "890000"
  },
  {
    "text": "trying to challenge again the the pod or the instance against tree traffic and",
    "start": "890000",
    "end": "895070"
  },
  {
    "text": "you put it either you break it again or you re-inject it again and so on so this will do up and down for the pod when you",
    "start": "895070",
    "end": "903320"
  },
  {
    "text": "use periodic we'll see that in the demo another example so here a different",
    "start": "903320",
    "end": "909529"
  },
  {
    "text": "strategy for the breaker discrete value out of list meaning that the prompt UL",
    "start": "909529",
    "end": "917149"
  },
  {
    "text": "will return you an array somehow and you define what are the value that you",
    "start": "917149",
    "end": "922220"
  },
  {
    "text": "accept as valid and all the one that you don't want to accept the bad values all the good values",
    "start": "922220",
    "end": "928339"
  },
  {
    "text": "and then internally the the Cuba visor will do some computation and I think I'm",
    "start": "928339",
    "end": "933499"
  },
  {
    "text": "not sure if we have the ratio now we are missing one parameter is the ratio of",
    "start": "933499",
    "end": "939019"
  },
  {
    "text": "failure versus success that you have to define an ear for the activator but we",
    "start": "939019",
    "end": "946730"
  },
  {
    "text": "have a different strategy we try and kill instead it's a bit like periodic but after a number of count of",
    "start": "946730",
    "end": "954259"
  },
  {
    "text": "reinjection of the pod you decide that no it's never gonna be good again so let's kill it and finally I think the",
    "start": "954259",
    "end": "963860"
  },
  {
    "text": "last strategy we have in terms of breaker it's custom you can call any external service that will tell you hey",
    "start": "963860",
    "end": "972470"
  },
  {
    "text": "this bodies be not behaving correctly or this set of pods is not behaving correctly and all the Cuba visor our",
    "start": "972470",
    "end": "978829"
  },
  {
    "text": "controller will take actions in terms of removing the pod re-injecting it and",
    "start": "978829",
    "end": "984110"
  },
  {
    "text": "applying the circuit breaker pattern and here again for the activator we are doing periodic but there is a last rata",
    "start": "984110",
    "end": "992209"
  },
  {
    "text": "G that is not from this example for the activator in retry and post we will see that in the demo instead of killing it",
    "start": "992209",
    "end": "999290"
  },
  {
    "text": "we'll put the pod aside and give you the opportunity to trigger some investigation on it but when I say aside",
    "start": "999290",
    "end": "1005470"
  },
  {
    "text": "that means that the pod still ran but does not receive any traffic so all does",
    "start": "1005470",
    "end": "1011620"
  },
  {
    "start": "1010000",
    "end": "1103000"
  },
  {
    "text": "that work so very simple also we have a service that is having a selector and so a set",
    "start": "1011620",
    "end": "1017800"
  },
  {
    "text": "of pod associated to this service then you have a matrix server for us it's",
    "start": "1017800",
    "end": "1023649"
  },
  {
    "text": "Prometheus that scraps the metrics or technical metrics functional metrics",
    "start": "1023649",
    "end": "1030010"
  },
  {
    "text": "whatever any KPI that you want of course your pod needs to be instrumented for that and then you have the cure visor",
    "start": "1030010",
    "end": "1037839"
  },
  {
    "text": "controller obviously I as a user of the system you need to do two things the",
    "start": "1037839",
    "end": "1043449"
  },
  {
    "text": "first one is inject the definition the cr-z that we have just seen before okay then once you have done that the",
    "start": "1043449",
    "end": "1052270"
  },
  {
    "text": "cuba cuba visor itself is running now everything is fine you can manage the pod that are",
    "start": "1052270",
    "end": "1059169"
  },
  {
    "text": "associated with the service and query from it use with the from to have that you have defined and start",
    "start": "1059169",
    "end": "1064730"
  },
  {
    "text": "to apply the strategy but nothing is going to happen you are in a kind of dry",
    "start": "1064730",
    "end": "1069860"
  },
  {
    "text": "run mod here for the Cuba visa why because if you want to go for a life and",
    "start": "1069860",
    "end": "1076430"
  },
  {
    "text": "taking real action in terms of service discovery and eject eject in some buds you have to append one thing to the",
    "start": "1076430",
    "end": "1083450"
  },
  {
    "text": "selector that is the the the label associated to proviso traffic equal yes and at that time if a pod is considered",
    "start": "1083450",
    "end": "1092420"
  },
  {
    "text": "non Elfie according to the query that you have done Cuba visa will change automatically the the the label value",
    "start": "1092420",
    "end": "1100370"
  },
  {
    "text": "and the pod will be removed from the service discovery so demote I'm Cedric",
    "start": "1100370",
    "end": "1106190"
  },
  {
    "text": "is going to run that is the brave guy I'm just talking live demo so it will",
    "start": "1106190",
    "end": "1111950"
  },
  {
    "text": "maybe fail so as David doing the introduction I Medusa is a company",
    "start": "1111950",
    "end": "1119990"
  },
  {
    "text": "working the toy industry so let's do the demo with flight search price so this",
    "start": "1119990",
    "end": "1125920"
  },
  {
    "text": "services will return three best price for an origin destination city for the",
    "start": "1125920",
    "end": "1130940"
  },
  {
    "text": "current day if we take the same slice of",
    "start": "1130940",
    "end": "1136280"
  },
  {
    "start": "1133000",
    "end": "1158000"
  },
  {
    "text": "the previous line so we have high surf services with four different pod running and we are using primitives to scrap",
    "start": "1136280",
    "end": "1143570"
  },
  {
    "text": "some business metric so the price for each return but each pod when you",
    "start": "1143570",
    "end": "1150770"
  },
  {
    "text": "receive a request so let's go level so",
    "start": "1150770",
    "end": "1160190"
  },
  {
    "start": "1158000",
    "end": "1199000"
  },
  {
    "text": "let's see first what we are already running in our Christophe so we use mini Cuba for the demo you know you can see I",
    "start": "1160190",
    "end": "1166430"
  },
  {
    "text": "love yes that we have four different pods of our services so the price of",
    "start": "1166430",
    "end": "1174020"
  },
  {
    "text": "services then we have a cube a visor for the ear so it's a controller that is",
    "start": "1174020",
    "end": "1180110"
  },
  {
    "text": "running and then we have primitives and graph an oven in things to the community",
    "start": "1180110",
    "end": "1185900"
  },
  {
    "text": "so pirata I will start to inject some traffic so this is a price written by",
    "start": "1185900",
    "end": "1191480"
  },
  {
    "text": "the by our services and if you want to see oh it's look like it's coming back yeah",
    "start": "1191480",
    "end": "1199480"
  },
  {
    "start": "1199000",
    "end": "1250000"
  },
  {
    "text": "so you provide the it's a services you provide the origin and the destination and to the return some price for it so",
    "start": "1199480",
    "end": "1207799"
  },
  {
    "text": "street price as I say we created also a dashboard to show this information so so",
    "start": "1207799",
    "end": "1217519"
  },
  {
    "text": "the first line is the business information that we have so the number of requests received by each part for",
    "start": "1217519",
    "end": "1224119"
  },
  {
    "text": "the origin destination this is what we see here and also the average pledge a",
    "start": "1224119",
    "end": "1229249"
  },
  {
    "text": "price it on but by each pod for the origin destination on the bottom of this",
    "start": "1229249",
    "end": "1237850"
  },
  {
    "text": "in half another's board we will see after some other metric returns this",
    "start": "1237850",
    "end": "1242929"
  },
  {
    "text": "time by the Keveza controller so let's come back to",
    "start": "1242929",
    "end": "1248539"
  },
  {
    "text": "the terminal so yeah we see we have only the pods of",
    "start": "1248539",
    "end": "1255769"
  },
  {
    "start": "1250000",
    "end": "1301000"
  },
  {
    "text": "application and what is a will be interesting to look at is labelled that will be added automatically and updated",
    "start": "1255769",
    "end": "1262279"
  },
  {
    "text": "by Cuba as well so first thing that we need to do to use Cuba visa is first a",
    "start": "1262279",
    "end": "1268759"
  },
  {
    "text": "credit cards or services and this is the first configuration that we will use so",
    "start": "1268759",
    "end": "1274639"
  },
  {
    "text": "first you provide the name of the service this is services attached to our pod and then the breaker configuration",
    "start": "1274639",
    "end": "1281869"
  },
  {
    "text": "so we use formatives so this is the URI to the preventives instance and then we",
    "start": "1281869",
    "end": "1288470"
  },
  {
    "text": "have the punctual request here so if we copy past this this Punk ul and go to",
    "start": "1288470",
    "end": "1296710"
  },
  {
    "text": "formatives what and I will and what with you yeah",
    "start": "1296710",
    "end": "1304399"
  },
  {
    "start": "1301000",
    "end": "1385000"
  },
  {
    "text": "we have the the so we are running the continuous value deviation strategy so",
    "start": "1304399",
    "end": "1311119"
  },
  {
    "text": "your prom ql query have to return a value that is one when there's no deviation okay and it have to group that",
    "start": "1311119",
    "end": "1319070"
  },
  {
    "text": "by by pod so this is what we are doing here if you look at it precisely you can",
    "start": "1319070",
    "end": "1325429"
  },
  {
    "text": "see that we are trying to get the over 30 seconds",
    "start": "1325429",
    "end": "1332400"
  },
  {
    "text": "the average price value that is being returned against the total average the",
    "start": "1332400",
    "end": "1338460"
  },
  {
    "text": "average of all the the set of pots what is interesting also in this query",
    "start": "1338460",
    "end": "1343650"
  },
  {
    "text": "is this and close that we have here that allow us to exclude from the analysis",
    "start": "1343650",
    "end": "1350340"
  },
  {
    "text": "any pot that is not receiving enough traffic okay we are making statistics",
    "start": "1350340",
    "end": "1355950"
  },
  {
    "text": "that is six our goods on big numbers so if a pot that has just started or not receiving any traffic is not interesting",
    "start": "1355950",
    "end": "1362300"
  },
  {
    "text": "interesting for the analysis so here is an example of query I'm pretty sure that you have all prom cures and they are",
    "start": "1362300",
    "end": "1368880"
  },
  {
    "text": "experts here that will find better way of achieving this but the important thing is that we have a value year float",
    "start": "1368880",
    "end": "1375660"
  },
  {
    "text": "value returned close to one word and there's no problem and we'll see later on that this videos gonna change okay",
    "start": "1375660",
    "end": "1382880"
  },
  {
    "text": "thank you so let's create this cuba reserve service and what we can see on",
    "start": "1382880",
    "end": "1392790"
  },
  {
    "start": "1385000",
    "end": "1414000"
  },
  {
    "text": "the top of the screen is that we have two new ala bells i did on each pod so we have the name of the cuba reserve",
    "start": "1392790",
    "end": "1400020"
  },
  {
    "text": "service and then we have the traffic labelled e equal yes so it means that",
    "start": "1400020",
    "end": "1405240"
  },
  {
    "text": "for the moment two bars obscene that all pots are LC so since we are good coder",
    "start": "1405240",
    "end": "1415980"
  },
  {
    "text": "we don't have any animal in of pot so let's inject it so first first things",
    "start": "1415980",
    "end": "1422940"
  },
  {
    "text": "that i done just before is that okay we added the modify the label selector on",
    "start": "1422940",
    "end": "1428850"
  },
  {
    "text": "the on the services in adult who have no we can see here the new selector labels",
    "start": "1428850",
    "end": "1435540"
  },
  {
    "text": "that is traffic equal yes and now let's inject some anomaly in one",
    "start": "1435540",
    "end": "1442470"
  },
  {
    "text": "of the pods so for that as we can see here the price of one pods return zero",
    "start": "1442470",
    "end": "1448590"
  },
  {
    "text": "maybe it is very good for the user and we can travel for free but we will have",
    "start": "1448590",
    "end": "1454679"
  },
  {
    "text": "some trouble after that we also implemented a quickly a program",
    "start": "1454679",
    "end": "1462000"
  },
  {
    "start": "1458000",
    "end": "1625000"
  },
  {
    "text": "for cube CTL in order to see the status of our customer sauce here and what we",
    "start": "1462000",
    "end": "1468270"
  },
  {
    "text": "can see that we have currently one pot bright this means that we have traffic equal no here and since I didn't comment",
    "start": "1468270",
    "end": "1476100"
  },
  {
    "text": "it but we choose first periodic mods of",
    "start": "1476100",
    "end": "1481140"
  },
  {
    "text": "also activator every 15 seconds the traffic the pod will come back on on the",
    "start": "1481140",
    "end": "1487740"
  },
  {
    "text": "services and so the traffic will we will see as again some error up here yeah yes",
    "start": "1487740",
    "end": "1494340"
  },
  {
    "text": "so it come back to yes so we have again error and this is this is we don't this",
    "start": "1494340",
    "end": "1503820"
  },
  {
    "text": "mod as periodic it's because some time we have an anomaly because a pod is",
    "start": "1503820",
    "end": "1509910"
  },
  {
    "text": "overloaded because the not maybe is not LC so by removing these pods during a",
    "start": "1509910",
    "end": "1515880"
  },
  {
    "text": "period of it is a gun will be so the load of these pods will decrease and you",
    "start": "1515880",
    "end": "1522750"
  },
  {
    "text": "will be come back LC thanks to that in all cases it's not the case if we come",
    "start": "1522750",
    "end": "1529500"
  },
  {
    "text": "back here what we can see that this pod no always return zero when he received traffic and so what we can see is that",
    "start": "1529500",
    "end": "1536700"
  },
  {
    "text": "this pod receive less traffic from the other and the other pod have an increase of traffic because it they need to serve",
    "start": "1536700",
    "end": "1542850"
  },
  {
    "text": "the request more requesters and before so know what we can see",
    "start": "1542850",
    "end": "1549030"
  },
  {
    "text": "he also is a matrix bitten by cuba cuba riser and we can see the pattern okay",
    "start": "1549030",
    "end": "1555330"
  },
  {
    "text": "yes and no and this this this Ravel of requests correspond to the eyes open",
    "start": "1555330",
    "end": "1561680"
  },
  {
    "text": "pattern of defined by the self is like yeah and yeah we can see that sometime it's all one zero one at the bright spot",
    "start": "1561680",
    "end": "1570710"
  },
  {
    "text": "so for our case that the body is not able to come back normal what we will do",
    "start": "1570710",
    "end": "1576330"
  },
  {
    "text": "we will change the activity method so first i will delete the project that",
    "start": "1576330",
    "end": "1583770"
  },
  {
    "text": "event you and we will update the configuration so this time what we will put his retire",
    "start": "1583770",
    "end": "1590210"
  },
  {
    "text": "and kill method father activity' for the biker party still the same we choose at",
    "start": "1590210",
    "end": "1595639"
  },
  {
    "text": "the same period 15 Saigon and with the maths retry count equal to 1 it means that Cuba visa will try if an iPod",
    "start": "1595639",
    "end": "1605149"
  },
  {
    "text": "Avenue normally will try first to remove it and to come back behind the service",
    "start": "1605149",
    "end": "1610279"
  },
  {
    "text": "but I just saw on the issue it will kill the body so let's apply you this date",
    "start": "1610279",
    "end": "1619039"
  },
  {
    "text": "and occupies or service and inject again",
    "start": "1619039",
    "end": "1626049"
  },
  {
    "start": "1625000",
    "end": "1807000"
  },
  {
    "text": "some anomaly in one of the pod so you",
    "start": "1626049",
    "end": "1631879"
  },
  {
    "text": "can see that some zero are gonna fly for a bit of time it's because of the query",
    "start": "1631879",
    "end": "1637639"
  },
  {
    "text": "range query that we have done over 30 seconds ok so yeah so here we can see",
    "start": "1637639",
    "end": "1650720"
  },
  {
    "text": "that we have the pod with traffic or no it should come back once at yes and",
    "start": "1650720",
    "end": "1656480"
  },
  {
    "text": "after we will see that this pod will be terminated and a new pod will be created by the the replica set controller so",
    "start": "1656480",
    "end": "1665960"
  },
  {
    "text": "again we are yes and no and what we should see it's terminating so the pod",
    "start": "1665960",
    "end": "1672950"
  },
  {
    "text": "was deleted and new pod was created so thanks to that we was able to retry a",
    "start": "1672950",
    "end": "1678950"
  },
  {
    "text": "bit to have a healthy pod but after some retry we kill it and to the resort take",
    "start": "1678950",
    "end": "1685369"
  },
  {
    "text": "the rest to come back to normal by creating a new pod so this is great for",
    "start": "1685369",
    "end": "1692389"
  },
  {
    "text": "the for the quality of service that we want to put the end of services but for investigating is not very practical",
    "start": "1692389",
    "end": "1698779"
  },
  {
    "text": "because we don't have anymore the pollen stores to look at it that's why we have the last configuration for activate all",
    "start": "1698779",
    "end": "1707480"
  },
  {
    "text": "the retry on post so this time we added a new parameter is a max post count and",
    "start": "1707480",
    "end": "1712850"
  },
  {
    "text": "this is a number of pods that Piazza can put in pose mode for yourself",
    "start": "1712850",
    "end": "1720700"
  },
  {
    "text": "so let's apply this update on the giveaways or service and again create",
    "start": "1721540",
    "end": "1729920"
  },
  {
    "text": "some 4000 in one pot so again some price",
    "start": "1729920",
    "end": "1735460"
  },
  {
    "text": "go to go to zero and we will see like",
    "start": "1735460",
    "end": "1745990"
  },
  {
    "text": "traffic acquire new ones and the seconds it will come back to yes and we after",
    "start": "1745990",
    "end": "1751790"
  },
  {
    "text": "you will good in a new cell values at his post",
    "start": "1751790",
    "end": "1756190"
  },
  {
    "text": "so yes and pause for the moment the demo",
    "start": "1762280",
    "end": "1770750"
  },
  {
    "text": "is okay and it's close to the end zone yeah I can smile so know the traffic we can see",
    "start": "1770750",
    "end": "1782750"
  },
  {
    "text": "that we don't have any more error we still have the pods for investigation and so maybe you can create some alerts",
    "start": "1782750",
    "end": "1790340"
  },
  {
    "text": "thanks to this level and everything to do with that lose the team responsible of the application will receive to say a",
    "start": "1790340",
    "end": "1796940"
  },
  {
    "text": "maybe you have something to investigate we save your ass by removing these pods but it's not the nerve for you and and",
    "start": "1796940",
    "end": "1805910"
  },
  {
    "text": "so let's see yeah so let's last thing that we want to show you is that Oh",
    "start": "1805910",
    "end": "1813549"
  },
  {
    "start": "1807000",
    "end": "1873000"
  },
  {
    "text": "occupy visor is able to know how many counts it done for each hit high on the",
    "start": "1814660",
    "end": "1820670"
  },
  {
    "text": "pot so for that we use annotation on the pod we have two annotation where the red",
    "start": "1820670",
    "end": "1825920"
  },
  {
    "text": "icons so equal to because first time it's the first frost try on the second",
    "start": "1825920",
    "end": "1831260"
  },
  {
    "text": "well also interaction is when it was put in pause and we have also the last time",
    "start": "1831260",
    "end": "1837170"
  },
  {
    "text": "that the pod was Mike and exists for investigation is cool because you can look at the trace at this average time",
    "start": "1837170",
    "end": "1845600"
  },
  {
    "text": "or the requested ECT spots so it helps you in",
    "start": "1845600",
    "end": "1851060"
  },
  {
    "text": "- OH - to investigate some issue and also what why we use annotations like",
    "start": "1851060",
    "end": "1857420"
  },
  {
    "text": "this the Piazza controller is completely stateless we can read restart it load a",
    "start": "1857420",
    "end": "1863720"
  },
  {
    "text": "new version or the information is inside the ribosome or source or likely on the",
    "start": "1863720",
    "end": "1869090"
  },
  {
    "text": "pod and the services so that's it for",
    "start": "1869090",
    "end": "1876590"
  },
  {
    "start": "1873000",
    "end": "1941000"
  },
  {
    "text": "the demo just a few side before question so first things that here we want to",
    "start": "1876590",
    "end": "1884300"
  },
  {
    "text": "show you is that we are using already the pattern of controller in cuba hiatus",
    "start": "1884300",
    "end": "1889340"
  },
  {
    "text": "so we and so we have a controller part that is watching events on the cube",
    "start": "1889340",
    "end": "1895910"
  },
  {
    "text": "arise of service pistol sauce but also on the board and services that is associated to this supervisor Salas",
    "start": "1895910",
    "end": "1903160"
  },
  {
    "text": "inside this controller we have two main parts to activity' and the break apart",
    "start": "1903160",
    "end": "1910060"
  },
  {
    "text": "this is a very thanks to that we are",
    "start": "1910060",
    "end": "1915170"
  },
  {
    "text": "able to to him to add some new features early and what one of the possibilities",
    "start": "1915170",
    "end": "1921380"
  },
  {
    "text": "that we have is to to change the anomaly detector that we use so in our example",
    "start": "1921380",
    "end": "1926570"
  },
  {
    "text": "we use vomitus but thanks to this interface part here we are able to use",
    "start": "1926570",
    "end": "1932330"
  },
  {
    "text": "all the matrix system that can be used in your company like you provide",
    "start": "1932330",
    "end": "1937880"
  },
  {
    "text": "solutions that you already other so as",
    "start": "1937880",
    "end": "1943820"
  },
  {
    "text": "you have seen in the demonstration in the demo that the cuba Viceroy is",
    "start": "1943820",
    "end": "1948890"
  },
  {
    "text": "putting some labels and annotation on on each o'the when they need to break it",
    "start": "1948890",
    "end": "1957040"
  },
  {
    "text": "what is cool with that is that maybe this can be reused by any other controller or",
    "start": "1957040",
    "end": "1962690"
  },
  {
    "text": "part of the system for example now in Amadeus we are looking at how to leverage this system when we are doing",
    "start": "1962690",
    "end": "1970490"
  },
  {
    "text": "canary deployment because you canary deployer when he deploys the canary can look at the annotation associated to the",
    "start": "1970490",
    "end": "1977150"
  },
  {
    "text": "canary instance and it if it figure out that the Cuba visor is often removing",
    "start": "1977150",
    "end": "1983330"
  },
  {
    "text": "this spot the traffic and the service discovery maybe there's no point in continuing the",
    "start": "1983330",
    "end": "1988400"
  },
  {
    "text": "deployment okay so cannery deployment is just an example you probably already have some",
    "start": "1988400",
    "end": "1994549"
  },
  {
    "text": "ideas or you could use that so some key",
    "start": "1994549",
    "end": "2001240"
  },
  {
    "start": "2000000",
    "end": "2067000"
  },
  {
    "text": "takeaway for this presentation there are many ways of improving the stability of",
    "start": "2001240",
    "end": "2008770"
  },
  {
    "text": "the system we have listed some at the beginning of this presentation and we are proposing here another way this this",
    "start": "2008770",
    "end": "2015549"
  },
  {
    "text": "way allow you to use your business KPI if you have any it leverage any external",
    "start": "2015549",
    "end": "2021250"
  },
  {
    "text": "monitoring system like Prometheus or any other that you would like and provide you some automation to do some kind of",
    "start": "2021250",
    "end": "2027970"
  },
  {
    "text": "circuit breaking on tops of Cuban artists concepts it's based on standard",
    "start": "2027970",
    "end": "2035799"
  },
  {
    "text": "stuff CRD from QL aerobats services and pod it's clearly extendable not only",
    "start": "2035799",
    "end": "2042700"
  },
  {
    "text": "because it put labels and annotation but also the architecture itself of the the software is there to allow you to plug",
    "start": "2042700",
    "end": "2049780"
  },
  {
    "text": "some new strategy called strategy if you want inside directly the cube advisor we",
    "start": "2049780",
    "end": "2056980"
  },
  {
    "text": "are open sourcing this ooh we of course are happy to receive any comments so please check out try it",
    "start": "2056980",
    "end": "2064210"
  },
  {
    "text": "wreck it post issues and in colors we",
    "start": "2064210",
    "end": "2069398"
  },
  {
    "start": "2067000",
    "end": "2159000"
  },
  {
    "text": "have maybe the time to take one question at least one of the question is answer on that slide if you're wondering why",
    "start": "2069399",
    "end": "2074470"
  },
  {
    "text": "it's called cube advisor you have the answer the links to the repository and",
    "start": "2074470",
    "end": "2079540"
  },
  {
    "text": "top of this right yeah so maybe you want one question we have time for one",
    "start": "2079540",
    "end": "2084638"
  },
  {
    "text": "question",
    "start": "2084639",
    "end": "2086669"
  },
  {
    "text": "what are you showed here it's very interesting actually and but probably I need something but or",
    "start": "2093179",
    "end": "2099630"
  },
  {
    "text": "I didn't get that you are not cutting the traffic you like you you are",
    "start": "2099630",
    "end": "2106800"
  },
  {
    "text": "changing the label and you hope this label to some external I don't know issue or invoice on track that as you",
    "start": "2106800",
    "end": "2115589"
  },
  {
    "text": "said we are changing the label and as such we are reusing the natives service",
    "start": "2115589",
    "end": "2123000"
  },
  {
    "text": "discovery mechanism of humanities that is associating a pod to a service thanks",
    "start": "2123000",
    "end": "2128609"
  },
  {
    "text": "to a label selector the we have changed the label selector extending the label selector which traffic equal yes and we",
    "start": "2128609",
    "end": "2135930"
  },
  {
    "text": "are manipulating the traffic equal yes or no opposed on the pod changing this",
    "start": "2135930",
    "end": "2140970"
  },
  {
    "text": "value will remove the pot from the service discovery but not from the replication controller or the replica",
    "start": "2140970",
    "end": "2146940"
  },
  {
    "text": "set okay replication controller fusing OpenShift replica set thank you so thank you and",
    "start": "2146940",
    "end": "2153380"
  },
  {
    "text": "please [Applause]",
    "start": "2153380",
    "end": "2161050"
  }
]