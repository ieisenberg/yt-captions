[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "hi uh my name is Thomas Ruby and I work",
    "start": "4799",
    "end": "8519"
  },
  {
    "text": "for tigera and I'm here to talk about",
    "start": "8519",
    "end": "11780"
  },
  {
    "text": "the project Calico and its ebpf data",
    "start": "11780",
    "end": "16139"
  },
  {
    "text": "plane",
    "start": "16139",
    "end": "17060"
  },
  {
    "text": "and I'm president work we've been done",
    "start": "17060",
    "end": "21119"
  },
  {
    "text": "jointly with Sean Crampton SRI Ahmad",
    "start": "21119",
    "end": "24800"
  },
  {
    "text": "and myself over the past couple of years",
    "start": "24800",
    "end": "29820"
  },
  {
    "text": "uh and the rest of the talk uh",
    "start": "29820",
    "end": "33300"
  },
  {
    "start": "30000",
    "end": "88000"
  },
  {
    "text": "I would like to give you a brief",
    "start": "33300",
    "end": "35280"
  },
  {
    "text": "overview of project Calica",
    "start": "35280",
    "end": "37700"
  },
  {
    "text": "I would like to talk about the ebpf data",
    "start": "37700",
    "end": "41399"
  },
  {
    "text": "plane how it differs",
    "start": "41399",
    "end": "43140"
  },
  {
    "text": "and about the tools about how we can",
    "start": "43140",
    "end": "46860"
  },
  {
    "text": "troubleshoot policies how to get",
    "start": "46860",
    "end": "48660"
  },
  {
    "text": "statistics and login out of the data",
    "start": "48660",
    "end": "50940"
  },
  {
    "text": "plane this talk is not meant to",
    "start": "50940",
    "end": "54719"
  },
  {
    "text": "be a page for any observability features",
    "start": "54719",
    "end": "57980"
  },
  {
    "text": "but it's really meant to uh reflect on",
    "start": "57980",
    "end": "63000"
  },
  {
    "text": "the feedback from the community we got",
    "start": "63000",
    "end": "65299"
  },
  {
    "text": "about",
    "start": "65299",
    "end": "66860"
  },
  {
    "text": "how we can improve on on the project",
    "start": "66860",
    "end": "70640"
  },
  {
    "text": "lots of users or colleague users are",
    "start": "70640",
    "end": "73439"
  },
  {
    "text": "switching from iptables to ebpf but that",
    "start": "73439",
    "end": "78180"
  },
  {
    "text": "switch is not always as smooth as the",
    "start": "78180",
    "end": "81060"
  },
  {
    "text": "users would hope for Hope for because",
    "start": "81060",
    "end": "84240"
  },
  {
    "text": "the environment has changed dramatically",
    "start": "84240",
    "end": "88020"
  },
  {
    "start": "88000",
    "end": "138000"
  },
  {
    "text": "so kalika is uh probably I don't have to",
    "start": "88020",
    "end": "91799"
  },
  {
    "text": "introduce it that much but project",
    "start": "91799",
    "end": "93659"
  },
  {
    "text": "Calico is a cni for kubernetes and also",
    "start": "93659",
    "end": "97079"
  },
  {
    "text": "works in other environments so it's",
    "start": "97079",
    "end": "99780"
  },
  {
    "text": "responsible for networking and provides",
    "start": "99780",
    "end": "103500"
  },
  {
    "text": "Network policy model",
    "start": "103500",
    "end": "105659"
  },
  {
    "text": "the model is richer than what kubernetes",
    "start": "105659",
    "end": "108000"
  },
  {
    "text": "natively support but particularly",
    "start": "108000",
    "end": "111780"
  },
  {
    "text": "completely implements that kubernetes",
    "start": "111780",
    "end": "114360"
  },
  {
    "text": "Network policy model as well",
    "start": "114360",
    "end": "117060"
  },
  {
    "text": "so Calico is uh pretty much a control",
    "start": "117060",
    "end": "119939"
  },
  {
    "text": "plane right it collects information from",
    "start": "119939",
    "end": "123240"
  },
  {
    "text": "the",
    "start": "123240",
    "end": "124340"
  },
  {
    "text": "kubernetes environment it merges that",
    "start": "124340",
    "end": "128099"
  },
  {
    "text": "with the user provided data policies and",
    "start": "128099",
    "end": "132480"
  },
  {
    "text": "compiles them passes it to a data plane",
    "start": "132480",
    "end": "135120"
  },
  {
    "text": "that executes those policies",
    "start": "135120",
    "end": "138180"
  },
  {
    "start": "138000",
    "end": "203000"
  },
  {
    "text": "uh Geico is essentially a multi-platform",
    "start": "138180",
    "end": "142700"
  },
  {
    "text": "project it has it supports multiple data",
    "start": "142700",
    "end": "146879"
  },
  {
    "text": "planes it naturally runs on iptables it",
    "start": "146879",
    "end": "152760"
  },
  {
    "text": "supports the evpf data plane",
    "start": "152760",
    "end": "155959"
  },
  {
    "text": "and that I'm going to talk about here",
    "start": "155959",
    "end": "158760"
  },
  {
    "text": "today but also there are other data",
    "start": "158760",
    "end": "161220"
  },
  {
    "text": "planes like the VPP contributed by Cisco",
    "start": "161220",
    "end": "164300"
  },
  {
    "text": "and colleague also runs on Windows and",
    "start": "164300",
    "end": "167879"
  },
  {
    "text": "Hood gas we can also leverage some ebpf",
    "start": "167879",
    "end": "171480"
  },
  {
    "text": "on Windows",
    "start": "171480",
    "end": "172920"
  },
  {
    "text": "uh",
    "start": "172920",
    "end": "174360"
  },
  {
    "text": "the data plans differ depending on users",
    "start": "174360",
    "end": "177840"
  },
  {
    "text": "needs in the IP tables you have pretty",
    "start": "177840",
    "end": "181319"
  },
  {
    "text": "much everything provided by the kernel",
    "start": "181319",
    "end": "183319"
  },
  {
    "text": "and Calico just programs the rules while",
    "start": "183319",
    "end": "187739"
  },
  {
    "text": "any BPF kernel provides the environment",
    "start": "187739",
    "end": "191120"
  },
  {
    "text": "but the data plan is actually provided",
    "start": "191120",
    "end": "195900"
  },
  {
    "text": "by project Calico the code is injected",
    "start": "195900",
    "end": "199440"
  },
  {
    "text": "in the kernel and the code comes with",
    "start": "199440",
    "end": "201000"
  },
  {
    "text": "Calico itself",
    "start": "201000",
    "end": "203840"
  },
  {
    "start": "203000",
    "end": "283000"
  },
  {
    "text": "so well ebps is here well he's been here",
    "start": "204239",
    "end": "207360"
  },
  {
    "text": "for a while I think we've released the",
    "start": "207360",
    "end": "210599"
  },
  {
    "text": "EBP data plan about two and a half years",
    "start": "210599",
    "end": "212459"
  },
  {
    "text": "ago",
    "start": "212459",
    "end": "213440"
  },
  {
    "text": "and it's great it provides better",
    "start": "213440",
    "end": "216000"
  },
  {
    "text": "scalability of services provides lower",
    "start": "216000",
    "end": "218700"
  },
  {
    "text": "latency within the nodes uh Comes This",
    "start": "218700",
    "end": "222540"
  },
  {
    "text": "integrated Cube proxy which results in",
    "start": "222540",
    "end": "226200"
  },
  {
    "text": "less conflicts when multiple users have",
    "start": "226200",
    "end": "229379"
  },
  {
    "text": "to fight over iptables",
    "start": "229379",
    "end": "231360"
  },
  {
    "text": "the cool thing is that we can add new",
    "start": "231360",
    "end": "234900"
  },
  {
    "text": "features uh like the fact that if you if",
    "start": "234900",
    "end": "240000"
  },
  {
    "text": "you're",
    "start": "240000",
    "end": "241379"
  },
  {
    "text": "client is accessing your clusters",
    "start": "241379",
    "end": "244140"
  },
  {
    "text": "through node Port that we can preserve",
    "start": "244140",
    "end": "246060"
  },
  {
    "text": "the client's IP all the way to the",
    "start": "246060",
    "end": "248760"
  },
  {
    "text": "destination pod which helps the users to",
    "start": "248760",
    "end": "253140"
  },
  {
    "text": "write more sensible and more robust",
    "start": "253140",
    "end": "254879"
  },
  {
    "text": "Network policies something that wasn't",
    "start": "254879",
    "end": "257280"
  },
  {
    "text": "possible with iptables it allows us to",
    "start": "257280",
    "end": "260699"
  },
  {
    "text": "implement DSR which helps with",
    "start": "260699",
    "end": "262979"
  },
  {
    "text": "performance and in general ebpf provides",
    "start": "262979",
    "end": "265860"
  },
  {
    "text": "us with lots of flexibility so that we",
    "start": "265860",
    "end": "268800"
  },
  {
    "text": "can tweak existing kubernetes features",
    "start": "268800",
    "end": "271440"
  },
  {
    "text": "or when there is a need",
    "start": "271440",
    "end": "273860"
  },
  {
    "text": "or users have a need for a specific",
    "start": "273860",
    "end": "276479"
  },
  {
    "text": "feature that is not supported by the",
    "start": "276479",
    "end": "278940"
  },
  {
    "text": "mainstream kubernetes then it's possible",
    "start": "278940",
    "end": "280919"
  },
  {
    "text": "to extend it",
    "start": "280919",
    "end": "283699"
  },
  {
    "start": "283000",
    "end": "461000"
  },
  {
    "text": "but let's uh first start with iptables",
    "start": "283740",
    "end": "286500"
  },
  {
    "text": "and the good old days uh in those days",
    "start": "286500",
    "end": "290040"
  },
  {
    "text": "uh it is a super well understood data",
    "start": "290040",
    "end": "293400"
  },
  {
    "text": "plane but that data plane don't",
    "start": "293400",
    "end": "295259"
  },
  {
    "text": "necessarily scale as well and it's not",
    "start": "295259",
    "end": "297720"
  },
  {
    "text": "very extendable if you would like to try",
    "start": "297720",
    "end": "300000"
  },
  {
    "text": "to expand the IP tables you would have",
    "start": "300000",
    "end": "302580"
  },
  {
    "text": "to provide a kernel module and good luck",
    "start": "302580",
    "end": "305160"
  },
  {
    "text": "is persuading your users to loads your",
    "start": "305160",
    "end": "308100"
  },
  {
    "text": "current module in their environment",
    "start": "308100",
    "end": "310580"
  },
  {
    "text": "the good thing is that all the rules are",
    "start": "310580",
    "end": "314699"
  },
  {
    "text": "in the IP table so when you dump the ipt",
    "start": "314699",
    "end": "316800"
  },
  {
    "text": "rule this kind of human readable that's",
    "start": "316800",
    "end": "319500"
  },
  {
    "text": "great so the service is implemented by Q",
    "start": "319500",
    "end": "322440"
  },
  {
    "text": "proxy and the policies implemented by uh",
    "start": "322440",
    "end": "327360"
  },
  {
    "text": "Calico or",
    "start": "327360",
    "end": "329160"
  },
  {
    "text": "any other project for uh",
    "start": "329160",
    "end": "332639"
  },
  {
    "text": "networking a kind of in plain size so",
    "start": "332639",
    "end": "335100"
  },
  {
    "text": "you can dump it and with some F4 you can",
    "start": "335100",
    "end": "337199"
  },
  {
    "text": "read it and understand it right so this",
    "start": "337199",
    "end": "340020"
  },
  {
    "text": "is kind of what people were used to",
    "start": "340020",
    "end": "341639"
  },
  {
    "text": "Linux does the rest of the heavy lifting",
    "start": "341639",
    "end": "344940"
  },
  {
    "text": "it does routing it handles the protocols",
    "start": "344940",
    "end": "347160"
  },
  {
    "text": "edge cases and so on and forth so forth",
    "start": "347160",
    "end": "349800"
  },
  {
    "text": "it is super robust and well tested right",
    "start": "349800",
    "end": "354840"
  },
  {
    "text": "so uh",
    "start": "354840",
    "end": "356639"
  },
  {
    "text": "this is the ebpf data plan syncs change",
    "start": "356639",
    "end": "360120"
  },
  {
    "text": "things are different uh",
    "start": "360120",
    "end": "362699"
  },
  {
    "text": "we no longer have the rules in a single",
    "start": "362699",
    "end": "366180"
  },
  {
    "text": "place in the IP tables but",
    "start": "366180",
    "end": "369240"
  },
  {
    "text": "the data planes are implemented by",
    "start": "369240",
    "end": "371400"
  },
  {
    "text": "attaching ebvf programs to typically the",
    "start": "371400",
    "end": "374460"
  },
  {
    "text": "TC hooks on Ingress and egress of",
    "start": "374460",
    "end": "378600"
  },
  {
    "text": "devices",
    "start": "378600",
    "end": "380100"
  },
  {
    "text": "those programs are free to forward the",
    "start": "380100",
    "end": "383340"
  },
  {
    "text": "packet to uh another device directly",
    "start": "383340",
    "end": "387240"
  },
  {
    "text": "completely bypassing VIP tables",
    "start": "387240",
    "end": "390840"
  },
  {
    "text": "the programs may or may not consult",
    "start": "390840",
    "end": "393180"
  },
  {
    "text": "routing within the system or they can",
    "start": "393180",
    "end": "395759"
  },
  {
    "text": "decide on their own so that kind of",
    "start": "395759",
    "end": "399120"
  },
  {
    "text": "changes how things used to work",
    "start": "399120",
    "end": "402500"
  },
  {
    "text": "so in general even though ebpf has been",
    "start": "402500",
    "end": "405720"
  },
  {
    "text": "here for a while",
    "start": "405720",
    "end": "407160"
  },
  {
    "text": "and is somewhat understood is definitely",
    "start": "407160",
    "end": "409800"
  },
  {
    "text": "not human readable",
    "start": "409800",
    "end": "411240"
  },
  {
    "text": "if you install ebpf programs your user",
    "start": "411240",
    "end": "414780"
  },
  {
    "text": "can kind of dump the program May",
    "start": "414780",
    "end": "417479"
  },
  {
    "text": "disassemble it perhaps but not really",
    "start": "417479",
    "end": "421139"
  },
  {
    "text": "read it even though I guess some of uh",
    "start": "421139",
    "end": "423960"
  },
  {
    "text": "in this room may actually do that",
    "start": "423960",
    "end": "427280"
  },
  {
    "text": "the nodes Network Stacks largely",
    "start": "427280",
    "end": "429660"
  },
  {
    "text": "bypassed the Q proxy that comes with",
    "start": "429660",
    "end": "432900"
  },
  {
    "text": "kubernetes now useless because it",
    "start": "432900",
    "end": "435000"
  },
  {
    "text": "implements the services in iptables and",
    "start": "435000",
    "end": "439199"
  },
  {
    "text": "in the host Nazareth stack and now the",
    "start": "439199",
    "end": "441599"
  },
  {
    "text": "package don't hit it anymore and the",
    "start": "441599",
    "end": "444479"
  },
  {
    "text": "policies are implemented in ebpf code",
    "start": "444479",
    "end": "447620"
  },
  {
    "text": "and that may may refer to ebpf Maps but",
    "start": "447620",
    "end": "451680"
  },
  {
    "text": "again unlike in the IP tables world",
    "start": "451680",
    "end": "454020"
  },
  {
    "text": "where you could dump the rules and kind",
    "start": "454020",
    "end": "456479"
  },
  {
    "text": "of read it that's not really",
    "start": "456479",
    "end": "457979"
  },
  {
    "text": "straightforward so",
    "start": "457979",
    "end": "461580"
  },
  {
    "start": "461000",
    "end": "512000"
  },
  {
    "text": "from the user's perspective is fantastic",
    "start": "462720",
    "end": "465060"
  },
  {
    "text": "we've got something that is scalable",
    "start": "465060",
    "end": "466500"
  },
  {
    "text": "that is faster that has new features but",
    "start": "466500",
    "end": "470099"
  },
  {
    "text": "hold on",
    "start": "470099",
    "end": "471620"
  },
  {
    "text": "the feedback we got is kind of like how",
    "start": "471620",
    "end": "474660"
  },
  {
    "text": "can I verify that the data plane rights",
    "start": "474660",
    "end": "476699"
  },
  {
    "text": "and implements the policies that we ask",
    "start": "476699",
    "end": "480000"
  },
  {
    "text": "it to right",
    "start": "480000",
    "end": "482240"
  },
  {
    "text": "we have users that say",
    "start": "482240",
    "end": "485000"
  },
  {
    "text": "I don't see collections in my contract",
    "start": "485000",
    "end": "488840"
  },
  {
    "text": "uh it is difficult to verify that the",
    "start": "488840",
    "end": "492479"
  },
  {
    "text": "services are programmed correctly right",
    "start": "492479",
    "end": "494340"
  },
  {
    "text": "all of that was in plain size in",
    "start": "494340",
    "end": "496080"
  },
  {
    "text": "iptables world",
    "start": "496080",
    "end": "497880"
  },
  {
    "text": "some users may even have tools that use",
    "start": "497880",
    "end": "500639"
  },
  {
    "text": "the",
    "start": "500639",
    "end": "501740"
  },
  {
    "text": "use the",
    "start": "501740",
    "end": "504379"
  },
  {
    "text": "Linux contract and so on for their",
    "start": "504379",
    "end": "507539"
  },
  {
    "text": "third-party tools and these environments",
    "start": "507539",
    "end": "510360"
  },
  {
    "text": "only break",
    "start": "510360",
    "end": "512700"
  },
  {
    "start": "512000",
    "end": "565000"
  },
  {
    "text": "so",
    "start": "512700",
    "end": "514500"
  },
  {
    "text": "this talk is meant to kind of bridge the",
    "start": "514500",
    "end": "517080"
  },
  {
    "text": "gap",
    "start": "517080",
    "end": "518279"
  },
  {
    "text": "between the new users and the new data",
    "start": "518279",
    "end": "521219"
  },
  {
    "text": "plane and what the users were used to",
    "start": "521219",
    "end": "523159"
  },
  {
    "text": "and how the environment has changed",
    "start": "523159",
    "end": "526940"
  },
  {
    "text": "this should help the users to adopt it",
    "start": "526940",
    "end": "530640"
  },
  {
    "text": "more broadly and contribute to the",
    "start": "530640",
    "end": "533760"
  },
  {
    "text": "project and to the community as well",
    "start": "533760",
    "end": "536220"
  },
  {
    "text": "so since its Inception uh Calico comes",
    "start": "536220",
    "end": "539459"
  },
  {
    "text": "with kind of small debug utility called",
    "start": "539459",
    "end": "542100"
  },
  {
    "text": "Calico BPF",
    "start": "542100",
    "end": "543860"
  },
  {
    "text": "it's now more comfortably accessible",
    "start": "543860",
    "end": "546540"
  },
  {
    "text": "through directly through the Calico",
    "start": "546540",
    "end": "548459"
  },
  {
    "text": "nodes within your cluster",
    "start": "548459",
    "end": "551519"
  },
  {
    "text": "and that provides a",
    "start": "551519",
    "end": "554100"
  },
  {
    "text": "bunch of",
    "start": "554100",
    "end": "555560"
  },
  {
    "text": "commands that allow you to introspect or",
    "start": "555560",
    "end": "558899"
  },
  {
    "text": "modify the data plan and I'm going to",
    "start": "558899",
    "end": "561120"
  },
  {
    "text": "walk you through what is available and",
    "start": "561120",
    "end": "563700"
  },
  {
    "text": "how you can use that",
    "start": "563700",
    "end": "566480"
  },
  {
    "start": "565000",
    "end": "648000"
  },
  {
    "text": "so the first thing typically when",
    "start": "566820",
    "end": "570300"
  },
  {
    "text": "your service or some some connectivity",
    "start": "570300",
    "end": "572640"
  },
  {
    "text": "doesn't work in your cluster",
    "start": "572640",
    "end": "574920"
  },
  {
    "text": "the first thing you want to answer is",
    "start": "574920",
    "end": "577080"
  },
  {
    "text": "other services implemented correctly",
    "start": "577080",
    "end": "580380"
  },
  {
    "text": "uh",
    "start": "580380",
    "end": "582540"
  },
  {
    "text": "in Calico BPF data plane is essentially",
    "start": "582540",
    "end": "586320"
  },
  {
    "text": "done as to ppf Maps",
    "start": "586320",
    "end": "590480"
  },
  {
    "text": "the first map is a set of front ends",
    "start": "590480",
    "end": "593519"
  },
  {
    "text": "that point to the map with a set of",
    "start": "593519",
    "end": "595680"
  },
  {
    "text": "backends right and you can use a",
    "start": "595680",
    "end": "597720"
  },
  {
    "text": "colleague of BPF not dumb command to",
    "start": "597720",
    "end": "599700"
  },
  {
    "text": "list this in human readable form",
    "start": "599700",
    "end": "603360"
  },
  {
    "text": "so",
    "start": "603360",
    "end": "605279"
  },
  {
    "text": "it'll print you which service IP is",
    "start": "605279",
    "end": "608399"
  },
  {
    "text": "there will sort of uh protocol it uses",
    "start": "608399",
    "end": "610920"
  },
  {
    "text": "will sort of port",
    "start": "610920",
    "end": "612839"
  },
  {
    "text": "and how many there are backends how many",
    "start": "612839",
    "end": "615360"
  },
  {
    "text": "local back-ends there are",
    "start": "615360",
    "end": "618420"
  },
  {
    "text": "on the indented lines you'll get a list",
    "start": "618420",
    "end": "621420"
  },
  {
    "text": "of the backends which the service is",
    "start": "621420",
    "end": "624300"
  },
  {
    "text": "pointing to with the service ID and the",
    "start": "624300",
    "end": "627180"
  },
  {
    "text": "backend ID",
    "start": "627180",
    "end": "629720"
  },
  {
    "text": "only slide you can see that uh",
    "start": "630120",
    "end": "633320"
  },
  {
    "text": "uh certain backends belong to multiple",
    "start": "633320",
    "end": "636180"
  },
  {
    "text": "services with the same ID the reason is",
    "start": "636180",
    "end": "638700"
  },
  {
    "text": "quite simple a service can have",
    "start": "638700",
    "end": "640620"
  },
  {
    "text": "multiplied piece like the cluster IP it",
    "start": "640620",
    "end": "642779"
  },
  {
    "text": "can have external IP node port",
    "start": "642779",
    "end": "645120"
  },
  {
    "text": "so on and so forth",
    "start": "645120",
    "end": "648380"
  },
  {
    "start": "648000",
    "end": "709000"
  },
  {
    "text": "the next thing you would like to check",
    "start": "649079",
    "end": "651180"
  },
  {
    "text": "is whether you're understanding of what",
    "start": "651180",
    "end": "653700"
  },
  {
    "text": "is in the cluster matches the",
    "start": "653700",
    "end": "655920"
  },
  {
    "text": "understanding of the data plane itself",
    "start": "655920",
    "end": "657480"
  },
  {
    "text": "right so another thing we can dump is",
    "start": "657480",
    "end": "660480"
  },
  {
    "text": "routes it's not quite a route in like",
    "start": "660480",
    "end": "663240"
  },
  {
    "text": "the IP route sensor things but it",
    "start": "663240",
    "end": "667100"
  },
  {
    "text": "describes what a certain side you're",
    "start": "667100",
    "end": "669600"
  },
  {
    "text": "within the cluster means so on the right",
    "start": "669600",
    "end": "671820"
  },
  {
    "text": "left hand side you will see the slider",
    "start": "671820",
    "end": "674220"
  },
  {
    "text": "and on the right hand side you will see",
    "start": "674220",
    "end": "676700"
  },
  {
    "text": "the explanation in what the cider means",
    "start": "676700",
    "end": "679920"
  },
  {
    "text": "so it tells you whether in that size are",
    "start": "679920",
    "end": "683040"
  },
  {
    "text": "pods workloads whether it's remote or",
    "start": "683040",
    "end": "685860"
  },
  {
    "text": "local if it's local at what interface it",
    "start": "685860",
    "end": "689519"
  },
  {
    "text": "is attached to the host and if it's",
    "start": "689519",
    "end": "694079"
  },
  {
    "text": "accessed via a tunnel of an overlay was",
    "start": "694079",
    "end": "697500"
  },
  {
    "text": "the next hub and a bunch of other good",
    "start": "697500",
    "end": "700860"
  },
  {
    "text": "things that are important for your",
    "start": "700860",
    "end": "702899"
  },
  {
    "text": "understanding",
    "start": "702899",
    "end": "703980"
  },
  {
    "text": "so if you verify that and if that",
    "start": "703980",
    "end": "706860"
  },
  {
    "text": "matches your expectation uh",
    "start": "706860",
    "end": "709560"
  },
  {
    "start": "709000",
    "end": "771000"
  },
  {
    "text": "the next thing is to look at the",
    "start": "709560",
    "end": "712019"
  },
  {
    "text": "connections themselves",
    "start": "712019",
    "end": "713700"
  },
  {
    "text": "uh the ebpf data plane has been",
    "start": "713700",
    "end": "716519"
  },
  {
    "text": "mentioned before",
    "start": "716519",
    "end": "717980"
  },
  {
    "text": "implements services on its own because",
    "start": "717980",
    "end": "720720"
  },
  {
    "text": "the Q proxy is kind of bypassing this",
    "start": "720720",
    "end": "723839"
  },
  {
    "text": "world",
    "start": "723839",
    "end": "724820"
  },
  {
    "text": "if you have needs to do all the netting",
    "start": "724820",
    "end": "727380"
  },
  {
    "text": "and for that it needs to maintain",
    "start": "727380",
    "end": "729480"
  },
  {
    "text": "connection tracking so it can do the",
    "start": "729480",
    "end": "732180"
  },
  {
    "text": "reverse translation and it also",
    "start": "732180",
    "end": "734760"
  },
  {
    "text": "maintains the connections so that it",
    "start": "734760",
    "end": "737100"
  },
  {
    "text": "knows uh what was allowed into the",
    "start": "737100",
    "end": "739560"
  },
  {
    "text": "system and what not in general we have a",
    "start": "739560",
    "end": "742740"
  },
  {
    "text": "single entry per connection that",
    "start": "742740",
    "end": "745800"
  },
  {
    "text": "maintains all the core properties and in",
    "start": "745800",
    "end": "748860"
  },
  {
    "text": "case there is a address translation we",
    "start": "748860",
    "end": "751500"
  },
  {
    "text": "have a second entry that refers to the",
    "start": "751500",
    "end": "753959"
  },
  {
    "text": "one that maintains most of the",
    "start": "753959",
    "end": "756720"
  },
  {
    "text": "properties",
    "start": "756720",
    "end": "758040"
  },
  {
    "text": "this renders the kernel contract pretty",
    "start": "758040",
    "end": "760440"
  },
  {
    "text": "much Irrelevant this is kind of the uh",
    "start": "760440",
    "end": "763620"
  },
  {
    "text": "one of the most important things that",
    "start": "763620",
    "end": "765300"
  },
  {
    "text": "users are being confused with",
    "start": "765300",
    "end": "767399"
  },
  {
    "text": "that there are some of the two contracts",
    "start": "767399",
    "end": "771380"
  },
  {
    "start": "771000",
    "end": "818000"
  },
  {
    "text": "so when you use the Calico BPF tool to",
    "start": "772320",
    "end": "775560"
  },
  {
    "text": "dump the contract uh you'll pretty much",
    "start": "775560",
    "end": "778320"
  },
  {
    "text": "see a line per entry unfortunately here",
    "start": "778320",
    "end": "782160"
  },
  {
    "text": "is rap because it will fit the slide",
    "start": "782160",
    "end": "784620"
  },
  {
    "text": "so in this simple case where there is no",
    "start": "784620",
    "end": "786779"
  },
  {
    "text": "netting the entry just shows you that uh",
    "start": "786779",
    "end": "790680"
  },
  {
    "text": "what's the connection that's the key",
    "start": "790680",
    "end": "793079"
  },
  {
    "text": "and was the type of the entry here it",
    "start": "793079",
    "end": "796260"
  },
  {
    "text": "says that's a simple one and it tells",
    "start": "796260",
    "end": "799079"
  },
  {
    "text": "you uh other properties of the",
    "start": "799079",
    "end": "801540"
  },
  {
    "text": "connection like here it's a TCP",
    "start": "801540",
    "end": "803160"
  },
  {
    "text": "connection it tells you that it's been",
    "start": "803160",
    "end": "805320"
  },
  {
    "text": "open and it was gracefully closed",
    "start": "805320",
    "end": "807959"
  },
  {
    "text": "and it tells you also uh how long ago",
    "start": "807959",
    "end": "811440"
  },
  {
    "text": "these things happen that's important for",
    "start": "811440",
    "end": "813779"
  },
  {
    "text": "garbage garbage collecting this uh these",
    "start": "813779",
    "end": "817500"
  },
  {
    "text": "connections",
    "start": "817500",
    "end": "819240"
  },
  {
    "start": "818000",
    "end": "866000"
  },
  {
    "text": "in the more complex case on the services",
    "start": "819240",
    "end": "821279"
  },
  {
    "text": "in play",
    "start": "821279",
    "end": "823019"
  },
  {
    "text": "you would also see an extra entry which",
    "start": "823019",
    "end": "827399"
  },
  {
    "text": "is keyed by the predeen topple so you",
    "start": "827399",
    "end": "829800"
  },
  {
    "text": "see that the part is connected to",
    "start": "829800",
    "end": "831360"
  },
  {
    "text": "service",
    "start": "831360",
    "end": "832320"
  },
  {
    "text": "and that entry carries the reverse key",
    "start": "832320",
    "end": "834899"
  },
  {
    "text": "that points to the post DNA",
    "start": "834899",
    "end": "838700"
  },
  {
    "text": "translation and that points to another",
    "start": "838700",
    "end": "842820"
  },
  {
    "text": "entry that maintains the information I",
    "start": "842820",
    "end": "847740"
  },
  {
    "text": "have described on the previous slide",
    "start": "847740",
    "end": "850139"
  },
  {
    "text": "the difference here is that it also",
    "start": "850139",
    "end": "853380"
  },
  {
    "text": "carries the information about the",
    "start": "853380",
    "end": "855300"
  },
  {
    "text": "network address translation",
    "start": "855300",
    "end": "856920"
  },
  {
    "text": "and a couple other things",
    "start": "856920",
    "end": "860579"
  },
  {
    "text": "so uh yeah if that looks good uh you can",
    "start": "860579",
    "end": "865860"
  },
  {
    "text": "you can carry on",
    "start": "865860",
    "end": "867720"
  },
  {
    "start": "866000",
    "end": "930000"
  },
  {
    "text": "uh I've mentioned a couple times that",
    "start": "867720",
    "end": "870660"
  },
  {
    "text": "Little's contract is not important",
    "start": "870660",
    "end": "873120"
  },
  {
    "text": "anymore it's irrelevant it's not quite",
    "start": "873120",
    "end": "875940"
  },
  {
    "text": "entirely true there are scenarios where",
    "start": "875940",
    "end": "879120"
  },
  {
    "text": "doing things outside of ebpf is just",
    "start": "879120",
    "end": "881699"
  },
  {
    "text": "simpler than doing it in ppf",
    "start": "881699",
    "end": "884399"
  },
  {
    "text": "typical scenario is the marsh parade",
    "start": "884399",
    "end": "886639"
  },
  {
    "text": "Calico allows you to tag",
    "start": "886639",
    "end": "889279"
  },
  {
    "text": "IP pool for not outgoing so if you're",
    "start": "889279",
    "end": "893040"
  },
  {
    "text": "sending stuff outside of your cluster",
    "start": "893040",
    "end": "894660"
  },
  {
    "text": "then",
    "start": "894660",
    "end": "897120"
  },
  {
    "text": "the traffic outside of a cluster will",
    "start": "897120",
    "end": "899100"
  },
  {
    "text": "have the cluster's IP or one of the",
    "start": "899100",
    "end": "901199"
  },
  {
    "text": "classes IP",
    "start": "901199",
    "end": "903120"
  },
  {
    "text": "it is possible to do it in ebpf but it's",
    "start": "903120",
    "end": "905519"
  },
  {
    "text": "not entirely straightforward it's",
    "start": "905519",
    "end": "907399"
  },
  {
    "text": "inherently difficult to allocate a",
    "start": "907399",
    "end": "909959"
  },
  {
    "text": "non-conflict install Sports so why not",
    "start": "909959",
    "end": "912839"
  },
  {
    "text": "to let those packets go through the IP",
    "start": "912839",
    "end": "914820"
  },
  {
    "text": "tables and through the host Network",
    "start": "914820",
    "end": "916740"
  },
  {
    "text": "stack and let the kernel does do what it",
    "start": "916740",
    "end": "920339"
  },
  {
    "text": "does pretty well",
    "start": "920339",
    "end": "922199"
  },
  {
    "text": "we just instruct the connections to go",
    "start": "922199",
    "end": "924660"
  },
  {
    "text": "that way and let the Linux track those",
    "start": "924660",
    "end": "927899"
  },
  {
    "text": "connections nevertheless they",
    "start": "927899",
    "end": "930839"
  },
  {
    "start": "930000",
    "end": "947000"
  },
  {
    "text": "connection is also tracked in ebpf",
    "start": "930839",
    "end": "933240"
  },
  {
    "text": "connection tracking we must do that",
    "start": "933240",
    "end": "935220"
  },
  {
    "text": "because we have to tell what should",
    "start": "935220",
    "end": "937440"
  },
  {
    "text": "happen to those packets on those on that",
    "start": "937440",
    "end": "939180"
  },
  {
    "text": "connection so again uh evpf contract is",
    "start": "939180",
    "end": "943560"
  },
  {
    "text": "the alternative contract here",
    "start": "943560",
    "end": "947399"
  },
  {
    "start": "947000",
    "end": "1030000"
  },
  {
    "text": "so we were talking so far about",
    "start": "947399",
    "end": "950880"
  },
  {
    "text": "connectivity in your cluster but if",
    "start": "950880",
    "end": "952620"
  },
  {
    "text": "you're using project collica you",
    "start": "952620",
    "end": "954899"
  },
  {
    "text": "probably",
    "start": "954899",
    "end": "955800"
  },
  {
    "text": "are most interested in network policies",
    "start": "955800",
    "end": "959120"
  },
  {
    "text": "let us also change dramatically before",
    "start": "959120",
    "end": "962720"
  },
  {
    "text": "uh Calico compiled the information from",
    "start": "962720",
    "end": "967139"
  },
  {
    "text": "the cluster with the policies and",
    "start": "967139",
    "end": "969060"
  },
  {
    "text": "injected it into the iptables kind of",
    "start": "969060",
    "end": "971579"
  },
  {
    "text": "into a single point while now",
    "start": "971579",
    "end": "974519"
  },
  {
    "text": "that information is split and the policy",
    "start": "974519",
    "end": "977820"
  },
  {
    "text": "or part of the policy is attached to",
    "start": "977820",
    "end": "980880"
  },
  {
    "text": "individual endpoints and individual",
    "start": "980880",
    "end": "982680"
  },
  {
    "text": "devices within the system so it's kind",
    "start": "982680",
    "end": "984540"
  },
  {
    "text": "of broken up",
    "start": "984540",
    "end": "986279"
  },
  {
    "text": "uh these policies are implemented in in",
    "start": "986279",
    "end": "990839"
  },
  {
    "text": "the program",
    "start": "990839",
    "end": "991860"
  },
  {
    "text": "and that program May point to ebpf maps",
    "start": "991860",
    "end": "996240"
  },
  {
    "text": "but from the perspective of user it is",
    "start": "996240",
    "end": "999779"
  },
  {
    "text": "essentially a binary blob you can dump",
    "start": "999779",
    "end": "1003079"
  },
  {
    "text": "the policy you can disassemble it and if",
    "start": "1003079",
    "end": "1006740"
  },
  {
    "text": "you have intimate knowledge of the data",
    "start": "1006740",
    "end": "1008839"
  },
  {
    "text": "structures you may actually get",
    "start": "1008839",
    "end": "1010459"
  },
  {
    "text": "something out of it and that's the",
    "start": "1010459",
    "end": "1013759"
  },
  {
    "text": "complaint that we got not because uh the",
    "start": "1013759",
    "end": "1019339"
  },
  {
    "text": "users would need to like debug that it's",
    "start": "1019339",
    "end": "1021860"
  },
  {
    "text": "more like in the zero trust poly uh",
    "start": "1021860",
    "end": "1024620"
  },
  {
    "text": "security world the the users want to uh",
    "start": "1024620",
    "end": "1027860"
  },
  {
    "text": "only trust what they see so in recent",
    "start": "1027860",
    "end": "1031699"
  },
  {
    "start": "1030000",
    "end": "1102000"
  },
  {
    "text": "release we've added",
    "start": "1031699",
    "end": "1033980"
  },
  {
    "text": "uh uh a policy dump",
    "start": "1033980",
    "end": "1037579"
  },
  {
    "text": "so you can specify interface and hook",
    "start": "1037579",
    "end": "1041000"
  },
  {
    "text": "Ingress or egress or in some cases also",
    "start": "1041000",
    "end": "1043938"
  },
  {
    "text": "the XDP Hooks and allows you to dump",
    "start": "1043939",
    "end": "1046760"
  },
  {
    "text": "what sort of policy is on that in that",
    "start": "1046760",
    "end": "1049940"
  },
  {
    "text": "place in the system",
    "start": "1049940",
    "end": "1051620"
  },
  {
    "text": "in that dump you",
    "start": "1051620",
    "end": "1053720"
  },
  {
    "text": "will see what policy",
    "start": "1053720",
    "end": "1056299"
  },
  {
    "text": "is being implemented",
    "start": "1056299",
    "end": "1059660"
  },
  {
    "text": "what rule of the policy",
    "start": "1059660",
    "end": "1062059"
  },
  {
    "text": "is specifically implemented",
    "start": "1062059",
    "end": "1064880"
  },
  {
    "text": "and some more human readable form of how",
    "start": "1064880",
    "end": "1068360"
  },
  {
    "text": "the rules actually implemented and for",
    "start": "1068360",
    "end": "1071120"
  },
  {
    "text": "those really interested there is also a",
    "start": "1071120",
    "end": "1073400"
  },
  {
    "text": "dump of the assembly code",
    "start": "1073400",
    "end": "1075460"
  },
  {
    "text": "more in the human readable form with",
    "start": "1075460",
    "end": "1078799"
  },
  {
    "text": "some extra annotations that allow you to",
    "start": "1078799",
    "end": "1081020"
  },
  {
    "text": "also inspect which state and how that",
    "start": "1081020",
    "end": "1084200"
  },
  {
    "text": "state is actually being uh",
    "start": "1084200",
    "end": "1087919"
  },
  {
    "text": "uh",
    "start": "1087919",
    "end": "1089419"
  },
  {
    "text": "uh inspected by the policy and how is",
    "start": "1089419",
    "end": "1091400"
  },
  {
    "text": "the policy being executed so it allows",
    "start": "1091400",
    "end": "1093500"
  },
  {
    "text": "you to go through the code and see what",
    "start": "1093500",
    "end": "1095720"
  },
  {
    "text": "what happens if the IP doesn't match or",
    "start": "1095720",
    "end": "1098299"
  },
  {
    "text": "match and how to flow through the policy",
    "start": "1098299",
    "end": "1100480"
  },
  {
    "text": "uh goes",
    "start": "1100480",
    "end": "1103820"
  },
  {
    "start": "1102000",
    "end": "1149000"
  },
  {
    "text": "I mentioned uh the ebpf maps a couple",
    "start": "1103820",
    "end": "1106880"
  },
  {
    "text": "times and that's mostly come in play",
    "start": "1106880",
    "end": "1109460"
  },
  {
    "text": "When the policy use selector",
    "start": "1109460",
    "end": "1112000"
  },
  {
    "text": "that can match with very many",
    "start": "1112000",
    "end": "1115660"
  },
  {
    "text": "IPS Insiders",
    "start": "1115660",
    "end": "1117919"
  },
  {
    "text": "and they'll be too complex to put in",
    "start": "1117919",
    "end": "1120559"
  },
  {
    "text": "code so we put it in what we call IPC we",
    "start": "1120559",
    "end": "1124039"
  },
  {
    "text": "kind of borrowed the name from the IP",
    "start": "1124039",
    "end": "1126740"
  },
  {
    "text": "tables world because it is essentially a",
    "start": "1126740",
    "end": "1128840"
  },
  {
    "text": "set of ips",
    "start": "1128840",
    "end": "1130160"
  },
  {
    "text": "and the policy Dom shows you which uh",
    "start": "1130160",
    "end": "1134240"
  },
  {
    "text": "selector",
    "start": "1134240",
    "end": "1136520"
  },
  {
    "text": "is implemented by uh by what IP said and",
    "start": "1136520",
    "end": "1141080"
  },
  {
    "text": "the Calico BPF allows you to go dump the",
    "start": "1141080",
    "end": "1144140"
  },
  {
    "text": "IP set and verify whether the IP set",
    "start": "1144140",
    "end": "1146660"
  },
  {
    "text": "matches your expectations",
    "start": "1146660",
    "end": "1149600"
  },
  {
    "start": "1149000",
    "end": "1187000"
  },
  {
    "text": "the net the next thing we've added",
    "start": "1149600",
    "end": "1151760"
  },
  {
    "text": "recently is a set of counters uh these",
    "start": "1151760",
    "end": "1155840"
  },
  {
    "text": "set of counters are per interface",
    "start": "1155840",
    "end": "1157880"
  },
  {
    "text": "and allow you to see",
    "start": "1157880",
    "end": "1161120"
  },
  {
    "text": "the obvious things how many packets went",
    "start": "1161120",
    "end": "1163340"
  },
  {
    "text": "through the interface how many were",
    "start": "1163340",
    "end": "1164720"
  },
  {
    "text": "accepted by a policy how many were",
    "start": "1164720",
    "end": "1166340"
  },
  {
    "text": "dropped by the policy but also allows",
    "start": "1166340",
    "end": "1168620"
  },
  {
    "text": "you to see uh",
    "start": "1168620",
    "end": "1170780"
  },
  {
    "text": "uh other things uh packets made make a",
    "start": "1170780",
    "end": "1173660"
  },
  {
    "text": "draw because of Errors because of",
    "start": "1173660",
    "end": "1175780"
  },
  {
    "text": "unexpected events these counters should",
    "start": "1175780",
    "end": "1178640"
  },
  {
    "text": "be zero so if something doesn't work in",
    "start": "1178640",
    "end": "1180740"
  },
  {
    "text": "your system and you see that these",
    "start": "1180740",
    "end": "1182059"
  },
  {
    "text": "counters are not zero that's kind of a",
    "start": "1182059",
    "end": "1184280"
  },
  {
    "text": "Smoking Gun and you can go and",
    "start": "1184280",
    "end": "1185600"
  },
  {
    "text": "investigate",
    "start": "1185600",
    "end": "1187700"
  },
  {
    "start": "1187000",
    "end": "1222000"
  },
  {
    "text": "one of the most important counters",
    "start": "1187700",
    "end": "1189500"
  },
  {
    "text": "that's been added goes back to the",
    "start": "1189500",
    "end": "1191539"
  },
  {
    "text": "policy dumps so every time a packet hits",
    "start": "1191539",
    "end": "1195380"
  },
  {
    "text": "a policy or a policy rule more",
    "start": "1195380",
    "end": "1197419"
  },
  {
    "text": "specifically we increment a counter on",
    "start": "1197419",
    "end": "1200240"
  },
  {
    "text": "the rule",
    "start": "1200240",
    "end": "1201380"
  },
  {
    "text": "so if you dump the policy",
    "start": "1201380",
    "end": "1203440"
  },
  {
    "text": "except the uh the",
    "start": "1203440",
    "end": "1207500"
  },
  {
    "text": "assembly Dom we've discussed before it",
    "start": "1207500",
    "end": "1210559"
  },
  {
    "text": "also tells you how many packets went",
    "start": "1210559",
    "end": "1212960"
  },
  {
    "text": "that way",
    "start": "1212960",
    "end": "1213980"
  },
  {
    "text": "and then you can",
    "start": "1213980",
    "end": "1215740"
  },
  {
    "text": "observe whether some of the rules are",
    "start": "1215740",
    "end": "1218780"
  },
  {
    "text": "actually being hit or not",
    "start": "1218780",
    "end": "1221980"
  },
  {
    "start": "1222000",
    "end": "1271000"
  },
  {
    "text": "excuse me so the ultimate option when",
    "start": "1224320",
    "end": "1227179"
  },
  {
    "text": "when you're diving into the data plane",
    "start": "1227179",
    "end": "1228860"
  },
  {
    "text": "and debugging uh",
    "start": "1228860",
    "end": "1231440"
  },
  {
    "text": "your system or bug in uh the project",
    "start": "1231440",
    "end": "1234559"
  },
  {
    "text": "is uh as you can turn on login since the",
    "start": "1234559",
    "end": "1238940"
  },
  {
    "text": "Inception uh we had the BPF log level uh",
    "start": "1238940",
    "end": "1242360"
  },
  {
    "text": "option that we can set to debug but",
    "start": "1242360",
    "end": "1244880"
  },
  {
    "text": "essentially turns login on every",
    "start": "1244880",
    "end": "1247820"
  },
  {
    "text": "endpoint for every packet",
    "start": "1247820",
    "end": "1250940"
  },
  {
    "text": "you get super fine grained inside into",
    "start": "1250940",
    "end": "1253880"
  },
  {
    "text": "what's happening in data plane but it's",
    "start": "1253880",
    "end": "1255440"
  },
  {
    "text": "also super slow because it goes into the",
    "start": "1255440",
    "end": "1257660"
  },
  {
    "text": "trace pipe and other various ways how to",
    "start": "1257660",
    "end": "1261140"
  },
  {
    "text": "dump the trace pipe but it's all",
    "start": "1261140",
    "end": "1263539"
  },
  {
    "text": "synchronized and slow",
    "start": "1263539",
    "end": "1265760"
  },
  {
    "text": "is a fire hose",
    "start": "1265760",
    "end": "1267520"
  },
  {
    "text": "uh so in the upcoming release",
    "start": "1267520",
    "end": "1271660"
  },
  {
    "start": "1271000",
    "end": "1308000"
  },
  {
    "text": "we are adding a filtering option",
    "start": "1271660",
    "end": "1275539"
  },
  {
    "text": "so essentially we use kind of like a",
    "start": "1275539",
    "end": "1277580"
  },
  {
    "text": "pcap TCP dump style fillers and",
    "start": "1277580",
    "end": "1279860"
  },
  {
    "text": "expressions so people should be familiar",
    "start": "1279860",
    "end": "1282140"
  },
  {
    "text": "with that allow us to specify on what",
    "start": "1282140",
    "end": "1285440"
  },
  {
    "text": "interface at waterhook we would like",
    "start": "1285440",
    "end": "1288559"
  },
  {
    "text": "certain packets be logged and rest not",
    "start": "1288559",
    "end": "1292100"
  },
  {
    "text": "so certain packets may take the slow",
    "start": "1292100",
    "end": "1294440"
  },
  {
    "text": "pass",
    "start": "1294440",
    "end": "1296000"
  },
  {
    "text": "while the rest is taking the fast bars",
    "start": "1296000",
    "end": "1298159"
  },
  {
    "text": "so you should have a minimal impact and",
    "start": "1298159",
    "end": "1301100"
  },
  {
    "text": "it should be possible to use that in",
    "start": "1301100",
    "end": "1303200"
  },
  {
    "text": "production environments not just some",
    "start": "1303200",
    "end": "1305120"
  },
  {
    "text": "staging environments",
    "start": "1305120",
    "end": "1308679"
  },
  {
    "text": "uh we",
    "start": "1308860",
    "end": "1311659"
  },
  {
    "text": "kind of Leverage here the power of the",
    "start": "1311659",
    "end": "1314720"
  },
  {
    "text": "pcap which can emit the which can",
    "start": "1314720",
    "end": "1318320"
  },
  {
    "text": "compile the CCB Dam Expressions into BPF",
    "start": "1318320",
    "end": "1321080"
  },
  {
    "text": "code unfortunately that's the ancient",
    "start": "1321080",
    "end": "1323780"
  },
  {
    "text": "classic ppf which has some uh",
    "start": "1323780",
    "end": "1327200"
  },
  {
    "text": "similarities with the ebpf but has to be",
    "start": "1327200",
    "end": "1330140"
  },
  {
    "text": "translated into the ebpf first that's",
    "start": "1330140",
    "end": "1332840"
  },
  {
    "text": "actually what happens if you use TCP",
    "start": "1332840",
    "end": "1334760"
  },
  {
    "text": "dump and the code is injected into",
    "start": "1334760",
    "end": "1337700"
  },
  {
    "text": "kernel kernel also translates it into",
    "start": "1337700",
    "end": "1340360"
  },
  {
    "text": "ebpf first",
    "start": "1340360",
    "end": "1342200"
  },
  {
    "text": "uh those cylinders are prepended only if",
    "start": "1342200",
    "end": "1346880"
  },
  {
    "text": "we are in the debug mode",
    "start": "1346880",
    "end": "1349880"
  },
  {
    "text": "and uh",
    "start": "1349880",
    "end": "1352280"
  },
  {
    "text": "both paths has to execute the same",
    "start": "1352280",
    "end": "1354679"
  },
  {
    "text": "policy so that when we debug in uh in",
    "start": "1354679",
    "end": "1357380"
  },
  {
    "text": "production the system is not compromised",
    "start": "1357380",
    "end": "1359360"
  },
  {
    "text": "and believe me it is much easier to do",
    "start": "1359360",
    "end": "1362059"
  },
  {
    "text": "it this way than when we use the J trace",
    "start": "1362059",
    "end": "1365720"
  },
  {
    "text": "or similar tools in the hfip tables",
    "start": "1365720",
    "end": "1371140"
  },
  {
    "start": "1370000",
    "end": "1408000"
  },
  {
    "text": "uh",
    "start": "1371360",
    "end": "1372740"
  },
  {
    "text": "because as I said before that we had a",
    "start": "1372740",
    "end": "1375500"
  },
  {
    "text": "fire hose we really want to have a",
    "start": "1375500",
    "end": "1377419"
  },
  {
    "text": "fine-grained login here so we've added",
    "start": "1377419",
    "end": "1379280"
  },
  {
    "text": "an option every can specify a list of",
    "start": "1379280",
    "end": "1382039"
  },
  {
    "text": "devices and expressions",
    "start": "1382039",
    "end": "1385179"
  },
  {
    "text": "we also have some special values like",
    "start": "1385340",
    "end": "1387020"
  },
  {
    "text": "you can you can run the filter for all",
    "start": "1387020",
    "end": "1390140"
  },
  {
    "text": "the devices in your system you can run",
    "start": "1390140",
    "end": "1392419"
  },
  {
    "text": "it only for hosts and points or vocal",
    "start": "1392419",
    "end": "1394580"
  },
  {
    "text": "endpoints",
    "start": "1394580",
    "end": "1395799"
  },
  {
    "text": "and Calico always supported the",
    "start": "1395799",
    "end": "1398600"
  },
  {
    "text": "configuration which was either Global or",
    "start": "1398600",
    "end": "1400820"
  },
  {
    "text": "local to a node so you can really",
    "start": "1400820",
    "end": "1402940"
  },
  {
    "text": "specifically select what you are",
    "start": "1402940",
    "end": "1405260"
  },
  {
    "text": "interested within your system",
    "start": "1405260",
    "end": "1408320"
  },
  {
    "start": "1408000",
    "end": "1493000"
  },
  {
    "text": "so let me walk you through some of the",
    "start": "1408320",
    "end": "1411760"
  },
  {
    "text": "examples of the login",
    "start": "1411760",
    "end": "1416140"
  },
  {
    "text": "here on the first line uh",
    "start": "1416299",
    "end": "1420460"
  },
  {
    "text": "on the left hand side you see that each",
    "start": "1420460",
    "end": "1423380"
  },
  {
    "text": "line is prepended by the name of the",
    "start": "1423380",
    "end": "1425480"
  },
  {
    "text": "device where the log comes from and also",
    "start": "1425480",
    "end": "1428179"
  },
  {
    "text": "indicates in this case with the i as",
    "start": "1428179",
    "end": "1430460"
  },
  {
    "text": "Ingress who by use also CE for Libras",
    "start": "1430460",
    "end": "1433520"
  },
  {
    "text": "and x for xzp",
    "start": "1433520",
    "end": "1435320"
  },
  {
    "text": "uh they'll surprisingly we first have to",
    "start": "1435320",
    "end": "1437720"
  },
  {
    "text": "parse the package so you get some",
    "start": "1437720",
    "end": "1439340"
  },
  {
    "text": "information about what sort of packet is",
    "start": "1439340",
    "end": "1441260"
  },
  {
    "text": "flowing through the system",
    "start": "1441260",
    "end": "1443419"
  },
  {
    "text": "uh we have to do contract lookup in this",
    "start": "1443419",
    "end": "1446659"
  },
  {
    "text": "case we have a Miss therefore this is",
    "start": "1446659",
    "end": "1448520"
  },
  {
    "text": "the first packet of a connection and in",
    "start": "1448520",
    "end": "1451520"
  },
  {
    "text": "that case we have to see whether it",
    "start": "1451520",
    "end": "1453620"
  },
  {
    "text": "matches a certain service",
    "start": "1453620",
    "end": "1455299"
  },
  {
    "text": "uh in this case it doesn't match any",
    "start": "1455299",
    "end": "1457760"
  },
  {
    "text": "service we go to that mess and therefore",
    "start": "1457760",
    "end": "1460580"
  },
  {
    "text": "there is a plane connection and we have",
    "start": "1460580",
    "end": "1462740"
  },
  {
    "text": "to pass it through a policy we have a",
    "start": "1462740",
    "end": "1465140"
  },
  {
    "text": "host endpoint without the policy so we",
    "start": "1465140",
    "end": "1467419"
  },
  {
    "text": "accept uh the uh the packet we have to",
    "start": "1467419",
    "end": "1471080"
  },
  {
    "text": "create a contract entry and the last",
    "start": "1471080",
    "end": "1474440"
  },
  {
    "text": "thing we have to decide where the packet",
    "start": "1474440",
    "end": "1476059"
  },
  {
    "text": "goes in this case we are using fiblookup",
    "start": "1476059",
    "end": "1478700"
  },
  {
    "text": "so we essentially Consulting the routing",
    "start": "1478700",
    "end": "1481340"
  },
  {
    "text": "tables of the system we we got a hit and",
    "start": "1481340",
    "end": "1484220"
  },
  {
    "text": "we can forward the packet to its",
    "start": "1484220",
    "end": "1486200"
  },
  {
    "text": "destination from this point it bypasses",
    "start": "1486200",
    "end": "1489080"
  },
  {
    "text": "the IP tables completely and saves the",
    "start": "1489080",
    "end": "1491360"
  },
  {
    "text": "execution time",
    "start": "1491360",
    "end": "1493480"
  },
  {
    "start": "1493000",
    "end": "1557000"
  },
  {
    "text": "in the more complex case of",
    "start": "1493480",
    "end": "1498440"
  },
  {
    "text": "services and network as translation you",
    "start": "1498440",
    "end": "1501679"
  },
  {
    "text": "would see lines like these in the first",
    "start": "1501679",
    "end": "1503780"
  },
  {
    "text": "batch",
    "start": "1503780",
    "end": "1504799"
  },
  {
    "text": "with trying to match it against the",
    "start": "1504799",
    "end": "1506539"
  },
  {
    "text": "service",
    "start": "1506539",
    "end": "1507679"
  },
  {
    "text": "and unlike in the example before we have",
    "start": "1507679",
    "end": "1510980"
  },
  {
    "text": "a hit in the first table uh",
    "start": "1510980",
    "end": "1513860"
  },
  {
    "text": "we",
    "start": "1513860",
    "end": "1515360"
  },
  {
    "text": "got a service with a certain ID and we",
    "start": "1515360",
    "end": "1518780"
  },
  {
    "text": "picked a",
    "start": "1518780",
    "end": "1520539"
  },
  {
    "text": "ordinal for the for the back end then we",
    "start": "1520539",
    "end": "1523880"
  },
  {
    "text": "go and read the back end and Report",
    "start": "1523880",
    "end": "1526400"
  },
  {
    "text": "which backend we selected later on we",
    "start": "1526400",
    "end": "1529340"
  },
  {
    "text": "have to create let me create a contract",
    "start": "1529340",
    "end": "1532159"
  },
  {
    "text": "we also have to create a second entry",
    "start": "1532159",
    "end": "1534140"
  },
  {
    "text": "which I've mentioned before",
    "start": "1534140",
    "end": "1536539"
  },
  {
    "text": "and",
    "start": "1536539",
    "end": "1538279"
  },
  {
    "text": "as we flow through the rest of the",
    "start": "1538279",
    "end": "1540080"
  },
  {
    "text": "program we also have to actually execute",
    "start": "1540080",
    "end": "1542240"
  },
  {
    "text": "the DNA so we have to patch the",
    "start": "1542240",
    "end": "1544580"
  },
  {
    "text": "destination IP and uh the destination",
    "start": "1544580",
    "end": "1548600"
  },
  {
    "text": "Port into the packet update checksums",
    "start": "1548600",
    "end": "1550700"
  },
  {
    "text": "and all this all this stuff",
    "start": "1550700",
    "end": "1552440"
  },
  {
    "text": "and then we carry on with what you see",
    "start": "1552440",
    "end": "1555260"
  },
  {
    "text": "on the previous slide",
    "start": "1555260",
    "end": "1557419"
  },
  {
    "start": "1557000",
    "end": "1754000"
  },
  {
    "text": "so with that I'd like to conclude that",
    "start": "1557419",
    "end": "1561100"
  },
  {
    "text": "ebpf is a great tool it's super flexible",
    "start": "1561100",
    "end": "1564440"
  },
  {
    "text": "and powerful and I love working with",
    "start": "1564440",
    "end": "1567320"
  },
  {
    "text": "that and kudos to everyone who",
    "start": "1567320",
    "end": "1570140"
  },
  {
    "text": "contributed to the ebpf system in Linux",
    "start": "1570140",
    "end": "1573799"
  },
  {
    "text": "uh but it also disturbs how users were",
    "start": "1573799",
    "end": "1578539"
  },
  {
    "text": "used to work with the systems it",
    "start": "1578539",
    "end": "1580039"
  },
  {
    "text": "disturbs how users used to think about",
    "start": "1580039",
    "end": "1582500"
  },
  {
    "text": "the flow of the package through the",
    "start": "1582500",
    "end": "1584240"
  },
  {
    "text": "system and we need to have a good",
    "start": "1584240",
    "end": "1586400"
  },
  {
    "text": "understanding of that good tooling and",
    "start": "1586400",
    "end": "1589580"
  },
  {
    "text": "we have to uh actually do quite a bit of",
    "start": "1589580",
    "end": "1592220"
  },
  {
    "text": "teaching so is that just UC BPF enjoy it",
    "start": "1592220",
    "end": "1597440"
  },
  {
    "text": "it's great and I'm happy to take any",
    "start": "1597440",
    "end": "1600140"
  },
  {
    "text": "questions if there are any",
    "start": "1600140",
    "end": "1603220"
  },
  {
    "text": "thank you Thomas I can see a question",
    "start": "1605179",
    "end": "1607640"
  },
  {
    "text": "back there I could see a couple of",
    "start": "1607640",
    "end": "1610159"
  },
  {
    "text": "questions",
    "start": "1610159",
    "end": "1612460"
  },
  {
    "text": "curious it seems like um you dealt with",
    "start": "1619220",
    "end": "1622279"
  },
  {
    "text": "writing a trace pipe like a fire hose to",
    "start": "1622279",
    "end": "1624559"
  },
  {
    "text": "trace pipe by filtering but did you also",
    "start": "1624559",
    "end": "1627140"
  },
  {
    "text": "consider using a",
    "start": "1627140",
    "end": "1629360"
  },
  {
    "text": "um perf events or an event buffer like a",
    "start": "1629360",
    "end": "1632059"
  },
  {
    "text": "pub sub type mechanism instead of",
    "start": "1632059",
    "end": "1634820"
  },
  {
    "text": "filtering two Trace pipe",
    "start": "1634820",
    "end": "1637580"
  },
  {
    "text": "uh I think there's two two slightly",
    "start": "1637580",
    "end": "1640640"
  },
  {
    "text": "different things uh the perf events a",
    "start": "1640640",
    "end": "1643820"
  },
  {
    "text": "it's losses so uh we may not actually",
    "start": "1643820",
    "end": "1646580"
  },
  {
    "text": "catch everything what we would like to",
    "start": "1646580",
    "end": "1648440"
  },
  {
    "text": "get uh we use perfect events for other",
    "start": "1648440",
    "end": "1650779"
  },
  {
    "text": "things",
    "start": "1650779",
    "end": "1651640"
  },
  {
    "text": "uh but for this case this is really",
    "start": "1651640",
    "end": "1654860"
  },
  {
    "text": "print k",
    "start": "1654860",
    "end": "1657580"
  },
  {
    "text": "when you say that it disturbs the flow",
    "start": "1660679",
    "end": "1663260"
  },
  {
    "text": "of packets as we knew it what's the",
    "start": "1663260",
    "end": "1667520"
  },
  {
    "text": "meaning of that it's just because we are",
    "start": "1667520",
    "end": "1669799"
  },
  {
    "text": "just hooking into the functions in the",
    "start": "1669799",
    "end": "1672140"
  },
  {
    "text": "kernel or for something else",
    "start": "1672140",
    "end": "1674059"
  },
  {
    "text": "could you repeat the beginning of the",
    "start": "1674059",
    "end": "1675380"
  },
  {
    "text": "question when you say that it disturbs",
    "start": "1675380",
    "end": "1677600"
  },
  {
    "text": "the flow of packet what does it mean",
    "start": "1677600",
    "end": "1681200"
  },
  {
    "text": "yeah great question uh",
    "start": "1681200",
    "end": "1684440"
  },
  {
    "text": "it really means that the packet may go",
    "start": "1684440",
    "end": "1687260"
  },
  {
    "text": "from a device to device and doesn't",
    "start": "1687260",
    "end": "1689240"
  },
  {
    "text": "follow the rest of the past that it",
    "start": "1689240",
    "end": "1691700"
  },
  {
    "text": "otherwise would take through the kernel",
    "start": "1691700",
    "end": "1693380"
  },
  {
    "text": "so if you hook into TC and then it's",
    "start": "1693380",
    "end": "1695659"
  },
  {
    "text": "forward to another another device that",
    "start": "1695659",
    "end": "1699200"
  },
  {
    "text": "just keeps Lots in the host network",
    "start": "1699200",
    "end": "1702260"
  },
  {
    "text": "network stack",
    "start": "1702260",
    "end": "1704900"
  },
  {
    "text": "just takes a different path",
    "start": "1704900",
    "end": "1707360"
  },
  {
    "text": "and actually I have a follow-on question",
    "start": "1707360",
    "end": "1709279"
  },
  {
    "text": "kind of like that if I were to land on",
    "start": "1709279",
    "end": "1711200"
  },
  {
    "text": "an arbitrary box could you take your",
    "start": "1711200",
    "end": "1713240"
  },
  {
    "text": "mask so I can sure I have a follow-on",
    "start": "1713240",
    "end": "1715580"
  },
  {
    "text": "question uh kind of like that if I were",
    "start": "1715580",
    "end": "1718100"
  },
  {
    "text": "to land onto an arbitrary box and not",
    "start": "1718100",
    "end": "1720799"
  },
  {
    "text": "know if ebpf was uh passing my packets",
    "start": "1720799",
    "end": "1724580"
  },
  {
    "text": "into places is there any way a user",
    "start": "1724580",
    "end": "1727279"
  },
  {
    "text": "could actually see that since it's all",
    "start": "1727279",
    "end": "1728720"
  },
  {
    "text": "kernel land",
    "start": "1728720",
    "end": "1730760"
  },
  {
    "text": "yeah I think that's where the feedback",
    "start": "1730760",
    "end": "1732799"
  },
  {
    "text": "from the from the community came in the",
    "start": "1732799",
    "end": "1735200"
  },
  {
    "text": "first place so we had users it was like",
    "start": "1735200",
    "end": "1738320"
  },
  {
    "text": "hey I have a I have a contract which is",
    "start": "1738320",
    "end": "1740480"
  },
  {
    "text": "kind of half open or I have a connection",
    "start": "1740480",
    "end": "1742940"
  },
  {
    "text": "and I I don't see it in contract so",
    "start": "1742940",
    "end": "1745640"
  },
  {
    "text": "that's where the confusion came from and",
    "start": "1745640",
    "end": "1747740"
  },
  {
    "text": "that's what we are trying to address",
    "start": "1747740",
    "end": "1748760"
  },
  {
    "text": "here",
    "start": "1748760",
    "end": "1751120"
  }
]