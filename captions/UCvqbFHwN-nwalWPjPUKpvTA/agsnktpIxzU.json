[
  {
    "start": "0",
    "end": "0"
  },
  {
    "text": "hello everybody um so just a heads up if i sound a little crafty um it's",
    "start": "0",
    "end": "5279"
  },
  {
    "text": "because last week i was battling a cold and just sinus mess and don't worry i was covered testing the whole way through and i finally got through it all",
    "start": "5279",
    "end": "12160"
  },
  {
    "text": "just to get on an airplane and sleep with masks on and everything for you know 15 hours and all the craft came",
    "start": "12160",
    "end": "18240"
  },
  {
    "text": "right back so i'm still working through that a little bit and so you'll just have to bear with me a little bit on this so",
    "start": "18240",
    "end": "24480"
  },
  {
    "text": "um as was just mentioned i i work at docker now and i just started there about two",
    "start": "24480",
    "end": "30000"
  },
  {
    "text": "months ago so still uh getting my feet wet and everything but uh prior to that i was a docker captain",
    "start": "30000",
    "end": "35200"
  },
  {
    "text": "for about five years and so i've been involved with the docker community space for a long time now and done a lot of",
    "start": "35200",
    "end": "40960"
  },
  {
    "text": "conference talks and and one and in fact actually the dockercon two weeks ago that was the first dockercon that i",
    "start": "40960",
    "end": "46559"
  },
  {
    "text": "haven't spoken in probably seven or eight years which is just our seven or eight",
    "start": "46559",
    "end": "51680"
  },
  {
    "text": "sessions of docker concept um but so what i'm going to be talking about today is actually my work that i",
    "start": "51680",
    "end": "58000"
  },
  {
    "text": "did while at while at virginia tech um and while there i did a lot of",
    "start": "58000",
    "end": "64559"
  },
  {
    "text": "software development and cloud and containers and helping kind of modernize a lot of the ways that we were doing things",
    "start": "64559",
    "end": "70159"
  },
  {
    "text": "and uh my last role there was uh proposing architecting and i led the creation of a",
    "start": "70159",
    "end": "76240"
  },
  {
    "text": "common application platform which is what uh we're gonna be talking about today um you can find me pretty much anywhere online",
    "start": "76240",
    "end": "82560"
  },
  {
    "text": "at mikesar87 on twitter and github and all that kind of stuff too so um so what are we going to talk about",
    "start": "82560",
    "end": "89040"
  },
  {
    "start": "88000",
    "end": "88000"
  },
  {
    "text": "today i'm going to talk just a little bit about this uh common application platform because it sets the stage a",
    "start": "89040",
    "end": "94640"
  },
  {
    "text": "little bit of what we're going to be working on today and then we're going to talk a multi-tenancy",
    "start": "94640",
    "end": "100960"
  },
  {
    "text": "because it's easier said than done for sure then we're going to talk about creating our actual landlord and then we're going",
    "start": "101600",
    "end": "108240"
  },
  {
    "text": "to wrap up in q a and the the source code for this will be found here and it's it's already there",
    "start": "108240",
    "end": "114479"
  },
  {
    "text": "and we're going to be adding to it as we go throughout this session to you so i'm very much a big believer in live",
    "start": "114479",
    "end": "119680"
  },
  {
    "text": "demos we're just going to build stuff and try stuff live and uh so hopefully the conference wi-fi supports me if not",
    "start": "119680",
    "end": "125840"
  },
  {
    "text": "we could fall back and that'll work too so so first off the goals of the effort",
    "start": "125840",
    "end": "132000"
  },
  {
    "start": "130000",
    "end": "130000"
  },
  {
    "text": "this common application platform was really designed to be a hey you know we recognize that there are",
    "start": "132000",
    "end": "137760"
  },
  {
    "text": "many teams that are deploying applications in many different ways at the university can we start to",
    "start": "137760",
    "end": "143760"
  },
  {
    "text": "pseudo standardize this now that containers have have really given us a higher level abstraction point can we",
    "start": "143760",
    "end": "150000"
  },
  {
    "text": "have a platform that builds on top of that idea and so we we wanted to build this",
    "start": "150000",
    "end": "155920"
  },
  {
    "text": "platform and and make it available to all of our application development teams around the university um and at the end",
    "start": "155920",
    "end": "161360"
  },
  {
    "text": "of the day what we wanted was really to satisfy this you you build a container image should be a build container image",
    "start": "161360",
    "end": "167599"
  },
  {
    "text": "but um bring a container we'll run it for you and that was really what we wanted to do um",
    "start": "167599",
    "end": "174560"
  },
  {
    "start": "174000",
    "end": "174000"
  },
  {
    "text": "one of the first things we had to do was identify kind of the separation of concerns what does the platform team own and what does the application",
    "start": "174560",
    "end": "181200"
  },
  {
    "text": "development teams own and we pretty much decided that the the platform team owns everything",
    "start": "181200",
    "end": "188640"
  },
  {
    "text": "below the applications and what i mean by that is what we've got here on the slide here let me grab the laser pointer",
    "start": "188640",
    "end": "196239"
  },
  {
    "text": "okay so the platform team won't own any of the cloud infrastructure networking et cetera um the cluster infrastructure",
    "start": "196239",
    "end": "202959"
  },
  {
    "text": "itself um we built on top of kubernetes any core cluster services so obviously",
    "start": "202959",
    "end": "209280"
  },
  {
    "text": "our like ingress controller and prometheus operators and and all the",
    "start": "209280",
    "end": "214560"
  },
  {
    "text": "kind of cluster-wide services that are available we would also manage all the node and compute resources so our our development",
    "start": "214560",
    "end": "221599"
  },
  {
    "text": "teams shouldn't have to think about machine patching or anything that comes along with that",
    "start": "221599",
    "end": "228319"
  },
  {
    "text": "and then from there we want to have an abstraction point where then the application teams can just say here's my app but here's my deployment my service",
    "start": "228319",
    "end": "234799"
  },
  {
    "text": "my ingress or whatever and they don't have to worry about all the other glue that holds it all together",
    "start": "234799",
    "end": "240640"
  },
  {
    "text": "um and so with this kind of separation concerns it basically kind of said hey if there's you know new cds new security",
    "start": "240640",
    "end": "247840"
  },
  {
    "text": "updates if it was you know with cubelet or kubernetes itself or you know a machine node okay that's on",
    "start": "247840",
    "end": "254720"
  },
  {
    "text": "us if there's a problem with the application which a rest endpoint isn't validating users correctly well that",
    "start": "254720",
    "end": "261199"
  },
  {
    "text": "that's an application concern and so that's in this blue blue box and that's up to the application teams um so we we",
    "start": "261199",
    "end": "267840"
  },
  {
    "text": "try to make it really clear on on how this is is going to work out then the kind of the question is is how",
    "start": "267840",
    "end": "273680"
  },
  {
    "text": "do we actually how do we build this abstraction point what what does that actually look like",
    "start": "273680",
    "end": "279280"
  },
  {
    "text": "and um and we'll get into that in a second so actually maybe before i do this i'd like to have a little bit of",
    "start": "279280",
    "end": "285040"
  },
  {
    "text": "audience participation anyways who's ever tried to do multi-tenancy in kubernetes before",
    "start": "285040",
    "end": "290720"
  },
  {
    "text": "okay so maybe not quite a third um who found it easy to do",
    "start": "290720",
    "end": "297840"
  },
  {
    "text": "that's that's the reaction i expected there okay um so the first thing i want to answer is",
    "start": "298160",
    "end": "304960"
  },
  {
    "text": "what do i mean by tenant uh because everybody's got different answers there and we kept the definition",
    "start": "304960",
    "end": "311039"
  },
  {
    "text": "really really loose and we basically just said hey application teams you tell us how you want us to carve things up",
    "start": "311039",
    "end": "316720"
  },
  {
    "text": "and as we go through this you'll see how we made various design decisions around",
    "start": "316720",
    "end": "323600"
  },
  {
    "text": "around the kind of sandboxing around each tenant but really it's up to the individual",
    "start": "323600",
    "end": "329120"
  },
  {
    "text": "teams to figure out we had some teams that said all right i wanted just a dev staging prod",
    "start": "329120",
    "end": "334720"
  },
  {
    "text": "and we'll throw all of our development one all of our staging and another one and all of our prod another one okay whatever um",
    "start": "334720",
    "end": "341280"
  },
  {
    "text": "we had other teams that said i want a different tenant per application and again we could support really any of",
    "start": "341280",
    "end": "347199"
  },
  {
    "text": "them to us tenants don't cost anything it's just extra metadata extra policy extra procedure and that kind of stuff",
    "start": "347199",
    "end": "354320"
  },
  {
    "text": "so again we wanted to support our development teams and however they wanted to do development",
    "start": "354320",
    "end": "361280"
  },
  {
    "start": "361000",
    "end": "361000"
  },
  {
    "text": "and so kind of going back into what what makes multi-tenancy hard is thinking about what could possibly go wrong there's",
    "start": "361280",
    "end": "368000"
  },
  {
    "text": "there are a lot of things that can go wrong um if you just start off by saying well",
    "start": "368000",
    "end": "373039"
  },
  {
    "text": "we'll give everybody admin access and they can just deploy stuff anywhere well then how do you make sure that they don't step on each other's toes",
    "start": "373039",
    "end": "379360"
  },
  {
    "text": "we don't want one team to make changes that affect another team whether that's to",
    "start": "379360",
    "end": "385440"
  },
  {
    "text": "you know change deployments or change ingress or whatever you don't want one team accessing the secrets and config of another team so",
    "start": "385440",
    "end": "391759"
  },
  {
    "text": "there's just a lot of things that you've got to start thinking about how do we properly isolate things and there's",
    "start": "391759",
    "end": "397120"
  },
  {
    "text": "there are various aspects built into kubernetes you know the rbac and role bindings etc that can help with",
    "start": "397120",
    "end": "403280"
  },
  {
    "text": "that but there are some things that it doesn't cover so for example if i",
    "start": "403280",
    "end": "408639"
  },
  {
    "text": "allow teams to define an ingress object how do i make it so that team a you know doesn't get their traffic intercepted by",
    "start": "408639",
    "end": "415520"
  },
  {
    "text": "team b if they define an ingress that stomps on the host name of team a",
    "start": "415520",
    "end": "421199"
  },
  {
    "text": "and so how do you just make sure i mean according to the rbac sure everybody can create ingress objects but how do you",
    "start": "421199",
    "end": "426800"
  },
  {
    "text": "get a little bit more granular that and we'll talk about some of that as well as a platform team we also didn't want",
    "start": "426800",
    "end": "432240"
  },
  {
    "text": "to allow teams to create their own node port and load balancer services but they should be able to create",
    "start": "432240",
    "end": "438080"
  },
  {
    "text": "services so how do we get more granular than that and uh we'll talk about that and this is just a quick list there's so",
    "start": "438080",
    "end": "445840"
  },
  {
    "text": "many more things that you've got to start thinking about once you start getting into multi-tenancy",
    "start": "445840",
    "end": "451840"
  },
  {
    "start": "451000",
    "end": "451000"
  },
  {
    "text": "now this isn't a fully comprehensive spectrum here this is something i kind of just threw together and uh and and",
    "start": "451840",
    "end": "457599"
  },
  {
    "text": "you'll see various opinions on this when you start",
    "start": "457599",
    "end": "462800"
  },
  {
    "text": "kind of diving into multi-tenancy you'll hear the difference between soft and hard multi-tenancy and really the",
    "start": "462800",
    "end": "468479"
  },
  {
    "text": "difference is how much do you trust the people that are going to be deploying things onto your cluster okay",
    "start": "468479",
    "end": "475520"
  },
  {
    "text": "so as you go further on to the the soft side and it's the more trust and the you know we we trust everybody to behave",
    "start": "475520",
    "end": "482080"
  },
  {
    "text": "well um and for the most part that's probably true but again we're in a university setting where we may be start",
    "start": "482080",
    "end": "488639"
  },
  {
    "text": "working with students and i don't know if i trust all those students out there um and",
    "start": "488639",
    "end": "495039"
  },
  {
    "text": "or those students develop something they've got it deployed and now they've gradually they moved on",
    "start": "495039",
    "end": "500080"
  },
  {
    "text": "and now some other professors having to maintain that and they don't have any idea what's going on",
    "start": "500080",
    "end": "505840"
  },
  {
    "text": "we had to think about you know where in the spectrum do we want to go and as you move further over to the hard side of",
    "start": "505840",
    "end": "511599"
  },
  {
    "text": "things you start sandboxing and basically removing a lot of the trust",
    "start": "511599",
    "end": "518640"
  },
  {
    "text": "and you're putting more validation and you're putting just more constraints into place uh",
    "start": "518640",
    "end": "524480"
  },
  {
    "text": "it certainly makes things more secure but also it does make things much more costly so for example if i'm doing a",
    "start": "524480",
    "end": "530160"
  },
  {
    "text": "micro vm per pod well now i've got i'm running a lot more micro vms it's a lot more resources than i'm having to maintain",
    "start": "530160",
    "end": "537040"
  },
  {
    "text": "but man if anybody bus out of a pod well they can't jump into somebody else's pod because well they're in their own little",
    "start": "537040",
    "end": "543360"
  },
  {
    "text": "micro vm at that point and then there's some pretty cool stuff going on virtual clusters i won't get into that but again",
    "start": "543360",
    "end": "549600"
  },
  {
    "text": "there's there's a spectrum here and for you and your organization you have to figure out where is it that you want to land what's",
    "start": "549600",
    "end": "556080"
  },
  {
    "text": "an appropriate level of constraints and controls and also permissioning that we want to give back",
    "start": "556080",
    "end": "561519"
  },
  {
    "text": "so for us we landed at about this point where we didn't go to the full micro me and per pod but we also wanted to",
    "start": "561519",
    "end": "567760"
  },
  {
    "text": "support the ability to say hey we want to group various applications various tenants together",
    "start": "567760",
    "end": "573839"
  },
  {
    "text": "maybe in their own node pool and you know i have one node pool for this team and another node pool for another team",
    "start": "573839",
    "end": "579760"
  },
  {
    "text": "and again we'll dive into that here in just a few minutes okay so",
    "start": "579760",
    "end": "586160"
  },
  {
    "text": "as we start thinking about all these different things and all the different configuration points we decided we're going to build",
    "start": "586160",
    "end": "591680"
  },
  {
    "text": "something called a landlord and why do we call it a landlord well because we're in a college town and",
    "start": "591680",
    "end": "597279"
  },
  {
    "text": "that's what most you know it's all apartments everywhere and it just fit the the model pretty",
    "start": "597279",
    "end": "602320"
  },
  {
    "text": "well but when you look at an apartment and you think about a landlord that's having to manage it there's there's a",
    "start": "602320",
    "end": "608560"
  },
  {
    "text": "lot of things that they're having to keep in mind first off how many buildings do they have",
    "start": "608560",
    "end": "613600"
  },
  {
    "text": "uh how many floors are in each building how big are the units you've got see some maybe studios some",
    "start": "613600",
    "end": "619920"
  },
  {
    "text": "you know three or four bedroom units you've got lots of different sizes you've got shared infrastructure in each of these",
    "start": "619920",
    "end": "625360"
  },
  {
    "text": "buildings so do you you know do you trust everybody in the same building to utilize that shared infrastructure well",
    "start": "625360",
    "end": "630959"
  },
  {
    "text": "or you say nope and i'm going to create another building and put these tenants over in that other book so it just",
    "start": "630959",
    "end": "636640"
  },
  {
    "text": "matched the analogy really really well for us and just fyi for those that are still",
    "start": "636640",
    "end": "642959"
  },
  {
    "text": "staying there's plenty of seats over here too so feel free to cut over any point as well",
    "start": "642959",
    "end": "648959"
  },
  {
    "start": "648000",
    "end": "648000"
  },
  {
    "text": "so for us when as we were thinking about the goals of the landlord we wanted to have",
    "start": "649120",
    "end": "654640"
  },
  {
    "text": "quite a few different things here the landlord should allow us to define all of our tenants",
    "start": "654640",
    "end": "661120"
  },
  {
    "text": "but also bm be able to do so in a way that's configurable okay this this tenant needs slightly different rules",
    "start": "661120",
    "end": "666720"
  },
  {
    "text": "than another tenant how do we set that up we also wanted to be able to do everything declaratively and item",
    "start": "666720",
    "end": "672800"
  },
  {
    "text": "potentially so if i redefine all my tenant configuration and",
    "start": "672800",
    "end": "678079"
  },
  {
    "text": "if i add new tenant and i read you know reapply everything it shouldn't should mess things up if if",
    "start": "678079",
    "end": "684720"
  },
  {
    "text": "i'm making updates let's see",
    "start": "684720",
    "end": "690079"
  },
  {
    "text": "we should also support version control in history and you know it's actually kind of cool because as we're going through this in many ways many of these",
    "start": "690079",
    "end": "695760"
  },
  {
    "text": "principles are exactly what we heard earlier today with the open um get ops principles that are coming out and uh no",
    "start": "695760",
    "end": "702240"
  },
  {
    "text": "i didn't have a sneak peek at that or whatnot beforehand but it's it's neat to see how these line up the the last point here was something",
    "start": "702240",
    "end": "708399"
  },
  {
    "text": "that was pretty big on us because for the most part our team didn't have a lot of developers on our core platform team so the last",
    "start": "708399",
    "end": "715519"
  },
  {
    "text": "thing we wanted to do was say hey we're going to create some crds and we're going to create a controller we're going to have to like manage all this",
    "start": "715519",
    "end": "721600"
  },
  {
    "text": "stuff ourselves so we wanted to be able to define a landlord in a way that could utilize tools and",
    "start": "721600",
    "end": "728800"
  },
  {
    "text": "things that we're already familiar with with again not having to do custom programming and maintenance here",
    "start": "728800",
    "end": "734399"
  },
  {
    "text": "so as we did some research and after actually uh deploying tenants a couple times we're like um helm just solves all",
    "start": "734399",
    "end": "741360"
  },
  {
    "text": "this for us and we'll see this here in just a minute but it checks all the boxes for us",
    "start": "741360",
    "end": "746800"
  },
  {
    "text": "that we're able to you know theoretically create a chart that basically is our landlord and help",
    "start": "746800",
    "end": "753040"
  },
  {
    "text": "chart and then giving it a custom values that defines the tenants that we need",
    "start": "753040",
    "end": "758320"
  },
  {
    "text": "then we can customize each tenant based on on their specific needs",
    "start": "758320",
    "end": "765200"
  },
  {
    "text": "and with that again i'm a big believer of a programming on the spot here too so",
    "start": "765200",
    "end": "771680"
  },
  {
    "text": "we're gonna we're gonna build a landlord helm chart uh together here and we're gonna walk through the process a little bit here",
    "start": "771680",
    "end": "777519"
  },
  {
    "text": "okay so first things first well every tenant needs a namespace that hopefully everybody at least knows that at this",
    "start": "777519",
    "end": "784000"
  },
  {
    "text": "point okay you should give every tenant their name space so if we have a kind of values",
    "start": "784000",
    "end": "789839"
  },
  {
    "text": "yaml file here this is just a sample i'm i have a top level key of tenants and then i've got team awesome team cats",
    "start": "789839",
    "end": "796399"
  },
  {
    "text": "and team dogs here and so just starting from here i can",
    "start": "796399",
    "end": "801920"
  },
  {
    "text": "have a helm template that what it's going to do is it's going to do a range that's basically going to iterate all through all the tenants",
    "start": "801920",
    "end": "808399"
  },
  {
    "text": "uh pull up the key value pairs and i'm just going to basically create this namespace object once for every tenant",
    "start": "808399",
    "end": "814800"
  },
  {
    "text": "okay um pretty simple here and let's actually just do that",
    "start": "814800",
    "end": "820320"
  },
  {
    "text": "so first thing i need to do is actually",
    "start": "820320",
    "end": "826240"
  },
  {
    "text": "create a new window here and i'm going to",
    "start": "827279",
    "end": "832320"
  },
  {
    "text": "create a new chart so we're going to literally start this from scratch create a landlord chart",
    "start": "832320",
    "end": "839839"
  },
  {
    "text": "and i'm just going to remove most of the stuff that's in here",
    "start": "841120",
    "end": "845680"
  },
  {
    "text": "you just i did that backwards",
    "start": "849760",
    "end": "853560"
  },
  {
    "text": "yes get rid of all that okay and let's clean that up too",
    "start": "856880",
    "end": "862480"
  },
  {
    "text": "okay so where is",
    "start": "862480",
    "end": "868440"
  },
  {
    "text": "i'm going to create a namespace yaml paste that in",
    "start": "871040",
    "end": "877680"
  },
  {
    "text": "and i'm going to rename this to value sample tenant",
    "start": "877680",
    "end": "883839"
  },
  {
    "text": "team awesome team cats team dogs",
    "start": "883839",
    "end": "889680"
  },
  {
    "text": "and now pull this up a little bit if i",
    "start": "889680",
    "end": "896399"
  },
  {
    "text": "uh template this out we'll see that as expected i've got name space for team",
    "start": "896399",
    "end": "902720"
  },
  {
    "text": "dogs one for team cats one for team awesome okay so at this point i've got a really basic helm chart i'm super on the",
    "start": "902720",
    "end": "908720"
  },
  {
    "text": "soft side and i would just assume i'm going to give everybody credentials to this and hooray i've got a you know landlord or multi-tenant hooray um",
    "start": "908720",
    "end": "915279"
  },
  {
    "text": "obviously it's not a good setup but um let's go ahead and install this",
    "start": "915279",
    "end": "923600"
  },
  {
    "text": "oops i do that all the time",
    "start": "924839",
    "end": "929279"
  },
  {
    "text": "all right so that's been installed and if i look at my namespaces i see my",
    "start": "931440",
    "end": "936800"
  },
  {
    "text": "my three team namespaces there cool so let's let's keep moving through our",
    "start": "936800",
    "end": "942480"
  },
  {
    "text": "spectrum here so the the the next thing we actually have to ask is how are our tenants going",
    "start": "942480",
    "end": "947759"
  },
  {
    "text": "to actually deploy things uh into our cluster and uh it'd be pretty bad if i i might get ops con and i didn't say get",
    "start": "947759",
    "end": "954399"
  },
  {
    "text": "ops right um otherwise it'd be like wait why is he even speaking here um",
    "start": "954399",
    "end": "960000"
  },
  {
    "text": "so yes we we did decide to use flux for our tooling",
    "start": "960000",
    "end": "965360"
  },
  {
    "text": "we actually had an internal bake off and uh this was back flux v one days and we",
    "start": "965360",
    "end": "970880"
  },
  {
    "text": "did you know flux and argo and we had one team even just say well we're just gonna hand out credentials which was a",
    "start": "970880",
    "end": "976160"
  },
  {
    "text": "terrible idea but um and and so we went through the migration of flux v1 to v2 and it's it's been just",
    "start": "976160",
    "end": "983040"
  },
  {
    "text": "awesome um so what we did is as a platform team",
    "start": "983040",
    "end": "988800"
  },
  {
    "start": "984000",
    "end": "984000"
  },
  {
    "text": "we would provide it so anytime a new tenant needed to be created we would create a manifest",
    "start": "988800",
    "end": "994079"
  },
  {
    "text": "repository for that tenant um so we would create a repository we would hand that to them and basically",
    "start": "994079",
    "end": "1000880"
  },
  {
    "text": "say hey you've got maintainer rights to this and then whatever you put in there is",
    "start": "1000880",
    "end": "1006000"
  },
  {
    "text": "what we're deploying so we we own those manifest repos and then we kind of give it back to the application teams to do",
    "start": "1006000",
    "end": "1012399"
  },
  {
    "text": "whatever they want with um and so you know some app teams you know went through the",
    "start": "1012399",
    "end": "1019279"
  },
  {
    "text": "full ci pipelines we were a git lab shop and so they would take the get lab ci",
    "start": "1019279",
    "end": "1024798"
  },
  {
    "text": "and would clone that manifest repository push new manifest into it and commit push it all that kind of stuff and and",
    "start": "1024799",
    "end": "1031038"
  },
  {
    "text": "have it as part of a fully automated and then we had other teams that were like we don't trust any ci cd and uh",
    "start": "1031039",
    "end": "1038720"
  },
  {
    "text": "and so we're just going to make all of our changes manually which okay cool so for us one of the the big advantages is",
    "start": "1038720",
    "end": "1045199"
  },
  {
    "text": "by using get ops again it allowed us to support all the different ways that teams wanted to",
    "start": "1045199",
    "end": "1051440"
  },
  {
    "text": "to deploy things we had other teams that wanted a little bit more change management process and so okay cool here's your manifest",
    "start": "1051440",
    "end": "1057600"
  },
  {
    "text": "repository and they went through like a whole pull request review process internal to their team again we",
    "start": "1057600",
    "end": "1064480"
  },
  {
    "text": "as a platform team we don't care how your manifest get updated as long as",
    "start": "1064480",
    "end": "1069600"
  },
  {
    "text": "whatever's in the main branch is what you want the one that's what we're we're treating as a source of truth however it",
    "start": "1069600",
    "end": "1076000"
  },
  {
    "text": "gets there that's up to you and so that was one of the kind of really gratifying things for us as we",
    "start": "1076000",
    "end": "1081360"
  },
  {
    "text": "started seeing more of our our customers using this that get ops was the right choice here",
    "start": "1081360",
    "end": "1086640"
  },
  {
    "text": "um but in order to do this as a as a platform team there's there's quite a few different things that we need to do",
    "start": "1086640",
    "end": "1092000"
  },
  {
    "text": "so for each tenant we need to create a service account within that namespace that has access to be able to create",
    "start": "1092000",
    "end": "1097039"
  },
  {
    "text": "resources within that namespace this is really important so that you don't accidentally say well hey in my",
    "start": "1097039",
    "end": "1103120"
  },
  {
    "text": "manifest repository i've got an object that's going to actually deploy something in somebody else's namespace",
    "start": "1103120",
    "end": "1108880"
  },
  {
    "text": "by creating a service account within that tenant's namespace it sandboxes them it keeps them within",
    "start": "1108880",
    "end": "1114960"
  },
  {
    "text": "their their namespace so even flux can't apply things outside of their namespace",
    "start": "1114960",
    "end": "1120400"
  },
  {
    "text": "then we create a git repository that fetches the source material and create a customization that then applies the",
    "start": "1120400",
    "end": "1125840"
  },
  {
    "text": "manifest um so here's some quick little examples here so for team awesome",
    "start": "1125840",
    "end": "1132400"
  },
  {
    "text": "we're going to and again this is some of the things that we can uh adjust over time we have",
    "start": "1132400",
    "end": "1138080"
  },
  {
    "text": "some teams in their manifest repos they just dropped on the manifest at the root while others you know had a whole",
    "start": "1138080",
    "end": "1143760"
  },
  {
    "text": "directory structure and and um and so we wanted to be able to to customize the paths for each of the",
    "start": "1143760",
    "end": "1149600"
  },
  {
    "text": "different groups so let's go ahead and plug that in here",
    "start": "1149600",
    "end": "1154880"
  },
  {
    "text": "so what i'm going to do first is let's get all the um",
    "start": "1154880",
    "end": "1162280"
  },
  {
    "text": "our back plugged in here and so what this is going to do is it's again going to loop through all the tenants and i'm",
    "start": "1164480",
    "end": "1170640"
  },
  {
    "text": "going to create a service account within that tenant's namespace and i'm going to create a role binding",
    "start": "1170640",
    "end": "1175760"
  },
  {
    "text": "that then says for that service account we just created give it the admin cluster role access",
    "start": "1175760",
    "end": "1181039"
  },
  {
    "text": "but since this is a role binding it's it's giving them admin access just inside that namespace okay",
    "start": "1181039",
    "end": "1187440"
  },
  {
    "text": "and one of the reasons we did this is because there's a lot of other third-party tool insert manager being",
    "start": "1187440",
    "end": "1193600"
  },
  {
    "text": "one for example that when they create when they create cluster roles for",
    "start": "1193600",
    "end": "1199280"
  },
  {
    "text": "example they they're using the aggregate functions of kubernetes so that now",
    "start": "1199280",
    "end": "1204880"
  },
  {
    "text": "by having admin i can create these other objects as well too so that this was",
    "start": "1204880",
    "end": "1211840"
  },
  {
    "text": "this is a good thing to do here and then the other thing i need to just snag is",
    "start": "1211840",
    "end": "1219320"
  },
  {
    "text": "flex oops",
    "start": "1220240",
    "end": "1223039"
  },
  {
    "text": "our actual config objects here and and so in this case we're going to create a git repository and a customization",
    "start": "1226720",
    "end": "1233120"
  },
  {
    "text": "and in this case again for a platform team we created a separate repository for each tenant",
    "start": "1233120",
    "end": "1240640"
  },
  {
    "text": "for demo purposes i don't want to have to create tons of different repositories and i also want each of you to be able to go",
    "start": "1240640",
    "end": "1246960"
  },
  {
    "text": "take the source code and actually run with it without having to create tons of different repositories so that there is an adjustment here in",
    "start": "1246960",
    "end": "1254080"
  },
  {
    "text": "which i'm actually saying okay the url is this github repository and then i'm changing",
    "start": "1254080",
    "end": "1260640"
  },
  {
    "text": "that the paths that each of our tenants are going to be using so",
    "start": "1260640",
    "end": "1267600"
  },
  {
    "text": "path and team manifest",
    "start": "1267600",
    "end": "1272640"
  },
  {
    "text": "awesome cats and dogs okay and so what this is going",
    "start": "1275120",
    "end": "1280320"
  },
  {
    "text": "to do is once we apply this in this code repository here i've got a directory called t manifest which",
    "start": "1280320",
    "end": "1286799"
  },
  {
    "text": "basically is a simulation of those individual team repositories and so in",
    "start": "1286799",
    "end": "1291840"
  },
  {
    "text": "in team cats for example if i open this up i'll see a certificate i'll see a deployment that's going to deploy just a",
    "start": "1291840",
    "end": "1298400"
  },
  {
    "text": "silly little cats app that i've got uh defined ingress etc okay",
    "start": "1298400",
    "end": "1304720"
  },
  {
    "text": "and same thing for these other uh teams here so again this is just kind of a single repo simulation of",
    "start": "1304720",
    "end": "1311360"
  },
  {
    "text": "what normally is across several different repositories now if i pop up",
    "start": "1311360",
    "end": "1318080"
  },
  {
    "text": "sorry i apparently make a lot of sound effects when i'm coding",
    "start": "1318080",
    "end": "1323039"
  },
  {
    "text": "when i do the home template now i'll see the customization and i'll see all that being properly replaced in",
    "start": "1323360",
    "end": "1329280"
  },
  {
    "text": "so let's do an upgrade now",
    "start": "1329280",
    "end": "1333400"
  },
  {
    "text": "all right this is the only time i want in which",
    "start": "1337760",
    "end": "1343520"
  },
  {
    "text": "i'm actually dependent on the internet so hopefully it's working okay so the url",
    "start": "1343520",
    "end": "1349760"
  },
  {
    "text": "oh is there one up here okay okay looks like it's working out",
    "start": "1352559",
    "end": "1359640"
  },
  {
    "text": "okay i'll just hold that here just in case okay",
    "start": "1363520",
    "end": "1369440"
  },
  {
    "text": "all right so we've at least been able to fetch the revisions and if i look at the customizations",
    "start": "1369440",
    "end": "1376640"
  },
  {
    "text": "i'll see that they were applied and so actually if this worked let's get a new window here",
    "start": "1376960",
    "end": "1383360"
  },
  {
    "text": "cats let's see let me drop out a full screen here cats",
    "start": "1383360",
    "end": "1388559"
  },
  {
    "text": "local okay and there's my app okay and so it just displays a random",
    "start": "1388559",
    "end": "1393760"
  },
  {
    "text": "jif hooray okay so the demo is working um and it just keeps giving me a random",
    "start": "1393760",
    "end": "1400240"
  },
  {
    "text": "gif every time i refresh so um and so if i go to dogs.local it's",
    "start": "1400240",
    "end": "1405840"
  },
  {
    "text": "basically the same app but instead i get dogs now and uh and so that that tenant's working so",
    "start": "1405840",
    "end": "1411760"
  },
  {
    "text": "again hopefully you see that just by figuring out how do i template out the tenant",
    "start": "1411760",
    "end": "1416960"
  },
  {
    "text": "configuration now i'm able to just kind of spit these out very quickly [Music]",
    "start": "1416960",
    "end": "1424480"
  },
  {
    "text": "okay so let's talk about locking things down just a little bit here um",
    "start": "1424480",
    "end": "1432320"
  },
  {
    "text": "quick show of hands how many people have used gatekeeper before okay so there's there's quite a few",
    "start": "1432320",
    "end": "1437520"
  },
  {
    "text": "hands i'd say about half okay so gatekeeper um first off the first thing i'd say is don't try to",
    "start": "1437520",
    "end": "1443200"
  },
  {
    "text": "write your own policy engine don't just don't gatekeeper for those that aren't",
    "start": "1443200",
    "end": "1449279"
  },
  {
    "text": "familiar is basically a kubernetes wrapper around the open policy agent engine so use an opa or open policy agent you",
    "start": "1449279",
    "end": "1456720"
  },
  {
    "text": "can write policies using a language called rego and then what gatekeeper does is it wraps it around so then it's",
    "start": "1456720",
    "end": "1462559"
  },
  {
    "text": "basically an emission controller says all requests are coming through the kubernetes api to make changes to state whether to",
    "start": "1462559",
    "end": "1469679"
  },
  {
    "text": "create a new object or delete an object whatever gatekeeper can be notified",
    "start": "1469679",
    "end": "1475520"
  },
  {
    "text": "and you can basically add your additional policies so remember earlier i was",
    "start": "1475520",
    "end": "1481200"
  },
  {
    "text": "saying i want to allow teams to create services but i don't want them to be able to create node port services well",
    "start": "1481200",
    "end": "1486880"
  },
  {
    "text": "so gatekeeper lets me do that i can write policies and and",
    "start": "1486880",
    "end": "1492480"
  },
  {
    "text": "that as services are being created will look against the policies and say hey should this thing",
    "start": "1492480",
    "end": "1498159"
  },
  {
    "text": "actually be accepted or not",
    "start": "1498159",
    "end": "1502799"
  },
  {
    "text": "okay so one of the things that i want to do is as a platform team we created gatekeeper policies that basically",
    "start": "1503840",
    "end": "1509600"
  },
  {
    "text": "satisfy all the pod security standards at least the baseline level so",
    "start": "1509600",
    "end": "1514720"
  },
  {
    "text": "we didn't allow any of our tenants to run privileged pods or to mount the host volume host file system into the container use",
    "start": "1514720",
    "end": "1521760"
  },
  {
    "text": "host namespaces basically all those kind of standard pod security policies and so what we want to do is say all right",
    "start": "1521760",
    "end": "1529120"
  },
  {
    "text": "landlord you're in charge of making sure that all these policies are actually being defined and again i'm not going to",
    "start": "1529120",
    "end": "1534159"
  },
  {
    "text": "try to make this a full gatekeeper uh talk here but once i've defined the policy then i",
    "start": "1534159",
    "end": "1539200"
  },
  {
    "text": "can create an object in this case a kate's pss baseline privilege container",
    "start": "1539200",
    "end": "1544240"
  },
  {
    "text": "object and and then i'm going to apply it to all the name spaces that are being used by tenants and so",
    "start": "1544240",
    "end": "1551520"
  },
  {
    "text": "within these namespaces it's not going to allow any privileged container to run okay",
    "start": "1551520",
    "end": "1556960"
  },
  {
    "text": "and then after that then what we can do is we can have some parameterized ones so again",
    "start": "1556960",
    "end": "1562799"
  },
  {
    "start": "1559000",
    "end": "1559000"
  },
  {
    "text": "going back to the idea earlier that we don't want to allow teams to to take ingress names for which they're",
    "start": "1562799",
    "end": "1568720"
  },
  {
    "text": "not authorized to use well that's just another gatekeeper policy at this point",
    "start": "1568720",
    "end": "1574080"
  },
  {
    "text": "gatekeeper policies allow us to provide additional parameters to them to say for this tenant you're allowed to use",
    "start": "1574080",
    "end": "1580559"
  },
  {
    "text": "domains a b and c while another tenant may be allowed to use x y and z and and so when the policy runs it'll",
    "start": "1580559",
    "end": "1587120"
  },
  {
    "text": "use those those parameters as part of the policy enforcement",
    "start": "1587120",
    "end": "1593760"
  },
  {
    "text": "and so for example i've got team cats over here that's able to use cats.local.mike",
    "start": "1593760",
    "end": "1598960"
  },
  {
    "text": "here now if i a in the the dogs try to use this name",
    "start": "1598960",
    "end": "1604720"
  },
  {
    "text": "um assuming obviously it's being cut off a little bit here but that they they wouldn't be allowed",
    "start": "1604720",
    "end": "1610480"
  },
  {
    "text": "to use that and so when the policy runs it would prevent anybody else from using that",
    "start": "1610480",
    "end": "1615600"
  },
  {
    "text": "domain name and so gatekeeper again being a mission controller would totally block that from happening so let's uh",
    "start": "1615600",
    "end": "1625880"
  },
  {
    "text": "actually do this here so in my get repo here and again you're welcome to try this out",
    "start": "1626000",
    "end": "1632720"
  },
  {
    "text": "let me close some of these out i have a gatekeeper policy chart one of and one of the things i'll say to you is",
    "start": "1632720",
    "end": "1638960"
  },
  {
    "text": "this is just a sample don't take this gatekeeper policy chart and say hey michael irwin said use this and",
    "start": "1638960",
    "end": "1644480"
  },
  {
    "text": "therefore we're now secure because we're using his policies heavens no okay",
    "start": "1644480",
    "end": "1650320"
  },
  {
    "text": "this is just a sample but we can look at just a as an example here that host file system",
    "start": "1650320",
    "end": "1657360"
  },
  {
    "text": "one here's a some of the rego in which we're going to extract all the volumes out from",
    "start": "1657360",
    "end": "1663919"
  },
  {
    "text": "the the object and we're going to look to see if it has a field host path so if it has",
    "start": "1663919",
    "end": "1669279"
  },
  {
    "text": "a field host path then hey that that's going to be night here and we're going to prevent that from happening so this",
    "start": "1669279",
    "end": "1674399"
  },
  {
    "text": "chart just defines all those policies and all the rego one of the things so",
    "start": "1674399",
    "end": "1680080"
  },
  {
    "text": "most of these i inlined uh directly into the object but one of the things that we learned as a platform team was it",
    "start": "1680080",
    "end": "1686320"
  },
  {
    "text": "actually made a lot more sense to extract the rego out into separate files uh separate directories here so we for",
    "start": "1686320",
    "end": "1692240"
  },
  {
    "text": "example the authorized domain policy that i was just talking about we have that extracted into a separate",
    "start": "1692240",
    "end": "1698159"
  },
  {
    "text": "file here and the big reason for that was to be able to support ci cd so that anytime we make changes to any of our",
    "start": "1698159",
    "end": "1703440"
  },
  {
    "text": "policies our ci pipelines could actually run all of our tests for it and then as part of the helm build",
    "start": "1703440",
    "end": "1710640"
  },
  {
    "text": "it would just extract the file and line it uh into our home chart too so there's an example of that happening here as",
    "start": "1710640",
    "end": "1716720"
  },
  {
    "text": "well too if anybody wants to dive into that anyways okay so let's go back to our landlord",
    "start": "1716720",
    "end": "1723279"
  },
  {
    "text": "chart let's get all of our let me grab",
    "start": "1723279",
    "end": "1730840"
  },
  {
    "text": "okay so i'm going to create a template called gatekeeper pss for pod security standards and it's just going to apply",
    "start": "1740000",
    "end": "1746000"
  },
  {
    "text": "those this pod security standard objects again this is only three of them there's more to the pod security standards",
    "start": "1746000",
    "end": "1753840"
  },
  {
    "text": "and then the last thing i'm going to do is one more file",
    "start": "1754640",
    "end": "1759760"
  },
  {
    "text": "and this will be the authorized domains",
    "start": "1762080",
    "end": "1766278"
  },
  {
    "text": "and we'll go over here and we will put domains cats.local",
    "start": "1768320",
    "end": "1774880"
  },
  {
    "text": "make sure you send that training does that we'll just do one tenant in here",
    "start": "1774880",
    "end": "1780399"
  },
  {
    "text": "okay we'll do a helm upgrade",
    "start": "1780399",
    "end": "1783840"
  },
  {
    "text": "and looks like i've got something worked up",
    "start": "1786000",
    "end": "1790799"
  },
  {
    "text": "oh whoops",
    "start": "1791679",
    "end": "1795000"
  },
  {
    "text": "oh yeah i had to make one more change here",
    "start": "1799520",
    "end": "1805080"
  },
  {
    "text": "um tenets so one of the things that we we did from",
    "start": "1808159",
    "end": "1813360"
  },
  {
    "text": "the start is we would authorize domains for their tenant namespace dot",
    "start": "1813360",
    "end": "1820559"
  },
  {
    "text": "sum identifier um and so in this case what i'm going to do is basically say hey team awesome is automatically",
    "start": "1820559",
    "end": "1826480"
  },
  {
    "text": "authorized to use team awesome.tenants.local.microsoft87.training so basically here's a default domain",
    "start": "1826480",
    "end": "1832080"
  },
  {
    "text": "that you you can use and you don't have to worry about anything else and so we would put this",
    "start": "1832080",
    "end": "1838320"
  },
  {
    "text": "within our own cluster dns and all that kind of stuff so if teams just wanted to prototype",
    "start": "1838320",
    "end": "1843520"
  },
  {
    "text": "things quickly they could do that okay now let's do our home upgrade",
    "start": "1843520",
    "end": "1848559"
  },
  {
    "text": "and what we should be able to do now is if i i'm gonna grab",
    "start": "1848559",
    "end": "1854960"
  },
  {
    "text": "back over here and let's uh let's go to team cats and i'm going to try to break this a little",
    "start": "1858240",
    "end": "1864480"
  },
  {
    "text": "bit and i'm going to try to just run a privileged pod here and normally i would",
    "start": "1864480",
    "end": "1869919"
  },
  {
    "text": "i would commit this i'd push it up you know let it go through the get ops thing but just due to time and whatnot i'll just do it manually here",
    "start": "1869919",
    "end": "1877360"
  },
  {
    "text": "so teen cats",
    "start": "1877360",
    "end": "1880398"
  },
  {
    "text": "and [Music] oops",
    "start": "1887279",
    "end": "1894158"
  },
  {
    "text": "that shouldn't have worked [Laughter]",
    "start": "1898159",
    "end": "1902470"
  },
  {
    "text": "hold on say that one more time yeah that shouldn't matter um",
    "start": "1905679",
    "end": "1915080"
  },
  {
    "text": "wait oh gotcha i see what you're saying",
    "start": "1920559",
    "end": "1925360"
  },
  {
    "text": "i put that file on the wrong spot okay so for those that didn't catch i",
    "start": "1926000",
    "end": "1931600"
  },
  {
    "text": "made the the gatekeeper pod security file and it wasn't in the templates directory so i just",
    "start": "1931600",
    "end": "1936799"
  },
  {
    "text": "accidentally had it in the wrong spot it didn't get it didn't create that policy now let me delete that first",
    "start": "1936799",
    "end": "1945720"
  },
  {
    "text": "come on okay it's still being deleted but",
    "start": "1955519",
    "end": "1961360"
  },
  {
    "text": "anyways now it will actually block it okay so again you will just want to kind of think about what policies you want and then how can you plug it into your",
    "start": "1961360",
    "end": "1967679"
  },
  {
    "text": "your landlord to template it out now one of the things i just want to mention real quick and i know we're short on",
    "start": "1967679",
    "end": "1972720"
  },
  {
    "text": "time here is breaking up workloads and one of the things that we did is again using node pools and",
    "start": "1972720",
    "end": "1979760"
  },
  {
    "start": "1974000",
    "end": "1974000"
  },
  {
    "text": "you know kubernetes doesn't actually have a built-in and node pull thing okay but you can use taints and",
    "start": "1979760",
    "end": "1986880"
  },
  {
    "text": "tolerations node affinities node selectors to start building out node pools yourself and basically",
    "start": "1986880",
    "end": "1992480"
  },
  {
    "text": "have that capability so one of the things that we did was we basically said all right hey we're going to create a node pool a here that has",
    "start": "1992480",
    "end": "1999039"
  },
  {
    "text": "taints and labels that reflect team a another one here that's team b and then we're going to",
    "start": "1999039",
    "end": "2004960"
  },
  {
    "text": "mutate pods that have the tolerations in the node selector to put the pods where they need to be okay",
    "start": "2004960",
    "end": "2010480"
  },
  {
    "text": "so node team a's pods will go to team a's nodes team b's pods will go to team",
    "start": "2010480",
    "end": "2016159"
  },
  {
    "text": "b's nodes et cetera and there are a variety of different tools that we can do this but um we've",
    "start": "2016159",
    "end": "2022399"
  },
  {
    "text": "we quickly adopted carpenter and we're a big fan of carpenter because carpenter allows us to define",
    "start": "2022399",
    "end": "2028080"
  },
  {
    "text": "all these node pools and the provisioners and everything using config and and so as an example here here's a",
    "start": "2028080",
    "end": "2033440"
  },
  {
    "text": "provisioner that i can create the taints and and put the the various taints and the labels that",
    "start": "2033440",
    "end": "2039279"
  },
  {
    "text": "need to be on those specific pods and then to force the pods into the node pools gatekeeper also can be a mutating",
    "start": "2039279",
    "end": "2046000"
  },
  {
    "text": "controller and so what we would do is we'd say hey for this particular tenant they're going to be on the node pool",
    "start": "2046000",
    "end": "2052320"
  },
  {
    "text": "named demos and so we would create a gatekeeper mutation that for all pods that spin up in that",
    "start": "2052320",
    "end": "2059118"
  },
  {
    "text": "particular name space they would have the node selectors and the and the tolerations to put them into",
    "start": "2059119",
    "end": "2065599"
  },
  {
    "text": "that pool and so what that means is that as the application developer teams they didn't have to know nor care that this",
    "start": "2065599",
    "end": "2070638"
  },
  {
    "text": "was happening behind the scenes and was was really powerful so again the",
    "start": "2070639",
    "end": "2075839"
  },
  {
    "text": "teams didn't have to add these taints and tolerations and node selectors and all that kind of stuff we did automatically for them um",
    "start": "2075839",
    "end": "2082320"
  },
  {
    "text": "just by running on the platform and again this was something we could script out and just put into our landlord",
    "start": "2082320",
    "end": "2088079"
  },
  {
    "text": "just wrapping up here too a couple other things that we did in our landlord we we ran file beat in our cluster and we",
    "start": "2088079",
    "end": "2094960"
  },
  {
    "text": "would gather up all the logs and send them off to splunk every team had different splunk indexes that they wanted to use so cool we would just say",
    "start": "2094960",
    "end": "2101760"
  },
  {
    "text": "tell us the annotations that you want and we'd mutate those on as well and um and then so all pods that spun up in",
    "start": "2101760",
    "end": "2107280"
  },
  {
    "text": "their their particular name spaces would would ford off we also integrated our back with our our",
    "start": "2107280",
    "end": "2113760"
  },
  {
    "text": "idp on campus as well and this is a pretty common pattern we use a keyboard dc proxy",
    "start": "2113760",
    "end": "2119520"
  },
  {
    "text": "and kind of go from there too so",
    "start": "2119520",
    "end": "2124720"
  },
  {
    "text": "and so one last thing obviously in this demo i was doing everything with just helm install helm upgrade",
    "start": "2124960",
    "end": "2131119"
  },
  {
    "text": "obviously you can use a helm release and go that way and this is the the way that we we definitely did it",
    "start": "2131119",
    "end": "2137280"
  },
  {
    "text": "one of the things i would recommend is we would actually take that value sample in and deploy as a configs map",
    "start": "2137280",
    "end": "2144480"
  },
  {
    "text": "and then using the home release values from reference that config map and and deploy",
    "start": "2144480",
    "end": "2149680"
  },
  {
    "text": "uh from there and the big advantage for that is then we could take that config map that raw values and",
    "start": "2149680",
    "end": "2156560"
  },
  {
    "text": "do a helm template and and render out just like we were doing here so with that um get ops is awesome and the landlord",
    "start": "2156560",
    "end": "2163839"
  },
  {
    "text": "has uh helped us be able to scale up and down as tenants need and be able to spin up workshops you know",
    "start": "2163839",
    "end": "2169599"
  },
  {
    "text": "great we're gonna do a workshop with 50 tenants in it great we can just spin that up and go from there and uh with that i thank you",
    "start": "2169599",
    "end": "2177200"
  },
  {
    "text": "hey at the forum three folks are here can you get miked up thank you um any questions for michael here we",
    "start": "2183359",
    "end": "2189920"
  },
  {
    "text": "have like two minutes um so about uh like the poll like you",
    "start": "2189920",
    "end": "2196800"
  },
  {
    "text": "say you use gatekeepers especially like admission web hooks so like i always like maybe it's like just like in the github's pattern thinking right",
    "start": "2196800",
    "end": "2203760"
  },
  {
    "text": "like i ultimately would block then the release of my my tenants that would use",
    "start": "2203760",
    "end": "2209520"
  },
  {
    "text": "uh a invalid configuration right so what's your preferation like actually blocking the full sink",
    "start": "2209520",
    "end": "2216160"
  },
  {
    "text": "or allowing it into and kind of like and then afterwards having a control understand i cannot just take it and do",
    "start": "2216160",
    "end": "2222000"
  },
  {
    "text": "something with it or i need to ignore it yeah that's a good point so one of the things that we did is we actually built a dashboard um",
    "start": "2222000",
    "end": "2230000"
  },
  {
    "text": "a web-based ui word that the all the tenants can log in it was basically kind of set up for a more get ups flow where",
    "start": "2230000",
    "end": "2236079"
  },
  {
    "text": "the dashboard is fully read only and here's your deployments and all that kind of stuff but one of the things that we did is up in the top left corner it",
    "start": "2236079",
    "end": "2242240"
  },
  {
    "text": "would basically was the status of the customization so it would tell you what commit had synced was it successful",
    "start": "2242240",
    "end": "2248000"
  },
  {
    "text": "or was it not and so if you committed it like an ingress object or that user a wrong domain or a node port",
    "start": "2248000",
    "end": "2255040"
  },
  {
    "text": "service you know anything that invalidates yeah the customization sync would fail because the policy prevented",
    "start": "2255040",
    "end": "2260800"
  },
  {
    "text": "it from being applied but then we would have that right there on the screen and and here's the the error message you got from gatekeeper and and why not too so",
    "start": "2260800",
    "end": "2268320"
  },
  {
    "text": "so yes we did block that sync from because the emission controller blocked it but then we also gave them here's the",
    "start": "2268320",
    "end": "2275040"
  },
  {
    "text": "visibility on why it didn't happen they didn't have to drop into the cli to figure it out yep",
    "start": "2275040",
    "end": "2281520"
  },
  {
    "text": "alrighty and i think we'll we'll switch over but uh if yes hi uh what is the real advantage of having",
    "start": "2281520",
    "end": "2288880"
  },
  {
    "text": "a separate node pool for pair tenant as compared to entire cluster",
    "start": "2288880",
    "end": "2294320"
  },
  {
    "text": "yeah so that that's a great question the we had a couple different reasons to do it um some teams didn't trust other",
    "start": "2294320",
    "end": "2301119"
  },
  {
    "text": "teams to be running on the same nodes with with them and so that that was part of it so how much cross-team trust was there but also we",
    "start": "2301119",
    "end": "2307839"
  },
  {
    "text": "use separate node pools also as a cost accounting measure so we would spin up each of the different node pools and put",
    "start": "2307839",
    "end": "2313599"
  },
  {
    "text": "cost allocation tags since we're running aws and then we can know hey this tenant is costing us this much to",
    "start": "2313599",
    "end": "2320880"
  },
  {
    "text": "run workloads on our infrastructure",
    "start": "2320880",
    "end": "2325559"
  },
  {
    "text": "oh gotcha why not multiple clusters because we didn't have a big enough team that wanted to run multiple clusters",
    "start": "2326880",
    "end": "2332720"
  },
  {
    "text": "yep awesome all right thank you alrighty thank you everybody",
    "start": "2332720",
    "end": "2339400"
  }
]