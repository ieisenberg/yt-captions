[
  {
    "start": "0",
    "end": "93000"
  },
  {
    "text": "hello everyone welcome I'm so excited to see you all here at our presentation",
    "start": "599",
    "end": "6759"
  },
  {
    "text": "session uh persistant pays off the path to station persistence in gway API um I",
    "start": "6759",
    "end": "12639"
  },
  {
    "text": "know it's been a long day and I'm probably standing between you and your Diner um so huge thank you for sticking",
    "start": "12639",
    "end": "19920"
  },
  {
    "text": "with us at this presentation um for those of you who might be new to this concept um session",
    "start": "19920",
    "end": "26160"
  },
  {
    "text": "persistence is a way to ensure that a users request are cons consistently",
    "start": "26160",
    "end": "31560"
  },
  {
    "text": "routed to the SAG end throughout their interactions with a website or application and this can be crucial for",
    "start": "31560",
    "end": "38879"
  },
  {
    "text": "applications um who that needs to track the user preferences the states or even",
    "start": "38879",
    "end": "44000"
  },
  {
    "text": "like shopping carts and um it was the top requested features for gway API at",
    "start": "44000",
    "end": "51320"
  },
  {
    "text": "last year's ccom as Chicago so demonstrating that how important it is",
    "start": "51320",
    "end": "56920"
  },
  {
    "text": "to this community we are incredible really excited to um share the latest updates",
    "start": "56920",
    "end": "63840"
  },
  {
    "text": "um on the session persistence and um how this is going to be integrated into the gateway API my name is j um I'm software",
    "start": "63840",
    "end": "72439"
  },
  {
    "text": "engineer at Google I'm leading the design and implementation effort of session persistance in JPC route and",
    "start": "72439",
    "end": "79159"
  },
  {
    "text": "httv Route and today I'm presenting with Grant hey uh I'm Grant Spence I'm",
    "start": "79159",
    "end": "84840"
  },
  {
    "text": "software engineer at redhead and I've been kind of leading and championing the uh soft uh the session proc system skip",
    "start": "84840",
    "end": "90720"
  },
  {
    "text": "uh with G API so let's take a few minutes to talk",
    "start": "90720",
    "end": "96159"
  },
  {
    "start": "93000",
    "end": "396000"
  },
  {
    "text": "about kubernetes G API before dive into session persistence the go API is a",
    "start": "96159",
    "end": "101720"
  },
  {
    "text": "significant Evolution um in how we manage Network traffic in Comm",
    "start": "101720",
    "end": "107600"
  },
  {
    "text": "environments it offers a powerful set of features to address the demands of the modern microservices",
    "start": "107600",
    "end": "114399"
  },
  {
    "text": "architectures and the gway API designed several distinct roles for servicing different needs needs for different",
    "start": "114399",
    "end": "120719"
  },
  {
    "text": "users it also provides a standardized way to ensure that your configurations",
    "start": "120719",
    "end": "126680"
  },
  {
    "text": "will work similarly across different kubernetes environments and um Network infrasture",
    "start": "126680",
    "end": "132920"
  },
  {
    "text": "providers the API give a fine two traffic with capabilities like haer",
    "start": "132920",
    "end": "138000"
  },
  {
    "text": "based routing um weighted traffic split and advanced low balancing and the",
    "start": "138000",
    "end": "143200"
  },
  {
    "text": "Gateway API primarily known for its North South traffic capabilities is",
    "start": "143200",
    "end": "148640"
  },
  {
    "text": "involving to support East wayte use cases with the service measures so that",
    "start": "148640",
    "end": "154000"
  },
  {
    "text": "is it can be used to Route the communication between services and the route will attach directly to the",
    "start": "154000",
    "end": "161280"
  },
  {
    "text": "service representing the configuration mean to be all applied to any traffic",
    "start": "161280",
    "end": "166680"
  },
  {
    "text": "directly to the surface the gway API also similarly integrated with the custom Solutions",
    "start": "166680",
    "end": "172840"
  },
  {
    "text": "enabling the use uh enabling the use of the specialized LW balancers or service",
    "start": "172840",
    "end": "178840"
  },
  {
    "text": "meses several key apis of the Gateway API graduated to GA October last year um",
    "start": "178840",
    "end": "186200"
  },
  {
    "text": "including gateway gateway class htb route and other significant resources",
    "start": "186200",
    "end": "191239"
  },
  {
    "text": "are under active development and available in the experimental Channel and we are trying or we are planning to",
    "start": "191239",
    "end": "198120"
  },
  {
    "text": "ra a JPC route JPC route GA to GA in the AIL release and richer from my team um",
    "start": "198120",
    "end": "206120"
  },
  {
    "text": "is going to have a JPC route talk at 2 pm Friday so if you're interested please",
    "start": "206120",
    "end": "211519"
  },
  {
    "text": "join us um to learn more details about JPC",
    "start": "211519",
    "end": "217080"
  },
  {
    "text": "route gway enhancement proposals Gap defines a process for proposing changes",
    "start": "217400",
    "end": "224120"
  },
  {
    "text": "to the Gateway API and it ensures that changes um will follow a standard",
    "start": "224120",
    "end": "231120"
  },
  {
    "text": "process and are discussed in the open and are discussed in the open source",
    "start": "231120",
    "end": "237720"
  },
  {
    "text": "Community um let's true check stop",
    "start": "237720",
    "end": "245640"
  },
  {
    "text": "something can you help us to",
    "start": "249200",
    "end": "253000"
  },
  {
    "text": "check",
    "start": "268720",
    "end": "271720"
  },
  {
    "text": "makes a",
    "start": "278440",
    "end": "280919"
  },
  {
    "text": "difference oh all right okay thank",
    "start": "292840",
    "end": "298120"
  },
  {
    "text": "you thanks everyone that's very that's very",
    "start": "298639",
    "end": "303960"
  },
  {
    "text": "warm um so let me start it over uh gway enhancement proposals defines a process",
    "start": "303960",
    "end": "310560"
  },
  {
    "text": "for proposing changes um to the gway API and ensures that the changes um follow a",
    "start": "310560",
    "end": "317280"
  },
  {
    "text": "St standard process and discuss in the open source",
    "start": "317280",
    "end": "322680"
  },
  {
    "text": "Community Gap 1619 is a proposal to enrich gway API with session persistence",
    "start": "323080",
    "end": "330199"
  },
  {
    "text": "um to ensure that users requests are consistently routed to the SAG end throughout their interactions with a",
    "start": "330199",
    "end": "336880"
  },
  {
    "text": "website or application it is currently under provisional State and we are very",
    "start": "336880",
    "end": "342639"
  },
  {
    "text": "close to move it to the into the implementable state um which Grant will cover in a few minutes discussions about",
    "start": "342639",
    "end": "350319"
  },
  {
    "text": "this Gap has been very very intense um in the past few weeks as you can see",
    "start": "350319",
    "end": "355560"
  },
  {
    "text": "from the screenshot it has more than 100 comments on the pr and there were lots of great discussions with a real sense",
    "start": "355560",
    "end": "363080"
  },
  {
    "text": "of collaboration and um excitement about session persistence and it is so great",
    "start": "363080",
    "end": "368960"
  },
  {
    "text": "to see many people actively participating and sharing their ideas and the most exciting part is the",
    "start": "368960",
    "end": "376599"
  },
  {
    "text": "pr was merged a few days ago so in the next 15 minutes thank",
    "start": "376599",
    "end": "382590"
  },
  {
    "text": "[Applause] you so in the next 15 minutes um you will get a firsthand updates about",
    "start": "382590",
    "end": "389039"
  },
  {
    "text": "session person assistance and with that I'm handing over to Grant to talk about what session persistance",
    "start": "389039",
    "end": "396240"
  },
  {
    "start": "396000",
    "end": "483000"
  },
  {
    "text": "is right thanks Gina um first let's talk about what SES persistence is as Gina",
    "start": "396240",
    "end": "402360"
  },
  {
    "text": "kind of introduced the topic already um let's define the official meaning of s persistence as it pertains to KB API um",
    "start": "402360",
    "end": "410520"
  },
  {
    "text": "the first thing that we would really want to do with the a lot of the gips in Gateway API is that we want to establish a Common Language uh just so we're all",
    "start": "410520",
    "end": "418000"
  },
  {
    "text": "talking about the same thing um just to make things clear in communication um so",
    "start": "418000",
    "end": "423960"
  },
  {
    "text": "what is such persistence uh it's about making sure that when you use a website or a app your request is going to the",
    "start": "423960",
    "end": "430120"
  },
  {
    "text": "same server uh for a certain duration or specific amount of time um how can you",
    "start": "430120",
    "end": "435680"
  },
  {
    "text": "achieve it uh clients can achieve this by providing identifying information like a cookie uh which is used by a load",
    "start": "435680",
    "end": "442360"
  },
  {
    "text": "balancer to Route traffic to the same server um and uh you can also think of",
    "start": "442360",
    "end": "448160"
  },
  {
    "text": "this as kind of a exception to load balancing uh it bypasses a proxy's load",
    "start": "448160",
    "end": "454800"
  },
  {
    "text": "balancing algorithm and goes directly to the back end uh that it's already previously established the session with",
    "start": "454800",
    "end": "461840"
  },
  {
    "text": "um so unfortunately session persistence is not a standardized name you guys probably are aware of that some people",
    "start": "461840",
    "end": "467720"
  },
  {
    "text": "call it sticky sessions some people call it session Affinity but um here we're not trying to to Really enforce some",
    "start": "467720",
    "end": "474319"
  },
  {
    "text": "sort of global standard here but we just really need to to establish some sort of naming convention or common language for",
    "start": "474319",
    "end": "480960"
  },
  {
    "text": "the foundation of this Gap okay let's let's uh Define another",
    "start": "480960",
    "end": "486919"
  },
  {
    "start": "483000",
    "end": "602000"
  },
  {
    "text": "term um which it might be a little confusing but hang on uh session",
    "start": "486919",
    "end": "491960"
  },
  {
    "text": "Affinity so the best way to define session Affinity um as it pertains to Gateway API and our apis uh is to",
    "start": "491960",
    "end": "499000"
  },
  {
    "text": "compare it to uh session persistence which we just defined so as we're",
    "start": "499000",
    "end": "504319"
  },
  {
    "text": "defining it here um session persistence provides a guaranteed or most guarantees",
    "start": "504319",
    "end": "510800"
  },
  {
    "text": "uh backend persistence to the same backend server uh whereas uh session Affinity is work on a weaker form uh of",
    "start": "510800",
    "end": "519360"
  },
  {
    "text": "speci persistence so um strong versus weak next uh we are defining T",
    "start": "519360",
    "end": "529000"
  },
  {
    "text": "persistence as uh it's deliberately uh provided attributes on",
    "start": "529000",
    "end": "534080"
  },
  {
    "text": "later seven so you can think of like a cookie or a header whereas uh shest and affinity",
    "start": "534080",
    "end": "540040"
  },
  {
    "text": "uh is based on any existing connection tributes um such as like I client IP",
    "start": "540040",
    "end": "547040"
  },
  {
    "text": "address and um the uh Gap that we're working on 1619 is defining support for",
    "start": "547040",
    "end": "554920"
  },
  {
    "text": "session persistance but we are leaving out uh session Affinity uh so the idea",
    "start": "554920",
    "end": "560240"
  },
  {
    "text": "here is that we we kind of establish this common language so we could decouple these apis uh so we can t",
    "start": "560240",
    "end": "565920"
  },
  {
    "text": "tackle session persistence specifically in this Gap in Le session affinity for another",
    "start": "565920",
    "end": "572519"
  },
  {
    "text": "time so uh as you might already know the uh kubernetes also already supports",
    "start": "572519",
    "end": "578519"
  },
  {
    "text": "session Affinity uh in the service object and that's spec. session Affinity",
    "start": "578519",
    "end": "584320"
  },
  {
    "text": "but uh right now we aren't supporting um compatibility with that uh with with G",
    "start": "584320",
    "end": "591560"
  },
  {
    "text": "1619 uh might revisit that later but uh right now it doesn't support enabling um",
    "start": "591560",
    "end": "597160"
  },
  {
    "text": "our session persistence and kubernetes session Affinity at the same",
    "start": "597160",
    "end": "602720"
  },
  {
    "start": "602000",
    "end": "683000"
  },
  {
    "text": "time so how can you achieve session persistence um do it in multiple ways uh",
    "start": "602720",
    "end": "608720"
  },
  {
    "text": "the the most common way uh is through a cookie like I mentioned earlier the client uses a set cookie HTP header uh",
    "start": "608720",
    "end": "615480"
  },
  {
    "text": "to uh response header from from a uh Gateway or a backend uh in its future",
    "start": "615480",
    "end": "622399"
  },
  {
    "text": "requests and the value of this cookie encodes some information about a backend that the low balancer will use to create",
    "start": "622399",
    "end": "629920"
  },
  {
    "text": "uh a consistent uh session to a specific back end next uh headers can also be",
    "start": "629920",
    "end": "636360"
  },
  {
    "text": "used to achieve session persistance uh and maybe situations where cookies aren't supported uh here the client uses",
    "start": "636360",
    "end": "642920"
  },
  {
    "text": "a predefined HTP header provided to the Gateway and future HTP request um like",
    "start": "642920",
    "end": "648920"
  },
  {
    "text": "cookies headers encode some sort of uh value which the backend uses to look up",
    "start": "648920",
    "end": "654680"
  },
  {
    "text": "um where the res request should be routed to uh lastly uh URL encoding um they can",
    "start": "654680",
    "end": "661760"
  },
  {
    "text": "also be used for session uh persistence uh the server automatically",
    "start": "661760",
    "end": "666800"
  },
  {
    "text": "rewrites the URL to encode the session information you you might see this with",
    "start": "666800",
    "end": "672720"
  },
  {
    "text": "older Java applications and with specifically with that J session ID um",
    "start": "672720",
    "end": "678000"
  },
  {
    "text": "name uh next I'll hand it to Gina to talk about uh how we initiate session",
    "start": "678000",
    "end": "683399"
  },
  {
    "start": "683000",
    "end": "903000"
  },
  {
    "text": "persistence okay thanks rant um the initiation of the persistance as",
    "start": "683399",
    "end": "689440"
  },
  {
    "text": "persistent session is possible from various sources from the global low balancer Regional low balancer internal",
    "start": "689440",
    "end": "696040"
  },
  {
    "text": "gateways side CS or any component before reaching the back end um here I want to",
    "start": "696040",
    "end": "702360"
  },
  {
    "text": "show like start with a very very simple example with a Gateway and a few back",
    "start": "702360",
    "end": "707519"
  },
  {
    "text": "ends and a typical flow of the request and response looks like this a client",
    "start": "707519",
    "end": "713639"
  },
  {
    "text": "sends a request to a Gateway which has the rout resource attached to it and based on the rout rule the request is",
    "start": "713639",
    "end": "720279"
  },
  {
    "text": "forwarded to the backend one and then the response is then returned to the gway and then send it back to the client",
    "start": "720279",
    "end": "727360"
  },
  {
    "text": "and know that um in this example backend one does not have session persistence",
    "start": "727360",
    "end": "732680"
  },
  {
    "text": "enabled so the next request can be routed differently and next that's like a look",
    "start": "732680",
    "end": "740440"
  },
  {
    "text": "take a look at how a gway can initiate a session with cookie persistent sessions",
    "start": "740440",
    "end": "745680"
  },
  {
    "text": "with cookies with a client send a request the Gateway routes the traffic",
    "start": "745680",
    "end": "751000"
  },
  {
    "text": "based on the route Rule and this time the request is s to bend two which has a",
    "start": "751000",
    "end": "756160"
  },
  {
    "text": "session persistence enabled and then the Gateway includes the set cookie header",
    "start": "756160",
    "end": "761399"
  },
  {
    "text": "sid1 123 in the response to establish your persistance session after that the client can store",
    "start": "761399",
    "end": "769560"
  },
  {
    "text": "the cookie and send the following request with the cookie allowing the gateway to decode it and look up The Sid",
    "start": "769560",
    "end": "776880"
  },
  {
    "text": "and consistently route the request to again two to form a persistent",
    "start": "776880",
    "end": "782279"
  },
  {
    "text": "session this diagram outlines a very simple use case of a Gateway initiating",
    "start": "782279",
    "end": "788279"
  },
  {
    "text": "a Precision session by inserting a cookie in the response header and a client application applying the cookie",
    "start": "788279",
    "end": "795639"
  },
  {
    "text": "in the headers of the following request and one thing that I like to C out is as",
    "start": "795639",
    "end": "801680"
  },
  {
    "text": "Grant mentioned earlier cookie is just one of the mechanism to implement proc",
    "start": "801680",
    "end": "807040"
  },
  {
    "text": "session and um implementation can decide how you want to achieve",
    "start": "807040",
    "end": "812959"
  },
  {
    "text": "it now let's take a look at another example of how a back end can initiate a",
    "start": "813560",
    "end": "819120"
  },
  {
    "text": "precise session with cookies similar to the previous Slide the Gateway routs the",
    "start": "819120",
    "end": "824480"
  },
  {
    "text": "traffic to backend two which has session persistance enabled and this time the G",
    "start": "824480",
    "end": "830639"
  },
  {
    "text": "uh the back end includes a set header set cookie header in the response to",
    "start": "830639",
    "end": "835959"
  },
  {
    "text": "establish a Precision session and then the G way may modify the cookie with a",
    "start": "835959",
    "end": "841160"
  },
  {
    "text": "reference to a specific B so that it can update the following request it can",
    "start": "841160",
    "end": "846680"
  },
  {
    "text": "route the following request to send back end there are several approaches um for",
    "start": "846680",
    "end": "851880"
  },
  {
    "text": "the gateway to achieve it and in this example it adds an additional cookie B",
    "start": "851880",
    "end": "857320"
  },
  {
    "text": "ID to reference the backend ID so when the client sent the following",
    "start": "857320",
    "end": "862560"
  },
  {
    "text": "request with the cookie the bid and the cookies allows the gateway to",
    "start": "862560",
    "end": "867639"
  },
  {
    "text": "consistently rout the track to bend 2 and not that in the Gap 1619 does not",
    "start": "867639",
    "end": "874320"
  },
  {
    "text": "does not define details about the bend initia sessions because it can be very",
    "start": "874320",
    "end": "880000"
  },
  {
    "text": "very complicated so it is intended to explore this um in a in a separate",
    "start": "880000",
    "end": "886440"
  },
  {
    "text": "proposal so now we have defined what session persistence is introduced how to",
    "start": "886440",
    "end": "891880"
  },
  {
    "text": "achieve session persistence and explored a few examples of how it can be",
    "start": "891880",
    "end": "897360"
  },
  {
    "text": "initiated and now there to reveal how the API looks",
    "start": "897360",
    "end": "902360"
  },
  {
    "start": "903000",
    "end": "1015000"
  },
  {
    "text": "like all right so before we dive into the API that we're working on right now",
    "start": "904880",
    "end": "910399"
  },
  {
    "text": "um let's review some Gateway API uh definitions So Meta resources and policy",
    "start": "910399",
    "end": "916040"
  },
  {
    "text": "attachments um while designing G API we found that we often need to change an",
    "start": "916040",
    "end": "922680"
  },
  {
    "text": "objects Behavior without changing their spec uh that's where meta resources and policy attachments become very useful",
    "start": "922680",
    "end": "929079"
  },
  {
    "text": "Tool uh so a meta resource is a class of uh objects that only augments the",
    "start": "929079",
    "end": "934519"
  },
  {
    "text": "behavior of another object uh by attaching to it and then furthermore a policy attachment is a type of meta",
    "start": "934519",
    "end": "941240"
  },
  {
    "text": "resource that uses a specific targeting struct uh Target rep in the example here",
    "start": "941240",
    "end": "947279"
  },
  {
    "text": "um and has a defined Behavior it can be a direct or indirect uh type of policy",
    "start": "947279",
    "end": "952959"
  },
  {
    "text": "attachment um uh here in this example uh example TLS policy is a hypothetical uh",
    "start": "952959",
    "end": "959639"
  },
  {
    "text": "direct policy attachment that uh augments the service to add a CA reference sorry I meant to say inherited",
    "start": "959639",
    "end": "966399"
  },
  {
    "text": "not direct is direct or inherited um so uh a direct policy attachment uh is a",
    "start": "966399",
    "end": "971800"
  },
  {
    "text": "policy uh that references a single object only and only modifies the fields",
    "start": "971800",
    "end": "977279"
  },
  {
    "text": "for that specific configuration object or that configuration for that specific object while an inherited policy",
    "start": "977279",
    "end": "983240"
  },
  {
    "text": "attachment is a policy that references a single object as well uh but it um can",
    "start": "983240",
    "end": "988600"
  },
  {
    "text": "modif mod ify the configuration for any child objects of that object that it's modifying uh in any configuration",
    "start": "988600",
    "end": "996279"
  },
  {
    "text": "associated with those child objects um so if you want more information about um d uh direct or inherited policy",
    "start": "996279",
    "end": "1003040"
  },
  {
    "text": "attachments I recommend reviewing G 7113 uh there's also a PR that Nick has up um",
    "start": "1003040",
    "end": "1009440"
  },
  {
    "text": "that is making some substantial changes to that so look for a PR related to",
    "start": "1009440",
    "end": "1015680"
  },
  {
    "start": "1015000",
    "end": "1124000"
  },
  {
    "text": "that okay so uh when trying to design uh the session persistence API we we",
    "start": "1015680",
    "end": "1021920"
  },
  {
    "text": "found ourselves needing to augment the cre service object or more specifically the traffic Bound for the backends uh a",
    "start": "1021920",
    "end": "1029600"
  },
  {
    "text": "new direct policy attachment that we're calling backend lb policy and lb is for load balancer here uh enables us to",
    "start": "1029600",
    "end": "1036360"
  },
  {
    "text": "augment a service without changing the service API uh and there's a delicate balance here on how generic or how",
    "start": "1036360",
    "end": "1043600"
  },
  {
    "text": "specific uh these new policy attachments that we're designing should be uh having it specific uh can lead to uh lots of",
    "start": "1043600",
    "end": "1051840"
  },
  {
    "text": "crds and proliferation in that matter uh but having it too generic can be kind of confusing and lead to monolithic API",
    "start": "1051840",
    "end": "1058760"
  },
  {
    "text": "objects uh for session persistence we we currently landed on back in LP policy um",
    "start": "1058760",
    "end": "1065200"
  },
  {
    "text": "as an abstraction for configuring load balancing configuration for back backend traffic so in other words we we",
    "start": "1065200",
    "end": "1072600"
  },
  {
    "text": "intestate that uh other load balancing related configuration will be added to",
    "start": "1072600",
    "end": "1077880"
  },
  {
    "text": "this uh a API uh for example low balancing algorithm section which is not",
    "start": "1077880",
    "end": "1083240"
  },
  {
    "text": "currently a feature in Gateway API um so that this structure kind of paves the way for that to be",
    "start": "1083240",
    "end": "1088960"
  },
  {
    "text": "included uh attaching session persistence configuration uh with a backend NB policy to a to a valid back",
    "start": "1088960",
    "end": "1096559"
  },
  {
    "text": "end enable enables it for any route that uh direct that is directing traffic to",
    "start": "1096559",
    "end": "1101919"
  },
  {
    "text": "this back end uh and so a backend here can be a service it can be a service Import in the case of uh multicluster",
    "start": "1101919",
    "end": "1109880"
  },
  {
    "text": "scenarios and it also can be any implementation specific backend object reference uh another big note here is",
    "start": "1109880",
    "end": "1116840"
  },
  {
    "text": "that this API is provisional so we are looking for feedback and we do expect some things to possibly",
    "start": "1116840",
    "end": "1124679"
  },
  {
    "start": "1124000",
    "end": "1202000"
  },
  {
    "text": "change and additionally um we also had a desire to add session persistence at a",
    "start": "1125000",
    "end": "1130720"
  },
  {
    "text": "route level um because some imp implementations may not support it at",
    "start": "1130720",
    "end": "1136159"
  },
  {
    "text": "the service level and at the same time it can quite confusing uh to attach such persistance at a service level for",
    "start": "1136159",
    "end": "1143799"
  },
  {
    "text": "certain scenarios such as like traffic splitting things get quite confusing in that",
    "start": "1143799",
    "end": "1149000"
  },
  {
    "text": "scenario um so the API for this route level configuration exists within the route rule structure uh so it's specific",
    "start": "1149000",
    "end": "1157120"
  },
  {
    "text": "to each route rule uh we also planning to support HP route and grpc Route uh",
    "start": "1157120",
    "end": "1163840"
  },
  {
    "text": "these are the layer 7 routes we currently have uh currently it uses the same API field say back in lb policy uh",
    "start": "1163840",
    "end": "1171240"
  },
  {
    "text": "so what you configure out the service level you can also configure out the route level and you might notice we",
    "start": "1171240",
    "end": "1176799"
  },
  {
    "text": "brought up the idea of an inherited policy attachment earlier but uh this API design currently isn't one uh the",
    "start": "1176799",
    "end": "1183280"
  },
  {
    "text": "idea here is that the inline route configuration uh in the backend nelby policy will work together uh similar to",
    "start": "1183280",
    "end": "1190080"
  },
  {
    "text": "to the concept of an inherent policy attachment but uh we're able to keep back and LP policy focused on a service",
    "start": "1190080",
    "end": "1198000"
  },
  {
    "text": "uh and Gina will talk more about how these two apis interact later okay so let's talk about the",
    "start": "1198000",
    "end": "1204840"
  },
  {
    "start": "1202000",
    "end": "1312000"
  },
  {
    "text": "specific API Fields uh that we currently have in its current state we have about six Fields um that you can configure",
    "start": "1204840",
    "end": "1212080"
  },
  {
    "text": "keep in mind that this API is provisional which means it's it's probably likely to",
    "start": "1212080",
    "end": "1217120"
  },
  {
    "text": "change so first off we have the session name variable so this is a generic",
    "start": "1217120",
    "end": "1222919"
  },
  {
    "text": "configuration uh for the session name we've kept this field kind of loosely specified to leave some room for",
    "start": "1222919",
    "end": "1230400"
  },
  {
    "text": "interpretation implementations may use it to indicate the cookie or header name uh depending on what type of session",
    "start": "1230400",
    "end": "1236360"
  },
  {
    "text": "they are using so next the type fuel it specifies the type of session",
    "start": "1236360",
    "end": "1241960"
  },
  {
    "text": "persistence uh we currently have cookie or header at the",
    "start": "1241960",
    "end": "1247720"
  },
  {
    "text": "moment uh next we have a API sh uh cookie config which is specific to",
    "start": "1247720",
    "end": "1253400"
  },
  {
    "text": "cookie configuration and inside that we have a lifetime type at the moment um this",
    "start": "1253400",
    "end": "1260000"
  },
  {
    "text": "specifies whether a cookie is a permanent or session cookie and if you're not familiar with what a",
    "start": "1260000",
    "end": "1265240"
  },
  {
    "text": "permanent or session cookie is um it's pretty simple a permanent cookie uses the expires or max age attribute um",
    "start": "1265240",
    "end": "1272760"
  },
  {
    "text": "while the a session uh cookie expires when a client has chosen to expire that",
    "start": "1272760",
    "end": "1280320"
  },
  {
    "text": "session uh moving on absolute timeout um is the when the lifetime type is uh",
    "start": "1280320",
    "end": "1285679"
  },
  {
    "text": "permanent like I mentioned it's going to be the expires or max age attribute but when it's a session it's going to",
    "start": "1285679",
    "end": "1292440"
  },
  {
    "text": "specify the timeout the absolute timeout as tracked by a different means probably by the Gateway and then lastly we have",
    "start": "1292440",
    "end": "1299679"
  },
  {
    "text": "the idle timeout uh which makes the session invalid after it's been idle for a specific amount of time the other big",
    "start": "1299679",
    "end": "1306440"
  },
  {
    "text": "note here is that uh it's provisional and also all fields are optional at the",
    "start": "1306440",
    "end": "1311919"
  },
  {
    "text": "moment right thanks grant for walking us through um how session persistance is",
    "start": "1311919",
    "end": "1317799"
  },
  {
    "text": "integrated in to the Gateway API and in the next few slides I want to go over a",
    "start": "1317799",
    "end": "1323279"
  },
  {
    "text": "few scenarios um of different configurations and what the expected API",
    "start": "1323279",
    "end": "1328600"
  },
  {
    "text": "Behavior looks like as gr mentioned earlier session persistence can be configured with a route rule API and in",
    "start": "1328600",
    "end": "1336679"
  },
  {
    "text": "this example we have a HTTP route and it defines two different route rules with",
    "start": "1336679",
    "end": "1342360"
  },
  {
    "text": "different paths for the bar and each rout rule has its own session",
    "start": "1342360",
    "end": "1347480"
  },
  {
    "text": "persistance configuration ations and they are both direct traffic to the S",
    "start": "1347480",
    "end": "1353080"
  },
  {
    "text": "bag so in this case do the two route rules referencing the sbag and service",
    "start": "1353080",
    "end": "1358760"
  },
  {
    "text": "share one persistent session the answer is no um each route rule should have its",
    "start": "1358760",
    "end": "1365799"
  },
  {
    "text": "own persistent session and the persistent session shouldn't be shared between these two different route",
    "start": "1365799",
    "end": "1374000"
  },
  {
    "text": "rules in scenarios involving our traffic ble session persistence impacts low",
    "start": "1374600",
    "end": "1380840"
  },
  {
    "text": "balancing after routing so when the persistent session is established and",
    "start": "1380840",
    "end": "1386520"
  },
  {
    "text": "traffic bleed is configured across Services the persistance to one single",
    "start": "1386520",
    "end": "1392080"
  },
  {
    "text": "back end should be maintained across Services as a result a persistent",
    "start": "1392080",
    "end": "1397520"
  },
  {
    "text": "session takes precedings over weights When selecting a back end in this",
    "start": "1397520",
    "end": "1403320"
  },
  {
    "text": "example we have a traffic sple configured to evenly distributed traffic to service one and service two however",
    "start": "1403320",
    "end": "1411600"
  },
  {
    "text": "persistent sessions should be maintained over the traffic SPL uh traffic split",
    "start": "1411600",
    "end": "1417799"
  },
  {
    "text": "weight so the request will be routed to the sandbag end which handled the previous request regardless of the",
    "start": "1417799",
    "end": "1425159"
  },
  {
    "text": "weight uh configuration another thing to consider when traffic split is involved op and",
    "start": "1425159",
    "end": "1432080"
  },
  {
    "text": "services should have session persistence enabled and it can be configured with",
    "start": "1432080",
    "end": "1437120"
  },
  {
    "text": "either a raw R API or attach a backend lb policy to the individual backend",
    "start": "1437120",
    "end": "1444120"
  },
  {
    "text": "Services remember that session persistence can be applied with different two different apis so you can",
    "start": "1444840",
    "end": "1451240"
  },
  {
    "text": "attach uh either you can either attach a backend lb policy to a service object or",
    "start": "1451240",
    "end": "1456960"
  },
  {
    "text": "enable it um with a inline Road rule API in this example the HTTP route has a",
    "start": "1456960",
    "end": "1464240"
  },
  {
    "text": "route rule session Precision configuration and it directs the traffic to a backend which has a back end lb",
    "start": "1464240",
    "end": "1471600"
  },
  {
    "text": "policy attached with a different session processing configuration so which configuration",
    "start": "1471600",
    "end": "1477919"
  },
  {
    "text": "should be used um for the prision session the answer is the rout rule one",
    "start": "1477919",
    "end": "1485039"
  },
  {
    "text": "um because the route rule operates at a higher level so it overrides the",
    "start": "1485039",
    "end": "1490080"
  },
  {
    "text": "configuration applied to individual backends and even if a backend has its",
    "start": "1490080",
    "end": "1495520"
  },
  {
    "text": "own policies for session persistence the inline Road rule API can override it and",
    "start": "1495520",
    "end": "1501760"
  },
  {
    "text": "this is because the road rules has a more global view and responsibility um for overall traffic",
    "start": "1501760",
    "end": "1509440"
  },
  {
    "text": "routing with these three examples that I just covered I hope it gives you a",
    "start": "1509440",
    "end": "1514520"
  },
  {
    "text": "better understanding of how the expected API behavior and um it should cover most",
    "start": "1514520",
    "end": "1520720"
  },
  {
    "text": "of the use cases in the Gap we also document um a few age cases that I don't",
    "start": "1520720",
    "end": "1528360"
  },
  {
    "text": "included here for the interest of time if you are interested in learning more details please refer to the Gap 1619 and",
    "start": "1528360",
    "end": "1536279"
  },
  {
    "text": "feedback are welcome so next I'm heading over to Grant to talk about the next",
    "start": "1536279",
    "end": "1543279"
  },
  {
    "start": "1543000",
    "end": "1620000"
  },
  {
    "text": "[Music] step all right so let's talk about how",
    "start": "1544380",
    "end": "1549600"
  },
  {
    "text": "we move forward with the skip so right now we're in a provisional State uh and our next step is get to get into",
    "start": "1549600",
    "end": "1556320"
  },
  {
    "text": "implementable uh to do this we need some general consensus on the gap which we've mostly achieved um but we're still",
    "start": "1556320",
    "end": "1562559"
  },
  {
    "text": "looking for feedback um we have one more to-do item for clarifying Behavior between the route rule in back and lb",
    "start": "1562559",
    "end": "1569440"
  },
  {
    "text": "policy API uh optionally we could go to prototyping before implementable and",
    "start": "1569440",
    "end": "1575039"
  },
  {
    "text": "this would just simply give implementations a chance to try it out before even go to experimental um and after implementable",
    "start": "1575039",
    "end": "1582760"
  },
  {
    "text": "is experimental uh which means we need to move the apis into an experimental release Channel and um during this time",
    "start": "1582760",
    "end": "1589679"
  },
  {
    "text": "it's expected that new edge cases will come up um as always and API changes are",
    "start": "1589679",
    "end": "1594720"
  },
  {
    "text": "very much possible and after experimental is standard uh we need lots of feedback",
    "start": "1594720",
    "end": "1601440"
  },
  {
    "text": "from implantations uh while we're in experimental um and we also need",
    "start": "1601440",
    "end": "1607159"
  },
  {
    "text": "performance testing for session persistency uh to be done as well uh additionally we want to get some review",
    "start": "1607159",
    "end": "1613520"
  },
  {
    "text": "from the game of folks which are leading the uh gate API and service me engra integration",
    "start": "1613520",
    "end": "1620679"
  },
  {
    "start": "1620000",
    "end": "1681000"
  },
  {
    "text": "effort so we have some open questions we still need to to answer about the skip um so one of them is session",
    "start": "1620679",
    "end": "1628200"
  },
  {
    "text": "draining uh as well as session draining timeout this is kind of an area we still need to",
    "start": "1628200",
    "end": "1633840"
  },
  {
    "text": "explore uh next currently we we don't have an API that specifies how to handle",
    "start": "1633840",
    "end": "1639360"
  },
  {
    "text": "existing cookies and by that I mean whether a Gateway should modify it",
    "start": "1639360",
    "end": "1645120"
  },
  {
    "text": "whether it should insert or whether it should uh prefix a cookie uh currently we just leave it up to the",
    "start": "1645120",
    "end": "1650279"
  },
  {
    "text": "implementations to to decide this for themselves um next there might be a",
    "start": "1650279",
    "end": "1655559"
  },
  {
    "text": "risky situation such as conflicting session persistence configurations um whereas adding a status indicator could",
    "start": "1655559",
    "end": "1662679"
  },
  {
    "text": "help uh could be helpful to end users to identify this and the question is should we leverage a status in these",
    "start": "1662679",
    "end": "1669440"
  },
  {
    "text": "situations and lastly like I mentioned in the previous slide we still have some Behavior to Define with uh route level",
    "start": "1669440",
    "end": "1675760"
  },
  {
    "text": "configuration and backend level configuration when they're both defined at the same",
    "start": "1675760",
    "end": "1681000"
  },
  {
    "text": "time all right Gina all right so that concludes um our today's discussion on",
    "start": "1681000",
    "end": "1686880"
  },
  {
    "text": "our path to implementation persistence in the Gateway API and we love to get some help and feedback on the current",
    "start": "1686880",
    "end": "1693519"
  },
  {
    "text": "design and you can find it at the short link at top and we have a weekly Community meetings on Mondays GMA",
    "start": "1693519",
    "end": "1700200"
  },
  {
    "text": "meetings on Tuesday Co jams on Friday all contributors are welcome from all backgrounds and you can join our",
    "start": "1700200",
    "end": "1707039"
  },
  {
    "text": "community Zoom call and and send messages on the stack channel so we have a few minutes for",
    "start": "1707039",
    "end": "1716600"
  },
  {
    "start": "1712000",
    "end": "2086000"
  },
  {
    "text": "[Applause] questions oh we have a question here and you will be the next one yeah is there I",
    "start": "1721920",
    "end": "1727760"
  },
  {
    "text": "think there's a mic should be okay he's",
    "start": "1727760",
    "end": "1732919"
  },
  {
    "text": "coming and the first one yeah thanks for great performance my question is related",
    "start": "1735640",
    "end": "1740760"
  },
  {
    "text": "to the genus part about the priority of",
    "start": "1740760",
    "end": "1746320"
  },
  {
    "text": "and the Precedence like when we have several versions of our applications and",
    "start": "1746320",
    "end": "1751360"
  },
  {
    "text": "when we have to decide if we apply the policy uh splitting first or the waiting",
    "start": "1751360",
    "end": "1759799"
  },
  {
    "text": "policy first uh from what I see uh we have in our company we use the same",
    "start": "1759799",
    "end": "1767559"
  },
  {
    "text": "strategy that you suggest to use yeah but our users our developers say us that",
    "start": "1767559",
    "end": "1774880"
  },
  {
    "text": "some sometimes they need to split the traffic according the weight firstly and",
    "start": "1774880",
    "end": "1781600"
  },
  {
    "text": "then apply these uh Affinity or yeah policy but sometimes they need",
    "start": "1781600",
    "end": "1788799"
  },
  {
    "text": "the other way and we decided that we should give them the opportunity to",
    "start": "1788799",
    "end": "1794399"
  },
  {
    "text": "configure that in manifest have you considered something like that yeah thanks for",
    "start": "1794399",
    "end": "1800919"
  },
  {
    "text": "thanks for the question this is definitely a good question um as you mention best case scenario like we have",
    "start": "1800919",
    "end": "1807799"
  },
  {
    "text": "session persistance enable the cowo the service back end um but it's not",
    "start": "1807799",
    "end": "1813399"
  },
  {
    "text": "necessary to be a hard requirement um for enging session persistence especially during migration",
    "start": "1813399",
    "end": "1819919"
  },
  {
    "text": "where some Services may have session persistent Ena some may not so um we",
    "start": "1819919",
    "end": "1825559"
  },
  {
    "text": "actually had some discussions on this while we are putting together the design",
    "start": "1825559",
    "end": "1831120"
  },
  {
    "text": "and we came up with three different ideas and um we decided to let each",
    "start": "1831120",
    "end": "1836399"
  },
  {
    "text": "implementation to decide what Behavior makes sense for their users um we also",
    "start": "1836399",
    "end": "1841559"
  },
  {
    "text": "have the three options documented in the Gap 1619 the first one is um you can if",
    "start": "1841559",
    "end": "1848279"
  },
  {
    "text": "you you're seeing like some of the services have this enabl some are not then you can decide if you want to",
    "start": "1848279",
    "end": "1855799"
  },
  {
    "text": "reject the policy that's one of the options the other one the second one is you can",
    "start": "1855799",
    "end": "1861200"
  },
  {
    "text": "just apply session persistence to the surface object that they configured um",
    "start": "1861200",
    "end": "1867240"
  },
  {
    "text": "but as a result old the traffic might be um directing where routed to the S Bon",
    "start": "1867240",
    "end": "1873639"
  },
  {
    "text": "where with two the back ends with the session persistance enabled and that needs to be carefully handed so on my",
    "start": "1873639",
    "end": "1880360"
  },
  {
    "text": "team on the Google side JPC route we actually prefer the third option which is like we automatically enable session",
    "start": "1880360",
    "end": "1887440"
  },
  {
    "text": "prist across all the services involving the traffic split um within that makes",
    "start": "1887440",
    "end": "1893200"
  },
  {
    "text": "sense to make sure like your services are not overloaded and um hopefully this",
    "start": "1893200",
    "end": "1898240"
  },
  {
    "text": "may not have any side effect or reactive impact to your applications so like I said um this may only happen during the",
    "start": "1898240",
    "end": "1906080"
  },
  {
    "text": "migration cases or a migration time frame so we hope this is a use uh this",
    "start": "1906080",
    "end": "1912919"
  },
  {
    "text": "is a age case um that we can let the user to decide and um we also think it",
    "start": "1912919",
    "end": "1919279"
  },
  {
    "text": "might be reasonable to have each each implementation decide what Behavior they would",
    "start": "1919279",
    "end": "1925039"
  },
  {
    "text": "prefer okay any other question we have one more question",
    "start": "1925039",
    "end": "1932278"
  },
  {
    "text": "here yeah thank you both uh just a quick question if I want to like you you",
    "start": "1933840",
    "end": "1939399"
  },
  {
    "text": "mentioned that the hbr back in uh HB take precedence on backend policy right so if I want to let's say I have a",
    "start": "1939399",
    "end": "1946320"
  },
  {
    "text": "backend policy but I want to exempt one route so is there like can I somehow set",
    "start": "1946320",
    "end": "1951440"
  },
  {
    "text": "on HP route level like this is false so then like one route is Exempted from",
    "start": "1951440",
    "end": "1956720"
  },
  {
    "text": "from the cookies so currently session persistant can be enabled at two",
    "start": "1956720",
    "end": "1962279"
  },
  {
    "text": "different level one is using the backend lb policy applying for the service object the other option that you have is",
    "start": "1962279",
    "end": "1969320"
  },
  {
    "text": "doing that at the road R level um that should be included in the HTTP route and we also thinking about the third option",
    "start": "1969320",
    "end": "1976320"
  },
  {
    "text": "which is exactly what you mentioned at the route level um but that's sort of like one of the open question or pending",
    "start": "1976320",
    "end": "1982880"
  },
  {
    "text": "item that um we haven't explored much um but we think there is a possibility",
    "start": "1982880",
    "end": "1988080"
  },
  {
    "text": "there no but my understanding it is already available in the route level right HTTP route level HTP route but it",
    "start": "1988080",
    "end": "1995320"
  },
  {
    "text": "that's inside of the route rule so in the HTP route spe there are several but so my question is like if I",
    "start": "1995320",
    "end": "2003000"
  },
  {
    "text": "have like let's say I want to slash I don't know SL example to be Exempted",
    "start": "2003000",
    "end": "2008559"
  },
  {
    "text": "from persistence so I have a backend policy on my service my service exports",
    "start": "2008559",
    "end": "2014639"
  },
  {
    "text": "a lot of routes but one of them is SL example so I want SL example to only be Exempted so I was wondering if if this",
    "start": "2014639",
    "end": "2021840"
  },
  {
    "text": "is like something I can do like session persistance false for this route oh yeah",
    "start": "2021840",
    "end": "2026960"
  },
  {
    "text": "I I don't think we currently have a design for that that's an interesting news case I think the answer would be to",
    "start": "2026960",
    "end": "2033120"
  },
  {
    "text": "use all route all routes and yeah don't just back policy but then like you know I have I don't know like two",
    "start": "2033120",
    "end": "2039360"
  },
  {
    "text": "implementations in the cluster so then I like I need to do like you know do a lot of uh yeah it's hard it's it's it's it's",
    "start": "2039360",
    "end": "2047240"
  },
  {
    "text": "tedious is that what you're saying yeah yeah we should uh yeah we can talk after",
    "start": "2047240",
    "end": "2052520"
  },
  {
    "text": "I think that's an interesting use case and maybe document that see if there's a solution there yeah no worri yeah thanks",
    "start": "2052520",
    "end": "2057679"
  },
  {
    "text": "for the presentation thanks for bring this up um I think we are at time we can",
    "start": "2057679",
    "end": "2063040"
  },
  {
    "text": "certainly discuss more offline and um thank you all for your time and",
    "start": "2063040",
    "end": "2068480"
  },
  {
    "text": "attention we would like to hear your feedback and about session persistance and you we can always find our proposal",
    "start": "2068480",
    "end": "2075440"
  },
  {
    "text": "at the show link on the screen and um we appreciate if you have a minute if you",
    "start": "2075440",
    "end": "2080720"
  },
  {
    "text": "have a few minutes to leave us um some feedback about this talk thank you thank you everyone",
    "start": "2080720",
    "end": "2088480"
  }
]