[
  {
    "text": "okay let's get started i'd like to welcome everyone for joining us for today's cncf webinar fmrl.run",
    "start": "10400",
    "end": "18320"
  },
  {
    "text": "a full application environment for every pr before you merge to master",
    "start": "18320",
    "end": "23680"
  },
  {
    "text": "i'm jerry fallon and i will be moderating today's webinar we'd like to welcome our presenters vishal biani cto at infocrop",
    "start": "23680",
    "end": "31679"
  },
  {
    "text": "in infra cloud and general sphero staff software engineer of engineering operations at opengov",
    "start": "31679",
    "end": "38640"
  },
  {
    "text": "just a few housekeeping items before we get started during the webinar you are not able to talk as an attendee there is a q a box",
    "start": "38640",
    "end": "44800"
  },
  {
    "text": "at the bottom of your screen so please feel free to drop your questions in there and we'll get to as many as we can at the end",
    "start": "44800",
    "end": "50160"
  },
  {
    "text": "this is an official webinar of the cncf and as such is subject to the cncf code of conduct",
    "start": "50160",
    "end": "55280"
  },
  {
    "text": "please do not add anything to the chatter questions that are in violation of the code of conduct please be respectful of your fellow",
    "start": "55280",
    "end": "61199"
  },
  {
    "text": "participants and presenters please also note that the recording and slides will be posted later today to the",
    "start": "61199",
    "end": "66880"
  },
  {
    "text": "cncf webinar page at cncf dot io webinars and with that i will hand it",
    "start": "66880",
    "end": "72240"
  },
  {
    "text": "over to vishal and jono for today's presentation hey everyone by the way i just wanted to",
    "start": "72240",
    "end": "79200"
  },
  {
    "text": "add a small uh change to our tagline it's now before you merge to main we're no longer going with",
    "start": "79200",
    "end": "86400"
  },
  {
    "text": "master cool",
    "start": "86400",
    "end": "92399"
  },
  {
    "text": "all right uh welcome everyone to the talk and demo on ephemeral.com",
    "start": "93360",
    "end": "100400"
  },
  {
    "text": "so quick introductions my name is vishal i am cto and founder of infected technologies mostly interested in",
    "start": "100400",
    "end": "106960"
  },
  {
    "text": "kubernetes serverless and making kubernetes easier for developers and enterprises",
    "start": "106960",
    "end": "115040"
  },
  {
    "text": "and i'm jonna i work on the engineering operations team at opengov and my focus for the last few",
    "start": "115040",
    "end": "120159"
  },
  {
    "text": "years has been on developer experience productivity tooling and automation so let's take a look at the agenda",
    "start": "120159",
    "end": "129119"
  },
  {
    "text": "i'll give you a moment to review it there will be plenty of time for questions at the end",
    "start": "129119",
    "end": "136000"
  },
  {
    "text": "all right so who needs an ephemeral environment an ephemeral environment is one which is",
    "start": "140080",
    "end": "145680"
  },
  {
    "text": "brought up as quickly as it can be destroyed and they're purpose built for development and testing they're usually miniature versions of integration",
    "start": "145680",
    "end": "152400"
  },
  {
    "text": "or production as a developer or quality engineer you want to be able to spin up a whole",
    "start": "152400",
    "end": "157599"
  },
  {
    "text": "environment on kubernetes run all your tests and be sure your code is golden before you merge",
    "start": "157599",
    "end": "162959"
  },
  {
    "text": "to the main branch or go to production ideally at least as the operations team you want to be",
    "start": "162959",
    "end": "168560"
  },
  {
    "text": "able to provide your organization with cost-effective easy to manage right-sized micro environments",
    "start": "168560",
    "end": "174239"
  },
  {
    "text": "there are many use cases for ephemeral environments including mixed local to remote development and debugging with personal",
    "start": "174239",
    "end": "180480"
  },
  {
    "text": "environments ideally one per branch integration regression automation and manual testing",
    "start": "180480",
    "end": "186800"
  },
  {
    "text": "early feedback from design and product teams running your ci tests inside real-ish",
    "start": "186800",
    "end": "192000"
  },
  {
    "text": "systems instead of mocks so let's talk about the development life cycle and then we'll go over the criteria by",
    "start": "192000",
    "end": "198400"
  },
  {
    "text": "which we selected technology to build ephemeral environments",
    "start": "198400",
    "end": "203200"
  },
  {
    "text": "developers spend most of their lives within the inner loop of development make a change build deploy test for pe",
    "start": "204319",
    "end": "212000"
  },
  {
    "text": "we want this loop to be as fast as possible spending most of our time iterating not waiting our test should be as",
    "start": "212000",
    "end": "217519"
  },
  {
    "text": "realistic and close to production as possible so that after we commit merge and release we don't have to come back and",
    "start": "217519",
    "end": "224080"
  },
  {
    "text": "fix issues that were missed during development in the inner loop we use ides and text editors debuggers",
    "start": "224080",
    "end": "231120"
  },
  {
    "text": "unit tests but there aren't as many solutions to testing our changes as we'd like and every team and company has different",
    "start": "231120",
    "end": "237280"
  },
  {
    "text": "needs we tend to hack things together that aren't reflective of production",
    "start": "237280",
    "end": "242400"
  },
  {
    "text": "just enough to load localhost 8080 and get our work done for instance",
    "start": "242400",
    "end": "247680"
  },
  {
    "text": "docker compose make files or complex runners in our ides",
    "start": "247680",
    "end": "253280"
  },
  {
    "text": "our support teams of qa product design and our peers excitedly but nervously",
    "start": "253280",
    "end": "259680"
  },
  {
    "text": "wait for us to come up for air in the outer loop ready to test our new code get it to production as quickly and",
    "start": "259680",
    "end": "265840"
  },
  {
    "text": "defect free as possible every defect is another iteration of the inner loop",
    "start": "265840",
    "end": "271680"
  },
  {
    "text": "we want to avoid these context switches as much as possible and while bugs are inevitable when we",
    "start": "271680",
    "end": "278080"
  },
  {
    "text": "discover them is in our control the worst case is for a customer to report a defect",
    "start": "278080",
    "end": "283199"
  },
  {
    "text": "so we want to left shift the when as much as possible we want to fail fast and fail early",
    "start": "283199",
    "end": "289440"
  },
  {
    "text": "at the extreme left developers often pair up uh paired to catch issues as they're",
    "start": "289440",
    "end": "294680"
  },
  {
    "text": "created what we need are production reflective development and testing environments that are fast",
    "start": "294680",
    "end": "300720"
  },
  {
    "text": "easy and useful as early as possible",
    "start": "300720",
    "end": "305919"
  },
  {
    "text": "now that we know what we want how do we pick a technology",
    "start": "308400",
    "end": "312720"
  },
  {
    "text": "can your company afford to set up an entire cluster for each engineer that may not",
    "start": "313840",
    "end": "319600"
  },
  {
    "text": "be too hard if you can afford it but it's either very hard and or you absolutely cannot afford it so you need",
    "start": "319600",
    "end": "326800"
  },
  {
    "text": "a simplification is the solution convenient while",
    "start": "326800",
    "end": "332479"
  },
  {
    "text": "midnicube is cheap and somewhat convenient it has no ability to branch your infrastructure",
    "start": "332479",
    "end": "337520"
  },
  {
    "text": "like you wish it could if it worked like git you can't test new helm charts without impacting or compromising",
    "start": "337520",
    "end": "343680"
  },
  {
    "text": "other work you're doing you can't reset to head and start over quickly if you mess up",
    "start": "343680",
    "end": "349199"
  },
  {
    "text": "you can't switch branches and easily redeploy the changes you probably don't even have a powerful",
    "start": "349199",
    "end": "354240"
  },
  {
    "text": "enough laptop to run your cluster and your development tools at the same time let alone a web browser",
    "start": "354240",
    "end": "361759"
  },
  {
    "text": "does everyone on your team understand cube ctl can they use minicube maybe your developers do",
    "start": "363600",
    "end": "369600"
  },
  {
    "text": "but probably not well enough to stand up everything and in any given situ uh solution is",
    "start": "369600",
    "end": "375360"
  },
  {
    "text": "your ops team matured and experienced enough to manage ephemeral or shared environments probably not",
    "start": "375360",
    "end": "383759"
  },
  {
    "text": "is the solution reflective of production can you certify a release with it what's data is it seated with is it",
    "start": "384479",
    "end": "391520"
  },
  {
    "text": "repeatable and can your team bring it up without knowing how it's built faking kubernetes with pure container",
    "start": "391520",
    "end": "397440"
  },
  {
    "text": "solutions like docker compose swarm or ansible or chef isn't",
    "start": "397440",
    "end": "402720"
  },
  {
    "text": "really enough and it's not real enough and finally can you share new features",
    "start": "402720",
    "end": "409120"
  },
  {
    "text": "with the designer product teams or prospective customers before the code is merged",
    "start": "409120",
    "end": "414400"
  },
  {
    "text": "and released most if not all existing solutions don't stack up well in all of the areas",
    "start": "414400",
    "end": "421360"
  },
  {
    "text": "that's our challenge so what are our options",
    "start": "421360",
    "end": "426400"
  },
  {
    "text": "now since everything in kubernetes must be nautically themed by law",
    "start": "426960",
    "end": "432720"
  },
  {
    "text": "production is a battle group it's a massively impossibly expensive fleet of services",
    "start": "432720",
    "end": "439360"
  },
  {
    "text": "requiring full-time highly trained operational crews they're deployed in a protected secret or otherwise",
    "start": "439360",
    "end": "445360"
  },
  {
    "text": "inconvenient vpn location and the fleet composition are decided months or years ahead and",
    "start": "445360",
    "end": "451840"
  },
  {
    "text": "cannot change easily as the most interesting man in the world once said i don't always test my code",
    "start": "451840",
    "end": "458160"
  },
  {
    "text": "but when i do i do it in production let's let's not do that anymore",
    "start": "458160",
    "end": "465840"
  },
  {
    "text": "existing solutions are sailing vessels for instance scaffold garden microsoft draft they're bespoke",
    "start": "468000",
    "end": "475039"
  },
  {
    "text": "and don't tend to share reusable parts or designs with each other nor your production fleet they're",
    "start": "475039",
    "end": "480319"
  },
  {
    "text": "difficult to build expensive to maintain slow to turn and require extensive training and manual",
    "start": "480319",
    "end": "486400"
  },
  {
    "text": "operation to be proficient at running them i've been on many and while they share the principles of wind",
    "start": "486400",
    "end": "492000"
  },
  {
    "text": "tiller and sail many if not most of the other design features are unique to each",
    "start": "492000",
    "end": "499199"
  },
  {
    "text": "where we're going we want speed boats speed boats are generally cheap at least",
    "start": "501039",
    "end": "506240"
  },
  {
    "text": "by comparison or they're rentable by the hour so everyone can share a small fleet or have",
    "start": "506240",
    "end": "511440"
  },
  {
    "text": "their own they're fast to deploy change directions quickly and require almost no training or skill",
    "start": "511440",
    "end": "517599"
  },
  {
    "text": "to operate if you've played grand theft auto at least and yet",
    "start": "517599",
    "end": "522719"
  },
  {
    "text": "they operate on the same principles as our battleship fuel engine and propeller so they're actually",
    "start": "522719",
    "end": "529279"
  },
  {
    "text": "reflective of production unlike say a simulation on sailing running a",
    "start": "529279",
    "end": "534720"
  },
  {
    "text": "docker or a book on how to sail written by chef ansible",
    "start": "534720",
    "end": "540560"
  },
  {
    "text": "and yeah i grew up bouncing in the round i i grew up bouncing around in the back of this one uh it was loud wet and i cried",
    "start": "540560",
    "end": "548480"
  },
  {
    "text": "every time but i loved it or so my dad tells me",
    "start": "548480",
    "end": "553920"
  },
  {
    "text": "ephemeral.run is our speedboat and vishal will now share how we designed and built it",
    "start": "553920",
    "end": "562399"
  },
  {
    "text": "cool thank you jenna all right so as we were talking earlier scaffolding",
    "start": "562399",
    "end": "568080"
  },
  {
    "text": "is just one part of the puzzle uh it doesn't solve the entire problem so to speak and we'll look at",
    "start": "568080",
    "end": "574560"
  },
  {
    "text": "how we design and build the solution end-to-end so what we do is uh there are a few",
    "start": "574560",
    "end": "581279"
  },
  {
    "text": "components beyond the scaffolding and i'll explain the inner loop and the outer loop and the working of both the components",
    "start": "581279",
    "end": "587440"
  },
  {
    "text": "we'll talk about how do we integrate external systems like uh maybe sas based logging platform or a sas",
    "start": "587440",
    "end": "593839"
  },
  {
    "text": "based iam platform and even use services like s3 or r53 effectively",
    "start": "593839",
    "end": "600560"
  },
  {
    "text": "so as an inner loop what developer does is from his own machine runs ephemeral",
    "start": "600880",
    "end": "605920"
  },
  {
    "text": "run or ephemeral dev if he wants like a real-time feedback and that creates an entire namespace",
    "start": "605920",
    "end": "612160"
  },
  {
    "text": "along with his changes along with rest of the stable services in the real cluster now once it deployed in the cluster uh",
    "start": "612160",
    "end": "618079"
  },
  {
    "text": "and you get its own small name space within the cluster you can actually integrate with things like route 53 or s3 bucket",
    "start": "618079",
    "end": "624079"
  },
  {
    "text": "or external logging platform or you know anything else the tools we use primarily here of",
    "start": "624079",
    "end": "629200"
  },
  {
    "text": "course are scaffold and help but it gives you a good running environment which is pretty close to production as it can be",
    "start": "629200",
    "end": "635519"
  },
  {
    "text": "moving on to the outer loop which is what we're going to demo today and talk a little more in detail in a few slides and the demo as soon as",
    "start": "635519",
    "end": "642640"
  },
  {
    "text": "the developer is happy with his own changes on his local machine that person can raise a pr and once the",
    "start": "642640",
    "end": "648480"
  },
  {
    "text": "pr is raised within that pr either the developer or a product manager or a qat member",
    "start": "648480",
    "end": "653839"
  },
  {
    "text": "can actually use that pr to deploy those changes with rest of the stable you know services so it's like i change",
    "start": "653839",
    "end": "660880"
  },
  {
    "text": "my own micro service but i also want to use other micro services which are tagged at a specific version now by",
    "start": "660880",
    "end": "666640"
  },
  {
    "text": "doing this again you get a pretty realistic environment where you can use and test along side something like aws",
    "start": "666640",
    "end": "672640"
  },
  {
    "text": "certificate manager or a logging platform or a in platform which may not be possible on the local",
    "start": "672640",
    "end": "677760"
  },
  {
    "text": "machine or you will try to mark it but it's not still perfect now to enable these things we do a",
    "start": "677760",
    "end": "684640"
  },
  {
    "text": "couple of things the first thing is the cost control so for all of the things that are deployed in the ephemeral",
    "start": "684640",
    "end": "690240"
  },
  {
    "text": "run environment we use spot instances that means uh we're not spending a fortune on you",
    "start": "690240",
    "end": "695440"
  },
  {
    "text": "know provisioning the instances on demand or keeping them alive you know beyond beyond their life cycle",
    "start": "695440",
    "end": "701760"
  },
  {
    "text": "the second aspect is ttl so every environment that comes up either comes up with a default tdl policy",
    "start": "701760",
    "end": "706800"
  },
  {
    "text": "or you as an team can override the policy and say i need this environment for slightly longer duration that means the environments are cleaned",
    "start": "706800",
    "end": "713120"
  },
  {
    "text": "up as they are expiring their tpl policies",
    "start": "713120",
    "end": "718320"
  },
  {
    "text": "the last part is auto scaling so if you don't have any cluster or any ephemeral environments running",
    "start": "718320",
    "end": "723360"
  },
  {
    "text": "you're not consuming any capacity and only when you're running a fundraising environment",
    "start": "723360",
    "end": "729040"
  },
  {
    "text": "that's that's when only you add the actual capacity the second aspect",
    "start": "729040",
    "end": "735360"
  },
  {
    "text": "integrating with third-party systems for example sumo logic or similar services as i mentioned earlier",
    "start": "735680",
    "end": "741519"
  },
  {
    "text": "you don't want to mock these and it's not perfect to test without these as well",
    "start": "741519",
    "end": "747120"
  },
  {
    "text": "experience as you can in a real environment lastly want to also monitor",
    "start": "748480",
    "end": "754000"
  },
  {
    "text": "your ephemeral environments which are deployed how they are doing are they created deleted and stuff like that",
    "start": "754000",
    "end": "759040"
  },
  {
    "text": "and we use botqueue for that so botcube allows you for your specific teams to get notification of a",
    "start": "759040",
    "end": "766160"
  },
  {
    "text": "fml environment created deleted or being deleted you know before it gets deleted",
    "start": "766160",
    "end": "773839"
  },
  {
    "text": "we're going to demo just want to quickly talk about pictures so you understand uh you know",
    "start": "774959",
    "end": "780160"
  },
  {
    "text": "what we are showing here so i have a repository called frontend uh front end for a sock",
    "start": "780160",
    "end": "785519"
  },
  {
    "text": "shop and it has a bunch of back-end services for our demo we won't really change the back-end services we'll only",
    "start": "785519",
    "end": "790880"
  },
  {
    "text": "change the front-end service as soon as i change the service it'll kick off a",
    "start": "790880",
    "end": "796720"
  },
  {
    "text": "docker image build uh then i actually tagged the for a",
    "start": "796720",
    "end": "803279"
  },
  {
    "text": "thumbnail deploy i tagged the pr for fml deploy that sends an event to",
    "start": "803279",
    "end": "809680"
  },
  {
    "text": "the actual thermal run repository uh which in turn talks to the actual ephemeral run platform now what it does is it picks up the",
    "start": "809680",
    "end": "815680"
  },
  {
    "text": "latest image from the content repository and then plays that with the rest of the backend services to the cluster",
    "start": "815680",
    "end": "821680"
  },
  {
    "text": "and once the actual environment is running it gives me back the url on which i can test i can get some more",
    "start": "821680",
    "end": "828240"
  },
  {
    "text": "details and then eventually after the ttl it will delete the environment",
    "start": "828240",
    "end": "834480"
  },
  {
    "text": "let me now uh go back to so these are the two ripples the front-end repo is where",
    "start": "834480",
    "end": "839920"
  },
  {
    "text": "is the front-end service which you are going to modify and test out today the ephemeral run repo is the repository",
    "start": "839920",
    "end": "845199"
  },
  {
    "text": "in which all of the platform code and the scaffolding and helm and everything you know is housed so that it",
    "start": "845199",
    "end": "851600"
  },
  {
    "text": "can talk to a cluster and orchestrate the end-to-end process now before i actually go and do that let",
    "start": "851600",
    "end": "857920"
  },
  {
    "text": "me show you that right now i'm having only two nodes in my cluster as you can see one of them is on demand",
    "start": "857920",
    "end": "863279"
  },
  {
    "text": "which actually houses the platform or ephemeral run platform and the second is a spot instance",
    "start": "863279",
    "end": "868720"
  },
  {
    "text": "because i have already one environment running in my cluster as i add a new environment uh you will see one more par or one more",
    "start": "868720",
    "end": "875199"
  },
  {
    "text": "node getting provisioned on the fly all right so let's go to the front end repository uh",
    "start": "875199",
    "end": "880880"
  },
  {
    "text": "oh before i go there let me show you a previous early deployed application and how it looks like so this is a",
    "start": "880880",
    "end": "888000"
  },
  {
    "text": "previous change that has been deployed it's up and running and as a chain what i want to do is instead of using this",
    "start": "888000",
    "end": "894079"
  },
  {
    "text": "price check algorithm which is trained with you know monkeys at the at the office i want to use a machine learning",
    "start": "894079",
    "end": "900320"
  },
  {
    "text": "algorithm based on blockchain let's say the most fanciest of all technologies in the world so let me go ahead and change uh that in",
    "start": "900320",
    "end": "907360"
  },
  {
    "text": "the code and then we'll see how that rolls out in the real environment",
    "start": "907360",
    "end": "914560"
  },
  {
    "text": "yeah it turned out that it was better for our fundraising to uh to add it",
    "start": "914560",
    "end": "922399"
  },
  {
    "text": "right we press check your socks with",
    "start": "924839",
    "end": "929680"
  },
  {
    "text": "[Music] all right that's all the change and that's all we need to raise our next",
    "start": "937180",
    "end": "943839"
  },
  {
    "text": "round of funding i believe so i'm going to clear appear out of that",
    "start": "943839",
    "end": "955839"
  },
  {
    "text": "so i propose a change now as soon as i raise a pr uh we will",
    "start": "956160",
    "end": "962240"
  },
  {
    "text": "see the bill getting kicked off which will create a docker image now before we actually deploy to the cluster",
    "start": "962240",
    "end": "968240"
  },
  {
    "text": "we will of course need the image because if the image is not ready we can't really pull the image and deploy to the cluster",
    "start": "968240",
    "end": "975199"
  },
  {
    "text": "and now what are the things i'm sorry john one of the things uh that",
    "start": "975680",
    "end": "982000"
  },
  {
    "text": "ephemeral.run does is you know you're gonna have more than one service that you're testing it's you're gonna have maybe dozens of",
    "start": "982000",
    "end": "988240"
  },
  {
    "text": "services so your pr is gonna build a subset of them",
    "start": "988240",
    "end": "993279"
  },
  {
    "text": "zero or more right it's we have to wait for the build uh it'll get pushed and it'll get tagged",
    "start": "993279",
    "end": "1000240"
  },
  {
    "text": "and pushed to our uh registry and then ephemeral run is going to check there to see",
    "start": "1000240",
    "end": "1005759"
  },
  {
    "text": "is there a service built for this pr for this service if there is it's going to prioritize",
    "start": "1005759",
    "end": "1011839"
  },
  {
    "text": "that one and that's what we're going to launch with that's how we get our changes in if not it's going to use one from our",
    "start": "1011839",
    "end": "1018000"
  },
  {
    "text": "baseline in this case the main branch or it could be latest",
    "start": "1018000",
    "end": "1025839"
  },
  {
    "text": "we tend to prefer uh tags with the name of the branch on them since they're not ambiguous",
    "start": "1026079",
    "end": "1033679"
  },
  {
    "text": "right so the build is finished and i want to deploy this change with the rest of the services so",
    "start": "1035039",
    "end": "1040558"
  },
  {
    "text": "what i'm going to do is i'm simply add a label for ephemeral apply",
    "start": "1040559",
    "end": "1046400"
  },
  {
    "text": "and our ephemeral run bot should respond to us in a minute or so",
    "start": "1049760",
    "end": "1056159"
  },
  {
    "text": "so what's happening right now is uh github actions has picked up",
    "start": "1065120",
    "end": "1071919"
  },
  {
    "text": "uh our label change and it has dispatched a request to the ephemeral.run repo you could just",
    "start": "1071919",
    "end": "1078400"
  },
  {
    "text": "think of it as the main or central repo um it doesn't really have any code in it",
    "start": "1078400",
    "end": "1083679"
  },
  {
    "text": "it has the configuration for all of our services and uh that repo is actually going to",
    "start": "1083679",
    "end": "1088960"
  },
  {
    "text": "receive the request and it's going to start putting together uh our cluster well technically our",
    "start": "1088960",
    "end": "1094799"
  },
  {
    "text": "namespace the cluster is already running right and as you can see it has already dispointed with uh",
    "start": "1094799",
    "end": "1102000"
  },
  {
    "text": "the the status and the link to the actual job which does uh the deployment i also want to show",
    "start": "1102000",
    "end": "1108559"
  },
  {
    "text": "you uh while we are waiting on that uh we will look at the nodes and there are two nodes right now and",
    "start": "1108559",
    "end": "1115360"
  },
  {
    "text": "there are uh these many name spaces one of which belongs to the previous uh",
    "start": "1115360",
    "end": "1120559"
  },
  {
    "text": "environment which is running and we'll watch you know as the build kind of progresses",
    "start": "1120559",
    "end": "1126400"
  },
  {
    "text": "on the github actions we will see uh more parts uh or rather first name specificated and",
    "start": "1126400",
    "end": "1133039"
  },
  {
    "text": "then uh oh right there so we can already see that a namespace has been created",
    "start": "1133039",
    "end": "1140320"
  },
  {
    "text": "and i'm gonna watch the parts in that namespace uh and also uh nodes at the same time",
    "start": "1140320",
    "end": "1146880"
  },
  {
    "text": "uh still working on that i believe",
    "start": "1146880",
    "end": "1151840"
  },
  {
    "text": "that's interesting you type nine and it's showing eight is that look at the error from server",
    "start": "1152160",
    "end": "1159520"
  },
  {
    "text": "not found end dash eight and you're typing nine",
    "start": "1159520",
    "end": "1165840"
  },
  {
    "text": "uh we can uh we can see this also in slack uh from bot cube all right show the new",
    "start": "1166160",
    "end": "1172080"
  },
  {
    "text": "environment yes there it is uh i can see a new namespace has been created",
    "start": "1172080",
    "end": "1179840"
  },
  {
    "text": "it's a little concerning when the source of truth is a slack channel and a bot and not keep ctl but you know",
    "start": "1179919",
    "end": "1185760"
  },
  {
    "text": "we'll roll with it",
    "start": "1185760",
    "end": "1193840"
  },
  {
    "text": "so what we're doing is we're putting we're putting everything into one namespace this even works for teams that have",
    "start": "1195679",
    "end": "1201760"
  },
  {
    "text": "their services across multiple namespaces as long as you don't have any overlap um at opengov we actually",
    "start": "1201760",
    "end": "1210159"
  },
  {
    "text": "have lots of different namespaces but we had no trouble moving everybody into the same one for the purpose of these",
    "start": "1210159",
    "end": "1218320"
  },
  {
    "text": "environments yeah so as we can notice uh it first",
    "start": "1218840",
    "end": "1224000"
  },
  {
    "text": "deployed the entire application along with our change front-end service and initially they went in the pending",
    "start": "1224000",
    "end": "1229919"
  },
  {
    "text": "state and that probably kicked off adding a new node to the cluster so we had 110 and 252",
    "start": "1229919",
    "end": "1236080"
  },
  {
    "text": "and then we see 130 getting added so net we have now three nodes uh the additional node is ephemeral or",
    "start": "1236080",
    "end": "1242320"
  },
  {
    "text": "on the spot instance and this should be running in probably another",
    "start": "1242320",
    "end": "1247520"
  },
  {
    "text": "20 seconds or so maximum and so should our job kind of get",
    "start": "1247520",
    "end": "1253440"
  },
  {
    "text": "finished around the same time",
    "start": "1253440",
    "end": "1262080"
  },
  {
    "text": "and just to verify the front-end service that we deployed is the latest one i just want to describe and quickly check",
    "start": "1262080",
    "end": "1268320"
  },
  {
    "text": "it out",
    "start": "1268320",
    "end": "1277520"
  },
  {
    "text": "right yeah we can see the pr9 tagged with the image",
    "start": "1277520",
    "end": "1282799"
  },
  {
    "text": "let me go back to the job and see how it is doing and once the job itself is finished we",
    "start": "1285120",
    "end": "1290960"
  },
  {
    "text": "should see on this we are the details of the latest environment that is ready for",
    "start": "1290960",
    "end": "1299200"
  },
  {
    "text": "testing",
    "start": "1302840",
    "end": "1305840"
  },
  {
    "text": "this is actually the longest it's taken we got unlucky and needed a new node",
    "start": "1316000",
    "end": "1323360"
  },
  {
    "text": "cool so one thing to note about the comment here it looks like boilerplate but there's actually a lot of useful information in",
    "start": "1324559",
    "end": "1331200"
  },
  {
    "text": "it that's customized for your organization so we have uh information about",
    "start": "1331200",
    "end": "1336559"
  },
  {
    "text": "um bot cube we have commands uh to work with uh keep ctl",
    "start": "1336559",
    "end": "1343840"
  },
  {
    "text": "to connect to your eks cluster in this case and we even tell you which images we",
    "start": "1343840",
    "end": "1349440"
  },
  {
    "text": "used to put together uh your service in this case you can see here",
    "start": "1349440",
    "end": "1354640"
  },
  {
    "text": "opengov infracloud that's our registry frontend is the service pr9 is the tag",
    "start": "1354640",
    "end": "1361840"
  },
  {
    "text": "great let's see do we have our latest machine learning blockchain based",
    "start": "1362960",
    "end": "1368480"
  },
  {
    "text": "algorithm live there we go of course this for the purpose of demo",
    "start": "1368480",
    "end": "1375120"
  },
  {
    "text": "uh you know this was a small change that we did but in practice you can imagine as a as a developer i want to change",
    "start": "1375120",
    "end": "1381360"
  },
  {
    "text": "my services with the rest of the services with integrations and some real-time systems everything becomes so much more smoother",
    "start": "1381360",
    "end": "1387760"
  },
  {
    "text": "uh not just for developers but also for quality engineers and product managers and designers potentially",
    "start": "1387760",
    "end": "1394000"
  },
  {
    "text": "now we can update these changes very easily and relatively much more quickly should we",
    "start": "1394000",
    "end": "1400720"
  },
  {
    "text": "add an exclamation to the end of that sentence we might make it more exciting",
    "start": "1400720",
    "end": "1406400"
  },
  {
    "text": "absolutely any other buzz words come to mind",
    "start": "1406400",
    "end": "1417840"
  },
  {
    "text": "all right i'm gonna add three",
    "start": "1421600",
    "end": "1424640"
  },
  {
    "text": "three exclamations for three dollar",
    "start": "1427279",
    "end": "1430880"
  },
  {
    "text": "and while it builds the image",
    "start": "1436559",
    "end": "1440880"
  },
  {
    "text": "get it a bit yes it did so what's going to happen now is uh we're going to build we'll push the",
    "start": "1442799",
    "end": "1449360"
  },
  {
    "text": "new tag uh ephemeral run will do the exact same thing",
    "start": "1449360",
    "end": "1454720"
  },
  {
    "text": "because we are using a scaffolded part under the hood it's just it's going to",
    "start": "1454720",
    "end": "1460240"
  },
  {
    "text": "notice oh there's just a small change to the environment it'll top it up it'll update it it'll redeploy the service",
    "start": "1460240",
    "end": "1466480"
  },
  {
    "text": "and we'll uh we won't have to do anything else that we've already done",
    "start": "1466480",
    "end": "1473840"
  },
  {
    "text": "really most of the time waiting in this case is just waiting for github actions to bring up an environment",
    "start": "1477520",
    "end": "1487840"
  },
  {
    "text": "is the girlfriend is taking so much time let's see yesterday it did not actually refresh on",
    "start": "1500960",
    "end": "1506880"
  },
  {
    "text": "that page okay it'll speed through this",
    "start": "1506880",
    "end": "1514080"
  },
  {
    "text": "[Music] i'll take a little bit of slowness it is",
    "start": "1514080",
    "end": "1519200"
  },
  {
    "text": "working this is a live demo so not so bad",
    "start": "1519200",
    "end": "1525279"
  },
  {
    "text": "cool right now i removed the label uh earlier so",
    "start": "1525279",
    "end": "1531440"
  },
  {
    "text": "that i can again label it and and deploy again so i'm gonna again attach the label",
    "start": "1531440",
    "end": "1538000"
  },
  {
    "text": "this is admittedly a little bit inelegant but this is how we're using it today",
    "start": "1539039",
    "end": "1545919"
  },
  {
    "text": "now if you were going to launch these from your laptop uh you would use our command line tools",
    "start": "1552880",
    "end": "1560159"
  },
  {
    "text": "to get it going you'd be pushing the images to the registry from your laptop manually",
    "start": "1560159",
    "end": "1567360"
  },
  {
    "text": "and you'd be starting the environment from your laptop so you would you would lose a little bit of uh convenience like bot keep wouldn't",
    "start": "1567520",
    "end": "1575039"
  },
  {
    "text": "be actually bot cube would still be monitoring the environment uh but you wouldn't have",
    "start": "1575039",
    "end": "1580159"
  },
  {
    "text": "github's ui or anything to work with you would be driving it from your machine",
    "start": "1580159",
    "end": "1586320"
  },
  {
    "text": "yeah this one should take slightly almost half of the time that it took less time",
    "start": "1591600",
    "end": "1598720"
  },
  {
    "text": "now all the environments will still be adhering to your ttl so even if you run it locally no matter",
    "start": "1598720",
    "end": "1604720"
  },
  {
    "text": "where you start one from uh it's when the names it's uh we're tracking when the name space is created",
    "start": "1604720",
    "end": "1610640"
  },
  {
    "text": "for the ttl purposes it is on you to destroy it if you want early or you can just wait and it will",
    "start": "1610640",
    "end": "1616960"
  },
  {
    "text": "cycle out on its own and if we're lucky we will actually see one of our services",
    "start": "1616960",
    "end": "1623279"
  },
  {
    "text": "uh cycle out before the end of this talk",
    "start": "1623279",
    "end": "1640960"
  },
  {
    "text": "now even though this is still taking a few minutes if you think about it as a developer",
    "start": "1640960",
    "end": "1647200"
  },
  {
    "text": "uh it's short enough that you may actually still remember what you were working on by the time the environment comes up",
    "start": "1647200",
    "end": "1652960"
  },
  {
    "text": "in practice it's about you know it'll be like two or three minutes which is not so bad especially if you're",
    "start": "1652960",
    "end": "1660320"
  },
  {
    "text": "used to committing code waiting for ci to build it deploy it to a shared environment",
    "start": "1660320",
    "end": "1667760"
  },
  {
    "text": "by that time you've already forgotten what you were working on and your coffee break is over",
    "start": "1667760",
    "end": "1683840"
  },
  {
    "text": "right looks like it has respond back to the url let us see how that goes",
    "start": "1684880",
    "end": "1691360"
  },
  {
    "text": "huh something is broken again",
    "start": "1691679",
    "end": "1697840"
  },
  {
    "text": "let's see",
    "start": "1702880",
    "end": "1711360"
  },
  {
    "text": "i don't know if it is the image build policy uh on the specific helm chart journal maybe it",
    "start": "1711360",
    "end": "1716880"
  },
  {
    "text": "doesn't pull the latest image it was you know uses if not present",
    "start": "1716880",
    "end": "1722080"
  },
  {
    "text": "well it is a live demo something did have to go wrong the important part is that we did get it",
    "start": "1722080",
    "end": "1727200"
  },
  {
    "text": "working the first time um essentially though this is the update workflow uh in practice it really does uh work",
    "start": "1727200",
    "end": "1735120"
  },
  {
    "text": "the uh the main reason that we're having issues here is you know we've built a demo for you but we're actually using it for real",
    "start": "1735120",
    "end": "1742159"
  },
  {
    "text": "development in another environment and uh that gets a lot more testing",
    "start": "1742159",
    "end": "1747279"
  },
  {
    "text": "than the demo now we can tear this down by issuing one more command to it we can",
    "start": "1747279",
    "end": "1754080"
  },
  {
    "text": "do the ephemeral destroy label and within about a minute the environment will be gone",
    "start": "1754080",
    "end": "1766559"
  },
  {
    "text": "now in this case it's going to dispatch a destroy command to the ephemeral run repo",
    "start": "1766559",
    "end": "1773200"
  },
  {
    "text": "and that is going to run a scaffold destroyer delete uh",
    "start": "1773200",
    "end": "1780080"
  },
  {
    "text": "under the hood it's going to uh tear down the dns and all of the other plumbing and then",
    "start": "1780080",
    "end": "1787520"
  },
  {
    "text": "we'll get a uh confirmation both in the pr and in slackbot that the namespace has",
    "start": "1787520",
    "end": "1794559"
  },
  {
    "text": "been destroyed one thing to note uh for those that are using helm2",
    "start": "1794559",
    "end": "1800960"
  },
  {
    "text": "uh like us in this case uh cubejanitor is cleaning up our",
    "start": "1800960",
    "end": "1807760"
  },
  {
    "text": "name spaces after the ttl expires um in help 2 though",
    "start": "1807760",
    "end": "1814000"
  },
  {
    "text": "not all of the resources for your deployment are in your name space some of them some of",
    "start": "1814000",
    "end": "1819039"
  },
  {
    "text": "them are in the global name space so uh not everything gets cleaned up",
    "start": "1819039",
    "end": "1824799"
  },
  {
    "text": "uh when the environment is ttled out and you don't destroy it intentionally",
    "start": "1824799",
    "end": "1830640"
  },
  {
    "text": "um you have a little bit of trouble bringing it up later in hell three all the resources are in",
    "start": "1830640",
    "end": "1835840"
  },
  {
    "text": "your name space when it's cleaned up your deployment is cleaned up as well and helm is",
    "start": "1835840",
    "end": "1841120"
  },
  {
    "text": "uh helmets perfectly happy",
    "start": "1841120",
    "end": "1844559"
  },
  {
    "text": "it's a limitation of keep janitor and of",
    "start": "1847360",
    "end": "1851679"
  },
  {
    "text": "helm2 great and the environment has been",
    "start": "1862840",
    "end": "1869679"
  },
  {
    "text": "cleaned up now and we should have like before state before we started the demo",
    "start": "1869679",
    "end": "1875759"
  },
  {
    "text": "yep and the url should no longer work either",
    "start": "1875919",
    "end": "1881519"
  },
  {
    "text": "and uh we'll talk about um how this all went at opengov",
    "start": "1883200",
    "end": "1892960"
  },
  {
    "text": "cool that's one of those times that a 404 or a 500 error is exactly what you're looking for",
    "start": "1892960",
    "end": "1900480"
  },
  {
    "text": "all right so uh great so in 2020",
    "start": "1905200",
    "end": "1912640"
  },
  {
    "text": "open gov engineers started an average of only one legacy environment per week using chef despite there being",
    "start": "1912640",
    "end": "1918960"
  },
  {
    "text": "over 100 engineers across teams most changes could only be tested post-merge in our integration clusters",
    "start": "1918960",
    "end": "1926159"
  },
  {
    "text": "due to the inherent complexity of our polyglot microservices architecture",
    "start": "1926159",
    "end": "1932080"
  },
  {
    "text": "they were not containerized they're limited to only a few of opengov's core services none of our new application suites they",
    "start": "1932080",
    "end": "1939760"
  },
  {
    "text": "were unreliable they took hours to start and they were in no way representative of production",
    "start": "1939760",
    "end": "1945440"
  },
  {
    "text": "anymore now that we're on kubernetes at 150 per environment per day",
    "start": "1945440",
    "end": "1952640"
  },
  {
    "text": "and literally thousands of dollars in monthly fixed costs legacy environments were extremely",
    "start": "1952640",
    "end": "1959200"
  },
  {
    "text": "costly to run both in control plane compute and in snapshots as of the day we",
    "start": "1959200",
    "end": "1965120"
  },
  {
    "text": "launched ephemeral.run at opengov no one ever again started a legacy",
    "start": "1965120",
    "end": "1971919"
  },
  {
    "text": "environment now in contrast with the one environment per week per 100 person ratio before we saw",
    "start": "1974840",
    "end": "1982799"
  },
  {
    "text": "50 ephemeral run environments started in the first month by one team alone of only a dozen people",
    "start": "1982799",
    "end": "1989200"
  },
  {
    "text": "or so nearly 10x increase in usage overnight more or less",
    "start": "1989200",
    "end": "1995760"
  },
  {
    "text": "in contrast with the limited legacy environments ephemeral run starts many database types with seated",
    "start": "1996480",
    "end": "2002399"
  },
  {
    "text": "data and migrations and dozens of services comprising most of opengov's core platform at this point",
    "start": "2002399",
    "end": "2008480"
  },
  {
    "text": "and our budgeting and planning suite and they start in minutes not hours it's easy to imagine running",
    "start": "2008480",
    "end": "2015200"
  },
  {
    "text": "hundreds of environments each month once our entire organization and all services are on board",
    "start": "2015200",
    "end": "2021760"
  },
  {
    "text": "in contrast with the thousands of dollars we spent before at two hundred dollars fixed control",
    "start": "2022640",
    "end": "2028000"
  },
  {
    "text": "plane costs for eks and only fifteen dollars per environment per day",
    "start": "2028000",
    "end": "2033200"
  },
  {
    "text": "build by the minute these are dirt cheap to run compared with the cost of people",
    "start": "2033200",
    "end": "2038240"
  },
  {
    "text": "they pay for themselves quickly we haven't even begun to optimize our tooling not cost nor performance and yet our",
    "start": "2038240",
    "end": "2045760"
  },
  {
    "text": "metrics are generally about 10x better out of the gate the greatest value",
    "start": "2045760",
    "end": "2051679"
  },
  {
    "text": "in these environments are that they are representative of production and they can be used for",
    "start": "2051679",
    "end": "2057440"
  },
  {
    "text": "development debugging certification and many types of testing",
    "start": "2057440",
    "end": "2063040"
  },
  {
    "text": "before hitting the merge button our teams started finding defects almost immediately",
    "start": "2063040",
    "end": "2068720"
  },
  {
    "text": "and fixing them before they even made it to our integration environment we're planning to expand our usage of",
    "start": "2068720",
    "end": "2074878"
  },
  {
    "text": "ephemeral run for local development remote debugging load testing",
    "start": "2074879",
    "end": "2080398"
  },
  {
    "text": "automated verification in ci and even testing hotfixes in an",
    "start": "2080399",
    "end": "2086240"
  },
  {
    "text": "ephemeral copy of production",
    "start": "2086240",
    "end": "2090240"
  },
  {
    "text": "so to give you an idea of where we think this tool will take us these are the most requested features that we think have the broadest appeal a",
    "start": "2094320",
    "end": "2101680"
  },
  {
    "text": "generic fork friendly framework gives us uh a lightweight configuration",
    "start": "2101680",
    "end": "2108480"
  },
  {
    "text": "to uh instead of scaffold scaffold's powerful but it's verbose and it's really easy to mis-wire",
    "start": "2108480",
    "end": "2114320"
  },
  {
    "text": "not everyone needs that flexibility we want to be able to get you started much more quickly just by simply enumerating your services",
    "start": "2114320",
    "end": "2121040"
  },
  {
    "text": "and how they wire up to each other",
    "start": "2121040",
    "end": "2124400"
  },
  {
    "text": "a loving and proactive runbot like github's dependable we want you to interact with ephemeral run using a chat",
    "start": "2126400",
    "end": "2131520"
  },
  {
    "text": "bot instead of labels this gives a lot richer experience for the user",
    "start": "2131520",
    "end": "2137279"
  },
  {
    "text": "suspend and resume for compute this will help us save costs and avoid the dreaded ttl we'd",
    "start": "2137599",
    "end": "2143280"
  },
  {
    "text": "like you to be able to scale down your environment's compute indefinitely while retaining data",
    "start": "2143280",
    "end": "2149200"
  },
  {
    "text": "dynamic ttls on cluster resources for allow different environments to live",
    "start": "2150160",
    "end": "2155440"
  },
  {
    "text": "for different lengths of time this is especially important for global teams handling handing the environments",
    "start": "2155440",
    "end": "2161200"
  },
  {
    "text": "off to each other for testing",
    "start": "2161200",
    "end": "2164400"
  },
  {
    "text": "local to remote telepresence connects a locally running service in an ide",
    "start": "2166480",
    "end": "2171760"
  },
  {
    "text": "to a remote cluster for debugging and development [Music]",
    "start": "2171760",
    "end": "2177639"
  },
  {
    "text": "ci integration could do many things like waiting for ci to finish building your pr and its",
    "start": "2178800",
    "end": "2184640"
  },
  {
    "text": "images before starting your environment today there is a race condition when the environment is starting",
    "start": "2184640",
    "end": "2190000"
  },
  {
    "text": "to get those services into your environment or it could let you launch and manage an environment from a ci pipeline like",
    "start": "2190000",
    "end": "2198240"
  },
  {
    "text": "jenkins smarter pod scheduling helps us run the fewest number of nodes required scheduling with for instance the most",
    "start": "2198839",
    "end": "2205839"
  },
  {
    "text": "requested priority for example or other affinity tricks the default spread behavior of kubernetes",
    "start": "2205839",
    "end": "2213119"
  },
  {
    "text": "may keep many nodes scaled up for only one environment increasing the cost per environment by a lot",
    "start": "2213119",
    "end": "2219200"
  },
  {
    "text": "ideally all environments would fit on a single node or as close to a multiple as possible with a high utilization per node this",
    "start": "2219200",
    "end": "2226079"
  },
  {
    "text": "way when the environment is brought down the node can be reaped",
    "start": "2226079",
    "end": "2232160"
  },
  {
    "text": "bot cube integration and chat ops will let you interact with your environment and the control plane from team chat",
    "start": "2233359",
    "end": "2239920"
  },
  {
    "text": "a centralized control plane ui pulls together all the configuration and monitoring to make things easier for your operations team",
    "start": "2240960",
    "end": "2249040"
  },
  {
    "text": "similarly usage reporting and analytics help make the case for adding more nodes to the cluster as teams adopt ephemeral",
    "start": "2249359",
    "end": "2255040"
  },
  {
    "text": "run adding those does cost money we don't like spending money uh but we like spending money when",
    "start": "2255040",
    "end": "2261599"
  },
  {
    "text": "analytics say we should and finally budgeting policies would",
    "start": "2261599",
    "end": "2267760"
  },
  {
    "text": "help dynamically number of simultaneously supported environments and auto scaling groups based on costs",
    "start": "2267760",
    "end": "2275040"
  },
  {
    "text": "spent and budgeted rather than keeping those second resetting them each month there is something here for everyone so",
    "start": "2275040",
    "end": "2282000"
  },
  {
    "text": "vishal how do people join us",
    "start": "2282000",
    "end": "2285838"
  },
  {
    "text": "yeah thanks jono so we are on uh github uh open gauss slideshow thumbnail dot run we also have a web page ephemeral.run",
    "start": "2288240",
    "end": "2296000"
  },
  {
    "text": "uh beyond ephemeral.org we can also you know interact with us at info cloud vishal biani opengo",
    "start": "2296000",
    "end": "2302160"
  },
  {
    "text": "jonaspiro uh twitter handles and also similar uh github handles as well",
    "start": "2302160",
    "end": "2307920"
  },
  {
    "text": "and we can discover more stuff of you know what we are doing as well uh and we are we are looking for great",
    "start": "2307920",
    "end": "2313599"
  },
  {
    "text": "engineers as well",
    "start": "2313599",
    "end": "2316320"
  },
  {
    "text": "all right we're ready for q a okay thank you both for a wonderful",
    "start": "2321280",
    "end": "2327920"
  },
  {
    "text": "presentation we have a few questions here and we have about 17 minutes before the",
    "start": "2327920",
    "end": "2333520"
  },
  {
    "text": "end of the hour so please everyone feel free to drop your questions into the q a um first question here how",
    "start": "2333520",
    "end": "2340000"
  },
  {
    "text": "do you get the dependencies from one microservice to the others let's say resources microservices",
    "start": "2340000",
    "end": "2346560"
  },
  {
    "text": "depends on users microservice as well as external gateway microservices",
    "start": "2346560",
    "end": "2352079"
  },
  {
    "text": "if they're all declared with different helm charts and dependencies is not declare in there",
    "start": "2352079",
    "end": "2359119"
  },
  {
    "text": "uh so um if i if i understand correctly um whether you have a mono repo or",
    "start": "2360960",
    "end": "2368560"
  },
  {
    "text": "multi-repo your helm charts are stored somewhere um your uh scaffold configuration in this",
    "start": "2368560",
    "end": "2377040"
  },
  {
    "text": "case and in the future maybe something simpler will say where these helm charts are um",
    "start": "2377040",
    "end": "2383200"
  },
  {
    "text": "what our central repo does if you're if you're in a multi-repo setup is it will clone all of the repos",
    "start": "2383200",
    "end": "2389839"
  },
  {
    "text": "with your sources um and that's where it'll get its help charts from and it clones in a deterministic place",
    "start": "2389839",
    "end": "2397040"
  },
  {
    "text": "so that scaffold can easily find them",
    "start": "2397040",
    "end": "2401440"
  },
  {
    "text": "[Music] okay how do you deal with dns routing",
    "start": "2403170",
    "end": "2411838"
  },
  {
    "text": "uh mitchell do you want to take that yeah so uh right now we have configured",
    "start": "2412480",
    "end": "2418480"
  },
  {
    "text": "increase controller and then subdomain uh subdomain created on the hosted zone",
    "start": "2418480",
    "end": "2424480"
  },
  {
    "text": "uh and for every environment we create like another subdomain so to speak uh that is wired up to uh the",
    "start": "2424480",
    "end": "2430720"
  },
  {
    "text": "environment creation process and in this case uh we have a",
    "start": "2430720",
    "end": "2437680"
  },
  {
    "text": "we are delegating the entire demo sub-domain of ephemeral.run to uh route 53 and",
    "start": "2437680",
    "end": "2444560"
  },
  {
    "text": "amazon and updating it using their apis",
    "start": "2444560",
    "end": "2449440"
  },
  {
    "text": "okay i believe this is in response to the previous question will this work on prem solutions such as",
    "start": "2450960",
    "end": "2457280"
  },
  {
    "text": "rke or vmware pks",
    "start": "2457280",
    "end": "2461520"
  },
  {
    "text": "uh i believe uh it will depend on like can you really auto skill there and",
    "start": "2464640",
    "end": "2470720"
  },
  {
    "text": "it technically can work uh irrespective of you know the underlying art of scaling not being there but the benefit that you",
    "start": "2470720",
    "end": "2477119"
  },
  {
    "text": "might get uh might vary",
    "start": "2477119",
    "end": "2481838"
  },
  {
    "text": "we have not actually tested it in the solutions we have been using it uh in eks up until now",
    "start": "2483119",
    "end": "2492160"
  },
  {
    "text": "okay um just quick heads up and reminder to everyone's please uh drop questions into the q a section",
    "start": "2493040",
    "end": "2499680"
  },
  {
    "text": "um and not into the chat thank you to me but i will ensure that your question gets read",
    "start": "2499680",
    "end": "2504880"
  },
  {
    "text": "uh next question how do you handle failed deployments for example a situation where the cluster does not",
    "start": "2504880",
    "end": "2510000"
  },
  {
    "text": "have enough resources an image can't be pulled etc",
    "start": "2510000",
    "end": "2514960"
  },
  {
    "text": "uh luckily or unluckily enough we didn't get to demo that today um that does happen",
    "start": "2516079",
    "end": "2522400"
  },
  {
    "text": "frequently uh it usually happens though because you know you wrote some bad code it didn't build",
    "start": "2522400",
    "end": "2528800"
  },
  {
    "text": "it wouldn't start health check failed uh in that case we output a different error message with",
    "start": "2528800",
    "end": "2534640"
  },
  {
    "text": "a lot of helpful debugging tips things to try um there are sometimes transient errors",
    "start": "2534640",
    "end": "2543359"
  },
  {
    "text": "uh you know this is an automated system it's not production you don't have people there so sometimes",
    "start": "2543359",
    "end": "2550079"
  },
  {
    "text": "all you have to do is remove ephemeral deploy and re-add it and just let it",
    "start": "2550079",
    "end": "2555119"
  },
  {
    "text": "try again uh we do leave the we do leave the clusters up though right now so that you can",
    "start": "2555119",
    "end": "2562319"
  },
  {
    "text": "go into it see which services aren't starting probe them figure out why uh worst case",
    "start": "2562319",
    "end": "2568480"
  },
  {
    "text": "you can destroy the environment and recreate it if you if it's you know completely barked",
    "start": "2568480",
    "end": "2574720"
  },
  {
    "text": "um in the future we'd like to have separate ttl policies",
    "start": "2574720",
    "end": "2580480"
  },
  {
    "text": "for uh failed environments because we really want to risk we want to restore those",
    "start": "2580480",
    "end": "2585599"
  },
  {
    "text": "resources um to the cluster as soon as possible so that other people can start environments if",
    "start": "2585599",
    "end": "2592560"
  },
  {
    "text": "you forget about your pr the failed environment will be consuming resources for 24 hours or whatever you set okay",
    "start": "2592560",
    "end": "2602240"
  },
  {
    "text": "this is a bit of a loaded question here how robust and what features are available for pre-deployed",
    "start": "2602240",
    "end": "2608240"
  },
  {
    "text": "dependencies can you run any task ie db seeds pull nv",
    "start": "2608240",
    "end": "2613440"
  },
  {
    "text": "vars create kaffi kefka topics etc what tool are you using for cluster auto",
    "start": "2613440",
    "end": "2620160"
  },
  {
    "text": "scaling are you using aws service operators or just docker containers",
    "start": "2620160",
    "end": "2627119"
  },
  {
    "text": "yeah there's a bunch of questions do you want to take the first one jono around the seed data",
    "start": "2628319",
    "end": "2634800"
  },
  {
    "text": "so uh so at opengov um we provide the framework but teams",
    "start": "2636480",
    "end": "2641920"
  },
  {
    "text": "provided shell scripts that we run to uh do database seating migrations um",
    "start": "2641920",
    "end": "2651119"
  },
  {
    "text": "we're not actually creating kafka topics but that it's actually one of the things that teams would like to be doing uh during this process so um if you can",
    "start": "2651119",
    "end": "2659040"
  },
  {
    "text": "do it in the shell scripts you can do it during startup um",
    "start": "2659040",
    "end": "2665359"
  },
  {
    "text": "yeah yeah the industry is yeah custodial is done by",
    "start": "2665359",
    "end": "2672000"
  },
  {
    "text": "the open source cluster auto scaler and it works for eks with a few settings and configurations",
    "start": "2672000",
    "end": "2679119"
  },
  {
    "text": "uh for aws service operators i think we are using a mix i believe in some cases we kind of uh use postgres",
    "start": "2679119",
    "end": "2685599"
  },
  {
    "text": "unit of rds but for things like s3 buckets or power 53 we use the real thing and not",
    "start": "2685599",
    "end": "2691839"
  },
  {
    "text": "really mock them and additionally we're using um",
    "start": "2691839",
    "end": "2698079"
  },
  {
    "text": "uh because we're using spot instances uh and the instances themselves the notes",
    "start": "2698079",
    "end": "2703119"
  },
  {
    "text": "themselves may go away we have the uh termination manager",
    "start": "2703119",
    "end": "2708880"
  },
  {
    "text": "watching over everything",
    "start": "2708880",
    "end": "2712160"
  },
  {
    "text": "how do you handle multi-tenant our name space is appropriately isolated",
    "start": "2714720",
    "end": "2720560"
  },
  {
    "text": "from each other it",
    "start": "2720560",
    "end": "2723760"
  },
  {
    "text": "okay um we are just uh we are just separating on",
    "start": "2726640",
    "end": "2733200"
  },
  {
    "text": "namespace um nothing harder than that right now uh we don't really have a use",
    "start": "2733200",
    "end": "2738880"
  },
  {
    "text": "case for it um you know we we assume that uh this is a development cluster uh",
    "start": "2738880",
    "end": "2747359"
  },
  {
    "text": "it's safe to run everything side by side everyone's cooperating with each other uh this just hasn't come up yet actually",
    "start": "2747359",
    "end": "2755680"
  },
  {
    "text": "okay do we have any other questions at all we have about nine minutes left",
    "start": "2756960",
    "end": "2762720"
  },
  {
    "text": "so if you have any questions please feel free to drop them into the q a box",
    "start": "2762720",
    "end": "2767920"
  },
  {
    "text": "so uh when you guys go to the repo today you",
    "start": "2770960",
    "end": "2777359"
  },
  {
    "text": "will see a uh an active demo um it has all the code we have terraform uh",
    "start": "2777359",
    "end": "2784240"
  },
  {
    "text": "that we use to provision uh the clusters we have a helm chart for",
    "start": "2784240",
    "end": "2789280"
  },
  {
    "text": "our base cluster we have the helm charts for our services",
    "start": "2789280",
    "end": "2795119"
  },
  {
    "text": "we have all the scaffold configuration files everything is wired up for this demo it's not a framework today",
    "start": "2795599",
    "end": "2803760"
  },
  {
    "text": "uh you know when we need to set this up for a different team or",
    "start": "2803760",
    "end": "2810480"
  },
  {
    "text": "uh we essentially you know we'll copy and paste the whole thing and then we'll update the scaffold file",
    "start": "2810480",
    "end": "2816240"
  },
  {
    "text": "we'll update some of the helm charts things like that so it's not yet a general purpose",
    "start": "2816240",
    "end": "2821680"
  },
  {
    "text": "framework that's why that's the number one requested uh feature that we want to work on next",
    "start": "2821680",
    "end": "2831838"
  },
  {
    "text": "all right so how do you handle are you you want to take them uh how do you",
    "start": "2833839",
    "end": "2839520"
  },
  {
    "text": "handle external resources creation and deletion i mean we create",
    "start": "2839520",
    "end": "2844720"
  },
  {
    "text": "stuff in here using terraform and it's not part of our ci cd for the application deployment uh it is in a separated ci cd thing",
    "start": "2844720",
    "end": "2852640"
  },
  {
    "text": "that's what we call it too a ci cd thing how to connect a custom deployment with",
    "start": "2852640",
    "end": "2858240"
  },
  {
    "text": "a custom aws resources in your own context not how we would do it",
    "start": "2858240",
    "end": "2863920"
  },
  {
    "text": "um so we uh one of the simplifications in our",
    "start": "2863920",
    "end": "2869839"
  },
  {
    "text": "environments is that we will start um stateful uh stateful resources",
    "start": "2869839",
    "end": "2879119"
  },
  {
    "text": "in the cluster so yes we will start postgres in the cluster instead of rds um there's",
    "start": "2879119",
    "end": "2886559"
  },
  {
    "text": "nothing preventing you from pre-creating uh you know a bunch of them and",
    "start": "2886559",
    "end": "2893440"
  },
  {
    "text": "wiring up each environment to one of them uh but we found that",
    "start": "2893440",
    "end": "2900240"
  },
  {
    "text": "there's usually there's usually a uh an analog for everything even s3 you can",
    "start": "2900240",
    "end": "2906640"
  },
  {
    "text": "start up an s3 service it's stateful and when it goes away your bucket is gone",
    "start": "2906640",
    "end": "2913359"
  },
  {
    "text": "uh we are using terraform however we don't have terraform uh built into this workflow",
    "start": "2913359",
    "end": "2918880"
  },
  {
    "text": "although i don't see any reason that we couldn't do it",
    "start": "2918880",
    "end": "2923440"
  },
  {
    "text": "what happens when spot instance goes down can we get a node back up without manual intervention",
    "start": "2923920",
    "end": "2931200"
  },
  {
    "text": "you want to take that missile uh i don't think i have tried that but i",
    "start": "2931200",
    "end": "2937680"
  },
  {
    "text": "believe uh kubernetes will schedule that on some other load or a new node will be provisioned on the fly it could be a spot or if",
    "start": "2937680",
    "end": "2945599"
  },
  {
    "text": "spot's not available it could probably go on demand but i think the way we have configured it mostly usually goes on spot",
    "start": "2945599",
    "end": "2953280"
  },
  {
    "text": "um is it gonna stand this uh uh one one of the things that's really",
    "start": "2955280",
    "end": "2962319"
  },
  {
    "text": "challenging with amazon is there's actually no way to test your spot instance termination",
    "start": "2962319",
    "end": "2968559"
  },
  {
    "text": "uh and we've talked to them about it i don't know how somebody developed the",
    "start": "2968559",
    "end": "2974640"
  },
  {
    "text": "spot instance termination manager um since you can't you can't test",
    "start": "2974640",
    "end": "2980000"
  },
  {
    "text": "amazon ripping it away from you but uh we do rely that on it that it works and we rely on",
    "start": "2980000",
    "end": "2986240"
  },
  {
    "text": "kubernetes to bring up the new node and then to move the workloads over relatively quickly",
    "start": "2986240",
    "end": "2993519"
  },
  {
    "text": "okay do we have anyone else who have with um questions we have about five",
    "start": "2994319",
    "end": "3000000"
  },
  {
    "text": "minutes left so please feel free to drop them in and we'll get to as many as we can",
    "start": "3000000",
    "end": "3013839"
  },
  {
    "text": "i think it's a good sign that we don't have too many questions i i think we covered a lot did you guys ever try",
    "start": "3021119",
    "end": "3027839"
  },
  {
    "text": "garden.io or some other similar tool",
    "start": "3027839",
    "end": "3032720"
  },
  {
    "text": "yeah sure uh i really liked gardener io when i did try uh one thing i really strongly didn't",
    "start": "3033599",
    "end": "3039680"
  },
  {
    "text": "like about grenadio was the if you had like a multi-module or a multi or like monorepo project",
    "start": "3039680",
    "end": "3046800"
  },
  {
    "text": "at every level of your repo you had to create configurations so for example if i had like a java multi-module maven",
    "start": "3046800",
    "end": "3053119"
  },
  {
    "text": "project i would need to create garden configuration at every module level that to me seemed a little too intrusive",
    "start": "3053119",
    "end": "3060000"
  },
  {
    "text": "at least when i tried last and i didn't want to you know kind of deeply combine my source code repo with an",
    "start": "3060000",
    "end": "3066800"
  },
  {
    "text": "external configuration language i think we did evaluate garden tilt as",
    "start": "3066800",
    "end": "3072640"
  },
  {
    "text": "well as scaffold when we initially started this project scaffold seemed",
    "start": "3072640",
    "end": "3078800"
  },
  {
    "text": "like better after other choices yeah we looked at actually uh quite a",
    "start": "3078800",
    "end": "3084640"
  },
  {
    "text": "lot more to quite a lot of tools um a lot of them are dead at this point you know they're",
    "start": "3084640",
    "end": "3091599"
  },
  {
    "text": "the source codes still on github but they haven't been um maintained in months years",
    "start": "3091599",
    "end": "3097760"
  },
  {
    "text": "at this point uh that was one of our criteria it needs to be in well we wanted an actively maintained",
    "start": "3097760",
    "end": "3104319"
  },
  {
    "text": "project and there wasn't one so we we had to build one for ourselves uh that's why we uh use scaffold",
    "start": "3104319",
    "end": "3110800"
  },
  {
    "text": "that is very much actively developed",
    "start": "3110800",
    "end": "3115760"
  },
  {
    "text": "we're not we're also not hoping to replace scaffold we're just hoping to provide a simpler uh layer in front of it",
    "start": "3117520",
    "end": "3125839"
  },
  {
    "text": "anybody have any last-minute questions at all",
    "start": "3127760",
    "end": "3138720"
  },
  {
    "text": "what about telepresence saw it on the road map yeah um we very much want to get",
    "start": "3138720",
    "end": "3144880"
  },
  {
    "text": "telepresence working uh our developers want to be able to um live they want to be able to debug",
    "start": "3144880",
    "end": "3152559"
  },
  {
    "text": "a running service running in their ephemeral environment now there's a few different ways to do",
    "start": "3152559",
    "end": "3158400"
  },
  {
    "text": "that uh we haven't yet uh gotten this to work we haven't yet tried them you should be able to connect a remote",
    "start": "3158400",
    "end": "3164319"
  },
  {
    "text": "debugger from your ide to the cluster with enough you know port",
    "start": "3164319",
    "end": "3169520"
  },
  {
    "text": "mapping stuff like that uh another way of doing it though would be you start up a cluster without the services that you",
    "start": "3169520",
    "end": "3176640"
  },
  {
    "text": "want to debug and you'll start them locally on your laptop and you'll connect your local laptop service",
    "start": "3176640",
    "end": "3184079"
  },
  {
    "text": "to the cluster hence telepresence or you'll bring it to you um and then you should be able to",
    "start": "3184079",
    "end": "3190400"
  },
  {
    "text": "you know step debug and work with it we haven't uh we haven't gotten to it yet but it's",
    "start": "3190400",
    "end": "3198240"
  },
  {
    "text": "uh it'll be one of the next things that we work on",
    "start": "3198240",
    "end": "3203040"
  },
  {
    "text": "anyone else",
    "start": "3204880",
    "end": "3209838"
  },
  {
    "text": "anyone at all",
    "start": "3214960",
    "end": "3217920"
  },
  {
    "text": "so uh we hope that you will uh head to ephemeral.run uh start the repo to let us know that",
    "start": "3221680",
    "end": "3229520"
  },
  {
    "text": "you're into the project and to get updates um for releases and things like that",
    "start": "3229520",
    "end": "3236800"
  },
  {
    "text": "fork it try to make it work on your for yourself open a pr or at least open an issue",
    "start": "3236800",
    "end": "3245920"
  },
  {
    "text": "we want to be devoting more resources to this we're hoping that the community shows if they're interested shows their",
    "start": "3246000",
    "end": "3251920"
  },
  {
    "text": "interest and you know that'll help that'll help justify uh spending more",
    "start": "3251920",
    "end": "3257520"
  },
  {
    "text": "time on it and uh you know getting the framework uh available for everyone to use",
    "start": "3257520",
    "end": "3265599"
  },
  {
    "text": "in their own projects",
    "start": "3265599",
    "end": "3268559"
  },
  {
    "text": "excellent cool well we're at the top of the hour",
    "start": "3276839",
    "end": "3283440"
  },
  {
    "text": "bottom of the hour top of the hour you probably know this just about yeah we're wrapping up here um but i wanted",
    "start": "3283440",
    "end": "3291359"
  },
  {
    "text": "to thank um our presenters today for a wonderful presentation thank you both so much for taking time out of your days to join us",
    "start": "3291359",
    "end": "3298160"
  },
  {
    "text": "i also want to thank everyone for attending today's cncf webinar um as i said before today's recording",
    "start": "3298160",
    "end": "3304640"
  },
  {
    "text": "and slides will be available on the cncf webinar page at cncf dot io slash webinars",
    "start": "3304640",
    "end": "3310480"
  },
  {
    "text": "thank you all for your time today everyone take care stay safe and we will see you at the next cncf webinar",
    "start": "3310480",
    "end": "3316559"
  },
  {
    "text": "thanks everyone",
    "start": "3316559",
    "end": "3321520"
  }
]