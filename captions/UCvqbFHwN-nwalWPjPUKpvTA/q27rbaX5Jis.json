[
  {
    "text": "hi everyone thanks a lot for coming I'm Nikhil from Google and we are going to",
    "start": "30",
    "end": "6390"
  },
  {
    "text": "present a deep dive on the projects that segment a cluster is working on so yesterday we gave a brief overview of",
    "start": "6390",
    "end": "12900"
  },
  {
    "text": "all the projects today we are going to go deeper and feel free to ask questions we have some great demos lined up so the",
    "start": "12900",
    "end": "18960"
  },
  {
    "text": "way we've structured is we have three demos today first I'll start with demoing cube mci which is our tool for",
    "start": "18960",
    "end": "25500"
  },
  {
    "text": "multi cluster Lingus then Lindsay from Red Hat but demo Federation v2 prototype and",
    "start": "25500",
    "end": "31050"
  },
  {
    "text": "then a fan from how we will present Federation v2 cross cluster service discovery and as we present these demos",
    "start": "31050",
    "end": "37649"
  },
  {
    "text": "feel free to ask questions about any of these as you have them and in the end we'll have time for Q&A so I'll start",
    "start": "37649",
    "end": "47070"
  },
  {
    "text": "with cube MCI and this is like a high-level overview of what cube MCI does the use case that it solves is you",
    "start": "47070",
    "end": "54329"
  },
  {
    "text": "have the same app deployed in multiple clusters across globally across different continents regions and you",
    "start": "54329",
    "end": "60960"
  },
  {
    "text": "want a single load balancer across all of them you get a single IP address that you give to all of your customers and",
    "start": "60960",
    "end": "66689"
  },
  {
    "text": "automatically users from Asia are routed to Asia cluster and users from u.s.",
    "start": "66689",
    "end": "71790"
  },
  {
    "text": "route it to us cluster so this ensures that there's least latency and another advantage you get is even if one cluster",
    "start": "71790",
    "end": "78210"
  },
  {
    "text": "goes down or the app in that cluster goes down the load balancer automatically fails over two other clusters so this helps you build highly",
    "start": "78210",
    "end": "85409"
  },
  {
    "text": "available apps you give your customers get just that single IP and load balancer takes care of ensuring that it",
    "start": "85409",
    "end": "91470"
  },
  {
    "text": "routes the traffic correctly so this is the use case that qmc assaults and the way it solves is it's a command line",
    "start": "91470",
    "end": "97470"
  },
  {
    "text": "tool that you can install on your machine give it your ingress spec which is the standard communities ingress dirty ml",
    "start": "97470",
    "end": "103770"
  },
  {
    "text": "file and your queue conflict which has lists of clusters so the great thing about Cuban CI is that like you can use",
    "start": "103770",
    "end": "110399"
  },
  {
    "text": "your existing kubernetes concepts to configure so right now it works with Google cloud load balancer which",
    "start": "110399",
    "end": "116250"
  },
  {
    "text": "supports this use case you can directly like you can go outside command it is and directly configure Google cloud load",
    "start": "116250",
    "end": "121380"
  },
  {
    "text": "balancer to do the same thing but queue mci enables you to use your existing kubernetes concepts that you are",
    "start": "121380",
    "end": "126450"
  },
  {
    "text": "familiar with to configure Google cloud load balance so you take your kubernetes single spec and queue conflict things",
    "start": "126450",
    "end": "132540"
  },
  {
    "text": "that you're already with kubernetes so you run create command it configures Google cloud load",
    "start": "132540",
    "end": "138060"
  },
  {
    "text": "balancer and gives you a single IP address so I'll show you a demo of how this works so for this demo what I've",
    "start": "138060",
    "end": "150300"
  },
  {
    "text": "done is I have a few clusters set up I have two clusters one in Europe and one",
    "start": "150300",
    "end": "157350"
  },
  {
    "text": "in Asia I have this queue confectional that has two contexts one for both of those",
    "start": "157350",
    "end": "162660"
  },
  {
    "text": "clusters so cluster EU and cluster Asia I've already deployed the same app across both of them so I'm using a",
    "start": "162660",
    "end": "169860"
  },
  {
    "text": "sample zone printer app what it does is it prints the location from which the",
    "start": "169860",
    "end": "175890"
  },
  {
    "text": "request was handled so if you hit that IP address go to one cluster it will print location of that cluster and if it",
    "start": "175890",
    "end": "181950"
  },
  {
    "text": "goes to the other cluster it prints the location of that other cluster so you get to see this routing like where from",
    "start": "181950",
    "end": "187530"
  },
  {
    "text": "where was my request handled which cluster handled my request so for creating the ingress I'll use",
    "start": "187530",
    "end": "194760"
  },
  {
    "text": "cube MCI and I'll show the ingress spec",
    "start": "194760",
    "end": "199860"
  },
  {
    "text": "that I'm using so this is the command that I use for running cube MC I create",
    "start": "199860",
    "end": "205470"
  },
  {
    "text": "I give it a name so here I give it a name you cube MCI zone printer I give it an grazed or camel and my cube",
    "start": "205470",
    "end": "212010"
  },
  {
    "text": "config dot Yaman which has those two clusters so just standard communities concepts when you run this command it",
    "start": "212010",
    "end": "219390"
  },
  {
    "text": "what it does is it then goes in and configures GCL be it that takes some time it creates",
    "start": "219390",
    "end": "225959"
  },
  {
    "text": "ingresses in the clusters create so configuring GCL B is like conflicting seven resources you have to configure",
    "start": "225959",
    "end": "231630"
  },
  {
    "text": "he'll check backend services firewall rule forwarding rule all of those stuff so it'll do all of that and then",
    "start": "231630",
    "end": "237510"
  },
  {
    "text": "hopefully in the end say success if the demo works so like it supports you can",
    "start": "237510",
    "end": "245100"
  },
  {
    "text": "create HTTP load balancer in this case I'm just creating a standard HTTP load balancer move",
    "start": "245100",
    "end": "251100"
  },
  {
    "text": "finally it said success so it worked so you can list your existing ingresses",
    "start": "251100",
    "end": "256650"
  },
  {
    "text": "using like cube MCI list command that would list all the multi clustering dresses that you've created and so here",
    "start": "256650",
    "end": "264870"
  },
  {
    "text": "if you see if I list I see to multi-class anguses one that I just created and I have a existing ingress",
    "start": "264870",
    "end": "271830"
  },
  {
    "text": "which I'm actually going to use for this demo it takes some time to configure GCL B and like for all those routes to be",
    "start": "271830",
    "end": "277349"
  },
  {
    "text": "propagated so I'll use the existing MCI that I have which is the cube MCI is own",
    "start": "277349",
    "end": "282779"
  },
  {
    "text": "printer qmc also uses also has a gate status command you want more information",
    "start": "282779",
    "end": "288240"
  },
  {
    "text": "about like one particular MCI you created it prints the IP address the clusters that it spread to so now we see",
    "start": "288240",
    "end": "295199"
  },
  {
    "text": "we have this IP address 35 2 0 1 1 0 to",
    "start": "295199",
    "end": "300919"
  },
  {
    "text": "access this IP address from here and since I've two clusters one in Europe",
    "start": "301909",
    "end": "308520"
  },
  {
    "text": "and Asia I should fully hit Europe so here I see",
    "start": "308520",
    "end": "313529"
  },
  {
    "text": "that like this is the output that it says my request was my cluster is running in Belgium right now so my",
    "start": "313529",
    "end": "319139"
  },
  {
    "text": "request was handled to Belgium if I had the same IP address from Asia it would be served in from any shirtlessness at",
    "start": "319139",
    "end": "326639"
  },
  {
    "text": "this service that I'm using called GOP curve which I used to hit that same IP address from all through the world and",
    "start": "326639",
    "end": "332310"
  },
  {
    "text": "let's see if I access that IP address this I'm using a free version of this",
    "start": "332310",
    "end": "337439"
  },
  {
    "text": "service so it sometimes takes long and times out but hopefully you will be able to see so it's hitting the same IP",
    "start": "337439",
    "end": "345569"
  },
  {
    "text": "address from different parts of the world you see it hits that IP address from Island Virginia Brazil and those requests are handled by Europe cluster",
    "start": "345569",
    "end": "352439"
  },
  {
    "text": "and if you hit it from Australia California those requests are handled by a checklist so GCL B is automatically",
    "start": "352439",
    "end": "359159"
  },
  {
    "text": "sending traffic to the right classes to ensure least latency we have also a cool",
    "start": "359159",
    "end": "366330"
  },
  {
    "text": "demo ID the GCP booth where you can get more information and ask more questions as well if you don't in this demo I",
    "start": "366330",
    "end": "375839"
  },
  {
    "text": "don't have like a u.s. cluster so it goes to the closest it I only have two clusters in Europe and Asia yeah Europe",
    "start": "375839",
    "end": "386149"
  },
  {
    "text": "yeah that's it for the demo I have if there any questions or you can take more",
    "start": "389260",
    "end": "396350"
  },
  {
    "text": "questions at the end as well okay I'll invite Lindsay for the next ever thank you",
    "start": "396350",
    "end": "401670"
  },
  {
    "text": "[Applause]",
    "start": "401670",
    "end": "408720"
  },
  {
    "text": "okay so I'm going to be demoing the federation v2 prototype first I'm",
    "start": "442600",
    "end": "449450"
  },
  {
    "text": "Lindsey telic I am a software engineering intern at Red Hat in Toronto and I've been working on multi clusters",
    "start": "449450",
    "end": "456620"
  },
  {
    "text": "since last year around this time so if you've been following a cig multi",
    "start": "456620",
    "end": "463100"
  },
  {
    "text": "cluster at all over the past year you'll have noticed a lot of discussion around the future of Federation or now multi",
    "start": "463100",
    "end": "471230"
  },
  {
    "text": "cluster and what are expected or what the best trajectory would be into the",
    "start": "471230",
    "end": "476419"
  },
  {
    "text": "future so we did take Federation out of kubernetes kubernetes and broke it down",
    "start": "476419",
    "end": "483620"
  },
  {
    "text": "and started developing a new direction and so this is kind of what I'm going to",
    "start": "483620",
    "end": "490880"
  },
  {
    "text": "be prototyping or what I'm going to be demoing and the core tenants of this",
    "start": "490880",
    "end": "496430"
  },
  {
    "text": "Federation v2 are modularization and customize and customization so you can",
    "start": "496430",
    "end": "504290"
  },
  {
    "text": "let the parts are more broken down and you can customize and use only the parts",
    "start": "504290",
    "end": "509810"
  },
  {
    "text": "that you need to satisfy your particular use case so the functional areas of",
    "start": "509810",
    "end": "516560"
  },
  {
    "text": "Federation v2 are member clusters templates overrides placement directives",
    "start": "516560",
    "end": "523180"
  },
  {
    "text": "propagation status and scheduling and I'm going to talk specifically about the",
    "start": "523180",
    "end": "528710"
  },
  {
    "text": "template overrides and placement directives and then you'll be able to see them in action",
    "start": "528710",
    "end": "535300"
  },
  {
    "text": "so this is a diagram that is on the Federation V to get repo that you can",
    "start": "535300",
    "end": "542300"
  },
  {
    "text": "also look at there's a bit more of an explanation there but the replica set",
    "start": "542300",
    "end": "548560"
  },
  {
    "text": "template so this is specifically about a replica set so the template is kind of",
    "start": "548560",
    "end": "554300"
  },
  {
    "text": "like the default behavior that you want to be spread across any cluster that is federated to that as part of the",
    "start": "554300",
    "end": "561560"
  },
  {
    "text": "Federation the override allows you to make some exceptions for particular clusters so if you want",
    "start": "561560",
    "end": "568580"
  },
  {
    "text": "if you want your default behavior to be for example three up three replicas in",
    "start": "568580",
    "end": "573800"
  },
  {
    "text": "each of your clusters then you can say but in this particular cluster in the US east cluster or whatever I want",
    "start": "573800",
    "end": "580730"
  },
  {
    "text": "five replicas or ten replicas or whatever and then when you put that in",
    "start": "580730",
    "end": "586250"
  },
  {
    "text": "the override it will put that specific configuration in the cluster that you",
    "start": "586250",
    "end": "593329"
  },
  {
    "text": "specified so then the placement which is down here that's where you say which you",
    "start": "593329",
    "end": "600890"
  },
  {
    "text": "specify which clusters are actually part of the Federation I think that's mostly",
    "start": "600890",
    "end": "608990"
  },
  {
    "text": "the important things to explain just before I do the demo I'm just going to",
    "start": "608990",
    "end": "614930"
  },
  {
    "text": "make a little point about the specs that I'm using so I did set up the clusters",
    "start": "614930",
    "end": "621290"
  },
  {
    "text": "in advance because it takes quite a while to set it up about ten minutes so I didn't want to subject you to that so",
    "start": "621290",
    "end": "628940"
  },
  {
    "text": "I'm using mini cube for this demo the version is twenty five point two so that",
    "start": "628940",
    "end": "633950"
  },
  {
    "text": "I could use the profiles so I have a cluster in US East and us West and I'm",
    "start": "633950",
    "end": "641450"
  },
  {
    "text": "using queue control version one point ten kubernetes version 1.9 point for the cluster register hicieron it to land API",
    "start": "641450",
    "end": "649310"
  },
  {
    "text": "server builder which actually brings up the Federation so you can see this is",
    "start": "649310",
    "end": "657290"
  },
  {
    "text": "some of the script that is output when you use the API server builder but you",
    "start": "657290",
    "end": "663589"
  },
  {
    "text": "can just ignore that for now and okay",
    "start": "663589",
    "end": "672910"
  },
  {
    "text": "okay so so this is showing the US East",
    "start": "672910",
    "end": "678560"
  },
  {
    "text": "and u.s. West can everyone see that no okay sorry",
    "start": "678560",
    "end": "684640"
  },
  {
    "text": "okay so you can see the US east cluster and all the specs and the US West",
    "start": "696959",
    "end": "704439"
  },
  {
    "text": "cluster they're both running they're both they both have the federated or the Federation API version and and so these",
    "start": "704439",
    "end": "717009"
  },
  {
    "text": "are the configuration files that I'm going to be deploying into the Federation I'm going to specifically",
    "start": "717009",
    "end": "724720"
  },
  {
    "text": "show you the replica set template so this is as I said the default behavior",
    "start": "724720",
    "end": "729810"
  },
  {
    "text": "there's three replicas that are going to be created in each cluster that's joined",
    "start": "729810",
    "end": "735610"
  },
  {
    "text": "to the Federation and the images enginex that's just an example this is the",
    "start": "735610",
    "end": "746769"
  },
  {
    "text": "placement gamal so the u.s. west and US east clusters are both joined to the",
    "start": "746769",
    "end": "753220"
  },
  {
    "text": "Federation and that's where we're going to be deploying the replica set to and",
    "start": "753220",
    "end": "760709"
  },
  {
    "text": "and the overrides so for the u.s. east cluster I want five replicas instead of",
    "start": "760709",
    "end": "766750"
  },
  {
    "text": "three and that will be represented okay",
    "start": "766750",
    "end": "773019"
  },
  {
    "text": "so now I'm creating all the config files just takes a second to go through",
    "start": "773019",
    "end": "782279"
  },
  {
    "text": "there's also like it is you'll notice making config Maps namespaces and what",
    "start": "782279",
    "end": "790269"
  },
  {
    "text": "else is in there secrets so the override template is optional you",
    "start": "790269",
    "end": "800170"
  },
  {
    "text": "don't have to have overrides if there's if you want the same exact configuration across all the clusters there's no need",
    "start": "800170",
    "end": "806199"
  },
  {
    "text": "to create an override and that yeah just a note for you in case you are wondering",
    "start": "806199",
    "end": "814110"
  },
  {
    "text": "so you can see that the u.s. west and US east cluster are the namespaces active",
    "start": "814110",
    "end": "820029"
  },
  {
    "text": "config my so active in both you'll notice in the US east cluster there's no test secret",
    "start": "820029",
    "end": "827900"
  },
  {
    "text": "that's because in the Gamble's I had an override which I didn't show you but I can show you after if you on Fiat",
    "start": "827900",
    "end": "835090"
  },
  {
    "text": "and then the replica sets as you can see",
    "start": "835090",
    "end": "840830"
  },
  {
    "text": "is just as we specified the test replica set in the US West has the default",
    "start": "840830",
    "end": "845900"
  },
  {
    "text": "behavior of three replicas and the u.s. is closer has five so now I'm going to",
    "start": "845900",
    "end": "852230"
  },
  {
    "text": "take the u.s. cluster the US east cluster completely out of the Federation",
    "start": "852230",
    "end": "861100"
  },
  {
    "text": "and it just takes a minute to reflect that hopefully okay so mm-hmm",
    "start": "861160",
    "end": "878980"
  },
  {
    "text": "it looks like there was an error okay so as you can see the test replica set is",
    "start": "878980",
    "end": "889810"
  },
  {
    "text": "is still existing in the US West cluster as a default behavior and the US East",
    "start": "889810",
    "end": "895250"
  },
  {
    "text": "closer now has no resources which is what I had wanted to happen",
    "start": "895250",
    "end": "900589"
  },
  {
    "text": "and I think it aired out because there is no namespace in u.s. East but it was",
    "start": "900589",
    "end": "906770"
  },
  {
    "text": "trying to find it so one second",
    "start": "906770",
    "end": "910570"
  },
  {
    "text": "okay so now I'm going to add the u.s. is clustered back and it takes a couple",
    "start": "954160",
    "end": "966440"
  },
  {
    "text": "seconds to actually reflect that as well oops thanks yeah there's some",
    "start": "966440",
    "end": "981970"
  },
  {
    "text": "as you can see we're still using bash scripts - okay so we're back so the US",
    "start": "1001630",
    "end": "1042740"
  },
  {
    "text": "East clustered again has five replicas sets as we had originally specified and",
    "start": "1042740",
    "end": "1048380"
  },
  {
    "text": "the US web cluster has three and I'm not going to show you all the other resources because that's a lot of for",
    "start": "1048380",
    "end": "1054320"
  },
  {
    "text": "loops that I don't want to type it but you get the idea so does anybody have",
    "start": "1054320",
    "end": "1060110"
  },
  {
    "text": "any questions yes I will try my best",
    "start": "1060110",
    "end": "1069040"
  },
  {
    "text": "[Music]",
    "start": "1069040",
    "end": "1072119"
  },
  {
    "text": "okay sure that's something we're busy",
    "start": "1100060",
    "end": "1105590"
  },
  {
    "text": "working on at the moment so so yeah sure so the question was if you have",
    "start": "1105590",
    "end": "1111440"
  },
  {
    "text": "something like a federated deployment across 100 clusters was the example and you screw up your deployment you put the",
    "start": "1111440",
    "end": "1117170"
  },
  {
    "text": "wrong image name or something in does that screw up all hundred of your clusters or is there some way of making",
    "start": "1117170",
    "end": "1123140"
  },
  {
    "text": "sure that that doesn't cause such a catastrophe and the short answer is just like in a kubernetes cluster if you if",
    "start": "1123140",
    "end": "1128960"
  },
  {
    "text": "you roll out of deployment it essentially a canary so it does it to small number of nodes and if those nodes",
    "start": "1128960",
    "end": "1136150"
  },
  {
    "text": "don't come become healthy then it doesn't proceed with the additional nodes incremental rollouts across",
    "start": "1136150",
    "end": "1142660"
  },
  {
    "text": "multiple clusters are usually done in conceptually a similar way but usually in a different way which is that you",
    "start": "1142660",
    "end": "1148390"
  },
  {
    "text": "typically upgrade a one cluster say to five percent of the nodes on the new",
    "start": "1148390",
    "end": "1153460"
  },
  {
    "text": "version and then you make sure that there's a healthy and then assuming that they are you progress further on that",
    "start": "1153460",
    "end": "1159400"
  },
  {
    "text": "cluster you leave that cluster to be healthy for a while and then you proceed to the additional clusters and so that",
    "start": "1159400",
    "end": "1165100"
  },
  {
    "text": "that level of configuration like exactly what that strategy is you cannot express in a kubernetes deployment at the moment",
    "start": "1165100",
    "end": "1172690"
  },
  {
    "text": "and so part of v2 is to say instead of being wed to the kubernetes spec of",
    "start": "1172690",
    "end": "1178210"
  },
  {
    "text": "exactly what a deployment looks like we now actually have something which is a federated deployment and it has",
    "start": "1178210",
    "end": "1183220"
  },
  {
    "text": "configuration specific to how we would like the rollout to occur across across the clusters I don't think that's",
    "start": "1183220",
    "end": "1189760"
  },
  {
    "text": "implemented yet but it will be in the next irfan can tell us an answer to that",
    "start": "1189760",
    "end": "1194830"
  },
  {
    "text": "I think in the next month or two are",
    "start": "1194830",
    "end": "1200200"
  },
  {
    "text": "there any other questions yes",
    "start": "1200200",
    "end": "1204179"
  },
  {
    "text": "I don't think that exists at the moment",
    "start": "1215770",
    "end": "1221230"
  },
  {
    "text": "right okay so the the intention of the",
    "start": "1221230",
    "end": "1231640"
  },
  {
    "text": "the demo was to show some of the lower-level building blocks so in those particular building blocks you specify or someone generates a config file that",
    "start": "1231640",
    "end": "1238540"
  },
  {
    "text": "specifies precisely which clusters you want the whatever the thing is that you want to go into but a quite common",
    "start": "1238540",
    "end": "1245470"
  },
  {
    "text": "requirement is to say I just want my replica set in two clusters or one",
    "start": "1245470",
    "end": "1251620"
  },
  {
    "text": "cluster in Europe and one cluster in Asia and the reason why you don't want to necessarily specify named clusters is",
    "start": "1251620",
    "end": "1257650"
  },
  {
    "text": "that sometimes that named cluster goes away so it gets turned down or it goes",
    "start": "1257650",
    "end": "1263050"
  },
  {
    "text": "through an upgrade or it gets you know in some way unavailable and you want some active management in some cases to",
    "start": "1263050",
    "end": "1268630"
  },
  {
    "text": "say well okay I've only got it in one cluster now cause the second cluster went away so the idea is to have and",
    "start": "1268630",
    "end": "1274090"
  },
  {
    "text": "this goes back to the comments Lindsay Lindsay made earlier about having pluggable pieces that can be composed",
    "start": "1274090",
    "end": "1279790"
  },
  {
    "text": "together to to perform different things so a controller on top of that would actually generate that config that named",
    "start": "1279790",
    "end": "1285610"
  },
  {
    "text": "the clusters and that controller above it would no I want to - a replica of",
    "start": "1285610",
    "end": "1292330"
  },
  {
    "text": "this thing in each cluster these are the available clusters it will pick one or two and generate that config and if one",
    "start": "1292330",
    "end": "1300040"
  },
  {
    "text": "of those goes away through active monitoring it'll know that that's gone away and regenerate a new config file with different clusters in it which is",
    "start": "1300040",
    "end": "1307780"
  },
  {
    "text": "not quite an answer to your question but it does actually turn out to solve the you know if you want them in all clusters if a new cluster joins the",
    "start": "1307780",
    "end": "1313510"
  },
  {
    "text": "Federation the controller will see oh there's a cluster without it the requirement was that it be in all clusters so it'll push it out to the new",
    "start": "1313510",
    "end": "1319600"
  },
  {
    "text": "cluster as well want to say that like the configuration files that I did have",
    "start": "1319600",
    "end": "1326260"
  },
  {
    "text": "I also had the config maps and secrets and whatever I could have just had replica sets and it would have worked",
    "start": "1326260",
    "end": "1331660"
  },
  {
    "text": "perfectly fine so that's another thing that just to keep in mind I I'm in front",
    "start": "1331660",
    "end": "1340470"
  },
  {
    "text": "I'm associated with multicast as you might already have guessed I work the to",
    "start": "1340470",
    "end": "1346210"
  },
  {
    "text": "AVI so today's deep dive our intention was",
    "start": "1346210",
    "end": "1352440"
  },
  {
    "text": "to try to demo the stuff that the multi cluster has been working around in last",
    "start": "1352440",
    "end": "1358740"
  },
  {
    "text": "couple of months or maybe more and the largest effort right now has been put",
    "start": "1358740",
    "end": "1365160"
  },
  {
    "text": "into this patrician v2 project that that we are calling Federation v2 it's sort",
    "start": "1365160",
    "end": "1370470"
  },
  {
    "text": "of an upgrade from what we had Federation but the concepts remain sort of similar it's a Federation of clusters and I",
    "start": "1370470",
    "end": "1378360"
  },
  {
    "text": "think Nikoli already covered that in the in the introduction of the sig yesterday",
    "start": "1378360",
    "end": "1385530"
  },
  {
    "text": "but people who might not have been there I'll just repeat that what we are doing as part of Federation v2 is trying to",
    "start": "1385530",
    "end": "1392880"
  },
  {
    "text": "put up a set of building blocks so so Federation v1 was sort of reusing k8s",
    "start": "1392880",
    "end": "1399270"
  },
  {
    "text": "API is it was just using the same API and trying to present the same kind of",
    "start": "1399270",
    "end": "1405860"
  },
  {
    "text": "same kind of behavior to the user in v2 what we have done is we have tried to",
    "start": "1405860",
    "end": "1411860"
  },
  {
    "text": "wrap around that API in a federated API so replica set becomes a federated",
    "start": "1411860",
    "end": "1417750"
  },
  {
    "text": "replica set and there are three basic blocks that we call the placement is one",
    "start": "1417750",
    "end": "1423030"
  },
  {
    "text": "of them the template is what is the wrapper and the overrides so using that I am and that is sort of now complete",
    "start": "1423030",
    "end": "1431850"
  },
  {
    "text": "for us like what lincei showed is exactly those three types using those three types you can control the behavior",
    "start": "1431850",
    "end": "1437580"
  },
  {
    "text": "and you can have your own type or your own api defined in the same same control",
    "start": "1437580",
    "end": "1445140"
  },
  {
    "text": "plane and using these three types you can have whatever behavior as you want like somebody asked that if you want it",
    "start": "1445140",
    "end": "1453600"
  },
  {
    "text": "in some pressure of you want some cluster join it relatively later or it",
    "start": "1453600",
    "end": "1459870"
  },
  {
    "text": "was about the canary upgrades also so that's the whole intention of this group",
    "start": "1459870",
    "end": "1466470"
  },
  {
    "text": "as of now what I am going to showcase is we recently completed the services",
    "start": "1466470",
    "end": "1473240"
  },
  {
    "text": "discovery part of it also so this is sort of a high-level feature so",
    "start": "1473240",
    "end": "1480090"
  },
  {
    "text": "a high-level feature would mean that it is actually using the basic API s so",
    "start": "1480090",
    "end": "1485190"
  },
  {
    "text": "there are three base a P I is for services which are that service template the service placement and service",
    "start": "1485190",
    "end": "1491610"
  },
  {
    "text": "override and we have put one more and that name of that API right now is only",
    "start": "1491610",
    "end": "1498000"
  },
  {
    "text": "for this demo because it's not concluded in the community and this is done only for this particular demo and using that",
    "start": "1498000",
    "end": "1505320"
  },
  {
    "text": "what we are doing is that we are getting the details of the service end points",
    "start": "1505320",
    "end": "1510720"
  },
  {
    "text": "from each of the clusters and programming that detail into some common DNS server it could be we are using code",
    "start": "1510720",
    "end": "1517289"
  },
  {
    "text": "DNS right now locally running on my laptop it could be any of the other DNS servers also so let's jump on to the",
    "start": "1517289",
    "end": "1524309"
  },
  {
    "text": "demo",
    "start": "1524309",
    "end": "1526549"
  },
  {
    "text": "yeah typing with one hand is a little okay so what this does is basically it",
    "start": "1540370",
    "end": "1553830"
  },
  {
    "text": "I'll just show you the four ml so if the first one is the I'm creating a replica set the second one what I will do is",
    "start": "1553830",
    "end": "1561990"
  },
  {
    "text": "I'll create so so the replica set could have yet this fine yep okay so this is",
    "start": "1561990",
    "end": "1588570"
  },
  {
    "text": "this is a template which actually specifies the details of the replica set",
    "start": "1588570",
    "end": "1594149"
  },
  {
    "text": "so what it is doing is it is using the k8s replica set as template just like",
    "start": "1594149",
    "end": "1600460"
  },
  {
    "text": "the replica set uses pod as template",
    "start": "1600460",
    "end": "1604080"
  },
  {
    "text": "then the placement I think these three features Lindsey all's already showed so",
    "start": "1606029",
    "end": "1615340"
  },
  {
    "text": "this is the service placement we are not using overrides here so I am using two objects for replica sets and two objects",
    "start": "1615340",
    "end": "1622539"
  },
  {
    "text": "for services so we have a service override and service placement and this",
    "start": "1622539",
    "end": "1630279"
  },
  {
    "text": "is the new API that we have put in only for this demo the name is currently what",
    "start": "1630279",
    "end": "1636789"
  },
  {
    "text": "we have used is multi cluster DNS so this is the controller which is doing",
    "start": "1636789",
    "end": "1643149"
  },
  {
    "text": "the high-level work it is basically getting all the details about the end points from each of the clusters and programming it in the co DNS so these",
    "start": "1643149",
    "end": "1655570"
  },
  {
    "text": "are created and it takes a while for the parts to come up",
    "start": "1655570",
    "end": "1662039"
  },
  {
    "text": "yep's creating ok so this basically",
    "start": "1667970",
    "end": "1675809"
  },
  {
    "text": "would have created parts in both the clusters okay so these are the parts for",
    "start": "1675809",
    "end": "1683549"
  },
  {
    "text": "the replica sets and once these",
    "start": "1683549",
    "end": "1689190"
  },
  {
    "text": "endpoints are ready we should be able so this is the naming scheme which we use for Federation it is the naming scheme",
    "start": "1689190",
    "end": "1697259"
  },
  {
    "text": "is the service name dot default is the namespace then Galactic is the name of",
    "start": "1697259",
    "end": "1704279"
  },
  {
    "text": "the Federation that we use and some portion of this work is being done by the cube dns in chaos so if uh if a",
    "start": "1704279",
    "end": "1713850"
  },
  {
    "text": "request hits one of these end points in cube dns with this kind of naming scheme",
    "start": "1713850",
    "end": "1719999"
  },
  {
    "text": "it knows where to send it so it will also need to know about the the DNS",
    "start": "1719999",
    "end": "1727739"
  },
  {
    "text": "server which is programmed for this particular Federation so we see that",
    "start": "1727739",
    "end": "1734820"
  },
  {
    "text": "there are two two end points basically returned by ding and there are different",
    "start": "1734820",
    "end": "1744629"
  },
  {
    "text": "naming schemes just like in local service discovery you can have a shorter version and then you can have zone or",
    "start": "1744629",
    "end": "1750419"
  },
  {
    "text": "you can have the region and all this stuff here also when I did start the cluster I did specify two zones and",
    "start": "1750419",
    "end": "1758009"
  },
  {
    "text": "regions man was in EU as specified in this naming and one was in u.s. so the",
    "start": "1758009",
    "end": "1763980"
  },
  {
    "text": "discovery while while trying to figure out where this particular service is it",
    "start": "1763980",
    "end": "1769440"
  },
  {
    "text": "will return you the specific endpoint so this one gave me the specific a record",
    "start": "1769440",
    "end": "1776009"
  },
  {
    "text": "for that particular cluster if I do it for us it will give me the specific",
    "start": "1776009",
    "end": "1781950"
  },
  {
    "text": "record for that particular cluster so in this case it the a record returned IP to 30 in this case it returned IP to 41 it",
    "start": "1781950",
    "end": "1790679"
  },
  {
    "text": "is quite similar to what a multi closure ingress is doing so it basically also",
    "start": "1790679",
    "end": "1796529"
  },
  {
    "text": "knows if the pod exists in a local then it'll route the traffic or it will return the DNS based query will return",
    "start": "1796529",
    "end": "1804360"
  },
  {
    "text": "the local endpoint and if it is not existent then it will return the remote endpoint or some other clusters endpoint",
    "start": "1804360",
    "end": "1812179"
  },
  {
    "text": "so this is we just took curl so this this is to showcase that which cluster",
    "start": "1815840",
    "end": "1821999"
  },
  {
    "text": "it is coming from it's a round-robin scheme so it can just return any of the parts that we had for parts so there",
    "start": "1821999",
    "end": "1829080"
  },
  {
    "text": "were four endpoints so I'll just see I mean but it might return the same one",
    "start": "1829080",
    "end": "1834359"
  },
  {
    "text": "also in the next query so this time it",
    "start": "1834359",
    "end": "1840509"
  },
  {
    "text": "returned a different cluster and a different endpoint yep so what I'll do",
    "start": "1840509",
    "end": "1849869"
  },
  {
    "text": "after this is I'll update just like lynn said it we actually created all this in",
    "start": "1849869",
    "end": "1855090"
  },
  {
    "text": "two different clusters so this time I am removing the replicas sets or the endpoints from one of the clusters by",
    "start": "1855090",
    "end": "1861690"
  },
  {
    "text": "specifying only one cluster for the placement",
    "start": "1861690",
    "end": "1865878"
  },
  {
    "text": "let's just wait for the parts to be removed they are terminating",
    "start": "1876200",
    "end": "1883059"
  },
  {
    "text": "not sure why does it take so much time in mini cube to remove the pub in this particular version I'm facing this",
    "start": "1893440",
    "end": "1899830"
  },
  {
    "text": "problem",
    "start": "1899830",
    "end": "1901890"
  },
  {
    "text": "okay gone so now if I do I'll always I",
    "start": "1910340",
    "end": "1916340"
  },
  {
    "text": "mean if I try to get those end points I'll always get the end points which is",
    "start": "1916340",
    "end": "1921620"
  },
  {
    "text": "now remaining one of them is gone even if I do different schemes and all so in",
    "start": "1921620",
    "end": "1931970"
  },
  {
    "text": "this case there were routes they were see names discovered and eventually the a record is for that particular same end",
    "start": "1931970",
    "end": "1937610"
  },
  {
    "text": "point yep this is the local one and the",
    "start": "1937610",
    "end": "1948320"
  },
  {
    "text": "curl is to showcase that the query is actually returned from one particular cluster only not to because the second",
    "start": "1948320",
    "end": "1954650"
  },
  {
    "text": "one has the parts from the second one has gone so it's always giving me end points from cluster C one okay so this",
    "start": "1954650",
    "end": "1966740"
  },
  {
    "text": "this was about just showcasing the services if you have questions about",
    "start": "1966740",
    "end": "1974930"
  },
  {
    "text": "this I can take them now or any other questions about multi closure we all are here right now we can answer more yep so",
    "start": "1974930",
    "end": "1989360"
  },
  {
    "text": "after you have cross cluster discovery I guess the next step if I think of edge computing scenarios is to have",
    "start": "1989360",
    "end": "1995330"
  },
  {
    "text": "invocations across clusters and I saw the IP addresses they were giving out or local IP addresses so do you do you is",
    "start": "1995330",
    "end": "2002980"
  },
  {
    "text": "your group working also I'm routing this request what I did not include as part",
    "start": "2002980",
    "end": "2008560"
  },
  {
    "text": "of this demo is what the gentleman exactly told about that is I could have also shown that if a local part is not",
    "start": "2008560",
    "end": "2015880"
  },
  {
    "text": "present then it will actually return me the IP or the actual record from a",
    "start": "2015880",
    "end": "2022450"
  },
  {
    "text": "remote server that was part of one of the dicks but I haven't done it as part of the occurred in in the dig I can show",
    "start": "2022450",
    "end": "2030700"
  },
  {
    "text": "that again to you that is here so what",
    "start": "2030700",
    "end": "2037090"
  },
  {
    "text": "you are talking about is the application axis so for that Federation per se is",
    "start": "2037090",
    "end": "2043510"
  },
  {
    "text": "not working towards that or its it doesn't consider that as in the scope of",
    "start": "2043510",
    "end": "2048970"
  },
  {
    "text": "Federation as of now so application excess our load global load balancer kind of a thing probably needs to be",
    "start": "2048970",
    "end": "2055030"
  },
  {
    "text": "configured separately and I think some of the answer is for that is in the",
    "start": "2055030",
    "end": "2060280"
  },
  {
    "text": "multi clashing race which Nikhil mentioned hi what happens if somebody",
    "start": "2060280",
    "end": "2074429"
  },
  {
    "text": "edits the local so for example the river the number of replicas on one of the",
    "start": "2074429",
    "end": "2081879"
  },
  {
    "text": "replicas sets in one of the cluster how can we restore the state that we intended initially yeah so this is",
    "start": "2081880",
    "end": "2088780"
  },
  {
    "text": "because we have two points of exposure for the user so there could be a local",
    "start": "2088780",
    "end": "2095050"
  },
  {
    "text": "user also or there could be a federation user both of them but our intention",
    "start": "2095050",
    "end": "2101530"
  },
  {
    "text": "always has been that one of them you have to give higher privilege you have",
    "start": "2101530",
    "end": "2106960"
  },
  {
    "text": "to choose one so currently what we do is Federation overrides if any local changes happening so whatever changes or",
    "start": "2106960",
    "end": "2113710"
  },
  {
    "text": "whatever is put up in Federation as the spec if there is a change in local cluster it will just update it that also",
    "start": "2113710",
    "end": "2120940"
  },
  {
    "text": "enables us to adopt the existing workloads in local clusters so for",
    "start": "2120940",
    "end": "2126850"
  },
  {
    "text": "example if you already have a replica set running in a local cluster and you just create a similar replica set",
    "start": "2126850",
    "end": "2132490"
  },
  {
    "text": "specifying some replicas in Federation and the replicas are same it will just adopt the same it won't create a new one",
    "start": "2132490",
    "end": "2140160"
  },
  {
    "text": "so the question is when will this happen in the sync we think that loop runs",
    "start": "2142770",
    "end": "2148960"
  },
  {
    "text": "every couple of seconds so it's like a matter of seconds which is configurable",
    "start": "2148960",
    "end": "2154590"
  },
  {
    "text": "my question may be related to the another project it's a cluster registry",
    "start": "2159660",
    "end": "2165340"
  },
  {
    "text": "in Federation's looks like you provide abstractions of loss decoupled in tightly coupled clusters it's like",
    "start": "2165340",
    "end": "2171580"
  },
  {
    "text": "abstraction on one cluster sometimes I am like an administrator would like to manage from the same point different",
    "start": "2171580",
    "end": "2177100"
  },
  {
    "text": "logic it's clusters with different ports but four would like to configure the same",
    "start": "2177100",
    "end": "2182710"
  },
  {
    "text": "our box rules or whatever do a plan to extend the cluster registry for this",
    "start": "2182710",
    "end": "2188520"
  },
  {
    "text": "couple of kuvira's because currently it's only eight class to remove cluster list clusters so classes you see like",
    "start": "2188520",
    "end": "2199690"
  },
  {
    "text": "now has only the cluster list but it's an API server and you can install see IDs in it you allocate it with a",
    "start": "2199690",
    "end": "2205720"
  },
  {
    "text": "kubernetes api server as well so then you get these are like other resources like our bag namespaces as well and you",
    "start": "2205720",
    "end": "2211780"
  },
  {
    "text": "can run controllers that watch cluster registry as well so then if you want something like sync are back so you run",
    "start": "2211780",
    "end": "2217359"
  },
  {
    "text": "a controller that's watching cluster registry which watches are back rules and lists of clusters and then syncs them to trust us I mean you can run",
    "start": "2217359",
    "end": "2224290"
  },
  {
    "text": "controllers with Listeria straight to do more fancy stuff",
    "start": "2224290",
    "end": "2228840"
  },
  {
    "text": "so for federated placements is it currently possible or will later be",
    "start": "2235320",
    "end": "2241840"
  },
  {
    "text": "possible to basically specify that you want some federated resource to run on",
    "start": "2241840",
    "end": "2246880"
  },
  {
    "text": "like say only one cluster but you don't care what specific cluster it would be",
    "start": "2246880",
    "end": "2252460"
  },
  {
    "text": "so for example if you have your federation of clusters is just like three clusters which represent a region",
    "start": "2252460",
    "end": "2258970"
  },
  {
    "text": "for you for whatever cloud provider and you want to say my service needs to run in this region but I don't want to do",
    "start": "2258970",
    "end": "2264820"
  },
  {
    "text": "like care about the overhead or specifying which exact cluster okay so",
    "start": "2264820",
    "end": "2281070"
  },
  {
    "text": "the question is that if using these three constructs I mean what I",
    "start": "2281070",
    "end": "2287170"
  },
  {
    "text": "understand it is that using these three basic API is is there a way possible to",
    "start": "2287170",
    "end": "2292780"
  },
  {
    "text": "specify different intents for example I want to enforce a policy or I want to",
    "start": "2292780",
    "end": "2298300"
  },
  {
    "text": "specify an intent that my workload should go only in one cluster all that kind of stuff this is this is the whole",
    "start": "2298300",
    "end": "2307030"
  },
  {
    "text": "crux of whatever way we have tried to architecture this of AP ice so what we say is that these",
    "start": "2307030",
    "end": "2314109"
  },
  {
    "text": "three basic ones are the ones that we used to that can be used to program different behaviors so there are two",
    "start": "2314109",
    "end": "2321430"
  },
  {
    "text": "additional API is that we plan to implement in fact we are implementing",
    "start": "2321430",
    "end": "2326770"
  },
  {
    "text": "them right now which are something to do with her policy over overload so one is",
    "start": "2326770",
    "end": "2332140"
  },
  {
    "text": "called placement the which is we call it federated placement the other one could",
    "start": "2332140",
    "end": "2337330"
  },
  {
    "text": "be considered as a user policy okay so that will answer the exact question that",
    "start": "2337330",
    "end": "2342520"
  },
  {
    "text": "you asked and apart from that it also enables to define your own API sand and",
    "start": "2342520",
    "end": "2349839"
  },
  {
    "text": "implement controllers for them which can depict different behaviors as needed by",
    "start": "2349839",
    "end": "2357040"
  },
  {
    "text": "the different implementers my follow-up",
    "start": "2357040",
    "end": "2362650"
  },
  {
    "text": "question for that would be so you're gonna make a like a get started kit for",
    "start": "2362650",
    "end": "2367990"
  },
  {
    "text": "a federated controller available the",
    "start": "2367990",
    "end": "2373990"
  },
  {
    "text": "intention is to give a reference from majority of the use cases that we think",
    "start": "2373990",
    "end": "2379390"
  },
  {
    "text": "are useful and that includes some API",
    "start": "2379390",
    "end": "2384460"
  },
  {
    "text": "types and many of them were sort of already included in Federation v1 maybe not exactly the same behavior a little",
    "start": "2384460",
    "end": "2392410"
  },
  {
    "text": "different behavior or extension of the behavior but most of it we intend to put as a reference controller in open source",
    "start": "2392410",
    "end": "2401339"
  },
  {
    "text": "question this is sorry if I miss it this is intended with the DNS resolution is",
    "start": "2404490",
    "end": "2411339"
  },
  {
    "text": "intended to be public facing resolution or is it to be tender to be internal",
    "start": "2411339",
    "end": "2416920"
  },
  {
    "text": "only resolution so the question is I I",
    "start": "2416920",
    "end": "2425800"
  },
  {
    "text": "think what I understand is you are talking about the Federation itself the Federation should be user facing or it",
    "start": "2425800",
    "end": "2433599"
  },
  {
    "text": "should be a internal yeah I was doing it",
    "start": "2433599",
    "end": "2440950"
  },
  {
    "text": "from the local system so it was actually external to the cluster but the same thing could be done and inside the cluster also that's what",
    "start": "2440950",
    "end": "2447790"
  },
  {
    "text": "you are asking all the DNS concepts do",
    "start": "2447790",
    "end": "2460000"
  },
  {
    "text": "apply over here so that is what you mentioned about DNS caching",
    "start": "2460000",
    "end": "2465250"
  },
  {
    "text": "that actually is a problem so we say that smart clients should actually be",
    "start": "2465250",
    "end": "2472359"
  },
  {
    "text": "using this right so if there is a dumb client which just gets one endpoint and",
    "start": "2472359",
    "end": "2477600"
  },
  {
    "text": "always uses the same endpoint to do the discovery and one of the parts goes down then points goes down then the client",
    "start": "2477600",
    "end": "2483910"
  },
  {
    "text": "things that it has gone down right so the client should be smart to understand this behavior okay yeah",
    "start": "2483910",
    "end": "2504510"
  },
  {
    "text": "[Applause]",
    "start": "2511700",
    "end": "2515349"
  }
]