[
  {
    "start": "0",
    "end": "23000"
  },
  {
    "text": "hi everybody and welcome to how niantic",
    "start": "1520",
    "end": "3679"
  },
  {
    "text": "switch pokemon go to using boy my name",
    "start": "3679",
    "end": "5759"
  },
  {
    "text": "is lana nayakovi and i'm a server core",
    "start": "5759",
    "end": "7919"
  },
  {
    "text": "infrastructure tech lead at niantic",
    "start": "7919",
    "end": "10960"
  },
  {
    "text": "who are we niantic is a leading ar",
    "start": "10960",
    "end": "13599"
  },
  {
    "text": "technology company",
    "start": "13599",
    "end": "14639"
  },
  {
    "text": "focused on exploring new applications",
    "start": "14639",
    "end": "16560"
  },
  {
    "text": "for advanced hardware",
    "start": "16560",
    "end": "18000"
  },
  {
    "text": "wearable devices in particular that",
    "start": "18000",
    "end": "20080"
  },
  {
    "text": "marry the digital world and the physical",
    "start": "20080",
    "end": "22000"
  },
  {
    "text": "world",
    "start": "22000",
    "end": "23840"
  },
  {
    "start": "23000",
    "end": "23000"
  },
  {
    "text": "our mission is based on three key",
    "start": "23840",
    "end": "26240"
  },
  {
    "text": "product principles",
    "start": "26240",
    "end": "27920"
  },
  {
    "text": "exploration and discovery of new places",
    "start": "27920",
    "end": "31359"
  },
  {
    "text": "exercise and real world social",
    "start": "31359",
    "end": "33760"
  },
  {
    "text": "interactions with other people",
    "start": "33760",
    "end": "36640"
  },
  {
    "start": "36000",
    "end": "36000"
  },
  {
    "text": "this mission has been our compass it's",
    "start": "36640",
    "end": "38960"
  },
  {
    "text": "paved the way for our consumer ar",
    "start": "38960",
    "end": "41280"
  },
  {
    "text": "games ingress pokemon go harry potter",
    "start": "41280",
    "end": "44960"
  },
  {
    "text": "and that's what we are arguably best",
    "start": "44960",
    "end": "46879"
  },
  {
    "text": "known for",
    "start": "46879",
    "end": "48160"
  },
  {
    "text": "but we're a lot a whole lot more than",
    "start": "48160",
    "end": "50559"
  },
  {
    "text": "that underpinning these games",
    "start": "50559",
    "end": "52480"
  },
  {
    "text": "is a powerful technology platform the",
    "start": "52480",
    "end": "55039"
  },
  {
    "text": "niantic",
    "start": "55039",
    "end": "55760"
  },
  {
    "text": "real world platform which we've been",
    "start": "55760",
    "end": "58160"
  },
  {
    "text": "investing in",
    "start": "58160",
    "end": "58879"
  },
  {
    "text": "and evolving from the very beginning",
    "start": "58879",
    "end": "61199"
  },
  {
    "text": "niantic real world platform also",
    "start": "61199",
    "end": "63039"
  },
  {
    "text": "supports",
    "start": "63039",
    "end": "63680"
  },
  {
    "text": "social features mapping and advanced ar",
    "start": "63680",
    "end": "66479"
  },
  {
    "text": "all the components needed to develop and",
    "start": "66479",
    "end": "68880"
  },
  {
    "text": "publish a real-world ar game",
    "start": "68880",
    "end": "72000"
  },
  {
    "text": "as our platform grew to offer additional",
    "start": "72000",
    "end": "74560"
  },
  {
    "text": "components and new games were published",
    "start": "74560",
    "end": "76880"
  },
  {
    "text": "we needed to adjust infrastructure to",
    "start": "76880",
    "end": "79040"
  },
  {
    "text": "support the new workloads and complexity",
    "start": "79040",
    "end": "81840"
  },
  {
    "text": "let's review our journey",
    "start": "81840",
    "end": "87680"
  },
  {
    "text": "our journey took two parallel routes one",
    "start": "87680",
    "end": "90479"
  },
  {
    "text": "for unifying our services service",
    "start": "90479",
    "end": "92159"
  },
  {
    "text": "connectivity",
    "start": "92159",
    "end": "93360"
  },
  {
    "text": "and the other to simplify and support",
    "start": "93360",
    "end": "95200"
  },
  {
    "text": "our edge proxy let me start with the",
    "start": "95200",
    "end": "97119"
  },
  {
    "text": "simpler one",
    "start": "97119",
    "end": "98159"
  },
  {
    "text": "how we unified our services service",
    "start": "98159",
    "end": "99840"
  },
  {
    "text": "connectivity and secured our backend",
    "start": "99840",
    "end": "101840"
  },
  {
    "text": "services",
    "start": "101840",
    "end": "103840"
  },
  {
    "text": "in the beginning our configuration was",
    "start": "103840",
    "end": "105680"
  },
  {
    "text": "simple engines deploys our edge proxy",
    "start": "105680",
    "end": "108320"
  },
  {
    "text": "routing traffic to the game servers",
    "start": "108320",
    "end": "111040"
  },
  {
    "text": "but as new services were developed and",
    "start": "111040",
    "end": "113040"
  },
  {
    "text": "deployed different routing",
    "start": "113040",
    "end": "114640"
  },
  {
    "text": "configurations were created and defined",
    "start": "114640",
    "end": "116719"
  },
  {
    "text": "by the new",
    "start": "116719",
    "end": "117520"
  },
  {
    "text": "by the dev teams most connections were",
    "start": "117520",
    "end": "120399"
  },
  {
    "text": "passing through the front door using",
    "start": "120399",
    "end": "121920"
  },
  {
    "text": "regional ips hoping not to hit the",
    "start": "121920",
    "end": "123840"
  },
  {
    "text": "public internet",
    "start": "123840",
    "end": "125840"
  },
  {
    "text": "others were using external services or",
    "start": "125840",
    "end": "128239"
  },
  {
    "text": "infrastructure like vpc peering",
    "start": "128239",
    "end": "130479"
  },
  {
    "text": "which still required a gateway to be",
    "start": "130479",
    "end": "132640"
  },
  {
    "text": "defined in the cluster",
    "start": "132640",
    "end": "134720"
  },
  {
    "text": "and we even had services sending data to",
    "start": "134720",
    "end": "137200"
  },
  {
    "text": "dataflow to update the game's data",
    "start": "137200",
    "end": "139840"
  },
  {
    "text": "this created several problems that we",
    "start": "139840",
    "end": "141680"
  },
  {
    "text": "needed to address",
    "start": "141680",
    "end": "143840"
  },
  {
    "start": "143000",
    "end": "143000"
  },
  {
    "text": "this problem included the need for",
    "start": "143840",
    "end": "145920"
  },
  {
    "text": "developers to add security and",
    "start": "145920",
    "end": "147440"
  },
  {
    "text": "instrumentation to code",
    "start": "147440",
    "end": "149680"
  },
  {
    "text": "our inability to configure routes",
    "start": "149680",
    "end": "151680"
  },
  {
    "text": "dynamically",
    "start": "151680",
    "end": "153519"
  },
  {
    "text": "lack of observability and alerting if",
    "start": "153519",
    "end": "155599"
  },
  {
    "text": "instrumentation wasn't added to code",
    "start": "155599",
    "end": "157599"
  },
  {
    "text": "are the services indeed connected and",
    "start": "157599",
    "end": "160400"
  },
  {
    "text": "lastly the need for user is joining the",
    "start": "160400",
    "end": "162720"
  },
  {
    "text": "team to learn all these technologies",
    "start": "162720",
    "end": "164959"
  },
  {
    "text": "but have very little control over them",
    "start": "164959",
    "end": "167040"
  },
  {
    "text": "resulting in maintenance mode",
    "start": "167040",
    "end": "171200"
  },
  {
    "text": "as a result we focused our efforts in",
    "start": "171200",
    "end": "173440"
  },
  {
    "text": "finding a solution that will isolate the",
    "start": "173440",
    "end": "175440"
  },
  {
    "text": "connectivity configuration",
    "start": "175440",
    "end": "177360"
  },
  {
    "text": "from the application and will will",
    "start": "177360",
    "end": "179680"
  },
  {
    "text": "enable us to address the rest",
    "start": "179680",
    "end": "182159"
  },
  {
    "text": "of the issues",
    "start": "182159",
    "end": "185840"
  },
  {
    "text": "we decided to adopt in voip plus fire",
    "start": "190080",
    "end": "193200"
  },
  {
    "text": "for our cross-gcp's communication",
    "start": "193200",
    "end": "196400"
  },
  {
    "text": "the flexibility provided by despair",
    "start": "196400",
    "end": "199120"
  },
  {
    "text": "enabled us",
    "start": "199120",
    "end": "200159"
  },
  {
    "text": "to support our different models from",
    "start": "200159",
    "end": "202640"
  },
  {
    "text": "duplex mode to either pull",
    "start": "202640",
    "end": "204400"
  },
  {
    "text": "or push add unified security with",
    "start": "204400",
    "end": "207920"
  },
  {
    "text": "federation for games and services",
    "start": "207920",
    "end": "210640"
  },
  {
    "text": "by creating a pool of gateways we were",
    "start": "210640",
    "end": "212799"
  },
  {
    "text": "also able to shift all services from",
    "start": "212799",
    "end": "215120"
  },
  {
    "text": "using the edge proxy",
    "start": "215120",
    "end": "216799"
  },
  {
    "text": "to using their dedicated more secure",
    "start": "216799",
    "end": "218959"
  },
  {
    "text": "endpoints",
    "start": "218959",
    "end": "221440"
  },
  {
    "start": "221000",
    "end": "221000"
  },
  {
    "text": "so we named our new project service",
    "start": "221440",
    "end": "223680"
  },
  {
    "text": "gateway",
    "start": "223680",
    "end": "224720"
  },
  {
    "text": "mainly to this distinguish it from",
    "start": "224720",
    "end": "227120"
  },
  {
    "text": "service mesh that became a synonym for",
    "start": "227120",
    "end": "229200"
  },
  {
    "text": "istio in the company",
    "start": "229200",
    "end": "231040"
  },
  {
    "text": "caused a lot of confusion what we loved",
    "start": "231040",
    "end": "233840"
  },
  {
    "text": "about this approach was that there was",
    "start": "233840",
    "end": "235519"
  },
  {
    "text": "no need for application code changes and",
    "start": "235519",
    "end": "237599"
  },
  {
    "text": "we only had to do cleanup in addition",
    "start": "237599",
    "end": "240400"
  },
  {
    "text": "the solution was cloud native and ensure",
    "start": "240400",
    "end": "242400"
  },
  {
    "text": "high availability",
    "start": "242400",
    "end": "244000"
  },
  {
    "text": "we used gradle scripts with helm charts",
    "start": "244000",
    "end": "246159"
  },
  {
    "text": "to deploy and configure and voice",
    "start": "246159",
    "end": "247760"
  },
  {
    "text": "inspire",
    "start": "247760",
    "end": "249040"
  },
  {
    "text": "and our measure performance was one",
    "start": "249040",
    "end": "251280"
  },
  {
    "text": "milliseconds of added latency with max",
    "start": "251280",
    "end": "253360"
  },
  {
    "text": "measure load of",
    "start": "253360",
    "end": "254480"
  },
  {
    "text": "20 000 requests per second per one",
    "start": "254480",
    "end": "257120"
  },
  {
    "text": "virtual",
    "start": "257120",
    "end": "258079"
  },
  {
    "text": "cpu which was pretty good",
    "start": "258079",
    "end": "262320"
  },
  {
    "start": "261000",
    "end": "261000"
  },
  {
    "text": "one question you are probably wondering",
    "start": "262560",
    "end": "264320"
  },
  {
    "text": "about was why we didn't adopt service",
    "start": "264320",
    "end": "266479"
  },
  {
    "text": "mesh implementation for orchestration",
    "start": "266479",
    "end": "268240"
  },
  {
    "text": "and management for the mesh",
    "start": "268240",
    "end": "270479"
  },
  {
    "text": "in one word maturity when looking at",
    "start": "270479",
    "end": "274160"
  },
  {
    "text": "cmcf landscape map under service mesh",
    "start": "274160",
    "end": "277280"
  },
  {
    "text": "these are the graduated projects these",
    "start": "277280",
    "end": "279520"
  },
  {
    "text": "are the incubating projects",
    "start": "279520",
    "end": "281360"
  },
  {
    "text": "but most of the projects are still in",
    "start": "281360",
    "end": "283680"
  },
  {
    "text": "send back stage",
    "start": "283680",
    "end": "285280"
  },
  {
    "text": "or not yet added to the map",
    "start": "285280",
    "end": "288320"
  },
  {
    "text": "when we started our journey we",
    "start": "288320",
    "end": "290080"
  },
  {
    "text": "investigated using istio but decided to",
    "start": "290080",
    "end": "292800"
  },
  {
    "text": "hold off for now",
    "start": "292800",
    "end": "294080"
  },
  {
    "text": "due to complex configuration and",
    "start": "294080",
    "end": "296320"
  },
  {
    "text": "breaking changes between versions",
    "start": "296320",
    "end": "298960"
  },
  {
    "text": "looking at our next steps with a future",
    "start": "298960",
    "end": "302080"
  },
  {
    "start": "301000",
    "end": "301000"
  },
  {
    "text": "of increasing numbers of back-end",
    "start": "302080",
    "end": "304000"
  },
  {
    "text": "services and games it is obvious for us",
    "start": "304000",
    "end": "306639"
  },
  {
    "text": "that we will need to find a solution for",
    "start": "306639",
    "end": "308400"
  },
  {
    "text": "orchestration and management at scale",
    "start": "308400",
    "end": "310800"
  },
  {
    "text": "what we liked about shifting to envoy",
    "start": "310800",
    "end": "312560"
  },
  {
    "text": "was the most of the tools under",
    "start": "312560",
    "end": "314639"
  },
  {
    "text": "development",
    "start": "314639",
    "end": "315600"
  },
  {
    "text": "we're using envoy as the proxy so",
    "start": "315600",
    "end": "317759"
  },
  {
    "text": "migrating to them",
    "start": "317759",
    "end": "318880"
  },
  {
    "text": "should be an incremental step and we",
    "start": "318880",
    "end": "321039"
  },
  {
    "text": "still had the option",
    "start": "321039",
    "end": "322320"
  },
  {
    "text": "of using xts in the meantime as our",
    "start": "322320",
    "end": "324639"
  },
  {
    "text": "management tool",
    "start": "324639",
    "end": "327440"
  },
  {
    "text": "let's review now our more interesting",
    "start": "327919",
    "end": "330080"
  },
  {
    "text": "journey with envoy as an edge proxy",
    "start": "330080",
    "end": "333199"
  },
  {
    "start": "333000",
    "end": "333000"
  },
  {
    "text": "i mentioned before that our game cluster",
    "start": "333199",
    "end": "335840"
  },
  {
    "text": "deployment is simple",
    "start": "335840",
    "end": "337440"
  },
  {
    "text": "but while the deployment is simple there",
    "start": "337440",
    "end": "339520"
  },
  {
    "text": "were several things you wanted to",
    "start": "339520",
    "end": "340880"
  },
  {
    "text": "address",
    "start": "340880",
    "end": "342639"
  },
  {
    "start": "342000",
    "end": "342000"
  },
  {
    "text": "improving user experience when scaling",
    "start": "342639",
    "end": "344560"
  },
  {
    "text": "was one of the goals and i will",
    "start": "344560",
    "end": "346000"
  },
  {
    "text": "elaborate",
    "start": "346000",
    "end": "346800"
  },
  {
    "text": "more about what discovers and why in a",
    "start": "346800",
    "end": "348960"
  },
  {
    "text": "minute but besides this issue we also",
    "start": "348960",
    "end": "351280"
  },
  {
    "text": "wanted to improve our monitoring and",
    "start": "351280",
    "end": "352960"
  },
  {
    "text": "alerts",
    "start": "352960",
    "end": "354000"
  },
  {
    "text": "unify as much as possible our tools and",
    "start": "354000",
    "end": "355919"
  },
  {
    "text": "data plane and lastly support the",
    "start": "355919",
    "end": "358000"
  },
  {
    "text": "company's goal",
    "start": "358000",
    "end": "358960"
  },
  {
    "text": "in enabling external developers to",
    "start": "358960",
    "end": "361039"
  },
  {
    "text": "create new games without exposing rrep",
    "start": "361039",
    "end": "367120"
  },
  {
    "text": "i would like to focus for a moment on",
    "start": "367120",
    "end": "369039"
  },
  {
    "text": "the goal of improving user experience",
    "start": "369039",
    "end": "371680"
  },
  {
    "text": "when scaling mainly because this part of",
    "start": "371680",
    "end": "373919"
  },
  {
    "text": "our our architecture",
    "start": "373919",
    "end": "375840"
  },
  {
    "text": "caused us some trouble here the big",
    "start": "375840",
    "end": "378800"
  },
  {
    "text": "question of course is why scaling",
    "start": "378800",
    "end": "380560"
  },
  {
    "text": "created bad user experience",
    "start": "380560",
    "end": "382720"
  },
  {
    "text": "problem lies in the proxy configuration",
    "start": "382720",
    "end": "385039"
  },
  {
    "text": "and config map limitations",
    "start": "385039",
    "end": "388479"
  },
  {
    "text": "our proxy configuration is tied very",
    "start": "388479",
    "end": "390639"
  },
  {
    "text": "much into our",
    "start": "390639",
    "end": "391600"
  },
  {
    "text": "ip for every incoming request the proxy",
    "start": "391600",
    "end": "395280"
  },
  {
    "text": "is checking if the request url",
    "start": "395280",
    "end": "397520"
  },
  {
    "text": "has a prefix of an opaque id if one is",
    "start": "397520",
    "end": "400800"
  },
  {
    "text": "found the proxy matches that id to a",
    "start": "400800",
    "end": "403120"
  },
  {
    "text": "game server",
    "start": "403120",
    "end": "404160"
  },
  {
    "text": "removes the prefix and route the request",
    "start": "404160",
    "end": "406840"
  },
  {
    "text": "accordingly",
    "start": "406840",
    "end": "408240"
  },
  {
    "text": "we crest without id a round rubbing",
    "start": "408240",
    "end": "410800"
  },
  {
    "text": "between the available game servers",
    "start": "410800",
    "end": "413199"
  },
  {
    "text": "we refer to this specific part of the",
    "start": "413199",
    "end": "414960"
  },
  {
    "text": "configuration as the catch-all",
    "start": "414960",
    "end": "417120"
  },
  {
    "text": "in addition our protocol supports http",
    "start": "417120",
    "end": "420000"
  },
  {
    "text": "and websockets requests",
    "start": "420000",
    "end": "422000"
  },
  {
    "text": "as a result our configuration file can't",
    "start": "422000",
    "end": "424720"
  },
  {
    "text": "fit into kubernetes config map",
    "start": "424720",
    "end": "427199"
  },
  {
    "text": "and is deployed inside the proxy image",
    "start": "427199",
    "end": "430400"
  },
  {
    "text": "this problem is true for engines and",
    "start": "430400",
    "end": "432400"
  },
  {
    "text": "envoy",
    "start": "432400",
    "end": "434800"
  },
  {
    "start": "434000",
    "end": "434000"
  },
  {
    "text": "looking on the process of scaling up we",
    "start": "435280",
    "end": "437840"
  },
  {
    "text": "first increase the number of game",
    "start": "437840",
    "end": "439120"
  },
  {
    "text": "servers replica",
    "start": "439120",
    "end": "440720"
  },
  {
    "text": "when all instances are happen healthy we",
    "start": "440720",
    "end": "443680"
  },
  {
    "text": "update the configuration of the routes",
    "start": "443680",
    "end": "445759"
  },
  {
    "text": "leaving the catch all the same this",
    "start": "445759",
    "end": "448800"
  },
  {
    "text": "creating a new image and update the",
    "start": "448800",
    "end": "451280"
  },
  {
    "text": "deployment",
    "start": "451280",
    "end": "452639"
  },
  {
    "text": "this step can be disruptive to clients",
    "start": "452639",
    "end": "454960"
  },
  {
    "text": "that are currently connected through",
    "start": "454960",
    "end": "456560"
  },
  {
    "text": "websockets or pending a response from",
    "start": "456560",
    "end": "458479"
  },
  {
    "text": "the server",
    "start": "458479",
    "end": "460560"
  },
  {
    "text": "when all pods are updated and healthy we",
    "start": "460560",
    "end": "462880"
  },
  {
    "text": "update the backend with the number of",
    "start": "462880",
    "end": "464479"
  },
  {
    "text": "available game servers",
    "start": "464479",
    "end": "466319"
  },
  {
    "text": "and update again the proxy configuration",
    "start": "466319",
    "end": "468400"
  },
  {
    "text": "creating a second wave of disruptions",
    "start": "468400",
    "end": "471039"
  },
  {
    "text": "scaling down process is very similar",
    "start": "471039",
    "end": "473680"
  },
  {
    "text": "only in reverse order",
    "start": "473680",
    "end": "476639"
  },
  {
    "start": "476000",
    "end": "476000"
  },
  {
    "text": "well next yes to the rescue using a",
    "start": "476639",
    "end": "479360"
  },
  {
    "text": "custom xds operator we were able to",
    "start": "479360",
    "end": "481360"
  },
  {
    "text": "scale up and down the clusters without",
    "start": "481360",
    "end": "483280"
  },
  {
    "text": "the need to restart or redeploy them",
    "start": "483280",
    "end": "485919"
  },
  {
    "text": "the operator receives the requested",
    "start": "485919",
    "end": "488400"
  },
  {
    "text": "cluster size through a kubernetes custom",
    "start": "488400",
    "end": "490560"
  },
  {
    "text": "resource",
    "start": "490560",
    "end": "491680"
  },
  {
    "text": "update the configuration and pass it to",
    "start": "491680",
    "end": "493680"
  },
  {
    "text": "envoy",
    "start": "493680",
    "end": "495039"
  },
  {
    "text": "we are currently in the process of",
    "start": "495039",
    "end": "496800"
  },
  {
    "text": "deploying this new operator",
    "start": "496800",
    "end": "498639"
  },
  {
    "text": "our next steps after verifying the",
    "start": "498639",
    "end": "500400"
  },
  {
    "text": "operator is stable and working as",
    "start": "500400",
    "end": "502000"
  },
  {
    "text": "expected",
    "start": "502000",
    "end": "503039"
  },
  {
    "text": "will be to integrate it with the game",
    "start": "503039",
    "end": "504960"
  },
  {
    "text": "server existing drain feature for a",
    "start": "504960",
    "end": "507120"
  },
  {
    "text": "seamless scale experience",
    "start": "507120",
    "end": "510080"
  },
  {
    "start": "509000",
    "end": "509000"
  },
  {
    "text": "this overview our new deployment",
    "start": "510080",
    "end": "514320"
  },
  {
    "text": "after verifying we can achieve our goals",
    "start": "515680",
    "end": "518080"
  },
  {
    "text": "using envoy we started to plan and",
    "start": "518080",
    "end": "520159"
  },
  {
    "text": "execute the migration from engine",
    "start": "520159",
    "end": "521680"
  },
  {
    "text": "standpoint",
    "start": "521680",
    "end": "523360"
  },
  {
    "start": "523000",
    "end": "523000"
  },
  {
    "text": "our high level plan included running",
    "start": "523360",
    "end": "525279"
  },
  {
    "text": "load testing to verify performance and",
    "start": "525279",
    "end": "527440"
  },
  {
    "text": "provisioning of envoy",
    "start": "527440",
    "end": "529120"
  },
  {
    "text": "test immigration scenario run books and",
    "start": "529120",
    "end": "531839"
  },
  {
    "text": "roll back",
    "start": "531839",
    "end": "532480"
  },
  {
    "text": "in the lotus environment deploy the new",
    "start": "532480",
    "end": "534959"
  },
  {
    "text": "envoy instances and shift traffic from",
    "start": "534959",
    "end": "537120"
  },
  {
    "text": "engines to endpoint",
    "start": "537120",
    "end": "538480"
  },
  {
    "text": "sounds easy right we started with load",
    "start": "538480",
    "end": "541920"
  },
  {
    "text": "testing using a pokemon go load testing",
    "start": "541920",
    "end": "544160"
  },
  {
    "text": "setup and runners",
    "start": "544160",
    "end": "545600"
  },
  {
    "text": "we used the latest invoice version which",
    "start": "545600",
    "end": "547600"
  },
  {
    "text": "was 112",
    "start": "547600",
    "end": "548959"
  },
  {
    "text": "and started with a basic environment of",
    "start": "548959",
    "end": "551680"
  },
  {
    "text": "x game servers",
    "start": "551680",
    "end": "552880"
  },
  {
    "text": "x caching services one proxy",
    "start": "552880",
    "end": "555920"
  },
  {
    "text": "and a load of hundreds of thousands of",
    "start": "555920",
    "end": "558000"
  },
  {
    "text": "requests per second",
    "start": "558000",
    "end": "559760"
  },
  {
    "text": "the result looks great except some pesky",
    "start": "559760",
    "end": "562720"
  },
  {
    "text": "five or three errors that surface from",
    "start": "562720",
    "end": "564320"
  },
  {
    "text": "time to time",
    "start": "564320",
    "end": "566959"
  },
  {
    "start": "566000",
    "end": "566000"
  },
  {
    "text": "we had to make a couple of changes to",
    "start": "567760",
    "end": "569600"
  },
  {
    "text": "our production environment to be able to",
    "start": "569600",
    "end": "571120"
  },
  {
    "text": "shift the traffic from engines to enjoy",
    "start": "571120",
    "end": "573920"
  },
  {
    "text": "first change was to separate the traffic",
    "start": "573920",
    "end": "576399"
  },
  {
    "text": "the public traffic from the backend",
    "start": "576399",
    "end": "578160"
  },
  {
    "text": "services i mentioned before",
    "start": "578160",
    "end": "580240"
  },
  {
    "text": "since we didn't onboard the service",
    "start": "580240",
    "end": "582080"
  },
  {
    "text": "gateway yet we took the approach of",
    "start": "582080",
    "end": "584080"
  },
  {
    "text": "simply duplicating the engine's",
    "start": "584080",
    "end": "585760"
  },
  {
    "text": "configuration and creating a dedicated",
    "start": "585760",
    "end": "588320"
  },
  {
    "text": "pool for them",
    "start": "588320",
    "end": "590320"
  },
  {
    "text": "we then had to replace the existing",
    "start": "590320",
    "end": "592560"
  },
  {
    "text": "external load balancer service with a",
    "start": "592560",
    "end": "594560"
  },
  {
    "text": "node port with external traffic policy",
    "start": "594560",
    "end": "597279"
  },
  {
    "text": "set to local instead of cluster this",
    "start": "597279",
    "end": "600000"
  },
  {
    "text": "allowed us to control the traffic and",
    "start": "600000",
    "end": "601839"
  },
  {
    "text": "monitor both",
    "start": "601839",
    "end": "602880"
  },
  {
    "text": "proxy pools while serving on the same",
    "start": "602880",
    "end": "604880"
  },
  {
    "text": "port which is a gclp limitation",
    "start": "604880",
    "end": "608399"
  },
  {
    "text": "we also switched from old replication",
    "start": "608399",
    "end": "610880"
  },
  {
    "text": "controller to a deployment object",
    "start": "610880",
    "end": "613040"
  },
  {
    "text": "which gave us an opportunity to do a",
    "start": "613040",
    "end": "614800"
  },
  {
    "text": "simplified dry run of the traffic shift",
    "start": "614800",
    "end": "618000"
  },
  {
    "text": "lastly we switch from utilization based",
    "start": "618000",
    "end": "620880"
  },
  {
    "text": "load balancing",
    "start": "620880",
    "end": "622000"
  },
  {
    "text": "to count based load balancing due to",
    "start": "622000",
    "end": "624240"
  },
  {
    "text": "difference in resources between engines",
    "start": "624240",
    "end": "626399"
  },
  {
    "text": "and envoy",
    "start": "626399",
    "end": "627600"
  },
  {
    "text": "we copied the already prepared grafano",
    "start": "627600",
    "end": "629680"
  },
  {
    "text": "dashboards",
    "start": "629680",
    "end": "630720"
  },
  {
    "text": "and created a new poll for dingboyflake",
    "start": "630720",
    "end": "635519"
  },
  {
    "start": "635000",
    "end": "635000"
  },
  {
    "text": "one of the features we couldn't find a",
    "start": "635519",
    "end": "637200"
  },
  {
    "text": "replacement for by the way is the",
    "start": "637200",
    "end": "638959"
  },
  {
    "text": "ipdenylist",
    "start": "638959",
    "end": "640160"
  },
  {
    "text": "and we had to replace it with the google",
    "start": "640160",
    "end": "641839"
  },
  {
    "text": "cloud armor if there is an existing",
    "start": "641839",
    "end": "644160"
  },
  {
    "text": "invoice filter that provides this",
    "start": "644160",
    "end": "645600"
  },
  {
    "text": "functionality we would love to hear",
    "start": "645600",
    "end": "647440"
  },
  {
    "text": "about it but if not",
    "start": "647440",
    "end": "648959"
  },
  {
    "text": "we will probably write a custom filter",
    "start": "648959",
    "end": "650959"
  },
  {
    "text": "to provide this functionality",
    "start": "650959",
    "end": "652720"
  },
  {
    "text": "we're becoming very good in writing",
    "start": "652720",
    "end": "654560"
  },
  {
    "text": "those",
    "start": "654560",
    "end": "656800"
  },
  {
    "start": "656000",
    "end": "656000"
  },
  {
    "text": "well the big day arrived and we started",
    "start": "657040",
    "end": "659120"
  },
  {
    "text": "shifting the traffic from engines to",
    "start": "659120",
    "end": "660800"
  },
  {
    "text": "invoice well",
    "start": "660800",
    "end": "661600"
  },
  {
    "text": "we started started deploying the traffic",
    "start": "661600",
    "end": "664079"
  },
  {
    "text": "shift plan",
    "start": "664079",
    "end": "664880"
  },
  {
    "text": "was to first increase the number of",
    "start": "664880",
    "end": "666640"
  },
  {
    "text": "envoy replicas in the pool",
    "start": "666640",
    "end": "668800"
  },
  {
    "text": "when reaching full capacity decrease the",
    "start": "668800",
    "end": "670880"
  },
  {
    "text": "number of engines replica",
    "start": "670880",
    "end": "672880"
  },
  {
    "text": "until hitting zero we started with",
    "start": "672880",
    "end": "675519"
  },
  {
    "text": "deploying a single invoice instance",
    "start": "675519",
    "end": "677760"
  },
  {
    "text": "it was there for a couple of minutes",
    "start": "677760",
    "end": "680399"
  },
  {
    "text": "when we started seeing an",
    "start": "680399",
    "end": "681680"
  },
  {
    "text": "increase in five or three hours and then",
    "start": "681680",
    "end": "685200"
  },
  {
    "text": "it crashed we immediately scale down to",
    "start": "685200",
    "end": "687920"
  },
  {
    "text": "zero",
    "start": "687920",
    "end": "689839"
  },
  {
    "text": "this is just a short version but after",
    "start": "689839",
    "end": "692560"
  },
  {
    "text": "several days of investigations and",
    "start": "692560",
    "end": "694240"
  },
  {
    "text": "digging up in envoy and gclp",
    "start": "694240",
    "end": "696079"
  },
  {
    "text": "documentation",
    "start": "696079",
    "end": "697279"
  },
  {
    "text": "we found the following results the main",
    "start": "697279",
    "end": "700079"
  },
  {
    "text": "reason for the invoice crash was because",
    "start": "700079",
    "end": "702160"
  },
  {
    "text": "we were hitting it with 20",
    "start": "702160",
    "end": "704320"
  },
  {
    "text": "times the expected load and even more",
    "start": "704320",
    "end": "707519"
  },
  {
    "text": "it was already deployed on a pod with",
    "start": "707519",
    "end": "709440"
  },
  {
    "text": "limited resources which might have been",
    "start": "709440",
    "end": "711440"
  },
  {
    "text": "a contributor factor",
    "start": "711440",
    "end": "712880"
  },
  {
    "text": "but unfortunately after correcting the",
    "start": "712880",
    "end": "714959"
  },
  {
    "text": "traffic distribution",
    "start": "714959",
    "end": "716079"
  },
  {
    "text": "to 2000 requests per second we never",
    "start": "716079",
    "end": "718720"
  },
  {
    "text": "encountered this problem again",
    "start": "718720",
    "end": "721200"
  },
  {
    "text": "the 503 errors were easier to understand",
    "start": "721200",
    "end": "723839"
  },
  {
    "text": "but harder to find",
    "start": "723839",
    "end": "725440"
  },
  {
    "text": "as they were a result of a discrepancy",
    "start": "725440",
    "end": "727600"
  },
  {
    "text": "in the timeout for idle connections",
    "start": "727600",
    "end": "729760"
  },
  {
    "text": "causing gclb to return",
    "start": "729760",
    "end": "731440"
  },
  {
    "text": "503s for connections that were",
    "start": "731440",
    "end": "733760"
  },
  {
    "text": "terminated by envoy",
    "start": "733760",
    "end": "735519"
  },
  {
    "text": "fixing this part decreased the 503's",
    "start": "735519",
    "end": "737920"
  },
  {
    "text": "errors to a normal level",
    "start": "737920",
    "end": "741200"
  },
  {
    "text": "as it usually happens we were ready for",
    "start": "742240",
    "end": "744320"
  },
  {
    "text": "second try only two weeks later",
    "start": "744320",
    "end": "747040"
  },
  {
    "text": "we fixed the configuration scale it up",
    "start": "747040",
    "end": "749040"
  },
  {
    "text": "to one instance and started monitoring",
    "start": "749040",
    "end": "750880"
  },
  {
    "text": "the service",
    "start": "750880",
    "end": "752399"
  },
  {
    "text": "it was happily running for a day with no",
    "start": "752399",
    "end": "754480"
  },
  {
    "text": "problems so we decided we are ready for",
    "start": "754480",
    "end": "756320"
  },
  {
    "text": "the next step",
    "start": "756320",
    "end": "758639"
  },
  {
    "text": "and scale it up to join voice instances",
    "start": "758639",
    "end": "761360"
  },
  {
    "text": "and we enter the new era of",
    "start": "761360",
    "end": "762839"
  },
  {
    "text": "multi-instances in production",
    "start": "762839",
    "end": "765920"
  },
  {
    "text": "over the next two weeks we slowly slowly",
    "start": "765920",
    "end": "768079"
  },
  {
    "text": "scaled up the envoy fleet from two to",
    "start": "768079",
    "end": "770160"
  },
  {
    "text": "five from five to fifty percent",
    "start": "770160",
    "end": "772160"
  },
  {
    "text": "and so on until we hit one hundred",
    "start": "772160",
    "end": "773839"
  },
  {
    "text": "percent",
    "start": "773839",
    "end": "775519"
  },
  {
    "text": "when hitting one hundred percent of it",
    "start": "775519",
    "end": "777200"
  },
  {
    "text": "void deployments and after",
    "start": "777200",
    "end": "778560"
  },
  {
    "text": "verifying all is okay or at least that's",
    "start": "778560",
    "end": "780800"
  },
  {
    "text": "what we thought",
    "start": "780800",
    "end": "781920"
  },
  {
    "text": "we started scaling down the engine split",
    "start": "781920",
    "end": "784880"
  },
  {
    "text": "parallel to this migration we had new",
    "start": "784880",
    "end": "786720"
  },
  {
    "text": "features and services also added to the",
    "start": "786720",
    "end": "788880"
  },
  {
    "text": "environment",
    "start": "788880",
    "end": "789680"
  },
  {
    "text": "creating problems of their own so when",
    "start": "789680",
    "end": "791680"
  },
  {
    "text": "problems started hitting us",
    "start": "791680",
    "end": "793040"
  },
  {
    "text": "we didn't recognize what is the source",
    "start": "793040",
    "end": "795040"
  },
  {
    "text": "of them",
    "start": "795040",
    "end": "797440"
  },
  {
    "start": "796000",
    "end": "796000"
  },
  {
    "text": "everything was looking good except",
    "start": "797440",
    "end": "800320"
  },
  {
    "text": "occasional 503",
    "start": "800320",
    "end": "801839"
  },
  {
    "text": "errors and we also noticed an increase",
    "start": "801839",
    "end": "804160"
  },
  {
    "text": "in nx domains received from code dns",
    "start": "804160",
    "end": "806560"
  },
  {
    "text": "that started when we deployed envoy we",
    "start": "806560",
    "end": "809279"
  },
  {
    "text": "had no success tuning tube dns and had",
    "start": "809279",
    "end": "811920"
  },
  {
    "text": "little information to understand the",
    "start": "811920",
    "end": "814079"
  },
  {
    "text": "source of the problem",
    "start": "814079",
    "end": "816240"
  },
  {
    "text": "like any other team we were busy and",
    "start": "816240",
    "end": "818240"
  },
  {
    "text": "with little information or access",
    "start": "818240",
    "end": "821279"
  },
  {
    "text": "this turned to be the status quo for",
    "start": "821279",
    "end": "823519"
  },
  {
    "text": "four months",
    "start": "823519",
    "end": "824399"
  },
  {
    "text": "until goldfaced arrived",
    "start": "824399",
    "end": "827760"
  },
  {
    "text": "if you're not aware go fest is our",
    "start": "827760",
    "end": "830240"
  },
  {
    "text": "biggest event of the year",
    "start": "830240",
    "end": "832320"
  },
  {
    "text": "when starting to scale the number of",
    "start": "832320",
    "end": "834160"
  },
  {
    "text": "game servers in preparation for the",
    "start": "834160",
    "end": "835920"
  },
  {
    "text": "event",
    "start": "835920",
    "end": "836399"
  },
  {
    "text": "we started receiving reports of an",
    "start": "836399",
    "end": "838560"
  },
  {
    "text": "increase",
    "start": "838560",
    "end": "839440"
  },
  {
    "text": "in five or three errors this happened",
    "start": "839440",
    "end": "842160"
  },
  {
    "text": "immediately after deploying",
    "start": "842160",
    "end": "843760"
  },
  {
    "text": "envoy images with the new configuration",
    "start": "843760",
    "end": "847360"
  },
  {
    "text": "if you remember step two in the scallop",
    "start": "847360",
    "end": "849279"
  },
  {
    "text": "scenario that was before",
    "start": "849279",
    "end": "852240"
  },
  {
    "text": "we even tried to scaling void but hoping",
    "start": "852240",
    "end": "856160"
  },
  {
    "start": "856000",
    "end": "856000"
  },
  {
    "text": "this might be related to load",
    "start": "856160",
    "end": "858079"
  },
  {
    "text": "with interesting void fleet size we",
    "start": "858079",
    "end": "860240"
  },
  {
    "text": "didn't know that this",
    "start": "860240",
    "end": "861440"
  },
  {
    "text": "actually made things worse we also",
    "start": "861440",
    "end": "864720"
  },
  {
    "text": "started noticing",
    "start": "864720",
    "end": "865920"
  },
  {
    "text": "an increase in player complaints on the",
    "start": "865920",
    "end": "868079"
  },
  {
    "text": "down detector",
    "start": "868079",
    "end": "869440"
  },
  {
    "text": "we investigated that configuration wrong",
    "start": "869440",
    "end": "872399"
  },
  {
    "text": "health check",
    "start": "872399",
    "end": "873360"
  },
  {
    "text": "everything but found no clue except",
    "start": "873360",
    "end": "876880"
  },
  {
    "text": "an interesting decrease in coop dns",
    "start": "876880",
    "end": "879920"
  },
  {
    "text": "errors",
    "start": "879920",
    "end": "880880"
  },
  {
    "text": "that part confused us more but then we",
    "start": "880880",
    "end": "883120"
  },
  {
    "text": "found a hint",
    "start": "883120",
    "end": "885680"
  },
  {
    "text": "and just a reminder our deployed void",
    "start": "885680",
    "end": "888320"
  },
  {
    "text": "version",
    "start": "888320",
    "end": "888880"
  },
  {
    "text": "was 112 and this was fixed only in 114",
    "start": "888880",
    "end": "895360"
  },
  {
    "text": "so given the timeline and the importance",
    "start": "895760",
    "end": "898079"
  },
  {
    "text": "of go fest the company",
    "start": "898079",
    "end": "899519"
  },
  {
    "text": "to the company engines was deployed to",
    "start": "899519",
    "end": "901680"
  },
  {
    "text": "replace envoy and go fast fast with no",
    "start": "901680",
    "end": "904079"
  },
  {
    "text": "issues from the edge proxy and we went",
    "start": "904079",
    "end": "906560"
  },
  {
    "text": "back to our low test environment to try",
    "start": "906560",
    "end": "908240"
  },
  {
    "text": "and figure out how to solve this problem",
    "start": "908240",
    "end": "912639"
  },
  {
    "start": "911000",
    "end": "911000"
  },
  {
    "text": "back to our low test environment we",
    "start": "912639",
    "end": "914639"
  },
  {
    "text": "started with reconfiguring it to match",
    "start": "914639",
    "end": "916720"
  },
  {
    "text": "production",
    "start": "916720",
    "end": "918000"
  },
  {
    "text": "we scale it up to much one tenth of",
    "start": "918000",
    "end": "920320"
  },
  {
    "text": "production and configure to have",
    "start": "920320",
    "end": "922800"
  },
  {
    "text": "x10 services pointing to the game",
    "start": "922800",
    "end": "925120"
  },
  {
    "text": "servers in help to recreate the",
    "start": "925120",
    "end": "927360"
  },
  {
    "text": "conditions that caused the problem with",
    "start": "927360",
    "end": "929040"
  },
  {
    "text": "sound production",
    "start": "929040",
    "end": "930160"
  },
  {
    "text": "it was easy we got the ns errors already",
    "start": "930160",
    "end": "932959"
  },
  {
    "text": "when hitting one",
    "start": "932959",
    "end": "934320"
  },
  {
    "text": "30s of the production environment",
    "start": "934320",
    "end": "937519"
  },
  {
    "text": "at that point i already knew what was",
    "start": "937519",
    "end": "939440"
  },
  {
    "text": "the problem and maybe some of you are",
    "start": "939440",
    "end": "941120"
  },
  {
    "text": "already guessing it",
    "start": "941120",
    "end": "944000"
  },
  {
    "start": "944000",
    "end": "944000"
  },
  {
    "text": "it was our configuration that caused the",
    "start": "944240",
    "end": "946560"
  },
  {
    "text": "loading dns queries",
    "start": "946560",
    "end": "948320"
  },
  {
    "text": "our stateful back-end configuration was",
    "start": "948320",
    "end": "951519"
  },
  {
    "text": "causing the proxies to query two dns",
    "start": "951519",
    "end": "954240"
  },
  {
    "text": "four times for each game server now",
    "start": "954240",
    "end": "956880"
  },
  {
    "text": "multiply that by",
    "start": "956880",
    "end": "958000"
  },
  {
    "text": "the number of proxies add to that the",
    "start": "958000",
    "end": "960320"
  },
  {
    "text": "number of game servers",
    "start": "960320",
    "end": "961600"
  },
  {
    "text": "and the number becomes too high a",
    "start": "961600",
    "end": "964560"
  },
  {
    "text": "solution we tested",
    "start": "964560",
    "end": "965839"
  },
  {
    "text": "was google cloud new dns caching",
    "start": "965839",
    "end": "968240"
  },
  {
    "text": "operator which made the",
    "start": "968240",
    "end": "969680"
  },
  {
    "text": "errors disappear completely but will",
    "start": "969680",
    "end": "972959"
  },
  {
    "text": "require an update to the jke version",
    "start": "972959",
    "end": "976639"
  },
  {
    "start": "976000",
    "end": "976000"
  },
  {
    "text": "so my personal learnings are stop",
    "start": "976639",
    "end": "978720"
  },
  {
    "text": "ignoring intermittent error",
    "start": "978720",
    "end": "980800"
  },
  {
    "text": "testing production like environment",
    "start": "980800",
    "end": "982399"
  },
  {
    "text": "instead of a low test environment",
    "start": "982399",
    "end": "984639"
  },
  {
    "text": "continue evolving this traffic shift",
    "start": "984639",
    "end": "987040"
  },
  {
    "text": "scenario to support future software and",
    "start": "987040",
    "end": "989360"
  },
  {
    "text": "infrastructure upgrade just a reminder",
    "start": "989360",
    "end": "991920"
  },
  {
    "text": "we will need to upgrade our jke version",
    "start": "991920",
    "end": "997120"
  },
  {
    "text": "one last part of envoy i would like to",
    "start": "997120",
    "end": "999199"
  },
  {
    "text": "talk about is our work to extend",
    "start": "999199",
    "end": "1001279"
  },
  {
    "text": "of extending envoy mainly to provide",
    "start": "1001279",
    "end": "1004079"
  },
  {
    "text": "external developers access to our",
    "start": "1004079",
    "end": "1005839"
  },
  {
    "text": "platform",
    "start": "1005839",
    "end": "1006720"
  },
  {
    "text": "without exposing our ip",
    "start": "1006720",
    "end": "1010480"
  },
  {
    "start": "1010000",
    "end": "1010000"
  },
  {
    "text": "unfortunately i can't share a lot about",
    "start": "1010480",
    "end": "1012320"
  },
  {
    "text": "this work i can tell you that included",
    "start": "1012320",
    "end": "1014639"
  },
  {
    "text": "request validation for http and",
    "start": "1014639",
    "end": "1016480"
  },
  {
    "text": "websockets requests",
    "start": "1016480",
    "end": "1018000"
  },
  {
    "text": "shifting the responsibility to block",
    "start": "1018000",
    "end": "1020079"
  },
  {
    "text": "this traffic already in the proxy",
    "start": "1020079",
    "end": "1022639"
  },
  {
    "text": "it also manipulates the incoming traffic",
    "start": "1022639",
    "end": "1025360"
  },
  {
    "text": "based on the received message",
    "start": "1025360",
    "end": "1027520"
  },
  {
    "text": "and provide us with additional metrics",
    "start": "1027520",
    "end": "1029520"
  },
  {
    "text": "related to the games",
    "start": "1029520",
    "end": "1031520"
  },
  {
    "text": "part of this includes a websocket custom",
    "start": "1031520",
    "end": "1033760"
  },
  {
    "text": "filter that we wonder if",
    "start": "1033760",
    "end": "1035600"
  },
  {
    "text": "it shouldn't be part of the platform",
    "start": "1035600",
    "end": "1037918"
  },
  {
    "text": "even for the purpose of",
    "start": "1037919",
    "end": "1039360"
  },
  {
    "text": "upgrading it to a grpc at the proxy",
    "start": "1039360",
    "end": "1043918"
  },
  {
    "text": "and this is truly how our deployment",
    "start": "1044160",
    "end": "1046400"
  },
  {
    "text": "looks like",
    "start": "1046400",
    "end": "1048880"
  },
  {
    "text": "i would like to summarize this stock",
    "start": "1049840",
    "end": "1051360"
  },
  {
    "text": "with a wine voice slide",
    "start": "1051360",
    "end": "1053440"
  },
  {
    "start": "1053000",
    "end": "1053000"
  },
  {
    "text": "well we chose envoy for the better",
    "start": "1053440",
    "end": "1055440"
  },
  {
    "text": "observability in monitoring",
    "start": "1055440",
    "end": "1057440"
  },
  {
    "text": "service to service proxy the",
    "start": "1057440",
    "end": "1059039"
  },
  {
    "text": "configuration the better scale",
    "start": "1059039",
    "end": "1061280"
  },
  {
    "text": "experience with xds",
    "start": "1061280",
    "end": "1062720"
  },
  {
    "text": "and finally the extendability",
    "start": "1062720",
    "end": "1066160"
  },
  {
    "text": "thank you for listening and i would like",
    "start": "1066160",
    "end": "1067760"
  },
  {
    "text": "to thank everyone in niantic that helped",
    "start": "1067760",
    "end": "1069840"
  },
  {
    "text": "me in this work",
    "start": "1069840",
    "end": "1071360"
  },
  {
    "text": "and for those of you that find this",
    "start": "1071360",
    "end": "1073039"
  },
  {
    "text": "interesting and would like to learn more",
    "start": "1073039",
    "end": "1075600"
  },
  {
    "text": "we are hiring feel free to reach to me",
    "start": "1075600",
    "end": "1078400"
  },
  {
    "text": "and check out our career website",
    "start": "1078400",
    "end": "1080720"
  },
  {
    "text": "thank you and i will be very happy to",
    "start": "1080720",
    "end": "1082640"
  },
  {
    "text": "answer now any question you might have",
    "start": "1082640",
    "end": "1086799"
  },
  {
    "text": "hi everybody i hope you hear me and to",
    "start": "1087679",
    "end": "1090400"
  },
  {
    "text": "me",
    "start": "1090400",
    "end": "1090960"
  },
  {
    "text": "um and i will be very happy to answer",
    "start": "1090960",
    "end": "1093679"
  },
  {
    "text": "any",
    "start": "1093679",
    "end": "1094080"
  },
  {
    "text": "of your questions that were in the uh",
    "start": "1094080",
    "end": "1096480"
  },
  {
    "text": "chat",
    "start": "1096480",
    "end": "1097520"
  },
  {
    "text": "um so uh",
    "start": "1097520",
    "end": "1100640"
  },
  {
    "text": "first question did you observe any",
    "start": "1100640",
    "end": "1102320"
  },
  {
    "text": "issues when moving from engines to",
    "start": "1102320",
    "end": "1103840"
  },
  {
    "text": "devoid in terms of how the downstream",
    "start": "1103840",
    "end": "1105840"
  },
  {
    "text": "connections are",
    "start": "1105840",
    "end": "1107360"
  },
  {
    "text": "maintained by engines versus envoy and i",
    "start": "1107360",
    "end": "1110320"
  },
  {
    "text": "actually",
    "start": "1110320",
    "end": "1110880"
  },
  {
    "text": "asked here um continuing questions",
    "start": "1110880",
    "end": "1113760"
  },
  {
    "text": "regarding uh",
    "start": "1113760",
    "end": "1114799"
  },
  {
    "text": "was it something specific so um as",
    "start": "1114799",
    "end": "1118160"
  },
  {
    "text": "as sweeney that trinity uh mentioned we",
    "start": "1118160",
    "end": "1121200"
  },
  {
    "text": "have seen an issue where",
    "start": "1121200",
    "end": "1122640"
  },
  {
    "text": "void retains high throughput connections",
    "start": "1122640",
    "end": "1124720"
  },
  {
    "text": "constantly",
    "start": "1124720",
    "end": "1125679"
  },
  {
    "text": "whereas engines releases them priority",
    "start": "1125679",
    "end": "1127760"
  },
  {
    "text": "did you see such issue during your",
    "start": "1127760",
    "end": "1129600"
  },
  {
    "text": "migration",
    "start": "1129600",
    "end": "1130880"
  },
  {
    "text": "well uh we didn't see this as an issue",
    "start": "1130880",
    "end": "1132880"
  },
  {
    "text": "um this was",
    "start": "1132880",
    "end": "1134480"
  },
  {
    "text": "part of the behavior we already knew",
    "start": "1134480",
    "end": "1137600"
  },
  {
    "text": "that this part of your boy",
    "start": "1137600",
    "end": "1139200"
  },
  {
    "text": "um as i mentioned the main difference",
    "start": "1139200",
    "end": "1142080"
  },
  {
    "text": "that we",
    "start": "1142080",
    "end": "1143039"
  },
  {
    "text": "had between envoy and engines was",
    "start": "1143039",
    "end": "1145840"
  },
  {
    "text": "actually around the dns",
    "start": "1145840",
    "end": "1147280"
  },
  {
    "text": "um and the dns query and jenks",
    "start": "1147280",
    "end": "1150559"
  },
  {
    "text": "are not um queering the dns and such",
    "start": "1150559",
    "end": "1154240"
  },
  {
    "text": "uh so frequently which was actually um",
    "start": "1154240",
    "end": "1157600"
  },
  {
    "text": "made us had some made us do some work",
    "start": "1157600",
    "end": "1160160"
  },
  {
    "text": "models in our environments",
    "start": "1160160",
    "end": "1161440"
  },
  {
    "text": "with and we didn't want we can now",
    "start": "1161440",
    "end": "1163280"
  },
  {
    "text": "remove them but",
    "start": "1163280",
    "end": "1165840"
  },
  {
    "text": "we actually um the only issue that we",
    "start": "1165840",
    "end": "1168559"
  },
  {
    "text": "had was with the",
    "start": "1168559",
    "end": "1169760"
  },
  {
    "text": "number of dns scores that we had um",
    "start": "1169760",
    "end": "1173440"
  },
  {
    "text": "second question was um can you elaborate",
    "start": "1173440",
    "end": "1176480"
  },
  {
    "text": "on switching from utilization based on",
    "start": "1176480",
    "end": "1178640"
  },
  {
    "text": "bouncing to count based load balancing",
    "start": "1178640",
    "end": "1181200"
  },
  {
    "text": "does count based load balancing refers",
    "start": "1181200",
    "end": "1183520"
  },
  {
    "text": "to a number of",
    "start": "1183520",
    "end": "1184720"
  },
  {
    "text": "incoming requests um so i",
    "start": "1184720",
    "end": "1188240"
  },
  {
    "text": "forward this question to our sres and um",
    "start": "1188240",
    "end": "1191679"
  },
  {
    "text": "part of our team that is also was",
    "start": "1191679",
    "end": "1193679"
  },
  {
    "text": "working on that",
    "start": "1193679",
    "end": "1194720"
  },
  {
    "text": "um i i believe this is a gclb",
    "start": "1194720",
    "end": "1197760"
  },
  {
    "text": "uh property but i might be wrong here",
    "start": "1197760",
    "end": "1200720"
  },
  {
    "text": "and",
    "start": "1200720",
    "end": "1201200"
  },
  {
    "text": "um if we were mainly um",
    "start": "1201200",
    "end": "1205039"
  },
  {
    "text": "we're mainly just working on yes the",
    "start": "1205039",
    "end": "1206880"
  },
  {
    "text": "incoming requests so",
    "start": "1206880",
    "end": "1208159"
  },
  {
    "text": "ensure that they're being um correctly",
    "start": "1208159",
    "end": "1211039"
  },
  {
    "text": "um",
    "start": "1211039",
    "end": "1212000"
  },
  {
    "text": "load balance um between different envoy",
    "start": "1212000",
    "end": "1215120"
  },
  {
    "text": "instances",
    "start": "1215120",
    "end": "1216159"
  },
  {
    "text": "of the backend services and um",
    "start": "1216159",
    "end": "1220240"
  },
  {
    "text": "thank you for the um ip deny list we",
    "start": "1220240",
    "end": "1222880"
  },
  {
    "text": "will definitely look into that i think",
    "start": "1222880",
    "end": "1224400"
  },
  {
    "text": "we looked at that in the past but",
    "start": "1224400",
    "end": "1226320"
  },
  {
    "text": "if you notice from the presentation we",
    "start": "1226320",
    "end": "1228080"
  },
  {
    "text": "started our journey a year ago",
    "start": "1228080",
    "end": "1230080"
  },
  {
    "text": "uh when it was in void 12 and in 112 and",
    "start": "1230080",
    "end": "1233280"
  },
  {
    "text": "it was",
    "start": "1233280",
    "end": "1234000"
  },
  {
    "text": "um envoy evolved a lot since then",
    "start": "1234000",
    "end": "1237840"
  },
  {
    "text": "there are a lot of new things that we",
    "start": "1237840",
    "end": "1239440"
  },
  {
    "text": "are using um",
    "start": "1239440",
    "end": "1242559"
  },
  {
    "text": "so let me get back um",
    "start": "1242559",
    "end": "1248320"
  },
  {
    "text": "for another questions",
    "start": "1248320",
    "end": "1252080"
  },
  {
    "text": "so i get a lot of uh feedback career",
    "start": "1261120",
    "end": "1263520"
  },
  {
    "text": "around what i should do look for the ip",
    "start": "1263520",
    "end": "1265840"
  },
  {
    "text": "uh deny um thank you i'll definitely",
    "start": "1265840",
    "end": "1268559"
  },
  {
    "text": "look into them it's really interesting i",
    "start": "1268559",
    "end": "1270559"
  },
  {
    "text": "heard that our back",
    "start": "1270559",
    "end": "1271600"
  },
  {
    "text": "can help with that um",
    "start": "1271600",
    "end": "1277840"
  },
  {
    "text": "well uh rubens if you'll tell me which",
    "start": "1279280",
    "end": "1281440"
  },
  {
    "text": "slide maybe i can share uh",
    "start": "1281440",
    "end": "1282880"
  },
  {
    "text": "the presentation but i think everything",
    "start": "1282880",
    "end": "1285120"
  },
  {
    "text": "will be online as soon",
    "start": "1285120",
    "end": "1286880"
  },
  {
    "text": "and you are always welcome to uh contact",
    "start": "1286880",
    "end": "1289280"
  },
  {
    "text": "me through the stack i'm on the",
    "start": "1289280",
    "end": "1291200"
  },
  {
    "text": "voice live channels um or through uh",
    "start": "1291200",
    "end": "1294320"
  },
  {
    "text": "linkedin or my email and thank you",
    "start": "1294320",
    "end": "1297520"
  },
  {
    "text": "everybody",
    "start": "1297520",
    "end": "1298320"
  },
  {
    "text": "um somebody asked about the control",
    "start": "1298320",
    "end": "1301760"
  },
  {
    "text": "plane and i",
    "start": "1301760",
    "end": "1302400"
  },
  {
    "text": "missed the question so we are using",
    "start": "1302400",
    "end": "1304640"
  },
  {
    "text": "control plane",
    "start": "1304640",
    "end": "1305840"
  },
  {
    "text": "um that was uh one of our moves",
    "start": "1305840",
    "end": "1309840"
  },
  {
    "text": "to make the scale better um we are",
    "start": "1309840",
    "end": "1313280"
  },
  {
    "text": "actually",
    "start": "1313280",
    "end": "1313919"
  },
  {
    "text": "now going um to start deploying it",
    "start": "1313919",
    "end": "1316559"
  },
  {
    "text": "everywhere",
    "start": "1316559",
    "end": "1317360"
  },
  {
    "text": "we haven't worked it's definitely going",
    "start": "1317360",
    "end": "1320000"
  },
  {
    "text": "to improve our scale",
    "start": "1320000",
    "end": "1321840"
  },
  {
    "text": "experience",
    "start": "1321840",
    "end": "1324400"
  },
  {
    "text": "and by the way for the control plane",
    "start": "1330240",
    "end": "1331919"
  },
  {
    "text": "we're using of course lds and cds",
    "start": "1331919",
    "end": "1334320"
  },
  {
    "text": "um because our listeners uh path",
    "start": "1334320",
    "end": "1337360"
  },
  {
    "text": "matchings and clusters",
    "start": "1337360",
    "end": "1339600"
  },
  {
    "text": "are really coupled into one to one",
    "start": "1339600",
    "end": "1343600"
  },
  {
    "text": "well we are no longer using engines",
    "start": "1345679",
    "end": "1348559"
  },
  {
    "text": "itself",
    "start": "1348559",
    "end": "1349360"
  },
  {
    "text": "um in most of our places and the one",
    "start": "1349360",
    "end": "1352799"
  },
  {
    "text": "that we are using i believe we're using",
    "start": "1352799",
    "end": "1354559"
  },
  {
    "text": "the open source",
    "start": "1354559",
    "end": "1361840"
  },
  {
    "text": "well i'm very happy to hear and help um",
    "start": "1371120",
    "end": "1375440"
  },
  {
    "text": "and we um we're very happy to share from",
    "start": "1375440",
    "end": "1379360"
  },
  {
    "text": "our experience",
    "start": "1379360",
    "end": "1380159"
  },
  {
    "text": "uh one of the things as i mentioned by",
    "start": "1380159",
    "end": "1381679"
  },
  {
    "text": "the way uh we did have to write a custom",
    "start": "1381679",
    "end": "1383760"
  },
  {
    "text": "filter for",
    "start": "1383760",
    "end": "1384880"
  },
  {
    "text": "uh web sockets which was a very",
    "start": "1384880",
    "end": "1387440"
  },
  {
    "text": "interesting experience",
    "start": "1387440",
    "end": "1389200"
  },
  {
    "text": "actually and we are probably um",
    "start": "1389200",
    "end": "1392799"
  },
  {
    "text": "we'll be um publishing it",
    "start": "1392799",
    "end": "1396080"
  },
  {
    "text": "in a couple of months we need to pass a",
    "start": "1396080",
    "end": "1397679"
  },
  {
    "text": "legal process for that",
    "start": "1397679",
    "end": "1399200"
  },
  {
    "text": "um so anybody everybody will be able to",
    "start": "1399200",
    "end": "1401440"
  },
  {
    "text": "use it",
    "start": "1401440",
    "end": "1403840"
  },
  {
    "text": "so um the number of rps per core on",
    "start": "1405280",
    "end": "1408960"
  },
  {
    "text": "our envoy um i do have it somewhere",
    "start": "1408960",
    "end": "1413120"
  },
  {
    "text": "but i don't really remember um and i",
    "start": "1413120",
    "end": "1416000"
  },
  {
    "text": "don't want just to throw numbers",
    "start": "1416000",
    "end": "1417760"
  },
  {
    "text": "so uh mikhail if you can um",
    "start": "1417760",
    "end": "1421200"
  },
  {
    "text": "just contact mrs tank i will be very",
    "start": "1421200",
    "end": "1423039"
  },
  {
    "text": "happy to answer that",
    "start": "1423039",
    "end": "1425919"
  },
  {
    "text": "and um yeah thank you everybody uh if",
    "start": "1427440",
    "end": "1430000"
  },
  {
    "text": "there are any more questions we have a",
    "start": "1430000",
    "end": "1431360"
  },
  {
    "text": "couple more minutes",
    "start": "1431360",
    "end": "1432640"
  },
  {
    "text": "but um if not then we have",
    "start": "1432640",
    "end": "1436080"
  },
  {
    "text": "six minutes for refreshing",
    "start": "1436080",
    "end": "1440158"
  },
  {
    "text": "thank you",
    "start": "1440480",
    "end": "1445840"
  },
  {
    "text": "engines features which we could not",
    "start": "1448080",
    "end": "1449840"
  },
  {
    "text": "replace with invoice was vip denials",
    "start": "1449840",
    "end": "1452000"
  },
  {
    "text": "that was mainly we actually uh gained a",
    "start": "1452000",
    "end": "1454640"
  },
  {
    "text": "lot of",
    "start": "1454640",
    "end": "1455440"
  },
  {
    "text": "things moving to enjoy um",
    "start": "1455440",
    "end": "1459679"
  },
  {
    "text": "and uh we we",
    "start": "1459679",
    "end": "1463279"
  },
  {
    "text": "really enjoyed doing this move so no",
    "start": "1463279",
    "end": "1465600"
  },
  {
    "text": "actually it was the other way around",
    "start": "1465600",
    "end": "1467520"
  },
  {
    "text": "except that the nightly switch i believe",
    "start": "1467520",
    "end": "1469679"
  },
  {
    "text": "you will find a solution very fast",
    "start": "1469679",
    "end": "1473520"
  },
  {
    "text": "thank you bye",
    "start": "1473520",
    "end": "1477679"
  }
]