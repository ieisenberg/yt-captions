[
  {
    "start": "0",
    "end": "61000"
  },
  {
    "text": "okay so I think it's a time to start to speak my name is Lee Jong I come from",
    "start": "89",
    "end": "5549"
  },
  {
    "text": "Alibaba and my co-speaker did not make here because these are problems that I will give you a solo speak today and the",
    "start": "5549",
    "end": "12509"
  },
  {
    "text": "topic that I would like to share is embracing upstream Canadians in websql",
    "start": "12509",
    "end": "17520"
  },
  {
    "text": "organization which basically are some user cases and lessons we learn from maintaining kubernetes cluster in more",
    "start": "17520",
    "end": "25019"
  },
  {
    "text": "than like hangs down ones nose cluster in Alibaba so this is a simple out",
    "start": "25019",
    "end": "31439"
  },
  {
    "text": "liable to desk topic and I will give you some little bit of talk about over background and how we achieved it a hard",
    "start": "31439",
    "end": "38610"
  },
  {
    "text": "multi-tenancy architecture and how we fix the container headache and of course what it comes in a headache and we'll",
    "start": "38610",
    "end": "45030"
  },
  {
    "text": "talk about the workload management and why we prefer the predictability and of course we will talk about scalability in",
    "start": "45030",
    "end": "51750"
  },
  {
    "text": "this tent on the nose cluster and the last but most important we will talk",
    "start": "51750",
    "end": "56940"
  },
  {
    "text": "little bit about how he danced with Reid the upstream okay so little bit",
    "start": "56940",
    "end": "62129"
  },
  {
    "start": "61000",
    "end": "61000"
  },
  {
    "text": "background is that our team in Alibaba actually serves both Alibaba cloud and",
    "start": "62129",
    "end": "67650"
  },
  {
    "text": "Alibaba Group the difference is Alibaba Group is the e-commerce system in China",
    "start": "67650",
    "end": "73350"
  },
  {
    "text": "which is actually one of the largest e-commerce platform in the world but Alibaba cloud is actually the biggest",
    "start": "73350",
    "end": "79619"
  },
  {
    "text": "Club ladder in Asia and we also provided the manager kuben a service like AWS or",
    "start": "79619",
    "end": "85380"
  },
  {
    "text": "Microsoft either allowing Alibaba Group this is a little bit different because we basically maintain stable internal",
    "start": "85380",
    "end": "92130"
  },
  {
    "text": "kubernetes cluster stand each cluster we will have more than 5,000 nodes and most",
    "start": "92130",
    "end": "97799"
  },
  {
    "text": "of them under the most one of them had like tens down the nodes at least and we",
    "start": "97799",
    "end": "103350"
  },
  {
    "text": "use them to serve this world's largest e-commerce platform and that is actually the user case I will talk about in",
    "start": "103350",
    "end": "109470"
  },
  {
    "text": "today's talk and all of this technique technology technologies tank under Alibaba Group is",
    "start": "109470",
    "end": "116549"
  },
  {
    "text": "actually based on open source technologies including kubernetes operator content D and one C and card",
    "start": "116549",
    "end": "122909"
  },
  {
    "text": "containers so this is a high-level architecture and as I mentioned that we are using a very large cluster to serve",
    "start": "122909",
    "end": "129959"
  },
  {
    "start": "124000",
    "end": "124000"
  },
  {
    "text": "all the business unit business unit from Alibaba Group and that also means this architecture",
    "start": "129959",
    "end": "136410"
  },
  {
    "text": "should be a hard multi-tenancy model but before talking about harmony tenancy and",
    "start": "136410",
    "end": "141570"
  },
  {
    "text": "information that what components we use in Alibaba Group so most of these",
    "start": "141570",
    "end": "147510"
  },
  {
    "text": "components are open source and upstream components for example the Eco be API server it's totally an boundary percent",
    "start": "147510",
    "end": "155130"
  },
  {
    "text": "upstream component but we do not use the default scheduler because we have a lot",
    "start": "155130",
    "end": "160770"
  },
  {
    "text": "of customized scheduling policies and algorithm we need to implement and also we focus a lot only scalability issue so",
    "start": "160770",
    "end": "168930"
  },
  {
    "text": "we write our own version of the scheduler we also use Kubus could be",
    "start": "168930",
    "end": "174060"
  },
  {
    "text": "controller manager and we use several of the controllers but we also implement several of our own controllers because",
    "start": "174060",
    "end": "180450"
  },
  {
    "text": "we have our own Road policies and I will talk about this more in the later and",
    "start": "180450",
    "end": "185670"
  },
  {
    "text": "slides and the the whole cluster is actually bare metal cluster but this bare metal cluster all the physical",
    "start": "185670",
    "end": "192300"
  },
  {
    "text": "machines are manager by Alibaba cloud bi-metal instances is something like",
    "start": "192300",
    "end": "197570"
  },
  {
    "text": "on-premise instances from a lobbyist or either and because we have the actually",
    "start": "197570",
    "end": "203580"
  },
  {
    "text": "itself it is a fixed size cluster resource pool so we also have the connector which is implemented by were",
    "start": "203580",
    "end": "210600"
  },
  {
    "text": "to cooperate so whenever there are some traffic burst or shefte peak and then we",
    "start": "210600",
    "end": "216480"
  },
  {
    "text": "can actually be we can we can actually be able to schedule their part to a another resource pool which is managed",
    "start": "216480",
    "end": "222390"
  },
  {
    "text": "by Alibaba cloud by virtual machines and this is actually implemented by a virtual kulit if you happen to go to my",
    "start": "222390",
    "end": "229500"
  },
  {
    "text": "talk during our couplet even know about them so this is basically the high level architecture and I will go to more",
    "start": "229500",
    "end": "236430"
  },
  {
    "text": "details and the first of all I want to mention is the hard multi-tenancy model",
    "start": "236430",
    "end": "241950"
  },
  {
    "start": "237000",
    "end": "237000"
  },
  {
    "text": "which is a very unique in our your cluster because we are using a virtual",
    "start": "241950",
    "end": "247320"
  },
  {
    "text": "cluster best hard multi-tenancy model and the key idea of this model is that",
    "start": "247320",
    "end": "252840"
  },
  {
    "text": "we hope already for every tenant have a tenant cluster so it's something like a",
    "start": "252840",
    "end": "259260"
  },
  {
    "text": "could be on could be architecture but the difference is every tenant cluster is actually composed by a by a dedicated",
    "start": "259260",
    "end": "267270"
  },
  {
    "text": "kubernetes control plan which is totally upstream components but we stay where were shown notes so there's no real",
    "start": "267270",
    "end": "273539"
  },
  {
    "text": "notes for lieutenant cluster and the diversion notes are basically if you object we implemented in the HDD and",
    "start": "273539",
    "end": "280520"
  },
  {
    "text": "this object are virtualized from the real notes by Union small engine twitch",
    "start": "280520",
    "end": "285810"
  },
  {
    "text": "name is version node engine being engine and it is basically a proxy on top of",
    "start": "285810",
    "end": "290970"
  },
  {
    "text": "crew blade so it will handle the inbound and outbound requests between crew blade and the tenant master so it's specific",
    "start": "290970",
    "end": "298110"
  },
  {
    "text": "basically like her proxy and if we also have virtual couplet in this place in case we want to schedule pod to other",
    "start": "298110",
    "end": "305130"
  },
  {
    "text": "resource poor that is ideally the same we will provide a virtual cluster to the",
    "start": "305130",
    "end": "311699"
  },
  {
    "text": "f2 every tenant and by doing this we actually achieved two co-locating the",
    "start": "311699",
    "end": "318419"
  },
  {
    "text": "workloads from every tenant in the same cluster and we share resources and that's why we do not need to run could",
    "start": "318419",
    "end": "324810"
  },
  {
    "text": "be scheduler in tenant cluster because we have a unified scheduler the unified scheduler will handle every tenant were",
    "start": "324810",
    "end": "331889"
  },
  {
    "text": "closed because it is tenant aware and do the fight until the five grand scheduling pest only conditions of the",
    "start": "331889",
    "end": "337830"
  },
  {
    "text": "hawk cluster to achieve high resource utilization and all of this architecture and components will be open sourced",
    "start": "337830",
    "end": "344310"
  },
  {
    "text": "during the Kubik on North America of this year and if you are interested in that you can just check the upstream",
    "start": "344310",
    "end": "351000"
  },
  {
    "text": "talk be proposed in the upstream community so this is the multi-tenancy a second thing I want to mention is",
    "start": "351000",
    "end": "357779"
  },
  {
    "text": "actually how we migrate applications from Alibaba to container this is very interesting because Alibaba has been",
    "start": "357779",
    "end": "364380"
  },
  {
    "text": "using container for very long time but I will say they are using container there's an anti container pattern at one",
    "start": "364380",
    "end": "371279"
  },
  {
    "text": "of the example is so-called a rich container so I was very curious what is rich content even when I first joined",
    "start": "371279",
    "end": "377699"
  },
  {
    "text": "the company because I'm thinking okay why this container the rich then I deep",
    "start": "377699",
    "end": "383430"
  },
  {
    "text": "dive into the project I found it very interesting because you can basically fight everything in studies container",
    "start": "383430",
    "end": "388650"
  },
  {
    "text": "for example you can fight there is the application that you can also further there are a lot of start and stop",
    "start": "388650",
    "end": "394860"
  },
  {
    "text": "scripts inside and you you will then fight something like as I said she did demon",
    "start": "394860",
    "end": "400650"
  },
  {
    "text": "by the log ancient demon you will fight morning to demon your father there the cash catch system inside your file",
    "start": "400650",
    "end": "407100"
  },
  {
    "text": "there's the virtual IP client you guys Clyde your father there a lot of proxies service service image engines",
    "start": "407100",
    "end": "413550"
  },
  {
    "text": "everything's basically in the same container and it will also follow that is the first process of this container",
    "start": "413550",
    "end": "418889"
  },
  {
    "text": "is not to the application it's a system D so uh I just got it so the rich",
    "start": "418889",
    "end": "424500"
  },
  {
    "text": "container means you can fight everything in a container just like the pocket of a dollar a month so that's why they didn't",
    "start": "424500",
    "end": "430530"
  },
  {
    "text": "reach because it's not because it had a lot of money and I also realized that the reason the people want to do that is",
    "start": "430530",
    "end": "437430"
  },
  {
    "text": "just because they want to make this container act as a VM so they can microwave applications more easier to",
    "start": "437430",
    "end": "443729"
  },
  {
    "text": "this container but this actually caused a lot of trouble because the developer",
    "start": "443729",
    "end": "449220"
  },
  {
    "text": "team becomes used to use this special container they are using container like the virtual machine for example they",
    "start": "449220",
    "end": "455370"
  },
  {
    "text": "want to start the container first and then log into the container and then startup application that don't think",
    "start": "455370",
    "end": "461580"
  },
  {
    "text": "that container has the same life cycle as their application that's the first problem and the second problem is that",
    "start": "461580",
    "end": "467550"
  },
  {
    "text": "they just want to write files freely inside a container that don't they have",
    "start": "467550",
    "end": "473220"
  },
  {
    "text": "no concept of volume so they just the right files right that user data in the container at the risk of losing the",
    "start": "473220",
    "end": "479699"
  },
  {
    "text": "container some day so this is really a terrible situation that we want to fix",
    "start": "479699",
    "end": "484800"
  },
  {
    "text": "and the way we fix that is using of course using concept at a pod I think",
    "start": "484800",
    "end": "489930"
  },
  {
    "start": "485000",
    "end": "485000"
  },
  {
    "text": "you guys might know that pod is basically a group of containers which has very tightly coupled relationship so",
    "start": "489930",
    "end": "496830"
  },
  {
    "text": "in Alibaba a typical part in over clusters like this it will have an",
    "start": "496830",
    "end": "502830"
  },
  {
    "text": "application container of course and then has a group of other static hearts one",
    "start": "502830",
    "end": "508229"
  },
  {
    "text": "of the static cars is the live upgrading static car which is used for LA use for live upgrading data or application which",
    "start": "508229",
    "end": "514890"
  },
  {
    "text": "is supported by many java applications so the live the live upgrade container live a quest sidecar",
    "start": "514890",
    "end": "522089"
  },
  {
    "text": "will copy data from its image to the volume which is shared by the application container so application",
    "start": "522089",
    "end": "527910"
  },
  {
    "text": "container can then load the data from this shared volume and the trigger reload so we don't need to redeploy",
    "start": "527910",
    "end": "533610"
  },
  {
    "text": "application the other study cars including the service mission service mesh-like car",
    "start": "533610",
    "end": "538980"
  },
  {
    "text": "including some assistance are like cash in as client also including some monitoring or logging agents that which",
    "start": "538980",
    "end": "546090"
  },
  {
    "text": "is classified as the operating side cars so Coelho here is because you know in a",
    "start": "546090",
    "end": "552480"
  },
  {
    "text": "politic container actually share volumes that we can exchange files do the share the volume and they also share the same",
    "start": "552480",
    "end": "557760"
  },
  {
    "text": "namespace so all the exotic cars container can communicate with each other freely but another thing I want to",
    "start": "557760",
    "end": "563220"
  },
  {
    "text": "mention that as long as you are Union pod you need to pay attention to five grand container lifecycle management in",
    "start": "563220",
    "end": "568920"
  },
  {
    "text": "this application just at least a very typical application or party or a cluster so besides the image or the",
    "start": "568920",
    "end": "577380"
  },
  {
    "text": "parameters of this application we prefer that you need developers to defy the",
    "start": "577380",
    "end": "582770"
  },
  {
    "text": "post start hook and a priest on hook for your pod for example you need to write",
    "start": "582770",
    "end": "588030"
  },
  {
    "text": "your start scripts inside of these hooks or even throughout your clean up scripts",
    "start": "588030",
    "end": "593310"
  },
  {
    "text": "in the pre stop hook and besides that we also require developers to defy clearly",
    "start": "593310",
    "end": "600210"
  },
  {
    "text": "what is your live nice probe that is what is your condition to make sure that",
    "start": "600210",
    "end": "605700"
  },
  {
    "text": "your application is healthy so this is actually how we fix the container headache by using part from kubernetes",
    "start": "605700",
    "end": "612300"
  },
  {
    "text": "to replace the rich container stuff another thing I may be automation in",
    "start": "612300",
    "end": "618150"
  },
  {
    "start": "616000",
    "end": "616000"
  },
  {
    "text": "that as long as you have a lot you have so many kinds of static card you have huge number of static cards so how can",
    "start": "618150",
    "end": "623970"
  },
  {
    "text": "you manage restart cards so we actually implemented a static operator the static operator is actually first of all it has",
    "start": "623970",
    "end": "630810"
  },
  {
    "text": "a CRD to collect all the information of the whole static cards in your cluster",
    "start": "630810",
    "end": "636030"
  },
  {
    "text": "and a second it provided you with operators that we can defy policies of static hearts but grant we quantify",
    "start": "636030",
    "end": "642840"
  },
  {
    "text": "policies of what cadeau static are you want to inject into what kind of applications or whenever static heart is",
    "start": "642840",
    "end": "650030"
  },
  {
    "text": "whenever static our image is upgraded you want to make sure you can wrote all the static cards in your cluster so all",
    "start": "650030",
    "end": "656100"
  },
  {
    "text": "of these operations will be handled by this unified operator to handle your all",
    "start": "656100",
    "end": "661620"
  },
  {
    "text": "of your study cards containers in your large-scale cluster so this is static",
    "start": "661620",
    "end": "666720"
  },
  {
    "text": "operator and then how about manager work clothes in your super scale cluster before",
    "start": "666720",
    "end": "673620"
  },
  {
    "start": "667000",
    "end": "667000"
  },
  {
    "text": "talking about workload management we need to make it clear that in kubernetes there are two concept first of all the",
    "start": "673620",
    "end": "680280"
  },
  {
    "text": "application application in kubernetes is actually a bunch of yamas there's no",
    "start": "680280",
    "end": "685440"
  },
  {
    "text": "such thing urban areas which name is applications or no that kind of things so it just",
    "start": "685440",
    "end": "690960"
  },
  {
    "text": "kind of it's just a group of Yama files which can be generated about helm or very customized but the lesson we",
    "start": "690960",
    "end": "697860"
  },
  {
    "text": "learned from here that managers these kind of Yama files in a super scale cluster is really the nightmare I will",
    "start": "697860",
    "end": "703680"
  },
  {
    "text": "explain how we do that later and a second concept in the world close the workloads are actually a group of",
    "start": "703680",
    "end": "709500"
  },
  {
    "text": "controllers for you to defy how to roll out applications or help to manage your",
    "start": "709500",
    "end": "714660"
  },
  {
    "text": "applications so all the concept like demon state job cron job staples that",
    "start": "714660",
    "end": "720420"
  },
  {
    "text": "are actually or workloads so that's why we say work clothes are actually predefined models of how you do row out",
    "start": "720420",
    "end": "727710"
  },
  {
    "text": "how you do instance recovery how you do batch deploy how you do cannery or blue",
    "start": "727710",
    "end": "733560"
  },
  {
    "text": "blue green deployment but lesson we learned here is okay so kubernetes a lot of building work loves the the in most",
    "start": "733560",
    "end": "741210"
  },
  {
    "text": "cases they are verified and work very well and they are very easy to use but in some other cases they may not work",
    "start": "741210",
    "end": "747900"
  },
  {
    "text": "and you expected so a talking about the",
    "start": "747900",
    "end": "753180"
  },
  {
    "text": "application management we are talking about the llamo and management the llamo files management is really difficult in",
    "start": "753180",
    "end": "759240"
  },
  {
    "text": "your super skill cluster but they're actually some tools you can use to solve this problem and the most important part",
    "start": "759240",
    "end": "765720"
  },
  {
    "text": "I want to mention in this talk is we actually use get ups with customized to manager all the AMA files in our cluster",
    "start": "765720",
    "end": "772920"
  },
  {
    "text": "so we basically do not revise our motels or 82mm effectively we use customize to",
    "start": "772920",
    "end": "779100"
  },
  {
    "text": "do that and we build a huge kit up spaced pipeline to generate here models",
    "start": "779100",
    "end": "784770"
  },
  {
    "text": "from your from oversea our CD system and then apply them to the kubernetes cluster so this is application",
    "start": "784770",
    "end": "790800"
  },
  {
    "text": "management and the second thing is as a mission the workloads may not meet your",
    "start": "790800",
    "end": "795960"
  },
  {
    "start": "793000",
    "end": "793000"
  },
  {
    "text": "requirement in some cases that's why we created open source project which naming the crews we'll be announced next month and the",
    "start": "795960",
    "end": "803430"
  },
  {
    "text": "cruise is actually what we call the kubernetes workloads advanced it's actually a fleet of customized the rDNA",
    "start": "803430",
    "end": "809640"
  },
  {
    "text": "controllers which will operate applications and a wave scale it is totally fully plugged ball because it's",
    "start": "809640",
    "end": "815550"
  },
  {
    "text": "basically a group of plugins and it will be a 100% open-source the next month and",
    "start": "815550",
    "end": "820650"
  },
  {
    "text": "one of these dumpling two mission in the cruise project is a in play state which",
    "start": "820650",
    "end": "826080"
  },
  {
    "text": "is actually our own version of stifle state the reason we have implicit is because you know largest bill closer",
    "start": "826080",
    "end": "832680"
  },
  {
    "text": "especially when you are running an online business platform then the predicate ability is really critical in",
    "start": "832680",
    "end": "838890"
  },
  {
    "text": "your system we don't want to see that whenever we do route we just kill all the part and credit them in most cases",
    "start": "838890",
    "end": "845370"
  },
  {
    "text": "we hope that we can upgrade the applications in place that we serve we don't need to reschedule apart or regret",
    "start": "845370",
    "end": "852000"
  },
  {
    "text": "apart that's why we really prefer pretty credibility and on the other hands",
    "start": "852000",
    "end": "857520"
  },
  {
    "text": "actually we can't use stay full site to do that in most cases but the problem",
    "start": "857520",
    "end": "862740"
  },
  {
    "text": "stay for state is staples that only provide you this very limited role to policies that's why we implemented is",
    "start": "862740",
    "end": "868890"
  },
  {
    "text": "the in-place state I just gave you a very very simple table to compare",
    "start": "868890",
    "end": "874710"
  },
  {
    "text": "between the deployment stay for stand in place a don't talk it a little to talk to target a lot today but we can focus",
    "start": "874710",
    "end": "882330"
  },
  {
    "text": "on three parts here the first of all in gameplay state we implement a policy which name is in place that so that",
    "start": "882330",
    "end": "889410"
  },
  {
    "text": "means you can row table applications without recreating a part another node everything will happen on the same note",
    "start": "889410",
    "end": "895410"
  },
  {
    "text": "everything will be recovered on the same note and another strategy is retry on our nodes so today if you are using some",
    "start": "895410",
    "end": "901710"
  },
  {
    "text": "building controllers for example if the node is broken so application just cannot stop for summary just cannot",
    "start": "901710",
    "end": "907710"
  },
  {
    "text": "start for some reason then this controller will just retry again again on the same node it will not it will",
    "start": "907710",
    "end": "914550"
  },
  {
    "text": "never try on on another node so we just add a new policy to in flew in place state so when if they are timeout for",
    "start": "914550",
    "end": "921870"
  },
  {
    "text": "starting over application this controller automatically recreated the pod on a new node instead of drawing the",
    "start": "921870",
    "end": "927660"
  },
  {
    "text": "same node another thing is that we added the pre and post update hug",
    "start": "927660",
    "end": "933580"
  },
  {
    "text": "the role of strategy of implicate is that you can just add your own logic in during the road you know all the",
    "start": "933580",
    "end": "940360"
  },
  {
    "text": "policies for your applications for example you can say I want to do something after 50 percentage of the",
    "start": "940360",
    "end": "946810"
  },
  {
    "text": "applications has been robbed you can add a script like that so this is hook so by",
    "start": "946810",
    "end": "951880"
  },
  {
    "text": "implementing this kind of customized controller we actually make it possible for so many business units on running on",
    "start": "951880",
    "end": "959650"
  },
  {
    "text": "top of our cluster can can use can run their applications as it will so that's",
    "start": "959650",
    "end": "965110"
  },
  {
    "text": "why that's how we handle the various requirements from over a player users ok",
    "start": "965110",
    "end": "971260"
  },
  {
    "start": "970000",
    "end": "970000"
  },
  {
    "text": "so let's talk about scalability but before talking about scalability of",
    "start": "971260",
    "end": "976270"
  },
  {
    "text": "animation that you need to know that what is your requirement because whenever you want to deploy deploy a",
    "start": "976270",
    "end": "982840"
  },
  {
    "text": "cluster with kubernetes cluster more than 5,000 xenos you to think about what is your goal so that's why at least our",
    "start": "982840",
    "end": "990040"
  },
  {
    "text": "requirement here in current kubernetes our team the nose",
    "start": "990040",
    "end": "995230"
  },
  {
    "text": "limit I mean the classic scale limit is like 5,000 nodes but the over cluster",
    "start": "995230",
    "end": "1000930"
  },
  {
    "text": "they require at least 10 K nodes in one cluster that hit over call so we require",
    "start": "1000930",
    "end": "1006600"
  },
  {
    "text": "a lot of nodes that's the first thing another thing is we require like 300",
    "start": "1006600",
    "end": "1013170"
  },
  {
    "text": "down the part in this in this cluster if you make a calculation well valid we actually has no such too much",
    "start": "1013170",
    "end": "1020010"
  },
  {
    "text": "requirement for the port number because every part in over cluster their size is",
    "start": "1020010",
    "end": "1025140"
  },
  {
    "text": "big so we generally run 20 or 30 parts on over node on every node so we don't",
    "start": "1025140",
    "end": "1031260"
  },
  {
    "text": "need to handle some cases which have lot of parts in our cluster so you need to make sure you understand the equipment",
    "start": "1031260",
    "end": "1037110"
  },
  {
    "text": "before you do a scalability improvement that's why we said a non golf or a",
    "start": "1037110",
    "end": "1043079"
  },
  {
    "text": "cluster is to care about the total number of the containers or parts per node which is a little bit different it",
    "start": "1043080",
    "end": "1049080"
  },
  {
    "text": "may be from your case or from your company ok so this our grummond please remember that we care about large",
    "start": "1049080",
    "end": "1055830"
  },
  {
    "text": "cluster but not large number the part and another thing I did not mention here that we have huge number of C RDS and",
    "start": "1055830",
    "end": "1063480"
  },
  {
    "text": "operators running over cluster because we need to store a lot of be nice unit on top of our cluster and",
    "start": "1063480",
    "end": "1069230"
  },
  {
    "text": "the basically everybody's and unit will have like 100 is the artis divide to",
    "start": "1069230",
    "end": "1074419"
  },
  {
    "text": "integrate with our past with our class with our kubernetes cluster because they",
    "start": "1074419",
    "end": "1080210"
  },
  {
    "text": "may have their own platform and service they may have their own East Joe they may have their own service platform so I",
    "start": "1080210",
    "end": "1086480"
  },
  {
    "text": "read a really every platform will use the rd in a controller to integrate with over kubernetes so basically we have",
    "start": "1086480",
    "end": "1092809"
  },
  {
    "text": "huge number of ste RDS and CRS running in our cluster which also give us a lot of burden for the scalability part I",
    "start": "1092809",
    "end": "1099619"
  },
  {
    "text": "will explain this a little bit later but before you figure out ok so after we figure out your requirement and you want",
    "start": "1099619",
    "end": "1106369"
  },
  {
    "text": "to do some research on your cluster the first priority is how you can discover",
    "start": "1106369",
    "end": "1111470"
  },
  {
    "text": "the scalability issue in this tank ace in this tank annals cluster so that's",
    "start": "1111470",
    "end": "1116720"
  },
  {
    "text": "why we actually developed a group a performance benchmark toolkit and this there's no magic here because we are",
    "start": "1116720",
    "end": "1124070"
  },
  {
    "start": "1117000",
    "end": "1117000"
  },
  {
    "text": "basically using the open source project which named the cubing mark and it is total open source and the own upstream",
    "start": "1124070",
    "end": "1130009"
  },
  {
    "text": "we just made a little bit modification to interact to integrate it it weighs over a cloud infrastructure and it will",
    "start": "1130009",
    "end": "1136970"
  },
  {
    "text": "also implement a HTTP HTTP interface on top of qu be an auto on top could be",
    "start": "1136970",
    "end": "1142909"
  },
  {
    "text": "mark because we want to make it more easier for us to trigger the scalability performance test and the most important",
    "start": "1142909",
    "end": "1151669"
  },
  {
    "text": "concept of could be mark is that it will help you to create Holub nodes which is basically a group of a pause and in",
    "start": "1151669",
    "end": "1159529"
  },
  {
    "text": "order to do this performance test we are actually using over production cluster online to do that we do not we do not",
    "start": "1159529",
    "end": "1166460"
  },
  {
    "text": "create a new heist cluster because we want to make make sure areas everything is consistent with the production",
    "start": "1166460",
    "end": "1172789"
  },
  {
    "text": "environment so before we do the performance taste we will tend and agendas for for this probe for this",
    "start": "1172789",
    "end": "1180230"
  },
  {
    "text": "performance test environment and the devil run the application will run the performance test application by just",
    "start": "1180230",
    "end": "1186320"
  },
  {
    "text": "extending HTTP request like this we just standard should be request to over cookie mark and it will run up around",
    "start": "1186320",
    "end": "1193399"
  },
  {
    "text": "the test and the typical test cases in our web scale cluster is like we care",
    "start": "1193399",
    "end": "1199460"
  },
  {
    "text": "about the startup time during scaling pod and also we care about the time of creating and deleting",
    "start": "1199460",
    "end": "1205309"
  },
  {
    "text": "part in this cluster and we care about the depart listing return time and we",
    "start": "1205309",
    "end": "1210499"
  },
  {
    "text": "care about the fare accounts of course so whenever you have this kind of",
    "start": "1210499",
    "end": "1215629"
  },
  {
    "start": "1214000",
    "end": "1214000"
  },
  {
    "text": "performance test system then you can just try to run your test cases again",
    "start": "1215629",
    "end": "1220999"
  },
  {
    "text": "and again to discovery to discover the scalability issues and according to our tests and of course based on awkward'",
    "start": "1220999",
    "end": "1227840"
  },
  {
    "text": "acquirements we found that there are several issues in the current option kubernetes cluster first of all is of",
    "start": "1227840",
    "end": "1234799"
  },
  {
    "text": "course SED we actually invested a lot in post as in both HDD and it's data bank",
    "start": "1234799",
    "end": "1242769"
  },
  {
    "text": "bank and storage which is about TB and most of issues happens in LCD is",
    "start": "1242769",
    "end": "1248570"
  },
  {
    "text": "actually related to concurrency locking and datastore that is a party beam and",
    "start": "1248570",
    "end": "1254509"
  },
  {
    "text": "the stake on this thing we found in this critical path which is between HDD and ApS server is that the APS server is",
    "start": "1254509",
    "end": "1261320"
  },
  {
    "text": "actually very sensitive to the data scale especially when there is large amount of data",
    "start": "1261320",
    "end": "1267139"
  },
  {
    "text": "the ApS slower will actually suffer from high pressure it will just reject your request and this happens a lot when you",
    "start": "1267139",
    "end": "1273710"
  },
  {
    "text": "have a huge number of CRTs or controllers keep watching people watching or released in your API server",
    "start": "1273710",
    "end": "1279859"
  },
  {
    "text": "or just to keep listing for example every node or a pod in your super super",
    "start": "1279859",
    "end": "1285169"
  },
  {
    "text": "skill cluster another performance we also be also preserving our cluster is",
    "start": "1285169",
    "end": "1290779"
  },
  {
    "text": "come from the customized controllers which as I mentioned almost every business unit or every customer will",
    "start": "1290779",
    "end": "1297019"
  },
  {
    "text": "actually install the install their own version customized controlling over in over kubernetes cluster by implementing",
    "start": "1297019",
    "end": "1303980"
  },
  {
    "text": "their own operator or something like that so this cutter pressure also drag",
    "start": "1303980",
    "end": "1309649"
  },
  {
    "text": "allow to the performance of our API server with edge steady past this is actually the critical critical part of",
    "start": "1309649",
    "end": "1316340"
  },
  {
    "text": "the whole cluster but as I mention before that we have our own version of",
    "start": "1316340",
    "end": "1321710"
  },
  {
    "text": "scheduler here so there's no such performance the issue in our scheduler here but if you're using could be",
    "start": "1321710",
    "end": "1326720"
  },
  {
    "text": "scheduled on upstream I think you may want to pay attention to the QPS of the path scheduling",
    "start": "1326720",
    "end": "1333040"
  },
  {
    "text": "of that project maybe I think it's a little bit maybe it will be a little bit problem for you I don't know the exact",
    "start": "1333040",
    "end": "1339010"
  },
  {
    "text": "number right now so as long as we know there is performance issue so problem is",
    "start": "1339010",
    "end": "1344710"
  },
  {
    "start": "1341000",
    "end": "1341000"
  },
  {
    "text": "how to fix that and we can take a look at step by step so first of all a city",
    "start": "1344710",
    "end": "1349720"
  },
  {
    "text": "park as a mission the SD part is mostly related to concurrency loking and data",
    "start": "1349720",
    "end": "1354910"
  },
  {
    "text": "storage problem so we actually did a lot of work on option to solve the",
    "start": "1354910",
    "end": "1360160"
  },
  {
    "text": "concurrent for example concurrence the concurrent to read and to remove a lot of unnecessary logging in the codebase",
    "start": "1360160",
    "end": "1366610"
  },
  {
    "text": "and you can actually check all of these PR any issues on option we actually cooperative is a community to do that",
    "start": "1366610",
    "end": "1371890"
  },
  {
    "text": "but we actually have no any in-house solution every contribution has be",
    "start": "1371890",
    "end": "1377040"
  },
  {
    "text": "contributed every patch has been contributed back to the option like this like that and also we noticed the both",
    "start": "1377040",
    "end": "1384340"
  },
  {
    "text": "DB which is used as the DHT bank and has a lot of performance issue because this",
    "start": "1384340",
    "end": "1390130"
  },
  {
    "text": "project is the action not very actively actively maintained it actually partially met maintained by a by Korres",
    "start": "1390130",
    "end": "1396610"
  },
  {
    "text": "right now and for example I just listed here IV fix the bug in the ACD of DB",
    "start": "1396610",
    "end": "1403120"
  },
  {
    "text": "part by replacing instead structure from from at least to a Hashi map which",
    "start": "1403120",
    "end": "1409330"
  },
  {
    "text": "improves the performance like 24 times comparing to the baseline and after we",
    "start": "1409330",
    "end": "1415570"
  },
  {
    "text": "have cherry-pick all of these fixes on upstream we also did a performance test again and",
    "start": "1415570",
    "end": "1421360"
  },
  {
    "text": "we found the result very good so it has resulted like this we have 100 client to",
    "start": "1421360",
    "end": "1426610"
  },
  {
    "text": "connect with this HDD we have three nodes physical nodes to run the SV cluster at the end we tested ways it",
    "start": "1426610",
    "end": "1433690"
  },
  {
    "text": "wins 1 million running key value pairs and retrieved the makeu of five thousands and the completion time of",
    "start": "1433690",
    "end": "1441190"
  },
  {
    "text": "this test is around 200 seconds and the latency most of the latency is less than",
    "start": "1441190",
    "end": "1446500"
  },
  {
    "text": "100 milliseconds so this is a very winnable result if you have already picture picked all of the patches from",
    "start": "1446500",
    "end": "1452350"
  },
  {
    "text": "upstream the latest release of EDD actually content I think most of the patches but there are still some words",
    "start": "1452350",
    "end": "1458650"
  },
  {
    "text": "were not included so if you are interested in that part you I think I recommend you checking all of these",
    "start": "1458650",
    "end": "1464170"
  },
  {
    "text": "issues and PRS so this is a CD part and the second part is Kubiak a story we",
    "start": "1464170",
    "end": "1471850"
  },
  {
    "start": "1468000",
    "end": "1468000"
  },
  {
    "text": "also cooperate with the community to do that and they are stable outstanding fixes I want to share with you guys",
    "start": "1471850",
    "end": "1478179"
  },
  {
    "text": "today the first of all is listing indexing and this actually this page had",
    "start": "1478179",
    "end": "1484120"
  },
  {
    "text": "not been contributed to option but we will do that very soon by adding index by any index for least",
    "start": "1484120",
    "end": "1491530"
  },
  {
    "text": "in part you can actually save a lot of performance improvement in this critical",
    "start": "1491530",
    "end": "1496570"
  },
  {
    "text": "path of your API server between your con your controllers or operators and also there is a very interesting issue on",
    "start": "1496570",
    "end": "1505210"
  },
  {
    "text": "option which name is the Walsh bookmark it is actually what we are doing with Google recently to implement this",
    "start": "1505210",
    "end": "1511660"
  },
  {
    "text": "feature the bookmark will enable you to add a bookmark to your walsh api so",
    "start": "1511660",
    "end": "1518460"
  },
  {
    "text": "whenever you want to restart all your controllers your controller turn don't need to restore all the watch",
    "start": "1518460",
    "end": "1524200"
  },
  {
    "text": "connections just as we just doing to that it just restarted the connections from a from a certain bookmark because",
    "start": "1524200",
    "end": "1531010"
  },
  {
    "text": "it know that there's nothing changed and before that bookmark so this is a very important improvement if you want to",
    "start": "1531010",
    "end": "1538650"
  },
  {
    "text": "especially you have a lot of CRT the controllers running sorry or cluster and also we recommend you to cherry-pick",
    "start": "1538650",
    "end": "1545650"
  },
  {
    "text": "stable of the upstream patches here and one of the most important is the incremental heartbeat which is actually",
    "start": "1545650",
    "end": "1553270"
  },
  {
    "text": "something like for now the nodes so now the notes don't need to report harpy",
    "start": "1553270",
    "end": "1559210"
  },
  {
    "text": "hood harpy to API slower pre-order claim it just updated harpy to API server at",
    "start": "1559210",
    "end": "1564730"
  },
  {
    "text": "owned amount for example whenever the nose is updated or there's too long",
    "start": "1564730",
    "end": "1570010"
  },
  {
    "text": "certain time there is no update that this is actually a one of the pro requests which has been merged on AB Jim",
    "start": "1570010",
    "end": "1575470"
  },
  {
    "text": "and we highly recommend you to cherry-pick this patch because according to our performance test the result very",
    "start": "1575470",
    "end": "1581890"
  },
  {
    "text": "good so after we have chirpy kids or all of these patches into our cluster we also do performance test again and an",
    "start": "1581890",
    "end": "1589000"
  },
  {
    "text": "old test is like this we have kinky nodes we have 100,000 existing parts and",
    "start": "1589000",
    "end": "1594280"
  },
  {
    "text": "we test the the the operation of skill to stun the parts in this cluster and",
    "start": "1594280",
    "end": "1600669"
  },
  {
    "text": "the QBs is more than 130 parts per second and most of the operations",
    "start": "1600669",
    "end": "1606399"
  },
  {
    "text": "actually completed in meetings three seconds another problem we actually observed during this performance test is",
    "start": "1606399",
    "end": "1613480"
  },
  {
    "text": "which is still ongoing is that the metric data from aps server can actually",
    "start": "1613480",
    "end": "1618639"
  },
  {
    "text": "crash premises when you have a super large-scale cluster and this part of it I still think out finger out of the root",
    "start": "1618639",
    "end": "1624970"
  },
  {
    "text": "Coast and I think maybe two weeks later we will commit we always tend some",
    "start": "1624970",
    "end": "1630279"
  },
  {
    "text": "passion or issues to the option to talk about this part okay so this system could be IPs the right part the LCD and",
    "start": "1630279",
    "end": "1637330"
  },
  {
    "text": "could be a API server it for now see a critical parts be observed in our clusters of that that's why we actually",
    "start": "1637330",
    "end": "1643359"
  },
  {
    "text": "stand a lot of passion exposed to the upstream and also to our own version of a code but before talking about",
    "start": "1643359",
    "end": "1650580"
  },
  {
    "text": "modifying the code we want to mention that to concept that we are we we of",
    "start": "1650580",
    "end": "1655960"
  },
  {
    "text": "course we modify the code of a criminalist but we we don't think we are working kubernetes because there are",
    "start": "1655960",
    "end": "1661749"
  },
  {
    "text": "some differences so when we talking about fork normally we are saying that we are we will look down to some certain",
    "start": "1661749",
    "end": "1668859"
  },
  {
    "text": "version of kubernetes or we modify the api of kubernetes or we just build",
    "start": "1668859",
    "end": "1674919"
  },
  {
    "text": "something on top of kubernetes to hide the API server from the our customers or we just bypass some of the kubernetes",
    "start": "1674919",
    "end": "1682629"
  },
  {
    "text": "kolodziejczak for example we bypass the controller pattern or kubernetes or we just bypass some interface of kubernetes",
    "start": "1682629",
    "end": "1689859"
  },
  {
    "text": "or we just replace the couplet of we just like replaced Kubla to some other",
    "start": "1689859",
    "end": "1695200"
  },
  {
    "text": "engine to your cluster so we think if you do that you're actually forking kubernetes but what we are doing or we",
    "start": "1695200",
    "end": "1703059"
  },
  {
    "text": "think the best practice the more like first of all in our cluster we will keep upgrading our class diversion by by",
    "start": "1703059",
    "end": "1710889"
  },
  {
    "text": "keeping PI clip to release lag from the option we have already done the speed we",
    "start": "1710889",
    "end": "1716710"
  },
  {
    "text": "have already done this rebase for a long time and it works very well so currently our cluster is one pod twelve and the",
    "start": "1716710",
    "end": "1723789"
  },
  {
    "text": "next I think next month will upgrade over cluster to one port 14 so this is",
    "start": "1723789",
    "end": "1729700"
  },
  {
    "text": "how we keep tracking with a version of the option second we will never change the API of kubernetes and and and",
    "start": "1729700",
    "end": "1736480"
  },
  {
    "text": "essentially we have no patch only a server-side and we stand every scalability patch to option and also",
    "start": "1736480",
    "end": "1743770"
  },
  {
    "text": "when we think it is very important to over respect kubernetes philosophy that is the declarative API and the",
    "start": "1743770",
    "end": "1750940"
  },
  {
    "text": "controller pattern and if we also leverage the kubernetes extender expeller extension ability ponds like",
    "start": "1750940",
    "end": "1757120"
  },
  {
    "text": "hissing ICSI to implement every feature we want to have in our cluster we will respect every interface here and of",
    "start": "1757120",
    "end": "1764110"
  },
  {
    "text": "course I think the most important thing is we will never replace crew blade with something else we will respect crew",
    "start": "1764110",
    "end": "1770500"
  },
  {
    "text": "blade as well as the CI so that's how we keep our cluster keep upgrading",
    "start": "1770500",
    "end": "1775800"
  },
  {
    "text": "healthily and rapidly busy with the",
    "start": "1775800",
    "end": "1781030"
  },
  {
    "text": "kubernetes option with that we also build a very interesting model in our",
    "start": "1781030",
    "end": "1787090"
  },
  {
    "start": "1784000",
    "end": "1784000"
  },
  {
    "text": "company which name is a key which is a given kubernetes the equipment is is",
    "start": "1787090",
    "end": "1793420"
  },
  {
    "text": "actually a tiger team visiting the Hulk Alibaba company which which were",
    "start": "1793420",
    "end": "1799030"
  },
  {
    "text": "responsible to cooperate with the criminal sub team in order to do that we actually build an internal up team which",
    "start": "1799030",
    "end": "1806140"
  },
  {
    "text": "name is equivalent is inside Alibaba and this is more like a mirror of the",
    "start": "1806140",
    "end": "1811570"
  },
  {
    "text": "kubernetes upstream instead of the company but it will carry the some patches or critical fix on on the",
    "start": "1811570",
    "end": "1818530"
  },
  {
    "text": "unsecured pass and the upstream team will cooperate this upstream with the",
    "start": "1818530",
    "end": "1824170"
  },
  {
    "text": "crudeness up team based on the equivalent is code base here and on the other hand and we also maintain on",
    "start": "1824170",
    "end": "1830860"
  },
  {
    "text": "downstream code which have to - - version lag with a kubernetes code here",
    "start": "1830860",
    "end": "1836620"
  },
  {
    "text": "so we basically basically men tend to code based in your company and the the",
    "start": "1836620",
    "end": "1841900"
  },
  {
    "text": "downstream actually are using the internet upstream instead of the kubernetes option the reason we do that",
    "start": "1841900",
    "end": "1846940"
  },
  {
    "text": "is because as we mentioned we need to serve post Alibaba cloud and Alibaba Group well Alibaba Group is well Alibaba Group",
    "start": "1846940",
    "end": "1854890"
  },
  {
    "text": "is more like a union house cluster but Alibaba cloud is what we have - we need",
    "start": "1854890",
    "end": "1860320"
  },
  {
    "text": "to facing Z and the user so we need to make sure that everything used by Alibaba cloud it is fully option so that",
    "start": "1860320",
    "end": "1866800"
  },
  {
    "text": "is why we use another option code base for our cloud provider and by using these models all",
    "start": "1866800",
    "end": "1874490"
  },
  {
    "text": "of all all of our partners and over Philly the companies but actually consume the Alibaba kubernetes",
    "start": "1874490",
    "end": "1879500"
  },
  {
    "text": "infrastructure which is a downstream of the equalists code base so this is how the co-operative is upstream and for now",
    "start": "1879500",
    "end": "1886600"
  },
  {
    "text": "this model works very well that is also how we contribute patches to the option we do not just we do not just pour code",
    "start": "1886600",
    "end": "1894500"
  },
  {
    "text": "from the downstream code based we actually first of all we contribute to the engine option and at the stand Pro",
    "start": "1894500",
    "end": "1901309"
  },
  {
    "text": "requests from the internet upstream to the real community option okay so this",
    "start": "1901309",
    "end": "1907070"
  },
  {
    "start": "1906000",
    "end": "1906000"
  },
  {
    "text": "is summary of today's topic so first of all they use kubernetes post for post",
    "start": "1907070",
    "end": "1913160"
  },
  {
    "text": "and any user which is Alibaba Group and also as a public color provider and also",
    "start": "1913160",
    "end": "1918530"
  },
  {
    "text": "we are using the virtual cluster based model tenancy model to serve all the customers cuttings customers inside",
    "start": "1918530",
    "end": "1924410"
  },
  {
    "text": "Alibaba Group and we use the container design pattern to migrate the applications from Alibaba from the old",
    "start": "1924410",
    "end": "1931250"
  },
  {
    "text": "Alibaba infrastructure to the new coolest best infrastructure and also implemented our own version of a",
    "start": "1931250",
    "end": "1936860"
  },
  {
    "text": "customized workload management system to handle various requirements from the top",
    "start": "1936860",
    "end": "1941870"
  },
  {
    "text": "layer of users which may be different from stateful set and deployment and another reason is that we really prefer",
    "start": "1941870",
    "end": "1948530"
  },
  {
    "text": "predictability in this case and because is this webscoe credit class are huge so",
    "start": "1948530",
    "end": "1954920"
  },
  {
    "text": "we think that performance testing system will always be your first priority if you want to build this cattle cluster in",
    "start": "1954920",
    "end": "1960710"
  },
  {
    "text": "your organization and we actually modify some part of the code of kubernetes but we will follow the philosophy that we",
    "start": "1960710",
    "end": "1967250"
  },
  {
    "text": "will never and it's also how we start both internal and a public code public cloud provider because we have",
    "start": "1967250",
    "end": "1974120"
  },
  {
    "text": "two code bases and every cooperative each other and the last thing is that I think you guys may also try to build a",
    "start": "1974120",
    "end": "1980120"
  },
  {
    "text": "small upstream team it's really fun and rewarding so this is n-no my two days",
    "start": "1980120",
    "end": "1985220"
  },
  {
    "text": "share and thank you very much if you have any questions please just ask",
    "start": "1985220",
    "end": "1991750"
  },
  {
    "text": "yeah actually we use up us in our cluster but it's only for part of the",
    "start": "1996700",
    "end": "2002190"
  },
  {
    "text": "user cases and the other user case it will be mostly you Dina is part yeah",
    "start": "2002190",
    "end": "2008419"
  },
  {
    "text": "yeah please so this actually a step by",
    "start": "2008419",
    "end": "2017760"
  },
  {
    "text": "step program and the we started this program at the middle of 2018 so for now",
    "start": "2017760",
    "end": "2024090"
  },
  {
    "text": "is like one year we just migrated hit a third a percentage of whole Alibaba",
    "start": "2024090",
    "end": "2029520"
  },
  {
    "text": "infrastructure to kubernetes and the goal is by 2020 90 percentage of Alibaba",
    "start": "2029520",
    "end": "2036870"
  },
  {
    "text": "will move to kubernetes it's already be",
    "start": "2036870",
    "end": "2046590"
  },
  {
    "text": "tested in 2018 there are 13 percentage of traffic is handled by kubernetes",
    "start": "2046590",
    "end": "2055129"
  },
  {
    "text": "okay so thank you very much and you can talk with me offline",
    "start": "2061210",
    "end": "2066270"
  }
]