[
  {
    "text": "hello everyone today i'm here to talk to",
    "start": "960",
    "end": "3760"
  },
  {
    "text": "you about",
    "start": "3760",
    "end": "4560"
  },
  {
    "text": "how we improve the performance of",
    "start": "4560",
    "end": "6399"
  },
  {
    "text": "service-to-service interactions using",
    "start": "6399",
    "end": "8320"
  },
  {
    "text": "envoy at the wikimedia foundation",
    "start": "8320",
    "end": "12160"
  },
  {
    "text": "now today i'll start with uh introducing",
    "start": "12559",
    "end": "15759"
  },
  {
    "text": "you to our infrastructures",
    "start": "15759",
    "end": "17199"
  },
  {
    "text": "explain why and why it made sense in",
    "start": "17199",
    "end": "20560"
  },
  {
    "text": "that context i'll",
    "start": "20560",
    "end": "24160"
  },
  {
    "text": "explain briefly how the transition went",
    "start": "24160",
    "end": "26080"
  },
  {
    "text": "that we went through the tradition of",
    "start": "26080",
    "end": "27840"
  },
  {
    "text": "introducing environment production and",
    "start": "27840",
    "end": "30160"
  },
  {
    "text": "finally i'll focus on what we gain from",
    "start": "30160",
    "end": "32238"
  },
  {
    "text": "this",
    "start": "32239",
    "end": "34399"
  },
  {
    "text": "let's start with the introduction who we",
    "start": "34640",
    "end": "36800"
  },
  {
    "text": "are the wikimedia foundation is the",
    "start": "36800",
    "end": "39040"
  },
  {
    "text": "nonprofit organization",
    "start": "39040",
    "end": "41120"
  },
  {
    "text": "that runs the infrastructure that",
    "start": "41120",
    "end": "42960"
  },
  {
    "text": "supports wikipedia",
    "start": "42960",
    "end": "44879"
  },
  {
    "text": "and its sister projects like quick",
    "start": "44879",
    "end": "46879"
  },
  {
    "text": "scenario or wikidata",
    "start": "46879",
    "end": "49440"
  },
  {
    "text": "we do quite a lot of traffic monthly",
    "start": "49440",
    "end": "53120"
  },
  {
    "text": "we get one 21 billion page views",
    "start": "53120",
    "end": "56879"
  },
  {
    "text": "this is the data from last august",
    "start": "56879",
    "end": "61039"
  },
  {
    "text": "now how is our infrastructure structured",
    "start": "61440",
    "end": "64559"
  },
  {
    "text": "we have five data centers",
    "start": "64559",
    "end": "66240"
  },
  {
    "text": "three of which are just caching pops so",
    "start": "66240",
    "end": "68640"
  },
  {
    "text": "they are just points of presence that",
    "start": "68640",
    "end": "70720"
  },
  {
    "text": "only",
    "start": "70720",
    "end": "71439"
  },
  {
    "text": "hosts the caching layer",
    "start": "71439",
    "end": "75200"
  },
  {
    "text": "while the two main data centers",
    "start": "75200",
    "end": "78400"
  },
  {
    "text": "are here in blue and green and are both",
    "start": "78400",
    "end": "81600"
  },
  {
    "text": "located in the united states",
    "start": "81600",
    "end": "84080"
  },
  {
    "text": "one in virginia and the other in dallas",
    "start": "84080",
    "end": "85920"
  },
  {
    "text": "and they host our wall",
    "start": "85920",
    "end": "88960"
  },
  {
    "text": "application stack now what happens when",
    "start": "88960",
    "end": "93439"
  },
  {
    "text": "somebody makes a request let's say from",
    "start": "93439",
    "end": "96640"
  },
  {
    "text": "africa somebody connects to wikipedia",
    "start": "96640",
    "end": "100720"
  },
  {
    "text": "they will be",
    "start": "100720",
    "end": "101759"
  },
  {
    "text": "directed by geodns to the nearest point",
    "start": "101759",
    "end": "104159"
  },
  {
    "text": "of presence which is esam's",
    "start": "104159",
    "end": "107439"
  },
  {
    "text": "if visitor is",
    "start": "107439",
    "end": "110880"
  },
  {
    "text": "logged in or if a page is not present",
    "start": "110880",
    "end": "114320"
  },
  {
    "text": "their traffic will be sent to the",
    "start": "114320",
    "end": "116399"
  },
  {
    "text": "application layer data centers and the",
    "start": "116399",
    "end": "118560"
  },
  {
    "text": "response will be fetched back from there",
    "start": "118560",
    "end": "120240"
  },
  {
    "text": "computed and fetched back from there",
    "start": "120240",
    "end": "123439"
  },
  {
    "text": "if a user is surfing anonymously and the",
    "start": "123439",
    "end": "125920"
  },
  {
    "text": "page has been seen",
    "start": "125920",
    "end": "127680"
  },
  {
    "text": "in the last day",
    "start": "127680",
    "end": "131200"
  },
  {
    "text": "then they will get directly response",
    "start": "131360",
    "end": "132959"
  },
  {
    "text": "from the caching data center",
    "start": "132959",
    "end": "136160"
  },
  {
    "text": "now our main data centers that run the",
    "start": "136160",
    "end": "138959"
  },
  {
    "text": "application stack",
    "start": "138959",
    "end": "141040"
  },
  {
    "text": "our system is a mix",
    "start": "141040",
    "end": "144480"
  },
  {
    "text": "of some applications micro services",
    "start": "144480",
    "end": "147520"
  },
  {
    "text": "running on kubernetes",
    "start": "147520",
    "end": "148800"
  },
  {
    "text": "and some stuff still to be moved into",
    "start": "148800",
    "end": "151599"
  },
  {
    "text": "kubernetes from our legacy environment",
    "start": "151599",
    "end": "153840"
  },
  {
    "text": "which is basically physical hosts",
    "start": "153840",
    "end": "156480"
  },
  {
    "text": "um one of these applications is our uh",
    "start": "156480",
    "end": "160160"
  },
  {
    "text": "de facto old monolith which is mediawiki",
    "start": "160160",
    "end": "165120"
  },
  {
    "text": "the other peculiarity of mediawiki is",
    "start": "165120",
    "end": "167120"
  },
  {
    "text": "that while",
    "start": "167120",
    "end": "168160"
  },
  {
    "text": "most of the other applications can run",
    "start": "168160",
    "end": "171680"
  },
  {
    "text": "can serve traffic from both that",
    "start": "171680",
    "end": "173519"
  },
  {
    "text": "the main data centers media wiki is",
    "start": "173519",
    "end": "175840"
  },
  {
    "text": "active passive meaning it can only serve",
    "start": "175840",
    "end": "178080"
  },
  {
    "text": "traffic from one data center at a time",
    "start": "178080",
    "end": "181680"
  },
  {
    "text": "this means that services",
    "start": "181680",
    "end": "185280"
  },
  {
    "text": "from one data center might fetch stuff",
    "start": "185280",
    "end": "187440"
  },
  {
    "text": "from the wiki api",
    "start": "187440",
    "end": "189040"
  },
  {
    "text": "and the other data center but also that",
    "start": "189040",
    "end": "190640"
  },
  {
    "text": "media wiki might need to connect",
    "start": "190640",
    "end": "192239"
  },
  {
    "text": "data stores or other services in both",
    "start": "192239",
    "end": "194000"
  },
  {
    "text": "data centers",
    "start": "194000",
    "end": "196000"
  },
  {
    "text": "as an example um let's say",
    "start": "196000",
    "end": "199280"
  },
  {
    "text": "that when you get we get an edit we need",
    "start": "199280",
    "end": "201440"
  },
  {
    "text": "to to notify",
    "start": "201440",
    "end": "202560"
  },
  {
    "text": "our elastic search clusters that power",
    "start": "202560",
    "end": "205280"
  },
  {
    "text": "the",
    "start": "205280",
    "end": "205599"
  },
  {
    "text": "search box on wikipedia about the fact",
    "start": "205599",
    "end": "207840"
  },
  {
    "text": "that that article has been modified",
    "start": "207840",
    "end": "211280"
  },
  {
    "text": "now we have independent clusters in the",
    "start": "211280",
    "end": "213760"
  },
  {
    "text": "two data centers so we need to send the",
    "start": "213760",
    "end": "215680"
  },
  {
    "text": "update to both",
    "start": "215680",
    "end": "217040"
  },
  {
    "text": "and this means that some of the traffic",
    "start": "217040",
    "end": "219440"
  },
  {
    "text": "will go",
    "start": "219440",
    "end": "220159"
  },
  {
    "text": "across data center the",
    "start": "220159",
    "end": "223200"
  },
  {
    "text": "arrows in red here and this means that",
    "start": "223200",
    "end": "226959"
  },
  {
    "text": "while we encrypted a long time ago the",
    "start": "226959",
    "end": "230000"
  },
  {
    "text": "traffic between the edges vacation pops",
    "start": "230000",
    "end": "232159"
  },
  {
    "text": "and the main data centers",
    "start": "232159",
    "end": "234159"
  },
  {
    "text": "we didn't encrypt this traffic with",
    "start": "234159",
    "end": "236239"
  },
  {
    "text": "traffic between applications which means",
    "start": "236239",
    "end": "237840"
  },
  {
    "text": "that",
    "start": "237840",
    "end": "238799"
  },
  {
    "text": "this traffic crossed at the center was",
    "start": "238799",
    "end": "241120"
  },
  {
    "text": "going in the clear",
    "start": "241120",
    "end": "243280"
  },
  {
    "text": "now uh if the last 10 years taught us",
    "start": "243280",
    "end": "246560"
  },
  {
    "text": "anything is that if you run more than",
    "start": "246560",
    "end": "248319"
  },
  {
    "text": "one data center you really want the",
    "start": "248319",
    "end": "250239"
  },
  {
    "text": "communications across data centers to be",
    "start": "250239",
    "end": "252080"
  },
  {
    "text": "encrypted",
    "start": "252080",
    "end": "253519"
  },
  {
    "text": "because that makes the life of state",
    "start": "253519",
    "end": "256160"
  },
  {
    "text": "nation",
    "start": "256160",
    "end": "256799"
  },
  {
    "text": "actors harder when they want to snoop on",
    "start": "256799",
    "end": "259120"
  },
  {
    "text": "the data",
    "start": "259120",
    "end": "259840"
  },
  {
    "text": "of your users and",
    "start": "259840",
    "end": "263120"
  },
  {
    "text": "so we need to introduce tls in front of",
    "start": "263120",
    "end": "265440"
  },
  {
    "text": "all of our application",
    "start": "265440",
    "end": "267199"
  },
  {
    "text": "now we could have asked every",
    "start": "267199",
    "end": "269280"
  },
  {
    "text": "development team",
    "start": "269280",
    "end": "270400"
  },
  {
    "text": "to develop to add tls termination to",
    "start": "270400",
    "end": "274080"
  },
  {
    "text": "their application",
    "start": "274080",
    "end": "274960"
  },
  {
    "text": "but that would have meant asking all",
    "start": "274960",
    "end": "277199"
  },
  {
    "text": "these teams to become",
    "start": "277199",
    "end": "278800"
  },
  {
    "text": "somewhat experts in configuring a tls",
    "start": "278800",
    "end": "282320"
  },
  {
    "text": "stack",
    "start": "282320",
    "end": "283360"
  },
  {
    "text": "and at the same time it would it meant",
    "start": "283360",
    "end": "285840"
  },
  {
    "text": "that we would have to track the security",
    "start": "285840",
    "end": "287680"
  },
  {
    "text": "defects in multiple",
    "start": "287680",
    "end": "289120"
  },
  {
    "text": "application stacks so we decided pretty",
    "start": "289120",
    "end": "291520"
  },
  {
    "text": "early we're going to install",
    "start": "291520",
    "end": "293520"
  },
  {
    "text": "a tls termination sidecar",
    "start": "293520",
    "end": "296560"
  },
  {
    "text": "now we choose envoy for that function",
    "start": "296560",
    "end": "298720"
  },
  {
    "text": "for a series of reasons the first one",
    "start": "298720",
    "end": "300800"
  },
  {
    "text": "is envoys not open core as some",
    "start": "300800",
    "end": "304000"
  },
  {
    "text": "other tls terminating proxy",
    "start": "304000",
    "end": "308560"
  },
  {
    "text": "then there was reason of performance",
    "start": "308639",
    "end": "310400"
  },
  {
    "text": "we've seen reports",
    "start": "310400",
    "end": "311680"
  },
  {
    "text": "that envoy is blessingly fast and i told",
    "start": "311680",
    "end": "314800"
  },
  {
    "text": "you before",
    "start": "314800",
    "end": "316240"
  },
  {
    "text": "our logged-in users always get sent back",
    "start": "316240",
    "end": "318960"
  },
  {
    "text": "to the main data centers",
    "start": "318960",
    "end": "321600"
  },
  {
    "text": "now the logged-in users are typically",
    "start": "321600",
    "end": "324080"
  },
  {
    "text": "the editors the people that",
    "start": "324080",
    "end": "325680"
  },
  {
    "text": "add infor add content to the wikis",
    "start": "325680",
    "end": "328880"
  },
  {
    "text": "and these are in some ways our most",
    "start": "328880",
    "end": "331680"
  },
  {
    "text": "valued users",
    "start": "331680",
    "end": "333440"
  },
  {
    "text": "because we are the ones that build the",
    "start": "333440",
    "end": "335120"
  },
  {
    "text": "projects that make them successful",
    "start": "335120",
    "end": "337039"
  },
  {
    "text": "and these users already pay a price for",
    "start": "337039",
    "end": "339440"
  },
  {
    "text": "their loyalty",
    "start": "339440",
    "end": "340880"
  },
  {
    "text": "by always being sent to the main data",
    "start": "340880",
    "end": "343360"
  },
  {
    "text": "centers the reason for that is that",
    "start": "343360",
    "end": "345120"
  },
  {
    "text": "when you're logged in you can change the",
    "start": "345120",
    "end": "346720"
  },
  {
    "text": "interface the appearance of the site so",
    "start": "346720",
    "end": "348800"
  },
  {
    "text": "we can't just",
    "start": "348800",
    "end": "350000"
  },
  {
    "text": "send you a test copy now we didn't want",
    "start": "350000",
    "end": "354080"
  },
  {
    "text": "our introduction of encryption between",
    "start": "354080",
    "end": "356319"
  },
  {
    "text": "services to",
    "start": "356319",
    "end": "358400"
  },
  {
    "text": "add another penalty that was used and",
    "start": "358400",
    "end": "361039"
  },
  {
    "text": "apart from this",
    "start": "361039",
    "end": "362560"
  },
  {
    "text": "envoy has been designed to be",
    "start": "362560",
    "end": "366160"
  },
  {
    "text": "the perfect service to service",
    "start": "366160",
    "end": "367840"
  },
  {
    "text": "middleware so it has a series",
    "start": "367840",
    "end": "370319"
  },
  {
    "text": "of characteristics that we really wanted",
    "start": "370319",
    "end": "373440"
  },
  {
    "text": "to add one of which is",
    "start": "373440",
    "end": "375120"
  },
  {
    "text": "its observability features it adds",
    "start": "375120",
    "end": "377520"
  },
  {
    "text": "telemetry",
    "start": "377520",
    "end": "378479"
  },
  {
    "text": "within all services it gives you the",
    "start": "378479",
    "end": "382000"
  },
  {
    "text": "ability to emit tracing",
    "start": "382000",
    "end": "384479"
  },
  {
    "text": "data it has some",
    "start": "384479",
    "end": "387680"
  },
  {
    "text": "additional things that you want when you",
    "start": "387680",
    "end": "389680"
  },
  {
    "text": "build a",
    "start": "389680",
    "end": "390960"
  },
  {
    "text": "true microservices infrastructure like",
    "start": "390960",
    "end": "393280"
  },
  {
    "text": "rate limiting",
    "start": "393280",
    "end": "394080"
  },
  {
    "text": "and circuit breaking built into the",
    "start": "394080",
    "end": "396319"
  },
  {
    "text": "proxy so that you can have",
    "start": "396319",
    "end": "397919"
  },
  {
    "text": "a common implementation across services",
    "start": "397919",
    "end": "400720"
  },
  {
    "text": "and finally it's very easy to configure",
    "start": "400720",
    "end": "404319"
  },
  {
    "text": "yeah i know i was joking and this is",
    "start": "404319",
    "end": "406240"
  },
  {
    "text": "kind of a cheap shot",
    "start": "406240",
    "end": "407680"
  },
  {
    "text": "but there's a reason why i'm naming",
    "start": "407680",
    "end": "409199"
  },
  {
    "text": "configuration and it will be clear in a",
    "start": "409199",
    "end": "410880"
  },
  {
    "text": "couple of slides",
    "start": "410880",
    "end": "412639"
  },
  {
    "text": "so let's move we understood why which is",
    "start": "412639",
    "end": "414720"
  },
  {
    "text": "envoy let's move to",
    "start": "414720",
    "end": "416000"
  },
  {
    "text": "how we did the transition and again",
    "start": "416000",
    "end": "418400"
  },
  {
    "text": "wikipedias",
    "start": "418400",
    "end": "419840"
  },
  {
    "text": "are very high traffic so we run a very",
    "start": "419840",
    "end": "422880"
  },
  {
    "text": "large website",
    "start": "422880",
    "end": "423840"
  },
  {
    "text": "with a lot of edge cases and a ton of",
    "start": "423840",
    "end": "427120"
  },
  {
    "text": "traffic",
    "start": "427120",
    "end": "428319"
  },
  {
    "text": "uh if one if working at the foundation",
    "start": "428319",
    "end": "431440"
  },
  {
    "text": "for six years told me anything is that",
    "start": "431440",
    "end": "433120"
  },
  {
    "text": "there was always an edge case so we",
    "start": "433120",
    "end": "434720"
  },
  {
    "text": "wanted to proceed with",
    "start": "434720",
    "end": "436880"
  },
  {
    "text": "a certain level of caution and that",
    "start": "436880",
    "end": "439520"
  },
  {
    "text": "meant that we",
    "start": "439520",
    "end": "440720"
  },
  {
    "text": "divided the transition into phases first",
    "start": "440720",
    "end": "442800"
  },
  {
    "text": "we introduced uh",
    "start": "442800",
    "end": "444000"
  },
  {
    "text": "tls termination in front of all services",
    "start": "444000",
    "end": "446319"
  },
  {
    "text": "and we made the other services called",
    "start": "446319",
    "end": "448840"
  },
  {
    "text": "mbhtps and then only in the second",
    "start": "448840",
    "end": "451120"
  },
  {
    "text": "moment",
    "start": "451120",
    "end": "451599"
  },
  {
    "text": "we started introducing configuration in",
    "start": "451599",
    "end": "453680"
  },
  {
    "text": "envoy to be able to act",
    "start": "453680",
    "end": "455360"
  },
  {
    "text": "as a service proxy recruit service proxy",
    "start": "455360",
    "end": "458000"
  },
  {
    "text": "and",
    "start": "458000",
    "end": "459680"
  },
  {
    "text": "reconfigure the applications to use it",
    "start": "459680",
    "end": "462840"
  },
  {
    "text": "progressively",
    "start": "462840",
    "end": "464240"
  },
  {
    "text": "now the problem that we faced during the",
    "start": "464240",
    "end": "466639"
  },
  {
    "text": "transition the biggest problem that we",
    "start": "466639",
    "end": "468000"
  },
  {
    "text": "faced during the transition is that the",
    "start": "468000",
    "end": "469840"
  },
  {
    "text": "configuration of envoy is very complex",
    "start": "469840",
    "end": "472319"
  },
  {
    "text": "it's well documented by the",
    "start": "472319",
    "end": "473759"
  },
  {
    "text": "there is a steep learning curve and we",
    "start": "473759",
    "end": "475520"
  },
  {
    "text": "didn't feel that everybody",
    "start": "475520",
    "end": "478960"
  },
  {
    "text": "in the team needed to become an expert",
    "start": "478960",
    "end": "480960"
  },
  {
    "text": "in envoy",
    "start": "480960",
    "end": "482720"
  },
  {
    "text": "also we had the problem that we had two",
    "start": "482720",
    "end": "484639"
  },
  {
    "text": "different templating engines one for",
    "start": "484639",
    "end": "486400"
  },
  {
    "text": "kubernetes that's elm",
    "start": "486400",
    "end": "487919"
  },
  {
    "text": "and one for the legacy environment",
    "start": "487919",
    "end": "491039"
  },
  {
    "text": "that's puppet so",
    "start": "491039",
    "end": "492639"
  },
  {
    "text": "we needed to have basically a common",
    "start": "492639",
    "end": "494479"
  },
  {
    "text": "template with just",
    "start": "494479",
    "end": "496080"
  },
  {
    "text": "where we sadly had to implement just the",
    "start": "496080",
    "end": "498800"
  },
  {
    "text": "templating uh",
    "start": "498800",
    "end": "499840"
  },
  {
    "text": "primitives but we wanted to have the",
    "start": "499840",
    "end": "501919"
  },
  {
    "text": "same data structure",
    "start": "501919",
    "end": "503680"
  },
  {
    "text": "defining listeners and clusters for",
    "start": "503680",
    "end": "507039"
  },
  {
    "text": "envoy",
    "start": "507039",
    "end": "507840"
  },
  {
    "text": "to be used both by kubernetes and the",
    "start": "507840",
    "end": "510479"
  },
  {
    "text": "legacy environment",
    "start": "510479",
    "end": "512000"
  },
  {
    "text": "and we wanted this to be simple and easy",
    "start": "512000",
    "end": "513919"
  },
  {
    "text": "to understand to any sre even if they",
    "start": "513919",
    "end": "515919"
  },
  {
    "text": "have",
    "start": "515919",
    "end": "516719"
  },
  {
    "text": "no prior experience with envoy we came",
    "start": "516719",
    "end": "519120"
  },
  {
    "text": "up with a simple",
    "start": "519120",
    "end": "520159"
  },
  {
    "text": "yaml data structure here is an example",
    "start": "520159",
    "end": "522800"
  },
  {
    "text": "that's taken from our configuration",
    "start": "522800",
    "end": "525200"
  },
  {
    "text": "um this example doesn't have all the",
    "start": "525200",
    "end": "528560"
  },
  {
    "text": "keys that you can define but this is a",
    "start": "528560",
    "end": "530160"
  },
  {
    "text": "good",
    "start": "530160",
    "end": "530560"
  },
  {
    "text": "portion of them and basically our design",
    "start": "530560",
    "end": "532640"
  },
  {
    "text": "goal was any sre",
    "start": "532640",
    "end": "534880"
  },
  {
    "text": "that is 15 lines of documentation and is",
    "start": "534880",
    "end": "537120"
  },
  {
    "text": "able to add a basic listener",
    "start": "537120",
    "end": "539360"
  },
  {
    "text": "to the envoy configuration the other",
    "start": "539360",
    "end": "542399"
  },
  {
    "text": "goal that we had",
    "start": "542399",
    "end": "543519"
  },
  {
    "text": "was for this to be boring and when i say",
    "start": "543519",
    "end": "546880"
  },
  {
    "text": "boring i mean that we didn't want to",
    "start": "546880",
    "end": "548720"
  },
  {
    "text": "have surprises",
    "start": "548720",
    "end": "549839"
  },
  {
    "text": "once you have envoy mediating all your",
    "start": "549839",
    "end": "553120"
  },
  {
    "text": "http traffic between microservices",
    "start": "553120",
    "end": "556160"
  },
  {
    "text": "changing something in its configuration",
    "start": "556160",
    "end": "558080"
  },
  {
    "text": "becomes really scary because the",
    "start": "558080",
    "end": "559760"
  },
  {
    "text": "blast radius is huge i want to",
    "start": "559760",
    "end": "563760"
  },
  {
    "text": "make a shout out to the android apps for",
    "start": "563760",
    "end": "566800"
  },
  {
    "text": "adding mood validate to the server so",
    "start": "566800",
    "end": "568959"
  },
  {
    "text": "that it allowed us to",
    "start": "568959",
    "end": "570320"
  },
  {
    "text": "easily catch any errors that we were",
    "start": "570320",
    "end": "572560"
  },
  {
    "text": "introducing in",
    "start": "572560",
    "end": "574240"
  },
  {
    "text": "the configuration directly in the",
    "start": "574240",
    "end": "576399"
  },
  {
    "text": "continuous integration environment",
    "start": "576399",
    "end": "578880"
  },
  {
    "text": "and some investment in making your",
    "start": "578880",
    "end": "581040"
  },
  {
    "text": "configuration",
    "start": "581040",
    "end": "583120"
  },
  {
    "text": "continuous integration environment check",
    "start": "583120",
    "end": "585279"
  },
  {
    "text": "with the configuration is doing what",
    "start": "585279",
    "end": "587120"
  },
  {
    "text": "it expects to do is really something you",
    "start": "587120",
    "end": "589200"
  },
  {
    "text": "should invest in",
    "start": "589200",
    "end": "591839"
  },
  {
    "text": "now all transitions that",
    "start": "592880",
    "end": "596240"
  },
  {
    "text": "happen in real life happen with some",
    "start": "596240",
    "end": "597839"
  },
  {
    "text": "struggles i want to name some",
    "start": "597839",
    "end": "599440"
  },
  {
    "text": "of the struggles we had and the first",
    "start": "599440",
    "end": "601519"
  },
  {
    "text": "and foremost was",
    "start": "601519",
    "end": "602560"
  },
  {
    "text": "we use a level four load balancing",
    "start": "602560",
    "end": "605760"
  },
  {
    "text": "which means that we balance connections",
    "start": "605760",
    "end": "607760"
  },
  {
    "text": "ip connections and not",
    "start": "607760",
    "end": "609200"
  },
  {
    "text": "requests now envoy tries to funnel as",
    "start": "609200",
    "end": "612480"
  },
  {
    "text": "many requests as possible",
    "start": "612480",
    "end": "614160"
  },
  {
    "text": "as possible across the same connection",
    "start": "614160",
    "end": "616000"
  },
  {
    "text": "that's one of his strengths",
    "start": "616000",
    "end": "617519"
  },
  {
    "text": "one of the reasons that we made big",
    "start": "617519",
    "end": "619600"
  },
  {
    "text": "gains later",
    "start": "619600",
    "end": "621760"
  },
  {
    "text": "but this also means that it makes it",
    "start": "621760",
    "end": "624079"
  },
  {
    "text": "very bad to be",
    "start": "624079",
    "end": "625360"
  },
  {
    "text": "load balanced through a connection based",
    "start": "625360",
    "end": "627519"
  },
  {
    "text": "load balancer",
    "start": "627519",
    "end": "628800"
  },
  {
    "text": "because you can send one million",
    "start": "628800",
    "end": "630640"
  },
  {
    "text": "requests across one connection",
    "start": "630640",
    "end": "632399"
  },
  {
    "text": "and three connect three requests across",
    "start": "632399",
    "end": "633920"
  },
  {
    "text": "another connection you've balanced these",
    "start": "633920",
    "end": "635839"
  },
  {
    "text": "connections across the back ends but you",
    "start": "635839",
    "end": "637360"
  },
  {
    "text": "didn't balance the requests which is",
    "start": "637360",
    "end": "638800"
  },
  {
    "text": "what you really want to balance",
    "start": "638800",
    "end": "641519"
  },
  {
    "text": "so what we did was just to limit the",
    "start": "641519",
    "end": "643519"
  },
  {
    "text": "number of requests that you can send",
    "start": "643519",
    "end": "645040"
  },
  {
    "text": "over one single connection to 1000 by",
    "start": "645040",
    "end": "647279"
  },
  {
    "text": "default",
    "start": "647279",
    "end": "648720"
  },
  {
    "text": "and that was enough to make the problems",
    "start": "648720",
    "end": "651279"
  },
  {
    "text": "that i was naming or basically go away",
    "start": "651279",
    "end": "654000"
  },
  {
    "text": "we also had another problem which was",
    "start": "654000",
    "end": "657360"
  },
  {
    "text": "we did see um especially",
    "start": "657360",
    "end": "661040"
  },
  {
    "text": "for the applications that run at high",
    "start": "661040",
    "end": "662720"
  },
  {
    "text": "scales or thousands and thousands of",
    "start": "662720",
    "end": "664720"
  },
  {
    "text": "requests per second",
    "start": "664720",
    "end": "666720"
  },
  {
    "text": "but we had some mysterious connection",
    "start": "666720",
    "end": "670160"
  },
  {
    "text": "timeouts",
    "start": "670160",
    "end": "671360"
  },
  {
    "text": "connection failures sorry happening",
    "start": "671360",
    "end": "674720"
  },
  {
    "text": "from time to time and we treat it back",
    "start": "674720",
    "end": "676959"
  },
  {
    "text": "to the fact that application servers",
    "start": "676959",
    "end": "678560"
  },
  {
    "text": "typically",
    "start": "678560",
    "end": "680480"
  },
  {
    "text": "define them they keep a lifetime out for",
    "start": "680480",
    "end": "684000"
  },
  {
    "text": "http connections so that they can",
    "start": "684000",
    "end": "685920"
  },
  {
    "text": "basically",
    "start": "685920",
    "end": "687360"
  },
  {
    "text": "kill a connection that's kept alive by",
    "start": "687360",
    "end": "690240"
  },
  {
    "text": "the client",
    "start": "690240",
    "end": "691440"
  },
  {
    "text": "if the client doesn't send any data out",
    "start": "691440",
    "end": "693600"
  },
  {
    "text": "of that connection for more than n",
    "start": "693600",
    "end": "695120"
  },
  {
    "text": "seconds",
    "start": "695120",
    "end": "696640"
  },
  {
    "text": "and uh turned out that basically we had",
    "start": "696640",
    "end": "699440"
  },
  {
    "text": "to uh",
    "start": "699440",
    "end": "700399"
  },
  {
    "text": "account for vetting and void as well let",
    "start": "700399",
    "end": "702399"
  },
  {
    "text": "me go back to the example i made before",
    "start": "702399",
    "end": "704160"
  },
  {
    "text": "here we defined the keep alive which",
    "start": "704160",
    "end": "706079"
  },
  {
    "text": "becomes an idle timeout in",
    "start": "706079",
    "end": "707760"
  },
  {
    "text": "invoice peak of 4.5 seconds because this",
    "start": "707760",
    "end": "711920"
  },
  {
    "text": "application and then gate analytics is",
    "start": "711920",
    "end": "714399"
  },
  {
    "text": "another js application and node.js by",
    "start": "714399",
    "end": "716320"
  },
  {
    "text": "default",
    "start": "716320",
    "end": "717360"
  },
  {
    "text": "um as an idle timeout of five seconds",
    "start": "717360",
    "end": "721040"
  },
  {
    "text": "so just keep that value a bit smaller in",
    "start": "721040",
    "end": "723839"
  },
  {
    "text": "on the invoice side than on the server",
    "start": "723839",
    "end": "725920"
  },
  {
    "text": "side",
    "start": "725920",
    "end": "726399"
  },
  {
    "text": "and all these errors that we had go away",
    "start": "726399",
    "end": "729360"
  },
  {
    "text": "and finally",
    "start": "729360",
    "end": "730880"
  },
  {
    "text": "since we didn't we choose to not go with",
    "start": "730880",
    "end": "733360"
  },
  {
    "text": "the",
    "start": "733360",
    "end": "734160"
  },
  {
    "text": "sdoa and just make all routing through",
    "start": "734160",
    "end": "737040"
  },
  {
    "text": "envoy transparent to the application",
    "start": "737040",
    "end": "738959"
  },
  {
    "text": "by using iptable sorceries",
    "start": "738959",
    "end": "742720"
  },
  {
    "text": "and we decided to actually go and change",
    "start": "742720",
    "end": "744800"
  },
  {
    "text": "the configuration of the application to",
    "start": "744800",
    "end": "746639"
  },
  {
    "text": "uh find a request for envoy also because",
    "start": "746639",
    "end": "749279"
  },
  {
    "text": "we this way we could just switch",
    "start": "749279",
    "end": "751120"
  },
  {
    "text": "one back end at a time if we need to uh",
    "start": "751120",
    "end": "754160"
  },
  {
    "text": "well the problem is that sometimes the",
    "start": "754160",
    "end": "755600"
  },
  {
    "text": "same configuration key",
    "start": "755600",
    "end": "757360"
  },
  {
    "text": "is used for finding the upstream servers",
    "start": "757360",
    "end": "760959"
  },
  {
    "text": "to call",
    "start": "760959",
    "end": "761680"
  },
  {
    "text": "and also to output some data to the user",
    "start": "761680",
    "end": "764800"
  },
  {
    "text": "like a csv url for css",
    "start": "764800",
    "end": "767920"
  },
  {
    "text": "and thus when you use localhost 5603 in",
    "start": "767920",
    "end": "772079"
  },
  {
    "text": "a configuration",
    "start": "772079",
    "end": "773120"
  },
  {
    "text": "for our mobile application service",
    "start": "773120",
    "end": "776959"
  },
  {
    "text": "you might break mobile wikipedia like",
    "start": "776959",
    "end": "778560"
  },
  {
    "text": "you did",
    "start": "778560",
    "end": "780399"
  },
  {
    "text": "the point is just it's not always",
    "start": "780399",
    "end": "783600"
  },
  {
    "text": "cost free to change the configuration of",
    "start": "783600",
    "end": "785279"
  },
  {
    "text": "a service to point to localhost",
    "start": "785279",
    "end": "788639"
  },
  {
    "text": "but let's go to the back to the good",
    "start": "788639",
    "end": "790720"
  },
  {
    "text": "news as i said",
    "start": "790720",
    "end": "792000"
  },
  {
    "text": "before one of the reasons we choose",
    "start": "792000",
    "end": "793760"
  },
  {
    "text": "envoy4 was performance",
    "start": "793760",
    "end": "796560"
  },
  {
    "text": "now we knew performance is great",
    "start": "796560",
    "end": "800000"
  },
  {
    "text": "in envoy but what we didn't expect is",
    "start": "800000",
    "end": "802079"
  },
  {
    "text": "that we would actually",
    "start": "802079",
    "end": "803839"
  },
  {
    "text": "improve the performance of our stack by",
    "start": "803839",
    "end": "806480"
  },
  {
    "text": "introducing envoy",
    "start": "806480",
    "end": "808000"
  },
  {
    "text": "and the reason for that is php",
    "start": "808000",
    "end": "812399"
  },
  {
    "text": "now it's easy to dunk on php but it's",
    "start": "812399",
    "end": "814639"
  },
  {
    "text": "also undeniable",
    "start": "814639",
    "end": "815920"
  },
  {
    "text": "uh that for all its flows it's very",
    "start": "815920",
    "end": "818720"
  },
  {
    "text": "successful",
    "start": "818720",
    "end": "819440"
  },
  {
    "text": "it's used to run some of the largest",
    "start": "819440",
    "end": "822720"
  },
  {
    "text": "website investment sites in the world",
    "start": "822720",
    "end": "825360"
  },
  {
    "text": "and we create one of the creators of",
    "start": "825360",
    "end": "828160"
  },
  {
    "text": "hhvm keith adams",
    "start": "828160",
    "end": "830160"
  },
  {
    "text": "uh as written has argued that the reason",
    "start": "830160",
    "end": "832320"
  },
  {
    "text": "for success for php's success",
    "start": "832320",
    "end": "834480"
  },
  {
    "text": "is its scoping rules which means the",
    "start": "834480",
    "end": "837120"
  },
  {
    "text": "scope of any",
    "start": "837120",
    "end": "838639"
  },
  {
    "text": "of the execution of a php script in a",
    "start": "838639",
    "end": "841360"
  },
  {
    "text": "web server",
    "start": "841360",
    "end": "842320"
  },
  {
    "text": "is the web request so at the start of a",
    "start": "842320",
    "end": "845760"
  },
  {
    "text": "web request you start with basically an",
    "start": "845760",
    "end": "847519"
  },
  {
    "text": "empty scope",
    "start": "847519",
    "end": "848320"
  },
  {
    "text": "you have nothing besides some globals",
    "start": "848320",
    "end": "850800"
  },
  {
    "text": "and the",
    "start": "850800",
    "end": "851440"
  },
  {
    "text": "request variables and when you have to",
    "start": "851440",
    "end": "854959"
  },
  {
    "text": "build anything you have to allocate",
    "start": "854959",
    "end": "856480"
  },
  {
    "text": "memory you have to",
    "start": "856480",
    "end": "857600"
  },
  {
    "text": "um build anything you need to make all",
    "start": "857600",
    "end": "860560"
  },
  {
    "text": "the connections you need and",
    "start": "860560",
    "end": "862079"
  },
  {
    "text": "at the end of the request everything the",
    "start": "862079",
    "end": "864079"
  },
  {
    "text": "memory you are located the file",
    "start": "864079",
    "end": "865120"
  },
  {
    "text": "descriptors is open everything is run",
    "start": "865120",
    "end": "866959"
  },
  {
    "text": "away",
    "start": "866959",
    "end": "868079"
  },
  {
    "text": "you can see how this makes it very very",
    "start": "868079",
    "end": "871440"
  },
  {
    "text": "easy to write",
    "start": "871440",
    "end": "872480"
  },
  {
    "text": "a web application php without having to",
    "start": "872480",
    "end": "875199"
  },
  {
    "text": "worry about memory leaks or",
    "start": "875199",
    "end": "876880"
  },
  {
    "text": "such stuff at the same time this gives",
    "start": "876880",
    "end": "880560"
  },
  {
    "text": "you another",
    "start": "880560",
    "end": "881199"
  },
  {
    "text": "unique advantage which is serving",
    "start": "881199",
    "end": "884480"
  },
  {
    "text": "requests concurrently in php is",
    "start": "884480",
    "end": "886480"
  },
  {
    "text": "incredibly easy",
    "start": "886480",
    "end": "887440"
  },
  {
    "text": "you have to do nothing to be able to do",
    "start": "887440",
    "end": "889040"
  },
  {
    "text": "that because every request is atomic by",
    "start": "889040",
    "end": "891040"
  },
  {
    "text": "default",
    "start": "891040",
    "end": "892639"
  },
  {
    "text": "so there's it's shared is sure nothing",
    "start": "892639",
    "end": "894720"
  },
  {
    "text": "architecture where",
    "start": "894720",
    "end": "896160"
  },
  {
    "text": "you can run things in parallel as much",
    "start": "896160",
    "end": "897760"
  },
  {
    "text": "as you as you want",
    "start": "897760",
    "end": "900880"
  },
  {
    "text": "this is an approximation forgive me if",
    "start": "900880",
    "end": "902880"
  },
  {
    "text": "you know php better you were probably",
    "start": "902880",
    "end": "904800"
  },
  {
    "text": "saying well actually at this point but",
    "start": "904800",
    "end": "907040"
  },
  {
    "text": "for this the sake of the argument let's",
    "start": "907040",
    "end": "908880"
  },
  {
    "text": "just assume that",
    "start": "908880",
    "end": "909760"
  },
  {
    "text": "nothing is shared between requests this",
    "start": "909760",
    "end": "912560"
  },
  {
    "text": "means that also you can share things",
    "start": "912560",
    "end": "914880"
  },
  {
    "text": "like connection pools",
    "start": "914880",
    "end": "917519"
  },
  {
    "text": "and this means that whenever your php",
    "start": "917519",
    "end": "919839"
  },
  {
    "text": "application has to call",
    "start": "919839",
    "end": "921120"
  },
  {
    "text": "other services it needs to create a new",
    "start": "921120",
    "end": "923440"
  },
  {
    "text": "connection for every request it needs to",
    "start": "923440",
    "end": "924959"
  },
  {
    "text": "make",
    "start": "924959",
    "end": "927040"
  },
  {
    "text": "and this is a cost but this cost is even",
    "start": "927040",
    "end": "929759"
  },
  {
    "text": "bigger",
    "start": "929759",
    "end": "930959"
  },
  {
    "text": "if your connection is using tls because",
    "start": "930959",
    "end": "934720"
  },
  {
    "text": "when you use tls you have at least two",
    "start": "934720",
    "end": "937120"
  },
  {
    "text": "additional round trips to account for",
    "start": "937120",
    "end": "938959"
  },
  {
    "text": "i'm saying at least because it depends",
    "start": "938959",
    "end": "940800"
  },
  {
    "text": "on a series of factors but it's at least",
    "start": "940800",
    "end": "943120"
  },
  {
    "text": "two round trips",
    "start": "943120",
    "end": "944560"
  },
  {
    "text": "it's one if you get two tls 1.3 but good",
    "start": "944560",
    "end": "947279"
  },
  {
    "text": "luck",
    "start": "947279",
    "end": "947680"
  },
  {
    "text": "using tls 1.3 from php",
    "start": "947680",
    "end": "952320"
  },
  {
    "text": "then there's the cost of establishing",
    "start": "952320",
    "end": "954720"
  },
  {
    "text": "actually with",
    "start": "954720",
    "end": "955759"
  },
  {
    "text": "this connection from the computational",
    "start": "955759",
    "end": "957199"
  },
  {
    "text": "point of view you have to exchange",
    "start": "957199",
    "end": "959680"
  },
  {
    "text": "a certificate uh you have to exchange",
    "start": "959680",
    "end": "962399"
  },
  {
    "text": "secrets",
    "start": "962399",
    "end": "963279"
  },
  {
    "text": "you have to recreate for every request",
    "start": "963279",
    "end": "965120"
  },
  {
    "text": "the session tickets",
    "start": "965120",
    "end": "966560"
  },
  {
    "text": "on the server side because as we said",
    "start": "966560",
    "end": "969519"
  },
  {
    "text": "shared nothing",
    "start": "969519",
    "end": "970399"
  },
  {
    "text": "on the client side so what we expect is",
    "start": "970399",
    "end": "973519"
  },
  {
    "text": "basically that this will be",
    "start": "973519",
    "end": "974880"
  },
  {
    "text": "introduced higher cpu usage higher",
    "start": "974880",
    "end": "977120"
  },
  {
    "text": "network usage",
    "start": "977120",
    "end": "978079"
  },
  {
    "text": "and in the case you have latency over",
    "start": "978079",
    "end": "979920"
  },
  {
    "text": "your network also latency to the",
    "start": "979920",
    "end": "981920"
  },
  {
    "text": "applications",
    "start": "981920",
    "end": "984000"
  },
  {
    "text": "now i said before it's a bit more",
    "start": "984000",
    "end": "987199"
  },
  {
    "text": "complex than",
    "start": "987199",
    "end": "988000"
  },
  {
    "text": "saying share nothing that's because",
    "start": "988000",
    "end": "991680"
  },
  {
    "text": "php extensions are written in c and they",
    "start": "991680",
    "end": "994720"
  },
  {
    "text": "can",
    "start": "994720",
    "end": "995440"
  },
  {
    "text": "bypass the shared nothing uh behavior of",
    "start": "995440",
    "end": "998399"
  },
  {
    "text": "php and in fact",
    "start": "998399",
    "end": "1000240"
  },
  {
    "text": "kulex securely extension the cure",
    "start": "1000240",
    "end": "1002320"
  },
  {
    "text": "extension which is what everybody uses",
    "start": "1002320",
    "end": "1004079"
  },
  {
    "text": "to make remote dhtp calls",
    "start": "1004079",
    "end": "1005759"
  },
  {
    "text": "in hhvm allows you to predefine",
    "start": "1005759",
    "end": "1008800"
  },
  {
    "text": "shared connection pools for specific",
    "start": "1008800",
    "end": "1011279"
  },
  {
    "text": "host names remote test names",
    "start": "1011279",
    "end": "1013360"
  },
  {
    "text": "in zen php which is what we are using",
    "start": "1013360",
    "end": "1016720"
  },
  {
    "text": "this is not possible at all there is no",
    "start": "1016720",
    "end": "1018560"
  },
  {
    "text": "way to do that so we knew",
    "start": "1018560",
    "end": "1021440"
  },
  {
    "text": "that introducing tls especially for",
    "start": "1021440",
    "end": "1024160"
  },
  {
    "text": "requests that went cross data center",
    "start": "1024160",
    "end": "1027438"
  },
  {
    "text": "who made us pay a big price and we",
    "start": "1027439",
    "end": "1030160"
  },
  {
    "text": "wanted to test how much",
    "start": "1030160",
    "end": "1031678"
  },
  {
    "text": "and to do that we just did this very",
    "start": "1031679",
    "end": "1033678"
  },
  {
    "text": "very small benchmark of cross dc",
    "start": "1033679",
    "end": "1035520"
  },
  {
    "text": "performance in our production",
    "start": "1035520",
    "end": "1036959"
  },
  {
    "text": "environment",
    "start": "1036959",
    "end": "1038079"
  },
  {
    "text": "we just wrote a small script that would",
    "start": "1038079",
    "end": "1039918"
  },
  {
    "text": "call will fetch",
    "start": "1039919",
    "end": "1041120"
  },
  {
    "text": "using the php call extension the elastic",
    "start": "1041120",
    "end": "1044240"
  },
  {
    "text": "search burner page from the other data",
    "start": "1044240",
    "end": "1046000"
  },
  {
    "text": "center",
    "start": "1046000",
    "end": "1046480"
  },
  {
    "text": "which is 35 milliseconds more or less",
    "start": "1046480",
    "end": "1049760"
  },
  {
    "text": "from triple way",
    "start": "1049760",
    "end": "1052400"
  },
  {
    "text": "and then we call this script with a",
    "start": "1052400",
    "end": "1053919"
  },
  {
    "text": "concurrency of 100 under three different",
    "start": "1053919",
    "end": "1055919"
  },
  {
    "text": "conditions in one case we pointed the",
    "start": "1055919",
    "end": "1057760"
  },
  {
    "text": "script to fetch the data from",
    "start": "1057760",
    "end": "1060720"
  },
  {
    "text": "directly from elasticsearch but using",
    "start": "1060720",
    "end": "1063520"
  },
  {
    "text": "the http endpoint so no encryption we",
    "start": "1063520",
    "end": "1066080"
  },
  {
    "text": "got 720 requests per second",
    "start": "1066080",
    "end": "1068320"
  },
  {
    "text": "of throughput then we configured it to",
    "start": "1068320",
    "end": "1071600"
  },
  {
    "text": "connect to",
    "start": "1071600",
    "end": "1072720"
  },
  {
    "text": "electric search directly but using tls",
    "start": "1072720",
    "end": "1076720"
  },
  {
    "text": "and the performance was severely",
    "start": "1076720",
    "end": "1080240"
  },
  {
    "text": "reduced and finally we configured envoy",
    "start": "1080240",
    "end": "1084080"
  },
  {
    "text": "and the same machine",
    "start": "1084080",
    "end": "1085840"
  },
  {
    "text": "to manage connections to elasticsearch",
    "start": "1085840",
    "end": "1088640"
  },
  {
    "text": "and we made",
    "start": "1088640",
    "end": "1089360"
  },
  {
    "text": "the php script connect to envoy and",
    "start": "1089360",
    "end": "1091120"
  },
  {
    "text": "localhost",
    "start": "1091120",
    "end": "1092960"
  },
  {
    "text": "so the connections were encrypted but",
    "start": "1092960",
    "end": "1094960"
  },
  {
    "text": "mediated by envoy",
    "start": "1094960",
    "end": "1096240"
  },
  {
    "text": "and in this case we obtained 1050",
    "start": "1096240",
    "end": "1098559"
  },
  {
    "text": "requests per second",
    "start": "1098559",
    "end": "1099679"
  },
  {
    "text": "which is more than double that we got",
    "start": "1099679",
    "end": "1102080"
  },
  {
    "text": "with the recalls and",
    "start": "1102080",
    "end": "1103679"
  },
  {
    "text": "much much better even the direct calls",
    "start": "1103679",
    "end": "1105679"
  },
  {
    "text": "with no encryption",
    "start": "1105679",
    "end": "1107600"
  },
  {
    "text": "now take these numbers with um some",
    "start": "1107600",
    "end": "1110559"
  },
  {
    "text": "discretion",
    "start": "1110559",
    "end": "1111919"
  },
  {
    "text": "there is a large sharer bars like",
    "start": "1111919",
    "end": "1115679"
  },
  {
    "text": "across those numbers but still it's",
    "start": "1115679",
    "end": "1117840"
  },
  {
    "text": "under 20 throughput gain",
    "start": "1117840",
    "end": "1119440"
  },
  {
    "text": "when we use envoy for tls calls to a",
    "start": "1119440",
    "end": "1122000"
  },
  {
    "text": "remote data center",
    "start": "1122000",
    "end": "1123600"
  },
  {
    "text": "okay this would solve our problem we",
    "start": "1123600",
    "end": "1125840"
  },
  {
    "text": "want to call encrypted across data",
    "start": "1125840",
    "end": "1127520"
  },
  {
    "text": "centers and we don't want to lose",
    "start": "1127520",
    "end": "1128720"
  },
  {
    "text": "performance",
    "start": "1128720",
    "end": "1131360"
  },
  {
    "text": "which meant that we started the",
    "start": "1131360",
    "end": "1133039"
  },
  {
    "text": "migration to",
    "start": "1133039",
    "end": "1134640"
  },
  {
    "text": "a phase two of a migration of",
    "start": "1134640",
    "end": "1136160"
  },
  {
    "text": "introducing noise and middleware",
    "start": "1136160",
    "end": "1137919"
  },
  {
    "text": "from our biggest application which is",
    "start": "1137919",
    "end": "1140080"
  },
  {
    "text": "using php which is mediawiki",
    "start": "1140080",
    "end": "1142400"
  },
  {
    "text": "instead of starting like it's customary",
    "start": "1142400",
    "end": "1145520"
  },
  {
    "text": "for an sre",
    "start": "1145520",
    "end": "1146720"
  },
  {
    "text": "from a smallish service that we don't",
    "start": "1146720",
    "end": "1150720"
  },
  {
    "text": "worry too much about",
    "start": "1150720",
    "end": "1153760"
  },
  {
    "text": "the game that we were seeing in front of",
    "start": "1153840",
    "end": "1156559"
  },
  {
    "text": "us was too large to ignore so we started",
    "start": "1156559",
    "end": "1159039"
  },
  {
    "text": "from there",
    "start": "1159039",
    "end": "1160559"
  },
  {
    "text": "and let's see what happened so we said",
    "start": "1160559",
    "end": "1163840"
  },
  {
    "text": "before we expect to get",
    "start": "1163840",
    "end": "1165919"
  },
  {
    "text": "gains of latency mainly across data",
    "start": "1165919",
    "end": "1168320"
  },
  {
    "text": "centers",
    "start": "1168320",
    "end": "1169440"
  },
  {
    "text": "we expect to get a reduction in the cpu",
    "start": "1169440",
    "end": "1172160"
  },
  {
    "text": "and network use",
    "start": "1172160",
    "end": "1173520"
  },
  {
    "text": "let's see what happened when we",
    "start": "1173520",
    "end": "1175360"
  },
  {
    "text": "transitioned the",
    "start": "1175360",
    "end": "1176640"
  },
  {
    "text": "the or through the use of envoy process",
    "start": "1176640",
    "end": "1179600"
  },
  {
    "text": "calling session store from",
    "start": "1179600",
    "end": "1181200"
  },
  {
    "text": "session store uh you can guess from the",
    "start": "1181200",
    "end": "1184480"
  },
  {
    "text": "name",
    "start": "1184480",
    "end": "1184880"
  },
  {
    "text": "is just a small gulang application that",
    "start": "1184880",
    "end": "1186720"
  },
  {
    "text": "is used to manage",
    "start": "1186720",
    "end": "1188000"
  },
  {
    "text": "user sessions and to provide",
    "start": "1188000",
    "end": "1191200"
  },
  {
    "text": "that data to other services uh first of",
    "start": "1191200",
    "end": "1193360"
  },
  {
    "text": "all media wiki at the time of the",
    "start": "1193360",
    "end": "1194880"
  },
  {
    "text": "transition",
    "start": "1194880",
    "end": "1195600"
  },
  {
    "text": "uh just about one quarter of a week of a",
    "start": "1195600",
    "end": "1198480"
  },
  {
    "text": "tweaky traffic was using session store",
    "start": "1198480",
    "end": "1201679"
  },
  {
    "text": "so he was doing 4 500 requests per",
    "start": "1201679",
    "end": "1205200"
  },
  {
    "text": "second to",
    "start": "1205200",
    "end": "1206400"
  },
  {
    "text": "a session store and still at the moment",
    "start": "1206400",
    "end": "1209760"
  },
  {
    "text": "of the transition you can see here that",
    "start": "1209760",
    "end": "1211280"
  },
  {
    "text": "the cpu usage",
    "start": "1211280",
    "end": "1212799"
  },
  {
    "text": "from all the pods of session store",
    "start": "1212799",
    "end": "1216400"
  },
  {
    "text": "went from 2.5 seconds per second so 2.5",
    "start": "1216400",
    "end": "1219520"
  },
  {
    "text": "cpus",
    "start": "1219520",
    "end": "1220640"
  },
  {
    "text": "to about 0.7 cpus",
    "start": "1220640",
    "end": "1224159"
  },
  {
    "text": "this is amazing but let's see what",
    "start": "1224159",
    "end": "1226080"
  },
  {
    "text": "happened with the network",
    "start": "1226080",
    "end": "1228480"
  },
  {
    "text": "uh so for the network effect was even",
    "start": "1228480",
    "end": "1230640"
  },
  {
    "text": "more unexpected",
    "start": "1230640",
    "end": "1232320"
  },
  {
    "text": "what we saw was a big drop in the number",
    "start": "1232320",
    "end": "1235280"
  },
  {
    "text": "of bytes exchange and we expected that",
    "start": "1235280",
    "end": "1237760"
  },
  {
    "text": "but we also saw that the difference",
    "start": "1237760",
    "end": "1239520"
  },
  {
    "text": "between transmitted and received data",
    "start": "1239520",
    "end": "1241760"
  },
  {
    "text": "basically uh disappeared because we",
    "start": "1241760",
    "end": "1244880"
  },
  {
    "text": "weren't transmitting continuously the",
    "start": "1244880",
    "end": "1248159"
  },
  {
    "text": "tls certificate 4",
    "start": "1248159",
    "end": "1249760"
  },
  {
    "text": "500 times per second but just a few",
    "start": "1249760",
    "end": "1252000"
  },
  {
    "text": "times per minute",
    "start": "1252000",
    "end": "1254799"
  },
  {
    "text": "okay this is all looks very good right",
    "start": "1255360",
    "end": "1258240"
  },
  {
    "text": "on paper but",
    "start": "1258240",
    "end": "1259919"
  },
  {
    "text": "what about the latency which is what we",
    "start": "1259919",
    "end": "1261919"
  },
  {
    "text": "really care about because that's what",
    "start": "1261919",
    "end": "1263280"
  },
  {
    "text": "the users see",
    "start": "1263280",
    "end": "1264880"
  },
  {
    "text": "and the latency of both the services and",
    "start": "1264880",
    "end": "1267520"
  },
  {
    "text": "media was reduced significantly",
    "start": "1267520",
    "end": "1269280"
  },
  {
    "text": "let's see how so this is",
    "start": "1269280",
    "end": "1273200"
  },
  {
    "text": "the latency buckets traced for the",
    "start": "1273200",
    "end": "1276400"
  },
  {
    "text": "session store service you can see here",
    "start": "1276400",
    "end": "1278880"
  },
  {
    "text": "below that the",
    "start": "1278880",
    "end": "1279919"
  },
  {
    "text": "green line which is requests that be",
    "start": "1279919",
    "end": "1282400"
  },
  {
    "text": "served in",
    "start": "1282400",
    "end": "1283280"
  },
  {
    "text": "less than one millisecond doubled",
    "start": "1283280",
    "end": "1285760"
  },
  {
    "text": "basically at the time of the transition",
    "start": "1285760",
    "end": "1287200"
  },
  {
    "text": "at",
    "start": "1287200",
    "end": "1287520"
  },
  {
    "text": "the same time the number of requests",
    "start": "1287520",
    "end": "1289520"
  },
  {
    "text": "that took over 10 milliseconds",
    "start": "1289520",
    "end": "1291840"
  },
  {
    "text": "almost disappeared so good effects on",
    "start": "1291840",
    "end": "1295280"
  },
  {
    "text": "the latency of",
    "start": "1295280",
    "end": "1297039"
  },
  {
    "text": "uh session store let's see if it had any",
    "start": "1297039",
    "end": "1299360"
  },
  {
    "text": "effect on mediawiki let's",
    "start": "1299360",
    "end": "1300880"
  },
  {
    "text": "always remember it was about one-fourth",
    "start": "1300880",
    "end": "1303039"
  },
  {
    "text": "of the traffic",
    "start": "1303039",
    "end": "1304320"
  },
  {
    "text": "that was affected by the transition",
    "start": "1304320",
    "end": "1306880"
  },
  {
    "text": "because",
    "start": "1306880",
    "end": "1307600"
  },
  {
    "text": "only one-fourth of the traffic was",
    "start": "1307600",
    "end": "1309679"
  },
  {
    "text": "served by was using session store at the",
    "start": "1309679",
    "end": "1311760"
  },
  {
    "text": "time",
    "start": "1311760",
    "end": "1314080"
  },
  {
    "text": "and at the time of the transition you",
    "start": "1314320",
    "end": "1315840"
  },
  {
    "text": "can see here that the number of requests",
    "start": "1315840",
    "end": "1318240"
  },
  {
    "text": "the percentage of requests that",
    "start": "1318240",
    "end": "1319840"
  },
  {
    "text": "mediawiki was",
    "start": "1319840",
    "end": "1320880"
  },
  {
    "text": "responding to and that's when 100",
    "start": "1320880",
    "end": "1323280"
  },
  {
    "text": "milliseconds",
    "start": "1323280",
    "end": "1324480"
  },
  {
    "text": "went from about 21 20 between 20 and 22",
    "start": "1324480",
    "end": "1328480"
  },
  {
    "text": "it went to be between 27 and 25",
    "start": "1328480",
    "end": "1331600"
  },
  {
    "text": "so a five percent the increase in the",
    "start": "1331600",
    "end": "1333840"
  },
  {
    "text": "number of responses that took",
    "start": "1333840",
    "end": "1335200"
  },
  {
    "text": "less than 100 milliseconds not super",
    "start": "1335200",
    "end": "1338960"
  },
  {
    "text": "shocking as a result but still pretty",
    "start": "1338960",
    "end": "1340720"
  },
  {
    "text": "impressive",
    "start": "1340720",
    "end": "1341280"
  },
  {
    "text": "if you keep in mind that we did no",
    "start": "1341280",
    "end": "1343039"
  },
  {
    "text": "optimizations at the application layer",
    "start": "1343039",
    "end": "1347039"
  },
  {
    "text": "now this game is the random volume and i",
    "start": "1347039",
    "end": "1350240"
  },
  {
    "text": "want to",
    "start": "1350240",
    "end": "1351120"
  },
  {
    "text": "show it to you with a couple of more",
    "start": "1351120",
    "end": "1353120"
  },
  {
    "text": "graphs this is um",
    "start": "1353120",
    "end": "1354799"
  },
  {
    "text": "of two different deployments of the same",
    "start": "1354799",
    "end": "1357120"
  },
  {
    "text": "application it's a rest gateway to a to",
    "start": "1357120",
    "end": "1359360"
  },
  {
    "text": "basically uh one getting two thousand",
    "start": "1359360",
    "end": "1362320"
  },
  {
    "text": "requests per second from mediawiki",
    "start": "1362320",
    "end": "1364480"
  },
  {
    "text": "and in this case recipe where the usage",
    "start": "1364480",
    "end": "1367120"
  },
  {
    "text": "reduction is about 25 percent",
    "start": "1367120",
    "end": "1369840"
  },
  {
    "text": "and one where it gets 13 000 requests",
    "start": "1369840",
    "end": "1372480"
  },
  {
    "text": "per second and in this case the cpu",
    "start": "1372480",
    "end": "1374080"
  },
  {
    "text": "research reduction was 40",
    "start": "1374080",
    "end": "1376559"
  },
  {
    "text": "so you have to keep in mind that how",
    "start": "1376559",
    "end": "1378559"
  },
  {
    "text": "much you gain by introducing",
    "start": "1378559",
    "end": "1380240"
  },
  {
    "text": "um something that does persistent",
    "start": "1380240",
    "end": "1382159"
  },
  {
    "text": "connections on behalf of php depends on",
    "start": "1382159",
    "end": "1384159"
  },
  {
    "text": "the volume of course",
    "start": "1384159",
    "end": "1385840"
  },
  {
    "text": "that you make if you're in in the range",
    "start": "1385840",
    "end": "1388559"
  },
  {
    "text": "of making hundreds of calls per second",
    "start": "1388559",
    "end": "1391120"
  },
  {
    "text": "probably this is not very important for",
    "start": "1391120",
    "end": "1392880"
  },
  {
    "text": "you",
    "start": "1392880",
    "end": "1394159"
  },
  {
    "text": "but still there are other things that we",
    "start": "1394159",
    "end": "1396000"
  },
  {
    "text": "gained that are appliable",
    "start": "1396000",
    "end": "1397679"
  },
  {
    "text": "even to a small scale um",
    "start": "1397679",
    "end": "1403280"
  },
  {
    "text": "and one is as i told you before php runs",
    "start": "1403280",
    "end": "1406799"
  },
  {
    "text": "active passive so",
    "start": "1406799",
    "end": "1408159"
  },
  {
    "text": "at some point at the start of september",
    "start": "1408159",
    "end": "1410400"
  },
  {
    "text": "we switched which data center we were",
    "start": "1410400",
    "end": "1412159"
  },
  {
    "text": "serving",
    "start": "1412159",
    "end": "1412799"
  },
  {
    "text": "media wiki from because we want from",
    "start": "1412799",
    "end": "1414880"
  },
  {
    "text": "time to time to",
    "start": "1414880",
    "end": "1416400"
  },
  {
    "text": "verify that the infrastructure is sound",
    "start": "1416400",
    "end": "1418480"
  },
  {
    "text": "and working",
    "start": "1418480",
    "end": "1419520"
  },
  {
    "text": "healthy in both dataset everything went",
    "start": "1419520",
    "end": "1422960"
  },
  {
    "text": "good but overnight we noticed that the",
    "start": "1422960",
    "end": "1425600"
  },
  {
    "text": "save times reported from end users",
    "start": "1425600",
    "end": "1428840"
  },
  {
    "text": "doubled",
    "start": "1428840",
    "end": "1430320"
  },
  {
    "text": "for selling edits now normally you",
    "start": "1430320",
    "end": "1433520"
  },
  {
    "text": "have no idea where to look because it's",
    "start": "1433520",
    "end": "1436559"
  },
  {
    "text": "anything everything basically is working",
    "start": "1436559",
    "end": "1438960"
  },
  {
    "text": "fresh for media wiki all of it's stuck",
    "start": "1438960",
    "end": "1441200"
  },
  {
    "text": "so you have to figure out which part is",
    "start": "1441200",
    "end": "1443440"
  },
  {
    "text": "not working as expected",
    "start": "1443440",
    "end": "1445679"
  },
  {
    "text": "thank to using envoy who were able to",
    "start": "1445679",
    "end": "1448000"
  },
  {
    "text": "pinpoint within minutes",
    "start": "1448000",
    "end": "1449919"
  },
  {
    "text": "where the problem was it was an upstream",
    "start": "1449919",
    "end": "1451919"
  },
  {
    "text": "service called envoy",
    "start": "1451919",
    "end": "1454000"
  },
  {
    "text": "and to find the solution this was a huge",
    "start": "1454000",
    "end": "1457919"
  },
  {
    "text": "advantage compared to",
    "start": "1457919",
    "end": "1459039"
  },
  {
    "text": "anything that we had before also in",
    "start": "1459039",
    "end": "1461279"
  },
  {
    "text": "addition to that",
    "start": "1461279",
    "end": "1462480"
  },
  {
    "text": "circuit breaking in and void is amazing",
    "start": "1462480",
    "end": "1465279"
  },
  {
    "text": "even in its default configuration",
    "start": "1465279",
    "end": "1467679"
  },
  {
    "text": "um we have some services that media wiki",
    "start": "1467679",
    "end": "1470240"
  },
  {
    "text": "calls basically on every request",
    "start": "1470240",
    "end": "1472559"
  },
  {
    "text": "and if one of the service works too slow",
    "start": "1472559",
    "end": "1476000"
  },
  {
    "text": "uh traditionally would have basically",
    "start": "1476000",
    "end": "1478000"
  },
  {
    "text": "all the requests",
    "start": "1478000",
    "end": "1479760"
  },
  {
    "text": "piling up in php waiting for a response",
    "start": "1479760",
    "end": "1483279"
  },
  {
    "text": "from this remote service because we",
    "start": "1483279",
    "end": "1486080"
  },
  {
    "text": "couldn't be too aggressive with timeouts",
    "start": "1486080",
    "end": "1490158"
  },
  {
    "text": "but introducing envoy even if it's",
    "start": "1490400",
    "end": "1492320"
  },
  {
    "text": "default configuration envoy",
    "start": "1492320",
    "end": "1494000"
  },
  {
    "text": "would detect that too many timeouts were",
    "start": "1494000",
    "end": "1497679"
  },
  {
    "text": "received from the remote service and",
    "start": "1497679",
    "end": "1499600"
  },
  {
    "text": "start",
    "start": "1499600",
    "end": "1500000"
  },
  {
    "text": "considering it unhealthy and just",
    "start": "1500000",
    "end": "1502000"
  },
  {
    "text": "returning fast",
    "start": "1502000",
    "end": "1503360"
  },
  {
    "text": "errors to media wiki which means that",
    "start": "1503360",
    "end": "1505200"
  },
  {
    "text": "mediawiki was still able to operate",
    "start": "1505200",
    "end": "1507360"
  },
  {
    "text": "even though it was in a degraded state",
    "start": "1507360",
    "end": "1509200"
  },
  {
    "text": "it was maybe not reporting statistics",
    "start": "1509200",
    "end": "1511440"
  },
  {
    "text": "about visits",
    "start": "1511440",
    "end": "1513039"
  },
  {
    "text": "but still it was serving pages to the",
    "start": "1513039",
    "end": "1514640"
  },
  {
    "text": "users which is what we care most",
    "start": "1514640",
    "end": "1516720"
  },
  {
    "text": "mostly about finally just one notice we",
    "start": "1516720",
    "end": "1520159"
  },
  {
    "text": "i want to say that we still have some",
    "start": "1520159",
    "end": "1521760"
  },
  {
    "text": "scratches that's normal that's expected",
    "start": "1521760",
    "end": "1523919"
  },
  {
    "text": "when you're transitioning to using",
    "start": "1523919",
    "end": "1525279"
  },
  {
    "text": "something completely new",
    "start": "1525279",
    "end": "1527039"
  },
  {
    "text": "it will take time to earn all of them",
    "start": "1527039",
    "end": "1528720"
  },
  {
    "text": "out but overall",
    "start": "1528720",
    "end": "1530159"
  },
  {
    "text": "i think this was an unmitigated success",
    "start": "1530159",
    "end": "1534960"
  },
  {
    "text": "uh by using envoy we were able to",
    "start": "1534960",
    "end": "1537279"
  },
  {
    "text": "encrypt all the communications between",
    "start": "1537279",
    "end": "1538799"
  },
  {
    "text": "our services to add a lot of",
    "start": "1538799",
    "end": "1540799"
  },
  {
    "text": "observability to",
    "start": "1540799",
    "end": "1542159"
  },
  {
    "text": "them and we were able to grammatically",
    "start": "1542159",
    "end": "1545200"
  },
  {
    "text": "improve",
    "start": "1545200",
    "end": "1546000"
  },
  {
    "text": "the performance of our php applications",
    "start": "1546000",
    "end": "1548080"
  },
  {
    "text": "and really anyone",
    "start": "1548080",
    "end": "1549120"
  },
  {
    "text": "running a php application at scale",
    "start": "1549120",
    "end": "1551760"
  },
  {
    "text": "should think of",
    "start": "1551760",
    "end": "1553360"
  },
  {
    "text": "doing something like this well thank you",
    "start": "1553360",
    "end": "1556080"
  },
  {
    "text": "for your time",
    "start": "1556080",
    "end": "1556799"
  },
  {
    "text": "i hope i didn't bore you too much uh i",
    "start": "1556799",
    "end": "1559120"
  },
  {
    "text": "just want to point out that you can see",
    "start": "1559120",
    "end": "1560559"
  },
  {
    "text": "all of our dashboards that",
    "start": "1560559",
    "end": "1562000"
  },
  {
    "text": "the graphs that i showed you uh are",
    "start": "1562000",
    "end": "1564159"
  },
  {
    "text": "taken from at grafanathwithmedia.org",
    "start": "1564159",
    "end": "1567279"
  },
  {
    "text": "and you can talk to us on freenode on",
    "start": "1567279",
    "end": "1569200"
  },
  {
    "text": "our xenon 3 node",
    "start": "1569200",
    "end": "1571520"
  },
  {
    "text": "and my team is angry thank you very with",
    "start": "1571520",
    "end": "1574720"
  },
  {
    "text": "this",
    "start": "1574720",
    "end": "1575200"
  },
  {
    "text": "final blameless plug i just",
    "start": "1575200",
    "end": "1578240"
  },
  {
    "text": "thank you all for listening goodbye",
    "start": "1578240",
    "end": "1584159"
  },
  {
    "text": "hello everyone uh i hope you can hear me",
    "start": "1584159",
    "end": "1586799"
  },
  {
    "text": "so first of all",
    "start": "1586799",
    "end": "1587760"
  },
  {
    "text": "yes jake uh is asking uh when i'm saying",
    "start": "1587760",
    "end": "1590799"
  },
  {
    "text": "circuit breaking i'm talking about the",
    "start": "1590799",
    "end": "1592480"
  },
  {
    "text": "concept of circuit breaking and in the",
    "start": "1592480",
    "end": "1594480"
  },
  {
    "text": "case of envoy in terms of envoys",
    "start": "1594480",
    "end": "1596559"
  },
  {
    "text": "terminology it's",
    "start": "1596559",
    "end": "1597520"
  },
  {
    "text": "outlier detection in this case yes sorry",
    "start": "1597520",
    "end": "1601279"
  },
  {
    "text": "i should have been i should have been",
    "start": "1601279",
    "end": "1602559"
  },
  {
    "text": "clearer i realized why i was listening",
    "start": "1602559",
    "end": "1604400"
  },
  {
    "text": "now",
    "start": "1604400",
    "end": "1606480"
  },
  {
    "text": "so i think i answered in the chat",
    "start": "1606480",
    "end": "1609600"
  },
  {
    "text": "already because i knew that i was",
    "start": "1609600",
    "end": "1611120"
  },
  {
    "text": "running a bit",
    "start": "1611120",
    "end": "1612000"
  },
  {
    "text": "late with the time um so i see that",
    "start": "1612000",
    "end": "1615039"
  },
  {
    "text": "derek was asking",
    "start": "1615039",
    "end": "1616159"
  },
  {
    "text": "uh if the ultrastarter works differently",
    "start": "1616159",
    "end": "1618240"
  },
  {
    "text": "than swapping config files",
    "start": "1618240",
    "end": "1619679"
  },
  {
    "text": "we wanted to use the um the hotel",
    "start": "1619679",
    "end": "1622960"
  },
  {
    "text": "starter anyways",
    "start": "1622960",
    "end": "1624159"
  },
  {
    "text": "for things that are not running",
    "start": "1624159",
    "end": "1625279"
  },
  {
    "text": "kubernetes because we don't want to we",
    "start": "1625279",
    "end": "1627120"
  },
  {
    "text": "want to",
    "start": "1627120",
    "end": "1627679"
  },
  {
    "text": "racially serve all the requests whenever",
    "start": "1627679",
    "end": "1629840"
  },
  {
    "text": "we have to restart and buy",
    "start": "1629840",
    "end": "1631919"
  },
  {
    "text": "so at that point it was natural to just",
    "start": "1631919",
    "end": "1634720"
  },
  {
    "text": "use it just changing files",
    "start": "1634720",
    "end": "1636640"
  },
  {
    "text": "we have a procedure to build the files",
    "start": "1636640",
    "end": "1638159"
  },
  {
    "text": "basically on yeah puppet and",
    "start": "1638159",
    "end": "1640399"
  },
  {
    "text": "and deploy them the configuration files",
    "start": "1640399",
    "end": "1644000"
  },
  {
    "text": "and then just we just send a",
    "start": "1644000",
    "end": "1648880"
  },
  {
    "text": "sector with a cd agp to uh together",
    "start": "1648880",
    "end": "1652320"
  },
  {
    "text": "starter and",
    "start": "1652320",
    "end": "1653039"
  },
  {
    "text": "just starts again and any",
    "start": "1653039",
    "end": "1657519"
  },
  {
    "text": "a new envoy uh",
    "start": "1657600",
    "end": "1661039"
  },
  {
    "text": "to run the new configuration also from",
    "start": "1661039",
    "end": "1662720"
  },
  {
    "text": "what i remember if the configuration is",
    "start": "1662720",
    "end": "1664320"
  },
  {
    "text": "wrong",
    "start": "1664320",
    "end": "1665600"
  },
  {
    "text": "the old version should keep working from",
    "start": "1665600",
    "end": "1667840"
  },
  {
    "text": "what i remember but maybe it changed",
    "start": "1667840",
    "end": "1669679"
  },
  {
    "text": "over",
    "start": "1669679",
    "end": "1670480"
  },
  {
    "text": "last year",
    "start": "1670480",
    "end": "1672960"
  },
  {
    "text": "okay i didn't see other questions if i",
    "start": "1679200",
    "end": "1681360"
  },
  {
    "text": "missed any",
    "start": "1681360",
    "end": "1682240"
  },
  {
    "text": "please just tell me ask them again",
    "start": "1682240",
    "end": "1697840"
  },
  {
    "text": "some time she loading failures during",
    "start": "1707360",
    "end": "1709600"
  },
  {
    "text": "hot restart",
    "start": "1709600",
    "end": "1710720"
  },
  {
    "text": "uh no interesting",
    "start": "1710720",
    "end": "1715278"
  },
  {
    "text": "i didn't we didn't experience that but",
    "start": "1717679",
    "end": "1719679"
  },
  {
    "text": "probably we're not running",
    "start": "1719679",
    "end": "1721120"
  },
  {
    "text": "we're not running and boy at the edge",
    "start": "1721120",
    "end": "1722720"
  },
  {
    "text": "we're just running it between the",
    "start": "1722720",
    "end": "1723840"
  },
  {
    "text": "services internally so",
    "start": "1723840",
    "end": "1725760"
  },
  {
    "text": "every envoy is really doing the amount",
    "start": "1725760",
    "end": "1728320"
  },
  {
    "text": "of requests that probably could trigger",
    "start": "1728320",
    "end": "1730000"
  },
  {
    "text": "that",
    "start": "1730000",
    "end": "1732080"
  },
  {
    "text": "uh every invoice running at pretty low",
    "start": "1732080",
    "end": "1735360"
  },
  {
    "text": "scale if you",
    "start": "1735360",
    "end": "1736080"
  },
  {
    "text": "if you want right running some maybe a",
    "start": "1736080",
    "end": "1738480"
  },
  {
    "text": "thousand requests per second overall",
    "start": "1738480",
    "end": "1740480"
  },
  {
    "text": "a peak",
    "start": "1740480",
    "end": "1743039"
  },
  {
    "text": "okay thank you very much for listening",
    "start": "1750960",
    "end": "1753919"
  },
  {
    "text": "have a nice rest of the",
    "start": "1753919",
    "end": "1756039"
  },
  {
    "text": "conference",
    "start": "1756039",
    "end": "1759039"
  }
]