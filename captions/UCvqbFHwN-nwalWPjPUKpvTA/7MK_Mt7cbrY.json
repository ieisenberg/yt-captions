[
  {
    "text": "hello everyone and welcome to puts and Circumstance cryos graduation celebration I'm Sasha I'm one of the",
    "start": "80",
    "end": "8000"
  },
  {
    "text": "maintainers of cryo and I'm also involved in container ontime related projects and a since a couple of years now and I have the pleasure to be here",
    "start": "8000",
    "end": "15120"
  },
  {
    "text": "today with Peter hey everyone uh thanks for coming my name is uh Peter hunt I also work on cryo and sign node",
    "start": "15120",
    "end": "21800"
  },
  {
    "text": "container runtime things um appreciate everyone coming out here you all are my favorite conference attendees uh for",
    "start": "21800",
    "end": "27840"
  },
  {
    "text": "making it out also everyone on the virtual platform um and we're here to talk about cryo um",
    "start": "27840",
    "end": "33079"
  },
  {
    "text": "and so as some of you have gathered um cry's recently graduated uh in the cncf",
    "start": "33079",
    "end": "39360"
  },
  {
    "text": "which we're very excited about so this is in part sort of we're going to talk a little bit uh we're going to start off",
    "start": "39360",
    "end": "44480"
  },
  {
    "text": "talking a little bit about the process of graduation and sort of come some of our takeaways and hopefully this could also be a uh sort of a template for",
    "start": "44480",
    "end": "52760"
  },
  {
    "text": "other projects who are interested in graduation and some of the you know gotchas or difficulties we found along",
    "start": "52760",
    "end": "57920"
  },
  {
    "text": "the way and also some of the easier parts that that are you know things that are being fixed um so yay we graduated",
    "start": "57920",
    "end": "64878"
  },
  {
    "text": "um we graduated over the summer was pretty exciting um accomplishment it's uh a sort of um a uh it helps sorry um",
    "start": "64879",
    "end": "76960"
  },
  {
    "text": "it reinforces sort of the cryo uh usefulness in production and stability",
    "start": "76960",
    "end": "84240"
  },
  {
    "text": "uh we're so we're very excited about that um you know we have a there were a",
    "start": "84240",
    "end": "89400"
  },
  {
    "text": "number of you know nice articles that were written about it um nice quotes here some of them here but um yeah we're",
    "start": "89400",
    "end": "96159"
  },
  {
    "text": "we were really excited it was a long process we pretty much you know started the graduation process uh three years",
    "start": "96159",
    "end": "103680"
  },
  {
    "text": "ago or so um and along the way we kind of hit a couple of Road bumps that maybe",
    "start": "103680",
    "end": "109479"
  },
  {
    "text": "could have allowed us to graduate a little bit earlier so I'm just going to talk through some of those I think one of the biggest hurdles in the graduation",
    "start": "109479",
    "end": "115840"
  },
  {
    "text": "process was actually getting a security audit so um one of the so here's uh a",
    "start": "115840",
    "end": "121960"
  },
  {
    "text": "handful of the requirements that you have to do most of it's paperwork you have to have a governance file you have",
    "start": "121960",
    "end": "127360"
  },
  {
    "text": "to me maintainers file and all these things are pretty straightforward you just have to do them um that's not too",
    "start": "127360",
    "end": "133120"
  },
  {
    "text": "hard the best practi is badge and that's just a number of uh items that you have to complete as a project having CI and",
    "start": "133120",
    "end": "139319"
  },
  {
    "text": "having lters and stuff like that um having a license um having committers",
    "start": "139319",
    "end": "144360"
  },
  {
    "text": "from multiple organizations uh we have long had committers from multiple organ",
    "start": "144360",
    "end": "150000"
  },
  {
    "text": "a so the project is uh largely maintained by Red Hat we have um maintainers from Souza and IBM and Intel",
    "start": "150000",
    "end": "156760"
  },
  {
    "text": "and or uh contributors and um we'll get uh into that a little bit more and then",
    "start": "156760",
    "end": "162840"
  },
  {
    "text": "you know you have the security audit which is a big piece of it um and then you need to get the vote from the TOC",
    "start": "162840",
    "end": "168640"
  },
  {
    "text": "and that is one you know kind of remaining hurdle so um talking a little bit about just uh our biggest you know",
    "start": "168640",
    "end": "176480"
  },
  {
    "text": "one of the biggest challenges is you know supposed to be easy you know there's not that many things but we",
    "start": "176480",
    "end": "182000"
  },
  {
    "text": "found a couple of uh challenges along the way um one of them was um getting the security audit in the first place so",
    "start": "182000",
    "end": "189239"
  },
  {
    "text": "um here's sort of a little timeline I've gone I've taken out some of the names um",
    "start": "189239",
    "end": "194360"
  },
  {
    "text": "for privacy reasons but this is some of the correspon is you can kind of see a timeline like we reached out in",
    "start": "194360",
    "end": "199879"
  },
  {
    "text": "September of 2020 being like hey I think we're ready for uh security audit we're ready to start the process of graduation",
    "start": "199879",
    "end": "206640"
  },
  {
    "text": "and um this was someone in the cncf and um you know they were very helpful in uh",
    "start": "206640",
    "end": "212080"
  },
  {
    "text": "starting off the process and they were eventually how we were able to get um the audit but you know we had one",
    "start": "212080",
    "end": "217959"
  },
  {
    "text": "company tried to do the audit and there were some weird bureaucratic problems so that stalled basically all an entire",
    "start": "217959",
    "end": "223760"
  },
  {
    "text": "year um and then finally after you know we reached out again and um they were",
    "start": "223760",
    "end": "229920"
  },
  {
    "text": "able to connect with atiff uh which is a company that um basically helps be a liaison between open source projects and",
    "start": "229920",
    "end": "237079"
  },
  {
    "text": "you know various resources that they need the open source um I forget what the Acron is actually um but uh the",
    "start": "237079",
    "end": "243879"
  },
  {
    "text": "folks there uh were incredibly helpful um we're really appreciative of that and eventually they did get us set up with",
    "start": "243879",
    "end": "249400"
  },
  {
    "text": "the security audit and then um in you know 2022 but basically March",
    "start": "249400",
    "end": "255959"
  },
  {
    "text": "2022 uh you know a year and a half uh after or yeah we uh managed to get the",
    "start": "255959",
    "end": "263000"
  },
  {
    "text": "audit started and then finally um it was completed um and the auto went well you know cow um was deemed to have a pretty",
    "start": "263000",
    "end": "269400"
  },
  {
    "text": "good security posture we're pretty happy with um the findings that they made they set up fuzzing for us and it was good I",
    "start": "269400",
    "end": "275440"
  },
  {
    "text": "think for projects who are s uh getting prepared to go through this process this process is much more steam streamlined",
    "start": "275440",
    "end": "282000"
  },
  {
    "text": "now that um atiff is kind of regularly involved in these conversation so if",
    "start": "282000",
    "end": "287080"
  },
  {
    "text": "you're a project and you're looking for a security audit reaching out to the cncf um and they'll probably connect you",
    "start": "287080",
    "end": "292520"
  },
  {
    "text": "with oiff and then they'll connect you with um security researchers um so we",
    "start": "292520",
    "end": "298039"
  },
  {
    "text": "were just kind of caught the beginning of that that wave and so it kind of we hit some challenges along the way but we",
    "start": "298039",
    "end": "303560"
  },
  {
    "text": "made it a couple of other small little um paper cuts that we had along the way",
    "start": "303560",
    "end": "308840"
  },
  {
    "text": "um even though it's not explicitly spelled out in the uh requirements that the cncf gives you do have to fill out",
    "start": "308840",
    "end": "316199"
  },
  {
    "text": "or you're you're asked to fill out a due diligence document which is like",
    "start": "316199",
    "end": "321520"
  },
  {
    "text": "combines basically all of the formal requirements and then also has like a number of like informal requirements",
    "start": "321520",
    "end": "327919"
  },
  {
    "text": "like you kind of make a pitch for your project and talk through like what is your project talk about the architecture",
    "start": "327919",
    "end": "334160"
  },
  {
    "text": "of it and you know kind of say like why you think that it's ready for graduation this was a requirement that kind of came",
    "start": "334160",
    "end": "340319"
  },
  {
    "text": "as a surprise to us but it was revealed that a number of other projects had already done this in their process of graduation so this um you uh was",
    "start": "340319",
    "end": "348520"
  },
  {
    "text": "something I mean it was again just a little bit more paperwork but something that came as a surprise um and then one final little surprise that we kind of",
    "start": "348520",
    "end": "354840"
  },
  {
    "text": "hit along the way is um the uh technical oversight committee uh for uh the cncf",
    "start": "354840",
    "end": "362039"
  },
  {
    "text": "they have uh you know meeting times that they need uh they basically have",
    "start": "362039",
    "end": "367080"
  },
  {
    "text": "sessions you know times that they're meeting and um before cuon they stopped meeting which makes a bunch of sense they're super busy during this time but",
    "start": "367080",
    "end": "373080"
  },
  {
    "text": "we didn't realize this and sort of we missed a couple of deadlines as well because you know we just you know the",
    "start": "373080",
    "end": "378759"
  },
  {
    "text": "communication wasn't super tight um and because of that we uh also slipped so we",
    "start": "378759",
    "end": "384000"
  },
  {
    "text": "actually maybe could have made it graduated a little bit earlier but all in all you know the process happened",
    "start": "384000",
    "end": "390199"
  },
  {
    "text": "we're graduated and we're very excited about that it's a good reinforcement of the stability of cryo and sort of how",
    "start": "390199",
    "end": "395599"
  },
  {
    "text": "well it's been running in production for you know uh what like eight years now something like that uh seven years so",
    "start": "395599",
    "end": "403080"
  },
  {
    "text": "we're very excited um to be among the graduated projects and um so hasah I'll",
    "start": "403080",
    "end": "408680"
  },
  {
    "text": "break out the champagne later um I also wanted to shout out a couple of things that we've been doing",
    "start": "408680",
    "end": "414800"
  },
  {
    "text": "as a project so we're going to be talking more about features in a little bit um but just um we've been starting",
    "start": "414800",
    "end": "421080"
  },
  {
    "text": "doing some ment programs which has been helpful um you know getting some extra people on the project and we're always",
    "start": "421080",
    "end": "427560"
  },
  {
    "text": "looking for more contributors as practically every other project in the kubernetes ecosystem is um but you know",
    "start": "427560",
    "end": "433720"
  },
  {
    "text": "having official avenues that are provided through the cncf like Google summer of code and LFX um which is the",
    "start": "433720",
    "end": "440680"
  },
  {
    "text": "Linux Foundation I don't know what x it's just like internships done through the uh Linux Foundation um these are uh",
    "start": "440680",
    "end": "447599"
  },
  {
    "text": "quite helpful you know programs so if you're a pro and you're looking for help we found this to be good we've had some help on our um common RS which Sasha",
    "start": "447599",
    "end": "455280"
  },
  {
    "text": "will talk about a little bit and we also have had help with CRI stats which I am",
    "start": "455280",
    "end": "460319"
  },
  {
    "text": "uh about to talk about so I don't know if uh anyone has been following the cryo",
    "start": "460319",
    "end": "466440"
  },
  {
    "text": "update talk um you know the the abstract for it over the past couple of years but",
    "start": "466440",
    "end": "472960"
  },
  {
    "text": "pretty much every talk uh we have mentioned CRI stats update and actually pretty much every talk we have not Ted",
    "start": "472960",
    "end": "479319"
  },
  {
    "text": "talked about CRI stats and there's a little bit of lore behind that and the reason for it is um it's taken a long",
    "start": "479319",
    "end": "485400"
  },
  {
    "text": "time to do this process so the general overview of the idea is in Sig node we",
    "start": "485400",
    "end": "490479"
  },
  {
    "text": "have this initiative to move the stats collection from C advisor to the CRI",
    "start": "490479",
    "end": "495759"
  },
  {
    "text": "implementation um there's a couple of reasons that we'd want to do this um mostly just that c advisor including uh",
    "start": "495759",
    "end": "503280"
  },
  {
    "text": "being included in the kubernetes ecosystem is kind of a historical it's like almost like a ghost limb of a",
    "start": "503280",
    "end": "509520"
  },
  {
    "text": "phantom limb of the time with Docker so there wasn't sort of an entity to do this metrics collection regularly with",
    "start": "509520",
    "end": "515919"
  },
  {
    "text": "Docker so C advisor was you know introduced right at the beginning of kubernetes and it's just kind of been around ever since and we added plugins",
    "start": "515919",
    "end": "522640"
  },
  {
    "text": "for cryo and container D along the way as those became supported options for the CRI um but the the interactions are",
    "start": "522640",
    "end": "530120"
  },
  {
    "text": "a little bit awkward like it has it like has an HTTP API that it hits both of the CRI implementations to get information",
    "start": "530120",
    "end": "536959"
  },
  {
    "text": "kind of behind the back of the cuet and it like registers and I notify in the cgroup hierarchy to actually know when a",
    "start": "536959",
    "end": "542920"
  },
  {
    "text": "container is created um this is like working fine but it's also difficult to extend it's kind of a monolith um",
    "start": "542920",
    "end": "550480"
  },
  {
    "text": "program because it uh you know and it's hard to extend especially for different like topologies of containers like a cot",
    "start": "550480",
    "end": "558440"
  },
  {
    "text": "container um you know which is a VM running on the host it's running I notify on the coup hierarchy there isn't",
    "start": "558440",
    "end": "564880"
  },
  {
    "text": "a sep hierarchy for a VM or like from the host perspective like there's and a c group created for that VM it's totally",
    "start": "564880",
    "end": "571680"
  },
  {
    "text": "separated so C advisor doesn't have any insight into what those VMS are doing um",
    "start": "571680",
    "end": "578079"
  },
  {
    "text": "so we started this process uh a long time ago um 2021 uh originally um and",
    "start": "578079",
    "end": "586680"
  },
  {
    "text": "the idea was just to take the stas collection and move it over but it turned out that there were a number of difficulties C advisor is actually",
    "start": "586680",
    "end": "592959"
  },
  {
    "text": "pretty entrenched in the kubernetes ecosystem so the process of breaking things out and moving it into the CRI",
    "start": "592959",
    "end": "598440"
  },
  {
    "text": "has been a little bit difficult ult we finally kind of have a um a a design um",
    "start": "598440",
    "end": "604680"
  },
  {
    "text": "we kind of came to that somewhere around 125 126 and now we've just kind of been working on the CRI implementations to",
    "start": "604680",
    "end": "611079"
  },
  {
    "text": "get um support in there um so here are the uh grpc calls so this is like CRI",
    "start": "611079",
    "end": "619519"
  },
  {
    "text": "files so these are the grpc calls that the cubet will use to call directly into the cryo or container D um to get the uh",
    "start": "619519",
    "end": "628560"
  },
  {
    "text": "get the so you can see on both sides there are kind of two different stats I'm two different like ways that the",
    "start": "628560",
    "end": "635399"
  },
  {
    "text": "Cubit uses the stats I'll go into a little bit of detail about that in a bit but just think of the stats as a",
    "start": "635399",
    "end": "641079"
  },
  {
    "text": "structured API that the Cubit uses to emit um you know for things like eviction and then the metrics are like",
    "start": "641079",
    "end": "647839"
  },
  {
    "text": "unstructured key values that feed into Prometheus um and um so we have here so",
    "start": "647839",
    "end": "655720"
  },
  {
    "text": "before basically how it how it works today is C advisor does all the stat collection it holds um basically these",
    "start": "655720",
    "end": "662600"
  },
  {
    "text": "large stat objects um and it uh you know registers the cgroups and they not",
    "start": "662600",
    "end": "668519"
  },
  {
    "text": "notified it just kind of continually like you know uh is watching the cgroups and is continually reading them um it",
    "start": "668519",
    "end": "674920"
  },
  {
    "text": "then directly writes to Prometheus uh through its metric C advisor endpoint um",
    "start": "674920",
    "end": "680000"
  },
  {
    "text": "and this is how you get the container stats through the entire ecosystem um and then it also uh has there's a API",
    "start": "680000",
    "end": "688120"
  },
  {
    "text": "well requests the um stats from the uh from C advisor and then translate that",
    "start": "688120",
    "end": "694760"
  },
  {
    "text": "into the stat summary API which also feeds into the metrics resource API um and these two this uh is for structured",
    "start": "694760",
    "end": "702399"
  },
  {
    "text": "stats that the cubet like basically has a API guarantee of like these are the stats that we will report for eviction",
    "start": "702399",
    "end": "709120"
  },
  {
    "text": "um or uh you know for the scheduler to know how much uh spaces on the Node and things like that cubet also depends on a",
    "start": "709120",
    "end": "716000"
  },
  {
    "text": "couple of other like the advisor for things that are not ODS and container stats like the node level stats um and",
    "start": "716000",
    "end": "723040"
  },
  {
    "text": "so and the eviction manager does request directly of it as well um the goal and",
    "start": "723040",
    "end": "728240"
  },
  {
    "text": "some what we're going to basically be moving to is have and I showed the CRI messages uh earlier but basically the um",
    "start": "728240",
    "end": "736560"
  },
  {
    "text": "this stat summary API is going to be fulfilled by the Pod sandbox stats request and this request is going to",
    "start": "736560",
    "end": "742760"
  },
  {
    "text": "basically take a structured API from uh cryo and so you see here like we have",
    "start": "742760",
    "end": "749279"
  },
  {
    "text": "memory usage and CPU usage and like these are things that the cubid will then immediately interpret and feed to",
    "start": "749279",
    "end": "754680"
  },
  {
    "text": "the various apis that are reading from it and then we have the metrics which are more unstructured and this is",
    "start": "754680",
    "end": "760199"
  },
  {
    "text": "actually what I'm going to be talking about today and this is what's kind of dragged on a little bit is the CRI metrics have been a little bit tricky to",
    "start": "760199",
    "end": "766600"
  },
  {
    "text": "get going um because we want to keep the metric C advisor endpoint intact but we",
    "start": "766600",
    "end": "772480"
  },
  {
    "text": "also want to be able to um you know have them come from the CRI so we've",
    "start": "772480",
    "end": "778079"
  },
  {
    "text": "basically made it so that uh and we also want it to happen efficiently so you'll notice there's um so we have the uh",
    "start": "778079",
    "end": "785600"
  },
  {
    "text": "metric and actually in this picture I'm missing a little bit I'm just noticing but um the the sandbox metrics and the",
    "start": "785600",
    "end": "792360"
  },
  {
    "text": "container metrics basically will hold all of the values of the metrics and the",
    "start": "792360",
    "end": "797480"
  },
  {
    "text": "keys will be registered as a separate API call um like the list metrics descriptors so there's basically two",
    "start": "797480",
    "end": "804800"
  },
  {
    "text": "separate request lines that will be going down to cryo and the reason for this is we reason that the metrics that",
    "start": "804800",
    "end": "811000"
  },
  {
    "text": "are going to be reported on a node like once the node starts will be pretty static the metrics will be red um you",
    "start": "811000",
    "end": "817399"
  },
  {
    "text": "know the Val the keys that the cubet cares about will be the same and then",
    "start": "817399",
    "end": "822600"
  },
  {
    "text": "the values of the things that change so we wanted to reduce the amount of object creation which I'll also talk about a little bit later um as an optimization",
    "start": "822600",
    "end": "829440"
  },
  {
    "text": "and so we have this sort of double request way so all of this here you see are like these are the the um the values",
    "start": "829440",
    "end": "835959"
  },
  {
    "text": "of the metrics um and this is what cryo will you use um you know various libraries to read into and then populate",
    "start": "835959",
    "end": "842880"
  },
  {
    "text": "these objects and return them up through the cuet which will proxy it through the metric C advisor endpoint so even though",
    "start": "842880",
    "end": "848120"
  },
  {
    "text": "it won't be coming from C advisor an end user who upgrades to use this feature will see the metrics as they have",
    "start": "848120",
    "end": "855120"
  },
  {
    "text": "because ultimately the metrics have kind of become a like an unofficial API of",
    "start": "855120",
    "end": "860759"
  },
  {
    "text": "kubernetes like even though we've never promised anything of it it actually has kind of um been that way um for so long",
    "start": "860759",
    "end": "867360"
  },
  {
    "text": "that people just assume it's there SE advisor is still going to be around for node level stats so it's not totally",
    "start": "867360",
    "end": "872839"
  },
  {
    "text": "going away it's just going to be out of the business of doing potting container stats um so we here here we have uh my",
    "start": "872839",
    "end": "879920"
  },
  {
    "text": "colleague soan has opened to PR and we've been working on this um uh PR to",
    "start": "879920",
    "end": "885920"
  },
  {
    "text": "uh get the potting container stats uh or specifically the metrics from the CRI um",
    "start": "885920",
    "end": "892040"
  },
  {
    "text": "there's a handful of like sort of challenges that we've come along the way and some optimizations that we want to fix so I don't know if anyone's ever",
    "start": "892040",
    "end": "898680"
  },
  {
    "text": "ever profiled the cuet um and seen kind of how heavy the metrics collection is",
    "start": "898680",
    "end": "903839"
  },
  {
    "text": "in kubernetes but C advisor actually consumes a lot of CPU and a lot of that is just creating these tiny little objects like container stats over and",
    "start": "903839",
    "end": "910680"
  },
  {
    "text": "over and over again um so something that we want to try to focus on in cryo",
    "start": "910680",
    "end": "916000"
  },
  {
    "text": "specifically is like reduce some of the overhead of metrics collection and this is some of the hope of the promise of um",
    "start": "916000",
    "end": "923199"
  },
  {
    "text": "CRI stats so we ideally would collect a metric once then use it everywhere so instead of duplicating the stats and the",
    "start": "923199",
    "end": "929360"
  },
  {
    "text": "metrics we just collect it once and then basically hold those objects um and return them that's pretty",
    "start": "929360",
    "end": "934480"
  },
  {
    "text": "straightforward that makes sense but um we have a periodic collection so cryo is",
    "start": "934480",
    "end": "939800"
  },
  {
    "text": "collecting on um its own independent time um and so an admin could configure",
    "start": "939800",
    "end": "945720"
  },
  {
    "text": "how quickly the stats are refreshed to be able to you know configure how much CPU is used uh in that process um and",
    "start": "945720",
    "end": "953639"
  },
  {
    "text": "that's run independently of the cuets um refresh frequency so the cuet isn't",
    "start": "953639",
    "end": "959319"
  },
  {
    "text": "waiting for the CRI for cryo to get the metrics but it's also you know uh collecting them basically you know",
    "start": "959319",
    "end": "965920"
  },
  {
    "text": "independently from each other um and returning them asynchronously um we also are hoping to",
    "start": "965920",
    "end": "971560"
  },
  {
    "text": "have configuration for which metrics to collect it'll only be on the granularity of like a cgroup controller so like you",
    "start": "971560",
    "end": "977319"
  },
  {
    "text": "can get all the CPU metrics but maybe you don't care about the network metrics like your pods are just they don't care about each other so they're not doing",
    "start": "977319",
    "end": "982920"
  },
  {
    "text": "any network things for some reason um and you can you can tune cryo Behavior to be able to not collect those metrics",
    "start": "982920",
    "end": "988560"
  },
  {
    "text": "and reduce the memory and CPU that cryo is kind of continuously using um and finally like a hope of ours is to be",
    "start": "988560",
    "end": "995199"
  },
  {
    "text": "able to reduce the object turn so a big part of the CPU usage of the metrics collection stack is actually from the go",
    "start": "995199",
    "end": "1001399"
  },
  {
    "text": "runtime garbage collecting these tiny little objects that it's just allocating over and over and over again um and so",
    "start": "1001399",
    "end": "1007800"
  },
  {
    "text": "our hope is that with through the metrics uh you know collection process",
    "start": "1007800",
    "end": "1013040"
  },
  {
    "text": "we can hold on to some we like the idea is basically to have like two lists of metrics simultaneously being held one of",
    "start": "1013040",
    "end": "1019959"
  },
  {
    "text": "them is the old metrics that's being returned to the CRI and one of them is the one we're updating and then when we",
    "start": "1019959",
    "end": "1025360"
  },
  {
    "text": "finish updating them we switch the two pointers so that we're just constantly holding these two lists which the go runtime would practically be doing in",
    "start": "1025360",
    "end": "1031600"
  },
  {
    "text": "memory but this will allow us to write it in place rather than having it you know constantly allocating these new",
    "start": "1031600",
    "end": "1037079"
  },
  {
    "text": "objects and optimize the CPU in that way so these are some of the things that we're hopeful about in the metrics um in",
    "start": "1037079",
    "end": "1044038"
  },
  {
    "text": "The Matrix collection um to be honest we haven't finished it yet I was hoping to have finished it by now but we haven't",
    "start": "1044039",
    "end": "1049720"
  },
  {
    "text": "we're aiming for 129 but it might slip to 130 it's a hard process and it's kind of so because it's so entrenched we want",
    "start": "1049720",
    "end": "1056480"
  },
  {
    "text": "to get it right so we're not going to rush it in and have an incomplete solution we want to get it correct but",
    "start": "1056480",
    "end": "1061559"
  },
  {
    "text": "um we're hoping to get it as soon as possible because um it's been a long time we're ready uh we also um have been",
    "start": "1061559",
    "end": "1068280"
  },
  {
    "text": "working with the continuity Community advocating for them to add support they have yet to do so as well so and then",
    "start": "1068280",
    "end": "1073760"
  },
  {
    "text": "once both of us are finished with that we're going to push the cap to Beta And finally make maybe one day be able to GA",
    "start": "1073760",
    "end": "1079760"
  },
  {
    "text": "and drop C advisor from the business of collecting potting container stats um so that's it for me uh we'll push it over",
    "start": "1079760",
    "end": "1086559"
  },
  {
    "text": "to uh Sasha for talking on con RS thank you yeah let's speak a bit about KS so",
    "start": "1086559",
    "end": "1094840"
  },
  {
    "text": "just as a summary we have conon uh as container monitoring tool right now in",
    "start": "1094840",
    "end": "1100159"
  },
  {
    "text": "place and this helps us to uh watch the whole life cycle of the container but we were working on an R",
    "start": "1100159",
    "end": "1108440"
  },
  {
    "text": "replacement uh which is called commonize and we had a uh working implementation",
    "start": "1108440",
    "end": "1113600"
  },
  {
    "text": "probably since the beginning of the year but we released a bunch of new versions since cucon in Amsterdam and I think",
    "start": "1113600",
    "end": "1122679"
  },
  {
    "text": "it's almost about stabilization right now but we also have a new logo so just",
    "start": "1122679",
    "end": "1127840"
  },
  {
    "text": "look at this little tiny crap and this little eye so it's more or less inspired by the all Zing ey so it should outline",
    "start": "1127840",
    "end": "1135280"
  },
  {
    "text": "that it's a monitoring tool um but it's should also highlight that it fits into our ecosystem of other projects like",
    "start": "1135280",
    "end": "1142400"
  },
  {
    "text": "pman cryo and others so it just has the same shape and other than that we also added",
    "start": "1142400",
    "end": "1150960"
  },
  {
    "text": "um did like everything which is around con Moniz so we added multi architecture support for our static binaries for uh",
    "start": "1150960",
    "end": "1158159"
  },
  {
    "text": "arm AMD 64 and power PC and uh those are also now integrated into the cryo static",
    "start": "1158159",
    "end": "1164720"
  },
  {
    "text": "bundle and also the packages and this was Will us the opportunity later on to",
    "start": "1164720",
    "end": "1169799"
  },
  {
    "text": "directly switch over from K to koniz So in theory users could also right now try",
    "start": "1169799",
    "end": "1176600"
  },
  {
    "text": "conon um it also works we also have testing set up with Kon but we are still",
    "start": "1176600",
    "end": "1181799"
  },
  {
    "text": "waiting for the integration into pman and other than that we are also working",
    "start": "1181799",
    "end": "1186960"
  },
  {
    "text": "on uh as part of the lfix Linux Foundation mentoring Pro program we are also uh working on different Ling",
    "start": "1186960",
    "end": "1193760"
  },
  {
    "text": "mechanisms and there are also some thoughts about uh directly forwarding the logs to some external resources and",
    "start": "1193760",
    "end": "1200799"
  },
  {
    "text": "stuff like that but all those features don't have the highest priority right now because we are just uh waiting for",
    "start": "1200799",
    "end": "1206760"
  },
  {
    "text": "the con s 1.0 which probably will be released next year we are kind of",
    "start": "1206760",
    "end": "1211880"
  },
  {
    "text": "optimistic about that another big feature we are working on right now is the six store signature",
    "start": "1211880",
    "end": "1218919"
  },
  {
    "text": "verification so the question would be now uh why don't we why do we need it at",
    "start": "1218919",
    "end": "1224679"
  },
  {
    "text": "all um kubernetes signs container based images since 124 and which is a long time and they also",
    "start": "1224679",
    "end": "1231320"
  },
  {
    "text": "have uh signatures for every other artifact right now um but we are mostly",
    "start": "1231320",
    "end": "1237200"
  },
  {
    "text": "focusing on container images because that's what cryo can actually work with",
    "start": "1237200",
    "end": "1242280"
  },
  {
    "text": "um and having Sixto signatures for container images can be already verified",
    "start": "1242280",
    "end": "1248919"
  },
  {
    "text": "by potman and uh the idea is now to also integrate this feature into cryo to be",
    "start": "1248919",
    "end": "1254840"
  },
  {
    "text": "able to verify store signatures for container images and this is supported since cryo 128 for",
    "start": "1254840",
    "end": "1262200"
  },
  {
    "text": "pulling container images and other Solutions uh which",
    "start": "1262200",
    "end": "1267280"
  },
  {
    "text": "don't do it in the container run time actually go for the admission controller based verification so there's the policy",
    "start": "1267280",
    "end": "1272440"
  },
  {
    "text": "controller available from from six store um but we are trying to go a different",
    "start": "1272440",
    "end": "1277679"
  },
  {
    "text": "way and directly validate the signatures where the image gets pulled and from our perspective this kind of increases the",
    "start": "1277679",
    "end": "1286080"
  },
  {
    "text": "security so how does it work um cryo reads policy. Chason since the beginning",
    "start": "1286200",
    "end": "1293520"
  },
  {
    "text": "on so this policy kind of uh outlines the main rules for uh what should be uh",
    "start": "1293520",
    "end": "1300080"
  },
  {
    "text": "what is acceptable for cryo so here we can see uh that the default type is that",
    "start": "1300080",
    "end": "1305840"
  },
  {
    "text": "we reject everything and then we Define our transports so Docker is the standard",
    "start": "1305840",
    "end": "1310960"
  },
  {
    "text": "transport for containers and now we Define for example like a container",
    "start": "1310960",
    "end": "1316760"
  },
  {
    "text": "image which is is signed and then we now outlined that it should be six store signed it should match the repository",
    "start": "1316760",
    "end": "1323799"
  },
  {
    "text": "which basically means it matches all TXS uh which are under this repository and",
    "start": "1323799",
    "end": "1329159"
  },
  {
    "text": "it also should match the oidc issuer from GitHub and also the sub email so",
    "start": "1329159",
    "end": "1334799"
  },
  {
    "text": "the ca data CA data from fio and the Reco public key data is stripped down",
    "start": "1334799",
    "end": "1341559"
  },
  {
    "text": "away here those are the standard uh instances which are provided by ztore which also means that we later on have",
    "start": "1341559",
    "end": "1347640"
  },
  {
    "text": "support for custom instances as well so what is new in qu 128 uh with",
    "start": "1347640",
    "end": "1354520"
  },
  {
    "text": "respect to that um we added a new option which is called uh signature policy de",
    "start": "1354520",
    "end": "1360200"
  },
  {
    "text": "and this uh defines the root path for namespace separated signature policies so cryo will look up this path and for",
    "start": "1360200",
    "end": "1367279"
  },
  {
    "text": "example if we have a default namespace then it will look up this option path and then look for the default. Json so",
    "start": "1367279",
    "end": "1374880"
  },
  {
    "text": "kuber kubernetes namespaces are unique which is great so we can just use a directory three structure to outline",
    "start": "1374880",
    "end": "1381559"
  },
  {
    "text": "policies with that and this works right now on image pull um we also use the",
    "start": "1381559",
    "end": "1388279"
  },
  {
    "text": "global policy as fallback which is kind of nice because then we can do something like administrators can build a",
    "start": "1388279",
    "end": "1394600"
  },
  {
    "text": "hierarchy of policies and then apply it to the actual cluster um yeah future work um right now",
    "start": "1394600",
    "end": "1401799"
  },
  {
    "text": "it doesn't work on container creation so the cuet pulls container images only",
    "start": "1401799",
    "end": "1407360"
  },
  {
    "text": "when they are not already available on disk when a container image is already available on disk then it just passes",
    "start": "1407360",
    "end": "1412919"
  },
  {
    "text": "the container image ID down to cry and cryo should pick up this image so and",
    "start": "1412919",
    "end": "1419600"
  },
  {
    "text": "the issue with that is that we just could easily hook into that process and",
    "start": "1419600",
    "end": "1424640"
  },
  {
    "text": "we need a signature verification on container creation if the image already exists on this this is something we are",
    "start": "1424640",
    "end": "1430400"
  },
  {
    "text": "working on right now um and also another big topic is custom resources on top of",
    "start": "1430400",
    "end": "1436880"
  },
  {
    "text": "that abstractions so so if we look at the policy controller from Zig store for example they have custom resources in",
    "start": "1436880",
    "end": "1443039"
  },
  {
    "text": "place um which make it more easier to manage those",
    "start": "1443039",
    "end": "1448000"
  },
  {
    "text": "policies now we have a little demo and I can we can probably make it full",
    "start": "1448360",
    "end": "1454039"
  },
  {
    "text": "screen and",
    "start": "1454039",
    "end": "1459960"
  },
  {
    "text": "yeah how the signature verification actually works oh yeah that's cool",
    "start": "1459960",
    "end": "1466440"
  },
  {
    "text": "thanks so we can assume that we have a running kubernetes cluster so cryo 128 the",
    "start": "1466440",
    "end": "1473120"
  },
  {
    "text": "latest release is cryo 1282 by the way released last week and we have a cluster",
    "start": "1473120",
    "end": "1479279"
  },
  {
    "text": "up and running which kind of is a single note cluster in our case so now we have",
    "start": "1479279",
    "end": "1484320"
  },
  {
    "text": "to ensure that cry RS with enabled uh six store support and for that we have to ensure that the default configuration",
    "start": "1484320",
    "end": "1492840"
  },
  {
    "text": "for the Registries contains the used six store attachments and that this defaults to",
    "start": "1492840",
    "end": "1499679"
  },
  {
    "text": "true and now we can think about creating a policy so the default policy in our",
    "start": "1499679",
    "end": "1505919"
  },
  {
    "text": "case doesn't specify anything of Interest so it's just accepts everything uh with the default transport and also",
    "start": "1505919",
    "end": "1512360"
  },
  {
    "text": "for the docker demon which is like uh the default transport for container images so we allow basically everything",
    "start": "1512360",
    "end": "1518440"
  },
  {
    "text": "in our default policy and now we can create a namespace",
    "start": "1518440",
    "end": "1526000"
  },
  {
    "text": "policy so by that we can just just create a default. Chason and this cons",
    "start": "1526000",
    "end": "1531120"
  },
  {
    "text": "contains the example I showed you previously it just requires that a cryo signed image is six St signed and that",
    "start": "1531120",
    "end": "1538159"
  },
  {
    "text": "it matches the repository with the issuer and subject",
    "start": "1538159",
    "end": "1543639"
  },
  {
    "text": "email and if we then try to pull the image with specifying the sendbox config",
    "start": "1546200",
    "end": "1553039"
  },
  {
    "text": "so we can just outline a simple sendbox config which contains contains the actual name",
    "start": "1553039",
    "end": "1558360"
  },
  {
    "text": "space which is important otherwise it wouldn't match then we can use cry cuddle to pull by using thatp config and",
    "start": "1558360",
    "end": "1565480"
  },
  {
    "text": "the image and now we expect that this works and it also works as intended so",
    "start": "1565480",
    "end": "1570640"
  },
  {
    "text": "this is great um but if we now change the uh policy to match a different",
    "start": "1570640",
    "end": "1576679"
  },
  {
    "text": "subject email like simply wrong not the the correct email which actually sign",
    "start": "1576679",
    "end": "1581760"
  },
  {
    "text": "the image then we have to remove it and repo the con container image and then we",
    "start": "1581760",
    "end": "1587000"
  },
  {
    "text": "get the ACT error message that the required email is not found so it's kind",
    "start": "1587000",
    "end": "1593240"
  },
  {
    "text": "of interesting and also is expected in that case and we can also do the same by",
    "start": "1593240",
    "end": "1599520"
  },
  {
    "text": "using a cuetes pod right so kuet instance in the background is still running we just run a PO with the",
    "start": "1599520",
    "end": "1605000"
  },
  {
    "text": "default name in the default namespace on the same container image and now we",
    "start": "1605000",
    "end": "1610120"
  },
  {
    "text": "create a PO and then we get the actual Arrow from",
    "start": "1610120",
    "end": "1615240"
  },
  {
    "text": "the cube c l CLI if we now describe the part then we see",
    "start": "1615240",
    "end": "1621320"
  },
  {
    "text": "the same Arrow here that the image P failed because the source image got",
    "start": "1621320",
    "end": "1626399"
  },
  {
    "text": "rejected and we also added a bunch of new uh single enhancements to kubernetes",
    "start": "1626399",
    "end": "1631960"
  },
  {
    "text": "and this is the signature validation failed error code the cool thing on this is that it provides direct CLI uh",
    "start": "1631960",
    "end": "1639200"
  },
  {
    "text": "feedback to end users so if we just change the image name from signed to unsigned so there is this image exists",
    "start": "1639200",
    "end": "1645520"
  },
  {
    "text": "in the registry but it's just not signed it's a test image for our cases and if we then uh apply the pot itself then we",
    "start": "1645520",
    "end": "1653880"
  },
  {
    "text": "actually have a chance to see the signature validation field uh in the image status which is great so this",
    "start": "1653880",
    "end": "1660919"
  },
  {
    "text": "provides a direct feedback to end users that the verification of the signature is not accepted at",
    "start": "1660919",
    "end": "1668039"
  },
  {
    "text": "all yeah thank you",
    "start": "1674200",
    "end": "1679519"
  },
  {
    "text": "another thing we are working on is the cryo packaging efforts so kubernetes",
    "start": "1679720",
    "end": "1685559"
  },
  {
    "text": "already announced uh in August that the Legacy package repositories for EP and yam uh package managers are frozen back",
    "start": "1685559",
    "end": "1694159"
  },
  {
    "text": "in August and um the community owned de and RBM repositories are now built on",
    "start": "1694159",
    "end": "1699840"
  },
  {
    "text": "top of opener and the open build service and they are already in production right now so cryo already used OBS for p in",
    "start": "1699840",
    "end": "1707880"
  },
  {
    "text": "which is kind of cool um but we are using the sources and maintaining dependencies like goang versions and",
    "start": "1707880",
    "end": "1713679"
  },
  {
    "text": "also had to update the versions manually and this is kind of a a high effort especially if we consider that we have",
    "start": "1713679",
    "end": "1719240"
  },
  {
    "text": "to support many distributions and stuff like that um and kubernetes does does that by uh using a different",
    "start": "1719240",
    "end": "1726399"
  },
  {
    "text": "approach they uh just use two repositories for deps just one for dep",
    "start": "1726399",
    "end": "1731559"
  },
  {
    "text": "and one for RPMs and in cryo finally we already have a static binary bundle and",
    "start": "1731559",
    "end": "1738080"
  },
  {
    "text": "this contains everything we need to run cryo and this also gets automatically published for every release branches uh",
    "start": "1738080",
    "end": "1744600"
  },
  {
    "text": "release branch and also for Tech releases and it's bu reproducible by using NX and those static binaries could",
    "start": "1744600",
    "end": "1751720"
  },
  {
    "text": "be used for packages like actually kubernetes does it in the same way so integrating the existing OBS project",
    "start": "1751720",
    "end": "1758399"
  },
  {
    "text": "layout was an actual lwh hanging fruit and this means that uh all future",
    "start": "1758399",
    "end": "1766080"
  },
  {
    "text": "cryo packages will be shipped as part of the official supported infrastructure like which is then on PKG does.io we",
    "start": "1766080",
    "end": "1774200"
  },
  {
    "text": "added everything to a dedicated repository and we have a daily reconcilation shop which uh does the",
    "start": "1774200",
    "end": "1780840"
  },
  {
    "text": "reconcilation for pre-releases like the release branches and also for every Tech and the only Tech which is supported",
    "start": "1780840",
    "end": "1786919"
  },
  {
    "text": "right now is the release we did last week so it's 1282 um so we can already test it um",
    "start": "1786919",
    "end": "1793600"
  },
  {
    "text": "which is pretty cool and we has Al also integrated some test pipeline for various distributions and we have some",
    "start": "1793600",
    "end": "1800320"
  },
  {
    "text": "like staging and releasing process like the kubernetes Upstream repository does this and we are ex using the exact the",
    "start": "1800320",
    "end": "1807960"
  },
  {
    "text": "same tools to have uh achieved a similar",
    "start": "1807960",
    "end": "1813480"
  },
  {
    "text": "result so cool now let's just demo it just for the RPMs we have a second demo",
    "start": "1813480",
    "end": "1820159"
  },
  {
    "text": "in the in the talk for the de de packages but we don't have to do it because it's basically the same with",
    "start": "1820159",
    "end": "1826159"
  },
  {
    "text": "using a different package manager so we have different streams available right now we have stable 129 which is empty",
    "start": "1826159",
    "end": "1833080"
  },
  {
    "text": "stable 128 which contains 1282 and we have the pre-release branches for main",
    "start": "1833080",
    "end": "1838279"
  },
  {
    "text": "uh release 129 and one release 128 release 129 is main right now because we",
    "start": "1838279",
    "end": "1844519"
  },
  {
    "text": "don't actually have released 1.29 this is how how we do it so we just",
    "start": "1844519",
    "end": "1851600"
  },
  {
    "text": "defined a package stream uh as pre-release Main in our",
    "start": "1851600",
    "end": "1857000"
  },
  {
    "text": "demo um and this package stream uh should contain the latest version for",
    "start": "1857000",
    "end": "1862240"
  },
  {
    "text": "kubernetes which is available at least for that day we have to define the kubernetes repository for",
    "start": "1862240",
    "end": "1869320"
  },
  {
    "text": "the RPM because this lives in a different directory structure it lives",
    "start": "1869320",
    "end": "1875399"
  },
  {
    "text": "in Co stable and the repository for cryo lives in add-ons cryo so that's the",
    "start": "1875399",
    "end": "1882600"
  },
  {
    "text": "layout how it looks like for extensions to kubernetes and that's everything we have to do and then we can simply",
    "start": "1882600",
    "end": "1888639"
  },
  {
    "text": "install cryo together with Cube ADM Cube CDL and the cubet and we can see that we",
    "start": "1888639",
    "end": "1895039"
  },
  {
    "text": "now unloaded cni the CET latest version 1282 which was available during the during",
    "start": "1895039",
    "end": "1901399"
  },
  {
    "text": "the demo and then we have the 29 def version of cryo then we just have to start",
    "start": "1901399",
    "end": "1907519"
  },
  {
    "text": "it and prepared in order yeah we have to disa swap if we don't don't want to run",
    "start": "1907519",
    "end": "1913240"
  },
  {
    "text": "kubernetes with swap support and we also have to uh load the net filter Bridge",
    "start": "1913240",
    "end": "1920840"
  },
  {
    "text": "plugin Kel plugin and we have to forward the ipv4 traffic and that's everything we",
    "start": "1920840",
    "end": "1927000"
  },
  {
    "text": "have to do and then we can run qadm in it and qadm will use c i tools which we",
    "start": "1927000",
    "end": "1934840"
  },
  {
    "text": "already installed uh with the previous commands to pre-pull The Container images and then it will actually",
    "start": "1934840",
    "end": "1941760"
  },
  {
    "text": "bootstrap the note by using cryo because it finds the socket running in the background",
    "start": "1941760",
    "end": "1948320"
  },
  {
    "text": "which is pretty cool and if everything is up and running then we can just check",
    "start": "1948320",
    "end": "1955320"
  },
  {
    "text": "our cluster and verify that the cluster is up and running so in this case I would just taint the node to be not a",
    "start": "1955320",
    "end": "1961399"
  },
  {
    "text": "control plane check for the deployment that quns is available list all ports if",
    "start": "1961399",
    "end": "1967120"
  },
  {
    "text": "they are available up and running and then we just try out by using a test workload which just prints out test for",
    "start": "1967120",
    "end": "1973760"
  },
  {
    "text": "us this is always a good good test to to check if uh if the cluster actually",
    "start": "1973760",
    "end": "1979039"
  },
  {
    "text": "works as intended and in our case it works all right let's go back to the",
    "start": "1979039",
    "end": "1986000"
  },
  {
    "text": "presentation and there's another demo in the presentation for the deian packages but we can skip it for now because of",
    "start": "1986000",
    "end": "1994240"
  },
  {
    "text": "timings um",
    "start": "1994240",
    "end": "1999919"
  },
  {
    "text": "exactly thanks yeah the demo sources are available on GitHub uh if you want to",
    "start": "1999919",
    "end": "2006559"
  },
  {
    "text": "check it out presentation is already uploaded to the event platform so we can just test this and what we plan for the",
    "start": "2006559",
    "end": "2013320"
  },
  {
    "text": "future is we created a road map Upstream so that everyone is invited to contribute to it we have basic ideas for",
    "start": "2013320",
    "end": "2020399"
  },
  {
    "text": "a r based ni framework or we also have support or working on support for Wason",
    "start": "2020399",
    "end": "2025519"
  },
  {
    "text": "plugins which are directly loaded into cryo and we have to increase our release",
    "start": "2025519",
    "end": "2030600"
  },
  {
    "text": "automation but we are continuously working on that and also documentation enhancements is something which we now",
    "start": "2030600",
    "end": "2036360"
  },
  {
    "text": "uh have at to our road map so that everyone can contribute and making cryo more portable for non Linux is also",
    "start": "2036360",
    "end": "2042399"
  },
  {
    "text": "something which is currently work in progress so you can always reach out to us by using the GitHub or the slack",
    "start": "2042399",
    "end": "2048599"
  },
  {
    "text": "channels so it's the official kubernetes slack um the cryo Channel or you just",
    "start": "2048599",
    "end": "2054480"
  },
  {
    "text": "open up an issue or discussion item on the GitHub project and with that I would",
    "start": "2054480",
    "end": "2059960"
  },
  {
    "text": "like to thank you all for listening and and try the rest of cubec con thank you",
    "start": "2059960",
    "end": "2066919"
  }
]