[
  {
    "start": "0",
    "end": "43000"
  },
  {
    "text": "thank you for joining me this afternoon we're here today to talk about multi cluster without Federation this is a",
    "start": "60",
    "end": "7470"
  },
  {
    "text": "little bit of a twist on the what people commonly think of multi cluster with",
    "start": "7470",
    "end": "12599"
  },
  {
    "text": "kubernetes and I want to talk through this from a generic sense but I also",
    "start": "12599",
    "end": "18690"
  },
  {
    "text": "want to recognize that I while I work now I had red hat I used to work at core",
    "start": "18690",
    "end": "24000"
  },
  {
    "text": "OS and so what I want to talk through is the thought process that we had when incorporating some multi cluster",
    "start": "24000",
    "end": "30359"
  },
  {
    "text": "features into tecktonik which was our enterprise kubernetes distribution and kind of explore the space will talk",
    "start": "30359",
    "end": "37140"
  },
  {
    "text": "about Federation where it stands today some of our solutions and then kind of the future of what it looks like the",
    "start": "37140",
    "end": "44610"
  },
  {
    "start": "43000",
    "end": "96000"
  },
  {
    "text": "first thing that we learned when we were thinking about putting at Federation or multi cluster like features end at tecktonik was that everybody is running",
    "start": "44610",
    "end": "53370"
  },
  {
    "text": "multiple clusters and there's a variety of reasons for this you've got your dev test prod type setup",
    "start": "53370",
    "end": "60420"
  },
  {
    "text": "that completely makes sense you've got folks that are running in every region of Amazon for example this is very",
    "start": "60420",
    "end": "67770"
  },
  {
    "text": "common if you have you know a points of presence type model for your software and you want to be in every region",
    "start": "67770",
    "end": "73140"
  },
  {
    "text": "pick your favorite cloud and then you don't want to pick your favorite cloud you want to be on all the clouds or you",
    "start": "73140",
    "end": "78540"
  },
  {
    "text": "want to be on prim data centers bursting to the cloud ton of use cases here and",
    "start": "78540",
    "end": "83549"
  },
  {
    "text": "then of course what that ends up looking like is this this is impossible to manage you have to track all these",
    "start": "83549",
    "end": "89640"
  },
  {
    "text": "clusters you have to keep them up-to-date you have to get access controls straight across all of them it's very very confusing so let's",
    "start": "89640",
    "end": "96390"
  },
  {
    "start": "96000",
    "end": "286000"
  },
  {
    "text": "explore that and does anybody have a guess what the average number of clusters that one of our enterprise",
    "start": "96390",
    "end": "101759"
  },
  {
    "text": "customers has all right what you're running today is it 5 is it 10 is it 15 some people you know",
    "start": "101759",
    "end": "109290"
  },
  {
    "text": "as we saw in the keynote earlier run a ludicrous amount of them we saw a less than ludicrous 5 to 10 was the average",
    "start": "109290",
    "end": "115409"
  },
  {
    "text": "that folks were running and so what this means is the hybrid story is real this",
    "start": "115409",
    "end": "120479"
  },
  {
    "text": "is needed and this is why everybody is interested in Federation while you're all here today and so let's jump into",
    "start": "120479",
    "end": "125729"
  },
  {
    "text": "what Federation looks like today just a level set before we look at the future and Federation is really you've got",
    "start": "125729",
    "end": "133410"
  },
  {
    "text": "these two cluster's it's a set of nodes and you've got some API servers and you want to connect some workloads between them so",
    "start": "133410",
    "end": "139830"
  },
  {
    "text": "what do you do oh let's just take the same API server and just call it the Federation API server and throw it on",
    "start": "139830",
    "end": "146190"
  },
  {
    "text": "top so instead of scheduling out your API server two nodes we've got a new federated API that just",
    "start": "146190",
    "end": "151440"
  },
  {
    "text": "schedules out to other API servers makes sense oh my gosh this is going to be a win we got it we did it we've already",
    "start": "151440",
    "end": "157709"
  },
  {
    "text": "got all these primitives built into the kubernetes api and let's use them the problem is that there's a bunch of",
    "start": "157709",
    "end": "165239"
  },
  {
    "text": "problems with Federation first of all for security as we're researching this you know our customers are running these",
    "start": "165239",
    "end": "172380"
  },
  {
    "text": "enterprise-grade workloads and you you care about this and so the way that the API server works is it has root on a",
    "start": "172380",
    "end": "177930"
  },
  {
    "text": "cluster so when you move that up a level on to talk into multiple clusters now if",
    "start": "177930",
    "end": "183450"
  },
  {
    "text": "you own the Federation API you've got root on all the clusters this is perfect you're not just bit coining on one",
    "start": "183450",
    "end": "189690"
  },
  {
    "text": "cluster you actually can do it across all 30 clusters for example clearly this is a problem and then the way that the",
    "start": "189690",
    "end": "196470"
  },
  {
    "text": "Federation API server is implemented it's just the control plane basically",
    "start": "196470",
    "end": "201570"
  },
  {
    "text": "and so this creates a single point of failure in the most common scenarios and things like SED aren't designed to run",
    "start": "201570",
    "end": "208110"
  },
  {
    "text": "across a LAN for example and so now you're gonna basically pick this entire tech stack the control plan that you're",
    "start": "208110",
    "end": "214739"
  },
  {
    "text": "used to and it's got to run somewhere and as you know you're all running kubernetes this is not trivial you've",
    "start": "214739",
    "end": "221190"
  },
  {
    "text": "got a clustered staple database you've got your H a API server and your hie",
    "start": "221190",
    "end": "226230"
  },
  {
    "text": "controller managers and then you've got all the glue the TLS and the secrets that join it all together and so this is",
    "start": "226230",
    "end": "232709"
  },
  {
    "text": "a lot to manage hence why people want a solution to this problem and this is",
    "start": "232709",
    "end": "238530"
  },
  {
    "text": "what it basically looks like you have your two clusters and pick six of them doesn't matter it turns out that you",
    "start": "238530",
    "end": "244680"
  },
  {
    "text": "know because you can't run a TD across the land very easily you end up running that entire control plane on one of your",
    "start": "244680",
    "end": "250290"
  },
  {
    "text": "clusters you just pick one somewhere so you now you've got a single point of failure now that's not like extremely",
    "start": "250290",
    "end": "255810"
  },
  {
    "text": "critical unless all of your components when you're doing your software delivery are now running through this one cluster",
    "start": "255810",
    "end": "262820"
  },
  {
    "text": "clearly that's not great and you know this could be okay if you had a better failover story but",
    "start": "262820",
    "end": "269040"
  },
  {
    "text": "now you've got to instantiate a new control plane on one of these other clusters reconnect all your clients to",
    "start": "269040",
    "end": "275250"
  },
  {
    "text": "it hook it up to your Jenkins pipelines all this stuff starts become very very complicated and so we didn't really",
    "start": "275250",
    "end": "281010"
  },
  {
    "text": "think that Federation in its current form was the way to go and what we decided to do was really",
    "start": "281010",
    "end": "288720"
  },
  {
    "text": "take a step back and break up the problem into its constituent pieces and see if we can tackle some of those or",
    "start": "288720",
    "end": "294840"
  },
  {
    "text": "maybe even reduce some of the scope from just doing magical Federation you just shoot the same deployment at a do new",
    "start": "294840",
    "end": "301830"
  },
  {
    "text": "API and it's just going to magically feder 8 - all the clusters I don't think that actually works in practice",
    "start": "301830",
    "end": "308000"
  },
  {
    "text": "so we've in tecktonik focused primarily on these two use cases you've got an app",
    "start": "308000",
    "end": "314550"
  },
  {
    "text": "owner this is somebody that you know runs software in their namespace and they've got you know a team of people",
    "start": "314550",
    "end": "319920"
  },
  {
    "text": "that also work with them and then you've got your infrastructure admins these are the folks that have to run all these clusters these 10 to 15 clusters we were",
    "start": "319920",
    "end": "326250"
  },
  {
    "text": "talking about so let's dig into what an app owner cares about so you've got CI",
    "start": "326250",
    "end": "331860"
  },
  {
    "text": "CD you want to build containers and then ship them out because your business makes money when these containers are running and so you've got to do things",
    "start": "331860",
    "end": "338610"
  },
  {
    "text": "like hook it up and get the secrets all configured then you've got to do some cluster discovery if you've got five",
    "start": "338610",
    "end": "343800"
  },
  {
    "text": "clusters where are they running you know because the an infrastructure admin might be changing those locations on you and then should something happen you've",
    "start": "343800",
    "end": "351870"
  },
  {
    "text": "got a failover between those clusters and you know this has a bunch of application specific problems and kind",
    "start": "351870",
    "end": "358080"
  },
  {
    "text": "of sequences that you need to do so that's a problem that you have to own and then there's a credential management",
    "start": "358080",
    "end": "363630"
  },
  {
    "text": "in general of just rotating secret's regenerating TLS all that good stuff making sure all this stuff does expire",
    "start": "363630",
    "end": "370160"
  },
  {
    "text": "but you've got to be on top of it before it brings everything down on the infrastructure admin side you've got to",
    "start": "370160",
    "end": "377550"
  },
  {
    "text": "track all these clusters now you've got 10 to 15 clusters maybe you're running hundreds of clusters so you care about",
    "start": "377550",
    "end": "385410"
  },
  {
    "text": "the security of those you care about what's going on and so you're responsible for that because the application owners are depending on you",
    "start": "385410",
    "end": "392400"
  },
  {
    "text": "to provide that base functionality for them to deploy all their applications and security kind of goes from the",
    "start": "392400",
    "end": "397680"
  },
  {
    "text": "bottom up so of course and you're an emperor I mean you don't trust any of those application teams so you want to work",
    "start": "397680",
    "end": "404099"
  },
  {
    "text": "within the confines of what kubernetes gives you for our back and all the primitives that help you lock down this",
    "start": "404099",
    "end": "410519"
  },
  {
    "text": "stuff and then resource limits is your last thing as you know we found with our customers they would deploy",
    "start": "410519",
    "end": "417149"
  },
  {
    "text": "their first or second kubernetes cluster in their environment and it's really great and becomes really popular because from team to team it kind of spreads oh",
    "start": "417149",
    "end": "424409"
  },
  {
    "text": "my gosh we've got this new infrastructure environment it's great I don't have to worry about this I don't worried about that I can scale easily",
    "start": "424409",
    "end": "430109"
  },
  {
    "text": "and so you get a request for another name space for another team this team needs more RAM and so you have to care",
    "start": "430109",
    "end": "436979"
  },
  {
    "text": "about that stuff because you can bring down everybody if you know you have resource exhaustion and kubernetes has great primitives built in for this which",
    "start": "436979",
    "end": "443219"
  },
  {
    "text": "is the great news but you've got to keep those synced up across all of your amazon regions for example so the",
    "start": "443219",
    "end": "450899"
  },
  {
    "text": "interesting thing here is that these two groups of people actually have a lot in",
    "start": "450899",
    "end": "455999"
  },
  {
    "text": "common so infrastructure owners need to track their clusters app owners need to track their clusters maybe there's something",
    "start": "455999",
    "end": "461939"
  },
  {
    "text": "we can do there credential management and security is you know should be shared by everybody and so how can we",
    "start": "461939",
    "end": "469349"
  },
  {
    "text": "tackle this problem so that it meets the needs of both of these groups and the answer is we've got a lot we can lean on",
    "start": "469349",
    "end": "476009"
  },
  {
    "start": "473000",
    "end": "625000"
  },
  {
    "text": "in kubernetes to do this you know you're all familiar with all the the things Network policy are back all that stuff",
    "start": "476009",
    "end": "482969"
  },
  {
    "text": "is built in but can we just make it a little bit smarter so it's easier to manage and I want to talk through some",
    "start": "482969",
    "end": "489389"
  },
  {
    "text": "of the pieces that we have to build with today and if we were going to you know not just slap an API server and call it",
    "start": "489389",
    "end": "494699"
  },
  {
    "text": "Federation but if we're actually gonna build a piece of software what are the components that we have to do that the",
    "start": "494699",
    "end": "500219"
  },
  {
    "text": "first one is the cluster of registry now this isn't that crazy it's it's a spec for an object so if you see coop cuddle",
    "start": "500219",
    "end": "507989"
  },
  {
    "text": "get clusters you can list clusters and those have attributes this is modeled as a CR D in our system and then there's a",
    "start": "507989",
    "end": "514800"
  },
  {
    "text": "cluster registry a piece of software that we actually didn't consume we were just carrying about the modeling of this",
    "start": "514800",
    "end": "521969"
  },
  {
    "text": "object how do I say this is a cluster it has these names has these attributes has these labels then it's located at this",
    "start": "521969",
    "end": "527939"
  },
  {
    "text": "address so you can do this today in kubernetes the problem is that it runs",
    "start": "527939",
    "end": "534050"
  },
  {
    "text": "as a single cluster you have to submit all of your cluster definitions to every one of your clusters and remember our",
    "start": "534050",
    "end": "539450"
  },
  {
    "text": "number of clusters is dynamic it's constantly changing so what do we do there we've got to get this probably on",
    "start": "539450",
    "end": "545269"
  },
  {
    "text": "all the clusters if you want software to be able to read and know things about other clusters in the environment we",
    "start": "545269",
    "end": "552290"
  },
  {
    "text": "talked about this before access control we've got all these folks and they need different levels of access you've got",
    "start": "552290",
    "end": "557990"
  },
  {
    "text": "your app owner who should be able to administrate it a namespace and be able to you know how to remove people and",
    "start": "557990",
    "end": "565279"
  },
  {
    "text": "role bindings and that type of stuff you've got an engineer who's you know probably has lower permissions they're",
    "start": "565279",
    "end": "570470"
  },
  {
    "text": "just shipping software that's what they care about on the infrastructure owner side you've got your sres that need to",
    "start": "570470",
    "end": "576200"
  },
  {
    "text": "have pretty wide access to stuff to be able to debug issues and then you've got in at least a proper setup you've got",
    "start": "576200",
    "end": "581899"
  },
  {
    "text": "all these robots that are doing stuff on your behalf these are your Jenkins workers you've got all kinds of",
    "start": "581899",
    "end": "587060"
  },
  {
    "text": "scripting environments doesn't matter what it is and you want them to have as little access as possible to just deploy",
    "start": "587060",
    "end": "593269"
  },
  {
    "text": "this single application that they're working on and nothing else and then you want to hook all those folks up to",
    "start": "593269",
    "end": "600459"
  },
  {
    "text": "staging and production or different environments your different clusters whatever it is and what does this",
    "start": "600459",
    "end": "607399"
  },
  {
    "text": "there's is there a magic piece of software that does this I don't think it exists yet you know Federation can build",
    "start": "607399",
    "end": "613910"
  },
  {
    "text": "on some of these things but you don't have the the smarts that you need yet and so you need to process this with",
    "start": "613910",
    "end": "621110"
  },
  {
    "text": "something and we need to figure out what that piece of software is another really",
    "start": "621110",
    "end": "626959"
  },
  {
    "start": "625000",
    "end": "817000"
  },
  {
    "text": "nice thing about Federation which I think why it really took off and why you're all here today is because it",
    "start": "626959",
    "end": "632209"
  },
  {
    "text": "allows you to build your own workflows on the api's that it provides so you know you you don't want to just run off",
    "start": "632209",
    "end": "638420"
  },
  {
    "text": "one cluster you want to run off several and you want to have all these folks access to all those clusters so having",
    "start": "638420",
    "end": "645800"
  },
  {
    "text": "that customization is key but the problem with Federation today is it's kind of slapped together to be honest",
    "start": "645800",
    "end": "651709"
  },
  {
    "text": "with some annotations so these are way that you can extend kubernetes and that's all good and great but here you",
    "start": "651709",
    "end": "657890"
  },
  {
    "text": "can see that you can set some stuff to rebalance either true or false awesome",
    "start": "657890",
    "end": "663320"
  },
  {
    "text": "and then you can say min/max on this cluster in that cluster and so you've got dynamic resource scaling type stuff",
    "start": "663320",
    "end": "670070"
  },
  {
    "text": "going on there and you're controlling your cost and that's really it you know",
    "start": "670070",
    "end": "675170"
  },
  {
    "text": "you don't have a lot of really rich primitives for what to do if you want to have business logic in here about how",
    "start": "675170",
    "end": "680780"
  },
  {
    "text": "you roll out to different environments that doesn't exist so you you need to build that workflow on top anyways so",
    "start": "680780",
    "end": "688820"
  },
  {
    "text": "let's take a few examples and talk through how you would do this so you've got your robots that are building your",
    "start": "688820",
    "end": "694430"
  },
  {
    "text": "containers and shipping them off but maybe you want to have a human in the loop this is like kind of a chat ops",
    "start": "694430",
    "end": "699890"
  },
  {
    "text": "approach or whatever you want to take that says yes this package of features is ready for staging Rev that a few",
    "start": "699890",
    "end": "707420"
  },
  {
    "text": "times and say all right all nine of those things now can make it in let's build that that's now production and a",
    "start": "707420",
    "end": "713810"
  },
  {
    "text": "human says oh yes I'm watching this I'm going to make sure that it rolls out correctly and so that's one workflow",
    "start": "713810",
    "end": "719240"
  },
  {
    "text": "that you could take now if you want to do the exact opposite maybe you've got somebody that's building a container",
    "start": "719240",
    "end": "725630"
  },
  {
    "text": "locally for whatever reason or you know there's a human in the loop on the build side of things and then you want to have",
    "start": "725630",
    "end": "731000"
  },
  {
    "text": "some software that actually you have business rules that say I want to roll this out in this very specific way and",
    "start": "731000",
    "end": "736220"
  },
  {
    "text": "so you want to encode that somewhere where do you do that to say roll out to",
    "start": "736220",
    "end": "741650"
  },
  {
    "text": "an off peak environment first and then go to a non peak environment if it's successful and you can encode all those",
    "start": "741650",
    "end": "747920"
  },
  {
    "text": "rules in a software but that software needs to exist and this is how we",
    "start": "747920",
    "end": "754940"
  },
  {
    "text": "started thinking through the problem is you've actually got two different sets of users here that really need to do two",
    "start": "754940",
    "end": "761600"
  },
  {
    "text": "different sets of things and you might need two different sets of software to do that you've got your application",
    "start": "761600",
    "end": "767240"
  },
  {
    "text": "owners who are shipping out their new versions and changing secrets and changing their configuration values",
    "start": "767240",
    "end": "772310"
  },
  {
    "text": "specific to their namespace and then you've got your operations folks that have this baseline set of needs where",
    "start": "772310",
    "end": "777770"
  },
  {
    "text": "they're managing our back across all of your clusters they're changing quota as people's needs change they're creating",
    "start": "777770",
    "end": "784580"
  },
  {
    "text": "new namespaces as their onboarding new teams or new teams are starting to run new applications and you need to keep",
    "start": "784580",
    "end": "790310"
  },
  {
    "text": "all that stuff in sync but the use cases there are pretty widely different and probably needs specialized pieces of",
    "start": "790310",
    "end": "796790"
  },
  {
    "text": "software to do it and this bottom piece is what we ended up taking off as the scope for tectonic and",
    "start": "796790",
    "end": "805110"
  },
  {
    "text": "it's Multi cluster features and I don't want to get too much into the specifics of how it was implemented only to talk",
    "start": "805110",
    "end": "810810"
  },
  {
    "text": "through some of the security concerns and some of the problems that we were solving that you could probably solve as well and this was really broken down",
    "start": "810810",
    "end": "819690"
  },
  {
    "text": "into two different pieces as I mentioned before we're building on the cluster registry that's the object that says",
    "start": "819690",
    "end": "825900"
  },
  {
    "text": "this is an IP I server and this is its location this is its name it has these attributes and we were really using that",
    "start": "825900",
    "end": "831900"
  },
  {
    "text": "as a doing label queries across those four policies and the policy is really",
    "start": "831900",
    "end": "838110"
  },
  {
    "text": "the the bulk of this feature and what that looks like is there's an example up here on the screen and it's to do our",
    "start": "838110",
    "end": "846030"
  },
  {
    "text": "back really an access control only across a number of clusters and to implement that there's a small agent",
    "start": "846030",
    "end": "852180"
  },
  {
    "text": "running on every cluster that's talking back to the central source that holds",
    "start": "852180",
    "end": "857280"
  },
  {
    "text": "these policies and you map a policy and a set of clusters together and say over",
    "start": "857280",
    "end": "862590"
  },
  {
    "text": "here we're saying on every Amazon environment I want to have these cluster roles and these bindings on these",
    "start": "862590",
    "end": "868380"
  },
  {
    "text": "namespaces for these groups so if you've got LDAP running between all these clusters for example you add somebody to",
    "start": "868380",
    "end": "874950"
  },
  {
    "text": "a group there they have access to all these things use an admin have one place where you can edit this you can audit it",
    "start": "874950",
    "end": "880860"
  },
  {
    "text": "security folks love this because you know they're all in one place then you can put our back on these policies once",
    "start": "880860",
    "end": "887520"
  },
  {
    "text": "again already built into kubernetes so you get these really rich workflows that you can build around access control and",
    "start": "887520",
    "end": "894540"
  },
  {
    "text": "the the part of this that was really specific is we didn't want to touch workload api's at all deployments",
    "start": "894540",
    "end": "902040"
  },
  {
    "text": "replicas sets all that stuff that's on that top side of the cluster that's on the the app owners and their engineers",
    "start": "902040",
    "end": "908430"
  },
  {
    "text": "to figure out what that workflow looks like and this is just really to be very realistic about how we could ship this",
    "start": "908430",
    "end": "914070"
  },
  {
    "text": "in the product and the sync policy is great because all we're doing is taking these cluster objects and syncing them",
    "start": "914070",
    "end": "921540"
  },
  {
    "text": "across all the clusters and then we're taking the policies and syncing those across the clusters too and so you phone",
    "start": "921540",
    "end": "928200"
  },
  {
    "text": "in with a cluster and say hey this is my name send me all the things I need to do it's a running on a desired State",
    "start": "928200",
    "end": "935430"
  },
  {
    "text": "Loup just like the rest of kubernetes so it really makes sense to admins and we think that is a really sane way to",
    "start": "935430",
    "end": "941490"
  },
  {
    "start": "939000",
    "end": "1055000"
  },
  {
    "text": "operate so let's walk through some scenarios of what this looks like in day-to-day practice we've got our three",
    "start": "941490",
    "end": "947040"
  },
  {
    "text": "environments here so we've got our cluster registry that's tracking all three of the clusters and then we've got",
    "start": "947040",
    "end": "952080"
  },
  {
    "text": "our common set of our back on the bottom and we're in Europe so we want to have our staging environment really close",
    "start": "952080",
    "end": "958200"
  },
  {
    "text": "because we interact with it a lot but maybe we have you know an international audience for our applications so we've",
    "start": "958200",
    "end": "963270"
  },
  {
    "text": "got production namespaces running across all the clusters if you were deploying",
    "start": "963270",
    "end": "968610"
  },
  {
    "text": "to this environment or in this set of clusters and you want to say okay this thing is ready to go to production this",
    "start": "968610",
    "end": "974370"
  },
  {
    "text": "is what that would look like you would have this piece of software that you are submitting manifest to and it's gonna",
    "start": "974370",
    "end": "980610"
  },
  {
    "text": "then talk to the cluster register you can imagine doing this in like a Jenkins pipeline and say deploy this to every",
    "start": "980610",
    "end": "986580"
  },
  {
    "text": "production environment whether that's three or five or ten right now and it goes and does that and then on the ops",
    "start": "986580",
    "end": "993810"
  },
  {
    "text": "side if you've got to change the resource quota of this staging environment say you're adding a new",
    "start": "993810",
    "end": "999779"
  },
  {
    "text": "feature we need more RAM for this okay let's change that submit it to the cluster and then this software will make",
    "start": "999779",
    "end": "1007310"
  },
  {
    "text": "it happen what does it look like to add a new cluster for example so as an admin",
    "start": "1007310",
    "end": "1013520"
  },
  {
    "text": "you go boot up your cloud formation run your installer whatever it is and boom you get your new namespace because your",
    "start": "1013520",
    "end": "1020240"
  },
  {
    "text": "policy is now on a label selector not on a specific set of clusters that production namespace can be instantiated",
    "start": "1020240",
    "end": "1027860"
  },
  {
    "text": "immediately once that cluster is up next time your Jenkins job runs because it's using this registry and not a static set",
    "start": "1027860",
    "end": "1034250"
  },
  {
    "text": "of locations you can deploy to it and you know imagine you have some software to wire up DNS and all that type stuff",
    "start": "1034250",
    "end": "1041438"
  },
  {
    "text": "now what if we wanted to remove our selector for our staging environment because we want to run it now across all",
    "start": "1041439",
    "end": "1047420"
  },
  {
    "text": "of our environments for whatever reason so you submit that change to the policy and it gets synced out immediately now",
    "start": "1047420",
    "end": "1056210"
  },
  {
    "text": "under the hood what this look like we need to really solve that security problem of Federation where if you own",
    "start": "1056210",
    "end": "1062210"
  },
  {
    "text": "it then you have root on all the clusters and so what we decided on doing is having a read-only poll model",
    "start": "1062210",
    "end": "1069050"
  },
  {
    "text": "we're one of these clusters as deemed the source for the policies at any given",
    "start": "1069050",
    "end": "1074180"
  },
  {
    "text": "moment this is you know typically stays the same cluster but all these clusters look the exact same they're all running",
    "start": "1074180",
    "end": "1079370"
  },
  {
    "text": "this agent and it reads from the registry and says you know like this cluster will check in with its service",
    "start": "1079370",
    "end": "1085100"
  },
  {
    "text": "account and say I am this US east cluster tell me the things that I need to abide by here the policies that",
    "start": "1085100",
    "end": "1090920"
  },
  {
    "text": "matter to you and you would have this loop running and it's like oh I need to have this namespace I need to delete this namespace whatever it is and the",
    "start": "1090920",
    "end": "1098660"
  },
  {
    "text": "nice thing about this is this European cluster is acting as kind of our reference cluster and that's got all the",
    "start": "1098660",
    "end": "1105530"
  },
  {
    "text": "policies on it but it only really needs to have service accounts for each cluster and these",
    "start": "1105530",
    "end": "1111800"
  },
  {
    "text": "service accounts can only read to different objects they're not reading any secrets workloads config Maps",
    "start": "1111800",
    "end": "1117050"
  },
  {
    "text": "any of that stuff they can only read clusters and cluster policies so already right there you've reduced your blast",
    "start": "1117050",
    "end": "1122990"
  },
  {
    "text": "radius so a these credentials can be revoked on a cluster by cluster basis and then they",
    "start": "1122990",
    "end": "1128330"
  },
  {
    "text": "can't even read from any of the good stuff which is all the applications you're actually running they can't you know modify any of your auerbach stuff",
    "start": "1128330",
    "end": "1136220"
  },
  {
    "text": "it's all you know they can't create new service accounts and that type of thing and so the really nice thing about this",
    "start": "1136220",
    "end": "1142220"
  },
  {
    "text": "is in a failover scenario all these clusters look the exact same and so you have this agent you just flip it config",
    "start": "1142220",
    "end": "1149330"
  },
  {
    "text": "that says I am now the source of this because we were already doing all this syncing it's already got the current state of the world and then that",
    "start": "1149330",
    "end": "1155840"
  },
  {
    "text": "european cluster could go down you SE starts reading from the registry so that your failover story is not boot up a new",
    "start": "1155840",
    "end": "1163790"
  },
  {
    "text": "three node at CD cluster and configure all these things they're already kind of running a sort of an active active type",
    "start": "1163790",
    "end": "1170270"
  },
  {
    "text": "model so the question is where do we go",
    "start": "1170270",
    "end": "1175940"
  },
  {
    "start": "1172000",
    "end": "1213000"
  },
  {
    "text": "from here these components you know some of this software needs to be written we started exploring some of this in",
    "start": "1175940",
    "end": "1183430"
  },
  {
    "text": "tectonic and so if you're going to do this today what do you need to do and how do you start taking advantage of the",
    "start": "1183430",
    "end": "1189080"
  },
  {
    "text": "cluster of registry and all these other primitives that we have to build on and so let's walk through them from least",
    "start": "1189080",
    "end": "1195380"
  },
  {
    "text": "complex to most complex but with the understanding that you were going to need some specialized software",
    "start": "1195380",
    "end": "1200420"
  },
  {
    "text": "to do this to encode that business logic it's not just as simple as putting the Federation",
    "start": "1200420",
    "end": "1205930"
  },
  {
    "text": "API on top of our clusters and calling it done I think we've kind of all explored this and it just doesn't really",
    "start": "1205930",
    "end": "1211900"
  },
  {
    "text": "work so let's start with some very not complex examples the simple bash script",
    "start": "1211900",
    "end": "1219460"
  },
  {
    "text": "everybody loves this this you know is a simple loop through your cluster say you're you know you can read you can say",
    "start": "1219460",
    "end": "1224860"
  },
  {
    "text": "coop cuddle get clusters and then for each of those things throw it in a loop but you know this isn't sanchita by",
    "start": "1224860",
    "end": "1230320"
  },
  {
    "text": "human and you know maybe that's okay for your organization if you don't deploy very often or just prototyping something",
    "start": "1230320",
    "end": "1236470"
  },
  {
    "text": "you know run the bash script on your local machine if you've got credentials to all these clusters it's great but",
    "start": "1236470",
    "end": "1243790"
  },
  {
    "text": "what happens when something goes wrong what happens if you run out of quota for example and you can't make all your pods",
    "start": "1243790",
    "end": "1249190"
  },
  {
    "text": "well there's no error handling here and yeah you can make your your script more complex and add all these if statements",
    "start": "1249190",
    "end": "1255160"
  },
  {
    "text": "and you know really get crazy with it and you know maybe that's fine too but it's not like that declarative state",
    "start": "1255160",
    "end": "1260530"
  },
  {
    "text": "that you're used to in kubernetes so now you're kind of tweaking the way that you think about this when you know why can't",
    "start": "1260530",
    "end": "1266560"
  },
  {
    "text": "we think of all of these things the same and then maybe you want to get a little bit more automated with it so you've got",
    "start": "1266560",
    "end": "1273130"
  },
  {
    "text": "your Jenkins job and so for every PR to some repo that holds all of your",
    "start": "1273130",
    "end": "1278410"
  },
  {
    "text": "manifests for example you do the same thing you loop through all the clusters but now the humans out of the loop",
    "start": "1278410",
    "end": "1283870"
  },
  {
    "text": "you're you're automating some of this and that's great but you have some of the same problems if something goes wrong Jenkins can't",
    "start": "1283870",
    "end": "1290260"
  },
  {
    "text": "magically fix that it just bails out and so your software doesn't get deployed and a human has to go back in and see",
    "start": "1290260",
    "end": "1296470"
  },
  {
    "text": "what happened and then if you know you might not have access to look at the resource quotas or change the resource",
    "start": "1296470",
    "end": "1302680"
  },
  {
    "text": "quotas and so you've got to go back and forth with your teams and meanwhile your pipeline is stuck here so you know maybe",
    "start": "1302680",
    "end": "1309520"
  },
  {
    "text": "that's not great another thing is if you have to model some business logic inside that says you know talking about our",
    "start": "1309520",
    "end": "1315730"
  },
  {
    "text": "off-peak hours now your job is running for a really long time even if your deployment takes really long time then",
    "start": "1315730",
    "end": "1321670"
  },
  {
    "text": "your Jenkins worker dies and your mid deployment you don't know what to do you don't have that declarative state so nothing knows what to do it's just in",
    "start": "1321670",
    "end": "1328210"
  },
  {
    "text": "the state that it's in so that's just really not that great and we know kubernetes is smart but these solutions",
    "start": "1328210",
    "end": "1334240"
  },
  {
    "text": "aren't you're dumbing down your deployment pipeline but the cluster is really smart",
    "start": "1334240",
    "end": "1340200"
  },
  {
    "start": "1339000",
    "end": "1398000"
  },
  {
    "text": "so let's get to a more complex example this is not necessarily to do with like",
    "start": "1340200",
    "end": "1345670"
  },
  {
    "text": "deploying workloads this is a very specific example for ingress so Google has this really great demo of multi",
    "start": "1345670",
    "end": "1352000"
  },
  {
    "text": "cluster ingress I believe there's a talk actually this afternoon on it if you're interested and the point that I want to",
    "start": "1352000",
    "end": "1357040"
  },
  {
    "text": "make with this is that it's using some specialized software on the right here you can see that oh we've got a new CLI",
    "start": "1357040",
    "end": "1362590"
  },
  {
    "text": "tool this isn't coop coddle anymore but it looks very much like it and it's actually using kubernetes tooling so you",
    "start": "1362590",
    "end": "1369340"
  },
  {
    "text": "can see there's a reference to a coop config there so it's starting to get into the kubernetes ecosystem feel a little bit more native but then it's",
    "start": "1369340",
    "end": "1375910"
  },
  {
    "text": "also using some GCP features you know it's really it's a tech demo I don't know what their plans for this are and",
    "start": "1375910",
    "end": "1382420"
  },
  {
    "text": "the other thing is that now you're connecting this coop native tool to some smarts that are outside of the cluster",
    "start": "1382420",
    "end": "1388780"
  },
  {
    "text": "which is great if you're a GCP user but if you're not you know this is not portable across environments and that's",
    "start": "1388780",
    "end": "1395290"
  },
  {
    "text": "the whole point of this you know we want that hybrid story and just for fun I actually was looking through the",
    "start": "1395290",
    "end": "1401350"
  },
  {
    "text": "documentation for this and look we see one of these bash scripts this is the most simple version of that is for every",
    "start": "1401350",
    "end": "1407920"
  },
  {
    "text": "context in here go do something so once again you know there's no validation",
    "start": "1407920",
    "end": "1413050"
  },
  {
    "text": "here there's no error checking if this bombs out it bombs out but just nice little illustration of how you can use",
    "start": "1413050",
    "end": "1419170"
  },
  {
    "text": "this in practice though this is this is how they deploy this and it works totally fine in most cases now this next",
    "start": "1419170",
    "end": "1427690"
  },
  {
    "start": "1425000",
    "end": "1661000"
  },
  {
    "text": "topic is really near and dear to my heart this is a this operator pattern something you heard Brandon talk about",
    "start": "1427690",
    "end": "1433630"
  },
  {
    "text": "at the keynote we've been exploring this through core OS since 2016 and what this",
    "start": "1433630",
    "end": "1439270"
  },
  {
    "text": "is is bringing all those smarts that we're just talking about where it's outside of the cluster and the multi cluster ingress and bringing it into the",
    "start": "1439270",
    "end": "1445870"
  },
  {
    "text": "cluster so an operator is really a specialized control loop that's running just like the controller manager in",
    "start": "1445870",
    "end": "1452680"
  },
  {
    "text": "kubernetes running all of the default primitives and it's listening on some si",
    "start": "1452680",
    "end": "1457990"
  },
  {
    "text": "RDS to do some sort of logic and this can be anything that you want that's the beauty of it as you can bring all that",
    "start": "1457990",
    "end": "1464380"
  },
  {
    "text": "business logic and give it a place to live and because it's using CR DS it's a and kubernetes extension point so you're",
    "start": "1464380",
    "end": "1471429"
  },
  {
    "text": "using cube native tooling and then you've got that desired state this starts to feel very nice it's very",
    "start": "1471429",
    "end": "1476890"
  },
  {
    "text": "similar to how you would write your deployments and here's an example on the right hand side I've just something I",
    "start": "1476890",
    "end": "1482500"
  },
  {
    "text": "made up but this is a compliance database this is a database but it knows about some",
    "start": "1482500",
    "end": "1487690"
  },
  {
    "text": "legal issues that we have with data these days so over here I've got my spec I can scale it up and down we want to",
    "start": "1487690",
    "end": "1493539"
  },
  {
    "text": "make sure that some of this stuff is replicated twice let's auto scale it based on how much traffic is going in and out of the",
    "start": "1493539",
    "end": "1499210"
  },
  {
    "text": "cluster back it up sure sounds great and then at the bottom here we've got this",
    "start": "1499210",
    "end": "1505240"
  },
  {
    "text": "spec for geography and let's just suppose in this hypothetical situation that you're storing some data that needs",
    "start": "1505240",
    "end": "1510549"
  },
  {
    "text": "to stay in the EU but maybe you would prefer to be in Germany just because your other services are mostly in",
    "start": "1510549",
    "end": "1516340"
  },
  {
    "text": "Germany but if there's not a German cluster using the cluster registry then we'll deploy it somewhere else so you",
    "start": "1516340",
    "end": "1522789"
  },
  {
    "text": "can see here that the power of this operator is that this spec field is not very long but you can imagine all of the",
    "start": "1522789",
    "end": "1528309"
  },
  {
    "text": "smarts that are powered by this back up hourly equals true that sounds magical but you know there's like this operator",
    "start": "1528309",
    "end": "1535480"
  },
  {
    "text": "could have logic for how to find where the object store is for example that wants to talk to the secrets you could",
    "start": "1535480",
    "end": "1541450"
  },
  {
    "text": "even in here point at a specific secret it could have one hard-coded your location hard-coded that type of thing",
    "start": "1541450",
    "end": "1547330"
  },
  {
    "text": "so you really get to see this business logic that is embedded in the operator",
    "start": "1547330",
    "end": "1552429"
  },
  {
    "text": "and that's really really powerful now the nice thing about this too is because it's cube native you're using your are",
    "start": "1552429",
    "end": "1557950"
  },
  {
    "text": "back primitives so imagine the you know common are back syncing that I just talked about in tecktonik now you're",
    "start": "1557950",
    "end": "1564010"
  },
  {
    "text": "doing this for all of these customized operators that can be doing whatever you want but in this case we typically find",
    "start": "1564010",
    "end": "1570700"
  },
  {
    "text": "people starting out with install and upgrade of their software is a really nice way to model for an operator and",
    "start": "1570700",
    "end": "1576250"
  },
  {
    "text": "this is a really nice way to get a kubernetes native application the caveat this requires a kubernetes native",
    "start": "1576250",
    "end": "1582730"
  },
  {
    "text": "application I think you're all here because you have those so that shouldn't be much of an issue but you've got to have stuff that can be containerized and",
    "start": "1582730",
    "end": "1588909"
  },
  {
    "text": "you know the operator you can imagine it wiring up all kinds of things start these deployments create these secrets",
    "start": "1588909",
    "end": "1594730"
  },
  {
    "text": "read off this config map set up these services wait for this health check to pass before this does this other thing",
    "start": "1594730",
    "end": "1600669"
  },
  {
    "text": "all that complex stuff that you have that usually embedded in either like a run book or maybe it's a bash script that",
    "start": "1600669",
    "end": "1606700"
  },
  {
    "text": "you manually run or it's just in somebody's head you can model all that in software and the cool thing about",
    "start": "1606700",
    "end": "1613180"
  },
  {
    "text": "this is it's not just a single cluster you can now because you have access to this cluster registry you could have an",
    "start": "1613180",
    "end": "1618850"
  },
  {
    "text": "operator that's doing all kinds of stuff I mentioned earlier wiring up DNS I was just talking to somebody about an",
    "start": "1618850",
    "end": "1624400"
  },
  {
    "text": "example of you know this could easily be talking to any sort of DNS provider to start wiring up things once the",
    "start": "1624400",
    "end": "1630730"
  },
  {
    "text": "application is done if you need to failover and rebalance data before you remove it or something like that you",
    "start": "1630730",
    "end": "1636010"
  },
  {
    "text": "could do any anything like that and you have it running in the cluster so it's got all of the cluster state which is",
    "start": "1636010",
    "end": "1641200"
  },
  {
    "text": "really powerful I've going on for that we've got a little bit there's a bunch more examples",
    "start": "1641200",
    "end": "1647200"
  },
  {
    "text": "we just open sourced our operator framework and that's a both a build environment for building operators and",
    "start": "1647200",
    "end": "1653260"
  },
  {
    "text": "then a runtime environment for how to run them so there's more information on that but we think this is a really exciting thing and we're excited to",
    "start": "1653260",
    "end": "1659920"
  },
  {
    "text": "explore that further let's get to the the thing that we're going to all here for it's back to Federation I told you",
    "start": "1659920",
    "end": "1667330"
  },
  {
    "start": "1661000",
    "end": "1814000"
  },
  {
    "text": "we weren't going to talk about Federation but there's a new Federation v2 prototype that's out in the works and",
    "start": "1667330",
    "end": "1673840"
  },
  {
    "text": "the special interest group and I would want to just briefly touch on this because I think all the problems that we",
    "start": "1673840",
    "end": "1679750"
  },
  {
    "text": "found with Federation and tectonic the community has obviously identified these and is working to fix them and so I just",
    "start": "1679750",
    "end": "1686710"
  },
  {
    "text": "want to talk to that for a second and the most important thing is that the special interest group has kind of",
    "start": "1686710",
    "end": "1692920"
  },
  {
    "text": "stated that one of their goals is that we don't want to tackle this entire problem space because it's really really wide as I talked about with you know",
    "start": "1692920",
    "end": "1700120"
  },
  {
    "text": "you've got all these different needs for these different users you've got different environments different clusters you've got to track all this",
    "start": "1700120",
    "end": "1705370"
  },
  {
    "text": "stuff and maybe somebody wants to model there are back policies differently than somebody else and so you don't have to",
    "start": "1705370",
    "end": "1711520"
  },
  {
    "text": "use all the parts of Federation v2 and this is kind of baked into the entire thing and what it looks like is on the",
    "start": "1711520",
    "end": "1717430"
  },
  {
    "text": "right so you have it's modeled after C R D so once again very kubernetes native and you would model your custom object",
    "start": "1717430",
    "end": "1725380"
  },
  {
    "text": "so like our compliant database and then there's three kind of sub resources that",
    "start": "1725380",
    "end": "1730420"
  },
  {
    "text": "this has so you've got a template for what this looks like and this is you know some sort of kubernetes",
    "start": "1730420",
    "end": "1736990"
  },
  {
    "text": "object and then this could be you know something that's operated and then you've got a placement modifier which",
    "start": "1736990",
    "end": "1743470"
  },
  {
    "text": "says when you instantiate this template where does it go and this is a label",
    "start": "1743470",
    "end": "1748690"
  },
  {
    "text": "selectors and all that kind of cube native stuff then you've got an override object that you can submit into very",
    "start": "1748690",
    "end": "1754570"
  },
  {
    "text": "specific clusters if you want to for some reason only scale up one cluster outside of what the scheduler is doing",
    "start": "1754570",
    "end": "1760870"
  },
  {
    "text": "say bump this limit where I want I need five of these running just right now just make it happen but you can actually",
    "start": "1760870",
    "end": "1766540"
  },
  {
    "text": "override any value in the template which is really powerful so if you need to change a the labels that one of the",
    "start": "1766540",
    "end": "1774130"
  },
  {
    "text": "objects has in just a specific cluster this is what you use those overrides to do but it could be anything so this is",
    "start": "1774130",
    "end": "1780550"
  },
  {
    "text": "where you could start doing the locality based stuff where I need to override Germany and put a different country for example this is the model that",
    "start": "1780550",
    "end": "1787090"
  },
  {
    "text": "Federation v2 is going to work on nice thing again it's kubernetes native so",
    "start": "1787090",
    "end": "1792220"
  },
  {
    "text": "you can use all the are back primitives that you already have today and then you have the nice primitives to push it into",
    "start": "1792220",
    "end": "1798490"
  },
  {
    "text": "like a policy engine if you won't need to do auditing if you've got a security group that really wants to keep a close",
    "start": "1798490",
    "end": "1803679"
  },
  {
    "text": "eye on things there's a number of projects out there that are starting to bootstrap into this space too so because",
    "start": "1803679",
    "end": "1809559"
  },
  {
    "text": "we have these really nice objects to work with you can start implementing some of that the UX of this matters and",
    "start": "1809559",
    "end": "1818110"
  },
  {
    "start": "1814000",
    "end": "1896000"
  },
  {
    "text": "I think I've mentioned the word kubernetes native or kubernetes tooling a lot this is really important because",
    "start": "1818110",
    "end": "1824320"
  },
  {
    "text": "this is the way that folks expect to interact with clusters because it's what they do in their day to day job you're",
    "start": "1824320",
    "end": "1830170"
  },
  {
    "text": "you're changing around deployment values and config Maps and generating secrets and you've got that whole workflow it's",
    "start": "1830170",
    "end": "1835360"
  },
  {
    "text": "very understood and that means that you're then portable you do have that hybrid story if you're only working",
    "start": "1835360",
    "end": "1840850"
  },
  {
    "text": "against kubernetes api x' under the hood this is implemented as an aggregated api server so it's using these very standard",
    "start": "1840850",
    "end": "1849250"
  },
  {
    "text": "extension points for kubernetes and so once again you're staying kubernetes native you're gonna work across all the distros that are out there and this is",
    "start": "1849250",
    "end": "1857260"
  },
  {
    "text": "owned by the special interest group for a multi cluster and so they're driving",
    "start": "1857260",
    "end": "1863110"
  },
  {
    "text": "this prototype and if you'd like to get involved and show up to their meetings and review their code add your own code",
    "start": "1863110",
    "end": "1869740"
  },
  {
    "text": "would definitely love to see that and then some things that are also possible as the next steps for this you could",
    "start": "1869740",
    "end": "1876880"
  },
  {
    "text": "start implementing a custom scheduler for this just because it's plugging into kubernetes and it's also secured with",
    "start": "1876880",
    "end": "1883450"
  },
  {
    "text": "service accounts much the same way that our tectonic multi cluster is so once again Kubb native using that are back",
    "start": "1883450",
    "end": "1889000"
  },
  {
    "text": "we're building on these pieces so we don't have to you know have this huge problem space we're condensing it down into something that's a little bit more",
    "start": "1889000",
    "end": "1894820"
  },
  {
    "text": "manageable so the takeaway that I want you to have today is that this problem",
    "start": "1894820",
    "end": "1901960"
  },
  {
    "start": "1896000",
    "end": "2017000"
  },
  {
    "text": "space is going to require custom software and we just walk through a number of ways that you know a bash",
    "start": "1901960",
    "end": "1907299"
  },
  {
    "text": "script is custom software it's pretty attainable you can go home and do this today and so I want you to start",
    "start": "1907299",
    "end": "1914260"
  },
  {
    "text": "thinking about that as you're planning for what you're gonna do post Federation because right now Federation is not a",
    "start": "1914260",
    "end": "1920590"
  },
  {
    "text": "thing the project you know it's going to get retooled but that's going to be a little bit and if you've got five or ten",
    "start": "1920590",
    "end": "1925900"
  },
  {
    "text": "clusters that you want to you know work with today and you start writing some specialized software or at least start thinking about how your business rules",
    "start": "1925900",
    "end": "1932350"
  },
  {
    "text": "get modeled and some sort of logic and choose things that are Kubb native the",
    "start": "1932350",
    "end": "1938470"
  },
  {
    "text": "best user experience is when you're using coop tooling everybody's already used to all those primitives and then",
    "start": "1938470",
    "end": "1946179"
  },
  {
    "text": "you get the power of kubernetes is when you're building off of all these primitives that desired state loop is",
    "start": "1946179",
    "end": "1951669"
  },
  {
    "text": "just killer this is why kubernetes is so popular it just makes sense it works you can write software to do things that",
    "start": "1951669",
    "end": "1956770"
  },
  {
    "text": "software is good at and let humans do things that humans are good at so take use the power of those explore the",
    "start": "1956770",
    "end": "1963309"
  },
  {
    "text": "registry and all that and then go home and make some software you can do all",
    "start": "1963309",
    "end": "1968710"
  },
  {
    "text": "this today start it's not bad to have a bash script first and then you know move to a Jenkins job maybe you want to",
    "start": "1968710",
    "end": "1974830"
  },
  {
    "text": "explore using an operator maybe you want to explore some of the other tooling out there that's more specialized but you",
    "start": "1974830",
    "end": "1980049"
  },
  {
    "text": "can do this today and it's definitely attainable and then lastly get involved",
    "start": "1980049",
    "end": "1985120"
  },
  {
    "text": "with Federation v2 you're all here because you're interested in this problem space and like the kind of",
    "start": "1985120",
    "end": "1991120"
  },
  {
    "text": "charter for this group says is we're not going to solve all these problems so y'all can invent different pieces that",
    "start": "1991120",
    "end": "1998080"
  },
  {
    "text": "can solve this and you know every Morgan ization is different everybody models things differently",
    "start": "1998080",
    "end": "2003389"
  },
  {
    "text": "but we need those view points to make this the best that it can be to add the right extension points so that you can",
    "start": "2003389",
    "end": "2009029"
  },
  {
    "text": "use the primitives but then build on top of it and that's all I have thank you",
    "start": "2009029",
    "end": "2014370"
  },
  {
    "text": "[Applause]",
    "start": "2014370",
    "end": "2019390"
  }
]