[
  {
    "text": "hi folks uh welcome to our presentation about aircap we want to give you in the",
    "start": "480",
    "end": "6720"
  },
  {
    "text": "following minutes a short overview of airgap what is meant and why it isn't so",
    "start": "6720",
    "end": "13440"
  },
  {
    "text": "complicated as many think about",
    "start": "13440",
    "end": "17920"
  },
  {
    "text": "so let's talk about the agenda first a short intro who we are",
    "start": "19920",
    "end": "26000"
  },
  {
    "text": "then we will discuss a standard gates environment after that we come along to the question",
    "start": "26000",
    "end": "33840"
  },
  {
    "text": "what is air gap and we will show you some important topics about",
    "start": "33840",
    "end": "39200"
  },
  {
    "text": "thanks the winston will give us a short demonstration and coming to the end with",
    "start": "39200",
    "end": "45600"
  },
  {
    "text": "a conclusion so let's uh let's move to who we are",
    "start": "45600",
    "end": "53680"
  },
  {
    "text": "we are from cubops a company that has been working with microservices and",
    "start": "53680",
    "end": "59280"
  },
  {
    "text": "kubernetes for several years our portfolio includes training",
    "start": "59280",
    "end": "64559"
  },
  {
    "text": "workshops and project support for the installation and operation of kubernetes",
    "start": "64559",
    "end": "71200"
  },
  {
    "text": "furthermore we are the producer of a kubernetes distribution of productive",
    "start": "71200",
    "end": "76640"
  },
  {
    "text": "environments you can find our software products on our website cubops.net",
    "start": "76640",
    "end": "84840"
  },
  {
    "text": "so we are like you see here on the slide on the left tobias working as a devop",
    "start": "86240",
    "end": "92720"
  },
  {
    "text": "engineer in the middle myself working as a kubernetes trainer",
    "start": "92720",
    "end": "98560"
  },
  {
    "text": "and on the right side vincent working as a developer",
    "start": "98560",
    "end": "104720"
  },
  {
    "text": "okay so let's talk about kubernetes",
    "start": "104960",
    "end": "110000"
  },
  {
    "text": "i want to start with this funny quote of a user he said",
    "start": "110000",
    "end": "115200"
  },
  {
    "text": "i barely understand my own feelings how am i supposed to understand",
    "start": "115200",
    "end": "120640"
  },
  {
    "text": "kubernetes kubernetes is not a flash in the pen",
    "start": "120640",
    "end": "125680"
  },
  {
    "text": "it is here to stay and its prevalence in the next minutes i want to give you a",
    "start": "125680",
    "end": "132160"
  },
  {
    "text": "short overview about some topics on the kubernetes and air captain environment",
    "start": "132160",
    "end": "139280"
  },
  {
    "text": "however organizations in finance healthcare public sector agencies",
    "start": "139280",
    "end": "145599"
  },
  {
    "text": "and other highly regulated industries have added security and compliance requirements",
    "start": "145599",
    "end": "152800"
  },
  {
    "text": "in these cases there is a need to balance the advantage of high",
    "start": "152800",
    "end": "158239"
  },
  {
    "text": "highly availability scalable and redundant kubernetes cloud-based",
    "start": "158239",
    "end": "163440"
  },
  {
    "text": "environments with additional infrastructure restrictions such as no public internet",
    "start": "163440",
    "end": "169840"
  },
  {
    "text": "access or high security standards cloud native does not mean cloud bound",
    "start": "169840",
    "end": "177840"
  },
  {
    "text": "increasingly companies are seeking to take advantage of of these cloud native",
    "start": "177840",
    "end": "184640"
  },
  {
    "text": "features in their own secure data centers while challenging to implement",
    "start": "184640",
    "end": "191200"
  },
  {
    "text": "it's not impossible building an isolated kubernetes environment starts with the",
    "start": "191200",
    "end": "197760"
  },
  {
    "text": "infrastructure and dependency planning so the knowledge you need for an",
    "start": "197760",
    "end": "203680"
  },
  {
    "text": "on-premise deployment is a viable option for air gap cuban needs deployments",
    "start": "203680",
    "end": "210000"
  },
  {
    "text": "is to develop a homegrown solution this approach",
    "start": "210000",
    "end": "215200"
  },
  {
    "text": "will require specific planning and expertise",
    "start": "215200",
    "end": "219760"
  },
  {
    "text": "so you see here in this picture an example of a typical standard implementation of a kubernetes",
    "start": "221599",
    "end": "228640"
  },
  {
    "text": "cluster every node or part can connect to the internet",
    "start": "228640",
    "end": "234400"
  },
  {
    "text": "to prioritize your goals try to understand the potential of kubernetes",
    "start": "234400",
    "end": "239920"
  },
  {
    "text": "and imagine how your company might be using it in five years",
    "start": "239920",
    "end": "245840"
  },
  {
    "text": "kubernetes is a great way to run modern microservice",
    "start": "245840",
    "end": "251200"
  },
  {
    "text": "centric applications images are often downloaded",
    "start": "251200",
    "end": "256560"
  },
  {
    "text": "directly from the internet sources and used in the production environment without further verification",
    "start": "256560",
    "end": "264720"
  },
  {
    "text": "it cannot be verified that the creator of the image has processed in it this",
    "start": "264720",
    "end": "270400"
  },
  {
    "text": "means that unwanted additional data may have been processed",
    "start": "270400",
    "end": "276479"
  },
  {
    "text": "in the image images should be rebuilt in a controlled environment as much as possible",
    "start": "276479",
    "end": "284880"
  },
  {
    "text": "each step in the building the image should be controlled and scrutinized",
    "start": "284880",
    "end": "290880"
  },
  {
    "text": "with the focus on security artifacts any files in the images",
    "start": "290880",
    "end": "297360"
  },
  {
    "text": "like images themselves are of unknown origin it is not possible to control",
    "start": "297360",
    "end": "304720"
  },
  {
    "text": "how the artifacts were created and what they contain",
    "start": "304720",
    "end": "310919"
  },
  {
    "text": "okay so just want to give some facts about kubernetes",
    "start": "313039",
    "end": "318080"
  },
  {
    "text": "these facts come from a survey from canonical published by forbes",
    "start": "318080",
    "end": "323280"
  },
  {
    "text": "kubernetes implementations are growing every year with more and more machines",
    "start": "323280",
    "end": "329199"
  },
  {
    "text": "the biggest challenge in the cdci area is the lack of educated manpower",
    "start": "329199",
    "end": "335840"
  },
  {
    "text": "kubernetes is not a windows simple windows 11 installation",
    "start": "335840",
    "end": "342080"
  },
  {
    "text": "another problem is the negligence of kubernetes updates",
    "start": "342080",
    "end": "348160"
  },
  {
    "text": "a lot of it guys are implementing kubernetes without a concrete plan",
    "start": "348160",
    "end": "354400"
  },
  {
    "text": "how to update kids regularly many pros",
    "start": "354400",
    "end": "359600"
  },
  {
    "text": "in the meantime know what you can do with namespaces",
    "start": "359600",
    "end": "365600"
  },
  {
    "text": "isolate apps and make kubernetes more secure interesting is that only the half of the",
    "start": "365600",
    "end": "373440"
  },
  {
    "text": "respondents are running a high availability kubernetes cluster so what do the other",
    "start": "373440",
    "end": "381120"
  },
  {
    "text": "nearly 45 do that's a good question",
    "start": "381120",
    "end": "387520"
  },
  {
    "text": "this shows you a scan of a package at docker hub",
    "start": "388080",
    "end": "393199"
  },
  {
    "text": "only in this image it were 148 vulnerabilities found",
    "start": "393199",
    "end": "399880"
  },
  {
    "text": "misconfiguration is the most common security incident users are too trusty wealthy and should",
    "start": "399880",
    "end": "408319"
  },
  {
    "text": "rather be a bit more critical in the area",
    "start": "408319",
    "end": "413360"
  },
  {
    "text": "in order to locate and to share docker container images docker is offering a service called",
    "start": "413919",
    "end": "421280"
  },
  {
    "text": "dockerhub its main feature repositories allows the development community to push",
    "start": "421280",
    "end": "429360"
  },
  {
    "text": "and pull container images so with dockerhub anyone in the world",
    "start": "429360",
    "end": "435520"
  },
  {
    "text": "can download and execute any public image as it was a standalone application",
    "start": "435520",
    "end": "443680"
  },
  {
    "text": "today docker hub accounts over 4 million public docker container images",
    "start": "443680",
    "end": "451440"
  },
  {
    "text": "with eight billion pools with downloads in january 2020",
    "start": "451440",
    "end": "457440"
  },
  {
    "text": "and growing its analyzed image pools should top over 100 billion this year",
    "start": "457440",
    "end": "465919"
  },
  {
    "text": "what a big number when you develop",
    "start": "465919",
    "end": "471360"
  },
  {
    "text": "a lot of images yourself you need to have a good base image to rely on",
    "start": "471360",
    "end": "478720"
  },
  {
    "text": "the base image should be small capable and secure now what is a base image",
    "start": "478720",
    "end": "485680"
  },
  {
    "text": "a base image is the image that is used to create all of your container images",
    "start": "485680",
    "end": "492479"
  },
  {
    "text": "your base image can be for example an official docker image such as centos",
    "start": "492479",
    "end": "498879"
  },
  {
    "text": "or you can modify an official docker image to see your needs",
    "start": "498879",
    "end": "505440"
  },
  {
    "text": "or you can create your own base image from scratch container images are built by applying",
    "start": "505440",
    "end": "513360"
  },
  {
    "text": "layers onto previous images each file system layers represent a",
    "start": "513360",
    "end": "519120"
  },
  {
    "text": "point in time record of the file system state after certain actions",
    "start": "519120",
    "end": "526080"
  },
  {
    "text": "images that have a common ancestry file system layers allowing for reduced overhead and",
    "start": "526080",
    "end": "533200"
  },
  {
    "text": "greater consistency between images so that means minimize attack surface",
    "start": "533200",
    "end": "541200"
  },
  {
    "text": "and it's called what's not included can't break that's one of the most important rules",
    "start": "541200",
    "end": "549680"
  },
  {
    "text": "for a base image make sure that only that software is included which is actually need",
    "start": "549680",
    "end": "557760"
  },
  {
    "text": "and as a consequence of this make sure that you really know",
    "start": "557760",
    "end": "563440"
  },
  {
    "text": "what uh or which software is included and how it is working",
    "start": "563440",
    "end": "568640"
  },
  {
    "text": "for checking the images you can use for example create.io",
    "start": "568640",
    "end": "574000"
  },
  {
    "text": "security scanner part of the quay container image registry",
    "start": "574000",
    "end": "580160"
  },
  {
    "text": "and most potentially harmful container images are coin miners",
    "start": "580160",
    "end": "585200"
  },
  {
    "text": "with over 44 of the containers",
    "start": "585200",
    "end": "590760"
  },
  {
    "text": "okay so let me talk about something about kubernetes security",
    "start": "591200",
    "end": "597200"
  },
  {
    "text": "so first enable kubernetes are back or called",
    "start": "597200",
    "end": "603200"
  },
  {
    "text": "kubernetes role-based access control rbac can help you define who has access to",
    "start": "603200",
    "end": "610399"
  },
  {
    "text": "kubernetes api and what permissions they have",
    "start": "610399",
    "end": "616240"
  },
  {
    "text": "our bank is usually enabled by default",
    "start": "616240",
    "end": "621920"
  },
  {
    "text": "but when you use our back or when you enable",
    "start": "621920",
    "end": "626959"
  },
  {
    "text": "our back you must also disable the legacy attribute based access control",
    "start": "626959",
    "end": "633600"
  },
  {
    "text": "called abec second use a third",
    "start": "633600",
    "end": "638880"
  },
  {
    "text": "party authentication for api server it is highly recommended",
    "start": "638880",
    "end": "645040"
  },
  {
    "text": "to integrate kubernetes with a third-party authentication provider for example github",
    "start": "645040",
    "end": "651279"
  },
  {
    "text": "this provides additional security features such as multi-factor authentication",
    "start": "651279",
    "end": "658079"
  },
  {
    "text": "and ensures that the cube api server does not change when for example users are added or",
    "start": "658079",
    "end": "665200"
  },
  {
    "text": "removed if possible make sure that the users are not managed at a",
    "start": "665200",
    "end": "672000"
  },
  {
    "text": "api server level so next one is user process whitelisting",
    "start": "672000",
    "end": "679440"
  },
  {
    "text": "process whitelisting is an effective way to identify unexpected running processes",
    "start": "679440",
    "end": "686000"
  },
  {
    "text": "first observe the application over a period of time to identify all processes running",
    "start": "686000",
    "end": "694079"
  },
  {
    "text": "during normal application behavior then use this list",
    "start": "694079",
    "end": "699279"
  },
  {
    "text": "as your white list for future application behavior",
    "start": "699279",
    "end": "704240"
  },
  {
    "text": "so first turn on audit logging make sure that audit logging is enabled",
    "start": "704320",
    "end": "711519"
  },
  {
    "text": "and that you are monitoring unusual or unwanted api calls especially",
    "start": "711519",
    "end": "717839"
  },
  {
    "text": "authentication failures these lock entries display a so-called",
    "start": "717839",
    "end": "723360"
  },
  {
    "text": "forbidden status message failure to authorize could mean that an",
    "start": "723360",
    "end": "728959"
  },
  {
    "text": "attacker is trying to use stolen credentials",
    "start": "728959",
    "end": "734639"
  },
  {
    "text": "nexon is also important that means keep kubernetes version up-to-date",
    "start": "735040",
    "end": "742560"
  },
  {
    "text": "you should always run the latest version of kubernetes",
    "start": "742560",
    "end": "747839"
  },
  {
    "text": "so always plan to upgrade your kubernetes version to the latest",
    "start": "747839",
    "end": "753279"
  },
  {
    "text": "upgrading kubernetes can be a complex process because you get",
    "start": "753279",
    "end": "759279"
  },
  {
    "text": "three or four times per year some new upgrades from kubernetes",
    "start": "759279",
    "end": "767680"
  },
  {
    "text": "and next one or the last one here is yeah lockdown",
    "start": "768560",
    "end": "774240"
  },
  {
    "text": "cubelet what is cubelet q plate is an agent running on each",
    "start": "774240",
    "end": "779920"
  },
  {
    "text": "node which interacts with the container runtime to launch parts and report metrics for",
    "start": "779920",
    "end": "787040"
  },
  {
    "text": "nodes and the pods each cubelet in the cluster exposes an",
    "start": "787040",
    "end": "792399"
  },
  {
    "text": "api which you can use to start and stop parts",
    "start": "792399",
    "end": "797440"
  },
  {
    "text": "and perform other operations it or if an unauthorized user gains access",
    "start": "797440",
    "end": "805120"
  },
  {
    "text": "to this api or on any node and can run a code on the cluster they",
    "start": "805120",
    "end": "812320"
  },
  {
    "text": "can compromise the entire cluster",
    "start": "812320",
    "end": "816800"
  },
  {
    "text": "okay the cube config cubelet config and the cube",
    "start": "818639",
    "end": "823680"
  },
  {
    "text": "adm config contain important information about the cluster",
    "start": "823680",
    "end": "829360"
  },
  {
    "text": "besides information gathering modifying these conflicts can the cluster",
    "start": "829360",
    "end": "835839"
  },
  {
    "text": "by default the following directories contain important information this directory",
    "start": "835839",
    "end": "843680"
  },
  {
    "text": "are only relevant for troubleshooting therefore there shouldn't be no access rights for",
    "start": "843680",
    "end": "850079"
  },
  {
    "text": "non-admin users for this path since all paths are immediately visible",
    "start": "850079",
    "end": "856880"
  },
  {
    "text": "with the systemctl cad cubelet systemctl should be only",
    "start": "856880",
    "end": "863920"
  },
  {
    "text": "possible for admins in the cluster",
    "start": "863920",
    "end": "868959"
  },
  {
    "text": "some platforms will go so far as to evaluate",
    "start": "868959",
    "end": "874240"
  },
  {
    "text": "clusters or year cluster against the cis called the center for a internet",
    "start": "874240",
    "end": "879279"
  },
  {
    "text": "security benchmarks for kubernetes security",
    "start": "879279",
    "end": "884399"
  },
  {
    "text": "here you see the the link to to that stuff",
    "start": "884399",
    "end": "890320"
  },
  {
    "text": "in addition to the platform level security there is a rich ecosystem",
    "start": "890320",
    "end": "895760"
  },
  {
    "text": "of organizations that focus on container security specifically",
    "start": "895760",
    "end": "902160"
  },
  {
    "text": "such as aqua security twist log stack rocks and",
    "start": "902160",
    "end": "907760"
  },
  {
    "text": "oil vector so let me show you an example on the",
    "start": "907760",
    "end": "914480"
  },
  {
    "text": "called security concept whitelisting this concept deals with a restrictive",
    "start": "914480",
    "end": "920480"
  },
  {
    "text": "approach so called whitelisting the goal here is to close all contact points",
    "start": "920480",
    "end": "926800"
  },
  {
    "text": "called deny all and to enable only explicitly",
    "start": "926800",
    "end": "931839"
  },
  {
    "text": "desired or permitted actions depending on the criticality this can be",
    "start": "931839",
    "end": "937839"
  },
  {
    "text": "passed on on to other departments so called segregation of duty",
    "start": "937839",
    "end": "944720"
  },
  {
    "text": "and may have to be checked from a security perspective for this purpose",
    "start": "944720",
    "end": "951199"
  },
  {
    "text": "a process can be established for requesting certain resources or activations",
    "start": "951199",
    "end": "957839"
  },
  {
    "text": "kubernetes offers many levels for securing the cluster or cluster operations",
    "start": "957839",
    "end": "964000"
  },
  {
    "text": "and most of the security settings are not focused on maximum security but are",
    "start": "964000",
    "end": "970000"
  },
  {
    "text": "designed for fast deployment and use so the rule of thumb here is an insecure",
    "start": "970000",
    "end": "977920"
  },
  {
    "text": "container can be intercepted by a secure cluster but however the reverse does not apply",
    "start": "977920",
    "end": "987600"
  },
  {
    "text": "all right now that we have an overview of the kubernetes environment and kubernetes",
    "start": "989680",
    "end": "995120"
  },
  {
    "text": "security let's move on to the question what is an air gap environment",
    "start": "995120",
    "end": "1002000"
  },
  {
    "text": "the term air gap means the complete isolation of a device or system from the internet",
    "start": "1002000",
    "end": "1007519"
  },
  {
    "text": "aircap networks and computers are used when the highest level of security must be provided for the system or the data",
    "start": "1007519",
    "end": "1014880"
  },
  {
    "text": "stored within it the icap protects the system from malware key loggers ransomware or other",
    "start": "1014880",
    "end": "1021920"
  },
  {
    "text": "unwanted access in a kubernetes air gap environment internet connectivity is severely",
    "start": "1021920",
    "end": "1028720"
  },
  {
    "text": "limited by a firewall the cluster has very limited access to software repositories",
    "start": "1028720",
    "end": "1035120"
  },
  {
    "text": "or registries a common solution is to white list access to software repositories or",
    "start": "1035120",
    "end": "1041438"
  },
  {
    "text": "registries with an outbound proxy and keep all the other connections closed",
    "start": "1041439",
    "end": "1047760"
  },
  {
    "text": "in this way the cluster is cut off from the outside world in an air gap kubernetes cluster you",
    "start": "1047760",
    "end": "1053760"
  },
  {
    "text": "cannot reach control plane endpoints over the internet and in a security environment",
    "start": "1053760",
    "end": "1060799"
  },
  {
    "text": "a technical user is used instead of a root user this user has restricted rights on the operating",
    "start": "1060799",
    "end": "1068080"
  },
  {
    "text": "system running kubernetes in offline air-gapped",
    "start": "1068080",
    "end": "1074559"
  },
  {
    "text": "environments means having private registries and repositories in place for kubernetes a",
    "start": "1074559",
    "end": "1081440"
  },
  {
    "text": "docker and all of the open source components an organization needs to run",
    "start": "1081440",
    "end": "1086640"
  },
  {
    "text": "kubernetes in production it will need to configure all of its docker images to pull from its internal",
    "start": "1086640",
    "end": "1093600"
  },
  {
    "text": "registries and repositories and all of its software and open source components will need to be tightly",
    "start": "1093600",
    "end": "1100480"
  },
  {
    "text": "integrated secured tested for vulnerabilities and made locally accessible to its",
    "start": "1100480",
    "end": "1106480"
  },
  {
    "text": "application and deployment environments yeah here's a list of common problems",
    "start": "1106480",
    "end": "1113520"
  },
  {
    "text": "that occur in daily business you want to install kubernetes but don't have access to yum",
    "start": "1113520",
    "end": "1119760"
  },
  {
    "text": "you also do not have to require pseudo permissions there are also restrictions on the",
    "start": "1119760",
    "end": "1125280"
  },
  {
    "text": "permissions for certain directories these directories are only relevant for",
    "start": "1125280",
    "end": "1130480"
  },
  {
    "text": "troubleshooting therefore there should be no access rights for non-admin users for these",
    "start": "1130480",
    "end": "1136640"
  },
  {
    "text": "paths one practical example a specific kubernetes version is not",
    "start": "1136640",
    "end": "1142160"
  },
  {
    "text": "compatible with an upgraded version of iptables in order to downgrade to an older",
    "start": "1142160",
    "end": "1148080"
  },
  {
    "text": "version specific yum commands are required which must be first",
    "start": "1148080",
    "end": "1154240"
  },
  {
    "text": "enabled to install a specific iptables version another example there is a request",
    "start": "1154240",
    "end": "1161280"
  },
  {
    "text": "needed to access the registry through the outgoing proxy so that we can retrieve all the images needed for the",
    "start": "1161280",
    "end": "1167600"
  },
  {
    "text": "cluster and application one last practical example you want to migrate your storage",
    "start": "1167600",
    "end": "1173919"
  },
  {
    "text": "solution from nfs to longhorn so the disks need to be mounted and integrated",
    "start": "1173919",
    "end": "1179520"
  },
  {
    "text": "into longhorn this requires many pseudo commands but they have to be enabled first",
    "start": "1179520",
    "end": "1186720"
  },
  {
    "text": "yeah let's move on to the pros and cons of an air gap and security environment in an",
    "start": "1187280",
    "end": "1192640"
  },
  {
    "text": "air gap and security environment the advantages in terms of security most likely go hand in hand with the",
    "start": "1192640",
    "end": "1200360"
  },
  {
    "text": "disadvantages in terms of productivity while the limited internet connectivity",
    "start": "1200360",
    "end": "1206559"
  },
  {
    "text": "may protect you from downloading malicious data or certain third-party",
    "start": "1206559",
    "end": "1211840"
  },
  {
    "text": "attacks on the other hand you may lose productivity and aspects and the effort",
    "start": "1211840",
    "end": "1217919"
  },
  {
    "text": "and cost of deploying and maintaining your cluster may increase",
    "start": "1217919",
    "end": "1223039"
  },
  {
    "text": "not only does offer installation enhance complexity during installation",
    "start": "1223039",
    "end": "1228320"
  },
  {
    "text": "but also cluster management operations such a",
    "start": "1228320",
    "end": "1233600"
  },
  {
    "text": "machine maintenance disaster recovery upgrading to newer versions applying",
    "start": "1233600",
    "end": "1239840"
  },
  {
    "text": "security patches and more ultimately you will never be 100 secure",
    "start": "1239840",
    "end": "1246320"
  },
  {
    "text": "with an air gap only environment for example threats from within are still possible",
    "start": "1246320",
    "end": "1255039"
  },
  {
    "text": "let's look at a typical example of a daily task we want to deploy elasticsearch in",
    "start": "1255360",
    "end": "1260960"
  },
  {
    "text": "kubernetes cluster with hand for any common harm chart the process will be the same",
    "start": "1260960",
    "end": "1269039"
  },
  {
    "text": "yeah installation usually always runs in three steps",
    "start": "1269039",
    "end": "1274240"
  },
  {
    "text": "first the kubernetes cluster is needed second we need to install helm so we can",
    "start": "1274240",
    "end": "1279440"
  },
  {
    "text": "run the current install script from github and run it on the machine the problem is that we don't even know",
    "start": "1279440",
    "end": "1285760"
  },
  {
    "text": "what exactly we are running the third step is the deployment of elasticsearch you add the hand repo",
    "start": "1285760",
    "end": "1292960"
  },
  {
    "text": "called the value cml file and install the hem chart",
    "start": "1292960",
    "end": "1298480"
  },
  {
    "text": "this approach can be risky if you are working in a security oriented production environment",
    "start": "1298480",
    "end": "1304640"
  },
  {
    "text": "many hem charts include images and containers that aren't always necessary",
    "start": "1304640",
    "end": "1310000"
  },
  {
    "text": "or worse you really don't know which images are even installed or how",
    "start": "1310000",
    "end": "1316320"
  },
  {
    "text": "many critical vulnerabilities they have especially in a kubernetes cluster you",
    "start": "1316320",
    "end": "1321679"
  },
  {
    "text": "should make your containers as secure as possible to minimize the chance of outside attacks or privilege escalations",
    "start": "1321679",
    "end": "1329440"
  },
  {
    "text": "from the containers otherwise an attacker could take control of your",
    "start": "1329440",
    "end": "1334480"
  },
  {
    "text": "cluster and use it for their own purposes for example mining bitcoins",
    "start": "1334480",
    "end": "1341440"
  },
  {
    "text": "let's continue with our example here we call the helm installation script from github in an environment",
    "start": "1341600",
    "end": "1348240"
  },
  {
    "text": "with internet connection and as you can see it works fine then we can run the script and install",
    "start": "1348240",
    "end": "1354880"
  },
  {
    "text": "him in an air gap environment we already failed because the firewall blocks the",
    "start": "1354880",
    "end": "1360320"
  },
  {
    "text": "url and we can't access github let's get to the deployment of",
    "start": "1360320",
    "end": "1366400"
  },
  {
    "text": "elasticsearch with ham you add the helm repository called the value.cml file from github and install",
    "start": "1366400",
    "end": "1374000"
  },
  {
    "text": "the chart you can see that it works well",
    "start": "1374000",
    "end": "1379440"
  },
  {
    "text": "however in an aircap environment the repositories cannot be accessed",
    "start": "1379840",
    "end": "1386000"
  },
  {
    "text": "so the chart cannot be installed yeah the same scenario applies to kibana",
    "start": "1386000",
    "end": "1391760"
  },
  {
    "text": "as well now let's move on to the installation of",
    "start": "1391760",
    "end": "1397039"
  },
  {
    "text": "helm in an air gap environment of course the required commands must be",
    "start": "1397039",
    "end": "1402400"
  },
  {
    "text": "in the zoodrust file so first of all we need to install helm in our environment",
    "start": "1402400",
    "end": "1408080"
  },
  {
    "text": "to do this we download the helm binary on a local machine and move it to the technical users directory on the admin",
    "start": "1408080",
    "end": "1415600"
  },
  {
    "text": "node for example using scp then we unpack the file and make it",
    "start": "1415600",
    "end": "1421120"
  },
  {
    "text": "executable as you can see here",
    "start": "1421120",
    "end": "1425600"
  },
  {
    "text": "next we deploy with helm elasticsearch now that helm is installed we download",
    "start": "1426240",
    "end": "1432960"
  },
  {
    "text": "the helm chart to our local machine and validate it this means that we check the chart files",
    "start": "1432960",
    "end": "1439039"
  },
  {
    "text": "of unnecessary or unwanted containers and images to do this we look through the chart",
    "start": "1439039",
    "end": "1445520"
  },
  {
    "text": "files and find all the images then we download images to our local machine and check them for",
    "start": "1445520",
    "end": "1451600"
  },
  {
    "text": "vulnerabilities and if necessary the images are hardened then they are assigned and transferred",
    "start": "1451600",
    "end": "1458400"
  },
  {
    "text": "to our registry next we change the values file to use the image from our registry",
    "start": "1458400",
    "end": "1465200"
  },
  {
    "text": "or mostly we will adjust the values for the cluster as well",
    "start": "1465200",
    "end": "1470960"
  },
  {
    "text": "afterwards the customizable chart is transferred to the admin node for example with scp",
    "start": "1470960",
    "end": "1478799"
  },
  {
    "text": "now we are ready to deploy the chart with helm in our cluster and as you can see it works",
    "start": "1478799",
    "end": "1486679"
  },
  {
    "text": "okay thank you uh toby so let's move and then to vincent",
    "start": "1488080",
    "end": "1493679"
  },
  {
    "text": "he will give us a short demonstration",
    "start": "1493679",
    "end": "1498559"
  },
  {
    "text": "thanks ralph and toby i will show you how to set up an airgap cluster with a simple proxy server",
    "start": "1498880",
    "end": "1505919"
  },
  {
    "text": "so first things first i show you my setup this is the admin machine it's not a",
    "start": "1505919",
    "end": "1511440"
  },
  {
    "text": "direct part of the cluster itself but it manages it the cluster contains two nodes",
    "start": "1511440",
    "end": "1519520"
  },
  {
    "text": "one master node and one broker node all three nodes have very limited access to the outside",
    "start": "1519520",
    "end": "1526559"
  },
  {
    "text": "world the only available ports and addresses are the 443 port for https communication",
    "start": "1526559",
    "end": "1535159"
  },
  {
    "text": "6443 and 7443 for the communication inside the cluster",
    "start": "1535159",
    "end": "1541120"
  },
  {
    "text": "the port 80 for http connection i already prepared the port 32 454 as",
    "start": "1541120",
    "end": "1549039"
  },
  {
    "text": "well which i will use for the docker registry and the address is available on the",
    "start": "1549039",
    "end": "1554960"
  },
  {
    "text": "hubcover native net which is the the package manager the place where all packages are stored",
    "start": "1554960",
    "end": "1561440"
  },
  {
    "text": "as well as all the machines in the cluster but that's it i am ready and my cluster",
    "start": "1561440",
    "end": "1568000"
  },
  {
    "text": "is ready as well for a deployment so i will deploy a zener package",
    "start": "1568000",
    "end": "1573120"
  },
  {
    "text": "registry into my cluster and all i need to do is call cena search",
    "start": "1573120",
    "end": "1581520"
  },
  {
    "text": "cena search gives me an overview about all the packages available in the hub",
    "start": "1583279",
    "end": "1588960"
  },
  {
    "text": "as you can see those are quite a lot packages so to filter for the package i want i can call cena search minus minus",
    "start": "1588960",
    "end": "1596799"
  },
  {
    "text": "ps and i search for vincent since i did them on my account",
    "start": "1596799",
    "end": "1603440"
  },
  {
    "text": "and now there are only a handful of packages available and the package i want to deploy is the",
    "start": "1604320",
    "end": "1610559"
  },
  {
    "text": "package docker registry in the version 271 in order to install this package",
    "start": "1610559",
    "end": "1617120"
  },
  {
    "text": "i copy the value in the install row paste it after the zener install command",
    "start": "1617120",
    "end": "1623760"
  },
  {
    "text": "and pass a value file which i will explain later on",
    "start": "1623760",
    "end": "1629840"
  },
  {
    "text": "now the package gets downloaded and it will deploy the",
    "start": "1631760",
    "end": "1637039"
  },
  {
    "text": "registry into my cluster",
    "start": "1637039",
    "end": "1641240"
  },
  {
    "text": "now if you want to know what exactly happens here i will show you very soon",
    "start": "1642799",
    "end": "1649360"
  },
  {
    "text": "but i can call i can tell you this it's not only a deployment it's much more",
    "start": "1649360",
    "end": "1656320"
  },
  {
    "text": "so the installation is finished we take a look at the pots",
    "start": "1658240",
    "end": "1665200"
  },
  {
    "text": "there's the registry part if we take a look at the services",
    "start": "1665279",
    "end": "1670799"
  },
  {
    "text": "there's the service for the registry now keep in mind i already prepared the",
    "start": "1671520",
    "end": "1677279"
  },
  {
    "text": "port 32 454 and i will show you one thing more",
    "start": "1677279",
    "end": "1683600"
  },
  {
    "text": "if i curl the catalog by curling local registry",
    "start": "1683600",
    "end": "1691120"
  },
  {
    "text": "there is already one one repository containing one image",
    "start": "1694000",
    "end": "1699120"
  },
  {
    "text": "and i will show you how i did it and how easy it is to create such a cena package",
    "start": "1699120",
    "end": "1706399"
  },
  {
    "text": "now what you do what you need to create your very own cena package",
    "start": "1706399",
    "end": "1712159"
  },
  {
    "text": "is a machine with access to the world wide web as well as installed helm",
    "start": "1712159",
    "end": "1717279"
  },
  {
    "text": "docker and cena or short this machine",
    "start": "1717279",
    "end": "1723480"
  },
  {
    "text": "this machine is totally clean it got no images available right now so um",
    "start": "1724559",
    "end": "1730880"
  },
  {
    "text": "we start from yeah from the very first point",
    "start": "1730880",
    "end": "1735919"
  },
  {
    "text": "i like to create a folder when i create a zener package to keep things clean and tidy",
    "start": "1735919",
    "end": "1741679"
  },
  {
    "text": "let's call this cubecon and in this folder",
    "start": "1741679",
    "end": "1748240"
  },
  {
    "text": "i simply have to type in cna create",
    "start": "1748240",
    "end": "1753360"
  },
  {
    "text": "which will create two files the first file is the package.gamma",
    "start": "1753360",
    "end": "1759360"
  },
  {
    "text": "which is like a configuration file for the cna package",
    "start": "1759360",
    "end": "1764720"
  },
  {
    "text": "and the second file is the template.yaml which enables us to pass user values",
    "start": "1764720",
    "end": "1770480"
  },
  {
    "text": "through the installation process but since we want to make a",
    "start": "1770480",
    "end": "1776080"
  },
  {
    "text": "high security deployment we need all the dependencies available on our machine",
    "start": "1776080",
    "end": "1783120"
  },
  {
    "text": "since i used a helm chart for the docker registry the troony package i need to",
    "start": "1783120",
    "end": "1788799"
  },
  {
    "text": "pull this helm chart first [Music] got it on the machine",
    "start": "1788799",
    "end": "1795520"
  },
  {
    "text": "this machine uses an image the docker registry image in the version 271",
    "start": "1795520",
    "end": "1802159"
  },
  {
    "text": "now what we already do is stocker pull registry in the version 2.71",
    "start": "1802159",
    "end": "1810760"
  },
  {
    "text": "okay it should be available exactly but since we want to include it",
    "start": "1824080",
    "end": "1830480"
  },
  {
    "text": "into the package itself we have to store it in a file we can do this by calling docker safe",
    "start": "1830480",
    "end": "1838080"
  },
  {
    "text": "door code image name and version",
    "start": "1838080",
    "end": "1844799"
  },
  {
    "text": "and we define the output file registry.image",
    "start": "1844799",
    "end": "1850120"
  },
  {
    "text": "now we have the image as well and now we have all the dependencies in this folder",
    "start": "1851919",
    "end": "1858880"
  },
  {
    "text": "so let's take a closer look at the package.yaml",
    "start": "1858880",
    "end": "1864000"
  },
  {
    "text": "the package.yaml defines our cena package as i said before",
    "start": "1864000",
    "end": "1869760"
  },
  {
    "text": "for example the name can be set to cubecon registry",
    "start": "1869760",
    "end": "1876720"
  },
  {
    "text": "description registry package the version is changeable as well i like",
    "start": "1876720",
    "end": "1884000"
  },
  {
    "text": "to check the version of the image included in this case it's 271",
    "start": "1884000",
    "end": "1889919"
  },
  {
    "text": "now we have to pass all the files included in the package we also want the helm chart included you",
    "start": "1889919",
    "end": "1896399"
  },
  {
    "text": "can name it whatever you want i simply like to call it helm and the file name is docker registry and",
    "start": "1896399",
    "end": "1903760"
  },
  {
    "text": "the version is 132.",
    "start": "1903760",
    "end": "1907640"
  },
  {
    "text": "and we can also call the image",
    "start": "1909840",
    "end": "1914240"
  },
  {
    "text": "with the name registry.image now we could also",
    "start": "1915279",
    "end": "1920480"
  },
  {
    "text": "take images from a online registry which we would do in the field containers but",
    "start": "1920480",
    "end": "1925919"
  },
  {
    "text": "since we operate in a high security cluster we don't want to any more contact than we need so we simply delete",
    "start": "1925919",
    "end": "1932720"
  },
  {
    "text": "these lines as well as these in the installation part",
    "start": "1932720",
    "end": "1938720"
  },
  {
    "text": "the installation part should also include the helm chart",
    "start": "1938880",
    "end": "1945440"
  },
  {
    "text": "and the image so we list them here as well and now we come to the most interesting",
    "start": "1945440",
    "end": "1950559"
  },
  {
    "text": "part of cena the task list the tasks get called in their order",
    "start": "1950559",
    "end": "1955919"
  },
  {
    "text": "every time the package gets installed so if we would call cena install cubecon",
    "start": "1955919",
    "end": "1961919"
  },
  {
    "text": "registry it would firstly print starts in a create example",
    "start": "1961919",
    "end": "1967760"
  },
  {
    "text": "use the template engine to merge the template.yaml and the given user values into result.yaml",
    "start": "1967760",
    "end": "1974799"
  },
  {
    "text": "and print again a message we want to take it one step further further and create a really cool package",
    "start": "1974799",
    "end": "1983200"
  },
  {
    "text": "so what we need to do is add some lines since we want to deploy a helm chart",
    "start": "1983200",
    "end": "1990640"
  },
  {
    "text": "which uses an image we need to make that image available for our machine",
    "start": "1990640",
    "end": "1997039"
  },
  {
    "text": "in order to do so we will call the cmd plugin",
    "start": "1997039",
    "end": "2002399"
  },
  {
    "text": "which simply executes a command in your shell and call the command",
    "start": "2002399",
    "end": "2007840"
  },
  {
    "text": "docker load registry.image",
    "start": "2007840",
    "end": "2012919"
  },
  {
    "text": "this will make the image available in our local registry",
    "start": "2014000",
    "end": "2019440"
  },
  {
    "text": "next the template plugin gets called so that we can change the values for the",
    "start": "2019440",
    "end": "2024880"
  },
  {
    "text": "installation of the helm chart afterwards after both is done",
    "start": "2024880",
    "end": "2030559"
  },
  {
    "text": "finally we can install the helm chart to do so we call helm install",
    "start": "2030559",
    "end": "2037360"
  },
  {
    "text": "we define which helm chart should get installed this is the docker registry 132",
    "start": "2037360",
    "end": "2044880"
  },
  {
    "text": "and the values which can change the deployment",
    "start": "2044880",
    "end": "2050560"
  },
  {
    "text": "are passed in the result.yaml okay",
    "start": "2050560",
    "end": "2056480"
  },
  {
    "text": "after this we should have a deployed and up and running registry but",
    "start": "2056480",
    "end": "2061760"
  },
  {
    "text": "we can connect to it since it's got no certificate and we don't have a way to connect to it",
    "start": "2061760",
    "end": "2068398"
  },
  {
    "text": "via https so we have to edit in the insecure registries file",
    "start": "2068399",
    "end": "2075358"
  },
  {
    "text": "to do so we have to edit a file so we call the edit file plugin",
    "start": "2075359",
    "end": "2082480"
  },
  {
    "text": "the operation we want to do with that file is we want to override it",
    "start": "2082720",
    "end": "2088560"
  },
  {
    "text": "the file type we want to overwrite is a text file and the file path",
    "start": "2088560",
    "end": "2095280"
  },
  {
    "text": "is slash etc slash docker slash daemon jason",
    "start": "2095280",
    "end": "2103200"
  },
  {
    "text": "we want to overwrite the very first line and the value we want to pass",
    "start": "2103200",
    "end": "2110640"
  },
  {
    "text": "is insecure registries",
    "start": "2110640",
    "end": "2115880"
  },
  {
    "text": "and the insecure registry is called local registry",
    "start": "2119200",
    "end": "2124960"
  },
  {
    "text": "and the version is 2 32 4 5 4.",
    "start": "2124960",
    "end": "2131000"
  },
  {
    "text": "okay now we are able to reach the registry so let's use it push an image",
    "start": "2131920",
    "end": "2137119"
  },
  {
    "text": "to it what we need to do first is check the image",
    "start": "2137119",
    "end": "2143800"
  },
  {
    "text": "to do so we call the docker plugin with the option",
    "start": "2146320",
    "end": "2151440"
  },
  {
    "text": "tag the source image is the image we load here and it's the",
    "start": "2151440",
    "end": "2160960"
  },
  {
    "text": "docker dot io slash registry in the version 2.71",
    "start": "2161119",
    "end": "2167440"
  },
  {
    "text": "and the new image name should be local registry",
    "start": "2167440",
    "end": "2174880"
  },
  {
    "text": "in the version 32 454 slash dot go dot io slash registry",
    "start": "2175200",
    "end": "2182960"
  },
  {
    "text": "2.7.1 okay",
    "start": "2183760",
    "end": "2188800"
  },
  {
    "text": "in order to push it we need to give the registry a little bit time to get up so we call another command",
    "start": "2188800",
    "end": "2196880"
  },
  {
    "text": "namely the sleep command for 10 seconds",
    "start": "2198480",
    "end": "2204079"
  },
  {
    "text": "just that the registry gets enough time to get up and get running and after that we call once more the",
    "start": "2204079",
    "end": "2210160"
  },
  {
    "text": "docker plugin this time with the option push",
    "start": "2210160",
    "end": "2215920"
  },
  {
    "text": "and we want to push the source image local registry",
    "start": "2215920",
    "end": "2221200"
  },
  {
    "text": "32 454 slash docker dot io slash registry in the version 271",
    "start": "2221200",
    "end": "2231359"
  },
  {
    "text": "and that's it now let's take a closer look at the docker registry helm chart",
    "start": "2231359",
    "end": "2238320"
  },
  {
    "text": "to do so we simply extract it go into the folder",
    "start": "2238320",
    "end": "2245520"
  },
  {
    "text": "and take a look at the values.yaml and right there is a big problem in the",
    "start": "2245520",
    "end": "2251280"
  },
  {
    "text": "service the service type is cluster ip which is not ideal since we want to reach it",
    "start": "2251280",
    "end": "2256880"
  },
  {
    "text": "instantly to do so we have to change the type to node port and define a node port",
    "start": "2256880",
    "end": "2264800"
  },
  {
    "text": "and we could do this directly here in the values.yaml of the helm chart but there is a better way to do so there",
    "start": "2264800",
    "end": "2271760"
  },
  {
    "text": "is the cena way again we take a look at the template.yaml",
    "start": "2271760",
    "end": "2278680"
  },
  {
    "text": "here we can define a template which gets merged with user values",
    "start": "2278960",
    "end": "2285520"
  },
  {
    "text": "our template should have the same structure as the values.yaml we have to change",
    "start": "2285520",
    "end": "2293119"
  },
  {
    "text": "so we say we want to change the key service and we want to change the type",
    "start": "2293119",
    "end": "2299440"
  },
  {
    "text": "and now we give a reference to the user values by saying values.type",
    "start": "2299440",
    "end": "2306280"
  },
  {
    "text": "and we do the same for the node port values.notepad",
    "start": "2306800",
    "end": "2314920"
  },
  {
    "text": "okay so if we install this zener package and pass a values.yammer",
    "start": "2315599",
    "end": "2323359"
  },
  {
    "text": "with the key type and the value and the key notepod and the given value",
    "start": "2323359",
    "end": "2328960"
  },
  {
    "text": "those get placed in right here okay we are ready to go",
    "start": "2328960",
    "end": "2336320"
  },
  {
    "text": "in order to wrap it up we simply call cena build",
    "start": "2336320",
    "end": "2341838"
  },
  {
    "text": "cena build takes all the files given and takes them into the package",
    "start": "2342000",
    "end": "2348240"
  },
  {
    "text": "and in order to share a package we need to log in to do so we say see now log in minus u",
    "start": "2348240",
    "end": "2355040"
  },
  {
    "text": "and the username",
    "start": "2355040",
    "end": "2358000"
  },
  {
    "text": "and the password and that's it",
    "start": "2361119",
    "end": "2366880"
  },
  {
    "text": "now we take a short look at package.yammer just to make sure",
    "start": "2366880",
    "end": "2372079"
  },
  {
    "text": "the name is cubecon registry the enter version is 271",
    "start": "2372079",
    "end": "2378400"
  },
  {
    "text": "okay so this last action to share it with the world and everyone we say cena push",
    "start": "2378400",
    "end": "2386480"
  },
  {
    "text": "now if you have packages you can share with everyone but want to",
    "start": "2386480",
    "end": "2391520"
  },
  {
    "text": "use cena don't worry we also got the opportunity for a private hub for you to use",
    "start": "2391520",
    "end": "2398720"
  },
  {
    "text": "if you want it feel free to contact us after this presentation and that's it our package is installed",
    "start": "2398720",
    "end": "2405359"
  },
  {
    "text": "we go back to our cluster now what we do first is delete our old deployment",
    "start": "2405359",
    "end": "2413359"
  },
  {
    "text": "by typing delete and the deployment name",
    "start": "2413440",
    "end": "2420240"
  },
  {
    "text": "so that our cluster is clean again also",
    "start": "2420240",
    "end": "2425760"
  },
  {
    "text": "we remove all images just to prove that we took the images",
    "start": "2425760",
    "end": "2431280"
  },
  {
    "text": "from the cena package",
    "start": "2431280",
    "end": "2435000"
  },
  {
    "text": "okay and again we say cena search filter for my name",
    "start": "2444560",
    "end": "2452200"
  },
  {
    "text": "we find the kubecon package in the version 271",
    "start": "2456480",
    "end": "2461520"
  },
  {
    "text": "and we say cena install but before we just take a look at myvalues.yaml here",
    "start": "2461839",
    "end": "2469920"
  },
  {
    "text": "there is the notepad given and the type given perfect",
    "start": "2469920",
    "end": "2475119"
  },
  {
    "text": "so cena install minus f values.yaml",
    "start": "2475119",
    "end": "2480838"
  },
  {
    "text": "[Music] and that's it again we can check the services",
    "start": "2502440",
    "end": "2510480"
  },
  {
    "text": "it is running on the port 32454 and take a look at the catalog",
    "start": "2511839",
    "end": "2520040"
  },
  {
    "text": "and there it is the image and that's it that's how easy it is to create an air",
    "start": "2527680",
    "end": "2533520"
  },
  {
    "text": "gap environment with cena to share packages to automate everything you want",
    "start": "2533520",
    "end": "2539839"
  },
  {
    "text": "to do so back to you ralph and toby",
    "start": "2539839",
    "end": "2545520"
  },
  {
    "text": "thank you vincent for this great demonstration so let's move on",
    "start": "2545520",
    "end": "2551200"
  },
  {
    "text": "one of the latest state of kubernetes and container security reports by red",
    "start": "2551200",
    "end": "2557359"
  },
  {
    "text": "hat found that 24 of serious container issues the",
    "start": "2557359",
    "end": "2565319"
  },
  {
    "text": "vulnerabilities that could be remediated almost 70 percent were",
    "start": "2565319",
    "end": "2573040"
  },
  {
    "text": "as we said misconfigurations and 27",
    "start": "2573040",
    "end": "2579359"
  },
  {
    "text": "were runtime security incidents so here's an overview of our so-called",
    "start": "2579359",
    "end": "2586400"
  },
  {
    "text": "five level hardening procedure that we are offering to our customers",
    "start": "2586400",
    "end": "2592480"
  },
  {
    "text": "if you want to get in detail please visit our website or contact us",
    "start": "2592480",
    "end": "2597599"
  },
  {
    "text": "about air gap and hardening so now we are coming to the conclusion",
    "start": "2597599",
    "end": "2607040"
  },
  {
    "text": "kubernetes in the standard can be fast installed but please take care",
    "start": "2607040",
    "end": "2613119"
  },
  {
    "text": "kubernetes has some open doors and you certainly don't want everyone coming in",
    "start": "2613119",
    "end": "2620880"
  },
  {
    "text": "through those doors that means a well-designed and a safe security concept is mandatory",
    "start": "2620880",
    "end": "2628960"
  },
  {
    "text": "before you install anything and a-cap is really really tough topic",
    "start": "2628960",
    "end": "2635760"
  },
  {
    "text": "but it is definitely worth looking into it depends on two sets if air gap",
    "start": "2635760",
    "end": "2641920"
  },
  {
    "text": "reduces productivity air gap increases the effort and cost but a hacked",
    "start": "2641920",
    "end": "2646960"
  },
  {
    "text": "environment cost more how much did log4j cost agga protects against malicious data",
    "start": "2646960",
    "end": "2653520"
  },
  {
    "text": "downloads or certain third-party attacks",
    "start": "2653520",
    "end": "2658480"
  },
  {
    "text": "so now we are at the end of this video on air gap",
    "start": "2658960",
    "end": "2664720"
  },
  {
    "text": "we would like to thank you very much for your time if you have any questions about",
    "start": "2664720",
    "end": "2671119"
  },
  {
    "text": "kubernetes and air gap don't hesitate to drop us a line or contact",
    "start": "2671119",
    "end": "2677200"
  },
  {
    "text": "us via our social media accounts we are looking forward to answering your",
    "start": "2677200",
    "end": "2683040"
  },
  {
    "text": "questions you can also reach us through our website",
    "start": "2683040",
    "end": "2688839"
  },
  {
    "text": "cubops.net thank you very much and bye bye",
    "start": "2688839",
    "end": "2695000"
  }
]