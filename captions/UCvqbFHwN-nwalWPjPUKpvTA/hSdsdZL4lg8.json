[
  {
    "start": "0",
    "end": "57000"
  },
  {
    "text": "hi this is lucas and i'm welcoming you to the session sharing clusters learnings from building",
    "start": "80",
    "end": "7040"
  },
  {
    "text": "a namespace on demand platform",
    "start": "7040",
    "end": "10720"
  },
  {
    "text": "as i said my name is lucas i'm the ceo of devspace technologies inc and i'm currently working on loft that",
    "start": "14400",
    "end": "21680"
  },
  {
    "text": "is h which is essentially a multi-tenancy uh solution for kubernetes",
    "start": "21680",
    "end": "27279"
  },
  {
    "text": "i'm also an open source maintainer uh for several kubernetes related projects like uh dev",
    "start": "27279",
    "end": "33280"
  },
  {
    "text": "space and kiosk uh project which you will hear about uh in a couple minutes",
    "start": "33280",
    "end": "39200"
  },
  {
    "text": "i just recently relocated to san francisco yeah one of the few people that actually",
    "start": "39200",
    "end": "45360"
  },
  {
    "text": "moves that way and not out of the bay area um you might hear the funny accent because",
    "start": "45360",
    "end": "52000"
  },
  {
    "text": "i'm originally from germany so excusing for that right up front",
    "start": "52000",
    "end": "58640"
  },
  {
    "start": "57000",
    "end": "103000"
  },
  {
    "text": "so who is this talk for this talk is essentially for it teams admins and sres",
    "start": "58640",
    "end": "66320"
  },
  {
    "text": "at companies that are already managing kubernetes clusters might be for production cicd",
    "start": "66320",
    "end": "72560"
  },
  {
    "text": "staging environments or whatever and who now want to make kubernetes",
    "start": "72560",
    "end": "78159"
  },
  {
    "text": "available for engineering teams that means you plan to host multiple",
    "start": "78159",
    "end": "84000"
  },
  {
    "text": "engineers or engineering teams in shared development clusters so we're talking about the pre-production stage",
    "start": "84000",
    "end": "90400"
  },
  {
    "text": "in this talk and the challenge here is really about kubernetes multi-tenancy and",
    "start": "90400",
    "end": "96720"
  },
  {
    "text": "getting the experience straight for your tenants in large shared kubernetes clusters",
    "start": "96720",
    "end": "103840"
  },
  {
    "start": "103000",
    "end": "132000"
  },
  {
    "text": "when we talk about multi-tenancy well we first have to understand what that means so essentially",
    "start": "103840",
    "end": "110640"
  },
  {
    "text": "single tenant kubernetes clusters are clusters which you hand over to a single",
    "start": "110640",
    "end": "115920"
  },
  {
    "text": "team which you're running single you know singular workloads in and multi-tenant kubernetes clusters are",
    "start": "115920",
    "end": "123520"
  },
  {
    "text": "essentially larger and shared kubernetes clusters which host a variety of you know engineers engineering teams and",
    "start": "123520",
    "end": "130640"
  },
  {
    "text": "their workloads so once we compare those two approaches",
    "start": "130640",
    "end": "137440"
  },
  {
    "start": "132000",
    "end": "173000"
  },
  {
    "text": "we can very quickly understand that single tenant kubernetes clusters can be",
    "start": "137440",
    "end": "143360"
  },
  {
    "text": "very expensive because you're creating a bunch of kubernetes clusters",
    "start": "143360",
    "end": "148560"
  },
  {
    "text": "and someone's got to manage them um you have to have you know you have to essentially pay the cloud computing",
    "start": "148560",
    "end": "154560"
  },
  {
    "text": "resources for all these clusters it's really hard to scale things to really the zero",
    "start": "154560",
    "end": "160640"
  },
  {
    "text": "um so single tenant kubernetes clusters tend to be pretty expensive whereas multi-tenant kubernetes clusters are",
    "start": "160640",
    "end": "166720"
  },
  {
    "text": "cheaper but very difficult to get right and that's what this talk is about",
    "start": "166720",
    "end": "171760"
  },
  {
    "text": "and to be more specifically this talk is about soft multi-tenancy",
    "start": "171760",
    "end": "177120"
  },
  {
    "start": "173000",
    "end": "227000"
  },
  {
    "text": "what does that mean so essentially if you're using if you're kind of looking for hard multi-tenancy uh you're",
    "start": "177120",
    "end": "184720"
  },
  {
    "text": "looking at systems where there's zero trust between tenants um that means for example if you are",
    "start": "184720",
    "end": "190720"
  },
  {
    "text": "running like a platform as a service uh offering and you have you know multiple users from different",
    "start": "190720",
    "end": "195920"
  },
  {
    "text": "organizations who who you don't even know potentially then you're talking about",
    "start": "195920",
    "end": "201040"
  },
  {
    "text": "a hard tenancy that you might need for your platform we're talking about soft tendencies so",
    "start": "201040",
    "end": "206720"
  },
  {
    "text": "typically your tenants are users all from the same organization",
    "start": "206720",
    "end": "212080"
  },
  {
    "text": "and there's a small chance of malicious actors from the outside organization outside of the organization so it's",
    "start": "212080",
    "end": "218879"
  },
  {
    "text": "mainly really about preventing accidents and ensuring the stability of the underlying platform",
    "start": "218879",
    "end": "224239"
  },
  {
    "text": "rather than hardening against outside attacks so let's get to the first learning um",
    "start": "224239",
    "end": "231040"
  },
  {
    "start": "227000",
    "end": "335000"
  },
  {
    "text": "that i discovered while implementing multi-tenant kubernetes clusters at a variety of companies over the past",
    "start": "231040",
    "end": "236879"
  },
  {
    "text": "two or three years the first learning is essentially centralized user management and",
    "start": "236879",
    "end": "242640"
  },
  {
    "text": "authentication you probably already have users in a third-party system like active directory",
    "start": "242640",
    "end": "249280"
  },
  {
    "text": "google or microsoft if you're using like office 365 github gitlab for sure are systems that",
    "start": "249280",
    "end": "256160"
  },
  {
    "text": "are aware of your engineering teams and you can simply hook up",
    "start": "256160",
    "end": "262400"
  },
  {
    "text": "an open source project called dex to your platform it actually recently became a cncf",
    "start": "262400",
    "end": "267840"
  },
  {
    "text": "sandbox project and with dex you can achieve single sign-on for kubernetes",
    "start": "267840",
    "end": "273360"
  },
  {
    "text": "dex is an openid connect in oauth2 provider and it supports various identity",
    "start": "273360",
    "end": "279520"
  },
  {
    "text": "providers including ldap saml and obviously you know google microsoft github gitlab etc",
    "start": "279520",
    "end": "287120"
  },
  {
    "text": "so it's a very powerful tool to get authentication right so for example you could provide a cube",
    "start": "287120",
    "end": "293759"
  },
  {
    "text": "config you know uh right after user authenticates uh through the text authentication",
    "start": "293759",
    "end": "299120"
  },
  {
    "text": "workflow um and let the user in the simplest case just download a cube",
    "start": "299120",
    "end": "304160"
  },
  {
    "text": "config file right obviously that can get a lot more fancy you know if you have your own cli tool",
    "start": "304160",
    "end": "310160"
  },
  {
    "text": "which sets uh which creates cube config files on the user's machine uh and does the authentication workflow",
    "start": "310160",
    "end": "317280"
  },
  {
    "text": "for the user automatically right just pop up the browser and have them redirect to a local host port",
    "start": "317280",
    "end": "322960"
  },
  {
    "text": "that the cli opens um there are different levels uh with which",
    "start": "322960",
    "end": "328080"
  },
  {
    "text": "you can do but the most easiest one is just you know redirect users to to text and let them download the cubeconfig",
    "start": "328080",
    "end": "333440"
  },
  {
    "text": "file at the end the second learning is essentially you want to restrict users",
    "start": "333440",
    "end": "340639"
  },
  {
    "start": "335000",
    "end": "482000"
  },
  {
    "text": "obviously you want to ensure the security of your platform so you need you know things like port security policies for sure because you",
    "start": "340639",
    "end": "347280"
  },
  {
    "text": "don't want any privileged parts being created out there but at the same time you really need to",
    "start": "347280",
    "end": "352639"
  },
  {
    "text": "make sure that you use smart defaults for your platform because ux really matters",
    "start": "352639",
    "end": "358240"
  },
  {
    "text": "because if you're providing a kubernetes offering to engineers you really care about the adoption of",
    "start": "358240",
    "end": "364479"
  },
  {
    "text": "your platform within the organization you want users to actually have a pleasure in using kubernetes",
    "start": "364479",
    "end": "371520"
  },
  {
    "text": "so let me give you an example definitely you want to set resource quotas and you want to limit users you know",
    "start": "371520",
    "end": "376960"
  },
  {
    "text": "regarding cpu and memory etc but if you do that then users must specify",
    "start": "376960",
    "end": "382720"
  },
  {
    "text": "cpu and memory limits within you know all their parts and containers but they might not want to do that in",
    "start": "382720",
    "end": "390400"
  },
  {
    "text": "the early stages of development right and i shouldn't have to worry about that too too much to be honest because it's",
    "start": "390400",
    "end": "397039"
  },
  {
    "text": "development stages pre-production obviously you want to have all these um you know limits uh configured in",
    "start": "397039",
    "end": "403199"
  },
  {
    "text": "production and staging for sure but might not want to want the engineers to worry you know",
    "start": "403199",
    "end": "408639"
  },
  {
    "text": "the first thing they worry about shouldn't be this so set defaults and then let kubernetes",
    "start": "408639",
    "end": "414720"
  },
  {
    "text": "implement them um via limit range it's a standard kubernetes uh construct which you can",
    "start": "414720",
    "end": "420240"
  },
  {
    "text": "use here and essentially it's a mutating admission controller which is going to apply these defaults to all parts who do",
    "start": "420240",
    "end": "427680"
  },
  {
    "text": "not specify cpu and memory limits test it out with various workloads of your",
    "start": "427680",
    "end": "432800"
  },
  {
    "text": "engineers and you know find the smart defaults for your organization",
    "start": "432800",
    "end": "437840"
  },
  {
    "text": "network policies you definitely want to have in place as well because you don't want some you know network traffic go",
    "start": "438000",
    "end": "443520"
  },
  {
    "text": "all across your cluster here so probably you want to apply like the default deny all policy",
    "start": "443520",
    "end": "450400"
  },
  {
    "text": "but then you want to open up certain things definitely you want the user to be able to communicate within their",
    "start": "450400",
    "end": "456319"
  },
  {
    "text": "namespace right certain ports within a namespace service should be able to interact with each other",
    "start": "456319",
    "end": "461599"
  },
  {
    "text": "you wanna probably for a lot of containers or a lot of namespaces you can do this with labels for example",
    "start": "461599",
    "end": "468400"
  },
  {
    "text": "allow them to you know connect with the internet and don't forget about dns as well",
    "start": "468400",
    "end": "475440"
  },
  {
    "text": "usually you want them to connect to your cluster internal dns but you can also you know let them use any outside um",
    "start": "475440",
    "end": "481199"
  },
  {
    "text": "dns service as well the third learning is essentially automate as much as possible and it",
    "start": "481199",
    "end": "487440"
  },
  {
    "start": "482000",
    "end": "622000"
  },
  {
    "text": "applies to everything i was just talking about and additionally to you know our back and everything related to that create",
    "start": "487440",
    "end": "494080"
  },
  {
    "text": "templates essentially for anything you might want to use open",
    "start": "494080",
    "end": "499360"
  },
  {
    "text": "policy agent which is also a cncf project for dynamic admission",
    "start": "499360",
    "end": "504840"
  },
  {
    "text": "control because there are certain things you can't enforce with standard kubernetes rules but opec can do them for you very",
    "start": "504840",
    "end": "511360"
  },
  {
    "text": "easily so for example host name validation for your ingress resource you don't want",
    "start": "511360",
    "end": "517518"
  },
  {
    "text": "colliding host names and having your ingress controls are kind of like you know do some kind of",
    "start": "517519",
    "end": "522640"
  },
  {
    "text": "load balancing between different uh tenant applications you want each tenant or each namespace or whatever",
    "start": "522640",
    "end": "529200"
  },
  {
    "text": "you define a single unit here to have a certain set of you know",
    "start": "529200",
    "end": "535120"
  },
  {
    "text": "subdomains or whatever that they can use and they should follow a certain pattern right so you could have like a suffix or a",
    "start": "535120",
    "end": "542720"
  },
  {
    "text": "subdomain of that includes right the tenant's name or the namespace name or things like",
    "start": "542720",
    "end": "549040"
  },
  {
    "text": "that right and oppa can really check this and you know essentially",
    "start": "549040",
    "end": "554480"
  },
  {
    "text": "reject anything that doesn't follow this pattern when someone's creating an ingress it's",
    "start": "554480",
    "end": "559680"
  },
  {
    "text": "pretty easy to implement that um additionally you can use the same hostname validation for the certificate",
    "start": "559680",
    "end": "565600"
  },
  {
    "text": "resource uh if you're using things like cert manager uh so that you know your let's encrypt",
    "start": "565600",
    "end": "572560"
  },
  {
    "text": "account doesn't you know provision a lot of names a lot of host names which aren't actually",
    "start": "572560",
    "end": "578160"
  },
  {
    "text": "being used in your system and then you might want to restrict certain storage and network related",
    "start": "578160",
    "end": "583600"
  },
  {
    "text": "configurations you might not want you know every user to provision",
    "start": "583600",
    "end": "588959"
  },
  {
    "text": "load balancers in your aws account you might want to you know set some restrictions there",
    "start": "588959",
    "end": "594320"
  },
  {
    "text": "because you may want to provide some certain you know cluster wide services so that not everybody needs to install",
    "start": "594320",
    "end": "600000"
  },
  {
    "text": "their own ingress controller search manager etc provide these services and automate them as much as possible for yourself",
    "start": "600000",
    "end": "606160"
  },
  {
    "text": "if you're setting up new clusters you can use terraform for that or you know just a simple you know helm",
    "start": "606160",
    "end": "612640"
  },
  {
    "text": "chart which you have you know helm dependencies to nginx",
    "start": "612640",
    "end": "617680"
  },
  {
    "text": "ingress controller insert manager things like that and really bundle your configuration there",
    "start": "617680",
    "end": "623920"
  },
  {
    "start": "622000",
    "end": "820000"
  },
  {
    "text": "and related to that i would really recommend to store everything in kubernetes so i would have",
    "start": "623920",
    "end": "629360"
  },
  {
    "text": "no state outside of kubernetes so no like database where you keep track track of",
    "start": "629360",
    "end": "634480"
  },
  {
    "text": "certain relationships etc and potentially you want to also store things in git",
    "start": "634480",
    "end": "639519"
  },
  {
    "text": "so use kubernetes related uh kubernetes native resources like you know annotations labels secrets all",
    "start": "639519",
    "end": "646399"
  },
  {
    "text": "these constructs are really great to store information about owners and tenants uh",
    "start": "646399",
    "end": "651600"
  },
  {
    "text": "what they can do within the system um and the great part about this is you can",
    "start": "651600",
    "end": "657200"
  },
  {
    "text": "also use getups now to kind of manage the state of your platform that means you get a free audit log via",
    "start": "657200",
    "end": "663040"
  },
  {
    "text": "the commits you can roll back very very easily you have an automated approval process",
    "start": "663040",
    "end": "670320"
  },
  {
    "text": "right that's really great so let's say you set up a very easy system for provisioning namespaces and the easiest system is to have",
    "start": "670320",
    "end": "676880"
  },
  {
    "text": "something like flux you know running in your kubernetes cluster and it essentially pulls the",
    "start": "676880",
    "end": "682880"
  },
  {
    "text": "state of your git repository and applies it to your kubernetes clusters",
    "start": "682880",
    "end": "688720"
  },
  {
    "text": "that means you could for example tell the user hey if you need a new namespace create a pull request",
    "start": "688720",
    "end": "694880"
  },
  {
    "text": "and we're going to approve that for you and you know certain limits for your um for this",
    "start": "694880",
    "end": "701360"
  },
  {
    "text": "namespace or whatever could be you know annotated or they could be labeled so that could be in a config map",
    "start": "701360",
    "end": "706640"
  },
  {
    "text": "that the user also needs to add to this pull request and then you can use all git based features for a very easy",
    "start": "706640",
    "end": "713120"
  },
  {
    "text": "approval process with all the power that you know gitlab github etc provide for you this is great for uh",
    "start": "713120",
    "end": "720000"
  },
  {
    "text": "you know keeping track of your platform state but it's not so great to keep track of your user workloads right",
    "start": "720000",
    "end": "726560"
  },
  {
    "text": "i would argue that engineering teams should have direct access to kubernetes rather than having to",
    "start": "726560",
    "end": "732079"
  },
  {
    "text": "go through you know ci cd um you know github system or whatever to",
    "start": "732079",
    "end": "737519"
  },
  {
    "text": "deploy something to kubernetes if they see some tutorial out there to install a hand chart that they might need for their you know",
    "start": "737519",
    "end": "744079"
  },
  {
    "text": "day-to-day work and want to try it out right they should be able to follow that tutorial and not have to",
    "start": "744079",
    "end": "749680"
  },
  {
    "text": "you know add that to a different workflow etc which makes it just more complicated so keep your platform state and getups",
    "start": "749680",
    "end": "756320"
  },
  {
    "text": "but that doesn't necessarily mean you also need to keep your user workflows and and everything that's",
    "start": "756320",
    "end": "761920"
  },
  {
    "text": "related uh you know to their work into uh into git as well",
    "start": "761920",
    "end": "767760"
  },
  {
    "text": "and if you want even more control uh over what's happening in your cluster you can always write a controller uh introduce crds",
    "start": "767760",
    "end": "775120"
  },
  {
    "text": "custom resource definitions and kind of extend kubernetes tell kubernetes you know this is a tenant for",
    "start": "775120",
    "end": "780720"
  },
  {
    "text": "us for example right and those are the tenant limits uh that could be objects in your",
    "start": "780720",
    "end": "785760"
  },
  {
    "text": "platform that you're creating and if you're going extra fancy you can even write an api server extension",
    "start": "785760",
    "end": "791760"
  },
  {
    "text": "to um solve the list problem the list problem essentially means you can set r back to get users to",
    "start": "791760",
    "end": "798800"
  },
  {
    "text": "perform cube ctl get on their namespaces right but they have to provide the name of the",
    "start": "798800",
    "end": "804240"
  },
  {
    "text": "namespace if they want to run cubectl list namespaces it's either all",
    "start": "804240",
    "end": "809440"
  },
  {
    "text": "or nothing right they can either get access to all namespaces and list all of them",
    "start": "809440",
    "end": "814480"
  },
  {
    "text": "or none of them right you can solve that by an api server extension and essentially filter",
    "start": "814480",
    "end": "821440"
  },
  {
    "start": "820000",
    "end": "976000"
  },
  {
    "text": "the namespaces that the tenant has and one project i was mentioning earlier that i've been working on for",
    "start": "821440",
    "end": "827199"
  },
  {
    "text": "a couple months now i think we open sourced it in february uh is kiosk kios is an extension for",
    "start": "827199",
    "end": "833680"
  },
  {
    "text": "kubernetes uh provides an api server extension and several crds",
    "start": "833680",
    "end": "839680"
  },
  {
    "text": "for multi-tenant kubernetes clusters if you go to kiosk.sh",
    "start": "839680",
    "end": "845760"
  },
  {
    "text": "you'll be redirected to the github repository and the readme contains a lot of you know walkthroughs and",
    "start": "845760",
    "end": "852480"
  },
  {
    "text": "explanations about how to configure keyers and how to set it up in your cluster is essentially as easy as installing",
    "start": "852480",
    "end": "857760"
  },
  {
    "text": "help chart and then you have like a tiny controller running in your system uh as well as this api server extension",
    "start": "857760",
    "end": "864880"
  },
  {
    "text": "and then you have resources available that users can work with or that you can use to start building a",
    "start": "864880",
    "end": "871040"
  },
  {
    "text": "multi-tenant kubernetes platform so one of these resources that solves the list problem is space for",
    "start": "871040",
    "end": "877120"
  },
  {
    "text": "example right space is entirely virtual it's not a crd it's not persisted in that way it's an extension of the",
    "start": "877120",
    "end": "885040"
  },
  {
    "text": "kubernetes api server and if the user runs cubectl",
    "start": "885040",
    "end": "890560"
  },
  {
    "text": "getspaces right they essentially only get those names list spaces sorry they essentially",
    "start": "890560",
    "end": "896480"
  },
  {
    "text": "only see those namespaces that actually have access to vr back right so where they essentially",
    "start": "896480",
    "end": "903040"
  },
  {
    "text": "have the permission to read pods or whatever you configure in kiosk um here's also those templates",
    "start": "903040",
    "end": "910000"
  },
  {
    "text": "you can use those templates essentially to tell kids hey uh when someone when one of our tenants",
    "start": "910000",
    "end": "916160"
  },
  {
    "text": "creates a space cube ctl you know create space essentially um apply certain templates to it and",
    "start": "916160",
    "end": "923360"
  },
  {
    "text": "that can be you know outbreak rules network policies limit ranges whatever you may need for",
    "start": "923360",
    "end": "928560"
  },
  {
    "text": "your multi-tenant kubernetes cluster is great because kiosk does it automatically for you",
    "start": "928560",
    "end": "934480"
  },
  {
    "text": "obviously if you're going with the git ups approach you might not want to have templates",
    "start": "934480",
    "end": "940000"
  },
  {
    "text": "instead rather force the user to include that in the pull request but either way it's going to achieve the",
    "start": "940000",
    "end": "945279"
  },
  {
    "text": "same state and then there's essentially the",
    "start": "945279",
    "end": "951519"
  },
  {
    "text": "definition of a tenant which key is called account and you can set certain account quotas",
    "start": "951519",
    "end": "957120"
  },
  {
    "text": "which essentially limit an account and if you want to learn more about kiosk uh reach out to this guy",
    "start": "957120",
    "end": "963759"
  },
  {
    "text": "fabian is a kiosk maintainer and really the brain behind all of this",
    "start": "963759",
    "end": "969199"
  },
  {
    "text": "um we launched the project together but if you really want to you know dig into the details you should",
    "start": "969199",
    "end": "974880"
  },
  {
    "text": "definitely talk to him and uh if we're looking at the workflow in kiosks there's essentially two",
    "start": "974880",
    "end": "981040"
  },
  {
    "start": "976000",
    "end": "1040000"
  },
  {
    "text": "persona right there's uh you as a cluster admin uh and then there's the account users",
    "start": "981040",
    "end": "987440"
  },
  {
    "text": "which can be a regular kubernetes user or a kubernetes group or a service account right",
    "start": "987440",
    "end": "992959"
  },
  {
    "text": "um and you essentially define and manage accounts and account quotas",
    "start": "992959",
    "end": "998399"
  },
  {
    "text": "as well as the templates right and then users uh use their account to create spaces and when they create a",
    "start": "998399",
    "end": "1005759"
  },
  {
    "text": "space uh they essentially you know define in the spec um that it belongs to this account and then",
    "start": "1005759",
    "end": "1014000"
  },
  {
    "text": "when they do that the admission controller will essentially check you know hey the api server extension sorry will",
    "start": "1014000",
    "end": "1019279"
  },
  {
    "text": "actually check um you know is this subject or service account who is however doing the cube",
    "start": "1019279",
    "end": "1024720"
  },
  {
    "text": "ctl request uh who is it is that person actually that user actually part of this account",
    "start": "1024720",
    "end": "1030959"
  },
  {
    "text": "will i allow this right and if the space is being created it will create the underlying namespace",
    "start": "1030959",
    "end": "1036079"
  },
  {
    "text": "and force the templates that you and have enforced for this account right",
    "start": "1036079",
    "end": "1042000"
  },
  {
    "start": "1040000",
    "end": "1153000"
  },
  {
    "text": "so now we got like kind of the basic setup regarding authentication we automated a lot of things we restricted",
    "start": "1043600",
    "end": "1049520"
  },
  {
    "text": "our users um and we might even use kiosk you know kind of to get this you know kind of structure for for our",
    "start": "1049520",
    "end": "1056640"
  },
  {
    "text": "multi-tenant kubernetes platform the next part is really about um how users interact with the system i would",
    "start": "1056640",
    "end": "1063440"
  },
  {
    "text": "argue do not hide kubernetes but try to make it as easy as possible for users to use",
    "start": "1063440",
    "end": "1071039"
  },
  {
    "text": "so engineers actually need access to kubernetes so they need to run cube ctl commands et cetera because they want to",
    "start": "1071039",
    "end": "1077280"
  },
  {
    "text": "you know verify new features very very fast i don't want to have to go through the full ci cd cycle just you know when",
    "start": "1077280",
    "end": "1084160"
  },
  {
    "text": "they see something that they might need some chart some hand chart they want to install um or if they want to just test a new",
    "start": "1084160",
    "end": "1090799"
  },
  {
    "text": "feature very quickly they want to do those things pre-commit right and they want to debug the container",
    "start": "1090799",
    "end": "1096400"
  },
  {
    "text": "startup inspect the state of the applications attach debuggers and trace requests",
    "start": "1096400",
    "end": "1101440"
  },
  {
    "text": "between several microsofts that they might be working on but i would also argue cube ctl is not",
    "start": "1101440",
    "end": "1108799"
  },
  {
    "text": "it's just an api client it's not really a developer tool right so you should tell your engineers",
    "start": "1108799",
    "end": "1114160"
  },
  {
    "text": "uh hey use cube ctl you have the full power you can also use helm or any other kubernetes tooling",
    "start": "1114160",
    "end": "1119919"
  },
  {
    "text": "um and leave up the workflow and tooling to them but i would definitely recommend as",
    "start": "1119919",
    "end": "1125360"
  },
  {
    "text": "you're more of a kubernetes expert than most of your engineers will be to raise and really awareness for open",
    "start": "1125360",
    "end": "1132080"
  },
  {
    "text": "source tools which are which are out there you can vet them with your engineers and essentially you know give them a list and say hey",
    "start": "1132080",
    "end": "1138320"
  },
  {
    "text": "here i found all these tools that that work really great um i would recommend you take a look at",
    "start": "1138320",
    "end": "1143760"
  },
  {
    "text": "them i'm just going to name a couple down here scaffold desk-based tilt telepresence",
    "start": "1143760",
    "end": "1149280"
  },
  {
    "text": "um they're all pretty similar but there are two distinct differences so telepresence",
    "start": "1149280",
    "end": "1154799"
  },
  {
    "start": "1153000",
    "end": "1220000"
  },
  {
    "text": "is the bit older tool which essentially you know assumes you want to work on a couple of microservices",
    "start": "1154799",
    "end": "1160960"
  },
  {
    "text": "the one that you actually want to work on should run on your local machine everything else is being deployed to your kubernetes cluster",
    "start": "1160960",
    "end": "1167360"
  },
  {
    "text": "and what they do then is they start like a two-way proxy between the local cli and a telepresence part",
    "start": "1167360",
    "end": "1174960"
  },
  {
    "text": "that runs inside your cluster then you can with the cli also mount you",
    "start": "1174960",
    "end": "1180000"
  },
  {
    "text": "know this network this network proxy and you know volumes even from the cluster and things",
    "start": "1180000",
    "end": "1185760"
  },
  {
    "text": "like that um so that your local service uh kind of feels like it's running inside kubernetes although it's running",
    "start": "1185760",
    "end": "1191280"
  },
  {
    "text": "on your local machine um that has certain drawbacks but has a big advantage that uh it",
    "start": "1191280",
    "end": "1199120"
  },
  {
    "text": "feels from a developer perspective i mean everything's running locally that you're working on that feels really great um but it's kind of bad on windows still",
    "start": "1199120",
    "end": "1207919"
  },
  {
    "text": "uh the network can get pretty slow uh if you are always doing this proxy network really depends on your internet connection",
    "start": "1207919",
    "end": "1214720"
  },
  {
    "text": "and you might have issues with volume mounts but generally i would really recommend to check out telepresence the other tools pretty much",
    "start": "1214720",
    "end": "1222240"
  },
  {
    "start": "1220000",
    "end": "1287000"
  },
  {
    "text": "follow this workflow that means the developer uses a cli tool to run a local kind of cicd pipeline",
    "start": "1222240",
    "end": "1228640"
  },
  {
    "text": "that you know builds images tags and push them to registry starts port forwarding um and uh you",
    "start": "1228640",
    "end": "1235919"
  },
  {
    "text": "know to the to everything that has been deployed to the cluster and here everything gets deployed to the cluster",
    "start": "1235919",
    "end": "1241360"
  },
  {
    "text": "um so unlike telepresence where one service runs locally everything runs in kubernetes now",
    "start": "1241360",
    "end": "1246400"
  },
  {
    "text": "um and to get this hot reloading experience so that the developer can still code with their ide and you know save a file and see the",
    "start": "1246400",
    "end": "1252720"
  },
  {
    "text": "changes um they typically tend to have a file sync which synchronizes files",
    "start": "1252720",
    "end": "1257840"
  },
  {
    "text": "from the local file system to the container file system and then you the only thing you have to do is you know install",
    "start": "1257840",
    "end": "1263679"
  },
  {
    "text": "for development a special docker file for example with uh which adds a hot reloading tool",
    "start": "1263679",
    "end": "1269520"
  },
  {
    "text": "inside the container and maybe remote debugger things like that um might be a bit you know uh",
    "start": "1269520",
    "end": "1276000"
  },
  {
    "text": "might take a while to get used to this you know the engineer needs to play around with this in like 10 minutes",
    "start": "1276000",
    "end": "1281360"
  },
  {
    "text": "but it's definitely easier in the long run um than maybe the network complexity of telepresence",
    "start": "1281360",
    "end": "1288000"
  },
  {
    "start": "1287000",
    "end": "1422000"
  },
  {
    "text": "let's get to learning number six when your platform is actually up and running um you should really care about cost as",
    "start": "1288000",
    "end": "1294480"
  },
  {
    "text": "well for the sake of your organization and really shut down idle workloads so the first thing you want to do is",
    "start": "1294480",
    "end": "1300480"
  },
  {
    "text": "enable auto scaling whenever possible if your pub cloud that should be pretty easy if you've",
    "start": "1300480",
    "end": "1306320"
  },
  {
    "text": "done a great job with your platform and your x is great and engineers are actually using it",
    "start": "1306320",
    "end": "1311360"
  },
  {
    "text": "they'll be really quick to spin up and deploy a lot of things right",
    "start": "1311360",
    "end": "1316480"
  },
  {
    "text": "but they'll be terrible at turning things off so you should really try to automate the",
    "start": "1316480",
    "end": "1322240"
  },
  {
    "text": "shutdown of idle namespace of idle workloads in general so i'm just",
    "start": "1322240",
    "end": "1327520"
  },
  {
    "text": "going to recommend a couple of tools there's a fairly new tool called cluster turndown uh by a startup called cubecost",
    "start": "1327520",
    "end": "1334480"
  },
  {
    "text": "which you can use to set up a fixed schedule when you turn down your ek eks or gke clusters",
    "start": "1334480",
    "end": "1341679"
  },
  {
    "text": "so you can essentially say hey at you know 8 p.m turn everything off right scale it",
    "start": "1341679",
    "end": "1347919"
  },
  {
    "text": "down to zero kill all the notes right that's pretty pretty hard",
    "start": "1347919",
    "end": "1352960"
  },
  {
    "text": "um but obviously uh it's doing the job in terms of saving cost right and then in the",
    "start": "1352960",
    "end": "1358480"
  },
  {
    "text": "morning spin up everything again um obviously you have to you kind of adapt to the schedule of your engineers",
    "start": "1358480",
    "end": "1364640"
  },
  {
    "text": "here um if you're based on openshift you can use idling and openshift",
    "start": "1364640",
    "end": "1371440"
  },
  {
    "text": "which is essentially network based shutdown so if openshift doesn't detect",
    "start": "1371440",
    "end": "1377520"
  },
  {
    "text": "any network requests for a while it can you know scale down replica sets automatically to zero and then engineers can just you",
    "start": "1377520",
    "end": "1385760"
  },
  {
    "text": "know turn up the replica sets again and in loft which i'm currently working on",
    "start": "1385760",
    "end": "1392960"
  },
  {
    "text": "um you have a feature called sleep mode uh where you can essentially",
    "start": "1392960",
    "end": "1398320"
  },
  {
    "text": "make that decision not on pure network traffic but on api server requests so you can tell loft",
    "start": "1398320",
    "end": "1403919"
  },
  {
    "text": "hey if the engineer hasn't done any requests to a specific namespace",
    "start": "1403919",
    "end": "1409440"
  },
  {
    "text": "in the past 20 minutes shut it down right shut down all the replica sets or turn",
    "start": "1409440",
    "end": "1414720"
  },
  {
    "text": "the replica sets to zero and as soon as the first api server request comes in uh reset the replica",
    "start": "1414720",
    "end": "1420480"
  },
  {
    "text": "sets to whatever they were beforehand and then last but not least learning",
    "start": "1420480",
    "end": "1426720"
  },
  {
    "start": "1422000",
    "end": "1543000"
  },
  {
    "text": "number seven is sometimes users just need more than a namespace right i was talking earlier about single",
    "start": "1426720",
    "end": "1432159"
  },
  {
    "text": "tenant clusters versus multi-tenant clusters if you have a single tenant cluster that's great uh you essentially become the admin of",
    "start": "1432159",
    "end": "1439200"
  },
  {
    "text": "the cluster uh as a user you can do anything set up our back you know a lot of helm charts need you to you",
    "start": "1439200",
    "end": "1446000"
  },
  {
    "text": "know set up certain object rules you might not want your users to do that in a multi-tenant kubernetes cluster",
    "start": "1446000",
    "end": "1451600"
  },
  {
    "text": "so namespaces have certain limitations what's with you know custom resource",
    "start": "1451600",
    "end": "1457520"
  },
  {
    "text": "definitions will you be able to let your users install crds probably you don't want to do that right",
    "start": "1457520",
    "end": "1464000"
  },
  {
    "text": "um yeah hand charts use certain object permissions what if your users want to",
    "start": "1464000",
    "end": "1469520"
  },
  {
    "text": "enable certain kubernetes alpha or beta features or on a different kubernetes version",
    "start": "1469520",
    "end": "1476320"
  },
  {
    "text": "you know you can't do that with namespaces but you can with a construct called virtual clusters",
    "start": "1476320",
    "end": "1482400"
  },
  {
    "text": "and virtual clusters are really kind of kubernetes classes that run inside another kubernetes cluster within",
    "start": "1482400",
    "end": "1490159"
  },
  {
    "text": "a namespace right um so if you let users provision those they really unlock access to",
    "start": "1490159",
    "end": "1496400"
  },
  {
    "text": "cluster-wide settings for those users they can do whatever they want with their virtual cluster",
    "start": "1496400",
    "end": "1501760"
  },
  {
    "text": "they provide better isolation than namespaces because they host a separate kubernetes control plane right there's a separate",
    "start": "1501760",
    "end": "1508080"
  },
  {
    "text": "api server which is also great from isolation security and stability perspective",
    "start": "1508080",
    "end": "1514640"
  },
  {
    "text": "and then additionally because they're not true isolated single tenant kubernetes",
    "start": "1515120",
    "end": "1520159"
  },
  {
    "text": "clusters they're virtual clusters running in the same host cluster you can also do kind of like a sharing",
    "start": "1520159",
    "end": "1526880"
  },
  {
    "text": "of resources that run in the host cluster for example services like nginx cert manager right you just need",
    "start": "1526880",
    "end": "1533840"
  },
  {
    "text": "to run them once and you can kind of hook up the virtual cluster to those host services as well",
    "start": "1533840",
    "end": "1539760"
  },
  {
    "text": "which provides similar efficiency as namespaces if you want to learn more about virtual",
    "start": "1539760",
    "end": "1547600"
  },
  {
    "start": "1543000",
    "end": "1605000"
  },
  {
    "text": "clusters you can either check out what the multi-tenancy sig is working on",
    "start": "1547600",
    "end": "1554400"
  },
  {
    "text": "or you check out uh what we've released uh just like a couple of weeks ago um on",
    "start": "1554400",
    "end": "1560640"
  },
  {
    "text": "github.com loft dash sh virtual dash cluster",
    "start": "1560640",
    "end": "1565679"
  },
  {
    "text": "which is essentially an implementation of a virtual cluster that means we're starting like a k3s",
    "start": "1565679",
    "end": "1572480"
  },
  {
    "text": "cluster within one of your namespaces uh and then have like a syncer which syncs certain resources to the host cluster",
    "start": "1572480",
    "end": "1579120"
  },
  {
    "text": "right to actually you know start pots and containers etc but you have like entirely the logic",
    "start": "1579120",
    "end": "1585840"
  },
  {
    "text": "outback etc encapsulated into one named space that is hosting the k3s cluster",
    "start": "1585840",
    "end": "1591840"
  },
  {
    "text": "um so i encourage you to check that out if you are kind of hitting the limitations of namespaces but that's",
    "start": "1591840",
    "end": "1596960"
  },
  {
    "text": "pretty far down the road um and i'm sure you'll be busy uh with you know the first six learnings uh so",
    "start": "1596960",
    "end": "1604080"
  },
  {
    "text": "far uh just to recap uh here are all the learnings uh that you know kind of i took from",
    "start": "1604080",
    "end": "1612400"
  },
  {
    "start": "1605000",
    "end": "1645000"
  },
  {
    "text": "creating you know several you know implementations of different sizes of companies uh that wanted to host",
    "start": "1612400",
    "end": "1619360"
  },
  {
    "text": "multi-tenant kubernetes clusters and uh if you want to dig into uh one of these topics",
    "start": "1619360",
    "end": "1625279"
  },
  {
    "text": "like in more detail um just head over to uh one of these links i'm attaching",
    "start": "1625279",
    "end": "1630799"
  },
  {
    "text": "to the presentation there was a really great talk of james wen and engineering spotify at last kubecon and there's",
    "start": "1630799",
    "end": "1636480"
  },
  {
    "text": "a lot of great articles out there and i really urge you to also check out what the sick multi-tenancy is",
    "start": "1636480",
    "end": "1642559"
  },
  {
    "text": "working on and if you have any particular questions uh you know to kiosk whatever i'm",
    "start": "1642559",
    "end": "1650000"
  },
  {
    "start": "1645000",
    "end": "2087000"
  },
  {
    "text": "working on or to any of these learnings don't hesitate to reach out to me and i'm also going to",
    "start": "1650000",
    "end": "1656880"
  },
  {
    "text": "be available for q a and i think we have about like another five or six minutes",
    "start": "1656880",
    "end": "1662720"
  },
  {
    "text": "for this so if you have any questions feel free to ask them right now thanks for your time",
    "start": "1662720",
    "end": "1669840"
  },
  {
    "text": "all right so that was the main presentation i'm happy to answer our questions so if you have any",
    "start": "1674080",
    "end": "1679600"
  },
  {
    "text": "questions feel free to open the q a bottom uh button on the bottom",
    "start": "1679600",
    "end": "1685279"
  },
  {
    "text": "uh and just type in your question uh we already have a couple of questions that came in a few minutes ago um i'm just going",
    "start": "1685279",
    "end": "1692720"
  },
  {
    "text": "to read them out loud and try to answer them uh in the in the remaining you know five or six minutes that we have left",
    "start": "1692720",
    "end": "1699360"
  },
  {
    "text": "um the first one is uh what do you think about using oppar um and check config maps of",
    "start": "1699360",
    "end": "1705840"
  },
  {
    "text": "that um do you see some bottlenecks here um so a lot of companies that my team and i",
    "start": "1705840",
    "end": "1712799"
  },
  {
    "text": "have been working with are actually using oper it's a really great uh project really allows you uh to add",
    "start": "1712799",
    "end": "1719840"
  },
  {
    "text": "additional you know really flexible security rules your multi-tenant cluster so i definitely recommend to check out",
    "start": "1719840",
    "end": "1726720"
  },
  {
    "text": "oprah is super super useful for multi-tenant clusters um",
    "start": "1726720",
    "end": "1733440"
  },
  {
    "text": "does kiosk have a graphical user interface kiosk as an open source project is kind",
    "start": "1733440",
    "end": "1739200"
  },
  {
    "text": "of like a basic building block to create soft multi-tenancy in kubernetes so it teaches kubernetes certain",
    "start": "1739200",
    "end": "1744880"
  },
  {
    "text": "you know crds that are required like what is a tenant you know what is a account what is a space uh things like",
    "start": "1744880",
    "end": "1751279"
  },
  {
    "text": "that but it doesn't have a gui um so if you need something on top of that",
    "start": "1751279",
    "end": "1756720"
  },
  {
    "text": "uh you can obviously uh build that you know just using uh cube context um if you're using",
    "start": "1756720",
    "end": "1763520"
  },
  {
    "text": "uh loft uh the project that i'm working on right now uh it's using kiosk internally",
    "start": "1763520",
    "end": "1769520"
  },
  {
    "text": "so whenever you connect the cluster uh installs kiosk and uh loft chips with",
    "start": "1769520",
    "end": "1774559"
  },
  {
    "text": "a graphical user interface uh so if you're interested in that uh just install the hand chart and try it",
    "start": "1774559",
    "end": "1780640"
  },
  {
    "text": "out um what is your uh experience",
    "start": "1780640",
    "end": "1785760"
  },
  {
    "text": "uh suggestions regarding the usage of crds in a platform as a service based on",
    "start": "1785760",
    "end": "1792559"
  },
  {
    "text": "managed kubernetes clusters um and then the person asking these",
    "start": "1792559",
    "end": "1798320"
  },
  {
    "text": "questions is referring to issues uh with the cluster white scope of crds uh yeah that's what i mentioned uh at",
    "start": "1798320",
    "end": "1805600"
  },
  {
    "text": "the end of the talk essentially so name spaces are kind of like a basic unit",
    "start": "1805600",
    "end": "1811520"
  },
  {
    "text": "of uh you know sharing multi-tenant clusters um and namespace",
    "start": "1811520",
    "end": "1818399"
  },
  {
    "text": "have certain limitations because obviously you don't want users to install c ids on a cluster-wide level",
    "start": "1818399",
    "end": "1823440"
  },
  {
    "text": "after you set up you know arbit etc to restrict them to a certain namespace",
    "start": "1823440",
    "end": "1828480"
  },
  {
    "text": "um so virtual clusters is really something you should look into if you want your users to",
    "start": "1828480",
    "end": "1834799"
  },
  {
    "text": "actually work with c or ds because in virtual clusters users can essentially create cluster wide cluster scope resources",
    "start": "1834799",
    "end": "1843360"
  },
  {
    "text": "um which which can be super helpful uh for soft multi-tenancy recorders you",
    "start": "1843360",
    "end": "1848960"
  },
  {
    "text": "know so users to to deal with orbit rules uh install things like controllers",
    "start": "1848960",
    "end": "1855039"
  },
  {
    "text": "and crds uh even if your users are developing controllers right that is definitely something to look",
    "start": "1855039",
    "end": "1861200"
  },
  {
    "text": "into um the next question solutions like virtual cluster and kiosks seem",
    "start": "1861200",
    "end": "1868080"
  },
  {
    "text": "like a very nice approach towards multi-tenancy um would you classify these under soft",
    "start": "1868080",
    "end": "1874159"
  },
  {
    "text": "or hard multi-tenancy and what is the road map towards",
    "start": "1874159",
    "end": "1879200"
  },
  {
    "text": "a version one uh production ready version um so definitely a soft multi-tenancy if",
    "start": "1879200",
    "end": "1885840"
  },
  {
    "text": "you want hard multi tenancy you need to look into uh you know like really making sure that",
    "start": "1885840",
    "end": "1890880"
  },
  {
    "text": "users are not sharing the same kernel things like that uh or that they you know there's like um",
    "start": "1890880",
    "end": "1897039"
  },
  {
    "text": "virtual cubelet things like that where essentially your containers end up on different uh vms right things like things like",
    "start": "1897039",
    "end": "1903200"
  },
  {
    "text": "that are definitely uh more towards heart multi-tenancy pressure cluster and kiosk",
    "start": "1903200",
    "end": "1909039"
  },
  {
    "text": "is really for soft multi-tenancy if your engineering teams are supposed to share",
    "start": "1909039",
    "end": "1914880"
  },
  {
    "text": "the same kubernetes clusters um regarding production readiness uh both peers as",
    "start": "1914880",
    "end": "1922000"
  },
  {
    "text": "well as virtual cluster uh have been used by a variety of of companies of different sizes from small",
    "start": "1922000",
    "end": "1928240"
  },
  {
    "text": "companies of just like you know 10 engineers sharing a cluster up to 100 engineers you know sharing a",
    "start": "1928240",
    "end": "1934640"
  },
  {
    "text": "cluster um obviously uh they're pretty young technologies so there's not companies out there using it uh with like",
    "start": "1934640",
    "end": "1940880"
  },
  {
    "text": "uh ten thousand engineers working in the same cluster uh but i actually think that would probably",
    "start": "1940880",
    "end": "1946000"
  },
  {
    "text": "not make a lot of sense for for companies because you might want to you know split up things uh on in",
    "start": "1946000",
    "end": "1951679"
  },
  {
    "text": "different geographical locations etc i don't think you want your european engineers working the same cluster as",
    "start": "1951679",
    "end": "1957679"
  },
  {
    "text": "uh the ones in north america for example right so you're to have several clusters that you share um and then",
    "start": "1957679",
    "end": "1965679"
  },
  {
    "text": "you know 50 100 engineers maybe 200 engineers may share a cluster but probably not 10 000.",
    "start": "1965679",
    "end": "1971440"
  },
  {
    "text": "um however as i said both projects have been used in",
    "start": "1971440",
    "end": "1976640"
  },
  {
    "text": "production if i may call it that way for the development use case uh we're also evaluating both",
    "start": "1976640",
    "end": "1982240"
  },
  {
    "text": "technologies for actually production workloads um but if that's something we can you",
    "start": "1982240",
    "end": "1987519"
  },
  {
    "text": "know talk about in the slack channel so feel free to ask any questions uh there as well might not be able to to",
    "start": "1987519",
    "end": "1994640"
  },
  {
    "text": "answer all the questions here um maybe one last question uh sometimes i feel the",
    "start": "1994640",
    "end": "2000720"
  },
  {
    "text": "need for nested namespaces or grouping multiple namespaces into one logical bigger namespace into",
    "start": "2000720",
    "end": "2006880"
  },
  {
    "text": "one logical bigger namespace is that something you consider useful for multi-tenancy definitely i",
    "start": "2006880",
    "end": "2013840"
  },
  {
    "text": "mean the multi-tenancy groups working on something like that i also believe that google has shipped",
    "start": "2013840",
    "end": "2020480"
  },
  {
    "text": "something similar for gke right now where you can you know essentially build these hierarchical name spaces",
    "start": "2020480",
    "end": "2027679"
  },
  {
    "text": "however i think you know virtual clusters offers more possibilities than just nesting",
    "start": "2027679",
    "end": "2033760"
  },
  {
    "text": "namespaces essentially um but in the end it does the same thing so in the end",
    "start": "2033760",
    "end": "2039519"
  },
  {
    "text": "everything you do creating you know name space in your virtual cluster are actually gonna end up",
    "start": "2039519",
    "end": "2045120"
  },
  {
    "text": "in the same name space on your on your host cluster right so you're",
    "start": "2045120",
    "end": "2050878"
  },
  {
    "text": "achieving a similar goal but with a different layer of abstraction and maybe more you know freedom and",
    "start": "2050879",
    "end": "2056638"
  },
  {
    "text": "flexibility for your users and uh as we only have like a couple of seconds left uh",
    "start": "2056639",
    "end": "2062638"
  },
  {
    "text": "to to end this session i just wanna take the time to thank you all for for listening uh and",
    "start": "2062639",
    "end": "2069200"
  },
  {
    "text": "watching uh the video online and uh the slides will be online um i think on the scheduling",
    "start": "2069200",
    "end": "2076000"
  },
  {
    "text": "website i can also post them in a slack channel again and if you have any questions feel free to reach out anytime",
    "start": "2076000",
    "end": "2082320"
  },
  {
    "text": "have fun and enjoy the rest of the conference and thank you for tuning in",
    "start": "2082320",
    "end": "2089280"
  }
]