[
  {
    "start": "0",
    "end": "202000"
  },
  {
    "text": "um if you are ready to start getting your setup going there's a link here you can use that will get you both the",
    "start": "30",
    "end": "5640"
  },
  {
    "text": "slides and a document to help getting started so if you've got some time you can start",
    "start": "5640",
    "end": "11130"
  },
  {
    "text": "working your way through that get a little head mini cube should that work",
    "start": "11130",
    "end": "28490"
  },
  {
    "text": "and we need at least 115 so if scissors yeah I think it should work yeah",
    "start": "28490",
    "end": "37879"
  },
  {
    "text": "1.15 or 1.16 or what we're going to be using we've got everything you need to",
    "start": "55670",
    "end": "62339"
  },
  {
    "text": "use either",
    "start": "62339",
    "end": "64609"
  },
  {
    "text": "yes sure one two three four five six",
    "start": "80190",
    "end": "89650"
  },
  {
    "text": "seven eight nine ten one two three four",
    "start": "89650",
    "end": "98560"
  },
  {
    "text": "five six seven eight nine ten",
    "start": "98560",
    "end": "104670"
  },
  {
    "text": "alright okay let's go ahead and get started thank you for coming everybody thank you for coming I know this is kind",
    "start": "120640",
    "end": "127160"
  },
  {
    "text": "of at the end of coupe con and I'm pretty excited testing testing one two",
    "start": "127160",
    "end": "151130"
  },
  {
    "text": "three that sounds better you gotta use rapid",
    "start": "151130",
    "end": "165800"
  },
  {
    "text": "channels so I'll show you how to do that in just a moment but yeah we it is there",
    "start": "165800",
    "end": "171590"
  },
  {
    "text": "it's just hidden away a little bit first of all really quick let's just go ahead and introduce ourselves and then we will",
    "start": "171590",
    "end": "177770"
  },
  {
    "text": "start getting set up my name is Joe Betts I work at Google I'm an STD maintainer and a contributor to API",
    "start": "177770",
    "end": "183320"
  },
  {
    "text": "machinery most recently I've been working on bringing er DS and web hooks to GA ya I'm Stefan",
    "start": "183320",
    "end": "189830"
  },
  {
    "text": "many of you might know me from my CID work so a lot of society features you will see today I was somehow involved or",
    "start": "189830",
    "end": "197630"
  },
  {
    "text": "even was driving them yeah all right so",
    "start": "197630",
    "end": "203110"
  },
  {
    "start": "202000",
    "end": "557000"
  },
  {
    "text": "this is designed to be an interactive tutorial if following along is optional",
    "start": "203110",
    "end": "209299"
  },
  {
    "text": "it's pretty pretty complete so there's plenty to watch if you just want to but I'm following along as encouraged I'm",
    "start": "209299",
    "end": "216440"
  },
  {
    "text": "gonna leave this link on the bottom of the slides for the next couple slides it's got everything you need to go ahead",
    "start": "216440",
    "end": "221630"
  },
  {
    "text": "and get started it's also got a link to these slides so if you want to jump around or be able to copy and paste out",
    "start": "221630",
    "end": "227330"
  },
  {
    "text": "of the slides as we work encourage you to get that open in a browser we're just gonna do three steps to get started the",
    "start": "227330",
    "end": "233959"
  },
  {
    "text": "first is we're going to create a kubernetes cluster and there's a couple different ways you can do that then",
    "start": "233959",
    "end": "239150"
  },
  {
    "text": "we're gonna check out our tutorial project and lastly we're going to set up some basic go development tools so we",
    "start": "239150",
    "end": "244549"
  },
  {
    "text": "can write your meal code there's two main ways that you can get a kubernetes cluster started you can bring your own",
    "start": "244549",
    "end": "250910"
  },
  {
    "text": "cluster so you could use something kind or if you have a cluster already running somewhere you can go ahead and",
    "start": "250910",
    "end": "256910"
  },
  {
    "text": "use that the main restriction is it needs to be 115 or newer we're going to be using some more modern kubernetes features the",
    "start": "256910",
    "end": "264290"
  },
  {
    "text": "other option is we have some Google temporary cloud accounts around in the room so if you already have one of those",
    "start": "264290",
    "end": "270560"
  },
  {
    "text": "you can go ahead and get started with that if you don't have one we should have plenty so you can either just look",
    "start": "270560",
    "end": "276530"
  },
  {
    "text": "around or raise your hand and we'll get you one occasionally those don't work so if you have trouble with one you just",
    "start": "276530",
    "end": "281780"
  },
  {
    "text": "get a replacement and you can keep going from there so a bunch of slides I've updated some slides ins a sketch website",
    "start": "281780",
    "end": "288980"
  },
  {
    "text": "of this talk so if you want to look something up just go there it's pdfs amputate and the first thing I'm going",
    "start": "288980",
    "end": "298640"
  },
  {
    "text": "to go over just briefly is how you go ahead and create a gke cluster if you're",
    "start": "298640",
    "end": "303830"
  },
  {
    "text": "using the google cloud account you can do that from the command line if you already have google cloud but usually",
    "start": "303830",
    "end": "309290"
  },
  {
    "text": "it's pretty straightforward to just do it from the web UI now if you are already using google cloud for other things you might want to use a nick",
    "start": "309290",
    "end": "315620"
  },
  {
    "text": "Cognito window for this it keeps things nice and separate it makes it really easy to log in and then clear things out",
    "start": "315620",
    "end": "320990"
  },
  {
    "text": "when you're all done with it tutorial but the first thing you're gonna do is just navigate to cloud console cloud",
    "start": "320990",
    "end": "326630"
  },
  {
    "text": "google.com and you'll be immediately prompted for the user name on the",
    "start": "326630",
    "end": "332030"
  },
  {
    "text": "temporary account once you've logged in accepted a couple of the terms you're going to have the option to you're going",
    "start": "332030",
    "end": "339920"
  },
  {
    "text": "to see an option to select a project at the very top of the window open that and there's a pre-existing project called",
    "start": "339920",
    "end": "345530"
  },
  {
    "text": "multi version CR DS you just want to select that one after you've done that you're going to navigate using the very",
    "start": "345530",
    "end": "353120"
  },
  {
    "text": "top left in the navigation there's a menu there's like three little horizontal bars click that go down to",
    "start": "353120",
    "end": "358840"
  },
  {
    "text": "google kubernetes engine and click clusters and then you're going to create a cluster from there there's only two",
    "start": "358840",
    "end": "365060"
  },
  {
    "text": "things you need to do with your cluster you're gonna create a standard cluster it can just be zonal you're going to",
    "start": "365060",
    "end": "370250"
  },
  {
    "text": "give it a cluster name I'm going to use this name here of coop con - CRD - tutorial",
    "start": "370250",
    "end": "375290"
  },
  {
    "text": "throughout my aside so if you want to be consistent with the slides you can just use that and then you need to click use",
    "start": "375290",
    "end": "380960"
  },
  {
    "text": "release channels to get a new enough version of kubernetes it's really important you do this and you get a 115",
    "start": "380960",
    "end": "387020"
  },
  {
    "text": "newer version if if you accidentally created one older than that when you got started before go ahead and just delete",
    "start": "387020",
    "end": "392750"
  },
  {
    "text": "it and create a new cluster the next thing we're going to do is setup and",
    "start": "392750",
    "end": "398389"
  },
  {
    "text": "it's okay if you fall behind me here you'll get caught up is we're gonna set up our development environment a little",
    "start": "398389",
    "end": "403940"
  },
  {
    "text": "bit so we would encourage you if possible to go ahead and just use your local machine I'm use your terminal on",
    "start": "403940",
    "end": "409669"
  },
  {
    "text": "your local machine and do everything there if for whatever reason you can't do that you can use the Google cloud",
    "start": "409669",
    "end": "414740"
  },
  {
    "text": "shell and we don't have a super packed room so we might actually have good enough connectivity for a lot of people",
    "start": "414740",
    "end": "420229"
  },
  {
    "text": "to do it this way but still your terminal is going to be the most reliable way if you do use Google Cloud shell I'll show you how you can do",
    "start": "420229",
    "end": "426169"
  },
  {
    "text": "everything from inside there so if you're doing local development the first thing you want to do is install g-cloud",
    "start": "426169",
    "end": "432500"
  },
  {
    "text": "that will allow you to connect your kubernetes your gke kubernetes cluster so go ahead and start getting that downloaded and then you're just going to",
    "start": "432500",
    "end": "439159"
  },
  {
    "text": "run three simple commands to login load up your project and establish a",
    "start": "439159",
    "end": "445250"
  },
  {
    "text": "connection for tube cuddle to that project if you're using cloud shell once",
    "start": "445250",
    "end": "450319"
  },
  {
    "text": "your kubernetes cluster is running you can kind of see with the red circle I've got down here in in the bottom right",
    "start": "450319",
    "end": "457400"
  },
  {
    "text": "here there will be a connect button it appears you can just go ahead and click that and then click run and cloud shell",
    "start": "457400",
    "end": "462740"
  },
  {
    "text": "and it's going to open the terminal for you right there in your browser it's going to be pre-populated with a command",
    "start": "462740",
    "end": "467990"
  },
  {
    "text": "just to enter to run that command and then you should be able to use cube cuddle the second major thing we're",
    "start": "467990",
    "end": "474740"
  },
  {
    "text": "going to do is we're going to check out this project you can do this either in the cloud shell or locally just clone this github project and then be sure to",
    "start": "474740",
    "end": "481520"
  },
  {
    "text": "see the end to it because this is gonna be our working directory for the remainder of the talk if if you're using",
    "start": "481520",
    "end": "490130"
  },
  {
    "text": "cloud shell you can get a basic editor once your terminal is opened there's",
    "start": "490130",
    "end": "495139"
  },
  {
    "text": "this little button right thank you",
    "start": "495139",
    "end": "501460"
  },
  {
    "text": "there's a little button right here it looks like a pencil if you click that it will open a web-based editor for you it",
    "start": "501460",
    "end": "508520"
  },
  {
    "text": "won't have all the bells and whistles of a full IDE but at least we'll be able to do some basic work in it you can go ahead and click that to open it up if",
    "start": "508520",
    "end": "514459"
  },
  {
    "text": "you're doing everything locally make sure you have go 1 12 or newer we've got go modules all vendored into",
    "start": "514459",
    "end": "521640"
  },
  {
    "text": "the checkout so you shouldn't need to pull much from the internet but you'll need to go 1-2 over newer if you don't",
    "start": "521640",
    "end": "527040"
  },
  {
    "text": "have that version go ahead and download it now and get it set up I'm also encourage you to you if you use",
    "start": "527040",
    "end": "533340"
  },
  {
    "text": "an ID like IntelliJ or Visual Studio code go ahead and start connecting the project now and getting that set up",
    "start": "533340",
    "end": "538650"
  },
  {
    "text": "we're gonna want to have code completion and all the good things of a modern IDE when we do development at some point you",
    "start": "538650",
    "end": "546390"
  },
  {
    "text": "should catch up with us and run these to sanity checks and once they're both passing that's a pretty good indicator",
    "start": "546390",
    "end": "551910"
  },
  {
    "text": "that you're ready to go keep working and while you do that I'm going to hand it over to Stefan to talk about advanced",
    "start": "551910",
    "end": "557730"
  },
  {
    "start": "557000",
    "end": "892000"
  },
  {
    "text": "securities yeah before I go into details here I want to hear about your",
    "start": "557730",
    "end": "563400"
  },
  {
    "text": "experience so who is created some CDs in some projects so most of you that also I",
    "start": "563400",
    "end": "570779"
  },
  {
    "text": "hope who has programmed controllers or anything was client oh it's the most of",
    "start": "570779",
    "end": "577290"
  },
  {
    "text": "you are maybe it wasn't half of you who has looked into the more advanced things",
    "start": "577290",
    "end": "582870"
  },
  {
    "text": "like admission webhooks also couple sweat books are always already available for quite some time",
    "start": "582870",
    "end": "589740"
  },
  {
    "text": "and we will use them we will show one example who s used multi very very good",
    "start": "589740",
    "end": "598920"
  },
  {
    "text": "just wear a few I think in a couple of months maybe some more see this we'll",
    "start": "598920",
    "end": "605070"
  },
  {
    "text": "use this feature it's pretty new and pretty cool and yeah we will learn today how to use it how to write a conversion",
    "start": "605070",
    "end": "611339"
  },
  {
    "text": "that book we have this slide here about all the features which we call I mean",
    "start": "611339",
    "end": "617940"
  },
  {
    "text": "from a height in the circle to the left what we what we call advanced so OPI",
    "start": "617940",
    "end": "625440"
  },
  {
    "text": "CMOS I guess most of you have used them in some way or the other they're available for Ino for more than",
    "start": "625440",
    "end": "632670"
  },
  {
    "text": "two years I think the tooling around was always not so it this has improved quite",
    "start": "632670",
    "end": "640680"
  },
  {
    "text": "a lot in the last half a year we have control again from controller tools which can also create of may api schemas",
    "start": "640680",
    "end": "647970"
  },
  {
    "text": "so yeah look at this controller to control again",
    "start": "647970",
    "end": "652980"
  },
  {
    "text": "binary is really powerful and proven in quite a number of projects mean wires so",
    "start": "652980",
    "end": "659490"
  },
  {
    "text": "open API has become much more feasible or usable in your projects beyond what",
    "start": "659490",
    "end": "667370"
  },
  {
    "text": "control Arjun creates you can also do some validation which is more advanced",
    "start": "667370",
    "end": "673290"
  },
  {
    "text": "like we can validate values of fields in a CID and there are many many open API",
    "start": "673290",
    "end": "680810"
  },
  {
    "text": "features like you can define a minimum you can have in arms for 4 swings",
    "start": "680810",
    "end": "686779"
  },
  {
    "text": "regular expressions many more things and if you go to the controller gen tool",
    "start": "686779",
    "end": "692880"
  },
  {
    "text": "from the controllers repository they have a book from Cupid as part of Cupid",
    "start": "692880",
    "end": "699810"
  },
  {
    "text": "as controller gen and the book will show you all the markers to to make use of",
    "start": "699810",
    "end": "705660"
  },
  {
    "text": "those special validations so it's all pretty boring because we know that for 2",
    "start": "705660",
    "end": "711449"
  },
  {
    "text": "years already but we have some new things in the last versions the first one is also very easy to use it's",
    "start": "711449",
    "end": "718380"
  },
  {
    "text": "preserve unknown fields it's known another word pruning this will be or",
    "start": "718380",
    "end": "724740"
  },
  {
    "text": "it's it's a default in v1 API CID so if you have a CID and you use the API v1",
    "start": "724740",
    "end": "730740"
  },
  {
    "text": "which is available in 116 this is the default so you don't have to do anything",
    "start": "730740",
    "end": "737010"
  },
  {
    "text": "to get pruning eiffel later what it really does and how it's used but it's",
    "start": "737010",
    "end": "742589"
  },
  {
    "text": "just one field and very simple to enable so there was not much go yet so",
    "start": "742589",
    "end": "749100"
  },
  {
    "text": "everything was in Jam it also looks very simple Moochie Bourbons exist for comes",
    "start": "749100",
    "end": "755339"
  },
  {
    "text": "for quite some time also yamir you can define multiple versions in the CID and they are served",
    "start": "755339",
    "end": "760910"
  },
  {
    "text": "but before we had actually conversion so at the next stop here on the left before we had conversion all girlfriends",
    "start": "760910",
    "end": "767190"
  },
  {
    "text": "were the same so there was not much sense I mean could you find them but they all looked the same at least they had the same schema this",
    "start": "767190",
    "end": "773699"
  },
  {
    "text": "conversion this changes so conversion it's that book written and go I mean any",
    "start": "773699",
    "end": "781260"
  },
  {
    "text": "language can do that but the libraries and types everything isn't go over so it's maybe preferred language here it's another",
    "start": "781260",
    "end": "790140"
  },
  {
    "text": "step it's another level of development that's why we called this talk here",
    "start": "790140",
    "end": "795870"
  },
  {
    "text": "something about a development project we've right go code it's much more than Yama and the last thing it's not so new",
    "start": "795870",
    "end": "804089"
  },
  {
    "text": "admission it's of course also usually developed and go yeah so this is our",
    "start": "804089",
    "end": "812190"
  },
  {
    "text": "agenda for today the first thing we did already Joe will introduce the example",
    "start": "812190",
    "end": "819120"
  },
  {
    "text": "in some seconds we will use cogeneration especially this controller Jen tool you",
    "start": "819120",
    "end": "825660"
  },
  {
    "text": "will start simulator and sermons all the components were of this example and the simulator we will go into open API",
    "start": "825660",
    "end": "833070"
  },
  {
    "text": "generation because yeah it's not so new but this generation is new and we want",
    "start": "833070",
    "end": "839459"
  },
  {
    "text": "to do two more people should should learn about controller Jen and how",
    "start": "839459",
    "end": "845160"
  },
  {
    "text": "nicely it works and makes all about Omega are much easier pooling will be",
    "start": "845160",
    "end": "850529"
  },
  {
    "text": "enabled and in the last part we go to go and we will look on burning so we write",
    "start": "850529",
    "end": "855540"
  },
  {
    "text": "a burgeoning bear poop a confirm conversion vet book and we will test test test web who we will write our",
    "start": "855540",
    "end": "862140"
  },
  {
    "text": "tests and yeah deploys the thing in a cluster and see different versions being",
    "start": "862140",
    "end": "867560"
  },
  {
    "text": "magically converted and last but not least there's admission part where we",
    "start": "867560",
    "end": "874020"
  },
  {
    "text": "were we will write an admission beppu which is non-trivial so it does more than just validating something locally",
    "start": "874020",
    "end": "881490"
  },
  {
    "text": "by some sums unstructured object that it will also access different resources so",
    "start": "881490",
    "end": "886950"
  },
  {
    "text": "it's much more than what you can do with open api all right so now we know what",
    "start": "886950",
    "end": "893490"
  },
  {
    "start": "892000",
    "end": "917000"
  },
  {
    "text": "you will do and so we introduce example Thank You Stephan there's gonna be a bunch of interesting code to do so for",
    "start": "893490",
    "end": "900060"
  },
  {
    "text": "example today we're gonna be working with some research on this thing called the deep-sea research station it's kind",
    "start": "900060",
    "end": "905220"
  },
  {
    "text": "of hidden down there in the water it's a big metal tube it's really important to these guys that's what they you do their",
    "start": "905220",
    "end": "911190"
  },
  {
    "text": "research in and up here in front we have Walter Walter is nice we like Walter",
    "start": "911190",
    "end": "917570"
  },
  {
    "start": "917000",
    "end": "1001000"
  },
  {
    "text": "up at the surface we have about one bar of pressure that's a unit of measure we're just did that my sphere of",
    "start": "917759",
    "end": "923819"
  },
  {
    "text": "pressure that's basically where we all in are now in this room this research station is down deep in the water at",
    "start": "923819",
    "end": "928920"
  },
  {
    "text": "about 90 meters or 300 feet or so and down there it's about 10 bar so 10 times",
    "start": "928920",
    "end": "934050"
  },
  {
    "text": "the pressure pushing in on side on every side of this tin can that our researchers live and work in so it's",
    "start": "934050",
    "end": "940559"
  },
  {
    "text": "really important that we keep the pressure inside our research station at 10 bars as well if the pressure were to",
    "start": "940559",
    "end": "946259"
  },
  {
    "text": "increase too far the station could burst if the pressure were to decrease too far",
    "start": "946259",
    "end": "952019"
  },
  {
    "text": "the station could implode so we don't want either of these things to happen remember Walters inside and we like",
    "start": "952019",
    "end": "958019"
  },
  {
    "text": "Walter now our research station is sometimes connected to a surface vessel",
    "start": "958019",
    "end": "963199"
  },
  {
    "text": "through this cool thing called an umbilical cable it's this conglomeration of different things it conveys",
    "start": "963199",
    "end": "969480"
  },
  {
    "text": "electricity and data and even air between the surface vessel and our research station I'm gonna focus in on",
    "start": "969480",
    "end": "975959"
  },
  {
    "text": "that last item there air that's really important we have now opened a conduit for air flow between our research",
    "start": "975959",
    "end": "982019"
  },
  {
    "text": "station and the surface which means the pressure could change fortunately we've got some pumps we can use to help manage",
    "start": "982019",
    "end": "987509"
  },
  {
    "text": "this now the way that our pumps were working really simple if our pressure is too low we can run more pumps if our",
    "start": "987509",
    "end": "993420"
  },
  {
    "text": "pressure is too high we can run fewer them equilibrium should usually be about three pumps we've got six pumps total",
    "start": "993420",
    "end": "1001029"
  },
  {
    "start": "1001000",
    "end": "1073000"
  },
  {
    "text": "and we're gonna do all of this with kubernetes and so here is a kind of a",
    "start": "1001029",
    "end": "1006049"
  },
  {
    "text": "quick glimpse at two of the custom resources that we're going to be dealing with today we have devices which are",
    "start": "1006049",
    "end": "1011959"
  },
  {
    "text": "this just these kind of the general internet of things type of items and we're gonna represent those here in an",
    "start": "1011959",
    "end": "1018439"
  },
  {
    "text": "API group called things koukin do and we're gonna give them all names and all",
    "start": "1018439",
    "end": "1023600"
  },
  {
    "text": "they do is have inputs and outputs now inputs are things from kubernetes so those are in this back outputs are",
    "start": "1023600",
    "end": "1030798"
  },
  {
    "text": "things about our device so those come in through the status you could imagine some connector connects to some external",
    "start": "1030799",
    "end": "1036949"
  },
  {
    "text": "device and reports the output status and the observed inputs of that thing and then the only thing we can do is set",
    "start": "1036949",
    "end": "1043188"
  },
  {
    "text": "inputs now we also have our research modules we have three of them we have a",
    "start": "1043189",
    "end": "1048409"
  },
  {
    "text": "command and a research and crew module and all of them are gonna have a custom resource that looks kind",
    "start": "1048409",
    "end": "1055309"
  },
  {
    "text": "of like this each of them has three devices a pump and alarm and a sensor and we're gonna be using this CR to",
    "start": "1055309",
    "end": "1063559"
  },
  {
    "text": "refer to the other CR so here we know that this module pump is pumped number one so we could then go look that up so",
    "start": "1063559",
    "end": "1070820"
  },
  {
    "text": "a little bit going on with our series here now to make this a little more fun",
    "start": "1070820",
    "end": "1076460"
  },
  {
    "start": "1073000",
    "end": "1144000"
  },
  {
    "text": "we're going to deal with multiple versions of our CR D and the one that we have multiple versions of is our device we had originally created a v1 alpha one",
    "start": "1076460",
    "end": "1084200"
  },
  {
    "text": "where we defined three fields for all inputs and outputs we had the name of the input or output we had some value",
    "start": "1084200",
    "end": "1090919"
  },
  {
    "text": "which was just this quantity string and then we then we would declare the type separately in a separate field and we",
    "start": "1090919",
    "end": "1096799"
  },
  {
    "text": "could say it was an inter float or boolean but there was nothing really tying the the type checking of that",
    "start": "1096799",
    "end": "1102320"
  },
  {
    "text": "value to what we said the type was so later we came back and introduced the v1 and the v1 is structured a little",
    "start": "1102320",
    "end": "1107840"
  },
  {
    "text": "differently you only have to put an optional integer float or boolean field and then the value can only be an actual",
    "start": "1107840",
    "end": "1115039"
  },
  {
    "text": "value so our boolean is now actually true or false it's not just 0 or 1 it's a little better but the key thing I want",
    "start": "1115039",
    "end": "1122210"
  },
  {
    "text": "you to know from this slide is that both of these versions of our CRD are available at the same time and clients",
    "start": "1122210",
    "end": "1127879"
  },
  {
    "text": "are using them both concurrently some clients are using v1 alpha one other clients are using v1 if they print both",
    "start": "1127879",
    "end": "1133759"
  },
  {
    "text": "read and write to our CRD they are both being served concurrently and we're going to deal with that that means that",
    "start": "1133759",
    "end": "1139340"
  },
  {
    "text": "there has to be has some conversion going on we have to choose which version we're actually going to store we'll talk",
    "start": "1139340",
    "end": "1145039"
  },
  {
    "start": "1144000",
    "end": "1167000"
  },
  {
    "text": "more detail about that shortly now we have a UI for our simulator we're going to load this into our clusters in just a",
    "start": "1145039",
    "end": "1150919"
  },
  {
    "text": "moment and what it will do is it'll actually show you in real time all three of your modules for your research station and the current values for all",
    "start": "1150919",
    "end": "1158119"
  },
  {
    "text": "the devices there's even some things down on the bottom where you can tweak the values so you can experiment with them a little bit and we'll be working",
    "start": "1158119",
    "end": "1164809"
  },
  {
    "text": "with that for the remainder of the talk now how many of you have gotten to the point where you have a working cluster",
    "start": "1164809",
    "end": "1171950"
  },
  {
    "start": "1167000",
    "end": "1309000"
  },
  {
    "text": "oh great ok how many of you have checked out the code",
    "start": "1171950",
    "end": "1177830"
  },
  {
    "text": "awesome okay so that's what we're gonna do next is we're going to start looking through that code so go ahead and open up your code in an editor and I'm gonna",
    "start": "1177830",
    "end": "1184710"
  },
  {
    "text": "give you a couple pointers the first place I'd like you to look is in the api's directory inside of here you're",
    "start": "1184710",
    "end": "1190680"
  },
  {
    "text": "gonna see all our API groups both the things group which is where our devices reside and the deep-sea group inside of",
    "start": "1190680",
    "end": "1198330"
  },
  {
    "text": "there you're going to see types go files that define our different CRTs this is the source of truth for our series we",
    "start": "1198330",
    "end": "1203940"
  },
  {
    "text": "can change this and change the structure of our series from that we're going to generate two different things we're",
    "start": "1203940",
    "end": "1209790"
  },
  {
    "text": "gonna generate our manifests in the manifest directory and you can go ahead and open that up and you'll see that we",
    "start": "1209790",
    "end": "1215700"
  },
  {
    "text": "have kubernetes 115 and 116 subdirectories and pick the one that matches what you're using inside of",
    "start": "1215700",
    "end": "1221940"
  },
  {
    "text": "there you'll actually have your CRT definitions the open API spec inside of that was generated from the api's the",
    "start": "1221940",
    "end": "1230910"
  },
  {
    "text": "other thing we generate is in the generated directory we have generated go client bindings we're gonna be able to",
    "start": "1230910",
    "end": "1236580"
  },
  {
    "text": "use those in the write code in addition to those main things which are all are",
    "start": "1236580",
    "end": "1241950"
  },
  {
    "text": "related to the types we have an admission the controllers in a conversion directory those are all where",
    "start": "1241950",
    "end": "1247140"
  },
  {
    "text": "we're gonna be writing code the admission contains an omission webhook conversion contains a conversion web book and controllers can train some",
    "start": "1247140",
    "end": "1255450"
  },
  {
    "text": "controllers that we're going to be using with our series our examples directory contains some some actual custom",
    "start": "1255450",
    "end": "1261810"
  },
  {
    "text": "resources that we're going to load into our cluster just a minute so that we have the modules and the devices for our",
    "start": "1261810",
    "end": "1266970"
  },
  {
    "text": "specific example and within the conversion admission and controllers directories there are manifest yeah",
    "start": "1266970",
    "end": "1273210"
  },
  {
    "text": "moles that we can use to load those things into our cluster and I'll show you how to do that in just a moment for",
    "start": "1273210",
    "end": "1278340"
  },
  {
    "text": "convenience we have in our hack directory two code gen utilities these are pretty small you're encouraged to go",
    "start": "1278340",
    "end": "1283770"
  },
  {
    "text": "ahead and look and see what they do mostly what they're doing is setting up the parameters to call our code gen",
    "start": "1283770",
    "end": "1289110"
  },
  {
    "text": "tools and we can use those to regenerate our client bindings or to update our",
    "start": "1289110",
    "end": "1294300"
  },
  {
    "text": "open API schemas inside of our CRT definition at the at the end of the talk",
    "start": "1294300",
    "end": "1300630"
  },
  {
    "text": "we're going to be using some doctor repositories and our make file has some utilities so that we can easily build",
    "start": "1300630",
    "end": "1306420"
  },
  {
    "text": "and push our doctor images so we'll get back to that later but the first thing I'd like you to do is just",
    "start": "1306420",
    "end": "1311970"
  },
  {
    "start": "1309000",
    "end": "1358000"
  },
  {
    "text": "go ahead and start executing these few commands the first one is going to load your kubernetes CRTs into your cluster",
    "start": "1311970",
    "end": "1320070"
  },
  {
    "text": "use the appropriate version for this cluster version that you started once those CRTs are created we're also",
    "start": "1320070",
    "end": "1328230"
  },
  {
    "text": "going to load up a conversion webhook we're going to need that from the get-go we'll continue to improve it later but",
    "start": "1328230",
    "end": "1334560"
  },
  {
    "text": "we need it running from the very beginning so go ahead and run cube cut' will apply on conversion manifests as",
    "start": "1334560",
    "end": "1340170"
  },
  {
    "text": "well next you can go ahead and run cube cut' we'll apply for all three of our modules and once you've done that you",
    "start": "1340170",
    "end": "1346920"
  },
  {
    "text": "can go ahead and do a couple get to have a look at all the CRS that you've loaded and we added some custom calls columns",
    "start": "1346920",
    "end": "1353550"
  },
  {
    "text": "to our CRTs so that you can kind of see some of the device values mark easily",
    "start": "1353550",
    "end": "1358820"
  },
  {
    "start": "1358000",
    "end": "1426000"
  },
  {
    "text": "once you've done all that the next thing we're going to do is run our simulator and so it's in the simulator directory",
    "start": "1359120",
    "end": "1365880"
  },
  {
    "text": "there's a manifest Gemmell there could probably apply that as well and then to get access to it there are two options",
    "start": "1365880",
    "end": "1371730"
  },
  {
    "text": "you can either use port 40 which is option B here which will kick on almost immediately or you can open an ingress",
    "start": "1371730",
    "end": "1378240"
  },
  {
    "text": "if you're using gke and it will take about a minute for the address of that",
    "start": "1378240",
    "end": "1384330"
  },
  {
    "text": "ingress to appear in another three to five minutes for that actually become available you get a 404 for a couple",
    "start": "1384330",
    "end": "1389760"
  },
  {
    "text": "minutes and so you'll need to do cube travel get a couple times to get that loaded but go ahead and run those commands and either depending which one",
    "start": "1389760",
    "end": "1397170"
  },
  {
    "text": "you used either on port 80 or port 8080 you're now going to have your UI so you can go ahead and get that loaded up or",
    "start": "1397170",
    "end": "1404190"
  },
  {
    "text": "if you just prefer to do everything from the command line you can use this watch command and you'll get roughly the same",
    "start": "1404190",
    "end": "1409320"
  },
  {
    "text": "information just in a different presentation here these are what are called quantities",
    "start": "1409320",
    "end": "1414570"
  },
  {
    "text": "that's a kubernetes type and the M just means I think Millie's is so this would",
    "start": "1414570",
    "end": "1420750"
  },
  {
    "text": "be 10.2 there as the first pressure once",
    "start": "1420750",
    "end": "1427230"
  },
  {
    "start": "1426000",
    "end": "1459000"
  },
  {
    "text": "you get your simulator started you might notice that there's not a lot going on you can manually change the values and",
    "start": "1427230",
    "end": "1433380"
  },
  {
    "text": "you could read them back using cube cuddle if you wanted but there's not really a lot happening so we're also",
    "start": "1433380",
    "end": "1438570"
  },
  {
    "text": "going to start up a controller that's going to simulate some pressure changes it's going to kind of sinusoidally in",
    "start": "1438570",
    "end": "1444419"
  },
  {
    "text": "and decrease that pressure over time so once you kick that on you'll see that these values are starting to change fairly rapidly and we'll continue to",
    "start": "1444419",
    "end": "1451919"
  },
  {
    "text": "work on introducing additional controllers to keep that pressure as close to 10 and bars as possible later",
    "start": "1451919",
    "end": "1458629"
  },
  {
    "text": "so again here's all those commands you can run and continue to work on that and hopefully you will be all caught up with",
    "start": "1458629",
    "end": "1465690"
  },
  {
    "start": "1459000",
    "end": "1594000"
  },
  {
    "text": "us soon yeah so I will also prepare our local cluster here so we are working I",
    "start": "1465690",
    "end": "1475289"
  },
  {
    "text": "was a kind cluster on this notebook so it's running you see ya binaries we want",
    "start": "1475289",
    "end": "1481889"
  },
  {
    "text": "to deploy a couple of pots so Mission Bay pukka supports its pre deployed so I",
    "start": "1481889",
    "end": "1487019"
  },
  {
    "text": "did that already before the talk simulator is running and the conversion",
    "start": "1487019",
    "end": "1492749"
  },
  {
    "text": "webhook is running I here at the bottom",
    "start": "1492749",
    "end": "1498659"
  },
  {
    "text": "there should be a port forward which was option B on the slides so we have a port 8080 which effluences has forwarded to",
    "start": "1498659",
    "end": "1507139"
  },
  {
    "text": "to the part of the simulator and if everything works well we should see",
    "start": "1507139",
    "end": "1512399"
  },
  {
    "text": "something here yeah not much is happening everything aesthetics there's",
    "start": "1512399",
    "end": "1520049"
  },
  {
    "text": "no no no action yet in this cluster so everywhere every of those spots is waiting we have to deploy is a",
    "start": "1520049",
    "end": "1526230"
  },
  {
    "text": "controller to get something here which is more interesting so let's do that",
    "start": "1526230",
    "end": "1531859"
  },
  {
    "text": "controller directory I said before there's many fast inside and if we do",
    "start": "1531859",
    "end": "1537119"
  },
  {
    "text": "that it's in some seconds we should get a controller you're not creating and an",
    "start": "1537119",
    "end": "1544470"
  },
  {
    "text": "air war for whatever reason I have no idea it's not the sensor so it's not",
    "start": "1544470",
    "end": "1551279"
  },
  {
    "text": "doing much at the moment so controller just increases or decreases the pressure",
    "start": "1551279",
    "end": "1556980"
  },
  {
    "text": "so no pump is on so there's no no nothing which which updates as a",
    "start": "1556980",
    "end": "1564149"
  },
  {
    "text": "pleasure house without I think it just decreases right yeah unless you set it to 3 pumps exactly it'll pretty much",
    "start": "1564149",
    "end": "1570659"
  },
  {
    "text": "just decrease indefinitely so you can go ahead and if you want to see it just kind of vary up and down you can leave",
    "start": "1570659",
    "end": "1575730"
  },
  {
    "text": "three pumps active until we Brianna we can debug that in a minute doing a negative exercise we do so let's",
    "start": "1575730",
    "end": "1586120"
  },
  {
    "text": "take a look on a open API so full screen again so you have seen those two CDs",
    "start": "1586120",
    "end": "1596440"
  },
  {
    "start": "1594000",
    "end": "1638000"
  },
  {
    "text": "before we had some other slides and we will mainly look for okay appear at least we will look on the side on the",
    "start": "1596440",
    "end": "1602380"
  },
  {
    "text": "left one so we're interested in specifying the structure of the device CID yeah you can see here we have inputs",
    "start": "1602380",
    "end": "1610920"
  },
  {
    "text": "inputs our values also so type instead of go is called value and observed",
    "start": "1610920",
    "end": "1617740"
  },
  {
    "text": "inputs and outputs are also values everything is a value basically and value in version v1 I for one has a",
    "start": "1617740",
    "end": "1625330"
  },
  {
    "text": "structure here it has a name as a value which is quantity so it's it's a string extra in the CID and it has types",
    "start": "1625330",
    "end": "1631930"
  },
  {
    "text": "integer it can also be boolean or it can be a float inside of a CID you have to",
    "start": "1631930",
    "end": "1642730"
  },
  {
    "start": "1638000",
    "end": "1740000"
  },
  {
    "text": "specify open API so you see it looks very similar to to the structure of the CID here in the middle as this blue bar",
    "start": "1642730",
    "end": "1650080"
  },
  {
    "text": "is this is owed me API schema for version one so we have a version one",
    "start": "1650080",
    "end": "1655450"
  },
  {
    "text": "here I think I switch to version on this slide so yeah I did so here this was so over p1 I for one",
    "start": "1655450",
    "end": "1661950"
  },
  {
    "text": "type here we have the v1 type it's a bit simpler so integer has really one field",
    "start": "1661950",
    "end": "1668200"
  },
  {
    "text": "it's it's some type that's how we call it integer can be set float can be set",
    "start": "1668200",
    "end": "1673990"
  },
  {
    "text": "or boolean can be set and on the right side we have to specify our create some",
    "start": "1673990",
    "end": "1679990"
  },
  {
    "text": "house the schema so this is a topic of the section yeah just one word here about metadata",
    "start": "1679990",
    "end": "1687520"
  },
  {
    "text": "so this must be complete we will show in a minute why it should be complete so I have to specify everything you can have",
    "start": "1687520",
    "end": "1694900"
  },
  {
    "text": "in your CID there's one small exception the metadata so the object meta from",
    "start": "1694900",
    "end": "1700810"
  },
  {
    "text": "from client go this doesn't have to be specified and it even cannot be",
    "start": "1700810",
    "end": "1706150"
  },
  {
    "text": "specified so there's restrictions in the last version of Queenie so you can say types object but don't",
    "start": "1706150",
    "end": "1713839"
  },
  {
    "text": "start to specify every three below so don't specify I know annotations and labels and stuff don't do that it",
    "start": "1713839",
    "end": "1720709"
  },
  {
    "text": "doesn't even work if you have all T IDs which have that because Cupid are created this originally get a new Cupid",
    "start": "1720709",
    "end": "1728389"
  },
  {
    "text": "and regenerate a CID in 115 or 116 which wants to use new features cannot have",
    "start": "1728389",
    "end": "1735859"
  },
  {
    "text": "those few definitions inside of metadata alright um how to create that we don't",
    "start": "1735859",
    "end": "1743509"
  },
  {
    "text": "create it from from the customer resources it's just an example here on the left side we created from goal encode and it's basically inspired from",
    "start": "1743509",
    "end": "1751820"
  },
  {
    "text": "what we do for native types in Cuban leaders already we do the same for CDs so you start defining your typed-in go",
    "start": "1751820",
    "end": "1760700"
  },
  {
    "text": "along so here's a value start as I said it's the most important part which it's",
    "start": "1760700",
    "end": "1765829"
  },
  {
    "text": "used for the inputs and outputs and observed inputs it's always this value and yeah you can see there's a pretty",
    "start": "1765829",
    "end": "1774440"
  },
  {
    "text": "clear translation so as to act becomes an object here and fact as we fear so",
    "start": "1774440",
    "end": "1781009"
  },
  {
    "text": "you have to define them as properties so name there are you and type here from the left show up on the right side again",
    "start": "1781009",
    "end": "1786820"
  },
  {
    "text": "so you could write that manually but of course we don't want to do that we want",
    "start": "1786820",
    "end": "1792739"
  },
  {
    "text": "to use a tool and the tool here is this control again comes from pupil die from the controller tools",
    "start": "1792739",
    "end": "1799570"
  },
  {
    "text": "repository and yeah that's a new command sub-command it was in a pitch so this",
    "start": "1799570",
    "end": "1807799"
  },
  {
    "text": "can be used to just create a schema you you write your cid yourself so manually why to manifest for a CD and then you",
    "start": "1807799",
    "end": "1815209"
  },
  {
    "text": "patch in the schema so this can be done by this command line very very simple the quant line can read any kind of",
    "start": "1815209",
    "end": "1822559"
  },
  {
    "text": "manifests here the manifest here you give it a go along like path of api's in",
    "start": "1822559",
    "end": "1831259"
  },
  {
    "text": "our case the deep-sea API and the things API M V 1 and V 1 I have one and it will",
    "start": "1831259",
    "end": "1836869"
  },
  {
    "text": "match automatically so it will read all manifests it will read all API is all volunteers and",
    "start": "1836869",
    "end": "1842760"
  },
  {
    "text": "match them so : types the SSV are way to define the group name and the version",
    "start": "1842760",
    "end": "1848520"
  },
  {
    "text": "and it will match that as a manifests impairment which manifests so it's",
    "start": "1848520",
    "end": "1854040"
  },
  {
    "text": "pretty convenient just one command and we have put another script here inside",
    "start": "1854040",
    "end": "1860190"
  },
  {
    "text": "of the repository update see IDs but it's not doing much more than just calling that command so use that pretty",
    "start": "1860190",
    "end": "1866970"
  },
  {
    "text": "cool schema generation is driven by",
    "start": "1866970",
    "end": "1872280"
  },
  {
    "text": "Marcus so the marker idea it's everywhere in cupola so it's easels plus Q blog comments inside of CID types",
    "start": "1872280",
    "end": "1881130"
  },
  {
    "text": "here Q builder validation as I switch I we are interested here in enum for",
    "start": "1881130",
    "end": "1887610"
  },
  {
    "text": "example we want to specify that the type can only be one of those three values",
    "start": "1887610",
    "end": "1893309"
  },
  {
    "text": "and oh maybe hey open it guy has enums so you can define that and there's a",
    "start": "1893309",
    "end": "1899450"
  },
  {
    "text": "equivalent marker here in am equal to and then you give a list of values of",
    "start": "1899450",
    "end": "1904710"
  },
  {
    "text": "strings yeah we use a default as well so",
    "start": "1904710",
    "end": "1910950"
  },
  {
    "text": "defaulting is new in 1/16 that's why we have those tools here the manifest directories in 115 you don't get the",
    "start": "1910950",
    "end": "1918540"
  },
  {
    "text": "default so you have to if you use 115 you want to update your schemas you have",
    "start": "1918540",
    "end": "1923730"
  },
  {
    "text": "to disable or move this line West default is actually specified and then we generate and then you get something",
    "start": "1923730",
    "end": "1930210"
  },
  {
    "text": "which is compatible with 115 but in 116 you have that so it's it's convenient if",
    "start": "1930210",
    "end": "1935340"
  },
  {
    "text": "you don't give any any type here it will default to float so every CR without",
    "start": "1935340",
    "end": "1940500"
  },
  {
    "text": "types will be a float CR which is pretty nice it's pretty important to define",
    "start": "1940500",
    "end": "1947580"
  },
  {
    "text": "what is required and what is optional so open API has this require keyword we",
    "start": "1947580",
    "end": "1952650"
  },
  {
    "text": "just list the fields of an object which are required and yeah you can also",
    "start": "1952650",
    "end": "1958470"
  },
  {
    "text": "specify that as markers which is it's here yes one the name is required and",
    "start": "1958470",
    "end": "1966090"
  },
  {
    "text": "values declared as well type is not keep in mind if you require something it's",
    "start": "1966090",
    "end": "1972780"
  },
  {
    "text": "also required on the client side and cue cutter will validate so cue cattle will reject",
    "start": "1972780",
    "end": "1979169"
  },
  {
    "text": "objects which don't have the required fields and this is the reason why we don't have the type here so a quiet",
    "start": "1979169",
    "end": "1986249"
  },
  {
    "text": "field you can use you can leave it out don't require it and say there's a",
    "start": "1986249",
    "end": "1992879"
  },
  {
    "text": "default and then you know every object gets this value but technically it's not required anyway it can never be empty",
    "start": "1992879",
    "end": "2000289"
  },
  {
    "text": "because the 40 mechanism will make sure it's a value asset required an optional",
    "start": "2000289",
    "end": "2007129"
  },
  {
    "text": "those of you who have used Q builder before the default is that everything is",
    "start": "2007129",
    "end": "2012740"
  },
  {
    "text": "required and this is kind of unnatural for many people that's why we built in the mode or mechanism to set a default",
    "start": "2012740",
    "end": "2020299"
  },
  {
    "text": "for the whole package so you can say you build a validation optional in the dock go file so it's a wood of the package",
    "start": "2020299",
    "end": "2027169"
  },
  {
    "text": "and then everything by default is optional and you have to opt in in to be being required so this for many cases is",
    "start": "2027169",
    "end": "2035090"
  },
  {
    "text": "much more convenient and I said before this controller Jen will match so it has",
    "start": "2035090",
    "end": "2040429"
  },
  {
    "text": "to know how good names are much glen's names are what the building name is and",
    "start": "2040429",
    "end": "2046279"
  },
  {
    "text": "a couple of texts to do that so you say group name is in this case things cubic",
    "start": "2046279",
    "end": "2051919"
  },
  {
    "text": "on Io by default it will use a package name but the package name is just things I",
    "start": "2051919",
    "end": "2058069"
  },
  {
    "text": "think in our case so we specify that here specifically and the word name is V ones it should also be dy from the",
    "start": "2058069",
    "end": "2065179"
  },
  {
    "text": "package name I think I've in my case it was a box that's why it didn't work in",
    "start": "2065179",
    "end": "2070760"
  },
  {
    "text": "this version maybe it's fixed by now that's why I specified it as well as here alright so that's how open API is",
    "start": "2070760",
    "end": "2079128"
  },
  {
    "start": "2079000",
    "end": "2116000"
  },
  {
    "text": "generated before we do that actually practically somewhere about pruning so",
    "start": "2079129",
    "end": "2086358"
  },
  {
    "text": "pruning is default in v1 series the reason is that we want everybody to use",
    "start": "2086359",
    "end": "2091908"
  },
  {
    "text": "the pruning pooling is important because it it removes fields from a CID which are not",
    "start": "2091909",
    "end": "2098480"
  },
  {
    "text": "specified so it can always be sure nobody stores anything in LCD which is not defined by by you as an author of a",
    "start": "2098480",
    "end": "2106819"
  },
  {
    "text": "CID in V 1 meter 1 you can anywhere as well so just set reserve unknown",
    "start": "2106819",
    "end": "2112040"
  },
  {
    "text": "fields defaults and v1s default alright",
    "start": "2112040",
    "end": "2117290"
  },
  {
    "start": "2116000",
    "end": "2178000"
  },
  {
    "text": "so in our case here I said before this must be complete here so this email foot",
    "start": "2117290",
    "end": "2123790"
  },
  {
    "text": "yeah it's a mention every field which is in your CID so this is kind of automatic",
    "start": "2123790",
    "end": "2131690"
  },
  {
    "text": "if you use the generation it's complete because it's a tool always yet Skiba",
    "start": "2131690",
    "end": "2138430"
  },
  {
    "text": "what happens if something is missing here so here for CR like this one and there is unknown 42 somebody just passed",
    "start": "2138430",
    "end": "2146270"
  },
  {
    "text": "that edits that it's not specified on the right side so the schema doesn't include unknown and if you create this",
    "start": "2146270",
    "end": "2152630"
  },
  {
    "text": "object it will just I mean the server will just go up unknown 42 even if you",
    "start": "2152630",
    "end": "2159290"
  },
  {
    "text": "skip validation so Q cuttle will complain you cattle will client-side by default will complain that unknown is",
    "start": "2159290",
    "end": "2165950"
  },
  {
    "text": "not in the schema but even if you say a validate faults on the command on of Q",
    "start": "2165950",
    "end": "2171170"
  },
  {
    "text": "cutter unknown this drop by the service so you're sure there's never an unknown only fields which you know yeah and if",
    "start": "2171170",
    "end": "2179780"
  },
  {
    "text": "you if you use the controller gen and if you set this field this is pretty simple",
    "start": "2179780",
    "end": "2185869"
  },
  {
    "text": "to use just as a side note we won't use it here there are ways to opt out of",
    "start": "2185869",
    "end": "2191180"
  },
  {
    "text": "that so you you can specify that a sub a subtree of your CID of your CR is",
    "start": "2191180",
    "end": "2197630"
  },
  {
    "text": "actually pure jason so if you have something you embed some jason construct from another API for example um there's",
    "start": "2197630",
    "end": "2205670"
  },
  {
    "text": "a way to say that so you can opt out of pudding but it's not suggested I mean just do it there where it's really",
    "start": "2205670",
    "end": "2211609"
  },
  {
    "text": "necessary in the normal case just depend on depend on pooling all right so so",
    "start": "2211609",
    "end": "2219650"
  },
  {
    "text": "much more open API we have to first exercise here so who's ready to work on",
    "start": "2219650",
    "end": "2229760"
  },
  {
    "text": "the repository who has checked it out so",
    "start": "2229760",
    "end": "2234980"
  },
  {
    "text": "we have not yeah we forgot some validations name should be non empty",
    "start": "2234980",
    "end": "2240859"
  },
  {
    "text": "right an empty name for for device doesn't make much sense yeah yes",
    "start": "2240859",
    "end": "2257860"
  },
  {
    "text": "it's not about this he had me not see the API it's about your your API group",
    "start": "2262819",
    "end": "2269419"
  },
  {
    "text": "you define yeah if you use the CAG is",
    "start": "2269419",
    "end": "2283999"
  },
  {
    "text": "like the API extensions API v1 beta one like you do in a 114 113 cluster because",
    "start": "2283999",
    "end": "2291079"
  },
  {
    "text": "it was not v1 v1 is new if you define a v1 I for one CID for some kind of API",
    "start": "2291079",
    "end": "2298039"
  },
  {
    "text": "group in an old cluster or using V 1 beta 1 in a new cluster then tuning is",
    "start": "2298039",
    "end": "2303739"
  },
  {
    "text": "not enabled so you have to if you use the old API for 4c IDs you have to enable it manually but this is not the",
    "start": "2303739",
    "end": "2311119"
  },
  {
    "text": "versions that you're defining for your CR DS so you can call your versions whatever you want and their behavior is",
    "start": "2311119",
    "end": "2316160"
  },
  {
    "text": "not going to change based on that this is this is the the version of the CRD mechanism itself",
    "start": "2316160",
    "end": "2322630"
  },
  {
    "start": "2324000",
    "end": "2807000"
  },
  {
    "text": "what so the task is to to add civilizations which are missing",
    "start": "2324309",
    "end": "2330439"
  },
  {
    "text": "obviously names of inputs should not be empty empty I mean you can do it it's",
    "start": "2330439",
    "end": "2336859"
  },
  {
    "text": "just strange to have empty names and names should also follow some some",
    "start": "2336859",
    "end": "2342799"
  },
  {
    "text": "patterns so what we want to have names are just letters and numbers so the task",
    "start": "2342799",
    "end": "2351140"
  },
  {
    "text": "is to add that to the types I added I",
    "start": "2351140",
    "end": "2356229"
  },
  {
    "text": "added here the that remark everything you do so we have two versions of the",
    "start": "2356229",
    "end": "2362119"
  },
  {
    "text": "cid v 1 and v 1 i for one so everything you do you should better do in both",
    "start": "2362119",
    "end": "2367130"
  },
  {
    "text": "types go files if you do it just on one side later on you will be able to create",
    "start": "2367130",
    "end": "2373579"
  },
  {
    "text": "in one version you will be able to create something an object which is not valid and in a different version so",
    "start": "2373579",
    "end": "2380329"
  },
  {
    "text": "always try to match them try to to have validation which make sure that even",
    "start": "2380329",
    "end": "2386689"
  },
  {
    "text": "after conversion if you change the version of your object it's still relatively non-invasive have the same",
    "start": "2386689",
    "end": "2396019"
  },
  {
    "text": "carrot set as well if you have done that yeah just regenerate so what you are doing",
    "start": "2396019",
    "end": "2403140"
  },
  {
    "text": "you're you working basically on the types go file and you're adding markers so here you have a couple of examples",
    "start": "2403140",
    "end": "2410520"
  },
  {
    "text": "for Marcus just yeah follow follow this pattern at some markers for the name",
    "start": "2410520",
    "end": "2416080"
  },
  {
    "text": "[Music] there's a links for for the book so cupid is a nice book with a long list of",
    "start": "2416080",
    "end": "2422790"
  },
  {
    "text": "markers you will find the right ones pretty easily I guess and updated types",
    "start": "2422790",
    "end": "2428370"
  },
  {
    "text": "go update cid so cause a script this one cost want origin internally applies a",
    "start": "2428370",
    "end": "2435060"
  },
  {
    "text": "new cid to the cluster and just verify that it's really now validating so",
    "start": "2435060",
    "end": "2440430"
  },
  {
    "text": "create an object or edit an existing object like an existing device and change your name into something which is",
    "start": "2440430",
    "end": "2447300"
  },
  {
    "text": "invalid and hopefully this is reject it now and if you have too much time it's",
    "start": "2447300",
    "end": "2453180"
  },
  {
    "text": "too easy for you we have two advanced steps here one is in v1 we have the some",
    "start": "2453180",
    "end": "2459660"
  },
  {
    "text": "type so we have integer boolean and float and there are fields in this value",
    "start": "2459660",
    "end": "2466200"
  },
  {
    "text": "type and just one is allowed to be set he knows that from volumes volumes in in",
    "start": "2466200",
    "end": "2472590"
  },
  {
    "text": "kubernetes they also have some type structure so you have host path and MTE and secret",
    "start": "2472590",
    "end": "2478770"
  },
  {
    "text": "and so on and only one can be set and the goal is here to express that in open api it's possible it's not even so hard",
    "start": "2478770",
    "end": "2486600"
  },
  {
    "text": "yeah just try it and yeah the last one this is really pretty advanced and open",
    "start": "2486600",
    "end": "2493140"
  },
  {
    "text": "api if it's boolean you better only have",
    "start": "2493140",
    "end": "2498510"
  },
  {
    "text": "the two values one and zero not half doesn't make sense for boolean it's also",
    "start": "2498510",
    "end": "2503910"
  },
  {
    "text": "hard to convert later so if you if you want to add conversion you better just have those two values so try to express",
    "start": "2503910",
    "end": "2511410"
  },
  {
    "text": "that just as a little hint cupid is not able to do everything nowadays so you",
    "start": "2511410",
    "end": "2517230"
  },
  {
    "text": "might be might be forced to white oak maybe i directly into the manifest of society yeah I think we if like five",
    "start": "2517230",
    "end": "2526020"
  },
  {
    "text": "minutes or so yeah we'll give you a couple minutes to get that going and and we'll keep keep going",
    "start": "2526020",
    "end": "2533240"
  },
  {
    "text": "let's try and notice that we didn't have all the modules right see ah",
    "start": "2559200",
    "end": "2565829"
  },
  {
    "text": "this can be its first reapply our samples directory",
    "start": "2565829",
    "end": "2570990"
  },
  {
    "text": "my delicious build the control",
    "start": "2634300",
    "end": "2637950"
  },
  {
    "text": "Oh",
    "start": "2659880",
    "end": "2661910"
  },
  {
    "text": "we're okay it was the pressure",
    "start": "2666240",
    "end": "2670290"
  },
  {
    "text": "let's try again",
    "start": "2734260",
    "end": "2737530"
  },
  {
    "text": "okay",
    "start": "2757960",
    "end": "2760960"
  },
  {
    "text": "all right how are people doing with their with their validation rules all",
    "start": "2776230",
    "end": "2781910"
  },
  {
    "text": "right we'll get started just one second",
    "start": "2781910",
    "end": "2786940"
  },
  {
    "start": "2807000",
    "end": "2972000"
  },
  {
    "text": "all right so now we are trying to to debug why the controller doesn't work",
    "start": "2807550",
    "end": "2813800"
  },
  {
    "text": "here there's some panic it's not Accenture so controlled us just cosmetics get some nice animation",
    "start": "2813800",
    "end": "2819740"
  },
  {
    "text": "actually we have a slide later where you see what really happens so we don't need that for the moment very quickly yeah",
    "start": "2819740",
    "end": "2827630"
  },
  {
    "text": "let's take a look here on one of the",
    "start": "2827630",
    "end": "2833000"
  },
  {
    "text": "types we are in which one we are in devices v1 now so we have this nice some",
    "start": "2833000",
    "end": "2839480"
  },
  {
    "text": "type here and if we want to say that the name it's not empty this sum in length",
    "start": "2839480",
    "end": "2850490"
  },
  {
    "text": "and you can just say zero and we have",
    "start": "2850490",
    "end": "2855910"
  },
  {
    "text": "something called patterns with just just regular expression so get an equal and I",
    "start": "2855910",
    "end": "2865550"
  },
  {
    "text": "think you have to put it in the crowds and it's a to that capital a to that",
    "start": "2865550",
    "end": "2872680"
  },
  {
    "text": "zero to nine and you want anything of course you can also use something like",
    "start": "2872680",
    "end": "2877730"
  },
  {
    "text": "plus and then get rid of the main lines same thing and let's see whether we have",
    "start": "2877730",
    "end": "2884300"
  },
  {
    "text": "any effect if we do that I update series",
    "start": "2884300",
    "end": "2890050"
  },
  {
    "text": "and you see that something was added was it no was not why",
    "start": "2890589",
    "end": "2900369"
  },
  {
    "text": "I don't see it why I was inundated hmm",
    "start": "2909030",
    "end": "2917150"
  },
  {
    "text": "it works for you so where's my my typo or something I said",
    "start": "2917150",
    "end": "2922260"
  },
  {
    "text": "I know I know where my typos everything must be capital and please",
    "start": "2922260",
    "end": "2929070"
  },
  {
    "text": "I guess there's an issue to makes us more I mean to make several messages better and kupida give me some support",
    "start": "2929070",
    "end": "2936390"
  },
  {
    "text": "but put a plus one there you have seen why and I hope we get something now yeah",
    "start": "2936390",
    "end": "2944100"
  },
  {
    "text": "all right so Cupid as a control again is not really good in error messages so you",
    "start": "2944100",
    "end": "2949530"
  },
  {
    "text": "don't see that something was wrong there okay so I don't do the other examples",
    "start": "2949530",
    "end": "2955430"
  },
  {
    "text": "everybody who wants to see the solution especially for the stretch codes it's",
    "start": "2955430",
    "end": "2960570"
  },
  {
    "text": "pretty complex compared to the one I just showed but it's interesting if you especially if you are interested in you know logic",
    "start": "2960570",
    "end": "2967380"
  },
  {
    "text": "propositional logic this is involved here all right so x1 next one we want to have multi version",
    "start": "2967380",
    "end": "2975060"
  },
  {
    "start": "2972000",
    "end": "3082000"
  },
  {
    "text": "so we have seen this before all right yeah it would be a one you're right yeah",
    "start": "2975060",
    "end": "2984510"
  },
  {
    "text": "I mean yeah full length even minus one doesn't make sense yeah one yes",
    "start": "2984510",
    "end": "2991020"
  },
  {
    "text": "would you version so we have seen this before we have two versions of devices and we have seen already where the",
    "start": "2991020",
    "end": "2997170"
  },
  {
    "text": "difference is one has a some type with those three fields and one has just value and type and important here is",
    "start": "2997170",
    "end": "3005270"
  },
  {
    "text": "that you have to convert and the conversion is something which is done in",
    "start": "3005270",
    "end": "3010490"
  },
  {
    "text": "place or in it's really than life when a request is possessed there's nothing",
    "start": "3010490",
    "end": "3016240"
  },
  {
    "text": "like some people think there's an object envy version one and it doesn't exist at",
    "start": "3016240",
    "end": "3022490"
  },
  {
    "text": "the same time in v1 I for one it's this is wrong an object exists in all",
    "start": "3022490",
    "end": "3027830"
  },
  {
    "text": "versions of the API group at the same time of course EDD is kind of",
    "start": "3027830",
    "end": "3033290"
  },
  {
    "text": "opinionated so EDD will store just one version as something called a storage were in which you can define in the",
    "start": "3033290",
    "end": "3039560"
  },
  {
    "text": "burton's field of the CID spec but logically when a",
    "start": "3039560",
    "end": "3044569"
  },
  {
    "text": "client comes to the server and asked for an object the client says which one it wants and as life lost less conversion",
    "start": "3044569",
    "end": "3052220"
  },
  {
    "text": "into the target version because the client wants to have if the version in the sed is wrong of course I mean if it",
    "start": "3052220",
    "end": "3058640"
  },
  {
    "text": "matches is the same there's no conversion going on so we have two white FF book this is basically the reason why",
    "start": "3058640",
    "end": "3066559"
  },
  {
    "text": "we need 115 conversion via web hookahs it's pretty new it's new from in 115 as",
    "start": "3066559",
    "end": "3072680"
  },
  {
    "text": "a beta and be promoted to 116 so in at least a 115 classify multi versions",
    "start": "3072680",
    "end": "3078769"
  },
  {
    "text": "without conversion we had earlier but it's not really useful so let's look at",
    "start": "3078769",
    "end": "3083900"
  },
  {
    "start": "3082000",
    "end": "3130000"
  },
  {
    "text": "our our type value as has had or inputs our values so this was the core of the",
    "start": "3083900",
    "end": "3091069"
  },
  {
    "text": "CID he has a representation which we invented in v-1 FR one when we maybe",
    "start": "3091069",
    "end": "3097910"
  },
  {
    "text": "didn't have lots of experience mr. API type so we chose this representation and",
    "start": "3097910",
    "end": "3103640"
  },
  {
    "text": "we don't like it we want to offer this one the right one to the customers for",
    "start": "3103640",
    "end": "3108799"
  },
  {
    "text": "v1 API and it's different right I mean",
    "start": "3108799",
    "end": "3113809"
  },
  {
    "text": "it looks everybody sees there's some kind of mapping between them but technically it's different and we have",
    "start": "3113809",
    "end": "3119690"
  },
  {
    "text": "to convert so we have to write a function which takes the left one and outputs the right one and here for by",
    "start": "3119690",
    "end": "3126529"
  },
  {
    "text": "the second function which does so converse so from right to left it's our task conversion is enabled in",
    "start": "3126529",
    "end": "3134660"
  },
  {
    "start": "3130000",
    "end": "3300000"
  },
  {
    "text": "the custom resource definition so if you have so many fest of a cid you define versions most of you even if you just",
    "start": "3134660",
    "end": "3141890"
  },
  {
    "text": "that's just one bill nowadays you get this versions flies here in the manifest as I said one",
    "start": "3141890",
    "end": "3149509"
  },
  {
    "text": "is a store which were so one is thought in LCD it's in our case here's v1 I for",
    "start": "3149509",
    "end": "3154819"
  },
  {
    "text": "one for whatever reason you can yeah think about when it makes sense to",
    "start": "3154819",
    "end": "3160549"
  },
  {
    "text": "really change the storage version of course you change it at some point when you don't want to F we won't ever want",
    "start": "3160549",
    "end": "3166069"
  },
  {
    "text": "anymore but the interesting part here for for us now is to add a convert and",
    "start": "3166069",
    "end": "3171410"
  },
  {
    "text": "this is a new thing it's also in the series back and it's for all versions so",
    "start": "3171410",
    "end": "3177319"
  },
  {
    "text": "there's just one report you cannot have multiple of them it's always just one you change the strategy to Babu so if",
    "start": "3177319",
    "end": "3185480"
  },
  {
    "text": "you do that here you have to provide a client convict rap hook conflict which",
    "start": "3185480",
    "end": "3191270"
  },
  {
    "text": "has a client conflict inside client convict is it's mainly I mean first it's",
    "start": "3191270",
    "end": "3196550"
  },
  {
    "text": "a service so a bear poop must be behind the service we have put this into the",
    "start": "3196550",
    "end": "3201710"
  },
  {
    "text": "things namespace and we gave the service name convert from that book and the past",
    "start": "3201710",
    "end": "3207920"
  },
  {
    "text": "is just actually free pass which is called in the baboon's College and it must be secured so there must be a CSC a",
    "start": "3207920",
    "end": "3214880"
  },
  {
    "text": "bundle as well which matches the serving sort of the epic it's all done in",
    "start": "3214880",
    "end": "3220720"
  },
  {
    "text": "repository everything is is there already is a make file will be able to create that and take a look at that how",
    "start": "3220720",
    "end": "3227690"
  },
  {
    "text": "it's done so it's secure by default and our exam pitar set as well there's",
    "start": "3227690",
    "end": "3234859"
  },
  {
    "text": "something we see in a second we have convert from the reviews so this there's",
    "start": "3234859",
    "end": "3240170"
  },
  {
    "text": "an object that is sent to the web book and that's called convert from that cook conversion of you and this convert the",
    "start": "3240170",
    "end": "3247010"
  },
  {
    "text": "rebel API it exists in different versions so V 1 beta 1 was the one we introduced in 115 we also have a v1",
    "start": "3247010",
    "end": "3255170"
  },
  {
    "text": "version of that nowadays but we have pasted everything on V 1 beta 1 because",
    "start": "3255170",
    "end": "3260770"
  },
  {
    "text": "yeah it should work in 115 and as far as I know it's also require that FF 4",
    "start": "3260770",
    "end": "3266540"
  },
  {
    "text": "supports this version even in 116 so it's enough to have P 1 beta 1 but just about details in this object they don't",
    "start": "3266540",
    "end": "3274310"
  },
  {
    "text": "really matter fast yet and yeah a lot less conversion we have seen and it can",
    "start": "3274310",
    "end": "3279560"
  },
  {
    "text": "be easy ta pok is called more than once so it can be that it's called when",
    "start": "3279560",
    "end": "3284810"
  },
  {
    "text": "something is wet from exodus an LCD maybe you have different versions of the request and when it's wet",
    "start": "3284810",
    "end": "3290599"
  },
  {
    "text": "that's a conversion going on and requesters possess something is written",
    "start": "3290599",
    "end": "3295730"
  },
  {
    "text": "back to HDD and then a second conversion is going on just a quick glimpse here on",
    "start": "3295730",
    "end": "3303440"
  },
  {
    "start": "3300000",
    "end": "3371000"
  },
  {
    "text": "what queue cutter does internally so if you say cue cutter get devices it",
    "start": "3303440",
    "end": "3308520"
  },
  {
    "text": "use the highest version it knows it's a preferred version and there's a fixed order if you have to be one it you",
    "start": "3308520",
    "end": "3316349"
  },
  {
    "text": "cracker will use that if you don't have that it will try I mean it knows which",
    "start": "3316349",
    "end": "3321990"
  },
  {
    "text": "reference exists its users discovery but it will order them in this way so v1",
    "start": "3321990",
    "end": "3328440"
  },
  {
    "text": "I for one is not used by default so you really have to tell it you see one I have one as soon as every you v1 in this",
    "start": "3328440",
    "end": "3335550"
  },
  {
    "text": "category so in your city ID manifest if you party we use it and discovery will",
    "start": "3335550",
    "end": "3340950"
  },
  {
    "text": "makes us just transparent for the user if you don't deploys a conversion there",
    "start": "3340950",
    "end": "3346500"
  },
  {
    "text": "Pook and you just try queue cutter get devices it will still try it to get a v1",
    "start": "3346500",
    "end": "3352280"
  },
  {
    "text": "but the a Piazza will call out to a web hook it will Co doesn't work for",
    "start": "3352280",
    "end": "3359310"
  },
  {
    "text": "whatever reason for connection refused or something like that and it's a",
    "start": "3359310",
    "end": "3364380"
  },
  {
    "text": "request will fail so conversion is important as soon as you define a v1 in your manifest alright so I said already",
    "start": "3364380",
    "end": "3373349"
  },
  {
    "text": "it's just a different picture of what what I said before that's a server and your request comes",
    "start": "3373349",
    "end": "3378780"
  },
  {
    "text": "in there's no conversion going on for CDs it's bit different and for native types the conversion happens for cides",
    "start": "3378780",
    "end": "3386760"
  },
  {
    "text": "when it's it's wet from HDD it's converted to the world from so request so from green tube to blue here in this",
    "start": "3386760",
    "end": "3392640"
  },
  {
    "text": "case the rest logic is done like an update or patch is done and when it's written back there's a second conversion",
    "start": "3392640",
    "end": "3399630"
  },
  {
    "text": "so expect two of them at least they can be more if you have epics involved that",
    "start": "3399630",
    "end": "3405359"
  },
  {
    "text": "books might require different versions there might be many more of those calls to a report but the normal case for for",
    "start": "3405359",
    "end": "3412109"
  },
  {
    "text": "a white operation is to at these two",
    "start": "3412109",
    "end": "3417240"
  },
  {
    "text": "points in the API server the APS our coils out to your epic and to do that",
    "start": "3417240",
    "end": "3422660"
  },
  {
    "text": "you have to register every side web book already it's in the manifesto society so",
    "start": "3422660",
    "end": "3429630"
  },
  {
    "text": "it knows about that and we'll do those codes and those calls will get an object",
    "start": "3429630",
    "end": "3435720"
  },
  {
    "text": "so it's just a normal web book which is implemented by a goal for example our example here",
    "start": "3435720",
    "end": "3441920"
  },
  {
    "text": "so it's an HTTP server and it gets some requests and this request in the body it",
    "start": "3441920",
    "end": "3448010"
  },
  {
    "text": "has a conversion of you okay so let's look a little more at this code it's",
    "start": "3448010",
    "end": "3454550"
  },
  {
    "text": "great so what we know now is if we register a web hook in our CR D with that stanza it's going to API server is",
    "start": "3454550",
    "end": "3462920"
  },
  {
    "text": "going to know to start calling our web hook and these are kind of the go representations of the request in the",
    "start": "3462920",
    "end": "3468200"
  },
  {
    "text": "responses so let's look a little bit at the code in the conversion directory is",
    "start": "3468200",
    "end": "3475340"
  },
  {
    "start": "3469000",
    "end": "3503000"
  },
  {
    "text": "where we have the code for our conversion web hook and if you'd like you can look briefly at main go we're",
    "start": "3475340",
    "end": "3480680"
  },
  {
    "text": "not going to make any changes there but it will give you a sense of what some of the setup in handling code for a",
    "start": "3480680",
    "end": "3486950"
  },
  {
    "text": "conversion web poky is and then the bulk of our actual business logic is over in convert go we've got three main",
    "start": "3486950",
    "end": "3493910"
  },
  {
    "text": "functions that we're gonna look at really briefly and we're gonna see see",
    "start": "3493910",
    "end": "3499220"
  },
  {
    "text": "how this is works and how we test it and how we make sure it's right so this is the main function and it's only",
    "start": "3499220",
    "end": "3506150"
  },
  {
    "start": "3503000",
    "end": "3589000"
  },
  {
    "text": "responsible for converting one object we get lists we get lists of object to convert from the API server but we've",
    "start": "3506150",
    "end": "3513350"
  },
  {
    "text": "already looped through that in a separate function and just called this individually so our two inputs here are the object that needs to be converted",
    "start": "3513350",
    "end": "3520040"
  },
  {
    "text": "and what we need to convert it to the API version string tells us what we need",
    "start": "3520040",
    "end": "3525230"
  },
  {
    "text": "to convert it to we need to either successfully convert that object or return some back some meaningful error",
    "start": "3525230",
    "end": "3530360"
  },
  {
    "text": "about why we couldn't now in our particular case we're only supporting the conversion of the device customer",
    "start": "3530360",
    "end": "3538070"
  },
  {
    "text": "resource type so in our switch statement we're gonna handle both of converting",
    "start": "3538070",
    "end": "3543770"
  },
  {
    "text": "from v1 alpha 1 and from v1 so that's our two cases and let's just look at one",
    "start": "3543770",
    "end": "3548930"
  },
  {
    "text": "of those cases because the other one is going to be symmetrical to it so in the case where we get a v1 alpha one we're going to make sure that we're actually",
    "start": "3548930",
    "end": "3554870"
  },
  {
    "text": "converting it to v1 it's the only other thing we could convert it to so far because we only have two versions so we",
    "start": "3554870",
    "end": "3560720"
  },
  {
    "text": "just make a check on that and then what we're gonna do is we're gonna return back as v1 device this is the same as",
    "start": "3560720",
    "end": "3566710"
  },
  {
    "text": "the input except that the values are different because that's the only thing that we changed about our devices was",
    "start": "3566710",
    "end": "3572240"
  },
  {
    "text": "how we structured our values so you'll see everywhere have a value list we're just going to call conversion function there but",
    "start": "3572240",
    "end": "3578659"
  },
  {
    "text": "otherwise we're building a device result that is the same as what we were provided with and we would do basically",
    "start": "3578659",
    "end": "3585649"
  },
  {
    "text": "the same thing for v1 interest in the reverse now testing and this is",
    "start": "3585649",
    "end": "3590899"
  },
  {
    "start": "3589000",
    "end": "3600000"
  },
  {
    "text": "interesting you you really don't want to put something like this into production until you've tested it pretty carefully and fortunately kubernetes has been",
    "start": "3590899",
    "end": "3598819"
  },
  {
    "text": "building and testing converters internally for a long time for all the built-in types so we can kind of leverage the strategies have been used",
    "start": "3598819",
    "end": "3605329"
  },
  {
    "text": "there to do some testing and go has a utility library called the fuzzer that we're going to take advantage of what",
    "start": "3605329",
    "end": "3611689"
  },
  {
    "text": "the fuzzer will do is if we give it some type some go type that represents say our device it can populate that with",
    "start": "3611689",
    "end": "3617989"
  },
  {
    "text": "values now we're gonna have to augment that a little bit and so what we've done",
    "start": "3617989",
    "end": "3623329"
  },
  {
    "text": "if you go and look in the api's directory you can see the directory here listed right up at the top if you go and",
    "start": "3623329",
    "end": "3630140"
  },
  {
    "text": "look at this file what we've done is we've augmented our fuzzer to know how to handle and produce a",
    "start": "3630140",
    "end": "3636199"
  },
  {
    "text": "valid value in the case where you can either have an integer a boolean or",
    "start": "3636199",
    "end": "3641749"
  },
  {
    "text": "float these were all for kind of the purposes of the fuzzer it just thought that these were three optional fields",
    "start": "3641749",
    "end": "3647299"
  },
  {
    "text": "and it didn't know that it should only populate one of them every time it creates an object so we're telling it to",
    "start": "3647299",
    "end": "3652969"
  },
  {
    "text": "do that so we're just taking a random value between this value of zero and three and picking which of those possible options to produce and once",
    "start": "3652969",
    "end": "3660229"
  },
  {
    "text": "we've done this we've now told the fuzzer everything it needs so that it can generate valid devices for us and",
    "start": "3660229",
    "end": "3666679"
  },
  {
    "text": "you would do this for whatever types of objects you have in the cases of basic fields the fuzzer already knows what to",
    "start": "3666679",
    "end": "3671749"
  },
  {
    "text": "do in the cases where you have more complex types or validation rules you might need to teach it what is valid",
    "start": "3671749",
    "end": "3678459"
  },
  {
    "text": "once you've done that then it gets pretty straightforward here we have some fairly general purpose code that's just",
    "start": "3678459",
    "end": "3683779"
  },
  {
    "text": "iterating over the types that we have and the versions of those types and then",
    "start": "3683779",
    "end": "3688939"
  },
  {
    "text": "it's going to run you know a thousand iterations of what we call a round-trip test and so all we're going to do is you",
    "start": "3688939",
    "end": "3695029"
  },
  {
    "text": "take advantage of our fuzzer to create an object we create an object X we populate it with our fuzzer",
    "start": "3695029",
    "end": "3701149"
  },
  {
    "text": "we stamp on the correct route version kind for it and now we have a generated object we then figure out which version",
    "start": "3701149",
    "end": "3708679"
  },
  {
    "text": "we're - which is just the opposite version we're already at so if we're already at v1 we're gonna convert to - view 1 alpha",
    "start": "3708679",
    "end": "3714770"
  },
  {
    "text": "1 and then we just do two conversion steps right here first we convert it from the version we're at to the other",
    "start": "3714770",
    "end": "3720559"
  },
  {
    "text": "version and then we just convert it back again that's round-tripping once we've done that we should be able to assert that",
    "start": "3720559",
    "end": "3727150"
  },
  {
    "text": "what we started with is also what we ended with right as long as you as long as we can say it went back from one",
    "start": "3727150",
    "end": "3733490"
  },
  {
    "text": "version of the other and then back again with round round trip tested ax so here you can see that flow you start with v 1",
    "start": "3733490",
    "end": "3739039"
  },
  {
    "text": "you go to V 1 alpha 1 you go back to V 1 and you check if they're equal and we'll",
    "start": "3739039",
    "end": "3744079"
  },
  {
    "text": "do that in both directions and we can actually run this you can run this right there on your on your command line you'll see down here we have a go test",
    "start": "3744079",
    "end": "3750650"
  },
  {
    "text": "command that will run our round-trip testing and if you run it and I'll go",
    "start": "3750650",
    "end": "3756260"
  },
  {
    "text": "ahead and just do that we're going to see that we have a problem",
    "start": "3756260",
    "end": "3760780"
  },
  {
    "text": "so it's in the conversion directory so it's part of converting their book and",
    "start": "3777099",
    "end": "3782240"
  },
  {
    "text": "there's a convert test and that's where we have put the tests here and yeah we",
    "start": "3782240",
    "end": "3791029"
  },
  {
    "text": "have a very very simple test convert which just has two examples or something like that and yeah just small cast very",
    "start": "3791029",
    "end": "3798470"
  },
  {
    "text": "simple but it doesn't use passing and the second one if you go down here this is what what Joe just talked about and",
    "start": "3798470",
    "end": "3804740"
  },
  {
    "text": "everyone that wait for population",
    "start": "3804740",
    "end": "3811029"
  },
  {
    "text": "everything is wet why is it wet yeah",
    "start": "3811029",
    "end": "3816200"
  },
  {
    "text": "what does this mean all right so let's try and interpret this error so you can see from the air that it says round-trip",
    "start": "3816200",
    "end": "3823670"
  },
  {
    "text": "failed on devices and then it says expected something that got something else usually what I like to do when I",
    "start": "3823670",
    "end": "3828950"
  },
  {
    "text": "get in there and go is just find the code that printed the air failed to",
    "start": "3828950",
    "end": "3834589"
  },
  {
    "text": "convert yes this is it so this is the",
    "start": "3834589",
    "end": "3840289"
  },
  {
    "text": "air it was on our deep equal comparison so let's look at what this does first it does a reflect D people and checks if",
    "start": "3840289",
    "end": "3846500"
  },
  {
    "text": "what we originally passed in is what we got back and if that's not equal then it prints our air and it uses a diff",
    "start": "3846500",
    "end": "3852950"
  },
  {
    "text": "object-- reflect diff to print out how the object had expected differs from",
    "start": "3852950",
    "end": "3858230"
  },
  {
    "text": "what it got and so a is what is it expected and B is what it got now this",
    "start": "3858230",
    "end": "3864589"
  },
  {
    "text": "is a little it takes a little bit of go knowledge to interpret what these two strings mean the first string means that",
    "start": "3864589",
    "end": "3872180"
  },
  {
    "text": "you have a a slice of type V Wanda value",
    "start": "3872180",
    "end": "3877490"
  },
  {
    "text": "but it's nil and this second one says you have a slice of v1 dot value but",
    "start": "3877490",
    "end": "3883400"
  },
  {
    "text": "it's empty so it's not nil it's just an empty it's just an empty array so to speak where's the first one is actually",
    "start": "3883400",
    "end": "3889369"
  },
  {
    "text": "in nil array well that's a problem so I think the next step would be to go and",
    "start": "3889369",
    "end": "3895549"
  },
  {
    "text": "find where in the code that happened so what we could do is go into our convert function and I'll give you guys all a",
    "start": "3895549",
    "end": "3901670"
  },
  {
    "text": "second to see if you can find it but what we're looking for is when we have v1 values and you know",
    "start": "3901670",
    "end": "3908480"
  },
  {
    "text": "we converted those presumably from v1 to v1 alpha-1 in the back to v1 again because and we were expecting to get a",
    "start": "3908480",
    "end": "3916190"
  },
  {
    "text": "nil but instead we got an array man this",
    "start": "3916190",
    "end": "3923660"
  },
  {
    "text": "kind of analysis we show it because it's what we do when we build api's with",
    "start": "3923660",
    "end": "3929420"
  },
  {
    "text": "conversion it's it's really about very detailed and rigorous work to get things",
    "start": "3929420",
    "end": "3936200"
  },
  {
    "text": "right to get this equality which we had on the sound trip 100% correct so it",
    "start": "3936200",
    "end": "3942470"
  },
  {
    "text": "makes a difference whether there is nil which is a null in undefined and Jason usually or it's an empty element because",
    "start": "3942470",
    "end": "3950180"
  },
  {
    "text": "you can imagine when your own trip sudden these object changes and this is nothing you want to have so it's really",
    "start": "3950180",
    "end": "3955849"
  },
  {
    "text": "something we do every day when we build native API it's the same the same procedure the same steps here you must",
    "start": "3955849",
    "end": "3963079"
  },
  {
    "text": "be this impaired and get it yeah as wide as possible remember that we said",
    "start": "3963079",
    "end": "3969500"
  },
  {
    "text": "exhaustive tests so only test things I mean test as much as possible with fuzzing with random values but only",
    "start": "3969500",
    "end": "3976279"
  },
  {
    "text": "rarely dated objects there's no sense to convert something which is not wedded so",
    "start": "3976279",
    "end": "3982279"
  },
  {
    "text": "this whole process here of getting out rips writes it's a kind of counter play or a counter part of validation in the",
    "start": "3982279",
    "end": "3991250"
  },
  {
    "text": "moment you you define the validation like the open API based we have here you also work on your own trips so it's",
    "start": "3991250",
    "end": "3998390"
  },
  {
    "text": "always both sides and get them to match this is the basic idea here and if I",
    "start": "3998390",
    "end": "4003940"
  },
  {
    "text": "won't rip works and you are sure it's pretty exhaustive what you do there what we test there then you're pretty sure",
    "start": "4003940",
    "end": "4009160"
  },
  {
    "text": "that validation is good and yeah so our trip is really something which is by",
    "start": "4009160",
    "end": "4014859"
  },
  {
    "text": "active so it goes really without any data loss in both directions so I think I found the bugs okay if I fix it you",
    "start": "4014859",
    "end": "4021369"
  },
  {
    "text": "know all right so I noticed that most of these conversions for values are taking",
    "start": "4021369",
    "end": "4027819"
  },
  {
    "text": "in let's see that one's just scalars let's see but I noticed that",
    "start": "4027819",
    "end": "4034220"
  },
  {
    "text": "this one is working with arrays but it doesn't check if the inputs in all so I'll check that so what if if I might",
    "start": "4034220",
    "end": "4047240"
  },
  {
    "text": "have you type Stefan it's a German keyboard I'm sorry so you want to check",
    "start": "4047240",
    "end": "4053450"
  },
  {
    "text": "if in this knee other words and yesterday's maybe return nil and don't go into this make which gives you a",
    "start": "4053450",
    "end": "4060230"
  },
  {
    "text": "empty list all right so let's let's save that and see if I got it right ah sure",
    "start": "4060230",
    "end": "4072980"
  },
  {
    "text": "enough all right so 1000 times it works the trance is high that this wood will",
    "start": "4072980",
    "end": "4077990"
  },
  {
    "text": "be correct in the native types actually we have it sometimes even after 1000",
    "start": "4077990",
    "end": "4084170"
  },
  {
    "text": "iterations in CIA might be fake so maybe after 100 runs we find some some case",
    "start": "4084170",
    "end": "4090410"
  },
  {
    "text": "some random where you spent still wrong but 1000 already pretty good but there are some advances at the buzzer so for",
    "start": "4090410",
    "end": "4096710"
  },
  {
    "text": "example if later somebody went and added a new field to this and it was just a string the fuzz would automatically pick that",
    "start": "4096710",
    "end": "4102620"
  },
  {
    "text": "up and start testing it so it means that in many cases you're going to have to do less work to keep your tests in sync",
    "start": "4102620",
    "end": "4108740"
  },
  {
    "text": "which could result in fewer defects than having to manually manage that so there's a trade-off okay with admission",
    "start": "4108740",
    "end": "4120740"
  },
  {
    "text": "yeah um maybe before before I do that I just show once in such a manner that it",
    "start": "4120740",
    "end": "4126890"
  },
  {
    "text": "really works so I haven't proofs a new change now I mean this nail is not",
    "start": "4126890",
    "end": "4132830"
  },
  {
    "text": "really visible it's it's not so far I mean it's important to get it right but I haven't pushed it now so get devices",
    "start": "4132830",
    "end": "4141290"
  },
  {
    "text": "as I said it will just take say one version looks fine let's look at one of them and maybe shows ah me lots of",
    "start": "4141290",
    "end": "4152990"
  },
  {
    "text": "modules I wanted to see no because the controller doesn't work quite oh yeah we",
    "start": "4152990",
    "end": "4159529"
  },
  {
    "text": "don't know what when I work there would be value so you don't really see any difference but what do you see at the",
    "start": "4159530",
    "end": "4164810"
  },
  {
    "text": "moment it's it's a v1 so Q part uses v1 and if you want to use a different version you have to do it like that so",
    "start": "4164810",
    "end": "4171620"
  },
  {
    "text": "you have to white the resource names and subversion and then the group name and in this moment the conversion is called",
    "start": "4171620",
    "end": "4178460"
  },
  {
    "text": "we could look at the conversion there poop now there might be a lock line but you see here it's now v1 i1 so this",
    "start": "4178460",
    "end": "4185630"
  },
  {
    "text": "works yeah here we actually have something why do we have I'd say list I thought every everything",
    "start": "4185630",
    "end": "4191660"
  },
  {
    "text": "not only yeah so we have some values here and you see them there we need to",
    "start": "4191660",
    "end": "4197690"
  },
  {
    "text": "be one I for one variance where you have the value and the type all right so much",
    "start": "4197690",
    "end": "4203600"
  },
  {
    "text": "about conversion so home tube testing please do it if you if you start with that it's a super useful tool and we",
    "start": "4203600",
    "end": "4211040"
  },
  {
    "text": "learnt when we really use that in upstream development the chance is very high is that we get it right conversion",
    "start": "4211040",
    "end": "4217640"
  },
  {
    "text": "is hot so don't be afraid it's hard for everybody everything which is non-trivial and conversion to get it",
    "start": "4217640",
    "end": "4224570"
  },
  {
    "text": "completely right and without data loss it takes time it takes gray hair so it",
    "start": "4224570",
    "end": "4229760"
  },
  {
    "text": "gives you a gray hairs it's it's a hard task Oh what attrition um a lot of",
    "start": "4229760",
    "end": "4237680"
  },
  {
    "text": "things you can do an open API but you cannot do everything open API is limited",
    "start": "4237680",
    "end": "4242840"
  },
  {
    "text": "to a certain degree especially you cannot do things like here I want I want to to check if I create a module that",
    "start": "4242840",
    "end": "4251210"
  },
  {
    "text": "all the devices actually exist so it's something which is far beyond open API so it wants to to check devices",
    "start": "4251210",
    "end": "4259100"
  },
  {
    "text": "life when a request for module comes in so if you create no module or an update module it will check those three devices",
    "start": "4259100",
    "end": "4266180"
  },
  {
    "text": "exist so it has to make calls as a API server so it's much more than you really do this open API which you can do",
    "start": "4266180",
    "end": "4274030"
  },
  {
    "text": "admission yeah it's a big yellow block here in the chain validation of open API",
    "start": "4274030",
    "end": "4281510"
  },
  {
    "text": "happens here whereas white block of validation is validation of using",
    "start": "4281510",
    "end": "4287330"
  },
  {
    "text": "admission happens just after so we will each one of those blocks here on the right of validation and our admission",
    "start": "4287330",
    "end": "4294380"
  },
  {
    "text": "DEP observer will serve that so it will get every object so there's one call per object or per request actually",
    "start": "4294380",
    "end": "4300880"
  },
  {
    "text": "we want to check of course create an update because I mean the leads we don't",
    "start": "4300880",
    "end": "4306250"
  },
  {
    "text": "care about as a devices exist and gets we are also not interested in so um the",
    "start": "4306250",
    "end": "4311679"
  },
  {
    "text": "updates and creates a into a cell interesting and pictures are part of",
    "start": "4311679",
    "end": "4316929"
  },
  {
    "text": "updates so we really just need those two and our implementation here down here it",
    "start": "4316929",
    "end": "4323920"
  },
  {
    "text": "will it will have a watch to the API server so it will be qualifies the API saw up at the same time it also uses the",
    "start": "4323920",
    "end": "4330699"
  },
  {
    "text": "API to get everything which has changed for devices and we will use an informer",
    "start": "4330699",
    "end": "4338050"
  },
  {
    "text": "in the code so this is really fast because there's a memory cache of devices inside of a book so it's not",
    "start": "4338050",
    "end": "4344380"
  },
  {
    "text": "really life go home read to the API servers that might be some lag maybe",
    "start": "4344380",
    "end": "4350500"
  },
  {
    "text": "half a second so it can be that device already exists but for this use case it's good enough",
    "start": "4350500",
    "end": "4357030"
  },
  {
    "text": "all right you have to register that the repo exists so there's some object",
    "start": "4357030",
    "end": "4364030"
  },
  {
    "text": "called validating their pool configuration everything I talked about here it also exists in a mutating form",
    "start": "4364030",
    "end": "4370360"
  },
  {
    "text": "so you can also register mutate mutating webhooks to change request to change objects",
    "start": "4370360",
    "end": "4376540"
  },
  {
    "text": "before they created or updated but we will just use as a validating case here",
    "start": "4376540",
    "end": "4381610"
  },
  {
    "text": "but it's basically the same and no much more complex this is a computation so",
    "start": "4381610",
    "end": "4386710"
  },
  {
    "text": "the object which registers our webhook in the cluster and you create this",
    "start": "4386710",
    "end": "4391719"
  },
  {
    "text": "object asta white we give it a nice name deep-sea you can i oh I'm very important",
    "start": "4391719",
    "end": "4397000"
  },
  {
    "text": "to fader policy so when our poop doesn't work like the pot goes down or something",
    "start": "4397000",
    "end": "4402850"
  },
  {
    "text": "like that or network goes down and we want to fail so we can also yeah react",
    "start": "4402850",
    "end": "4408040"
  },
  {
    "text": "open on errors here I think it knows a key word so if you put ignore here it",
    "start": "4408040",
    "end": "4413860"
  },
  {
    "text": "will try to cause a red book if it gets the response I mean it it will be",
    "start": "4413860",
    "end": "4419260"
  },
  {
    "text": "followed but it's we're focused on down network or whatever it doesn't matter but we want to failure so this is a very",
    "start": "4419260",
    "end": "4425830"
  },
  {
    "text": "important yeah we want you to tell it when we are called we want to be called",
    "start": "4425830",
    "end": "4432130"
  },
  {
    "text": "on this API hopes or own on v1 I for one it's only version four modules on create and update and only on",
    "start": "4432130",
    "end": "4439929"
  },
  {
    "text": "modules be pretty strict here I mean really restrictive don't put white cards",
    "start": "4439929",
    "end": "4447100"
  },
  {
    "text": "they're everywhere this is about the class testability so if your web hoop goes down those objects in our case the",
    "start": "4447100",
    "end": "4454389"
  },
  {
    "text": "modules are basically not working anymore so yeah be prepared if you if",
    "start": "4454389",
    "end": "4459909"
  },
  {
    "text": "you validate pots for example and your web book goes down you will have a hard",
    "start": "4459909",
    "end": "4465070"
  },
  {
    "text": "time to restart it because the pot for the red book is also going through the book and it's it's circle safe affluence",
    "start": "4465070",
    "end": "4473050"
  },
  {
    "text": "so try to restrict its and be prepared for those safe references when he's",
    "start": "4473050",
    "end": "4479020"
  },
  {
    "text": "similar to to the conversion again you have you have a client config here so",
    "start": "4479020",
    "end": "4484780"
  },
  {
    "text": "it's the same thing I think it's even the same implementation behind it's behind the service and services name and",
    "start": "4484780",
    "end": "4491199"
  },
  {
    "text": "there's a path and again there's admission review version so abused the",
    "start": "4491199",
    "end": "4497679"
  },
  {
    "text": "objects you get are perfect we have v1 so admission is promoted to",
    "start": "4497679",
    "end": "4503050"
  },
  {
    "text": "tree a meanwhile but again there's a v1 a beta one version for admission that",
    "start": "4503050",
    "end": "4510159"
  },
  {
    "text": "I've used and we will just use that one yeah and by that I guess over knows",
    "start": "4510159",
    "end": "4517840"
  },
  {
    "text": "everything about our book and it with chords alright so again let's go look at",
    "start": "4517840",
    "end": "4525580"
  },
  {
    "text": "some code here are the type of just the",
    "start": "4525580",
    "end": "4530889"
  },
  {
    "text": "lower one we didn't change oh yeah that's there should be a mission response here on the bottom of course",
    "start": "4530889",
    "end": "4537090"
  },
  {
    "text": "I'll be symmetrical but it's a sign that say those two mechanisms are very very similar suppose they use the same codes",
    "start": "4537090",
    "end": "4543310"
  },
  {
    "text": "the name structure and API yeah it's great now that you've already seen conversion review you can kind of guess",
    "start": "4543310",
    "end": "4549610"
  },
  {
    "text": "at how in addition review is going to work so I don't need to say too much more about this side now admission review has a lot more fields this is",
    "start": "4549610",
    "end": "4557350"
  },
  {
    "text": "great this means that if you are doing security checks or policy checks you",
    "start": "4557350",
    "end": "4562659"
  },
  {
    "text": "have a lot at your disposal to compare against in our particular case we're we're just interested in",
    "start": "4562659",
    "end": "4568099"
  },
  {
    "text": "contents of what's being changed we're not interested in who did it or you know what name space it was in or things like",
    "start": "4568099",
    "end": "4574369"
  },
  {
    "text": "that so we're gonna focus in on just two of the fields the object in the old object in fact we're only really going",
    "start": "4574369",
    "end": "4579709"
  },
  {
    "text": "to focus on the object because that is what we're gonna change the value to the old object for an update is what it was",
    "start": "4579709",
    "end": "4585499"
  },
  {
    "text": "before it changed that can sometimes be useful and remember what we're doing here we've got in every single module",
    "start": "4585499",
    "end": "4591379"
  },
  {
    "text": "we've got three devices with device names and we want to make sure that those device names that were entered in",
    "start": "4591379",
    "end": "4597679"
  },
  {
    "text": "they're only changed to values the point to actual existing devices now if it",
    "start": "4597679",
    "end": "4604489"
  },
  {
    "text": "does match an existing device we can return allowed true that means that we are admitting this request everything",
    "start": "4604489",
    "end": "4610459"
  },
  {
    "text": "looks fine if it doesn't we're gonna say a lot equals false and we also should provide back some errors in the result",
    "start": "4610459",
    "end": "4616999"
  },
  {
    "text": "saying why this can go all the way back to the client this is the only way they're gonna be able to know what went",
    "start": "4616999",
    "end": "4622129"
  },
  {
    "text": "wrong and how to correct the request so if they fixed it and tried it again they could be successful it's very important",
    "start": "4622129",
    "end": "4627769"
  },
  {
    "text": "to provide something useful to them they're also just in passing now we're talking about validating web hooks so",
    "start": "4627769",
    "end": "4633379"
  },
  {
    "text": "this doesn't apply to us directly but if you were to be building a mutating web hook the patch is where you would send",
    "start": "4633379",
    "end": "4639859"
  },
  {
    "text": "whatever change you want to make to the object so since we see it here I thought it would just mention it in passing all",
    "start": "4639859",
    "end": "4646369"
  },
  {
    "text": "right so we're gonna go back and look at some code we're gonna be looking in the admission director I'm actually gonna go ahead and open that while we go webhook",
    "start": "4646369",
    "end": "4668510"
  },
  {
    "text": "go so this is our main admission web hook and you can see some basic set up",
    "start": "4668510",
    "end": "4677119"
  },
  {
    "text": "there's our main it's gonna handle the requests Oh so somewhere in here we're",
    "start": "4677119",
    "end": "4691669"
  },
  {
    "text": "gonna find a handler and what's good if you good on yes",
    "start": "4691669",
    "end": "4698550"
  },
  {
    "text": "the max we created so the multiplexer and modular dish yeah we create a hen",
    "start": "4698550",
    "end": "4705570"
  },
  {
    "text": "laughing so it's not rocket science is Hugo really boring actually it just didn't Ormond HTTP handler right",
    "start": "4705570",
    "end": "4711960"
  },
  {
    "text": "so now now we have our handler function and we can look briefly at some of the",
    "start": "4711960",
    "end": "4717119"
  },
  {
    "text": "work that's done there now one of the things we have to be able to do is get a list of valid device names and the way",
    "start": "4717119",
    "end": "4723630"
  },
  {
    "text": "that we're gonna do that is we're gonna use one of the kubernetes client library is called an informer basically what a",
    "start": "4723630",
    "end": "4730170"
  },
  {
    "text": "farmer is going to do is it's going to allow us to build an in-memory cache of all the devices right here in our web",
    "start": "4730170",
    "end": "4736469"
  },
  {
    "text": "hook process and then we can ask for requests to that under the hood what's going on is a little interesting and",
    "start": "4736469",
    "end": "4741869"
  },
  {
    "text": "then former's first gonna list the devices that you asked it about and then it's going to establish an a watch and",
    "start": "4741869",
    "end": "4746999"
  },
  {
    "text": "it's going to keep that cache up to date and if it ever gets too stale or gets out-of-date or needs to it can relist",
    "start": "4746999",
    "end": "4752280"
  },
  {
    "text": "and keep doing that but at any given point in time you're gonna have this eventually consistent cache and then",
    "start": "4752280",
    "end": "4758190"
  },
  {
    "text": "we're we're gonna use the types of findings that we generated from our client types to do that so we've got",
    "start": "4758190",
    "end": "4764820"
  },
  {
    "text": "this nice convenient way of saying things that v1 alpha one devices so we know exactly what thing we're dealing",
    "start": "4764820",
    "end": "4771239"
  },
  {
    "text": "with and then we're gonna create a Lister and the Lister allows us to probe or ask questions to our in-memory cache",
    "start": "4771239",
    "end": "4776670"
  },
  {
    "text": "we can get or lists those devices and those those are gonna be really cheap requests because it's just a local",
    "start": "4776670",
    "end": "4781980"
  },
  {
    "text": "in-memory lookup so now well now that we have devices that we can check the names",
    "start": "4781980",
    "end": "4788309"
  },
  {
    "text": "of all we need to do is figure out where to do our validation and you can see",
    "start": "4788309",
    "end": "4793530"
  },
  {
    "text": "that we have this handler function that's already done some work it's already decoded our admission review it's already decoded the request and",
    "start": "4793530",
    "end": "4801239"
  },
  {
    "text": "then we get down to a switch and the case that we care about is when we're handling the module now we configured",
    "start": "4801239",
    "end": "4808019"
  },
  {
    "text": "our web hooks so we should only ever be called four modules so if we didn't get called from module it makes sense that we'd report a failure back which is",
    "start": "4808019",
    "end": "4814800"
  },
  {
    "text": "exactly we do in our decays here in our default case here but let's just go ahead and look at that the case where",
    "start": "4814800",
    "end": "4821670"
  },
  {
    "text": "we're handing a module and see what I could look checking now so we've got our",
    "start": "4821670",
    "end": "4826829"
  },
  {
    "text": "handler you can see there's our Informer there's our Lister just like I expected here's a standard HTTP request handler",
    "start": "4826829",
    "end": "4834150"
  },
  {
    "text": "it's reading the body it's decoding it okay here's our switch statement okay",
    "start": "4834150",
    "end": "4841380"
  },
  {
    "text": "now we've got our module and so you know since we've gotten those go development environment here I should be able to do",
    "start": "4841380",
    "end": "4847440"
  },
  {
    "text": "things like module dot C I can expect",
    "start": "4847440",
    "end": "4857119"
  },
  {
    "text": "yeah okay so there's the spec for module I says pardon me si I learned how to use",
    "start": "4857119",
    "end": "4867690"
  },
  {
    "text": "German keyboards in front of you it's actually cool it's got a lot of nice",
    "start": "4867690",
    "end": "4872940"
  },
  {
    "text": "keys and there's oh there's our pump and our water and our sensor those are all",
    "start": "4872940",
    "end": "4879690"
  },
  {
    "text": "three of our devices right there so we can just take one of those now we've got our device and that's literally a device",
    "start": "4879690",
    "end": "4886409"
  },
  {
    "text": "name that dereferences to and so then the next thing that we're gonna have to",
    "start": "4886409",
    "end": "4891599"
  },
  {
    "text": "do and I'm gonna let you guys take over in just a second I'll show you one more small step I just left these here",
    "start": "4891599",
    "end": "4897989"
  },
  {
    "text": "because go really doesn't like it when you have unused variables so I just left them I told it I wanted to but what we",
    "start": "4897989",
    "end": "4905400"
  },
  {
    "text": "want to do is we want to take that device listern and we want to get an",
    "start": "4905400",
    "end": "4917369"
  },
  {
    "text": "accessor to the current name-space of the module looking so if we just do that",
    "start": "4917369",
    "end": "4925520"
  },
  {
    "text": "now we can call that Lister I think I",
    "start": "4929969",
    "end": "4938790"
  },
  {
    "text": "think forwards that's it enough at German keyboards so here I released at",
    "start": "4938790",
    "end": "4943920"
  },
  {
    "text": "least us basically the access to the cache and it has to get function so and just take the water alarm here and get",
    "start": "4943920",
    "end": "4952949"
  },
  {
    "text": "gives us back Watson advice we don't care about the device actually but we care about the error so if ever is not",
    "start": "4952949",
    "end": "4965150"
  },
  {
    "text": "nil we have this nice I was slice there",
    "start": "4965150",
    "end": "4970710"
  },
  {
    "text": "already so we just edit and what do we need that first one",
    "start": "4970710",
    "end": "4979880"
  },
  {
    "text": "because we're doing that if we're doing underscore in error we're signing the",
    "start": "4979890",
    "end": "4986070"
  },
  {
    "text": "underscore an error and then we're checking if air is not equal no on the same I just can't okay it's it's yet I",
    "start": "4986070",
    "end": "4992969"
  },
  {
    "text": "would know but I'd it should work all right oh that's let's let's see it builds us",
    "start": "4992969",
    "end": "5000670"
  },
  {
    "text": "yeah so in parallel just go ahead and do the same thing try to deploy this so if",
    "start": "5001510",
    "end": "5010160"
  },
  {
    "text": "you say at the moment you say cube cut or edits on an object and you modify a device named something which doesn't",
    "start": "5010160",
    "end": "5016219"
  },
  {
    "text": "exist it just works so there's nothing checking that and our goal of course is to do that",
    "start": "5016219",
    "end": "5023469"
  },
  {
    "text": "it's compiling yeah so here some",
    "start": "5032579",
    "end": "5040829"
  },
  {
    "text": "instructions how to do that you want to build it in the clouds the cloud shell",
    "start": "5040829",
    "end": "5049429"
  },
  {
    "text": "so here we see how it would look like if our controller would work somehow we have a panic here we have not",
    "start": "5050000",
    "end": "5059099"
  },
  {
    "text": "implemented the logic there so everything which happens here you can can do at home data on here and the",
    "start": "5059099",
    "end": "5065849"
  },
  {
    "text": "components this logic which sets the pumps it's part of the controller at the",
    "start": "5065849",
    "end": "5071219"
  },
  {
    "text": "moment it's empty so yeah there's just a to do there if you go into the controller and find the pressure",
    "start": "5071219",
    "end": "5077880"
  },
  {
    "text": "reconciler there's just a little fun implemented function if you implement that you you'll actually see that you're",
    "start": "5077880",
    "end": "5083790"
  },
  {
    "text": "controlling how many pumps are running at in any given point in time it's a good exercise that you hear at the end",
    "start": "5083790",
    "end": "5088889"
  },
  {
    "text": "alright so we have compiled we use kind here to loads us in two kinds should be",
    "start": "5088889",
    "end": "5096420"
  },
  {
    "text": "pretty fast and we update some manifests",
    "start": "5096420",
    "end": "5105860"
  },
  {
    "text": "long talk I over I guess to be named here so let's just use latest and charge",
    "start": "5106219",
    "end": "5116940"
  },
  {
    "text": "admission oh we have to apply of course any fests",
    "start": "5116940",
    "end": "5128630"
  },
  {
    "text": "no knows about it and it's pretty fast so it's already container creating it's",
    "start": "5128630",
    "end": "5134780"
  },
  {
    "text": "one in six seconds and if we now do",
    "start": "5134780",
    "end": "5140239"
  },
  {
    "text": "where'sa module it's in module Yama's so I edit the yamen and I just put which",
    "start": "5142250",
    "end": "5148619"
  },
  {
    "text": "one did we fix actually alarm I think so we didn't do all of them we just checked",
    "start": "5148619",
    "end": "5154920"
  },
  {
    "text": "the water alarm here so let's put something here which doesn't exist and there we go so it tells us the device",
    "start": "5154920",
    "end": "5164909"
  },
  {
    "text": "does not exist and this is is a string which you can pass back here",
    "start": "5164909",
    "end": "5170099"
  },
  {
    "text": "so it's this message yeah you can put anything and the user of Q cutter will just see the message as never cool",
    "start": "5170099",
    "end": "5178429"
  },
  {
    "text": "alright so Wi-Fi works fine looks like so we can skip the warning your item",
    "start": "5182149",
    "end": "5187649"
  },
  {
    "text": "that it doesn't work yeah so some last task so we are nearly at the end of the of the talk",
    "start": "5187649",
    "end": "5194809"
  },
  {
    "text": "yeah the first step you have just done life we've done at least one one check",
    "start": "5194809",
    "end": "5200459"
  },
  {
    "text": "of one of the devices here of course there are three of them so test all of them deploy that locally play with it",
    "start": "5200459",
    "end": "5206639"
  },
  {
    "text": "maybe even try to make it mutating at Mission Bay food and see how this work",
    "start": "5206639",
    "end": "5212999"
  },
  {
    "text": "should be the same so it's very similar and of course take a look on the controller so controller if you just run",
    "start": "5212999",
    "end": "5219629"
  },
  {
    "text": "the simulator its Boeing nothing happens what I will die pretty soon because Russia moves pretty fast at yeah some",
    "start": "5219629",
    "end": "5230760"
  },
  {
    "text": "logic which sets the pumps so use the client the client go client for devices",
    "start": "5230760",
    "end": "5236550"
  },
  {
    "text": "depending on the pressure which is wet from the device from the pressure sensor",
    "start": "5236550",
    "end": "5242039"
  },
  {
    "text": "and adapts the controllers adaptive programs at the pumps and yeah get to",
    "start": "5242039",
    "end": "5248219"
  },
  {
    "text": "some some pressure which is near 210 around 10 right well we've seen a bunch",
    "start": "5248219",
    "end": "5257249"
  },
  {
    "text": "today so we can just while you continue working that we can just recap since we only have a couple minutes left so that",
    "start": "5257249",
    "end": "5263539"
  },
  {
    "text": "that's what we worked on we worked on the research station and hopefully hopefully you've done a good job and",
    "start": "5263539",
    "end": "5268829"
  },
  {
    "text": "kept walter alive and healthy we covered a lot today so we covered versioning we",
    "start": "5268829",
    "end": "5274320"
  },
  {
    "text": "talked about how you can have multiple versions in the same CRD and have a deal about that and we talked about pruning which is a really important idea we're",
    "start": "5274320",
    "end": "5281099"
  },
  {
    "text": "moving to a really type safe system for CRTs that's essential for that we talked about validation both on single fields",
    "start": "5281099",
    "end": "5288959"
  },
  {
    "text": "and then we talked about how to validate across fields we talked about our webhook how to do some more advanced",
    "start": "5288959",
    "end": "5294119"
  },
  {
    "text": "cases we wrote code to update our api's using cout builder",
    "start": "5294119",
    "end": "5300180"
  },
  {
    "text": "we've looked at the controllers the code generators for that we've looked at some",
    "start": "5300180",
    "end": "5305790"
  },
  {
    "text": "open API schema in a more detail and we we've basically touched every extension",
    "start": "5305790",
    "end": "5311520"
  },
  {
    "text": "mechanism that you can use around CRTs and I think yeah so the versions are of",
    "start": "5311520",
    "end": "5318660"
  },
  {
    "text": "course important we have done a lot of work you see at the bottom are pruning",
    "start": "5318660",
    "end": "5324540"
  },
  {
    "text": "the forwarding it's all pretty new so you need at least 115 to have something I mean before that certain things like",
    "start": "5324540",
    "end": "5332910"
  },
  {
    "text": "cooling do not work conversion does not work so 115 is Goodbar we know that of",
    "start": "5332910",
    "end": "5338670"
  },
  {
    "text": "course some of you will target older cube versions there's not much we can do",
    "start": "5338670",
    "end": "5344130"
  },
  {
    "text": "I think just wait half a year that 115 is a lower version I guess yeah and just",
    "start": "5344130",
    "end": "5351990"
  },
  {
    "text": "try out those features and give feedback they are new but they're very well",
    "start": "5351990",
    "end": "5359070"
  },
  {
    "text": "tested inside of kubernetes admission is there for quite some time and we have",
    "start": "5359070",
    "end": "5364710"
  },
  {
    "text": "seen some projects or policy agent here of course so it's not new but conversion",
    "start": "5364710",
    "end": "5370230"
  },
  {
    "text": "is new is try it if you've got issues report them make issues in queue builder",
    "start": "5370230",
    "end": "5379650"
  },
  {
    "text": "so we have shown cubed it's a cool tool it has some has some rough edges but we",
    "start": "5379650",
    "end": "5387450"
  },
  {
    "text": "don't want to live without it especially for open API it's very very powerful and yeah contribute to that as well so if",
    "start": "5387450",
    "end": "5394710"
  },
  {
    "text": "you have ideas fixes contribute to build a needs people so and the community's",
    "start": "5394710",
    "end": "5402600"
  },
  {
    "text": "community takes GA features pretty seriously so it's great to have all",
    "start": "5402600",
    "end": "5407670"
  },
  {
    "text": "these main features in GA that means that we are not going to be breaking backwards compatibility or api's this is something you can really build on and",
    "start": "5407670",
    "end": "5413760"
  },
  {
    "text": "use over time I think that's it any questions yeah",
    "start": "5413760",
    "end": "5424730"
  },
  {
    "text": "the question is do we have a regular expression based CRT validation yeah so",
    "start": "5426590",
    "end": "5435059"
  },
  {
    "text": "I showed the pet on maka it's it's a like X so you can put anything you like",
    "start": "5435059",
    "end": "5441329"
  },
  {
    "text": "there it's a pattern for IPS we also have there's something in omega API quote",
    "start": "5441329",
    "end": "5448650"
  },
  {
    "text": "format so there's a type string and there's formatting there's an ipv4",
    "start": "5448650",
    "end": "5453800"
  },
  {
    "text": "format which is then checked you don't have to write a gangster's for I don't",
    "start": "5453800",
    "end": "5460139"
  },
  {
    "text": "have like 15 or 20 different formats we support and it's not documented in 116",
    "start": "5460139",
    "end": "5467400"
  },
  {
    "text": "if you look in master of cube inators and we look on the cid types we just recently some days ago",
    "start": "5467400",
    "end": "5473969"
  },
  {
    "text": "documented that for like 20 different formats exist already eyepiece name",
    "start": "5473969",
    "end": "5481520"
  },
  {
    "text": "durations time stems all those things",
    "start": "5481520",
    "end": "5486230"
  },
  {
    "text": "you remove four fields the moving of fields it doesn't hold trip by",
    "start": "5496090",
    "end": "5502240"
  },
  {
    "text": "definition so you probably I mean strictly speaking you cannot remove few",
    "start": "5502240",
    "end": "5507430"
  },
  {
    "text": "years you cannot do anything with us here the obvious missus he asked if you have conversion which is not by active",
    "start": "5507430",
    "end": "5514930"
  },
  {
    "text": "which uses data it's just not not allowed if you change things like you",
    "start": "5514930",
    "end": "5521260"
  },
  {
    "text": "change validation it's also incompatible because suddenly objects do not vary any",
    "start": "5521260",
    "end": "5527020"
  },
  {
    "text": "more there's one concept maybe it also applies here there's one concept we call",
    "start": "5527020",
    "end": "5532900"
  },
  {
    "text": "it ratcheting updates so we allow old",
    "start": "5532900",
    "end": "5538150"
  },
  {
    "text": "objects to be invalid for certain fields even allow to update them but everything",
    "start": "5538150",
    "end": "5544750"
  },
  {
    "text": "new is really strictly validated so this can help sometimes to adapt or to change",
    "start": "5544750",
    "end": "5550860"
  },
  {
    "text": "validation or to add fear to the move use for adding fields we have defaulting so defaulting is very helpful for that",
    "start": "5550860",
    "end": "5557580"
  },
  {
    "text": "because even old objects from Exedy are defaulted so you can add fields and even",
    "start": "5557580",
    "end": "5563020"
  },
  {
    "text": "have values for them even for all three old objects which are created months ago so it's pretty powerful but deletion",
    "start": "5563020",
    "end": "5571050"
  },
  {
    "text": "keeps the fields documented deprecated and at some point do validation maybe",
    "start": "5571050",
    "end": "5577180"
  },
  {
    "text": "and restricted ability but keep it because on trooping must work",
    "start": "5577180",
    "end": "5583590"
  },
  {
    "text": "the question is is is admission the only way to validate a CR is created in",
    "start": "5622330",
    "end": "5628060"
  },
  {
    "text": "either cluster scoped or namespace code I believe it depends on what you want",
    "start": "5628060",
    "end": "5634740"
  },
  {
    "text": "you can say when you create a custom resource you can say whether or not it's scope to name sir yes or request only",
    "start": "5634740",
    "end": "5640570"
  },
  {
    "text": "just one so so you already get out of the box the option of saying if you want this to be a clustered scope to see Rd",
    "start": "5640570",
    "end": "5646630"
  },
  {
    "text": "or not and then it's their custom resources you create from that will automatically follow that rule now if",
    "start": "5646630",
    "end": "5651730"
  },
  {
    "text": "you want to restrict it further on various namespaces you could have the option of either using like our back I",
    "start": "5651730",
    "end": "5657760"
  },
  {
    "text": "believe our back works it's fully supported but if you want to programmatically restrict the namespaces",
    "start": "5657760",
    "end": "5664870"
  },
  {
    "text": "like it should only be in cube system or in your operator you could use for the",
    "start": "5664870",
    "end": "5670120"
  },
  {
    "text": "admission yeah it's no other way and that's kind of the classic thing you'll see like for many of the common cases",
    "start": "5670120",
    "end": "5676870"
  },
  {
    "text": "you don't necessarily need to use an extension mechanism there are components built in the crew Bernays to do it the nice thing about having very",
    "start": "5676870",
    "end": "5683290"
  },
  {
    "text": "general-purpose extension mechanisms like we have is for all those things where you can't find any weather other",
    "start": "5683290",
    "end": "5688420"
  },
  {
    "text": "way to do it you still have an option yes",
    "start": "5688420",
    "end": "5695400"
  },
  {
    "text": "you want to get rid of all its versions I mean we want either one in a year you",
    "start": "5702569",
    "end": "5708749"
  },
  {
    "text": "don't want to see that anymore all right",
    "start": "5708749",
    "end": "5712039"
  },
  {
    "text": "yes only one can so yeah one consideration is downgrades if the",
    "start": "5717709",
    "end": "5724769"
  },
  {
    "text": "customer downgrades so if you introduce we won and also set star driven to be",
    "start": "5724769",
    "end": "5731399"
  },
  {
    "text": "one in this moment you cannot download anymore because a cluster suddenly has the ones in LCD and the old controller",
    "start": "5731399",
    "end": "5739530"
  },
  {
    "text": "cannot handle that anymore so usually you have this at least one version delay that's what we do upstream",
    "start": "5739530",
    "end": "5746339"
  },
  {
    "text": "at least yeah and after that you change it but there's also one thing if you",
    "start": "5746339",
    "end": "5753479"
  },
  {
    "text": "change the storage Raven you still have some old objects so keep in mind you have to migrate a pair",
    "start": "5753479",
    "end": "5760319"
  },
  {
    "text": "machinery has a tool it's either maybe beta now it's called a storage version",
    "start": "5760319",
    "end": "5765479"
  },
  {
    "text": "migrator it's under the cube 22:6 where you can tell this controller the",
    "start": "5765479",
    "end": "5770999"
  },
  {
    "text": "controller tell it Reeve right every see IDs where after you change the storage Worthen tells us migrator whose",
    "start": "5770999",
    "end": "5778109"
  },
  {
    "text": "migration and then everything is written and everything is v1 if you change to be one yeah we also have on the main CRD",
    "start": "5778109",
    "end": "5784919"
  },
  {
    "text": "documentation for kubernetes there's there's a list so kind of a recommended set of migration steps I think we still",
    "start": "5784919",
    "end": "5791129"
  },
  {
    "text": "have some work to get that a little firmer but it does it doesn't mention the storage migrator and kind of a basic flow and some of the considerations you",
    "start": "5791129",
    "end": "5797489"
  },
  {
    "text": "might want to take there yeah yes",
    "start": "5797489",
    "end": "5803089"
  },
  {
    "text": "which advanced features we are planning yeah there's one not sure it's advanced",
    "start": "5809830",
    "end": "5817179"
  },
  {
    "text": "mutability there's a cap for mutability so you can say fields cannot be changed anymore after creation I mentioned that",
    "start": "5817179",
    "end": "5827600"
  },
  {
    "text": "briefly in the API machinery deep-dive so if you want to look to watch the video it's there it's a cap at the",
    "start": "5827600",
    "end": "5832909"
  },
  {
    "text": "moment there's implementation let's not merged we targets to have neither of that next probably 1:18 so this comes we",
    "start": "5832909",
    "end": "5843260"
  },
  {
    "text": "are discussing voodoo before any kind of binary encoding but it's undecided so",
    "start": "5843260",
    "end": "5849050"
  },
  {
    "text": "it's very very fresh what are other types so potentially having a union type",
    "start": "5849050",
    "end": "5854810"
  },
  {
    "text": "as a formal tightness yeah Union types so that's what we did here what I had as as a as one of the gold stretch goal to",
    "start": "5854810",
    "end": "5863540"
  },
  {
    "text": "verify that the Union type is really just just one field is used the SM kept",
    "start": "5863540",
    "end": "5868670"
  },
  {
    "text": "to to add an extension to do that automatically and similarly we added",
    "start": "5868670",
    "end": "5875030"
  },
  {
    "text": "something called this type and the map type so you can define for a list that it's actually a set with named objects",
    "start": "5875030",
    "end": "5882530"
  },
  {
    "text": "and as we are working on ready dating that the name is just used once like",
    "start": "5882530",
    "end": "5888679"
  },
  {
    "text": "containers and pots every container as a name and they cannot really use them as it cannot be a conflict and this kind of",
    "start": "5888679",
    "end": "5895159"
  },
  {
    "text": "check it's hot it's it's impossible to be clear that an open API admission can",
    "start": "5895159",
    "end": "5900440"
  },
  {
    "text": "do it of course but you don't want to write code just to check that this type map type that's new okay I think we're",
    "start": "5900440",
    "end": "5908360"
  },
  {
    "text": "at time I'm happy to answer any questions afterwards but I think we're gonna step down from the podium thank you everybody thank you",
    "start": "5908360",
    "end": "5914430"
  },
  {
    "text": "[Applause]",
    "start": "5914430",
    "end": "5920839"
  }
]