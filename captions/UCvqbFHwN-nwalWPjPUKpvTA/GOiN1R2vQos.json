[
  {
    "start": "0",
    "end": "44000"
  },
  {
    "text": "hi hi guys I think it's that time so we get started",
    "start": "319",
    "end": "9469"
  },
  {
    "text": "so the session is about signal declare sure we'll be covering the intro and the",
    "start": "9469",
    "end": "16830"
  },
  {
    "text": "deep dive so the time allotted is pretty long but we will try to keep it short",
    "start": "16830",
    "end": "22080"
  },
  {
    "text": "being the last session of the day our target is to finish it in approximately 45 minutes",
    "start": "22080",
    "end": "29070"
  },
  {
    "text": "my name is a fan I have been associated with the Federation workgroup and the Federation project since couple of years",
    "start": "29070",
    "end": "35430"
  },
  {
    "text": "and with me Meru from Red Hat would be giving the deeper dive of the session",
    "start": "35430",
    "end": "43610"
  },
  {
    "start": "44000",
    "end": "105000"
  },
  {
    "text": "okay so agenda for today's will be reiterating the mission so the same has",
    "start": "44360",
    "end": "50309"
  },
  {
    "text": "been covered a couple of times in previous intros and deep dives but I'll just reiterate it for folks who might be",
    "start": "50309",
    "end": "57270"
  },
  {
    "text": "new I see many new faces which I didn't see in the last cube con and then we will talk about the active projects that",
    "start": "57270",
    "end": "64500"
  },
  {
    "text": "we have as part of the sig so we have a pleasure identity project which is",
    "start": "64500",
    "end": "69659"
  },
  {
    "text": "running and we have kubernetes kaliesha Federation project which has been there since almost one and a half two years",
    "start": "69659",
    "end": "76340"
  },
  {
    "text": "pretty active then we will talk about what we have been doing in say last from",
    "start": "76340",
    "end": "83400"
  },
  {
    "text": "last cube quantal now last four months and then we will deep dive into the",
    "start": "83400",
    "end": "90020"
  },
  {
    "text": "flesh of Federation concepts probably a little bit of how and what's the",
    "start": "90020",
    "end": "95220"
  },
  {
    "text": "suitability of the same and how to use it that kind of stuff we will try to keep a",
    "start": "95220",
    "end": "100890"
  },
  {
    "text": "good amount of time for some interactive discussion if there are questions so",
    "start": "100890",
    "end": "107390"
  },
  {
    "start": "105000",
    "end": "185000"
  },
  {
    "text": "going to this is the the mission of Sigma declutter is available at our",
    "start": "107390",
    "end": "112439"
  },
  {
    "text": "community page also but just reiterating that we are the sig who are concerned",
    "start": "112439",
    "end": "118200"
  },
  {
    "text": "with the use cases of concerning with management of applications and which lie",
    "start": "118200",
    "end": "126659"
  },
  {
    "text": "in multiple clusters and there you know administration across the clusters",
    "start": "126659",
    "end": "133230"
  },
  {
    "text": "so we have implemented some active approaches kubernetes cluster Federation",
    "start": "133230",
    "end": "139170"
  },
  {
    "text": "is a typical example of that but we do not limit ourselves in terms of the",
    "start": "139170",
    "end": "144750"
  },
  {
    "text": "goals of the sig saying that that's the only approach that we want to take so we",
    "start": "144750",
    "end": "151140"
  },
  {
    "text": "do keep our scope for tackling problems relative to the approaches of say",
    "start": "151140",
    "end": "159140"
  },
  {
    "text": "approach of stand-alone get ops model or spinnaker kind of models and we do not",
    "start": "159140",
    "end": "167370"
  },
  {
    "text": "have any active work going on them right now but we say that we do not limit our use cases to an active reconciliation model",
    "start": "167370",
    "end": "175020"
  },
  {
    "text": "only so this all information is available at the community page the link is at the bottom of the slide you are",
    "start": "175020",
    "end": "182340"
  },
  {
    "text": "encouraged to have a look if you are interested more about it so I mentioned we have two active",
    "start": "182340",
    "end": "189570"
  },
  {
    "start": "185000",
    "end": "199000"
  },
  {
    "text": "projects right now so one is the cluster identity project the other one is kubernetes cluster",
    "start": "189570",
    "end": "195570"
  },
  {
    "text": "Federation so a little bit about glaciar",
    "start": "195570",
    "end": "201510"
  },
  {
    "start": "199000",
    "end": "305000"
  },
  {
    "text": "identity project the goal of this is to define a cluster identifier which is",
    "start": "201510",
    "end": "209760"
  },
  {
    "text": "sort of more durable than cluster endpoint or just the IP with which the",
    "start": "209760",
    "end": "215910"
  },
  {
    "text": "closure could be identified or assert with which the cluster could be identified and the need of this has been",
    "start": "215910",
    "end": "223920"
  },
  {
    "text": "there since some time there was some effort or some you know initiation",
    "start": "223920",
    "end": "229500"
  },
  {
    "text": "around this which happened in the community score almost one and a half or so year ago but it was stalled for",
    "start": "229500",
    "end": "236910"
  },
  {
    "text": "various reasons it didn't conclude the use cases for this is like any cloud",
    "start": "236910",
    "end": "243300"
  },
  {
    "text": "provider which has multiple clusters which needs to manage multiple clusters need to identify the clusters with",
    "start": "243300",
    "end": "248370"
  },
  {
    "text": "something and for example if a cluster goes down or cluster is taken offline",
    "start": "248370",
    "end": "254070"
  },
  {
    "text": "and then it returns back the the provider all the users both should be able to identify that cluster that is",
    "start": "254070",
    "end": "260609"
  },
  {
    "text": "the same one which I was interacting earlier so if your endpoints change certificates change everything's changed",
    "start": "260609",
    "end": "265740"
  },
  {
    "text": "but probably the durable storage probably the resources inside the cluster or something that was stored in the cluster",
    "start": "265740",
    "end": "272189"
  },
  {
    "text": "does not change so this effort is around that and the status of this is that the",
    "start": "272189",
    "end": "279659"
  },
  {
    "text": "firt was kick-started almost say a month or a little more than that ago and it's",
    "start": "279659",
    "end": "285960"
  },
  {
    "text": "the initial discussions that are happening and it's more in sort of brainstorming and design phase kind of a",
    "start": "285960",
    "end": "291569"
  },
  {
    "text": "thing and this is very actively being discussed in our yv bi-weekly singh that",
    "start": "291569",
    "end": "297180"
  },
  {
    "text": "happens on Tuesdays the details of the meetings are available on our community page the",
    "start": "297180",
    "end": "306240"
  },
  {
    "text": "second sub project that Weebly we will be talking about and that's the that's",
    "start": "306240",
    "end": "311939"
  },
  {
    "text": "what we will be actually talking about in rest of the session is you fit and if",
    "start": "311939",
    "end": "318270"
  },
  {
    "start": "317000",
    "end": "371000"
  },
  {
    "text": "you noticed I use the word cue fed for question Federation so there is a",
    "start": "318270",
    "end": "324749"
  },
  {
    "text": "history around this so Federation was initiated as part of kubernetes core",
    "start": "324749",
    "end": "331129"
  },
  {
    "text": "couple of years ago and it later there was a drive that we should keep most of",
    "start": "331129",
    "end": "338219"
  },
  {
    "text": "the not necessarily core relevant portions of the software outside the",
    "start": "338219",
    "end": "344460"
  },
  {
    "text": "company to score so we moved out of that and we used to call that Federation v1 we redesigned or reimplemented because",
    "start": "344460",
    "end": "353009"
  },
  {
    "text": "of various reasons although all the reasons were covered in previous cube cons and there are slice and there are",
    "start": "353009",
    "end": "358409"
  },
  {
    "text": "talks available for that so the next name that we have been sticking till now",
    "start": "358409",
    "end": "364319"
  },
  {
    "text": "has been Federation v2 but Federation v2 does not sound like necessarily a good",
    "start": "364319",
    "end": "369509"
  },
  {
    "text": "name for a project like this so we officially renamed it to cue fed",
    "start": "369509",
    "end": "375839"
  },
  {
    "start": "371000",
    "end": "430000"
  },
  {
    "text": "couple of probably weeks back and so it's short for kubernetes cluster",
    "start": "375839",
    "end": "381779"
  },
  {
    "text": "Federation that is what we are using as the official name for for this and that",
    "start": "381779",
    "end": "388379"
  },
  {
    "text": "seems to fit well it also does not give ambiguity where the Federation as a term",
    "start": "388379",
    "end": "396180"
  },
  {
    "text": "we felt was ambiguous when it was used so times outside kubernetes scope also so",
    "start": "396180",
    "end": "402990"
  },
  {
    "text": "Federation could mean a lot of things so we wanted to disambiguate ourselves from that too so we also had a configuration",
    "start": "402990",
    "end": "412139"
  },
  {
    "text": "tool which we named cue fed earlier we have renamed that to ki fateh CTL and",
    "start": "412139",
    "end": "417689"
  },
  {
    "text": "the project right now lives at this link which is at the bottom of your slide and we have a vanity URL also which we call",
    "start": "417689",
    "end": "425819"
  },
  {
    "text": "638 s dot IO and so what ideally a user",
    "start": "425819",
    "end": "436319"
  },
  {
    "text": "might want to use cube fat for so we have pointed out use cases we have",
    "start": "436319",
    "end": "443030"
  },
  {
    "text": "listed down what is finishing useful for and I'll give one more disclaimer",
    "start": "443030",
    "end": "449250"
  },
  {
    "text": "because the same name change has happened recently so both of us might interchangeably use you fed off",
    "start": "449250",
    "end": "455849"
  },
  {
    "text": "hydration but we mean the same thing okay so so the definition of all the",
    "start": "455849",
    "end": "463469"
  },
  {
    "text": "utility of the project you felt we say is if a user wants to have or coordinate",
    "start": "463469",
    "end": "470610"
  },
  {
    "text": "configuration across multiple clusters by configuration we mean the KS API it",
    "start": "470610",
    "end": "476279"
  },
  {
    "text": "could be C RDS or it could be actual K test resources but if the same stuff",
    "start": "476279",
    "end": "481650"
  },
  {
    "text": "across multiple kubernetes clusters that could be in any number needs to be",
    "start": "481650",
    "end": "487159"
  },
  {
    "text": "coordinated and managed from a single API surface this is a typical solution",
    "start": "487159",
    "end": "492240"
  },
  {
    "text": "for that this solution also includes active reconciliation so in the in the",
    "start": "492240",
    "end": "499409"
  },
  {
    "text": "slide where I was talking about the mission I mentioned that we do not limit ourselves to an active approach but this",
    "start": "499409",
    "end": "505860"
  },
  {
    "text": "particular project implements an active reconciliation approach and it basically pushes the needed configuration to the",
    "start": "505860",
    "end": "514740"
  },
  {
    "text": "needed clusters it also defines safe",
    "start": "514740",
    "end": "520789"
  },
  {
    "text": "foundational building blocks so our implementation right now is quite low level and we define a low-level concepts",
    "start": "520789",
    "end": "528329"
  },
  {
    "text": "of achieving this kind of this kind of implement",
    "start": "528329",
    "end": "534269"
  },
  {
    "text": "so what we say is this is perfectly suitable for folks who want to build a high level stuff for example scheduler",
    "start": "534269",
    "end": "542519"
  },
  {
    "text": "which is in multiple multi geography kind of fashion Euler or disaster",
    "start": "542519",
    "end": "548310"
  },
  {
    "text": "recovery mechanism that means a higher availability application which can be placed in multiple clusters and",
    "start": "548310",
    "end": "555110"
  },
  {
    "text": "automatically managed for in terms of in",
    "start": "555110",
    "end": "561149"
  },
  {
    "text": "case a clash of goes down or a problem happens with one region or one cluster",
    "start": "561149",
    "end": "567259"
  },
  {
    "start": "568000",
    "end": "641000"
  },
  {
    "text": "so where we are at so last since last",
    "start": "568550",
    "end": "575519"
  },
  {
    "text": "coupon until this cube Korn our efforts have been to ensure that we at least",
    "start": "575519",
    "end": "581360"
  },
  {
    "text": "define some portion of the project and say that we are able to beta support it",
    "start": "581360",
    "end": "587790"
  },
  {
    "text": "or we are able to say that this portion of the project is beta and will be supporting it so we have been driving",
    "start": "587790",
    "end": "593759"
  },
  {
    "text": "towards that and our goal is to probably reach somewhere with respect to that by",
    "start": "593759",
    "end": "599130"
  },
  {
    "text": "this coupon so yesterday we release a release candidate for beta and there are",
    "start": "599130",
    "end": "606660"
  },
  {
    "text": "a few outstanding issues and some documentation updates given that we should be able we should be able to",
    "start": "606660",
    "end": "613079"
  },
  {
    "text": "reach beta soon and one of the reasons we have been driving towards this effort is because until you say that the",
    "start": "613079",
    "end": "620069"
  },
  {
    "text": "project is an alpha there is very low chances that you get user or the",
    "start": "620069",
    "end": "625800"
  },
  {
    "text": "community feedback so one of the main reasons we want to claim beta is that we",
    "start": "625800",
    "end": "630959"
  },
  {
    "text": "actually get the community feedback users have some faith on it and they use it so yeh we are able to reach that",
    "start": "630959",
    "end": "638040"
  },
  {
    "text": "milestone very soon ok so next would be",
    "start": "638040",
    "end": "644639"
  },
  {
    "text": "what we have been doing since last cube con say in the last 4 5 months to",
    "start": "644639",
    "end": "651410"
  },
  {
    "text": "showcase that I'll start with a demo or a small demo where so as part of the",
    "start": "652370",
    "end": "660209"
  },
  {
    "text": "demo everybody would know about se k8s applications so they are like resources",
    "start": "660209",
    "end": "666389"
  },
  {
    "text": "you might have a config man you might have a deployment you might have XYZ resources application can comprise off many of those resources",
    "start": "666389",
    "end": "672840"
  },
  {
    "text": "together so we are taking a simple application so then what we do is we can",
    "start": "672840",
    "end": "679680"
  },
  {
    "text": "deploy the cuvette control plane in one of the host clusters so it is a CR D",
    "start": "679680",
    "end": "684900"
  },
  {
    "text": "based API which can be deployed in one of the clusters and the cluster is our",
    "start": "684900",
    "end": "689990"
  },
  {
    "text": "host then we say that we need to enable a federated type there'll be more",
    "start": "689990",
    "end": "696780"
  },
  {
    "text": "details Maru will cover about about what exactly is this enabling a type and what",
    "start": "696780",
    "end": "701910"
  },
  {
    "text": "does it mean by I'm skipping that for brevity right now those two steps and what I will do I will deploy a normal",
    "start": "701910",
    "end": "709590"
  },
  {
    "text": "katas application and I'll try to make it a federated application and then show",
    "start": "709590",
    "end": "715350"
  },
  {
    "text": "you what can be done with it okay so",
    "start": "715350",
    "end": "725430"
  },
  {
    "text": "let's start with the demo so I have",
    "start": "725430",
    "end": "731280"
  },
  {
    "text": "already deployed a control plane and there are two clusters joined to that control plane so what I am doing is in",
    "start": "731280",
    "end": "739500"
  },
  {
    "text": "one of the clusters I am creating a namespace and within that namespace I will be creating couple of resources",
    "start": "739500",
    "end": "745290"
  },
  {
    "text": "which I'll be calling it as a simple application so let's create a namespace",
    "start": "745290",
    "end": "752690"
  },
  {
    "text": "then creating some resources so I'll create a config map oops sorry",
    "start": "753860",
    "end": "766310"
  },
  {
    "text": "seems fine",
    "start": "780000",
    "end": "782720"
  },
  {
    "text": "the font size is fine yeah I think it's legible okay so I create a config map",
    "start": "787140",
    "end": "794250"
  },
  {
    "text": "then I ran a deployment is created then",
    "start": "794250",
    "end": "801269"
  },
  {
    "text": "I create a service so this these three things I call a simple application so there's a config map which has a string",
    "start": "801269",
    "end": "807600"
  },
  {
    "text": "or which a which which is which has a sling mount stored in a file which I",
    "start": "807600",
    "end": "812850"
  },
  {
    "text": "mount inside this engine's deployment and which can be retrieved on a webpage or which could be called from command",
    "start": "812850",
    "end": "819750"
  },
  {
    "text": "line so after I created the config map",
    "start": "819750",
    "end": "825660"
  },
  {
    "start": "822000",
    "end": "849000"
  },
  {
    "text": "if you see this step this is Q fed CTL federate namespace so the name of the",
    "start": "825660",
    "end": "832890"
  },
  {
    "text": "namespace is demo and couple of other commands one of the specific flag says -",
    "start": "832890",
    "end": "838350"
  },
  {
    "text": "- content so what I'm doing is what I am saying is I am sort of federating this particular application using one command",
    "start": "838350",
    "end": "847459"
  },
  {
    "start": "849000",
    "end": "878000"
  },
  {
    "text": "so it's as simple as that so I have right now created a federated",
    "start": "849800",
    "end": "854850"
  },
  {
    "text": "application so I have sort of up converted whatever application you have",
    "start": "854850",
    "end": "860010"
  },
  {
    "text": "in arcaders cluster and I have created a federated equivalent of that application in the federated API surface",
    "start": "860010",
    "end": "869209"
  },
  {
    "start": "878000",
    "end": "956000"
  },
  {
    "text": "suppose that I'll show one of the resources so we had three resources as",
    "start": "878670",
    "end": "885750"
  },
  {
    "text": "part of the application there was a config map there was a deployment and there was a surface so I will just fetch",
    "start": "885750",
    "end": "891540"
  },
  {
    "text": "the service because it's a lesser than I mean the overall content of that is",
    "start": "891540",
    "end": "898470"
  },
  {
    "text": "lesser than compared to others so if you see this is the Federated equivalent of",
    "start": "898470",
    "end": "907170"
  },
  {
    "text": "a kay test service so we call it at the top of your screen we call it a",
    "start": "907170",
    "end": "913530"
  },
  {
    "text": "federated service and what it wraps around is the the K test service itself",
    "start": "913530",
    "end": "920610"
  },
  {
    "text": "as part of the template so in the federated service you have the template",
    "start": "920610",
    "end": "926460"
  },
  {
    "text": "and that template basically has the spec of K test service so it's as simple as",
    "start": "926460",
    "end": "932580"
  },
  {
    "text": "that and additional to that we have a",
    "start": "932580",
    "end": "938390"
  },
  {
    "text": "placement and there is another concept which Maru will talk about this an hour overwrite which is missing from that",
    "start": "940160",
    "end": "946500"
  },
  {
    "text": "right now we have we are not using override but if it is needed I'll show you how an override can also be used and",
    "start": "946500",
    "end": "956420"
  },
  {
    "start": "956000",
    "end": "991000"
  },
  {
    "text": "if you see here this is also showing the status which is which we call the",
    "start": "956420",
    "end": "964050"
  },
  {
    "text": "propagation status so it's basically telling us without going and looking at into individual clusters that this",
    "start": "964050",
    "end": "971280"
  },
  {
    "text": "particular resource has been propagated to these two clusters and it also is telling us that the propagation has been",
    "start": "971280",
    "end": "978660"
  },
  {
    "text": "fine and there are no problems so if there are there were problems the problems can also be reported here in as",
    "start": "978660",
    "end": "985800"
  },
  {
    "text": "part of the status let's move ahead",
    "start": "985800",
    "end": "991279"
  },
  {
    "start": "991000",
    "end": "1060000"
  },
  {
    "text": "so just to be double sure I am querying the same application from individual",
    "start": "991400",
    "end": "997170"
  },
  {
    "text": "clusters and what we are doing here is because this is an application I am",
    "start": "997170",
    "end": "1002870"
  },
  {
    "text": "doing a curl for what exactly this application returns back and as part of that page so",
    "start": "1002870",
    "end": "1009730"
  },
  {
    "text": "there is the first cluster so it's a simple string that it returns in the second cluster also we can find",
    "start": "1009730",
    "end": "1016670"
  },
  {
    "text": "it's returning the same thing because because our propagation mechanism has just replicated the same resource in",
    "start": "1016670",
    "end": "1023300"
  },
  {
    "text": "both clusters so if there were say ten clusters or 20 clusters the exact same mechanism will be followed and resources",
    "start": "1023300",
    "end": "1029870"
  },
  {
    "text": "will be replicated across all the clusters this is a default placement mechanism",
    "start": "1029870",
    "end": "1035949"
  },
  {
    "text": "so in the second cluster also we get the same thing so we have the application running across two clusters now these",
    "start": "1045660",
    "end": "1050790"
  },
  {
    "text": "clusters could be in any geography if the control plane is able to reach those",
    "start": "1050790",
    "end": "1056280"
  },
  {
    "text": "clusters it will be able to coordinate the application across so next what I'll",
    "start": "1056280",
    "end": "1062190"
  },
  {
    "start": "1060000",
    "end": "1103000"
  },
  {
    "text": "show you is I mentioned about overrides",
    "start": "1062190",
    "end": "1068000"
  },
  {
    "text": "so we have a mechanism so the some of the basic tenets of this is that we say",
    "start": "1068000",
    "end": "1074640"
  },
  {
    "text": "that we have a template which is nothing but the spec of the target resource",
    "start": "1074640",
    "end": "1080150"
  },
  {
    "text": "placement and an override so some mechanism we define placement some mechanism we define the override such",
    "start": "1080150",
    "end": "1085890"
  },
  {
    "text": "that placement says that the resource should be sent into these particular clusters and the override specifies that",
    "start": "1085890",
    "end": "1094350"
  },
  {
    "text": "within a cluster within a resource if you want to change something you can specify that using an override so let's",
    "start": "1094350",
    "end": "1105000"
  },
  {
    "start": "1103000",
    "end": "1147000"
  },
  {
    "text": "see how override works so what I'm doing",
    "start": "1105000",
    "end": "1113100"
  },
  {
    "text": "is if you see at the bottom of your screen the command is I'm patching federated config map so that config map",
    "start": "1113100",
    "end": "1120480"
  },
  {
    "text": "contained the particular string which we mounted inside a file in the engines container I am just changing it to hello",
    "start": "1120480",
    "end": "1127290"
  },
  {
    "text": "coupon and I am also saying that change this for cluster to the last line on the",
    "start": "1127290",
    "end": "1134310"
  },
  {
    "text": "screen on the on your my right hand side it will say that we are changing it in",
    "start": "1134310",
    "end": "1139350"
  },
  {
    "text": "cluster two so when I query it from cluster two I should be able to get this string once it is updated over there so",
    "start": "1139350",
    "end": "1147990"
  },
  {
    "start": "1147000",
    "end": "1222000"
  },
  {
    "text": "the file is patched so",
    "start": "1147990",
    "end": "1154600"
  },
  {
    "text": "it takes a little while because it's a complete loop that goes on so there's a reconciler which we can size this into",
    "start": "1154600",
    "end": "1160720"
  },
  {
    "text": "the resource and from the resource it is mounted into the engines pod and from where that is from where it is reflected",
    "start": "1160720",
    "end": "1168220"
  },
  {
    "text": "back on the HTTP curl or the web page so this is question number one we still",
    "start": "1168220",
    "end": "1175510"
  },
  {
    "text": "have the same query string question",
    "start": "1175510",
    "end": "1180820"
  },
  {
    "text": "number two we are already able to get that it is updated and the engine's application is saying so overriding",
    "start": "1180820",
    "end": "1186550"
  },
  {
    "text": "something inside resource was this simple simple so you specify for a",
    "start": "1186550",
    "end": "1191620"
  },
  {
    "text": "cluster what is the value you want to specify inside resource and you specify",
    "start": "1191620",
    "end": "1199870"
  },
  {
    "text": "that's the path of the value of the key and it can be updated well yeah this is",
    "start": "1199870",
    "end": "1211480"
  },
  {
    "text": "doing it again some couple of times just to be double sure that it's updated it's updated so we will skip it I'll show you",
    "start": "1211480",
    "end": "1223570"
  },
  {
    "text": "how the placement works also so",
    "start": "1223570",
    "end": "1228240"
  },
  {
    "start": "1234000",
    "end": "1257000"
  },
  {
    "text": "so what I am doing is I am getting a status of just one of the resources to just reiterate what we talked about so",
    "start": "1234740",
    "end": "1241909"
  },
  {
    "text": "in the status if you see there's a list of clusters and it mentions that inflation number one the resource has",
    "start": "1241909",
    "end": "1248539"
  },
  {
    "text": "been propagated that's a list of the clusters where the resource actually has been propagated and is being actively",
    "start": "1248539",
    "end": "1254480"
  },
  {
    "text": "reconciled so off light we were able to",
    "start": "1254480",
    "end": "1261490"
  },
  {
    "start": "1257000",
    "end": "1311000"
  },
  {
    "text": "get a feature which we call selector",
    "start": "1261490",
    "end": "1266539"
  },
  {
    "text": "based placement and that basically something like a label selector where we",
    "start": "1266539",
    "end": "1273260"
  },
  {
    "text": "apply a label on the cluster and we apply a label on the relevant resources so based on the label available on the",
    "start": "1273260",
    "end": "1280010"
  },
  {
    "text": "clusters of whichever clusters are labeled that way the resources actually propagated only to those clusters so I",
    "start": "1280010",
    "end": "1285770"
  },
  {
    "text": "have just applied a label label region is equal to EU in flesh number one now I",
    "start": "1285770",
    "end": "1297399"
  },
  {
    "text": "update the placement to specify a same label based selector on the federated",
    "start": "1297399",
    "end": "1304909"
  },
  {
    "text": "deployment",
    "start": "1304909",
    "end": "1307419"
  },
  {
    "text": "now let's see the status so the status says that now the resource is propagated",
    "start": "1311880",
    "end": "1317250"
  },
  {
    "text": "only to question number one because that particularly will exist it on question number one only let's just try to get",
    "start": "1317250",
    "end": "1323850"
  },
  {
    "text": "the resource from individual clusters so for question number one the resource is",
    "start": "1323850",
    "end": "1329220"
  },
  {
    "text": "propagated it exists question number two",
    "start": "1329220",
    "end": "1336090"
  },
  {
    "text": "the resource does not exist anymore because it was not selected by the",
    "start": "1336090",
    "end": "1341179"
  },
  {
    "text": "selector so these these are the three",
    "start": "1341179",
    "end": "1346710"
  },
  {
    "start": "1345000",
    "end": "1378000"
  },
  {
    "text": "things I showed so I I I was able to tell you that we were a are able to",
    "start": "1346710",
    "end": "1352559"
  },
  {
    "text": "enable or disable the types that we want to say are the federated types without",
    "start": "1352559",
    "end": "1358380"
  },
  {
    "text": "writing any code we are able to up convert a Fed rate given Katie's",
    "start": "1358380",
    "end": "1364320"
  },
  {
    "text": "resource as a federated resource so that we call the Fed rate feature and we also",
    "start": "1364320",
    "end": "1371340"
  },
  {
    "text": "have some enhanced mechanisms where we can control the overrides and the",
    "start": "1371340",
    "end": "1377429"
  },
  {
    "text": "placement so let me go back to the slides and this is something and and",
    "start": "1377429",
    "end": "1387299"
  },
  {
    "start": "1378000",
    "end": "1506000"
  },
  {
    "text": "reiterate the the concepts in a brief Maru we'll be talking about them a",
    "start": "1387299",
    "end": "1393210"
  },
  {
    "text": "little in more details so the whole architecture of Federation is such that",
    "start": "1393210",
    "end": "1400620"
  },
  {
    "text": "we say that we have configuration or type configuration which basically deals",
    "start": "1400620",
    "end": "1407610"
  },
  {
    "text": "with defining what federated API should be used by a reconciler",
    "start": "1407610",
    "end": "1414990"
  },
  {
    "text": "to map to our target Katie's API and the",
    "start": "1414990",
    "end": "1421230"
  },
  {
    "text": "API sub tenets we say our template placement and overrides and so there is",
    "start": "1421230",
    "end": "1428640"
  },
  {
    "text": "a cluster configuration which can be attached to this so there is something called join and unjoin using a tool",
    "start": "1428640",
    "end": "1434130"
  },
  {
    "text": "where we can tell the control plane that these are the clusters mean at given",
    "start": "1434130",
    "end": "1439409"
  },
  {
    "text": "point of time we call them federated clusters and we have something called propagation",
    "start": "1439409",
    "end": "1444970"
  },
  {
    "text": "which is enabled via a sync loop and if the propagation is enabled these based",
    "start": "1444970",
    "end": "1451690"
  },
  {
    "text": "on the type configuration the resources which exists in Federation control plane will be reconciled to individual catice",
    "start": "1451690",
    "end": "1458980"
  },
  {
    "text": "clusters so using that using these basic things there is a possibility of",
    "start": "1458980",
    "end": "1465399"
  },
  {
    "text": "building high-level behavior we also we already have some sample behaviors or",
    "start": "1465399",
    "end": "1472390"
  },
  {
    "text": "sample implementations of the same which is at the lower right hand corner of your screen as a DNS service discovery",
    "start": "1472390",
    "end": "1480250"
  },
  {
    "text": "and replica scheduling to it it is more to those those implementations are more",
    "start": "1480250",
    "end": "1487240"
  },
  {
    "text": "to showcase that what can be done with with whatever we have been offering as the basic tenets and there are more",
    "start": "1487240",
    "end": "1494710"
  },
  {
    "text": "possibilities or based on the user needs a more custom scheduler or a more custom",
    "start": "1494710",
    "end": "1502149"
  },
  {
    "text": "behavior could be built so coming back",
    "start": "1502149",
    "end": "1508210"
  },
  {
    "start": "1506000",
    "end": "1569000"
  },
  {
    "text": "to what we have been doing is we have enhanced tooling a little bit not just a",
    "start": "1508210",
    "end": "1515409"
  },
  {
    "text": "little bit we have enhanced tooling a little lot so we have now full-fledged give that CTL enable which without",
    "start": "1515409",
    "end": "1524710"
  },
  {
    "text": "writing any additional code so we don't have to write any code to ensure that these api is our we can claim that these",
    "start": "1524710",
    "end": "1532389"
  },
  {
    "text": "api is or these CR DS we can federate and if you create a federated resource will be able to sync them or reconcile",
    "start": "1532389",
    "end": "1539380"
  },
  {
    "text": "them it is just a simple command so if you say want to have deployment in k",
    "start": "1539380",
    "end": "1545260"
  },
  {
    "text": "test and you need to have ensure that it's reconciled using a federated",
    "start": "1545260",
    "end": "1551799"
  },
  {
    "text": "control plane after you create a federated resource you all you have to do is keep it CTL enable federated is on",
    "start": "1551799",
    "end": "1559510"
  },
  {
    "text": "similar lines so federate is used to translate the caters resources to say",
    "start": "1559510",
    "end": "1565690"
  },
  {
    "text": "federated equivalence we have overhauled",
    "start": "1565690",
    "end": "1571029"
  },
  {
    "start": "1569000",
    "end": "1603000"
  },
  {
    "text": "the api so last cube corner update the these api is were individual api",
    "start": "1571029",
    "end": "1576630"
  },
  {
    "text": "like there was a federated type when I showed you the yam L I mentioned that there is a placement there is a template",
    "start": "1576630",
    "end": "1582930"
  },
  {
    "text": "and there is override so federated type is basically a template a federated type placement is where I specified that this",
    "start": "1582930",
    "end": "1589800"
  },
  {
    "text": "particular template should be propagated to these clusters and the override is I",
    "start": "1589800",
    "end": "1595650"
  },
  {
    "text": "mentioned how exactly you can change a particular value or field in the spec in",
    "start": "1595650",
    "end": "1601500"
  },
  {
    "text": "the target cluster what we have done is it seemed a little problematic for the",
    "start": "1601500",
    "end": "1607350"
  },
  {
    "start": "1603000",
    "end": "1635000"
  },
  {
    "text": "user because a user dealing with so many api's might get overwhelmed and the",
    "start": "1607350",
    "end": "1613050"
  },
  {
    "text": "initial reason we did this was mainly to have some are back based controls on",
    "start": "1613050",
    "end": "1618060"
  },
  {
    "text": "placement for example so our user can define only the template but maybe he does not control the placement or does",
    "start": "1618060",
    "end": "1624510"
  },
  {
    "text": "not control the override but the similar facility is available or similar functionality is available using using",
    "start": "1624510",
    "end": "1635430"
  },
  {
    "text": "different mechanisms so of what we have gone ahead and done is that we do not necessarily need them as different",
    "start": "1635430",
    "end": "1642630"
  },
  {
    "text": "resources we have made them as a single API our unified API and so inside the",
    "start": "1642630",
    "end": "1649110"
  },
  {
    "text": "unified API nothing else changes but the same tenets are placed within this",
    "start": "1649110",
    "end": "1654150"
  },
  {
    "text": "single resource one more thing was missing was status from it so I showed something about the status that",
    "start": "1654150",
    "end": "1661730"
  },
  {
    "text": "propagation status getting the details about reconciliation if some problem",
    "start": "1661730",
    "end": "1668730"
  },
  {
    "start": "1668000",
    "end": "1702000"
  },
  {
    "text": "happened say there might be so many clusters they might be more than ten clusters in some cases of some people",
    "start": "1668730",
    "end": "1674640"
  },
  {
    "text": "users have reported as much as 100 clusters also while federating so it's",
    "start": "1674640",
    "end": "1679730"
  },
  {
    "text": "highly inefficient to go to individual flesh stress and figure out if my resource actually is there and what's",
    "start": "1679730",
    "end": "1686310"
  },
  {
    "text": "the status of that resource so this status is important in that way we were missing that so we have updated that so",
    "start": "1686310",
    "end": "1691980"
  },
  {
    "text": "it provides a consolidated propagation state status and it also additionally",
    "start": "1691980",
    "end": "1697560"
  },
  {
    "text": "lists problems if there has been any so",
    "start": "1697560",
    "end": "1705059"
  },
  {
    "start": "1702000",
    "end": "1747000"
  },
  {
    "text": "there is a set of API so we have a good set of API is right now in the API",
    "start": "1705059",
    "end": "1711910"
  },
  {
    "text": "surface but there are some API switch we consider them as core or central to the",
    "start": "1711910",
    "end": "1718299"
  },
  {
    "text": "whole project those set of API is we also have ensured that we do all the",
    "start": "1718299",
    "end": "1725230"
  },
  {
    "text": "checks and if there were some places we were not necessarily complained to the",
    "start": "1725230",
    "end": "1731230"
  },
  {
    "text": "catus API standards we ensure that there there is a compliance so we have ensured",
    "start": "1731230",
    "end": "1736960"
  },
  {
    "text": "that we are compliant to kubernetes api right now so this thing's is fully compliant in terms of future work so one",
    "start": "1736960",
    "end": "1752890"
  },
  {
    "start": "1747000",
    "end": "1854000"
  },
  {
    "text": "so what we are soliciting right now is we say that we are almost beta and we are soliciting is user feedback and we",
    "start": "1752890",
    "end": "1759910"
  },
  {
    "text": "have couple of users in terms of the small set of sponsoring companies but we probably need to get wider user base who",
    "start": "1759910",
    "end": "1767620"
  },
  {
    "text": "can give us exact feedback as to what probably is something missing or we need",
    "start": "1767620",
    "end": "1774250"
  },
  {
    "text": "to update so the next step that we think might be useful is to improve",
    "start": "1774250",
    "end": "1779679"
  },
  {
    "text": "improvement of the usability improvement of documentation so we have provided",
    "start": "1779679",
    "end": "1785919"
  },
  {
    "text": "some mechanisms where we can translate the caters API is we probably will try",
    "start": "1785919",
    "end": "1792669"
  },
  {
    "text": "to improve that for example we are thinking of an help plugin which can",
    "start": "1792669",
    "end": "1798000"
  },
  {
    "text": "on-the-fly convert caters applications and deploy them as federated applications so you don't necessarily",
    "start": "1798000",
    "end": "1804429"
  },
  {
    "text": "have to change anything you have a chart and you deploy it onto a Federation control plane and you already have a",
    "start": "1804429",
    "end": "1810340"
  },
  {
    "text": "number of clusters associated with this control plane so effectively you are deploying applications across them and you can have an automated behavior",
    "start": "1810340",
    "end": "1816730"
  },
  {
    "text": "controlling this deployment also we are also thinking of a user facing high",
    "start": "1816730",
    "end": "1824710"
  },
  {
    "text": "level API so what we mentioned that these are low-level tenets we are thinking of high level api something",
    "start": "1824710",
    "end": "1830770"
  },
  {
    "text": "very similar to app CRD that exists in caters as of today",
    "start": "1830770",
    "end": "1836640"
  },
  {
    "text": "we in earlier slide I mentioned that currently we have a push based activity",
    "start": "1837430",
    "end": "1843520"
  },
  {
    "text": "in conciliation we are also thinking other possibilities where maybe a pull reconciliation or more static approaches",
    "start": "1843520",
    "end": "1851140"
  },
  {
    "text": "like 'get ops model okay so for a deeper",
    "start": "1851140",
    "end": "1857470"
  },
  {
    "start": "1854000",
    "end": "1937000"
  },
  {
    "text": "dive into the details that I mentioned Maru will come here and talk them talk",
    "start": "1857470",
    "end": "1862990"
  },
  {
    "text": "of talk about them more give us two",
    "start": "1862990",
    "end": "1868600"
  },
  {
    "text": "minutes",
    "start": "1868600",
    "end": "1870750"
  },
  {
    "text": "hello",
    "start": "1910880",
    "end": "1913880"
  },
  {
    "text": "so my name is Maru I work for Red Hat I've been working on Kew fed for a",
    "start": "1918080",
    "end": "1923480"
  },
  {
    "text": "really long time so I'm gonna try to give you some technical background as to how it actually functions under the hood",
    "start": "1923480",
    "end": "1930000"
  },
  {
    "text": "and maybe give you some insight into directions you could take it or we could take it depending so the features were",
    "start": "1930000",
    "end": "1939720"
  },
  {
    "start": "1937000",
    "end": "1967000"
  },
  {
    "text": "specifically targeting for bata are being able to register a cluster to the control plane being able to enable",
    "start": "1939720",
    "end": "1946830"
  },
  {
    "text": "management of an arbitrary kubernetes type and convert resources as he was",
    "start": "1946830",
    "end": "1952740"
  },
  {
    "text": "demonstrating from a kubernetes resource to the Federated equivalent there's a lot more detail than how we're actually",
    "start": "1952740",
    "end": "1958740"
  },
  {
    "text": "going to manage member-state using the results of those operations and I'll go into some detail in subsequent slides so",
    "start": "1958740",
    "end": "1969120"
  },
  {
    "start": "1967000",
    "end": "2050000"
  },
  {
    "text": "the first thing we do is we need to register a cluster and you identify a kubernetes cluster to the control plane",
    "start": "1969120",
    "end": "1975510"
  },
  {
    "text": "so you could do this manually it's just API types under the hood but we provide",
    "start": "1975510",
    "end": "1980760"
  },
  {
    "text": "a command to make it easy on you and all the command basically does given",
    "start": "1980760",
    "end": "1986100"
  },
  {
    "text": "sufficient authorization to the cluster that you want to add to the control plane it will create a namespace and a",
    "start": "1986100",
    "end": "1993690"
  },
  {
    "text": "service account in the namespace with sufficient privileges to manage the",
    "start": "1993690",
    "end": "1998970"
  },
  {
    "text": "resources that you care about in the case of a namespace scoped Federation",
    "start": "1998970",
    "end": "2004039"
  },
  {
    "text": "that'll be actually localized but in the case of cluster scope Federation where you can manage any resource in that",
    "start": "2004039",
    "end": "2009320"
  },
  {
    "text": "cluster were actually gonna be granting cluster admin and we'll talk about the implications of that later so once",
    "start": "2009320",
    "end": "2017480"
  },
  {
    "text": "you've created that service account you create a queue fed cluster resource and that basically defines all of the",
    "start": "2017480",
    "end": "2024799"
  },
  {
    "text": "information you'll need for managing those resources the API endpoint and the",
    "start": "2024799",
    "end": "2031279"
  },
  {
    "text": "CA bundle that's optional but and then we'll actually take the token used by",
    "start": "2031279",
    "end": "2038120"
  },
  {
    "text": "the service account and we'll store it in a secret locally and that allows the controllers in the control plane to",
    "start": "2038120",
    "end": "2044350"
  },
  {
    "text": "access the cluster with full privileges",
    "start": "2044350",
    "end": "2049690"
  },
  {
    "start": "2050000",
    "end": "2157000"
  },
  {
    "text": "so given that you have registered your cluster you need to be able to actually define the configuration you want to",
    "start": "2050540",
    "end": "2057450"
  },
  {
    "text": "manage in one or more clusters so the tooling that her fun didn't actually",
    "start": "2057450",
    "end": "2063690"
  },
  {
    "text": "demonstrate but alluded to is cube fed CTL enable and that's responsible for",
    "start": "2063690",
    "end": "2070399"
  },
  {
    "text": "configuring the control plane to be able to manage a given kubernetes resource in",
    "start": "2070400",
    "end": "2075870"
  },
  {
    "text": "the member cluster and similar to join it's actually just creating API",
    "start": "2075870",
    "end": "2081090"
  },
  {
    "text": "resources so this is entirely dynamic the first thing it's going to do is it's going to create a federated type CRD",
    "start": "2081090",
    "end": "2087330"
  },
  {
    "text": "which is going to be the equivalent of kubernetes type so for an example for",
    "start": "2087330",
    "end": "2093060"
  },
  {
    "text": "deployment you would create a federated deployment it also creates a federated",
    "start": "2093060",
    "end": "2098850"
  },
  {
    "text": "type config and this includes the details of both the target kubernetes",
    "start": "2098850",
    "end": "2104580"
  },
  {
    "text": "type and the federated type and for reasons we'll become clear in subsequent",
    "start": "2104580",
    "end": "2110580"
  },
  {
    "text": "slides I'm just giving you sort of the details of what and I'll explain why it's useful subsequently so the specific",
    "start": "2110580",
    "end": "2117360"
  },
  {
    "text": "details that it's capturing are that the group and the version and the resource name if you're only using cube kettle or",
    "start": "2117360",
    "end": "2125990"
  },
  {
    "text": "generated clients this might be a little bit foreign but under the hood in kubernetes those are the three values",
    "start": "2125990",
    "end": "2132510"
  },
  {
    "text": "that allow you to make a call and access a given API so we're storing those is",
    "start": "2132510",
    "end": "2138510"
  },
  {
    "text": "just the basic data so the group for example like deployments would be apps",
    "start": "2138510",
    "end": "2144390"
  },
  {
    "text": "the version would be v1 the resource name would be lowercase deployments so",
    "start": "2144390",
    "end": "2149940"
  },
  {
    "text": "we store that information both for the federated type and for the target kubernetes resource so I'll just a bit",
    "start": "2149940",
    "end": "2160620"
  },
  {
    "start": "2157000",
    "end": "2225000"
  },
  {
    "text": "of a refresher because or fun sort of alluded to this but a federated type consists of three fields the template",
    "start": "2160620",
    "end": "2168840"
  },
  {
    "text": "which defines the common form of the resource that you want to exist in however many clusters it defines the",
    "start": "2168840",
    "end": "2176400"
  },
  {
    "text": "placement which clusters that resource should appear in you can define",
    "start": "2176400",
    "end": "2181770"
  },
  {
    "text": "placement both explicitly via cluster name and when I say cluster name I really mean the name",
    "start": "2181770",
    "end": "2187339"
  },
  {
    "text": "of a cubed cluster that we created with join and you can also use a label",
    "start": "2187339",
    "end": "2192950"
  },
  {
    "text": "selector overrides per cluster variation",
    "start": "2192950",
    "end": "2198770"
  },
  {
    "text": "I mean essentially it's a key/value mapping you could do spec dot trying to",
    "start": "2198770",
    "end": "2205039"
  },
  {
    "text": "think maybe if you're dealing with a config nap spec data and you could provide a map that you wanted to replace",
    "start": "2205039",
    "end": "2211880"
  },
  {
    "text": "on a per cluster basis and so it allows you to have one resource for representing multiple the resource and",
    "start": "2211880",
    "end": "2218809"
  },
  {
    "text": "multiple clusters and then where variation is required you use overrides to define that variation I'm gonna",
    "start": "2218809",
    "end": "2227660"
  },
  {
    "start": "2225000",
    "end": "2357000"
  },
  {
    "text": "highlight federated namespace because just like namespaces and kubernetes federated namespaces need to be a little",
    "start": "2227660",
    "end": "2235130"
  },
  {
    "text": "bit special namespaces and kubernetes are the only container there's no other resource that can't contain other",
    "start": "2235130",
    "end": "2241069"
  },
  {
    "text": "resources and it's not possible to create one it's really built into the type system so the consequence of that",
    "start": "2241069",
    "end": "2248390"
  },
  {
    "text": "is we treat federated namespace a little bit special for one thing we don't actually create it as a container",
    "start": "2248390",
    "end": "2254630"
  },
  {
    "text": "because we can't so we actually put it as a namespace tree source which is a little bit counterintuitive the reason",
    "start": "2254630",
    "end": "2261829"
  },
  {
    "text": "we did that is to enable may be easier manageability if you're an application",
    "start": "2261829",
    "end": "2267200"
  },
  {
    "text": "developer maybe you don't want to have access to a cluster scope to resource a",
    "start": "2267200",
    "end": "2272420"
  },
  {
    "text": "federated namespace if you have full access to your namespace you could create a federated namespace the",
    "start": "2272420",
    "end": "2278359"
  },
  {
    "text": "controls propagation of the contained resources without administrative oversight beyond getting control of that",
    "start": "2278359",
    "end": "2284119"
  },
  {
    "text": "namespace the other sort of interesting ax perspective of federated namespace is",
    "start": "2284119",
    "end": "2291670"
  },
  {
    "text": "its placement like the list of clusters or the clusters selector you define for",
    "start": "2291670",
    "end": "2296869"
  },
  {
    "text": "it actually influence the placement of all of the contained resources so",
    "start": "2296869",
    "end": "2303740"
  },
  {
    "text": "there's a couple different ways you could use this you could define a selector that selected all clusters in",
    "start": "2303740",
    "end": "2311210"
  },
  {
    "text": "which case each resource could define whatever placement wanted",
    "start": "2311210",
    "end": "2316490"
  },
  {
    "text": "and it wouldn't actually be constrained by how where the namespace went because the namespace is gonna be everywhere you",
    "start": "2316490",
    "end": "2323510"
  },
  {
    "text": "could also use it as a way of defining where the application goes by having",
    "start": "2323510",
    "end": "2329180"
  },
  {
    "text": "every single resource every federated resource in the namespace being",
    "start": "2329180",
    "end": "2336230"
  },
  {
    "text": "selecting all clusters kind of the reverse of what I was talking about and then the federated namespace placement",
    "start": "2336230",
    "end": "2342200"
  },
  {
    "text": "actually would define which clusters that application was propagated to and rather than having to manage placement",
    "start": "2342200",
    "end": "2347869"
  },
  {
    "text": "on a per resource basis you could actually do it on and the basis of the",
    "start": "2347869",
    "end": "2352910"
  },
  {
    "text": "namespace which is arguably a lot simpler",
    "start": "2352910",
    "end": "2356980"
  },
  {
    "start": "2357000",
    "end": "2404000"
  },
  {
    "text": "so as orphan demonstrated we kind of try to make it easy to convert resources",
    "start": "2358240",
    "end": "2364940"
  },
  {
    "text": "from kubernetes form to a federated equivalent rather than having to have",
    "start": "2364940",
    "end": "2371900"
  },
  {
    "text": "you write them manually we have a command that does it for you it's pretty straightforward",
    "start": "2371900",
    "end": "2377119"
  },
  {
    "text": "it's just simple llamo conversion embedding the contents of the original resource as the template of the",
    "start": "2377119",
    "end": "2383060"
  },
  {
    "text": "federated resource and defaulting to selecting all clusters the only maybe",
    "start": "2383060",
    "end": "2389540"
  },
  {
    "text": "interesting thing is you can Federated ents of a namespace rather than having to specify individual resources if you",
    "start": "2389540",
    "end": "2396890"
  },
  {
    "text": "had an application in the namespace one command can convert the entire thing as per his demonstration now this is going",
    "start": "2396890",
    "end": "2407150"
  },
  {
    "start": "2404000",
    "end": "2476000"
  },
  {
    "text": "to get a little bit more complicated but hopefully it'll tie things together when",
    "start": "2407150",
    "end": "2413930"
  },
  {
    "text": "we talk about propagation we're really talking about reconciling resources and member clusters with a federated",
    "start": "2413930",
    "end": "2419960"
  },
  {
    "text": "resource and the way that we do that is we take the federated type config that",
    "start": "2419960",
    "end": "2425240"
  },
  {
    "text": "we saw back in queue fed CTL enable and the way that it captures the API details",
    "start": "2425240",
    "end": "2432560"
  },
  {
    "text": "of the two resources if an if an FTC exists we have a controller that creates",
    "start": "2432560",
    "end": "2439820"
  },
  {
    "text": "a sync controller that then watches all the member clusters for the configured target resource and watches the hosts",
    "start": "2439820",
    "end": "2446930"
  },
  {
    "text": "cluster for the configured federated resource and then it can make sure that the state",
    "start": "2446930",
    "end": "2451970"
  },
  {
    "text": "of the federated resource is represented in the member clusters the nice thing about this is you never have to write",
    "start": "2451970",
    "end": "2457970"
  },
  {
    "text": "any code previous iterations of Federation actually required you to handwrite a controller for every single",
    "start": "2457970",
    "end": "2464569"
  },
  {
    "text": "type but because of the way we're like doing this all dynamically you can actually federated or so that didn't",
    "start": "2464569",
    "end": "2471230"
  },
  {
    "text": "exist when we wrote this code and have it work properly a little bit of detail",
    "start": "2471230",
    "end": "2479240"
  },
  {
    "start": "2476000",
    "end": "2561000"
  },
  {
    "text": "about the API interaction it kind of relates to the group version resource name that we saw earlier GVR allows you",
    "start": "2479240",
    "end": "2487460"
  },
  {
    "text": "to make an API call to a cube api server but the question is how do you actually",
    "start": "2487460",
    "end": "2493130"
  },
  {
    "text": "deal with that in code if you've dealt with you know generated clients like the official cube clients you actually have",
    "start": "2493130",
    "end": "2500809"
  },
  {
    "text": "a go struct that will be returned which isn't particularly useful if I don't",
    "start": "2500809",
    "end": "2506030"
  },
  {
    "text": "know the type and it didn't exist when I wrote the code so we actually leverage something called unstructured which is",
    "start": "2506030",
    "end": "2512990"
  },
  {
    "text": "part of the internals of kubernetes they actually use it as the basis for the",
    "start": "2512990",
    "end": "2518089"
  },
  {
    "text": "garbage collector and other sort of low-level system functions because for the same reasons they need to be able to",
    "start": "2518089",
    "end": "2523880"
  },
  {
    "text": "interact with resources that they don't have any knowledge of like it'll have a",
    "start": "2523880",
    "end": "2529549"
  },
  {
    "text": "standard interface like metadata but it won't have any knowledge of what is in",
    "start": "2529549",
    "end": "2534829"
  },
  {
    "text": "the contents of the type this has the disadvantage of there's no type safety",
    "start": "2534829",
    "end": "2541190"
  },
  {
    "text": "you're basically just dealing with maps of interfaces not dissimilar to like maps of dicks and/or dicks of dicks and",
    "start": "2541190",
    "end": "2549349"
  },
  {
    "text": "Python or something like that but because we have this very consistent form across federated resources with",
    "start": "2549349",
    "end": "2555430"
  },
  {
    "text": "template placements overrides it actually works quite well the only other",
    "start": "2555430",
    "end": "2563750"
  },
  {
    "start": "2561000",
    "end": "2632000"
  },
  {
    "text": "sort of interesting detail about the sync controller is because locking type details we don't actually have an easy",
    "start": "2563750",
    "end": "2569900"
  },
  {
    "text": "way of performing comparison we can use the federated resource to generate the",
    "start": "2569900",
    "end": "2575780"
  },
  {
    "text": "desired form of a resource that should exist in a given member cluster but then",
    "start": "2575780",
    "end": "2580910"
  },
  {
    "text": "how do we know whether it's current we don't have any basis for comparison because we don't actually understand the",
    "start": "2580910",
    "end": "2587210"
  },
  {
    "text": "internals of that resource so we've we've kind of we developed a versioning",
    "start": "2587210",
    "end": "2594230"
  },
  {
    "text": "scheme I guess for lack of a better term so we we look at the template field we",
    "start": "2594230",
    "end": "2599930"
  },
  {
    "text": "look at the override field we hash those contents we perform a creation or an",
    "start": "2599930",
    "end": "2605960"
  },
  {
    "text": "update on the API and then we record the resource version or the generation depending on the type of resource and",
    "start": "2605960",
    "end": "2612590"
  },
  {
    "text": "then if we see those same values and that same value in subsequent",
    "start": "2612590",
    "end": "2617690"
  },
  {
    "text": "comparisons we're good and if they differ then we have to perform an update that may have been too much information",
    "start": "2617690",
    "end": "2626480"
  },
  {
    "text": "or maybe it was interesting I have no idea but that's it you're done that's",
    "start": "2626480",
    "end": "2631880"
  },
  {
    "text": "the hard part so we have time for questions hopefully this has been",
    "start": "2631880",
    "end": "2638780"
  },
  {
    "start": "2632000",
    "end": "2943000"
  },
  {
    "text": "interesting enough that you actually have questions I've listed out some common questions that I get asked a lot",
    "start": "2638780",
    "end": "2644900"
  },
  {
    "text": "in case it's interesting to you but I'm not going to answer them unless you actually ask me and if you're not",
    "start": "2644900",
    "end": "2650960"
  },
  {
    "text": "interested that's totally fine",
    "start": "2650960",
    "end": "2654400"
  },
  {
    "text": "do you wanna oh you can't can someone to run around with the",
    "start": "2656110",
    "end": "2661160"
  },
  {
    "text": "microphone so just to get in my mind",
    "start": "2661160",
    "end": "2667940"
  },
  {
    "text": "clear I'll start by stating what I think I've understood and hopefully we can we",
    "start": "2667940",
    "end": "2673010"
  },
  {
    "text": "can start there so the way the way we work so we've got there so we've got three cat 3 kubernetes clusters and we",
    "start": "2673010",
    "end": "2679460"
  },
  {
    "text": "can have a Federation control plane which which could be completely separate or does it it doesn't need to run in one",
    "start": "2679460",
    "end": "2685070"
  },
  {
    "text": "of these could make these clusters it can for convenience but it does not have to so we've got we've got our command",
    "start": "2685070",
    "end": "2690830"
  },
  {
    "text": "and control center and there there's only there should only be one of those that because as far as I'm aware you",
    "start": "2690830",
    "end": "2696590"
  },
  {
    "text": "safe the client like you say - cube fed I would like this federated deployment and then it pushes those configs into",
    "start": "2696590",
    "end": "2701750"
  },
  {
    "text": "all your clusters which you've joined into the Federation control plane correct so it's not like a pull based",
    "start": "2701750",
    "end": "2707120"
  },
  {
    "text": "thing where they're obviously if the couplets speak to the API server and says what should I be running and then",
    "start": "2707120",
    "end": "2713100"
  },
  {
    "text": "then runs it so this is this is so you're pushing to those and then leveraging the existing structure so",
    "start": "2713100",
    "end": "2720960"
  },
  {
    "text": "then I guess the first question could have appeals to me quite a lot which is",
    "start": "2720960",
    "end": "2727550"
  },
  {
    "text": "how you dealing with our back isn't it route is it route into you know use your",
    "start": "2727550",
    "end": "2733800"
  },
  {
    "text": "Federation control plan of route into your perspective correct so effectively",
    "start": "2733800",
    "end": "2740490"
  },
  {
    "text": "the Federation sorry the cube fed control plane that's where would you'd be enforcing our back commissioning but",
    "start": "2740490",
    "end": "2747990"
  },
  {
    "text": "as far as like permissioning in the clusters themselves it has effectively and so it's like you control it here",
    "start": "2747990",
    "end": "2754410"
  },
  {
    "text": "instead of there I'm not saying it's not dangerous it's just one strategy okay so",
    "start": "2754410",
    "end": "2761700"
  },
  {
    "text": "in answer to or so like a something that's often an answer to like well I",
    "start": "2761700",
    "end": "2768330"
  },
  {
    "text": "don't want to give clustered man like what are my options what we've",
    "start": "2768330",
    "end": "2773970"
  },
  {
    "text": "implemented is is we call like a push mechanism I mean if you're familiar with the get-ups model you'd be defining",
    "start": "2773970",
    "end": "2779630"
  },
  {
    "text": "configuration and a get repo and you'd have a local cluster or local agent that would still have cluster admen but it",
    "start": "2779630",
    "end": "2785790"
  },
  {
    "text": "would be localized so that if it was compromised only that cluster is compromised whereas if your control",
    "start": "2785790",
    "end": "2791370"
  },
  {
    "text": "plane cluster was compromised then all your clusters are compromised so we",
    "start": "2791370",
    "end": "2796620"
  },
  {
    "text": "haven't implemented it because we don't have people yelling at us to do so but it's entirely possible that you could use cube FET as a control plane only to",
    "start": "2796620",
    "end": "2805860"
  },
  {
    "text": "generate configuration you'd use the federated types because maybe it has some convenience or you like working",
    "start": "2805860",
    "end": "2811680"
  },
  {
    "text": "with the cube API you could generate that configuration into a git repo and use one of the popular tools to apply it",
    "start": "2811680",
    "end": "2818760"
  },
  {
    "text": "locally so that wait so you generate",
    "start": "2818760",
    "end": "2823770"
  },
  {
    "text": "Caesar you generate the templated configure then you use a tool to apply it so that's kind of almost going like there's like you know what you've got",
    "start": "2823770",
    "end": "2829320"
  },
  {
    "text": "till oh that's hell which is which is templating and then applying it using your local missions it's kind of similar only it's",
    "start": "2829320",
    "end": "2836069"
  },
  {
    "text": "more focused on like defining configuration for multiple clusters versus just defining it on an application basis but similar concept",
    "start": "2836069",
    "end": "2842789"
  },
  {
    "text": "yeah so do you still you know if you want to have a highly available Federation control plane that you're",
    "start": "2842789",
    "end": "2848700"
  },
  {
    "text": "still gonna have to do a manual over I guess you don't really want that yeah",
    "start": "2848700",
    "end": "2856739"
  },
  {
    "text": "they tend to fight with one another failover it's the challenge with",
    "start": "2856739",
    "end": "2863519"
  },
  {
    "text": "building an API and centering it around the cube API is it's not really possible or feasible at least not that I'm aware",
    "start": "2863519",
    "end": "2870839"
  },
  {
    "text": "of 2h a kubernetes like cluster like you can do failover you can do disaster",
    "start": "2870839",
    "end": "2877049"
  },
  {
    "text": "recovery but like a live failover it's really hard to synchronize @cd beyond the boundaries like of geographical like",
    "start": "2877049",
    "end": "2884460"
  },
  {
    "text": "the latency requirements are kind of complicated so we're kind of bound by that but I will say like what happens",
    "start": "2884460",
    "end": "2890789"
  },
  {
    "text": "when cube fit goes down that's a common question generally all your workers keep",
    "start": "2890789",
    "end": "2895950"
  },
  {
    "text": "running in the same way that all of your workloads could you know keep running if the cube API in a cluster goes down at",
    "start": "2895950",
    "end": "2902400"
  },
  {
    "text": "least hypothetically because your nodes are still running so your clusters are still running even if the cube fed",
    "start": "2902400",
    "end": "2908190"
  },
  {
    "text": "control plane you can't make changes but things still work so if you've got a",
    "start": "2908190",
    "end": "2918630"
  },
  {
    "text": "federated deployment is it gonna federal rate is it just gonna splat the",
    "start": "2918630",
    "end": "2923970"
  },
  {
    "text": "deployment everywhere is it gonna roll it to like can you roll it to a canary cluster and it goes wow that's broken I'm not gonna roll that anywhere else so",
    "start": "2923970",
    "end": "2931319"
  },
  {
    "text": "we don't offer the ability natively to do that however when we've alluded to like higher level functionality",
    "start": "2931319",
    "end": "2937529"
  },
  {
    "text": "what cube fed is is a way of defining configuration having it be applied in a consistent way and it looks really",
    "start": "2937529",
    "end": "2944160"
  },
  {
    "start": "2943000",
    "end": "2949000"
  },
  {
    "text": "simple unfortunately it's it's a little bit more complicated oh sorry so the",
    "start": "2944160",
    "end": "2955049"
  },
  {
    "start": "2949000",
    "end": "2967000"
  },
  {
    "text": "challenge is like our goal is try to try to get people interested in the idea of",
    "start": "2955049",
    "end": "2961259"
  },
  {
    "text": "using Federation as a lower level sort of mechanism for applying configuration like cue kettle apply but for multiple",
    "start": "2961259",
    "end": "2968740"
  },
  {
    "start": "2967000",
    "end": "3276000"
  },
  {
    "text": "clusters that kind of thing so you're gonna build like if you wanted to do like a Bluegreen deployment sort of",
    "start": "2968740",
    "end": "2974110"
  },
  {
    "text": "thing you would have a piece of logic that would program like the federated deployment to go to that cluster and if",
    "start": "2974110",
    "end": "2979690"
  },
  {
    "text": "it's healthy then you apply or maybe a better example would be you have a healthy deployment",
    "start": "2979690",
    "end": "2984820"
  },
  {
    "text": "you wanna upgrade it to a new version so you apply it an override to just that",
    "start": "2984820",
    "end": "2989890"
  },
  {
    "text": "cluster to use a new image if it proves healthy then you can actually change that in the template and remove the",
    "start": "2989890",
    "end": "2995320"
  },
  {
    "text": "override so so effectively you're providing a set of primitives that's that other tools will need to be built on to kind of get to this correct",
    "start": "2995320",
    "end": "3005510"
  },
  {
    "text": "hello Would Cupid be suitable for setting up cloudbursting for example I",
    "start": "3010660",
    "end": "3017230"
  },
  {
    "text": "would have a deployment in one of my clusters I was federated with Cupid and I wasn't about autoscaler my deployment",
    "start": "3017230",
    "end": "3025540"
  },
  {
    "text": "and if I scale it scale it up would my pods go to the other cluster the pattern",
    "start": "3025540",
    "end": "3040329"
  },
  {
    "text": "that you just mentioned it's one of the really possible high-level behavior what",
    "start": "3040329",
    "end": "3047530"
  },
  {
    "text": "he is talking about and as part of the first implementation which we call",
    "start": "3047530",
    "end": "3052839"
  },
  {
    "text": "Federation v1 there actually is a prototype cloudbursting HPA implemented",
    "start": "3052839",
    "end": "3059619"
  },
  {
    "text": "so there is a possibility that you can you know implement or program your HPA",
    "start": "3059619",
    "end": "3068079"
  },
  {
    "text": "which we call federated HPA into a cluster such that it is configured then",
    "start": "3068079",
    "end": "3073569"
  },
  {
    "text": "it turns out of capacity in one then only the replicas are moved to the other clusters so it's certainly possible",
    "start": "3073569",
    "end": "3081390"
  },
  {
    "text": "I was wondering if there's an Driessen by you have the overrides the conditions",
    "start": "3095050",
    "end": "3104440"
  },
  {
    "text": "in one object apparently having multiple I started to see see it could be a good",
    "start": "3104440",
    "end": "3113710"
  },
  {
    "text": "thing to it federated alright us a different resource but you don't you",
    "start": "3113710",
    "end": "3119980"
  },
  {
    "text": "only want to override in on cluster you don't touch the resource for all the",
    "start": "3119980",
    "end": "3128710"
  },
  {
    "text": "other so is the concern that if you edit the resource you'll potentially screw it",
    "start": "3128710",
    "end": "3134770"
  },
  {
    "text": "up for all the other clusters or like the override can be applied on a per cluster basis generate to the federated",
    "start": "3134770",
    "end": "3143770"
  },
  {
    "text": "resource with some overrides same home or something where it would be more complete all right mmm-hmm so you're",
    "start": "3143770",
    "end": "3151630"
  },
  {
    "text": "talking about you you'd prefer like a separate resource yeah more lumbering if",
    "start": "3151630",
    "end": "3158200"
  },
  {
    "text": "it must consider",
    "start": "3158200",
    "end": "3160950"
  },
  {
    "text": "okay thanks",
    "start": "3217099",
    "end": "3220519"
  },
  {
    "text": "so you were discussing this a bit about the second one when Cupid goes down so",
    "start": "3223790",
    "end": "3229920"
  },
  {
    "text": "the clusters are fine but when you deploy the cube Fred again this is just",
    "start": "3229920",
    "end": "3235619"
  },
  {
    "text": "as simple as joining the clusters back again and everything is working what is there are the most steps on how this",
    "start": "3235619",
    "end": "3242780"
  },
  {
    "text": "this works once the control plane is down I don't think it's so much about",
    "start": "3242780",
    "end": "3250589"
  },
  {
    "text": "adoption so if I lose the control plane the expectation is there's a disaster",
    "start": "3250589",
    "end": "3256290"
  },
  {
    "text": "recovery strategy using like Valero or something like that so that you would",
    "start": "3256290",
    "end": "3261390"
  },
  {
    "text": "lose it you would bring it up back up over here there's no clusters specific state outside of the resources so the cube",
    "start": "3261390",
    "end": "3268290"
  },
  {
    "text": "head cluster and The Associated secret it doesn't matter which cluster it lives in it still allows the same access",
    "start": "3268290",
    "end": "3273630"
  },
  {
    "text": "modulo like network connectivity but",
    "start": "3273630",
    "end": "3279839"
  },
  {
    "start": "3276000",
    "end": "3290000"
  },
  {
    "text": "about the service discovery we tried to set it up with this core DNS and",
    "start": "3279839",
    "end": "3285599"
  },
  {
    "text": "external DNS and all of that there like a couple of layers and steps that you",
    "start": "3285599",
    "end": "3291240"
  },
  {
    "start": "3290000",
    "end": "3600000"
  },
  {
    "text": "have to take and we killed one of the cluster to see how it all works",
    "start": "3291240",
    "end": "3297470"
  },
  {
    "text": "but essentially we found few problems with how Co DNS works so it wasn't",
    "start": "3297470",
    "end": "3303589"
  },
  {
    "text": "deleting the the IPS of the cluster that we pull down and and there was some",
    "start": "3303589",
    "end": "3311660"
  },
  {
    "text": "unexpected behavior so I was wondering if there like any best practices on how",
    "start": "3311660",
    "end": "3317460"
  },
  {
    "text": "to set up the service discovery are you talking about the service discovery that the cube fed her Federation has",
    "start": "3317460",
    "end": "3324750"
  },
  {
    "text": "supported like for quite a while or are you talking about something else I think it's supported I think you",
    "start": "3324750",
    "end": "3330569"
  },
  {
    "text": "support both using the I think the cloud Google DNS as well as Cody and si",
    "start": "3330569",
    "end": "3339200"
  },
  {
    "text": "yeah yep",
    "start": "3343030",
    "end": "3346540"
  },
  {
    "text": "so and there is no solution so that is also a reason",
    "start": "3388180",
    "end": "3396040"
  },
  {
    "text": "so all that to say like the solution that we've proposed in the past or has been included is not actually viable",
    "start": "3410570",
    "end": "3417270"
  },
  {
    "text": "from a production standpoint I think the motivation was originally is trying to",
    "start": "3417270",
    "end": "3423630"
  },
  {
    "text": "extend the DNS based model that Cube uses internally to be able to extend",
    "start": "3423630",
    "end": "3428850"
  },
  {
    "text": "that outside but if you understand how cube proxy works it's effectively like a poor-man's load balancer so that it's",
    "start": "3428850",
    "end": "3434970"
  },
  {
    "text": "health checking the backends and it will take them out of rotation if they're no longer healthy but if you have an external DNS server that's not doing",
    "start": "3434970",
    "end": "3442170"
  },
  {
    "text": "health check of any of the entries then you have the scenario of not being able",
    "start": "3442170",
    "end": "3447330"
  },
  {
    "text": "to failover depending on what the TTL of the DNS client is whoever whatever DNS",
    "start": "3447330",
    "end": "3453390"
  },
  {
    "text": "client they're using what the TTL is will determine how soon they discover like a new endpoint so effectively like",
    "start": "3453390",
    "end": "3461210"
  },
  {
    "text": "recommending that people look at other options that aren't dns-based either I",
    "start": "3461210",
    "end": "3466290"
  },
  {
    "text": "mean we don't have something to give you with this project it could be that we",
    "start": "3466290",
    "end": "3471600"
  },
  {
    "text": "could work together to find like a generic load balancing solution because really that's the ideal if you're",
    "start": "3471600",
    "end": "3477480"
  },
  {
    "text": "talking about service discovery outside of a cube cluster you want something that can health check back out",
    "start": "3477480",
    "end": "3484440"
  },
  {
    "text": "so that you can automatically failover client requests as the backend becomes unhealthy versus at some random point in",
    "start": "3484440",
    "end": "3490980"
  },
  {
    "text": "the future and the other option I mean other than load balancer is if you're talking about",
    "start": "3490980",
    "end": "3496260"
  },
  {
    "text": "internal internal if you're using a service mash like sto is promising the",
    "start": "3496260",
    "end": "3501480"
  },
  {
    "text": "ability to you know to cross cluster service discovery I would be surprised if all the other service meshes didn't",
    "start": "3501480",
    "end": "3507840"
  },
  {
    "text": "offer something similar but it's really like there's many different ways to do it and really depends on your use case",
    "start": "3507840",
    "end": "3514380"
  },
  {
    "text": "and what sort of infrastructure you're dealing with which is why we're kind of de-emphasizing it within this project",
    "start": "3514380",
    "end": "3519900"
  },
  {
    "text": "because it seems like it's a bit large for us to bite off no more questions",
    "start": "3519900",
    "end": "3529580"
  },
  {
    "text": "or any more questions do you have any",
    "start": "3529580",
    "end": "3539330"
  },
  {
    "text": "plans to make it somewhat easier to like extricate yourself from a federation in",
    "start": "3539330",
    "end": "3547080"
  },
  {
    "text": "a way like for example when I was testing out I took over an existing",
    "start": "3547080",
    "end": "3553650"
  },
  {
    "text": "namespace effectively so I've like cluster 1 cluster 2 namespace foo in both I create the federated namespace",
    "start": "3553650",
    "end": "3561600"
  },
  {
    "text": "we've only cluster one selected as a placement at that point it deleted the namespace and cluster two I then",
    "start": "3561600",
    "end": "3569520"
  },
  {
    "text": "panicked of Ayane are we creating cluster 2 or just get deleted so I delete the federated resource deleting",
    "start": "3569520",
    "end": "3575220"
  },
  {
    "text": "cluster 1 as well luckily we have to be clustered so it didn't make a difference but one thing is they're like plans to",
    "start": "3575220",
    "end": "3581670"
  },
  {
    "text": "help like your well now almost if you need to so your horror story is not",
    "start": "3581670",
    "end": "3587760"
  },
  {
    "text": "unique we had another person I think with huawei who reported the same problem and it was kind of a long-standing issue",
    "start": "3587760",
    "end": "3595590"
  },
  {
    "text": "that we somehow hadn't encountered because we're not proper users I guess but we were managing resources that we",
    "start": "3595590",
    "end": "3601890"
  },
  {
    "text": "hadn't actually created or like if you create a federated resource and an existing resources there and then you",
    "start": "3601890",
    "end": "3608970"
  },
  {
    "text": "set the placement so it doesn't include this existing resource it deletes it so we've we've moved sort of beyond that by",
    "start": "3608970",
    "end": "3614910"
  },
  {
    "text": "labeling resources that we manage and we will adopt existing resources conditionally right now it's conditional",
    "start": "3614910",
    "end": "3621570"
  },
  {
    "text": "across the whole control plane but if you wanted to avoid the sort of scenario you're talking about you could set a",
    "start": "3621570",
    "end": "3626850"
  },
  {
    "text": "flag in the control manager that said you know don't adopt resources and that",
    "start": "3626850",
    "end": "3632220"
  },
  {
    "text": "would mean it wouldn't ever adopt existing resources and if it doesn't own them if it doesn't actually have a label",
    "start": "3632220",
    "end": "3638700"
  },
  {
    "text": "that says I'm owned by Federation or managed by Federation it won't delete them it won't it won't update them so",
    "start": "3638700",
    "end": "3644580"
  },
  {
    "text": "you can work around it today I'm really sorry that that wasn't the case in the past",
    "start": "3644580",
    "end": "3650570"
  },
  {
    "text": "and in terms of like extra cating yourself I was kind of thinking you were going down the path of like I have",
    "start": "3650700",
    "end": "3656470"
  },
  {
    "text": "federated resources I want to decelerate them that is something that should be easy enough to implement like we have",
    "start": "3656470",
    "end": "3662740"
  },
  {
    "text": "the cube fed federate which converts you know this to this I mean it's a pretty simple transformation to take a",
    "start": "3662740",
    "end": "3668350"
  },
  {
    "text": "federated resource and just create a normal cube resource out of that if that's what you're asking for and then",
    "start": "3668350",
    "end": "3680260"
  },
  {
    "text": "that was nothing that I was just talking about like how do I stop a resource from",
    "start": "3680260",
    "end": "3685600"
  },
  {
    "text": "being controlled by the Federation yeah what you were saying by the labels so I",
    "start": "3685600",
    "end": "3691780"
  },
  {
    "text": "mean you can if you had an existing resource that was managed you could actually remove the label manually and",
    "start": "3691780",
    "end": "3698020"
  },
  {
    "text": "that would have the same effect or just kill the control plane that would also work any further questions",
    "start": "3698020",
    "end": "3710640"
  },
  {
    "text": "No well then you got some time back thanks all [Applause]",
    "start": "3710640",
    "end": "3721920"
  }
]