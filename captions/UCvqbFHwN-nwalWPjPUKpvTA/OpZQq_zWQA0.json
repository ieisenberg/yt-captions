[
  {
    "text": "all right uh we're gonna go ahead and get started now and welcome everybody uh thanks for",
    "start": "240",
    "end": "5680"
  },
  {
    "text": "joining session today uh my name is danielle i'm cncf ambassador and suburban track chair this",
    "start": "5680",
    "end": "12240"
  },
  {
    "text": "is kubecon and i'm so glad to be here for moderating this session today so",
    "start": "12240",
    "end": "18080"
  },
  {
    "text": "we're going to talk a little bit about the cloud agnostic design for front and profit today",
    "start": "18080",
    "end": "23840"
  },
  {
    "text": "and then just one quick remind and then you've got any technical question during the session please raise your hand end",
    "start": "23840",
    "end": "32320"
  },
  {
    "text": "of the session and our great speakers and presenter will address your questions",
    "start": "32320",
    "end": "38079"
  },
  {
    "text": "so now i'm gonna introduce our presenter",
    "start": "38079",
    "end": "43440"
  },
  {
    "text": "our alex meyer uh the impressive team lead in the crochet inc and then also",
    "start": "43440",
    "end": "49360"
  },
  {
    "text": "the anusha iyer both cto and uh co-founder and",
    "start": "49360",
    "end": "54480"
  },
  {
    "text": "yeah kosher inc the please welcome on the stage about alex and anusha",
    "start": "54480",
    "end": "60879"
  },
  {
    "text": "thank you great thanks daniel uh welcome everyone thank you for coming",
    "start": "60879",
    "end": "67680"
  },
  {
    "text": "uh it's good to be here in person and thanks to those of us who are also online uh",
    "start": "67680",
    "end": "72960"
  },
  {
    "text": "wanted to talk today a little bit about kind of our approach for uh cloud agnostic design and you know really",
    "start": "72960",
    "end": "80080"
  },
  {
    "text": "we i just wanted to convey like we're really excited to talk about this because we applied some of these things",
    "start": "80080",
    "end": "86080"
  },
  {
    "text": "at our organization really and it's i think i'm not exaggerating when it's changed the way we do business",
    "start": "86080",
    "end": "92000"
  },
  {
    "text": "you know it's just a kind of a new way of looking at things um a little bit more about us so yeah as",
    "start": "92000",
    "end": "98640"
  },
  {
    "text": "daniel said i'm alex meyer i'm the infrastructure lead at corsa i've been with coursera since 2018 uh",
    "start": "98640",
    "end": "105040"
  },
  {
    "text": "discovered kubernetes a few years before that in 2017 actually",
    "start": "105040",
    "end": "110159"
  },
  {
    "text": "and i came here from you know places where we really were all in on a certain cloud provider",
    "start": "110159",
    "end": "116159"
  },
  {
    "text": "and it kind of got ourselves locked in um so we experienced the pain of that and that cloud provider effectively had",
    "start": "116159",
    "end": "122079"
  },
  {
    "text": "pricing power because we were locked in absolutely yeah i'm anusha iyer i'm the",
    "start": "122079",
    "end": "128319"
  },
  {
    "text": "cto and one of the co-founders of corsa um introduced to kubernetes through alex",
    "start": "128319",
    "end": "134400"
  },
  {
    "text": "in fact and uh you know just fell in love with the whole concept of infrastructure as code i think it really",
    "start": "134400",
    "end": "141280"
  },
  {
    "text": "elevates the idea of infrastructure as a first class citizen in the whole software engineering development",
    "start": "141280",
    "end": "146720"
  },
  {
    "text": "deployment process and so we've really embraced it head on right into integrating into code reviews and",
    "start": "146720",
    "end": "153840"
  },
  {
    "text": "the whole kind of dev pipeline and it's fantastic and excited to tell you more about it today",
    "start": "153840",
    "end": "159760"
  },
  {
    "text": "yes so we're going to structure our talk today sort of as a case study of what we've done we'll set the stage early",
    "start": "159760",
    "end": "165360"
  },
  {
    "text": "about our app just to kind of give some background and kind of motivate why we even care about cloud agnostic design",
    "start": "165360",
    "end": "172560"
  },
  {
    "text": "we'll go over what we consider the fundamental building blocks to this approach which is helm and then helm charts scaling that",
    "start": "172560",
    "end": "179280"
  },
  {
    "text": "out we'll explore some economics involved in the modern cloud computing market",
    "start": "179280",
    "end": "184480"
  },
  {
    "text": "we'll talk about terraform actually corpse terraform which is a big part of our success here",
    "start": "184480",
    "end": "189680"
  },
  {
    "text": "we'll go briefly over our journey to date and we'll try and apply these concepts",
    "start": "189680",
    "end": "194959"
  },
  {
    "text": "to maybe other organizations of varying sizes and we will talk about where we hope to kind of take",
    "start": "194959",
    "end": "201440"
  },
  {
    "text": "cloud agnostic design beyond this we'll end then with kind of some summaries of lessons learned and maybe",
    "start": "201440",
    "end": "207840"
  },
  {
    "text": "some of our favorite stories from our journey yeah and so a little bit about what we",
    "start": "207840",
    "end": "214799"
  },
  {
    "text": "do to just set the stage um we are an early startup uh just about eight people",
    "start": "214799",
    "end": "221280"
  },
  {
    "text": "where about five of us are on the engineering side and there's a few of us on the bd side we're based out of the dc",
    "start": "221280",
    "end": "228000"
  },
  {
    "text": "area a lot of our routes actually come from the dod intelligence world and so",
    "start": "228000",
    "end": "234480"
  },
  {
    "text": "you know even this idea of embracing cloud took a bit for me personally",
    "start": "234480",
    "end": "240480"
  },
  {
    "text": "and in terms of what the the app actually is what we've come up with is a",
    "start": "240480",
    "end": "245680"
  },
  {
    "text": "way to do fully automated mfa for apis and we've heard a lot about api security",
    "start": "245680",
    "end": "251680"
  },
  {
    "text": "i think you know even in the keynotes and things",
    "start": "251680",
    "end": "255840"
  },
  {
    "text": "i request have it go with a one-time use you know dynamic credential just the",
    "start": "257440",
    "end": "263199"
  },
  {
    "text": "same way that you do with google authenticator or an rsa token on the human side",
    "start": "263199",
    "end": "268479"
  },
  {
    "text": "the way that we had to go to get it fully automated was we actually you know have these notions of",
    "start": "268479",
    "end": "275440"
  },
  {
    "text": "authenticators just like a google authenticator and we push it down to a machine so your api client that could be",
    "start": "275440",
    "end": "283199"
  },
  {
    "text": "a kubernetes pod it could be a docker container it could be an edge iot device",
    "start": "283199",
    "end": "288400"
  },
  {
    "text": "these authenticators start establishing like dynamic identities against our",
    "start": "288400",
    "end": "293759"
  },
  {
    "text": "platform and a core part of our platform is a distributed ledger network this is what's going to collect the",
    "start": "293759",
    "end": "299680"
  },
  {
    "text": "identities and then kind of verify the mfa credentials on the other way out and",
    "start": "299680",
    "end": "304720"
  },
  {
    "text": "so the notion of it being kind of a distributed base distributed trust",
    "start": "304720",
    "end": "309919"
  },
  {
    "text": "really fundamental to what we do and and really um you know led the way to a lot",
    "start": "309919",
    "end": "315280"
  },
  {
    "text": "of the design philosophy we'll talk about today certainly it's a security product so what do we need we need things like high",
    "start": "315280",
    "end": "322360"
  },
  {
    "text": "availability um we need to be able to support the platform as both a sas as",
    "start": "322360",
    "end": "328800"
  },
  {
    "text": "well as on-prem for certain you know sensitive customers and things like that and because we're talking about api",
    "start": "328800",
    "end": "335280"
  },
  {
    "text": "requests and authentication we need scale so we need to be able to support thousands of api requests per second and",
    "start": "335280",
    "end": "342400"
  },
  {
    "text": "so you know look for those themes as we as we go through the talk so to give a little bit more depth uh as",
    "start": "342400",
    "end": "349440"
  },
  {
    "text": "we hone in on what exactly is running in the cloud our distributed ledger is called it's hyper ledger fabric it's",
    "start": "349440",
    "end": "356240"
  },
  {
    "text": "something developed by ibm we've taken it kind of to the edge so if portions of it run in the cloud portions",
    "start": "356240",
    "end": "362960"
  },
  {
    "text": "of it run in the customer on the customer systems the customers on the left here the cloud portions are on",
    "start": "362960",
    "end": "369360"
  },
  {
    "text": "the right and i wanted to draw everyone's attention to these ideas of these peers and order objects that",
    "start": "369360",
    "end": "374800"
  },
  {
    "text": "hyperledger uses now their exact operation isn't terribly important but the orderers themselves form a",
    "start": "374800",
    "end": "381280"
  },
  {
    "text": "distributed system right these raft and elect leaders and that sort of thing the peers use gossip to",
    "start": "381280",
    "end": "386880"
  },
  {
    "text": "establish their own distributed system so you know we get this sort of consensus mechanism",
    "start": "386880",
    "end": "393039"
  },
  {
    "text": "and you know that that will as we'll see has been really an important decision for us",
    "start": "393039",
    "end": "398560"
  },
  {
    "text": "uh all of this we have been able to run darn near free since 2018. uh and how do",
    "start": "398560",
    "end": "405360"
  },
  {
    "text": "we do this well all the major cloud providers have startup credit programs right they want you to come over and try",
    "start": "405360",
    "end": "412720"
  },
  {
    "text": "their system they want to lure you from their competitor and they will give you a whole bunch of",
    "start": "412720",
    "end": "417919"
  },
  {
    "text": "free money essentially right credit to use against their system to evaluate it",
    "start": "417919",
    "end": "423440"
  },
  {
    "text": "and basically we you can kind of see that we start off with gcp went to aws and we got to this point where as one",
    "start": "423440",
    "end": "430160"
  },
  {
    "text": "startup program was uh sort of drying up so to speak we had already gotten the wheels turning",
    "start": "430160",
    "end": "436319"
  },
  {
    "text": "on on the next one and you know by applying these principles we were able to kind of gain economic defense",
    "start": "436319",
    "end": "443759"
  },
  {
    "text": "absolutely and you know start-up credit's obviously great for keeping operating costs low i guess show of",
    "start": "443759",
    "end": "450560"
  },
  {
    "text": "hands here for those in person and maybe out there virtual how many of you have worked in a startup are doing a startup",
    "start": "450560",
    "end": "457280"
  },
  {
    "text": "right now quite a few yeah so i'm sure you're all familiar with that cardinal rule right",
    "start": "457280",
    "end": "464080"
  },
  {
    "text": "droom don't run out of money and so certainly that's been a big driving",
    "start": "464080",
    "end": "469360"
  },
  {
    "text": "force in terms of being able to do this kind of hopping but i will say that you",
    "start": "469360",
    "end": "475039"
  },
  {
    "text": "know one of the unanticipated benefits of taking this route is it's a great way",
    "start": "475039",
    "end": "480479"
  },
  {
    "text": "to at least it was for us to understand that landscape the whole cloud native ecosystem of what we're trying to",
    "start": "480479",
    "end": "486560"
  },
  {
    "text": "protect and also to meet customers where they are so now we've got you know say a",
    "start": "486560",
    "end": "491840"
  },
  {
    "text": "sensitive customer that's running in azure gov we can say no problem we can set up a managed service for you there",
    "start": "491840",
    "end": "497919"
  },
  {
    "text": "and so it's really turned us into almost a managed service that's a forest as opposed to",
    "start": "497919",
    "end": "504080"
  },
  {
    "text": "just a large tree yeah and you know we of course didn't start out with this",
    "start": "504080",
    "end": "509520"
  },
  {
    "text": "outcome in mind i guess you could say uh we originally started to anusha's point is that we need to run on a wide range",
    "start": "509520",
    "end": "516640"
  },
  {
    "text": "of customer systems since we are a security product we have customers that say no open internet right no access to the",
    "start": "516640",
    "end": "523279"
  },
  {
    "text": "internet so they need to run on-prem and so with in that case we say okay you",
    "start": "523279",
    "end": "529200"
  },
  {
    "text": "know you can use cops for example kubernetes operations and you know deploy a kubernetes cluster and",
    "start": "529200",
    "end": "535519"
  },
  {
    "text": "we don't have to kind of take on that that effort because you know cncf already handles a lot of that",
    "start": "535519",
    "end": "541279"
  },
  {
    "text": "some of our customers want to run on vms right they run on just exei other vmware stuff and they just want to get off the",
    "start": "541279",
    "end": "547760"
  },
  {
    "text": "ground and running as quickly as possible to prove prove us out so for that we install k3s a lightweight",
    "start": "547760",
    "end": "554320"
  },
  {
    "text": "kubernetes client onto a vm deploy it to the customer they can run it in their legacy infrastructure they don't even",
    "start": "554320",
    "end": "560080"
  },
  {
    "text": "know kubernetes and helm are under the hood and then we you know we get it in that way other customers are fine running on",
    "start": "560080",
    "end": "566720"
  },
  {
    "text": "the public cloud and they just need massive scale right so we support all the major cloud providers all this from",
    "start": "566720",
    "end": "572000"
  },
  {
    "text": "the same set of artifacts that we developed and pushed right now we're using azure so we develop in azure",
    "start": "572000",
    "end": "578000"
  },
  {
    "text": "through our helm chart repo and our docker registry you know it's that point of indirection where we support all of these kind of transparent",
    "start": "578000",
    "end": "585839"
  },
  {
    "text": "absolutely and and so you know form follows function we had kind of a set of requirements in our minds when we",
    "start": "587040",
    "end": "594000"
  },
  {
    "text": "started this off that sort of took us towards this path um one was certainly we wanted a",
    "start": "594000",
    "end": "600480"
  },
  {
    "text": "distributed consensus model where especially as a security platform there's no single point of failure no",
    "start": "600480",
    "end": "606480"
  },
  {
    "text": "single point of attack we really wanted to raise that bar in terms of attack effort necessary and so you know a",
    "start": "606480",
    "end": "614720"
  },
  {
    "text": "byzantine fault tolerant system like a distributed ledger network made a ton of sense",
    "start": "614720",
    "end": "619839"
  },
  {
    "text": "other things we wanted to be able to as alex mentioned run across a wide array",
    "start": "619839",
    "end": "625360"
  },
  {
    "text": "of platforms and environments and so kubernetes is a fantastic indirection layer for that",
    "start": "625360",
    "end": "631600"
  },
  {
    "text": "and then similarly you know being able to support kind of those air-gapped and",
    "start": "631600",
    "end": "636800"
  },
  {
    "text": "sensitive scenarios even um while at the same time offering a sas",
    "start": "636800",
    "end": "641920"
  },
  {
    "text": "and so there you know the ability to omit that cloud platform or emit the",
    "start": "641920",
    "end": "648480"
  },
  {
    "text": "requirement to connect out to assass was an important design constraint for us",
    "start": "648480",
    "end": "654399"
  },
  {
    "text": "and so in those routes as he mentioned you know sometimes we've done k3s sometimes it's just you can run uh",
    "start": "654399",
    "end": "662160"
  },
  {
    "text": "kate's cluster locally and deploy us there and then similarly you know",
    "start": "662160",
    "end": "667279"
  },
  {
    "text": "putting together a product you want to get to production grade services as quickly as possible right and that's",
    "start": "667279",
    "end": "673519"
  },
  {
    "text": "where that ecosystem of helm charts has just proven invaluable to us it's just",
    "start": "673519",
    "end": "678880"
  },
  {
    "text": "such a force multiplier in terms of going out there and knowing you're getting you know such good quality stuff",
    "start": "678880",
    "end": "684880"
  },
  {
    "text": "that you can get up and running quickly yeah so let's take a look at one of these uh charts",
    "start": "684880",
    "end": "692480"
  },
  {
    "text": "uh in this case we're looking at the bitnami postgres charts so what we've done here is i've gone to aws's rds site",
    "start": "692480",
    "end": "700720"
  },
  {
    "text": "which is their sort of managed postgres service and",
    "start": "700720",
    "end": "705839"
  },
  {
    "text": "picked off kind of their bullet points of why you'd want to use that and sort of compare them here",
    "start": "705839",
    "end": "711600"
  },
  {
    "text": "to one of the postgres charts this is a pretty typical advantage of one of our diy cloud provider services",
    "start": "711600",
    "end": "718399"
  },
  {
    "text": "and what we're trying to get across here is that a lot of these features that rds gives for you in",
    "start": "718399",
    "end": "724320"
  },
  {
    "text": "exchange for of course paying them you can get using already existing you know unmodified helm charts",
    "start": "724320",
    "end": "730639"
  },
  {
    "text": "that you just pull off of artifact for example rds says we have fast predictable storage well",
    "start": "730639",
    "end": "736560"
  },
  {
    "text": "you know with the bitnami postgres chart you just set global.storage class you can use the exact same type of storage",
    "start": "736560",
    "end": "742720"
  },
  {
    "text": "rds is using and it's a parameter no uh backup and recovery there are tons of kubernetes and",
    "start": "742720",
    "end": "749760"
  },
  {
    "text": "you know backup systems and like valero which is what we're planning on using",
    "start": "749760",
    "end": "755360"
  },
  {
    "text": "uh you know you can adjust read replicas high availability again all these features you can get from configuration",
    "start": "755360",
    "end": "761920"
  },
  {
    "text": "uh metrics for me this the bitnami chart has built-in prometheus metrics",
    "start": "761920",
    "end": "767279"
  },
  {
    "text": "the one thing that of course a chart that you do on your your own doesn't have as an sla right uh rds has an sla",
    "start": "767279",
    "end": "774959"
  },
  {
    "text": "financial sla that it will be up uh and you know this gave us pause i guess but we've been using this stuff in",
    "start": "774959",
    "end": "781120"
  },
  {
    "text": "production for a while and really i mean if you flick all the switches you can",
    "start": "781120",
    "end": "786399"
  },
  {
    "text": "get some real stability out of this um and as long as you follow back up best practices you can recover from it",
    "start": "786399",
    "end": "793680"
  },
  {
    "text": "um you know yeah there was a little bit of config up front that was needed but again all this is committed to code right all this is just in there and so",
    "start": "793680",
    "end": "800399"
  },
  {
    "text": "it's a one-time cost another example of a chart that this",
    "start": "800399",
    "end": "807519"
  },
  {
    "text": "this time we implemented we call it our bootstrap chart so when we're onboarding to a new cloud provider",
    "start": "807519",
    "end": "813920"
  },
  {
    "text": "there's there are some differences like storage classes and that sort of thing that is just specific to the cloud",
    "start": "813920",
    "end": "818959"
  },
  {
    "text": "provider and you know you really there aren't much opportunities there for a generic design so we concentrate",
    "start": "818959",
    "end": "826880"
  },
  {
    "text": "all of that cloud provider specific configuration into this one chart so we say you know when it's time to onboard a",
    "start": "826880",
    "end": "833040"
  },
  {
    "text": "new provider what do we need to even look at to begin considering to make sure we have a smooth transition and",
    "start": "833040",
    "end": "838399"
  },
  {
    "text": "it's in one place so for example i have part of a helm chart here and we pass in the provider",
    "start": "838399",
    "end": "844399"
  },
  {
    "text": "as a helm parameter and it just renders differently based on whether you're using aws as storage provisioner or",
    "start": "844399",
    "end": "850639"
  },
  {
    "text": "otherwise and in this bootstrap chart we have of course storage classes ingress settings since load balancers are",
    "start": "850639",
    "end": "856639"
  },
  {
    "text": "slightly different between different cloud providers uh our web application firewall config",
    "start": "856639",
    "end": "862880"
  },
  {
    "text": "uh again slight differences between cloud providers and get you and in the future we'll have sort of this base set",
    "start": "862880",
    "end": "868320"
  },
  {
    "text": "of crd so that those will be sitting in the cluster uh ready to go",
    "start": "868320",
    "end": "874000"
  },
  {
    "text": "so everything in our kubernetes cluster is a helm a helm chart excuse me without exception",
    "start": "874639",
    "end": "881600"
  },
  {
    "text": "so this quickly becomes unwieldy you have dozens and dozens of these helm charts and",
    "start": "881600",
    "end": "887040"
  },
  {
    "text": "i mean you could i guess script a bunch of helm installs one after another but you know it just it becomes difficult",
    "start": "887040",
    "end": "893199"
  },
  {
    "text": "so what we rely on is an amazing tool called helm file available on github and",
    "start": "893199",
    "end": "898800"
  },
  {
    "text": "you basically list out like a manifest of all your different charts and you can see here a little toy example of an elk",
    "start": "898800",
    "end": "905440"
  },
  {
    "text": "stack a logging stack being built by a helm chart so we have",
    "start": "905440",
    "end": "910560"
  },
  {
    "text": "you specify the version of the chart you want to install you point to the chart online and it supports values files so again",
    "start": "910560",
    "end": "917839"
  },
  {
    "text": "you can see you point to a file that has the values for that chart it also supports encrypted secrets so we encrypt",
    "start": "917839",
    "end": "923600"
  },
  {
    "text": "all of our secret data with pgp and it's just",
    "start": "923600",
    "end": "928399"
  },
  {
    "text": "right so you know you put all of these pieces together and the emergent property that we have is we have a cloud",
    "start": "930480",
    "end": "937600"
  },
  {
    "text": "agnostic platform you know to give you a sense we can go from",
    "start": "937600",
    "end": "942639"
  },
  {
    "text": "zero to fully operational for our dev cluster a staging cluster",
    "start": "942639",
    "end": "948320"
  },
  {
    "text": "production stacks across all of your major cloud providers in the matter of a few minutes by just kind of pointing the",
    "start": "948320",
    "end": "955440"
  },
  {
    "text": "cube config at a different cluster um so it's super powerful stuff uh and",
    "start": "955440",
    "end": "961040"
  },
  {
    "text": "really you know a couple of things that we've leveraged on the platform providers have helped us is one we're",
    "start": "961040",
    "end": "967519"
  },
  {
    "text": "sticking with managed kate's on the platform provider so it takes some of the burden of you know running running",
    "start": "967519",
    "end": "973839"
  },
  {
    "text": "the cluster yourself and and managing that and then also making sure that",
    "start": "973839",
    "end": "979759"
  },
  {
    "text": "we don't rely um unintentionally on any managed services so you know there's",
    "start": "979759",
    "end": "986079"
  },
  {
    "text": "nothing that we have to bring with us when we're moving over and we really are kind of this this self-contained",
    "start": "986079",
    "end": "992720"
  },
  {
    "text": "application platform in a box absolutely so you know we had this",
    "start": "992720",
    "end": "998639"
  },
  {
    "text": "realization right that we can operate on any cloud and it again it",
    "start": "998639",
    "end": "1004639"
  },
  {
    "text": "sort of came on us as a surprise but when we kind of get the self-awareness we're like well what can we do with it so we looked at the most straightforward",
    "start": "1004639",
    "end": "1012000"
  },
  {
    "text": "thing which of course is cost right of a cloud instance now cloud computing is increasingly become a",
    "start": "1012000",
    "end": "1018560"
  },
  {
    "text": "commodity right we have all the big players and it's again commoditized like one vcpu on aws is for all intents and",
    "start": "1018560",
    "end": "1026240"
  },
  {
    "text": "purposes the same as a vcpu on an energy uke for example uh some cloud providers",
    "start": "1026240",
    "end": "1034000"
  },
  {
    "text": "are profitable and they are willing to defend market share right by pricing low others are willing",
    "start": "1034000",
    "end": "1039918"
  },
  {
    "text": "to just take a loss right an example that is gcp gcp because they are trying to gain market",
    "start": "1039919",
    "end": "1046000"
  },
  {
    "text": "share this situation obviously is very beneficial for us the users",
    "start": "1046000",
    "end": "1052480"
  },
  {
    "text": "so just as a sort of example here i i grabbed the prices on in late august",
    "start": "1052480",
    "end": "1058240"
  },
  {
    "text": "from all the major cloud providers of the instance type we used primarily in m2 m5.2x large instance and sort of",
    "start": "1058240",
    "end": "1065120"
  },
  {
    "text": "compared them and these are all roughly in the same region so for example if you move from azure to aws that's potentially a",
    "start": "1065120",
    "end": "1072799"
  },
  {
    "text": "15 cost savings or an equivalent on-demand instance type",
    "start": "1072799",
    "end": "1078400"
  },
  {
    "text": "if you move from aws to gcp it's potentially a one percent more expensive",
    "start": "1078400",
    "end": "1084000"
  },
  {
    "text": "right and i mean you know again this is very specific you'd have to create this for your region that it's variable",
    "start": "1084000",
    "end": "1090080"
  },
  {
    "text": "but just sort of a snapshot of like there are some pretty significant opportunities here for costly",
    "start": "1090080",
    "end": "1097440"
  },
  {
    "text": "yeah and so you know here's the challenge it's fantastic you can save quite a bit by being able to stay",
    "start": "1097919",
    "end": "1106320"
  },
  {
    "text": "nimble stay agnostic switch providers but you know we don't want to oversimplify things there are nuances",
    "start": "1106320",
    "end": "1113360"
  },
  {
    "text": "between the providers as you know alex has mentioned sometimes the load balancers the ingress controller storage",
    "start": "1113360",
    "end": "1118880"
  },
  {
    "text": "classes things like that and so even things like well how do you leverage the kate's api for a provider how do you",
    "start": "1118880",
    "end": "1126240"
  },
  {
    "text": "actually set up your configuration for that um and so you know there are again tricks to doing",
    "start": "1126240",
    "end": "1133200"
  },
  {
    "text": "that briefly among them is the use of terraform right our goal is to get a",
    "start": "1133200",
    "end": "1139760"
  },
  {
    "text": "kubernetes api and backing worker nodes up as quickly as possible so that we can just hit it with our helm files and you",
    "start": "1139760",
    "end": "1146640"
  },
  {
    "text": "know get back up to our full kind of capacity the terraform is created by hashicorp but it is open",
    "start": "1146640",
    "end": "1153200"
  },
  {
    "text": "source and it's a pretty remarkable piece of software and it is basically lets you codify cloud provider",
    "start": "1153200",
    "end": "1159200"
  },
  {
    "text": "configuration and then it uses aws apis to you know install those resources or",
    "start": "1159200",
    "end": "1165360"
  },
  {
    "text": "gke or so on and so forth it really did let us go from zero to having a kubernetes cluster",
    "start": "1165360",
    "end": "1172320"
  },
  {
    "text": "ready to receive api commands in under two weeks this is because all of the major cloud",
    "start": "1172320",
    "end": "1178799"
  },
  {
    "text": "providers have lots of examples well maintained terraform modules because again they want your business right they",
    "start": "1178799",
    "end": "1184160"
  },
  {
    "text": "want you to come to them um so we sort of flipped the script on what we did with the with our corsa bootstrap helm",
    "start": "1184160",
    "end": "1191120"
  },
  {
    "text": "chart where we instead of concentrating all the config that's different we concentrate all the configuration",
    "start": "1191120",
    "end": "1197679"
  },
  {
    "text": "terraform that's the same because the sort of assumption is that everything is going to be different in a",
    "start": "1197679",
    "end": "1202960"
  },
  {
    "text": "terraform module because the provider's right so in our comment you know in this little example we have a module that aws",
    "start": "1202960",
    "end": "1209360"
  },
  {
    "text": "eks configures an aks cluster and uh or eks cluster and provisions it",
    "start": "1209360",
    "end": "1214880"
  },
  {
    "text": "azure aks configures an aks cluster all of these rely on this common module that",
    "start": "1214880",
    "end": "1220240"
  },
  {
    "text": "has stuff that you know transcends cloud providers like maximum size for example of a node pool",
    "start": "1220240",
    "end": "1226640"
  },
  {
    "text": "uh or your your ips right those are going to be the same on all the cloud providers and we index into this list of",
    "start": "1226640",
    "end": "1232880"
  },
  {
    "text": "variables using the terraform uh workspaces whether it's dev or prod and",
    "start": "1232880",
    "end": "1237919"
  },
  {
    "text": "then just smash them into the big list of cloud provider specific configuration and there you go you only have one place",
    "start": "1237919",
    "end": "1244080"
  },
  {
    "text": "to make it one change and then it's applicable to all your cloud providers",
    "start": "1244080",
    "end": "1249840"
  },
  {
    "text": "uh just before we go on i wanted to kind of give a quick nod to the challenge of migrating prod",
    "start": "1250720",
    "end": "1257039"
  },
  {
    "text": "in this sort of in this sort of paradigm for us our architecture bails us out in",
    "start": "1257039",
    "end": "1263120"
  },
  {
    "text": "that it's a distributed system that's dynamic right we can add and remove nodes slowly uh in the example i have at",
    "start": "1263120",
    "end": "1270880"
  },
  {
    "text": "the bottom here where what we call straddling a cloud provider so we've gone and",
    "start": "1270880",
    "end": "1276000"
  },
  {
    "text": "added a node into gke but it's still communicating with other blockchain nodes",
    "start": "1276000",
    "end": "1281440"
  },
  {
    "text": "in azure and then slowly one by one those will come over as we",
    "start": "1281440",
    "end": "1287679"
  },
  {
    "text": "move completely over to the new cloud provider there are a lot of other examples of this for different systems postgres has this pg pool tool which uh",
    "start": "1287679",
    "end": "1295760"
  },
  {
    "text": "allows you to add and remove replicas and fails over quickly uh so you know there are there are ways",
    "start": "1295760",
    "end": "1302240"
  },
  {
    "text": "to do kind of zero downtime broad migration for dr again we're going to kind of gloss over this because everyone's",
    "start": "1302240",
    "end": "1308240"
  },
  {
    "text": "situation different valero there are lots of other kubernetes objects kubernetes volume",
    "start": "1308240",
    "end": "1315200"
  },
  {
    "text": "snapshotting right there a lot of non-cloud provider specific options for that",
    "start": "1315200",
    "end": "1320720"
  },
  {
    "text": "and you know we would definitely recommend at least a little automation around the creation and restoration of",
    "start": "1320720",
    "end": "1326559"
  },
  {
    "text": "this just to again make it all all varies",
    "start": "1326559",
    "end": "1331960"
  },
  {
    "text": "to kind of put this all together and give everyone a look at our stack uh we we have here a bunch of our different",
    "start": "1332080",
    "end": "1338640"
  },
  {
    "text": "name spaces that we deploy uh all of this in support of our of course customer workloads which are a golang",
    "start": "1338640",
    "end": "1345600"
  },
  {
    "text": "business logic fronted by node.js or any sort of front-end work and then postgres for customer data",
    "start": "1345600",
    "end": "1353039"
  },
  {
    "text": "we just bring our own ci cd name space right we install our own sonar cube our own jenkins",
    "start": "1353039",
    "end": "1359120"
  },
  {
    "text": "we deploy an elk stack using a last alert for log-based alerting which is a yelp project",
    "start": "1359120",
    "end": "1366080"
  },
  {
    "text": "you know there are the ncf tools sprinkled all over this right prometheus is there we install grafana",
    "start": "1366080",
    "end": "1372480"
  },
  {
    "text": "we install the kubernetes engine x ingress controller and then use cert manager which again handles all our",
    "start": "1372480",
    "end": "1377919"
  },
  {
    "text": "renewal certificates and everything like that when we onboard to a new provider one thing i would just want to point out",
    "start": "1377919",
    "end": "1383679"
  },
  {
    "text": "is we still do use route 53 no matter which cloud provider we're on we use a tool",
    "start": "1383679",
    "end": "1388960"
  },
  {
    "text": "called external dns we give it a service account so it can communicate to aws and then wherever",
    "start": "1388960",
    "end": "1394799"
  },
  {
    "text": "we're from it just it phones home that way yeah and so you know essentially what",
    "start": "1394799",
    "end": "1401520"
  },
  {
    "text": "we've done is kind of put this application platform into a box as well as wrapped it around all of the",
    "start": "1401520",
    "end": "1409200"
  },
  {
    "text": "the support and services we need to manage development testing continuous pipelines",
    "start": "1409200",
    "end": "1416640"
  },
  {
    "text": "and so it's a fantastic way for a small team to kind of use the whole",
    "start": "1416640",
    "end": "1422080"
  },
  {
    "text": "ecosystem as a force multiplier we're definitely punching beyond what",
    "start": "1422080",
    "end": "1428159"
  },
  {
    "text": "you would imagine for the size of the team to be able to maintain all of this and still keep our sanity",
    "start": "1428159",
    "end": "1436240"
  },
  {
    "text": "absolutely yeah so we we thought this might be helpful um to any of you that are",
    "start": "1436240",
    "end": "1442080"
  },
  {
    "text": "considering taking this path is to just kind of walk you through what our journey was and and how we",
    "start": "1442080",
    "end": "1449120"
  },
  {
    "text": "matured and added elements to our ecosystem along the way and just you know kind of how they staged out and",
    "start": "1449120",
    "end": "1455279"
  },
  {
    "text": "stuff so um we started in 2018 um when the company was founded",
    "start": "1455279",
    "end": "1461760"
  },
  {
    "text": "and this is pre alex so we were on aws very much in the world of",
    "start": "1461760",
    "end": "1467760"
  },
  {
    "text": "vms and docker compose on aws and um then he joined in q2 of that year",
    "start": "1467760",
    "end": "1474480"
  },
  {
    "text": "and sort of opened up our our eyes to the the power of kate's if you will and helm",
    "start": "1474480",
    "end": "1480159"
  },
  {
    "text": "um i think q3 we got into the google for startups program got a little bit of credit there",
    "start": "1480159",
    "end": "1487360"
  },
  {
    "text": "and so decided it was worthwhile transferring over learning more about gcp and then",
    "start": "1487360",
    "end": "1493039"
  },
  {
    "text": "2019 introduced you know our stack was getting more complex we had more elements to it so introduced helm file",
    "start": "1493039",
    "end": "1500240"
  },
  {
    "text": "at that point um for better organization and then q3 is when we got into the aws",
    "start": "1500240",
    "end": "1506960"
  },
  {
    "text": "startup program and that was a larger chunk of change and worth kind of shifting over and that's when i think",
    "start": "1506960",
    "end": "1514400"
  },
  {
    "text": "you and i made that conscious decision to be like all right let's go full in",
    "start": "1514400",
    "end": "1519440"
  },
  {
    "text": "here let's go with kind of a cloud agnostic approach to this whole thing and uh you invested in terraform at that",
    "start": "1519440",
    "end": "1527039"
  },
  {
    "text": "point yeah absolutely i would say yeah when we switched over to aws was kind of our inflection point uh in terms of",
    "start": "1527039",
    "end": "1533200"
  },
  {
    "text": "being committed to this as an approach and you could sort of see that right after q3 of 2019 when we use terraform",
    "start": "1533200",
    "end": "1539200"
  },
  {
    "text": "then you can almost see us sort of asking ourselves what cloud provider services are we relying on what do we",
    "start": "1539200",
    "end": "1544799"
  },
  {
    "text": "need to do to build our own so soon after we were using a lot of log ingestion features so we built our own",
    "start": "1544799",
    "end": "1551360"
  },
  {
    "text": "we built an elk stack right a little bit later okay we're using their cicd systems what do we do we",
    "start": "1551360",
    "end": "1558480"
  },
  {
    "text": "build our own right we went and got jenkins deployed that in at that point aws credit was kind of",
    "start": "1558480",
    "end": "1563840"
  },
  {
    "text": "running out so then we set our sites on azure again terraformed our cluster there and made the jump pretty soon",
    "start": "1563840",
    "end": "1570799"
  },
  {
    "text": "thereafter we just picked our next thing what are we relying on monitoring right and of course there is",
    "start": "1570799",
    "end": "1576159"
  },
  {
    "text": "a terrific pncf project prometheus so we went all in on that got that",
    "start": "1576159",
    "end": "1581600"
  },
  {
    "text": "deployed more recently we've been kind of tightening our supply",
    "start": "1581600",
    "end": "1586799"
  },
  {
    "text": "chain for software so we do uh security scanning on all of our containers again everything is nice",
    "start": "1586799",
    "end": "1593120"
  },
  {
    "text": "and you know again we use helm charts for everything but we are utterly dependent on them so we began to",
    "start": "1593120",
    "end": "1600960"
  },
  {
    "text": "sign our home charts right so that no one can intercept that uh portion of our software supply chain and our customers",
    "start": "1600960",
    "end": "1607200"
  },
  {
    "text": "can also verify that we are the producers of it and you know our credit with azure is",
    "start": "1607200",
    "end": "1613840"
  },
  {
    "text": "about running out now i believe so we're hoping to set our sights on our next cloud provider which we may go back to",
    "start": "1613840",
    "end": "1619440"
  },
  {
    "text": "gcp um and i'll say there you know when we",
    "start": "1619440",
    "end": "1624480"
  },
  {
    "text": "say we're moving or going back really what we've been talking about is moving our dove cluster and kind of our",
    "start": "1624480",
    "end": "1630799"
  },
  {
    "text": "day-to-day ops there but we are simultaneously having deployments in different clusters at the same time",
    "start": "1630799",
    "end": "1636320"
  },
  {
    "text": "that's right yeah based on customer yeah and so you know i know we've been",
    "start": "1636320",
    "end": "1642480"
  },
  {
    "text": "talking a lot about kind of our startup journey but hopefully there are lessons here that transcend more than just",
    "start": "1642480",
    "end": "1647760"
  },
  {
    "text": "startups right there is a lot of negotiating power that can be had if you",
    "start": "1647760",
    "end": "1652880"
  },
  {
    "text": "have a nimble kind of agnostic design and that you are able to jump across um",
    "start": "1652880",
    "end": "1658880"
  },
  {
    "text": "as alex mentioned you know we are in discussions with gcp right now and you",
    "start": "1658880",
    "end": "1663919"
  },
  {
    "text": "know the the providers they're very incentivized to have you come so even beyond the financial benefits oftentimes",
    "start": "1663919",
    "end": "1670880"
  },
  {
    "text": "you know you can work with them to have them show you what are the best practices for terraforming onto their",
    "start": "1670880",
    "end": "1677120"
  },
  {
    "text": "cluster or what are the the trips tips and tricks of you know optimizing performance or",
    "start": "1677120",
    "end": "1683600"
  },
  {
    "text": "storage classes or node types and all of that and so we've been working with gcp just wrapping up a pilot there and",
    "start": "1683600",
    "end": "1689120"
  },
  {
    "text": "they've been fantastic to just kind of you know help us along that that maturity skill yeah we're a little",
    "start": "1689120",
    "end": "1695919"
  },
  {
    "text": "bigger right so we have a little bit more clout and so you kind of take advantage of different programs not just",
    "start": "1695919",
    "end": "1702399"
  },
  {
    "text": "early stage startup programs there are plenty so you know looking ahead we've spent most",
    "start": "1702399",
    "end": "1710000"
  },
  {
    "text": "of this time you know talking about our economic motivations right saving money or that",
    "start": "1710000",
    "end": "1715679"
  },
  {
    "text": "sort of what we are really interested in doing is using these cloud agnostic design",
    "start": "1715679",
    "end": "1721600"
  },
  {
    "text": "concepts to further our business goals right so as again a cyber security company we are like pretty paranoid",
    "start": "1721600",
    "end": "1728399"
  },
  {
    "text": "right and so we ask ourselves what if we went multi-cloud and deployed one portion of our application to each uh",
    "start": "1728399",
    "end": "1735840"
  },
  {
    "text": "cloud provider and then they communicate at the application layer we call this a zero trust deployment",
    "start": "1735840",
    "end": "1741440"
  },
  {
    "text": "right because we are guarding against the compromise or crash of any single",
    "start": "1741440",
    "end": "1747039"
  },
  {
    "text": "cloud provider right and you know in this sort of example we would deploy a third of our blockchain on aws with its",
    "start": "1747039",
    "end": "1754080"
  },
  {
    "text": "own set of private and e material a third of our blockchain on gcp with its own private and then azure and so forth",
    "start": "1754080",
    "end": "1759919"
  },
  {
    "text": "and then our clients of course just talk to all three and it's completely transparent",
    "start": "1759919",
    "end": "1766120"
  },
  {
    "text": "so to kind of summarize what lessons we've learned on our journey you know anusha and i",
    "start": "1768720",
    "end": "1774399"
  },
  {
    "text": "sat down and talked about it you know if we could go back in time three years what what did we do well or what do we",
    "start": "1774399",
    "end": "1780399"
  },
  {
    "text": "wish we had had done uh better but one thing you know that the top of the list for me anyway is",
    "start": "1780399",
    "end": "1786880"
  },
  {
    "text": "way back we picked a distribute a layer of persistence that stores the data that has really good distributed systems",
    "start": "1786880",
    "end": "1792640"
  },
  {
    "text": "properties right which lets us chiefly migrate between providers right you get",
    "start": "1792640",
    "end": "1797919"
  },
  {
    "text": "this consensus and you begin to straddle cloud providers with a portion of your consensus on one portion of your",
    "start": "1797919",
    "end": "1803440"
  },
  {
    "text": "consensus on the other migrate dev to your new cloud provider first uh",
    "start": "1803440",
    "end": "1809520"
  },
  {
    "text": "you know make the developers put up with any sort of things that fell through the cracks in terms of cloud friction or",
    "start": "1809520",
    "end": "1814960"
  },
  {
    "text": "pain a lot better than the customer but be nice to them and maybe take them",
    "start": "1814960",
    "end": "1821039"
  },
  {
    "text": "out for lunch or something um and then you know there as alex",
    "start": "1821039",
    "end": "1827039"
  },
  {
    "text": "mentioned we've kind of kept dns on aws just route 53. this isn't black and",
    "start": "1827039",
    "end": "1833039"
  },
  {
    "text": "white uh in terms of what you need to stay agnostic with if it's a low-cost service not worth the effort that's fine",
    "start": "1833039",
    "end": "1840159"
  },
  {
    "text": "um you know so there's obviously choices as you're going through this and then definitely",
    "start": "1840159",
    "end": "1846240"
  },
  {
    "text": "you know that whole rich world of free source software and the ecosystem of helm charts it's it's such a great force",
    "start": "1846240",
    "end": "1853919"
  },
  {
    "text": "multiplier um but you know with each element that you pull in really",
    "start": "1853919",
    "end": "1859519"
  },
  {
    "text": "understand what you're getting into especially in terms of of configuration and the dials you can turn so um i guess",
    "start": "1859519",
    "end": "1867120"
  },
  {
    "text": "funny story here when we introduced a modsec waff into our ingress controllers",
    "start": "1867120",
    "end": "1873440"
  },
  {
    "text": "we turned it on in production and i was going through a couple weeks of",
    "start": "1873440",
    "end": "1878720"
  },
  {
    "text": "just a whole bunch of of demos like back to back and you know it's a very stable",
    "start": "1878720",
    "end": "1883760"
  },
  {
    "text": "demo environment never had troubles before all of a sudden the demo gods are just like",
    "start": "1883760",
    "end": "1888799"
  },
  {
    "text": "pouring terror upon me and about every two or three demos unreliably i would",
    "start": "1888799",
    "end": "1894159"
  },
  {
    "text": "start blocking myself like literally get like flagged by modsuck and i realized we didn't realize that was happening",
    "start": "1894159",
    "end": "1900320"
  },
  {
    "text": "time but the demo flow i was generating poor authentication requests and i was",
    "start": "1900320",
    "end": "1905679"
  },
  {
    "text": "triggering the defaults in our modsig chart right so those types of things you just really have to to watch the dials yeah",
    "start": "1905679",
    "end": "1913440"
  },
  {
    "text": "yeah and again the root cause of that was minor differences in the way that different cloud providers implement",
    "start": "1913440",
    "end": "1918960"
  },
  {
    "text": "kubernetes load balancers right so needless to say uh that is a piece of config that now",
    "start": "1918960",
    "end": "1924480"
  },
  {
    "text": "lives in our bootstrap helm chart and is installed just right away and is rendered you know in a cloud specific",
    "start": "1924480",
    "end": "1930320"
  },
  {
    "text": "way yeah that one was definitely paid for blood so to speak",
    "start": "1930320",
    "end": "1935600"
  },
  {
    "text": "you want to pull as much off the shelf as you possibly can obviously especially terraform there's a lot of",
    "start": "1935600",
    "end": "1942320"
  },
  {
    "text": "stuff that is very easy to adapt and begin to just hobble out of the gate with",
    "start": "1942320",
    "end": "1947600"
  },
  {
    "text": "and and iam in particular right there's a lot of great resources for that that's something great to manage uh with",
    "start": "1947600",
    "end": "1953679"
  },
  {
    "text": "terraform and kind of simplifies the off the ops workload",
    "start": "1953679",
    "end": "1958799"
  },
  {
    "text": "um yeah and then you know resources and limits um i will begrudgingly admit that this is a really",
    "start": "1958799",
    "end": "1965919"
  },
  {
    "text": "good idea for the scheduler again story we were going through kind of this performance tuning phase where we really",
    "start": "1965919",
    "end": "1972080"
  },
  {
    "text": "wanted to keep latency low and keep transaction rates high and everything and my um my vote was always to take the",
    "start": "1972080",
    "end": "1980080"
  },
  {
    "text": "limits off right hashtag no limits let's see how high this thing could go and we",
    "start": "1980080",
    "end": "1985519"
  },
  {
    "text": "quickly learned and you'll see through slack every time if you can look into our slack every time i would mention",
    "start": "1985519",
    "end": "1991919"
  },
  {
    "text": "this hashtag no limits there's a little eye roll that alex would add in there and he was right right resources and",
    "start": "1991919",
    "end": "1998080"
  },
  {
    "text": "limits are super important for the scheduler and optimizing kind of what that looks like",
    "start": "1998080",
    "end": "2003600"
  },
  {
    "text": "so yeah i mean there's there's kind of tips and tricks hopefully some of our pains are",
    "start": "2003600",
    "end": "2009039"
  },
  {
    "text": "are going to save you some so absolutely well i think that concludes the main portion of our talk",
    "start": "2009039",
    "end": "2016320"
  },
  {
    "text": "thanks for listening do you have any time for a question yep",
    "start": "2016320",
    "end": "2022679"
  },
  {
    "text": "hi uh great talk thank you very much uh i was gonna ask about the terraform bit",
    "start": "2037120",
    "end": "2042399"
  },
  {
    "text": "um you guys talked like how are you approaching the cloud uh agnostic",
    "start": "2042399",
    "end": "2047679"
  },
  {
    "text": "uh philosophy with working with something like terraform are you building modules on modules are",
    "start": "2047679",
    "end": "2053358"
  },
  {
    "text": "you are you abstracting these layers and if so uh are is it open",
    "start": "2053359",
    "end": "2059599"
  },
  {
    "text": "source or is it called sourcing yeah thank you sure uh yeah so the question was you",
    "start": "2059599",
    "end": "2065919"
  },
  {
    "text": "know how are we utilizing terraforming in kind of a cloud agnostic paradigm",
    "start": "2065919",
    "end": "2071440"
  },
  {
    "text": "um i guess i can so to answer your question i'll probably go",
    "start": "2071440",
    "end": "2077440"
  },
  {
    "text": "back a few slides to our terraform slide uh each provider is actually a module uh as",
    "start": "2077440",
    "end": "2085200"
  },
  {
    "text": "we have it currently um an eks cluster is a module that we bring",
    "start": "2085200",
    "end": "2091280"
  },
  {
    "text": "in an aks cluster is a module and again that's invoked and and",
    "start": "2091280",
    "end": "2098480"
  },
  {
    "text": "we make a lot of reasonable choices inside those modules there's not much to them because again",
    "start": "2098480",
    "end": "2104960"
  },
  {
    "text": "these cloud providers are so great with these that it's just the essential config and we basically take these",
    "start": "2104960",
    "end": "2111119"
  },
  {
    "text": "modules and glue them together with our common module that has",
    "start": "2111119",
    "end": "2116480"
  },
  {
    "text": "code that you know we want in each of these other modules so you could say it's a composition of modules",
    "start": "2116480",
    "end": "2122880"
  },
  {
    "text": "um and we do not currently have those uh open source but would be awesome someday",
    "start": "2122880",
    "end": "2128960"
  },
  {
    "text": "that's a good yeah it's definitely a thought so",
    "start": "2128960",
    "end": "2135520"
  },
  {
    "text": "yes uh we actually at the top of the hour so please continue your conversation question on the whole and",
    "start": "2135520",
    "end": "2142160"
  },
  {
    "text": "then our president are more than happy to answer his question and we actually a bunch of questions from the patrol",
    "start": "2142160",
    "end": "2148320"
  },
  {
    "text": "audience as well and please join the slack channel and ask any question and our projector will be uh be there to",
    "start": "2148320",
    "end": "2156320"
  },
  {
    "text": "address the question and thanks for joining again and please make sure to submit your feedback in the schedule.com",
    "start": "2156320",
    "end": "2162720"
  },
  {
    "text": "and it will be very helpful to prepare for next grade cubecon as well thanks again enjoy the rest of the summit and",
    "start": "2162720",
    "end": "2170430"
  },
  {
    "text": "[Applause]",
    "start": "2170430",
    "end": "2173119"
  }
]