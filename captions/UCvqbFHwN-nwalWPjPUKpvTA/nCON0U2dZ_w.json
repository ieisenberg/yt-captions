[
  {
    "start": "0",
    "end": "64000"
  },
  {
    "text": "hi everyone i'm nikhil from google and i'm here with my colleague Greg and we",
    "start": "0",
    "end": "5850"
  },
  {
    "text": "are going to talk about multi clustering is powered by kubernetes cluster registry the lot of powerful words there",
    "start": "5850",
    "end": "12509"
  },
  {
    "text": "so we'll try to break it down for you the way we are going to structure this talk is we are going to start with",
    "start": "12509",
    "end": "18289"
  },
  {
    "text": "before diving into multi clustering else we will just give an overview of why people run multiple cluster and what",
    "start": "18289",
    "end": "24600"
  },
  {
    "text": "does it mean running multiple clusters and then we'll go deeper into specifically multi cluster ingress and",
    "start": "24600",
    "end": "30090"
  },
  {
    "text": "then we'll also talk about command-line tool we have in the open source called cube MC I will give you a short demo of",
    "start": "30090",
    "end": "36630"
  },
  {
    "text": "that and how you can use that to create multi clustering guesses and then would talk about cluster ages 3 and how we can",
    "start": "36630",
    "end": "43079"
  },
  {
    "text": "build controllers over a cluster registry and with that idea how we can do multi cluster ingress and provide",
    "start": "43079",
    "end": "48450"
  },
  {
    "text": "more magic about by using multi class angles using a controller with less registry and we'll do a demo at the end",
    "start": "48450",
    "end": "54360"
  },
  {
    "text": "feel free to ask any questions as you have during the talk or in the end we'll have some time for Q&A as well so there",
    "start": "54360",
    "end": "65250"
  },
  {
    "start": "64000",
    "end": "127000"
  },
  {
    "text": "are lot of reasons why people learn multiple clusters we've highlighted a few here the most common one we hear is",
    "start": "65250",
    "end": "71340"
  },
  {
    "text": "high availability people whine even if one cluster goes down they want to be resilient to zone failures or cluster",
    "start": "71340",
    "end": "77490"
  },
  {
    "text": "failures even if one cluster fails they want to deploy their app to multiple clusters globally in US Europe Asia even",
    "start": "77490",
    "end": "85409"
  },
  {
    "text": "if one new cluster goes down they still want to be able to serve their customers so they want high availability and that's a common reason to run multiple",
    "start": "85409",
    "end": "91799"
  },
  {
    "text": "clusters another reason is to for scalability sometimes one cluster is not enough they want multiple clusters they",
    "start": "91799",
    "end": "98130"
  },
  {
    "text": "want do customers want to avoid vendor lock-in they want to have clusters on Prem on cloud different cloud providers",
    "start": "98130",
    "end": "104100"
  },
  {
    "text": "we easily be able to switch I across them they want geo proximity so they have global customers all through the",
    "start": "104100",
    "end": "110250"
  },
  {
    "text": "world like in Asia Europe us they want clusters close to these customers so they can serve them better",
    "start": "110250",
    "end": "115950"
  },
  {
    "text": "with least latency there a lot of other reasons as well but these are some of the common ones were here and like I",
    "start": "115950",
    "end": "121619"
  },
  {
    "text": "hope you connect with them once people run multiple clusters there are lot of",
    "start": "121619",
    "end": "126840"
  },
  {
    "text": "problems they run into which they don't have with single clusters for example now they want to deploy their app across",
    "start": "126840",
    "end": "133170"
  },
  {
    "start": "127000",
    "end": "224000"
  },
  {
    "text": "multiple clusters they've to ensure that they keep it in sync in all the clusters whenever they're rolling out a new version",
    "start": "133170",
    "end": "138840"
  },
  {
    "text": "they've to roll it out across all and how do you do rolling update do you do it one cluster at a time or you'd like percentage-wise you roll and all of them",
    "start": "138840",
    "end": "146250"
  },
  {
    "text": "and then gradually roll it to like 15 percent 20 percent hundred percent across all of them together or one by",
    "start": "146250",
    "end": "152580"
  },
  {
    "text": "one how do you want to do it when you're rolling it back you want to roll back across all clusters so how do you do that easily and like build tools around",
    "start": "152580",
    "end": "160080"
  },
  {
    "text": "that how do you configure network resources so this is something we'll go deeper into on this talk like how do you",
    "start": "160080",
    "end": "165120"
  },
  {
    "text": "configure your services and English so that customers are outed to your apps which I already deployed in multiple",
    "start": "165120",
    "end": "170700"
  },
  {
    "text": "clusters so how do you do that now you have multiple clusters you want unified",
    "start": "170700",
    "end": "176370"
  },
  {
    "text": "policies across all of them like you want the same namespaces similar back rules the same developers get access to",
    "start": "176370",
    "end": "181890"
  },
  {
    "text": "all those clusters you want to ensure the unified policies you want failure",
    "start": "181890",
    "end": "186959"
  },
  {
    "text": "domain isolation like I talked about high availability that's one of the main reasons so even if one cluster goes down it should not affect other cluster so",
    "start": "186959",
    "end": "193709"
  },
  {
    "text": "you want multiple clusters and you want to like roll the same version across all of them but you still want independence",
    "start": "193709",
    "end": "198930"
  },
  {
    "text": "across all of these clusters they should if there's an error in one it should not affect any other clusters each cluster",
    "start": "198930",
    "end": "204660"
  },
  {
    "text": "should be able to work independently without the other one so these are some of the common problems that people run",
    "start": "204660",
    "end": "210900"
  },
  {
    "text": "into running Multi cluster but and there are a lot of solutions we are working on it as part of segmenting cluster so but",
    "start": "210900",
    "end": "217470"
  },
  {
    "text": "in this talk we are going to focus on multi clustering this so which was the second bullet point so a lot of times",
    "start": "217470",
    "end": "225930"
  },
  {
    "start": "224000",
    "end": "317000"
  },
  {
    "text": "let people have a question of like what do you mean by Multi clustering it's like taking a step back and going to the",
    "start": "225930",
    "end": "231750"
  },
  {
    "text": "basics what we mean by multi class aliases and to explain that we'll start with what we mean by single cluster",
    "start": "231750",
    "end": "237030"
  },
  {
    "text": "ingress ingress is kubernetes abstraction of the various load balancer providers that exists so there is like",
    "start": "237030",
    "end": "242849"
  },
  {
    "text": "GCP load balancer there's on Prem load balancer there other cloud provider load balancers and in kubernetes we have our",
    "start": "242849",
    "end": "248940"
  },
  {
    "text": "abstraction called ingress so users don't need to know about what GCP load balancer is or what they're on Prem load",
    "start": "248940",
    "end": "254609"
  },
  {
    "text": "balancer is the right and in respect and their ingress controllers then which go and configure like Google cloud load",
    "start": "254609",
    "end": "261479"
  },
  {
    "text": "balancer or nginx load balancer on my load balancer they're all these ingress controllers that exist for various",
    "start": "261479",
    "end": "267630"
  },
  {
    "text": "load balancer providers so what they do is they configure whatever the the implemented implementation load balancer",
    "start": "267630",
    "end": "274680"
  },
  {
    "text": "is in the end users get an IP address which they can give to the users and users at that IP address and they're",
    "start": "274680",
    "end": "281310"
  },
  {
    "text": "able to reach a particular service so in this case like they want to reach service food so this is how they configure a single cluster load balancer",
    "start": "281310",
    "end": "289430"
  },
  {
    "text": "extending the same concept to multi cluster load balancer now they have three clusters a B and C and they are",
    "start": "289430",
    "end": "295380"
  },
  {
    "text": "the same service who deployed deployed across all three clusters and this will want to be able to write one in respect",
    "start": "295380",
    "end": "301110"
  },
  {
    "text": "and be able to configure a load balancer which gives them one single IP address which they can then go give to their",
    "start": "301110",
    "end": "306870"
  },
  {
    "text": "customers and customers can hit that IP address and be routed to any of these three clusters so this is multi",
    "start": "306870",
    "end": "314370"
  },
  {
    "text": "clustering this why people want multi class saying is there are lot of",
    "start": "314370",
    "end": "319470"
  },
  {
    "start": "317000",
    "end": "427000"
  },
  {
    "text": "advantages the most common one here is they want they want to do least latency",
    "start": "319470",
    "end": "324930"
  },
  {
    "text": "based routing so they want to have clusters where their customers are so in Europe you know all across the world and",
    "start": "324930",
    "end": "331200"
  },
  {
    "text": "they want to be able to have that single IP address which then routes customers to the closest cluster so when customers",
    "start": "331200",
    "end": "337530"
  },
  {
    "text": "from Europe hit that IP address they should be routed to euro cluster and when customers from Asia hit that IP address they should be routed to Asia",
    "start": "337530",
    "end": "343980"
  },
  {
    "text": "cluster so that is one of the very common use case we hear some other use cases I like I said they want to be",
    "start": "343980",
    "end": "349890"
  },
  {
    "text": "resilient to clusters going down so by default Europe customers should be routed to Europe cluster but if it's",
    "start": "349890",
    "end": "355320"
  },
  {
    "text": "down they should still be routed to other clusters so rather than like they're seeing photo force they should still be routed and be served and which",
    "start": "355320",
    "end": "362430"
  },
  {
    "text": "makes the application resilient to cluster is going down and now you can build global services based on this architecture you want scalability you",
    "start": "362430",
    "end": "369690"
  },
  {
    "text": "can handle a lot more requests if you have the same app deployed across multiple clusters if it was only in same",
    "start": "369690",
    "end": "374820"
  },
  {
    "text": "single cluster then you run into some scalability limits you want you might want to cannily clusters and you want to",
    "start": "374820",
    "end": "381330"
  },
  {
    "text": "can renew kubernetes release versions or you want to carry your own deployment you want to do Bluegreen deployment so",
    "start": "381330",
    "end": "386700"
  },
  {
    "text": "by keeping multi cluster ingress you have like a new kubernetes version comes up you can",
    "start": "386700",
    "end": "392280"
  },
  {
    "text": "switch 5% traffic to it and then gradually increase it to hundred percent or just try it out in your staging",
    "start": "392280",
    "end": "398400"
  },
  {
    "text": "environment and then switch and rolling back is easy so you cannon clusters using multi clustering",
    "start": "398400",
    "end": "403750"
  },
  {
    "text": "this people want a bedside ups as well people want they have their own data centers and they're moving to cloud and",
    "start": "403750",
    "end": "409810"
  },
  {
    "text": "well there are across multiple clouds so multi multi color strangers helps enable them when they deploy their app across",
    "start": "409810",
    "end": "415330"
  },
  {
    "text": "multiple cloud providers are on Prem they can still get a single IP address for all of those apps so these are some",
    "start": "415330",
    "end": "423490"
  },
  {
    "text": "of the advantages people get with multi clustering this so the problem at hand",
    "start": "423490",
    "end": "428980"
  },
  {
    "start": "427000",
    "end": "496000"
  },
  {
    "text": "is people have an ingress spec and they have a list of clusters and then how do they configure a load balancer to get",
    "start": "428980",
    "end": "435190"
  },
  {
    "text": "this single IP address that can now traffic to all the clusters and their various ways to do it one of the way we",
    "start": "435190",
    "end": "442300"
  },
  {
    "text": "do it is using this cube MC is CLI which we've open-sourced and this works today",
    "start": "442300",
    "end": "447940"
  },
  {
    "text": "so you can try it out the way it works is you run qmc I create you give it a",
    "start": "447940",
    "end": "453220"
  },
  {
    "text": "load balancer name you give it your English spec which is your standard community singular spec you give it your",
    "start": "453220",
    "end": "458230"
  },
  {
    "text": "cluster list which could be your cube conflict cube config already has a list of clusters so you can use that to give",
    "start": "458230",
    "end": "464620"
  },
  {
    "text": "lists of clusters to cube mci and what it does is it configures so today talks to Google cloud load balancer and configures Google cloud",
    "start": "464620",
    "end": "470920"
  },
  {
    "text": "load balancer for least latency mode so I talked about what are the various ways you can use multi color strangers the",
    "start": "470920",
    "end": "477670"
  },
  {
    "text": "default mode way it works is the least latency one so it says Google cloud load balancer in such a way that users from",
    "start": "477670",
    "end": "484150"
  },
  {
    "text": "like in this example for example Alice from California would be routed to u.s. cluster and Bob from Berlin would be",
    "start": "484150",
    "end": "490720"
  },
  {
    "text": "routed to euro cluster so I'm going to show a quick demo of how the CLI works",
    "start": "490720",
    "end": "499860"
  },
  {
    "start": "496000",
    "end": "695000"
  },
  {
    "text": "and I hope it works",
    "start": "499860",
    "end": "505110"
  },
  {
    "text": "so for my demo the setup I have is I have two clusters one in Asia and one in",
    "start": "506850",
    "end": "513640"
  },
  {
    "text": "Europe and this is my cube config file so I'm just listing the contacts in my cube conflict so cube conflict or MLF",
    "start": "513640",
    "end": "520570"
  },
  {
    "text": "has two contexts cluster Asia in cluster Europe and so I'm going to use this cube",
    "start": "520570",
    "end": "528160"
  },
  {
    "text": "conflict to create my ingress so cube MCI has the simple create",
    "start": "528160",
    "end": "533320"
  },
  {
    "text": "command and all I need to pass straight is I give a name here I give nuke um CIA's own",
    "start": "533320",
    "end": "538780"
  },
  {
    "text": "printer I give it my ingress spec and my cube conflicts so just those two things and if you go and configure Google cloud",
    "start": "538780",
    "end": "545350"
  },
  {
    "text": "load balancer to send traffic to these two clusters so if any of you have tried",
    "start": "545350",
    "end": "553060"
  },
  {
    "text": "configuring google cloud load balancer there's a lot of steps you have to do you have to configure and shade back-end",
    "start": "553060",
    "end": "559000"
  },
  {
    "text": "service fiber rule forwarding port so this would go and do all of that it will put in when it's done with the hell",
    "start": "559000",
    "end": "565210"
  },
  {
    "text": "check with back-end service with fiber rule and hopefully at the end it will say success if it works correctly so",
    "start": "565210",
    "end": "576550"
  },
  {
    "text": "once it's done what we'll get is we'll get a single IP address that then we can hit from all across the world and be",
    "start": "576550",
    "end": "582880"
  },
  {
    "text": "routed to different clusters based on our location so we'll see if that works it said success so I can list my",
    "start": "582880",
    "end": "592300"
  },
  {
    "text": "ingresses with queue MCI so cue MCI is a simple list command and then it lists so",
    "start": "592300",
    "end": "598780"
  },
  {
    "text": "you see we created our new ingress the new cube MCI his own printer and you see",
    "start": "598780",
    "end": "604060"
  },
  {
    "text": "it's there for this demo I'll also use this existing cube MCI is one printer it takes some time to configure the load",
    "start": "604060",
    "end": "609910"
  },
  {
    "text": "balancer and like just to save time I'll use the existing ones that I already have so I'll use the IP address of that",
    "start": "609910",
    "end": "616360"
  },
  {
    "text": "existing MCI that I have I can cube mcl says a gate status command which gives",
    "start": "616360",
    "end": "622300"
  },
  {
    "text": "you information about the IP address and what clusters is it's better so I'll use this IP address 35 - 0 1 and let's see",
    "start": "622300",
    "end": "631950"
  },
  {
    "text": "so I'm going to use this app this thing called GOP ker what it does is it hits",
    "start": "631950",
    "end": "637120"
  },
  {
    "text": "that IP address from different parts of the world I hope it works I'm using the",
    "start": "637120",
    "end": "643450"
  },
  {
    "text": "free version of this service there's some latency but hopefully it works oh it's going to hit the same IP address",
    "start": "643450",
    "end": "648880"
  },
  {
    "text": "from Singapore Brazil Virginia California and so I have two clusters Europe and Asia so you can see when I",
    "start": "648880",
    "end": "656260"
  },
  {
    "text": "hit it from Australia and California it went to the Asia cluster which was running in Tokyo when I hit the same",
    "start": "656260",
    "end": "662080"
  },
  {
    "text": "from Brazil and hopefully from Island as well it should go to Belgium cluster hopefully when it loads",
    "start": "662080",
    "end": "669839"
  },
  {
    "text": "so you can see all from all around the world users can hit the same IP address and they'll be routed to the right",
    "start": "670320",
    "end": "676390"
  },
  {
    "text": "cluster so that's the great thing we get with cube mci okay so we have this",
    "start": "676390",
    "end": "687130"
  },
  {
    "text": "working so what I want to show next is",
    "start": "687130",
    "end": "693060"
  },
  {
    "text": "like we've been able to make multi cluster english work with cube mci but it's still a separate binary that you",
    "start": "693510",
    "end": "699700"
  },
  {
    "start": "695000",
    "end": "1037000"
  },
  {
    "text": "have to install and you have to configure it to create multi cluster ingresses I think we can do a lot better",
    "start": "699700",
    "end": "706450"
  },
  {
    "text": "and that's where it cluster registry comes in and I'll invite drag to tell us about cluster legisla alright thanks the",
    "start": "706450",
    "end": "714970"
  },
  {
    "text": "hill yeah so I'm Greg Hartmann we're both on the multi cluster kubernetes team at",
    "start": "714970",
    "end": "720040"
  },
  {
    "text": "Google so I'm gonna talk about cluster registry so motivation here is when you",
    "start": "720040",
    "end": "728020"
  },
  {
    "text": "have multiple clusters you have to keep track of them and deal with a bunch of queue config files maybe have a bunch of",
    "start": "728020",
    "end": "735280"
  },
  {
    "text": "clusters in one queue config or you have a handful of queue config files then",
    "start": "735280",
    "end": "740350"
  },
  {
    "text": "let's say you add a cluster or you remove a cluster then you need to update",
    "start": "740350",
    "end": "745960"
  },
  {
    "text": "those cube config files you're working on team then you need to get those updates to your teammates and the other",
    "start": "745960",
    "end": "752800"
  },
  {
    "text": "devs so maybe you have something like it's on NFS or maybe check it into get but so there's kind of ad hoc solutions",
    "start": "752800",
    "end": "760300"
  },
  {
    "text": "right now for dealing with multiple clusters if you're more advanced then you have",
    "start": "760300",
    "end": "766750"
  },
  {
    "text": "some homegrown tooling around how you deal with clusters and their queue configs so what we're building is the",
    "start": "766750",
    "end": "773890"
  },
  {
    "text": "cluster registry it is a basically a list of clusters as well as associated",
    "start": "773890",
    "end": "780190"
  },
  {
    "text": "metadata each cluster can have labels so you can have them as test staging",
    "start": "780190",
    "end": "787270"
  },
  {
    "text": "products cetera and these lets you do standard kubernetes label selection it's",
    "start": "787270",
    "end": "793420"
  },
  {
    "text": "just part of the metadata field and because it's a standard kubernetes api",
    "start": "793420",
    "end": "798610"
  },
  {
    "text": "that means you can use the exist tooling you're used to using for workloads like an acute control and this",
    "start": "798610",
    "end": "806879"
  },
  {
    "text": "is kind of meant to be a building block that you can build other developer tools on top of so here's a yeah mph file with",
    "start": "806879",
    "end": "818660"
  },
  {
    "text": "cluster and cluster list objects you see it's basically got the name u.s. West 1a",
    "start": "818660",
    "end": "825029"
  },
  {
    "text": "it's got the endpoint it's got the certificate for the endpoint I mean you",
    "start": "825029",
    "end": "831749"
  },
  {
    "text": "see right now it's in alpha we're working on bringing up to beta in the sig multi cluster so that's happening",
    "start": "831749",
    "end": "839579"
  },
  {
    "text": "pretty soon I think so when you have a",
    "start": "839579",
    "end": "844949"
  },
  {
    "text": "cluster registry it's pretty straightforward right you have a cluster object it lets you basically crud your",
    "start": "844949",
    "end": "852689"
  },
  {
    "text": "clusters so what if we put it with a regular kubernetes api server then you",
    "start": "852689",
    "end": "860189"
  },
  {
    "text": "can have it with all your other resources you have ingressive services and all the other standard resources so",
    "start": "860189",
    "end": "867899"
  },
  {
    "text": "this lets you build more complex use cases and lets you have your cluster list side by side with the rest of your",
    "start": "867899",
    "end": "873899"
  },
  {
    "text": "abilities resources so one of the big",
    "start": "873899",
    "end": "880619"
  },
  {
    "text": "value-adds of cluster registry is running a controller with it when you",
    "start": "880619",
    "end": "885720"
  },
  {
    "text": "have a controller you could watch the list of clusters you can watch other",
    "start": "885720",
    "end": "891119"
  },
  {
    "text": "resources in that API server and you're probably going to want to watch these",
    "start": "891119",
    "end": "896909"
  },
  {
    "text": "resources in each of those listed clusters so here in this diagram we have",
    "start": "896909",
    "end": "902339"
  },
  {
    "text": "the foo controller it's watching the cluster list and foo resources and it's",
    "start": "902339",
    "end": "908729"
  },
  {
    "text": "replicating that food to subsets of clusters based on some label selector is",
    "start": "908729",
    "end": "915059"
  },
  {
    "text": "not shown here so you have replication is one good use another good use is",
    "start": "915059",
    "end": "921479"
  },
  {
    "text": "logging and monitoring type things so if you have let's say you want to scrape a",
    "start": "921479",
    "end": "927389"
  },
  {
    "text": "particular data value out of every cluster you can aggregate that in a controller and be able to report",
    "start": "927389",
    "end": "934510"
  },
  {
    "text": "that backhand sort of across all your clusters in one spot so for the rest of",
    "start": "934510",
    "end": "944020"
  },
  {
    "text": "this or will focus on the MCI controller this watches the cluster list as well as",
    "start": "944020",
    "end": "951100"
  },
  {
    "text": "the ingress resource in the Cates API server so what it does is it basically",
    "start": "951100",
    "end": "958150"
  },
  {
    "text": "ensures that all the clusters in the cluster registry are part of a load balancer so it programs the load",
    "start": "958150",
    "end": "965770"
  },
  {
    "text": "balancer API and when a cluster is added to a cluster registry the controller",
    "start": "965770",
    "end": "971980"
  },
  {
    "text": "sees this as a notification and updates the load balancer to say hey add in my new cluster to a load balancer and just",
    "start": "971980",
    "end": "980020"
  },
  {
    "text": "like that you'd get spread to the next cluster so similarly if you remove a",
    "start": "980020",
    "end": "985930"
  },
  {
    "text": "cluster the controller sees that and automatically updates the load balancer to remove that cluster you also have the",
    "start": "985930",
    "end": "993070"
  },
  {
    "text": "health checks in GCP load balancer that wouldn't notice that cluster going away",
    "start": "993070",
    "end": "998470"
  },
  {
    "text": "if it were to like just disappear yeah and the last thing is that watches",
    "start": "998470",
    "end": "1004800"
  },
  {
    "text": "ingress so if you need to upgrade your update your ingress specification then",
    "start": "1004800",
    "end": "1010710"
  },
  {
    "text": "that can also get pushed will also get pushed to each of those clusters so you",
    "start": "1010710",
    "end": "1018720"
  },
  {
    "text": "know over the CLI you know it doesn't you don't have to invoke this manually eyes just always running in the background for you so it makes it much",
    "start": "1018720",
    "end": "1025170"
  },
  {
    "text": "more automated way and much more the kubernetes style so nikhil is going to",
    "start": "1025170",
    "end": "1033240"
  },
  {
    "text": "demo the controller we've put together awesome so now we know how we can build",
    "start": "1033240",
    "end": "1039300"
  },
  {
    "start": "1037000",
    "end": "1215000"
  },
  {
    "text": "this multi cluster English controller with listeria history and let's see how we can do it so I'm going to show a demo",
    "start": "1039300",
    "end": "1045329"
  },
  {
    "text": "and before I start I'd like to thank Rohit who built this demo he works with",
    "start": "1045329",
    "end": "1050850"
  },
  {
    "text": "us at Google and thanks for building this demo hopefully it works so for this",
    "start": "1050850",
    "end": "1058650"
  },
  {
    "text": "demo the setup we have is I have a cue cuddle that is configured sorry you guys",
    "start": "1058650",
    "end": "1066360"
  },
  {
    "text": "can see this okay awesome so my cube cuddle is",
    "start": "1066360",
    "end": "1072510"
  },
  {
    "text": "configured to talk to cluster religiously the setup I have is a vocalist registry which is running an aggregated mode the second architecture",
    "start": "1072510",
    "end": "1079110"
  },
  {
    "text": "that Drake showed so now using the same API endpoint I can list clusters as well and I can try normal kubernetes api",
    "start": "1079110",
    "end": "1085770"
  },
  {
    "text": "resources as well so in this case I would try ingress so first I listed my clusters I have three",
    "start": "1085770",
    "end": "1091080"
  },
  {
    "text": "clusters one in Asia one in Europe one in us at global presence I'm using GK and so I will then create an ingress so",
    "start": "1091080",
    "end": "1100860"
  },
  {
    "text": "just to show what my ingress looks like this is standard kubernetes even if you",
    "start": "1100860",
    "end": "1106110"
  },
  {
    "text": "were doing a single cluster ingress this is how it look like you give it an IP address you give the service that you",
    "start": "1106110",
    "end": "1111540"
  },
  {
    "text": "want to expose so in this case I'm exposing these zone printer service so it's the same example I used in the",
    "start": "1111540",
    "end": "1118200"
  },
  {
    "text": "earlier example what this is own printer app does is it just been steal location when it's being served from so when when",
    "start": "1118200",
    "end": "1125010"
  },
  {
    "text": "I hit my IP address the request goes to one particular cluster and as a response I get the location of that cluster that",
    "start": "1125010",
    "end": "1130560"
  },
  {
    "text": "that service that that request go to Asia you know us which cluster did it go to so we'll be able to verify that it's",
    "start": "1130560",
    "end": "1137520"
  },
  {
    "text": "working correctly so this is my English and as Greg mentioned like one of the advantage of running this controller as",
    "start": "1137520",
    "end": "1145500"
  },
  {
    "text": "cluster registers that I now don't need to download a different QM CI binary and it I can just use standard cube",
    "start": "1145500",
    "end": "1151980"
  },
  {
    "text": "kubernetes concept so I can just run cube cuddle create ingress and the multi",
    "start": "1151980",
    "end": "1157860"
  },
  {
    "text": "clustering risk controller that is running that is watching this cluster industry fault list of clusters and list",
    "start": "1157860",
    "end": "1162870"
  },
  {
    "text": "of ingesys so it will see or there's this ingress that has come up and I have three clusters so I should then go and",
    "start": "1162870",
    "end": "1168270"
  },
  {
    "text": "configure Google cloud load balancer to send traffic to all these three clusters so once the ingress is created and",
    "start": "1168270",
    "end": "1175860"
  },
  {
    "text": "Google Cloud load balancer is configured we'll be able to hit that IP address from different locations and be able to",
    "start": "1175860",
    "end": "1182430"
  },
  {
    "text": "see that we are routed correctly so once I've created ingress I can list",
    "start": "1182430",
    "end": "1188850"
  },
  {
    "text": "the angles to make sure it's created and I'm using standard cube code will create",
    "start": "1188850",
    "end": "1194450"
  },
  {
    "text": "commands so again you'll see this new demos own printer angles that I just",
    "start": "1194450",
    "end": "1200280"
  },
  {
    "text": "created but I also in existing zone printer which I'll use for this demo so this is the IP address",
    "start": "1200280",
    "end": "1206330"
  },
  {
    "text": "35 2 0 1 67 42 that I'll use and what I'll do is so here I have two instances",
    "start": "1206330",
    "end": "1217320"
  },
  {
    "text": "GC instances one in US and one in Europe what I'm going to do is I will call that IP address from US and Europe and make",
    "start": "1217320",
    "end": "1224760"
  },
  {
    "text": "sure that I'm sent to the right cluster so let's say I call it from Europe and",
    "start": "1224760",
    "end": "1231450"
  },
  {
    "text": "here my request is being served from neitherlands where my Europe cluster is and similarly if I call the same IP address from us",
    "start": "1231450",
    "end": "1239340"
  },
  {
    "text": "it's being served from Iowa where my u.s. cluster is so this is the same setup as we saw before like now at the",
    "start": "1239340",
    "end": "1246000"
  },
  {
    "text": "single IP address that I can head from all over the globe and I'll be routed to the same IP address",
    "start": "1246000",
    "end": "1251520"
  },
  {
    "text": "but controller has some more advantages as well and we want to show you those once I have this set up working the",
    "start": "1251520",
    "end": "1259110"
  },
  {
    "text": "advantage is that it's always watching the list of clusters and ingress and whatever changes I make it will be able",
    "start": "1259110",
    "end": "1265560"
  },
  {
    "text": "to observe that and update GCL be as per those specifications so let's say what",
    "start": "1265560",
    "end": "1270630"
  },
  {
    "text": "if I want to delete a cluster or like I delete the app in that cluster so in this case let's say delete the US",
    "start": "1270630",
    "end": "1277920"
  },
  {
    "text": "cluster so unless my clusters I have those three clusters I'll delete the US",
    "start": "1277920",
    "end": "1283590"
  },
  {
    "text": "cluster so what happens is that the multi-class alias controller that is",
    "start": "1283590",
    "end": "1288630"
  },
  {
    "text": "running observes that oh that this cluster is now deleted and I need to update the GCL B that was configured to",
    "start": "1288630",
    "end": "1294930"
  },
  {
    "text": "send traffic to three clusters it should now send it only to two clusters like I am running this cube cut' will get",
    "start": "1294930",
    "end": "1300240"
  },
  {
    "text": "clusters command the controller is also always running that command and watching that now there's only two clusters so",
    "start": "1300240",
    "end": "1306630"
  },
  {
    "text": "what should eventually happen is this curl command that we were running that was the request was being sent to Iowa",
    "start": "1306630",
    "end": "1312750"
  },
  {
    "text": "we will see that it starts detecting that that cluster is down and now my request would be routed to other",
    "start": "1312750",
    "end": "1317820"
  },
  {
    "text": "clusters and you can see how seamless this was like as a application developer or anyone who was maintaining the cygnus",
    "start": "1317820",
    "end": "1324600"
  },
  {
    "text": "they didn't have to make any change like whenever the cluster list was changed the controller automatically observed it",
    "start": "1324600",
    "end": "1330180"
  },
  {
    "text": "update that GCL B and to my customers it was all seamless like they didn't see for like us",
    "start": "1330180",
    "end": "1335250"
  },
  {
    "text": "Lester was down but they didn't get to see that a cluster is down or they didn't get any photo for their request was still served and now they're being",
    "start": "1335250",
    "end": "1342090"
  },
  {
    "text": "served from neitherlands in Tokyo and eventually it will settle down to once all the BG be routed I the propagation",
    "start": "1342090",
    "end": "1348150"
  },
  {
    "text": "is done they'll all be served from neitherlands so like this is amazing why cuz much didn't even get to see that the",
    "start": "1348150",
    "end": "1354330"
  },
  {
    "text": "cluster is down and I didn't have to do anything it was all automatic it figured out and updated it to send traffic to",
    "start": "1354330",
    "end": "1360450"
  },
  {
    "text": "other clusters and this was for deleting clusters and same thing now you figure",
    "start": "1360450",
    "end": "1365580"
  },
  {
    "text": "out the problem you debugged it and you want to again add back the u.s. cluster",
    "start": "1365580",
    "end": "1370980"
  },
  {
    "text": "and the same thing votes for adding back as well you add new cluster or you clear",
    "start": "1370980",
    "end": "1377760"
  },
  {
    "text": "the you in this case we'll create the US cluster again so we list we have two clusters I will create my US Lister",
    "start": "1377760",
    "end": "1384600"
  },
  {
    "text": "again and now if I list I get three",
    "start": "1384600",
    "end": "1390240"
  },
  {
    "text": "clusters similarly when the controller lists it really clusters and if I if I",
    "start": "1390240",
    "end": "1395700"
  },
  {
    "text": "go to my US instance it will eventually start serving traffic from u.s. Lister",
    "start": "1395700",
    "end": "1401070"
  },
  {
    "text": "so when you observe it takes a while when we deleted a cluster it was instantly it starts started sending",
    "start": "1401070",
    "end": "1407880"
  },
  {
    "text": "traffic to other clusters because like that cluster was gone when a new cluster comes up it still takes time to it make",
    "start": "1407880",
    "end": "1413490"
  },
  {
    "text": "sure they held checks passes for sufficient time and then it verifies that it's stable and then it starts",
    "start": "1413490",
    "end": "1418710"
  },
  {
    "text": "sending traffic to the new cluster now",
    "start": "1418710",
    "end": "1425370"
  },
  {
    "text": "this is not managing the twisters this just manages the ingress and GCL B so that DC will stop sending traffic to",
    "start": "1425370",
    "end": "1430740"
  },
  {
    "text": "that cluster yeah so I just deleted cluster from the cluster list like that cluster still exists if I go to GK and",
    "start": "1430740",
    "end": "1437580"
  },
  {
    "text": "list my clusters it exists but I removed it from cluster registry so that my ingress controller is watching cluster",
    "start": "1437580",
    "end": "1443490"
  },
  {
    "text": "listing cluster history it doesn't get that so you'll see eventually it started",
    "start": "1443490",
    "end": "1448830"
  },
  {
    "text": "sending traffic again to Iowa back so as and as an application developer I didn't have to do I didn't have to update my",
    "start": "1448830",
    "end": "1454980"
  },
  {
    "text": "English spec or anything it automatically happens so like this is the real power",
    "start": "1454980",
    "end": "1461240"
  },
  {
    "text": "no so the annotation was just to give it an IP address so it needs an IP address",
    "start": "1471850",
    "end": "1477110"
  },
  {
    "text": "to be able to send traffic to all clusters and in the standard English spec it's specified as an annotation so",
    "start": "1477110",
    "end": "1483110"
  },
  {
    "text": "that's why I was using an annotation but there's no special annotation to tell that it's a global English like I",
    "start": "1483110",
    "end": "1488749"
  },
  {
    "text": "created it in my cluster registry and so many declare strangers is watching all India's interest and it assumes that all",
    "start": "1488749",
    "end": "1495139"
  },
  {
    "text": "ingresses that I created in class three have to be spayed to all the clusters that I registered with lister registry",
    "start": "1495139",
    "end": "1500720"
  },
  {
    "text": "if you wanted like a single genghis then you directly just create in that cluster and that works as well now this is just",
    "start": "1500720",
    "end": "1512149"
  },
  {
    "text": "a prototype early version that we built for this demo Rohit did yeah",
    "start": "1512149",
    "end": "1521799"
  },
  {
    "text": "now it does that GCL be supports by default that it held checks the apps",
    "start": "1524350",
    "end": "1529820"
  },
  {
    "text": "directly and if and if a pod goes down or anything the service goes down then it will stop sending traffic to them is",
    "start": "1529820",
    "end": "1538400"
  },
  {
    "text": "there one GL beeper so you configure GCL B there's an IP address by like load",
    "start": "1538400",
    "end": "1545630"
  },
  {
    "text": "balancer and you configure like forwarding rule five our back-end service all the GLB resources that you",
    "start": "1545630",
    "end": "1550940"
  },
  {
    "text": "need to configure yeah we are actually",
    "start": "1550940",
    "end": "1559640"
  },
  {
    "start": "1558000",
    "end": "1678000"
  },
  {
    "text": "done with the demo and it's time for Q&A so yeah so yeah so it says the clusters",
    "start": "1559640",
    "end": "1574550"
  },
  {
    "text": "that I'm running those are like standard GK clusters that already have English controllers running and but I do have a",
    "start": "1574550",
    "end": "1579770"
  },
  {
    "text": "multi-class trading desk controller also running in cluster registry which is what configures G CL v it's yeah it's",
    "start": "1579770",
    "end": "1590690"
  },
  {
    "text": "running bedless registry so like I have a place where I'm running my clusters you see I'm running this molecular",
    "start": "1590690",
    "end": "1596180"
  },
  {
    "text": "singles controller there as well and multi-class saying as control of watch's cluster registry for a list of clusters",
    "start": "1596180",
    "end": "1601430"
  },
  {
    "text": "and list of English's so for this demo",
    "start": "1601430",
    "end": "1606890"
  },
  {
    "text": "it's just like running but if yeah if you want to run it on a production service yes you then it has a che you",
    "start": "1606890",
    "end": "1612890"
  },
  {
    "text": "can run it on a communities cluster or you can a virtual set ups yes and you",
    "start": "1612890",
    "end": "1618170"
  },
  {
    "text": "should have so this particular demo",
    "start": "1618170",
    "end": "1626090"
  },
  {
    "text": "configures Google cloud load balancer yes we can write an implementation that instead configures engine X to do the",
    "start": "1626090",
    "end": "1633410"
  },
  {
    "text": "same thing yeah",
    "start": "1633410",
    "end": "1636160"
  },
  {
    "text": "[Music] in one of previous talks there was idea",
    "start": "1638950",
    "end": "1644470"
  },
  {
    "text": "to that this cluster Registry together with some controllers will be like a",
    "start": "1644470",
    "end": "1649900"
  },
  {
    "text": "replacement for clustered Federation because it doesn't have some security stuff but what I see here is more it's",
    "start": "1649900",
    "end": "1657310"
  },
  {
    "text": "more like just a copy of the same resource in different clusters so you cannot really schedule like 50 90",
    "start": "1657310",
    "end": "1663700"
  },
  {
    "text": "percent on one cluster and 30 percent so is is there a Silla plan to do it",
    "start": "1663700",
    "end": "1670150"
  },
  {
    "text": "replacement or maybe more advanced controllers are needed or this multi cluster primitives are needed per every",
    "start": "1670150",
    "end": "1677100"
  },
  {
    "text": "what's your yeah so that's a great question and we from a lot of customers that they want like more advanced load",
    "start": "1677100",
    "end": "1683290"
  },
  {
    "start": "1678000",
    "end": "1716000"
  },
  {
    "text": "balancing words like in this case there was just this where you send to all the clusters and you do like least latency",
    "start": "1683290",
    "end": "1688630"
  },
  {
    "text": "with load balancing good there are other load balancing modes like you said so and yes the API spec today does not",
    "start": "1688630",
    "end": "1694450"
  },
  {
    "text": "support it so it's not possible for the user to specify it but we are discussing with sig net work and the interest rate",
    "start": "1694450",
    "end": "1701410"
  },
  {
    "text": "and there's discussion happening in signal to cluster as well about how to extend the API to be able to support more advanced use cases so you could use",
    "start": "1701410",
    "end": "1717340"
  },
  {
    "start": "1716000",
    "end": "1750000"
  },
  {
    "text": "it like like like water lynching we want to build cluster as you see as a building block that you can integrate with others as well and other tools that",
    "start": "1717340",
    "end": "1724450"
  },
  {
    "text": "you have like maybe you integrated with your CI CD pipeline and you just want a list of clusters or you want some other",
    "start": "1724450",
    "end": "1730420"
  },
  {
    "text": "resources so it has like a CID as well so you can install a CID and do your own custom like multi cluster specific",
    "start": "1730420",
    "end": "1736570"
  },
  {
    "text": "resources as well so you could do that so it is flexible enough to be able to do all of that stuff yes for this demo",
    "start": "1736570",
    "end": "1742210"
  },
  {
    "text": "we were just using the existing kubernetes api hi great demo but i have",
    "start": "1742210",
    "end": "1752200"
  },
  {
    "start": "1750000",
    "end": "1827000"
  },
  {
    "text": "a question related to the cluster registry how does it help let's say the",
    "start": "1752200",
    "end": "1757290"
  },
  {
    "text": "process running in one cluster in cluster mode to access API object in the",
    "start": "1757290",
    "end": "1764020"
  },
  {
    "text": "second cluster like in terms of the security in like for this particular use",
    "start": "1764020",
    "end": "1770050"
  },
  {
    "text": "case and in this demo we didn't have that requirement and it's not but is it possible does it help does it",
    "start": "1770050",
    "end": "1776650"
  },
  {
    "text": "provide any mechanism or some some tools No so another thing about Lester ageist is",
    "start": "1776650",
    "end": "1783460"
  },
  {
    "text": "that it doesn't store the author information about each cluster it stores the list of clusters and it has pointers",
    "start": "1783460",
    "end": "1789070"
  },
  {
    "text": "to be able to point you to the right like credential store like it will tell you it's a GK cluster and then you can run g-cloud get credentials to be able",
    "start": "1789070",
    "end": "1795760"
  },
  {
    "text": "to get credentials but then for a controller basically to watch for objects and different clusters I mean",
    "start": "1795760",
    "end": "1801640"
  },
  {
    "text": "you have to have our buck rules and the service accounts no it's how it's done if you have a multiple clusters yeah so",
    "start": "1801640",
    "end": "1809140"
  },
  {
    "text": "in this case the multi ingress controller that's running does have access to all the clusters so it has",
    "start": "1809140",
    "end": "1814480"
  },
  {
    "text": "service accounts for those clusters okay but each of those clusters don't have service account for like other clusters",
    "start": "1814480",
    "end": "1821730"
  },
  {
    "text": "it's already open source so it's on so we should also yeah it's part of",
    "start": "1826980",
    "end": "1833950"
  },
  {
    "start": "1827000",
    "end": "2017000"
  },
  {
    "text": "kubernetes slash cluster registry and you can go and try it out today and the API is alpha we want to move it to beta",
    "start": "1833950",
    "end": "1841890"
  },
  {
    "text": "so these are some of the pointers you can go look at it and it's outside k slash scale so it's not tied to one",
    "start": "1841890",
    "end": "1847630"
  },
  {
    "text": "kubernetes you have to populate the",
    "start": "1847630",
    "end": "1855520"
  },
  {
    "text": "registry manually with all my clusters so is there something like a cozy place to based all the population or self",
    "start": "1855520",
    "end": "1862350"
  },
  {
    "text": "discovery of so it's a standard kubernetes api you can use q cuddle and",
    "start": "1862350",
    "end": "1867700"
  },
  {
    "text": "that's what we were using in this demo but it has like an arrest API so you can write wrappers on top probably like",
    "start": "1867700",
    "end": "1873160"
  },
  {
    "text": "export your coupon figure into this cluster assist you automatically so it has the kubernetes api so that's the",
    "start": "1873160",
    "end": "1878410"
  },
  {
    "text": "advantage you can build all these tools on it there's none right now but it's easy to build them regarding the bouncer is it",
    "start": "1878410",
    "end": "1892390"
  },
  {
    "text": "actually rooting for the traffic or is it ready directing I mean is it any benefit in terms of network latency that",
    "start": "1892390",
    "end": "1899620"
  },
  {
    "text": "you let's say directo the asia customers to the asia Questor if they all go through",
    "start": "1899620",
    "end": "1905960"
  },
  {
    "text": "the wall bouncer anyway they would get rooted let's say to the US for every",
    "start": "1905960",
    "end": "1911480"
  },
  {
    "text": "request yeah so that's the advantage we get with Google cloud like it has worldwide presence and what it uses is",
    "start": "1911480",
    "end": "1917210"
  },
  {
    "text": "in any cast IP which is like propagated to true BGP routing to everywhere so like Asia customers are not actually",
    "start": "1917210",
    "end": "1923360"
  },
  {
    "text": "coming to us like they directly go to a checklist as via BGP routing that IP address is out it is propagated to Asia",
    "start": "1923360",
    "end": "1929780"
  },
  {
    "text": "and Europe NUS that same IP address that's the advantage you get with GCP Network yeah awesome are there any other",
    "start": "1929780",
    "end": "1940130"
  },
  {
    "text": "questions do you have any thoughts on",
    "start": "1940130",
    "end": "1945560"
  },
  {
    "text": "policy-based routing say I don't know like a European user of a service who",
    "start": "1945560",
    "end": "1951260"
  },
  {
    "text": "goes overseas say to America and their data is located within Europe can't be",
    "start": "1951260",
    "end": "1956540"
  },
  {
    "text": "exported to an American cluster so their traffic always gets routed back to Europe yeah how would this be a thing",
    "start": "1956540",
    "end": "1964550"
  },
  {
    "text": "that you would solve it this level or would you push that into the application yeah I I don't have a particular opinion",
    "start": "1964550",
    "end": "1973670"
  },
  {
    "text": "about that because like once it comes to legal issues like this does try close least latency but there's no guarantee",
    "start": "1973670",
    "end": "1980150"
  },
  {
    "text": "and if you have a legal issue that that user shouldn't be routed out of Europe at all and even if they go to us like",
    "start": "1980150",
    "end": "1985220"
  },
  {
    "text": "they should still be routed to Europe there's still some more logic that's required to build on top of this it is",
    "start": "1985220",
    "end": "1990920"
  },
  {
    "text": "possible to do it in your application as well I would say I would say it take a lot of smarts from the load balancer to",
    "start": "1990920",
    "end": "1996230"
  },
  {
    "text": "be able to do that because you'd have to have some sort of key or hash from the user to know where to route it to so",
    "start": "1996230",
    "end": "2002530"
  },
  {
    "text": "that would take a lot of technology I think to do you see I'll be dust about",
    "start": "2002530",
    "end": "2008140"
  },
  {
    "text": "cookie waste outing so that is something you could explode",
    "start": "2008140",
    "end": "2013170"
  },
  {
    "text": "[Applause]",
    "start": "2013340",
    "end": "2019789"
  }
]