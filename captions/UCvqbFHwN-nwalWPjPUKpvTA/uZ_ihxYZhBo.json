[
  {
    "text": "lady here we are alright so welcome everyone how was lunch",
    "start": "0",
    "end": "5670"
  },
  {
    "text": "good alright good Aloha everyone microphone thank you I",
    "start": "5670",
    "end": "16049"
  },
  {
    "text": "just got married and so I was just on my honeymoon so welcome everyone to my",
    "start": "16049",
    "end": "21119"
  },
  {
    "text": "thank you to my post honeymoon slideshow",
    "start": "21119",
    "end": "26720"
  },
  {
    "text": "I'm getting we're gonna talk today about securing helm 3 and what that means so a",
    "start": "26720",
    "end": "32460"
  },
  {
    "text": "little bit about myself here I'm Matt Fisher I'm a helm core maintainer I'm software engineer at",
    "start": "32460",
    "end": "38309"
  },
  {
    "text": "Microsoft I've been working on helm now I think three years don't quote me on",
    "start": "38309",
    "end": "43620"
  },
  {
    "text": "that I think it's more like to actually as emotionally but I'm bacon gobbler on Twitter github slack anywhere you can",
    "start": "43620",
    "end": "49920"
  },
  {
    "text": "really find me on social media so the agenda for this talk I'm gonna talk",
    "start": "49920",
    "end": "54960"
  },
  {
    "text": "about a very very quick brief overview of helm to security and how it relates",
    "start": "54960",
    "end": "60210"
  },
  {
    "text": "this talk then I'm gonna talk and how it relates to helm three we're gonna talk about user management in kubernetes just",
    "start": "60210",
    "end": "66570"
  },
  {
    "text": "a very basic how that works and then role based access control and a little",
    "start": "66570",
    "end": "72000"
  },
  {
    "text": "bit of a demo so the format for this is that I'm just gonna fly through the slides as quickly as possible to get to",
    "start": "72000",
    "end": "77070"
  },
  {
    "text": "the demo because that's really gonna be the good meat of content I think here so",
    "start": "77070",
    "end": "82560"
  },
  {
    "text": "how many people think there are a little bit of a kubernetes security expert and they play with like open policy agent",
    "start": "82560",
    "end": "88380"
  },
  {
    "text": "they work with network policies pause security policies auditing all these things that are up on here this is",
    "start": "88380",
    "end": "94560"
  },
  {
    "text": "basically when you're talking about securing helm this is a lot of the things that you're trying to talk about",
    "start": "94560",
    "end": "100680"
  },
  {
    "text": "and I wish I was there for Paul's talk actually on hacking helm but these are a",
    "start": "100680",
    "end": "105990"
  },
  {
    "text": "lot of those concepts that you can talk about so tiller chart provenance user management cert management role based",
    "start": "105990",
    "end": "112770"
  },
  {
    "text": "access control so locky gave a talk at last helm summit and I absolutely love",
    "start": "112770",
    "end": "118710"
  },
  {
    "text": "this quote so I had to bring it up again the only truly secure system is one that",
    "start": "118710",
    "end": "124170"
  },
  {
    "text": "is powered off cast in a block of concrete and secured in a lead-lined room with armed guards this is a quote",
    "start": "124170",
    "end": "130229"
  },
  {
    "text": "by Gene Spafford and it's personally my favorite quote so I just had to add that on there",
    "start": "130229",
    "end": "135840"
  },
  {
    "text": "so I'm not going to go into too much overview or any overview of like helm to security with tiller and everything else",
    "start": "135840",
    "end": "141750"
  },
  {
    "text": "Lockey did a fantastic talk an overview of that at helm summit north america so",
    "start": "141750",
    "end": "147599"
  },
  {
    "text": "if you want to that cue a coat or a QR code over there you can take a picture of it and that will take you right to",
    "start": "147599",
    "end": "153930"
  },
  {
    "text": "the YouTube talk what we're going to talk about today is helm three security",
    "start": "153930",
    "end": "159659"
  },
  {
    "text": "so this is the exact same slide that we were talking about before notice that",
    "start": "159659",
    "end": "164760"
  },
  {
    "text": "only two things have been crossed off the list when we're talking about helm 3 tiller the certification management and",
    "start": "164760",
    "end": "171659"
  },
  {
    "text": "role based access control management in terms of tillers role based access control however we still have a lot to",
    "start": "171659",
    "end": "178230"
  },
  {
    "text": "cover we're only gonna cover 3 today because there's so much to cover on everything else but we'll get there and",
    "start": "178230",
    "end": "185879"
  },
  {
    "text": "then hopefully we can give an ab depth guide with those things so in a nutshell when we're talking about helm 3 we're",
    "start": "185879",
    "end": "192480"
  },
  {
    "text": "talking about the CLI tool that so in helm 3 is just a CLI tool that interacts",
    "start": "192480",
    "end": "198180"
  },
  {
    "text": "with the kubernetes cluster with helm - it was helm 3 talkin over G RPC to talk to tiller 3.00 beta 3 is what we're",
    "start": "198180",
    "end": "206730"
  },
  {
    "text": "using in this demo that's the current preview release that was released last week so that's what we're gonna be showing off and then again yeah tiller",
    "start": "206730",
    "end": "213510"
  },
  {
    "text": "was removed as a component the business logic however is now all part of this helm CLI the only thing is that we're",
    "start": "213510",
    "end": "219030"
  },
  {
    "text": "just removing the G RPC protocol and all that kind of fun stuff from home to the thing that is very parallel to this",
    "start": "219030",
    "end": "226560"
  },
  {
    "text": "demonstration is actually coops ETL they share the exact same security models in terms of how you access a resource how",
    "start": "226560",
    "end": "232470"
  },
  {
    "text": "you deploy a resource if your user account that you set up for your kubernetes context does not have the",
    "start": "232470",
    "end": "238769"
  },
  {
    "text": "correct permissions it won't be able to deploy in certain namespaces so we'll show that in a bit and this is a",
    "start": "238769",
    "end": "244919"
  },
  {
    "text": "community effort this is just one part of the security story there's also like I said the network policies there's a",
    "start": "244919",
    "end": "250199"
  },
  {
    "text": "pause security policies that a lot of people are talking about doing linting and chart testing and all that kind of",
    "start": "250199",
    "end": "256199"
  },
  {
    "text": "fun stuff so this is a community effort there's so many facets of this so we're only gonna leave a few basic scenarios",
    "start": "256199",
    "end": "262289"
  },
  {
    "text": "we're gonna leave the rest is homework for the reader so user management",
    "start": "262289",
    "end": "267389"
  },
  {
    "text": "many people have played with kubernetes management more so than just the first default user that's created in kubernetes that's nice there's a fair",
    "start": "267389",
    "end": "275639"
  },
  {
    "text": "few of you so there is a concept in kubernetes it's called service accounts",
    "start": "275639",
    "end": "280800"
  },
  {
    "text": "and user accounts for those that don't know service accounts are the things that are managed through the API that's",
    "start": "280800",
    "end": "286590"
  },
  {
    "text": "basically like a client API you use that when you're interacting with the kubernetes api and that's kind of like a",
    "start": "286590",
    "end": "292409"
  },
  {
    "text": "machine it's used to represent applications communicating with the IP i either internally or externally user",
    "start": "292409",
    "end": "300120"
  },
  {
    "text": "accounts however which is the part that you're using to represent a human interacting with a kubernetes api is not",
    "start": "300120",
    "end": "306150"
  },
  {
    "text": "a cluster resource it's not something you do a KU CTL create user that's something that I have to do at the",
    "start": "306150",
    "end": "312210"
  },
  {
    "text": "controller side user accounts can be configured through the API server and they're managed externally depending on",
    "start": "312210",
    "end": "318810"
  },
  {
    "text": "whatever way you've set it up with TLS certificates bearer tokens username or basic username passwords and open ID",
    "start": "318810",
    "end": "325379"
  },
  {
    "text": "Connect tokens we're in this demonstration we're only gonna show one scenario which is just using TLS",
    "start": "325379",
    "end": "332039"
  },
  {
    "text": "certificates so how that process works when you're creating a brand-new user in the kubernetes is you first generate a",
    "start": "332039",
    "end": "338669"
  },
  {
    "text": "private key to identify that as the user you generate then a certificate sign request to say that I want to sign as or",
    "start": "338669",
    "end": "346529"
  },
  {
    "text": "I want to authenticate myself as this user against this cluster then using the",
    "start": "346529",
    "end": "352080"
  },
  {
    "text": "kubernetes clusters certificate authority you sign that certificate sign request and that gives you a public key",
    "start": "352080",
    "end": "358259"
  },
  {
    "text": "that's what you use with the kubernetes cluster to say i am acting as behalf of him or her then you create now you're",
    "start": "358259",
    "end": "367439"
  },
  {
    "text": "actually getting into the role based access control stuff so you create role bindings for the new user when you're",
    "start": "367439",
    "end": "372750"
  },
  {
    "text": "the first user created on kubernetes you are given cluster admin access so you can create these role bindings and",
    "start": "372750",
    "end": "378210"
  },
  {
    "text": "whatnot for the first user so you have to be a cluster admin and then you just add these public private keys to your",
    "start": "378210",
    "end": "384509"
  },
  {
    "text": "kubernetes config locally and you create a new context for your account so that's how you wanna kate against a cluster now",
    "start": "384509",
    "end": "391649"
  },
  {
    "text": "we're actually getting into the role based access control part of it which is this is how you are given these or",
    "start": "391649",
    "end": "398669"
  },
  {
    "text": "granted these roles to be able to deploy into a namespace given read-only access to certain namespaces or not and by default when",
    "start": "398669",
    "end": "406740"
  },
  {
    "text": "you create a brand new user in kubernetes you were given no authentication whatsoever the only the",
    "start": "406740",
    "end": "411900"
  },
  {
    "text": "first user has cluster admin access and then it's up to the cluster admin to make those roles and then for helm 3 how",
    "start": "411900",
    "end": "419970"
  },
  {
    "text": "this relates to us is that when we're auditing against a kubernetes cluster does anyone work with the - cube context",
    "start": "419970",
    "end": "426930"
  },
  {
    "text": "flag before ok yeah a few of you so that's that's the flag that you can use",
    "start": "426930",
    "end": "433169"
  },
  {
    "text": "to switch on the fly and your kubernetes config to say that i want to authenticate as this user in my",
    "start": "433169",
    "end": "438180"
  },
  {
    "text": "kubernetes config or you could do a coop CTL config set context so that you can",
    "start": "438180",
    "end": "444330"
  },
  {
    "text": "change your default user when you're authenticating but that's how it works in there so when first creating a new",
    "start": "444330",
    "end": "451470"
  },
  {
    "text": "user there are a lot of information out there on the internet about telling you to create the following cluster role",
    "start": "451470",
    "end": "457950"
  },
  {
    "text": "binding which is to give you cluster admin access and play around with that this is basically equivalent of saying",
    "start": "457950",
    "end": "464699"
  },
  {
    "text": "that all your base are belong to us from this point forward this is not a good security policy going forward",
    "start": "464699",
    "end": "471530"
  },
  {
    "text": "so let's actually dive into what are some of the other ones that could be usable for whatever sonar you and you",
    "start": "471530",
    "end": "477720"
  },
  {
    "text": "need there's cluster admin which I mentioned that's the godmode the first user created has this mode there's by default",
    "start": "477720",
    "end": "484889"
  },
  {
    "text": "as well there's an admin role base or binding that gives you readwrite access",
    "start": "484889",
    "end": "490770"
  },
  {
    "text": "to most of the resources into a namespace including roles and role bindings but it does not allow you write",
    "start": "490770",
    "end": "497039"
  },
  {
    "text": "access to the resource quotas in that namespace or to the namespace itself so if you give someone admin access they",
    "start": "497039",
    "end": "503580"
  },
  {
    "text": "can't actually delete that namespace if you grant them edit access its basic",
    "start": "503580",
    "end": "509849"
  },
  {
    "text": "readwrite access to most resources in a namespace it's a little bit more restricted than admin so you can't do",
    "start": "509849",
    "end": "515490"
  },
  {
    "text": "other things I think it's you can't see the roles and role bindings is the other part so there's that and then there's",
    "start": "515490",
    "end": "522300"
  },
  {
    "text": "view access and this one's a little bit tricky we'll get into it a second but it gives you read-only access to most",
    "start": "522300",
    "end": "527610"
  },
  {
    "text": "resources in a namespace but and it does not give you access to roles role bindings or secrets so you'll know",
    "start": "527610",
    "end": "535290"
  },
  {
    "text": "that in something in home 3 we use storage or secrets as storage so we'll have to work with that in a moment but",
    "start": "535290",
    "end": "541350"
  },
  {
    "text": "we'll cover two basic use cases in this demonstration we'll give read-only access which is helm list helm status in",
    "start": "541350",
    "end": "547259"
  },
  {
    "text": "film history so you can take a look at what the status of a deployment in another name space is like the other",
    "start": "547259",
    "end": "553319"
  },
  {
    "text": "name or the other basic use cases readwrite access so if you want to give a user be able to do a helm install an",
    "start": "553319",
    "end": "559889"
  },
  {
    "text": "upgrade a rollback a delete or an uninstall quick sidenote about the view",
    "start": "559889",
    "end": "566519"
  },
  {
    "text": "cluster role as I mentioned before it's a little tiny up there but it says it allows me to only access to see most",
    "start": "566519",
    "end": "573000"
  },
  {
    "text": "objects in a namespace it does not allow viewing roles or role bindings and it does not allow viewing secrets since",
    "start": "573000",
    "end": "579060"
  },
  {
    "text": "those are escalating not actually quite sure what it means by its escalating but I'll figure that out sometimes that's",
    "start": "579060",
    "end": "585540"
  },
  {
    "text": "homework left for the reader helm actually stores the released metadata as",
    "start": "585540",
    "end": "590790"
  },
  {
    "text": "secrets so in order for us to gain read-only access to say helm lists we",
    "start": "590790",
    "end": "596069"
  },
  {
    "text": "need to see that release metadata so we'll need to create a special cluster role that's similar to the view only role but for secrets so there's this one",
    "start": "596069",
    "end": "604529"
  },
  {
    "text": "it's actually in the kubernetes documentation if you want to create a secret Reader cluster role and what this",
    "start": "604529",
    "end": "610410"
  },
  {
    "text": "does is it gives you API groups nothing there it just gives you access to the",
    "start": "610410",
    "end": "615420"
  },
  {
    "text": "resources of Secrets it lets you to get watch and lists or the API endpoints for",
    "start": "615420",
    "end": "621000"
  },
  {
    "text": "that so if you do coop CTL create dash F with that cluster role secret Reader you're all good to go and then a last",
    "start": "621000",
    "end": "629459"
  },
  {
    "text": "thing I also want to add on here about the Edit cluster role if your charts",
    "start": "629459",
    "end": "634620"
  },
  {
    "text": "that you're depending on they create roles or role bindings in the actual chart the Edit cluster role does not",
    "start": "634620",
    "end": "642089"
  },
  {
    "text": "give you access to create those roles and role bindings so you need actually the admin cluster role instead something",
    "start": "642089",
    "end": "649110"
  },
  {
    "text": "quickly nope and if your charts manage cluster wide resources custom resource definitions those are cluster resources",
    "start": "649110",
    "end": "656370"
  },
  {
    "text": "which means you will need cluster admin access and again refer back to the first image",
    "start": "656370",
    "end": "663110"
  },
  {
    "text": "so now let's actually look at some practical examples here before we go into the demo so if you're giving a",
    "start": "663590",
    "end": "670070"
  },
  {
    "text": "read-only access for a user against a particular namespace you're gonna need in helm these two different roles which",
    "start": "670070",
    "end": "677960"
  },
  {
    "text": "is a view cluster role and then a secret Reader cluster role with that API that",
    "start": "677960",
    "end": "683000"
  },
  {
    "text": "we created before read-only access for a user clustered wide I'll quickly go through these and then I'll show them in",
    "start": "683000",
    "end": "688790"
  },
  {
    "text": "the actual demo but we've got the read-only access for a user cluster wide this is important for when you want to",
    "start": "688790",
    "end": "694880"
  },
  {
    "text": "do a cross cluster to see all the namespaces or all the deployments that are available on every namespace you",
    "start": "694880",
    "end": "701810"
  },
  {
    "text": "need to have secret reader access and view so you can see those resources that are being deployed and then for service",
    "start": "701810",
    "end": "709040"
  },
  {
    "text": "accounts same thing you're just doing it with service accounts service accounts service accounts cluster wide which is",
    "start": "709040",
    "end": "716180"
  },
  {
    "text": "kind of highly discouraged because what that means is essentially you are giving any single service account that is",
    "start": "716180",
    "end": "722690"
  },
  {
    "text": "created in the kubernetes cluster complete view access to absolutely everything else generally you can give a",
    "start": "722690",
    "end": "729020"
  },
  {
    "text": "little bit more of a secure view you can do it if you want to but it depends on your attack their attack scenarios and",
    "start": "729020",
    "end": "737930"
  },
  {
    "text": "everything else there so that's read-only access now we're going to talk about rewrite access so that's again the",
    "start": "737930",
    "end": "743810"
  },
  {
    "text": "edit so you'll notice here we don't have a secret reader because the Edit gives us secret access so we can write those",
    "start": "743810",
    "end": "750500"
  },
  {
    "text": "resources so in this example we're just gonna inside a particular namespace with",
    "start": "750500",
    "end": "756200"
  },
  {
    "text": "one user we'll just create that role service account in a particular",
    "start": "756200",
    "end": "761330"
  },
  {
    "text": "namespace same thing except we're just changing it to a - - user - a - service account readwrite access for all service",
    "start": "761330",
    "end": "768589"
  },
  {
    "text": "accounts in a namespace so we're just giving all service accounts that and then this is like the",
    "start": "768589",
    "end": "774410"
  },
  {
    "text": "cluster admin access again which is greeting a cluster role binding for all service accounts in your cluster you're",
    "start": "774410",
    "end": "780890"
  },
  {
    "text": "able to edit anything in there except for namespaces and the quotas again",
    "start": "780890",
    "end": "786279"
  },
  {
    "text": "super highly discouraged because you can delete any of the resource one more time all your base are belong to us so let's",
    "start": "786279",
    "end": "794930"
  },
  {
    "text": "go to the demo all right so in can everyone in the back",
    "start": "794930",
    "end": "803040"
  },
  {
    "text": "see the screen is that big enough or do I need to make it a little bit bigger a little bit bigger oh you're saying is",
    "start": "803040",
    "end": "810550"
  },
  {
    "text": "okay okay so for this demo I'm just gonna show a mini cube status I'm just",
    "start": "810550",
    "end": "818200"
  },
  {
    "text": "running with mini cube here because it's just really easy to get access to the certificate authority so then I can",
    "start": "818200",
    "end": "823510"
  },
  {
    "text": "actually create new users rather than having to go through the cluster admin as a seiche into the cluster figure out",
    "start": "823510",
    "end": "828970"
  },
  {
    "text": "what the certificate authority is so just for demonstration purposes is gonna be super simple but let me show you what",
    "start": "828970",
    "end": "836140"
  },
  {
    "text": "we're gonna do here so we got a couple of scripts here first one we're gonna create a user called Sam Sam is just",
    "start": "836140",
    "end": "844420"
  },
  {
    "text": "going to be giving their own namespace OOP CTL create namespace Sam and then as",
    "start": "844420",
    "end": "850270"
  },
  {
    "text": "per the kubernetes documentation for creating a new user with TLS certificates we're gonna generate a new",
    "start": "850270",
    "end": "856990"
  },
  {
    "text": "private key for Sam then we're gonna generate a certificate signed request we're gonna give them the username Sam",
    "start": "856990",
    "end": "864100"
  },
  {
    "text": "and the organization is helm summit and then using the CA certificate or this",
    "start": "864100",
    "end": "870760"
  },
  {
    "text": "certificate authority that is created with the mini cube cluster we're going",
    "start": "870760",
    "end": "876490"
  },
  {
    "text": "to assign that certificate sign request and say yes it's okay to use you I authorize you as a user to go and",
    "start": "876490",
    "end": "883810"
  },
  {
    "text": "authenticate against this kubernetes cluster and then we're gonna give them five hundred days to work with it and",
    "start": "883810",
    "end": "890080"
  },
  {
    "text": "then at the end of the script we're just setting our kubernetes or coop CTL configuration we're gonna set a new",
    "start": "890080",
    "end": "895300"
  },
  {
    "text": "context and the credentials for that user for the kubernetes or a mini queue cluster and then we're gonna give them",
    "start": "895300",
    "end": "902020"
  },
  {
    "text": "the name space actually that's a typo we're gonna do it not in the shared",
    "start": "902020",
    "end": "909280"
  },
  {
    "text": "namespace but in the Sam namespace there you go earlier demo problems so we're just",
    "start": "909280",
    "end": "916960"
  },
  {
    "text": "gonna run that script and that's gonna do absolutely everything and we mentioned here so we created a new Sam",
    "start": "916960",
    "end": "924130"
  },
  {
    "text": "certificate the private key the certificate sign request and the public key here we added it to our community",
    "start": "924130",
    "end": "930130"
  },
  {
    "text": "config so everything's there now we're gonna do the exact same thing we're gonna create a user for me called great",
    "start": "930130",
    "end": "936340"
  },
  {
    "text": "bacon gobbler so let's go into the actual cluster and what does that mean",
    "start": "936340",
    "end": "941710"
  },
  {
    "text": "so if you go name spaces now we have a bacon gobbler namespace and we have a",
    "start": "941710",
    "end": "947680"
  },
  {
    "text": "SAM namespace we're gonna show this off is where the bacon gobbler namespace is what I'm gonna be giving myself",
    "start": "947680",
    "end": "954030"
  },
  {
    "text": "read/write access and then Sam is gonna have rewrite access to the Sam namespace",
    "start": "954030",
    "end": "959920"
  },
  {
    "text": "and what I'm gonna demonstrate is myself bacon gobbler is gonna be able to also have view access into Sam's main space",
    "start": "959920",
    "end": "966940"
  },
  {
    "text": "now when we first created those users we did not get any roles assigned to all of",
    "start": "966940",
    "end": "972940"
  },
  {
    "text": "us so we can actually show that because if we do a kubernetes - context bacon",
    "start": "972940",
    "end": "981220"
  },
  {
    "text": "gobbler if we do because just get pods",
    "start": "981220",
    "end": "987390"
  },
  {
    "text": "we will not be able to see absolutely anything in the namespace bacon gobbler because we don't have any roles assigned",
    "start": "987390",
    "end": "993850"
  },
  {
    "text": "to us so and if we do a helm list with that same thing helm - - cube context",
    "start": "993850",
    "end": "1001699"
  },
  {
    "text": "list we don't see anything at this current time if we installed something",
    "start": "1004460",
    "end": "1010080"
  },
  {
    "text": "we would not be able to install anything so we try install let's do WordPress",
    "start": "1010080",
    "end": "1019190"
  },
  {
    "text": "stable WordPress and it will give it a fancy name this will not work because we",
    "start": "1019190",
    "end": "1029040"
  },
  {
    "text": "don't have readwrite access into that namespace so we need to actually go and create those roles for that user so",
    "start": "1029040",
    "end": "1035010"
  },
  {
    "text": "we're gonna use another script to actually go and do that here so the Edit",
    "start": "1035010",
    "end": "1040199"
  },
  {
    "text": "for dot sh script here just as we showed before it just creates a role binding in",
    "start": "1040199",
    "end": "1046110"
  },
  {
    "text": "that namespace for a particular user and then in a particular namespace so we're gonna give that it was edit for bacon",
    "start": "1046110",
    "end": "1054870"
  },
  {
    "text": "gobbler and we're gonna give bacon gobbler edit access into the bacon gobbler namespace so now that role base",
    "start": "1054870",
    "end": "1062730"
  },
  {
    "text": "or that role has been created or that roll binding has been created for us and now we can install",
    "start": "1062730",
    "end": "1068360"
  },
  {
    "text": "charts into that namespace and there we go we've got namespace in there if we do",
    "start": "1068360",
    "end": "1073830"
  },
  {
    "text": "a helm list in there list we can now see",
    "start": "1073830",
    "end": "1080669"
  },
  {
    "text": "that so we've got the wordpress generated name in the namespace bacon gobbler it's all been deployed",
    "start": "1080669",
    "end": "1085950"
  },
  {
    "text": "everything else is all fine and dandy now what if we're users salmon we're trying to see what bacon gobbler has",
    "start": "1085950",
    "end": "1091739"
  },
  {
    "text": "deployed so we do a helm cube context",
    "start": "1091739",
    "end": "1097100"
  },
  {
    "text": "list let's try and do the namespace bacon gobbler we can't see anything",
    "start": "1098989",
    "end": "1104999"
  },
  {
    "text": "because we don't have view access over to him or her so we're gonna do a view",
    "start": "1104999",
    "end": "1110519"
  },
  {
    "text": "for them we're gonna do a view for that script is just a role binding and again",
    "start": "1110519",
    "end": "1116909"
  },
  {
    "text": "notice that this has the secret reader cluster role binding or the cluster role that we created before in the I didn't",
    "start": "1116909",
    "end": "1124350"
  },
  {
    "text": "show it in the first script it uses the cluster role secret reader and it creates that instance and that is in the",
    "start": "1124350",
    "end": "1132629"
  },
  {
    "text": "cluster role secret reader gemmell so that's creating that cluster role secret",
    "start": "1132629",
    "end": "1138269"
  },
  {
    "text": "Reader API groups resources secrets get watching the list so we can actually just view the secrets can't edit them so",
    "start": "1138269",
    "end": "1144539"
  },
  {
    "text": "now we'll do a view for Sam and we'll",
    "start": "1144539",
    "end": "1150779"
  },
  {
    "text": "give Sam view access into the bacon gobbler namespace that's ones created so now what we can do in helm is cube",
    "start": "1150779",
    "end": "1157739"
  },
  {
    "text": "context time where we have we're good Sam and then we can do a list we'll see",
    "start": "1157739",
    "end": "1166409"
  },
  {
    "text": "there's nothing because we're not looking in the we're looking in our own namespace there's nothing there but if we look in namespace bacon you're all",
    "start": "1166409",
    "end": "1173820"
  },
  {
    "text": "there we start seeing other things now what if we want to actually see everything from a holistic point of view",
    "start": "1173820",
    "end": "1181139"
  },
  {
    "text": "so we want to see absolutely everything in the cluster at any point that is a",
    "start": "1181139",
    "end": "1186869"
  },
  {
    "text": "completely different role than what was shown here so if I try and do that right now all namespaces so Sam does have access a",
    "start": "1186869",
    "end": "1195299"
  },
  {
    "text": "role has been created inside of names bacon gobbler that Sam can see all those resources in there but can't but now",
    "start": "1195299",
    "end": "1204480"
  },
  {
    "text": "when we press this we're trying to see everything at a holistic point of view we can't see anything this is a separate",
    "start": "1204480",
    "end": "1211860"
  },
  {
    "text": "kubernetes endpoint in terms of how the API works when you use the all namespaces endpoint you are seeing",
    "start": "1211860",
    "end": "1218549"
  },
  {
    "text": "things from the cluster point of view from a holistic point of view so it's not a fine-grained role you have to",
    "start": "1218549",
    "end": "1224039"
  },
  {
    "text": "create a cluster role to be able to view those resources so we have another helper script here it's called cluster",
    "start": "1224039",
    "end": "1231360"
  },
  {
    "text": "role view for and that script is a cluster role binding for viewing thing",
    "start": "1231360",
    "end": "1237720"
  },
  {
    "text": "or viewing resources in any namespaces as a particular user and the secret",
    "start": "1237720",
    "end": "1243210"
  },
  {
    "text": "reader again because of Secrets not being viewable but with the view closer role so we will do that and we will give",
    "start": "1243210",
    "end": "1250049"
  },
  {
    "text": "Sam access so now those two role bindings we created for Sam and if we do a helm cube context Sam lists all",
    "start": "1250049",
    "end": "1260929"
  },
  {
    "text": "namespaces and now we're able to see inside of every single namespace",
    "start": "1260929",
    "end": "1267929"
  },
  {
    "text": "anything that's been deployed inside of there so that is the majority of what I",
    "start": "1267929",
    "end": "1273720"
  },
  {
    "text": "got here and then again if I just want to be able to do one last thing which is",
    "start": "1273720",
    "end": "1279950"
  },
  {
    "text": "give bacon gobbler edit access inside the Sam namespace I can do edit for",
    "start": "1279950",
    "end": "1286010"
  },
  {
    "text": "bacon gobbler in the Sam namespace and then we'll do a helm cube context bacon",
    "start": "1286010",
    "end": "1293669"
  },
  {
    "text": "gobbler install stable word press generate name and we will deploy it into",
    "start": "1293669",
    "end": "1302490"
  },
  {
    "text": "a different namespace will deploy it into the Sam namespace I should have actually deleted this role first just to",
    "start": "1302490",
    "end": "1308399"
  },
  {
    "text": "show that it would not go the first time but you'll see here that big and gobbler",
    "start": "1308399",
    "end": "1313529"
  },
  {
    "text": "now has write access into the Sam name spacing and deploy those in there and",
    "start": "1313529",
    "end": "1318950"
  },
  {
    "text": "can actually see them too so helm cube context gobbler lists namespace",
    "start": "1318950",
    "end": "1329180"
  },
  {
    "text": "and can't see them from the all namespaces name spaces typing I can't",
    "start": "1329180",
    "end": "1339930"
  },
  {
    "text": "see it at all from the all name Caesars because that cluster role is not available so you can only see that from there and similarly Sam can see it because Sam",
    "start": "1339930",
    "end": "1347970"
  },
  {
    "text": "has read access to their own namespace will do Sam lists don't need to give the",
    "start": "1347970",
    "end": "1354360"
  },
  {
    "text": "namespace there and you can see that it was deployed into the Sam namespace so",
    "start": "1354360",
    "end": "1360050"
  },
  {
    "text": "that's all I have for a demo here that's",
    "start": "1360050",
    "end": "1366150"
  },
  {
    "text": "all I have for time here so left is homework for the reader for anyone who is interested in this there is on helm 3",
    "start": "1366150",
    "end": "1374280"
  },
  {
    "text": "there's the v3 LSH slash docks the goal of this talk was actually to add this as",
    "start": "1374280",
    "end": "1379650"
  },
  {
    "text": "documentation to so then everyone can benefit from this talk and everyone can benefit from role based access control",
    "start": "1379650",
    "end": "1385050"
  },
  {
    "text": "in home 3 so I'm gonna take this as a homework for myself as updating the",
    "start": "1385050",
    "end": "1391350"
  },
  {
    "text": "documentation on this the resources where I learned all about role based access control and kubernetes was on the",
    "start": "1391350",
    "end": "1397830"
  },
  {
    "text": "kubernetes documentation and then I accidentally I forgot to not leave a link on here but there was a fantastic",
    "start": "1397830",
    "end": "1404190"
  },
  {
    "text": "blog post by the bitNami folks on how you actually create the roles or not the",
    "start": "1404190",
    "end": "1409980"
  },
  {
    "text": "roles the users and how that relates to doing all that with the TLS certificates and doing that although I thought mini",
    "start": "1409980",
    "end": "1415920"
  },
  {
    "text": "cube so that's all I have for the talk we actually have a decent amount of time",
    "start": "1415920",
    "end": "1420930"
  },
  {
    "text": "so I'll do a little bit of a Q&A if we want to otherwise yeah we'll go on to the next one so thank you",
    "start": "1420930",
    "end": "1428750"
  },
  {
    "text": "yeah so the question was do I envision",
    "start": "1432140",
    "end": "1443670"
  },
  {
    "text": "this as being something like a helm in it for helm 3 I'm imagining as in you're talking about how um it's a little bit",
    "start": "1443670",
    "end": "1453210"
  },
  {
    "text": "of a tough question because all of this is very opinionated on what is exactly you're trying to deploy like you could",
    "start": "1453210",
    "end": "1459630"
  },
  {
    "text": "you could have an opinion on whether you want to have a cluster role for viewing editing or anything else completely",
    "start": "1459630",
    "end": "1466110"
  },
  {
    "text": "dependent on what you are doing so I think it might be better served as like",
    "start": "1466110",
    "end": "1471990"
  },
  {
    "text": "a plug-in to be assistive and saying like here are some user profiles where you're really interested in say I want",
    "start": "1471990",
    "end": "1477300"
  },
  {
    "text": "to give edit access to a particular namespace or things like that I could see an assistive tool I'm not entirely",
    "start": "1477300",
    "end": "1484320"
  },
  {
    "text": "certain it would be a such a great thing in there because it would just be a massive splay of like feature flags to",
    "start": "1484320",
    "end": "1490890"
  },
  {
    "text": "figure out your particular scenario for setting that up so but yeah I definitely",
    "start": "1490890",
    "end": "1496170"
  },
  {
    "text": "would see some kind of helpful this would be useful for that yeah Ivan what",
    "start": "1496170",
    "end": "1505680"
  },
  {
    "text": "so the question was why do we use secrets because it's so inconvenient the the good question or I guess the",
    "start": "1505680",
    "end": "1512820"
  },
  {
    "text": "question here was or the answer here was we were envisioning secrets now is going",
    "start": "1512820",
    "end": "1519150"
  },
  {
    "text": "through some alpha stuff with encrypting at rest and that's something that's been going through the Cavanaugh's API and",
    "start": "1519150",
    "end": "1524640"
  },
  {
    "text": "that would be something that would be awesome to see on the backend such that like helm releases could be encrypted at",
    "start": "1524640",
    "end": "1531480"
  },
  {
    "text": "rest so if you did a helm install the kubernetes api would just encrypt it on the SED back-end and then if you were to",
    "start": "1531480",
    "end": "1537840"
  },
  {
    "text": "have your helm client similar like coop CTL be able to decrypt those secrets as it's being fetched that would be a",
    "start": "1537840",
    "end": "1545070"
  },
  {
    "text": "really fantastic security story so it's kind of like we're waiting for things on the secrets backend to move forward you",
    "start": "1545070",
    "end": "1550980"
  },
  {
    "text": "can change the Seekers back-end to something else but I guess we'll just",
    "start": "1550980",
    "end": "1557880"
  },
  {
    "text": "see from here what's going on with the Seekers back-end",
    "start": "1557880",
    "end": "1562010"
  },
  {
    "text": "yeah that's actually a very good question I'm curious to see on the kubernetes site or point of view why",
    "start": "1565970",
    "end": "1572600"
  },
  {
    "text": "secrets are not viewable by default using the default like rolls in there",
    "start": "1572600",
    "end": "1577980"
  },
  {
    "text": "too because there's secret secret secret",
    "start": "1577980",
    "end": "1583380"
  },
  {
    "text": "yeah I don't know it's a very good question left is homework for the reader",
    "start": "1583380",
    "end": "1589730"
  },
  {
    "text": "damn it yeah hi yeah yeah so the",
    "start": "1589730",
    "end": "1614250"
  },
  {
    "text": "question is a good question the question was if you have a chart that has templates that install",
    "start": "1614250",
    "end": "1620120"
  },
  {
    "text": "resources in a separate namespace than what you currently have access to will that like gain access outside of those",
    "start": "1620120",
    "end": "1627299"
  },
  {
    "text": "roles the answer is no because when you're authenticating against the kubernetes cluster and those resources",
    "start": "1627299",
    "end": "1633720"
  },
  {
    "text": "are being installed they're being installed on that kubernetes users roles",
    "start": "1633720",
    "end": "1638730"
  },
  {
    "text": "and that's basically so when I did the first demonstration I showed that you",
    "start": "1638730",
    "end": "1644460"
  },
  {
    "text": "were trying to helm install stable WordPress into a namespace which that user did not have access to and if you",
    "start": "1644460",
    "end": "1652500"
  },
  {
    "text": "were deploying resources that had a namespace hard-coded in there and that",
    "start": "1652500",
    "end": "1657630"
  },
  {
    "text": "user did not have read or write access to that namespace than those resources it would just Bork out and say that I",
    "start": "1657630",
    "end": "1663809"
  },
  {
    "text": "don't have access to install resource foo in namespace bar basically is what would happen don't oh",
    "start": "1663809",
    "end": "1675380"
  },
  {
    "text": "yeah so that's a good question so the question was prior to installing the",
    "start": "1696600",
    "end": "1702670"
  },
  {
    "text": "resources in the cluster does the does helm actually verify that those",
    "start": "1702670",
    "end": "1708700"
  },
  {
    "text": "resources can be installed and such that you don't get in like a halfway house where some of the templates are installed and some are not it's my",
    "start": "1708700",
    "end": "1715540"
  },
  {
    "text": "understanding well I actually have to take a look and leave that as homework to the reader I guess but the question",
    "start": "1715540",
    "end": "1722290"
  },
  {
    "text": "would be I'm fairly certain it doesn't I'm not actually a hundred percent too",
    "start": "1722290",
    "end": "1728830"
  },
  {
    "text": "familiar with the code but I think it does a schema validation with your user to see whether those resources can be",
    "start": "1728830",
    "end": "1734830"
  },
  {
    "text": "deployed before it's actually deployed do you know Bunny a chance okay all",
    "start": "1734830",
    "end": "1763750"
  },
  {
    "text": "right yes yeah so it's a case of",
    "start": "1763750",
    "end": "1769320"
  },
  {
    "text": "resources I think we have time for one",
    "start": "1769320",
    "end": "1780310"
  },
  {
    "text": "last question yeah",
    "start": "1780310",
    "end": "1783030"
  },
  {
    "text": "yeah so the question is if you want to grant roles such that the user can create",
    "start": "1794519",
    "end": "1801969"
  },
  {
    "text": "namespaces but not create or create resources and other namespaces and I don't think there's that kind of",
    "start": "1801969",
    "end": "1807580"
  },
  {
    "text": "fine-grained control inside of kubernetes where you can actually I could be totally wrong there the custom",
    "start": "1807580",
    "end": "1814419"
  },
  {
    "text": "or the ones that I used in this demonstration are the ones that are off-the-shelf which give actions and",
    "start": "1814419",
    "end": "1821019"
  },
  {
    "text": "verbs to certain names and namespaces or resources and so like that secret reader role that I created it was secrets get",
    "start": "1821019",
    "end": "1828190"
  },
  {
    "text": "which and get watch and list I imagine there might be a cluster role binding",
    "start": "1828190",
    "end": "1834820"
  },
  {
    "text": "where he could do four namespaces you can create them but that would be the only thing you could do and you could apply that to a user and such that they",
    "start": "1834820",
    "end": "1841599"
  },
  {
    "text": "could only use that in the kubernetes api so that could be a potential way of doing it yeah",
    "start": "1841599",
    "end": "1849779"
  },
  {
    "text": "so actually now in helm three it doesn't create that namespace by default so you",
    "start": "1876460",
    "end": "1882770"
  },
  {
    "text": "actually have to create that namespace ahead of time before you deploy that helm chart so you it's assumed that you",
    "start": "1882770",
    "end": "1888410"
  },
  {
    "text": "have to have cluster admin access when you're first creating that namespace and then the users have the fine-grained",
    "start": "1888410",
    "end": "1893960"
  },
  {
    "text": "control or not on whether to install name or resources in that namespace if you wanted to blow a chart that has a",
    "start": "1893960",
    "end": "1899570"
  },
  {
    "text": "namespace in there then you need to give them role access to create a namespace",
    "start": "1899570",
    "end": "1905059"
  },
  {
    "text": "as well as those roles but that would be part of the validation that we were talking about the only case would be",
    "start": "1905059",
    "end": "1910730"
  },
  {
    "text": "with custom resource definitions that could that they could be installed prior",
    "start": "1910730",
    "end": "1915830"
  },
  {
    "text": "to validation otherwise all the other resources would go through validation and say you don't have write access to",
    "start": "1915830",
    "end": "1923240"
  },
  {
    "text": "create those names or those resources and so you wouldn't get into that scenario where the namespace is created",
    "start": "1923240",
    "end": "1929059"
  },
  {
    "text": "but all the resources are not because you have that role",
    "start": "1929059",
    "end": "1933519"
  },
  {
    "text": "it's my understanding that yeah that would be the case all right I think we",
    "start": "1943060",
    "end": "1949700"
  },
  {
    "text": "are at time here so thank you everyone if you want to talk to me I'll be outside [Applause]",
    "start": "1949700",
    "end": "1959748"
  },
  {
    "text": "[Music]",
    "start": "1964300",
    "end": "1967140"
  }
]