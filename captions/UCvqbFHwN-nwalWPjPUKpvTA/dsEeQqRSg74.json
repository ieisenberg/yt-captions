[
  {
    "text": "thank you uh my name is janja franek i work for a hat and",
    "start": "240",
    "end": "5520"
  },
  {
    "text": "i am a tech lead of six storage in kubernetes there was supposed to be shing together",
    "start": "5520",
    "end": "10639"
  },
  {
    "text": "with me our co-chair but unfortunately she got covered she's",
    "start": "10639",
    "end": "15839"
  },
  {
    "text": "fine just she's positive and she can't go here and uh sorry for the technical",
    "start": "15839",
    "end": "21359"
  },
  {
    "text": "difficulties i had like a beautiful presentation we've worked on a long time",
    "start": "21359",
    "end": "26720"
  },
  {
    "text": "for that on that but you won't see it so uh",
    "start": "26720",
    "end": "33360"
  },
  {
    "text": "for some part we can go with all the slides uh the first thing who is six",
    "start": "33360",
    "end": "38480"
  },
  {
    "text": "storage six storage is special interest group uh we look after storage in",
    "start": "38480",
    "end": "44239"
  },
  {
    "text": "kubernetes we have almost",
    "start": "44239",
    "end": "50000"
  },
  {
    "text": "hey thank you",
    "start": "50480",
    "end": "55280"
  },
  {
    "text": "so well now i can show you the agenda so i will briefly cover who we are",
    "start": "57440",
    "end": "63600"
  },
  {
    "text": "uh i will dive deeper into csi migration which is one of the latest features we do",
    "start": "63600",
    "end": "70560"
  },
  {
    "text": "and then we i will cover the past releases the future releases and how to get engaged",
    "start": "70560",
    "end": "76159"
  },
  {
    "text": "so who we are uh officially we have two co-chairs sad ali from google xingyang from vmware",
    "start": "76159",
    "end": "82479"
  },
  {
    "text": "and uh two tech leads michelle from google android and me from red hat",
    "start": "82479",
    "end": "88320"
  },
  {
    "text": "but it's not only us for people we have many contributors from many companies",
    "start": "88320",
    "end": "94000"
  },
  {
    "text": "shingles the numbers and we have more than 4 thousand people on our flag channel on the main channel we have more",
    "start": "94000",
    "end": "100159"
  },
  {
    "text": "than 1 000 people on selection just for csi our bi-weekly meeting is attended",
    "start": "100159",
    "end": "107360"
  },
  {
    "text": "roughly around by 25 people and throughout the time we got 32 uh",
    "start": "107360",
    "end": "116399"
  },
  {
    "text": "different approvers in our packages and github repositories so we are pretty big",
    "start": "116399",
    "end": "122079"
  },
  {
    "text": "group of people but not everybody is active somebody just appeared asking questions like and it's done silent",
    "start": "122079",
    "end": "129200"
  },
  {
    "text": "so we are always looking for new contributors and new coders you don't need even to code you can have different",
    "start": "129200",
    "end": "135360"
  },
  {
    "text": "views you can have that with trashing bugs you can fix our documentation which deserves some work and so on",
    "start": "135360",
    "end": "143920"
  },
  {
    "text": "so don't hesitate uh just contributes and pull requests ask on slack we are there for you",
    "start": "143920",
    "end": "151519"
  },
  {
    "text": "what we do actually is we maintain the storage apis in kubernetes means like persistent volumes present very claims",
    "start": "151920",
    "end": "158480"
  },
  {
    "text": "storage classes and everything around that from dynamic provisioning volume attachment mounting",
    "start": "158480",
    "end": "165440"
  },
  {
    "text": "amounting detaching deleting volumes and related stuff like snapshots uh",
    "start": "165440",
    "end": "172879"
  },
  {
    "text": "resizes and that stuff we maintain kubernetes in three volume plugins",
    "start": "172879",
    "end": "178879"
  },
  {
    "text": "and we have a deal with uh signal that we were maintaining part of the",
    "start": "178879",
    "end": "184159"
  },
  {
    "text": "ephemeral volumes like secrets config maps and that does the like real storage stuff",
    "start": "184159",
    "end": "190239"
  },
  {
    "text": "the mounting and they do the other stuff like getting the config maps and getting the secrets from ubuntu's api server we",
    "start": "190239",
    "end": "197519"
  },
  {
    "text": "also maintain kubernetes sorry maintenance yeah we maintain components implementation of csi",
    "start": "197519",
    "end": "203040"
  },
  {
    "text": "we maintain all the side cars and quite surprisingly we don't maintain too many uh csi drivers most of the css drivers",
    "start": "203040",
    "end": "210799"
  },
  {
    "text": "that kubernetes ships are owned by sql provider",
    "start": "210799",
    "end": "216080"
  },
  {
    "text": "these are the cloud css drivers for the clouds for example rook",
    "start": "216080",
    "end": "222959"
  },
  {
    "text": "ceph has its own csi driver under rook and so on so we maintain basically nfs",
    "start": "222959",
    "end": "228000"
  },
  {
    "text": "and couple of uh similar csv drivers but yeah that's what we do",
    "start": "228000",
    "end": "235200"
  },
  {
    "text": "now i would like to dive deeper into csi migration unfortunately we started late",
    "start": "235920",
    "end": "242080"
  },
  {
    "text": "and i don't even have time so we will barely scratch the surface so what is csi migration",
    "start": "242080",
    "end": "248560"
  },
  {
    "text": "uh as you probably know we have some entry code in kubernetes",
    "start": "248560",
    "end": "254400"
  },
  {
    "text": "github repository for volume plugins and at the same time we have csi drivers that do basically the same thing",
    "start": "254400",
    "end": "261199"
  },
  {
    "text": "so we would like to move the code from kubernetes completely wipe it out and under the hood silently",
    "start": "261199",
    "end": "268560"
  },
  {
    "text": "route all the storage calls to the css drivers so we don't need to maintain everything twice",
    "start": "268560",
    "end": "274000"
  },
  {
    "text": "the same idea got a sick cloud provider they want to move",
    "start": "274000",
    "end": "279199"
  },
  {
    "text": "the cloud providers from entry from kubernetes move it away so the volume plugins must naturally follow we are not",
    "start": "279199",
    "end": "285199"
  },
  {
    "text": "migrating any data that the data state is or stays where it is",
    "start": "285199",
    "end": "290479"
  },
  {
    "text": "although like the csi migration term could resemble data migration but not we are not migrating anything anywhere we",
    "start": "290479",
    "end": "296800"
  },
  {
    "text": "are not even changing the api so if you have entry volumes in three pvs entry storage classes",
    "start": "296800",
    "end": "302160"
  },
  {
    "text": "uh and your stateful set deployments that use that you don't need to change anything in theory",
    "start": "302160",
    "end": "308720"
  },
  {
    "text": "if we did our homework right right you just upgrade to a version that has csm migration name enabled or you enable it",
    "start": "308720",
    "end": "315039"
  },
  {
    "text": "manually while while it's off by default and you don't need to change anything everything should work",
    "start": "315039",
    "end": "321600"
  },
  {
    "text": "and of course the cloud-based volumes will go first and the others will slowly follow we are",
    "start": "321600",
    "end": "328560"
  },
  {
    "text": "moving portworx and seth right now who knows who will move the other ones",
    "start": "328560",
    "end": "335680"
  },
  {
    "text": "so brief introduction how currently entry volume plugins handle all the storage requests so",
    "start": "335680",
    "end": "343440"
  },
  {
    "text": "on the left there is a user that creates entry storage class and pvc on the right",
    "start": "343440",
    "end": "348960"
  },
  {
    "text": "there is a pv controller persistent volume controller in the cube control manager that decides there is",
    "start": "348960",
    "end": "355120"
  },
  {
    "text": "it needs to provision a new volume so this diagram shows dynamic provisioning",
    "start": "355120",
    "end": "360319"
  },
  {
    "text": "so the pv controller sees the claim it sees the storage class it sees its entry storage class so it finds the volume",
    "start": "360319",
    "end": "367280"
  },
  {
    "text": "plugin calls it this is a simple function call nothing complicated the volume plugins",
    "start": "367280",
    "end": "373120"
  },
  {
    "text": "calls the cloud provider request provider uses some cloud the api and provisions volume right so now the same",
    "start": "373120",
    "end": "380400"
  },
  {
    "text": "scenario with csi migration enabled it starts the same the user have the exactly the same storage class as before",
    "start": "380400",
    "end": "386319"
  },
  {
    "text": "no change there it creates the same storage class they create the pvc pv controller wants to provision pv",
    "start": "386319",
    "end": "391360"
  },
  {
    "text": "controller doesn't have any inter-volume plug-ins they are gone so what does it do",
    "start": "391360",
    "end": "397039"
  },
  {
    "text": "it translates the storage class the interior storage class to csi storage class",
    "start": "397039",
    "end": "402800"
  },
  {
    "text": "using csa transactional translation library and since it has a csi storage class now",
    "start": "402800",
    "end": "408880"
  },
  {
    "text": "it knows what to do uh with csi it just marks the pvc for dynamic provisioning and on the csi",
    "start": "408880",
    "end": "415759"
  },
  {
    "text": "driver side in the csi driver port it looks this way there is external",
    "start": "415759",
    "end": "421199"
  },
  {
    "text": "provisioner which basically translates the kubernetes api objects into csi cores",
    "start": "421199",
    "end": "428160"
  },
  {
    "text": "into csi grpc cores so the external provisioner it sees i have a pvc i need to dynamically provision it",
    "start": "428160",
    "end": "434560"
  },
  {
    "text": "and it says entry storage class because the translation in the quick control manager it happens just in",
    "start": "434560",
    "end": "440240"
  },
  {
    "text": "memory so the external provisioner sees the entry storage class it uses the same library translates it to csi and it",
    "start": "440240",
    "end": "447199"
  },
  {
    "text": "handles in the csi way and of course the driver and the driver across the",
    "start": "447199",
    "end": "452319"
  },
  {
    "text": "course the cloud so all these translations they happen only in memory",
    "start": "452319",
    "end": "457520"
  },
  {
    "text": "we can't update storage classes we can't update pvs in the api server",
    "start": "457520",
    "end": "463520"
  },
  {
    "text": "basically these objects are mostly immutable most of you probably already heard that",
    "start": "463520",
    "end": "468800"
  },
  {
    "text": "and for good reason like if we change the objects during i don't know attaching or during dynamic provisioning",
    "start": "468800",
    "end": "474720"
  },
  {
    "text": "like things could go very very racy very very wrong so they are immutable so everybody who",
    "start": "474720",
    "end": "482479"
  },
  {
    "text": "processes entry pvs entry storage process now has the library they can translate it to csi and use it after",
    "start": "482479",
    "end": "489759"
  },
  {
    "text": "that and all the other components like external attacher or attached controller resizer everything everybody does this",
    "start": "489759",
    "end": "496879"
  },
  {
    "text": "in memory translation so why is complete so complicated",
    "start": "496879",
    "end": "502319"
  },
  {
    "text": "because the api is bad well it's not bad it's good but it doesn't allow us to change the",
    "start": "502319",
    "end": "508639"
  },
  {
    "text": "objects and even if we could change the objects and we would uh change the storage class and pv",
    "start": "508639",
    "end": "515279"
  },
  {
    "text": "and you decide that you don't like the new version with csm migration is broken and you want to downgrade you",
    "start": "515279",
    "end": "521518"
  },
  {
    "text": "would downgrade to a version where you have the csi objects so you couldn't really downgrade",
    "start": "521519",
    "end": "527920"
  },
  {
    "text": "but in this case we keep the entry pvs entry storage classes as they are so you can upgrade downgrade as you want",
    "start": "527920",
    "end": "534880"
  },
  {
    "text": "there is a link to cap and design it's pretty complicated like the picture i showed it's just barely scratching the",
    "start": "534880",
    "end": "541440"
  },
  {
    "text": "surface we have a schedule the schedule you can see we started in kubernetes 14 that's",
    "start": "541440",
    "end": "548399"
  },
  {
    "text": "three and a half years ago we had the first alpha but in kubernetes 124 the first two are",
    "start": "548399",
    "end": "555680"
  },
  {
    "text": "ga openstack cinder and azure disk ga means it is the csi migration is on by",
    "start": "555680",
    "end": "561680"
  },
  {
    "text": "default the inter volume plugins are not reused and you cannot turn it off",
    "start": "561680",
    "end": "568800"
  },
  {
    "text": "so you must use the csi drivers there the address most of the other entry",
    "start": "568800",
    "end": "574959"
  },
  {
    "text": "volume plugins based on cloud will follow very shortly azure file amazon ebs google persistent disks will",
    "start": "574959",
    "end": "582240"
  },
  {
    "text": "follow in 175 and vsphere probably in 126. all these",
    "start": "582240",
    "end": "587920"
  },
  {
    "text": "timelines is kind of work in progress and subject to change uh we've",
    "start": "587920",
    "end": "593519"
  },
  {
    "text": "switched this with the ga a couple of times already now it looks like we are really going",
    "start": "593519",
    "end": "600080"
  },
  {
    "text": "for it and save rbd and portworx we just started moving the entry",
    "start": "600080",
    "end": "605760"
  },
  {
    "text": "maybe it will go beta in the next release maybe not we'll see",
    "start": "605760",
    "end": "610800"
  },
  {
    "text": "and also when we are doing this csi migration we are sometimes deprecating features that were",
    "start": "610800",
    "end": "618079"
  },
  {
    "text": "in tree and are not supported by the csi drivers for example for vsphere",
    "start": "618079",
    "end": "623519"
  },
  {
    "text": "if you want to test csi migration you need vsphere version 7.0.2",
    "start": "623519",
    "end": "629680"
  },
  {
    "text": "which is pretty recent one so if you have anything based on 6.5 6.7 it's time",
    "start": "629680",
    "end": "635200"
  },
  {
    "text": "to upgrade it to 7. something",
    "start": "635200",
    "end": "639760"
  },
  {
    "text": "so if you want to test it if you use some managed kubernetes in",
    "start": "640399",
    "end": "645680"
  },
  {
    "text": "the cloud or use you use some enterprise kubernetes distro consult your kubernetes vendor they",
    "start": "645680",
    "end": "652079"
  },
  {
    "text": "should tell you what to do and also they will handle the migration during upgrade to gi gi version so we",
    "start": "652079",
    "end": "659760"
  },
  {
    "text": "just follow the documentation if you are on your own and you use one kubernetes",
    "start": "659760",
    "end": "665920"
  },
  {
    "text": "you of course must install the cc driver the replacement cc driver and",
    "start": "665920",
    "end": "672320"
  },
  {
    "text": "either you test it while the main by the cs immigration is still off by default",
    "start": "672320",
    "end": "678079"
  },
  {
    "text": "uh then you need to just enable a couple of feature gates uh nothing special here uh there is only",
    "start": "678079",
    "end": "683680"
  },
  {
    "text": "one catch you need to update uh to flip them in a certain order like",
    "start": "683680",
    "end": "689040"
  },
  {
    "text": "cube control manager first and then cubelets if you do it in wrong order bad",
    "start": "689040",
    "end": "694320"
  },
  {
    "text": "things will happen uh and why are you flipping the gates on",
    "start": "694320",
    "end": "699839"
  },
  {
    "text": "notes you should drain the node flip the gate and uncoordinate so",
    "start": "699839",
    "end": "706000"
  },
  {
    "text": "so like the migrated and non-migrated volumes don't mix are not mixed on one node the whole node",
    "start": "706000",
    "end": "712720"
  },
  {
    "text": "must be either migrated as whole or not migrated as whole",
    "start": "712720",
    "end": "718639"
  },
  {
    "text": "[Music] for the features",
    "start": "719210",
    "end": "724320"
  },
  {
    "text": "in csi migration we support only the features that will deliver supported before the migration so if a",
    "start": "724880",
    "end": "731680"
  },
  {
    "text": "volume plug-in supported resize uh the same volume uh migrated to csi will support resize",
    "start": "731680",
    "end": "738800"
  },
  {
    "text": "but it will not get new features that csi driver offers so you will not get",
    "start": "738800",
    "end": "743839"
  },
  {
    "text": "snapshots you will not get cloning you know you must use the csi uh pvs right",
    "start": "743839",
    "end": "749279"
  },
  {
    "text": "away if you use entry uh that will not work",
    "start": "749279",
    "end": "754399"
  },
  {
    "text": "and i already told you about the deprecations please release read the release notes very very carefully",
    "start": "754399",
    "end": "759600"
  },
  {
    "text": "carefully and finally uh that was csm migration",
    "start": "759600",
    "end": "766000"
  },
  {
    "text": "now brief overview what we did in kubernetes 123",
    "start": "766000",
    "end": "772399"
  },
  {
    "text": "if you had any issues with fs group being applied too slowly because we",
    "start": "772399",
    "end": "777519"
  },
  {
    "text": "applied it recruitedly on every file on the volume there is a way how to skip it so it applies only once when the pod",
    "start": "777519",
    "end": "784320"
  },
  {
    "text": "first starts but all the other ports will skip it",
    "start": "784320",
    "end": "789519"
  },
  {
    "text": "this is now ga uh we also allow csv drivers to opt opt",
    "start": "789680",
    "end": "795519"
  },
  {
    "text": "out from cs from fs group at all so if a csv driver provides a volume that",
    "start": "795519",
    "end": "801760"
  },
  {
    "text": "doesn't have like p6 or that can't support fs group",
    "start": "801760",
    "end": "808320"
  },
  {
    "text": "for example nfs shared with root squash the csm drivers have option how to tell",
    "start": "808320",
    "end": "814480"
  },
  {
    "text": "it kubernetes and kubernetes will not try to apply fast group and finally generic ephemeral volumes",
    "start": "814480",
    "end": "821279"
  },
  {
    "text": "rga which is like uh empty there on steroids much better version of empty there",
    "start": "821279",
    "end": "827600"
  },
  {
    "text": "as beta we allow csi drivers to apply fs group by themselves but it is only for csi",
    "start": "827600",
    "end": "835120"
  },
  {
    "text": "drivers that have like mount option or something similar to apply fs group",
    "start": "835120",
    "end": "841120"
  },
  {
    "text": "all the other csi drivers should depend on kubernetes to apply the fs group",
    "start": "841120",
    "end": "847440"
  },
  {
    "text": "and we are moving with system migration in 124 and as alpha",
    "start": "847440",
    "end": "855199"
  },
  {
    "text": "users can now cancel volume resize if it failed on the storage backend so",
    "start": "855199",
    "end": "861920"
  },
  {
    "text": "well you know the kubernetes it always retries three tries retries but this storage backend always says no",
    "start": "861920",
    "end": "867680"
  },
  {
    "text": "no no so you can now cancel the resize uh",
    "start": "867680",
    "end": "874720"
  },
  {
    "text": "we are honoring reclaimed police in pvs in better way than we did because if you delete pv objects",
    "start": "875440",
    "end": "882160"
  },
  {
    "text": "manually sometimes the reclaimed policy wasn't honored and we left orphan volumes in",
    "start": "882160",
    "end": "889120"
  },
  {
    "text": "the storage backend now it's going to be better we will always honor the reclaim policy",
    "start": "889120",
    "end": "894720"
  },
  {
    "text": "even if you remove if you delete the pv manually uh we are working with sick apps",
    "start": "894720",
    "end": "901920"
  },
  {
    "text": "to remove pvcs automatically from sticker sets and again we are moving cc migration",
    "start": "901920",
    "end": "908320"
  },
  {
    "text": "and was the time awesome so and for the rest i should yeah well i",
    "start": "908320",
    "end": "915600"
  },
  {
    "text": "closed it then uh i had a reason",
    "start": "915600",
    "end": "922240"
  },
  {
    "text": "oops sorry i have a recording from",
    "start": "922880",
    "end": "928240"
  },
  {
    "text": "sync and i hope it's going to work the audio is going to work",
    "start": "928399",
    "end": "934639"
  },
  {
    "text": "can you pass the audio from station yeah so extension was introduced as an alpha",
    "start": "934720",
    "end": "939759"
  },
  {
    "text": "feature in kubernetes 1.8 and it went beta in 1.11 and with kubernetes 1.24 it",
    "start": "939759",
    "end": "947440"
  },
  {
    "text": "is finally ga this is a big milestone this feature allows users to edit their",
    "start": "947440",
    "end": "954639"
  },
  {
    "text": "pvc objects and specify new size in pvc spec",
    "start": "954639",
    "end": "959920"
  },
  {
    "text": "and kubernetes will automatically expand the volume and underlying storage backend",
    "start": "959920",
    "end": "965920"
  },
  {
    "text": "and also expand the file system being used by the pod this can happen either online or offline",
    "start": "965920",
    "end": "973279"
  },
  {
    "text": "depending on csi drivers support command has done lots of work to bring this feature to gga",
    "start": "973279",
    "end": "980399"
  },
  {
    "text": "there's also this recovering from resize failure feature mentioned earlier that is also aimed to make this feature",
    "start": "980399",
    "end": "987759"
  },
  {
    "text": "more robust the second feature i want to highlight is csi storage capacity tracking",
    "start": "987759",
    "end": "995680"
  },
  {
    "text": "csi storage capacity tracking was introduced in 1.19 beta in 1.21",
    "start": "995680",
    "end": "1002240"
  },
  {
    "text": "and now it is ga in 1.24 storage capacity tracking at an api for",
    "start": "1002240",
    "end": "1010320"
  },
  {
    "text": "csi driver to report storage capacity and uses that information in the",
    "start": "1010320",
    "end": "1016320"
  },
  {
    "text": "kubernetes scheduler when choosing a node for pod this feature is especially important for",
    "start": "1016320",
    "end": "1023839"
  },
  {
    "text": "local volumes where capacity is bound to each node thanks patrick for driving this feature",
    "start": "1023839",
    "end": "1031038"
  },
  {
    "text": "to ga we also have a beta feature volume",
    "start": "1031039",
    "end": "1036720"
  },
  {
    "text": "populator in 1.24 this is an important feature for the",
    "start": "1036720",
    "end": "1041918"
  },
  {
    "text": "backup and restore use case the volume populated feature allows us",
    "start": "1041919",
    "end": "1047360"
  },
  {
    "text": "to provision a pvc for an external data source such as a backup repository",
    "start": "1047360",
    "end": "1054400"
  },
  {
    "text": "not just for another pvc or for a warning snapshot in addition it allows us to dynamically",
    "start": "1054400",
    "end": "1061600"
  },
  {
    "text": "provision a pvc having volume populated from frontbox backup repository",
    "start": "1061600",
    "end": "1067520"
  },
  {
    "text": "and owner the wait for first consumer volume binding mode during restore to",
    "start": "1067520",
    "end": "1072799"
  },
  {
    "text": "ensure that volume is placed at the right node where pod is scheduled",
    "start": "1072799",
    "end": "1080640"
  },
  {
    "text": "when there is a request to create a pvc with a data source the volume populated controller makes",
    "start": "1080640",
    "end": "1087840"
  },
  {
    "text": "sure pv is created and populated with data from the data source and binds with the pvc",
    "start": "1087840",
    "end": "1096320"
  },
  {
    "text": "to use this feature the any volume data source feature gate needs to be enabled",
    "start": "1096320",
    "end": "1102720"
  },
  {
    "text": "it is better in minor 24 so the feature gate is enabled by default now",
    "start": "1102720",
    "end": "1108880"
  },
  {
    "text": "we also worked on a few other features in 1.24 warning house monitoring feature allows",
    "start": "1108880",
    "end": "1115280"
  },
  {
    "text": "seaside driver to communicate back to kubernetes regarding volume's condition",
    "start": "1115280",
    "end": "1120720"
  },
  {
    "text": "after it is provisioned and used by a pod so that kubernetes can report an event",
    "start": "1120720",
    "end": "1126240"
  },
  {
    "text": "on a pvc or pod if the volume becomes unhealthy",
    "start": "1126240",
    "end": "1131679"
  },
  {
    "text": "it has controller and agent-sized logic this feature was originally introduced",
    "start": "1131679",
    "end": "1136880"
  },
  {
    "text": "in 1.19 in 1.21 the agency logic was moved to tubular",
    "start": "1136880",
    "end": "1142640"
  },
  {
    "text": "in 1.24 we did an update and added volume health into matrix on the kubelet",
    "start": "1142640",
    "end": "1148160"
  },
  {
    "text": "side in 1.24 we also introduced an new alpha",
    "start": "1148160",
    "end": "1154480"
  },
  {
    "text": "feature non-graceful no shutdown this feature allows stave overloads to",
    "start": "1154480",
    "end": "1161600"
  },
  {
    "text": "fade over to a different node after the original is shut down or in a non-recoverable state such as hardware",
    "start": "1161600",
    "end": "1168160"
  },
  {
    "text": "failure or broken os you might have heard about the gracefulness shutdown feature and wonder",
    "start": "1168160",
    "end": "1174559"
  },
  {
    "text": "what is the difference between these two the graceful note shut down can be",
    "start": "1174559",
    "end": "1180320"
  },
  {
    "text": "graceful only if the no shutdown action can be detected by a cubelet ahead of active shutdown",
    "start": "1180320",
    "end": "1186720"
  },
  {
    "text": "however there are cases where no shutdown action may not be detected by cubelet this could happen either because",
    "start": "1186720",
    "end": "1194000"
  },
  {
    "text": "the shutdown command does not trigger the system d inhibitor locks mechanism that cubelet relies on",
    "start": "1194000",
    "end": "1200880"
  },
  {
    "text": "or because of a configuration error to use the non-grease for no shadow",
    "start": "1200880",
    "end": "1206400"
  },
  {
    "text": "feature you must enable the node out of service volume detach feature gate",
    "start": "1206400",
    "end": "1212320"
  },
  {
    "text": "for cube controller manager manually set the out of service thing on",
    "start": "1212320",
    "end": "1217360"
  },
  {
    "text": "shutter node the parts on the shutter node will be detected will be deleted",
    "start": "1217360",
    "end": "1223360"
  },
  {
    "text": "persistent volumes attached to the shadow node will be detached",
    "start": "1223360",
    "end": "1228559"
  },
  {
    "text": "and for stable sets new parts will be created successfully on a different running node",
    "start": "1228559",
    "end": "1235840"
  },
  {
    "text": "and next i want to talk about this new ava feature control volume mode conversion",
    "start": "1236400",
    "end": "1242480"
  },
  {
    "text": "without this feature it is possible to create a pvc from a volume snapshot with",
    "start": "1242480",
    "end": "1247520"
  },
  {
    "text": "a volume mode that is different from original body mode thus could lead to a potential security",
    "start": "1247520",
    "end": "1253520"
  },
  {
    "text": "issue if there is a cve in the kernel on the other hand converting the volume mode from file",
    "start": "1253520",
    "end": "1259679"
  },
  {
    "text": "system to block when creating a pvc front-wheel snapshot is being used by",
    "start": "1259679",
    "end": "1264720"
  },
  {
    "text": "backup vendors for more efficient backups so we introduced this alpha feature that",
    "start": "1264720",
    "end": "1270480"
  },
  {
    "text": "allows kubernetes to check whether the user has the permission to convert the volume mode if not reject the request",
    "start": "1270480",
    "end": "1278400"
  },
  {
    "text": "this way we can support this value use case only for authorized users",
    "start": "1278400",
    "end": "1284799"
  },
  {
    "text": "there are also some deprecations and remote removals in 1.24",
    "start": "1285760",
    "end": "1291280"
  },
  {
    "text": "volume snapshot even if v1 beta 1 api is removed in 1.24",
    "start": "1291280",
    "end": "1297760"
  },
  {
    "text": "please update the volume snapshot we want api as soon as possible",
    "start": "1297760",
    "end": "1303039"
  },
  {
    "text": "csi storage capacity viva beta 1 api is deprecated in 1.24 and it will be",
    "start": "1303039",
    "end": "1308320"
  },
  {
    "text": "removed in future release least field version less than demo u2 is",
    "start": "1308320",
    "end": "1313919"
  },
  {
    "text": "deprecated in 1.24 this is related to the csm migration feature",
    "start": "1313919",
    "end": "1319120"
  },
  {
    "text": "we recommend users to upgrade to sample u2 and higher as soon as possible",
    "start": "1319120",
    "end": "1325919"
  },
  {
    "text": "1.24 was just released and we just started with 1.25 planning",
    "start": "1326640",
    "end": "1332799"
  },
  {
    "text": "i will quickly go over what we're working on in 1.25 there are a few features targeting ga in",
    "start": "1332799",
    "end": "1339440"
  },
  {
    "text": "1.25 the first one is csi ethmo volume",
    "start": "1339440",
    "end": "1344640"
  },
  {
    "text": "for this feature we set the volume type to csi in the pod inline definition",
    "start": "1344640",
    "end": "1350799"
  },
  {
    "text": "and specify the driver name and volume attributes for css driver to support csi ethmoid",
    "start": "1350799",
    "end": "1357120"
  },
  {
    "text": "volumes it must be modified or implemented specifically for this",
    "start": "1357120",
    "end": "1362480"
  },
  {
    "text": "purpose a csi driver is suitable for csi ethmoidal inline warnings",
    "start": "1362480",
    "end": "1369280"
  },
  {
    "text": "if it serves a special purpose and needs custom per volume parameters",
    "start": "1369280",
    "end": "1375280"
  },
  {
    "text": "like drivers that provide secrets to your pod secret store csi driver is a good",
    "start": "1375280",
    "end": "1380880"
  },
  {
    "text": "example a sisa driver is not suitable for csi f more inline volumes when",
    "start": "1380880",
    "end": "1387280"
  },
  {
    "text": "provisioning is not local to the node or when fm volume creation requires",
    "start": "1387280",
    "end": "1393039"
  },
  {
    "text": "volume attributes that should be restricted to an administrator for example parameters in a storage",
    "start": "1393039",
    "end": "1400240"
  },
  {
    "text": "class we are also planning to move local ethmoidal storage capacity isolation",
    "start": "1400240",
    "end": "1406880"
  },
  {
    "text": "feature to ga in 1.25 this feature provides storage usage",
    "start": "1406880",
    "end": "1413919"
  },
  {
    "text": "isolation for shared partitions there is also delegate fs group to css",
    "start": "1413919",
    "end": "1420720"
  },
  {
    "text": "driver instead of kubelet's feature that we are targeting ga in 1.25",
    "start": "1420720",
    "end": "1427200"
  },
  {
    "text": "we are also targeting a few features to beta in 1.25 this includes",
    "start": "1427200",
    "end": "1432799"
  },
  {
    "text": "season warning health recovering from resize failures and",
    "start": "1432799",
    "end": "1438480"
  },
  {
    "text": "non-graceful no shutdown",
    "start": "1438480",
    "end": "1442600"
  },
  {
    "text": "in 1.25 we are also working on a few alpha features",
    "start": "1444320",
    "end": "1450480"
  },
  {
    "text": "cozy is a project we have been working on for several releases now cozy proposes object storage kubernetes",
    "start": "1450480",
    "end": "1458240"
  },
  {
    "text": "apis to support orchestration of objects or operations for kubernetes workloads",
    "start": "1458240",
    "end": "1465120"
  },
  {
    "text": "it also introduces grpc interfaces for object storage providers to red drivers",
    "start": "1465120",
    "end": "1472000"
  },
  {
    "text": "to provision buckets cozy components include a cozy controller manager that binds cozy",
    "start": "1472000",
    "end": "1479279"
  },
  {
    "text": "created buckets to bucket claims this is similar to how the pv controller binds tvs to pvcs",
    "start": "1479279",
    "end": "1488000"
  },
  {
    "text": "cozy components includes a cozy said car that watches cozy kubernetes api objects and calls",
    "start": "1488000",
    "end": "1496240"
  },
  {
    "text": "cozy driver cozy components also includes a cozy driver that implements grpc interfaces",
    "start": "1496240",
    "end": "1503360"
  },
  {
    "text": "to provision buckets we also have",
    "start": "1503360",
    "end": "1508480"
  },
  {
    "text": "the secure linux relabeling with mount options that tries to speed up container startup",
    "start": "1508480",
    "end": "1515120"
  },
  {
    "text": "time and avoid changing each file on the volumes recursively",
    "start": "1515120",
    "end": "1522080"
  },
  {
    "text": "and there's also volume snapshot namespace transfer and provisioning volumes for cross",
    "start": "1522080",
    "end": "1528640"
  },
  {
    "text": "namespace snapshot pvc those features are also targeting alpha in 1.25 release",
    "start": "1528640",
    "end": "1536639"
  },
  {
    "text": "we also have a few features that are in design or being prototyped",
    "start": "1537360",
    "end": "1544159"
  },
  {
    "text": "we also have a cross-seek working group and projects that are listed here",
    "start": "1546320",
    "end": "1552320"
  },
  {
    "text": "i want to mention change block tracking or cbt this is a feature that the data",
    "start": "1552320",
    "end": "1557760"
  },
  {
    "text": "protection working group is actively working on this feature identifies",
    "start": "1557760",
    "end": "1563520"
  },
  {
    "text": "blocks of data that have changed it enables incremental backups to",
    "start": "1563520",
    "end": "1568559"
  },
  {
    "text": "identify changes from the last previous bypass writing only change blocks",
    "start": "1568559",
    "end": "1574480"
  },
  {
    "text": "without cpt backup vendors have to do full backups all the time this is not space efficient",
    "start": "1574480",
    "end": "1580799"
  },
  {
    "text": "takes longer time to finish and needs more bandwidth so we have done a poc of cbt and design",
    "start": "1580799",
    "end": "1589679"
  },
  {
    "text": "is in progress we are trying to target alpha in 1.25",
    "start": "1589679",
    "end": "1596000"
  },
  {
    "text": "there is also runtime assisted mounting of persistent volumes that is a project",
    "start": "1596000",
    "end": "1601600"
  },
  {
    "text": "we co-owned with a signaled we also try to bring to alpha in 1.25",
    "start": "1601600",
    "end": "1609360"
  },
  {
    "text": "another feature is in-use protection or links we co-own that feature with a api",
    "start": "1609360",
    "end": "1616000"
  },
  {
    "text": "machinery this feature proposes a generic way to protect objects from deletion while it",
    "start": "1616000",
    "end": "1623200"
  },
  {
    "text": "is in use we are targeting alpha in 1.25 release",
    "start": "1623200",
    "end": "1629840"
  },
  {
    "text": "so those are all the features that we want to talk about today",
    "start": "1630799",
    "end": "1636480"
  },
  {
    "text": "now let's talk about how to get involved here is a",
    "start": "1636640",
    "end": "1642640"
  },
  {
    "text": "community page that shows a lot of information on how to get started in six storage",
    "start": "1642640",
    "end": "1648159"
  },
  {
    "text": "we have bi-weekly meetings that happens every second thursday at 9 00 a.m pacific time",
    "start": "1648159",
    "end": "1654399"
  },
  {
    "text": "in that meeting we will go over the features that we are working on for every release",
    "start": "1654399",
    "end": "1661440"
  },
  {
    "text": "and we will discuss about designs talk about some prs that need attention",
    "start": "1661440",
    "end": "1667440"
  },
  {
    "text": "so join that meeting and you can learn what we are doing there if there is anything you are interested in you can",
    "start": "1667440",
    "end": "1674559"
  },
  {
    "text": "maybe pick it up and help contributing we also have a mailing list",
    "start": "1674559",
    "end": "1680799"
  },
  {
    "text": "that is shown here so during that main list you will get invites to your meetings there are also slack channel you can",
    "start": "1680799",
    "end": "1686159"
  },
  {
    "text": "also ask questions on the slide channels so that's all we have today thank you",
    "start": "1686159",
    "end": "1692080"
  },
  {
    "text": "all for attending bye-bye thanks jing",
    "start": "1692080",
    "end": "1697360"
  },
  {
    "text": "uh i just noticed there is one thing i forget about 123 we are deprecating flex volumes if you are using flat volumes",
    "start": "1697360",
    "end": "1704640"
  },
  {
    "text": "stop please move to csi so but that's basically what i wanted to cover here",
    "start": "1704640",
    "end": "1712159"
  },
  {
    "text": "uh at the end there are a couple of links for the newbies like uh the landing page storage some concept",
    "start": "1712159",
    "end": "1720559"
  },
  {
    "text": "uh for about tvs pvcs and this kind of stuff so if you are new uh this is a great",
    "start": "1720559",
    "end": "1726880"
  },
  {
    "text": "place to start and i am now open for any questions i'm not sure how much how much time we have we",
    "start": "1726880",
    "end": "1733600"
  },
  {
    "text": "can he said we can go five minutes over which is very nice of them remember wait for the microphone so that your question",
    "start": "1733600",
    "end": "1738799"
  },
  {
    "text": "gets recorded for the recording and who would like to start and thank you jing i think jing is watching um and there were no online",
    "start": "1738799",
    "end": "1745200"
  },
  {
    "text": "questions at the moment but if there are i will flag you questions come on i know this is very talkative group i've known you all well for years especially the",
    "start": "1745200",
    "end": "1752640"
  },
  {
    "text": "front row over here okay here we go hang on",
    "start": "1752640",
    "end": "1758799"
  },
  {
    "text": "so i was wondering about non-graceful shutdown of the node based on what information kcm is able to",
    "start": "1761279",
    "end": "1768399"
  },
  {
    "text": "detect whether the node is shut down or not right now",
    "start": "1768399",
    "end": "1773440"
  },
  {
    "text": "it is very manual process somebody must add special thing to a node that the",
    "start": "1773440",
    "end": "1780159"
  },
  {
    "text": "node is really shut down and also the person must make sure that the node is released and will not come",
    "start": "1780159",
    "end": "1786240"
  },
  {
    "text": "back in unforeseeable feature and we will start predicting stuff of course people are thinking about some",
    "start": "1786240",
    "end": "1792000"
  },
  {
    "text": "automation based on cloud api because based on ipmi or whatever",
    "start": "1792000",
    "end": "1797039"
  },
  {
    "text": "this will come in the future i believe",
    "start": "1797039",
    "end": "1801278"
  },
  {
    "text": "hello join me we are using a very old",
    "start": "1803120",
    "end": "1809039"
  },
  {
    "text": "provider which is the fiber channel it doesn't have any csi provider",
    "start": "1809039",
    "end": "1816159"
  },
  {
    "text": "what will happen with this kind of volumes",
    "start": "1816240",
    "end": "1823159"
  },
  {
    "text": "so if we want to migrate entry volume to csi we must have replacing uh csi driver",
    "start": "1823919",
    "end": "1831919"
  },
  {
    "text": "we don't have one we didn't have a good one for csr for ice castle we don't have",
    "start": "1831919",
    "end": "1837679"
  },
  {
    "text": "a good one for refurbishment so we are not migrating them they will stay in three until there is good replacement",
    "start": "1837679",
    "end": "1843840"
  },
  {
    "text": "at the same time i know that all the storage well not all but most of the storage vendors",
    "start": "1843840",
    "end": "1850399"
  },
  {
    "text": "have their own csi drivers for iscsi nfs",
    "start": "1850399",
    "end": "1856240"
  },
  {
    "text": "and fiber channels so you should start using the",
    "start": "1857360",
    "end": "1862960"
  },
  {
    "text": "vendor driver if you can and uh leave the in three pvs for fiber",
    "start": "1862960",
    "end": "1868080"
  },
  {
    "text": "channel for ice because they just leave them there we are not removing the support until we have the replacement",
    "start": "1868080",
    "end": "1873600"
  },
  {
    "text": "csi driver does it answer your question don't worry",
    "start": "1873600",
    "end": "1880960"
  },
  {
    "text": "other questions okay hang on",
    "start": "1882559",
    "end": "1888000"
  },
  {
    "text": "hi uh are there any plans for supporting look like the real production one host prof csi",
    "start": "1891279",
    "end": "1897360"
  },
  {
    "text": "driver uh who's puff csi driver yeah this header is a test tool",
    "start": "1897360",
    "end": "1904080"
  },
  {
    "text": "it's not anything like production ready yeah i know i wonder if there is any plan or",
    "start": "1904080",
    "end": "1910240"
  },
  {
    "text": "what's the use case i would ask so we are using the local disks for our database",
    "start": "1910240",
    "end": "1916640"
  },
  {
    "text": "and we would like for example to set up some quotas",
    "start": "1916640",
    "end": "1922559"
  },
  {
    "text": "on the local disk right so why can't you use the local static",
    "start": "1923279",
    "end": "1929120"
  },
  {
    "text": "volumes like local volumes api instead of csi or topo lvm or something like that",
    "start": "1929120",
    "end": "1936159"
  },
  {
    "text": "so the topol vm it is something that brings you another layer and we are worried about",
    "start": "1936159",
    "end": "1941360"
  },
  {
    "text": "performance and we require also an xfs partition for our use case",
    "start": "1941360",
    "end": "1947600"
  },
  {
    "text": "so something like a production ready host buff would be really great",
    "start": "1947600",
    "end": "1953360"
  },
  {
    "text": "okay like again it's a test tool we stuff like weird stuff that we need to test",
    "start": "1953360",
    "end": "1959279"
  },
  {
    "text": "yeah i know we use it for testing of csi features so we there are some hooks and this kind of stuff if you don't want",
    "start": "1959279",
    "end": "1964960"
  },
  {
    "text": "that in production but at the local volumes like it was just local volumes they should just work but there is no",
    "start": "1964960",
    "end": "1971440"
  },
  {
    "text": "dynamic provisioner for them well so hold on hold on so either you want dynamic provisioning or and lvm or",
    "start": "1971440",
    "end": "1979200"
  },
  {
    "text": "something that does dynamic provisioning or you want to disks like raw disks",
    "start": "1979200",
    "end": "1984960"
  },
  {
    "text": "you can't dynamically provision raw disks why not",
    "start": "1984960",
    "end": "1991720"
  },
  {
    "text": "maybe somebody like who brings the disc and connects it to the machine right",
    "start": "1991919",
    "end": "1997120"
  },
  {
    "text": "you can call it dynamic provisioner but [Laughter]",
    "start": "1997279",
    "end": "2002480"
  },
  {
    "text": "so but well if you create directories",
    "start": "2002480",
    "end": "2008159"
  },
  {
    "text": "dynamically on some partition that on some partition that is attached to your uh volume and you are able to set quotas",
    "start": "2008159",
    "end": "2014720"
  },
  {
    "text": "on them this is something like it is dynamic provisioning yeah it is but yeah i guess this is a special use",
    "start": "2014720",
    "end": "2021679"
  },
  {
    "text": "case like uh gather some community write a css driver i did i wonder whether",
    "start": "2021679",
    "end": "2028159"
  },
  {
    "text": "i'm duplicating the host puff so yeah we don't have such plans okay",
    "start": "2028159",
    "end": "2034960"
  },
  {
    "text": "i like his idea though it's community gather the community and build it right all right here we go",
    "start": "2037039",
    "end": "2042480"
  },
  {
    "text": "probably have time for like two more questions no i think i because",
    "start": "2042480",
    "end": "2047679"
  },
  {
    "text": "we we are we've just built we just released an open source operator for databases",
    "start": "2047679",
    "end": "2053358"
  },
  {
    "text": "and actually i think that's a use case that we especially on bare metal",
    "start": "2053359",
    "end": "2059440"
  },
  {
    "text": "you can you you might want to explore so",
    "start": "2059440",
    "end": "2065200"
  },
  {
    "text": "yeah two years ago at in san diego i was actually talking asking about i mean the same questions",
    "start": "2065200",
    "end": "2071520"
  },
  {
    "text": "to rook people they took me for crazy you know that time i remember that but",
    "start": "2071520",
    "end": "2076720"
  },
  {
    "text": "i think we can talk more yeah but i think as i mean creating",
    "start": "2076720",
    "end": "2082480"
  },
  {
    "text": "logic i mean um physical volumes and logical volumes on",
    "start": "2082480",
    "end": "2089118"
  },
  {
    "text": "the fly also with separate permissions i think that's that's something that",
    "start": "2089119",
    "end": "2094878"
  },
  {
    "text": "i think could have a use case maybe it's niche but for high-end uh",
    "start": "2094879",
    "end": "2101119"
  },
  {
    "text": "like feel free because yeah yeah okay you have contributed yeah we already contribute to the database so",
    "start": "2101119",
    "end": "2108640"
  },
  {
    "text": "i think if we can get some help on the storage that would be good thank you",
    "start": "2108640",
    "end": "2115119"
  },
  {
    "text": "all right i think that's probably all the time we have but jan can probably stick around for a few minutes if you have any extra questions for him but i",
    "start": "2115359",
    "end": "2121920"
  },
  {
    "text": "just want to say thank you jing we hope you feel better soon thank you young can we give him a hand big round of applause",
    "start": "2121920",
    "end": "2127760"
  },
  {
    "text": "thank you",
    "start": "2127760",
    "end": "2131000"
  }
]