[
  {
    "text": "okay I think we'll get started uh so this talk is on splicing up containers from image security with",
    "start": "0",
    "end": "5819"
  },
  {
    "text": "salsa and guac my name is Ian Lewis I'm a developer",
    "start": "5819",
    "end": "11040"
  },
  {
    "text": "Advocate at Google Cloud I focus mostly on container and supply chain security",
    "start": "11040",
    "end": "16400"
  },
  {
    "text": "and I am currently on loan to the Google open source security team or the ghost",
    "start": "16400",
    "end": "23220"
  },
  {
    "text": "team as it's colloquially only known working on salted tooling",
    "start": "23220",
    "end": "28380"
  },
  {
    "text": "um so I said that this talk is about spicing up container image security but I'll be pretty mild",
    "start": "28380",
    "end": "34280"
  },
  {
    "text": "no hot takes or anything like that um",
    "start": "34280",
    "end": "40160"
  },
  {
    "text": "uh I want to start by I guess uh kind of level setting a little bit um and give a little bit of context for",
    "start": "41340",
    "end": "48000"
  },
  {
    "text": "like why some of the things I'm going to be talking about are important like why we're doing these things in the first place so hopefully this kind of like",
    "start": "48000",
    "end": "54000"
  },
  {
    "text": "gives you an idea of like why some of these things or how some of these things are actually solving problems in the",
    "start": "54000",
    "end": "59820"
  },
  {
    "text": "real world um and uh because it's really easy to get lost in the details but essentially you",
    "start": "59820",
    "end": "68880"
  },
  {
    "text": "know software supply chain security has been a Hot Topic I guess in security space for the last couple years and this",
    "start": "68880",
    "end": "76320"
  },
  {
    "text": "is basically because attackers have shifted their focus towards the software supply chain and part of the root causes",
    "start": "76320",
    "end": "83640"
  },
  {
    "text": "of some of these are that that development in CI systems are essentially um not treated like production or are",
    "start": "83640",
    "end": "91560"
  },
  {
    "text": "not uh you know given the same level of love in terms of like security hardening",
    "start": "91560",
    "end": "98040"
  },
  {
    "text": "as production systems are and so there's been a culture of essentially like you",
    "start": "98040",
    "end": "103079"
  },
  {
    "text": "know developing civilized systems are essentially YOLO and like you know production is where we actually Harden",
    "start": "103079",
    "end": "108540"
  },
  {
    "text": "things um and that's not actually the case because there's uh channels to get",
    "start": "108540",
    "end": "113640"
  },
  {
    "text": "software or malicious software into production through these CI and development systems",
    "start": "113640",
    "end": "120119"
  },
  {
    "text": "um another aspect of this why it's a a good Target",
    "start": "120119",
    "end": "126119"
  },
  {
    "text": "for attackers is that there's lots of places that attackers can insert themselves um apologies for this slide is a little",
    "start": "126119",
    "end": "132060"
  },
  {
    "text": "bit harder to read but like essentially attackers can uh slot themselves in",
    "start": "132060",
    "end": "137099"
  },
  {
    "text": "essentially anywhere in the development life cycle so from source to uh you know",
    "start": "137099",
    "end": "143160"
  },
  {
    "text": "source code the developers development environment through the build systems through to the package managers and",
    "start": "143160",
    "end": "150120"
  },
  {
    "text": "Distribution Systems you use for deployment as well as all the deploy the dependencies that go into the software",
    "start": "150120",
    "end": "155700"
  },
  {
    "text": "that you're building today we'll be like pretty much primarily focusing on the build aspect",
    "start": "155700",
    "end": "161340"
  },
  {
    "text": "of this so like your CI systems and the build systems um and having traceability from there",
    "start": "161340",
    "end": "166680"
  },
  {
    "text": "into your production systems um but it's good to know that there's a little bit of context here for like why",
    "start": "166680",
    "end": "172860"
  },
  {
    "text": "we're uh talking about these things and another like kind of overarching theme",
    "start": "172860",
    "end": "177959"
  },
  {
    "text": "is that there's a lack of information about the the uh software that we",
    "start": "177959",
    "end": "183180"
  },
  {
    "text": "consume so as we develop these things we and we consume software we download it",
    "start": "183180",
    "end": "188700"
  },
  {
    "text": "we run it there's a lack of understanding about like where that software came from uh how it was built",
    "start": "188700",
    "end": "194580"
  },
  {
    "text": "who built it and being able to verify that and make sure that it was actually",
    "start": "194580",
    "end": "200459"
  },
  {
    "text": "built by the people we think it was built by so this comes out in a lot of ways right",
    "start": "200459",
    "end": "207840"
  },
  {
    "text": "so you have something like you know how do you know essentially where your software came from right like we have",
    "start": "207840",
    "end": "214260"
  },
  {
    "text": "we can download artifacts but and we can download them from exam for example from a GitHub repo",
    "start": "214260",
    "end": "220980"
  },
  {
    "text": "um or something like that um but how do you know that that artifact was actually built from the source code in that repo there's no real",
    "start": "220980",
    "end": "227940"
  },
  {
    "text": "guarantees for that and similarly like this is even worse in the cases of where",
    "start": "227940",
    "end": "234000"
  },
  {
    "text": "the software is being distributed on a totally different platform for example Docker Hub or",
    "start": "234000",
    "end": "239760"
  },
  {
    "text": "um you know on GCR or on like other container registries",
    "start": "239760",
    "end": "244920"
  },
  {
    "text": "so for example right like you'd say like is Ian Lewis on Doctor Hub the same Ian Lewis as uh the Ian Lewis on GitHub",
    "start": "244920",
    "end": "253379"
  },
  {
    "text": "there's no real linkage there uh that you can be sure is is something you can verify",
    "start": "253379",
    "end": "259260"
  },
  {
    "text": "um we won't actually solve that particular problem uh but the the that's kind of one of the root root",
    "start": "259260",
    "end": "266400"
  },
  {
    "text": "problems for this but like also like is the actual image say like Ian Lewis Foo",
    "start": "266400",
    "end": "272940"
  },
  {
    "text": "that's on Docker Hub the same or built from the source code that's in the Ian",
    "start": "272940",
    "end": "278160"
  },
  {
    "text": "Lewis Foo repository on on GitHub for example and how do you know that how can",
    "start": "278160",
    "end": "283199"
  },
  {
    "text": "you verify that that's actually the case so essentially like how do you know like",
    "start": "283199",
    "end": "288479"
  },
  {
    "text": "how the sausage is made how like what goes into the food that you're eating uh how do you like kind of maintain some of",
    "start": "288479",
    "end": "294479"
  },
  {
    "text": "that hygiene um that's a pretty difficult thing right so for example let's say like that we",
    "start": "294479",
    "end": "300780"
  },
  {
    "text": "have a software repository right like we have a uh a GitHub repository we have",
    "start": "300780",
    "end": "306600"
  },
  {
    "text": "the salsa and guac demo right a repository here and we want to be able to run this as a",
    "start": "306600",
    "end": "312780"
  },
  {
    "text": "container right and but we're we're going to first take a look at the source code we've kind of found this thing out",
    "start": "312780",
    "end": "318540"
  },
  {
    "text": "there that looks like we're it does what we want it to do right we'll look at the source code here we'll say like okay",
    "start": "318540",
    "end": "324060"
  },
  {
    "text": "this is going to like pronounce some version information right it'll print out the git uh version and uh what tag",
    "start": "324060",
    "end": "331560"
  },
  {
    "text": "it was built from and things like that that's cool that's what I want right and",
    "start": "331560",
    "end": "336840"
  },
  {
    "text": "um we can even kind of look on Docker Hub and see that we found a an image",
    "start": "336840",
    "end": "341880"
  },
  {
    "text": "there that's built by a guy named Ian Lewis and it looks like it's the same",
    "start": "341880",
    "end": "346979"
  },
  {
    "text": "name it's got like a link to the to the GitHub repository and the readme",
    "start": "346979",
    "end": "352979"
  },
  {
    "text": "um you know we can look at the tags the tags like seem to match up we've got like you know the same sorts of tags as",
    "start": "352979",
    "end": "359460"
  },
  {
    "text": "we have on the releases over here um we can actually click on this tag and",
    "start": "359460",
    "end": "365039"
  },
  {
    "text": "see like some of the image layers right if we look at our Docker file you can see like okay this is a a",
    "start": "365039",
    "end": "372960"
  },
  {
    "text": "um a two-step build so we can only see the the second half of this but we can see",
    "start": "372960",
    "end": "378600"
  },
  {
    "text": "that these steps here you know line up with the steps that are uh that are present in the docker image",
    "start": "378600",
    "end": "384840"
  },
  {
    "text": "okay this like pretty much looks good right like this is something that like looks like it's linked to this",
    "start": "384840",
    "end": "391259"
  },
  {
    "text": "repository you know it was built from this repository um and all that but if we actually like",
    "start": "391259",
    "end": "396900"
  },
  {
    "text": "go and try to run this and this is like just a Docker run command to to run it",
    "start": "396900",
    "end": "402360"
  },
  {
    "text": "you know this is essentially like building and running code that's like completely different from the code we",
    "start": "402360",
    "end": "408120"
  },
  {
    "text": "just looked at um and this is because like we have no linkage",
    "start": "408120",
    "end": "414000"
  },
  {
    "text": "between the source code repository and the actual image that was being that we're downloading and running",
    "start": "414000",
    "end": "419819"
  },
  {
    "text": "um so for example that like the Ian Lewis on Docker Hub could be a completely different person like if we",
    "start": "419819",
    "end": "425699"
  },
  {
    "text": "don't verify that also like the the names don't need to necessarily match up",
    "start": "425699",
    "end": "431460"
  },
  {
    "text": "like somebody could just make up their own uh account on Docker Hub",
    "start": "431460",
    "end": "436860"
  },
  {
    "text": "um or for example like the account credentials could be have been leaked or",
    "start": "436860",
    "end": "442319"
  },
  {
    "text": "gotten out on Docker hub for example so um you could have like a personal access",
    "start": "442319",
    "end": "447720"
  },
  {
    "text": "token that was Excel traded or it was compromised and that allowed an attacker",
    "start": "447720",
    "end": "452880"
  },
  {
    "text": "to upload an image so this is kind of an issue that is",
    "start": "452880",
    "end": "458280"
  },
  {
    "text": "fairly pervasive like you're not able to trace back to the source code",
    "start": "458280",
    "end": "464599"
  },
  {
    "text": "so how do we kind of like solve this problem so one of the ways that we solve this problem is by doing something",
    "start": "464639",
    "end": "471419"
  },
  {
    "text": "called the software attestation right so what we're going to do in plain English when we say something like is an",
    "start": "471419",
    "end": "477599"
  },
  {
    "text": "attestation or we attest to something we're basically asserting that this is true right like if I say something like",
    "start": "477599",
    "end": "483780"
  },
  {
    "text": "my name is Ian Lewis like I miss I'm attesting to the fact that my name is Ian Lewis and then ideally I would have",
    "start": "483780",
    "end": "490560"
  },
  {
    "text": "something that verifies or that like that somebody else could use to verify like that I am actually Ian Lewis or",
    "start": "490560",
    "end": "497280"
  },
  {
    "text": "that might the statement that I said is correct right like my passport or like some statement that I've actually signed",
    "start": "497280",
    "end": "502979"
  },
  {
    "text": "with my own signature right so in the case of software what we're going to do is we're going to",
    "start": "502979",
    "end": "508740"
  },
  {
    "text": "actually use some metadata which we'll call provenance that comes from that describes",
    "start": "508740",
    "end": "514740"
  },
  {
    "text": "information about how the software was built and where it was built and we're going to combine that with cryptographic",
    "start": "514740",
    "end": "520979"
  },
  {
    "text": "signing and identity in order to create a software access station so essentially",
    "start": "520979",
    "end": "526020"
  },
  {
    "text": "the identity is going to be either a person or some kind of workload for",
    "start": "526020",
    "end": "531839"
  },
  {
    "text": "example a machine identity what people call a machine identity but essentially this is an abstract identity",
    "start": "531839",
    "end": "539220"
  },
  {
    "text": "and then you combine that the identity then signs this this metadata to say",
    "start": "539220",
    "end": "544500"
  },
  {
    "text": "that it's asserting that it's true and then that attestation can then be",
    "start": "544500",
    "end": "549540"
  },
  {
    "text": "verified by the consumer when they're actually consuming the the software so one of the the big things is that",
    "start": "549540",
    "end": "556560"
  },
  {
    "text": "people say like kind of throw these terms around a lot but like I like to think of attestation as being something",
    "start": "556560",
    "end": "562320"
  },
  {
    "text": "that you can actually verify in a strong way so like it needs to be signed by somebody",
    "start": "562320",
    "end": "567779"
  },
  {
    "text": "um and it needs to make sense right if you don't have an identity that says like hey this is the thing that signed",
    "start": "567779",
    "end": "573060"
  },
  {
    "text": "it like who do you who's attesting to what like that becomes like kind of an issue if you're just providing metadata",
    "start": "573060",
    "end": "579360"
  },
  {
    "text": "for example and you're not signing it or you're just signing stuff but you have no kind of like understanding of what",
    "start": "579360",
    "end": "585180"
  },
  {
    "text": "the identity was or where that came from right so as kind of a building on that",
    "start": "585180",
    "end": "593760"
  },
  {
    "text": "topic right we have the idea of kind of software attestations",
    "start": "593760",
    "end": "599279"
  },
  {
    "text": "um but who's kind of like in the context of building software and deploying software",
    "start": "599279",
    "end": "605160"
  },
  {
    "text": "who's actually um kind of attesting to what and like what are you actually going to be",
    "start": "605160",
    "end": "610380"
  },
  {
    "text": "attesting to um so basically what happens is when you're going to do",
    "start": "610380",
    "end": "616620"
  },
  {
    "text": "a build uh the build system will essentially attest to the fact that that",
    "start": "616620",
    "end": "622019"
  },
  {
    "text": "build was run that it built that uh um or ran that build right so the build",
    "start": "622019",
    "end": "627420"
  },
  {
    "text": "system is essentially some sort of machine Identity or has some sort of machine identity and then that is used",
    "start": "627420",
    "end": "633300"
  },
  {
    "text": "to essentially make the attestation which says that I ran this build I used this",
    "start": "633300",
    "end": "640740"
  },
  {
    "text": "source code I got this artifact out and so when you consume the artifact you can",
    "start": "640740",
    "end": "646380"
  },
  {
    "text": "verify that okay this is the same artifact that was built by this and is described by this out of the station so",
    "start": "646380",
    "end": "652740"
  },
  {
    "text": "you can verify that that artifact was actually built by that build system at a particular time using particular source",
    "start": "652740",
    "end": "659399"
  },
  {
    "text": "code and we make sure that we are cryptographically signing this so that",
    "start": "659399",
    "end": "665519"
  },
  {
    "text": "we can sign so that we can verify this in a very strong way that we actually know we don't have to like do signature",
    "start": "665519",
    "end": "673920"
  },
  {
    "text": "like human level signature comparisons or anything like that it's not a it's a very objective rather than subjective",
    "start": "673920",
    "end": "680279"
  },
  {
    "text": "process um another like issue here is that we need to make sure that the build System",
    "start": "680279",
    "end": "687120"
  },
  {
    "text": "since the build system itself is attesting to running the build that the build itself isn't actually doing the",
    "start": "687120",
    "end": "692579"
  },
  {
    "text": "attestation right so it in the sense that um we need to have the build system",
    "start": "692579",
    "end": "697860"
  },
  {
    "text": "needs to have some level of separation or isolation from the build itself um because effectively you get like a",
    "start": "697860",
    "end": "704579"
  },
  {
    "text": "softer equivalent of a conflict of interest if the build itself is attesting to the fact that it was run",
    "start": "704579",
    "end": "710519"
  },
  {
    "text": "right like it could essentially make up whatever it wants to at that point",
    "start": "710519",
    "end": "716300"
  },
  {
    "text": "right so so the build system it needs to be trustworthy right we need to make sure that we trust the build system",
    "start": "716519",
    "end": "722880"
  },
  {
    "text": "itself um and so if the build itself like could be running any kind of software uh we",
    "start": "722880",
    "end": "728880"
  },
  {
    "text": "need to make sure that the the build system that we trust is actually the thing that's making that a station",
    "start": "728880",
    "end": "735500"
  },
  {
    "text": "and then we're going to combine these the different ideas right together along with Sig store uh and you've heard a lot",
    "start": "737339",
    "end": "745380"
  },
  {
    "text": "about six store I'm sure during the conference I'm not going to go too detailed into it but effectively a",
    "start": "745380",
    "end": "750899"
  },
  {
    "text": "six-store is a a set of tools that allow you that we're going to use for Keeley",
    "start": "750899",
    "end": "756540"
  },
  {
    "text": "signing so um what we do basically here is instead of having using a key that we've like",
    "start": "756540",
    "end": "763620"
  },
  {
    "text": "that we have to manage and that is long-lived and that we have to store somewhere and maintain access to we're",
    "start": "763620",
    "end": "771180"
  },
  {
    "text": "going to use a quote-unquote keyless signing um and what that allows us to do is take",
    "start": "771180",
    "end": "778139"
  },
  {
    "text": "essentially an identity the identity from the uh the machine identity from the build system and use that identity",
    "start": "778139",
    "end": "784860"
  },
  {
    "text": "to Mint a new cert or to use the uh use a certificate Authority in this case",
    "start": "784860",
    "end": "791760"
  },
  {
    "text": "folkio which is the Sig store service to create a new certificate that is",
    "start": "791760",
    "end": "797100"
  },
  {
    "text": "short-lived and is only going to be used by the the build system one time in",
    "start": "797100",
    "end": "802260"
  },
  {
    "text": "order to start to sign our provenance uh so that basically allows us to take",
    "start": "802260",
    "end": "807899"
  },
  {
    "text": "the key sign the provenance and then throw away the private key we don't need it anymore because we're only going to use it one time and then the public key",
    "start": "807899",
    "end": "814920"
  },
  {
    "text": "what we can do is upload that to another service six door service called wrecker uh with uh that we can then allow like",
    "start": "814920",
    "end": "823980"
  },
  {
    "text": "create a log of when the key was created and then allow that allow us to also",
    "start": "823980",
    "end": "831660"
  },
  {
    "text": "retrieve that certificate later when we need to verify so effectively we don't have to really",
    "start": "831660",
    "end": "838380"
  },
  {
    "text": "keep the key around the private key around we can keep the public key we can put that in a log service that we can",
    "start": "838380",
    "end": "844860"
  },
  {
    "text": "then use to pull down and verify it and so we don't actually need to store the keys anywhere in our actual build system",
    "start": "844860",
    "end": "851760"
  },
  {
    "text": "we can essentially be keyless uh in that sense",
    "start": "851760",
    "end": "856800"
  },
  {
    "text": "um so there's a lot uh there's a lot been a lot of talks but like one uh talk by uh",
    "start": "856800",
    "end": "862620"
  },
  {
    "text": "um colleague on the ghost team uh Hayden was really good and so if you are really interested in a much more of a deep dive",
    "start": "862620",
    "end": "869040"
  },
  {
    "text": "into the six-story ecosystem and the services I recommend you look at his uh the recording for his talk",
    "start": "869040",
    "end": "876560"
  },
  {
    "text": "so okay so one now that we've kind of got some of the concepts out of the way",
    "start": "880199",
    "end": "885720"
  },
  {
    "text": "um let's talk a little bit more about the concrete like way that we're going to implement some of the uh",
    "start": "885720",
    "end": "891240"
  },
  {
    "text": "some of these ideas and so what we're going to do is like apply some of these ideas or one",
    "start": "891240",
    "end": "898079"
  },
  {
    "text": "application of these ideas is in the uh supply chain levels of software RTX so",
    "start": "898079",
    "end": "903839"
  },
  {
    "text": "this is the salsa framework and The Souls of framework is essentially a",
    "start": "903839",
    "end": "908880"
  },
  {
    "text": "framework that is used to uh Define a set of requirements or levels that",
    "start": "908880",
    "end": "916079"
  },
  {
    "text": "Define like an increasing set of security requirements so right now it has a like levels defined one through",
    "start": "916079",
    "end": "923160"
  },
  {
    "text": "four which are progressively more secure more hardened levels of security for a",
    "start": "923160",
    "end": "929639"
  },
  {
    "text": "build system um and these are make it so that it's like increment incrementally adoptable",
    "start": "929639",
    "end": "935160"
  },
  {
    "text": "so um each level has a set of requirements and those get more stringent as you go up the the uh the levels",
    "start": "935160",
    "end": "943440"
  },
  {
    "text": "this also said some things like common terminology so when we talk about provenance we kind of know what we're talking about uh when we talk about like",
    "start": "943440",
    "end": "950040"
  },
  {
    "text": "signing and keyless we kind of know what we're talking about like I guess keyless isn't really necessarily defined by salsa but",
    "start": "950040",
    "end": "956339"
  },
  {
    "text": "um it defines a bunch of common uh terminology that can be used for uh for build systems and for supply chain",
    "start": "956339",
    "end": "962519"
  },
  {
    "text": "security um it also as part of the framework defines a provenance format uh which is",
    "start": "962519",
    "end": "970079"
  },
  {
    "text": "essentially just a Json format that you can use to define metadata that describes the build uh and what how the",
    "start": "970079",
    "end": "977880"
  },
  {
    "text": "build occurred Okay so",
    "start": "977880",
    "end": "983760"
  },
  {
    "text": "those are a lot of kind of like abstract Concepts and Frameworks now let's like kind of get down into like actual",
    "start": "983760",
    "end": "989040"
  },
  {
    "text": "implementation of some of these ideas um and so what we've done is we've started a project called the salsa",
    "start": "989040",
    "end": "996420"
  },
  {
    "text": "GitHub generator project and what this is doing is utilizing some of these Concepts like keyless signing uh Salsa",
    "start": "996420",
    "end": "1003920"
  },
  {
    "text": "Frank like salsa provenance and some of the features of GitHub actions in order to achieve isolation",
    "start": "1003920",
    "end": "1010639"
  },
  {
    "text": "for our build between the build system and the build itself",
    "start": "1010639",
    "end": "1016940"
  },
  {
    "text": "and so we have a number of different uh workflows that we've implemented and",
    "start": "1016940",
    "end": "1023120"
  },
  {
    "text": "this is using GitHub actions reusable workflows and the reason why we did that is",
    "start": "1023120",
    "end": "1028400"
  },
  {
    "text": "because this gives us a level of isolation from the actual build part of the system so when you build something",
    "start": "1028400",
    "end": "1034520"
  },
  {
    "text": "you can separate the build uh process and the generation and signing of",
    "start": "1034520",
    "end": "1040040"
  },
  {
    "text": "provenance into separate build jobs that are effectively isolated from each other",
    "start": "1040040",
    "end": "1045620"
  },
  {
    "text": "right to run in different VMS um and so what we have as part of this",
    "start": "1045620",
    "end": "1051799"
  },
  {
    "text": "we have a number of reasonable workflows one is the language agnostic kind of generic generator we call the generic",
    "start": "1051799",
    "end": "1057620"
  },
  {
    "text": "generator this is like a a workflow that you can use to generate provenance uh",
    "start": "1057620",
    "end": "1062780"
  },
  {
    "text": "mostly for file based artifacts so things like binaries things like s-bombs",
    "start": "1062780",
    "end": "1068059"
  },
  {
    "text": "maybe that type of thing we have another workflow called the container generator which we've just uh essentially G8 and",
    "start": "1068059",
    "end": "1075799"
  },
  {
    "text": "so we are basically saying that this is stable um and this is also uh used for container",
    "start": "1075799",
    "end": "1084740"
  },
  {
    "text": "artifacts and this is partly to make it so that it's easier to",
    "start": "1084740",
    "end": "1090260"
  },
  {
    "text": "integrate with all of the other Sig store tooling around containers um as well as like have support for",
    "start": "1090260",
    "end": "1096440"
  },
  {
    "text": "things like uploading the r the uh attestations to The Container registry alongside of the containers themselves",
    "start": "1096440",
    "end": "1102620"
  },
  {
    "text": "so it's easily you can easily get the uh the provenance",
    "start": "1102620",
    "end": "1107780"
  },
  {
    "text": "we also have a go builder for go projects which allows you to build and generate prominence kind of in one step",
    "start": "1107780",
    "end": "1116559"
  },
  {
    "text": "we also have a project called the salsa verifier project which is used to verify the provenance that's generated by these",
    "start": "1117200",
    "end": "1124400"
  },
  {
    "text": "Builders so this uh verifier project is essentially a command line tool which",
    "start": "1124400",
    "end": "1131179"
  },
  {
    "text": "will verify the provenance for trusted builders that um",
    "start": "1131179",
    "end": "1136700"
  },
  {
    "text": "that we essentially have identified as being well built and so some of those",
    "start": "1136700",
    "end": "1142460"
  },
  {
    "text": "are the ones that we've built ourselves and have a full kind of like threat model so like these uh the workflows",
    "start": "1142460",
    "end": "1149299"
  },
  {
    "text": "that we built as well as a Google Cloud build and we're looking to support other uh CI",
    "start": "1149299",
    "end": "1156919"
  },
  {
    "text": "systems as we have more ways of generating provenance safely",
    "start": "1156919",
    "end": "1162380"
  },
  {
    "text": "um and this also allows us to do things like verify the source code is the source code we expect and that it was",
    "start": "1162380",
    "end": "1168440"
  },
  {
    "text": "built with the tags that we expect and for with the builders that we expect et cetera et cetera",
    "start": "1168440",
    "end": "1174799"
  },
  {
    "text": "so let's take a little bit of a look at what that looks like right so let me blow this up a little",
    "start": "1174799",
    "end": "1180559"
  },
  {
    "text": "bit",
    "start": "1180559",
    "end": "1182740"
  },
  {
    "text": "um also one thing that we can do as well with containers as we upload them or we",
    "start": "1185960",
    "end": "1191900"
  },
  {
    "text": "when we generate provenance we can actually look at some of the like inspect the provenance and take a look",
    "start": "1191900",
    "end": "1197480"
  },
  {
    "text": "at what it looks like using some of the um six door based tools so",
    "start": "1197480",
    "end": "1204140"
  },
  {
    "text": "as a way of just kind of looking at at this like let's look at the provenance",
    "start": "1204140",
    "end": "1209480"
  },
  {
    "text": "uh and the address station is for the uh container that I just built or that I",
    "start": "1209480",
    "end": "1214820"
  },
  {
    "text": "just ran that was like a malicious container right so if we look we can use the cosine tree",
    "start": "1214820",
    "end": "1220220"
  },
  {
    "text": "uh command to actually run to actually check the container registry and look for added stations so we can actually",
    "start": "1220220",
    "end": "1226460"
  },
  {
    "text": "notice that the kind of malicious container that was here like actually has an attestation itself right so this",
    "start": "1226460",
    "end": "1233840"
  },
  {
    "text": "is a malicious container even though it had and but it has like an attestation it's just",
    "start": "1233840",
    "end": "1241220"
  },
  {
    "text": "uh when we actually look at what the attestation contains so in this command",
    "start": "1241220",
    "end": "1247179"
  },
  {
    "text": "we're going to see use the cosine download at a station command in order",
    "start": "1247179",
    "end": "1252320"
  },
  {
    "text": "to download from this this image and then we'll look at the internal payload",
    "start": "1252320",
    "end": "1257360"
  },
  {
    "text": "or the internal Json for that was for the prominence that was generated",
    "start": "1257360",
    "end": "1264039"
  },
  {
    "text": "and so this is the the actual Json that was generated um and so we can look at some things",
    "start": "1264799",
    "end": "1270679"
  },
  {
    "text": "like the subject this is a what's called an in Toto statement and this defines",
    "start": "1270679",
    "end": "1276860"
  },
  {
    "text": "you know somewhat of like subject outbreak verb kind of a thing where",
    "start": "1276860",
    "end": "1282080"
  },
  {
    "text": "um but the in this case the object is actually the subject but like what we have here is",
    "start": "1282080",
    "end": "1287360"
  },
  {
    "text": "you know this the subject is the thing we're talking about so in this case the container image",
    "start": "1287360",
    "end": "1292400"
  },
  {
    "text": "um and here's the digest for that and then we can look down and see uh more inside this thing called the",
    "start": "1292400",
    "end": "1298820"
  },
  {
    "text": "predicate we can see the Builder that was used uh to build it as well as information about what source code was",
    "start": "1298820",
    "end": "1305659"
  },
  {
    "text": "used and uh which workflows were used in GitHub",
    "start": "1305659",
    "end": "1311679"
  },
  {
    "text": "and so we can see here that if we look at the actual source code that this came from this is actually not the source",
    "start": "1311720",
    "end": "1318320"
  },
  {
    "text": "code uh repository that we that we expected it to be coming from it's actually a",
    "start": "1318320",
    "end": "1324080"
  },
  {
    "text": "different source code Repository and so we can use things like the uh",
    "start": "1324080",
    "end": "1329780"
  },
  {
    "text": "salsa GitHub generator or the salsa verifier uh in order to run the assault the the",
    "start": "1329780",
    "end": "1338480"
  },
  {
    "text": "verifier to verify this and so we'll look and we'll try we'll say okay let's verify the this particular image and",
    "start": "1338480",
    "end": "1345860"
  },
  {
    "text": "we'll expect that the source code Came From My Salsa and guac demo repository at this particular version",
    "start": "1345860",
    "end": "1352940"
  },
  {
    "text": "right and so if we run that this is duplicated a little bit but uh we can see that when it tries to verify",
    "start": "1352940",
    "end": "1360200"
  },
  {
    "text": "it that the generated uh artifact does not",
    "start": "1360200",
    "end": "1365659"
  },
  {
    "text": "have the expected Source right so the expected source is social block demo but we got uh the fuldia",
    "start": "1365659",
    "end": "1372880"
  },
  {
    "text": "repository so in this case the verification failed because we were expecting a different repository than",
    "start": "1372880",
    "end": "1378440"
  },
  {
    "text": "the one that was actually present in the provenance",
    "start": "1378440",
    "end": "1382960"
  },
  {
    "text": "so if you want to like actually see what it looks like to verify one that actually does verify",
    "start": "1384559",
    "end": "1392179"
  },
  {
    "text": "um effectively like this is going to check the provenance like check the signatures",
    "start": "1392179",
    "end": "1398120"
  },
  {
    "text": "on the provenance and check the the uh the fields in the provenance uh for the source code and the tags in order to",
    "start": "1398120",
    "end": "1405580"
  },
  {
    "text": "verify those um those are correct and if those are correct then we can uh the verification",
    "start": "1405580",
    "end": "1413059"
  },
  {
    "text": "will pass and then we can go on to use the container as we normally would",
    "start": "1413059",
    "end": "1418299"
  },
  {
    "text": "so it's also kind of worth noting that um as part of six door like in using the",
    "start": "1423980",
    "end": "1431360"
  },
  {
    "text": "Sig store tooling um and the uh",
    "start": "1431360",
    "end": "1438440"
  },
  {
    "text": "and salsa provenance we're able to integrate really well with a lot of",
    "start": "1438440",
    "end": "1444440"
  },
  {
    "text": "other tooling that supports six store and solsa provenance so tools like kiverno and the Sig store policy",
    "start": "1444440",
    "end": "1450500"
  },
  {
    "text": "controller are two uh two tools that are used in kubernetes to",
    "start": "1450500",
    "end": "1456559"
  },
  {
    "text": "verify prominence before you actually deploy containers into kubernetes so these are used as what's called an",
    "start": "1456559",
    "end": "1462740"
  },
  {
    "text": "admissions controller so that admissions time when you try to create a pod it will actually verify the provenance for",
    "start": "1462740",
    "end": "1469820"
  },
  {
    "text": "that image against the policy that you've defined inside of the cluster and",
    "start": "1469820",
    "end": "1475159"
  },
  {
    "text": "in our salsa GitHub repo we have a number of examples about how to use those in example policies that you can",
    "start": "1475159",
    "end": "1481460"
  },
  {
    "text": "use to verify containers um so effectively what the admissions",
    "start": "1481460",
    "end": "1487820"
  },
  {
    "text": "controller does is it verifies the prominence and it will reject the pilot outright if the the verification doesn't",
    "start": "1487820",
    "end": "1493880"
  },
  {
    "text": "pass um and these can be used with a salsa",
    "start": "1493880",
    "end": "1499760"
  },
  {
    "text": "GitHub generator because like our uh workflows use this kind of uh use the format the same formats that are",
    "start": "1499760",
    "end": "1506600"
  },
  {
    "text": "accepted by uh by kuverno and sigster uh policy controller",
    "start": "1506600",
    "end": "1512980"
  },
  {
    "text": "okay so now that we've kind of like gone over like how you can kind of generate provenance and uh how you can kind of",
    "start": "1517159",
    "end": "1525320"
  },
  {
    "text": "verify that before you actually run your containers um there's also",
    "start": "1525320",
    "end": "1531020"
  },
  {
    "text": "there's still like we haven't totally solved the problem of you know understanding getting information about",
    "start": "1531020",
    "end": "1537440"
  },
  {
    "text": "the artifacts that we're consuming so the uh so not just like how it was built but",
    "start": "1537440",
    "end": "1544340"
  },
  {
    "text": "like you know what's inside of it um do these things have access Stations don't they like which artifacts do we",
    "start": "1544340",
    "end": "1550220"
  },
  {
    "text": "have um how do they relate to each other uh things like that so one of the tools that we're also",
    "start": "1550220",
    "end": "1557419"
  },
  {
    "text": "developing is a tool called guac which is a kind of graph based tool that is",
    "start": "1557419",
    "end": "1563240"
  },
  {
    "text": "used to kind of ingest metadata and information about artifacts and then allow for querying and understanding and",
    "start": "1563240",
    "end": "1570799"
  },
  {
    "text": "visualization of the relationships between those different types of artifacts um so this is really useful in a number",
    "start": "1570799",
    "end": "1577520"
  },
  {
    "text": "of contexts you know essentially like you have artifacts that are node artifacts and",
    "start": "1577520",
    "end": "1583520"
  },
  {
    "text": "metadata there are nodes and then you have like relationships between those nodes as they're linked so in the graph uh you would have like nodes that are",
    "start": "1583520",
    "end": "1591440"
  },
  {
    "text": "artifacts and metadata and the edges or these relationships that go between these",
    "start": "1591440",
    "end": "1597220"
  },
  {
    "text": "so in our case like so guac can really apply to a lot of different uh",
    "start": "1598400",
    "end": "1604640"
  },
  {
    "text": "areas of discoverability and auditing and so kind",
    "start": "1604640",
    "end": "1610340"
  },
  {
    "text": "of across the life cycle I guess of a uh vulnerability like so from the kind of",
    "start": "1610340",
    "end": "1615919"
  },
  {
    "text": "being reactive uh how are you affected by something that actually happened um to",
    "start": "1615919",
    "end": "1621980"
  },
  {
    "text": "trying to Implement safeguards into uh your system so like adding policies based on this",
    "start": "1621980",
    "end": "1628760"
  },
  {
    "text": "information and then also on the proactive side of like trying to understand the wider set",
    "start": "1628760",
    "end": "1636020"
  },
  {
    "text": "of security implications of like different uh artifacts like which areas or which",
    "start": "1636020",
    "end": "1641960"
  },
  {
    "text": "artifacts are have higher risk profiles which need more attention or need to be prioritized instead in terms of like",
    "start": "1641960",
    "end": "1648740"
  },
  {
    "text": "improving their supply chain security um that sort of thing so I'm going to take like a little bit",
    "start": "1648740",
    "end": "1654980"
  },
  {
    "text": "of a uh and I'll also say that one of the uh folks that is working on the",
    "start": "1654980",
    "end": "1660440"
  },
  {
    "text": "ghost team working on guac uh did a keynote earlier talking a little bit",
    "start": "1660440",
    "end": "1666860"
  },
  {
    "text": "more about guac so I definitely recommend checking out the recording of that as well",
    "start": "1666860",
    "end": "1673000"
  },
  {
    "text": "um but effectively like guac is a system that will ingest",
    "start": "1673100",
    "end": "1679039"
  },
  {
    "text": "um artifacts and give you a graph kind of representation of those artifacts which you can use to kind of visualize",
    "start": "1679039",
    "end": "1684919"
  },
  {
    "text": "and understand the uh the tools right now it's effectively like it's a little",
    "start": "1684919",
    "end": "1689960"
  },
  {
    "text": "bit of an early uh early it's an image development life cycle so right now it's",
    "start": "1689960",
    "end": "1695299"
  },
  {
    "text": "mostly just ingestion and then you can do queries on the database directly so in this case I'm using neo4j to",
    "start": "1695299",
    "end": "1702220"
  },
  {
    "text": "directly query and visualize in a database but in the future there will be much more targeted type of apis for",
    "start": "1702220",
    "end": "1709100"
  },
  {
    "text": "developing policies and things like that um but we can see here here is the",
    "start": "1709100",
    "end": "1714380"
  },
  {
    "text": "here's a set of metadata that I've ingested for the images that I was using earlier so we have our uh the image that",
    "start": "1714380",
    "end": "1722840"
  },
  {
    "text": "we uh that I built that is that is good and then we have the image down here that is uh the malicious container and",
    "start": "1722840",
    "end": "1730460"
  },
  {
    "text": "so like say for example in a reactive context where we figure out that this one malicious container is in there how",
    "start": "1730460",
    "end": "1736640"
  },
  {
    "text": "did that get in there and what what happened um we can actually see that this container has",
    "start": "1736640",
    "end": "1742880"
  },
  {
    "text": "um had was built by the same Builder as our good container and that it has a",
    "start": "1742880",
    "end": "1749600"
  },
  {
    "text": "software attestation so this orange node is an attestation node so we actually built it yeah it was actually built with",
    "start": "1749600",
    "end": "1756740"
  },
  {
    "text": "the same Builder and generated as a station in order to try to fool uh fool us but it was built from a different",
    "start": "1756740",
    "end": "1763399"
  },
  {
    "text": "repository so that's one key knowledge Point here is that we even though uh we",
    "start": "1763399",
    "end": "1770299"
  },
  {
    "text": "could verify the key signature and that it had to add an added station we really still need to check the repository",
    "start": "1770299",
    "end": "1776480"
  },
  {
    "text": "information the provenance metadata itself in order to make sure that that's what we expected was",
    "start": "1776480",
    "end": "1783880"
  },
  {
    "text": "so we can see here a little bit about the relationships here and how this this uh artifact was built these orange these",
    "start": "1784100",
    "end": "1791360"
  },
  {
    "text": "red nodes over here are part of a uh information that was ingested from an s-bomb so this was built from an image a",
    "start": "1791360",
    "end": "1800179"
  },
  {
    "text": "container image and we used the the sift tool to generate an s-bomb which tells",
    "start": "1800179",
    "end": "1805279"
  },
  {
    "text": "us the different uh golang packages these are not quite as relevant for for our in the this reactive use case but we",
    "start": "1805279",
    "end": "1812360"
  },
  {
    "text": "can see that uh they have uh at least one kind of common dependency within the",
    "start": "1812360",
    "end": "1818659"
  },
  {
    "text": "two uh the two containers",
    "start": "1818659",
    "end": "1823700"
  },
  {
    "text": "so there you can kind of see like an overall set of um relationships between",
    "start": "1823700",
    "end": "1830600"
  },
  {
    "text": "the different types of metadata about our artifact",
    "start": "1830600",
    "end": "1835419"
  },
  {
    "text": "so in we just used like kind of more reactive context for for guac but in",
    "start": "1838340",
    "end": "1844039"
  },
  {
    "text": "reality what we want to be doing is like you know quote-unquote shifting left I'll maybe take a a second or two to let",
    "start": "1844039",
    "end": "1851720"
  },
  {
    "text": "you guys like check off your bingo cards um but uh really what we want to be doing is uh",
    "start": "1851720",
    "end": "1858679"
  },
  {
    "text": "using this in a much more proactive context be able to like look at the",
    "start": "1858679",
    "end": "1863899"
  },
  {
    "text": "metadata in a much more proactive way and better understanding overall our um",
    "start": "1863899",
    "end": "1869720"
  },
  {
    "text": "you know this the situation of our supply chain uh and our um the artifacts that we're building and",
    "start": "1869720",
    "end": "1875960"
  },
  {
    "text": "using uh",
    "start": "1875960",
    "end": "1880720"
  },
  {
    "text": "so with that I'll um end and I think I have a couple of just a couple of minutes for questions",
    "start": "1881000",
    "end": "1886820"
  },
  {
    "text": "if they're already but we have a blog post that we released uh I think today",
    "start": "1886820",
    "end": "1892100"
  },
  {
    "text": "uh on the uh GA in the container workflow if you want to find out more",
    "start": "1892100",
    "end": "1898100"
  },
  {
    "text": "about salsa you can check that out at salsa.dev our GitHub generator and",
    "start": "1898100",
    "end": "1903380"
  },
  {
    "text": "social verifier repost are on GitHub under the salsa framework organization and guac is under the glocksec",
    "start": "1903380",
    "end": "1909740"
  },
  {
    "text": "organization on GitHub as well um I'm Ian Lewis on GitHub and on E M",
    "start": "1909740",
    "end": "1916460"
  },
  {
    "text": "Lewis on Twitter so if you're inclined you can hit me up later as well",
    "start": "1916460",
    "end": "1921679"
  },
  {
    "text": "so thank you all [Applause]",
    "start": "1921679",
    "end": "1929419"
  },
  {
    "text": "I have about three minutes for questions so maybe one or two if there are any",
    "start": "1929419",
    "end": "1935140"
  },
  {
    "text": "yes",
    "start": "1936380",
    "end": "1938860"
  },
  {
    "text": "so the question was like there's a lot of GitHub on the slides is there an equivalent project for gitlab uh the",
    "start": "1941720",
    "end": "1948860"
  },
  {
    "text": "there is uh we are working with gitlab to uh to implement some of these things like right now some of the issues around",
    "start": "1948860",
    "end": "1955580"
  },
  {
    "text": "on GitHub are around isolation So like um we are kind of Lucky in a sense on",
    "start": "1955580",
    "end": "1962539"
  },
  {
    "text": "GitHub that we are able to create these generators um using uh features of GitHub actions",
    "start": "1962539",
    "end": "1970820"
  },
  {
    "text": "that allow us to isolate that from the actual build um but with gitlab there's not really a",
    "start": "1970820",
    "end": "1976760"
  },
  {
    "text": "way to do that quite yet and so we're working with them to actually like be able to generate the problem safely",
    "start": "1976760",
    "end": "1983360"
  },
  {
    "text": "and then be able to like do essentially the same things we're doing on GitHub as",
    "start": "1983360",
    "end": "1988460"
  },
  {
    "text": "well so yes we are thinking about that and working with them on that yeah",
    "start": "1988460",
    "end": "1994539"
  },
  {
    "text": "any other questions yes",
    "start": "1994940",
    "end": "2002220"
  },
  {
    "text": "like a developer right so the question is",
    "start": "2013200",
    "end": "2020440"
  },
  {
    "text": "um as a user of of a CI system or a smaller CI system uh is this something",
    "start": "2020440",
    "end": "2025779"
  },
  {
    "text": "that we have to rely on the CI system itself to implement or is this something that we can build ourselves",
    "start": "2025779",
    "end": "2032500"
  },
  {
    "text": "um this is really something that usually the build system itself would have to kind of implement",
    "start": "2032500",
    "end": "2038440"
  },
  {
    "text": "um or that ideally it would Implement uh but um in the case of GitHub we're like kind",
    "start": "2038440",
    "end": "2044860"
  },
  {
    "text": "of using uh a uh a feature of the system in order to",
    "start": "2044860",
    "end": "2050919"
  },
  {
    "text": "like build it ourselves but we are kind of essentially working with other like build tools like uh",
    "start": "2050919",
    "end": "2058720"
  },
  {
    "text": "like build kite in order to be able to implement these things but there's still a lot of that is still a work in profit",
    "start": "2058720",
    "end": "2065138"
  },
  {
    "text": "address on other CI systems particularly with regard to the isolation that we mentioned about gitlab and also about",
    "start": "2065139",
    "end": "2072280"
  },
  {
    "text": "around the identity portion so the uh being able to have an identity provider",
    "start": "2072280",
    "end": "2078339"
  },
  {
    "text": "so an oidc provider for example for providers like build kite and gitlab in",
    "start": "2078339",
    "end": "2086378"
  },
  {
    "text": "order to provide the identity piece that allows us to sign and do keyless signing",
    "start": "2086379",
    "end": "2091800"
  },
  {
    "text": "one more the red shirt here",
    "start": "2094659",
    "end": "2098760"
  },
  {
    "text": "okay so the question was like did the salsa verifier like walk a tree of like",
    "start": "2111339",
    "end": "2116619"
  },
  {
    "text": "dependencies in order to verify the dependencies as well um in our case like what we're doing is essentially just verifying the",
    "start": "2116619",
    "end": "2122740"
  },
  {
    "text": "provenance that was generated for that image instead of doing any sort of dependency walking",
    "start": "2122740",
    "end": "2128500"
  },
  {
    "text": "um that's something that we can explore in the future if we have if the artifact itself has a way of like uh defining or",
    "start": "2128500",
    "end": "2136000"
  },
  {
    "text": "if we have a way of figuring out what those dependencies are um right now like you know the only way",
    "start": "2136000",
    "end": "2142240"
  },
  {
    "text": "we do that is like if we were explicitly provided an s-bomb or we like tried to generate one ourselves but we don't",
    "start": "2142240",
    "end": "2148480"
  },
  {
    "text": "really necessarily want to uh",
    "start": "2148480",
    "end": "2152859"
  },
  {
    "text": "trust the artifact itself to provide us with those dependencies",
    "start": "2153700",
    "end": "2158740"
  },
  {
    "text": "we'd like to be able to get those like kind of out of band but yeah that's something that's an area",
    "start": "2158740",
    "end": "2164920"
  },
  {
    "text": "that we kind of like want to think about and explore well thanks everybody for coming",
    "start": "2164920",
    "end": "2171579"
  },
  {
    "text": "um I'll be sticking around so if you have other questions and you want to talk to me in person then I'll I'll be",
    "start": "2171579",
    "end": "2176680"
  },
  {
    "text": "available thanks a lot [Applause]",
    "start": "2176680",
    "end": "2184150"
  }
]