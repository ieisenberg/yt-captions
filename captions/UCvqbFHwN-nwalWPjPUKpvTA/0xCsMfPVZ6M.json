[
  {
    "text": "yeah I'm uh Aaron and this is my colleague Nina and we are going to be given the talk on developing a mental",
    "start": "4799",
    "end": "12000"
  },
  {
    "text": "model of istio and so at uh at solar organization",
    "start": "12000",
    "end": "19080"
  },
  {
    "text": "um there are you know a number of people who are contributors to istio or leaders like we are on definitely in the user",
    "start": "19080",
    "end": "26640"
  },
  {
    "text": "camp and so this kind of Chronicles uh our journey for understanding you know",
    "start": "26640",
    "end": "31980"
  },
  {
    "text": "how how ambient this deal works and how to interact with it",
    "start": "31980",
    "end": "37320"
  },
  {
    "text": "um so yeah let's get started so um yeah so we will um so in this talk",
    "start": "37320",
    "end": "43980"
  },
  {
    "text": "uh yeah we'll talk about our journey of how we learned um the differences in istio's API so",
    "start": "43980",
    "end": "51899"
  },
  {
    "text": "ambient is not a drop-in replacement so there are differences in how uh the API",
    "start": "51899",
    "end": "60180"
  },
  {
    "text": "is used inside car versus ambient mode and this was a difficult thing for us to",
    "start": "60180",
    "end": "65880"
  },
  {
    "text": "wrap our heads around and so it kind of helped to dig a little bit deeper and",
    "start": "65880",
    "end": "72000"
  },
  {
    "text": "understand what's happening under the hood in order to develop that mental",
    "start": "72000",
    "end": "77580"
  },
  {
    "text": "model of exactly why why we're seeing what we're seeing and like how to",
    "start": "77580",
    "end": "82979"
  },
  {
    "text": "effectively use ambient so that hopefully you should get that out of this talk um so I'm going to start here just",
    "start": "82979",
    "end": "89460"
  },
  {
    "text": "thinking about some of the abstractions of kubernetes and we're going to focus on the service abstraction since it's",
    "start": "89460",
    "end": "94560"
  },
  {
    "text": "the most relevant for service mesh and so these abstractions can be implemented",
    "start": "94560",
    "end": "99659"
  },
  {
    "text": "in a number of ways under the hood uh and we'll use that to motivate our",
    "start": "99659",
    "end": "105299"
  },
  {
    "text": "journey so we start off with a service in plain kubernetes and even here there",
    "start": "105299",
    "end": "111299"
  },
  {
    "text": "are many different ways to implement it but this is one that I think we're all familiar with and so",
    "start": "111299",
    "end": "117899"
  },
  {
    "text": "um what I'm doing here is I'm actually breaking the abstraction a little bit and so how many of you have programmed",
    "start": "117899",
    "end": "124320"
  },
  {
    "text": "with the go programming language yes okay so when learning that",
    "start": "124320",
    "end": "129599"
  },
  {
    "text": "um learning how interfaces work and learning how slices work uh the way my",
    "start": "129599",
    "end": "135720"
  },
  {
    "text": "mind works I kind of had to think of them as like the structures that they were under the hood like an interface",
    "start": "135720",
    "end": "142260"
  },
  {
    "text": "being like a pointer to data and then a pointer to like type information stuff I don't really care the details but but",
    "start": "142260",
    "end": "148620"
  },
  {
    "text": "just knowing that kind of explained some of the weird behaviors that that that go",
    "start": "148620",
    "end": "155760"
  },
  {
    "text": "can can uh that you can see and go so this is kind of similar like knowing what's under the hood can explain a lot",
    "start": "155760",
    "end": "162420"
  },
  {
    "text": "so here we go with with plain old kubernetes and when you have a service uh you typically interact with it via a",
    "start": "162420",
    "end": "171780"
  },
  {
    "text": "um a URL right which is written According to some convention and the idea is that your application will hit",
    "start": "171780",
    "end": "179340"
  },
  {
    "text": "this URL and kubernetes will route it correctly so a service is an abstraction",
    "start": "179340",
    "end": "184920"
  },
  {
    "text": "for a number of PODS and you don't care how many pods there are or what's happening to them you just wanted to go",
    "start": "184920",
    "end": "191640"
  },
  {
    "text": "to one of those pods and kubernetes delivers right and so the way that works",
    "start": "191640",
    "end": "197099"
  },
  {
    "text": "under the hood for example is by writing this URL that follows a convention so",
    "start": "197099",
    "end": "202440"
  },
  {
    "text": "it's like the service name dot namespace.svc.cluster.local or whatever",
    "start": "202440",
    "end": "208620"
  },
  {
    "text": "the the you know domain is your application makes a DNS request and",
    "start": "208620",
    "end": "215760"
  },
  {
    "text": "kubernetes has a DNS server which answers that request and it returns a",
    "start": "215760",
    "end": "221220"
  },
  {
    "text": "fake IP address so called a VIP or virtual IP right and so there's nothing",
    "start": "221220",
    "end": "227879"
  },
  {
    "text": "in the cluster that actually has this address like no pod no node it's just a",
    "start": "227879",
    "end": "233159"
  },
  {
    "text": "value it's a value that kubernetes picked in order to associate this this value with with a service right so you",
    "start": "233159",
    "end": "241319"
  },
  {
    "text": "you get this this fake IP back and then your Container makes a request and this",
    "start": "241319",
    "end": "246780"
  },
  {
    "text": "is where the magic happens under the hood so there's another component called kubeproxy which configures the Linux",
    "start": "246780",
    "end": "253019"
  },
  {
    "text": "kernel to take that fake IP address and then do something interesting with it in this case we load balance it across a",
    "start": "253019",
    "end": "260400"
  },
  {
    "text": "number of services so some complexity under hood but just having a general high level idea of what's Happening",
    "start": "260400",
    "end": "267479"
  },
  {
    "text": "under the hood is helpful here now let's introduce istio with sidecars into the mix so the picture looks fairly",
    "start": "267479",
    "end": "275340"
  },
  {
    "text": "similar but there are some key differences number one our pods grew so",
    "start": "275340",
    "end": "280440"
  },
  {
    "text": "we have our application container in it but we also have a few other containers um one of which is pilot agent and Envoy",
    "start": "280440",
    "end": "288060"
  },
  {
    "text": "but they serve some of the similar roles so you make a request so the URL hasn't",
    "start": "288060",
    "end": "294300"
  },
  {
    "text": "changed but this time you go to um istio's DNS you can enable this the",
    "start": "294300",
    "end": "300060"
  },
  {
    "text": "DNS capture in istio so this is istio's notion of what DNS should be and so it",
    "start": "300060",
    "end": "305699"
  },
  {
    "text": "can override what kubernetes thinks and this is actually a rather powerful thing but in this case we're just looking at",
    "start": "305699",
    "end": "311699"
  },
  {
    "text": "the surface abstraction it doesn't so let's say it Returns the same virtual IP and then some the same magic happens",
    "start": "311699",
    "end": "318240"
  },
  {
    "text": "under the hood with iptables rules and the traffic goes somewhere else so",
    "start": "318240",
    "end": "323280"
  },
  {
    "text": "it goes to a kind of proxy so instead of going to cube proxy which load balances it it goes to an Envoy instance this is",
    "start": "323280",
    "end": "331020"
  },
  {
    "text": "the sidecar that's in the Pod and that odd voy instance does a similar thing it",
    "start": "331020",
    "end": "337020"
  },
  {
    "text": "load balances that request and picks a pod to send the request to uh the key",
    "start": "337020",
    "end": "342240"
  },
  {
    "text": "one key difference here is that it just doesn't send the traffic um unaltered it wraps it in an mtls",
    "start": "342240",
    "end": "349800"
  },
  {
    "text": "connection so a secure connection to the other pod right so it's encrypted it reaches the envoy instance the side",
    "start": "349800",
    "end": "357060"
  },
  {
    "text": "car in the other pod is decrypted and once it is decrypted it is sent to the",
    "start": "357060",
    "end": "362580"
  },
  {
    "text": "uh to the destination container so we added some some value add here but it's",
    "start": "362580",
    "end": "369720"
  },
  {
    "text": "fundamentally the same pattern and it uses the same abstraction so it's it's not all that different okay",
    "start": "369720",
    "end": "376080"
  },
  {
    "text": "but now we can push the boundaries of that abstraction let's say we want to have this URL Linux foundation.org baz",
    "start": "376080",
    "end": "383699"
  },
  {
    "text": "right and we want a container in our our mesh whenever it makes a request to that",
    "start": "383699",
    "end": "391380"
  },
  {
    "text": "URL we don't want it to go to like whatever the public DNS is for that and through an Ingress Gateway what have you",
    "start": "391380",
    "end": "397979"
  },
  {
    "text": "we want to Short Circuit that and just send that to the Pod that will that will answer it you know we just want that to",
    "start": "397979",
    "end": "403139"
  },
  {
    "text": "stay in the mesh and be simple so that's something you could do in istio and it's a very similar path but you have a",
    "start": "403139",
    "end": "410160"
  },
  {
    "text": "different URL the request goes to DNS and maybe it returns like a different a different",
    "start": "410160",
    "end": "416819"
  },
  {
    "text": "virtual IP but ultimately at that point sdo does the the same thing as before",
    "start": "416819",
    "end": "422220"
  },
  {
    "text": "and the request goes to it's it's it's it's uh it's intended destination",
    "start": "422220",
    "end": "427740"
  },
  {
    "text": "but this starts to like start to break out of this this this the service abstraction because that's not",
    "start": "427740",
    "end": "433500"
  },
  {
    "text": "really something that you can easily do with with the with the service",
    "start": "433500",
    "end": "438620"
  },
  {
    "text": "the service custom resource in kubernetes and then we can add things to this like let's say that there are 20",
    "start": "438620",
    "end": "446400"
  },
  {
    "text": "pods that that um that like Implement slash baz and let's say another path uh",
    "start": "446400",
    "end": "453120"
  },
  {
    "text": "Foo or something has a different set of PODS and we want to Route traffic to you",
    "start": "453120",
    "end": "458520"
  },
  {
    "text": "know different uh you know different sets of PODS based upon the path and so that's like a form of routing and that",
    "start": "458520",
    "end": "464940"
  },
  {
    "text": "definitely brings us out of the the comfort zone of the service abstraction in kubernetes",
    "start": "464940",
    "end": "470340"
  },
  {
    "text": "so this is where we get into uh istio's API itself",
    "start": "470340",
    "end": "475620"
  },
  {
    "text": "so like these are some selected uh resources in istio's API in this talk",
    "start": "475620",
    "end": "481020"
  },
  {
    "text": "we're going to focus about on Virtual service and authorization policy um but when thinking about istio's API",
    "start": "481020",
    "end": "489000"
  },
  {
    "text": "it is very helpful to consider where this API is being implemented what proxy",
    "start": "489000",
    "end": "495120"
  },
  {
    "text": "is this happening in so these on on one side the virtual service destination",
    "start": "495120",
    "end": "500340"
  },
  {
    "text": "Rule and service entry these all happen in the envoy instance of the Pod that is",
    "start": "500340",
    "end": "505740"
  },
  {
    "text": "making the request the client or consumer sidecar there's various different terminologies that are used so",
    "start": "505740",
    "end": "512580"
  },
  {
    "text": "like that routing decision okay based upon based upon the path or maybe maybe",
    "start": "512580",
    "end": "517680"
  },
  {
    "text": "you're doing a canary rollout or or like blue green testing and have and shifting",
    "start": "517680",
    "end": "523200"
  },
  {
    "text": "traffic to some percentage like that in in the sidecar based mesh that happens",
    "start": "523200",
    "end": "529160"
  },
  {
    "text": "that happens on the requester side in their Envoy instance and it's doing something you know more complex than",
    "start": "529160",
    "end": "535320"
  },
  {
    "text": "just plain old load balancing now as far as the destination pod the",
    "start": "535320",
    "end": "540660"
  },
  {
    "text": "the server or producer Sidecar these apis peer authentication authorization policy request",
    "start": "540660",
    "end": "546779"
  },
  {
    "text": "authentication are kind of inherently um inherently happen on the server side so",
    "start": "546779",
    "end": "553260"
  },
  {
    "text": "like we'll be focusing on authorization policy uh you know it makes it makes",
    "start": "553260",
    "end": "558959"
  },
  {
    "text": "sense for the the sidecar of a pod to determine who gets who gets in it that's",
    "start": "558959",
    "end": "565140"
  },
  {
    "text": "something you would not delegate to the requester so",
    "start": "565140",
    "end": "571380"
  },
  {
    "text": "with sidecar based istio this is kind of your mental model of the API and where",
    "start": "571380",
    "end": "576899"
  },
  {
    "text": "it's implemented and all is good so ambient changes things a little bit",
    "start": "576899",
    "end": "582480"
  },
  {
    "text": "and you know with with with istio uh with with sidecar base you know the envoy",
    "start": "582480",
    "end": "589140"
  },
  {
    "text": "proxy is kind of doing both uh L4 level like like just just IP based and uh",
    "start": "589140",
    "end": "595320"
  },
  {
    "text": "layer seven um processing in the in the envoy instance istio",
    "start": "595320",
    "end": "601260"
  },
  {
    "text": "Blitz that apart so it has a secure overlay layer which is implemented",
    "start": "601260",
    "end": "607380"
  },
  {
    "text": "through Z tunnels which basically is responsible for point-to-point security and not a whole lot much else and this",
    "start": "607380",
    "end": "615060"
  },
  {
    "text": "is this is kind of I think that's where the name ambient came from I mean it's just around these East tunnels are just",
    "start": "615060",
    "end": "621000"
  },
  {
    "text": "around and you know the magic happens under the hood and you get secure communication point to point between",
    "start": "621000",
    "end": "627300"
  },
  {
    "text": "pods and the mesh but layer 7 is where they really start to differ and layer seven is where you do policy that",
    "start": "627300",
    "end": "634800"
  },
  {
    "text": "requires knowing about things like what HTTP is what an HTTP method is what a",
    "start": "634800",
    "end": "640860"
  },
  {
    "text": "path is and all that sort of stuff so like routing is an example but let's go",
    "start": "640860",
    "end": "645959"
  },
  {
    "text": "back to our service abstraction right so here we have um here we have our service abstraction",
    "start": "645959",
    "end": "652500"
  },
  {
    "text": "in an ambient and fundamentally it doesn't look all that",
    "start": "652500",
    "end": "658019"
  },
  {
    "text": "different from the others the pods shrunk we no longer have sidecars in it but we have a DNS we have a virtual IP",
    "start": "658019",
    "end": "665459"
  },
  {
    "text": "we have some IP tables rules or something which is directing these fake uh IPS to to to uh to a z tunnel okay",
    "start": "665459",
    "end": "674459"
  },
  {
    "text": "and the Z tunnel is what does the load balancing and encryption it does a",
    "start": "674459",
    "end": "681360"
  },
  {
    "text": "slightly different spin on mtls called h-bone um I think it's HTTP based overlay",
    "start": "681360",
    "end": "687480"
  },
  {
    "text": "Network and I don't remember what the E is so let's just say it's excellent so",
    "start": "687480",
    "end": "693420"
  },
  {
    "text": "um so yeah so so basically it's it's it's it's it's essentially just tunneling the traffic still mtls",
    "start": "693420",
    "end": "699959"
  },
  {
    "text": "encrypted and it goes to a corresponding Z tunnel and then to the application there are some differences here in the",
    "start": "699959",
    "end": "705959"
  },
  {
    "text": "sense that in uh in ambient Z tunnels are a Daemon set so they exist on each node but as far as our mental model is",
    "start": "705959",
    "end": "713279"
  },
  {
    "text": "concerned like we don't care all that much like the Z tunnel like you could be could be a sidecar for All We Care could",
    "start": "713279",
    "end": "720000"
  },
  {
    "text": "be like who like who cares where it is it basically is responsible for um for providing this point to point",
    "start": "720000",
    "end": "727380"
  },
  {
    "text": "um secure communication it does not do any L7 stuff and you know we really",
    "start": "727380",
    "end": "732480"
  },
  {
    "text": "don't need to think about it all that much or at least as far as like our mental model is concerned okay now when",
    "start": "732480",
    "end": "739800"
  },
  {
    "text": "we think about L7 that's when things really start to get different so the sidecar model up in that corner we have",
    "start": "739800",
    "end": "746040"
  },
  {
    "text": "one pod communicating to another and we see the client has virtual service destination rule Etc",
    "start": "746040",
    "end": "753360"
  },
  {
    "text": "um that's the old sidecar model now with ambient you have to explicitly opt into",
    "start": "753360",
    "end": "759420"
  },
  {
    "text": "L7 and furthermore that occurs",
    "start": "759420",
    "end": "764880"
  },
  {
    "text": "only on the server side so there is no sidecar on the client side so if you",
    "start": "764880",
    "end": "770940"
  },
  {
    "text": "look at the traffic it goes from your pod to a z tunnel and then if the destination has a",
    "start": "770940",
    "end": "778920"
  },
  {
    "text": "waypoint it goes through that Waypoint policy is enacted and then it goes on to the pod",
    "start": "778920",
    "end": "784500"
  },
  {
    "text": "so if you look at the API that's implemented in the Waypoint we see",
    "start": "784500",
    "end": "789720"
  },
  {
    "text": "authorization policy peer authentication request authentication everything that previously was on the server side but",
    "start": "789720",
    "end": "797160"
  },
  {
    "text": "now we also see virtual service and destination rule on the server side but they're not exactly the same okay",
    "start": "797160",
    "end": "805079"
  },
  {
    "text": "they they um are scoped differently so the",
    "start": "805079",
    "end": "810420"
  },
  {
    "text": "Waypoint in ambient is scoped through a service account or a namespace so it's",
    "start": "810420",
    "end": "816300"
  },
  {
    "text": "like a given app this is my Waypoint I deployed it it is it is it is in my",
    "start": "816300",
    "end": "822899"
  },
  {
    "text": "security umbrella or such it's in my name space and I control it I'm the only one that controls policy for it and all",
    "start": "822899",
    "end": "830519"
  },
  {
    "text": "traffic has to go through my Waypoint and so that does Place some limits on",
    "start": "830519",
    "end": "836700"
  },
  {
    "text": "what you can do with virtual service or destination rule right but here's the analogy that like really worked for me",
    "start": "836700",
    "end": "843899"
  },
  {
    "text": "at least when trying to figure out um we're trying to think of this thing so like imagine if some of the patterns",
    "start": "843899",
    "end": "850079"
  },
  {
    "text": "we see in service mesh happen in the outside world right now obviously it doesn't but let's let's just think about",
    "start": "850079",
    "end": "855420"
  },
  {
    "text": "it this way so we have Lars and Anna here okay the top scenario largest scenario is",
    "start": "855420",
    "end": "862680"
  },
  {
    "text": "similar to the sidecar World in istio and in that world largest computer would",
    "start": "862680",
    "end": "869459"
  },
  {
    "text": "need to know would need to know stuff like routing rules like they would need to know that if you're going to cncf.org",
    "start": "869459",
    "end": "876060"
  },
  {
    "text": "project spire there it would need to know the possible endpoints for it and",
    "start": "876060",
    "end": "881760"
  },
  {
    "text": "like maybe other policy like maybe there's a canary rollout going on so we would need to know to send 90 of its",
    "start": "881760",
    "end": "887760"
  },
  {
    "text": "traffic here 10 there like all the routing decisions are made on the client side right",
    "start": "887760",
    "end": "894300"
  },
  {
    "text": "but that that really can't work in the real world right because like an internet scale like you would you know",
    "start": "894300",
    "end": "900779"
  },
  {
    "text": "you would have almost infinite policy that that the clients would uh need to",
    "start": "900779",
    "end": "906660"
  },
  {
    "text": "uh need to implement and like there'd be a lot of a lot of trust thrown around like you would uh need to uh believe",
    "start": "906660",
    "end": "914220"
  },
  {
    "text": "that the clients are are are enacting this policy so this this wouldn't work",
    "start": "914220",
    "end": "919260"
  },
  {
    "text": "in the real world in a constrained environment like a mesh yes real world no so the real world is more like the",
    "start": "919260",
    "end": "925560"
  },
  {
    "text": "lower picture Anna she um follows a URL and it goes through an",
    "start": "925560",
    "end": "931320"
  },
  {
    "text": "Ingress and that Ingress then knows the the various",
    "start": "931320",
    "end": "936540"
  },
  {
    "text": "um policy routing rules Etc it knows that the slash Spire endpoint will load",
    "start": "936540",
    "end": "942720"
  },
  {
    "text": "balance between two endpoints and it's in a canary rollout and ninety percent",
    "start": "942720",
    "end": "947940"
  },
  {
    "text": "of the traffic will be going here so you know that analogy is kind of powerful for understanding you know what",
    "start": "947940",
    "end": "953940"
  },
  {
    "text": "happens in in in in Ambience so in the sidecar based API you can create a",
    "start": "953940",
    "end": "959699"
  },
  {
    "text": "virtual destination and and say okay I want you to route your traffic in this",
    "start": "959699",
    "end": "965339"
  },
  {
    "text": "way and where you is any other part in the mesh any other namespace okay so",
    "start": "965339",
    "end": "971519"
  },
  {
    "text": "like so me you know can can tell you what to do",
    "start": "971519",
    "end": "977820"
  },
  {
    "text": "um in the ambient way if you opt into a waypoint I mean it is",
    "start": "977820",
    "end": "985019"
  },
  {
    "text": "basically an Ingress and it's something that you control and you create policy in it and any traffic",
    "start": "985019",
    "end": "992399"
  },
  {
    "text": "that comes to you goes through your Waypoint and you are solely responsible for the policy that is in that Waypoint",
    "start": "992399",
    "end": "1000160"
  },
  {
    "text": "and like there are various aspects of the of the existing istio API that like",
    "start": "1000160",
    "end": "1006320"
  },
  {
    "text": "that don't that don't work in that model like export 2 for example is a field on Virtual service that's that's the one",
    "start": "1006320",
    "end": "1012980"
  },
  {
    "text": "that tells like hey you namespace you have to Route it this way Etc so like this is this is for for me at",
    "start": "1012980",
    "end": "1019579"
  },
  {
    "text": "least this was kind of the the key analogy or Insight which explains which explains a number of things like this",
    "start": "1019579",
    "end": "1024860"
  },
  {
    "text": "also explains why istio decided to use the Gateway API because that's basically what you're doing you're essentially",
    "start": "1024860",
    "end": "1030620"
  },
  {
    "text": "creating an Ingress to a service a gateway to a service as such so it's it's a it's a really it's a really good",
    "start": "1030620",
    "end": "1036438"
  },
  {
    "text": "fit but you know I think in general it it uh you know it helps to understand",
    "start": "1036439",
    "end": "1044418"
  },
  {
    "text": "given a service mesh and an API where is it implemented like find the proxies and",
    "start": "1044419",
    "end": "1050840"
  },
  {
    "text": "and figure out as a client-side server side and then like once you go through",
    "start": "1050840",
    "end": "1056179"
  },
  {
    "text": "that in your head you can develop a mental model of how things work so for like you know",
    "start": "1056179",
    "end": "1061940"
  },
  {
    "text": "for sidecar for ambient for something like Linker D for something like cilia",
    "start": "1061940",
    "end": "1067340"
  },
  {
    "text": "mesh when that's out you know that type of thinking for us at least was very Illuminating for",
    "start": "1067340",
    "end": "1074200"
  },
  {
    "text": "understanding how to um how to use the API of the mesh and why",
    "start": "1074200",
    "end": "1080660"
  },
  {
    "text": "the API of istio differs a little bit between",
    "start": "1080660",
    "end": "1085820"
  },
  {
    "text": "sidecar and ambient so if this is a little bit cerebral Nina's going to take it with some",
    "start": "1085820",
    "end": "1092059"
  },
  {
    "text": "concrete examples and and show like some of these differences in action and we have a a couple of local VMS running and",
    "start": "1092059",
    "end": "1100280"
  },
  {
    "text": "we'll give a little demo here yes um yeah let's so all of this hopefully",
    "start": "1100280",
    "end": "1105380"
  },
  {
    "text": "the demogods are with me today um but I have uh so let's reload or",
    "start": "1105380",
    "end": "1110720"
  },
  {
    "text": "bracelet um I have a repo if you want to follow along or do it on your own later which walks through the examples I'm going to",
    "start": "1110720",
    "end": "1116539"
  },
  {
    "text": "do today um and if everything falls apart we also have a recording so uh without further",
    "start": "1116539",
    "end": "1121760"
  },
  {
    "text": "Ado let's get started so like Aaron mentioned we have two VMS uh both running to a kind cluster each so on the",
    "start": "1121760",
    "end": "1128360"
  },
  {
    "text": "left here I have my side card cluster and this is running uh istio in sidecar",
    "start": "1128360",
    "end": "1133580"
  },
  {
    "text": "mode so if you notice uh the example I'm going to use is the classic steel one so book info and I have everything in book",
    "start": "1133580",
    "end": "1141140"
  },
  {
    "text": "info deployed and all of these have uh a sidecar right so the uh istio proxy here",
    "start": "1141140",
    "end": "1148280"
  },
  {
    "text": "has been injected already and it's injected for everything in book info and then looking here I also have istio D so",
    "start": "1148280",
    "end": "1155720"
  },
  {
    "text": "that's that's my control plane that's running then if you take a look at cluster 2 we",
    "start": "1155720",
    "end": "1161240"
  },
  {
    "text": "have uh ambient installed here so in ambient mode the first thing you might notice is that there are no sidecars so",
    "start": "1161240",
    "end": "1168559"
  },
  {
    "text": "the only things I have for everything in book info is my curl container and the actual book Info app",
    "start": "1168559",
    "end": "1175880"
  },
  {
    "text": "um cool and then uh in this example we actually have two nodes so on the first",
    "start": "1175880",
    "end": "1180980"
  },
  {
    "text": "node you might notice uh because the Z tunnel is running on a Daemon set each node has its own Z tunnel",
    "start": "1180980",
    "end": "1187640"
  },
  {
    "text": "um and uh the book info has been split across those like that",
    "start": "1187640",
    "end": "1192980"
  },
  {
    "text": "cool um so Now demo time so hopefully uh",
    "start": "1192980",
    "end": "1199220"
  },
  {
    "text": "Sidecar I don't know and then uh ambient",
    "start": "1199220",
    "end": "1205760"
  },
  {
    "text": "so I scripted it up so I don't have any Butterfingers um but again like you can look at the steps on the the GitHub repo uh is that",
    "start": "1205760",
    "end": "1213140"
  },
  {
    "text": "fun too small let's let's make it a little bigger okay cool",
    "start": "1213140",
    "end": "1219440"
  },
  {
    "text": "so um what I'm going to do is apply the same policies in both clusters and see what happens so the first thing we're",
    "start": "1219440",
    "end": "1225200"
  },
  {
    "text": "going to do is apply a layer 7 authorization policy",
    "start": "1225200",
    "end": "1230240"
  },
  {
    "text": "so the layer 7 authorization policy we're applying in both clusters is completely identical and it's only going",
    "start": "1230240",
    "end": "1235580"
  },
  {
    "text": "to allow product page to hit ratings so let's apply that now",
    "start": "1235580",
    "end": "1241720"
  },
  {
    "text": "apply this one so um the first uh what we'll run in",
    "start": "1245240",
    "end": "1250460"
  },
  {
    "text": "parallel um we're gonna send our first request from product page and hit ratings so",
    "start": "1250460",
    "end": "1256220"
  },
  {
    "text": "this should go through because The L4 policy will allow it so we're going to run that and run that ambient and we get",
    "start": "1256220",
    "end": "1262039"
  },
  {
    "text": "the same response um and now we're going to do the same thing but um you know try curling from a pod that",
    "start": "1262039",
    "end": "1269660"
  },
  {
    "text": "doesn't have permissions right so we're going in this case from reviews which isn't allowed two ratings so let's see",
    "start": "1269660",
    "end": "1276919"
  },
  {
    "text": "what happens so in the sidecar mode again our back axis denied for three in the ambient mode we get this command",
    "start": "1276919",
    "end": "1284840"
  },
  {
    "text": "terminated with exit code 56. so what's happening here if we go back to our",
    "start": "1284840",
    "end": "1291440"
  },
  {
    "text": "ambient cluster you can notice that we don't have any waypoints right now so all of this access policy is getting",
    "start": "1291440",
    "end": "1296960"
  },
  {
    "text": "enforced at the Z Tunnel level so that's why you're getting the different response in sidecar versus ambient",
    "start": "1296960",
    "end": "1303860"
  },
  {
    "text": "cool okay so now let's uh let's go up to level level seven layer seven",
    "start": "1303860",
    "end": "1310340"
  },
  {
    "text": "so uh the policy we're gonna apply first is going to be completely identical so we're going to try matching on the",
    "start": "1310340",
    "end": "1316760"
  },
  {
    "text": "ratings app and then um we're gonna try adding a header match",
    "start": "1316760",
    "end": "1322220"
  },
  {
    "text": "so if istio is cool is present in the header and we're coming from product page we allow the traffic if it's not",
    "start": "1322220",
    "end": "1329240"
  },
  {
    "text": "then we block it so let's apply it",
    "start": "1329240",
    "end": "1333640"
  },
  {
    "text": "so we applied it applied it there and now let's send some traffic so remember right now in ambient",
    "start": "1337280",
    "end": "1344179"
  },
  {
    "text": "we don't have a waypoint so there's no way of actually enforcing that this header is there but in sidecar we don't really care",
    "start": "1344179",
    "end": "1350360"
  },
  {
    "text": "because the sidecar is injected to everything so um if we run the sidecar request first",
    "start": "1350360",
    "end": "1355880"
  },
  {
    "text": "going from product page to uh reviews if the header passes",
    "start": "1355880",
    "end": "1361039"
  },
  {
    "text": "and then when we go from a product page with the incorrect header this should be",
    "start": "1361039",
    "end": "1366080"
  },
  {
    "text": "blocked so we see that our back ax is denied again but in ambient if we go from",
    "start": "1366080",
    "end": "1371419"
  },
  {
    "text": "product page to ratings with no waypoints we get the same response we're blocked so before when we didn't have",
    "start": "1371419",
    "end": "1377840"
  },
  {
    "text": "the header we were allowing that traffic now because we can't enforce it we're blocking it so and you can see the same",
    "start": "1377840",
    "end": "1385280"
  },
  {
    "text": "thing when we do a a similar experiment going from reviews to ratings you're",
    "start": "1385280",
    "end": "1391340"
  },
  {
    "text": "still being blocked there as well all right and then the last thing that we want to check on the sidecar case is",
    "start": "1391340",
    "end": "1397400"
  },
  {
    "text": "can we still go from reviews uh so is this still being enforced the principles",
    "start": "1397400",
    "end": "1402679"
  },
  {
    "text": "um we're going from uh reviews to ratings and then having the correct header and then this is also denied so",
    "start": "1402679",
    "end": "1408440"
  },
  {
    "text": "let's fix the ambient case the way we we're going to fix this is uh we have to change first we have to apply our",
    "start": "1408440",
    "end": "1413840"
  },
  {
    "text": "Gateway so um the uh we're going to use the Gateway API to create a waypoint so",
    "start": "1413840",
    "end": "1419059"
  },
  {
    "text": "the Waypoint is going to be the fault policy enforcing Point that's going to enforce our L7 authorization policy so",
    "start": "1419059",
    "end": "1425960"
  },
  {
    "text": "let me apply that and you can notice that the one I'm going to use for this example is per",
    "start": "1425960",
    "end": "1431000"
  },
  {
    "text": "service account so I'm going to select the book info ratings service account and scope the Waypoint to that",
    "start": "1431000",
    "end": "1437360"
  },
  {
    "text": "cool okay and then the second thing we have to do is I will first let's check that the Waypoint came up because",
    "start": "1437360",
    "end": "1443539"
  },
  {
    "text": "um cool so we we looks like we have our Waypoint already running um since five seconds ago",
    "start": "1443539",
    "end": "1449299"
  },
  {
    "text": "um but if we go back to canines and look at the Waypoint yaml um we can see that we're actually in our authorization",
    "start": "1449299",
    "end": "1455360"
  },
  {
    "text": "policy we're going to select the Waypoint and apply the L7 authorization policy there instead of using the app",
    "start": "1455360",
    "end": "1460640"
  },
  {
    "text": "ratings um like pod labels right so we're going to use this istio Gateway uh label to apply a policy",
    "start": "1460640",
    "end": "1468140"
  },
  {
    "text": "let's apply it so this is the policy we're gonna apply",
    "start": "1468140",
    "end": "1473780"
  },
  {
    "text": "again like I mentioned we're switching the the label here",
    "start": "1473780",
    "end": "1478240"
  },
  {
    "text": "cool and then let's uh let's own some traffic so let's do the same three tests we did",
    "start": "1481520",
    "end": "1487400"
  },
  {
    "text": "before product page two uh ratings with the correct header first so this should go through right",
    "start": "1487400",
    "end": "1493400"
  },
  {
    "text": "so we get our ratings response and now we're gonna do the same thing uh product page uh to ratings with the bad header",
    "start": "1493400",
    "end": "1500299"
  },
  {
    "text": "so not it's you we get our back denied so this is again",
    "start": "1500299",
    "end": "1505640"
  },
  {
    "text": "like you can notice that uh now that's going through the Waypoint we actually get the 403 response it's not the um the",
    "start": "1505640",
    "end": "1511460"
  },
  {
    "text": "exit error that we're getting earlier okay last test uh let's go from reviews to ratings with the correct header just",
    "start": "1511460",
    "end": "1518960"
  },
  {
    "text": "to send you check that nothing broke and we're denied again cool so the next thing I'm going to show",
    "start": "1518960",
    "end": "1525320"
  },
  {
    "text": "is how the authorization policy and an L7 policy works together so I'm going to",
    "start": "1525320",
    "end": "1530480"
  },
  {
    "text": "create a virtual uh service and again it's going to be the same virtual service in both the sidecar case and the",
    "start": "1530480",
    "end": "1536000"
  },
  {
    "text": "ambient case because the API hasn't changed right so uh we're going to create a virtual service for Ratings",
    "start": "1536000",
    "end": "1541460"
  },
  {
    "text": "where we're going to add a fault injection uh to return 14 when um we hit",
    "start": "1541460",
    "end": "1547220"
  },
  {
    "text": "ratings so let's apply that",
    "start": "1547220",
    "end": "1551260"
  },
  {
    "text": "and we already have the ratings Waypoint right so the Waypoint is what's going to be enforcing it in the ambient case",
    "start": "1554120",
    "end": "1559820"
  },
  {
    "text": "so applied it now let's send some traffic so the first thing we're going to do is",
    "start": "1559820",
    "end": "1565159"
  },
  {
    "text": "same test again product page to ratings with the correct header",
    "start": "1565159",
    "end": "1570260"
  },
  {
    "text": "um and in both cases we're going to get the correct response um now we're going to do the same thing",
    "start": "1570260",
    "end": "1577279"
  },
  {
    "text": "but go from reviews to ratings um with the yeah the correct header too but it doesn't really matter for that",
    "start": "1577279",
    "end": "1584840"
  },
  {
    "text": "um so what do you think is going to happen in the sidecar case how many people think",
    "start": "1584840",
    "end": "1589940"
  },
  {
    "text": "we're going to get fault filter report no how many people think we're gonna get the rbac",
    "start": "1589940",
    "end": "1596299"
  },
  {
    "text": "okay let's uh let's try it so in the sidecar case we get fault filter abort",
    "start": "1596299",
    "end": "1602120"
  },
  {
    "text": "but in the ambient case we get our back axis denied",
    "start": "1602120",
    "end": "1607220"
  },
  {
    "text": "so the reason this is happening is what Aaron explained instead of having the sidecar do the routing or apply the um",
    "start": "1607220",
    "end": "1614059"
  },
  {
    "text": "you know fault injection policies and things like that on the client side now we have a waypoint that Scopes it to the",
    "start": "1614059",
    "end": "1619640"
  },
  {
    "text": "service account so you don't have a sidecar which applies the full injection before you hit the server",
    "start": "1619640",
    "end": "1626659"
  },
  {
    "text": "um side side cart now all of that is getting applied at the Waypoint so this is why you're getting two different responses in both cases",
    "start": "1626659",
    "end": "1634520"
  },
  {
    "text": "all right the last example we're going to run through is uh we're gonna do a traffic shift so um we're gonna apply a",
    "start": "1634520",
    "end": "1641480"
  },
  {
    "text": "new virtual service to reviews and reviews is going to go uh 90 to V1 and then 10 to V2",
    "start": "1641480",
    "end": "1648679"
  },
  {
    "text": "so let's go apply that",
    "start": "1648679",
    "end": "1652539"
  },
  {
    "text": "and uh the other thing we have to do in order",
    "start": "1655900",
    "end": "1660980"
  },
  {
    "text": "to get this to work is we have to apply destination rule so the destination rule is going to select which subsets we care",
    "start": "1660980",
    "end": "1668179"
  },
  {
    "text": "about on the service so at the same destination rule in both cases again",
    "start": "1668179",
    "end": "1673880"
  },
  {
    "text": "so we're going to apply that",
    "start": "1673880",
    "end": "1677380"
  },
  {
    "text": "and the extra thing we have to do in the ambient case is we have to create a waypoint for reviews because the last",
    "start": "1681700",
    "end": "1687740"
  },
  {
    "text": "Gateway we created the Waypoint with was only scope 2 the ratings service account",
    "start": "1687740",
    "end": "1693320"
  },
  {
    "text": "right so we need a new one for reviews so uh same idea as before we're going to",
    "start": "1693320",
    "end": "1701900"
  },
  {
    "text": "use the um the service count uh here uh to only create a waypoint for reviews",
    "start": "1701900",
    "end": "1708140"
  },
  {
    "text": "um and let's apply that",
    "start": "1708140",
    "end": "1711460"
  },
  {
    "text": "cool and then uh let's double check that the Waypoint actually got created",
    "start": "1714100",
    "end": "1719539"
  },
  {
    "text": "so it looks like now we have a new uh Waypoint for reviews running and now let's actually send some traffic",
    "start": "1719539",
    "end": "1726440"
  },
  {
    "text": "so um I have um Prometheus support forwarded here on",
    "start": "1726440",
    "end": "1731900"
  },
  {
    "text": "90 90 for ambient and then I have a Prometheus Port forwarded here for the",
    "start": "1731900",
    "end": "1737179"
  },
  {
    "text": "sidecar case on 1991. so let's uh go go to Prometheus",
    "start": "1737179",
    "end": "1743840"
  },
  {
    "text": "copy that over and we're gonna see uh how many istio total requests that we're getting from going to reviews V1 versus",
    "start": "1743840",
    "end": "1751159"
  },
  {
    "text": "the total so when I execute this it might take a couple minutes to get uh yeah so um like we",
    "start": "1751159",
    "end": "1759679"
  },
  {
    "text": "looked at the the policy before 10 is going to V1 or to V2 and then 90 should",
    "start": "1759679",
    "end": "1765200"
  },
  {
    "text": "be going to V1 so if I execute that that's about it's hard to see let me zoom in uh about 90 going to V1",
    "start": "1765200",
    "end": "1772700"
  },
  {
    "text": "and then uh 10 to V2 and then in ambient the same thing so V1",
    "start": "1772700",
    "end": "1779840"
  },
  {
    "text": "um uh about 90 and then the same thing for v2 about 10 percent",
    "start": "1779840",
    "end": "1786020"
  },
  {
    "text": "so uh that's all I had to show demo wise um I encourage you to try it out on your",
    "start": "1786020",
    "end": "1791240"
  },
  {
    "text": "own um this is based on the getting started with istio ambient and uses the 118 Alpha version there and it has",
    "start": "1791240",
    "end": "1799580"
  },
  {
    "text": "instructions on how to set everything up and you know set up a local client cluster yourself",
    "start": "1799580",
    "end": "1805100"
  },
  {
    "text": "so uh without further Ado let's go back to the slides",
    "start": "1805100",
    "end": "1810500"
  },
  {
    "text": "is it I think all we have left is a is the QR code for feedback yes well I think we also have a we're",
    "start": "1810500",
    "end": "1816919"
  },
  {
    "text": "promoting our uh panel so uh getting sort of istio and then if you're",
    "start": "1816919",
    "end": "1822440"
  },
  {
    "text": "interested in asking more questions there's a panel coming up um about the",
    "start": "1822440",
    "end": "1827539"
  },
  {
    "text": "future of service mesh so feel free to also attend that but I think we have some time for questions right yeah I",
    "start": "1827539",
    "end": "1834020"
  },
  {
    "text": "think so great yeah so uh are there any questions",
    "start": "1834020",
    "end": "1839300"
  },
  {
    "text": "[Applause]",
    "start": "1839300",
    "end": "1849199"
  },
  {
    "text": "oh there's a question there uh is there some logistical necessity for mics oh",
    "start": "1851600",
    "end": "1857179"
  },
  {
    "text": "there's Mike's right there I think standing in the hall for the",
    "start": "1857179",
    "end": "1862340"
  },
  {
    "text": "or how about I'll run around",
    "start": "1862340",
    "end": "1865658"
  },
  {
    "text": "okay tunnel slide you show the IP table shoes probably you are there some are",
    "start": "1869840",
    "end": "1877340"
  },
  {
    "text": "configuring the nut entries for the services and redirecting to traffic",
    "start": "1877340",
    "end": "1885159"
  },
  {
    "text": "yeah right and so like it's the Z tunnel that knows whether a waypoint exists and",
    "start": "1886000",
    "end": "1892399"
  },
  {
    "text": "whether it needs to uh send traffic to the um to the Waypoint but also like",
    "start": "1892399",
    "end": "1897980"
  },
  {
    "text": "even IP tables is kind of an implementation detail because like there's different ways you can implement",
    "start": "1897980",
    "end": "1903440"
  },
  {
    "text": "it you can do that part in ebpf you could do like you could do it in in it tables that just I think that's the",
    "start": "1903440",
    "end": "1908720"
  },
  {
    "text": "first implementation that's there if the underlying CNA is helium with evpf and",
    "start": "1908720",
    "end": "1914679"
  },
  {
    "text": "replacement does it still also work on it uh it's so it's the so I guess the",
    "start": "1914679",
    "end": "1921140"
  },
  {
    "text": "question is like um could it go to Waypoint if you have like another another cni or something in",
    "start": "1921140",
    "end": "1926659"
  },
  {
    "text": "there so the thing is that um so the Z tunnel is is specifically the component",
    "start": "1926659",
    "end": "1931880"
  },
  {
    "text": "that has the logic in it that um that so it knows whether there's a waypoint and",
    "start": "1931880",
    "end": "1938779"
  },
  {
    "text": "it knows if traffic needs to be directed to that Waypoint so if something else uh",
    "start": "1938779",
    "end": "1944360"
  },
  {
    "text": "is like it exists that can have such logic that in theory like you you know",
    "start": "1944360",
    "end": "1949700"
  },
  {
    "text": "that component could send it to the Waypoint instead but as far as like where ambient is right now Z tunnel is",
    "start": "1949700",
    "end": "1955820"
  },
  {
    "text": "right now the one thing that that that knows that logic and knows where like if it needs to send the request to another",
    "start": "1955820",
    "end": "1962059"
  },
  {
    "text": "Z tunnel or to a waypoint so there's actually a number of of opportunities for for implementing it differently or",
    "start": "1962059",
    "end": "1969020"
  },
  {
    "text": "like putting other twists on it but it's still the early days and so like this so",
    "start": "1969020",
    "end": "1974179"
  },
  {
    "text": "what I described is you know how it exists now um",
    "start": "1974179",
    "end": "1979220"
  },
  {
    "text": "so I think yeah we have a few more minutes",
    "start": "1979220",
    "end": "1985299"
  },
  {
    "text": "just a request to go this line with the GitHub yeah I have a question when when do you",
    "start": "1990980",
    "end": "1998000"
  },
  {
    "text": "how do how do you choose where to scope the Waypoint service account or the",
    "start": "1998000",
    "end": "2003279"
  },
  {
    "text": "namespace ah yes well I mean that is so as it",
    "start": "2003279",
    "end": "2008679"
  },
  {
    "text": "stands now you are allowed to choose both and I think so it depends upon the layer of the level of granularity you",
    "start": "2008679",
    "end": "2015700"
  },
  {
    "text": "want in some cases there's really no distinction between them like you have one surface account for a namespace and",
    "start": "2015700",
    "end": "2022720"
  },
  {
    "text": "so like a namespace one would be sufficient so it's it's in those cases where you have a namespace and for",
    "start": "2022720",
    "end": "2028179"
  },
  {
    "text": "whatever reason you you do have uh pods from a number of service accounts in them that's just an additional tool for",
    "start": "2028179",
    "end": "2034480"
  },
  {
    "text": "providing the appropriate granularity the the underlying concept is that the",
    "start": "2034480",
    "end": "2041260"
  },
  {
    "text": "um is that like the granularity of so",
    "start": "2041260",
    "end": "2046539"
  },
  {
    "text": "thinking of the Waypoint as a kind of Ingress um I mean you are kind of at the whim of",
    "start": "2046539",
    "end": "2052419"
  },
  {
    "text": "the granularity that it defines for that for that Waypoint and the tools that are given to you right now are namespace or",
    "start": "2052419",
    "end": "2060339"
  },
  {
    "text": "service account but you know who knows where we'll go in the future if you would choose for example this the",
    "start": "2060339",
    "end": "2066280"
  },
  {
    "text": "namespace but you have service accounts and you want to enforce policies in between the service accounts can you do",
    "start": "2066280",
    "end": "2072280"
  },
  {
    "text": "that still well yeah you mean you would need to deploy the waypoints uh with with service account granularity for that and",
    "start": "2072280",
    "end": "2079780"
  },
  {
    "text": "I don't know I don't recall if any of our workshops have that as as an example node okay but but no they do with book",
    "start": "2079780",
    "end": "2087580"
  },
  {
    "text": "info because um there is we do have an example with book info and different service accounts",
    "start": "2087580",
    "end": "2093040"
  },
  {
    "text": "for product page ratings and reviews and so like in that scenario",
    "start": "2093040",
    "end": "2098140"
  },
  {
    "text": "um maybe we'll be we'll be in touch because we did we did at our booth we did have an instruct Workshop that I",
    "start": "2098140",
    "end": "2104020"
  },
  {
    "text": "think showed that scenario where you do have uh multiple apps with different service accounts in the same namespace",
    "start": "2104020",
    "end": "2110920"
  },
  {
    "text": "and enforcing policy between them okay yeah okay but because if you would",
    "start": "2110920",
    "end": "2116500"
  },
  {
    "text": "deploy a per service account and you would have in every single service service account it would be the same as",
    "start": "2116500",
    "end": "2122200"
  },
  {
    "text": "like kind of side scarf because you'll have the same amount of waypoints as like well not necessarily yeah you I",
    "start": "2122200",
    "end": "2127599"
  },
  {
    "text": "mean you might I mean I mean it's it's decoupled because like",
    "start": "2127599",
    "end": "2132640"
  },
  {
    "text": "if you have one service per service account then yes it it reduces to something that is very similar to",
    "start": "2132640",
    "end": "2138460"
  },
  {
    "text": "sidecars but in in the case where you have like 20 pods or so that yeah that",
    "start": "2138460",
    "end": "2143680"
  },
  {
    "text": "are behind that service yeah that's where you you know and imagine the ability to scale the Waypoint differently like suppose that one",
    "start": "2143680",
    "end": "2150280"
  },
  {
    "text": "Waypoint will serve 50 pods just fine or maybe in your use case you're heavily L7 biased and so like you have to configure",
    "start": "2150280",
    "end": "2157540"
  },
  {
    "text": "it so that like maybe five waypoints can serve like a pool of 50 pods you you",
    "start": "2157540",
    "end": "2163720"
  },
  {
    "text": "have the ability to dial in the the the you know what what um the the amount of",
    "start": "2163720",
    "end": "2168820"
  },
  {
    "text": "uh uh waypoints to pods which can totally vary based upon situation in the example",
    "start": "2168820",
    "end": "2177180"
  },
  {
    "text": "like all the virtual services are the things doing the routing and applying the uh the authorization like you know",
    "start": "2179740",
    "end": "2185140"
  },
  {
    "text": "you're applying it to ratings in that example so I could have shown the same example and just created a Gateway for",
    "start": "2185140",
    "end": "2192099"
  },
  {
    "text": "the namespace and it would have worked in that case but it just depends on like your the way you want to scale right",
    "start": "2192099",
    "end": "2197380"
  },
  {
    "text": "okay thanks hi is there still still time to ask a",
    "start": "2197380",
    "end": "2202839"
  },
  {
    "text": "question so yeah yeah thanks for your job first of all I really really enjoyed it um my question is with iseo and psychar",
    "start": "2202839",
    "end": "2209440"
  },
  {
    "text": "mode usually if you have some kind of batch processing in kubernetes like a job you have to wait for the cycle to",
    "start": "2209440",
    "end": "2216099"
  },
  {
    "text": "come up um before you can actually do your thing and make requests um is that something I still have to",
    "start": "2216099",
    "end": "2222280"
  },
  {
    "text": "care for with the ambient mesh or is it so fast that I well so so what happens is that",
    "start": "2222280",
    "end": "2228760"
  },
  {
    "text": "um you know in in ambient you label name spaces so so the question is like do you",
    "start": "2228760",
    "end": "2233800"
  },
  {
    "text": "do you need to wait like with sidecars you kind of need to wait for the side cars to start before before they can",
    "start": "2233800",
    "end": "2239500"
  },
  {
    "text": "start an acting policy in Waypoint because um because the Z tunnels are because the",
    "start": "2239500",
    "end": "2246700"
  },
  {
    "text": "waypoints already exist um it's actually very very fast uh Loop",
    "start": "2246700",
    "end": "2252640"
  },
  {
    "text": "because you you you label a namespace for ambient and then like the cni is",
    "start": "2252640",
    "end": "2257740"
  },
  {
    "text": "constantly watching for pods that appear and disappear and you know basically at",
    "start": "2257740",
    "end": "2263560"
  },
  {
    "text": "the point that a pod comes into existence and you know gets its networking all set up then you know",
    "start": "2263560",
    "end": "2270339"
  },
  {
    "text": "the redirection to the Z tunnel which is already up um or waypoints if the Z tunnel needs to",
    "start": "2270339",
    "end": "2276640"
  },
  {
    "text": "route two waypoints that's that's all um that's all already there so it's really just that initial step that sets",
    "start": "2276640",
    "end": "2283000"
  },
  {
    "text": "up the capture like either an iptables rules or whatever it is that's implementing that and that's that's",
    "start": "2283000",
    "end": "2288520"
  },
  {
    "text": "really fast so there's nothing there's no pod that you need to wait for it's just you know waiting for the you know",
    "start": "2288520",
    "end": "2295480"
  },
  {
    "text": "the the correct read the redirection to the Z tunnel",
    "start": "2295480",
    "end": "2300299"
  },
  {
    "text": "thanks yeah thanks for the do we still have",
    "start": "2307900",
    "end": "2314859"
  },
  {
    "text": "time yes yeah thanks for the talk I really appreciate it and it gave me a good insight to istio",
    "start": "2314859",
    "end": "2321940"
  },
  {
    "text": "um my question is when would I want to use ambient mode versus sidecast till now I only see I get less spots less",
    "start": "2321940",
    "end": "2329440"
  },
  {
    "text": "memory usage are there any other benefits yeah you should definitely attend the panel you know uh late late",
    "start": "2329440",
    "end": "2336640"
  },
  {
    "text": "later today but but yeah resource usage is you know is is a major one",
    "start": "2336640",
    "end": "2342700"
  },
  {
    "text": "um you know there's like there's um you know you could have what is that migrating",
    "start": "2342700",
    "end": "2349200"
  },
  {
    "text": "so also uh like you uh inside car mode you you know inject everything with the",
    "start": "2349380",
    "end": "2354640"
  },
  {
    "text": "sidecar here you can like add you know L7 as you need it right um and uh add you know things to the",
    "start": "2354640",
    "end": "2360760"
  },
  {
    "text": "mesh more gradually so if you just care about like basic L4 observability and like mtls then you can just have you",
    "start": "2360760",
    "end": "2368079"
  },
  {
    "text": "know no policies in place on all seven but um get like pretty good you know performance less memory consumption",
    "start": "2368079",
    "end": "2374320"
  },
  {
    "text": "um and not have to you know inject pods everywhere so it's um it there's also",
    "start": "2374320",
    "end": "2379540"
  },
  {
    "text": "other benefits of like slowly migrating like as you need you add the pieces you need so yeah",
    "start": "2379540",
    "end": "2385000"
  },
  {
    "text": "and so we're heading into break and so we'll have time if you just want to you know meet cluster together here to",
    "start": "2385000",
    "end": "2390460"
  },
  {
    "text": "answer questions but I think you know the session is is officially over",
    "start": "2390460",
    "end": "2395640"
  }
]