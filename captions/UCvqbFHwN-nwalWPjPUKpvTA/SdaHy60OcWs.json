[
  {
    "text": "uh welcome to choose your own adventure oh you know what I forgot my clicker I was so excited to get up here I think",
    "start": "280",
    "end": "7000"
  },
  {
    "text": "it's in my bag that's the way to start",
    "start": "7000",
    "end": "13759"
  },
  {
    "text": "yeah usually Victor's the one that messes up the first time in this presentation I won't disappoint this",
    "start": "15160",
    "end": "22640"
  },
  {
    "text": "time oh no all right here we go",
    "start": "22640",
    "end": "30240"
  },
  {
    "text": "meet hero hero is application source code on a developer's laptop hero longs",
    "start": "30240",
    "end": "37320"
  },
  {
    "text": "to be a real application running and production serving end users and we're",
    "start": "37320",
    "end": "42600"
  },
  {
    "text": "going to help hero along the way so our job is to help hero navigate hundreds of",
    "start": "42600",
    "end": "47840"
  },
  {
    "text": "cncf projects choose which ones to use integrate them with one another can with",
    "start": "47840",
    "end": "53480"
  },
  {
    "text": "so hero can live their dream my name is Whitney this is Victor",
    "start": "53480",
    "end": "60000"
  },
  {
    "text": "Victor and I together host a show called you choose on Victor's YouTube channel called devops toolkit so you choose is a",
    "start": "60000",
    "end": "67640"
  },
  {
    "text": "Choose Your Own Adventure style Journey Through the cncf landscape and each episode represents a different system",
    "start": "67640",
    "end": "74560"
  },
  {
    "text": "design choice so for that system design choice We Gather all the relevant cncf",
    "start": "74560",
    "end": "79720"
  },
  {
    "text": "Tech that can do that thing then we invite a maintainer or super user on from each Tech and they each get only",
    "start": "79720",
    "end": "86759"
  },
  {
    "text": "five minutes to present about their technology so we put them head-to-head then we have a nice discussion then we",
    "start": "86759",
    "end": "93000"
  },
  {
    "text": "put it to the vote and whatever technology the community chooses is the technology that we build into our",
    "start": "93000",
    "end": "99600"
  },
  {
    "text": "ongoing demo so the current demo environment we have for this talk is",
    "start": "99600",
    "end": "104840"
  },
  {
    "text": "based off of choices made in you choose so we have an AWS eks cluster running",
    "start": "104840",
    "end": "110479"
  },
  {
    "text": "it's been and it's been defined with crossplane resources we are using gitops",
    "start": "110479",
    "end": "115799"
  },
  {
    "text": "and specifically we're using Argo CD because that's what you the Community chose so our application already is",
    "start": "115799",
    "end": "122880"
  },
  {
    "text": "deployed in our demo environments and also our end users can access it because",
    "start": "122880",
    "end": "128520"
  },
  {
    "text": "you chose Contour as the Engish solution so wait it sounds like hero",
    "start": "128520",
    "end": "134519"
  },
  {
    "text": "already is running in production and serving in users so what are we doing here Heroes already living their dream",
    "start": "134519",
    "end": "141879"
  },
  {
    "text": "well the problem is hero is not running in a secure production environment right",
    "start": "141879",
    "end": "147879"
  },
  {
    "text": "now heroes in danger the user are in danger the systems in danger oh no we need your help so please scan this QR",
    "start": "147879",
    "end": "156120"
  },
  {
    "text": "code during this presentation we're going to have live voting and so for you",
    "start": "156120",
    "end": "161519"
  },
  {
    "text": "to be able to vote for which Tech you want to see implemented in our ongoing demo by Victor you need to scan this QR",
    "start": "161519",
    "end": "168400"
  },
  {
    "text": "code and we're going to go through three system design choices today we're going to talk about we're uh admission",
    "start": "168400",
    "end": "174800"
  },
  {
    "text": "controller policy we're going to talk about and examine tools from runtime Poli policy and we're also going to",
    "start": "174800",
    "end": "182239"
  },
  {
    "text": "examine tools that will uh help us get kubernetes get secret information into",
    "start": "182239",
    "end": "187440"
  },
  {
    "text": "our kubernetes cluster so if you didn't get that QR code now it'll come up again later when it's time to",
    "start": "187440",
    "end": "193840"
  },
  {
    "text": "vote I'll I'll wait till someone of the phones are down okay sounds good so",
    "start": "193840",
    "end": "200200"
  },
  {
    "text": "we're going to help hero live their dream and run in a secure production environment so first up let's talk about",
    "start": "200200",
    "end": "207120"
  },
  {
    "text": "admission controller policies the tools we're to talk about today are kerno Opa",
    "start": "207120",
    "end": "213080"
  },
  {
    "text": "gatekeeper and Q boarden so first what is cluster level policy or admission",
    "start": "213080",
    "end": "219239"
  },
  {
    "text": "controller policy well as things stand bad things can happen on our cluster like our application can become bloated",
    "start": "219239",
    "end": "226720"
  },
  {
    "text": "and use way too much in uh resources or it could be running outdated versions of",
    "start": "226720",
    "end": "232280"
  },
  {
    "text": "things or it could be pulling images from untrusted container Registries so",
    "start": "232280",
    "end": "237319"
  },
  {
    "text": "we need to create policy and policy is an organization specific rule about what",
    "start": "237319",
    "end": "244519"
  },
  {
    "text": "is what actions are and are not allowed to happen in our cluster so we can make",
    "start": "244519",
    "end": "250439"
  },
  {
    "text": "rules to say uh put limits on resource consumption we can make rules to",
    "start": "250439",
    "end": "256560"
  },
  {
    "text": "declaratively say what versions of something must be run we can make rules that say images have to be pulled from a",
    "start": "256560",
    "end": "262680"
  },
  {
    "text": "a trusted registry and like a bazillion other rules so how does it work how does",
    "start": "262680",
    "end": "269199"
  },
  {
    "text": "actually implementing it work so as a a a an author you make a policy an",
    "start": "269199",
    "end": "275680"
  },
  {
    "text": "organization specific policy and what that policy does is it adds configuration to the cube API in the",
    "start": "275680",
    "end": "282680"
  },
  {
    "text": "form of an admission controller web hook so this point nothing's running all you've done is taught QBE API if a",
    "start": "282680",
    "end": "289800"
  },
  {
    "text": "request comes in that falls under the jurisdiction of this rule send that request to the admission controller now",
    "start": "289800",
    "end": "298039"
  },
  {
    "text": "the admission controller is actually a piece of software that's running and it is either a validating admission",
    "start": "298039",
    "end": "304000"
  },
  {
    "text": "controller or a mutating mission admission controller so it's if it's validating it's going to say yes this is",
    "start": "304000",
    "end": "310039"
  },
  {
    "text": "resources Allowed no it's not it's a yes or no answer if it's mutating it might",
    "start": "310039",
    "end": "315160"
  },
  {
    "text": "change something about the resource before it's allowed to be created in kubernetes so either way the admission",
    "start": "315160",
    "end": "322120"
  },
  {
    "text": "controller software is going to return a response and now the cube API is going to behave in accordance to your",
    "start": "322120",
    "end": "328560"
  },
  {
    "text": "organization's Poli policy so let's talk about the tools themselves first up kerno kerno is a",
    "start": "328560",
    "end": "336319"
  },
  {
    "text": "kubernetes native admission controller so it that means um With kerno You",
    "start": "336319",
    "end": "343919"
  },
  {
    "text": "author policy in yo kind of what you're actually",
    "start": "343919",
    "end": "349039"
  },
  {
    "text": "authoring policy is kerno Json query language and the idea is that it's meant",
    "start": "349039",
    "end": "355160"
  },
  {
    "text": "to look and feel like yaml so it's made to write policy for kubernetes and if you're if you're a cluster administrator",
    "start": "355160",
    "end": "362199"
  },
  {
    "text": "if you're writing policy for kubernetes cluster the idea is you're probably very familiar with gaml and that's the best",
    "start": "362199",
    "end": "367680"
  },
  {
    "text": "way for you to write policy kerno is a graduated project and it has a lot of other bells and whistles too but those",
    "start": "367680",
    "end": "373840"
  },
  {
    "text": "are not differentiating so I'm going to move on to the next one with it which is Opa",
    "start": "373840",
    "end": "379400"
  },
  {
    "text": "gatekeeper Opa gatekeeper the OPA stands for open policy agent and it is um open",
    "start": "379400",
    "end": "386960"
  },
  {
    "text": "policy agent without the gatekeeper part is a platform agnostic uh policy engine",
    "start": "386960",
    "end": "392240"
  },
  {
    "text": "so it can make policy with gatekeeper for kubernetes but also you can write policy where anything in your entire",
    "start": "392240",
    "end": "398639"
  },
  {
    "text": "system not just kubernetes um Opa gatekeeper gatekeeper is a wrapper that",
    "start": "398639",
    "end": "404840"
  },
  {
    "text": "makes it so you can use open policy agents with kubernetes resources specifically now with Opa gatekeeper you",
    "start": "404840",
    "end": "411120"
  },
  {
    "text": "have to author your policy in Rego Rego is a notoriously difficult language to",
    "start": "411120",
    "end": "416759"
  },
  {
    "text": "learn and use so that is the big drawback of opa gatekeeper but then if",
    "start": "416759",
    "end": "422000"
  },
  {
    "text": "you're already using Rego then it makes a lot of sense to also use Opa in your system Opa gatekeeper is also a",
    "start": "422000",
    "end": "428720"
  },
  {
    "text": "graduated project with lots of bells and whistles and then finally we have cuboon the makers of cuboon they were like you",
    "start": "428720",
    "end": "435240"
  },
  {
    "text": "know what I don't want to write policy in yaml and I don't want to write policy in Rego so let's make a whole new thing",
    "start": "435240",
    "end": "441879"
  },
  {
    "text": "and so with OP with CUO and cuboon is a new tool a newer tool it's a Sandbox project and with cubon you write policy",
    "start": "441879",
    "end": "449720"
  },
  {
    "text": "in any language you want really any language you want even Rego if you really don't like yourself and and you",
    "start": "449720",
    "end": "456440"
  },
  {
    "text": "can wrap you can compile that policy into a Wasa module and then the Wasa module it can be um stored and",
    "start": "456440",
    "end": "463560"
  },
  {
    "text": "distributed and saved as a oci artifact but it runs as part of the policy engine",
    "start": "463560",
    "end": "468720"
  },
  {
    "text": "and that's how you write policy with cuboard in and now it's time to vote which one would you like to see Victor",
    "start": "468720",
    "end": "476120"
  },
  {
    "text": "uh Implement in the demo today",
    "start": "476120",
    "end": "480560"
  },
  {
    "text": "easy none oh it makes me nervous okay good you",
    "start": "481360",
    "end": "487039"
  },
  {
    "text": "Wen so now the idea is not that one of these Technologies is the winner it's just what you're curious to learn more",
    "start": "487039",
    "end": "493599"
  },
  {
    "text": "about so if you already using one please don't choose that one choose one that you'll learn",
    "start": "493599",
    "end": "500039"
  },
  {
    "text": "about okay let's do CU Warden then looks like CU Warden uh no this is the did you",
    "start": "502199",
    "end": "508479"
  },
  {
    "text": "let me change the slide is the vote still live I don't know nobody knows there we go everyone in this room knows",
    "start": "508479",
    "end": "514479"
  },
  {
    "text": "except for us yeah okay there we go okay so uh first thing I'm going to do is",
    "start": "514479",
    "end": "521320"
  },
  {
    "text": "copy the file from policies heck I don't see anything okay cool um I'm going to",
    "start": "521320",
    "end": "527720"
  },
  {
    "text": "copy this file uh Cube word and yaml to info directory sis yl uh I'll explain",
    "start": "527720",
    "end": "535600"
  },
  {
    "text": "why I'm C doing that instead of showing you what's going on in a second and I'm going",
    "start": "535600",
    "end": "540760"
  },
  {
    "text": "to um commit add comit and push it to get the reason why I'm doing this is",
    "start": "540760",
    "end": "546959"
  },
  {
    "text": "because it takes a few moments until Argo CD figures it out and synchronizes",
    "start": "546959",
    "end": "552000"
  },
  {
    "text": "into cluster does the thing and while that is happening I can show you how it looks like and uh it looks like this",
    "start": "552000",
    "end": "560640"
  },
  {
    "text": "right so uh with Cube Warden I created what like three or four policies uh",
    "start": "560640",
    "end": "566720"
  },
  {
    "text": "basically this one will be lied uh to to",
    "start": "566720",
    "end": "573000"
  },
  {
    "text": "Applications specifically to deployments and if somebody tries to create or",
    "start": "573000",
    "end": "578240"
  },
  {
    "text": "update a deployment right and then I'm passing the value uh the key replica is",
    "start": "578240",
    "end": "586240"
  },
  {
    "text": "greater than two right behind the scenes uh I'm not sure whe whether I will have time you need to uh know that there is a",
    "start": "586240",
    "end": "593640"
  },
  {
    "text": "go code that will uh that is running in a cluster and it will be accepting that",
    "start": "593640",
    "end": "599440"
  },
  {
    "text": "parameter do doing the calculation and saying yes or no right I used go to write my Cube word and policies and this",
    "start": "599440",
    "end": "605640"
  },
  {
    "text": "is just how we create instances of those policies right so in other words hey if",
    "start": "605640",
    "end": "612640"
  },
  {
    "text": "uh deployment needs to have two or more uh sorry more than two replicas to pass",
    "start": "612640",
    "end": "618200"
  },
  {
    "text": "the policies right and they have uh and then I have this is admission policy",
    "start": "618200",
    "end": "625079"
  },
  {
    "text": "somebody should say uh doesn't matter uh then we have another policy see that says hey if you try to create something",
    "start": "625079",
    "end": "632360"
  },
  {
    "text": "called SQL claims or sqls right this is now custom resources I'm using cross plan but not important for this story",
    "start": "632360",
    "end": "639240"
  },
  {
    "text": "what does matter is that if somebody tries to create or update SQL claim then",
    "start": "639240",
    "end": "644920"
  },
  {
    "text": "uh the size that is allowed is going to be small medium and large right again",
    "start": "644920",
    "end": "650240"
  },
  {
    "text": "you cannot know 100% what's going on through only yaml because you would need to inspect the code behind cuen but",
    "start": "650240",
    "end": "657000"
  },
  {
    "text": "that's that's what it does uh in General right and then another one that says hey",
    "start": "657000",
    "end": "663440"
  },
  {
    "text": "another one for uh SQL claims but this time if it's in production right previous would have applied to any",
    "start": "663440",
    "end": "669680"
  },
  {
    "text": "namespace in a cluster but specifically if it's in production then the same rule set except that only medium and large",
    "start": "669680",
    "end": "676320"
  },
  {
    "text": "are allowed right relatively simple relatively straightforward now uh let me see whether all that",
    "start": "676320",
    "end": "683959"
  },
  {
    "text": "worked and I'm going to say get cluster admiss admiss",
    "start": "683959",
    "end": "691240"
  },
  {
    "text": "policies uh there we go and no I don't need this cool um yeah so you",
    "start": "691240",
    "end": "698360"
  },
  {
    "text": "can see that uh something was already deployed by Argo CD uh while I was explaining what's",
    "start": "698360",
    "end": "704519"
  },
  {
    "text": "happening so I can I can try it out right so uh what I'm going to do is uh",
    "start": "704519",
    "end": "710839"
  },
  {
    "text": "modify and say V you I'm going to modify a few files just to deploy my application I'm going to say policies",
    "start": "710839",
    "end": "719800"
  },
  {
    "text": "type um is going to be no what am I doing let me see what I",
    "start": "719800",
    "end": "726760"
  },
  {
    "text": "don't care about this uh what I do care is that I'm going to uh have my",
    "start": "726760",
    "end": "732600"
  },
  {
    "text": "application uh where is it uh I forgot where did I put it cncf demo ytt there",
    "start": "732600",
    "end": "738120"
  },
  {
    "text": "we go this one this is my application right uh it's already defined by white",
    "start": "738120",
    "end": "743600"
  },
  {
    "text": "because we chose it in previous uh previous session uh and I'm going to add",
    "start": "743600",
    "end": "748639"
  },
  {
    "text": "that I'm going to push my application to git and we're going to see whether it",
    "start": "748639",
    "end": "754079"
  },
  {
    "text": "will work and we're going to see that in two ways Cube cutle uh port forward this is",
    "start": "754079",
    "end": "761000"
  },
  {
    "text": "my Argo CD if I go back to uh Local Host 880 I should see Argo CD should try to",
    "start": "761000",
    "end": "769440"
  },
  {
    "text": "deploy my application right away come on why there we go",
    "start": "769440",
    "end": "775920"
  },
  {
    "text": "uh we're talking about security so password is me 1 2 three there we go",
    "start": "775920",
    "end": "783360"
  },
  {
    "text": "um I should have there is my application and now if we refresh it just SP it up",
    "start": "783360",
    "end": "788800"
  },
  {
    "text": "you can see that Argo CID is trying to deploy my application uh in a cluster right now if I go back to my terminal",
    "start": "788800",
    "end": "796760"
  },
  {
    "text": "and say Cube cutle namespace production uh show me deployments um there is no deployment",
    "start": "796760",
    "end": "804680"
  },
  {
    "text": "right uh the policy prevented deployment from being created because it doesn't",
    "start": "804680",
    "end": "809959"
  },
  {
    "text": "match the the rules that were Set uh so we're going to change that uh in a second uh but before we do",
    "start": "809959",
    "end": "818639"
  },
  {
    "text": "that let me show you this um production describe uh",
    "start": "818639",
    "end": "825800"
  },
  {
    "text": "admission po policy what typ see there",
    "start": "825800",
    "end": "831120"
  },
  {
    "text": "we go thank you admission policy um uh",
    "start": "831120",
    "end": "837839"
  },
  {
    "text": "deployment there we go come on it says adminis Ah I cannot",
    "start": "837839",
    "end": "845680"
  },
  {
    "text": "[Laughter] type ah there we go there we go",
    "start": "845680",
    "end": "851399"
  },
  {
    "text": "admission policy uh what's the policy deployment production and uh we should",
    "start": "851399",
    "end": "857759"
  },
  {
    "text": "see that uh that's that's the policy that is right now running and preventing the preventing deployment from happening",
    "start": "857759",
    "end": "865160"
  },
  {
    "text": "now one unfortunate thing about Cube Warden any maintenance from Cube Warden here nobody good you should be ashamed you",
    "start": "865160",
    "end": "872320"
  },
  {
    "text": "should put events over there uh otherwise nobody knows what's going on uh so let's let's fix the problem uh",
    "start": "872320",
    "end": "879839"
  },
  {
    "text": "we're going to fix the problem by editing the application itself again uh ytt uh values there we go values prod",
    "start": "879839",
    "end": "888279"
  },
  {
    "text": "and I'm going to um what am I going to do let me see no I",
    "start": "888279",
    "end": "893519"
  },
  {
    "text": "went too far there we go uh I'm going to change replicas where is replicas here",
    "start": "893519",
    "end": "898639"
  },
  {
    "text": "no replicas okay I'm going to enter a new entry and say replicas uh three and",
    "start": "898639",
    "end": "904920"
  },
  {
    "text": "uh now if I deploy my application it should work and I'm going to do that anybody here familiar with YT no uh cool",
    "start": "904920",
    "end": "914560"
  },
  {
    "text": "I generated my yaml for the application and if you look at the deployment",
    "start": "914560",
    "end": "919759"
  },
  {
    "text": "somewhere it's somewhere I promise you can see that I changed now replica 3 to match the policy and U if I do add",
    "start": "919759",
    "end": "929160"
  },
  {
    "text": "commit push now it should work and we can confirm that very quickly by saying",
    "start": "929160",
    "end": "936240"
  },
  {
    "text": "Argus stop doing whatever you're doing stop trying it's not going to work and uh now",
    "start": "936240",
    "end": "943360"
  },
  {
    "text": "it should work you can see here see how deployment is working now the policy",
    "start": "943360",
    "end": "949680"
  },
  {
    "text": "allowed it to pass and we can confirm that there we go now it works woo",
    "start": "949680",
    "end": "956510"
  },
  {
    "text": "[Applause]",
    "start": "956510",
    "end": "961800"
  },
  {
    "text": "okay go for it we did it everyone okay next let's talk about runtime policy we're going to",
    "start": "961800",
    "end": "968639"
  },
  {
    "text": "compare two tools here we have Falco and we have Cube armor so before we talk about the tools",
    "start": "968639",
    "end": "975920"
  },
  {
    "text": "let's talk about why we need runtime policy well do you trust everything",
    "start": "975920",
    "end": "981040"
  },
  {
    "text": "that's running in your cluster do you trust all your internal applications do you trust all your third party tools do",
    "start": "981040",
    "end": "988480"
  },
  {
    "text": "you trust trust all the dependencies do you trust all the tens of hundreds of thousands of million bajillion processes",
    "start": "988480",
    "end": "995319"
  },
  {
    "text": "that are running do you trust every single one how do you know if a single process is going Ary so that's where",
    "start": "995319",
    "end": "1002680"
  },
  {
    "text": "where runtime security comes in so with runtime security we're monitoring the system at the kernel level we're looking",
    "start": "1002680",
    "end": "1009519"
  },
  {
    "text": "at everything that happens through the kernel and so we can do this to identify",
    "start": "1009519",
    "end": "1015399"
  },
  {
    "text": "unknown unknowns at runtime and we're also monitoring independent of applications um and so",
    "start": "1015399",
    "end": "1022839"
  },
  {
    "text": "when we're monitoring our kernel what we need to do is first to find expected behavior and then once we know it's",
    "start": "1022839",
    "end": "1028959"
  },
  {
    "text": "expected then we can make policy to do something when something unexpected in",
    "start": "1028959",
    "end": "1034160"
  },
  {
    "text": "our system happens so what that something is depends on the tool so I'm going to jump right into those first up",
    "start": "1034160",
    "end": "1041438"
  },
  {
    "text": "is Falco Falco's a graduated project Falco is a cloud native threat detector",
    "start": "1041439",
    "end": "1047438"
  },
  {
    "text": "Falco takes in um uh events from lots of sources Falco has a kernel module Falco",
    "start": "1047439",
    "end": "1054320"
  },
  {
    "text": "has an ebpf probe but Falco also has lots of plugins that basically look at",
    "start": "1054320",
    "end": "1059799"
  },
  {
    "text": "log so there's a kubernetes plugin there's cloud provider plugins I believe there are like 13 plugins so with all of",
    "start": "1059799",
    "end": "1066039"
  },
  {
    "text": "that Source material you can make Falco rules so a Falco rule is a set of",
    "start": "1066039",
    "end": "1071559"
  },
  {
    "text": "conditions that win met trigger an alert now an alert in Falco is simply a text",
    "start": "1071559",
    "end": "1078600"
  },
  {
    "text": "message message with some sort of priority associated with it and so Falco",
    "start": "1078600",
    "end": "1083640"
  },
  {
    "text": "has a couple of sub projects that help you manage these alerts one is called Falco sidekick Falco sidekick can",
    "start": "1083640",
    "end": "1091000"
  },
  {
    "text": "forward these alerts to 50 or 60 different compatible destinations like phone numbers or slack or telegram um",
    "start": "1091000",
    "end": "1098840"
  },
  {
    "text": "and then there's also Falco Talon Falco Talon will help you take action on alerts so when something bad happens",
    "start": "1098840",
    "end": "1106600"
  },
  {
    "text": "then you might kill a container or when something bad happens you might start collecting more",
    "start": "1106600",
    "end": "1113120"
  },
  {
    "text": "information and that's Falco next we have Cube armer Cub armer Falco is a",
    "start": "1113120",
    "end": "1119000"
  },
  {
    "text": "graduated project it's been around a long time Cub Armour is a Sandbox project and with Cub Armour you can do",
    "start": "1119000",
    "end": "1125480"
  },
  {
    "text": "the monitoring like you can with Falco except with Cube armer you just do monitoring with ebpf you can also do",
    "start": "1125480",
    "end": "1133400"
  },
  {
    "text": "alerting just like you do with Falco but Cub armer does something else so with cub armer when attack is attempted it",
    "start": "1133400",
    "end": "1141880"
  },
  {
    "text": "fails so with Falco an attack is attempted it happens and then it triggers something else with Cub armer",
    "start": "1141880",
    "end": "1148919"
  },
  {
    "text": "the attack never happens it fails before it happens so this happens um Cub armer",
    "start": "1148919",
    "end": "1154400"
  },
  {
    "text": "uses lsms or Linux security modules is the mechanism that plus ebpf that makes",
    "start": "1154400",
    "end": "1161120"
  },
  {
    "text": "this work and lsms are basically Access Control to the Linux kernel and that's",
    "start": "1161120",
    "end": "1166280"
  },
  {
    "text": "Cube armor so what do you choose between Falco and Cub",
    "start": "1166280",
    "end": "1172679"
  },
  {
    "text": "armer okay CU wait only 20 votes have come in okay no time be FAS tou tou we",
    "start": "1180240",
    "end": "1187840"
  },
  {
    "text": "we're running out of time okay cuer is the definite winner FAL is trying but",
    "start": "1187840",
    "end": "1193520"
  },
  {
    "text": "too late I I see I see what's going on okay uh so Cube armor right so uh I'm",
    "start": "1193520",
    "end": "1200960"
  },
  {
    "text": "going to go and in namespace production I'm going to execute uh a command uh in",
    "start": "1200960",
    "end": "1208799"
  },
  {
    "text": "the cncf let's see uh in this container and",
    "start": "1208799",
    "end": "1213960"
  },
  {
    "text": "I'm going to say hey can you list all the files in the root directory right that obviously shouldn't be",
    "start": "1213960",
    "end": "1220240"
  },
  {
    "text": "allowed um so and it works right so I can I can enter the container do stuff",
    "start": "1220240",
    "end": "1226480"
  },
  {
    "text": "that I'm not allowed to do uh whatever that something is because there is nothing preventing me from doing that right so what I'm going to do is say",
    "start": "1226480",
    "end": "1235080"
  },
  {
    "text": "Cube cutle um annotate uh annotate yeah correct uh Nam",
    "start": "1235080",
    "end": "1243400"
  },
  {
    "text": "space uh production and I'm going to add the label Cube armor it's important",
    "start": "1243400",
    "end": "1250840"
  },
  {
    "text": "withit me if I make a type of it's your fault po I'll be your secretary I got it",
    "start": "1250840",
    "end": "1256559"
  },
  {
    "text": "uh a block right so I'm going basically to say hey watch stuff in that namespace",
    "start": "1256559",
    "end": "1261679"
  },
  {
    "text": "the pods and block if they don't fit the rule and override just in case this is",
    "start": "1261679",
    "end": "1267440"
  },
  {
    "text": "not the first time I'm doing that right now I'm going to do the same thing as before I'm going to take a set of uh",
    "start": "1267440",
    "end": "1274159"
  },
  {
    "text": "policies in this case Cube armor and I'm going to copy to the directory that Targo CID is watching and synchronizing",
    "start": "1274159",
    "end": "1280279"
  },
  {
    "text": "into the cluster and I'm going to call it runtime policies uh. yaml and I'm",
    "start": "1280279",
    "end": "1286200"
  },
  {
    "text": "going to add and I'm going to push cool and while aroid is deploying my",
    "start": "1286200",
    "end": "1291880"
  },
  {
    "text": "policies um I'm going to show you what happened and that's infra uh what which",
    "start": "1291880",
    "end": "1298000"
  },
  {
    "text": "one runtime policies right so this is what I'm uh I'm telling uh CU Armour I'm",
    "start": "1298000",
    "end": "1303679"
  },
  {
    "text": "saying hey you know what um any root directory and it's recursing",
    "start": "1303679",
    "end": "1310039"
  },
  {
    "text": "meaning any subd directory or sub file inside of the road basically everything in that container is not allowed none of",
    "start": "1310039",
    "end": "1317600"
  },
  {
    "text": "those things are allowed except if the process is called man SL",
    "start": "1317600",
    "end": "1323080"
  },
  {
    "text": "manager so in other words only SL manager will be executable inside of",
    "start": "1323080",
    "end": "1328279"
  },
  {
    "text": "those containers anything else is not allowed right relatively easy relatively",
    "start": "1328279",
    "end": "1333640"
  },
  {
    "text": "straightforward now let me see whether it was uh created namespace production",
    "start": "1333640",
    "end": "1338919"
  },
  {
    "text": "get Cube armor uh policies right so there we go",
    "start": "1338919",
    "end": "1344960"
  },
  {
    "text": "uh the policy was applied by Aro City while I was showing you what happened and I'm going to do now very simple",
    "start": "1344960",
    "end": "1350919"
  },
  {
    "text": "thing I'm going to try to execute the same command as before and it doesn't work right I'm not",
    "start": "1350919",
    "end": "1359640"
  },
  {
    "text": "allowed to execute LS in this case but any other process but SL manager there",
    "start": "1359640",
    "end": "1365080"
  },
  {
    "text": "we go awesome and uh presentation seven minutes withney seven",
    "start": "1365080",
    "end": "1370480"
  },
  {
    "text": "minutes Secrets management let's hurry up okay we have external Secrets operator Secret store CSI driver and",
    "start": "1370480",
    "end": "1377200"
  },
  {
    "text": "Sops so so uh our application has a lot of secrets to worry about and most of",
    "start": "1377200",
    "end": "1383520"
  },
  {
    "text": "that is handled with a technology called a vault so a vault at the bare minimum",
    "start": "1383520",
    "end": "1388559"
  },
  {
    "text": "it store secret safely and it has an API to interact with it it probably is also going to do some sort of Secrets some uh",
    "start": "1388559",
    "end": "1396400"
  },
  {
    "text": "remediation when Secrets leak and secrets rotation um but we're not talking about vaults there aren't a",
    "start": "1396400",
    "end": "1402520"
  },
  {
    "text": "we've scoped our our Choose Your Own Adventure project to be only cncf just because we have to draw a line somewhere",
    "start": "1402520",
    "end": "1409279"
  },
  {
    "text": "there aren't any volts in the cncf so we're not talking about volts the problem we're trying to solve now is how",
    "start": "1409279",
    "end": "1415120"
  },
  {
    "text": "do we get our secret or confidential information from outside of the cluster to inside of the cluster and that's",
    "start": "1415120",
    "end": "1421919"
  },
  {
    "text": "where our three tools come in but they all do this differently so I'm going to jump right into the tools the first one",
    "start": "1421919",
    "end": "1428520"
  },
  {
    "text": "ex external Secrets operator is a kubernetes operator and what it does is",
    "start": "1428520",
    "end": "1433720"
  },
  {
    "text": "it connects to the Vault it retrieves the confidential information and it stores the confidential information as a",
    "start": "1433720",
    "end": "1440320"
  },
  {
    "text": "kubernetes secret it also manages the life cycle of that kubernetes secret so our application can access it and",
    "start": "1440320",
    "end": "1447840"
  },
  {
    "text": "B we have our secrets external Secrets operator does another couple awesome",
    "start": "1447840",
    "end": "1452960"
  },
  {
    "text": "things for one it can generate kubernetes secrets for you also it can",
    "start": "1452960",
    "end": "1458039"
  },
  {
    "text": "push it has a resource called a push secret where it can take kubernetes secrets and it can push them into a",
    "start": "1458039",
    "end": "1464039"
  },
  {
    "text": "vault which is helpful for replicating Secrets across clusters next up we have Secret store CSI driver",
    "start": "1464039",
    "end": "1472039"
  },
  {
    "text": "Secret store CSI driver they said you know what kubernetes Secrets aren't very",
    "start": "1472039",
    "end": "1477080"
  },
  {
    "text": "secret they're just base 64 encoded and stored in ATD we can do better let's come up with a secret solution that",
    "start": "1477080",
    "end": "1484120"
  },
  {
    "text": "doesn't use kubernetes Secrets at all so a secret storage CSI driver it uses CSI",
    "start": "1484120",
    "end": "1490200"
  },
  {
    "text": "which stands for container storage interface and so it mounts a temporary file system volume to the application",
    "start": "1490200",
    "end": "1497840"
  },
  {
    "text": "and then it connects to the Vault retrieves the secret and it writes the secret into that volume and so now our",
    "start": "1497840",
    "end": "1505080"
  },
  {
    "text": "application can access the secret but instead of ACC accessing it as a kubernetes secret it's it's accessing it",
    "start": "1505080",
    "end": "1511799"
  },
  {
    "text": "as part of its file system and B we got a secret and that Secret store CSI",
    "start": "1511799",
    "end": "1518640"
  },
  {
    "text": "driver and how it's uh gets around using kubernetes Secrets Finally we have Sops",
    "start": "1518640",
    "end": "1524159"
  },
  {
    "text": "Sops stands for Secrets operations but if you call it that no one will know what you're talking talking about and",
    "start": "1524159",
    "end": "1530000"
  },
  {
    "text": "with stops it's just a CLI that helps you encrypt and decrypt files so you can",
    "start": "1530000",
    "end": "1535919"
  },
  {
    "text": "you have your kubernetes manifest that has a secret in it you use stops to uh encrypt it and then you need a",
    "start": "1535919",
    "end": "1542080"
  },
  {
    "text": "decryption key so only Whoever has your decryption key can read this file so now if you look at our vault instead of it",
    "start": "1542080",
    "end": "1548520"
  },
  {
    "text": "having the confidential information it now has our decryption key so in our particular",
    "start": "1548520",
    "end": "1554279"
  },
  {
    "text": "workflow because that Secret's encrypted it can now be safely checked in to get",
    "start": "1554279",
    "end": "1559559"
  },
  {
    "text": "and Argo CD would see it pick up the change and then Argo CD sees it's an encrypted file now Argo CD would need to",
    "start": "1559559",
    "end": "1566600"
  },
  {
    "text": "be taught how to manage this file with a configuration management plug-in and so once you do that then Argo CD knows to",
    "start": "1566600",
    "end": "1573200"
  },
  {
    "text": "get the decryption key and decrypt the secret and apply it to cube API and",
    "start": "1573200",
    "end": "1578399"
  },
  {
    "text": "B now we have our secret but this is um a lot of extra complexity and and to be",
    "start": "1578399",
    "end": "1585760"
  },
  {
    "text": "fair to stops stops is not designed for this use use case stops is designed to be a lightweight solution for maybe a a",
    "start": "1585760",
    "end": "1593240"
  },
  {
    "text": "a smaller company that isn't using Vault technology yet and just an easy lightweight way way for teams to be able",
    "start": "1593240",
    "end": "1599520"
  },
  {
    "text": "to share secrets and check them into get and those are our choices please",
    "start": "1599520",
    "end": "1605919"
  },
  {
    "text": "vote oh secret St CSI driver took the",
    "start": "1616039",
    "end": "1622440"
  },
  {
    "text": "lead okay all right okay so I'm not going to do CS Secrets I can first of",
    "start": "1624039",
    "end": "1632080"
  },
  {
    "text": "all it cannot be pronounced I don't know how you pronounce that one ss CSI that's why I never try to say",
    "start": "1632080",
    "end": "1637760"
  },
  {
    "text": "letters uh the pro excellent project Amazing Project it solves the problem of not using kubernetes Secrets by using",
    "start": "1637760",
    "end": "1644279"
  },
  {
    "text": "volumes the problem is that you cannot avoid kubernetes secrets because of all the third party applications like I'm",
    "start": "1644279",
    "end": "1650480"
  },
  {
    "text": "using crossplay heavily it creates kubernetes Secrets it's unavoidable I cannot use it um so uh great project",
    "start": "1650480",
    "end": "1660840"
  },
  {
    "text": "cannot be it can be used in very limited um number of cases so I'm going to",
    "start": "1660840",
    "end": "1666320"
  },
  {
    "text": "ignore your choices as a as a as a person who does that um and I'm going to",
    "start": "1666320",
    "end": "1673720"
  },
  {
    "text": "and you should encrypt your secrets at rest while they're an at CD and yes I",
    "start": "1673720",
    "end": "1679159"
  },
  {
    "text": "mean bit all manag kubernetes secrets are encrypted at thrust anyways yeah uh anyways so uh what I do have here is uh",
    "start": "1679159",
    "end": "1688279"
  },
  {
    "text": "I'm going to show you the file actually that uh we are that that we are deploying right now uh or the",
    "start": "1688279",
    "end": "1695960"
  },
  {
    "text": "application that we are using right now and you will see if I ever find it there",
    "start": "1695960",
    "end": "1701519"
  },
  {
    "text": "we go right now my application uses secret storing it anybody can see it",
    "start": "1701519",
    "end": "1707679"
  },
  {
    "text": "anybody can do it horrible don't be confused that you see random characters that just Bas 64 encode it everybody can",
    "start": "1707679",
    "end": "1714200"
  },
  {
    "text": "decode it so I'm going to change that and uh make it use external Secrets",
    "start": "1714200",
    "end": "1721279"
  },
  {
    "text": "instead and I'm going to do that by uh bye bye-bye uh adding another parameter",
    "start": "1721279",
    "end": "1727840"
  },
  {
    "text": "somewhere here insecure uh there we go false uh I think that that's the yeah",
    "start": "1727840",
    "end": "1735279"
  },
  {
    "text": "false right this is uh not really important but that's how I structured my YT that um generates um generates what I",
    "start": "1735279",
    "end": "1745320"
  },
  {
    "text": "need and now if I if I generate yaml again uh for my application you will see",
    "start": "1745320",
    "end": "1751480"
  },
  {
    "text": "here the secret is gone trust me and instead I'm going to add something called uh external secret to the cluster",
    "start": "1751480",
    "end": "1758600"
  },
  {
    "text": "it's going to reference uh it's going to get something from in this case from AWS the secret",
    "start": "1758600",
    "end": "1764440"
  },
  {
    "text": "called production pogress uh or the keys is called production progress and it will create",
    "start": "1764440",
    "end": "1769679"
  },
  {
    "text": "this Secret in my cluster right this is the name of the target secret that I want to create so uh I'm going to what",
    "start": "1769679",
    "end": "1778000"
  },
  {
    "text": "am I going to do I'm going to copy that uh Aro CD I think that this is the file yes I'm",
    "start": "1778000",
    "end": "1785039"
  },
  {
    "text": "going to edit I'm going to push it um I'm going to go back to 8 seconds I",
    "start": "1785039",
    "end": "1792399"
  },
  {
    "text": "cannot do it uh my application stop doing whatever you're doing Argo C bug",
    "start": "1792399",
    "end": "1798279"
  },
  {
    "text": "off uh refresh again uh be fast Victor uh there we go Cube cutle namespace",
    "start": "1798279",
    "end": "1805240"
  },
  {
    "text": "production get external Secrets it should be there the external secret was",
    "start": "1805240",
    "end": "1811760"
  },
  {
    "text": "created and if I go the get Secrets the secret is there and if I show you the",
    "start": "1811760",
    "end": "1818440"
  },
  {
    "text": "secret get secret there oh yaml if I output it as",
    "start": "1818440",
    "end": "1824519"
  },
  {
    "text": "yaml you will see that it generated a secret where is it come on this is my password this is now from",
    "start": "1824519",
    "end": "1832000"
  },
  {
    "text": "AWS uh secret uh and if I output it uh base 64 de code uh you will never find",
    "start": "1832000",
    "end": "1840559"
  },
  {
    "text": "out that's how that's how that's how safe I am um that's it nice we are out",
    "start": "1840559",
    "end": "1847360"
  },
  {
    "text": "of timeing will you put the last slide up please last slide okay yes uh this is",
    "start": "1847360",
    "end": "1853279"
  },
  {
    "text": "the lights uh yes there we go slideshow uh",
    "start": "1853279",
    "end": "1858559"
  },
  {
    "text": "oh that's what we would have done if we had more time will you will you get sorry we got into the secret it's going",
    "start": "1858559",
    "end": "1864159"
  },
  {
    "text": "to be forever all stuff you're not learning about okay aha this is the last",
    "start": "1864159",
    "end": "1869559"
  },
  {
    "text": "slide it has a couple of QR codes Our Heroes and production safely woo we have a couple of QR codes one is to the youu",
    "start": "1869559",
    "end": "1876559"
  },
  {
    "text": "show and we have youu stickers up here on the stage and onor person so please come say hi and get a sticker the other",
    "start": "1876559",
    "end": "1882399"
  },
  {
    "text": "ones to a get repo where you can choose your own adventure yourself have fun with that and there we're cut off all",
    "start": "1882399",
    "end": "1889600"
  },
  {
    "text": "right have a great day thank you so much everyone",
    "start": "1889600",
    "end": "1894240"
  }
]