[
  {
    "text": "hi I'm Tom Dean I'm a field engineer with buyant and we are the creators of linker D service mesh and Phil Henderson",
    "start": "480",
    "end": "6960"
  },
  {
    "text": "is here with me this is our first time presenting please be gentle with us and",
    "start": "6960",
    "end": "12040"
  },
  {
    "text": "uh you know right now we're scared out of our wits but we'll be okay uh show of hands uh how many people here in the",
    "start": "12040",
    "end": "19520"
  },
  {
    "text": "audience are service mesh users cool linkerd",
    "start": "19520",
    "end": "26519"
  },
  {
    "text": "users few cool how many people run in a multi-az setup right now and with",
    "start": "26519",
    "end": "33520"
  },
  {
    "text": "their clusters how many people are paying a lot of money for cross- ay",
    "start": "33520",
    "end": "39600"
  },
  {
    "text": "traffic that's what I expected right so today we're here to talk a little bit about cross ay traffic and",
    "start": "39600",
    "end": "47160"
  },
  {
    "text": "really focus on kind of you know what what the impact of that is and and uh how you can leverage topology aware",
    "start": "47160",
    "end": "53600"
  },
  {
    "text": "routing to avoid that and you know how you can use a service mesh to kind of keep an eye on what topology aware",
    "start": "53600",
    "end": "59440"
  },
  {
    "text": "routing does and understanding understand what's happening in your cluster and you know address certain scenarios this is based on a blog post",
    "start": "59440",
    "end": "67000"
  },
  {
    "text": "that I worked on with William our CEO if you'd like to go ahead and uh dig down",
    "start": "67000",
    "end": "72040"
  },
  {
    "text": "and read that you can scan this QR code or you can go up to buy. and look for the blog section and",
    "start": "72040",
    "end": "78439"
  },
  {
    "text": "it's in there it's pretty recent a couple of months back it shouldn't be hard to find so it digs in we did a",
    "start": "78439",
    "end": "83680"
  },
  {
    "text": "little bit of research wrote this up and uh talked about you know some ways to to mitigate it",
    "start": "83680",
    "end": "91119"
  },
  {
    "text": "so before we start reliability is the first Duty right and this is why we're using service meshes generally it's",
    "start": "91119",
    "end": "97240"
  },
  {
    "text": "going to give us security that's with us you know our experience has been mtls is the gateway drug for most people when",
    "start": "97240",
    "end": "103880"
  },
  {
    "text": "it's we're talking service meshes they want to mesh they want to get encryption in Flight you know they want to make sure that their traffic is is secure but",
    "start": "103880",
    "end": "111520"
  },
  {
    "text": "the another big thing for customers is observability you can consider observability and metrics kind of the",
    "start": "111520",
    "end": "116680"
  },
  {
    "text": "same thing but they are but they're not there's a lot of overlap and the reason that's important and it's important in",
    "start": "116680",
    "end": "121719"
  },
  {
    "text": "this talk is that we want to know what's going on with topology aware routing and with our traffic in general so that if",
    "start": "121719",
    "end": "128280"
  },
  {
    "text": "we witness a condition that's strange or maybe we don't witness it at all we need something to tell us hey something's",
    "start": "128280",
    "end": "134080"
  },
  {
    "text": "hanky here we really need to kind of look and see what's going on performance is another Advantage you know topology",
    "start": "134080",
    "end": "141000"
  },
  {
    "text": "we routing is great but when you put Linker D in the mix we're going to get this power of two choices load balancing",
    "start": "141000",
    "end": "147519"
  },
  {
    "text": "and I'm not going to go deep into it but we look at two end points we picked the more optimal endpoint so even with",
    "start": "147519",
    "end": "153560"
  },
  {
    "text": "topology we routing and everything else we're going to pick one that is more favorable so you're going to get a bit of a performance boost and things are",
    "start": "153560",
    "end": "159720"
  },
  {
    "text": "going to be a little more smooth with regard to traffic and latency keeping traffic in zone so what",
    "start": "159720",
    "end": "166239"
  },
  {
    "text": "are failure domains there's three big failure domains we want to talk about the first one is your cloud provider or",
    "start": "166239",
    "end": "172159"
  },
  {
    "text": "you know on Prem whatever you want to consider that whole thing that's kind of the most Global you know you using",
    "start": "172159",
    "end": "179239"
  },
  {
    "text": "topology routing is not going to fix that if your cloud provider goes down we",
    "start": "179239",
    "end": "184400"
  },
  {
    "text": "you know that's not going to prevent anything the second is Regions again we're not talking about regions that's",
    "start": "184400",
    "end": "190280"
  },
  {
    "text": "something you have to consider kind of outside of the cluster but the one we care about is the zone or the",
    "start": "190280",
    "end": "196080"
  },
  {
    "text": "availability Zone kubernetes knows about that there's a you know a label on your uh nodes that tells it this is where I",
    "start": "196080",
    "end": "202799"
  },
  {
    "text": "am this is my zone may be us East one a it could be you know something that you",
    "start": "202799",
    "end": "208319"
  },
  {
    "text": "put in if you're running on Prem so that's what we're focusing on is is the zone or the availability Zone and",
    "start": "208319",
    "end": "214120"
  },
  {
    "text": "generally like if you're running say eks you're probably going to spread across three of those and like we said when you",
    "start": "214120",
    "end": "219400"
  },
  {
    "text": "start to run traffic across zones there's a cost associated with that with you know and we're going to talk about",
    "start": "219400",
    "end": "225360"
  },
  {
    "text": "that here in a second so how much does it cost right if you take an example of a eks cluster in three AWS availability",
    "start": "225360",
    "end": "232519"
  },
  {
    "text": "zones these are the numbers so if you've got a you know measly 1K you're like 40",
    "start": "232519",
    "end": "238079"
  },
  {
    "text": "cents per year who cares we don't need to worry about this but if you're you know a common customer that we see 1 gig",
    "start": "238079",
    "end": "245519"
  },
  {
    "text": "of second per average that's $410,000 per year you know do the math divide that by months you know that's almost",
    "start": "245519",
    "end": "251480"
  },
  {
    "text": "$440,000 a month and that's considerable plus the cost of latency anytime you",
    "start": "251480",
    "end": "256639"
  },
  {
    "text": "jump between data centers or between zones you're going to have a latency cost so you know if you can keep it in",
    "start": "256639",
    "end": "262960"
  },
  {
    "text": "zone whenever possible that's going to give you a little bit of a performance advantage and like I said again then using Licor D you get that power of",
    "start": "262960",
    "end": "269880"
  },
  {
    "text": "choices load balancing that's going to also give you a bit of a boost too so what is topology aware routing it",
    "start": "269880",
    "end": "276400"
  },
  {
    "text": "used to be called topology hint right it's been around for a bit part of kubernetes it is a way of doing",
    "start": "276400",
    "end": "283800"
  },
  {
    "text": "connection-based bouting or connection based routing to tie your clients in one",
    "start": "283800",
    "end": "289919"
  },
  {
    "text": "zone to your resources you your endpoints in in that zone so we keep traffic it's hardwired at the Q proxy",
    "start": "289919",
    "end": "296720"
  },
  {
    "text": "and you know it's a very straightforward way to keep things you you know enabling it is literally an annotation disabling",
    "start": "296720",
    "end": "303240"
  },
  {
    "text": "it is removing that annotation pretty quick and easy to use so what are the pros it's a feature of kubernetes",
    "start": "303240",
    "end": "309240"
  },
  {
    "text": "nothing to install nothing to activate it's you know mainstream enough now that you don't have to go and and enable",
    "start": "309240",
    "end": "314919"
  },
  {
    "text": "anything it's you just put that annotation on and you're ready to go another Pro keeps traffic in the a right",
    "start": "314919",
    "end": "321560"
  },
  {
    "text": "so that has some uh cost and latency advantages and cons you're going to need",
    "start": "321560",
    "end": "327479"
  },
  {
    "text": "at least three end points per zone so you need to definitely consider that when you are uh designing and",
    "start": "327479",
    "end": "333400"
  },
  {
    "text": "implementing your services the more endpoints you can have per Zone the better you know to a point right",
    "start": "333400",
    "end": "340039"
  },
  {
    "text": "obviously but running with the least amount of endpoints will bring you in and out of topology aware routing if you",
    "start": "340039",
    "end": "345800"
  },
  {
    "text": "lose just one endpoint right so you want to try and have some extra end points so that if you lose an endpoint it's not",
    "start": "345800",
    "end": "351520"
  },
  {
    "text": "going to kick you out uh topology routing is not aware of inband uh",
    "start": "351520",
    "end": "357440"
  },
  {
    "text": "failures or problems like HTTP 5 500s and whatnot so we're going to show you",
    "start": "357440",
    "end": "362880"
  },
  {
    "text": "it's going to keep just doing what it does because it doesn't know that um that those are happening and sorry kind",
    "start": "362880",
    "end": "370080"
  },
  {
    "text": "of interacts poorly with features like HPA we're not going to demonstrate that here but if you know if you want to look",
    "start": "370080",
    "end": "375599"
  },
  {
    "text": "into that you want to play with that yourself you'll see that it really requires kind of a stable State you need",
    "start": "375599",
    "end": "381039"
  },
  {
    "text": "to consider your traffic and your design so that you've got things spread somewhat evenly right it's not very",
    "start": "381039",
    "end": "386479"
  },
  {
    "text": "Dynamic it's connection based routing not request based routing right so it doesn't adapt with each request it",
    "start": "386479",
    "end": "393000"
  },
  {
    "text": "really is just hardwiring your service your requesters to your endpoints and your services in the back",
    "start": "393000",
    "end": "399880"
  },
  {
    "text": "end so how does topology wear routing work this is straight out of the blog I",
    "start": "399880",
    "end": "406039"
  },
  {
    "text": "shamelessly poached it like we said K's feature designed to address the cross ay",
    "start": "406039",
    "end": "412880"
  },
  {
    "text": "problem it basically takes it at the network level at QBE proxy and it",
    "start": "412880",
    "end": "418319"
  },
  {
    "text": "hardwires those connections together and says look these are the end points you're going to use you're a requester",
    "start": "418319",
    "end": "423680"
  },
  {
    "text": "your client you're in this Zone these are your endpoints how does it interact with Linker D Linker D's destination",
    "start": "423680",
    "end": "430759"
  },
  {
    "text": "controller respects that so when we are choosing endpoints we will defer to topology routing as long as it's enabled",
    "start": "430759",
    "end": "438520"
  },
  {
    "text": "so we don't try and do anything right and we're going to show like what is what does it look like with just link or",
    "start": "438520",
    "end": "444639"
  },
  {
    "text": "D when we add topology we're routing what happens in certain scenarios",
    "start": "444639",
    "end": "450000"
  },
  {
    "text": "so let's talk about this kind of covers our application that we've got and it covers how it works but right now we've",
    "start": "450000",
    "end": "455800"
  },
  {
    "text": "got a application that has three orders deployments in you know one in each Zone",
    "start": "455800",
    "end": "462120"
  },
  {
    "text": "and we've got three Warehouse services and we have one in each Zone",
    "start": "462120",
    "end": "467159"
  },
  {
    "text": "we've got three replicas of each so we've got nine total clients nine total",
    "start": "467159",
    "end": "472199"
  },
  {
    "text": "endpoints for the service and right now without topology or we routing",
    "start": "472199",
    "end": "477400"
  },
  {
    "text": "everything talks to everything so if you think about that for each client a third of the requests are staying in zone",
    "start": "477400",
    "end": "484199"
  },
  {
    "text": "twoth thirds are going out of zone so you know you would basically two-thirds of your traffic for each client is going",
    "start": "484199",
    "end": "490720"
  },
  {
    "text": "to cost you money if you're paying to run that traffic across zones when we enable topology over",
    "start": "490720",
    "end": "497879"
  },
  {
    "text": "routing we hardwire those connections we've got connection based routing traffic stays in zone pretty",
    "start": "497879",
    "end": "504080"
  },
  {
    "text": "straightforward if you've got things balanced it works really great health checks so I talked about",
    "start": "504080",
    "end": "510639"
  },
  {
    "text": "this a little earlier inband versus out of band so inband health",
    "start": "510639",
    "end": "515800"
  },
  {
    "text": "checks kubernetes is not aware of these right so because kubernetes kubernetes is not aware of your inban health checks",
    "start": "515800",
    "end": "523560"
  },
  {
    "text": "it is not going to respond if all of a sudden we're getting HTTP 500s it doesn't know it's like okay all the",
    "start": "523560",
    "end": "529440"
  },
  {
    "text": "endpoints are up we're good let's keep sending traffic traffic is Flowing you know it thinks everything's great",
    "start": "529440",
    "end": "535240"
  },
  {
    "text": "because it's only paying attention to do we have enough end points you know are they reachable right out of band this is",
    "start": "535240",
    "end": "542680"
  },
  {
    "text": "where a service mesh is going to help and you know where you start to talk about things like request based routing",
    "start": "542680",
    "end": "547920"
  },
  {
    "text": "it's going to be looking at things at that layer 7even and if it detects something that's oh you know a Miss it's",
    "start": "547920",
    "end": "554279"
  },
  {
    "text": "going to say oh oh I better do something about that but with connection based routing it doesn't know that it just",
    "start": "554279",
    "end": "560120"
  },
  {
    "text": "knows are my end points up do I have enough end points in each Zone if it doesn't it's going to disable",
    "start": "560120",
    "end": "567000"
  },
  {
    "text": "itself all right I've talked enough I wanted to hustle through the slides cuz I know all of you are betting on whether",
    "start": "567000",
    "end": "572399"
  },
  {
    "text": "our demo is going to fail and you want to get to the action right so we're going to walk through a demo I'm going to show we're going to show three",
    "start": "572399",
    "end": "578519"
  },
  {
    "text": "scenarios where you know we have some failure modes and you know inband out of",
    "start": "578519",
    "end": "583600"
  },
  {
    "text": "band and let's see how linkerd handles it initially and then let's see when we enable topology routing you know what",
    "start": "583600",
    "end": "589880"
  },
  {
    "text": "the results are there I'm not here to bag on topology routing I'm just talking about one of the bigger things is you",
    "start": "589880",
    "end": "595680"
  },
  {
    "text": "know why observability is important right because it's it's pretty straightforward feature that you know",
    "start": "595680",
    "end": "601920"
  },
  {
    "text": "you kind of got to keep an eye on because if things go you know a Miss then you might need to understand what's",
    "start": "601920",
    "end": "608000"
  },
  {
    "text": "happening to fix it all right everyone say a little prayer to the demo guys before this uh",
    "start": "608000",
    "end": "613680"
  },
  {
    "text": "talk I was struggling with my MacBook as throttling all my pods so just see everything goes well first scenario is",
    "start": "613680",
    "end": "619760"
  },
  {
    "text": "latency so what happens when we inject like 600 milliseconds of additional latency into our application we go",
    "start": "619760",
    "end": "626480"
  },
  {
    "text": "through metrics first oh you yeah metrics sorry we're going to talk give you an overview of metrics and what they look like and what how we can use",
    "start": "626480",
    "end": "632640"
  },
  {
    "text": "them as observability tools so um first we're going to look at um all of our",
    "start": "632640",
    "end": "638760"
  },
  {
    "text": "metrics that are available as you can see there's a lot of them available this is for the three pods in one of our",
    "start": "638760",
    "end": "644440"
  },
  {
    "text": "deployments obviously no one's going to go and read through all these I I couldn't even tell you how many of them",
    "start": "644440",
    "end": "649600"
  },
  {
    "text": "I actually know here off the top of my head if we look at how many there are",
    "start": "649600",
    "end": "655320"
  },
  {
    "text": "there's almost 2,000 unique metrics for those three pods it's a lot of metrics that's hard to go",
    "start": "655320",
    "end": "661680"
  },
  {
    "text": "through yeah that's a single zone a single zone but with Linker D viz we can",
    "start": "661680",
    "end": "666800"
  },
  {
    "text": "view those things in a nice easy format we can get our success rates our requests per seconds and all of our latencies that we want to know our",
    "start": "666800",
    "end": "672680"
  },
  {
    "text": "golden metrics as they call them and it also kind of has it based on routes so you can get your probe routes and your",
    "start": "672680",
    "end": "678040"
  },
  {
    "text": "default routes which could be important for people who want to make sure that they're not looking at their prob metrics when trying to do their their",
    "start": "678040",
    "end": "684800"
  },
  {
    "text": "business logic now additionally there you could Define HTTP routes and split the stuff in the default out so you",
    "start": "684800",
    "end": "691000"
  },
  {
    "text": "could observe traffic to specific um services or service um services that are",
    "start": "691000",
    "end": "696279"
  },
  {
    "text": "available but we're just kind of keeping it simple right all the traffic's in one big default bucket yeah and we can still",
    "start": "696279",
    "end": "701440"
  },
  {
    "text": "use Linker D to start getting um stat outbound on our deployment and see how that traffic is going and we can still",
    "start": "701440",
    "end": "706680"
  },
  {
    "text": "get again our success rate request per second and all of our golden metrics that we like for",
    "start": "706680",
    "end": "712560"
  },
  {
    "text": "latency and you know it's nice when you can use a little grip and like get some of that information now right little gret magic always helps our lives right",
    "start": "715360",
    "end": "722200"
  },
  {
    "text": "who here knows Linux a little bit right all right you can see that we have",
    "start": "722200",
    "end": "728560"
  },
  {
    "text": "all of our endpoints as Tom was talking about we have nine endpoints for topology where routing that we are required to have yeah it's important to",
    "start": "728560",
    "end": "735519"
  },
  {
    "text": "note that right you want to understand how many end points do I have are they healthy and so we have some commands that you know and some stuff you can",
    "start": "735519",
    "end": "741800"
  },
  {
    "text": "also leverage Cube cuddle there's some good commands we're going to show here but understanding what the status of your end points and where they are is",
    "start": "741800",
    "end": "747959"
  },
  {
    "text": "pretty important you know when you're using connection based routing and I'm someone who loves a command line I've",
    "start": "747959",
    "end": "753120"
  },
  {
    "text": "always been but you know sometimes it's easier just to go to grafana right we all have used grafana most of us have or",
    "start": "753120",
    "end": "758360"
  },
  {
    "text": "some other uh visualization tool and we can easily see our our statistics here",
    "start": "758360",
    "end": "763600"
  },
  {
    "text": "make a little larger for everyone so we have a dashboard I use this a lot because I'm kind of the the zonal guy",
    "start": "763600",
    "end": "769880"
  },
  {
    "text": "right and uh so the three panels that are kind of important at the top we've got inzone out of Zone that's your green",
    "start": "769880",
    "end": "776600"
  },
  {
    "text": "and and red lines up there and it it'll tell us where the traffic is and right",
    "start": "776600",
    "end": "781800"
  },
  {
    "text": "now what is it inzone same AZ is red and or no cross a is red and same a is green",
    "start": "781800",
    "end": "789720"
  },
  {
    "text": "uh underneath that we have success rate that's important we want to make sure that our service is successful and that our traffic is getting where it needs to",
    "start": "789720",
    "end": "796040"
  },
  {
    "text": "go and it's coming back and then there's latency to the right of that and latency",
    "start": "796040",
    "end": "801320"
  },
  {
    "text": "is pretty important because you know obviously we want to see that we're not you know struggling with regards to",
    "start": "801320",
    "end": "807040"
  },
  {
    "text": "latency in one zone or any particular ular",
    "start": "807040",
    "end": "811399"
  },
  {
    "text": "Zone sorry fam so that was demo one now we're going",
    "start": "813120",
    "end": "819240"
  },
  {
    "text": "to go into some scenarios all right now I'm not going to",
    "start": "819240",
    "end": "825360"
  },
  {
    "text": "jump the gun in the first scenario we want to take a look at the effective latency and we're going to inject 600 milliseconds into a single zone it's the",
    "start": "825360",
    "end": "832720"
  },
  {
    "text": "West zone so that comprises our West orders and our Oakland Warehouse",
    "start": "832720",
    "end": "840600"
  },
  {
    "text": "so we injected our latency so 600 milliseconds for the warehouse and we can still see that we have all of our",
    "start": "840600",
    "end": "846160"
  },
  {
    "text": "end points all nine end points and we can still see our",
    "start": "846160",
    "end": "851880"
  },
  {
    "text": "statistics everything is at 100% success rate and we can see that you know we're seeing our latency being load balanced",
    "start": "851880",
    "end": "858399"
  },
  {
    "text": "across all three of our warehouses yeah remember two three we've got three",
    "start": "858399",
    "end": "863480"
  },
  {
    "text": "requesters three warehouses so right now everything's talking to everything so latency is only imp in a third of the",
    "start": "863480",
    "end": "869959"
  },
  {
    "text": "requests for each client and to add topology where routing",
    "start": "869959",
    "end": "876320"
  },
  {
    "text": "it's as easy as adding annotation to your services and it's there and you can check it by you know just you know",
    "start": "876320",
    "end": "882440"
  },
  {
    "text": "getting a get grap for your annotation you can see that it's there it's on auto and you can also see it in",
    "start": "882440",
    "end": "888240"
  },
  {
    "text": "events which is nice and helpful if you like to look at events one thing to note is sometimes especially when it falls",
    "start": "888240",
    "end": "894800"
  },
  {
    "text": "out it might not show up in events immediately it can take a while so again having additional ways to measure",
    "start": "894800",
    "end": "901160"
  },
  {
    "text": "success or to measure impacts is pretty important again that's why observability and metrics are kind of key when you",
    "start": "901160",
    "end": "907519"
  },
  {
    "text": "want to use topology aware routing and again we still have all nine of our endpoints it's all about the end points",
    "start": "907519",
    "end": "913680"
  },
  {
    "text": "yep connection based routing you know as long as we've got enough end points it's going to be",
    "start": "913680",
    "end": "919360"
  },
  {
    "text": "happy so what does our deployment in the west look like we can use Link or D viz again see all of our statistics of sux",
    "start": "919360",
    "end": "925320"
  },
  {
    "text": "rates request per seconds and of all of our latencies and you can see everything's kind of uh being now to",
    "start": "925320",
    "end": "932199"
  },
  {
    "text": "that one zone yeah if you got all the latency contained to one zone you know someone",
    "start": "932199",
    "end": "937800"
  },
  {
    "text": "might ask is that a good thing or a bad thing I don't know depends on your application right it depends on your",
    "start": "937800",
    "end": "943000"
  },
  {
    "text": "traffic flow but being able to understand kind of what the impact is is is important because then you can start",
    "start": "943000",
    "end": "948920"
  },
  {
    "text": "to apply that to your specific needs and your application's needs and decide whether that's a good thing or bad thing",
    "start": "948920",
    "end": "954639"
  },
  {
    "text": "and how you're going to address it yeah if you're using gsbs you know where you have people on the East Coast where",
    "start": "954639",
    "end": "960000"
  },
  {
    "text": "their connections are fine and you're just only degrading the West Coast so you know there's a scenario as well where you know you can have where some",
    "start": "960000",
    "end": "966000"
  },
  {
    "text": "of your traffic is still being completed you just have one region still being affected so what does this look like in",
    "start": "966000",
    "end": "974440"
  },
  {
    "text": "grafana sorry",
    "start": "974440",
    "end": "977720"
  },
  {
    "text": "fam so we can see that now we're no longer spending money but we can see",
    "start": "979839",
    "end": "985880"
  },
  {
    "text": "that again our latency in the west is there because that's how topology of where routing is going to send our traffic we're still at 100% success rate",
    "start": "985880",
    "end": "992920"
  },
  {
    "text": "so we're good we don't have enough latency to start impacting that so we're healthy you know it's this is responded",
    "start": "992920",
    "end": "999079"
  },
  {
    "text": "well right if you were to inject a whole bunch of latency we would probably see success rates going down in that single",
    "start": "999079",
    "end": "1005079"
  },
  {
    "text": "zone and obviously our latency graph would be through the roof but you know",
    "start": "1005079",
    "end": "1010199"
  },
  {
    "text": "we didn't kick this thing too hard it's it's it's performing pretty well but again understanding and seeing what's",
    "start": "1010199",
    "end": "1016399"
  },
  {
    "text": "happening is very very important if you want to man manage this thing you know long term and have control over you know",
    "start": "1016399",
    "end": "1022240"
  },
  {
    "text": "what's going on in your applications and environment we're going to go ahead and reset our warehouse make everything healthy",
    "start": "1022240",
    "end": "1028438"
  },
  {
    "text": "again yeah we don't want anything to bleed between these and to remove topology aware routing is as simple as just you know running your uh Cube",
    "start": "1028439",
    "end": "1034880"
  },
  {
    "text": "cuddle annotate and just delete The annotation if you're familiar with that command just put a minus on the end and we can check our work we can see",
    "start": "1034880",
    "end": "1042160"
  },
  {
    "text": "our annotation gone we're going to check events and we going see that even events it tells us that it's not disabled",
    "start": "1042160",
    "end": "1050720"
  },
  {
    "text": "so one thing you may encounter is a partial failure in a single zone where you could have uh only half of your",
    "start": "1051320",
    "end": "1058600"
  },
  {
    "text": "application uh responding with 500s yeah say you had like a failure in the back end or in Middle tier but your front end",
    "start": "1058600",
    "end": "1065039"
  },
  {
    "text": "is still responding but half of the responses are 500s going you know no no no no no I can't serve this so this is",
    "start": "1065039",
    "end": "1073080"
  },
  {
    "text": "not really a site outage this is an application impact and this is what we also consider an inbound failure",
    "start": "1073080",
    "end": "1080799"
  },
  {
    "text": "condition right or an inbound failure failure condition something that topology Warrior routing might not pick",
    "start": "1080799",
    "end": "1086600"
  },
  {
    "text": "up and again we still have all of our end points all nine end",
    "start": "1086600",
    "end": "1091720"
  },
  {
    "text": "points so what does the stat look like we see in viz that all of our success or success rates are going down because",
    "start": "1092600",
    "end": "1098799"
  },
  {
    "text": "it's being spread across all of our regions yeah without connection based routing we're going to spread that",
    "start": "1098799",
    "end": "1104440"
  },
  {
    "text": "around but you know the success rate is pretty high I don't think you you know depending on your application you might not even notice this if you didn't have",
    "start": "1104440",
    "end": "1110960"
  },
  {
    "text": "observability but with observability you can see that things are starting to be impacted and get ahead of the curve on",
    "start": "1110960",
    "end": "1118400"
  },
  {
    "text": "it oops so let's go see what it looks like in",
    "start": "1118679",
    "end": "1125799"
  },
  {
    "text": "grafana so we can see our success rat is going down all across all regions because again we don't have topology we",
    "start": "1126720",
    "end": "1131880"
  },
  {
    "text": "routing enabled and it's being spread across all of them evenly you can also see the latencies",
    "start": "1131880",
    "end": "1137320"
  },
  {
    "text": "coming back down right because we got rid of that so it's nice to see recovery from",
    "start": "1137320",
    "end": "1142679"
  },
  {
    "text": "failure conditions as well so let's go ahead and again add topology our routing simple as adding an",
    "start": "1142679",
    "end": "1150080"
  },
  {
    "text": "annotation we're going to go ahead and double check our work make sure you know I always like to double check we can see",
    "start": "1150080",
    "end": "1155840"
  },
  {
    "text": "it's there we can look at our events we see it's enabled",
    "start": "1155840",
    "end": "1161080"
  },
  {
    "text": "again again we can see all of our end points so what does look like in BZ",
    "start": "1161080",
    "end": "1169919"
  },
  {
    "text": "so now we can see our success rates going up in the other regions and it dropping in the one so again we're",
    "start": "1169919",
    "end": "1175360"
  },
  {
    "text": "containing the issue into one single zone because connection based routing right we're plugged directly in and you",
    "start": "1175360",
    "end": "1181320"
  },
  {
    "text": "know again you have to decide with your specific application and everything and your environment whether that's a good",
    "start": "1181320",
    "end": "1186840"
  },
  {
    "text": "thing or a bad thing but it's expecting as we would you know or it's behaving as we would expect right it's keeping that",
    "start": "1186840",
    "end": "1192720"
  },
  {
    "text": "in zone and and you know it's it it's again up to you whether that's good or",
    "start": "1192720",
    "end": "1198480"
  },
  {
    "text": "bad but it's very predictable and what does it look like a f again we like to go back and have nice little",
    "start": "1198480",
    "end": "1205360"
  },
  {
    "text": "visuals we can see that everything is going up in the other regions is our success rates but in the uh Central it's",
    "start": "1205360",
    "end": "1211440"
  },
  {
    "text": "just going down still so everything is now pinned to that with topology our routing yeah and you can see right it's",
    "start": "1211440",
    "end": "1216880"
  },
  {
    "text": "keeping things in zone since we've turned it on if we watch this for a little bit you're going to see that one zone drop to like a 50% success rate so",
    "start": "1216880",
    "end": "1224640"
  },
  {
    "text": "again not totally out we we're not you know experiencing an outage per se but we're experiencing an application",
    "start": "1224640",
    "end": "1233039"
  },
  {
    "text": "impact so let's go ahead and fix our warehouse get everything back to normal remove topology we routing again with",
    "start": "1234159",
    "end": "1240720"
  },
  {
    "text": "the simple annotation of removing it and check our work again simple grab it's no longer there we're see the vents that",
    "start": "1240720",
    "end": "1249080"
  },
  {
    "text": "has been disabled just as we expected one thing you may encounter is",
    "start": "1249080",
    "end": "1255039"
  },
  {
    "text": "just a complete failure something happened where everything's gone so let's go ahead and just delete our",
    "start": "1255039",
    "end": "1260520"
  },
  {
    "text": "Boston Warehouse we're going to use the big hammer just bam gone so let's go look at our end",
    "start": "1260520",
    "end": "1268000"
  },
  {
    "text": "points now we're missing end points we don't we no longer have our nine end points that we are required to have for",
    "start": "1268000",
    "end": "1274159"
  },
  {
    "text": "topology we routing yeah and this is pretty extreme we talked earlier about you know wanting to have enough end",
    "start": "1274159",
    "end": "1279960"
  },
  {
    "text": "points to spread you know to not meet your Corum right you want to make sure that if you're going to use this you",
    "start": "1279960",
    "end": "1286240"
  },
  {
    "text": "spread that load wide enough that if you just lose a few end points in the zone you're going to still have enough end",
    "start": "1286240",
    "end": "1291320"
  },
  {
    "text": "points to keep topology where routing active we're you know we're kind of on the extreme side here right three end",
    "start": "1291320",
    "end": "1296840"
  },
  {
    "text": "points per zone is the minimum and that's what we chose but we wanted to be able to show failure conditions you know clearly in a quick manner because we",
    "start": "1296840",
    "end": "1303600"
  },
  {
    "text": "only have 35 minutes right so what's this say we're going to use again link or D viz to be able to",
    "start": "1303600",
    "end": "1309559"
  },
  {
    "text": "view this and we can see everything's being spread across our success rates are",
    "start": "1309559",
    "end": "1315480"
  },
  {
    "text": "still high because things are going to the other workloads",
    "start": "1315480",
    "end": "1320519"
  },
  {
    "text": "so let's go ahead and restore Boston yeah this is a little different than the other ones because we want to",
    "start": "1323360",
    "end": "1328559"
  },
  {
    "text": "show you the failure while topology where routing is engaged because if we were just to engage it it would just pop",
    "start": "1328559",
    "end": "1334039"
  },
  {
    "text": "right back out right that wouldn't be any fun so now we can see everything in uh",
    "start": "1334039",
    "end": "1340080"
  },
  {
    "text": "grafana starting to stabilize we still have our uh cross AC traffic going on",
    "start": "1340080",
    "end": "1347279"
  },
  {
    "text": "so let's go ahead and add topology our rounding now again simple annotation we're going to double check",
    "start": "1350600",
    "end": "1355960"
  },
  {
    "text": "our work make sure everything's good which it is look at our events we can",
    "start": "1355960",
    "end": "1361080"
  },
  {
    "text": "see that a wait and before we do anything just remember right now we haven't hit it with the hammer yet",
    "start": "1361080",
    "end": "1367000"
  },
  {
    "text": "topology we routing is engaged you know if we let things run a little bit we're going to see that we're going to keep traffic in zone until we pull out the",
    "start": "1367000",
    "end": "1374679"
  },
  {
    "text": "hammer let's go ahead and list our end points now we have all as",
    "start": "1374679",
    "end": "1379840"
  },
  {
    "text": "expected let's go ahead and look on Graff on how that looks you can see the red line is going",
    "start": "1379840",
    "end": "1387039"
  },
  {
    "text": "back down to zero we're keeping traffic in zone we're avoiding costs we're avoiding cross a latency Life's good you",
    "start": "1387039",
    "end": "1394159"
  },
  {
    "text": "know if we let this run for a second I think we got a second here yeah we got seconds yeah we can see that that's",
    "start": "1394159",
    "end": "1400400"
  },
  {
    "text": "going to go and then we're going to pull out our big clown hammer and and we're going to hit this this uh Zone in the",
    "start": "1400400",
    "end": "1406159"
  },
  {
    "text": "East here take out the service yeah so our uh a boss Gary decided to go",
    "start": "1406159",
    "end": "1413120"
  },
  {
    "text": "take a stroll through the uh Data Center and he tripped over cable and whole thing just went down so again whole whole data center is",
    "start": "1413120",
    "end": "1420880"
  },
  {
    "text": "down because you know someone went through strolling our data Hall and we didn't have enough power leads yeah",
    "start": "1420880",
    "end": "1426159"
  },
  {
    "text": "again now we don't have R9 end points so how did how did it react to",
    "start": "1426159",
    "end": "1433120"
  },
  {
    "text": "that so let's look at our events and this is where Tom was talking about how sometimes events you know I",
    "start": "1433120",
    "end": "1438880"
  },
  {
    "text": "think who here is familiar with vents and sometimes how it you know likes to show them together where it does it anyone experienced that with the vents",
    "start": "1438880",
    "end": "1444960"
  },
  {
    "text": "and and I know people have yeah yeah it took a little while you know as we're developing this to to kind of get a feel",
    "start": "1444960",
    "end": "1450720"
  },
  {
    "text": "for you know what these things meant right and another important thing that you know I cut out because of interest",
    "start": "1450720",
    "end": "1456400"
  },
  {
    "text": "in time is it's important to note what version of kubernetes you're on because these things are still beta and they're",
    "start": "1456400",
    "end": "1461919"
  },
  {
    "text": "going to behave differently and we actually Flynn in the back hooked us up with the folks who you know do topology were routing and we asked them some",
    "start": "1461919",
    "end": "1468760"
  },
  {
    "text": "questions and he said yeah you know it's going to be best to be on the latest because these things get improvements as",
    "start": "1468760",
    "end": "1474159"
  },
  {
    "text": "as it goes so make sure you read the documentation you understand what the status of some of these features are how",
    "start": "1474159",
    "end": "1480080"
  },
  {
    "text": "to enable them you know if you have to do extra extra steps and you know how they're going to react and where to look for things right so let's go ahead and",
    "start": "1480080",
    "end": "1487039"
  },
  {
    "text": "look at our status Andis again and we can see that right now",
    "start": "1487039",
    "end": "1492799"
  },
  {
    "text": "everything's working",
    "start": "1492799",
    "end": "1496240"
  },
  {
    "text": "let's go ahead and look how it's in grafana did we enable topology awar",
    "start": "1498760",
    "end": "1505679"
  },
  {
    "text": "routing we did that should have been um should have failed did it kick out it",
    "start": "1505679",
    "end": "1512360"
  },
  {
    "text": "did kick out so it looks kind of odd go back to grafana right so when it kicked out Linker D took over and we're right",
    "start": "1512360",
    "end": "1519279"
  },
  {
    "text": "back at that default state of that 2 to1 traffic we didn't get the event but what we're seeing here is exactly what we",
    "start": "1519279",
    "end": "1525799"
  },
  {
    "text": "would see you know in a status where you know where we wouldn't have topology aware routing enabled now we didn't get",
    "start": "1525799",
    "end": "1531720"
  },
  {
    "text": "the event but we can still measure using observability and this is why it's important it's not always going to be",
    "start": "1531720",
    "end": "1537000"
  },
  {
    "text": "clear if this thing kicks out due to end points at some point it may put an event in there but in my experience it's been",
    "start": "1537000",
    "end": "1543320"
  },
  {
    "text": "kind of spotty right and no bag I'm not bagging on it but this is just one of those realities that I'm sure we all",
    "start": "1543320",
    "end": "1548760"
  },
  {
    "text": "deal with is that it's never cut and dry 100% of the time whether something's working having observability having",
    "start": "1548760",
    "end": "1555440"
  },
  {
    "text": "metrics and being able to leverage those things is really key to being able to you know have success with some of these",
    "start": "1555440",
    "end": "1561360"
  },
  {
    "text": "features in kubernetes back that was complet second one's go back to our slides sorry",
    "start": "1561360",
    "end": "1568320"
  },
  {
    "text": "fam My laptop decided to go all over the place for me all right so all is not lost you know what do we observe here",
    "start": "1568320",
    "end": "1575559"
  },
  {
    "text": "kind of what's the takeaway right we explored like two options without topology or routing we're going to pay",
    "start": "1575559",
    "end": "1581679"
  },
  {
    "text": "for cross AZ traffic right with just default link through D it's going to",
    "start": "1581679",
    "end": "1586760"
  },
  {
    "text": "give us some some reliability and some redundancy but we're going to pay for cross aisy traffic with the",
    "start": "1586760",
    "end": "1593600"
  },
  {
    "text": "apology we're routing it's a just straightforward easy to deploy way to you know do connection based routing and",
    "start": "1593600",
    "end": "1600039"
  },
  {
    "text": "avoid cross- ay traffic but there are certain types of failures that you have to be aware of and manage and mitigate",
    "start": "1600039",
    "end": "1606279"
  },
  {
    "text": "and having observability having metrics and having these external mechanisms that are aware of things like layer 7",
    "start": "1606279",
    "end": "1613399"
  },
  {
    "text": "you know routing and and the conditions that go through there in your uh inband failures really is an advantage right so",
    "start": "1613399",
    "end": "1621960"
  },
  {
    "text": "you know you could end up if you're not setting up the proper observability and watching what's going on you could end",
    "start": "1621960",
    "end": "1627520"
  },
  {
    "text": "up worse off than you know not than just paying for that traffic right so you",
    "start": "1627520",
    "end": "1632880"
  },
  {
    "text": "have to have a lot of design considerations in place and you need to be able to watch what's going",
    "start": "1632880",
    "end": "1638200"
  },
  {
    "text": "on so conclusion right great tool for keeping traffic in zone it's very",
    "start": "1638200",
    "end": "1643600"
  },
  {
    "text": "straightforward it's very easy and quick to enable you know you could mitigate some of this stuff yourself if you",
    "start": "1643600",
    "end": "1649480"
  },
  {
    "text": "wanted to write you know an operator or something that would keep an eye on success rate so say you have observability and you go all right if",
    "start": "1649480",
    "end": "1655840"
  },
  {
    "text": "success rate drops below this I'm just going to turn topology Weare routing off for now send an alert you know and then",
    "start": "1655840",
    "end": "1662840"
  },
  {
    "text": "we're going to go check it out so there's ways you can mitigate it it's going to involve some work on your part it's going to involve some maintenance",
    "start": "1662840",
    "end": "1668120"
  },
  {
    "text": "on your part right and making sure things are behaving the way you want using a service mesh for observability",
    "start": "1668120",
    "end": "1674000"
  },
  {
    "text": "is huge right it's a great compliment to topology we routing and that Fe you know",
    "start": "1674000",
    "end": "1679360"
  },
  {
    "text": "failures that are inbound failures or things that don't remove endpoints are not going to kick topology we routing",
    "start": "1679360",
    "end": "1685799"
  },
  {
    "text": "out so you need to deal with that yourself and you need to be able to watch things so the Shameless plugs we have a",
    "start": "1685799",
    "end": "1695120"
  },
  {
    "text": "product that we run internally it's spy and Enterprise for linkerd it's oss the great stuff that you love in there it's",
    "start": "1695120",
    "end": "1701159"
  },
  {
    "text": "got some additional things you know we've got zero trust security Global traffic management we can watch all this",
    "start": "1701159",
    "end": "1708120"
  },
  {
    "text": "layer 7even stuff that we care about we do some hardening and we've got some Advanced uh Zone aware load balancing in",
    "start": "1708120",
    "end": "1714039"
  },
  {
    "text": "there as well that uh is a request based you know versus connection based you can go check it out you know you could stop",
    "start": "1714039",
    "end": "1720840"
  },
  {
    "text": "by the booth check talk to us you know and uh we'd love to answer questions you know about some of the stuff it's it's",
    "start": "1720840",
    "end": "1727600"
  },
  {
    "text": "our passion we got some sessions coming up we are this one on Thursday at 11 but",
    "start": "1727600",
    "end": "1734200"
  },
  {
    "text": "we've got three more sessions coming up please go check these guys out they are fantastic fantastic speakers they are",
    "start": "1734200",
    "end": "1739519"
  },
  {
    "text": "much more experienced than we are they're not up here sweating their theirselves to death wondering you know",
    "start": "1739519",
    "end": "1746399"
  },
  {
    "text": "what's going to happen and we didn't have that many failures so you lost your",
    "start": "1746399",
    "end": "1751880"
  },
  {
    "text": "bets meet us at the kiosk come by check it out get some goods and uh have a",
    "start": "1751880",
    "end": "1757519"
  },
  {
    "text": "conversation with us you know we'd love to talk about Linker D talk about your apps and how we can make your life better we got some cool t-shirts like",
    "start": "1757519",
    "end": "1763760"
  },
  {
    "text": "one Tom's wearing you know with linky and uh Ferris on there which was of the mascots for link and then Ferris is the",
    "start": "1763760",
    "end": "1769519"
  },
  {
    "text": "one for rust if you're not familiar with rust it's the proxy it's a quick we're rust based micro proxy security fast",
    "start": "1769519",
    "end": "1776080"
  },
  {
    "text": "light footprint and thank you thanks for coming out we appreciate it I",
    "start": "1776080",
    "end": "1781880"
  },
  {
    "text": "mean you guys are the folks that you know keep us doing what we do every day and you know enduring the suffering any",
    "start": "1781880",
    "end": "1789600"
  },
  {
    "text": "questions if you have a question feel free to St up step up to one of the microphones we'd love to answer it",
    "start": "1789600",
    "end": "1797278"
  },
  {
    "text": "everyone's going to go get their lunch that's where everyone's going I I'm assuming it's",
    "start": "1800760",
    "end": "1805679"
  },
  {
    "text": "lunchtime question there's no dumb questions do you use",
    "start": "1809320",
    "end": "1815080"
  },
  {
    "text": "foro um it was called demo magic but we have a better one that we use called",
    "start": "1815080",
    "end": "1820399"
  },
  {
    "text": "demos and it can be found on our GitHub page you can talk to Flynn about it this is the master of it so the question was",
    "start": "1820399",
    "end": "1826880"
  },
  {
    "text": "what do we use for our demo our C demo he almost yelled at",
    "start": "1826880",
    "end": "1835360"
  },
  {
    "text": "me it was user error with my py python problem",
    "start": "1835960",
    "end": "1841919"
  },
  {
    "text": "yeah. and it's a lot more powerful too it's much better this one was a little",
    "start": "1844159",
    "end": "1849519"
  },
  {
    "text": "barbaric demo",
    "start": "1849519",
    "end": "1853519"
  },
  {
    "text": "yeah and that was our goal was be able to lift this stuff right out of our readme and whatnot it's just you know",
    "start": "1869200",
    "end": "1874600"
  },
  {
    "text": "the the the timeline for getting it working and and fixing python took a back seat right demos are hard but we",
    "start": "1874600",
    "end": "1880880"
  },
  {
    "text": "wanted to do it live a and there's a lot of commands I can't remember all those oh yeah yeah yeah check it out yeah it's",
    "start": "1880880",
    "end": "1888720"
  },
  {
    "text": "it made it this actually work so I wasn't so nervous if I was going to up here and watch everyone like mistype",
    "start": "1888720",
    "end": "1894120"
  },
  {
    "text": "Cube cuddle commands all day I would been really judged so no no nope thank you oh thank you yes",
    "start": "1894120",
    "end": "1903000"
  },
  {
    "text": "thank you that is not but um if if you go",
    "start": "1903000",
    "end": "1908919"
  },
  {
    "text": "check out boy and IO that's us on uh GitHub and you look in the repositories",
    "start": "1908919",
    "end": "1914279"
  },
  {
    "text": "there's all kinds of cool stuff out there we've got a service mesh Academy that we do every month that Flynn and I",
    "start": "1914279",
    "end": "1919840"
  },
  {
    "text": "tend to host and there's a uh there's some great resources in service mesh Academy some of my repositories that",
    "start": "1919840",
    "end": "1926120"
  },
  {
    "text": "this is based on are out there we've got some different playgrounds if you look for search for playground you'll probably see my stuff pardon me the",
    "start": "1926120",
    "end": "1932720"
  },
  {
    "text": "readmes tend to be 80% complete but the automation works and it allows you to get Hands-On using k3d clusters on your",
    "start": "1932720",
    "end": "1940120"
  },
  {
    "text": "local machine yeah and that is uh that's my",
    "start": "1940120",
    "end": "1946200"
  },
  {
    "text": "personal one but I've got some stuff out there too you're welcome to roote around there if you want but buoyant",
    "start": "1946200",
    "end": "1951519"
  },
  {
    "text": "IO yeah yeah it it's going to keep yeah so in our case right we had the minimum",
    "start": "1951519",
    "end": "1957200"
  },
  {
    "text": "number of end points all took us one endpoint but that was really about you know being able to trigger it reliably and quickly in 35 minutes but that's why",
    "start": "1957200",
    "end": "1964360"
  },
  {
    "text": "I said spread it wider have more end points you know if you have to make your services a or your end your actual",
    "start": "1964360",
    "end": "1969840"
  },
  {
    "text": "instances a little bit smaller but spread it wider it's going to prevent like if you just lose a couple end points here and there you're not going",
    "start": "1969840",
    "end": "1976519"
  },
  {
    "text": "to kick out and again depending on your app you might want to right if You' got some app that it's important like if I lose one endpoint that the world ends",
    "start": "1976519",
    "end": "1983440"
  },
  {
    "text": "then you probably want to do that but it's all about design and and the other thing that you know if you read the",
    "start": "1983440",
    "end": "1989320"
  },
  {
    "text": "documentation they'll tell you what the weaknesses are they're very honest about it and one is that you know you tend to",
    "start": "1989320",
    "end": "1995200"
  },
  {
    "text": "want to have very stable and well-distributed traffic if if you things fluctuate if you want to put this",
    "start": "1995200",
    "end": "2001039"
  },
  {
    "text": "thing together with horizontal pod Auto scaling and again not to beat up on anybody you can get some interesting",
    "start": "2001039",
    "end": "2006440"
  },
  {
    "text": "results because things will change and you can get where the two things are interacting and it's a little bit",
    "start": "2006440",
    "end": "2012720"
  },
  {
    "text": "crazy yep it's request based routing right so we're looking in each request and we're making the optimal decision",
    "start": "2012720",
    "end": "2018639"
  },
  {
    "text": "based on that request so we can react in real time and that's why and again topology we routing you know works great",
    "start": "2018639",
    "end": "2025880"
  },
  {
    "text": "it's very simple it's just you want you know using observability with it makes it more reliable",
    "start": "2025880",
    "end": "2033200"
  }
]