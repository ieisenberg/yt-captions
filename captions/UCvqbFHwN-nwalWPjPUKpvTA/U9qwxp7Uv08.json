[
  {
    "text": "hello everyone thank you for coming to our session on the change block tracking my name is Shing Yang uh I work for",
    "start": "80",
    "end": "7839"
  },
  {
    "text": "VMware by Broadcom i'm also a co-chair of Kubernetes 6 storage and the data",
    "start": "7839",
    "end": "13599"
  },
  {
    "text": "protection working group",
    "start": "13599",
    "end": "17719"
  },
  {
    "text": "uh Rob can you help us with that no all right we'll we'll talk over them hi I'm",
    "start": "22160",
    "end": "27599"
  },
  {
    "text": "Mark Lobby i'm uh the open source product manager at VH Casten and I'm joined by one of my colleagues he'll",
    "start": "27599",
    "end": "35040"
  },
  {
    "text": "tell us about the other colleague just now hi I'm KL Banza i'm one of the",
    "start": "35040",
    "end": "40760"
  },
  {
    "text": "technical staff at BH uh I'm one of the co-authors of the CBT cap in Kubernetes",
    "start": "40760",
    "end": "48960"
  },
  {
    "text": "uh Prasad and Ivan are two others prasad was going to join us today but unfortunately couldn't make it um I'm",
    "start": "48960",
    "end": "56640"
  },
  {
    "text": "also one of the authors of the CSI edition for this cap right",
    "start": "56640",
    "end": "64600"
  },
  {
    "text": "all right i'll just try to talk over him all right today we're going to go over change block tracking its",
    "start": "65920",
    "end": "72240"
  },
  {
    "text": "motivation history architecture implementation with respect to Kubernetes we'll demonstrate a workflow",
    "start": "72240",
    "end": "79360"
  },
  {
    "text": "and then leave you with resources and how to get involved we want you to adopt it and we'll answer any Q&A at the",
    "start": "79360",
    "end": "86280"
  },
  {
    "text": "end with that let's get started so change block",
    "start": "86280",
    "end": "91600"
  },
  {
    "text": "tracking is what everybody expects when it comes to Kubernetes and cloudnative storage and applications however it is a",
    "start": "91600",
    "end": "98880"
  },
  {
    "text": "lacking feature when we compare to traditional storage how do you do the difference between any two volume",
    "start": "98880",
    "end": "105000"
  },
  {
    "text": "snapshots well you need to take another full backup but everybody else in",
    "start": "105000",
    "end": "110560"
  },
  {
    "text": "traditional VMs and bare metal world already has this so in in order to come",
    "start": "110560",
    "end": "116960"
  },
  {
    "text": "down on what we measure RPO RTO for all backup and recovery and disaster",
    "start": "116960",
    "end": "123520"
  },
  {
    "text": "recovery we need to be able to get to change block tracking in order to make sure that if the difference between any",
    "start": "123520",
    "end": "130000"
  },
  {
    "text": "two volume snapshots is nothing well I don't want to take a whole another backup a whole another consumption of",
    "start": "130000",
    "end": "136959"
  },
  {
    "text": "storage network compute and memory no I want a zero delta zero metadata pointers",
    "start": "136959",
    "end": "143440"
  },
  {
    "text": "etc right so that is what change block tracking brings and we've brought this forward because everybody is coming to",
    "start": "143440",
    "end": "150959"
  },
  {
    "text": "Kubernetes from the VM world right now they want change block tracking because they expect it and you needed to go to a",
    "start": "150959",
    "end": "158000"
  },
  {
    "text": "proprietary vendor's driver in order to get change block tracking or explain why",
    "start": "158000",
    "end": "163120"
  },
  {
    "text": "it doesn't work with CSI we've changed that and this is a critical unblocker",
    "start": "163120",
    "end": "168879"
  },
  {
    "text": "for for Kubernetes adoption we created kept 3314 to do this and we have now",
    "start": "168879",
    "end": "175760"
  },
  {
    "text": "completed implementation so the history is that we",
    "start": "175760",
    "end": "181440"
  },
  {
    "text": "started this well over two years ago at the data protection working group uh the design has gone through three major",
    "start": "181440",
    "end": "187720"
  },
  {
    "text": "iterations and we've had lots of fun defending improving going backwards",
    "start": "187720",
    "end": "193440"
  },
  {
    "text": "improving again and defending over three major revisions and it's taken SIG",
    "start": "193440",
    "end": "198800"
  },
  {
    "text": "storage SIG O SIG uh architecture the API reviewers CSI reviewers storage",
    "start": "198800",
    "end": "206400"
  },
  {
    "text": "vendors backup vendors the community contributions it takes a village quite frankly to get to this point it's not",
    "start": "206400",
    "end": "212799"
  },
  {
    "text": "been fun but we've arrived and we're very excited to have arrived with an implementation in the CSI specification",
    "start": "212799",
    "end": "220080"
  },
  {
    "text": "and now we're ready and finished with the implementation finished with the endtoend testing this is now ready to",
    "start": "220080",
    "end": "227519"
  },
  {
    "text": "ship with Kubernetes 133 alpha APIs so we'll talk more about how to adopt it",
    "start": "227519",
    "end": "232799"
  },
  {
    "text": "next but uh that's where we are",
    "start": "232799",
    "end": "237920"
  },
  {
    "text": "so I'm going to hand over to Shane to explain our architecture and implementation",
    "start": "237920",
    "end": "244000"
  },
  {
    "text": "thanks Mark so to support CBT in Kubernetes uh and",
    "start": "244000",
    "end": "251920"
  },
  {
    "text": "in CSI we added a new snapshot metadata service in the CSI spec we also added",
    "start": "251920",
    "end": "260400"
  },
  {
    "text": "two new CSI RPCs get metadata allocated",
    "start": "260400",
    "end": "265759"
  },
  {
    "text": "retrieves the metadata of the uh allocated blocks for a single snapshot",
    "start": "265759",
    "end": "272320"
  },
  {
    "text": "get metadata delta retrieves the metadata for the change blocks of two",
    "start": "272320",
    "end": "278160"
  },
  {
    "text": "snapshots for the same block volume now this feature supports block volume only",
    "start": "278160",
    "end": "284880"
  },
  {
    "text": "support for file volume is out of scope for this design but we can consider that",
    "start": "284880",
    "end": "291280"
  },
  {
    "text": "in the future",
    "start": "291280",
    "end": "294400"
  },
  {
    "text": "to add CPD support in Kubernetes we also introduced two Kubernetes snapshot",
    "start": "296720",
    "end": "302680"
  },
  {
    "text": "metadata gRPC APIs get metadata allocated and get metadata",
    "start": "302680",
    "end": "309560"
  },
  {
    "text": "delta the backup software will be calling this Kubernetes snapshot",
    "start": "309560",
    "end": "314960"
  },
  {
    "text": "metadata APIs to retrieve snapshot metadata this design is very different from other",
    "start": "314960",
    "end": "322479"
  },
  {
    "text": "Kubernetes APIs we have designed so far in six storage we did this way to avoid",
    "start": "322479",
    "end": "329120"
  },
  {
    "text": "overloading the Kubernetes API server in the worst case scenario well every block",
    "start": "329120",
    "end": "335280"
  },
  {
    "text": "is changed we could potentially get five gigabytes of metadata per one terabytes",
    "start": "335280",
    "end": "342000"
  },
  {
    "text": "per one terabytes of volume data so that would definitely um overwhelm the",
    "start": "342000",
    "end": "348320"
  },
  {
    "text": "Kubernetes API server if we choose to use uh the custom resource to store the",
    "start": "348320",
    "end": "355960"
  },
  {
    "text": "metadata we implemented this Kubernetes snapshot metadata in the snapshot",
    "start": "355960",
    "end": "362000"
  },
  {
    "text": "metadata sidecar a GC service this GC service calls CSI driver",
    "start": "362000",
    "end": "369039"
  },
  {
    "text": "to retrieve the snapshot metadata we do have a new snapshot metadata",
    "start": "369039",
    "end": "375919"
  },
  {
    "text": "service CRD it contains information on how to connect to the GPC service a CSI",
    "start": "375919",
    "end": "383360"
  },
  {
    "text": "driver creates this CR advertise that the gRPC service is deployed together",
    "start": "383360",
    "end": "389919"
  },
  {
    "text": "with the CSI driver and the backup software will be fetching the CR and",
    "start": "389919",
    "end": "396720"
  },
  {
    "text": "tries to connect to the snapshot metadata sidecar the gRPC service",
    "start": "396720",
    "end": "404840"
  },
  {
    "text": "now let me talk about the backup approach with volume snapshots in a typical backup a backup",
    "start": "406479",
    "end": "415039"
  },
  {
    "text": "software creates a volume snapshot from a PVC that is part of a application it",
    "start": "415039",
    "end": "422000"
  },
  {
    "text": "tries to back up then it creates a PVC from that volume snapshot launches a",
    "start": "422000",
    "end": "427919"
  },
  {
    "text": "data mover pod and attach the PVC to the pod and then the data more part will try",
    "start": "427919",
    "end": "434720"
  },
  {
    "text": "to copy data to the backup storage repository the backup software manages",
    "start": "434720",
    "end": "442319"
  },
  {
    "text": "the life cycle of the volume",
    "start": "442319",
    "end": "446160"
  },
  {
    "text": "snapshots a persistent volume can be a uh volume mode that is either block or",
    "start": "448360",
    "end": "454960"
  },
  {
    "text": "file system that specifies how this volume will be consumed by container",
    "start": "454960",
    "end": "460800"
  },
  {
    "text": "it's either a formatted file system or a block device usually it is more",
    "start": "460800",
    "end": "466560"
  },
  {
    "text": "efficient to consume the volume through the raw block mode compared to through",
    "start": "466560",
    "end": "472000"
  },
  {
    "text": "the file system in in this talk we're going to be focusing on the block mode",
    "start": "472000",
    "end": "478800"
  },
  {
    "text": "use case",
    "start": "478800",
    "end": "482039"
  },
  {
    "text": "so um in this talk we are going to focus on the snapshot metadata access",
    "start": "490240",
    "end": "498840"
  },
  {
    "text": "optimization we are going to um talk about how this works currently without",
    "start": "498840",
    "end": "505120"
  },
  {
    "text": "this feature without CBT uh a backup software will have to call vendor",
    "start": "505120",
    "end": "511479"
  },
  {
    "text": "specific APIs to retrieve snapshot metadata for a full backup up it needs",
    "start": "511479",
    "end": "518320"
  },
  {
    "text": "to query the allocated blocks for incremental backup it needs to query the",
    "start": "518320",
    "end": "525120"
  },
  {
    "text": "change blocks so that is highly",
    "start": "525120",
    "end": "530240"
  },
  {
    "text": "inefficient with this feature we are going to have Kubernetes snapshot",
    "start": "534600",
    "end": "540480"
  },
  {
    "text": "metadata API it provides a vendor agnostic way to retrieve the snapshot",
    "start": "540480",
    "end": "547480"
  },
  {
    "text": "metadata so now the backup software can call the scan API to query allocated or",
    "start": "547480",
    "end": "555200"
  },
  {
    "text": "changed blocks this is a optional CSI feature so",
    "start": "555200",
    "end": "560240"
  },
  {
    "text": "a CSI driver can implement this it is a alpha feature as mentioned earlier",
    "start": "560240",
    "end": "567600"
  },
  {
    "text": "now let me hand it over to car who will talk about the CSI driver deployment",
    "start": "567600",
    "end": "573200"
  },
  {
    "text": "thanks Shing so as Shing introduced this topic right there are two APIs really uh",
    "start": "573200",
    "end": "580240"
  },
  {
    "text": "there two gRPC APIs there's the CSI API which act the CSI driver will implement",
    "start": "580240",
    "end": "588320"
  },
  {
    "text": "uh and that API is the one that actually provides the raw data but Kubernetes",
    "start": "588320",
    "end": "593519"
  },
  {
    "text": "applications don't talk the right language for a CSI driver also the CSI",
    "start": "593519",
    "end": "598760"
  },
  {
    "text": "API is uh is only has one client it's not designed for multiple clients the",
    "start": "598760",
    "end": "605200"
  },
  {
    "text": "CSI the Kubernetes domain clients are not the CSI driver clients instead we",
    "start": "605200",
    "end": "610800"
  },
  {
    "text": "have a a sidecar which intercepts and uh protects the CSI driver from Kubernetes",
    "start": "610800",
    "end": "617200"
  },
  {
    "text": "clients it performs um all the authorization arbback checks and name",
    "start": "617200",
    "end": "624880"
  },
  {
    "text": "translation required to take CSI to take Kubernetes objects into the CSI name space so a CSI driver will deploy this",
    "start": "624880",
    "end": "633360"
  },
  {
    "text": "sidecar uh over a unique socket the same unique socket they use today right for",
    "start": "633360",
    "end": "638399"
  },
  {
    "text": "the other side cars which they deploy uh the sidecar will implement the Kubernetes version of this API it's",
    "start": "638399",
    "end": "645680"
  },
  {
    "text": "almost identical to the CSI version with the exception that it takes a authorization token security token and",
    "start": "645680",
    "end": "653120"
  },
  {
    "text": "it takes names of Kubernetes objects",
    "start": "653120",
    "end": "658279"
  },
  {
    "text": "so this is an optional feature not every CSI driver will have it right and so how",
    "start": "658279",
    "end": "663760"
  },
  {
    "text": "does an application figure out this exists so when the CSI driver installs",
    "start": "663760",
    "end": "668880"
  },
  {
    "text": "this they are required to create a CR named for the C CSI driver that CR",
    "start": "668880",
    "end": "675200"
  },
  {
    "text": "contains the endpoint information of this of the Kubernetes service namely the sidecar um typically a CSI driver",
    "start": "675200",
    "end": "683440"
  },
  {
    "text": "will install a service object and the service object will have information uh",
    "start": "683440",
    "end": "689040"
  },
  {
    "text": "you know the CS the name space of the CSI drive other things can be used to create a DNS name the CR is also",
    "start": "689040",
    "end": "696160"
  },
  {
    "text": "required to have a CA certificate and an audience string this is for mutual",
    "start": "696160",
    "end": "701320"
  },
  {
    "text": "authentication right as you'll see in the next few slides and uh so security",
    "start": "701320",
    "end": "706959"
  },
  {
    "text": "uh authentication so I'm going to go over the workflow of",
    "start": "706959",
    "end": "712720"
  },
  {
    "text": "a backup application so the first thing a backup application would do would be to",
    "start": "712720",
    "end": "718720"
  },
  {
    "text": "determine whether this feature is available and it's a very simple thing it just looks for the CR based on the",
    "start": "718720",
    "end": "725279"
  },
  {
    "text": "name of the CSI driver of course it gets that name of the CSI driver from its either the PV or the or the volume",
    "start": "725279",
    "end": "732040"
  },
  {
    "text": "snapshot right any of these objects once that's done the backup application",
    "start": "732040",
    "end": "739200"
  },
  {
    "text": "has to ask the Kubernetes API for an O token and this O token has to have the",
    "start": "739200",
    "end": "746720"
  },
  {
    "text": "audience string specified from the CR and we'll get to the reasons in the next few",
    "start": "746720",
    "end": "753480"
  },
  {
    "text": "slides now at this point with the data from the CR we have the endpoint right",
    "start": "753480",
    "end": "759360"
  },
  {
    "text": "and we have the audience string so the backup application is now in a position to make the a call to the sidecar using",
    "start": "759360",
    "end": "767440"
  },
  {
    "text": "the Kubernetes snapshot metadata gRPC API this is not going to the Kubernetes",
    "start": "767440",
    "end": "772480"
  },
  {
    "text": "API server anymore at this point the gRPC call is",
    "start": "772480",
    "end": "779200"
  },
  {
    "text": "oneway authentication right the backup application trusts that the sidecar is",
    "start": "779200",
    "end": "784560"
  },
  {
    "text": "what it is but the sidecar knows nothing about the backup application however in every one of these RPC calls is the is",
    "start": "784560",
    "end": "791839"
  },
  {
    "text": "the Kubernetes authentication string we've obtained from the previous step so the first thing the snapshot the sidecar",
    "start": "791839",
    "end": "798720"
  },
  {
    "text": "does is contact the Kubernetes API to validate that authentication string so",
    "start": "798720",
    "end": "804320"
  },
  {
    "text": "now we've reached mutual authentications uh at this point the",
    "start": "804320",
    "end": "809839"
  },
  {
    "text": "snapshot uh sidecar uh will also look up the the names of",
    "start": "809839",
    "end": "815360"
  },
  {
    "text": "the snapshots which are part of the API calls and um validate access through",
    "start": "815360",
    "end": "820800"
  },
  {
    "text": "subject access review APIs and also pull in the metadata of that those volumes so",
    "start": "820800",
    "end": "827040"
  },
  {
    "text": "that it can translate the call into the language of the CSI driver namely pull",
    "start": "827040",
    "end": "832560"
  },
  {
    "text": "out the CSI ids the volume the snapshot ids and the volume ids uh at this point",
    "start": "832560",
    "end": "838240"
  },
  {
    "text": "it just makes it proxies the call through the CSI snapshot metadata gRPC",
    "start": "838240",
    "end": "843279"
  },
  {
    "text": "call to the CSI driver csi driver you notice has nothing to do with the Kubernetes side of things it's totally",
    "start": "843279",
    "end": "849440"
  },
  {
    "text": "shielded from this uh CSI driver does its things and data is streamed back",
    "start": "849440",
    "end": "855920"
  },
  {
    "text": "through the same gRPC call totally bypassing the API server so the the only",
    "start": "855920",
    "end": "861600"
  },
  {
    "text": "actual contact with the CSI with the API server is to read the CR to do the",
    "start": "861600",
    "end": "867519"
  },
  {
    "text": "subject access review and and O calls all right to make this work right",
    "start": "867519",
    "end": "874720"
  },
  {
    "text": "you have to have adequate security policy i'm not going to go into much detail in this slide there's a lot of",
    "start": "874720",
    "end": "880399"
  },
  {
    "text": "stuff there but the most important things to note is that use of the token request token review and subject access",
    "start": "880399",
    "end": "887519"
  },
  {
    "text": "reviews APIs which are not normally touched by backup software so the CSI",
    "start": "887519",
    "end": "893120"
  },
  {
    "text": "driver has to have permissions for subject access review and token review to validate and check permissions and",
    "start": "893120",
    "end": "899839"
  },
  {
    "text": "the backup application when it installs itself must make sure that it has adequate permission to perform a token",
    "start": "899839",
    "end": "906320"
  },
  {
    "text": "review a token request most of the other permissions exist just because they're backup applications and",
    "start": "906320",
    "end": "912000"
  },
  {
    "text": "CSI drivers so the work we've done which",
    "start": "912000",
    "end": "917519"
  },
  {
    "text": "includes developing the sidecar is all in the Kubernetes CSI external snapshot",
    "start": "917519",
    "end": "922800"
  },
  {
    "text": "metadata repository there's a lot of stuff there the it's got the gRPC",
    "start": "922800",
    "end": "927839"
  },
  {
    "text": "protobuff specifications stubs and mocks for the Kubernetes snapshot metadata",
    "start": "927839",
    "end": "933120"
  },
  {
    "text": "metadata API the CSI metadata um the CSI gRPC spec is in the CSI repo right you",
    "start": "933120",
    "end": "941360"
  },
  {
    "text": "can reference it from this repo but you know most most application developers won't need that the sidecar container",
    "start": "941360",
    "end": "947920"
  },
  {
    "text": "logic is there uh as well as the CRD for this uh for the snapshot metadata CRD",
    "start": "947920",
    "end": "955360"
  },
  {
    "text": "uh we have utility packages to help you as an if you are an application",
    "start": "955360",
    "end": "960959"
  },
  {
    "text": "developer right help you write and use this stuff we You know it's it's complicated to deal with so many",
    "start": "960959",
    "end": "967279"
  },
  {
    "text": "different with this workflow but we have an iterator package that does all the steps for you if you if you're using Go",
    "start": "967279",
    "end": "974000"
  },
  {
    "text": "if you're not using Go then the protobuffs and all the supporting stuff are available for whatever language you",
    "start": "974000",
    "end": "980360"
  },
  {
    "text": "want and there are other additional resources to support CSI driver development there are tools we've added",
    "start": "980360",
    "end": "986399"
  },
  {
    "text": "there which are used by CSI drivers developers u there are other resources",
    "start": "986399",
    "end": "992560"
  },
  {
    "text": "accessible the the Kubernetes CSI development developer documentation has been updated to include this feature and",
    "start": "992560",
    "end": "999120"
  },
  {
    "text": "talk about u the change block tracking feature it also has links to pretty much",
    "start": "999120",
    "end": "1004800"
  },
  {
    "text": "everything we're going through in the slides okay we'll go through a",
    "start": "1004800",
    "end": "1010680"
  },
  {
    "text": "demonstration all right um sorry where are we yep",
    "start": "1010680",
    "end": "1018079"
  },
  {
    "text": "uh I'll just talk a little bit about what I'm going to demonstrate and then we'll go through a video to show this so",
    "start": "1018079",
    "end": "1024240"
  },
  {
    "text": "um it's a little bit of an eye chart right but you know uh we're going to use",
    "start": "1024240",
    "end": "1030000"
  },
  {
    "text": "the CSI host path driver the CSI hostpath driver is not a quote unquote",
    "start": "1030000",
    "end": "1035918"
  },
  {
    "text": "product ready driver it's a development test tool which CSI developers use to run unit tests and other things um this",
    "start": "1035919",
    "end": "1043600"
  },
  {
    "text": "was the first vehicle we used to implement this this spec and test it out so u the CSI hostspot driver has a mode",
    "start": "1043600",
    "end": "1050720"
  },
  {
    "text": "of deployment right where you can imple you can attach this site the the",
    "start": "1050720",
    "end": "1056480"
  },
  {
    "text": "snapshot metadata sidecar we developed um it has because it's used for lots of",
    "start": "1056480",
    "end": "1062480"
  },
  {
    "text": "testing this driver only with block board block volume mode supports this",
    "start": "1062480",
    "end": "1067600"
  },
  {
    "text": "feature but you know it's it's a minor issue real CSI drivers will support this feature for volume or file system mode",
    "start": "1067600",
    "end": "1074960"
  },
  {
    "text": "so we have a very simple app which is going to create a PVC and mount it in a",
    "start": "1074960",
    "end": "1081200"
  },
  {
    "text": "block boat we will add data to that uh PVC and take a snapshot right then we'll",
    "start": "1081200",
    "end": "1089200"
  },
  {
    "text": "use this C this uh pod over here uh create an application called the CSI",
    "start": "1089200",
    "end": "1095039"
  },
  {
    "text": "client which is one of the tools we provide in the snapshot uh repo sorry",
    "start": "1095039",
    "end": "1101200"
  },
  {
    "text": "external snapshot metadata repo um and that tool provides mechanis the",
    "start": "1101200",
    "end": "1106559"
  },
  {
    "text": "mechanism to actually use this iterator and we'll work on things it's in a pod by itself because typically backup",
    "start": "1106559",
    "end": "1112400"
  },
  {
    "text": "applications will be in different name spaces right uh to work um after we do",
    "start": "1112400",
    "end": "1118000"
  },
  {
    "text": "that we'll look at the allocated blocks then we'll go back to the app and you know cause a change add some more blocks",
    "start": "1118000",
    "end": "1124960"
  },
  {
    "text": "to the to the volume and then snapshot it again and then once again use the tool to see the change blocks",
    "start": "1124960",
    "end": "1133200"
  },
  {
    "text": "okay let me get to the All",
    "start": "1138200",
    "end": "1144480"
  },
  {
    "text": "right okay I will move this around to hasters we've seen this already so okay",
    "start": "1149320",
    "end": "1157360"
  },
  {
    "text": "so the first thing we're going to do is create this application so",
    "start": "1157360",
    "end": "1164400"
  },
  {
    "text": "it's just a simple app so we we use a CSI host path",
    "start": "1164600",
    "end": "1173280"
  },
  {
    "text": "u storage class it's part of the host CSI host path driver create a very simple app which is in this case is just",
    "start": "1173280",
    "end": "1179600"
  },
  {
    "text": "a busy box and you know create the pod with the raw PBC uh since it's a",
    "start": "1179600",
    "end": "1186400"
  },
  {
    "text": "demonstration we're actually just going to create a few blocks using DD right i just used an odd odd number of block",
    "start": "1186400",
    "end": "1193160"
  },
  {
    "text": "addresses just so that we can view a finite amount of data here so we take a",
    "start": "1193160",
    "end": "1198559"
  },
  {
    "text": "first snapshot the volume snapshot class is part of the CSI hostpod driver right",
    "start": "1198559",
    "end": "1204000"
  },
  {
    "text": "see it's ready to go and now we'll view the allocated blocks in the system so we",
    "start": "1204000",
    "end": "1210000"
  },
  {
    "text": "talked about the the CR so I just choose this point to you know look at the",
    "start": "1210000",
    "end": "1215200"
  },
  {
    "text": "actual CR which is installed you notice in the spec section there is an address",
    "start": "1215200",
    "end": "1220320"
  },
  {
    "text": "there is an audience string and there's a CA certificate which was all which were all provided by this CSI driver on",
    "start": "1220320",
    "end": "1226480"
  },
  {
    "text": "installation okay that's critical information it gives the it's needed by this tool and the backup application to",
    "start": "1226480",
    "end": "1232720"
  },
  {
    "text": "connect to that sidecard all right let's continue",
    "start": "1232720",
    "end": "1239799"
  },
  {
    "text": "all right so now we're going to actually launch that tool um this this launcher",
    "start": "1242480",
    "end": "1248799"
  },
  {
    "text": "right it's um I'll show you the the YAML a little bit later right it runs in a",
    "start": "1248799",
    "end": "1253840"
  },
  {
    "text": "separate pod and in this case we've invoked it with the name of that um PVC",
    "start": "1253840",
    "end": "1259679"
  },
  {
    "text": "right sorry the name of the volume snapshot and um the name and the name space of the volume snapshot this one",
    "start": "1259679",
    "end": "1266320"
  },
  {
    "text": "it's telling us there are five blocks there are five blocks and these are the bite offsets of the blocks uh the five",
    "start": "1266320",
    "end": "1273039"
  },
  {
    "text": "blocks present and uh these are the allocated blocks the volume just as we",
    "start": "1273039",
    "end": "1280158"
  },
  {
    "text": "expect so moving on let's modify the volume and create a",
    "start": "1280200",
    "end": "1285679"
  },
  {
    "text": "second snapshot so I just chose to add a couple of even numbered blocks and changed one",
    "start": "1285679",
    "end": "1291919"
  },
  {
    "text": "of the odd number blocks so once again we take a",
    "start": "1291919",
    "end": "1298840"
  },
  {
    "text": "snapshot wait for it to be ready and now we can view the change",
    "start": "1298840",
    "end": "1304640"
  },
  {
    "text": "blocks so the tool is invoked in pretty much similar manner except that this",
    "start": "1304640",
    "end": "1310000"
  },
  {
    "text": "time uh we have two snapshots specified the new snapshot and the previous snapshot and as you can see it's showing",
    "start": "1310000",
    "end": "1317200"
  },
  {
    "text": "us the changes only the last one it doesn't tell you that you know it it just tells you what has changed between",
    "start": "1317200",
    "end": "1322799"
  },
  {
    "text": "the these two it's not doesn't give you any history which one came first or the or the others just just the way this",
    "start": "1322799",
    "end": "1329640"
  },
  {
    "text": "is so moving on uh just to confirm right we view the",
    "start": "1329640",
    "end": "1336080"
  },
  {
    "text": "allocated blocks again because we have grown the volume slightly so we run the",
    "start": "1336080",
    "end": "1341280"
  },
  {
    "text": "same command just with the single snapshot and you'll see it's got seven",
    "start": "1341280",
    "end": "1346640"
  },
  {
    "text": "blocks as we've defined all right so a little segue into the this",
    "start": "1346640",
    "end": "1354080"
  },
  {
    "text": "tool and the codebase so this is the Kubernetes CS uh external snapshot",
    "start": "1354080",
    "end": "1361360"
  },
  {
    "text": "metadata repo so there is the examples uh subdirectory there in which you'll",
    "start": "1361360",
    "end": "1366799"
  },
  {
    "text": "find the snapshot metadata lister tool and this one um so this tool has got",
    "start": "1366799",
    "end": "1373760"
  },
  {
    "text": "uses this iterative function it also has the pod YAML which for the for what we",
    "start": "1373760",
    "end": "1379679"
  },
  {
    "text": "just launched for that CSX client the YAML is it takes when you first run run it the YAML takes a little bit of time",
    "start": "1379679",
    "end": "1385039"
  },
  {
    "text": "to start because it actually extracts the whole tool out there and builds it in your cluster and then copies the data",
    "start": "1385039",
    "end": "1392080"
  },
  {
    "text": "and that's done in an init container and then it's ready to go with the compile tool waiting for you",
    "start": "1392080",
    "end": "1399559"
  },
  {
    "text": "so if we look at the um at the code right it uses this iterator package",
    "start": "1401440",
    "end": "1408159"
  },
  {
    "text": "which we provided in this repo and um it's called get snapshot metadata is the",
    "start": "1408159",
    "end": "1413760"
  },
  {
    "text": "is the entry point",
    "start": "1413760",
    "end": "1417600"
  },
  {
    "text": "and if you look at the the tool it's mainly b driven by the arguments in the data structure so you know we have",
    "start": "1419159",
    "end": "1425919"
  },
  {
    "text": "arguments for the API clients the emitter callbacks right name spaces the",
    "start": "1425919",
    "end": "1430960"
  },
  {
    "text": "snapshot names previous snapshot name and there are other things which are not going to go in the demo including things",
    "start": "1430960",
    "end": "1436720"
  },
  {
    "text": "like what's the starting offset say your app your backup failed in some period of",
    "start": "1436720",
    "end": "1441760"
  },
  {
    "text": "time and you want to restart you could you if you knew where you were if you've done some checkpointing you could skip",
    "start": "1441760",
    "end": "1447600"
  },
  {
    "text": "things again and restart from some particular point so there there are a lot of options out there which are kind",
    "start": "1447600",
    "end": "1452880"
  },
  {
    "text": "of useful for backup vendors the data is actually returned through a callback interface called the emitter interface",
    "start": "1452880",
    "end": "1459840"
  },
  {
    "text": "over here and uh we'll see",
    "start": "1459840",
    "end": "1465720"
  },
  {
    "text": "that the iterator itself will handle every aspect of that workflow so you",
    "start": "1465720",
    "end": "1471120"
  },
  {
    "text": "know they really don't have to mess with anything other than create your CSI clients uh",
    "start": "1471120",
    "end": "1477039"
  },
  {
    "text": "ultimately the iterator calls these two functions get allocated blocks or get change blocks i mean basically that's",
    "start": "1477039",
    "end": "1483760"
  },
  {
    "text": "that's the the two thing the two choices you have when you when you create the iterator you specify one snapshot or",
    "start": "1483760",
    "end": "1489600"
  },
  {
    "text": "specify two",
    "start": "1489600",
    "end": "1494240"
  },
  {
    "text": "okay i think that okay that's the end of",
    "start": "1494679",
    "end": "1500279"
  },
  {
    "text": "this let's go back to",
    "start": "1500279",
    "end": "1504159"
  },
  {
    "text": "this okay all right we got to see the code so uh",
    "start": "1508039",
    "end": "1515760"
  },
  {
    "text": "these slides have already been uploaded to SCED uh you can just download them",
    "start": "1515760",
    "end": "1521440"
  },
  {
    "text": "right now because you can take pictures but I want you to just download the PDF and start clicking on these things go",
    "start": "1521440",
    "end": "1526960"
  },
  {
    "text": "directly to the primary resources go directly to the repo uh and then quite",
    "start": "1526960",
    "end": "1533039"
  },
  {
    "text": "frankly if you're done with the code then it's time to talk to management or other influencers or your other peer",
    "start": "1533039",
    "end": "1539440"
  },
  {
    "text": "engineers to help implement and adopt this um we've got a bunch of other times",
    "start": "1539440",
    "end": "1544880"
  },
  {
    "text": "when we've presented these materials so here's a whole bunch of links things to send people to read at night and so",
    "start": "1544880",
    "end": "1550919"
  },
  {
    "text": "on so if you're a backup vendor please come and join us and we'll help you",
    "start": "1550919",
    "end": "1556799"
  },
  {
    "text": "adopt this thing if you're a storage vendor please come adopt this thing and",
    "start": "1556799",
    "end": "1561840"
  },
  {
    "text": "we'll help you if you are the rest of the Kubernetes community please talk to",
    "start": "1561840",
    "end": "1567279"
  },
  {
    "text": "your backup vendors talk to your storage vendors and say \"I want my change block tracking.\" Now",
    "start": "1567279",
    "end": "1573600"
  },
  {
    "text": "uh it's really that simple because we are already talking to a number of vendors and projects but we always need",
    "start": "1573600",
    "end": "1580080"
  },
  {
    "text": "your support in doing so not only that we need your feedback so please get involved come and",
    "start": "1580080",
    "end": "1587279"
  },
  {
    "text": "join us at the data protection working group uh we meet bi-weekly uh in the morning Pacific time uh but if you want",
    "start": "1587279",
    "end": "1595279"
  },
  {
    "text": "to reach out asynchronously to us in Slack now uh we'll respond as quickly as",
    "start": "1595279",
    "end": "1601760"
  },
  {
    "text": "possible and if you want we can set up meetings but it's a friendly group uh amazing people we've already identified",
    "start": "1601760",
    "end": "1608640"
  },
  {
    "text": "a number of the contributors that have already helped out we want to contri amongst our ranks as well so",
    "start": "1608640",
    "end": "1616159"
  },
  {
    "text": "thanks for your time follow up with us in any way we'll go on to Q&A",
    "start": "1616159",
    "end": "1621720"
  },
  {
    "text": "now please come to the microphone if you have questions",
    "start": "1621720",
    "end": "1627400"
  },
  {
    "text": "uh yes obviously a lot of vendors already have snapshotting functionality or running on Amazon or something like",
    "start": "1628320",
    "end": "1633600"
  },
  {
    "text": "that um will the Kubernetes snapshots show up as snapshots on the underlying",
    "start": "1633600",
    "end": "1639200"
  },
  {
    "text": "vendor so in AWS as an EBS snapshot will you see them in both interfaces or will",
    "start": "1639200",
    "end": "1644720"
  },
  {
    "text": "they just appear in the Kubernetes world oh if you're talking of Kubernetes",
    "start": "1644720",
    "end": "1650159"
  },
  {
    "text": "snapshots right this spec operates on Kubernetes snapshots it's up to the CSI",
    "start": "1650159",
    "end": "1655919"
  },
  {
    "text": "driver which created those snapshots to support the CBT spec but we actually",
    "start": "1655919",
    "end": "1660960"
  },
  {
    "text": "give it give them the ids they have put in the Kubernetes objects give them back to the CSI driver",
    "start": "1660960",
    "end": "1667760"
  },
  {
    "text": "so you don't and much of it answers your question so you don't know yet or you're expecting that they will or at the end",
    "start": "1667760",
    "end": "1674240"
  },
  {
    "text": "of the day there's still volume snapshots we don't touch those all we're doing is doing the difference to show",
    "start": "1674240",
    "end": "1680240"
  },
  {
    "text": "through metadata which blocks have changed effectively that's all the API effectively does so same snapshots same",
    "start": "1680240",
    "end": "1687799"
  },
  {
    "text": "vendors just a different way to now access and find out which blocks I need to retrieve to get me up to date does it",
    "start": "1687799",
    "end": "1695279"
  },
  {
    "text": "make sense sir i think so thank you okay I can add one more thing to that it's",
    "start": "1695279",
    "end": "1700399"
  },
  {
    "text": "the CSI driver that generates the difference for example you mentioned the",
    "start": "1700399",
    "end": "1705520"
  },
  {
    "text": "EBS direct API well that comes from EBS so if uh AWS EBS was going to extend",
    "start": "1705520",
    "end": "1712480"
  },
  {
    "text": "their CSS driver to support this they would use their API under the covers to source the information we do not look at",
    "start": "1712480",
    "end": "1720080"
  },
  {
    "text": "the P the volumes ourselves the sidecar talks to the CSI driver which does the efficient thing for its storage maybe",
    "start": "1720080",
    "end": "1727440"
  },
  {
    "text": "that's closer to what you're looking for and uh the AWS EBS team has participated",
    "start": "1727440",
    "end": "1734960"
  },
  {
    "text": "in the data protection working group they're thinking about this but please request it and they will uh probably",
    "start": "1734960",
    "end": "1740799"
  },
  {
    "text": "advance their agenda faster next question please okay so this CBT",
    "start": "1740799",
    "end": "1747440"
  },
  {
    "text": "requires CSI driver vendors to open a service generate some CI certificates so",
    "start": "1747440",
    "end": "1754559"
  },
  {
    "text": "do you have any materials how to generate them how to rotate them because",
    "start": "1754559",
    "end": "1759919"
  },
  {
    "text": "this is new to CSI driver vendors uh no we leave that to the CSI driver vendor",
    "start": "1759919",
    "end": "1767200"
  },
  {
    "text": "of how they do it every platform seems to have different ways of doing things right so we specify what the we well we",
    "start": "1767200",
    "end": "1775760"
  },
  {
    "text": "we give a specification for example even the arbback policies we mentioned we say what has to be set up we don't provide",
    "start": "1775760",
    "end": "1782799"
  },
  {
    "text": "any YAML to do it we leave it to the backup app and the CSA driver to do it",
    "start": "1782799",
    "end": "1788080"
  },
  {
    "text": "because every cluster is managed differently so we cannot get into that space okay thanks",
    "start": "1788080",
    "end": "1795559"
  },
  {
    "text": "so um currently I'm we are using snapshots for nothing really because",
    "start": "1795760",
    "end": "1804080"
  },
  {
    "text": "there's so much distrust in having a snapshot",
    "start": "1804080",
    "end": "1809399"
  },
  {
    "text": "so like what exactly are snapshots good for like usually you would uh use PG",
    "start": "1809399",
    "end": "1817279"
  },
  {
    "text": "backup or MySQL backup for anything relevant and then there's like the stuff",
    "start": "1817279",
    "end": "1823200"
  },
  {
    "text": "that shouldn't have to have backups to begin with like badly written",
    "start": "1823200",
    "end": "1828399"
  },
  {
    "text": "applications which store their state in some ubious file thingy",
    "start": "1828399",
    "end": "1834159"
  },
  {
    "text": "so there's an excellent white paper there was a talk just before this which talked about the range of of u the whole",
    "start": "1834159",
    "end": "1841039"
  },
  {
    "text": "spectrum of backups and what you expect volume snapshots right give you uh crash",
    "start": "1841039",
    "end": "1846679"
  },
  {
    "text": "consistency at the lowest level right if you want to go higher level to application I think what Dave called it",
    "start": "1846679",
    "end": "1852640"
  },
  {
    "text": "application consistency then you do something like PG dump or you know or generated stuff there in between there's",
    "start": "1852640",
    "end": "1858720"
  },
  {
    "text": "quing the apps if your app has multiple volumes how do you do a group snapshot",
    "start": "1858720",
    "end": "1863919"
  },
  {
    "text": "you know there's there's a whole spectrum Sperum of of requirements depending on how complex your your",
    "start": "1863919",
    "end": "1869039"
  },
  {
    "text": "application is and how sophisticated your backup software is so this is you",
    "start": "1869039",
    "end": "1874240"
  },
  {
    "text": "know addressing the base level how to be efficient between two snapshots at the end of the day you need",
    "start": "1874240",
    "end": "1881360"
  },
  {
    "text": "primitives on many levels of the stack in order to assure data protection we you need this option no matter what and",
    "start": "1881360",
    "end": "1888399"
  },
  {
    "text": "the operators hopefully can call down to this if they need it there are many ways to solve this problem this is a",
    "start": "1888399",
    "end": "1894000"
  },
  {
    "text": "foundational one that we've needed forever okay thank you everybody",
    "start": "1894000",
    "end": "1899840"
  }
]