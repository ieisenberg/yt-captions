[
  {
    "text": "thank you very much thank you very much i'm really really excited for this session and i know it's the i am the",
    "start": "4880",
    "end": "11280"
  },
  {
    "text": "only thing between you and some nice cold beers at the end of the day so i'm gonna try my best to",
    "start": "11280",
    "end": "17119"
  },
  {
    "text": "entertain you but you let me know at the end you be the judge so this is the hitchhiker's guide to pod security",
    "start": "17119",
    "end": "24400"
  },
  {
    "text": "i have gone through the galaxies of pod security and condensed all the learnings",
    "start": "24400",
    "end": "29840"
  },
  {
    "text": "i've had into one little guidebook take you through oops we're going to take you through that guidebook",
    "start": "29840",
    "end": "36559"
  },
  {
    "text": "and i have a couple of goals for you in the next 35 minutes we're going to learn together",
    "start": "36559",
    "end": "42399"
  },
  {
    "text": "so my hope is that everybody leaves this session you go back to your lives and",
    "start": "42399",
    "end": "47760"
  },
  {
    "text": "you turn on pod security in your clusters and you report back if my learnings actually helped you with your",
    "start": "47760",
    "end": "54399"
  },
  {
    "text": "journey to pod security but i would love to see more secure kubernetes clusters",
    "start": "54399",
    "end": "60239"
  },
  {
    "text": "out there so what you're going to learn today is how to use some features in",
    "start": "60239",
    "end": "65280"
  },
  {
    "text": "kubernetes to achieve that so i hope hold me to this and let me know at the end that you'll feel comfortable going",
    "start": "65280",
    "end": "72640"
  },
  {
    "text": "back and turning this on if you don't please ask me for more i'm happy to give it to you",
    "start": "72640",
    "end": "78640"
  },
  {
    "text": "so our journey today has a few pit stops and hopefully do we have any hitchhikers go to the galaxy fans in the room i'll",
    "start": "78640",
    "end": "85520"
  },
  {
    "text": "make a few puns i'll make a few puns so you see the emojis up there there's already a few",
    "start": "85520",
    "end": "90799"
  },
  {
    "text": "and i i should have brought my hand towel up on the stage as well but i forgot it we're going to go over the pod",
    "start": "90799",
    "end": "96159"
  },
  {
    "text": "security concepts we're going to see it in action i have recorded demos i'm not cool",
    "start": "96159",
    "end": "101759"
  },
  {
    "text": "enough to do them live because i've seen the internet here today but you're going to be able to see them after the fact",
    "start": "101759",
    "end": "108240"
  },
  {
    "text": "and you're going to be able to take them with you and then i'm going to share some next steps how to turn it on how to get comfortable and how to use it in",
    "start": "108240",
    "end": "114560"
  },
  {
    "text": "your environment and be successful with it so we will go through all this and more",
    "start": "114560",
    "end": "120320"
  },
  {
    "text": "but i guess you want to know who you're talking to uh who's talking to you about this my",
    "start": "120320",
    "end": "125759"
  },
  {
    "text": "name is lockheed evanson lachlan evenson i listen to both you can call me hey mate or whatever i'm a product manager",
    "start": "125759",
    "end": "132640"
  },
  {
    "text": "at azure on the upstream team where we work in cloud native ecosystem tooling to help make folks successful in the",
    "start": "132640",
    "end": "139120"
  },
  {
    "text": "community you'll see me around uh in this space i'm a cncf ambassador i'm on",
    "start": "139120",
    "end": "144480"
  },
  {
    "text": "the governing board i've served on kubernetes steering i built a kubernetes release that hopefully didn't ruin your",
    "start": "144480",
    "end": "150400"
  },
  {
    "text": "life 1.16 if it did please give me that feedback i love travel language hiking and",
    "start": "150400",
    "end": "156000"
  },
  {
    "text": "experiencing different cultures i'd like to learn seven languages while i'm here on earth i know three currently if you",
    "start": "156000",
    "end": "162879"
  },
  {
    "text": "don't count australian and english as two different languages okay",
    "start": "162879",
    "end": "168560"
  },
  {
    "text": "good now you know who's talking to you we can get on with that thank you very much okay so let's get into the concepts",
    "start": "168560",
    "end": "175440"
  },
  {
    "text": "let's get into uh what we're here to talk about before i get into all the details i want",
    "start": "175440",
    "end": "182959"
  },
  {
    "text": "to go over what is pod security and you might have heard pod security or pod security administration",
    "start": "182959",
    "end": "189040"
  },
  {
    "text": "pod security is a built-in so i have everything bolded admission controller it is built in you don't need any extra",
    "start": "189040",
    "end": "195599"
  },
  {
    "text": "software to run this it is there and you can use it in kubernetes today",
    "start": "195599",
    "end": "200800"
  },
  {
    "text": "yeah what does it do it evaluates pod specifications against a predefined",
    "start": "200800",
    "end": "206560"
  },
  {
    "text": "set of pod security standards don't worry about that i'll tell you exactly what they are but they're super",
    "start": "206560",
    "end": "212560"
  },
  {
    "text": "important they are applied at the name space level so you apply policy to each name space",
    "start": "212560",
    "end": "218480"
  },
  {
    "text": "you would like pod security to apply to and they are action when pods are created",
    "start": "218480",
    "end": "224480"
  },
  {
    "text": "in those name spaces it is currently in beta or beta for you americans",
    "start": "224480",
    "end": "230879"
  },
  {
    "text": "and uh as of kubernetes 1.23 which is now not the current release the one behind",
    "start": "230879",
    "end": "236799"
  },
  {
    "text": "so we're on release in and it is planned if you all give it a thumbs up after this",
    "start": "236799",
    "end": "242239"
  },
  {
    "text": "to go to stable in 1.25 which is the next release i've got some links down",
    "start": "242239",
    "end": "247280"
  },
  {
    "text": "there just follow along here i'll post the deck later so you can grab the links and whatnot",
    "start": "247280",
    "end": "253120"
  },
  {
    "text": "excellent why i think it's important to say why am i telling you about this why would you i",
    "start": "253120",
    "end": "258880"
  },
  {
    "text": "want to know this so what we want to do again is level up the security of your kubernetes clusters",
    "start": "258880",
    "end": "265280"
  },
  {
    "text": "and the workloads specifically that are running on them so the pod this provides policy standards to",
    "start": "265280",
    "end": "271840"
  },
  {
    "text": "restrict pod privileges why would we want to restrict pod privileges to make our workloads more secure if they are",
    "start": "271840",
    "end": "279040"
  },
  {
    "text": "ever compromised we're reducing the surface area of attacks and therefore making your cluster more secure by doing",
    "start": "279040",
    "end": "285759"
  },
  {
    "text": "so as well they are simple and easy to use that was written on the cap for this feature they have to be super super",
    "start": "285759",
    "end": "292320"
  },
  {
    "text": "simple hopefully i can illustrate that they are indeed super simple uh pre-defined so you don't have to go make",
    "start": "292320",
    "end": "298960"
  },
  {
    "text": "up some magic standards there is a set that already exists and you simply can refer to them by name",
    "start": "298960",
    "end": "305280"
  },
  {
    "text": "it supports and encourages kubernetes security best practices so if you use",
    "start": "305280",
    "end": "310479"
  },
  {
    "text": "these you will be in line with pod security best practices out of the box you don't have to do much",
    "start": "310479",
    "end": "317039"
  },
  {
    "text": "and it performs validation only we'll cover this a little bit later but you might be thinking can i change resources",
    "start": "317039",
    "end": "323680"
  },
  {
    "text": "the answer is you cannot uh and we'll talk about some different options for doing that",
    "start": "323680",
    "end": "330400"
  },
  {
    "text": "what about the elephant in the room or maybe the fish in the room the babble fish in the room ah",
    "start": "330400",
    "end": "336240"
  },
  {
    "text": "what about pod security policy you may have heard of this or have used it and been terribly disappointed when you",
    "start": "336240",
    "end": "341840"
  },
  {
    "text": "heard it was deprecated it is going to be removed in kubernetes 1.25 so if you're still using it today don't worry",
    "start": "341840",
    "end": "348639"
  },
  {
    "text": "i'm going to go over how you can migrate to this so that you won't be broken in the next release",
    "start": "348639",
    "end": "354479"
  },
  {
    "text": "the difference is however it does not have peach feature parity with pod security policy so there are some",
    "start": "354479",
    "end": "360160"
  },
  {
    "text": "gotchas which i will call out specifically it does not support mutation and mutation is the ability to",
    "start": "360160",
    "end": "366479"
  },
  {
    "text": "change kubernetes resources server side when you're creating them okay",
    "start": "366479",
    "end": "373360"
  },
  {
    "text": "moving right along here i'm going to cover the migration story so if you're in this path i'm not going to go into terrible detail but there is a migration",
    "start": "373360",
    "end": "380639"
  },
  {
    "text": "plan it is well documented on the kubernetes docs so you can go from pod security policy",
    "start": "380639",
    "end": "386560"
  },
  {
    "text": "today which is deprecated and being removed in three months four months",
    "start": "386560",
    "end": "392160"
  },
  {
    "text": "two pod security which we're talking about today there is a link to do it there is",
    "start": "392160",
    "end": "397199"
  },
  {
    "text": "a well-defined process of how to do it and hopefully if you follow along i know a lot of time and effort has gone into",
    "start": "397199",
    "end": "403600"
  },
  {
    "text": "that if you're in that situation you should be okay",
    "start": "403600",
    "end": "409160"
  },
  {
    "text": "okay everybody following along so fast so far cool so far okay excellent",
    "start": "409759",
    "end": "416479"
  },
  {
    "text": "other secret other similar ecosystem tooling so i'd be remiss to mention that there is an ecosystem of tooling out",
    "start": "416479",
    "end": "423280"
  },
  {
    "text": "there you may have heard of some of these different tools but pod security is designed to provide",
    "start": "423280",
    "end": "429680"
  },
  {
    "text": "a built-in set of capabilities that include the security of your workloads it's not supposed to be the only thing",
    "start": "429680",
    "end": "435919"
  },
  {
    "text": "so it's complementary and composable that last point so there are other projects out there if",
    "start": "435919",
    "end": "442400"
  },
  {
    "text": "you want to do more complex things i'm going to name two they're on the screen there kivono and gatekeeper if you're",
    "start": "442400",
    "end": "447759"
  },
  {
    "text": "interested in more complex pod security use cases",
    "start": "447759",
    "end": "452800"
  },
  {
    "text": "uh pod security use cases and this is designed to be composable so",
    "start": "452800",
    "end": "458000"
  },
  {
    "text": "this is complementary you can use this and others as well and again again these aren't all of them",
    "start": "458000",
    "end": "463919"
  },
  {
    "text": "i just list two there uh for the interest of showing you some others",
    "start": "463919",
    "end": "468960"
  },
  {
    "text": "all right now we're going to get into the elements of of uh pod security we have a built-in admission controller uh",
    "start": "468960",
    "end": "476240"
  },
  {
    "text": "it may be run as a standalone web hook so if you are running earlier versions then the version this became beta in",
    "start": "476240",
    "end": "483039"
  },
  {
    "text": "which was 1.22 you can actually deploy this in earlier versions using a web hook administ admission controller won't",
    "start": "483039",
    "end": "490240"
  },
  {
    "text": "go into the details you just need to know that exists there are three different security of three different policy levels known as",
    "start": "490240",
    "end": "497599"
  },
  {
    "text": "pod security standards that range from permissive which means you can do everything to restrictive which means it",
    "start": "497599",
    "end": "505440"
  },
  {
    "text": "removes all the things that you shouldn't be doing that are known to be uh areas that cause security threats",
    "start": "505440",
    "end": "512080"
  },
  {
    "text": "the policies are applied with a specific mode per name space we'll go into these",
    "start": "512080",
    "end": "517120"
  },
  {
    "text": "modes and you can apply multiple modes to a namespace that'll be critical we'll go over that as well with different",
    "start": "517120",
    "end": "523518"
  },
  {
    "text": "policy levels and we'll go over why you might want to do that at the same time they're the elements you need to know",
    "start": "523519",
    "end": "529200"
  },
  {
    "text": "lost the monitor and we're back that was very dramatic",
    "start": "529200",
    "end": "535839"
  },
  {
    "text": "i didn't record that this isn't recorded that i know of okay so let's take a look",
    "start": "536080",
    "end": "542160"
  },
  {
    "text": "at the uh pod security standards these are the levels that you will be using",
    "start": "542160",
    "end": "548320"
  },
  {
    "text": "and they are pre-defined levels privilege which is open and unrestricted as i mentioned baseline",
    "start": "548320",
    "end": "553760"
  },
  {
    "text": "this covers the known privilege escalations while minimizing restrictions so this is",
    "start": "553760",
    "end": "559200"
  },
  {
    "text": "where you want to get to for a start if you have nothing and have never looked at this before the",
    "start": "559200",
    "end": "564240"
  },
  {
    "text": "goal state you want to get to is baseline for starters and then restricted is the highly restricted if",
    "start": "564240",
    "end": "570880"
  },
  {
    "text": "you have really high security interests this takes out the most uh security prone pieces of pod",
    "start": "570880",
    "end": "577440"
  },
  {
    "text": "specification and make sure that you're in the most restricted mode but be warned it may cause compatibility issues",
    "start": "577440",
    "end": "584560"
  },
  {
    "text": "so it's up to you to decide i think a great goal would be that every kubernetes cluster and every namespace",
    "start": "584560",
    "end": "590080"
  },
  {
    "text": "has baseline pod security standards applied to them i think that would be a cool goal to have",
    "start": "590080",
    "end": "597120"
  },
  {
    "text": "okay but what about these specific standards what are in these standards so they are well documented the link is",
    "start": "597120",
    "end": "603440"
  },
  {
    "text": "down the bottom i'm not going to go over every piece of the pod specification that is indeed restricted by these different pod",
    "start": "603440",
    "end": "610560"
  },
  {
    "text": "security standards but here are some examples of different fields so spec dot security contest assist",
    "start": "610560",
    "end": "617680"
  },
  {
    "text": "spec dot host network they are covered there is a wide range of uh",
    "start": "617680",
    "end": "623760"
  },
  {
    "text": "different pieces of the spot pod specification that are defined in that link down the bottom so too many to list",
    "start": "623760",
    "end": "630240"
  },
  {
    "text": "but you can go and have a look at the different pieces and i'll show you them in action so don't worry about writing them down again",
    "start": "630240",
    "end": "637120"
  },
  {
    "text": "applied per name space which allows you to have granular or different levels different levels of",
    "start": "637120",
    "end": "643120"
  },
  {
    "text": "security standards based on your needs per name space you may not want to apply restricted to cube system name space for",
    "start": "643120",
    "end": "650240"
  },
  {
    "text": "example but you may want to do it to your default workload namespace",
    "start": "650240",
    "end": "657279"
  },
  {
    "text": "okay elements of pod security so these things are",
    "start": "657279",
    "end": "663519"
  },
  {
    "text": "applied in a specific mode and there are three different modes and they can be set on a name space and you can have",
    "start": "663519",
    "end": "669440"
  },
  {
    "text": "different policy levels per name space as well the three modes are enforce",
    "start": "669440",
    "end": "674800"
  },
  {
    "text": "which says i will not allow this it'll strictly block it order it will post",
    "start": "674800",
    "end": "681200"
  },
  {
    "text": "something in the audit log and warn it will actually fire a warning message back to the user",
    "start": "681200",
    "end": "687440"
  },
  {
    "text": "stating that hey this is in violation of this policy and you might want to do something about it but it will allow it",
    "start": "687440",
    "end": "693200"
  },
  {
    "text": "to be created so you can actually get user feedback if you define a",
    "start": "693200",
    "end": "698240"
  },
  {
    "text": "non-compliant resource within force you'll actually get an error message back via cubectl that says this policy",
    "start": "698240",
    "end": "704160"
  },
  {
    "text": "has been violated okay so just remember those three",
    "start": "704160",
    "end": "709839"
  },
  {
    "text": "sorry water break okay",
    "start": "710399",
    "end": "716000"
  },
  {
    "text": "okay in addition and i'll show you how to do this with labels on a namespace you can pin policy so for each version",
    "start": "716000",
    "end": "721760"
  },
  {
    "text": "of kubernetes there will be changes to the pod security standards why is this important because if it",
    "start": "721760",
    "end": "728079"
  },
  {
    "text": "changes over time and you're not familiar with those changes and you upgrade kubernetes you might break your workload so this allows you to pin much",
    "start": "728079",
    "end": "735360"
  },
  {
    "text": "like everybody pins all their version dependencies and software right oh bad joke sorry too soon too soon but",
    "start": "735360",
    "end": "742480"
  },
  {
    "text": "you can pin the specific version spin the specific versions allows you to have consistent behavior you can say",
    "start": "742480",
    "end": "749279"
  },
  {
    "text": "baseline colon latest you can say baseline colon v1.22 and that will apply",
    "start": "749279",
    "end": "755600"
  },
  {
    "text": "because remember this is built into kubernetes so you can strictly version pin",
    "start": "755600",
    "end": "761200"
  },
  {
    "text": "okay so let's get on to enabling pod security and how we might go about doing that so",
    "start": "761200",
    "end": "767600"
  },
  {
    "text": "123 it's enabled by default because beta features are actually enabled by default",
    "start": "767600",
    "end": "773040"
  },
  {
    "text": "so you can use this on any 1.33 cluster out of the box if you're on 1.22 you'll need to set a",
    "start": "773040",
    "end": "780000"
  },
  {
    "text": "feature flag on the api server to actually allow this feature to be created",
    "start": "780000",
    "end": "785600"
  },
  {
    "text": "so if you don't have access to the flags that get run on the api server you might have to wait",
    "start": "785600",
    "end": "791360"
  },
  {
    "text": "you could also take the option down the bottom which the third bullet which is you can deploy a web hook admission",
    "start": "791360",
    "end": "797360"
  },
  {
    "text": "minister admission controller mouthful for me at this time of the day um and you can deploy that on versions",
    "start": "797360",
    "end": "804800"
  },
  {
    "text": "uh one dot lower than 1.22 if you want to test this out now i had to put the disclaimer here as we're going through",
    "start": "804800",
    "end": "811200"
  },
  {
    "text": "the galaxy don't test this in production no no no you might get unexpected uh",
    "start": "811200",
    "end": "816720"
  },
  {
    "text": "outcomes so get familiar with it in a development setting a lab cluster spin it up on kind start seeing how it works",
    "start": "816720",
    "end": "824320"
  },
  {
    "text": "before you turn it on i don't want anybody calling me saying lockheed you told me to do this and i blew up prod",
    "start": "824320",
    "end": "829839"
  },
  {
    "text": "don't want to hear it okay you've been warned okay",
    "start": "829839",
    "end": "835120"
  },
  {
    "text": "configuring so these are the two labels that you need to apply to a namespace so you have the pod.security.com",
    "start": "835120",
    "end": "842959"
  },
  {
    "text": "mode what are the three modes",
    "start": "842959",
    "end": "847199"
  },
  {
    "text": "excellent yeah you got them all enforce warn and audit they are the three modes",
    "start": "850720",
    "end": "856560"
  },
  {
    "text": "so that is required specifically to enable it the second one there is version",
    "start": "856560",
    "end": "861760"
  },
  {
    "text": "pinning which is completely optional there is so if you say hey loki i don't",
    "start": "861760",
    "end": "866800"
  },
  {
    "text": "want our users defining pod security policies or labels on namespaces no no i can't have that there is an admission",
    "start": "866800",
    "end": "873279"
  },
  {
    "text": "configuration way that you can do it by setting a config file and actually having the api",
    "start": "873279",
    "end": "879760"
  },
  {
    "text": "server pick it up so that users don't configure anything so there is a way to do that and there's",
    "start": "879760",
    "end": "885360"
  },
  {
    "text": "a way to do regexing excluding namespaces except um so you can do that",
    "start": "885360",
    "end": "890399"
  },
  {
    "text": "um so as i've got the star down there the bottom so possible modes there again and force audit one",
    "start": "890399",
    "end": "896720"
  },
  {
    "text": "these are important okay configuring so",
    "start": "896720",
    "end": "901839"
  },
  {
    "text": "the specific version can be applied for the enforcement mode why would we do this we have remember warn audit",
    "start": "901839",
    "end": "908800"
  },
  {
    "text": "um and uh what's the other one enforce exactly thank you",
    "start": "908800",
    "end": "915199"
  },
  {
    "text": "so you usually start with one give the users back warning and then you move on from warn to",
    "start": "915199",
    "end": "921440"
  },
  {
    "text": "enforce so uh this is you might be able to warn on one level and enforce on another for",
    "start": "921440",
    "end": "927199"
  },
  {
    "text": "example you might want to move from privileged to baseline so privileged to",
    "start": "927199",
    "end": "932800"
  },
  {
    "text": "baseline so you might enforce on privileged but warn on baseline so that you can",
    "start": "932800",
    "end": "939040"
  },
  {
    "text": "actually help the workloads that are currently deployed move up so the users will actually get a warning message their workloads will",
    "start": "939040",
    "end": "945920"
  },
  {
    "text": "still be deployed but you can say hey you're not in compliance fix it so you don't get this warning message they're actionable i'll",
    "start": "945920",
    "end": "951920"
  },
  {
    "text": "show you and then you can move from privileged up to baseline and then even",
    "start": "951920",
    "end": "957120"
  },
  {
    "text": "subsequently up to restricted we're good so far everyone",
    "start": "957120",
    "end": "963120"
  },
  {
    "text": "up in the rafters good see thumbs up excellent okay we're going to go into some demos",
    "start": "963120",
    "end": "968880"
  },
  {
    "text": "in a minute so uh what i wanted to show you is what actually an audit piece looks like",
    "start": "968880",
    "end": "975040"
  },
  {
    "text": "without filtering through an audit log so if you have audit logging on your cluster you will see a message that",
    "start": "975040",
    "end": "980480"
  },
  {
    "text": "looks like this so this one says allow privilege escalation does not equal false for the container busy box it must",
    "start": "980480",
    "end": "987600"
  },
  {
    "text": "be set in the security context allow privilege escalation needs false unrestricted capabilities so there's a",
    "start": "987600",
    "end": "993839"
  },
  {
    "text": "bunch of errors there you can put them in audit logs and people looking at audit logs can actually see where things",
    "start": "993839",
    "end": "1000079"
  },
  {
    "text": "have been fired i will also show you that we publish a set of metrics that you could scrape with prometheus to see",
    "start": "1000079",
    "end": "1006639"
  },
  {
    "text": "which policies are indeed being hit how often they're being hit so that you can see from your monitoring",
    "start": "1006639",
    "end": "1012480"
  },
  {
    "text": "tool how it's operating as well so i'll show you that okay from here",
    "start": "1012480",
    "end": "1019199"
  },
  {
    "text": "we're going to show you it in action and and by the way i got all these images from the free and public nasa images",
    "start": "1019199",
    "end": "1025120"
  },
  {
    "text": "site they have wonderful images of space that is the hubble telescope which is fantastic okay so we're going",
    "start": "1025120",
    "end": "1030720"
  },
  {
    "text": "to take a look at how this works so i'm going to walk through some different examples here with you",
    "start": "1030720",
    "end": "1037520"
  },
  {
    "text": "and what i'm going to do is demonstrate don't worry about this there is a blog specifically where you",
    "start": "1037520",
    "end": "1043199"
  },
  {
    "text": "can reconstruct these whole demos by yourself all the commands are published so you'll be able to take this from a",
    "start": "1043199",
    "end": "1049760"
  },
  {
    "text": "kubernetes blog and run the exact same thing so for this first demo we're going to confirm specifically that pod",
    "start": "1049760",
    "end": "1056400"
  },
  {
    "text": "security is enabled because you want to make sure if you're going through all this work that you're actually doing it",
    "start": "1056400",
    "end": "1061760"
  },
  {
    "text": "on a cluster that has the feature enabled so i'm going to kick this off here let's see if it if it does on my",
    "start": "1061760",
    "end": "1067440"
  },
  {
    "text": "click there we go okay so i kind of walk through the demo here in the top half of my vs code i have the",
    "start": "1067440",
    "end": "1073760"
  },
  {
    "text": "script that i'm going to run with some comments about what you should see and down the bottom half i have a live and",
    "start": "1073760",
    "end": "1079039"
  },
  {
    "text": "running cluster so i'm just going to show you that i indeed have a 1.23.5 cluster here that's up and running so",
    "start": "1079039",
    "end": "1085520"
  },
  {
    "text": "there's no you know i'm not pulling a rabbit out of a hat it's all up and running um and you're going to see that there are some nodes on that cluster as",
    "start": "1085520",
    "end": "1091919"
  },
  {
    "text": "well in the blog we actually show you uh how to run this up with kind so i'm actually",
    "start": "1091919",
    "end": "1098559"
  },
  {
    "text": "using a kind cluster if you don't know kind check it out it's a great tool for testing out these features and running",
    "start": "1098559",
    "end": "1104400"
  },
  {
    "text": "with them okay so what i'm going to do in this to check that if it's enabled i'm actually",
    "start": "1104400",
    "end": "1109919"
  },
  {
    "text": "going to check the api server flags if you do not have access to the api server flags you cannot run this this will not",
    "start": "1109919",
    "end": "1116160"
  },
  {
    "text": "work but you can run this command and specifically i'll go and highlight it in that big list of different emission",
    "start": "1116160",
    "end": "1122799"
  },
  {
    "text": "controllers that pod security is indeed present in that list that means pod security is indeed enabled on this",
    "start": "1122799",
    "end": "1129360"
  },
  {
    "text": "cluster and that i can use this feature now i'm going to quick quickly show you",
    "start": "1129360",
    "end": "1134400"
  },
  {
    "text": "a quick dry run where you can actually test if it's working as well so what we're going to do is we're going to",
    "start": "1134400",
    "end": "1139919"
  },
  {
    "text": "create a namespace the reason why you'd run this is if you don't have access to the api for server",
    "start": "1139919",
    "end": "1145919"
  },
  {
    "text": "flags i'm going to go through this we created a namespace what do we have to do with the namespace to turn this on",
    "start": "1145919",
    "end": "1152559"
  },
  {
    "text": "anybody label it i'm going to label it so here i'm going to label it with",
    "start": "1152559",
    "end": "1158160"
  },
  {
    "text": "enforce equals restricted so i'm running that command now and then",
    "start": "1158160",
    "end": "1164960"
  },
  {
    "text": "i'm going to actually just show you the yaml of that specific name space called verify dash pod security",
    "start": "1164960",
    "end": "1171840"
  },
  {
    "text": "just to prove that that label is indeed there i'll go and highlight it and you can see it there in the list",
    "start": "1171840",
    "end": "1177840"
  },
  {
    "text": "that that is applied to that specific namespace so what we're going to do here is um",
    "start": "1177840",
    "end": "1183600"
  },
  {
    "text": "actually do an interesting command so if you don't know this one it's a fun one to test we're going to do",
    "start": "1183600",
    "end": "1188880"
  },
  {
    "text": "a run so we're going to run tests with the image busy box but we're actually going to do a dry run equal server so i'm",
    "start": "1188880",
    "end": "1195520"
  },
  {
    "text": "going to try to apply this and it violates the policy and i actually get an error back that it's forbidden because it violates pod",
    "start": "1195520",
    "end": "1202400"
  },
  {
    "text": "security policy restricted colon latest so uh because of these reasons so there",
    "start": "1202400",
    "end": "1208159"
  },
  {
    "text": "are many reasons there in that list that this workload violates that policy but that's just a",
    "start": "1208159",
    "end": "1213280"
  },
  {
    "text": "great way for you to test that it's running you apply a restricted to a test name space and then actually try to dry",
    "start": "1213280",
    "end": "1219679"
  },
  {
    "text": "run create a workload on the cluster so dry dry run server is something i use all",
    "start": "1219679",
    "end": "1225120"
  },
  {
    "text": "the time to test the capabilities without actually having to run a workload okay so that's the end of this first",
    "start": "1225120",
    "end": "1231440"
  },
  {
    "text": "demo i just wanted to make sure that everybody was on the same page about checking that it was indeed on in their",
    "start": "1231440",
    "end": "1236559"
  },
  {
    "text": "cluster because i know not everybody is running 1.24 if is there anybody running 1.24",
    "start": "1236559",
    "end": "1243840"
  },
  {
    "text": "yes i've got a prize for you okay yeah no excellent so i know it's",
    "start": "1243840",
    "end": "1249200"
  },
  {
    "text": "relatively modern 1.23 1.24 um so you need to check that it's indeed uh",
    "start": "1249200",
    "end": "1254960"
  },
  {
    "text": "enabled now we're actually going to go through what it looks like to apply some policy then create a workload that",
    "start": "1254960",
    "end": "1261280"
  },
  {
    "text": "violates that policy then try to bring it into compliance okay sound good",
    "start": "1261280",
    "end": "1266400"
  },
  {
    "text": "excellent thank you all right i'll kick this one off so we're going to apply create a privileged level uh",
    "start": "1266400",
    "end": "1272720"
  },
  {
    "text": "enforce on privileged and create a workload so again i'm going to create the",
    "start": "1272720",
    "end": "1277760"
  },
  {
    "text": "namespace uh verify dash pod security that's indeed created i'm going to label the namespace with",
    "start": "1277760",
    "end": "1284880"
  },
  {
    "text": "the dash dash overwrite because i didn't clean up the labels from last time on this test cluster and we're going to",
    "start": "1284880",
    "end": "1290799"
  },
  {
    "text": "enforce on restricted and we're going to audit on restricted okay",
    "start": "1290799",
    "end": "1296799"
  },
  {
    "text": "so we're getting the hang of this now right everybody knows what we need to do to turn this on",
    "start": "1296799",
    "end": "1302480"
  },
  {
    "text": "and now we're going to take a privileged workload um and deploy it to the namespace",
    "start": "1302480",
    "end": "1308480"
  },
  {
    "text": "we expect this to be forbidden why do we expect this to be forbidden because i have in this pod security context allow",
    "start": "1308480",
    "end": "1314960"
  },
  {
    "text": "privileged escalation equals true and that violates the restricted policy so we're going to go and use this pod",
    "start": "1314960",
    "end": "1322480"
  },
  {
    "text": "specification and apply it to the kubernetes cluster and what we should expect is an error back",
    "start": "1322480",
    "end": "1328320"
  },
  {
    "text": "and indeed we get an area for the pod busy box privilege forbidden violates",
    "start": "1328320",
    "end": "1333760"
  },
  {
    "text": "uh allow privilege escalation does not equal false so again a useful error message for your",
    "start": "1333760",
    "end": "1339760"
  },
  {
    "text": "users they can understand that they can see exactly what they need to do to fix that but that will not be created because",
    "start": "1339760",
    "end": "1346720"
  },
  {
    "text": "we're enforcing on restricted okay i'm going to go ahead and actually update it to say we're enforcing on",
    "start": "1346720",
    "end": "1352640"
  },
  {
    "text": "privileged we're warning on baseline as i said and auditing on baseline so we",
    "start": "1352640",
    "end": "1357679"
  },
  {
    "text": "actually have mixed mode there across enforce warn and audit and as i said this is a great way to",
    "start": "1357679",
    "end": "1363360"
  },
  {
    "text": "enforce and make our users move help users move to baseline",
    "start": "1363360",
    "end": "1368400"
  },
  {
    "text": "okay so i'm going to deploy this privileged workload and then we're gonna check if it's",
    "start": "1368400",
    "end": "1373840"
  },
  {
    "text": "running so do we all think it'll run this time yes okay let's see let's see",
    "start": "1373840",
    "end": "1381360"
  },
  {
    "text": "cue the jeopardy music okay it is indeed created because we",
    "start": "1381360",
    "end": "1388240"
  },
  {
    "text": "actually uh set the uh privileged policy so we're allowed to have privileged",
    "start": "1388240",
    "end": "1393520"
  },
  {
    "text": "escalation is privileged escalation great in pods no it's not",
    "start": "1393520",
    "end": "1398799"
  },
  {
    "text": "okay so i'm going to run some cleanup here and now we're going to walk through more complex on restricted",
    "start": "1398799",
    "end": "1403840"
  },
  {
    "text": "workloads so that you can see exactly how you might be able to clean them up and look at them you can see that it's",
    "start": "1403840",
    "end": "1409280"
  },
  {
    "text": "running even though in the brackets at the top i say that it will not be running on the node but you can see the pods running because",
    "start": "1409280",
    "end": "1415600"
  },
  {
    "text": "you can actually schedule to the control plane node on um on kind by default",
    "start": "1415600",
    "end": "1422080"
  },
  {
    "text": "okay so i've cleaned up that's a privileged level workload now we're going to move on to a restricted",
    "start": "1422080",
    "end": "1428080"
  },
  {
    "text": "level uh and workload so let's take a look at this one and then we go and have a look at some metrics",
    "start": "1428080",
    "end": "1433760"
  },
  {
    "text": "okay so again create the namespace",
    "start": "1433760",
    "end": "1437760"
  },
  {
    "text": "okay now we apply the labels to the namespace what we're doing this time is enforcing",
    "start": "1439200",
    "end": "1444640"
  },
  {
    "text": "on restricted last time we enforced on privilege that we're enforcing on restricted and auditing on restricted so we're going to",
    "start": "1444640",
    "end": "1452400"
  },
  {
    "text": "deploy a restricted workload in this namespace and you're going to see a little different behavior this time",
    "start": "1452400",
    "end": "1457600"
  },
  {
    "text": "which is is really interesting okay so here's our uh restricted pod and",
    "start": "1457600",
    "end": "1464640"
  },
  {
    "text": "we actually have a security context with a loud privilege escalation false and we add a capability",
    "start": "1464640",
    "end": "1470320"
  },
  {
    "text": "netbind service which if you look up in the pod security standards i should be able to do that under the restricted pod",
    "start": "1470320",
    "end": "1477200"
  },
  {
    "text": "security standard so i expect that to be okay but let's let's see what happens",
    "start": "1477200",
    "end": "1483799"
  },
  {
    "text": "okay it is forbidden why is it forbidden",
    "start": "1486559",
    "end": "1491760"
  },
  {
    "text": "unrestricted capabilities what does unrestricted capabilities mean you",
    "start": "1491760",
    "end": "1496960"
  },
  {
    "text": "actually have to explicitly set fields in the pod specification when using the",
    "start": "1496960",
    "end": "1503039"
  },
  {
    "text": "restricted you cannot infer that default values are compliant",
    "start": "1503039",
    "end": "1508320"
  },
  {
    "text": "so you have to explicitly set in this case that error i need to drop all the capabilities if i don't explicitly put",
    "start": "1508320",
    "end": "1515039"
  },
  {
    "text": "that in my pod specification i will not be compliant so here i am i'm dropping",
    "start": "1515039",
    "end": "1520159"
  },
  {
    "text": "all the compa capabilities capabilities all specifically and adding the net bind",
    "start": "1520159",
    "end": "1525919"
  },
  {
    "text": "so again i think i've addressed this as as a user but this is interesting with restricted",
    "start": "1525919",
    "end": "1531840"
  },
  {
    "text": "policy it does not allow you to use default values that are computed server side it wants them to be upfront so that",
    "start": "1531840",
    "end": "1538720"
  },
  {
    "text": "is indeed created and we are great there now i want to go through one other use case here which i think is really",
    "start": "1538720",
    "end": "1545120"
  },
  {
    "text": "interesting um check out the pod the pod is stuck in",
    "start": "1545120",
    "end": "1550240"
  },
  {
    "text": "container create config error what's going on it passed the policy i thought we were good i don't know what's going",
    "start": "1550240",
    "end": "1556159"
  },
  {
    "text": "on so what i'm going to do is go and describe the pod in my normal cube control debug we have a really",
    "start": "1556159",
    "end": "1562720"
  },
  {
    "text": "interesting error message here that we can take a look error container has non run as non-root",
    "start": "1562720",
    "end": "1568880"
  },
  {
    "text": "and image as root so only when we execute the container do we actually see that it wants to run as",
    "start": "1568880",
    "end": "1575200"
  },
  {
    "text": "root and we can't have any containers running as root right no no no so now that we've seen that we can",
    "start": "1575200",
    "end": "1581440"
  },
  {
    "text": "actually go and fix this up and what we need to do is actually set in the pod specification that the pod cannot run as",
    "start": "1581440",
    "end": "1587919"
  },
  {
    "text": "root again this is getting these pod security best practices out there and",
    "start": "1587919",
    "end": "1592960"
  },
  {
    "text": "allowing you to have a safer operating environment for your workload so i'm specifically setting to the runners user",
    "start": "1592960",
    "end": "1599279"
  },
  {
    "text": "65 534 so this pod will now not be executed as root",
    "start": "1599279",
    "end": "1606720"
  },
  {
    "text": "in the uh container namespace or the pod namespace i should say so again we're going to go ahead and create",
    "start": "1606720",
    "end": "1613520"
  },
  {
    "text": "this now that i've set it to run as a non-root user it's created and i'll go check i'll do a",
    "start": "1613520",
    "end": "1620320"
  },
  {
    "text": "get pod and make sure the pod is running",
    "start": "1620320",
    "end": "1625640"
  },
  {
    "text": "hopefully it's running this time excellent so there we can actually see it'll actually be blocked as the pods trying",
    "start": "1627600",
    "end": "1634400"
  },
  {
    "text": "to execute because it violates the policy by running as root okay we're going to clean up there one more demo",
    "start": "1634400",
    "end": "1640159"
  },
  {
    "text": "quickly this is how i'm going to show you the metric end point so that you can go grab them i'm actually using cube",
    "start": "1640159",
    "end": "1647039"
  },
  {
    "text": "cube control get dash dash raw slash metrics but you could have prometheus scrape these metrics endpoints and we're",
    "start": "1647039",
    "end": "1653360"
  },
  {
    "text": "going to grab pod underscore security underscore evaluations underscore total now why this is important is you can",
    "start": "1653360",
    "end": "1659600"
  },
  {
    "text": "light this up in your monitoring dashboard and actually see hey what have i got i've got a motive",
    "start": "1659600",
    "end": "1664960"
  },
  {
    "text": "and force set a policy level set to privilege latest on this specific name space and we can see",
    "start": "1664960",
    "end": "1671919"
  },
  {
    "text": "that's been hit 17 times so you can actually light this up in your prometheus or any of your monitoring dashboards and know",
    "start": "1671919",
    "end": "1678880"
  },
  {
    "text": "where all your violations are happening or where all the allows are happening so this is just a great way to light it up",
    "start": "1678880",
    "end": "1685200"
  },
  {
    "text": "and you can actually see externally without trolling through audit logs exactly what's going on here",
    "start": "1685200",
    "end": "1691120"
  },
  {
    "text": "okay that good you feel confident cool that's that sounds pretty",
    "start": "1691120",
    "end": "1697360"
  },
  {
    "text": "confident to me okay next steps so as i said what are you gonna walk away with here as we",
    "start": "1697360",
    "end": "1703440"
  },
  {
    "text": "round up okay go experiment i want everybody to start playing with this understand it",
    "start": "1703440",
    "end": "1708720"
  },
  {
    "text": "it's not scary it wasn't scary for me and hopefully it's not scary for you",
    "start": "1708720",
    "end": "1714480"
  },
  {
    "text": "use warn and audit on existing name spaces and there is a really really cool trick",
    "start": "1714480",
    "end": "1720080"
  },
  {
    "text": "you might say to me hey loki i have clusters everywhere there is stuff everywhere how could i possibly turn this on that sub point you can use dry",
    "start": "1720080",
    "end": "1727200"
  },
  {
    "text": "run to evaluate all the violations of all the workloads that are currently",
    "start": "1727200",
    "end": "1733600"
  },
  {
    "text": "in a namespace when you apply the label and force so when you do label and force",
    "start": "1733600",
    "end": "1738880"
  },
  {
    "text": "on a namespace that has a bunch of pods you will actually get an evaluation and say all these pods violate that policy",
    "start": "1738880",
    "end": "1746000"
  },
  {
    "text": "if you run dry run it's not going to action it you're not going to apply the label but you have a list that you can burn down on a specific namespace to",
    "start": "1746000",
    "end": "1753679"
  },
  {
    "text": "bring all those workloads back into compliance so this isn't just something you turn on in a brand new cluster and",
    "start": "1753679",
    "end": "1759120"
  },
  {
    "text": "figure it out you actually have some tools to go and introspect and safely use it on clusters that already have a",
    "start": "1759120",
    "end": "1766000"
  },
  {
    "text": "bunch of workloads to deploy okay i always say you know general",
    "start": "1766000",
    "end": "1771120"
  },
  {
    "text": "set warn to the same level as a force because that helps you get some uh user user feedback",
    "start": "1771120",
    "end": "1777360"
  },
  {
    "text": "and make a goal so you want to you want to start a privileged and you want to work to baseline you want to make sure",
    "start": "1777360",
    "end": "1783279"
  },
  {
    "text": "that all your name spaces are at least a baseline and then selectively figure out which workloads could run to it",
    "start": "1783279",
    "end": "1789039"
  },
  {
    "text": "restricted think you got it okay i feel like i'm leaving everybody",
    "start": "1789039",
    "end": "1794799"
  },
  {
    "text": "in good hands this time next year i don't want to see a talk at kubecon saying how pod security ruined my life and lockheed",
    "start": "1794799",
    "end": "1801440"
  },
  {
    "text": "ruined my life but if it is i'll sit in the front row and listen okay i just want to say thank you for coming",
    "start": "1801440",
    "end": "1807760"
  },
  {
    "text": "on this journey through pod security with me so now it's handed over to you so long and thanks for all the fish and",
    "start": "1807760",
    "end": "1813840"
  },
  {
    "text": "i do want to thank bridget tim and jim for their review thank you very much",
    "start": "1813840",
    "end": "1819679"
  },
  {
    "text": "enjoy your kubecon boothball",
    "start": "1819679",
    "end": "1824480"
  },
  {
    "text": "i'll be hanging around outside here if anybody has any specific questions i'd be happy to talk to you and answer them",
    "start": "1826640",
    "end": "1832159"
  },
  {
    "text": "but uh you can come find me i'll be here all week thank you",
    "start": "1832159",
    "end": "1837440"
  }
]