[
  {
    "start": "0",
    "end": "71000"
  },
  {
    "text": "hi uh welcome to uh the kubernetes edge conference this is the",
    "start": "160",
    "end": "5520"
  },
  {
    "text": "session on taming unbounded resources with node feature discovery",
    "start": "5520",
    "end": "10800"
  },
  {
    "text": "my name is mark abrams and i'm a field engineer and edge specialist at susa formerly with rancher",
    "start": "10800",
    "end": "17920"
  },
  {
    "text": "so first of all i want to take a minute to say that edge means different things to different",
    "start": "17920",
    "end": "23600"
  },
  {
    "text": "stakeholders for some the edge is the edge of the cloud and it's functions like the cloud but",
    "start": "23600",
    "end": "32160"
  },
  {
    "text": "it's really uh it's closer to where the data is generated in this presentation i'm actually",
    "start": "32160",
    "end": "38800"
  },
  {
    "text": "talking about uh compute at the edge of the network so kubernetes at the edge of the network",
    "start": "38800",
    "end": "45600"
  },
  {
    "text": "not the edge of the cloud right these are the leaf nodes so the leaf clusters for example we'll see",
    "start": "45600",
    "end": "52160"
  },
  {
    "text": "these edge use cases in factories in retail scenarios in energy in the automotive and",
    "start": "52160",
    "end": "59600"
  },
  {
    "text": "aerospace industries we'll see it in smart cities and there's lots of other industries",
    "start": "59600",
    "end": "66640"
  },
  {
    "text": "with that let's take a look at node feature discovery",
    "start": "66640",
    "end": "72159"
  },
  {
    "start": "71000",
    "end": "81000"
  },
  {
    "text": "node feature discovery is really it's simply a fancy labeler you can use it to label kubernetes nodes",
    "start": "72159",
    "end": "81439"
  },
  {
    "start": "81000",
    "end": "102000"
  },
  {
    "text": "so why do i need a labeler i think the number one benefit is for the ease of just mapping",
    "start": "81439",
    "end": "88240"
  },
  {
    "text": "workloads to resources here is you know a five-year-old",
    "start": "88240",
    "end": "93600"
  },
  {
    "text": "worksheet right a kindergarten worksheet finding the resources that's what this",
    "start": "93600",
    "end": "99680"
  },
  {
    "text": "node feature discovery is doing for us in addition um you know i would say that",
    "start": "99680",
    "end": "106159"
  },
  {
    "start": "102000",
    "end": "127000"
  },
  {
    "text": "with massive numbers of devices we must automate it's not even it's not an option we have to automate right",
    "start": "106159",
    "end": "113040"
  },
  {
    "text": "and then of course the resource types that we're targeting don't fall neatly into the cpu and ram",
    "start": "113040",
    "end": "118320"
  },
  {
    "text": "category and additionally we have the challenge that um the resource capabilities",
    "start": "118320",
    "end": "124560"
  },
  {
    "text": "at the edge are unbounded do i mean by unbounded well because",
    "start": "124560",
    "end": "130959"
  },
  {
    "start": "127000",
    "end": "174000"
  },
  {
    "text": "these unique resources are not they're not infinite right so i say unbounded because there's really",
    "start": "130959",
    "end": "137440"
  },
  {
    "text": "no limit to what device might be attached to your notes with um with each",
    "start": "137440",
    "end": "145440"
  },
  {
    "text": "individual use case there's like a finite set of resources but overall for the",
    "start": "145440",
    "end": "150480"
  },
  {
    "text": "for the whole you know global edge the it's there it's unbounded so",
    "start": "150480",
    "end": "157840"
  },
  {
    "text": "um anyways with your you know the fact that you have a finite set um in each use case is good because um",
    "start": "157840",
    "end": "165680"
  },
  {
    "text": "now we can use labels to classify and give logical boundaries relevant to you know each individual",
    "start": "165680",
    "end": "172480"
  },
  {
    "text": "enterprise without node feature discovery and you",
    "start": "172480",
    "end": "178159"
  },
  {
    "start": "174000",
    "end": "220000"
  },
  {
    "text": "know massive number of numbers of clusters it could be like playing a game of go fish",
    "start": "178159",
    "end": "183760"
  },
  {
    "text": "i don't know if you know this game but basically you take turns with your opponents",
    "start": "183760",
    "end": "188879"
  },
  {
    "text": "asking if they have the resource you need i say to my opponent do you have any threes",
    "start": "188879",
    "end": "194319"
  },
  {
    "text": "they don't have any in their hands so they say go fish it's a guessing game and eventually you",
    "start": "194319",
    "end": "200080"
  },
  {
    "text": "can use cash and history to make more accurate guesses right so i have a sense",
    "start": "200080",
    "end": "206319"
  },
  {
    "text": "of what my opponent has obviously in the real world we shouldn't guess",
    "start": "206319",
    "end": "212000"
  },
  {
    "text": "which devices have the right resources so node feature discovery is going to",
    "start": "212000",
    "end": "217200"
  },
  {
    "text": "take the guesswork out of it for us i'm going to demonstrate the power of",
    "start": "217200",
    "end": "224000"
  },
  {
    "start": "220000",
    "end": "389000"
  },
  {
    "text": "node feature discovery but first i want to show my cluster architecture for the demo",
    "start": "224000",
    "end": "230959"
  },
  {
    "text": "this is a touring pi version one board it has seven raspberry pi compute modules each",
    "start": "230959",
    "end": "237680"
  },
  {
    "text": "res each module is a raspberry pi cm3 plus with one gig of ram and four cpu",
    "start": "237680",
    "end": "245519"
  },
  {
    "text": "for per device on device node seven i run the master and the remaining six",
    "start": "245519",
    "end": "251120"
  },
  {
    "text": "devices are workers additionally this is not terribly relevant to the demo",
    "start": "251120",
    "end": "257519"
  },
  {
    "text": "but i'm sure somebody's going to notice the node numbers and the host names don't match up with the",
    "start": "257519",
    "end": "264080"
  },
  {
    "text": "device numbers in the diagram so here you can see that like the host name touring pi zero two",
    "start": "264080",
    "end": "269840"
  },
  {
    "text": "is actually on uh device slot number three",
    "start": "269840",
    "end": "274960"
  },
  {
    "text": "so in addition to having the seven modules um that's the compute right let's look at",
    "start": "275280",
    "end": "281919"
  },
  {
    "text": "the attached devices and peripherals right and this is so these are the things that i attach to my edge nodes",
    "start": "281919",
    "end": "287919"
  },
  {
    "text": "um here i have a bunch of usb ports um there are only eight there are eight ports",
    "start": "287919",
    "end": "294560"
  },
  {
    "text": "um but they only map to four of the seven compute modules so not every",
    "start": "294560",
    "end": "301280"
  },
  {
    "text": "compute module has access to usb and each pair of usb",
    "start": "301280",
    "end": "307280"
  },
  {
    "text": "actually only maps to one of the compute modules and for example here is",
    "start": "307280",
    "end": "314320"
  },
  {
    "text": "compute the compute module at device slot number two which has access to the set of usb",
    "start": "314320",
    "end": "321199"
  },
  {
    "text": "connectors shown in addition there is an i2c hub on the",
    "start": "321199",
    "end": "328000"
  },
  {
    "text": "touring pi now in this case every tour every compute module has access to this i2c hub",
    "start": "328000",
    "end": "335600"
  },
  {
    "text": "and out of the box it's designed so that the hub exposes",
    "start": "335600",
    "end": "341360"
  },
  {
    "text": "a real-time clock the ethernet hub for the devices and the power",
    "start": "341360",
    "end": "347680"
  },
  {
    "text": "management for all seven of the devices of course you have to enable",
    "start": "347680",
    "end": "352800"
  },
  {
    "text": "i2c in your operating system so you need to load the kernel modules to run i2c",
    "start": "352800",
    "end": "360319"
  },
  {
    "text": "and then in addition each of these devices has 40 pins of gpio that's pretty standard",
    "start": "361039",
    "end": "367199"
  },
  {
    "text": "raspberry pi thing um but it's unique to each device so you",
    "start": "367199",
    "end": "373360"
  },
  {
    "text": "can see here i've i've knocked out number five and the gpio pins for number five are in",
    "start": "373360",
    "end": "381039"
  },
  {
    "text": "the red border so i'd like to show you now how we can use node feature discovery to",
    "start": "381039",
    "end": "388000"
  },
  {
    "text": "access these three different resource types so let's go to the demo so",
    "start": "388000",
    "end": "396240"
  },
  {
    "start": "394000",
    "end": "494000"
  },
  {
    "text": "the first thing i'm going to do i have kubernetes running on all the on the nodes as i said on the uh system",
    "start": "396240",
    "end": "402800"
  },
  {
    "text": "and so the first thing i just show you the six nodes where the workers run and then i wrote",
    "start": "402800",
    "end": "409039"
  },
  {
    "text": "this little uh bash script that will just um grab the labels using kubectl",
    "start": "409039",
    "end": "414960"
  },
  {
    "text": "dumps the labels for each node into a directory so touring pi01.labels we'll",
    "start": "414960",
    "end": "421199"
  },
  {
    "text": "have the labels from touring pi zero one i'm going to um show you the labels on touring pi",
    "start": "421199",
    "end": "428800"
  },
  {
    "text": "zero one and you can see that the these are just standard labels i haven't installed node",
    "start": "428800",
    "end": "434400"
  },
  {
    "text": "feature discovery yet so in a moment we'll do that so let's clear it and then let's install",
    "start": "434400",
    "end": "442880"
  },
  {
    "text": "node feature discovery so i'll install it by installing a couple of config files these config",
    "start": "442880",
    "end": "450400"
  },
  {
    "text": "files are there's a master",
    "start": "450400",
    "end": "455599"
  },
  {
    "text": "and a worker i simply downloaded these i didn't modify these well i yeah i changed these to use an",
    "start": "455599",
    "end": "462560"
  },
  {
    "text": "image container that i created for the arm system i couldn't get their arm",
    "start": "462560",
    "end": "468560"
  },
  {
    "text": "containers working so i rolled my own but basically these are preset and ready",
    "start": "468560",
    "end": "473680"
  },
  {
    "text": "to go so i've installed node feature discovery and now let's take a look at the labels",
    "start": "473680",
    "end": "479440"
  },
  {
    "text": "on touring pi zero one again so here they are after node feature",
    "start": "479440",
    "end": "488800"
  },
  {
    "text": "discovery great okay so you can see that um",
    "start": "490840",
    "end": "498560"
  },
  {
    "start": "494000",
    "end": "959000"
  },
  {
    "text": "i i now have labels that have this domain prefix and then i've got stuff for cpu for",
    "start": "498560",
    "end": "505520"
  },
  {
    "text": "kernel for storage for system this is all just defaults i didn't i didn't change",
    "start": "505520",
    "end": "510560"
  },
  {
    "text": "anything here this is just what node feature discovery does out of the box and",
    "start": "510560",
    "end": "517518"
  },
  {
    "text": "you can see there's even one for for usb uh this is actually the ethernet adapter for the devices",
    "start": "517519",
    "end": "525440"
  },
  {
    "text": "um okay so we've got um we've we've now got uh node feature",
    "start": "525440",
    "end": "532240"
  },
  {
    "text": "discovery installed we can see it's working and what i want to do is actually",
    "start": "532240",
    "end": "538240"
  },
  {
    "text": "modify the config map so the node feature discovery is managed by a configuration file which",
    "start": "538240",
    "end": "545279"
  },
  {
    "text": "tells nfd worker which types of resources",
    "start": "545279",
    "end": "553200"
  },
  {
    "text": "to look for to find so i'll go into this config file and i will uncomment out the",
    "start": "553200",
    "end": "560399"
  },
  {
    "text": "sources section and then i'll find the usb section i will uncomment out the usb",
    "start": "560399",
    "end": "565920"
  },
  {
    "text": "section and open up the device class white list i will enter just one device class and",
    "start": "565920",
    "end": "573360"
  },
  {
    "text": "that is class 0 3. that is a human interface device i'll make it so that we can see the the",
    "start": "573360",
    "end": "580640"
  },
  {
    "text": "class the vendor and the device on the label that gets applied and i'll save this and kubernetes is",
    "start": "580640",
    "end": "587600"
  },
  {
    "text": "going to basically now label the nodes that have a human interface device now i have",
    "start": "587600",
    "end": "594560"
  },
  {
    "text": "plugged in a keyboard um so a human interface device um",
    "start": "594560",
    "end": "599839"
  },
  {
    "text": "that will show up on one of the usb ports i um just modified my script here",
    "start": "599839",
    "end": "607360"
  },
  {
    "text": "well i'm i'm using the script but to get the labels but then i want to",
    "start": "607360",
    "end": "612959"
  },
  {
    "text": "show you every node and i'm only going to we're just going to grep for usb we're not going to look",
    "start": "612959",
    "end": "618000"
  },
  {
    "text": "at everything i'll just show you where the labels are for usb now so here you can see",
    "start": "618000",
    "end": "623920"
  },
  {
    "text": "that usb on touring pi 5 node 5",
    "start": "623920",
    "end": "630880"
  },
  {
    "text": "is uh has this usb with a human interface device label",
    "start": "630880",
    "end": "637440"
  },
  {
    "text": "so um now i'm gonna move the um the usb",
    "start": "637440",
    "end": "646240"
  },
  {
    "text": "unplug it and plug it into a different port and so what's going to happen when i do",
    "start": "646240",
    "end": "651760"
  },
  {
    "text": "that is that it's going to relabel it's going to remove the label from the one that no",
    "start": "651760",
    "end": "657120"
  },
  {
    "text": "longer has it and then it adds it to the one that has it so you can see here it's moved",
    "start": "657120",
    "end": "663519"
  },
  {
    "text": "originally it was on five and now it's on three um and that's just by unplugging and",
    "start": "663519",
    "end": "669200"
  },
  {
    "text": "plugging so you know hot swap capability with node feature discovery",
    "start": "669200",
    "end": "674480"
  },
  {
    "text": "figuring out which features exist which devices exist on uh which",
    "start": "674480",
    "end": "680480"
  },
  {
    "text": "nodes uh great okay so let's let's so that's the usb let's take a look at i2c",
    "start": "680480",
    "end": "689440"
  },
  {
    "text": "for i2c i'm going to use the kernel module so again i'm editing the configuration file",
    "start": "689440",
    "end": "694959"
  },
  {
    "text": "i'm going to look for the custom section i will uncomment custom and then i'll add this block of text",
    "start": "694959",
    "end": "702079"
  },
  {
    "text": "that or this this block that um i call it i2c power management that's a name i've",
    "start": "702079",
    "end": "708399"
  },
  {
    "text": "chosen i'm going to match on loaded kernel",
    "start": "708399",
    "end": "713440"
  },
  {
    "text": "modules and this is a feature of note feature discovery that allows me to select loaded kernel modules i2c dev",
    "start": "713440",
    "end": "721279"
  },
  {
    "text": "and this other one if both of those exist it will label for i2c",
    "start": "721279",
    "end": "728320"
  },
  {
    "text": "so we're going to get the labels again and we'll pick up which ones have",
    "start": "728320",
    "end": "734560"
  },
  {
    "text": "i2c on them i'm going to take a look this time at you can see i'm grepping for",
    "start": "734560",
    "end": "742000"
  },
  {
    "text": "both usb and i2c so we're going to look at all the nodes",
    "start": "742000",
    "end": "747120"
  },
  {
    "text": "and just ignore everything except for i2c and usb and what we should see is that every",
    "start": "747120",
    "end": "753600"
  },
  {
    "text": "node has i2c because as i said every node is connected to",
    "start": "753600",
    "end": "759600"
  },
  {
    "text": "that bus um and so every node has those kernel modules and therefore the labels get applied",
    "start": "759600",
    "end": "766079"
  },
  {
    "text": "everywhere plus we still have on node number three we've still got uh the that usb hub",
    "start": "766079",
    "end": "774560"
  },
  {
    "text": "that usb human interface device great okay um last one so",
    "start": "774560",
    "end": "781440"
  },
  {
    "text": "this one we're going to do gpio and for this i'm going to log in to the first node so to i'm going to",
    "start": "781440",
    "end": "787440"
  },
  {
    "text": "log into touringpi001 and the first thing i want to do is",
    "start": "787440",
    "end": "793200"
  },
  {
    "text": "create a directory there is a directory that gets mapped to my container and that",
    "start": "793200",
    "end": "801279"
  },
  {
    "text": "and and it's the node feature discovery worker container this directory hosts um",
    "start": "801279",
    "end": "808959"
  },
  {
    "text": "any executable it could be any executable or a shell script and essentially",
    "start": "808959",
    "end": "815600"
  },
  {
    "text": "the the output of whatever runs in that directory needs to be a list of labels so what i'm",
    "start": "815600",
    "end": "822320"
  },
  {
    "text": "going to do is create just a short list of labels in a shell script",
    "start": "822320",
    "end": "830560"
  },
  {
    "text": "those labels will then get applied to this node now i happen to know that each of these",
    "start": "830720",
    "end": "838079"
  },
  {
    "text": "nodes has gpio but i'm only labeling touring pi01 as having gpio and i'm saying that on",
    "start": "838079",
    "end": "846320"
  },
  {
    "text": "pin number 40 it's an input pin and you can imagine that there might be other labels i want to apply",
    "start": "846320",
    "end": "853040"
  },
  {
    "text": "for specific needs for each node so here's the file i will take this file",
    "start": "853040",
    "end": "860639"
  },
  {
    "text": "move it into this directory that i created node feature discovery will notice the",
    "start": "860639",
    "end": "867600"
  },
  {
    "text": "directory the change in the directory it will reload it its configuration file",
    "start": "867600",
    "end": "876240"
  },
  {
    "text": "and it will begin to label the node that has",
    "start": "876240",
    "end": "883360"
  },
  {
    "text": "gpio so i'm just changing this script to be executable we'll exit out of",
    "start": "883360",
    "end": "889839"
  },
  {
    "text": "turing pi01 node feature discovery is already doing its thing",
    "start": "889839",
    "end": "896079"
  },
  {
    "text": "so now we'll get the labels again this time after i get the labels i'm",
    "start": "896079",
    "end": "902160"
  },
  {
    "text": "going to take a look at the list of all nodes",
    "start": "902160",
    "end": "907600"
  },
  {
    "text": "we'll look at all nodes we will exclusively look at usb i2c and",
    "start": "907600",
    "end": "915440"
  },
  {
    "text": "also gpio whoops let's let's add gpio there as well so",
    "start": "915440",
    "end": "923600"
  },
  {
    "text": "there we go usb i2c gpio and what you can see here is that i now",
    "start": "923600",
    "end": "930160"
  },
  {
    "text": "have on touring pi01 i have my labels for gpio",
    "start": "930160",
    "end": "938160"
  },
  {
    "text": "i have my i2c label and then on node 3 i have my usb and my i2c label",
    "start": "938160",
    "end": "946079"
  },
  {
    "text": "everything's got i2c and we're good to go",
    "start": "946079",
    "end": "955839"
  },
  {
    "text": "so that's it for my demo very simply the node feature discovery",
    "start": "957360",
    "end": "962639"
  },
  {
    "start": "959000",
    "end": "983000"
  },
  {
    "text": "worker is a daemon set and it scans the nodes for capabilities based on configuration",
    "start": "962639",
    "end": "969199"
  },
  {
    "text": "it reports what it finds to the node feature discovery master the master communicates with kubernetes",
    "start": "969199",
    "end": "975839"
  },
  {
    "text": "api and is is the component that actually does the labeling of the nodes",
    "start": "975839",
    "end": "983839"
  },
  {
    "start": "983000",
    "end": "1003000"
  },
  {
    "text": "from a human perspective the operations team of course needs to know their devices",
    "start": "984240",
    "end": "991199"
  },
  {
    "text": "and the features that they want to expose they need to create a configuration to expose those resources",
    "start": "991199",
    "end": "999279"
  },
  {
    "text": "node feature discovery does the rest as i just showed you",
    "start": "999279",
    "end": "1004160"
  },
  {
    "start": "1003000",
    "end": "1043000"
  },
  {
    "text": "how do we install it i installed it using kubernetes resource configs you could install it as a helm chart you",
    "start": "1004880",
    "end": "1011199"
  },
  {
    "text": "can install it as an operator",
    "start": "1011199",
    "end": "1016240"
  },
  {
    "text": "and when the underlying config map changes the worker reloads it the config map is",
    "start": "1016880",
    "end": "1022160"
  },
  {
    "text": "that default config map with that was commented out that gets installed automatically with",
    "start": "1022160",
    "end": "1028798"
  },
  {
    "text": "node feature discovery there's a healthy bit of documentation on",
    "start": "1028799",
    "end": "1033839"
  },
  {
    "text": "how to use that configuration file and i'll share a link with you at the end on where you can go look at",
    "start": "1033839",
    "end": "1041280"
  },
  {
    "text": "it this is a snippet of the config config",
    "start": "1041280",
    "end": "1046400"
  },
  {
    "start": "1043000",
    "end": "1112000"
  },
  {
    "text": "map that i used on the right side you can see at the bottom my usb usb device class",
    "start": "1046400",
    "end": "1055840"
  },
  {
    "text": "zero three right that was the human interface device",
    "start": "1055840",
    "end": "1061200"
  },
  {
    "text": "this is pretty simple i run node feature discovery with my unique configuration",
    "start": "1061200",
    "end": "1066480"
  },
  {
    "text": "and labeling happens i did find that there is a non-trivial issue for",
    "start": "1066480",
    "end": "1072799"
  },
  {
    "text": "use at the edge at the edge we're managing not one single massive cluster of nodes like what i",
    "start": "1072799",
    "end": "1080480"
  },
  {
    "text": "showed you that's that's actually that might be a cluster at the edge but we're really looking at",
    "start": "1080480",
    "end": "1087520"
  },
  {
    "text": "a multitude of smaller clusters we're also often adding removing and",
    "start": "1087520",
    "end": "1092799"
  },
  {
    "text": "changing the resources on these clusters over time",
    "start": "1092799",
    "end": "1097600"
  },
  {
    "text": "so how can nfd be managed across hundreds or thousands of clusters",
    "start": "1098000",
    "end": "1104240"
  },
  {
    "text": "to answer that question let's look at some architectures as we can to as we consider the problem",
    "start": "1104240",
    "end": "1112400"
  },
  {
    "text": "so this is a typical uh data center and cloud deployment of kubernetes",
    "start": "1112400",
    "end": "1118880"
  },
  {
    "text": "the it's pretty much app life cycle focused",
    "start": "1118880",
    "end": "1123919"
  },
  {
    "text": "with one kubernetes cluster per development environment red lines",
    "start": "1123919",
    "end": "1131280"
  },
  {
    "text": "in this image represent the cluster boundary so you can see i have four clusters and my little touring pi cluster",
    "start": "1131280",
    "end": "1138640"
  },
  {
    "text": "represents something akin to just one of these environments so i showed how to manage the differences",
    "start": "1138640",
    "end": "1146240"
  },
  {
    "text": "on six nodes with changes to a single node feature discovery configuration but",
    "start": "1146240",
    "end": "1153600"
  },
  {
    "text": "in fact my edge looks more like this where i have lots of single node clusters",
    "start": "1153600",
    "end": "1160000"
  },
  {
    "text": "some multi-node clusters each cluster is production at the edge it's all",
    "start": "1160000",
    "end": "1165760"
  },
  {
    "text": "production um also in most case most of the edge scenarios that i've come across we're",
    "start": "1165760",
    "end": "1171760"
  },
  {
    "text": "talking easily um 10 or 100 times the number of clusters shown here",
    "start": "1171760",
    "end": "1177280"
  },
  {
    "text": "i have accounted i have 32 clusters here so should we play go fish with",
    "start": "1177280",
    "end": "1184120"
  },
  {
    "text": "320 or 32 000 clusters now i don't think we want to",
    "start": "1184120",
    "end": "1189200"
  },
  {
    "text": "play go fish right we want to use node feature discovery how can we do it with this many clusters given how node",
    "start": "1189200",
    "end": "1196640"
  },
  {
    "text": "feature discovery works i think that git ops is",
    "start": "1196640",
    "end": "1202320"
  },
  {
    "start": "1198000",
    "end": "1310000"
  },
  {
    "text": "a solution for this problem one of of these three tools um i'm",
    "start": "1202320",
    "end": "1209760"
  },
  {
    "text": "really only familiar with fleet however i know that argo cd and flux are also being used",
    "start": "1209760",
    "end": "1217039"
  },
  {
    "text": "as git ops tooling there are others azure devops and and",
    "start": "1217039",
    "end": "1223679"
  },
  {
    "text": "you know there's a bunch of options we need some outside tooling to manage",
    "start": "1223679",
    "end": "1228880"
  },
  {
    "text": "large numbers of clusters in fleet it's possible to manage large numbers",
    "start": "1228880",
    "end": "1234240"
  },
  {
    "text": "of clusters and target the workloads but also the custom",
    "start": "1234240",
    "end": "1239840"
  },
  {
    "text": "configurations because these are really just kubernetes objects and so we can we can",
    "start": "1239840",
    "end": "1245360"
  },
  {
    "text": "use fleet to actually manage those configurations fleet has been tested with a million",
    "start": "1245360",
    "end": "1251919"
  },
  {
    "text": "clusters for example now despite the large scale even though",
    "start": "1251919",
    "end": "1257200"
  },
  {
    "text": "it can handle that large scale fleet doesn't have some idea of an auto",
    "start": "1257200",
    "end": "1262400"
  },
  {
    "text": "cluster labeler at this time so that's a feature that i will be",
    "start": "1262400",
    "end": "1267520"
  },
  {
    "text": "requesting the concept of cluster is",
    "start": "1267520",
    "end": "1272880"
  },
  {
    "text": "it's a custom resource definition in fleet because it's managing multiple clusters",
    "start": "1272880",
    "end": "1278000"
  },
  {
    "text": "right but it's not a concept in kubernetes now fortunately there is a kubernetes",
    "start": "1278000",
    "end": "1286880"
  },
  {
    "text": "special interest group called cluster api and i think that the solution they're",
    "start": "1286880",
    "end": "1292000"
  },
  {
    "text": "working on there may hold the answer to how we can get our devops tools to",
    "start": "1292000",
    "end": "1298320"
  },
  {
    "text": "have a standardized model for cluster labeling based on node",
    "start": "1298320",
    "end": "1304799"
  },
  {
    "text": "labels down downstream",
    "start": "1304799",
    "end": "1309919"
  },
  {
    "start": "1310000",
    "end": "1529000"
  },
  {
    "text": "this is what i think the gitops pipeline would look like so assuming we can get this working simply install node feature discovery",
    "start": "1312000",
    "end": "1319520"
  },
  {
    "text": "into the pipeline itself make sure your config is set up either do that as part of the install",
    "start": "1319520",
    "end": "1325679"
  },
  {
    "text": "or you know of course you can do it afterwards as well and you may end up doing it multiple times",
    "start": "1325679",
    "end": "1331440"
  },
  {
    "text": "that is probably the aside from upgrading node feature discovery the config file is the changeable",
    "start": "1331440",
    "end": "1337919"
  },
  {
    "text": "component i would then configure my tool in my case fleet to automatically update node",
    "start": "1337919",
    "end": "1344320"
  },
  {
    "text": "labels and eventually i need to notify developers of what",
    "start": "1344320",
    "end": "1352000"
  },
  {
    "text": "node labels are going to be available and what resources they map to",
    "start": "1352000",
    "end": "1357600"
  },
  {
    "text": "rinse and repeat as resources change we repeat steps two through four as needed",
    "start": "1357840",
    "end": "1364400"
  },
  {
    "text": "so that's a bit of hypothetical get ops i did want to also talk about",
    "start": "1366400",
    "end": "1372840"
  },
  {
    "text": "security with node feature discovery it is currently possible to configure tls",
    "start": "1372840",
    "end": "1378799"
  },
  {
    "text": "between the node feature discovery services between the master and the worker so that's out of the box that's a nice",
    "start": "1378799",
    "end": "1385280"
  },
  {
    "text": "security enhancement that i have not yet enabled i",
    "start": "1385280",
    "end": "1391519"
  },
  {
    "text": "as i was doing this i believe that allowing that local user specific",
    "start": "1391600",
    "end": "1398320"
  },
  {
    "text": "capability where i put a script into a directory and let it",
    "start": "1398320",
    "end": "1403840"
  },
  {
    "text": "execute that directory i believe there's some risk associated with that because it will execute anything in that",
    "start": "1403840",
    "end": "1409600"
  },
  {
    "text": "directory now it only executes it in in the container",
    "start": "1409600",
    "end": "1416159"
  },
  {
    "text": "however these containers are somewhat privileged because they're accessing resources",
    "start": "1416159",
    "end": "1421600"
  },
  {
    "text": "they're at least need read access to the resources i'm sure there's a way to lock them down in kubernetes that would need to be",
    "start": "1421600",
    "end": "1429200"
  },
  {
    "text": "managed in order for this to be more secure",
    "start": "1429200",
    "end": "1434000"
  },
  {
    "text": "in addition it's possible probably to reduce the attack surface by limiting what features",
    "start": "1434720",
    "end": "1440400"
  },
  {
    "text": "are usable in the configuration file in that config file there is a section",
    "start": "1440400",
    "end": "1446080"
  },
  {
    "text": "called sources and we can do things like specify just usb",
    "start": "1446080",
    "end": "1451200"
  },
  {
    "text": "just custom leave out local or you know only include local on the machines the",
    "start": "1451200",
    "end": "1457360"
  },
  {
    "text": "the nodes that need it that sort of thing so that's a little bit about security this is",
    "start": "1457360",
    "end": "1464559"
  },
  {
    "text": "a summary of what we just went through labels are applied to nodes in a cluster",
    "start": "1464559",
    "end": "1470480"
  },
  {
    "text": "i think git ops will be useful in labeling large numbers of clusters features",
    "start": "1470480",
    "end": "1475919"
  },
  {
    "text": "are unlocked using a configuration file node feature discovery has a limited",
    "start": "1475919",
    "end": "1482799"
  },
  {
    "text": "number of out-of-the-box feature types which does include a kernel module discovery however",
    "start": "1482799",
    "end": "1490159"
  },
  {
    "text": "when if if there are types that aren't matched you can use the local type when there's",
    "start": "1490159",
    "end": "1496320"
  },
  {
    "text": "no other default available at some point it might make sense to",
    "start": "1496320",
    "end": "1504000"
  },
  {
    "text": "use kubernetes device plug-ins instead of the local feature type that will depend on",
    "start": "1504000",
    "end": "1510240"
  },
  {
    "text": "what's available um and what you know if if there is an existing device plug-in",
    "start": "1510240",
    "end": "1516640"
  },
  {
    "text": "and it doesn't and it's not something that can be discovered with node feature discovery it may make sense to use the device",
    "start": "1516640",
    "end": "1523200"
  },
  {
    "text": "plug-in instead that it has to be seen on a case-by-case basis",
    "start": "1523200",
    "end": "1530000"
  },
  {
    "start": "1529000",
    "end": "1761000"
  },
  {
    "text": "some more summary items i didn't show this but there is a mount in the container",
    "start": "1530000",
    "end": "1536159"
  },
  {
    "text": "for uniquely named configuration files instead of the default nfd worker conf",
    "start": "1536159",
    "end": "1541360"
  },
  {
    "text": "so i was modifying the default configuration every time it is possible to take snippets of that",
    "start": "1541360",
    "end": "1548080"
  },
  {
    "text": "put them in uniquely named files and provide a configuration through",
    "start": "1548080",
    "end": "1553760"
  },
  {
    "text": "this other directory the nice thing about this i think is that it provides",
    "start": "1553760",
    "end": "1560720"
  },
  {
    "text": "a capability that i think vendors should be promoting right if i have a",
    "start": "1560720",
    "end": "1567200"
  },
  {
    "text": "device i should be enabling node feature discovery for those devices i know that",
    "start": "1567200",
    "end": "1574480"
  },
  {
    "text": "currently nvidia for example well they don't i'm sure the config file is available",
    "start": "1574480",
    "end": "1580400"
  },
  {
    "text": "but essentially their gpu operator use this node feature discovery to label nodes it would be as simple as",
    "start": "1580400",
    "end": "1587840"
  },
  {
    "text": "finding that configuration that they use and you could label your own gpu nodes",
    "start": "1587840",
    "end": "1593120"
  },
  {
    "text": "without the gpu operator there is some value to the gpu operator so i'm not saying don't use that",
    "start": "1593120",
    "end": "1599200"
  },
  {
    "text": "but it's you know it's uh one of the one of the things that i",
    "start": "1599200",
    "end": "1604320"
  },
  {
    "text": "think we should be looking at is getting vendors to support this also in the beginning i said nfd is just",
    "start": "1604320",
    "end": "1612320"
  },
  {
    "text": "a labeler it's more than that it's a dynamic labeler it's a configurable",
    "start": "1612320",
    "end": "1617520"
  },
  {
    "text": "label labeler nfd is very powerful and especially at the edge the last thing i want to get",
    "start": "1617520",
    "end": "1625679"
  },
  {
    "text": "to is problems the pitfalls so i did discover that when",
    "start": "1625679",
    "end": "1633120"
  },
  {
    "text": "a kernel module is loaded it doesn't mean that there's a device on the other end i",
    "start": "1633120",
    "end": "1639760"
  },
  {
    "text": "have for example a node that has the i2c capability but when i physically unplug the device",
    "start": "1639760",
    "end": "1647520"
  },
  {
    "text": "the the i2c slave that's on the other end there's it's not usable right so",
    "start": "1647520",
    "end": "1656399"
  },
  {
    "text": "just loading the module alone isn't significant it's not enough to ensure",
    "start": "1656399",
    "end": "1662799"
  },
  {
    "text": "that the feature exists there may be some",
    "start": "1662799",
    "end": "1669840"
  },
  {
    "text": "symbiotic relationship between using the local feature to automate labeling and being able to",
    "start": "1669840",
    "end": "1677919"
  },
  {
    "text": "use kubernetes to discover if the physical feature is actually",
    "start": "1677919",
    "end": "1683200"
  },
  {
    "text": "there like some sort of a scout or a test of whether that physical item is there",
    "start": "1683200",
    "end": "1688240"
  },
  {
    "text": "and if it is add another label through the local capability um or use health checks",
    "start": "1688240",
    "end": "1696000"
  },
  {
    "text": "we have to look at how can we ensure that a device that can be plugged and unplugged is",
    "start": "1696000",
    "end": "1702559"
  },
  {
    "text": "actually there just because the kernel or the device driver exists doesn't mean it's actually there",
    "start": "1702559",
    "end": "1711840"
  },
  {
    "text": "what else so um [Music] removable devices so hot plugging works",
    "start": "1712000",
    "end": "1718000"
  },
  {
    "text": "but it's not immediate in the demo i showed you i did it it looked like it was happening",
    "start": "1718000",
    "end": "1723440"
  },
  {
    "text": "right away there was some time lag between when i unplugged it and replugged it a fair amount of time node feature",
    "start": "1723440",
    "end": "1730480"
  },
  {
    "text": "discovery needs time to go through the kubernetes controller process",
    "start": "1730480",
    "end": "1735840"
  },
  {
    "text": "of checking is the state what i think it should be no it's not change it once it changes the labels",
    "start": "1735840",
    "end": "1743120"
  },
  {
    "text": "there's going to also be another process where kubernetes says oh this workload can't run on this",
    "start": "1743120",
    "end": "1749360"
  },
  {
    "text": "node it doesn't match up i need to remove it and find a new a new resource that it can you know i need to",
    "start": "1749360",
    "end": "1755760"
  },
  {
    "text": "reschedule it somewhere else so these are things to watch out for as you're using node feature discovery",
    "start": "1755760",
    "end": "1762320"
  },
  {
    "start": "1761000",
    "end": "1808000"
  },
  {
    "text": "as i said i would share with you some links these first two links are the node feature discovery page there's",
    "start": "1762320",
    "end": "1768720"
  },
  {
    "text": "there's a ton there i just called out these two links the get started and the features page which has all the",
    "start": "1768720",
    "end": "1774720"
  },
  {
    "text": "list of features and how you configure that file i used the find class codes at usb.org",
    "start": "1774720",
    "end": "1781360"
  },
  {
    "text": "to find my human interface device class and and some of the functionality that i",
    "start": "1781360",
    "end": "1787520"
  },
  {
    "text": "used there i used k3s as my kubernetes distribution and you can find this entire",
    "start": "1787520",
    "end": "1793360"
  },
  {
    "text": "presentation and the work that i've done here at maker slash nfd dash demo",
    "start": "1793360",
    "end": "1801440"
  },
  {
    "text": "my name is mark abrams i contribute to open source and you can too thank you",
    "start": "1802559",
    "end": "1809840"
  }
]