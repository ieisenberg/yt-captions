[
  {
    "start": "0",
    "end": "50000"
  },
  {
    "text": "hi",
    "start": "0",
    "end": "1199"
  },
  {
    "text": "what's an i.t crowd",
    "start": "1199",
    "end": "4720"
  },
  {
    "text": "i'm going to talk about how we went from",
    "start": "4720",
    "end": "7040"
  },
  {
    "text": "canary deployments to canary clusters",
    "start": "7040",
    "end": "9599"
  },
  {
    "text": "basically",
    "start": "9599",
    "end": "11599"
  },
  {
    "text": "how we do failover clusters in luna",
    "start": "11599",
    "end": "15120"
  },
  {
    "text": "it will be slightly technical but i hope",
    "start": "15120",
    "end": "18000"
  },
  {
    "text": "that's okay",
    "start": "18000",
    "end": "20640"
  },
  {
    "text": "i work at a company called luna no",
    "start": "20960",
    "end": "23519"
  },
  {
    "text": "i don't think many people here know",
    "start": "23519",
    "end": "24880"
  },
  {
    "text": "about it so i took the liberty to post",
    "start": "24880",
    "end": "27359"
  },
  {
    "text": "this slide",
    "start": "27359",
    "end": "28560"
  },
  {
    "text": "we have half a million customers",
    "start": "28560",
    "end": "31439"
  },
  {
    "text": "uh 650",
    "start": "31439",
    "end": "33680"
  },
  {
    "text": "employees almost 700 now we make a app",
    "start": "33680",
    "end": "37600"
  },
  {
    "text": "with a bank and you can invest in stocks",
    "start": "37600",
    "end": "39680"
  },
  {
    "text": "and stuff like that",
    "start": "39680",
    "end": "41120"
  },
  {
    "text": "we are a tech company",
    "start": "41120",
    "end": "43200"
  },
  {
    "text": "so at luna i guess you can call me a",
    "start": "43200",
    "end": "46239"
  },
  {
    "text": "lunatec or something",
    "start": "46239",
    "end": "49039"
  },
  {
    "text": "yeah",
    "start": "49039",
    "end": "50800"
  },
  {
    "start": "50000",
    "end": "228000"
  },
  {
    "text": "we are apparently a unicorn now it's",
    "start": "50800",
    "end": "54160"
  },
  {
    "text": "something about evaluation i'm not an",
    "start": "54160",
    "end": "56160"
  },
  {
    "text": "expert and apparently we are times two",
    "start": "56160",
    "end": "60079"
  },
  {
    "text": "i don't know how that works with unicorn",
    "start": "60079",
    "end": "62559"
  },
  {
    "text": "but",
    "start": "62559",
    "end": "63680"
  },
  {
    "text": "yeah we'll look at that",
    "start": "63680",
    "end": "66080"
  },
  {
    "text": "my name is henrik who",
    "start": "66080",
    "end": "68479"
  },
  {
    "text": "i'm from the nordics slightly different",
    "start": "68479",
    "end": "70960"
  },
  {
    "text": "climate my genes are not made for this",
    "start": "70960",
    "end": "74159"
  },
  {
    "text": "climate at least i learned",
    "start": "74159",
    "end": "76720"
  },
  {
    "text": "so that's it",
    "start": "76720",
    "end": "78479"
  },
  {
    "text": "i'm a co-organizer at the cloud native",
    "start": "78479",
    "end": "80479"
  },
  {
    "text": "or whose group",
    "start": "80479",
    "end": "82720"
  },
  {
    "text": "together with my colleague casper who's",
    "start": "82720",
    "end": "84720"
  },
  {
    "text": "the organizer",
    "start": "84720",
    "end": "86479"
  },
  {
    "text": "um",
    "start": "86479",
    "end": "87360"
  },
  {
    "text": "yeah i speak at different",
    "start": "87360",
    "end": "89280"
  },
  {
    "text": "meetups conferences and stuff i really",
    "start": "89280",
    "end": "91200"
  },
  {
    "text": "like doing that sharing knowledge",
    "start": "91200",
    "end": "93280"
  },
  {
    "text": "um i worked as a consultant for many",
    "start": "93280",
    "end": "95600"
  },
  {
    "text": "years but now i work at luna i've been",
    "start": "95600",
    "end": "97439"
  },
  {
    "text": "there for nine months",
    "start": "97439",
    "end": "99600"
  },
  {
    "text": "and my hobby is dungeon and dragons",
    "start": "99600",
    "end": "102399"
  },
  {
    "text": "so i basically",
    "start": "102399",
    "end": "105360"
  },
  {
    "text": "so basically in to people who don't know",
    "start": "108079",
    "end": "110479"
  },
  {
    "text": "what that is i paint small",
    "start": "110479",
    "end": "112799"
  },
  {
    "text": "plastic stuff and then with other",
    "start": "112799",
    "end": "115280"
  },
  {
    "text": "grown-ups we play with them",
    "start": "115280",
    "end": "118640"
  },
  {
    "text": "roughly yeah",
    "start": "119200",
    "end": "121840"
  },
  {
    "text": "one of the things i really like about",
    "start": "121840",
    "end": "123439"
  },
  {
    "text": "dungeon and dragons is that one thing",
    "start": "123439",
    "end": "125119"
  },
  {
    "text": "you learn is that a strong team is a",
    "start": "125119",
    "end": "128319"
  },
  {
    "text": "diverse team",
    "start": "128319",
    "end": "130080"
  },
  {
    "text": "four wizards won't survive the tavern so",
    "start": "130080",
    "end": "133120"
  },
  {
    "text": "and everybody that's apparent to",
    "start": "133120",
    "end": "134640"
  },
  {
    "text": "everyone who played it so",
    "start": "134640",
    "end": "136480"
  },
  {
    "text": "so yeah that's me",
    "start": "136480",
    "end": "138720"
  },
  {
    "text": "um this is the",
    "start": "138720",
    "end": "140319"
  },
  {
    "text": "meetup groups we have in the nordics and",
    "start": "140319",
    "end": "142560"
  },
  {
    "text": "we actually combine them to the cloud",
    "start": "142560",
    "end": "144560"
  },
  {
    "text": "native nordics",
    "start": "144560",
    "end": "146959"
  },
  {
    "text": "so if you like cold weather or rain or",
    "start": "146959",
    "end": "149680"
  },
  {
    "text": "in the area by all means join us go to",
    "start": "149680",
    "end": "153360"
  },
  {
    "text": "cloudnativenordics.com",
    "start": "153360",
    "end": "155120"
  },
  {
    "text": "and we have a slack work group i think",
    "start": "155120",
    "end": "158000"
  },
  {
    "text": "it's called",
    "start": "158000",
    "end": "159040"
  },
  {
    "text": "where we communicate and exchange",
    "start": "159040",
    "end": "161040"
  },
  {
    "text": "speakers and stuff like that so it's",
    "start": "161040",
    "end": "163200"
  },
  {
    "text": "really awesome community",
    "start": "163200",
    "end": "165760"
  },
  {
    "text": "so the at the end of today i'll talk",
    "start": "165760",
    "end": "167519"
  },
  {
    "text": "about our tech stack",
    "start": "167519",
    "end": "169280"
  },
  {
    "text": "i'll talk about what how we did",
    "start": "169280",
    "end": "171680"
  },
  {
    "text": "failovers basically how did we achieve",
    "start": "171680",
    "end": "174400"
  },
  {
    "text": "the the capability of doing a failover",
    "start": "174400",
    "end": "177599"
  },
  {
    "text": "using githubs because that's not as easy",
    "start": "177599",
    "end": "180000"
  },
  {
    "text": "as we thought it was",
    "start": "180000",
    "end": "182080"
  },
  {
    "text": "and then some of the key changes to get",
    "start": "182080",
    "end": "184480"
  },
  {
    "text": "speed and get more confident and remove",
    "start": "184480",
    "end": "186640"
  },
  {
    "text": "complexity um and then i'll talk just",
    "start": "186640",
    "end": "189519"
  },
  {
    "text": "about what we are planning on doing on",
    "start": "189519",
    "end": "191920"
  },
  {
    "text": "the road ahead",
    "start": "191920",
    "end": "193840"
  },
  {
    "text": "so it was a journey",
    "start": "193840",
    "end": "196000"
  },
  {
    "text": "i tried to separate dungeon and dragons",
    "start": "196000",
    "end": "197840"
  },
  {
    "text": "and work so you know",
    "start": "197840",
    "end": "199599"
  },
  {
    "text": "um but",
    "start": "199599",
    "end": "201840"
  },
  {
    "text": "basically casper and bian did an amazing",
    "start": "201840",
    "end": "204319"
  },
  {
    "text": "job transforming the company from",
    "start": "204319",
    "end": "206319"
  },
  {
    "text": "working on a monolith to microservices",
    "start": "206319",
    "end": "209120"
  },
  {
    "text": "which was a great help when doing",
    "start": "209120",
    "end": "210840"
  },
  {
    "text": "failures we also transitioned from using",
    "start": "210840",
    "end": "214640"
  },
  {
    "text": "deployment pipelines to using a gedox",
    "start": "214640",
    "end": "218879"
  },
  {
    "text": "way of working and that is basically key",
    "start": "218879",
    "end": "222159"
  },
  {
    "text": "because you don't want to trigger 1400",
    "start": "222159",
    "end": "224720"
  },
  {
    "text": "pipelines when you do a failover",
    "start": "224720",
    "end": "227760"
  },
  {
    "text": "yes",
    "start": "227760",
    "end": "229040"
  },
  {
    "start": "228000",
    "end": "301000"
  },
  {
    "text": "so our tech stack",
    "start": "229040",
    "end": "231280"
  },
  {
    "text": "we use",
    "start": "231280",
    "end": "233439"
  },
  {
    "text": "kubernetes",
    "start": "233439",
    "end": "234720"
  },
  {
    "text": "no big surprise there",
    "start": "234720",
    "end": "237040"
  },
  {
    "text": "i wanted to make a joke about something",
    "start": "237040",
    "end": "238799"
  },
  {
    "text": "else but i don't want to do that",
    "start": "238799",
    "end": "241519"
  },
  {
    "text": "we use git ups",
    "start": "241519",
    "end": "243680"
  },
  {
    "text": "we have a mono ribbon",
    "start": "243680",
    "end": "245439"
  },
  {
    "text": "just you know there's different",
    "start": "245439",
    "end": "246560"
  },
  {
    "text": "strategies but it's a monorail",
    "start": "246560",
    "end": "248959"
  },
  {
    "text": "we use flux one at this time when we did",
    "start": "248959",
    "end": "251920"
  },
  {
    "text": "these things we have now migrated to",
    "start": "251920",
    "end": "254080"
  },
  {
    "text": "flux 2",
    "start": "254080",
    "end": "255599"
  },
  {
    "text": "which i could do a whole talk about",
    "start": "255599",
    "end": "258000"
  },
  {
    "text": "which is really awesome",
    "start": "258000",
    "end": "259759"
  },
  {
    "text": "and yes we did pay aws and s3 bucket",
    "start": "259759",
    "end": "263280"
  },
  {
    "text": "full of money to manage our databases",
    "start": "263280",
    "end": "266240"
  },
  {
    "text": "you could call it cheating we call it",
    "start": "266240",
    "end": "268000"
  },
  {
    "text": "convenience",
    "start": "268000",
    "end": "269360"
  },
  {
    "text": "it's really nice",
    "start": "269360",
    "end": "271280"
  },
  {
    "text": "and we use rabbitmq to decouple our",
    "start": "271280",
    "end": "273840"
  },
  {
    "text": "services not just in space but also in",
    "start": "273840",
    "end": "276720"
  },
  {
    "text": "time so that's also a great help when",
    "start": "276720",
    "end": "278880"
  },
  {
    "text": "you do failovers if you want to do it",
    "start": "278880",
    "end": "280880"
  },
  {
    "text": "without downtime at least",
    "start": "280880",
    "end": "282960"
  },
  {
    "text": "and we use external dns",
    "start": "282960",
    "end": "284880"
  },
  {
    "text": "to control our",
    "start": "284880",
    "end": "287199"
  },
  {
    "text": "endpoints in the dns and to shift the",
    "start": "287199",
    "end": "290000"
  },
  {
    "text": "routing",
    "start": "290000",
    "end": "290960"
  },
  {
    "text": "weights in route 53",
    "start": "290960",
    "end": "293520"
  },
  {
    "text": "we are primarily in aws but we are also",
    "start": "293520",
    "end": "296880"
  },
  {
    "text": "in google and in asher or azure or yeah",
    "start": "296880",
    "end": "302000"
  },
  {
    "start": "301000",
    "end": "351000"
  },
  {
    "text": "then we made some stuff ourselves",
    "start": "302240",
    "end": "304400"
  },
  {
    "text": "we made something called shuttle and",
    "start": "304400",
    "end": "306240"
  },
  {
    "text": "it's kind of hard to explain what it is",
    "start": "306240",
    "end": "308479"
  },
  {
    "text": "in very little time but it's basically a",
    "start": "308479",
    "end": "311120"
  },
  {
    "text": "thin layer we put between the developers",
    "start": "311120",
    "end": "313759"
  },
  {
    "text": "and our systems so we decouple",
    "start": "313759",
    "end": "317360"
  },
  {
    "text": "our services in kits from the",
    "start": "317360",
    "end": "320639"
  },
  {
    "text": "from jenkins for instance and also the",
    "start": "320639",
    "end": "323199"
  },
  {
    "text": "way that",
    "start": "323199",
    "end": "324560"
  },
  {
    "text": "that the pipelines works and all that",
    "start": "324560",
    "end": "326479"
  },
  {
    "text": "stuff it's a great tool it helps us a",
    "start": "326479",
    "end": "329199"
  },
  {
    "text": "lot we can change stuff really quickly",
    "start": "329199",
    "end": "331600"
  },
  {
    "text": "by using this it's open source",
    "start": "331600",
    "end": "334560"
  },
  {
    "text": "we have release manager it's a",
    "start": "334560",
    "end": "336800"
  },
  {
    "text": "three-headed thing uh one of the most",
    "start": "336800",
    "end": "339039"
  },
  {
    "text": "important thing is the ham sea tail",
    "start": "339039",
    "end": "341919"
  },
  {
    "text": "it's not the meat uh the first",
    "start": "341919",
    "end": "344080"
  },
  {
    "text": "chimpanzee in space was called ham",
    "start": "344080",
    "end": "346720"
  },
  {
    "text": "so now",
    "start": "346720",
    "end": "348479"
  },
  {
    "text": "you know",
    "start": "348479",
    "end": "349759"
  },
  {
    "text": "we get the question a lot uh so let's",
    "start": "349759",
    "end": "352720"
  },
  {
    "start": "351000",
    "end": "469000"
  },
  {
    "text": "look at the first generation failover so",
    "start": "352720",
    "end": "355280"
  },
  {
    "text": "this is what we",
    "start": "355280",
    "end": "356720"
  },
  {
    "text": "this is what gave us the capability and",
    "start": "356720",
    "end": "359039"
  },
  {
    "text": "then we could start work on that right",
    "start": "359039",
    "end": "361680"
  },
  {
    "text": "um you we would have a git ups repo with",
    "start": "361680",
    "end": "364400"
  },
  {
    "text": "all our manifest we had a cluster",
    "start": "364400",
    "end": "366240"
  },
  {
    "text": "pointing flux to it and we had users",
    "start": "366240",
    "end": "369199"
  },
  {
    "text": "it's not to scale just so you know",
    "start": "369199",
    "end": "372400"
  },
  {
    "text": "what we did was we created a branch",
    "start": "372400",
    "end": "374960"
  },
  {
    "text": "because there are things in the new",
    "start": "374960",
    "end": "376720"
  },
  {
    "text": "cluster that should be slightly",
    "start": "376720",
    "end": "378160"
  },
  {
    "text": "different right",
    "start": "378160",
    "end": "379840"
  },
  {
    "text": "like",
    "start": "379840",
    "end": "380960"
  },
  {
    "text": "cluster name routing weights and all",
    "start": "380960",
    "end": "382720"
  },
  {
    "text": "that stuff and this is i think the way",
    "start": "382720",
    "end": "384960"
  },
  {
    "text": "many people do it this is the way we did",
    "start": "384960",
    "end": "387280"
  },
  {
    "text": "it in the beginning",
    "start": "387280",
    "end": "389120"
  },
  {
    "text": "we would then create some edits here",
    "start": "389120",
    "end": "390960"
  },
  {
    "text": "like the cluster name and stuff we would",
    "start": "390960",
    "end": "392960"
  },
  {
    "text": "then spin up another kubernetes cluster",
    "start": "392960",
    "end": "395120"
  },
  {
    "text": "point flux to it spin up all the",
    "start": "395120",
    "end": "397120"
  },
  {
    "text": "services",
    "start": "397120",
    "end": "398400"
  },
  {
    "text": "and then",
    "start": "398400",
    "end": "399280"
  },
  {
    "text": "that was fine no traffic was routed to",
    "start": "399280",
    "end": "401360"
  },
  {
    "text": "it yet we would then federate the two",
    "start": "401360",
    "end": "403759"
  },
  {
    "text": "clusters",
    "start": "403759",
    "end": "405280"
  },
  {
    "text": "two-way federation is needed unless you",
    "start": "405280",
    "end": "407759"
  },
  {
    "text": "want to throw away some",
    "start": "407759",
    "end": "409360"
  },
  {
    "text": "messages",
    "start": "409360",
    "end": "411039"
  },
  {
    "text": "um",
    "start": "411039",
    "end": "411919"
  },
  {
    "text": "and then we made some edits in both of",
    "start": "411919",
    "end": "413680"
  },
  {
    "text": "these repos or sorry not replace",
    "start": "413680",
    "end": "416960"
  },
  {
    "text": "branches",
    "start": "416960",
    "end": "418000"
  },
  {
    "text": "and that would then",
    "start": "418000",
    "end": "419599"
  },
  {
    "text": "shift the the rounding weight on the",
    "start": "419599",
    "end": "422560"
  },
  {
    "text": "annotations that external dns uses so we",
    "start": "422560",
    "end": "425280"
  },
  {
    "text": "now have maybe 80 20 or something like",
    "start": "425280",
    "end": "428400"
  },
  {
    "text": "that um and then we can shift it again",
    "start": "428400",
    "end": "430720"
  },
  {
    "text": "and again until we actually don't use",
    "start": "430720",
    "end": "433440"
  },
  {
    "text": "the old cluster anymore",
    "start": "433440",
    "end": "435599"
  },
  {
    "text": "then we can remove the services and once",
    "start": "435599",
    "end": "437840"
  },
  {
    "text": "we're sure that every service is is down",
    "start": "437840",
    "end": "440400"
  },
  {
    "text": "and gone we can then remove the",
    "start": "440400",
    "end": "442319"
  },
  {
    "text": "federation and we can actually remove",
    "start": "442319",
    "end": "444080"
  },
  {
    "text": "the old cluster and then the fun part",
    "start": "444080",
    "end": "446479"
  },
  {
    "text": "comes where we need to merge this branch",
    "start": "446479",
    "end": "449199"
  },
  {
    "text": "into the main branch and stuff like that",
    "start": "449199",
    "end": "451840"
  },
  {
    "text": "and point flux to that",
    "start": "451840",
    "end": "455039"
  },
  {
    "text": "that was complex and and it sounds it",
    "start": "455039",
    "end": "458160"
  },
  {
    "text": "looks simple but when you're in the",
    "start": "458160",
    "end": "459759"
  },
  {
    "text": "situation on incident mode this is not",
    "start": "459759",
    "end": "462479"
  },
  {
    "text": "the complexity you really want but we",
    "start": "462479",
    "end": "464879"
  },
  {
    "text": "had the capability there's a lot of work",
    "start": "464879",
    "end": "467120"
  },
  {
    "text": "went into this so it's really awesome",
    "start": "467120",
    "end": "470160"
  },
  {
    "start": "469000",
    "end": "553000"
  },
  {
    "text": "so challenges",
    "start": "470160",
    "end": "472080"
  },
  {
    "text": "a lot of merge complexity in the github",
    "start": "472080",
    "end": "474080"
  },
  {
    "text": "repo",
    "start": "474080",
    "end": "475120"
  },
  {
    "text": "it is not a nice experience",
    "start": "475120",
    "end": "478560"
  },
  {
    "text": "new deployments would stale during this",
    "start": "478560",
    "end": "481120"
  },
  {
    "text": "exercise because we would branch and",
    "start": "481120",
    "end": "483520"
  },
  {
    "text": "only new deployments would or releases",
    "start": "483520",
    "end": "486080"
  },
  {
    "text": "would go into the main branch",
    "start": "486080",
    "end": "488319"
  },
  {
    "text": "but they would eventually get back",
    "start": "488319",
    "end": "491440"
  },
  {
    "text": "most people felt a lot of people felt",
    "start": "491440",
    "end": "493680"
  },
  {
    "text": "uncomfortable doing this because of the",
    "start": "493680",
    "end": "495360"
  },
  {
    "text": "complexity and all this",
    "start": "495360",
    "end": "497120"
  },
  {
    "text": "and it's it just didn't seem like in the",
    "start": "497120",
    "end": "500080"
  },
  {
    "text": "spirit of get ups it it should be more",
    "start": "500080",
    "end": "502879"
  },
  {
    "text": "smooth right it feels like a hack so to",
    "start": "502879",
    "end": "506400"
  },
  {
    "text": "speak",
    "start": "506400",
    "end": "507520"
  },
  {
    "text": "some of the",
    "start": "507520",
    "end": "508879"
  },
  {
    "text": "observations um",
    "start": "508879",
    "end": "510800"
  },
  {
    "text": "most of the edits was the cluster name",
    "start": "510800",
    "end": "513120"
  },
  {
    "text": "so there's a lot of things in the",
    "start": "513120",
    "end": "514560"
  },
  {
    "text": "cluster that needed that barcode right",
    "start": "514560",
    "end": "516959"
  },
  {
    "text": "it's still",
    "start": "516959",
    "end": "517839"
  },
  {
    "text": "not a pet it's still a cattle but we",
    "start": "517839",
    "end": "520159"
  },
  {
    "text": "need the barcode",
    "start": "520159",
    "end": "523120"
  },
  {
    "text": "so that for instance",
    "start": "523200",
    "end": "525120"
  },
  {
    "text": "fluent bit would know to send the",
    "start": "525120",
    "end": "527200"
  },
  {
    "text": "cluster name with it because when you",
    "start": "527200",
    "end": "528880"
  },
  {
    "text": "have two clusters that are",
    "start": "528880",
    "end": "530800"
  },
  {
    "text": "identical you would like to know which",
    "start": "530800",
    "end": "532800"
  },
  {
    "text": "cluster did this locked line came come",
    "start": "532800",
    "end": "534880"
  },
  {
    "text": "from right",
    "start": "534880",
    "end": "536320"
  },
  {
    "text": "and there's a lot of other stuff like",
    "start": "536320",
    "end": "538640"
  },
  {
    "text": "aws aim authenticator the external dns",
    "start": "538640",
    "end": "542160"
  },
  {
    "text": "annotations would need to be",
    "start": "542160",
    "end": "545120"
  },
  {
    "text": "added as well each time we would shift",
    "start": "545120",
    "end": "547440"
  },
  {
    "text": "as well because they couldn't be the",
    "start": "547440",
    "end": "549120"
  },
  {
    "text": "same because then you would have the",
    "start": "549120",
    "end": "550160"
  },
  {
    "text": "same routing weights on on both",
    "start": "550160",
    "end": "552080"
  },
  {
    "text": "environments right",
    "start": "552080",
    "end": "554080"
  },
  {
    "start": "553000",
    "end": "589000"
  },
  {
    "text": "so",
    "start": "554080",
    "end": "555120"
  },
  {
    "text": "going forward to second generation",
    "start": "555120",
    "end": "558240"
  },
  {
    "text": "we created two new controllers because",
    "start": "558240",
    "end": "560800"
  },
  {
    "text": "that's how you solve things today",
    "start": "560800",
    "end": "562720"
  },
  {
    "text": "we created one called cluster identity",
    "start": "562720",
    "end": "564880"
  },
  {
    "text": "controller it has",
    "start": "564880",
    "end": "566640"
  },
  {
    "text": "um",
    "start": "566640",
    "end": "567760"
  },
  {
    "text": "it has some strategies to find the",
    "start": "567760",
    "end": "569600"
  },
  {
    "text": "cluster name",
    "start": "569600",
    "end": "571120"
  },
  {
    "text": "and then create",
    "start": "571120",
    "end": "573519"
  },
  {
    "text": "what you call it config maps in each",
    "start": "573519",
    "end": "576800"
  },
  {
    "text": "namespace with the cluster name and then",
    "start": "576800",
    "end": "578720"
  },
  {
    "text": "the applications can use it",
    "start": "578720",
    "end": "580800"
  },
  {
    "text": "we also created something called routing",
    "start": "580800",
    "end": "582480"
  },
  {
    "text": "weight controller to control the routing",
    "start": "582480",
    "end": "584640"
  },
  {
    "text": "weight annotations that which is then",
    "start": "584640",
    "end": "586640"
  },
  {
    "text": "used by external",
    "start": "586640",
    "end": "588839"
  },
  {
    "text": "dns yes so the cluster identity this is",
    "start": "588839",
    "end": "591680"
  },
  {
    "start": "589000",
    "end": "681000"
  },
  {
    "text": "an example of a cluster",
    "start": "591680",
    "end": "593440"
  },
  {
    "text": "identity and conflict map",
    "start": "593440",
    "end": "595920"
  },
  {
    "text": "what it looks like and you can see you",
    "start": "595920",
    "end": "597440"
  },
  {
    "text": "have the cluster name here in this case",
    "start": "597440",
    "end": "600640"
  },
  {
    "text": "from 2022",
    "start": "600640",
    "end": "602800"
  },
  {
    "text": "and you can then use that in your",
    "start": "602800",
    "end": "604000"
  },
  {
    "text": "application",
    "start": "604000",
    "end": "606560"
  },
  {
    "text": "this is what the routing weight would",
    "start": "606560",
    "end": "608959"
  },
  {
    "text": "look like the cr where you specify the",
    "start": "608959",
    "end": "611920"
  },
  {
    "text": "annotations that you need to put on",
    "start": "611920",
    "end": "613839"
  },
  {
    "text": "increases",
    "start": "613839",
    "end": "615760"
  },
  {
    "text": "with the right",
    "start": "615760",
    "end": "617200"
  },
  {
    "text": "cluster name and you also have the",
    "start": "617200",
    "end": "618880"
  },
  {
    "text": "cluster name because it'll only react to",
    "start": "618880",
    "end": "621200"
  },
  {
    "text": "cluster or routing weight objects that",
    "start": "621200",
    "end": "623360"
  },
  {
    "text": "has its own",
    "start": "623360",
    "end": "624800"
  },
  {
    "text": "cluster name",
    "start": "624800",
    "end": "626160"
  },
  {
    "text": "and this way we can have multiple",
    "start": "626160",
    "end": "628079"
  },
  {
    "text": "routing weight objects in the same git",
    "start": "628079",
    "end": "630079"
  },
  {
    "text": "repository in the same environment but",
    "start": "630079",
    "end": "632320"
  },
  {
    "text": "it'll only react to the ones belonging",
    "start": "632320",
    "end": "634160"
  },
  {
    "text": "to this cluster",
    "start": "634160",
    "end": "635920"
  },
  {
    "text": "so that's the way we fought",
    "start": "635920",
    "end": "638240"
  },
  {
    "text": "branching",
    "start": "638240",
    "end": "640000"
  },
  {
    "text": "it has a dry run mode which is nice in",
    "start": "640000",
    "end": "642480"
  },
  {
    "text": "the beginning at least",
    "start": "642480",
    "end": "644000"
  },
  {
    "text": "so yeah this is how we do it",
    "start": "644000",
    "end": "646640"
  },
  {
    "text": "and this is what an ingress would look",
    "start": "646640",
    "end": "648320"
  },
  {
    "text": "like when the writing weight controller",
    "start": "648320",
    "end": "650160"
  },
  {
    "text": "is done it would add the annotations and",
    "start": "650160",
    "end": "652560"
  },
  {
    "text": "then route 53 would then connect to",
    "start": "652560",
    "end": "655200"
  },
  {
    "text": "externally",
    "start": "655200",
    "end": "656240"
  },
  {
    "text": "external dns would connect to route 53",
    "start": "656240",
    "end": "658720"
  },
  {
    "text": "and make the adjustments",
    "start": "658720",
    "end": "661440"
  },
  {
    "text": "we use shuttle to manipulate these uh",
    "start": "661440",
    "end": "664720"
  },
  {
    "text": "it's actually a repo just like any other",
    "start": "664720",
    "end": "666959"
  },
  {
    "text": "micro service and we have shuttle where",
    "start": "666959",
    "end": "669040"
  },
  {
    "text": "we can run these commands like delete",
    "start": "669040",
    "end": "671120"
  },
  {
    "text": "routing weight add round and weight",
    "start": "671120",
    "end": "672560"
  },
  {
    "text": "adjust running weight",
    "start": "672560",
    "end": "674480"
  },
  {
    "text": "and this is what it looks like before we",
    "start": "674480",
    "end": "676399"
  },
  {
    "text": "do the failover we can see in the yaml",
    "start": "676399",
    "end": "678560"
  },
  {
    "text": "we have one cluster with 100",
    "start": "678560",
    "end": "682160"
  },
  {
    "start": "681000",
    "end": "778000"
  },
  {
    "text": "what we do is we have this extra",
    "start": "682160",
    "end": "684160"
  },
  {
    "text": "repository the old cluster is pointing",
    "start": "684160",
    "end": "687040"
  },
  {
    "text": "to our main branch",
    "start": "687040",
    "end": "688560"
  },
  {
    "text": "we create a new cluster",
    "start": "688560",
    "end": "690640"
  },
  {
    "text": "we spin up flux it points to the",
    "start": "690640",
    "end": "693279"
  },
  {
    "text": "github repository everything spins up",
    "start": "693279",
    "end": "696000"
  },
  {
    "text": "and we then have no traffic yet to the",
    "start": "696000",
    "end": "698720"
  },
  {
    "text": "new cluster",
    "start": "698720",
    "end": "700880"
  },
  {
    "text": "we let's see if this works",
    "start": "700880",
    "end": "703360"
  },
  {
    "text": "yeah we federate the rabbit mq",
    "start": "703360",
    "end": "706640"
  },
  {
    "text": "and then we run the shuttle run add",
    "start": "706640",
    "end": "708800"
  },
  {
    "text": "routing weight it will then create the",
    "start": "708800",
    "end": "711279"
  },
  {
    "text": "entries",
    "start": "711279",
    "end": "712560"
  },
  {
    "text": "we release this as any other service and",
    "start": "712560",
    "end": "716240"
  },
  {
    "text": "we now can add",
    "start": "716240",
    "end": "718320"
  },
  {
    "text": "rounding weights to our new cluster and",
    "start": "718320",
    "end": "720800"
  },
  {
    "text": "then simply by running these commands we",
    "start": "720800",
    "end": "723200"
  },
  {
    "text": "can then gradually shift the traffic",
    "start": "723200",
    "end": "725839"
  },
  {
    "text": "so",
    "start": "725839",
    "end": "726639"
  },
  {
    "text": "adjust routing weight to 50 50 80 20 100",
    "start": "726639",
    "end": "731440"
  },
  {
    "text": "and so on",
    "start": "731440",
    "end": "733279"
  },
  {
    "text": "simply like releasing another",
    "start": "733279",
    "end": "734880"
  },
  {
    "text": "application which is really nice",
    "start": "734880",
    "end": "736959"
  },
  {
    "text": "workflow this is what we're used to",
    "start": "736959",
    "end": "739120"
  },
  {
    "text": "yes",
    "start": "739120",
    "end": "740079"
  },
  {
    "text": "and once that's done uh you can see in",
    "start": "740079",
    "end": "742800"
  },
  {
    "text": "the shuttle the the run weight resource",
    "start": "742800",
    "end": "745839"
  },
  {
    "text": "application so to speak we can see we",
    "start": "745839",
    "end": "747760"
  },
  {
    "text": "now have two clusters and you can see",
    "start": "747760",
    "end": "749440"
  },
  {
    "text": "the routing weights",
    "start": "749440",
    "end": "752399"
  },
  {
    "text": "what we then do is we delete the",
    "start": "752399",
    "end": "754160"
  },
  {
    "text": "rounding weight",
    "start": "754160",
    "end": "755519"
  },
  {
    "text": "release it",
    "start": "755519",
    "end": "756639"
  },
  {
    "text": "and then no uh",
    "start": "756639",
    "end": "759200"
  },
  {
    "text": "traffic is routed to it and we can then",
    "start": "759200",
    "end": "762079"
  },
  {
    "text": "start to remove flux and all the",
    "start": "762079",
    "end": "763920"
  },
  {
    "text": "applications when everything's down we",
    "start": "763920",
    "end": "766079"
  },
  {
    "text": "can then remove",
    "start": "766079",
    "end": "767839"
  },
  {
    "text": "the federation and we can actually",
    "start": "767839",
    "end": "769680"
  },
  {
    "text": "remove the entire old cluster",
    "start": "769680",
    "end": "773120"
  },
  {
    "text": "yes",
    "start": "773120",
    "end": "774720"
  },
  {
    "text": "so this was much easier and much less",
    "start": "774720",
    "end": "777600"
  },
  {
    "text": "complex",
    "start": "777600",
    "end": "779360"
  },
  {
    "start": "778000",
    "end": "816000"
  },
  {
    "text": "some of the effort that went into this",
    "start": "779360",
    "end": "781360"
  },
  {
    "text": "we coded two new operators so that's",
    "start": "781360",
    "end": "784320"
  },
  {
    "text": "also complexity but it's code it's much",
    "start": "784320",
    "end": "786240"
  },
  {
    "text": "easier for us to handle we only need to",
    "start": "786240",
    "end": "788399"
  },
  {
    "text": "maintain this and not every time we need",
    "start": "788399",
    "end": "790399"
  },
  {
    "text": "to do a failover where we need to have",
    "start": "790399",
    "end": "792720"
  },
  {
    "text": "as much cognitive",
    "start": "792720",
    "end": "794480"
  },
  {
    "text": "overhead as possible",
    "start": "794480",
    "end": "796800"
  },
  {
    "text": "we did 17 failover runs in roughly two",
    "start": "796800",
    "end": "799440"
  },
  {
    "text": "months period",
    "start": "799440",
    "end": "800880"
  },
  {
    "text": "which was a lot but it was a heavy",
    "start": "800880",
    "end": "802720"
  },
  {
    "text": "investment but i think it paid off quite",
    "start": "802720",
    "end": "804800"
  },
  {
    "text": "well",
    "start": "804800",
    "end": "806240"
  },
  {
    "text": "every iteration led to improvements we",
    "start": "806240",
    "end": "809279"
  },
  {
    "text": "also use",
    "start": "809279",
    "end": "810480"
  },
  {
    "text": "spot instances in dev which led to",
    "start": "810480",
    "end": "813600"
  },
  {
    "text": "a lot of great findings",
    "start": "813600",
    "end": "815680"
  },
  {
    "text": "um",
    "start": "815680",
    "end": "816480"
  },
  {
    "start": "816000",
    "end": "874000"
  },
  {
    "text": "yeah",
    "start": "816480",
    "end": "817440"
  },
  {
    "text": "some of the results",
    "start": "817440",
    "end": "819920"
  },
  {
    "text": "everyone in squad odyssey which is the",
    "start": "819920",
    "end": "822160"
  },
  {
    "text": "platform",
    "start": "822160",
    "end": "823360"
  },
  {
    "text": "container runtime squad can now do a",
    "start": "823360",
    "end": "825600"
  },
  {
    "text": "failover",
    "start": "825600",
    "end": "827199"
  },
  {
    "text": "the failure operation is down to five",
    "start": "827199",
    "end": "829120"
  },
  {
    "text": "automated steps and the reason it's not",
    "start": "829120",
    "end": "831120"
  },
  {
    "text": "one is because we need to check some",
    "start": "831120",
    "end": "832560"
  },
  {
    "text": "stuff once in a while",
    "start": "832560",
    "end": "834880"
  },
  {
    "text": "no git up branching which was awesome",
    "start": "834880",
    "end": "838320"
  },
  {
    "text": "we didn't really like the branching so",
    "start": "838320",
    "end": "840320"
  },
  {
    "text": "getting rid of that was awesome",
    "start": "840320",
    "end": "842639"
  },
  {
    "text": "and we went from spending",
    "start": "842639",
    "end": "844639"
  },
  {
    "text": "a whole four hours doing a complete",
    "start": "844639",
    "end": "846800"
  },
  {
    "text": "failure without downtime to actually 40",
    "start": "846800",
    "end": "849360"
  },
  {
    "text": "minutes which i think is",
    "start": "849360",
    "end": "851120"
  },
  {
    "text": "okay",
    "start": "851120",
    "end": "852160"
  },
  {
    "text": "so that was really awesome speeding",
    "start": "852160",
    "end": "854959"
  },
  {
    "text": "things up",
    "start": "854959",
    "end": "856560"
  },
  {
    "text": "some of the problems well we have this",
    "start": "856560",
    "end": "858480"
  },
  {
    "text": "identity controller that needs to have",
    "start": "858480",
    "end": "860639"
  },
  {
    "text": "these strategies to find the cluster",
    "start": "860639",
    "end": "862480"
  },
  {
    "text": "name and that seems like a bit if we",
    "start": "862480",
    "end": "864959"
  },
  {
    "text": "could only have like a name",
    "start": "864959",
    "end": "867040"
  },
  {
    "text": "metered metadata thing in kubernetes we",
    "start": "867040",
    "end": "869360"
  },
  {
    "text": "could remove",
    "start": "869360",
    "end": "870720"
  },
  {
    "text": "an operator so if anyone is listening",
    "start": "870720",
    "end": "875120"
  },
  {
    "start": "874000",
    "end": "914000"
  },
  {
    "text": "yeah some of the goals well use we want",
    "start": "875120",
    "end": "877760"
  },
  {
    "text": "to use flux v2 we can use dependency",
    "start": "877760",
    "end": "880320"
  },
  {
    "text": "remove more complexity from our scripts",
    "start": "880320",
    "end": "882720"
  },
  {
    "text": "we want to migrate to cluster api",
    "start": "882720",
    "end": "885199"
  },
  {
    "text": "we want to migrate",
    "start": "885199",
    "end": "887279"
  },
  {
    "text": "more terraform to",
    "start": "887279",
    "end": "889360"
  },
  {
    "text": "to cross plane just to make everything",
    "start": "889360",
    "end": "891760"
  },
  {
    "text": "behind a closed loop",
    "start": "891760",
    "end": "893360"
  },
  {
    "text": "yeah",
    "start": "893360",
    "end": "894720"
  },
  {
    "text": "culture what we did was the deming cycle",
    "start": "894720",
    "end": "897199"
  },
  {
    "text": "plan to",
    "start": "897199",
    "end": "898399"
  },
  {
    "text": "study act is the deming cycle and we",
    "start": "898399",
    "end": "901839"
  },
  {
    "text": "just did that again and again",
    "start": "901839",
    "end": "903680"
  },
  {
    "text": "and with that i would like to say thank",
    "start": "903680",
    "end": "905199"
  },
  {
    "text": "you they are open source you're more",
    "start": "905199",
    "end": "907519"
  },
  {
    "text": "than welcome to contribute thank you so",
    "start": "907519",
    "end": "909600"
  },
  {
    "text": "much for your time",
    "start": "909600",
    "end": "913000"
  }
]