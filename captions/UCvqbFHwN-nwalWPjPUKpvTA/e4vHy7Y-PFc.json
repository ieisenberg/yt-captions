[
  {
    "text": "um thanks for coming to my talk after",
    "start": "919",
    "end": "2440"
  },
  {
    "text": "lunch hope it was a good one um today",
    "start": "2440",
    "end": "5600"
  },
  {
    "text": "we're going to talk about an idea for",
    "start": "5600",
    "end": "8080"
  },
  {
    "text": "multi- region multi- primary and",
    "start": "8080",
    "end": "10519"
  },
  {
    "text": "asynchronous globally distributed",
    "start": "10519",
    "end": "12839"
  },
  {
    "text": "apis um we're going to keep this as",
    "start": "12839",
    "end": "14960"
  },
  {
    "text": "simple as possible because it's a very",
    "start": "14960",
    "end": "16680"
  },
  {
    "text": "complex topic um but I hope it gives you",
    "start": "16680",
    "end": "19960"
  },
  {
    "text": "some inspiration and ideas on how you",
    "start": "19960",
    "end": "21600"
  },
  {
    "text": "could accomplish",
    "start": "21600",
    "end": "23800"
  },
  {
    "text": "this so who am I I'm Brian I'm a",
    "start": "23800",
    "end": "27679"
  },
  {
    "text": "principal um engineer on the platforming",
    "start": "27679",
    "end": "30599"
  },
  {
    "text": "team at thoughtworks um I'm based in",
    "start": "30599",
    "end": "33879"
  },
  {
    "text": "Atlanta you can find me at this website",
    "start": "33879",
    "end": "37079"
  },
  {
    "text": "um or in",
    "start": "37079",
    "end": "38480"
  },
  {
    "text": "GitHub um fun fact about me I'm",
    "start": "38480",
    "end": "42239"
  },
  {
    "text": "currently working on a book with",
    "start": "42239",
    "end": "43760"
  },
  {
    "text": "O'Reilly on cloud native delivery",
    "start": "43760",
    "end": "46199"
  },
  {
    "text": "patterns which is something I talked",
    "start": "46199",
    "end": "48160"
  },
  {
    "text": "about last week in",
    "start": "48160",
    "end": "50480"
  },
  {
    "text": "Japan uh and before I get started I",
    "start": "50480",
    "end": "52920"
  },
  {
    "text": "wanted to say just one thing about this",
    "start": "52920",
    "end": "55239"
  },
  {
    "text": "year because it's been kind of crazy um",
    "start": "55239",
    "end": "58120"
  },
  {
    "text": "my daughter was born in January",
    "start": "58120",
    "end": "60960"
  },
  {
    "text": "uh obviously working on a book with",
    "start": "60960",
    "end": "62640"
  },
  {
    "text": "O'Reilly um I got to give a keynote in",
    "start": "62640",
    "end": "65600"
  },
  {
    "text": "Vancouver uh give workshops in",
    "start": "65600",
    "end": "67600"
  },
  {
    "text": "miniapolis um attend the cubec con",
    "start": "67600",
    "end": "70000"
  },
  {
    "text": "contributor Summit and then last week uh",
    "start": "70000",
    "end": "73280"
  },
  {
    "text": "I spoke at open source Summit Japan with",
    "start": "73280",
    "end": "75560"
  },
  {
    "text": "the cdon track Uh Kevin who was on stage",
    "start": "75560",
    "end": "78880"
  },
  {
    "text": "earlier up here also uh spoke on that",
    "start": "78880",
    "end": "81280"
  },
  {
    "text": "same track so that was an awesome event",
    "start": "81280",
    "end": "83600"
  },
  {
    "text": "and then I don't have any fun jokes for",
    "start": "83600",
    "end": "85960"
  },
  {
    "text": "today but I did take a really cool",
    "start": "85960",
    "end": "87600"
  },
  {
    "text": "picture in Japan um that is not",
    "start": "87600",
    "end": "91600"
  },
  {
    "text": "painted that is in a Buddhist temple in",
    "start": "91600",
    "end": "94479"
  },
  {
    "text": "Kyoto um where they do like",
    "start": "94479",
    "end": "96880"
  },
  {
    "text": "illuminations for the fall leaves and",
    "start": "96880",
    "end": "98920"
  },
  {
    "text": "stuff so pretty fun little",
    "start": "98920",
    "end": "102520"
  },
  {
    "text": "trip so agenda um we're going to talk a",
    "start": "102520",
    "end": "105640"
  },
  {
    "text": "little bit about why and who this sort",
    "start": "105640",
    "end": "107360"
  },
  {
    "text": "of thing applies to we'll talk about",
    "start": "107360",
    "end": "109320"
  },
  {
    "text": "some requirements um we'll go through a",
    "start": "109320",
    "end": "112119"
  },
  {
    "text": "policy based example we'll look at ISO",
    "start": "112119",
    "end": "114119"
  },
  {
    "text": "patterns and then we'll have a",
    "start": "114119",
    "end": "117040"
  },
  {
    "text": "summary so the cases where I think this",
    "start": "117119",
    "end": "120560"
  },
  {
    "text": "applies to the most are financial and",
    "start": "120560",
    "end": "123840"
  },
  {
    "text": "auction-based however there are probably",
    "start": "123840",
    "end": "125880"
  },
  {
    "text": "other use cases that we're not focused",
    "start": "125880",
    "end": "127799"
  },
  {
    "text": "on here these two just make a really",
    "start": "127799",
    "end": "130319"
  },
  {
    "text": "good way to explain this topic um so",
    "start": "130319",
    "end": "133520"
  },
  {
    "text": "it's just really helpful to dig through",
    "start": "133520",
    "end": "134879"
  },
  {
    "text": "it that",
    "start": "134879",
    "end": "136160"
  },
  {
    "text": "way so when we talk about financial",
    "start": "136160",
    "end": "138519"
  },
  {
    "text": "systems and trading in sort of a a",
    "start": "138519",
    "end": "141200"
  },
  {
    "text": "multi- region context um there's a few",
    "start": "141200",
    "end": "144200"
  },
  {
    "text": "things that we have to think about uh",
    "start": "144200",
    "end": "146120"
  },
  {
    "text": "the first is that they're usually time",
    "start": "146120",
    "end": "148000"
  },
  {
    "text": "sensitive especially with analytical or",
    "start": "148000",
    "end": "150599"
  },
  {
    "text": "read data um there are a lot of",
    "start": "150599",
    "end": "153599"
  },
  {
    "text": "regulatory requirements for data rights",
    "start": "153599",
    "end": "155480"
  },
  {
    "text": "and what I mean by that is there are",
    "start": "155480",
    "end": "157160"
  },
  {
    "text": "often regulatory requirements for where",
    "start": "157160",
    "end": "159239"
  },
  {
    "text": "your data gets written and how it gets",
    "start": "159239",
    "end": "160920"
  },
  {
    "text": "written there um and usually with these",
    "start": "160920",
    "end": "164000"
  },
  {
    "text": "types of systems delays or issues with",
    "start": "164000",
    "end": "167040"
  },
  {
    "text": "querying leads to millions of dollars of",
    "start": "167040",
    "end": "169239"
  },
  {
    "text": "losses if not",
    "start": "169239",
    "end": "171879"
  },
  {
    "text": "more another item that we have to think",
    "start": "171879",
    "end": "174159"
  },
  {
    "text": "about with these types of",
    "start": "174159",
    "end": "175599"
  },
  {
    "text": "systems is when we look at say trading a",
    "start": "175599",
    "end": "179800"
  },
  {
    "text": "across the globe which is happening more",
    "start": "179800",
    "end": "181720"
  },
  {
    "text": "and more we have traders that are",
    "start": "181720",
    "end": "183560"
  },
  {
    "text": "operating in one part of the world and",
    "start": "183560",
    "end": "185799"
  },
  {
    "text": "operating on trading systems that are in",
    "start": "185799",
    "end": "187560"
  },
  {
    "text": "multiple parts of the world so we then",
    "start": "187560",
    "end": "189640"
  },
  {
    "text": "have to think about policy and routing",
    "start": "189640",
    "end": "191200"
  },
  {
    "text": "for these types of things as well as the",
    "start": "191200",
    "end": "192799"
  },
  {
    "text": "regulatory requirements we talked",
    "start": "192799",
    "end": "195879"
  },
  {
    "text": "about in the auction-based systems",
    "start": "195879",
    "end": "198440"
  },
  {
    "text": "context we have some similar",
    "start": "198440",
    "end": "200200"
  },
  {
    "text": "requirements actually um rights need to",
    "start": "200200",
    "end": "203280"
  },
  {
    "text": "be fair um we often have at thoughtworks",
    "start": "203280",
    "end": "206080"
  },
  {
    "text": "we have auctioneering companies that we",
    "start": "206080",
    "end": "207519"
  },
  {
    "text": "work with where they will have an",
    "start": "207519",
    "end": "209959"
  },
  {
    "text": "auction that is on site but then they",
    "start": "209959",
    "end": "212599"
  },
  {
    "text": "will also have people participating in",
    "start": "212599",
    "end": "214760"
  },
  {
    "text": "the auction remotely from different",
    "start": "214760",
    "end": "217080"
  },
  {
    "text": "parts of the world and the interesting",
    "start": "217080",
    "end": "219560"
  },
  {
    "text": "context with that is you want to make",
    "start": "219560",
    "end": "222640"
  },
  {
    "text": "sure that these stay fair so the people",
    "start": "222640",
    "end": "224760"
  },
  {
    "text": "that are on Prem are obviously going to",
    "start": "224760",
    "end": "226640"
  },
  {
    "text": "have the fastest experience and the",
    "start": "226640",
    "end": "228959"
  },
  {
    "text": "people that are remote need to be riding",
    "start": "228959",
    "end": "230879"
  },
  {
    "text": "as if they were on location but from",
    "start": "230879",
    "end": "233439"
  },
  {
    "text": "their point so meaning if your right is",
    "start": "233439",
    "end": "235480"
  },
  {
    "text": "coming from one place and we'll see it",
    "start": "235480",
    "end": "237200"
  },
  {
    "text": "in an",
    "start": "237200",
    "end": "238040"
  },
  {
    "text": "animation um another thing to think",
    "start": "238040",
    "end": "240000"
  },
  {
    "text": "about with um database systems where you",
    "start": "240000",
    "end": "243239"
  },
  {
    "text": "may have multi- primary and asynchronous",
    "start": "243239",
    "end": "246239"
  },
  {
    "text": "replication is a lot of these like",
    "start": "246239",
    "end": "248519"
  },
  {
    "text": "Dynamo DB or yugabyte have a last riter",
    "start": "248519",
    "end": "251159"
  },
  {
    "text": "wins meaning that if two rights come in",
    "start": "251159",
    "end": "253519"
  },
  {
    "text": "at the same time and they're conflicting",
    "start": "253519",
    "end": "255040"
  },
  {
    "text": "the one that came in last is actually",
    "start": "255040",
    "end": "256720"
  },
  {
    "text": "the one that wins and for an auction",
    "start": "256720",
    "end": "258359"
  },
  {
    "text": "based system this doesn't work so well",
    "start": "258359",
    "end": "261639"
  },
  {
    "text": "so we have to think about that lastly",
    "start": "261639",
    "end": "264639"
  },
  {
    "text": "user dissatisfaction with any of these",
    "start": "264639",
    "end": "266919"
  },
  {
    "text": "issues leads to millions and losses",
    "start": "266919",
    "end": "270400"
  },
  {
    "text": "so if we think about the auction-based",
    "start": "270400",
    "end": "273000"
  },
  {
    "text": "perspective and I I got really fun with",
    "start": "273000",
    "end": "275600"
  },
  {
    "text": "keynote on this presentation just",
    "start": "275600",
    "end": "277160"
  },
  {
    "text": "warning you now um we have people that",
    "start": "277160",
    "end": "280240"
  },
  {
    "text": "are participating in auctions from",
    "start": "280240",
    "end": "282360"
  },
  {
    "text": "different parts of the world again kind",
    "start": "282360",
    "end": "283800"
  },
  {
    "text": "of similar to that Financial one where",
    "start": "283800",
    "end": "285199"
  },
  {
    "text": "we were talking about where we might",
    "start": "285199",
    "end": "287600"
  },
  {
    "text": "have somebody that's in Australia",
    "start": "287600",
    "end": "289360"
  },
  {
    "text": "participating in an auction that's in",
    "start": "289360",
    "end": "291000"
  },
  {
    "text": "Japan but we want the rights to go to",
    "start": "291000",
    "end": "293520"
  },
  {
    "text": "the API that is in Japan not to say the",
    "start": "293520",
    "end": "296880"
  },
  {
    "text": "API that's in Australia even though we",
    "start": "296880",
    "end": "298759"
  },
  {
    "text": "want to support replication and reads",
    "start": "298759",
    "end": "301320"
  },
  {
    "text": "from where they are locally so we get",
    "start": "301320",
    "end": "303000"
  },
  {
    "text": "fast reads but then also Fair",
    "start": "303000",
    "end": "307120"
  },
  {
    "text": "rights some additional considerations we",
    "start": "307600",
    "end": "310160"
  },
  {
    "text": "need reads to be incredibly fast for",
    "start": "310160",
    "end": "312639"
  },
  {
    "text": "both of these use cases meaning we want",
    "start": "312639",
    "end": "314280"
  },
  {
    "text": "the data for reads to be as close as",
    "start": "314280",
    "end": "316080"
  },
  {
    "text": "possible to the user this is why we want",
    "start": "316080",
    "end": "318199"
  },
  {
    "text": "to look at some of those multi-",
    "start": "318199",
    "end": "320000"
  },
  {
    "text": "asynchronous based databases like Dynamo",
    "start": "320000",
    "end": "322280"
  },
  {
    "text": "or yugabyte where we get those",
    "start": "322280",
    "end": "324880"
  },
  {
    "text": "capabilities um slowness and performance",
    "start": "324880",
    "end": "327520"
  },
  {
    "text": "of reads leads to loss of queer B events",
    "start": "327520",
    "end": "329720"
  },
  {
    "text": "data what do we mean by that we mean",
    "start": "329720",
    "end": "331639"
  },
  {
    "text": "that if we have say a delay in speed",
    "start": "331639",
    "end": "335120"
  },
  {
    "text": "when you're looking at a stock price or",
    "start": "335120",
    "end": "337400"
  },
  {
    "text": "a trading price then somebody can't act",
    "start": "337400",
    "end": "340000"
  },
  {
    "text": "on that as quickly as possible which",
    "start": "340000",
    "end": "342080"
  },
  {
    "text": "leads to loss of money in an auction",
    "start": "342080",
    "end": "344880"
  },
  {
    "text": "based scenario if we have slowness in",
    "start": "344880",
    "end": "346639"
  },
  {
    "text": "reads and somebody trying to decide what",
    "start": "346639",
    "end": "348600"
  },
  {
    "text": "bid to put in uh you're going to lose",
    "start": "348600",
    "end": "350960"
  },
  {
    "text": "bids which means you have less",
    "start": "350960",
    "end": "352960"
  },
  {
    "text": "competition on those items which leads",
    "start": "352960",
    "end": "354680"
  },
  {
    "text": "to loss of",
    "start": "354680",
    "end": "357280"
  },
  {
    "text": "money next there we go so let's take",
    "start": "358479",
    "end": "362880"
  },
  {
    "text": "both of those scenarios and kind of talk",
    "start": "362880",
    "end": "364319"
  },
  {
    "text": "of them from a high level we have a user",
    "start": "364319",
    "end": "366880"
  },
  {
    "text": "that's based in the United States and",
    "start": "366880",
    "end": "369479"
  },
  {
    "text": "they want to get their data as quickly",
    "start": "369479",
    "end": "371400"
  },
  {
    "text": "as possible so we want to send their",
    "start": "371400",
    "end": "373000"
  },
  {
    "text": "reads to somewhere that's near them so",
    "start": "373000",
    "end": "375880"
  },
  {
    "text": "we might have central Canada US West Us",
    "start": "375880",
    "end": "379520"
  },
  {
    "text": "East right and that's fine they're",
    "start": "379520",
    "end": "381880"
  },
  {
    "text": "getting very very fast read requests",
    "start": "381880",
    "end": "383919"
  },
  {
    "text": "from this but the event that they're",
    "start": "383919",
    "end": "387039"
  },
  {
    "text": "talking to auction or stock P or what",
    "start": "387039",
    "end": "389960"
  },
  {
    "text": "have you is in the",
    "start": "389960",
    "end": "392120"
  },
  {
    "text": "UK so we want to send that right over",
    "start": "392120",
    "end": "395400"
  },
  {
    "text": "there and then we want that right to be",
    "start": "395400",
    "end": "397880"
  },
  {
    "text": "replicated to all those regions as",
    "start": "397880",
    "end": "399440"
  },
  {
    "text": "quickly as possible if we're leveraging",
    "start": "399440",
    "end": "401680"
  },
  {
    "text": "one of those database systems we talked",
    "start": "401680",
    "end": "403520"
  },
  {
    "text": "talked about after that right gets put",
    "start": "403520",
    "end": "405360"
  },
  {
    "text": "in those reads are going to be",
    "start": "405360",
    "end": "406400"
  },
  {
    "text": "replicated for us",
    "start": "406400",
    "end": "408240"
  },
  {
    "text": "automatically what we're really",
    "start": "408240",
    "end": "409800"
  },
  {
    "text": "concerned with is how do we make sure we",
    "start": "409800",
    "end": "412039"
  },
  {
    "text": "send the right to the right region and",
    "start": "412039",
    "end": "414240"
  },
  {
    "text": "location with some policy and networking",
    "start": "414240",
    "end": "417560"
  },
  {
    "text": "um rules around that and so what we're",
    "start": "417560",
    "end": "419960"
  },
  {
    "text": "really talking about is we need to have",
    "start": "419960",
    "end": "423560"
  },
  {
    "text": "some sort of programmatic API in front",
    "start": "423560",
    "end": "425599"
  },
  {
    "text": "of that right request that says I want",
    "start": "425599",
    "end": "427639"
  },
  {
    "text": "to send this right to",
    "start": "427639",
    "end": "429639"
  },
  {
    "text": "location to the right location thise oh",
    "start": "429639",
    "end": "434240"
  },
  {
    "text": "there it goes can you hear me all right",
    "start": "434240",
    "end": "437280"
  },
  {
    "text": "it's skipping to the right location",
    "start": "437280",
    "end": "439879"
  },
  {
    "text": "which in this case is in the",
    "start": "439879",
    "end": "441800"
  },
  {
    "text": "UK so to do this we're going to simplify",
    "start": "441800",
    "end": "445919"
  },
  {
    "text": "our requirements a bit and there's",
    "start": "445919",
    "end": "447440"
  },
  {
    "text": "really just two",
    "start": "447440",
    "end": "449960"
  },
  {
    "text": "policy and",
    "start": "449960",
    "end": "452120"
  },
  {
    "text": "routing policy we say this because we",
    "start": "452120",
    "end": "455120"
  },
  {
    "text": "need to make sure that when right",
    "start": "455120",
    "end": "456919"
  },
  {
    "text": "requests are made to a certain region or",
    "start": "456919",
    "end": "458800"
  },
  {
    "text": "location that they're valid routing so",
    "start": "458800",
    "end": "461599"
  },
  {
    "text": "that we get them to the right",
    "start": "461599",
    "end": "463599"
  },
  {
    "text": "place with these two things we're going",
    "start": "463599",
    "end": "465599"
  },
  {
    "text": "to be talking about open policy agent",
    "start": "465599",
    "end": "467639"
  },
  {
    "text": "and",
    "start": "467639",
    "end": "469560"
  },
  {
    "text": "ISO so in the policy case we're going to",
    "start": "469560",
    "end": "472599"
  },
  {
    "text": "be using Opa which if you're not",
    "start": "472599",
    "end": "475280"
  },
  {
    "text": "familiar with Opa um it is a policy",
    "start": "475280",
    "end": "478639"
  },
  {
    "text": "engine that allows you to write um in a",
    "start": "478639",
    "end": "480800"
  },
  {
    "text": "language called Rego which you can then",
    "start": "480800",
    "end": "483520"
  },
  {
    "text": "use to write policy that is able to",
    "start": "483520",
    "end": "485919"
  },
  {
    "text": "interact with kubernetes as well as",
    "start": "485919",
    "end": "487400"
  },
  {
    "text": "other Cloud native",
    "start": "487400",
    "end": "489120"
  },
  {
    "text": "Technologies to give you a much clearer",
    "start": "489120",
    "end": "491720"
  },
  {
    "text": "example in the case of what we're doing",
    "start": "491720",
    "end": "494400"
  },
  {
    "text": "today if you imagine a kubernetes",
    "start": "494400",
    "end": "496599"
  },
  {
    "text": "service talking to say a pod that pod's",
    "start": "496599",
    "end": "500720"
  },
  {
    "text": "going to have an Envoy side car if",
    "start": "500720",
    "end": "502280"
  },
  {
    "text": "you're using AO service mesh well if Opa",
    "start": "502280",
    "end": "505240"
  },
  {
    "text": "is also in the mix you're going to be",
    "start": "505240",
    "end": "506560"
  },
  {
    "text": "using something called Envoy Opa plug-in",
    "start": "506560",
    "end": "510000"
  },
  {
    "text": "which basically is just a long term for",
    "start": "510000",
    "end": "513200"
  },
  {
    "text": "Envoy is going to send all of your HTTP",
    "start": "513200",
    "end": "515760"
  },
  {
    "text": "requests to Opa first before it passes",
    "start": "515760",
    "end": "519240"
  },
  {
    "text": "those requests to the API that is part",
    "start": "519240",
    "end": "521240"
  },
  {
    "text": "of that",
    "start": "521240",
    "end": "522919"
  },
  {
    "text": "pod looks like that so this is a really",
    "start": "522919",
    "end": "526279"
  },
  {
    "text": "simple example we have maybe an HTTP",
    "start": "526279",
    "end": "528480"
  },
  {
    "text": "request coming to our API and it says",
    "start": "528480",
    "end": "531440"
  },
  {
    "text": "let you know we're going to allow maybe",
    "start": "531440",
    "end": "533560"
  },
  {
    "text": "get requests on auctions right and if",
    "start": "533560",
    "end": "536720"
  },
  {
    "text": "that's the case we're going to allow",
    "start": "536720",
    "end": "537920"
  },
  {
    "text": "that to pass through",
    "start": "537920",
    "end": "540320"
  },
  {
    "text": "that decision is passed back up to Envoy",
    "start": "540320",
    "end": "542880"
  },
  {
    "text": "and then that service is able to",
    "start": "542880",
    "end": "544120"
  },
  {
    "text": "actually serve that request that's a",
    "start": "544120",
    "end": "546680"
  },
  {
    "text": "super simple example of how Opa works",
    "start": "546680",
    "end": "548880"
  },
  {
    "text": "with",
    "start": "548880",
    "end": "551160"
  },
  {
    "text": "Envoy so now we're going to look at sort",
    "start": "551160",
    "end": "553320"
  },
  {
    "text": "of a demonstration to kind of get more",
    "start": "553320",
    "end": "555640"
  },
  {
    "text": "into what you could do with",
    "start": "555640",
    "end": "558720"
  },
  {
    "text": "this",
    "start": "559760",
    "end": "561839"
  },
  {
    "text": "oh or not we'll just look at a blank",
    "start": "561839",
    "end": "565440"
  },
  {
    "text": "screen see it now",
    "start": "565440",
    "end": "568120"
  },
  {
    "text": "nope",
    "start": "568120",
    "end": "571120"
  },
  {
    "text": "I'll just do mirror displays maybe",
    "start": "579240",
    "end": "581360"
  },
  {
    "text": "that's the",
    "start": "581360",
    "end": "583760"
  },
  {
    "text": "issue there we",
    "start": "587279",
    "end": "589440"
  },
  {
    "text": "go there we go",
    "start": "589440",
    "end": "592240"
  },
  {
    "text": "okay we'll zoom in a",
    "start": "592240",
    "end": "595000"
  },
  {
    "text": "bit so before I start the context here",
    "start": "595000",
    "end": "598600"
  },
  {
    "text": "is we have a very simple demo setup uh I",
    "start": "598600",
    "end": "601680"
  },
  {
    "text": "don't believe in demos working when you",
    "start": "601680",
    "end": "603360"
  },
  {
    "text": "have networking in the middle of that so",
    "start": "603360",
    "end": "605440"
  },
  {
    "text": "I try to do everything locally with",
    "start": "605440",
    "end": "607079"
  },
  {
    "text": "demos learned from experience um so in",
    "start": "607079",
    "end": "610000"
  },
  {
    "text": "this case we have a kind cluster running",
    "start": "610000",
    "end": "612160"
  },
  {
    "text": "locally on that cluster we have a few",
    "start": "612160",
    "end": "614640"
  },
  {
    "text": "things we have a example application",
    "start": "614640",
    "end": "617760"
  },
  {
    "text": "this is running a simple API and we have",
    "start": "617760",
    "end": "620440"
  },
  {
    "text": "a bundle server and we'll look at both",
    "start": "620440",
    "end": "622079"
  },
  {
    "text": "of those in a second and then we also",
    "start": "622079",
    "end": "624480"
  },
  {
    "text": "have a",
    "start": "624480",
    "end": "626440"
  },
  {
    "text": "database running in our database",
    "start": "626440",
    "end": "628399"
  },
  {
    "text": "namespace this is yugabyte um this is",
    "start": "628399",
    "end": "630800"
  },
  {
    "text": "one of those databases that meets the",
    "start": "630800",
    "end": "632440"
  },
  {
    "text": "requirements of asynchronous multi-",
    "start": "632440",
    "end": "635120"
  },
  {
    "text": "primary replication across regions in",
    "start": "635120",
    "end": "637760"
  },
  {
    "text": "this case we're just using it in the",
    "start": "637760",
    "end": "639040"
  },
  {
    "text": "context of our cluster but it's useful",
    "start": "639040",
    "end": "641000"
  },
  {
    "text": "for the purposes of our demo so the",
    "start": "641000",
    "end": "644160"
  },
  {
    "text": "first thing we're going to look at is",
    "start": "644160",
    "end": "645839"
  },
  {
    "text": "some of our",
    "start": "645839",
    "end": "648440"
  },
  {
    "text": "code make this a little",
    "start": "648920",
    "end": "652519"
  },
  {
    "text": "bigger and the first thing we're going",
    "start": "654240",
    "end": "656079"
  },
  {
    "text": "to look at is just our application",
    "start": "656079",
    "end": "660519"
  },
  {
    "text": "so here we have a fairly basic setup",
    "start": "660519",
    "end": "662480"
  },
  {
    "text": "we're not running ISO inside of this",
    "start": "662480",
    "end": "664200"
  },
  {
    "text": "small cluster I wanted to keep it as",
    "start": "664200",
    "end": "666240"
  },
  {
    "text": "small and easy to demo as possible so",
    "start": "666240",
    "end": "668399"
  },
  {
    "text": "instead what we're doing is we're doing",
    "start": "668399",
    "end": "669920"
  },
  {
    "text": "a proxy a knit with Envoy which",
    "start": "669920",
    "end": "672240"
  },
  {
    "text": "essentially just allows us to stand up",
    "start": "672240",
    "end": "674000"
  },
  {
    "text": "Envoy Standalone without sto inside of a",
    "start": "674000",
    "end": "676839"
  },
  {
    "text": "smaller",
    "start": "676839",
    "end": "677760"
  },
  {
    "text": "cluster we have a basic application this",
    "start": "677760",
    "end": "680480"
  },
  {
    "text": "application is an API that serves teams",
    "start": "680480",
    "end": "682720"
  },
  {
    "text": "requests um at thoughtworks we maintain",
    "start": "682720",
    "end": "685079"
  },
  {
    "text": "a reference implementation of teams API",
    "start": "685079",
    "end": "687440"
  },
  {
    "text": "that we use for a platform starter k",
    "start": "687440",
    "end": "689519"
  },
  {
    "text": "so this API is actually something that I",
    "start": "689519",
    "end": "691639"
  },
  {
    "text": "maintain as part of that um but in this",
    "start": "691639",
    "end": "693800"
  },
  {
    "text": "case we're just using it for a few",
    "start": "693800",
    "end": "695120"
  },
  {
    "text": "simple API requests but you can take a",
    "start": "695120",
    "end": "697120"
  },
  {
    "text": "look if you want and then we're having",
    "start": "697120",
    "end": "698800"
  },
  {
    "text": "it connect to that yugabyte database on",
    "start": "698800",
    "end": "700760"
  },
  {
    "text": "our",
    "start": "700760",
    "end": "701440"
  },
  {
    "text": "cluster we have an Envoy side car and we",
    "start": "701440",
    "end": "704880"
  },
  {
    "text": "have an Opa sidecar which is that plugin",
    "start": "704880",
    "end": "707680"
  },
  {
    "text": "Opa is loading its policies from this",
    "start": "707680",
    "end": "710160"
  },
  {
    "text": "bundle server which is the Pod we saw",
    "start": "710160",
    "end": "712639"
  },
  {
    "text": "earlier so let's take a look at that so",
    "start": "712639",
    "end": "715680"
  },
  {
    "text": "if you remember when we did get pod we",
    "start": "715680",
    "end": "717160"
  },
  {
    "text": "saw a bundle server so if you we look at",
    "start": "717160",
    "end": "719800"
  },
  {
    "text": "bundles server. we have a fairly basic",
    "start": "719800",
    "end": "722720"
  },
  {
    "text": "Opa bundle server what this does is it",
    "start": "722720",
    "end": "724920"
  },
  {
    "text": "serves policies to the pods inside of",
    "start": "724920",
    "end": "727320"
  },
  {
    "text": "our application so in this case what",
    "start": "727320",
    "end": "729800"
  },
  {
    "text": "we're doing is we're serving a config",
    "start": "729800",
    "end": "732160"
  },
  {
    "text": "map called auy policy to our application",
    "start": "732160",
    "end": "735639"
  },
  {
    "text": "and then we're serving bundle server",
    "start": "735639",
    "end": "737079"
  },
  {
    "text": "just as a regular kubernetes service so",
    "start": "737079",
    "end": "739279"
  },
  {
    "text": "that on a knit of our pod we can fetch",
    "start": "739279",
    "end": "741320"
  },
  {
    "text": "policies from",
    "start": "741320",
    "end": "743199"
  },
  {
    "text": "that so then lastly let's take a look at",
    "start": "743199",
    "end": "745680"
  },
  {
    "text": "that",
    "start": "745680",
    "end": "747880"
  },
  {
    "text": "policy here we have a basic Rego policy",
    "start": "747880",
    "end": "751120"
  },
  {
    "text": "what this is doing is it's intercepting",
    "start": "751120",
    "end": "753000"
  },
  {
    "text": "HTTP requests and making decisions based",
    "start": "753000",
    "end": "755480"
  },
  {
    "text": "on what you did with that HTTP request",
    "start": "755480",
    "end": "758320"
  },
  {
    "text": "and we're going to look at some of the",
    "start": "758320",
    "end": "759680"
  },
  {
    "text": "unique things you see here in a minute",
    "start": "759680",
    "end": "762079"
  },
  {
    "text": "um a few of the ones that are more",
    "start": "762079",
    "end": "763959"
  },
  {
    "text": "standard for Opa that you might see all",
    "start": "763959",
    "end": "765800"
  },
  {
    "text": "the time or like is this token valid",
    "start": "765800",
    "end": "767920"
  },
  {
    "text": "meaning the JWT token we passed to that",
    "start": "767920",
    "end": "770199"
  },
  {
    "text": "pod we're validating it as part of opa",
    "start": "770199",
    "end": "773120"
  },
  {
    "text": "um we're also doing some basic action",
    "start": "773120",
    "end": "774880"
  },
  {
    "text": "allowed things like is this person",
    "start": "774880",
    "end": "777079"
  },
  {
    "text": "trying to fetch teams or maybe trying to",
    "start": "777079",
    "end": "779560"
  },
  {
    "text": "create teams if they're an admin then",
    "start": "779560",
    "end": "781720"
  },
  {
    "text": "we'll go ahead and allow those things if",
    "start": "781720",
    "end": "783199"
  },
  {
    "text": "the criteria is",
    "start": "783199",
    "end": "786360"
  },
  {
    "text": "met so now that we've done that we're",
    "start": "786360",
    "end": "788959"
  },
  {
    "text": "going to go ahead and actually start",
    "start": "788959",
    "end": "790240"
  },
  {
    "text": "talking to our API so I'm going to set",
    "start": "790240",
    "end": "792320"
  },
  {
    "text": "up a basic curl pod to act as a",
    "start": "792320",
    "end": "795480"
  },
  {
    "text": "user and the first thing I'm going to do",
    "start": "795480",
    "end": "798199"
  },
  {
    "text": "is get my JWT",
    "start": "798199",
    "end": "801240"
  },
  {
    "text": "token we're going to go ahead and assume",
    "start": "801240",
    "end": "803399"
  },
  {
    "text": "that I've logged in and then we're going",
    "start": "803399",
    "end": "805720"
  },
  {
    "text": "to talk to our API and see our list of",
    "start": "805720",
    "end": "808480"
  },
  {
    "text": "teams here so we currently have Team",
    "start": "808480",
    "end": "810560"
  },
  {
    "text": "Sapphire 1 2 3 and four inside of our",
    "start": "810560",
    "end": "813839"
  },
  {
    "text": "database right now maybe I want to go",
    "start": "813839",
    "end": "817079"
  },
  {
    "text": "ahead and create new teams inside of",
    "start": "817079",
    "end": "818959"
  },
  {
    "text": "this team's API well let's assume that",
    "start": "818959",
    "end": "821880"
  },
  {
    "text": "maybe this is one of those auction or",
    "start": "821880",
    "end": "823800"
  },
  {
    "text": "financial based cases where we have some",
    "start": "823800",
    "end": "826360"
  },
  {
    "text": "requirements around where the rights are",
    "start": "826360",
    "end": "828800"
  },
  {
    "text": "actually being propagated to the correct",
    "start": "828800",
    "end": "830440"
  },
  {
    "text": "region so in this case the rights can",
    "start": "830440",
    "end": "833120"
  },
  {
    "text": "only happen if it's Singapore meaning",
    "start": "833120",
    "end": "835680"
  },
  {
    "text": "that you can only write to the primary",
    "start": "835680",
    "end": "837920"
  },
  {
    "text": "that is in Singapore even if you have",
    "start": "837920",
    "end": "839759"
  },
  {
    "text": "primaries in",
    "start": "839759",
    "end": "841320"
  },
  {
    "text": "Singapore US Canada whatever right so",
    "start": "841320",
    "end": "845720"
  },
  {
    "text": "let's go ahead and take a look at our",
    "start": "845720",
    "end": "847079"
  },
  {
    "text": "basic uh requests examples and here what",
    "start": "847079",
    "end": "851639"
  },
  {
    "text": "we're going to do is we're going to use",
    "start": "851639",
    "end": "854199"
  },
  {
    "text": "just this simple request here we're",
    "start": "854199",
    "end": "856519"
  },
  {
    "text": "going to modify it to do let's say team",
    "start": "856519",
    "end": "860720"
  },
  {
    "text": "five and we'll go ahead and pass that",
    "start": "863560",
    "end": "865800"
  },
  {
    "text": "guy",
    "start": "865800",
    "end": "867680"
  },
  {
    "text": "up",
    "start": "867680",
    "end": "870199"
  },
  {
    "text": "and here we can see that that request",
    "start": "870199",
    "end": "871680"
  },
  {
    "text": "was",
    "start": "871680",
    "end": "872399"
  },
  {
    "text": "forbidden now why is that the reason is",
    "start": "872399",
    "end": "875480"
  },
  {
    "text": "because we are actually looking at the",
    "start": "875480",
    "end": "877040"
  },
  {
    "text": "region of where this request came from",
    "start": "877040",
    "end": "879199"
  },
  {
    "text": "and so what I mean by that is let's go",
    "start": "879199",
    "end": "881639"
  },
  {
    "text": "back to our code for a",
    "start": "881639",
    "end": "884600"
  },
  {
    "text": "second in this case we've just set a",
    "start": "886160",
    "end": "888759"
  },
  {
    "text": "static value for where this API is",
    "start": "888759",
    "end": "891040"
  },
  {
    "text": "actually located we're saying that the",
    "start": "891040",
    "end": "893000"
  },
  {
    "text": "API is located in Singapore in a",
    "start": "893000",
    "end": "895399"
  },
  {
    "text": "production case what you would do is you",
    "start": "895399",
    "end": "897040"
  },
  {
    "text": "would detect this from a running from",
    "start": "897040",
    "end": "898440"
  },
  {
    "text": "the cluster that it's running on using",
    "start": "898440",
    "end": "900040"
  },
  {
    "text": "metadata which Opa has access to to keep",
    "start": "900040",
    "end": "903079"
  },
  {
    "text": "the demo short and compressed we're just",
    "start": "903079",
    "end": "904959"
  },
  {
    "text": "setting this as a value here we're then",
    "start": "904959",
    "end": "907880"
  },
  {
    "text": "looking at the request that's coming in",
    "start": "907880",
    "end": "910079"
  },
  {
    "text": "from our API and saying and comparing",
    "start": "910079",
    "end": "912360"
  },
  {
    "text": "that to the right required location of",
    "start": "912360",
    "end": "915199"
  },
  {
    "text": "that API request so if we don't have a",
    "start": "915199",
    "end": "918600"
  },
  {
    "text": "right location being propagated to that",
    "start": "918600",
    "end": "920399"
  },
  {
    "text": "request we're going to deny it if we",
    "start": "920399",
    "end": "922320"
  },
  {
    "text": "also pass the wrong region or it comes",
    "start": "922320",
    "end": "925240"
  },
  {
    "text": "from the wrong region like say we're",
    "start": "925240",
    "end": "926959"
  },
  {
    "text": "trying to write to the US and instead we",
    "start": "926959",
    "end": "929720"
  },
  {
    "text": "needed it to write to the Singapore it's",
    "start": "929720",
    "end": "931800"
  },
  {
    "text": "also going to be",
    "start": "931800",
    "end": "933319"
  },
  {
    "text": "rejected so let's go back to our curl",
    "start": "933319",
    "end": "937759"
  },
  {
    "text": "pod and we're going to go ahead and",
    "start": "940759",
    "end": "942800"
  },
  {
    "text": "modify our request",
    "start": "942800",
    "end": "947040"
  },
  {
    "text": "again and this time we're going to",
    "start": "948399",
    "end": "950399"
  },
  {
    "text": "actually do the correct right location",
    "start": "950399",
    "end": "952880"
  },
  {
    "text": "so let's do team",
    "start": "952880",
    "end": "956079"
  },
  {
    "text": "five",
    "start": "957600",
    "end": "960600"
  },
  {
    "text": "and Oh wrong maybe wrong",
    "start": "972800",
    "end": "977720"
  },
  {
    "text": "region",
    "start": "987519",
    "end": "990519"
  },
  {
    "text": "right I realize what we did there we",
    "start": "997120",
    "end": "999480"
  },
  {
    "text": "forgot to pass our token to our API so",
    "start": "999480",
    "end": "1002399"
  },
  {
    "text": "let's grab our",
    "start": "1002399",
    "end": "1005000"
  },
  {
    "text": "token and now we can go ahead and do our",
    "start": "1005360",
    "end": "1008040"
  },
  {
    "text": "team five",
    "start": "1008040",
    "end": "1010720"
  },
  {
    "text": "right there we",
    "start": "1012880",
    "end": "1014759"
  },
  {
    "text": "go and now let's go ahead and ask for",
    "start": "1014759",
    "end": "1017000"
  },
  {
    "text": "our teams",
    "start": "1017000",
    "end": "1020480"
  },
  {
    "text": "there we go so now we have our team",
    "start": "1020600",
    "end": "1022839"
  },
  {
    "text": "added to our database coming from the",
    "start": "1022839",
    "end": "1025360"
  },
  {
    "text": "right location or right region so that's",
    "start": "1025360",
    "end": "1028240"
  },
  {
    "text": "a simple example of how you could maybe",
    "start": "1028240",
    "end": "1029839"
  },
  {
    "text": "use policy to enforce where those rights",
    "start": "1029839",
    "end": "1032319"
  },
  {
    "text": "are coming from and where they're being",
    "start": "1032319",
    "end": "1033918"
  },
  {
    "text": "propagated to that's only one half of",
    "start": "1033919",
    "end": "1036000"
  },
  {
    "text": "the equation the other half is routing",
    "start": "1036000",
    "end": "1038000"
  },
  {
    "text": "so how do we actually get them there to",
    "start": "1038000",
    "end": "1039480"
  },
  {
    "text": "the right place so that we don't get",
    "start": "1039480",
    "end": "1041000"
  },
  {
    "text": "those rejections that we saw so going",
    "start": "1041000",
    "end": "1043918"
  },
  {
    "text": "back to our demo I mean to our",
    "start": "1043919",
    "end": "1047400"
  },
  {
    "text": "slides",
    "start": "1047400",
    "end": "1050280"
  },
  {
    "text": "there we",
    "start": "1050280",
    "end": "1051160"
  },
  {
    "text": "go so in this case we're going to be",
    "start": "1051160",
    "end": "1053480"
  },
  {
    "text": "using ISO and for the purposes of this",
    "start": "1053480",
    "end": "1056720"
  },
  {
    "text": "we're just going to be talking through",
    "start": "1056720",
    "end": "1058679"
  },
  {
    "text": "the code and examples um we're not going",
    "start": "1058679",
    "end": "1061919"
  },
  {
    "text": "to have time to do a full demo of multi-",
    "start": "1061919",
    "end": "1064120"
  },
  {
    "text": "region sto on the",
    "start": "1064120",
    "end": "1065919"
  },
  {
    "text": "stage so the assumption that we're going",
    "start": "1065919",
    "end": "1068320"
  },
  {
    "text": "to make is that we have sto multicluster",
    "start": "1068320",
    "end": "1071120"
  },
  {
    "text": "um something to note if you're not",
    "start": "1071120",
    "end": "1073320"
  },
  {
    "text": "familiar with this T multic cluster is",
    "start": "1073320",
    "end": "1074760"
  },
  {
    "text": "it going to be installed in various",
    "start": "1074760",
    "end": "1076159"
  },
  {
    "text": "Network topologies meaning that there is",
    "start": "1076159",
    "end": "1078080"
  },
  {
    "text": "like single Network and multi Network",
    "start": "1078080",
    "end": "1080000"
  },
  {
    "text": "like if you're on Amazon you might have",
    "start": "1080000",
    "end": "1081480"
  },
  {
    "text": "multiple vpcs or a single VPC those are",
    "start": "1081480",
    "end": "1084840"
  },
  {
    "text": "all fine with what we're talking about",
    "start": "1084840",
    "end": "1086360"
  },
  {
    "text": "here today you can kind of pick and",
    "start": "1086360",
    "end": "1087799"
  },
  {
    "text": "choose how you want just there might be",
    "start": "1087799",
    "end": "1089600"
  },
  {
    "text": "different things you'll have to do",
    "start": "1089600",
    "end": "1090880"
  },
  {
    "text": "depending on what you choose uh there",
    "start": "1090880",
    "end": "1093039"
  },
  {
    "text": "are also multiple control plane modes",
    "start": "1093039",
    "end": "1094880"
  },
  {
    "text": "with an ISO multicluster that you'll",
    "start": "1094880",
    "end": "1096440"
  },
  {
    "text": "need to take in consideration when you",
    "start": "1096440",
    "end": "1098000"
  },
  {
    "text": "do",
    "start": "1098000",
    "end": "1100240"
  },
  {
    "text": "this like there we go so the first thing",
    "start": "1100280",
    "end": "1103720"
  },
  {
    "text": "that we need to talk about is",
    "start": "1103720",
    "end": "1104760"
  },
  {
    "text": "destination rules um destination rules",
    "start": "1104760",
    "end": "1107679"
  },
  {
    "text": "are basically policies that apply to",
    "start": "1107679",
    "end": "1109880"
  },
  {
    "text": "that apply to traffic after routing has",
    "start": "1109880",
    "end": "1111600"
  },
  {
    "text": "occurred which sounds like a lot really",
    "start": "1111600",
    "end": "1113960"
  },
  {
    "text": "all it means is when that request gets",
    "start": "1113960",
    "end": "1115960"
  },
  {
    "text": "to your",
    "start": "1115960",
    "end": "1117159"
  },
  {
    "text": "cluster that means routing has already",
    "start": "1117159",
    "end": "1119360"
  },
  {
    "text": "occurred the request has received or",
    "start": "1119360",
    "end": "1121200"
  },
  {
    "text": "gotten into your service mesh then we're",
    "start": "1121200",
    "end": "1123679"
  },
  {
    "text": "going to apply policy to make a decision",
    "start": "1123679",
    "end": "1125640"
  },
  {
    "text": "on that request after it has entered",
    "start": "1125640",
    "end": "1127760"
  },
  {
    "text": "into our STL multicluster Network so",
    "start": "1127760",
    "end": "1131000"
  },
  {
    "text": "that's what we mean by after routing has",
    "start": "1131000",
    "end": "1132720"
  },
  {
    "text": "occurred we're still going to do some",
    "start": "1132720",
    "end": "1133919"
  },
  {
    "text": "additional routing but this is saying",
    "start": "1133919",
    "end": "1136000"
  },
  {
    "text": "your cluster your request is now already",
    "start": "1136000",
    "end": "1138000"
  },
  {
    "text": "there we're going to do something about",
    "start": "1138000",
    "end": "1139640"
  },
  {
    "text": "it you can use it for things like",
    "start": "1139640",
    "end": "1141880"
  },
  {
    "text": "targeting specific versions of services",
    "start": "1141880",
    "end": "1143799"
  },
  {
    "text": "or targeting specific Services based on",
    "start": "1143799",
    "end": "1147480"
  },
  {
    "text": "criteria the next thing to talk about",
    "start": "1147480",
    "end": "1149600"
  },
  {
    "text": "with destination rules is subsets so we",
    "start": "1149600",
    "end": "1152880"
  },
  {
    "text": "can use subsets to do what I just talked",
    "start": "1152880",
    "end": "1154919"
  },
  {
    "text": "about which is Target specific services",
    "start": "1154919",
    "end": "1157480"
  },
  {
    "text": "and we can use like various criteria",
    "start": "1157480",
    "end": "1160000"
  },
  {
    "text": "like say version numbers or headers or",
    "start": "1160000",
    "end": "1162640"
  },
  {
    "text": "whatever you want to Target that",
    "start": "1162640",
    "end": "1164720"
  },
  {
    "text": "specific",
    "start": "1164720",
    "end": "1165679"
  },
  {
    "text": "service sort of defines the criteria for",
    "start": "1165679",
    "end": "1168400"
  },
  {
    "text": "how the subset is targeted through the",
    "start": "1168400",
    "end": "1170440"
  },
  {
    "text": "destination",
    "start": "1170440",
    "end": "1172960"
  },
  {
    "text": "rule so in the sto multicluster context",
    "start": "1174240",
    "end": "1177919"
  },
  {
    "text": "we have something called topology labels",
    "start": "1177919",
    "end": "1180360"
  },
  {
    "text": "which basically just means inside of our",
    "start": "1180360",
    "end": "1183039"
  },
  {
    "text": "multicluster global environment every",
    "start": "1183039",
    "end": "1185919"
  },
  {
    "text": "single cluster inside of our sto mesh is",
    "start": "1185919",
    "end": "1188280"
  },
  {
    "text": "going to have a topology label so if you",
    "start": "1188280",
    "end": "1191120"
  },
  {
    "text": "have say two clusters West and East West",
    "start": "1191120",
    "end": "1194280"
  },
  {
    "text": "is going to have a topology label of",
    "start": "1194280",
    "end": "1196000"
  },
  {
    "text": "Cluster West East is going to have a",
    "start": "1196000",
    "end": "1197600"
  },
  {
    "text": "topology label of cluster East you can",
    "start": "1197600",
    "end": "1200280"
  },
  {
    "text": "change these and modify them however you",
    "start": "1200280",
    "end": "1202400"
  },
  {
    "text": "want these are going to be useful for us",
    "start": "1202400",
    "end": "1205360"
  },
  {
    "text": "though so to dynamically route what we",
    "start": "1205360",
    "end": "1208919"
  },
  {
    "text": "can do is actually write a destination",
    "start": "1208919",
    "end": "1211760"
  },
  {
    "text": "rule using the subsets we just talked",
    "start": "1211760",
    "end": "1213840"
  },
  {
    "text": "about to then Target specific regions",
    "start": "1213840",
    "end": "1216200"
  },
  {
    "text": "within our cluster meaning that we can",
    "start": "1216200",
    "end": "1218840"
  },
  {
    "text": "define a subset that says we want um",
    "start": "1218840",
    "end": "1223000"
  },
  {
    "text": "anything that's cluster SG to go to the",
    "start": "1223000",
    "end": "1226799"
  },
  {
    "text": "um Services running in cluster SG inside",
    "start": "1226799",
    "end": "1229039"
  },
  {
    "text": "of the sto multicluster service mesh",
    "start": "1229039",
    "end": "1231760"
  },
  {
    "text": "same thing with cluster USA these are",
    "start": "1231760",
    "end": "1234240"
  },
  {
    "text": "obviously abstractions because I'm using",
    "start": "1234240",
    "end": "1236600"
  },
  {
    "text": "them for Simplicity yours might be more",
    "start": "1236600",
    "end": "1238559"
  },
  {
    "text": "like us East one Us East 2",
    "start": "1238559",
    "end": "1242960"
  },
  {
    "text": "Etc so using these subsets and I I know",
    "start": "1245120",
    "end": "1248880"
  },
  {
    "text": "this is a lot we'll go through it what",
    "start": "1248880",
    "end": "1250880"
  },
  {
    "text": "we're going to then do is Define a",
    "start": "1250880",
    "end": "1252440"
  },
  {
    "text": "virtual service and using this virtual",
    "start": "1252440",
    "end": "1255440"
  },
  {
    "text": "service we can actually Target our",
    "start": "1255440",
    "end": "1257760"
  },
  {
    "text": "region",
    "start": "1257760",
    "end": "1258799"
  },
  {
    "text": "using those subsets and destination",
    "start": "1258799",
    "end": "1260760"
  },
  {
    "text": "rules so what I mean by this is we can",
    "start": "1260760",
    "end": "1263799"
  },
  {
    "text": "say okay for the requests that are",
    "start": "1263799",
    "end": "1266480"
  },
  {
    "text": "targeting Singapore we are going to",
    "start": "1266480",
    "end": "1269120"
  },
  {
    "text": "Target the destination of subset cluster",
    "start": "1269120",
    "end": "1272799"
  },
  {
    "text": "SG for the events and requests that need",
    "start": "1272799",
    "end": "1276080"
  },
  {
    "text": "to go the us we can Target the",
    "start": "1276080",
    "end": "1278720"
  },
  {
    "text": "destination of cluster",
    "start": "1278720",
    "end": "1281080"
  },
  {
    "text": "USA keeps it really simple for us we can",
    "start": "1281080",
    "end": "1284360"
  },
  {
    "text": "also then say certain criteria like we",
    "start": "1284360",
    "end": "1287039"
  },
  {
    "text": "only want to apply to post requests and",
    "start": "1287039",
    "end": "1289880"
  },
  {
    "text": "why do I say that well if you remember",
    "start": "1289880",
    "end": "1291400"
  },
  {
    "text": "in the animation from much earlier where",
    "start": "1291400",
    "end": "1293760"
  },
  {
    "text": "we were looking at we want reads to go",
    "start": "1293760",
    "end": "1295960"
  },
  {
    "text": "everywhere because we don't care where",
    "start": "1295960",
    "end": "1297520"
  },
  {
    "text": "those go we just want rights to go to",
    "start": "1297520",
    "end": "1299600"
  },
  {
    "text": "certain regions this is one way to allow",
    "start": "1299600",
    "end": "1302000"
  },
  {
    "text": "us to do that meaning that we're only",
    "start": "1302000",
    "end": "1303559"
  },
  {
    "text": "going to enforce sending these requests",
    "start": "1303559",
    "end": "1306480"
  },
  {
    "text": "to those regions when we have a right",
    "start": "1306480",
    "end": "1308600"
  },
  {
    "text": "request otherwise we're just going to",
    "start": "1308600",
    "end": "1309840"
  },
  {
    "text": "let it go wherever it wants we're going",
    "start": "1309840",
    "end": "1311080"
  },
  {
    "text": "to let ISO do what it want and load",
    "start": "1311080",
    "end": "1312640"
  },
  {
    "text": "balance that as quickly as",
    "start": "1312640",
    "end": "1315919"
  },
  {
    "text": "possible so to give you more of a like a",
    "start": "1317039",
    "end": "1320279"
  },
  {
    "text": "simpler you know easier to understand",
    "start": "1320279",
    "end": "1322200"
  },
  {
    "text": "example let's pretend I'm a person in",
    "start": "1322200",
    "end": "1324200"
  },
  {
    "text": "the",
    "start": "1324200",
    "end": "1324919"
  },
  {
    "text": "US and I'm going to send a request to",
    "start": "1324919",
    "end": "1328039"
  },
  {
    "text": "semi API in the US and that's routed for",
    "start": "1328039",
    "end": "1331159"
  },
  {
    "text": "me because that's the closest thing to",
    "start": "1331159",
    "end": "1332919"
  },
  {
    "text": "me right so I'm going to be asking for",
    "start": "1332919",
    "end": "1335960"
  },
  {
    "text": "maybe some data that's in an auction",
    "start": "1335960",
    "end": "1338640"
  },
  {
    "text": "that's based in Singapore but it's just",
    "start": "1338640",
    "end": "1340799"
  },
  {
    "text": "a read request so it's going to go",
    "start": "1340799",
    "end": "1343080"
  },
  {
    "text": "through our Gateway it's going to go",
    "start": "1343080",
    "end": "1344919"
  },
  {
    "text": "through our virtual service it's going",
    "start": "1344919",
    "end": "1346760"
  },
  {
    "text": "to go through that destination Rule and",
    "start": "1346760",
    "end": "1348360"
  },
  {
    "text": "apply some policy and it's just going to",
    "start": "1348360",
    "end": "1349960"
  },
  {
    "text": "decide oh this is a read request so it's",
    "start": "1349960",
    "end": "1352799"
  },
  {
    "text": "not going to apply that right policy so",
    "start": "1352799",
    "end": "1355279"
  },
  {
    "text": "it's just going to go straight to the",
    "start": "1355279",
    "end": "1356400"
  },
  {
    "text": "auction service local to that region and",
    "start": "1356400",
    "end": "1359159"
  },
  {
    "text": "read it straight from",
    "start": "1359159",
    "end": "1361880"
  },
  {
    "text": "there now when we look at the right",
    "start": "1361880",
    "end": "1364799"
  },
  {
    "text": "request we have slightly different we're",
    "start": "1364799",
    "end": "1366919"
  },
  {
    "text": "still going to send that right to the",
    "start": "1366919",
    "end": "1368919"
  },
  {
    "text": "closest possible region for that person",
    "start": "1368919",
    "end": "1371600"
  },
  {
    "text": "meaning that you might have a gslb or",
    "start": "1371600",
    "end": "1373559"
  },
  {
    "text": "something in there where it's just",
    "start": "1373559",
    "end": "1375240"
  },
  {
    "text": "making sure that you get into your",
    "start": "1375240",
    "end": "1376760"
  },
  {
    "text": "cluster mesh as quickly as POS possible",
    "start": "1376760",
    "end": "1379440"
  },
  {
    "text": "and we're then going to go through a few",
    "start": "1379440",
    "end": "1380679"
  },
  {
    "text": "steps still going to go through the",
    "start": "1380679",
    "end": "1382000"
  },
  {
    "text": "Gateway still going to go through our",
    "start": "1382000",
    "end": "1383400"
  },
  {
    "text": "virtual service and then we're going to",
    "start": "1383400",
    "end": "1385400"
  },
  {
    "text": "hit our destination Rule and our",
    "start": "1385400",
    "end": "1386559"
  },
  {
    "text": "destination rule is going to say this is",
    "start": "1386559",
    "end": "1387960"
  },
  {
    "text": "a right to an auction that's based in",
    "start": "1387960",
    "end": "1389799"
  },
  {
    "text": "Singapore so we actually need to send",
    "start": "1389799",
    "end": "1391400"
  },
  {
    "text": "that to our API that's based in",
    "start": "1391400",
    "end": "1394120"
  },
  {
    "text": "Singapore so that's going to go there",
    "start": "1394120",
    "end": "1396600"
  },
  {
    "text": "and get written to our database in",
    "start": "1396600",
    "end": "1398480"
  },
  {
    "text": "Singapore and then the replication will",
    "start": "1398480",
    "end": "1400960"
  },
  {
    "text": "occur to the one up in the US for read",
    "start": "1400960",
    "end": "1403159"
  },
  {
    "text": "requests later",
    "start": "1403159",
    "end": "1404559"
  },
  {
    "text": "on I see a few photos so I'll give it a",
    "start": "1404559",
    "end": "1407559"
  },
  {
    "text": "second",
    "start": "1407559",
    "end": "1409880"
  },
  {
    "text": "I will share the slides",
    "start": "1410159",
    "end": "1413000"
  },
  {
    "text": "too",
    "start": "1413000",
    "end": "1414640"
  },
  {
    "text": "good all",
    "start": "1414640",
    "end": "1417760"
  },
  {
    "text": "right um so what if we don't know the",
    "start": "1417799",
    "end": "1420159"
  },
  {
    "text": "downstream location um in my opinion in",
    "start": "1420159",
    "end": "1424880"
  },
  {
    "text": "these scenarios the client should",
    "start": "1424880",
    "end": "1427760"
  },
  {
    "text": "already know the location of the event",
    "start": "1427760",
    "end": "1429880"
  },
  {
    "text": "before sending a right meaning that",
    "start": "1429880",
    "end": "1431520"
  },
  {
    "text": "you're probably doing some get requests",
    "start": "1431520",
    "end": "1434480"
  },
  {
    "text": "prior so you already know some metadata",
    "start": "1434480",
    "end": "1436720"
  },
  {
    "text": "about the event but if for some reason",
    "start": "1436720",
    "end": "1439000"
  },
  {
    "text": "you don't um you can do manipulations",
    "start": "1439000",
    "end": "1442320"
  },
  {
    "text": "through virtual services or also Opa",
    "start": "1442320",
    "end": "1445440"
  },
  {
    "text": "although it don't recommend doing it an",
    "start": "1445440",
    "end": "1447039"
  },
  {
    "text": "Opa it's quite tricky um where you can",
    "start": "1447039",
    "end": "1449720"
  },
  {
    "text": "apply say header based changes directly",
    "start": "1449720",
    "end": "1452880"
  },
  {
    "text": "to that service request from a virtual",
    "start": "1452880",
    "end": "1455760"
  },
  {
    "text": "service um again only if you really need",
    "start": "1455760",
    "end": "1459240"
  },
  {
    "text": "to do this otherwise I would say maybe",
    "start": "1459240",
    "end": "1461840"
  },
  {
    "text": "stick with you know getting some",
    "start": "1461840",
    "end": "1463640"
  },
  {
    "text": "metadata through your read requests and",
    "start": "1463640",
    "end": "1465760"
  },
  {
    "text": "then using that as part of your workflow",
    "start": "1465760",
    "end": "1467840"
  },
  {
    "text": "into write",
    "start": "1467840",
    "end": "1469320"
  },
  {
    "text": "requests um it's still important to note",
    "start": "1469320",
    "end": "1471520"
  },
  {
    "text": "that policy still protects us from the",
    "start": "1471520",
    "end": "1473000"
  },
  {
    "text": "edge cases in either",
    "start": "1473000",
    "end": "1476799"
  },
  {
    "text": "type so in",
    "start": "1479000",
    "end": "1482120"
  },
  {
    "text": "summary we can use ISO multicluster and",
    "start": "1482120",
    "end": "1485159"
  },
  {
    "text": "open policy agent to accomplish a global",
    "start": "1485159",
    "end": "1487919"
  },
  {
    "text": "multi- region asynchronous multi-",
    "start": "1487919",
    "end": "1490120"
  },
  {
    "text": "primary that's a lot um distribution of",
    "start": "1490120",
    "end": "1493600"
  },
  {
    "text": "our",
    "start": "1493600",
    "end": "1494880"
  },
  {
    "text": "API it's a very complex use case and",
    "start": "1494880",
    "end": "1497440"
  },
  {
    "text": "it's really really only specific example",
    "start": "1497440",
    "end": "1499240"
  },
  {
    "text": "examples where this happens un like",
    "start": "1499240",
    "end": "1501559"
  },
  {
    "text": "finance and auctions are just good",
    "start": "1501559",
    "end": "1504240"
  },
  {
    "text": "ones um Opa ensures rights are only",
    "start": "1504240",
    "end": "1507000"
  },
  {
    "text": "accepted at the right locations meaning",
    "start": "1507000",
    "end": "1508880"
  },
  {
    "text": "that um when we talked about our two",
    "start": "1508880",
    "end": "1511120"
  },
  {
    "text": "requirements of policy and",
    "start": "1511120",
    "end": "1513159"
  },
  {
    "text": "routing we want to make sure that routes",
    "start": "1513159",
    "end": "1516200"
  },
  {
    "text": "are being requests are being routed to",
    "start": "1516200",
    "end": "1517960"
  },
  {
    "text": "the correct place but then once they get",
    "start": "1517960",
    "end": "1520159"
  },
  {
    "text": "there we always need to make sure that",
    "start": "1520159",
    "end": "1521440"
  },
  {
    "text": "they're actually valid so if you think",
    "start": "1521440",
    "end": "1523480"
  },
  {
    "text": "about like um the admission controller",
    "start": "1523480",
    "end": "1525600"
  },
  {
    "text": "pattern in kubernetes where you're",
    "start": "1525600",
    "end": "1527960"
  },
  {
    "text": "sending signed deployments to kubernetes",
    "start": "1527960",
    "end": "1531760"
  },
  {
    "text": "well the thing that actually validates",
    "start": "1531760",
    "end": "1533840"
  },
  {
    "text": "that those deployments are signed is",
    "start": "1533840",
    "end": "1536080"
  },
  {
    "text": "local to that environment meaning that",
    "start": "1536080",
    "end": "1538240"
  },
  {
    "text": "your policy should always live as close",
    "start": "1538240",
    "end": "1540159"
  },
  {
    "text": "as possible to the boundary of the thing",
    "start": "1540159",
    "end": "1542279"
  },
  {
    "text": "that's actually validating it so in our",
    "start": "1542279",
    "end": "1544640"
  },
  {
    "text": "case that's the API request so we want",
    "start": "1544640",
    "end": "1547120"
  },
  {
    "text": "that policy to live alongside the",
    "start": "1547120",
    "end": "1550360"
  },
  {
    "text": "API we then use some clever uses of iso",
    "start": "1550360",
    "end": "1553320"
  },
  {
    "text": "in order to get those requests there",
    "start": "1553320",
    "end": "1554760"
  },
  {
    "text": "using destination rules and virtual",
    "start": "1554760",
    "end": "1556760"
  },
  {
    "text": "services",
    "start": "1556760",
    "end": "1558960"
  },
  {
    "text": "and this is a very Cloud native projects",
    "start": "1558960",
    "end": "1560919"
  },
  {
    "text": "Focus solution um there's a lot of other",
    "start": "1560919",
    "end": "1563399"
  },
  {
    "text": "ways to tackle this there's a really",
    "start": "1563399",
    "end": "1565279"
  },
  {
    "text": "good talk by Vanguard and Amazon",
    "start": "1565279",
    "end": "1567000"
  },
  {
    "text": "reinvent 2022 where they used all AWS",
    "start": "1567000",
    "end": "1569919"
  },
  {
    "text": "services to do a lot of the same thing",
    "start": "1569919",
    "end": "1572320"
  },
  {
    "text": "they did have to write a config library",
    "start": "1572320",
    "end": "1575120"
  },
  {
    "text": "for their Dev teams which is sort of",
    "start": "1575120",
    "end": "1577520"
  },
  {
    "text": "what spawned this idea for me was I was",
    "start": "1577520",
    "end": "1580679"
  },
  {
    "text": "sort of like I wonder if you could",
    "start": "1580679",
    "end": "1582679"
  },
  {
    "text": "accomplish this without having the dev",
    "start": "1582679",
    "end": "1584720"
  },
  {
    "text": "teams put any code into their",
    "start": "1584720",
    "end": "1586320"
  },
  {
    "text": "applications in regards to the actual",
    "start": "1586320",
    "end": "1588200"
  },
  {
    "text": "routing and came up with this",
    "start": "1588200",
    "end": "1591200"
  },
  {
    "text": "concept and then lastly I would highly",
    "start": "1591200",
    "end": "1593919"
  },
  {
    "text": "highly highly recommend if you need to",
    "start": "1593919",
    "end": "1595440"
  },
  {
    "text": "go down this path looking into um global",
    "start": "1595440",
    "end": "1598600"
  },
  {
    "text": "Service load balancers um Global DNS",
    "start": "1598600",
    "end": "1602000"
  },
  {
    "text": "Global accelerators like things that are",
    "start": "1602000",
    "end": "1603520"
  },
  {
    "text": "going to get those requests as quickly",
    "start": "1603520",
    "end": "1605760"
  },
  {
    "text": "as possible into your network um this",
    "start": "1605760",
    "end": "1609159"
  },
  {
    "text": "solution does not do that for you you",
    "start": "1609159",
    "end": "1611720"
  },
  {
    "text": "want to look at like some of those",
    "start": "1611720",
    "end": "1613600"
  },
  {
    "text": "Services I mentioned in order to just",
    "start": "1613600",
    "end": "1615720"
  },
  {
    "text": "get the request into your network and",
    "start": "1615720",
    "end": "1617279"
  },
  {
    "text": "then you can take it from there with",
    "start": "1617279",
    "end": "1618720"
  },
  {
    "text": "this",
    "start": "1618720",
    "end": "1620880"
  },
  {
    "text": "solution and we have 2 minutes and 50",
    "start": "1621960",
    "end": "1625200"
  },
  {
    "text": "seconds left but uh thank you for",
    "start": "1625200",
    "end": "1628500"
  },
  {
    "text": "[Applause]",
    "start": "1628500",
    "end": "1633960"
  },
  {
    "text": "coming uh questions comments got one in",
    "start": "1633960",
    "end": "1637520"
  },
  {
    "text": "the there's a mic in the middle",
    "start": "1637520",
    "end": "1641480"
  },
  {
    "text": "easier no",
    "start": "1641840",
    "end": "1645039"
  },
  {
    "text": "two how did you establish n connectivity",
    "start": "1645159",
    "end": "1648320"
  },
  {
    "text": "across these multic clusters with the",
    "start": "1648320",
    "end": "1651120"
  },
  {
    "text": "yeah so that's going to be like super",
    "start": "1651120",
    "end": "1653679"
  },
  {
    "text": "implementation specific right um in our",
    "start": "1653679",
    "end": "1656240"
  },
  {
    "text": "case at thoughtworks we do we work with",
    "start": "1656240",
    "end": "1658720"
  },
  {
    "text": "all three of the major Cloud vendors but",
    "start": "1658720",
    "end": "1660279"
  },
  {
    "text": "I'm just I'll talk to",
    "start": "1660279",
    "end": "1661600"
  },
  {
    "text": "AWS um in our case we typically do a",
    "start": "1661600",
    "end": "1666480"
  },
  {
    "text": "multi-pc um so sto multi- primary setup",
    "start": "1666480",
    "end": "1670120"
  },
  {
    "text": "and then we'll you obviously have to do",
    "start": "1670120",
    "end": "1671840"
  },
  {
    "text": "VPC connectivity for those Services um",
    "start": "1671840",
    "end": "1674200"
  },
  {
    "text": "we actually started using um their Wan",
    "start": "1674200",
    "end": "1677080"
  },
  {
    "text": "service in order to accomplish that",
    "start": "1677080",
    "end": "1679440"
  },
  {
    "text": "which is basically just like a managed",
    "start": "1679440",
    "end": "1681240"
  },
  {
    "text": "mesh of Transit gateways so that you can",
    "start": "1681240",
    "end": "1683399"
  },
  {
    "text": "get the network connectivity for each of",
    "start": "1683399",
    "end": "1685240"
  },
  {
    "text": "those vpcs um there are other it depends",
    "start": "1685240",
    "end": "1688039"
  },
  {
    "text": "on the cloud impation though but yeah",
    "start": "1688039",
    "end": "1690640"
  },
  {
    "text": "the if you go through sto's multicluster",
    "start": "1690640",
    "end": "1692840"
  },
  {
    "text": "docs um it'll explain all that for you",
    "start": "1692840",
    "end": "1696279"
  },
  {
    "text": "and then take you on pass for each cloud",
    "start": "1696279",
    "end": "1700440"
  },
  {
    "text": "service thanks for the slides but I have",
    "start": "1703919",
    "end": "1706600"
  },
  {
    "text": "two questions um how do you handle uh",
    "start": "1706600",
    "end": "1709559"
  },
  {
    "text": "Regional failures M and secondly how do",
    "start": "1709559",
    "end": "1712080"
  },
  {
    "text": "you recover from the regional failures",
    "start": "1712080",
    "end": "1713760"
  },
  {
    "text": "let's say when the recovery is happening",
    "start": "1713760",
    "end": "1715559"
  },
  {
    "text": "how the OPA policy and routing would",
    "start": "1715559",
    "end": "1717279"
  },
  {
    "text": "work in that case yeah that's a great",
    "start": "1717279",
    "end": "1719440"
  },
  {
    "text": "question it was something I debated",
    "start": "1719440",
    "end": "1721399"
  },
  {
    "text": "about putting in but didn't think I",
    "start": "1721399",
    "end": "1723000"
  },
  {
    "text": "would have time I think it was right um",
    "start": "1723000",
    "end": "1725440"
  },
  {
    "text": "but basically when you look at those",
    "start": "1725440",
    "end": "1728399"
  },
  {
    "text": "destination rules that were say routing",
    "start": "1728399",
    "end": "1730279"
  },
  {
    "text": "us to one region well destination rules",
    "start": "1730279",
    "end": "1732919"
  },
  {
    "text": "actually allow you to send a balance of",
    "start": "1732919",
    "end": "1735480"
  },
  {
    "text": "traffic as well as Define fault",
    "start": "1735480",
    "end": "1736960"
  },
  {
    "text": "tolerance patterns so those are actually",
    "start": "1736960",
    "end": "1739240"
  },
  {
    "text": "the normal use cases for Destination",
    "start": "1739240",
    "end": "1741080"
  },
  {
    "text": "rules meaning you might Define uh if",
    "start": "1741080",
    "end": "1744080"
  },
  {
    "text": "this uh endpoint is down like let's say",
    "start": "1744080",
    "end": "1747000"
  },
  {
    "text": "the Singapore service is down in your",
    "start": "1747000",
    "end": "1750159"
  },
  {
    "text": "destination rule you might have defined",
    "start": "1750159",
    "end": "1751919"
  },
  {
    "text": "a secondary region that's as closest",
    "start": "1751919",
    "end": "1753919"
  },
  {
    "text": "possible that still meets the regulatory",
    "start": "1753919",
    "end": "1755919"
  },
  {
    "text": "requirements of that API so you might",
    "start": "1755919",
    "end": "1758000"
  },
  {
    "text": "have like um let's take the us as it's",
    "start": "1758000",
    "end": "1760799"
  },
  {
    "text": "simpler to for me to remember the region",
    "start": "1760799",
    "end": "1762559"
  },
  {
    "text": "names uh if the regulatory requirement",
    "start": "1762559",
    "end": "1765159"
  },
  {
    "text": "is send these rights to us regions for",
    "start": "1765159",
    "end": "1768200"
  },
  {
    "text": "say Stock Exchange um the your primary",
    "start": "1768200",
    "end": "1771519"
  },
  {
    "text": "defined in your policy might be us East",
    "start": "1771519",
    "end": "1773679"
  },
  {
    "text": "and you might Define in the same",
    "start": "1773679",
    "end": "1774960"
  },
  {
    "text": "destination rule a secondary failover of",
    "start": "1774960",
    "end": "1777720"
  },
  {
    "text": "us West but you can do all of that in",
    "start": "1777720",
    "end": "1780559"
  },
  {
    "text": "the virtual service and destination Rule",
    "start": "1780559",
    "end": "1782360"
  },
  {
    "text": "and then it'll just handle it for",
    "start": "1782360",
    "end": "1785600"
  },
  {
    "text": "you and we're out of time so thank",
    "start": "1787000",
    "end": "1791399"
  },
  {
    "text": "you",
    "start": "1792559",
    "end": "1795559"
  }
]