[
  {
    "text": "so this talk here today it's about",
    "start": "40",
    "end": "2840"
  },
  {
    "text": "ebpf um and how to run evf programs in",
    "start": "2840",
    "end": "6960"
  },
  {
    "text": "kubernetes without using the privileged",
    "start": "6960",
    "end": "10759"
  },
  {
    "text": "flag",
    "start": "10759",
    "end": "12839"
  },
  {
    "text": "um",
    "start": "12839",
    "end": "14360"
  },
  {
    "text": "so about me or about us uh I work at the",
    "start": "14360",
    "end": "19600"
  },
  {
    "text": "gonal labs I am a compiler n spend most",
    "start": "19600",
    "end": "22080"
  },
  {
    "text": "of my career working on manage run times",
    "start": "22080",
    "end": "24400"
  },
  {
    "text": "compilers and garbage collection uh sort",
    "start": "24400",
    "end": "27400"
  },
  {
    "text": "of segwayed into ebpf",
    "start": "27400",
    "end": "30240"
  },
  {
    "text": "um it's all lowlevel programming so it",
    "start": "30240",
    "end": "33320"
  },
  {
    "text": "worked out um and uh but also a",
    "start": "33320",
    "end": "36399"
  },
  {
    "text": "co-author of this presentation here is",
    "start": "36399",
    "end": "38079"
  },
  {
    "text": "David Ash from Google uh who actually as",
    "start": "38079",
    "end": "40760"
  },
  {
    "text": "an external contributor contributed most",
    "start": "40760",
    "end": "43160"
  },
  {
    "text": "of the patches around reducing",
    "start": "43160",
    "end": "45640"
  },
  {
    "text": "privileges for our product ra baa at",
    "start": "45640",
    "end": "48719"
  },
  {
    "text": "Gana um so he couldn't be in person but",
    "start": "48719",
    "end": "53600"
  },
  {
    "text": "virtually guess",
    "start": "53600",
    "end": "56440"
  },
  {
    "text": "so this talk here I'm going to give a",
    "start": "56440",
    "end": "58879"
  },
  {
    "text": "bit of a beef brief introduction into",
    "start": "58879",
    "end": "61000"
  },
  {
    "text": "ebpf um may be familiar to some of you",
    "start": "61000",
    "end": "63879"
  },
  {
    "text": "but for completeness sake I'll go over",
    "start": "63879",
    "end": "66400"
  },
  {
    "text": "it a little bit and then go into what it",
    "start": "66400",
    "end": "70280"
  },
  {
    "text": "takes to run ebpf in",
    "start": "70280",
    "end": "72439"
  },
  {
    "text": "kubernetes uh what kind of permissions",
    "start": "72439",
    "end": "74560"
  },
  {
    "text": "we need or Linux capabilities and",
    "start": "74560",
    "end": "76759"
  },
  {
    "text": "finally maybe talk about how to reduce",
    "start": "76759",
    "end": "78720"
  },
  {
    "text": "some of those permissions and what the",
    "start": "78720",
    "end": "80520"
  },
  {
    "text": "challenges around",
    "start": "80520",
    "end": "83399"
  },
  {
    "text": "that so evf I'm going to skip the",
    "start": "85240",
    "end": "88320"
  },
  {
    "text": "history about it uh there's few talks",
    "start": "88320",
    "end": "90720"
  },
  {
    "text": "over here already about UPF but it's",
    "start": "90720",
    "end": "92920"
  },
  {
    "text": "essentially a virtual machine at least",
    "start": "92920",
    "end": "94600"
  },
  {
    "text": "in my mind inside the kernel which lets",
    "start": "94600",
    "end": "96759"
  },
  {
    "text": "you extend kernel Kernel's functionality",
    "start": "96759",
    "end": "99119"
  },
  {
    "text": "without writing kernel modules it's like",
    "start": "99119",
    "end": "101520"
  },
  {
    "text": "programming for the kernel without",
    "start": "101520",
    "end": "102960"
  },
  {
    "text": "programming for the kernel if you will",
    "start": "102960",
    "end": "105759"
  },
  {
    "text": "and you can hook into any part of the",
    "start": "105759",
    "end": "108079"
  },
  {
    "text": "Linux kernel but maybe even user space",
    "start": "108079",
    "end": "110880"
  },
  {
    "text": "libraries add functionality to them to",
    "start": "110880",
    "end": "113439"
  },
  {
    "text": "some",
    "start": "113439",
    "end": "114240"
  },
  {
    "text": "extent um and the good thing about it",
    "start": "114240",
    "end": "117680"
  },
  {
    "text": "compared to Kernel modules which is what",
    "start": "117680",
    "end": "119680"
  },
  {
    "text": "we used in the past is that it's",
    "start": "119680",
    "end": "121520"
  },
  {
    "text": "extremely fast and it's safe there's a",
    "start": "121520",
    "end": "125079"
  },
  {
    "text": "verifier that checks any code loaded",
    "start": "125079",
    "end": "126920"
  },
  {
    "text": "into this virtual machine for",
    "start": "126920",
    "end": "128840"
  },
  {
    "text": "correctness for memory accesses for not",
    "start": "128840",
    "end": "132560"
  },
  {
    "text": "running Loops that will hold out the",
    "start": "132560",
    "end": "134000"
  },
  {
    "text": "kernel and make it",
    "start": "134000",
    "end": "135560"
  },
  {
    "text": "unstable uh it also comes up with a nice",
    "start": "135560",
    "end": "137879"
  },
  {
    "text": "properties if you ever unloaded a",
    "start": "137879",
    "end": "140599"
  },
  {
    "text": "program it sort of cleans itself up and",
    "start": "140599",
    "end": "143280"
  },
  {
    "text": "it's pretty reliable at doing that so no",
    "start": "143280",
    "end": "146200"
  },
  {
    "text": "stale memory leaks and destabilizing",
    "start": "146200",
    "end": "149599"
  },
  {
    "text": "your Machine by adding it or removing it",
    "start": "149599",
    "end": "152000"
  },
  {
    "text": "so same goes for kubernetes adding ebpf",
    "start": "152000",
    "end": "154239"
  },
  {
    "text": "program to kubernetes should at least",
    "start": "154239",
    "end": "156239"
  },
  {
    "text": "not disrupt your kubernetes cluster in",
    "start": "156239",
    "end": "158319"
  },
  {
    "text": "any way so it's really nice for",
    "start": "158319",
    "end": "161200"
  },
  {
    "text": "that now what does it look like",
    "start": "161200",
    "end": "164280"
  },
  {
    "text": "typically let's say I wanted to write a",
    "start": "164280",
    "end": "166599"
  },
  {
    "text": "program that will figure out if any",
    "start": "166599",
    "end": "168319"
  },
  {
    "text": "container in my kubernetes cluster is",
    "start": "168319",
    "end": "170239"
  },
  {
    "text": "opening and a connection and wanted to",
    "start": "170239",
    "end": "173000"
  },
  {
    "text": "track that so for example TCP connection",
    "start": "173000",
    "end": "176040"
  },
  {
    "text": "going outside what is the port what is",
    "start": "176040",
    "end": "177879"
  },
  {
    "text": "the IP maybe I was writing a a security",
    "start": "177879",
    "end": "180360"
  },
  {
    "text": "solution maybe I just wanted to monitor",
    "start": "180360",
    "end": "182760"
  },
  {
    "text": "how often this happens so typically what",
    "start": "182760",
    "end": "185840"
  },
  {
    "text": "I need to write is this monitor program",
    "start": "185840",
    "end": "188720"
  },
  {
    "text": "that can be written in any programming",
    "start": "188720",
    "end": "190440"
  },
  {
    "text": "language and then write a BPF probe that",
    "start": "190440",
    "end": "193760"
  },
  {
    "text": "will attach to this",
    "start": "193760",
    "end": "195799"
  },
  {
    "text": "disconnect so what actually happens is",
    "start": "195799",
    "end": "198159"
  },
  {
    "text": "this monitor program maybe has this BPF",
    "start": "198159",
    "end": "201120"
  },
  {
    "text": "probe compiled maybe composite on the",
    "start": "201120",
    "end": "202959"
  },
  {
    "text": "Fly loads it into the kernel it when it",
    "start": "202959",
    "end": "205879"
  },
  {
    "text": "loaded attaches to whatever it's meant",
    "start": "205879",
    "end": "208959"
  },
  {
    "text": "to attach",
    "start": "208959",
    "end": "210319"
  },
  {
    "text": "and then it can read the arguments of",
    "start": "210319",
    "end": "212959"
  },
  {
    "text": "that maybe sock adders",
    "start": "212959",
    "end": "215640"
  },
  {
    "text": "truck and then potentially through this",
    "start": "215640",
    "end": "218040"
  },
  {
    "text": "ebpf data I can export that data and",
    "start": "218040",
    "end": "220400"
  },
  {
    "text": "send it back to the monitoring program",
    "start": "220400",
    "end": "222920"
  },
  {
    "text": "that's the basics of ebpf of the",
    "start": "222920",
    "end": "225400"
  },
  {
    "text": "mechanics what it takes to extend the",
    "start": "225400",
    "end": "227879"
  },
  {
    "text": "Linux current with",
    "start": "227879",
    "end": "230360"
  },
  {
    "text": "this okay so what do people do with this",
    "start": "230360",
    "end": "233720"
  },
  {
    "text": "ebpf why would they write these programs",
    "start": "233720",
    "end": "236200"
  },
  {
    "text": "what is typically done today and I",
    "start": "236200",
    "end": "238560"
  },
  {
    "text": "search long and",
    "start": "238560",
    "end": "240560"
  },
  {
    "text": "in on GitHub looked I've looked for the",
    "start": "240560",
    "end": "243319"
  },
  {
    "text": "past year and a half of various",
    "start": "243319",
    "end": "245319"
  },
  {
    "text": "companies what kind of programs they",
    "start": "245319",
    "end": "246920"
  },
  {
    "text": "write and it falls into a few categories",
    "start": "246920",
    "end": "249519"
  },
  {
    "text": "but typically is this one is Network",
    "start": "249519",
    "end": "252480"
  },
  {
    "text": "packet routing celium cni perhaps one of",
    "start": "252480",
    "end": "255959"
  },
  {
    "text": "the best known software for doing this",
    "start": "255959",
    "end": "258919"
  },
  {
    "text": "um and you can do load balancing you can",
    "start": "258919",
    "end": "261759"
  },
  {
    "text": "do hot code stand up standby replace",
    "start": "261759",
    "end": "266040"
  },
  {
    "text": "anything you typically do at the network",
    "start": "266040",
    "end": "268000"
  },
  {
    "text": "level you can rewrite pack packets you",
    "start": "268000",
    "end": "270280"
  },
  {
    "text": "can wrap protocols you can do all sorts",
    "start": "270280",
    "end": "272680"
  },
  {
    "text": "of things you modify Network",
    "start": "272680",
    "end": "274840"
  },
  {
    "text": "packets then people use it for",
    "start": "274840",
    "end": "277960"
  },
  {
    "text": "monitoring maybe sometimes reactive or",
    "start": "277960",
    "end": "280680"
  },
  {
    "text": "proactive monitoring for example our",
    "start": "280680",
    "end": "282400"
  },
  {
    "text": "produ AA uses it to monitor level seven",
    "start": "282400",
    "end": "285479"
  },
  {
    "text": "protocols or in level four protocols on",
    "start": "285479",
    "end": "288600"
  },
  {
    "text": "TCP stack there's people that use it for",
    "start": "288600",
    "end": "292400"
  },
  {
    "text": "different kinds of",
    "start": "292400",
    "end": "293720"
  },
  {
    "text": "observability maybe system call",
    "start": "293720",
    "end": "296000"
  },
  {
    "text": "observability for tracking performance",
    "start": "296000",
    "end": "298039"
  },
  {
    "text": "from that perspective they use it for",
    "start": "298039",
    "end": "299759"
  },
  {
    "text": "profiling is a nice way to write",
    "start": "299759",
    "end": "301880"
  },
  {
    "text": "profilers to get interrupted on every I",
    "start": "301880",
    "end": "305039"
  },
  {
    "text": "don't know uh some number of counters uh",
    "start": "305039",
    "end": "308320"
  },
  {
    "text": "then you can walk capture the stack and",
    "start": "308320",
    "end": "311400"
  },
  {
    "text": "so really good for profiling",
    "start": "311400",
    "end": "314520"
  },
  {
    "text": "Solutions um and also people use it for",
    "start": "314520",
    "end": "317400"
  },
  {
    "text": "security um there's few uh CNC projects",
    "start": "317400",
    "end": "321360"
  },
  {
    "text": "that actually do track security with DPF",
    "start": "321360",
    "end": "324120"
  },
  {
    "text": "so they will track system calls they",
    "start": "324120",
    "end": "326479"
  },
  {
    "text": "will track network",
    "start": "326479",
    "end": "328120"
  },
  {
    "text": "connections um you can export that data",
    "start": "328120",
    "end": "330880"
  },
  {
    "text": "or you can react on it you can say oh I",
    "start": "330880",
    "end": "333120"
  },
  {
    "text": "saw a program being launched that I'm",
    "start": "333120",
    "end": "334840"
  },
  {
    "text": "not sure it should be launched somewhere",
    "start": "334840",
    "end": "337759"
  },
  {
    "text": "in my cluster it looks weird it's not on",
    "start": "337759",
    "end": "339800"
  },
  {
    "text": "the list of approved software or maybe I",
    "start": "339800",
    "end": "341639"
  },
  {
    "text": "can nuke it right then record that",
    "start": "341639",
    "end": "344800"
  },
  {
    "text": "event and finally people do monitor user",
    "start": "344800",
    "end": "347759"
  },
  {
    "text": "space libraries uh we for example",
    "start": "347759",
    "end": "349800"
  },
  {
    "text": "monitor lib SSL so we can actually track",
    "start": "349800",
    "end": "353000"
  },
  {
    "text": "level seven protocol traffic for htps or",
    "start": "353000",
    "end": "356199"
  },
  {
    "text": "grpc all over",
    "start": "356199",
    "end": "358440"
  },
  {
    "text": "SSL right",
    "start": "358440",
    "end": "361639"
  },
  {
    "text": "now all these things I talked about it",
    "start": "362840",
    "end": "365440"
  },
  {
    "text": "would seem intuitively that you need",
    "start": "365440",
    "end": "367160"
  },
  {
    "text": "some sort of permissions to be doing all",
    "start": "367160",
    "end": "368919"
  },
  {
    "text": "these things right you you would not",
    "start": "368919",
    "end": "371120"
  },
  {
    "text": "expect that I could just have no",
    "start": "371120",
    "end": "373360"
  },
  {
    "text": "permissions but be able to monitor all",
    "start": "373360",
    "end": "375000"
  },
  {
    "text": "my traffic or be able to modify TCP",
    "start": "375000",
    "end": "377720"
  },
  {
    "text": "packets it does sound like I need",
    "start": "377720",
    "end": "379240"
  },
  {
    "text": "permissions for this and initially I",
    "start": "379240",
    "end": "382039"
  },
  {
    "text": "think there were a lot of uh there a lot",
    "start": "382039",
    "end": "385080"
  },
  {
    "text": "of confusions in ebf community right now",
    "start": "385080",
    "end": "387080"
  },
  {
    "text": "that ebpf didn't need permission you",
    "start": "387080",
    "end": "389160"
  },
  {
    "text": "could do all these bad things maybe the",
    "start": "389160",
    "end": "390919"
  },
  {
    "text": "initial version people could run",
    "start": "390919",
    "end": "393199"
  },
  {
    "text": "something in in with actual normal users",
    "start": "393199",
    "end": "395840"
  },
  {
    "text": "which was quickly disabled and we do",
    "start": "395840",
    "end": "399080"
  },
  {
    "text": "need privileged to some level some level",
    "start": "399080",
    "end": "402120"
  },
  {
    "text": "of escalated or elevated permissions to",
    "start": "402120",
    "end": "404120"
  },
  {
    "text": "run these programs for a good reason",
    "start": "404120",
    "end": "407360"
  },
  {
    "text": "right but just how much we do and this",
    "start": "407360",
    "end": "411199"
  },
  {
    "text": "is where the typical lot of ebpf",
    "start": "411199",
    "end": "414280"
  },
  {
    "text": "programs you'll find out there we just",
    "start": "414280",
    "end": "416560"
  },
  {
    "text": "do",
    "start": "416560",
    "end": "418280"
  },
  {
    "text": "this and",
    "start": "418280",
    "end": "420120"
  },
  {
    "text": "that for a lot of people there just it's",
    "start": "420120",
    "end": "422919"
  },
  {
    "text": "a it's a",
    "start": "422919",
    "end": "425360"
  },
  {
    "text": "noo and U so that created a and I've",
    "start": "425360",
    "end": "430000"
  },
  {
    "text": "talking to customers here and there",
    "start": "430000",
    "end": "432319"
  },
  {
    "text": "about deploying the product I found a",
    "start": "432319",
    "end": "434599"
  },
  {
    "text": "lot of misconceptions about ebpf just",
    "start": "434599",
    "end": "438120"
  },
  {
    "text": "needs all permissions and without that",
    "start": "438120",
    "end": "441199"
  },
  {
    "text": "you can't run it and therefore it's a",
    "start": "441199",
    "end": "442680"
  },
  {
    "text": "security hole you shouldn't be doing it",
    "start": "442680",
    "end": "444240"
  },
  {
    "text": "in your program right in your",
    "start": "444240",
    "end": "446840"
  },
  {
    "text": "environment in your kubernetes uh",
    "start": "446840",
    "end": "449520"
  },
  {
    "text": "cluster",
    "start": "449520",
    "end": "450759"
  },
  {
    "text": "so with this permission yes I understand",
    "start": "450759",
    "end": "453560"
  },
  {
    "text": "if I was able to break into the",
    "start": "453560",
    "end": "455000"
  },
  {
    "text": "Container potentially I have escalated",
    "start": "455000",
    "end": "457080"
  },
  {
    "text": "my permissions to other containers and",
    "start": "457080",
    "end": "460080"
  },
  {
    "text": "it's pry",
    "start": "460080",
    "end": "461720"
  },
  {
    "text": "bad so to talk about why people need",
    "start": "461720",
    "end": "465039"
  },
  {
    "text": "that privilege container we have to go",
    "start": "465039",
    "end": "467159"
  },
  {
    "text": "back and say understand why do they put",
    "start": "467159",
    "end": "471560"
  },
  {
    "text": "that typically uh is there a way around",
    "start": "471560",
    "end": "474759"
  },
  {
    "text": "it what can we do about that and the",
    "start": "474759",
    "end": "478000"
  },
  {
    "text": "answer is we don't need priv Ed in most",
    "start": "478000",
    "end": "481039"
  },
  {
    "text": "cases um but permission wise the ebpf",
    "start": "481039",
    "end": "485319"
  },
  {
    "text": "programs sort of fall into two separate",
    "start": "485319",
    "end": "488280"
  },
  {
    "text": "categories which make this a little bit",
    "start": "488280",
    "end": "490520"
  },
  {
    "text": "complex to understand there's programs",
    "start": "490520",
    "end": "493199"
  },
  {
    "text": "CBP programs that are typically simpler",
    "start": "493199",
    "end": "496000"
  },
  {
    "text": "that only store memory on their own so",
    "start": "496000",
    "end": "499360"
  },
  {
    "text": "they have the cbpf maps maybe they share",
    "start": "499360",
    "end": "501639"
  },
  {
    "text": "with the monitoring program but it's",
    "start": "501639",
    "end": "503159"
  },
  {
    "text": "just for that program and those are",
    "start": "503159",
    "end": "505720"
  },
  {
    "text": "usually the simpler Solutions but often",
    "start": "505720",
    "end": "508360"
  },
  {
    "text": "times you you need to persist that",
    "start": "508360",
    "end": "510599"
  },
  {
    "text": "memory somehow in ebpf let's say maybe",
    "start": "510599",
    "end": "513839"
  },
  {
    "text": "you want to make your program resilient",
    "start": "513839",
    "end": "515560"
  },
  {
    "text": "in case your container restarts that it",
    "start": "515560",
    "end": "517839"
  },
  {
    "text": "can pick up from where it left off maybe",
    "start": "517839",
    "end": "520719"
  },
  {
    "text": "you're using some sort of memory that is",
    "start": "520719",
    "end": "523760"
  },
  {
    "text": "difficult to compute or or it takes time",
    "start": "523760",
    "end": "526480"
  },
  {
    "text": "maybe scanning the kubernetes cluster uh",
    "start": "526480",
    "end": "529680"
  },
  {
    "text": "name spaces and things like that so",
    "start": "529680",
    "end": "531399"
  },
  {
    "text": "which you don't want to repeat on",
    "start": "531399",
    "end": "533040"
  },
  {
    "text": "restart or if you want to structure your",
    "start": "533040",
    "end": "535640"
  },
  {
    "text": "program such as it has multiple of these",
    "start": "535640",
    "end": "538240"
  },
  {
    "text": "probes and and then you load them on",
    "start": "538240",
    "end": "540519"
  },
  {
    "text": "demand based on what you currently see",
    "start": "540519",
    "end": "542680"
  },
  {
    "text": "but maybe a state changes in your",
    "start": "542680",
    "end": "544160"
  },
  {
    "text": "kubernetes cluster and then you need to",
    "start": "544160",
    "end": "545560"
  },
  {
    "text": "load another kind of",
    "start": "545560",
    "end": "547279"
  },
  {
    "text": "program then you need to share memory",
    "start": "547279",
    "end": "549720"
  },
  {
    "text": "between these programs the only way to",
    "start": "549720",
    "end": "551480"
  },
  {
    "text": "do it is as memory map files pinned on",
    "start": "551480",
    "end": "554760"
  },
  {
    "text": "disk and this is where big one big",
    "start": "554760",
    "end": "557480"
  },
  {
    "text": "permission problem happens which is the",
    "start": "557480",
    "end": "559800"
  },
  {
    "text": "file system BPF file system which is the",
    "start": "559800",
    "end": "562320"
  },
  {
    "text": "only place where BPF programs are",
    "start": "562320",
    "end": "564440"
  },
  {
    "text": "allowed to actually store memory and",
    "start": "564440",
    "end": "568160"
  },
  {
    "text": "share it among different programs or",
    "start": "568160",
    "end": "570519"
  },
  {
    "text": "different runs of the same",
    "start": "570519",
    "end": "572959"
  },
  {
    "text": "program",
    "start": "572959",
    "end": "575000"
  },
  {
    "text": "so this BPF file system is notoriously",
    "start": "575000",
    "end": "578800"
  },
  {
    "text": "difficult to work around permission wise",
    "start": "578800",
    "end": "581040"
  },
  {
    "text": "so this is most times privileg true",
    "start": "581040",
    "end": "583480"
  },
  {
    "text": "actually is because of this BPF file",
    "start": "583480",
    "end": "585480"
  },
  {
    "text": "system now there's a way around it in",
    "start": "585480",
    "end": "588720"
  },
  {
    "text": "kubernetes and you can use capability",
    "start": "588720",
    "end": "591279"
  },
  {
    "text": "assist admin and then you also have to",
    "start": "591279",
    "end": "594640"
  },
  {
    "text": "disable kubernetes app armor for that",
    "start": "594640",
    "end": "598040"
  },
  {
    "text": "container that accessing accessing bile",
    "start": "598040",
    "end": "601040"
  },
  {
    "text": "system and then you get around privilege",
    "start": "601040",
    "end": "603200"
  },
  {
    "text": "true but then my question is is this any",
    "start": "603200",
    "end": "605600"
  },
  {
    "text": "better and I don't think it is I've just",
    "start": "605600",
    "end": "608640"
  },
  {
    "text": "disabled app armor for this container",
    "start": "608640",
    "end": "610800"
  },
  {
    "text": "and I've given this container system in",
    "start": "610800",
    "end": "612760"
  },
  {
    "text": "privileges which sort of gives me back",
    "start": "612760",
    "end": "614800"
  },
  {
    "text": "to where a privilege true",
    "start": "614800",
    "end": "616839"
  },
  {
    "text": "is all right so we haven't done much but",
    "start": "616839",
    "end": "619680"
  },
  {
    "text": "this is the reason why we can",
    "start": "619680",
    "end": "621880"
  },
  {
    "text": "use regular system",
    "start": "621880",
    "end": "624600"
  },
  {
    "text": "capabilities um because this app armor",
    "start": "624600",
    "end": "627600"
  },
  {
    "text": "actually does prevent mount and thus",
    "start": "627600",
    "end": "630000"
  },
  {
    "text": "prevent accessing Cy FS which in that",
    "start": "630000",
    "end": "633079"
  },
  {
    "text": "case prevents us from using BPF off",
    "start": "633079",
    "end": "636320"
  },
  {
    "text": "system now fortunately for us this is",
    "start": "636320",
    "end": "638639"
  },
  {
    "text": "something credit to Ayan project um the",
    "start": "638639",
    "end": "642360"
  },
  {
    "text": "way to work around this to enable BPF",
    "start": "642360",
    "end": "645399"
  },
  {
    "text": "programs to run with lower permissions",
    "start": "645399",
    "end": "647160"
  },
  {
    "text": "is to create an init container that is",
    "start": "647160",
    "end": "649800"
  },
  {
    "text": "permissioned with privilege enough to",
    "start": "649800",
    "end": "652720"
  },
  {
    "text": "set up what's required for the main",
    "start": "652720",
    "end": "656480"
  },
  {
    "text": "container so then from then on after",
    "start": "656480",
    "end": "658800"
  },
  {
    "text": "this in container sets up what's needed",
    "start": "658800",
    "end": "661079"
  },
  {
    "text": "for the your actual BPF program then you",
    "start": "661079",
    "end": "664600"
  },
  {
    "text": "can actually run your BPF program which",
    "start": "664600",
    "end": "666880"
  },
  {
    "text": "much lower permissions only with what",
    "start": "666880",
    "end": "669120"
  },
  {
    "text": "you need so your persistent State at",
    "start": "669120",
    "end": "671040"
  },
  {
    "text": "kubernetes your final state in",
    "start": "671040",
    "end": "672519"
  },
  {
    "text": "kubernetes is actually a lot better then",
    "start": "672519",
    "end": "676120"
  },
  {
    "text": "privilege",
    "start": "676120",
    "end": "678639"
  },
  {
    "text": "true so the trick there is that this",
    "start": "678720",
    "end": "681680"
  },
  {
    "text": "init container will create the mount",
    "start": "681680",
    "end": "684040"
  },
  {
    "text": "will create the required permissions and",
    "start": "684040",
    "end": "686399"
  },
  {
    "text": "then is able to inject that into the",
    "start": "686399",
    "end": "688279"
  },
  {
    "text": "actual container you're going to be",
    "start": "688279",
    "end": "689800"
  },
  {
    "text": "running right this is really",
    "start": "689800",
    "end": "691600"
  },
  {
    "text": "shortlived and only for this",
    "start": "691600",
    "end": "695880"
  },
  {
    "text": "purpose now with that out of the way we",
    "start": "697160",
    "end": "700000"
  },
  {
    "text": "can start talking about how do we now",
    "start": "700000",
    "end": "702120"
  },
  {
    "text": "actually peac meal the permissions for",
    "start": "702120",
    "end": "704480"
  },
  {
    "text": "the BPF uh programs depending what we",
    "start": "704480",
    "end": "707560"
  },
  {
    "text": "have to get them to run with much lower",
    "start": "707560",
    "end": "711360"
  },
  {
    "text": "permissions now this also is dependent",
    "start": "711360",
    "end": "713800"
  },
  {
    "text": "on the Linux kernel and the trick here",
    "start": "713800",
    "end": "716560"
  },
  {
    "text": "is sort of in the past",
    "start": "716560",
    "end": "720440"
  },
  {
    "text": "before 58",
    "start": "720440",
    "end": "722040"
  },
  {
    "text": "kernel most permissions were bundled",
    "start": "722040",
    "end": "724560"
  },
  {
    "text": "under assisted men unfortunately so",
    "start": "724560",
    "end": "727560"
  },
  {
    "text": "capability sisadmin gave you even",
    "start": "727560",
    "end": "730720"
  },
  {
    "text": "something really low like network access",
    "start": "730720",
    "end": "733120"
  },
  {
    "text": "or but also gave you everything else",
    "start": "733120",
    "end": "736040"
  },
  {
    "text": "however the community moved on from this",
    "start": "736040",
    "end": "738040"
  },
  {
    "text": "so with these container environments",
    "start": "738040",
    "end": "740399"
  },
  {
    "text": "that I've listed here if you have any",
    "start": "740399",
    "end": "741800"
  },
  {
    "text": "version greater than that and you have a",
    "start": "741800",
    "end": "743320"
  },
  {
    "text": "kernel version bigger than 58 the only",
    "start": "743320",
    "end": "746320"
  },
  {
    "text": "things you need for running a BPF",
    "start": "746320",
    "end": "748760"
  },
  {
    "text": "program is capability BPF and that's",
    "start": "748760",
    "end": "751800"
  },
  {
    "text": "what's the minimum that's what the",
    "start": "751800",
    "end": "753560"
  },
  {
    "text": "documentation says but I've also found",
    "start": "753560",
    "end": "755560"
  },
  {
    "text": "that perfmon is almost always required",
    "start": "755560",
    "end": "758160"
  },
  {
    "text": "anything you want to read as a",
    "start": "758160",
    "end": "759600"
  },
  {
    "text": "Performance Event looking at any events",
    "start": "759600",
    "end": "762160"
  },
  {
    "text": "coming through your systems you need",
    "start": "762160",
    "end": "763800"
  },
  {
    "text": "Peron but much better than sis men now",
    "start": "763800",
    "end": "766920"
  },
  {
    "text": "if you're an older kernel like cap s men",
    "start": "766920",
    "end": "770160"
  },
  {
    "text": "must um typically BPF programs tend to",
    "start": "770160",
    "end": "773600"
  },
  {
    "text": "store memory for that reason they need",
    "start": "773600",
    "end": "776279"
  },
  {
    "text": "to increase the amount of locked memory",
    "start": "776279",
    "end": "778040"
  },
  {
    "text": "available in the system",
    "start": "778040",
    "end": "780120"
  },
  {
    "text": "so before",
    "start": "780120",
    "end": "781720"
  },
  {
    "text": "511 capsis resource was required so that",
    "start": "781720",
    "end": "784959"
  },
  {
    "text": "BPF programs can actually load into this",
    "start": "784959",
    "end": "788279"
  },
  {
    "text": "locked memory so increasing the lock",
    "start": "788279",
    "end": "790560"
  },
  {
    "text": "memory limit on the system which could",
    "start": "790560",
    "end": "792120"
  },
  {
    "text": "be done with different means but done",
    "start": "792120",
    "end": "795480"
  },
  {
    "text": "automatically by the library if it's not",
    "start": "795480",
    "end": "797680"
  },
  {
    "text": "sufficient uh you need s resource on",
    "start": "797680",
    "end": "800680"
  },
  {
    "text": "newer kernels that's not",
    "start": "800680",
    "end": "803480"
  },
  {
    "text": "required so now we come to the use cases",
    "start": "803480",
    "end": "806519"
  },
  {
    "text": "of BPF and what they actually need",
    "start": "806519",
    "end": "809160"
  },
  {
    "text": "really to",
    "start": "809160",
    "end": "810360"
  },
  {
    "text": "run now I talked about network",
    "start": "810360",
    "end": "812680"
  },
  {
    "text": "monitoring",
    "start": "812680",
    "end": "814279"
  },
  {
    "text": "Network um changing packets and so on so",
    "start": "814279",
    "end": "819360"
  },
  {
    "text": "let's start with the simplest way if",
    "start": "819360",
    "end": "821079"
  },
  {
    "text": "we're just going to write K probes or",
    "start": "821079",
    "end": "823120"
  },
  {
    "text": "use Trace points to monitor TCP traffic",
    "start": "823120",
    "end": "825440"
  },
  {
    "text": "we don't need anything else so the",
    "start": "825440",
    "end": "827920"
  },
  {
    "text": "bottom",
    "start": "827920",
    "end": "829160"
  },
  {
    "text": "part and then it becomes like if we want",
    "start": "829160",
    "end": "831399"
  },
  {
    "text": "to write a socket filter that we can",
    "start": "831399",
    "end": "833079"
  },
  {
    "text": "monitor any traffic not just TCP like",
    "start": "833079",
    "end": "836079"
  },
  {
    "text": "UDP different protocols that maybe we",
    "start": "836079",
    "end": "838480"
  },
  {
    "text": "don't know",
    "start": "838480",
    "end": "840480"
  },
  {
    "text": "uh then you need capability Network raw",
    "start": "840480",
    "end": "843199"
  },
  {
    "text": "to be able to see those",
    "start": "843199",
    "end": "844920"
  },
  {
    "text": "events if you're going to get to use",
    "start": "844920",
    "end": "847880"
  },
  {
    "text": "Linux traffic control to be able to",
    "start": "847880",
    "end": "849880"
  },
  {
    "text": "attach to a traffic control create",
    "start": "849880",
    "end": "851480"
  },
  {
    "text": "something called",
    "start": "851480",
    "end": "852560"
  },
  {
    "text": "qis or modify packets as if what cium",
    "start": "852560",
    "end": "856759"
  },
  {
    "text": "does then you need net admin which sort",
    "start": "856759",
    "end": "858600"
  },
  {
    "text": "of makes sense right if I'm just going",
    "start": "858600",
    "end": "860120"
  },
  {
    "text": "to read I need raw access to the network",
    "start": "860120",
    "end": "863079"
  },
  {
    "text": "if I'm going to modify it and",
    "start": "863079",
    "end": "864800"
  },
  {
    "text": "potentially write memory to the into the",
    "start": "864800",
    "end": "867480"
  },
  {
    "text": "network packets then I need network",
    "start": "867480",
    "end": "870440"
  },
  {
    "text": "administrator okay but lot still a lot",
    "start": "870440",
    "end": "872560"
  },
  {
    "text": "better than sis",
    "start": "872560",
    "end": "875519"
  },
  {
    "text": "men so now we come to the second biggest",
    "start": "875800",
    "end": "879160"
  },
  {
    "text": "problem um again user",
    "start": "879160",
    "end": "883199"
  },
  {
    "text": "libraries so if we want to monitor user",
    "start": "883199",
    "end": "885639"
  },
  {
    "text": "libraries in the containerized",
    "start": "885639",
    "end": "887759"
  },
  {
    "text": "environment there's few other",
    "start": "887759",
    "end": "890399"
  },
  {
    "text": "considerations and",
    "start": "890399",
    "end": "893199"
  },
  {
    "text": "from kubernetes standpoint and any BPF",
    "start": "893199",
    "end": "896040"
  },
  {
    "text": "program the main challenge with user",
    "start": "896040",
    "end": "897839"
  },
  {
    "text": "space libraries is that",
    "start": "897839",
    "end": "900279"
  },
  {
    "text": "they're deployed in a specific container",
    "start": "900279",
    "end": "903240"
  },
  {
    "text": "right so and your Damon set maybe or",
    "start": "903240",
    "end": "905720"
  },
  {
    "text": "even a side car may not actually have",
    "start": "905720",
    "end": "907519"
  },
  {
    "text": "the same binaries right let's say I want",
    "start": "907519",
    "end": "910639"
  },
  {
    "text": "to instrument lib",
    "start": "910639",
    "end": "913079"
  },
  {
    "text": "SSL attached to a Python program running",
    "start": "913079",
    "end": "917440"
  },
  {
    "text": "inside some container on my kubernetes",
    "start": "917440",
    "end": "919600"
  },
  {
    "text": "cluster and I want to monitor what that",
    "start": "919600",
    "end": "921920"
  },
  {
    "text": "Python program is may be",
    "start": "921920",
    "end": "924160"
  },
  {
    "text": "doing what kind of network traffic it's",
    "start": "924160",
    "end": "927240"
  },
  {
    "text": "sending it's receiving and so on so I",
    "start": "927240",
    "end": "929240"
  },
  {
    "text": "can compute request per",
    "start": "929240",
    "end": "931639"
  },
  {
    "text": "second now this Python program in the",
    "start": "931639",
    "end": "934639"
  },
  {
    "text": "container environment is deployed at",
    "start": "934639",
    "end": "936519"
  },
  {
    "text": "some python version but how do I",
    "start": "936519",
    "end": "939240"
  },
  {
    "text": "actually get to that executable to maybe",
    "start": "939240",
    "end": "943120"
  },
  {
    "text": "attach myself to that particular version",
    "start": "943120",
    "end": "945319"
  },
  {
    "text": "of lib SSL maybe my container has libssl",
    "start": "945319",
    "end": "948319"
  },
  {
    "text": "but it may not be the same version it's",
    "start": "948319",
    "end": "949639"
  },
  {
    "text": "not the same binary they're not actually",
    "start": "949639",
    "end": "951639"
  },
  {
    "text": "running that thing so I need to be able",
    "start": "951639",
    "end": "954720"
  },
  {
    "text": "to find that program I also need to be",
    "start": "954720",
    "end": "956920"
  },
  {
    "text": "able to open up that L file and attach",
    "start": "956920",
    "end": "959959"
  },
  {
    "text": "into it so for that reason the way we do",
    "start": "959959",
    "end": "963319"
  },
  {
    "text": "it is by looking at proc by process ID",
    "start": "963319",
    "end": "967880"
  },
  {
    "text": "and then looking at the executable like",
    "start": "967880",
    "end": "969920"
  },
  {
    "text": "my Damon set will have access if I've",
    "start": "969920",
    "end": "972160"
  },
  {
    "text": "given it host pit access to any process",
    "start": "972160",
    "end": "974519"
  },
  {
    "text": "ID on the system so then for that this",
    "start": "974519",
    "end": "978079"
  },
  {
    "text": "is how I find the executable this is how",
    "start": "978079",
    "end": "980800"
  },
  {
    "text": "through the map files I find the actual",
    "start": "980800",
    "end": "983880"
  },
  {
    "text": "shared library that maybe is attached to",
    "start": "983880",
    "end": "986240"
  },
  {
    "text": "that program for that purpose we need",
    "start": "986240",
    "end": "989399"
  },
  {
    "text": "capsis P",
    "start": "989399",
    "end": "991120"
  },
  {
    "text": "Trace so this P Trace gives us ability",
    "start": "991120",
    "end": "993800"
  },
  {
    "text": "to dig in through this process uh mapped",
    "start": "993800",
    "end": "997000"
  },
  {
    "text": "executables and libraries and finally",
    "start": "997000",
    "end": "1000199"
  },
  {
    "text": "these two specific permissions",
    "start": "1000199",
    "end": "1001639"
  },
  {
    "text": "checkpoint restore and D",
    "start": "1001639",
    "end": "1005000"
  },
  {
    "text": "research",
    "start": "1005000",
    "end": "1006560"
  },
  {
    "text": "um are needed to open up the L file now",
    "start": "1006560",
    "end": "1009880"
  },
  {
    "text": "don't ask me how this is found like this",
    "start": "1009880",
    "end": "1011680"
  },
  {
    "text": "is trial and error and also reading",
    "start": "1011680",
    "end": "1013519"
  },
  {
    "text": "kernel source this is one of the",
    "start": "1013519",
    "end": "1015240"
  },
  {
    "text": "challenges with this sort of thing which",
    "start": "1015240",
    "end": "1017680"
  },
  {
    "text": "is why everybody sort of resorts to",
    "start": "1017680",
    "end": "1019519"
  },
  {
    "text": "let's just give it everything is because",
    "start": "1019519",
    "end": "1021399"
  },
  {
    "text": "so difficult to find what you actually",
    "start": "1021399",
    "end": "1023240"
  },
  {
    "text": "need it requires tracing the kernel",
    "start": "1023240",
    "end": "1025918"
  },
  {
    "text": "maybe reading the kernel source requires",
    "start": "1025919",
    "end": "1029000"
  },
  {
    "text": "if you don't have that capability or you",
    "start": "1029000",
    "end": "1031038"
  },
  {
    "text": "don't want to do that maybe trial and ER",
    "start": "1031039",
    "end": "1032798"
  },
  {
    "text": "or keep running your your program until",
    "start": "1032799",
    "end": "1034880"
  },
  {
    "text": "it actually works with various of this",
    "start": "1034880",
    "end": "1036520"
  },
  {
    "text": "permissions there's not that many but",
    "start": "1036520",
    "end": "1040720"
  },
  {
    "text": "yeah",
    "start": "1040720",
    "end": "1042959"
  },
  {
    "text": "um so and finally be there's plenty of",
    "start": "1042959",
    "end": "1048240"
  },
  {
    "text": "cases to day even today where CIS Min is",
    "start": "1048240",
    "end": "1051720"
  },
  {
    "text": "a must or privileged",
    "start": "1051720",
    "end": "1053840"
  },
  {
    "text": "container well obviously on kernels",
    "start": "1053840",
    "end": "1056120"
  },
  {
    "text": "before",
    "start": "1056120",
    "end": "1057080"
  },
  {
    "text": "five",
    "start": "1057080",
    "end": "1059080"
  },
  {
    "text": "um it's needed it's needed but typically",
    "start": "1059080",
    "end": "1063160"
  },
  {
    "text": "after 5'8 we can split it off so for",
    "start": "1063160",
    "end": "1065720"
  },
  {
    "text": "example you may think you need a system",
    "start": "1065720",
    "end": "1068799"
  },
  {
    "text": "admin capability to kill a program that",
    "start": "1068799",
    "end": "1070760"
  },
  {
    "text": "you don't want to launch because it's",
    "start": "1070760",
    "end": "1073679"
  },
  {
    "text": "malicious maybe you've detected it",
    "start": "1073679",
    "end": "1075520"
  },
  {
    "text": "through various security rules that it's",
    "start": "1075520",
    "end": "1078520"
  },
  {
    "text": "not actually program you want to run",
    "start": "1078520",
    "end": "1080240"
  },
  {
    "text": "then you need keep a kill permission you",
    "start": "1080240",
    "end": "1083400"
  },
  {
    "text": "don't need sis admin but before 5'8",
    "start": "1083400",
    "end": "1086080"
  },
  {
    "text": "unfortunately you need CIS admin now",
    "start": "1086080",
    "end": "1090000"
  },
  {
    "text": "another place where you need CIS admin",
    "start": "1090000",
    "end": "1093320"
  },
  {
    "text": "for sure is writing user space memory",
    "start": "1093320",
    "end": "1095720"
  },
  {
    "text": "this is sort of frowned upon by the",
    "start": "1095720",
    "end": "1097360"
  },
  {
    "text": "kernel community that help her I'm",
    "start": "1097360",
    "end": "1099520"
  },
  {
    "text": "pretty sure they can take it away right",
    "start": "1099520",
    "end": "1101280"
  },
  {
    "text": "now they can they will but it's sort of",
    "start": "1101280",
    "end": "1104280"
  },
  {
    "text": "been in the C in the kernel for a while",
    "start": "1104280",
    "end": "1106559"
  },
  {
    "text": "and in the BPF tool set that you can",
    "start": "1106559",
    "end": "1109320"
  },
  {
    "text": "change user space memory we use it to",
    "start": "1109320",
    "end": "1112039"
  },
  {
    "text": "propagate context for go applications",
    "start": "1112039",
    "end": "1114400"
  },
  {
    "text": "it's also used by the Go Auto",
    "start": "1114400",
    "end": "1116360"
  },
  {
    "text": "instrumentation program from CNC uh",
    "start": "1116360",
    "end": "1118640"
  },
  {
    "text": "tooling from cncf open",
    "start": "1118640",
    "end": "1121159"
  },
  {
    "text": "Telemetry but if it's if you're not",
    "start": "1121159",
    "end": "1124159"
  },
  {
    "text": "doing that syst me is almost not needed",
    "start": "1124159",
    "end": "1127039"
  },
  {
    "text": "and finally like some Debian distros",
    "start": "1127039",
    "end": "1129360"
  },
  {
    "text": "depending what you're running on uh will",
    "start": "1129360",
    "end": "1132000"
  },
  {
    "text": "have this kernel per event paranoid",
    "start": "1132000",
    "end": "1134760"
  },
  {
    "text": "greater than three or equal to three I",
    "start": "1134760",
    "end": "1137440"
  },
  {
    "text": "the documentation says it should be two",
    "start": "1137440",
    "end": "1139360"
  },
  {
    "text": "at Max for most distributions but some",
    "start": "1139360",
    "end": "1141640"
  },
  {
    "text": "distributions have their own special",
    "start": "1141640",
    "end": "1143840"
  },
  {
    "text": "codes for that flag and uh if it's set",
    "start": "1143840",
    "end": "1147640"
  },
  {
    "text": "greater than three then it will require",
    "start": "1147640",
    "end": "1150080"
  },
  {
    "text": "system Min for most ebpf programs",
    "start": "1150080",
    "end": "1153039"
  },
  {
    "text": "unfortunately now you can reort you can",
    "start": "1153039",
    "end": "1155559"
  },
  {
    "text": "set it back to two which is the",
    "start": "1155559",
    "end": "1156960"
  },
  {
    "text": "recommended setting or sment there's no",
    "start": "1156960",
    "end": "1160320"
  },
  {
    "text": "way around",
    "start": "1160320",
    "end": "1162759"
  },
  {
    "text": "it okay so key",
    "start": "1163400",
    "end": "1165760"
  },
  {
    "text": "takeaways my takeaway that I want to",
    "start": "1165760",
    "end": "1168880"
  },
  {
    "text": "present is that many ebpf programs in",
    "start": "1168880",
    "end": "1172039"
  },
  {
    "text": "many situations do not really need",
    "start": "1172039",
    "end": "1174280"
  },
  {
    "text": "privilege or assisted men that's just",
    "start": "1174280",
    "end": "1177600"
  },
  {
    "text": "difficulty to understand what privileges",
    "start": "1177600",
    "end": "1180400"
  },
  {
    "text": "you need is driving people to just sort",
    "start": "1180400",
    "end": "1183080"
  },
  {
    "text": "of take the sledgehammer and say I need",
    "start": "1183080",
    "end": "1187280"
  },
  {
    "text": "sment um using privilege in it",
    "start": "1187280",
    "end": "1190880"
  },
  {
    "text": "containers allows us to remove some of",
    "start": "1190880",
    "end": "1193520"
  },
  {
    "text": "these elevated permissions from the",
    "start": "1193520",
    "end": "1195120"
  },
  {
    "text": "final container that's running and that",
    "start": "1195120",
    "end": "1197640"
  },
  {
    "text": "typically stands for programs that need",
    "start": "1197640",
    "end": "1199600"
  },
  {
    "text": "to mount BPF file",
    "start": "1199600",
    "end": "1201400"
  },
  {
    "text": "system uh for the purpose of either",
    "start": "1201400",
    "end": "1204080"
  },
  {
    "text": "restoring data after restarts or by",
    "start": "1204080",
    "end": "1206400"
  },
  {
    "text": "sharing amongst different BPF",
    "start": "1206400",
    "end": "1209640"
  },
  {
    "text": "programs and on Modern kernels I would",
    "start": "1209640",
    "end": "1213120"
  },
  {
    "text": "like to say it's almost never needed or",
    "start": "1213120",
    "end": "1215840"
  },
  {
    "text": "it's needed for maybe subset of",
    "start": "1215840",
    "end": "1217360"
  },
  {
    "text": "functionality and if the programs are",
    "start": "1217360",
    "end": "1219000"
  },
  {
    "text": "written well they can gracefully degrade",
    "start": "1219000",
    "end": "1221520"
  },
  {
    "text": "to not needing system",
    "start": "1221520",
    "end": "1223799"
  },
  {
    "text": "there that's it that's it thank you so",
    "start": "1223799",
    "end": "1226440"
  },
  {
    "text": "much for coming um if you want to see",
    "start": "1226440",
    "end": "1229840"
  },
  {
    "text": "our project you want to contribute you",
    "start": "1229840",
    "end": "1231480"
  },
  {
    "text": "want to play with it this is how to",
    "start": "1231480",
    "end": "1233240"
  },
  {
    "text": "connect with myself my",
    "start": "1233240",
    "end": "1235320"
  },
  {
    "text": "team",
    "start": "1235320",
    "end": "1236919"
  },
  {
    "text": "um that's it any",
    "start": "1236919",
    "end": "1240799"
  },
  {
    "text": "questions",
    "start": "1241240",
    "end": "1244240"
  },
  {
    "text": "yeah I often do assessments for clients",
    "start": "1244360",
    "end": "1248760"
  },
  {
    "text": "running privileg containers and I see",
    "start": "1248760",
    "end": "1250440"
  },
  {
    "text": "the most common one is runtime detection",
    "start": "1250440",
    "end": "1252280"
  },
  {
    "text": "tools think it would be possible to run",
    "start": "1252280",
    "end": "1255280"
  },
  {
    "text": "runtime protection tools without priv",
    "start": "1255280",
    "end": "1257159"
  },
  {
    "text": "containers",
    "start": "1257159",
    "end": "1259000"
  },
  {
    "text": "I think so I think depends the always",
    "start": "1259000",
    "end": "1261200"
  },
  {
    "text": "question is to ask is like why is the",
    "start": "1261200",
    "end": "1263000"
  },
  {
    "text": "privilege needed um it typically boils",
    "start": "1263000",
    "end": "1266200"
  },
  {
    "text": "down to some Linux system capability",
    "start": "1266200",
    "end": "1269039"
  },
  {
    "text": "that they require um the unfortunate",
    "start": "1269039",
    "end": "1272240"
  },
  {
    "text": "thing is not actually clear there's no",
    "start": "1272240",
    "end": "1274120"
  },
  {
    "text": "guide in the Linux kernel to say okay so",
    "start": "1274120",
    "end": "1277919"
  },
  {
    "text": "you're making this call system call this",
    "start": "1277919",
    "end": "1281039"
  },
  {
    "text": "is what you need to run it there's no",
    "start": "1281039",
    "end": "1283039"
  },
  {
    "text": "such thing it's mostly trial and error",
    "start": "1283039",
    "end": "1285760"
  },
  {
    "text": "and for our case I always thought that",
    "start": "1285760",
    "end": "1287520"
  },
  {
    "text": "we needed system privilege containers",
    "start": "1287520",
    "end": "1289919"
  },
  {
    "text": "until somebody really pushed like David",
    "start": "1289919",
    "end": "1291760"
  },
  {
    "text": "and said well why do you really need it",
    "start": "1291760",
    "end": "1293799"
  },
  {
    "text": "let's dig into that because I'd like to",
    "start": "1293799",
    "end": "1297000"
  },
  {
    "text": "not have it privileged on and this",
    "start": "1297000",
    "end": "1299120"
  },
  {
    "text": "journey took us through trying out many",
    "start": "1299120",
    "end": "1302679"
  },
  {
    "text": "things running system kernel traces to",
    "start": "1302679",
    "end": "1305840"
  },
  {
    "text": "see where it actually what function did",
    "start": "1305840",
    "end": "1308960"
  },
  {
    "text": "block and deling the kernel and saying",
    "start": "1308960",
    "end": "1312880"
  },
  {
    "text": "okay well this needs this capability",
    "start": "1312880",
    "end": "1316120"
  },
  {
    "text": "let's put that in does it go through",
    "start": "1316120",
    "end": "1318600"
  },
  {
    "text": "through and then you get stopped on",
    "start": "1318600",
    "end": "1320360"
  },
  {
    "text": "something else and it's okay which",
    "start": "1320360",
    "end": "1322400"
  },
  {
    "text": "capability and eventually you end up",
    "start": "1322400",
    "end": "1324000"
  },
  {
    "text": "with a list of",
    "start": "1324000",
    "end": "1325400"
  },
  {
    "text": "capabilities um now unfortunately that's",
    "start": "1325400",
    "end": "1327840"
  },
  {
    "text": "only after 5'8 before 5'8 people just",
    "start": "1327840",
    "end": "1331400"
  },
  {
    "text": "just this and a lot of those learnings",
    "start": "1331400",
    "end": "1334080"
  },
  {
    "text": "about putting CIS admin and putting",
    "start": "1334080",
    "end": "1336120"
  },
  {
    "text": "privilege are oh I need elevated",
    "start": "1336120",
    "end": "1338279"
  },
  {
    "text": "permissions and at 58 before 58 I",
    "start": "1338279",
    "end": "1341080"
  },
  {
    "text": "couldn't do anything so it's an older",
    "start": "1341080",
    "end": "1343240"
  },
  {
    "text": "learning rather than what's happened",
    "start": "1343240",
    "end": "1345559"
  },
  {
    "text": "after 58 when they were broken down into",
    "start": "1345559",
    "end": "1347640"
  },
  {
    "text": "very fine grain cas capabilities that",
    "start": "1347640",
    "end": "1349240"
  },
  {
    "text": "you can actually pick and choose what",
    "start": "1349240",
    "end": "1350480"
  },
  {
    "text": "you",
    "start": "1350480",
    "end": "1352640"
  },
  {
    "text": "need so I mean what we do is we to some",
    "start": "1372760",
    "end": "1377279"
  },
  {
    "text": "extent is",
    "start": "1377279",
    "end": "1379080"
  },
  {
    "text": "we ask the client ahead of time what",
    "start": "1379080",
    "end": "1381520"
  },
  {
    "text": "version of currently running and then we",
    "start": "1381520",
    "end": "1383080"
  },
  {
    "text": "give them a recommended solution the",
    "start": "1383080",
    "end": "1384799"
  },
  {
    "text": "answer to that is there's tooling they",
    "start": "1384799",
    "end": "1386480"
  },
  {
    "text": "can be written to find out um obviously",
    "start": "1386480",
    "end": "1389559"
  },
  {
    "text": "finding out the container version or the",
    "start": "1389559",
    "end": "1393440"
  },
  {
    "text": "um the version of the kernel is possible",
    "start": "1393440",
    "end": "1395559"
  },
  {
    "text": "through an init container and you can",
    "start": "1395559",
    "end": "1397080"
  },
  {
    "text": "just say okay sorry for this and you can",
    "start": "1397080",
    "end": "1399360"
  },
  {
    "text": "spew out an actual configuration file so",
    "start": "1399360",
    "end": "1402720"
  },
  {
    "text": "technically if we were really",
    "start": "1402720",
    "end": "1404039"
  },
  {
    "text": "sophisticated this part over here uh",
    "start": "1404039",
    "end": "1406799"
  },
  {
    "text": "that I showed where",
    "start": "1406799",
    "end": "1409279"
  },
  {
    "text": "this thing right could potentially write",
    "start": "1409279",
    "end": "1411440"
  },
  {
    "text": "the config the security config for the",
    "start": "1411440",
    "end": "1413919"
  },
  {
    "text": "actual final container knowing that",
    "start": "1413919",
    "end": "1416880"
  },
  {
    "text": "what's the the version is dealing with",
    "start": "1416880",
    "end": "1419360"
  },
  {
    "text": "right you",
    "start": "1419360",
    "end": "1422760"
  },
  {
    "text": "it yeah because if you look what this is",
    "start": "1422760",
    "end": "1425200"
  },
  {
    "text": "doing is running bash here to set up a",
    "start": "1425200",
    "end": "1427799"
  },
  {
    "text": "bunch of Mount volumes and then it says",
    "start": "1427799",
    "end": "1429840"
  },
  {
    "text": "this bilateral bidirectional",
    "start": "1429840",
    "end": "1432159"
  },
  {
    "text": "communication to allow that to be",
    "start": "1432159",
    "end": "1434039"
  },
  {
    "text": "mounted in the final container and we",
    "start": "1434039",
    "end": "1436480"
  },
  {
    "text": "have the full example in our repo if you",
    "start": "1436480",
    "end": "1438279"
  },
  {
    "text": "want want to take a look but essentially",
    "start": "1438279",
    "end": "1440480"
  },
  {
    "text": "if I could do that for this particular",
    "start": "1440480",
    "end": "1442640"
  },
  {
    "text": "BFS I could actually modify the config",
    "start": "1442640",
    "end": "1446159"
  },
  {
    "text": "and have it mounted into the final",
    "start": "1446159",
    "end": "1449279"
  },
  {
    "text": "program so we tell it what permissions",
    "start": "1449279",
    "end": "1452360"
  },
  {
    "text": "it",
    "start": "1452360",
    "end": "1453919"
  },
  {
    "text": "needs yeah it's just a more",
    "start": "1453919",
    "end": "1457320"
  },
  {
    "text": "sophistication I guess on on the part of",
    "start": "1457320",
    "end": "1459640"
  },
  {
    "text": "the program um I believe has ways to",
    "start": "1459640",
    "end": "1464159"
  },
  {
    "text": "detect that it's not given enough",
    "start": "1464159",
    "end": "1466399"
  },
  {
    "text": "permissions to do what it needs to do so",
    "start": "1466399",
    "end": "1468399"
  },
  {
    "text": "so they will actually give you nice",
    "start": "1468399",
    "end": "1470399"
  },
  {
    "text": "messages our product is not as good uh",
    "start": "1470399",
    "end": "1473080"
  },
  {
    "text": "on that respect so it will tell you oh",
    "start": "1473080",
    "end": "1475240"
  },
  {
    "text": "you're missing this permission you need",
    "start": "1475240",
    "end": "1476520"
  },
  {
    "text": "to go and add it um there's another",
    "start": "1476520",
    "end": "1480080"
  },
  {
    "text": "product out there open source um",
    "start": "1480080",
    "end": "1483000"
  },
  {
    "text": "Inspector Gadget they've got into great",
    "start": "1483000",
    "end": "1485320"
  },
  {
    "text": "depths because inspector gadgets you can",
    "start": "1485320",
    "end": "1487760"
  },
  {
    "text": "enable different gadgets it's meant for",
    "start": "1487760",
    "end": "1490440"
  },
  {
    "text": "kubernetes monitoring but it's meant as",
    "start": "1490440",
    "end": "1492799"
  },
  {
    "text": "a platform where you can kind of add",
    "start": "1492799",
    "end": "1494320"
  },
  {
    "text": "your own modules and maybe contribute in",
    "start": "1494320",
    "end": "1496399"
  },
  {
    "text": "the future with different gadgets so",
    "start": "1496399",
    "end": "1498600"
  },
  {
    "text": "Inspector Gadget you can enable disable",
    "start": "1498600",
    "end": "1501480"
  },
  {
    "text": "various of these Gadget network",
    "start": "1501480",
    "end": "1503000"
  },
  {
    "text": "monitoring process monitoring this and",
    "start": "1503000",
    "end": "1505480"
  },
  {
    "text": "that and they have a really nice",
    "start": "1505480",
    "end": "1507279"
  },
  {
    "text": "documentation okay for this you need",
    "start": "1507279",
    "end": "1509080"
  },
  {
    "text": "that for this you need that for this you",
    "start": "1509080",
    "end": "1510760"
  },
  {
    "text": "need that because they've gone through",
    "start": "1510760",
    "end": "1512159"
  },
  {
    "text": "the length of dealing with uh same same",
    "start": "1512159",
    "end": "1515120"
  },
  {
    "text": "sort of trouble that we had to go",
    "start": "1515120",
    "end": "1516840"
  },
  {
    "text": "through but in all cases it's possible",
    "start": "1516840",
    "end": "1519399"
  },
  {
    "text": "it's just so tempting to use privilege",
    "start": "1519399",
    "end": "1522559"
  },
  {
    "text": "true and be done with this and move on",
    "start": "1522559",
    "end": "1527520"
  }
]