[
  {
    "start": "0",
    "end": "33000"
  },
  {
    "text": "hello everybody i'm here to talk to you",
    "start": "0",
    "end": "1040"
  },
  {
    "text": "about how plaingrid started using istio",
    "start": "1040",
    "end": "2960"
  },
  {
    "text": "some of the problems that we",
    "start": "2960",
    "end": "4240"
  },
  {
    "text": "had along the way that made us look at",
    "start": "4240",
    "end": "5680"
  },
  {
    "text": "using service meshes in the first place",
    "start": "5680",
    "end": "7440"
  },
  {
    "text": "and then how we went and implemented",
    "start": "7440",
    "end": "8960"
  },
  {
    "text": "various parts of that with no downtime",
    "start": "8960",
    "end": "10400"
  },
  {
    "text": "along the way",
    "start": "10400",
    "end": "12080"
  },
  {
    "text": "plan grid is a construction productivity",
    "start": "12080",
    "end": "13759"
  },
  {
    "text": "app so our main user is actually",
    "start": "13759",
    "end": "15599"
  },
  {
    "text": "somebody in a hard hat and boots on a",
    "start": "15599",
    "end": "16960"
  },
  {
    "text": "construction site",
    "start": "16960",
    "end": "18000"
  },
  {
    "text": "we have workflows for making sure they",
    "start": "18000",
    "end": "19359"
  },
  {
    "text": "get the right information at the right",
    "start": "19359",
    "end": "20480"
  },
  {
    "text": "times and",
    "start": "20480",
    "end": "21199"
  },
  {
    "text": "they always know that they're building",
    "start": "21199",
    "end": "22480"
  },
  {
    "text": "the right thing based on the right set",
    "start": "22480",
    "end": "23680"
  },
  {
    "text": "of plans",
    "start": "23680",
    "end": "24560"
  },
  {
    "text": "my name is patrick alt i'm a software",
    "start": "24560",
    "end": "26400"
  },
  {
    "text": "architect at autodesk i was the systems",
    "start": "26400",
    "end": "28880"
  },
  {
    "text": "architect of plane grid before we got",
    "start": "28880",
    "end": "30320"
  },
  {
    "text": "purchased in 2018",
    "start": "30320",
    "end": "32000"
  },
  {
    "text": "i'm really excited to talk to you",
    "start": "32000",
    "end": "35040"
  },
  {
    "start": "33000",
    "end": "193000"
  },
  {
    "text": "the first project we took on involving",
    "start": "37520",
    "end": "39200"
  },
  {
    "text": "istio only used ingress so this is what",
    "start": "39200",
    "end": "41520"
  },
  {
    "text": "architecture looked like",
    "start": "41520",
    "end": "42719"
  },
  {
    "text": "back when we did that we had akamai here",
    "start": "42719",
    "end": "45520"
  },
  {
    "text": "this gets all of the",
    "start": "45520",
    "end": "46640"
  },
  {
    "text": "or all of the primary dns to all the",
    "start": "46640",
    "end": "48719"
  },
  {
    "text": "plane grid domains this goes to",
    "start": "48719",
    "end": "50559"
  },
  {
    "text": "elastic load balancers that go to",
    "start": "50559",
    "end": "52800"
  },
  {
    "text": "specific services",
    "start": "52800",
    "end": "54000"
  },
  {
    "text": "that run inside of kubernetes kate's is",
    "start": "54000",
    "end": "55680"
  },
  {
    "text": "an abbreviation for kubernetes",
    "start": "55680",
    "end": "58239"
  },
  {
    "text": "so we have things like app.planegrid.com",
    "start": "58239",
    "end": "61039"
  },
  {
    "text": "going to oneservice",
    "start": "61039",
    "end": "62559"
  },
  {
    "text": "and api.plangrid.com going to another",
    "start": "62559",
    "end": "65280"
  },
  {
    "text": "service",
    "start": "65280",
    "end": "66880"
  },
  {
    "text": "we also provision additional elastic",
    "start": "66880",
    "end": "70159"
  },
  {
    "text": "load balancers",
    "start": "70159",
    "end": "72000"
  },
  {
    "text": "we do these deployed within our vpn at",
    "start": "72000",
    "end": "74720"
  },
  {
    "text": "work",
    "start": "74720",
    "end": "75439"
  },
  {
    "text": "these are used by developers internal",
    "start": "75439",
    "end": "77520"
  },
  {
    "text": "tools some automation",
    "start": "77520",
    "end": "79520"
  },
  {
    "text": "and are generally a way for people to",
    "start": "79520",
    "end": "81360"
  },
  {
    "text": "access directly to some services that",
    "start": "81360",
    "end": "84080"
  },
  {
    "text": "would not otherwise be publicly",
    "start": "84080",
    "end": "85360"
  },
  {
    "text": "accessible",
    "start": "85360",
    "end": "86000"
  },
  {
    "text": "all services get private vpn",
    "start": "86000",
    "end": "89680"
  },
  {
    "text": "elbs they only get public ones if they",
    "start": "89680",
    "end": "92079"
  },
  {
    "text": "need to be accessible in the open area",
    "start": "92079",
    "end": "94159"
  },
  {
    "text": "an architectural change we made was to",
    "start": "94159",
    "end": "96079"
  },
  {
    "text": "enable it so individual feature teams",
    "start": "96079",
    "end": "97920"
  },
  {
    "text": "could easily spin up",
    "start": "97920",
    "end": "99360"
  },
  {
    "text": "new services instead of having to work",
    "start": "99360",
    "end": "101759"
  },
  {
    "text": "within the distributed monolith",
    "start": "101759",
    "end": "103520"
  },
  {
    "text": "this resulted in new teams provisioning",
    "start": "103520",
    "end": "106479"
  },
  {
    "text": "things that needed to be",
    "start": "106479",
    "end": "107600"
  },
  {
    "text": "accessible definitely within the vpn and",
    "start": "107600",
    "end": "110640"
  },
  {
    "text": "sometimes there were use cases where",
    "start": "110640",
    "end": "112000"
  },
  {
    "text": "they did have to make things publicly",
    "start": "112000",
    "end": "113360"
  },
  {
    "text": "accessible",
    "start": "113360",
    "end": "114399"
  },
  {
    "text": "and we would put them on public elbs",
    "start": "114399",
    "end": "117280"
  },
  {
    "text": "that went to akamai",
    "start": "117280",
    "end": "120159"
  },
  {
    "text": "this resulted in a few problems in our",
    "start": "120240",
    "end": "122159"
  },
  {
    "text": "infrastructure one",
    "start": "122159",
    "end": "123600"
  },
  {
    "text": "we had lots of elbs more than once we",
    "start": "123600",
    "end": "126000"
  },
  {
    "text": "hit the limits in",
    "start": "126000",
    "end": "126960"
  },
  {
    "text": "aws where they would not provision more",
    "start": "126960",
    "end": "129119"
  },
  {
    "text": "and we had to",
    "start": "129119",
    "end": "130080"
  },
  {
    "text": "request an increased limit from them",
    "start": "130080",
    "end": "132560"
  },
  {
    "text": "well they did this every time we asked",
    "start": "132560",
    "end": "134000"
  },
  {
    "text": "there was a continuous fear that at some",
    "start": "134000",
    "end": "135599"
  },
  {
    "text": "point they wouldn't",
    "start": "135599",
    "end": "136959"
  },
  {
    "text": "the other big problem was akamai",
    "start": "136959",
    "end": "139520"
  },
  {
    "text": "management of akamai was very difficult",
    "start": "139520",
    "end": "141280"
  },
  {
    "text": "to do programmatically for us their api",
    "start": "141280",
    "end": "143200"
  },
  {
    "text": "did not have tool",
    "start": "143200",
    "end": "144160"
  },
  {
    "text": "integration with terraform or the other",
    "start": "144160",
    "end": "145680"
  },
  {
    "text": "infrastructural tools we were using",
    "start": "145680",
    "end": "147360"
  },
  {
    "text": "so setting some of these vanity domains",
    "start": "147360",
    "end": "149200"
  },
  {
    "text": "on the plane grid domain was a manual",
    "start": "149200",
    "end": "151200"
  },
  {
    "text": "process",
    "start": "151200",
    "end": "152000"
  },
  {
    "text": "that quickly started to fill up our",
    "start": "152000",
    "end": "154640"
  },
  {
    "text": "ticket cue and become more of a",
    "start": "154640",
    "end": "158239"
  },
  {
    "text": "and become problematic the other thing",
    "start": "158720",
    "end": "161680"
  },
  {
    "text": "was",
    "start": "161680",
    "end": "162080"
  },
  {
    "text": "there was authentication there was an",
    "start": "162080",
    "end": "163760"
  },
  {
    "text": "authentication library used between the",
    "start": "163760",
    "end": "165599"
  },
  {
    "text": "two monoliths",
    "start": "165599",
    "end": "167120"
  },
  {
    "text": "when a new service was spun up it would",
    "start": "167120",
    "end": "169120"
  },
  {
    "text": "use the same library but there could be",
    "start": "169120",
    "end": "170959"
  },
  {
    "text": "slight differences in how it implemented",
    "start": "170959",
    "end": "172720"
  },
  {
    "text": "or how it used these",
    "start": "172720",
    "end": "173840"
  },
  {
    "text": "this created ergonomic issues because",
    "start": "173840",
    "end": "175920"
  },
  {
    "text": "sometimes our web",
    "start": "175920",
    "end": "177200"
  },
  {
    "text": "mobile and third-party developers would",
    "start": "177200",
    "end": "178800"
  },
  {
    "text": "get different response codes for some",
    "start": "178800",
    "end": "180720"
  },
  {
    "text": "things than they would expect",
    "start": "180720",
    "end": "182319"
  },
  {
    "text": "and there was always this lingering feel",
    "start": "182319",
    "end": "184159"
  },
  {
    "text": "that there was a security issue because",
    "start": "184159",
    "end": "185599"
  },
  {
    "text": "somebody had implemented",
    "start": "185599",
    "end": "186640"
  },
  {
    "text": "something differently and it was very",
    "start": "186640",
    "end": "187840"
  },
  {
    "text": "hard for us to audit it across the",
    "start": "187840",
    "end": "189599"
  },
  {
    "text": "plethora of services that were being",
    "start": "189599",
    "end": "191040"
  },
  {
    "text": "created",
    "start": "191040",
    "end": "193040"
  },
  {
    "start": "193000",
    "end": "631000"
  },
  {
    "text": "so let's simplify things a little bit",
    "start": "193040",
    "end": "196840"
  },
  {
    "text": "here",
    "start": "196840",
    "end": "198239"
  },
  {
    "text": "so the first project we did specifically",
    "start": "198239",
    "end": "200480"
  },
  {
    "text": "targeted the authentication problem",
    "start": "200480",
    "end": "202319"
  },
  {
    "text": "we were looking for a way to",
    "start": "202319",
    "end": "203840"
  },
  {
    "text": "authenticate all requests going into our",
    "start": "203840",
    "end": "205680"
  },
  {
    "text": "data center",
    "start": "205680",
    "end": "206560"
  },
  {
    "text": "centrally so that people could spin up",
    "start": "206560",
    "end": "208959"
  },
  {
    "text": "new services",
    "start": "208959",
    "end": "209760"
  },
  {
    "text": "and not have to re-implement as a",
    "start": "209760",
    "end": "211519"
  },
  {
    "text": "complex authentication logic as we had",
    "start": "211519",
    "end": "213680"
  },
  {
    "text": "at the time there were five different",
    "start": "213680",
    "end": "214959"
  },
  {
    "text": "ways to authenticate for five different",
    "start": "214959",
    "end": "216640"
  },
  {
    "text": "use cases",
    "start": "216640",
    "end": "218319"
  },
  {
    "text": "we evaluated a number of solutions and",
    "start": "218319",
    "end": "220480"
  },
  {
    "text": "what we decided to go with was istio",
    "start": "220480",
    "end": "222640"
  },
  {
    "text": "this project only used the istio gateway",
    "start": "222640",
    "end": "225760"
  },
  {
    "text": "we provisioned a new one",
    "start": "225760",
    "end": "227360"
  },
  {
    "text": "and gave it a an elb to akamai as well",
    "start": "227360",
    "end": "230959"
  },
  {
    "text": "we configured this and originally sent",
    "start": "230959",
    "end": "233040"
  },
  {
    "text": "no traffic to it",
    "start": "233040",
    "end": "235519"
  },
  {
    "text": "once this was here we set routing rules",
    "start": "235519",
    "end": "237680"
  },
  {
    "text": "within the service mesh so that",
    "start": "237680",
    "end": "239519"
  },
  {
    "text": "if this gateway received any calls with",
    "start": "239519",
    "end": "242319"
  },
  {
    "text": "to the domain app.planner.com it would",
    "start": "242319",
    "end": "244159"
  },
  {
    "text": "go to the correct service",
    "start": "244159",
    "end": "245280"
  },
  {
    "text": "and the same for api.great.com they",
    "start": "245280",
    "end": "247120"
  },
  {
    "text": "would go to the correct service",
    "start": "247120",
    "end": "248879"
  },
  {
    "text": "once this was set up we utilized a",
    "start": "248879",
    "end": "250720"
  },
  {
    "text": "feature in akamai to slowly shift",
    "start": "250720",
    "end": "252720"
  },
  {
    "text": "traffic over",
    "start": "252720",
    "end": "254239"
  },
  {
    "text": "so now we can start to send one percent",
    "start": "254239",
    "end": "255760"
  },
  {
    "text": "of traffic into istio and the other 99",
    "start": "255760",
    "end": "258400"
  },
  {
    "text": "out this let us canary all of our",
    "start": "258400",
    "end": "260320"
  },
  {
    "text": "changes and",
    "start": "260320",
    "end": "261440"
  },
  {
    "text": "very slowly roll them out as we became",
    "start": "261440",
    "end": "263360"
  },
  {
    "text": "confident of them",
    "start": "263360",
    "end": "264800"
  },
  {
    "text": "we did this one at a time but got to a",
    "start": "264800",
    "end": "266479"
  },
  {
    "text": "point where eventually",
    "start": "266479",
    "end": "268080"
  },
  {
    "text": "we had migrated all of our domains to",
    "start": "268080",
    "end": "270800"
  },
  {
    "text": "using the one elb",
    "start": "270800",
    "end": "272320"
  },
  {
    "text": "for sdo at this point we could watch the",
    "start": "272320",
    "end": "274800"
  },
  {
    "text": "metrics on the",
    "start": "274800",
    "end": "276160"
  },
  {
    "text": "remaining elbs and when they went down",
    "start": "276160",
    "end": "278400"
  },
  {
    "text": "to zero",
    "start": "278400",
    "end": "279680"
  },
  {
    "text": "we could de-provision them so this",
    "start": "279680",
    "end": "282880"
  },
  {
    "text": "solved the problem of",
    "start": "282880",
    "end": "284160"
  },
  {
    "text": "public ingress going in",
    "start": "284160",
    "end": "287759"
  },
  {
    "text": "the other side was slightly different",
    "start": "288160",
    "end": "290080"
  },
  {
    "text": "these elbs we had dns names directly",
    "start": "290080",
    "end": "293280"
  },
  {
    "text": "mapping to because these were only used",
    "start": "293280",
    "end": "295840"
  },
  {
    "text": "internally though and we knew that it",
    "start": "295840",
    "end": "297199"
  },
  {
    "text": "was only our",
    "start": "297199",
    "end": "298240"
  },
  {
    "text": "teams internal services that did it we",
    "start": "298240",
    "end": "300400"
  },
  {
    "text": "weren't as concerned about the dns legal",
    "start": "300400",
    "end": "302400"
  },
  {
    "text": "so what we decided to do here was spin",
    "start": "302400",
    "end": "304080"
  },
  {
    "text": "up an entirely different gateway",
    "start": "304080",
    "end": "307280"
  },
  {
    "text": "give it its own elb into the vpn",
    "start": "307280",
    "end": "312479"
  },
  {
    "text": "short one here oop",
    "start": "312479",
    "end": "317440"
  },
  {
    "text": "and now what we did was we put a wild",
    "start": "317520",
    "end": "319840"
  },
  {
    "text": "card dns on this",
    "start": "319840",
    "end": "321600"
  },
  {
    "text": "all of these domains used standard form",
    "start": "321600",
    "end": "324479"
  },
  {
    "text": "of service dot environment dot",
    "start": "324479",
    "end": "326240"
  },
  {
    "text": "and then we had an internal domain so",
    "start": "326240",
    "end": "328479"
  },
  {
    "text": "the way that we",
    "start": "328479",
    "end": "329360"
  },
  {
    "text": "did the migration was with the wild card",
    "start": "329360",
    "end": "331440"
  },
  {
    "text": "in place we would go to the teams owning",
    "start": "331440",
    "end": "333360"
  },
  {
    "text": "the services",
    "start": "333360",
    "end": "334320"
  },
  {
    "text": "and tell them we were going to remove",
    "start": "334320",
    "end": "335919"
  },
  {
    "text": "the specific dns entry for their service",
    "start": "335919",
    "end": "339039"
  },
  {
    "text": "this group causes dns to go to the",
    "start": "339039",
    "end": "341199"
  },
  {
    "text": "fallback on the wildcard",
    "start": "341199",
    "end": "344080"
  },
  {
    "text": "once we did that we would check and",
    "start": "344080",
    "end": "345759"
  },
  {
    "text": "watch the traffic on this which is",
    "start": "345759",
    "end": "347039"
  },
  {
    "text": "actually even easier because it was",
    "start": "347039",
    "end": "348240"
  },
  {
    "text": "internal there are no public scanners or",
    "start": "348240",
    "end": "349680"
  },
  {
    "text": "anything like that",
    "start": "349680",
    "end": "350400"
  },
  {
    "text": "so the traffic would really go to zero",
    "start": "350400",
    "end": "351840"
  },
  {
    "text": "eventually if anything lingered we would",
    "start": "351840",
    "end": "353759"
  },
  {
    "text": "go talk to those teams and tell them to",
    "start": "353759",
    "end": "355280"
  },
  {
    "text": "restart services or make sure dns",
    "start": "355280",
    "end": "356880"
  },
  {
    "text": "refreshed",
    "start": "356880",
    "end": "357759"
  },
  {
    "text": "but then we got to a point",
    "start": "357759",
    "end": "361280"
  },
  {
    "text": "where we could de-provision all those",
    "start": "361280",
    "end": "364840"
  },
  {
    "text": "zlb's",
    "start": "364840",
    "end": "366000"
  },
  {
    "text": "at this point we have two gateways one",
    "start": "366000",
    "end": "368960"
  },
  {
    "text": "getting all internal traffic and one",
    "start": "368960",
    "end": "370639"
  },
  {
    "text": "getting all customer facing traffic",
    "start": "370639",
    "end": "372479"
  },
  {
    "text": "we actually developed really great",
    "start": "372479",
    "end": "374000"
  },
  {
    "text": "dashboards at this point",
    "start": "374000",
    "end": "375600"
  },
  {
    "text": "that let teams see all of the error",
    "start": "375600",
    "end": "377840"
  },
  {
    "text": "codes latencies and responses",
    "start": "377840",
    "end": "379759"
  },
  {
    "text": "only going to customers and a lot of",
    "start": "379759",
    "end": "381680"
  },
  {
    "text": "teams made alerts and different",
    "start": "381680",
    "end": "383680"
  },
  {
    "text": "integrations with it just off of that",
    "start": "383680",
    "end": "385360"
  },
  {
    "text": "from the ingress point of view",
    "start": "385360",
    "end": "387600"
  },
  {
    "text": "this only solved the elb proliferation",
    "start": "387600",
    "end": "391120"
  },
  {
    "text": "by limiting us to these two though",
    "start": "391120",
    "end": "392880"
  },
  {
    "text": "and it moved the dns problems that we",
    "start": "392880",
    "end": "395520"
  },
  {
    "text": "had in configuring akamai",
    "start": "395520",
    "end": "397120"
  },
  {
    "text": "into configuring sdo now the akama",
    "start": "397120",
    "end": "398960"
  },
  {
    "text": "configuration was very straightforward",
    "start": "398960",
    "end": "400720"
  },
  {
    "text": "everything always went to the one elb",
    "start": "400720",
    "end": "402960"
  },
  {
    "text": "and we had",
    "start": "402960",
    "end": "403759"
  },
  {
    "text": "integration into our continuous",
    "start": "403759",
    "end": "405840"
  },
  {
    "text": "deployment tool to provision",
    "start": "405840",
    "end": "407520"
  },
  {
    "text": "not just the kubernetes manifest that",
    "start": "407520",
    "end": "409280"
  },
  {
    "text": "they needed to but also the istio",
    "start": "409280",
    "end": "410800"
  },
  {
    "text": "manifests",
    "start": "410800",
    "end": "411680"
  },
  {
    "text": "so that any new service that was",
    "start": "411680",
    "end": "413039"
  },
  {
    "text": "provisioned was correctly set up with",
    "start": "413039",
    "end": "414880"
  },
  {
    "text": "both the internal and the external",
    "start": "414880",
    "end": "416800"
  },
  {
    "text": "gateway to solve the authentication",
    "start": "416800",
    "end": "419599"
  },
  {
    "text": "issue",
    "start": "419599",
    "end": "420720"
  },
  {
    "text": "we took the library that was shared",
    "start": "420720",
    "end": "423759"
  },
  {
    "text": "between the two monoliths",
    "start": "423759",
    "end": "425280"
  },
  {
    "text": "and we extracted it into its own service",
    "start": "425280",
    "end": "429120"
  },
  {
    "text": "this service not really a long one",
    "start": "429120",
    "end": "433599"
  },
  {
    "text": "so this service we then made a",
    "start": "433840",
    "end": "437360"
  },
  {
    "text": "plug-in to istio",
    "start": "437360",
    "end": "440560"
  },
  {
    "text": "that for every request coming in would",
    "start": "441520",
    "end": "443199"
  },
  {
    "text": "send to the central authentication",
    "start": "443199",
    "end": "444800"
  },
  {
    "text": "service",
    "start": "444800",
    "end": "445440"
  },
  {
    "text": "all the headers that were associated",
    "start": "445440",
    "end": "447039"
  },
  {
    "text": "with it the central authentication",
    "start": "447039",
    "end": "448560"
  },
  {
    "text": "server could then respond if the request",
    "start": "448560",
    "end": "451280"
  },
  {
    "text": "was allowed or not whether it was",
    "start": "451280",
    "end": "453440"
  },
  {
    "text": "authenticated",
    "start": "453440",
    "end": "454479"
  },
  {
    "text": "and any changes to headers it could",
    "start": "454479",
    "end": "456080"
  },
  {
    "text": "delete and add headers",
    "start": "456080",
    "end": "457680"
  },
  {
    "text": "and the plugin would respect that",
    "start": "457680",
    "end": "460960"
  },
  {
    "text": "the central authentication server knew",
    "start": "460960",
    "end": "463440"
  },
  {
    "text": "how to check",
    "start": "463440",
    "end": "464000"
  },
  {
    "text": "for the different types of",
    "start": "464000",
    "end": "465599"
  },
  {
    "text": "authentication things but i",
    "start": "465599",
    "end": "467280"
  },
  {
    "text": "knew how to check for the different",
    "start": "467280",
    "end": "468560"
  },
  {
    "text": "types of authentication types",
    "start": "468560",
    "end": "470400"
  },
  {
    "text": "and it could for a given domain and for",
    "start": "470400",
    "end": "473440"
  },
  {
    "text": "a regex or prefix on a path know if a",
    "start": "473440",
    "end": "477120"
  },
  {
    "text": "specific call was or was not allowed",
    "start": "477120",
    "end": "480160"
  },
  {
    "text": "to be authenticated we knew there were",
    "start": "480160",
    "end": "482720"
  },
  {
    "text": "customer workflows that required",
    "start": "482720",
    "end": "484240"
  },
  {
    "text": "unauthenticated calls",
    "start": "484240",
    "end": "485599"
  },
  {
    "text": "to apis that were otherwise",
    "start": "485599",
    "end": "487440"
  },
  {
    "text": "authenticated so it was critical that we",
    "start": "487440",
    "end": "489039"
  },
  {
    "text": "had this allow list that things could",
    "start": "489039",
    "end": "490639"
  },
  {
    "text": "get through if they didn't have it",
    "start": "490639",
    "end": "492639"
  },
  {
    "text": "in the beginning this plug-in did modify",
    "start": "492639",
    "end": "495360"
  },
  {
    "text": "the headers but ignored",
    "start": "495360",
    "end": "497120"
  },
  {
    "text": "the response whether or not something",
    "start": "497120",
    "end": "498479"
  },
  {
    "text": "showed or should not be allowed through",
    "start": "498479",
    "end": "501039"
  },
  {
    "text": "this allowed local authentication to",
    "start": "501039",
    "end": "503039"
  },
  {
    "text": "happen in all of the services as well",
    "start": "503039",
    "end": "504800"
  },
  {
    "text": "but for us to still pass through with",
    "start": "504800",
    "end": "506479"
  },
  {
    "text": "the headers that would exist",
    "start": "506479",
    "end": "508400"
  },
  {
    "text": "from the central efficiency system at",
    "start": "508400",
    "end": "510800"
  },
  {
    "text": "this point",
    "start": "510800",
    "end": "511599"
  },
  {
    "text": "we took the common middleware that was",
    "start": "511599",
    "end": "513039"
  },
  {
    "text": "running across all services",
    "start": "513039",
    "end": "514640"
  },
  {
    "text": "and we updated it to instrument the",
    "start": "514640",
    "end": "516399"
  },
  {
    "text": "local authentication to tell us how",
    "start": "516399",
    "end": "518479"
  },
  {
    "text": "often",
    "start": "518479",
    "end": "519039"
  },
  {
    "text": "local authentication and the central",
    "start": "519039",
    "end": "520640"
  },
  {
    "text": "authentication would be performed",
    "start": "520640",
    "end": "523120"
  },
  {
    "text": "but we still didn't have it override it",
    "start": "523120",
    "end": "525279"
  },
  {
    "text": "was always falling back to local",
    "start": "525279",
    "end": "526640"
  },
  {
    "text": "authentication",
    "start": "526640",
    "end": "528160"
  },
  {
    "text": "with this we have dashboards and",
    "start": "528160",
    "end": "530399"
  },
  {
    "text": "combined with the logs of the specific",
    "start": "530399",
    "end": "532080"
  },
  {
    "text": "calls from central authentication in the",
    "start": "532080",
    "end": "534080"
  },
  {
    "text": "plug-in we can start to see which",
    "start": "534080",
    "end": "536240"
  },
  {
    "text": "services",
    "start": "536240",
    "end": "537440"
  },
  {
    "text": "were not always being correctly handled",
    "start": "537440",
    "end": "539519"
  },
  {
    "text": "by the central authentication service",
    "start": "539519",
    "end": "542240"
  },
  {
    "text": "and which ones we did fully covered",
    "start": "542240",
    "end": "546560"
  },
  {
    "text": "over time we worked with teams we",
    "start": "546560",
    "end": "548240"
  },
  {
    "text": "figured out what endpoints did and did",
    "start": "548240",
    "end": "549920"
  },
  {
    "text": "not have to be",
    "start": "549920",
    "end": "550720"
  },
  {
    "text": "put in the allow list and deny lists and",
    "start": "550720",
    "end": "552959"
  },
  {
    "text": "we ended up at a point where",
    "start": "552959",
    "end": "554320"
  },
  {
    "text": "the dashboards essentially went to the",
    "start": "554320",
    "end": "556800"
  },
  {
    "text": "local authentication",
    "start": "556800",
    "end": "558080"
  },
  {
    "text": "never occurring when it never occurred",
    "start": "558080",
    "end": "561360"
  },
  {
    "text": "when this happened we turned the plugin",
    "start": "561360",
    "end": "564080"
  },
  {
    "text": "over so it started respecting the deny",
    "start": "564080",
    "end": "566000"
  },
  {
    "text": "requests",
    "start": "566000",
    "end": "566880"
  },
  {
    "text": "and now any request that came in that",
    "start": "566880",
    "end": "568880"
  },
  {
    "text": "should be denied according to central",
    "start": "568880",
    "end": "570240"
  },
  {
    "text": "application server",
    "start": "570240",
    "end": "571360"
  },
  {
    "text": "is and never makes it to the service at",
    "start": "571360",
    "end": "573360"
  },
  {
    "text": "the end of the day",
    "start": "573360",
    "end": "574640"
  },
  {
    "text": "once that's there we actually took the",
    "start": "574640",
    "end": "576640"
  },
  {
    "text": "local authentication out of the",
    "start": "576640",
    "end": "577920"
  },
  {
    "text": "different middleware",
    "start": "577920",
    "end": "579279"
  },
  {
    "text": "out of the middleware and now we're in a",
    "start": "579279",
    "end": "581200"
  },
  {
    "text": "place where all requests were",
    "start": "581200",
    "end": "582720"
  },
  {
    "text": "authenticated centrally",
    "start": "582720",
    "end": "583920"
  },
  {
    "text": "either one service this actually works",
    "start": "583920",
    "end": "586080"
  },
  {
    "text": "with the other gateway as well",
    "start": "586080",
    "end": "587600"
  },
  {
    "text": "but it's hard to fit",
    "start": "587600",
    "end": "591120"
  },
  {
    "text": "so a big thing that we did in all of",
    "start": "591120",
    "end": "592480"
  },
  {
    "text": "this was we really did not want to",
    "start": "592480",
    "end": "594240"
  },
  {
    "text": "impact local development",
    "start": "594240",
    "end": "596320"
  },
  {
    "text": "we wanted to make sure teams could",
    "start": "596320",
    "end": "597519"
  },
  {
    "text": "continue to iterate and not have to",
    "start": "597519",
    "end": "599120"
  },
  {
    "text": "worry about anything we were working on",
    "start": "599120",
    "end": "601519"
  },
  {
    "text": "so we almost did that we came very close",
    "start": "601519",
    "end": "604079"
  },
  {
    "text": "when we got to the point that we were",
    "start": "604079",
    "end": "605360"
  },
  {
    "text": "taking the local authentication out of",
    "start": "605360",
    "end": "607279"
  },
  {
    "text": "the middleware",
    "start": "607279",
    "end": "608399"
  },
  {
    "text": "there was an impact that we had and this",
    "start": "608399",
    "end": "611360"
  },
  {
    "text": "was",
    "start": "611360",
    "end": "611680"
  },
  {
    "text": "either developers when they were sending",
    "start": "611680",
    "end": "613680"
  },
  {
    "text": "network requests locally",
    "start": "613680",
    "end": "615120"
  },
  {
    "text": "had to add the headers that would be",
    "start": "615120",
    "end": "616880"
  },
  {
    "text": "added by the central authentication",
    "start": "616880",
    "end": "618320"
  },
  {
    "text": "server so the middleware knew",
    "start": "618320",
    "end": "620079"
  },
  {
    "text": "that they were authenticated we also",
    "start": "620079",
    "end": "621680"
  },
  {
    "text": "added an option inside the services",
    "start": "621680",
    "end": "623920"
  },
  {
    "text": "so that it would allow everything that's",
    "start": "623920",
    "end": "626480"
  },
  {
    "text": "going through",
    "start": "626480",
    "end": "627279"
  },
  {
    "text": "so when running locally people didn't",
    "start": "627279",
    "end": "628880"
  },
  {
    "text": "have to worry about",
    "start": "628880",
    "end": "633839"
  },
  {
    "start": "631000",
    "end": "907000"
  },
  {
    "text": "so the next project we had was all about",
    "start": "636000",
    "end": "637600"
  },
  {
    "text": "observability we talked about in the",
    "start": "637600",
    "end": "639360"
  },
  {
    "text": "first project how once we had all of our",
    "start": "639360",
    "end": "641040"
  },
  {
    "text": "traffic going through the",
    "start": "641040",
    "end": "642399"
  },
  {
    "text": "private and public gateways we got",
    "start": "642399",
    "end": "644560"
  },
  {
    "text": "really good dashboards that teams",
    "start": "644560",
    "end": "645760"
  },
  {
    "text": "started to utilize",
    "start": "645760",
    "end": "647200"
  },
  {
    "text": "this ended up being slightly confusing",
    "start": "647200",
    "end": "648800"
  },
  {
    "text": "as we grew because these were only",
    "start": "648800",
    "end": "651120"
  },
  {
    "text": "metrics captured",
    "start": "651120",
    "end": "652160"
  },
  {
    "text": "captured at ingress either from the vpn",
    "start": "652160",
    "end": "654320"
  },
  {
    "text": "or from the public internet",
    "start": "654320",
    "end": "655839"
  },
  {
    "text": "it didn't actually give you any data",
    "start": "655839",
    "end": "657440"
  },
  {
    "text": "when two services inside this",
    "start": "657440",
    "end": "660160"
  },
  {
    "text": "cluster we're talking to each other also",
    "start": "660160",
    "end": "662399"
  },
  {
    "text": "if you had a service that was called by",
    "start": "662399",
    "end": "664240"
  },
  {
    "text": "another one",
    "start": "664240",
    "end": "665040"
  },
  {
    "text": "or was even just proxied by another",
    "start": "665040",
    "end": "667120"
  },
  {
    "text": "service as we had when some people broke",
    "start": "667120",
    "end": "668640"
  },
  {
    "text": "some of the monolith pieces out",
    "start": "668640",
    "end": "670240"
  },
  {
    "text": "you didn't have metrics that were easy",
    "start": "670240",
    "end": "672880"
  },
  {
    "text": "to pull out of that gateway because they",
    "start": "672880",
    "end": "674640"
  },
  {
    "text": "would be associated with other services",
    "start": "674640",
    "end": "677440"
  },
  {
    "text": "so the next project we did was",
    "start": "677440",
    "end": "678880"
  },
  {
    "text": "essentially all about just adding this",
    "start": "678880",
    "end": "680480"
  },
  {
    "text": "destination and source app",
    "start": "680480",
    "end": "682000"
  },
  {
    "text": "option to the existing dashboards that",
    "start": "682000",
    "end": "684480"
  },
  {
    "text": "we had so people could really",
    "start": "684480",
    "end": "685920"
  },
  {
    "text": "start to drill in and see what was going",
    "start": "685920",
    "end": "687519"
  },
  {
    "text": "on the way we did this",
    "start": "687519",
    "end": "689040"
  },
  {
    "text": "was to add side cars we got to take a",
    "start": "689040",
    "end": "692000"
  },
  {
    "text": "step back though",
    "start": "692000",
    "end": "692800"
  },
  {
    "text": "and we're going to talk a little bit",
    "start": "692800",
    "end": "693839"
  },
  {
    "text": "about the system we built when we moved",
    "start": "693839",
    "end": "695519"
  },
  {
    "text": "out of heroku",
    "start": "695519",
    "end": "697040"
  },
  {
    "text": "this was entirely docker based the",
    "start": "697040",
    "end": "698880"
  },
  {
    "text": "contract we have with feature teams",
    "start": "698880",
    "end": "700320"
  },
  {
    "text": "is that they give us docker images and",
    "start": "700320",
    "end": "702160"
  },
  {
    "text": "we will deploy them",
    "start": "702160",
    "end": "703360"
  },
  {
    "text": "in a heroku light experience and i'm air",
    "start": "703360",
    "end": "705680"
  },
  {
    "text": "quoting a lot in this",
    "start": "705680",
    "end": "707519"
  },
  {
    "text": "the way this works in principle is we",
    "start": "707519",
    "end": "709760"
  },
  {
    "text": "have these yaml files that people can",
    "start": "709760",
    "end": "711440"
  },
  {
    "text": "define",
    "start": "711440",
    "end": "712000"
  },
  {
    "text": "what their service looks like and how it",
    "start": "712000",
    "end": "713920"
  },
  {
    "text": "should be deployed at runtime",
    "start": "713920",
    "end": "715519"
  },
  {
    "text": "so this is an example for a comment",
    "start": "715519",
    "end": "717040"
  },
  {
    "text": "service i would deploy the docker image",
    "start": "717040",
    "end": "718959"
  },
  {
    "text": "built from the main branch into the prod",
    "start": "718959",
    "end": "720880"
  },
  {
    "text": "pipeline",
    "start": "720880",
    "end": "721519"
  },
  {
    "text": "and i would only make it accessible over",
    "start": "721519",
    "end": "723440"
  },
  {
    "text": "the elb that's within the vpn",
    "start": "723440",
    "end": "725440"
  },
  {
    "text": "no need to be public here what this does",
    "start": "725440",
    "end": "729120"
  },
  {
    "text": "is we consume this yaml and it generates",
    "start": "729120",
    "end": "732160"
  },
  {
    "text": "a whole lot of spinnaker pipelines",
    "start": "732160",
    "end": "734880"
  },
  {
    "text": "so this is an example of one of our more",
    "start": "734880",
    "end": "737120"
  },
  {
    "text": "basic ones",
    "start": "737120",
    "end": "738000"
  },
  {
    "text": "actually there's a lot of options people",
    "start": "738000",
    "end": "740079"
  },
  {
    "text": "can put in to build these",
    "start": "740079",
    "end": "741680"
  },
  {
    "text": "in but all of these spinnaker pipelines",
    "start": "741680",
    "end": "743600"
  },
  {
    "text": "are built to take that docker container",
    "start": "743600",
    "end": "745600"
  },
  {
    "text": "make the pod spec and other kubernetes",
    "start": "745600",
    "end": "747600"
  },
  {
    "text": "necessities around it",
    "start": "747600",
    "end": "748880"
  },
  {
    "text": "and then deploy that into our kubernetes",
    "start": "748880",
    "end": "750720"
  },
  {
    "text": "cluster so here i've actually",
    "start": "750720",
    "end": "752399"
  },
  {
    "text": "highlighted",
    "start": "752399",
    "end": "753120"
  },
  {
    "text": "the apply cockweb manifest gokulet is",
    "start": "753120",
    "end": "755360"
  },
  {
    "text": "the name of one of our",
    "start": "755360",
    "end": "756720"
  },
  {
    "text": "monoliths it actually means peanut it's",
    "start": "756720",
    "end": "758720"
  },
  {
    "text": "french",
    "start": "758720",
    "end": "760480"
  },
  {
    "text": "this is a step that we included when we",
    "start": "760480",
    "end": "762800"
  },
  {
    "text": "wanted to add istio support so that we",
    "start": "762800",
    "end": "764720"
  },
  {
    "text": "could",
    "start": "764720",
    "end": "765360"
  },
  {
    "text": "before launching a service apply any",
    "start": "765360",
    "end": "767680"
  },
  {
    "text": "routing changes that we needed to",
    "start": "767680",
    "end": "769680"
  },
  {
    "text": "to make the two two gateways work",
    "start": "769680",
    "end": "774160"
  },
  {
    "text": "that was where we said for these host",
    "start": "774160",
    "end": "775839"
  },
  {
    "text": "headers they're going to go to these",
    "start": "775839",
    "end": "776959"
  },
  {
    "text": "services",
    "start": "776959",
    "end": "777680"
  },
  {
    "text": "so we snuck that in the nice part about",
    "start": "777680",
    "end": "779920"
  },
  {
    "text": "all of this is",
    "start": "779920",
    "end": "780959"
  },
  {
    "text": "we updated this transparently to teams",
    "start": "780959",
    "end": "783200"
  },
  {
    "text": "in almost all conditions",
    "start": "783200",
    "end": "785279"
  },
  {
    "text": "so when we went and did the next project",
    "start": "785279",
    "end": "787200"
  },
  {
    "text": "of saying okay we want to add side cars",
    "start": "787200",
    "end": "789120"
  },
  {
    "text": "we did the same iterative approach where",
    "start": "789120",
    "end": "791120"
  },
  {
    "text": "we had people opt-in",
    "start": "791120",
    "end": "792720"
  },
  {
    "text": "and really all we did was add a new",
    "start": "792720",
    "end": "794560"
  },
  {
    "text": "option into this yaml where we could say",
    "start": "794560",
    "end": "796160"
  },
  {
    "text": "that they were not in the service mesh",
    "start": "796160",
    "end": "798320"
  },
  {
    "text": "in the beginning everybody was uh the",
    "start": "798320",
    "end": "801360"
  },
  {
    "text": "default",
    "start": "801360",
    "end": "802000"
  },
  {
    "text": "on this was false and we slowly rolled",
    "start": "802000",
    "end": "803920"
  },
  {
    "text": "people out eventually we got to a place",
    "start": "803920",
    "end": "805920"
  },
  {
    "text": "where we were comfortable and we",
    "start": "805920",
    "end": "807200"
  },
  {
    "text": "inverted it and now the default is uh",
    "start": "807200",
    "end": "809519"
  },
  {
    "text": "true and you have to",
    "start": "809519",
    "end": "810720"
  },
  {
    "text": "explicitly opt out in doing this",
    "start": "810720",
    "end": "814000"
  },
  {
    "text": "we ran to a whole lot of really",
    "start": "814000",
    "end": "815600"
  },
  {
    "text": "interesting things uh it was",
    "start": "815600",
    "end": "817600"
  },
  {
    "text": "fairly seamless overall but we did hit a",
    "start": "817600",
    "end": "820399"
  },
  {
    "text": "couple of envoy and istio issues",
    "start": "820399",
    "end": "822320"
  },
  {
    "text": "specifically around redis there was an",
    "start": "822320",
    "end": "824399"
  },
  {
    "text": "issue on",
    "start": "824399",
    "end": "825519"
  },
  {
    "text": "how ssl and authentication when combined",
    "start": "825519",
    "end": "829360"
  },
  {
    "text": "worked with redis that would bite us in",
    "start": "829360",
    "end": "832480"
  },
  {
    "text": "the difference between some of our redis",
    "start": "832480",
    "end": "834240"
  },
  {
    "text": "lab deployed",
    "start": "834240",
    "end": "835279"
  },
  {
    "text": "redis instances and our aws elastic hash",
    "start": "835279",
    "end": "838320"
  },
  {
    "text": "deployed redis instances and this",
    "start": "838320",
    "end": "840399"
  },
  {
    "text": "unfortunately is one of those where we",
    "start": "840399",
    "end": "841839"
  },
  {
    "text": "were not totally consistent between",
    "start": "841839",
    "end": "843600"
  },
  {
    "text": "environments",
    "start": "843600",
    "end": "844560"
  },
  {
    "text": "so we actually had the soaking in",
    "start": "844560",
    "end": "846000"
  },
  {
    "text": "pre-production environments for a while",
    "start": "846000",
    "end": "847600"
  },
  {
    "text": "and we attempted to roll it out",
    "start": "847600",
    "end": "849279"
  },
  {
    "text": "in the production environments we hit",
    "start": "849279",
    "end": "851279"
  },
  {
    "text": "one of these scenarios where it was",
    "start": "851279",
    "end": "853279"
  },
  {
    "text": "living in a different place than it was",
    "start": "853279",
    "end": "854639"
  },
  {
    "text": "before",
    "start": "854639",
    "end": "855360"
  },
  {
    "text": "we had to roll that back the way we",
    "start": "855360",
    "end": "857199"
  },
  {
    "text": "fixed this was we just",
    "start": "857199",
    "end": "858959"
  },
  {
    "text": "said that the sidecar could ignore these",
    "start": "858959",
    "end": "861360"
  },
  {
    "text": "ips",
    "start": "861360",
    "end": "862079"
  },
  {
    "text": "and it would just pass everything",
    "start": "862079",
    "end": "863760"
  },
  {
    "text": "through or it would not pass everything",
    "start": "863760",
    "end": "865440"
  },
  {
    "text": "would ignore these ips and just let",
    "start": "865440",
    "end": "866959"
  },
  {
    "text": "everything go around the sidecar",
    "start": "866959",
    "end": "869199"
  },
  {
    "text": "so we didn't get observability for these",
    "start": "869199",
    "end": "871600"
  },
  {
    "text": "pieces",
    "start": "871600",
    "end": "872480"
  },
  {
    "text": "but because it was a known ip space and",
    "start": "872480",
    "end": "874720"
  },
  {
    "text": "it was actually an issue that was fixed",
    "start": "874720",
    "end": "876480"
  },
  {
    "text": "in a future version of envoy",
    "start": "876480",
    "end": "878240"
  },
  {
    "text": "we said okay we'll just let it go",
    "start": "878240",
    "end": "880000"
  },
  {
    "text": "through for now and then when we upgrade",
    "start": "880000",
    "end": "881519"
  },
  {
    "text": "we'll be able to take this restriction",
    "start": "881519",
    "end": "882800"
  },
  {
    "text": "out",
    "start": "882800",
    "end": "883199"
  },
  {
    "text": "let it go so you can see here what the",
    "start": "883199",
    "end": "885040"
  },
  {
    "text": "dashboards look like now we can actually",
    "start": "885040",
    "end": "886720"
  },
  {
    "text": "drill into two services",
    "start": "886720",
    "end": "888399"
  },
  {
    "text": "get all of the different high level",
    "start": "888399",
    "end": "890959"
  },
  {
    "text": "metrics between them",
    "start": "890959",
    "end": "892160"
  },
  {
    "text": "it lets us set things like slos and",
    "start": "892160",
    "end": "894959"
  },
  {
    "text": "alerts",
    "start": "894959",
    "end": "895760"
  },
  {
    "text": "on a per service path basis",
    "start": "895760",
    "end": "899360"
  },
  {
    "text": "it has been really really helpful in",
    "start": "899360",
    "end": "900720"
  },
  {
    "text": "some of our incidents for tracking down",
    "start": "900720",
    "end": "902720"
  },
  {
    "text": "exactly where hot spots are and where we",
    "start": "902720",
    "end": "905199"
  },
  {
    "text": "need to focus our attention",
    "start": "905199",
    "end": "912079"
  },
  {
    "start": "907000",
    "end": "1169000"
  },
  {
    "text": "so up to this point we've been using an",
    "start": "912079",
    "end": "913920"
  },
  {
    "text": "architectural diagram such as this",
    "start": "913920",
    "end": "915760"
  },
  {
    "text": "to represent what point systems look",
    "start": "915760",
    "end": "918160"
  },
  {
    "text": "like at the time",
    "start": "918160",
    "end": "919120"
  },
  {
    "text": "the last story we actually have to",
    "start": "919120",
    "end": "920399"
  },
  {
    "text": "change this a little bit because the",
    "start": "920399",
    "end": "921680"
  },
  {
    "text": "last story is a disaster story",
    "start": "921680",
    "end": "923519"
  },
  {
    "text": "we did not have a situation where the",
    "start": "923519",
    "end": "925199"
  },
  {
    "text": "gateway was taking all requests and",
    "start": "925199",
    "end": "927040"
  },
  {
    "text": "fanning out to services",
    "start": "927040",
    "end": "928480"
  },
  {
    "text": "we had services that were we had",
    "start": "928480",
    "end": "931680"
  },
  {
    "text": "services that were",
    "start": "931680",
    "end": "932880"
  },
  {
    "text": "entirely behind the monolith and were",
    "start": "932880",
    "end": "935440"
  },
  {
    "text": "straight proxied through",
    "start": "935440",
    "end": "938079"
  },
  {
    "text": "we'll say for the story this is our",
    "start": "938079",
    "end": "940480"
  },
  {
    "text": "rails monolith and the proxy",
    "start": "940480",
    "end": "942079"
  },
  {
    "text": "code that here is extremely minimal it",
    "start": "942079",
    "end": "944800"
  },
  {
    "text": "just passes things through and only",
    "start": "944800",
    "end": "946320"
  },
  {
    "text": "exists so that all of this can be served",
    "start": "946320",
    "end": "948399"
  },
  {
    "text": "over",
    "start": "948399",
    "end": "949199"
  },
  {
    "text": "the same domain what happened is there",
    "start": "949199",
    "end": "953040"
  },
  {
    "text": "was a new feature released in",
    "start": "953040",
    "end": "954399"
  },
  {
    "text": "a service behind the rails monolith this",
    "start": "954399",
    "end": "956959"
  },
  {
    "text": "was a feature that was available on the",
    "start": "956959",
    "end": "958480"
  },
  {
    "text": "home page so",
    "start": "958480",
    "end": "959360"
  },
  {
    "text": "all users saw it immediately upon",
    "start": "959360",
    "end": "961199"
  },
  {
    "text": "logging in and it",
    "start": "961199",
    "end": "963440"
  },
  {
    "text": "it had higher latency than most of the",
    "start": "963440",
    "end": "966000"
  },
  {
    "text": "other features that we had at the time",
    "start": "966000",
    "end": "968399"
  },
  {
    "text": "not considerably higher this actually",
    "start": "968399",
    "end": "970399"
  },
  {
    "text": "was okay in initial testing and we",
    "start": "970399",
    "end": "972399"
  },
  {
    "text": "did a slow roll out to users and did not",
    "start": "972399",
    "end": "974880"
  },
  {
    "text": "cause any problems",
    "start": "974880",
    "end": "976160"
  },
  {
    "text": "what happened is when we rolled it out",
    "start": "976160",
    "end": "977440"
  },
  {
    "text": "to 100 of users the slight increase in",
    "start": "977440",
    "end": "980240"
  },
  {
    "text": "latency ended up consuming all available",
    "start": "980240",
    "end": "982959"
  },
  {
    "text": "connections within",
    "start": "982959",
    "end": "984000"
  },
  {
    "text": "rails this had the effect because this",
    "start": "984000",
    "end": "986959"
  },
  {
    "text": "was the",
    "start": "986959",
    "end": "988079"
  },
  {
    "text": "service getting all requests from the",
    "start": "988079",
    "end": "989680"
  },
  {
    "text": "web of taking down the entire website",
    "start": "989680",
    "end": "992399"
  },
  {
    "text": "we identified it pretty quickly we",
    "start": "992399",
    "end": "993839"
  },
  {
    "text": "rolled back the feature that was here",
    "start": "993839",
    "end": "996560"
  },
  {
    "text": "however this was a feature that was",
    "start": "996560",
    "end": "998480"
  },
  {
    "text": "highly requested by users and was a long",
    "start": "998480",
    "end": "1000720"
  },
  {
    "text": "time coming so they weren't happy that",
    "start": "1000720",
    "end": "1002240"
  },
  {
    "text": "we pulled it away",
    "start": "1002240",
    "end": "1004240"
  },
  {
    "text": "what we ended up doing was modeling",
    "start": "1004240",
    "end": "1007279"
  },
  {
    "text": "the domains and the services so that we",
    "start": "1007279",
    "end": "1010320"
  },
  {
    "text": "could",
    "start": "1010320",
    "end": "1010880"
  },
  {
    "text": "now route around this uh rails model",
    "start": "1010880",
    "end": "1014079"
  },
  {
    "text": "and because it was just doing a straight",
    "start": "1014079",
    "end": "1015519"
  },
  {
    "text": "proxy this was fairly simple",
    "start": "1015519",
    "end": "1017519"
  },
  {
    "text": "so we ended up in a situation where now",
    "start": "1017519",
    "end": "1021320"
  },
  {
    "text": "app.planner.com from the gateway",
    "start": "1021320",
    "end": "1024480"
  },
  {
    "text": "would fan out appropriately to these",
    "start": "1024480",
    "end": "1025918"
  },
  {
    "text": "services and we ended up getting rid of",
    "start": "1025919",
    "end": "1027520"
  },
  {
    "text": "all of the proxy routes out of rails",
    "start": "1027520",
    "end": "1029520"
  },
  {
    "text": "we saw a pretty good performance boost",
    "start": "1029520",
    "end": "1030959"
  },
  {
    "text": "when this happened too",
    "start": "1030959",
    "end": "1032640"
  },
  {
    "text": "because the rails it turns out is not a",
    "start": "1032640",
    "end": "1034640"
  },
  {
    "text": "great proxy",
    "start": "1034640",
    "end": "1036160"
  },
  {
    "text": "this project was done in haste as part",
    "start": "1036160",
    "end": "1038640"
  },
  {
    "text": "of a firefighting exercise essentially",
    "start": "1038640",
    "end": "1040959"
  },
  {
    "text": "because of that we didn't put a lot of",
    "start": "1040959",
    "end": "1042400"
  },
  {
    "text": "time and thought into the modeling of",
    "start": "1042400",
    "end": "1044160"
  },
  {
    "text": "how we were going to do this",
    "start": "1044160",
    "end": "1045600"
  },
  {
    "text": "l7 path-based routing what came out",
    "start": "1045600",
    "end": "1049120"
  },
  {
    "text": "was a less than ideal situation instead",
    "start": "1049120",
    "end": "1051600"
  },
  {
    "text": "of modeling",
    "start": "1051600",
    "end": "1052799"
  },
  {
    "text": "apis like app.grid.com and saying",
    "start": "1052799",
    "end": "1055919"
  },
  {
    "text": "specific routes or prefixes go to",
    "start": "1055919",
    "end": "1058240"
  },
  {
    "text": "specific services",
    "start": "1058240",
    "end": "1059520"
  },
  {
    "text": "we ended up with a situation where we",
    "start": "1059520",
    "end": "1062480"
  },
  {
    "text": "stole",
    "start": "1062480",
    "end": "1063600"
  },
  {
    "text": "some endpoints from services",
    "start": "1063600",
    "end": "1067039"
  },
  {
    "text": "this example you're seeing here is a",
    "start": "1067039",
    "end": "1069520"
  },
  {
    "text": "routes file that was in our service",
    "start": "1069520",
    "end": "1071360"
  },
  {
    "text": "definition",
    "start": "1071360",
    "end": "1072400"
  },
  {
    "text": "and we would then say for a service",
    "start": "1072400",
    "end": "1075120"
  },
  {
    "text": "specific routes",
    "start": "1075120",
    "end": "1076320"
  },
  {
    "text": "actually go to different services",
    "start": "1076320",
    "end": "1079440"
  },
  {
    "text": "this made it so there was still a",
    "start": "1079440",
    "end": "1081360"
  },
  {
    "text": "one-to-one mapping between",
    "start": "1081360",
    "end": "1083039"
  },
  {
    "text": "an endpoint so app.langley.com to the",
    "start": "1083039",
    "end": "1085760"
  },
  {
    "text": "rails monolith",
    "start": "1085760",
    "end": "1087280"
  },
  {
    "text": "but for specific aspects of the rails",
    "start": "1087280",
    "end": "1090160"
  },
  {
    "text": "monolith that matched some of these",
    "start": "1090160",
    "end": "1091840"
  },
  {
    "text": "things like",
    "start": "1091840",
    "end": "1092480"
  },
  {
    "text": "here is a prefix proxy insights we would",
    "start": "1092480",
    "end": "1095280"
  },
  {
    "text": "send this to the",
    "start": "1095280",
    "end": "1096480"
  },
  {
    "text": "plan grid insights destination which is",
    "start": "1096480",
    "end": "1098480"
  },
  {
    "text": "the name of one of our services",
    "start": "1098480",
    "end": "1101280"
  },
  {
    "text": "the really big drawbacks in this is it",
    "start": "1101280",
    "end": "1103440"
  },
  {
    "text": "made it incredibly difficult",
    "start": "1103440",
    "end": "1105520"
  },
  {
    "text": "to decouple the idea of the api from the",
    "start": "1105520",
    "end": "1108160"
  },
  {
    "text": "service",
    "start": "1108160",
    "end": "1108640"
  },
  {
    "text": "and you had to know that an api mapped",
    "start": "1108640",
    "end": "1111440"
  },
  {
    "text": "to a service and then",
    "start": "1111440",
    "end": "1112960"
  },
  {
    "text": "steal the endpoints from that service it",
    "start": "1112960",
    "end": "1115520"
  },
  {
    "text": "also made it",
    "start": "1115520",
    "end": "1116240"
  },
  {
    "text": "more confusing because you could go to",
    "start": "1116240",
    "end": "1118720"
  },
  {
    "text": "the plain",
    "start": "1118720",
    "end": "1119520"
  },
  {
    "text": "plain grid insight service and then put",
    "start": "1119520",
    "end": "1121840"
  },
  {
    "text": "another route in there that would take",
    "start": "1121840",
    "end": "1123600"
  },
  {
    "text": "proxy insights and send it to yet",
    "start": "1123600",
    "end": "1125520"
  },
  {
    "text": "another service",
    "start": "1125520",
    "end": "1126960"
  },
  {
    "text": "so by not modeling the api in the first",
    "start": "1126960",
    "end": "1130080"
  },
  {
    "text": "place",
    "start": "1130080",
    "end": "1130559"
  },
  {
    "text": "we really backed ourselves into this",
    "start": "1130559",
    "end": "1132160"
  },
  {
    "text": "corner where it was",
    "start": "1132160",
    "end": "1133840"
  },
  {
    "text": "very difficult to reason about where",
    "start": "1133840",
    "end": "1135919"
  },
  {
    "text": "things were gonna go",
    "start": "1135919",
    "end": "1137200"
  },
  {
    "text": "if we open this up we never expanded",
    "start": "1137200",
    "end": "1139919"
  },
  {
    "text": "this usage beyond",
    "start": "1139919",
    "end": "1141120"
  },
  {
    "text": "the one end point that was or we never",
    "start": "1141120",
    "end": "1144080"
  },
  {
    "text": "expanded this usage",
    "start": "1144080",
    "end": "1145440"
  },
  {
    "text": "beyond the one api that was having the",
    "start": "1145440",
    "end": "1148840"
  },
  {
    "text": "problems",
    "start": "1148840",
    "end": "1150080"
  },
  {
    "text": "we really took a step back and said we",
    "start": "1150080",
    "end": "1152240"
  },
  {
    "text": "need to do this as a first class citizen",
    "start": "1152240",
    "end": "1154240"
  },
  {
    "text": "within our system",
    "start": "1154240",
    "end": "1156000"
  },
  {
    "text": "this brings us to where we are today",
    "start": "1156000",
    "end": "1158400"
  },
  {
    "text": "where we have",
    "start": "1158400",
    "end": "1160080"
  },
  {
    "text": "first class representation of apis and",
    "start": "1160080",
    "end": "1163280"
  },
  {
    "text": "first class representation of services",
    "start": "1163280",
    "end": "1165679"
  },
  {
    "text": "and there are relationships that you set",
    "start": "1165679",
    "end": "1167760"
  },
  {
    "text": "between them",
    "start": "1167760",
    "end": "1170240"
  },
  {
    "start": "1169000",
    "end": "1247000"
  },
  {
    "text": "so here's the projects that we talked",
    "start": "1173760",
    "end": "1174960"
  },
  {
    "text": "about today we never set out to",
    "start": "1174960",
    "end": "1176480"
  },
  {
    "text": "implement a service mesh",
    "start": "1176480",
    "end": "1177840"
  },
  {
    "text": "all of these were very problem focused",
    "start": "1177840",
    "end": "1179360"
  },
  {
    "text": "and we saw a service mesh could help us",
    "start": "1179360",
    "end": "1180799"
  },
  {
    "text": "get over the humps that we had in our",
    "start": "1180799",
    "end": "1182640"
  },
  {
    "text": "production code i also couldn't get into",
    "start": "1182640",
    "end": "1184480"
  },
  {
    "text": "a lot of the smaller projects that we",
    "start": "1184480",
    "end": "1185679"
  },
  {
    "text": "did along the way that i had to cut for",
    "start": "1185679",
    "end": "1187120"
  },
  {
    "text": "time",
    "start": "1187120",
    "end": "1187760"
  },
  {
    "text": "but we did things around distributed",
    "start": "1187760",
    "end": "1189039"
  },
  {
    "text": "tracing and a lot of small ergonomic",
    "start": "1189039",
    "end": "1190559"
  },
  {
    "text": "enhancements that really helped out too",
    "start": "1190559",
    "end": "1192880"
  },
  {
    "text": "looking forward i'm not going to talk",
    "start": "1192880",
    "end": "1194160"
  },
  {
    "text": "about all of these but i want to touch",
    "start": "1194160",
    "end": "1195200"
  },
  {
    "text": "on the first two",
    "start": "1195200",
    "end": "1196320"
  },
  {
    "text": "the first one is our api modeling we're",
    "start": "1196320",
    "end": "1198960"
  },
  {
    "text": "seeing that",
    "start": "1198960",
    "end": "1199679"
  },
  {
    "text": "being a system that goes beyond istio",
    "start": "1199679",
    "end": "1201760"
  },
  {
    "text": "and beyond the service mesh we want to",
    "start": "1201760",
    "end": "1203120"
  },
  {
    "text": "integrate that into our security systems",
    "start": "1203120",
    "end": "1204720"
  },
  {
    "text": "into our global load balancing",
    "start": "1204720",
    "end": "1206080"
  },
  {
    "text": "and other network tools and",
    "start": "1206080",
    "end": "1207440"
  },
  {
    "text": "administrative tools that we have beyond",
    "start": "1207440",
    "end": "1209360"
  },
  {
    "text": "just istio itself",
    "start": "1209360",
    "end": "1210720"
  },
  {
    "text": "really excited about where it can go the",
    "start": "1210720",
    "end": "1212320"
  },
  {
    "text": "other one is pull request deploys we",
    "start": "1212320",
    "end": "1213919"
  },
  {
    "text": "want to deploy",
    "start": "1213919",
    "end": "1215039"
  },
  {
    "text": "prs of back-end services into live",
    "start": "1215039",
    "end": "1217280"
  },
  {
    "text": "environments",
    "start": "1217280",
    "end": "1218159"
  },
  {
    "text": "and set routing rules such that only",
    "start": "1218159",
    "end": "1220159"
  },
  {
    "text": "specific users are under certain",
    "start": "1220159",
    "end": "1221679"
  },
  {
    "text": "conditions do people go to the new",
    "start": "1221679",
    "end": "1223200"
  },
  {
    "text": "service",
    "start": "1223200",
    "end": "1224000"
  },
  {
    "text": "let us get very insightful testing of",
    "start": "1224000",
    "end": "1226159"
  },
  {
    "text": "pre-merged code in live environments",
    "start": "1226159",
    "end": "1229280"
  },
  {
    "text": "we're also hiring if you want to come",
    "start": "1229280",
    "end": "1230960"
  },
  {
    "text": "help us fix construction we would really",
    "start": "1230960",
    "end": "1232559"
  },
  {
    "text": "appreciate it",
    "start": "1232559",
    "end": "1233440"
  },
  {
    "text": "construction is one of the only",
    "start": "1233440",
    "end": "1234559"
  },
  {
    "text": "industries on earth that has become less",
    "start": "1234559",
    "end": "1236240"
  },
  {
    "text": "productive over the last 100 years",
    "start": "1236240",
    "end": "1238000"
  },
  {
    "text": "the efforts we put in here are really",
    "start": "1238000",
    "end": "1239280"
  },
  {
    "text": "going to move the needle and make a big",
    "start": "1239280",
    "end": "1240799"
  },
  {
    "text": "difference for a lot of people in the",
    "start": "1240799",
    "end": "1242159"
  },
  {
    "text": "world",
    "start": "1242159",
    "end": "1242880"
  },
  {
    "text": "thank you for any links referrals or",
    "start": "1242880",
    "end": "1244640"
  },
  {
    "text": "questions that you have been great",
    "start": "1244640",
    "end": "1248960"
  }
]