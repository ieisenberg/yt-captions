[
  {
    "text": "hi everyone i'm steve sloca",
    "start": "960",
    "end": "3040"
  },
  {
    "text": "and today i'm going to walk you through",
    "start": "3040",
    "end": "4160"
  },
  {
    "text": "how to build your own envoy control",
    "start": "4160",
    "end": "5759"
  },
  {
    "text": "plane",
    "start": "5759",
    "end": "6560"
  },
  {
    "text": "so we're going to introduce some some",
    "start": "6560",
    "end": "8000"
  },
  {
    "text": "core envoy concepts",
    "start": "8000",
    "end": "9760"
  },
  {
    "text": "once we have those concepts we're going",
    "start": "9760",
    "end": "11200"
  },
  {
    "text": "to look at how we can implement those",
    "start": "11200",
    "end": "12639"
  },
  {
    "text": "concepts into different ways",
    "start": "12639",
    "end": "14320"
  },
  {
    "text": "of configuring envoy and once we",
    "start": "14320",
    "end": "16240"
  },
  {
    "text": "understand those we're going to go ahead",
    "start": "16240",
    "end": "17600"
  },
  {
    "text": "and build our own control plane now",
    "start": "17600",
    "end": "19199"
  },
  {
    "text": "today we're going to use go line for our",
    "start": "19199",
    "end": "21279"
  },
  {
    "text": "our source code and we'll have lots of",
    "start": "21279",
    "end": "23279"
  },
  {
    "text": "examples that'll be available for you at",
    "start": "23279",
    "end": "24800"
  },
  {
    "text": "the end",
    "start": "24800",
    "end": "25840"
  },
  {
    "text": "let's get started all right quick little",
    "start": "25840",
    "end": "28480"
  },
  {
    "text": "bit about me so again i'm steve silke",
    "start": "28480",
    "end": "30160"
  },
  {
    "text": "uh my my role is i'm a maintainer of",
    "start": "30160",
    "end": "32000"
  },
  {
    "text": "contour at vmware",
    "start": "32000",
    "end": "33520"
  },
  {
    "text": "uh contour is an open source ingress",
    "start": "33520",
    "end": "35360"
  },
  {
    "text": "controller for kubernetes it's also a",
    "start": "35360",
    "end": "36880"
  },
  {
    "text": "cncf project",
    "start": "36880",
    "end": "38480"
  },
  {
    "text": "um so enough about that let's dig into",
    "start": "38480",
    "end": "40079"
  },
  {
    "text": "the project so",
    "start": "40079",
    "end": "41520"
  },
  {
    "text": "so what is envoy so envoy is an open",
    "start": "41520",
    "end": "44000"
  },
  {
    "text": "source edge and service proxy",
    "start": "44000",
    "end": "46000"
  },
  {
    "text": "uh it's designed for cloud native",
    "start": "46000",
    "end": "47360"
  },
  {
    "text": "applications uh this is this is a quote",
    "start": "47360",
    "end": "49840"
  },
  {
    "text": "from the onboard proxy website",
    "start": "49840",
    "end": "51440"
  },
  {
    "text": "um so it's a service proxy",
    "start": "51440",
    "end": "54800"
  },
  {
    "text": "uh we use it all over the place um",
    "start": "54800",
    "end": "56320"
  },
  {
    "text": "contour uses it as this data playing",
    "start": "56320",
    "end": "58000"
  },
  {
    "text": "data path component other projects use",
    "start": "58000",
    "end": "60399"
  },
  {
    "text": "this as well",
    "start": "60399",
    "end": "61520"
  },
  {
    "text": "it's becoming a more and more popular",
    "start": "61520",
    "end": "63760"
  },
  {
    "text": "service proxy out in the industry",
    "start": "63760",
    "end": "66560"
  },
  {
    "text": "it's used by a bunch of people again",
    "start": "66560",
    "end": "67760"
  },
  {
    "text": "this is taken from the envoy website",
    "start": "67760",
    "end": "70720"
  },
  {
    "text": "so i'm sure there's much more in this",
    "start": "70720",
    "end": "72159"
  },
  {
    "text": "list and it's also used by a bunch of",
    "start": "72159",
    "end": "74159"
  },
  {
    "text": "different projects",
    "start": "74159",
    "end": "75439"
  },
  {
    "text": "so you'll see here if i move myself",
    "start": "75439",
    "end": "79040"
  },
  {
    "text": "all these different projects are",
    "start": "79040",
    "end": "80400"
  },
  {
    "text": "leveraging on under the hood",
    "start": "80400",
    "end": "82400"
  },
  {
    "text": "again this is taken from from the",
    "start": "82400",
    "end": "83600"
  },
  {
    "text": "community website",
    "start": "83600",
    "end": "86400"
  },
  {
    "text": "so let's dig into some core concepts and",
    "start": "86400",
    "end": "88320"
  },
  {
    "text": "terminology in",
    "start": "88320",
    "end": "89840"
  },
  {
    "text": "an envoy and the first thing i want to",
    "start": "89840",
    "end": "92000"
  },
  {
    "text": "talk about is the difference between",
    "start": "92000",
    "end": "93520"
  },
  {
    "text": "upstream",
    "start": "93520",
    "end": "94159"
  },
  {
    "text": "and downstream so any request that's in",
    "start": "94159",
    "end": "97200"
  },
  {
    "text": "envoy and it routes somewhere to some",
    "start": "97200",
    "end": "99119"
  },
  {
    "text": "sort of endpoint or other place this is",
    "start": "99119",
    "end": "100640"
  },
  {
    "text": "what we call the upstream",
    "start": "100640",
    "end": "102720"
  },
  {
    "text": "and any request that comes to envoy from",
    "start": "102720",
    "end": "105119"
  },
  {
    "text": "outside",
    "start": "105119",
    "end": "105920"
  },
  {
    "text": "this is what we call the downstream so",
    "start": "105920",
    "end": "107600"
  },
  {
    "text": "requests will throw from downstream to",
    "start": "107600",
    "end": "109439"
  },
  {
    "text": "envoy",
    "start": "109439",
    "end": "110560"
  },
  {
    "text": "and then from envoy to an upstream it's",
    "start": "110560",
    "end": "113280"
  },
  {
    "text": "important to get this right at least for",
    "start": "113280",
    "end": "114320"
  },
  {
    "text": "the next 20 minutes just so we're all on",
    "start": "114320",
    "end": "115680"
  },
  {
    "text": "the same page",
    "start": "115680",
    "end": "117040"
  },
  {
    "text": "but this is what no envelope says",
    "start": "117040",
    "end": "118159"
  },
  {
    "text": "upstream or downstream this is what they",
    "start": "118159",
    "end": "119920"
  },
  {
    "text": "mean",
    "start": "119920",
    "end": "122159"
  },
  {
    "text": "okay so we talked about downstream the",
    "start": "122479",
    "end": "124640"
  },
  {
    "text": "first thing we're going to introduce is",
    "start": "124640",
    "end": "125840"
  },
  {
    "text": "a listener",
    "start": "125840",
    "end": "126719"
  },
  {
    "text": "and a listener is a named network",
    "start": "126719",
    "end": "128319"
  },
  {
    "text": "location",
    "start": "128319",
    "end": "130800"
  },
  {
    "text": "and it's it's what you know downstream",
    "start": "130800",
    "end": "132720"
  },
  {
    "text": "clients connect to",
    "start": "132720",
    "end": "134000"
  },
  {
    "text": "this will be a tcp or a udb connection",
    "start": "134000",
    "end": "136959"
  },
  {
    "text": "and then you can also apply",
    "start": "136959",
    "end": "138160"
  },
  {
    "text": "filters to this and chain them together",
    "start": "138160",
    "end": "140000"
  },
  {
    "text": "so filters in envoy are sort of the",
    "start": "140000",
    "end": "142400"
  },
  {
    "text": "extension magic",
    "start": "142400",
    "end": "143520"
  },
  {
    "text": "they'll let you take these tcp",
    "start": "143520",
    "end": "145360"
  },
  {
    "text": "connections and you can do different",
    "start": "145360",
    "end": "146800"
  },
  {
    "text": "things with them so",
    "start": "146800",
    "end": "148080"
  },
  {
    "text": "in our demo we're going to go build out",
    "start": "148080",
    "end": "149520"
  },
  {
    "text": "you know an l7 or http type",
    "start": "149520",
    "end": "151920"
  },
  {
    "text": "network proxy which is kind of what",
    "start": "151920",
    "end": "153519"
  },
  {
    "text": "contour is",
    "start": "153519",
    "end": "155040"
  },
  {
    "text": "with that we'll be able to take the",
    "start": "155040",
    "end": "157120"
  },
  {
    "text": "cptcp connection",
    "start": "157120",
    "end": "158879"
  },
  {
    "text": "run it through a filter and that filter",
    "start": "158879",
    "end": "160319"
  },
  {
    "text": "will then make it turn that into http",
    "start": "160319",
    "end": "162800"
  },
  {
    "text": "headers and requests and responses",
    "start": "162800",
    "end": "165040"
  },
  {
    "text": "and so it'll make us easier to do this",
    "start": "165040",
    "end": "166800"
  },
  {
    "text": "different type of l7 routing",
    "start": "166800",
    "end": "168720"
  },
  {
    "text": "there's a lot more to filters and filter",
    "start": "168720",
    "end": "170319"
  },
  {
    "text": "chains which you can dig into that on",
    "start": "170319",
    "end": "172160"
  },
  {
    "text": "your own",
    "start": "172160",
    "end": "172959"
  },
  {
    "text": "again just to introduce that these are",
    "start": "172959",
    "end": "174400"
  },
  {
    "text": "concepts that you can apply to your",
    "start": "174400",
    "end": "176000"
  },
  {
    "text": "your your server all right now that we",
    "start": "176000",
    "end": "179040"
  },
  {
    "text": "have that we have routes so routes",
    "start": "179040",
    "end": "180800"
  },
  {
    "text": "are results of listeners so listeners",
    "start": "180800",
    "end": "183360"
  },
  {
    "text": "will then call",
    "start": "183360",
    "end": "184080"
  },
  {
    "text": "different routes so again in our in our",
    "start": "184080",
    "end": "185599"
  },
  {
    "text": "l7 our model",
    "start": "185599",
    "end": "187360"
  },
  {
    "text": "we're going to have a bunch of different",
    "start": "187360",
    "end": "188640"
  },
  {
    "text": "virtual hosts that we can route to",
    "start": "188640",
    "end": "190879"
  },
  {
    "text": "so again you could have you know steve",
    "start": "190879",
    "end": "192319"
  },
  {
    "text": "silke.com",
    "start": "192319",
    "end": "194080"
  },
  {
    "text": "and you know vmware.com has two",
    "start": "194080",
    "end": "196319"
  },
  {
    "text": "different virtual hosts and from there i",
    "start": "196319",
    "end": "198000"
  },
  {
    "text": "can have them route different places",
    "start": "198000",
    "end": "200319"
  },
  {
    "text": "i can also you know modify the headers",
    "start": "200319",
    "end": "202000"
  },
  {
    "text": "on each type and and do a bunch of",
    "start": "202000",
    "end": "203599"
  },
  {
    "text": "different things so",
    "start": "203599",
    "end": "204720"
  },
  {
    "text": "again this is this is super quick and",
    "start": "204720",
    "end": "206640"
  },
  {
    "text": "not very much but then just",
    "start": "206640",
    "end": "208319"
  },
  {
    "text": "just to introduce that these things",
    "start": "208319",
    "end": "209920"
  },
  {
    "text": "called routes are what makes you decide",
    "start": "209920",
    "end": "212159"
  },
  {
    "text": "where things should route within your",
    "start": "212159",
    "end": "213599"
  },
  {
    "text": "within your cluster",
    "start": "213599",
    "end": "216400"
  },
  {
    "text": "now once you have a route and you're",
    "start": "216799",
    "end": "218080"
  },
  {
    "text": "going to route to a certain place and",
    "start": "218080",
    "end": "219840"
  },
  {
    "text": "we're going to route to clusters",
    "start": "219840",
    "end": "221440"
  },
  {
    "text": "and a cluster in envoy is a group of",
    "start": "221440",
    "end": "223200"
  },
  {
    "text": "logically similar upstream hosts",
    "start": "223200",
    "end": "226000"
  },
  {
    "text": "so i always think of this as kubernetes",
    "start": "226000",
    "end": "228080"
  },
  {
    "text": "right kubernetes has",
    "start": "228080",
    "end": "229680"
  },
  {
    "text": "uh services and to me a service is like",
    "start": "229680",
    "end": "231519"
  },
  {
    "text": "a cluster where it's just a name",
    "start": "231519",
    "end": "233439"
  },
  {
    "text": "and then it points to different set of",
    "start": "233439",
    "end": "235040"
  },
  {
    "text": "endpoints an envoy is the same way so",
    "start": "235040",
    "end": "237360"
  },
  {
    "text": "envoy has again",
    "start": "237360",
    "end": "238959"
  },
  {
    "text": "it's a it's a cluster which has members",
    "start": "238959",
    "end": "241120"
  },
  {
    "text": "and members are discovered via service",
    "start": "241120",
    "end": "242879"
  },
  {
    "text": "discovery",
    "start": "242879",
    "end": "243920"
  },
  {
    "text": "and there are a few ways that you can",
    "start": "243920",
    "end": "244879"
  },
  {
    "text": "implement that service discovery so the",
    "start": "244879",
    "end": "247120"
  },
  {
    "text": "first way is you can just be static",
    "start": "247120",
    "end": "248720"
  },
  {
    "text": "right you can define a cluster and",
    "start": "248720",
    "end": "250480"
  },
  {
    "text": "define all of the",
    "start": "250480",
    "end": "252400"
  },
  {
    "text": "endpoints that exist in that cluster and",
    "start": "252400",
    "end": "254239"
  },
  {
    "text": "then move along",
    "start": "254239",
    "end": "256400"
  },
  {
    "text": "you can use dns and you can use strict",
    "start": "256400",
    "end": "258239"
  },
  {
    "text": "or logical and they're similar in a few",
    "start": "258239",
    "end": "260479"
  },
  {
    "text": "ways that they both",
    "start": "260479",
    "end": "262160"
  },
  {
    "text": "look up endpoints dynamically or",
    "start": "262160",
    "end": "263919"
  },
  {
    "text": "asynchronously",
    "start": "263919",
    "end": "265440"
  },
  {
    "text": "but strict will look for all the",
    "start": "265440",
    "end": "266800"
  },
  {
    "text": "endpoints that resolve from a dns query",
    "start": "266800",
    "end": "269120"
  },
  {
    "text": "so say three come back from a query for",
    "start": "269120",
    "end": "271280"
  },
  {
    "text": "a dns entry",
    "start": "271280",
    "end": "272639"
  },
  {
    "text": "envy will then say all right there's",
    "start": "272639",
    "end": "273840"
  },
  {
    "text": "three members in this cluster and it'll",
    "start": "273840",
    "end": "275360"
  },
  {
    "text": "load balance across those three",
    "start": "275360",
    "end": "276639"
  },
  {
    "text": "different endpoints",
    "start": "276639",
    "end": "278080"
  },
  {
    "text": "now logical we'll use um similarly it'll",
    "start": "278080",
    "end": "280800"
  },
  {
    "text": "just as you can see look up the at ip",
    "start": "280800",
    "end": "282720"
  },
  {
    "text": "addresses",
    "start": "282720",
    "end": "283520"
  },
  {
    "text": "but it'll use the first dns entry as its",
    "start": "283520",
    "end": "287120"
  },
  {
    "text": "result so it'll just proxy out to that",
    "start": "287120",
    "end": "288880"
  },
  {
    "text": "one initially and not without load",
    "start": "288880",
    "end": "290320"
  },
  {
    "text": "balancing over all of the endpoints in",
    "start": "290320",
    "end": "292080"
  },
  {
    "text": "that back end",
    "start": "292080",
    "end": "293840"
  },
  {
    "text": "we can have original destination i'm not",
    "start": "293840",
    "end": "295680"
  },
  {
    "text": "going to introduce that today",
    "start": "295680",
    "end": "297919"
  },
  {
    "text": "we'll skip through that and there's also",
    "start": "297919",
    "end": "299040"
  },
  {
    "text": "another one we're going to introduce",
    "start": "299040",
    "end": "299919"
  },
  {
    "text": "we'll skip as well",
    "start": "299919",
    "end": "301440"
  },
  {
    "text": "but the one i want to really focus on is",
    "start": "301440",
    "end": "303039"
  },
  {
    "text": "this thing called endpoint discovery",
    "start": "303039",
    "end": "304479"
  },
  {
    "text": "service",
    "start": "304479",
    "end": "305199"
  },
  {
    "text": "or eds this is our first xds kind of",
    "start": "305199",
    "end": "307440"
  },
  {
    "text": "protocol that we'll introduce so for",
    "start": "307440",
    "end": "310320"
  },
  {
    "text": "clusters we can have again we can",
    "start": "310320",
    "end": "312160"
  },
  {
    "text": "statically define the members or we can",
    "start": "312160",
    "end": "314400"
  },
  {
    "text": "have the the members be defined by",
    "start": "314400",
    "end": "316160"
  },
  {
    "text": "another lookup service",
    "start": "316160",
    "end": "317600"
  },
  {
    "text": "so kind of like how dns is implemented",
    "start": "317600",
    "end": "319440"
  },
  {
    "text": "this will be a service within envoy that",
    "start": "319440",
    "end": "321360"
  },
  {
    "text": "we can then",
    "start": "321360",
    "end": "322160"
  },
  {
    "text": "feed in the members of that cluster so",
    "start": "322160",
    "end": "324400"
  },
  {
    "text": "eds is what we're going to do today in",
    "start": "324400",
    "end": "325840"
  },
  {
    "text": "our demo",
    "start": "325840",
    "end": "326560"
  },
  {
    "text": "and again i mentioned you can have",
    "start": "326560",
    "end": "327680"
  },
  {
    "text": "custom but again we're not going to get",
    "start": "327680",
    "end": "329120"
  },
  {
    "text": "into that",
    "start": "329120",
    "end": "331440"
  },
  {
    "text": "all right so now that i have these core",
    "start": "331840",
    "end": "333120"
  },
  {
    "text": "concepts i need a way to configure envoy",
    "start": "333120",
    "end": "335440"
  },
  {
    "text": "with these",
    "start": "335440",
    "end": "336240"
  },
  {
    "text": "these types right these routes and",
    "start": "336240",
    "end": "337600"
  },
  {
    "text": "listeners and clusters etc",
    "start": "337600",
    "end": "340000"
  },
  {
    "text": "so there's a couple ways you can do this",
    "start": "340000",
    "end": "341520"
  },
  {
    "text": "so the first way is to implement a",
    "start": "341520",
    "end": "343520"
  },
  {
    "text": "static file",
    "start": "343520",
    "end": "344479"
  },
  {
    "text": "so i can just go build a file program in",
    "start": "344479",
    "end": "347199"
  },
  {
    "text": "all of the different routes and",
    "start": "347199",
    "end": "348320"
  },
  {
    "text": "listeners and all the things that i want",
    "start": "348320",
    "end": "350000"
  },
  {
    "text": "and pass that off to envoy on we will",
    "start": "350000",
    "end": "352240"
  },
  {
    "text": "load that file in and then it will serve",
    "start": "352240",
    "end": "353600"
  },
  {
    "text": "traffic based on that",
    "start": "353600",
    "end": "356160"
  },
  {
    "text": "i can also have a place on a file system",
    "start": "356160",
    "end": "358080"
  },
  {
    "text": "so i can tell envoy hey look in this",
    "start": "358080",
    "end": "359520"
  },
  {
    "text": "directory for your files",
    "start": "359520",
    "end": "360960"
  },
  {
    "text": "and it'll load them in dynamically from",
    "start": "360960",
    "end": "362560"
  },
  {
    "text": "there",
    "start": "362560",
    "end": "364560"
  },
  {
    "text": "i can use the rest endpoints for my",
    "start": "364560",
    "end": "365919"
  },
  {
    "text": "management server or i can also use grpc",
    "start": "365919",
    "end": "369360"
  },
  {
    "text": "so this is what we're going to do today",
    "start": "369360",
    "end": "371039"
  },
  {
    "text": "so grpc is has an advantage of a rest is",
    "start": "371039",
    "end": "373440"
  },
  {
    "text": "that rest has the poll right and it's",
    "start": "373440",
    "end": "375039"
  },
  {
    "text": "going to be slow and it's got a lot of",
    "start": "375039",
    "end": "376240"
  },
  {
    "text": "overhead because it's always polling for",
    "start": "376240",
    "end": "377600"
  },
  {
    "text": "traffic",
    "start": "377600",
    "end": "378880"
  },
  {
    "text": "grpc is a rich connection right so i can",
    "start": "378880",
    "end": "381199"
  },
  {
    "text": "stream changes",
    "start": "381199",
    "end": "382080"
  },
  {
    "text": "bi-directionally uh very easily so",
    "start": "382080",
    "end": "384240"
  },
  {
    "text": "that's what we're gonna implement today",
    "start": "384240",
    "end": "385360"
  },
  {
    "text": "in our xds",
    "start": "385360",
    "end": "386639"
  },
  {
    "text": "example and there's two ways to",
    "start": "386639",
    "end": "389280"
  },
  {
    "text": "implement these management servers",
    "start": "389280",
    "end": "390639"
  },
  {
    "text": "so the first one is called state of the",
    "start": "390639",
    "end": "392080"
  },
  {
    "text": "world and the second one is called delta",
    "start": "392080",
    "end": "394240"
  },
  {
    "text": "so state of the world says hey say i",
    "start": "394240",
    "end": "396240"
  },
  {
    "text": "have nine clusters in my",
    "start": "396240",
    "end": "397600"
  },
  {
    "text": "in my configuration and i add a tenth",
    "start": "397600",
    "end": "400080"
  },
  {
    "text": "cluster",
    "start": "400080",
    "end": "401199"
  },
  {
    "text": "what the management server is going to",
    "start": "401199",
    "end": "402400"
  },
  {
    "text": "do is it's going to pass down all 10",
    "start": "402400",
    "end": "404240"
  },
  {
    "text": "clusters to envoy and say hey",
    "start": "404240",
    "end": "406160"
  },
  {
    "text": "envoy here's the state of the world this",
    "start": "406160",
    "end": "407759"
  },
  {
    "text": "is all the clusters that i know about",
    "start": "407759",
    "end": "409759"
  },
  {
    "text": "um and so this is what you should use",
    "start": "409759",
    "end": "411199"
  },
  {
    "text": "your configuration against and it works",
    "start": "411199",
    "end": "412639"
  },
  {
    "text": "for all the different types right",
    "start": "412639",
    "end": "414880"
  },
  {
    "text": "now delta is going to work like you",
    "start": "414880",
    "end": "416240"
  },
  {
    "text": "might imagine instead of it sending all",
    "start": "416240",
    "end": "418080"
  },
  {
    "text": "10 clusters down to envoy it's going to",
    "start": "418080",
    "end": "420080"
  },
  {
    "text": "send just the one cluster that was added",
    "start": "420080",
    "end": "422479"
  },
  {
    "text": "same way if it was deleted it would",
    "start": "422479",
    "end": "423520"
  },
  {
    "text": "delete one cluster and send that one",
    "start": "423520",
    "end": "425840"
  },
  {
    "text": "deletion down",
    "start": "425840",
    "end": "427440"
  },
  {
    "text": "if a cluster was deleted in the state of",
    "start": "427440",
    "end": "428880"
  },
  {
    "text": "the world example it would just you know",
    "start": "428880",
    "end": "430880"
  },
  {
    "text": "emit that from the list so it would just",
    "start": "430880",
    "end": "432639"
  },
  {
    "text": "only send eight clusters down instead of",
    "start": "432639",
    "end": "434240"
  },
  {
    "text": "nine",
    "start": "434240",
    "end": "434960"
  },
  {
    "text": "and then onward would say hey this",
    "start": "434960",
    "end": "436240"
  },
  {
    "text": "cluster is missing and it would you know",
    "start": "436240",
    "end": "437840"
  },
  {
    "text": "delete it out of its configuration",
    "start": "437840",
    "end": "441199"
  },
  {
    "text": "all right so let's talk about xds we've",
    "start": "441280",
    "end": "443039"
  },
  {
    "text": "kind of hit around it a little bit but",
    "start": "443039",
    "end": "445120"
  },
  {
    "text": "we've introduced these different things",
    "start": "445120",
    "end": "446479"
  },
  {
    "text": "called listeners called routes clusters",
    "start": "446479",
    "end": "448400"
  },
  {
    "text": "and",
    "start": "448400",
    "end": "448639"
  },
  {
    "text": "endpoints right well they each have a",
    "start": "448639",
    "end": "450720"
  },
  {
    "text": "different discovery service or xds",
    "start": "450720",
    "end": "452800"
  },
  {
    "text": "protocol that we can implement",
    "start": "452800",
    "end": "454960"
  },
  {
    "text": "so over grpc we can have each one of",
    "start": "454960",
    "end": "457280"
  },
  {
    "text": "these return",
    "start": "457280",
    "end": "458319"
  },
  {
    "text": "a list of listeners routes clusters or",
    "start": "458319",
    "end": "460400"
  },
  {
    "text": "endpoints just like we just said",
    "start": "460400",
    "end": "462240"
  },
  {
    "text": "and if you strip off the first name",
    "start": "462240",
    "end": "463759"
  },
  {
    "text": "replace it with an x you can see how",
    "start": "463759",
    "end": "465280"
  },
  {
    "text": "this is we get this name",
    "start": "465280",
    "end": "467120"
  },
  {
    "text": "because there's a bunch of different",
    "start": "467120",
    "end": "468000"
  },
  {
    "text": "protocols that exist that you can",
    "start": "468000",
    "end": "469360"
  },
  {
    "text": "implement again these are just four that",
    "start": "469360",
    "end": "471120"
  },
  {
    "text": "i'm introducing there are more",
    "start": "471120",
    "end": "472639"
  },
  {
    "text": "and i encourage you to go research this",
    "start": "472639",
    "end": "474080"
  },
  {
    "text": "more afterwards",
    "start": "474080",
    "end": "476160"
  },
  {
    "text": "but essentially my point here is i want",
    "start": "476160",
    "end": "478000"
  },
  {
    "text": "to get across is that this is where you",
    "start": "478000",
    "end": "479599"
  },
  {
    "text": "get xds from",
    "start": "479599",
    "end": "482160"
  },
  {
    "text": "now there are four different variants of",
    "start": "482160",
    "end": "483599"
  },
  {
    "text": "xds just like we talked about",
    "start": "483599",
    "end": "486400"
  },
  {
    "text": "we have the state of the world as well",
    "start": "486400",
    "end": "487840"
  },
  {
    "text": "as incremental we can also decide on how",
    "start": "487840",
    "end": "490080"
  },
  {
    "text": "we want to send out or set up our grpc",
    "start": "490080",
    "end": "492319"
  },
  {
    "text": "streams",
    "start": "492319",
    "end": "493440"
  },
  {
    "text": "so the default way is to have a grpc",
    "start": "493440",
    "end": "495360"
  },
  {
    "text": "stream per resource type",
    "start": "495360",
    "end": "497520"
  },
  {
    "text": "so for listeners clusters routes and",
    "start": "497520",
    "end": "499840"
  },
  {
    "text": "endpoints i'll have one stream for each",
    "start": "499840",
    "end": "501520"
  },
  {
    "text": "type so i'll have four total",
    "start": "501520",
    "end": "503120"
  },
  {
    "text": "and that's in this top version now",
    "start": "503120",
    "end": "505520"
  },
  {
    "text": "alternatively i can implement ads",
    "start": "505520",
    "end": "507599"
  },
  {
    "text": "which is aggregated discovery service an",
    "start": "507599",
    "end": "510479"
  },
  {
    "text": "ads lets me have basically",
    "start": "510479",
    "end": "512000"
  },
  {
    "text": "one stream for all those different",
    "start": "512000",
    "end": "513760"
  },
  {
    "text": "resource types and i can",
    "start": "513760",
    "end": "515360"
  },
  {
    "text": "i can send traffic across all different",
    "start": "515360",
    "end": "517039"
  },
  {
    "text": "types over that one stream",
    "start": "517039",
    "end": "519440"
  },
  {
    "text": "for today's example and today's purposes",
    "start": "519440",
    "end": "521039"
  },
  {
    "text": "we're going to use the simple way which",
    "start": "521039",
    "end": "522240"
  },
  {
    "text": "is",
    "start": "522240",
    "end": "522479"
  },
  {
    "text": "a stream per resource type as well as",
    "start": "522479",
    "end": "524480"
  },
  {
    "text": "the state of the world type updates",
    "start": "524480",
    "end": "528000"
  },
  {
    "text": "so having all that background right and",
    "start": "528000",
    "end": "530080"
  },
  {
    "text": "that's a lot",
    "start": "530080",
    "end": "531360"
  },
  {
    "text": "all these different concepts let's take",
    "start": "531360",
    "end": "532880"
  },
  {
    "text": "all of that and put it together and",
    "start": "532880",
    "end": "534160"
  },
  {
    "text": "let's go build an example",
    "start": "534160",
    "end": "535600"
  },
  {
    "text": "and we'll see what this looks like if",
    "start": "535600",
    "end": "536880"
  },
  {
    "text": "you had to go build this yourself",
    "start": "536880",
    "end": "539279"
  },
  {
    "text": "so this diagram here is going to be what",
    "start": "539279",
    "end": "540880"
  },
  {
    "text": "we're going to actually demonstrate",
    "start": "540880",
    "end": "542160"
  },
  {
    "text": "today so",
    "start": "542160",
    "end": "543120"
  },
  {
    "text": "we first need an envoy obviously an",
    "start": "543120",
    "end": "545680"
  },
  {
    "text": "envoy will then",
    "start": "545680",
    "end": "546800"
  },
  {
    "text": "get past a bootstrap config right and",
    "start": "546800",
    "end": "549680"
  },
  {
    "text": "this is a static file that will pass the",
    "start": "549680",
    "end": "551440"
  },
  {
    "text": "on void and what what's in that",
    "start": "551440",
    "end": "552720"
  },
  {
    "text": "bootstrap config essentially",
    "start": "552720",
    "end": "554480"
  },
  {
    "text": "is anything you want to preload to",
    "start": "554480",
    "end": "556000"
  },
  {
    "text": "onboard right so we can set up static",
    "start": "556000",
    "end": "557920"
  },
  {
    "text": "cluster",
    "start": "557920",
    "end": "558399"
  },
  {
    "text": "static listeners any kind of static",
    "start": "558399",
    "end": "560480"
  },
  {
    "text": "resource in that file",
    "start": "560480",
    "end": "562320"
  },
  {
    "text": "then we can also reference dynamic",
    "start": "562320",
    "end": "563920"
  },
  {
    "text": "resources that's what we're going to go",
    "start": "563920",
    "end": "565279"
  },
  {
    "text": "today",
    "start": "565279",
    "end": "566480"
  },
  {
    "text": "so dynamic resources basically will say",
    "start": "566480",
    "end": "568160"
  },
  {
    "text": "hey instead of you loading",
    "start": "568160",
    "end": "570000"
  },
  {
    "text": "my listeners and clusters and all those",
    "start": "570000",
    "end": "571519"
  },
  {
    "text": "different xts types",
    "start": "571519",
    "end": "573040"
  },
  {
    "text": "statically we're going to load them",
    "start": "573040",
    "end": "574080"
  },
  {
    "text": "dynamically and they're going to come",
    "start": "574080",
    "end": "575680"
  },
  {
    "text": "from this xds server here this box in",
    "start": "575680",
    "end": "577760"
  },
  {
    "text": "green",
    "start": "577760",
    "end": "579040"
  },
  {
    "text": "and what we'll do is we'll create a",
    "start": "579040",
    "end": "580160"
  },
  {
    "text": "cluster a static cluster which will",
    "start": "580160",
    "end": "581680"
  },
  {
    "text": "point to this xds server",
    "start": "581680",
    "end": "583760"
  },
  {
    "text": "so when envoy starts up it'll have",
    "start": "583760",
    "end": "585279"
  },
  {
    "text": "enough information to go look at that",
    "start": "585279",
    "end": "586959"
  },
  {
    "text": "cluster",
    "start": "586959",
    "end": "587839"
  },
  {
    "text": "and pull down all of this all of its",
    "start": "587839",
    "end": "589519"
  },
  {
    "text": "information dynamically",
    "start": "589519",
    "end": "591839"
  },
  {
    "text": "now what the xds server needs is it's",
    "start": "591839",
    "end": "593519"
  },
  {
    "text": "going to need some source information",
    "start": "593519",
    "end": "595120"
  },
  {
    "text": "right what is its source of truth in",
    "start": "595120",
    "end": "596640"
  },
  {
    "text": "terms of how it understands what routes",
    "start": "596640",
    "end": "598800"
  },
  {
    "text": "and clusters and endpoints it should",
    "start": "598800",
    "end": "600160"
  },
  {
    "text": "configure envoy with",
    "start": "600160",
    "end": "601920"
  },
  {
    "text": "this is going to vary depending on your",
    "start": "601920",
    "end": "603200"
  },
  {
    "text": "implementation so for contour",
    "start": "603200",
    "end": "605200"
  },
  {
    "text": "you know we run on kubernetes so",
    "start": "605200",
    "end": "606480"
  },
  {
    "text": "kubernetes is our source information so",
    "start": "606480",
    "end": "608399"
  },
  {
    "text": "contour looks for",
    "start": "608399",
    "end": "609760"
  },
  {
    "text": "things like services for endpoints for",
    "start": "609760",
    "end": "612160"
  },
  {
    "text": "secrets as well as ingress objects",
    "start": "612160",
    "end": "614640"
  },
  {
    "text": "it takes all that different from",
    "start": "614640",
    "end": "615760"
  },
  {
    "text": "information and it makes you know",
    "start": "615760",
    "end": "618000"
  },
  {
    "text": "envoy configuration and then fills in",
    "start": "618000",
    "end": "620000"
  },
  {
    "text": "those envoy",
    "start": "620000",
    "end": "621519"
  },
  {
    "text": "xds caches and then passes those down to",
    "start": "621519",
    "end": "624480"
  },
  {
    "text": "envoy",
    "start": "624480",
    "end": "626560"
  },
  {
    "text": "so that is the nutshell what we're going",
    "start": "626560",
    "end": "628640"
  },
  {
    "text": "to do let's go ahead and",
    "start": "628640",
    "end": "631600"
  },
  {
    "text": "let's poke around so the first thing i",
    "start": "631600",
    "end": "634320"
  },
  {
    "text": "want to look at is this thing called go",
    "start": "634320",
    "end": "635600"
  },
  {
    "text": "control plane",
    "start": "635600",
    "end": "636560"
  },
  {
    "text": "right so go control plane is a project",
    "start": "636560",
    "end": "639120"
  },
  {
    "text": "in the envoy project organization",
    "start": "639120",
    "end": "641360"
  },
  {
    "text": "and it's it's a go implementation of the",
    "start": "641360",
    "end": "642959"
  },
  {
    "text": "data plane api so",
    "start": "642959",
    "end": "644640"
  },
  {
    "text": "the data plane in envoy is a bunch of",
    "start": "644640",
    "end": "646399"
  },
  {
    "text": "protobufs that represent all those",
    "start": "646399",
    "end": "647920"
  },
  {
    "text": "objects we just we just described about",
    "start": "647920",
    "end": "649839"
  },
  {
    "text": "um in the last couple slides but",
    "start": "649839",
    "end": "653120"
  },
  {
    "text": "this one they have they're all ghost",
    "start": "653120",
    "end": "654800"
  },
  {
    "text": "trucks so you can import them into your",
    "start": "654800",
    "end": "656240"
  },
  {
    "text": "go project",
    "start": "656240",
    "end": "657200"
  },
  {
    "text": "and use them from there the second thing",
    "start": "657200",
    "end": "659600"
  },
  {
    "text": "that this project gives you is it gives",
    "start": "659600",
    "end": "660959"
  },
  {
    "text": "you",
    "start": "660959",
    "end": "662079"
  },
  {
    "text": "a sample implementation xds server which",
    "start": "662079",
    "end": "664480"
  },
  {
    "text": "we're going to utilize today",
    "start": "664480",
    "end": "665680"
  },
  {
    "text": "so instead of you having to go build out",
    "start": "665680",
    "end": "667680"
  },
  {
    "text": "all the grpc connections and all the",
    "start": "667680",
    "end": "669519"
  },
  {
    "text": "extra overhead and routing",
    "start": "669519",
    "end": "671440"
  },
  {
    "text": "you can leverage the the implementation",
    "start": "671440",
    "end": "673279"
  },
  {
    "text": "here in this project",
    "start": "673279",
    "end": "674720"
  },
  {
    "text": "to go ahead and build your own control",
    "start": "674720",
    "end": "676079"
  },
  {
    "text": "plane if you like now you can read",
    "start": "676079",
    "end": "678000"
  },
  {
    "text": "through a bunch of things here but here",
    "start": "678000",
    "end": "679279"
  },
  {
    "text": "at the bottom",
    "start": "679279",
    "end": "680160"
  },
  {
    "text": "there is this example server so shout",
    "start": "680160",
    "end": "682640"
  },
  {
    "text": "out to this user here who helped build",
    "start": "682640",
    "end": "684160"
  },
  {
    "text": "this out",
    "start": "684160",
    "end": "684880"
  },
  {
    "text": "i know we used to have to look at unit",
    "start": "684880",
    "end": "686959"
  },
  {
    "text": "tests before to get a good example so",
    "start": "686959",
    "end": "688560"
  },
  {
    "text": "this is this is great so",
    "start": "688560",
    "end": "690240"
  },
  {
    "text": "this will give you a lot of enough",
    "start": "690240",
    "end": "692880"
  },
  {
    "text": "information to spin up your own server",
    "start": "692880",
    "end": "694399"
  },
  {
    "text": "as it says right",
    "start": "694399",
    "end": "695680"
  },
  {
    "text": "um so i'm going to show you basically",
    "start": "695680",
    "end": "697279"
  },
  {
    "text": "the same exact example i took this and",
    "start": "697279",
    "end": "698800"
  },
  {
    "text": "reused it",
    "start": "698800",
    "end": "699600"
  },
  {
    "text": "but what i did was i added a little bit",
    "start": "699600",
    "end": "702240"
  },
  {
    "text": "more dynamic",
    "start": "702240",
    "end": "703200"
  },
  {
    "text": "configuration so instead of it being",
    "start": "703200",
    "end": "704720"
  },
  {
    "text": "statically configured i have my",
    "start": "704720",
    "end": "706399"
  },
  {
    "text": "configuration come from a yaml file",
    "start": "706399",
    "end": "708640"
  },
  {
    "text": "right and we'll look at that next here",
    "start": "708640",
    "end": "711120"
  },
  {
    "text": "so this is my project i'll have the link",
    "start": "711120",
    "end": "712480"
  },
  {
    "text": "to this at the end of the slides if you",
    "start": "712480",
    "end": "713839"
  },
  {
    "text": "want to check it out yourself so",
    "start": "713839",
    "end": "716000"
  },
  {
    "text": "in here what i have is a main.go and to",
    "start": "716000",
    "end": "718880"
  },
  {
    "text": "get started what we'll do is we'll go",
    "start": "718880",
    "end": "720160"
  },
  {
    "text": "ahead and",
    "start": "720160",
    "end": "721600"
  },
  {
    "text": "create a cache a snapshot cache now this",
    "start": "721600",
    "end": "724639"
  },
  {
    "text": "cache is the core of this go control",
    "start": "724639",
    "end": "726240"
  },
  {
    "text": "plane",
    "start": "726240",
    "end": "727040"
  },
  {
    "text": "you know xds server the snapshot cache",
    "start": "727040",
    "end": "729839"
  },
  {
    "text": "holds",
    "start": "729839",
    "end": "730320"
  },
  {
    "text": "all of the different snapshots that",
    "start": "730320",
    "end": "732560"
  },
  {
    "text": "exist that we've passed down to onboard",
    "start": "732560",
    "end": "734320"
  },
  {
    "text": "so remember we're talking about setting",
    "start": "734320",
    "end": "735680"
  },
  {
    "text": "this",
    "start": "735680",
    "end": "736240"
  },
  {
    "text": "state of the world set of set",
    "start": "736240",
    "end": "738639"
  },
  {
    "text": "configuration to envoy",
    "start": "738639",
    "end": "740720"
  },
  {
    "text": "so what we'll do is we'll go ahead and",
    "start": "740720",
    "end": "742000"
  },
  {
    "text": "look at build up our configuration based",
    "start": "742000",
    "end": "744160"
  },
  {
    "text": "on our source information",
    "start": "744160",
    "end": "745519"
  },
  {
    "text": "and we'll build out a list of listeners",
    "start": "745519",
    "end": "747519"
  },
  {
    "text": "and routes and clusters and endpoints",
    "start": "747519",
    "end": "750160"
  },
  {
    "text": "and then we'll create a snapshot out of",
    "start": "750160",
    "end": "751600"
  },
  {
    "text": "that and we'll pass that snapshot down",
    "start": "751600",
    "end": "753279"
  },
  {
    "text": "to envoy and then onward we'll load that",
    "start": "753279",
    "end": "755200"
  },
  {
    "text": "in",
    "start": "755200",
    "end": "755680"
  },
  {
    "text": "so whenever this whenever those any of",
    "start": "755680",
    "end": "757600"
  },
  {
    "text": "those different objects change",
    "start": "757600",
    "end": "759200"
  },
  {
    "text": "we'll generate a new set of caches we'll",
    "start": "759200",
    "end": "761440"
  },
  {
    "text": "make a new snapshot and then we'll pass",
    "start": "761440",
    "end": "763040"
  },
  {
    "text": "that down to onboard until i'm like hey",
    "start": "763040",
    "end": "764959"
  },
  {
    "text": "here's a new version go load this in",
    "start": "764959",
    "end": "766880"
  },
  {
    "text": "android will parse that in",
    "start": "766880",
    "end": "768160"
  },
  {
    "text": "that's essentially what we're trying to",
    "start": "768160",
    "end": "769040"
  },
  {
    "text": "do here so like i said i have this",
    "start": "769040",
    "end": "771920"
  },
  {
    "text": "config file that we created and this",
    "start": "771920",
    "end": "773440"
  },
  {
    "text": "config file here is just to help us",
    "start": "773440",
    "end": "775360"
  },
  {
    "text": "you know configure this server a little",
    "start": "775360",
    "end": "776720"
  },
  {
    "text": "dynamic more dynamically",
    "start": "776720",
    "end": "778720"
  },
  {
    "text": "this server has um i guess this is my",
    "start": "778720",
    "end": "781040"
  },
  {
    "text": "source information again for contour",
    "start": "781040",
    "end": "782560"
  },
  {
    "text": "and others this could be kubernetes this",
    "start": "782560",
    "end": "784000"
  },
  {
    "text": "could be again depending on your",
    "start": "784000",
    "end": "784959"
  },
  {
    "text": "environment this is whatever it needs to",
    "start": "784959",
    "end": "786560"
  },
  {
    "text": "be",
    "start": "786560",
    "end": "787200"
  },
  {
    "text": "but for me this is going to be this",
    "start": "787200",
    "end": "788560"
  },
  {
    "text": "static file here",
    "start": "788560",
    "end": "791440"
  },
  {
    "text": "okay so to watch this file for changes",
    "start": "791440",
    "end": "794160"
  },
  {
    "text": "we're going to go set up this watcher",
    "start": "794160",
    "end": "795839"
  },
  {
    "text": "so we first created the snapshot cache",
    "start": "795839",
    "end": "798160"
  },
  {
    "text": "we're going to create a watcher",
    "start": "798160",
    "end": "799279"
  },
  {
    "text": "and what the watcher does is anytime the",
    "start": "799279",
    "end": "800959"
  },
  {
    "text": "file changes we get a notification back",
    "start": "800959",
    "end": "803360"
  },
  {
    "text": "here over this channel",
    "start": "803360",
    "end": "804560"
  },
  {
    "text": "that's all we're doing so we're getting",
    "start": "804560",
    "end": "805680"
  },
  {
    "text": "a callback to say hey the file changed",
    "start": "805680",
    "end": "808399"
  },
  {
    "text": "and essentially that's going to be our",
    "start": "808399",
    "end": "809360"
  },
  {
    "text": "signal to go rebuild a new configuration",
    "start": "809360",
    "end": "812560"
  },
  {
    "text": "now we have that set up we're going to",
    "start": "812560",
    "end": "813839"
  },
  {
    "text": "start up our xds server so here we're",
    "start": "813839",
    "end": "815680"
  },
  {
    "text": "going to go ahead and build the server",
    "start": "815680",
    "end": "817040"
  },
  {
    "text": "out",
    "start": "817040",
    "end": "817600"
  },
  {
    "text": "we're going to pass it the cache again",
    "start": "817600",
    "end": "819360"
  },
  {
    "text": "that was the snapshot cache we created",
    "start": "819360",
    "end": "820959"
  },
  {
    "text": "here in line 56.",
    "start": "820959",
    "end": "823120"
  },
  {
    "text": "now that we have that we'll go ahead and",
    "start": "823120",
    "end": "824240"
  },
  {
    "text": "run the server let me get the pass it up",
    "start": "824240",
    "end": "826240"
  },
  {
    "text": "port",
    "start": "826240",
    "end": "827360"
  },
  {
    "text": "and for us this will come from a flag",
    "start": "827360",
    "end": "829199"
  },
  {
    "text": "and we'll default to 9002",
    "start": "829199",
    "end": "832639"
  },
  {
    "text": "so let's go ahead and run this",
    "start": "832639",
    "end": "835759"
  },
  {
    "text": "okay so we ran the server you can see",
    "start": "837839",
    "end": "839120"
  },
  {
    "text": "we're listening on port 9002 like we",
    "start": "839120",
    "end": "840639"
  },
  {
    "text": "said",
    "start": "840639",
    "end": "841440"
  },
  {
    "text": "and here this debug line says this is",
    "start": "841440",
    "end": "843519"
  },
  {
    "text": "the snapshot we're gonna serve up",
    "start": "843519",
    "end": "845440"
  },
  {
    "text": "so here you can see we have some",
    "start": "845440",
    "end": "846880"
  },
  {
    "text": "information in here and what it is is",
    "start": "846880",
    "end": "848959"
  },
  {
    "text": "this information",
    "start": "848959",
    "end": "849680"
  },
  {
    "text": "matches our configuration file here so",
    "start": "849680",
    "end": "851839"
  },
  {
    "text": "if you can look in here you see we've",
    "start": "851839",
    "end": "853199"
  },
  {
    "text": "got this cluster name",
    "start": "853199",
    "end": "854240"
  },
  {
    "text": "echo and here i have let me move myself",
    "start": "854240",
    "end": "857040"
  },
  {
    "text": "over here for you",
    "start": "857040",
    "end": "858320"
  },
  {
    "text": "here we have this cluster named echo",
    "start": "858320",
    "end": "861360"
  },
  {
    "text": "and if we dig in we can see we've got a",
    "start": "861360",
    "end": "862720"
  },
  {
    "text": "listener zero and here we gotta listen",
    "start": "862720",
    "end": "864560"
  },
  {
    "text": "to zero so",
    "start": "864560",
    "end": "865600"
  },
  {
    "text": "the snapshot came from this file and",
    "start": "865600",
    "end": "868240"
  },
  {
    "text": "what happens is anytime we change",
    "start": "868240",
    "end": "870160"
  },
  {
    "text": "this file a new snapshot is generated so",
    "start": "870160",
    "end": "872560"
  },
  {
    "text": "let's take a look at how that happens so",
    "start": "872560",
    "end": "874240"
  },
  {
    "text": "here in this processor",
    "start": "874240",
    "end": "877360"
  },
  {
    "text": "you'll see here is we have this new",
    "start": "877519",
    "end": "879920"
  },
  {
    "text": "snapshot",
    "start": "879920",
    "end": "880880"
  },
  {
    "text": "i'm sorry this process file and when it",
    "start": "880880",
    "end": "883519"
  },
  {
    "text": "gets passed in is the file that changed",
    "start": "883519",
    "end": "885199"
  },
  {
    "text": "so the notifier again",
    "start": "885199",
    "end": "886480"
  },
  {
    "text": "sends us an event whenever the file",
    "start": "886480",
    "end": "888000"
  },
  {
    "text": "changes and tells us what file got",
    "start": "888000",
    "end": "889920"
  },
  {
    "text": "updated",
    "start": "889920",
    "end": "891040"
  },
  {
    "text": "so the first thing we do is we just",
    "start": "891040",
    "end": "892399"
  },
  {
    "text": "parse that yaml into a go struct",
    "start": "892399",
    "end": "894800"
  },
  {
    "text": "so out here i have this api and this api",
    "start": "894800",
    "end": "897839"
  },
  {
    "text": "defines",
    "start": "897839",
    "end": "898800"
  },
  {
    "text": "our struct in ingo",
    "start": "898800",
    "end": "902160"
  },
  {
    "text": "so coming back to our processor after we",
    "start": "902160",
    "end": "903839"
  },
  {
    "text": "parse that in what we do is we actually",
    "start": "903839",
    "end": "905279"
  },
  {
    "text": "go and generate",
    "start": "905279",
    "end": "907040"
  },
  {
    "text": "envoy types out of that that yaml file",
    "start": "907040",
    "end": "909839"
  },
  {
    "text": "so we'll go ahead and loop through every",
    "start": "909839",
    "end": "911440"
  },
  {
    "text": "listener that",
    "start": "911440",
    "end": "912000"
  },
  {
    "text": "exists and we'll go ahead and build a",
    "start": "912000",
    "end": "914560"
  },
  {
    "text": "set of listeners",
    "start": "914560",
    "end": "916959"
  },
  {
    "text": "right and we'll pass in the name of it",
    "start": "916959",
    "end": "918560"
  },
  {
    "text": "the routes and the address and the port",
    "start": "918560",
    "end": "920880"
  },
  {
    "text": "and then from there we'll build a set of",
    "start": "920880",
    "end": "922160"
  },
  {
    "text": "routes so here's our listener cache",
    "start": "922160",
    "end": "924959"
  },
  {
    "text": "and then here's our route cache then",
    "start": "924959",
    "end": "928079"
  },
  {
    "text": "we'll build out our cluster cache here",
    "start": "928079",
    "end": "930000"
  },
  {
    "text": "so we'll add all the clusters",
    "start": "930000",
    "end": "931519"
  },
  {
    "text": "and then we'll add all the endpoints so",
    "start": "931519",
    "end": "933920"
  },
  {
    "text": "essentially by time we get to this point",
    "start": "933920",
    "end": "935759"
  },
  {
    "text": "we have a cache full of listeners",
    "start": "935759",
    "end": "937759"
  },
  {
    "text": "endpoints",
    "start": "937759",
    "end": "938800"
  },
  {
    "text": "routes and clusters so now",
    "start": "938800",
    "end": "942560"
  },
  {
    "text": "after we build those all out we have",
    "start": "942560",
    "end": "944399"
  },
  {
    "text": "generated and since our point in time or",
    "start": "944399",
    "end": "946720"
  },
  {
    "text": "state of the world type cache",
    "start": "946720",
    "end": "948639"
  },
  {
    "text": "now we'll go generate a new snapshot and",
    "start": "948639",
    "end": "951040"
  },
  {
    "text": "what we'll do is we'll pass in a",
    "start": "951040",
    "end": "952240"
  },
  {
    "text": "snapshot version",
    "start": "952240",
    "end": "953600"
  },
  {
    "text": "so this will go increment our snapshot",
    "start": "953600",
    "end": "955600"
  },
  {
    "text": "version basically just",
    "start": "955600",
    "end": "956720"
  },
  {
    "text": "you know increment it by one from",
    "start": "956720",
    "end": "957839"
  },
  {
    "text": "whatever the previous one was",
    "start": "957839",
    "end": "960160"
  },
  {
    "text": "and then we'll also go ahead and select",
    "start": "960160",
    "end": "962880"
  },
  {
    "text": "my place",
    "start": "962880",
    "end": "963680"
  },
  {
    "text": "we'll go ahead and pass in the contents",
    "start": "963680",
    "end": "966240"
  },
  {
    "text": "now",
    "start": "966240",
    "end": "966959"
  },
  {
    "text": "this cache contents goes and converts my",
    "start": "966959",
    "end": "969839"
  },
  {
    "text": "local type that i have here into",
    "start": "969839",
    "end": "971759"
  },
  {
    "text": "envoy xds types so if we look at",
    "start": "971759",
    "end": "974560"
  },
  {
    "text": "something like",
    "start": "974560",
    "end": "975199"
  },
  {
    "text": "listeners you can see we have this",
    "start": "975199",
    "end": "978320"
  },
  {
    "text": "resources package",
    "start": "978320",
    "end": "979759"
  },
  {
    "text": "and this resources package goes and",
    "start": "979759",
    "end": "981440"
  },
  {
    "text": "builds a new resource type",
    "start": "981440",
    "end": "983600"
  },
  {
    "text": "called listener.listener now this type",
    "start": "983600",
    "end": "986240"
  },
  {
    "text": "are actually on void types so you see",
    "start": "986240",
    "end": "988000"
  },
  {
    "text": "here i'm into this listener protobuf",
    "start": "988000",
    "end": "989680"
  },
  {
    "text": "so again now we're digging into that go",
    "start": "989680",
    "end": "991120"
  },
  {
    "text": "control plane and now we have this",
    "start": "991120",
    "end": "992959"
  },
  {
    "text": "listener go struct",
    "start": "992959",
    "end": "994480"
  },
  {
    "text": "which lets us create envoy listeners",
    "start": "994480",
    "end": "997600"
  },
  {
    "text": "so we do is we go ahead and build out so",
    "start": "997600",
    "end": "999680"
  },
  {
    "text": "we'll go back in here",
    "start": "999680",
    "end": "1001279"
  },
  {
    "text": "we'll go build out a listener and one",
    "start": "1001279",
    "end": "1003680"
  },
  {
    "text": "thing that's interesting here is that",
    "start": "1003680",
    "end": "1004880"
  },
  {
    "text": "we'll say",
    "start": "1004880",
    "end": "1005360"
  },
  {
    "text": "we'll build out this filter chain right",
    "start": "1005360",
    "end": "1006959"
  },
  {
    "text": "here's where we're adding that http",
    "start": "1006959",
    "end": "1008720"
  },
  {
    "text": "connection manager and this is going to",
    "start": "1008720",
    "end": "1009759"
  },
  {
    "text": "give",
    "start": "1009759",
    "end": "1010000"
  },
  {
    "text": "us this l7 router so the same way in",
    "start": "1010000",
    "end": "1013279"
  },
  {
    "text": "here we have",
    "start": "1013279",
    "end": "1014639"
  },
  {
    "text": "routes so here's make route and again it",
    "start": "1014639",
    "end": "1016399"
  },
  {
    "text": "returns a route configuration",
    "start": "1016399",
    "end": "1018480"
  },
  {
    "text": "and this route you know has a match and",
    "start": "1018480",
    "end": "1020079"
  },
  {
    "text": "an action again these are envoy",
    "start": "1020079",
    "end": "1021839"
  },
  {
    "text": "specifics",
    "start": "1021839",
    "end": "1022880"
  },
  {
    "text": "but these are building out all the",
    "start": "1022880",
    "end": "1023920"
  },
  {
    "text": "different envoy prototypes",
    "start": "1023920",
    "end": "1026640"
  },
  {
    "text": "we can create endpoints here and we can",
    "start": "1026640",
    "end": "1028720"
  },
  {
    "text": "create clusters",
    "start": "1028720",
    "end": "1030720"
  },
  {
    "text": "so the processor goes and builds out a",
    "start": "1030720",
    "end": "1033038"
  },
  {
    "text": "cache of that yaml file",
    "start": "1033039",
    "end": "1035199"
  },
  {
    "text": "and then generates a new snapshot",
    "start": "1035199",
    "end": "1037038"
  },
  {
    "text": "against that type",
    "start": "1037039",
    "end": "1038319"
  },
  {
    "text": "converting all those different types",
    "start": "1038319",
    "end": "1039600"
  },
  {
    "text": "into envoy types",
    "start": "1039600",
    "end": "1041600"
  },
  {
    "text": "we then make sure that the snapshot's",
    "start": "1041600",
    "end": "1043038"
  },
  {
    "text": "consistent meaning do we have",
    "start": "1043039",
    "end": "1044959"
  },
  {
    "text": "all the routes referencing proper",
    "start": "1044959",
    "end": "1047438"
  },
  {
    "text": "clusters and so on",
    "start": "1047439",
    "end": "1049120"
  },
  {
    "text": "if it is consistent we'll go ahead and",
    "start": "1049120",
    "end": "1050640"
  },
  {
    "text": "create a new snapshot we'll set the",
    "start": "1050640",
    "end": "1052160"
  },
  {
    "text": "snapshot to envoy",
    "start": "1052160",
    "end": "1053679"
  },
  {
    "text": "and this is where we're actually going",
    "start": "1053679",
    "end": "1054640"
  },
  {
    "text": "to tell envoy hey go ahead and load in",
    "start": "1054640",
    "end": "1056960"
  },
  {
    "text": "this new snapshot",
    "start": "1056960",
    "end": "1058080"
  },
  {
    "text": "and once you have that new snapshot you",
    "start": "1058080",
    "end": "1059919"
  },
  {
    "text": "can then process your",
    "start": "1059919",
    "end": "1062320"
  },
  {
    "text": "update all your caches locally to get",
    "start": "1062320",
    "end": "1064080"
  },
  {
    "text": "the new configuration",
    "start": "1064080",
    "end": "1065679"
  },
  {
    "text": "so excuse me with all that said we have",
    "start": "1065679",
    "end": "1068640"
  },
  {
    "text": "all that done now right so the next",
    "start": "1068640",
    "end": "1070080"
  },
  {
    "text": "thing i'm going to do is we're going to",
    "start": "1070080",
    "end": "1070799"
  },
  {
    "text": "go ahead and spin up envoy so let's go",
    "start": "1070799",
    "end": "1072559"
  },
  {
    "text": "ahead and create a new window a new",
    "start": "1072559",
    "end": "1074000"
  },
  {
    "text": "tab here and let's take a look at what",
    "start": "1074000",
    "end": "1076080"
  },
  {
    "text": "this environment looks like so",
    "start": "1076080",
    "end": "1078160"
  },
  {
    "text": "as i mentioned we need this this",
    "start": "1078160",
    "end": "1079360"
  },
  {
    "text": "bootstrap cluster i'm sorry this",
    "start": "1079360",
    "end": "1081600"
  },
  {
    "text": "bootstrap yemo",
    "start": "1081600",
    "end": "1083120"
  },
  {
    "text": "and this bootstrap config will go ahead",
    "start": "1083120",
    "end": "1084880"
  },
  {
    "text": "and load in static resources and we",
    "start": "1084880",
    "end": "1086320"
  },
  {
    "text": "talked about loading in",
    "start": "1086320",
    "end": "1087600"
  },
  {
    "text": "you know a static cluster to point to",
    "start": "1087600",
    "end": "1089280"
  },
  {
    "text": "our our xds server",
    "start": "1089280",
    "end": "1091039"
  },
  {
    "text": "and that's this so on localhost 9002",
    "start": "1091039",
    "end": "1093200"
  },
  {
    "text": "again that's where our",
    "start": "1093200",
    "end": "1094559"
  },
  {
    "text": "xds server is running we're going to go",
    "start": "1094559",
    "end": "1096720"
  },
  {
    "text": "ahead and tell it create a cluster in",
    "start": "1096720",
    "end": "1098559"
  },
  {
    "text": "envoy to point to this",
    "start": "1098559",
    "end": "1100480"
  },
  {
    "text": "once we have that cluster we're going to",
    "start": "1100480",
    "end": "1102320"
  },
  {
    "text": "set up all the xds endpoints so we're",
    "start": "1102320",
    "end": "1104320"
  },
  {
    "text": "going to set up our cluster cds config",
    "start": "1104320",
    "end": "1106960"
  },
  {
    "text": "again we're going to use grpc type and",
    "start": "1106960",
    "end": "1108880"
  },
  {
    "text": "we're going to point it to this xds",
    "start": "1108880",
    "end": "1110240"
  },
  {
    "text": "cluster created here in this previous",
    "start": "1110240",
    "end": "1111600"
  },
  {
    "text": "step",
    "start": "1111600",
    "end": "1112480"
  },
  {
    "text": "so envoy knows now that hey i have",
    "start": "1112480",
    "end": "1114640"
  },
  {
    "text": "dynamic clusters and they come from",
    "start": "1114640",
    "end": "1116400"
  },
  {
    "text": "this endpoint here or the set of",
    "start": "1116400",
    "end": "1117840"
  },
  {
    "text": "endpoints and this is similar for",
    "start": "1117840",
    "end": "1120000"
  },
  {
    "text": "lds or listeners so listener's going to",
    "start": "1120000",
    "end": "1121600"
  },
  {
    "text": "come from this cluster name",
    "start": "1121600",
    "end": "1124720"
  },
  {
    "text": "here it's going to set a cluster name",
    "start": "1124720",
    "end": "1126320"
  },
  {
    "text": "and id and then down here we're going to",
    "start": "1126320",
    "end": "1128640"
  },
  {
    "text": "expose an admin web page and the idle",
    "start": "1128640",
    "end": "1130320"
  },
  {
    "text": "web page is helpful to",
    "start": "1130320",
    "end": "1131760"
  },
  {
    "text": "debug contour i'm sorry to bug envoy and",
    "start": "1131760",
    "end": "1134720"
  },
  {
    "text": "look at all the different information",
    "start": "1134720",
    "end": "1136160"
  },
  {
    "text": "that we've",
    "start": "1136160",
    "end": "1136880"
  },
  {
    "text": "loaded into that envoy instance okay so",
    "start": "1136880",
    "end": "1140000"
  },
  {
    "text": "now this is up there we'll go ahead and",
    "start": "1140000",
    "end": "1141280"
  },
  {
    "text": "start envoy",
    "start": "1141280",
    "end": "1142240"
  },
  {
    "text": "so we're going to go find the binary",
    "start": "1142240",
    "end": "1143440"
  },
  {
    "text": "local on our machine and we'll pass in",
    "start": "1143440",
    "end": "1145200"
  },
  {
    "text": "that bootstrap yaml file here using",
    "start": "1145200",
    "end": "1147360"
  },
  {
    "text": "c bootstrap ymo so i can go ahead and",
    "start": "1147360",
    "end": "1150480"
  },
  {
    "text": "say hack start envoy",
    "start": "1150480",
    "end": "1152240"
  },
  {
    "text": "and well the first thing you'll see is",
    "start": "1152240",
    "end": "1153520"
  },
  {
    "text": "when envoy starts up it loads all the",
    "start": "1153520",
    "end": "1155280"
  },
  {
    "text": "extensions that are compiled in",
    "start": "1155280",
    "end": "1157440"
  },
  {
    "text": "so by we're using the upstream one here",
    "start": "1157440",
    "end": "1159120"
  },
  {
    "text": "so by default what you'll see is we have",
    "start": "1159120",
    "end": "1160960"
  },
  {
    "text": "all of the different",
    "start": "1160960",
    "end": "1162400"
  },
  {
    "text": "extensions already automatically",
    "start": "1162400",
    "end": "1163600"
  },
  {
    "text": "compiled in and just logged out for your",
    "start": "1163600",
    "end": "1165280"
  },
  {
    "text": "information",
    "start": "1165280",
    "end": "1167039"
  },
  {
    "text": "down here you can see that we've spun up",
    "start": "1167039",
    "end": "1168880"
  },
  {
    "text": "this this runtime layer",
    "start": "1168880",
    "end": "1170960"
  },
  {
    "text": "and we loaded one static cluster and",
    "start": "1170960",
    "end": "1172880"
  },
  {
    "text": "that cluster is that xds",
    "start": "1172880",
    "end": "1174960"
  },
  {
    "text": "server that we referenced earlier and",
    "start": "1174960",
    "end": "1177520"
  },
  {
    "text": "then you can see that we connected",
    "start": "1177520",
    "end": "1179919"
  },
  {
    "text": "to our server and we added a cluster and",
    "start": "1179919",
    "end": "1182799"
  },
  {
    "text": "we added",
    "start": "1182799",
    "end": "1184160"
  },
  {
    "text": "a listener here so here's listener zero",
    "start": "1184160",
    "end": "1186240"
  },
  {
    "text": "and that matches our config",
    "start": "1186240",
    "end": "1188080"
  },
  {
    "text": "and there should be an echo server here",
    "start": "1188080",
    "end": "1189520"
  },
  {
    "text": "right here this update cluster echo",
    "start": "1189520",
    "end": "1192720"
  },
  {
    "text": "so that got added as well as my listener",
    "start": "1192720",
    "end": "1194720"
  },
  {
    "text": "so we connected to our server here",
    "start": "1194720",
    "end": "1196559"
  },
  {
    "text": "so um let's go verify our configuration",
    "start": "1196559",
    "end": "1199600"
  },
  {
    "text": "real quick so we'll go look at again",
    "start": "1199600",
    "end": "1201200"
  },
  {
    "text": "localhost 9003",
    "start": "1201200",
    "end": "1202880"
  },
  {
    "text": "right i'll refresh this so here we are",
    "start": "1202880",
    "end": "1204880"
  },
  {
    "text": "and what we can see in here is we've got",
    "start": "1204880",
    "end": "1206320"
  },
  {
    "text": "you know a set of listeners",
    "start": "1206320",
    "end": "1207760"
  },
  {
    "text": "so again listener zero zero zero nine",
    "start": "1207760",
    "end": "1209679"
  },
  {
    "text": "thousand and again that matches our",
    "start": "1209679",
    "end": "1211440"
  },
  {
    "text": "config",
    "start": "1211440",
    "end": "1212480"
  },
  {
    "text": "zero zero zero on port nine thousand",
    "start": "1212480",
    "end": "1215520"
  },
  {
    "text": "um we can also see clusters in here so",
    "start": "1215520",
    "end": "1217440"
  },
  {
    "text": "we can see that we have this echo",
    "start": "1217440",
    "end": "1218840"
  },
  {
    "text": "cluster and it has two sets of endpoints",
    "start": "1218840",
    "end": "1221120"
  },
  {
    "text": "so",
    "start": "1221120",
    "end": "1222159"
  },
  {
    "text": "dot 244 on 9101 and 24409 102.",
    "start": "1222159",
    "end": "1226720"
  },
  {
    "text": "again that matches our configuration",
    "start": "1226720",
    "end": "1228880"
  },
  {
    "text": "here so it's called echo",
    "start": "1228880",
    "end": "1230880"
  },
  {
    "text": "244 on 9101 and i'm 102.",
    "start": "1230880",
    "end": "1235360"
  },
  {
    "text": "we can also look at this config dump and",
    "start": "1235360",
    "end": "1237360"
  },
  {
    "text": "this dump shows you all the running",
    "start": "1237360",
    "end": "1238799"
  },
  {
    "text": "configuration in envoy",
    "start": "1238799",
    "end": "1240240"
  },
  {
    "text": "so again it shows you all the different",
    "start": "1240240",
    "end": "1242000"
  },
  {
    "text": "extensions that are compiled in",
    "start": "1242000",
    "end": "1245280"
  },
  {
    "text": "down here a bit further we'll be able to",
    "start": "1246080",
    "end": "1247200"
  },
  {
    "text": "see the static configuration we loaded",
    "start": "1247200",
    "end": "1249520"
  },
  {
    "text": "so here we see static resources and we",
    "start": "1249520",
    "end": "1251200"
  },
  {
    "text": "have our static xds cluster",
    "start": "1251200",
    "end": "1253200"
  },
  {
    "text": "again pointing to port 9002 and then",
    "start": "1253200",
    "end": "1255919"
  },
  {
    "text": "here you can see we've got our dynamic",
    "start": "1255919",
    "end": "1257039"
  },
  {
    "text": "dynamic resources",
    "start": "1257039",
    "end": "1258159"
  },
  {
    "text": "and again it's that lds config point to",
    "start": "1258159",
    "end": "1260640"
  },
  {
    "text": "grpc",
    "start": "1260640",
    "end": "1261600"
  },
  {
    "text": "over that same static cluster we created",
    "start": "1261600",
    "end": "1265360"
  },
  {
    "text": "all right coming down a little further",
    "start": "1266159",
    "end": "1267520"
  },
  {
    "text": "we can now see our dynamic clusters so",
    "start": "1267520",
    "end": "1269200"
  },
  {
    "text": "this is what got loaded in dynamically",
    "start": "1269200",
    "end": "1270960"
  },
  {
    "text": "through our management server so here",
    "start": "1270960",
    "end": "1273039"
  },
  {
    "text": "you can see that cluster called echo",
    "start": "1273039",
    "end": "1275200"
  },
  {
    "text": "again it comes from this xds server i'm",
    "start": "1275200",
    "end": "1277600"
  },
  {
    "text": "sorry our endpoints again are coming",
    "start": "1277600",
    "end": "1279120"
  },
  {
    "text": "from eds",
    "start": "1279120",
    "end": "1279919"
  },
  {
    "text": "i mentioned that back in the service",
    "start": "1279919",
    "end": "1281200"
  },
  {
    "text": "discovery slide so eds is the",
    "start": "1281200",
    "end": "1284000"
  },
  {
    "text": "is the source of our our echo cluster",
    "start": "1284000",
    "end": "1287520"
  },
  {
    "text": "and again it comes from the same xds",
    "start": "1287520",
    "end": "1289200"
  },
  {
    "text": "server and again here's our dynamic",
    "start": "1289200",
    "end": "1291520"
  },
  {
    "text": "listener because we load that",
    "start": "1291520",
    "end": "1292320"
  },
  {
    "text": "dynamically as well",
    "start": "1292320",
    "end": "1293840"
  },
  {
    "text": "and then here we're loading in those",
    "start": "1293840",
    "end": "1295360"
  },
  {
    "text": "those filters so here's our filter chain",
    "start": "1295360",
    "end": "1297679"
  },
  {
    "text": "and we're loading in this http",
    "start": "1297679",
    "end": "1299360"
  },
  {
    "text": "connection manager which gives us that",
    "start": "1299360",
    "end": "1301520"
  },
  {
    "text": "you know l7 proxy routing",
    "start": "1301520",
    "end": "1305360"
  },
  {
    "text": "okay so this is enough to get running",
    "start": "1305360",
    "end": "1308080"
  },
  {
    "text": "let's go ahead and query this and see",
    "start": "1308080",
    "end": "1309760"
  },
  {
    "text": "what happens so",
    "start": "1309760",
    "end": "1311039"
  },
  {
    "text": "if i go ahead and curl localhost",
    "start": "1311039",
    "end": "1314159"
  },
  {
    "text": "9000 i get a response and you'll see",
    "start": "1314159",
    "end": "1317280"
  },
  {
    "text": "here this is this is that simple echo",
    "start": "1317280",
    "end": "1318559"
  },
  {
    "text": "server",
    "start": "1318559",
    "end": "1319039"
  },
  {
    "text": "um that we have running and you see",
    "start": "1319039",
    "end": "1321520"
  },
  {
    "text": "here's the host name that responds so we",
    "start": "1321520",
    "end": "1322960"
  },
  {
    "text": "have two endpoints so if we query this",
    "start": "1322960",
    "end": "1324400"
  },
  {
    "text": "again",
    "start": "1324400",
    "end": "1325280"
  },
  {
    "text": "we should get a different one maybe",
    "start": "1325280",
    "end": "1328400"
  },
  {
    "text": "682 and then here's three fc right so",
    "start": "1328400",
    "end": "1330400"
  },
  {
    "text": "there's those two so i can go ahead and",
    "start": "1330400",
    "end": "1331679"
  },
  {
    "text": "do a curl on this",
    "start": "1331679",
    "end": "1332960"
  },
  {
    "text": "we'll curl every second and we should",
    "start": "1332960",
    "end": "1334799"
  },
  {
    "text": "just load balance between those two",
    "start": "1334799",
    "end": "1335919"
  },
  {
    "text": "endpoints",
    "start": "1335919",
    "end": "1337200"
  },
  {
    "text": "682 3fc you can see that right",
    "start": "1337200",
    "end": "1341519"
  },
  {
    "text": "if i go ahead and come into here and i",
    "start": "1342320",
    "end": "1343840"
  },
  {
    "text": "remove an endpoint",
    "start": "1343840",
    "end": "1346240"
  },
  {
    "text": "again as soon as i hit save i change the",
    "start": "1346240",
    "end": "1349679"
  },
  {
    "text": "configuration",
    "start": "1349679",
    "end": "1350799"
  },
  {
    "text": "our our callback will fire and going",
    "start": "1350799",
    "end": "1353600"
  },
  {
    "text": "we'll then create a new configuration",
    "start": "1353600",
    "end": "1355520"
  },
  {
    "text": "we'll then create a new snapshot we'll",
    "start": "1355520",
    "end": "1357280"
  },
  {
    "text": "pass the snapshot off to envoy",
    "start": "1357280",
    "end": "1359039"
  },
  {
    "text": "and they will update so as soon as i",
    "start": "1359039",
    "end": "1360640"
  },
  {
    "text": "save this you'll see envoy down here",
    "start": "1360640",
    "end": "1362799"
  },
  {
    "text": "updated if i come back to our window",
    "start": "1362799",
    "end": "1365200"
  },
  {
    "text": "here",
    "start": "1365200",
    "end": "1365919"
  },
  {
    "text": "now we're only going to hit the same",
    "start": "1365919",
    "end": "1367679"
  },
  {
    "text": "endpoint so 682 because now we have one",
    "start": "1367679",
    "end": "1369919"
  },
  {
    "text": "endpoint in our cluster",
    "start": "1369919",
    "end": "1371760"
  },
  {
    "text": "right cool so now we can do is we can",
    "start": "1371760",
    "end": "1375440"
  },
  {
    "text": "add another another cluster in a route",
    "start": "1375440",
    "end": "1376880"
  },
  {
    "text": "if we like so we can go ahead and copy",
    "start": "1376880",
    "end": "1378799"
  },
  {
    "text": "this and we'll call this",
    "start": "1378799",
    "end": "1380000"
  },
  {
    "text": "new and we'll put this on 9 103",
    "start": "1380000",
    "end": "1384480"
  },
  {
    "text": "and then maybe 9 104. and then we'll add",
    "start": "1384480",
    "end": "1387280"
  },
  {
    "text": "a new cluster",
    "start": "1387280",
    "end": "1388000"
  },
  {
    "text": "here we'll call this one new route",
    "start": "1388000",
    "end": "1391600"
  },
  {
    "text": "and a point to the cluster new i mean",
    "start": "1391600",
    "end": "1394320"
  },
  {
    "text": "we'll call this one slash",
    "start": "1394320",
    "end": "1396080"
  },
  {
    "text": "foo that'll be our prefix right so we",
    "start": "1396080",
    "end": "1398159"
  },
  {
    "text": "can do routing on slash",
    "start": "1398159",
    "end": "1399520"
  },
  {
    "text": "or slash foo again our goal here is to",
    "start": "1399520",
    "end": "1401520"
  },
  {
    "text": "make an l7 load balancer",
    "start": "1401520",
    "end": "1404240"
  },
  {
    "text": "so we'll go ahead and save that again",
    "start": "1404240",
    "end": "1406400"
  },
  {
    "text": "our file changed",
    "start": "1406400",
    "end": "1407840"
  },
  {
    "text": "we created a new internal state of the",
    "start": "1407840",
    "end": "1409840"
  },
  {
    "text": "world configuration",
    "start": "1409840",
    "end": "1411039"
  },
  {
    "text": "create a new snapshot and pass that back",
    "start": "1411039",
    "end": "1412640"
  },
  {
    "text": "off to envoy so now if we go ahead and",
    "start": "1412640",
    "end": "1415039"
  },
  {
    "text": "do our curl",
    "start": "1415039",
    "end": "1416000"
  },
  {
    "text": "nothing should have changed here for the",
    "start": "1416000",
    "end": "1417440"
  },
  {
    "text": "slash endpoint but if we curl for slash",
    "start": "1417440",
    "end": "1420320"
  },
  {
    "text": "foo",
    "start": "1420320",
    "end": "1421840"
  },
  {
    "text": "uh what we should get now is some two",
    "start": "1421840",
    "end": "1424080"
  },
  {
    "text": "different endpoints",
    "start": "1424080",
    "end": "1426799"
  },
  {
    "text": "okay all right so there we go so we got",
    "start": "1428840",
    "end": "1430960"
  },
  {
    "text": "slash foo and slash running",
    "start": "1430960",
    "end": "1433039"
  },
  {
    "text": "so um which i think of what else so",
    "start": "1433039",
    "end": "1436240"
  },
  {
    "text": "i think that's all we have for slides",
    "start": "1436240",
    "end": "1437760"
  },
  {
    "text": "here so um",
    "start": "1437760",
    "end": "1439760"
  },
  {
    "text": "if you're interested learning about more",
    "start": "1439760",
    "end": "1440960"
  },
  {
    "text": "um there's some resources here this top",
    "start": "1440960",
    "end": "1443039"
  },
  {
    "text": "resource is the",
    "start": "1443039",
    "end": "1444320"
  },
  {
    "text": "sample we just looked at so it's the xds",
    "start": "1444320",
    "end": "1446159"
  },
  {
    "text": "server that i wrote which",
    "start": "1446159",
    "end": "1447760"
  },
  {
    "text": "derives from the go control plan example",
    "start": "1447760",
    "end": "1449360"
  },
  {
    "text": "but adds the yaml parsing file",
    "start": "1449360",
    "end": "1451679"
  },
  {
    "text": "the go control plan is another place and",
    "start": "1451679",
    "end": "1453039"
  },
  {
    "text": "obviously onbyproxy.io",
    "start": "1453039",
    "end": "1454720"
  },
  {
    "text": "so again i'm steve sloca please reach",
    "start": "1454720",
    "end": "1456720"
  },
  {
    "text": "out with questions i'm happy to answer",
    "start": "1456720",
    "end": "1458000"
  },
  {
    "text": "more i'm happy to discuss this more i",
    "start": "1458000",
    "end": "1459520"
  },
  {
    "text": "know this was quick but hopefully you've",
    "start": "1459520",
    "end": "1460799"
  },
  {
    "text": "got a good",
    "start": "1460799",
    "end": "1461679"
  },
  {
    "text": "understanding of how envoy works and how",
    "start": "1461679",
    "end": "1463200"
  },
  {
    "text": "you can build your own management server",
    "start": "1463200",
    "end": "1465679"
  },
  {
    "text": "thank you",
    "start": "1465679",
    "end": "1469200"
  }
]