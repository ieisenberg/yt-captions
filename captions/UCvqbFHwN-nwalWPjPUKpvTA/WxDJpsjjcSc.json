[
  {
    "text": "all right uh well everybody thanks for",
    "start": "1640",
    "end": "4200"
  },
  {
    "text": "coming in um my name is Mark bin I'm the",
    "start": "4200",
    "end": "7520"
  },
  {
    "text": "CTO tro security and we are going to be",
    "start": "7520",
    "end": "10480"
  },
  {
    "text": "talking about uh a really short title",
    "start": "10480",
    "end": "14040"
  },
  {
    "text": "talk um securing uh multicluster",
    "start": "14040",
    "end": "18000"
  },
  {
    "text": "management with Argo CD without using",
    "start": "18000",
    "end": "21320"
  },
  {
    "text": "static",
    "start": "21320",
    "end": "22480"
  },
  {
    "text": "tokens um we got a lot to cover so let's",
    "start": "22480",
    "end": "25160"
  },
  {
    "text": "dive into it so if you're using",
    "start": "25160",
    "end": "28199"
  },
  {
    "text": "multicluster today with Argo City",
    "start": "28199",
    "end": "30000"
  },
  {
    "text": "chances are it looks a little something",
    "start": "30000",
    "end": "31759"
  },
  {
    "text": "like this you're in probably one of the",
    "start": "31759",
    "end": "33879"
  },
  {
    "text": "hyperscalers uh and it all works really",
    "start": "33879",
    "end": "36079"
  },
  {
    "text": "well right um all three of the major",
    "start": "36079",
    "end": "39040"
  },
  {
    "text": "clouds have their own sense of identity",
    "start": "39040",
    "end": "41719"
  },
  {
    "text": "they have a way of propagating that",
    "start": "41719",
    "end": "43320"
  },
  {
    "text": "identity into your workloads in this",
    "start": "43320",
    "end": "45520"
  },
  {
    "text": "case Argo CD and then they have a way of",
    "start": "45520",
    "end": "48480"
  },
  {
    "text": "making it so that that identity can be",
    "start": "48480",
    "end": "50360"
  },
  {
    "text": "used to talk to other services other",
    "start": "50360",
    "end": "52760"
  },
  {
    "text": "kuet clusters uh this all works out of",
    "start": "52760",
    "end": "55399"
  },
  {
    "text": "the box today like there's not really",
    "start": "55399",
    "end": "56840"
  },
  {
    "text": "anything special you need to do with",
    "start": "56840",
    "end": "58239"
  },
  {
    "text": "aroc CD everything gets done in your",
    "start": "58239",
    "end": "60960"
  },
  {
    "text": "Cloud uh and as long as you're in one of",
    "start": "60960",
    "end": "63960"
  },
  {
    "text": "these clouds and you're talking to",
    "start": "63960",
    "end": "66000"
  },
  {
    "text": "clusters in one of these clouds like",
    "start": "66000",
    "end": "68920"
  },
  {
    "text": "that's it that that that's the end of",
    "start": "68920",
    "end": "71240"
  },
  {
    "text": "the talk",
    "start": "71240",
    "end": "74560"
  },
  {
    "text": "um except there are more than three",
    "start": "75119",
    "end": "77240"
  },
  {
    "text": "clouds right and that might get me",
    "start": "77240",
    "end": "78640"
  },
  {
    "text": "thrown out of the Showcase later uh but",
    "start": "78640",
    "end": "81720"
  },
  {
    "text": "you know you've got more than just those",
    "start": "81720",
    "end": "84159"
  },
  {
    "text": "three clouds we all have complex it",
    "start": "84159",
    "end": "86720"
  },
  {
    "text": "environments it doesn't just involve",
    "start": "86720",
    "end": "88840"
  },
  {
    "text": "maybe our AWS",
    "start": "88840",
    "end": "90560"
  },
  {
    "text": "or Google or Azure accounts it could",
    "start": "90560",
    "end": "92880"
  },
  {
    "text": "involve smaller uh clouds that we might",
    "start": "92880",
    "end": "95840"
  },
  {
    "text": "be using for specialty items it could",
    "start": "95840",
    "end": "98240"
  },
  {
    "text": "involve on Prem clouds that we use to",
    "start": "98240",
    "end": "100960"
  },
  {
    "text": "manage uh",
    "start": "100960",
    "end": "102840"
  },
  {
    "text": "resources we might want to go cross",
    "start": "102840",
    "end": "105159"
  },
  {
    "text": "Cloud uh so this is where the the Crux",
    "start": "105159",
    "end": "109040"
  },
  {
    "text": "of this talk comes in where we're",
    "start": "109040",
    "end": "111000"
  },
  {
    "text": "talking about how do we manage an Argo",
    "start": "111000",
    "end": "113159"
  },
  {
    "text": "identity across these different trust",
    "start": "113159",
    "end": "115399"
  },
  {
    "text": "boundaries across these different areas",
    "start": "115399",
    "end": "117640"
  },
  {
    "text": "because the thing is is that you've got",
    "start": "117640",
    "end": "119240"
  },
  {
    "text": "different of identity for all these",
    "start": "119240",
    "end": "122039"
  },
  {
    "text": "different things you know AWS has its",
    "start": "122039",
    "end": "124360"
  },
  {
    "text": "own way of doing identity same with",
    "start": "124360",
    "end": "126119"
  },
  {
    "text": "Azure same with Google it's not that",
    "start": "126119",
    "end": "128200"
  },
  {
    "text": "anyone is better or worse than the other",
    "start": "128200",
    "end": "130479"
  },
  {
    "text": "different different processes and that's",
    "start": "130479",
    "end": "132520"
  },
  {
    "text": "okay uh you're on Prem clusters",
    "start": "132520",
    "end": "135519"
  },
  {
    "text": "depending on how you're deploying it uh",
    "start": "135519",
    "end": "137640"
  },
  {
    "text": "you know everything from just deploying",
    "start": "137640",
    "end": "139319"
  },
  {
    "text": "Cube ADM to you're using an on-prem",
    "start": "139319",
    "end": "142239"
  },
  {
    "text": "vendor they're going to have their own",
    "start": "142239",
    "end": "144120"
  },
  {
    "text": "sense of identity or they might not have",
    "start": "144120",
    "end": "145840"
  },
  {
    "text": "any sense of identity at all outside the",
    "start": "145840",
    "end": "147879"
  },
  {
    "text": "cluster and finally we've got that",
    "start": "147879",
    "end": "149640"
  },
  {
    "text": "little Orange v on there for V clusters",
    "start": "149640",
    "end": "153080"
  },
  {
    "text": "uh anybody who's working with",
    "start": "153080",
    "end": "154680"
  },
  {
    "text": "multi-tenancy uh might have heard of",
    "start": "154680",
    "end": "157040"
  },
  {
    "text": "this concept of running a virtual",
    "start": "157040",
    "end": "158840"
  },
  {
    "text": "cluster in which now you've got this",
    "start": "158840",
    "end": "160879"
  },
  {
    "text": "virtual cluster that has to piggyback",
    "start": "160879",
    "end": "163200"
  },
  {
    "text": "off of the parents",
    "start": "163200",
    "end": "165400"
  },
  {
    "text": "identity uh so how does Argo CD securely",
    "start": "165400",
    "end": "168840"
  },
  {
    "text": "interact with all these systems this",
    "start": "168840",
    "end": "170879"
  },
  {
    "text": "isn't a unique problem for Argo CD or uh",
    "start": "170879",
    "end": "174120"
  },
  {
    "text": "to Argo CD uh this has been something",
    "start": "174120",
    "end": "177519"
  },
  {
    "text": "that um anybody who's tried to run a",
    "start": "177519",
    "end": "180720"
  },
  {
    "text": "pipeline external to a cluster has had",
    "start": "180720",
    "end": "182800"
  },
  {
    "text": "to deal with over the years uh but",
    "start": "182800",
    "end": "184720"
  },
  {
    "text": "argo's got some really interesting ways",
    "start": "184720",
    "end": "186519"
  },
  {
    "text": "to handle it and that's really where",
    "start": "186519",
    "end": "187959"
  },
  {
    "text": "we're going to have a lot of",
    "start": "187959",
    "end": "190680"
  },
  {
    "text": "fun so how do we securely access",
    "start": "190680",
    "end": "193680"
  },
  {
    "text": "something across boundaries well for the",
    "start": "193680",
    "end": "196480"
  },
  {
    "text": "most part you're going to use a token of",
    "start": "196480",
    "end": "198440"
  },
  {
    "text": "some kind uh the reason why I'm not",
    "start": "198440",
    "end": "200599"
  },
  {
    "text": "saying certificates here is that usually",
    "start": "200599",
    "end": "202959"
  },
  {
    "text": "you're not just crossing a trust",
    "start": "202959",
    "end": "204519"
  },
  {
    "text": "boundary usually crossing a network",
    "start": "204519",
    "end": "206200"
  },
  {
    "text": "boundary too which means that your",
    "start": "206200",
    "end": "208480"
  },
  {
    "text": "certificate authen iation no longer",
    "start": "208480",
    "end": "211319"
  },
  {
    "text": "works you need something to bridge into",
    "start": "211319",
    "end": "213720"
  },
  {
    "text": "which ends up being a header or a token",
    "start": "213720",
    "end": "215439"
  },
  {
    "text": "anyway so we're going to stick with",
    "start": "215439",
    "end": "216920"
  },
  {
    "text": "talking about tokens and there are",
    "start": "216920",
    "end": "219000"
  },
  {
    "text": "really three things that are important",
    "start": "219000",
    "end": "220400"
  },
  {
    "text": "about every token one they have to be",
    "start": "220400",
    "end": "222640"
  },
  {
    "text": "short live that scalability you get out",
    "start": "222640",
    "end": "225560"
  },
  {
    "text": "of tokens by being able to cross lots of",
    "start": "225560",
    "end": "227879"
  },
  {
    "text": "different network boundaries ultimately",
    "start": "227879",
    "end": "230120"
  },
  {
    "text": "means that your token is now a risk",
    "start": "230120",
    "end": "232920"
  },
  {
    "text": "every Bearer token it's called a bearer",
    "start": "232920",
    "end": "234840"
  },
  {
    "text": "token because uh the person who holds it",
    "start": "234840",
    "end": "238640"
  },
  {
    "text": "has all the power every Bearer token is",
    "start": "238640",
    "end": "241200"
  },
  {
    "text": "a potential leak it's a potential Vector",
    "start": "241200",
    "end": "243439"
  },
  {
    "text": "to get into your systems and anything",
    "start": "243439",
    "end": "246159"
  },
  {
    "text": "that touches that token can be the",
    "start": "246159",
    "end": "248959"
  },
  {
    "text": "problem I'm not just talking about your",
    "start": "248959",
    "end": "251720"
  },
  {
    "text": "code uh back in the day uh I want to say",
    "start": "251720",
    "end": "255280"
  },
  {
    "text": "it was maybe it was Calico had a a bug",
    "start": "255280",
    "end": "258959"
  },
  {
    "text": "in it where it was leaking tokens into",
    "start": "258959",
    "end": "261120"
  },
  {
    "text": "logs um you know it's so easy to lose",
    "start": "261120",
    "end": "264040"
  },
  {
    "text": "these tokens so the best way to mitigate",
    "start": "264040",
    "end": "266600"
  },
  {
    "text": "that risk is to have really short Liv",
    "start": "266600",
    "end": "269120"
  },
  {
    "text": "tokens and I'm not talking like a day or",
    "start": "269120",
    "end": "271080"
  },
  {
    "text": "an hour I'm talking like a minute you",
    "start": "271080",
    "end": "273160"
  },
  {
    "text": "know you want that token to be so",
    "start": "273160",
    "end": "274680"
  },
  {
    "text": "shortlived that by the time an attacker",
    "start": "274680",
    "end": "277360"
  },
  {
    "text": "gets their hands on it it's utterly",
    "start": "277360",
    "end": "279840"
  },
  {
    "text": "useless it needs to be verifiable you",
    "start": "279840",
    "end": "282560"
  },
  {
    "text": "want to be able to take that token and",
    "start": "282560",
    "end": "284680"
  },
  {
    "text": "say I can verify that this token is what",
    "start": "284680",
    "end": "288639"
  },
  {
    "text": "it was created by who I think it was um",
    "start": "288639",
    "end": "292280"
  },
  {
    "text": "in the s in the use of jots jwt's Json",
    "start": "292280",
    "end": "295520"
  },
  {
    "text": "web tokens that usually cryptographic",
    "start": "295520",
    "end": "297880"
  },
  {
    "text": "right somebody publishes their public ke",
    "start": "297880",
    "end": "300360"
  },
  {
    "text": "you get it you verify it all is good uh",
    "start": "300360",
    "end": "304639"
  },
  {
    "text": "you also want to make sure it's Unique",
    "start": "304639",
    "end": "306960"
  },
  {
    "text": "you want to make sure that the person",
    "start": "306960",
    "end": "308680"
  },
  {
    "text": "who used that token the workload that",
    "start": "308680",
    "end": "310440"
  },
  {
    "text": "used that token you can identify which",
    "start": "310440",
    "end": "313759"
  },
  {
    "text": "workload that is because at some point",
    "start": "313759",
    "end": "315680"
  },
  {
    "text": "you're going to lose a token and you're",
    "start": "315680",
    "end": "317320"
  },
  {
    "text": "going to want to be able to say this is",
    "start": "317320",
    "end": "319600"
  },
  {
    "text": "where that token came from so if you're",
    "start": "319600",
    "end": "321280"
  },
  {
    "text": "using the same token for lots of",
    "start": "321280",
    "end": "323360"
  },
  {
    "text": "different things uh that becomes",
    "start": "323360",
    "end": "325919"
  },
  {
    "text": "difficult to",
    "start": "325919",
    "end": "327720"
  },
  {
    "text": "do so before we get into the right way",
    "start": "327720",
    "end": "330080"
  },
  {
    "text": "to do this let's talk about some anti-",
    "start": "330080",
    "end": "331720"
  },
  {
    "text": "patterns now uh I will tell you I'm the",
    "start": "331720",
    "end": "334280"
  },
  {
    "text": "co-author of kuet and Enterprise guide",
    "start": "334280",
    "end": "336280"
  },
  {
    "text": "we have 45 pages specifically on this",
    "start": "336280",
    "end": "339280"
  },
  {
    "text": "point so I can't get too deep into all",
    "start": "339280",
    "end": "341199"
  },
  {
    "text": "of these um but what I will say is that",
    "start": "341199",
    "end": "344720"
  },
  {
    "text": "uh at the end of the deck which is",
    "start": "344720",
    "end": "346400"
  },
  {
    "text": "attached to um the schedule entry uh",
    "start": "346400",
    "end": "350440"
  },
  {
    "text": "there's a",
    "start": "350440",
    "end": "351600"
  },
  {
    "text": "bibliography of support for everything",
    "start": "351600",
    "end": "354080"
  },
  {
    "text": "I'm about to say why these are all",
    "start": "354080",
    "end": "355880"
  },
  {
    "text": "anti-patterns uh so static keys and when",
    "start": "355880",
    "end": "358280"
  },
  {
    "text": "I say static keys I mean your Cloud",
    "start": "358280",
    "end": "360520"
  },
  {
    "text": "static keys I can go into the AWS",
    "start": "360520",
    "end": "362440"
  },
  {
    "text": "console generate a user get a credential",
    "start": "362440",
    "end": "365199"
  },
  {
    "text": "off of it and use that to access my",
    "start": "365199",
    "end": "367319"
  },
  {
    "text": "remote cluster uh problem is it's not",
    "start": "367319",
    "end": "370199"
  },
  {
    "text": "shortlived unless I build a process to",
    "start": "370199",
    "end": "372520"
  },
  {
    "text": "constantly refresh it in which point",
    "start": "372520",
    "end": "373880"
  },
  {
    "text": "I've now reinvented open ID connect so",
    "start": "373880",
    "end": "376599"
  },
  {
    "text": "what's the point of that um so that's",
    "start": "376599",
    "end": "378840"
  },
  {
    "text": "definitely an anti pattern the next one",
    "start": "378840",
    "end": "381759"
  },
  {
    "text": "service account token so if you've ever",
    "start": "381759",
    "end": "383759"
  },
  {
    "text": "use the Argo CD CLI to add a cluster",
    "start": "383759",
    "end": "387759"
  },
  {
    "text": "into your uh Argo CD instance you're",
    "start": "387759",
    "end": "391160"
  },
  {
    "text": "you're using a static service account",
    "start": "391160",
    "end": "393479"
  },
  {
    "text": "token it works with every cloud it works",
    "start": "393479",
    "end": "396599"
  },
  {
    "text": "on Prem it's long lived it doesn't have",
    "start": "396599",
    "end": "399400"
  },
  {
    "text": "an expiration date um and it was never",
    "start": "399400",
    "end": "402360"
  },
  {
    "text": "designed to be used from outside the",
    "start": "402360",
    "end": "403680"
  },
  {
    "text": "cluster service accounts were designed",
    "start": "403680",
    "end": "405680"
  },
  {
    "text": "to identify workloads they were never",
    "start": "405680",
    "end": "408440"
  },
  {
    "text": "meant to be used from outside of the",
    "start": "408440",
    "end": "410919"
  },
  {
    "text": "cluster so now you're in a similar",
    "start": "410919",
    "end": "413199"
  },
  {
    "text": "situation with static Keys it's just",
    "start": "413199",
    "end": "414880"
  },
  {
    "text": "you're using a kubernetes static key",
    "start": "414880",
    "end": "417479"
  },
  {
    "text": "instead of your Cloud static key so you",
    "start": "417479",
    "end": "420120"
  },
  {
    "text": "have all those same",
    "start": "420120",
    "end": "421599"
  },
  {
    "text": "problems uh certificates are an anti-",
    "start": "421599",
    "end": "424080"
  },
  {
    "text": "pattern for this because certificates",
    "start": "424080",
    "end": "425879"
  },
  {
    "text": "are not long lived uh granted you do",
    "start": "425879",
    "end": "429160"
  },
  {
    "text": "have a uh much better security threshold",
    "start": "429160",
    "end": "432360"
  },
  {
    "text": "if you set them up properly the problem",
    "start": "432360",
    "end": "434360"
  },
  {
    "text": "is 99 out of 100 times if you audit a",
    "start": "434360",
    "end": "437039"
  },
  {
    "text": "way that certificates are set up they",
    "start": "437039",
    "end": "438400"
  },
  {
    "text": "are not set up properly so you still",
    "start": "438400",
    "end": "441520"
  },
  {
    "text": "need to have secure access into the",
    "start": "441520",
    "end": "443599"
  },
  {
    "text": "cluster to be able to generate the",
    "start": "443599",
    "end": "445800"
  },
  {
    "text": "certificate and to get it signed uh and",
    "start": "445800",
    "end": "449120"
  },
  {
    "text": "half the clouds don't even support",
    "start": "449120",
    "end": "450400"
  },
  {
    "text": "anyway I know AWS doesn't support I",
    "start": "450400",
    "end": "452199"
  },
  {
    "text": "don't remember off the top of my head if",
    "start": "452199",
    "end": "454400"
  },
  {
    "text": "uh Azure does I'm pretty sure Google",
    "start": "454400",
    "end": "456080"
  },
  {
    "text": "does um but the point is is that",
    "start": "456080",
    "end": "459440"
  },
  {
    "text": "certificates are still an anti- pattern",
    "start": "459440",
    "end": "461319"
  },
  {
    "text": "they're long lived you can't revoke them",
    "start": "461319",
    "end": "463879"
  },
  {
    "text": "there's a constant uh audit finding on",
    "start": "463879",
    "end": "466639"
  },
  {
    "text": "the kubernetes uh project that there is",
    "start": "466639",
    "end": "469919"
  },
  {
    "text": "no certificate revocation testing so",
    "start": "469919",
    "end": "473080"
  },
  {
    "text": "once you've minted a certificate that's",
    "start": "473080",
    "end": "476840"
  },
  {
    "text": "it uh and then um so the these are all",
    "start": "476840",
    "end": "480800"
  },
  {
    "text": "your anti patterns these are all the",
    "start": "480800",
    "end": "482039"
  },
  {
    "text": "ways that you don't want to do it so",
    "start": "482039",
    "end": "485280"
  },
  {
    "text": "let's talk about the way you do want to",
    "start": "485280",
    "end": "486560"
  },
  {
    "text": "do it so let's come back to uh the slide",
    "start": "486560",
    "end": "489080"
  },
  {
    "text": "here um Argo CD you're typically running",
    "start": "489080",
    "end": "492159"
  },
  {
    "text": "on kubernetes you have an identity",
    "start": "492159",
    "end": "494680"
  },
  {
    "text": "kubernetes is giving Argo CD as it gives",
    "start": "494680",
    "end": "497159"
  },
  {
    "text": "every pod an identity uh and it meets",
    "start": "497159",
    "end": "500680"
  },
  {
    "text": "all of our qualifications shortlived",
    "start": "500680",
    "end": "502360"
  },
  {
    "text": "especially since",
    "start": "502360",
    "end": "503560"
  },
  {
    "text": "1.24 um when uh uh projected tokens",
    "start": "503560",
    "end": "508400"
  },
  {
    "text": "became the standard",
    "start": "508400",
    "end": "510159"
  },
  {
    "text": "um it can be anywhere from 24 hours to",
    "start": "510159",
    "end": "512880"
  },
  {
    "text": "10 minutes but the nice thing is is that",
    "start": "512880",
    "end": "515440"
  },
  {
    "text": "it's also unique I'm going to skip over",
    "start": "515440",
    "end": "517800"
  },
  {
    "text": "here it's Unique because it's tied",
    "start": "517800",
    "end": "519080"
  },
  {
    "text": "directly to your pod so if that pod goes",
    "start": "519080",
    "end": "522440"
  },
  {
    "text": "away even if the jot has not expired yet",
    "start": "522440",
    "end": "526959"
  },
  {
    "text": "if you do a token review request it's",
    "start": "526959",
    "end": "529560"
  },
  {
    "text": "going the API server is going to deny it",
    "start": "529560",
    "end": "532519"
  },
  {
    "text": "so it's it's Unique to a pod and it's",
    "start": "532519",
    "end": "535320"
  },
  {
    "text": "verifiable you can either verify it via",
    "start": "535320",
    "end": "537920"
  },
  {
    "text": "standard JWT cryptography um or you can",
    "start": "537920",
    "end": "541279"
  },
  {
    "text": "submit a token review request so uh this",
    "start": "541279",
    "end": "545480"
  },
  {
    "text": "is what we want to use here's the",
    "start": "545480",
    "end": "547320"
  },
  {
    "text": "problem the right side the kubus cluster",
    "start": "547320",
    "end": "549240"
  },
  {
    "text": "that identity is designed to be used",
    "start": "549240",
    "end": "551240"
  },
  {
    "text": "only by the API server or the cluster",
    "start": "551240",
    "end": "554000"
  },
  {
    "text": "we're in now we can use token projection",
    "start": "554000",
    "end": "556920"
  },
  {
    "text": "to say hey let's issue an identity for",
    "start": "556920",
    "end": "559160"
  },
  {
    "text": "other clusters you could totally make",
    "start": "559160",
    "end": "561320"
  },
  {
    "text": "that work the issue is though is that",
    "start": "561320",
    "end": "563120"
  },
  {
    "text": "you have to hardcode that into your",
    "start": "563120",
    "end": "564800"
  },
  {
    "text": "deployment unless you're writing some",
    "start": "564800",
    "end": "566760"
  },
  {
    "text": "code to do it um and then the other",
    "start": "566760",
    "end": "570040"
  },
  {
    "text": "issue is that um you need to have your",
    "start": "570040",
    "end": "573079"
  },
  {
    "text": "kubernetes clusters be able to trust it",
    "start": "573079",
    "end": "575040"
  },
  {
    "text": "so that's that one's a little tougher to",
    "start": "575040",
    "end": "577720"
  },
  {
    "text": "do so let's have some fun and make it",
    "start": "577720",
    "end": "579959"
  },
  {
    "text": "work so uh I'm the author of um open",
    "start": "579959",
    "end": "584160"
  },
  {
    "text": "Unison uh quick show hands anybody ever",
    "start": "584160",
    "end": "586880"
  },
  {
    "text": "used or heard of open",
    "start": "586880",
    "end": "588760"
  },
  {
    "text": "Unison no okay um so open unison's",
    "start": "588760",
    "end": "591839"
  },
  {
    "text": "identity provider uh makes it really",
    "start": "591839",
    "end": "593920"
  },
  {
    "text": "easy to log into your kuet cluster so",
    "start": "593920",
    "end": "596240"
  },
  {
    "text": "when people do talk about open un and",
    "start": "596240",
    "end": "597760"
  },
  {
    "text": "they see it it's often in in respect to",
    "start": "597760",
    "end": "600720"
  },
  {
    "text": "logging into things as a user we're",
    "start": "600720",
    "end": "603399"
  },
  {
    "text": "going to use it as a different",
    "start": "603399",
    "end": "604399"
  },
  {
    "text": "perspective here as a security token",
    "start": "604399",
    "end": "606640"
  },
  {
    "text": "service so in this instance open Unison",
    "start": "606640",
    "end": "609519"
  },
  {
    "text": "has trusts with our different clusters",
    "start": "609519",
    "end": "613000"
  },
  {
    "text": "so uh Argo CD is about to do something",
    "start": "613000",
    "end": "616079"
  },
  {
    "text": "with a cluster first thing it does it",
    "start": "616079",
    "end": "617920"
  },
  {
    "text": "says to open Unison hey with my identity",
    "start": "617920",
    "end": "620880"
  },
  {
    "text": "go ahead and uh give me a token for this",
    "start": "620880",
    "end": "623720"
  },
  {
    "text": "remote",
    "start": "623720",
    "end": "624560"
  },
  {
    "text": "cluster open Unison validates the",
    "start": "624560",
    "end": "626920"
  },
  {
    "text": "identity it goes to step two does a",
    "start": "626920",
    "end": "628880"
  },
  {
    "text": "token view requests so that's our",
    "start": "628880",
    "end": "630760"
  },
  {
    "text": "verifiable side make sure that the Pod",
    "start": "630760",
    "end": "633200"
  },
  {
    "text": "is still",
    "start": "633200",
    "end": "634240"
  },
  {
    "text": "active once that token is verified open",
    "start": "634240",
    "end": "637560"
  },
  {
    "text": "un and generates a new token it's only",
    "start": "637560",
    "end": "639480"
  },
  {
    "text": "good for one minute Argo CD takes that",
    "start": "639480",
    "end": "643519"
  },
  {
    "text": "token needs to send it Downstream now",
    "start": "643519",
    "end": "646440"
  },
  {
    "text": "here's the next question is how do we",
    "start": "646440",
    "end": "648639"
  },
  {
    "text": "get a downstream cluster to trust it",
    "start": "648639",
    "end": "652639"
  },
  {
    "text": "most clusters can only trust one",
    "start": "652639",
    "end": "655240"
  },
  {
    "text": "identity provider and you probably",
    "start": "655240",
    "end": "657200"
  },
  {
    "text": "already using that to log in to with",
    "start": "657200",
    "end": "659560"
  },
  {
    "text": "your",
    "start": "659560",
    "end": "660279"
  },
  {
    "text": "users uh so Kubo IDC proxy it was",
    "start": "660279",
    "end": "663600"
  },
  {
    "text": "originally written by the folks at jet",
    "start": "663600",
    "end": "665959"
  },
  {
    "text": "the same folks that gave us C manager uh",
    "start": "665959",
    "end": "668600"
  },
  {
    "text": "was a way to handle this scenario where",
    "start": "668600",
    "end": "671120"
  },
  {
    "text": "a impersonating proxy would allow you to",
    "start": "671120",
    "end": "674000"
  },
  {
    "text": "authenticate one way and then use",
    "start": "674000",
    "end": "675959"
  },
  {
    "text": "impersonation hairs down to the API",
    "start": "675959",
    "end": "677959"
  },
  {
    "text": "server um jet abandoned it in 2020 we",
    "start": "677959",
    "end": "681959"
  },
  {
    "text": "picked it up and moved it forward in",
    "start": "681959",
    "end": "683519"
  },
  {
    "text": "2020 and continued maintenance adding",
    "start": "683519",
    "end": "686160"
  },
  {
    "text": "features",
    "start": "686160",
    "end": "687519"
  },
  {
    "text": "Etc uh and so in this instance it makes",
    "start": "687519",
    "end": "690240"
  },
  {
    "text": "it real easy for us because we can issue",
    "start": "690240",
    "end": "692160"
  },
  {
    "text": "a a token that Kubo ADC proxy will trust",
    "start": "692160",
    "end": "696240"
  },
  {
    "text": "validate a cryptography using uh public",
    "start": "696240",
    "end": "698560"
  },
  {
    "text": "key cryptography and then forward the",
    "start": "698560",
    "end": "700720"
  },
  {
    "text": "request",
    "start": "700720",
    "end": "701760"
  },
  {
    "text": "down to the API",
    "start": "701760",
    "end": "704480"
  },
  {
    "text": "server uh starting with",
    "start": "704480",
    "end": "706920"
  },
  {
    "text": "1.31 in beta kubernetes now supports",
    "start": "706920",
    "end": "710800"
  },
  {
    "text": "structured authentication which allows",
    "start": "710800",
    "end": "712560"
  },
  {
    "text": "you to authenticate multiple jws so you",
    "start": "712560",
    "end": "715519"
  },
  {
    "text": "don't have to have just one provider so",
    "start": "715519",
    "end": "717920"
  },
  {
    "text": "it's all the same steps except we can",
    "start": "717920",
    "end": "719440"
  },
  {
    "text": "take out the Kubo IDC proxy uh which is",
    "start": "719440",
    "end": "722680"
  },
  {
    "text": "really",
    "start": "722680",
    "end": "724959"
  },
  {
    "text": "nice so we talked a lot about how we",
    "start": "725320",
    "end": "728880"
  },
  {
    "text": "make all these things happen but how do",
    "start": "728880",
    "end": "730720"
  },
  {
    "text": "we actually tell argocd to make these",
    "start": "730720",
    "end": "732560"
  },
  {
    "text": "things happen we got to customize it but",
    "start": "732560",
    "end": "734680"
  },
  {
    "text": "the really great thing is that the tools",
    "start": "734680",
    "end": "736440"
  },
  {
    "text": "that you use for argocd customization of",
    "start": "736440",
    "end": "739160"
  },
  {
    "text": "generating different types of manifests",
    "start": "739160",
    "end": "741600"
  },
  {
    "text": "are the same way we're going to get it",
    "start": "741600",
    "end": "743360"
  },
  {
    "text": "to be able to talk to these different",
    "start": "743360",
    "end": "745320"
  },
  {
    "text": "systems",
    "start": "745320",
    "end": "748320"
  },
  {
    "text": "Argo CD is written in go uh which means",
    "start": "749839",
    "end": "752160"
  },
  {
    "text": "it uses the client go SDK the client go",
    "start": "752160",
    "end": "754639"
  },
  {
    "text": "SDK supports uh client credential plugin",
    "start": "754639",
    "end": "758959"
  },
  {
    "text": "so if you've ever used you know Cube",
    "start": "758959",
    "end": "761839"
  },
  {
    "text": "control with AWS or eks or gcp you know",
    "start": "761839",
    "end": "765519"
  },
  {
    "text": "you're you're not getting an oidc token",
    "start": "765519",
    "end": "767800"
  },
  {
    "text": "you're getting a im or whatever token",
    "start": "767800",
    "end": "771519"
  },
  {
    "text": "from your Cloud if you look at your Cube",
    "start": "771519",
    "end": "773680"
  },
  {
    "text": "control configuration you'll see a bunch",
    "start": "773680",
    "end": "775360"
  },
  {
    "text": "of exec stuff in there for a plugin",
    "start": "775360",
    "end": "778240"
  },
  {
    "text": "that's what this is so we're going to",
    "start": "778240",
    "end": "779959"
  },
  {
    "text": "use that now this client credential",
    "start": "779959",
    "end": "782079"
  },
  {
    "text": "plugin just has to generate a",
    "start": "782079",
    "end": "784040"
  },
  {
    "text": "token um and it doesn't care what",
    "start": "784040",
    "end": "787160"
  },
  {
    "text": "programming language it's in so here",
    "start": "787160",
    "end": "788720"
  },
  {
    "text": "we're just going to use bash makes life",
    "start": "788720",
    "end": "790600"
  },
  {
    "text": "easy uh production environment I'd",
    "start": "790600",
    "end": "793000"
  },
  {
    "text": "probably turn this into uh something a",
    "start": "793000",
    "end": "794800"
  },
  {
    "text": "little cleaner and go um but like I said",
    "start": "794800",
    "end": "798000"
  },
  {
    "text": "bash works great for this um we need a",
    "start": "798000",
    "end": "801040"
  },
  {
    "text": "way to be able to communicate with open",
    "start": "801040",
    "end": "802920"
  },
  {
    "text": "unon to pull that token in uh the Argo",
    "start": "802920",
    "end": "806600"
  },
  {
    "text": "CD container doesn't include curl so",
    "start": "806600",
    "end": "808800"
  },
  {
    "text": "what we did was we added a uh empty",
    "start": "808800",
    "end": "811240"
  },
  {
    "text": "volume Mount we installed curl into it",
    "start": "811240",
    "end": "813800"
  },
  {
    "text": "so that way we have access to it and",
    "start": "813800",
    "end": "816440"
  },
  {
    "text": "finally we need a destination uh so this",
    "start": "816440",
    "end": "818680"
  },
  {
    "text": "is where application sets come in we",
    "start": "818680",
    "end": "820800"
  },
  {
    "text": "generate a secret for each of our",
    "start": "820800",
    "end": "822320"
  },
  {
    "text": "clusters that secret will have our",
    "start": "822320",
    "end": "824839"
  },
  {
    "text": "client credential information in it but",
    "start": "824839",
    "end": "827160"
  },
  {
    "text": "there won't be anything secret in the",
    "start": "827160",
    "end": "829160"
  },
  {
    "text": "secrets because everything is generated",
    "start": "829160",
    "end": "831440"
  },
  {
    "text": "on the fly so what was originally",
    "start": "831440",
    "end": "834680"
  },
  {
    "text": "designed to store sensitive information",
    "start": "834680",
    "end": "836959"
  },
  {
    "text": "about the downstream cluster like an API",
    "start": "836959",
    "end": "839560"
  },
  {
    "text": "server token or whatnot uh will instead",
    "start": "839560",
    "end": "842720"
  },
  {
    "text": "hold just generic configuration",
    "start": "842720",
    "end": "845680"
  },
  {
    "text": "information so let's look at our demo",
    "start": "845680",
    "end": "847680"
  },
  {
    "text": "environment we've got four clusters",
    "start": "847680",
    "end": "849240"
  },
  {
    "text": "we've got a control plane over here on",
    "start": "849240",
    "end": "850800"
  },
  {
    "text": "the left we have an AWS cluster and eks",
    "start": "850800",
    "end": "854440"
  },
  {
    "text": "cluster that's also hosting a v cluster",
    "start": "854440",
    "end": "857880"
  },
  {
    "text": "so that's two clusters we're going to be",
    "start": "857880",
    "end": "859320"
  },
  {
    "text": "working with both of those clusters are",
    "start": "859320",
    "end": "861639"
  },
  {
    "text": "running Kubo IDC proxy we also have a on",
    "start": "861639",
    "end": "866360"
  },
  {
    "text": "Prem cluster running 1.31 one uh with",
    "start": "866360",
    "end": "871360"
  },
  {
    "text": "the structured configuration so we don't",
    "start": "871360",
    "end": "873199"
  },
  {
    "text": "need a Kubo IDC proxy for that to work",
    "start": "873199",
    "end": "875759"
  },
  {
    "text": "and then our control plan has Aro CD",
    "start": "875759",
    "end": "877720"
  },
  {
    "text": "with open Unison tying everything",
    "start": "877720",
    "end": "881040"
  },
  {
    "text": "together so let's go ahead and hope that",
    "start": "881040",
    "end": "885440"
  },
  {
    "text": "my prayers to the demo goods were",
    "start": "885440",
    "end": "887519"
  },
  {
    "text": "answered and my sacrifices were accepted",
    "start": "887519",
    "end": "891120"
  },
  {
    "text": "so first thing we're going to do is",
    "start": "891120",
    "end": "892480"
  },
  {
    "text": "we're going to log in how am I doing on",
    "start": "892480",
    "end": "894240"
  },
  {
    "text": "time 10 minutes",
    "start": "894240",
    "end": "896240"
  },
  {
    "text": "beautiful uh so let's go into each",
    "start": "896240",
    "end": "899600"
  },
  {
    "text": "one so first we're going to go into the",
    "start": "899600",
    "end": "900839"
  },
  {
    "text": "AWS",
    "start": "900839",
    "end": "902399"
  },
  {
    "text": "satellite and we're going to look at",
    "start": "902399",
    "end": "904320"
  },
  {
    "text": "name",
    "start": "904320",
    "end": "906680"
  },
  {
    "text": "spaces now I'm going to make this a",
    "start": "907040",
    "end": "908959"
  },
  {
    "text": "little bigger so you can see there's no",
    "start": "908959",
    "end": "910839"
  },
  {
    "text": "Mya namespace we're going to generate",
    "start": "910839",
    "end": "913040"
  },
  {
    "text": "that Nam space with a",
    "start": "913040",
    "end": "915519"
  },
  {
    "text": "uh uh from Argo CD using our git repo so",
    "start": "915519",
    "end": "920720"
  },
  {
    "text": "I'm going to do the same thing this is",
    "start": "920720",
    "end": "922279"
  },
  {
    "text": "our uh V cluster so same thing I'll go",
    "start": "922279",
    "end": "926480"
  },
  {
    "text": "down here to Nam spaces",
    "start": "926480",
    "end": "930079"
  },
  {
    "text": "right know my",
    "start": "930079",
    "end": "931440"
  },
  {
    "text": "app and then finally we'll go to our on",
    "start": "931440",
    "end": "934440"
  },
  {
    "text": "Prem",
    "start": "934440",
    "end": "936880"
  },
  {
    "text": "satellite and uh you notice that there",
    "start": "936959",
    "end": "940360"
  },
  {
    "text": "are no logins that's because everything",
    "start": "940360",
    "end": "942839"
  },
  {
    "text": "has been locked down already with SSO so",
    "start": "942839",
    "end": "947240"
  },
  {
    "text": "no need to reenter my password so no my",
    "start": "947240",
    "end": "950120"
  },
  {
    "text": "app all right so let's go over to Argo",
    "start": "950120",
    "end": "954360"
  },
  {
    "text": "CD no applications right so let's go",
    "start": "955759",
    "end": "959680"
  },
  {
    "text": "ahead and generate our applications so",
    "start": "959680",
    "end": "962160"
  },
  {
    "text": "there are two po components to this the",
    "start": "962160",
    "end": "964279"
  },
  {
    "text": "first is an application set how does",
    "start": "964279",
    "end": "966040"
  },
  {
    "text": "that look folks see that make that a",
    "start": "966040",
    "end": "967720"
  },
  {
    "text": "little",
    "start": "967720",
    "end": "969879"
  },
  {
    "text": "bigger um so the application set itself",
    "start": "969920",
    "end": "974560"
  },
  {
    "text": "uh is the template and there's not a lot",
    "start": "974560",
    "end": "976759"
  },
  {
    "text": "of going on here I've got a get repo",
    "start": "976759",
    "end": "979000"
  },
  {
    "text": "that's not really the fun part um we are",
    "start": "979000",
    "end": "982680"
  },
  {
    "text": "keying off of any cluster secret with",
    "start": "982680",
    "end": "986800"
  },
  {
    "text": "this annotation of tremolo doio event",
    "start": "986800",
    "end": "989440"
  },
  {
    "text": "argoon na a uh so when we create this",
    "start": "989440",
    "end": "993240"
  },
  {
    "text": "that's going to tell the set controller",
    "start": "993240",
    "end": "995319"
  },
  {
    "text": "to look at all the secrets with that uh",
    "start": "995319",
    "end": "997880"
  },
  {
    "text": "particular annotation and let's look at",
    "start": "997880",
    "end": "999600"
  },
  {
    "text": "those secrets so this is where the magic",
    "start": "999600",
    "end": "1002839"
  },
  {
    "text": "is happening so this is the V cluster",
    "start": "1002839",
    "end": "1004680"
  },
  {
    "text": "one now generally this is where you",
    "start": "1004680",
    "end": "1006759"
  },
  {
    "text": "would store secret information right",
    "start": "1006759",
    "end": "1009880"
  },
  {
    "text": "passwords tokens private Keys whatever",
    "start": "1009880",
    "end": "1013199"
  },
  {
    "text": "we don't need that because everything's",
    "start": "1013199",
    "end": "1014759"
  },
  {
    "text": "being der derived off of ephemeral",
    "start": "1014759",
    "end": "1017279"
  },
  {
    "text": "identities so here we're just going to",
    "start": "1017279",
    "end": "1019720"
  },
  {
    "text": "call this script that we've mounted into",
    "start": "1019720",
    "end": "1022240"
  },
  {
    "text": "our Argo CD instance and say I need to",
    "start": "1022240",
    "end": "1026959"
  },
  {
    "text": "call this open",
    "start": "1026959",
    "end": "1028480"
  },
  {
    "text": "Unison I need this",
    "start": "1028480",
    "end": "1031880"
  },
  {
    "text": "cluster and here's the",
    "start": "1031880",
    "end": "1034798"
  },
  {
    "text": "identity that I'm going to use and then",
    "start": "1034799",
    "end": "1037880"
  },
  {
    "text": "everything just happens automatically so",
    "start": "1037880",
    "end": "1041038"
  },
  {
    "text": "uh without further Ado I got to first I",
    "start": "1041039",
    "end": "1044720"
  },
  {
    "text": "got log in okay log in AR Go On",
    "start": "1044720",
    "end": "1050840"
  },
  {
    "text": "con all right I am logged",
    "start": "1055280",
    "end": "1058320"
  },
  {
    "text": "in I'm in my control plane all right so",
    "start": "1058320",
    "end": "1063000"
  },
  {
    "text": "uh A lot's going to happen very quickly",
    "start": "1063000",
    "end": "1064440"
  },
  {
    "text": "so I'm going to go ahead and create this",
    "start": "1064440",
    "end": "1066039"
  },
  {
    "text": "I'm going to come back here we can see",
    "start": "1066039",
    "end": "1067880"
  },
  {
    "text": "it's already created all three of our",
    "start": "1067880",
    "end": "1070440"
  },
  {
    "text": "applications based on the application",
    "start": "1070440",
    "end": "1072280"
  },
  {
    "text": "set and everything's already synced",
    "start": "1072280",
    "end": "1074200"
  },
  {
    "text": "right like there's not a whole heck of a",
    "start": "1074200",
    "end": "1075400"
  },
  {
    "text": "lot to sync here but the point is is",
    "start": "1075400",
    "end": "1077360"
  },
  {
    "text": "it's now talking to all three clusters",
    "start": "1077360",
    "end": "1080679"
  },
  {
    "text": "using ephemeral identities with no",
    "start": "1080679",
    "end": "1083360"
  },
  {
    "text": "static",
    "start": "1083360",
    "end": "1084360"
  },
  {
    "text": "secrets and just to show you there's",
    "start": "1084360",
    "end": "1086799"
  },
  {
    "text": "nothing up my",
    "start": "1086799",
    "end": "1089440"
  },
  {
    "text": "sleeves so this now we have my app with",
    "start": "1089799",
    "end": "1093840"
  },
  {
    "text": "a uh config map so this is the uh on",
    "start": "1093840",
    "end": "1099760"
  },
  {
    "text": "Prem right and uh config Maps right",
    "start": "1100320",
    "end": "1104760"
  },
  {
    "text": "that's there and we go through all three",
    "start": "1104760",
    "end": "1106520"
  },
  {
    "text": "and they're all there so we can see that",
    "start": "1106520",
    "end": "1108200"
  },
  {
    "text": "they're sinking in um so yeah that's",
    "start": "1108200",
    "end": "1112120"
  },
  {
    "text": "that's the entire demo uh a lot happened",
    "start": "1112120",
    "end": "1115679"
  },
  {
    "text": "so uh if uh happy to answer questions if",
    "start": "1115679",
    "end": "1120080"
  },
  {
    "text": "I can find my uh thing here um no I",
    "start": "1120080",
    "end": "1125320"
  },
  {
    "text": "don't wrong button I know how to write",
    "start": "1125320",
    "end": "1127600"
  },
  {
    "text": "software I don't know how to use it um",
    "start": "1127600",
    "end": "1130760"
  },
  {
    "text": "so thank you uh there is a bibliography",
    "start": "1130760",
    "end": "1134120"
  },
  {
    "text": "at the end with references to everything",
    "start": "1134120",
    "end": "1136520"
  },
  {
    "text": "this is where you can find me on the",
    "start": "1136520",
    "end": "1137720"
  },
  {
    "text": "socials um the uh QR code if you want to",
    "start": "1137720",
    "end": "1141760"
  },
  {
    "text": "leave some feedback uh please do that'll",
    "start": "1141760",
    "end": "1144320"
  },
  {
    "text": "bring you back to shed where you can",
    "start": "1144320",
    "end": "1146120"
  },
  {
    "text": "give me a hopefully a good review um and",
    "start": "1146120",
    "end": "1148559"
  },
  {
    "text": "if you're interested my book is kuet and",
    "start": "1148559",
    "end": "1150919"
  },
  {
    "text": "Enterprise Guide Third Edition I'll be",
    "start": "1150919",
    "end": "1152600"
  },
  {
    "text": "doing uh book signings uh tomorrow in",
    "start": "1152600",
    "end": "1156400"
  },
  {
    "text": "loft's Booth I think at 12",
    "start": "1156400",
    "end": "1160480"
  },
  {
    "text": "um any",
    "start": "1160480",
    "end": "1163720"
  },
  {
    "text": "questions oh got a question here",
    "start": "1165799",
    "end": "1170519"
  },
  {
    "text": "thank you um the question I had was uh",
    "start": "1173000",
    "end": "1177360"
  },
  {
    "text": "what",
    "start": "1177360",
    "end": "1178280"
  },
  {
    "text": "other uh either SSO or identity",
    "start": "1178280",
    "end": "1181480"
  },
  {
    "text": "providers have you experimented with for",
    "start": "1181480",
    "end": "1184799"
  },
  {
    "text": "example um could something similar be",
    "start": "1184799",
    "end": "1187720"
  },
  {
    "text": "achieved with the oidc um endpoint",
    "start": "1187720",
    "end": "1192240"
  },
  {
    "text": "on uh an eks cluster that provided by",
    "start": "1192240",
    "end": "1195240"
  },
  {
    "text": "AWS so we're still in the realm of using",
    "start": "1195240",
    "end": "1198360"
  },
  {
    "text": "J WTS and public key",
    "start": "1198360",
    "end": "1200240"
  },
  {
    "text": "cryptography um is there anything else",
    "start": "1200240",
    "end": "1202480"
  },
  {
    "text": "that you can share in that space uh",
    "start": "1202480",
    "end": "1205440"
  },
  {
    "text": "that's a great question the question is",
    "start": "1205440",
    "end": "1206799"
  },
  {
    "text": "could this be done using maybe some of",
    "start": "1206799",
    "end": "1208799"
  },
  {
    "text": "the cloud native oidc end points um You",
    "start": "1208799",
    "end": "1213320"
  },
  {
    "text": "probably wouldn't have to to be honest",
    "start": "1213320",
    "end": "1215720"
  },
  {
    "text": "because if you're you know you so the",
    "start": "1215720",
    "end": "1219960"
  },
  {
    "text": "short answer is yes like you could do",
    "start": "1219960",
    "end": "1221559"
  },
  {
    "text": "the same thing where you could issue a",
    "start": "1221559",
    "end": "1223000"
  },
  {
    "text": "token that the oadc",
    "start": "1223000",
    "end": "1225600"
  },
  {
    "text": "endpoint um is going to recognize but",
    "start": "1225600",
    "end": "1228760"
  },
  {
    "text": "you still have to do a token exchange",
    "start": "1228760",
    "end": "1230679"
  },
  {
    "text": "from that oidc endpoint into your Cloud",
    "start": "1230679",
    "end": "1233799"
  },
  {
    "text": "because the clouds themselves don't use",
    "start": "1233799",
    "end": "1235320"
  },
  {
    "text": "oidc internally they've got their own",
    "start": "1235320",
    "end": "1237520"
  },
  {
    "text": "identity so the short answer is yes the",
    "start": "1237520",
    "end": "1239520"
  },
  {
    "text": "long answer is yes but it would probably",
    "start": "1239520",
    "end": "1242200"
  },
  {
    "text": "actually end up being more work that",
    "start": "1242200",
    "end": "1245200"
  },
  {
    "text": "way thank you any other",
    "start": "1245200",
    "end": "1249200"
  },
  {
    "text": "questions still got time so if you have",
    "start": "1249200",
    "end": "1253519"
  },
  {
    "text": "questions must have explained it very",
    "start": "1255480",
    "end": "1257480"
  },
  {
    "text": "very well awesome",
    "start": "1257480",
    "end": "1259120"
  },
  {
    "text": "well thank you very much awesome",
    "start": "1259120",
    "end": "1263440"
  }
]