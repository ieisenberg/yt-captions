[
  {
    "text": "good afternoon KubeCon how are we doing so before we get started today",
    "start": "4560",
    "end": "11599"
  },
  {
    "text": "Kayla's going to take a quick selfie with the audience that's all right ready",
    "start": "11599",
    "end": "17240"
  },
  {
    "text": "okay on three flex if you're up for it two three",
    "start": "17240",
    "end": "25160"
  },
  {
    "text": "woo i think maybe a little more woo woo woo awesome all right so I would not",
    "start": "25160",
    "end": "33280"
  },
  {
    "text": "have worn this outfit if I knew how many people were going to show up",
    "start": "33280",
    "end": "38640"
  },
  {
    "text": "but I'm here and I'm in it and I'm so happy to see you all thank you so much for taking the time on the last day of",
    "start": "38640",
    "end": "45600"
  },
  {
    "text": "KubeCon in the afternoon to come to our talk it means the world to us so what",
    "start": "45600",
    "end": "50960"
  },
  {
    "text": "are we talking about i assume this is why you're here it's the title it's funny um and that's what we're going to",
    "start": "50960",
    "end": "56640"
  },
  {
    "text": "go over this is an entrylevel talk um going over the risks of containers if",
    "start": "56640",
    "end": "62000"
  },
  {
    "text": "you just make them and you don't necessarily know what you're making so we will kick off with our introduction",
    "start": "62000",
    "end": "68000"
  },
  {
    "text": "we are your coaches my name is Kayn Edwards i am a security engineer at Ozero by Octa and also a co-chair of",
    "start": "68000",
    "end": "76240"
  },
  {
    "text": "Kubernetes SIG Security a CNCF ambassador a very enthusiastic dog mom",
    "start": "76240",
    "end": "82400"
  },
  {
    "text": "and a Sander fan i've got my Bridgeport earrings on if that's a reference you appreciate then uh we should be friends",
    "start": "82400",
    "end": "88880"
  },
  {
    "text": "and I will pass it over to Dan to introduce himself so my name is Daniel Murphy i am also a senior security",
    "start": "88880",
    "end": "94560"
  },
  {
    "text": "engineer at Oslo by Octa i am a lover of photography coffee and outdoor adventures and also a massive sounder",
    "start": "94560",
    "end": "101200"
  },
  {
    "text": "fan okay so what are we going to go through today we will start off going over the",
    "start": "101200",
    "end": "108399"
  },
  {
    "text": "lingo we're going to go over the what the how and the TLDDR we all know that the Kubernetes landscape and the",
    "start": "108399",
    "end": "115439"
  },
  {
    "text": "software landscape in general is full of overloaded terms so let's break them down oops and make sure that we know",
    "start": "115439",
    "end": "121600"
  },
  {
    "text": "what we're talking about next we're going to go into the before we're going to meet this soft and vulnerable",
    "start": "121600",
    "end": "127920"
  },
  {
    "text": "container get to know what they've got going on under the hood finally we'll get into what you're all here for which",
    "start": "127920",
    "end": "133520"
  },
  {
    "text": "is the montage we're going to take that container from squishy to strong uh and then we'll finish off with coach's",
    "start": "133520",
    "end": "139440"
  },
  {
    "text": "corner we're going to offer some tips to take forward to your company to your personal home project so that you can",
    "start": "139440",
    "end": "145360"
  },
  {
    "text": "secure your containers and have rocksolid showworthy containers finally um I'll start with",
    "start": "145360",
    "end": "151680"
  },
  {
    "text": "the lingo as I said we want to make sure that we're all jumping into this presentation with a shared understanding",
    "start": "151680",
    "end": "157360"
  },
  {
    "text": "if I say any words I want to make sure that you are thinking of the same thing that I am thinking of starting off",
    "start": "157360",
    "end": "163599"
  },
  {
    "text": "because this is KubeCon we'll go through the Kubernetes components at the very top we've got the cluster that's where",
    "start": "163599",
    "end": "169840"
  },
  {
    "text": "everything lives that's right there a collection of worker nodes then we've got the node these are your workers they",
    "start": "169840",
    "end": "175840"
  },
  {
    "text": "can be virtual or in the cloud um and then we've got the pod this is the smallest deployable uh resource in",
    "start": "175840",
    "end": "182959"
  },
  {
    "text": "Kubernetes and this is where your applications live and then finally we've got the container which is a lightweight",
    "start": "182959",
    "end": "188720"
  },
  {
    "text": "unit that contains all the components needed to run an application such as the application code runtime libraries and",
    "start": "188720",
    "end": "195120"
  },
  {
    "text": "configuration and a few terms that we're going to be",
    "start": "195120",
    "end": "200319"
  },
  {
    "text": "using that are kind of container security specific so starting with base images images like onions are made of",
    "start": "200319",
    "end": "206000"
  },
  {
    "text": "layers and almost all are based on some another image uh we have our",
    "start": "206000",
    "end": "211360"
  },
  {
    "text": "dependencies so these can be operating system or your programming language packages that are used by an app to do",
    "start": "211360",
    "end": "217519"
  },
  {
    "text": "what it does and these can be direct or indirect and it's dependencies all the way down dependencies ooh supply chain",
    "start": "217519",
    "end": "224640"
  },
  {
    "text": "is so hot right now i know right we've got vulnerabilities and exploits these can sometimes get used interchangeably",
    "start": "224640",
    "end": "232000"
  },
  {
    "text": "but when we say vulnerabilities we mean weaknesses in software that can be used to do something that we don't want to",
    "start": "232000",
    "end": "237159"
  },
  {
    "text": "happen and exploits are essentially tools to take advantage of them and lastly scanners so these are just a",
    "start": "237159",
    "end": "244640"
  },
  {
    "text": "specific type of tool that are designed to examine your container in some way to detect things like insecure",
    "start": "244640",
    "end": "250439"
  },
  {
    "text": "configuration things that look like they might be secret vulnerable packages that sort of thing",
    "start": "250439",
    "end": "256639"
  },
  {
    "text": "and so why does this matter so I did a bit of a lit review in preparation for",
    "start": "256639",
    "end": "261919"
  },
  {
    "text": "this talk and found that uh a study from 2021 found that nearly half of the",
    "start": "261919",
    "end": "267840"
  },
  {
    "text": "official Docker Hub library images that they studied contained at least one vulnerability that had a proof of",
    "start": "267840",
    "end": "274639"
  },
  {
    "text": "concept exploit so by that I mean an exploit that can demonstrate that this",
    "start": "274639",
    "end": "279919"
  },
  {
    "text": "thing is actually usable but has not been built to do something actively",
    "start": "279919",
    "end": "285360"
  },
  {
    "text": "malicious like xfilling all of your credentials or starting up a crypto",
    "start": "285360",
    "end": "290440"
  },
  {
    "text": "miner and in a different study from 2023 they found that about 30% of popular",
    "start": "290440",
    "end": "297600"
  },
  {
    "text": "Docker Hub images were based on a parent image that was outdated by over a month by the time the child was built and 70%",
    "start": "297600",
    "end": "304960"
  },
  {
    "text": "of the latest versions of those images were built from an outdated parent with a median stalness of more than 5 and a",
    "start": "304960",
    "end": "310800"
  },
  {
    "text": "half months so probably we should just use latest all the time",
    "start": "310800",
    "end": "317520"
  },
  {
    "text": "about that so in yet another study from 2020 so all of these uh have got links",
    "start": "317520",
    "end": "324479"
  },
  {
    "text": "at the bottom for sources that will be on shed after the show uh there's nothing actually all that special about",
    "start": "324479",
    "end": "330240"
  },
  {
    "text": "latest it's only created if you don't specify a tag when you're building the image and it only gets updated if the",
    "start": "330240",
    "end": "337919"
  },
  {
    "text": "maintainer of that image remembers to point latest at the version that they've just built so when you track latest",
    "start": "337919",
    "end": "344720"
  },
  {
    "text": "you're relying on someone else to dictate which image version you're actually running so this study found",
    "start": "344720",
    "end": "350479"
  },
  {
    "text": "that nearly 12% of images that they looked at had a latest tag that doesn't point to the latest version and about 4%",
    "start": "350479",
    "end": "357840"
  },
  {
    "text": "had a gap uh between latest and actual latest of more than five versions so",
    "start": "357840",
    "end": "363199"
  },
  {
    "text": "there there is kind of a problem here uh in yet more data from 2023",
    "start": "363199",
    "end": "371280"
  },
  {
    "text": "uh secrets turns out they show up everywhere so of the roughly 340,000",
    "start": "371280",
    "end": "377600"
  },
  {
    "text": "images that were studied from both Docker Hub and quite a number of",
    "start": "377600",
    "end": "383360"
  },
  {
    "text": "allegedly private but unsecured registries on the public internet they found uh more than 28,000 of those",
    "start": "383360",
    "end": "390319"
  },
  {
    "text": "images had at least one valid secret and they found a total of 55,000 secrets so most of these were TLS",
    "start": "390319",
    "end": "399280"
  },
  {
    "text": "and SSH private keys couple thousand cloud API keys hello crypto mining and a",
    "start": "399280",
    "end": "406000"
  },
  {
    "text": "couple thousand compromised certificates and those secrets they stay in use so a couple hundred of those",
    "start": "406000",
    "end": "413919"
  },
  {
    "text": "searchs from public CAS and nearly 5,000 of them from private CAS were still valid when the image was pulled for the",
    "start": "413919",
    "end": "421160"
  },
  {
    "text": "study and more worryingly like 275,000 hosts were still",
    "start": "421160",
    "end": "427199"
  },
  {
    "text": "actively using these keys to secure services and these were like HTTPS",
    "start": "427199",
    "end": "433680"
  },
  {
    "text": "servers SSH or posgress LDAP MQTT",
    "start": "433680",
    "end": "440720"
  },
  {
    "text": "wof those are some big numbers you haven't seen anything yet how about",
    "start": "440720",
    "end": "446240"
  },
  {
    "text": "a million 1 million exposed container components on the public internet data",
    "start": "446240",
    "end": "453039"
  },
  {
    "text": "from 2024 found uh more than a million of these exposed",
    "start": "453039",
    "end": "458880"
  },
  {
    "text": "components and by this they meant REST APIs like the Kublet the Kubernetes API server image registries Docker runtime",
    "start": "458880",
    "end": "467160"
  },
  {
    "text": "sockets or SCD clusters of those the majority were",
    "start": "467160",
    "end": "473599"
  },
  {
    "text": "running outdated versions and using default configs which is a recipe for disaster when it comes to vulnerabilities about 3/4 of a million",
    "start": "473599",
    "end": "481440"
  },
  {
    "text": "of them were coup API servers a quarter of a million cublets and these are",
    "start": "481440",
    "end": "486560"
  },
  {
    "text": "things that by their design are supposed to give you remote code execution as a",
    "start": "486560",
    "end": "492280"
  },
  {
    "text": "service and 86% of them were sorry 86%",
    "start": "492280",
    "end": "497919"
  },
  {
    "text": "of the exposed cube API servers allowed anonymous off and this is because from version 1.6 six the default",
    "start": "497919",
    "end": "505759"
  },
  {
    "text": "has been that if you have an authorization mode other than always allow configured then anonymous or is",
    "start": "505759",
    "end": "511919"
  },
  {
    "text": "also enabled by default you can turn this off but because Kubernetes is declarative it's going to take some",
    "start": "511919",
    "end": "517440"
  },
  {
    "text": "liberties if you've not specified certain pieces of configuration it doesn't default to the most secure",
    "start": "517440",
    "end": "522880"
  },
  {
    "text": "option instead it's going to sometimes pick a more usable option so that you're not pulling your hair out trying to work",
    "start": "522880",
    "end": "528880"
  },
  {
    "text": "out why something isn't working uh so we need to be very intentional about ensuring we secure our applications",
    "start": "528880",
    "end": "534720"
  },
  {
    "text": "properly now of these million components that they found about a thousand of them",
    "start": "534720",
    "end": "540640"
  },
  {
    "text": "are on public IP block lists from uh threat intel providers which means we've got a pretty good indication that threat",
    "start": "540640",
    "end": "547440"
  },
  {
    "text": "actors are taking advantage of these services to do bad things so now Kayn is going to introduce",
    "start": "547440",
    "end": "554399"
  },
  {
    "text": "our lucky example container so if we could have a drum roll please more more more more come",
    "start": "554399",
    "end": "561240"
  },
  {
    "text": "on all right this container loves sharing secrets it takes candy from",
    "start": "561240",
    "end": "566480"
  },
  {
    "text": "strangers gives its one-time password over the phone has sent Amazon gift",
    "start": "566480",
    "end": "571839"
  },
  {
    "text": "cards to princes in far away lands and has the same password on all its",
    "start": "571839",
    "end": "576959"
  },
  {
    "text": "accounts kept in plain text on its phone it's soft it's fuzzy and it's going to",
    "start": "576959",
    "end": "583200"
  },
  {
    "text": "compromise your applications introducing Squishy Bin please don't hack",
    "start": "583200",
    "end": "592040"
  },
  {
    "text": "so let's take a quick look at what makes this cutie so squishy starting with our",
    "start": "592320",
    "end": "597360"
  },
  {
    "text": "Docker file now the application that we've containerized here doesn't really matter in this case it's a Flask API",
    "start": "597360",
    "end": "603519"
  },
  {
    "text": "that returns a string but we're trying to demonstrate how we've containerized it and how we're deploying it so we're",
    "start": "603519",
    "end": "609920"
  },
  {
    "text": "starting from a fairly slim Python base image using Alpine from the Docker Hub library we're setting up our work date",
    "start": "609920",
    "end": "616800"
  },
  {
    "text": "we're copying across a pip config so that we've got access to our private registry installing our dependencies get",
    "start": "616800",
    "end": "622320"
  },
  {
    "text": "rid of that pip config copy across the rest of our app source code set up our entry point and we're off to the races",
    "start": "622320",
    "end": "628800"
  },
  {
    "text": "it's pretty small can't be much wrong with that right oh it's",
    "start": "628800",
    "end": "634200"
  },
  {
    "text": "me right yeah so it's a little little baby application it's not doing too much we're going to look right now again at",
    "start": "634200",
    "end": "641600"
  },
  {
    "text": "the Kubernetes deployment um here you can see we've got a pretty standard deployment it's got a namespace label",
    "start": "641600",
    "end": "648160"
  },
  {
    "text": "great job um it's got all kinds of basic settings and this could have come from",
    "start": "648160",
    "end": "653360"
  },
  {
    "text": "anywhere this could come from the Kubernetes.io docs this could come from your favorite ai.com whatever it is this",
    "start": "653360",
    "end": "660000"
  },
  {
    "text": "is a really normal configuration and there's nothing wrong with using it um before we get our little friend",
    "start": "660000",
    "end": "667839"
  },
  {
    "text": "into fighting form we need to get an idea of where we're starting so for the sake of the metaphor this is equivalent",
    "start": "667839",
    "end": "673839"
  },
  {
    "text": "to getting a read on our body composition um or doing those awful before pictures doing our one rep maxes",
    "start": "673839",
    "end": "680160"
  },
  {
    "text": "um Dan's going to take us through the results and give us a good look at where this squishy bin is starting thanks",
    "start": "680160",
    "end": "685880"
  },
  {
    "text": "Kaylin so first we're using a tool from Trivy a tool called Trivy which is an",
    "start": "685880",
    "end": "691440"
  },
  {
    "text": "open source tool from Aqua Security and we're using this to scan our images for any known vulnerabilities or",
    "start": "691440",
    "end": "697519"
  },
  {
    "text": "misconfigurations and as we can see here we have got a",
    "start": "697519",
    "end": "702800"
  },
  {
    "text": "couple of vons that we need to take care of including a pretty high severity one",
    "start": "702800",
    "end": "708160"
  },
  {
    "text": "there that we will come back to in just a minute we are also going to point a tool called Truffle Hog which is another",
    "start": "708160",
    "end": "714800"
  },
  {
    "text": "open source tool from Truffle Security to scan our images for any secrets that might be lurking there it can find all",
    "start": "714800",
    "end": "720240"
  },
  {
    "text": "kinds of secrets in all kinds of locations even though we're just looking at an image today but I'm not sure if it",
    "start": "720240",
    "end": "726000"
  },
  {
    "text": "supports signal group chats just yet and as you can see here so much for our",
    "start": "726000",
    "end": "732639"
  },
  {
    "text": "super secret password e right there in our pip",
    "start": "732639",
    "end": "737720"
  },
  {
    "text": "config so trivy can also be deployed as an operator to your cluster and in this",
    "start": "737720",
    "end": "743279"
  },
  {
    "text": "case it is scanning for the cluster components itself the workloads that",
    "start": "743279",
    "end": "748720"
  },
  {
    "text": "you're running on it the infrastructure that sits underneath your cluster uh the arbback configuration and it creates",
    "start": "748720",
    "end": "754639"
  },
  {
    "text": "custom resources incd which means you can consume this programmatically in any way you choose so I realize this is a",
    "start": "754639",
    "end": "762639"
  },
  {
    "text": "little bit hard to see but this is a sort of overview of some of the findings that we've got from the triv config",
    "start": "762639",
    "end": "768680"
  },
  {
    "text": "report uh and in this case we've got um a mutable root file system we've got",
    "start": "768680",
    "end": "777519"
  },
  {
    "text": "things like no security configs configured we can escalate our own privileges and we're running as the root user we've got an ID for the check we've",
    "start": "777519",
    "end": "784720"
  },
  {
    "text": "got a little description of what's going on here and a message giving you a bit more details of exactly what you should",
    "start": "784720",
    "end": "789760"
  },
  {
    "text": "do to try and remediate this uh",
    "start": "789760",
    "end": "795160"
  },
  {
    "text": "and these are just some of those zoomed in a bit so you can read them a little bit easier so that v that we looked at",
    "start": "795160",
    "end": "802320"
  },
  {
    "text": "earlier who doesn't love a CVSs 8.8 remote code exec in their package management library so CVSS for anyone",
    "start": "802320",
    "end": "809600"
  },
  {
    "text": "who's not familiar is the common vulnerability scoring system it takes a number of factors about a vulnerability",
    "start": "809600",
    "end": "814959"
  },
  {
    "text": "such as what network conditions it needs whether it compromises confidentiality integrity or availability that sort of",
    "start": "814959",
    "end": "821519"
  },
  {
    "text": "thing and gives you a score from 0 to 10 to give you a rough indication of how",
    "start": "821519",
    "end": "826959"
  },
  {
    "text": "severe a problem is so our demo app is pretty small and has a nice shallow dependency tree but who here remembers",
    "start": "826959",
    "end": "833279"
  },
  {
    "text": "the log for Shell Vong and the pain of responding to that incident",
    "start": "833279",
    "end": "838759"
  },
  {
    "text": "so time for our montage let's lift some water jugs and get this container in a",
    "start": "839639",
    "end": "846560"
  },
  {
    "text": "better place starting with some quick wins we're going to patch almost all the things so taking recommendations from",
    "start": "846560",
    "end": "854480"
  },
  {
    "text": "any scanners that you've used and updating your image version but some things to bear in mind when you're running these updates uh if the thing",
    "start": "854480",
    "end": "861680"
  },
  {
    "text": "that you're updating uh aderes to sembic versioning standards that's like major minor patch um that can be a really good",
    "start": "861680",
    "end": "869040"
  },
  {
    "text": "way of trying to get an indication if what you're updating to is going to have breaking changes in it if that major version number's changed uh also worth",
    "start": "869040",
    "end": "875519"
  },
  {
    "text": "having a look at release notes for any of your sort of critical dependencies because they can al some yeah they can",
    "start": "875519",
    "end": "881120"
  },
  {
    "text": "also highlight when things that aren't necessarily breaking changes but will affect you are going to be in the release you're updating too uh make sure",
    "start": "881120",
    "end": "888079"
  },
  {
    "text": "you don't accidentally run alpha in prod um if you do you're a braver person than I am and uh just because it should just",
    "start": "888079",
    "end": "895639"
  },
  {
    "text": "work please test your application i can't tell you how many things I've been told should just work that didn't uh big",
    "start": "895639",
    "end": "903839"
  },
  {
    "text": "shout out here to endoflife.date which is a really great uh online reference for a bunch of projects their supported",
    "start": "903839",
    "end": "910639"
  },
  {
    "text": "versions and like support dates for when those versions are going out of support",
    "start": "910639",
    "end": "915680"
  },
  {
    "text": "uh as well as renovate from mends which is an open source tool that will help automate a whole bunch of different",
    "start": "915680",
    "end": "921440"
  },
  {
    "text": "types of dependency updates um not just security rel relevant ones uh",
    "start": "921440",
    "end": "929199"
  },
  {
    "text": "yeah and fun fun shout out I actually mucked this up when we were preparing the demo and went ahead and pulled a",
    "start": "929199",
    "end": "934639"
  },
  {
    "text": "alpha version that was not latest so just because you're in the field doesn't mean that you're just going to do things",
    "start": "934639",
    "end": "940240"
  },
  {
    "text": "correctly all the time i think more even than bad actors we need to watch out for uh not having paved paths and guard",
    "start": "940240",
    "end": "947199"
  },
  {
    "text": "rails because we all make mistakes we're all tired overworked and uh excitable so let's get into some of the",
    "start": "947199",
    "end": "954079"
  },
  {
    "text": "changes we made to our Kubernetes components to ensure that Squishy Bin gets nice and secure um the first thing",
    "start": "954079",
    "end": "961360"
  },
  {
    "text": "we did is another quick win we just chucked Squishy Bin in its own namespace this is a really common strategy in",
    "start": "961360",
    "end": "967680"
  },
  {
    "text": "Kubernetes to ensure that these multi-tenant applications that are sharing resource space are not actually",
    "start": "967680",
    "end": "973839"
  },
  {
    "text": "accessible to one another so this allows us to have bespoke security policies for each of the workloads that we're running",
    "start": "973839",
    "end": "979360"
  },
  {
    "text": "and you can see right here it's as simple as adding a line to the deployment we can see this in action",
    "start": "979360",
    "end": "985600"
  },
  {
    "text": "right away with our next step that we took for security in the namespace we can go ahead and add um some labels",
    "start": "985600",
    "end": "992800"
  },
  {
    "text": "through the pod security admission controller this is a native Kubernetes um feature it's been available since",
    "start": "992800",
    "end": "999000"
  },
  {
    "text": "1.25 you can also configure the security admission controller um in the YAML we",
    "start": "999000",
    "end": "1004560"
  },
  {
    "text": "all love YAML and want to be there all day i love YAML um but we don't have time for everything today so I've just",
    "start": "1004560",
    "end": "1010160"
  },
  {
    "text": "done a really basic example um you can see the top labels there say enforce and",
    "start": "1010160",
    "end": "1015519"
  },
  {
    "text": "I think that's pretty self-explanatory that's going to go ahead and enforce the um pod security level and this is",
    "start": "1015519",
    "end": "1022959"
  },
  {
    "text": "baseline this is just kind of your okay you've met the minimum security requirements and then below we have two",
    "start": "1022959",
    "end": "1029199"
  },
  {
    "text": "other levels um set to audit and warn and so warn is going to warn the user when they create uh resources and audit",
    "start": "1029199",
    "end": "1036480"
  },
  {
    "text": "is going to add it to the event logs so we'll go ahead and take a peek at what this looks like um so first we will look",
    "start": "1036480",
    "end": "1044319"
  },
  {
    "text": "at the namespace uh itself we see those labels we've already talked about them",
    "start": "1044319",
    "end": "1049679"
  },
  {
    "text": "um so there they are and then we will move on to looking at our pod",
    "start": "1049679",
    "end": "1055720"
  },
  {
    "text": "definition for these examples I've made just some kind of risky business pods bad pod you can see it's got a security",
    "start": "1055720",
    "end": "1062559"
  },
  {
    "text": "context but it's commented out it's not really doing much lifting at the moment and uh the security context that is set",
    "start": "1062559",
    "end": "1069520"
  },
  {
    "text": "there is unconfined which is the most risky one but it's not it's commented out so we'll go ahead we'll create the",
    "start": "1069520",
    "end": "1076679"
  },
  {
    "text": "pod we get a warning um because it has no defined security context um that it would",
    "start": "1076679",
    "end": "1083440"
  },
  {
    "text": "violate the more advanced restrictions so we'll delete that pod and then we will go ahead and",
    "start": "1083440",
    "end": "1091280"
  },
  {
    "text": "uncomment that security context i think maybe we'll see could be a surprise oh yeah i know",
    "start": "1091280",
    "end": "1098120"
  },
  {
    "text": "me and then we will go back in and see if we can create the pot",
    "start": "1098120",
    "end": "1105320"
  },
  {
    "text": "again ah no luck could not create it um so this is really nice if you have uh",
    "start": "1105320",
    "end": "1111280"
  },
  {
    "text": "very risky workloads and you want to ensure that your security policies are being met you would do something like",
    "start": "1111280",
    "end": "1116480"
  },
  {
    "text": "this that enforces uh if you want to get even further you can use tools like gatekeeper um or chao",
    "start": "1116480",
    "end": "1123760"
  },
  {
    "text": "or kuborton to do the same thing the examples I'm using are gatekeeper um but there's lots more uh that you can use",
    "start": "1123760",
    "end": "1130720"
  },
  {
    "text": "all of these examples come from the gatekeeper policy library and there are loads there that um would probably work",
    "start": "1130720",
    "end": "1137039"
  },
  {
    "text": "in your job and also again for your home lab uh and so the two main types of admission controller are validating and",
    "start": "1137039",
    "end": "1143520"
  },
  {
    "text": "mutating we'll start with validating uh this just means that it's going to perform a check when there's a change on a resource and validate that it meets",
    "start": "1143520",
    "end": "1150799"
  },
  {
    "text": "whatever policies that you have set we've started out with a very basic one with the SEC comp uh secure computing",
    "start": "1150799",
    "end": "1157280"
  },
  {
    "text": "mode profile runtime default is kind of again the default basic uh profile and",
    "start": "1157280",
    "end": "1164080"
  },
  {
    "text": "then localhost would mean that you're grabbing the local host profile um and it has to be available on the node disk",
    "start": "1164080",
    "end": "1170160"
  },
  {
    "text": "we've allowed all local host files because we don't give a hoot and now",
    "start": "1170160",
    "end": "1175200"
  },
  {
    "text": "again we will go ahead and watch this in action and so I will apply the policy uh",
    "start": "1175200",
    "end": "1181280"
  },
  {
    "text": "this is all made to run like all of the Kubernetes we've got a YAML file we're going to apply it the constraint is",
    "start": "1181280",
    "end": "1187679"
  },
  {
    "text": "created and we will take a look at it oh no we'll take a look at our bad pod same bad pod as before it's got that uh",
    "start": "1187679",
    "end": "1195440"
  },
  {
    "text": "unconfined profile which means no holds barred it can do whatever it wants within reason uh and then we will go",
    "start": "1195440",
    "end": "1202960"
  },
  {
    "text": "ahead and try and create it you can see that it is denied because of the sec um",
    "start": "1202960",
    "end": "1208960"
  },
  {
    "text": "policy that we just added now we will go and we'll add this exemption and so I wanted to highlight that you're able to",
    "start": "1208960",
    "end": "1214720"
  },
  {
    "text": "make exemptions because not all your workloads have the same security requirements and it's very likely that you're going to have some things that",
    "start": "1214720",
    "end": "1220799"
  },
  {
    "text": "need a little bit more uh of a permissive permissive security policy and this allows us to secure by default",
    "start": "1220799",
    "end": "1228400"
  },
  {
    "text": "and start very secure and then open up where we need rather than lock up and then secure where we can and you can see",
    "start": "1228400",
    "end": "1235280"
  },
  {
    "text": "now that we were able to successfully create the pod woo uh next we will look",
    "start": "1235280",
    "end": "1241280"
  },
  {
    "text": "at the mutating so uh same sort of thing we have a policy and in this case the policy will make changes based on a set",
    "start": "1241280",
    "end": "1247760"
  },
  {
    "text": "of criteria this is a very simple one it's going to look and see what the uh set comp profile is set to if it does",
    "start": "1247760",
    "end": "1254880"
  },
  {
    "text": "not exist it will set it to runtime default and we will watch that in action as well and this is really powerful",
    "start": "1254880",
    "end": "1261360"
  },
  {
    "text": "because it means that you are taking some of the burden off your developers and ensuring that your minimum security",
    "start": "1261360",
    "end": "1266880"
  },
  {
    "text": "requirements are being met we're going to look at the pods we made the pod it was able to be created now we'll delete",
    "start": "1266880",
    "end": "1272559"
  },
  {
    "text": "or we'll look it into the details of it and see that it does not have a set comp profile",
    "start": "1272559",
    "end": "1278200"
  },
  {
    "text": "set which is what we expect now we'll delete the",
    "start": "1278200",
    "end": "1283960"
  },
  {
    "text": "pod and we will add uh our",
    "start": "1283960",
    "end": "1289559"
  },
  {
    "text": "policy applied our policy so now it should pick up that the pod does not have that sec profile set and set it",
    "start": "1289559",
    "end": "1296280"
  },
  {
    "text": "maybe I'm just kidding i know what's going to happen i did this and then we scroll up and there it",
    "start": "1296280",
    "end": "1303919"
  },
  {
    "text": "is hello magic very very very powerful",
    "start": "1303919",
    "end": "1309440"
  },
  {
    "text": "and so we've already touched on updating the image that we're using but we've also made some other changes to our",
    "start": "1309440",
    "end": "1314880"
  },
  {
    "text": "Docker file starting with that pesky pip config so instead of copying a file into",
    "start": "1314880",
    "end": "1320159"
  },
  {
    "text": "our container build and then trying to take it out and leaving it behind in another layer we're instead taking",
    "start": "1320159",
    "end": "1326640"
  },
  {
    "text": "advantage of the ability to mount a secret at build time and it will then be",
    "start": "1326640",
    "end": "1331679"
  },
  {
    "text": "available at the path that we were previously copying it to but not get added to a layer in the final image",
    "start": "1331679",
    "end": "1338799"
  },
  {
    "text": "we've also added a user so that we are no longer running as root and we've set up a health check so that our container",
    "start": "1338799",
    "end": "1344720"
  },
  {
    "text": "runtime can tell if we are still alive or not uh it's not shown here but a",
    "start": "1344720",
    "end": "1349840"
  },
  {
    "text": "quick shout out to uh the docker ignore file uh to make sure that you don't accidentally copy your virtual",
    "start": "1349840",
    "end": "1355440"
  },
  {
    "text": "environment or node modules if you're going to be installing them in the container build anyway or more",
    "start": "1355440",
    "end": "1361360"
  },
  {
    "text": "importantly things like an envr file which some of us use to manage uh different environment variables and",
    "start": "1361360",
    "end": "1367360"
  },
  {
    "text": "project settings as we're moving around different projects on our disc and those usually have secrets in them uh and that",
    "start": "1367360",
    "end": "1375280"
  },
  {
    "text": "uh trusted host stuff you can ignore that for uh general use uh that's just an artifact of how we've set up our demo",
    "start": "1375280",
    "end": "1381520"
  },
  {
    "text": "environment it's just telling the container runtime to just ignore any TLS warnings while we're doing our",
    "start": "1381520",
    "end": "1387480"
  },
  {
    "text": "build uh we are also making some improvements to our deployment so we are now pinning our image to a specific",
    "start": "1387480",
    "end": "1393600"
  },
  {
    "text": "digest to avoid any risks associated with mutable tags so if a threat actor somehow got push access to your image",
    "start": "1393600",
    "end": "1400400"
  },
  {
    "text": "registry they would be able to potentially push poison versions of images overwriting existing tags and",
    "start": "1400400",
    "end": "1407840"
  },
  {
    "text": "then when you spin up your workload you're pulling not the image you think it is by pinning to a SH 256 digest if",
    "start": "1407840",
    "end": "1415440"
  },
  {
    "text": "anything at all in that image changes we get a completely different digest and our deployment will fail we also make",
    "start": "1415440",
    "end": "1423280"
  },
  {
    "text": "use of very high user and group ids to avoid any overlap with the host name uh host range we are running on a readonly",
    "start": "1423280",
    "end": "1430240"
  },
  {
    "text": "root file system we're blocking known prives we are dropping capabilities where we can we're applying a set comp",
    "start": "1430240",
    "end": "1436240"
  },
  {
    "text": "profile and we're applying some resource limits to prevent things like redos or cryptocurrency miner from exhausting our",
    "start": "1436240",
    "end": "1442960"
  },
  {
    "text": "cluster resources and generally wasting electricity so introducing catching",
    "start": "1442960",
    "end": "1448720"
  },
  {
    "text": "container this container background checks its friends and family it has a UB key in a safety deposit box in case",
    "start": "1448720",
    "end": "1455039"
  },
  {
    "text": "it's death it doesn't hone a single IoT device and it sleeps in a Faraday cage",
    "start": "1455039",
    "end": "1461279"
  },
  {
    "text": "it's tough it's unapproachable and we might have actually compromised reliability to get it this rockolid meet",
    "start": "1461279",
    "end": "1468559"
  },
  {
    "text": "catching container so time for a before and after",
    "start": "1468559",
    "end": "1474720"
  },
  {
    "text": "everyone loves a before and after and by this we we still mean scans and we're going to see how squishy bin has made",
    "start": "1474720",
    "end": "1480880"
  },
  {
    "text": "its transition to catching container so before we had a bunch of vulnerabilities that we needed to take care of and now",
    "start": "1480880",
    "end": "1488000"
  },
  {
    "text": "no more known vulnerable packages are installed [Applause]",
    "start": "1488000",
    "end": "1494480"
  },
  {
    "text": "we have a CIS benchmark of Kate's cluster",
    "start": "1494480",
    "end": "1500320"
  },
  {
    "text": "and our workload deployed on it and now it is clean it is fresh it is all",
    "start": "1500320",
    "end": "1506400"
  },
  {
    "text": "passing now this is just our name space your control plane or a multi-tenant cluster is probably going to have",
    "start": "1506400",
    "end": "1512880"
  },
  {
    "text": "requirements that mean that you're not going to perfectly be able to meet every requirement on a benchmark so you're",
    "start": "1512880",
    "end": "1518480"
  },
  {
    "text": "going to need to do some risk analysis and some bespoke enforcement based on the workloads that you are trying to run",
    "start": "1518480",
    "end": "1524799"
  },
  {
    "text": "in your environments but don't let perfect be the enemy of good here applying some of these controls is still",
    "start": "1524799",
    "end": "1530480"
  },
  {
    "text": "going to put you in a much better place than doing nothing at all",
    "start": "1530480",
    "end": "1535799"
  },
  {
    "text": "awesome so now we are going to hop into the coach's corner for those of you that",
    "start": "1535799",
    "end": "1541360"
  },
  {
    "text": "work in security um how do you do this on the scale that you need to across multiple teams multiple stacks multiple",
    "start": "1541360",
    "end": "1548320"
  },
  {
    "text": "needs um we're going to give you some tips to ensure that your container security program gets you the results you've always dreamed of so tip number",
    "start": "1548320",
    "end": "1556080"
  },
  {
    "text": "one um just like when you're trying to get that rock solid baud you want to make sure that the healthy choices are",
    "start": "1556080",
    "end": "1562000"
  },
  {
    "text": "the easy choices and in the case of container security or any security for that matter uh we want to make sure that",
    "start": "1562000",
    "end": "1568159"
  },
  {
    "text": "the secure choices are the default choices um in practice we being security engineers and security teams don't have",
    "start": "1568159",
    "end": "1575360"
  },
  {
    "text": "the time to go through every single Docker file or every Kubernetes YAML um or run scanners in our terminals like we",
    "start": "1575360",
    "end": "1582080"
  },
  {
    "text": "just did uh what we really need to do as security professionals is ensure that we are paving the roads and putting up",
    "start": "1582080",
    "end": "1588000"
  },
  {
    "text": "guard rails we should have a private registry of blessed images but also ensure that we're tr we're making sure",
    "start": "1588000",
    "end": "1593679"
  },
  {
    "text": "that we want and are getting the images that we depend on uh we should ensure that we're patching and upgrading our",
    "start": "1593679",
    "end": "1599919"
  },
  {
    "text": "images regularly that we're enforcing the use of slim and minimal images ensuring that dependencies are only",
    "start": "1599919",
    "end": "1606400"
  },
  {
    "text": "included as needed and they're vetted when they are included um finally have scanning in your pipeline and alert when",
    "start": "1606400",
    "end": "1612559"
  },
  {
    "text": "containers need to be patched and upgraded don't trust that a security review on the creation of a service is",
    "start": "1612559",
    "end": "1618640"
  },
  {
    "text": "going to be reflective of what that service looks like in a week three months three",
    "start": "1618640",
    "end": "1625120"
  },
  {
    "text": "years next uh it's important to make sure that you understand the use cases",
    "start": "1625559",
    "end": "1630960"
  },
  {
    "text": "and goals of your customers and by this I mean the developers that you work with ensuring that you are fully aware of the",
    "start": "1630960",
    "end": "1637520"
  },
  {
    "text": "processes that you're trying to secure and reducing friction in any way you can meeting teams where they are and adding",
    "start": "1637520",
    "end": "1642960"
  },
  {
    "text": "on to any existing workflows they might already have by communicating early and often and involving users in the process",
    "start": "1642960",
    "end": "1650000"
  },
  {
    "text": "you can avoid the nightmare scenario of deploying a control and then disrupting everybody's ability to do their job",
    "start": "1650000",
    "end": "1656559"
  },
  {
    "text": "there is no faster way to upset a company than doing that and a really great way of doing this is by running",
    "start": "1656559",
    "end": "1662320"
  },
  {
    "text": "threat modeling sessions with your teams it gives you a great opportunity to really understand what these teams are",
    "start": "1662320",
    "end": "1668400"
  },
  {
    "text": "building and at the same time it gives teams an opportunity to think like the baddies which can be both enjoyable and",
    "start": "1668400",
    "end": "1675120"
  },
  {
    "text": "quite eye opening and building off of threat modeling um that's a great way to",
    "start": "1675120",
    "end": "1680399"
  },
  {
    "text": "educate teams and encourage buyin if you take time to learn about their application which presumably you will do",
    "start": "1680399",
    "end": "1686080"
  },
  {
    "text": "when you're building a threat model getting them to data flow they're getting them to work through the data flow of their application um you're",
    "start": "1686080",
    "end": "1692799"
  },
  {
    "text": "going to learn a lot about their application and then when you present the threat model you're able to offer relevant and valuable insight and",
    "start": "1692799",
    "end": "1699440"
  },
  {
    "text": "hopefully they're going to be really enthusiastic to action those items because you came up with them together we all know that the most secure",
    "start": "1699440",
    "end": "1705600"
  },
  {
    "text": "application is one that's turned off but how could you use the turned off application and when we make assumptions",
    "start": "1705600",
    "end": "1711919"
  },
  {
    "text": "about developers and the teams and the tools they use not only do we damage relationships but we also risk impacting",
    "start": "1711919",
    "end": "1717600"
  },
  {
    "text": "our customers which at the end of the day none of us want to do we want to create a culture at our companies that",
    "start": "1717600",
    "end": "1723360"
  },
  {
    "text": "values security we're both really lucky that we work at a security company and security is in our blood in our bones",
    "start": "1723360",
    "end": "1729039"
  },
  {
    "text": "but that's not always true you might build something and not think that security is necessarily the priority and",
    "start": "1729039",
    "end": "1734399"
  },
  {
    "text": "when security is successful it's silent you never hear \"Oh man it's been 6 months and we haven't been hacked but",
    "start": "1734399",
    "end": "1740720"
  },
  {
    "text": "you hear the day that there's a compromise.\" Everyone knows about it um so we need to make people know that",
    "start": "1740720",
    "end": "1745840"
  },
  {
    "text": "we're doing stuff we're doing stuff all the time please keep employing us we need it um and then a way to do this in",
    "start": "1745840",
    "end": "1752559"
  },
  {
    "text": "a at a in a mature level is to create a security advocate or champion program um",
    "start": "1752559",
    "end": "1757840"
  },
  {
    "text": "this can be as formal as you want it can be pretty casual but you bring members",
    "start": "1757840",
    "end": "1763279"
  },
  {
    "text": "of various teams in educate them about security and then you have like this mold your your person on the inside",
    "start": "1763279",
    "end": "1768960"
  },
  {
    "text": "who's going to be able to represent the security interests and also come to you and be like \"Hey we're doing this i'd",
    "start": "1768960",
    "end": "1775279"
  },
  {
    "text": "love to hear if you're going to be mad at us in six months.\" um which helps us to stop showing up at launch day being",
    "start": "1775279",
    "end": "1782159"
  },
  {
    "text": "like \"Hey no sorry.\" Um and gets gets us involved early um run security",
    "start": "1782159",
    "end": "1788320"
  },
  {
    "text": "educational sessions do cyberc month it's so fun every single person loves the CTF you just have to make sure they",
    "start": "1788320",
    "end": "1794399"
  },
  {
    "text": "know they're welcome to try um and then completely unrelated to the talk Annie Murphy was on my train here in Canada",
    "start": "1794399",
    "end": "1801360"
  },
  {
    "text": "which is very cool okay and so we're going to start wrapping up now so these are some of the tools and",
    "start": "1801360",
    "end": "1807919"
  },
  {
    "text": "resources that we found really useful during this uh big shout out again to end of life.date that has made that I",
    "start": "1807919",
    "end": "1813919"
  },
  {
    "text": "use that like all the time at work uh shol which is a CLI tool for scanning",
    "start": "1813919",
    "end": "1819039"
  },
  {
    "text": "for end of life software or software that's about to become end of life over gatekeeper triva truffle hog love",
    "start": "1819039",
    "end": "1826159"
  },
  {
    "text": "truffle hog uh and helm which made it so easy to get started with the trivi",
    "start": "1826159",
    "end": "1831279"
  },
  {
    "text": "operator in our cluster saved us so much time and uh docker and kubernetes docker",
    "start": "1831279",
    "end": "1837840"
  },
  {
    "text": "the docker desktop integration with kubernetes gave us a really easy demo environment but there are plenty of",
    "start": "1837840",
    "end": "1843440"
  },
  {
    "text": "other tools kerno confidential containers and all of our so the slides are already",
    "start": "1843440",
    "end": "1850000"
  },
  {
    "text": "available on sheds and we've got some of the resources in our repo uh but we'll be adding some more when we have a",
    "start": "1850000",
    "end": "1855760"
  },
  {
    "text": "chance to recover kayen has to get back to Canada personally I'm probably going to need a couple days of hibernation to recover uh but everything will be on",
    "start": "1855760",
    "end": "1863840"
  },
  {
    "text": "shed and on GitHub perfect so if you're really amped up about security which I",
    "start": "1863840",
    "end": "1868960"
  },
  {
    "text": "hope you are i am i'm pumped um join the conversation you don't have to just do security at your company you don't have",
    "start": "1868960",
    "end": "1874880"
  },
  {
    "text": "to do security at all to help with security you can join me and my co-chairs at six security that is the",
    "start": "1874880",
    "end": "1881919"
  },
  {
    "text": "goose QR code where you could come to the Kubernetes Slack and talk to us about the security come to our meetings",
    "start": "1881919",
    "end": "1887520"
  },
  {
    "text": "hang out and help improve the security landscape you could do it at the CNCF level through tag security but we would",
    "start": "1887520",
    "end": "1892880"
  },
  {
    "text": "really love to have you honestly we would love to hear your opinions we would love to hear your problems please come join us and and make security",
    "start": "1892880",
    "end": "1900320"
  },
  {
    "text": "better no make Kubernetes more secure security is the best so thank you so much for attending this is the QR code",
    "start": "1900320",
    "end": "1906480"
  },
  {
    "text": "for feedback if you've got comments concerns we have a tiny little bit of time for questions maybe if you have",
    "start": "1906480",
    "end": "1912640"
  },
  {
    "text": "them otherwise you can find us i think will be easy to spot and we'll be",
    "start": "1912640",
    "end": "1917679"
  }
]