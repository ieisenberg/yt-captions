[
  {
    "start": "0",
    "end": "170000"
  },
  {
    "text": "awesome alright hello everybody it's about time to get started so welcome to the talk I'm Cody I'm",
    "start": "30",
    "end": "6720"
  },
  {
    "text": "gonna be the track host for this session so if you need anything come get me step out of the projector so today we've got",
    "start": "6720",
    "end": "13290"
  },
  {
    "text": "Satya and Mahesh they're both from Google working on gke pretty extensively and it talked to us",
    "start": "13290",
    "end": "19260"
  },
  {
    "text": "today about IP constrained spaces it's pretty neat because as things continue to grow its going to become harder and",
    "start": "19260",
    "end": "25619"
  },
  {
    "text": "harder to make things fit so I'm kind of excited to see how I can solve this in the future because I'm gonna need to so",
    "start": "25619",
    "end": "32599"
  },
  {
    "text": "real quick reminder administrative note please be sure to rate this talk and all the talks that you go to in sched",
    "start": "32600",
    "end": "39090"
  },
  {
    "text": "afterwards helps for future planning efforts and all that so in a moment I'll hand it off and then five to ten minutes",
    "start": "39090",
    "end": "45870"
  },
  {
    "text": "before the end we'll do Q&A I'll run the mic and we'll go from there so with that Satya and Mahesh thanks",
    "start": "45870",
    "end": "52920"
  },
  {
    "text": "thank you welcome to our talk on",
    "start": "52920",
    "end": "61079"
  },
  {
    "text": "adapting kubernetes to constrain IP environments my name is Mahesh in case you were concerned or confused about who",
    "start": "61079",
    "end": "67049"
  },
  {
    "text": "is who I'm a product manager at GK and Satya is a software engineer in Google",
    "start": "67049",
    "end": "73260"
  },
  {
    "text": "working on GK so we both work together so the our talk is on how do you",
    "start": "73260",
    "end": "80250"
  },
  {
    "text": "mitigate IP exhaustion issues by running kubernetes right so what we're seeing is",
    "start": "80250",
    "end": "85380"
  },
  {
    "text": "there is a demand and supply issue and you're not in kubernetes on the demand side there are different resources that",
    "start": "85380",
    "end": "90720"
  },
  {
    "text": "are requesting IPS and then the supply side there is the availability of free",
    "start": "90720",
    "end": "96000"
  },
  {
    "text": "IPS with the customers based on the net based on the network requirements individually these two are not a problem",
    "start": "96000",
    "end": "103140"
  },
  {
    "text": "but the intersection of these the demand side and the supply side causes an issue the demand side can be the the consumer",
    "start": "103140",
    "end": "109920"
  },
  {
    "text": "and the supplier side is the producer right so with that high-level agenda we gonna",
    "start": "109920",
    "end": "115439"
  },
  {
    "text": "start off with a context you know just we can will provide you the introduction or fundamentals of communities",
    "start": "115439",
    "end": "121140"
  },
  {
    "text": "networking go into the problems scenarios talk about why and when we see",
    "start": "121140",
    "end": "128220"
  },
  {
    "text": "the scenarios move solution space and then at the end there is a you know call-to-action they will",
    "start": "128220",
    "end": "134579"
  },
  {
    "text": "request how you can you know help us out providing your inputs Spanish and so",
    "start": "134579",
    "end": "141620"
  },
  {
    "text": "before we go into the details on start with some a little bit of context so",
    "start": "141620",
    "end": "148920"
  },
  {
    "text": "kubernetes is many things to many people it's container orchestration it's a lot of things and what we want to do is to",
    "start": "148920",
    "end": "157799"
  },
  {
    "text": "make sure that as we like go over the stock we kind of take an abstraction of",
    "start": "157799",
    "end": "165200"
  },
  {
    "text": "easier for us to reason about thanks and to do that we essentially start with",
    "start": "165200",
    "end": "172260"
  },
  {
    "start": "170000",
    "end": "170000"
  },
  {
    "text": "something that's very very fundamental to put kubernetes makes the choice that every part gets its own IP this makes it",
    "start": "172260",
    "end": "180120"
  },
  {
    "text": "different from most of the container authorization systems and in addition to each part getting its own IPS it makes",
    "start": "180120",
    "end": "186629"
  },
  {
    "text": "kind of two other things that are true the kubernetes network model all containers coasters within a part share",
    "start": "186629",
    "end": "193169"
  },
  {
    "text": "the same address space it's the same IP and in addition the part IP is from a flight address space in the cluster",
    "start": "193169",
    "end": "199229"
  },
  {
    "text": "which means any part should be able to talk to any other part just based on its IP and the port to which the part is",
    "start": "199229",
    "end": "205470"
  },
  {
    "text": "bound or expose in addition service IP",
    "start": "205470",
    "end": "210540"
  },
  {
    "text": "is when the cluster are tracked in terms of part I base for endpoints are nothing",
    "start": "210540",
    "end": "215609"
  },
  {
    "text": "but collections of particles part IP is are ephemeral so ports come and go the only thing that stable is the server's",
    "start": "215609",
    "end": "222060"
  },
  {
    "text": "IP and and subtype is like a bit inside the cluster but it translates basically down to a bunch of world IPS and the",
    "start": "222060",
    "end": "228419"
  },
  {
    "text": "assumption if you look at the epital rules and all that as once you do the translation you should just be able to send the packet off to the destination",
    "start": "228419",
    "end": "234870"
  },
  {
    "text": "part which goes back to the rule one on how the product this is expected the third thing is and and this is true in",
    "start": "234870",
    "end": "242669"
  },
  {
    "text": "most systems the pod IP allocation itself happens in a distributed uncoordinated matter like what that",
    "start": "242669",
    "end": "248549"
  },
  {
    "text": "means is you take the full address space that you are saying for the cluster slice it up into smaller ranges you give",
    "start": "248549",
    "end": "254159"
  },
  {
    "text": "it to each node and then add the node level as part of schedule and as pods",
    "start": "254159",
    "end": "261180"
  },
  {
    "text": "come and go IPS are now just within that small pool right and this has significant advantages you don't",
    "start": "261180",
    "end": "266920"
  },
  {
    "text": "have to have a global lock you're guaranteed that as long as each node is having some listing cider any allocation",
    "start": "266920",
    "end": "272950"
  },
  {
    "text": "that you do will be globally unique right and and it does lead to a lot of benefits in the scalability of how you",
    "start": "272950",
    "end": "278320"
  },
  {
    "text": "can do these IPR segments but then kubernetes but this model actually has",
    "start": "278320",
    "end": "285150"
  },
  {
    "text": "certain implications the implications the two main implications are as follows",
    "start": "285150",
    "end": "290230"
  },
  {
    "start": "288000",
    "end": "288000"
  },
  {
    "text": "right kubernetes is IP address language if you're going to give every part an IP right and you have a hundred node",
    "start": "290230",
    "end": "296800"
  },
  {
    "text": "cluster and you want to give let's say a slash 24 as the site arrange to each",
    "start": "296800",
    "end": "302590"
  },
  {
    "text": "node you need at least a slash 17 address space for all of the parts to be able to fit into this model that's a lot",
    "start": "302590",
    "end": "309850"
  },
  {
    "text": "of addresses and from if you come from a traditional world of each VM is a single",
    "start": "309850",
    "end": "314860"
  },
  {
    "text": "IP this is orders of magnitude more right so that's the first demand problem",
    "start": "314860",
    "end": "320650"
  },
  {
    "text": "on the community side second thing though and this is not as obvious is you",
    "start": "320650",
    "end": "325840"
  },
  {
    "text": "cannot think in terms of just the number of pods you run because of the",
    "start": "325840",
    "end": "331660"
  },
  {
    "text": "distributed nature of allocation of IP addresses we need to have a buffer of IPs at each node on top of the number of",
    "start": "331660",
    "end": "339640"
  },
  {
    "text": "parts you expect to run this is because kubernetes as you all know is eventually consistent so what happens when a part",
    "start": "339640",
    "end": "345940"
  },
  {
    "text": "is rescheduled right a part gets rescheduled then you go update the server's endpoints to",
    "start": "345940",
    "end": "351520"
  },
  {
    "text": "basically say now I have a new IP address so that's one change on the API server then all the queue proxy at each",
    "start": "351520",
    "end": "357400"
  },
  {
    "text": "of the nodes watches this and then say okay now have to rewrite the IP tabled rules to say remove the old IP add the",
    "start": "357400",
    "end": "362860"
  },
  {
    "text": "new IP to that list before the IP then becomes inaudible now if there is",
    "start": "362860",
    "end": "368070"
  },
  {
    "text": "communication going on to that IP which was intended or had been used as a",
    "start": "368070",
    "end": "374169"
  },
  {
    "text": "previous service or a different service allocation if you do this too fast you could end up at a point where you are",
    "start": "374169",
    "end": "380440"
  },
  {
    "text": "actually talking to a part that you're not intended to send traffic to and and",
    "start": "380440",
    "end": "385540"
  },
  {
    "text": "then the easiest way to avoid this is to have a buffer of IP so you don't run into IP d use public and so if you look",
    "start": "385540",
    "end": "394120"
  },
  {
    "text": "at all this and then in trying to think about this problem we actually wanted to have a way to model",
    "start": "394120",
    "end": "401379"
  },
  {
    "start": "399000",
    "end": "399000"
  },
  {
    "text": "this behavior right and what are we talking about and and and we found this model a little bit easy to reason about",
    "start": "401379",
    "end": "408219"
  },
  {
    "text": "if because we look at what I just said and look at how Google DS looks at this from a deployment and runtime",
    "start": "408219",
    "end": "414639"
  },
  {
    "text": "perspective there's three things at play the first is kubernetes cluster itself",
    "start": "414639",
    "end": "420249"
  },
  {
    "text": "exists in some network and one right the machines it's the network that we are",
    "start": "420249",
    "end": "425409"
  },
  {
    "text": "deploying the cluster all the nodes form the boundaries of the cluster right so",
    "start": "425409",
    "end": "430659"
  },
  {
    "text": "the ball nodes have IPS in that network Enma all the parts and service IP that",
    "start": "430659",
    "end": "436629"
  },
  {
    "text": "kubernetes talks about or what we typically call cluster IPS which is this IP space we've called n2 over here right",
    "start": "436629",
    "end": "444009"
  },
  {
    "text": "and the boundary between n1 and n2 that kubernetes says must word is the node",
    "start": "444009",
    "end": "449949"
  },
  {
    "text": "boundary right this is your node port this is load balancer type IP e getting read out being added back into the parts",
    "start": "449949",
    "end": "457889"
  },
  {
    "text": "so those are the things that kubernetes expects to work and so as we all know",
    "start": "457889",
    "end": "463329"
  },
  {
    "text": "Service IPS by default are just closed low Kalan the way you export a service outside the cluster is a load balancer",
    "start": "463329",
    "end": "468849"
  },
  {
    "text": "ingress or a node port which essentially go through the node boundary what",
    "start": "468849",
    "end": "474039"
  },
  {
    "text": "kubernetes does not specify is what other interactions can exist between n1 and n2 and where we see the challenges",
    "start": "474039",
    "end": "481089"
  },
  {
    "text": "is how n1 and n2 itself interact and the way we can think of that is in terms of",
    "start": "481089",
    "end": "488409"
  },
  {
    "start": "486000",
    "end": "486000"
  },
  {
    "text": "deployment models like how do you deploy kubernetes right and as we all know like there's only two hard problems in",
    "start": "488409",
    "end": "493449"
  },
  {
    "text": "computer science naming things - invalidation and off-by-one errors and",
    "start": "493449",
    "end": "498789"
  },
  {
    "text": "so to think about deployment what we wanted to do was figure out how do we reason about how do we talk about the",
    "start": "498789",
    "end": "506379"
  },
  {
    "text": "ways in which n1 and n2 interact then we decided to name these things and the first mode which is what we call flak",
    "start": "506379",
    "end": "512740"
  },
  {
    "text": "mode and this is what you typically see in a lot most cloud environments where the pod ip's form a flat address space",
    "start": "512740",
    "end": "519250"
  },
  {
    "text": "with the V PC or the network that you belong to which means part IP is are directly audible from outside the",
    "start": "519250",
    "end": "525670"
  },
  {
    "text": "cluster pods when they talk to an IP address the class not by the note boundary they just go",
    "start": "525670",
    "end": "530730"
  },
  {
    "text": "out a Spotify's this is on top of everything else and kubernetes does for",
    "start": "530730",
    "end": "535770"
  },
  {
    "text": "note port and all of that stuff the second mode is what we are calling an island an island mode is you say the",
    "start": "535770",
    "end": "542820"
  },
  {
    "text": "cluster IPS don't necessarily route from outside the cluster right so they are",
    "start": "542820",
    "end": "549270"
  },
  {
    "text": "only audible inside the cluster but all services that are accessed or created in",
    "start": "549270",
    "end": "554790"
  },
  {
    "text": "the cluster can be exposed through one of these node boundaries load balancer node port whatnot you have and this",
    "start": "554790",
    "end": "560670"
  },
  {
    "text": "braids off drag quad connectivity with just service-oriented exports and it kind of seems to imply oh we now have a",
    "start": "560670",
    "end": "567300"
  },
  {
    "text": "different set of IPs but not really it also has its own challenges and constraints that might not be obvious",
    "start": "567300",
    "end": "573180"
  },
  {
    "text": "and and we will go in through some of those details so this is the context around which we are talking about what",
    "start": "573180",
    "end": "579690"
  },
  {
    "text": "it means to enact kubernetes to a constraint IP address in turn on so such",
    "start": "579690",
    "end": "587130"
  },
  {
    "start": "587000",
    "end": "587000"
  },
  {
    "text": "I talked about the the demand you know demand problem the different resources that are requesting IP from a",
    "start": "587130",
    "end": "594150"
  },
  {
    "text": "supplies side of let us talk about the supply side of the problem as well and look at you know what are some of the",
    "start": "594150",
    "end": "600000"
  },
  {
    "text": "consumption and you know deployment patterns because of which you know the availability of my pieces first and",
    "start": "600000",
    "end": "606180"
  },
  {
    "text": "foremost you know the communities that option is growing so as you you know",
    "start": "606180",
    "end": "611520"
  },
  {
    "text": "start increasing more and I see my great more and more were close to kubernetes you are you know as in essence you are",
    "start": "611520",
    "end": "616680"
  },
  {
    "text": "you are asking for more IPs hybrid and multi cloud adoption we have you know talking to customers they start",
    "start": "616680",
    "end": "623370"
  },
  {
    "text": "off with you know on Prem they go to cloud provider one cloud provider to and by the time you know they spread their",
    "start": "623370",
    "end": "630950"
  },
  {
    "text": "footprint around the the last cloud by the time they go to the last clause they don't have enough IPS to to kind of",
    "start": "630950",
    "end": "637440"
  },
  {
    "text": "provision on the on that particular cloud organizational challenges so you",
    "start": "637440",
    "end": "642750"
  },
  {
    "text": "know this is you know who is provisioning the infrastructure who is creating this cluster who's running the",
    "start": "642750",
    "end": "650310"
  },
  {
    "text": "application and what we are seeing is sometimes there is a new team that is",
    "start": "650310",
    "end": "655370"
  },
  {
    "text": "created for for cloud deployments and there is a inefficiency or not a good",
    "start": "655370",
    "end": "660720"
  },
  {
    "text": "coordination amongst of in teams when it comes to you know finding a free block so this leads to you know issues as well in terms of",
    "start": "660720",
    "end": "668810"
  },
  {
    "text": "newer technologies you know adoption of new technologies which require a flat surface mesh where in the pod needs to",
    "start": "668810",
    "end": "675650"
  },
  {
    "text": "connect directly to or talk to directly to another part whether it be in the same cluster or a cross cluster and",
    "start": "675650",
    "end": "681020"
  },
  {
    "text": "lastly there are certain applications that that want direct port connectivity for for stickiness right so these are",
    "start": "681020",
    "end": "687770"
  },
  {
    "text": "some of the consumption and deployment patterns that that asks for a non-overlapping IP let's look at some of",
    "start": "687770",
    "end": "694460"
  },
  {
    "text": "the solutions so we will talk about different categories of solution to solve these problems and you know I'll",
    "start": "694460",
    "end": "700100"
  },
  {
    "text": "touch upon the the the Y or the ven the solution can be used in such as going to cover the the the how of the solution so",
    "start": "700100",
    "end": "708230"
  },
  {
    "start": "708000",
    "end": "708000"
  },
  {
    "text": "we talked about you know such I talked about how every part requests an IP the",
    "start": "708230",
    "end": "714770"
  },
  {
    "text": "kresson the problem is we need to make certain assumptions about the the the pod per node beforehand so part per node",
    "start": "714770",
    "end": "722930"
  },
  {
    "text": "is the power density or the number of positive running per node if we choose it as each pod requires an IP if we give",
    "start": "722930",
    "end": "730940"
  },
  {
    "text": "a small block to a node for the board assignment it will basically means that your cluster is you know convinces is",
    "start": "730940",
    "end": "738020"
  },
  {
    "text": "going to be pretty small and you can't grow on the other hand if we are conservative and you give a large enough",
    "start": "738020",
    "end": "743870"
  },
  {
    "text": "block that means you have a lot of flexibility but on the other side you are wasting a lot of IPs so why would you why are we seeing a",
    "start": "743870",
    "end": "752000"
  },
  {
    "text": "driver for low power density there are multiple reasons as as described you",
    "start": "752000",
    "end": "757640"
  },
  {
    "text": "want to make sure that you don't have a lot of parts when it comes on on a part on a per node basis in consideration for",
    "start": "757640",
    "end": "764900"
  },
  {
    "text": "the resources and CPU utilization edge compute cases where you are looking for a low footprint and lastly from a high",
    "start": "764900",
    "end": "773300"
  },
  {
    "text": "availability perspective what we see is a lot of customers are also saying instead of a big large cluster I am",
    "start": "773300",
    "end": "778670"
  },
  {
    "text": "going to have multiple smaller cluster this is an analysis it's an unscientific sampling but what we see is more than",
    "start": "778670",
    "end": "786230"
  },
  {
    "text": "85% of the clusters are running with more than 16 watts per node right what it translates to is on the table on the",
    "start": "786230",
    "end": "793370"
  },
  {
    "text": "on the right hand side where you can see if we have / 24 assignment irrespective of what your power density is and what is your",
    "start": "793370",
    "end": "801800"
  },
  {
    "text": "any features aside or based on your power density right if we choose a site",
    "start": "801800",
    "end": "807350"
  },
  {
    "text": "or based on the power density you can have anywhere from 50% saving to about 99 percent saving on a per node basis",
    "start": "807350",
    "end": "814970"
  },
  {
    "text": "right so if you have thousand node clusters you can you can imagine the overall savings that you have in terms of IP how this works is actually it's a",
    "start": "814970",
    "end": "827629"
  },
  {
    "text": "little interesting because we have to coordinate to two variables that are in",
    "start": "827629",
    "end": "833120"
  },
  {
    "text": "two different systems the max number of pods per node is a cubelet conflict",
    "start": "833120",
    "end": "838730"
  },
  {
    "text": "right through the cubelet basically exports how many parts it can it can support at the max number of pods which",
    "start": "838730",
    "end": "845389"
  },
  {
    "text": "the scheduler honors and then we actually have the node ipam which is doing the IP address allocation right",
    "start": "845389",
    "end": "852680"
  },
  {
    "text": "and what we have to do is to to make sure that this math is always right like we've seen before we need a buffers so",
    "start": "852680",
    "end": "857930"
  },
  {
    "text": "max ports plus buffer has to be less than or equal to the number of IPS that are either at the node or you will have",
    "start": "857930",
    "end": "863509"
  },
  {
    "text": "parts that are scheduled they don't get IPS or you could have for IP reuse problems by default a PSU max buffer is",
    "start": "863509",
    "end": "871759"
  },
  {
    "text": "equal to max the buffer is equal to max pods which is you say you want to pick a node part cider that can have at least",
    "start": "871759",
    "end": "877970"
  },
  {
    "text": "two X the number of parts you the math gives you the defaults and you get out",
    "start": "877970",
    "end": "883519"
  },
  {
    "text": "of the out of the box in clusters which is a you get a slash 24 per node which is to put few addresses and max pods we",
    "start": "883519",
    "end": "889790"
  },
  {
    "text": "don't set at cubelet is set to one time so it's essentially 2x time right but be",
    "start": "889790",
    "end": "895459"
  },
  {
    "text": "by being able to know upfront how the deployment works and and and what your intent is anyone can go and actually",
    "start": "895459",
    "end": "903050"
  },
  {
    "text": "tune these two variables and you can also do it but note pool for example if you wanted it and not just globally",
    "start": "903050",
    "end": "909110"
  },
  {
    "text": "across the cluster and get fair amount of optimization in the net IP allocation",
    "start": "909110",
    "end": "914269"
  },
  {
    "text": "the cluster without changing anything else about how kubernetes clusters are working right the next thing that we run",
    "start": "914269",
    "end": "920839"
  },
  {
    "start": "920000",
    "end": "920000"
  },
  {
    "text": "into is yeah this ranges yeah so you know this is about the",
    "start": "920839",
    "end": "927640"
  },
  {
    "text": "the solution spaces how do you dynamically increase your cluster and how do you use discontinuous this",
    "start": "927640",
    "end": "934330"
  },
  {
    "text": "contiguous cider in your network so the reasons for these are you know the",
    "start": "934330",
    "end": "939550"
  },
  {
    "text": "customers are migrating a few book loads at a time and what happens is you know",
    "start": "939550",
    "end": "944740"
  },
  {
    "text": "suddenly the gravity on the cloud increases and you want to dynamically increase the cluster you don't want to",
    "start": "944740",
    "end": "950320"
  },
  {
    "text": "destroy your cluster and then recreate a new cluster so that you can create a bigger cluster the other scenario is",
    "start": "950320",
    "end": "957810"
  },
  {
    "text": "customers are seeing an uptake of their service or there is a Black Friday event coming up and you want to expand your",
    "start": "957810",
    "end": "963190"
  },
  {
    "text": "cluster you want to do that dynamically without creating another cluster you",
    "start": "963190",
    "end": "968200"
  },
  {
    "text": "don't want to disturb an existing cluster and you know you have other consideration considerations when you're",
    "start": "968200",
    "end": "973720"
  },
  {
    "text": "running Multi cluster right so you don't want to kind of go in to get into that so again how do you dynamically increase",
    "start": "973720",
    "end": "980290"
  },
  {
    "text": "your class area and lastly I think we alluded to this before how do you use a fragmented range you might require a",
    "start": "980290",
    "end": "985960"
  },
  {
    "text": "slash 24 for your cluster size but that is a contiguous range is not available so how do you we how do we make use of",
    "start": "985960",
    "end": "993300"
  },
  {
    "text": "discontinuous ranges so that the overall is a slash 24 and and the solution to",
    "start": "993300",
    "end": "999280"
  },
  {
    "text": "this again interestingly involves something that's deep inside kubernetes so if you look at at kubernetes IP table",
    "start": "999280",
    "end": "1006540"
  },
  {
    "text": "rules in even ipbs as a bunch of rules that try to determine whether the cluster traffic or",
    "start": "1006540",
    "end": "1011880"
  },
  {
    "text": "other traffic a packet originated from inside the cluster or not right and",
    "start": "1011880",
    "end": "1017190"
  },
  {
    "text": "kubernetes makes assumptions because of the n1 and n2 that we talked about that if your traffic did not originate from",
    "start": "1017190",
    "end": "1023670"
  },
  {
    "text": "inside the cluster you want to s data to the node boundary or masquerade is no",
    "start": "1023670",
    "end": "1028770"
  },
  {
    "text": "boundary before sending it down and and in order to apply this rule today it",
    "start": "1028770",
    "end": "1033959"
  },
  {
    "text": "uses actually the cluster spots either the slash 17:3 ticular for the cluster to detect whether the traffic originated",
    "start": "1033959",
    "end": "1041160"
  },
  {
    "text": "from inside the cluster or not based on the source range that the IP address falls into and then this actually is is",
    "start": "1041160",
    "end": "1049070"
  },
  {
    "text": "what's fundamentally driving the necessity for having to pick up front a",
    "start": "1049070",
    "end": "1054330"
  },
  {
    "text": "large enough range to in some sense predict the future growth of the cluster",
    "start": "1054330",
    "end": "1059940"
  },
  {
    "text": "like how large do you ever expected to be but if you go fix that and we totally talk about later what",
    "start": "1059940",
    "end": "1065820"
  },
  {
    "text": "we're doing this is work in progress is a kept out of the community and then we would love to have participation but",
    "start": "1065820",
    "end": "1071580"
  },
  {
    "text": "once we fix that and have another way of detecting whether it's a cluster bomb traffic or not or cluster so traffic or",
    "start": "1071580",
    "end": "1077130"
  },
  {
    "text": "not we can make the actual cluster cider assignment a pure ripe and problem at",
    "start": "1077130",
    "end": "1083280"
  },
  {
    "text": "that point you can just ask the cluster grows keep adding fragmented sizes of ranges and and keep making a cluster",
    "start": "1083280",
    "end": "1091020"
  },
  {
    "text": "order whatever addresses you have instead of having to find a large contiguous block of that and and in this",
    "start": "1091020",
    "end": "1097169"
  },
  {
    "text": "we believe it will be a fundamental driver to actually taking a lot of the stress about how do I predict what size",
    "start": "1097169",
    "end": "1105020"
  },
  {
    "text": "cider do I ever need on the cluster like with this we don't have to worry you can start with what you have and add later",
    "start": "1105020",
    "end": "1111120"
  },
  {
    "text": "if you think it's wrong which then leads to the next one which is this little",
    "start": "1111120",
    "end": "1117750"
  },
  {
    "start": "1115000",
    "end": "1115000"
  },
  {
    "text": "transition so far because everything that we've did so far assumed the flat model of addressing where we said the",
    "start": "1117750",
    "end": "1123510"
  },
  {
    "text": "pod IPS are the same as the network IPS and now we are trying to transition into the second models where we have islands",
    "start": "1123510",
    "end": "1129870"
  },
  {
    "text": "and different kinds of islands so in terms of you know running clusters and",
    "start": "1129870",
    "end": "1135059"
  },
  {
    "text": "islands the biggest advantage is the ability to use reuse IPS across multiple",
    "start": "1135059",
    "end": "1141960"
  },
  {
    "text": "clusters right why would someone want to do that or when somebody would want to do that is you know customer wants to",
    "start": "1141960",
    "end": "1149010"
  },
  {
    "text": "emulate their existing network you know based on VLAN segmentation or routing",
    "start": "1149010",
    "end": "1154320"
  },
  {
    "text": "segmentation so they want to run an island mode they want to do Network",
    "start": "1154320",
    "end": "1159419"
  },
  {
    "text": "segmentation on purpose because you know having one flat network and running multiple clusters had some has some fate",
    "start": "1159419",
    "end": "1166110"
  },
  {
    "text": "sharing issues so from that perspective they want to run multiple clusters and the lastly lastly one of the other",
    "start": "1166110",
    "end": "1172020"
  },
  {
    "text": "reasons is clusters are self-serving in that there is not there's no need for inter cluster communication and you know",
    "start": "1172020",
    "end": "1179340"
  },
  {
    "text": "anything that a cluster wants it's it's it's an outbound communication out to internet or somewhere so these are some",
    "start": "1179340",
    "end": "1184799"
  },
  {
    "text": "of the drivers for creating an island more clustered again the solution for this is essentially what my H Pony",
    "start": "1184799",
    "end": "1192240"
  },
  {
    "text": "towards the very end which is you sacrifice or connectivity to be able to say only",
    "start": "1192240",
    "end": "1197250"
  },
  {
    "text": "thing that needs to be accessed from outside the cluster is services that are",
    "start": "1197250",
    "end": "1202530"
  },
  {
    "text": "exposed ourselves type load balancer right or as ingress or as note port and everything else just stays cluster local",
    "start": "1202530",
    "end": "1209570"
  },
  {
    "text": "but this actually has another trade-off to which is which is which is what that",
    "start": "1209570",
    "end": "1214950"
  },
  {
    "text": "picture was trying to point to which is that's Cambridge and now when you say",
    "start": "1214950",
    "end": "1220200"
  },
  {
    "text": "Cambridge it depends on what your context is right so in here are you as",
    "start": "1220200",
    "end": "1226200"
  },
  {
    "text": "you could say Cambridge any good third Massachusetts or you could say Cambridge and actually mean England right and",
    "start": "1226200",
    "end": "1233070"
  },
  {
    "text": "there are two different Cambridge's and way where you end up going to is a function of where you start from which",
    "start": "1233070",
    "end": "1239310"
  },
  {
    "text": "is what you run into with Island more because any address that's within this",
    "start": "1239310",
    "end": "1244680"
  },
  {
    "text": "cluster address space and do if you try to route the cluster will try to route",
    "start": "1244680",
    "end": "1249960"
  },
  {
    "text": "it as traffic inside the cluster which means even though it's an island it cannot be overlapping but what it",
    "start": "1249960",
    "end": "1257160"
  },
  {
    "text": "buys though is so it's kind of like a hole in n1 in terms of what is the routable address space from outside the",
    "start": "1257160",
    "end": "1263760"
  },
  {
    "text": "cluster but you can reuse that same hole across multiple clusters so you can take the same n2 block and create 50",
    "start": "1263760",
    "end": "1269550"
  },
  {
    "text": "different clusters out of it where each cluster basically uses n2 for its local cluster Network and not eat into the",
    "start": "1269550",
    "end": "1276000"
  },
  {
    "text": "address space in n1 but it cannot overlap with any address space that actually needs to be rounded outside the",
    "start": "1276000",
    "end": "1283170"
  },
  {
    "text": "cluster from inside the cluster right and as we already talked about all communication happens through the road",
    "start": "1283170",
    "end": "1288240"
  },
  {
    "text": "boundary either through node port or load balancers which again either do doing under forwarding or node ports but",
    "start": "1288240",
    "end": "1294840"
  },
  {
    "text": "essentially hit the note boundary so the only cost it's visible from outside the cluster in addition to the the network",
    "start": "1294840",
    "end": "1300420"
  },
  {
    "text": "being a hole is essentially the IPS for the doors so you have a third you know trustor you just have the 32 IPS that",
    "start": "1300420",
    "end": "1306300"
  },
  {
    "text": "you're consuming in the n1 address space which then leads to the next interesting",
    "start": "1306300",
    "end": "1312540"
  },
  {
    "text": "use case which is what we call hybrid islands so this is again if you're",
    "start": "1312540",
    "end": "1319110"
  },
  {
    "start": "1313000",
    "end": "1313000"
  },
  {
    "text": "running on Prem you have presence on cloud you can run hybrid islands which is a similar to the islands you know",
    "start": "1319110",
    "end": "1325440"
  },
  {
    "text": "Island classes that we were talking about earlier each environment here acts as an island",
    "start": "1325440",
    "end": "1331119"
  },
  {
    "text": "in and of itself so you know if you're running hybrid on-prem as the same cider",
    "start": "1331119",
    "end": "1336789"
  },
  {
    "text": "on-prem can have on prim can have same cider and your cloud can have the same cider it can be overlapping your",
    "start": "1336789",
    "end": "1345429"
  },
  {
    "text": "communication that that you would do is based on some kind of a proxy that you set up or you know something that you",
    "start": "1345429",
    "end": "1351639"
  },
  {
    "text": "can leverage from the cloud provider and I will talk about the the how of that and lastly there are certain you might",
    "start": "1351639",
    "end": "1359590"
  },
  {
    "text": "have certain concerns about ranges that are being used so we have customers who are saying you know I have this non RFC",
    "start": "1359590",
    "end": "1366960"
  },
  {
    "text": "1918 that I'm using I have to keep it in an island or in a in a contained",
    "start": "1366960",
    "end": "1372549"
  },
  {
    "text": "environment because the cloud doesn't support it other whale orders the cloud providers have the support for these",
    "start": "1372549",
    "end": "1378039"
  },
  {
    "text": "known RFC 1918 but you are concerned the customers are concerned that these are",
    "start": "1378039",
    "end": "1384999"
  },
  {
    "text": "not supported by a by your on-prem devices and therefore they can place these cannot be kind of advertised to",
    "start": "1384999",
    "end": "1390820"
  },
  {
    "text": "your on-prem which essentially leads to the next pattern which is to use IP mask",
    "start": "1390820",
    "end": "1397479"
  },
  {
    "text": "agent to have certain networks behave like islands remember the only thing that that makes something an island mode",
    "start": "1397479",
    "end": "1404590"
  },
  {
    "text": "is all communication is through the node boundary right it doesn't actually say anything beyond that in terms of IP",
    "start": "1404590",
    "end": "1411580"
  },
  {
    "text": "address overlap and then and this is useful because with IP mask agent you can then basically masquerade ranges of",
    "start": "1411580",
    "end": "1417820"
  },
  {
    "text": "traffic that leave the cluster by the node boundary which allows us to essentially have our cake and eat it too",
    "start": "1417820",
    "end": "1423220"
  },
  {
    "text": "which is in a cloud environment for example you could have flat IP within the V PC so you can use features like",
    "start": "1423220",
    "end": "1429970"
  },
  {
    "text": "Meg's for example on GCP that do direct load balancing to the part IPs and things like that using the flat address",
    "start": "1429970",
    "end": "1435940"
  },
  {
    "text": "space but then the cluster is used to host services that are essentially",
    "start": "1435940",
    "end": "1442379"
  },
  {
    "text": "accessed from on-premise environment say for example with IP mask agent we can",
    "start": "1442379",
    "end": "1447789"
  },
  {
    "text": "make sure that all of that access essentially acts like an island more access so essentially the node IP is",
    "start": "1447789",
    "end": "1454450"
  },
  {
    "text": "then become a boundary for all on-prem access but then for the cluster cider",
    "start": "1454450",
    "end": "1459729"
  },
  {
    "text": "you can have other address space that are natively used in clouds or other environments there are not ever",
    "start": "1459729",
    "end": "1465270"
  },
  {
    "text": "access from on Prem and as much pointed to this can be things like CDN addresses or Class C addresses or things like that",
    "start": "1465270",
    "end": "1471450"
  },
  {
    "text": "that you never intend to route on right so this is a way to actually have the",
    "start": "1471450",
    "end": "1477240"
  },
  {
    "text": "ability to trade off for certain use cases ability to behave like a plan type flight I P address space and for other",
    "start": "1477240",
    "end": "1484080"
  },
  {
    "text": "cases where actually the IP address is a constraint to build a notion of a mile and mode like axis using existing which",
    "start": "1484080",
    "end": "1493740"
  },
  {
    "text": "then goes leads us into what do we do these patterns like where do we go next",
    "start": "1493740",
    "end": "1500090"
  },
  {
    "text": "so we have some couple of ideas and this is where we want to invite community discussion and Signet working please",
    "start": "1500090",
    "end": "1505920"
  },
  {
    "text": "come party vintage mark if you have other ideas please come join us and the first thing is what I is a little too",
    "start": "1505920",
    "end": "1512610"
  },
  {
    "start": "1510000",
    "end": "1510000"
  },
  {
    "text": "before which is the cap that we have out there to actually find a different way",
    "start": "1512610",
    "end": "1518400"
  },
  {
    "text": "to identify a cluster networking traffic the key insight here was this the way communities networking works is then and",
    "start": "1518400",
    "end": "1526080"
  },
  {
    "text": "a packet leaves a node before it leaves a load you have to determine whether you",
    "start": "1526080",
    "end": "1533220"
  },
  {
    "text": "have to masquerade or not right once",
    "start": "1533220",
    "end": "1538680"
  },
  {
    "text": "you've left the road there's too much context is already lost to be able to do this which means if you really think",
    "start": "1538680",
    "end": "1544200"
  },
  {
    "text": "about it you don't need to know the full cluster Sider you just need to know what",
    "start": "1544200",
    "end": "1549390"
  },
  {
    "text": "the node side is because you cannot be originating any traffic other than",
    "start": "1549390",
    "end": "1554490"
  },
  {
    "text": "what's in the node cider for that no so you can rewrite most of that logic in just in terms of node cider and if you",
    "start": "1554490",
    "end": "1561660"
  },
  {
    "text": "don't even want IP addresses and you have a consistent let's say interface naming conventions you can even replace",
    "start": "1561660",
    "end": "1567000"
  },
  {
    "text": "IP address with if source interface is of this prefix which would make it",
    "start": "1567000",
    "end": "1572280"
  },
  {
    "text": "completely IP address independent in some sense and be able to determine what's cluster originated versus non",
    "start": "1572280",
    "end": "1578550"
  },
  {
    "text": "cluster originated traffic just to the node boundary and which means each node can have its own block it doesn't have",
    "start": "1578550",
    "end": "1584250"
  },
  {
    "text": "to be contiguous can be disjoint and you can grow the cluster with different kind of IPs",
    "start": "1584250",
    "end": "1589640"
  },
  {
    "text": "we kind of so this idea is out there we would like participation to see there is",
    "start": "1589640",
    "end": "1595520"
  },
  {
    "text": "problems sympathy with this or or we would like to see if this makes sense all other kinds of I Pam or other",
    "start": "1595520",
    "end": "1602160"
  },
  {
    "text": "implementations of cluster networking cube procs implementations the future kind of try and honor this kind of a",
    "start": "1602160",
    "end": "1607740"
  },
  {
    "text": "pattern right so it just becomes it doesn't become that is this model only works if using IP tables or ipbs right",
    "start": "1607740",
    "end": "1614250"
  },
  {
    "text": "we want to be able to make this like a common way of thinking about what's cluster traffic and what's not the next",
    "start": "1614250",
    "end": "1619680"
  },
  {
    "text": "thing that we have out there and this is an open question and we would like like participation is as defined by",
    "start": "1619680",
    "end": "1626220"
  },
  {
    "text": "kubernetes today when you are in an i learn more like scenario you essentially masquerade by node IP which means that",
    "start": "1626220",
    "end": "1633780"
  },
  {
    "text": "if you're outside the cluster based on where your pod is it could be any of the node eyepiece so if there is two parts",
    "start": "1633780",
    "end": "1639780"
  },
  {
    "text": "with two different namespaces of node n1 and they both egress out they will both come as node n1 IP when you see from",
    "start": "1639780",
    "end": "1647010"
  },
  {
    "text": "outside the cluster with your IP address perspective you have lost essentially valuable information what the source",
    "start": "1647010",
    "end": "1653040"
  },
  {
    "text": "range of does it make sense and this is the open question for debate and we would like to I will join the Sigma",
    "start": "1653040",
    "end": "1659610"
  },
  {
    "text": "network America to have this is egress a missing concept in kubernetes in addition to English ingress is very well",
    "start": "1659610",
    "end": "1667140"
  },
  {
    "text": "defined egress is not other than just saying masquerade be no boundary and and",
    "start": "1667140",
    "end": "1672770"
  },
  {
    "text": "the the problem is is even more interesting because since I associated between services and pods is dynamic",
    "start": "1672770",
    "end": "1679530"
  },
  {
    "text": "just on label selection it can be possible that a part is participating in two different service definitions so you",
    "start": "1679530",
    "end": "1686310"
  },
  {
    "text": "could have two different increases to the same part and when you aggress from the prod you cannot go by what suppose I",
    "start": "1686310",
    "end": "1692220"
  },
  {
    "text": "belong to you actually have to have a different association between a what you want a egress ass may be independent and",
    "start": "1692220",
    "end": "1698700"
  },
  {
    "text": "and distinct from what you interesting asked to and and that's why I think this is a lot there's a lot more interesting",
    "start": "1698700",
    "end": "1705060"
  },
  {
    "text": "problems is just saying can we just not using grass IP as the user side and",
    "start": "1705060",
    "end": "1711030"
  },
  {
    "text": "which lights the last thing good for discussion which is the current topic of this guy of interest ipv6 and yeah so",
    "start": "1711030",
    "end": "1718410"
  },
  {
    "start": "1712000",
    "end": "1712000"
  },
  {
    "text": "this is something you would be you know no you should have noticed that we haven't touched upon yet but this is the",
    "start": "1718410",
    "end": "1723750"
  },
  {
    "text": "you know elephant in the room so to say you know be there what do we do about ipv6 there",
    "start": "1723750",
    "end": "1730869"
  },
  {
    "text": "is there is dual stack but there is dual Sakai pv6 support but what that requires",
    "start": "1730869",
    "end": "1737619"
  },
  {
    "text": "is end-to-end ipv6 connectivity right if you have an ipv6 environment and ipv4",
    "start": "1737619",
    "end": "1742869"
  },
  {
    "text": "environment they cannot talk to each other by default so going back to such a point you know there is there are two",
    "start": "1742869",
    "end": "1749349"
  },
  {
    "text": "approaches right either we make a dual stack work end-to-end we have some kind",
    "start": "1749349",
    "end": "1755440"
  },
  {
    "text": "of a model where or we have some kind of a model but there is a there's a protocol translation v6 to P for",
    "start": "1755440",
    "end": "1761199"
  },
  {
    "text": "translation going on so again the request would be to come and come to the Signet working and you know kind of help",
    "start": "1761199",
    "end": "1766719"
  },
  {
    "text": "us you know drive the solution towards this there's also a talk by Tim tomorrow",
    "start": "1766719",
    "end": "1773199"
  },
  {
    "text": "to mark in his keynote he's going to talk about dual dual stack support for kubernetes for the pods thank you what I",
    "start": "1773199",
    "end": "1782739"
  },
  {
    "text": "the take away for us is based on all this different diplomas different cuts talking to different customers different",
    "start": "1782739",
    "end": "1789279"
  },
  {
    "text": "different you know network types that is not a single there's known as this is this issues cannot be solved with a",
    "start": "1789279",
    "end": "1795159"
  },
  {
    "text": "single or a silver bullet solution we require multiple solutions to kind of help different kinds of customers so so",
    "start": "1795159",
    "end": "1802119"
  },
  {
    "text": "if you have missed out on any other use cases any solutions please do let us know we're happy to take questions all",
    "start": "1802119",
    "end": "1810129"
  },
  {
    "text": "right thank you so much all right soy sauce first try to get around as fast as",
    "start": "1810129",
    "end": "1815589"
  },
  {
    "text": "I can hey my name is Anil I'm from visa so we're exactly running into the same",
    "start": "1815589",
    "end": "1822069"
  },
  {
    "text": "problem but the extreme use case what we have is we allocate IP pools our IP",
    "start": "1822069",
    "end": "1827709"
  },
  {
    "text": "subnets at namespace level not just beyond even node right that makes if you're not using anti sub",
    "start": "1827709",
    "end": "1834129"
  },
  {
    "text": "subnet or I people you're already wasting quite a bed right but for the for the auto-scaling you need some kind",
    "start": "1834129",
    "end": "1841569"
  },
  {
    "text": "of buffer so what we are thinking is most of the network we're on frame we",
    "start": "1841569",
    "end": "1847179"
  },
  {
    "text": "use calico most of the security tools are not label based",
    "start": "1847179",
    "end": "1854100"
  },
  {
    "text": "we were thinking to go view Network policy flat and everything that were policies and all of that but",
    "start": "1854100",
    "end": "1860159"
  },
  {
    "text": "unfortunately security to us are still IP based to understand source and destination what not right so one of the",
    "start": "1860159",
    "end": "1867240"
  },
  {
    "text": "thing differently we are looking at the egress using NYE get away as the egress I know you touched up a little bit but",
    "start": "1867240",
    "end": "1874110"
  },
  {
    "text": "can you shell it more ideas why do you think the egress is not a right way or what are the limitations with that maybe",
    "start": "1874110",
    "end": "1882720"
  },
  {
    "text": "III didn't come across Scalia I didn't say egress or I didn't mean to say egress is not the right way I the only",
    "start": "1882720",
    "end": "1891120"
  },
  {
    "text": "thing I was pointing out is that egress I think is independent of the ingress there are a lot of use cases where just",
    "start": "1891120",
    "end": "1899010"
  },
  {
    "text": "people assume because we have an ignorance IP we could just use that as an eClass IP and I think that is not",
    "start": "1899010",
    "end": "1905010"
  },
  {
    "text": "necessarily the most portable way of thinking about it I completely agree with you that having an egress as a",
    "start": "1905010",
    "end": "1910919"
  },
  {
    "text": "first class concept and maybe it's equal Esprit namespace here use case right so you know when it comes from that ingress",
    "start": "1910919",
    "end": "1917130"
  },
  {
    "text": "IPS from that namespace and then security dudes can then make that assumption to say because it came from",
    "start": "1917130",
    "end": "1922169"
  },
  {
    "text": "that egress IP I know it's a namespace and have rules around and and and all that while I was calling out which is we",
    "start": "1922169",
    "end": "1928470"
  },
  {
    "text": "don't have a definition of ingress we can build implementations of ingress but is it valuable to actually have that as",
    "start": "1928470",
    "end": "1934140"
  },
  {
    "text": "a first class concept and I have an association between pot dangerous independent of the part to service to",
    "start": "1934140",
    "end": "1941640"
  },
  {
    "text": "your other point I know you talked about on-prem but the baby are solving this this visibility or visualization problem",
    "start": "1941640",
    "end": "1948030"
  },
  {
    "text": "is visualization problem is by doing VPC flow logs and offering annotations you",
    "start": "1948030",
    "end": "1953730"
  },
  {
    "text": "know GK specific annotations so you know you have more richer information about who is talking to over here thank you",
    "start": "1953730",
    "end": "1960179"
  },
  {
    "text": "for the questions on the please come basic networking all right there's one more I believe in a row right behind",
    "start": "1960179",
    "end": "1968360"
  },
  {
    "text": "hello hi my name is Michael I just you have already a good relationship between",
    "start": "1970070",
    "end": "1976320"
  },
  {
    "text": "the number of paths and knowns so I'm asking about the services side er",
    "start": "1976320",
    "end": "1981360"
  },
  {
    "text": "how it's related to the bots and is it related to the nodes as well or just the bots neither actually the the service",
    "start": "1981360",
    "end": "1990840"
  },
  {
    "text": "side are actually think it was an interesting question and yes we didn't touch base upon it because maybe I",
    "start": "1990840",
    "end": "1998280"
  },
  {
    "text": "briefly walk through it when we look at what's driving the IP address constrain",
    "start": "1998280",
    "end": "2003740"
  },
  {
    "text": "it is actually part I piece the service IP is just defined the number of",
    "start": "2003740",
    "end": "2010940"
  },
  {
    "text": "services that you can have it is doesn't depend on how many nodes you have it doesn't depend on how many parts you have wait do you have a nice 24 first",
    "start": "2010940",
    "end": "2017150"
  },
  {
    "text": "service cider it means you can have up to 255 services obviously you lose a few IPS by default you lose a dot dot one",
    "start": "2017150",
    "end": "2023390"
  },
  {
    "text": "for the master axis you use dot ten for the DNS axis and things like that but essentially the only things that was IP",
    "start": "2023390",
    "end": "2029240"
  },
  {
    "text": "determines is the number of services given that in most cases service number",
    "start": "2029240",
    "end": "2034760"
  },
  {
    "text": "of services and orders of magnitude lower than the number of parts that has never been the constraint that's driving",
    "start": "2034760",
    "end": "2041000"
  },
  {
    "text": "this",
    "start": "2041000",
    "end": "2043150"
  },
  {
    "text": "it depends on your just a quick heads-up so I really have one minute left so I",
    "start": "2059440",
    "end": "2064730"
  },
  {
    "text": "want to follow up on that one there's at least two more in the room so if you know about the whole know maybe even",
    "start": "2064730",
    "end": "2070010"
  },
  {
    "text": "follow up yeah this is not just a use case for well-behaved applications we",
    "start": "2070010",
    "end": "2077360"
  },
  {
    "text": "had nodes that were on top of Debian there was a Debian bug where when the",
    "start": "2077360",
    "end": "2083929"
  },
  {
    "text": "node restarted it didn't release the IP address the net effect of it is is sucked up every IP in this in the subnet",
    "start": "2083930",
    "end": "2091550"
  },
  {
    "text": "for the DHCP and took the whole thing down so there needs to be a more",
    "start": "2091550",
    "end": "2096760"
  },
  {
    "text": "rigorous scheme about provisioning and de-provisioning where for instance if",
    "start": "2096760",
    "end": "2102710"
  },
  {
    "text": "you have pods of a certain service type you can claim those to be within maybe a",
    "start": "2102710",
    "end": "2108290"
  },
  {
    "text": "certain site arranged within a very certain VLAN so you have to do some very",
    "start": "2108290",
    "end": "2113900"
  },
  {
    "text": "structured training of these things to manage IPs especially in a constrained a",
    "start": "2113900",
    "end": "2119350"
  },
  {
    "text": "network space yep thank you and I think the the the the",
    "start": "2119350",
    "end": "2125900"
  },
  {
    "text": "meta point there is I agree with you I Pam can be used for lot more use cases to map to certain behaviors that you",
    "start": "2125900",
    "end": "2134060"
  },
  {
    "text": "want to see in the network but what we are pointing to though is that conceptually even in these models the",
    "start": "2134060",
    "end": "2140720"
  },
  {
    "text": "same constraints will exist alright so that's the end of our time block it's",
    "start": "2140720",
    "end": "2146750"
  },
  {
    "text": "three o'clock I know there's one more question over here for sure so if you want to sync up afterwards of a we do",
    "start": "2146750",
    "end": "2152690"
  },
  {
    "text": "need to make sure that we start moving everybody along so thank you everybody for coming thank you so much [Applause]",
    "start": "2152690",
    "end": "2161989"
  }
]