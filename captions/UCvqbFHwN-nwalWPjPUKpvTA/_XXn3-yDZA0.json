[
  {
    "text": "um welcome to the current artistic storage deep type before starting I want to ask a round of",
    "start": "1140",
    "end": "7620"
  },
  {
    "text": "applause for ching and Patrick today they got",
    "start": "7620",
    "end": "12960"
  },
  {
    "text": "one Community award uh it's the cut wood",
    "start": "12960",
    "end": "19039"
  },
  {
    "text": "uh chop it with something with water okay yeah let's also wish her good luck",
    "start": "20460",
    "end": "26340"
  },
  {
    "text": "with that thing in the airport right thanks",
    "start": "26340",
    "end": "33679"
  },
  {
    "text": "so thanks for coming today we are going to give a deep dive of kubernetes seek",
    "start": "33920",
    "end": "39960"
  },
  {
    "text": "storage my name is Xiang I work at VMware in the cloud native storage team",
    "start": "39960",
    "end": "45660"
  },
  {
    "text": "my name is Mauricio I work in the Anderson Storage team at Google",
    "start": "45660",
    "end": "51260"
  },
  {
    "text": "sorry oh okay here's today's agenda we will talk about who we are what we did",
    "start": "56520",
    "end": "64018"
  },
  {
    "text": "in 1.25 and 1.26 release and Mauricio will give a deep dive over",
    "start": "64019",
    "end": "69600"
  },
  {
    "text": "CSR windows and we'll talk about how to get involved",
    "start": "69600",
    "end": "74960"
  },
  {
    "text": "sixth sword has two co-chairs usad Ali from Google and myself are the co-chairs and we also have Michelle from",
    "start": "76080",
    "end": "84000"
  },
  {
    "text": "Google and Young from Red Hat they are two tech leads there are also many other contributors",
    "start": "84000",
    "end": "89939"
  },
  {
    "text": "in six storage so we have more than 5 000 members in",
    "start": "89939",
    "end": "96360"
  },
  {
    "text": "the sexology slack Channel we also have several other channels we",
    "start": "96360",
    "end": "101700"
  },
  {
    "text": "have a channel for cozy for CSI and CSI windows we also have a regular bi-weekly",
    "start": "101700",
    "end": "109380"
  },
  {
    "text": "meetings and we have a unique approvals for six storage owned repos and packages",
    "start": "109380",
    "end": "117140"
  },
  {
    "text": "what do we do in six storage is defined in our Charter so six storage is a special interest",
    "start": "119579",
    "end": "126119"
  },
  {
    "text": "group focuses on providing storage to Containers running in a kubernetes",
    "start": "126119",
    "end": "131459"
  },
  {
    "text": "cluster in a sick storage most notable features include percent volume claims persistent",
    "start": "131459",
    "end": "139440"
  },
  {
    "text": "volumes so the class and dynamic provisioning we have volume plugins",
    "start": "139440",
    "end": "145260"
  },
  {
    "text": "in addition to persistent volumes that persist data beyond the first life cycle",
    "start": "145260",
    "end": "150660"
  },
  {
    "text": "we also have iPhone volumes such as Secrets config Maps don't worry apis",
    "start": "150660",
    "end": "156959"
  },
  {
    "text": "empty doors their life cycle are tied with the parts life cycle",
    "start": "156959",
    "end": "162480"
  },
  {
    "text": "and we also have container storage interface CSI that allows the sorti",
    "start": "162480",
    "end": "167819"
  },
  {
    "text": "vendors to write a plug-in and have it work in kubernetes and other container",
    "start": "167819",
    "end": "173940"
  },
  {
    "text": "orchestration systems CSI is for block and fast storage now we",
    "start": "173940",
    "end": "179280"
  },
  {
    "text": "also have a cozy container object storage interface that's an alpha feature introduced in 1.25 that that's",
    "start": "179280",
    "end": "186959"
  },
  {
    "text": "objects would support in kubernetes",
    "start": "186959",
    "end": "191900"
  },
  {
    "text": "so first let me talk about what we did in 1.25 release we have a few GA features",
    "start": "195180",
    "end": "203780"
  },
  {
    "text": "the first feature moved to GA in 1.25 is CSI inline F4 volume this feature was",
    "start": "204120",
    "end": "210900"
  },
  {
    "text": "introduced back in 1.15 release so CSI inline Admiral volume just like",
    "start": "210900",
    "end": "217200"
  },
  {
    "text": "other aphmau volumes it can be used to store scratch space as a further for the",
    "start": "217200",
    "end": "225120"
  },
  {
    "text": "parts one most important difference between this Admiral volume and other types is",
    "start": "225120",
    "end": "232140"
  },
  {
    "text": "that this is provided by a CSI driver and the special seats are driver meaning",
    "start": "232140",
    "end": "238080"
  },
  {
    "text": "that you have to write a scissor driver just for this purpose or you need to modify your existing driver to support",
    "start": "238080",
    "end": "245700"
  },
  {
    "text": "this feature to use this feature in the CSI driver",
    "start": "245700",
    "end": "251220"
  },
  {
    "text": "spec you need to specify volume lifecycle modes as Admiral and in the",
    "start": "251220",
    "end": "256739"
  },
  {
    "text": "Pod you need to specify the water type as CSI and specify driver name and",
    "start": "256739",
    "end": "262979"
  },
  {
    "text": "volume attributes they see the driver is suitable to be used as an admiral volume if it's a",
    "start": "262979",
    "end": "270900"
  },
  {
    "text": "built for special purpose and need for volume custom parameters like a driver",
    "start": "270900",
    "end": "277199"
  },
  {
    "text": "that provides secrets to a pod for example secret source is a driver is a good example of that",
    "start": "277199",
    "end": "283500"
  },
  {
    "text": "another example is a search manager Cesar driver a CSA driver is not suitable to be used",
    "start": "283500",
    "end": "290460"
  },
  {
    "text": "as a CSI inline afro volume if it needs to support features such as on",
    "start": "290460",
    "end": "295979"
  },
  {
    "text": "snapshotting cloning expansion if a provisioning is not limited to the local",
    "start": "295979",
    "end": "302160"
  },
  {
    "text": "node or if you need some volume attributes that are only that are",
    "start": "302160",
    "end": "309300"
  },
  {
    "text": "supposed to be restricted to the the admins on it like the parameters in a",
    "start": "309300",
    "end": "314880"
  },
  {
    "text": "storage class and also if you want to persist your data beyond the past life cycle you",
    "start": "314880",
    "end": "323280"
  },
  {
    "text": "that's also not suitable for this feature",
    "start": "323280",
    "end": "327680"
  },
  {
    "text": "the second feature move the qta is the local Admiral storage capacity isolation",
    "start": "329460",
    "end": "334500"
  },
  {
    "text": "this feature was introduced back in 1.7 release so it's been quite a while now",
    "start": "334500",
    "end": "341220"
  },
  {
    "text": "Parts use Admiral storage for Scratch space or for caching or",
    "start": "341220",
    "end": "348419"
  },
  {
    "text": "logging same logs but the parts could be addicted because",
    "start": "348419",
    "end": "354360"
  },
  {
    "text": "other parts are feeling the local storage space so this feature allows users to manage",
    "start": "354360",
    "end": "360360"
  },
  {
    "text": "local account storage just as they manage their memory and CPU",
    "start": "360360",
    "end": "365580"
  },
  {
    "text": "each container of the pot can specify the limits and requests so if the part",
    "start": "365580",
    "end": "372120"
  },
  {
    "text": "uses storage more than what is specified in the limits the Pod will get edited",
    "start": "372120",
    "end": "379320"
  },
  {
    "text": "you can also use this to manage the resource quota for local Admiral storage",
    "start": "379320",
    "end": "385440"
  },
  {
    "text": "come to this feature cannot be used for a CSI driver but recently there were",
    "start": "385440",
    "end": "390720"
  },
  {
    "text": "discussions on extending this feature to support the CSI inline customer modeling",
    "start": "390720",
    "end": "396120"
  },
  {
    "text": "that I just talked about a minute ago",
    "start": "396120",
    "end": "400220"
  },
  {
    "text": "in 1.25 we also have a few Alpha P features",
    "start": "403020",
    "end": "408780"
  },
  {
    "text": "the first one is a secure Linux relabeling with Mount options there is already a feature that allows",
    "start": "408780",
    "end": "415919"
  },
  {
    "text": "us to skip the voting ownership and permission change at Mount time to speed",
    "start": "415919",
    "end": "421740"
  },
  {
    "text": "up the port startup time but that feature will not work if the system has",
    "start": "421740",
    "end": "427919"
  },
  {
    "text": "psycho Linux enabled so that's why we introduced this feature to mount volumes with the correct secure",
    "start": "427919",
    "end": "435660"
  },
  {
    "text": "links context to avoid recursive change of files on the on the volume",
    "start": "435660",
    "end": "442199"
  },
  {
    "text": "speed up the parts that of time and the second other feature is a node",
    "start": "442199",
    "end": "448800"
  },
  {
    "text": "expense Secret it is typical for a storage system to require credentials to be passed in",
    "start": "448800",
    "end": "455460"
  },
  {
    "text": "through a CSI driver for voting operations that includes one expansion",
    "start": "455460",
    "end": "461580"
  },
  {
    "text": "phone expansion can happen on the controller side or the North side or both",
    "start": "461580",
    "end": "467460"
  },
  {
    "text": "from the controller side we already have a way to pass in the secret from the CSI",
    "start": "467460",
    "end": "473160"
  },
  {
    "text": "driver so now in 1.25 we also added this feature for the secretary passed in to",
    "start": "473160",
    "end": "479699"
  },
  {
    "text": "CSI driver when the water won't expansion happening on the Node side when the first system",
    "start": "479699",
    "end": "486479"
  },
  {
    "text": "is resized and the third feature is a reconcile",
    "start": "486479",
    "end": "492479"
  },
  {
    "text": "default storage class assignment this feature allows the existing PVCs without",
    "start": "492479",
    "end": "498060"
  },
  {
    "text": "storage class name specified to be updated to use the new default study class when their search class becomes",
    "start": "498060",
    "end": "505440"
  },
  {
    "text": "available and the fourth feature became Alpha in",
    "start": "505440",
    "end": "511680"
  },
  {
    "text": "1.25 is a object storage API cozy",
    "start": "511680",
    "end": "517700"
  },
  {
    "text": "cozy adds a new kubernetes apis",
    "start": "518820",
    "end": "523860"
  },
  {
    "text": "to provision buckets and also allow ports to access those",
    "start": "523860",
    "end": "529740"
  },
  {
    "text": "buckets cozy component includes a controller manager that binds the Cozy",
    "start": "529740",
    "end": "537360"
  },
  {
    "text": "created buckets to bucket claims there is a sidecar that watches the",
    "start": "537360",
    "end": "542580"
  },
  {
    "text": "kubernetes API objects and cause the Cozy driver to provision or delete",
    "start": "542580",
    "end": "547920"
  },
  {
    "text": "buckets and the Cozy driver implements grpc interfaces communicates with the storage",
    "start": "547920",
    "end": "554760"
  },
  {
    "text": "backend to provision buckets or delete buckets",
    "start": "554760",
    "end": "559920"
  },
  {
    "text": "there are two sets of cozy apis introduced here we have a bucket bucket claim and bucket",
    "start": "559920",
    "end": "566940"
  },
  {
    "text": "class that's very similar to pvpvc and storage class",
    "start": "566940",
    "end": "573180"
  },
  {
    "text": "a bucket represents a physical bucket on the through the back end and the bucket",
    "start": "573180",
    "end": "579060"
  },
  {
    "text": "claim is a user's request for a bucket that's in the user's name space",
    "start": "579060",
    "end": "584279"
  },
  {
    "text": "and the bucket class that specifies the type of the bucket that you want to",
    "start": "584279",
    "end": "589500"
  },
  {
    "text": "provision and the second side of apis or bucket",
    "start": "589500",
    "end": "595260"
  },
  {
    "text": "access and bucket access class that is for the Pod to get access to the bucket",
    "start": "595260",
    "end": "603200"
  },
  {
    "text": "so now let me talk about what we are working on in 1.26 release in 1.26 release we also have some",
    "start": "606779",
    "end": "614459"
  },
  {
    "text": "features that are targeting ga",
    "start": "614459",
    "end": "618980"
  },
  {
    "text": "so we have delegate FS group to CSI driver mode is targeting GA in 1.26 release",
    "start": "619680",
    "end": "628820"
  },
  {
    "text": "so in the in the part security context you know the fs group setting that you",
    "start": "628820",
    "end": "634920"
  },
  {
    "text": "must specify so that the Voting is readable and writable by the part if the",
    "start": "634920",
    "end": "640860"
  },
  {
    "text": "Pod runs as a null root user and based on the fs group kubernetes",
    "start": "640860",
    "end": "646380"
  },
  {
    "text": "will recursively change the ownership and permissions of all the volumes on",
    "start": "646380",
    "end": "652079"
  },
  {
    "text": "their pod unless if the fs Secrets change FS group change policy setting",
    "start": "652079",
    "end": "659579"
  },
  {
    "text": "specified to skip it however not every CSA driver can modify",
    "start": "659579",
    "end": "666300"
  },
  {
    "text": "the only ownership of missions for example NFS type or other voting type",
    "start": "666300",
    "end": "672540"
  },
  {
    "text": "that does not support Unique Style permission changes that's why we",
    "start": "672540",
    "end": "677820"
  },
  {
    "text": "introduce this feature to let the CSR driver to opt out",
    "start": "677820",
    "end": "683040"
  },
  {
    "text": "so there are three different settings for this FS group policy in CSI driver",
    "start": "683040",
    "end": "688440"
  },
  {
    "text": "spec by default it is a real ones with FS type",
    "start": "688440",
    "end": "693899"
  },
  {
    "text": "that means we'll examine that at long time and determine whether we need to apply modification or not",
    "start": "693899",
    "end": "700380"
  },
  {
    "text": "the second one is the file that means always apply modification and the the",
    "start": "700380",
    "end": "706260"
  },
  {
    "text": "third one is none that allows the system driver to opt out and never apply modifications",
    "start": "706260",
    "end": "713899"
  },
  {
    "text": "we also have a few features targeting data in 1.26 release",
    "start": "716279",
    "end": "721860"
  },
  {
    "text": "the first one is the control volume mode conversion between source and Target",
    "start": "721860",
    "end": "727680"
  },
  {
    "text": "so we have a use case for backend restore sometimes the backup software needs to change the volume mode from",
    "start": "727680",
    "end": "735600"
  },
  {
    "text": "file system to block to support efficient backups however that could",
    "start": "735600",
    "end": "741420"
  },
  {
    "text": "lead to a potential security problem that's why we added this feature to",
    "start": "741420",
    "end": "746640"
  },
  {
    "text": "prevent unauthorized only mode conversion and we also have a reconcile default",
    "start": "746640",
    "end": "752519"
  },
  {
    "text": "search class assignment that we are targeting data in 1.26",
    "start": "752519",
    "end": "758100"
  },
  {
    "text": "and the third one is a project we co-owned with Sig apps Auto remove PVCs",
    "start": "758100",
    "end": "764940"
  },
  {
    "text": "created by safer sets this this adds an option to allow PVCs create a device",
    "start": "764940",
    "end": "771899"
  },
  {
    "text": "that was such to be removed automatically and also we have a non-creation feature",
    "start": "771899",
    "end": "779700"
  },
  {
    "text": "targeting beta in 1.26",
    "start": "779700",
    "end": "783800"
  },
  {
    "text": "so this is the feature we introduced in 1.24 this allows stable workloads to fail",
    "start": "785100",
    "end": "791399"
  },
  {
    "text": "over to a different nodes after the origin node is shut down now gracefully",
    "start": "791399",
    "end": "798120"
  },
  {
    "text": "a no shutdown is a graceful only if a cubelet can detect that",
    "start": "798120",
    "end": "805200"
  },
  {
    "text": "and cubelet depends on system D's inhibitor lock to detect a shutdown",
    "start": "805200",
    "end": "810779"
  },
  {
    "text": "however not every system supports this mechanism so if it's not supported cubely does not",
    "start": "810779",
    "end": "818399"
  },
  {
    "text": "detect that then it becomes a non-graceful no shutter this feature the graceful no sharing",
    "start": "818399",
    "end": "823860"
  },
  {
    "text": "feature also requires uh two grades period config parameters incubate if those are",
    "start": "823860",
    "end": "831000"
  },
  {
    "text": "not configured properly then this feature also will not work so that's why we also need the San",
    "start": "831000",
    "end": "837120"
  },
  {
    "text": "Andreas Foundation happens if you don't have if you don't do any",
    "start": "837120",
    "end": "843540"
  },
  {
    "text": "intervention then your workload could be stuck under shutdown node forever",
    "start": "843540",
    "end": "849120"
  },
  {
    "text": "um without moving to another running node to use this feature",
    "start": "849120",
    "end": "855320"
  },
  {
    "text": "you first need to enable the feature gate and make sure that the node is",
    "start": "855320",
    "end": "860579"
  },
  {
    "text": "really shut down and apply a auto service change on that node after that the the port GC controller will",
    "start": "860579",
    "end": "867240"
  },
  {
    "text": "forcefully delete the parts and the attach detached controller will firstly",
    "start": "867240",
    "end": "872820"
  },
  {
    "text": "detach this volumes after that the workload will move successfully to another load node",
    "start": "872820",
    "end": "879720"
  },
  {
    "text": "so now we are targeting beta and after that depending on user feedback we do",
    "start": "879720",
    "end": "886260"
  },
  {
    "text": "plan to move this feature to GA eventually and this feature right now requires the",
    "start": "886260",
    "end": "892920"
  },
  {
    "text": "menu user intervention you need to manually apply this taint so we are also",
    "start": "892920",
    "end": "898440"
  },
  {
    "text": "looking at how to automate this in our next steps we had a session about this on Wednesday",
    "start": "898440",
    "end": "905240"
  },
  {
    "text": "so you can check out the video recording if you are interested",
    "start": "905240",
    "end": "911899"
  },
  {
    "text": "and in 1.26 we also have a few features targeting Alpha",
    "start": "914339",
    "end": "920100"
  },
  {
    "text": "the first one is the provision volumes from Cross namespace snapshot that",
    "start": "920100",
    "end": "925320"
  },
  {
    "text": "allows the PVCs to be provisioned from a volume snapshot in a different namespace",
    "start": "925320",
    "end": "933600"
  },
  {
    "text": "and we also have this warning group and the volume group snapshot feature which",
    "start": "933600",
    "end": "938760"
  },
  {
    "text": "introduces new apis to manage multiple volumes together and provide a warning",
    "start": "938760",
    "end": "945899"
  },
  {
    "text": "group snapshot API to take a snapshot of a boarding group",
    "start": "945899",
    "end": "951800"
  },
  {
    "text": "so here's a table that shows the CSI migration six storage has been working on this for",
    "start": "953040",
    "end": "959699"
  },
  {
    "text": "several releases now in 1.25 the core CSM migration mode to ga",
    "start": "959699",
    "end": "967019"
  },
  {
    "text": "we also have several drivers including openstack Cinder Azure disk",
    "start": "967019",
    "end": "973560"
  },
  {
    "text": "AWS EVS gcpd mode to ga and Azure file and the vsphere are also",
    "start": "973560",
    "end": "981839"
  },
  {
    "text": "targeting GA in 1.26 release so you can take a look of this table and",
    "start": "981839",
    "end": "988320"
  },
  {
    "text": "find out the CSM equation status",
    "start": "988320",
    "end": "992300"
  },
  {
    "text": "I also have this table here that shows the entry story driver removal this",
    "start": "993959",
    "end": "999300"
  },
  {
    "text": "drivers do not go through the CSM migration process",
    "start": "999300",
    "end": "1005360"
  },
  {
    "text": "so with that I'm going to hand it over to Mauricio who's going to",
    "start": "1005360",
    "end": "1011240"
  },
  {
    "text": "give us a deep dive on CSA Windows all right thank you",
    "start": "1011240",
    "end": "1016060"
  },
  {
    "text": "okay so let's first look at kubernetes windows and CSI uh on the diagram in the right we see a",
    "start": "1016279",
    "end": "1023540"
  },
  {
    "text": "cluster that has two in two node pools a Linux node pool and a Windows node pool",
    "start": "1023540",
    "end": "1028640"
  },
  {
    "text": "the idea is that Windows workloads run in the windows notebook cornetta",
    "start": "1028640",
    "end": "1034339"
  },
  {
    "text": "supports three Windows server operating systems those are the long-term servicing Channel 2019 2022",
    "start": "1034339",
    "end": "1042199"
  },
  {
    "text": "and it also supports the semi-annual channel the long-term servicing channel",
    "start": "1042199",
    "end": "1048740"
  },
  {
    "text": "has raised us every two to three years the semi-annual Channel I think it's",
    "start": "1048740",
    "end": "1053960"
  },
  {
    "text": "being discontinued um we also see in a coordinates cluster that is running Windows a Windows node",
    "start": "1053960",
    "end": "1061400"
  },
  {
    "text": "pool that the control plane components are still running in Linux so uh all of the components that you are aware of the",
    "start": "1061400",
    "end": "1067760"
  },
  {
    "text": "API server the queue scheduler the Q control manager all of those are still in the control plane and in CSI we have",
    "start": "1067760",
    "end": "1076820"
  },
  {
    "text": "three sets of RPC Services representing the three components that CSI drivers",
    "start": "1076820",
    "end": "1082340"
  },
  {
    "text": "need to implement the null component and the identity component and the controller component so the controller component is still",
    "start": "1082340",
    "end": "1089900"
  },
  {
    "text": "running in the control plane but for operations that need to run in the node",
    "start": "1089900",
    "end": "1095600"
  },
  {
    "text": "component that's where we need support for Windows too so in CSI there are three components that need to be",
    "start": "1095600",
    "end": "1103940"
  },
  {
    "text": "working in Windows 2 those are the no component of the CSI driver liveness",
    "start": "1103940",
    "end": "1109100"
  },
  {
    "text": "probe no driver register those two last ones liveness probe and no driver register are maintained by kubernetes",
    "start": "1109100",
    "end": "1115640"
  },
  {
    "text": "CSI and the CSI driver is maintained by the storage provider",
    "start": "1115640",
    "end": "1121580"
  },
  {
    "text": "also kubernetes is minimally uh it doesn't tell you how you should deploy",
    "start": "1121580",
    "end": "1128179"
  },
  {
    "text": "Your solution into the cluster and a usual solution to deploy the node component into the cluster is to use a",
    "start": "1128179",
    "end": "1134299"
  },
  {
    "text": "demon set and um in order to avoid having two different",
    "start": "1134299",
    "end": "1140419"
  },
  {
    "text": "images in the Linux demon set and in the windows demon set we can use",
    "start": "1140419",
    "end": "1146419"
  },
  {
    "text": "um multi-arc build pipeline where we create images for both operating systems and",
    "start": "1146419",
    "end": "1153679"
  },
  {
    "text": "tie them together with an oci image manifest that way both uh",
    "start": "1153679",
    "end": "1158720"
  },
  {
    "text": "both demon sets refer to the same image and then it's in the note where the",
    "start": "1158720",
    "end": "1163880"
  },
  {
    "text": "decision to take the Right image is taken",
    "start": "1163880",
    "end": "1168760"
  },
  {
    "text": "okay so let's look at what happens in CSI under the hood",
    "start": "1170059",
    "end": "1175580"
  },
  {
    "text": "there are um calls that the CSI spec defines",
    "start": "1175580",
    "end": "1181940"
  },
  {
    "text": "in this diagram on the right we see one case for uh for the life cycle of a",
    "start": "1181940",
    "end": "1187580"
  },
  {
    "text": "dynamically provisioned volume what happens when uh when a workload",
    "start": "1187580",
    "end": "1194120"
  },
  {
    "text": "requests a PVC is that there are components in the control plane that will receive",
    "start": "1194120",
    "end": "1200559"
  },
  {
    "text": "requests from CSI sidecars so these are calls that should be implemented by the",
    "start": "1200559",
    "end": "1206840"
  },
  {
    "text": "controller component of the CSI driver the one that is create volume and control publish volume in the red",
    "start": "1206840",
    "end": "1214059"
  },
  {
    "text": "rectangle there um and as I mentioned those are still happening in Linux",
    "start": "1214059",
    "end": "1221000"
  },
  {
    "text": "um but for Windows we're focused on the blue box which has four operations",
    "start": "1221000",
    "end": "1227380"
  },
  {
    "text": "so there are two operations for setup the first one is know the stage volume and node publish volume so I think it's",
    "start": "1228740",
    "end": "1236539"
  },
  {
    "text": "worth mentioning what happens in Linux so that we can understand what is the difference with Linux or with Windows 3",
    "start": "1236539",
    "end": "1242960"
  },
  {
    "text": "so in in Linux what happens when a device is attached",
    "start": "1242960",
    "end": "1249620"
  },
  {
    "text": "to a node we need to format it and this happens in this node stage volume call",
    "start": "1249620",
    "end": "1256640"
  },
  {
    "text": "the CSI driver usually uses a library from kubernetes called kubernetes Mount",
    "start": "1256640",
    "end": "1262039"
  },
  {
    "text": "utils that has utilities to execute them mkfs command in Linux and also to well",
    "start": "1262039",
    "end": "1270380"
  },
  {
    "text": "that's for to format it and to mount it it uses the mount command uh in Windows we don't have these",
    "start": "1270380",
    "end": "1276740"
  },
  {
    "text": "commands but we have similar Powershell commands so they workloading in Linux in",
    "start": "1276740",
    "end": "1283039"
  },
  {
    "text": "Windows is to create a Windows volume we formatted to NTFS we create a partition",
    "start": "1283039",
    "end": "1288080"
  },
  {
    "text": "access path in the node and that's called the global mount the next step is not polish volume which",
    "start": "1288080",
    "end": "1295700"
  },
  {
    "text": "is to make this volume available to the pod in Linux this is done with a Buy Mount",
    "start": "1295700",
    "end": "1303860"
  },
  {
    "text": "but in Windows because there is no support for it we do it with a Sim link to the partition",
    "start": "1303860",
    "end": "1310700"
  },
  {
    "text": "access path and this is called the Pod mount that is for the setup step and at that",
    "start": "1310700",
    "end": "1317299"
  },
  {
    "text": "point the workloads can start using uh the PV then at some point the workload will",
    "start": "1317299",
    "end": "1324320"
  },
  {
    "text": "um will be out of the cluster and we will go through the reverse",
    "start": "1324320",
    "end": "1330200"
  },
  {
    "text": "systems which are to tear down the volume so um in Linux this is done with the",
    "start": "1330200",
    "end": "1337400"
  },
  {
    "text": "u-mount command but in Windows it's done by reversing the steps above which are",
    "start": "1337400",
    "end": "1343159"
  },
  {
    "text": "removing the Sim Link in no damp unpublished volume and in node unstageable we remove the partition",
    "start": "1343159",
    "end": "1349159"
  },
  {
    "text": "access path okay so in addition in Windows these",
    "start": "1349159",
    "end": "1356419"
  },
  {
    "text": "operations the volume of format and mount operations are privileged operations and they can't be done",
    "start": "1356419",
    "end": "1362900"
  },
  {
    "text": "through a Windows container there is an asterisk there because it's now doable I",
    "start": "1362900",
    "end": "1368659"
  },
  {
    "text": "will talk about that in the next slide but when we started working on this there was no support to do that and as a",
    "start": "1368659",
    "end": "1375020"
  },
  {
    "text": "workaround a lot of components in kubernetes that run in Windows usually do this through",
    "start": "1375020",
    "end": "1381440"
  },
  {
    "text": "proxies and we also have a project called CSI proxy uh which is a binary",
    "start": "1381440",
    "end": "1388280"
  },
  {
    "text": "that runs in the host so uh when CSI proxy starts",
    "start": "1388280",
    "end": "1395179"
  },
  {
    "text": "it creates name pipes in the host you could imagine that this is all happening in the windows node and yeah",
    "start": "1395179",
    "end": "1402919"
  },
  {
    "text": "CSI proxies the CSI proxy binary is running at that point",
    "start": "1402919",
    "end": "1408820"
  },
  {
    "text": "next we deploy the CSI driver and the CSI driver needs to communicate with the",
    "start": "1408919",
    "end": "1415100"
  },
  {
    "text": "CSI proxy binary through a library that is also an artifact of the CSI proxy project",
    "start": "1415100",
    "end": "1420740"
  },
  {
    "text": "so um we have multiple versions of it because it could be possible that uh a",
    "start": "1420740",
    "end": "1427940"
  },
  {
    "text": "driver used uh used the beta version while while uh we were still working on",
    "start": "1427940",
    "end": "1434900"
  },
  {
    "text": "making this P1 and then at some point it became B1 and now we need also need to",
    "start": "1434900",
    "end": "1441200"
  },
  {
    "text": "manage these multiple version problem and finally it comes time to those",
    "start": "1441200",
    "end": "1449179"
  },
  {
    "text": "operations as I mentioned before that are executed from the cubelete so the cubelet will call node stage volume it",
    "start": "1449179",
    "end": "1454820"
  },
  {
    "text": "will go to the CSI driver the CSI driver will try to format amount that the device it will use the CSI proxy library",
    "start": "1454820",
    "end": "1463179"
  },
  {
    "text": "and it will uh talk with the",
    "start": "1463179",
    "end": "1470380"
  },
  {
    "text": "CSI proxy implementation that does all of those commands that I mentioned above",
    "start": "1470380",
    "end": "1475580"
  },
  {
    "text": "so it's worth noticing that this even though this is the current CSI proxy architecture we're planning on modifying",
    "start": "1475580",
    "end": "1482419"
  },
  {
    "text": "this so that it's easier and this is where I'll talk about first process containers next a few of the drawbacks",
    "start": "1482419",
    "end": "1489679"
  },
  {
    "text": "of this model that are not only Forester HR for most of the proxy components in",
    "start": "1489679",
    "end": "1495799"
  },
  {
    "text": "in kubernetes is that we have an additional component that we have to maintain which is CSI proxy and it's",
    "start": "1495799",
    "end": "1502400"
  },
  {
    "text": "difficult to maintain as I mentioned we may have new features and those need to",
    "start": "1502400",
    "end": "1507799"
  },
  {
    "text": "be part of our new uh new release so um that eventually becomes hard to",
    "start": "1507799",
    "end": "1514640"
  },
  {
    "text": "maintain and there is also a tiny increase in latency because now we have to make",
    "start": "1514640",
    "end": "1521539"
  },
  {
    "text": "calls from the CSL driver to CSI proxy through the name pipes all those calls are done with grpc and there is this",
    "start": "1521539",
    "end": "1527960"
  },
  {
    "text": "product above serialization this realization and so on so that's a tiny bit of increasing latency that's a small",
    "start": "1527960",
    "end": "1535940"
  },
  {
    "text": "drawback of this design okay so",
    "start": "1535940",
    "end": "1541220"
  },
  {
    "text": "um luckily the sick Windows team started working at the same time while while we",
    "start": "1541220",
    "end": "1547039"
  },
  {
    "text": "were working on this um on this feature called win windows cost process spot which is a way to run",
    "start": "1547039",
    "end": "1554020"
  },
  {
    "text": "uh ports in Windows as a host process container this is different to a",
    "start": "1554020",
    "end": "1560059"
  },
  {
    "text": "privileged container in Linux um it's actually running as a process in",
    "start": "1560059",
    "end": "1565700"
  },
  {
    "text": "the Windows host and one of the caveats is that there is no file system isolation so this means that the cluster",
    "start": "1565700",
    "end": "1573380"
  },
  {
    "text": "should have additional policies so that workloads cannot become a host process",
    "start": "1573380",
    "end": "1579020"
  },
  {
    "text": "spots because they could access the volumes of all of the other",
    "start": "1579020",
    "end": "1584840"
  },
  {
    "text": "um workload so that's something to keep in mind so um in addition if uh now that we we",
    "start": "1584840",
    "end": "1594080"
  },
  {
    "text": "know of this feature if a CSI driver becomes a host process spot then the CSI driver itself can run this",
    "start": "1594080",
    "end": "1599960"
  },
  {
    "text": "privileges storage operations it doesn't go it doesn't need to go through the CSI proxy binary",
    "start": "1599960",
    "end": "1606320"
  },
  {
    "text": "but CSI drivers still the CSI driver still needs the format and mount",
    "start": "1606320",
    "end": "1611600"
  },
  {
    "text": "functionality that is in CSI proxy and the current plan is to transform all of",
    "start": "1611600",
    "end": "1616760"
  },
  {
    "text": "that code that we had in the previous slide to a library so that CSI drivers can include and perform the format and",
    "start": "1616760",
    "end": "1624020"
  },
  {
    "text": "mount operations directly and with this the CSI drivers become super easy to develop and deploy because",
    "start": "1624020",
    "end": "1630860"
  },
  {
    "text": "they are similar to to the Linux counterpart where uh you just bump the",
    "start": "1630860",
    "end": "1636020"
  },
  {
    "text": "the image and you you have all of the format amount functionality with having to maintain an additional component",
    "start": "1636020",
    "end": "1642919"
  },
  {
    "text": "this initiative is being tracked in the in that enhancement issue 3636.",
    "start": "1642919",
    "end": "1649760"
  },
  {
    "text": "okay so this slide is about uh people that have already implemented Windows",
    "start": "1650779",
    "end": "1656179"
  },
  {
    "text": "support in their CSI drivers on the left we have the current implementation and on the right we have",
    "start": "1656179",
    "end": "1661640"
  },
  {
    "text": "the new implementation we wanted to have to reach a step where we had as minimal",
    "start": "1661640",
    "end": "1666919"
  },
  {
    "text": "changes as possible so uh as we can see it's just a it's just renaming the",
    "start": "1666919",
    "end": "1673100"
  },
  {
    "text": "Imports in in the in the file where uh the calls are used that is one change and the other change",
    "start": "1673100",
    "end": "1679400"
  },
  {
    "text": "is that the CSI driver deployment needs to have additional uh cost process",
    "start": "1679400",
    "end": "1685159"
  },
  {
    "text": "related spec fields and in in this drivers we also Mount the",
    "start": "1685159",
    "end": "1692240"
  },
  {
    "text": "name pipes in in the in the pot so all of those fields are also removed because",
    "start": "1692240",
    "end": "1697880"
  },
  {
    "text": "we no longer have the name pipes and that should be so I would like to",
    "start": "1697880",
    "end": "1704120"
  },
  {
    "text": "thank Alexander ding from Brown University for the work that he already did in CSI proxy to make this work",
    "start": "1704120",
    "end": "1710480"
  },
  {
    "text": "and I also encourage everyone who has a side driver and doesn't have a Windows",
    "start": "1710480",
    "end": "1717500"
  },
  {
    "text": "implementation yet to add window support to their assistant driver I think it's now a great time you don't have to",
    "start": "1717500",
    "end": "1722960"
  },
  {
    "text": "support um the an additional proxy component so",
    "start": "1722960",
    "end": "1728600"
  },
  {
    "text": "um I would also like to thank stick windows for working on this because they enabled us to remove all of code that are that is a",
    "start": "1728600",
    "end": "1736100"
  },
  {
    "text": "needle with that pass it back to shink thanks maricio",
    "start": "1736100",
    "end": "1744158"
  },
  {
    "text": "on this six storage homepage we have a lot of informations for you to get started there are some video recordings",
    "start": "1745100",
    "end": "1753340"
  },
  {
    "text": "including some of the sessions from previous coupons some are like one-on-one sessions so",
    "start": "1753340",
    "end": "1759740"
  },
  {
    "text": "check it out and we have bi-weekly meetings on Thursdays your mailing list",
    "start": "1759740",
    "end": "1766880"
  },
  {
    "text": "and slack channel so if you're interested please join us and get involved",
    "start": "1766880",
    "end": "1773919"
  },
  {
    "text": "and I have included a few resources here",
    "start": "1775640",
    "end": "1780700"
  },
  {
    "text": "yeah this is the QR code for the session please leave feedback this is the end of the session thank you",
    "start": "1784820",
    "end": "1791360"
  },
  {
    "text": "all for coming any questions",
    "start": "1791360",
    "end": "1795760"
  },
  {
    "text": "here could you raise your hand please right",
    "start": "1804320",
    "end": "1811059"
  },
  {
    "text": "oh it's coming I wanted to know if you have a reference",
    "start": "1812360",
    "end": "1817880"
  },
  {
    "text": "implementation of a CSI driver for Windows so I mean sample CSL which does the amount and so on",
    "start": "1817880",
    "end": "1824360"
  },
  {
    "text": "sure so um there are at least three three CSI drivers that have support for Windows",
    "start": "1824360",
    "end": "1831140"
  },
  {
    "text": "those are the cool GC persistent disk CSI driver there is the Azure file CSI",
    "start": "1831140",
    "end": "1838279"
  },
  {
    "text": "driver the Azure disk Etc EBS host also has an implementation so all of those are under the hood using CSI proxy",
    "start": "1838279",
    "end": "1846500"
  },
  {
    "text": "and is there variation between across them because the only place where I see in a node related location is how do you",
    "start": "1846500",
    "end": "1854480"
  },
  {
    "text": "find out where the disk is attached pretty much the rest of the code should be similar right wherein you support interface and then mount it correct yeah",
    "start": "1854480",
    "end": "1861260"
  },
  {
    "text": "Electro is very similar across all of these drivers okay thanks",
    "start": "1861260",
    "end": "1866260"
  },
  {
    "text": "anyone else have any questions",
    "start": "1868399",
    "end": "1871779"
  },
  {
    "text": "yeah um how long will the CSI proxy support running as a service versus uh",
    "start": "1881299",
    "end": "1888799"
  },
  {
    "text": "as a library that's our question I wrote",
    "start": "1888799",
    "end": "1893840"
  },
  {
    "text": "the timeline for it on the cap we are thinking about having it on maintenance mode",
    "start": "1893840",
    "end": "1901580"
  },
  {
    "text": "because of the drawbacks that I mentioned but that's still open in the cab so if",
    "start": "1901580",
    "end": "1908360"
  },
  {
    "text": "the community wants to keep it open for features we could still support both but my take right now is to keep it in",
    "start": "1908360",
    "end": "1914899"
  },
  {
    "text": "maintenance mode and just go all on the library mode perfect I just saw your Gap so I'll uh",
    "start": "1914899",
    "end": "1920419"
  },
  {
    "text": "I'll take a look at that all right thanks you have time for one more question",
    "start": "1920419",
    "end": "1929320"
  },
  {
    "text": "thank you so much thank you for coming [Applause]",
    "start": "1932659",
    "end": "1940070"
  }
]