[
  {
    "text": "all right good morning almost end of the morning you know these five minutes before it becomes the afternoon so",
    "start": "0",
    "end": "5670"
  },
  {
    "text": "welcome to cube con my name is Aaron Gupta and I work for Amazon because",
    "start": "5670",
    "end": "10889"
  },
  {
    "text": "you're from Salonga fantastic today we are here to talk about mastering kubernetes on AWS we know it's a short",
    "start": "10889",
    "end": "17520"
  },
  {
    "text": "session we'll try to do as much justice as we can the slides there were recommendations our guidelines all of",
    "start": "17520",
    "end": "23730"
  },
  {
    "text": "those are publicly available in a github repo so we'll be happy to share that towards the end of the session anyway with you so let's get started with that",
    "start": "23730",
    "end": "30410"
  },
  {
    "text": "so I I work for Amazon I'm a principal open source technologies my role is I'm",
    "start": "30410",
    "end": "36809"
  },
  {
    "text": "a CNC F board member for AWS and I've been in the continuous line for a while I like to run I like to do other fun",
    "start": "36809",
    "end": "43829"
  },
  {
    "text": "things as well and as I said I'm a failure I work for Toronto I love the topic of container orchestration and go",
    "start": "43829",
    "end": "51059"
  },
  {
    "text": "and a bunch of other things and as Italian you love Boeing yeah that's a fact all right so today instead of this",
    "start": "51059",
    "end": "59579"
  },
  {
    "text": "we're not expecting this to be a kubernetes 101 although we have a lot of content around that topic as well but",
    "start": "59579",
    "end": "64920"
  },
  {
    "text": "we're gonna pick three topics and we're gonna deep dive into those topics and we're gonna share our recommendations and the way we have structured the",
    "start": "64920",
    "end": "71640"
  },
  {
    "text": "session is I'll talk about what are we seeing in Amazon how our customers are using kubernetes in different scenarios",
    "start": "71640",
    "end": "77909"
  },
  {
    "text": "I was pretty thrilled I have built actually a personal affection for Game of Thrones now because it runs",
    "start": "77909",
    "end": "83159"
  },
  {
    "text": "kubernetes on AWS so that is pretty cool I learned quite a few things from that session but will also share a broader perspective",
    "start": "83159",
    "end": "88979"
  },
  {
    "text": "what our customers are doing it and then raffaeli will talk about it exactly practices are good but here is how we",
    "start": "88979",
    "end": "95430"
  },
  {
    "text": "run it in opinion advice you know we hopefully you'll get a good balance to be of it and the three topics we chose",
    "start": "95430",
    "end": "100530"
  },
  {
    "text": "is how do you set up your cluster how do you do Identity and Access Management and are using kubernetes and then",
    "start": "100530",
    "end": "107610"
  },
  {
    "text": "finally the visibility or telemetry you know the lots of names for this let's get started so what are your choices if",
    "start": "107610",
    "end": "115560"
  },
  {
    "text": "you are running button from a voice actually been talking too much here so but what are your choices when you are",
    "start": "115560",
    "end": "120960"
  },
  {
    "text": "trying to set up a company this cluster what does that mean really you know how do I install a cluster how do I operate",
    "start": "120960",
    "end": "126149"
  },
  {
    "text": "a cluster how do I upgrade a cluster how do I deploy in applications to it what are my choices well deploying is simple",
    "start": "126149",
    "end": "132390"
  },
  {
    "text": "because as Cube that's your CLI essentially or maybe some IDE or maven package and all but",
    "start": "132390",
    "end": "138090"
  },
  {
    "text": "we'll focus primarily on the cluster setup itself now if you are a developer",
    "start": "138090",
    "end": "143489"
  },
  {
    "text": "I know you want to set up a single node kubernetes cluster mini cube is a",
    "start": "143489",
    "end": "149069"
  },
  {
    "text": "credible option today you can download mini cube it starts using hypervisor or",
    "start": "149069",
    "end": "154109"
  },
  {
    "text": "VirtualBox and it spins up a single node single worker single master cluster on",
    "start": "154109",
    "end": "160829"
  },
  {
    "text": "your machine and you can interact with it using cube cuddle all of that works pretty good",
    "start": "160829",
    "end": "166469"
  },
  {
    "text": "the occur at darker corn also announced that docker desktop will also have integration of kubernetes in there I'm",
    "start": "166469",
    "end": "172109"
  },
  {
    "text": "still waiting I'm a talker captain some ways still waiting for those to come into my hands so that I can start",
    "start": "172109",
    "end": "177299"
  },
  {
    "text": "trying it out as part of docker for Mac that brings a more seamless experience essentially because now from your Java",
    "start": "177299",
    "end": "184290"
  },
  {
    "text": "files or whatever your language files are you go build a docker image using docker for a Mac and then you use cube",
    "start": "184290",
    "end": "190439"
  },
  {
    "text": "curdle so you already have docker for Mac why download a new tool that's kind of cool on the community side there are 18",
    "start": "190439",
    "end": "197790"
  },
  {
    "text": "different ways you can actually deploy a kubernetes on AWS I'm not going to list all of them but one of the favorite one",
    "start": "197790",
    "end": "204540"
  },
  {
    "text": "that we have seen a lot of our customers use is cops this tool is actually built in the community by AWS sig essentially",
    "start": "204540",
    "end": "211259"
  },
  {
    "text": "so huge props to just in Santa Barbara and Chris love new or the main maintainer and a bunch of other people",
    "start": "211259",
    "end": "217259"
  },
  {
    "text": "as well we've been maintaining this tool really slick and easy and also an example of how a cops really work if you",
    "start": "217259",
    "end": "224669"
  },
  {
    "text": "are looking for a complete list on the 18 different ways and other flavors look at kubernetes AWS door I owe at reinvent",
    "start": "224669",
    "end": "233699"
  },
  {
    "text": "last week we introduced eks which is elastic container service for kubernetes that is a managed service from Amazon",
    "start": "233699",
    "end": "240349"
  },
  {
    "text": "you go to Amazon console or AWS console say give me a cluster and we give you a",
    "start": "240349",
    "end": "245939"
  },
  {
    "text": "API URL and that's it now we take care of managing the cluster we'll talk about that there are other",
    "start": "245939",
    "end": "251459"
  },
  {
    "text": "options by kauravas tectonic and Red Hat OpenShift which runs the open YouTube view of kubernetes because it provides a",
    "start": "251459",
    "end": "257579"
  },
  {
    "text": "lot of tooling on top of communities as well last but not the least there is of",
    "start": "257579",
    "end": "263340"
  },
  {
    "text": "course cloud formation we see a lot of customers using cloud formation because they really want a handcraft how their",
    "start": "263340",
    "end": "268600"
  },
  {
    "text": "cluster is set up how their networking policy looks like and then terraform of course is another option so these are",
    "start": "268600",
    "end": "273880"
  },
  {
    "text": "some of the options that we see that our customers use primarily between one of these and then of course we have",
    "start": "273880",
    "end": "280900"
  },
  {
    "text": "partners so darker hep t o mesosphere they all provide recommendations on how do you build and run these applications",
    "start": "280900",
    "end": "287490"
  },
  {
    "text": "now let's take a look at it cops a little bit so what is coughs well coughs is community supported it is primarily",
    "start": "287490",
    "end": "293890"
  },
  {
    "text": "built as I said as part of sig AWS it's a top-level kubernetes project so get up calm slash kubernetes slash cops is",
    "start": "293890",
    "end": "300910"
  },
  {
    "text": "where you get all the details over there there are cops office hours slack channel there is no production support",
    "start": "300910",
    "end": "307990"
  },
  {
    "text": "if you are interested in that you know you are on your own you're really relying upon a slack channel but it's that channel is very active it can also",
    "start": "307990",
    "end": "316270"
  },
  {
    "text": "optionally generate cloud formation or terraform scripts in case you need to so then you can take that as a starting",
    "start": "316270",
    "end": "321880"
  },
  {
    "text": "point and then deploy your cluster using that as I said this is a top-level project let's take a look at the CLI for",
    "start": "321880",
    "end": "328870"
  },
  {
    "text": "this now how does others work well you need you are deploying your cops cluster",
    "start": "328870",
    "end": "334000"
  },
  {
    "text": "in a region with three availability zones you know you are looking at a master with high availability what that",
    "start": "334000",
    "end": "340180"
  },
  {
    "text": "means is you are deploying three masters and each master also has a co-located HCD with it so essentially what I'm",
    "start": "340180",
    "end": "346900"
  },
  {
    "text": "saying is my availability zones in this case R Us East one B 1 a 1 a 1 B 1 C or",
    "start": "346900",
    "end": "352390"
  },
  {
    "text": "in this case 1 B C and D cops also stores the cluster state in an s3 bucket",
    "start": "352390",
    "end": "358750"
  },
  {
    "text": "so I'm exploiting that variable and then I say ok I'm gonna create a cluster in this case I'm just giving the cluster",
    "start": "358750",
    "end": "364870"
  },
  {
    "text": "name as cluster dot Kate's not local and just by giving Kate Scott local I don't need to do any DNS setup etc it uses",
    "start": "364870",
    "end": "372040"
  },
  {
    "text": "gossip protocol to discover the nodes among themselves it uses weave networking for that we've matched",
    "start": "372040",
    "end": "377440"
  },
  {
    "text": "essentially and it creates a cluster and then I'm specifying my master count my master instance type my node count my",
    "start": "377440",
    "end": "384310"
  },
  {
    "text": "node instance type I can provide different kinds of networking availability here in this case I'm using",
    "start": "384310",
    "end": "389560"
  },
  {
    "text": "calico but there's work going on already in the next version of cops by which you",
    "start": "389560",
    "end": "394570"
  },
  {
    "text": "can actually use the cni plugin that we released last week and then essentially",
    "start": "394570",
    "end": "400090"
  },
  {
    "text": "you say now create the cluster let's talk a little bit about ECS or easier East KS actually",
    "start": "400090",
    "end": "406880"
  },
  {
    "text": "elastic container service for kubernetes so what we give you as part of that is essentially a managed control plane you",
    "start": "406880",
    "end": "413450"
  },
  {
    "text": "know our customers have come to us and told us run kubernetes for me so that I can focus on my applications so and",
    "start": "413450",
    "end": "419930"
  },
  {
    "text": "that's what is giving you we you come to you know you use AWS console or CLI and say create a cluster for me",
    "start": "419930",
    "end": "426470"
  },
  {
    "text": "we create a cluster now and we give you API URL worker nodes are in your account",
    "start": "426470",
    "end": "433250"
  },
  {
    "text": "the master is in our account you bring your own worker nodes we give you cloud formation templates we give you",
    "start": "433250",
    "end": "439220"
  },
  {
    "text": "pre-built armies you take those armies and you say you know bring those armies and connect that to the server and then",
    "start": "439220",
    "end": "445640"
  },
  {
    "text": "you're good to go and then we automatically scale the master for you depending upon the number",
    "start": "445640",
    "end": "451190"
  },
  {
    "text": "of parts number of requests that are coming in we automatically scale the cluster we give you option to manually",
    "start": "451190",
    "end": "457100"
  },
  {
    "text": "update the cluster upgrade the cluster or automatic upgrade in that cluster so",
    "start": "457100",
    "end": "463190"
  },
  {
    "text": "let's look at the core tenets for what are the core tenets for eks well the first thing is in a very classical",
    "start": "463190",
    "end": "468380"
  },
  {
    "text": "Amazon way availability reliability security all the ility is that you are",
    "start": "468380",
    "end": "473900"
  },
  {
    "text": "aware of that Amazon gives you know from AWS that is what we give you exactly you",
    "start": "473900",
    "end": "478940"
  },
  {
    "text": "can run your full enterprise grade production workloads on eks because we",
    "start": "478940",
    "end": "484250"
  },
  {
    "text": "are doing all the heavy lifting for you one of the most important tenets and I",
    "start": "484250",
    "end": "491360"
  },
  {
    "text": "mean they're all equally important but one of the ones that I am super excited about is we're going to provide upstream 100% upstream experience what that means",
    "start": "491360",
    "end": "498230"
  },
  {
    "text": "is you have your kubernetes cluster running on premise you build the",
    "start": "498230",
    "end": "503360"
  },
  {
    "text": "application over there you can just switch your cube cradle config and say now i'm going to talk to this cluster",
    "start": "503360",
    "end": "508610"
  },
  {
    "text": "and deploy my applications over there so whatever the upstream experience is going to be there is no for king there",
    "start": "508610",
    "end": "515960"
  },
  {
    "text": "is no private branches running all the work is going to be done in upstream so",
    "start": "515960",
    "end": "521090"
  },
  {
    "text": "you can literally bring your own upstream cluster and say now i'm going to deploy it to eks and we'll take care of it",
    "start": "521090",
    "end": "527860"
  },
  {
    "text": "we will provide deep integration with rest of the AWS stack so I am integration for example with cue card",
    "start": "527860",
    "end": "534450"
  },
  {
    "text": "we'll provide deep integration with that I am integration on the pod runtime we will provide with that with cloud watch",
    "start": "534450",
    "end": "540930"
  },
  {
    "text": "cloud trail with x-ray all of those integrations will be there but there was a completely optional for you to use you",
    "start": "540930",
    "end": "547290"
  },
  {
    "text": "know I mean that's what our customers like so we provide those integrations if you want to use them they are ready for you now this is the tenet that I am",
    "start": "547290",
    "end": "554850"
  },
  {
    "text": "super excited about because we are changing the company culture here we are going to be actively contributing to",
    "start": "554850",
    "end": "560820"
  },
  {
    "text": "kubernetes project and what that means is all the work that's going to be done in eks the manage control plane and it's",
    "start": "560820",
    "end": "568079"
  },
  {
    "text": "going to be ours but literally you know beak full e compliant and done 100% out in the open source so as a matter of",
    "start": "568079",
    "end": "574380"
  },
  {
    "text": "fact we built a CNI plugin which allows you to give a secondary IP address from",
    "start": "574380",
    "end": "579839"
  },
  {
    "text": "your V PC network to a pod that work let's see an eye plug-in is fully open",
    "start": "579839",
    "end": "585180"
  },
  {
    "text": "sourced so essentially you can take that see an eye plug in plug it into your cluster and build your own cluster that way",
    "start": "585180",
    "end": "591320"
  },
  {
    "text": "simple API we can say we can say AWS eks create a cluster I can say give me the",
    "start": "591320",
    "end": "597899"
  },
  {
    "text": "cluster name we're going to provide different version support and then eventually you can say i am i am role",
    "start": "597899",
    "end": "604230"
  },
  {
    "text": "and that is I am role that will be used to authenticate with the cluster and then can propagate all the way to the",
    "start": "604230",
    "end": "610709"
  },
  {
    "text": "pod so how does it work well essentially if you come to us we say UK give me a",
    "start": "610709",
    "end": "615779"
  },
  {
    "text": "cluster today if you are building a cluster you saying master and HCD and",
    "start": "615779",
    "end": "621329"
  },
  {
    "text": "then your worker nodes which are in different availability zones you come to ek as all you get is you know alright we",
    "start": "621329",
    "end": "628320"
  },
  {
    "text": "take care of all the heavy lifting for you we give you a control plane and then you bring your worker nodes so the",
    "start": "628320",
    "end": "633690"
  },
  {
    "text": "responsibility is a very standard shared responsibility model of AWS and then",
    "start": "633690",
    "end": "640140"
  },
  {
    "text": "those worker nodes are connected to the control plane we take care of managing the control plane for you and then you",
    "start": "640140",
    "end": "647130"
  },
  {
    "text": "use your standard queue chordal to deploy the application to the cluster",
    "start": "647130",
    "end": "652610"
  },
  {
    "text": "alright so as I say the MuRF elephant zalando so so now you heard some ways",
    "start": "652610",
    "end": "660569"
  },
  {
    "text": "you can actually provision or the clusters what I'm gonna tell you now",
    "start": "660569",
    "end": "665700"
  },
  {
    "text": "is a little bit like how we do this as Domino's oh really do pinyin either way of this presentation right before doing",
    "start": "665700",
    "end": "672959"
  },
  {
    "text": "that I have to tell you what Ando is because my Peter you don't know it as we",
    "start": "672959",
    "end": "678870"
  },
  {
    "text": "are in in taxes and solando is actually the largest European fashion company",
    "start": "678870",
    "end": "685440"
  },
  {
    "text": "this means we sell clothing and all the source stuff online so it's a ecommerce essentially to let you understand the",
    "start": "685440",
    "end": "692100"
  },
  {
    "text": "scale the company I just show you some some numbers so you operate only Europe as I said in 15 markets we have some six",
    "start": "692100",
    "end": "699899"
  },
  {
    "text": "fulfillment centers 22 million Arctic customers and some other numbers but",
    "start": "699899",
    "end": "705630"
  },
  {
    "text": "what is really interesting is that we have 1,100 employees in tech most of which are actually engineers and they",
    "start": "705630",
    "end": "712980"
  },
  {
    "text": "want to deploy their applications historically we come from a point where",
    "start": "712980",
    "end": "718320"
  },
  {
    "text": "we had an on-premise infrastructure based on a bare metal setup in which of",
    "start": "718320",
    "end": "723810"
  },
  {
    "text": "course we had a limited set up for scaling and for for example starting new",
    "start": "723810",
    "end": "729870"
  },
  {
    "text": "projects or new teams and studying applications moreover our tooling was entirely custom based on some software",
    "start": "729870",
    "end": "738750"
  },
  {
    "text": "we developed we then decided to migrate to the cloud specifically to AWS to make",
    "start": "738750",
    "end": "746070"
  },
  {
    "text": "sure to have you know this high speed that decide velocity for developers and",
    "start": "746070",
    "end": "751380"
  },
  {
    "text": "scaling the teams we did that by going to a model where we have essentially see",
    "start": "751380",
    "end": "756930"
  },
  {
    "text": "two instances with an EMI we baked and one single docker container for instance",
    "start": "756930",
    "end": "763050"
  },
  {
    "text": "which meant that developers needed to understand what was the right instance for them what do they need in terms of",
    "start": "763050",
    "end": "770220"
  },
  {
    "text": "resources and a lot of other things and we use confirmation to the pilot",
    "start": "770220",
    "end": "776240"
  },
  {
    "text": "sequence after that we decided to migrate to communities which allow us",
    "start": "776240",
    "end": "781860"
  },
  {
    "text": "first of all to have a higher densities or packing all those workloads together and to give an API to actually makes",
    "start": "781860",
    "end": "788670"
  },
  {
    "text": "more sense for developers and is not and remove them you know this need of understanding what is a t2 my",
    "start": "788670",
    "end": "794970"
  },
  {
    "text": "instead of and for Forex large to give a little bit more context just so I said",
    "start": "794970",
    "end": "801120"
  },
  {
    "text": "we had the smooth lots of things we had when already when we were to the cloud",
    "start": "801120",
    "end": "806670"
  },
  {
    "text": "something around 200 engineering teams and each team was Indian responsible as well for for the CIC deep art and all",
    "start": "806670",
    "end": "813060"
  },
  {
    "text": "these kind of things you heard this morning in the in the in the keynote from Kelsey just you don't want to",
    "start": "813060",
    "end": "818370"
  },
  {
    "text": "deploy from cubes video so part of this all this whole migration to communities",
    "start": "818370",
    "end": "824220"
  },
  {
    "text": "is to enforce compliance and best practices by means of you know making",
    "start": "824220",
    "end": "831330"
  },
  {
    "text": "sure people can only deploy it to clusters only be a proper CD set up and",
    "start": "831330",
    "end": "836780"
  },
  {
    "text": "enforcing these ends of operations by not having them directly access",
    "start": "836780",
    "end": "841920"
  },
  {
    "text": "containers and do random stuff with them okay so let's jump at the at the kubernetes cluster set up so currently",
    "start": "841920",
    "end": "849420"
  },
  {
    "text": "we have multiple AWS account and we provision exactly one kubernetes cluster per account and we are managing",
    "start": "849420",
    "end": "857190"
  },
  {
    "text": "something around 50 covering this cluster so as you may imagine this is not a terribly use huge number if you",
    "start": "857190",
    "end": "864450"
  },
  {
    "text": "are Google or Amazon but it's pretty pretty big pretty big number clustering",
    "start": "864450",
    "end": "871500"
  },
  {
    "text": "number if you are a fashion ecommerce those clusters actually made designed to",
    "start": "871500",
    "end": "878790"
  },
  {
    "text": "be small such that we can for example limit the impact of possible prominent",
    "start": "878790",
    "end": "883920"
  },
  {
    "text": "outages so our problems with those clusters and as well kubernetes what",
    "start": "883920",
    "end": "890640"
  },
  {
    "text": "kind of code was not optimized to deal with a blast rate limiting I think about",
    "start": "890640",
    "end": "895860"
  },
  {
    "text": "for example mounting EBS volumes was not used not to be perfect is improving but",
    "start": "895860",
    "end": "900870"
  },
  {
    "text": "they're still still a bunch of things to do our setup is strongly based on on",
    "start": "900870",
    "end": "906480"
  },
  {
    "text": "cloud formation we use confirmation entirely to provision those clusters and",
    "start": "906480",
    "end": "911730"
  },
  {
    "text": "we chose that because its first of all is a Douglas native so we wanted to have something that could tailor exactly the",
    "start": "911730",
    "end": "920190"
  },
  {
    "text": "cloud we were deploying to so AWS and because we have a pretty good existing experience inside the company so with",
    "start": "920190",
    "end": "926820"
  },
  {
    "text": "this array take the tool that we are familiar with our setup is based on container Linux we",
    "start": "926820",
    "end": "934590"
  },
  {
    "text": "don't do right now any my customization so we use whatever you can use as well and we add additional decision that we",
    "start": "934590",
    "end": "941100"
  },
  {
    "text": "took for example is to use flannel as networking to support more than 50 nodes Amazon now is jumping on the hunter ship",
    "start": "941100",
    "end": "948450"
  },
  {
    "text": "so is helping with the CNI plugin but it used to be quite tricky to have cluster",
    "start": "948450",
    "end": "953580"
  },
  {
    "text": "the model 50 nodes due to a limitation in AWS right in table 4 so as I said we",
    "start": "953580",
    "end": "962340"
  },
  {
    "text": "have all these clusters we use this approach of immutable infrastructure we don't do updates and reboots of nodes",
    "start": "962340",
    "end": "967950"
  },
  {
    "text": "instead we replace them in a rolling fashion across the set up looks mostly",
    "start": "967950",
    "end": "973740"
  },
  {
    "text": "like that so we have to auto scaling groups the master spanning tree",
    "start": "973740",
    "end": "980040"
  },
  {
    "text": "availability zone as well as the worker nodes as the work level is able to scaling groups we run everything",
    "start": "980040",
    "end": "987870"
  },
  {
    "text": "ourselves so also hcd hcd runs all in their own conformation stack so outside",
    "start": "987870",
    "end": "994380"
  },
  {
    "text": "of the master node we use a additionally ELB so there's a classic load balancer",
    "start": "994380",
    "end": "1000260"
  },
  {
    "text": "in front ot of the master nodes to achieve the H a set up and we use this",
    "start": "1000260",
    "end": "1005390"
  },
  {
    "text": "both for an interaction from the cube CDLs all the users or the deploy tool and the worker nodes so as I said we",
    "start": "1005390",
    "end": "1014330"
  },
  {
    "text": "have 50 clusters it's quite a quite a big number and we have to find a way to operate them in a way that doesn't",
    "start": "1014330",
    "end": "1020900"
  },
  {
    "text": "require us to do this manual operation it's nice to say your developers cannot deploy to production manually and then",
    "start": "1020900",
    "end": "1026930"
  },
  {
    "text": "you operate the cluster manually this doesn't really make sense right so what we did is essentially deploying",
    "start": "1026930",
    "end": "1032020"
  },
  {
    "text": "developing two tools one is the cluster registry which contains some metadata for the cluster so really information",
    "start": "1032020",
    "end": "1037730"
  },
  {
    "text": "descriptive information of what the cluster should look like and a reference to the configuration of this cluster",
    "start": "1037730",
    "end": "1043069"
  },
  {
    "text": "which by the way is open source you finally get calm and the tool that just watch this configuration and applies",
    "start": "1043070",
    "end": "1049370"
  },
  {
    "text": "this by means of clot formation stack and some additional AWS resources so I",
    "start": "1049370",
    "end": "1056030"
  },
  {
    "text": "am all right let's talk about let's talk",
    "start": "1056030",
    "end": "1062679"
  },
  {
    "text": "about I am now I am is the way how AWS customers understand you know how to do",
    "start": "1062679",
    "end": "1068590"
  },
  {
    "text": "security and how do you do access management so let's talk about how does I am work I know it really enables",
    "start": "1068590",
    "end": "1074320"
  },
  {
    "text": "access to AWS resources when you create a pop space cluster essentially what",
    "start": "1074320",
    "end": "1081100"
  },
  {
    "text": "happens is there are two IM roles created for you one for master nodes and one for worker nodes and the policies",
    "start": "1081100",
    "end": "1087820"
  },
  {
    "text": "that are attached to them are a bit different and which is by design because the capabilities that master needs to have are a bit more essentially now what",
    "start": "1087820",
    "end": "1096220"
  },
  {
    "text": "we need is a little bit more granular control for cue cuddle and parts because essentially you know if you think about",
    "start": "1096220",
    "end": "1102399"
  },
  {
    "text": "it your cue card all relies upon cube config to talk to your master but there",
    "start": "1102399",
    "end": "1108460"
  },
  {
    "text": "is no I am integration over there I want to be able to say use this I am to authenticate with the cluster because",
    "start": "1108460",
    "end": "1113830"
  },
  {
    "text": "that's sort of the language that AWS customers are used to and then when you are running the pod you wanna see that",
    "start": "1113830",
    "end": "1119369"
  },
  {
    "text": "what is I am role that the pod can take at the runtime so that the policies can be applied accordingly so let's take a",
    "start": "1119369",
    "end": "1126279"
  },
  {
    "text": "look at it now for the I am role to cue cuddle our customers like to looking at",
    "start": "1126279",
    "end": "1133749"
  },
  {
    "text": "Authenticator that's something that we are also looking at as part of eks service essentially and what it gives",
    "start": "1133749",
    "end": "1138789"
  },
  {
    "text": "you is it's a project by heftier labs which is one of our good partners and essentially if you look at it there",
    "start": "1138789",
    "end": "1144429"
  },
  {
    "text": "is a cube cuddle there is a kubernetes cluster running and then in AWS environment we have AWS auth service",
    "start": "1144429",
    "end": "1149470"
  },
  {
    "text": "running here okay so the cue card all passes the AWS identity which is basically an I am role it passes it on",
    "start": "1149470",
    "end": "1155980"
  },
  {
    "text": "you know we saw the role or name so we pass that role I am role to the kubernetes cluster the cooperate is",
    "start": "1155980",
    "end": "1163080"
  },
  {
    "text": "excuse me the kubernetes cluster then talks to the AWS auth service not okay",
    "start": "1163080",
    "end": "1168970"
  },
  {
    "text": "this is the I am role this is sort of what policies are available it gets the policies back authentication",
    "start": "1168970",
    "end": "1177249"
  },
  {
    "text": "is done using AWS auth and the authorization is done using the our Mac that is baked into the kubernetes",
    "start": "1177249",
    "end": "1183460"
  },
  {
    "text": "cluster itself and then accordingly the action is allowed or not allowed so that's sort of how authentic ater model",
    "start": "1183460",
    "end": "1189820"
  },
  {
    "text": "works let's take a look at it from the I am identity for the pod itself now if",
    "start": "1189820",
    "end": "1195820"
  },
  {
    "text": "you look at today the pod if it wants to do something within the ec2 instance it",
    "start": "1195820",
    "end": "1200890"
  },
  {
    "text": "will talk to the ec2 metadata service that I want to do this can I do this or not",
    "start": "1200890",
    "end": "1206250"
  },
  {
    "text": "cube - I am is a project that has been extremely popular which basically gives you the ability to assign an I am role",
    "start": "1206250",
    "end": "1212740"
  },
  {
    "text": "to a pod and it says okay take this role so let's see how that works now my same",
    "start": "1212740",
    "end": "1218140"
  },
  {
    "text": "setup here first thing what we do is we set up a cube - I am as a daemon set",
    "start": "1218140",
    "end": "1224230"
  },
  {
    "text": "that gets set up now the part there's a security token service that is also running back in AWS now the pod when",
    "start": "1224230",
    "end": "1233350"
  },
  {
    "text": "it's trying to talk to the ec2 metadata service the call is intercepted by the daemon set that demon said then guides",
    "start": "1233350",
    "end": "1240460"
  },
  {
    "text": "it to the secured token service figures out okay this is the I am role that is assigned to the part what are the",
    "start": "1240460",
    "end": "1245920"
  },
  {
    "text": "policies that are applicable to it and then it makes a call to the ec2 metadata service so the whole part being you",
    "start": "1245920",
    "end": "1253270"
  },
  {
    "text": "could assign a part I am role to the pod at runtime and you can use an I am role at the cue card",
    "start": "1253270",
    "end": "1259330"
  },
  {
    "text": "level as well both are possible and the way I am role is assigned to the pod is",
    "start": "1259330",
    "end": "1264550"
  },
  {
    "text": "literally just an annotation here so I have my deployment here and in here all I'm saying is this is my I am role I",
    "start": "1264550",
    "end": "1271180"
  },
  {
    "text": "give me I am role are in here and there it goes now cube Who I am is a great",
    "start": "1271180",
    "end": "1276880"
  },
  {
    "text": "project it has done a great job but there are certain issues with it you know I mean it requires really the node",
    "start": "1276880",
    "end": "1282070"
  },
  {
    "text": "to have an assumed role capability which is a much wider capability so that's one of the projects that we are looking to",
    "start": "1282070",
    "end": "1288250"
  },
  {
    "text": "actively contribute to because essentially that's the capability that we are looking our customers will continue to use so that's the project",
    "start": "1288250",
    "end": "1294850"
  },
  {
    "text": "where the eks team will contribute back in the open source and see how we can make it better there are other ways by",
    "start": "1294850",
    "end": "1304180"
  },
  {
    "text": "which our customers are looking at as well and how to create those temporary I am credentials so harsh record vault is",
    "start": "1304180",
    "end": "1310180"
  },
  {
    "text": "one of the offerings that our customers like to use because you can essentially generate temporary IIM credentials from",
    "start": "1310180",
    "end": "1317080"
  },
  {
    "text": "a walled server running either on-premises or in the cloud and that's certainly a possibility and in the long",
    "start": "1317080",
    "end": "1323830"
  },
  {
    "text": "run we are also looking at spiffy actually that which allows you to do",
    "start": "1323830",
    "end": "1329200"
  },
  {
    "text": "identity propagation across different clouds across different container orchestration is independent of the",
    "start": "1329200",
    "end": "1335300"
  },
  {
    "text": "container runtime and we are particularly excited because it's not really tied to kubernetes or container D",
    "start": "1335300",
    "end": "1340940"
  },
  {
    "text": "or any other runtime because then it can bleed into other CN CF projects as well so the possibilities of spiffy even",
    "start": "1340940",
    "end": "1348350"
  },
  {
    "text": "though is still a futuristic thing are pretty huge I'm talking about I am at",
    "start": "1348350",
    "end": "1356720"
  },
  {
    "text": "Saranda we actually have to first of all distinguish between two different systems so we talked about AWS I am and",
    "start": "1356720",
    "end": "1364040"
  },
  {
    "text": "we talked about anion system then we use in internally for service to service communication we run a micro service",
    "start": "1364040",
    "end": "1369830"
  },
  {
    "text": "infrastructure and employee to service communication regarding AWS I am a use coop - I am as a demon set in a very",
    "start": "1369830",
    "end": "1376760"
  },
  {
    "text": "similar fashion to what Aaron already shown and but an interesting part is actually why this works for us for us so",
    "start": "1376760",
    "end": "1383990"
  },
  {
    "text": "why this is actually reasonable for us so we put this annotation as you've seen",
    "start": "1383990",
    "end": "1390040"
  },
  {
    "text": "into those deployments so why do we trust people to actually do that and",
    "start": "1390040",
    "end": "1395060"
  },
  {
    "text": "what does it works for us it works for this idea of forest principle so as I said no deployments happens manually to",
    "start": "1395060",
    "end": "1401810"
  },
  {
    "text": "production it always happens through a version llamo and this llamo has to be those configuration needs to be approved",
    "start": "1401810",
    "end": "1407870"
  },
  {
    "text": "and this means whenever two engineers actually are saying okay this is right",
    "start": "1407870",
    "end": "1412880"
  },
  {
    "text": "this is the role we need this is fun for us talking about the Orion system so",
    "start": "1412880",
    "end": "1418820"
  },
  {
    "text": "which you're calling platform I'm as I said we run a micro service",
    "start": "1418820",
    "end": "1423980"
  },
  {
    "text": "infrastructure we have hundreds of micro service they talk to each other providing auth tokens as well as",
    "start": "1423980",
    "end": "1430370"
  },
  {
    "text": "employees they also use auth tokens to communicate with some of those services we wanted first of all to make sure that",
    "start": "1430370",
    "end": "1438710"
  },
  {
    "text": "employees could use the same tokens they were used to use in this infrastructure for example to to talk with the",
    "start": "1438710",
    "end": "1446270"
  },
  {
    "text": "kubernetes api server we did that by a natural extension points of the kubernetes api server that maybe are you",
    "start": "1446270",
    "end": "1452630"
  },
  {
    "text": "familiar with which is the web book essentially whenever you do keep CTL whatever you do get parts",
    "start": "1452630",
    "end": "1459540"
  },
  {
    "text": "if you pass a token this will be this will write to the API server and the API server whenever you have in you are in",
    "start": "1459540",
    "end": "1466230"
  },
  {
    "text": "this web book mode for authentication authorization this token will be passed to a web book which is in the end custom",
    "start": "1466230",
    "end": "1474030"
  },
  {
    "text": "software that you can bright and this this web hook in our case is responsible for validating this token and verifying",
    "start": "1474030",
    "end": "1482550"
  },
  {
    "text": "that the user is actually authorized to do anything that needs to be done all",
    "start": "1482550",
    "end": "1488370"
  },
  {
    "text": "right so this is for users talking with systems right so with api's but what about those those application needs to",
    "start": "1488370",
    "end": "1497250"
  },
  {
    "text": "talk with each other for that we extend the communities by means of a customer's definition which is which and it's a",
    "start": "1497250",
    "end": "1506100"
  },
  {
    "text": "small systems which is called in this case credentials provider what does it what the system do is in the end like",
    "start": "1506100",
    "end": "1512040"
  },
  {
    "text": "the user will just create this customer source definition and say I want these credentials this tokens for my for my",
    "start": "1512040",
    "end": "1518670"
  },
  {
    "text": "application and the system would just read from the canoes API this desire of",
    "start": "1518670",
    "end": "1523679"
  },
  {
    "text": "having tokens and it will talk with internal I am infrastructure that we had",
    "start": "1523679",
    "end": "1529200"
  },
  {
    "text": "before kubernetes and it will write back at community secrets to the API this means in this case that we the",
    "start": "1529200",
    "end": "1535320"
  },
  {
    "text": "application can really use a native kubernetes a concept which is a secrets we are pretty handy to to mount and set",
    "start": "1535320",
    "end": "1541920"
  },
  {
    "text": "your pods and with that we are integrated and they're happy to just use the tokens all right so let's move to",
    "start": "1541920",
    "end": "1548190"
  },
  {
    "text": "the last topic visibility let's talk",
    "start": "1548190",
    "end": "1553920"
  },
  {
    "text": "about visibility in a cluster I mean if you look at it you know in terms of the visibility of the cluster if I look in",
    "start": "1553920",
    "end": "1559050"
  },
  {
    "text": "the top there are five different aspects that we see that are important for a cluster you want to see the end-to-end",
    "start": "1559050",
    "end": "1565290"
  },
  {
    "text": "logs you know log coming from different sources you want to see the metrics you know that okay how is my node doing how",
    "start": "1565290",
    "end": "1571500"
  },
  {
    "text": "is my pod doing you want to take a look at events you know if my node is going down my cluster is going up what's",
    "start": "1571500",
    "end": "1576990"
  },
  {
    "text": "really happening over there you want to have alerts you know you wanna have some alert based auto scalars you know",
    "start": "1576990",
    "end": "1582420"
  },
  {
    "text": "triggering up and then eventually you want tracing which is end-to-end tracing of an application so those are sort of",
    "start": "1582420",
    "end": "1588210"
  },
  {
    "text": "five different visibility aspects that we think about it now those five specs are really coming from four",
    "start": "1588210",
    "end": "1594760"
  },
  {
    "text": "different sources essentially if you look at it there is of course a cluster which is sort of a uber concept and",
    "start": "1594760",
    "end": "1599800"
  },
  {
    "text": "there's a node and then within the node is where your container is running and then within in between that there is a",
    "start": "1599800",
    "end": "1605080"
  },
  {
    "text": "concept of application so the point being if you're looking for a visibility in a kubernetes cluster in general in an",
    "start": "1605080",
    "end": "1612280"
  },
  {
    "text": "AWS concept is this is what you are really looking for and make sure your matrix is checked off that you know in",
    "start": "1612280",
    "end": "1617740"
  },
  {
    "text": "all rows and all columns now let's take a look at logs well the logs of course the easiest way",
    "start": "1617740",
    "end": "1625030"
  },
  {
    "text": "people look at it is queue catalogs that's a rather easy way that's only the first cut of it it doesn't give you all",
    "start": "1625030",
    "end": "1630790"
  },
  {
    "text": "the details all the information you can get events and things like that as well but queue catalog is definitely more",
    "start": "1630790",
    "end": "1636370"
  },
  {
    "text": "popular the stack that we see a lot of our customers using is the F stack or",
    "start": "1636370",
    "end": "1641440"
  },
  {
    "text": "elastic search flow and D and Cabana so let's take a look at it how that combination really works but essentially",
    "start": "1641440",
    "end": "1647679"
  },
  {
    "text": "what you have is a cluster and this cluster is running in a region and and to separate availability zones okay keep",
    "start": "1647679",
    "end": "1656260"
  },
  {
    "text": "feeding in and out very good okay cool yeah so I have the cluster running in",
    "start": "1656260",
    "end": "1662170"
  },
  {
    "text": "two availability zones that are shown in horizontal rows and then I have auto scaling groups as well so essentially to",
    "start": "1662170",
    "end": "1667870"
  },
  {
    "text": "master which is not a good design should really be 1 or 3 odd number of masters and then I have a number of workers over",
    "start": "1667870",
    "end": "1673929"
  },
  {
    "text": "here ok so if you were to deploy like a F stack as either a helm chart or by",
    "start": "1673929",
    "end": "1679540"
  },
  {
    "text": "yourself then what you will have is a flow and D deployed really as a daemon set on all of your nodes over there once",
    "start": "1679540",
    "end": "1687940"
  },
  {
    "text": "you have it then essentially the logs from your container are dumped onto the filesystem which are then put into flow",
    "start": "1687940",
    "end": "1694870"
  },
  {
    "text": "and D and that then forward that to Amazon CloudWatch logs so once it goes into the cloud watch logs you have an",
    "start": "1694870",
    "end": "1701320"
  },
  {
    "text": "ability to subscribe to a elasticsearch cluster which again is running on Amazon itself so you have an elastic search",
    "start": "1701320",
    "end": "1708190"
  },
  {
    "text": "service you say any log that comes to cloud watch automatically send it to elastic search and on top of that",
    "start": "1708190",
    "end": "1713559"
  },
  {
    "text": "essentially what you can do is you can set up a cabana cluster so that's sort of a F stack that we see a lot of our",
    "start": "1713559",
    "end": "1719559"
  },
  {
    "text": "customers running now there are a lot of different variations for it that's not the only way but that is the",
    "start": "1719559",
    "end": "1724800"
  },
  {
    "text": "the more prominent ones that we see take a look at metrics for example what kind of metrics do we see now there is of",
    "start": "1724800",
    "end": "1731100"
  },
  {
    "text": "course node that gives you a lot of metrics node exporter is a common tool that we see a lot of our customers using",
    "start": "1731100",
    "end": "1736620"
  },
  {
    "text": "in spinning out metrics about the node itself in terms of pod / container you",
    "start": "1736620",
    "end": "1743130"
  },
  {
    "text": "can look at cube state matrix you know that is actually bundled with kubernetes or it can be installed depending upon",
    "start": "1743130",
    "end": "1748410"
  },
  {
    "text": "the configuration see it wise there is a pretty popular tool that developers look at or customers look at and then from",
    "start": "1748410",
    "end": "1755610"
  },
  {
    "text": "the applications perspective let's say if you are a Java developer if you are building a java application you can start exposing your metrics that were",
    "start": "1755610",
    "end": "1762930"
  },
  {
    "text": "done using JMX using slash metrics endpoint and why is slash metrics endpoint because essentially what you",
    "start": "1762930",
    "end": "1769830"
  },
  {
    "text": "need is a cluster wide aggregator you could use either Prometheus or heap store as one of those sources you know",
    "start": "1769830",
    "end": "1776280"
  },
  {
    "text": "to be a plus provide aggregator that is actually pulling the data from all the scraping the data from all slash metrics",
    "start": "1776280",
    "end": "1782310"
  },
  {
    "text": "endpoint now you do need a data model as well well Prometheus is a time series database as well so you can either store",
    "start": "1782310",
    "end": "1788490"
  },
  {
    "text": "it in there or you can have a specific influx VB or a graphite database where",
    "start": "1788490",
    "end": "1793530"
  },
  {
    "text": "your data is stored you know and then you can run some analyses on top of that on top of that you would like to build",
    "start": "1793530",
    "end": "1799680"
  },
  {
    "text": "like an alerting alerting mechanism where okay now I got all the data now if my memory threshold",
    "start": "1799680",
    "end": "1805650"
  },
  {
    "text": "goes below a certain number trigger an alert for me so you can build either alerting your",
    "start": "1805650",
    "end": "1812340"
  },
  {
    "text": "own or there are plenty of tools available and last but not the least what you really need is a visualizer on",
    "start": "1812340",
    "end": "1818130"
  },
  {
    "text": "top of that there is a dashboard that comes as part of kubernetes you can certainly use that but there is there",
    "start": "1818130",
    "end": "1824160"
  },
  {
    "text": "are griffin or Cabana dashboards if that is sort of your corporate standard or that is what you are using in your team feel free to pick those dashboards there",
    "start": "1824160",
    "end": "1831570"
  },
  {
    "text": "are plenty of dashboards that are already available that you can use so",
    "start": "1831570",
    "end": "1841620"
  },
  {
    "text": "talking about logging or at solando so we currently use a centralized login",
    "start": "1841620",
    "end": "1847110"
  },
  {
    "text": "solution so we don't have a managed start like that but your scaler as our centralized login solution and we deploy",
    "start": "1847110",
    "end": "1853440"
  },
  {
    "text": "a daemon set so a pod then each of these nodes they actually just streams this log to the",
    "start": "1853440",
    "end": "1858509"
  },
  {
    "text": "software-as-a-service this means this is extremely easy for developers to just pour their application they don't have",
    "start": "1858509",
    "end": "1864450"
  },
  {
    "text": "to hear about it we have this piece of infrastructure there's our stream those logs and they just need to lock two",
    "start": "1864450",
    "end": "1870239"
  },
  {
    "text": "standard reports on their reckoning monitoring we have an existing existing",
    "start": "1870239",
    "end": "1877489"
  },
  {
    "text": "monitoring solution in place since many years now this call set Mon it's",
    "start": "1877489",
    "end": "1883589"
  },
  {
    "text": "actually open source you finally get up and what we did essentially when we started migrating to kubernetes is",
    "start": "1883589",
    "end": "1889249"
  },
  {
    "text": "essentially integrating this system with kubernetes so making some of the native",
    "start": "1889249",
    "end": "1894929"
  },
  {
    "text": "kubernetes resources available from the system by using pro meters not exporting",
    "start": "1894929",
    "end": "1900509"
  },
  {
    "text": "to get instant metrics and hips are to collect pod metrics what is really important though it's really from the",
    "start": "1900509",
    "end": "1907859"
  },
  {
    "text": "user point of view right so make sure that the user not only can they can't",
    "start": "1907859",
    "end": "1913109"
  },
  {
    "text": "deploy right so most of the discussions around kubernetes our cube CTL deploy",
    "start": "1913109",
    "end": "1918239"
  },
  {
    "text": "something right that's easy but how do you do it like real in production with a compliant systems when a way that people",
    "start": "1918239",
    "end": "1925019"
  },
  {
    "text": "can actually monitor everything so what we do is we integrate with our existing systems and we provide some default",
    "start": "1925019",
    "end": "1931709"
  },
  {
    "text": "checks and alerts for all the applications are deployed that the teams can actually just just use additionally",
    "start": "1931709",
    "end": "1938789"
  },
  {
    "text": "to that we have an English controller and we have some standard metrics regarding latency error rate that people",
    "start": "1938789",
    "end": "1946469"
  },
  {
    "text": "can just reuse to build some proper reporting all right so all of this data",
    "start": "1946469",
    "end": "1951899"
  },
  {
    "text": "will not be interesting if you don't have a way to actually have a look at it we have some custom dashboards the",
    "start": "1951899",
    "end": "1957329"
  },
  {
    "text": "picture is quite small but this is actually the dashboard that we use to monitor all these classes we run this",
    "start": "1957329",
    "end": "1962999"
  },
  {
    "text": "means we have some metrics regarding the API server latency the number of ports a number of deployment which is a great",
    "start": "1962999",
    "end": "1968429"
  },
  {
    "text": "indicator in case you're running a kubernetes clusters just to get a feeling of what is actually happening",
    "start": "1968429",
    "end": "1973709"
  },
  {
    "text": "and then we have some default dashboard for four users that they can actually",
    "start": "1973709",
    "end": "1980029"
  },
  {
    "text": "import clone to just monitor the memory zippy usage latency and all the other",
    "start": "1980029",
    "end": "1986789"
  },
  {
    "text": "things all right so this was just just look at some of the important things",
    "start": "1986789",
    "end": "1993440"
  },
  {
    "text": "that we learn with discover and we recommend regarding kubernetes on ideas",
    "start": "1993440",
    "end": "1998809"
  },
  {
    "text": "in this case but there are definitely some more factors to consider for example you want to have a look to",
    "start": "1998809",
    "end": "2004629"
  },
  {
    "text": "configure some same defaults kubernetes will not limit the number of pots you can run in a namespace by default so you",
    "start": "2004629",
    "end": "2010179"
  },
  {
    "text": "want to put a quote on that or you want to have a limit range to have some default resource limits for your",
    "start": "2010179",
    "end": "2017110"
  },
  {
    "text": "application and you want to know your cluster limits it's easy to say I can run ten pods but as you can see healthy",
    "start": "2017110",
    "end": "2024460"
  },
  {
    "text": "didn't want to even run the 10 million pods as someone asked this morning in the keynote and there is a reason for",
    "start": "2024460",
    "end": "2029619"
  },
  {
    "text": "that and you also want to as well work on simplifying the user experience by",
    "start": "2029619",
    "end": "2035019"
  },
  {
    "text": "for example starting using things like ingress or external DNS which is actually an open source project to get",
    "start": "2035019",
    "end": "2041350"
  },
  {
    "text": "some nice dns name for apps which we developed and is in the companies incubator alright that was it time is over so I'm",
    "start": "2041350",
    "end": "2049868"
  },
  {
    "text": "not sure which question we can get so one of the last things that we would like to share with you is this is a",
    "start": "2049869",
    "end": "2055000"
  },
  {
    "text": "workshop that we have been building for past several months now this is a workshop that we are sharing with our",
    "start": "2055000",
    "end": "2061000"
  },
  {
    "text": "customers or partners or developers if you are new to kubernetes and you're gonna get started with kubernetes on AWS",
    "start": "2061000",
    "end": "2067960"
  },
  {
    "text": "you know you can literally start with this workshop and you can spend a few",
    "start": "2067960",
    "end": "2073089"
  },
  {
    "text": "days literally if you want to go through each chapter n-by-n and what we are encouraging is if you don't like",
    "start": "2073089",
    "end": "2079960"
  },
  {
    "text": "something about the workshop this is done completely in an open-source way submit an issue send a pull request and",
    "start": "2079960",
    "end": "2085929"
  },
  {
    "text": "that's what we are looking for from you we are really trying to show all possible ways our customers are using it",
    "start": "2085929",
    "end": "2091179"
  },
  {
    "text": "you know in this workshop we want to engage with you we're going to work with you on how we can contribute and make",
    "start": "2091179",
    "end": "2096669"
  },
  {
    "text": "this workshop more successful so star it you know let us know how we can be helpful to you thank you thank you if",
    "start": "2096669",
    "end": "2104740"
  },
  {
    "text": "you want to if you want to talk about disasters things that went wrong",
    "start": "2104740",
    "end": "2110339"
  },
  {
    "text": "failures HDD dying all this kind of stuff where I'm outside there is also other members of my team that will be",
    "start": "2110339",
    "end": "2116999"
  },
  {
    "text": "fun thank you [Applause]",
    "start": "2116999",
    "end": "2124719"
  }
]