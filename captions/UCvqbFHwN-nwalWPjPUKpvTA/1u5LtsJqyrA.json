[
  {
    "text": "hey I hope I'm audible so we know it's the last day of the conference and everyone has a lot to think about you're",
    "start": "160",
    "end": "5799"
  },
  {
    "text": "pretty saturated but we hoping we can give you like a little bit more right so we're going to be talking about project",
    "start": "5799",
    "end": "11080"
  },
  {
    "text": "carel today but before we jump into that a little bit about ourselves so my name is somic I work at",
    "start": "11080",
    "end": "18240"
  },
  {
    "text": "team tanzu atcom and I mainly work with developer experience tooling and a part",
    "start": "18240",
    "end": "23439"
  },
  {
    "text": "of my job is to maintain the project we're going to be talking about today KL and I'm here with my colleague and hi",
    "start": "23439",
    "end": "29439"
  },
  {
    "text": "I'm Daniel as you can tell by my name and probably not my accent I'm from here um I work in the tanzo team and the",
    "start": "29439",
    "end": "35879"
  },
  {
    "text": "spring team I do Java for a living don't judge me and here are socials um you",
    "start": "35879",
    "end": "41440"
  },
  {
    "text": "know feel free to reach out if you have questions if you have feedback we love to engage is the font size all right for",
    "start": "41440",
    "end": "46559"
  },
  {
    "text": "the people in the back of the room yeah all right a little bit more this cool all right all right so",
    "start": "46559",
    "end": "56559"
  },
  {
    "text": "carvo so um I guess we can really hop real quick to the website maybe so",
    "start": "56559",
    "end": "62320"
  },
  {
    "text": "Carell started off as like a set of composable single purpose tools and they",
    "start": "62320",
    "end": "67439"
  },
  {
    "text": "sort of come together to help you sort of manage your applications and ship them to your end user right I guess the",
    "start": "67439",
    "end": "74119"
  },
  {
    "text": "keywords here are reliable single purpose and composable and when we say reliable we mean that it's the tools are",
    "start": "74119",
    "end": "79360"
  },
  {
    "text": "important like they're very repeatable in nature and if we scroll down a bit we'll be taking a look at the tools",
    "start": "79360",
    "end": "86200"
  },
  {
    "text": "you're talking about today so we'll mainly be talking about the first fight tools you see here and uh not the",
    "start": "86200",
    "end": "92560"
  },
  {
    "text": "experimental ones so to sort of uh I guess the best way to explore the tools is to get your hands dirty right and",
    "start": "92560",
    "end": "98479"
  },
  {
    "text": "that's exactly what we'll be doing so maybe we can hop back to the terminal all right let's get let's get rolling so",
    "start": "98479",
    "end": "105320"
  },
  {
    "text": "what do we start with right so we'll be starting off with YT YT stands for yaml",
    "start": "105320",
    "end": "110680"
  },
  {
    "text": "templating Tool right and that's exactly what it does the templates yaml but what sort of sets YT aside is that YT",
    "start": "110680",
    "end": "119280"
  },
  {
    "text": "understands yaml a data structure which means that you can shape yaml in unique ways and everything that goes into YT is",
    "start": "119280",
    "end": "127039"
  },
  {
    "text": "valid yaml and everything that comes out of it is the have valid yam so maybe you could take a quick look like we have",
    "start": "127039",
    "end": "132200"
  },
  {
    "text": "some configuration to play around with so I want to point out that any any yaml",
    "start": "132200",
    "end": "137280"
  },
  {
    "text": "is valid y That's valid is okay for ytt right um so if I do this I can pass it",
    "start": "137280",
    "end": "143080"
  },
  {
    "text": "into ytt and it it works it doesn't have to be kubernetes resources so if you want to template your GitHub actions",
    "start": "143080",
    "end": "149519"
  },
  {
    "text": "your config for I don't know what you can use ytt for that um and so we",
    "start": "149519",
    "end": "154640"
  },
  {
    "text": "already have some basis for a kubernetes config because this is coupon right so",
    "start": "154640",
    "end": "161440"
  },
  {
    "text": "fairly straightforward normal config service deployment and so we can use ytt",
    "start": "161440",
    "end": "167800"
  },
  {
    "text": "and experiment on that so I'm going to open a second terminal here on the right uh and once I change any of these files",
    "start": "167800",
    "end": "175560"
  },
  {
    "text": "I'm going to run a command and the command is going to be clear my",
    "start": "175560",
    "end": "180800"
  },
  {
    "text": "terminal and then pass run ytt on the all the files in this directory and then",
    "start": "180800",
    "end": "187120"
  },
  {
    "text": "pass them into yq to have some coloring right so here um I have my my file and",
    "start": "187120",
    "end": "193560"
  },
  {
    "text": "if I go into the comy here I change the port to Fubar Capital right it updates",
    "start": "193560",
    "end": "199640"
  },
  {
    "text": "on the right okay so we have infra to work with ytt what what should we do all",
    "start": "199640",
    "end": "204799"
  },
  {
    "text": "right so so how we Supply YT instructions is that we use sort of special comment",
    "start": "204799",
    "end": "210319"
  },
  {
    "text": "and let's start off with a variable maybe like let's see what it looks like to sort of replace a value with a variable so let's do a not port and I'm",
    "start": "210319",
    "end": "217840"
  },
  {
    "text": "going to compute it dynamically right so here I'm writing ytt code that's",
    "start": "217840",
    "end": "224280"
  },
  {
    "text": "executed and then I can use the output of that code in the in the in the",
    "start": "224280",
    "end": "231000"
  },
  {
    "text": "program and it changes the value here mhm so now that we have like a variable",
    "start": "231000",
    "end": "237799"
  },
  {
    "text": "pleas maybe we could try out a function so I see that we're using labels multiple places so let's sort of put",
    "start": "237799",
    "end": "244519"
  },
  {
    "text": "together function that supplies those labels and sort of D duplicate a y rate so we could write a function in ytt that",
    "start": "244519",
    "end": "252200"
  },
  {
    "text": "looks like this and you know it could be any function that actually looks like a function U but the reason why we use a",
    "start": "252200",
    "end": "258280"
  },
  {
    "text": "function and not a variable is because we with functions we can do this I can take the yaml directly and this being",
    "start": "258280",
    "end": "265400"
  },
  {
    "text": "valid yl it can be returned by the function so I can use it here labels right and then I guess SLE app right uh",
    "start": "265400",
    "end": "273600"
  },
  {
    "text": "SLE app so I have labels here labels and then I think I have some",
    "start": "273600",
    "end": "281280"
  },
  {
    "text": "more here labels so of course uh nothing changes if I change my label here sum",
    "start": "281280",
    "end": "289639"
  },
  {
    "text": "label right it gets updated in all the places I think this is like a good uh",
    "start": "289639",
    "end": "295880"
  },
  {
    "text": "good place to show how YTD is virtually incapable of producing invalid yaml",
    "start": "295880",
    "end": "301080"
  },
  {
    "text": "right so maybe if you try to mess up the indentation just blows up right this is not valid yaml if I save it's going to",
    "start": "301080",
    "end": "307199"
  },
  {
    "text": "tell me well you're trying to do something that's not allowed here it's not a map it has a value so I'm happy",
    "start": "307199",
    "end": "312600"
  },
  {
    "text": "with this and I get feedback immediately I don't have to wait until I try to apply it to the cluster for it to blow",
    "start": "312600",
    "end": "317800"
  },
  {
    "text": "up ytt already tells me this is wrong so let's try something more fun right uh so we have a list of ports over here how",
    "start": "317800",
    "end": "324280"
  },
  {
    "text": "about we try to sort of create a fall Loop and loop over them Loop over like a few values right so",
    "start": "324280",
    "end": "330520"
  },
  {
    "text": "so we have not ports and I could do ports manually like this um I can also do say oh my port is going to be 30,000",
    "start": "330520",
    "end": "338880"
  },
  {
    "text": "plus I for I in range I don't know four right something like that explodes",
    "start": "338880",
    "end": "345800"
  },
  {
    "text": "because the node Port doesn't exist anymore and for node port in node",
    "start": "345800",
    "end": "352960"
  },
  {
    "text": "ports right and I have to end my for Loop oops end my for Loop and it here",
    "start": "352960",
    "end": "360680"
  },
  {
    "text": "so now I have note ports like this U that come from this list this weird list",
    "start": "360680",
    "end": "367000"
  },
  {
    "text": "yep and so this is where you might notice that this looks a lot like python that's mainly because YT accepts",
    "start": "367000",
    "end": "373919"
  },
  {
    "text": "instructions in starlock which is like a dialect of python right okay so we have done some funky stuff now but uh we do",
    "start": "373919",
    "end": "381240"
  },
  {
    "text": "need our users to be able to sort of Supply some values when they're consuming our configuration right so let's look at what uh accepting values",
    "start": "381240",
    "end": "389080"
  },
  {
    "text": "while the configuration is being consumed looks like right so for um using values that comes from outside or",
    "start": "389080",
    "end": "396319"
  },
  {
    "text": "data that comes from outside there's a ytt module think of it as a library and so I'm going to load this data module",
    "start": "396319",
    "end": "403400"
  },
  {
    "text": "it's called data and then from here I can reference it data of values and then I can ask for say a channel that should",
    "start": "403400",
    "end": "410319"
  },
  {
    "text": "come that should be supplied to the program so of course it doesn't work",
    "start": "410319",
    "end": "415639"
  },
  {
    "text": "because nothing is supplying channel here so I could run I could run the same command with yttf Dot and then data",
    "start": "415639",
    "end": "423879"
  },
  {
    "text": "value Channel equals coupon for example right and then in that case it gets",
    "start": "423879",
    "end": "429319"
  },
  {
    "text": "templated in from a a CLI flag so I guess this works just fine if you have",
    "start": "429319",
    "end": "434639"
  },
  {
    "text": "one value but more often the not you'll have like a set of values so you can sort of Supply a file with your values",
    "start": "434639",
    "end": "440599"
  },
  {
    "text": "in it so that you can replace like you can like Supply multiple values at the same time right so in in this Direct in",
    "start": "440599",
    "end": "446639"
  },
  {
    "text": "this directory we have a a file called data values yo it could be called anything and in here I can supply the",
    "start": "446639",
    "end": "454120"
  },
  {
    "text": "channel right so channel is going to be I don't know testing and so to to ytt",
    "start": "454120",
    "end": "459960"
  },
  {
    "text": "this is just a yaml file so if I want to turn it into a a thing that provides",
    "start": "459960",
    "end": "465159"
  },
  {
    "text": "data values I can annotate it and saying this is data values right and so now",
    "start": "465159",
    "end": "471280"
  },
  {
    "text": "this is passed from here um we could be passing the note ports um you know uh I",
    "start": "471280",
    "end": "477720"
  },
  {
    "text": "I don't know one two and three right and it's in the config so in",
    "start": "477720",
    "end": "485680"
  },
  {
    "text": "here the node ports could be data. values. node ports and so now",
    "start": "485680",
    "end": "492919"
  },
  {
    "text": "my node ports come from this data value file and like you probably don't want your end user to using like y ytt",
    "start": "492919",
    "end": "499879"
  },
  {
    "text": "annotations you don't want them to know what ytt is most of the time so you can actually use like another flag which",
    "start": "499879",
    "end": "505800"
  },
  {
    "text": "doesn't require The annotation so I'm going to copy this data values file put it one level up so it doesn't it's not",
    "start": "505800",
    "end": "511520"
  },
  {
    "text": "included by default um and I change it uh so we said values and here I'm going",
    "start": "511520",
    "end": "519360"
  },
  {
    "text": "to do node ports is just one channel is production and so what we say is our",
    "start": "519360",
    "end": "524760"
  },
  {
    "text": "users don't really have to know the details of of how to work with ytt to just Supply a value file so we do this",
    "start": "524760",
    "end": "531640"
  },
  {
    "text": "and we can do yttf Dash and then data values file it comes from this yaml file",
    "start": "531640",
    "end": "537279"
  },
  {
    "text": "which is a normal yaml file and so now now we have our production um uh Channel",
    "start": "537279",
    "end": "543320"
  },
  {
    "text": "and our Port being templated in um so let's do something interesting right let's change up the values file and",
    "start": "543320",
    "end": "548920"
  },
  {
    "text": "maybe turn the port into a string and I think that'll work right now right so if",
    "start": "548920",
    "end": "554000"
  },
  {
    "text": "I do this and I change this to a string um then I have node ports with the wrong",
    "start": "554000",
    "end": "559720"
  },
  {
    "text": "type here right and users might try stuff like this right and you don't want them to be able to do that so YT has a",
    "start": "559720",
    "end": "566760"
  },
  {
    "text": "concept of like value schema where you can sort of rest RCT what what values a user can supply right so I have my value",
    "start": "566760",
    "end": "573760"
  },
  {
    "text": "schema prepared already so I don't have to type it but it's again it's a normal yaml file it has a special comment",
    "start": "573760",
    "end": "579519"
  },
  {
    "text": "saying this is the schema um and it requires a channel that is uh empty a no",
    "start": "579519",
    "end": "585519"
  },
  {
    "text": "Port which is an array of integers and then a namespace and if I save this then",
    "start": "585519",
    "end": "592279"
  },
  {
    "text": "ytt complains it tells me well on line six in your data values yl you're supplying a string right and it doesn't",
    "start": "592279",
    "end": "598320"
  },
  {
    "text": "match the expected type which is integer which I you find here in this value schema line four right and you can",
    "start": "598320",
    "end": "605120"
  },
  {
    "text": "actually go like fancier with your validations you can have lens checks in place you can even have like a Lambda",
    "start": "605120",
    "end": "610200"
  },
  {
    "text": "function which takes the value and sort of verifies it in certain ways right right yeah and so maybe maybe one thing",
    "start": "610200",
    "end": "616200"
  },
  {
    "text": "we haven't shown this is happening in comments right so if I disable uh the ytt coloring this is just yaml comments",
    "start": "616200",
    "end": "623720"
  },
  {
    "text": "um with with YTD I can still do comments this is a Comon comment right",
    "start": "623720",
    "end": "630399"
  },
  {
    "text": "as you do need that so I guess we at the stage where we have like a way of",
    "start": "630399",
    "end": "635560"
  },
  {
    "text": "shaping a yaml configuration but what YT also helps you do is that it sort of helps you apply overlays to large chunks",
    "start": "635560",
    "end": "642440"
  },
  {
    "text": "of yaml files right so you can sort of shape your yl using some functions right so in here in this directory there's",
    "start": "642440",
    "end": "649160"
  },
  {
    "text": "also an overlays file um overlays and so we can tell it change me",
    "start": "649160",
    "end": "655760"
  },
  {
    "text": "this file change it evolve it and the way we do this is very similar to what you would be doing with customized right",
    "start": "655760",
    "end": "662000"
  },
  {
    "text": "you're applying an overlay um and we tell ytt find all the nodes the yaml",
    "start": "662000",
    "end": "669040"
  },
  {
    "text": "nodes that match anything and then for these I want you to change the API version to V1 somic 1 the best",
    "start": "669040",
    "end": "676560"
  },
  {
    "text": "kubernetes version as you all know so if I do this ytt will complain to me and",
    "start": "676560",
    "end": "681600"
  },
  {
    "text": "try and help me it says well we know by default I expect one node when you do match but you supplied two there was a",
    "start": "681600",
    "end": "688079"
  },
  {
    "text": "service and a deployment so if I do this my deployment is now a V1 suic 1",
    "start": "688079",
    "end": "693639"
  },
  {
    "text": "deployment and V1 suic 1 service and since this is um this is",
    "start": "693639",
    "end": "699200"
  },
  {
    "text": "like a bit too broad I want to scope it down and maybe do that just for the let's say for the service so we're going",
    "start": "699200",
    "end": "706480"
  },
  {
    "text": "to only take a subset of the resources and I want a subset of type",
    "start": "706480",
    "end": "712600"
  },
  {
    "text": "kind and change the service service right so save that so now the V1",
    "start": "712600",
    "end": "722399"
  },
  {
    "text": "the deployment is back to the boring apps V1 uh uh API version but the",
    "start": "722399",
    "end": "727760"
  },
  {
    "text": "service is still V1 to MC1 and you can go crazy with any programming you want to happen in here um so for example if I",
    "start": "727760",
    "end": "735720"
  },
  {
    "text": "oops if I take this to here and I make that into a variable so service is this",
    "start": "735720",
    "end": "742680"
  },
  {
    "text": "so match by service and then I could say well you know what anything that's not a",
    "start": "742680",
    "end": "747720"
  },
  {
    "text": "service I don't really care about it so here take me the opposite of service so",
    "start": "747720",
    "end": "753720"
  },
  {
    "text": "not the not operation everything that is not a service I want you to Overlay",
    "start": "753720",
    "end": "760320"
  },
  {
    "text": "remove it remove there we go and so now I only have a service",
    "start": "760320",
    "end": "767199"
  },
  {
    "text": "because the other the deployment has been removed I guess it works the same way if you don't have overlay remove because it just replaces have those bits",
    "start": "767199",
    "end": "774240"
  },
  {
    "text": "with like an mty file and you could in theory also patch in resources and what's cool is like these bits interact",
    "start": "774240",
    "end": "779600"
  },
  {
    "text": "with each other so you can use functions uh you can use loops and you can also have data values being fed into your",
    "start": "779600",
    "end": "785800"
  },
  {
    "text": "templates right so in in a way it's much more powerful than customized because you could write functions that read the",
    "start": "785800",
    "end": "791519"
  },
  {
    "text": "existing data and then change it you know um patch a config that is in inside a config map or what have you yep so um",
    "start": "791519",
    "end": "800760"
  },
  {
    "text": "I guess um you want to do a quick reap maybe yeah so quick recap ytt as our yaml templating tool um it's yaml aware",
    "start": "800760",
    "end": "808199"
  },
  {
    "text": "it's it's a all the programming happens in comments and you can work with any yaml very useful and it's a good",
    "start": "808199",
    "end": "814800"
  },
  {
    "text": "substitute for either Helm or customize or both and you can combine them right you can do a Helm template if you have",
    "start": "814800",
    "end": "821160"
  },
  {
    "text": "Helm charts and then you want to apply overlays but customize is not powerful enough well you can apply overlays with",
    "start": "821160",
    "end": "827279"
  },
  {
    "text": "ytt or on the other hand if you you can do craft your confli with ytt and apply your existing customized tools to it if",
    "start": "827279",
    "end": "833880"
  },
  {
    "text": "you will if you want I guess what what's worth calling out is that you don't need to uproot your existing workflows to",
    "start": "833880",
    "end": "839560"
  },
  {
    "text": "start using YTD you can start using it as like an additional layer right so now that we have like a way of dealing with",
    "start": "839560",
    "end": "845720"
  },
  {
    "text": "a configuration I guess what comes next is how do we deploy to the cluster oh before we deploy it yes there's there's",
    "start": "845720",
    "end": "851000"
  },
  {
    "text": "one cool thing that we haven't shown oh yeah so we're doing we're we're we're doing U you know fun stuff in the",
    "start": "851000",
    "end": "857440"
  },
  {
    "text": "terminal uh but if you just want to try out ytt do you go to the carv website toyt for those in the back we can we can",
    "start": "857440",
    "end": "864480"
  },
  {
    "text": "take a look at that right ytt right Carvel ytt and then down here here you",
    "start": "864480",
    "end": "870839"
  },
  {
    "text": "have a playground which basically does what I'm doing in in my terminal so it has many examples if you want to learn",
    "start": "870839",
    "end": "877360"
  },
  {
    "text": "how to Lo use a for Loop or a function and then you can change in here and this is prier and this is and as you may",
    "start": "877360",
    "end": "884680"
  },
  {
    "text": "notice it changes here on the right and if I change the port to the wrong type hello right I got the output from ytt so",
    "start": "884680",
    "end": "893360"
  },
  {
    "text": "sorry you were saying deploying this yes my bad okay so now the tool that c will",
    "start": "893360",
    "end": "898800"
  },
  {
    "text": "use users to deploy and manage resources on top of the cluster is called CAP and how cap essentially works is that it",
    "start": "898800",
    "end": "905519"
  },
  {
    "text": "manages resources as a group on the cluster and so cap already knows how certain resources behave and you can",
    "start": "905519",
    "end": "912000"
  },
  {
    "text": "also use annotations to sort of tell cap to Define relationships between custom",
    "start": "912000",
    "end": "918040"
  },
  {
    "text": "resources right so let's I guess our config has changed a bit right so we made a a more interesting confing more",
    "start": "918040",
    "end": "925399"
  },
  {
    "text": "than just a deployment in fig map so if I run this with YT um I get you know ingresses Services",
    "start": "925399",
    "end": "932480"
  },
  {
    "text": "config maps and at the end because we're we're we're a bit cheeky we put the name",
    "start": "932480",
    "end": "937720"
  },
  {
    "text": "space in which everything is deployed at the end so I think that's fortunate because we can just use Cube cutle now",
    "start": "937720",
    "end": "943920"
  },
  {
    "text": "to see how things would look different if you use Cube cutle instead right right so you know that with Cube cuttle if you're doing this um you should",
    "start": "943920",
    "end": "951240"
  },
  {
    "text": "Define your resources in an order that makes sense so not the namespace at the end so if I try to do this it says well",
    "start": "951240",
    "end": "958279"
  },
  {
    "text": "the name space is created but everything else fails because the Nam space got created after we tried to create the",
    "start": "958279",
    "end": "963639"
  },
  {
    "text": "other resources so CU cutle is not really friendly with us here so the alternative is using cap so in here I'm",
    "start": "963639",
    "end": "970880"
  },
  {
    "text": "going to zoom in again uh we can do cap deploy and then we give our app a name",
    "start": "970880",
    "end": "976240"
  },
  {
    "text": "we're going to call it coupon it uses the file from standard in and then I'm going to say don't wait for my",
    "start": "976240",
    "end": "981639"
  },
  {
    "text": "confirmation d d yes and so in here we have the output so cap is telling us",
    "start": "981639",
    "end": "986959"
  },
  {
    "text": "everything that's going to be deployed so I'm going going to be creating a name space for you a deployment Services Ingress config map and everything so",
    "start": "986959",
    "end": "994519"
  },
  {
    "text": "like when cap exits at this point you sure that all of your pods have spun up it sort of waits for your deployment to",
    "start": "994519",
    "end": "999839"
  },
  {
    "text": "reach the desired state right so it does many things right it starts by applying things in an order that makes sense and",
    "start": "999839",
    "end": "1006360"
  },
  {
    "text": "that do not depend on how they're defined in the file so you can see it starts with creating the namespace once",
    "start": "1006360",
    "end": "1012240"
  },
  {
    "text": "the namespace is created it will create the config map because the deployment wants the config map to be there and",
    "start": "1012240",
    "end": "1018560"
  },
  {
    "text": "then once you know the the priority resources are created then we're going to create the deployment and then as",
    "start": "1018560",
    "end": "1024438"
  },
  {
    "text": "suic said we just don't create it and let you write your own weight rules we know what a successful deployment looks",
    "start": "1024439",
    "end": "1031400"
  },
  {
    "text": "like so we can wait on it and we can read the status and so you can see it takes you know a few seconds to it's",
    "start": "1031400",
    "end": "1038038"
  },
  {
    "text": "actually really fast it takes three seconds to um reconcile and so once cap",
    "start": "1038039",
    "end": "1043280"
  },
  {
    "text": "tells me this has succeeded it means my app is actually ready and I I can look at it once it's done deployed right so",
    "start": "1043280",
    "end": "1049600"
  },
  {
    "text": "cap inspect um the app that's called coupon we called it right so in here we",
    "start": "1049600",
    "end": "1055280"
  },
  {
    "text": "have all the resources that we created right we can see it as a tree and of course we can list all the apps the all",
    "start": "1055280",
    "end": "1061799"
  },
  {
    "text": "the cap apps that are in the cluster so here's our coupon app but we also have some infrastructure that I created for",
    "start": "1061799",
    "end": "1068240"
  },
  {
    "text": "desk talk so I installed a controller and an Ingress controller and so on as cap applications y so and you called out",
    "start": "1068240",
    "end": "1075200"
  },
  {
    "text": "that the config map was created before the deployment right and I guess that's an example example of how you can sort of control certain Behavior with",
    "start": "1075200",
    "end": "1081799"
  },
  {
    "text": "annotations so if you take a look at our configuration we tell cap that the config map is a version resource so cap",
    "start": "1081799",
    "end": "1088960"
  },
  {
    "text": "cap already knows that config Maps might be referred in deployments so if we update this config map now what's going",
    "start": "1088960",
    "end": "1095799"
  },
  {
    "text": "to happen is cap is going to create a new version of the config map and ensure that the deployment is updated as well",
    "start": "1095799",
    "end": "1101440"
  },
  {
    "text": "so the deployment will be spinning up new pods which reflect the new config so we do the same thing we template the the",
    "start": "1101440",
    "end": "1108360"
  },
  {
    "text": "config with ytc we reapply the same cap deploy so it's it's going to update our",
    "start": "1108360",
    "end": "1114360"
  },
  {
    "text": "CAP app and I'm also passing the flag to tell it give me the diff of what you're doing here so first when we look at it",
    "start": "1114360",
    "end": "1121600"
  },
  {
    "text": "it gives me a nice diff it tells you oh well here on your on your output of YT",
    "start": "1121600",
    "end": "1126720"
  },
  {
    "text": "on line two I changed the text to from English to French but then it also tells",
    "start": "1126720",
    "end": "1132120"
  },
  {
    "text": "me ay your deployment was using a version one of the config map I'm",
    "start": "1132120",
    "end": "1138240"
  },
  {
    "text": "creating a a version two of your config map and then I'm changing the deployment to use the new version so that means my",
    "start": "1138240",
    "end": "1145280"
  },
  {
    "text": "config map is created first and then my deployment rolls out and I don't have to roll it out manually um cap does that",
    "start": "1145280",
    "end": "1153720"
  },
  {
    "text": "for me and of course it has custom you know you can do powerful custom rules yourself or ordering or so if you have",
    "start": "1153720",
    "end": "1160960"
  },
  {
    "text": "like a bunch of custom resources you can Define groups of resources and sort of tell cap how their order amongst each",
    "start": "1160960",
    "end": "1167240"
  },
  {
    "text": "other right right and so I can delete as well um so quick recap cap is cu cutle",
    "start": "1167240",
    "end": "1174600"
  },
  {
    "text": "but it's friendly towards users so if you're hacking on your cluster and you're deploying without get UPS using",
    "start": "1174600",
    "end": "1180080"
  },
  {
    "text": "cap is nice because you can find what you've deployed you don't need to keep track of the files um it has waiting",
    "start": "1180080",
    "end": "1185960"
  },
  {
    "text": "built in and it has powerful rules for ordering so you can you know manage your own dependencies if things are not",
    "start": "1185960",
    "end": "1192200"
  },
  {
    "text": "eventually consistent you say I want this first and then that and then if this succeeds give me that",
    "start": "1192200",
    "end": "1199280"
  },
  {
    "text": "so I guess we at a point where we have a way of managing our configuration and we know how to deploy things right so",
    "start": "1199280",
    "end": "1205120"
  },
  {
    "text": "whenever you're shipping your configuration though you want to be sure that everything's in a nice little box that your customer can consume so uh I",
    "start": "1205120",
    "end": "1212280"
  },
  {
    "text": "guess where we're going to start off is uh images so more often than not your configuration is going to reference",
    "start": "1212280",
    "end": "1217960"
  },
  {
    "text": "images and what you want to be sure about is that the image you were refering to while putting your",
    "start": "1217960",
    "end": "1223240"
  },
  {
    "text": "configuration together is the same one that's being referred to when your users consuming your config ation and the only",
    "start": "1223240",
    "end": "1230080"
  },
  {
    "text": "good way of doing this is using sham references because we not really sure if someone at hashiko pushed another",
    "start": "1230080",
    "end": "1235760"
  },
  {
    "text": "version of HTTP Echo yesterday with the tag rate so for doing this we have a tool called cable and what cable does is",
    "start": "1235760",
    "end": "1242280"
  },
  {
    "text": "it sort of helps you log down onto immutable references so let's take a look at what that looks like K build",
    "start": "1242280",
    "end": "1249120"
  },
  {
    "text": "kbl great so uh we can take a image from the uh standard int it reads our file",
    "start": "1249120",
    "end": "1256520"
  },
  {
    "text": "and then by some black magic it turns turns this image into its shave reference and gives me some annotations",
    "start": "1256520",
    "end": "1263440"
  },
  {
    "text": "on on the deployment so how do how does that work how does the so CA essentially",
    "start": "1263440",
    "end": "1269159"
  },
  {
    "text": "just looks for the image key and you know what your configuration might actually be using a key like container",
    "start": "1269159",
    "end": "1274960"
  },
  {
    "text": "major times and you can configure cable to be aware of that so so if you like just provide any yaml with those keys in",
    "start": "1274960",
    "end": "1281840"
  },
  {
    "text": "it cable is going to be able to resolve it which means you can in theory use cable with other platforms as well and",
    "start": "1281840",
    "end": "1287480"
  },
  {
    "text": "if you write your custom resources and they use image it's fine you don't have to teach C how to do",
    "start": "1287480",
    "end": "1293760"
  },
  {
    "text": "that okay and so you don't want so what you want to do however is sort of",
    "start": "1293760",
    "end": "1299039"
  },
  {
    "text": "generate a lock of sorts so that when your users are consuming your configuration they have a reference as",
    "start": "1299039",
    "end": "1305279"
  },
  {
    "text": "to which images were used when uh you were putting together your configuration so one thing we could do is like version",
    "start": "1305279",
    "end": "1311760"
  },
  {
    "text": "this run ke build in version this specific version but then we kind of lose what was the tag we used and so",
    "start": "1311760",
    "end": "1318120"
  },
  {
    "text": "instead we're going to tell it uh generate uh a lock file",
    "start": "1318120",
    "end": "1324080"
  },
  {
    "text": "output and then we're going to put in the right place and then we'll we'll go into image package later on images. Yo",
    "start": "1324080",
    "end": "1330679"
  },
  {
    "text": "right so if I run this same thing but now I have an extra file in image package images. yo and that tell me well",
    "start": "1330679",
    "end": "1338000"
  },
  {
    "text": "I found and what you passed me I found htpa C1 and it resolved to this and now",
    "start": "1338000",
    "end": "1344880"
  },
  {
    "text": "when I distribute my config I can distribute my config um my files with the tag in them and",
    "start": "1344880",
    "end": "1351520"
  },
  {
    "text": "then my image package file with it and if cable consumes it it's immediate",
    "start": "1351520",
    "end": "1357400"
  },
  {
    "text": "right I don't have to talk to dockerhub to know how to resolve this into a sha",
    "start": "1357400",
    "end": "1362640"
  },
  {
    "text": "this is essentially what a user will be doing while consuming a configuration okay so now we show that",
    "start": "1362640",
    "end": "1368760"
  },
  {
    "text": "our images are what they're supposed to be but we still have a configuration right what you want to be able to do is",
    "start": "1368760",
    "end": "1374279"
  },
  {
    "text": "bundle your configuration into an artifact maybe an OC artifact so that you can test it sign it and like sort of",
    "start": "1374279",
    "end": "1380480"
  },
  {
    "text": "ship it in the nice little box right and that's what image package does for us right so instead of doing kit Toops and",
    "start": "1380480",
    "end": "1386120"
  },
  {
    "text": "pushing this to get um we can make uh immutable artifacts that we're going to be keeping here uh with image package so",
    "start": "1386120",
    "end": "1393600"
  },
  {
    "text": "we do image package image package push into a bundle",
    "start": "1393600",
    "end": "1398919"
  },
  {
    "text": "a bundle is a target oi image I'm going to push it to my local registry 5,000",
    "start": "1398919",
    "end": "1404960"
  },
  {
    "text": "coupon uh caral and then the tag will be demo right and then take all the files that are in the current directory so it",
    "start": "1404960",
    "end": "1412159"
  },
  {
    "text": "pushes these files um so now if I take this uh artifact reference this",
    "start": "1412159",
    "end": "1420080"
  },
  {
    "text": "one if my mouse works it doesn't work I'll retype it so in here I have an empty directory I can do image package",
    "start": "1420080",
    "end": "1427320"
  },
  {
    "text": "pull the bundle that's called Local Host 5000 coupon uh Carl and I think the tag",
    "start": "1427320",
    "end": "1434000"
  },
  {
    "text": "was demo and the output put me the output in the that's called the out",
    "start": "1434000",
    "end": "1439080"
  },
  {
    "text": "directory so in my out directory here I have the files that are where on my",
    "start": "1439080",
    "end": "1445559"
  },
  {
    "text": "local fight systems or in the this other directory so I think we should take like a quick look at the output that was just",
    "start": "1445559",
    "end": "1452039"
  },
  {
    "text": "outputed so image package calls out that one or more images were not found in the same registry right so what happens is",
    "start": "1452039",
    "end": "1459320"
  },
  {
    "text": "so image package also has this copy functionality where you can ask image package to copy a bundle and when you do",
    "start": "1459320",
    "end": "1465679"
  },
  {
    "text": "that it sort of ensures that all of the images that were referenced in the lock file are also moved over to the new",
    "start": "1465679",
    "end": "1471919"
  },
  {
    "text": "registry right so Carell demo and I'm going to pretend I'm going to reach",
    "start": "1471919",
    "end": "1477240"
  },
  {
    "text": "another repository so to repo uh it's actually the same one but it has an alias on my machine 5,000 and then",
    "start": "1477240",
    "end": "1485159"
  },
  {
    "text": "coupon Carval I don't Supply the tag the tag will be inferred by the tag of the previous artifact so it copies things",
    "start": "1485159",
    "end": "1492600"
  },
  {
    "text": "over and it it finds that in my image lock file I had HTTP Echo so I have two",
    "start": "1492600",
    "end": "1499279"
  },
  {
    "text": "images the bundle that has my config and HTP Echo it downloads HTTP Echo and then",
    "start": "1499279",
    "end": "1505399"
  },
  {
    "text": "copies it to this other repository and so now if we pull the relocated bundle",
    "start": "1505399",
    "end": "1511520"
  },
  {
    "text": "so in if here if I do pull bundle uh called demo and then two uh or",
    "start": "1511520",
    "end": "1518440"
  },
  {
    "text": "output sorry and we're going to call that relocated relo recoated relocated",
    "start": "1518440",
    "end": "1524320"
  },
  {
    "text": "there we go so over here image package sort of calls out that it could could find every image referred uh in the same",
    "start": "1524320",
    "end": "1531919"
  },
  {
    "text": "project right and I think it'll be clearer if we take a look at the lock file uh it's in relocated uh",
    "start": "1531919",
    "end": "1538960"
  },
  {
    "text": "[Music] relocated sl. image package so the HTTP",
    "start": "1538960",
    "end": "1545120"
  },
  {
    "text": "Echo image is now on the same registry as um the bundle itself it's even in the",
    "start": "1545120",
    "end": "1550919"
  },
  {
    "text": "same repository right it's it's not it's not referred by a tag but it's referred by its sha so if someone applies build",
    "start": "1550919",
    "end": "1558799"
  },
  {
    "text": "to the config with this image package lock it means they can use the image that are hosted in the same repo as the",
    "start": "1558799",
    "end": "1566360"
  },
  {
    "text": "image package bundle itself which is very useful when you're doing you know you have air gap environments or you",
    "start": "1566360",
    "end": "1572480"
  },
  {
    "text": "have a a registry that you own and you want to be sure that the images come from there and not from the internet um",
    "start": "1572480",
    "end": "1579480"
  },
  {
    "text": "so image package copy helps you with this this is how we distribute the tanzo application platform our customers they",
    "start": "1579480",
    "end": "1585159"
  },
  {
    "text": "copy your bundle and we'll pull like I don't know 60 80 images and copy copy them to um to their",
    "start": "1585159",
    "end": "1592880"
  },
  {
    "text": "platform so for bundling two things K build to take an image reference and",
    "start": "1592880",
    "end": "1598880"
  },
  {
    "text": "make it immutable by using a shot and produce a lock file so it can be repeated and then image package for",
    "start": "1598880",
    "end": "1605360"
  },
  {
    "text": "managing configuration so bundling configuration and and do oci ops or registry Ops whatever you want to call",
    "start": "1605360",
    "end": "1610919"
  },
  {
    "text": "it and then relocate bundles across repositories and it can even be",
    "start": "1610919",
    "end": "1616000"
  },
  {
    "text": "recursive like an image package bundle can reference another bundle and so image package is smart enough to copy",
    "start": "1616000",
    "end": "1622200"
  },
  {
    "text": "everything your entire dependency tree from one registry to",
    "start": "1622200",
    "end": "1628000"
  },
  {
    "text": "another so um now that we have a way of sort of putting everything we want to ship into a nice little box uh I guess",
    "start": "1628000",
    "end": "1634919"
  },
  {
    "text": "this is when we start talking about cap controller so cap controller surfaces certain apis on your cluster and is",
    "start": "1634919",
    "end": "1642799"
  },
  {
    "text": "widely divided into two parts I guess so the first bit is the app SE itself so we",
    "start": "1642799",
    "end": "1648840"
  },
  {
    "text": "have like a nice flow for obtaining the desired cluster state right so we fetch",
    "start": "1648840",
    "end": "1654080"
  },
  {
    "text": "our configuration using image package then we templated using BYT and c and then we deployed using cap so what the",
    "start": "1654080",
    "end": "1661760"
  },
  {
    "text": "appc allows you to do is it allows you to put these steps in like a declarative form and that's essentially how you",
    "start": "1661760",
    "end": "1669240"
  },
  {
    "text": "define your application right so classic GitHub are the target where do I want to",
    "start": "1669240",
    "end": "1675600"
  },
  {
    "text": "deploy my things either another cluster or for the same cluster with a different service account that's scoped um where I",
    "start": "1675600",
    "end": "1683320"
  },
  {
    "text": "where I fetch my config from so you can fetch it from you know uh an image package bundle but also from get or from",
    "start": "1683320",
    "end": "1689799"
  },
  {
    "text": "a Helm chart repository if I want um and then how do we change it how do we modify it so we run ytt but we can run",
    "start": "1689799",
    "end": "1697279"
  },
  {
    "text": "Hound template we can use cild to pin images and how we deploy them um well it's called CAP controller so we deploy",
    "start": "1697279",
    "end": "1703600"
  },
  {
    "text": "it with cap yeah and with in the template section you can really see the composability bit because as we",
    "start": "1703600",
    "end": "1708840"
  },
  {
    "text": "mentioned earlier like if you're already using Helm template and want to use YT after it you can actually order those steps similarly even in the app",
    "start": "1708840",
    "end": "1715399"
  },
  {
    "text": "definition right okay so maybe we could take a look at our the application that we just put",
    "start": "1715399",
    "end": "1721760"
  },
  {
    "text": "together but as an apps here right so I prepackaged this bundle uh just in case",
    "start": "1721760",
    "end": "1727240"
  },
  {
    "text": "the demo went wrong but apparently it's all right uh so we have an app that y",
    "start": "1727240",
    "end": "1732399"
  },
  {
    "text": "all here uh it's an app CR and it's going to get its conf fig from an image",
    "start": "1732399",
    "end": "1739399"
  },
  {
    "text": "package bundle and then it's going to apply a ytt the ytt templating on the",
    "start": "1739399",
    "end": "1745240"
  },
  {
    "text": "image taking everything that's under the config directory and I want to supply as a user I want to supply my own data",
    "start": "1745240",
    "end": "1751559"
  },
  {
    "text": "values there are many ways to supply data values one of them is create a secret in my cluster use that secret I",
    "start": "1751559",
    "end": "1758799"
  },
  {
    "text": "can also use a file that comes from I don't know git repositor get repository another image package bundle or",
    "start": "1758799",
    "end": "1764960"
  },
  {
    "text": "something then we also apply kbuild um to resolve HTP Echo to the relocated",
    "start": "1764960",
    "end": "1771880"
  },
  {
    "text": "version of HTP Echo that lives into this kind registry and then we deploy with cap so let's deploy speaking of",
    "start": "1771880",
    "end": "1779240"
  },
  {
    "text": "deploying with cap I think I've deleted the coupon app yes so we can cap deploy",
    "start": "1779240",
    "end": "1785440"
  },
  {
    "text": "uh and the the file is called app.yaml right uh and I have to give this an app name of course app this is going to be",
    "start": "1785440",
    "end": "1792320"
  },
  {
    "text": "coupon appc so you know cap tells me I'm going to deploy this app R the secret that",
    "start": "1792320",
    "end": "1798919"
  },
  {
    "text": "goes with it and then the the the permissions arback that goes with it so that when this deployment happens cap",
    "start": "1798919",
    "end": "1806320"
  },
  {
    "text": "controller doesn't use its you know very powerful cluster admin service account",
    "start": "1806320",
    "end": "1812240"
  },
  {
    "text": "it uses this scoped service account and so this app can only create resources that a user with this service account",
    "start": "1812240",
    "end": "1818640"
  },
  {
    "text": "would be able to do so let's do this and then well this reconciles into",
    "start": "1818640",
    "end": "1825799"
  },
  {
    "text": "an app right which reconciles fast and in the end we have some pods that get",
    "start": "1825799",
    "end": "1831720"
  },
  {
    "text": "deployed I guess somewhere demo namespace here right so if you do like a cap LSA right now I think we'll be able",
    "start": "1831720",
    "end": "1838320"
  },
  {
    "text": "to see that what the appc did at the end of the day is it created a cap app right",
    "start": "1838320",
    "end": "1843360"
  },
  {
    "text": "so I have to zoom out a little bit unfortunately but here uh we created a",
    "start": "1843360",
    "end": "1849000"
  },
  {
    "text": "simple app.app yeah oops uh zoom out zoom out there we",
    "start": "1849000",
    "end": "1856919"
  },
  {
    "text": "go so I can now I can cap delete the app that's called uh coupon appc",
    "start": "1856919",
    "end": "1865679"
  },
  {
    "text": "right so one of the the drawbacks of this and I know that because I'm an app developer I write Java I don't write",
    "start": "1865679",
    "end": "1871600"
  },
  {
    "text": "yamamo for a living is that I have to be kind of very intimate with how it works",
    "start": "1871600",
    "end": "1877039"
  },
  {
    "text": "right and what's this image package thing what's uh what's a bundle what's ytt Etc um so cap controller has nice",
    "start": "1877039",
    "end": "1885000"
  },
  {
    "text": "utilities to do this to make this more more accessible to you know end users or",
    "start": "1885000",
    "end": "1890440"
  },
  {
    "text": "your developer personas in your in your organizations so that's where we start to talk about the second part of the",
    "start": "1890440",
    "end": "1896080"
  },
  {
    "text": "apis that cap controller surfaces and those are the packaging apis the packaging apis allow let's say a cluster",
    "start": "1896080",
    "end": "1901399"
  },
  {
    "text": "admin kind of actor to add make certain information available on the cluster about different versions of of apps and",
    "start": "1901399",
    "end": "1909240"
  },
  {
    "text": "as as someone who's consuming that cluster you can use those apis to install a specific version of an app",
    "start": "1909240",
    "end": "1915600"
  },
  {
    "text": "that's been shipped so what we're going to do is we're going to sort of change personas here and look at what it looks",
    "start": "1915600",
    "end": "1920880"
  },
  {
    "text": "like for someone who's using a cluster to install certain apps on it right right so we are using uh the key control",
    "start": "1920880",
    "end": "1927399"
  },
  {
    "text": "command line uh and we can say well package available oh it's in it's a different",
    "start": "1927399",
    "end": "1933080"
  },
  {
    "text": "name space I think install so I put everything in in a different name Suite",
    "start": "1933080",
    "end": "1938399"
  },
  {
    "text": "so K control package available list right and here as a",
    "start": "1938399",
    "end": "1946080"
  },
  {
    "text": "developer I'm not Interac I'm not doing yaml I'm just using my you know CLI and tells me well you have this caral demo",
    "start": "1946080",
    "end": "1952519"
  },
  {
    "text": "that you can install or certain manager all right I would like to install carel demo how how does that work um get so K",
    "start": "1952519",
    "end": "1959399"
  },
  {
    "text": "control package available get the the package that's called caral garer garwf right it tells me well it's",
    "start": "1959399",
    "end": "1967760"
  },
  {
    "text": "a ccon caral demo app it does this it does that there's one version okay cool um can you tell me more about this well",
    "start": "1967760",
    "end": "1975159"
  },
  {
    "text": "uh for version say version 0 1 1 0 0 um",
    "start": "1975159",
    "end": "1981679"
  },
  {
    "text": "we can tell it well this is fine but what's the values schema for that and so",
    "start": "1981679",
    "end": "1988519"
  },
  {
    "text": "here's what I need to configure my caral app I need to provide a channel I need to provide a list of domains I need to",
    "start": "1988519",
    "end": "1995320"
  },
  {
    "text": "provide a namespace this a string it has a default doesn't have a default it has some open API schema that tells me what",
    "start": "1995320",
    "end": "2000639"
  },
  {
    "text": "I should do with this so I prepared a values file uh in here in values. Yo and",
    "start": "2000639",
    "end": "2007519"
  },
  {
    "text": "so I can K control package install the package is called carel garer WF the",
    "start": "2007519",
    "end": "2014720"
  },
  {
    "text": "version is one and then I'm going to give it an install name so",
    "start": "2014720",
    "end": "2020200"
  },
  {
    "text": "coupon uh package install and then a values file uh that is dat values",
    "start": "2020200",
    "end": "2028519"
  },
  {
    "text": "values. yo right and like the output sort of shows you that when you do this right what essentially happens is the",
    "start": "2028519",
    "end": "2034600"
  },
  {
    "text": "fetch template deploy steps it fetches the image package bundle a template set with ytn cable and at the",
    "start": "2034600",
    "end": "2040519"
  },
  {
    "text": "end it's deploying things using cap so you can sort of see the same diff that we saw like earlier in the demo right",
    "start": "2040519",
    "end": "2047799"
  },
  {
    "text": "right and so this is a a developer friendly workflow but of course uh under the hood what it's really doing is",
    "start": "2047799",
    "end": "2053599"
  },
  {
    "text": "creating custom resources on the cluster so we have packaging resources package repository a package when I do K control",
    "start": "2053599",
    "end": "2060398"
  },
  {
    "text": "package available list it's going to look up the packages when I do K control package install it's going to do a",
    "start": "2060399",
    "end": "2065560"
  },
  {
    "text": "package install so it's it's still um get UPS friendly if I want and if I'm a",
    "start": "2065560",
    "end": "2070878"
  },
  {
    "text": "developer I don't care about yl I can use this K control CLI like this that's sort of nice because like as as in when",
    "start": "2070879",
    "end": "2077118"
  },
  {
    "text": "a usage of car matures you can sort of move to having a more G opsy workflow to manage like all of your infrastructure",
    "start": "2077119",
    "end": "2083960"
  },
  {
    "text": "right okay um we're almost at time um before we we close this out um there's",
    "start": "2083960",
    "end": "2091480"
  },
  {
    "text": "the demo for the the repository for this demo is on the internet on the left and",
    "start": "2091480",
    "end": "2096599"
  },
  {
    "text": "then on the right hand side feedback for us take 20 seconds give us a comment so we can know what we can do better and of",
    "start": "2096599",
    "end": "2102680"
  },
  {
    "text": "course join our uh slack channel on the kubernetes slack which is Carval and",
    "start": "2102680",
    "end": "2108400"
  },
  {
    "text": "reach out on Twitter if you want and reach out to us after the session thank you very much thank",
    "start": "2108400",
    "end": "2115440"
  },
  {
    "text": "you I think we have one minute for one question is there one question one",
    "start": "2118200",
    "end": "2126319"
  },
  {
    "text": "yes hi thanks for the talk uh quick question about ytt if I want to do like",
    "start": "2126640",
    "end": "2132560"
  },
  {
    "text": "compo composable stuff where I develop stuff in ytt and why I want my",
    "start": "2132560",
    "end": "2138320"
  },
  {
    "text": "developers to use it uh I cannot use any remote sources version stuff like that",
    "start": "2138320",
    "end": "2145119"
  },
  {
    "text": "the composition happens later in the chain is that my understanding correct y",
    "start": "2145119",
    "end": "2150960"
  },
  {
    "text": "so that's actually a good question so we actually skipped over a tool called vendor and what vendor allow you allows",
    "start": "2150960",
    "end": "2156520"
  },
  {
    "text": "you to do is that you can like like fetch um configuration of files any files for that matter from multiple",
    "start": "2156520",
    "end": "2162880"
  },
  {
    "text": "different sources right so I've seen uh Folks at some organizations do this where they use vendor as a package",
    "start": "2162880",
    "end": "2169160"
  },
  {
    "text": "manager for YT so you can Define some starlock modules and repeatable ytt that your developers can then use using V so",
    "start": "2169160",
    "end": "2177160"
  },
  {
    "text": "a vendor yamel file essentially becomes something like a go mode where you can lock onto certain versions of YT",
    "start": "2177160",
    "end": "2182480"
  },
  {
    "text": "packages that you're using right right is that but ytt itself just take a bunch",
    "start": "2182480",
    "end": "2188240"
  },
  {
    "text": "of yaml files and outputs yaml and that's it all right thank you very much have a",
    "start": "2188240",
    "end": "2195760"
  },
  {
    "text": "good weekend",
    "start": "2195760",
    "end": "2200760"
  }
]