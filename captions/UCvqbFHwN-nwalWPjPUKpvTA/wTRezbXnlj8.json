[
  {
    "text": "okay I think we have Quorum and we can",
    "start": "760",
    "end": "2560"
  },
  {
    "text": "start I got the thumbs up in the back",
    "start": "2560",
    "end": "5200"
  },
  {
    "text": "great so um before we get very far along",
    "start": "5200",
    "end": "9160"
  },
  {
    "text": "I have to give you an update my",
    "start": "9160",
    "end": "12120"
  },
  {
    "text": "co-speaker uh Michael mun uh couldn't",
    "start": "12120",
    "end": "15599"
  },
  {
    "text": "make it at the very last minute to be",
    "start": "15599",
    "end": "17720"
  },
  {
    "text": "honest he got covid and is doing the",
    "start": "17720",
    "end": "20119"
  },
  {
    "text": "responsible thing and staying home um",
    "start": "20119",
    "end": "23760"
  },
  {
    "text": "his topic as the co-speaker was going to",
    "start": "23760",
    "end": "25880"
  },
  {
    "text": "be more about the security posture of",
    "start": "25880",
    "end": "28480"
  },
  {
    "text": "running connectivity proxy in a kuber",
    "start": "28480",
    "end": "31119"
  },
  {
    "text": "cluster and my material is um was going",
    "start": "31119",
    "end": "34640"
  },
  {
    "text": "to be more about the experience I had in",
    "start": "34640",
    "end": "36960"
  },
  {
    "text": "gke running connectivity at that scale",
    "start": "36960",
    "end": "40600"
  },
  {
    "text": "so we've sort of tweaked the slides",
    "start": "40600",
    "end": "42039"
  },
  {
    "text": "around to essentially Focus mainly on my",
    "start": "42039",
    "end": "44520"
  },
  {
    "text": "content so if anybody feels strongly",
    "start": "44520",
    "end": "47160"
  },
  {
    "text": "bait and switched I",
    "start": "47160",
    "end": "50239"
  },
  {
    "text": "apologize so getting started um here's",
    "start": "51680",
    "end": "54680"
  },
  {
    "text": "the structure of this talk uh I'm going",
    "start": "54680",
    "end": "56840"
  },
  {
    "text": "to start with a generic overview of the",
    "start": "56840",
    "end": "59280"
  },
  {
    "text": "problems Sol by connectivity proxy and",
    "start": "59280",
    "end": "62160"
  },
  {
    "text": "how it works and then I'll go into as a",
    "start": "62160",
    "end": "64600"
  },
  {
    "text": "main as a maintainer and this is a",
    "start": "64600",
    "end": "66799"
  },
  {
    "text": "maintainer track uh talk I'll go into my",
    "start": "66799",
    "end": "70159"
  },
  {
    "text": "personal experience in gke using the",
    "start": "70159",
    "end": "74360"
  },
  {
    "text": "proxy okay so",
    "start": "74360",
    "end": "77400"
  },
  {
    "text": "um just make",
    "start": "77400",
    "end": "80000"
  },
  {
    "text": "sure so just for starters um",
    "start": "80000",
    "end": "83159"
  },
  {
    "text": "connectivity is a TCP proxy for cube API",
    "start": "83159",
    "end": "86280"
  },
  {
    "text": "server running in the control plane to",
    "start": "86280",
    "end": "88720"
  },
  {
    "text": "talk to Cluster",
    "start": "88720",
    "end": "90799"
  },
  {
    "text": "uh resources on worker nodes uh this",
    "start": "90799",
    "end": "94799"
  },
  {
    "text": "extension is um associated with the API",
    "start": "94799",
    "end": "98040"
  },
  {
    "text": "machinery and cloud provider",
    "start": "98040",
    "end": "100280"
  },
  {
    "text": "sigs uh it utilizes a server and agent",
    "start": "100280",
    "end": "103479"
  },
  {
    "text": "topology it's a it's a forward proxy uh",
    "start": "103479",
    "end": "106799"
  },
  {
    "text": "you'll see that later and it's um it's a",
    "start": "106799",
    "end": "110320"
  },
  {
    "text": "specific to API server um solution it's",
    "start": "110320",
    "end": "114759"
  },
  {
    "text": "not meant to be a generic",
    "start": "114759",
    "end": "117320"
  },
  {
    "text": "proxy um also Al I want to mention this",
    "start": "117320",
    "end": "121399"
  },
  {
    "text": "presentation will attempt to avoid",
    "start": "121399",
    "end": "123399"
  },
  {
    "text": "covering too much repeat information",
    "start": "123399",
    "end": "125560"
  },
  {
    "text": "with some previous cubec con talks in",
    "start": "125560",
    "end": "128160"
  },
  {
    "text": "2019 some of the designers and",
    "start": "128160",
    "end": "131319"
  },
  {
    "text": "implementers of connectivity gave a nice",
    "start": "131319",
    "end": "133959"
  },
  {
    "text": "presentation of uh more of the inner",
    "start": "133959",
    "end": "136440"
  },
  {
    "text": "workings and implementation details so I",
    "start": "136440",
    "end": "139400"
  },
  {
    "text": "won't get too into the depth here uh and",
    "start": "139400",
    "end": "143440"
  },
  {
    "text": "then just last year a couple of",
    "start": "143440",
    "end": "145680"
  },
  {
    "text": "presenters talked about some interesting",
    "start": "145680",
    "end": "148440"
  },
  {
    "text": "um Rich use cases that they had found",
    "start": "148440",
    "end": "151040"
  },
  {
    "text": "for",
    "start": "151040",
    "end": "152319"
  },
  {
    "text": "connectivity um yeah they had a nice",
    "start": "152319",
    "end": "155879"
  },
  {
    "text": "talk where they talked about remote",
    "start": "155879",
    "end": "157640"
  },
  {
    "text": "control plans was the term they used uh",
    "start": "157640",
    "end": "160080"
  },
  {
    "text": "so I won't talk too much about the",
    "start": "160080",
    "end": "162239"
  },
  {
    "text": "variety of use",
    "start": "162239",
    "end": "163800"
  },
  {
    "text": "cases um so getting",
    "start": "163800",
    "end": "167680"
  },
  {
    "text": "started the diagram you see uh",
    "start": "167680",
    "end": "170519"
  },
  {
    "text": "illustrates the the typical divide of a",
    "start": "170519",
    "end": "173040"
  },
  {
    "text": "kubernetes cluster on the left you've",
    "start": "173040",
    "end": "175400"
  },
  {
    "text": "got the control plane",
    "start": "175400",
    "end": "177360"
  },
  {
    "text": "components um and on the right you've",
    "start": "177360",
    "end": "179560"
  },
  {
    "text": "got",
    "start": "179560",
    "end": "180480"
  },
  {
    "text": "there's usually one or more worker nodes",
    "start": "180480",
    "end": "183239"
  },
  {
    "text": "uh running cluster",
    "start": "183239",
    "end": "185159"
  },
  {
    "text": "resources most control plane traffic is",
    "start": "185159",
    "end": "188480"
  },
  {
    "text": "client-based and destined to the API",
    "start": "188480",
    "end": "191680"
  },
  {
    "text": "server even most control plane",
    "start": "191680",
    "end": "194040"
  },
  {
    "text": "components like the scheduler controller",
    "start": "194040",
    "end": "196159"
  },
  {
    "text": "manager Etc are API server clients uh",
    "start": "196159",
    "end": "200519"
  },
  {
    "text": "etcd is the primary exception to this",
    "start": "200519",
    "end": "204280"
  },
  {
    "text": "rule um in a cluster with separate",
    "start": "204280",
    "end": "207560"
  },
  {
    "text": "control plane and cluster Networks it's",
    "start": "207560",
    "end": "209959"
  },
  {
    "text": "common to firewall off everything in the",
    "start": "209959",
    "end": "212080"
  },
  {
    "text": "control plane except API server and make",
    "start": "212080",
    "end": "215599"
  },
  {
    "text": "it available to the cluster typically",
    "start": "215599",
    "end": "217720"
  },
  {
    "text": "behind a load balance here some the",
    "start": "217720",
    "end": "220879"
  },
  {
    "text": "arrows from cblood and pod I'll mention",
    "start": "220879",
    "end": "224760"
  },
  {
    "text": "what they are some primary examples of",
    "start": "224760",
    "end": "227000"
  },
  {
    "text": "node to control plane traffic include",
    "start": "227000",
    "end": "229720"
  },
  {
    "text": "node registration performed by the cuet",
    "start": "229720",
    "end": "232879"
  },
  {
    "text": "or a pod-based workload calling the",
    "start": "232879",
    "end": "234959"
  },
  {
    "text": "kubernetes",
    "start": "234959",
    "end": "237519"
  },
  {
    "text": "API",
    "start": "238680",
    "end": "241680"
  },
  {
    "text": "but API server needs to uh some core",
    "start": "241879",
    "end": "245519"
  },
  {
    "text": "kubernetes features require that API",
    "start": "245519",
    "end": "247680"
  },
  {
    "text": "server have network access to the",
    "start": "247680",
    "end": "250519"
  },
  {
    "text": "cluster significantly web Hooks and",
    "start": "250519",
    "end": "252959"
  },
  {
    "text": "aggregated API servers are core",
    "start": "252959",
    "end": "255280"
  },
  {
    "text": "kubernetes features that are common to",
    "start": "255280",
    "end": "257440"
  },
  {
    "text": "run in the cluster on",
    "start": "257440",
    "end": "260040"
  },
  {
    "text": "workers so this illustrate this",
    "start": "260040",
    "end": "262720"
  },
  {
    "text": "illustration",
    "start": "262720",
    "end": "263800"
  },
  {
    "text": "shows uh the other kind of Arrow flowing",
    "start": "263800",
    "end": "267400"
  },
  {
    "text": "outward from API server it's um common",
    "start": "267400",
    "end": "271360"
  },
  {
    "text": "to have local off authorization",
    "start": "271360",
    "end": "274759"
  },
  {
    "text": "endpoints as well as Local web hooks in",
    "start": "274759",
    "end": "277039"
  },
  {
    "text": "the control plane but it's also common",
    "start": "277039",
    "end": "279320"
  },
  {
    "text": "for the API server to call out to web",
    "start": "279320",
    "end": "281639"
  },
  {
    "text": "hooks aggregated API servers also cuet",
    "start": "281639",
    "end": "285600"
  },
  {
    "text": "pod node service in the",
    "start": "285600",
    "end": "289120"
  },
  {
    "text": "cluster when by default API server when",
    "start": "290800",
    "end": "294800"
  },
  {
    "text": "it wants to communicate with the cluster",
    "start": "294800",
    "end": "296520"
  },
  {
    "text": "resource it directly dials the relevant",
    "start": "296520",
    "end": "299680"
  },
  {
    "text": "IP address this default Behavior assumes",
    "start": "299680",
    "end": "303160"
  },
  {
    "text": "that cluster resources are routable from",
    "start": "303160",
    "end": "305360"
  },
  {
    "text": "the control plane to worker nodes",
    "start": "305360",
    "end": "307800"
  },
  {
    "text": "kubernetes clusters with a network split",
    "start": "307800",
    "end": "310759"
  },
  {
    "text": "cannot assume that cluster resources are",
    "start": "310759",
    "end": "312639"
  },
  {
    "text": "routable like this that Network split is",
    "start": "312639",
    "end": "315520"
  },
  {
    "text": "the problem that connectivity proxy",
    "start": "315520",
    "end": "318199"
  },
  {
    "text": "solves and just as a side note some of",
    "start": "318199",
    "end": "320720"
  },
  {
    "text": "you may notice that a web hook I already",
    "start": "320720",
    "end": "323160"
  },
  {
    "text": "mentioned it you can have web hooks in",
    "start": "323160",
    "end": "324560"
  },
  {
    "text": "both control plan and workers and we",
    "start": "324560",
    "end": "326440"
  },
  {
    "text": "might get to that",
    "start": "326440",
    "end": "328479"
  },
  {
    "text": "later",
    "start": "328479",
    "end": "330039"
  },
  {
    "text": "so connectivity proxy this design",
    "start": "330039",
    "end": "333280"
  },
  {
    "text": "introduces a connectivity server running",
    "start": "333280",
    "end": "335960"
  },
  {
    "text": "in the control plane and made available",
    "start": "335960",
    "end": "338080"
  },
  {
    "text": "to the cluster in the case of multiple",
    "start": "338080",
    "end": "340560"
  },
  {
    "text": "control plane nodes the connectivity",
    "start": "340560",
    "end": "343039"
  },
  {
    "text": "servers are assumed to be put behind a",
    "start": "343039",
    "end": "344840"
  },
  {
    "text": "load balancer a connectivity agent is",
    "start": "344840",
    "end": "348000"
  },
  {
    "text": "introduced in the cluster as a system",
    "start": "348000",
    "end": "350120"
  },
  {
    "text": "pod and on Startup it immediately",
    "start": "350120",
    "end": "352720"
  },
  {
    "text": "initializes a long lived grpc connection",
    "start": "352720",
    "end": "355759"
  },
  {
    "text": "to the server the grpc connection is",
    "start": "355759",
    "end": "358759"
  },
  {
    "text": "secured with m TLS and the server",
    "start": "358759",
    "end": "361080"
  },
  {
    "text": "authenticates a given agent via API",
    "start": "361080",
    "end": "364280"
  },
  {
    "text": "server token review",
    "start": "364280",
    "end": "367800"
  },
  {
    "text": "API finally once the connectivity server",
    "start": "368560",
    "end": "371720"
  },
  {
    "text": "and agent are installed and initialized",
    "start": "371720",
    "end": "374840"
  },
  {
    "text": "API server can be restarted with new",
    "start": "374840",
    "end": "376840"
  },
  {
    "text": "configuration that enables it to use the",
    "start": "376840",
    "end": "379599"
  },
  {
    "text": "proxy API server has private config",
    "start": "379599",
    "end": "382759"
  },
  {
    "text": "called egress selector",
    "start": "382759",
    "end": "384759"
  },
  {
    "text": "configuration when it is used API server",
    "start": "384759",
    "end": "387400"
  },
  {
    "text": "looks at the kind of resource it is",
    "start": "387400",
    "end": "389479"
  },
  {
    "text": "accessing and according to where that",
    "start": "389479",
    "end": "391440"
  },
  {
    "text": "resource is located a proxy aware",
    "start": "391440",
    "end": "394240"
  },
  {
    "text": "Network dialer is used it is also",
    "start": "394240",
    "end": "397280"
  },
  {
    "text": "possible to use the proxy with traffic",
    "start": "397280",
    "end": "399400"
  },
  {
    "text": "to SCD or to the control plane but in",
    "start": "399400",
    "end": "402440"
  },
  {
    "text": "this presentation we're focusing on the",
    "start": "402440",
    "end": "405759"
  },
  {
    "text": "cluster all the black lines in the",
    "start": "405759",
    "end": "408479"
  },
  {
    "text": "diagram are normal TCP connection",
    "start": "408479",
    "end": "411280"
  },
  {
    "text": "connections the dotted lines are proxy",
    "start": "411280",
    "end": "415080"
  },
  {
    "text": "data connections and control packets",
    "start": "415080",
    "end": "417199"
  },
  {
    "text": "that are multiplexed over by",
    "start": "417199",
    "end": "419400"
  },
  {
    "text": "bidirectional grpc streaming the two",
    "start": "419400",
    "end": "422960"
  },
  {
    "text": "orange arrows are the grpc bidirectional",
    "start": "422960",
    "end": "425919"
  },
  {
    "text": "streams brokered by the connectivity",
    "start": "425919",
    "end": "428800"
  },
  {
    "text": "Service as a concrete example let's say",
    "start": "428800",
    "end": "431680"
  },
  {
    "text": "a user types Cube cuddle port forward to",
    "start": "431680",
    "end": "434400"
  },
  {
    "text": "a pod API server requests the proxy",
    "start": "434400",
    "end": "437599"
  },
  {
    "text": "system to dial a new TCP proxy",
    "start": "437599",
    "end": "440199"
  },
  {
    "text": "connection control packets arrive at the",
    "start": "440199",
    "end": "442599"
  },
  {
    "text": "agent which opens a normal TCP",
    "start": "442599",
    "end": "444960"
  },
  {
    "text": "connection to the Pod for the final",
    "start": "444960",
    "end": "447240"
  },
  {
    "text": "segment API server and the proxy",
    "start": "447240",
    "end": "450120"
  },
  {
    "text": "components will continue supporting a",
    "start": "450120",
    "end": "452120"
  },
  {
    "text": "full duplex end to end TCP connection",
    "start": "452120",
    "end": "455520"
  },
  {
    "text": "until the user closes the",
    "start": "455520",
    "end": "458800"
  },
  {
    "text": "connection uh and you can try it out",
    "start": "460039",
    "end": "462319"
  },
  {
    "text": "this entire solution is um fully open",
    "start": "462319",
    "end": "465919"
  },
  {
    "text": "source and there are instructions at the",
    "start": "465919",
    "end": "467800"
  },
  {
    "text": "link to play with",
    "start": "467800",
    "end": "471400"
  },
  {
    "text": "it uh so just briefly I'll touch on the",
    "start": "471800",
    "end": "475120"
  },
  {
    "text": "topic of security which was going to be",
    "start": "475120",
    "end": "477639"
  },
  {
    "text": "um Elmo's topic",
    "start": "477639",
    "end": "480720"
  },
  {
    "text": "um there is a historical class of",
    "start": "480720",
    "end": "482960"
  },
  {
    "text": "security issues like the one shown that",
    "start": "482960",
    "end": "486360"
  },
  {
    "text": "basically involve confused API server",
    "start": "486360",
    "end": "489159"
  },
  {
    "text": "thinking it's dialing a cluster resource",
    "start": "489159",
    "end": "491440"
  },
  {
    "text": "but it's actually not when API server",
    "start": "491440",
    "end": "494199"
  },
  {
    "text": "runs with any cluster proxy configure",
    "start": "494199",
    "end": "497240"
  },
  {
    "text": "implementation traffic is effectively",
    "start": "497240",
    "end": "499400"
  },
  {
    "text": "constrained into the appropriate trust",
    "start": "499400",
    "end": "501560"
  },
  {
    "text": "segment namely into the",
    "start": "501560",
    "end": "504240"
  },
  {
    "text": "cluster even though known issues are",
    "start": "504240",
    "end": "506720"
  },
  {
    "text": "patched routing control plane to know",
    "start": "506720",
    "end": "509440"
  },
  {
    "text": "traffic through a forward proxy enhances",
    "start": "509440",
    "end": "512560"
  },
  {
    "text": "the security posture against possible",
    "start": "512560",
    "end": "514599"
  },
  {
    "text": "future issues in the same",
    "start": "514599",
    "end": "517919"
  },
  {
    "text": "class uh so now to the topic of running",
    "start": "519719",
    "end": "523080"
  },
  {
    "text": "connectivity on",
    "start": "523080",
    "end": "524519"
  },
  {
    "text": "gke uh first why did gke need",
    "start": "524519",
    "end": "528000"
  },
  {
    "text": "connectivity",
    "start": "528000",
    "end": "529240"
  },
  {
    "text": "proxy uh",
    "start": "529240",
    "end": "531399"
  },
  {
    "text": "historically for a class of gke clusters",
    "start": "531399",
    "end": "535160"
  },
  {
    "text": "that we might call public clusters uh we",
    "start": "535160",
    "end": "537600"
  },
  {
    "text": "used SSH tunnels which was deprecated in",
    "start": "537600",
    "end": "541200"
  },
  {
    "text": "kubernetes open source way back in like",
    "start": "541200",
    "end": "543880"
  },
  {
    "text": "version 1.9 and ultimately totally",
    "start": "543880",
    "end": "547640"
  },
  {
    "text": "removed in 122 so gke needed a",
    "start": "547640",
    "end": "551040"
  },
  {
    "text": "replacement for such clusters before",
    "start": "551040",
    "end": "554440"
  },
  {
    "text": "then um more",
    "start": "554440",
    "end": "557600"
  },
  {
    "text": "recently clusters with private nodes um",
    "start": "557600",
    "end": "561640"
  },
  {
    "text": "have historically used VPC peering",
    "start": "561640",
    "end": "564600"
  },
  {
    "text": "directly between the control plan and",
    "start": "564600",
    "end": "566040"
  },
  {
    "text": "the worker nodes but there has there's",
    "start": "566040",
    "end": "568000"
  },
  {
    "text": "been a class of",
    "start": "568000",
    "end": "569959"
  },
  {
    "text": "problems around that that are solved by",
    "start": "569959",
    "end": "572720"
  },
  {
    "text": "a newer a newer class cross cluster uh",
    "start": "572720",
    "end": "576959"
  },
  {
    "text": "topology that uses Google private",
    "start": "576959",
    "end": "579279"
  },
  {
    "text": "service connect uh gke is unifying",
    "start": "579279",
    "end": "583600"
  },
  {
    "text": "around clusters to have that and that",
    "start": "583600",
    "end": "586800"
  },
  {
    "text": "link is to a blog post that explains",
    "start": "586800",
    "end": "588600"
  },
  {
    "text": "that in further",
    "start": "588600",
    "end": "591160"
  },
  {
    "text": "detail uh so how does gke run",
    "start": "591839",
    "end": "595480"
  },
  {
    "text": "connectivity uh first of all gke uses",
    "start": "595480",
    "end": "597959"
  },
  {
    "text": "grpc mode",
    "start": "597959",
    "end": "599839"
  },
  {
    "text": "uh there is an alternate HTTP connect",
    "start": "599839",
    "end": "602320"
  },
  {
    "text": "mode but we chose grpc because it has",
    "start": "602320",
    "end": "605160"
  },
  {
    "text": "the promise of better multiplexing and",
    "start": "605160",
    "end": "608079"
  },
  {
    "text": "performance uh one note on that is that",
    "start": "608079",
    "end": "610279"
  },
  {
    "text": "it only affects the first tunnel segment",
    "start": "610279",
    "end": "612760"
  },
  {
    "text": "it does not affect the tunnel segment",
    "start": "612760",
    "end": "614839"
  },
  {
    "text": "between the server and the",
    "start": "614839",
    "end": "617680"
  },
  {
    "text": "agent uh another another interesting",
    "start": "617680",
    "end": "620920"
  },
  {
    "text": "difference is we run the agent via a",
    "start": "620920",
    "end": "623279"
  },
  {
    "text": "deployment rather than than as a Damon",
    "start": "623279",
    "end": "625320"
  },
  {
    "text": "set like the example",
    "start": "625320",
    "end": "627839"
  },
  {
    "text": "manifests uh it's a more efficient use",
    "start": "627839",
    "end": "630160"
  },
  {
    "text": "of resources not just CPU and memory in",
    "start": "630160",
    "end": "633680"
  },
  {
    "text": "on the worker nodes but also pod IE IP",
    "start": "633680",
    "end": "637680"
  },
  {
    "text": "space uh it would be too expensive to",
    "start": "637680",
    "end": "641040"
  },
  {
    "text": "use an unnecessary amount of pod IP",
    "start": "641040",
    "end": "644320"
  },
  {
    "text": "space um there's also a scalability",
    "start": "644320",
    "end": "647160"
  },
  {
    "text": "limit in that remains in connectivity",
    "start": "647160",
    "end": "650720"
  },
  {
    "text": "Cube API server can handle ingke can",
    "start": "650720",
    "end": "653800"
  },
  {
    "text": "handle like up to 15,000 worker nodes",
    "start": "653800",
    "end": "656720"
  },
  {
    "text": "all registering but connectivity server",
    "start": "656720",
    "end": "660880"
  },
  {
    "text": "does not have the same scalability and",
    "start": "660880",
    "end": "662839"
  },
  {
    "text": "it can't handle more than a smaller",
    "start": "662839",
    "end": "665320"
  },
  {
    "text": "number of Agents initializing that grpc",
    "start": "665320",
    "end": "668000"
  },
  {
    "text": "connection so we avoid that scalability",
    "start": "668000",
    "end": "671240"
  },
  {
    "text": "we avoid that scalability",
    "start": "671240",
    "end": "673959"
  },
  {
    "text": "limit um at the scale of GK Fleet",
    "start": "673959",
    "end": "678079"
  },
  {
    "text": "everything has to be automated all",
    "start": "678079",
    "end": "680399"
  },
  {
    "text": "cluster maintenance events that may",
    "start": "680399",
    "end": "682240"
  },
  {
    "text": "apply connectivity as part of a",
    "start": "682240",
    "end": "684240"
  },
  {
    "text": "migration do so in two steps one step to",
    "start": "684240",
    "end": "688279"
  },
  {
    "text": "provision the portions and another",
    "start": "688279",
    "end": "691279"
  },
  {
    "text": "subsequent step to enable API server to",
    "start": "691279",
    "end": "693519"
  },
  {
    "text": "use it uh and this is really critical",
    "start": "693519",
    "end": "696279"
  },
  {
    "text": "because uh if the tunnel is not fully",
    "start": "696279",
    "end": "698680"
  },
  {
    "text": "ready for due to a variety of factors we",
    "start": "698680",
    "end": "701320"
  },
  {
    "text": "don't want to uh take the Second Step",
    "start": "701320",
    "end": "704800"
  },
  {
    "text": "which could break some control plane",
    "start": "704800",
    "end": "708600"
  },
  {
    "text": "functions um so what have been some",
    "start": "709160",
    "end": "712120"
  },
  {
    "text": "challenges of running it uh first of all",
    "start": "712120",
    "end": "716040"
  },
  {
    "text": "in 2021 when we first launched uh um it",
    "start": "716040",
    "end": "719680"
  },
  {
    "text": "was clear that it's within a user's",
    "start": "719680",
    "end": "721320"
  },
  {
    "text": "control to break it uh which is actually",
    "start": "721320",
    "end": "724279"
  },
  {
    "text": "pretty noteworthy because the apparent",
    "start": "724279",
    "end": "726320"
  },
  {
    "text": "defect is part of the cluster's control",
    "start": "726320",
    "end": "728320"
  },
  {
    "text": "plane function it's not always",
    "start": "728320",
    "end": "730920"
  },
  {
    "text": "obvious uh that Cube codal logs if it",
    "start": "730920",
    "end": "733639"
  },
  {
    "text": "fails to dial was due to something that",
    "start": "733639",
    "end": "736279"
  },
  {
    "text": "the user did on the worker",
    "start": "736279",
    "end": "738920"
  },
  {
    "text": "network uh in 2022 after SSH tunnels",
    "start": "738920",
    "end": "743120"
  },
  {
    "text": "based clusters had been migrated to",
    "start": "743120",
    "end": "745279"
  },
  {
    "text": "connectivity we it did encounter some",
    "start": "745279",
    "end": "747560"
  },
  {
    "text": "new and uniquely painful",
    "start": "747560",
    "end": "749399"
  },
  {
    "text": "issues in one case a thrashing cluster",
    "start": "749399",
    "end": "752760"
  },
  {
    "text": "workload included exercising control",
    "start": "752760",
    "end": "755560"
  },
  {
    "text": "plane ESS um at such a high rate that",
    "start": "755560",
    "end": "758920"
  },
  {
    "text": "the connectivity components became",
    "start": "758920",
    "end": "760760"
  },
  {
    "text": "overloaded and it had a cascading effect",
    "start": "760760",
    "end": "764440"
  },
  {
    "text": "uh in another case a cluster got into a",
    "start": "764440",
    "end": "766760"
  },
  {
    "text": "deadlocked State due to a broken user",
    "start": "766760",
    "end": "769600"
  },
  {
    "text": "installed web hook uh that I think",
    "start": "769600",
    "end": "772079"
  },
  {
    "text": "happened to be a gate happens to be a",
    "start": "772079",
    "end": "773839"
  },
  {
    "text": "gatekeeper web hook but that's not",
    "start": "773839",
    "end": "775839"
  },
  {
    "text": "important um but the critical point is",
    "start": "775839",
    "end": "778639"
  },
  {
    "text": "that it matched all API groups um and it",
    "start": "778639",
    "end": "781959"
  },
  {
    "text": "was broken at some point uh note the",
    "start": "781959",
    "end": "784480"
  },
  {
    "text": "circular dependency of the control plane",
    "start": "784480",
    "end": "788040"
  },
  {
    "text": "needing a working tunnel to access the",
    "start": "788040",
    "end": "790399"
  },
  {
    "text": "user web hook but the tunnel is never",
    "start": "790399",
    "end": "792760"
  },
  {
    "text": "able to initialize due to the agent",
    "start": "792760",
    "end": "795480"
  },
  {
    "text": "pod's failing admission web hook so it's",
    "start": "795480",
    "end": "798480"
  },
  {
    "text": "it's a deadlocked",
    "start": "798480",
    "end": "800360"
  },
  {
    "text": "cluster uh and as noted these are these",
    "start": "800360",
    "end": "802720"
  },
  {
    "text": "are fairly difficult and painful to",
    "start": "802720",
    "end": "805040"
  },
  {
    "text": "debug um failure modes uh and binary",
    "start": "805040",
    "end": "809199"
  },
  {
    "text": "version skew particularly across API",
    "start": "809199",
    "end": "811760"
  },
  {
    "text": "server to the connectivity binaries is",
    "start": "811760",
    "end": "814120"
  },
  {
    "text": "an extra",
    "start": "814120",
    "end": "816639"
  },
  {
    "text": "headwind uh so what did we",
    "start": "816680",
    "end": "819360"
  },
  {
    "text": "do um in 2022 we had to um invest",
    "start": "819360",
    "end": "824560"
  },
  {
    "text": "further in",
    "start": "824560",
    "end": "827120"
  },
  {
    "text": "restabilization we also took a look a",
    "start": "827199",
    "end": "829839"
  },
  {
    "text": "hard look at there's always the",
    "start": "829839",
    "end": "831160"
  },
  {
    "text": "possibility of replacing the reference",
    "start": "831160",
    "end": "833120"
  },
  {
    "text": "implementation Parts with a different",
    "start": "833120",
    "end": "835320"
  },
  {
    "text": "design using the same API server",
    "start": "835320",
    "end": "837920"
  },
  {
    "text": "extension points",
    "start": "837920",
    "end": "839560"
  },
  {
    "text": "but in the end we were able to harden",
    "start": "839560",
    "end": "842079"
  },
  {
    "text": "the existing connectivity service to",
    "start": "842079",
    "end": "843839"
  },
  {
    "text": "meet our reliability",
    "start": "843839",
    "end": "846360"
  },
  {
    "text": "expectations um in 2023 we have seen the",
    "start": "846360",
    "end": "849639"
  },
  {
    "text": "fruits of those efforts uh and",
    "start": "849639",
    "end": "852040"
  },
  {
    "text": "connectivity adoption is increasing as",
    "start": "852040",
    "end": "854920"
  },
  {
    "text": "part of private service connect",
    "start": "854920",
    "end": "857320"
  },
  {
    "text": "unification",
    "start": "857320",
    "end": "860320"
  },
  {
    "text": "migration uh so what's",
    "start": "862480",
    "end": "866120"
  },
  {
    "text": "next uh there's an active open source",
    "start": "866199",
    "end": "868959"
  },
  {
    "text": "community that meets bi-weekly focused",
    "start": "868959",
    "end": "871240"
  },
  {
    "text": "on connectivity both maintenance and the",
    "start": "871240",
    "end": "874279"
  },
  {
    "text": "path to GA there are some interesting",
    "start": "874279",
    "end": "877120"
  },
  {
    "text": "unsolved problems on the connectivity",
    "start": "877120",
    "end": "879920"
  },
  {
    "text": "side for example there is a proposal to",
    "start": "879920",
    "end": "882519"
  },
  {
    "text": "simplify the protu the proxy connection",
    "start": "882519",
    "end": "885639"
  },
  {
    "text": "identifiers but it would be a",
    "start": "885639",
    "end": "887279"
  },
  {
    "text": "significant protocol change in the",
    "start": "887279",
    "end": "889800"
  },
  {
    "text": "broader control plane egress space there",
    "start": "889800",
    "end": "892560"
  },
  {
    "text": "is an open question of how best to",
    "start": "892560",
    "end": "894600"
  },
  {
    "text": "support finer Grand use cases for",
    "start": "894600",
    "end": "897440"
  },
  {
    "text": "example identifying subsets of the",
    "start": "897440",
    "end": "899560"
  },
  {
    "text": "cluster to",
    "start": "899560",
    "end": "901639"
  },
  {
    "text": "dial uh see the links and resources in",
    "start": "901639",
    "end": "904720"
  },
  {
    "text": "the PDF if you're curious to learn more",
    "start": "904720",
    "end": "906880"
  },
  {
    "text": "or want to get",
    "start": "906880",
    "end": "909480"
  },
  {
    "text": "involved and although we're pretty um we",
    "start": "909480",
    "end": "914240"
  },
  {
    "text": "haven't used all that much time we have",
    "start": "914240",
    "end": "915920"
  },
  {
    "text": "plenty of time for",
    "start": "915920",
    "end": "917560"
  },
  {
    "text": "Q&A",
    "start": "917560",
    "end": "920560"
  },
  {
    "text": "[Applause]",
    "start": "920620",
    "end": "926839"
  },
  {
    "text": "than please",
    "start": "926839",
    "end": "930600"
  },
  {
    "text": "andols",
    "start": "938639",
    "end": "940920"
  },
  {
    "text": "access it also",
    "start": "940920",
    "end": "943959"
  },
  {
    "text": "going uh let me go back to a diagram so",
    "start": "943959",
    "end": "947000"
  },
  {
    "text": "this diagram shows Cube cuddle which is",
    "start": "947000",
    "end": "949480"
  },
  {
    "text": "assumed to be external to the cluster",
    "start": "949480",
    "end": "952480"
  },
  {
    "text": "yeah so it would be going over um",
    "start": "952480",
    "end": "955720"
  },
  {
    "text": "there's an assumed publicly accessible",
    "start": "955720",
    "end": "958440"
  },
  {
    "text": "but secured endpoint to the Clusters",
    "start": "958440",
    "end": "960720"
  },
  {
    "text": "control plane in gke it sort of depends",
    "start": "960720",
    "end": "963519"
  },
  {
    "text": "on which configuration you've chosen uh",
    "start": "963519",
    "end": "966279"
  },
  {
    "text": "you're it is the same kind of client",
    "start": "966279",
    "end": "969600"
  },
  {
    "text": "though as maybe back further in this",
    "start": "969600",
    "end": "973360"
  },
  {
    "text": "example where that pod is calling the",
    "start": "973360",
    "end": "976800"
  },
  {
    "text": "the the kubernetes API as an internal",
    "start": "976800",
    "end": "980199"
  },
  {
    "text": "cluster Kate's client I think it's fully",
    "start": "980199",
    "end": "983480"
  },
  {
    "text": "private control plane in a fully private",
    "start": "983480",
    "end": "986759"
  },
  {
    "text": "control plane then you would only",
    "start": "986759",
    "end": "988600"
  },
  {
    "text": "support this pod use case and you would",
    "start": "988600",
    "end": "990319"
  },
  {
    "text": "not necessarily support this direct Cube",
    "start": "990319",
    "end": "992680"
  },
  {
    "text": "codal",
    "start": "992680",
    "end": "995519"
  },
  {
    "text": "client oh I see uh well partly to answer",
    "start": "1001639",
    "end": "1005279"
  },
  {
    "text": "that question the general answer I would",
    "start": "1005279",
    "end": "1007000"
  },
  {
    "text": "give is no in the connectivity proxy um",
    "start": "1007000",
    "end": "1012560"
  },
  {
    "text": "um enhancement working group there has",
    "start": "1012560",
    "end": "1016000"
  },
  {
    "text": "been a discussion to support routing",
    "start": "1016000",
    "end": "1018160"
  },
  {
    "text": "traffic traic in the reverse direction",
    "start": "1018160",
    "end": "1020399"
  },
  {
    "text": "from outside the control plane into the",
    "start": "1020399",
    "end": "1022600"
  },
  {
    "text": "control plane but that disc that was",
    "start": "1022600",
    "end": "1025520"
  },
  {
    "text": "never in the original scope of the",
    "start": "1025520",
    "end": "1027600"
  },
  {
    "text": "enhancement and that work which even had",
    "start": "1027600",
    "end": "1030760"
  },
  {
    "text": "like some prototype underway was never",
    "start": "1030760",
    "end": "1033319"
  },
  {
    "text": "completed and merged so at this time",
    "start": "1033319",
    "end": "1036000"
  },
  {
    "text": "connectivity is only a proxy for API",
    "start": "1036000",
    "end": "1038918"
  },
  {
    "text": "server to use to Route traffic to one of",
    "start": "1038919",
    "end": "1042480"
  },
  {
    "text": "those three canonical locations at CD",
    "start": "1042480",
    "end": "1045918"
  },
  {
    "text": "control plane or cluster yeah yeah no",
    "start": "1045919",
    "end": "1050559"
  },
  {
    "text": "problem any other",
    "start": "1050559",
    "end": "1052679"
  },
  {
    "text": "questions um I was wondering if you",
    "start": "1052679",
    "end": "1055160"
  },
  {
    "text": "could share you had mentioned one of the",
    "start": "1055160",
    "end": "1057039"
  },
  {
    "text": "challenges you had faced is like",
    "start": "1057039",
    "end": "1059240"
  },
  {
    "text": "customers making a firewall rule or um",
    "start": "1059240",
    "end": "1063039"
  },
  {
    "text": "just like making their worker nodes",
    "start": "1063039",
    "end": "1064720"
  },
  {
    "text": "unschedulable or not allowing the",
    "start": "1064720",
    "end": "1067280"
  },
  {
    "text": "connectivity agent to schedule on their",
    "start": "1067280",
    "end": "1068840"
  },
  {
    "text": "worker nodes how did you guys solve that",
    "start": "1068840",
    "end": "1072120"
  },
  {
    "text": "yeah good question uh so let's see back",
    "start": "1072120",
    "end": "1075400"
  },
  {
    "text": "here so this is an example of that",
    "start": "1075400",
    "end": "1079000"
  },
  {
    "text": "um if if a user um um had very",
    "start": "1079000",
    "end": "1084840"
  },
  {
    "text": "deliberately tight Network egress deny",
    "start": "1084840",
    "end": "1087440"
  },
  {
    "text": "rules or if they had the right kind of",
    "start": "1087440",
    "end": "1090320"
  },
  {
    "text": "taints on all worker nodes um and that",
    "start": "1090320",
    "end": "1094440"
  },
  {
    "text": "there are even other things like binoy",
    "start": "1094440",
    "end": "1096600"
  },
  {
    "text": "is one uh they can prevent the Google",
    "start": "1096600",
    "end": "1100720"
  },
  {
    "text": "managed system pod uh connectivity agent",
    "start": "1100720",
    "end": "1104400"
  },
  {
    "text": "from running um part of the answer is",
    "start": "1104400",
    "end": "1107559"
  },
  {
    "text": "that that's",
    "start": "1107559",
    "end": "1109240"
  },
  {
    "text": "still a remaining um headwind in gke but",
    "start": "1109240",
    "end": "1115559"
  },
  {
    "text": "um for one thing we have user guides",
    "start": "1115559",
    "end": "1119080"
  },
  {
    "text": "that sort of discourage the kind of",
    "start": "1119080",
    "end": "1121039"
  },
  {
    "text": "things that could break a system pod uh",
    "start": "1121039",
    "end": "1123799"
  },
  {
    "text": "and we have Network firewall rule",
    "start": "1123799",
    "end": "1125919"
  },
  {
    "text": "troubleshooting guides that mention oh",
    "start": "1125919",
    "end": "1128320"
  },
  {
    "text": "you know uh by default Network egress is",
    "start": "1128320",
    "end": "1131960"
  },
  {
    "text": "allowed but if you lock down egress by",
    "start": "1131960",
    "end": "1135120"
  },
  {
    "text": "default and only allow Cube APS server",
    "start": "1135120",
    "end": "1138720"
  },
  {
    "text": "Port 443 you need to also allow",
    "start": "1138720",
    "end": "1142280"
  },
  {
    "text": "connectivity server Port",
    "start": "1142280",
    "end": "1144640"
  },
  {
    "text": "8132 uh for your cluster to be fully",
    "start": "1144640",
    "end": "1148520"
  },
  {
    "text": "healthy thanks makes sense",
    "start": "1148520",
    "end": "1152840"
  },
  {
    "text": "yeah in this type of set is there a way",
    "start": "1155000",
    "end": "1161240"
  },
  {
    "text": "of and policy enforcement on if we are",
    "start": "1161240",
    "end": "1165559"
  },
  {
    "text": "using an agent then there",
    "start": "1165559",
    "end": "1169280"
  },
  {
    "text": "we connecting to",
    "start": "1169280",
    "end": "1172960"
  },
  {
    "text": "the",
    "start": "1172960",
    "end": "1175200"
  },
  {
    "text": "management or any other connectivity",
    "start": "1175200",
    "end": "1178919"
  },
  {
    "text": "should be all directed from the",
    "start": "1178919",
    "end": "1181840"
  },
  {
    "text": "connectivity",
    "start": "1181840",
    "end": "1184440"
  },
  {
    "text": "agent would that automatically be",
    "start": "1184440",
    "end": "1187520"
  },
  {
    "text": "enforced from a policy perspective",
    "start": "1187520",
    "end": "1191000"
  },
  {
    "text": "or would that something that we would",
    "start": "1191000",
    "end": "1193640"
  },
  {
    "text": "have toig toit that the shorter answer",
    "start": "1193640",
    "end": "1197440"
  },
  {
    "text": "is no connectivity is not aware of a",
    "start": "1197440",
    "end": "1200919"
  },
  {
    "text": "great number of things that about the",
    "start": "1200919",
    "end": "1202559"
  },
  {
    "text": "cluster that it could be aware of such",
    "start": "1202559",
    "end": "1204679"
  },
  {
    "text": "as data plane Network policies",
    "start": "1204679",
    "end": "1208880"
  },
  {
    "text": "um in fact I glossed over it but there",
    "start": "1208880",
    "end": "1211799"
  },
  {
    "text": "is an assumption with",
    "start": "1211799",
    "end": "1213440"
  },
  {
    "text": "connectivity um default implementation",
    "start": "1213440",
    "end": "1216480"
  },
  {
    "text": "and design that a given connectivity",
    "start": "1216480",
    "end": "1218760"
  },
  {
    "text": "agent will be able to dial anywhere else",
    "start": "1218760",
    "end": "1220960"
  },
  {
    "text": "in the cluster which may not always be",
    "start": "1220960",
    "end": "1223559"
  },
  {
    "text": "true and there is a configuration of",
    "start": "1223559",
    "end": "1227159"
  },
  {
    "text": "connectivity where if you can run it as",
    "start": "1227159",
    "end": "1229440"
  },
  {
    "text": "a Damon set and if the agent can provide",
    "start": "1229440",
    "end": "1233840"
  },
  {
    "text": "some hints like what IP address ranges",
    "start": "1233840",
    "end": "1237760"
  },
  {
    "text": "it uh serves then there are connectivity",
    "start": "1237760",
    "end": "1241039"
  },
  {
    "text": "server",
    "start": "1241039",
    "end": "1242159"
  },
  {
    "text": "configurations where a routing strategy",
    "start": "1242159",
    "end": "1244520"
  },
  {
    "text": "can have the proxy server pick the exact",
    "start": "1244520",
    "end": "1247919"
  },
  {
    "text": "agent running locally where the dial",
    "start": "1247919",
    "end": "1249919"
  },
  {
    "text": "Target is but in the default out of the",
    "start": "1249919",
    "end": "1252640"
  },
  {
    "text": "box configuration there is an extra",
    "start": "1252640",
    "end": "1254880"
  },
  {
    "text": "interesting hop from the agent to the",
    "start": "1254880",
    "end": "1257320"
  },
  {
    "text": "Pod that might be across nodes in the in",
    "start": "1257320",
    "end": "1259919"
  },
  {
    "text": "the",
    "start": "1259919",
    "end": "1260840"
  },
  {
    "text": "cluster in terms of policy API server is",
    "start": "1260840",
    "end": "1264400"
  },
  {
    "text": "really the only decision maker in this",
    "start": "1264400",
    "end": "1266960"
  },
  {
    "text": "entire design everything Downstream from",
    "start": "1266960",
    "end": "1269679"
  },
  {
    "text": "API server is purely a TCP low-level",
    "start": "1269679",
    "end": "1274240"
  },
  {
    "text": "Network like TCP over grpc streaming",
    "start": "1274240",
    "end": "1278600"
  },
  {
    "text": "Network um",
    "start": "1278600",
    "end": "1281600"
  },
  {
    "text": "tunnel",
    "start": "1281600",
    "end": "1284440"
  },
  {
    "text": "y can you talk a little bit more about",
    "start": "1284440",
    "end": "1286679"
  },
  {
    "text": "the scalability how many AG you can",
    "start": "1286679",
    "end": "1290880"
  },
  {
    "text": "use yeah sure um the scalability",
    "start": "1290880",
    "end": "1296240"
  },
  {
    "text": "limit um some of the tuning parameters",
    "start": "1296240",
    "end": "1300919"
  },
  {
    "text": "uh involve like I think the connectivity",
    "start": "1300919",
    "end": "1303080"
  },
  {
    "text": "agent has a keep alive and there's",
    "start": "1303080",
    "end": "1307880"
  },
  {
    "text": "also there's a part of the protocol that",
    "start": "1308440",
    "end": "1311559"
  },
  {
    "text": "the agent performs in order to support",
    "start": "1311559",
    "end": "1315080"
  },
  {
    "text": "um the number of connectivity servers",
    "start": "1315080",
    "end": "1317600"
  },
  {
    "text": "increas Ing and decreasing uh and that",
    "start": "1317600",
    "end": "1320240"
  },
  {
    "text": "could happen if you wanted to change the",
    "start": "1320240",
    "end": "1322799"
  },
  {
    "text": "number of uh control plane nodes to make",
    "start": "1322799",
    "end": "1325440"
  },
  {
    "text": "your cluster more like either horizontal",
    "start": "1325440",
    "end": "1327960"
  },
  {
    "text": "scalability or um going from single to",
    "start": "1327960",
    "end": "1332720"
  },
  {
    "text": "fault tolerant cluster um the agent",
    "start": "1332720",
    "end": "1336279"
  },
  {
    "text": "supports that Dynamic server count",
    "start": "1336279",
    "end": "1338320"
  },
  {
    "text": "change by sort of continuing to try to",
    "start": "1338320",
    "end": "1342000"
  },
  {
    "text": "connect through the load balancer until",
    "start": "1342000",
    "end": "1344279"
  },
  {
    "text": "it connects to all the Full Count of",
    "start": "1344279",
    "end": "1347360"
  },
  {
    "text": "connectivities servers it learns the",
    "start": "1347360",
    "end": "1350000"
  },
  {
    "text": "count or number to connect to to know",
    "start": "1350000",
    "end": "1352480"
  },
  {
    "text": "when to sort of back off uh via response",
    "start": "1352480",
    "end": "1355640"
  },
  {
    "text": "headers as part of that",
    "start": "1355640",
    "end": "1357679"
  },
  {
    "text": "initialization but even when it catches",
    "start": "1357679",
    "end": "1360600"
  },
  {
    "text": "up to the number of expected it's still",
    "start": "1360600",
    "end": "1363360"
  },
  {
    "text": "on a slower basis polls just in case the",
    "start": "1363360",
    "end": "1365799"
  },
  {
    "text": "number increases right so depending on",
    "start": "1365799",
    "end": "1369600"
  },
  {
    "text": "the tuning of that pole Loop um you can",
    "start": "1369600",
    "end": "1373279"
  },
  {
    "text": "run",
    "start": "1373279",
    "end": "1374880"
  },
  {
    "text": "into I think it's an easily solved",
    "start": "1374880",
    "end": "1377120"
  },
  {
    "text": "problem what you run into is",
    "start": "1377120",
    "end": "1378679"
  },
  {
    "text": "connectivity server itself is a",
    "start": "1378679",
    "end": "1380840"
  },
  {
    "text": "kubernetes client for that token a token",
    "start": "1380840",
    "end": "1383720"
  },
  {
    "text": "review API call and the default client",
    "start": "1383720",
    "end": "1387480"
  },
  {
    "text": "throttling just does not have any sort",
    "start": "1387480",
    "end": "1389799"
  },
  {
    "text": "of push back and we sidestep that scale",
    "start": "1389799",
    "end": "1394200"
  },
  {
    "text": "like so if you hammer it with enough",
    "start": "1394200",
    "end": "1396039"
  },
  {
    "text": "agents at a rapid enough then you can",
    "start": "1396039",
    "end": "1398880"
  },
  {
    "text": "basically get queuing there when um a",
    "start": "1398880",
    "end": "1402440"
  },
  {
    "text": "more GA implementation would um like",
    "start": "1402440",
    "end": "1406080"
  },
  {
    "text": "load Jed or push backs somehow uh and it",
    "start": "1406080",
    "end": "1409520"
  },
  {
    "text": "just hasn't been done uh frankly in gke",
    "start": "1409520",
    "end": "1413600"
  },
  {
    "text": "we did the analysis to see like okay how",
    "start": "1413600",
    "end": "1416000"
  },
  {
    "text": "much connectivity infrastructure do we",
    "start": "1416000",
    "end": "1417799"
  },
  {
    "text": "need to run and how is it related to the",
    "start": "1417799",
    "end": "1420679"
  },
  {
    "text": "size of the cluster and one interesting",
    "start": "1420679",
    "end": "1423039"
  },
  {
    "text": "data point was",
    "start": "1423039",
    "end": "1424679"
  },
  {
    "text": "that the Clusters in the entire fleet",
    "start": "1424679",
    "end": "1427279"
  },
  {
    "text": "that had the highest use of control",
    "start": "1427279",
    "end": "1429760"
  },
  {
    "text": "plane ESS like were like one or two or",
    "start": "1429760",
    "end": "1432840"
  },
  {
    "text": "three node clusters and what was H what",
    "start": "1432840",
    "end": "1435279"
  },
  {
    "text": "was happening is they just had like",
    "start": "1435279",
    "end": "1437279"
  },
  {
    "text": "broken controllers busy looping and so",
    "start": "1437279",
    "end": "1440760"
  },
  {
    "text": "the scalability had nothing to do with",
    "start": "1440760",
    "end": "1442520"
  },
  {
    "text": "the size of the cluster so we basically",
    "start": "1442520",
    "end": "1444840"
  },
  {
    "text": "just scale enough agents to meet any use",
    "start": "1444840",
    "end": "1448000"
  },
  {
    "text": "case that we had like we we allow no",
    "start": "1448000",
    "end": "1451240"
  },
  {
    "text": "more than 100 because in our manual",
    "start": "1451240",
    "end": "1453559"
  },
  {
    "text": "testing we saw that at 100 for the",
    "start": "1453559",
    "end": "1455760"
  },
  {
    "text": "tuning parameters we had used that's",
    "start": "1455760",
    "end": "1458039"
  },
  {
    "text": "where things started to queue up but for",
    "start": "1458039",
    "end": "1460559"
  },
  {
    "text": "most clusters the number is a lot",
    "start": "1460559",
    "end": "1462760"
  },
  {
    "text": "less thank you was there a reason you",
    "start": "1462760",
    "end": "1466000"
  },
  {
    "text": "weren't using",
    "start": "1466000",
    "end": "1469799"
  },
  {
    "text": "domain sockets",
    "start": "1472039",
    "end": "1475559"
  },
  {
    "text": "um I think we do use a Unix socket um so",
    "start": "1476399",
    "end": "1480679"
  },
  {
    "text": "there's two there's two details to how",
    "start": "1480679",
    "end": "1483960"
  },
  {
    "text": "API server can communicate to",
    "start": "1483960",
    "end": "1485440"
  },
  {
    "text": "connectivity server uh one choice is",
    "start": "1485440",
    "end": "1488120"
  },
  {
    "text": "whether to use a Unix domain or a like a",
    "start": "1488120",
    "end": "1490880"
  },
  {
    "text": "TLS connection local uh and we we used",
    "start": "1490880",
    "end": "1495720"
  },
  {
    "text": "Unix sockets in instead of the other and",
    "start": "1495720",
    "end": "1499120"
  },
  {
    "text": "then there's a protocol choice between",
    "start": "1499120",
    "end": "1501320"
  },
  {
    "text": "whether to use grpc or HTTP connect and",
    "start": "1501320",
    "end": "1505399"
  },
  {
    "text": "the advantage of HTTP connect is that",
    "start": "1505399",
    "end": "1507320"
  },
  {
    "text": "it's an open standard and you could use",
    "start": "1507320",
    "end": "1509760"
  },
  {
    "text": "that mode that egress selector",
    "start": "1509760",
    "end": "1512120"
  },
  {
    "text": "configuration mode if you wanted to",
    "start": "1512120",
    "end": "1514399"
  },
  {
    "text": "completely replace the reference",
    "start": "1514399",
    "end": "1516679"
  },
  {
    "text": "implementation with your own",
    "start": "1516679",
    "end": "1519000"
  },
  {
    "text": "implementation um using grpc mode sort",
    "start": "1519000",
    "end": "1522399"
  },
  {
    "text": "of locks you into really implementing",
    "start": "1522399",
    "end": "1526080"
  },
  {
    "text": "implementing the specific connectivity",
    "start": "1526080",
    "end": "1529320"
  },
  {
    "text": "um Proto message",
    "start": "1529320",
    "end": "1532840"
  },
  {
    "text": "Api",
    "start": "1532840",
    "end": "1535120"
  },
  {
    "text": "right than you you're",
    "start": "1535120",
    "end": "1538480"
  },
  {
    "text": "welcome I love questions more",
    "start": "1538480",
    "end": "1541320"
  },
  {
    "text": "questions thanks for the talk uh I'm Tom",
    "start": "1541320",
    "end": "1544000"
  },
  {
    "text": "with Sony so uh what's going to be the",
    "start": "1544000",
    "end": "1547640"
  },
  {
    "text": "next step or what's missing for the",
    "start": "1547640",
    "end": "1549640"
  },
  {
    "text": "connectivity because that that it does",
    "start": "1549640",
    "end": "1551559"
  },
  {
    "text": "seem to be pretty much done for me I I",
    "start": "1551559",
    "end": "1554320"
  },
  {
    "text": "maybe missed it interesting you know the",
    "start": "1554320",
    "end": "1558039"
  },
  {
    "text": "what's next um if you go watch the 2019",
    "start": "1558039",
    "end": "1561360"
  },
  {
    "text": "talk uh there's there's further detail",
    "start": "1561360",
    "end": "1564399"
  },
  {
    "text": "into sort of maybe what more advanced",
    "start": "1564399",
    "end": "1566720"
  },
  {
    "text": "features and what could be next I sort",
    "start": "1566720",
    "end": "1569440"
  },
  {
    "text": "of agree with you from my perspective we",
    "start": "1569440",
    "end": "1572279"
  },
  {
    "text": "should just focus on really really um",
    "start": "1572279",
    "end": "1575399"
  },
  {
    "text": "locking down what appears to me to be a",
    "start": "1575399",
    "end": "1578279"
  },
  {
    "text": "stable basic dial flow um and and then",
    "start": "1578279",
    "end": "1583279"
  },
  {
    "text": "call that GA but one in the community",
    "start": "1583279",
    "end": "1587159"
  },
  {
    "text": "part of the path to GA that we're",
    "start": "1587159",
    "end": "1588559"
  },
  {
    "text": "discussing we need to have a better",
    "start": "1588559",
    "end": "1590960"
  },
  {
    "text": "regression test combination and Matrix",
    "start": "1590960",
    "end": "1593679"
  },
  {
    "text": "that will test across version skew right",
    "start": "1593679",
    "end": "1596320"
  },
  {
    "text": "now all of our testing is kind of unit",
    "start": "1596320",
    "end": "1598880"
  },
  {
    "text": "testing within a repo and so we don't",
    "start": "1598880",
    "end": "1601559"
  },
  {
    "text": "currently have regression tests against",
    "start": "1601559",
    "end": "1604600"
  },
  {
    "text": "a cube API server with a compiled in",
    "start": "1604600",
    "end": "1608159"
  },
  {
    "text": "connectivity client library at an older",
    "start": "1608159",
    "end": "1611080"
  },
  {
    "text": "version with a newer connectivity server",
    "start": "1611080",
    "end": "1614640"
  },
  {
    "text": "and there's also theoretically a",
    "start": "1614640",
    "end": "1615799"
  },
  {
    "text": "connectivity agent so you've got three",
    "start": "1615799",
    "end": "1617880"
  },
  {
    "text": "different um binaries that you could",
    "start": "1617880",
    "end": "1620399"
  },
  {
    "text": "have version skew across uh and the test",
    "start": "1620399",
    "end": "1623880"
  },
  {
    "text": "the test Matrix combination against all",
    "start": "1623880",
    "end": "1626760"
  },
  {
    "text": "three um so there's that uh another",
    "start": "1626760",
    "end": "1631720"
  },
  {
    "text": "Gap um I think I already mentioned",
    "start": "1631720",
    "end": "1634399"
  },
  {
    "text": "there's a desire to simplify the",
    "start": "1634399",
    "end": "1636559"
  },
  {
    "text": "protocol what a proxy connection",
    "start": "1636559",
    "end": "1638679"
  },
  {
    "text": "identifier is uh right now there's kind",
    "start": "1638679",
    "end": "1641080"
  },
  {
    "text": "of a twostep identifier pending dials",
    "start": "1641080",
    "end": "1645200"
  },
  {
    "text": "have a different distinct identif",
    "start": "1645200",
    "end": "1648120"
  },
  {
    "text": "and established connections have a diff",
    "start": "1648120",
    "end": "1650480"
  },
  {
    "text": "have like a different one uh and there's",
    "start": "1650480",
    "end": "1653120"
  },
  {
    "text": "a proposal to have it be the same",
    "start": "1653120",
    "end": "1654679"
  },
  {
    "text": "identifier for the whole lifetime of the",
    "start": "1654679",
    "end": "1657399"
  },
  {
    "text": "the the dial flow which I would",
    "start": "1657399",
    "end": "1660399"
  },
  {
    "text": "personally like to see another Gap that",
    "start": "1660399",
    "end": "1663200"
  },
  {
    "text": "we would like for the path to GA is",
    "start": "1663200",
    "end": "1667360"
  },
  {
    "text": "that the grpc connection here on the",
    "start": "1667360",
    "end": "1670480"
  },
  {
    "text": "diagram from the agent to the server",
    "start": "1670480",
    "end": "1673159"
  },
  {
    "text": "today is truly multiplexed so one agent",
    "start": "1673159",
    "end": "1677000"
  },
  {
    "text": "grpc connection is",
    "start": "1677000",
    "end": "1679159"
  },
  {
    "text": "multiplexing um any arbitrary number of",
    "start": "1679159",
    "end": "1682919"
  },
  {
    "text": "proxy TCP connections but the arrow the",
    "start": "1682919",
    "end": "1687159"
  },
  {
    "text": "grpc connection from API server to",
    "start": "1687159",
    "end": "1689399"
  },
  {
    "text": "connectivity server is actually single",
    "start": "1689399",
    "end": "1692120"
  },
  {
    "text": "use which is very expensive my",
    "start": "1692120",
    "end": "1694799"
  },
  {
    "text": "understanding is that during prototyping",
    "start": "1694799",
    "end": "1697360"
  },
  {
    "text": "they had a version that was truly",
    "start": "1697360",
    "end": "1700200"
  },
  {
    "text": "multiplexed but unfortunately when HT",
    "start": "1700200",
    "end": "1703360"
  },
  {
    "text": "HTTP connect mode was added they kind of",
    "start": "1703360",
    "end": "1706640"
  },
  {
    "text": "couldn't get both working and due to",
    "start": "1706640",
    "end": "1709679"
  },
  {
    "text": "some changes related to that making it",
    "start": "1709679",
    "end": "1711679"
  },
  {
    "text": "abstract they reduced the grpc code path",
    "start": "1711679",
    "end": "1715080"
  },
  {
    "text": "to single use so it's it's um today's",
    "start": "1715080",
    "end": "1719880"
  },
  {
    "text": "implementation um is greatly less",
    "start": "1719880",
    "end": "1722200"
  },
  {
    "text": "efficient than it could be although I",
    "start": "1722200",
    "end": "1724360"
  },
  {
    "text": "have to say in my experience in gke",
    "start": "1724360",
    "end": "1726399"
  },
  {
    "text": "that's never really been a problem okay",
    "start": "1726399",
    "end": "1729080"
  },
  {
    "text": "thank",
    "start": "1729080",
    "end": "1731240"
  },
  {
    "text": "you",
    "start": "1736399",
    "end": "1739399"
  },
  {
    "text": "all right if there are no more",
    "start": "1740760",
    "end": "1743720"
  },
  {
    "text": "questions then thanks for your time and",
    "start": "1743720",
    "end": "1745799"
  },
  {
    "text": "I hope this was",
    "start": "1745799",
    "end": "1748278"
  },
  {
    "text": "useful",
    "start": "1749480",
    "end": "1752480"
  }
]