[
  {
    "text": "welcome folks um today's talk is going to be scaling kubernetes flick management",
    "start": "280",
    "end": "6279"
  },
  {
    "text": "using Argo CD and the guos bridge my name is Carlos Santana I work for AWS as",
    "start": "6279",
    "end": "11679"
  },
  {
    "text": "a eks specialist uh Solutions architect that means that I work with a lot of customers uh that are using eks to build",
    "start": "11679",
    "end": "19000"
  },
  {
    "text": "their platform internal developer platform on top of kubernetes and gups Concepts uh also a member of a",
    "start": "19000",
    "end": "26720"
  },
  {
    "text": "contributor to the canoe project uh that is based on uh Technologies from the cncf others U",
    "start": "26720",
    "end": "33640"
  },
  {
    "text": "also in the platform space um and with me is go ahead Blake yeah uh my name is",
    "start": "33640",
    "end": "40559"
  },
  {
    "text": "Blake Rano I'm a senior software engineer for Imagine Learning we're a k through2 education company um I am been",
    "start": "40559",
    "end": "47800"
  },
  {
    "text": "the company for two years so I work on the internal developer platform uh kind of the Legacy version as well as the",
    "start": "47800",
    "end": "53239"
  },
  {
    "text": "nextg uh next gen version of our internal developer platform so obviously that's us",
    "start": "53239",
    "end": "61320"
  },
  {
    "text": "and imagine learning right is a k through2 education company we do digital first um curriculum and we kind of",
    "start": "61320",
    "end": "67560"
  },
  {
    "text": "Empower Educators to inspire breakthrough moments and every student's kind of unique uh learning opportunity",
    "start": "67560",
    "end": "73320"
  },
  {
    "text": "um Imagine Learning is a company that's kind of grown through Acquisitions um this has led us to having several Legacy",
    "start": "73320",
    "end": "78680"
  },
  {
    "text": "hosting platforms and internal developer platforms or what we'll call idps um the",
    "start": "78680",
    "end": "83840"
  },
  {
    "text": "Technologies in these platforms were not cohesive um in some of these Legacy platforms we were using Cloud",
    "start": "83840",
    "end": "90079"
  },
  {
    "text": "information some were using terraform some were using handrolled infrastructure um you know being",
    "start": "90079",
    "end": "95200"
  },
  {
    "text": "provisioned in the cloud platform's UI console and we really needed to reimagine our organization's IDP um we",
    "start": "95200",
    "end": "102960"
  },
  {
    "text": "have a small team of software Engineers that are fairly competent in infrastructure to help build out an internal developer platform and we",
    "start": "102960",
    "end": "109240"
  },
  {
    "text": "really had a desire to unify on technology to help provide a hosting platform for our organization um you",
    "start": "109240",
    "end": "115040"
  },
  {
    "text": "know we worked with AWS and other folks um kind of in the internal developer platform space um looked at Industries",
    "start": "115040",
    "end": "121439"
  },
  {
    "text": "um looked at the industry and looked at Trends within the industry and came up with a stack that allows us to um allows",
    "start": "121439",
    "end": "128039"
  },
  {
    "text": "platform Engineers to move quickly and manage several kubernetes based environments as well as allowing Engineers to move quickly within our",
    "start": "128039",
    "end": "133680"
  },
  {
    "text": "organization while following all the best practices um so for our next Generation",
    "start": "133680",
    "end": "139640"
  },
  {
    "text": "internal developer platform we've been working with open source projects like the cloud native operational uh Excellence group or the canoe group um",
    "start": "139640",
    "end": "146000"
  },
  {
    "text": "canoe is brought together different organizations uh collaborating on how to best build an internal developer platform on",
    "start": "146000",
    "end": "151920"
  },
  {
    "text": "kubernetes um for a KU or for a compute platform we're using kubernetes to run the compute of our applications this is",
    "start": "151920",
    "end": "158280"
  },
  {
    "text": "running in AWS on eks um for infrastructures code my team is responsible for creating and",
    "start": "158280",
    "end": "164640"
  },
  {
    "text": "maintaining core infrastructure components um think of things like ecast clusters vpcs um and we use palumi to",
    "start": "164640",
    "end": "171200"
  },
  {
    "text": "deploy this um which is you know part of the focus of today's talk uh we also use crossplane compositions and crossplane",
    "start": "171200",
    "end": "177239"
  },
  {
    "text": "to allow developers to deploy infrastructures code Cod for their specific applications um for continuous",
    "start": "177239",
    "end": "183280"
  },
  {
    "text": "deployment and delivery we chose Argo CD um and we follow a g off pattern to do Fleet Management across all of our eks",
    "start": "183280",
    "end": "189599"
  },
  {
    "text": "clusters and be able to declare you know all of the components of our um platform using get Ops which the other part of",
    "start": "189599",
    "end": "195640"
  },
  {
    "text": "today's talk and lastly we're using backstage as a portal for our developers um if you're not aware of",
    "start": "195640",
    "end": "203360"
  },
  {
    "text": "palumi pumi is an infrastructure's code tool um that allows you to write code that can provision infrastructure",
    "start": "203360",
    "end": "208599"
  },
  {
    "text": "resources like in the Co nippit you're seeing here this is deploying an S3 bucket um we want to adopt palumi to",
    "start": "208599",
    "end": "214920"
  },
  {
    "text": "build out our platform infrastructure because as I mentioned we're kind of a team of software Engineers we wanted to",
    "start": "214920",
    "end": "220040"
  },
  {
    "text": "be able to uh have the same patterns that we're using in you know regular code uh to be able to build out these platform features quickly um kind of",
    "start": "220040",
    "end": "227560"
  },
  {
    "text": "using all these same paradigms in programming that we're used to uh palumi also has very easy to use GitHub actions",
    "start": "227560",
    "end": "233840"
  },
  {
    "text": "which allowed us to deploy quickly and adopt a get offs model in our deployment of our infrastructures code um it also",
    "start": "233840",
    "end": "239560"
  },
  {
    "text": "has State Management in the cloud so unlike um something like terraform where you have to manage State and S3 palumi",
    "start": "239560",
    "end": "245840"
  },
  {
    "text": "manages all that in the cloud so it puts less of a burden on us um we also can",
    "start": "245840",
    "end": "251000"
  },
  {
    "text": "create multiple Stacks using the same set of code which allows us to be able to deploy several different versions of",
    "start": "251000",
    "end": "256840"
  },
  {
    "text": "our cluster or different SE several different versions of our Stacks um very quickly all based on the same code so",
    "start": "256840",
    "end": "262160"
  },
  {
    "text": "kind of trying to keep that code really really dry um and it allows us to also parameterize the configuration of stacks",
    "start": "262160",
    "end": "267600"
  },
  {
    "text": "using AML files um and that configuration allows us to change the configuration based on what stack we're",
    "start": "267600",
    "end": "273000"
  },
  {
    "text": "creating um and today you'll see how we're using plumey to create these platform resources for C feet of",
    "start": "273000",
    "end": "279919"
  },
  {
    "text": "clusters so palumi is a great infrastructure code tool however when we're when we are first building out the platform we tried using it to deploy",
    "start": "279919",
    "end": "286639"
  },
  {
    "text": "kubernetes resources and what we realized is when you deploy resources uh in kubernetes with palumi it's not ideal",
    "start": "286639",
    "end": "293720"
  },
  {
    "text": "right palumi is not really able to handle a consistently changing um resource like in kubernetes this is",
    "start": "293720",
    "end": "300039"
  },
  {
    "text": "where argocd comes into our infrastructure and into our tchack aroc CD allows us to have a get Ops based",
    "start": "300039",
    "end": "306600"
  },
  {
    "text": "model that um has a very powerful UI to understand desired versus observed State and G and allows us to connect to",
    "start": "306600",
    "end": "312440"
  },
  {
    "text": "multiple kubernetes clusters so it allows us to connect to all the Clusters we're managing in our Fleet and deploy",
    "start": "312440",
    "end": "317560"
  },
  {
    "text": "resources into those clusters um Argo CD also has a feature called application sets which allows us to dynamically",
    "start": "317560",
    "end": "323919"
  },
  {
    "text": "generate multiple Argo CD applications um and that has helped us be able to manage deployment of the same",
    "start": "323919",
    "end": "330400"
  },
  {
    "text": "application multiple times you know to different environments or different clusters so these tools are great um but",
    "start": "330400",
    "end": "337960"
  },
  {
    "text": "integrating them together is really really hard so there's no really clearly described pattern on how you take",
    "start": "337960",
    "end": "343000"
  },
  {
    "text": "details from your infrastructure's code and using your get Ops pattern so if I deploy an RDS cluster in my infrastructure code how do I actually",
    "start": "343000",
    "end": "349440"
  },
  {
    "text": "get those connection details how do I get the endpoint um into my giops and there's there was really no way to be",
    "start": "349440",
    "end": "355400"
  },
  {
    "text": "able to do that um and so what the Kos Bridge allows us to do is allows us to have a pattern to be able to do those",
    "start": "355400",
    "end": "361759"
  },
  {
    "text": "things um and manage our Fleet Thank You Blake",
    "start": "361759",
    "end": "367960"
  },
  {
    "text": "for that intro so um sorry my voice was getting out so everybody um starts doing",
    "start": "367960",
    "end": "374360"
  },
  {
    "text": "Fleet Management and what that means is managing multiple clusters in groups and",
    "start": "374360",
    "end": "379960"
  },
  {
    "text": "uh the journey starts with a death clusters everybody uh starts with the death cluster like experimenting what",
    "start": "379960",
    "end": "385919"
  },
  {
    "text": "type of apps we going to deploy or maybe moving the application from using something locally like Docker compos uh",
    "start": "385919",
    "end": "393319"
  },
  {
    "text": "into kubernetes so everybody gets a death cluster everybody's happy we got our PC working and uh the manager says",
    "start": "393319",
    "end": "400400"
  },
  {
    "text": "let's move on and then you build your staging cluster and staging cluster is kind of like prepr uh cluster and then",
    "start": "400400",
    "end": "407199"
  },
  {
    "text": "you configure the same thing and you like it's not that hard we did the first one now we know kubernetes maybe we got",
    "start": "407199",
    "end": "413080"
  },
  {
    "text": "a certif certification like cka or ckad and I can do that then you get into",
    "start": "413080",
    "end": "418960"
  },
  {
    "text": "production and then you notice that maybe the the cluster that you created is was running on Mini cue or kind uh",
    "start": "418960",
    "end": "425919"
  },
  {
    "text": "when people start asking like how we going to run this in production and this is where you look into building the",
    "start": "425919",
    "end": "431440"
  },
  {
    "text": "production cluster in something like in the cloud provider in my case where I see a lot of end users using eks a",
    "start": "431440",
    "end": "437319"
  },
  {
    "text": "managed kuber ntic service in AWS and when they get to that they get that point is do we keep doing it manually",
    "start": "437319",
    "end": "445479"
  },
  {
    "text": "like we keep C apply uh creating clusters like we can't or mini Cube or",
    "start": "445479",
    "end": "450599"
  },
  {
    "text": "cube ADM and then they start using different tooling um in this case they would choose something like dataform uh",
    "start": "450599",
    "end": "457639"
  },
  {
    "text": "cloud formation or cdk in some cases we've seen users using crossplane and our case um with imagine learnings um we",
    "start": "457639",
    "end": "465840"
  },
  {
    "text": "are using pulumi to do that and the story continues so very easy let's use",
    "start": "465840",
    "end": "470960"
  },
  {
    "text": "infrastructure as code to deploy uh art cluster so everybody has brought two",
    "start": "470960",
    "end": "476080"
  },
  {
    "text": "because it's a different region and then the thing starts grow growing up uh growing into like well if we can",
    "start": "476080",
    "end": "482960"
  },
  {
    "text": "configure the cluster control plane and maybe the VPC networking and the storage",
    "start": "482960",
    "end": "488319"
  },
  {
    "text": "um for the worker nodes um let's also deploy the kubernetes resources using",
    "start": "488319",
    "end": "494120"
  },
  {
    "text": "Tera form using pulumi and this is where you start getting into trouble because other teams in your work also want a",
    "start": "494120",
    "end": "500840"
  },
  {
    "text": "cluster from you from the platform teams so maybe the the AI uh Team or machine",
    "start": "500840",
    "end": "506000"
  },
  {
    "text": "learning team is once their own cluster so you get more clusters then you get into more clusters so that becomes a",
    "start": "506000",
    "end": "512479"
  },
  {
    "text": "Fleet Management and you start doing all this stap form work or pulumi work or",
    "start": "512479",
    "end": "517680"
  },
  {
    "text": "cross plane or GL formation and deploying Helm charts and kubernetes Jamal and confi maps and it becomes kind",
    "start": "517680",
    "end": "524039"
  },
  {
    "text": "of a a mess uh because people that are used to work in kubernetes or they're starting to learn about kubernetes they",
    "start": "524039",
    "end": "530440"
  },
  {
    "text": "learn about getups but they look at the infrastructure infrastructure code or infrastructure decorative yeah um files",
    "start": "530440",
    "end": "538240"
  },
  {
    "text": "and they're deploying all these resources through kubernetes and they get into trouble on reconciliation where",
    "start": "538240",
    "end": "544160"
  },
  {
    "text": "you want the desired state to OS be in sync so one of the patterns is stop",
    "start": "544160",
    "end": "549440"
  },
  {
    "text": "using these infrastructure scod tools for kuber resources keep using it to",
    "start": "549440",
    "end": "555120"
  },
  {
    "text": "create uh the control plane in this case of eks or creating the bpc networking or RDS those type of things but then start",
    "start": "555120",
    "end": "562560"
  },
  {
    "text": "using the gups tool in this example is Argo CD and then reduce the amount of therap form that you have or pulumi or",
    "start": "562560",
    "end": "569360"
  },
  {
    "text": "infrastructure code uh to the very minimum of the cloud apis and then",
    "start": "569360",
    "end": "574720"
  },
  {
    "text": "delegate everything else into Argo City but like Blake was saying like how do we pass some metadata that we need for our",
    "start": "574720",
    "end": "581519"
  },
  {
    "text": "hel charts or or kubernetes resources to Argo CD and then that's where we use the",
    "start": "581519",
    "end": "587240"
  },
  {
    "text": "power of application sets and these patterns of the gitos bridge have come to us of looking a lot of like",
    "start": "587240",
    "end": "593880"
  },
  {
    "text": "presentations here in gof scone and other gof scone where a lot of end users are actually taken advantage of",
    "start": "593880",
    "end": "600120"
  },
  {
    "text": "application sets to manage to do flep management uh a large scale to uh",
    "start": "600120",
    "end": "605320"
  },
  {
    "text": "configure clusters in groups so you have your machine learning or you have your region or you have certain type of",
    "start": "605320",
    "end": "611440"
  },
  {
    "text": "clusters and try to keep them upgraded the version of kubernetes but also the resources at the same time using Argo",
    "start": "611440",
    "end": "619360"
  },
  {
    "text": "CD and uh one example is the the GTO bridge is these are kind of the benefits",
    "start": "619360",
    "end": "625480"
  },
  {
    "text": "using application sets uh you can have a single cluster or multicluster you can",
    "start": "625480",
    "end": "631160"
  },
  {
    "text": "boostrap instead of using apps of apps you'll be bootstrapping of apps of application sets that then you get apps",
    "start": "631160",
    "end": "639279"
  },
  {
    "text": "uh the metadata and secret that you need you do it natively so you don't have to use an Argo CD plugin so you can use a",
    "start": "639279",
    "end": "645800"
  },
  {
    "text": "generator like the cluster generator or we're going to show the git generator doing that and other",
    "start": "645800",
    "end": "651120"
  },
  {
    "text": "benefits a high level this is what's happening we use pulumi to create the",
    "start": "651120",
    "end": "656519"
  },
  {
    "text": "resources and those resources ads resources or Cloud resources are work uh",
    "start": "656519",
    "end": "661720"
  },
  {
    "text": "one of them is the work worker Identity or po identity um in NS we used to have",
    "start": "661720",
    "end": "668040"
  },
  {
    "text": "something we have Ursa but now we have po identity we you need to create the AI roles and policies that's very good to",
    "start": "668040",
    "end": "674560"
  },
  {
    "text": "do in pulumi and create the E cluster everything else like I said you move into Argo CD and meaning the add-ons or",
    "start": "674560",
    "end": "682160"
  },
  {
    "text": "the helm charts um so this is an example on",
    "start": "682160",
    "end": "687440"
  },
  {
    "text": "actually how it works so everybody starts with the infrastructure as code in this case is pulumi and you create",
    "start": "687440",
    "end": "693320"
  },
  {
    "text": "the networking to deploy your cluster and you deploy your eeks cluster but then it's so easy to put in that code U",
    "start": "693320",
    "end": "700680"
  },
  {
    "text": "to put the hel charts for the Adams things like Belo that we're going to see a demo on that se manager external DNS",
    "start": "700680",
    "end": "707639"
  },
  {
    "text": "but the idea is to have the infrastructure scode create the cluster",
    "start": "707639",
    "end": "712920"
  },
  {
    "text": "secret representation of that cluster into git or maybe into a secret directly",
    "start": "712920",
    "end": "718279"
  },
  {
    "text": "or through see something like Ed secet manager or or ESO external circuit operator so the idea is to move all that",
    "start": "718279",
    "end": "725839"
  },
  {
    "text": "configuration that is Ku resources into Argo CD even to the point the worker",
    "start": "725839",
    "end": "731000"
  },
  {
    "text": "nodes so instead of using manag node groups you start using a cncf project called like car called Carpenter where",
    "start": "731000",
    "end": "738360"
  },
  {
    "text": "um the workloads will identify what are the notes that they need and then you do all that in yamama files using gups um",
    "start": "738360",
    "end": "745680"
  },
  {
    "text": "the same thing for the networking and the storage and U I went a little bit quickly",
    "start": "745680",
    "end": "751399"
  },
  {
    "text": "because we want to give you a demo of showing you some code and some examples that we build for you that you can take advantage of this pattern",
    "start": "751399",
    "end": "759720"
  },
  {
    "text": "blink so um this uh this Rebo is public so feel free to come take a look at it",
    "start": "764160",
    "end": "769680"
  },
  {
    "text": "once you know the talk is done uh but essentially this is a demo of showing what um palumi code and this kind of",
    "start": "769680",
    "end": "775920"
  },
  {
    "text": "argocd application sets and how this actually works in you know kind of the reality um you want bigger",
    "start": "775920",
    "end": "782680"
  },
  {
    "text": "okay is that good enough okay perfect um so essentially what you're looking at here is a stack file um so in here we're",
    "start": "782680",
    "end": "789160"
  },
  {
    "text": "actually setting some configurations for our um how we want to deploy our infrastructures code so in this case we",
    "start": "789160",
    "end": "794920"
  },
  {
    "text": "want to create a hub stack um that Hub stack is going to create a hub cluster where our Argo CD uh will live and in",
    "start": "794920",
    "end": "801320"
  },
  {
    "text": "this case we're setting things like the AWS region some cider blocks that we want for the VPC um and different",
    "start": "801320",
    "end": "807440"
  },
  {
    "text": "configurations especially for our components like like Valero um we're also setting what components do we actually want enabled in this cluster um",
    "start": "807440",
    "end": "814160"
  },
  {
    "text": "so in this case we're actually saying we want we want Valero enabled in this cluster um and you can see that configuration right here um in the kind",
    "start": "814160",
    "end": "822440"
  },
  {
    "text": "of entry point into our palumi code we're essentially going to create outputs and those outputs we're going to",
    "start": "822440",
    "end": "827839"
  },
  {
    "text": "use and actually output to our get Ops um what I'll call G Ops configuration file or in Argo CD it's a cluster secret",
    "start": "827839",
    "end": "834880"
  },
  {
    "text": "and we're going to use those and we're going to Output those into the annotations of that secret to be able to use Us in those application sets um and",
    "start": "834880",
    "end": "841759"
  },
  {
    "text": "in this example we're creating things like a VPC um we're going to create things like an Argo roll which I'll talk",
    "start": "841759",
    "end": "847560"
  },
  {
    "text": "more about as well as an eks cluster um once we're doing all that we're going to create things like the Pod identity eks",
    "start": "847560",
    "end": "853519"
  },
  {
    "text": "add-on um and we're going to essentially create our gitops configuration file I'll go into that code in a little",
    "start": "853519",
    "end": "860720"
  },
  {
    "text": "bit um in here we're actually going to create a component so in this case we're going to create a Valero component and for Valero we need things like an S3",
    "start": "860720",
    "end": "867839"
  },
  {
    "text": "bucket and so in this case we're creating an S3 bucket obviously with private access because we want to be secure and not have um people hack or",
    "start": "867839",
    "end": "874880"
  },
  {
    "text": "stuff um we're also going to create things like an IM Ro that we can assume with Ursa um and we're going to return",
    "start": "874880",
    "end": "881279"
  },
  {
    "text": "those things and be able to pass those as metadata to our cluster Secrets um here I wanted to kind of talk",
    "start": "881279",
    "end": "888120"
  },
  {
    "text": "about um the configuration we're creating for creating roles that Argo is going to be able to use so typically",
    "start": "888120",
    "end": "893639"
  },
  {
    "text": "what you'll see folks do is you'll see okay you create a hub cluster that already has access to that eks cluster but when you want to I start adding",
    "start": "893639",
    "end": "899480"
  },
  {
    "text": "multiple clusters it's okay how do I do that and that's been a really hard problem you'll see people create things like access keys and secret access Keys",
    "start": "899480",
    "end": "906320"
  },
  {
    "text": "um and you don't really need to do that what you can do in this case is actually have the Argo role um be able to assume",
    "start": "906320",
    "end": "914040"
  },
  {
    "text": "roles other roles and so what we do in our Hub clusters is we allow the Argo Ro to assume other roles and when we're",
    "start": "914040",
    "end": "921000"
  },
  {
    "text": "creating a Spoke cluster we can actually have it where um we allow the Argo world to assume it and add that trust",
    "start": "921000",
    "end": "927480"
  },
  {
    "text": "relationship and one of the nice things you can do here is you can actually grab outputs from a from one stack and use in",
    "start": "927480",
    "end": "934160"
  },
  {
    "text": "another so you can see in this code right here what we're doing is we're using the hubstack we're grabbing the",
    "start": "934160",
    "end": "939360"
  },
  {
    "text": "outputs from that hubstack and we're able to use it when we're um creating a trust relationship in our spoke clusters",
    "start": "939360",
    "end": "946600"
  },
  {
    "text": "um which has been really really powerful so we don't have to store things like access keys and secret access Keys um which helps our security",
    "start": "946600",
    "end": "953319"
  },
  {
    "text": "posture um this is the code that is essentially generating that what I'll call that gitops configuration or that",
    "start": "953319",
    "end": "959079"
  },
  {
    "text": "cluster secret for Argo CD um and you may be saying to yourself well right here I'm actually creating a repository",
    "start": "959079",
    "end": "965440"
  },
  {
    "text": "file you know isn't it bad practice to create a cluster secret and create a secret and store that in get well the",
    "start": "965440",
    "end": "971079"
  },
  {
    "text": "good thing is is because we're using IM roles and none of the secret information is really secret we can put it in get",
    "start": "971079",
    "end": "977759"
  },
  {
    "text": "there's no secret information here Argo CD just happened to use a secret as an object to store this information um but",
    "start": "977759",
    "end": "983959"
  },
  {
    "text": "really there's nothing Secret in this configuration file that we're concerned about it being on GitHub for",
    "start": "983959",
    "end": "989759"
  },
  {
    "text": "um so this palumi code will essentially go uh we have GitHub workflows that will",
    "start": "989759",
    "end": "995199"
  },
  {
    "text": "automatically deploy so when I merge to main it deploys all my stacks at the same time and it can update those",
    "start": "995199",
    "end": "1000639"
  },
  {
    "text": "configuration files right in get um and so this is what one of those cluster Secrets ends up looking like so you'll",
    "start": "1000639",
    "end": "1006399"
  },
  {
    "text": "see our annotations here and so these annotations are actually coming from our palumi code and that pumi code is",
    "start": "1006399",
    "end": "1013040"
  },
  {
    "text": "generating these outputs and putting them into this git file whenever it's changing that pumi needs or knows hey",
    "start": "1013040",
    "end": "1019480"
  },
  {
    "text": "let me go create a new commit and update this file um and you see you can see also here we're giving it things like",
    "start": "1019480",
    "end": "1025600"
  },
  {
    "text": "the URL for the cluster um and things like that we also have labels so in this case we're actually having a label for",
    "start": "1025600",
    "end": "1031839"
  },
  {
    "text": "our Dev cluster to say hey we want to enable Valero and we want to enable our application um and so those things are",
    "start": "1031839",
    "end": "1038160"
  },
  {
    "text": "going to be used in the application sets that Argo CD has to be able to generate",
    "start": "1038160",
    "end": "1043438"
  },
  {
    "text": "applications um and this is a bootstrap uh this is a bootstrap uh bash script that we have that essentially will",
    "start": "1043439",
    "end": "1050080"
  },
  {
    "text": "boostrap that Hub cluster right because you need Argo CD to actually be running first before you can kind of get into of this started um so in this case it'll",
    "start": "1050080",
    "end": "1056480"
  },
  {
    "text": "actually deploy Argo CD and give you the commands and actually apply what the bootstrap of app of applications as well",
    "start": "1056480",
    "end": "1063240"
  },
  {
    "text": "as port forwarding um Argo CD and tell you how to do that and access the Argo UI so when you go to the Argo UI um you",
    "start": "1063240",
    "end": "1069960"
  },
  {
    "text": "may see something like this and you'll actually see that the Clusters um for our Hub cluster our Dev cluster and in case in this case our production cluster",
    "start": "1069960",
    "end": "1076600"
  },
  {
    "text": "are actually connected to our um um Argo CDA instance and so it's using those cluster secrets to be able to get that",
    "start": "1076600",
    "end": "1083000"
  },
  {
    "text": "connection um you can see here this is our bootstrap application and so this",
    "start": "1083000",
    "end": "1088200"
  },
  {
    "text": "bootstrap application is doing two things it's deploying our cluster secrets and making sure those are",
    "start": "1088200",
    "end": "1093240"
  },
  {
    "text": "consistently reconciling with what Argo CD actually sees and you're also seeing these application sets um and you can",
    "start": "1093240",
    "end": "1099520"
  },
  {
    "text": "see in this case this application set for Valero is getting deployed in all three clusters um our bootstrap",
    "start": "1099520",
    "end": "1105799"
  },
  {
    "text": "application we only want in the hub cluster so it's only being deployed The Hub cluster and in this case our guest",
    "start": "1105799",
    "end": "1110880"
  },
  {
    "text": "book application is only being deployed to our Devon our production cluster because those are production clusters and clusters meant for you know running",
    "start": "1110880",
    "end": "1117240"
  },
  {
    "text": "workloads so we only want those uh that application to be deployed into those two clusters um also just wanted to show so",
    "start": "1117240",
    "end": "1125600"
  },
  {
    "text": "this is the backup storage location that valer is creating a part of the helm chart and so when you look down here you can actually see um this Dev bucket is",
    "start": "1125600",
    "end": "1133640"
  },
  {
    "text": "the bucket that we created in palumi and that metadata was never hardcoded it was just output from our metadata in our",
    "start": "1133640",
    "end": "1140400"
  },
  {
    "text": "application set and so if I look at the production version of this um application it's going to show you the",
    "start": "1140400",
    "end": "1145880"
  },
  {
    "text": "same thing but instead of it being hyphen Dev it's going to be hyphen prod um so in this case you can see it's",
    "start": "1145880",
    "end": "1152320"
  },
  {
    "text": "hyphen prod so it's two different buckets and these are outputs from the metadata from our palumi",
    "start": "1152320",
    "end": "1157360"
  },
  {
    "text": "code um I also just want to show so this is our guestbook application and so this is a Helm chart that we wrote um to",
    "start": "1157360",
    "end": "1163559"
  },
  {
    "text": "deploy essentially a gbook application um in our Dev environment you know where I don't have uh as much workload you",
    "start": "1163559",
    "end": "1170240"
  },
  {
    "text": "know as much uh traffic as I would in a production environment I only have two replicas running and so I actually set",
    "start": "1170240",
    "end": "1176080"
  },
  {
    "text": "that and I can override things at the environment level um so in this case in our Dev environment I'm saying hey I",
    "start": "1176080",
    "end": "1181760"
  },
  {
    "text": "only want two replicas of my guestbook application running but in production where I may be starting to see more",
    "start": "1181760",
    "end": "1187799"
  },
  {
    "text": "traffic I actually want three replicas running of my um application and so you",
    "start": "1187799",
    "end": "1193400"
  },
  {
    "text": "can actually set environment configurations in by using Helm in in values files and stacking values files",
    "start": "1193400",
    "end": "1198799"
  },
  {
    "text": "on each other you're able to do these overrides in a really intelligent way um and be able to do things based off the",
    "start": "1198799",
    "end": "1204440"
  },
  {
    "text": "cluster or the environment or any other metadata you want to be able to um configure Things based off of and so",
    "start": "1204440",
    "end": "1211640"
  },
  {
    "text": "just to preview this is some of the um actions that are running and that you can run um so in this case I can",
    "start": "1211640",
    "end": "1216960"
  },
  {
    "text": "actually run a workflow that will preview any changes that may be there um in my infrastructures code and so if I",
    "start": "1216960",
    "end": "1223320"
  },
  {
    "text": "refresh this so you can see this is going to run and so this will do a preview there's also GitHub actions to",
    "start": "1223320",
    "end": "1228720"
  },
  {
    "text": "deploy um new Stacks or deploy stacks and update them destroy initialize um or",
    "start": "1228720",
    "end": "1233840"
  },
  {
    "text": "just remove Stacks from configuration um so that's kind of the demo we have um and just how this ends up working in",
    "start": "1233840",
    "end": "1241840"
  },
  {
    "text": "reality so uh to recap the the pattern actually uh the",
    "start": "1249360",
    "end": "1254919"
  },
  {
    "text": "pattern uh relies on using application sets uh the idea is to use application sets to grab that metadata that the",
    "start": "1254919",
    "end": "1262120"
  },
  {
    "text": "infrastructure as code is is doing and then application sets are very useful because the idea of uh having too many",
    "start": "1262120",
    "end": "1269720"
  },
  {
    "text": "when you have at this scale of flip management you will have uh a a very very very large of number of",
    "start": "1269720",
    "end": "1276159"
  },
  {
    "text": "applications Argo applications we have worked with uh in my in my team in Ed we have worked with companies like Adobe uh",
    "start": "1276159",
    "end": "1283320"
  },
  {
    "text": "into it that they have like very large number of Argo CDs and imagine yourself having those every Argo app in a yamamo",
    "start": "1283320",
    "end": "1291200"
  },
  {
    "text": "file in a git repo you just shifted the problem of like managing a large large number of application sets to a large",
    "start": "1291200",
    "end": "1297720"
  },
  {
    "text": "number of files sitting in git right so the idea of application set is to generate the um the Argo application and",
    "start": "1297720",
    "end": "1305440"
  },
  {
    "text": "then reduce the amount of configuration and repetitiveness that you have and application sets can work with with Helm",
    "start": "1305440",
    "end": "1311279"
  },
  {
    "text": "can works with customized uh but here what we want to highlight is um the the",
    "start": "1311279",
    "end": "1317440"
  },
  {
    "text": "things that we have stracted into the pattern and the idea is that there this came and this um from the talk from ctis",
    "start": "1317440",
    "end": "1324640"
  },
  {
    "text": "uh I learned that he does the same thing as as me uh I go to Argo CD and I know why is this I know why this is a problem",
    "start": "1324640",
    "end": "1331760"
  },
  {
    "text": "because when I go to the Argo CD slack Channel I can see the same questions being asked again and again and again",
    "start": "1331760",
    "end": "1337799"
  },
  {
    "text": "how do I bootstrap Argo CD with EAS or a managed kubernetes cluster from other",
    "start": "1337799",
    "end": "1343799"
  },
  {
    "text": "cloud provider and there's another cloud provider in the GEOS Bridge uh channel that we call collaborating so it's not",
    "start": "1343799",
    "end": "1349559"
  },
  {
    "text": "just AWS all Cloud providers are are working on this and it's it's it's a way of like communicating or educating the",
    "start": "1349559",
    "end": "1356240"
  },
  {
    "text": "folks of how to leverage Argo Argo CD application sets and then coming back to the community of like what are the",
    "start": "1356240",
    "end": "1362520"
  },
  {
    "text": "features missing or what are the generators that are missing um or for example the latest feature of",
    "start": "1362520",
    "end": "1368960"
  },
  {
    "text": "application sets was add adding a dynamic plugins so in this case we're highlighting a few of the pattern of of",
    "start": "1368960",
    "end": "1375520"
  },
  {
    "text": "the features application sets that we're using in the GEOS Bridge for these patterns of like uh pulumi an Argo CD or",
    "start": "1375520",
    "end": "1382640"
  },
  {
    "text": "Tera form an Argo CD so uh the first one at the top is when you're in production",
    "start": "1382640",
    "end": "1389080"
  },
  {
    "text": "and somebody by mistakes remove an application set the last thing that you want is to also remove the Argo CD",
    "start": "1389080",
    "end": "1396400"
  },
  {
    "text": "applications so this is a safety net of a um prevents autog which is The",
    "start": "1396400",
    "end": "1401919"
  },
  {
    "text": "Preserve resource on deletion so this is kind of like the patterns that you can learn from other people in production",
    "start": "1401919",
    "end": "1408159"
  },
  {
    "text": "the one is the merge generator which basically we use to override the cluster",
    "start": "1408159",
    "end": "1414159"
  },
  {
    "text": "version so if I want to have in every cluster a certain version of in this",
    "start": "1414159",
    "end": "1419240"
  },
  {
    "text": "case uh Valero um you can set it to default but then in staging you want a",
    "start": "1419240",
    "end": "1424840"
  },
  {
    "text": "different version and then in production you want a different version so you we use we show you how to use the merge uh",
    "start": "1424840",
    "end": "1430880"
  },
  {
    "text": "generator uh with the cluster and um and the listing and the next one is the",
    "start": "1430880",
    "end": "1437919"
  },
  {
    "text": "chart name name in a single place the idea is if you have the chart name the repository and the versions in",
    "start": "1437919",
    "end": "1444320"
  },
  {
    "text": "application Set uh you can build some scripting Automation and we have a script in the repo that can go through",
    "start": "1444320",
    "end": "1450360"
  },
  {
    "text": "every application set or configure another tool that would analyze like what is the latest version or patch",
    "start": "1450360",
    "end": "1456880"
  },
  {
    "text": "version in every in every grouping um then the next one and and you can take a",
    "start": "1456880",
    "end": "1463480"
  },
  {
    "text": "look at the the python script or you can write your own uh to do that also the the benefit of like doing diffing you",
    "start": "1463480",
    "end": "1470440"
  },
  {
    "text": "can look up what are the Argo apps uh that are deployed and then diffing that",
    "start": "1470440",
    "end": "1475919"
  },
  {
    "text": "against the the git repo and for uh the overrides um it's",
    "start": "1475919",
    "end": "1484440"
  },
  {
    "text": "also another pattern where you if you were doing everything with pum or",
    "start": "1484440",
    "end": "1489679"
  },
  {
    "text": "terraform your probably would have all these values files for all the environments staging and Dev and prod",
    "start": "1489679",
    "end": "1497399"
  },
  {
    "text": "and usually you have a rainbow cluster which I call a unicorn cluster which is the cluster that you want to experiment",
    "start": "1497399",
    "end": "1503120"
  },
  {
    "text": "something but you don't want to use the values yamama files from everyone you want to use a specific one for the",
    "start": "1503120",
    "end": "1508559"
  },
  {
    "text": "cluster um so the idea is to use a kind of recent feature of application set",
    "start": "1508559",
    "end": "1515320"
  },
  {
    "text": "which it was using um sources with an S and the idea is to have a GitHub",
    "start": "1515320",
    "end": "1521039"
  },
  {
    "text": "location where you have your values files for Helm and a different entry for",
    "start": "1521039",
    "end": "1526080"
  },
  {
    "text": "the where the helm chart is located it could be an a register or in a file and that way you can have now move those",
    "start": "1526080",
    "end": "1532799"
  },
  {
    "text": "values files that were sitting maybe in a tera form git repo or pulumi git repo and move them to the gups repo and have",
    "start": "1532799",
    "end": "1540039"
  },
  {
    "text": "a directory structure where you can have environments and Dev staging production and maybe override clusters so you're",
    "start": "1540039",
    "end": "1546640"
  },
  {
    "text": "overwriting the configuration based on environments but you don't not necessarily you have to use customized",
    "start": "1546640",
    "end": "1553279"
  },
  {
    "text": "you can use Helm to do that the same thing for uh projects so that's an example so the repo offers um right now",
    "start": "1553279",
    "end": "1561440"
  },
  {
    "text": "20 I think it's like 40 Aras application sets for the common um addons that you",
    "start": "1561440",
    "end": "1566880"
  },
  {
    "text": "have in AWS but also open source addons and we accept contributions for",
    "start": "1566880",
    "end": "1572679"
  },
  {
    "text": "that um and then this is the the QR code if you want to take a look at the example get repo in the repo we have",
    "start": "1572679",
    "end": "1580480"
  },
  {
    "text": "also the slides and we'll post the YouTube video when it's available and also um links to other projects that are",
    "start": "1580480",
    "end": "1587159"
  },
  {
    "text": "we working on and you can find us on the slack for the Cano project is one that is this is the GEOS bridge and Aro CD",
    "start": "1587159",
    "end": "1594279"
  },
  {
    "text": "it's kind of a building block of building an internal developer platform but the Cano project is something that",
    "start": "1594279",
    "end": "1599640"
  },
  {
    "text": "we're working with other companies like for example Nike and Autodesk on building an internal developer platform",
    "start": "1599640",
    "end": "1606279"
  },
  {
    "text": "on kuties like Blake said um that uses things like uh backstage and crossplay",
    "start": "1606279",
    "end": "1612120"
  },
  {
    "text": "and AK um to build a whole stack um of developing your platform fast F even to",
    "start": "1612120",
    "end": "1619320"
  },
  {
    "text": "the point of having an ID a kind cluster with all the stack deployed with a CLI with one command and with a kind cluster",
    "start": "1619320",
    "end": "1626000"
  },
  {
    "text": "you even have a git server inside an Argo City that you can experiment with these um patterns to build your internal",
    "start": "1626000",
    "end": "1632640"
  },
  {
    "text": "internal developer platform um so I think I think that's it uh we have time",
    "start": "1632640",
    "end": "1637880"
  },
  {
    "text": "for for questions how we doing with time yeah then we're",
    "start": "1637880",
    "end": "1643799"
  },
  {
    "text": "good how many minutes how many minutes we have yeah we have three I think they're going to pass around okay",
    "start": "1643799",
    "end": "1649960"
  },
  {
    "text": "questions hello um so I think you demonstrated like a manual way of doing",
    "start": "1649960",
    "end": "1656279"
  },
  {
    "text": "Progressive deployments from one cluster to another where you basically say like oh dev has this version staging has this",
    "start": "1656279",
    "end": "1662679"
  },
  {
    "text": "version prod has this version uh do did does application set support any way to",
    "start": "1662679",
    "end": "1668760"
  },
  {
    "text": "like automate that in some capacity like say you know oh Dev we updated to this",
    "start": "1668760",
    "end": "1674000"
  },
  {
    "text": "version and it passed some kind of like a health test now I want applications",
    "start": "1674000",
    "end": "1679200"
  },
  {
    "text": "that to manage like the next uh set of clusters that's proba think but I don't know if yeah go",
    "start": "1679200",
    "end": "1685559"
  },
  {
    "text": "ahead yeah you can talk about oh",
    "start": "1685559",
    "end": "1690360"
  },
  {
    "text": "here yeah Progressive s this is CI CI and CD Maring okay",
    "start": "1690679",
    "end": "1699159"
  },
  {
    "text": "yeah there's different patterns to do that one of them is progress things and other pattern people are building their",
    "start": "1699159",
    "end": "1704200"
  },
  {
    "text": "own cicd progressing delivery I so I have a question about crossplane are you guys uh trying to use",
    "start": "1704200",
    "end": "1711480"
  },
  {
    "text": "xrds for other clusters like spoke clusters so what we use cross plane for",
    "start": "1711480",
    "end": "1716799"
  },
  {
    "text": "is really for um application teams to deploy their infrastructure so one of the problems that we have is with palumi",
    "start": "1716799",
    "end": "1722480"
  },
  {
    "text": "we you know there's um a lot of ways you can deploy things and a lot of them could be insecure or unreliable so the",
    "start": "1722480",
    "end": "1729919"
  },
  {
    "text": "goal with crossplane is to provide people with xrds and stuff to be able to deploy their infrastructures code kind",
    "start": "1729919",
    "end": "1736480"
  },
  {
    "text": "of in a safe and reliable way uh for platform Engineers right theoretically we should know the best practices and it's easier for us to do that in code um",
    "start": "1736480",
    "end": "1743600"
  },
  {
    "text": "which is why we use palumi but crossplane is really for our application developers that say Hey I need an S3 bucket for my um for my you know uh",
    "start": "1743600",
    "end": "1752039"
  },
  {
    "text": "application and uh the other question sorry go for uh backstage did you guys",
    "start": "1752039",
    "end": "1758200"
  },
  {
    "text": "create any IDP platform using because K",
    "start": "1758200",
    "end": "1763640"
  },
  {
    "text": "actually spins up a backstage we are still in the beginning phases of our backstage adoption in our",
    "start": "1763640",
    "end": "1769760"
  },
  {
    "text": "next gen platform we do use it heavily in our Legacy platforms mainly as a kind of uh software template and catalog uh",
    "start": "1769760",
    "end": "1776080"
  },
  {
    "text": "system for our services we do have some custom plugins that we've written in there as well um but yeah it's we're",
    "start": "1776080",
    "end": "1781559"
  },
  {
    "text": "still very much in the stages of trying to build that out and and idealize what that can be for our",
    "start": "1781559",
    "end": "1787320"
  },
  {
    "text": "developers but you're going to continue in that Journey oh absolutely yeah so that it has a positive sentiment on so",
    "start": "1787320",
    "end": "1793640"
  },
  {
    "text": "far on you see backstage yes we love backstage yeah okay he said it",
    "start": "1793640",
    "end": "1800039"
  },
  {
    "text": "um more question or we have a time we we'll be here all day so we came for for",
    "start": "1800279",
    "end": "1805360"
  },
  {
    "text": "giving this talk but also talking to other people of like you know learning from you what you're struggling um what",
    "start": "1805360",
    "end": "1811559"
  },
  {
    "text": "other Solutions this is an open source project um architecture patterns uh",
    "start": "1811559",
    "end": "1816640"
  },
  {
    "text": "which is a something that u i saw a lot of questions in slack um I'm part also of the Argo CD s scalability so you have",
    "start": "1816640",
    "end": "1823720"
  },
  {
    "text": "questions about scaling Aro CD uh you are welcome to to ask me or the other",
    "start": "1823720",
    "end": "1828799"
  },
  {
    "text": "argu there's other argu maintainers here on contributors um so I think that's it",
    "start": "1828799",
    "end": "1834000"
  },
  {
    "text": "thank you so much",
    "start": "1834000",
    "end": "1836840"
  }
]