[
  {
    "start": "0",
    "end": "60000"
  },
  {
    "text": "all right hello everyone thank you for actually staying for the last talk of",
    "start": "60",
    "end": "6839"
  },
  {
    "text": "the day I know everyone's gonna go back home after this right it's all exciting so we'll try to wrap this up really",
    "start": "6839",
    "end": "13500"
  },
  {
    "text": "quick so we can also head out cool so my name is Michael Benedict I'm an",
    "start": "13500",
    "end": "20400"
  },
  {
    "text": "engineering manager at Pinterest I lead the engineering productivity team who focuses to improve experiences from code",
    "start": "20400",
    "end": "27840"
  },
  {
    "text": "build deploys and obviously what we're going to be talking about today is more about governance and I have here with me",
    "start": "27840",
    "end": "36329"
  },
  {
    "text": "young men who's the tech lead of the team and we're here to share some great",
    "start": "36329",
    "end": "42180"
  },
  {
    "text": "stories with you on how we helped improve our build a governance platform at Pinterest so to get started I'll go",
    "start": "42180",
    "end": "50700"
  },
  {
    "text": "through my usual slides first off if you don't know about Pinterest okay it",
    "start": "50700",
    "end": "57690"
  },
  {
    "text": "sounds like many of you won't I just quickly share with what we do our job is",
    "start": "57690",
    "end": "63989"
  },
  {
    "start": "60000",
    "end": "98000"
  },
  {
    "text": "to provide and provide everyone with an inspiration to create a life they love so Pinterest is all about creating",
    "start": "63989",
    "end": "70439"
  },
  {
    "text": "unique experiences based on your interests and providing a path to",
    "start": "70439",
    "end": "75750"
  },
  {
    "text": "actually pursue those interests as well for example recently I ended up cooking steak I lived up some recipes at",
    "start": "75750",
    "end": "81990"
  },
  {
    "text": "Pinterest and it really worked out well in fact some of those recipes were so awesome that I ended up buying the raw",
    "start": "81990",
    "end": "87330"
  },
  {
    "text": "materials from Pinterest as well which helped me create an amazing steak but regardless our job is to help you take",
    "start": "87330",
    "end": "93540"
  },
  {
    "text": "some inspiration and actually execute on that to help create a life you love and obviously the showcase why this is",
    "start": "93540",
    "end": "101520"
  },
  {
    "start": "98000",
    "end": "127000"
  },
  {
    "text": "such an important thing we have tons of people who use Pinterest we have over 300 million people who use Pinterest on",
    "start": "101520",
    "end": "107909"
  },
  {
    "text": "a month over month basis they have collectively created and curated over",
    "start": "107909",
    "end": "114509"
  },
  {
    "text": "200 billion pins that's like the largest curation of pins or assets across the",
    "start": "114509",
    "end": "121710"
  },
  {
    "text": "world and they're all been categorized across four plus billion boards and our",
    "start": "121710",
    "end": "128069"
  },
  {
    "start": "127000",
    "end": "148000"
  },
  {
    "text": "job is to kind of take that and help every engineer at pin",
    "start": "128069",
    "end": "133470"
  },
  {
    "text": "just move extremely fast so our job is to provide a fast safe and a delightful",
    "start": "133470",
    "end": "138810"
  },
  {
    "text": "path from an idea to production without having anyone to worry about infrastructure that's our job so what",
    "start": "138810",
    "end": "148710"
  },
  {
    "start": "148000",
    "end": "215000"
  },
  {
    "text": "makes this really hard the pinterst architecture itself so pinterest is not a simple system I like",
    "start": "148710",
    "end": "154500"
  },
  {
    "text": "to quote our chief architect who likes to think of this as a left and the right brain where one 1/2 is like dedicated to",
    "start": "154500",
    "end": "161700"
  },
  {
    "text": "analytics where we take in so many different inputs and try it on this and how we can help create the right inspiration for different sets of people",
    "start": "161700",
    "end": "167850"
  },
  {
    "text": "and the other half is more around the serving stack itself which takes a lot of this content and data and help serve",
    "start": "167850",
    "end": "174330"
  },
  {
    "text": "that to tens and millions of users you can clearly see at the top of the stack on the left hand side those are our",
    "start": "174330",
    "end": "181080"
  },
  {
    "text": "clients who use the Pinterest app both on the web and the mobile and it's all powered",
    "start": "181080",
    "end": "186510"
  },
  {
    "text": "by a large API service and for quick context those two are the largest services at Pinterest monolithic Django",
    "start": "186510",
    "end": "194490"
  },
  {
    "text": "applications which exist even today after 11 years after its first commit it's been hard to kind of get rid of",
    "start": "194490",
    "end": "200340"
  },
  {
    "text": "them so with that you can also see that the layer below that we have a tons of Micra",
    "start": "200340",
    "end": "205920"
  },
  {
    "text": "services which actually provide the core business logic for Pinterest and all the way at the bottom it's more or less our",
    "start": "205920",
    "end": "212489"
  },
  {
    "text": "persistent store stack all right obviously all that infrastructure as",
    "start": "212489",
    "end": "219150"
  },
  {
    "start": "215000",
    "end": "244000"
  },
  {
    "text": "complicated as it is we have a huge footprint so overall like thousands of micro services where we do over tens and",
    "start": "219150",
    "end": "226860"
  },
  {
    "text": "thousands and deploys a day these run are now getting hundreds of thousands of servers and the batch system is solved",
    "start": "226860",
    "end": "234959"
  },
  {
    "text": "powers even more like millions of workloads running almost on a monthly basis and what's more interesting is",
    "start": "234959",
    "end": "240720"
  },
  {
    "text": "obviously given the size of infrastructure our costs are not small or low so to give you a sense of how we",
    "start": "240720",
    "end": "246930"
  },
  {
    "start": "244000",
    "end": "393000"
  },
  {
    "text": "actually divvy up how much we're using on the public cloud this kind of gives you a quick overview of how our costs",
    "start": "246930",
    "end": "252810"
  },
  {
    "text": "are actually divvied up so for some context Pinterest started on the public cloud from day one",
    "start": "252810",
    "end": "258419"
  },
  {
    "text": "our founders the first commit they put together for the Django application was deployed on AWS ec2 and ever since then",
    "start": "258419",
    "end": "265200"
  },
  {
    "text": "we've always been on the cloud so we are probably the cloud native company you could talk about so this is kind of how",
    "start": "265200",
    "end": "272639"
  },
  {
    "text": "our costs are actually divvied up and what I'm here to talk about today is if you're running on the cloud you probably",
    "start": "272639",
    "end": "278669"
  },
  {
    "text": "know that it's not as simple as trying to figure out where your money is really being spent and what adds to this",
    "start": "278669",
    "end": "285150"
  },
  {
    "text": "complexity is when you start looking at each aspect of the cloud so for example we rely heavily on the primitive",
    "start": "285150",
    "end": "291810"
  },
  {
    "text": "services which are public cloud provider offers the compute infrastructure instances more or less the storage",
    "start": "291810",
    "end": "298440"
  },
  {
    "text": "infrastructure which in this case we're a big AWS fans we run on s3 and finally there's some other costs as well which",
    "start": "298440",
    "end": "304830"
  },
  {
    "text": "you can talk about more but what really makes it complex if you start to divvy up our compute costs it starts all the",
    "start": "304830",
    "end": "310680"
  },
  {
    "text": "way at the more foundational primitives like regions and then availability zones",
    "start": "310680",
    "end": "315750"
  },
  {
    "text": "and then gets even more complex as you go up like okay what are these reserved instances what are these on-demand instances spot instance mean and there",
    "start": "315750",
    "end": "323250"
  },
  {
    "text": "is these tens and thousands of different instance types which we have to grok and understand and they all mean something and it will even complicate matters",
    "start": "323250",
    "end": "329789"
  },
  {
    "text": "worse everything can be put together in concepts called auto-scaling groups where it can scale up or down based on",
    "start": "329789",
    "end": "335909"
  },
  {
    "text": "how you've configured your resources now imagine authors makes it extremely complicated to understand how you're",
    "start": "335909",
    "end": "341190"
  },
  {
    "text": "spending your money across so many different dimensions and to be honest",
    "start": "341190",
    "end": "346530"
  },
  {
    "text": "we're not done yet even after that you actually end up paying more money as you kind of transfer data in and out of your",
    "start": "346530",
    "end": "352050"
  },
  {
    "text": "instances to different variety of services so this slide really just shows",
    "start": "352050",
    "end": "357090"
  },
  {
    "text": "you a complex view of sure you're spending money and compute but in reality it's going through all these",
    "start": "357090",
    "end": "363599"
  },
  {
    "text": "different aspects or dimensions of your compute print it's to give you an",
    "start": "363599",
    "end": "369539"
  },
  {
    "text": "overview the same applies for even storage storage is not easy just storing a file on s3 or any like GCS is not the",
    "start": "369539",
    "end": "377490"
  },
  {
    "text": "same because you have to pay again based on the dimensions of what you're trying to do it could be stored in a particular",
    "start": "377490",
    "end": "382800"
  },
  {
    "text": "region or multi region you're probably storing all the standard buckets or it could be on glacier and any other",
    "start": "382800",
    "end": "388770"
  },
  {
    "text": "aspects or tiers of offerings from the cloud priors so overall I mean it's it's",
    "start": "388770",
    "end": "395370"
  },
  {
    "start": "393000",
    "end": "428000"
  },
  {
    "text": "hard it's really hard to kind of drag and put all these numbers together and truly understand like wearing",
    "start": "395370",
    "end": "400470"
  },
  {
    "text": "exactly the money is going and that's the biggest challenge we had at Pinterest we are so large that it became",
    "start": "400470",
    "end": "405570"
  },
  {
    "text": "truly hard to understand three things who is running what on the infrastructure how does it all add up to",
    "start": "405570",
    "end": "412530"
  },
  {
    "text": "a certain amount of cost our set of resources and finally what can we do to",
    "start": "412530",
    "end": "417630"
  },
  {
    "text": "better understand a plan going forward for all these different resources I",
    "start": "417630",
    "end": "423830"
  },
  {
    "text": "Barney that was a gift by the way so alright so infrastructure governance",
    "start": "424100",
    "end": "430950"
  },
  {
    "start": "428000",
    "end": "448000"
  },
  {
    "text": "that's our seal of approval basically to say that if you're saving money in our",
    "start": "430950",
    "end": "436320"
  },
  {
    "text": "company you should get that seal of approval because we don't want people to be sending email saying that I've saved tens of millions of dollars without",
    "start": "436320",
    "end": "441840"
  },
  {
    "text": "actually reading it up so that is you know props to my team to kind of put that together so I'm gonna cover like",
    "start": "441840",
    "end": "449850"
  },
  {
    "start": "448000",
    "end": "492000"
  },
  {
    "text": "four specific topics along with the onlin over here so how do we build a platform of governance at Pinterest",
    "start": "449850",
    "end": "456169"
  },
  {
    "text": "there are four key pillars as we like to call it one visibility getting insights",
    "start": "456169",
    "end": "461340"
  },
  {
    "text": "into how and who's using what to ownership this is one of the most important things we'll spend some time",
    "start": "461340",
    "end": "467160"
  },
  {
    "text": "talking about how do you have a clear view of ownership of who owns what all the way from resources to code to all",
    "start": "467160",
    "end": "474150"
  },
  {
    "text": "different aspects of tools and systems the third one being how do you",
    "start": "474150",
    "end": "479460"
  },
  {
    "text": "effectively plan budget and capacity and finally we'll just briefly discuss a few things on the optimization side specific",
    "start": "479460",
    "end": "486930"
  },
  {
    "text": "to Cuba Nettie's on how we're improving that front cool so let's start with",
    "start": "486930",
    "end": "493979"
  },
  {
    "start": "492000",
    "end": "570000"
  },
  {
    "text": "visibility what is visibility so there's gonna be three aspects to visibility and",
    "start": "493979",
    "end": "499260"
  },
  {
    "text": "I'm sure everyone's probably dealt with this if you're running on the public cloud there's provisioning so how do you",
    "start": "499260",
    "end": "504660"
  },
  {
    "text": "provision resources you can use your API or different sets of tools like cops are",
    "start": "504660",
    "end": "510229"
  },
  {
    "text": "your own custom deployment or cluster management tool as well the second thing is how do you inventory these resources",
    "start": "510229",
    "end": "518729"
  },
  {
    "text": "so you have provisions some resources in the cloud great do you know actually where they exist and how can you view",
    "start": "518729",
    "end": "524310"
  },
  {
    "text": "all of them I'm sure that consoles are do a good job in providing that data but after you reach a certain size a size",
    "start": "524310",
    "end": "530520"
  },
  {
    "text": "and scale it's impossible to look at hundred thousand server in the same console console page and",
    "start": "530520",
    "end": "536370"
  },
  {
    "text": "finally how do you understand the state of these resources is it running right now has it stopped has it been killed so",
    "start": "536370",
    "end": "543550"
  },
  {
    "text": "there's a lot of content or information which is missing which usually the consoles don't provide at a certain size and scale so those are the three key",
    "start": "543550",
    "end": "550420"
  },
  {
    "text": "things it's part of getting visibility how are you provisioning your resources can you invent your resource and attract",
    "start": "550420",
    "end": "555430"
  },
  {
    "text": "metadata associated with it and finally how do you meter and understand the state of those resources as well and",
    "start": "555430",
    "end": "561520"
  },
  {
    "text": "resources over here I'm using it pretty loosely it could be instances it could be buckets it could be even pods and",
    "start": "561520",
    "end": "570460"
  },
  {
    "start": "570000",
    "end": "611000"
  },
  {
    "text": "with that I want to like do a quick plug we had open source in inventory store at Pinterest this is what we use",
    "start": "570460",
    "end": "577120"
  },
  {
    "text": "it's called Soundwave externally internally we call it CMDB configuration",
    "start": "577120",
    "end": "582400"
  },
  {
    "text": "management data store not a very friendly name but yes this is what we use today where we can query every",
    "start": "582400",
    "end": "589240"
  },
  {
    "text": "instance running at Pinterest we can get very precise metadata about when it was",
    "start": "589240",
    "end": "594520"
  },
  {
    "text": "terminated when it was running like what was the configuration around it all the way from network cards attached to it",
    "start": "594520",
    "end": "600010"
  },
  {
    "text": "to what kind of versions of OS we were running on it so this has been an amazing store for us to keep track of",
    "start": "600010",
    "end": "606070"
  },
  {
    "text": "things as and when instances come and go and clearly that lets us do things like",
    "start": "606070",
    "end": "613990"
  },
  {
    "start": "611000",
    "end": "637000"
  },
  {
    "text": "this we can truly understand okay given a number of instances and you have all this amazing metadata next to it",
    "start": "613990",
    "end": "619000"
  },
  {
    "text": "how can you truly visualize what's happening within your company this is just a quick tableau visualize you",
    "start": "619000",
    "end": "624220"
  },
  {
    "text": "should be particularly just to show this footprint of all the service is running at Pinterest the blobs you see and the",
    "start": "624220",
    "end": "630160"
  },
  {
    "text": "size of the blog reflects to how many instances and CPUs they are using essentially so this thing does get",
    "start": "630160",
    "end": "640690"
  },
  {
    "start": "637000",
    "end": "724000"
  },
  {
    "text": "complex the moment you get into Cuba Nettie's because when you're looking at instances you do have access from the cloud provider on the API and metadata",
    "start": "640690",
    "end": "647500"
  },
  {
    "text": "to tell you you know when an instance came up when it died and other associated metadata not to replicate",
    "start": "647500",
    "end": "653410"
  },
  {
    "text": "that similar experience it was important to look at kubernetes and see what kind of primitives to behalf in in place to",
    "start": "653410",
    "end": "658960"
  },
  {
    "text": "kind of leverage or create the same level of metadata so we can reuse our same system so some of the key things we",
    "start": "658960",
    "end": "664450"
  },
  {
    "text": "realized is that this data is ephemeral it's only stays for a certain amount of time within the",
    "start": "664450",
    "end": "669880"
  },
  {
    "text": "Cuban eighties cluster so that was one of the biggest challenges we had to address like to ship those information",
    "start": "669880",
    "end": "674949"
  },
  {
    "text": "that information as quickly as possible to some sort of persistent store and we ended up like leveraging elasticsearch",
    "start": "674949",
    "end": "680199"
  },
  {
    "text": "for that to ship this to our inventory store and that's kind of a key metadata",
    "start": "680199",
    "end": "685540"
  },
  {
    "text": "we try to like pull out from every pot like what is the identifier when was it created when was it terminated and we",
    "start": "685540",
    "end": "693339"
  },
  {
    "text": "also track all the reservation information in terms of the resources requested by that particular pod and all",
    "start": "693339",
    "end": "700209"
  },
  {
    "text": "of that gets shipped to Soundwave one thing you'll note it interesting lis there is a concept called identifier now",
    "start": "700209",
    "end": "705550"
  },
  {
    "text": "these are not pod names and very soon we'll actually talk about why this is one of the most important things if you",
    "start": "705550",
    "end": "710949"
  },
  {
    "text": "really want to have a clear view of your infrastructure from instances to Kuban at ease - it could be even Hadoop for",
    "start": "710949",
    "end": "716740"
  },
  {
    "text": "that matter how can you singularly try to understand how can to identify these resources and once you have this data in",
    "start": "716740",
    "end": "725889"
  },
  {
    "start": "724000",
    "end": "782000"
  },
  {
    "text": "Soundwave it was more or less an ETL job which we ended up writing called a chargeback system which pulled a lot of",
    "start": "725889",
    "end": "732339"
  },
  {
    "text": "this data together and compiled information for us to tell us how resources are being utilized within the",
    "start": "732339",
    "end": "739269"
  },
  {
    "text": "company and what this lets us do is let it lets us visualize this particular",
    "start": "739269",
    "end": "745990"
  },
  {
    "text": "data in very different sets of dimensions this could be from how many instances are running to up say who owns",
    "start": "745990",
    "end": "752740"
  },
  {
    "text": "a particular instance - even more data saying group even more data around aggregation of which team owned certain",
    "start": "752740",
    "end": "759730"
  },
  {
    "text": "instances of which organization owns instances and what's the best part is since all of those been generalized we",
    "start": "759730",
    "end": "765459"
  },
  {
    "text": "can actually look up a given team or a given organization and only see the instances they run but also their Kuban",
    "start": "765459",
    "end": "771310"
  },
  {
    "text": "at least pause the s3 footprint the Hadoop just they're running all different platforms all bundled up",
    "start": "771310",
    "end": "777519"
  },
  {
    "text": "through a single chargeback interface and yes it leads to some fancy",
    "start": "777519",
    "end": "784779"
  },
  {
    "start": "782000",
    "end": "843000"
  },
  {
    "text": "visualizations this is kind of the data our fin ops team and others track on almost a day-to-day basis to see how",
    "start": "784779",
    "end": "790420"
  },
  {
    "text": "we're going on CPUs this is literally just I think four months worth of data but you can clearly see the uptick in in",
    "start": "790420",
    "end": "796720"
  },
  {
    "text": "our V CPUs that's the metric we use in two just to show how we're prepping up for the holiday season so yes all of them",
    "start": "796720",
    "end": "804930"
  },
  {
    "text": "each individual color actually represents a service or a platform and I think it should be pretty obvious like",
    "start": "804930",
    "end": "810810"
  },
  {
    "text": "the large ones what what they essentially mean why is it hard to kind of track the large platforms so one",
    "start": "810810",
    "end": "818100"
  },
  {
    "text": "thing I do want to call out is that this is just an ec2 or an instance view of things the next level of charge back",
    "start": "818100",
    "end": "823470"
  },
  {
    "text": "actually gets you details into why is that blue bar so large so that is",
    "start": "823470",
    "end": "828780"
  },
  {
    "text": "potentially either Hadoop or cubed Ares in this context and we can actually do a deep dive to understand which pods are",
    "start": "828780",
    "end": "834270"
  },
  {
    "text": "who's using what resources within that as well all right so with that I'll",
    "start": "834270",
    "end": "839280"
  },
  {
    "text": "actually have young men talk about our next pillar which is identity and",
    "start": "839280",
    "end": "845160"
  },
  {
    "start": "843000",
    "end": "890000"
  },
  {
    "text": "resource thank you Michael",
    "start": "845160",
    "end": "858180"
  },
  {
    "text": "hi everyone my name is a young racer from Pinterest so I continually talk",
    "start": "858180",
    "end": "863190"
  },
  {
    "text": "about the other expect of the invoker by Pinterest so ownership as Michael",
    "start": "863190",
    "end": "868680"
  },
  {
    "text": "mentioned that is the cornerstone of the covenants so it we need to know that who",
    "start": "868680",
    "end": "874440"
  },
  {
    "text": "owns what we sauce and then how the ownership is go up to which organization",
    "start": "874440",
    "end": "880410"
  },
  {
    "text": "and then who spends what the kind of things and they also actually we want to know that what manager owns this",
    "start": "880410",
    "end": "886380"
  },
  {
    "text": "resource like this project right that's very important things to do okay to",
    "start": "886380",
    "end": "892530"
  },
  {
    "start": "890000",
    "end": "965000"
  },
  {
    "text": "solve the ownership problem we build our identity service called Timbers so we",
    "start": "892530",
    "end": "898440"
  },
  {
    "text": "don't have name here but its consumers and it had three components one is",
    "start": "898440",
    "end": "904460"
  },
  {
    "text": "identity and the ownership and the",
    "start": "904460",
    "end": "909830"
  },
  {
    "text": "metadata so itself as a single source of choose that the ownership and associated",
    "start": "909830",
    "end": "917400"
  },
  {
    "text": "metadata so here's a so there's a there's an example of the service on",
    "start": "917400",
    "end": "924390"
  },
  {
    "text": "uncommon economics that we talked about in yesterday so it's a we have the",
    "start": "924390",
    "end": "929520"
  },
  {
    "text": "ownership of this service at the the Nimbus system so it shows",
    "start": "929520",
    "end": "935430"
  },
  {
    "text": "what the owner is as a manager Michael and also at the teen youth team email",
    "start": "935430",
    "end": "942280"
  },
  {
    "text": "and then description also there's some metadata associated with this service so",
    "start": "942280",
    "end": "947620"
  },
  {
    "text": "for example we can easily find a threat information you can find a piece of duty",
    "start": "947620",
    "end": "953140"
  },
  {
    "text": "of this service so that asahi can easily two pages per page the owner of the",
    "start": "953140",
    "end": "959290"
  },
  {
    "text": "services or anything that goes wrong with the service way yeah",
    "start": "959290",
    "end": "964950"
  },
  {
    "text": "so let's take a quick look on how the",
    "start": "964950",
    "end": "970380"
  },
  {
    "start": "965000",
    "end": "1110000"
  },
  {
    "text": "how the identity was specified in company the world so we implement this",
    "start": "970380",
    "end": "975550"
  },
  {
    "text": "as the key identity the key to that ended here is the canonical specification so that's why we have this",
    "start": "975550",
    "end": "983460"
  },
  {
    "text": "URI we call its call unique resource identifier so that's we have a",
    "start": "983460",
    "end": "989650"
  },
  {
    "text": "specification that's always start with numbers just like any HTTP so these numbers and then you can put the project",
    "start": "989650",
    "end": "997240"
  },
  {
    "text": "there and then the platform and then each platform we can have a small",
    "start": "997240",
    "end": "1002430"
  },
  {
    "text": "slightly different specification for example here then we have the company the platform and the vacuum uniform we",
    "start": "1002430",
    "end": "1009240"
  },
  {
    "text": "can identify the cluster this part is landing ad and also the what go type so",
    "start": "1009240",
    "end": "1016980"
  },
  {
    "text": "App inches we use order Ciotti and then the CNT type actually we started in here",
    "start": "1016980",
    "end": "1022170"
  },
  {
    "text": "and then also the name of the application the pod so in this case that",
    "start": "1022170",
    "end": "1029060"
  },
  {
    "text": "actually this information is stored in a notation that is injected by the or CRT",
    "start": "1029060",
    "end": "1036240"
  },
  {
    "text": "controller that CRT controller will depend on the namespace and then that's",
    "start": "1036240",
    "end": "1042270"
  },
  {
    "text": "this these services belong to what project right and injects in notation in",
    "start": "1042270",
    "end": "1048350"
  },
  {
    "text": "in a part so that later on in the data injections the ETL pipeline were able to",
    "start": "1048350",
    "end": "1054540"
  },
  {
    "text": "identify this part and then it's a utilization of this part as well okay",
    "start": "1054540",
    "end": "1061760"
  },
  {
    "text": "one thing to mention is actually use this URI format so that we can support",
    "start": "1061760",
    "end": "1068340"
  },
  {
    "text": "multiple platform that we going to a certain project for example then this",
    "start": "1068340",
    "end": "1074310"
  },
  {
    "text": "project this this service can also run on vm like the ec2 environment so that",
    "start": "1074310",
    "end": "1080640"
  },
  {
    "text": "you can have another another resource that is called Nimbus and then same",
    "start": "1080640",
    "end": "1087870"
  },
  {
    "text": "project my tab and then on ec2 and then Ann Kuster and their stage as well",
    "start": "1087870",
    "end": "1093110"
  },
  {
    "text": "there's this way that we have global view of a project that what we sauce is",
    "start": "1093110",
    "end": "1098190"
  },
  {
    "text": "beyond tall and also we can add s3 for example or even if this project associate some Hadoop job then we also",
    "start": "1098190",
    "end": "1105420"
  },
  {
    "text": "group them into the same project we have a different platform different resource ok with this ownership system then we",
    "start": "1105420",
    "end": "1114270"
  },
  {
    "start": "1110000",
    "end": "1164000"
  },
  {
    "text": "can actually build tools along that beautiful longest the Nimbus service",
    "start": "1114270",
    "end": "1119610"
  },
  {
    "text": "right the tools one tools we talk about here is the asahi part hi sorry about is",
    "start": "1119610",
    "end": "1126420"
  },
  {
    "text": "actually a select part so that you can interact you can run a command to do",
    "start": "1126420",
    "end": "1131550"
  },
  {
    "text": "what we were clearly on project or even on a host name on the pot name so from",
    "start": "1131550",
    "end": "1138270"
  },
  {
    "text": "the host name of her name you can we can be worse clearly that what project is parties belong to and then from the",
    "start": "1138270",
    "end": "1144750"
  },
  {
    "text": "project we know who which manager actually own this we saw sway and then",
    "start": "1144750",
    "end": "1150600"
  },
  {
    "text": "if anything that goes wrong on the underserviced and you totally what's woke up then we can find a page of duty",
    "start": "1150600",
    "end": "1156810"
  },
  {
    "text": "and then you can page the person that that's on call for this service so it's very useful as it's honest your true",
    "start": "1156810",
    "end": "1164900"
  },
  {
    "start": "1164000",
    "end": "1214000"
  },
  {
    "text": "okay now now we have the visibility and then we have the ownership identity the",
    "start": "1164900",
    "end": "1171570"
  },
  {
    "text": "next step is to look at the capacity planning and because we have the history",
    "start": "1171570",
    "end": "1178680"
  },
  {
    "text": "data by the capacity data we can do forecast and then the grey line is the",
    "start": "1178680",
    "end": "1187110"
  },
  {
    "text": "great one is from the the planning basically like we can look at the",
    "start": "1187110",
    "end": "1192600"
  },
  {
    "text": "previous trend and then we do some kind of folk and then the red line is the actual usage so you can see that as some small",
    "start": "1192600",
    "end": "1200389"
  },
  {
    "text": "variation there and the goal is to keep the variation less than 5% so that's",
    "start": "1200389",
    "end": "1208139"
  },
  {
    "text": "that's the main goal of the capacity planning which might not be that easy but that's the goal you want to do and",
    "start": "1208139",
    "end": "1215480"
  },
  {
    "start": "1214000",
    "end": "1291000"
  },
  {
    "text": "we're going to do a case study here so even we plan really effectively and then",
    "start": "1215480",
    "end": "1222960"
  },
  {
    "text": "things still can go wrong in this case right this is this a crystal study that",
    "start": "1222960",
    "end": "1229200"
  },
  {
    "text": "we actually have a sample one instance so one of our major service that it's",
    "start": "1229200",
    "end": "1235110"
  },
  {
    "text": "this building across a multiple failure domain it recall availability zoom easy",
    "start": "1235110",
    "end": "1240509"
  },
  {
    "text": "and then there are other scale across three AZ but in this case you can see",
    "start": "1240509",
    "end": "1246149"
  },
  {
    "text": "the line there that's a one each line will sponsor for one AZ right and then",
    "start": "1246149",
    "end": "1251279"
  },
  {
    "text": "you can see that one line actually is for people so that means actually this easy one not of capacity so we have that",
    "start": "1251279",
    "end": "1258809"
  },
  {
    "text": "easy we were able that we only the copper wire that is not able to scale up the machine for us so that indicates",
    "start": "1258809",
    "end": "1265619"
  },
  {
    "text": "that we cause the CBO bending and then actually overall the one of the atoms",
    "start": "1265619",
    "end": "1271470"
  },
  {
    "text": "stream service and cost us a job the solution for that happening is to increase the HEPA depending so that we",
    "start": "1271470",
    "end": "1278610"
  },
  {
    "text": "can have able to allocate enough capacity for all the AZ right so that's",
    "start": "1278610",
    "end": "1285269"
  },
  {
    "text": "the one use case study that shows that capacity pending is very important okay",
    "start": "1285269",
    "end": "1291799"
  },
  {
    "start": "1291000",
    "end": "1428000"
  },
  {
    "text": "now that we have a feasibility we have ownership and then we are planning the",
    "start": "1291799",
    "end": "1297360"
  },
  {
    "text": "next step is to actually do something right with the action part how do we",
    "start": "1297360",
    "end": "1302639"
  },
  {
    "text": "proactively save money to energy achieve lower efficiency and then optimization",
    "start": "1302639",
    "end": "1308279"
  },
  {
    "text": "go so I'm going to talk about three actions that we did to achieve the goal",
    "start": "1308279",
    "end": "1313799"
  },
  {
    "text": "so from the chargeback system that Michael mentioned that we have visibility of the different things right",
    "start": "1313799",
    "end": "1320669"
  },
  {
    "text": "including the instance type so instance type you know that different engines have a different cost and then we did a",
    "start": "1320669",
    "end": "1327690"
  },
  {
    "text": "project that my great from c3 instance type to c5 instance time we only so that's that it",
    "start": "1327690",
    "end": "1336120"
  },
  {
    "text": "away as instance that way but in this case that the migration actually took a",
    "start": "1336120",
    "end": "1341850"
  },
  {
    "text": "long time to complete because all the different service owner have to migrate",
    "start": "1341850",
    "end": "1346890"
  },
  {
    "text": "it manually and then they do is separated manually way and then you",
    "start": "1346890",
    "end": "1352230"
  },
  {
    "text": "involve third study past him because we are at the beginning with all your Syria",
    "start": "1352230",
    "end": "1357450"
  },
  {
    "text": "type and then c5 time is much efficient and then ganja and then a cheaper right",
    "start": "1357450",
    "end": "1363030"
  },
  {
    "text": "so that's the good thing about c5 and then that's why we might take a long a long time of other resource but we did",
    "start": "1363030",
    "end": "1370110"
  },
  {
    "text": "achieve very good efficacy game and in the future that we we are migrating we",
    "start": "1370110",
    "end": "1377940"
  },
  {
    "text": "are migrating I mean the service angel cake and Cuban a turkey would include",
    "start": "1377940",
    "end": "1383340"
  },
  {
    "text": "near the water we don't really need to worry about from so its own Apollo we don't really need to worry about the",
    "start": "1383340",
    "end": "1388860"
  },
  {
    "text": "instance type so this will make the migration much easier to say in the case",
    "start": "1388860",
    "end": "1394350"
  },
  {
    "text": "that we need to move to other instance type to save money then we have culminated and the things will be much",
    "start": "1394350",
    "end": "1400799"
  },
  {
    "text": "easier way so that's a good thing another thing is another example is to",
    "start": "1400799",
    "end": "1406820"
  },
  {
    "text": "look at the spot instance as well so as we know that spot instances it's much",
    "start": "1406820",
    "end": "1414419"
  },
  {
    "text": "cheaper than on-demand instance and then for us we we first identify the workload",
    "start": "1414419",
    "end": "1420450"
  },
  {
    "text": "that is suitable to run on the spot instance in that case that we can migrate them and that reduces the cost",
    "start": "1420450",
    "end": "1426660"
  },
  {
    "text": "of those servers so the second action we did is to maximize the auto scaling so",
    "start": "1426660",
    "end": "1433770"
  },
  {
    "start": "1428000",
    "end": "1467000"
  },
  {
    "text": "this is a graph that shows the number of parts of a service so it auto scale",
    "start": "1433770",
    "end": "1440480"
  },
  {
    "text": "according to the load in this case we specify by the CPU metrics so we utilize",
    "start": "1440480",
    "end": "1447000"
  },
  {
    "text": "the Kookaburra HPA the horizontal autoscaler so we define the HP a policy",
    "start": "1447000",
    "end": "1453480"
  },
  {
    "text": "that if the cpu is above 50% that we scale up and it's big old and we scale",
    "start": "1453480",
    "end": "1460169"
  },
  {
    "text": "down so that achieved this file export difference during the pig and in a downtime and then there's",
    "start": "1460169",
    "end": "1468460"
  },
  {
    "text": "another scalability is on the Noda level so we use our cursor autoscaler",
    "start": "1468460",
    "end": "1474850"
  },
  {
    "text": "so it's also open source CA that this",
    "start": "1474850",
    "end": "1480759"
  },
  {
    "text": "they say actually the other scale under on the node so whenever a part is",
    "start": "1480759",
    "end": "1486190"
  },
  {
    "text": "pending on the scheduling and then we there's no no no to available and the",
    "start": "1486190",
    "end": "1491649"
  },
  {
    "text": "other scaler kicking we actually have we actually implement a buffer way so that",
    "start": "1491649",
    "end": "1496990"
  },
  {
    "text": "is not actual wait for not able to schedule them it's a scale up we have a",
    "start": "1496990",
    "end": "1502389"
  },
  {
    "text": "buffer so that we can scale up earlier than actually did so one thing we want",
    "start": "1502389",
    "end": "1509860"
  },
  {
    "text": "to mention is auto scaling is a good way to achieve efficiency way but it also posed a challenge for planning right if",
    "start": "1509860",
    "end": "1518200"
  },
  {
    "text": "you can see in the past so I that let me see you can look at the pass right so in",
    "start": "1518200",
    "end": "1526119"
  },
  {
    "text": "this guide and so that is the graph for the service right you can see that we",
    "start": "1526119",
    "end": "1532029"
  },
  {
    "text": "have a pattern that on the doing actually doing whatever five days of a pig and then during the weekend so the",
    "start": "1532029",
    "end": "1539740"
  },
  {
    "text": "utilization is much lower so this pattern is pretty clear but if you look at the node so that's the test on the",
    "start": "1539740",
    "end": "1548679"
  },
  {
    "text": "node side so the no sided that's not actually curly have these patterns the reason for that is because we are using",
    "start": "1548679",
    "end": "1556419"
  },
  {
    "text": "the we are using kubernetes share platform echinacea perform we are multi",
    "start": "1556419",
    "end": "1561429"
  },
  {
    "text": "mixed workflow on the same platform so different part different servers actually have a different scaling",
    "start": "1561429",
    "end": "1568450"
  },
  {
    "text": "patterns away so when we do it being packing on the KS so the the pattern is",
    "start": "1568450",
    "end": "1573669"
  },
  {
    "text": "not clear so this cost actually make the capacity planning much harder so we",
    "start": "1573669",
    "end": "1580059"
  },
  {
    "text": "don't really not really not able to predict what kind of usage pattern that",
    "start": "1580059",
    "end": "1586029"
  },
  {
    "text": "from different service and so there's something that we are going to go get our data and see what's the best model",
    "start": "1586029",
    "end": "1591759"
  },
  {
    "text": "to do the prediction okay next things there's actually their third",
    "start": "1591759",
    "end": "1598620"
  },
  {
    "text": "action every Jewish to utilize the quota management so as we know that KS have",
    "start": "1598620",
    "end": "1604950"
  },
  {
    "text": "the built-in quota management to make the big I mean the whole time and",
    "start": "1604950",
    "end": "1613020"
  },
  {
    "text": "gestures by namespace way and then because we have project mapping mantle",
    "start": "1613020",
    "end": "1618240"
  },
  {
    "text": "one to the identity metro namespace so we can easily to control that what project the quota for each project right",
    "start": "1618240",
    "end": "1625680"
  },
  {
    "text": "so this is an example that you can do on the actual ml file that you can specify on the communal platform and we can",
    "start": "1625680",
    "end": "1633480"
  },
  {
    "text": "specify how many cpu we can advocate on this namespace so for example we have",
    "start": "1633480",
    "end": "1640650"
  },
  {
    "text": "some development books workload away you can put in a namespace so that is 201",
    "start": "1640650",
    "end": "1649050"
  },
  {
    "text": "there and then if there's one of those another capacity then it's not the SOA",
    "start": "1649050",
    "end": "1655110"
  },
  {
    "text": "for that service world oh it's not as important as the production workflow so",
    "start": "1655110",
    "end": "1660690"
  },
  {
    "text": "there's something that the coder manager helped us a lot okay so with that hand back to Michael",
    "start": "1660690",
    "end": "1669270"
  },
  {
    "text": "to have a conclusion to the talk thank you",
    "start": "1669270",
    "end": "1673790"
  },
  {
    "text": "I think they're working okay perfect so can you still hear me okay so two",
    "start": "1686690",
    "end": "1696950"
  },
  {
    "text": "things I want to call out is before I get into the takeaways I think when we move to Cuban Aires one of the first",
    "start": "1696950",
    "end": "1702979"
  },
  {
    "text": "things we realized is everything is auto-scaling at this point there is no way we could be like running multiple",
    "start": "1702979",
    "end": "1709279"
  },
  {
    "text": "clusters and per use case because operationally that's just much harder for us so we made a decision",
    "start": "1709279",
    "end": "1714529"
  },
  {
    "text": "collectively to have a shared cluster the intent with that was to make sure that as we are scheduling workloads on",
    "start": "1714529",
    "end": "1722869"
  },
  {
    "text": "it we have a more heterogeneous collection of workloads running on it and we can focus more on packing them",
    "start": "1722869",
    "end": "1728059"
  },
  {
    "text": "more effectively at the same time leaving enough Headroom for the Kuban a nice cluster to grow or scale down we've",
    "start": "1728059",
    "end": "1734090"
  },
  {
    "text": "had couple of incidents in the past where if they keep it too tightly we have had run into risks where pause",
    "start": "1734090",
    "end": "1739309"
  },
  {
    "text": "would want to be scheduled and the clusters just don't scale up more effectively the reason we showed that said zero is that no matter how much of",
    "start": "1739309",
    "end": "1745369"
  },
  {
    "text": "our planning you do there is no way you can always have infinite resources from your cloud provider there's always some",
    "start": "1745369",
    "end": "1751309"
  },
  {
    "text": "gap or the other and that's something you should always plan for and so that was like one of the key learnings we had",
    "start": "1751309",
    "end": "1757820"
  },
  {
    "text": "as part of that with that like I think the larger things for us was that it was",
    "start": "1757820",
    "end": "1765590"
  },
  {
    "text": "very important none of this would have been possible if we didn't have a good way of understanding how to tie",
    "start": "1765590",
    "end": "1770720"
  },
  {
    "text": "ownership or identity to different aspects of our entire cloud footprint it",
    "start": "1770720",
    "end": "1777139"
  },
  {
    "text": "was very important to kind of group all of those things regardless of ec2 instances or cube entities pods get a",
    "start": "1777139",
    "end": "1782899"
  },
  {
    "text": "clearer view of how it's actually distributed across the cloud footprint and part of that is only possible",
    "start": "1782899",
    "end": "1788419"
  },
  {
    "text": "because we actually invested over two plus years and getting that identity system integrated with multiple",
    "start": "1788419",
    "end": "1794450"
  },
  {
    "text": "platforms within the company today that has enabled us to like query and a group",
    "start": "1794450",
    "end": "1800059"
  },
  {
    "text": "and do certain parts of planning simply because we have a canonical way of",
    "start": "1800059",
    "end": "1805700"
  },
  {
    "text": "identifying anything and everything running on the cloud footprint literally there cannot be any instance or pod",
    "start": "1805700",
    "end": "1811039"
  },
  {
    "text": "running or even a bucket filled without that particular unique identifier in place so this is a must I mean this is",
    "start": "1811039",
    "end": "1818779"
  },
  {
    "text": "like the biggest learning we could recommend and I know people have liked use or try to do this in different",
    "start": "1818779",
    "end": "1824960"
  },
  {
    "text": "aspects by using tags and other features which the cloud providers provide I'll be honest like none of them actually",
    "start": "1824960",
    "end": "1830539"
  },
  {
    "text": "work we have tried that and it's just over time they get pretty stale names",
    "start": "1830539",
    "end": "1836240"
  },
  {
    "text": "change and all of a sudden you have to write regex is to truly understand which clusters make up who and that is",
    "start": "1836240",
    "end": "1841880"
  },
  {
    "text": "something we just decided it's not worth it so investing time into defining aspect how can you like model your cloud",
    "start": "1841880",
    "end": "1848510"
  },
  {
    "text": "in a way where you understand what region means or what a cell or a means and how do you want to like fan out from",
    "start": "1848510",
    "end": "1853970"
  },
  {
    "text": "there from clusters to apps to pods was extremely beneficial for us and we think",
    "start": "1853970",
    "end": "1860480"
  },
  {
    "text": "that is something we can never er definitely contribute back to the community as a common spec to identify",
    "start": "1860480",
    "end": "1866029"
  },
  {
    "text": "resources within the cloud the second thing is we realized that it was",
    "start": "1866029",
    "end": "1871850"
  },
  {
    "text": "literally not a tools problem it is literally a cultural problem no matter how much of our tools we build if those",
    "start": "1871850",
    "end": "1879230"
  },
  {
    "text": "systems were not integrated and if the engineers themselves really did not adopt a lot of these best practices",
    "start": "1879230",
    "end": "1886159"
  },
  {
    "text": "there's no way we can get better visibility in don't know who's running what in our infrastructure unfortunately",
    "start": "1886159",
    "end": "1891620"
  },
  {
    "text": "we have like so much of data I cannot really show how much on the slide but today literally from our CFO to an",
    "start": "1891620",
    "end": "1899419"
  },
  {
    "text": "engineering manager to anyone within the company can drill up and down into understanding our cloud footprint in all",
    "start": "1899419",
    "end": "1905570"
  },
  {
    "text": "aspects of resources and everything and this is only possible because it was important for us to educate what these",
    "start": "1905570",
    "end": "1911539"
  },
  {
    "text": "things meant in a very friendly and in a very user friendly manner and this",
    "start": "1911539",
    "end": "1917899"
  },
  {
    "text": "involved us again like multiple years of investment trying to like educate about the chargeback system or about what",
    "start": "1917899",
    "end": "1924200"
  },
  {
    "text": "identity actually means within the company and then subsequently generating reports notifying people saying that",
    "start": "1924200",
    "end": "1930289"
  },
  {
    "text": "you've used XYZ resources and investing into a single pane of glass new Y as",
    "start": "1930289",
    "end": "1935779"
  },
  {
    "text": "well where if you're starting a new project at Pinterest today you'll actually go through that UI first which",
    "start": "1935779",
    "end": "1941240"
  },
  {
    "text": "will ask you a bunch of questions before your entire project is actually set up and as part of that all the identifiers",
    "start": "1941240",
    "end": "1946850"
  },
  {
    "text": "are set up and they are like distributed across our entire platform so clearly that was a huge change for people in the",
    "start": "1946850",
    "end": "1954110"
  },
  {
    "text": "who would just use the CLI and spin up thousands of instances and yes I'm sure man it must have happened for multiple",
    "start": "1954110",
    "end": "1961010"
  },
  {
    "text": "people here and yes we have spent hundred thousand dollars or more just by you know losing or getting into that run",
    "start": "1961010",
    "end": "1967610"
  },
  {
    "text": "so this is a big thing and these things do take time but when you build the right tools and systems and you have the",
    "start": "1967610",
    "end": "1974059"
  },
  {
    "text": "right guard rails in place I think we can really make a difference in terms of and moving into the space I think with",
    "start": "1974059",
    "end": "1981950"
  },
  {
    "text": "that finally I would just like to say thank you thank you for spending the time with us today and yes if you do",
    "start": "1981950",
    "end": "1989450"
  },
  {
    "start": "1983000",
    "end": "2008000"
  },
  {
    "text": "have any questions we're happy to answer offline and even show some other information we have but yeah thanks a",
    "start": "1989450",
    "end": "1997399"
  },
  {
    "text": "lot [Applause]",
    "start": "1997399",
    "end": "2006359"
  }
]