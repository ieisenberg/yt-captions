[
  {
    "text": "uh okay cool it's 11 o'clock um I think we'll go ahead and get started um sorry",
    "start": "399",
    "end": "7120"
  },
  {
    "text": "before we begin uh I just have one thing I need to do real quick um I've been",
    "start": "7120",
    "end": "13160"
  },
  {
    "text": "working on this uh custom controller uh I was kind of hoping to have it uh you",
    "start": "13160",
    "end": "18320"
  },
  {
    "text": "know done before now uh but I didn't so uh if you don't mind I'm just going to take a couple minutes and deploy this",
    "start": "18320",
    "end": "23920"
  },
  {
    "text": "thing real quick um cool",
    "start": "23920",
    "end": "28960"
  },
  {
    "text": "uh Ah that's going to be a problem",
    "start": "28960",
    "end": "34719"
  },
  {
    "text": "um yeah live demos right",
    "start": "34719",
    "end": "40040"
  },
  {
    "text": "um see if this works",
    "start": "56440",
    "end": "61920"
  },
  {
    "text": "cool uh we're good um sorry uh this is a thing I've been working on it's uh",
    "start": "65080",
    "end": "70320"
  },
  {
    "text": "supposed to help me out during conferences like this um I called it a uh con job um it's kind of like a crown",
    "start": "70320",
    "end": "77159"
  },
  {
    "text": "job but it's for conferences anybody thank you thank you",
    "start": "77159",
    "end": "82280"
  },
  {
    "text": "thank you all right um yeah uh all right let's go ahead and",
    "start": "82280",
    "end": "87320"
  },
  {
    "text": "get started um uh my name's David uh I am a research scientist at applied",
    "start": "87320",
    "end": "93159"
  },
  {
    "text": "Computing research Labs um I'm going to be talking today about uh running large scale scheduling simulations using",
    "start": "93159",
    "end": "100479"
  },
  {
    "text": "virtual cuet um so uh let's go ahead and jump in I want to give you a quick",
    "start": "100479",
    "end": "106719"
  },
  {
    "text": "overview of what applied Computing is uh so we're a small business doing research and development in distributed systems",
    "start": "106719",
    "end": "114280"
  },
  {
    "text": "um I'm particularly interested in scheduling and modeling and optimization uh I've been doing this sort of in",
    "start": "114280",
    "end": "120560"
  },
  {
    "text": "industry for the last eight or nine years uh earlier this year I decided you know I kind of uh my background's in",
    "start": "120560",
    "end": "126799"
  },
  {
    "text": "Academia um really passionate about open source I kind of want to take the stuff I've been doing uh and not do it for a",
    "start": "126799",
    "end": "132400"
  },
  {
    "text": "company but kind of like put it out there into the open um so that's what applied computing's been doing it's been",
    "start": "132400",
    "end": "138200"
  },
  {
    "text": "a great journey so far um I'm sure some of you know uh when you're running a",
    "start": "138200",
    "end": "143319"
  },
  {
    "text": "small business uh you have to wear a lot of different hats um so uh this is my",
    "start": "143319",
    "end": "148360"
  },
  {
    "text": "developer hat uh uh uh today I want to talk to you about",
    "start": "148360",
    "end": "154480"
  },
  {
    "text": "a project I've been building for the last few months uh called simcube um this is a project that uh I initially uh",
    "start": "154480",
    "end": "161920"
  },
  {
    "text": "started just kind of for myself it was a tool that I thought I was going to need in order to uh get to my real goal",
    "start": "161920",
    "end": "167599"
  },
  {
    "text": "around scheduling and uh optimization and these sorts of things um but as I started chatting with more and more",
    "start": "167599",
    "end": "173360"
  },
  {
    "text": "folks I'm like oh uh this is something that other people actually care about and are interested in as well uh maybe",
    "start": "173360",
    "end": "180239"
  },
  {
    "text": "this can be like a thing on its own um so uh to hopefully motivate this talk a",
    "start": "180239",
    "end": "186799"
  },
  {
    "text": "little bit I want to answer the question why simulation uh I want to talk a",
    "start": "186799",
    "end": "192000"
  },
  {
    "text": "little bit about what kind of simulation I actually mean because that can uh mean a lot of different things um and to do",
    "start": "192000",
    "end": "197720"
  },
  {
    "text": "that I'm going to present four different user stories um so uh first you can",
    "start": "197720",
    "end": "204000"
  },
  {
    "text": "imagine maybe you're an infrastructure engineer uh maybe there was an incident",
    "start": "204000",
    "end": "209040"
  },
  {
    "text": "or an outage on one of your kubernetes clusters last night uh you I don't know",
    "start": "209040",
    "end": "214480"
  },
  {
    "text": "you're not exactly sure what went wrong um you were able to like mitigate it you",
    "start": "214480",
    "end": "219640"
  },
  {
    "text": "uh deployed some stuff uh it stopped the bleeding uh but you're not really sure",
    "start": "219640",
    "end": "225560"
  },
  {
    "text": "like if that's a good long-term solution you're not even entirely sure what the problem is wouldn't it be great if you",
    "start": "225560",
    "end": "231000"
  },
  {
    "text": "could just capture a trace of all of the events that happened during that incident uh replay it on your local",
    "start": "231000",
    "end": "237400"
  },
  {
    "text": "laptop uh go in dig into the logs dig into the metrics uh and really understand the problem um that would be",
    "start": "237400",
    "end": "244040"
  },
  {
    "text": "awesome right uh also wouldn't it be great if you're like okay I've got this fix uh I think it's going to work um but",
    "start": "244040",
    "end": "251439"
  },
  {
    "text": "I'm not 100% sure uh so wouldn't it be great if you could like then take that",
    "start": "251439",
    "end": "256959"
  },
  {
    "text": "same simulation replay it with your fix supplied and then demonstrate to your manager or to whoever that like hey look",
    "start": "256959",
    "end": "264120"
  },
  {
    "text": "this actually did solve the problem if we had had this in place then we wouldn't have had the incident um that",
    "start": "264120",
    "end": "269320"
  },
  {
    "text": "would be really cool um so second user story imagine that you're maybe a cicd engineer uh",
    "start": "269320",
    "end": "276160"
  },
  {
    "text": "you're responsible for all of the pipelines uh deploying to all your different clusters um maybe you want to",
    "start": "276160",
    "end": "283360"
  },
  {
    "text": "make sure that people aren't introducing regressions into uh your kubernetes",
    "start": "283360",
    "end": "289000"
  },
  {
    "text": "config especially those darn INF Engineers uh and so wouldn't it be cool",
    "start": "289000",
    "end": "294560"
  },
  {
    "text": "if as a step in your CI pipeline you could just run a simulation and observe",
    "start": "294560",
    "end": "299639"
  },
  {
    "text": "erve particular metrics to say that hey look uh after you deploy this change to your controller or to uh your uh",
    "start": "299639",
    "end": "307880"
  },
  {
    "text": "kubernetes config uh things are still behaving the way that we want them to",
    "start": "307880",
    "end": "313080"
  },
  {
    "text": "cool right uh maybe you're a guy like me uh you're really interested in scheduling um you've heard about these",
    "start": "313080",
    "end": "319280"
  },
  {
    "text": "like scheduler plugins uh Cube Schuler has like all these different parameters you can change the parameters uh you're",
    "start": "319280",
    "end": "326000"
  },
  {
    "text": "not really sure if they like they're they're hard to reason about like if you",
    "start": "326000",
    "end": "331199"
  },
  {
    "text": "make a change here does that actually like improve your bin packing efficiency or whatever other metrics you care about",
    "start": "331199",
    "end": "337319"
  },
  {
    "text": "uh so wouldn't it be great if you could just run a simulation on your laptop tweak these parameters and see how your",
    "start": "337319",
    "end": "344039"
  },
  {
    "text": "uh cluster efficiency changes again using real production data um maybe take that a step further maybe you even are",
    "start": "344039",
    "end": "349919"
  },
  {
    "text": "doing like hyperparameter optimization where you feed this whole thing this whole simulation into a ml engine that",
    "start": "349919",
    "end": "357120"
  },
  {
    "text": "actually figures out the best scheduling parameters for you that'd be super cool um or maybe you're a ml engineer uh",
    "start": "357120",
    "end": "363960"
  },
  {
    "text": "you've got all of these batch jobs that you need to deploy um kubernetes doesn't have great Primitives for running batch",
    "start": "363960",
    "end": "371240"
  },
  {
    "text": "jobs especially around like gang scheduling or uh some of these like really important ml uh you know if",
    "start": "371240",
    "end": "377840"
  },
  {
    "text": "you're running a llm or diffusion model or whatever uh and so you've heard of these projects you've heard of a volcano",
    "start": "377840",
    "end": "384720"
  },
  {
    "text": "which is an alternative scheduler for these types of batch workloads you've heard of unicorn uh there was a talk",
    "start": "384720",
    "end": "391560"
  },
  {
    "text": "yesterday about Q which is introducing some New Primitives into the kubernetes job and you're like I want to try out",
    "start": "391560",
    "end": "397680"
  },
  {
    "text": "these different things and just see how they work uh before I deploy these into",
    "start": "397680",
    "end": "404560"
  },
  {
    "text": "one of my clusters um and wouldn't that be great if you could just kind of try out all of these things on your laptop",
    "start": "404560",
    "end": "409919"
  },
  {
    "text": "again using data from your actual production systems that'd be super cool um so that's what we're going to be",
    "start": "409919",
    "end": "416120"
  },
  {
    "text": "talking about today we're really focused on simulating the bits of your cluster uh that are sort of involved in like",
    "start": "416120",
    "end": "422800"
  },
  {
    "text": "your control plane and all of your custom controllers and objects so we're not so much concerned with simulating",
    "start": "422800",
    "end": "428319"
  },
  {
    "text": "the applications themselves uh so this is a highle architecture diagram of the uh of the",
    "start": "428319",
    "end": "437280"
  },
  {
    "text": "project I've been working on uh called simcube um there's kind of a lot going on here uh we're going to dig into this",
    "start": "437280",
    "end": "443599"
  },
  {
    "text": "a little bit and hopefully like uh explain a little more what's going on um I want to start with the",
    "start": "443599",
    "end": "449960"
  },
  {
    "text": "uh most important part of this diagram is me hi I'm the problem it's me any any",
    "start": "449960",
    "end": "458680"
  },
  {
    "text": "Taylor Swift fans no no okay um thank you thank you uh okay actually that's",
    "start": "458680",
    "end": "464720"
  },
  {
    "text": "just maybe a little bit self centered uh let's swap that out this is you um",
    "start": "464720",
    "end": "470039"
  },
  {
    "text": "hopefully on the last slide I was able to motivate uh simulation useful for",
    "start": "470039",
    "end": "476120"
  },
  {
    "text": "everybody uh regardless of what your role in the company is regardless of",
    "start": "476120",
    "end": "481680"
  },
  {
    "text": "what you're doing simulation can be helpful uh there's something missing here oh you'll need a fun",
    "start": "481680",
    "end": "488680"
  },
  {
    "text": "hat cool uh so simcube has six different components which we're going to dig into",
    "start": "488680",
    "end": "495680"
  },
  {
    "text": "um and these are highlighted in Orange on this slide uh again sort of going from the previous Slide the most",
    "start": "495680",
    "end": "501639"
  },
  {
    "text": "important bit here is the way that you as a developer are interacting with the",
    "start": "501639",
    "end": "506800"
  },
  {
    "text": "system so we've got a uh command line utility called SK control or Scuttle if you prefer uh that allows you to both",
    "start": "506800",
    "end": "515360"
  },
  {
    "text": "talk to your production clusters and export data from them and then replay that data on a simulated cluster um",
    "start": "515360",
    "end": "522880"
  },
  {
    "text": "going clockwise around the left uh we have this component that runs in your production clusters called SK Tracer uh",
    "start": "522880",
    "end": "529440"
  },
  {
    "text": "its job is literally just to sit there and collect data um and then when you as the user Say Hey I want to actually do",
    "start": "529440",
    "end": "536519"
  },
  {
    "text": "some work with this data uh you can call Scuttle export it will talk to SK Tracer",
    "start": "536519",
    "end": "541720"
  },
  {
    "text": "and SK Tracer will save a trace to some persistent storage okay um and then once you're",
    "start": "541720",
    "end": "550279"
  },
  {
    "text": "like okay now I want to actually do something with it uh you can do Scuttle run um this talks to some components on",
    "start": "550279",
    "end": "557120"
  },
  {
    "text": "your simulated cluster uh this cluster can be for example a kind cluster that's running on your laptop um it could be",
    "start": "557120",
    "end": "564360"
  },
  {
    "text": "some other cluster that's maybe running in a Dev environment um on your simulated cluster",
    "start": "564360",
    "end": "570079"
  },
  {
    "text": "we've got a few different things that are running uh SK control is a standard kubernetes controller uh it's just",
    "start": "570079",
    "end": "576640"
  },
  {
    "text": "watching for a simulation custom resource to get posted to the cluster um",
    "start": "576640",
    "end": "581680"
  },
  {
    "text": "that custom resource when it sees that it's going to spin up a driver and the driver's job is to download the trace of",
    "start": "581680",
    "end": "588560"
  },
  {
    "text": "the simulation and replay it on your simulation cluster now the reason why this is",
    "start": "588560",
    "end": "595519"
  },
  {
    "text": "scalable the reason why it's possible is these last two components uh we've got skv node and SK Cloud proov uh these are",
    "start": "595519",
    "end": "603440"
  },
  {
    "text": "components that uh sort of mock out everything else in your cluster um and",
    "start": "603440",
    "end": "609920"
  },
  {
    "text": "so let's dive in a little bit into what these look like so skv node is a virtual",
    "start": "609920",
    "end": "615600"
  },
  {
    "text": "cuet based node implementation um if you're not familiar virtual cuet is a project that uh",
    "start": "615600",
    "end": "623640"
  },
  {
    "text": "implements the cuet API uh but it allows you to wrap kind of whatever you want uh",
    "start": "623640",
    "end": "631200"
  },
  {
    "text": "behind that API so there are virtual cuet implementations for things like Azure batch uh AWS Lambda and it allows",
    "start": "631200",
    "end": "639040"
  },
  {
    "text": "you to treat these things as nodes in your kubernetes cluster um in our case uh we're not wrapping anything uh we're",
    "start": "639040",
    "end": "645720"
  },
  {
    "text": "just pretending like we're a node uh skv node is going to sit there it's going to listen for pod objects when it gets a",
    "start": "645720",
    "end": "652160"
  },
  {
    "text": "pod object it's going to say hey your pod's running but it doesn't do anything there's no Docker there's no containers",
    "start": "652160",
    "end": "658639"
  },
  {
    "text": "there's nothing and so you can spin up hundreds of thousands of these things just on a local laptop it's very",
    "start": "658639",
    "end": "663880"
  },
  {
    "text": "lightweight um cool thing here is that the node properties that uh you're",
    "start": "663880",
    "end": "669519"
  },
  {
    "text": "simulating are configurable so so you can take a uh you can just uh do Cube",
    "start": "669519",
    "end": "675200"
  },
  {
    "text": "cuttle export and then your node definition from your production cluster you can take that config and you can",
    "start": "675200",
    "end": "681800"
  },
  {
    "text": "apply it into your simulated cluster and voila now your simulated nodes look",
    "start": "681800",
    "end": "687120"
  },
  {
    "text": "exactly like the nodes in your production cluster um so this is pretty cool um one other thing that is",
    "start": "687120",
    "end": "692959"
  },
  {
    "text": "important for certain types of simulations is skv node will watch uh",
    "start": "692959",
    "end": "698200"
  },
  {
    "text": "annotations on your simulated pods to control their life cycle um so you can you can set a particular annotation on",
    "start": "698200",
    "end": "704720"
  },
  {
    "text": "the Pod that said this pod ran for 115 seconds and skv node will report that",
    "start": "704720",
    "end": "710040"
  },
  {
    "text": "that pod's running for 115 seconds during the simulation and then it will report that the Pod terminated um we'll",
    "start": "710040",
    "end": "715839"
  },
  {
    "text": "see why that's useful in a couple slides uh the other component here uh that",
    "start": "715839",
    "end": "721720"
  },
  {
    "text": "makes this all sort of possible is SK Cloud Prov um this is a grpc cloud provider for cluster autoscaler um so if",
    "start": "721720",
    "end": "729360"
  },
  {
    "text": "you're not familiar uh cluster autoscaler interfaces with you know all the different Cloud providers but it also provides a custom interface where",
    "start": "729360",
    "end": "735720"
  },
  {
    "text": "you can write your own um and so here we've written our own cloud provider uh all it does is it talks to the",
    "start": "735720",
    "end": "741800"
  },
  {
    "text": "deployment managing skv node uh and it scales that deployment up and down so you can see like oh my uh my",
    "start": "741800",
    "end": "749399"
  },
  {
    "text": "my cluster has increased or decreased the number of nodes that are running there okay um one sort of uh this is",
    "start": "749399",
    "end": "758160"
  },
  {
    "text": "something that not a lot of folks knew about it's a newer feature in kubernetes uh but I think it's really cool uh",
    "start": "758160",
    "end": "763440"
  },
  {
    "text": "there's a pod deletion cost feature for the replica set controller um what this does is it allows you to set an",
    "start": "763440",
    "end": "769360"
  },
  {
    "text": "annotation on pods and the replica set controller will delete pods that have lower cost first and so the way that",
    "start": "769360",
    "end": "775959"
  },
  {
    "text": "this works is you know cluster autoscaler has to be able to specifically terminate uh you know this",
    "start": "775959",
    "end": "782120"
  },
  {
    "text": "node uh it doesn't want to terminate nodes that have running pods on it and so the way that we Implement that in our simulated cluster is we annotate the",
    "start": "782120",
    "end": "789519"
  },
  {
    "text": "nodes or the pods that we want to terminate with this pod deletion cost okay uh these slides are available",
    "start": "789519",
    "end": "797760"
  },
  {
    "text": "online um there's a bunch of clickable links on here so if you want to download these after the talk uh or right now and",
    "start": "797760",
    "end": "803560"
  },
  {
    "text": "go get some more information you can do that as well cool um so that's sort of on the",
    "start": "803560",
    "end": "810240"
  },
  {
    "text": "simulation side now I want to take a look at the uh production side what is actually going on inside of SK Tracer um",
    "start": "810240",
    "end": "817839"
  },
  {
    "text": "so SK Tracer literally is just a pod that sits on your production cluster and it puts a watch on the API server uh for",
    "start": "817839",
    "end": "824399"
  },
  {
    "text": "resources and pods um you can configure it to watch any type of resource that you want uh deployments replica sets",
    "start": "824399",
    "end": "830279"
  },
  {
    "text": "staple sets whatever you want um you can also configure it to watch any sort of",
    "start": "830279",
    "end": "835560"
  },
  {
    "text": "custom resource so uh you know if you're running volcano or if you've got your own custom controller and crd you can",
    "start": "835560",
    "end": "841120"
  },
  {
    "text": "configure SK Tracer to watch those as well uh and all it's doing is It's recording a timeline of important events",
    "start": "841120",
    "end": "847600"
  },
  {
    "text": "um what do I mean by important events well these are anytime that uh these objects change in a way that might be",
    "start": "847600",
    "end": "854880"
  },
  {
    "text": "relevant to the simulation so I've got a couple examples here um on the left you can see that uh there's a deployment uh",
    "start": "854880",
    "end": "861839"
  },
  {
    "text": "maybe the deployment is created at Time Zero uh shortly thereafter you know it spins up a a replica set underneath the",
    "start": "861839",
    "end": "868519"
  },
  {
    "text": "hook and then that replica set spins up a pod um that pod pod a runs for a short",
    "start": "868519",
    "end": "874120"
  },
  {
    "text": "period of time um and then maybe something a human operator or HPA",
    "start": "874120",
    "end": "879320"
  },
  {
    "text": "decides uh oh this deployment needs to scale up it increases the number of replicas uh and then it creates two more",
    "start": "879320",
    "end": "885839"
  },
  {
    "text": "pods pods B and C so SK Tracer what it's watching for is it observes that the",
    "start": "885839",
    "end": "891120"
  },
  {
    "text": "deployment was created uh it then observes that pod a was started and it's able to attach pod a back to that",
    "start": "891120",
    "end": "898199"
  },
  {
    "text": "deployment um and then it observes that the replicas for the deployment changed uh",
    "start": "898199",
    "end": "904160"
  },
  {
    "text": "sometime later uh it records that event and it also records that uh pods B and C",
    "start": "904160",
    "end": "910000"
  },
  {
    "text": "got attached back to the deployment as well um and so then it's able to take all this stuff and replay it later on",
    "start": "910000",
    "end": "916800"
  },
  {
    "text": "another example here is maybe you've got a Cron job it's running things periodically uh and so here we've got an",
    "start": "916800",
    "end": "922720"
  },
  {
    "text": "example pod one runs for some period of time then pod two runs then pod three",
    "start": "922720",
    "end": "928079"
  },
  {
    "text": "runs uh this is where your life cycle annotations become important because when you want to simulate a crown job uh",
    "start": "928079",
    "end": "934040"
  },
  {
    "text": "these aren't long running things so you need to know if you're going to run the simulation you need to know this pod started and then it ended uh and so",
    "start": "934040",
    "end": "941440"
  },
  {
    "text": "you're able to uh SK Tracer is able to capture that life cycle information and record it so that it can be fed back",
    "start": "941440",
    "end": "947800"
  },
  {
    "text": "into our simulation okay cool uh so let's move",
    "start": "947800",
    "end": "956440"
  },
  {
    "text": "on um",
    "start": "956440",
    "end": "960600"
  },
  {
    "text": "okay uh this is this is a little embarrassing I I just got myself paged",
    "start": "964519",
    "end": "970639"
  },
  {
    "text": "in the middle of my talk um okay hang on uh saying something one",
    "start": "970639",
    "end": "977399"
  },
  {
    "text": "second uh saying something about uh there's a bunch of PODS and pending uh this doesn't really seem like um my",
    "start": "977399",
    "end": "985199"
  },
  {
    "text": "issue uh I'm going to sorry I'm going to go ahead and just reassign this to one of our infrastructure Engineers uh maybe",
    "start": "985199",
    "end": "992120"
  },
  {
    "text": "they can maybe they can deal with it",
    "start": "992120",
    "end": "998000"
  },
  {
    "text": "on [Music]",
    "start": "999399",
    "end": "1004350"
  },
  {
    "text": "on sorry I saw like several of you like visibly Flinch I hope I didn't I hope I",
    "start": "1004680",
    "end": "1010040"
  },
  {
    "text": "didn't like uh impose any undo trauma here uh one",
    "start": "1010040",
    "end": "1015759"
  },
  {
    "text": "sec um okay hi uh I'm David uh I'm one of the infrastructure engineers at",
    "start": "1016920",
    "end": "1023360"
  },
  {
    "text": "applied Computing uh this is my infrastructure engineering hat um I just got paged for this thing uh as de side",
    "start": "1023360",
    "end": "1032280"
  },
  {
    "text": "I'm really frustrated with our developer like he just kind of YOLO stuff out to production he doesn't test anything um",
    "start": "1032280",
    "end": "1038839"
  },
  {
    "text": "so anyways uh we're going to have a chat after this is over but maybe this is an opportunity to uh kind of uh talk about",
    "start": "1038839",
    "end": "1047160"
  },
  {
    "text": "uh some of uh the tools that I've been discussing",
    "start": "1047160",
    "end": "1052760"
  },
  {
    "text": "here um let me",
    "start": "1052760",
    "end": "1056960"
  },
  {
    "text": "see let me see if this is working it may not be working that would be",
    "start": "1058080",
    "end": "1065600"
  },
  {
    "text": "disappointing let me switch over to",
    "start": "1066720",
    "end": "1071799"
  },
  {
    "text": "our oh you know what I don't have",
    "start": "1073640",
    "end": "1079280"
  },
  {
    "text": "V port forwarding setup",
    "start": "1079280",
    "end": "1085200"
  },
  {
    "text": "probably NOP it's already working hey live demos",
    "start": "1086000",
    "end": "1091400"
  },
  {
    "text": "right um okay let me see maybe the grafana dashboard isn't working let me",
    "start": "1091400",
    "end": "1097919"
  },
  {
    "text": "see what else I can show you here uh that isn't graffa",
    "start": "1097919",
    "end": "1104320"
  },
  {
    "text": "um",
    "start": "1107320",
    "end": "1110320"
  },
  {
    "text": "okay uh so it turns out actually the controller that I deployed at the beginning of the talk is not running",
    "start": "1115600",
    "end": "1120919"
  },
  {
    "text": "anything at all so uh I don't know what's up with our pager Duty config",
    "start": "1120919",
    "end": "1127000"
  },
  {
    "text": "um let's do this I'm going to skip the live demo um and I'm going to talk a",
    "start": "1127000",
    "end": "1132159"
  },
  {
    "text": "little bit about what you might have seen uh if the demo were working um so",
    "start": "1132159",
    "end": "1139480"
  },
  {
    "text": "uh as I mentioned um we do have a command line",
    "start": "1139480",
    "end": "1144799"
  },
  {
    "text": "utility that uh allows you to talk to the various pods here um let me just",
    "start": "1144799",
    "end": "1153760"
  },
  {
    "text": "see let me just see uh if I can figure out what's going on one",
    "start": "1157559",
    "end": "1164520"
  },
  {
    "text": "second",
    "start": "1167240",
    "end": "1170240"
  },
  {
    "text": "okay um what I'm going to do actually uh we're going to skip all of that uh we're",
    "start": "1176600",
    "end": "1182080"
  },
  {
    "text": "just going to go back to uh this diagram here I'm going to tell you a little bit about what's going on inside of SK",
    "start": "1182080",
    "end": "1187840"
  },
  {
    "text": "control and SK driver um so what's happening here is when uh you post this",
    "start": "1187840",
    "end": "1194400"
  },
  {
    "text": "custom resource into the uh into to your simulated cluster um we've got a",
    "start": "1194400",
    "end": "1202600"
  },
  {
    "text": "controller that's watching for this thing it does some initial config and then it launches this driver uh the way",
    "start": "1202600",
    "end": "1208080"
  },
  {
    "text": "that the driver works is uh it's got two components um it's got a simulation",
    "start": "1208080",
    "end": "1213840"
  },
  {
    "text": "Runner um and the runner itself is uh it downloads the trace object that we",
    "start": "1213840",
    "end": "1219200"
  },
  {
    "text": "talked about previously um and then it uh replays that Trace uh so it's just",
    "start": "1219200",
    "end": "1225840"
  },
  {
    "text": "able to look at all of the all of the data in the trace and um apply it to the",
    "start": "1225840",
    "end": "1232720"
  },
  {
    "text": "API server in your simulated cluster um the other bit that is part of the SK",
    "start": "1232720",
    "end": "1238440"
  },
  {
    "text": "driver is the it's it installs a mutation web hook um and the reason for",
    "start": "1238440",
    "end": "1243679"
  },
  {
    "text": "that is whenever pods get created in the simulated cluster I want to redirect",
    "start": "1243679",
    "end": "1248720"
  },
  {
    "text": "them so that they're uh getting replayed onto uh the simulated nodes um and so",
    "start": "1248720",
    "end": "1253799"
  },
  {
    "text": "your mutating web hook uh it intercepts all of the pods checks to see if it's part of the uh simulation and then it",
    "start": "1253799",
    "end": "1261840"
  },
  {
    "text": "applies particular labels tolerations annotations um and then it also is applying those pod life cycle",
    "start": "1261840",
    "end": "1267799"
  },
  {
    "text": "annotations as well and so um it's able to sort of track uh throughout the life",
    "start": "1267799",
    "end": "1274279"
  },
  {
    "text": "cycle of your simulation you know these pods belong to this simulated object they're supposed to run for this period",
    "start": "1274279",
    "end": "1279760"
  },
  {
    "text": "of time and all of that information just kind of seamlessly happens in the cluster um so this is pretty cool um let",
    "start": "1279760",
    "end": "1288440"
  },
  {
    "text": "me see uh if there's one other thing I can show you here uh cool so I want to show",
    "start": "1288440",
    "end": "1295480"
  },
  {
    "text": "you uh what the trace object actually looks like um so when you run Scuttle",
    "start": "1295480",
    "end": "1300559"
  },
  {
    "text": "export uh this is what this is what gets saved um so uh here we have uh at the",
    "start": "1300559",
    "end": "1308640"
  },
  {
    "text": "beginning uh we're just saving sort of the config that uh we configured SK Tracer with um and then the important",
    "start": "1308640",
    "end": "1315760"
  },
  {
    "text": "bits here uh the important bits here is uh are these",
    "start": "1315760",
    "end": "1321799"
  },
  {
    "text": "timeline objects so you can see uh there's kind of an initial marker uh in",
    "start": "1321799",
    "end": "1326919"
  },
  {
    "text": "the trace uh that says the simulation started at this time um and then from",
    "start": "1326919",
    "end": "1331960"
  },
  {
    "text": "then on uh it records time stamps of interesting events so we can see here uh",
    "start": "1331960",
    "end": "1337400"
  },
  {
    "text": "at a particular time stamp it uh applied some objects um and we're literally just",
    "start": "1337400",
    "end": "1343159"
  },
  {
    "text": "saving the uh it's kind of a sanitized version of The Raw kubernetes yaml or",
    "start": "1343159",
    "end": "1349760"
  },
  {
    "text": "the raw kubernetes manifest um and then we can keep going down here uh at some later point in time uh that same object",
    "start": "1349760",
    "end": "1356919"
  },
  {
    "text": "then got deleted um and so this is what it looks like uh it's all saved in a",
    "start": "1356919",
    "end": "1363679"
  },
  {
    "text": "binary format that's Json esque uh it's I think reasonably efficient and so it",
    "start": "1363679",
    "end": "1369159"
  },
  {
    "text": "doesn't take up a ton of storage um but this is you know now you now this is",
    "start": "1369159",
    "end": "1374360"
  },
  {
    "text": "what gets downloaded and replayed um so what I'm going to",
    "start": "1374360",
    "end": "1381360"
  },
  {
    "text": "do is let's move on I want to spend a",
    "start": "1381360",
    "end": "1387200"
  },
  {
    "text": "little bit of time talking about what our next steps um you can all imagine",
    "start": "1387200",
    "end": "1392760"
  },
  {
    "text": "that I gave you a really fascinating demo uh can I have some Applause for my",
    "start": "1392760",
    "end": "1398080"
  },
  {
    "text": "thank you thank you thank you thank you um and there was a hat so you know you didn't leave completely disappointed uh",
    "start": "1398080",
    "end": "1404919"
  },
  {
    "text": "let's talk a little bit about what I want to do next here um so one thing that I think is really",
    "start": "1404919",
    "end": "1411960"
  },
  {
    "text": "important is being able to actually compare and visualize these results uh right now uh you can replay this stuff",
    "start": "1411960",
    "end": "1419440"
  },
  {
    "text": "and you can look at it on grafana or whatever your monitoring tool of choice is uh which is great uh like I love",
    "start": "1419440",
    "end": "1426279"
  },
  {
    "text": "Prometheus I love grafana um but it lacks some of the more data analysis",
    "start": "1426279",
    "end": "1432200"
  },
  {
    "text": "type of uh features that I want to be able to do you can imagine being able to take two of these simulations and maybe",
    "start": "1432200",
    "end": "1438320"
  },
  {
    "text": "compare a diff um or uh like what is the you know what is the mean scheduling",
    "start": "1438320",
    "end": "1445600"
  },
  {
    "text": "time or what is the mean like uh cluster efficiency or something along those lines um being able to answer those",
    "start": "1445600",
    "end": "1452840"
  },
  {
    "text": "types of questions is really important and I would say that it's something that in the kuber ecosystem like we're kind",
    "start": "1452840",
    "end": "1460200"
  },
  {
    "text": "of lacking those tools right now um there was an interesting grafana talk yesterday uh where they were",
    "start": "1460200",
    "end": "1466440"
  },
  {
    "text": "demonstrating some features around uh not for simulation uh but demonstrating",
    "start": "1466440",
    "end": "1471520"
  },
  {
    "text": "some new visualization tools which I thought was really interesting so maybe check that one out um but I think there's a lot of really interesting kind",
    "start": "1471520",
    "end": "1477240"
  },
  {
    "text": "of Green Field work to be done here um another thing that I really want to be able to do is uh right now what",
    "start": "1477240",
    "end": "1484640"
  },
  {
    "text": "you can do is you can take a trace from your production cluster and then you can replay it um this is you know I think",
    "start": "1484640",
    "end": "1492159"
  },
  {
    "text": "really useful uh what I want to be able to do is start answering what if questions so not just like well this",
    "start": "1492159",
    "end": "1499159"
  },
  {
    "text": "happened but like what if this happened what if we had a deployment that scaled",
    "start": "1499159",
    "end": "1504440"
  },
  {
    "text": "up to 10,000 pods what if we uh you know",
    "start": "1504440",
    "end": "1509799"
  },
  {
    "text": "we're running this ml thing and one of the jobs terminates like how does the cluster respond uh so I think there's a",
    "start": "1509799",
    "end": "1516200"
  },
  {
    "text": "lot of work that we can do around being able to take these Trace objects and modify them or even like generate",
    "start": "1516200",
    "end": "1523520"
  },
  {
    "text": "completely hypothetical traces uh and then apply those in a simulated cluster",
    "start": "1523520",
    "end": "1528640"
  },
  {
    "text": "and see what happens I think that that could be a really powerful uh really powerful thing um there's also there's a ton",
    "start": "1528640",
    "end": "1537399"
  },
  {
    "text": "of duplicated effort that's being done right now so I don't know if you're familiar with quac uh quac is kubernetes",
    "start": "1537399",
    "end": "1543960"
  },
  {
    "text": "without cuet uh they have a very similar setup to me they don't have all of the tracing and replay components but skv",
    "start": "1543960",
    "end": "1551399"
  },
  {
    "text": "node SK Cloud proov they have their equivalent thing over there um there's",
    "start": "1551399",
    "end": "1556919"
  },
  {
    "text": "actually two qu talks happening at cubec con uh one of them's happening right now so if you're here uh sorry I guess you",
    "start": "1556919",
    "end": "1564640"
  },
  {
    "text": "missed that one um maybe they have a better live demo um there's another one tomorrow uh about doing large scale uh",
    "start": "1564640",
    "end": "1572640"
  },
  {
    "text": "like scalability testing using qua that's tomorrow at 2m uh really encourage you to check that out um there",
    "start": "1572640",
    "end": "1578720"
  },
  {
    "text": "are other projects as well like kcp is the kubernetes control plane um it's",
    "start": "1578720",
    "end": "1584760"
  },
  {
    "text": "just running the control plane it doesn't have any of the cuet stuff behind it uh virtual cuet of course um",
    "start": "1584760",
    "end": "1590960"
  },
  {
    "text": "there's things like Cube Mark where they have their Hollow node implementation uh so there's a ton of",
    "start": "1590960",
    "end": "1596640"
  },
  {
    "text": "duplicated work here uh that I really think that like let's stop duplicating all this stuff and like kind of like",
    "start": "1596640",
    "end": "1603080"
  },
  {
    "text": "let's settle on one thing um and I'm kind of hoping that maybe simcube can be a part of that um the last bullet point",
    "start": "1603080",
    "end": "1611159"
  },
  {
    "text": "here is a little bit interesting uh so one thing I didn't tell you is about half of the stuff here",
    "start": "1611159",
    "end": "1616760"
  },
  {
    "text": "is written in Rust um maybe that's exciting to you maybe that's like oh my God what is he",
    "start": "1616760",
    "end": "1622480"
  },
  {
    "text": "thinking uh when I started this project it was you know a thing that I thought I wanted",
    "start": "1622480",
    "end": "1629240"
  },
  {
    "text": "and so this was an opportunity for me to learn learn some Rust uh learn a little bit about the kubernetes ecosystem",
    "start": "1629240",
    "end": "1635640"
  },
  {
    "text": "around rust uh side note uh the Qs project is fantastic I love it um but uh",
    "start": "1635640",
    "end": "1642799"
  },
  {
    "text": "as more and more folks have you know demonstrated interest I recognize uh that might uh be a hindrance to adoption",
    "start": "1642799",
    "end": "1651399"
  },
  {
    "text": "um so I'm not committing to this but maybe uh there's a goaling rewrite in",
    "start": "1651399",
    "end": "1657960"
  },
  {
    "text": "the cards uh re uh R Rig G yeah uh",
    "start": "1657960",
    "end": "1664760"
  },
  {
    "text": "rewrite it and go um if you're interest if that's something that's of interest to you I'd love to hear more about your",
    "start": "1664760",
    "end": "1671159"
  },
  {
    "text": "use case um I don't have I'm not making any solid promises there um there's also there's a ton of other work to be done",
    "start": "1671159",
    "end": "1678000"
  },
  {
    "text": "um as I mentioned kind of at the beginning of the talk uh we're an open source first company uh everything we do",
    "start": "1678000",
    "end": "1684200"
  },
  {
    "text": "is kind of out in the open so I would love to have more contributors to this project um I got my first PR this",
    "start": "1684200",
    "end": "1690360"
  },
  {
    "text": "morning which is super exciting uh if you're interested in contributing to",
    "start": "1690360",
    "end": "1695960"
  },
  {
    "text": "simcube uh or you want to use it in one of your clusters or maybe if you're",
    "start": "1695960",
    "end": "1701360"
  },
  {
    "text": "interested in like sponsoring some of the work that you're doing uh I would love to talk with you um I'm around the rest of the conference um this also my",
    "start": "1701360",
    "end": "1708640"
  },
  {
    "text": "website is on these slides uh you can email me um I would love to get in touch and kind of know more about your use",
    "start": "1708640",
    "end": "1714720"
  },
  {
    "text": "case and if the stuff that I'm building is uh helpful for you um this is pretty",
    "start": "1714720",
    "end": "1721399"
  },
  {
    "text": "much all that I have today uh I'm happy to take any questions there's also a bunch of links on here again these",
    "start": "1721399",
    "end": "1727159"
  },
  {
    "text": "slides are available um so you can see the code on GitHub all the artifacts for",
    "start": "1727159",
    "end": "1734240"
  },
  {
    "text": "this presentation are on GitHub so you could go run the demo yourself if you wanted to um I have a Blog where I",
    "start": "1734240",
    "end": "1740679"
  },
  {
    "text": "publish thoughts about whatever I feel like writing about approximately weekly",
    "start": "1740679",
    "end": "1746120"
  },
  {
    "text": "so you can go sign up for that um and then I'm also on Mastadon uh so if you want to go follow me on there uh that",
    "start": "1746120",
    "end": "1752320"
  },
  {
    "text": "would be great um I am happy to take any questions that you all have and thanks",
    "start": "1752320",
    "end": "1757720"
  },
  {
    "text": "so much for putting up with my uh dumb [Applause]",
    "start": "1757720",
    "end": "1766320"
  },
  {
    "text": "jokes um I think there there's a microphone over there so uh for folks who are watching online if we can uh use",
    "start": "1766320",
    "end": "1774600"
  },
  {
    "text": "the microphone that would be",
    "start": "1774600",
    "end": "1777640"
  },
  {
    "text": "great uh no think it's on oh there we go oh helloo hello okay um we're actually",
    "start": "1787360",
    "end": "1795240"
  },
  {
    "text": "uh have a use case around simulation um and I wanted to ask you a couple of questions about the data that you're",
    "start": "1795240",
    "end": "1802080"
  },
  {
    "text": "collecting so um I work for IBM we we need scenarios that we could simulate",
    "start": "1802080",
    "end": "1808279"
  },
  {
    "text": "some very large clusters and specifically but I think I think I can see hints of this uh we need to simulate",
    "start": "1808279",
    "end": "1816760"
  },
  {
    "text": "some complex podt pod Affinity anti- Infinity rules so in in the you know uh",
    "start": "1816760",
    "end": "1825080"
  },
  {
    "text": "slim down manifest I it looked like that we were going to be able to pick that up",
    "start": "1825080",
    "end": "1830559"
  },
  {
    "text": "right if I yep and and so the virtual koblet will then position these virtual",
    "start": "1830559",
    "end": "1836720"
  },
  {
    "text": "pods then based on the infinity anti- infinity this so I think that's a that's a plus um we are looking at quac also",
    "start": "1836720",
    "end": "1844000"
  },
  {
    "text": "and for us one of the drawbacks is I actually need some other metrics other",
    "start": "1844000",
    "end": "1851000"
  },
  {
    "text": "than the container spec so uh you know in a real world I would I could talk to",
    "start": "1851000",
    "end": "1856600"
  },
  {
    "text": "the KU and and get some metrics but I want to capture a snapshot of that and",
    "start": "1856600",
    "end": "1862600"
  },
  {
    "text": "also send that as a payload do you think that's possible yeah um one of the",
    "start": "1862600",
    "end": "1867720"
  },
  {
    "text": "things that I want to be able to do uh so right now I'm just capturing like when your pod started and ended uh it",
    "start": "1867720",
    "end": "1875039"
  },
  {
    "text": "would be totally possible to inject other annotations like uh your init containers took this long to run like",
    "start": "1875039",
    "end": "1882080"
  },
  {
    "text": "your sidecar container exited with this exit code uh we could feed all of those",
    "start": "1882080",
    "end": "1887240"
  },
  {
    "text": "sorts of annotations in and then yep yep yep um I think",
    "start": "1887240",
    "end": "1896799"
  },
  {
    "text": "the I'm starting small I don't know what other metrics folks are going to be",
    "start": "1896799",
    "end": "1902480"
  },
  {
    "text": "interested in and I don't want to just capture everything um but certainly there's a lot more we can do",
    "start": "1902480",
    "end": "1909760"
  },
  {
    "text": "there okay um are you currently pulling in any",
    "start": "1912679",
    "end": "1919440"
  },
  {
    "text": "time like any information about like node startup times and things like that so like putting into the simulation of",
    "start": "1919440",
    "end": "1926360"
  },
  {
    "text": "like my if if I improve my like 99th percentile for how long a node takes to",
    "start": "1926360",
    "end": "1932120"
  },
  {
    "text": "spin up how does that impact my simulations uh so right now I'm not pulling that information in uh when",
    "start": "1932120",
    "end": "1938679"
  },
  {
    "text": "you're not the simulation will just report that the node comes up immediately uh again you can inject all",
    "start": "1938679",
    "end": "1946679"
  },
  {
    "text": "of that information in and have virtual cuet kind of fake it out",
    "start": "1946679",
    "end": "1952600"
  },
  {
    "text": "um hi my name is Inda uh so the my question is now since you have the trace",
    "start": "1953080",
    "end": "1959760"
  },
  {
    "text": "can we do kind of like a replay like you know the like some incidents happen on the production cluster or like any",
    "start": "1959760",
    "end": "1966480"
  },
  {
    "text": "testing cluster now if you want to replay on this one and try to debug okay what's actually went through like can we",
    "start": "1966480",
    "end": "1973760"
  },
  {
    "text": "do that with this TR yep uh so you can you can you can do the uh replay on kind",
    "start": "1973760",
    "end": "1979120"
  },
  {
    "text": "of whatever cluster you want as long as you have this SK controller running there uh you can then tell it to uh",
    "start": "1979120",
    "end": "1986600"
  },
  {
    "text": "replay the trace and that could be on a local cluster that's running on your laptop it could be in a cluster that's in a Dev environment it could be on some",
    "start": "1986600",
    "end": "1993399"
  },
  {
    "text": "other production cluster I guess if you wanted to um but you should be able to do that anywhere okay so that means we",
    "start": "1993399",
    "end": "1999840"
  },
  {
    "text": "can pick the DAT 10 time from the the production cluster you want to trace M",
    "start": "1999840",
    "end": "2004919"
  },
  {
    "text": "okay exactly yeah thank you",
    "start": "2004919",
    "end": "2008960"
  },
  {
    "text": "any other questions okay um we'll go ahead and",
    "start": "2010480",
    "end": "2016399"
  },
  {
    "text": "stop there uh thank you so much for coming uh really great to see all of you here um would love to chat more uh after",
    "start": "2016399",
    "end": "2023399"
  },
  {
    "text": "the talk as well so thanks [Applause]",
    "start": "2023399",
    "end": "2029679"
  },
  {
    "text": "again",
    "start": "2029679",
    "end": "2032679"
  }
]