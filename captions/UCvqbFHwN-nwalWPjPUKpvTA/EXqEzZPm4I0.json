[
  {
    "start": "0",
    "end": "50000"
  },
  {
    "text": "good afternoon my name is Jason de Torres and I'm your track host today if",
    "start": "800",
    "end": "9120"
  },
  {
    "text": "you can and if you're sitting near the edge of a row please move in so that it's folks come in they have a chance to",
    "start": "9120",
    "end": "15360"
  },
  {
    "text": "sit down and also please remember to rate this talk on sketch comm at the end",
    "start": "15360",
    "end": "21740"
  },
  {
    "text": "our next speakers are going to tell us about how container networking effects",
    "start": "21740",
    "end": "26939"
  },
  {
    "text": "database performance first we have co-author of high performance my sequel",
    "start": "26939",
    "end": "32308"
  },
  {
    "text": "he's also the co-founder and CTO of Percona Vadim we also have the product",
    "start": "32309",
    "end": "39300"
  },
  {
    "text": "manager in charge of my sequel and cloud initiatives at percona Tyler Suzanne",
    "start": "39300",
    "end": "47660"
  },
  {
    "start": "50000",
    "end": "196000"
  },
  {
    "text": "cool so yeah thank you for the introduction so we're gonna be talking about how can hit our",
    "start": "50480",
    "end": "56070"
  },
  {
    "text": "networking effects database performance in kubernetes but before we get into that I want to tell you who Prachanda is",
    "start": "56070",
    "end": "61370"
  },
  {
    "text": "since we're relatively new to the kubernetes community so percona is a",
    "start": "61370",
    "end": "66930"
  },
  {
    "text": "group of open-source database experts we were the unbiased champions of open-source databases and we do services",
    "start": "66930",
    "end": "73560"
  },
  {
    "text": "and software around Postgres and MySQL and all of our software is 100%",
    "start": "73560",
    "end": "79200"
  },
  {
    "text": "free and open source so our commercial business is based on support and consulting services and then I'm gonna",
    "start": "79200",
    "end": "86369"
  },
  {
    "text": "skip our little intros since we had a nice intro and talk about why we're doing this talk so we we started kind of",
    "start": "86369",
    "end": "93360"
  },
  {
    "text": "entering into the kubernetes space because we want to be able to make a bridge for databases into the",
    "start": "93360",
    "end": "98369"
  },
  {
    "text": "containerized world you know historically containerized systems were",
    "start": "98369",
    "end": "104189"
  },
  {
    "text": "really focused on stateless applications not stateful and so we wanted to move from a place where it's like I don't do",
    "start": "104189",
    "end": "109829"
  },
  {
    "text": "this kind of recommendation to hey this is a possible thing to do and we should do this in production so this talk is",
    "start": "109829",
    "end": "116189"
  },
  {
    "text": "not about blaming or finger-pointing we are doing benchmarking and showing results but our focus is really to start a conversation in the community and",
    "start": "116189",
    "end": "122579"
  },
  {
    "text": "understand how our adventure started with databases and then how that caused",
    "start": "122579",
    "end": "128220"
  },
  {
    "text": "us to get into other underlying primitives like networking and storage in communities so a little background on this is we",
    "start": "128220",
    "end": "134989"
  },
  {
    "text": "launched our kubernetes operators for Percona extra DB cluster which is our MySQL clustering product based on Galera",
    "start": "134989",
    "end": "140749"
  },
  {
    "text": "and for pre kono served for MongoDB as ga software in May of this year at our",
    "start": "140749",
    "end": "147139"
  },
  {
    "text": "conference hopper gonna live and since then we've worked with several customers of ours in deploying this into",
    "start": "147139",
    "end": "153560"
  },
  {
    "text": "production workloads and in the process we noticed really significant performance differentials that we didn't",
    "start": "153560",
    "end": "159530"
  },
  {
    "text": "expect and so the other thing that we've seen is that performance could really be",
    "start": "159530",
    "end": "165019"
  },
  {
    "text": "a barrier of entry to adoption because a lot of people right now are running kubernetes for their applications but their databases still live outside of",
    "start": "165019",
    "end": "170659"
  },
  {
    "text": "kubernetes on bare metal and so we wanted to understand basically how does",
    "start": "170659",
    "end": "175669"
  },
  {
    "text": "the performance differential sit what are some things that are available in the ecosystem what are the right",
    "start": "175669",
    "end": "181579"
  },
  {
    "text": "recommendations we can make to our customers to make it possible for them to migrate their data into kubernetes and part of that ties into storage part",
    "start": "181579",
    "end": "189019"
  },
  {
    "text": "of it ties in and networking and today we're gonna focus on the networking piece and so with that I'll hand it over to Vadim to talk about our methodology",
    "start": "189019",
    "end": "195049"
  },
  {
    "text": "for benchmarking yes yeah hello everybody so I am a performance guy I like to run",
    "start": "195049",
    "end": "202189"
  },
  {
    "start": "196000",
    "end": "291000"
  },
  {
    "text": "Auto benchmarks and for this specific case we had to design our specific",
    "start": "202189",
    "end": "207709"
  },
  {
    "text": "benchmark and first let's talk about our layout so for our benchmark we used four",
    "start": "207709",
    "end": "218290"
  },
  {
    "text": "nodes kubernetes cluster with one master and three nodes and for internal",
    "start": "218290",
    "end": "227090"
  },
  {
    "text": "communication we used ten gigabit network cards and network switch and for",
    "start": "227090",
    "end": "234439"
  },
  {
    "text": "external communication with the outside world it was one gigabyte switch and it",
    "start": "234439",
    "end": "240409"
  },
  {
    "text": "seems this set up already caused some complication for several network plugins",
    "start": "240409",
    "end": "247900"
  },
  {
    "text": "we had issue like some of them didn't know how to route network properly seems",
    "start": "247900",
    "end": "255049"
  },
  {
    "text": "to they mixed up ten gigabit and when we give it a connections so we had to deal",
    "start": "255049",
    "end": "260570"
  },
  {
    "text": "with that and the some of them I don't think we resolved properly yet yet you will see that in a",
    "start": "260570",
    "end": "267730"
  },
  {
    "text": "result maybe we can improve our results if you can resolve network issue head and",
    "start": "267730",
    "end": "274360"
  },
  {
    "text": "therefore client workload client",
    "start": "274360",
    "end": "279610"
  },
  {
    "text": "generation were quote we use seat bench which which also was connected on",
    "start": "279610",
    "end": "285790"
  },
  {
    "text": "separate boxed or ten gigabit network",
    "start": "285790",
    "end": "291210"
  },
  {
    "start": "291000",
    "end": "541000"
  },
  {
    "text": "and let's talk a little bit about database setup for a database we use per",
    "start": "291419",
    "end": "297940"
  },
  {
    "text": "connects to the cluster which again as product may be not very familiar for",
    "start": "297940",
    "end": "303070"
  },
  {
    "text": "this audience so I wanted to took a minute and talk about whatever connects",
    "start": "303070",
    "end": "311229"
  },
  {
    "text": "to a big cluster and basically he if you're familiar with MySQL and if you interested in that database I'm sure he",
    "start": "311229",
    "end": "318040"
  },
  {
    "text": "familiar is my scale reckon extra big cluster is basically multiple MySQL nodes communication together using some",
    "start": "318040",
    "end": "326639"
  },
  {
    "text": "synchronous protocol for this setup and the minimum recommended and recommended",
    "start": "326639",
    "end": "333070"
  },
  {
    "text": "way to use is three nodes just in case there's not for failure you still have",
    "start": "333070",
    "end": "338560"
  },
  {
    "text": "two nodes running in the issue have only two nodes they're always split brain situation",
    "start": "338560",
    "end": "343870"
  },
  {
    "text": "which are not good to have so three nodes minimal recommended set up and",
    "start": "343870",
    "end": "351940"
  },
  {
    "text": "just a magical mode Iranian together through synchronous protocol and he set",
    "start": "351940",
    "end": "359320"
  },
  {
    "text": "up allow us to achieve two important qualities for databases what we were like from databases like high",
    "start": "359320",
    "end": "365590"
  },
  {
    "text": "availability in the data consistency the consistency is achieved by this",
    "start": "365590",
    "end": "371639"
  },
  {
    "text": "synchronous interaction between north and this synchronous interaction between",
    "start": "371639",
    "end": "377169"
  },
  {
    "text": "nodes happens on the internal communication which happens saloon",
    "start": "377169",
    "end": "383050"
  },
  {
    "text": "network between nodes so it would by itself it with a require and demand the",
    "start": "383050",
    "end": "392620"
  },
  {
    "text": "high performance network well if you would like to achieve high performance result and they're both characteristic",
    "start": "392620",
    "end": "400090"
  },
  {
    "text": "from Network latency is important because transaction latency in",
    "start": "400090",
    "end": "405879"
  },
  {
    "text": "production latency in databases basically how quickly your application I",
    "start": "405879",
    "end": "411009"
  },
  {
    "text": "respond to your query and you run some query refresh Facebook page you expect",
    "start": "411009",
    "end": "416650"
  },
  {
    "text": "answer pretty much within second so latency network latency in this case",
    "start": "416650",
    "end": "423580"
  },
  {
    "text": "will contribute the transaction latency after user experience and also important",
    "start": "423580",
    "end": "429699"
  },
  {
    "text": "throughput because not only a one user",
    "start": "429699",
    "end": "434770"
  },
  {
    "text": "you worried about you worried about high performance for called hundreds",
    "start": "434770",
    "end": "440770"
  },
  {
    "text": "thousands transactions running per second and in this case transactional",
    "start": "440770",
    "end": "446590"
  },
  {
    "text": "throughput will depend on your network support so this setup applies quite the",
    "start": "446590",
    "end": "454060"
  },
  {
    "text": "amount of network performance another aspect in databases is storage",
    "start": "454060",
    "end": "461770"
  },
  {
    "text": "and especially if you use shared storage which Iranian across network there is",
    "start": "461770",
    "end": "467500"
  },
  {
    "text": "additional demand of network but in our setup we will leave storage out of equation just to understand network",
    "start": "467500",
    "end": "477089"
  },
  {
    "text": "networking aspect of database performance and for database layout",
    "start": "477089",
    "end": "484900"
  },
  {
    "text": "setup it will be very simple three nodes",
    "start": "484900",
    "end": "490469"
  },
  {
    "text": "three nodes of Peconic syllabic cluster for this we allocate each node would run",
    "start": "490860",
    "end": "497169"
  },
  {
    "text": "in individual pod as used in our operator and then we prescribe anti",
    "start": "497169",
    "end": "505180"
  },
  {
    "text": "affinity rules in our operators recurrently that each node will run on",
    "start": "505180",
    "end": "511110"
  },
  {
    "text": "individual parameter server so this kind of mapping for kubernetes port I mean we",
    "start": "511110",
    "end": "520899"
  },
  {
    "text": "guarantee that each ended up order ants on a separate server and we use clients",
    "start": "520899",
    "end": "530970"
  },
  {
    "text": "outside the fur this network outside of her kubernetes using port mapping to",
    "start": "530970",
    "end": "538330"
  },
  {
    "text": "access databases so for benchmarking",
    "start": "538330",
    "end": "545700"
  },
  {
    "text": "myself be used on a software side is his bench with OTP read/write overcoat is",
    "start": "545700",
    "end": "552520"
  },
  {
    "text": "very simple workload but it allows to or database pretty decently and read/write",
    "start": "552520",
    "end": "561430"
  },
  {
    "text": "would allow us to load network communication between nodes where",
    "start": "561430",
    "end": "566580"
  },
  {
    "text": "network communication happens when there is change changes there is a right for",
    "start": "566580",
    "end": "571810"
  },
  {
    "text": "court or database and along with this will measure just roll network bandwidth",
    "start": "571810",
    "end": "577600"
  },
  {
    "text": "which we able to achieve with some or another plugin and produce I used type",
    "start": "577600",
    "end": "583000"
  },
  {
    "text": "of three very simple to capture network support we also collected for baseline",
    "start": "583000",
    "end": "593380"
  },
  {
    "text": "we collected results on bare metal on system running without cobrin edges so",
    "start": "593380",
    "end": "601630"
  },
  {
    "text": "we understand what is kind of ideal performance we would like to achieve in",
    "start": "601630",
    "end": "610630"
  },
  {
    "text": "the compare kubernetes operation with bare metal performance network aside",
    "start": "610630",
    "end": "618450"
  },
  {
    "text": "like i mentioned we use two network cards one ten gigabit another one",
    "start": "618450",
    "end": "624130"
  },
  {
    "text": "gigabit for communication between nodes and operation system a little bit",
    "start": "624130",
    "end": "629230"
  },
  {
    "text": "outdated but that's what we had on the system ubuntu 1604 with 415 linux kernel",
    "start": "629230",
    "end": "640319"
  },
  {
    "text": "then connects to deploy kubernetes i used very simple cube admin script which",
    "start": "641190",
    "end": "648070"
  },
  {
    "text": "would allow us to spoon up three nodes and one master and then we installed",
    "start": "648070",
    "end": "658020"
  },
  {
    "text": "network plugins probably Tyler will speak about speed budget more",
    "start": "658020",
    "end": "663600"
  },
  {
    "text": "and we did our best to configure is Network plugin to use 10 gigabit network",
    "start": "663600",
    "end": "668970"
  },
  {
    "text": "interface like I mentioned I don't think we were successful in all cases it requires some extra work for hardware",
    "start": "668970",
    "end": "678180"
  },
  {
    "text": "why was there a hardware specification of our servers I will not list it I think that's pretty decent inter",
    "start": "678180",
    "end": "683459"
  },
  {
    "text": "machineries enough memory and decent",
    "start": "683459",
    "end": "689690"
  },
  {
    "text": "storage options and on software side we",
    "start": "689690",
    "end": "696660"
  },
  {
    "text": "used per connect 3 because there 577 are nothing special using our system",
    "start": "696660",
    "end": "703230"
  },
  {
    "text": "packages from our repose for kubernetes tests we used our operator version 1.2",
    "start": "703230",
    "end": "709500"
  },
  {
    "text": "which would deploy the same version of per connected cluster in kubernetes 5",
    "start": "709500",
    "end": "714930"
  },
  {
    "text": "727 and but to achieve better database",
    "start": "714930",
    "end": "719970"
  },
  {
    "text": "performance we cannot rely on out of box parameters yet we still have to tune in",
    "start": "719970",
    "end": "727079"
  },
  {
    "text": "any configuration like my C and F in cases with MySQL and we used local",
    "start": "727079",
    "end": "735329"
  },
  {
    "text": "storage local SSD storage again to avoid this shared storage case where which",
    "start": "735329",
    "end": "742949"
  },
  {
    "text": "would introduce additional record on a network I would like to oscillate storage",
    "start": "742949",
    "end": "748709"
  },
  {
    "text": "problem from network problem in this case so there is some basic parameters",
    "start": "748709",
    "end": "755790"
  },
  {
    "start": "752000",
    "end": "888000"
  },
  {
    "text": "if you would like to repeat in the actually very first issue I faced here",
    "start": "755790",
    "end": "760980"
  },
  {
    "text": "trying to measure database performance is quality of service in the Copernicus",
    "start": "760980",
    "end": "769170"
  },
  {
    "text": "which by default is the best effort but I will show the next slide if you use",
    "start": "769170",
    "end": "776610"
  },
  {
    "text": "with default quality of service and kubernetes your result variance will be first",
    "start": "776610",
    "end": "783930"
  },
  {
    "text": "results will be suboptimal and second variance in results also will be quite",
    "start": "783930",
    "end": "789600"
  },
  {
    "text": "problematic so it also took time to figure out what's going on here",
    "start": "789600",
    "end": "794870"
  },
  {
    "text": "then we came to the heat of fusion guaranteed quality of service and",
    "start": "794870",
    "end": "801920"
  },
  {
    "text": "actually to make sure that you using guaranteed quality of service for kubernetes pods you have to specify this",
    "start": "801920",
    "end": "809390"
  },
  {
    "text": "kind of magic parameter as a request and limits to be exactly the same and as",
    "start": "809390",
    "end": "815120"
  },
  {
    "text": "high as possible for your pods than your pod and kubernetes will provide best",
    "start": "815120",
    "end": "822500"
  },
  {
    "text": "optimal performance and still I have had to use this magic number CPU 55 even",
    "start": "822500",
    "end": "831260"
  },
  {
    "text": "there is a 56 course including high high",
    "start": "831260",
    "end": "837350"
  },
  {
    "text": "persuasion course kubernetes would not allow me to put 56 EPOC here communities",
    "start": "837350",
    "end": "843650"
  },
  {
    "text": "complaining or lack of resources so I had to increase on one simple core",
    "start": "843650",
    "end": "848750"
  },
  {
    "text": "allocated for our database ports which",
    "start": "848750",
    "end": "855380"
  },
  {
    "text": "also might contribute to some decrease of performance but I hope for the hope not that sentence significant and sorry and",
    "start": "855380",
    "end": "863750"
  },
  {
    "text": "as I said to compare guaranteed quality of service which we used with best",
    "start": "863750",
    "end": "870200"
  },
  {
    "text": "effort quality of service in kubernetes which will run by default is child kind",
    "start": "870200",
    "end": "875660"
  },
  {
    "text": "of one second resolution and receive his best effort quality of service it was a lot of rare variants and suboptimal",
    "start": "875660",
    "end": "883610"
  },
  {
    "text": "performance with this setting and for",
    "start": "883610",
    "end": "889550"
  },
  {
    "text": "the reference self we use dashes Banshee",
    "start": "889550",
    "end": "894040"
  },
  {
    "text": "period right test these parameters ten tables is ten million rows each you'll",
    "start": "895080",
    "end": "900910"
  },
  {
    "text": "get about thirty two gigabytes of data we have connect gig of memory which much",
    "start": "900910",
    "end": "907390"
  },
  {
    "text": "bigger than 32 gig database so pretty much all our work quality will be done",
    "start": "907390",
    "end": "913480"
  },
  {
    "text": "in memory with minimal impact on storage so again with goal to Lord Network to",
    "start": "913480",
    "end": "921610"
  },
  {
    "text": "see what happens engagement network performance is bounded by network",
    "start": "921610",
    "end": "927220"
  },
  {
    "text": "plugins and on networks plugins Tyler will talk about four plugins which we",
    "start": "927220",
    "end": "934090"
  },
  {
    "text": "use thank you buddy and so as you can see we're trying to be really transparent about what our",
    "start": "934090",
    "end": "939160"
  },
  {
    "text": "methodology is here we we recognize a lot of times when folks do benchmarking it's hard to replicate them or they're",
    "start": "939160",
    "end": "944290"
  },
  {
    "text": "not very transparent so our goal is to start a conversation the community and really understand how we can improve",
    "start": "944290",
    "end": "950290"
  },
  {
    "text": "performance across the board and kubernetes for stateful applications and so I'm just gonna give a quick overview",
    "start": "950290",
    "end": "955810"
  },
  {
    "text": "of what the network plugins are that we tested and maybe some notes that we took on these but no strong recommendations",
    "start": "955810",
    "end": "962650"
  },
  {
    "text": "or conclusions so also I was going to say the list of plugins we tested is not",
    "start": "962650",
    "end": "968080"
  },
  {
    "text": "exhaustive we chose the ones that we heard about from our customer base so if customers were using them or had",
    "start": "968080",
    "end": "974080"
  },
  {
    "text": "considered using them they got added to the list so I already found like three more at the conference this week that I",
    "start": "974080",
    "end": "980410"
  },
  {
    "text": "hadn't even heard of yet so we may be testing more in the future so first up",
    "start": "980410",
    "end": "985990"
  },
  {
    "text": "we tested calico which is described on their website as project calico is designed to simplify scale and secure",
    "start": "985990",
    "end": "991390"
  },
  {
    "text": "cloud networks and one of the interesting things is it supports an IP and IP feature so we tested with and",
    "start": "991390",
    "end": "996910"
  },
  {
    "text": "without and it's enabled by default we tested flannel flannels described on",
    "start": "996910",
    "end": "1002100"
  },
  {
    "text": "their website is network fabric for containers designed for kubernetes and it has support for actually multiple",
    "start": "1002100",
    "end": "1007320"
  },
  {
    "text": "backends the ones we tested was the default UDP and we also tested the excellent we attempted to test host",
    "start": "1007320",
    "end": "1013200"
  },
  {
    "text": "gateway and we saw some interesting behavior and then ultimately were able to complete a test successfully so we",
    "start": "1013200",
    "end": "1018960"
  },
  {
    "text": "removed those results but we were able to see pretty good on average",
    "start": "1018960",
    "end": "1024990"
  },
  {
    "text": "performance VX land but interestingly with VX we saw weird stalls so peak performance",
    "start": "1024990",
    "end": "1031540"
  },
  {
    "text": "was good but we had not very good consistency and we think that might be a kernel issue because of the age of the kernel we were running we were on for 15",
    "start": "1031540",
    "end": "1038050"
  },
  {
    "text": "so we're gonna look at that in the future but since all tests were run on the same hardware it's still a valid set",
    "start": "1038050",
    "end": "1045970"
  },
  {
    "text": "of results we also tested cilium say liam's described on their website as api",
    "start": "1045970",
    "end": "1051250"
  },
  {
    "text": "aware networking and security we found the installation of this very straightforward but we were unable to get psyllium to actually route traffic",
    "start": "1051250",
    "end": "1057190"
  },
  {
    "text": "across a 10 gig network as we expected so we are reporting results for psyllium however we expect these are heavily",
    "start": "1057190",
    "end": "1063010"
  },
  {
    "text": "impacted by this similarly we've which is described on his website is simple",
    "start": "1063010",
    "end": "1068500"
  },
  {
    "text": "resilient multi hose container networking and more was actually probably the easiest to install but we",
    "start": "1068500",
    "end": "1074890"
  },
  {
    "text": "still had some concerns with trying to get it to route across 10 gig this was actually a very interesting one where",
    "start": "1074890",
    "end": "1081490"
  },
  {
    "text": "the result was we thought that it was routing across 10 gig but the the performance results didn't match that",
    "start": "1081490",
    "end": "1088690"
  },
  {
    "text": "and then on further investigation P capping we saw it was going across the gigabit interface even though the routing rules that we can see showed it",
    "start": "1088690",
    "end": "1095680"
  },
  {
    "text": "should have gone across a 10 Gator pace so we ended up doing really significant troubleshooting on slack with some folks and then ran out of time so we ended up",
    "start": "1095680",
    "end": "1103680"
  },
  {
    "text": "reporting the results that we had and we'd like to redress this one also after the conference we tested intel's SRO V CNI driver",
    "start": "1103680",
    "end": "1113070"
  },
  {
    "text": "alongside Malta's and this is kind of interesting it Malta's basically enables",
    "start": "1113070",
    "end": "1119770"
  },
  {
    "text": "you to have multiple CNI drivers used to attach multiple interfaces to a pod so with this one we actually use cube",
    "start": "1119770",
    "end": "1125770"
  },
  {
    "text": "router as a default pod Network and then we added an additional interface inside the pod that was the 10 gig interface",
    "start": "1125770",
    "end": "1132370"
  },
  {
    "text": "provided by SRO V and then finally we tested keep router and this one was kind",
    "start": "1132370",
    "end": "1138310"
  },
  {
    "text": "of it's described as a turnkey solution for kubernetes networking we found that relatively be true it pretty much worked",
    "start": "1138310",
    "end": "1144040"
  },
  {
    "text": "you could deploy it directly with cube ATM and with that I'm going to hand it back over to Vadim to talk about the",
    "start": "1144040",
    "end": "1150460"
  },
  {
    "text": "results ok so let's talk about",
    "start": "1150460",
    "end": "1156080"
  },
  {
    "start": "1155000",
    "end": "1364000"
  },
  {
    "text": "our results firstly I measure the database throughput on bare metal and",
    "start": "1156080",
    "end": "1162050"
  },
  {
    "text": "again to make sure that network is a limiting factor here imagine that the database performance through one gigabit",
    "start": "1162050",
    "end": "1171830"
  },
  {
    "text": "a channel and in this case for a signature called the achieved 2700",
    "start": "1171830",
    "end": "1178550"
  },
  {
    "text": "reduction per second and when we switched when I switch to Tammy a gigabit network the result improved to",
    "start": "1178550",
    "end": "1186830"
  },
  {
    "text": "over seven thousand three hundred thousand per second actually you see the",
    "start": "1186830",
    "end": "1193130"
  },
  {
    "text": "results Lynnette improve quite ten times as a network characteristic but we can",
    "start": "1193130",
    "end": "1199880"
  },
  {
    "text": "see that the database performance is clearly limited by one gigabit network",
    "start": "1199880",
    "end": "1207790"
  },
  {
    "text": "bandwidth in this case and on this chart",
    "start": "1207790",
    "end": "1213950"
  },
  {
    "text": "I trying to summarize the results that may be out of data to process so let's",
    "start": "1213950",
    "end": "1219260"
  },
  {
    "text": "go through this so this kind of green line is network bandwidth which I",
    "start": "1219260",
    "end": "1228920"
  },
  {
    "text": "measured with RI perv and first column",
    "start": "1228920",
    "end": "1236000"
  },
  {
    "text": "is a bare metal and then you can compare different plugins actually the best",
    "start": "1236000",
    "end": "1245120"
  },
  {
    "text": "result for bearer for network bandwidth I was able to achieve with a say V but",
    "start": "1245120",
    "end": "1253430"
  },
  {
    "text": "by some reason database performance was far from ideal in this case and we were",
    "start": "1253430",
    "end": "1259910"
  },
  {
    "text": "working with Intel guys to understand what's going on here and obviously there",
    "start": "1259910",
    "end": "1267110"
  },
  {
    "text": "is something going on a little bit but",
    "start": "1267110",
    "end": "1272180"
  },
  {
    "text": "then both cube router and calico or Table eight pap for the I would say",
    "start": "1272180",
    "end": "1280960"
  },
  {
    "text": "comparable network by these results",
    "start": "1280960",
    "end": "1286110"
  },
  {
    "text": "comparable is a very matter but then when we switch to database performance",
    "start": "1286110",
    "end": "1293760"
  },
  {
    "text": "little base support it's a red column in my result so the best performance we",
    "start": "1293760",
    "end": "1307420"
  },
  {
    "text": "were able to achieve a cube router with calico being a second we mentioned there",
    "start": "1307420",
    "end": "1316840"
  },
  {
    "text": "is some plugins like a cilium view and",
    "start": "1316840",
    "end": "1322630"
  },
  {
    "text": "the flannel it clearly flows by some reason",
    "start": "1322630",
    "end": "1327870"
  },
  {
    "text": "plugins we directed our traffic so one",
    "start": "1327870",
    "end": "1332880"
  },
  {
    "text": "gigabit network interface and there is still work to figure out how to set up",
    "start": "1332880",
    "end": "1341080"
  },
  {
    "text": "them properly in any case in the the network by default even with some",
    "start": "1341080",
    "end": "1346960"
  },
  {
    "text": "efforts to set up it properly but we",
    "start": "1346960",
    "end": "1352210"
  },
  {
    "text": "ready to work is never provide us to be able to figure out how we can resolve",
    "start": "1352210",
    "end": "1358780"
  },
  {
    "text": "this issue",
    "start": "1358780",
    "end": "1362130"
  },
  {
    "text": "so in conclusion of a results",
    "start": "1363870",
    "end": "1369740"
  },
  {
    "text": "[Music] we still see some performance penalty using Google nature's using the division",
    "start": "1369740",
    "end": "1378090"
  },
  {
    "text": "kubernetes even the best air is out here with a cube router produces about a",
    "start": "1378090",
    "end": "1384480"
  },
  {
    "text": "certain percent performance penalty if you compare an identical set up in bare",
    "start": "1384480",
    "end": "1393360"
  },
  {
    "text": "metal some network plugins have",
    "start": "1393360",
    "end": "1398430"
  },
  {
    "text": "mentioned with the require extra work to make them working as as expected and you",
    "start": "1398430",
    "end": "1409470"
  },
  {
    "text": "can see there's a strong correlation between available Network bandits in database results we are obviously",
    "start": "1409470",
    "end": "1420290"
  },
  {
    "text": "network performance very important for a database performance okay with that",
    "start": "1420290",
    "end": "1429320"
  },
  {
    "start": "1429000",
    "end": "1850000"
  },
  {
    "text": "we're ready to take questions and of course we're always available at the percona booth for the hallway track if",
    "start": "1429320",
    "end": "1435690"
  },
  {
    "text": "there's interest in that but let's see if there's any questions in the room",
    "start": "1435690",
    "end": "1440880"
  },
  {
    "text": "please Oh we'll start with job here yeah so in this benchmark you're using a",
    "start": "1440880",
    "end": "1447900"
  },
  {
    "text": "distributed version of MySQL through extradition that's great did you try any single note MySQL so the so yeah to",
    "start": "1447900",
    "end": "1454950"
  },
  {
    "text": "clarify all of the traffic was directed to a single node so typically in our operator we deploy a three-member PXE",
    "start": "1454950",
    "end": "1462630"
  },
  {
    "text": "cluster with three members and a proxy SQL cluster in front of that routing traffic and we do that for resiliency",
    "start": "1462630",
    "end": "1468120"
  },
  {
    "text": "because of some deficiencies that exist in staples set for the purpose of MySQL so this is kind of a crutch we use",
    "start": "1468120",
    "end": "1474330"
  },
  {
    "text": "around it but for the purpose of the benchmark we eliminated proxy SQL so there's no proxying layer and we",
    "start": "1474330",
    "end": "1479520"
  },
  {
    "text": "targeted all the traffic to a particular instance of MySQL running in the cluster right but it's still replicating right",
    "start": "1479520",
    "end": "1485970"
  },
  {
    "text": "that's correct and you did that intentionally because in the in the case of running MySQL for production purposes",
    "start": "1485970",
    "end": "1492360"
  },
  {
    "text": "and kubernetes you need synchronous replication to have some of the guarantees around reliability and",
    "start": "1492360",
    "end": "1497700"
  },
  {
    "text": "resiliency so it would be a less effective test in our opinion for our",
    "start": "1497700",
    "end": "1502770"
  },
  {
    "text": "purposes if we were to do single incident yeah yeah I was just checking because the overhead you",
    "start": "1502770",
    "end": "1507910"
  },
  {
    "text": "were seeing was consistent with the overhead that I had for distributed databases but not for pure single note",
    "start": "1507910",
    "end": "1513910"
  },
  {
    "text": "yeah and it makes sense because yeah effectively distributed data anyway yeah and that's absolutely correct so",
    "start": "1513910",
    "end": "1519280"
  },
  {
    "text": "because it is synchronous replication at least for right workloads any latency the network layer adds acts as like a",
    "start": "1519280",
    "end": "1526000"
  },
  {
    "text": "multiplying factor because of the synchronous replication that's gentleman here",
    "start": "1526000",
    "end": "1532930"
  },
  {
    "text": "oh please wait for the microphone so that it gets on the video",
    "start": "1532930",
    "end": "1538830"
  },
  {
    "text": "have you tried running the same benchmarks with something like Aurora so",
    "start": "1538830",
    "end": "1545470"
  },
  {
    "text": "we have run similar benchmarks in the past with Aurora but it wasn't really in the scope of what we were trying to discover here so this isn't intended to",
    "start": "1545470",
    "end": "1552640"
  },
  {
    "text": "be comparative to other types of database deployments in the cloud space",
    "start": "1552640",
    "end": "1557800"
  },
  {
    "text": "this is really focused on customers that are considering moving from bare metal to urban Nettie's we think in our",
    "start": "1557800",
    "end": "1565300"
  },
  {
    "text": "opinion we agree with what sugu said the other day in his keynote that to gain the agility of kubernetes you need your",
    "start": "1565300",
    "end": "1570550"
  },
  {
    "text": "data and communities to and part of what we're doing at Percona is trying to do this in a really community driven open-source way so that everybody can",
    "start": "1570550",
    "end": "1577120"
  },
  {
    "text": "get their data into kubernetes and the production-ready but part of that is to address the",
    "start": "1577120",
    "end": "1582370"
  },
  {
    "text": "barriers of entry like performance so we were very specifically focused on bare metal to kubernetes we we did not do any",
    "start": "1582370",
    "end": "1588610"
  },
  {
    "text": "comparative analysis but we have done separately benchmarked Aurora and it's on our blog if you're interested this",
    "start": "1588610",
    "end": "1595600"
  },
  {
    "text": "gentleman here in the MIS gentleman here did you guys consider the impactor farm",
    "start": "1595600",
    "end": "1601030"
  },
  {
    "text": "on storage so not for this so we very specifically isolated storage away it is",
    "start": "1601030",
    "end": "1607300"
  },
  {
    "text": "true that storage is also important for database performance but we want to make",
    "start": "1607300",
    "end": "1613210"
  },
  {
    "text": "sure that we're making effective and valid benchmarks so for benchmarking",
    "start": "1613210",
    "end": "1618790"
  },
  {
    "text": "networking we we intentionally set up a workload in a scenario where there would not be any real storage aspect to the",
    "start": "1618790",
    "end": "1626350"
  },
  {
    "text": "performance that was delivered how do you consider chaining together",
    "start": "1626350",
    "end": "1633610"
  },
  {
    "text": "multiple CN eyes cuz it looked like one of them was better at mounting both of the nicks and possibly changing another",
    "start": "1633610",
    "end": "1640330"
  },
  {
    "text": "one after that could you know kind of reap the benefits of both yeah it's not something we had in scope",
    "start": "1640330",
    "end": "1646179"
  },
  {
    "text": "but it's something we're interested in considering and if you want to talk after I'd be happy to have a discussion about that oh this this gentleman",
    "start": "1646179",
    "end": "1656739"
  },
  {
    "text": "actually over here in the blue oh sure yeah if you want to see a comparison of",
    "start": "1656739",
    "end": "1662049"
  },
  {
    "text": "benchmarking across different storage types check video from the last two coop",
    "start": "1662049",
    "end": "1667720"
  },
  {
    "text": "cons Barcelona yeah why should you know from Barcelona and Seattle various people have had presentations",
    "start": "1667720",
    "end": "1674320"
  },
  {
    "text": "about that including me okay and this this gentleman and the blue over here I think was next sorry sorry please wait",
    "start": "1674320",
    "end": "1682419"
  },
  {
    "text": "for the microphone so I see a one of",
    "start": "1682419",
    "end": "1687759"
  },
  {
    "text": "your figures you measured the network super have you also measured the like",
    "start": "1687759",
    "end": "1693609"
  },
  {
    "text": "point-to-point network latency and yeah so so latency network latency with",
    "start": "1693609",
    "end": "1700629"
  },
  {
    "text": "measure today yeah it wasn't really measured as part of this I mean I perf does give some results but we were we",
    "start": "1700629",
    "end": "1708009"
  },
  {
    "text": "were looking at throughput primarily obviously latency has an impact on throughput once you get to database",
    "start": "1708009",
    "end": "1713919"
  },
  {
    "text": "workloads so it's part of something we'd like to expand on here but the way that",
    "start": "1713919",
    "end": "1719710"
  },
  {
    "text": "we reported the results right now is it's is its associated to throughput out of iperf for pod to pod this gentleman",
    "start": "1719710",
    "end": "1730330"
  },
  {
    "text": "here and then this gentleman here how are your benchmark you know it's talking to your main database was it a",
    "start": "1730330",
    "end": "1737889"
  },
  {
    "text": "node port and then internally for node communication was that pot was that pot",
    "start": "1737889",
    "end": "1743139"
  },
  {
    "text": "IP to pot idea where there was there any cube proxy service IP is going on in there so client talk to notes through",
    "start": "1743139",
    "end": "1751929"
  },
  {
    "text": "north port and the internal node in internally pods communicated through",
    "start": "1751929",
    "end": "1758789"
  },
  {
    "text": "through network yeah through the through the through the pod network network yeah",
    "start": "1758789",
    "end": "1764740"
  },
  {
    "text": "we didn't use any queue proxy in there so maybe it's a similar question but how",
    "start": "1764740",
    "end": "1772260"
  },
  {
    "text": "did you make sure that the iperf numbers were using the exact same networking",
    "start": "1772260",
    "end": "1777690"
  },
  {
    "text": "pass as the database was using in in its operations okay",
    "start": "1777690",
    "end": "1784169"
  },
  {
    "text": "so essentially because the 10 gig and",
    "start": "1784169",
    "end": "1789600"
  },
  {
    "text": "one gig network interfaces on the host were on completely separate layer two in",
    "start": "1789600",
    "end": "1795529"
  },
  {
    "text": "environments and all of the internal communication based on the configuration of the database was going across the",
    "start": "1795529",
    "end": "1803149"
  },
  {
    "text": "interfaces provided on the 10 gig and in most cases the only real case where we had to explicitly do that was with SRV",
    "start": "1803149",
    "end": "1810360"
  },
  {
    "text": "because it provided two interfaces all the other network plugins basically provided d-pod network and the pod",
    "start": "1810360",
    "end": "1817049"
  },
  {
    "text": "network was on 10 gigs so there was no other path but with SRV we explicitly configured the database to go across the",
    "start": "1817049",
    "end": "1823139"
  },
  {
    "text": "10 gig interface so I think that answers your question hi can you comment on the",
    "start": "1823139",
    "end": "1830039"
  },
  {
    "text": "variability in the graph with all the results can I'm sorry can you really",
    "start": "1830039",
    "end": "1835200"
  },
  {
    "text": "very variability of the results the variability of the results yes what what",
    "start": "1835200",
    "end": "1842279"
  },
  {
    "text": "about the variability whether in bare metal you had more noise or variability than the others yes",
    "start": "1842279",
    "end": "1851570"
  },
  {
    "start": "1850000",
    "end": "2090000"
  },
  {
    "text": "I'm not sure I understand the question can you repeat like the set of the VA",
    "start": "1851570",
    "end": "1857220"
  },
  {
    "text": "ssin of the results if you had ah ok no so we we don't have that in a reportable",
    "start": "1857220",
    "end": "1862559"
  },
  {
    "text": "format right now but yes we have all the results collected in a spreadsheet I apologize that wasn't reported in here",
    "start": "1862559",
    "end": "1869039"
  },
  {
    "text": "and I can't say off the top my head so typically well",
    "start": "1869039",
    "end": "1874340"
  },
  {
    "text": "let me commander said typically when I measure database results unless it's",
    "start": "1874809",
    "end": "1881660"
  },
  {
    "text": "very specific environment I want to see that results very stable that's very",
    "start": "1881660",
    "end": "1888740"
  },
  {
    "text": "minimal or availability the only issue we had like Tyler mentioned with flannel",
    "start": "1888740",
    "end": "1895809"
  },
  {
    "text": "reacts net plugin that we reserved some",
    "start": "1895809",
    "end": "1903200"
  },
  {
    "text": "stalls in databases outlet it was stable results and was a drop to zero for a",
    "start": "1903200",
    "end": "1909950"
  },
  {
    "text": "couple of seconds and again stable stable result so that only wish only",
    "start": "1909950",
    "end": "1915740"
  },
  {
    "text": "issues variability we observed in this",
    "start": "1915740",
    "end": "1922270"
  },
  {
    "text": "all right any other questions if not then please feel free to reach out to us",
    "start": "1923799",
    "end": "1930140"
  },
  {
    "text": "by going to our booth in the expo hall area or just find one of us in the",
    "start": "1930140",
    "end": "1935360"
  },
  {
    "text": "hallway and we're happy to talk thank you [Applause]",
    "start": "1935360",
    "end": "1943520"
  },
  {
    "text": "you",
    "start": "1955230",
    "end": "1957290"
  }
]