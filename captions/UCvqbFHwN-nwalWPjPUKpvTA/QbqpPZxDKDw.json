[
  {
    "text": "um hello welcome to the Sig auth Deep dive my name is Tim all Claire I'm a sigots",
    "start": "780",
    "end": "7319"
  },
  {
    "text": "sub-project owner and Emeritus chair I'm Rita Jane I'm also a Sig auth",
    "start": "7319",
    "end": "13500"
  },
  {
    "text": "co-chair I'm Mo Khan I'm also one of the co-chairs welcome",
    "start": "13500",
    "end": "20539"
  },
  {
    "text": "um so for our topics today uh we are just going to go through a bunch of the work that sagoth is has in the pipeline",
    "start": "22560",
    "end": "30060"
  },
  {
    "text": "a few things that are basically finished so we've got a couple things that",
    "start": "30060",
    "end": "35880"
  },
  {
    "text": "recently graduated to stable that we're going to talk about um a bunch of things that are kind of uh",
    "start": "35880",
    "end": "42420"
  },
  {
    "text": "in the progress of being implemented and then a few uh provisional",
    "start": "42420",
    "end": "48320"
  },
  {
    "text": "a few caps that were still working through the design of",
    "start": "48420",
    "end": "54500"
  },
  {
    "text": "so um show of hands who here is familiar with pod security admission",
    "start": "55260",
    "end": "61820"
  },
  {
    "text": "all right pretty good um yeah so pod security admission graduated to stable in 125 which is the",
    "start": "61860",
    "end": "69180"
  },
  {
    "text": "same release that pod security policy was removed from Trey in um support security admission we",
    "start": "69180",
    "end": "75420"
  },
  {
    "text": "designed to be like super simple security out of the box for kubernetes enabled by default it's not",
    "start": "75420",
    "end": "82799"
  },
  {
    "text": "exactly well it's not at all a feature complete replacement for pod security policy and so this was kind of covering",
    "start": "82799",
    "end": "90420"
  },
  {
    "text": "the like you know 80 or 90 use case and then for everything else uh we're",
    "start": "90420",
    "end": "97320"
  },
  {
    "text": "referring people to um uh the whole ecosystem of policy engines",
    "start": "97320",
    "end": "102600"
  },
  {
    "text": "and other options around that um",
    "start": "102600",
    "end": "108259"
  },
  {
    "text": "yeah uh oh wait you want to talk about the tool the migration tool",
    "start": "108259",
    "end": "114299"
  },
  {
    "text": "yeah so I did a talk on the uh topic of migrating from cloud security policy to",
    "start": "114299",
    "end": "120840"
  },
  {
    "text": "pod security admission um yesterday so if you can manage to catch that um and you're interested in",
    "start": "120840",
    "end": "126000"
  },
  {
    "text": "that I recommend watching the replay oh sorry",
    "start": "126000",
    "end": "131160"
  },
  {
    "text": "um yeah we also have some guides published on how to do that migration and we have",
    "start": "131160",
    "end": "137940"
  },
  {
    "text": "a there's a kubernetes sigs project uh called PSP migrator which automates a",
    "start": "137940",
    "end": "144480"
  },
  {
    "text": "bunch of the tasks in the the migration workflow like um uh identifying mutating PSPs which when",
    "start": "144480",
    "end": "153180"
  },
  {
    "text": "you disable that can potentially cause problems with things that no longer work",
    "start": "153180",
    "end": "159560"
  },
  {
    "text": "so if you're familiar with certificates and the CSR API within kubernetes traditionally speaking when you ask for",
    "start": "161099",
    "end": "168599"
  },
  {
    "text": "a certificate you were completely on the whim of the signer to decide the length of that certificate which for all",
    "start": "168599",
    "end": "176040"
  },
  {
    "text": "intensive purposes meant somewhere between one and five years there's a cert that came out with no revocation attached so amazing security",
    "start": "176040",
    "end": "183860"
  },
  {
    "text": "but we fixed that not too long ago so now if you want you can request the",
    "start": "183860",
    "end": "190440"
  },
  {
    "text": "duration of your certificate to be shortened as low as 10 minutes and all the built-in signers to the controller",
    "start": "190440",
    "end": "196560"
  },
  {
    "text": "manager honor this the gke signer honors the assert manager signers honors this and",
    "start": "196560",
    "end": "202080"
  },
  {
    "text": "I think I found all the ones that were open source and I fixed them so it's optional but well supported I think now",
    "start": "202080",
    "end": "211220"
  },
  {
    "text": "all right um so now we're going to talk about the implementable Caps that are that the the",
    "start": "213060",
    "end": "220739"
  },
  {
    "text": "stake is currently working on um how many of y'all are using KMS",
    "start": "220739",
    "end": "227819"
  },
  {
    "text": "encryption or encryption at rest at all I just wanted to show a hand cool thank",
    "start": "227819",
    "end": "233700"
  },
  {
    "text": "you great thank you for doing that for your companies um uh so yeah so for both we came for",
    "start": "233700",
    "end": "241980"
  },
  {
    "text": "both V1 and V2 um there's been some changes uh that that's coming along uh for example",
    "start": "241980",
    "end": "248280"
  },
  {
    "text": "default crypto algorithm for KMS data encryption is Now default to GCM so uh",
    "start": "248280",
    "end": "256919"
  },
  {
    "text": "for those who didn't want to use CBC now that is available by default in 124 you",
    "start": "256919",
    "end": "263400"
  },
  {
    "text": "can still use CBC and both CBC and GCM are in read-only format and we're",
    "start": "263400",
    "end": "270720"
  },
  {
    "text": "starting in 125 right we'll start using GCM by default but read can still",
    "start": "270720",
    "end": "277320"
  },
  {
    "text": "support GCM and CM CBC for backward compatibility",
    "start": "277320",
    "end": "282600"
  },
  {
    "text": "uh and then starting from KMS V2 the default will only be GCM",
    "start": "282600",
    "end": "288620"
  },
  {
    "text": "and for those who may be following the state Gothic PRS we just merged a crd",
    "start": "288620",
    "end": "297479"
  },
  {
    "text": "encryption uh yesterday so really excited about this what this means for you is in starting in 126 you can now",
    "start": "297479",
    "end": "306060"
  },
  {
    "text": "encrypt your custom resources and just add your custom resource in the list of",
    "start": "306060",
    "end": "312360"
  },
  {
    "text": "resources in in your encryption configuration and your pandas are happy",
    "start": "312360",
    "end": "319220"
  },
  {
    "text": "um and uh also um you know as we kind of look at encryption at rest we're also wondering",
    "start": "319919",
    "end": "325860"
  },
  {
    "text": "um do the community does the community actually want to encrypt all the resources right so we currently have an",
    "start": "325860",
    "end": "332160"
  },
  {
    "text": "issue open out there if you think this is important to you um you know a wild card that actually",
    "start": "332160",
    "end": "337680"
  },
  {
    "text": "encrypts everything as we think should be the default behavior for kubernetes you know secure by default",
    "start": "337680",
    "end": "344460"
  },
  {
    "text": "um please plus one or let us know your uh if there's an interest there and if so we would like to also push for that",
    "start": "344460",
    "end": "352020"
  },
  {
    "text": "and perhaps make that a default Behavior going forward uh so please look for that issue",
    "start": "352020",
    "end": "359060"
  },
  {
    "text": "and we also have hot reload for encryption configuration especially for",
    "start": "359060",
    "end": "365220"
  },
  {
    "text": "folks who have done this in the past you all know how hard it is to make updates there which will also require a API",
    "start": "365220",
    "end": "372660"
  },
  {
    "text": "server restart which is very problematic and could put your cluster at risk and",
    "start": "372660",
    "end": "379740"
  },
  {
    "text": "so with hot reload changes will actually be watched and then starting in 126 we'll have this",
    "start": "379740",
    "end": "387120"
  },
  {
    "text": "and then the debt cash for now is only reset on reload",
    "start": "387120",
    "end": "393680"
  },
  {
    "text": "uh again for those of you who've used KMS encryption V1 I'm sure you've known",
    "start": "394460",
    "end": "400199"
  },
  {
    "text": "this gaps for a while and this is I think we introduced KMS V1 what 110 or",
    "start": "400199",
    "end": "406380"
  },
  {
    "text": "something like that so this is years ago right and it's still in V1 beta 1. and",
    "start": "406380",
    "end": "412139"
  },
  {
    "text": "we would like to change that right so some of the gaps that we have learned along the way uh are you know uh",
    "start": "412139",
    "end": "419039"
  },
  {
    "text": "performance right this is why we couldn't push this to stable right uh",
    "start": "419039",
    "end": "424080"
  },
  {
    "text": "with currently with V1 performance is pretty bad if you have large number of uh secret objects that you want to",
    "start": "424080",
    "end": "430800"
  },
  {
    "text": "encrypt which can actually slow down your cluster startup time right and and",
    "start": "430800",
    "end": "436860"
  },
  {
    "text": "the reason for that is all the requests actually are making uh remote requests",
    "start": "436860",
    "end": "441900"
  },
  {
    "text": "against the remote KMS and your request can also be re-limited right again this",
    "start": "441900",
    "end": "449160"
  },
  {
    "text": "is not great if you're trying to create a cluster right and then key rotation is another problem problem right again if",
    "start": "449160",
    "end": "455520"
  },
  {
    "text": "you're an operator you've been managing your kubernetes cluster you know how problematic this is today is a very",
    "start": "455520",
    "end": "462419"
  },
  {
    "text": "manual process very error prone and hard to determine which key is actually in",
    "start": "462419",
    "end": "468060"
  },
  {
    "text": "use right so again we would like to change that and we also thought about",
    "start": "468060",
    "end": "473699"
  },
  {
    "text": "what kind of health check and status that operators would love to have today whenever we want to check the health of",
    "start": "473699",
    "end": "482099"
  },
  {
    "text": "a KMS plugin yeah the the API server will have to make a an actual encrypt or",
    "start": "482099",
    "end": "487319"
  },
  {
    "text": "decrypt request which is not ideal and the Health Data is actually not very useful",
    "start": "487319",
    "end": "494220"
  },
  {
    "text": "um and last but not least we want observability right uh and today because there's no tracing ID it's very hard to",
    "start": "494220",
    "end": "501599"
  },
  {
    "text": "correlate events in the logs so you actually don't know which request went from the API server to the plugin and",
    "start": "501599",
    "end": "508740"
  },
  {
    "text": "then to the actual remote KMS so we would like to also change that",
    "start": "508740",
    "end": "514620"
  },
  {
    "text": "and here we're introducing a KMS V2 Alpha One again this is uh this went",
    "start": "514620",
    "end": "521459"
  },
  {
    "text": "into Alpha in v125 so if you want to check it out these the the cap is there",
    "start": "521459",
    "end": "528720"
  },
  {
    "text": "as well as some usage guidance in the kubernetes docs website so to use this",
    "start": "528720",
    "end": "535260"
  },
  {
    "text": "feature you would enable the API server feature gate to use KMS V2 and again",
    "start": "535260",
    "end": "542760"
  },
  {
    "text": "this comes with GCM by default and it's going it's Alpha in 125 and 126 and",
    "start": "542760",
    "end": "550200"
  },
  {
    "text": "we're hoping to Target beta in 127. again if you want to get involved please join the um the say goth KMS Dev channel",
    "start": "550200",
    "end": "559260"
  },
  {
    "text": "on kubernetes Slack again some of the benefits you know we talked about the gaps now what do you",
    "start": "559260",
    "end": "565920"
  },
  {
    "text": "get with the V2 uh again so for performance we actually have uh a",
    "start": "565920",
    "end": "571320"
  },
  {
    "text": "reference implementation to help all the KMS plugins out there to see how you can",
    "start": "571320",
    "end": "577019"
  },
  {
    "text": "leverage uh the recommended approach which has a key hierarchy design such",
    "start": "577019",
    "end": "582899"
  },
  {
    "text": "that you will have a local key encryption key so that you reduce the",
    "start": "582899",
    "end": "588720"
  },
  {
    "text": "number of remote requests that you have to make to the remote KMS uh and and",
    "start": "588720",
    "end": "593940"
  },
  {
    "text": "again we are targeting 126 to have this reference implementation",
    "start": "593940",
    "end": "599339"
  },
  {
    "text": "uh and for key rotation uh we have now added beta metadata to track the actual",
    "start": "599339",
    "end": "605700"
  },
  {
    "text": "canvas key that has been being used for each request and again this allows us to",
    "start": "605700",
    "end": "612240"
  },
  {
    "text": "actually have automated rotation without having to restart the K the API server",
    "start": "612240",
    "end": "619080"
  },
  {
    "text": "and we've introduced a new status API so again the API server can just call this",
    "start": "619080",
    "end": "625500"
  },
  {
    "text": "status API to track the health of the plugins separated out from actual encryption and",
    "start": "625500",
    "end": "631620"
  },
  {
    "text": "decryption requests last but not least we also added a new uid which is generated for each envelope",
    "start": "631620",
    "end": "639300"
  },
  {
    "text": "operation and again this helps us identify which requests actually went",
    "start": "639300",
    "end": "644519"
  },
  {
    "text": "through the the entire uh workflow and we also have a new Proto format for the",
    "start": "644519",
    "end": "651300"
  },
  {
    "text": "data that is stored in SCD and again this is to give operators the ability to use a you know a protobuf viewer to",
    "start": "651300",
    "end": "659279"
  },
  {
    "text": "actually see the data that is stored in sdd all right this is going to be really",
    "start": "659279",
    "end": "665579"
  },
  {
    "text": "hard to um so just bear with me I kind of want to walk you through a a day in the life",
    "start": "665579",
    "end": "672300"
  },
  {
    "text": "of an encryption and decryption request what does that actually look like",
    "start": "672300",
    "end": "678079"
  },
  {
    "text": "um so as you can see imagine you have an encryption request coming from the API server what we're introducing is this",
    "start": "678180",
    "end": "685019"
  },
  {
    "text": "high arc key hierarchy concept right so today with existing uh KMS plugins the",
    "start": "685019",
    "end": "693420"
  },
  {
    "text": "request comes in uh the plugin sends it to the KMS the remote KMS encrypts the",
    "start": "693420",
    "end": "699420"
  },
  {
    "text": "the the data encryption key and Returns the encrypted key back to the API server",
    "start": "699420",
    "end": "705480"
  },
  {
    "text": "that's how it works today with this new key hierarchy design what",
    "start": "705480",
    "end": "710820"
  },
  {
    "text": "this means is you the plug-in developer can actually add a local Keck cache that",
    "start": "710820",
    "end": "718800"
  },
  {
    "text": "basically says Hey for all the request all the encryption and decryption I'm going to use this local Tech which is",
    "start": "718800",
    "end": "725519"
  },
  {
    "text": "going to be encrypted by the remote key right that's stored in the remote KMS",
    "start": "725519",
    "end": "731480"
  },
  {
    "text": "and then that is actually the key that is going to be encrypted and that will",
    "start": "731480",
    "end": "736800"
  },
  {
    "text": "also be the key that is cached in the plugin and that data is get gets",
    "start": "736800",
    "end": "742260"
  },
  {
    "text": "returned to the encryption response and then the API server says hey looks like",
    "start": "742260",
    "end": "747839"
  },
  {
    "text": "here's my encrypted data encryption key and here's the key that I'm using for",
    "start": "747839",
    "end": "753480"
  },
  {
    "text": "the remote key that I'm using and here's the local key encryption key that is",
    "start": "753480",
    "end": "760620"
  },
  {
    "text": "cached by the plugin and similarly for decryption now imagine",
    "start": "760620",
    "end": "769019"
  },
  {
    "text": "you have this key hierarchy design right the API server says hey looks like this",
    "start": "769019",
    "end": "775620"
  },
  {
    "text": "this request actually is using a local Tech so I'm going to ask the cash the",
    "start": "775620",
    "end": "781380"
  },
  {
    "text": "the the key cash to look for the local key encryption key and if that's found",
    "start": "781380",
    "end": "787019"
  },
  {
    "text": "I'm going to use that instead of making a remote request right and that will",
    "start": "787019",
    "end": "792180"
  },
  {
    "text": "also be the key that is used for decryption uh and then uh and then",
    "start": "792180",
    "end": "797820"
  },
  {
    "text": "that's the key that is stored in KMS in SCD as well what this means is you're",
    "start": "797820",
    "end": "804180"
  },
  {
    "text": "reducing thousands and thousands of requests to the remote KMS down to you",
    "start": "804180",
    "end": "809579"
  },
  {
    "text": "know n number of uh requests just depending on how you set up the the configuration so if you have three API",
    "start": "809579",
    "end": "817139"
  },
  {
    "text": "servers potentially you only make three requests to your remote KMS which is",
    "start": "817139",
    "end": "822660"
  },
  {
    "text": "beautiful you you save money and you reduce the the performance impact",
    "start": "822660",
    "end": "829700"
  },
  {
    "text": "so what does that Proto buff format look like as I mentioned earlier here as you",
    "start": "829740",
    "end": "835260"
  },
  {
    "text": "can see the data that is actually stored on SCD there's a prefix looks very",
    "start": "835260",
    "end": "840959"
  },
  {
    "text": "similar to V1 it will say KMS V2 and then the actual object is actually",
    "start": "840959",
    "end": "847139"
  },
  {
    "text": "stored in this beautiful structured Proto format and as you can see there's",
    "start": "847139",
    "end": "852720"
  },
  {
    "text": "the encrypted data and then there's the encrypted data encryption key which are encrypted however the key ID and the",
    "start": "852720",
    "end": "860459"
  },
  {
    "text": "annotations are not not stored in an encrypted format so that as an operator",
    "start": "860459",
    "end": "867899"
  },
  {
    "text": "you can actually go in and look at this data and understand which key was actually used for encryption and",
    "start": "867899",
    "end": "874200"
  },
  {
    "text": "decryption and then there's also a little room where if you want to add things you could add to The annotation a",
    "start": "874200",
    "end": "881399"
  },
  {
    "text": "very very tiny space there all right",
    "start": "881399",
    "end": "887420"
  },
  {
    "text": "thank you Rita uh so I guess as a member of cigarth at some point I got exhausted",
    "start": "889500",
    "end": "894839"
  },
  {
    "text": "by not knowing who I was on a kubernetes cluster so we added an API so you can do that so it's Alpha and 126.",
    "start": "894839",
    "end": "903420"
  },
  {
    "text": "and I expect basically no changes to this API because there's basically no inputs and I don't really know what else it would do so hope to see that one soon",
    "start": "903420",
    "end": "912920"
  },
  {
    "text": "so anyone here familiar with client go credential plugins anyone seeing all the",
    "start": "913560",
    "end": "919380"
  },
  {
    "text": "fun warnings coming out of like the gke UCLA thing it's going to get deleted soon",
    "start": "919380",
    "end": "925100"
  },
  {
    "text": "same as true for a cast don't worry um but uh if you're familiar with the",
    "start": "925100",
    "end": "931680"
  },
  {
    "text": "interface that that mechanism has it requires that the credential that is",
    "start": "931680",
    "end": "937620"
  },
  {
    "text": "used for authentication be directly passed to client go or cube CTO as an",
    "start": "937620",
    "end": "943560"
  },
  {
    "text": "example that means it cannot be based off of like the hardware-based uh credential",
    "start": "943560",
    "end": "950880"
  },
  {
    "text": "because Hardware doesn't give you the credential so this is an extension to that existing",
    "start": "950880",
    "end": "956940"
  },
  {
    "text": "API that will allow us to support something like uh mtls with you know",
    "start": "956940",
    "end": "962160"
  },
  {
    "text": "keys that are stored in the KMS as well as if you want to run like a front proxy",
    "start": "962160",
    "end": "967260"
  },
  {
    "text": "in front of your API server and you want to have signed requests it'll be able to do that or maybe you just want to add",
    "start": "967260",
    "end": "973500"
  },
  {
    "text": "some custom headers for logging or audit purposes all those things will be possible so instead of just purely being",
    "start": "973500",
    "end": "979800"
  },
  {
    "text": "able to pass a credential you'll be able to basically fully control the request before it's sent to the API server",
    "start": "979800",
    "end": "986839"
  },
  {
    "text": "um continuing on with the theme for certificates we want to make it easier for consumption of like certificates and",
    "start": "987360",
    "end": "995699"
  },
  {
    "text": "signers within the kubernetes ecosystem as a first small step in that direction",
    "start": "995699",
    "end": "1001899"
  },
  {
    "text": "we are working on adding a dedicated API called the cluster trust bundle to allow",
    "start": "1001899",
    "end": "1007339"
  },
  {
    "text": "you to specify CA bundles that can be reused in various contexts within the kubernetes API so the initial",
    "start": "1007339",
    "end": "1014060"
  },
  {
    "text": "implementation will just be available as something the cubelet can mount into your pots for you",
    "start": "1014060",
    "end": "1019639"
  },
  {
    "text": "uh going on in the future there's still some uncertainty exactly all the places will do this",
    "start": "1019639",
    "end": "1025660"
  },
  {
    "text": "one sort of obvious place is the kubernetes API server so for example if",
    "start": "1025660",
    "end": "1030918"
  },
  {
    "text": "you've ever had to configure CA bundles for admission web hooks uh it'd be really great if you could configure that",
    "start": "1030919",
    "end": "1036620"
  },
  {
    "text": "in one place and update it in one place and not have to remember every other place that you had to update that",
    "start": "1036620",
    "end": "1044000"
  },
  {
    "text": "one of the open questions there that's still undecided is the API server unlike",
    "start": "1044000",
    "end": "1049580"
  },
  {
    "text": "most clients is you know High memory High CPU we can kind of hold",
    "start": "1049580",
    "end": "1057020"
  },
  {
    "text": "it to a higher bar and traditionally we haven't had revocation support and",
    "start": "1057020",
    "end": "1062840"
  },
  {
    "text": "certificates in kubernetes but this is one place we're exploring being able to add like crl support so that way if you",
    "start": "1062840",
    "end": "1070940"
  },
  {
    "text": "wanted to revoke a cert at least the API server would honor it for you and I suspect that's a client that many people",
    "start": "1070940",
    "end": "1076820"
  },
  {
    "text": "care about uh",
    "start": "1076820",
    "end": "1081399"
  },
  {
    "text": "um yeah so Legacy service count tokens are the secret based service count",
    "start": "1086660",
    "end": "1093200"
  },
  {
    "text": "tokens that kubernetes originally had in uh I can't remember when did we",
    "start": "1093200",
    "end": "1100520"
  },
  {
    "text": "introduce bound service count tokens I think 2023",
    "start": "1100520",
    "end": "1107140"
  },
  {
    "text": "I think it was GA I think in 122. Okay so in the last",
    "start": "1107240",
    "end": "1112700"
  },
  {
    "text": "two years yeah it's been a long time we had a bound service count tokens which are generated on the Fly for a pod",
    "start": "1112700",
    "end": "1120679"
  },
  {
    "text": "running with those service counts um with that service count or anything that",
    "start": "1120679",
    "end": "1126020"
  },
  {
    "text": "wants to create a token review request those also expire they're bound to they",
    "start": "1126020",
    "end": "1132559"
  },
  {
    "text": "have a expiration time you need to be refreshed they're also bound to the Pod life cycle",
    "start": "1132559",
    "end": "1138559"
  },
  {
    "text": "um but we still in kubernetes have these uh Legacy service account tokens that",
    "start": "1138559",
    "end": "1144320"
  },
  {
    "text": "are still generated for uh each um well they were still generated for",
    "start": "1144320",
    "end": "1149780"
  },
  {
    "text": "each uh service count and so you still have these secrets that if someone managed to if if those got leaked they",
    "start": "1149780",
    "end": "1157580"
  },
  {
    "text": "would still be used could still be used they weren't they never expired",
    "start": "1157580",
    "end": "1163299"
  },
  {
    "text": "and so we're excited to be able to to get rid of those for cases that don't",
    "start": "1163299",
    "end": "1168679"
  },
  {
    "text": "need it so as of 124 we're no longer Auto generating those",
    "start": "1168679",
    "end": "1176419"
  },
  {
    "text": "and then in 126 we're adding an alpha to make it easier to migrate clusters off",
    "start": "1176419",
    "end": "1182840"
  },
  {
    "text": "of Legacy service count tokens and so there's uh if this feature is enabled",
    "start": "1182840",
    "end": "1188299"
  },
  {
    "text": "there's a couple tracking uh features that get added so",
    "start": "1188299",
    "end": "1194720"
  },
  {
    "text": "the um so if you do use the Legacy service",
    "start": "1194720",
    "end": "1200720"
  },
  {
    "text": "account tokens it gets a warning there's actually like labels that get added to",
    "start": "1200720",
    "end": "1206059"
  },
  {
    "text": "the secret itself to represent the that",
    "start": "1206059",
    "end": "1211520"
  },
  {
    "text": "to show that those have been used and uh yeah make it easier to identify",
    "start": "1211520",
    "end": "1218000"
  },
  {
    "text": "the use and and migrate off of those",
    "start": "1218000",
    "end": "1222220"
  },
  {
    "text": "uh so as an explanation of what provisional means here uh the things",
    "start": "1228080",
    "end": "1233179"
  },
  {
    "text": "we're about to talk about are completely up in the air at this exact moment there",
    "start": "1233179",
    "end": "1238220"
  },
  {
    "text": "isn't necessarily agreement among the Sig or the community that this is where we're going but there are kepts open for",
    "start": "1238220",
    "end": "1244580"
  },
  {
    "text": "this and also if you want to get involved this is a great place because we haven't written any code yet",
    "start": "1244580",
    "end": "1251600"
  },
  {
    "text": "um so folks are familiar with the existing oidc integration that the kubernetes API server supports it's very",
    "start": "1251600",
    "end": "1258620"
  },
  {
    "text": "limited you can only have one and sort of the control you get over the identity",
    "start": "1258620",
    "end": "1263900"
  },
  {
    "text": "that's asserted in the kubernetes API is pretty Limited and it's really hard-coded to support ID",
    "start": "1263900",
    "end": "1270799"
  },
  {
    "text": "tokens from the oidc spec even though the ordc folks disagree with our use of that",
    "start": "1270799",
    "end": "1277520"
  },
  {
    "text": "so some of the things that this new API fixes is you can have as many providers",
    "start": "1277520",
    "end": "1283580"
  },
  {
    "text": "as you want and following along the less the rest of the kubernetes community we",
    "start": "1283580",
    "end": "1289100"
  },
  {
    "text": "are hoping to use cell to give you much more flexibility around how you actually",
    "start": "1289100",
    "end": "1294500"
  },
  {
    "text": "assert the identity to the kubernetes API server as well as how you validate constraints on those identities so you",
    "start": "1294500",
    "end": "1301400"
  },
  {
    "text": "can kind of see some examples on the bottom for how you would validate that an identity is something that is allowed",
    "start": "1301400",
    "end": "1308059"
  },
  {
    "text": "to be on this cluster as well as how you would actually do the final extraction of claims",
    "start": "1308059",
    "end": "1314059"
  },
  {
    "text": "uh our hope is uh like one of the things that I don't we I know we don't have agreement on right now is can this be",
    "start": "1314059",
    "end": "1320659"
  },
  {
    "text": "used outside of kubernetes ID or outside of oidcid tokens so I see spiffy shirts",
    "start": "1320659",
    "end": "1327380"
  },
  {
    "text": "I see Spire shirts I see spiffy people yeah and I mean I'm looking uh so I mean",
    "start": "1327380",
    "end": "1333559"
  },
  {
    "text": "perhaps we could use this for uh dots you know that'd be cool I haven't convinced Jordan yet",
    "start": "1333559",
    "end": "1341360"
  },
  {
    "text": "I know but the uh another thing I want to be able to do is",
    "start": "1341360",
    "end": "1347419"
  },
  {
    "text": "today tokens have just a hard-coded 10 second cache just to like completely uh",
    "start": "1347419",
    "end": "1353419"
  },
  {
    "text": "cause to prevent like a Dos against the API server but otherwise like if you have a web hook it's a pure hard-coded",
    "start": "1353419",
    "end": "1360620"
  },
  {
    "text": "cache of like some number of minutes whatever you configure in the case of jots you know we we can",
    "start": "1360620",
    "end": "1368360"
  },
  {
    "text": "have a claim that tells us the expiration time so you know you can imagine a much more intelligent cache",
    "start": "1368360",
    "end": "1373700"
  },
  {
    "text": "the caches it to that duration or until like a key rotation occurs you know whichever one happens first so just all",
    "start": "1373700",
    "end": "1380480"
  },
  {
    "text": "around better semantics sort of following in that same Trend today you can only have one",
    "start": "1380480",
    "end": "1387200"
  },
  {
    "text": "authorization web hook configured on the API server so we want to be able to support",
    "start": "1387200",
    "end": "1392740"
  },
  {
    "text": "as many as people would want in whatever order they want to run them in if folks don't know today if your",
    "start": "1392740",
    "end": "1400039"
  },
  {
    "text": "authorization Web book is down we fail open so if it was a web hook that could",
    "start": "1400039",
    "end": "1405740"
  },
  {
    "text": "have denied a request we won't know we'll just we'll just keep going which is not exactly what people expect",
    "start": "1405740",
    "end": "1413240"
  },
  {
    "text": "another thing that we want to make it really easy to do is unlike admission that only runs on like create update and",
    "start": "1413240",
    "end": "1419299"
  },
  {
    "text": "a few other places authorization always runs on every request so if you want to",
    "start": "1419299",
    "end": "1424760"
  },
  {
    "text": "be able to have many web hooks but not have any single one of them being down",
    "start": "1424760",
    "end": "1430039"
  },
  {
    "text": "completely catastrophic to your environment we want to let you Scope whence a web hook would be invoked so if",
    "start": "1430039",
    "end": "1436340"
  },
  {
    "text": "you know a web hook only interacts with like users from a particular IDP that all have a prefix you know we want we",
    "start": "1436340",
    "end": "1442700"
  },
  {
    "text": "want to be able to support that kind of use case or if you want to run the Web book on the API server well you're going",
    "start": "1442700",
    "end": "1448820"
  },
  {
    "text": "to have a bit of a circle in your dependency graph unless you can filter out certain identities from being targeted by that web hook",
    "start": "1448820",
    "end": "1455480"
  },
  {
    "text": "so we're considering cell-based filters there similar to KMS and various other",
    "start": "1455480",
    "end": "1460640"
  },
  {
    "text": "features and this is true for the oidc thing earlier as well we we don't want any API server restarts unless like",
    "start": "1460640",
    "end": "1466220"
  },
  {
    "text": "absolutely necessary so even though these things are CLI Flags we want to reload the config so that way if you can",
    "start": "1466220",
    "end": "1471980"
  },
  {
    "text": "change the file on disk you don't worry about anything else",
    "start": "1471980",
    "end": "1476320"
  },
  {
    "text": "so yeah and uh last but not least right we also",
    "start": "1477740",
    "end": "1483260"
  },
  {
    "text": "want to talk about some of the Cross six work that's been going on and I think all three actually are part",
    "start": "1483260",
    "end": "1490280"
  },
  {
    "text": "of API machinery and you know as we'll mentioned earlier multiple times so this",
    "start": "1490280",
    "end": "1497360"
  },
  {
    "text": "is the cell for emission control cap that's I think recently merged in one",
    "start": "1497360",
    "end": "1502880"
  },
  {
    "text": "for 126 and this is going to touch on you know policies for emission",
    "start": "1502880",
    "end": "1508640"
  },
  {
    "text": "validation mutation as well as authorization so there's a lot of overlap between the the two sticks and",
    "start": "1508640",
    "end": "1515900"
  },
  {
    "text": "then also we have storage version API cap and the aps server identity cap both",
    "start": "1515900",
    "end": "1521299"
  },
  {
    "text": "are very crucial to ensure we have ha on the API server which is the foundation",
    "start": "1521299",
    "end": "1526940"
  },
  {
    "text": "to ensure we can actually rotate the the KMS keys so it's actually our part of",
    "start": "1526940",
    "end": "1532279"
  },
  {
    "text": "the KMS V2 future as well anything you want to ask",
    "start": "1532279",
    "end": "1540100"
  },
  {
    "text": "um and of course we can do this without all of the new contributors that made this possible I just want to give a",
    "start": "1540320",
    "end": "1546799"
  },
  {
    "text": "quick shout out to all the folks who really really helped us drive a lot of these changes uh Anish Kristoff Damien",
    "start": "1546799",
    "end": "1554900"
  },
  {
    "text": "nilik Andrew Tahari if you're listening thank you for all your contributions",
    "start": "1554900",
    "end": "1560600"
  },
  {
    "text": "thank you thank you",
    "start": "1560600",
    "end": "1566679"
  },
  {
    "text": "and thank you for joining this talk and please use this QR code and give us your feedback thank you any questions",
    "start": "1566799",
    "end": "1573250"
  },
  {
    "text": "[Applause] thank you",
    "start": "1573250",
    "end": "1577900"
  },
  {
    "text": "[Applause] I can walk around with a mic",
    "start": "1578900",
    "end": "1585460"
  },
  {
    "text": "I think this is time for masking he describes some changes to the client go plugins to the interface and you",
    "start": "1589100",
    "end": "1596240"
  },
  {
    "text": "mentioned that you'll have more control over say having headers and such",
    "start": "1596240",
    "end": "1602020"
  },
  {
    "text": "is the and he said there was some concern about passing the data back through the the client go",
    "start": "1602380",
    "end": "1609380"
  },
  {
    "text": "Library so it's a little confusing how does the request make it out containing the contributions from the plugin",
    "start": "1609380",
    "end": "1618220"
  },
  {
    "text": "so we we went through a few designs on this uh like we I think the initial",
    "start": "1619039",
    "end": "1624380"
  },
  {
    "text": "version of this cap was open like almost a year and a half ago now but what we settled on was",
    "start": "1624380",
    "end": "1630919"
  },
  {
    "text": "it would be really hard to make an API that served everyone's use case and also",
    "start": "1630919",
    "end": "1636620"
  },
  {
    "text": "we were tired of extending this part so we wanted to be done so effectively what we do or what we're planning to do is",
    "start": "1636620",
    "end": "1644980"
  },
  {
    "text": "basically the plug-in can give us a proxy and we will just",
    "start": "1644980",
    "end": "1651260"
  },
  {
    "text": "connect to that proxy and we expect you to basically fully terminate the request and then you can do whatever you want",
    "start": "1651260",
    "end": "1657020"
  },
  {
    "text": "with it so please actually send it to the API server but if you don't that's also fine",
    "start": "1657020",
    "end": "1662900"
  },
  {
    "text": "I guess I mean let's use it's yeah it's uh it's uh yeah you get to do whatever you want because you make the request",
    "start": "1662900",
    "end": "1669919"
  },
  {
    "text": "not us so it's it's meant to be an incredibly powerful extension Point uh hopefully",
    "start": "1669919",
    "end": "1677299"
  },
  {
    "text": "that most time people don't need it but Nick from AWS and they wanted to make it",
    "start": "1677299",
    "end": "1686120"
  },
  {
    "text": "so their cubelets could do request signing back to AWS infra for example it's a great use case totally not",
    "start": "1686120",
    "end": "1691700"
  },
  {
    "text": "supported by the existing extension point but we're hoping that you know others can use it too so",
    "start": "1691700",
    "end": "1698980"
  },
  {
    "text": "are you guys excited about the new features that are coming [Applause]",
    "start": "1703940",
    "end": "1714380"
  },
  {
    "text": "oh Bridget one quick question thank you great talk",
    "start": "1714380",
    "end": "1721580"
  },
  {
    "text": "and I'm so excited about all those new features that are coming can you I would love to hear from any or all of you",
    "start": "1721580",
    "end": "1728299"
  },
  {
    "text": "which ones you think would be a great choice for new contributors to jump in on",
    "start": "1728299",
    "end": "1734000"
  },
  {
    "text": "foreign",
    "start": "1734000",
    "end": "1736179"
  },
  {
    "text": "I I think oh I'm sorry I I think the the",
    "start": "1743260",
    "end": "1748940"
  },
  {
    "text": "stuff that's provisional is certainly easier because we haven't written much or any code for a lot of it",
    "start": "1748940",
    "end": "1756340"
  },
  {
    "text": "the bar is a little bit higher than maybe we wanted to be but it is kind of",
    "start": "1756340",
    "end": "1761539"
  },
  {
    "text": "hard if for the cam sv2 stuff we do have a",
    "start": "1761539",
    "end": "1767779"
  },
  {
    "text": "dedicated GitHub board where there's quite a few issues that are not you know even started so if I don't know if",
    "start": "1767779",
    "end": "1774980"
  },
  {
    "text": "you're familiar with encryption at rest and want to suffer through API server wiring",
    "start": "1774980",
    "end": "1782240"
  },
  {
    "text": "then yeah that's that's for you also the to get involved you know coding is one",
    "start": "1782240",
    "end": "1788419"
  },
  {
    "text": "part but the other part is also give us your feedback right and like as we write the designs the cap we will love for",
    "start": "1788419",
    "end": "1794840"
  },
  {
    "text": "more feedback and reviews right and um because y'all are the ones that's going to use it",
    "start": "1794840",
    "end": "1801260"
  },
  {
    "text": "um like for example you know we have to work with all the KMS plugins right to to make sure the migration journey is",
    "start": "1801260",
    "end": "1809000"
  },
  {
    "text": "not going to be too terrible right that's why we're writing the reference implementation so please get involved",
    "start": "1809000",
    "end": "1815000"
  },
  {
    "text": "give us feedback or just tell us yeah this makes sense to me I'll I would prefer to use it this way or or maybe",
    "start": "1815000",
    "end": "1821659"
  },
  {
    "text": "this doesn't make sense and here's how I will like it um definitely welcome those type of",
    "start": "1821659",
    "end": "1826820"
  },
  {
    "text": "contributions um if I could just add I think uh those",
    "start": "1826820",
    "end": "1831980"
  },
  {
    "text": "are good answers for people who are experienced in this space but you know maybe not kubernetes but uh understand a",
    "start": "1831980",
    "end": "1838700"
  },
  {
    "text": "lot of the nuances of say goth have a lot to um add on the design aspects for",
    "start": "1838700",
    "end": "1844580"
  },
  {
    "text": "um like more kind of Junior contributors or people who aren't as experienced in this space I think actually the stable",
    "start": "1844580",
    "end": "1851120"
  },
  {
    "text": "features are a really good place to jump in um you know I've have a bunch of audit cleanups that I'm working on in the next",
    "start": "1851120",
    "end": "1857720"
  },
  {
    "text": "release it would be great to get some help on improving some of the testing around auditing and some of the other uh",
    "start": "1857720",
    "end": "1863720"
  },
  {
    "text": "graduated features have a lot of there's always room for cleanup and testing improvements as well yeah that so that",
    "start": "1863720",
    "end": "1870140"
  },
  {
    "text": "reminds me on the oidc a provisional cap one of the prereqs for",
    "start": "1870140",
    "end": "1876980"
  },
  {
    "text": "that cap is an open issue right now with I don't know like 20 20 things on a",
    "start": "1876980",
    "end": "1883580"
  },
  {
    "text": "list of like this is the missing test coverage for oidc so like and I have I have blocked new changes to",
    "start": "1883580",
    "end": "1890299"
  },
  {
    "text": "all of that code effectively because I don't trust it did not break if you touch it so",
    "start": "1890299",
    "end": "1897380"
  },
  {
    "text": "foreign okay great question uh thank you for the",
    "start": "1897380",
    "end": "1905779"
  },
  {
    "text": "presentation great design on the key caching I like the key wrapping part uh",
    "start": "1905779",
    "end": "1911299"
  },
  {
    "text": "I think that's really really cool thing and we'll solve a lot of latency issues",
    "start": "1911299",
    "end": "1917059"
  },
  {
    "text": "uh maybe just a general question what is the scope of a c who are you guys",
    "start": "1917059",
    "end": "1923360"
  },
  {
    "text": "focused on what is in scope what is out because I see authentication authorization at the same time",
    "start": "1923360",
    "end": "1932200"
  },
  {
    "text": "owns basically all authentication authorization policy",
    "start": "1934720",
    "end": "1941080"
  },
  {
    "text": "across kubernetes so like as well as like service accounts so basically if there",
    "start": "1941080",
    "end": "1946880"
  },
  {
    "text": "is a like a security aspect of some feature either we're a participating Sig or",
    "start": "1946880",
    "end": "1952520"
  },
  {
    "text": "we're the owning Sig um policy yeah policy as well so like uh",
    "start": "1952520",
    "end": "1958460"
  },
  {
    "text": "like to contrast us with six Security Six security exists to like help people that um",
    "start": "1958460",
    "end": "1965240"
  },
  {
    "text": "like for example say you work in I.T security or something and you're a consumer of kubernetes and you're building tools to run on kubernetes",
    "start": "1965240",
    "end": "1972440"
  },
  {
    "text": "they do a lot of that work and Outreach and help the community grow that way we focus more on like the core code within",
    "start": "1972440",
    "end": "1978620"
  },
  {
    "text": "kubernetes like pod security admission and all those things and how those mechanisms work but certainly there's a",
    "start": "1978620",
    "end": "1984320"
  },
  {
    "text": "lot of overlap between R6 and there's also a lot of overlap between say goth and API Machinery a lot yeah",
    "start": "1984320",
    "end": "1992539"
  },
  {
    "text": "yeah but none of our stuff works okay",
    "start": "1992539",
    "end": "2000059"
  },
  {
    "text": "there's like two yeah yeah first thank you for the talk it's",
    "start": "2003340",
    "end": "2008559"
  },
  {
    "text": "very nice uh I have a quick question about the upgrading it looks like some",
    "start": "2008559",
    "end": "2014559"
  },
  {
    "text": "features are like a brick broken feature without backward compatibility so is",
    "start": "2014559",
    "end": "2022419"
  },
  {
    "text": "there any plan we put some automation uh in the in the code when users do so that",
    "start": "2022419",
    "end": "2029080"
  },
  {
    "text": "when users do the upgrading they don't break their cluster they don't cause outage in the production environment was",
    "start": "2029080",
    "end": "2036220"
  },
  {
    "text": "was there a specific feature that looked breaking uh it's sorry it's like the",
    "start": "2036220",
    "end": "2042279"
  },
  {
    "text": "this looks like the algorithms you use GCM something oh okay so yeah so we were",
    "start": "2042279",
    "end": "2048339"
  },
  {
    "text": "very careful on that so yes that if we had done it poorly it would have indeed",
    "start": "2048339",
    "end": "2053980"
  },
  {
    "text": "been a breaking change but the way we wrote it uh so we we do require that you",
    "start": "2053980",
    "end": "2060878"
  },
  {
    "text": "follow the kubernetes release guidelines of no skip releases so you upgrade from one version to the next minor version or",
    "start": "2060879",
    "end": "2068440"
  },
  {
    "text": "major version whatever you want to call it in kubernetes land um but we always did it in a way so that",
    "start": "2068440",
    "end": "2075580"
  },
  {
    "text": "if you didn't upgrade and use the cluster realized something was wrong and did an immediate downgrade that neither",
    "start": "2075580",
    "end": "2082240"
  },
  {
    "text": "would have any data corruption so we we staged that over many releases and we",
    "start": "2082240",
    "end": "2088060"
  },
  {
    "text": "have retained basically Until the End of Time the capability of reading the old formatted",
    "start": "2088060",
    "end": "2093940"
  },
  {
    "text": "data so like KMS V1 actually has like I don't know like two Legacy formats that",
    "start": "2093940",
    "end": "2099400"
  },
  {
    "text": "are still supported in our code base even though we never wrote we never write them out and we haven't written them out in like 10 releases we just",
    "start": "2099400",
    "end": "2106119"
  },
  {
    "text": "assume that there might be some old data that's never been Rewritten so we are very careful I think the closest thing",
    "start": "2106119",
    "end": "2112240"
  },
  {
    "text": "we have to a breaking change is not auto-generating Secrets anymore for",
    "start": "2112240",
    "end": "2117339"
  },
  {
    "text": "service accounts but even then you what yeah plus security policy yeah",
    "start": "2117339",
    "end": "2124200"
  },
  {
    "text": "that one was I mean I mean you can it's unfortunate you can run it as a Web book if you really want it so",
    "start": "2124200",
    "end": "2130060"
  },
  {
    "text": "um that's fair we did remove a beta feature uh without graduating that's fair uh I don't think we'll end up doing",
    "start": "2130060",
    "end": "2136839"
  },
  {
    "text": "something similar for cam sv1 beta one uh mostly because it's I don't know if",
    "start": "2136839",
    "end": "2143619"
  },
  {
    "text": "you're happy with it I guess it doesn't really hurt us I guess keep using it whereas pot security policy did",
    "start": "2143619",
    "end": "2149079"
  },
  {
    "text": "cause all sorts of confusion and just mistakes I just want to call out",
    "start": "2149079",
    "end": "2154720"
  },
  {
    "text": "that you know you see no user action required that's very very important and this is",
    "start": "2154720",
    "end": "2161079"
  },
  {
    "text": "exactly why we want to make GCM as the default for right but for to read you",
    "start": "2161079",
    "end": "2167440"
  },
  {
    "text": "can still do uh both right but the hope is that slowly everybody would just",
    "start": "2167440",
    "end": "2173619"
  },
  {
    "text": "migrate to GCM we're at time but happy to stick around",
    "start": "2173619",
    "end": "2179859"
  },
  {
    "text": "and take more questions in the hallway thank you for coming [Applause]",
    "start": "2179859",
    "end": "2187659"
  }
]