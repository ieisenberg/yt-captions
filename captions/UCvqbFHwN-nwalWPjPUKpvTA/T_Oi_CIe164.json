[
  {
    "text": "all right hold on folks we have full room again curly CI CD is a popular topic so I'm",
    "start": "530",
    "end": "11790"
  },
  {
    "text": "curious how many of you have figured out your you know deployment story and",
    "start": "11790",
    "end": "18720"
  },
  {
    "text": "especially things like config generation config template tank any of that stuff",
    "start": "18720",
    "end": "25880"
  },
  {
    "text": "right and how many of you are really looking for a solution in that space",
    "start": "25880",
    "end": "31470"
  },
  {
    "text": "that any current tooling doesn't cover all right interesting well that's that's",
    "start": "31470",
    "end": "37230"
  },
  {
    "text": "really great I hope you you you'll get some useful information in the coming talker from Rohan Singh who is",
    "start": "37230",
    "end": "43710"
  },
  {
    "text": "infrastructure engineer at hustle and he's gonna talk about using kubernetes",
    "start": "43710",
    "end": "49379"
  },
  {
    "text": "with basil and helm actually and yeah well I mean or to Ron thanks morning so",
    "start": "49379",
    "end": "59129"
  },
  {
    "text": "yeah my name is Rohan and I'll be speaking with you about how you can use basil which is Google's multi-platform",
    "start": "59129",
    "end": "67619"
  },
  {
    "text": "build tool to manage configuration deploy things to cube clusters and also",
    "start": "67619",
    "end": "75930"
  },
  {
    "text": "try to get some helm in there at least that's what my session abstract says but",
    "start": "75930",
    "end": "83100"
  },
  {
    "text": "in all seriousness a lot of fun stuff about using basil with Cube has been",
    "start": "83100",
    "end": "89430"
  },
  {
    "text": "covered fairly well in some sessions over the past couple days in fact let me",
    "start": "89430",
    "end": "96420"
  },
  {
    "text": "ask how many folks in the room are familiar with basil at all okay awesome",
    "start": "96420",
    "end": "103860"
  },
  {
    "text": "well I figured we could change it up a bit for those of you who haven't heard",
    "start": "103860",
    "end": "109860"
  },
  {
    "text": "of basil or seeing anything about it at cube con yet no worries",
    "start": "109860",
    "end": "115380"
  },
  {
    "text": "I'm still gonna cover the basics but I also want to tell you a story about",
    "start": "115380",
    "end": "121100"
  },
  {
    "text": "trying to wrangle configuration and try to wrangle code while introducing cube",
    "start": "121100",
    "end": "126329"
  },
  {
    "text": "to a new organization story what went well but also a story of what all",
    "start": "126329",
    "end": "133860"
  },
  {
    "text": "perhaps didn't go so well so like a lot",
    "start": "133860",
    "end": "139230"
  },
  {
    "text": "of stories this one has a prologue let me just quickly tell you about myself and how I ended up becoming in for an",
    "start": "139230",
    "end": "147630"
  },
  {
    "text": "engineer I originally started to get into infrared container space back in",
    "start": "147630",
    "end": "153330"
  },
  {
    "text": "2013 working on Spotify his homegrown container framework helios as you might",
    "start": "153330",
    "end": "161310"
  },
  {
    "text": "have heard at some point we completed and released this agent based",
    "start": "161310",
    "end": "167070"
  },
  {
    "text": "orchestration platform written in Java literally one day before another",
    "start": "167070",
    "end": "172489"
  },
  {
    "text": "somewhat popular project which at the time was also an agent-based container",
    "start": "172489",
    "end": "177989"
  },
  {
    "text": "orchestration platform written in Java known as kubernetes maybe you've heard",
    "start": "177989",
    "end": "183270"
  },
  {
    "text": "of it so I worked on Helius for a while and it actually went pretty well for a",
    "start": "183270",
    "end": "189720"
  },
  {
    "text": "project that I guess was almost technically obsolete the day after it was released but I also started kicking",
    "start": "189720",
    "end": "199170"
  },
  {
    "text": "the tires on Cube because I knew it was probably future direction of things soon",
    "start": "199170",
    "end": "206340"
  },
  {
    "text": "after though I I spent a while working",
    "start": "206340",
    "end": "213510"
  },
  {
    "text": "at a place that doesn't really use cube a lot so a small social networking startup kind of like MySpace but you",
    "start": "213510",
    "end": "220500"
  },
  {
    "text": "can't edit CSS after that I found myself at hustle where I am today so hustles",
    "start": "220500",
    "end": "228480"
  },
  {
    "text": "main product is a text messaging tool confused mostly by nonprofits and",
    "start": "228480",
    "end": "233640"
  },
  {
    "text": "political campaigns to reach donors or voters works pretty",
    "start": "233640",
    "end": "239220"
  },
  {
    "text": "brilliantly because there's a person behind each text folks can respond have an actual conversation one-on-one but",
    "start": "239220",
    "end": "247739"
  },
  {
    "text": "also more interestingly from the infra side hustles engineering team is right at an inflection point it's grown enough",
    "start": "247739",
    "end": "255660"
  },
  {
    "text": "where a lot of the old ways of doing things are reaching their limits which is I'm sure somewhere like a position a",
    "start": "255660",
    "end": "262800"
  },
  {
    "text": "lot of you have been in but also we're young enough that there's space to make decisions on things without a",
    "start": "262800",
    "end": "269820"
  },
  {
    "text": "bunch of legacy some of the biggest pain points I noticed right away at Hustle",
    "start": "269820",
    "end": "275790"
  },
  {
    "text": "were around deployment and configuration management the process were rolling out",
    "start": "275790",
    "end": "281910"
  },
  {
    "text": "a new service was complicated involved committing code also making changes in a",
    "start": "281910",
    "end": "287610"
  },
  {
    "text": "terraform repo so configuration didn't really have a single source of truth for",
    "start": "287610",
    "end": "292730"
  },
  {
    "text": "example the value of an environment variable might live in terraform but it",
    "start": "292730",
    "end": "298740"
  },
  {
    "text": "would also simultaneously live in a container definition in AWS ECS ECS if",
    "start": "298740",
    "end": "307200"
  },
  {
    "text": "you're not familiar with it is Amazon's kind of docker composed plus on ec2 but",
    "start": "307200",
    "end": "315600"
  },
  {
    "text": "anyways to roll out a new say value for and Bart engineer would run a tool to change the",
    "start": "315600",
    "end": "321600"
  },
  {
    "text": "value in ECS then go ahead at the same value in the terraform repo also kick off a job to build a docker image deploy",
    "start": "321600",
    "end": "328680"
  },
  {
    "text": "it all this stuff hopefully this would all be done in a correct and consistent order without any mix ups anywhere this",
    "start": "328680",
    "end": "337230"
  },
  {
    "text": "system worked about as well as you'd expect which is to say it actually works most of the time but then it fails",
    "start": "337230",
    "end": "345479"
  },
  {
    "text": "sometimes and then it's a disaster but this is areas familiar with and I figured a good place to start on a",
    "start": "345479",
    "end": "352650"
  },
  {
    "text": "project and I also figured hey it's been a couple of years I think the last time",
    "start": "352650",
    "end": "358919"
  },
  {
    "text": "I checked out cube at this point was 2016 maybe 2017 the ecosystem around",
    "start": "358919",
    "end": "366060"
  },
  {
    "text": "cube seems to be getting pretty mature let me take a look see how it's going",
    "start": "366060",
    "end": "371419"
  },
  {
    "text": "and see how easy this eventually I wanted to get to a point where all the",
    "start": "371419",
    "end": "377340"
  },
  {
    "text": "configuration for a service would live with that services code and it also do",
    "start": "377340",
    "end": "382800"
  },
  {
    "text": "the same for all the configuration for all the cube infrastop we needed ingress",
    "start": "382800",
    "end": "388020"
  },
  {
    "text": "controllers service accounts what have you pretty quickly ran into an issue at",
    "start": "388020",
    "end": "396240"
  },
  {
    "text": "hustle like a lot of places we have a few different environments dev pre prod prod local developer",
    "start": "396240",
    "end": "405540"
  },
  {
    "text": "workstations potentially ephemeral environments each of these environments",
    "start": "405540",
    "end": "410910"
  },
  {
    "text": "is similar but different slightly different slightly different config",
    "start": "410910",
    "end": "417259"
  },
  {
    "text": "Baria Buhl's different setups one of the first questions I had then was you know",
    "start": "417259",
    "end": "424860"
  },
  {
    "text": "do this Greenfield what's what's the best way to to manage all this configuration there's no we weren't",
    "start": "424860",
    "end": "431850"
  },
  {
    "text": "really tied to anything at the point at that point so I figured it would be really great to have something where we",
    "start": "431850",
    "end": "438660"
  },
  {
    "text": "could take all the config files for an environment have some sort of templating or substitution be able to build images",
    "start": "438660",
    "end": "444680"
  },
  {
    "text": "generate the final config deploy it to the cluster also figured that you know",
    "start": "444680",
    "end": "451620"
  },
  {
    "text": "this would surely have been solved right so I reached out to folks I knew who",
    "start": "451620",
    "end": "457440"
  },
  {
    "text": "were running fairly large cube clusters in prod and I asked you know how have",
    "start": "457440",
    "end": "464039"
  },
  {
    "text": "you solved this and turns out it has been solved kind of by a bunch of tools",
    "start": "464039",
    "end": "471240"
  },
  {
    "text": "and projects and stuff glued together we've got things like Jason net case",
    "start": "471240",
    "end": "476760"
  },
  {
    "text": "annette jenkins x scaffold how am your",
    "start": "476760",
    "end": "482460"
  },
  {
    "text": "favorite bash scripts even even terraform so each of these projects in",
    "start": "482460",
    "end": "488280"
  },
  {
    "text": "its own way attempts to address these issues and some are more opinionated",
    "start": "488280",
    "end": "494190"
  },
  {
    "text": "than others one thing that I was really",
    "start": "494190",
    "end": "499199"
  },
  {
    "text": "drawn to though a project that really stood out to me was something that isn't really specific to this problem and",
    "start": "499199",
    "end": "505979"
  },
  {
    "text": "again that's basil sorry basil basil is a multi-platform",
    "start": "505979",
    "end": "511740"
  },
  {
    "text": "build system it's based on Google's internal build tool blaze so if you ask",
    "start": "511740",
    "end": "519440"
  },
  {
    "text": "basil people and what is it and why should I use it they'll be quick to list",
    "start": "519440",
    "end": "525779"
  },
  {
    "text": "off a few really big positive attributes of basil it's fast it'll speed up your",
    "start": "525779",
    "end": "532829"
  },
  {
    "text": "builds can build everything every language things you haven't even heard of you can",
    "start": "532829",
    "end": "539029"
  },
  {
    "text": "set up a massive remote build farm cash everything build your entire monetary flow in like three seconds be just like",
    "start": "539029",
    "end": "546410"
  },
  {
    "text": "Google it's gonna be awesome something like that so after using Bayes",
    "start": "546410",
    "end": "552290"
  },
  {
    "text": "a little bit a hustle we found that this is true but it's like true with an",
    "start": "552290",
    "end": "559460"
  },
  {
    "text": "asterisk there's caveats right so if you remember",
    "start": "559460",
    "end": "566120"
  },
  {
    "text": "like my original problem here was really just like too lazy to write some scripts to templatized something a mole or",
    "start": "566120",
    "end": "571580"
  },
  {
    "text": "something but I figured you know why not why not go down this rabbit hole for a",
    "start": "571580",
    "end": "577160"
  },
  {
    "text": "little while and see where it leads honestly for me though the biggest most important virtue of basel and what made",
    "start": "577160",
    "end": "585500"
  },
  {
    "text": "it worth adopting even though it can have quite a learning curve is that it's",
    "start": "585500",
    "end": "591050"
  },
  {
    "text": "highly deterministic same stuff goes in same stuff comes out with it you stop",
    "start": "591050",
    "end": "597830"
  },
  {
    "text": "doing things like running docker build and just running cube CTL apply on whatever the result is fundamentally",
    "start": "597830",
    "end": "606140"
  },
  {
    "text": "basil is a tool where you define some inputs and just like any other build",
    "start": "606140",
    "end": "611180"
  },
  {
    "text": "tool and you define actions to run on those inputs and you get outputs for",
    "start": "611180",
    "end": "617810"
  },
  {
    "text": "example you take your c source you run GCC you get a binary you take your",
    "start": "617810",
    "end": "624670"
  },
  {
    "text": "conflict templates you run a command you get the realized config for an",
    "start": "624670",
    "end": "629930"
  },
  {
    "text": "environment but what feasible is really good at is guaranteeing that when the",
    "start": "629930",
    "end": "635420"
  },
  {
    "text": "inputs are the same the outputs are the same down to the byte so how's this",
    "start": "635420",
    "end": "641660"
  },
  {
    "text": "different than then doing old-style docker built and just working with the",
    "start": "641660",
    "end": "648230"
  },
  {
    "text": "result i I think really again what stood out to me here was that the philosophy",
    "start": "648230",
    "end": "653450"
  },
  {
    "text": "behind this tool I think matches the philosophy a lot of us have had about you know we treat our compute as cattle",
    "start": "653450",
    "end": "661730"
  },
  {
    "text": "not pets we treat our clusters as cattle not pets and what Bayes",
    "start": "661730",
    "end": "666900"
  },
  {
    "text": "is allowing you to do that is treat your deployment artifacts as cattle not pets",
    "start": "666900",
    "end": "672240"
  },
  {
    "text": "so instead of say docker build on a codebase and then getting a specific",
    "start": "672240",
    "end": "680250"
  },
  {
    "text": "digest and now you have to keep this image around forever and hope you never lose it or whatever your other binaries and artifacts are you know that as long",
    "start": "680250",
    "end": "687240"
  },
  {
    "text": "as the code going in is the same you get the same stuff out so going a little",
    "start": "687240",
    "end": "695370"
  },
  {
    "text": "deeper into how this works with docker images instead of writing a docker file you write a basil build file it says",
    "start": "695370",
    "end": "703860"
  },
  {
    "text": "what your inputs are to the image in this case just a single javascript file",
    "start": "703860",
    "end": "709080"
  },
  {
    "text": "for example and basil assembles a docker image with those inputs since on some",
    "start": "709080",
    "end": "716880"
  },
  {
    "text": "level docker image is just a tarball of sorts and you've told basil about all",
    "start": "716880",
    "end": "723510"
  },
  {
    "text": "the files that are supposed to go into that tarball you don't even need to mess with docker itself you don't even need",
    "start": "723510",
    "end": "729450"
  },
  {
    "text": "the dr. daemon running and again as long as your input is the same the resulting",
    "start": "729450",
    "end": "735390"
  },
  {
    "text": "image is the same right down to the image digest of course if your image",
    "start": "735390",
    "end": "743130"
  },
  {
    "text": "consists of things other than simple files on disks well it gets a little more complicated but you can still do",
    "start": "743130",
    "end": "749400"
  },
  {
    "text": "that as well you can use the output of a basil target as the input to another target so for",
    "start": "749400",
    "end": "756510"
  },
  {
    "text": "example let's say you have a target that compiles some Java builds a jar you can",
    "start": "756510",
    "end": "761640"
  },
  {
    "text": "just stuff that output in your image instead building this way is actually",
    "start": "761640",
    "end": "766650"
  },
  {
    "text": "usually a lot faster than running docker build Basil's cache is pretty good and",
    "start": "766650",
    "end": "771830"
  },
  {
    "text": "Basil's good at watching file system knowing what's changed that kind of stuff",
    "start": "771830",
    "end": "777800"
  },
  {
    "text": "at this point though you've got a working build and everything is looking",
    "start": "777800",
    "end": "783360"
  },
  {
    "text": "pretty peachy all you've got to do is actually deploy this somewhere say to a cube cluster and fortunately there's a",
    "start": "783360",
    "end": "790980"
  },
  {
    "text": "pretty straightforward way to do that as well the rules KSR project provides",
    "start": "790980",
    "end": "796860"
  },
  {
    "text": "basel rules or logic for interacting with cube so you just make a new basil target",
    "start": "796860",
    "end": "803179"
  },
  {
    "text": "pointed at your image target and local deployment config and it will happily",
    "start": "803179",
    "end": "810209"
  },
  {
    "text": "take care of applying changes to your local cube cluster so you've got",
    "start": "810209",
    "end": "817619"
  },
  {
    "text": "multiple cube clusters that's not really problem either Basil's config language star lark is",
    "start": "817619",
    "end": "825619"
  },
  {
    "text": "basically Python so you can just write a nice macro that spits out a target for",
    "start": "825619",
    "end": "831869"
  },
  {
    "text": "each of your environments using a different configuration for each and you",
    "start": "831869",
    "end": "837299"
  },
  {
    "text": "know tada you've now got the ability to build images deploy them to multiple cube clusters just by running a single",
    "start": "837299",
    "end": "843239"
  },
  {
    "text": "command because again the input here is yeah well the output is some other gamal",
    "start": "843239",
    "end": "848549"
  },
  {
    "text": "and and that's a big Basil's good at handling so I mean at this point clearly",
    "start": "848549",
    "end": "856470"
  },
  {
    "text": "had motivations other than just cleaning up gamal instead I was hooked on the idea that we could make our entire build",
    "start": "856470",
    "end": "862470"
  },
  {
    "text": "and release process faster and we're stable just by defining basil targets and rules for it and all the pieces we",
    "start": "862470",
    "end": "870059"
  },
  {
    "text": "needed to make this work and and seem to exist so all good right well there was",
    "start": "870059",
    "end": "877439"
  },
  {
    "text": "just basically one issue which is that to make everything work for you you",
    "start": "877439",
    "end": "882480"
  },
  {
    "text": "really need to define targets for everything you want to build in your repo you really really just have to",
    "start": "882480",
    "end": "888299"
  },
  {
    "text": "commit to this way of doing things and hope that the rules exists to build",
    "start": "888299",
    "end": "893309"
  },
  {
    "text": "things in the way you want which they probably don't totally exist I argued",
    "start": "893309",
    "end": "902339"
  },
  {
    "text": "hey you know what basil is pretty much infinitely extensible the behavior of",
    "start": "902339",
    "end": "907350"
  },
  {
    "text": "each basil rule is defined in code the basil core just ties everything together",
    "start": "907350",
    "end": "912809"
  },
  {
    "text": "and runs everything that needs to run so if there's any issues we can just you",
    "start": "912809",
    "end": "917879"
  },
  {
    "text": "know get our hands dirty write some rules bridge the gaps won't be a big deal well as the basil docks themselves",
    "start": "917879",
    "end": "927059"
  },
  {
    "text": "say quote rules are for advanced users we expect that most people will never",
    "start": "927059",
    "end": "932819"
  },
  {
    "text": "have right one they will only load and call existing rules and honestly yeah rules",
    "start": "932819",
    "end": "939060"
  },
  {
    "text": "turned out to definitely be for advanced users while up to this point I think",
    "start": "939060",
    "end": "944160"
  },
  {
    "text": "I've explained Basel at a high level took a fair amount of time to become familiar enough with it to be able to",
    "start": "944160",
    "end": "950250"
  },
  {
    "text": "write rules that work like they should probably at this point only a fraction",
    "start": "950250",
    "end": "955649"
  },
  {
    "text": "of our engineering team has even written any Basel rules themselves even though it's something we've had to tackle to",
    "start": "955649",
    "end": "963589"
  },
  {
    "text": "meet our needs for example we at this",
    "start": "963589",
    "end": "968910"
  },
  {
    "text": "point had all of our build processes for our binaries and images and arcade s",
    "start": "968910",
    "end": "974430"
  },
  {
    "text": "manifests defined using Basel targets so it seemed like hey you know it's a really good idea let's let's just try to",
    "start": "974430",
    "end": "981270"
  },
  {
    "text": "run all this locally it would be it could potentially be a good replacement for our current local dev setup which is",
    "start": "981270",
    "end": "988740"
  },
  {
    "text": "basically largely based on docker compose and and duct tape but that said",
    "start": "988740",
    "end": "996630"
  },
  {
    "text": "it would be nice to hide a lot of the complexity of cube for developers who aren't working on infra ray so one great",
    "start": "996630",
    "end": "1003079"
  },
  {
    "text": "tool I found for this was tilt tilt gives you a friendly UI for what's going on with your build your development cube",
    "start": "1003079",
    "end": "1009890"
  },
  {
    "text": "cluster all of that and it integrated pretty seamlessly with the normal way of",
    "start": "1009890",
    "end": "1015440"
  },
  {
    "text": "building dock Ramage's it would even keep track of dependencies rebuild images do live reloads people liked",
    "start": "1015440",
    "end": "1023450"
  },
  {
    "text": "using it and it pretty much all worked out of the box as long as you're",
    "start": "1023450",
    "end": "1029178"
  },
  {
    "text": "building docker images the normal way which well we no longer are so to take",
    "start": "1029179",
    "end": "1034880"
  },
  {
    "text": "advantage of tilt and probably to take advantage of any similar tools in the future we have to drop back into star",
    "start": "1034880",
    "end": "1041209"
  },
  {
    "text": "LARC the basil config language and write rules that expose the parts of the basil",
    "start": "1041209",
    "end": "1047089"
  },
  {
    "text": "graph that these tools need honestly it was there was only a couple of days of",
    "start": "1047089",
    "end": "1052309"
  },
  {
    "text": "effort in this case and it was worth it in this case but it's you know it's something we're gonna have to do in the",
    "start": "1052309",
    "end": "1057830"
  },
  {
    "text": "future probably for other tools then we hit another small Road bump and that was",
    "start": "1057830",
    "end": "1064400"
  },
  {
    "text": "caught when again there are rules available for basel to build Kotlin but only with",
    "start": "1064400",
    "end": "1071960"
  },
  {
    "text": "support for Kotlin 1.2 now I've actually never written a line of Kotlin in my",
    "start": "1071960",
    "end": "1078799"
  },
  {
    "text": "life so I don't really have a horse in this race but Kotlin 1.3 has been out",
    "start": "1078799",
    "end": "1083960"
  },
  {
    "text": "since last fall so we'd already upgraded all of our Kotlin codebase and so we",
    "start": "1083960",
    "end": "1089899"
  },
  {
    "text": "were just kind of stuck fortunately though I had a colleague with some blaze experience from Google and what's up",
    "start": "1089899",
    "end": "1096440"
  },
  {
    "text": "head banging yeah he was able to fork and hack rule Scotland get it to mostly work with Kotlin 1.3 we're able to keep",
    "start": "1096440",
    "end": "1102409"
  },
  {
    "text": "moving forward that said most of hustles application code is in no js' and this",
    "start": "1102409",
    "end": "1110840"
  },
  {
    "text": "has been a fun exercise with with docker",
    "start": "1110840",
    "end": "1116409"
  },
  {
    "text": "files it node seems fairly straightforward right like it's just JavaScript you put it in the container",
    "start": "1116409",
    "end": "1122809"
  },
  {
    "text": "you run note how hard can it be and there's also beta node J s rules available for basil but they only cover",
    "start": "1122809",
    "end": "1131929"
  },
  {
    "text": "certain scenarios so if you're like me and you had your head kind of willfully buried in the sand regarding JavaScript",
    "start": "1131929",
    "end": "1139070"
  },
  {
    "text": "so the past few years you buy view a little surprised to find that it has a complex and thriving build tool chain so",
    "start": "1139070",
    "end": "1146059"
  },
  {
    "text": "there's various flavors of JavaScript which are transpiled to plain old echo",
    "start": "1146059",
    "end": "1151340"
  },
  {
    "text": "script using various transpilers our tool chain at hustle includes fun tools",
    "start": "1151340",
    "end": "1157429"
  },
  {
    "text": "like babble and flow and mocha which unfortunately Basil's rules nodejs is",
    "start": "1157429",
    "end": "1164960"
  },
  {
    "text": "mostly focused on plain old JavaScript and typescript so again we ended up",
    "start": "1164960",
    "end": "1171110"
  },
  {
    "text": "writing our own rules to deal with things in some cases we were definitely",
    "start": "1171110",
    "end": "1176120"
  },
  {
    "text": "blessed because we found contributions by Basel community members but by and",
    "start": "1176120",
    "end": "1182299"
  },
  {
    "text": "large it's been DIY on this front it's been particularly fun to deal with when",
    "start": "1182299",
    "end": "1188600"
  },
  {
    "text": "it comes to building docker images on developer laptops so remember how I",
    "start": "1188600",
    "end": "1195080"
  },
  {
    "text": "mentioned earlier that basil builds docker images without docker just builds the binaries you need",
    "start": "1195080",
    "end": "1201250"
  },
  {
    "text": "assembles images out of tar balls well let's say you built a docker image using",
    "start": "1201250",
    "end": "1208130"
  },
  {
    "text": "basil on your MacBook and the docker images for a node.js application or",
    "start": "1208130",
    "end": "1214850"
  },
  {
    "text": "maybe a Python application and that application is using some sort of native module",
    "start": "1214850",
    "end": "1220510"
  },
  {
    "text": "well guess guess what architecture that native module ends up being built for",
    "start": "1220510",
    "end": "1227800"
  },
  {
    "text": "it's not gonna be a e.l.f binary it's gonna be you've now got Darwin binary",
    "start": "1227800",
    "end": "1234800"
  },
  {
    "text": "that you're putting in your docker image because you use basil to build this binary on your Mac this is proven to be",
    "start": "1234800",
    "end": "1240800"
  },
  {
    "text": "a particularly tricky problem to solve I mean obviously one one approaches okay",
    "start": "1240800",
    "end": "1246710"
  },
  {
    "text": "everyone switch to Linux but that hasn't been that's that's not something that we",
    "start": "1246710",
    "end": "1252350"
  },
  {
    "text": "were able to do overnight so this has been pretty tricky workarounds aren't",
    "start": "1252350",
    "end": "1257390"
  },
  {
    "text": "great yet what we've been doing instead is using an experimental basil feature that lets you run certain actions in a",
    "start": "1257390",
    "end": "1264620"
  },
  {
    "text": "docker sandbox so then we build native modules in that sandbox if you're on a Macbook that sandbox is docker and a",
    "start": "1264620",
    "end": "1271940"
  },
  {
    "text": "winix vm you get linux binary it all works out",
    "start": "1271940",
    "end": "1277120"
  },
  {
    "text": "but even once we have these modules built for the correct architecture we",
    "start": "1277750",
    "end": "1284240"
  },
  {
    "text": "still have to deal with the fact that they are massive even a simple node.js project ends up",
    "start": "1284240",
    "end": "1290810"
  },
  {
    "text": "with perhaps a hundred thousand files in its source directory if you're not familiar with this problem which I",
    "start": "1290810",
    "end": "1298070"
  },
  {
    "text": "wasn't super familiar with it you can go read about it and it's based on a lot of old decisions but I mean for most",
    "start": "1298070",
    "end": "1306590"
  },
  {
    "text": "node.js apps this works out fine once you've actually built this giant node modules directory for basil though to be",
    "start": "1306590",
    "end": "1315920"
  },
  {
    "text": "able to cache things to meet guarantees about determinism to know that the inputs are the same or whether the",
    "start": "1315920",
    "end": "1320960"
  },
  {
    "text": "inputs have changed it reads and calculates the hash of every single one",
    "start": "1320960",
    "end": "1326600"
  },
  {
    "text": "of those files on a build which really it it can take forever",
    "start": "1326600",
    "end": "1333560"
  },
  {
    "text": "and it's it's required a lot of special tooling on our end to make sure that we build the right targets and we don't just do the naive approach of hey build",
    "start": "1333560",
    "end": "1340610"
  },
  {
    "text": "the mono repo and hope everything works all that said Oh once it was all wired",
    "start": "1340610",
    "end": "1348140"
  },
  {
    "text": "together we could just run a single command and it builds all of our",
    "start": "1348140",
    "end": "1354290"
  },
  {
    "text": "binaries builds all of the images associated with those binaries it pulls",
    "start": "1354290",
    "end": "1359780"
  },
  {
    "text": "up all of our Kas manifests it pulls up template bars for say your local",
    "start": "1359780",
    "end": "1365840"
  },
  {
    "text": "environment is this example puts those in and then deploys those to a local",
    "start": "1365840",
    "end": "1372230"
  },
  {
    "text": "cube cluster and by by using tilt again like we get visibility and of those",
    "start": "1372230",
    "end": "1378440"
  },
  {
    "text": "services they get live updated source files change but unfortunately",
    "start": "1378440",
    "end": "1385600"
  },
  {
    "text": "everyone's laptop basically lit on fire because this is just I mean in",
    "start": "1385600",
    "end": "1391460"
  },
  {
    "text": "retrospect trying to run your whole ecosystem locally something that works when you have maybe a handful of micro",
    "start": "1391460",
    "end": "1399050"
  },
  {
    "text": "services but hustle was already growing to the point where we're kind of on the",
    "start": "1399050",
    "end": "1404120"
  },
  {
    "text": "edge of that and then adding additional tooling like basil a local cube with mini cube or kind or micro KS or",
    "start": "1404120",
    "end": "1411350"
  },
  {
    "text": "whatever using just kind of pushed it over the edge that said what I do this",
    "start": "1411350",
    "end": "1420530"
  },
  {
    "text": "again absolutely and the main reason is because so the local development side of",
    "start": "1420530",
    "end": "1426950"
  },
  {
    "text": "this didn't work out but we are now at a point where we have a great tool for building and deploying services to our",
    "start": "1426950",
    "end": "1434450"
  },
  {
    "text": "actual clusters so even though it has",
    "start": "1434450",
    "end": "1439730"
  },
  {
    "text": "been more effort than I expected our builds are faster our tests are faster",
    "start": "1439730",
    "end": "1445150"
  },
  {
    "text": "and we actually do have our first pilot service where the code and config all live in one place and basil has also",
    "start": "1445150",
    "end": "1453890"
  },
  {
    "text": "made it easier now even though we are primarily a node j s+ Kotlin shop to",
    "start": "1453890",
    "end": "1459740"
  },
  {
    "text": "integrate go or python or whatever into our build process where it's appropriate we can just drop it in without having to",
    "start": "1459740",
    "end": "1466760"
  },
  {
    "text": "make major chain so all in all I think this is a great tool that fits well into what a lot of",
    "start": "1466760",
    "end": "1472970"
  },
  {
    "text": "us are doing but honestly just like cube it's something that you really need to",
    "start": "1472970",
    "end": "1478610"
  },
  {
    "text": "understand and operate for a bit before it becomes really useful but having",
    "start": "1478610",
    "end": "1485810"
  },
  {
    "text": "operate of sorry skip the slide there but yeah having",
    "start": "1485810",
    "end": "1490970"
  },
  {
    "text": "operated it now it it has it's something I would do again also I mentioned helm",
    "start": "1490970",
    "end": "1498440"
  },
  {
    "text": "earlier we didn't actually end up using home but if you want to use home look basil you can find this code in my slide",
    "start": "1498440",
    "end": "1504920"
  },
  {
    "text": "deck and copy it hopefully it works so thanks that's",
    "start": "1504920",
    "end": "1511410"
  },
  {
    "text": "[Applause]",
    "start": "1511410",
    "end": "1520930"
  },
  {
    "text": "any questions thanks so much we have about ten minutes for questions",
    "start": "1520930",
    "end": "1529000"
  },
  {
    "text": "Siwan they're back",
    "start": "1529000",
    "end": "1532510"
  },
  {
    "text": "so hello thank you so what's your",
    "start": "1547780",
    "end": "1553060"
  },
  {
    "text": "approach on keeping secrets or sorry secrets and pushing that to the closer's",
    "start": "1553060",
    "end": "1558970"
  },
  {
    "text": "what's our approach for secrets that's that's a great question so we originally",
    "start": "1558970",
    "end": "1566260"
  },
  {
    "text": "were keeping secrets in our terraform repo with get Crypt and that was not the",
    "start": "1566260",
    "end": "1572160"
  },
  {
    "text": "greatest way to do things instead what we ended up doing is as part of the process where our yeah mole",
    "start": "1572160",
    "end": "1580540"
  },
  {
    "text": "for cube is generated during a Basel run we also run a tool that goes to in our",
    "start": "1580540",
    "end": "1587350"
  },
  {
    "text": "case AWS parameter store but you could go to vault you could go to whatever wherever your secrets are and injects those into cube",
    "start": "1587350",
    "end": "1597250"
  },
  {
    "text": "secrets I had a question actually also",
    "start": "1597250",
    "end": "1603430"
  },
  {
    "text": "do run a build farmers or the cash and stuff and we have a shared build cash",
    "start": "1603430",
    "end": "1609330"
  },
  {
    "text": "for our CIA agents but we don't have a build farm or build cash for our",
    "start": "1609330",
    "end": "1616290"
  },
  {
    "text": "developers and your CI being he's being commonly used in old kite yeah we're",
    "start": "1616290",
    "end": "1622900"
  },
  {
    "text": "saying build kite Persei works well for this kind of use case and that runs on kubernetes also or else yes and that",
    "start": "1622900",
    "end": "1629440"
  },
  {
    "text": "also runs on cube yeah deploys itself do you do any like complicated more",
    "start": "1629440",
    "end": "1636730"
  },
  {
    "text": "complicated deployment like cannery deployments or something like that and to integrate into basil in some way",
    "start": "1636730",
    "end": "1642600"
  },
  {
    "text": "sorry do we have more complicated components during what that deployments like cannery deployments and things like",
    "start": "1642600",
    "end": "1649780"
  },
  {
    "text": "that do you do that and if you do do you integrate into basil so do we have",
    "start": "1649780",
    "end": "1655480"
  },
  {
    "text": "Canary deployments or something like that no we don't have canary deployments right now if we were to do it yeah I'd",
    "start": "1655480",
    "end": "1663250"
  },
  {
    "text": "have to look at how to approach it I think starter talk and do you have a",
    "start": "1663250",
    "end": "1671260"
  },
  {
    "text": "way to do you figure out how to deploy to multiple clusters I mean if you have",
    "start": "1671260",
    "end": "1676540"
  },
  {
    "text": "multiple production clusters in different regions how do you do deployments what do you do if one deployment phase do you roll back",
    "start": "1676540",
    "end": "1682930"
  },
  {
    "text": "everything does puzzle help you with that or no sir I believe the question is",
    "start": "1682930",
    "end": "1689700"
  },
  {
    "text": "how do we debug multiple Q clusters is",
    "start": "1689700",
    "end": "1694780"
  },
  {
    "text": "that is that right or connect multiple I'm specifically asking about deployments if I want to deploy new new",
    "start": "1694780",
    "end": "1703150"
  },
  {
    "text": "code to multiple production clusters living in different regions how do you orchestrate that what do you do if one",
    "start": "1703150",
    "end": "1709600"
  },
  {
    "text": "deployment fails but other are fine do you roll back everything or just like no",
    "start": "1709600",
    "end": "1714900"
  },
  {
    "text": "sorry I misheard you earlier so how did how would you deploy to multiple cube clusters using this model and what do",
    "start": "1714900",
    "end": "1721120"
  },
  {
    "text": "you do one deployment fails or or something else like that so the way this is set up and again like basil is a",
    "start": "1721120",
    "end": "1727600"
  },
  {
    "text": "Rolls engine right so it's building things that it's executing what we tell it to the way we have it set up when we",
    "start": "1727600",
    "end": "1734950"
  },
  {
    "text": "run a single command it deploys everything to one cluster and then we",
    "start": "1734950",
    "end": "1741190"
  },
  {
    "text": "actually have a gated before going to the next environment in the next if you're doing like multiple clusters per",
    "start": "1741190",
    "end": "1746800"
  },
  {
    "text": "se I don't know cross region or something that's something that if you used our model where it's you know one",
    "start": "1746800",
    "end": "1752620"
  },
  {
    "text": "command deploys the one cluster then you could orchestrate that or synchronize that however you want you could run all",
    "start": "1752620",
    "end": "1759460"
  },
  {
    "text": "of them you can run one weight around the next so forth hi do you have also a",
    "start": "1759460",
    "end": "1767170"
  },
  {
    "text": "CI CD in the same way for your infrastructure deployments and so do we",
    "start": "1767170",
    "end": "1773200"
  },
  {
    "text": "have CIN C in the same way for our infra yes for four parts of it so for the",
    "start": "1773200",
    "end": "1781840"
  },
  {
    "text": "parts that are in queue then yeah this all gets pulled in in the same way",
    "start": "1781840",
    "end": "1786910"
  },
  {
    "text": "because we have in this same repo or say like all of our engine X and grass our",
    "start": "1786910",
    "end": "1793870"
  },
  {
    "text": "CI CD server some other like all the other fun bits and pieces and then those",
    "start": "1793870",
    "end": "1799300"
  },
  {
    "text": "get deployed to our dev environment on a build and then they can be deployed to the next environment in the next",
    "start": "1799300",
    "end": "1804580"
  },
  {
    "text": "environment more questions okay",
    "start": "1804580",
    "end": "1814929"
  },
  {
    "text": "hi thanks for the talk you said or your stress that basically is I mean you",
    "start": "1818000",
    "end": "1823400"
  },
  {
    "text": "focused on the television determinism but if we talk about speed compared you",
    "start": "1823400",
    "end": "1829370"
  },
  {
    "text": "with your previous build system how fast okay so yeah so I think if I heard",
    "start": "1829370",
    "end": "1836150"
  },
  {
    "text": "correctly I spoke a lot about like determinism and correctness but like how how does basil give you more speed so",
    "start": "1836150",
    "end": "1842450"
  },
  {
    "text": "one of there's there's a few things here I mean like empirically our builds are faster our tests are faster why is that",
    "start": "1842450",
    "end": "1850330"
  },
  {
    "text": "one thing is that basil keeps a warm cache of everything that's built so",
    "start": "1850330",
    "end": "1856970"
  },
  {
    "text": "we're using build Chi for CI that means we run the CIA agents ourselves do the same with I don't know Jenkins or",
    "start": "1856970",
    "end": "1863090"
  },
  {
    "text": "whatever right but running the CIA agents ourselves we have these long-running basil processes and",
    "start": "1863090",
    "end": "1869620"
  },
  {
    "text": "whenever there's a change that they need to build they really only need to build whatever has changed since the last",
    "start": "1869620",
    "end": "1875990"
  },
  {
    "text": "commit in theory in practice we've had to do more to actually walk the entire",
    "start": "1875990",
    "end": "1883850"
  },
  {
    "text": "dependency graph which you can do because you've built a dependency graph and figure out hey this commit affected",
    "start": "1883850",
    "end": "1890840"
  },
  {
    "text": "these files that could possibly affect these targets which could possibly affect these tests and then just build",
    "start": "1890840",
    "end": "1898100"
  },
  {
    "text": "those change things and then test only the tests that are affected yeah before",
    "start": "1898100",
    "end": "1905750"
  },
  {
    "text": "before I posted like I had another question so you mentioned the learning curve so how long did it take you to get",
    "start": "1905750",
    "end": "1912110"
  },
  {
    "text": "comfortable with basil and just just just so that you show the rest of the team or anybody in your team how long",
    "start": "1912110",
    "end": "1918950"
  },
  {
    "text": "did it take them to learn the basics and then later how long they is this whole",
    "start": "1918950",
    "end": "1924500"
  },
  {
    "text": "project just to give a timeline I mean yeah sure so like how long does it take",
    "start": "1924500",
    "end": "1930590"
  },
  {
    "text": "to get comfortable with basil what's the what's the timeline for something like this so I think there's actually like",
    "start": "1930590",
    "end": "1936260"
  },
  {
    "text": "two different levels right there's one is like can use the tooling and then there's can you build stuff around this",
    "start": "1936260",
    "end": "1942830"
  },
  {
    "text": "tooling and you can see the same thing with like cube right like can you build stuff using Q versus can you use keep",
    "start": "1942830",
    "end": "1949910"
  },
  {
    "text": "CTL I think just being able to say do basil run basil build that kind of stuff maybe a",
    "start": "1949910",
    "end": "1957529"
  },
  {
    "text": "few days for people to get familiar with like you know here's here's kind of paradigm to actually be able to write",
    "start": "1957529",
    "end": "1964070"
  },
  {
    "text": "rules effectively and understand all of what's necessary to write something correct that took at least a couple",
    "start": "1964070",
    "end": "1971029"
  },
  {
    "text": "months of ramp up this whole project has been going on for about six months now and it's ongoing okay then why help I",
    "start": "1971029",
    "end": "1982010"
  },
  {
    "text": "know it's not about to be did you evaluate any other solution maybe hambre",
    "start": "1982010",
    "end": "1989690"
  },
  {
    "text": "templating yeah why help so why home so that is a funny question because in the",
    "start": "1989690",
    "end": "1996169"
  },
  {
    "text": "end we didn't actually end up using home at the time that I was submitting this proposal we were so I evaluated a bunch",
    "start": "1996169",
    "end": "2005529"
  },
  {
    "text": "of things at this time right a lot of them you saw here helm one of the big draws part I think is that there's a",
    "start": "2005529",
    "end": "2013240"
  },
  {
    "text": "huge community at it right there's so many charts there's this you can you install things people have shown you how",
    "start": "2013240",
    "end": "2019059"
  },
  {
    "text": "to package stuff for cube at the end we moved away from it because it required",
    "start": "2019059",
    "end": "2025539"
  },
  {
    "text": "at least inhale v2 running tiller and all this other stuff in our repo but",
    "start": "2025539",
    "end": "2033010"
  },
  {
    "text": "what we do still make use of is the ability to render helm templates out to",
    "start": "2033010",
    "end": "2038669"
  },
  {
    "text": "manifests and then apply those using our normal process yes so yeah we yeah we",
    "start": "2038669",
    "end": "2046960"
  },
  {
    "text": "moved away from helm in the end yep",
    "start": "2046960",
    "end": "2053050"
  },
  {
    "text": "exactly only yeah we only use the template rendering part was it a good",
    "start": "2053050",
    "end": "2060069"
  },
  {
    "text": "decision to move away from home or to move to helm well I I don't know you",
    "start": "2060069",
    "end": "2069940"
  },
  {
    "text": "know we used it experimentally and it seemed like it could give us a lot of",
    "start": "2069940",
    "end": "2075579"
  },
  {
    "text": "speed-up and products have a benefit right like just like we can just install things but in practice no I don't think",
    "start": "2075579",
    "end": "2081638"
  },
  {
    "text": "that really worked because nothing's as simple as just helm install and everything's gonna be great",
    "start": "2081639",
    "end": "2086809"
  },
  {
    "text": "in production yeah or maybe it is I don't know maybe because there's a",
    "start": "2086809",
    "end": "2091849"
  },
  {
    "text": "barrage a few more minutes question over here can you give out some stickers oh",
    "start": "2091849",
    "end": "2097369"
  },
  {
    "text": "yes sir I'd be happy to give us some tilt stickers here anyone want some come",
    "start": "2097369",
    "end": "2103640"
  },
  {
    "text": "on up more questions all right",
    "start": "2103640",
    "end": "2111548"
  },
  {
    "text": "on average like around how fast is your like build and then also like how fast would be like the build to seeing the",
    "start": "2113829",
    "end": "2120319"
  },
  {
    "text": "container running in the environment okay so on average how fast is our build and then how fast is like build to see a",
    "start": "2120319",
    "end": "2126589"
  },
  {
    "text": "container running in the environment so a build so we have Monterey Bay right if",
    "start": "2126589",
    "end": "2133609"
  },
  {
    "text": "you so it the build times scales with how much you've changed if you change",
    "start": "2133609",
    "end": "2138950"
  },
  {
    "text": "say some files in a node.js service we can complete CI in around 90 seconds now",
    "start": "2138950",
    "end": "2147769"
  },
  {
    "text": "if you do a couple services or something like a complicated back-end might take",
    "start": "2147769",
    "end": "2153619"
  },
  {
    "text": "up to three minutes once C is complete what we trigger the actual release to",
    "start": "2153619",
    "end": "2160309"
  },
  {
    "text": "release to our environment I don't know like mostly it's just overhead of telling the agent to do the thing I",
    "start": "2160309",
    "end": "2166880"
  },
  {
    "text": "takes a few seconds I guess the biggest part is pulling down the image and the",
    "start": "2166880",
    "end": "2172579"
  },
  {
    "text": "new image and running it hops last",
    "start": "2172579",
    "end": "2178640"
  },
  {
    "text": "question all right thanks oh and so much",
    "start": "2178640",
    "end": "2186370"
  },
  {
    "text": "[Applause]",
    "start": "2186370",
    "end": "2190820"
  }
]