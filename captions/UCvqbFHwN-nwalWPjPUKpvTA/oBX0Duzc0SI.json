[
  {
    "text": "hi my name is Magic Patel and I'm a",
    "start": "4799",
    "end": "8220"
  },
  {
    "text": "software engineer at Google I've been",
    "start": "8220",
    "end": "10620"
  },
  {
    "text": "working on cluster autoscaler as part of",
    "start": "10620",
    "end": "13679"
  },
  {
    "text": "the gke team and as a member of Open",
    "start": "13679",
    "end": "16260"
  },
  {
    "text": "Source Community for slightly more than",
    "start": "16260",
    "end": "19380"
  },
  {
    "text": "six years now",
    "start": "19380",
    "end": "20820"
  },
  {
    "text": "and",
    "start": "20820",
    "end": "22500"
  },
  {
    "text": "at gke I've been part of the team that",
    "start": "22500",
    "end": "25980"
  },
  {
    "text": "is running a",
    "start": "25980",
    "end": "27720"
  },
  {
    "text": "crushed autoscale in in thousands and",
    "start": "27720",
    "end": "30480"
  },
  {
    "text": "thousands of clusters of our customers",
    "start": "30480",
    "end": "32640"
  },
  {
    "text": "ranging from very small ones all the way",
    "start": "32640",
    "end": "35340"
  },
  {
    "text": "to 15 000 note clusters and I wanted to",
    "start": "35340",
    "end": "38460"
  },
  {
    "text": "share some of our experiences with you",
    "start": "38460",
    "end": "41100"
  },
  {
    "text": "today",
    "start": "41100",
    "end": "41940"
  },
  {
    "text": "so in this talk I am going to focus on",
    "start": "41940",
    "end": "46079"
  },
  {
    "text": "reliability aspect of planning cluster",
    "start": "46079",
    "end": "48420"
  },
  {
    "text": "autoscaler I'm going to talk about",
    "start": "48420",
    "end": "51239"
  },
  {
    "text": "metrics logs and other tools that I",
    "start": "51239",
    "end": "54600"
  },
  {
    "text": "think are useful here I'm not going to",
    "start": "54600",
    "end": "57000"
  },
  {
    "text": "focus too much on cost optimization and",
    "start": "57000",
    "end": "59640"
  },
  {
    "text": "I'm also not going to Deep dive into how",
    "start": "59640",
    "end": "62280"
  },
  {
    "text": "crust autoscaler Works internally I have",
    "start": "62280",
    "end": "65939"
  },
  {
    "text": "done some deep Dives in the past and I",
    "start": "65939",
    "end": "69720"
  },
  {
    "text": "recommend my recordings from past",
    "start": "69720",
    "end": "71939"
  },
  {
    "text": "cubecons that they are on YouTube",
    "start": "71939",
    "end": "75420"
  },
  {
    "text": "um so today I'm going to have three",
    "start": "75420",
    "end": "77760"
  },
  {
    "text": "parts I'm going to start with a quick",
    "start": "77760",
    "end": "80580"
  },
  {
    "text": "summary of how class Delta scale works",
    "start": "80580",
    "end": "83280"
  },
  {
    "text": "and I'm going to only focus on the paths",
    "start": "83280",
    "end": "85799"
  },
  {
    "text": "that I think",
    "start": "85799",
    "end": "86840"
  },
  {
    "text": "that I think are relevant",
    "start": "86840",
    "end": "89340"
  },
  {
    "text": "um from the perspective of understanding",
    "start": "89340",
    "end": "92520"
  },
  {
    "text": "what can go wrong and maintaining it",
    "start": "92520",
    "end": "94259"
  },
  {
    "text": "then I'm going to quickly discuss some",
    "start": "94259",
    "end": "97259"
  },
  {
    "text": "of the tools tools like metrics or logs",
    "start": "97259",
    "end": "100200"
  },
  {
    "text": "that I think are the most useful From",
    "start": "100200",
    "end": "103439"
  },
  {
    "text": "perspective of monitoring and debugging",
    "start": "103439",
    "end": "105420"
  },
  {
    "text": "cluster autoscaler and finally I'm going",
    "start": "105420",
    "end": "107820"
  },
  {
    "text": "to try to",
    "start": "107820",
    "end": "109579"
  },
  {
    "text": "illustrate some common issues and how",
    "start": "109579",
    "end": "113579"
  },
  {
    "text": "the how those tools could be used to",
    "start": "113579",
    "end": "115560"
  },
  {
    "text": "diagnose them",
    "start": "115560",
    "end": "117799"
  },
  {
    "text": "so let's start and I want to start with",
    "start": "117799",
    "end": "121619"
  },
  {
    "text": "a sort of quick let's say mission",
    "start": "121619",
    "end": "124079"
  },
  {
    "text": "statement",
    "start": "124079",
    "end": "125219"
  },
  {
    "text": "right so the problem I'm going to focus",
    "start": "125219",
    "end": "127560"
  },
  {
    "text": "on in here is is the problem of making",
    "start": "127560",
    "end": "130259"
  },
  {
    "text": "sure that all the pods can schedule I",
    "start": "130259",
    "end": "132840"
  },
  {
    "text": "think this is really the primary job of",
    "start": "132840",
    "end": "134400"
  },
  {
    "text": "cluster autoscale right if you don't",
    "start": "134400",
    "end": "136800"
  },
  {
    "text": "have enough nodes in your cluster and",
    "start": "136800",
    "end": "138660"
  },
  {
    "text": "the outputs cannot schedule when you",
    "start": "138660",
    "end": "140099"
  },
  {
    "text": "want to run a badge job or it's traffic",
    "start": "140099",
    "end": "142140"
  },
  {
    "text": "Spy Kids and then cluster Auto scale",
    "start": "142140",
    "end": "144959"
  },
  {
    "text": "that just isn't doing its job and there",
    "start": "144959",
    "end": "146580"
  },
  {
    "text": "is a problem that needs to be fixed and",
    "start": "146580",
    "end": "149040"
  },
  {
    "text": "we're going to try to detect that",
    "start": "149040",
    "end": "150360"
  },
  {
    "text": "problem and prevent it",
    "start": "150360",
    "end": "152340"
  },
  {
    "text": "and so",
    "start": "152340",
    "end": "154099"
  },
  {
    "text": "some key facts about how cluster",
    "start": "154099",
    "end": "156840"
  },
  {
    "text": "autoscaler is achieving this",
    "start": "156840",
    "end": "159319"
  },
  {
    "text": "first of all cluster autoscaler is",
    "start": "159319",
    "end": "161879"
  },
  {
    "text": "actually reacting to pending pots so",
    "start": "161879",
    "end": "164340"
  },
  {
    "text": "this is this is what triggers the outer",
    "start": "164340",
    "end": "166319"
  },
  {
    "text": "scaling",
    "start": "166319",
    "end": "167220"
  },
  {
    "text": "and whenever it sees those pending pots",
    "start": "167220",
    "end": "170400"
  },
  {
    "text": "it's going to calculate how many VMS are",
    "start": "170400",
    "end": "173340"
  },
  {
    "text": "needed to run those spots and it's going",
    "start": "173340",
    "end": "175739"
  },
  {
    "text": "to go to cloud provider and request that",
    "start": "175739",
    "end": "179819"
  },
  {
    "text": "those VMS are created however it's not",
    "start": "179819",
    "end": "182400"
  },
  {
    "text": "really involved in",
    "start": "182400",
    "end": "184620"
  },
  {
    "text": "starting those VMS in any way other than",
    "start": "184620",
    "end": "187739"
  },
  {
    "text": "just triggering it it's not initializing",
    "start": "187739",
    "end": "191459"
  },
  {
    "text": "the VMS it's not setting labels or",
    "start": "191459",
    "end": "193560"
  },
  {
    "text": "things on them and it's also not",
    "start": "193560",
    "end": "196080"
  },
  {
    "text": "responsible for creating or deleting",
    "start": "196080",
    "end": "198659"
  },
  {
    "text": "kubernetes node objects that's that's",
    "start": "198659",
    "end": "200580"
  },
  {
    "text": "done by node controller",
    "start": "200580",
    "end": "202980"
  },
  {
    "text": "and I think that that was just a summary",
    "start": "202980",
    "end": "206400"
  },
  {
    "text": "of what cluster autoscale does but I",
    "start": "206400",
    "end": "208739"
  },
  {
    "text": "also wanted to touch on one of the",
    "start": "208739",
    "end": "210239"
  },
  {
    "text": "aspects of how it does it",
    "start": "210239",
    "end": "213000"
  },
  {
    "text": "um so on one side we have kubernetes",
    "start": "213000",
    "end": "215040"
  },
  {
    "text": "right which is this nice uniform set of",
    "start": "215040",
    "end": "219120"
  },
  {
    "text": "apis that look the same on every cloud",
    "start": "219120",
    "end": "221159"
  },
  {
    "text": "but on the other side the cluster Auto",
    "start": "221159",
    "end": "223319"
  },
  {
    "text": "scale is sort of sitting behind those",
    "start": "223319",
    "end": "225540"
  },
  {
    "text": "nice apis and the cloud provider site",
    "start": "225540",
    "end": "228659"
  },
  {
    "text": "apis which are not standardized they are",
    "start": "228659",
    "end": "231180"
  },
  {
    "text": "not really consistent or even very",
    "start": "231180",
    "end": "233700"
  },
  {
    "text": "similar between some crowds",
    "start": "233700",
    "end": "237780"
  },
  {
    "text": "crossed autoscaler is often behind the",
    "start": "237780",
    "end": "240659"
  },
  {
    "text": "scenes using",
    "start": "240659",
    "end": "242220"
  },
  {
    "text": "conceptually similar",
    "start": "242220",
    "end": "245280"
  },
  {
    "text": "cloud provider concepts of of groups of",
    "start": "245280",
    "end": "249060"
  },
  {
    "text": "nodes like AWS asgs or GC managed",
    "start": "249060",
    "end": "253379"
  },
  {
    "text": "instance groups Azure vmss and so on",
    "start": "253379",
    "end": "255959"
  },
  {
    "text": "there are equivalents of those on many",
    "start": "255959",
    "end": "258180"
  },
  {
    "text": "clouds however that significant",
    "start": "258180",
    "end": "260160"
  },
  {
    "text": "differences in API and that isn't really",
    "start": "260160",
    "end": "262800"
  },
  {
    "text": "a requirement that cloud provider",
    "start": "262800",
    "end": "264479"
  },
  {
    "text": "integration class Delta scale is backed",
    "start": "264479",
    "end": "266460"
  },
  {
    "text": "by a mechanism like this",
    "start": "266460",
    "end": "268680"
  },
  {
    "text": "so while the core logic of crust and the",
    "start": "268680",
    "end": "271680"
  },
  {
    "text": "kubernetes apis it talks to is going to",
    "start": "271680",
    "end": "274979"
  },
  {
    "text": "be consistent in every installation the",
    "start": "274979",
    "end": "278759"
  },
  {
    "text": "cloud provider apis and the cloud",
    "start": "278759",
    "end": "280800"
  },
  {
    "text": "provided module in in class Delta scalar",
    "start": "280800",
    "end": "283139"
  },
  {
    "text": "that integrates with them is going to be",
    "start": "283139",
    "end": "285780"
  },
  {
    "text": "different and actually the cloud",
    "start": "285780",
    "end": "288060"
  },
  {
    "text": "provider is is a very significant part",
    "start": "288060",
    "end": "290280"
  },
  {
    "text": "of Auto scalar logic",
    "start": "290280",
    "end": "292500"
  },
  {
    "text": "and unfortunately that means that in",
    "start": "292500",
    "end": "295440"
  },
  {
    "text": "practice a lot of issues",
    "start": "295440",
    "end": "297540"
  },
  {
    "text": "are going to look at least slightly",
    "start": "297540",
    "end": "300300"
  },
  {
    "text": "differently in different clouds many",
    "start": "300300",
    "end": "302940"
  },
  {
    "text": "metrics may look slightly differently",
    "start": "302940",
    "end": "304800"
  },
  {
    "text": "I'm going to try to",
    "start": "304800",
    "end": "307020"
  },
  {
    "text": "underline this and there may be some",
    "start": "307020",
    "end": "309060"
  },
  {
    "text": "issues that are specific to certain",
    "start": "309060",
    "end": "311460"
  },
  {
    "text": "clouds that just won't show up in other",
    "start": "311460",
    "end": "313259"
  },
  {
    "text": "clouds and also there are some issues",
    "start": "313259",
    "end": "316500"
  },
  {
    "text": "that are actually quite common across",
    "start": "316500",
    "end": "318600"
  },
  {
    "text": "many clouds",
    "start": "318600",
    "end": "320000"
  },
  {
    "text": "but they may look slightly differently",
    "start": "320000",
    "end": "323039"
  },
  {
    "text": "so one example I have here is API QPS",
    "start": "323039",
    "end": "327960"
  },
  {
    "text": "quota exhaustion this is a very common",
    "start": "327960",
    "end": "331139"
  },
  {
    "text": "problem for crusted Auto scalar and",
    "start": "331139",
    "end": "334620"
  },
  {
    "text": "and",
    "start": "334620",
    "end": "336479"
  },
  {
    "text": "the challenge with it is",
    "start": "336479",
    "end": "338960"
  },
  {
    "text": "those those quotas look differently and",
    "start": "338960",
    "end": "342720"
  },
  {
    "text": "based on how much caching a given cloud",
    "start": "342720",
    "end": "345060"
  },
  {
    "text": "provider integration is doing in cluster",
    "start": "345060",
    "end": "347039"
  },
  {
    "text": "Auto Skylab it's it's going to be a",
    "start": "347039",
    "end": "349919"
  },
  {
    "text": "different size of the different number",
    "start": "349919",
    "end": "351840"
  },
  {
    "text": "of node groups that release those those",
    "start": "351840",
    "end": "354120"
  },
  {
    "text": "issues I don't think that is one good",
    "start": "354120",
    "end": "357960"
  },
  {
    "text": "way to monitor it inside of cluster",
    "start": "357960",
    "end": "360000"
  },
  {
    "text": "autoscaler however it is something I",
    "start": "360000",
    "end": "361800"
  },
  {
    "text": "would recommend you monitor on your",
    "start": "361800",
    "end": "364139"
  },
  {
    "text": "cloud provider site as much as possible",
    "start": "364139",
    "end": "367560"
  },
  {
    "text": "um another aspect that I think is is",
    "start": "367560",
    "end": "369539"
  },
  {
    "text": "often quite different between different",
    "start": "369539",
    "end": "371220"
  },
  {
    "text": "clouds is",
    "start": "371220",
    "end": "372800"
  },
  {
    "text": "non-functional sort of behaviors of",
    "start": "372800",
    "end": "375479"
  },
  {
    "text": "cluster Auto scalar things like",
    "start": "375479",
    "end": "377340"
  },
  {
    "text": "scalability or scale up latency it's",
    "start": "377340",
    "end": "380699"
  },
  {
    "text": "going to take a different amount of time",
    "start": "380699",
    "end": "382259"
  },
  {
    "text": "to boot a VM in different environments",
    "start": "382259",
    "end": "385319"
  },
  {
    "text": "and especially scalabilities is so",
    "start": "385319",
    "end": "388919"
  },
  {
    "text": "heavily dependent on caching and",
    "start": "388919",
    "end": "392039"
  },
  {
    "text": "optimization that is done on cluster",
    "start": "392039",
    "end": "394440"
  },
  {
    "text": "autoscaled cloud provider level",
    "start": "394440",
    "end": "397380"
  },
  {
    "text": "that it's it's going to differ",
    "start": "397380",
    "end": "399240"
  },
  {
    "text": "potentially significantly between clouds",
    "start": "399240",
    "end": "401940"
  },
  {
    "text": "officially crossed out to scale alcohol",
    "start": "401940",
    "end": "404039"
  },
  {
    "text": "supports 1000 nodes that's what we're",
    "start": "404039",
    "end": "406800"
  },
  {
    "text": "saying open source repository in",
    "start": "406800",
    "end": "409080"
  },
  {
    "text": "practices I'm very confident it's much",
    "start": "409080",
    "end": "411539"
  },
  {
    "text": "more we've been learning much larger",
    "start": "411539",
    "end": "413460"
  },
  {
    "text": "clusters in gke without any significant",
    "start": "413460",
    "end": "417180"
  },
  {
    "text": "optimizations to the call logic of Auto",
    "start": "417180",
    "end": "419699"
  },
  {
    "text": "scalar",
    "start": "419699",
    "end": "421860"
  },
  {
    "text": "um",
    "start": "421860",
    "end": "422460"
  },
  {
    "text": "right and one more aspect I wanted to",
    "start": "422460",
    "end": "424500"
  },
  {
    "text": "touch on is is how to run class",
    "start": "424500",
    "end": "428100"
  },
  {
    "text": "autoscaler right so class Delta scalar",
    "start": "428100",
    "end": "430380"
  },
  {
    "text": "is using a leader election mechanism so",
    "start": "430380",
    "end": "432539"
  },
  {
    "text": "you can add multiple replicas in the",
    "start": "432539",
    "end": "435000"
  },
  {
    "text": "single cluster one of them is going to",
    "start": "435000",
    "end": "437220"
  },
  {
    "text": "be active and the others are going to",
    "start": "437220",
    "end": "439020"
  },
  {
    "text": "save us backup I obviously recommend",
    "start": "439020",
    "end": "441180"
  },
  {
    "text": "doing this if possible",
    "start": "441180",
    "end": "444240"
  },
  {
    "text": "and um is mostly stateless it can be",
    "start": "444240",
    "end": "448979"
  },
  {
    "text": "restarted safely however there is some",
    "start": "448979",
    "end": "451940"
  },
  {
    "text": "loss of scale down status which",
    "start": "451940",
    "end": "454860"
  },
  {
    "text": "essentially means any reset is going to",
    "start": "454860",
    "end": "457080"
  },
  {
    "text": "delay scale down potentially by a few",
    "start": "457080",
    "end": "459060"
  },
  {
    "text": "minutes and also it requires",
    "start": "459060",
    "end": "462060"
  },
  {
    "text": "regenerating all caches so it's kind of",
    "start": "462060",
    "end": "464099"
  },
  {
    "text": "expensive in terms of startup time and",
    "start": "464099",
    "end": "466800"
  },
  {
    "text": "so occasionally start is fine I haven't",
    "start": "466800",
    "end": "470220"
  },
  {
    "text": "restarting it too much",
    "start": "470220",
    "end": "471960"
  },
  {
    "text": "is going to be a problem and two",
    "start": "471960",
    "end": "474960"
  },
  {
    "text": "scenarios that I would watch for in",
    "start": "474960",
    "end": "476639"
  },
  {
    "text": "particular this class Delta scale are",
    "start": "476639",
    "end": "478259"
  },
  {
    "text": "trying to scale down a node it is",
    "start": "478259",
    "end": "480000"
  },
  {
    "text": "running on uh what's going to happen is",
    "start": "480000",
    "end": "483000"
  },
  {
    "text": "it's going to the Lane itself it's going",
    "start": "483000",
    "end": "484620"
  },
  {
    "text": "to restart itself before it actually",
    "start": "484620",
    "end": "487860"
  },
  {
    "text": "removes the VM and when it restarts it's",
    "start": "487860",
    "end": "491460"
  },
  {
    "text": "just going to abandon the scale down",
    "start": "491460",
    "end": "493620"
  },
  {
    "text": "attempt so it's just going to restart",
    "start": "493620",
    "end": "495240"
  },
  {
    "text": "itself but it's not actually going to",
    "start": "495240",
    "end": "497400"
  },
  {
    "text": "delete the VM",
    "start": "497400",
    "end": "499020"
  },
  {
    "text": "and",
    "start": "499020",
    "end": "500520"
  },
  {
    "text": "I think there was sort of case failure",
    "start": "500520",
    "end": "503460"
  },
  {
    "text": "mode is if crossed out to scale Port is",
    "start": "503460",
    "end": "505800"
  },
  {
    "text": "pending and it cannot be scheduled then",
    "start": "505800",
    "end": "507900"
  },
  {
    "text": "there is no way for the system to",
    "start": "507900",
    "end": "509460"
  },
  {
    "text": "recover from this scenario because there",
    "start": "509460",
    "end": "511860"
  },
  {
    "text": "is just nothing that would add the note",
    "start": "511860",
    "end": "513360"
  },
  {
    "text": "that would allow it to schedule",
    "start": "513360",
    "end": "516360"
  },
  {
    "text": "and so for these reasons I would",
    "start": "516360",
    "end": "518279"
  },
  {
    "text": "recommend if if again if possible",
    "start": "518279",
    "end": "520380"
  },
  {
    "text": "aligning cluster Auto scale on some",
    "start": "520380",
    "end": "522300"
  },
  {
    "text": "dedicated notes",
    "start": "522300",
    "end": "524880"
  },
  {
    "text": "um and alternative is to prevent cluster",
    "start": "524880",
    "end": "528839"
  },
  {
    "text": "Auto skeleton being scaled down by using",
    "start": "528839",
    "end": "531000"
  },
  {
    "text": "either pdbs or save to evict false",
    "start": "531000",
    "end": "534660"
  },
  {
    "text": "annotations of cluster autoscaler this",
    "start": "534660",
    "end": "537839"
  },
  {
    "text": "will prevent the scale down however it's",
    "start": "537839",
    "end": "539880"
  },
  {
    "text": "not 100 bulletproof there are other",
    "start": "539880",
    "end": "541860"
  },
  {
    "text": "mechanisms that can restart it I think",
    "start": "541860",
    "end": "544440"
  },
  {
    "text": "pod preemption is one example here where",
    "start": "544440",
    "end": "546720"
  },
  {
    "text": "the system workload is always going to",
    "start": "546720",
    "end": "549360"
  },
  {
    "text": "have higher priority and can preempt the",
    "start": "549360",
    "end": "551940"
  },
  {
    "text": "autoscaler and finally the solution that",
    "start": "551940",
    "end": "555480"
  },
  {
    "text": "we're using in gke and that I would",
    "start": "555480",
    "end": "557339"
  },
  {
    "text": "recommend in any self-managed",
    "start": "557339",
    "end": "560100"
  },
  {
    "text": "environment where you have access to",
    "start": "560100",
    "end": "562260"
  },
  {
    "text": "control plane is to just run classed",
    "start": "562260",
    "end": "564899"
  },
  {
    "text": "Auto scale it on the control plane VMS",
    "start": "564899",
    "end": "567680"
  },
  {
    "text": "it's really part of the scheduling and",
    "start": "567680",
    "end": "571620"
  },
  {
    "text": "so it makes sense conceptually I think",
    "start": "571620",
    "end": "573240"
  },
  {
    "text": "to land it next to scheduler and it's",
    "start": "573240",
    "end": "575339"
  },
  {
    "text": "just going to completely remove all",
    "start": "575339",
    "end": "577800"
  },
  {
    "text": "those issues of results that I mentioned",
    "start": "577800",
    "end": "580920"
  },
  {
    "text": "finally I think this this part isn't",
    "start": "580920",
    "end": "584100"
  },
  {
    "text": "really very surprising but I would",
    "start": "584100",
    "end": "586140"
  },
  {
    "text": "recommend testing your configuration",
    "start": "586140",
    "end": "588560"
  },
  {
    "text": "before using it in production and two",
    "start": "588560",
    "end": "591839"
  },
  {
    "text": "particular aspects I wanted to highlight",
    "start": "591839",
    "end": "594240"
  },
  {
    "text": "here I'll cast it out to scale the flux",
    "start": "594240",
    "end": "597200"
  },
  {
    "text": "some flags are very commonly Changed by",
    "start": "597200",
    "end": "600120"
  },
  {
    "text": "many users and I think very safe to",
    "start": "600120",
    "end": "602279"
  },
  {
    "text": "change things like utilization",
    "start": "602279",
    "end": "603839"
  },
  {
    "text": "thresholds or scaled down timers are",
    "start": "603839",
    "end": "606779"
  },
  {
    "text": "very commonly tweaked and there isn't",
    "start": "606779",
    "end": "609180"
  },
  {
    "text": "much that can go wrong however some flux",
    "start": "609180",
    "end": "611459"
  },
  {
    "text": "aren't really used that often and have",
    "start": "611459",
    "end": "614160"
  },
  {
    "text": "some significant side effects I am going",
    "start": "614160",
    "end": "616920"
  },
  {
    "text": "to particularly mention ignore 10 flag",
    "start": "616920",
    "end": "619080"
  },
  {
    "text": "here I could really spend half an hour",
    "start": "619080",
    "end": "621480"
  },
  {
    "text": "talking about exactly how it changes",
    "start": "621480",
    "end": "624600"
  },
  {
    "text": "internal behavior of classical to scale",
    "start": "624600",
    "end": "626899"
  },
  {
    "text": "and I've seen so many issues caused by",
    "start": "626899",
    "end": "629760"
  },
  {
    "text": "this flag so I'm just going to",
    "start": "629760",
    "end": "631380"
  },
  {
    "text": "and warning you against this and if you",
    "start": "631380",
    "end": "633959"
  },
  {
    "text": "if you if you want to use it I would",
    "start": "633959",
    "end": "636120"
  },
  {
    "text": "suggest testing it in some sort of",
    "start": "636120",
    "end": "638580"
  },
  {
    "text": "staging environment",
    "start": "638580",
    "end": "640200"
  },
  {
    "text": "and of course things will definitely at",
    "start": "640200",
    "end": "642300"
  },
  {
    "text": "scale right so especially with things",
    "start": "642300",
    "end": "645180"
  },
  {
    "text": "like Auto scale of the adding one note",
    "start": "645180",
    "end": "647760"
  },
  {
    "text": "and adding a thousand nodes may take a",
    "start": "647760",
    "end": "650459"
  },
  {
    "text": "very different amount of time",
    "start": "650459",
    "end": "652079"
  },
  {
    "text": "and it's always worth testing",
    "start": "652079",
    "end": "655079"
  },
  {
    "text": "right so with this let me move on to the",
    "start": "655079",
    "end": "657240"
  },
  {
    "text": "tools that I think are useful for",
    "start": "657240",
    "end": "660860"
  },
  {
    "text": "and the first are going to be Matrix",
    "start": "662060",
    "end": "665399"
  },
  {
    "text": "and I think uh if there is one thing I'd",
    "start": "665399",
    "end": "668160"
  },
  {
    "text": "like you to remember from this",
    "start": "668160",
    "end": "669480"
  },
  {
    "text": "presentation it's really going to be",
    "start": "669480",
    "end": "670620"
  },
  {
    "text": "this slide",
    "start": "670620",
    "end": "672420"
  },
  {
    "text": "um as I said already the job of crested",
    "start": "672420",
    "end": "676620"
  },
  {
    "text": "autoscaler is to make sure that all the",
    "start": "676620",
    "end": "678600"
  },
  {
    "text": "pods are schedulable and so I think the",
    "start": "678600",
    "end": "682680"
  },
  {
    "text": "best way to monitor that is achieving",
    "start": "682680",
    "end": "684480"
  },
  {
    "text": "this job is is to monitor the number of",
    "start": "684480",
    "end": "686399"
  },
  {
    "text": "pending posts if there are any ports",
    "start": "686399",
    "end": "688620"
  },
  {
    "text": "that are pending for a really long time",
    "start": "688620",
    "end": "690420"
  },
  {
    "text": "that just means that the job of cluster",
    "start": "690420",
    "end": "692579"
  },
  {
    "text": "autoscaler is not being done it doesn't",
    "start": "692579",
    "end": "694860"
  },
  {
    "text": "necessarily mean the problem is in Auto",
    "start": "694860",
    "end": "696600"
  },
  {
    "text": "scaler itself however it means it's not",
    "start": "696600",
    "end": "699060"
  },
  {
    "text": "really achieving its task and I think",
    "start": "699060",
    "end": "702540"
  },
  {
    "text": "Auto scalar is a good place to start",
    "start": "702540",
    "end": "705019"
  },
  {
    "text": "debugging such issues",
    "start": "705019",
    "end": "708120"
  },
  {
    "text": "um there is I think a very convenient",
    "start": "708120",
    "end": "709860"
  },
  {
    "text": "metric for this uh kubernetes scheduler",
    "start": "709860",
    "end": "712380"
  },
  {
    "text": "has a pending Port metrics that I think",
    "start": "712380",
    "end": "714959"
  },
  {
    "text": "is ideal here",
    "start": "714959",
    "end": "716700"
  },
  {
    "text": "um actually cluster Auto scalar has its",
    "start": "716700",
    "end": "718320"
  },
  {
    "text": "own metric but that essentially gives",
    "start": "718320",
    "end": "720660"
  },
  {
    "text": "you the same number but I just prefer",
    "start": "720660",
    "end": "722160"
  },
  {
    "text": "using a metric done by other uh or",
    "start": "722160",
    "end": "725700"
  },
  {
    "text": "provided by other component because then",
    "start": "725700",
    "end": "727680"
  },
  {
    "text": "if there is a problem with autoscaler",
    "start": "727680",
    "end": "729540"
  },
  {
    "text": "you will still have a metric coming from",
    "start": "729540",
    "end": "731940"
  },
  {
    "text": "um scheduler",
    "start": "731940",
    "end": "733380"
  },
  {
    "text": "and so I think if you just want a single",
    "start": "733380",
    "end": "735899"
  },
  {
    "text": "alert for class Delta scale it I think",
    "start": "735899",
    "end": "737579"
  },
  {
    "text": "that's the best one",
    "start": "737579",
    "end": "738959"
  },
  {
    "text": "I would also recommend maybe alerting on",
    "start": "738959",
    "end": "742320"
  },
  {
    "text": "the fact that classical to scale",
    "start": "742320",
    "end": "743700"
  },
  {
    "text": "designing I don't necessarily have a",
    "start": "743700",
    "end": "745440"
  },
  {
    "text": "slide for this because I think exactly",
    "start": "745440",
    "end": "747600"
  },
  {
    "text": "how you monitor this depends heavily on",
    "start": "747600",
    "end": "749640"
  },
  {
    "text": "on how you run it if you run it on",
    "start": "749640",
    "end": "751860"
  },
  {
    "text": "control plane on your notes you may want",
    "start": "751860",
    "end": "754140"
  },
  {
    "text": "to use a different metric but that's",
    "start": "754140",
    "end": "755940"
  },
  {
    "text": "that's also something useful",
    "start": "755940",
    "end": "758579"
  },
  {
    "text": "and there are many more cluster Auto",
    "start": "758579",
    "end": "761220"
  },
  {
    "text": "scalar metrics however I'm just going to",
    "start": "761220",
    "end": "762839"
  },
  {
    "text": "focus on I think fall maybe other",
    "start": "762839",
    "end": "765899"
  },
  {
    "text": "metrics and I'm just going to use three",
    "start": "765899",
    "end": "767700"
  },
  {
    "text": "graphs as I go to different issues that",
    "start": "767700",
    "end": "770100"
  },
  {
    "text": "I think are most useful for debugging",
    "start": "770100",
    "end": "772260"
  },
  {
    "text": "and so in addition to pending posts what",
    "start": "772260",
    "end": "775139"
  },
  {
    "text": "I what I think is uh super useful graph",
    "start": "775139",
    "end": "777660"
  },
  {
    "text": "for any sort of debugging it's a graph",
    "start": "777660",
    "end": "780360"
  },
  {
    "text": "that just shows you notes in the cluster",
    "start": "780360",
    "end": "782760"
  },
  {
    "text": "by defense State there is a",
    "start": "782760",
    "end": "784279"
  },
  {
    "text": "clusterismatic for that and on the same",
    "start": "784279",
    "end": "787320"
  },
  {
    "text": "graph just have a rate of scale up and",
    "start": "787320",
    "end": "789720"
  },
  {
    "text": "scale down uh done by Casta autoscaler",
    "start": "789720",
    "end": "792779"
  },
  {
    "text": "I'm going to show this graph in a second",
    "start": "792779",
    "end": "794100"
  },
  {
    "text": "and hopefully I will be able to convince",
    "start": "794100",
    "end": "796860"
  },
  {
    "text": "you that it is a really great very",
    "start": "796860",
    "end": "799139"
  },
  {
    "text": "useful graph",
    "start": "799139",
    "end": "800519"
  },
  {
    "text": "and I think it's also useful looking for",
    "start": "800519",
    "end": "803519"
  },
  {
    "text": "different metrics that report the L",
    "start": "803519",
    "end": "806700"
  },
  {
    "text": "arrays of cluster autoscaler I think",
    "start": "806700",
    "end": "809700"
  },
  {
    "text": "first scale UPS total is in particularly",
    "start": "809700",
    "end": "811800"
  },
  {
    "text": "a particularly useful one if your scale",
    "start": "811800",
    "end": "814200"
  },
  {
    "text": "ups are failing there is likely an issue",
    "start": "814200",
    "end": "816720"
  },
  {
    "text": "that may require attention",
    "start": "816720",
    "end": "819839"
  },
  {
    "text": "um the errors total metric is also there",
    "start": "819839",
    "end": "822200"
  },
  {
    "text": "but it's it's more noisy because it's",
    "start": "822200",
    "end": "824820"
  },
  {
    "text": "going to capture sort of random 500 one",
    "start": "824820",
    "end": "827579"
  },
  {
    "text": "of transient errors that you get from",
    "start": "827579",
    "end": "830220"
  },
  {
    "text": "cloud provided and so I found this one",
    "start": "830220",
    "end": "832680"
  },
  {
    "text": "to be much more noisy and as such sort",
    "start": "832680",
    "end": "835440"
  },
  {
    "text": "of less useful but it's definitely also",
    "start": "835440",
    "end": "837480"
  },
  {
    "text": "something uh worth looking at if there",
    "start": "837480",
    "end": "841019"
  },
  {
    "text": "is an issue and so I mentioned the graph",
    "start": "841019",
    "end": "844260"
  },
  {
    "text": "that shows both the nodes and cluster",
    "start": "844260",
    "end": "847380"
  },
  {
    "text": "autoscale activity and that's this graph",
    "start": "847380",
    "end": "849360"
  },
  {
    "text": "here and I just want to go to how a",
    "start": "849360",
    "end": "854160"
  },
  {
    "text": "typical scale up looks like this is",
    "start": "854160",
    "end": "856680"
  },
  {
    "text": "basically what you'd expect if your",
    "start": "856680",
    "end": "858600"
  },
  {
    "text": "scale up goes perfectly well so on the",
    "start": "858600",
    "end": "860880"
  },
  {
    "text": "bottom graph I have the number of",
    "start": "860880",
    "end": "862139"
  },
  {
    "text": "pending pots I have been splitting these",
    "start": "862139",
    "end": "865380"
  },
  {
    "text": "different queues in schedule lab I don't",
    "start": "865380",
    "end": "867600"
  },
  {
    "text": "think that's realistically necessary",
    "start": "867600",
    "end": "869100"
  },
  {
    "text": "it's useful sometimes for catching even",
    "start": "869100",
    "end": "871620"
  },
  {
    "text": "issues in class Auto scale level",
    "start": "871620",
    "end": "873360"
  },
  {
    "text": "scheduler itself it's possible that the",
    "start": "873360",
    "end": "875639"
  },
  {
    "text": "sort of nodes are there but the pods get",
    "start": "875639",
    "end": "877860"
  },
  {
    "text": "stuck in scheduler but I'm not really",
    "start": "877860",
    "end": "880560"
  },
  {
    "text": "going to focus on this so if you just",
    "start": "880560",
    "end": "882060"
  },
  {
    "text": "aggregate all of those skills together",
    "start": "882060",
    "end": "883620"
  },
  {
    "text": "that's also fine",
    "start": "883620",
    "end": "885720"
  },
  {
    "text": "um",
    "start": "885720",
    "end": "886440"
  },
  {
    "text": "so what we see here is basically the",
    "start": "886440",
    "end": "888660"
  },
  {
    "text": "number of pending pods go up and in",
    "start": "888660",
    "end": "890940"
  },
  {
    "text": "response we can see the scalar plate in",
    "start": "890940",
    "end": "893699"
  },
  {
    "text": "class Delta scale to also go up that's",
    "start": "893699",
    "end": "895560"
  },
  {
    "text": "the Bold line on the top graph",
    "start": "895560",
    "end": "897660"
  },
  {
    "text": "and as as the scale up happens",
    "start": "897660",
    "end": "901800"
  },
  {
    "text": "we can see more notes like the number of",
    "start": "901800",
    "end": "904079"
  },
  {
    "text": "nodes is increasing and initially those",
    "start": "904079",
    "end": "906660"
  },
  {
    "text": "new notes are on this graph they are",
    "start": "906660",
    "end": "908760"
  },
  {
    "text": "that so that means that they are under",
    "start": "908760",
    "end": "910139"
  },
  {
    "text": "adjusted so those are the VMS that are",
    "start": "910139",
    "end": "913079"
  },
  {
    "text": "already dead on cloud provider site",
    "start": "913079",
    "end": "914760"
  },
  {
    "text": "however they don't yet have a",
    "start": "914760",
    "end": "916139"
  },
  {
    "text": "corresponding node object in kubernetes",
    "start": "916139",
    "end": "918600"
  },
  {
    "text": "so the VM is maybe spinning up the",
    "start": "918600",
    "end": "921779"
  },
  {
    "text": "operating system is starting up the",
    "start": "921779",
    "end": "923639"
  },
  {
    "text": "cubelet is initializing and so on it all",
    "start": "923639",
    "end": "926579"
  },
  {
    "text": "takes time but we see the VMS are",
    "start": "926579",
    "end": "928680"
  },
  {
    "text": "already dead and then there is this",
    "start": "928680",
    "end": "930540"
  },
  {
    "text": "small yellow window where the VMS are",
    "start": "930540",
    "end": "933600"
  },
  {
    "text": "not started that means that the node",
    "start": "933600",
    "end": "935699"
  },
  {
    "text": "object is already there however",
    "start": "935699",
    "end": "938779"
  },
  {
    "text": "the the it's not yet ready so the status",
    "start": "938779",
    "end": "941820"
  },
  {
    "text": "condition shows that the node isn't",
    "start": "941820",
    "end": "944040"
  },
  {
    "text": "ready yet and this is basically however",
    "start": "944040",
    "end": "946500"
  },
  {
    "text": "the scale up is going to look like",
    "start": "946500",
    "end": "947760"
  },
  {
    "text": "you're going to first see those",
    "start": "947760",
    "end": "948899"
  },
  {
    "text": "unregistered notes then you're going to",
    "start": "948899",
    "end": "950519"
  },
  {
    "text": "see not started notes and finally you're",
    "start": "950519",
    "end": "953100"
  },
  {
    "text": "going to have already notes that are",
    "start": "953100",
    "end": "954660"
  },
  {
    "text": "just going to be able to run your pods",
    "start": "954660",
    "end": "956699"
  },
  {
    "text": "and I'm going to show how distinguishing",
    "start": "956699",
    "end": "959459"
  },
  {
    "text": "those different stages of of node",
    "start": "959459",
    "end": "961560"
  },
  {
    "text": "lifecycle is going to be helpful later",
    "start": "961560",
    "end": "965279"
  },
  {
    "text": "on when I get to some issues",
    "start": "965279",
    "end": "967980"
  },
  {
    "text": "um I'm also going to quickly cover how a",
    "start": "967980",
    "end": "970079"
  },
  {
    "text": "scale down would look like on the same",
    "start": "970079",
    "end": "971519"
  },
  {
    "text": "graph I don't have pending pods this",
    "start": "971519",
    "end": "973440"
  },
  {
    "text": "time because if if Caster autoscale is",
    "start": "973440",
    "end": "975899"
  },
  {
    "text": "carrying down that that probably means",
    "start": "975899",
    "end": "977519"
  },
  {
    "text": "that there aren't any but we can see",
    "start": "977519",
    "end": "980339"
  },
  {
    "text": "here",
    "start": "980339",
    "end": "981240"
  },
  {
    "text": "the rate of scale down going up again",
    "start": "981240",
    "end": "984260"
  },
  {
    "text": "and that's the Bold line and then the",
    "start": "984260",
    "end": "987300"
  },
  {
    "text": "number of nodes is decreasing so that's",
    "start": "987300",
    "end": "988800"
  },
  {
    "text": "that's pretty obvious but one thing",
    "start": "988800",
    "end": "990899"
  },
  {
    "text": "that's very useful and I think that's",
    "start": "990899",
    "end": "993779"
  },
  {
    "text": "commonly used by me to seen by me in",
    "start": "993779",
    "end": "997560"
  },
  {
    "text": "many issues is that",
    "start": "997560",
    "end": "1001060"
  },
  {
    "text": "the lack of the scaled down activity by",
    "start": "1001060",
    "end": "1003980"
  },
  {
    "text": "crusted Auto scalar can be very telling",
    "start": "1003980",
    "end": "1005839"
  },
  {
    "text": "here so sometimes",
    "start": "1005839",
    "end": "1007759"
  },
  {
    "text": "um there are other ways that the number",
    "start": "1007759",
    "end": "1009320"
  },
  {
    "text": "of nodes can change right someone may",
    "start": "1009320",
    "end": "1011060"
  },
  {
    "text": "resize the node group manually or maybe",
    "start": "1011060",
    "end": "1014480"
  },
  {
    "text": "there is some sort of upgrade mechanism",
    "start": "1014480",
    "end": "1016339"
  },
  {
    "text": "that can delete nodes there can be other",
    "start": "1016339",
    "end": "1017959"
  },
  {
    "text": "things than crust Auto scale that can",
    "start": "1017959",
    "end": "1019820"
  },
  {
    "text": "delete nodes and just looking on this",
    "start": "1019820",
    "end": "1021920"
  },
  {
    "text": "graph would tell you immediately that",
    "start": "1021920",
    "end": "1024199"
  },
  {
    "text": "the number of nodes have decreased",
    "start": "1024199",
    "end": "1025760"
  },
  {
    "text": "without Auto scale intervention if there",
    "start": "1025760",
    "end": "1028459"
  },
  {
    "text": "is a fall in the number of nodes but",
    "start": "1028459",
    "end": "1030260"
  },
  {
    "text": "there is no scale down rate increasing",
    "start": "1030260",
    "end": "1032418"
  },
  {
    "text": "so this is why I find this useful to",
    "start": "1032419",
    "end": "1035720"
  },
  {
    "text": "just sort of filter out issues that",
    "start": "1035720",
    "end": "1038000"
  },
  {
    "text": "aren't really as related to autoscader",
    "start": "1038000",
    "end": "1040819"
  },
  {
    "text": "now another thing I wanted to mention",
    "start": "1040819",
    "end": "1045339"
  },
  {
    "text": "status config map in Cube system the",
    "start": "1050440",
    "end": "1054440"
  },
  {
    "text": "config map basically will give you like",
    "start": "1054440",
    "end": "1056960"
  },
  {
    "text": "an event log of all the actions taken by",
    "start": "1056960",
    "end": "1058940"
  },
  {
    "text": "autoscaler and the Pod events can tell",
    "start": "1058940",
    "end": "1062000"
  },
  {
    "text": "you why cluster autoscaler is not",
    "start": "1062000",
    "end": "1064700"
  },
  {
    "text": "scaling up if a certain Port even if",
    "start": "1064700",
    "end": "1066559"
  },
  {
    "text": "certain pot is pending or it can show",
    "start": "1066559",
    "end": "1069260"
  },
  {
    "text": "you that class Delta scalar in fact has",
    "start": "1069260",
    "end": "1071660"
  },
  {
    "text": "triggered a scale up specifically",
    "start": "1071660",
    "end": "1073520"
  },
  {
    "text": "because this pod was pending I think",
    "start": "1073520",
    "end": "1076039"
  },
  {
    "text": "it's quite useful for debugging",
    "start": "1076039",
    "end": "1078919"
  },
  {
    "text": "especially those",
    "start": "1078919",
    "end": "1082519"
  },
  {
    "text": "is not scaling up when you think it",
    "start": "1082780",
    "end": "1085100"
  },
  {
    "text": "should be",
    "start": "1085100",
    "end": "1086120"
  },
  {
    "text": "and it's definitely much easier and",
    "start": "1086120",
    "end": "1088760"
  },
  {
    "text": "faster than going to the logs",
    "start": "1088760",
    "end": "1091820"
  },
  {
    "text": "and yeah the logs are sort of to me the",
    "start": "1091820",
    "end": "1095780"
  },
  {
    "text": "last result if nothing else has helped",
    "start": "1095780",
    "end": "1098120"
  },
  {
    "text": "if there is no events if there is no",
    "start": "1098120",
    "end": "1099500"
  },
  {
    "text": "Matrix then I would go to logs uh I",
    "start": "1099500",
    "end": "1102860"
  },
  {
    "text": "think they are very very boss and",
    "start": "1102860",
    "end": "1104360"
  },
  {
    "text": "sometimes have to understand so I",
    "start": "1104360",
    "end": "1106100"
  },
  {
    "text": "wouldn't recommend starting there",
    "start": "1106100",
    "end": "1108380"
  },
  {
    "text": "and if you have to read the logs right",
    "start": "1108380",
    "end": "1110900"
  },
  {
    "text": "there I think two main",
    "start": "1110900",
    "end": "1113660"
  },
  {
    "text": "suggestions I would have so firstly",
    "start": "1113660",
    "end": "1116120"
  },
  {
    "text": "cluster to scale lens in loops and each",
    "start": "1116120",
    "end": "1117980"
  },
  {
    "text": "Loop is essentially independent so",
    "start": "1117980",
    "end": "1120860"
  },
  {
    "text": "cluster Auto scale will reconcile state",
    "start": "1120860",
    "end": "1122900"
  },
  {
    "text": "of the cluster it will look for any",
    "start": "1122900",
    "end": "1125360"
  },
  {
    "text": "pending pause it will see if they would",
    "start": "1125360",
    "end": "1127340"
  },
  {
    "text": "maybe be able to schedule on the notes",
    "start": "1127340",
    "end": "1129140"
  },
  {
    "text": "that are already booting up and if not",
    "start": "1129140",
    "end": "1131539"
  },
  {
    "text": "it's going to trigger scale up and it's",
    "start": "1131539",
    "end": "1133160"
  },
  {
    "text": "just going to run those Loops over and",
    "start": "1133160",
    "end": "1134900"
  },
  {
    "text": "over and over",
    "start": "1134900",
    "end": "1136160"
  },
  {
    "text": "so if you have debugging an issue I'll",
    "start": "1136160",
    "end": "1138320"
  },
  {
    "text": "just focus on a single loop I have I",
    "start": "1138320",
    "end": "1140360"
  },
  {
    "text": "have the log lines on the slide for",
    "start": "1140360",
    "end": "1141860"
  },
  {
    "text": "grabbing but I'll just focus on a single",
    "start": "1141860",
    "end": "1144860"
  },
  {
    "text": "Loop and just try to debug it there",
    "start": "1144860",
    "end": "1146660"
  },
  {
    "text": "because it's just going to repeat over",
    "start": "1146660",
    "end": "1148400"
  },
  {
    "text": "and over there isn't that much point",
    "start": "1148400",
    "end": "1149720"
  },
  {
    "text": "reading it",
    "start": "1149720",
    "end": "1151120"
  },
  {
    "text": "however not all the loops are created",
    "start": "1151120",
    "end": "1154100"
  },
  {
    "text": "equal and then the",
    "start": "1154100",
    "end": "1156980"
  },
  {
    "text": "in some Loop the scale up will happen",
    "start": "1156980",
    "end": "1158660"
  },
  {
    "text": "like the first time autoscale node this",
    "start": "1158660",
    "end": "1160340"
  },
  {
    "text": "is a pending bot it will trigger the",
    "start": "1160340",
    "end": "1162559"
  },
  {
    "text": "scale up and then for a number of",
    "start": "1162559",
    "end": "1165020"
  },
  {
    "text": "following Loops what's going to happen",
    "start": "1165020",
    "end": "1166460"
  },
  {
    "text": "is it will see that there are nodes",
    "start": "1166460",
    "end": "1168559"
  },
  {
    "text": "already spinning up and it will just do",
    "start": "1168559",
    "end": "1170419"
  },
  {
    "text": "nothing waiting for those so you always",
    "start": "1170419",
    "end": "1172520"
  },
  {
    "text": "want to debug the loop where the actual",
    "start": "1172520",
    "end": "1175940"
  },
  {
    "text": "decision was made and so the very first",
    "start": "1175940",
    "end": "1178460"
  },
  {
    "text": "thing I do whenever I look at logs like",
    "start": "1178460",
    "end": "1180799"
  },
  {
    "text": "in 99 of times is I'm going to look for",
    "start": "1180799",
    "end": "1183620"
  },
  {
    "text": "this final scalar plan log that are the",
    "start": "1183620",
    "end": "1185720"
  },
  {
    "text": "logs associated with scale up that's",
    "start": "1185720",
    "end": "1187340"
  },
  {
    "text": "just the one I like using uh it's going",
    "start": "1187340",
    "end": "1189620"
  },
  {
    "text": "to be there whenever there is a scale up",
    "start": "1189620",
    "end": "1191299"
  },
  {
    "text": "so I think it's quite useful",
    "start": "1191299",
    "end": "1193460"
  },
  {
    "text": "so with this let me quickly move on to",
    "start": "1193460",
    "end": "1197299"
  },
  {
    "text": "showing how I would use those metrics",
    "start": "1197299",
    "end": "1200600"
  },
  {
    "text": "and and events to debug some common",
    "start": "1200600",
    "end": "1202880"
  },
  {
    "text": "issues and the first one I have",
    "start": "1202880",
    "end": "1205820"
  },
  {
    "text": "is any sort of cloud provider error",
    "start": "1205820",
    "end": "1208039"
  },
  {
    "text": "right so what we see here is basically",
    "start": "1208039",
    "end": "1210559"
  },
  {
    "text": "cluster autoscaler notices pending pods",
    "start": "1210559",
    "end": "1213260"
  },
  {
    "text": "we see there is a number of pending pots",
    "start": "1213260",
    "end": "1215419"
  },
  {
    "text": "and so an alert on this would detect the",
    "start": "1215419",
    "end": "1217460"
  },
  {
    "text": "problem",
    "start": "1217460",
    "end": "1218240"
  },
  {
    "text": "and it's time to scale up and it's",
    "start": "1218240",
    "end": "1221600"
  },
  {
    "text": "basically nothing is happening it's just",
    "start": "1221600",
    "end": "1223340"
  },
  {
    "text": "repeatedly trying and failing and if we",
    "start": "1223340",
    "end": "1226940"
  },
  {
    "text": "look at the failed scale up",
    "start": "1226940",
    "end": "1229160"
  },
  {
    "text": "graph we see those scale ups are indeed",
    "start": "1229160",
    "end": "1231980"
  },
  {
    "text": "failing and there is a reason that right",
    "start": "1231980",
    "end": "1234500"
  },
  {
    "text": "so that that just makes it pretty",
    "start": "1234500",
    "end": "1237200"
  },
  {
    "text": "obvious what the problem is right in",
    "start": "1237200",
    "end": "1239600"
  },
  {
    "text": "this case I just run out of quota for I",
    "start": "1239600",
    "end": "1243080"
  },
  {
    "text": "think CPUs in my project I can see what",
    "start": "1243080",
    "end": "1245600"
  },
  {
    "text": "the quota is but I already know it's a",
    "start": "1245600",
    "end": "1247700"
  },
  {
    "text": "quota exertion issue so I can just go to",
    "start": "1247700",
    "end": "1249799"
  },
  {
    "text": "logs now and probably find that quite",
    "start": "1249799",
    "end": "1252500"
  },
  {
    "text": "easily",
    "start": "1252500",
    "end": "1254539"
  },
  {
    "text": "um and I think with this is uh actually",
    "start": "1254539",
    "end": "1258020"
  },
  {
    "text": "the another thing I wanted to quickly",
    "start": "1258020",
    "end": "1259580"
  },
  {
    "text": "show up is how cluster autoscaler",
    "start": "1259580",
    "end": "1261500"
  },
  {
    "text": "retalize the scale up periodically",
    "start": "1261500",
    "end": "1263600"
  },
  {
    "text": "however those periods are increasing",
    "start": "1263600",
    "end": "1265400"
  },
  {
    "text": "right so this is because cluster Auto",
    "start": "1265400",
    "end": "1267020"
  },
  {
    "text": "scalar uses an exponential back off",
    "start": "1267020",
    "end": "1268700"
  },
  {
    "text": "mechanism so it will start by relying",
    "start": "1268700",
    "end": "1271460"
  },
  {
    "text": "very often but it will over time",
    "start": "1271460",
    "end": "1275720"
  },
  {
    "text": "literally less and less until it hits",
    "start": "1275720",
    "end": "1278419"
  },
  {
    "text": "the maximum back of duration of half",
    "start": "1278419",
    "end": "1281419"
  },
  {
    "text": "hour",
    "start": "1281419",
    "end": "1282500"
  },
  {
    "text": "and so this is this is this is kind of",
    "start": "1282500",
    "end": "1284360"
  },
  {
    "text": "common in issues",
    "start": "1284360",
    "end": "1287120"
  },
  {
    "text": "right and",
    "start": "1287120",
    "end": "1289880"
  },
  {
    "text": "yeah everything in like that graph would",
    "start": "1289880",
    "end": "1291919"
  },
  {
    "text": "look the same for any other sort of",
    "start": "1291919",
    "end": "1293720"
  },
  {
    "text": "cloud provider site issue right so it",
    "start": "1293720",
    "end": "1296720"
  },
  {
    "text": "may be that the cloud provider is out of",
    "start": "1296720",
    "end": "1298460"
  },
  {
    "text": "stock and there is no quota issue it",
    "start": "1298460",
    "end": "1301520"
  },
  {
    "text": "will look the same it's just the label",
    "start": "1301520",
    "end": "1303080"
  },
  {
    "text": "on the metric would be different or that",
    "start": "1303080",
    "end": "1304880"
  },
  {
    "text": "there may be some sort of Ip space",
    "start": "1304880",
    "end": "1307100"
  },
  {
    "text": "exhaustion issue for example there is",
    "start": "1307100",
    "end": "1309260"
  },
  {
    "text": "any number of things that can go along",
    "start": "1309260",
    "end": "1310700"
  },
  {
    "text": "on cloud provider site",
    "start": "1310700",
    "end": "1312700"
  },
  {
    "text": "one thing is that the labels on the",
    "start": "1312700",
    "end": "1317960"
  },
  {
    "text": "failed scale up metric depend on the",
    "start": "1317960",
    "end": "1320360"
  },
  {
    "text": "particular Cloud provided implementation",
    "start": "1320360",
    "end": "1323200"
  },
  {
    "text": "giving us structured information about",
    "start": "1323200",
    "end": "1326419"
  },
  {
    "text": "what the error is and that often ends up",
    "start": "1326419",
    "end": "1329539"
  },
  {
    "text": "I think just with legx on error messages",
    "start": "1329539",
    "end": "1331640"
  },
  {
    "text": "that are specific to a given cloud",
    "start": "1331640",
    "end": "1333260"
  },
  {
    "text": "provider so the level of detail you get",
    "start": "1333260",
    "end": "1335120"
  },
  {
    "text": "may be different depending on what l a",
    "start": "1335120",
    "end": "1339559"
  },
  {
    "text": "given provider recognizes",
    "start": "1339559",
    "end": "1342080"
  },
  {
    "text": "right another issue that is I think like",
    "start": "1342080",
    "end": "1345080"
  },
  {
    "text": "literally the most common type of issue",
    "start": "1345080",
    "end": "1347179"
  },
  {
    "text": "is that the nodes are failing to start",
    "start": "1347179",
    "end": "1349220"
  },
  {
    "text": "so this is different we're not getting",
    "start": "1349220",
    "end": "1351020"
  },
  {
    "text": "an L when we make an API call to cloud",
    "start": "1351020",
    "end": "1353360"
  },
  {
    "text": "provider the VMS are actually getting",
    "start": "1353360",
    "end": "1355400"
  },
  {
    "text": "created and you can see this in the",
    "start": "1355400",
    "end": "1357260"
  },
  {
    "text": "graph here right cluster of the sky is",
    "start": "1357260",
    "end": "1358760"
  },
  {
    "text": "trying to scale up and then we see those",
    "start": "1358760",
    "end": "1360799"
  },
  {
    "text": "thread energy State nodes so the VMS are",
    "start": "1360799",
    "end": "1363679"
  },
  {
    "text": "there they are getting created it's just",
    "start": "1363679",
    "end": "1365120"
  },
  {
    "text": "that they are unable to join kubernetes",
    "start": "1365120",
    "end": "1367340"
  },
  {
    "text": "cluster",
    "start": "1367340",
    "end": "1368600"
  },
  {
    "text": "and we see in this case the uh scale ups",
    "start": "1368600",
    "end": "1372500"
  },
  {
    "text": "are failing because of 15 minute timeout",
    "start": "1372500",
    "end": "1374419"
  },
  {
    "text": "so basically cast out to scale will give",
    "start": "1374419",
    "end": "1376940"
  },
  {
    "text": "VM 15 minutes to register and if it",
    "start": "1376940",
    "end": "1380059"
  },
  {
    "text": "fails to do so it assumes there is some",
    "start": "1380059",
    "end": "1381860"
  },
  {
    "text": "sort of a problem and it's uh it's going",
    "start": "1381860",
    "end": "1385100"
  },
  {
    "text": "to delete that VM and and delete line",
    "start": "1385100",
    "end": "1387799"
  },
  {
    "text": "later on",
    "start": "1387799",
    "end": "1389240"
  },
  {
    "text": "this usually happens because of",
    "start": "1389240",
    "end": "1391159"
  },
  {
    "text": "networking issues but there can be any",
    "start": "1391159",
    "end": "1393020"
  },
  {
    "text": "number of reasons I produce this",
    "start": "1393020",
    "end": "1394760"
  },
  {
    "text": "particular graph by just creating a file",
    "start": "1394760",
    "end": "1396860"
  },
  {
    "text": "wallet all that prevented cubelet for",
    "start": "1396860",
    "end": "1400460"
  },
  {
    "text": "managing API server this is a very",
    "start": "1400460",
    "end": "1403580"
  },
  {
    "text": "common issue but there can be any number",
    "start": "1403580",
    "end": "1405380"
  },
  {
    "text": "of other issues image pooling problems",
    "start": "1405380",
    "end": "1407240"
  },
  {
    "text": "are often are also quite component and",
    "start": "1407240",
    "end": "1409820"
  },
  {
    "text": "really anything can go along on the Node",
    "start": "1409820",
    "end": "1412460"
  },
  {
    "text": "side",
    "start": "1412460",
    "end": "1414700"
  },
  {
    "text": "um right another another one I wanted to",
    "start": "1415100",
    "end": "1418280"
  },
  {
    "text": "quickly show up was no option to scale",
    "start": "1418280",
    "end": "1421460"
  },
  {
    "text": "up right so this is what I also",
    "start": "1421460",
    "end": "1423260"
  },
  {
    "text": "mentioned earlier when talking about",
    "start": "1423260",
    "end": "1424520"
  },
  {
    "text": "events cluster autoscaler may not even",
    "start": "1424520",
    "end": "1428240"
  },
  {
    "text": "try to scale up because it doesn't think",
    "start": "1428240",
    "end": "1430280"
  },
  {
    "text": "the Pod will be able to schedule on any",
    "start": "1430280",
    "end": "1432260"
  },
  {
    "text": "of the notes that it can create I think",
    "start": "1432260",
    "end": "1435860"
  },
  {
    "text": "the most simple case or most simple",
    "start": "1435860",
    "end": "1437960"
  },
  {
    "text": "reason for this is if your Port has a",
    "start": "1437960",
    "end": "1439820"
  },
  {
    "text": "node selector but there is no node group",
    "start": "1439820",
    "end": "1442640"
  },
  {
    "text": "that has the matching labor right then",
    "start": "1442640",
    "end": "1444799"
  },
  {
    "text": "cluster autoscale will not scale up",
    "start": "1444799",
    "end": "1446419"
  },
  {
    "text": "because there is no point essentially at",
    "start": "1446419",
    "end": "1449419"
  },
  {
    "text": "least as far as Auto scale is concerned",
    "start": "1449419",
    "end": "1451039"
  },
  {
    "text": "and then it will write an event on the",
    "start": "1451039",
    "end": "1453559"
  },
  {
    "text": "pods so if you just Cube cuddly describe",
    "start": "1453559",
    "end": "1455539"
  },
  {
    "text": "the port there will be a not trigger",
    "start": "1455539",
    "end": "1457220"
  },
  {
    "text": "scale up event it's going to have a",
    "start": "1457220",
    "end": "1459980"
  },
  {
    "text": "message",
    "start": "1459980",
    "end": "1461000"
  },
  {
    "text": "um one thing about reading those",
    "start": "1461000",
    "end": "1462500"
  },
  {
    "text": "messages it says I think one note didn't",
    "start": "1462500",
    "end": "1466640"
  },
  {
    "text": "match node selector like in this case in",
    "start": "1466640",
    "end": "1469220"
  },
  {
    "text": "because with the using schedule error",
    "start": "1469220",
    "end": "1471500"
  },
  {
    "text": "messages but this really should be led",
    "start": "1471500",
    "end": "1475039"
  },
  {
    "text": "as one node group was not scaled up",
    "start": "1475039",
    "end": "1477980"
  },
  {
    "text": "because like nodes in that node group",
    "start": "1477980",
    "end": "1480740"
  },
  {
    "text": "would not match the node selectors I",
    "start": "1480740",
    "end": "1482480"
  },
  {
    "text": "only had one node group there and and it",
    "start": "1482480",
    "end": "1484820"
  },
  {
    "text": "didn't have the",
    "start": "1484820",
    "end": "1486080"
  },
  {
    "text": "node select where I need it",
    "start": "1486080",
    "end": "1488360"
  },
  {
    "text": "and yeah I think that's that's what I",
    "start": "1488360",
    "end": "1490940"
  },
  {
    "text": "wanted to discuss",
    "start": "1490940",
    "end": "1492679"
  },
  {
    "text": "um I'm happy to take any questions now",
    "start": "1492679",
    "end": "1495080"
  },
  {
    "text": "thank you",
    "start": "1495080",
    "end": "1497740"
  }
]