[
  {
    "start": "0",
    "end": "151000"
  },
  {
    "text": "hi everyone this is Qi and I work for ebay traffic engineering team today my",
    "start": "890",
    "end": "6420"
  },
  {
    "text": "colleague Paula and I can assure our journey for running Android as edge proxy at eBay so here is our agenda in",
    "start": "6420",
    "end": "16529"
  },
  {
    "text": "the beginning we're going to briefly talk about the edge then the software stack of the edge the elf oh and I was 7",
    "start": "16529",
    "end": "23939"
  },
  {
    "text": "controller and data plane what we did how we did it and after well cover the",
    "start": "23939",
    "end": "30089"
  },
  {
    "text": "monitoring and the deployment aspect of the edge proxy and towards the end we will talk about some some learnings and",
    "start": "30089",
    "end": "36750"
  },
  {
    "text": "the current session so first of all why",
    "start": "36750",
    "end": "42120"
  },
  {
    "text": "edge so in the past eBay only has data center in the US as traffic grow from",
    "start": "42120",
    "end": "49160"
  },
  {
    "text": "global user we will realize having the infrastructure that can deliver content",
    "start": "49160",
    "end": "54570"
  },
  {
    "text": "faster to our end user is really critical for us it's not just about ensure better user experience for people",
    "start": "54570",
    "end": "62730"
  },
  {
    "text": "visiting our website but they're also transmitted into more revenue more GMB",
    "start": "62730",
    "end": "68310"
  },
  {
    "text": "for e-commerce companies like eBay and all that translate into getting closer",
    "start": "68310",
    "end": "74520"
  },
  {
    "text": "to the end user so as for that edge is made of a bunch of pops or a point of",
    "start": "74520",
    "end": "80700"
  },
  {
    "text": "presence that is deployed around the globe so networking wise it's a location",
    "start": "80700",
    "end": "86490"
  },
  {
    "text": "that inter cannot even network to the internet computer wise as a much less",
    "start": "86490",
    "end": "91520"
  },
  {
    "text": "footprint than the data center so typically just field racks of servers so",
    "start": "91520",
    "end": "98789"
  },
  {
    "text": "in eBay we have cognitive Castille deploying each of the pub and by using",
    "start": "98789",
    "end": "104880"
  },
  {
    "text": "communities as a general-purpose running platform we're on our edge proxy stack there and by having at proxy in the pub",
    "start": "104880",
    "end": "113430"
  },
  {
    "text": "we are able to terminate SSL connection closer to the end user and save",
    "start": "113430",
    "end": "119369"
  },
  {
    "text": "expensive SSL round-trip latency across the continents that actually increased",
    "start": "119369",
    "end": "126600"
  },
  {
    "text": "the page page low speed and once we started that journey by converting into a software based at proxy",
    "start": "126600",
    "end": "133770"
  },
  {
    "text": "on edge we realize that there are much more things we can do than just increase",
    "start": "133770",
    "end": "138990"
  },
  {
    "text": "the speed for example it can help us to increase the site availability it allows",
    "start": "138990",
    "end": "144780"
  },
  {
    "text": "us to do security staff an edge etc etc but it all starts with a software based",
    "start": "144780",
    "end": "150420"
  },
  {
    "text": "edge proxy so as mentioned we use at",
    "start": "150420",
    "end": "155670"
  },
  {
    "start": "151000",
    "end": "427000"
  },
  {
    "text": "proxy as our newest gateway at it consists of one layer of self layer for",
    "start": "155670",
    "end": "162140"
  },
  {
    "text": "software load balancer and one layer of al-salam proxy using my so just to",
    "start": "162140",
    "end": "168540"
  },
  {
    "text": "double click on why we need to tears so each elf for instance advertise the web",
    "start": "168540",
    "end": "174330"
  },
  {
    "text": "sue PGP to draw the traffic and once the HTTP requests hitting a part of the TCP",
    "start": "174330",
    "end": "181440"
  },
  {
    "text": "packet belong to that TCP flow will be sent to one of our for instance through",
    "start": "181440",
    "end": "187320"
  },
  {
    "text": "the ICMP rolling since it's easy and pure re so all of our for instance will",
    "start": "187320",
    "end": "193830"
  },
  {
    "text": "be in active mode be actively part of the classroom and once the packet get",
    "start": "193830",
    "end": "199230"
  },
  {
    "text": "there they are for will determine well to send a packet to for the l7 in a back",
    "start": "199230",
    "end": "205590"
  },
  {
    "text": "and each l7 sorry each l4 uses the render was hashing to",
    "start": "205590",
    "end": "211980"
  },
  {
    "text": "determine the schedule result so for the packet belong to the same GDP flow is",
    "start": "211980",
    "end": "218520"
  },
  {
    "text": "guaranteed to reach the same l7 so with the random who's hashing it helped us to",
    "start": "218520",
    "end": "224340"
  },
  {
    "text": "operate our seven culture in a controlled manner for example in case we",
    "start": "224340",
    "end": "230670"
  },
  {
    "text": "want to roll our 7 software upgrade we can simply believe a single l7 so that",
    "start": "230670",
    "end": "236520"
  },
  {
    "text": "will trigger the connection training from l4 2000 once the connection is chain 4 we'll be removing the house 7",
    "start": "236520",
    "end": "244680"
  },
  {
    "text": "from the hash table and that will not",
    "start": "244680",
    "end": "250050"
  },
  {
    "text": "have an impact for the connections between the l4 and the remaining of the earth sevens meaning no SSL disruption",
    "start": "250050",
    "end": "258829"
  },
  {
    "text": "adding a l7 proxy to the cluster on the other hand well now have any impact for",
    "start": "258830",
    "end": "265290"
  },
  {
    "text": "the establish nation' between l4 and our 7th hour only triggered at least amount of has hash repast",
    "start": "265290",
    "end": "272710"
  },
  {
    "text": "so that's l4 so our architecture actually follows the same design pattern",
    "start": "272710",
    "end": "279490"
  },
  {
    "text": "for both alpha and o7 so post has a control plane and a data plane",
    "start": "279490",
    "end": "284740"
  },
  {
    "text": "so for l4 we use IP vsfs our data plane we have a homegrown project called",
    "start": "284740",
    "end": "291220"
  },
  {
    "text": "yuppie return for the control plane for the l7 we use envoi as our data plan and",
    "start": "291220",
    "end": "297310"
  },
  {
    "text": "we use ingress control as our control plane so everything is a Spectre even",
    "start": "297310",
    "end": "303400"
  },
  {
    "text": "give happy model driven so to operate a cancer we create sparks through kubernetes api server then our alpha and",
    "start": "303400",
    "end": "310900"
  },
  {
    "text": "our seven going to translate aspects into the alpha and a seven configs accordingly and since it's a cube native",
    "start": "310900",
    "end": "320230"
  },
  {
    "text": "department everything runs in a path so we can easily horizontal scale either l4",
    "start": "320230",
    "end": "327130"
  },
  {
    "text": "l7 a little bit more regarding the elf",
    "start": "327130",
    "end": "333430"
  },
  {
    "text": "for software load balancer as mentioned earlier it's a BBS based data plane we have an in-house build",
    "start": "333430",
    "end": "341200"
  },
  {
    "text": "kernel model called IP vs TBL the TBL stands for the table so that kernel",
    "start": "341200",
    "end": "347590"
  },
  {
    "text": "module will schedule the packet based on the the hashing table and that hashing",
    "start": "347590",
    "end": "353020"
  },
  {
    "text": "table is generate from the user space by the control plane y batata and ya be two",
    "start": "353020",
    "end": "359050"
  },
  {
    "text": "other programs the kernel by pushing down that data into kernel zoonatic each",
    "start": "359050",
    "end": "367570"
  },
  {
    "text": "elf or pal has a unique container that is recent responsible for load the",
    "start": "367570",
    "end": "373060"
  },
  {
    "text": "kernel module into the into the community no first time is being",
    "start": "373060",
    "end": "379390"
  },
  {
    "text": "scheduled it also has a health check sidecar check the house between the L 4",
    "start": "379390",
    "end": "384910"
  },
  {
    "text": "& 7 obviously only after passed the house chapter 7 can be added to the L form",
    "start": "384910",
    "end": "393300"
  },
  {
    "text": "once the l 7 has the house check l 4 will actually start a BGP advertising",
    "start": "393360",
    "end": "400550"
  },
  {
    "text": "all the traffic we also used DSR or the",
    "start": "400550",
    "end": "405620"
  },
  {
    "text": "direct server returned for the egress path so meaning when the l7 returns the",
    "start": "405620",
    "end": "411860"
  },
  {
    "text": "response back to the end user well bypass the L fault here and direct",
    "start": "411860",
    "end": "417860"
  },
  {
    "text": "a return path to the end user that allows us to run much less l 4 to match",
    "start": "417860",
    "end": "425450"
  },
  {
    "text": "more else events so so next my click",
    "start": "425450",
    "end": "430460"
  },
  {
    "text": "banner gonna talk about the Ellison aspect I'm going to walk you through in",
    "start": "430460",
    "end": "439880"
  },
  {
    "text": "much more detail as to how we run on why and like how we we manage it and also",
    "start": "439880",
    "end": "448130"
  },
  {
    "text": "the cases like what are the control plane how we have integrated with kubernetes and how is the data plane and",
    "start": "448130",
    "end": "454130"
  },
  {
    "text": "what are the features and optimizations that we have done and one can also discuss about one specific use case that",
    "start": "454130",
    "end": "459710"
  },
  {
    "text": "we built on top of on why to call the dynamic caching so let me start so",
    "start": "459710",
    "end": "465530"
  },
  {
    "text": "basically we run on Y as a container and basically support in kubernetes and we",
    "start": "465530",
    "end": "471800"
  },
  {
    "text": "run it with along with a bunch of other containers that I will be explaining and",
    "start": "471800",
    "end": "477550"
  },
  {
    "text": "also we chose with going with the deployment controller and the reason we chose to use a deployment controller",
    "start": "477550",
    "end": "484730"
  },
  {
    "text": "resource is the advantages that we get out of it so basically things like when",
    "start": "484730",
    "end": "489890"
  },
  {
    "text": "you're running on Y or any else around proxy you would want to roll out new features pretty often as well as like or",
    "start": "489890",
    "end": "495740"
  },
  {
    "text": "you want to do some software upgrades or anything that you want to do pretty often so you will always want to have",
    "start": "495740",
    "end": "501410"
  },
  {
    "text": "live traffic being received and then you still want to have a much control when you do this so coconut is provides the",
    "start": "501410",
    "end": "508250"
  },
  {
    "text": "rolling update strategy that kind of helps you facilitate where you could say what is the threshold on which you want",
    "start": "508250",
    "end": "514280"
  },
  {
    "text": "the number of pods to be terminated so that you always know that you have a set",
    "start": "514280",
    "end": "519740"
  },
  {
    "text": "of pods always running and receiving traffic so this helps you to do in service upgrades and also it helps you",
    "start": "519740",
    "end": "526430"
  },
  {
    "text": "deployment controllers helps you to scale up and scale down if you want as well as it gives you more much more",
    "start": "526430",
    "end": "531500"
  },
  {
    "text": "flexibility cases like if you want to if you find out you're all out didn't go as expected",
    "start": "531500",
    "end": "537350"
  },
  {
    "text": "and you want to pass them or probably like even rollback them so so that's the",
    "start": "537350",
    "end": "542900"
  },
  {
    "text": "reason even for the deployment controller option as my colleague said before so we are everything income rate",
    "start": "542900",
    "end": "550370"
  },
  {
    "text": "is a spec driven so this is what this part is going to say like how we are going to create the Envoy configuration",
    "start": "550370",
    "end": "555800"
  },
  {
    "text": "dynamically and again we have a bunch of specs so basically the ingress spec is",
    "start": "555800",
    "end": "561770"
  },
  {
    "text": "what we use for specifying what is the listener IP you want what are all the",
    "start": "561770",
    "end": "567140"
  },
  {
    "text": "features that you want to turn on do you want TLS or termination or it's just going to be HTTP or do you want G's or",
    "start": "567140",
    "end": "573440"
  },
  {
    "text": "any of these features you could also say like what port you want to listen on and things like that so this all these",
    "start": "573440",
    "end": "578930"
  },
  {
    "text": "details that basically typically goes under the listener configuration goes on there are introspect and for the routes",
    "start": "578930",
    "end": "584960"
  },
  {
    "text": "basically the ones that envoy l7 routes goes as a part of the CRD socking in c",
    "start": "584960",
    "end": "592370"
  },
  {
    "text": "rd is as a type of an api resource object that gives you the option to create your own schema and kubernetes",
    "start": "592370",
    "end": "600560"
  },
  {
    "text": "will take care of managing it throughout the lifetime of that similarly for the endpoints basically the the clusters",
    "start": "600560",
    "end": "606590"
  },
  {
    "text": "that the backend pools you could use the endpoint spec and so how this works is",
    "start": "606590",
    "end": "612740"
  },
  {
    "text": "once you once you end the service pack so once you create all these spec on the AP a QB API server so the cube API",
    "start": "612740",
    "end": "620210"
  },
  {
    "text": "server realizes these using a controller called the ingress controller so the",
    "start": "620210",
    "end": "626540"
  },
  {
    "text": "English controller again is this kind of pretty dynamic you could it could basically get the task from the API",
    "start": "626540",
    "end": "633320"
  },
  {
    "text": "server and then it could convert it into these specs as as config maps again",
    "start": "633320",
    "end": "638450"
  },
  {
    "text": "kubernetes resources so these conflict maps will again be picked up by the discovery service that will be running",
    "start": "638450",
    "end": "644750"
  },
  {
    "text": "as a sidecar container with envoy so I'll be discussing that in the next slide so what the ingress controller",
    "start": "644750",
    "end": "650990"
  },
  {
    "text": "basically does is it kinds of whatever Roxy you might be using it kinds of",
    "start": "650990",
    "end": "656210"
  },
  {
    "text": "tries to convert your your legacy style specs into configs that you could easily",
    "start": "656210",
    "end": "662330"
  },
  {
    "text": "dynamically load and as you know let's say if just one endpoint Changez only the endpoint spec would get",
    "start": "662330",
    "end": "668829"
  },
  {
    "text": "modified and only your endpoints config map would be changed that way all the",
    "start": "668829",
    "end": "673899"
  },
  {
    "text": "other configuration would still be the same so this is this slide tells you more about like how every part l7 pod",
    "start": "673899",
    "end": "681790"
  },
  {
    "text": "runs so basically as you see you have the the on Y container and a discovery service and a bunch of other stats",
    "start": "681790",
    "end": "688600"
  },
  {
    "text": "d-file beat containers so I'll be mostly talking on the discovery and the Envoy",
    "start": "688600",
    "end": "694779"
  },
  {
    "text": "and a little about the unit container so the unit container is hugging one good option where when you want to when you",
    "start": "694779",
    "end": "701110"
  },
  {
    "text": "want to like when have some tasks that runs to completion things like you want to fetch a token or if you want to do",
    "start": "701110",
    "end": "709120"
  },
  {
    "text": "some unit settings like changer congestion control algorithm or your TCP socket settings you could have the unit",
    "start": "709120",
    "end": "714759"
  },
  {
    "text": "container do that for you before the Envoy comes up that way things are up and running for you and and then the",
    "start": "714759",
    "end": "722050"
  },
  {
    "text": "discovery container so the discovery container mainly watches on the config Maps so what it does is it tries to see",
    "start": "722050",
    "end": "728589"
  },
  {
    "text": "if there's any change in the config map and uses the envoys LDS RDS EDS and the",
    "start": "728589",
    "end": "733870"
  },
  {
    "text": "serious features to try to update the configuration and there's an envoy agent",
    "start": "733870",
    "end": "740740"
  },
  {
    "text": "that runs along with the Envoy container it's a sidecar process that kind of is is the is the pup is the one who tries",
    "start": "740740",
    "end": "747519"
  },
  {
    "text": "to boot up on voice so it sees that there is a change in the config and then",
    "start": "747519",
    "end": "752769"
  },
  {
    "text": "it loads and then it uses the on voice hot restart feature to try to",
    "start": "752769",
    "end": "757779"
  },
  {
    "text": "dynamically restart the Envoy without any loss in traffic and we also let's",
    "start": "757779",
    "end": "764679"
  },
  {
    "text": "say you're you're doing all these and then you are also using the readiness and the liveliness Pro so the readiness",
    "start": "764679",
    "end": "770800"
  },
  {
    "text": "for again this is something that's that's part of the kubernetes so the the readiness probe is something like like",
    "start": "770800",
    "end": "778420"
  },
  {
    "text": "you want the container to be a but you don't want it to be getting the traffic as soon as it comes up you want to have",
    "start": "778420",
    "end": "784149"
  },
  {
    "text": "your own dynamic discoveries or whatever that you are trying to load our applications to get ready so you you",
    "start": "784149",
    "end": "791559"
  },
  {
    "text": "basically have your own healthy hand point as a part of on why and you could say they know what only after all",
    "start": "791559",
    "end": "797470"
  },
  {
    "text": "these are probably like the listeners talk head is opened right you'll have things like these and then you could say you know what one day after this deemed",
    "start": "797470",
    "end": "803950"
  },
  {
    "text": "this container is ready so what this does is tell that it the Elfa load balancer would not load balance any",
    "start": "803950",
    "end": "809980"
  },
  {
    "text": "traffic to the L sevens and only after the readiness protein and then is successful you basically start giving",
    "start": "809980",
    "end": "817810"
  },
  {
    "text": "traffic to the Envoy the library nurse power bond is basically to continuously monitor unwise if it's running if the",
    "start": "817810",
    "end": "823960"
  },
  {
    "text": "containers for some reason crashes it is immediately moved out of the concision hashing table so that way you don't lose",
    "start": "823960",
    "end": "829870"
  },
  {
    "text": "any more or you don't send any more new connections so this kind of says that",
    "start": "829870",
    "end": "835120"
  },
  {
    "start": "833000",
    "end": "1132000"
  },
  {
    "text": "what the control plane path was so now I'm going to say a little more on the data plane path so so as you know like",
    "start": "835120",
    "end": "842530"
  },
  {
    "text": "when we are creating this edge we are basically trying to replace all the hardware L bees with envoys and the main",
    "start": "842530",
    "end": "848950"
  },
  {
    "text": "task that we had to do first was to identify what are all the features that that's that were being used in the",
    "start": "848950",
    "end": "853960"
  },
  {
    "text": "current Hardware elby's and then trying to find equivalence of on why on why mostly had most of them and then we",
    "start": "853960",
    "end": "859990"
  },
  {
    "text": "identified a few set of features that were like not yet implemented so we went",
    "start": "859990",
    "end": "865750"
  },
  {
    "text": "ahead and implemented it and contributed some upstream to so and so along with",
    "start": "865750",
    "end": "871510"
  },
  {
    "text": "this once you do this like because the configurations are huge for a company like eBay so you basically wrote",
    "start": "871510",
    "end": "878170"
  },
  {
    "text": "automation scripts for trying to convert all these hardware configurations to on why specific configurations and also",
    "start": "878170",
    "end": "885970"
  },
  {
    "text": "once you did this you want to have a way to validate it right so again we came up with a few set of the way to reverse",
    "start": "885970",
    "end": "893320"
  },
  {
    "text": "engineer based on the path or the prefix or the query match we could dynamically generate request that's going to hit",
    "start": "893320",
    "end": "899920"
  },
  {
    "text": "every specific routes and then try to use this tool to send traffic to both",
    "start": "899920",
    "end": "905260"
  },
  {
    "text": "the hardware and the software and then see if the response you get back is exactly the same we also had rum that's",
    "start": "905260",
    "end": "912010"
  },
  {
    "text": "basically to to monitor more on the performance side whether your edge network is working as expected or maybe",
    "start": "912010",
    "end": "920170"
  },
  {
    "text": "if you roll out some new features are you seeing any degradation in performance and things like that so rum basically stands for real user metrics",
    "start": "920170",
    "end": "927100"
  },
  {
    "text": "so this is part of on every ebay pay once the actual content is delivered you",
    "start": "927100",
    "end": "934930"
  },
  {
    "text": "have a small JavaScript that tries to download some from the pop and then gives you a much better information",
    "start": "934930",
    "end": "941740"
  },
  {
    "text": "about like how the what was the speed I mean how how close it was it was any transmissions or things like that so",
    "start": "941740",
    "end": "949120"
  },
  {
    "text": "that was mostly the migration part along with this further we did a brain to get up and running we had to integrate with",
    "start": "949120",
    "end": "956200"
  },
  {
    "text": "a bunch of proprietary assert management systems that you want to manage like SSL",
    "start": "956200",
    "end": "962170"
  },
  {
    "text": "service or anything so we once we got this we are now looking into the data",
    "start": "962170",
    "end": "967330"
  },
  {
    "text": "plane features that we want enable I'm not going to list the awesome features that onwhy provides but because it's",
    "start": "967330",
    "end": "974680"
  },
  {
    "text": "going to be unique for every specific use case I'm just going to touch a little bit on the certain optimizations",
    "start": "974680",
    "end": "980590"
  },
  {
    "text": "that we did on top of envoy and that so one major requirement we had was because",
    "start": "980590",
    "end": "986920"
  },
  {
    "text": "it's an edge use case we always want a much better connectivity from the pop to the data center right so what we did was",
    "start": "986920",
    "end": "994060"
  },
  {
    "text": "on why we were able to like have connection prefetching based on the dynamic dynamically traffic rate so you",
    "start": "994060",
    "end": "1001440"
  },
  {
    "text": "would basically go and see that if the traffic rate is higher you would want to pre create or prefetch connections with",
    "start": "1001440",
    "end": "1008340"
  },
  {
    "text": "SSL talk with SSL's so that you don't want any of your requests to be queued at any time and this this was this after",
    "start": "1008340",
    "end": "1017370"
  },
  {
    "text": "this we based on the stat we were able to see that the cube connection count went down to zero so delivering much",
    "start": "1017370",
    "end": "1024120"
  },
  {
    "text": "better experience to UV users and also we had a couple of use cases where you wanted to like drop or reset a",
    "start": "1024120",
    "end": "1030689"
  },
  {
    "text": "particular connection maybe during for security reasons or whatever we don't want them to go all the way up to the DC so we wanted them to do we handle that",
    "start": "1030690",
    "end": "1038100"
  },
  {
    "text": "pop so what we did was we created an l4 filter that kind of sits along in on Roy",
    "start": "1038100",
    "end": "1044819"
  },
  {
    "text": "that kind of watches for whatever you don't want and then drops or resets back the connection so and also we we wanted",
    "start": "1044820",
    "end": "1053310"
  },
  {
    "text": "a way let's say if the connectivity from the edge to the data center is is bad or went down you don't want to your",
    "start": "1053310",
    "end": "1060300"
  },
  {
    "text": "customers to see 503 upstream timeouts so we came up with a small the feature again says basically called",
    "start": "1060300",
    "end": "1067029"
  },
  {
    "text": "the default cluster where you want to gracefully handle Chris will handle the way that you want to show your user",
    "start": "1067029",
    "end": "1073350"
  },
  {
    "text": "better a much better experience rather than showing a blank page so yeah these",
    "start": "1073350",
    "end": "1079659"
  },
  {
    "text": "are the customizations that we did and like it was very easy to do it on Envoy because of the existing architecture",
    "start": "1079659",
    "end": "1085769"
  },
  {
    "text": "along with this on the on the operating system we were also able to tweak a few",
    "start": "1085769",
    "end": "1091509"
  },
  {
    "text": "settings to again to have a much better experience so one was we were only running cubic and as the TCP congestion",
    "start": "1091509",
    "end": "1098860"
  },
  {
    "text": "control algorithm and we wanted to adopt beabea so we went with enabling PBR for",
    "start": "1098860",
    "end": "1105399"
  },
  {
    "text": "the RAM traffic and we saw like tremendous improvement in the rate traffic rate at which you deliver it",
    "start": "1105399",
    "end": "1111009"
  },
  {
    "text": "back to the client and we didn't want to miss that out so we went ahead and enable bbr and as I told before it's",
    "start": "1111009",
    "end": "1117100"
  },
  {
    "text": "using the unit containers you could turn on PBR and then turn on the on voice so",
    "start": "1117100",
    "end": "1122139"
  },
  {
    "text": "similarly we did a bunch of TCP optimizations as as simple as turning",
    "start": "1122139",
    "end": "1127629"
  },
  {
    "text": "off slow start or having a better socket receive or send buffers so this is a",
    "start": "1127629",
    "end": "1133480"
  },
  {
    "start": "1132000",
    "end": "1184000"
  },
  {
    "text": "quick glance on how it went through so if you see the first the line on top is",
    "start": "1133480",
    "end": "1139720"
  },
  {
    "text": "basically what is the response times if you have it directly terminated at the data center from all over the world but",
    "start": "1139720",
    "end": "1147309"
  },
  {
    "text": "the one on the in in between is what let's say it's pretty much close to the",
    "start": "1147309",
    "end": "1152529"
  },
  {
    "text": "hardware LB that's running on the power let's let's say but we always don't want to settle with something that is equal",
    "start": "1152529",
    "end": "1158830"
  },
  {
    "text": "but we want to beat them right so what we did was along with on wise we also did the TCP optimizations and ran the",
    "start": "1158830",
    "end": "1166059"
  },
  {
    "text": "bbr optimizations and if you see to the to the blue part we are now clearly beating the numbers that and any current",
    "start": "1166059",
    "end": "1175659"
  },
  {
    "text": "or edge Hardware in B's could provide with with own voice and with our customizations so that's one of the the",
    "start": "1175659",
    "end": "1183250"
  },
  {
    "text": "best things that you would want to and yeah so that that concludes on the data",
    "start": "1183250",
    "end": "1188679"
  },
  {
    "start": "1184000",
    "end": "1333000"
  },
  {
    "text": "plane path so this is something that I want to say like what you can do on top of Envoy",
    "start": "1188679",
    "end": "1194000"
  },
  {
    "text": "when you run it on the edge so we created again a new filter that's that's basically does caching and when I mean",
    "start": "1194000",
    "end": "1201350"
  },
  {
    "text": "caching it's dynamic caching so dynamic has in like this is something that in a",
    "start": "1201350",
    "end": "1207380"
  },
  {
    "text": "page where you have content that is specific to geography like if it's a if",
    "start": "1207380",
    "end": "1212420"
  },
  {
    "text": "a German customer you want to show him in his specific dollars or whatever so so we were able to we using the filter",
    "start": "1212420",
    "end": "1220760"
  },
  {
    "text": "that we created we were able to do it based on let's say a path or a specific query or a specific user so we we were",
    "start": "1220760",
    "end": "1227960"
  },
  {
    "text": "able to achieve this as a part of this we did when we created the filter we did not have the cash stores as on wire",
    "start": "1227960",
    "end": "1234500"
  },
  {
    "text": "themselves but we just used ATS or any other store cash stores that he could use but again we use the ring hash",
    "start": "1234500",
    "end": "1244280"
  },
  {
    "text": "she'll be in envoy to basically to get your sharding turn on because you won't",
    "start": "1244280",
    "end": "1249740"
  },
  {
    "text": "want let's say multiple ATS running and you want the cash to be stored and retrieved on one of them and you also",
    "start": "1249740",
    "end": "1255170"
  },
  {
    "text": "always want to access them and that again has to be a something that is part of a path prefix or query or you want to",
    "start": "1255170",
    "end": "1262400"
  },
  {
    "text": "crunch that data so we use the ring has shell B which has support for you",
    "start": "1262400",
    "end": "1267920"
  },
  {
    "text": "providing a string on which you want to hash on and pick the upstream so that",
    "start": "1267920",
    "end": "1273500"
  },
  {
    "text": "was again one other once we rolled it were rolled this out a few months back we started seeing like tremendous",
    "start": "1273500",
    "end": "1279850"
  },
  {
    "text": "improved in the TTT FP because now it's as simple as we moved to the pub and we",
    "start": "1279850",
    "end": "1286460"
  },
  {
    "text": "got things working but now we don't even need to access the data center to get the data that's like as I said it's ten",
    "start": "1286460",
    "end": "1293270"
  },
  {
    "text": "times much better and not only the T TFB but because you are delivering the content really fast to the user you are",
    "start": "1293270",
    "end": "1299690"
  },
  {
    "text": "trying to like engage them much like for them to skim through to see what is the pricing or what is is this the item I am",
    "start": "1299690",
    "end": "1306140"
  },
  {
    "text": "expecting or things like that you're kind of engaging them and don't want them to go to other websites so so",
    "start": "1306140",
    "end": "1313160"
  },
  {
    "text": "that's one major advantage that we were seeing we also have a few in the roadmap something like we want to say if someone",
    "start": "1313160",
    "end": "1319670"
  },
  {
    "text": "is searching for for an item and you want start caching proactively the top five",
    "start": "1319670",
    "end": "1325980"
  },
  {
    "text": "things that basically is being listed as a part of eBay site so that that's something that we are thinking about",
    "start": "1325980",
    "end": "1331700"
  },
  {
    "text": "again this is a very overview of what we",
    "start": "1331700",
    "end": "1336720"
  },
  {
    "text": "got out of let's say the response times if you directly hit the DC and the",
    "start": "1336720",
    "end": "1341880"
  },
  {
    "text": "yellow line is with having it as an edge proxy and what if you what is the",
    "start": "1341880",
    "end": "1347309"
  },
  {
    "text": "benefit that you see the green line is from caching where it's much much much lesser when compared to delivering it as",
    "start": "1347309",
    "end": "1355559"
  },
  {
    "text": "an edge so yeah that's great and I think",
    "start": "1355559",
    "end": "1360570"
  },
  {
    "start": "1359000",
    "end": "1562000"
  },
  {
    "text": "you I will continue with the ability so coming to the monitoring or the",
    "start": "1360570",
    "end": "1366120"
  },
  {
    "text": "observability part of the department we use promises for the monetary purpose",
    "start": "1366120",
    "end": "1372299"
  },
  {
    "text": "and we replicate the same thing to all our pops so it's kind of a",
    "start": "1372299",
    "end": "1377820"
  },
  {
    "text": "self-contained stuff so in each hop up we run premise as a pair we use at a",
    "start": "1377820",
    "end": "1385350"
  },
  {
    "text": "nose for the promise hae from there the data the mattress being merged and",
    "start": "1385350",
    "end": "1390929"
  },
  {
    "text": "duplicated and returned to the core interface we're on Mineo in each of the pops to",
    "start": "1390929",
    "end": "1397860"
  },
  {
    "text": "further to keep the matrix for a longer time period we haven't got to the part",
    "start": "1397860",
    "end": "1405780"
  },
  {
    "text": "to use promise or channels for aggregation across the globe but we have",
    "start": "1405780",
    "end": "1410970"
  },
  {
    "text": "a centralized growth fauna that can read the promise data from each of the pops",
    "start": "1410970",
    "end": "1416960"
  },
  {
    "text": "for both L for our seven metrics as well as a metric from other supporting stacks",
    "start": "1416960",
    "end": "1422540"
  },
  {
    "text": "and also measures from other data sources as well such as a unity search",
    "start": "1422540",
    "end": "1427669"
  },
  {
    "text": "so a little bit more recording and more specific things we use teste Explorer as",
    "start": "1427669",
    "end": "1433230"
  },
  {
    "text": "a sidecar running together with my - to receive the histogram Tara and that's",
    "start": "1433230",
    "end": "1440460"
  },
  {
    "text": "test exported intern exposed to the premise interface for screen server to",
    "start": "1440460",
    "end": "1446669"
  },
  {
    "text": "scrubbing from we use FA okay for the access log so F stands for the FRP so",
    "start": "1446669",
    "end": "1453330"
  },
  {
    "text": "inside each of the l7 how the therapy is responsible for shipping the axonal out to a centralized",
    "start": "1453330",
    "end": "1461009"
  },
  {
    "text": "locks their farm from there the lock being passed process and then sent to a",
    "start": "1461009",
    "end": "1467309"
  },
  {
    "text": "calf cart and I think and then in turn being sent back to the data center we",
    "start": "1467309",
    "end": "1472980"
  },
  {
    "text": "have a managed electives are classes there from there we run analytics jobs for for analytics and alerting purpose",
    "start": "1472980",
    "end": "1481489"
  },
  {
    "text": "as well alerting we have a manager deploy in each of the parts we also have",
    "start": "1481489",
    "end": "1487230"
  },
  {
    "text": "external charts that check our check on our public web so ensure everything",
    "start": "1487230",
    "end": "1492480"
  },
  {
    "text": "works from end to end we have post etiquette based alerts that's the",
    "start": "1492480",
    "end": "1498149"
  },
  {
    "text": "manager we also have dynamic base dollars that is the anomaly detection",
    "start": "1498149",
    "end": "1503369"
  },
  {
    "text": "based on the research data we use home",
    "start": "1503369",
    "end": "1509399"
  },
  {
    "text": "for our deployment management so that it can give us a consistent stack across",
    "start": "1509399",
    "end": "1516239"
  },
  {
    "text": "all the pops actually it's not just about part but also consistent",
    "start": "1516239",
    "end": "1521970"
  },
  {
    "text": "department you know Democrats and our production cancer as well as you can see from the screenshot here so everything",
    "start": "1521970",
    "end": "1528869"
  },
  {
    "text": "is packaged into a hump chart so we have ham chart 4 l 4 and l 7 and with the",
    "start": "1528869",
    "end": "1536129"
  },
  {
    "text": "help of how you actually can deploy multiple crashes l 7 inside kubernetes",
    "start": "1536129",
    "end": "1543359"
  },
  {
    "text": "cluster and from from there you get a single cell to choose for everything for",
    "start": "1543359",
    "end": "1550230"
  },
  {
    "text": "example what's being deployed but what was the version that been deploy and",
    "start": "1550230",
    "end": "1555499"
  },
  {
    "text": "which time frame it was deployed so that's the superpower we we got from the",
    "start": "1555499",
    "end": "1561090"
  },
  {
    "text": "helm so next we're going to share some learnings yeah so now that like most",
    "start": "1561090",
    "end": "1569309"
  },
  {
    "start": "1562000",
    "end": "2001000"
  },
  {
    "text": "more than 50% of the worldwide ebay traffic is being deduct redirected through the edge and it's on why that is",
    "start": "1569309",
    "end": "1576090"
  },
  {
    "text": "basically taking the traffic we wanted to share a few learnings that we we we",
    "start": "1576090",
    "end": "1582529"
  },
  {
    "text": "we experienced and we also wanted to highlight what are the challenges going forward I'm pretty sure",
    "start": "1582529",
    "end": "1588600"
  },
  {
    "text": "the part of the community is going to do the same so in the learnings basically what we see is because this is like",
    "start": "1588600",
    "end": "1596010"
  },
  {
    "text": "everything is new here edges new software stacks are new so you had to relay a lot on testing and testing is",
    "start": "1596010",
    "end": "1603090"
  },
  {
    "text": "definitely the the key part that you want to make sure that you you spend an effort and time on to get your thing",
    "start": "1603090",
    "end": "1610470"
  },
  {
    "text": "initiative successfully so the ways that we basically did was the hardware to software cross validation that I",
    "start": "1610470",
    "end": "1616470"
  },
  {
    "text": "explained rum for let's say for continuously looking for performance metrics that you don't want to let's say",
    "start": "1616470",
    "end": "1622590"
  },
  {
    "text": "after a specific rollout of a node you would probably see that some difference so you will want to make sure that your",
    "start": "1622590",
    "end": "1629040"
  },
  {
    "text": "performance is always being met as well as like new cases like things like what",
    "start": "1629040",
    "end": "1634500"
  },
  {
    "text": "if a DC goes down right what if one other pop goes down right so how are you going to handle these cases right so we",
    "start": "1634500",
    "end": "1640470"
  },
  {
    "text": "have to do a thorough rigorous testing of each of these cases before we could start taking production traffic so we so",
    "start": "1640470",
    "end": "1648090"
  },
  {
    "text": "that's that's one key step testing is key and the second part is okay now that you have tested and got everything built",
    "start": "1648090",
    "end": "1654570"
  },
  {
    "text": "and everything ready how are you going to transition it like are you going to turn on a switch and then make sure all the hundred-person of the traffic is",
    "start": "1654570",
    "end": "1660330"
  },
  {
    "text": "going to go to the software will be no right so you would want to do that in a much controlled manner where like you",
    "start": "1660330",
    "end": "1666120"
  },
  {
    "text": "know that you know what let me put 1% 5% you want to go in slices and for this",
    "start": "1666120",
    "end": "1672060"
  },
  {
    "text": "you would want to like spend some effort in integrating with existing systems in",
    "start": "1672060",
    "end": "1677100"
  },
  {
    "text": "your company where you would want to like finally send traffic to multiple",
    "start": "1677100",
    "end": "1682200"
  },
  {
    "text": "systems and then monitor them so these are the things that we thought is is going to be useful for the community as",
    "start": "1682200",
    "end": "1688380"
  },
  {
    "text": "well and the challenges in the challenges part as you know I mean we",
    "start": "1688380",
    "end": "1693750"
  },
  {
    "text": "are always growing so the number of pops keeps increasing every month right so now comes the pain part of it like how",
    "start": "1693750",
    "end": "1701220"
  },
  {
    "text": "are you going to manage the ops how are you going to make sure there's no drift in the configuration that's being running in each of these pops right so",
    "start": "1701220",
    "end": "1707580"
  },
  {
    "text": "we are still thinking about solutions for these and that's the that's one of",
    "start": "1707580",
    "end": "1713550"
  },
  {
    "text": "the challenges and also again with much more power you get more I got you have",
    "start": "1713550",
    "end": "1719790"
  },
  {
    "text": "to be careful because now with sitting the edge you know that exactly what is the amount of data that you'll be",
    "start": "1719790",
    "end": "1726420"
  },
  {
    "text": "getting you know where the users are you get and then you know like how far the users are from the pop and where the",
    "start": "1726420",
    "end": "1732540"
  },
  {
    "text": "users are growing and they're coming from mobile or they're coming from desktop and things like that you would",
    "start": "1732540",
    "end": "1737820"
  },
  {
    "text": "want to do a lot more with such amount of data so that's one of the pleasant",
    "start": "1737820",
    "end": "1743160"
  },
  {
    "text": "challenges that we have that we would want to handle and make it of more use for eBay and the second thing is because",
    "start": "1743160",
    "end": "1749130"
  },
  {
    "text": "we moved from legacy hardware to coupon IDs like now comes the problem of",
    "start": "1749130",
    "end": "1754260"
  },
  {
    "text": "debugging and troubleshooting right how are we going to do that let's say if there's a p1 case like how are you going",
    "start": "1754260",
    "end": "1760500"
  },
  {
    "text": "to quickly go ahead and turn on certain things and start debugging it right from because as you know coverage is a really",
    "start": "1760500",
    "end": "1766530"
  },
  {
    "text": "complex system so so these are the challenges we are still addressing and we just thought it would be good to",
    "start": "1766530",
    "end": "1773040"
  },
  {
    "text": "share it so yeah and yeah if you can go",
    "start": "1773040",
    "end": "1778680"
  },
  {
    "text": "with any Q&A and we are yeah one or two questions please",
    "start": "1778680",
    "end": "1785690"
  },
  {
    "text": "yeah definitely as I said we did contribute some but these things are",
    "start": "1805130",
    "end": "1810150"
  },
  {
    "text": "more of like basically that the dynamic prefetching was based on a small",
    "start": "1810150",
    "end": "1815430"
  },
  {
    "text": "algorithm that we wrote we wanted to test it out well and then probably push it upstream that way it would be perfect",
    "start": "1815430",
    "end": "1822060"
  },
  {
    "text": "when it everyone runs it so yeah we will definitely and then also be very in a rush to get all these up and running in",
    "start": "1822060",
    "end": "1828480"
  },
  {
    "text": "a year or a year and a half so we would want to take some time during the summer and they'd probably do it so yeah we'll",
    "start": "1828480",
    "end": "1834480"
  },
  {
    "text": "definitely do it",
    "start": "1834480",
    "end": "1836990"
  },
  {
    "text": "chaos testing with this pre menu I would say so basically just to ensure when",
    "start": "1845840",
    "end": "1851520"
  },
  {
    "text": "things go south our Intel Intel stack can still function as is so basically",
    "start": "1851520",
    "end": "1857970"
  },
  {
    "text": "which is random kill this certain part of the stack the l4 and a7 to ensure the",
    "start": "1857970",
    "end": "1863370"
  },
  {
    "text": "house checking the other everything can still work expected meanwhile we have",
    "start": "1863370",
    "end": "1868890"
  },
  {
    "text": "the monitoring going on to make sure we capture all the events from from the",
    "start": "1868890",
    "end": "1874740"
  },
  {
    "text": "firm the change yeah it was pretty manual but at least we did like cases like one of the tours going down are we",
    "start": "1874740",
    "end": "1882150"
  },
  {
    "text": "handling it so things like you could run L force and multiple tours things like that so that you have internal high",
    "start": "1882150",
    "end": "1887340"
  },
  {
    "text": "availability yeah so we use helm for",
    "start": "1887340",
    "end": "1901830"
  },
  {
    "text": "that yes so every pop is a kubernetes",
    "start": "1901830",
    "end": "1912060"
  },
  {
    "text": "cluster and you have a helm to know what is the config that's actually running what is the what is the latest software",
    "start": "1912060",
    "end": "1919260"
  },
  {
    "text": "version what are the IPS that you are using and things like coloring and all those everything is specific yeah we use",
    "start": "1919260",
    "end": "1926300"
  },
  {
    "text": "help to roll out all the changes",
    "start": "1926300",
    "end": "1930410"
  },
  {
    "text": "yeah one last question",
    "start": "1936950",
    "end": "1942130"
  },
  {
    "text": "yeah the question is we we were we were saying that we were running hardware",
    "start": "1949320",
    "end": "1954429"
  },
  {
    "text": "elby's in the edge as well yes so you know it is the same legacy hardware will",
    "start": "1954429",
    "end": "1960160"
  },
  {
    "text": "be we used the data center instead of growing the data center we were basically so how this all evolved was",
    "start": "1960160",
    "end": "1965860"
  },
  {
    "text": "the initial the networking team had had established these pops where you could",
    "start": "1965860",
    "end": "1971980"
  },
  {
    "text": "have your own eBay network so that you could establish on all of them and then",
    "start": "1971980",
    "end": "1977230"
  },
  {
    "text": "came the hardware Elbe journey where you would have a couple of racks and then have the hardware will be terminating",
    "start": "1977230",
    "end": "1982690"
  },
  {
    "text": "all your connection and then came the convoys joining of the purely making it",
    "start": "1982690",
    "end": "1987970"
  },
  {
    "text": "software driven and like using kubernetes and things like that okay",
    "start": "1987970",
    "end": "1996850"
  },
  {
    "text": "sure [Applause]",
    "start": "1996850",
    "end": "2003150"
  }
]