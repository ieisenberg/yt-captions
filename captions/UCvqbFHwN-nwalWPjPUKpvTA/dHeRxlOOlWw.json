[
  {
    "text": "people can definitely hear that um so uh",
    "start": "2280",
    "end": "5400"
  },
  {
    "text": "my name is John I'm CTO of stormforge I",
    "start": "5400",
    "end": "7560"
  },
  {
    "text": "work with Rafa from two talks ago uh you",
    "start": "7560",
    "end": "10120"
  },
  {
    "text": "might be able to tell from my accent I'm",
    "start": "10120",
    "end": "11920"
  },
  {
    "text": "British but I live in American I live in",
    "start": "11920",
    "end": "13880"
  },
  {
    "text": "Washington DC and first time in Latin",
    "start": "13880",
    "end": "17039"
  },
  {
    "text": "America delighted to be here it's been",
    "start": "17039",
    "end": "19000"
  },
  {
    "text": "beautiful it's been amazing um and I'm",
    "start": "19000",
    "end": "21359"
  },
  {
    "text": "here to talk about Auto scaling on",
    "start": "21359",
    "end": "24400"
  },
  {
    "text": "kubernetes so there's two main reasons",
    "start": "24400",
    "end": "27039"
  },
  {
    "text": "to a scale and well there's one reason",
    "start": "27039",
    "end": "29640"
  },
  {
    "text": "to a scale it's to have the right",
    "start": "29640",
    "end": "32000"
  },
  {
    "text": "resources at the right time and there's",
    "start": "32000",
    "end": "35040"
  },
  {
    "text": "two ways you can miss on that front you",
    "start": "35040",
    "end": "36680"
  },
  {
    "text": "could have too few resources in which",
    "start": "36680",
    "end": "39120"
  },
  {
    "text": "case you will be unreliable and that's",
    "start": "39120",
    "end": "41280"
  },
  {
    "text": "obviously terrible and then um the other",
    "start": "41280",
    "end": "44840"
  },
  {
    "text": "way you could miss is you could have too",
    "start": "44840",
    "end": "46320"
  },
  {
    "text": "many and then you barely use any of them",
    "start": "46320",
    "end": "48600"
  },
  {
    "text": "and it will be inefficient expensive um",
    "start": "48600",
    "end": "51680"
  },
  {
    "text": "which is still still better than um",
    "start": "51680",
    "end": "54199"
  },
  {
    "text": "being unreliable which is why people",
    "start": "54199",
    "end": "55800"
  },
  {
    "text": "typically just over provision everything",
    "start": "55800",
    "end": "58079"
  },
  {
    "text": "and the average efficiency of a",
    "start": "58079",
    "end": "59960"
  },
  {
    "text": "kubernetes cluster is",
    "start": "59960",
    "end": "62079"
  },
  {
    "text": "20% so there's a variety of different",
    "start": "62079",
    "end": "64799"
  },
  {
    "text": "ways to Autos scale on kubernetes and",
    "start": "64799",
    "end": "66400"
  },
  {
    "text": "it's important to use the right tools",
    "start": "66400",
    "end": "68240"
  },
  {
    "text": "for the right sort of the right problems",
    "start": "68240",
    "end": "70520"
  },
  {
    "text": "um so the first and the one people",
    "start": "70520",
    "end": "72960"
  },
  {
    "text": "typically start with is horizontal Autos",
    "start": "72960",
    "end": "74840"
  },
  {
    "text": "scaling so that's adding and removing",
    "start": "74840",
    "end": "76920"
  },
  {
    "text": "replicas for a workload as the uh usage",
    "start": "76920",
    "end": "80040"
  },
  {
    "text": "changes um and then uh related to that",
    "start": "80040",
    "end": "83640"
  },
  {
    "text": "is okay I'm adding adding and removing",
    "start": "83640",
    "end": "86200"
  },
  {
    "text": "replicas what's the size of each of",
    "start": "86200",
    "end": "88159"
  },
  {
    "text": "those replicas because there's no point",
    "start": "88159",
    "end": "89600"
  },
  {
    "text": "going up and down with the usage if each",
    "start": "89600",
    "end": "92320"
  },
  {
    "text": "of those uh replicas is only using 20%",
    "start": "92320",
    "end": "95000"
  },
  {
    "text": "of its uh resources you'll still be",
    "start": "95000",
    "end": "97439"
  },
  {
    "text": "massively over-provisioned and very",
    "start": "97439",
    "end": "99360"
  },
  {
    "text": "inefficient and horizontal and vertical",
    "start": "99360",
    "end": "101960"
  },
  {
    "text": "aut scaling not new to kubernetes been",
    "start": "101960",
    "end": "104399"
  },
  {
    "text": "around for a long time people probably",
    "start": "104399",
    "end": "105960"
  },
  {
    "text": "use them uh with UT scaling groups uh on",
    "start": "105960",
    "end": "108759"
  },
  {
    "text": "ec2 you had to pick uh what type of VM",
    "start": "108759",
    "end": "111920"
  },
  {
    "text": "you wanted to use what instance type CPU",
    "start": "111920",
    "end": "114000"
  },
  {
    "text": "heavy memory heavy and then set up the",
    "start": "114000",
    "end": "116680"
  },
  {
    "text": "UT scaling groups to go up and down",
    "start": "116680",
    "end": "119200"
  },
  {
    "text": "kubernetes because what you're planning",
    "start": "119200",
    "end": "120840"
  },
  {
    "text": "to do is run a whole bunch of pods on",
    "start": "120840",
    "end": "122960"
  },
  {
    "text": "the nodes and share resources between",
    "start": "122960",
    "end": "125320"
  },
  {
    "text": "them introduces another dimension um and",
    "start": "125320",
    "end": "128599"
  },
  {
    "text": "that's cluster order scaling so as",
    "start": "128599",
    "end": "130440"
  },
  {
    "text": "you're adding replicas uh via the HPA",
    "start": "130440",
    "end": "133480"
  },
  {
    "text": "eventually the nodes will run out of",
    "start": "133480",
    "end": "134879"
  },
  {
    "text": "space you need to add new nodes and",
    "start": "134879",
    "end": "137160"
  },
  {
    "text": "that's where the cluster order scaling",
    "start": "137160",
    "end": "138480"
  },
  {
    "text": "comes in and then again the reverse on",
    "start": "138480",
    "end": "140000"
  },
  {
    "text": "the way down you remove uh you remove a",
    "start": "140000",
    "end": "143200"
  },
  {
    "text": "whole bunch of replicas you end up with",
    "start": "143200",
    "end": "145000"
  },
  {
    "text": "a fragmented cluster you want to",
    "start": "145000",
    "end": "146440"
  },
  {
    "text": "consolidate that and eliminate a lot of",
    "start": "146440",
    "end": "148480"
  },
  {
    "text": "the waste",
    "start": "148480",
    "end": "150319"
  },
  {
    "text": "so that's the sort of General framework",
    "start": "150319",
    "end": "152120"
  },
  {
    "text": "sorry I'm just going to move this",
    "start": "152120",
    "end": "153280"
  },
  {
    "text": "slightly that's the general framework",
    "start": "153280",
    "end": "155280"
  },
  {
    "text": "and then for each of those Dimensions",
    "start": "155280",
    "end": "157319"
  },
  {
    "text": "there's a variety of tools um and the",
    "start": "157319",
    "end": "159640"
  },
  {
    "text": "general theme is there was sort of uh",
    "start": "159640",
    "end": "161800"
  },
  {
    "text": "tools built into the there's been sort",
    "start": "161800",
    "end": "163879"
  },
  {
    "text": "of tools uh for each of these Dimensions",
    "start": "163879",
    "end": "166400"
  },
  {
    "text": "built into kubernetes since pretty much",
    "start": "166400",
    "end": "168200"
  },
  {
    "text": "the very beginning and then over the",
    "start": "168200",
    "end": "170519"
  },
  {
    "text": "last few years there's been more",
    "start": "170519",
    "end": "172000"
  },
  {
    "text": "advanced tools which come out um to",
    "start": "172000",
    "end": "174319"
  },
  {
    "text": "solve more advanced use",
    "start": "174319",
    "end": "177120"
  },
  {
    "text": "cases right so let's start with",
    "start": "177120",
    "end": "179239"
  },
  {
    "text": "horizontal Auto scaling and then um how",
    "start": "179239",
    "end": "183120"
  },
  {
    "text": "many people here have used the HPA or",
    "start": "183120",
    "end": "184959"
  },
  {
    "text": "done horizontal Auto scaling on",
    "start": "184959",
    "end": "187239"
  },
  {
    "text": "kubernetes oh a few uh so how the HPA",
    "start": "187239",
    "end": "192680"
  },
  {
    "text": "Works um is first it's constantly",
    "start": "192680",
    "end": "195879"
  },
  {
    "text": "watching the metric server which is the",
    "start": "195879",
    "end": "198000"
  },
  {
    "text": "monitoring pipeline which is tracking",
    "start": "198000",
    "end": "199560"
  },
  {
    "text": "things like CPU memory usage and CPU",
    "start": "199560",
    "end": "202200"
  },
  {
    "text": "memory requests for all of the parts",
    "start": "202200",
    "end": "204080"
  },
  {
    "text": "nodes in the cluster so it's constantly",
    "start": "204080",
    "end": "206360"
  },
  {
    "text": "checking the metric server and then it",
    "start": "206360",
    "end": "208640"
  },
  {
    "text": "will update the replic account for",
    "start": "208640",
    "end": "210400"
  },
  {
    "text": "whatever object it's managing um it",
    "start": "210400",
    "end": "212920"
  },
  {
    "text": "obviously it works with all of the",
    "start": "212920",
    "end": "214480"
  },
  {
    "text": "built-in types like stateful sets",
    "start": "214480",
    "end": "217519"
  },
  {
    "text": "deployment uh it works with Aro rollouts",
    "start": "217519",
    "end": "220280"
  },
  {
    "text": "and then if you build your own custom",
    "start": "220280",
    "end": "221840"
  },
  {
    "text": "resources like they were discussing in",
    "start": "221840",
    "end": "223400"
  },
  {
    "text": "the previous talk you can also Implement",
    "start": "223400",
    "end": "225400"
  },
  {
    "text": "something called the scale sub resource",
    "start": "225400",
    "end": "227400"
  },
  {
    "text": "and then you can have the HPA manage any",
    "start": "227400",
    "end": "229360"
  },
  {
    "text": "of your own custom",
    "start": "229360",
    "end": "231079"
  },
  {
    "text": "types and then it will update the",
    "start": "231079",
    "end": "233120"
  },
  {
    "text": "replica's the replica count or the the",
    "start": "233120",
    "end": "235480"
  },
  {
    "text": "replicas in the spec for whatever object",
    "start": "235480",
    "end": "237799"
  },
  {
    "text": "it's managing and then that object is",
    "start": "237799",
    "end": "239360"
  },
  {
    "text": "actually responsible for rolling out the",
    "start": "239360",
    "end": "241840"
  },
  {
    "text": "new pods or removing the new",
    "start": "241840",
    "end": "244280"
  },
  {
    "text": "pods so that's at works from sort of an",
    "start": "244280",
    "end": "246799"
  },
  {
    "text": "implementation point of view but then",
    "start": "246799",
    "end": "248480"
  },
  {
    "text": "the key question is how does it decide",
    "start": "248480",
    "end": "250720"
  },
  {
    "text": "what is the right number of replicas to",
    "start": "250720",
    "end": "253480"
  },
  {
    "text": "have and oh there's been a few",
    "start": "253480",
    "end": "257160"
  },
  {
    "text": "iterations here so the very first",
    "start": "257160",
    "end": "259239"
  },
  {
    "text": "version of the HPA on kubernetes um the",
    "start": "259239",
    "end": "262320"
  },
  {
    "text": "only thing you could scale on was CPU",
    "start": "262320",
    "end": "264280"
  },
  {
    "text": "utilization if you wanted to scale on",
    "start": "264280",
    "end": "266280"
  },
  {
    "text": "memory or anything else add ack um and",
    "start": "266280",
    "end": "271120"
  },
  {
    "text": "the way it worked is as shown on the",
    "start": "271120",
    "end": "272759"
  },
  {
    "text": "screen so this is showing uh a pod or a",
    "start": "272759",
    "end": "275800"
  },
  {
    "text": "workload with a specific set of requests",
    "start": "275800",
    "end": "278120"
  },
  {
    "text": "showing the usage for each of the pods",
    "start": "278120",
    "end": "280000"
  },
  {
    "text": "each of the replicas in that workload",
    "start": "280000",
    "end": "282320"
  },
  {
    "text": "and then a Target utilization and then",
    "start": "282320",
    "end": "284479"
  },
  {
    "text": "the idea is that once you get above the",
    "start": "284479",
    "end": "286199"
  },
  {
    "text": "target utilization you want to add more",
    "start": "286199",
    "end": "288960"
  },
  {
    "text": "replicas share the load with the new",
    "start": "288960",
    "end": "290840"
  },
  {
    "text": "replica the utilization should come down",
    "start": "290840",
    "end": "292880"
  },
  {
    "text": "and it should just um and that's how the",
    "start": "292880",
    "end": "296120"
  },
  {
    "text": "calculation Works what it does is it",
    "start": "296120",
    "end": "297880"
  },
  {
    "text": "takes the current utilization divides it",
    "start": "297880",
    "end": "300120"
  },
  {
    "text": "by the Target and then will'll change",
    "start": "300120",
    "end": "303280"
  },
  {
    "text": "the replicas by that amount so if you",
    "start": "303280",
    "end": "306080"
  },
  {
    "text": "are if your utilization is two times too",
    "start": "306080",
    "end": "308919"
  },
  {
    "text": "much you will start twice the replicas",
    "start": "308919",
    "end": "311600"
  },
  {
    "text": "and if you share uh the load evenly you",
    "start": "311600",
    "end": "313800"
  },
  {
    "text": "should come down as seen here so that",
    "start": "313800",
    "end": "315840"
  },
  {
    "text": "the average utilization is equal to the",
    "start": "315840",
    "end": "318080"
  },
  {
    "text": "Target",
    "start": "318080",
    "end": "319560"
  },
  {
    "text": "utilization so makes sense works very",
    "start": "319560",
    "end": "322479"
  },
  {
    "text": "similar to how the Autos scaling groups",
    "start": "322479",
    "end": "323919"
  },
  {
    "text": "are on AWS worked for VMS um however has",
    "start": "323919",
    "end": "327479"
  },
  {
    "text": "a whole bunch of limitations and the",
    "start": "327479",
    "end": "329160"
  },
  {
    "text": "biggest ISS is that often CPU",
    "start": "329160",
    "end": "331319"
  },
  {
    "text": "utilization is not a good metric to",
    "start": "331319",
    "end": "334039"
  },
  {
    "text": "scale on and what that leads to is",
    "start": "334039",
    "end": "337080"
  },
  {
    "text": "replicas either not being added when",
    "start": "337080",
    "end": "338639"
  },
  {
    "text": "they're needed or replicas being removed",
    "start": "338639",
    "end": "341039"
  },
  {
    "text": "when they are needed or just general",
    "start": "341039",
    "end": "342560"
  },
  {
    "text": "thrashing um and you can see that here",
    "start": "342560",
    "end": "345759"
  },
  {
    "text": "so this is um there's a link at the",
    "start": "345759",
    "end": "347919"
  },
  {
    "text": "bottom and I'll share the slides uh this",
    "start": "347919",
    "end": "350240"
  },
  {
    "text": "is from a the link is to a coupon talk",
    "start": "350240",
    "end": "353240"
  },
  {
    "text": "uh from two three years ago uh from a",
    "start": "353240",
    "end": "356720"
  },
  {
    "text": "customer of ours Aria who runs a large",
    "start": "356720",
    "end": "358800"
  },
  {
    "text": "hosting platform and they were scaling",
    "start": "358800",
    "end": "361000"
  },
  {
    "text": "their workloads on CP utilization and",
    "start": "361000",
    "end": "363319"
  },
  {
    "text": "they were having lots of issues with",
    "start": "363319",
    "end": "365039"
  },
  {
    "text": "thrashing so they decided they were",
    "start": "365039",
    "end": "366880"
  },
  {
    "text": "going to migrate they were going to",
    "start": "366880",
    "end": "367919"
  },
  {
    "text": "scale on a different metric um and uh",
    "start": "367919",
    "end": "371479"
  },
  {
    "text": "which was basically the number of",
    "start": "371479",
    "end": "373199"
  },
  {
    "text": "requests currently being processed by",
    "start": "373199",
    "end": "374840"
  },
  {
    "text": "each replica once that hit 50% of the",
    "start": "374840",
    "end": "377840"
  },
  {
    "text": "amount a single replica could handle",
    "start": "377840",
    "end": "379919"
  },
  {
    "text": "they would add new",
    "start": "379919",
    "end": "381120"
  },
  {
    "text": "replicas and it doesn't take a genius to",
    "start": "381120",
    "end": "384160"
  },
  {
    "text": "guess where they cut over it's right",
    "start": "384160",
    "end": "386360"
  },
  {
    "text": "here at half five um so you can see what",
    "start": "386360",
    "end": "389240"
  },
  {
    "text": "happened it went from being extremely",
    "start": "389240",
    "end": "391120"
  },
  {
    "text": "erratic and if you look at the average",
    "start": "391120",
    "end": "393080"
  },
  {
    "text": "replica count here it was very very",
    "start": "393080",
    "end": "394960"
  },
  {
    "text": "expensive to run this they cut over you",
    "start": "394960",
    "end": "397199"
  },
  {
    "text": "can still see that they scale um but",
    "start": "397199",
    "end": "400960"
  },
  {
    "text": "it's in a much more controll fashion so",
    "start": "400960",
    "end": "403000"
  },
  {
    "text": "it's probably five times cheaper and",
    "start": "403000",
    "end": "406360"
  },
  {
    "text": "much more reliable because it's not just",
    "start": "406360",
    "end": "408160"
  },
  {
    "text": "thrashing constantly so often scaling on",
    "start": "408160",
    "end": "410639"
  },
  {
    "text": "a custom metric is going to be much much",
    "start": "410639",
    "end": "412919"
  },
  {
    "text": "more",
    "start": "412919",
    "end": "414080"
  },
  {
    "text": "effective and with V2 of the HPA it went",
    "start": "414080",
    "end": "417319"
  },
  {
    "text": "from being one option of CPU utilization",
    "start": "417319",
    "end": "419879"
  },
  {
    "text": "to literally every possible option so",
    "start": "419879",
    "end": "422039"
  },
  {
    "text": "you can scale on custom and external",
    "start": "422039",
    "end": "424160"
  },
  {
    "text": "metrics you can scale on multiple",
    "start": "424160",
    "end": "426240"
  },
  {
    "text": "metrics so you could scale on the Q",
    "start": "426240",
    "end": "428759"
  },
  {
    "text": "depth if you were running a task q and",
    "start": "428759",
    "end": "431360"
  },
  {
    "text": "then you could have a second metric with",
    "start": "431360",
    "end": "432960"
  },
  {
    "text": "CPU utilization and set the target",
    "start": "432960",
    "end": "435319"
  },
  {
    "text": "utilization very high so if the load on",
    "start": "435319",
    "end": "437039"
  },
  {
    "text": "a replica spiked you would basically",
    "start": "437039",
    "end": "439160"
  },
  {
    "text": "have it like a release valve and start a",
    "start": "439160",
    "end": "441199"
  },
  {
    "text": "new",
    "start": "441199",
    "end": "442319"
  },
  {
    "text": "replica uh you have much more uh sort of",
    "start": "442319",
    "end": "445840"
  },
  {
    "text": "ability to configure policies scaling up",
    "start": "445840",
    "end": "447960"
  },
  {
    "text": "and down for example don't add more than",
    "start": "447960",
    "end": "450039"
  },
  {
    "text": "two Pods at a time on the way up wait",
    "start": "450039",
    "end": "452080"
  },
  {
    "text": "for at least 5 minutes before removing a",
    "start": "452080",
    "end": "453919"
  },
  {
    "text": "pod and then wait another 5 minutes on",
    "start": "453919",
    "end": "455440"
  },
  {
    "text": "the way down huge amounts of uh",
    "start": "455440",
    "end": "457800"
  },
  {
    "text": "flexibility as with of as is often the",
    "start": "457800",
    "end": "460400"
  },
  {
    "text": "case with kubernetes um the flexibility",
    "start": "460400",
    "end": "463960"
  },
  {
    "text": "is great you can do every anything",
    "start": "463960",
    "end": "466440"
  },
  {
    "text": "however doing anything is a nightmare",
    "start": "466440",
    "end": "467879"
  },
  {
    "text": "because it's so",
    "start": "467879",
    "end": "470000"
  },
  {
    "text": "complicated um and then that's where",
    "start": "470000",
    "end": "472680"
  },
  {
    "text": "kada comes in uh how many people have",
    "start": "472680",
    "end": "474759"
  },
  {
    "text": "heard of",
    "start": "474759",
    "end": "477159"
  },
  {
    "text": "kada so the idea of kada is to um take",
    "start": "477240",
    "end": "481919"
  },
  {
    "text": "all of that flexibility in the sort of",
    "start": "481919",
    "end": "484240"
  },
  {
    "text": "second version of the HPA and provide a",
    "start": "484240",
    "end": "486599"
  },
  {
    "text": "much more userfriendly",
    "start": "486599",
    "end": "487960"
  },
  {
    "text": "interface so what it comes with is it",
    "start": "487960",
    "end": "490199"
  },
  {
    "text": "comes with a catalog of 50 plus uh",
    "start": "490199",
    "end": "493240"
  },
  {
    "text": "built-in scalers um so things like uh",
    "start": "493240",
    "end": "497240"
  },
  {
    "text": "Amazon sqs Kafka rabbit mq they have a",
    "start": "497240",
    "end": "500919"
  },
  {
    "text": "bunch of basically pre-integrated uh",
    "start": "500919",
    "end": "503639"
  },
  {
    "text": "scaling Solutions um one of the big",
    "start": "503639",
    "end": "506800"
  },
  {
    "text": "things when you're scaling on custom",
    "start": "506800",
    "end": "508400"
  },
  {
    "text": "metrics is authentic because often you",
    "start": "508400",
    "end": "510400"
  },
  {
    "text": "need to pull uh metrics from different",
    "start": "510400",
    "end": "512320"
  },
  {
    "text": "platforms so you might need AWS",
    "start": "512320",
    "end": "514479"
  },
  {
    "text": "credentials data dog Keys Etc they",
    "start": "514479",
    "end": "516839"
  },
  {
    "text": "provide built-in options for that it",
    "start": "516839",
    "end": "519320"
  },
  {
    "text": "provides the ability to scale to zero um",
    "start": "519320",
    "end": "522320"
  },
  {
    "text": "which can be fantastic for certain",
    "start": "522320",
    "end": "523959"
  },
  {
    "text": "architectures or Dev workloads Etc um",
    "start": "523959",
    "end": "526839"
  },
  {
    "text": "often the load can go to basically zero",
    "start": "526839",
    "end": "529360"
  },
  {
    "text": "but you're still left with one or two",
    "start": "529360",
    "end": "530760"
  },
  {
    "text": "replicas and they just sit there eating",
    "start": "530760",
    "end": "533279"
  },
  {
    "text": "resources for no reason so kada has the",
    "start": "533279",
    "end": "535519"
  },
  {
    "text": "ability to scale to zero we actually use",
    "start": "535519",
    "end": "537320"
  },
  {
    "text": "this at storm Forge we have a task Q",
    "start": "537320",
    "end": "539880"
  },
  {
    "text": "which does a bunch of machine learning",
    "start": "539880",
    "end": "541079"
  },
  {
    "text": "tasks when the queue is empty the",
    "start": "541079",
    "end": "543040"
  },
  {
    "text": "workers go to zero and we're not paying",
    "start": "543040",
    "end": "544920"
  },
  {
    "text": "for the expensive machine learning",
    "start": "544920",
    "end": "547640"
  },
  {
    "text": "resources and then it's extensible so if",
    "start": "547640",
    "end": "550200"
  },
  {
    "text": "you commit to kada you still have all",
    "start": "550200",
    "end": "551839"
  },
  {
    "text": "the flexibility you can uh create your",
    "start": "551839",
    "end": "554760"
  },
  {
    "text": "own Scala you can still do whatever you",
    "start": "554760",
    "end": "556839"
  },
  {
    "text": "like and you can see on the left here",
    "start": "556839",
    "end": "559440"
  },
  {
    "text": "the architecture um so ker is putting in",
    "start": "559440",
    "end": "562519"
  },
  {
    "text": "place um controllers and metrics",
    "start": "562519",
    "end": "564920"
  },
  {
    "text": "adapters which will um pull metrics from",
    "start": "564920",
    "end": "568399"
  },
  {
    "text": "outside the cluster and get them into",
    "start": "568399",
    "end": "569880"
  },
  {
    "text": "the kubernetes monitoring Pipeline and",
    "start": "569880",
    "end": "572200"
  },
  {
    "text": "then what it does is under the hood it",
    "start": "572200",
    "end": "573920"
  },
  {
    "text": "creates a HPA which is configured to",
    "start": "573920",
    "end": "575760"
  },
  {
    "text": "work with those metrics and the HPA",
    "start": "575760",
    "end": "578600"
  },
  {
    "text": "handle scaling from one to n anything",
    "start": "578600",
    "end": "581160"
  },
  {
    "text": "greater than zero and then when you need",
    "start": "581160",
    "end": "583079"
  },
  {
    "text": "to scale to zero kada will override it",
    "start": "583079",
    "end": "585640"
  },
  {
    "text": "and set the replicas to zero",
    "start": "585640",
    "end": "588360"
  },
  {
    "text": "directly so I'm going to do a demo um",
    "start": "588360",
    "end": "591519"
  },
  {
    "text": "it's the first time I've done this demo",
    "start": "591519",
    "end": "592880"
  },
  {
    "text": "so hopefully it goes well I'm going to",
    "start": "592880",
    "end": "594720"
  },
  {
    "text": "show what it would take to do what kada",
    "start": "594720",
    "end": "596519"
  },
  {
    "text": "does for you on your own and I'm going",
    "start": "596519",
    "end": "598560"
  },
  {
    "text": "to make it look very easy but it took me",
    "start": "598560",
    "end": "600560"
  },
  {
    "text": "S hours yesterday to get right and it",
    "start": "600560",
    "end": "602279"
  },
  {
    "text": "was an absolute",
    "start": "602279",
    "end": "605160"
  },
  {
    "text": "nightmare so um let me make this a",
    "start": "605519",
    "end": "608640"
  },
  {
    "text": "little",
    "start": "608640",
    "end": "610880"
  },
  {
    "text": "bigger uh the use case here is going to",
    "start": "615279",
    "end": "617720"
  },
  {
    "text": "be I stole it there's a great example",
    "start": "617720",
    "end": "619800"
  },
  {
    "text": "out from kada it's going to be um a",
    "start": "619800",
    "end": "622480"
  },
  {
    "text": "rabbit mqq where there's a job which has",
    "start": "622480",
    "end": "625160"
  },
  {
    "text": "tasks to the queue and then a consumer",
    "start": "625160",
    "end": "627000"
  },
  {
    "text": "which Picks Them Up and does nothing it",
    "start": "627000",
    "end": "628480"
  },
  {
    "text": "just sleeps",
    "start": "628480",
    "end": "630480"
  },
  {
    "text": "and um let's see so",
    "start": "630480",
    "end": "635880"
  },
  {
    "text": "first I'm going to install",
    "start": "635880",
    "end": "639440"
  },
  {
    "text": "Prometheus so um Prometheus is going to",
    "start": "639440",
    "end": "643480"
  },
  {
    "text": "store all of the metrics uh um required",
    "start": "643480",
    "end": "647760"
  },
  {
    "text": "to basically monitor the length of the",
    "start": "647760",
    "end": "649360"
  },
  {
    "text": "queue Etc if you were scaling on CP",
    "start": "649360",
    "end": "651920"
  },
  {
    "text": "utilization there would not be no need",
    "start": "651920",
    "end": "653600"
  },
  {
    "text": "to install Prometheus um because",
    "start": "653600",
    "end": "656360"
  },
  {
    "text": "kubernetes panles the whole monitoring",
    "start": "656360",
    "end": "658079"
  },
  {
    "text": "pipeline for resource U ation",
    "start": "658079",
    "end": "661680"
  },
  {
    "text": "metrics let's give this a",
    "start": "662120",
    "end": "665920"
  },
  {
    "text": "second come",
    "start": "673040",
    "end": "676240"
  },
  {
    "text": "on normally this is the slowest part of",
    "start": "682560",
    "end": "684920"
  },
  {
    "text": "the demo so hopefully this is uh not a",
    "start": "684920",
    "end": "687120"
  },
  {
    "text": "bad omen",
    "start": "687120",
    "end": "690279"
  },
  {
    "text": "there we go perfect all so we have",
    "start": "690279",
    "end": "692920"
  },
  {
    "text": "Prometheus",
    "start": "692920",
    "end": "694720"
  },
  {
    "text": "installed uh it's in the monitoring name",
    "start": "694720",
    "end": "698959"
  },
  {
    "text": "space and you can see installed all of",
    "start": "700440",
    "end": "703120"
  },
  {
    "text": "the usual things there's the Prometheus",
    "start": "703120",
    "end": "704560"
  },
  {
    "text": "operator grafana Prometheus itself the",
    "start": "704560",
    "end": "706560"
  },
  {
    "text": "node exporter we don't need all this I",
    "start": "706560",
    "end": "708560"
  },
  {
    "text": "just didn't want to mess with all the",
    "start": "708560",
    "end": "709880"
  },
  {
    "text": "configuration so next rabbit mq and then",
    "start": "709880",
    "end": "713279"
  },
  {
    "text": "we're going to use the helm chart this",
    "start": "713279",
    "end": "714600"
  },
  {
    "text": "is the first thing which took a bunch of",
    "start": "714600",
    "end": "716160"
  },
  {
    "text": "time to try and figure out getting all",
    "start": "716160",
    "end": "717959"
  },
  {
    "text": "of the metrics exposed",
    "start": "717959",
    "end": "720079"
  },
  {
    "text": "um and the service monitor set up so",
    "start": "720079",
    "end": "722560"
  },
  {
    "text": "that it will Prometheus will detect them",
    "start": "722560",
    "end": "725000"
  },
  {
    "text": "ingest the metrics",
    "start": "725000",
    "end": "728079"
  },
  {
    "text": "Etc and then if I can I is the is the",
    "start": "731560",
    "end": "734680"
  },
  {
    "text": "font big enough can everyone",
    "start": "734680",
    "end": "736959"
  },
  {
    "text": "see yeah bigger",
    "start": "736959",
    "end": "741120"
  },
  {
    "text": "bigger",
    "start": "745560",
    "end": "747079"
  },
  {
    "text": "better all perfect",
    "start": "747079",
    "end": "751160"
  },
  {
    "text": "and then if we go back",
    "start": "756240",
    "end": "760160"
  },
  {
    "text": "there we",
    "start": "779440",
    "end": "781800"
  },
  {
    "text": "go all right perfect so we can see the",
    "start": "784320",
    "end": "788040"
  },
  {
    "text": "um it's being scraped and as expected",
    "start": "788040",
    "end": "790399"
  },
  {
    "text": "there's zero cues in the there's zero",
    "start": "790399",
    "end": "792000"
  },
  {
    "text": "messages in the que so now let's start",
    "start": "792000",
    "end": "794959"
  },
  {
    "text": "um adding messages to the queue scaling",
    "start": "794959",
    "end": "796959"
  },
  {
    "text": "it up and see if it scales and the first",
    "start": "796959",
    "end": "800560"
  },
  {
    "text": "um so first we're going to",
    "start": "800560",
    "end": "803560"
  },
  {
    "text": "deploy the",
    "start": "803560",
    "end": "806800"
  },
  {
    "text": "consumer and and then I have",
    "start": "807959",
    "end": "811639"
  },
  {
    "text": "um I have a horizontal part order scaler",
    "start": "811639",
    "end": "814480"
  },
  {
    "text": "which is set to scale on CPU so this is",
    "start": "814480",
    "end": "816639"
  },
  {
    "text": "the one that everyone starts with the",
    "start": "816639",
    "end": "818440"
  },
  {
    "text": "only thing available in V1 and it's set",
    "start": "818440",
    "end": "821199"
  },
  {
    "text": "to scale up at",
    "start": "821199",
    "end": "824079"
  },
  {
    "text": "60% so we create that and then we can",
    "start": "826839",
    "end": "832959"
  },
  {
    "text": "um uh this is a job which will add a lot",
    "start": "835120",
    "end": "838000"
  },
  {
    "text": "of tasks to the",
    "start": "838000",
    "end": "840600"
  },
  {
    "text": "so if we go back um we can",
    "start": "840600",
    "end": "845199"
  },
  {
    "text": "see the",
    "start": "845199",
    "end": "848360"
  },
  {
    "text": "HPA and",
    "start": "849120",
    "end": "853120"
  },
  {
    "text": "um I think it's waiting for the pods to",
    "start": "859320",
    "end": "861600"
  },
  {
    "text": "come",
    "start": "861600",
    "end": "863800"
  },
  {
    "text": "up there we go so you can see that the",
    "start": "866160",
    "end": "869120"
  },
  {
    "text": "actual CPU utilization because the task",
    "start": "869120",
    "end": "870959"
  },
  {
    "text": "just sleeps when it picks it up this",
    "start": "870959",
    "end": "873480"
  },
  {
    "text": "would be like something which makes a",
    "start": "873480",
    "end": "874800"
  },
  {
    "text": "network call and just Waits you may be",
    "start": "874800",
    "end": "877079"
  },
  {
    "text": "trying to do a lot of those but because",
    "start": "877079",
    "end": "878839"
  },
  {
    "text": "it produces no utilization it's a",
    "start": "878839",
    "end": "880440"
  },
  {
    "text": "terrible metric to scale on and if we go",
    "start": "880440",
    "end": "883000"
  },
  {
    "text": "back here you should see a big spike in",
    "start": "883000",
    "end": "885639"
  },
  {
    "text": "the SK in the queue and it's coming down",
    "start": "885639",
    "end": "888199"
  },
  {
    "text": "very slowly um so obviously CP",
    "start": "888199",
    "end": "890399"
  },
  {
    "text": "utilization here makes no sense to scale",
    "start": "890399",
    "end": "892560"
  },
  {
    "text": "on however um uh what would make much",
    "start": "892560",
    "end": "896440"
  },
  {
    "text": "more sense is the Q depth so now let's",
    "start": "896440",
    "end": "898759"
  },
  {
    "text": "see if we can um while it's pulling",
    "start": "898759",
    "end": "901399"
  },
  {
    "text": "through those what it looks like to uh",
    "start": "901399",
    "end": "904519"
  },
  {
    "text": "scale on the Q depth so the first thing",
    "start": "904519",
    "end": "906800"
  },
  {
    "text": "you have to do we have Prometheus stood",
    "start": "906800",
    "end": "908920"
  },
  {
    "text": "up it's pulling all of the metrics um",
    "start": "908920",
    "end": "911639"
  },
  {
    "text": "scraping them we need to find a way to",
    "start": "911639",
    "end": "913800"
  },
  {
    "text": "get those out of Prometheus and into the",
    "start": "913800",
    "end": "916959"
  },
  {
    "text": "kubernetes API so they can be used and",
    "start": "916959",
    "end": "919199"
  },
  {
    "text": "the way that's done is using this thing",
    "start": "919199",
    "end": "920959"
  },
  {
    "text": "called a Prometheus",
    "start": "920959",
    "end": "922440"
  },
  {
    "text": "adapter",
    "start": "922440",
    "end": "924199"
  },
  {
    "text": "and you can see here um you have to tell",
    "start": "924199",
    "end": "927000"
  },
  {
    "text": "it what the URL for Prometheus is and",
    "start": "927000",
    "end": "929160"
  },
  {
    "text": "then there is this rules format which",
    "start": "929160",
    "end": "931839"
  },
  {
    "text": "took me forever to figure out and I",
    "start": "931839",
    "end": "934720"
  },
  {
    "text": "basically never did I just managed to",
    "start": "934720",
    "end": "936519"
  },
  {
    "text": "hardcode the metric names what this is",
    "start": "936519",
    "end": "938560"
  },
  {
    "text": "doing is trying to provide that",
    "start": "938560",
    "end": "939759"
  },
  {
    "text": "translation from how the metrics in the",
    "start": "939759",
    "end": "942480"
  },
  {
    "text": "other platform so in this case",
    "start": "942480",
    "end": "944240"
  },
  {
    "text": "Prometheus it could be data dog are",
    "start": "944240",
    "end": "946079"
  },
  {
    "text": "being labeled how they are associated",
    "start": "946079",
    "end": "948240"
  },
  {
    "text": "with pods namespaces and rewrite the",
    "start": "948240",
    "end": "950160"
  },
  {
    "text": "whole thing and then say which one",
    "start": "950160",
    "end": "952240"
  },
  {
    "text": "should be regularly scraped and sent to",
    "start": "952240",
    "end": "954680"
  },
  {
    "text": "the custom metrics",
    "start": "954680",
    "end": "958160"
  },
  {
    "text": "okay so we're going to install that and",
    "start": "960880",
    "end": "963880"
  },
  {
    "text": "then um that should provide the plumbing",
    "start": "963880",
    "end": "967319"
  },
  {
    "text": "so that it's going to pull the QEP from",
    "start": "967319",
    "end": "969800"
  },
  {
    "text": "Prometheus which we just saw in the",
    "start": "969800",
    "end": "971279"
  },
  {
    "text": "dashboard it's going to put it into the",
    "start": "971279",
    "end": "973079"
  },
  {
    "text": "custom metric API um they have this",
    "start": "973079",
    "end": "977040"
  },
  {
    "text": "sheet which I love uh cctl get-- raw it",
    "start": "977040",
    "end": "981480"
  },
  {
    "text": "lets you send requests directly from",
    "start": "981480",
    "end": "983680"
  },
  {
    "text": "cctl like HTTP request to the API so you",
    "start": "983680",
    "end": "987040"
  },
  {
    "text": "can debug um and you you can see here uh",
    "start": "987040",
    "end": "990079"
  },
  {
    "text": "it's trying to go to the custom metric",
    "start": "990079",
    "end": "991720"
  },
  {
    "text": "API and see what is available and while",
    "start": "991720",
    "end": "995040"
  },
  {
    "text": "the metric server is or while the preus",
    "start": "995040",
    "end": "997160"
  },
  {
    "text": "adapter is coming up it doesn't return",
    "start": "997160",
    "end": "998839"
  },
  {
    "text": "anything but if we give it a",
    "start": "998839",
    "end": "1002600"
  },
  {
    "text": "second as expected uh our Q messages",
    "start": "1003920",
    "end": "1007440"
  },
  {
    "text": "depth is there um and this was another",
    "start": "1007440",
    "end": "1010319"
  },
  {
    "text": "thing which took me forever to get right",
    "start": "1010319",
    "end": "1012480"
  },
  {
    "text": "uh the initial version the out of the",
    "start": "1012480",
    "end": "1014240"
  },
  {
    "text": "box version of the Prometheus adapter",
    "start": "1014240",
    "end": "1016160"
  },
  {
    "text": "the load of the metric was too high for",
    "start": "1016160",
    "end": "1017839"
  },
  {
    "text": "the API server so just rejected",
    "start": "1017839",
    "end": "1019519"
  },
  {
    "text": "everything so I had to rewrite it to",
    "start": "1019519",
    "end": "1021160"
  },
  {
    "text": "like make it a little bit uh smoother",
    "start": "1021160",
    "end": "1024678"
  },
  {
    "text": "um and then",
    "start": "1024679",
    "end": "1027798"
  },
  {
    "text": "um let's",
    "start": "1027799",
    "end": "1031120"
  },
  {
    "text": "see so we'll delete the old HPA and then",
    "start": "1031280",
    "end": "1035038"
  },
  {
    "text": "now we can see so we've plumbed all of",
    "start": "1035039",
    "end": "1037319"
  },
  {
    "text": "the metrics are in the API and then you",
    "start": "1037319",
    "end": "1039520"
  },
  {
    "text": "go in and you create a uh HPA with a",
    "start": "1039520",
    "end": "1044000"
  },
  {
    "text": "custom metric and here you can see the",
    "start": "1044000",
    "end": "1045678"
  },
  {
    "text": "type of the metric is object so the",
    "start": "1045679",
    "end": "1047720"
  },
  {
    "text": "reason it's object is because I'm",
    "start": "1047720",
    "end": "1049240"
  },
  {
    "text": "scaling one workload on metrics from",
    "start": "1049240",
    "end": "1051919"
  },
  {
    "text": "another workload so the consumer",
    "start": "1051919",
    "end": "1054280"
  },
  {
    "text": "workload the deployment is being scaled",
    "start": "1054280",
    "end": "1056640"
  },
  {
    "text": "on metrics coming from the rabbit mq",
    "start": "1056640",
    "end": "1058520"
  },
  {
    "text": "state for set because that's where the Q",
    "start": "1058520",
    "end": "1060320"
  },
  {
    "text": "depth um is being tracked so as I said",
    "start": "1060320",
    "end": "1063440"
  },
  {
    "text": "before super flexible it just took a",
    "start": "1063440",
    "end": "1066120"
  },
  {
    "text": "long time to get",
    "start": "1066120",
    "end": "1068120"
  },
  {
    "text": "right and then if we apply",
    "start": "1068120",
    "end": "1072679"
  },
  {
    "text": "that",
    "start": "1072679",
    "end": "1074760"
  },
  {
    "text": "um and then let's go back and look head",
    "start": "1074760",
    "end": "1077159"
  },
  {
    "text": "it finished with the Que",
    "start": "1077159",
    "end": "1079400"
  },
  {
    "text": "it almost finished with the c I suspect",
    "start": "1079400",
    "end": "1081280"
  },
  {
    "text": "what's going to happen is this is",
    "start": "1081280",
    "end": "1083240"
  },
  {
    "text": "suddenly going to start adding replicas",
    "start": "1083240",
    "end": "1085360"
  },
  {
    "text": "let's",
    "start": "1085360",
    "end": "1087640"
  },
  {
    "text": "just let's rerun the job so we can add",
    "start": "1091799",
    "end": "1094400"
  },
  {
    "text": "more",
    "start": "1094400",
    "end": "1096559"
  },
  {
    "text": "messages and now you can see that um the",
    "start": "1101960",
    "end": "1105000"
  },
  {
    "text": "HPA is going to start scaling up because",
    "start": "1105000",
    "end": "1107919"
  },
  {
    "text": "the ad Target Q depth is five per pod",
    "start": "1107919",
    "end": "1111080"
  },
  {
    "text": "it's 56 right now because we just added",
    "start": "1111080",
    "end": "1113280"
  },
  {
    "text": "way more messages to the que hopefully",
    "start": "1113280",
    "end": "1115919"
  },
  {
    "text": "the number of PODS should be going up",
    "start": "1115919",
    "end": "1118360"
  },
  {
    "text": "fairly",
    "start": "1118360",
    "end": "1120720"
  },
  {
    "text": "rapidly there we go I don't know why oh",
    "start": "1125679",
    "end": "1129039"
  },
  {
    "text": "yeah I see it I see it replicas eight on",
    "start": "1129039",
    "end": "1131159"
  },
  {
    "text": "the side so you can see as expected uh Q",
    "start": "1131159",
    "end": "1134159"
  },
  {
    "text": "depth goes up all of the plumbing works",
    "start": "1134159",
    "end": "1137480"
  },
  {
    "text": "the workload scales out",
    "start": "1137480",
    "end": "1140320"
  },
  {
    "text": "oh and yeah you can see it really",
    "start": "1140320",
    "end": "1141880"
  },
  {
    "text": "processed the queue so much faster when",
    "start": "1141880",
    "end": "1143880"
  },
  {
    "text": "there was a single replica scaling On",
    "start": "1143880",
    "end": "1145360"
  },
  {
    "text": "The Run metric it took a long time to",
    "start": "1145360",
    "end": "1146919"
  },
  {
    "text": "come down this one emptied in",
    "start": "1146919",
    "end": "1150559"
  },
  {
    "text": "seconds so yesterday that took me about",
    "start": "1150559",
    "end": "1154039"
  },
  {
    "text": "6 hours to get right um now I'll show",
    "start": "1154039",
    "end": "1157559"
  },
  {
    "text": "you what it takes to do it with",
    "start": "1157559",
    "end": "1160640"
  },
  {
    "text": "K so first you have to install kada",
    "start": "1165440",
    "end": "1168799"
  },
  {
    "text": "simple hel install and then the whole",
    "start": "1168799",
    "end": "1171080"
  },
  {
    "text": "point of kada is that it just comes with",
    "start": "1171080",
    "end": "1173640"
  },
  {
    "text": "all of these all of this Plumbing is",
    "start": "1173640",
    "end": "1175120"
  },
  {
    "text": "just done for you there's no adapter",
    "start": "1175120",
    "end": "1177039"
  },
  {
    "text": "there's no anything it just puts the",
    "start": "1177039",
    "end": "1178440"
  },
  {
    "text": "metric where it needs them and it's all",
    "start": "1178440",
    "end": "1180080"
  },
  {
    "text": "basically pre-integrated and then all",
    "start": "1180080",
    "end": "1182240"
  },
  {
    "text": "I'm going to have to work with is I'll",
    "start": "1182240",
    "end": "1184280"
  },
  {
    "text": "set up the authentication to the que and",
    "start": "1184280",
    "end": "1187159"
  },
  {
    "text": "I'll set up the um the they call it a",
    "start": "1187159",
    "end": "1190120"
  },
  {
    "text": "scaled object that's their wrapper for",
    "start": "1190120",
    "end": "1191799"
  },
  {
    "text": "the",
    "start": "1191799",
    "end": "1192799"
  },
  {
    "text": "HPA so if I apply this",
    "start": "1192799",
    "end": "1198039"
  },
  {
    "text": "it should create",
    "start": "1200360",
    "end": "1201960"
  },
  {
    "text": "both and as I said",
    "start": "1201960",
    "end": "1205120"
  },
  {
    "text": "before um cader is just a wrapper for",
    "start": "1205120",
    "end": "1207960"
  },
  {
    "text": "the HPA so it's still going to create a",
    "start": "1207960",
    "end": "1209760"
  },
  {
    "text": "HPA under the hood which does the actual",
    "start": "1209760",
    "end": "1211640"
  },
  {
    "text": "scaling it's just handling all of the",
    "start": "1211640",
    "end": "1213679"
  },
  {
    "text": "configuration of that for you so if you",
    "start": "1213679",
    "end": "1215799"
  },
  {
    "text": "go in you can see a HPA was created you",
    "start": "1215799",
    "end": "1218679"
  },
  {
    "text": "can see the owner references it's owned",
    "start": "1218679",
    "end": "1220880"
  },
  {
    "text": "by kada that scaled object we just",
    "start": "1220880",
    "end": "1222679"
  },
  {
    "text": "created and it's created a HPA with the",
    "start": "1222679",
    "end": "1226280"
  },
  {
    "text": "an external metric the metric name the",
    "start": "1226280",
    "end": "1229200"
  },
  {
    "text": "labels are all set up so it matches Etc",
    "start": "1229200",
    "end": "1232520"
  },
  {
    "text": "and then if I",
    "start": "1232520",
    "end": "1236640"
  },
  {
    "text": "um create the job again we should see it",
    "start": "1237880",
    "end": "1241799"
  },
  {
    "text": "do it exactly what it did",
    "start": "1241799",
    "end": "1245000"
  },
  {
    "text": "before so it's going to scale",
    "start": "1249880",
    "end": "1253840"
  },
  {
    "text": "up and it should start adding more",
    "start": "1253840",
    "end": "1256520"
  },
  {
    "text": "replicas",
    "start": "1256520",
    "end": "1259520"
  },
  {
    "text": "there we go so you can see it's adding",
    "start": "1264840",
    "end": "1266400"
  },
  {
    "text": "replicas so something which took hours",
    "start": "1266400",
    "end": "1268880"
  },
  {
    "text": "yesterday a helmet stall and everything",
    "start": "1268880",
    "end": "1271600"
  },
  {
    "text": "pre-integrated out of the box I never",
    "start": "1271600",
    "end": "1273200"
  },
  {
    "text": "need to know any of the internals it",
    "start": "1273200",
    "end": "1275080"
  },
  {
    "text": "just worked it was fantastic so highly",
    "start": "1275080",
    "end": "1277559"
  },
  {
    "text": "highly recommend Kor",
    "start": "1277559",
    "end": "1280000"
  },
  {
    "text": "and CPU utilization may work to start",
    "start": "1280000",
    "end": "1282840"
  },
  {
    "text": "with but I think what you'll find is if",
    "start": "1282840",
    "end": "1284559"
  },
  {
    "text": "you keep pushing it in production it",
    "start": "1284559",
    "end": "1286480"
  },
  {
    "text": "just isn't proportional to the load and",
    "start": "1286480",
    "end": "1288600"
  },
  {
    "text": "a way which is reliable so you will",
    "start": "1288600",
    "end": "1290000"
  },
  {
    "text": "always be having the wrong number of",
    "start": "1290000",
    "end": "1291159"
  },
  {
    "text": "replicas thrashing",
    "start": "1291159",
    "end": "1294400"
  },
  {
    "text": "Etc um all right so that's horizontal",
    "start": "1294400",
    "end": "1298400"
  },
  {
    "text": "how am I doing on time little tighter on",
    "start": "1298400",
    "end": "1300760"
  },
  {
    "text": "time um so horizontal adding replicas",
    "start": "1300760",
    "end": "1304720"
  },
  {
    "text": "eventually you need to start thinking",
    "start": "1304720",
    "end": "1305960"
  },
  {
    "text": "about cluster scaling um and cluster",
    "start": "1305960",
    "end": "1308760"
  },
  {
    "text": "scaling is about okay I've added pods",
    "start": "1308760",
    "end": "1311039"
  },
  {
    "text": "eventually my nodes can no longer fit",
    "start": "1311039",
    "end": "1313080"
  },
  {
    "text": "those parts how do I add a new Noe",
    "start": "1313080",
    "end": "1315520"
  },
  {
    "text": "there's the original tool in this space",
    "start": "1315520",
    "end": "1318279"
  },
  {
    "text": "was the cluster order scaler and the way",
    "start": "1318279",
    "end": "1320600"
  },
  {
    "text": "the cluster order scaler works is it",
    "start": "1320600",
    "end": "1322679"
  },
  {
    "text": "constantly watches for pending pods pods",
    "start": "1322679",
    "end": "1324840"
  },
  {
    "text": "which are unschedulable there isn't",
    "start": "1324840",
    "end": "1326440"
  },
  {
    "text": "enough capacity and it's like okay",
    "start": "1326440",
    "end": "1328000"
  },
  {
    "text": "that's my signal to add capacity and",
    "start": "1328000",
    "end": "1330760"
  },
  {
    "text": "then it will this is all in AWS language",
    "start": "1330760",
    "end": "1333440"
  },
  {
    "text": "it will talk to the order scaling groups",
    "start": "1333440",
    "end": "1335520"
  },
  {
    "text": "which you have to configure to run in",
    "start": "1335520",
    "end": "1336960"
  },
  {
    "text": "that cluster and then one of those order",
    "start": "1336960",
    "end": "1338960"
  },
  {
    "text": "scaling groups will start up a new note",
    "start": "1338960",
    "end": "1342039"
  },
  {
    "text": "um the downsides if you want to use a",
    "start": "1342039",
    "end": "1345200"
  },
  {
    "text": "wide variety of instance types or",
    "start": "1345200",
    "end": "1347039"
  },
  {
    "text": "isolate batch jobs on one or aut scaling",
    "start": "1347039",
    "end": "1349000"
  },
  {
    "text": "group Etc the overhead can become",
    "start": "1349000",
    "end": "1351400"
  },
  {
    "text": "extremely painful because you have to",
    "start": "1351400",
    "end": "1353360"
  },
  {
    "text": "create um Autos scaling groups for all",
    "start": "1353360",
    "end": "1355240"
  },
  {
    "text": "of these and then controlling the logic",
    "start": "1355240",
    "end": "1357559"
  },
  {
    "text": "to say which part triggers which Auto",
    "start": "1357559",
    "end": "1359159"
  },
  {
    "text": "scaling group can be tricky um it can",
    "start": "1359159",
    "end": "1362000"
  },
  {
    "text": "also be slow just because there's that",
    "start": "1362000",
    "end": "1363640"
  },
  {
    "text": "extra har of autoscaling group ec2 API",
    "start": "1363640",
    "end": "1366120"
  },
  {
    "text": "and then it has to trickle",
    "start": "1366120",
    "end": "1367640"
  },
  {
    "text": "back um so that's how it's adding nodes",
    "start": "1367640",
    "end": "1371000"
  },
  {
    "text": "and then eventually the low drops you",
    "start": "1371000",
    "end": "1373360"
  },
  {
    "text": "have fragmented nodes and it has a",
    "start": "1373360",
    "end": "1376080"
  },
  {
    "text": "simple calculation you set uh scale down",
    "start": "1376080",
    "end": "1378640"
  },
  {
    "text": "threshold once the capacity on that node",
    "start": "1378640",
    "end": "1381640"
  },
  {
    "text": "or the allocated um resources on that",
    "start": "1381640",
    "end": "1384080"
  },
  {
    "text": "node drops below the threshold it'll say",
    "start": "1384080",
    "end": "1387120"
  },
  {
    "text": "okay that node is too empty I'm going to",
    "start": "1387120",
    "end": "1390840"
  },
  {
    "text": "uh get rid of it so you can see here",
    "start": "1390840",
    "end": "1392360"
  },
  {
    "text": "it'll be this one and this one and then",
    "start": "1392360",
    "end": "1394880"
  },
  {
    "text": "I'm going to reschedule those workloads",
    "start": "1394880",
    "end": "1396799"
  },
  {
    "text": "somewhere else which will reduce improve",
    "start": "1396799",
    "end": "1399559"
  },
  {
    "text": "the bin packing reduce the waste and you",
    "start": "1399559",
    "end": "1402000"
  },
  {
    "text": "have lots of flexibility to configure",
    "start": "1402000",
    "end": "1404000"
  },
  {
    "text": "the cluster order scaler you can also",
    "start": "1404000",
    "end": "1405880"
  },
  {
    "text": "hardcode labels and annotations on nodes",
    "start": "1405880",
    "end": "1407799"
  },
  {
    "text": "so that they don't get",
    "start": "1407799",
    "end": "1409279"
  },
  {
    "text": "uh consolidated um lots of",
    "start": "1409279",
    "end": "1411880"
  },
  {
    "text": "flexibility and what you can see here is",
    "start": "1411880",
    "end": "1414679"
  },
  {
    "text": "as you would expect shut down the",
    "start": "1414679",
    "end": "1416760"
  },
  {
    "text": "underutilized nodes reassign the",
    "start": "1416760",
    "end": "1418480"
  },
  {
    "text": "workloads pin packing goes up efficiency",
    "start": "1418480",
    "end": "1420440"
  },
  {
    "text": "goes up so it works and but it has a",
    "start": "1420440",
    "end": "1424320"
  },
  {
    "text": "whole bunch of drawbacks which is why",
    "start": "1424320",
    "end": "1426440"
  },
  {
    "text": "AWS released a new open source project",
    "start": "1426440",
    "end": "1429720"
  },
  {
    "text": "uh two three years ago to basically",
    "start": "1429720",
    "end": "1431799"
  },
  {
    "text": "address a lot of those problems we work",
    "start": "1431799",
    "end": "1433799"
  },
  {
    "text": "with Carpenter with our customers all",
    "start": "1433799",
    "end": "1435360"
  },
  {
    "text": "the time we use it ourselves internally",
    "start": "1435360",
    "end": "1438120"
  },
  {
    "text": "it's amazing um however I'm going to say",
    "start": "1438120",
    "end": "1441000"
  },
  {
    "text": "almost nothing about it because per is",
    "start": "1441000",
    "end": "1443039"
  },
  {
    "text": "talking about it in way more detail I",
    "start": "1443039",
    "end": "1445039"
  },
  {
    "text": "think in about half an hour in the same",
    "start": "1445039",
    "end": "1448720"
  },
  {
    "text": "room so you have um horizontal scaling",
    "start": "1452440",
    "end": "1456919"
  },
  {
    "text": "uh the HPA and kada you have cluster",
    "start": "1456919",
    "end": "1459039"
  },
  {
    "text": "scaling Carpenter is amazing fast",
    "start": "1459039",
    "end": "1462080"
  },
  {
    "text": "reliable um it can work well with spot",
    "start": "1462080",
    "end": "1465000"
  },
  {
    "text": "instances incredible an incredible tool",
    "start": "1465000",
    "end": "1468159"
  },
  {
    "text": "however both the cluster order scaler",
    "start": "1468159",
    "end": "1470000"
  },
  {
    "text": "and Carpenter are both keying off the",
    "start": "1470000",
    "end": "1471799"
  },
  {
    "text": "same signal to um spin up nodes and",
    "start": "1471799",
    "end": "1474880"
  },
  {
    "text": "remove them and that's what the size of",
    "start": "1474880",
    "end": "1476679"
  },
  {
    "text": "the actual pods are which is as Rafa",
    "start": "1476679",
    "end": "1479200"
  },
  {
    "text": "talked about earlier request and limits",
    "start": "1479200",
    "end": "1481480"
  },
  {
    "text": "how much is the workload saying each",
    "start": "1481480",
    "end": "1484679"
  },
  {
    "text": "replica needs to the kubernetes API does",
    "start": "1484679",
    "end": "1486840"
  },
  {
    "text": "it need uh one core half a core one",
    "start": "1486840",
    "end": "1490120"
  },
  {
    "text": "gigabyte 2 gigabytes Etc and if you",
    "start": "1490120",
    "end": "1492960"
  },
  {
    "text": "don't get the requests and limits right",
    "start": "1492960",
    "end": "1494880"
  },
  {
    "text": "it doesn't matter how well you solve the",
    "start": "1494880",
    "end": "1496440"
  },
  {
    "text": "other dimensions you will just be propag",
    "start": "1496440",
    "end": "1498480"
  },
  {
    "text": "ating the waste from lots and lots of",
    "start": "1498480",
    "end": "1500000"
  },
  {
    "text": "underutilized PODS throughout your",
    "start": "1500000",
    "end": "1502480"
  },
  {
    "text": "cluster and the dirty secret of",
    "start": "1502480",
    "end": "1504720"
  },
  {
    "text": "kubernetes is no one gets it right so",
    "start": "1504720",
    "end": "1506880"
  },
  {
    "text": "data dog did a survey um 20 uh 50% of",
    "start": "1506880",
    "end": "1511200"
  },
  {
    "text": "containers use 25 less than 25% of their",
    "start": "1511200",
    "end": "1514679"
  },
  {
    "text": "resources which means for every dollar",
    "start": "1514679",
    "end": "1517279"
  },
  {
    "text": "you spend in the cloud 75% is just pure",
    "start": "1517279",
    "end": "1520440"
  },
  {
    "text": "waste um and the other containers the",
    "start": "1520440",
    "end": "1524720"
  },
  {
    "text": "other half there is likely to be",
    "start": "1524720",
    "end": "1527200"
  },
  {
    "text": "underprovision",
    "start": "1527200",
    "end": "1528399"
  },
  {
    "text": "and a reliability risk as they are to be",
    "start": "1528399",
    "end": "1530520"
  },
  {
    "text": "appropriately",
    "start": "1530520",
    "end": "1532559"
  },
  {
    "text": "provisioned and you saw this slide with",
    "start": "1532559",
    "end": "1535200"
  },
  {
    "text": "Rafa the reason people end up in this",
    "start": "1535200",
    "end": "1537480"
  },
  {
    "text": "state is because there's not really a",
    "start": "1537480",
    "end": "1538840"
  },
  {
    "text": "good way to do it you have to set",
    "start": "1538840",
    "end": "1540520"
  },
  {
    "text": "requests and limits because otherwise",
    "start": "1540520",
    "end": "1542120"
  },
  {
    "text": "it's too risky you're going to go down",
    "start": "1542120",
    "end": "1544440"
  },
  {
    "text": "um if you try and set a one siiz",
    "start": "1544440",
    "end": "1546039"
  },
  {
    "text": "fits-all approach then it just doesn't",
    "start": "1546039",
    "end": "1549200"
  },
  {
    "text": "work because the diversity of workload",
    "start": "1549200",
    "end": "1550880"
  },
  {
    "text": "types Etc um this is how you end up I",
    "start": "1550880",
    "end": "1554679"
  },
  {
    "text": "was joke people will start t-shirt",
    "start": "1554679",
    "end": "1556760"
  },
  {
    "text": "sizing small medium and large then they",
    "start": "1556760",
    "end": "1558919"
  },
  {
    "text": "ask their developers what size they need",
    "start": "1558919",
    "end": "1560919"
  },
  {
    "text": "and every developer says extra large",
    "start": "1560919",
    "end": "1562760"
  },
  {
    "text": "which is how they end up with massive",
    "start": "1562760",
    "end": "1564120"
  },
  {
    "text": "over provisioning and then eventually it",
    "start": "1564120",
    "end": "1566120"
  },
  {
    "text": "becomes do wasteful um and then you try",
    "start": "1566120",
    "end": "1568640"
  },
  {
    "text": "and do it manually and you realize that",
    "start": "1568640",
    "end": "1570440"
  },
  {
    "text": "providing the tooling the education to",
    "start": "1570440",
    "end": "1572799"
  },
  {
    "text": "get developers to try and do this for",
    "start": "1572799",
    "end": "1574480"
  },
  {
    "text": "hundreds thousands of workloads it's",
    "start": "1574480",
    "end": "1576520"
  },
  {
    "text": "going to burn more engineering time and",
    "start": "1576520",
    "end": "1579120"
  },
  {
    "text": "money and frustration than it will",
    "start": "1579120",
    "end": "1581120"
  },
  {
    "text": "actually um save you in Cloud costs so",
    "start": "1581120",
    "end": "1585200"
  },
  {
    "text": "no one really has an answer to this um",
    "start": "1585200",
    "end": "1588840"
  },
  {
    "text": "which is no one has a manual answer to",
    "start": "1588840",
    "end": "1590760"
  },
  {
    "text": "this and there is a tool to automate",
    "start": "1590760",
    "end": "1593440"
  },
  {
    "text": "this problem built into kubernetes the",
    "start": "1593440",
    "end": "1595640"
  },
  {
    "text": "vertical pod order scaler the vpa um",
    "start": "1595640",
    "end": "1598600"
  },
  {
    "text": "unlike the HPA and the cluster order",
    "start": "1598600",
    "end": "1600320"
  },
  {
    "text": "scaler it's never really got a lot of",
    "start": "1600320",
    "end": "1602200"
  },
  {
    "text": "adoption um the same data dog survey",
    "start": "1602200",
    "end": "1605120"
  },
  {
    "text": "found that 60 70% of people were using",
    "start": "1605120",
    "end": "1607440"
  },
  {
    "text": "the HPA 1% of people were using the vpa",
    "start": "1607440",
    "end": "1611360"
  },
  {
    "text": "it's basically never really been",
    "start": "1611360",
    "end": "1613919"
  },
  {
    "text": "seriously used in production um and",
    "start": "1613919",
    "end": "1616919"
  },
  {
    "text": "there's a variety of reasons one is that",
    "start": "1616919",
    "end": "1619000"
  },
  {
    "text": "it has a tendency to fight the HPA",
    "start": "1619000",
    "end": "1621120"
  },
  {
    "text": "because they're both looking at CPU",
    "start": "1621120",
    "end": "1622840"
  },
  {
    "text": "utilization uh the way it rolls out",
    "start": "1622840",
    "end": "1624760"
  },
  {
    "text": "changes are a little problematic because",
    "start": "1624760",
    "end": "1627279"
  },
  {
    "text": "um it evicts the pods which can cause",
    "start": "1627279",
    "end": "1629640"
  },
  {
    "text": "disruption if you have two replicas and",
    "start": "1629640",
    "end": "1632279"
  },
  {
    "text": "you evict a pod you lose half your",
    "start": "1632279",
    "end": "1633960"
  },
  {
    "text": "capacity that what could be a terrible",
    "start": "1633960",
    "end": "1636000"
  },
  {
    "text": "time to lose it if you have one replica",
    "start": "1636000",
    "end": "1638039"
  },
  {
    "text": "you are just down until the Pod comes",
    "start": "1638039",
    "end": "1639919"
  },
  {
    "text": "back up um and it has of wide variety of",
    "start": "1639919",
    "end": "1642960"
  },
  {
    "text": "other quirks about configuration which",
    "start": "1642960",
    "end": "1644720"
  },
  {
    "text": "makes it hard Etc so the vpa isn't",
    "start": "1644720",
    "end": "1647919"
  },
  {
    "text": "really a sort of great solution um storm",
    "start": "1647919",
    "end": "1650960"
  },
  {
    "text": "Forge my company we sort of Step In",
    "start": "1650960",
    "end": "1653720"
  },
  {
    "text": "provide the exact same functionality as",
    "start": "1653720",
    "end": "1655320"
  },
  {
    "text": "the vpa um just with a lot of the uh",
    "start": "1655320",
    "end": "1659120"
  },
  {
    "text": "Kinks worked out we're compatible with",
    "start": "1659120",
    "end": "1660640"
  },
  {
    "text": "the HBA easy to configure we're a little",
    "start": "1660640",
    "end": "1663120"
  },
  {
    "text": "bit more careful about how we roll out",
    "start": "1663120",
    "end": "1664559"
  },
  {
    "text": "patches um there's less overhead to run",
    "start": "1664559",
    "end": "1667399"
  },
  {
    "text": "all the metric servers etc for the vpa",
    "start": "1667399",
    "end": "1670360"
  },
  {
    "text": "um and you can basically just forget",
    "start": "1670360",
    "end": "1672840"
  },
  {
    "text": "about the problem install and uh let uh",
    "start": "1672840",
    "end": "1677080"
  },
  {
    "text": "machine learning the requests and limits",
    "start": "1677080",
    "end": "1679240"
  },
  {
    "text": "way better than your developers ever did",
    "start": "1679240",
    "end": "1680760"
  },
  {
    "text": "to begin",
    "start": "1680760",
    "end": "1682000"
  },
  {
    "text": "with um I think that's time almost",
    "start": "1682000",
    "end": "1685640"
  },
  {
    "text": "perfect um uh please please collect the",
    "start": "1685640",
    "end": "1689080"
  },
  {
    "text": "QR code mostly because Rafa stole my",
    "start": "1689080",
    "end": "1691760"
  },
  {
    "text": "joke that we had a competition and he",
    "start": "1691760",
    "end": "1693960"
  },
  {
    "text": "got five and I want more than",
    "start": "1693960",
    "end": "1695670"
  },
  {
    "text": "[Laughter]",
    "start": "1695670",
    "end": "1697320"
  },
  {
    "text": "five um and come find us in the break or",
    "start": "1697320",
    "end": "1700360"
  },
  {
    "text": "at the happy hour if you want to chat",
    "start": "1700360",
    "end": "1702039"
  },
  {
    "text": "about any of the tools Gator Carpenter",
    "start": "1702039",
    "end": "1704919"
  },
  {
    "text": "our tool requests and limits anything",
    "start": "1704919",
    "end": "1706760"
  },
  {
    "text": "we're around",
    "start": "1706760",
    "end": "1708510"
  },
  {
    "text": "[Applause]",
    "start": "1708510",
    "end": "1717390"
  }
]