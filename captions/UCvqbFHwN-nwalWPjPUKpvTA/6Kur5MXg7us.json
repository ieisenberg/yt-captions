[
  {
    "start": "0",
    "end": "175000"
  },
  {
    "text": "it's okay it's been a long day",
    "start": "230",
    "end": "7250"
  },
  {
    "text": "the reshuffling of the schedule has caused some challenges for all of us and",
    "start": "7250",
    "end": "14730"
  },
  {
    "text": "so I wanted to apologize first for beginning this talk so late in the day",
    "start": "14730",
    "end": "21710"
  },
  {
    "text": "I'll do my best to keep it interesting and snappy and maybe we can have an",
    "start": "21710",
    "end": "29699"
  },
  {
    "text": "interesting conversation about policy which sounds like a contradiction in terms but it really isn't so let me",
    "start": "29699",
    "end": "38460"
  },
  {
    "text": "start by introducing myself my name is Craig Peters I am a program",
    "start": "38460",
    "end": "44399"
  },
  {
    "text": "manager at Microsoft working on Azure",
    "start": "44399",
    "end": "50120"
  },
  {
    "text": "Azure my responsibility is container infrastructure so basically anything at",
    "start": "50120",
    "end": "58469"
  },
  {
    "text": "Microsoft Azure that runs containers my team is responsible for making sure that",
    "start": "58469",
    "end": "65729"
  },
  {
    "text": "all of the upstream open source dependencies are maintained correctly and we contribute everything in the",
    "start": "65729",
    "end": "72180"
  },
  {
    "text": "upstream as a part of that we develop new projects that enable new",
    "start": "72180",
    "end": "79380"
  },
  {
    "text": "capabilities in container tooling that run on adjure or anywhere else and so",
    "start": "79380",
    "end": "89060"
  },
  {
    "text": "we're gonna talk a little bit about how we came to creating a new project called",
    "start": "89060",
    "end": "96210"
  },
  {
    "text": "gatekeeper and that's the subject of the talk today unfortunately I'm up here by",
    "start": "96210",
    "end": "101700"
  },
  {
    "text": "myself you don't see Tauron standing next to me because due to the change in schedule Turin had a conflict at this",
    "start": "101700",
    "end": "110700"
  },
  {
    "text": "hour that he wasn't able to get out of so he sends his apologies for for not",
    "start": "110700",
    "end": "116159"
  },
  {
    "text": "being here I'm also feeling the pain of this because what you'll find in the",
    "start": "116159",
    "end": "124110"
  },
  {
    "text": "discussion today is that I understand policy fairly well I have a fair amount",
    "start": "124110",
    "end": "129360"
  },
  {
    "text": "of experience with it I however am NOT an export expert in open policy agent on",
    "start": "129360",
    "end": "137319"
  },
  {
    "text": "which this gatekeeper project depends so you know we can we can only go so far in",
    "start": "137319",
    "end": "143530"
  },
  {
    "text": "the discussion so if we have questions that come out of the discussion that need to get deeper into open policy",
    "start": "143530",
    "end": "149950"
  },
  {
    "text": "agent Turin is here at the conference and we can find him tomorrow to dig",
    "start": "149950",
    "end": "157480"
  },
  {
    "text": "deeper into those those questions I'll also share other ways in which we can",
    "start": "157480",
    "end": "163900"
  },
  {
    "text": "collaborate online and through the community to get questions answered further so without further adieu okay I",
    "start": "163900",
    "end": "177010"
  },
  {
    "start": "175000",
    "end": "297000"
  },
  {
    "text": "already answered Who I am I want to know a little bit about who you guys are",
    "start": "177010",
    "end": "182730"
  },
  {
    "text": "you know I I want a show of hands here who who here is a developer building",
    "start": "182730",
    "end": "190660"
  },
  {
    "text": "applications that run on container infrastructure kubernetes or other other",
    "start": "190660",
    "end": "195819"
  },
  {
    "text": "places here I do some of that anybody else okay that's great it's about",
    "start": "195819",
    "end": "201910"
  },
  {
    "text": "two-thirds of the audience okay who here operates kubernetes clusters for those",
    "start": "201910",
    "end": "208510"
  },
  {
    "text": "developers as an infrastructure provider me too",
    "start": "208510",
    "end": "214060"
  },
  {
    "text": "okay there's some of the same fans but also some different that's not too much of a surprise who here is here because",
    "start": "214060",
    "end": "222370"
  },
  {
    "text": "they're responsible for security audits in their organization anybody yes a",
    "start": "222370",
    "end": "230040"
  },
  {
    "text": "couple that's fantastic so I am NOT but",
    "start": "230040",
    "end": "235180"
  },
  {
    "text": "I've worked with many people like you so I think we're gonna be able to have a",
    "start": "235180",
    "end": "241120"
  },
  {
    "text": "real good conversation here so some of",
    "start": "241120",
    "end": "246669"
  },
  {
    "text": "the motivation for the work we've done is reflected in this URL which is",
    "start": "246669",
    "end": "251799"
  },
  {
    "text": "actually kind of interesting if you go and take a look I'm not going to dig too deeply into it but it's basically",
    "start": "251799",
    "end": "258299"
  },
  {
    "text": "documentation of a number of horror stories what has gone wrong",
    "start": "258299",
    "end": "266210"
  },
  {
    "text": "for some people when they're running coup grenades clusters in production for",
    "start": "266210",
    "end": "271580"
  },
  {
    "text": "big environments and or small or basically any time you're trying to do",
    "start": "271580",
    "end": "277100"
  },
  {
    "text": "anything real a container orchestra to environment you you you can always shoot",
    "start": "277100",
    "end": "283400"
  },
  {
    "text": "yourself in the foot and so these kinds of tools that we're gonna talk about are intended that reduce the risk of those",
    "start": "283400",
    "end": "291560"
  },
  {
    "text": "kinds of problems coming about so so let's kind of paint the scenario for a minute so when we all got started",
    "start": "291560",
    "end": "301030"
  },
  {
    "start": "297000",
    "end": "523000"
  },
  {
    "text": "building our clusters we very carefully planned out how people were gonna use",
    "start": "301030",
    "end": "309080"
  },
  {
    "text": "them right we generated all of our our back we configured it so that everything",
    "start": "309080",
    "end": "317120"
  },
  {
    "text": "would work you know only the right people can have access to the right namespaces that essentially you you",
    "start": "317120",
    "end": "326690"
  },
  {
    "text": "think that you've got everything planned out you've got run books you've got ways",
    "start": "326690",
    "end": "332419"
  },
  {
    "text": "to handle errors back up for recovery all that stuff is ready to go let's ship",
    "start": "332419",
    "end": "337490"
  },
  {
    "text": "it let's open it up all of a sudden the developers come and they start doing",
    "start": "337490",
    "end": "344210"
  },
  {
    "text": "stuff right and very quickly I suspect",
    "start": "344210",
    "end": "351260"
  },
  {
    "text": "that some of you in this audience may recognize some of these questions has",
    "start": "351260",
    "end": "356840"
  },
  {
    "text": "anybody here ever looked at their cluster and said where did that name",
    "start": "356840",
    "end": "361909"
  },
  {
    "text": "space come from does that ever happen to anybody else yeah and then you look in the name space",
    "start": "361909",
    "end": "368659"
  },
  {
    "text": "and you're like whoa there's a whole bunch of pods there what what are they anybody else yeah and then you look in",
    "start": "368659",
    "end": "377570"
  },
  {
    "text": "the pods and you see what containers are running there oh my god what what does the container where did it come from",
    "start": "377570",
    "end": "383210"
  },
  {
    "text": "like seriously like who who decided to pull from that particular repo like how",
    "start": "383210",
    "end": "392930"
  },
  {
    "text": "did we manage to get there and then you know what do I do next what happens if I delete this like who's gonna care is anybody gonna",
    "start": "392930",
    "end": "399680"
  },
  {
    "text": "care is a production system gonna go down you know what's the impact of that",
    "start": "399680",
    "end": "404750"
  },
  {
    "text": "so you know you despite your best plans you know you have to make things",
    "start": "404750",
    "end": "410660"
  },
  {
    "text": "available to developers they have to have some freedom to move so you you can't lock everything down from an",
    "start": "410660",
    "end": "417110"
  },
  {
    "text": "Arabic perspective completely or you're gonna end up in the same old you know old space where things you know",
    "start": "417110",
    "end": "424070"
  },
  {
    "text": "developers couldn't do things they need to do so the question is you know how can we address these problems so kind of",
    "start": "424070",
    "end": "434960"
  },
  {
    "text": "skip over the psycho that the previous one really did this so you know essentially when you've got a dynamic",
    "start": "434960",
    "end": "440480"
  },
  {
    "text": "environment you've got all kinds of things happening at the same time lots of teams have kind of conflicting goals",
    "start": "440480",
    "end": "446870"
  },
  {
    "text": "you're trying to share resources so that you're not paying too high the administrative costs are too high and",
    "start": "446870",
    "end": "451880"
  },
  {
    "text": "infrastructure costs and then you've got complexes things where you're doing",
    "start": "451880",
    "end": "456920"
  },
  {
    "text": "similar things but not maybe not even exactly the same but across multiple infrastructures right maybe different",
    "start": "456920",
    "end": "463400"
  },
  {
    "text": "clouds on-prem in a public cloud and things kind of start getting pretty",
    "start": "463400",
    "end": "469490"
  },
  {
    "text": "crazy right so how do you limit you know the use of unsaved images how do you",
    "start": "469490",
    "end": "476440"
  },
  {
    "text": "keep track of who created what resources and understand the purpose of those",
    "start": "476440",
    "end": "482060"
  },
  {
    "text": "resources and who depends upon them how do you keep users from running into each",
    "start": "482060",
    "end": "488330"
  },
  {
    "text": "other besides namespaces right namespaces aren't quite enough there how do you make sure that you've got the right",
    "start": "488330",
    "end": "496150"
  },
  {
    "text": "tooling in place to create observability about what's going on in there and and",
    "start": "496240",
    "end": "502880"
  },
  {
    "text": "how do you manage the cost so you know those are all the kinds of questions that you know in my experience everybody",
    "start": "502880",
    "end": "510080"
  },
  {
    "text": "runs into a day to of burning that foster like day one is fine these Eros good we've kind of got that",
    "start": "510080",
    "end": "517340"
  },
  {
    "text": "pretty well solved at least cloud providers do what happens next so lots",
    "start": "517340",
    "end": "525440"
  },
  {
    "start": "523000",
    "end": "623000"
  },
  {
    "text": "of things happen like we all solve problems on a day-to-day basis by using common tools",
    "start": "525440",
    "end": "533020"
  },
  {
    "text": "that we use every day right so the first thing to do is to write things down like",
    "start": "533020",
    "end": "539220"
  },
  {
    "text": "when you do something make sure that you document what you've done I can create",
    "start": "539220",
    "end": "544420"
  },
  {
    "text": "these wikis you put them in spreadsheets who you know there's a million different",
    "start": "544420",
    "end": "551500"
  },
  {
    "text": "ways that we can try to do that the challenge there is I get people to do",
    "start": "551500",
    "end": "557410"
  },
  {
    "text": "that like nobody wants to write it down I created my mo so yes sure oh is it too",
    "start": "557410",
    "end": "564730"
  },
  {
    "text": "hard to hear okay so the question then",
    "start": "564730",
    "end": "570130"
  },
  {
    "text": "is the question then is how do you make it easy for people to accomplish the",
    "start": "570130",
    "end": "578860"
  },
  {
    "text": "documentation of things without having to go and do a separate manual step to write things down and then how do you",
    "start": "578860",
    "end": "586390"
  },
  {
    "text": "deal with the limitations of our back right so like I only have a certain",
    "start": "586390",
    "end": "593040"
  },
  {
    "text": "limited set of vocabulary for the verbs in our back and yeah you can extend that",
    "start": "593040",
    "end": "600120"
  },
  {
    "text": "but that's a slow process of going through the community to define you know",
    "start": "600120",
    "end": "605500"
  },
  {
    "text": "what do we all mean by role based access control right we've got a fairly solid",
    "start": "605500",
    "end": "610690"
  },
  {
    "text": "definition of what that is today but extending that is a slow and cumbersome process in this our back is probably the",
    "start": "610690",
    "end": "617560"
  },
  {
    "text": "wrong mechanism for for accomplishing controlling some of these other things so you know we can maybe agree that",
    "start": "617560",
    "end": "625330"
  },
  {
    "start": "623000",
    "end": "786000"
  },
  {
    "text": "neither of these approaches really completely solves the problem you can",
    "start": "625330",
    "end": "631240"
  },
  {
    "text": "you can do some pieces but you're always gonna have holes there so kubernetes has",
    "start": "631240",
    "end": "638100"
  },
  {
    "text": "additional capabilities built into it on top of you know once you've",
    "start": "638100",
    "end": "644260"
  },
  {
    "text": "authenticated somebody you know who are they are they allowed to access this is",
    "start": "644260",
    "end": "653110"
  },
  {
    "text": "all the domain right of our back then you've got admission control alright so",
    "start": "653110",
    "end": "659050"
  },
  {
    "text": "within a mission the first thing that happens is for that person are they reaching their resource",
    "start": "659050",
    "end": "665980"
  },
  {
    "text": "code limits right okay do we have the resources are they allowed to create new things that's great and then we've got",
    "start": "665980",
    "end": "673060"
  },
  {
    "text": "this thing called the web hook the web hook then has access to all of the metadata about the object that somebody",
    "start": "673060",
    "end": "679509"
  },
  {
    "text": "is trying to create here and can implement rules using an external",
    "start": "679509",
    "end": "685800"
  },
  {
    "text": "controller right so what this controller does is allows you to write very",
    "start": "685800",
    "end": "692259"
  },
  {
    "text": "powerful rules to define what can happen in that cluster for a given object for a",
    "start": "692259",
    "end": "699129"
  },
  {
    "text": "given operation right so I'm trying to do something to change an object in kubernetes is that allowed that's a very",
    "start": "699129",
    "end": "705910"
  },
  {
    "text": "powerful concept that I can do that late in the process and then all the key",
    "start": "705910",
    "end": "711399"
  },
  {
    "text": "thing here is all of this gets reflected in the end in the state of all the",
    "start": "711399",
    "end": "716680"
  },
  {
    "text": "objects in the cluster right and so all of these things happen before it gets",
    "start": "716680",
    "end": "721899"
  },
  {
    "text": "reflected in that CD and so this is an important principle that I love that we",
    "start": "721899",
    "end": "728920"
  },
  {
    "text": "as a community built into - kubernetes the next thing is well if we try to use",
    "start": "728920",
    "end": "736000"
  },
  {
    "text": "this it does allows us to have access to all of that metadata about the object and then I can build in to these",
    "start": "736000",
    "end": "743759"
  },
  {
    "text": "admission controllers all kinds of policies right because I have access to",
    "start": "743759",
    "end": "750160"
  },
  {
    "text": "all that data I can block privileged containers I can say certain people in",
    "start": "750160",
    "end": "755589"
  },
  {
    "text": "certain contexts can can create those containers and in other contexts they",
    "start": "755589",
    "end": "761620"
  },
  {
    "text": "cannot be created I can in certain contexts block the use of certain image",
    "start": "761620",
    "end": "767980"
  },
  {
    "text": "registries I can assure the egress rules are only used in certain places and so forth",
    "start": "767980",
    "end": "773439"
  },
  {
    "text": "right there's there's a essentially an arbitrary set of combinations of rules that are then possible to implement",
    "start": "773439",
    "end": "781480"
  },
  {
    "text": "through this ingress controller mechanism",
    "start": "781480",
    "end": "786808"
  },
  {
    "start": "786000",
    "end": "889000"
  },
  {
    "text": "the challenges that you have to create ingress controllers in order to do that",
    "start": "787550",
    "end": "792710"
  },
  {
    "text": "and it turns out that that is very hard right if you you're essentially just",
    "start": "792710",
    "end": "799070"
  },
  {
    "text": "writing a new controller and go and for people who love to do that that's",
    "start": "799070",
    "end": "805460"
  },
  {
    "text": "awesome but the challenge is that it's not very portable you end up creating",
    "start": "805460",
    "end": "814990"
  },
  {
    "text": "controllers in general that are purpose-built to solve the problem that",
    "start": "814990",
    "end": "821210"
  },
  {
    "text": "you have today and the policies actually end up changing over time and the",
    "start": "821210",
    "end": "828380"
  },
  {
    "text": "challenge is that you don't want to have to go to a developer to say I want to",
    "start": "828380",
    "end": "833480"
  },
  {
    "text": "change the resource quota from X to Y or I want to allow additional namespaces to",
    "start": "833480",
    "end": "839630"
  },
  {
    "text": "have additional quota these those kinds of things don't make sense to encode in",
    "start": "839630",
    "end": "844940"
  },
  {
    "text": "your code so they need to be flexible and parametrized for different environments and they need to take",
    "start": "844940",
    "end": "851030"
  },
  {
    "text": "advantage of external data so you could write a controller that goes and queries some external system like an accounting",
    "start": "851030",
    "end": "857090"
  },
  {
    "text": "system or an audit system to make a decision that's great but then you also",
    "start": "857090",
    "end": "863360"
  },
  {
    "text": "have to think about other use cases like what if I want to make sure to validate",
    "start": "863360",
    "end": "869270"
  },
  {
    "text": "all of my policies as I change them and I want to do them in kind of a CI system",
    "start": "869270",
    "end": "874580"
  },
  {
    "text": "so I need a dry run mechanism and all those kinds of things that's great all of a sudden it starts looking like a",
    "start": "874580",
    "end": "881030"
  },
  {
    "text": "very sort of custom set of code that's not something that we all want to",
    "start": "881030",
    "end": "887240"
  },
  {
    "text": "maintain or develop by ourselves so I want to take a look now at a solution",
    "start": "887240",
    "end": "893840"
  },
  {
    "start": "889000",
    "end": "973000"
  },
  {
    "text": "and that solution is gatekeeper so we're gonna do that in the form of a recorded",
    "start": "893840",
    "end": "899390"
  },
  {
    "text": "demo because nobody wants to watch me type here with me well I get that up",
    "start": "899390",
    "end": "910540"
  },
  {
    "text": "okay very slow",
    "start": "920180",
    "end": "924310"
  },
  {
    "text": "so what is gatekeeper gatekeeper is an",
    "start": "925390",
    "end": "931230"
  },
  {
    "text": "open-source project which you can find on github it has on github repo it has",
    "start": "931230",
    "end": "939090"
  },
  {
    "text": "very straightforward installation instructions you'll find that it's implemented as a set of kubernetes",
    "start": "939090",
    "end": "948840"
  },
  {
    "text": "controllers resource definitions and you",
    "start": "948840",
    "end": "954030"
  },
  {
    "text": "can simply use the the script to deploy",
    "start": "954030",
    "end": "959250"
  },
  {
    "text": "those and what you see is we've created a set of objects in the namespace",
    "start": "959250",
    "end": "967380"
  },
  {
    "text": "gatekeeper system and it's going to fast",
    "start": "967380",
    "end": "973520"
  },
  {
    "text": "so we essentially applied a set of resource definitions there's research",
    "start": "973640",
    "end": "979320"
  },
  {
    "text": "definitions created controllers in the controller namespace and now we're going to walk through what it looks like to",
    "start": "979320",
    "end": "984690"
  },
  {
    "text": "use gatekeeper so let's look at what CR",
    "start": "984690",
    "end": "990420"
  },
  {
    "text": "DS got created it created - one for the configs and one for the templates we'll",
    "start": "990420",
    "end": "995520"
  },
  {
    "text": "look at the importance of that in a few minutes this is a validating web",
    "start": "995520",
    "end": "1001040"
  },
  {
    "text": "configuration so it's a standard way of configuring the web hook and we take a",
    "start": "1001040",
    "end": "1008600"
  },
  {
    "text": "look at that you'll see here that it's look it's an admission web controller and it's implemented in the gatekeeper",
    "start": "1008600",
    "end": "1016100"
  },
  {
    "text": "system and it applies essentially against a set of resource resources that",
    "start": "1016100",
    "end": "1021470"
  },
  {
    "text": "are coming in through the kubernetes api so in this demo we've got a sample Bank",
    "start": "1021470",
    "end": "1029180"
  },
  {
    "text": "there's a web native bank and they've implemented kubernetes and they've",
    "start": "1029180",
    "end": "1035390"
  },
  {
    "text": "opened up to the world so my developer now can go and create some system and",
    "start": "1035390",
    "end": "1040790"
  },
  {
    "text": "there they created a namespace and they created a bunch of objects in that namespace and then their project kind of",
    "start": "1040790",
    "end": "1046600"
  },
  {
    "text": "they moved on to another project and then we found this name space where the",
    "start": "1046600",
    "end": "1052100"
  },
  {
    "text": "administrators and and we're like well who created that let's take a look at it",
    "start": "1052100",
    "end": "1058010"
  },
  {
    "text": "and you know this this is we all kind of some of us raise our hands you know we've we've found namespaces we don't",
    "start": "1058010",
    "end": "1063630"
  },
  {
    "text": "know what they are we have to go talk to a bunch of people it can take quite a long time and eventually we find that",
    "start": "1063630",
    "end": "1070710"
  },
  {
    "text": "somebody created this and then they moved onto it and this is not depend on in any way so how do we say never again",
    "start": "1070710",
    "end": "1078540"
  },
  {
    "text": "like we're not going to allow that to happen anymore so there's a set of",
    "start": "1078540",
    "end": "1083850"
  },
  {
    "text": "templates in this demo that we walk through and the important one here that we're going to look at first is that",
    "start": "1083850",
    "end": "1090150"
  },
  {
    "text": "we're gonna require labels so that's a template for rules for requiring labels",
    "start": "1090150",
    "end": "1095370"
  },
  {
    "text": "and then there's constraint for the labels and we'll apply all of those",
    "start": "1095370",
    "end": "1100560"
  },
  {
    "text": "constraints let's take a look at we're",
    "start": "1100560",
    "end": "1106560"
  },
  {
    "text": "gonna look at one of the constraints here here it is so in the constraint",
    "start": "1106560",
    "end": "1111660"
  },
  {
    "text": "we're gonna say all new namespaces must have an owner right so it's a it's a constraint of",
    "start": "1111660",
    "end": "1118170"
  },
  {
    "text": "kind required labels and we're gonna say all namespaces must have an owner and the owner must fit a standard template",
    "start": "1118170",
    "end": "1126870"
  },
  {
    "text": "in this case implemented as a regex so once we apply that constraint to the",
    "start": "1126870",
    "end": "1132480"
  },
  {
    "text": "system the next time the developer comes back and says okay I'm just gonna create an arbitrary namespace they can they're",
    "start": "1132480",
    "end": "1139350"
  },
  {
    "text": "back you can't just create a namespace you also have to label it right so the",
    "start": "1139350",
    "end": "1144360"
  },
  {
    "text": "the awesome thing about this is that I can just simply create a user friendly",
    "start": "1144360",
    "end": "1150060"
  },
  {
    "text": "message so they they understand what they've actually done wrong so this is a properly formed namespace that's got an",
    "start": "1150060",
    "end": "1156930"
  },
  {
    "text": "owner label associated with it that matches that regex so now I can create that namespace and now what I'm going to",
    "start": "1156930",
    "end": "1166050"
  },
  {
    "text": "show is how you you know we're gonna try to create another set of resources that",
    "start": "1166050",
    "end": "1172860"
  },
  {
    "text": "have no limits that violates another policy that or the limits are too high",
    "start": "1172860",
    "end": "1179070"
  },
  {
    "text": "and we get another message that show that's very clear about what policy I've I've got violated in this case I'm",
    "start": "1179070",
    "end": "1187830"
  },
  {
    "text": "pulling containers from the wrong image repository it tells me sorry you're not allowed to",
    "start": "1187830",
    "end": "1193309"
  },
  {
    "text": "do that so here it's another example where I'm looking at let's see this one",
    "start": "1193309",
    "end": "1200360"
  },
  {
    "text": "is about duplicate service I say this is a policy that says if you're gonna create a new resource in a namespace it",
    "start": "1200360",
    "end": "1207049"
  },
  {
    "text": "can't have the same name as another resource in that net same namespace and",
    "start": "1207049",
    "end": "1212090"
  },
  {
    "text": "so we've tried to create a duplicate one and we got back a very meaningful error there so eventually the developer",
    "start": "1212090",
    "end": "1219010"
  },
  {
    "text": "figures out through what those pop the implementation of those policies they",
    "start": "1219010",
    "end": "1224210"
  },
  {
    "text": "get their application up and running and everything as well until something goes",
    "start": "1224210",
    "end": "1229789"
  },
  {
    "text": "down let's go back for a second here let's get something important so they",
    "start": "1229789",
    "end": "1237770"
  },
  {
    "text": "finally get their service up and running and everything's going great and we never so why did their system go",
    "start": "1237770",
    "end": "1248450"
  },
  {
    "text": "down in this case we do a root cause analysis and something you know a common",
    "start": "1248450",
    "end": "1255890"
  },
  {
    "text": "practice for all of us developers is that we're we're lazy but we also know that we want to be taking the latest",
    "start": "1255890",
    "end": "1262280"
  },
  {
    "text": "patches and making sure that we're using the right latest image so we often",
    "start": "1262280",
    "end": "1268100"
  },
  {
    "text": "resort to using the latest image tag like that's a has anybody else ever like",
    "start": "1268100",
    "end": "1273409"
  },
  {
    "text": "done that I use latest way too much well it turns out that often the latest has a",
    "start": "1273409",
    "end": "1279110"
  },
  {
    "text": "whole bunch of stuff that we don't yet support or can cause unforeseen",
    "start": "1279110",
    "end": "1284120"
  },
  {
    "text": "circumstances and it turns out that that's often a cause when you do a root cause analysis of a big outage so let's",
    "start": "1284120",
    "end": "1290659"
  },
  {
    "text": "say maybe what we want to do is actually not allow the use of the latest image so",
    "start": "1290659",
    "end": "1300830"
  },
  {
    "text": "now let's look a little bit under the hood there are two pieces to implementing policy with gatekeeper one",
    "start": "1300830",
    "end": "1309110"
  },
  {
    "text": "piece is the template so this is something that the administrator would create the template this is a template",
    "start": "1309110",
    "end": "1317390"
  },
  {
    "text": "called kubernetes band image tags and what it does is it implements this deny",
    "start": "1317390",
    "end": "1323480"
  },
  {
    "text": "rule deny rule this is actually an open policy agent syntax an open policy agent",
    "start": "1323480",
    "end": "1331790"
  },
  {
    "text": "actually does the work of enforcing the policies for gatekeeper it says you know",
    "start": "1331790",
    "end": "1340490"
  },
  {
    "text": "I look at these attributes of the input I find the spec I pull up the image",
    "start": "1340490",
    "end": "1346430"
  },
  {
    "text": "label and I say let me get a variable and compare that variable to the image",
    "start": "1346430",
    "end": "1353870"
  },
  {
    "text": "label and if they don't matter if they match then this is a band label right so",
    "start": "1353870",
    "end": "1360290"
  },
  {
    "text": "here you'll notice it's not specified that the latest tag is the one so next we're gonna do we're gonna look at the",
    "start": "1360290",
    "end": "1369160"
  },
  {
    "text": "template so this is the actual object",
    "start": "1369160",
    "end": "1374210"
  },
  {
    "text": "that is the variables or the constraints applied to that template so what it what",
    "start": "1374210",
    "end": "1382190"
  },
  {
    "text": "the what the constraint did is it's a up here I can see that when I look at the",
    "start": "1382190",
    "end": "1388760"
  },
  {
    "text": "labels the label that I'm trying to match is the latest tag so right up here",
    "start": "1388760",
    "end": "1399070"
  },
  {
    "text": "right so I'm trying to I'm looking at the latest tag and I that's the tag that I want to be in and so here I'm actually",
    "start": "1399070",
    "end": "1407150"
  },
  {
    "text": "looking at the object it might be more it's easier to see in the constraint but the constraint is actually a very simple",
    "start": "1407150",
    "end": "1413180"
  },
  {
    "text": "object and that's essentially the end of the demo so let's take a look under the",
    "start": "1413180",
    "end": "1419930"
  },
  {
    "text": "hood how did that work",
    "start": "1419930",
    "end": "1423160"
  },
  {
    "text": "okay",
    "start": "1433070",
    "end": "1436070"
  },
  {
    "text": "okay so how did we get to this so when we",
    "start": "1438179",
    "end": "1445000"
  },
  {
    "text": "looked at the demo we noticed that there were a couple of things though there's a template that implements the the",
    "start": "1445000",
    "end": "1451350"
  },
  {
    "text": "semantics which is in a language called rego re geo the open policy agent",
    "start": "1451350",
    "end": "1457000"
  },
  {
    "text": "understands and so some class of users we call them administrators but some class of users needs to understand the",
    "start": "1457000",
    "end": "1463690"
  },
  {
    "text": "the Rigo semantics and then there's another class of users that needs to understand the policies you actually",
    "start": "1463690",
    "end": "1470860"
  },
  {
    "text": "want to implement using those semantics right so those those are more the the",
    "start": "1470860",
    "end": "1477870"
  },
  {
    "text": "the admins who care about what the resource limits are or which tags shouldn't be allowed so the way it works",
    "start": "1477870",
    "end": "1484890"
  },
  {
    "text": "is happily as kubernetes objects so gate",
    "start": "1484890",
    "end": "1490179"
  },
  {
    "text": "keeper implements open policy agent as a set of CR DS those CR DS are watched by",
    "start": "1490179",
    "end": "1499270"
  },
  {
    "text": "oppa via gatekeeper and it watches",
    "start": "1499270",
    "end": "1505240"
  },
  {
    "text": "through the API server all of the objects it created through the API server implements this webhook admission",
    "start": "1505240",
    "end": "1512770"
  },
  {
    "text": "web hook and allows me to do a review through the web hook of everything and",
    "start": "1512770",
    "end": "1517960"
  },
  {
    "text": "render the query against oppa to apply those constraints to the policy to the",
    "start": "1517960",
    "end": "1524290"
  },
  {
    "text": "policy templates essentially the template ends up generating the policy in oppa and like I said before it",
    "start": "1524290",
    "end": "1532000"
  },
  {
    "text": "essentially exposes all of the metadata of every object type that goes through",
    "start": "1532000",
    "end": "1537640"
  },
  {
    "text": "the admission controller and so in this way we now have essentially a cloud",
    "start": "1537640",
    "end": "1544600"
  },
  {
    "text": "native way of enforcing policies so some",
    "start": "1544600",
    "end": "1550030"
  },
  {
    "start": "1548000",
    "end": "1755000"
  },
  {
    "text": "people have rightfully asked well what's a why gatekeeper why don't I just",
    "start": "1550030",
    "end": "1555960"
  },
  {
    "text": "implement everything in open policy agent open policy agent is a very",
    "start": "1555960",
    "end": "1561400"
  },
  {
    "text": "powerful cross context policy engine that's been used for all kinds of",
    "start": "1561400",
    "end": "1567280"
  },
  {
    "text": "different control systems and so the fundamental difference is that",
    "start": "1567280",
    "end": "1572530"
  },
  {
    "text": "in Opa you essentially load all the policies via commit config Maps config",
    "start": "1572530",
    "end": "1578680"
  },
  {
    "text": "maps are traditionally very hard to kind of maintain over time in clusters and",
    "start": "1578680",
    "end": "1585540"
  },
  {
    "text": "there's essentially in OPA there's no",
    "start": "1585540",
    "end": "1590620"
  },
  {
    "text": "library of standard policies you have to essentially write your rego from from",
    "start": "1590620",
    "end": "1596260"
  },
  {
    "text": "scratch there's there's no clear way to do reuse or sharing of that and that's",
    "start": "1596260",
    "end": "1604150"
  },
  {
    "text": "not exactly the way we we want to standardize standardize that across",
    "start": "1604150",
    "end": "1609520"
  },
  {
    "text": "multiple clusters or multiple environments so what we did with gatekeeper is that we turned these into",
    "start": "1609520",
    "end": "1617580"
  },
  {
    "text": "custom resource definitions so that you can manage policies as objects the way",
    "start": "1617580",
    "end": "1625600"
  },
  {
    "text": "that happens is this combination of the templates which we looked at which contain the metadata you want to extract",
    "start": "1625600",
    "end": "1631960"
  },
  {
    "text": "and the rego semantics and then the constraints which are put together with",
    "start": "1631960",
    "end": "1639700"
  },
  {
    "text": "that template to create the instances of those CRD policies and then the project",
    "start": "1639700",
    "end": "1646630"
  },
  {
    "text": "includes you know part of one of the things that we're building up through gatekeeper is a library of standard",
    "start": "1646630",
    "end": "1653520"
  },
  {
    "text": "policies so standard templates and constraints that you can then go and",
    "start": "1653520",
    "end": "1658660"
  },
  {
    "text": "fork and modify and use them for your own purposes another feature that we",
    "start": "1658660",
    "end": "1669130"
  },
  {
    "text": "added to gatekeeper is intended to make it easier for companies to get from",
    "start": "1669130",
    "end": "1677830"
  },
  {
    "text": "point a where we are today with say no policies implemented to point B I'm",
    "start": "1677830",
    "end": "1684150"
  },
  {
    "text": "completely in compliance and all of my policies are enforced without killing",
    "start": "1684150",
    "end": "1689500"
  },
  {
    "text": "your developers or your administrators so the first step in that is to understand in my existing environment",
    "start": "1689500",
    "end": "1696370"
  },
  {
    "text": "what objects conform to my policies and which ones are out of compliance so we",
    "start": "1696370",
    "end": "1701800"
  },
  {
    "text": "implemented an audit capability that audit capability allows me to periodically look at all the objects in",
    "start": "1701800",
    "end": "1709820"
  },
  {
    "text": "my clusters and evaluate them against out of the set of policies I have in",
    "start": "1709820",
    "end": "1715970"
  },
  {
    "text": "place and that report is done generated as an audit against the CR D this allows",
    "start": "1715970",
    "end": "1724670"
  },
  {
    "text": "me to say over time I'm gonna start by auditing and understanding where I'm out",
    "start": "1724670",
    "end": "1730370"
  },
  {
    "text": "of compliance and then I may either tune the policy because I may decide that something should be allowed in my policy",
    "start": "1730370",
    "end": "1738020"
  },
  {
    "text": "and then eventually I'll start enforcing so that all new objects have to conform",
    "start": "1738020",
    "end": "1744770"
  },
  {
    "text": "to that policy and so this allows sort of an easier on ramp which is a very",
    "start": "1744770",
    "end": "1749960"
  },
  {
    "text": "very important thing in a lot of environments other environments obviously you may want to enforce them",
    "start": "1749960",
    "end": "1756080"
  },
  {
    "start": "1755000",
    "end": "2039000"
  },
  {
    "text": "right away so where are we in the lifecycle of this project so this",
    "start": "1756080",
    "end": "1763460"
  },
  {
    "text": "project is in the alpha stage we it's working great we've got it I can",
    "start": "1763460",
    "end": "1771410"
  },
  {
    "text": "actually say that we use it I'm at Microsoft and we use it to implement the",
    "start": "1771410",
    "end": "1777500"
  },
  {
    "text": "as your policy or aks so we actually have a a preview service running in",
    "start": "1777500",
    "end": "1784340"
  },
  {
    "text": "Microsoft leveraging exactly this technology we also have other vendors",
    "start": "1784340",
    "end": "1792170"
  },
  {
    "text": "who are using this technology in their environments and what we're doing is we're trying to",
    "start": "1792170",
    "end": "1797180"
  },
  {
    "text": "build we're at the stage where we're trying to build the community around this so we need more hands who care",
    "start": "1797180",
    "end": "1804260"
  },
  {
    "text": "about this to come get involved and give us feedback and participate in in the",
    "start": "1804260",
    "end": "1810080"
  },
  {
    "text": "development of it so there are new things that right now are on the horizon right now we don't support mutating",
    "start": "1810080",
    "end": "1817730"
  },
  {
    "text": "webhooks so the next thing that we're looking at doing is doing things like well if",
    "start": "1817730",
    "end": "1823430"
  },
  {
    "text": "somebody requests something from the docker registry maybe I want to point them to my private registry for example",
    "start": "1823430",
    "end": "1829460"
  },
  {
    "text": "right without in a silent way so they don't have to worry about it right so mutating with web hooks are one thing",
    "start": "1829460",
    "end": "1835160"
  },
  {
    "text": "another is that or the you know we do replicate the data",
    "start": "1835160",
    "end": "1840889"
  },
  {
    "text": "from NCD back into open policy agent so that we can do comparisons across",
    "start": "1840889",
    "end": "1846110"
  },
  {
    "text": "multiple clusters for example that will also be useful for comparing against",
    "start": "1846110",
    "end": "1852169"
  },
  {
    "text": "external data so that you can use additional context in your policies so",
    "start": "1852169",
    "end": "1857360"
  },
  {
    "text": "that's another piece of work we're also working with cig off on authorization",
    "start": "1857360",
    "end": "1863649"
  },
  {
    "text": "and using my OPA with authorization likely to not actually be a part of gatekeeper but a separate project the",
    "start": "1863649",
    "end": "1872330"
  },
  {
    "text": "audit right now is essentially an initial attack at it we have a lot of",
    "start": "1872330",
    "end": "1877730"
  },
  {
    "text": "feedback that we need more capabilities there right now gatekeeper has very limited metrics and",
    "start": "1877730",
    "end": "1884330"
  },
  {
    "text": "observability we know it needs more maturity there and right now there's no tooling around creating the the policies",
    "start": "1884330",
    "end": "1892850"
  },
  {
    "text": "you there is a dry run so I can create a set and kind of locally test whether or",
    "start": "1892850",
    "end": "1898730"
  },
  {
    "text": "not my policy is well-formed and and what you know what objects don't work",
    "start": "1898730",
    "end": "1904399"
  },
  {
    "text": "but we need to do more there to make it easier I want to quickly say thank you to the community of people who have been",
    "start": "1904399",
    "end": "1911749"
  },
  {
    "text": "the core of getting started with gatekeeper it's a you know a very",
    "start": "1911749",
    "end": "1917840"
  },
  {
    "text": "interesting cross-section of people across a number of different organizations including Google Microsoft",
    "start": "1917840",
    "end": "1926529"
  },
  {
    "text": "Red Hat and and many others so how do",
    "start": "1926529",
    "end": "1931730"
  },
  {
    "text": "you get involved this is a very important slide you come to the slack so",
    "start": "1931730",
    "end": "1937369"
  },
  {
    "text": "please join the slack community for an",
    "start": "1937369",
    "end": "1942409"
  },
  {
    "text": "open policy agent there's a cuckoo noise policy group and you know come submit",
    "start": "1942409",
    "end": "1948590"
  },
  {
    "text": "your issues and keep track of what's going on through OPA gatekeeper right",
    "start": "1948590",
    "end": "1953749"
  },
  {
    "text": "now the meetings for the community aren't at a very Asian friendly time but that's something we're",
    "start": "1953749",
    "end": "1961669"
  },
  {
    "text": "looking at fixing I'm pushing for having a Europe friendly time and an Asia",
    "start": "1961669",
    "end": "1968090"
  },
  {
    "text": "friendly time in North America some warnings or nights my time and that is the end of my",
    "start": "1968090",
    "end": "1976730"
  },
  {
    "text": "presentation I mean I think we have one minute for questions if there are or I'm happy to hang out afterwards for any",
    "start": "1976730",
    "end": "1982909"
  },
  {
    "text": "additional questions are there any questions real quick no well okay",
    "start": "1982909",
    "end": "1991429"
  },
  {
    "text": "oh there is one question we're trying to",
    "start": "1991429",
    "end": "1997220"
  },
  {
    "text": "do something like we're using the eks AWS we're trying to use like ki am I",
    "start": "1997220",
    "end": "2004000"
  },
  {
    "text": "wonder if if this can replace ki am in terms of like roles i I don't know 100%",
    "start": "2004000",
    "end": "2015309"
  },
  {
    "text": "because I don't know ki am I know I am and I assumed ki am essentially just",
    "start": "2015309",
    "end": "2021129"
  },
  {
    "text": "extends that okay so in theory I think the answer is yes we should test out",
    "start": "2021129",
    "end": "2027549"
  },
  {
    "text": "that use case so unfortunately we're out",
    "start": "2027549",
    "end": "2032860"
  },
  {
    "text": "of time thank you guys very much I really appreciate your attention [Applause]",
    "start": "2032860",
    "end": "2040910"
  }
]