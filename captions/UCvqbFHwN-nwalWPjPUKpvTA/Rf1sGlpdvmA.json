[
  {
    "start": "0",
    "end": "155000"
  },
  {
    "text": "hey welcome to our presentation uh",
    "start": "80",
    "end": "2320"
  },
  {
    "text": "banking on kubernetes the hard way in",
    "start": "2320",
    "end": "4319"
  },
  {
    "text": "production",
    "start": "4319",
    "end": "6799"
  },
  {
    "text": "so uh we work at a company called monzo",
    "start": "7279",
    "end": "10160"
  },
  {
    "text": "which is a bank in the uk",
    "start": "10160",
    "end": "11920"
  },
  {
    "text": "and we absolutely love kubernetes we've",
    "start": "11920",
    "end": "14799"
  },
  {
    "text": "been using kubernetes uh since the very",
    "start": "14799",
    "end": "16880"
  },
  {
    "text": "early days",
    "start": "16880",
    "end": "17680"
  },
  {
    "text": "uh since the 1.2 days when we tell",
    "start": "17680",
    "end": "20640"
  },
  {
    "text": "people",
    "start": "20640",
    "end": "21119"
  },
  {
    "text": "at meetups and conferences that we run",
    "start": "21119",
    "end": "23119"
  },
  {
    "text": "our own kubernetes clusters",
    "start": "23119",
    "end": "24880"
  },
  {
    "text": "uh we self-manage our own kubernetes",
    "start": "24880",
    "end": "26800"
  },
  {
    "text": "clusters uh we",
    "start": "26800",
    "end": "28000"
  },
  {
    "text": "generally get met with uh looks of",
    "start": "28000",
    "end": "30160"
  },
  {
    "text": "incredulity",
    "start": "30160",
    "end": "31359"
  },
  {
    "text": "and questions of like what wait why why",
    "start": "31359",
    "end": "34320"
  },
  {
    "text": "are you doing that i mean",
    "start": "34320",
    "end": "35520"
  },
  {
    "text": "we realized that there are not very many",
    "start": "35520",
    "end": "38239"
  },
  {
    "text": "talks out there about people who",
    "start": "38239",
    "end": "39840"
  },
  {
    "text": "actually run self-hosted clusters in",
    "start": "39840",
    "end": "41280"
  },
  {
    "text": "production um",
    "start": "41280",
    "end": "43040"
  },
  {
    "text": "like most of the most of the content out",
    "start": "43040",
    "end": "46239"
  },
  {
    "text": "there is about",
    "start": "46239",
    "end": "47120"
  },
  {
    "text": "uh using managed services or kind of toy",
    "start": "47120",
    "end": "49200"
  },
  {
    "text": "clusters on your kind of laptop",
    "start": "49200",
    "end": "50800"
  },
  {
    "text": "um and we thought we'd really like to",
    "start": "50800",
    "end": "52719"
  },
  {
    "text": "kind of share our journey of uh",
    "start": "52719",
    "end": "54239"
  },
  {
    "text": "self-hosting",
    "start": "54239",
    "end": "55199"
  },
  {
    "text": "um talk about some of the benefits we've",
    "start": "55199",
    "end": "56879"
  },
  {
    "text": "got and",
    "start": "56879",
    "end": "58399"
  },
  {
    "text": "but also talking about why like if we",
    "start": "58399",
    "end": "60559"
  },
  {
    "text": "are starting from scratch today",
    "start": "60559",
    "end": "61920"
  },
  {
    "text": "we'd probably want to go for a managed",
    "start": "61920",
    "end": "63199"
  },
  {
    "text": "service",
    "start": "63199",
    "end": "65520"
  },
  {
    "text": "so at monzo our goal is to make money",
    "start": "66560",
    "end": "69200"
  },
  {
    "text": "work for everyone",
    "start": "69200",
    "end": "70320"
  },
  {
    "text": "we deal with the complexity of making",
    "start": "70320",
    "end": "72479"
  },
  {
    "text": "money management",
    "start": "72479",
    "end": "73520"
  },
  {
    "text": "easy for all of you um for those who",
    "start": "73520",
    "end": "76240"
  },
  {
    "text": "haven't heard about",
    "start": "76240",
    "end": "77119"
  },
  {
    "text": "monzo before we are a fully licensed and",
    "start": "77119",
    "end": "80000"
  },
  {
    "text": "regulated uk bank with no physical",
    "start": "80000",
    "end": "82159"
  },
  {
    "text": "branches",
    "start": "82159",
    "end": "83040"
  },
  {
    "text": "you can manage all of your money and",
    "start": "83040",
    "end": "85200"
  },
  {
    "text": "finances by the app",
    "start": "85200",
    "end": "86880"
  },
  {
    "text": "uh we hit a milestone of four million",
    "start": "86880",
    "end": "88720"
  },
  {
    "text": "customers uh earlier in the year",
    "start": "88720",
    "end": "90720"
  },
  {
    "text": "uh and that number makes us bigger than",
    "start": "90720",
    "end": "92880"
  },
  {
    "text": "uh some major institutions in the uk",
    "start": "92880",
    "end": "95200"
  },
  {
    "text": "that have been around for over a hundred",
    "start": "95200",
    "end": "96880"
  },
  {
    "text": "years we also have these rather striking",
    "start": "96880",
    "end": "99200"
  },
  {
    "text": "hot coral debit cards which you might",
    "start": "99200",
    "end": "100640"
  },
  {
    "text": "have seen around",
    "start": "100640",
    "end": "101759"
  },
  {
    "text": "they even glow under uv light",
    "start": "101759",
    "end": "105360"
  },
  {
    "text": "so hi my name is sahel and i'm joined",
    "start": "106000",
    "end": "109280"
  },
  {
    "text": "today by miles",
    "start": "109280",
    "end": "110799"
  },
  {
    "text": "we are both engineers at monza and we",
    "start": "110799",
    "end": "112799"
  },
  {
    "text": "spend our time working on the underlying",
    "start": "112799",
    "end": "114720"
  },
  {
    "text": "platform powering the bank",
    "start": "114720",
    "end": "116799"
  },
  {
    "text": "we think about all the complexities of",
    "start": "116799",
    "end": "118079"
  },
  {
    "text": "scaling our infrastructure so that",
    "start": "118079",
    "end": "119439"
  },
  {
    "text": "engineers and other teams",
    "start": "119439",
    "end": "120640"
  },
  {
    "text": "can work on actually kind of building",
    "start": "120640",
    "end": "122079"
  },
  {
    "text": "and running the bank",
    "start": "122079",
    "end": "125040"
  },
  {
    "text": "so just to give a quick outline of uh",
    "start": "125680",
    "end": "128080"
  },
  {
    "text": "what we're gonna go through today",
    "start": "128080",
    "end": "129679"
  },
  {
    "text": "uh we'll we'll start off with our kind",
    "start": "129679",
    "end": "131599"
  },
  {
    "text": "of like journey to self-hosting uh",
    "start": "131599",
    "end": "133599"
  },
  {
    "text": "like why and kind of how we're doing",
    "start": "133599",
    "end": "135840"
  },
  {
    "text": "this um and",
    "start": "135840",
    "end": "137520"
  },
  {
    "text": "we'll talk about some of the benefits",
    "start": "137520",
    "end": "138959"
  },
  {
    "text": "that we've seen uh from",
    "start": "138959",
    "end": "140560"
  },
  {
    "text": "like running our own cluster uh then",
    "start": "140560",
    "end": "142879"
  },
  {
    "text": "we'll go on to",
    "start": "142879",
    "end": "144400"
  },
  {
    "text": "a story of when the self-hosting didn't",
    "start": "144400",
    "end": "147280"
  },
  {
    "text": "work so well for us",
    "start": "147280",
    "end": "149120"
  },
  {
    "text": "and finally like would we do this again",
    "start": "149120",
    "end": "152160"
  },
  {
    "text": "uh if we were starting in 2020",
    "start": "152160",
    "end": "155760"
  },
  {
    "start": "155000",
    "end": "656000"
  },
  {
    "text": "how did we get started by self-hosting",
    "start": "155760",
    "end": "157840"
  },
  {
    "text": "our own kubernetes cluster",
    "start": "157840",
    "end": "159680"
  },
  {
    "text": "um getting a banking license in the uk",
    "start": "159680",
    "end": "162400"
  },
  {
    "text": "takes a really really long time",
    "start": "162400",
    "end": "164480"
  },
  {
    "text": "uh we had some time to make some upfront",
    "start": "164480",
    "end": "167040"
  },
  {
    "text": "and long-term architectural decisions",
    "start": "167040",
    "end": "169360"
  },
  {
    "text": "we wanted to get these right because",
    "start": "169360",
    "end": "170879"
  },
  {
    "text": "nobody really wants to replace the",
    "start": "170879",
    "end": "172879"
  },
  {
    "text": "fundamental technology that underpins a",
    "start": "172879",
    "end": "175200"
  },
  {
    "text": "running bank",
    "start": "175200",
    "end": "176480"
  },
  {
    "text": "we wanted our systems to be highly",
    "start": "176480",
    "end": "178239"
  },
  {
    "text": "extensible scalable resilient and secure",
    "start": "178239",
    "end": "181760"
  },
  {
    "text": "and naturally we chose microservices as",
    "start": "181760",
    "end": "184800"
  },
  {
    "text": "a natural fit for most of those things",
    "start": "184800",
    "end": "186959"
  },
  {
    "text": "we've really gone in on microservices uh",
    "start": "186959",
    "end": "189360"
  },
  {
    "text": "this graph shows",
    "start": "189360",
    "end": "190560"
  },
  {
    "text": "uh how the number of services we're",
    "start": "190560",
    "end": "192480"
  },
  {
    "text": "running has changed over time",
    "start": "192480",
    "end": "194319"
  },
  {
    "text": "and we now have over 1600 microservices",
    "start": "194319",
    "end": "196879"
  },
  {
    "text": "underpinning the bank",
    "start": "196879",
    "end": "199519"
  },
  {
    "text": "i think this describes our like general",
    "start": "199519",
    "end": "201440"
  },
  {
    "text": "architecture strategy and monsoon",
    "start": "201440",
    "end": "203120"
  },
  {
    "text": "right uh if you look if you look at that",
    "start": "203120",
    "end": "204640"
  },
  {
    "text": "graph um like based on that trend",
    "start": "204640",
    "end": "207280"
  },
  {
    "text": "uh i think we're probably going to have",
    "start": "207280",
    "end": "208400"
  },
  {
    "text": "more microservices than the number of",
    "start": "208400",
    "end": "210080"
  },
  {
    "text": "atoms in the known universe in about",
    "start": "210080",
    "end": "212080"
  },
  {
    "text": "five years time",
    "start": "212080",
    "end": "213120"
  },
  {
    "text": "but we'll see we'll see how that goes um",
    "start": "213120",
    "end": "216720"
  },
  {
    "text": "here's a simplified architecture diagram",
    "start": "216720",
    "end": "218480"
  },
  {
    "text": "anyway uh every one of these 1600 dots",
    "start": "218480",
    "end": "221360"
  },
  {
    "text": "is an interpolation microservice",
    "start": "221360",
    "end": "222799"
  },
  {
    "text": "uh each one of the like the graph edges",
    "start": "222799",
    "end": "224959"
  },
  {
    "text": "is a connection between microservices",
    "start": "224959",
    "end": "227519"
  },
  {
    "text": "um and this this number of microservices",
    "start": "227519",
    "end": "230560"
  },
  {
    "text": "allows us to be really flexible in how",
    "start": "230560",
    "end": "232400"
  },
  {
    "text": "we scale our services",
    "start": "232400",
    "end": "233599"
  },
  {
    "text": "it allows us to be flexible in how we",
    "start": "233599",
    "end": "235360"
  },
  {
    "text": "organize teams and ad engineers",
    "start": "235360",
    "end": "238480"
  },
  {
    "text": "each microservices like its own kind of",
    "start": "238480",
    "end": "240319"
  },
  {
    "text": "bounded context has its own",
    "start": "240319",
    "end": "241599"
  },
  {
    "text": "responsibility",
    "start": "241599",
    "end": "244319"
  },
  {
    "text": "why in the clock back to 2016 when we",
    "start": "245120",
    "end": "247599"
  },
  {
    "text": "had just started",
    "start": "247599",
    "end": "248640"
  },
  {
    "text": "out building a modern banking",
    "start": "248640",
    "end": "250319"
  },
  {
    "text": "infrastructure we needed a platform to",
    "start": "250319",
    "end": "252400"
  },
  {
    "text": "deploy",
    "start": "252400",
    "end": "252959"
  },
  {
    "text": "run and operate these microservices they",
    "start": "252959",
    "end": "255920"
  },
  {
    "text": "start",
    "start": "255920",
    "end": "256239"
  },
  {
    "text": "first started out with mesos and",
    "start": "256239",
    "end": "258079"
  },
  {
    "text": "marathon but we quickly run into",
    "start": "258079",
    "end": "261359"
  },
  {
    "text": "some of their limitations and lack of",
    "start": "261359",
    "end": "263280"
  },
  {
    "text": "features let's just say",
    "start": "263280",
    "end": "265440"
  },
  {
    "text": "so we decided to make a very bold and",
    "start": "265440",
    "end": "268240"
  },
  {
    "text": "strategic but on a new open source",
    "start": "268240",
    "end": "270080"
  },
  {
    "text": "project that just about called",
    "start": "270080",
    "end": "271600"
  },
  {
    "text": "kubernetes um at the time kubernetes had",
    "start": "271600",
    "end": "275040"
  },
  {
    "text": "only just released",
    "start": "275040",
    "end": "275919"
  },
  {
    "text": "like a 1.0 version um in mid-2015",
    "start": "275919",
    "end": "279120"
  },
  {
    "text": "and there wasn't really any kind of like",
    "start": "279120",
    "end": "280960"
  },
  {
    "text": "automated tooling to spin up a cluster",
    "start": "280960",
    "end": "283120"
  },
  {
    "text": "uh there were some",
    "start": "283120",
    "end": "284320"
  },
  {
    "text": "like was a nice kind of like managed gk",
    "start": "284320",
    "end": "287199"
  },
  {
    "text": "or eks",
    "start": "287199",
    "end": "288160"
  },
  {
    "text": "um you can almost say at that time it'll",
    "start": "288160",
    "end": "291120"
  },
  {
    "text": "see like arch linux of open source",
    "start": "291120",
    "end": "292960"
  },
  {
    "text": "orchestration platforms",
    "start": "292960",
    "end": "294160"
  },
  {
    "text": "like you have to do everything yourself",
    "start": "294160",
    "end": "296320"
  },
  {
    "text": "um and",
    "start": "296320",
    "end": "297520"
  },
  {
    "text": "if you broke it at least you get to keep",
    "start": "297520",
    "end": "299199"
  },
  {
    "text": "all the pieces",
    "start": "299199",
    "end": "300880"
  },
  {
    "text": "let's go into uh some of the benefits",
    "start": "300880",
    "end": "303039"
  },
  {
    "text": "we've seen from hosting our own",
    "start": "303039",
    "end": "304800"
  },
  {
    "text": "kubernetes clusters",
    "start": "304800",
    "end": "306400"
  },
  {
    "text": "so firstly over four years of operating",
    "start": "306400",
    "end": "309039"
  },
  {
    "text": "kubernetes ourselves",
    "start": "309039",
    "end": "310479"
  },
  {
    "text": "we've picked up a lot of expertise and",
    "start": "310479",
    "end": "312639"
  },
  {
    "text": "understanding of how kubernetes works",
    "start": "312639",
    "end": "314560"
  },
  {
    "text": "under the herd",
    "start": "314560",
    "end": "315440"
  },
  {
    "text": "when we're supporting other engineers at",
    "start": "315440",
    "end": "317199"
  },
  {
    "text": "monza we're able to give",
    "start": "317199",
    "end": "319039"
  },
  {
    "text": "valuable advice and resolve you know",
    "start": "319039",
    "end": "322240"
  },
  {
    "text": "when things go wrong really really",
    "start": "322240",
    "end": "323759"
  },
  {
    "text": "quickly",
    "start": "323759",
    "end": "324320"
  },
  {
    "text": "uh thanks to this uh understanding that",
    "start": "324320",
    "end": "326560"
  },
  {
    "text": "we've uh",
    "start": "326560",
    "end": "327360"
  },
  {
    "text": "built up uh we have the ability to dive",
    "start": "327360",
    "end": "330320"
  },
  {
    "text": "deep into the stack and fix problems",
    "start": "330320",
    "end": "332160"
  },
  {
    "text": "ourselves",
    "start": "332160",
    "end": "333440"
  },
  {
    "text": "one of the early example of this that we",
    "start": "333440",
    "end": "335440"
  },
  {
    "text": "have is uh",
    "start": "335440",
    "end": "336479"
  },
  {
    "text": "is cpu throttling um so it kind of",
    "start": "336479",
    "end": "339199"
  },
  {
    "text": "noticed this problem in some of our",
    "start": "339199",
    "end": "340800"
  },
  {
    "text": "uh basic latency sensitive services uh",
    "start": "340800",
    "end": "344240"
  },
  {
    "text": "where we're seeing really high kind of",
    "start": "344240",
    "end": "345759"
  },
  {
    "text": "like uh tail latencies like 99",
    "start": "345759",
    "end": "347919"
  },
  {
    "text": "percentile",
    "start": "347919",
    "end": "348960"
  },
  {
    "text": "um and we kind of really dug into this",
    "start": "348960",
    "end": "351039"
  },
  {
    "text": "and found that these services were",
    "start": "351039",
    "end": "353120"
  },
  {
    "text": "using a lot of cpu um and they were",
    "start": "353120",
    "end": "355199"
  },
  {
    "text": "actually being kind of",
    "start": "355199",
    "end": "356880"
  },
  {
    "text": "paused by the kernel for 100",
    "start": "356880",
    "end": "358479"
  },
  {
    "text": "milliseconds uh gt how cp thought thing",
    "start": "358479",
    "end": "361199"
  },
  {
    "text": "works",
    "start": "361199",
    "end": "362560"
  },
  {
    "text": "and this hundred milliseconds figure is",
    "start": "362560",
    "end": "364240"
  },
  {
    "text": "actually a like a tunable parameter",
    "start": "364240",
    "end": "366479"
  },
  {
    "text": "in the kernel um and kubernetes used to",
    "start": "366479",
    "end": "370160"
  },
  {
    "text": "hard code this",
    "start": "370160",
    "end": "371440"
  },
  {
    "text": "uh and it didn't allow us to kind of",
    "start": "371440",
    "end": "373759"
  },
  {
    "text": "extend this",
    "start": "373759",
    "end": "375039"
  },
  {
    "text": "so after we cut this down we kind of",
    "start": "375039",
    "end": "376720"
  },
  {
    "text": "opened initially discussed with the",
    "start": "376720",
    "end": "377919"
  },
  {
    "text": "community proposed to fix um",
    "start": "377919",
    "end": "380400"
  },
  {
    "text": "and we came up with our kind of like our",
    "start": "380400",
    "end": "383440"
  },
  {
    "text": "own",
    "start": "383440",
    "end": "383759"
  },
  {
    "text": "own fix for this and we were able to",
    "start": "383759",
    "end": "385919"
  },
  {
    "text": "test this ourselves run it in our own",
    "start": "385919",
    "end": "387440"
  },
  {
    "text": "cluster",
    "start": "387440",
    "end": "388639"
  },
  {
    "text": "just by having the capabilities of",
    "start": "388639",
    "end": "390240"
  },
  {
    "text": "self-hosting",
    "start": "390240",
    "end": "392240"
  },
  {
    "text": "this ties in with uh one of the other",
    "start": "392240",
    "end": "394400"
  },
  {
    "text": "benefits uh is that we have the ability",
    "start": "394400",
    "end": "396880"
  },
  {
    "text": "to",
    "start": "396880",
    "end": "397199"
  },
  {
    "text": "completely customize our own kubernetes",
    "start": "397199",
    "end": "399840"
  },
  {
    "text": "experience",
    "start": "399840",
    "end": "400800"
  },
  {
    "text": "we were mocking arch linux earlier but",
    "start": "400800",
    "end": "402880"
  },
  {
    "text": "arch really does let you",
    "start": "402880",
    "end": "404400"
  },
  {
    "text": "easily customize and tune every aspect",
    "start": "404400",
    "end": "407680"
  },
  {
    "text": "of linux to your liking and by",
    "start": "407680",
    "end": "409520"
  },
  {
    "text": "self-hosting a kubernetes cluster",
    "start": "409520",
    "end": "411759"
  },
  {
    "text": "you gain the same flexibility uh we've",
    "start": "411759",
    "end": "414479"
  },
  {
    "text": "hit",
    "start": "414479",
    "end": "414800"
  },
  {
    "text": "numerous scaling issues and problems",
    "start": "414800",
    "end": "416800"
  },
  {
    "text": "with our setup that we were able to fix",
    "start": "416800",
    "end": "418720"
  },
  {
    "text": "by tuning api server flags",
    "start": "418720",
    "end": "420639"
  },
  {
    "text": "or investigating and fixing bottlenecks",
    "start": "420639",
    "end": "422560"
  },
  {
    "text": "in components like lcd",
    "start": "422560",
    "end": "424720"
  },
  {
    "text": "we've been able to integrate custom",
    "start": "424720",
    "end": "426160"
  },
  {
    "text": "components quite easily like the",
    "start": "426160",
    "end": "428000"
  },
  {
    "text": "vertical pod auto scaler",
    "start": "428000",
    "end": "429440"
  },
  {
    "text": "uh and completely automated the",
    "start": "429440",
    "end": "431039"
  },
  {
    "text": "certificate generation and distribution",
    "start": "431039",
    "end": "432800"
  },
  {
    "text": "using the volt",
    "start": "432800",
    "end": "433840"
  },
  {
    "text": "pki back end as well as our own custom",
    "start": "433840",
    "end": "436560"
  },
  {
    "text": "auditing",
    "start": "436560",
    "end": "437680"
  },
  {
    "text": "of course kubernetes is moving closer",
    "start": "437680",
    "end": "439919"
  },
  {
    "text": "and closer to a world where you can",
    "start": "439919",
    "end": "441599"
  },
  {
    "text": "easily extend and customize",
    "start": "441599",
    "end": "443840"
  },
  {
    "text": "without having to reconfigure the entire",
    "start": "443840",
    "end": "445759"
  },
  {
    "text": "control plane components",
    "start": "445759",
    "end": "447919"
  },
  {
    "text": "but that hasn't been our experience over",
    "start": "447919",
    "end": "449919"
  },
  {
    "text": "the past couple of years",
    "start": "449919",
    "end": "451199"
  },
  {
    "text": "it's only now that the kubernetes",
    "start": "451199",
    "end": "452960"
  },
  {
    "text": "project is moving in that direction",
    "start": "452960",
    "end": "454880"
  },
  {
    "text": "where they're splitting off into more",
    "start": "454880",
    "end": "456560"
  },
  {
    "text": "and more components almost like our",
    "start": "456560",
    "end": "458319"
  },
  {
    "text": "micro services",
    "start": "458319",
    "end": "460000"
  },
  {
    "text": "one of our best examples of where",
    "start": "460000",
    "end": "461840"
  },
  {
    "text": "self-hosting has really helped us um",
    "start": "461840",
    "end": "464560"
  },
  {
    "text": "it's now over the years uh we kind of",
    "start": "464560",
    "end": "466319"
  },
  {
    "text": "got used to kubernetes evolving",
    "start": "466319",
    "end": "468000"
  },
  {
    "text": "very very quickly um and one thing we",
    "start": "468000",
    "end": "471120"
  },
  {
    "text": "have got good at",
    "start": "471120",
    "end": "472000"
  },
  {
    "text": "is doing complex upgrades and migrations",
    "start": "472000",
    "end": "475199"
  },
  {
    "text": "and this particular example we're really",
    "start": "475199",
    "end": "476960"
  },
  {
    "text": "proud of",
    "start": "476960",
    "end": "478400"
  },
  {
    "text": "is doing a rolling migration of the",
    "start": "478400",
    "end": "480319"
  },
  {
    "text": "overlay network on a live cluster",
    "start": "480319",
    "end": "483280"
  },
  {
    "text": "so when we started first using",
    "start": "483280",
    "end": "485199"
  },
  {
    "text": "kubernetes uh we decided to use the",
    "start": "485199",
    "end": "487280"
  },
  {
    "text": "flannel overlay network which was",
    "start": "487280",
    "end": "489039"
  },
  {
    "text": "probably the most popular network at the",
    "start": "489039",
    "end": "490639"
  },
  {
    "text": "time um",
    "start": "490639",
    "end": "492639"
  },
  {
    "text": "and a couple years later we were still",
    "start": "492639",
    "end": "494479"
  },
  {
    "text": "running it and we were still running it",
    "start": "494479",
    "end": "496639"
  },
  {
    "text": "in the",
    "start": "496639",
    "end": "497199"
  },
  {
    "text": "like the really slow vxlan mode",
    "start": "497199",
    "end": "501039"
  },
  {
    "text": "if you haven't come across this this",
    "start": "501039",
    "end": "502800"
  },
  {
    "text": "essentially works by wrapping",
    "start": "502800",
    "end": "504879"
  },
  {
    "text": "all your layer 2 traffic in udp packets",
    "start": "504879",
    "end": "508560"
  },
  {
    "text": "but crucially the wrapping and",
    "start": "508560",
    "end": "510160"
  },
  {
    "text": "unwrapping happens via flannel proxies",
    "start": "510160",
    "end": "512399"
  },
  {
    "text": "which run",
    "start": "512399",
    "end": "513039"
  },
  {
    "text": "in user space which is incredibly slow",
    "start": "513039",
    "end": "517919"
  },
  {
    "text": "and eventually we kind of were running",
    "start": "517919",
    "end": "520080"
  },
  {
    "text": "into the limits of this",
    "start": "520080",
    "end": "521760"
  },
  {
    "text": "we were also quite keen to start using",
    "start": "521760",
    "end": "523760"
  },
  {
    "text": "network policies to",
    "start": "523760",
    "end": "525120"
  },
  {
    "text": "uh lock down traffic between different",
    "start": "525120",
    "end": "527120"
  },
  {
    "text": "pods and",
    "start": "527120",
    "end": "528399"
  },
  {
    "text": "calico seemed like a natural fit to both",
    "start": "528399",
    "end": "530399"
  },
  {
    "text": "solve the problem of our networking",
    "start": "530399",
    "end": "532080"
  },
  {
    "text": "being slow",
    "start": "532080",
    "end": "533200"
  },
  {
    "text": "and low bandwidth and to start using",
    "start": "533200",
    "end": "535440"
  },
  {
    "text": "network policies",
    "start": "535440",
    "end": "536800"
  },
  {
    "text": "so we needed to migrate from flyover to",
    "start": "536800",
    "end": "539120"
  },
  {
    "text": "calico",
    "start": "539120",
    "end": "540720"
  },
  {
    "text": "now the the normal kind of sane way of",
    "start": "540720",
    "end": "543040"
  },
  {
    "text": "doing this is to",
    "start": "543040",
    "end": "544720"
  },
  {
    "text": "spin up an entirely new cluster with the",
    "start": "544720",
    "end": "547200"
  },
  {
    "text": "new kind of network overlay and",
    "start": "547200",
    "end": "549040"
  },
  {
    "text": "you shift your traffic across to it but",
    "start": "549040",
    "end": "551680"
  },
  {
    "text": "this was",
    "start": "551680",
    "end": "552240"
  },
  {
    "text": "this would have been pretty tricky for",
    "start": "552240",
    "end": "553519"
  },
  {
    "text": "us due to some unique constraints at the",
    "start": "553519",
    "end": "555519"
  },
  {
    "text": "time",
    "start": "555519",
    "end": "556959"
  },
  {
    "text": "and firstly we had some stable workloads",
    "start": "556959",
    "end": "559440"
  },
  {
    "text": "in the cluster",
    "start": "559440",
    "end": "561040"
  },
  {
    "text": "and at the time splitting these",
    "start": "561040",
    "end": "563200"
  },
  {
    "text": "workloads across two clusters and kind",
    "start": "563200",
    "end": "564800"
  },
  {
    "text": "of balancing between them",
    "start": "564800",
    "end": "566240"
  },
  {
    "text": "wasn't a very kind of easy problem to",
    "start": "566240",
    "end": "568240"
  },
  {
    "text": "solve",
    "start": "568240",
    "end": "569279"
  },
  {
    "text": "uh secondly uh we also have some",
    "start": "569279",
    "end": "571519"
  },
  {
    "text": "workloads which have persistent",
    "start": "571519",
    "end": "572959"
  },
  {
    "text": "connections to payment schemes",
    "start": "572959",
    "end": "576160"
  },
  {
    "text": "and these would have also been quite",
    "start": "576160",
    "end": "577519"
  },
  {
    "text": "tricky to split across the two clusters",
    "start": "577519",
    "end": "580160"
  },
  {
    "text": "without downtime",
    "start": "580160",
    "end": "581600"
  },
  {
    "text": "and as a bank planned downtime is",
    "start": "581600",
    "end": "583600"
  },
  {
    "text": "something we really want to avoid",
    "start": "583600",
    "end": "585279"
  },
  {
    "text": "at all costs because quite frankly it",
    "start": "585279",
    "end": "587760"
  },
  {
    "text": "shouldn't be acceptable as a bank to",
    "start": "587760",
    "end": "589279"
  },
  {
    "text": "tell customers",
    "start": "589279",
    "end": "590399"
  },
  {
    "text": "you won't be able to access your money",
    "start": "590399",
    "end": "592000"
  },
  {
    "text": "between these two hours you won't be",
    "start": "592000",
    "end": "593440"
  },
  {
    "text": "able to go to an atm and with your money",
    "start": "593440",
    "end": "596000"
  },
  {
    "text": "uh so for us uh doing those kind of",
    "start": "596000",
    "end": "598399"
  },
  {
    "text": "g-cluster approach was",
    "start": "598399",
    "end": "599680"
  },
  {
    "text": "um pretty tricky however we did find a",
    "start": "599680",
    "end": "602720"
  },
  {
    "text": "way to run",
    "start": "602720",
    "end": "604000"
  },
  {
    "text": "both overlay networks in the same",
    "start": "604000",
    "end": "605680"
  },
  {
    "text": "cluster at the same time",
    "start": "605680",
    "end": "608800"
  },
  {
    "text": "the kind of like the simple description",
    "start": "608800",
    "end": "610560"
  },
  {
    "text": "of this i guess is that we deployed",
    "start": "610560",
    "end": "612399"
  },
  {
    "text": "two different node groups one with",
    "start": "612399",
    "end": "613839"
  },
  {
    "text": "flannel and one with calico",
    "start": "613839",
    "end": "616079"
  },
  {
    "text": "they both had separate ip ranges and",
    "start": "616079",
    "end": "618240"
  },
  {
    "text": "every node on the cluster",
    "start": "618240",
    "end": "619519"
  },
  {
    "text": "uh was configured to be able to route to",
    "start": "619519",
    "end": "622720"
  },
  {
    "text": "any any other node uh regardless of what",
    "start": "622720",
    "end": "625120"
  },
  {
    "text": "overlay network it was",
    "start": "625120",
    "end": "626720"
  },
  {
    "text": "and this was pretty ideal for us um",
    "start": "626720",
    "end": "628640"
  },
  {
    "text": "because we could slowly kind of like",
    "start": "628640",
    "end": "630800"
  },
  {
    "text": "ramp up the number of calico notes we",
    "start": "630800",
    "end": "632399"
  },
  {
    "text": "had and",
    "start": "632399",
    "end": "634000"
  },
  {
    "text": "like tune down a number of like flannel",
    "start": "634000",
    "end": "635920"
  },
  {
    "text": "nodes um",
    "start": "635920",
    "end": "637279"
  },
  {
    "text": "and quickly roll back by going the other",
    "start": "637279",
    "end": "639040"
  },
  {
    "text": "direction and we ran into any issues",
    "start": "639040",
    "end": "643120"
  },
  {
    "text": "and i think i experienced the",
    "start": "643120",
    "end": "645200"
  },
  {
    "text": "self-hosting and",
    "start": "645200",
    "end": "646640"
  },
  {
    "text": "uh the the kind of knowledge and context",
    "start": "646640",
    "end": "648720"
  },
  {
    "text": "we gained over the years",
    "start": "648720",
    "end": "649920"
  },
  {
    "text": "was what allowed us to do like um like",
    "start": "649920",
    "end": "652560"
  },
  {
    "text": "such an impressive kind of technical fee",
    "start": "652560",
    "end": "656160"
  },
  {
    "start": "656000",
    "end": "1121000"
  },
  {
    "text": "so uh you you're probably watching this",
    "start": "656399",
    "end": "659040"
  },
  {
    "text": "and think that it all sounds too good to",
    "start": "659040",
    "end": "661279"
  },
  {
    "text": "be true",
    "start": "661279",
    "end": "662399"
  },
  {
    "text": "so i want to give a little bit of a war",
    "start": "662399",
    "end": "664320"
  },
  {
    "text": "story uh to add some balance and",
    "start": "664320",
    "end": "666160"
  },
  {
    "text": "perspective",
    "start": "666160",
    "end": "667519"
  },
  {
    "text": "about when things don't go so well so",
    "start": "667519",
    "end": "670240"
  },
  {
    "text": "towards the end of last year",
    "start": "670240",
    "end": "672000"
  },
  {
    "text": "we announced the completion of a major",
    "start": "672000",
    "end": "674079"
  },
  {
    "text": "infrastructure security project called",
    "start": "674079",
    "end": "675600"
  },
  {
    "text": "network isolation",
    "start": "675600",
    "end": "676880"
  },
  {
    "text": "previously it was possible for any",
    "start": "676880",
    "end": "679040"
  },
  {
    "text": "service running in our kubernetes",
    "start": "679040",
    "end": "680560"
  },
  {
    "text": "cluster",
    "start": "680560",
    "end": "681120"
  },
  {
    "text": "to talk to any other service whilst the",
    "start": "681120",
    "end": "683920"
  },
  {
    "text": "vast majority of services",
    "start": "683920",
    "end": "685839"
  },
  {
    "text": "are built internally by engineers at",
    "start": "685839",
    "end": "688160"
  },
  {
    "text": "monzo and are peer-reviewed to make sure",
    "start": "688160",
    "end": "690320"
  },
  {
    "text": "that they are",
    "start": "690320",
    "end": "691279"
  },
  {
    "text": "secure and safe we still wanted to move",
    "start": "691279",
    "end": "693839"
  },
  {
    "text": "to a model where the networking was much",
    "start": "693839",
    "end": "696079"
  },
  {
    "text": "less permissive",
    "start": "696079",
    "end": "697360"
  },
  {
    "text": "we wanted services to explicitly allow",
    "start": "697360",
    "end": "699760"
  },
  {
    "text": "specific traffic",
    "start": "699760",
    "end": "700959"
  },
  {
    "text": "and deny all other traffic and to do",
    "start": "700959",
    "end": "703360"
  },
  {
    "text": "this we leveraged kubernetes network",
    "start": "703360",
    "end": "705440"
  },
  {
    "text": "policies and built a whole bunch of",
    "start": "705440",
    "end": "707040"
  },
  {
    "text": "tooling on top of them",
    "start": "707040",
    "end": "708959"
  },
  {
    "text": "so essentially uh what the tooling does",
    "start": "708959",
    "end": "711120"
  },
  {
    "text": "under the hood is each service",
    "start": "711120",
    "end": "712959"
  },
  {
    "text": "gets a network policy uh only allowing",
    "start": "712959",
    "end": "715360"
  },
  {
    "text": "traffic",
    "start": "715360",
    "end": "716079"
  },
  {
    "text": "by other services which have a",
    "start": "716079",
    "end": "717600"
  },
  {
    "text": "particular label uh",
    "start": "717600",
    "end": "719279"
  },
  {
    "text": "intending egress to a particular service",
    "start": "719279",
    "end": "722480"
  },
  {
    "text": "under the hood we use calico so calico",
    "start": "722480",
    "end": "725200"
  },
  {
    "text": "enforces the network policy",
    "start": "725200",
    "end": "726720"
  },
  {
    "text": "by generating a bunch of ip tables rules",
    "start": "726720",
    "end": "728959"
  },
  {
    "text": "to enforce the network policy",
    "start": "728959",
    "end": "731360"
  },
  {
    "text": "so prior to rolling out these network",
    "start": "731360",
    "end": "733200"
  },
  {
    "text": "policies across all of our services in",
    "start": "733200",
    "end": "735200"
  },
  {
    "text": "enforcement mode",
    "start": "735200",
    "end": "736160"
  },
  {
    "text": "we wanted to dry run them to make sure",
    "start": "736160",
    "end": "738079"
  },
  {
    "text": "that we caught all of the services",
    "start": "738079",
    "end": "739920"
  },
  {
    "text": "talking to each other",
    "start": "739920",
    "end": "741200"
  },
  {
    "text": "we wanted to avoid an incident where we",
    "start": "741200",
    "end": "743360"
  },
  {
    "text": "enforce network policies and",
    "start": "743360",
    "end": "744880"
  },
  {
    "text": "accidentally block some unconfigured",
    "start": "744880",
    "end": "746959"
  },
  {
    "text": "but legitimate traffic uh that should",
    "start": "746959",
    "end": "749040"
  },
  {
    "text": "have uh reached",
    "start": "749040",
    "end": "750560"
  },
  {
    "text": "its destination to do this we use an",
    "start": "750560",
    "end": "753200"
  },
  {
    "text": "iptables feature",
    "start": "753200",
    "end": "754399"
  },
  {
    "text": "uh to log when a set were on a set of",
    "start": "754399",
    "end": "756959"
  },
  {
    "text": "network policies",
    "start": "756959",
    "end": "758160"
  },
  {
    "text": "uh iptables rules hadn't already been",
    "start": "758160",
    "end": "760639"
  },
  {
    "text": "accepting existing traffic",
    "start": "760639",
    "end": "763360"
  },
  {
    "text": "so we encoded this into our deployment",
    "start": "763360",
    "end": "765680"
  },
  {
    "text": "pipeline for services",
    "start": "765680",
    "end": "767279"
  },
  {
    "text": "so as new services were being deployed",
    "start": "767279",
    "end": "769680"
  },
  {
    "text": "by engineers",
    "start": "769680",
    "end": "770800"
  },
  {
    "text": "they would also deploy a network policy",
    "start": "770800",
    "end": "773680"
  },
  {
    "text": "uh which would",
    "start": "773680",
    "end": "774800"
  },
  {
    "text": "log packet drops uh but not enforce them",
    "start": "774800",
    "end": "778000"
  },
  {
    "text": "at this point we hadn't yet completed",
    "start": "778000",
    "end": "780160"
  },
  {
    "text": "the work to deploy labels to all",
    "start": "780160",
    "end": "782240"
  },
  {
    "text": "services",
    "start": "782240",
    "end": "783120"
  },
  {
    "text": "uh with uh correct correct tagging",
    "start": "783120",
    "end": "786880"
  },
  {
    "text": "uh of all traffic uh that should be",
    "start": "786880",
    "end": "789120"
  },
  {
    "text": "going in and out between services",
    "start": "789120",
    "end": "791040"
  },
  {
    "text": "this naturally meant that we started",
    "start": "791040",
    "end": "793120"
  },
  {
    "text": "seeing scenarios where packets uh",
    "start": "793120",
    "end": "795120"
  },
  {
    "text": "would have been dropped uh had the",
    "start": "795120",
    "end": "796800"
  },
  {
    "text": "network policies been in enforcement",
    "start": "796800",
    "end": "798480"
  },
  {
    "text": "mode",
    "start": "798480",
    "end": "799200"
  },
  {
    "text": "so this is great uh the logging is",
    "start": "799200",
    "end": "801440"
  },
  {
    "text": "working and",
    "start": "801440",
    "end": "802399"
  },
  {
    "text": "we can keep rolling out more and more",
    "start": "802399",
    "end": "804480"
  },
  {
    "text": "refined policies with the correct labels",
    "start": "804480",
    "end": "806560"
  },
  {
    "text": "across all of our services and see this",
    "start": "806560",
    "end": "808880"
  },
  {
    "text": "graph 10 towards zero",
    "start": "808880",
    "end": "810959"
  },
  {
    "text": "once we had caught everything it was a",
    "start": "810959",
    "end": "812959"
  },
  {
    "text": "great way to validate",
    "start": "812959",
    "end": "814079"
  },
  {
    "text": "that we had captured all of the services",
    "start": "814079",
    "end": "817200"
  },
  {
    "text": "um we also had the raw log data uh",
    "start": "817200",
    "end": "819920"
  },
  {
    "text": "stored in our in our logging",
    "start": "819920",
    "end": "821199"
  },
  {
    "text": "infrastructure",
    "start": "821199",
    "end": "822000"
  },
  {
    "text": "so we could slice and dice the the",
    "start": "822000",
    "end": "823920"
  },
  {
    "text": "origin of traffic",
    "start": "823920",
    "end": "826800"
  },
  {
    "text": "so what we found one day is uh once a",
    "start": "826800",
    "end": "829199"
  },
  {
    "text": "few services had been deployed",
    "start": "829199",
    "end": "831120"
  },
  {
    "text": "with this network policy change in",
    "start": "831120",
    "end": "832639"
  },
  {
    "text": "logging mode we started seeing a big",
    "start": "832639",
    "end": "835199"
  },
  {
    "text": "increase in sporadic networking issues",
    "start": "835199",
    "end": "837440"
  },
  {
    "text": "within our kubernetes cluster",
    "start": "837440",
    "end": "839360"
  },
  {
    "text": "um we saw effects uh communicating",
    "start": "839360",
    "end": "842560"
  },
  {
    "text": "between kubernetes nodes",
    "start": "842560",
    "end": "844240"
  },
  {
    "text": "and uh components within our kubernetes",
    "start": "844240",
    "end": "846399"
  },
  {
    "text": "cluster uh",
    "start": "846399",
    "end": "847519"
  },
  {
    "text": "saw effects uh talking to components",
    "start": "847519",
    "end": "850079"
  },
  {
    "text": "outside of our kubernetes cluster",
    "start": "850079",
    "end": "852240"
  },
  {
    "text": "so it turns out uh that running these",
    "start": "852240",
    "end": "854560"
  },
  {
    "text": "services which had uh network policy",
    "start": "854560",
    "end": "856720"
  },
  {
    "text": "vote for us",
    "start": "856720",
    "end": "857440"
  },
  {
    "text": "deployed were unable to keep up with the",
    "start": "857440",
    "end": "859519"
  },
  {
    "text": "workload of logging and processing these",
    "start": "859519",
    "end": "861519"
  },
  {
    "text": "ip tables rules",
    "start": "861519",
    "end": "862880"
  },
  {
    "text": "and it was leading to cpu starvation in",
    "start": "862880",
    "end": "865120"
  },
  {
    "text": "the kernel",
    "start": "865120",
    "end": "866480"
  },
  {
    "text": "just a little bit of background context",
    "start": "866480",
    "end": "868800"
  },
  {
    "text": "when the kernel receives a network",
    "start": "868800",
    "end": "870720"
  },
  {
    "text": "packet in linux",
    "start": "870720",
    "end": "871920"
  },
  {
    "text": "uh it hands it off to a kernel sub sub",
    "start": "871920",
    "end": "874720"
  },
  {
    "text": "system called",
    "start": "874720",
    "end": "875680"
  },
  {
    "text": "uh soft irqs software irqs",
    "start": "875680",
    "end": "878800"
  },
  {
    "text": "are kernel threads uh and there is uh",
    "start": "878800",
    "end": "882079"
  },
  {
    "text": "by default one per logical cpu uh",
    "start": "882079",
    "end": "885360"
  },
  {
    "text": "and that's where where all the network",
    "start": "885360",
    "end": "887600"
  },
  {
    "text": "processing happens",
    "start": "887600",
    "end": "888800"
  },
  {
    "text": "uh including the evaluation of ip tables",
    "start": "888800",
    "end": "891680"
  },
  {
    "text": "rules",
    "start": "891680",
    "end": "892399"
  },
  {
    "text": "uh we were essentially exhausting these",
    "start": "892399",
    "end": "894560"
  },
  {
    "text": "kernel threads",
    "start": "894560",
    "end": "895600"
  },
  {
    "text": "uh by putting down a log raw uh this was",
    "start": "895600",
    "end": "898639"
  },
  {
    "text": "compounded",
    "start": "898639",
    "end": "899519"
  },
  {
    "text": "uh because we were using ebs as our root",
    "start": "899519",
    "end": "902720"
  },
  {
    "text": "volume so essentially",
    "start": "902720",
    "end": "903920"
  },
  {
    "text": "we were logging over uh network attached",
    "start": "903920",
    "end": "906639"
  },
  {
    "text": "storage uh on these instances",
    "start": "906639",
    "end": "908880"
  },
  {
    "text": "kernel threads were essentially being",
    "start": "908880",
    "end": "910639"
  },
  {
    "text": "blocked waiting for the network to",
    "start": "910639",
    "end": "913040"
  },
  {
    "text": "to confirm its logging",
    "start": "913040",
    "end": "916399"
  },
  {
    "text": "whilst debugging this incident uh we",
    "start": "916399",
    "end": "918240"
  },
  {
    "text": "were considering a whole bunch of",
    "start": "918240",
    "end": "919680"
  },
  {
    "text": "theories",
    "start": "919680",
    "end": "920480"
  },
  {
    "text": "we run on aws so we were thinking this",
    "start": "920480",
    "end": "922639"
  },
  {
    "text": "could be a networking issue on a",
    "start": "922639",
    "end": "924639"
  },
  {
    "text": "diverse's side uh aws were really",
    "start": "924639",
    "end": "927040"
  },
  {
    "text": "helpful in real time and told us",
    "start": "927040",
    "end": "928720"
  },
  {
    "text": "immediately that things are looking",
    "start": "928720",
    "end": "930160"
  },
  {
    "text": "healthy on their end",
    "start": "930160",
    "end": "931360"
  },
  {
    "text": "once the packets were in the aws",
    "start": "931360",
    "end": "933759"
  },
  {
    "text": "networking infrastructure they were",
    "start": "933759",
    "end": "935199"
  },
  {
    "text": "making their way reliably on the other",
    "start": "935199",
    "end": "937199"
  },
  {
    "text": "end",
    "start": "937199",
    "end": "937600"
  },
  {
    "text": "it was just a matter of getting into the",
    "start": "937600",
    "end": "939759"
  },
  {
    "text": "aws uh networking",
    "start": "939759",
    "end": "941519"
  },
  {
    "text": "uh stack we had multiple parallel",
    "start": "941519",
    "end": "944399"
  },
  {
    "text": "streams of investigation during",
    "start": "944399",
    "end": "946240"
  },
  {
    "text": "this incident uh and it was only when we",
    "start": "946240",
    "end": "949120"
  },
  {
    "text": "looked at the ip tables rules",
    "start": "949120",
    "end": "950959"
  },
  {
    "text": "that we realized that the logging was a",
    "start": "950959",
    "end": "953199"
  },
  {
    "text": "potential theory",
    "start": "953199",
    "end": "954000"
  },
  {
    "text": "and we were exhausting uh all of the all",
    "start": "954000",
    "end": "956639"
  },
  {
    "text": "of the kernel threads",
    "start": "956639",
    "end": "958079"
  },
  {
    "text": "uh the metrics corroborated the issue",
    "start": "958079",
    "end": "960240"
  },
  {
    "text": "that we were seeing only after the fact",
    "start": "960240",
    "end": "963920"
  },
  {
    "text": "so we had to abandon the logging as our",
    "start": "963920",
    "end": "965680"
  },
  {
    "text": "default mechanism to catching",
    "start": "965680",
    "end": "967279"
  },
  {
    "text": "all potential packet drops but the",
    "start": "967279",
    "end": "969040"
  },
  {
    "text": "logging did give us some really useful",
    "start": "969040",
    "end": "971040"
  },
  {
    "text": "information",
    "start": "971040",
    "end": "971920"
  },
  {
    "text": "uh so we wanted to tip the right balance",
    "start": "971920",
    "end": "974240"
  },
  {
    "text": "about when we would turn on the logging",
    "start": "974240",
    "end": "976720"
  },
  {
    "text": "um because at this point we were running",
    "start": "976720",
    "end": "978399"
  },
  {
    "text": "fully on calico we were able to do",
    "start": "978399",
    "end": "980720"
  },
  {
    "text": "we were able to reevaluate and do a",
    "start": "980720",
    "end": "983199"
  },
  {
    "text": "two-phased approach",
    "start": "983199",
    "end": "984720"
  },
  {
    "text": "where we used calico metrics and we",
    "start": "984720",
    "end": "987759"
  },
  {
    "text": "wrote a custom",
    "start": "987759",
    "end": "988800"
  },
  {
    "text": "open source uh tool which was able to",
    "start": "988800",
    "end": "991600"
  },
  {
    "text": "take those calico metrics",
    "start": "991600",
    "end": "993120"
  },
  {
    "text": "and put them into prometheus we called",
    "start": "993120",
    "end": "995600"
  },
  {
    "text": "this tour",
    "start": "995600",
    "end": "996320"
  },
  {
    "text": "calico accountant and it was able to",
    "start": "996320",
    "end": "998720"
  },
  {
    "text": "check the rate of packet drops",
    "start": "998720",
    "end": "1000720"
  },
  {
    "text": "and once uh the rate of packet drops had",
    "start": "1000720",
    "end": "1003600"
  },
  {
    "text": "been",
    "start": "1003600",
    "end": "1004480"
  },
  {
    "text": "had gone down to an acceptable level we",
    "start": "1004480",
    "end": "1006959"
  },
  {
    "text": "were able to turn",
    "start": "1006959",
    "end": "1008000"
  },
  {
    "text": "on the log mode so that we would capture",
    "start": "1008000",
    "end": "1010639"
  },
  {
    "text": "the",
    "start": "1010639",
    "end": "1011040"
  },
  {
    "text": "the last few uh straight packets that",
    "start": "1011040",
    "end": "1013440"
  },
  {
    "text": "were uh",
    "start": "1013440",
    "end": "1014399"
  },
  {
    "text": "being handled correctly we wanted the",
    "start": "1014399",
    "end": "1017759"
  },
  {
    "text": "raw logs because they gave us",
    "start": "1017759",
    "end": "1019519"
  },
  {
    "text": "uh much richer information on the source",
    "start": "1019519",
    "end": "1022000"
  },
  {
    "text": "of traffic",
    "start": "1022000",
    "end": "1023360"
  },
  {
    "text": "so we've kind of spoken a bit about the",
    "start": "1023360",
    "end": "1025199"
  },
  {
    "text": "benefits of self-hosting",
    "start": "1025199",
    "end": "1026558"
  },
  {
    "text": "um and we give an example of where like",
    "start": "1026559",
    "end": "1029678"
  },
  {
    "text": "we maybe shot ourselves in the foot by",
    "start": "1029679",
    "end": "1031918"
  },
  {
    "text": "self-hosting",
    "start": "1031919",
    "end": "1033038"
  },
  {
    "text": "and so on balance let's say we were",
    "start": "1033039",
    "end": "1036160"
  },
  {
    "text": "building a new kind of platform from",
    "start": "1036160",
    "end": "1037839"
  },
  {
    "text": "scratch in 2020",
    "start": "1037839",
    "end": "1039280"
  },
  {
    "text": "um and we wanted to use kubernetes would",
    "start": "1039280",
    "end": "1042160"
  },
  {
    "text": "we self-host again",
    "start": "1042160",
    "end": "1044480"
  },
  {
    "text": "um and i think there's a there's a few",
    "start": "1044480",
    "end": "1046880"
  },
  {
    "text": "things to consider here so first of all",
    "start": "1046880",
    "end": "1048640"
  },
  {
    "text": "running your own cluster is now uh like",
    "start": "1048640",
    "end": "1050720"
  },
  {
    "text": "easier than ever um",
    "start": "1050720",
    "end": "1052960"
  },
  {
    "text": "it's no longer like kind of arch linux",
    "start": "1052960",
    "end": "1055120"
  },
  {
    "text": "uh you have a",
    "start": "1055120",
    "end": "1056080"
  },
  {
    "text": "like a bunch of really useful tooling",
    "start": "1056080",
    "end": "1057679"
  },
  {
    "text": "like uh keep adm",
    "start": "1057679",
    "end": "1059120"
  },
  {
    "text": "um there's a lot of work going into like",
    "start": "1059120",
    "end": "1061600"
  },
  {
    "text": "things like cluster api",
    "start": "1061600",
    "end": "1062880"
  },
  {
    "text": "at the moment uh to kind of create a",
    "start": "1062880",
    "end": "1064640"
  },
  {
    "text": "stream where you can just like run a few",
    "start": "1064640",
    "end": "1066480"
  },
  {
    "text": "commands and get a production ready uh",
    "start": "1066480",
    "end": "1068320"
  },
  {
    "text": "cluster",
    "start": "1068320",
    "end": "1069200"
  },
  {
    "text": "um in the cloud uh",
    "start": "1069200",
    "end": "1073440"
  },
  {
    "text": "so it is easier to self-host nowadays um",
    "start": "1073440",
    "end": "1076480"
  },
  {
    "text": "but at the same time uh managed services",
    "start": "1076480",
    "end": "1079120"
  },
  {
    "text": "have also gotten a lot better",
    "start": "1079120",
    "end": "1080799"
  },
  {
    "text": "um and of course being managed services",
    "start": "1080799",
    "end": "1083360"
  },
  {
    "text": "uh you lose a bit of control and",
    "start": "1083360",
    "end": "1085039"
  },
  {
    "text": "flexibility",
    "start": "1085039",
    "end": "1085919"
  },
  {
    "text": "uh you're not able to kind of like fully",
    "start": "1085919",
    "end": "1088240"
  },
  {
    "text": "tweak and configure your setup",
    "start": "1088240",
    "end": "1090240"
  },
  {
    "text": "uh to kind of every degree but you do",
    "start": "1090240",
    "end": "1093440"
  },
  {
    "text": "get the benefit of uh like a number of",
    "start": "1093440",
    "end": "1096320"
  },
  {
    "text": "really really smart and experienced",
    "start": "1096320",
    "end": "1098080"
  },
  {
    "text": "engineers uh who",
    "start": "1098080",
    "end": "1099520"
  },
  {
    "text": "like have the like the wealth of",
    "start": "1099520",
    "end": "1102000"
  },
  {
    "text": "experience running tens of thousands of",
    "start": "1102000",
    "end": "1103600"
  },
  {
    "text": "production clusters for customers",
    "start": "1103600",
    "end": "1105679"
  },
  {
    "text": "um and i've also gotten really good at",
    "start": "1105679",
    "end": "1108559"
  },
  {
    "text": "uh keeping on top of the keepness",
    "start": "1108559",
    "end": "1109919"
  },
  {
    "text": "really schedule uh handling things like",
    "start": "1109919",
    "end": "1111919"
  },
  {
    "text": "upgrades and",
    "start": "1111919",
    "end": "1113280"
  },
  {
    "text": "uh like this is all tooling you'd have",
    "start": "1113280",
    "end": "1116080"
  },
  {
    "text": "to build and run",
    "start": "1116080",
    "end": "1116880"
  },
  {
    "text": "and maintain yourself if you ran your",
    "start": "1116880",
    "end": "1118400"
  },
  {
    "text": "own cluster",
    "start": "1118400",
    "end": "1122720"
  },
  {
    "start": "1121000",
    "end": "1213000"
  },
  {
    "text": "so in conclusion uh if we were starting",
    "start": "1122720",
    "end": "1125840"
  },
  {
    "text": "today",
    "start": "1125840",
    "end": "1126799"
  },
  {
    "text": "we wouldn't be running our own cluster",
    "start": "1126799",
    "end": "1129200"
  },
  {
    "text": "the offerings from cloud providers like",
    "start": "1129200",
    "end": "1131280"
  },
  {
    "text": "aws and google cloud",
    "start": "1131280",
    "end": "1132880"
  },
  {
    "text": "bring so much tooling and expertise",
    "start": "1132880",
    "end": "1136160"
  },
  {
    "text": "which we have had to build ourselves uh",
    "start": "1136160",
    "end": "1138799"
  },
  {
    "text": "i i look",
    "start": "1138799",
    "end": "1140160"
  },
  {
    "text": "for example at our like uh at our",
    "start": "1140160",
    "end": "1142640"
  },
  {
    "text": "existing cluster configuration",
    "start": "1142640",
    "end": "1144559"
  },
  {
    "text": "and uh it has been iterated on",
    "start": "1144559",
    "end": "1148000"
  },
  {
    "text": "constantly with uh learnings and",
    "start": "1148000",
    "end": "1150240"
  },
  {
    "text": "learnings from others",
    "start": "1150240",
    "end": "1151520"
  },
  {
    "text": "and that's not something that you can",
    "start": "1151520",
    "end": "1152960"
  },
  {
    "text": "have immediately on day zero",
    "start": "1152960",
    "end": "1155440"
  },
  {
    "text": "if you're if you're starting a fresh and",
    "start": "1155440",
    "end": "1158160"
  },
  {
    "text": "if you go about it yourself",
    "start": "1158160",
    "end": "1160320"
  },
  {
    "text": "nevertheless we've gained some",
    "start": "1160320",
    "end": "1162000"
  },
  {
    "text": "incredibly",
    "start": "1162000",
    "end": "1163360"
  },
  {
    "text": "valuable expertise by running our own",
    "start": "1163360",
    "end": "1165360"
  },
  {
    "text": "cluster when we evaluate a cloud",
    "start": "1165360",
    "end": "1167760"
  },
  {
    "text": "provider offering",
    "start": "1167760",
    "end": "1168720"
  },
  {
    "text": "we can quiz them on how they'd handle",
    "start": "1168720",
    "end": "1170720"
  },
  {
    "text": "things like scaling lcd",
    "start": "1170720",
    "end": "1172400"
  },
  {
    "text": "and handling not lots of network",
    "start": "1172400",
    "end": "1174160"
  },
  {
    "text": "policies based on",
    "start": "1174160",
    "end": "1176080"
  },
  {
    "text": "our experience in the past we can",
    "start": "1176080",
    "end": "1178080"
  },
  {
    "text": "identify these constraints up front",
    "start": "1178080",
    "end": "1180559"
  },
  {
    "text": "as well as uh we can also spin up uh our",
    "start": "1180559",
    "end": "1183760"
  },
  {
    "text": "own clusters we can have a hybrid setup",
    "start": "1183760",
    "end": "1186080"
  },
  {
    "text": "where we can spin up our own clusters uh",
    "start": "1186080",
    "end": "1188799"
  },
  {
    "text": "relatively easily",
    "start": "1188799",
    "end": "1190160"
  },
  {
    "text": "based on the existing configuration that",
    "start": "1190160",
    "end": "1192160"
  },
  {
    "text": "we have uh iterated on",
    "start": "1192160",
    "end": "1194000"
  },
  {
    "text": "uh and make sure that uh kubernetes is",
    "start": "1194000",
    "end": "1196960"
  },
  {
    "text": "uh",
    "start": "1196960",
    "end": "1197360"
  },
  {
    "text": "is fit for purpose and potentially uh",
    "start": "1197360",
    "end": "1200160"
  },
  {
    "text": "send more patches upstream",
    "start": "1200160",
    "end": "1201919"
  },
  {
    "text": "uh when we find scenarios and workloads",
    "start": "1201919",
    "end": "1204320"
  },
  {
    "text": "that are that are not appropriate",
    "start": "1204320",
    "end": "1207360"
  },
  {
    "text": "anyway thank you for coming along and",
    "start": "1207360",
    "end": "1209760"
  },
  {
    "text": "listening to our talk",
    "start": "1209760",
    "end": "1210960"
  },
  {
    "text": "we hope you enjoyed that",
    "start": "1210960",
    "end": "1215120"
  }
]