[
  {
    "text": "all right hello welcome everybody uh to this is the core dns intro and deep",
    "start": "80",
    "end": "5680"
  },
  {
    "text": "dive so um i'm john bellameric uh one of the core maintainers of",
    "start": "5680",
    "end": "11920"
  },
  {
    "text": "coordinates and with me is yong tang yeah my name is i'm from ivanti i'm also",
    "start": "11920",
    "end": "18480"
  },
  {
    "text": "one of the maintainers of according us okay yeah so let me continue okay",
    "start": "18480",
    "end": "25039"
  },
  {
    "text": "okay yeah in first of all thanks for everyone for joining session it's glad to see everyone is coming here and",
    "start": "25039",
    "end": "31760"
  },
  {
    "text": "especially since these kobe times so i think it's still tough life is still tough but i think we are seeing the end",
    "start": "31760",
    "end": "38399"
  },
  {
    "text": "of the tunnel of this occult period so hopefully everyone has a better life you know moving forward right",
    "start": "38399",
    "end": "45360"
  },
  {
    "text": "in today's meeting in today's session we are going to discuss about coding s we are going to do two things first of",
    "start": "45360",
    "end": "51680"
  },
  {
    "text": "all we are going to discuss about doing a little bit of introduction in coordinates",
    "start": "51680",
    "end": "57840"
  },
  {
    "text": "about the latest update in coordinates and several things related to coordinates community and then i'm going",
    "start": "57840",
    "end": "64320"
  },
  {
    "text": "to hand over to zhang jiang we'll do a deep dive encoding us and some of the things that we want to discuss so if you",
    "start": "64320",
    "end": "71200"
  },
  {
    "text": "are truly interested in coding us want to make some contributions or even write",
    "start": "71200",
    "end": "76240"
  },
  {
    "text": "some like special plugins for coding s then certainly that's going to be a chance to learn a little bit hopefully",
    "start": "76240",
    "end": "82400"
  },
  {
    "text": "you'll enjoy this session okay uh so first of all just in case",
    "start": "82400",
    "end": "87680"
  },
  {
    "text": "you're not very familiar i'm going to uh give you a little background on coding s so what is coding as",
    "start": "87680",
    "end": "95200"
  },
  {
    "text": "uh codings is a flexible dns server it's reading goal initially it started as uh",
    "start": "95200",
    "end": "102640"
  },
  {
    "text": "at the fork of academy atp and then i think in in 2016 right that's that's",
    "start": "102640",
    "end": "108560"
  },
  {
    "text": "when coordinates project was started initially mick driven he contributed to the majority of the original code for",
    "start": "108560",
    "end": "115759"
  },
  {
    "text": "coding us to make the caddy uh server to him actually make a fork of cad atp",
    "start": "115759",
    "end": "122240"
  },
  {
    "text": "server and transform that category server into a dns server and that's why",
    "start": "122240",
    "end": "127280"
  },
  {
    "text": "it was originally originally named as the caddy dns and then over the years uh",
    "start": "127280",
    "end": "132400"
  },
  {
    "text": "with different uh contributions from so many contributors so many community so many members from a community",
    "start": "132400",
    "end": "139280"
  },
  {
    "text": "coding has gradually evolve into one of the best best day and server around the world and",
    "start": "139280",
    "end": "145840"
  },
  {
    "text": "most notably coordinators now became the default dns server kubernetes that's why",
    "start": "145840",
    "end": "151040"
  },
  {
    "text": "we're here because that's a cool because so we discussed about coordinates but at its core",
    "start": "151040",
    "end": "156720"
  },
  {
    "text": "coordinates is still a dns server from the beginning and the coordinates",
    "start": "156720",
    "end": "162480"
  },
  {
    "text": "is very much different from other dns servers you know we all know the bind like a dns",
    "start": "162480",
    "end": "168640"
  },
  {
    "text": "server bind under some other dns servers but the difference in coding is another dns server is according as a focus on",
    "start": "168640",
    "end": "176000"
  },
  {
    "text": "service discovery uh and also coding has a very special architecture that's",
    "start": "176000",
    "end": "183120"
  },
  {
    "text": "that is actually the it's a plugin based architecture which means it can be easily extended",
    "start": "183120",
    "end": "188720"
  },
  {
    "text": "if you want to let's say if you you want to have some features and you cannot find find the support",
    "start": "188720",
    "end": "195280"
  },
  {
    "text": "from codings along as you know how to write go you can easily write this",
    "start": "195280",
    "end": "200319"
  },
  {
    "text": "feature uh for yourself and that in fact uh as late later today uh",
    "start": "200319",
    "end": "206560"
  },
  {
    "text": "jiang will work through some of the plugins and you can find out how easy it is to implement",
    "start": "206560",
    "end": "212640"
  },
  {
    "text": "a plugin just for your usage as long as you know how to write and go right",
    "start": "212640",
    "end": "217760"
  },
  {
    "text": "uh okay so coding itself support uh different protocols coding and support",
    "start": "217760",
    "end": "223280"
  },
  {
    "text": "uh ideas dns over tos dno dns otp and the",
    "start": "223280",
    "end": "228799"
  },
  {
    "text": "v2 and the dns over grpc the dns over grpc is not a true dns standard but it's",
    "start": "228799",
    "end": "236400"
  },
  {
    "text": "more like a customer implementation according is also",
    "start": "236400",
    "end": "241920"
  },
  {
    "text": "support of a supported feature of forwarding to upstream via dns or",
    "start": "241920",
    "end": "248720"
  },
  {
    "text": "tos or grp 0 so if you use coding as to serve your dns server to server dns",
    "start": "248720",
    "end": "255519"
  },
  {
    "text": "traffic which is udp and you want to to use coding to query to upstream dns",
    "start": "255519",
    "end": "262079"
  },
  {
    "text": "server you actually don't need to always go through dns or udp you can use other",
    "start": "262079",
    "end": "267520"
  },
  {
    "text": "features you can use transportation through the tcp through",
    "start": "267520",
    "end": "272960"
  },
  {
    "text": "the tos or grpc which is much more reliable so from that standpoint you can",
    "start": "272960",
    "end": "278400"
  },
  {
    "text": "sync according as it's more like a front end to give you the flexibility locally but",
    "start": "278400",
    "end": "284080"
  },
  {
    "text": "at the same time you can use the the other communication channels to",
    "start": "284080",
    "end": "289280"
  },
  {
    "text": "guarantee its reliability from the data singapore point of view",
    "start": "289280",
    "end": "294320"
  },
  {
    "text": "coordinators also have the integration with different cloud vendors for example coding as an integration with uh",
    "start": "294320",
    "end": "300479"
  },
  {
    "text": "rockfield three from ad from ews uh uh accordions uh integration with the",
    "start": "300479",
    "end": "306479"
  },
  {
    "text": "google cloudiness and lgds that's the major cloud vendors another thing with accordions is that",
    "start": "306479",
    "end": "313840"
  },
  {
    "text": "accordions is fully embedded into the cloud native ecosystem it has integration with the promises",
    "start": "313840",
    "end": "321039"
  },
  {
    "text": "open tracing and opa both awesome clown native project",
    "start": "321039",
    "end": "327759"
  },
  {
    "text": "of course as i mentioned before the biggest feature is coordinates is coding as now is the default dns server in",
    "start": "327759",
    "end": "334800"
  },
  {
    "text": "kubernetes so whenever you use kunuti you probably already noticed that there is a uh a power up and running that's",
    "start": "334800",
    "end": "342080"
  },
  {
    "text": "the name with the name of coding as right okay so let's uh let's",
    "start": "342080",
    "end": "349120"
  },
  {
    "text": "okay so let's get through some of the recent updates since last year the",
    "start": "349120",
    "end": "355520"
  },
  {
    "text": "this slide just shows the accordion has updated uh since last kubicon that's",
    "start": "355520",
    "end": "360639"
  },
  {
    "text": "later last year in north america uh since late last year we released several",
    "start": "360639",
    "end": "366400"
  },
  {
    "text": "versions including us from 1.8.5 to 1.9.2 the latest version is 1.9.2",
    "start": "366400",
    "end": "375039"
  },
  {
    "text": "has been released just 10 days ago this month 10 days ago in may 2022",
    "start": "375039",
    "end": "381919"
  },
  {
    "text": "over the over the past half a year or so uh two plugins has been added one is the",
    "start": "381919",
    "end": "388479"
  },
  {
    "text": "grip plugin which allows you to report where the query comes from so",
    "start": "388479",
    "end": "393759"
  },
  {
    "text": "which is very nice feature that's been requested by uh by the community and we finally bring this plugin into the",
    "start": "393759",
    "end": "400960"
  },
  {
    "text": "default coordinates plugin system we also have added another",
    "start": "400960",
    "end": "406240"
  },
  {
    "text": "plugin called header plugin which allows you to fiddle with header bits of your dns query message",
    "start": "406240",
    "end": "414080"
  },
  {
    "text": "the releases including us over the past half year also consists of a couple of backward",
    "start": "414160",
    "end": "420160"
  },
  {
    "text": "incompatible change so if you ever want to update your dns server you may need",
    "start": "420160",
    "end": "425919"
  },
  {
    "text": "to pay close attention one thing is incorporated we remove the remove the wildcard query functionality this may",
    "start": "425919",
    "end": "432800"
  },
  {
    "text": "have some impact in your usage including us but we feel like this is very much needed for",
    "start": "432800",
    "end": "438800"
  },
  {
    "text": "security reasons another thing that's slightly related to security is uh is",
    "start": "438800",
    "end": "444560"
  },
  {
    "text": "that in draft 3 plugin we also remove the ability to pass the plaintext secret",
    "start": "444560",
    "end": "450720"
  },
  {
    "text": "in profile in the past uh it's possible to to just uh",
    "start": "450720",
    "end": "456560"
  },
  {
    "text": "just pass a secret and write down in the core file and save the profile locally",
    "start": "456560",
    "end": "462160"
  },
  {
    "text": "but in recently in one secret audit it was revealed by the audience that this",
    "start": "462160",
    "end": "468000"
  },
  {
    "text": "may not be the best practice from a securities point of view so we finally decided to",
    "start": "468000",
    "end": "473680"
  },
  {
    "text": "say let's remove this uh remove the plain text secret saving equal file so that that also means if",
    "start": "473680",
    "end": "481840"
  },
  {
    "text": "you ever use this feature before you have to find some other way for example you can pass the sequence through the",
    "start": "481840",
    "end": "487599"
  },
  {
    "text": "invited variable which is much safer from a security standpoint",
    "start": "487599",
    "end": "494560"
  },
  {
    "text": "uh we talked about security of course i'm going to go through several security fixes as well but one thing uh i also",
    "start": "494560",
    "end": "501440"
  },
  {
    "text": "want to touch base that's that's about the accordions 1.9.1",
    "start": "501440",
    "end": "507199"
  },
  {
    "text": "some people may notice that the golan 1.17.6",
    "start": "507199",
    "end": "512320"
  },
  {
    "text": "actually consists of several security vulnerabilities sad in impact a lot of software not just",
    "start": "512320",
    "end": "519120"
  },
  {
    "text": "coordinates also if you ever use e-steel or ever use some of the",
    "start": "519120",
    "end": "524240"
  },
  {
    "text": "selfies built by golang you'll notice that if you ever use a vulnerability scanner you probably notice that",
    "start": "524240",
    "end": "531120"
  },
  {
    "text": "you want to scan i just report quite a few things recently right that's actually related to golan 1.17.6",
    "start": "531120",
    "end": "537760"
  },
  {
    "text": "and because of that in including 1.9.1 which was released just a couple months ago we did the emergency",
    "start": "537760",
    "end": "545760"
  },
  {
    "text": "update to bring the golang version to 1.17.8 to fix its vulnerability so again for",
    "start": "545760",
    "end": "553760"
  },
  {
    "text": "the security purpose if you ever have a coding server you'll probably want to update to the latest one as soon as",
    "start": "553760",
    "end": "560320"
  },
  {
    "text": "possible okay so we we talk about the security of",
    "start": "560320",
    "end": "566480"
  },
  {
    "text": "course for the past year or so the security has been the focus uh not just",
    "start": "566480",
    "end": "572240"
  },
  {
    "text": "for coding us but for the whole selfie industry you know especially if we think about like in early 2021",
    "start": "572240",
    "end": "580800"
  },
  {
    "text": "people were talking about ransom attacks and then later we talked about log 4g both both of those events",
    "start": "580800",
    "end": "587600"
  },
  {
    "text": "has been like epic in in terms of news updates like people just receive those uh those news even from cnn from some of",
    "start": "587600",
    "end": "595440"
  },
  {
    "text": "the news channels people talking about the log4j ransom tags so that's why the",
    "start": "595440",
    "end": "600480"
  },
  {
    "text": "security has been a focus for for the whole 2021. and uh",
    "start": "600480",
    "end": "605519"
  },
  {
    "text": "and for coding as we actually uh complete a security audit this security",
    "start": "605519",
    "end": "610720"
  },
  {
    "text": "audit uh has been done recently in march 2022 uh the secret audit was done by a",
    "start": "610720",
    "end": "617680"
  },
  {
    "text": "third party auditor that's a trio of beats located in new york uh the event",
    "start": "617680",
    "end": "622880"
  },
  {
    "text": "the secretary event has been sponsored by lynch foundation so now here i'm going to",
    "start": "622880",
    "end": "628720"
  },
  {
    "text": "to say okay thanks a lot for the support from lenin foundation and the cncf to allow the coding as to",
    "start": "628720",
    "end": "635360"
  },
  {
    "text": "utilize a resource that's available to us so which allows us to making great",
    "start": "635360",
    "end": "641040"
  },
  {
    "text": "progress and also helping the community community that's using coordinates",
    "start": "641040",
    "end": "647279"
  },
  {
    "text": "in this security audit in uh conducted by trailbeats",
    "start": "647279",
    "end": "653200"
  },
  {
    "text": "there are a total of 14 security issues discovered but i do want to say the only",
    "start": "653200",
    "end": "660480"
  },
  {
    "text": " there is only one high civility severity issue this is related",
    "start": "660480",
    "end": "666800"
  },
  {
    "text": "to a potential potential cash poisoning attack",
    "start": "666800",
    "end": "672160"
  },
  {
    "text": "there is also another medium medium issue related to the usage of",
    "start": "672160",
    "end": "678640"
  },
  {
    "text": "plain text saving plain text in the core files",
    "start": "678640",
    "end": "683839"
  },
  {
    "text": "but this medium issue reported it's actually not so much of critical because",
    "start": "683839",
    "end": "689839"
  },
  {
    "text": "again it's possible to mitigate the issue even if you don't update your server but",
    "start": "689839",
    "end": "695920"
  },
  {
    "text": "the rest of the issues discovered by the rest of the issue discovered by",
    "start": "695920",
    "end": "701760"
  },
  {
    "text": "trailbeats are all related to informational or low level stability so",
    "start": "701760",
    "end": "707360"
  },
  {
    "text": "we feel like uh coordinates is very much a safe dns server so no",
    "start": "707360",
    "end": "713760"
  },
  {
    "text": "and all the issues for now has been resolved so if you ever have a accordion server that's running",
    "start": "713760",
    "end": "721360"
  },
  {
    "text": "less than 1.91 you should consider updating the accordions to latest version ideally in",
    "start": "721360",
    "end": "728200"
  },
  {
    "text": "1.9.2 because that 1.9.2 can fix all the security issues reported by",
    "start": "728200",
    "end": "734880"
  },
  {
    "text": "12 bit as well as the golang 1.17.6 issue i mentioned this early",
    "start": "734880",
    "end": "741839"
  },
  {
    "text": "the the whole report is available and we posted on the",
    "start": "741839",
    "end": "746880"
  },
  {
    "text": "we posted on the 14 as a repo uh if you ever have any interest you can",
    "start": "746880",
    "end": "752079"
  },
  {
    "text": "certainly take a look uh but all the issues have been resolved as of now so you can just use kodi as the latest",
    "start": "752079",
    "end": "758720"
  },
  {
    "text": "version to avoid any potential security issues okay another thing i want to discuss is",
    "start": "758720",
    "end": "765120"
  },
  {
    "text": "about the audience community of course the growth of coordinates is always associated with the growth of community",
    "start": "765120",
    "end": "772160"
  },
  {
    "text": "at the moment we have 300 contributors a big thanks to everyone who contributed to quoting us",
    "start": "772160",
    "end": "778480"
  },
  {
    "text": "we have 26 maintenance that's a pretty big number as well and we also have 32",
    "start": "778480",
    "end": "783760"
  },
  {
    "text": "public doctors if by the way if anyone uh in this room if you ever",
    "start": "783760",
    "end": "790000"
  },
  {
    "text": "you know if your company or your institution ever use coding s and your company or institution uh",
    "start": "790000",
    "end": "796240"
  },
  {
    "text": "is willing to let your the name to show up you can certainly create a pr including as repo to add your company or",
    "start": "796240",
    "end": "804000"
  },
  {
    "text": "institution to the public double list that by the way by itself will add you",
    "start": "804000",
    "end": "809839"
  },
  {
    "text": "to be you will become a contributor just by adding this no entry right uh we also have a 9200 stars so we are",
    "start": "809839",
    "end": "817600"
  },
  {
    "text": "hoping to reach 10 000 10 000 stars very soon so let's",
    "start": "817600",
    "end": "824000"
  },
  {
    "text": "see when we can uh get reach to this goal and also another thing i want to mention",
    "start": "824000",
    "end": "829519"
  },
  {
    "text": "is that for the past five years or so coordinates has been",
    "start": "829519",
    "end": "834720"
  },
  {
    "text": "participating in two programs one is the linux foundation's ufx community program",
    "start": "834720",
    "end": "841040"
  },
  {
    "text": "which helps the students to working on open source in return",
    "start": "841040",
    "end": "846480"
  },
  {
    "text": "students will receive a small amount of money in return which is going to help financially and also we participate in",
    "start": "846480",
    "end": "853519"
  },
  {
    "text": "google somehow code both program has been running for quite several years and we participate",
    "start": "853519",
    "end": "860480"
  },
  {
    "text": "almost every year for the past five years this year there is another project that's actually the",
    "start": "860480",
    "end": "868160"
  },
  {
    "text": "acme support for certificate management uh this project has been accepted by google somehow code so there",
    "start": "868160",
    "end": "875760"
  },
  {
    "text": "is a student that's currently working on this project so hopefully we can see the",
    "start": "875760",
    "end": "881199"
  },
  {
    "text": "uh see the completion of the project and and hopefully you know hopefully that",
    "start": "881199",
    "end": "886720"
  },
  {
    "text": "can bring this nice feature to the community as well uh again just just one more thing just",
    "start": "886720",
    "end": "893120"
  },
  {
    "text": "want to mention that if we plan coding as planned to continue to",
    "start": "893120",
    "end": "898240"
  },
  {
    "text": "participate in both linux foundation program as well as google summer code in the future so if",
    "start": "898240",
    "end": "904399"
  },
  {
    "text": "you ever know any student has an interest in open source community want to contribute you can encourage them to",
    "start": "904399",
    "end": "911680"
  },
  {
    "text": "send the application every year and we need return they are going to receive money if they can complete the project",
    "start": "911680",
    "end": "919839"
  },
  {
    "text": "okay that's very much the introduction so i'm going to hand over to",
    "start": "920639",
    "end": "925680"
  },
  {
    "text": "to do a deep dive on cordinas yeah thanks john hi everybody um",
    "start": "925680",
    "end": "931839"
  },
  {
    "text": "so um we have about 20 minutes left before i jump into this i want to ask a few questions know how much time i",
    "start": "935759",
    "end": "942079"
  },
  {
    "text": "should spend on different parts of this so how many of you are using uh kubernetes",
    "start": "942079",
    "end": "948160"
  },
  {
    "text": "and corey and s and kubernetes probably almost all of you okay awesome and then how many of you are",
    "start": "948160",
    "end": "953440"
  },
  {
    "text": "using coordinates without kubernetes just nothing to do with kubernetes okay hey we've got a few things awesome",
    "start": "953440",
    "end": "960000"
  },
  {
    "text": "um great well so what what uh i'm going to talk about a little bit are",
    "start": "960000",
    "end": "965440"
  },
  {
    "text": "how you could customize coordinates now for most of you in the audience who are using coordinates as part of kubernetes",
    "start": "965440",
    "end": "972800"
  },
  {
    "text": "you're probably not going to want to do this but those few of you who raised your hands we'll talk about it but i'll try to be a little bit brief so we leave",
    "start": "972800",
    "end": "978560"
  },
  {
    "text": "a good amount of time for q a around since most of you in the audience",
    "start": "978560",
    "end": "983680"
  },
  {
    "text": "might not be too keen on this stuff but as as yong said one of the really great things about",
    "start": "983680",
    "end": "989199"
  },
  {
    "text": "coordinates that's different from traditional dns servers most of them is",
    "start": "989199",
    "end": "994320"
  },
  {
    "text": "is is this plug-in architecture and the idea is that that we use a sort of request processing pipeline so a dns",
    "start": "994320",
    "end": "1000800"
  },
  {
    "text": "request comes in the server unpacks it and just hands it to this pipeline and when you're setting",
    "start": "1000800",
    "end": "1007279"
  },
  {
    "text": "up your core file which is your configuration file for cordyness you are just enabling different",
    "start": "1007279",
    "end": "1014560"
  },
  {
    "text": "um plugins within that pipeline and configuring them to tweak the request in whatever way you want",
    "start": "1014560",
    "end": "1020560"
  },
  {
    "text": "and so that extent that plug-in architecture lends itself to extensibility and that's",
    "start": "1020560",
    "end": "1025760"
  },
  {
    "text": "what we're talking about here so there's three basic ways to extend it the simplest way",
    "start": "1025760",
    "end": "1031438"
  },
  {
    "text": "is to enable an external plug-in so we have plug-ins that come with your standard coordinates that all of you",
    "start": "1031439",
    "end": "1036798"
  },
  {
    "text": "running our income are running in your kubernetes because whoever your provider is built it and or they pulled it from our docker um our docker hub",
    "start": "1036799",
    "end": "1044480"
  },
  {
    "text": "but if you wanted to do something fancier like i don't know back your um your core dns",
    "start": "1044480",
    "end": "1051039"
  },
  {
    "text": "in memory cache with a layer 2 redis cache we have a we have a",
    "start": "1051039",
    "end": "1056080"
  },
  {
    "text": "an external plugin for that or there's a whole host of them",
    "start": "1056080",
    "end": "1061280"
  },
  {
    "text": "and you don't even need to know how to use go to do this they are written in go but it's actually",
    "start": "1061280",
    "end": "1068000"
  },
  {
    "text": "super super simple there are a couple of really important things though to note",
    "start": "1068000",
    "end": "1073039"
  },
  {
    "text": "um plugins are not loaded dynamically they're built they're done at compile time build time",
    "start": "1073039",
    "end": "1079280"
  },
  {
    "text": "and uh the plug-in ordering is fixed at compile time so that processing of that",
    "start": "1079280",
    "end": "1084880"
  },
  {
    "text": "request through that pipeline you can't change the order of that without rebuilding core dns which kind",
    "start": "1084880",
    "end": "1089919"
  },
  {
    "text": "of sucks but doing something about it is challenging for a variety of reasons",
    "start": "1089919",
    "end": "1096400"
  },
  {
    "text": "so this is probably the most accessible way to do it um and your all your prerequisites are is",
    "start": "1096400",
    "end": "1103360"
  },
  {
    "text": "docker and a shell so simple things you clone it you modify the plug-in cfg that tells it what",
    "start": "1103360",
    "end": "1109520"
  },
  {
    "text": "plug-ins to compile into core dns and in what order and then you build it so i'm",
    "start": "1109520",
    "end": "1114559"
  },
  {
    "text": "not going to step through it because we don't have time for that but i i'm not going to actually do it on a shell but it",
    "start": "1114559",
    "end": "1120240"
  },
  {
    "text": "actually really is quick and easy so you clone core dns if you pull this pdf",
    "start": "1120240",
    "end": "1126000"
  },
  {
    "text": "down off of the the sketch website you can just copy and paste this right out of there paste it in your shell",
    "start": "1126000",
    "end": "1133840"
  },
  {
    "text": "cd into that directory open plug-in cfg so what you'll see in plug-in cfg is",
    "start": "1134640",
    "end": "1140000"
  },
  {
    "text": "colon-delimited lit colon deliminated delimited list i can't speak",
    "start": "1140000",
    "end": "1145280"
  },
  {
    "text": "the first word is the directive that's the word that will appear in your core file when you configure",
    "start": "1145280",
    "end": "1151120"
  },
  {
    "text": "that plugin and then the go module that implements that plugin",
    "start": "1151120",
    "end": "1156400"
  },
  {
    "text": "this list is a little bit out of date because we we forked caddy so it shouldn't say mholt there",
    "start": "1156400",
    "end": "1163520"
  },
  {
    "text": "and then you build it we have a docker image um oh yeah you run this docker command builds it it emits your",
    "start": "1163600",
    "end": "1169919"
  },
  {
    "text": "accordion is binary and you're done all right",
    "start": "1169919",
    "end": "1175679"
  },
  {
    "text": "second way coordinates as a library so here what you're doing is in instead",
    "start": "1175679",
    "end": "1181039"
  },
  {
    "text": "of um actually running the coordinates binary itself",
    "start": "1181039",
    "end": "1187600"
  },
  {
    "text": "you're embedding coordinates in another binary you can use this to strip out plugins you don't care about so how many",
    "start": "1187600",
    "end": "1193280"
  },
  {
    "text": "of you if you know use the node local dns feature in kubernetes",
    "start": "1193280",
    "end": "1198400"
  },
  {
    "text": "okay a couple of you so that that project uses this technique so",
    "start": "1198400",
    "end": "1203840"
  },
  {
    "text": "essentially um the node local dns which all of you should be using it by the way because",
    "start": "1203840",
    "end": "1209039"
  },
  {
    "text": "it's much much better what it does is it runs a little mini core dns just for caching on every node and it redirects",
    "start": "1209039",
    "end": "1216640"
  },
  {
    "text": "all the dns requests from that node to that local cache and then for any requests that need to",
    "start": "1216640",
    "end": "1222960"
  },
  {
    "text": "go to the central cluster dns it upgrades the connection to tcp which fixes some",
    "start": "1222960",
    "end": "1229760"
  },
  {
    "text": "kernel bugs and issues and race conditions so um how many of you know",
    "start": "1229760",
    "end": "1235120"
  },
  {
    "text": "have any idea about what i just said as far as dns like like you understand okay",
    "start": "1235120",
    "end": "1242880"
  },
  {
    "text": "hopefully hopefully you can look that up and it'll get through um but yeah so essentially if you have dns issues in",
    "start": "1242880",
    "end": "1249360"
  },
  {
    "text": "kubernetes weird dns issues try node local dns because there's there's",
    "start": "1249360",
    "end": "1254960"
  },
  {
    "text": "kernel issues there's race conditions there's a contract filling up with udp there's all sorts of subtle things that",
    "start": "1254960",
    "end": "1260000"
  },
  {
    "text": "can happen under load that that fixes anyway it uses this technique um",
    "start": "1260000",
    "end": "1265600"
  },
  {
    "text": "and uh i have an example you can pull off of github super easy to to build um",
    "start": "1265600",
    "end": "1272640"
  },
  {
    "text": "i along with um i don't know if you know cricket lou is he wrote a bunch of the dns books dns and bind and all of these",
    "start": "1272640",
    "end": "1278480"
  },
  {
    "text": "things he and i wrote accordion s book and we go through this example there so",
    "start": "1278480",
    "end": "1283679"
  },
  {
    "text": "um you know you can go buy the book too that would be great um all right",
    "start": "1283679",
    "end": "1289440"
  },
  {
    "text": "third way i've used six minutes we'll leave te we'll use four more minutes for the last one",
    "start": "1289440",
    "end": "1294880"
  },
  {
    "text": "um so write your own plugin so remember we",
    "start": "1294880",
    "end": "1299919"
  },
  {
    "text": "have the pipeline request comes in we do something with it",
    "start": "1299919",
    "end": "1305760"
  },
  {
    "text": "what do we do with it well we tend to classify plug-ins into three categories this is not strictly necessary this is",
    "start": "1305760",
    "end": "1313120"
  },
  {
    "text": "just sort of a best practice we use because what we want like a unix pipeline we want each",
    "start": "1313120",
    "end": "1319200"
  },
  {
    "text": "of those plugins to be composable we want you to be able to use them with the other plugins so we want to kind of scope them to some",
    "start": "1319200",
    "end": "1326480"
  },
  {
    "text": "some small piece of functionality so you can pull them into you know as an external",
    "start": "1326480",
    "end": "1331679"
  },
  {
    "text": "plug and pull it into different coordinate instances and things so when you decide to write a plug-in you should think about am i writing a",
    "start": "1331679",
    "end": "1337919"
  },
  {
    "text": "back-end plug-in a back-end plug-in means i'm a source of data the kubernetes plug-in which you're all most",
    "start": "1337919",
    "end": "1343120"
  },
  {
    "text": "of you are using is actually a back-end plug-in it's pulling data from the cube api server and publishing it as dns the",
    "start": "1343120",
    "end": "1351200"
  },
  {
    "text": "cloud dns uh the route 531 all the same thing they read from those cloud provider apis and then they present the",
    "start": "1351200",
    "end": "1358640"
  },
  {
    "text": "data as dns those are black back-ends there's also back-ends like external back-ends for storing your dns names in uh postgres",
    "start": "1358640",
    "end": "1365440"
  },
  {
    "text": "for example um mutators mutators are things that muck with the request they do something to it",
    "start": "1365440",
    "end": "1372480"
  },
  {
    "text": "they change it um they deny it so we have a rewrite plugin that lets you",
    "start": "1372480",
    "end": "1378880"
  },
  {
    "text": "uh somebody queries for you know um well you know some some name",
    "start": "1378880",
    "end": "1385600"
  },
  {
    "text": "we look at that name and we say haha we don't really want you to go there we're going to rewrite the query",
    "start": "1385600",
    "end": "1391919"
  },
  {
    "text": "and we're going to send it to the upstream name server as something different and then we're going to reply with that ip address so that's what",
    "start": "1391919",
    "end": "1397520"
  },
  {
    "text": "rewrite is for and actually that makes me something i'm not sure if young mentioned",
    "start": "1397520",
    "end": "1403120"
  },
  {
    "text": "core dns is a authoritative dns server so in dns",
    "start": "1403120",
    "end": "1408240"
  },
  {
    "text": "there's authoritative servers and recursive servers when you",
    "start": "1408240",
    "end": "1413840"
  },
  {
    "text": "a recursive server takes a dns request and it's broke breaks it down into the labels and it goes out to each of those",
    "start": "1413840",
    "end": "1420480"
  },
  {
    "text": "other dns servers and figures out uh which name server owns that particular domain so when you",
    "start": "1420480",
    "end": "1427520"
  },
  {
    "text": "look up food.google.com your local recursive server will go i don't know anything",
    "start": "1427520",
    "end": "1433520"
  },
  {
    "text": "about food.google.com i'm not authoritative i don't have those records so i'm going to",
    "start": "1433520",
    "end": "1439360"
  },
  {
    "text": "ask i'm going to figure out what name server does have those and you know so it's going to say okay well",
    "start": "1439360",
    "end": "1444559"
  },
  {
    "text": "maybe it's the google.com one well i don't know anything what's google i don't know what that is so i'm going to go to the dot com right i'm going to go",
    "start": "1444559",
    "end": "1450000"
  },
  {
    "text": "to the root name server and i'm going to sort of walk that whole tree so that's a recursive name server and it's not what",
    "start": "1450000",
    "end": "1455279"
  },
  {
    "text": "code dns does that means that unless you're resolving using coordinates to resolve the names",
    "start": "1455279",
    "end": "1461919"
  },
  {
    "text": "it owns um or that it's pulling from some other backend source",
    "start": "1461919",
    "end": "1468240"
  },
  {
    "text": "it's going to need an outpou an external name server that it can forward its request to so if you're",
    "start": "1468240",
    "end": "1474640"
  },
  {
    "text": "looking at your core file and you see the forward plug-in that's all that does so just something to keep in mind um",
    "start": "1474640",
    "end": "1481760"
  },
  {
    "text": "when you're when you're using coordinates it's a it's a huge limitation frankly but it's",
    "start": "1481760",
    "end": "1486960"
  },
  {
    "text": "uh it's there for a reason because recursive dns servers are really hard to write and um you know so so we haven't done it",
    "start": "1486960",
    "end": "1494559"
  },
  {
    "text": "anyway um mutators uh that's where we implement apples cache rewrite things like that",
    "start": "1494559",
    "end": "1501679"
  },
  {
    "text": "finally configurators if that's a word um are just things that modify the state of kubernetes of course dns rather so",
    "start": "1501679",
    "end": "1509679"
  },
  {
    "text": "the bind plug-in tells you which ip addresses to bind to the log plugin tells you what kind of logs to to do",
    "start": "1509679",
    "end": "1515760"
  },
  {
    "text": "things like that so think about your plugin that you want to write as one of these",
    "start": "1515760",
    "end": "1520880"
  },
  {
    "text": "then you just implement four functions um these are the mandatory ones of course your logic is gonna have to live",
    "start": "1520880",
    "end": "1526559"
  },
  {
    "text": "in some function somewhere the name function super simple",
    "start": "1526559",
    "end": "1532159"
  },
  {
    "text": "the serve dns function that's the meat that takes the the request in",
    "start": "1532159",
    "end": "1537360"
  },
  {
    "text": "and does something with it so our example",
    "start": "1537360",
    "end": "1543360"
  },
  {
    "text": "i've used up all my time but i'll i'll go quick um again this is out there on the core dns",
    "start": "1543360",
    "end": "1551360"
  },
  {
    "text": "organization in github you can step through this it's it's super easy but basically there's a plug",
    "start": "1551360",
    "end": "1557120"
  },
  {
    "text": "in here that i've written as an example that will take a response",
    "start": "1557120",
    "end": "1563520"
  },
  {
    "text": "when you when you get the response from say the upstream name server or the the",
    "start": "1563520",
    "end": "1568640"
  },
  {
    "text": "later plugin in the chain it looks at the response and it consolidates",
    "start": "1568640",
    "end": "1574640"
  },
  {
    "text": "a given type of record into one so",
    "start": "1574640",
    "end": "1581039"
  },
  {
    "text": "super simple like i said name function just returns the name setup registers the",
    "start": "1581039",
    "end": "1586960"
  },
  {
    "text": "plugin with the parsing routines so that",
    "start": "1586960",
    "end": "1592640"
  },
  {
    "text": "so that when we're parsing the core file we know what you're referring to when you use that directive",
    "start": "1592640",
    "end": "1599120"
  },
  {
    "text": "uh i'm just gonna well oh actually this is important the it also does this add plugin and this is",
    "start": "1599120",
    "end": "1605840"
  },
  {
    "text": "what inserts it in the chain so in that setup in that plug-in cfg basically when",
    "start": "1605840",
    "end": "1610880"
  },
  {
    "text": "we when we um when we read the core file we're not",
    "start": "1610880",
    "end": "1617200"
  },
  {
    "text": "looking at the order the directives come in in order to initialize all of these chains we're actually running through a",
    "start": "1617200",
    "end": "1622880"
  },
  {
    "text": "fixed order that's why why you have that issue i talked about earlier all right and",
    "start": "1622880",
    "end": "1629360"
  },
  {
    "text": "um i'm just gonna because i want to leave time oh wait sorry young",
    "start": "1629360",
    "end": "1636240"
  },
  {
    "text": "how about it did come up no it didn't come up all right i'm going to",
    "start": "1636240",
    "end": "1641679"
  },
  {
    "text": "skip showing you that um in the interest of time and leaving time for q a but you can check out the",
    "start": "1641679",
    "end": "1646960"
  },
  {
    "text": "serve dns uh on github like i said super easy just takes in a",
    "start": "1646960",
    "end": "1652960"
  },
  {
    "text": "request modifies it the one thing i will tell you is um well",
    "start": "1652960",
    "end": "1659520"
  },
  {
    "text": "how about this i'll tell you contact me afterwards if you want to do this and i'll go through with you in detail because i want to leave you guys",
    "start": "1659520",
    "end": "1665840"
  },
  {
    "text": "time to talk all right so",
    "start": "1665840",
    "end": "1671760"
  },
  {
    "text": "some resources then for um for uh any of you out there who are interested",
    "start": "1671760",
    "end": "1677440"
  },
  {
    "text": "in learning more about it or diving into actually modifying coordinates this is where you can find",
    "start": "1677440",
    "end": "1682799"
  },
  {
    "text": "us online we have a slack channel it's not the kubernetes slack it's the cncf slack",
    "start": "1682799",
    "end": "1689440"
  },
  {
    "text": "we have a slack channel on there and of course github is the main place where",
    "start": "1689440",
    "end": "1695200"
  },
  {
    "text": "you can reach us that's where we're most active there is a mailing list but we don't use",
    "start": "1695200",
    "end": "1700320"
  },
  {
    "text": "it almost at all we will get the emails and reply to you but nobody uses it so i don't even think we put it up there but",
    "start": "1700320",
    "end": "1705679"
  },
  {
    "text": "uh mostly slack and and github all right",
    "start": "1705679",
    "end": "1711440"
  },
  {
    "text": "so questions yes sir here we've got a microphone here",
    "start": "1711440",
    "end": "1719158"
  },
  {
    "text": "yeah my questions about uh ptr and a records i know services uh core dns is quite consistent",
    "start": "1724320",
    "end": "1731679"
  },
  {
    "text": "but pod uh it seems that sometimes you get ptr",
    "start": "1731679",
    "end": "1736799"
  },
  {
    "text": "records reverse dns for pods and sometimes you don't and i see on github",
    "start": "1736799",
    "end": "1742320"
  },
  {
    "text": "some people saying that oh that should never ever work which i actually personally agree with but my my",
    "start": "1742320",
    "end": "1748159"
  },
  {
    "text": "users like it that it works yeah um let me think about let me try to",
    "start": "1748159",
    "end": "1753760"
  },
  {
    "text": "remember so when you do",
    "start": "1753760",
    "end": "1759679"
  },
  {
    "text": "a when you do a headless service i believe",
    "start": "1759679",
    "end": "1765760"
  },
  {
    "text": "you will get ptr records for the pods backing that service",
    "start": "1765760",
    "end": "1771600"
  },
  {
    "text": "um i i actually wrote that well i i i wrote that specification reverse",
    "start": "1771600",
    "end": "1777520"
  },
  {
    "text": "engineering from cube dns but it was a few years ago so i would have to dig into the details but yeah",
    "start": "1777520",
    "end": "1783679"
  },
  {
    "text": "they're generally um",
    "start": "1783679",
    "end": "1788398"
  },
  {
    "text": "i believe you get them for headless services for cluster ip services they don't really make sense",
    "start": "1788799",
    "end": "1795440"
  },
  {
    "text": "and for pods themselves we don't have a records for pods and",
    "start": "1795440",
    "end": "1800960"
  },
  {
    "text": "unless you have a headless service and the reason for that is really",
    "start": "1800960",
    "end": "1806840"
  },
  {
    "text": "uh twofold one is that from a",
    "start": "1806840",
    "end": "1812000"
  },
  {
    "text": "sort of philosophical point of view um we don't really want you thinking about pods",
    "start": "1812000",
    "end": "1817360"
  },
  {
    "text": "and you know that's a little heavy-handed you actually you can have pod records i'll get to that in a second but um",
    "start": "1817360",
    "end": "1824799"
  },
  {
    "text": "you all we also um from our performance reasons is really the main reason",
    "start": "1824799",
    "end": "1830159"
  },
  {
    "text": "so if you think about coordinates does in kubernetes context cordera sits and listens on the cube api server so every",
    "start": "1830159",
    "end": "1837279"
  },
  {
    "text": "time that a service or now in modern ones the endpoint slice is",
    "start": "1837279",
    "end": "1843120"
  },
  {
    "text": "actually what backs a service whenever an endpoint slice a pod comes or goes from an endpoint slice we're updating",
    "start": "1843120",
    "end": "1849360"
  },
  {
    "text": "the cache within coordinates so we're watching and we're seeing all these events come down from the api server",
    "start": "1849360",
    "end": "1854880"
  },
  {
    "text": "if we subscribe to pods too it's way more traffic and it's way more",
    "start": "1854880",
    "end": "1859919"
  },
  {
    "text": "load on the api server so in general we don't want to do that and so that's why you won't see",
    "start": "1859919",
    "end": "1866399"
  },
  {
    "text": "ptr records for pods only for pods that are endpoints in headless",
    "start": "1866399",
    "end": "1872720"
  },
  {
    "text": "services probably because those pods participate",
    "start": "1872720",
    "end": "1878559"
  },
  {
    "text": "well it would be by the surface name um",
    "start": "1878559",
    "end": "1884159"
  },
  {
    "text": "i don't know we can dig into it later you won't see them for raw pots it's got to have a service backing it in order for it to have any ptr record at all",
    "start": "1884159",
    "end": "1891600"
  },
  {
    "text": "now in a stateful set if these pods are participating in a staple set they're gonna they're gonna have that service",
    "start": "1891600",
    "end": "1897519"
  },
  {
    "text": "created automatically so that might also be where you would see them",
    "start": "1897519",
    "end": "1903799"
  },
  {
    "text": "i get the services dns address sometimes you'll get the p you'll get the p this when you",
    "start": "1909840",
    "end": "1916399"
  },
  {
    "text": "look up the ip of the pod you'll get the dns name of the headless",
    "start": "1916399",
    "end": "1921760"
  },
  {
    "text": "service that's that that pod is backing of course there's more than one i don't know what we do yeah",
    "start": "1921760",
    "end": "1927360"
  },
  {
    "text": "and restarting sometimes i've seen restarting the core dns server makes it appear",
    "start": "1927360",
    "end": "1932840"
  },
  {
    "text": "and that shouldn't be the case but we can maybe talk offline and see if somebody",
    "start": "1932840",
    "end": "1938320"
  },
  {
    "text": "else has a question any other questions",
    "start": "1938320",
    "end": "1945518"
  },
  {
    "text": "you know is it possible as a policy to forbid a kubernetes team space from",
    "start": "1945919",
    "end": "1951919"
  },
  {
    "text": "queering entry of services in northern space can we write this kind of policy",
    "start": "1951919",
    "end": "1958399"
  },
  {
    "text": "sorry i'm sorry i couldn't follow it sorry yeah",
    "start": "1958399",
    "end": "1963600"
  },
  {
    "text": "is it possible to uh write a policy to say that the kubernetes namespace cannot",
    "start": "1963600",
    "end": "1969120"
  },
  {
    "text": "make dns requests to know about services in other namespace okay there is a um",
    "start": "1969120",
    "end": "1976320"
  },
  {
    "text": "an external plug-in called well",
    "start": "1976320",
    "end": "1981440"
  },
  {
    "text": "at one point in the kubernetes plug-in we had a configurable option for i believe naming specific namespaces for",
    "start": "1982159",
    "end": "1988480"
  },
  {
    "text": "which we produce records but i'm not sure if we had one for excluding them we would have to check",
    "start": "1988480",
    "end": "1994159"
  },
  {
    "text": "but we do have a policy external plug-in that's the one i was showing we",
    "start": "1994159",
    "end": "2000399"
  },
  {
    "text": "called it firewall was directive but policy is the plugin that lets you do",
    "start": "2000399",
    "end": "2006320"
  },
  {
    "text": "do a little more with that but that's certainly a very feasible",
    "start": "2006320",
    "end": "2012720"
  },
  {
    "text": "functionality to add where i'm hesitant is i don't want to add a bunch of stuff to kubernetes it's",
    "start": "2012720",
    "end": "2018640"
  },
  {
    "text": "already got a bazillion options that plug in but we can potentially use it to do it with the um",
    "start": "2018640",
    "end": "2024799"
  },
  {
    "text": "with the policy plugin come talk to me afterwards we'll take a",
    "start": "2024799",
    "end": "2030480"
  },
  {
    "text": "look",
    "start": "2030480",
    "end": "2033480"
  },
  {
    "text": "so my question is like we use a lot of external services in our cluster",
    "start": "2037039",
    "end": "2043440"
  },
  {
    "text": "and because of how n dots work and the way the search search works we end up making a lot of",
    "start": "2043440",
    "end": "2051040"
  },
  {
    "text": "queries and we can see that nx domain errors so is there a way to",
    "start": "2051040",
    "end": "2056638"
  },
  {
    "text": "make sure that for a rejects a particular rejects like azure or something we can",
    "start": "2056639",
    "end": "2062960"
  },
  {
    "text": "make the coordinates a little bit smarter so that doesn't search for those domains okay okay so so you're saying",
    "start": "2062960",
    "end": "2070158"
  },
  {
    "text": "like uh you have consensual waste according to accordion constantly occurring let's say back in like a draw",
    "start": "2070159",
    "end": "2076638"
  },
  {
    "text": "like a google cloud or officer is that the question yes so we make unnecessary",
    "start": "2076639",
    "end": "2081760"
  },
  {
    "text": "dns requests because of how n dots work okay okay so first first first of all i",
    "start": "2081760",
    "end": "2087760"
  },
  {
    "text": "want to mention one thing you know like dns everyone know thing is simple so okay it's dns protocol which is udp",
    "start": "2087760",
    "end": "2094560"
  },
  {
    "text": "what's the old stuff but the dns is one very important feature dns is massively",
    "start": "2094560",
    "end": "2100079"
  },
  {
    "text": "scalable your whole internet is because it supports the whole internet right that's a lot of people",
    "start": "2100079",
    "end": "2106480"
  },
  {
    "text": "talking about distributed systems they didn't realize that dns by itself is a distributed system how dns is able to",
    "start": "2106480",
    "end": "2112320"
  },
  {
    "text": "handle that dns when you support the internet it's through caching at different levels so you do need the",
    "start": "2112320",
    "end": "2118000"
  },
  {
    "text": "caching right that and also there's one thing that's one thing the caching another thing is",
    "start": "2118000",
    "end": "2123920"
  },
  {
    "text": "reliable translation at the different uh you know cache levels for example",
    "start": "2123920",
    "end": "2129280"
  },
  {
    "text": "that's why we we mentioned about the dns over here as dns or grpc and why we",
    "start": "2129280",
    "end": "2135280"
  },
  {
    "text": "mentioned about connecting to dns to let's say a draw with with a joy api",
    "start": "2135280",
    "end": "2140560"
  },
  {
    "text": "because that's going to be more reliable but caching is the most important thing like when we talk about",
    "start": "2140560",
    "end": "2147040"
  },
  {
    "text": "no longer yeah yeah no no local cache will probably help with that because it caches the",
    "start": "2147040",
    "end": "2152320"
  },
  {
    "text": "negative responses i think what you're talking about is the search list so in in dns the client side resolver sitting",
    "start": "2152320",
    "end": "2159760"
  },
  {
    "text": "on your node or in your pod um when you when you ask for for for",
    "start": "2159760",
    "end": "2167119"
  },
  {
    "text": "say google.com the kubernetes has configured",
    "start": "2167119",
    "end": "2172880"
  },
  {
    "text": "a um a list of names that it tries because you didn't qualify fully with a dot on",
    "start": "2172880",
    "end": "2179599"
  },
  {
    "text": "the end so the first thing is if you control those names just put a dot on the end and the problem goes away okay",
    "start": "2179599",
    "end": "2186320"
  },
  {
    "text": "but you can't really get people to do that because people don't do it so we have we actually implemented a",
    "start": "2186320",
    "end": "2192160"
  },
  {
    "text": "feature a few years ago specifically to to address this problem um",
    "start": "2192160",
    "end": "2197920"
  },
  {
    "text": "there's some gotchas with it though first of all it means you need to you need to watch pods",
    "start": "2197920",
    "end": "2203839"
  },
  {
    "text": "because in order to make it work we have to figure out which namespace the pod making the request is in in order to",
    "start": "2203839",
    "end": "2210960"
  },
  {
    "text": "understand its search path and so um and there's a race condition if the pod comes up and we don't get",
    "start": "2210960",
    "end": "2216960"
  },
  {
    "text": "notified fast enough about the pod then internally we can run into a problem where we can't preemptively",
    "start": "2216960",
    "end": "2222800"
  },
  {
    "text": "figure out your search path so it's it's a less than perfect solution",
    "start": "2222800",
    "end": "2228560"
  },
  {
    "text": "um to that problem the node local dns cache probably will help you because i believe it will cache those negative responses",
    "start": "2228560",
    "end": "2234960"
  },
  {
    "text": "so they will never leave the machine that they'll leave the node but um yeah it's unfortunately",
    "start": "2234960",
    "end": "2242720"
  },
  {
    "text": "not a fully solved problem um and you know",
    "start": "2242720",
    "end": "2247920"
  },
  {
    "text": "that's probably your best option okay i think we're out of time i mean i'm willing to do one more question if",
    "start": "2247920",
    "end": "2254079"
  },
  {
    "text": "people have one but i think that's it all right thank you everybody okay",
    "start": "2254079",
    "end": "2259760"
  },
  {
    "text": "okay [Applause]",
    "start": "2259760",
    "end": "2264329"
  }
]