[
  {
    "start": "0",
    "end": "30000"
  },
  {
    "text": "all right welcome everyone sounds like this is working glad to have you here at",
    "start": "30",
    "end": "6390"
  },
  {
    "text": "extending kubernetes 101 I'm Travis Nielson I'm a developer for",
    "start": "6390",
    "end": "11610"
  },
  {
    "text": "quantum corporation working on the rook project I've been working with custom",
    "start": "11610",
    "end": "17670"
  },
  {
    "text": "resources and kubernetes for about the past year while working in on rook so I'll tell you some about my journey",
    "start": "17670",
    "end": "23490"
  },
  {
    "text": "along the way and and then we'll it will walk through some some examples here",
    "start": "23490",
    "end": "28830"
  },
  {
    "text": "about getting started alright well first of all this is really the first talk after a great keynote this morning by",
    "start": "28830",
    "end": "35430"
  },
  {
    "start": "30000",
    "end": "85000"
  },
  {
    "text": "yen on extensibility what you can do with it in kubernetes so I encourage you",
    "start": "35430",
    "end": "40950"
  },
  {
    "text": "to look at these other talks today if you don't didn't learn what you need to from this presentation there's lots of other opportunity today so a lot of",
    "start": "40950",
    "end": "48809"
  },
  {
    "text": "great talks that I hope to go to as well so agenda since this is a 101 course I",
    "start": "48809",
    "end": "57329"
  },
  {
    "text": "wanted to start off by well why would you want to extend kubernetes and then how would it happen what are the",
    "start": "57329",
    "end": "63719"
  },
  {
    "text": "patterns surrounding kubernetes and and then let's just get right into the code",
    "start": "63719",
    "end": "69240"
  },
  {
    "text": "you know that's what I do for my day job I write code and so that's why I want to work through my slides pretty quickly so",
    "start": "69240",
    "end": "76950"
  },
  {
    "text": "we can get to that that demo at the end if we have a couple minutes for Q&A I'll",
    "start": "76950",
    "end": "81990"
  },
  {
    "text": "look forward to your questions first of all the most important pattern that I",
    "start": "81990",
    "end": "90000"
  },
  {
    "start": "85000",
    "end": "112000"
  },
  {
    "text": "believe kubernetes has gotten right and why it's successful is because resources are declarative if you want to create",
    "start": "90000",
    "end": "96630"
  },
  {
    "text": "something you say you know I'm going to just declare it there's no code required",
    "start": "96630",
    "end": "102000"
  },
  {
    "text": "you defined your your manifest in Y Amal usually and kubernetes will go create it",
    "start": "102000",
    "end": "107909"
  },
  {
    "text": "for you you know for example you want to",
    "start": "107909",
    "end": "114479"
  },
  {
    "start": "112000",
    "end": "130000"
  },
  {
    "text": "create a namespace you say I'm gonna create a namespace it's kind is this and it's named as this okay simple you can't",
    "start": "114479",
    "end": "122460"
  },
  {
    "text": "get much simpler than that any kind of resource you want to create in kubernetes you can do with a",
    "start": "122460",
    "end": "128429"
  },
  {
    "text": "declaration another example a pod you know",
    "start": "128429",
    "end": "133590"
  },
  {
    "start": "130000",
    "end": "168000"
  },
  {
    "text": "pod is the most basic resource that allows you to run code in kubernetes any application you want",
    "start": "133590",
    "end": "139470"
  },
  {
    "text": "so I say I've got a pod here's my container and here's the image you want to run in this case my hello world 1.0",
    "start": "139470",
    "end": "148879"
  },
  {
    "text": "container and boom you have a container kubernetes goes and starts it for you so",
    "start": "148879",
    "end": "155430"
  },
  {
    "text": "then you start to ask the question well what happens if I want to run my own type of thing what do I do",
    "start": "155430",
    "end": "160500"
  },
  {
    "text": "well I can create a pod that goes and runs my application but what if I want to declare my own type of resource what",
    "start": "160500",
    "end": "167310"
  },
  {
    "text": "do I do well kubernetes the creative team has done a great job of making this very",
    "start": "167310",
    "end": "172620"
  },
  {
    "start": "168000",
    "end": "217000"
  },
  {
    "text": "natural and a very integrated thing so they have this concept called custom resources CR DS which you can define and",
    "start": "172620",
    "end": "182310"
  },
  {
    "text": "we'll follow exactly the same pattern as in kubernetes last years I was working",
    "start": "182310",
    "end": "188459"
  },
  {
    "text": "with custom resources known as third-party resources at the time I felt like I had this light come on like oh",
    "start": "188459",
    "end": "195060"
  },
  {
    "text": "that's what they're for I can define my own types and I can go write code that",
    "start": "195060",
    "end": "201870"
  },
  {
    "text": "backs it up but fundamentally I get resources in kubernetes that are my type",
    "start": "201870",
    "end": "207090"
  },
  {
    "text": "that anybody else can use and they're treated the same as any other type or resource in kubernetes yeah big light",
    "start": "207090",
    "end": "215280"
  },
  {
    "text": "that came on for me so there are lots of it's it's a pretty new concept as far as",
    "start": "215280",
    "end": "222750"
  },
  {
    "start": "217000",
    "end": "307000"
  },
  {
    "text": "you know how plugging into kubernetes and last year khoob khun a couple of",
    "start": "222750",
    "end": "229079"
  },
  {
    "text": "examples were announced the etsy d operator was one of those and that's the first example that I found for for",
    "start": "229079",
    "end": "236130"
  },
  {
    "text": "custom resources so I just thought I'd start there what does that look like and why do they create it so I went to their",
    "start": "236130",
    "end": "241739"
  },
  {
    "text": "github page and an extract they're an example of their CRD so just some things",
    "start": "241739",
    "end": "248099"
  },
  {
    "text": "to point out from from this example you see okay they've defined an API version",
    "start": "248099",
    "end": "254040"
  },
  {
    "text": "that whoops is it's just it's their own they define okay they're from core OS",
    "start": "254040",
    "end": "259680"
  },
  {
    "text": "comm they've they define their version v 1 beta 2 they've got their own kind it's",
    "start": "259680",
    "end": "266130"
  },
  {
    "text": "a net CD cluster and but when you create this thing now",
    "start": "266130",
    "end": "271319"
  },
  {
    "text": "me as the user I get to decide well what's my etsy D cluster called I give it a name and these other properties in",
    "start": "271319",
    "end": "278460"
  },
  {
    "text": "here are very specific to the FC D cluster you want three of their Etsy DS",
    "start": "278460",
    "end": "285210"
  },
  {
    "text": "servers and here's what version and now their Etsy D operator is going to go orchestrate the sed cluster for you you",
    "start": "285210",
    "end": "293819"
  },
  {
    "text": "declare it and then they go make it happen and as a consumer of an Etsy D",
    "start": "293819",
    "end": "299249"
  },
  {
    "text": "cluster you say wow this is great it's all integrated and kubernetes in a way that I would expect another example",
    "start": "299249",
    "end": "308789"
  },
  {
    "start": "307000",
    "end": "341000"
  },
  {
    "text": "Prometheus follows the same pattern they have a Prometheus operator that goes and",
    "start": "308789",
    "end": "314129"
  },
  {
    "text": "applies these things I kind of truncated it ran ran out of some room here but",
    "start": "314129",
    "end": "319289"
  },
  {
    "text": "again everything down here in the spec section the bottom half of the the operator or the yeah Mille there that's",
    "start": "319289",
    "end": "326610"
  },
  {
    "text": "all something that the Prometheus team decided hey we need these properties we'll specify them our operator will go",
    "start": "326610",
    "end": "333990"
  },
  {
    "text": "act on them but you the user don't have to write any code it's just a simple declaration on the rook team again same",
    "start": "333990",
    "end": "344219"
  },
  {
    "text": "pattern we define our own type we have a cluster and our own properties which I",
    "start": "344219",
    "end": "349710"
  },
  {
    "text": "won't get into today so we can get into the sample but really that's the point",
    "start": "349710",
    "end": "354779"
  },
  {
    "text": "we have properties you define them you declare them and then the code behind it",
    "start": "354779",
    "end": "361680"
  },
  {
    "text": "worries all about it and treats them as Cooper native these sources for you so",
    "start": "361680",
    "end": "368879"
  },
  {
    "text": "as an example where we were with rook as we are working on this distributed data platform it's a hard problem to solve",
    "start": "368879",
    "end": "375839"
  },
  {
    "text": "and and we realized well we need deployment in a way that Cooper neighs",
    "start": "375839",
    "end": "382379"
  },
  {
    "text": "didn't quite satisfy it we need monitoring we need to monitor our our",
    "start": "382379",
    "end": "389460"
  },
  {
    "text": "cluster to make sure your data is safe we need failover that needs to happen a",
    "start": "389460",
    "end": "395039"
  },
  {
    "text": "certain way we need upgrade you know when you have data that needs to be upgraded the data path",
    "start": "395039",
    "end": "400950"
  },
  {
    "text": "kubernetes just doesn't know anything about those details so this we we were able to answer all these questions by",
    "start": "400950",
    "end": "407760"
  },
  {
    "text": "using the custom resource patterns and then operator to back that up so a",
    "start": "407760",
    "end": "413310"
  },
  {
    "start": "413000",
    "end": "488000"
  },
  {
    "text": "traditional approach and actually where I started was oh well how would I do this well I'll just start a pod it'll",
    "start": "413310",
    "end": "419730"
  },
  {
    "text": "run my service I'll implement it as a REST API so create my REST API great now",
    "start": "419730",
    "end": "427980"
  },
  {
    "text": "I have a service endpoint where whoever needs to configure my service",
    "start": "427980",
    "end": "434280"
  },
  {
    "text": "they can connect to that and they can call my my rest endpoints and okay they",
    "start": "434280",
    "end": "439770"
  },
  {
    "text": "can manage it but then it start to think wait a minute it's not integrated with",
    "start": "439770",
    "end": "445020"
  },
  {
    "text": "the kubernetes api or coop cuddle you know how how how would they how do they",
    "start": "445020",
    "end": "451440"
  },
  {
    "text": "create my resource well it's they have to go to the rest endpoint and that's just not a native kubernetes way of",
    "start": "451440",
    "end": "457020"
  },
  {
    "text": "doing it other things like security come up well what if I want to secure my REST API",
    "start": "457020",
    "end": "462450"
  },
  {
    "text": "well now I have to go set up do I have to set up certificates to get an HTTP endpoint you know what why can't",
    "start": "462450",
    "end": "470370"
  },
  {
    "text": "I just use our back security and do it the the kubernetes way so the",
    "start": "470370",
    "end": "475740"
  },
  {
    "text": "traditional approach for us at least it wasn't a good fit we wanted to manage kubernetes resources and you know this",
    "start": "475740",
    "end": "485160"
  },
  {
    "text": "just didn't cut us cut it for us so instead of the traditional approach the",
    "start": "485160",
    "end": "490830"
  },
  {
    "start": "488000",
    "end": "547000"
  },
  {
    "text": "extension of approach where kubernetes just makes it makes it natural so",
    "start": "490830",
    "end": "496560"
  },
  {
    "text": "they're designed from the ground up to say hey this is part of kubernetes they're building it looks like feels",
    "start": "496560",
    "end": "502860"
  },
  {
    "text": "like smells like built-in resources again CRTs use a declarative state and",
    "start": "502860",
    "end": "509940"
  },
  {
    "text": "what that means is that if I have a llamo file I can say coop cat I'll create my cluster mo and it'll be",
    "start": "509940",
    "end": "519840"
  },
  {
    "text": "created if I want to change the specification the properties that are in",
    "start": "519840",
    "end": "525690"
  },
  {
    "text": "that llamo file I can well I can do it with coop cuddle edit or you know however I added edit my",
    "start": "525690",
    "end": "532390"
  },
  {
    "text": "yeah no files when I'm done I can delete the thing and I can use the name the",
    "start": "532390",
    "end": "539620"
  },
  {
    "text": "proper name of my object I can say delete my cluster and it'll be gone so",
    "start": "539620",
    "end": "547360"
  },
  {
    "start": "547000",
    "end": "578000"
  },
  {
    "text": "simple right the but the power in this is that it's",
    "start": "547360",
    "end": "553150"
  },
  {
    "text": "your custom resources can be consistent across all of kubernetes if you want to be taken seriously be consistent so that",
    "start": "553150",
    "end": "561040"
  },
  {
    "text": "means all the tools whether it's cube cuddle or helm whether it's the client go API whether it's security and and you",
    "start": "561040",
    "end": "569140"
  },
  {
    "text": "know any other endless number of tools and kubernetes it's going to be consistent with with how that works so",
    "start": "569140",
    "end": "577200"
  },
  {
    "start": "578000",
    "end": "643000"
  },
  {
    "text": "again we've already talked about this basically it's declarative and behind",
    "start": "579090",
    "end": "584230"
  },
  {
    "text": "each of these resources there's a controller in kubernetes the controller is what makes it happen and yen this",
    "start": "584230",
    "end": "591010"
  },
  {
    "text": "morning talked about this you had a much much prettier picture than me but basically the controller sits there and",
    "start": "591010",
    "end": "598210"
  },
  {
    "text": "it observes for what you want to happen or it waits for you to declare your your",
    "start": "598210",
    "end": "603550"
  },
  {
    "text": "manifest files the controller will see when you create it it will analyze oh",
    "start": "603550",
    "end": "608800"
  },
  {
    "text": "what do you want to change in your cluster and then it will go ahead and act and apply changes in the cluster",
    "start": "608800",
    "end": "616540"
  },
  {
    "text": "whether you want to you know add a new resource whether you want to update it whether you want to remove that that",
    "start": "616540",
    "end": "622120"
  },
  {
    "text": "resource that is the controller's job to make that happen all right so so that's",
    "start": "622120",
    "end": "628180"
  },
  {
    "text": "the basic kubernetes pattern that then we'll go through for custom resources so",
    "start": "628180",
    "end": "634030"
  },
  {
    "text": "I want to walk through what does it take to write code and get a sample operator",
    "start": "634030",
    "end": "640000"
  },
  {
    "text": "and custom resource running the first thing we're going to do is so define you",
    "start": "640000",
    "end": "649930"
  },
  {
    "start": "643000",
    "end": "715000"
  },
  {
    "text": "need to design your thing what what properties do you want in your custom resource second you think well you know",
    "start": "649930",
    "end": "658810"
  },
  {
    "text": "how can clients consume my resource you know with the I live in you know",
    "start": "658810",
    "end": "665820"
  },
  {
    "text": "golang land I want clients to be able to use the client go API and you",
    "start": "665820",
    "end": "671130"
  },
  {
    "text": "strongly-typed think you know Starling type API to say you know get or list or delete my",
    "start": "671130",
    "end": "679710"
  },
  {
    "text": "objects all with that so there are in kubernetes 1.8 actually the kubernetes",
    "start": "679710",
    "end": "684930"
  },
  {
    "text": "team created this tool that will generate code for your CR DS so that you",
    "start": "684930",
    "end": "691500"
  },
  {
    "text": "will have strongly-typed resources so i'll get to that in a minute to show you what you know what that takes or what",
    "start": "691500",
    "end": "697680"
  },
  {
    "text": "that looks like so that you generated code it's wonderful it makes it feel",
    "start": "697680",
    "end": "704010"
  },
  {
    "text": "again like kubernetes and you know the kubernetes types inside",
    "start": "704010",
    "end": "709350"
  },
  {
    "text": "the built-in types use these same code generators as I understand so the third",
    "start": "709350",
    "end": "716580"
  },
  {
    "start": "715000",
    "end": "800000"
  },
  {
    "text": "step after you've defined and generated some code you depending on how you want",
    "start": "716580",
    "end": "722700"
  },
  {
    "text": "to act or what changes you want to make in your cluster with your resources you will need to develop your custom",
    "start": "722700",
    "end": "728250"
  },
  {
    "text": "controller or also known as an operator so we there's three basic steps to",
    "start": "728250",
    "end": "736410"
  },
  {
    "text": "implement you need to first register the CRD with kubernetes so that it knows",
    "start": "736410",
    "end": "741630"
  },
  {
    "text": "that this controller will be watching and applying these changes you need to",
    "start": "741630",
    "end": "747390"
  },
  {
    "text": "implement three simple methods for add update and delete and then you know you",
    "start": "747390",
    "end": "755490"
  },
  {
    "text": "start watching the CRD tell kubernetes hey i'm ready to be notified when",
    "start": "755490",
    "end": "760980"
  },
  {
    "text": "there's a change here when you create update or or delete anything alright",
    "start": "760980",
    "end": "767850"
  },
  {
    "text": "when you're done writing code of course you need to build it and that means in",
    "start": "767850",
    "end": "774300"
  },
  {
    "text": "my case build a go binary as shown shown this morning in the keynote you can also",
    "start": "774300",
    "end": "780030"
  },
  {
    "text": "do it in other languages on my demo will all be about the the going implementation but the so you build your",
    "start": "780030",
    "end": "788430"
  },
  {
    "text": "binary you create a doctor container with it and then we'll need to run that so once you've",
    "start": "788430",
    "end": "796140"
  },
  {
    "text": "built it what comes next at runtime first of all since it is it is a pod",
    "start": "796140",
    "end": "804750"
  },
  {
    "start": "800000",
    "end": "838000"
  },
  {
    "text": "that you will need to run a controller though we will define its manifest it will have some are back rules that say",
    "start": "804750",
    "end": "810770"
  },
  {
    "text": "hey I need to access kubernetes resources depending on what your",
    "start": "810770",
    "end": "816420"
  },
  {
    "text": "operator is going to do if it if it's going to be creating other namespaces or",
    "start": "816420",
    "end": "822690"
  },
  {
    "text": "pods or replica sets it just needs to declare that so coober days will will",
    "start": "822690",
    "end": "829620"
  },
  {
    "text": "allow the operator to do that role bindings define the basic manifest",
    "start": "829620",
    "end": "838370"
  },
  {
    "start": "838000",
    "end": "874000"
  },
  {
    "text": "second go ahead and run the operator it's a simple coop cuddle creep command no new pattern there and then when",
    "start": "838370",
    "end": "845730"
  },
  {
    "text": "you're ready to actually create one of your custom resources you just say coop",
    "start": "845730",
    "end": "850770"
  },
  {
    "text": "cuddle create your llamo file all right so let's jump right into what you know",
    "start": "850770",
    "end": "858210"
  },
  {
    "text": "what all this code looks like we will exit the slides and get to the fun part",
    "start": "858210",
    "end": "865100"
  },
  {
    "text": "alright dismiss all right that big enough okay all right we have",
    "start": "865100",
    "end": "875610"
  },
  {
    "start": "874000",
    "end": "925000"
  },
  {
    "text": "our sample manifest for the the simplest HelloWorld CRT that I can come up with",
    "start": "875610",
    "end": "884029"
  },
  {
    "text": "so you get you see all that you know the properties here that that you get to",
    "start": "884029",
    "end": "889319"
  },
  {
    "text": "define so this is my project I oh that's my project name I can",
    "start": "889319",
    "end": "894630"
  },
  {
    "text": "declare what version this is a the very first thing so we call it alpha I'm",
    "start": "894630",
    "end": "902310"
  },
  {
    "text": "gonna call it sample you can call it anything you want we'll call it sample",
    "start": "902310",
    "end": "907500"
  },
  {
    "text": "and then the name of this instance I want to create in my sample and then the",
    "start": "907500",
    "end": "914399"
  },
  {
    "text": "interesting part though is when you get down to the spec so in the spec we get to define any properties here that we",
    "start": "914399",
    "end": "920430"
  },
  {
    "text": "want to consume in our CRD hello world",
    "start": "920430",
    "end": "925699"
  },
  {
    "start": "925000",
    "end": "961000"
  },
  {
    "text": "alright let's change this a little bit to make it a little more interesting I don't want to say hello world let's say",
    "start": "925699",
    "end": "931949"
  },
  {
    "text": "hello coupe con we're here and well we still need a world property so our world",
    "start": "931949",
    "end": "938069"
  },
  {
    "text": "is Austin for the day alright so we've defined a simple simple",
    "start": "938069",
    "end": "944189"
  },
  {
    "text": "llamo file but in this spec you can have any any sort of structures complex",
    "start": "944189",
    "end": "950430"
  },
  {
    "text": "structures lists of things you know this is completely flexible as far as what you can do what if you can do it with a",
    "start": "950430",
    "end": "956639"
  },
  {
    "text": "yamo file you should be able to put it in the spec all right so now that we",
    "start": "956639",
    "end": "963509"
  },
  {
    "start": "961000",
    "end": "976000"
  },
  {
    "text": "have our spec we need to get into the land of code I'm going to switch over to go Ling and see how this translates into",
    "start": "963509",
    "end": "971759"
  },
  {
    "text": "go code oops okay I'm going to switch over and by the",
    "start": "971759",
    "end": "979259"
  },
  {
    "start": "976000",
    "end": "989000"
  },
  {
    "text": "way all this code that I'm walking through you can find on our github and",
    "start": "979259",
    "end": "984899"
  },
  {
    "text": "I'll have a link to it later for this sample resource so we go up to types go",
    "start": "984899",
    "end": "991439"
  },
  {
    "start": "989000",
    "end": "1025000"
  },
  {
    "text": "so types dot go now you see this sample spec here these are all the properties",
    "start": "991439",
    "end": "998149"
  },
  {
    "text": "on the go side that I need to read from the the file okay so we had hello now I changed",
    "start": "998149",
    "end": "1006320"
  },
  {
    "text": "it from the original sample so if I want to deserialize that world property that I added now I have to add world and it's",
    "start": "1006320",
    "end": "1014090"
  },
  {
    "text": "going to be of type string and if I want to deserialize it it's called world in",
    "start": "1014090",
    "end": "1020390"
  },
  {
    "text": "the yam oh and if I put the quotes all correctly there we go all right so we",
    "start": "1020390",
    "end": "1026510"
  },
  {
    "text": "have our two properties hello and world loops and that's all I need to get them",
    "start": "1026510",
    "end": "1035089"
  },
  {
    "text": "into the land of go now there are some other things surrounding this that will",
    "start": "1035089",
    "end": "1040819"
  },
  {
    "start": "1037000",
    "end": "1076000"
  },
  {
    "text": "be used that you need to declare so the for the code generation as well so let's",
    "start": "1040820",
    "end": "1046010"
  },
  {
    "text": "look at that now so the spec is contained by our sample type so this",
    "start": "1046010",
    "end": "1051020"
  },
  {
    "text": "sample is the same name as as what we saw at the top of our our CRD ml file so",
    "start": "1051020",
    "end": "1057260"
  },
  {
    "text": "the sample has to define a couple of standard properties the type meta and",
    "start": "1057260",
    "end": "1063350"
  },
  {
    "text": "object maida that's what brings us in the name and namespace properties and and some other things and then of course",
    "start": "1063350",
    "end": "1070550"
  },
  {
    "text": "the spec is what we what contains our hello world properties above the sample",
    "start": "1070550",
    "end": "1078130"
  },
  {
    "start": "1076000",
    "end": "1129000"
  },
  {
    "text": "these Jen client and deep copy attributes are what we need to add to",
    "start": "1078130",
    "end": "1084320"
  },
  {
    "text": "our sample struct so that we can run the code generation tools to generate the",
    "start": "1084320",
    "end": "1089870"
  },
  {
    "text": "strongly typed objects for people to consume from the client go client",
    "start": "1089870",
    "end": "1097000"
  },
  {
    "text": "alright so that you know that's pretty much it down here there is a sample list see RDS",
    "start": "1097000",
    "end": "1105880"
  },
  {
    "text": "another pattern with them is that you can create any number of them so so that",
    "start": "1105880",
    "end": "1111230"
  },
  {
    "text": "you can list them we have a simple list type with some items in them and again",
    "start": "1111230",
    "end": "1116420"
  },
  {
    "text": "for cogeneration you need to be able to deep copy them and that's that's pretty",
    "start": "1116420",
    "end": "1121550"
  },
  {
    "text": "much it we have our types defined with the cogeneration attributes so what's",
    "start": "1121550",
    "end": "1128570"
  },
  {
    "text": "next for cogeneration purposes there's as docto which says what our group name is",
    "start": "1128570",
    "end": "1135070"
  },
  {
    "text": "that might be kind of hard to see in the the gray there but it's called so my project for for generating the the",
    "start": "1135070",
    "end": "1142930"
  },
  {
    "text": "package name on things but one line of code simple if we didn't have these",
    "start": "1142930",
    "end": "1148950"
  },
  {
    "text": "copyrights at the top it'd be a lot shorter now let's see in this file we",
    "start": "1148950",
    "end": "1155170"
  },
  {
    "text": "have about sixty lines of code so a little bit more just to show what it takes to register so we've defined our",
    "start": "1155170",
    "end": "1161800"
  },
  {
    "text": "CR D now what does it take to register our type now in this library that that",
    "start": "1161800",
    "end": "1169270"
  },
  {
    "text": "we've got a simple library that lets you define custom resources and register them it takes all these properties that",
    "start": "1169270",
    "end": "1177910"
  },
  {
    "text": "you saw in the yamo file will will be defined here and so it's named a sample",
    "start": "1177910",
    "end": "1184890"
  },
  {
    "text": "when you have multiple of them you're listing them you need the plural name samples our group name my project at i/o",
    "start": "1184890",
    "end": "1192070"
  },
  {
    "text": "our version alpha yep those are all the properties that that we need for our custom",
    "start": "1192070",
    "end": "1197860"
  },
  {
    "text": "resource so the operator kit now will register those for us I don't have time",
    "start": "1197860",
    "end": "1204370"
  },
  {
    "text": "really to dig in and there's just kind of some framework around here these other few lines of code that you can go",
    "start": "1204370",
    "end": "1209740"
  },
  {
    "text": "refer to on the github later but basically you know we register these two",
    "start": "1209740",
    "end": "1216310"
  },
  {
    "text": "types sample and sample list and kubernetes will know away we go now in",
    "start": "1216310",
    "end": "1225220"
  },
  {
    "start": "1224000",
    "end": "1232000"
  },
  {
    "text": "our sample project here we have two other go files so after those simple",
    "start": "1225220",
    "end": "1230830"
  },
  {
    "text": "ones so we've got main go we'll just",
    "start": "1230830",
    "end": "1236170"
  },
  {
    "start": "1232000",
    "end": "1271000"
  },
  {
    "text": "start from the top I mean now go is going to create a context first of all",
    "start": "1236170",
    "end": "1243690"
  },
  {
    "text": "so the sample client set is what was generated by our buyer code generator",
    "start": "1243690",
    "end": "1252780"
  },
  {
    "text": "okay if I look down here this code for sample client new for config this was",
    "start": "1252780",
    "end": "1260530"
  },
  {
    "text": "generated by the code generator and I'll go I'll go generate that code",
    "start": "1260530",
    "end": "1266410"
  },
  {
    "text": "actually in a minute after we see the basic code that we had to write to get this going so after the context we go",
    "start": "1266410",
    "end": "1274480"
  },
  {
    "start": "1271000",
    "end": "1288000"
  },
  {
    "text": "ahead and ask our operator kit to create custom resources so this takes our sample resource and registers it until",
    "start": "1274480",
    "end": "1284050"
  },
  {
    "text": "scrip enemies hey I'm listening for this object and now some basic things to",
    "start": "1284050",
    "end": "1291130"
  },
  {
    "text": "watch for signals in the pod to manage the the pod lifecycle but then the",
    "start": "1291130",
    "end": "1296620"
  },
  {
    "text": "important part is okay let's watch for watch for the custom resource so this if",
    "start": "1296620",
    "end": "1304330"
  },
  {
    "text": "I jump into this and you see I'm gonna watch all namespaces for for our new",
    "start": "1304330",
    "end": "1310360"
  },
  {
    "text": "resource so when I tell cam raise I want",
    "start": "1310360",
    "end": "1316090"
  },
  {
    "text": "to start watching well we say I've got some handler functions I've got an ADD method I've got an update I've got a",
    "start": "1316090",
    "end": "1322300"
  },
  {
    "text": "delete okay so here there'll be below here implemented I've got a strong rest",
    "start": "1322300",
    "end": "1330250"
  },
  {
    "text": "client I'm going to this is the one that was generated and I'm going to watch",
    "start": "1330250",
    "end": "1336460"
  },
  {
    "text": "this resource so I tell tell go ok I'm ready to watch this watch my sample now",
    "start": "1336460",
    "end": "1346060"
  },
  {
    "start": "1345000",
    "end": "1407000"
  },
  {
    "text": "to make it a simple hello world application when I add the resource I'm",
    "start": "1346060",
    "end": "1354160"
  },
  {
    "text": "gonna call this helper deep copy and all I'm gonna do is simply can't get much simpler than just printing to the console or printing it to a log file ok",
    "start": "1354160",
    "end": "1362260"
  },
  {
    "text": "so I add the sample with hello equals whatever so just a simple go formatted",
    "start": "1362260",
    "end": "1367690"
  },
  {
    "text": "string since I added the world property I'll go ahead and add world equals percent s and that will print the value",
    "start": "1367690",
    "end": "1376990"
  },
  {
    "text": "of what's in the world with the go formatting I also need to say oh yeah",
    "start": "1376990",
    "end": "1382330"
  },
  {
    "text": "give me the spec and the world and the code completion finds that",
    "start": "1382330",
    "end": "1389790"
  },
  {
    "text": "okay so ad will basically just print the values of what I just added now in a",
    "start": "1390640",
    "end": "1396710"
  },
  {
    "text": "real operator I would want to you know go make some change in the cluster I would want to go start some pods start",
    "start": "1396710",
    "end": "1402890"
  },
  {
    "text": "you know create whatever communities resources I need to create now update is",
    "start": "1402890",
    "end": "1408920"
  },
  {
    "start": "1407000",
    "end": "1431000"
  },
  {
    "text": "just gonna be something similar it's going to update update from some old to some new value and delete again will",
    "start": "1408920",
    "end": "1416299"
  },
  {
    "text": "just print the message very simple basic thing to get us going all right so let's",
    "start": "1416299",
    "end": "1422900"
  },
  {
    "text": "go actually get this running so I'm gonna go to the command line and sorry",
    "start": "1422900",
    "end": "1431480"
  },
  {
    "start": "1431000",
    "end": "1463000"
  },
  {
    "text": "before I go there that we need to generate the code so to generate the code there's a code generator in",
    "start": "1431480",
    "end": "1437360"
  },
  {
    "text": "kubernetes IO repo where it's going to take the parameters or take tell me the",
    "start": "1437360",
    "end": "1444110"
  },
  {
    "text": "the package name that I want to generate so I'm going to generate my strongly typed client resources in this client",
    "start": "1444110",
    "end": "1450169"
  },
  {
    "text": "package I'm going to generate some deep copy methods into this api's package and",
    "start": "1450169",
    "end": "1456500"
  },
  {
    "text": "that's where it finds the types that I've defined and I want it to be a type V 1 alpha one okay so let's run this so",
    "start": "1456500",
    "end": "1465530"
  },
  {
    "start": "1463000",
    "end": "1489000"
  },
  {
    "text": "code code gin will run pretty quickly",
    "start": "1465530",
    "end": "1470590"
  },
  {
    "text": "generate the deep copy functions the client set solicitor's The Informers and",
    "start": "1470590",
    "end": "1476020"
  },
  {
    "text": "now we have generated code if I go look at my project again we've got a few new",
    "start": "1476020",
    "end": "1481880"
  },
  {
    "text": "files highlighted in green here let's see if I expand this a little bit you",
    "start": "1481880",
    "end": "1487100"
  },
  {
    "text": "see this deep copy go all generated and",
    "start": "1487100",
    "end": "1492260"
  },
  {
    "text": "the client set that's generated if I just glanced quickly into some of these files you'll see we've got a sample dot",
    "start": "1492260",
    "end": "1500720"
  },
  {
    "text": "go and it has all these generated this interface and the implementation for",
    "start": "1500720",
    "end": "1505970"
  },
  {
    "text": "them so that can create update delete get list watch all of the standard for",
    "start": "1505970",
    "end": "1511669"
  },
  {
    "text": "Nettie's these calls that I need to work with with the resources",
    "start": "1511669",
    "end": "1518410"
  },
  {
    "text": "all right so we have generated code piece of cake right the next thing I need to do is take my go code and",
    "start": "1519169",
    "end": "1525570"
  },
  {
    "text": "compile it so let me go make sure I get the right come in here now if I didn't make any",
    "start": "1525570",
    "end": "1537630"
  },
  {
    "start": "1535000",
    "end": "1547000"
  },
  {
    "text": "typos this should complete in just a few seconds and I'll have my my go binary",
    "start": "1537630",
    "end": "1544399"
  },
  {
    "text": "okay and after we're done building this I'll just give that a minute I'll come back here we need to build the docker",
    "start": "1546799",
    "end": "1553080"
  },
  {
    "start": "1547000",
    "end": "1577000"
  },
  {
    "text": "container so in the sample here we go look at the docker file this is about as",
    "start": "1553080",
    "end": "1559799"
  },
  {
    "text": "simple a doctor file as you can get I'm just gonna say from scratch add my new",
    "start": "1559799",
    "end": "1565529"
  },
  {
    "text": "go binary to the local bin path and then when and when this docker container is",
    "start": "1565529",
    "end": "1571649"
  },
  {
    "text": "launched it's gonna simply launch my sample operator let's go see if this is",
    "start": "1571649",
    "end": "1578279"
  },
  {
    "start": "1577000",
    "end": "1614000"
  },
  {
    "text": "done okay the go build succeeded now I need to run the docker build command which",
    "start": "1578279",
    "end": "1585630"
  },
  {
    "text": "I'll get over here alright",
    "start": "1585630",
    "end": "1591000"
  },
  {
    "text": "docker build I have my container now",
    "start": "1591000",
    "end": "1596220"
  },
  {
    "text": "version o dot one and I'm going to now",
    "start": "1596220",
    "end": "1602460"
  },
  {
    "text": "now I need to get it into my my cluster I didn't I didn't publish it anywhere so",
    "start": "1602460",
    "end": "1608250"
  },
  {
    "text": "I need to copy into my mini cube environment so I take my container put",
    "start": "1608250",
    "end": "1616919"
  },
  {
    "start": "1614000",
    "end": "1642000"
  },
  {
    "text": "it in mini cube which I have running locally I didn't want to trust the network here at the at the conference",
    "start": "1616919",
    "end": "1623330"
  },
  {
    "text": "now I have my container there so just to make sure I'm running okay my mini",
    "start": "1623330",
    "end": "1628350"
  },
  {
    "text": "coopers running I have one node and now I'm ready to roll in my the first thing",
    "start": "1628350",
    "end": "1635580"
  },
  {
    "text": "I need to do now is run the operator container that I just just loaded if I",
    "start": "1635580",
    "end": "1642870"
  },
  {
    "start": "1642000",
    "end": "1677000"
  },
  {
    "text": "go back and look at the operator yam all don't have time to look at this really but the operator Amal defines my Arabic",
    "start": "1642870",
    "end": "1650029"
  },
  {
    "text": "settings the resources need to get lists watch create since I'm watching those I have",
    "start": "1650029",
    "end": "1656970"
  },
  {
    "text": "to request that that that privilege I've got cluster rule bindings service",
    "start": "1656970",
    "end": "1664440"
  },
  {
    "text": "account this just makes it all work when I run the operator but the at the end of",
    "start": "1664440",
    "end": "1670410"
  },
  {
    "text": "the day I'm going to run a container which says run my sample operator version o dot one so let's go ahead and",
    "start": "1670410",
    "end": "1678540"
  },
  {
    "start": "1677000",
    "end": "1719000"
  },
  {
    "text": "do that so if I could coop code I'll create sample operator it created my",
    "start": "1678540",
    "end": "1685770"
  },
  {
    "text": "cluster role my service account my cholesterol binding my deployment let's",
    "start": "1685770",
    "end": "1691050"
  },
  {
    "text": "run it it's running now if I say get pods just to make sure the operators",
    "start": "1691050",
    "end": "1696450"
  },
  {
    "text": "started good so my pot is running and what is doing at this point it's registered my CRT and it's watching for",
    "start": "1696450",
    "end": "1704550"
  },
  {
    "text": "me to create one so if I look at my CRT I've got this sample resource yamo so",
    "start": "1704550",
    "end": "1712470"
  },
  {
    "text": "again my sample resource is going to create my sample with hello cube Khan and world Austin so let's go ahead and",
    "start": "1712470",
    "end": "1720420"
  },
  {
    "start": "1719000",
    "end": "1763000"
  },
  {
    "text": "create that coop cuddle create sample resource great Kerberos says it's",
    "start": "1720420",
    "end": "1726930"
  },
  {
    "text": "created now let's see if community is",
    "start": "1726930",
    "end": "1731970"
  },
  {
    "text": "what I did with it so if I say coop cuddle get samples so my type is called",
    "start": "1731970",
    "end": "1737340"
  },
  {
    "text": "samples and I'm going to say what samples do I have so it calls the list",
    "start": "1737340",
    "end": "1742530"
  },
  {
    "text": "method it says oh you've got my sample let's look inside the yeah Mille to make",
    "start": "1742530",
    "end": "1748050"
  },
  {
    "text": "sure it's it's got everything I wanted and typo get samples my sample yes",
    "start": "1748050",
    "end": "1761420"
  },
  {
    "start": "1763000",
    "end": "1808000"
  },
  {
    "text": "there we go so inside the amal here we've got hello coop gun world austin",
    "start": "1763230",
    "end": "1768490"
  },
  {
    "text": "great now we still don't really know if the controller responded to it and if you remember the controller was simply",
    "start": "1768490",
    "end": "1774220"
  },
  {
    "text": "going to print to the the log so we let's look at that that log now so cuddle logs and i i put a label on it so",
    "start": "1774220",
    "end": "1783190"
  },
  {
    "text": "we could find it sample operator so the log says yes added sample my",
    "start": "1783190",
    "end": "1788799"
  },
  {
    "text": "sample with hello equals cubed on and world equals austin alright it works and",
    "start": "1788799",
    "end": "1796150"
  },
  {
    "text": "then you can do other things like edit let's see you'll try one more command",
    "start": "1796150",
    "end": "1802450"
  },
  {
    "text": "here if I edit samples my sample now we",
    "start": "1802450",
    "end": "1809350"
  },
  {
    "start": "1808000",
    "end": "1906000"
  },
  {
    "text": "can go in we can say hello coop con 2017",
    "start": "1809350",
    "end": "1815460"
  },
  {
    "text": "and my world is only gonna be Austin for a couple more days and then I'm gonna go",
    "start": "1815460",
    "end": "1820750"
  },
  {
    "text": "back home to Seattle so let's say I want to change to Seattle alright oops I",
    "start": "1820750",
    "end": "1831370"
  },
  {
    "text": "missed something VI is not my editor of choice oh no it says it didn't edit it",
    "start": "1831370",
    "end": "1838510"
  },
  {
    "text": "okay let's dragon well you get the idea I'll just change this one",
    "start": "1838510",
    "end": "1845250"
  },
  {
    "text": "all right you get the idea we'll keep the typo",
    "start": "1850070",
    "end": "1855230"
  },
  {
    "text": "alright it saved it and now if I look at the log again it would say oh I changed",
    "start": "1856120",
    "end": "1861260"
  },
  {
    "text": "from ku come Austin to coupe con Seattle and there we go we have our custom",
    "start": "1861260",
    "end": "1867590"
  },
  {
    "text": "resource and if I did the same thing I could I could go ahead and delete delete",
    "start": "1867590",
    "end": "1872840"
  },
  {
    "text": "samples by the way you can fully qualify it if something else has a else has a",
    "start": "1872840",
    "end": "1878570"
  },
  {
    "text": "name like that samples dot my project I owe my sample and it would go ahead and",
    "start": "1878570",
    "end": "1885110"
  },
  {
    "text": "delete and the operator would then print to the log file again so there we go we have a running sample operator that we",
    "start": "1885110",
    "end": "1890870"
  },
  {
    "text": "created from scratch with the with the cogeneration and everything if I had",
    "start": "1890870",
    "end": "1896180"
  },
  {
    "text": "more time and you know I would have spent more time on the client to see well what are those strongly types look like and well we would see that they",
    "start": "1896180",
    "end": "1901940"
  },
  {
    "text": "look exactly like other kubernetes resources okay so we just got a couple",
    "start": "1901940",
    "end": "1908120"
  },
  {
    "start": "1906000",
    "end": "2020000"
  },
  {
    "text": "minutes left to go back to the slides here we went through the demo already so",
    "start": "1908120",
    "end": "1914840"
  },
  {
    "text": "takeaways you know really CRTs make Kuber days extensible they follow all the same patterns that you'll find with",
    "start": "1914840",
    "end": "1920660"
  },
  {
    "text": "other resources CRTs I really have a low overhead most of your time once you get set up is going to be inside your",
    "start": "1920660",
    "end": "1928160"
  },
  {
    "text": "business logic whatever you need to do when your resources are created since I",
    "start": "1928160",
    "end": "1935270"
  },
  {
    "text": "work for the the rook team if you want to see a bigger example where a CRTs are in are implemented rook does rook",
    "start": "1935270",
    "end": "1942920"
  },
  {
    "text": "defines five CRTs actually we've got cluster pool object file volume attachment and all of these are anyway",
    "start": "1942920",
    "end": "1952610"
  },
  {
    "text": "fully implement you can go look for for more examples there rook by the way it's so it's file object and block storage",
    "start": "1952610",
    "end": "1959930"
  },
  {
    "text": "for kubernetes built on SEF where we've submitted to the to CN CF and we're",
    "start": "1959930",
    "end": "1966560"
  },
  {
    "text": "excited about about getting that reviewed there so thanks for your support there take a look at it and I'll",
    "start": "1966560",
    "end": "1974480"
  },
  {
    "text": "be in the rook booth today if you have any questions here's the links to the projects the the operator kit at CD",
    "start": "1974480",
    "end": "1981110"
  },
  {
    "text": "Prometheus rook just and there's lots of other examples out there the",
    "start": "1981110",
    "end": "1986600"
  },
  {
    "text": "and it's starting to roll if you search for operators on github you'll probably find a number of them it's a community",
    "start": "1986600",
    "end": "1994820"
  },
  {
    "text": "this is just growing more rapidly all the time so if you have any questions",
    "start": "1994820",
    "end": "2000610"
  },
  {
    "text": "here's my contact information if you want to to talk to the experts there on",
    "start": "2000610",
    "end": "2005860"
  },
  {
    "text": "the kubernetes slack at siga API machinery the creators of the the custom resources and I can here's the the rook",
    "start": "2005860",
    "end": "2013210"
  },
  {
    "text": "site so that's it let me know if you have any questions",
    "start": "2013210",
    "end": "2019259"
  }
]