[
  {
    "start": "0",
    "end": "27000"
  },
  {
    "text": "all right we're gonna go ahead and get started so you're at securing kubernetes",
    "start": "0",
    "end": "5040"
  },
  {
    "text": "with the mission controllers is everybody in the right room because when",
    "start": "5040",
    "end": "10469"
  },
  {
    "text": "I talk about security usually people run for the door like I was amazed at how many people registered for this",
    "start": "10469",
    "end": "17600"
  },
  {
    "text": "I'm sure the Seavey's that came out last week had something to do with it so Who",
    "start": "17600",
    "end": "26310"
  },
  {
    "text": "am I my name is Dave strable I'm a global open source architect at Microsoft I'm",
    "start": "26310",
    "end": "31830"
  },
  {
    "start": "27000",
    "end": "27000"
  },
  {
    "text": "also a co-chair of cig Asher and on the kubernetes release team all sounds",
    "start": "31830",
    "end": "37020"
  },
  {
    "text": "really important but it's not if you want to connect with me I am at Dave",
    "start": "37020",
    "end": "43079"
  },
  {
    "text": "strable or Dave underscore strable on Twitter does anybody know what that",
    "start": "43079",
    "end": "49800"
  },
  {
    "text": "keyboard looking thing is there's not many in here that helps me like at least",
    "start": "49800",
    "end": "57600"
  },
  {
    "text": "know my demographic that I'm talking to but it was my first computer and why I",
    "start": "57600",
    "end": "63629"
  },
  {
    "text": "got inspired by technology also how many people in here are primarily just doing",
    "start": "63629",
    "end": "71310"
  },
  {
    "text": "security that's their main role at their company Oh a lot more than I thought",
    "start": "71310",
    "end": "77460"
  },
  {
    "text": "okay great how many people in here struggle with security and kubernetes",
    "start": "77460",
    "end": "84710"
  },
  {
    "text": "how many are in denial awesome all right",
    "start": "84710",
    "end": "91710"
  },
  {
    "text": "so you're going to deploy kubernetes that's why we're all here at least I'm",
    "start": "91710",
    "end": "96869"
  },
  {
    "text": "guessing and the first hurdle you come into a lot of times is going to be this",
    "start": "96869",
    "end": "102060"
  },
  {
    "start": "102000",
    "end": "102000"
  },
  {
    "text": "is IT security and it's not that IT",
    "start": "102060",
    "end": "108030"
  },
  {
    "text": "security is bad but there's fundamental problems that we do have if you look at",
    "start": "108030",
    "end": "115530"
  },
  {
    "start": "111000",
    "end": "111000"
  },
  {
    "text": "cloud native architectures are very dynamic in nature this is something",
    "start": "115530",
    "end": "120840"
  },
  {
    "text": "security teams are not used to you can never count on say a pod being around",
    "start": "120840",
    "end": "126210"
  },
  {
    "text": "24/7 these things come and go that's that's a big hurdle for security teams",
    "start": "126210",
    "end": "133980"
  },
  {
    "text": "you can also look at a lot of security tools they haven't been retrofitted for these cloud native architectures so we",
    "start": "133980",
    "end": "141390"
  },
  {
    "text": "have a lack of tools also clusters not immutable this one you could really",
    "start": "141390",
    "end": "148290"
  },
  {
    "text": "argue because a lot of people think hey I use terraform now my clusters immutable right it's not because what",
    "start": "148290",
    "end": "157500"
  },
  {
    "text": "tends to happen in kubernetes is will build a cluster than another cluster and then somebody will install operator on",
    "start": "157500",
    "end": "164549"
  },
  {
    "text": "cluster one cluster to never get set and we have clusters that are just a bunch",
    "start": "164549",
    "end": "170159"
  },
  {
    "text": "of snowflakes there's no way to really control policy around those different",
    "start": "170159",
    "end": "175650"
  },
  {
    "text": "clusters some of the different approaches we can take can be manual",
    "start": "175650",
    "end": "182280"
  },
  {
    "text": "intervention this doesn't scale well and not something we really want to do we",
    "start": "182280",
    "end": "188159"
  },
  {
    "text": "could also restrict users from creating any type of objects and become really restrictive around that and when we",
    "start": "188159",
    "end": "196439"
  },
  {
    "text": "apply these methodologies that we've always done it that way",
    "start": "196439",
    "end": "201540"
  },
  {
    "text": "our architecture looks like this some security professionals would say this",
    "start": "201540",
    "end": "207060"
  },
  {
    "text": "looks great but if you if you remember Attica the prisoners rebelled so this is",
    "start": "207060",
    "end": "215730"
  },
  {
    "text": "not a place we want to be because it really leads to this frustration not",
    "start": "215730",
    "end": "222449"
  },
  {
    "text": "just frustration and this is so funny aah-ha-ha not just frustration from",
    "start": "222449",
    "end": "228419"
  },
  {
    "text": "security not just frustration from developers or operators everybody gets",
    "start": "228419",
    "end": "234599"
  },
  {
    "text": "frustrated when we build architectures like that we start building architectures that are kind of like",
    "start": "234599",
    "end": "241470"
  },
  {
    "text": "cloud sort of native and we kind of",
    "start": "241470",
    "end": "246840"
  },
  {
    "text": "twist and turn kubernetes and make it into something that was never supposed to be so we lose a lot of advantages of",
    "start": "246840",
    "end": "254370"
  },
  {
    "text": "kubernetes when we build them that way so does this mean we should just get rid",
    "start": "254370",
    "end": "261659"
  },
  {
    "text": "of security now this is what your clusters look like",
    "start": "261659",
    "end": "267850"
  },
  {
    "start": "264000",
    "end": "264000"
  },
  {
    "text": "when you don't apply security principles to your clusters you have Bob having a",
    "start": "267850",
    "end": "273220"
  },
  {
    "text": "heart attack John I don't even know what he's doing he's starting more fires there's people running out the door I",
    "start": "273220",
    "end": "279220"
  },
  {
    "text": "like to call this cluster admin as a service where everybody becomes cluster",
    "start": "279220",
    "end": "285520"
  },
  {
    "text": "admin that's not also not a good way to build and run our clusters Oh so what",
    "start": "285520",
    "end": "292870"
  },
  {
    "text": "can we do to kind of bridge this gap to mode both maker developers operators",
    "start": "292870",
    "end": "298120"
  },
  {
    "text": "productive but also our Security's security teams happy we can use",
    "start": "298120",
    "end": "306370"
  },
  {
    "text": "something called a mission controllers a mission controllers is a way to extend",
    "start": "306370",
    "end": "312610"
  },
  {
    "text": "what kubernetes can do especially at the object level so who's actually using a",
    "start": "312610",
    "end": "319210"
  },
  {
    "start": "318000",
    "end": "318000"
  },
  {
    "text": "mission controllers here come on everybody should be raising their hand",
    "start": "319210",
    "end": "325530"
  },
  {
    "text": "it's a trick question there's default of mission controllers",
    "start": "325530",
    "end": "330990"
  },
  {
    "start": "330000",
    "end": "330000"
  },
  {
    "text": "you may not know you're using a mission controller but you actually are these",
    "start": "330990",
    "end": "336789"
  },
  {
    "text": "are the default of mission controllers for 1.12 I think the same for 1.13 here",
    "start": "336789",
    "end": "342550"
  },
  {
    "text": "I'm not going to cover all these in depth here the two I'm going to focus on",
    "start": "342550",
    "end": "348250"
  },
  {
    "text": "is mutating a mission webhook and also of validating a mission webhook and",
    "start": "348250",
    "end": "353849"
  },
  {
    "text": "we're gonna learn about how we can extend policy and compliance by using",
    "start": "353849",
    "end": "359830"
  },
  {
    "text": "these two web hooks so what are a",
    "start": "359830",
    "end": "366520"
  },
  {
    "start": "365000",
    "end": "365000"
  },
  {
    "text": "mission controllers by the kubernetes websites mission control controllers a",
    "start": "366520",
    "end": "372130"
  },
  {
    "text": "piece of code that intercepts requests to the kubernetes api server prior to",
    "start": "372130",
    "end": "377469"
  },
  {
    "text": "persistence of the object but after the request is authenticated and authorized",
    "start": "377469",
    "end": "382949"
  },
  {
    "text": "so what does that actually look like so",
    "start": "382949",
    "end": "388599"
  },
  {
    "text": "what that looks like we have Jane here Jane's going to make a request to the kubernetes api it's going to go through",
    "start": "388599",
    "end": "396370"
  },
  {
    "text": "authentication with authentication it's going to make sure she belongs there it's then gonna",
    "start": "396370",
    "end": "402080"
  },
  {
    "text": "go through authorization what does she actually have access to then it's going to go through the mission phase the",
    "start": "402080",
    "end": "409340"
  },
  {
    "text": "mission phase is going to clewd mutating emission mutating emission is when we",
    "start": "409340",
    "end": "414710"
  },
  {
    "text": "may mutate objects so if I deploy a manifest it may add additional labels to",
    "start": "414710",
    "end": "420949"
  },
  {
    "text": "that manifest for me oh then I'll go through object validation who's ever",
    "start": "420949",
    "end": "427699"
  },
  {
    "text": "getting troubled object validation who's ever like added a tab in there yeah mo",
    "start": "427699",
    "end": "432819"
  },
  {
    "text": "okay that's when you get object validation errors then it's going to go",
    "start": "432819",
    "end": "438469"
  },
  {
    "start": "437000",
    "end": "437000"
  },
  {
    "text": "through the validating admission before it's ever stored in at CD so what the",
    "start": "438469",
    "end": "444949"
  },
  {
    "text": "mutating webhook and validating webhook allow us to do is really add more logic",
    "start": "444949",
    "end": "450319"
  },
  {
    "text": "so we can you know building custom logic that may mutate an object or it may deny",
    "start": "450319",
    "end": "456680"
  },
  {
    "text": "an actual object so validating webhook",
    "start": "456680",
    "end": "464960"
  },
  {
    "start": "461000",
    "end": "461000"
  },
  {
    "text": "in mutating webhooks are both perd dynamic emission control the validating",
    "start": "464960",
    "end": "470719"
  },
  {
    "text": "webhook allows you to intercept and validate requests so example of this may",
    "start": "470719",
    "end": "477199"
  },
  {
    "text": "be restricting a resource creation so for example let's say we're creating a",
    "start": "477199",
    "end": "483940"
  },
  {
    "text": "load balancer but we don't want to allow public load balancers we just want internal load balancers we could deny",
    "start": "483940",
    "end": "490879"
  },
  {
    "text": "that if it doesn't contain an annotation for a internal load balancer the",
    "start": "490879",
    "end": "497419"
  },
  {
    "text": "mutating webhook is a little different because a mutating webhook is when we're going to add additional field so we're",
    "start": "497419",
    "end": "504319"
  },
  {
    "text": "gonna actually patch that object so this example of this would be something like",
    "start": "504319",
    "end": "510259"
  },
  {
    "text": "Sto I'm sure everybody's heard of Sto so I don't need to explain that so when it",
    "start": "510259",
    "end": "516560"
  },
  {
    "text": "injects a sidecar also it injects that Envoy proxy as a sidecar it's actually",
    "start": "516560",
    "end": "523310"
  },
  {
    "text": "doing a mutation on that object you deploy you need to think of policy",
    "start": "523310",
    "end": "530660"
  },
  {
    "text": "enforcement differently than things like Network policy pod security policy where those",
    "start": "530660",
    "end": "537980"
  },
  {
    "text": "two are really focused on the data plane",
    "start": "537980",
    "end": "543100"
  },
  {
    "text": "policy and emission control is really focused on the actual object so when we",
    "start": "543100",
    "end": "549680"
  },
  {
    "text": "go to deploy a pod or a service or ingress we're creating an object so we",
    "start": "549680",
    "end": "556760"
  },
  {
    "text": "want to focus on policy around that so",
    "start": "556760",
    "end": "564680"
  },
  {
    "text": "this is all super awesome now we can create custom logic to apply policy to",
    "start": "564680",
    "end": "571160"
  },
  {
    "text": "our clusters but to do that we're going",
    "start": "571160",
    "end": "576950"
  },
  {
    "start": "575000",
    "end": "575000"
  },
  {
    "text": "to read the go code here actually there's nothing important in that code the only number I want you to remember",
    "start": "576950",
    "end": "583070"
  },
  {
    "text": "is the number down there in the left corner 198 so this deployment actually was a",
    "start": "583070",
    "end": "591290"
  },
  {
    "text": "mutating webhook to automatically add annotations to a load balancer so it'd",
    "start": "591290",
    "end": "597860"
  },
  {
    "text": "be an internal load balancer and to manage this you would have to you know",
    "start": "597860",
    "end": "604130"
  },
  {
    "text": "create a deployment within your cluster or you could actually host this it just needs HTTP endpoint you could host this",
    "start": "604130",
    "end": "611540"
  },
  {
    "text": "on say like a function as a service - so",
    "start": "611540",
    "end": "620329"
  },
  {
    "text": "how can we get policy enforcement without writing a bus bunch of custom",
    "start": "620329",
    "end": "626180"
  },
  {
    "text": "logic like we just saw there so we can use a general purpose policy engine the",
    "start": "626180",
    "end": "632329"
  },
  {
    "text": "general purpose policy engine is open policy agent how many have heard of open",
    "start": "632329",
    "end": "638270"
  },
  {
    "text": "policy agent okay so about quarter of the room they have a booth in the hall I",
    "start": "638270",
    "end": "646010"
  },
  {
    "start": "646000",
    "end": "646000"
  },
  {
    "text": "would definitely recommend going to visit them but what open policy agent is",
    "start": "646010",
    "end": "651589"
  },
  {
    "text": "it's a CNC F hosted sandbox project its general purpose and the reason they say",
    "start": "651589",
    "end": "659209"
  },
  {
    "text": "its general purpose because it's just validating JSON data so this is",
    "start": "659209",
    "end": "664880"
  },
  {
    "text": "just for kubernetes this could be to validate your terraform plans this could",
    "start": "664880",
    "end": "672110"
  },
  {
    "text": "also be to restrict access to SSH but today we'll talk more in the context of",
    "start": "672110",
    "end": "679340"
  },
  {
    "text": "what it provides for kubernetes it uses",
    "start": "679340",
    "end": "685610"
  },
  {
    "text": "a declarative policy language called rego and I'll cover a little more of",
    "start": "685610",
    "end": "692690"
  },
  {
    "text": "what that is but it essentially was built off a query language called data",
    "start": "692690",
    "end": "698960"
  },
  {
    "text": "log from like way before my time it was like in the 70s sorry if I called",
    "start": "698960",
    "end": "706190"
  },
  {
    "text": "anybody old for being born in 70s ok so",
    "start": "706190",
    "end": "713000"
  },
  {
    "text": "how the open policy agent kind of works here so we're really decoupling policy",
    "start": "713000",
    "end": "719930"
  },
  {
    "text": "from our application and those policy decisions were offloading so a request",
    "start": "719930",
    "end": "725270"
  },
  {
    "text": "comes in the enforcement happens at the service layer that service layer refers",
    "start": "725270",
    "end": "730640"
  },
  {
    "text": "to could be our kubernetes api could be a custom API it could be a message queue",
    "start": "730640",
    "end": "737900"
  },
  {
    "text": "any of those once that request comes into the service it sends that policy",
    "start": "737900",
    "end": "744560"
  },
  {
    "text": "quarry to open so the open policy agent the open policy agent compares its",
    "start": "744560",
    "end": "751190"
  },
  {
    "text": "actual policy with the data it has and then based on that you may have a true",
    "start": "751190",
    "end": "757790"
  },
  {
    "text": "or false return on that so example may be of we create a service it has a",
    "start": "757790",
    "end": "764900"
  },
  {
    "text": "specific annotation we create a policy to say with that specific annotation",
    "start": "764900",
    "end": "770900"
  },
  {
    "text": "here called dev we're gonna add cost Center 8000 automatically to that so",
    "start": "770900",
    "end": "777380"
  },
  {
    "text": "when it goes through and makes that policy decision it's automatically going to annotate that object and send it back",
    "start": "777380",
    "end": "784520"
  },
  {
    "text": "to the service",
    "start": "784520",
    "end": "787450"
  },
  {
    "start": "792000",
    "end": "792000"
  },
  {
    "text": "so example Rago policy here if you look",
    "start": "792370",
    "end": "798530"
  },
  {
    "text": "at the Rago the the policy it's pretty easy to think about you're really",
    "start": "798530",
    "end": "803750"
  },
  {
    "text": "focusing on the logic and the data and you're not focused on like methods it's",
    "start": "803750",
    "end": "809840"
  },
  {
    "text": "not a programming language it's a query language so to write this",
    "start": "809840",
    "end": "818420"
  },
  {
    "text": "logic in this example I'm doing a deny rule so you see here it's a deny then we",
    "start": "818420",
    "end": "825620"
  },
  {
    "text": "say what kind of resource our resource is going to be of any kind of any",
    "start": "825620",
    "end": "831800"
  },
  {
    "text": "namespace of any name then the resolution for this policy is going to",
    "start": "831800",
    "end": "838550"
  },
  {
    "text": "be to patch that object and we go down",
    "start": "838550",
    "end": "844040"
  },
  {
    "text": "and look at see how we match these objects it's going to look at the kind",
    "start": "844040",
    "end": "850250"
  },
  {
    "text": "namespace and then it's going to look at where I define matched object metadata",
    "start": "850250",
    "end": "855950"
  },
  {
    "text": "annotations so any time it sees mr.t it's automatically going to add this",
    "start": "855950",
    "end": "862190"
  },
  {
    "text": "path and patch with a cost center and the value of 18 so who starts to manage",
    "start": "862190",
    "end": "875300"
  },
  {
    "start": "872000",
    "end": "872000"
  },
  {
    "text": "all this policy and it's going to be different in every organization but",
    "start": "875300",
    "end": "880460"
  },
  {
    "text": "typically this is kind of the personas you would see managing the policy so we",
    "start": "880460",
    "end": "887420"
  },
  {
    "text": "have our developer Ice Cube Ice Cube is huge at cube con I guess Mesa sphere made the hem huge",
    "start": "887420",
    "end": "894650"
  },
  {
    "text": "here they're going to deploy apps so they're the one creating the objects",
    "start": "894650",
    "end": "900560"
  },
  {
    "text": "this may also be operators too then you have your platform operator",
    "start": "900560",
    "end": "905570"
  },
  {
    "text": "your platform operator is typically the one it's going to create and maintain that policy then over arching you may",
    "start": "905570",
    "end": "913940"
  },
  {
    "text": "have security security is going to be able to audit the policy because one of",
    "start": "913940",
    "end": "921500"
  },
  {
    "text": "the features of a allows you to actually audit policy and not just apply a true/false to a policy",
    "start": "921500",
    "end": "931329"
  },
  {
    "text": "so where this gets us is to building immutable platforms because now we can",
    "start": "932800",
    "end": "940220"
  },
  {
    "start": "933000",
    "end": "933000"
  },
  {
    "text": "wrap up policy in code now for lack of a better term you can think of oppa's",
    "start": "940220",
    "end": "945829"
  },
  {
    "text": "policy as a service here we've built apps that are immutable we've built our",
    "start": "945829",
    "end": "952130"
  },
  {
    "text": "kubernetes clusters in a mutable way and now we've built policy around those",
    "start": "952130",
    "end": "957680"
  },
  {
    "text": "clusters so if he thought I was done",
    "start": "957680",
    "end": "964279"
  },
  {
    "text": "there is more to this and that is the kubernetes policy controller the",
    "start": "964279",
    "end": "971959"
  },
  {
    "start": "968000",
    "end": "968000"
  },
  {
    "text": "kubernetes policy controller was built by a team with in Azure it will be",
    "start": "971959",
    "end": "977870"
  },
  {
    "text": "moving officially under the OPA project but you can still find its home at the",
    "start": "977870",
    "end": "984589"
  },
  {
    "text": "URL below this is a community project I think that's one of the most exciting",
    "start": "984589",
    "end": "990769"
  },
  {
    "text": "things about OPA in the kubernetes policy controller is now we everybody",
    "start": "990769",
    "end": "996620"
  },
  {
    "text": "can build knowledge into this and build policies for this if you just think of",
    "start": "996620",
    "end": "1002920"
  },
  {
    "text": "everybody in this room created one policy think how much of each of your",
    "start": "1002920",
    "end": "1008230"
  },
  {
    "text": "companies could use policies this is something I think is going to be policy",
    "start": "1008230",
    "end": "1016060"
  },
  {
    "text": "around Cooper knaves will be something talked about a lot over the next year if",
    "start": "1016060",
    "end": "1021189"
  },
  {
    "text": "you haven't already seen it but we're getting closer and closer to being there",
    "start": "1021189",
    "end": "1027870"
  },
  {
    "text": "so what the policy controller does is it has both mutating you can do mutating",
    "start": "1027870",
    "end": "1034720"
  },
  {
    "text": "and validation you can also audit you know your policy to make so we can go",
    "start": "1034720",
    "end": "1042038"
  },
  {
    "text": "out there and see things that don't follow our policies the deployment kiss consists of three containers OPA our",
    "start": "1042039",
    "end": "1049150"
  },
  {
    "text": "queue management controller opens open policy agent container then cube",
    "start": "1049150",
    "end": "1054940"
  },
  {
    "text": "management it's going to load our policy into OPA and one quick note on",
    "start": "1054940",
    "end": "1061380"
  },
  {
    "text": "OPA is some might think this could be you know add additional latency because",
    "start": "1061380",
    "end": "1067870"
  },
  {
    "text": "it has to go validate policy OPA it's policy runs in memory this is one of the",
    "start": "1067870",
    "end": "1074800"
  },
  {
    "text": "great things to see from the OPA team they really considered for things like",
    "start": "1074800",
    "end": "1081340"
  },
  {
    "text": "latency sensitive applications and how to architect OPA for that it adds very",
    "start": "1081340",
    "end": "1088090"
  },
  {
    "text": "little overhead so some examples that you may use whip the kubernetes policy",
    "start": "1088090",
    "end": "1095800"
  },
  {
    "text": "controller things like white listing or black listing container registries so if you only want your users to be able to",
    "start": "1095800",
    "end": "1103120"
  },
  {
    "text": "deploy container images from your corporate image repository you could",
    "start": "1103120",
    "end": "1108700"
  },
  {
    "text": "believe you could whitelist that and blacklist anything else you want also",
    "start": "1108700",
    "end": "1114160"
  },
  {
    "text": "not allowing conflicting hosts for ingress so if team one uses a specific",
    "start": "1114160",
    "end": "1120490"
  },
  {
    "text": "host address for their ingress team two will be denied to be able to do that we",
    "start": "1120490",
    "end": "1127810"
  },
  {
    "text": "can also block things with the authorization module so maybe we don't want to allow anybody to exact into pods",
    "start": "1127810",
    "end": "1136000"
  },
  {
    "text": "that live within Cube system we can also use it for authorization there all right",
    "start": "1136000",
    "end": "1147940"
  },
  {
    "start": "1145000",
    "end": "1145000"
  },
  {
    "text": "so from demos all this is just a quick overview of the demos we're going to",
    "start": "1147940",
    "end": "1153940"
  },
  {
    "text": "show here so in the first demo we have George Jetson and George never follows",
    "start": "1153940",
    "end": "1162100"
  },
  {
    "text": "policy that's been documented unfortunately in SharePoint and mr. spacely's pissed about this so mr.",
    "start": "1162100",
    "end": "1170410"
  },
  {
    "text": "Spacely is going to enforce George Jetson to always use an internal load",
    "start": "1170410",
    "end": "1177040"
  },
  {
    "text": "balancer so in this demo we're going to show how we can easily enforce any type",
    "start": "1177040",
    "end": "1183580"
  },
  {
    "text": "of service deployment that states a type of load balancer to be only a intern",
    "start": "1183580",
    "end": "1189799"
  },
  {
    "text": "announcer in the second demo Elroy we're",
    "start": "1189799",
    "end": "1196730"
  },
  {
    "text": "going to he's going to make a request for ingress and then based on that it",
    "start": "1196730",
    "end": "1203899"
  },
  {
    "text": "will check for any conflicting host names here and then Judy here we're also",
    "start": "1203899",
    "end": "1211159"
  },
  {
    "text": "going to restrict access to specific CR DS so the CR dsl show is calico CR D so",
    "start": "1211159",
    "end": "1217970"
  },
  {
    "text": "we're going to restrict what actually Judy can do with those custom resource",
    "start": "1217970",
    "end": "1223850"
  },
  {
    "text": "definitions and if you couldn't tell I was a 80s kid by all my eighties",
    "start": "1223850",
    "end": "1230989"
  },
  {
    "start": "1225000",
    "end": "1225000"
  },
  {
    "text": "references alright so to show her first",
    "start": "1230989",
    "end": "1237739"
  },
  {
    "text": "policy here so IRA have a few policies",
    "start": "1237739",
    "end": "1243289"
  },
  {
    "text": "defined in here so I'm just gonna pull back what these policies are I have a",
    "start": "1243289",
    "end": "1251869"
  },
  {
    "text": "annotate and an ingress conflict here so",
    "start": "1251869",
    "end": "1258739"
  },
  {
    "text": "to show you what this annotate object looks like here it's going to deny it's",
    "start": "1258739",
    "end": "1265999"
  },
  {
    "text": "looking for kind the kind the type of the object type we're looking for is",
    "start": "1265999",
    "end": "1271070"
  },
  {
    "text": "services in any namespace and any name so we could limit this if we wanted to",
    "start": "1271070",
    "end": "1277159"
  },
  {
    "text": "on a particular namespace also it doesn't have to be cluster wide then",
    "start": "1277159",
    "end": "1282619"
  },
  {
    "text": "we're going to match this object with any labels that say internal app so if",
    "start": "1282619",
    "end": "1287899"
  },
  {
    "text": "my app has a label or my service has a label that says internal app it's automatically going to patch that object",
    "start": "1287899",
    "end": "1295159"
  },
  {
    "text": "with this path so this path is saying add a annotation of service step beta",
    "start": "1295159",
    "end": "1300950"
  },
  {
    "text": "Cooper naze dot IO adder or slash as your load balancer internal and that",
    "start": "1300950",
    "end": "1307159"
  },
  {
    "text": "value is going to be true",
    "start": "1307159",
    "end": "1310419"
  },
  {
    "text": "and here it's service I'm going to deploy here as you can see my kind of",
    "start": "1312250",
    "end": "1317410"
  },
  {
    "text": "service it has a label of internal app and that's all we really need to look at",
    "start": "1317410",
    "end": "1325030"
  },
  {
    "text": "there so I will apply this service so it",
    "start": "1325030",
    "end": "1342010"
  },
  {
    "text": "already created it so let's actually check out my service",
    "start": "1342010",
    "end": "1347470"
  },
  {
    "text": "here I'm just going to refresh it here",
    "start": "1347470",
    "end": "1352080"
  },
  {
    "text": "we're gonna do this on alright so you",
    "start": "1355800",
    "end": "1364660"
  },
  {
    "text": "saw my actual object I deployed did not have an annotation now it has this",
    "start": "1364660",
    "end": "1369880"
  },
  {
    "text": "annotation of load balancer internal so essentially what I did there and what",
    "start": "1369880",
    "end": "1377080"
  },
  {
    "text": "took let's say 10 lines of a query",
    "start": "1377080",
    "end": "1383500"
  },
  {
    "text": "language I've just restricted anybody from deploying a internal or external",
    "start": "1383500",
    "end": "1388890"
  },
  {
    "text": "load balancer within my cluster if you remember that slide back there I told",
    "start": "1388890",
    "end": "1395200"
  },
  {
    "text": "you to remember one number how much how many lines of code was that custom logic",
    "start": "1395200",
    "end": "1401700"
  },
  {
    "text": "yes this I did within 10 lines of a query language that's just matching JSON",
    "start": "1401700",
    "end": "1408400"
  },
  {
    "text": "data how awesome is that I mean",
    "start": "1408400",
    "end": "1415740"
  },
  {
    "text": "all right so Oh running out of time here",
    "start": "1417820",
    "end": "1423320"
  },
  {
    "text": "so let's go to the next one here so my next service or policy I'm going",
    "start": "1423320",
    "end": "1433700"
  },
  {
    "text": "to enforce here this policy is a little more complicated so this policy is",
    "start": "1433700",
    "end": "1440600"
  },
  {
    "text": "actually going to take data from namespaces and also from a object that a",
    "start": "1440600",
    "end": "1447290"
  },
  {
    "text": "that a end user would deploy so in here what it's looking for is matching",
    "start": "1447290",
    "end": "1453470"
  },
  {
    "text": "anything in ingress and then it wants a valid host names so when I deploy it",
    "start": "1453470",
    "end": "1459800"
  },
  {
    "text": "ingress it should have valid host names that can be applied to ingress what its",
    "start": "1459800",
    "end": "1467480"
  },
  {
    "text": "first going to look for is a white list so this white list would be an",
    "start": "1467480",
    "end": "1472790"
  },
  {
    "text": "annotation on my ingress object and that white list would define the URLs are",
    "start": "1472790",
    "end": "1479950"
  },
  {
    "text": "fully qualified domain names that I can utilize for that ingress host it's then",
    "start": "1479950",
    "end": "1486980"
  },
  {
    "text": "going to go through and match a pattern here so it's going to match this exact",
    "start": "1486980",
    "end": "1493370"
  },
  {
    "text": "pattern and what it's looking for is is",
    "start": "1493370",
    "end": "1501370"
  },
  {
    "text": "this white list here so if it does not match this white list here it's going to",
    "start": "1501370",
    "end": "1508760"
  },
  {
    "text": "deny that deployment and I've already",
    "start": "1508760",
    "end": "1513800"
  },
  {
    "text": "created this namespace here why that's important is we'll see in just a second",
    "start": "1513800",
    "end": "1521150"
  },
  {
    "text": "so first I need to create this policy so",
    "start": "1521150",
    "end": "1526970"
  },
  {
    "text": "the policies just being deployed to the OPA namespace OPA namespace is where",
    "start": "1526970",
    "end": "1532190"
  },
  {
    "text": "that OPA agent is the cube management which is going to load that policy and",
    "start": "1532190",
    "end": "1537320"
  },
  {
    "text": "also our kubernetes policy controller so",
    "start": "1537320",
    "end": "1542960"
  },
  {
    "text": "I go ahead and create that service and we're going to hit the audit end",
    "start": "1542960",
    "end": "1549640"
  },
  {
    "text": "point and I'm I guess my connection probably died for that",
    "start": "1549640",
    "end": "1555029"
  },
  {
    "text": "okay so the policy controller enables a audit endpoint here so in my audit",
    "start": "1567500",
    "end": "1574159"
  },
  {
    "text": "endpoint even though I haven't rejected any policy or anything it did go out",
    "start": "1574159",
    "end": "1580370"
  },
  {
    "text": "there and look at things that did not meet this policy so today you could go",
    "start": "1580370",
    "end": "1586130"
  },
  {
    "text": "out write a policy apply it to your environment and see which things don't match up and violate policy so now if I",
    "start": "1586130",
    "end": "1597020"
  },
  {
    "text": "want to actually deploy this ingress so",
    "start": "1597020",
    "end": "1602150"
  },
  {
    "text": "I'm a new user I've created a ingress I created a hostname I will go through and",
    "start": "1602150",
    "end": "1608630"
  },
  {
    "text": "[Music] I'm going to deploy ingress really bad",
    "start": "1608630",
    "end": "1616809"
  },
  {
    "text": "so it automatically comes back and tells me that my host name is not a valid host",
    "start": "1617590",
    "end": "1624830"
  },
  {
    "text": "name so it's not on the actual whitelist here so if we look at that really bad",
    "start": "1624830",
    "end": "1630260"
  },
  {
    "text": "ingress here you can see its host name is Acme Corp comm and what our policy",
    "start": "1630260",
    "end": "1639260"
  },
  {
    "text": "says in that namespace it has to be either a wild card Q a wild card",
    "start": "1639260",
    "end": "1645909"
  },
  {
    "text": "internal and only when I match that will it actually submit that to @cd and",
    "start": "1645909",
    "end": "1654429"
  },
  {
    "text": "persist that actual object okay so we're running out of time on the",
    "start": "1654429",
    "end": "1662570"
  },
  {
    "text": "demos here so I'm just going to show the policy for ingress I won't actually",
    "start": "1662570",
    "end": "1668000"
  },
  {
    "text": "deploy it for or not for ingress sorry the CR DS here this is another very easy",
    "start": "1668000",
    "end": "1676850"
  },
  {
    "text": "policy that's going to restrict somebody from having access and specific",
    "start": "1676850",
    "end": "1682640"
  },
  {
    "text": "permissions to CR DS so we can get very granular here and how we allow users to",
    "start": "1682640",
    "end": "1689360"
  },
  {
    "text": "modify a CR DS the important piece here is that you may have some system",
    "start": "1689360",
    "end": "1695510"
  },
  {
    "text": "accounts that actually do need to update and modify CR DS so here we're",
    "start": "1695510",
    "end": "1701510"
  },
  {
    "text": "matching up here we're actually matching the CR D so this is a calico CR DS down",
    "start": "1701510",
    "end": "1708830"
  },
  {
    "text": "here will we always set a resolution so a message so it kicks back to the",
    "start": "1708830",
    "end": "1714230"
  },
  {
    "text": "end-user so they do have feedback of what actually failed here we're going to",
    "start": "1714230",
    "end": "1720110"
  },
  {
    "text": "do a not match so we want the system cube controller manager and the cube",
    "start": "1720110",
    "end": "1726440"
  },
  {
    "text": "scheduler to be able to actually access those CR DS and then allow and kick any",
    "start": "1726440",
    "end": "1734030"
  },
  {
    "text": "other user out from actually creating deleting or patching those actual CR DS",
    "start": "1734030",
    "end": "1741159"
  },
  {
    "start": "1747000",
    "end": "1747000"
  },
  {
    "text": "so some of the good the bad and gotchas about using an open policy agent and",
    "start": "1747730",
    "end": "1753830"
  },
  {
    "text": "describing your policy this way if you look at the OPA approach allows you to",
    "start": "1753830",
    "end": "1758840"
  },
  {
    "text": "decouple policy from applications which is a good thing especially when we want",
    "start": "1758840",
    "end": "1764060"
  },
  {
    "text": "to talk about immutability its general purpose I think this is a huge benefit",
    "start": "1764060",
    "end": "1769970"
  },
  {
    "text": "because it's not just for kubernetes you can start driving policy in other places",
    "start": "1769970",
    "end": "1776930"
  },
  {
    "text": "within your technology stack so whether that be tariffs or more if Co linker D",
    "start": "1776930",
    "end": "1783490"
  },
  {
    "text": "there's integrations into those because we're just taking plain JSON data making",
    "start": "1783490",
    "end": "1788600"
  },
  {
    "text": "a quarry on that and returning a true or false the bad this one I had a hard time",
    "start": "1788600",
    "end": "1794900"
  },
  {
    "text": "with because I got so excited about it but there there can be a learning term",
    "start": "1794900",
    "end": "1801440"
  },
  {
    "text": "or learning curve to Rago well that's the first thing you'll probably run into",
    "start": "1801440",
    "end": "1808100"
  },
  {
    "text": "and struggle with a little it's documented very well and you can also go in the OPA slack channel and they're",
    "start": "1808100",
    "end": "1814640"
  },
  {
    "text": "very very helpful and there you have to be considerate of latency also if you",
    "start": "1814640",
    "end": "1822680"
  },
  {
    "text": "have a very highly transactional system there is some latency OPA can add they",
    "start": "1822680",
    "end": "1829130"
  },
  {
    "text": "did design it in a performant way I would say majority of your applications aren't going to run in",
    "start": "1829130",
    "end": "1834980"
  },
  {
    "text": "- latency problems that's why I had a hard time putting it under the bad I think it's more of just a consideration",
    "start": "1834980",
    "end": "1841100"
  },
  {
    "text": "you should take from it ah got chills",
    "start": "1841100",
    "end": "1847480"
  },
  {
    "text": "mutating objects you need to really handle with care' because when a end",
    "start": "1847480",
    "end": "1854419"
  },
  {
    "text": "user deploys something they're expecting outcome a and they may",
    "start": "1854419",
    "end": "1859520"
  },
  {
    "text": "get outcome Z so you need to really think about when you're actually mutating objects so takeaways from this",
    "start": "1859520",
    "end": "1873590"
  },
  {
    "start": "1870000",
    "end": "1870000"
  },
  {
    "text": "session is focus you have to focus on security within kubernetes and just",
    "start": "1873590",
    "end": "1879500"
  },
  {
    "text": "deploying a default cluster is not secure by default you need to start",
    "start": "1879500",
    "end": "1884660"
  },
  {
    "text": "thinking about the other layers you need to add on from security this will benefit you security teams and your",
    "start": "1884660",
    "end": "1891140"
  },
  {
    "text": "company you also and I think this is",
    "start": "1891140",
    "end": "1897290"
  },
  {
    "text": "probably the most important piece is instead of pushing back against security",
    "start": "1897290",
    "end": "1902360"
  },
  {
    "text": "hope them understand how you can extend kubernetes to fit their models also and think of new ways to implement security",
    "start": "1902360",
    "end": "1910280"
  },
  {
    "text": "in your clusters don't just settle for that we used to do it this way or our tool works this way look at new ideas in",
    "start": "1910280",
    "end": "1917929"
  },
  {
    "text": "this space always treat your crew Bernays clusters as immutable",
    "start": "1917929",
    "end": "1924380"
  },
  {
    "text": "I can't harp on that enough and this is just another way to get us there to having an immutable platform like I said",
    "start": "1924380",
    "end": "1934010"
  },
  {
    "text": "you can have you can do this multiple different ways build your own logic and",
    "start": "1934010",
    "end": "1939650"
  },
  {
    "text": "use you utilize the mutating webhook or the validating webhook you can",
    "start": "1939650",
    "end": "1944690"
  },
  {
    "text": "absolutely do that or you can utilize something like OPA in the kubernetes policy controller that can help automate",
    "start": "1944690",
    "end": "1950840"
  },
  {
    "text": "this for you and reduce the management overhead of building this complex logic",
    "start": "1950840",
    "end": "1956600"
  },
  {
    "text": "I would also say definitely get involved",
    "start": "1956600",
    "end": "1961970"
  },
  {
    "text": "in this project the kubernetes policy controller it is a community project this is going to be a big",
    "start": "1961970",
    "end": "1968899"
  },
  {
    "text": "base and kubernetes over the next year so if you're looking to get involved",
    "start": "1968899",
    "end": "1974149"
  },
  {
    "text": "this is a great project to get involved in other sessions this week the first",
    "start": "1974149",
    "end": "1982070"
  },
  {
    "start": "1978000",
    "end": "1978000"
  },
  {
    "text": "ones on Wednesday the intro to open policy agent there will be a couple",
    "start": "1982070",
    "end": "1987409"
  },
  {
    "text": "customers actually speaking at that one and it will be with the maintainer zuv open policy agent the second one will do",
    "start": "1987409",
    "end": "1995149"
  },
  {
    "text": "a deep dive we just kind of touched the surface in this session the this deep dive for open policy agent will go very",
    "start": "1995149",
    "end": "2002139"
  },
  {
    "text": "deep and how exactly open policy agent works these are both great sessions I've",
    "start": "2002139",
    "end": "2007659"
  },
  {
    "text": "seen a couple of met last few cube cons but definitely check those out I will be",
    "start": "2007659",
    "end": "2014919"
  },
  {
    "text": "around all week so if you want to buy me a beer feel free to but if you have any",
    "start": "2014919",
    "end": "2022330"
  },
  {
    "text": "questions I love talking about this stuff so feel free to come up and say hi",
    "start": "2022330",
    "end": "2028559"
  },
  {
    "text": "thank you",
    "start": "2028559",
    "end": "2031739"
  }
]