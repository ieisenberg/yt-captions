[
  {
    "start": "0",
    "end": "73000"
  },
  {
    "text": "prospective on how the kubernetes",
    "start": "0",
    "end": "1199"
  },
  {
    "text": "project is laid out like I said I'm not",
    "start": "1199",
    "end": "3210"
  },
  {
    "text": "a kubernetes developer so it's gonna be",
    "start": "3210",
    "end": "5250"
  },
  {
    "text": "fairly limited in its scope but you",
    "start": "5250",
    "end": "8880"
  },
  {
    "text": "really need a good map if you're gonna",
    "start": "8880",
    "end": "10080"
  },
  {
    "text": "figure out where you're going in the",
    "start": "10080",
    "end": "11820"
  },
  {
    "text": "codebase and then we have two missions",
    "start": "11820",
    "end": "13620"
  },
  {
    "text": "to go on to find some really cool",
    "start": "13620",
    "end": "15599"
  },
  {
    "text": "technology and then I'll wrap it up with",
    "start": "15599",
    "end": "17520"
  },
  {
    "text": "a few lessons any good scavenger needs",
    "start": "17520",
    "end": "21900"
  },
  {
    "text": "really good tools so these are the tools",
    "start": "21900",
    "end": "23730"
  },
  {
    "text": "that I use I call them the five g's get",
    "start": "23730",
    "end": "28019"
  },
  {
    "text": "grep google go doc and then go run tests",
    "start": "28019",
    "end": "31529"
  },
  {
    "text": "I go basically what I mean by the last",
    "start": "31529",
    "end": "33270"
  },
  {
    "text": "one is sometimes it's easier for me to",
    "start": "33270",
    "end": "35820"
  },
  {
    "text": "explore the libraries in kubernetes or",
    "start": "35820",
    "end": "38309"
  },
  {
    "text": "in any large go project by writing some",
    "start": "38309",
    "end": "40320"
  },
  {
    "text": "simple throwaway scripts then rather",
    "start": "40320",
    "end": "42719"
  },
  {
    "text": "than trying to do it fully within the",
    "start": "42719",
    "end": "44640"
  },
  {
    "text": "context of my go project so that's an",
    "start": "44640",
    "end": "46680"
  },
  {
    "text": "approach that they take a lot and they",
    "start": "46680",
    "end": "49739"
  },
  {
    "text": "I'll demonstrate it let's see in the",
    "start": "49739",
    "end": "53670"
  },
  {
    "text": "bash on the left it's a little bit of",
    "start": "53670",
    "end": "55739"
  },
  {
    "text": "pseudo script I don't actually run that",
    "start": "55739",
    "end": "57120"
  },
  {
    "text": "that often but when I want to explore",
    "start": "57120",
    "end": "60960"
  },
  {
    "text": "the kubernetes codebase Pinchot specific",
    "start": "60960",
    "end": "62879"
  },
  {
    "text": "revision will check out the main repo",
    "start": "62879",
    "end": "64110"
  },
  {
    "text": "and then I'll go through and check out",
    "start": "64110",
    "end": "65100"
  },
  {
    "text": "all the staging repos and advance them",
    "start": "65100",
    "end": "66930"
  },
  {
    "text": "all to the revision that I want and have",
    "start": "66930",
    "end": "68850"
  },
  {
    "text": "like a cohesive view of the code that",
    "start": "68850",
    "end": "70740"
  },
  {
    "text": "way cool everyone I just I don't run",
    "start": "70740",
    "end": "76530"
  },
  {
    "start": "73000",
    "end": "178000"
  },
  {
    "text": "over time cool okay so let's talk about",
    "start": "76530",
    "end": "81119"
  },
  {
    "text": "linker D real quick - linker D is a",
    "start": "81119",
    "end": "83490"
  },
  {
    "text": "service mesh it's a CN CF project it has",
    "start": "83490",
    "end": "87240"
  },
  {
    "text": "lots of users and it provides",
    "start": "87240",
    "end": "90770"
  },
  {
    "text": "observability reliability and security",
    "start": "90770",
    "end": "93270"
  },
  {
    "text": "for your applications running on",
    "start": "93270",
    "end": "95280"
  },
  {
    "text": "kubernetes there's a lot of other talks",
    "start": "95280",
    "end": "99420"
  },
  {
    "text": "you can go to to learn more about G but",
    "start": "99420",
    "end": "101130"
  },
  {
    "text": "I will sort of just talk about the part",
    "start": "101130",
    "end": "104340"
  },
  {
    "text": "that's relevant to this talk right now",
    "start": "104340",
    "end": "106320"
  },
  {
    "text": "so lincolni is divided into a control",
    "start": "106320",
    "end": "109380"
  },
  {
    "text": "plane and a data plane the data plane",
    "start": "109380",
    "end": "112610"
  },
  {
    "text": "consists of proxies that run alongside",
    "start": "112610",
    "end": "114869"
  },
  {
    "text": "your application they use the kubernetes",
    "start": "114869",
    "end": "116759"
  },
  {
    "text": "pod model and the proxies handle all",
    "start": "116759",
    "end": "118890"
  },
  {
    "text": "inbound and outbound traffic for the",
    "start": "118890",
    "end": "121950"
  },
  {
    "text": "application and then the proxies receive",
    "start": "121950",
    "end": "124770"
  },
  {
    "text": "their configuration from a control plane",
    "start": "124770",
    "end": "126930"
  },
  {
    "text": "and the control plane also pulls all the",
    "start": "126930",
    "end": "130349"
  },
  {
    "text": "telemetry data out of the proc",
    "start": "130349",
    "end": "132620"
  },
  {
    "text": "so that it can be displayed in the web",
    "start": "132620",
    "end": "134090"
  },
  {
    "text": "UI of the CLI that kind of thing so this",
    "start": "134090",
    "end": "137180"
  },
  {
    "text": "is sort of the overall architecture of",
    "start": "137180",
    "end": "138860"
  },
  {
    "text": "linker D the control plane though the",
    "start": "138860",
    "end": "140900"
  },
  {
    "text": "proxies are written in rust in the data",
    "start": "140900",
    "end": "142610"
  },
  {
    "text": "plane the control plane is written in go",
    "start": "142610",
    "end": "144220"
  },
  {
    "text": "and there are a lot of parts of the",
    "start": "144220",
    "end": "146450"
  },
  {
    "text": "control plane that really are built on",
    "start": "146450",
    "end": "148069"
  },
  {
    "text": "top of kubernetes and I'm gonna focus on",
    "start": "148069",
    "end": "150769"
  },
  {
    "text": "two of them in this talk the first one",
    "start": "150769",
    "end": "152209"
  },
  {
    "text": "is the CLI so we have a linker DCL is",
    "start": "152209",
    "end": "154819"
  },
  {
    "text": "very similar to coop petal and second",
    "start": "154819",
    "end": "158480"
  },
  {
    "text": "one is the tap server so tap it's a",
    "start": "158480",
    "end": "160700"
  },
  {
    "text": "feature that allows us to tap into live",
    "start": "160700",
    "end": "162860"
  },
  {
    "text": "traffic and it receives a bunch of raw",
    "start": "162860",
    "end": "166430"
  },
  {
    "text": "routing data from the routers and needs",
    "start": "166430",
    "end": "168049"
  },
  {
    "text": "to make sense of it and it's written and",
    "start": "168049",
    "end": "170510"
  },
  {
    "text": "go so a lot of things in the controller",
    "start": "170510",
    "end": "173209"
  },
  {
    "text": "pod operate like kubernetes controllers",
    "start": "173209",
    "end": "176269"
  },
  {
    "text": "so if you're familiar those that will",
    "start": "176269",
    "end": "178879"
  },
  {
    "start": "178000",
    "end": "332000"
  },
  {
    "text": "help okay here we go I have sort of bit",
    "start": "178879",
    "end": "184099"
  },
  {
    "text": "off an enormous task with this talk",
    "start": "184099",
    "end": "186079"
  },
  {
    "text": "which is to talk through somebody else's",
    "start": "186079",
    "end": "187670"
  },
  {
    "text": "code base and to throw a lot of code up",
    "start": "187670",
    "end": "189680"
  },
  {
    "text": "on the screen and then hopefully make",
    "start": "189680",
    "end": "191959"
  },
  {
    "text": "sense of it so hopefully bear with me I",
    "start": "191959",
    "end": "194269"
  },
  {
    "text": "hope it's legible I'm gonna give you",
    "start": "194269",
    "end": "197269"
  },
  {
    "text": "sort of a quick layout and then we'll",
    "start": "197269",
    "end": "198500"
  },
  {
    "text": "dive in from there okay so we'll start",
    "start": "198500",
    "end": "202430"
  },
  {
    "text": "at the kubernetes project it's the",
    "start": "202430",
    "end": "204139"
  },
  {
    "text": "original repo I guess it looks like that",
    "start": "204139",
    "end": "206720"
  },
  {
    "text": "when you LS it there's a lot of stuff",
    "start": "206720",
    "end": "209359"
  },
  {
    "text": "here that I don't understand most of my",
    "start": "209359",
    "end": "212150"
  },
  {
    "text": "entry points though for the project are",
    "start": "212150",
    "end": "213769"
  },
  {
    "text": "through the either the command directory",
    "start": "213769",
    "end": "215359"
  },
  {
    "text": "CMD which contains all the mains for all",
    "start": "215359",
    "end": "218150"
  },
  {
    "text": "the processes that run in kubernetes so",
    "start": "218150",
    "end": "220430"
  },
  {
    "text": "this has the controller manager the API",
    "start": "220430",
    "end": "223010"
  },
  {
    "text": "server the couplet coop cuddle it's kind",
    "start": "223010",
    "end": "226400"
  },
  {
    "text": "of like the domain the mains for all of",
    "start": "226400",
    "end": "228560"
  },
  {
    "text": "those processes and then a lot of the",
    "start": "228560",
    "end": "230750"
  },
  {
    "text": "meat of the implementation of those",
    "start": "230750",
    "end": "232310"
  },
  {
    "text": "processes lives in the package directory",
    "start": "232310",
    "end": "234519"
  },
  {
    "text": "there's a lot of other stuff in the",
    "start": "234519",
    "end": "236329"
  },
  {
    "text": "package directory but that's sort of",
    "start": "236329",
    "end": "238099"
  },
  {
    "text": "where I start and then I am not too",
    "start": "238099",
    "end": "241489"
  },
  {
    "text": "familiar with the history the kubernetes",
    "start": "241489",
    "end": "242959"
  },
  {
    "text": "project but I take it at some point they",
    "start": "242959",
    "end": "245060"
  },
  {
    "text": "decided to split it up into multiple",
    "start": "245060",
    "end": "246470"
  },
  {
    "text": "separate projects and those projects",
    "start": "246470",
    "end": "248690"
  },
  {
    "text": "ended up in the staging directory and in",
    "start": "248690",
    "end": "252440"
  },
  {
    "text": "order to sort of continue to build the",
    "start": "252440",
    "end": "255199"
  },
  {
    "text": "project sanely the projects and the",
    "start": "255199",
    "end": "258079"
  },
  {
    "text": "staging directory on publish or publish",
    "start": "258079",
    "end": "260389"
  },
  {
    "text": "out to other repos but they're sort of",
    "start": "260389",
    "end": "261769"
  },
  {
    "text": "developed in the main repo I think but",
    "start": "261769",
    "end": "264740"
  },
  {
    "text": "there's a lot of stuff in there if you",
    "start": "264740",
    "end": "266000"
  },
  {
    "text": "dig into the",
    "start": "266000",
    "end": "266690"
  },
  {
    "text": "staging repos so these are all separate",
    "start": "266690",
    "end": "269480"
  },
  {
    "text": "projects that have live in separate",
    "start": "269480",
    "end": "271100"
  },
  {
    "text": "repositories but work in coordination",
    "start": "271100",
    "end": "273650"
  },
  {
    "text": "with kubernetes and that's not all if",
    "start": "273650",
    "end": "275630"
  },
  {
    "text": "you look even farther there's more",
    "start": "275630",
    "end": "277310"
  },
  {
    "text": "projects that are in the case do or that",
    "start": "277310",
    "end": "280750"
  },
  {
    "text": "started outside of the repo itself so",
    "start": "280750",
    "end": "283190"
  },
  {
    "text": "they aren't in the staging directory so",
    "start": "283190",
    "end": "285710"
  },
  {
    "text": "we're not just talking about the",
    "start": "285710",
    "end": "286520"
  },
  {
    "text": "community's repo we're talking about 40",
    "start": "286520",
    "end": "288500"
  },
  {
    "text": "of these projects basically that we",
    "start": "288500",
    "end": "290780"
  },
  {
    "text": "could dig through and rummage around in",
    "start": "290780",
    "end": "292220"
  },
  {
    "text": "but I don't actually know a lot about",
    "start": "292220",
    "end": "294140"
  },
  {
    "text": "all of those projects so I will stick",
    "start": "294140",
    "end": "295880"
  },
  {
    "text": "with the ones that I'm familiar with",
    "start": "295880",
    "end": "297260"
  },
  {
    "text": "which is CLO CLI runtime for building",
    "start": "297260",
    "end": "301400"
  },
  {
    "text": "coop cuddle and cuddle like commands",
    "start": "301400",
    "end": "303320"
  },
  {
    "text": "seems relevant to the linker T project",
    "start": "303320",
    "end": "305090"
  },
  {
    "text": "client go which is the main repo for",
    "start": "305090",
    "end": "307520"
  },
  {
    "text": "interfacing with kubernetes api and then",
    "start": "307520",
    "end": "310610"
  },
  {
    "text": "that's also very tightly coupled to the",
    "start": "310610",
    "end": "312620"
  },
  {
    "text": "API and API machinery repos API has the",
    "start": "312620",
    "end": "315800"
  },
  {
    "text": "schema for the eye itself it's a lot of",
    "start": "315800",
    "end": "317540"
  },
  {
    "text": "protobuf and API machinery is the",
    "start": "317540",
    "end": "321040"
  },
  {
    "text": "libraries and interfaces for interacting",
    "start": "321040",
    "end": "323420"
  },
  {
    "text": "with the API and we use a couple other",
    "start": "323420",
    "end": "327220"
  },
  {
    "text": "libraries too but we're not gonna talk",
    "start": "327220",
    "end": "330350"
  },
  {
    "text": "about that in this talk okay so we've",
    "start": "330350",
    "end": "334220"
  },
  {
    "start": "332000",
    "end": "440000"
  },
  {
    "text": "made it to our first mission first",
    "start": "334220",
    "end": "336590"
  },
  {
    "text": "scavenging mission into the kubernetes",
    "start": "336590",
    "end": "338720"
  },
  {
    "text": "codebase there is a very common pattern",
    "start": "338720",
    "end": "342110"
  },
  {
    "text": "when you use linker d of injecting the",
    "start": "342110",
    "end": "345830"
  },
  {
    "text": "practice so I mentioned that the data",
    "start": "345830",
    "end": "347180"
  },
  {
    "text": "plane has these proxies in your pod",
    "start": "347180",
    "end": "348530"
  },
  {
    "text": "model so we call that injection when the",
    "start": "348530",
    "end": "350270"
  },
  {
    "text": "pod the container for the proxy gets put",
    "start": "350270",
    "end": "353600"
  },
  {
    "text": "into your hot spec and so typically the",
    "start": "353600",
    "end": "355250"
  },
  {
    "text": "way that works is you would run linker D",
    "start": "355250",
    "end": "357169"
  },
  {
    "text": "inject on your manifest and then it",
    "start": "357169",
    "end": "359120"
  },
  {
    "text": "would modify your pod specs to include",
    "start": "359120",
    "end": "361190"
  },
  {
    "text": "the proxies and then you would pipe that",
    "start": "361190",
    "end": "362720"
  },
  {
    "text": "to goo puddle apply and then it gets up",
    "start": "362720",
    "end": "366260"
  },
  {
    "text": "in or in your cluster and so that way",
    "start": "366260",
    "end": "367700"
  },
  {
    "text": "you have all of your apps running with",
    "start": "367700",
    "end": "369770"
  },
  {
    "text": "the proxies and so this is like a very",
    "start": "369770",
    "end": "371120"
  },
  {
    "text": "common pattern like if I have a hello",
    "start": "371120",
    "end": "372680"
  },
  {
    "text": "world manifest then I would inject it",
    "start": "372680",
    "end": "375260"
  },
  {
    "text": "and then apply it and you can see here",
    "start": "375260",
    "end": "376850"
  },
  {
    "text": "that the first four lines of output come",
    "start": "376850",
    "end": "379130"
  },
  {
    "text": "from linker D and the second four lines",
    "start": "379130",
    "end": "382880"
  },
  {
    "text": "of output come from crew cuddle and they",
    "start": "382880",
    "end": "385130"
  },
  {
    "text": "do not look at this game and this is the",
    "start": "385130",
    "end": "386930"
  },
  {
    "text": "kind of thing that drives me crazy",
    "start": "386930",
    "end": "390169"
  },
  {
    "text": "I feel like you know why is it the COO",
    "start": "390169",
    "end": "392360"
  },
  {
    "text": "cuddle prints deployment extension says",
    "start": "392360",
    "end": "394250"
  },
  {
    "text": "hello",
    "start": "394250",
    "end": "395000"
  },
  {
    "text": "where is linker deployed prints",
    "start": "395000",
    "end": "396720"
  },
  {
    "text": "appointment hello in quotes clearly",
    "start": "396720",
    "end": "400140"
  },
  {
    "text": "there's code somewhere in the the domain",
    "start": "400140",
    "end": "404340"
  },
  {
    "text": "of coop cuddle that matches these",
    "start": "404340",
    "end": "405780"
  },
  {
    "text": "strings together in some way and we're",
    "start": "405780",
    "end": "407250"
  },
  {
    "text": "not doing it the same way but we",
    "start": "407250",
    "end": "409260"
  },
  {
    "text": "probably could if we could just find the",
    "start": "409260",
    "end": "411330"
  },
  {
    "text": "code that does that so that's kind of",
    "start": "411330",
    "end": "412830"
  },
  {
    "text": "what what I set out to do one day and so",
    "start": "412830",
    "end": "417270"
  },
  {
    "text": "we can see if we can fix it okay so",
    "start": "417270",
    "end": "421620"
  },
  {
    "text": "we're about to enter the zone with all",
    "start": "421620",
    "end": "424800"
  },
  {
    "text": "of the amazing alien technology like I",
    "start": "424800",
    "end": "427170"
  },
  {
    "text": "said I'm gonna put a lot of stuff up on",
    "start": "427170",
    "end": "428730"
  },
  {
    "text": "the screen and I hope it's sort of",
    "start": "428730",
    "end": "431100"
  },
  {
    "text": "coherent to walk through it and at the",
    "start": "431100",
    "end": "434070"
  },
  {
    "text": "end we can follow up with any questions",
    "start": "434070",
    "end": "435390"
  },
  {
    "text": "if you have them so we start our journey",
    "start": "435390",
    "end": "437670"
  },
  {
    "text": "in the criminals repo namespaces so for",
    "start": "437670",
    "end": "441780"
  },
  {
    "text": "our very very rough implementation of",
    "start": "441780",
    "end": "444210"
  },
  {
    "text": "the find pod by IP we can take the lists",
    "start": "444210",
    "end": "446580"
  },
  {
    "text": "all pods approach where we create a new",
    "start": "446580",
    "end": "449040"
  },
  {
    "text": "config we call this pods and then we",
    "start": "449040",
    "end": "452250"
  },
  {
    "text": "just iterate through every pod and we",
    "start": "452250",
    "end": "454440"
  },
  {
    "text": "return the one that has the matching IP",
    "start": "454440",
    "end": "456660"
  },
  {
    "text": "I am gonna rate this approach three",
    "start": "456660",
    "end": "460320"
  },
  {
    "text": "Frannie faces because it is very",
    "start": "460320",
    "end": "463770"
  },
  {
    "text": "inefficient every time you need to look",
    "start": "463770",
    "end": "464850"
  },
  {
    "text": "up a pod by IP it doesn't make sense to",
    "start": "464850",
    "end": "466380"
  },
  {
    "text": "pull every single pod in every single",
    "start": "466380",
    "end": "467970"
  },
  {
    "text": "namespace and try to try to find it and",
    "start": "467970",
    "end": "470280"
  },
  {
    "text": "we can do a lot better and we do a lot",
    "start": "470280",
    "end": "472200"
  },
  {
    "text": "better without a lot more sophistication",
    "start": "472200",
    "end": "473910"
  },
  {
    "text": "from the kubernetes api because",
    "start": "473910",
    "end": "475050"
  },
  {
    "text": "kubernetes also includes watching you",
    "start": "475050",
    "end": "477990"
  },
  {
    "text": "know every api endpoint has a watch as",
    "start": "477990",
    "end": "480030"
  },
  {
    "text": "well which will send you incremental",
    "start": "480030",
    "end": "481320"
  },
  {
    "text": "updates as things change so this",
    "start": "481320",
    "end": "483900"
  },
  {
    "text": "approach is a little more complicated",
    "start": "483900",
    "end": "485070"
  },
  {
    "text": "because we need to have a map with",
    "start": "485070",
    "end": "487169"
  },
  {
    "text": "concurrent access that we maintain a",
    "start": "487169",
    "end": "489120"
  },
  {
    "text": "memory of pods by their IP address so",
    "start": "489120",
    "end": "492300"
  },
  {
    "text": "that is this struct it has a mutex and",
    "start": "492300",
    "end": "495330"
  },
  {
    "text": "really it's just a map of string to pod",
    "start": "495330",
    "end": "497570"
  },
  {
    "text": "to very basic functions one to add",
    "start": "497570",
    "end": "500610"
  },
  {
    "text": "things to the map and one to retrieve",
    "start": "500610",
    "end": "502380"
  },
  {
    "text": "things from the map and with that we can",
    "start": "502380",
    "end": "504780"
  },
  {
    "text": "sort of rewrite our list pods approach",
    "start": "504780",
    "end": "506610"
  },
  {
    "text": "to set up a new a new map and then call",
    "start": "506610",
    "end": "511860"
  },
  {
    "text": "watch and then in a separate go routine",
    "start": "511860",
    "end": "513990"
  },
  {
    "text": "we can process the watch events and",
    "start": "513990",
    "end": "516120"
  },
  {
    "text": "populate the map and then once we start",
    "start": "516120",
    "end": "520140"
  },
  {
    "text": "the Guru team we just sleep for a second",
    "start": "520140",
    "end": "521760"
  },
  {
    "text": "because let's hope that that's how long",
    "start": "521760",
    "end": "523380"
  },
  {
    "text": "it takes for all the watch events to",
    "start": "523380",
    "end": "524850"
  },
  {
    "text": "propagate through and for the map to be",
    "start": "524850",
    "end": "526350"
  },
  {
    "text": "completely populated before our script",
    "start": "526350",
    "end": "528209"
  },
  {
    "text": "precedes and",
    "start": "528209",
    "end": "530550"
  },
  {
    "text": "after that we can just retrieve from the",
    "start": "530550",
    "end": "531839"
  },
  {
    "text": "map and we are able to return the pot",
    "start": "531839",
    "end": "534649"
  },
  {
    "text": "this roach gets three neutral phases",
    "start": "534649",
    "end": "538140"
  },
  {
    "text": "because we'll sleep for one thing but",
    "start": "538140",
    "end": "541560"
  },
  {
    "text": "it's also just sort of a lot of",
    "start": "541560",
    "end": "542730"
  },
  {
    "text": "machinery and it's also hard to know",
    "start": "542730",
    "end": "545430"
  },
  {
    "text": "when the map is fully populated and if",
    "start": "545430",
    "end": "548310"
  },
  {
    "text": "we make a mistake processing our watch",
    "start": "548310",
    "end": "550079"
  },
  {
    "text": "events there's no type of reconciliation",
    "start": "550079",
    "end": "552240"
  },
  {
    "text": "right we could end up like really out of",
    "start": "552240",
    "end": "553890"
  },
  {
    "text": "sync with what's actually in the API so",
    "start": "553890",
    "end": "557370"
  },
  {
    "text": "at this point in the development process",
    "start": "557370",
    "end": "558959"
  },
  {
    "text": "like our group starts to think like well",
    "start": "558959",
    "end": "561269"
  },
  {
    "text": "there's probably a better way to do this",
    "start": "561269",
    "end": "563880"
  },
  {
    "text": "and we start using a different",
    "start": "563880",
    "end": "566640"
  },
  {
    "text": "scavenging tool that I like to call",
    "start": "566640",
    "end": "568110"
  },
  {
    "text": "Google where we start start just",
    "start": "568110",
    "end": "570390"
  },
  {
    "text": "fumbling around for how to cache",
    "start": "570390",
    "end": "572220"
  },
  {
    "text": "responses with client go and that takes",
    "start": "572220",
    "end": "574740"
  },
  {
    "text": "us to the cache package from client go",
    "start": "574740",
    "end": "577220"
  },
  {
    "text": "and this is a big package package cache",
    "start": "577220",
    "end": "579930"
  },
  {
    "text": "is a client-side caching mechanism and",
    "start": "579930",
    "end": "582990"
  },
  {
    "text": "then it is useful reducing the number of",
    "start": "582990",
    "end": "585180"
  },
  {
    "text": "server calls you would otherwise need to",
    "start": "585180",
    "end": "586350"
  },
  {
    "text": "make sounds great reflectors the",
    "start": "586350",
    "end": "589110"
  },
  {
    "text": "reflector watches a server and updates a",
    "start": "589110",
    "end": "591089"
  },
  {
    "text": "store less clear what that means and",
    "start": "591089",
    "end": "593250"
  },
  {
    "text": "then two stores are provided one that",
    "start": "593250",
    "end": "594570"
  },
  {
    "text": "simply caches and one that acts as a",
    "start": "594570",
    "end": "596640"
  },
  {
    "text": "FIFO queue so anyway I think we're in",
    "start": "596640",
    "end": "598890"
  },
  {
    "text": "the right place so at this point I kind",
    "start": "598890",
    "end": "600329"
  },
  {
    "text": "of scroll up and down the page and I get",
    "start": "600329",
    "end": "602160"
  },
  {
    "text": "some information so package cache store",
    "start": "602160",
    "end": "605459"
  },
  {
    "text": "isn't object nervous queue is like a",
    "start": "605459",
    "end": "607470"
  },
  {
    "text": "store but there's also a heap in here",
    "start": "607470",
    "end": "609779"
  },
  {
    "text": "there's a reflector which watches a",
    "start": "609779",
    "end": "611459"
  },
  {
    "text": "resource and updates a store there's a",
    "start": "611459",
    "end": "613620"
  },
  {
    "text": "thing called config which produces a",
    "start": "613620",
    "end": "616050"
  },
  {
    "text": "controller controller is not documented",
    "start": "616050",
    "end": "618779"
  },
  {
    "text": "all actually still don't know what a",
    "start": "618779",
    "end": "619980"
  },
  {
    "text": "controller is from the cache package but",
    "start": "619980",
    "end": "622740"
  },
  {
    "text": "there's something called an indexer and",
    "start": "622740",
    "end": "624149"
  },
  {
    "text": "hey we were building an indexer in our",
    "start": "624149",
    "end": "625589"
  },
  {
    "text": "previous implementation and it's a",
    "start": "625589",
    "end": "627450"
  },
  {
    "text": "storage interface that lets you list",
    "start": "627450",
    "end": "628649"
  },
  {
    "text": "objects using multiple indexing",
    "start": "628649",
    "end": "630240"
  },
  {
    "text": "functions it sounds like we're on the",
    "start": "630240",
    "end": "631500"
  },
  {
    "text": "right track and new indexer returns in",
    "start": "631500",
    "end": "633839"
  },
  {
    "text": "index are implemented simply with a map",
    "start": "633839",
    "end": "635640"
  },
  {
    "text": "and a lock which is very similar to what",
    "start": "635640",
    "end": "637620"
  },
  {
    "text": "we were doing on our own so maybe we can",
    "start": "637620",
    "end": "639690"
  },
  {
    "text": "reuse this code so at this point I'll go",
    "start": "639690",
    "end": "643140"
  },
  {
    "text": "back to the grep scavenging tool and",
    "start": "643140",
    "end": "645390"
  },
  {
    "text": "search the code base and actually not a",
    "start": "645390",
    "end": "647670"
  },
  {
    "text": "lot of places are using the new indexer",
    "start": "647670",
    "end": "649620"
  },
  {
    "text": "function but the couplet is and if it's",
    "start": "649620",
    "end": "651899"
  },
  {
    "text": "working for the Kubla it's probably good",
    "start": "651899",
    "end": "653730"
  },
  {
    "text": "enough for us so we can look at that",
    "start": "653730",
    "end": "655410"
  },
  {
    "text": "implementation and here it calls new",
    "start": "655410",
    "end": "657510"
  },
  {
    "text": "indexer and it creates a",
    "start": "657510",
    "end": "659960"
  },
  {
    "text": "index based on the namespace of the",
    "start": "659960",
    "end": "661940"
  },
  {
    "text": "service I think and rather than go",
    "start": "661940",
    "end": "665000"
  },
  {
    "text": "through this whole example I'll just",
    "start": "665000",
    "end": "665870"
  },
  {
    "text": "show you how we up could update our",
    "start": "665870",
    "end": "667640"
  },
  {
    "text": "script to take advantage of all this",
    "start": "667640",
    "end": "669470"
  },
  {
    "text": "technology which is the cache indexer",
    "start": "669470",
    "end": "671450"
  },
  {
    "text": "approach first thing we need is an",
    "start": "671450",
    "end": "673399"
  },
  {
    "text": "indexing function to index pods by their",
    "start": "673399",
    "end": "676040"
  },
  {
    "text": "at these so it will receive an object",
    "start": "676040",
    "end": "677360"
  },
  {
    "text": "casted to a pod take its IP address",
    "start": "677360",
    "end": "679089"
  },
  {
    "text": "return that value and then with that we",
    "start": "679089",
    "end": "682010"
  },
  {
    "text": "can create our index err with our pods",
    "start": "682010",
    "end": "685880"
  },
  {
    "text": "by IP funk and then after digging",
    "start": "685880",
    "end": "688910"
  },
  {
    "text": "through the cache package more we",
    "start": "688910",
    "end": "690529"
  },
  {
    "text": "discover that we also need something",
    "start": "690529",
    "end": "691730"
  },
  {
    "text": "called a list watcher which can list and",
    "start": "691730",
    "end": "693890"
  },
  {
    "text": "watch the pods endpoint and then we need",
    "start": "693890",
    "end": "696529"
  },
  {
    "text": "a reflector to take the updates from our",
    "start": "696529",
    "end": "699020"
  },
  {
    "text": "list watcher and update them in the",
    "start": "699020",
    "end": "700610"
  },
  {
    "text": "indexer that we've provided it and then",
    "start": "700610",
    "end": "702649"
  },
  {
    "text": "we go ahead and run the reflector in a",
    "start": "702649",
    "end": "704300"
  },
  {
    "text": "separate go routine and every hundred",
    "start": "704300",
    "end": "706370"
  },
  {
    "text": "milliseconds we check to see if the",
    "start": "706370",
    "end": "708200"
  },
  {
    "text": "reflectors last resource version has",
    "start": "708200",
    "end": "710720"
  },
  {
    "text": "been updated which tells us that it's",
    "start": "710720",
    "end": "713300"
  },
  {
    "text": "fully synced so now we're no longer",
    "start": "713300",
    "end": "714980"
  },
  {
    "text": "doing an arbitrary sleep at least and",
    "start": "714980",
    "end": "716810"
  },
  {
    "text": "then when it's fully synced we can",
    "start": "716810",
    "end": "718370"
  },
  {
    "text": "proceed with the script and we can find",
    "start": "718370",
    "end": "719839"
  },
  {
    "text": "the pod IP address and I will just tell",
    "start": "719839",
    "end": "723350"
  },
  {
    "text": "you that this seems pretty complicated",
    "start": "723350",
    "end": "726490"
  },
  {
    "text": "so it gets my three thinking face emoji",
    "start": "726490",
    "end": "729820"
  },
  {
    "text": "and this worked and I we did this in the",
    "start": "729820",
    "end": "735320"
  },
  {
    "text": "lincolni project for a long time for a",
    "start": "735320",
    "end": "737240"
  },
  {
    "text": "lot of different objects and it totally",
    "start": "737240",
    "end": "738650"
  },
  {
    "text": "works it has all of the features that we",
    "start": "738650",
    "end": "740959"
  },
  {
    "text": "need it has reconciliation it has full",
    "start": "740959",
    "end": "743209"
  },
  {
    "text": "caching you can also add event handlers",
    "start": "743209",
    "end": "745160"
  },
  {
    "text": "to sort of act on different types of",
    "start": "745160",
    "end": "747170"
  },
  {
    "text": "updates but there's a better way and I",
    "start": "747170",
    "end": "751250"
  },
  {
    "text": "found out about that better way by",
    "start": "751250",
    "end": "752540"
  },
  {
    "text": "watching GGI k which is Jobos friday",
    "start": "752540",
    "end": "755300"
  },
  {
    "text": "afternoon like let's do stuff with",
    "start": "755300",
    "end": "757400"
  },
  {
    "text": "kubernetes thing and he starts to build",
    "start": "757400",
    "end": "760160"
  },
  {
    "text": "a controller and in it he uses something",
    "start": "760160",
    "end": "761690"
  },
  {
    "text": "called shared informers it's in the",
    "start": "761690",
    "end": "763339"
  },
  {
    "text": "screenshot here but let's enhance it",
    "start": "763339",
    "end": "764779"
  },
  {
    "text": "real quick",
    "start": "764779",
    "end": "765709"
  },
  {
    "text": "basically you create a new oh another",
    "start": "765709",
    "end": "769070"
  },
  {
    "text": "thing that he uses is new config or Die",
    "start": "769070",
    "end": "770930"
  },
  {
    "text": "which we were not using in our own code",
    "start": "770930",
    "end": "773480"
  },
  {
    "text": "base but it's pretty fun so we can",
    "start": "773480",
    "end": "775160"
  },
  {
    "text": "improve our script with that and then",
    "start": "775160",
    "end": "778520"
  },
  {
    "text": "yeah you get a new shared and former",
    "start": "778520",
    "end": "780350"
  },
  {
    "text": "factory and from that produces informers",
    "start": "780350",
    "end": "782329"
  },
  {
    "text": "for various types of API objects like",
    "start": "782329",
    "end": "784399"
  },
  {
    "text": "secrets and namespaces and in order to",
    "start": "784399",
    "end": "787670"
  },
  {
    "text": "not run out of time we'll just rushing",
    "start": "787670",
    "end": "789950"
  },
  {
    "text": "this so this is now the way we've",
    "start": "789950",
    "end": "791450"
  },
  {
    "text": "updated our code so we",
    "start": "791450",
    "end": "792450"
  },
  {
    "text": "of our new config or die we create our",
    "start": "792450",
    "end": "796440"
  },
  {
    "text": "shared informers we grab the pot",
    "start": "796440",
    "end": "798510"
  },
  {
    "text": "Informer and we add an indexer to it",
    "start": "798510",
    "end": "800580"
  },
  {
    "text": "using the same pod by IP index function",
    "start": "800580",
    "end": "803280"
  },
  {
    "text": "that we had already created we call",
    "start": "803280",
    "end": "805320"
  },
  {
    "text": "shared informers start and then there's",
    "start": "805320",
    "end": "806850"
  },
  {
    "text": "actually a cache utility that we found",
    "start": "806850",
    "end": "808710"
  },
  {
    "text": "in the cache package that lets you wait",
    "start": "808710",
    "end": "810540"
  },
  {
    "text": "until shared informer succinct the",
    "start": "810540",
    "end": "813750"
  },
  {
    "text": "implementation that is exactly like the",
    "start": "813750",
    "end": "815190"
  },
  {
    "text": "imitation we had it just checks every",
    "start": "815190",
    "end": "817020"
  },
  {
    "text": "100 milliseconds to see if it has synced",
    "start": "817020",
    "end": "818820"
  },
  {
    "text": "but it's a lot less code in our own",
    "start": "818820",
    "end": "821070"
  },
  {
    "text": "codebase and then at that point it's",
    "start": "821070",
    "end": "823230"
  },
  {
    "text": "able to read the IP from the index so I",
    "start": "823230",
    "end": "826290"
  },
  {
    "text": "would say we have found it we've sort of",
    "start": "826290",
    "end": "828750"
  },
  {
    "text": "this is the trove of alien technology",
    "start": "828750",
    "end": "830310"
  },
  {
    "text": "that we can really use to our advantage",
    "start": "830310",
    "end": "832790"
  },
  {
    "text": "and there's a couple things that we get",
    "start": "832790",
    "end": "835860"
  },
  {
    "text": "for free by adopting shared informers",
    "start": "835860",
    "end": "838880"
  },
  {
    "text": "one of them is that you can configure",
    "start": "838880",
    "end": "840840"
  },
  {
    "text": "shared informers to run in a restricted",
    "start": "840840",
    "end": "843690"
  },
  {
    "text": "mode so we have a need to run our",
    "start": "843690",
    "end": "845820"
  },
  {
    "text": "control plane with limited are back",
    "start": "845820",
    "end": "847890"
  },
  {
    "text": "permissions it would typically read all",
    "start": "847890",
    "end": "849390"
  },
  {
    "text": "resources in all namespaces in the",
    "start": "849390",
    "end": "850950"
  },
  {
    "text": "cluster but if we wanted to run it in a",
    "start": "850950",
    "end": "853020"
  },
  {
    "text": "single namespace we would have to sort",
    "start": "853020",
    "end": "854940"
  },
  {
    "text": "of make sure we're not trying to read",
    "start": "854940",
    "end": "856470"
  },
  {
    "text": "any objects from any other namespaces",
    "start": "856470",
    "end": "857970"
  },
  {
    "text": "and you might think that that's like a",
    "start": "857970",
    "end": "859260"
  },
  {
    "text": "lot of code but shared informers already",
    "start": "859260",
    "end": "861690"
  },
  {
    "text": "has an implementation that's restricted",
    "start": "861690",
    "end": "863400"
  },
  {
    "text": "to a single namespace and this is the",
    "start": "863400",
    "end": "864780"
  },
  {
    "text": "entirety of the change to have all the",
    "start": "864780",
    "end": "867090"
  },
  {
    "text": "existing code work in a single namespace",
    "start": "867090",
    "end": "868920"
  },
  {
    "text": "so it really helps us configure it in",
    "start": "868920",
    "end": "871740"
  },
  {
    "text": "that way and there's other ways that you",
    "start": "871740",
    "end": "872820"
  },
  {
    "text": "can configure shared informers too and",
    "start": "872820",
    "end": "874710"
  },
  {
    "text": "then the other thing you get is",
    "start": "874710",
    "end": "875900"
  },
  {
    "text": "straightforward test fixtures so if",
    "start": "875900",
    "end": "878280"
  },
  {
    "text": "you're already using the kubernetes",
    "start": "878280",
    "end": "879930"
  },
  {
    "text": "client interface there's a really good",
    "start": "879930",
    "end": "883400"
  },
  {
    "text": "new like a fake client that you can use",
    "start": "883400",
    "end": "886320"
  },
  {
    "text": "that you can pre populate with API",
    "start": "886320",
    "end": "887790"
  },
  {
    "text": "objects and then those will be returned",
    "start": "887790",
    "end": "889260"
  },
  {
    "text": "immediately so in this example I have",
    "start": "889260",
    "end": "892350"
  },
  {
    "text": "just a stubbed IP address and I create a",
    "start": "892350",
    "end": "894210"
  },
  {
    "text": "fake pod associated with addressing when",
    "start": "894210",
    "end": "895800"
  },
  {
    "text": "I initialize the client I pass in the",
    "start": "895800",
    "end": "897480"
  },
  {
    "text": "pod and all the rest of the code runs as",
    "start": "897480",
    "end": "899760"
  },
  {
    "text": "expected and it's able to find the pod",
    "start": "899760",
    "end": "901440"
  },
  {
    "text": "by IP with just that amount of change in",
    "start": "901440",
    "end": "904950"
  },
  {
    "text": "the script okay so I just have a couple",
    "start": "904950",
    "end": "908820"
  },
  {
    "start": "905000",
    "end": "1061000"
  },
  {
    "text": "more minutes to stick with me and we",
    "start": "908820",
    "end": "910470"
  },
  {
    "text": "will go through the finale but you know",
    "start": "910470",
    "end": "913230"
  },
  {
    "text": "I think we did a good job here we got",
    "start": "913230",
    "end": "915270"
  },
  {
    "text": "some intelligence about the lincolni",
    "start": "915270",
    "end": "916500"
  },
  {
    "text": "codebase we sort of set up a rough",
    "start": "916500",
    "end": "919380"
  },
  {
    "text": "mental map of the kubernetes zone",
    "start": "919380",
    "end": "920850"
  },
  {
    "text": "planned out a few routes executed on",
    "start": "920850",
    "end": "923280"
  },
  {
    "text": "those routes returned with some",
    "start": "923280",
    "end": "924360"
  },
  {
    "text": "interesting technology",
    "start": "924360",
    "end": "925530"
  },
  {
    "text": "and use some tools of the trade get grab",
    "start": "925530",
    "end": "928800"
  },
  {
    "text": "Google go duck that kind of thing so at",
    "start": "928800",
    "end": "933240"
  },
  {
    "text": "the end of all this I want to leave you",
    "start": "933240",
    "end": "934830"
  },
  {
    "text": "is just a few more thoughts one of them",
    "start": "934830",
    "end": "938010"
  },
  {
    "text": "is research in advance like a lot of",
    "start": "938010",
    "end": "939810"
  },
  {
    "text": "this information that I have told you is",
    "start": "939810",
    "end": "941700"
  },
  {
    "text": "out there in bits and pieces on the",
    "start": "941700",
    "end": "943350"
  },
  {
    "text": "internet it's in talks it's in blogs you",
    "start": "943350",
    "end": "946800"
  },
  {
    "text": "know I don't actually have my finger on",
    "start": "946800",
    "end": "948390"
  },
  {
    "text": "the pulse of what the kubernetes project",
    "start": "948390",
    "end": "950070"
  },
  {
    "text": "is doing so it's a little hard sometimes",
    "start": "950070",
    "end": "951810"
  },
  {
    "text": "to just jump in cold turkey",
    "start": "951810",
    "end": "954060"
  },
  {
    "text": "so it's it's helpful I think to sort of",
    "start": "954060",
    "end": "956880"
  },
  {
    "text": "do some do some scavenging outside the",
    "start": "956880",
    "end": "959430"
  },
  {
    "text": "code base before you really dive in full",
    "start": "959430",
    "end": "961320"
  },
  {
    "text": "force yeah another thing is reusable",
    "start": "961320",
    "end": "965310"
  },
  {
    "text": "examples so in the staging directory of",
    "start": "965310",
    "end": "967260"
  },
  {
    "text": "the project there's all these libraries",
    "start": "967260",
    "end": "968520"
  },
  {
    "text": "so client go is one of them clank o has",
    "start": "968520",
    "end": "970710"
  },
  {
    "text": "this examples directory that's really",
    "start": "970710",
    "end": "972510"
  },
  {
    "text": "rich for people just getting started",
    "start": "972510",
    "end": "974550"
  },
  {
    "text": "with that library it would be great to",
    "start": "974550",
    "end": "975870"
  },
  {
    "text": "see an examples directory for every",
    "start": "975870",
    "end": "977790"
  },
  {
    "text": "other staging project in the repo that",
    "start": "977790",
    "end": "980250"
  },
  {
    "text": "shows how to use that project in",
    "start": "980250",
    "end": "981990"
  },
  {
    "text": "isolation from the rest of the projects",
    "start": "981990",
    "end": "983670"
  },
  {
    "text": "for instance the LA runtime could have",
    "start": "983670",
    "end": "986010"
  },
  {
    "text": "an example project of building like a",
    "start": "986010",
    "end": "987600"
  },
  {
    "text": "really small CLI that interacts with",
    "start": "987600",
    "end": "989370"
  },
  {
    "text": "like kubernetes that kind of thing",
    "start": "989370",
    "end": "992240"
  },
  {
    "text": "another point to make is sort of based",
    "start": "992240",
    "end": "994740"
  },
  {
    "text": "on my combing of the cache package go",
    "start": "994740",
    "end": "999390"
  },
  {
    "text": "doc is maybe not sufficient for fully",
    "start": "999390",
    "end": "1001730"
  },
  {
    "text": "documenting how all the pieces of a",
    "start": "1001730",
    "end": "1003589"
  },
  {
    "text": "package fit together I think it's really",
    "start": "1003589",
    "end": "1005120"
  },
  {
    "text": "good for documenting the individual",
    "start": "1005120",
    "end": "1007700"
  },
  {
    "text": "pieces but if we could figure out a way",
    "start": "1007700",
    "end": "1010850"
  },
  {
    "text": "to get kind of a higher level overview",
    "start": "1010850",
    "end": "1012700"
  },
  {
    "text": "and steer people in the right direction",
    "start": "1012700",
    "end": "1014839"
  },
  {
    "text": "I think that would be really helpful and",
    "start": "1014839",
    "end": "1017330"
  },
  {
    "text": "in some cases I think it would be good",
    "start": "1017330",
    "end": "1019100"
  },
  {
    "text": "to break up the packages into smaller",
    "start": "1019100",
    "end": "1020960"
  },
  {
    "text": "pieces it's not like an ultimatum but I",
    "start": "1020960",
    "end": "1024199"
  },
  {
    "text": "do feel like it's a little easier to",
    "start": "1024199",
    "end": "1026390"
  },
  {
    "text": "wade through some of these packages if",
    "start": "1026390",
    "end": "1028459"
  },
  {
    "text": "they come in a little smaller chunks at",
    "start": "1028459",
    "end": "1030350"
  },
  {
    "text": "least that's been my experience so far",
    "start": "1030350",
    "end": "1033550"
  },
  {
    "text": "so anyway so that's all I really have to",
    "start": "1033550",
    "end": "1036438"
  },
  {
    "text": "say on the topic I really appreciate you",
    "start": "1036439",
    "end": "1038630"
  },
  {
    "text": "coming to the talk if you want to learn",
    "start": "1038630",
    "end": "1040310"
  },
  {
    "text": "more about linker D there is a booth in",
    "start": "1040310",
    "end": "1042949"
  },
  {
    "text": "the booth area",
    "start": "1042949",
    "end": "1044780"
  },
  {
    "text": "and yeah I'll be around off the talk",
    "start": "1044780",
    "end": "1046880"
  },
  {
    "text": "I'll be at the booth the rest of the day",
    "start": "1046880",
    "end": "1048550"
  },
  {
    "text": "and like I said I really wish you a lot",
    "start": "1048550",
    "end": "1052790"
  },
  {
    "text": "of luck as you dig through this treasure",
    "start": "1052790",
    "end": "1054170"
  },
  {
    "text": "trove of technology so thanks",
    "start": "1054170",
    "end": "1058280"
  },
  {
    "text": "[Music]",
    "start": "1058280",
    "end": "1061700"
  }
]