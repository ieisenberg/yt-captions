[
  {
    "start": "0",
    "end": "17000"
  },
  {
    "text": "hello everyone today we are going to talk about the configuration and debugging best practice for admission",
    "start": "179",
    "end": "6390"
  },
  {
    "text": "web hooks my name is Howard hi I'm a software engineer at Google cloud and I am a",
    "start": "6390",
    "end": "12360"
  },
  {
    "text": "member of the kinetic API machinery here",
    "start": "12360",
    "end": "17520"
  },
  {
    "start": "17000",
    "end": "17000"
  },
  {
    "text": "is the agenda of what we will cover today I will walk you through what you are the admission approach and why do I",
    "start": "17520",
    "end": "23250"
  },
  {
    "text": "want to use them what are the best practice for configuring my admission webhooks and what are the existing",
    "start": "23250",
    "end": "29970"
  },
  {
    "text": "debugging methods that helps me to park my admission webhooks in the end I will",
    "start": "29970",
    "end": "35040"
  },
  {
    "text": "give a short demo about debugging misconfigured app hook so what are",
    "start": "35040",
    "end": "42570"
  },
  {
    "text": "admission web hooks first of all we need to understand what the admission procedure in kubernetes the kubernetes",
    "start": "42570",
    "end": "50129"
  },
  {
    "text": "api server rounds with some admission controllers by default a mission",
    "start": "50129",
    "end": "55739"
  },
  {
    "text": "controller is basically a piece of code that intercepts requests to cube API server prior to proceed to the if",
    "start": "55739",
    "end": "62879"
  },
  {
    "text": "resistance of the object but after the request was authenticated and authorized",
    "start": "62879",
    "end": "69920"
  },
  {
    "text": "if we take a closer look the admission controllers can be categorized into two",
    "start": "69920",
    "end": "75509"
  },
  {
    "text": "types mutating admission controllers and variability and mission controllers mutating controllers may modify the",
    "start": "75509",
    "end": "82860"
  },
  {
    "text": "object they admit and validation controllers may not if any of the",
    "start": "82860",
    "end": "90780"
  },
  {
    "text": "controllers in either of the face rejects the request for example let's see the resource quota controller",
    "start": "90780",
    "end": "96900"
  },
  {
    "text": "rejected a request because the quota was exceeded the entire request will get",
    "start": "96900",
    "end": "102960"
  },
  {
    "text": "rejected and an arrow will be returned to the end-user immediately other than",
    "start": "102960",
    "end": "110130"
  },
  {
    "start": "109000",
    "end": "109000"
  },
  {
    "text": "using the building and mission controllers criminal's allows you to extend the admission control your",
    "start": "110130",
    "end": "116100"
  },
  {
    "text": "customer with admission webhooks you can configure the true building and mission controllers called mill hitting",
    "start": "116100",
    "end": "122939"
  },
  {
    "text": "admission web hooks and validating admission web hooks to talk to your own web hook back-end",
    "start": "122939",
    "end": "129770"
  },
  {
    "text": "mutating web hooks are calling sequence while the that evasion web postcard caught in",
    "start": "129770",
    "end": "135480"
  },
  {
    "text": "parallel the why do I want you you saved",
    "start": "135480",
    "end": "140550"
  },
  {
    "start": "139000",
    "end": "139000"
  },
  {
    "text": "admission webhooks this is basically like why we have the",
    "start": "140550",
    "end": "146250"
  },
  {
    "text": "Beauty admission controllers the admission web folks can help with enforcing security policy for example",
    "start": "146250",
    "end": "152840"
  },
  {
    "text": "only allow pulling images from certain registry that are known to the enterprise and which web book can help",
    "start": "152840",
    "end": "159840"
  },
  {
    "text": "with carving the adherence to certain practice like having good labels annotations for object animation webhook",
    "start": "159840",
    "end": "167640"
  },
  {
    "text": "can help with automating and validating the configuration of the objects in the",
    "start": "167640",
    "end": "173580"
  },
  {
    "text": "cluster like detecting and the fixing images deployed without some semantic",
    "start": "173580",
    "end": "180450"
  },
  {
    "text": "tags okay so we understand why we may",
    "start": "180450",
    "end": "185880"
  },
  {
    "text": "want to use a omission of hoax let's see how to configure a mesh webhooks here is",
    "start": "185880",
    "end": "192750"
  },
  {
    "start": "191000",
    "end": "191000"
  },
  {
    "text": "a example validation web for configuration I won't go through the fields all the fields in detail",
    "start": "192750",
    "end": "198870"
  },
  {
    "text": "basically this is a web configuration called pod policy at example.com the",
    "start": "198870",
    "end": "205470"
  },
  {
    "text": "configuration has one web hook with the rule that trigger some area name space pod creation requests the client",
    "start": "205470",
    "end": "213240"
  },
  {
    "text": "configured config chelsea api server how to talk to the web hook back-end the web",
    "start": "213240",
    "end": "219810"
  },
  {
    "text": "hook doesn't have any side effect and it has a five second timeout for the api",
    "start": "219810",
    "end": "226260"
  },
  {
    "text": "server jihad web hook there are some other optional fields for you to",
    "start": "226260",
    "end": "231990"
  },
  {
    "text": "customize your local configuration which are not sure here i will explain them more in more detail when we come across",
    "start": "231990",
    "end": "239670"
  },
  {
    "text": "them in the best practice okay so let's see some of the configuration as",
    "start": "239670",
    "end": "245970"
  },
  {
    "text": "practice while you show up hooks here is a list of since we will talk about let's",
    "start": "245970",
    "end": "252090"
  },
  {
    "start": "248000",
    "end": "248000"
  },
  {
    "text": "walk through them one by one item Potence it is natural to expect the",
    "start": "252090",
    "end": "260730"
  },
  {
    "start": "255000",
    "end": "255000"
  },
  {
    "text": "cubic answer will invoke your admission your mail hitting web work once if a",
    "start": "260730",
    "end": "266750"
  },
  {
    "text": "to match the emission webhook configuration but do you know that the customer may call your clicking web hook",
    "start": "266750",
    "end": "273680"
  },
  {
    "text": "twice for the same request the reason for that is basically ordering mutating",
    "start": "273680",
    "end": "279740"
  },
  {
    "text": "webhook is hard imagine you have to shoe admission to militating Web books the",
    "start": "279740",
    "end": "287060"
  },
  {
    "text": "first web hooks is called inject sidecar which injects a static a container to",
    "start": "287060",
    "end": "292520"
  },
  {
    "text": "your pod for example here I'm creating a part the web hook append a side hug",
    "start": "292520",
    "end": "298040"
  },
  {
    "text": "container to the list of containers in the part ii web poke is called always",
    "start": "298040",
    "end": "305840"
  },
  {
    "text": "pro image it enforced a security policy in both eternity scenario by setting the",
    "start": "305840",
    "end": "313460"
  },
  {
    "text": "image Pro quality to be always for all the containers in a pod now we have two",
    "start": "313460",
    "end": "320120"
  },
  {
    "text": "containers in pod both has their image or policy set to be always which is",
    "start": "320120",
    "end": "326210"
  },
  {
    "text": "great imagine if the API server orders C",
    "start": "326210",
    "end": "333680"
  },
  {
    "text": "to web hooks differently it has a reversed call the always go image web",
    "start": "333680",
    "end": "338990"
  },
  {
    "text": "hook which sets the image Pro policy to be always for my country my container",
    "start": "338990",
    "end": "344860"
  },
  {
    "text": "then the API server called the inject sidecar container web hook which attends",
    "start": "344860",
    "end": "351440"
  },
  {
    "text": "recycle container to the pod now the party ends up with a container without",
    "start": "351440",
    "end": "357500"
  },
  {
    "text": "the image properties that which violates our security policy to solve this",
    "start": "357500",
    "end": "366620"
  },
  {
    "text": "problem which clearly plasterer does is basically a best-effort re invocation to",
    "start": "366620",
    "end": "372020"
  },
  {
    "text": "make sure everyone every web book in the latest state of an object for example",
    "start": "372020",
    "end": "377600"
  },
  {
    "text": "for this instance if a server noticed that the object was mutated by the",
    "start": "377600",
    "end": "383240"
  },
  {
    "text": "inject sidecar web hook so it invokes the always Pro image will hook again",
    "start": "383240",
    "end": "388729"
  },
  {
    "text": "which at this time sets the image for policy for the sidecar container and we",
    "start": "388729",
    "end": "394669"
  },
  {
    "text": "come to the desired state of our web hooks",
    "start": "394669",
    "end": "399729"
  },
  {
    "text": "now we understand that previous error make halt by mutating webhook twice the",
    "start": "399840",
    "end": "406750"
  },
  {
    "text": "best practice is for my mutation well folks to the idempotent and mine an idempotent military web hook is able to",
    "start": "406750",
    "end": "414130"
  },
  {
    "text": "successfully process and now jacket has already admitted and moo potentially",
    "start": "414130",
    "end": "420190"
  },
  {
    "text": "mutated the always Pony meat web pork is a good example of an item order his web",
    "start": "420190",
    "end": "428020"
  },
  {
    "start": "423000",
    "end": "423000"
  },
  {
    "text": "hook because applying the web folk song it's reason I mean it's output won't",
    "start": "428020",
    "end": "434230"
  },
  {
    "text": "change the result to give you an example",
    "start": "434230",
    "end": "439360"
  },
  {
    "start": "438000",
    "end": "438000"
  },
  {
    "text": "of a now I'd the importance of a poke imagine we still have a inject site calculate web hook but this time the web",
    "start": "439360",
    "end": "447520"
  },
  {
    "text": "hook append the cycle continue to the continue list with name service by the",
    "start": "447520",
    "end": "453970"
  },
  {
    "text": "current timestamp this Bible is not idempotent because if you applied again",
    "start": "453970",
    "end": "460960"
  },
  {
    "text": "on the article of itself you end up with two containers site heart containers with slightly different",
    "start": "460960",
    "end": "467590"
  },
  {
    "text": "name this is probably not what we wanted another best practice is intercepting",
    "start": "467590",
    "end": "475750"
  },
  {
    "start": "472000",
    "end": "472000"
  },
  {
    "text": "all versions of an object we know that kubernetes support multiple API versions",
    "start": "475750",
    "end": "481330"
  },
  {
    "text": "for example cubic a server allows creating and updating deployments by",
    "start": "481330",
    "end": "486550"
  },
  {
    "text": "extension V 1 beta 1 ab c on beta 1 p.m. we won't be able to absolutely 1 AP is",
    "start": "486550",
    "end": "492070"
  },
  {
    "text": "if a record is configured to only intercept deployment request seen apps",
    "start": "492070",
    "end": "497950"
  },
  {
    "text": "few one it will miss the request in the other versions so it's recommended to",
    "start": "497950",
    "end": "503800"
  },
  {
    "text": "set the match policy to be equivalent which this configuration ensures that",
    "start": "503800",
    "end": "510820"
  },
  {
    "text": "they were web work will get request that on hundred equivalent from api server",
    "start": "510820",
    "end": "518229"
  },
  {
    "text": "and we will also ensure if a future it has a wrap grade happens the ideas and",
    "start": "518229",
    "end": "525370"
  },
  {
    "text": "the class are introduced a new version for the deployment applied for example let's say we have a absolute",
    "start": "525370",
    "end": "531190"
  },
  {
    "text": "to it but the webhook will also get the API request availability it is",
    "start": "531190",
    "end": "541960"
  },
  {
    "start": "538000",
    "end": "538000"
  },
  {
    "text": "recommended that visual approach should evaluate API requests as soon as possible because every web poking",
    "start": "541960",
    "end": "548950"
  },
  {
    "text": "location latency as to the total API request latency we recommend you set a",
    "start": "548950",
    "end": "557589"
  },
  {
    "text": "small timeout for your web book this example sets a two-second timeout for my",
    "start": "557589",
    "end": "564370"
  },
  {
    "text": "web hook if the web hosts slow and didn't evaluate the request in 3 seconds",
    "start": "564370",
    "end": "571660"
  },
  {
    "text": "the plasterer will either reject tape API request or ignore the web hook",
    "start": "571660",
    "end": "576940"
  },
  {
    "text": "invocation failure and I'll admit the requests based on the federal policy of the web hook guarantee the final state",
    "start": "576940",
    "end": "586930"
  },
  {
    "start": "584000",
    "end": "584000"
  },
  {
    "text": "of the object is seen since we know that another web book that is called after",
    "start": "586930",
    "end": "593560"
  },
  {
    "text": "your military macaque may change the object it is a good practice to have a",
    "start": "593560",
    "end": "599290"
  },
  {
    "text": "valuation web hook that ensures your beautician is made if you are say you",
    "start": "599290",
    "end": "607570"
  },
  {
    "text": "are using the auto image web hook to enforce the security policy it is",
    "start": "607570",
    "end": "613660"
  },
  {
    "text": "recommended that you add and evaluate always Pro image by poking which make",
    "start": "613660",
    "end": "619570"
  },
  {
    "text": "sure the image Pro policy is set for all the containers in your path side-effects",
    "start": "619570",
    "end": "627760"
  },
  {
    "start": "626000",
    "end": "626000"
  },
  {
    "text": "to some admission web hook maybe mutates related resource as part of the request",
    "start": "627760",
    "end": "633910"
  },
  {
    "text": "processing for example the resource quote on a resource called Howard hook",
    "start": "633910",
    "end": "640240"
  },
  {
    "text": "may increment the quota usage when it admits it can request that consumes the",
    "start": "640240",
    "end": "645339"
  },
  {
    "text": "quota the best practice is to avoid satified effective possible if a",
    "start": "645339",
    "end": "653500"
  },
  {
    "text": "celebrex is required for admission web hook make sure to have a reconsideration McCadden for example a controller that",
    "start": "653500",
    "end": "660520"
  },
  {
    "text": "decrease the quota usage in case the request didn't mix through because it was",
    "start": "660520",
    "end": "666259"
  },
  {
    "text": "rejected by something Allison get admission chain and also don't trigger",
    "start": "666259",
    "end": "672799"
  },
  {
    "text": "the side effects if a admission review has a dry run sad and the web hook",
    "start": "672799",
    "end": "679639"
  },
  {
    "text": "should the web whole configuration should specify the its side effect to be",
    "start": "679639",
    "end": "685009"
  },
  {
    "text": "non-viral avoiding operating on the crib",
    "start": "685009",
    "end": "690919"
  },
  {
    "start": "688000",
    "end": "688000"
  },
  {
    "text": "system namespace this is basically for safety purpose the cube system namespace",
    "start": "690919",
    "end": "697779"
  },
  {
    "text": "hosts system critical components for",
    "start": "697779",
    "end": "704809"
  },
  {
    "text": "example the cubic a server itself has some host art hooks that will straps the internal controllers if your admission",
    "start": "704809",
    "end": "712519"
  },
  {
    "text": "web poke rejects the request in cube system APIs namespace it may cause the",
    "start": "712519",
    "end": "719569"
  },
  {
    "text": "cube API server to be not healthy also the namespace host objects or",
    "start": "719569",
    "end": "726139"
  },
  {
    "text": "control plane components for example the service account for all the entrepreneur components and the pod like cube DNS if",
    "start": "726139",
    "end": "733579"
  },
  {
    "text": "your editor up hook is not intend to modify the cube system creates control",
    "start": "733579",
    "end": "740839"
  },
  {
    "text": "plane behavior is recommended that you exclude the cube system namespace using",
    "start": "740839",
    "end": "746089"
  },
  {
    "text": "a namespace lecture or a object selector for example here is a object selector",
    "start": "746089",
    "end": "752329"
  },
  {
    "text": "that only matches the namespace only matches to requesting a namespace that",
    "start": "752329",
    "end": "757909"
  },
  {
    "text": "doesn't have a long time round level with value 0 or 1",
    "start": "757909",
    "end": "764529"
  },
  {
    "text": "also excluding cube system namespace makes post API server in the web hooks",
    "start": "764529",
    "end": "771079"
  },
  {
    "text": "back and more efficiency because as we mentioned before every web hook",
    "start": "771079",
    "end": "776089"
  },
  {
    "text": "invocation latency builds up the entire API request latency now by excluding the",
    "start": "776089",
    "end": "782899"
  },
  {
    "text": "name cubed cube system namespace the web for communication is scoped to only what",
    "start": "782899",
    "end": "788899"
  },
  {
    "text": "is needed now we've look at some of the",
    "start": "788899",
    "end": "795730"
  },
  {
    "text": "configuration best practice to admission unhooks how to read about our commission",
    "start": "795730",
    "end": "803170"
  },
  {
    "text": "webhooks before looking at some of the existing debugging methods let's first take a",
    "start": "803170",
    "end": "810850"
  },
  {
    "text": "look at the ways that admission were provoking vocation made Val this is the",
    "start": "810850",
    "end": "818800"
  },
  {
    "start": "816000",
    "end": "816000"
  },
  {
    "text": "table of types of of weblog failure or rejection I'd enter sink them in his",
    "start": "818800",
    "end": "826000"
  },
  {
    "text": "really different categories the first category is a bad action actually a valid web of rejection",
    "start": "826000",
    "end": "831819"
  },
  {
    "text": "for example the raddest api server sends a admission review through the web hook",
    "start": "831819",
    "end": "838089"
  },
  {
    "text": "back end and to back-end determines the request is invalid and responded with a",
    "start": "838089",
    "end": "843879"
  },
  {
    "text": "400 or 4/3 in this case the youkai server surfacy responded HP codes to the",
    "start": "843879",
    "end": "849879"
  },
  {
    "text": "client so for example the end user who are generally send the request work at a forestry for bidden another valid web",
    "start": "849879",
    "end": "858370"
  },
  {
    "text": "for the rejection is actually a 500 internal error to the web hook backhand",
    "start": "858370",
    "end": "864819"
  },
  {
    "text": "if the web hook back end hits an internal error but is still able to compose a mission response it will sense",
    "start": "864819",
    "end": "873160"
  },
  {
    "text": "the plasterer and 500 internal error in this case the oppressor will also",
    "start": "873160",
    "end": "878470"
  },
  {
    "text": "service the arrow to the end user so the answer rivers will get a 500 and specifying the web hook denied the",
    "start": "878470",
    "end": "885610"
  },
  {
    "text": "request the second category of web hock failure is our calling web hook for",
    "start": "885610",
    "end": "892899"
  },
  {
    "text": "example if the web hope bank back-end is too slow and timed out or the API server",
    "start": "892899",
    "end": "899709"
  },
  {
    "text": "just felt to inebriation action to talk to the web hook backend or if the web",
    "start": "899709",
    "end": "906490"
  },
  {
    "text": "hook sent badly admission response but the UK server felt to parse it because",
    "start": "906490",
    "end": "911980"
  },
  {
    "text": "it the response was malformed in this case the API server will return to the",
    "start": "911980",
    "end": "918279"
  },
  {
    "text": "end user a 500 internal error and a reason explain the error the last",
    "start": "918279",
    "end": "926009"
  },
  {
    "text": "category is a actual API server internal error this should really or never happen",
    "start": "926009",
    "end": "932829"
  },
  {
    "text": "in reality but I'm just listening to it here in case that we have a programming error in kubernetes that castle panic in",
    "start": "932829",
    "end": "941589"
  },
  {
    "text": "this case the API server will also return a 500 to the end user to just",
    "start": "941589",
    "end": "949360"
  },
  {
    "text": "make the table a little bit more compact in the weapon configuration for each",
    "start": "949360",
    "end": "954639"
  },
  {
    "text": "webhook it can configure a failure policy in v1 API valor is default to be",
    "start": "954639",
    "end": "962139"
  },
  {
    "text": "reject but you can contribute to be ignore when you start webhook in that",
    "start": "962139",
    "end": "967540"
  },
  {
    "text": "case if an arrow column webhook occurred for example timeout connection failure",
    "start": "967540",
    "end": "972699"
  },
  {
    "text": "welcome to response the offender will ignore the Republic vocation failure and to return no arrow to the end user so",
    "start": "972699",
    "end": "984360"
  },
  {
    "text": "you may notice that all three categories may end up with a 500 response to the",
    "start": "984360",
    "end": "990399"
  },
  {
    "text": "end user for a single webhook failure you may be able to tell what actually",
    "start": "990399",
    "end": "997720"
  },
  {
    "text": "happened from reading the reason indeed with return the error but imagine you",
    "start": "997720",
    "end": "1002819"
  },
  {
    "text": "are monitoring the auto traffic in the cluster and you see a search of 500 when",
    "start": "1002819",
    "end": "1008759"
  },
  {
    "text": "you are developing your webhook how would you be able to tell what kind of failure happened to what web hooks we",
    "start": "1008759",
    "end": "1016740"
  },
  {
    "text": "have some metrics for also the caption eclipse API server serves promises",
    "start": "1016740",
    "end": "1023550"
  },
  {
    "start": "1017000",
    "end": "1017000"
  },
  {
    "text": "metrics on it / metrics endpoint which reports the status about itself among",
    "start": "1023550",
    "end": "1031168"
  },
  {
    "text": "all metrics reported there are two metrics are related to admission webhook invocations wise called a mission",
    "start": "1031169",
    "end": "1038400"
  },
  {
    "text": "webhook admission duration which is a histogram metrics that basically tells you how",
    "start": "1038400",
    "end": "1044788"
  },
  {
    "text": "long a mission web hope invocation typically take another metrics called a",
    "start": "1044789",
    "end": "1052200"
  },
  {
    "text": "mission web Hoku rejection town which is a control matrix that helps you how many rejection or ad-hoc failure",
    "start": "1052200",
    "end": "1060510"
  },
  {
    "text": "haven't grouped by the webhook name the API request operation type the type of",
    "start": "1060510",
    "end": "1066360"
  },
  {
    "text": "see web hook itself so rather picking on mutating the alt tag basically the three",
    "start": "1066360",
    "end": "1072090"
  },
  {
    "text": "categories we mentioned before and the rejection code which is if a rapport did",
    "start": "1072090",
    "end": "1078390"
  },
  {
    "text": "evaluate the HTTP that is called rejection it will be reported here so",
    "start": "1078390",
    "end": "1085710"
  },
  {
    "text": "just give you a quick example of how the matrix may look like here's a metrics",
    "start": "1085710",
    "end": "1091710"
  },
  {
    "text": "output I got from running some basic kubernetes III test basically it shows",
    "start": "1091710",
    "end": "1097230"
  },
  {
    "text": "you that there were three error column webhook occurs from the three line with",
    "start": "1097230",
    "end": "1104010"
  },
  {
    "text": "a highlight in the bottom there are some webhook rejection with no arrow so",
    "start": "1104010",
    "end": "1110010"
  },
  {
    "text": "that's a valid web protocol rejection and you can tell from the test codes that the web hook which actually",
    "start": "1110010",
    "end": "1117240"
  },
  {
    "text": "read request with 400 sometimes you may",
    "start": "1117240",
    "end": "1123000"
  },
  {
    "start": "1121000",
    "end": "1121000"
  },
  {
    "text": "want to keep up some num obvious web hook behavior other than basic",
    "start": "1123000",
    "end": "1128520"
  },
  {
    "text": "monitoring the cluster for example you can tell that your web hook back and",
    "start": "1128520",
    "end": "1133710"
  },
  {
    "text": "worse processing the mission review and mutating the object but it seems to be",
    "start": "1133710",
    "end": "1140940"
  },
  {
    "text": "ignored from if that's our point of view and is the result if object we never got mutated or you find that your web for",
    "start": "1140940",
    "end": "1150690"
  },
  {
    "text": "back-end was processing the review and the Asura did mutate the object but it",
    "start": "1150690",
    "end": "1157740"
  },
  {
    "text": "was in a different way that you really expected could it be a back in your web hope back end could it be about in the",
    "start": "1157740",
    "end": "1164490"
  },
  {
    "text": "UK server or could be some other really web hooks that change the object after",
    "start": "1164490",
    "end": "1170220"
  },
  {
    "text": "your mutating web hook we have auto flocking to answer this kind of question",
    "start": "1170220",
    "end": "1175880"
  },
  {
    "start": "1173000",
    "end": "1173000"
  },
  {
    "text": "based on the documentation kubernetes audit logging helps it cluster admin answer the following questions what",
    "start": "1175880",
    "end": "1183540"
  },
  {
    "text": "happened when did it happen who initiated it etc to just give you a quick view of how",
    "start": "1183540",
    "end": "1193249"
  },
  {
    "text": "rubinettes audit logging works here is a audio policy that sets the kubernetes",
    "start": "1193249",
    "end": "1201499"
  },
  {
    "text": "observer to log path change at request response level and log pod slash log and",
    "start": "1201499",
    "end": "1209179"
  },
  {
    "text": "path slash left status tab resource requests at metadata level and I just",
    "start": "1209179",
    "end": "1215929"
  },
  {
    "text": "put some random order log record from my cluster here is a record the record is",
    "start": "1215929",
    "end": "1224119"
  },
  {
    "text": "actually called an event its own defined under an audit that case dot IO v1 API",
    "start": "1224119",
    "end": "1230090"
  },
  {
    "text": "version this is a metadata level audit record so you won't be able to see what",
    "start": "1230090",
    "end": "1235879"
  },
  {
    "text": "was actually in the request but basically this tell us someone was creating a kubernetes band in the cube",
    "start": "1235879",
    "end": "1244220"
  },
  {
    "text": "system namespace the Creator was someone called cube scheduler and we have some",
    "start": "1244220",
    "end": "1252259"
  },
  {
    "text": "other metadata level information for example the time stamps now let's take a",
    "start": "1252259",
    "end": "1258590"
  },
  {
    "start": "1257000",
    "end": "1257000"
  },
  {
    "text": "look at how Krueger has several leverage the add walk audit logging to record",
    "start": "1258590",
    "end": "1264340"
  },
  {
    "text": "activities related to mutating WebWorks basically there's a field in the audit",
    "start": "1264340",
    "end": "1270649"
  },
  {
    "text": "record called annotation which you will imagine is basically a map of key value",
    "start": "1270649",
    "end": "1276139"
  },
  {
    "text": "pairs that allows plug-ins in Cuba cancer for example authentication authorization mission to customize the",
    "start": "1276139",
    "end": "1283940"
  },
  {
    "text": "audit records with their own information that we want to record the admission",
    "start": "1283940",
    "end": "1289850"
  },
  {
    "text": "webhooks use the two types of annotation Kish to record mutating web for events I",
    "start": "1289850",
    "end": "1298460"
  },
  {
    "text": "will go through them the definition of them in more detail but the prefix the",
    "start": "1298460",
    "end": "1304369"
  },
  {
    "text": "an occasional basically differs in the prefix one starts with mutation and one",
    "start": "1304369",
    "end": "1311629"
  },
  {
    "text": "starts with patch here's a example of a nutrition audit",
    "start": "1311629",
    "end": "1316789"
  },
  {
    "text": "event that has this annotation you can see there is a key called mutation",
    "start": "1316789",
    "end": "1322080"
  },
  {
    "text": "that were poked are the mission Dell KACE that I oh that's wrong one index to this is logging an activity religiously",
    "start": "1322080",
    "end": "1329159"
  },
  {
    "text": "imitating what poke so let's take a look at how this annotation are defined the",
    "start": "1329159",
    "end": "1337889"
  },
  {
    "start": "1331000",
    "end": "1331000"
  },
  {
    "text": "first annotation key records a mutating",
    "start": "1337889",
    "end": "1342929"
  },
  {
    "text": "webhook currents the key starts with the world mutation followed by webhook",
    "start": "1342929",
    "end": "1348120"
  },
  {
    "text": "definition of kissed on Io remember in index number for example from zero and",
    "start": "1348120",
    "end": "1353879"
  },
  {
    "text": "index 1 the numbers are zero indexed this so this number means this is a a",
    "start": "1353879",
    "end": "1362240"
  },
  {
    "text": "activity record for a mutiny webhooks that happens in the first web hooking",
    "start": "1362240",
    "end": "1367740"
  },
  {
    "text": "vocation round and it was the second why poke in the list of beauty web hooks",
    "start": "1367740",
    "end": "1373460"
  },
  {
    "text": "this type of annotation is recorded if the audit level is said to be metadata or higher",
    "start": "1373460",
    "end": "1381049"
  },
  {
    "text": "the value of the annotation is a JSON block with three L's the configuration",
    "start": "1381049",
    "end": "1388080"
  },
  {
    "text": "the web configuration name the web hook name and the mutated which is boolean",
    "start": "1388080",
    "end": "1393629"
  },
  {
    "text": "that house if the hatch sent by the mutating madhawk actually changed the",
    "start": "1393629",
    "end": "1399659"
  },
  {
    "text": "object or not the outer annotation key",
    "start": "1399659",
    "end": "1405230"
  },
  {
    "start": "1403000",
    "end": "1403000"
  },
  {
    "text": "starts with the word patch followed by the same thing and just give you another",
    "start": "1405230",
    "end": "1411090"
  },
  {
    "text": "example round 1 index 3 means this is a but hook activity that happens in the second one",
    "start": "1411090",
    "end": "1418379"
  },
  {
    "text": "round which is the real invocation round and this is the force built-in web",
    "start": "1418379",
    "end": "1423419"
  },
  {
    "text": "poking the between web hook list this annotation is recorded if the other",
    "start": "1423419",
    "end": "1429029"
  },
  {
    "text": "level in the cluster is said to be request or higher the value of the",
    "start": "1429029",
    "end": "1434549"
  },
  {
    "text": "annotation is a JSON JSON blob of with for back for fields the web hook",
    "start": "1434549",
    "end": "1439980"
  },
  {
    "text": "configuration name the web hook name the past hype which is JSON patch in this",
    "start": "1439980",
    "end": "1446039"
  },
  {
    "text": "case and the actual jism hatched and from the mutiny Red Hook as you can see this mutiny web Polk who was trying to",
    "start": "1446039",
    "end": "1452490"
  },
  {
    "text": "set the value under slash latest national team's h-2b yes just to give",
    "start": "1452490",
    "end": "1460289"
  },
  {
    "text": "you a sample of how this annotation would look like this is the actual",
    "start": "1460289",
    "end": "1466289"
  },
  {
    "text": "annotation actual other events that I captured from my cluster as you can see",
    "start": "1466289",
    "end": "1471630"
  },
  {
    "text": "there are a lot of annotation with this",
    "start": "1471630",
    "end": "1477000"
  },
  {
    "text": "prefix this is from a also from a quarantine three tests so there were a",
    "start": "1477000",
    "end": "1482520"
  },
  {
    "text": "lot of web folks that trying to do mutation and you can see both the mutation and the patch annotation will",
    "start": "1482520",
    "end": "1489270"
  },
  {
    "text": "record it that's the but not list you",
    "start": "1489270",
    "end": "1496260"
  },
  {
    "start": "1491000",
    "end": "1491000"
  },
  {
    "text": "can always debug your own web book back in the previous methods like metrics and dialog helps huge if you are suspecting",
    "start": "1496260",
    "end": "1504059"
  },
  {
    "text": "something was wrong on the cube API server side in a resultant it could be apply several feels more like a black",
    "start": "1504059",
    "end": "1510299"
  },
  {
    "text": "box too but you could always have good logging in the admission by Polk",
    "start": "1510299",
    "end": "1517710"
  },
  {
    "text": "backhand that you deployed so you can have a better view of say what admission",
    "start": "1517710",
    "end": "1522929"
  },
  {
    "text": "review the backhand got from the observer and what a mission response it responded to the API server okay have",
    "start": "1522929",
    "end": "1534120"
  },
  {
    "text": "you give a quick demo about how to debug admission a misconfigured initial",
    "start": "1534120",
    "end": "1539220"
  },
  {
    "text": "approach using the audit log the demo is pretty single so I'll just capture some",
    "start": "1539220",
    "end": "1544890"
  },
  {
    "text": "screenshot say I was developing let me",
    "start": "1544890",
    "end": "1549899"
  },
  {
    "text": "show a polemic faster and I was happy off sudden the castle breaks I cannot",
    "start": "1549899",
    "end": "1556320"
  },
  {
    "text": "apply apart anymore the if hazard just responded with the part my part is invalid it tells me that",
    "start": "1556320",
    "end": "1563789"
  },
  {
    "text": "there is a duplicate value my side car in the container list which so basically",
    "start": "1563789",
    "end": "1569190"
  },
  {
    "text": "this is a duplicate name in the list of",
    "start": "1569190",
    "end": "1574770"
  },
  {
    "text": "container the response is a valid widget",
    "start": "1574770",
    "end": "1580850"
  },
  {
    "text": "kubernetes rejection because you create a server tries to make sure in the path",
    "start": "1580850",
    "end": "1587580"
  },
  {
    "text": "all the container names are unique so I recognize this my sidecar name this is",
    "start": "1587580",
    "end": "1594390"
  },
  {
    "text": "should be injected by my inject sidecar webhook so I just take a look at which",
    "start": "1594390",
    "end": "1601530"
  },
  {
    "text": "are the mutant web hooks they are in the classroom I found that the injected",
    "start": "1601530",
    "end": "1607410"
  },
  {
    "text": "sidecar up hook has been working for a week but it suddenly breaks after I deployed the other web hook luckily I",
    "start": "1607410",
    "end": "1617250"
  },
  {
    "text": "have the audit log enabled for my local cluster so here I configure it to log",
    "start": "1617250",
    "end": "1625670"
  },
  {
    "text": "activity at request level and I",
    "start": "1625670",
    "end": "1630809"
  },
  {
    "text": "basically try to grab the latest request",
    "start": "1630809",
    "end": "1635910"
  },
  {
    "text": "to the part creation endpoint since I",
    "start": "1635910",
    "end": "1642450"
  },
  {
    "text": "know there is no one else doing pod creation my culture as I was developing",
    "start": "1642450",
    "end": "1647760"
  },
  {
    "text": "myself I just grabbed the latest one and try to see what was there the actual",
    "start": "1647760",
    "end": "1655160"
  },
  {
    "text": "audit event is pretty long so I split into some pieces first this is giving me",
    "start": "1655160",
    "end": "1666900"
  },
  {
    "text": "the metadata of this event basically you would say I was creating the pod using",
    "start": "1666900",
    "end": "1675210"
  },
  {
    "text": "cube Cairo the parties called my pod this is are all expected and nature",
    "start": "1675210",
    "end": "1684809"
  },
  {
    "text": "it shows the API server responded 8422 which is also alleged rejection from a",
    "start": "1684809",
    "end": "1692790"
  },
  {
    "text": "customer point of view later on I see the original request sent from queue",
    "start": "1692790",
    "end": "1700770"
  },
  {
    "text": "Cairo which only includes a container called mine container so there is no",
    "start": "1700770",
    "end": "1707090"
  },
  {
    "text": "injected site container yet these are still all expected",
    "start": "1707090",
    "end": "1713590"
  },
  {
    "text": "request from Cuba kado but after that we",
    "start": "1713590",
    "end": "1719620"
  },
  {
    "text": "see there are some annotation that recorded by the cubic a server so here",
    "start": "1719620",
    "end": "1724690"
  },
  {
    "text": "we can see that there are three web hooks mutated the object if you look at",
    "start": "1724690",
    "end": "1733540"
  },
  {
    "text": "the mutation web hook admission round 0 index 0 we can see my jack side cover",
    "start": "1733540",
    "end": "1740920"
  },
  {
    "text": "hook tried to inject today that continues with part and it was it",
    "start": "1740920",
    "end": "1748240"
  },
  {
    "text": "successfully related web hook and after that at position 1 there said the other",
    "start": "1748240",
    "end": "1756250"
  },
  {
    "text": "web hook inject a mutated the part again and later on the castle tried to revoke",
    "start": "1756250",
    "end": "1765010"
  },
  {
    "text": "revoke the inject psychical web cook and the Jack's Itokawa hook mutated the",
    "start": "1765010",
    "end": "1771640"
  },
  {
    "text": "object for the second time and we can also see what the actual patch is from",
    "start": "1771640",
    "end": "1778150"
  },
  {
    "text": "the patch annotation basically from this point I see the problem is that my",
    "start": "1778150",
    "end": "1785920"
  },
  {
    "text": "inject sidecar web hook was not I don't Holden it was pending a sidecar",
    "start": "1785920",
    "end": "1792730"
  },
  {
    "text": "container to the pod regardless of if there's a set a car container in the pot",
    "start": "1792730",
    "end": "1799270"
  },
  {
    "text": "already so I turned to fix you I poke back and buy first detect if",
    "start": "1799270",
    "end": "1807070"
  },
  {
    "text": "there is a cycle container already new pod if not injected car otherwise just skipped the admission",
    "start": "1807070",
    "end": "1816250"
  },
  {
    "text": "response and send a empty patch so now",
    "start": "1816250",
    "end": "1821350"
  },
  {
    "text": "my wife Jorge is idempotent and everything is happy ok ok so the key",
    "start": "1821350",
    "end": "1829030"
  },
  {
    "start": "1827000",
    "end": "1827000"
  },
  {
    "text": "takeaways from this session is that configure additional folks following",
    "start": "1829030",
    "end": "1834310"
  },
  {
    "text": "best practice we also have an occupation described in this past practice on the",
    "start": "1834310",
    "end": "1841180"
  },
  {
    "text": "website and use the metrics and other logging to monitor and debug your web hooks thank",
    "start": "1841180",
    "end": "1850650"
  },
  {
    "text": "[Applause] there's so much away any questions in",
    "start": "1850650",
    "end": "1857570"
  },
  {
    "text": "the audience there's an open mic could you elaborate a little bit on what is",
    "start": "1857570",
    "end": "1865039"
  },
  {
    "text": "the system requirement in order to configure webbook and the alien",
    "start": "1865039",
    "end": "1870139"
  },
  {
    "text": "situation control admission webhook was brought to be one in 1/16 and also the",
    "start": "1870139",
    "end": "1879850"
  },
  {
    "text": "visual projection count and the audit logging are introduced in 1/16 as well",
    "start": "1879850",
    "end": "1887440"
  },
  {
    "text": "but my question is more specific on I'm installing a new cluster from scratch",
    "start": "1887440",
    "end": "1892970"
  },
  {
    "text": "and I'd like to start configuring it so what would that consist of you need to",
    "start": "1892970",
    "end": "1900769"
  },
  {
    "text": "so the question was how do you bring up a new schwab poke class were starting",
    "start": "1900769",
    "end": "1907639"
  },
  {
    "text": "from scratch you basically need to [Music] deploy a web poke back end it can be",
    "start": "1907639",
    "end": "1915590"
  },
  {
    "text": "deployed in a party can be a URL that from your own server back-end and you",
    "start": "1915590",
    "end": "1922940"
  },
  {
    "text": "need to deploy admission web for configuration either in for the mutating",
    "start": "1922940",
    "end": "1928039"
  },
  {
    "text": "one for the battery if you want should help the a pleasure to be able to talk",
    "start": "1928039",
    "end": "1933200"
  },
  {
    "text": "to your web hook again and also there are some three circuits that we need you",
    "start": "1933200",
    "end": "1939700"
  },
  {
    "text": "think you need to enable the built-in",
    "start": "1939759",
    "end": "1945049"
  },
  {
    "text": "admission web television controllers which are enabled by default to so those",
    "start": "1945049",
    "end": "1954289"
  },
  {
    "text": "to the machine control is called medium admission were cocked and very big machine rocks and from in our back",
    "start": "1954289",
    "end": "1960889"
  },
  {
    "text": "perspective do you need to have system cluster and mean role or something like that or yes enabling admission",
    "start": "1960889",
    "end": "1970279"
  },
  {
    "text": "controllers which even though they are able by default for those two",
    "start": "1970279",
    "end": "1975559"
  },
  {
    "text": "controllers at a time this action is a quasi fermi-level",
    "start": "1975559",
    "end": "1980659"
  },
  {
    "text": "action because it's at the time that we bring up the cube advisor creating the",
    "start": "1980659",
    "end": "1985970"
  },
  {
    "text": "admission configuration the mission of all configurations is more based on the",
    "start": "1985970",
    "end": "1991880"
  },
  {
    "text": "our back row but it's also tend to be at cost in animation mo so so is it fair to",
    "start": "1991880",
    "end": "1997700"
  },
  {
    "text": "assume that this use case is not or main developer but more like cluster",
    "start": "1997700",
    "end": "2003130"
  },
  {
    "text": "administration that trying to provide infrastructure yeah it you can only",
    "start": "2003130",
    "end": "2009460"
  },
  {
    "text": "deploy in the shrub book if the customer may grant you the are back rule to be",
    "start": "2009460",
    "end": "2014799"
  },
  {
    "text": "able to create those configuration thank you one more short question who has a",
    "start": "2014799",
    "end": "2020890"
  },
  {
    "text": "short question thank you is it safe to",
    "start": "2020890",
    "end": "2027159"
  },
  {
    "text": "run a web hook on the cluster that it's going to apply to or is there a danger that you'll lock yourself out if you get",
    "start": "2027159",
    "end": "2034299"
  },
  {
    "text": "that wrong there are potential risk that",
    "start": "2034299",
    "end": "2040230"
  },
  {
    "text": "if you're a poke yeah yes it's it's okay to deploy a web hook backend in your",
    "start": "2040230",
    "end": "2046900"
  },
  {
    "text": "classroom by pod but there are potential risk that you can deadlock your web hook",
    "start": "2046900",
    "end": "2054820"
  },
  {
    "text": "if you do something wrong like say if your web hook is admitting how to relate",
    "start": "2054820",
    "end": "2061690"
  },
  {
    "text": "to the deployment related requests and you found a bug in itself and you are",
    "start": "2061690",
    "end": "2067628"
  },
  {
    "text": "trying to update the backend basically you are trying to update the deployment of your web of action but it's already",
    "start": "2067629",
    "end": "2074800"
  },
  {
    "text": "up there and the power caused it to reject the hot or deforming updates",
    "start": "2074800",
    "end": "2081638"
  },
  {
    "text": "request to itself then you end up with a deadlock so it's recommended that you",
    "start": "2081639",
    "end": "2087608"
  },
  {
    "text": "use namespace lecture or objects lecture to try to make your web hook to not",
    "start": "2087609",
    "end": "2096608"
  },
  {
    "text": "admit requests regarding itself to a point this kind of deadlock",
    "start": "2096609",
    "end": "2102710"
  },
  {
    "text": "once again thank you so much wrong way and remember to rate the session at Shechem thank you so much",
    "start": "2102710",
    "end": "2111640"
  }
]