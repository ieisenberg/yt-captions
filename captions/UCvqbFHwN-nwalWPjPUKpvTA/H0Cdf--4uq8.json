[
  {
    "text": "hello uh thank you for coming seems like",
    "start": "240",
    "end": "3240"
  },
  {
    "text": "I'm closing cucon last session of the",
    "start": "3240",
    "end": "6480"
  },
  {
    "text": "last day uh my name is Leila I work at",
    "start": "6480",
    "end": "10000"
  },
  {
    "text": "Shopify as an infrastructure engineer",
    "start": "10000",
    "end": "12559"
  },
  {
    "text": "I'm on a team of eight Engineers called",
    "start": "12559",
    "end": "15320"
  },
  {
    "text": "the search platform who develop and",
    "start": "15320",
    "end": "17400"
  },
  {
    "text": "maintain the infrastructure that power",
    "start": "17400",
    "end": "19439"
  },
  {
    "text": "search at",
    "start": "19439",
    "end": "20960"
  },
  {
    "text": "Shopify today I'll be talking about",
    "start": "20960",
    "end": "23320"
  },
  {
    "text": "search uh Shopify which is a highly",
    "start": "23320",
    "end": "26000"
  },
  {
    "text": "available platform for data resilience",
    "start": "26000",
    "end": "28720"
  },
  {
    "text": "and compliance",
    "start": "28720",
    "end": "31679"
  },
  {
    "text": "in the next 20 minutes or so we will",
    "start": "31679",
    "end": "34000"
  },
  {
    "text": "learn how the search platform team at",
    "start": "34000",
    "end": "36719"
  },
  {
    "text": "Shopify hosts the search infrastructure",
    "start": "36719",
    "end": "39160"
  },
  {
    "text": "on top of kubernetes uh we will talk",
    "start": "39160",
    "end": "42039"
  },
  {
    "text": "about the entire data pipeline that",
    "start": "42039",
    "end": "44559"
  },
  {
    "text": "writes data from SQL to elastic search",
    "start": "44559",
    "end": "47320"
  },
  {
    "text": "through CFA and I will talk about the",
    "start": "47320",
    "end": "50000"
  },
  {
    "text": "system requirements for search such as",
    "start": "50000",
    "end": "52680"
  },
  {
    "text": "high availability scalability and",
    "start": "52680",
    "end": "55399"
  },
  {
    "text": "globalization and how we designed and",
    "start": "55399",
    "end": "57840"
  },
  {
    "text": "implemented a platform to achieve them",
    "start": "57840",
    "end": "60840"
  },
  {
    "text": "and I will conclude my talk with a",
    "start": "60840",
    "end": "65840"
  },
  {
    "text": "Q&A introducing Shopify for those who",
    "start": "66000",
    "end": "68880"
  },
  {
    "text": "don't know about us Shopify is a",
    "start": "68880",
    "end": "71520"
  },
  {
    "text": "cloud-based Commerce platform that lets",
    "start": "71520",
    "end": "73680"
  },
  {
    "text": "you start and manage a business by",
    "start": "73680",
    "end": "76240"
  },
  {
    "text": "allowing you to create and customize an",
    "start": "76240",
    "end": "78799"
  },
  {
    "text": "online store and manage inventory",
    "start": "78799",
    "end": "81439"
  },
  {
    "text": "payments customers and",
    "start": "81439",
    "end": "84119"
  },
  {
    "text": "Etc currently we have over 3 million",
    "start": "84119",
    "end": "87520"
  },
  {
    "text": "businesses using our platform we have",
    "start": "87520",
    "end": "89960"
  },
  {
    "text": "have Merchants like gym shark fashion",
    "start": "89960",
    "end": "92520"
  },
  {
    "text": "Nova selling their products with us uh",
    "start": "92520",
    "end": "95479"
  },
  {
    "text": "we represent over uh 170 countries",
    "start": "95479",
    "end": "99200"
  },
  {
    "text": "around the world and have about 10% of",
    "start": "99200",
    "end": "102360"
  },
  {
    "text": "the total us Commerce and I've had above",
    "start": "102360",
    "end": "105840"
  },
  {
    "text": "$400 billion in global Commerce",
    "start": "105840",
    "end": "110439"
  },
  {
    "text": "Activity one of the largest events in",
    "start": "110439",
    "end": "113600"
  },
  {
    "text": "Commerce especially in North America is",
    "start": "113600",
    "end": "116960"
  },
  {
    "text": "Black Friday Cyber Monday week we call",
    "start": "116960",
    "end": "119320"
  },
  {
    "text": "it BFC M to share more stats about the",
    "start": "119320",
    "end": "122840"
  },
  {
    "text": "scale of Shopify during the bfcm of 2023",
    "start": "122840",
    "end": "127399"
  },
  {
    "text": "which was a few months ago Shopify",
    "start": "127399",
    "end": "129720"
  },
  {
    "text": "processed",
    "start": "129720",
    "end": "131400"
  },
  {
    "text": "A45 billion requests in a day peing",
    "start": "131400",
    "end": "134480"
  },
  {
    "text": "around 60 million requests per minute um",
    "start": "134480",
    "end": "138040"
  },
  {
    "text": "which led to a total of $4 billion in",
    "start": "138040",
    "end": "142280"
  },
  {
    "text": "gmv search is a fundamental part of any",
    "start": "142280",
    "end": "146080"
  },
  {
    "text": "Commerce platform uh allowing buyers to",
    "start": "146080",
    "end": "148760"
  },
  {
    "text": "search and filter products and also",
    "start": "148760",
    "end": "150760"
  },
  {
    "text": "Merchants to fulfill uh orders and",
    "start": "150760",
    "end": "153400"
  },
  {
    "text": "manage their",
    "start": "153400",
    "end": "154519"
  },
  {
    "text": "customers uh when you go to any online",
    "start": "154519",
    "end": "157239"
  },
  {
    "text": "store and for example search for a",
    "start": "157239",
    "end": "159120"
  },
  {
    "text": "product your request goes to a search",
    "start": "159120",
    "end": "161200"
  },
  {
    "text": "engine uh that's backed by a secondary",
    "start": "161200",
    "end": "164000"
  },
  {
    "text": "data store which is different from",
    "start": "164000",
    "end": "166159"
  },
  {
    "text": "traditional databases uh we call this",
    "start": "166159",
    "end": "168800"
  },
  {
    "text": "secondary data store the search",
    "start": "168800",
    "end": "173040"
  },
  {
    "text": "infrastructure the next couple of slides",
    "start": "173040",
    "end": "175599"
  },
  {
    "text": "uh is going to be a quick refresher on",
    "start": "175599",
    "end": "178239"
  },
  {
    "text": "the two key technology will be talking",
    "start": "178239",
    "end": "180640"
  },
  {
    "text": "about throughout this talk the first one",
    "start": "180640",
    "end": "183159"
  },
  {
    "text": "is elastic search it is a distributed",
    "start": "183159",
    "end": "185760"
  },
  {
    "text": "Tech search and analytics engine built",
    "start": "185760",
    "end": "188560"
  },
  {
    "text": "on top of Lucine that has full TX s",
    "start": "188560",
    "end": "192200"
  },
  {
    "text": "capabilities that are well suited to the",
    "start": "192200",
    "end": "194400"
  },
  {
    "text": "e-commerce domain um it's also a",
    "start": "194400",
    "end": "197360"
  },
  {
    "text": "scalable and F tolerant system and it",
    "start": "197360",
    "end": "199640"
  },
  {
    "text": "handles a lot of um hard parts of",
    "start": "199640",
    "end": "202680"
  },
  {
    "text": "running a distributed system very",
    "start": "202680",
    "end": "205080"
  },
  {
    "text": "well the other one is CFA it is a it is",
    "start": "205080",
    "end": "209040"
  },
  {
    "text": "an open source first distributed",
    "start": "209040",
    "end": "210720"
  },
  {
    "text": "streaming platform that is used for",
    "start": "210720",
    "end": "212599"
  },
  {
    "text": "building realtime data pipelines and",
    "start": "212599",
    "end": "215120"
  },
  {
    "text": "streaming applications um kathka is",
    "start": "215120",
    "end": "217879"
  },
  {
    "text": "designed to handle large uh volumes of",
    "start": "217879",
    "end": "220439"
  },
  {
    "text": "data in real time and provides a",
    "start": "220439",
    "end": "222799"
  },
  {
    "text": "scalable and F tolerant architecture uh",
    "start": "222799",
    "end": "225519"
  },
  {
    "text": "for processing and storing",
    "start": "225519",
    "end": "227439"
  },
  {
    "text": "data it is commonly used for use cases",
    "start": "227439",
    "end": "230680"
  },
  {
    "text": "like uh log aggregation realtime",
    "start": "230680",
    "end": "233560"
  },
  {
    "text": "analytics and event driven",
    "start": "233560",
    "end": "235959"
  },
  {
    "text": "architectures CFA is built around the",
    "start": "235959",
    "end": "238519"
  },
  {
    "text": "concept of topics which are streams of",
    "start": "238519",
    "end": "241239"
  },
  {
    "text": "data that can be partitioned and",
    "start": "241239",
    "end": "244040"
  },
  {
    "text": "replicated across multiple notes in a",
    "start": "244040",
    "end": "246640"
  },
  {
    "text": "CFA cluster uh producers can write data",
    "start": "246640",
    "end": "249799"
  },
  {
    "text": "to a topic and consumers can uh read",
    "start": "249799",
    "end": "253159"
  },
  {
    "text": "data from them and read data from them",
    "start": "253159",
    "end": "255560"
  },
  {
    "text": "in real time at Shopify CFA is our uh",
    "start": "255560",
    "end": "260000"
  },
  {
    "text": "main messaging service so when we build",
    "start": "260000",
    "end": "263320"
  },
  {
    "text": "applications that need to large uh that",
    "start": "263320",
    "end": "265919"
  },
  {
    "text": "need to pass large volumes of data to",
    "start": "265919",
    "end": "268199"
  },
  {
    "text": "each other we use cfas so in our use",
    "start": "268199",
    "end": "270560"
  },
  {
    "text": "case uh we rely on kfka to receive",
    "start": "270560",
    "end": "273680"
  },
  {
    "text": "elastic search documents that are built",
    "start": "273680",
    "end": "275759"
  },
  {
    "text": "from SEO uh SEO records and we consume",
    "start": "275759",
    "end": "279080"
  },
  {
    "text": "them and store them in elastic",
    "start": "279080",
    "end": "282320"
  },
  {
    "text": "search Shopify is a large and complex",
    "start": "282320",
    "end": "286440"
  },
  {
    "text": "technical ecosystem made up of a variety",
    "start": "286440",
    "end": "289199"
  },
  {
    "text": "of abs and services and the biggest",
    "start": "289199",
    "end": "292160"
  },
  {
    "text": "service at Shopify is called the Shopify",
    "start": "292160",
    "end": "294440"
  },
  {
    "text": "core it is a big rails monolith uh that",
    "start": "294440",
    "end": "298639"
  },
  {
    "text": "powers all of our merchants and",
    "start": "298639",
    "end": "302080"
  },
  {
    "text": "storefronts we run Shopify and gcp",
    "start": "302080",
    "end": "304919"
  },
  {
    "text": "regions for resiliency what you're",
    "start": "304919",
    "end": "307440"
  },
  {
    "text": "looking at here is a high level",
    "start": "307440",
    "end": "309280"
  },
  {
    "text": "structure of Shopify core uh entire",
    "start": "309280",
    "end": "312039"
  },
  {
    "text": "Shopify core in a region is broken down",
    "start": "312039",
    "end": "314759"
  },
  {
    "text": "into above a 100 logical groups of SQL",
    "start": "314759",
    "end": "317800"
  },
  {
    "text": "databases and instances of other",
    "start": "317800",
    "end": "320160"
  },
  {
    "text": "services that are required to run",
    "start": "320160",
    "end": "323120"
  },
  {
    "text": "Shopify these groups uh Power all of our",
    "start": "323120",
    "end": "327039"
  },
  {
    "text": "online store functionality for shops",
    "start": "327039",
    "end": "329720"
  },
  {
    "text": "running in that",
    "start": "329720",
    "end": "331360"
  },
  {
    "text": "region we run one instance of elastic",
    "start": "331360",
    "end": "334680"
  },
  {
    "text": "search for Shopify core that provides",
    "start": "334680",
    "end": "337479"
  },
  {
    "text": "search functionality for the shops in",
    "start": "337479",
    "end": "339400"
  },
  {
    "text": "the region and to provide more details",
    "start": "339400",
    "end": "342520"
  },
  {
    "text": "we have an inj pipeline in each region",
    "start": "342520",
    "end": "345680"
  },
  {
    "text": "that consists of CFA topics um and CFA",
    "start": "345680",
    "end": "349840"
  },
  {
    "text": "consumers we produce records from All",
    "start": "349840",
    "end": "352160"
  },
  {
    "text": "Seal",
    "start": "352160",
    "end": "353240"
  },
  {
    "text": "instances uh in the region to our CFA",
    "start": "353240",
    "end": "355960"
  },
  {
    "text": "topics and our consumers pick up those",
    "start": "355960",
    "end": "358360"
  },
  {
    "text": "messages from the topics and write them",
    "start": "358360",
    "end": "361160"
  },
  {
    "text": "to the right elastic search index in",
    "start": "361160",
    "end": "363240"
  },
  {
    "text": "real time and for Simplicity I will",
    "start": "363240",
    "end": "366680"
  },
  {
    "text": "refer to all of those group self",
    "start": "366680",
    "end": "368639"
  },
  {
    "text": "services as Shopify core from now",
    "start": "368639",
    "end": "372360"
  },
  {
    "text": "on to give more context elastic search",
    "start": "372360",
    "end": "375599"
  },
  {
    "text": "is used as a secondary data store it's",
    "start": "375599",
    "end": "378560"
  },
  {
    "text": "utilized to provide additional uh",
    "start": "378560",
    "end": "381120"
  },
  {
    "text": "functionalities such as fast search",
    "start": "381120",
    "end": "383280"
  },
  {
    "text": "capabilities aggregations or full teex",
    "start": "383280",
    "end": "386160"
  },
  {
    "text": "search on top of the existing data set",
    "start": "386160",
    "end": "388639"
  },
  {
    "text": "that store in the primary data store",
    "start": "388639",
    "end": "391520"
  },
  {
    "text": "indexing is a term we will use a lot in",
    "start": "391520",
    "end": "394319"
  },
  {
    "text": "this stock uh it is the act of writing",
    "start": "394319",
    "end": "396880"
  },
  {
    "text": "documents from the primary data store to",
    "start": "396880",
    "end": "399759"
  },
  {
    "text": "elastic search um and we saw the injust",
    "start": "399759",
    "end": "403319"
  },
  {
    "text": "pipeline in the previous slide that",
    "start": "403319",
    "end": "405199"
  },
  {
    "text": "brought data from s uh as the primary",
    "start": "405199",
    "end": "408599"
  },
  {
    "text": "data store to elastic search through CFA",
    "start": "408599",
    "end": "411440"
  },
  {
    "text": "we have built on search platform we have",
    "start": "411440",
    "end": "413840"
  },
  {
    "text": "built two different uh indexing",
    "start": "413840",
    "end": "416840"
  },
  {
    "text": "pipelines for two different right",
    "start": "416840",
    "end": "418720"
  },
  {
    "text": "profiles the first one is called the",
    "start": "418720",
    "end": "422520"
  },
  {
    "text": "realtime pipeline which is which for",
    "start": "422520",
    "end": "425039"
  },
  {
    "text": "example indexes a product uh to elastic",
    "start": "425039",
    "end": "428160"
  },
  {
    "text": "search and makes it available for search",
    "start": "428160",
    "end": "429879"
  },
  {
    "text": "for buyers when a merchant creates a new",
    "start": "429879",
    "end": "432440"
  },
  {
    "text": "product and the other one is called the",
    "start": "432440",
    "end": "435639"
  },
  {
    "text": "reindex pipeline well we have a lot of",
    "start": "435639",
    "end": "438360"
  },
  {
    "text": "developers at Shopify they create",
    "start": "438360",
    "end": "440560"
  },
  {
    "text": "indices they modify index analyzers and",
    "start": "440560",
    "end": "443960"
  },
  {
    "text": "add or remove fields from them and when",
    "start": "443960",
    "end": "446639"
  },
  {
    "text": "that happens we need to migrate um all",
    "start": "446639",
    "end": "449599"
  },
  {
    "text": "that data to a new version of the index",
    "start": "449599",
    "end": "451800"
  },
  {
    "text": "and promote that index to make the new",
    "start": "451800",
    "end": "454160"
  },
  {
    "text": "features available to the merchants and",
    "start": "454160",
    "end": "456240"
  },
  {
    "text": "buyers and we call this reindexing which",
    "start": "456240",
    "end": "459599"
  },
  {
    "text": "means basically building an entire",
    "start": "459599",
    "end": "462319"
  },
  {
    "text": "elastic search index from",
    "start": "462319",
    "end": "465960"
  },
  {
    "text": "SQL um at Shopify we run our Fleet of",
    "start": "465960",
    "end": "469919"
  },
  {
    "text": "elastic search clusters on managed",
    "start": "469919",
    "end": "472520"
  },
  {
    "text": "kubernetes clusters GK on top of gcp and",
    "start": "472520",
    "end": "475879"
  },
  {
    "text": "we deploy and maintain them using a",
    "start": "475879",
    "end": "478240"
  },
  {
    "text": "custom kubernetes control controller",
    "start": "478240",
    "end": "479919"
  },
  {
    "text": "that we have",
    "start": "479919",
    "end": "481879"
  },
  {
    "text": "built a kubernetes custom controller",
    "start": "481879",
    "end": "485000"
  },
  {
    "text": "allows users to Define and Implement",
    "start": "485000",
    "end": "487120"
  },
  {
    "text": "their own custom Logic for managing and",
    "start": "487120",
    "end": "489879"
  },
  {
    "text": "reconciling resources in a kubernetes",
    "start": "489879",
    "end": "492639"
  },
  {
    "text": "cluster custom controllers are usually",
    "start": "492639",
    "end": "495599"
  },
  {
    "text": "designed to manage custom resources and",
    "start": "495599",
    "end": "498720"
  },
  {
    "text": "custom resources enable users to extend",
    "start": "498720",
    "end": "501039"
  },
  {
    "text": "the functionality of kubernetes by",
    "start": "501039",
    "end": "503759"
  },
  {
    "text": "defining new types of resources that are",
    "start": "503759",
    "end": "506560"
  },
  {
    "text": "not part of the core kubernetes API as",
    "start": "506560",
    "end": "510039"
  },
  {
    "text": "mentioned before we have designed and",
    "start": "510039",
    "end": "512518"
  },
  {
    "text": "implemented a custom controller for",
    "start": "512519",
    "end": "514479"
  },
  {
    "text": "search that manage that manages a custom",
    "start": "514479",
    "end": "517640"
  },
  {
    "text": "resource that we have defined called",
    "start": "517640",
    "end": "520360"
  },
  {
    "text": "elastic search which is basically the",
    "start": "520360",
    "end": "522839"
  },
  {
    "text": "desired configuration for an elastic",
    "start": "522839",
    "end": "525360"
  },
  {
    "text": "search cluster our custom controller uh",
    "start": "525360",
    "end": "529160"
  },
  {
    "text": "watches for new elastic search resources",
    "start": "529160",
    "end": "532000"
  },
  {
    "text": "or any updates that uh are made to the",
    "start": "532000",
    "end": "535040"
  },
  {
    "text": "existing",
    "start": "535040",
    "end": "536680"
  },
  {
    "text": "ones and uh the the custom controller",
    "start": "536680",
    "end": "540279"
  },
  {
    "text": "will create many kubernetes Native uh",
    "start": "540279",
    "end": "543320"
  },
  {
    "text": "resources to build an elastic search",
    "start": "543320",
    "end": "545240"
  },
  {
    "text": "cluster for example it uh creates",
    "start": "545240",
    "end": "548160"
  },
  {
    "text": "stateful sets to store the search data",
    "start": "548160",
    "end": "550760"
  },
  {
    "text": "and a few deployments to provide",
    "start": "550760",
    "end": "553360"
  },
  {
    "text": "monitoring and observ observability",
    "start": "553360",
    "end": "555880"
  },
  {
    "text": "features for the created elastic search",
    "start": "555880",
    "end": "558560"
  },
  {
    "text": "cluster it also creates the right",
    "start": "558560",
    "end": "561000"
  },
  {
    "text": "services ingresses and certificates to",
    "start": "561000",
    "end": "564519"
  },
  {
    "text": "provide a secure access to elastic",
    "start": "564519",
    "end": "568360"
  },
  {
    "text": "search",
    "start": "568360",
    "end": "571360"
  },
  {
    "text": "uh here you can see an example of uh an",
    "start": "572279",
    "end": "575480"
  },
  {
    "text": "elastic search custom resource",
    "start": "575480",
    "end": "577959"
  },
  {
    "text": "definition um the specific elastic",
    "start": "577959",
    "end": "580720"
  },
  {
    "text": "search definition requires two separate",
    "start": "580720",
    "end": "582880"
  },
  {
    "text": "note pools uh one is for storing data",
    "start": "582880",
    "end": "586760"
  },
  {
    "text": "and the other one is for",
    "start": "586760",
    "end": "588720"
  },
  {
    "text": "coordination uh once this custom",
    "start": "588720",
    "end": "591720"
  },
  {
    "text": "resource is applied to kubernetes API",
    "start": "591720",
    "end": "594200"
  },
  {
    "text": "server the custom controller will create",
    "start": "594200",
    "end": "597519"
  },
  {
    "text": "will create all these uh kubernetes",
    "start": "597519",
    "end": "600560"
  },
  {
    "text": "Native resources I see here um we also",
    "start": "600560",
    "end": "603640"
  },
  {
    "text": "referred to them in the previous slide",
    "start": "603640",
    "end": "605760"
  },
  {
    "text": "and uh this whole thing will create our",
    "start": "605760",
    "end": "608519"
  },
  {
    "text": "elastic search cluster and you can see",
    "start": "608519",
    "end": "610959"
  },
  {
    "text": "here that the controller created two",
    "start": "610959",
    "end": "614360"
  },
  {
    "text": "stateful Set uh each of them having",
    "start": "614360",
    "end": "617200"
  },
  {
    "text": "three replicas as it was requested by",
    "start": "617200",
    "end": "619640"
  },
  {
    "text": "the elastic search custom",
    "start": "619640",
    "end": "622959"
  },
  {
    "text": "resource this slide is a refresher on",
    "start": "623000",
    "end": "626760"
  },
  {
    "text": "the structure of kubernetes stateful",
    "start": "626760",
    "end": "628880"
  },
  {
    "text": "sets a stateful set confli includes a",
    "start": "628880",
    "end": "631720"
  },
  {
    "text": "pod template as well as a volume claim",
    "start": "631720",
    "end": "634040"
  },
  {
    "text": "template that defines the type of",
    "start": "634040",
    "end": "636160"
  },
  {
    "text": "storage uh that should be provided to",
    "start": "636160",
    "end": "638800"
  },
  {
    "text": "each pod when a stateful set is deployed",
    "start": "638800",
    "end": "642279"
  },
  {
    "text": "according to the number of replicas",
    "start": "642279",
    "end": "644600"
  },
  {
    "text": "defined uh in its config it creates pods",
    "start": "644600",
    "end": "647480"
  },
  {
    "text": "based on the Pod template and requests",
    "start": "647480",
    "end": "649519"
  },
  {
    "text": "for storage uh based on the volume claim",
    "start": "649519",
    "end": "652360"
  },
  {
    "text": "template for each of those pods and",
    "start": "652360",
    "end": "654680"
  },
  {
    "text": "assigns it to them in this slide you can",
    "start": "654680",
    "end": "657440"
  },
  {
    "text": "see one of the data P full set that is",
    "start": "657440",
    "end": "660440"
  },
  {
    "text": "built for Shopify core elastic search uh",
    "start": "660440",
    "end": "663920"
  },
  {
    "text": "these elastic search clusters are our",
    "start": "663920",
    "end": "665720"
  },
  {
    "text": "biggest ones containing",
    "start": "665720",
    "end": "668000"
  },
  {
    "text": "156 uh replicas each of them having 4",
    "start": "668000",
    "end": "671160"
  },
  {
    "text": "terab of",
    "start": "671160",
    "end": "673600"
  },
  {
    "text": "data our custom controller manages one",
    "start": "673600",
    "end": "677000"
  },
  {
    "text": "to many elastic searches they can be",
    "start": "677000",
    "end": "679360"
  },
  {
    "text": "large ones that have 260 nodes and they",
    "start": "679360",
    "end": "682120"
  },
  {
    "text": "can be smaller ones with just three",
    "start": "682120",
    "end": "686200"
  },
  {
    "text": "nodes at the scale that Shopify operates",
    "start": "686200",
    "end": "690200"
  },
  {
    "text": "and with the impact that search has on",
    "start": "690200",
    "end": "692880"
  },
  {
    "text": "Merchants Revenue its infrastructure",
    "start": "692880",
    "end": "695440"
  },
  {
    "text": "should be designed to meet certain",
    "start": "695440",
    "end": "697600"
  },
  {
    "text": "requirements search needs to be highly",
    "start": "697600",
    "end": "699600"
  },
  {
    "text": "available to ensure that it does not",
    "start": "699600",
    "end": "701959"
  },
  {
    "text": "stop Revenue needs to be scalable to",
    "start": "701959",
    "end": "705399"
  },
  {
    "text": "provide the service when the load",
    "start": "705399",
    "end": "707120"
  },
  {
    "text": "increases and be available for merchants",
    "start": "707120",
    "end": "709839"
  },
  {
    "text": "and buyers across the",
    "start": "709839",
    "end": "712160"
  },
  {
    "text": "world High",
    "start": "712160",
    "end": "714040"
  },
  {
    "text": "availability our first requirement",
    "start": "714040",
    "end": "716279"
  },
  {
    "text": "refers to the design and implementation",
    "start": "716279",
    "end": "718519"
  },
  {
    "text": "of systems that are continuously",
    "start": "718519",
    "end": "721399"
  },
  {
    "text": "operational and accessible for users",
    "start": "721399",
    "end": "724320"
  },
  {
    "text": "over extended periods of time typically",
    "start": "724320",
    "end": "727240"
  },
  {
    "text": "with minimal downtime in a highly",
    "start": "727240",
    "end": "730279"
  },
  {
    "text": "available system redundancy fall",
    "start": "730279",
    "end": "732440"
  },
  {
    "text": "tolerance and failover mechanisms are",
    "start": "732440",
    "end": "734959"
  },
  {
    "text": "employed to ensure that the system",
    "start": "734959",
    "end": "737560"
  },
  {
    "text": "remains operational in the events of",
    "start": "737560",
    "end": "739720"
  },
  {
    "text": "failure failures happen at different",
    "start": "739720",
    "end": "742079"
  },
  {
    "text": "levels one level is at the system level",
    "start": "742079",
    "end": "745839"
  },
  {
    "text": "uh a system failure can mean a VM or",
    "start": "745839",
    "end": "748680"
  },
  {
    "text": "just a crashing or even one of the kuun",
    "start": "748680",
    "end": "752199"
  },
  {
    "text": "pods um that run elastic search in this",
    "start": "752199",
    "end": "755160"
  },
  {
    "text": "case crashes another level of failure is",
    "start": "755160",
    "end": "758839"
  },
  {
    "text": "regional failure events such as natural",
    "start": "758839",
    "end": "761800"
  },
  {
    "text": "disasters or a faulty deployment can",
    "start": "761800",
    "end": "765560"
  },
  {
    "text": "bring down an entire region that runs",
    "start": "765560",
    "end": "767600"
  },
  {
    "text": "elastic",
    "start": "767600",
    "end": "769519"
  },
  {
    "text": "search the main step towards",
    "start": "769519",
    "end": "772480"
  },
  {
    "text": "availability and F tolerance is",
    "start": "772480",
    "end": "774880"
  },
  {
    "text": "redundancy and one might think that",
    "start": "774880",
    "end": "777360"
  },
  {
    "text": "since kubernetes state forets manage",
    "start": "777360",
    "end": "779920"
  },
  {
    "text": "multiple pods based on an identical",
    "start": "779920",
    "end": "782639"
  },
  {
    "text": "container spec running a stateful set",
    "start": "782639",
    "end": "785160"
  },
  {
    "text": "with many pods will automatically",
    "start": "785160",
    "end": "787839"
  },
  {
    "text": "provide High availability by just adding",
    "start": "787839",
    "end": "790240"
  },
  {
    "text": "redundancy but this is not really true",
    "start": "790240",
    "end": "793320"
  },
  {
    "text": "consider the saful set with three parts",
    "start": "793320",
    "end": "796600"
  },
  {
    "text": "here fa tolerance means that if the",
    "start": "796600",
    "end": "800399"
  },
  {
    "text": "application uh means that the",
    "start": "800399",
    "end": "802680"
  },
  {
    "text": "application is able to provide the same",
    "start": "802680",
    "end": "804680"
  },
  {
    "text": "service even if one of those pods fail",
    "start": "804680",
    "end": "807920"
  },
  {
    "text": "but that's not true for stateful sets",
    "start": "807920",
    "end": "810839"
  },
  {
    "text": "depending on the application that the",
    "start": "810839",
    "end": "812440"
  },
  {
    "text": "stateful set is running uh each",
    "start": "812440",
    "end": "815079"
  },
  {
    "text": "persistent disk has a different set of",
    "start": "815079",
    "end": "817680"
  },
  {
    "text": "data so if pod zero fails for example",
    "start": "817680",
    "end": "821680"
  },
  {
    "text": "although pod one and pod two are still",
    "start": "821680",
    "end": "824160"
  },
  {
    "text": "running they will not have access to pod",
    "start": "824160",
    "end": "826959"
  },
  {
    "text": "Zero's data and therefore they cannot",
    "start": "826959",
    "end": "829720"
  },
  {
    "text": "provide the same service that pod zero",
    "start": "829720",
    "end": "831600"
  },
  {
    "text": "was providing before the crash so the",
    "start": "831600",
    "end": "835440"
  },
  {
    "text": "service will not be available until pod",
    "start": "835440",
    "end": "838120"
  },
  {
    "text": "zero is recovered by kubernetes in other",
    "start": "838120",
    "end": "841120"
  },
  {
    "text": "words uh although we have redundancy for",
    "start": "841120",
    "end": "844000"
  },
  {
    "text": "the uh for the pods we don't have any",
    "start": "844000",
    "end": "846839"
  },
  {
    "text": "redundancy for the stored data on the",
    "start": "846839",
    "end": "848880"
  },
  {
    "text": "Diss and the lesson learned here is that",
    "start": "848880",
    "end": "851920"
  },
  {
    "text": "kubernetes does not provide redundancy",
    "start": "851920",
    "end": "854560"
  },
  {
    "text": "out of the data redundancy out of the",
    "start": "854560",
    "end": "856560"
  },
  {
    "text": "box and it's up to the application to",
    "start": "856560",
    "end": "858920"
  },
  {
    "text": "replicate the",
    "start": "858920",
    "end": "860560"
  },
  {
    "text": "data taking elastic search as an example",
    "start": "860560",
    "end": "864519"
  },
  {
    "text": "the data is stored uh is charted by",
    "start": "864519",
    "end": "867600"
  },
  {
    "text": "elastic search and each chart can have",
    "start": "867600",
    "end": "869680"
  },
  {
    "text": "multiple replicas elastic search has a",
    "start": "869680",
    "end": "872800"
  },
  {
    "text": "mechanism to distribute the primary and",
    "start": "872800",
    "end": "875680"
  },
  {
    "text": "replica shards across the diss in a way",
    "start": "875680",
    "end": "878399"
  },
  {
    "text": "that if one of them fails and we lose",
    "start": "878399",
    "end": "881160"
  },
  {
    "text": "access to some primary shards there is",
    "start": "881160",
    "end": "883680"
  },
  {
    "text": "at least one disc that is able to",
    "start": "883680",
    "end": "886680"
  },
  {
    "text": "provide the same service by promoting",
    "start": "886680",
    "end": "888600"
  },
  {
    "text": "the replica shards to primary",
    "start": "888600",
    "end": "892360"
  },
  {
    "text": "shards looking more closely at the",
    "start": "892360",
    "end": "895759"
  },
  {
    "text": "infrastructure we have Zone aware",
    "start": "895759",
    "end": "898240"
  },
  {
    "text": "elastic search clusters meaning that we",
    "start": "898240",
    "end": "900920"
  },
  {
    "text": "deploy our kubernetes",
    "start": "900920",
    "end": "902839"
  },
  {
    "text": "cluster across three availability zones",
    "start": "902839",
    "end": "906240"
  },
  {
    "text": "and when elastic search distributes",
    "start": "906240",
    "end": "908440"
  },
  {
    "text": "primary and replica shards it",
    "start": "908440",
    "end": "910639"
  },
  {
    "text": "distributes them in a way uh across",
    "start": "910639",
    "end": "913160"
  },
  {
    "text": "these zones that the primary and replica",
    "start": "913160",
    "end": "916160"
  },
  {
    "text": "for one chart do not end up in the same",
    "start": "916160",
    "end": "918720"
  },
  {
    "text": "availability",
    "start": "918720",
    "end": "919959"
  },
  {
    "text": "Zone we use node Affinity rules to",
    "start": "919959",
    "end": "923440"
  },
  {
    "text": "ensure that two pods from the same",
    "start": "923440",
    "end": "926399"
  },
  {
    "text": "elastic search cluster do not get",
    "start": "926399",
    "end": "928319"
  },
  {
    "text": "scheduled on the same node and for the",
    "start": "928319",
    "end": "931480"
  },
  {
    "text": "Shopify core elastic search we change",
    "start": "931480",
    "end": "934360"
  },
  {
    "text": "the GK node so only the elastic search",
    "start": "934360",
    "end": "937199"
  },
  {
    "text": "pods are deployed on them and the",
    "start": "937199",
    "end": "940000"
  },
  {
    "text": "elastic search pods are given the right",
    "start": "940000",
    "end": "942240"
  },
  {
    "text": "Toleration so they can be scheduled on",
    "start": "942240",
    "end": "944480"
  },
  {
    "text": "the right gke notes with this Zone aware",
    "start": "944480",
    "end": "948519"
  },
  {
    "text": "setting uh we can also do maintenance",
    "start": "948519",
    "end": "951079"
  },
  {
    "text": "more quickly uh as we can bring down an",
    "start": "951079",
    "end": "954160"
  },
  {
    "text": "entire availability zone for just",
    "start": "954160",
    "end": "956680"
  },
  {
    "text": "maintenance without being worried about",
    "start": "956680",
    "end": "958440"
  },
  {
    "text": "data loss",
    "start": "958440",
    "end": "960920"
  },
  {
    "text": "let's take uh another look at an example",
    "start": "961600",
    "end": "964839"
  },
  {
    "text": "gcp region where Shopify core and its",
    "start": "964839",
    "end": "967720"
  },
  {
    "text": "elastic search cluster runs uh we have",
    "start": "967720",
    "end": "970639"
  },
  {
    "text": "the Ines pipeline updating elastic",
    "start": "970639",
    "end": "973079"
  },
  {
    "text": "search when changes are made to SQL",
    "start": "973079",
    "end": "975279"
  },
  {
    "text": "records uh we can see here that search",
    "start": "975279",
    "end": "978279"
  },
  {
    "text": "queries are sent to the elastic search",
    "start": "978279",
    "end": "980920"
  },
  {
    "text": "uh through a routing layer meaning that",
    "start": "980920",
    "end": "983720"
  },
  {
    "text": "queries made to shops in a certain",
    "start": "983720",
    "end": "985519"
  },
  {
    "text": "region are routed to the elastic search",
    "start": "985519",
    "end": "988240"
  },
  {
    "text": "in the same region",
    "start": "988240",
    "end": "990079"
  },
  {
    "text": "we mentioned before that uh the first",
    "start": "990079",
    "end": "993120"
  },
  {
    "text": "step towards High availability is",
    "start": "993120",
    "end": "995199"
  },
  {
    "text": "redundancy and to mitigate Regional",
    "start": "995199",
    "end": "997639"
  },
  {
    "text": "failures we should replicate our system",
    "start": "997639",
    "end": "1000079"
  },
  {
    "text": "to another",
    "start": "1000079",
    "end": "1001519"
  },
  {
    "text": "region the active SQL instances and CFA",
    "start": "1001519",
    "end": "1005399"
  },
  {
    "text": "topics in different regions hold",
    "start": "1005399",
    "end": "1008000"
  },
  {
    "text": "different data sets and we need to",
    "start": "1008000",
    "end": "1010519"
  },
  {
    "text": "replicate their data between regions so",
    "start": "1010519",
    "end": "1013440"
  },
  {
    "text": "both elastic search clusters uh will",
    "start": "1013440",
    "end": "1016040"
  },
  {
    "text": "have the same data set with this interv",
    "start": "1016040",
    "end": "1019160"
  },
  {
    "text": "data replication if one of the elastic",
    "start": "1019160",
    "end": "1021800"
  },
  {
    "text": "search clusters goes down uh we can fail",
    "start": "1021800",
    "end": "1025199"
  },
  {
    "text": "over the query traffic to the elastic",
    "start": "1025199",
    "end": "1027720"
  },
  {
    "text": "search cluster that is functional uh",
    "start": "1027720",
    "end": "1030600"
  },
  {
    "text": "until the other one has",
    "start": "1030600",
    "end": "1033918"
  },
  {
    "text": "recovered another requirement for our",
    "start": "1035199",
    "end": "1038038"
  },
  {
    "text": "system is scalability we need to be able",
    "start": "1038039",
    "end": "1040959"
  },
  {
    "text": "to adapt to changes uh to the loads put",
    "start": "1040959",
    "end": "1044079"
  },
  {
    "text": "on our infrastructure an example of a",
    "start": "1044079",
    "end": "1046640"
  },
  {
    "text": "high load event that happens regularly",
    "start": "1046640",
    "end": "1048679"
  },
  {
    "text": "in is uh running re indexes which often",
    "start": "1048679",
    "end": "1051919"
  },
  {
    "text": "means writing a large number of",
    "start": "1051919",
    "end": "1054679"
  },
  {
    "text": "documents to elastic SE to build an",
    "start": "1054679",
    "end": "1056520"
  },
  {
    "text": "entire index the indexing rate during a",
    "start": "1056520",
    "end": "1060360"
  },
  {
    "text": "reindex could Peak at 500,000 documents",
    "start": "1060360",
    "end": "1063760"
  },
  {
    "text": "per second um another example of uh",
    "start": "1063760",
    "end": "1067960"
  },
  {
    "text": "increas of load on our infrastructure is",
    "start": "1067960",
    "end": "1070559"
  },
  {
    "text": "high volume Commerce events like flash",
    "start": "1070559",
    "end": "1073160"
  },
  {
    "text": "sales or bfcm as I mentioned before",
    "start": "1073160",
    "end": "1076440"
  },
  {
    "text": "these events can cause a high indexing",
    "start": "1076440",
    "end": "1078919"
  },
  {
    "text": "rate of uh 100,000 documents per",
    "start": "1078919",
    "end": "1083760"
  },
  {
    "text": "second scaling up compute resources and",
    "start": "1083760",
    "end": "1087640"
  },
  {
    "text": "releasing them for stold systems is not",
    "start": "1087640",
    "end": "1090720"
  },
  {
    "text": "a straightforward task and we often",
    "start": "1090720",
    "end": "1093320"
  },
  {
    "text": "pre-provision CPU and memory before",
    "start": "1093320",
    "end": "1095960"
  },
  {
    "text": "these events start these events also",
    "start": "1095960",
    "end": "1099120"
  },
  {
    "text": "impact storage utilization and elastic",
    "start": "1099120",
    "end": "1101840"
  },
  {
    "text": "search can get full and block incoming",
    "start": "1101840",
    "end": "1104559"
  },
  {
    "text": "rights if we don't allocate more storage",
    "start": "1104559",
    "end": "1107240"
  },
  {
    "text": "to it and we have handled storage",
    "start": "1107240",
    "end": "1110320"
  },
  {
    "text": "scaling by adding the logic to our Uh",
    "start": "1110320",
    "end": "1113400"
  },
  {
    "text": "custom kubernetes",
    "start": "1113400",
    "end": "1116280"
  },
  {
    "text": "controller and here let's take a look at",
    "start": "1116280",
    "end": "1118679"
  },
  {
    "text": "how our custom controller handles",
    "start": "1118679",
    "end": "1121159"
  },
  {
    "text": "storage",
    "start": "1121159",
    "end": "1122159"
  },
  {
    "text": "autoscaling uh what you what you see",
    "start": "1122159",
    "end": "1124240"
  },
  {
    "text": "here is an example elastic search",
    "start": "1124240",
    "end": "1126520"
  },
  {
    "text": "stateful set that has 120 replicas each",
    "start": "1126520",
    "end": "1129880"
  },
  {
    "text": "of them having 4 terab of data part of",
    "start": "1129880",
    "end": "1133159"
  },
  {
    "text": "the volume claim template in the",
    "start": "1133159",
    "end": "1134919"
  },
  {
    "text": "stateful set spec uh defines the storage",
    "start": "1134919",
    "end": "1137960"
  },
  {
    "text": "class that should be used for the",
    "start": "1137960",
    "end": "1139919"
  },
  {
    "text": "volumes attached to the stateful set",
    "start": "1139919",
    "end": "1141919"
  },
  {
    "text": "pods ginetes provides a feature called",
    "start": "1141919",
    "end": "1146080"
  },
  {
    "text": "allow volume expansion for storage",
    "start": "1146080",
    "end": "1148960"
  },
  {
    "text": "classes which if it's set to true the",
    "start": "1148960",
    "end": "1151440"
  },
  {
    "text": "diss created based on that storage class",
    "start": "1151440",
    "end": "1154480"
  },
  {
    "text": "will have the ability to be seamlessly",
    "start": "1154480",
    "end": "1158200"
  },
  {
    "text": "expanded as I mentioned before our",
    "start": "1158200",
    "end": "1160600"
  },
  {
    "text": "custom controller manages elastic search",
    "start": "1160600",
    "end": "1163360"
  },
  {
    "text": "custom resources and reacts accordingly",
    "start": "1163360",
    "end": "1166520"
  },
  {
    "text": "if an elastic search resource is updated",
    "start": "1166520",
    "end": "1169760"
  },
  {
    "text": "by modifying the elastic search resource",
    "start": "1169760",
    "end": "1172520"
  },
  {
    "text": "and changing the volume size for example",
    "start": "1172520",
    "end": "1175240"
  },
  {
    "text": "from 4 terab to8 we tell the controller",
    "start": "1175240",
    "end": "1178840"
  },
  {
    "text": "that the discs uh for the elastic search",
    "start": "1178840",
    "end": "1181400"
  },
  {
    "text": "stle set need to be resized and the",
    "start": "1181400",
    "end": "1184559"
  },
  {
    "text": "controller updates the elastic search",
    "start": "1184559",
    "end": "1186880"
  },
  {
    "text": "staple Set uh with a new dis size and",
    "start": "1186880",
    "end": "1190679"
  },
  {
    "text": "consequently uh updates the volumes",
    "start": "1190679",
    "end": "1193039"
  },
  {
    "text": "attached to the elastic search stateful",
    "start": "1193039",
    "end": "1195120"
  },
  {
    "text": "sets uh stateful set pods uh since these",
    "start": "1195120",
    "end": "1199200"
  },
  {
    "text": "volumes have the uh allow volume",
    "start": "1199200",
    "end": "1202200"
  },
  {
    "text": "expansion feature they seamlessly get",
    "start": "1202200",
    "end": "1204799"
  },
  {
    "text": "replaced by a by larger volumes by",
    "start": "1204799",
    "end": "1208760"
  },
  {
    "text": "kubernetes uh before using the this",
    "start": "1208760",
    "end": "1211440"
  },
  {
    "text": "feature uh the allow volume expansion",
    "start": "1211440",
    "end": "1214000"
  },
  {
    "text": "flag we used to replace discs one by one",
    "start": "1214000",
    "end": "1218559"
  },
  {
    "text": "and draining every single dis deleting",
    "start": "1218559",
    "end": "1220799"
  },
  {
    "text": "them and creating new ones and using",
    "start": "1220799",
    "end": "1223080"
  },
  {
    "text": "this feature allows us to scale up the",
    "start": "1223080",
    "end": "1225559"
  },
  {
    "text": "Shopify core elastic search cluster in",
    "start": "1225559",
    "end": "1227559"
  },
  {
    "text": "just about like 10 15 minutes while it",
    "start": "1227559",
    "end": "1230159"
  },
  {
    "text": "used to take about 6 7even",
    "start": "1230159",
    "end": "1233679"
  },
  {
    "text": "hours our merchants and buyers are",
    "start": "1233720",
    "end": "1236720"
  },
  {
    "text": "spread across the globe today and we",
    "start": "1236720",
    "end": "1238840"
  },
  {
    "text": "represent above 170 countries around the",
    "start": "1238840",
    "end": "1241400"
  },
  {
    "text": "world before Co Shopify ran in three gcp",
    "start": "1241400",
    "end": "1245679"
  },
  {
    "text": "regions in North America only one in",
    "start": "1245679",
    "end": "1248640"
  },
  {
    "text": "Canada and two regions in the US which",
    "start": "1248640",
    "end": "1251520"
  },
  {
    "text": "were the pair that um served online",
    "start": "1251520",
    "end": "1254400"
  },
  {
    "text": "store functionalities for all merchants",
    "start": "1254400",
    "end": "1256480"
  },
  {
    "text": "and buyers after covid many businesses",
    "start": "1256480",
    "end": "1260559"
  },
  {
    "text": "went online and a lot of sales became",
    "start": "1260559",
    "end": "1262480"
  },
  {
    "text": "online online as well this led to an",
    "start": "1262480",
    "end": "1265320"
  },
  {
    "text": "increase in the number of merchants and",
    "start": "1265320",
    "end": "1267360"
  },
  {
    "text": "buyers across the globe and latency and",
    "start": "1267360",
    "end": "1270240"
  },
  {
    "text": "data locality in compliance with",
    "start": "1270240",
    "end": "1272559"
  },
  {
    "text": "geographical jurisdictions became",
    "start": "1272559",
    "end": "1275279"
  },
  {
    "text": "constraints so Shopify decided to expand",
    "start": "1275279",
    "end": "1278120"
  },
  {
    "text": "to other regions of the",
    "start": "1278120",
    "end": "1280240"
  },
  {
    "text": "world today in addition to North America",
    "start": "1280240",
    "end": "1283760"
  },
  {
    "text": "Shopify runs in Europe Australia and",
    "start": "1283760",
    "end": "1286799"
  },
  {
    "text": "Singapore to reduce rency and provide a",
    "start": "1286799",
    "end": "1289679"
  },
  {
    "text": "better quality of service to the",
    "start": "1289679",
    "end": "1291840"
  },
  {
    "text": "merchants uh and also buyers and search",
    "start": "1291840",
    "end": "1294679"
  },
  {
    "text": "platform has followed the same pattern",
    "start": "1294679",
    "end": "1296919"
  },
  {
    "text": "and we have brought uh our",
    "start": "1296919",
    "end": "1298799"
  },
  {
    "text": "infrastructure closer to our clients to",
    "start": "1298799",
    "end": "1301279"
  },
  {
    "text": "provide a better search",
    "start": "1301279",
    "end": "1303760"
  },
  {
    "text": "experience search platform runs many",
    "start": "1303760",
    "end": "1307480"
  },
  {
    "text": "elastic search clusters across the globe",
    "start": "1307480",
    "end": "1309559"
  },
  {
    "text": "you see them here each small square you",
    "start": "1309559",
    "end": "1313159"
  },
  {
    "text": "see in this diagram is a uh an elastic",
    "start": "1313159",
    "end": "1316760"
  },
  {
    "text": "Ser State full set Po and and as you can",
    "start": "1316760",
    "end": "1319200"
  },
  {
    "text": "see many instances of our custom",
    "start": "1319200",
    "end": "1322200"
  },
  {
    "text": "controller uh managing and deploying",
    "start": "1322200",
    "end": "1324880"
  },
  {
    "text": "elastics or stateful sets in different",
    "start": "1324880",
    "end": "1327480"
  },
  {
    "text": "regions of the",
    "start": "1327480",
    "end": "1330080"
  },
  {
    "text": "world and yeah they are marked by Red in",
    "start": "1330080",
    "end": "1333840"
  },
  {
    "text": "here and as of today search platform",
    "start": "1333840",
    "end": "1336799"
  },
  {
    "text": "manages above 100 distinct elastic",
    "start": "1336799",
    "end": "1339640"
  },
  {
    "text": "search clusters some of which are as",
    "start": "1339640",
    "end": "1341960"
  },
  {
    "text": "large as 260 node clusters and many are",
    "start": "1341960",
    "end": "1345039"
  },
  {
    "text": "as small as three node clusters that",
    "start": "1345039",
    "end": "1347480"
  },
  {
    "text": "provide search for different apps that",
    "start": "1347480",
    "end": "1349360"
  },
  {
    "text": "Shopify uh together they store more than",
    "start": "1349360",
    "end": "1352039"
  },
  {
    "text": "three pedabytes of data and just so you",
    "start": "1352039",
    "end": "1355400"
  },
  {
    "text": "know one instance of Shopify core",
    "start": "1355400",
    "end": "1358240"
  },
  {
    "text": "elastic search has around 400 billion",
    "start": "1358240",
    "end": "1361640"
  },
  {
    "text": "documents um using around 400 terabytes",
    "start": "1361640",
    "end": "1364799"
  },
  {
    "text": "of",
    "start": "1364799",
    "end": "1366080"
  },
  {
    "text": "data the indexing rate for the real time",
    "start": "1366080",
    "end": "1369320"
  },
  {
    "text": "pipeline uh can Peak at 990,000",
    "start": "1369320",
    "end": "1372120"
  },
  {
    "text": "documents per second and for the reindex",
    "start": "1372120",
    "end": "1374760"
  },
  {
    "text": "pipeline it Peaks at 500,000 documents",
    "start": "1374760",
    "end": "1378159"
  },
  {
    "text": "per second",
    "start": "1378159",
    "end": "1379440"
  },
  {
    "text": "second so to summarize uh in this talk",
    "start": "1379440",
    "end": "1382880"
  },
  {
    "text": "we reviewed that redundancy is key for",
    "start": "1382880",
    "end": "1385039"
  },
  {
    "text": "high",
    "start": "1385039",
    "end": "1385960"
  },
  {
    "text": "availability uh and we learned that we",
    "start": "1385960",
    "end": "1388200"
  },
  {
    "text": "can we cannot rely on kubernetes to",
    "start": "1388200",
    "end": "1390600"
  },
  {
    "text": "provide High availability for stateful",
    "start": "1390600",
    "end": "1392640"
  },
  {
    "text": "systems out of the box uh we also",
    "start": "1392640",
    "end": "1395440"
  },
  {
    "text": "learned that search infrastructure at",
    "start": "1395440",
    "end": "1397760"
  },
  {
    "text": "Shopify uh and how it provides",
    "start": "1397760",
    "end": "1399960"
  },
  {
    "text": "redundancy by using uh a search engine",
    "start": "1399960",
    "end": "1402760"
  },
  {
    "text": "like elastic search that has built-in fa",
    "start": "1402760",
    "end": "1405600"
  },
  {
    "text": "tolerance and also by replicating data",
    "start": "1405600",
    "end": "1408200"
  },
  {
    "text": "between between gcp regions Uh shopify's",
    "start": "1408200",
    "end": "1411320"
  },
  {
    "text": "custom controller for search was also",
    "start": "1411320",
    "end": "1413520"
  },
  {
    "text": "introduced uh and we saw how it can help",
    "start": "1413520",
    "end": "1416039"
  },
  {
    "text": "scaling storage for stateful sets in",
    "start": "1416039",
    "end": "1419880"
  },
  {
    "text": "production thank you all and if you have",
    "start": "1419880",
    "end": "1422360"
  },
  {
    "text": "any questions uh I think there are two",
    "start": "1422360",
    "end": "1424960"
  },
  {
    "text": "mics over there if you have any",
    "start": "1424960",
    "end": "1426120"
  },
  {
    "text": "questions you can ask",
    "start": "1426120",
    "end": "1428080"
  },
  {
    "text": "[Applause]",
    "start": "1428080",
    "end": "1437440"
  },
  {
    "text": "them",
    "start": "1437440",
    "end": "1438960"
  },
  {
    "text": "thank you for the talk was very",
    "start": "1438960",
    "end": "1440360"
  },
  {
    "text": "interesting and very engaging also",
    "start": "1440360",
    "end": "1442240"
  },
  {
    "text": "interesting to see how that is working",
    "start": "1442240",
    "end": "1444240"
  },
  {
    "text": "within Shopify uh a question if I recall",
    "start": "1444240",
    "end": "1447960"
  },
  {
    "text": "correctly there is a official uh elastic",
    "start": "1447960",
    "end": "1450799"
  },
  {
    "text": "search Cloud for kubernetes operator uh",
    "start": "1450799",
    "end": "1454120"
  },
  {
    "text": "which supports a lot of the",
    "start": "1454120",
    "end": "1455440"
  },
  {
    "text": "functionality that you",
    "start": "1455440",
    "end": "1457320"
  },
  {
    "text": "were describing um I'm curious what",
    "start": "1457320",
    "end": "1461279"
  },
  {
    "text": "prompted you to choose to implement your",
    "start": "1461279",
    "end": "1463720"
  },
  {
    "text": "own operator was there a specific set of",
    "start": "1463720",
    "end": "1466840"
  },
  {
    "text": "features you were missing or something",
    "start": "1466840",
    "end": "1469039"
  },
  {
    "text": "else um we run the um we started",
    "start": "1469039",
    "end": "1473799"
  },
  {
    "text": "building the controller I believe before",
    "start": "1473799",
    "end": "1476880"
  },
  {
    "text": "uh elastic started like uh presenting",
    "start": "1476880",
    "end": "1480399"
  },
  {
    "text": "that and it's also about the licenses",
    "start": "1480399",
    "end": "1483360"
  },
  {
    "text": "like it's we have already we had already",
    "start": "1483360",
    "end": "1485120"
  },
  {
    "text": "been working on it and it was working",
    "start": "1485120",
    "end": "1488520"
  },
  {
    "text": "really well and we didn't find the need",
    "start": "1488520",
    "end": "1491240"
  },
  {
    "text": "to go with the um Enterprise",
    "start": "1491240",
    "end": "1495640"
  },
  {
    "text": "solution",
    "start": "1495640",
    "end": "1497320"
  },
  {
    "text": "yeah",
    "start": "1497320",
    "end": "1499240"
  },
  {
    "text": "uh yeah um yeah thank you for the talk",
    "start": "1499240",
    "end": "1502679"
  },
  {
    "text": "uh I want to ask how often do you need",
    "start": "1502679",
    "end": "1506039"
  },
  {
    "text": "do you have a catastrophic failure and",
    "start": "1506039",
    "end": "1508000"
  },
  {
    "text": "you need to recover data from the",
    "start": "1508000",
    "end": "1511039"
  },
  {
    "text": "charts uh how often we do",
    "start": "1511039",
    "end": "1514559"
  },
  {
    "text": "traffic basically whenever we are paged",
    "start": "1514559",
    "end": "1518000"
  },
  {
    "text": "so it it happens that for",
    "start": "1518000",
    "end": "1521520"
  },
  {
    "text": "example there is a like large uh a flash",
    "start": "1521520",
    "end": "1525480"
  },
  {
    "text": "sale is happening and a lot of orders",
    "start": "1525480",
    "end": "1528039"
  },
  {
    "text": "are coming in",
    "start": "1528039",
    "end": "1530840"
  },
  {
    "text": "and indexing like on a specific note",
    "start": "1530840",
    "end": "1533880"
  },
  {
    "text": "goes high and like that somehow stalls",
    "start": "1533880",
    "end": "1537279"
  },
  {
    "text": "other rights coming into the elastic",
    "start": "1537279",
    "end": "1539200"
  },
  {
    "text": "search cluster and like impacts other",
    "start": "1539200",
    "end": "1541360"
  },
  {
    "text": "Merchants so like that that's one",
    "start": "1541360",
    "end": "1544039"
  },
  {
    "text": "example we fail over traffic from one",
    "start": "1544039",
    "end": "1546320"
  },
  {
    "text": "region to another uh to mitigate the",
    "start": "1546320",
    "end": "1549200"
  },
  {
    "text": "impact for other regions uh sorry for",
    "start": "1549200",
    "end": "1551840"
  },
  {
    "text": "other",
    "start": "1551840",
    "end": "1552600"
  },
  {
    "text": "Merchants uh you had also a question",
    "start": "1552600",
    "end": "1554760"
  },
  {
    "text": "about chards no no no but uh that that",
    "start": "1554760",
    "end": "1558080"
  },
  {
    "text": "was the answer thank you yeah no",
    "start": "1558080",
    "end": "1560240"
  },
  {
    "text": "worries uh yeah hi thank you for the",
    "start": "1560240",
    "end": "1562679"
  },
  {
    "text": "talk um more question about the pipeline",
    "start": "1562679",
    "end": "1565919"
  },
  {
    "text": "so CF my myql to Kafka to elastic search",
    "start": "1565919",
    "end": "1570320"
  },
  {
    "text": "so do all applications because we have a",
    "start": "1570320",
    "end": "1572720"
  },
  {
    "text": "similar thing but much smaller do",
    "start": "1572720",
    "end": "1575399"
  },
  {
    "text": "applications only write to mySQL and",
    "start": "1575399",
    "end": "1578399"
  },
  {
    "text": "then wait for the data to get into",
    "start": "1578399",
    "end": "1579640"
  },
  {
    "text": "elastic search or do sometimes if say",
    "start": "1579640",
    "end": "1582279"
  },
  {
    "text": "the application needs to get the data",
    "start": "1582279",
    "end": "1584120"
  },
  {
    "text": "right away back from elastic um do they",
    "start": "1584120",
    "end": "1587360"
  },
  {
    "text": "write to both",
    "start": "1587360",
    "end": "1589480"
  },
  {
    "text": "and eventually reconciles in",
    "start": "1589480",
    "end": "1591640"
  },
  {
    "text": "elastic yeah so the pipeline that I",
    "start": "1591640",
    "end": "1594440"
  },
  {
    "text": "shared was specific for Shopify core uh",
    "start": "1594440",
    "end": "1598919"
  },
  {
    "text": "for that we use our only source of data",
    "start": "1598919",
    "end": "1602840"
  },
  {
    "text": "is SQL so nothing else writes to the CFA",
    "start": "1602840",
    "end": "1606679"
  },
  {
    "text": "topics that uh we consume from to write",
    "start": "1606679",
    "end": "1609799"
  },
  {
    "text": "to Shopify cor elastic search uh but we",
    "start": "1609799",
    "end": "1613159"
  },
  {
    "text": "do have like as I showed we have a lot",
    "start": "1613159",
    "end": "1615880"
  },
  {
    "text": "of other uh teams that shop Shopify",
    "start": "1615880",
    "end": "1618960"
  },
  {
    "text": "other than core that use uh search and",
    "start": "1618960",
    "end": "1621799"
  },
  {
    "text": "use elastic search they are free to use",
    "start": "1621799",
    "end": "1624720"
  },
  {
    "text": "other sources and they can take like",
    "start": "1624720",
    "end": "1628520"
  },
  {
    "text": "they are",
    "start": "1628520",
    "end": "1631240"
  },
  {
    "text": "um they are a bit more low profile so",
    "start": "1631240",
    "end": "1634559"
  },
  {
    "text": "they are free to write in any way that",
    "start": "1634559",
    "end": "1637000"
  },
  {
    "text": "they want to their elastic search",
    "start": "1637000",
    "end": "1638600"
  },
  {
    "text": "cluster they are isolated so uh not",
    "start": "1638600",
    "end": "1641520"
  },
  {
    "text": "everybody at Shopify uses CFA to write",
    "start": "1641520",
    "end": "1644440"
  },
  {
    "text": "to elastic it depends uh how F tolerant",
    "start": "1644440",
    "end": "1647679"
  },
  {
    "text": "they're they need their system to be uh",
    "start": "1647679",
    "end": "1650360"
  },
  {
    "text": "because cfco helps like if if things go",
    "start": "1650360",
    "end": "1652399"
  },
  {
    "text": "down you still have the let's say your",
    "start": "1652399",
    "end": "1655159"
  },
  {
    "text": "elastic search goes down you have",
    "start": "1655159",
    "end": "1657640"
  },
  {
    "text": "according to the retention for your CFA",
    "start": "1657640",
    "end": "1660480"
  },
  {
    "text": "you will have around like 24 hours uh of",
    "start": "1660480",
    "end": "1663960"
  },
  {
    "text": "data still like uh in the uh CFA and",
    "start": "1663960",
    "end": "1669039"
  },
  {
    "text": "like it it really depends on the use",
    "start": "1669039",
    "end": "1671159"
  },
  {
    "text": "case of the elastic search okay thank",
    "start": "1671159",
    "end": "1673399"
  },
  {
    "text": "you I also had a question about the",
    "start": "1673399",
    "end": "1674480"
  },
  {
    "text": "retention but got that thank you yeah",
    "start": "1674480",
    "end": "1676200"
  },
  {
    "text": "thank you yeah hi uh thank you for the",
    "start": "1676200",
    "end": "1678960"
  },
  {
    "text": "presentation uh just one clarification",
    "start": "1678960",
    "end": "1681480"
  },
  {
    "text": "when you showed the the overview of the",
    "start": "1681480",
    "end": "1684519"
  },
  {
    "text": "Clusters in Europe and the US Etc you",
    "start": "1684519",
    "end": "1687399"
  },
  {
    "text": "gave a lot of statistics and one of them",
    "start": "1687399",
    "end": "1689840"
  },
  {
    "text": "was I think 400 million uh documents per",
    "start": "1689840",
    "end": "1694159"
  },
  {
    "text": "shart what could you repeat that one cuz",
    "start": "1694159",
    "end": "1696159"
  },
  {
    "text": "I couldn't get",
    "start": "1696159",
    "end": "1697760"
  },
  {
    "text": "it uh so taking a look at here like take",
    "start": "1697760",
    "end": "1702519"
  },
  {
    "text": "a look at the one at the top left that",
    "start": "1702519",
    "end": "1705960"
  },
  {
    "text": "one that that's one instance of",
    "start": "1705960",
    "end": "1708640"
  },
  {
    "text": "uh elastic search that's for Shopify",
    "start": "1708640",
    "end": "1710840"
  },
  {
    "text": "core in that entire elastic search",
    "start": "1710840",
    "end": "1713519"
  },
  {
    "text": "cluster we are storing",
    "start": "1713519",
    "end": "1716399"
  },
  {
    "text": "400 uh billion documents B billion yes",
    "start": "1716399",
    "end": "1720279"
  },
  {
    "text": "and in terms of storage it takes around",
    "start": "1720279",
    "end": "1722960"
  },
  {
    "text": "400 terabytes it's only for that large",
    "start": "1722960",
    "end": "1726720"
  },
  {
    "text": "one uh the top left corner great thank",
    "start": "1726720",
    "end": "1730360"
  },
  {
    "text": "you",
    "start": "1730360",
    "end": "1731960"
  },
  {
    "text": "y uh yeah thank you all so much yeah",
    "start": "1731960",
    "end": "1735799"
  },
  {
    "text": "have a good",
    "start": "1735799",
    "end": "1736799"
  },
  {
    "text": "day",
    "start": "1736799",
    "end": "1739799"
  }
]