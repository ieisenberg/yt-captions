[
  {
    "start": "0",
    "end": "72000"
  },
  {
    "text": "yeah hello everyone uh first of all congrats on making it to the end of the day uh so being the very last",
    "start": "299",
    "end": "6720"
  },
  {
    "text": "presentation I don't know if that's a good thing or a bad thing but here we are um so we are going to talk about preview environments with Argo CD and Brandon as",
    "start": "6720",
    "end": "13920"
  },
  {
    "text": "introduced um I'm at code fresh as a principal technologist I also hand a lot of go to market stuff but the most",
    "start": "13920",
    "end": "19440"
  },
  {
    "text": "important thing is I get to spend a lot of time playing around with Argo so that's very fun I'm going to start with what seems like",
    "start": "19440",
    "end": "25859"
  },
  {
    "text": "a very obvious question that I think everyone in this room is going to go oh I know what a preview environment is so why are we discussing this but what I",
    "start": "25859",
    "end": "33120"
  },
  {
    "text": "want to talk about is that preview environments mean different things to different people and a preview",
    "start": "33120",
    "end": "38940"
  },
  {
    "text": "environment for you might be a namespace it might be a cluster it might be a set of clusters it could even be a region or",
    "start": "38940",
    "end": "46079"
  },
  {
    "text": "in the case of like Mike's great talk earlier it could be V clusters as well so preview environments really differ",
    "start": "46079",
    "end": "51420"
  },
  {
    "text": "from person to person and what I want to talk about today is how Argo is trying to bridge that Gap with their generators",
    "start": "51420",
    "end": "57180"
  },
  {
    "text": "they're making it possible to fit as many use cases as you can so here in this image obviously the simplest uh",
    "start": "57180",
    "end": "62760"
  },
  {
    "text": "diagram I could have is you have some developer action that is resulting in some kubernetes resource in some way",
    "start": "62760",
    "end": "68159"
  },
  {
    "text": "whether it's a cluster or namespace that's what we're going to talk about today and how we're going to do that so why should you care I mean that's",
    "start": "68159",
    "end": "75000"
  },
  {
    "start": "72000",
    "end": "216000"
  },
  {
    "text": "always the question but but why should I really care about this um what is it solving for me and that's where I really think it's",
    "start": "75000",
    "end": "81479"
  },
  {
    "text": "important to talk about testing because as we move more towards modernized applications as we move towards",
    "start": "81479",
    "end": "86880"
  },
  {
    "text": "kubernetes and really getting at scale testing is just getting more and more complex we can't really get away from it",
    "start": "86880",
    "end": "93299"
  },
  {
    "text": "and there's this concept of oh we're going to shift left we're going to move security testing and a lot of things further left developers are going to",
    "start": "93299",
    "end": "99240"
  },
  {
    "text": "take on more responsibilities I think it's a great idea it's harder to implement and practice but what we want",
    "start": "99240",
    "end": "106079"
  },
  {
    "text": "to do is with preview environments is help shift a little bit of that onto the developer without making it feel like a",
    "start": "106079",
    "end": "111299"
  },
  {
    "text": "giant burden on them so that's a goal here and we want to avoid that rework that happens in static environments like",
    "start": "111299",
    "end": "117000"
  },
  {
    "text": "I don't think anyone wants to get up into their staging their uat and definitely not their production and have a feature that's not acting as expected",
    "start": "117000",
    "end": "123659"
  },
  {
    "text": "so the goal is to make sure that we test this earlier in the process to truly understand the state of it and and really then we can proceed forward with",
    "start": "123659",
    "end": "130679"
  },
  {
    "text": "just better development practices we want to avoid really ugly merges as well because I'm sure many of you have been",
    "start": "130679",
    "end": "136680"
  },
  {
    "text": "here involved either from the devops or the developer side that uh you have multiple features that are actually",
    "start": "136680",
    "end": "142200"
  },
  {
    "text": "clashing together and you're hitting some really nasty merge conditions and it may not even come out until you're",
    "start": "142200",
    "end": "147420"
  },
  {
    "text": "actually testing so this gives us an opportunity to be a little bit more Dynamic about how we create our test",
    "start": "147420",
    "end": "153300"
  },
  {
    "text": "environments and we can merge feature sets together into a preview branch that gets built out into a preview",
    "start": "153300",
    "end": "158940"
  },
  {
    "text": "environment so if you have two high profile features that you know are potentially going to conflict with each other let's create a controlled",
    "start": "158940",
    "end": "165000"
  },
  {
    "text": "environment where we can test that and maybe you have a QA resource that can also help you validate that out so that can be a very good approach to this one",
    "start": "165000",
    "end": "171720"
  },
  {
    "text": "other thing is and I was kind of talking about this earlier but you really need to comprehensively understand that",
    "start": "171720",
    "end": "176940"
  },
  {
    "text": "behavior that you actually have within your applications and within your features that you're testing the reality",
    "start": "176940",
    "end": "182519"
  },
  {
    "text": "of the situation is a lot of times your Dev environment or your integration environment or everyone whatever you want to call it it becomes kind of a",
    "start": "182519",
    "end": "188760"
  },
  {
    "text": "Dumping Ground and what developers do because they're focused on delivering their story points is they deliver their code and they go hands off and it turns",
    "start": "188760",
    "end": "195840"
  },
  {
    "text": "out something's broken in the integration environment and it basically becomes a case of whoever found it has",
    "start": "195840",
    "end": "201300"
  },
  {
    "text": "to figure it out that's not a fun scenario right and I think the developers are going to push you off because that's not their goal to worry",
    "start": "201300",
    "end": "207360"
  },
  {
    "text": "about that right their goal is to work on the next thing of code that they have to deliver so this again gives you another platform to understand that",
    "start": "207360",
    "end": "213840"
  },
  {
    "text": "feature Behavior a little bit better before we move on so let's talk about some use cases so",
    "start": "213840",
    "end": "219840"
  },
  {
    "start": "216000",
    "end": "338000"
  },
  {
    "text": "I'll start with the good and some of these are going to be obvious as we move into some of the other sections maybe a",
    "start": "219840",
    "end": "225360"
  },
  {
    "text": "little less obvious but the first one being microservices I think most people on kubernetes are doing some sort of",
    "start": "225360",
    "end": "231000"
  },
  {
    "text": "microservices or mini services or whatever you want to call them depending on what you kind of had to go with at your organization they're just a",
    "start": "231000",
    "end": "237180"
  },
  {
    "text": "naturally good fit for this right they're kind of bite size you can easily test them in a preview environment ideally if you really followed",
    "start": "237180",
    "end": "243900"
  },
  {
    "text": "microservices you know best practices you don't have a lot of other dependencies that are going to cause problems so that can be very helpful if",
    "start": "243900",
    "end": "251159"
  },
  {
    "text": "you have projects with heavy concurrent Feature work so in other words you know you have like a big project release",
    "start": "251159",
    "end": "257100"
  },
  {
    "text": "coming up you have 20 50 100 developers all working on features at the exact same time and I think we all know that",
    "start": "257100",
    "end": "264120"
  },
  {
    "text": "when you get towards the end of a Sprint they're coming in hot a lot of times right you might have you know 80 75 80",
    "start": "264120",
    "end": "270419"
  },
  {
    "text": "percent of the features getting delivered right at the end of the Sprint so if you have projects like this it can",
    "start": "270419",
    "end": "275820"
  },
  {
    "text": "become kind of the Wild West in those integration environments where we're merging everything into the main branch to really queue up this release to kind",
    "start": "275820",
    "end": "282060"
  },
  {
    "text": "of push it through so if you have that situation these preview environments can help you peel off a few of those key",
    "start": "282060",
    "end": "287639"
  },
  {
    "text": "ones again identify test figure out what you need to resolve before you kind of merge it in with the main feature set",
    "start": "287639",
    "end": "294120"
  },
  {
    "text": "static environments are another interesting one so uh you know we work with a lot of folks that have static",
    "start": "294120",
    "end": "300060"
  },
  {
    "text": "environments that they're going to have to have code freezes in right because they might have external customers that are depending on it or even earn",
    "start": "300060",
    "end": "306720"
  },
  {
    "text": "internal customers that need to utilize an environment in a specific way and once code is delivered into this track",
    "start": "306720",
    "end": "312120"
  },
  {
    "text": "it's got to be frozen right so you end up with developers who are kind of like hung up to dry for a little while because they're waiting to see where",
    "start": "312120",
    "end": "317940"
  },
  {
    "text": "they can actually test their change at and they don't really have a good environment to do that in so this gives them a little bit of an opportunity to",
    "start": "317940",
    "end": "324300"
  },
  {
    "text": "spin up an environment that suits their needs to actually test it out and then just Argo and preview environments is a",
    "start": "324300",
    "end": "329820"
  },
  {
    "text": "great combination right I think we can all agree with that a lot of the recent development in Argo has made this so",
    "start": "329820",
    "end": "335340"
  },
  {
    "text": "much easier and we'll talk about that but it's really just improving things so I'm going to talk about the bad but",
    "start": "335340",
    "end": "340620"
  },
  {
    "start": "338000",
    "end": "457000"
  },
  {
    "text": "these aren't really bad but I wanted to say the good bad and ugly so this is what we have but these are potentially",
    "start": "340620",
    "end": "346440"
  },
  {
    "text": "bad things right um so apis for example can seem like an obvious use case you're like well I can",
    "start": "346440",
    "end": "352620"
  },
  {
    "text": "really get out there and test this in a preview environment it's gonna be very easy depending on how much dependency you have on other services or other",
    "start": "352620",
    "end": "359280"
  },
  {
    "text": "services have on you as an API and also how you set up Ingress routes this can be a bit of a trap because API testing",
    "start": "359280",
    "end": "366539"
  },
  {
    "text": "can really lead to very unexpected results and you're likely going to have to build Out preview environments with",
    "start": "366539",
    "end": "371759"
  },
  {
    "text": "multiple services so you may find that to be a good thing you may not it can actually be a very good use case but you need to watch out for some of the",
    "start": "371759",
    "end": "377699"
  },
  {
    "text": "caveats there anything that has heavy database mutation or depends on messages",
    "start": "377699",
    "end": "383340"
  },
  {
    "text": "or basically in strong external infrastructure that you have to consume from and you're changing things can be",
    "start": "383340",
    "end": "389340"
  },
  {
    "text": "tricky it's not that it shouldn't be done it's that you just need to be cautiously aware of it because for",
    "start": "389340",
    "end": "394860"
  },
  {
    "text": "example if you're deploying let's say a new version of a customer messaging service and that customer messaging",
    "start": "394860",
    "end": "400860"
  },
  {
    "text": "services you know it's consuming off of Kafka or something like that and you're consuming the same messages that the",
    "start": "400860",
    "end": "407100"
  },
  {
    "text": "service that currently in integration is consuming you're going to start to wonder where these you know these missing messages are going and it can be",
    "start": "407100",
    "end": "413280"
  },
  {
    "text": "a really confusing thing if not everyone's in the loop on exactly what's going on so you need to be careful about where you're consuming from and then I",
    "start": "413280",
    "end": "419400"
  },
  {
    "text": "also have core services and what I mean by this is let's say I'm a business to business retailer and I have a pricing",
    "start": "419400",
    "end": "424919"
  },
  {
    "text": "engine right and that pricing engine affects effectively everything in the company um right it's it's you know on manifest",
    "start": "424919",
    "end": "431880"
  },
  {
    "text": "it's on the checkout process it's in all these different places you can't test these in preview environments but it can",
    "start": "431880",
    "end": "438240"
  },
  {
    "text": "be tricky to really understand the full implication of what you're changing in an engine like this across the entire",
    "start": "438240",
    "end": "444419"
  },
  {
    "text": "ecosystem of what your you know company really utilizes and organizes so that can be quite tricky so you can do it but",
    "start": "444419",
    "end": "452039"
  },
  {
    "text": "again you need to truly understand the scope of the services that you're trying to utilize and how you're actually going to play off of that",
    "start": "452039",
    "end": "458280"
  },
  {
    "start": "457000",
    "end": "620000"
  },
  {
    "text": "so here's the ugly uh I don't think there's going to be too many surprises here but you know monoliths they're not",
    "start": "458280",
    "end": "464759"
  },
  {
    "text": "really a great use case it's not that you can't use a monolith to do this because you definitely can I've worked",
    "start": "464759",
    "end": "470699"
  },
  {
    "text": "with many people that put monoliths into preview environments um but there are a lot of potential bad",
    "start": "470699",
    "end": "476280"
  },
  {
    "text": "repercussions here there's resources usage issues there's just the impact on other external infrastructure supporting",
    "start": "476280",
    "end": "483479"
  },
  {
    "text": "services that you really need to be aware of so monoliths again it's not that you can't do it but it's probably",
    "start": "483479",
    "end": "489419"
  },
  {
    "text": "not the ideal use case here I think what you'll see is a lot of times as companies are going through like",
    "start": "489419",
    "end": "494759"
  },
  {
    "text": "modernizations they're taking monoliths up they're going to split them up into smaller more bite-sized Services probably not microservices but somewhere",
    "start": "494759",
    "end": "501539"
  },
  {
    "text": "in between and then they can really start to see the benefits of things like preview environments uh if you have microservices with hard coupling uh you",
    "start": "501539",
    "end": "508620"
  },
  {
    "text": "probably didn't really do microservices right but it happens all the time right so you're going to have some hard coupling between microservices that can",
    "start": "508620",
    "end": "515159"
  },
  {
    "text": "make it very tricky if your preview environment to test one service requires you to bring in 20 other microservices",
    "start": "515159",
    "end": "521459"
  },
  {
    "text": "you have kind of a problem uh it's probably an architectural problem but it's also a problem for preview",
    "start": "521459",
    "end": "527040"
  },
  {
    "text": "environments uh that's just a tricky thing to actually deal with and then load testing is an interesting one",
    "start": "527040",
    "end": "532680"
  },
  {
    "text": "because I've seen preview environments used for load testing and it can give you some cursory information for sure",
    "start": "532680",
    "end": "538740"
  },
  {
    "text": "but the reality is it's never going to be very accurate compared to your production resources you know your",
    "start": "538740",
    "end": "544440"
  },
  {
    "text": "actual environments that you want to have sort of a true metric from on how is this going to perform compared to",
    "start": "544440",
    "end": "550260"
  },
  {
    "text": "what I expect it to look like in production it's very difficult to generate exact load unless you have the",
    "start": "550260",
    "end": "555600"
  },
  {
    "text": "exact resource specifications as your production environment and the exact load there so you can do it pretty",
    "start": "555600",
    "end": "561959"
  },
  {
    "text": "tricky and the last one here is more of a philosophical one but it's just an inflexible culture there are a lot of",
    "start": "561959",
    "end": "568680"
  },
  {
    "text": "organizations out there who they have their static environments they have a they have a Dev they have Assist you they have uat they have a production and",
    "start": "568680",
    "end": "575459"
  },
  {
    "text": "that's all they want to stick to they don't want to have to manage any resources outside of that it's not a problem that you can't change but it's",
    "start": "575459",
    "end": "582060"
  },
  {
    "text": "definitely a problem that can make it very difficult to get developers and your devops folks and kind of everyone",
    "start": "582060",
    "end": "588120"
  },
  {
    "text": "else within the I2 organization into a situation where they're ready to kind of have preview environments and understand",
    "start": "588120",
    "end": "593820"
  },
  {
    "text": "the impact that has on developers and how they deliver code so that one that's up to you guys to figure out it's your",
    "start": "593820",
    "end": "600180"
  },
  {
    "text": "company's you know you can you can tell me if it's going to work there in my experience usually companies that are",
    "start": "600180",
    "end": "606480"
  },
  {
    "text": "you know moving towards things like Argo and kubernetes they already have a more open mindset to things like this but if",
    "start": "606480",
    "end": "612240"
  },
  {
    "text": "it's a company that's kind of like hey we want to use kubernetes and Argo but they're an older Legacy software company it's a little bit more challenging to",
    "start": "612240",
    "end": "618660"
  },
  {
    "text": "kind of bring that culture along so let's talk about some best practices uh there's a lot here and I'm sure like",
    "start": "618660",
    "end": "625140"
  },
  {
    "start": "620000",
    "end": "873000"
  },
  {
    "text": "I have here you guys already do all of these things right so this is not surprising I'm sure you guys are experts at all this stuff",
    "start": "625140",
    "end": "631019"
  },
  {
    "text": "um we already talked about shift left but in general we do want to shift left uh now that doesn't necessarily mean we",
    "start": "631019",
    "end": "636540"
  },
  {
    "text": "just want to give developers more work to do we just want that to happen earlier in the process but we want to",
    "start": "636540",
    "end": "641820"
  },
  {
    "text": "assist them we want to do it in a way that it doesn't create additional burden on the development process on you know the delivering feature process",
    "start": "641820",
    "end": "649380"
  },
  {
    "text": "um and of course you know in in along with that you know we need to automate it right so that's kind of where our",
    "start": "649380",
    "end": "654420"
  },
  {
    "text": "Argo is coming into this picture here you want to stick to a consistent naming strategy this is not something that you",
    "start": "654420",
    "end": "659880"
  },
  {
    "text": "necessarily have to do but it's going to make things a lot easier like if you're using a pull request generator or if",
    "start": "659880",
    "end": "666240"
  },
  {
    "text": "you're using sem generator having that consistent naming strategy is going to make it much easier to set up the Argo",
    "start": "666240",
    "end": "671459"
  },
  {
    "text": "side to actually pick up on things and automatically create these environments so it's a good thing to have that",
    "start": "671459",
    "end": "676800"
  },
  {
    "text": "consistent naming strategy and then the third one is really what we're going to be focused on which is pull request preview environments this is one of the",
    "start": "676800",
    "end": "684240"
  },
  {
    "text": "the simplest ways to start I mean we obviously saw you can get much more complicated than this earlier on but if",
    "start": "684240",
    "end": "689459"
  },
  {
    "text": "you have a pull request create a preview environment you can drive it off that pull request information it makes it",
    "start": "689459",
    "end": "694560"
  },
  {
    "text": "very easy to understand the life cycle of it so not only when is it created but when does it get destroyed and how does",
    "start": "694560",
    "end": "701160"
  },
  {
    "text": "it get merged in you know how do we mix features together you can easily do that by merging two feature branches together and creating a preview environment out",
    "start": "701160",
    "end": "707399"
  },
  {
    "text": "of that in this case I'm using labels on GitHub so you can merge branches",
    "start": "707399",
    "end": "712920"
  },
  {
    "text": "together and then put a label on that and it's going to kick off the process so a lot of flexibility there",
    "start": "712920",
    "end": "718320"
  },
  {
    "text": "some other cool things that you can do and I would suggest you do and this I'm going to credit coastus with that I work",
    "start": "718320",
    "end": "724320"
  },
  {
    "text": "with which is the automated PR comments because this is very helpful if you are creating a preview environment you kick",
    "start": "724320",
    "end": "730320"
  },
  {
    "text": "off a preview environment after a pull request has been created it can be very helpful especially if it's a web-facing",
    "start": "730320",
    "end": "736800"
  },
  {
    "text": "application to go in and actually put the address or the destination of that environment on the pull request itself",
    "start": "736800",
    "end": "743040"
  },
  {
    "text": "because a lot of times your QA folks there you know especially if they're going to assist you with this or maybe even other developers that are going to",
    "start": "743040",
    "end": "748800"
  },
  {
    "text": "help you test this out they don't necessarily know where to go I mean they could go digging through crew cuddle right and they could look for your",
    "start": "748800",
    "end": "754320"
  },
  {
    "text": "service and look for the namespace and try to figure it out but if you have that link there it just simplifies the entire process so automated comments on",
    "start": "754320",
    "end": "761160"
  },
  {
    "text": "there very good thing to have the next one being smoke test is a little bit trickier I think we all know that you",
    "start": "761160",
    "end": "767880"
  },
  {
    "text": "know everyone would love to have you know comprehensive smoke tests and your end-to-end testing is going to take care of everything for you it would be great",
    "start": "767880",
    "end": "774360"
  },
  {
    "text": "if it is part of this process as well that may not always be possible but it's land best practice like when you spin up",
    "start": "774360",
    "end": "780600"
  },
  {
    "text": "a preview environment ideally if you have the resources you should run it through the same set of smoke tests and",
    "start": "780600",
    "end": "786480"
  },
  {
    "text": "automated testing that you have for your regular integration environment it's going to simplify things because it might catch stuff like you don't have a",
    "start": "786480",
    "end": "792839"
  },
  {
    "text": "verified or signed image right you have code smell issues or whatever it is right just run it through that same",
    "start": "792839",
    "end": "798300"
  },
  {
    "text": "process so that before you attempt to actually test it in a preview environment and merge it into main we've",
    "start": "798300",
    "end": "803339"
  },
  {
    "text": "already kind of resolved most of the issues that we might encounter there this one's the fun one self-destruct you",
    "start": "803339",
    "end": "809100"
  },
  {
    "text": "want it to basically just go away right like once you're done with the preview environment you don't want to have to hand hold and go in and babysit and have",
    "start": "809100",
    "end": "815399"
  },
  {
    "text": "an end of day process that cleans it all up you want this to automatically happen and this is where git Ops is really",
    "start": "815399",
    "end": "821459"
  },
  {
    "text": "helping us with this right you know it's declarative configuration we're assigning a state it comes in cleans up",
    "start": "821459",
    "end": "826560"
  },
  {
    "text": "the process so we want the environment to clean itself up the advanced ones we already talked about culture but Ingress",
    "start": "826560",
    "end": "832740"
  },
  {
    "text": "here so Ingress is an interesting one it could be anything from just routing a little bit of traffic into a preview",
    "start": "832740",
    "end": "837779"
  },
  {
    "text": "environment you know you could do across name spaces if you really had to although I wouldn't recommend it",
    "start": "837779",
    "end": "842820"
  },
  {
    "text": "um it could be something like a service mesh and actually splitting traffic but it can be a very good best practice",
    "start": "842820",
    "end": "848399"
  },
  {
    "text": "particularly if you want to test specific use cases so we're not demonstrating an Ingress here today but",
    "start": "848399",
    "end": "853500"
  },
  {
    "text": "it can be something that is really very helpful depending on what you're trying to test and here is an image of really",
    "start": "853500",
    "end": "859380"
  },
  {
    "text": "just like the simplest scenario which is I have feature a there's a pull request created out of it it's deployed to a",
    "start": "859380",
    "end": "864720"
  },
  {
    "text": "dynamic environment Dynamic environment a again that could be any sort of resource that you want it could be a",
    "start": "864720",
    "end": "869820"
  },
  {
    "text": "namespace a cluster you know whatever really fits your use case all right so where does this fit in with",
    "start": "869820",
    "end": "876720"
  },
  {
    "start": "873000",
    "end": "933000"
  },
  {
    "text": "Git Ops and here I'm going to give a little plug to the open git Ops group uh because this is really perfectly in line",
    "start": "876720",
    "end": "883500"
  },
  {
    "text": "with preview environments so you're looking for something that is declarative and versioned and immutable pulled automatically continuously",
    "start": "883500",
    "end": "889500"
  },
  {
    "text": "reconciled preview environments within kubernetes and Argo perfectly fit into all of those right so we have resources",
    "start": "889500",
    "end": "896100"
  },
  {
    "text": "that are defining out the infras defining out the environment that we want to spin up it's also uh stored in",
    "start": "896100",
    "end": "902459"
  },
  {
    "text": "git right so the entire life cycle of this is stored in git whether it's gitlab or GitHub or whatever it is so we can kind of Trace between those as far",
    "start": "902459",
    "end": "909060"
  },
  {
    "text": "as when I spin up a preview environment I know that it's either a combination of these branches it's this Branch here",
    "start": "909060",
    "end": "915180"
  },
  {
    "text": "were some additional commits after we created the preview environment it's automatically created and then it lives with that life cycle of that pull",
    "start": "915180",
    "end": "921240"
  },
  {
    "text": "request as well so if we get rid of the pull request and close it we clean up our environment automatically and then",
    "start": "921240",
    "end": "927120"
  },
  {
    "text": "of course it's just benefiting from the fact that we have tools that are continuously checking for state",
    "start": "927120",
    "end": "933740"
  },
  {
    "start": "933000",
    "end": "1062000"
  },
  {
    "text": "so here's another one that I want to talk about now Mike touched on this a little bit earlier but Argo sync phases and waves can be immensely helpful here",
    "start": "934440",
    "end": "942480"
  },
  {
    "text": "um so when you're spinning up a process like this ideally you have a very simple",
    "start": "942480",
    "end": "947760"
  },
  {
    "text": "scenario when you're kicking off a preview environment the reality is there's often supporting things that need to be put in place you know whether",
    "start": "947760",
    "end": "954480"
  },
  {
    "text": "that is infrastructure it's additional Services it's you know whatever you really need to put in place so I would",
    "start": "954480",
    "end": "960720"
  },
  {
    "text": "highly recommend that you learn the sync phases and waves if you don't know them and really understand how to use the",
    "start": "960720",
    "end": "966240"
  },
  {
    "text": "hooks to your advantage so this diagram is technically not 100 correct but it's kind of how I think about it which is",
    "start": "966240",
    "end": "972180"
  },
  {
    "text": "git is holding our state argo's attempting to sync our state kubernetes is our end resource in this case and we",
    "start": "972180",
    "end": "977940"
  },
  {
    "text": "have Precinct sync and post-sync events here are some examples that you might utilize them for right so in our",
    "start": "977940",
    "end": "983339"
  },
  {
    "text": "Precinct we might need to validate our image signature first in some cases you might need to actually verify compute",
    "start": "983339",
    "end": "989279"
  },
  {
    "text": "and service availability now I know you guys who are all working on cloud are thinking that's that's silly like I mean the cloud is just",
    "start": "989279",
    "end": "995220"
  },
  {
    "text": "going to spin up uh but the reality is a lot of folks are actually working with on-prem infrastructure as well where",
    "start": "995220",
    "end": "1001339"
  },
  {
    "text": "they have requirements for compute and you could potentially run out of space or you might need to actually create a",
    "start": "1001339",
    "end": "1006560"
  },
  {
    "text": "new allocation for request for space um so having this as a Precinct to say hey I'm going to need this cluster these",
    "start": "1006560",
    "end": "1013759"
  },
  {
    "text": "pods this much resources so that I can actually spin this up can be crucially important for sync um again you can spin",
    "start": "1013759",
    "end": "1020420"
  },
  {
    "text": "up additional necessary infrastructure so if you have a database requirement you could create let's say a dynamic Cassandra instance populate it get it",
    "start": "1020420",
    "end": "1027860"
  },
  {
    "text": "ready for this you can check if you have service to service dependency that you need to follow up on and then postsync",
    "start": "1027860",
    "end": "1033740"
  },
  {
    "text": "this goes into what we're talking about earlier if you want to put a slack or teams message out there with an environment link that can be very helpful end-end testing workflow again",
    "start": "1033740",
    "end": "1040760"
  },
  {
    "text": "this is kind of like the dream but if you had your end-to-end testing actually working in a preview environment that'd",
    "start": "1040760",
    "end": "1045980"
  },
  {
    "text": "be fantastic and not shown here is actually if you're in a sync fail scenario but that's also a valid use",
    "start": "1045980",
    "end": "1052160"
  },
  {
    "text": "case if for whatever reason the sync fails what do you want to run in the case of a preview environment a lot of times there's going to be cleanup tasks",
    "start": "1052160",
    "end": "1058400"
  },
  {
    "text": "for any of the stuff that you previously set up in either pre-sync sync or postsync",
    "start": "1058400",
    "end": "1063500"
  },
  {
    "start": "1062000",
    "end": "1148000"
  },
  {
    "text": "all right so let's talk about the meat and potatoes of this which is Argo application sets",
    "start": "1063500",
    "end": "1069140"
  },
  {
    "text": "um so this is incredibly powerful so it's really meant to be a very flexible approach to managing deployments across",
    "start": "1069140",
    "end": "1074660"
  },
  {
    "text": "multiple repos applications clusters and more right it's kind of the catch-all scenario it's like okay I need to go you",
    "start": "1074660",
    "end": "1081620"
  },
  {
    "text": "know this deep and this far how do I do it with Argo Argo gives you that flexibility to do that through its",
    "start": "1081620",
    "end": "1087260"
  },
  {
    "text": "generators the generators offer different levels of complexity depending on what you actually need you can do",
    "start": "1087260",
    "end": "1093020"
  },
  {
    "text": "something as simple as a list generator where you just have a list of texts that it's going to iterate through and create environments that match that it could be",
    "start": "1093020",
    "end": "1099919"
  },
  {
    "text": "based on merges pull requests The Matrix which I think of a matrix like a slot",
    "start": "1099919",
    "end": "1105200"
  },
  {
    "text": "machine where you pick how many lines you want to actually you know have and the Matrix is I want to do you know three across and one down or whatever",
    "start": "1105200",
    "end": "1111919"
  },
  {
    "text": "um The Matrix is kind of a many to many to many relationship manager uh can get very complicated but can be helpful if",
    "start": "1111919",
    "end": "1117500"
  },
  {
    "text": "you want to mix and match say the uh cluster and the pull request and a list generator because for whatever reason",
    "start": "1117500",
    "end": "1123860"
  },
  {
    "text": "you have the need to actually have all of that in there um in our case we're using that pull request generator that I was talking",
    "start": "1123860",
    "end": "1130039"
  },
  {
    "text": "about earlier which allows us to dynamically have an Argo application set monitoring for pull requests in our case",
    "start": "1130039",
    "end": "1137059"
  },
  {
    "text": "it's looking at a label it could be based on a branch name filter as well but right now it's just going to be",
    "start": "1137059",
    "end": "1142760"
  },
  {
    "text": "looking for a pull request label that says preview or whatever you want to use and it's going to kick off that process",
    "start": "1142760",
    "end": "1148760"
  },
  {
    "start": "1148000",
    "end": "1183000"
  },
  {
    "text": "all right so let's talk about what we're going to try to demonstrate here and again I'm just going to I said this",
    "start": "1148760",
    "end": "1154160"
  },
  {
    "text": "earlier but to someone else last time I tried a demo for the cncf Amazon went down globally so we're going to give it",
    "start": "1154160",
    "end": "1160940"
  },
  {
    "text": "a run and see how it goes this time um but we're going to start here by just",
    "start": "1160940",
    "end": "1166100"
  },
  {
    "text": "uh kind of walking through from a simple perspective so I have my main branch uh you know with this commit ID this",
    "start": "1166100",
    "end": "1171860"
  },
  {
    "text": "version of the application there's some CI process whatever you want to use I'm using Code fresh but it could be",
    "start": "1171860",
    "end": "1177320"
  },
  {
    "text": "whatever you prefer it's going to generate an image apply the tag we're going to kick it off to our environment in this case it's in staging",
    "start": "1177320",
    "end": "1184220"
  },
  {
    "start": "1183000",
    "end": "1256000"
  },
  {
    "text": "what we're going to do though is we're going to create a PR Branch here you know in this case it's called feature update Index this commit Argo is",
    "start": "1184220",
    "end": "1191299"
  },
  {
    "text": "actively monitoring that repository so it knows that we have a pull request based on the label that we put on there",
    "start": "1191299",
    "end": "1197179"
  },
  {
    "text": "or again it could be a filter based on naming that you actually picked it then updates the application and creates a",
    "start": "1197179",
    "end": "1204500"
  },
  {
    "text": "new namespace creates the application inside of your cluster whatever that destination cluster it is and this could",
    "start": "1204500",
    "end": "1209900"
  },
  {
    "text": "be n number of clusters right it could be 1 or 10 really depends on what you want and we're going to have this",
    "start": "1209900",
    "end": "1215419"
  },
  {
    "text": "preview environment that out there for us ready to go so once that's out there it's gone through all of our testing we validated",
    "start": "1215419",
    "end": "1221720"
  },
  {
    "text": "it you know we did our own smoke tests went out uh did some Epi testing against it we know it's in good shape we're then",
    "start": "1221720",
    "end": "1227600"
  },
  {
    "text": "going to merge Our Brands or delete our branch in this case we're doing a merge so I'm merging my PR Branch from feature",
    "start": "1227600",
    "end": "1234740"
  },
  {
    "text": "update index into the main what that's going to do is it is going to kick off a new build process it's going to give us a new image ID this is intentional",
    "start": "1234740",
    "end": "1241580"
  },
  {
    "text": "because again we're merging into an integration where all the features going in together and then that's going to",
    "start": "1241580",
    "end": "1247100"
  },
  {
    "text": "update our staging or our static environment up to the new version that we were just testing and playing around with",
    "start": "1247100",
    "end": "1253039"
  },
  {
    "text": "all right so let's try it so the first thing let's take a look",
    "start": "1253039",
    "end": "1259760"
  },
  {
    "start": "1256000",
    "end": "1320000"
  },
  {
    "text": "here all right let's just take a look at the repository real quick there's a few things I want to point out the first",
    "start": "1259760",
    "end": "1265640"
  },
  {
    "text": "being that if we want to create them from the CLI here's the commands to create the base app and the app set",
    "start": "1265640",
    "end": "1271460"
  },
  {
    "text": "itself just simplifies that a little bit let's talk about what we have in our home here this is really simple and",
    "start": "1271460",
    "end": "1279080"
  },
  {
    "text": "straightforward in a real scenario you're probably going to have customized with overlays that's going to Overlay certain values for your each of your",
    "start": "1279080",
    "end": "1285919"
  },
  {
    "text": "environments but in this case we just have a Helm chart and there's a couple of values that are critical in here really it's this namespace one and our",
    "start": "1285919",
    "end": "1293900"
  },
  {
    "text": "tag so our namespace is going to be dynamically created based on the name of the feature Branch the tag itself will",
    "start": "1293900",
    "end": "1301220"
  },
  {
    "text": "change depending on you know what's happening whether we're merging up to main or if we're just building out a preview environment",
    "start": "1301220",
    "end": "1307640"
  },
  {
    "text": "and if we go back here we can take a look at the world's simplest uh go web",
    "start": "1307640",
    "end": "1313580"
  },
  {
    "text": "server which is kind of intentional so we just have a web server here it's just saying hey hello get Ops con I'm on",
    "start": "1313580",
    "end": "1318679"
  },
  {
    "text": "release version one and let's go ahead and let's take a look",
    "start": "1318679",
    "end": "1323720"
  },
  {
    "text": "at our namespaces right now so we don't really have anything out there at the moment let's take a look at our pods that's not",
    "start": "1323720",
    "end": "1330020"
  },
  {
    "text": "in Cube system and we see again we don't really have anything there so let's go ahead and create our base",
    "start": "1330020",
    "end": "1336500"
  },
  {
    "text": "application using the CLI all right so far so good",
    "start": "1336500",
    "end": "1341780"
  },
  {
    "text": "so we'll see that this is already spinning up we're creating our base application now",
    "start": "1341780",
    "end": "1347120"
  },
  {
    "text": "um and for this this is looking at the main branch at this point um",
    "start": "1347120",
    "end": "1352460"
  },
  {
    "text": "and we haven't actually created our app site yet uh the thing that's going to take some time here is we're actually getting a load balanced URL so we can",
    "start": "1352460",
    "end": "1358760"
  },
  {
    "text": "click through to it uh very straightforward stuff here but if we go take a look at our namespaces we have",
    "start": "1358760",
    "end": "1365600"
  },
  {
    "text": "our staging namespace now and let's take a look at our pods we see",
    "start": "1365600",
    "end": "1370640"
  },
  {
    "text": "that we have a simple deployment now running in our staging namespace and let's go to the cheater window here",
    "start": "1370640",
    "end": "1378620"
  },
  {
    "text": "and click through so this will probably take just a second to actually pop up",
    "start": "1378620",
    "end": "1384759"
  },
  {
    "text": "and while we're doing this let's go back here",
    "start": "1384919",
    "end": "1390080"
  },
  {
    "text": "and let's take a look at our app set that we're going to create because I think this could be very",
    "start": "1390080",
    "end": "1395659"
  },
  {
    "text": "interesting so inside of our app set there's a couple of things that I I really want to",
    "start": "1395659",
    "end": "1401539"
  },
  {
    "start": "1396000",
    "end": "1542000"
  },
  {
    "text": "make sure that I highlight here because it's crucially important for us the first thing being that your name here",
    "start": "1401539",
    "end": "1408140"
  },
  {
    "text": "and your naming schema for your namespace is very important because that's what either if you have a manual",
    "start": "1408140",
    "end": "1415220"
  },
  {
    "text": "cleanup process that's going to have to run with this or you have something depending on where this namespace is",
    "start": "1415220",
    "end": "1420440"
  },
  {
    "text": "going to be deployed you want to make sure your namespace is consistent and that your developers kind of stick to a consistent naming practice here the",
    "start": "1420440",
    "end": "1427100"
  },
  {
    "text": "other thing being we are passing through the image tag and again this is so that we can promote between environments and also have a preview environment",
    "start": "1427100",
    "end": "1433640"
  },
  {
    "text": "and so we will go ahead and create this as well and we do have create namespace equal true run this technically isn't",
    "start": "1433640",
    "end": "1439700"
  },
  {
    "text": "really necessary for us because we actually have a namespace resource in our home template and the reason that we",
    "start": "1439700",
    "end": "1445100"
  },
  {
    "text": "have that is so that it dynamically gets cleaned up when we merge the pull request but if we go take a look at our",
    "start": "1445100",
    "end": "1450740"
  },
  {
    "text": "application we can see that it did deploy out we have a incredibly tiny hello get Ops con V 1.0",
    "start": "1450740",
    "end": "1458000"
  },
  {
    "text": "so let's go ahead and go back and this time we will actually use the UI to",
    "start": "1458000",
    "end": "1463220"
  },
  {
    "text": "create our app set so we'll just call this apps",
    "start": "1463220",
    "end": "1469900"
  },
  {
    "text": "apps default we'll do automatic sync I do like prune and self heal",
    "start": "1469940",
    "end": "1475159"
  },
  {
    "text": "use our Repository and this is actually in the app",
    "start": "1475159",
    "end": "1480559"
  },
  {
    "text": "setbucket we'll do in cluster and then for this case because this is Argo managing Argo",
    "start": "1480559",
    "end": "1487580"
  },
  {
    "text": "applications we actually want to put this in the Argo CD namespace for this particular example",
    "start": "1487580",
    "end": "1492919"
  },
  {
    "text": "go ahead and create this and we'll see that our episode has been created but of course nothing's",
    "start": "1492919",
    "end": "1498140"
  },
  {
    "text": "happening yet because we don't actually have a branch that is going to kick this process off so let's go ahead and go into GitHub and",
    "start": "1498140",
    "end": "1506000"
  },
  {
    "text": "we will create a very simple bump here",
    "start": "1506000",
    "end": "1512679"
  },
  {
    "text": "if I can type",
    "start": "1517400",
    "end": "1520360"
  },
  {
    "text": "and we'll just change a version obviously it's not a real version but it works for this all right",
    "start": "1524840",
    "end": "1531440"
  },
  {
    "text": "date web server will create a new Branch out",
    "start": "1531440",
    "end": "1536600"
  },
  {
    "text": "of this we'll update the index",
    "start": "1536600",
    "end": "1542900"
  },
  {
    "start": "1542000",
    "end": "1635000"
  },
  {
    "text": "and then this is a very important part here we have to actually select our preview label because this is what's going to kick off our process because",
    "start": "1542900",
    "end": "1548960"
  },
  {
    "text": "again in that app set we're actually monitoring for that let's create this now because it's an actual code change",
    "start": "1548960",
    "end": "1554960"
  },
  {
    "text": "this is actually going to depend on a CI process so we do actually have the build",
    "start": "1554960",
    "end": "1560539"
  },
  {
    "text": "happening here and there's nothing really too crazy going on here all it's going to do is actually clone it down",
    "start": "1560539",
    "end": "1567020"
  },
  {
    "text": "build a Docker image push it out so that it's available for our preview environment here so that'll take a",
    "start": "1567020",
    "end": "1572120"
  },
  {
    "text": "second to happen once that kicks off then we'll start to see this go green in the meantime",
    "start": "1572120",
    "end": "1578480"
  },
  {
    "text": "Argo itself is actually going to attempt to sync it now I what I need to do",
    "start": "1578480",
    "end": "1583580"
  },
  {
    "text": "eventually is put in a little bit of a pause here or actually have it be web hook based so we know when it's actually ready to kick off that process because",
    "start": "1583580",
    "end": "1589520"
  },
  {
    "text": "this will go into a holding pattern until our Docker image is actually built and pushed out there which is happening",
    "start": "1589520",
    "end": "1594919"
  },
  {
    "text": "right now all right so that has been pushed and if",
    "start": "1594919",
    "end": "1600140"
  },
  {
    "text": "we go back to GitHub here now we'll see this go green and that our checks are all good so in other words",
    "start": "1600140",
    "end": "1605960"
  },
  {
    "text": "our CI build actually happened let's go back in and look at our application",
    "start": "1605960",
    "end": "1611179"
  },
  {
    "text": "and we can see that we actually have a deployment out and it has our new tag",
    "start": "1611179",
    "end": "1617000"
  },
  {
    "text": "information so let's look at our namespace now so now we'll see that we actually have a",
    "start": "1617000",
    "end": "1622700"
  },
  {
    "text": "simple deployment feature update index 5 namespace so that is a mouthful but that is definitely the namespace that we want",
    "start": "1622700",
    "end": "1628640"
  },
  {
    "text": "and if we take a look at our pods here we'll also see that we have the Pod running as well",
    "start": "1628640",
    "end": "1635779"
  },
  {
    "start": "1635000",
    "end": "1699000"
  },
  {
    "text": "so let's go back to our cheater window here and let's get our load balancer URL",
    "start": "1635779",
    "end": "1641240"
  },
  {
    "text": "we can see for this namespace we can see that we are now on version",
    "start": "1641240",
    "end": "1646520"
  },
  {
    "text": "2.0 for this and our staging environment is still on 1.0 all right so everything",
    "start": "1646520",
    "end": "1652159"
  },
  {
    "text": "is actually going smoothly which is always nice so let's go ahead and merge this pull",
    "start": "1652159",
    "end": "1657799"
  },
  {
    "text": "request so what we want to happen like I showed in the slide earlier is we want it to basically clean itself up right",
    "start": "1657799",
    "end": "1662900"
  },
  {
    "text": "when we merge this pull request we'll have our preview environment will no longer be needed because it's been merged into main branch so let's go",
    "start": "1662900",
    "end": "1670340"
  },
  {
    "text": "ahead and confirm that we're merging this will actually kick off another CI",
    "start": "1670340",
    "end": "1675679"
  },
  {
    "text": "build process so if we go back here",
    "start": "1675679",
    "end": "1680980"
  },
  {
    "text": "and this time the CI build is just slightly more complicated we're cloning we're building the image we're actually going to update the Manifest image tag",
    "start": "1682520",
    "end": "1689000"
  },
  {
    "text": "and then we'll push that image and image tag out so very straightforward but it's",
    "start": "1689000",
    "end": "1694159"
  },
  {
    "text": "going to give us the end result that we actually need here and let's go take a look",
    "start": "1694159",
    "end": "1699380"
  },
  {
    "text": "we can see this is already saying no it's out of sync we actually no longer need this so this is going to work on",
    "start": "1699380",
    "end": "1705500"
  },
  {
    "text": "cleaning it up and you can see it did already clean up that application so right now I had it set on a rikue",
    "start": "1705500",
    "end": "1710960"
  },
  {
    "text": "timeout of 15 seconds so Argo pick that up pretty quickly and if we look at our apps that our apps that no longer has a",
    "start": "1710960",
    "end": "1717260"
  },
  {
    "text": "Dengue dangling application off of it because it's no longer necessary and if we take a look at our namespaces again",
    "start": "1717260",
    "end": "1722840"
  },
  {
    "text": "we no longer have our simple deployment feature update namespace take a look at our pods same story right so that's",
    "start": "1722840",
    "end": "1729020"
  },
  {
    "text": "actually been cleaned up so let's go look at our process where this is at this is actually already",
    "start": "1729020",
    "end": "1734360"
  },
  {
    "text": "updated it and pushed that out so now let's go back here and if we look",
    "start": "1734360",
    "end": "1740419"
  },
  {
    "text": "at our commit message we've updated the image tag to this new version which is a9f4475 not that that really matters",
    "start": "1740419",
    "end": "1746960"
  },
  {
    "text": "that much but it's meaning that hey our main branch did get this new tag that we just built and if we go into our Argo",
    "start": "1746960",
    "end": "1754039"
  },
  {
    "text": "applications here and I go into our base app we haven't actually seen an update yet here so I didn't change out the reconciliation timeout so it's still set",
    "start": "1754039",
    "end": "1761120"
  },
  {
    "text": "to three minutes so let's go ahead and just manually refresh this that's going to say oh we actually have a new",
    "start": "1761120",
    "end": "1767240"
  },
  {
    "text": "application that needs to be deployed out here it's going to go ahead and sync that up and now if we go back to",
    "start": "1767240",
    "end": "1775399"
  },
  {
    "text": "just go back here if we refresh this we'll see that we only have one external load balance URL it's in our staging",
    "start": "1775399",
    "end": "1780860"
  },
  {
    "text": "namespace let's click through to that and we can see that now we do have our preview environment at version 2.0 up",
    "start": "1780860",
    "end": "1786559"
  },
  {
    "text": "there uh so yeah I think that covers everything let me go through I think I",
    "start": "1786559",
    "end": "1791840"
  },
  {
    "text": "have one more slide here which is just to talk about some challenges some of these are going to be obvious some not so much if you have to automate a lot of",
    "start": "1791840",
    "end": "1799460"
  },
  {
    "text": "non-kubernetes infrastructure this could be painful you might still need to do it but it won't be fun if you have a ton of",
    "start": "1799460",
    "end": "1806059"
  },
  {
    "text": "service to service dependencies you really need to understand the entire landscape of what you want to test against and know what's reasonable to",
    "start": "1806059",
    "end": "1812539"
  },
  {
    "text": "actually pull into a preview environment we kind of already covered it but even outside of load testing if you have",
    "start": "1812539",
    "end": "1817880"
  },
  {
    "text": "performance dependent Services it can be very tricky to do preview environments for particularly if you're doing",
    "start": "1817880",
    "end": "1823220"
  },
  {
    "text": "something like automated learning or things like that it can be very difficult to actually get a good test run through this",
    "start": "1823220",
    "end": "1828880"
  },
  {
    "text": "comprehensive cleanup can be challenging especially if you are creating Dynamic databases and all sorts of other cool",
    "start": "1828880",
    "end": "1834080"
  },
  {
    "text": "stuff uh collaboration can introduce a people process so what I mean by that is",
    "start": "1834080",
    "end": "1839720"
  },
  {
    "text": "as a developer if I need to test multiple features together with someone else I have to go talk to that person",
    "start": "1839720",
    "end": "1845000"
  },
  {
    "text": "now whereas before it was I would just throw the code over the wall it ends up in some integration environment and someone deals with it now you're saying",
    "start": "1845000",
    "end": "1850760"
  },
  {
    "text": "no I want developers to be a bit more proactive about talking to other developers understanding how their features interact and test them together",
    "start": "1850760",
    "end": "1857120"
  },
  {
    "text": "that can be challenging but it needs to happen and then as is any kubernetes presentation and Argo Secrets is always",
    "start": "1857120",
    "end": "1864080"
  },
  {
    "text": "a challenge I don't think there's really ever an easy solution you're probably gonna have secrets that you need to deal with whether it's injecting through",
    "start": "1864080",
    "end": "1870440"
  },
  {
    "text": "sidecars or however you want to do that sealed Secrets or stops or whatever you want to use but that can be challenging",
    "start": "1870440",
    "end": "1875899"
  },
  {
    "text": "and that's it yep I do have the repo here uh so if you have any questions it's a very simple example but hopefully",
    "start": "1875899",
    "end": "1882080"
  },
  {
    "text": "it uh puts you on a good path towards application sets",
    "start": "1882080",
    "end": "1886779"
  },
  {
    "text": "[Applause]",
    "start": "1888350",
    "end": "1891429"
  }
]