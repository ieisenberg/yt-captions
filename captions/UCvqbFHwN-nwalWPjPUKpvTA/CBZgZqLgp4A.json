[
  {
    "text": "hello everyone and welcome to this episode of this week in cloud native",
    "start": "296160",
    "end": "301680"
  },
  {
    "text": "this is episode number nine um and in the previous episode we spent quite a bit of time kind of exploring",
    "start": "301680",
    "end": "307759"
  },
  {
    "text": "the um a lot of the information about the pod security admission controller um and in",
    "start": "307759",
    "end": "313759"
  },
  {
    "text": "this episode we're gonna do a little bit more hands-on there so let me know you're out there if you're out there and i will be happy to raise",
    "start": "313759",
    "end": "320400"
  },
  {
    "text": "your voice into the comments so if you're listening or if you're tuned in definitely let me know",
    "start": "320400",
    "end": "326800"
  },
  {
    "text": "that that's happening good to see five of you out there",
    "start": "326800",
    "end": "331199"
  },
  {
    "text": "the hackmd for this episode is located at the link below where it says hackmd.i io",
    "start": "332880",
    "end": "338400"
  },
  {
    "text": "at twicn and so if you want to see the notes or if you want to put anything in there you can put that stuff there",
    "start": "338400",
    "end": "345360"
  },
  {
    "text": "how's it going russ good to see you and let's dig in here",
    "start": "345360",
    "end": "354160"
  },
  {
    "text": "so yeah rough saying hello to everybody and then here is our notes for this week",
    "start": "356400",
    "end": "363919"
  },
  {
    "text": "got some good stuff to cover i'm doing some work and some you know pre-work and getting ready for kubecon i",
    "start": "363919",
    "end": "370240"
  },
  {
    "text": "will be down there in person so i hope that some of you will be as well and hopefully we'll get to see each",
    "start": "370240",
    "end": "375600"
  },
  {
    "text": "other that'd be tremendous turn this a little bit looks like i got kind of off center somehow",
    "start": "375600",
    "end": "383440"
  },
  {
    "text": "stream title seems off should say this week in cloud native",
    "start": "386880",
    "end": "392080"
  },
  {
    "text": "search magic interesting because according to",
    "start": "392479",
    "end": "397680"
  },
  {
    "text": "where i usually set that that's set correctly",
    "start": "397680",
    "end": "402319"
  },
  {
    "text": "oh [Music] interesting interesting",
    "start": "407440",
    "end": "412560"
  },
  {
    "text": "take a look here and see if there's something i can do there give me one moment",
    "start": "412800",
    "end": "418520"
  },
  {
    "text": "yeah sure enough it is correct it is not correct but i don't know how to change it because",
    "start": "426960",
    "end": "432319"
  },
  {
    "text": "the place where i've normally changed it it's already set correctly so i'm not sure where",
    "start": "432319",
    "end": "438240"
  },
  {
    "text": "to make the change i guess we're gonna have to fix it in post all right well thank you for pointing it",
    "start": "438240",
    "end": "444319"
  },
  {
    "text": "out at least i don't know exactly how to change that i think it's already set correctly on my side so",
    "start": "444319",
    "end": "451800"
  },
  {
    "text": "yeah that's already yeah everything i can do to my site is",
    "start": "452880",
    "end": "458960"
  },
  {
    "text": "correct sorry about that anyway let's dig into it a little bit more so as you are already aware this is",
    "start": "458960",
    "end": "465680"
  },
  {
    "text": "cloud native tv this is a official live stream of the cncf and so",
    "start": "465680",
    "end": "470720"
  },
  {
    "text": "it's subject to the cncf code of conduct um if you like the stuff that i'm putting out here make sure that we're",
    "start": "470720",
    "end": "477280"
  },
  {
    "text": "that you're throwing in the um that you subscribe to this channel and you'll be notified when things are coming",
    "start": "477280",
    "end": "483280"
  },
  {
    "text": "we're trying to still figure out the calendar things you can actually schedule ahead of time but that's taking a little bit of time",
    "start": "483280",
    "end": "488960"
  },
  {
    "text": "um if you want to see any recorded sessions like if you missed an episode or if you want to check something out you can",
    "start": "488960",
    "end": "494960"
  },
  {
    "text": "actually go check out the youtube streams and this is where a lot of the recordings that we're doing will be here",
    "start": "494960",
    "end": "500560"
  },
  {
    "text": "so here's a bunch of this stuff from before the last week and the week before but each",
    "start": "500560",
    "end": "506000"
  },
  {
    "text": "of these curated playlists will actually have the content from the previous from the previous shows",
    "start": "506000",
    "end": "512240"
  },
  {
    "text": "actually it looks like some of mine are missing i'll have to figure out what's up oh that's the cloud data classroom sorry",
    "start": "512240",
    "end": "520039"
  },
  {
    "text": "yeah if you want to see a previous episode that'll be there",
    "start": "520159",
    "end": "525440"
  },
  {
    "text": "for the kubernetes side of things there were a couple of good articles or a couple of good things that happened",
    "start": "527120",
    "end": "533040"
  },
  {
    "text": "including this one from celeste hogan celeste is a good",
    "start": "533040",
    "end": "538640"
  },
  {
    "text": "friend from the community and points out that there's a really great",
    "start": "538640",
    "end": "543760"
  },
  {
    "text": "list of first projects uh or first",
    "start": "543760",
    "end": "549120"
  },
  {
    "text": "you know good first good first items inside of the kubernetes stocks and i wanted to kind of share with you how to",
    "start": "549120",
    "end": "554480"
  },
  {
    "text": "both to find them and also to uh be able to you know how do you get involved right and so if you go to go",
    "start": "554480",
    "end": "561600"
  },
  {
    "text": "dot k it's dot io slash good dash first dash issue and that's",
    "start": "561600",
    "end": "567279"
  },
  {
    "text": "this url right here go.kh dot io slash good dash first issue",
    "start": "567279",
    "end": "573760"
  },
  {
    "text": "and you're gonna see any issues that are in the kubernetes repository that are marked help wanted",
    "start": "573760",
    "end": "579680"
  },
  {
    "text": "and or good first issue and these are great for getting started and if you wanted to look for a",
    "start": "579680",
    "end": "584800"
  },
  {
    "text": "particular category you could jump into um",
    "start": "584800",
    "end": "590920"
  },
  {
    "text": "you could look for you could look right in here and there's lots of good stuff in here for for good first issues so",
    "start": "591040",
    "end": "596399"
  },
  {
    "text": "this is a great place to start if you want to start getting involved in side of the kubernetes",
    "start": "596399",
    "end": "602320"
  },
  {
    "text": "environment and there's definitely stuff that is like easy for some and hard for others like there's one that is uh talking about",
    "start": "602320",
    "end": "608880"
  },
  {
    "text": "like the some of the korean translations for the documentation is incorrect and that's a great first issue for",
    "start": "608880",
    "end": "614720"
  },
  {
    "text": "someone who speaks korean would be very easy it would likely be very simple for them but it would not be very easy for",
    "start": "614720",
    "end": "619839"
  },
  {
    "text": "somebody like myself who does not speak that language um",
    "start": "619839",
    "end": "625440"
  },
  {
    "text": "yeah there's some stuff in the perf test there's stuff in cube builder there's stuff in the hierarchical name spaces",
    "start": "625760",
    "end": "631680"
  },
  {
    "text": "there's there's tons of stuff in here including stuff for docs so great place to get involved",
    "start": "631680",
    "end": "638880"
  },
  {
    "text": "there's actually also just recently a thread on the kubernetes twitter bot which is",
    "start": "638959",
    "end": "644880"
  },
  {
    "text": "kate's contributors and so if you want to follow cage contributors there's always good information coming from cage",
    "start": "644880",
    "end": "650959"
  },
  {
    "text": "contributors regarding uh things that are happening inside the community they'll announce that like the summit's",
    "start": "650959",
    "end": "656800"
  },
  {
    "text": "coming up and those sorts of things but they also call out right here information about",
    "start": "656800",
    "end": "663360"
  },
  {
    "text": "um other things that are looking for the other folks other parts of the kubernetes community that are looking",
    "start": "663360",
    "end": "669279"
  },
  {
    "text": "for contribution so here's an example of building an intuitive dashboard",
    "start": "669279",
    "end": "675040"
  },
  {
    "text": "um so if you're if you're if you'd like to play with angularjs golang and client go sig ui is looking for such",
    "start": "675040",
    "end": "682000"
  },
  {
    "text": "contributors to help them build an intuitive dashboard more information here there are a few other call outs just",
    "start": "682000",
    "end": "688640"
  },
  {
    "text": "this last week around things that are around folks that are looking for uh feedback there as well so",
    "start": "688640",
    "end": "695839"
  },
  {
    "text": "go ahead and retweet those and if you're following me on twitter you'll see those retweets as well so sync cluster lifecycle is looking for contributors to",
    "start": "695839",
    "end": "702880"
  },
  {
    "text": "help us with ncdadm which is a neat project it's basically a tooling that automates the lifecycle of std within",
    "start": "702880",
    "end": "708560"
  },
  {
    "text": "your cluster cluster add-ons in cubadm are you a user are looking for a way to give back click here for more information also we have",
    "start": "708560",
    "end": "715440"
  },
  {
    "text": "sig scheduling looking for contributors to help document scheduler internals",
    "start": "715440",
    "end": "721760"
  },
  {
    "text": "they're looking for more folks in the sick auto scaling they're looking for more and then here's what i was referring to earlier if you're",
    "start": "723920",
    "end": "729600"
  },
  {
    "text": "considering registering for the contributor summit at the upcoming kubecon virtually or in person please register asap if you haven't done that",
    "start": "729600",
    "end": "736959"
  },
  {
    "text": "or if you plan on actually attending kubecon either virtually or in person definitely check that out it would be a",
    "start": "736959",
    "end": "743040"
  },
  {
    "text": "really good time so yeah great twitter bot for following",
    "start": "743040",
    "end": "748320"
  },
  {
    "text": "with what's happening kind of in the community and getting updated that way",
    "start": "748320",
    "end": "753600"
  },
  {
    "text": "the next thing up usually is we cover a security announce it looks like i have some other chat",
    "start": "754480",
    "end": "759680"
  },
  {
    "text": "some kind of bot would be nice with posts clickable links while duffy talked about them that would",
    "start": "759680",
    "end": "765040"
  },
  {
    "text": "be neat yeah that's something maybe i'll build live that'd be kind of fun",
    "start": "765040",
    "end": "772040"
  },
  {
    "text": "so we have kubernetes cbes usually i check out the announce group which there's",
    "start": "772639",
    "end": "778320"
  },
  {
    "text": "nothing in here since july 14th so that's good no big new security announcements i did",
    "start": "778320",
    "end": "784800"
  },
  {
    "text": "find another dashboard that i wanted to share with you all because i thought that this would probably be a good source of information as well i'm not",
    "start": "784800",
    "end": "790880"
  },
  {
    "text": "sure that everybody is aware but kubernetes has actually um formed a relationship with hackerone and they",
    "start": "790880",
    "end": "796560"
  },
  {
    "text": "have a bug bounty program and it was launched in january of 2020 um",
    "start": "796560",
    "end": "802639"
  },
  {
    "text": "which feels like it was a million years ago and only yesterday at the same time so this is the kind of activity list",
    "start": "802639",
    "end": "809200"
  },
  {
    "text": "and i think you can sort by when it was published or when it was disclosed",
    "start": "809200",
    "end": "815200"
  },
  {
    "text": "no oh bug bounty",
    "start": "815200",
    "end": "820560"
  },
  {
    "text": "i guess you can't really sort this in a way that i think makes sense but here are some um here here are some",
    "start": "820560",
    "end": "826720"
  },
  {
    "text": "things that have been um opened against are you know publicly",
    "start": "826720",
    "end": "831760"
  },
  {
    "text": "disclosed about things that are happening within the cluster and if you look at that security announced list you're going to get to see the same",
    "start": "831760",
    "end": "837680"
  },
  {
    "text": "events but i think it's actually probably a pretty good way of understanding what's what's coming and um",
    "start": "837680",
    "end": "843760"
  },
  {
    "text": "there'd be a coordinated disclosure so if you're following the security list that is in the notes then you would still be able to see this but also this",
    "start": "843760",
    "end": "850880"
  },
  {
    "text": "is kind of like where you're seeing uh this is where folks that are actually doing the work of trying to find vulnerabilities in kubernetes are going",
    "start": "850880",
    "end": "857199"
  },
  {
    "text": "to make that announcement and so let's just take this top one here for example node validation admission does not observe",
    "start": "857199",
    "end": "863279"
  },
  {
    "text": "all old object fields the validating mission controller the mission web hook",
    "start": "863279",
    "end": "868720"
  },
  {
    "text": "for node objects is passing old object fields incorrectly on admission review requests",
    "start": "868720",
    "end": "874320"
  },
  {
    "text": "it's identified this is an interesting one because they're theory the premise is that you could",
    "start": "874320",
    "end": "880639"
  },
  {
    "text": "potentially allowing users to bypass validating admission by updating node labels taints and others which is an",
    "start": "881279",
    "end": "887040"
  },
  {
    "text": "interesting attack surface and they created a validating webhook and they created a dummy and they",
    "start": "887040",
    "end": "893040"
  },
  {
    "text": "created a potential issue location so this is a great example of an expo a",
    "start": "893040",
    "end": "899600"
  },
  {
    "text": "vulnerability documentation like that actually provides experiments or it provides actions",
    "start": "899600",
    "end": "907120"
  },
  {
    "text": "and really explains the impact of a vulnerability that has been put out so i thought this was really well written and",
    "start": "907120",
    "end": "912480"
  },
  {
    "text": "really well um really well done here and then you know as i was saying before",
    "start": "912480",
    "end": "917760"
  },
  {
    "text": "so this was resolved as a cbe this is the cbt here and again if you just go to that",
    "start": "917760",
    "end": "924839"
  },
  {
    "text": "information um within the cve document there'll be a link to",
    "start": "924839",
    "end": "931600"
  },
  {
    "text": "kubernetes security announce which is the group that i usually check every every time we log in here",
    "start": "931600",
    "end": "937600"
  },
  {
    "text": "and this is where you can actually see like what this issue was rated as uh what the affected versions were and what",
    "start": "937600",
    "end": "943519"
  },
  {
    "text": "the fixed versions were and so this particular piece was actually exposed and fixed so",
    "start": "943519",
    "end": "950639"
  },
  {
    "text": "good stuff but anyway more interesting information to go look at super uh cncf things i wanted to talk",
    "start": "950639",
    "end": "957920"
  },
  {
    "text": "about i always check the cube weekly for the previous week to take a look and see what's coming",
    "start": "957920",
    "end": "963759"
  },
  {
    "text": "or what will be announced and what is happening this week",
    "start": "963759",
    "end": "969040"
  },
  {
    "text": "cncf programs on online programs for this week we have kubernetes clusters need persistent data by james byrne of",
    "start": "969040",
    "end": "975279"
  },
  {
    "text": "storage os and then that tweet that we were just watching for or we're just talking about from celeste hogan and then there's some",
    "start": "975279",
    "end": "982560"
  },
  {
    "text": "good technical articles talking about um prometheus definitive guide",
    "start": "982560",
    "end": "988079"
  },
  {
    "text": "interesting so digging into the prometheus operator by nadad desai from infra cloud",
    "start": "988079",
    "end": "993519"
  },
  {
    "text": "technologies kubernetes ci cd by alex czech is from ubuntu and",
    "start": "993519",
    "end": "1001600"
  },
  {
    "text": "sql commenter emerges with open telemetry interesting i haven't seen that one yet nimesh bhagat from google",
    "start": "1001600",
    "end": "1007279"
  },
  {
    "text": "cloud and then we have daniel and john john",
    "start": "1007279",
    "end": "1012880"
  },
  {
    "text": "doing a sneak preview of the kubecon talk should be pretty fun",
    "start": "1013360",
    "end": "1018880"
  },
  {
    "text": "allows you to describe so subscribe to events for push and pull operation serves as a ui to view them",
    "start": "1018880",
    "end": "1025120"
  },
  {
    "text": "oh i mean that should be a really interesting talk so if you're and i think that will be pre-recorded so",
    "start": "1025120",
    "end": "1030720"
  },
  {
    "text": "likely you'll be able to see that one both virtually and in person so we'll see how that works out",
    "start": "1030720",
    "end": "1036319"
  },
  {
    "text": "upcoming events there will be kata and arm a secure alternative to the sg space",
    "start": "1036319",
    "end": "1042959"
  },
  {
    "text": "building an h.a control plane for tinkerbell oh wow bye jason my good friend jason d ibirus that should be a",
    "start": "1043120",
    "end": "1048640"
  },
  {
    "text": "fun one that's coming up on the 15th hasn't happened yet two more days",
    "start": "1048640",
    "end": "1054320"
  },
  {
    "text": "and then on demand seminars moving from clis to control planes with cross with cross plane somebody else from cross",
    "start": "1054320",
    "end": "1060000"
  },
  {
    "text": "plane victor farcick and using csi snapshots so that's what's coming in the cncf community",
    "start": "1060000",
    "end": "1066960"
  },
  {
    "text": "definitely check those things out if you're interested in them and then one of the ones i also really liked was this",
    "start": "1066960",
    "end": "1072080"
  },
  {
    "text": "blog post by my very good friend scott lowe who gets into uh envoy configuration he's talking",
    "start": "1072080",
    "end": "1078640"
  },
  {
    "text": "about how envoy works what you're configuring and how and how the and how those bits of it work so if you're",
    "start": "1078640",
    "end": "1084320"
  },
  {
    "text": "interested in envoy and the way that envoy integrates with service mesh this is probably a pretty good read on the",
    "start": "1084320",
    "end": "1089679"
  },
  {
    "text": "envoy piece of it i thought that was a pretty good article all right",
    "start": "1089679",
    "end": "1095679"
  },
  {
    "text": "now it is playtime let us get started all right",
    "start": "1095679",
    "end": "1101360"
  },
  {
    "text": "so last week we did a lot of talking about the um",
    "start": "1103440",
    "end": "1108919"
  },
  {
    "text": "enhancement oh and i just learned something new i wonder if",
    "start": "1109280",
    "end": "1114320"
  },
  {
    "text": "click here i want to see if this works just bear with me for just a moment because i think that it does",
    "start": "1115840",
    "end": "1123840"
  },
  {
    "text": "if it doesn't then i'll be kind of sad but i figured out that there is a new short path features dot",
    "start": "1127360",
    "end": "1133600"
  },
  {
    "text": "case",
    "start": "1133600",
    "end": "1136600"
  },
  {
    "text": "doesn't work",
    "start": "1142559",
    "end": "1145039"
  },
  {
    "text": "features goes to issues",
    "start": "1148640",
    "end": "1152880"
  },
  {
    "text": "[Music] i was hoping that was a little easier or more intuitive but i don't see how it",
    "start": "1153950",
    "end": "1159600"
  },
  {
    "text": "works right now",
    "start": "1159600",
    "end": "1164120"
  },
  {
    "text": "not today buddy all right",
    "start": "1168559",
    "end": "1172480"
  },
  {
    "text": "uh so that's how it would work so if you know the issue number like two five seven nine for example",
    "start": "1174240",
    "end": "1182480"
  },
  {
    "text": "then you can actually go to that issue by going features dot kate's",
    "start": "1182480",
    "end": "1190480"
  },
  {
    "text": "oh",
    "start": "1190480",
    "end": "1193480"
  },
  {
    "text": "so if you are aware of a like this particular issue this is the cooper this is the enhancement for pod",
    "start": "1199360",
    "end": "1205919"
  },
  {
    "text": "security admission which is a thing that we're going to be exploring in hand today um these are the assignees",
    "start": "1205919",
    "end": "1210960"
  },
  {
    "text": "to it and this is kind of the work that's ongoing uh if you know that issue then there is actually a short code that you can use",
    "start": "1210960",
    "end": "1217200"
  },
  {
    "text": "to get there which i only just recently learned about which i thought was actually pretty cool",
    "start": "1217200",
    "end": "1222640"
  },
  {
    "text": "so let's see so we talked quite a lo quite",
    "start": "1224240",
    "end": "1231120"
  },
  {
    "text": "a lot about this documentation last time talking about like basically",
    "start": "1231120",
    "end": "1236480"
  },
  {
    "text": "how it's going to work what pod security admission is how do we",
    "start": "1236480",
    "end": "1241679"
  },
  {
    "text": "enable it those sorts of things",
    "start": "1241679",
    "end": "1247640"
  },
  {
    "text": "oh and actually i just saw an issue go by in the kubernetes development list which is on i usually look for lwkd.info",
    "start": "1249679",
    "end": "1256559"
  },
  {
    "text": "for this and what they pointed out was this recently merged and what this does is it actually changes the admission",
    "start": "1256559",
    "end": "1263679"
  },
  {
    "text": "mechanism inside of the api server to enforce pod security before pod security",
    "start": "1263679",
    "end": "1268799"
  },
  {
    "text": "policy so if you're in a state where you're running both then pod security will run before pod security policy and",
    "start": "1268799",
    "end": "1275120"
  },
  {
    "text": "that enables the um functionality of like audit or warn right and we can talk a little bit more",
    "start": "1275120",
    "end": "1281360"
  },
  {
    "text": "about that when we get hands-on but when you have this stuff running if you have pod security admission running and",
    "start": "1281360",
    "end": "1287919"
  },
  {
    "text": "you have it set in an audit mode or a warn mode then you probably want to be able to see those things before pod",
    "start": "1287919",
    "end": "1293440"
  },
  {
    "text": "security policy takes over takes the object and um and implements it and so in this case",
    "start": "1293440",
    "end": "1299760"
  },
  {
    "text": "you can they basically just change the order of the order of which admission control",
    "start": "1299760",
    "end": "1305919"
  },
  {
    "text": "policies the ordering of admission control controllers",
    "start": "1305919",
    "end": "1310960"
  },
  {
    "text": "policies objects however they are being evaluated so that pod security would run before",
    "start": "1310960",
    "end": "1316559"
  },
  {
    "text": "pod security policy so the admission for pod security runs first",
    "start": "1316559",
    "end": "1322879"
  },
  {
    "text": "pretty cool i thought that was pretty neat it's a good fix and then we also talked about okay so",
    "start": "1325120",
    "end": "1331760"
  },
  {
    "text": "this is actually where we're going to jump in my good friend lachlan evanson actually",
    "start": "1331760",
    "end": "1336799"
  },
  {
    "text": "wrote this article uh and i was helping him kind of understand the way that the sekamp",
    "start": "1336799",
    "end": "1342000"
  },
  {
    "text": "stuff worked but this is actually also just an article that he put together about the very thing that we're going to",
    "start": "1342000",
    "end": "1347919"
  },
  {
    "text": "explore today and so since some of this work is already done we're going to dig in and we're going to start here",
    "start": "1347919",
    "end": "1355120"
  },
  {
    "text": "to keep it simple for our particular environment so i'm going to jump into my",
    "start": "1356559",
    "end": "1362240"
  },
  {
    "text": "desktop too pop open a terminal here",
    "start": "1362240",
    "end": "1368000"
  },
  {
    "text": "in zero zero nine",
    "start": "1368000",
    "end": "1375919"
  },
  {
    "text": "let's get started here so i'm gonna capped",
    "start": "1380880",
    "end": "1385559"
  },
  {
    "text": "okay now there are a couple other things i wanted to extend in this and i want to talk to you a little bit about why and",
    "start": "1395919",
    "end": "1401200"
  },
  {
    "text": "how and so inside oh shoot that's not what i wanted",
    "start": "1401200",
    "end": "1407360"
  },
  {
    "text": "in the documentation",
    "start": "1407360",
    "end": "1410400"
  },
  {
    "text": "which is here",
    "start": "1412720",
    "end": "1419280"
  },
  {
    "text": "a part of this documentation talks about like if you're in warning mode",
    "start": "1420559",
    "end": "1427400"
  },
  {
    "text": "let's get down in here [Music]",
    "start": "1435679",
    "end": "1444119"
  },
  {
    "text": "so in pod security admission here we go",
    "start": "1444480",
    "end": "1449600"
  },
  {
    "text": "we have audit and warn and in here it says policy violations will trigger the addition of an audit",
    "start": "1451360",
    "end": "1458240"
  },
  {
    "text": "annotation to the event recorded in the audit log warn",
    "start": "1458240",
    "end": "1463279"
  },
  {
    "text": "policy violations will trigger a user facing warning but otherwise be allowed",
    "start": "1463279",
    "end": "1468480"
  },
  {
    "text": "and so as we define policy and enforce that policy in a given name space",
    "start": "1468480",
    "end": "1474000"
  },
  {
    "text": "then we'll be able to see like the three the three different modes here that's what that's what i'm planning on",
    "start": "1474000",
    "end": "1479279"
  },
  {
    "text": "covering today but in here specifically it calls out the need possibly for being able to see",
    "start": "1479279",
    "end": "1485600"
  },
  {
    "text": "what's happening in the audit log and so i wanted to extend our kind configuration",
    "start": "1485600",
    "end": "1490640"
  },
  {
    "text": "to support an audit log so that we could actually see that",
    "start": "1490640",
    "end": "1495919"
  },
  {
    "text": "unfortunately i have done this work before in the form of a gist and so i wanted to",
    "start": "1496960",
    "end": "1502080"
  },
  {
    "text": "actually just share with you what i was doing in that gist and then hopefully that will give us the ability to export our audit log and then we'll",
    "start": "1502080",
    "end": "1508559"
  },
  {
    "text": "be able to actually see the audit event as it is annotated when we go into audit mode and we'd be able",
    "start": "1508559",
    "end": "1514320"
  },
  {
    "text": "to see what that audit security event looks like",
    "start": "1514320",
    "end": "1518799"
  },
  {
    "text": "so for each mode okay this is actually configuration of the object itself okay so",
    "start": "1519919",
    "end": "1526240"
  },
  {
    "text": "inside of here this is a gist i put in",
    "start": "1526240",
    "end": "1532080"
  },
  {
    "text": "uh gosh 13 months ago so a year and a month ago when i was playing with auditing inside",
    "start": "1532080",
    "end": "1538799"
  },
  {
    "text": "of kind you could even see even the api version is an older version i think now we're on a different version of api",
    "start": "1538799",
    "end": "1545520"
  },
  {
    "text": "um this is a crib from",
    "start": "1545520",
    "end": "1550799"
  },
  {
    "text": "the outco cold solutions monitoring k it's v4 audit document which is probably good enough",
    "start": "1550799",
    "end": "1556880"
  },
  {
    "text": "for us do not log from the collector we probably don't need to worry about",
    "start": "1556880",
    "end": "1562720"
  },
  {
    "text": "that piece of it and then there's don't log node communications",
    "start": "1562720",
    "end": "1568080"
  },
  {
    "text": "don't log read only urls unlock configmap and secrets sure",
    "start": "1568080",
    "end": "1575278"
  },
  {
    "text": "catch a little more than uncles ah okay there we go",
    "start": "1575440",
    "end": "1581600"
  },
  {
    "text": "so then here's our kind configuration so these are this is basically what the audit with the um",
    "start": "1581600",
    "end": "1586640"
  },
  {
    "text": "the auditing uh file will look like when we're configuring auditing and auditing inside of kubernetes",
    "start": "1586640",
    "end": "1593039"
  },
  {
    "text": "and then the other file here is our kind config that leverages um that",
    "start": "1593039",
    "end": "1598640"
  },
  {
    "text": "makes the advanced audit.yaml file available to the api server",
    "start": "1598640",
    "end": "1604720"
  },
  {
    "text": "so that the api server can actually use that audit policy file and specify an audit",
    "start": "1604720",
    "end": "1613360"
  },
  {
    "text": "path and then i'll make it so that we actually have an audit log that we're able to view",
    "start": "1613360",
    "end": "1619760"
  },
  {
    "text": "so",
    "start": "1619760",
    "end": "1622760"
  },
  {
    "text": "i'm going to do is i'm going to go ahead and copy we're going to build a kind configuration that supports both pod",
    "start": "1626080",
    "end": "1633039"
  },
  {
    "text": "security pod security admission and also the um the audit logging so that we can",
    "start": "1633039",
    "end": "1638640"
  },
  {
    "text": "see those events so bear with me and as we work through this and then we'll be able to actually see",
    "start": "1638640",
    "end": "1645360"
  },
  {
    "text": "exactly what that looks like so i'm going to copy this i'm going to come over here i'm going to",
    "start": "1645360",
    "end": "1652320"
  },
  {
    "text": "go down here to the bottom just for a second",
    "start": "1652320",
    "end": "1657120"
  },
  {
    "text": "i'm gonna paste all this in here and then we're gonna do some handy cutting and pasting",
    "start": "1660320",
    "end": "1668440"
  },
  {
    "text": "we can actually just do a relative pass now which is cool",
    "start": "1683840",
    "end": "1688398"
  },
  {
    "text": "audit.yaml read only true type file but this is doing what this line right here with the extra mounts is doing is it's",
    "start": "1689679",
    "end": "1696480"
  },
  {
    "text": "saying for the container path in the control plane node at this path etsy kubernetes policies",
    "start": "1696480",
    "end": "1702720"
  },
  {
    "text": "add audit dot yaml i want you to make a copy of this file which is local dot slash ad",
    "start": "1702720",
    "end": "1710080"
  },
  {
    "text": "make it a read-only file and copy it as true now what this does is it makes the assumption that um",
    "start": "1710080",
    "end": "1717039"
  },
  {
    "text": "actually this makes it so that the file is available on the underlying node so if i were to docker exec into the api",
    "start": "1717039",
    "end": "1722559"
  },
  {
    "text": "server sorry into the control plane node i would be able to see that file sitting on the file system",
    "start": "1722559",
    "end": "1728559"
  },
  {
    "text": "inside the container but what this does not yet do is make the file available to",
    "start": "1728559",
    "end": "1734000"
  },
  {
    "text": "the api server running inside of that static pod container that cube adm stands up so that's where the next piece",
    "start": "1734000",
    "end": "1740320"
  },
  {
    "text": "is going to come in get rid of that i'm going to get rid of that",
    "start": "1740320",
    "end": "1745679"
  },
  {
    "text": "we have our control plane node with this file made available and then here is where we're going to",
    "start": "1745679",
    "end": "1750960"
  },
  {
    "text": "make our qb configuration patches i have to look to see if this is correct",
    "start": "1750960",
    "end": "1756640"
  },
  {
    "text": "i think it might no longer be so",
    "start": "1756640",
    "end": "1764200"
  },
  {
    "text": "i think we have to see what version is actually the current version",
    "start": "1767039",
    "end": "1772320"
  },
  {
    "text": "and the way that we can do that is we can go back to our browser",
    "start": "1773919",
    "end": "1780360"
  },
  {
    "text": "oh",
    "start": "1780799",
    "end": "1783799"
  },
  {
    "text": "you know what that's relative to its path the path is going to be relative to the um where",
    "start": "1803679",
    "end": "1809200"
  },
  {
    "text": "you're actually running the kind um the kind create cluster command",
    "start": "1809200",
    "end": "1817080"
  },
  {
    "text": "there we go",
    "start": "1820880",
    "end": "1823840"
  },
  {
    "text": "so our current api version looks like it's v1 beta 3.",
    "start": "1837600",
    "end": "1846840"
  },
  {
    "text": "okay so it's v one beta three",
    "start": "1850240",
    "end": "1853919"
  },
  {
    "text": "fifty and newer can be used to migrate from one to two 122 plus",
    "start": "1861519",
    "end": "1867519"
  },
  {
    "text": "no longer support v1 beta 1 and older apis and but needs to be supported v1 beta3 so",
    "start": "1867519",
    "end": "1875519"
  },
  {
    "text": "that works for us",
    "start": "1875519",
    "end": "1879240"
  },
  {
    "text": "i thought that had changed configuration",
    "start": "1881360",
    "end": "1888080"
  },
  {
    "text": "this metadata name thing is just giving it something to actually parse against and then here here's where we get things",
    "start": "1888080",
    "end": "1893519"
  },
  {
    "text": "that makes things interesting so for the api server component we're going to pass some extra arguments",
    "start": "1893519",
    "end": "1899039"
  },
  {
    "text": "to that binary we're going to set the audit policy flag or file to use our policies of",
    "start": "1899039",
    "end": "1906080"
  },
  {
    "text": "audit.yaml we're going to set the log path var log kubernetes",
    "start": "1906080",
    "end": "1911440"
  },
  {
    "text": "cube api server audit log and that'll be made available on the underlying container and then the format for that",
    "start": "1911440",
    "end": "1917039"
  },
  {
    "text": "will be json and then here we actually make the file available to the api server binary",
    "start": "1917039",
    "end": "1925039"
  },
  {
    "text": "yeah inside my laptop and where it will be inside the docker node will be at that path at that",
    "start": "1925440",
    "end": "1930720"
  },
  {
    "text": "container path that we specified and we're going to look at that here in just a second once we get this wired up right and so",
    "start": "1930720",
    "end": "1936799"
  },
  {
    "text": "this path host path will be on my laptop and container path container path will",
    "start": "1936799",
    "end": "1942159"
  },
  {
    "text": "be inside of the container that makes sense",
    "start": "1942159",
    "end": "1948600"
  },
  {
    "text": "so in the extra volumes made available to the api server right we're going to pass in a couple of extra volumes we're",
    "start": "1949120",
    "end": "1955840"
  },
  {
    "text": "going to create a volume that says host path mount path essay kubernetes policies",
    "start": "1955840",
    "end": "1960880"
  },
  {
    "text": "and this will actually give us access to that file that we copied into the node",
    "start": "1960880",
    "end": "1965919"
  },
  {
    "text": "and we're going to make that file available to the api server inside of its container file system",
    "start": "1965919",
    "end": "1971440"
  },
  {
    "text": "and then the other piece is where we're going to put those logs so we called out above that it was far log kubernetes so we're just going to mount that path on",
    "start": "1971440",
    "end": "1977519"
  },
  {
    "text": "the underlying container into the container that's running cube api server",
    "start": "1977519",
    "end": "1982559"
  },
  {
    "text": "um where that path will be this is read only false and it's directory you're correct",
    "start": "1982559",
    "end": "1988240"
  },
  {
    "text": "so in siri we should have everything we need to be able to turn on both pod security policy",
    "start": "1988240",
    "end": "1993600"
  },
  {
    "text": "that's all we had to do here was feature gates pod security equals true um",
    "start": "1993600",
    "end": "1999760"
  },
  {
    "text": "and then in the nodes on the control plane we're going to add this advanced audit.yaml which we still",
    "start": "1999760",
    "end": "2005279"
  },
  {
    "text": "have to create on our local file system and then we're also going to pass in some configuration options to the to the",
    "start": "2005279",
    "end": "2011519"
  },
  {
    "text": "api server so that the api server can enable autologging",
    "start": "2011519",
    "end": "2016640"
  },
  {
    "text": "so i'm going to go ahead and vim ave audit",
    "start": "2016640",
    "end": "2022398"
  },
  {
    "text": "insert mode and then we're going to go back over here to our just",
    "start": "2026480",
    "end": "2032200"
  },
  {
    "text": "yep i'm gonna go ahead and grab this whole thing",
    "start": "2033279",
    "end": "2038640"
  },
  {
    "text": "and come back over here and drop it in there",
    "start": "2042000",
    "end": "2046600"
  },
  {
    "text": "now i think oh you know what that's probably not right anymore either",
    "start": "2047120",
    "end": "2053119"
  },
  {
    "text": "i'm assuming this is v1 by now but",
    "start": "2055440",
    "end": "2060520"
  },
  {
    "text": "let's go up a 121 cluster real quick and just take a look at that um i'll show you how to actually validate that stuff",
    "start": "2073919",
    "end": "2079520"
  },
  {
    "text": "because like sometimes i also don't know so",
    "start": "2079520",
    "end": "2084560"
  },
  {
    "text": "pretty sure it's v1 now but let's take a look",
    "start": "2084560",
    "end": "2089480"
  },
  {
    "text": "actually we could absolutely just we could also just fit it here",
    "start": "2089679",
    "end": "2094320"
  },
  {
    "text": "so",
    "start": "2094800",
    "end": "2097800"
  },
  {
    "text": "p1 so they apparently have some stuff in v one alpha one some stuff in v one beta",
    "start": "2131040",
    "end": "2137520"
  },
  {
    "text": "one and also there is actually no v one likely what we're doing will fall into the v one category",
    "start": "2137520",
    "end": "2145320"
  },
  {
    "text": "so we should be good there we're going to leave that as v1 also you can do cube",
    "start": "2151680",
    "end": "2156800"
  },
  {
    "text": "i'll explain audit",
    "start": "2156800",
    "end": "2161240"
  },
  {
    "text": "yeah this is probably just going to only be known about within i thought that audit was actually",
    "start": "2187839",
    "end": "2193760"
  },
  {
    "text": "something that was serviced in the api so you could actually oh no that never happened that's right",
    "start": "2193760",
    "end": "2199599"
  },
  {
    "text": "i was thinking maybe it would actually be something in the surface in the api because i thought we were talking about like dynamic audit for a while but i",
    "start": "2199599",
    "end": "2204880"
  },
  {
    "text": "don't think that actually were materialized and so it's actually not going to be known here it's going to be known in the code base",
    "start": "2204880",
    "end": "2212640"
  },
  {
    "text": "all right here is our ad audit yaml",
    "start": "2212640",
    "end": "2217920"
  },
  {
    "text": "we have set it to audit.kids to iov1 it's a policy",
    "start": "2217920",
    "end": "2223280"
  },
  {
    "text": "here are the rules that we care about should be enough to get it done",
    "start": "2223280",
    "end": "2229839"
  },
  {
    "text": "i'm gonna do kind delete",
    "start": "2231599",
    "end": "2238799"
  },
  {
    "text": "name equals check and then we're going to go ahead and bring up our new cluster with all",
    "start": "2239200",
    "end": "2244960"
  },
  {
    "text": "this configuration stuff and create cluster config equals",
    "start": "2244960",
    "end": "2252720"
  },
  {
    "text": "demo and then version or image equals",
    "start": "2252720",
    "end": "2258400"
  },
  {
    "text": "image string from that blog post",
    "start": "2258400",
    "end": "2262960"
  },
  {
    "text": "there's that blog post",
    "start": "2264160",
    "end": "2267960"
  },
  {
    "text": "too many windows gotta chuck some of these",
    "start": "2276640",
    "end": "2282078"
  },
  {
    "text": "you know i'm going to do exactly that check all the year",
    "start": "2282720",
    "end": "2288160"
  },
  {
    "text": "[Music] and inside of lockheed's blog",
    "start": "2291060",
    "end": "2298920"
  },
  {
    "text": "we want kindest node v1220 because that's actually where the feature shows up",
    "start": "2302400",
    "end": "2308000"
  },
  {
    "text": "before this the feature gate will apply to nothing so i'll paste that in there",
    "start": "2308000",
    "end": "2315040"
  },
  {
    "text": "enter something happened here field type not found in type v1",
    "start": "2315040",
    "end": "2321839"
  },
  {
    "text": "alpha for mount alias",
    "start": "2321839",
    "end": "2326200"
  },
  {
    "text": "that's changed it's no longer a type",
    "start": "2332560",
    "end": "2337079"
  },
  {
    "text": "how will it fail or will it work",
    "start": "2346720",
    "end": "2350480"
  },
  {
    "text": "we are making some pretty significant interesting changes to the um",
    "start": "2353200",
    "end": "2359119"
  },
  {
    "text": "to the control to the control plane configuration so you might get to see some troubleshooting on the kubereum side oh hey control",
    "start": "2359119",
    "end": "2365760"
  },
  {
    "text": "plane started whoop",
    "start": "2365760",
    "end": "2369839"
  },
  {
    "text": "worker nodes i don't think it actually did anything to the worker node so it should be",
    "start": "2370880",
    "end": "2376960"
  },
  {
    "text": "started fine it was the control plane that would have messed up if we had messed it up can't believe we got that in the first try it was kind of amazing",
    "start": "2376960",
    "end": "2385280"
  },
  {
    "text": "feeling kind of chuffed",
    "start": "2386320",
    "end": "2389200"
  },
  {
    "text": "okay so we so now we think we got everything worked out here let's just go ahead and",
    "start": "2394640",
    "end": "2400800"
  },
  {
    "text": "validate our assumptions so i'm going to go ahead and docker exec ti kind of plane",
    "start": "2400800",
    "end": "2409359"
  },
  {
    "text": "and then we do ls fc kubernetes policies",
    "start": "2409680",
    "end": "2416960"
  },
  {
    "text": "there's that file and then if we do var log we do this",
    "start": "2417839",
    "end": "2425599"
  },
  {
    "text": "oh that doesn't look great [Music]",
    "start": "2425599",
    "end": "2431760"
  },
  {
    "text": "yeah that's not that's that is where i put it right",
    "start": "2431760",
    "end": "2439160"
  },
  {
    "text": "so this is where because i was doing cubadiam configuration patches we can look at the kubernetes configuration",
    "start": "2440079",
    "end": "2445599"
  },
  {
    "text": "file that was actually resolved and verify that the changes we made show up",
    "start": "2445599",
    "end": "2450960"
  },
  {
    "text": "in that resolved file the way that we do that is we can just cat kind",
    "start": "2450960",
    "end": "2457319"
  },
  {
    "text": "cubeadm.com this is where the files would show up if they were going to show up this would be where they would be",
    "start": "2457319",
    "end": "2464720"
  },
  {
    "text": "so we're going to cruise on up here so there's cuba em v1 beta2",
    "start": "2465119",
    "end": "2472400"
  },
  {
    "text": "there's our feature gate showing up so that's working",
    "start": "2474800",
    "end": "2479800"
  },
  {
    "text": "you know what i don't see this stuff showing up i think we have",
    "start": "2486480",
    "end": "2492400"
  },
  {
    "text": "missed the boat somewhere qbdm",
    "start": "2493440",
    "end": "2498560"
  },
  {
    "text": "cage v1 beta2",
    "start": "2498560",
    "end": "2502000"
  },
  {
    "text": "yeah i don't see it here and if i do etsy kubernetes manifests",
    "start": "2504640",
    "end": "2513440"
  },
  {
    "text": "pat tube api server",
    "start": "2513440",
    "end": "2517760"
  },
  {
    "text": "nope that did not work i see no auditing flags so this failed",
    "start": "2519760",
    "end": "2526960"
  },
  {
    "text": "in a silent kind of way interesting stuff",
    "start": "2526960",
    "end": "2533359"
  },
  {
    "text": "it's probably one of those things you know there's this thing that um happens with yaml",
    "start": "2535359",
    "end": "2541200"
  },
  {
    "text": "and that's uh where it is like it will ignore stuff that is but it's",
    "start": "2541200",
    "end": "2547280"
  },
  {
    "text": "not that is missing oh",
    "start": "2547280",
    "end": "2552960"
  },
  {
    "text": "see i'm forward this is v one beta two not v one beta three",
    "start": "2552960",
    "end": "2558560"
  },
  {
    "text": "in this configuration we can see that we're using",
    "start": "2559520",
    "end": "2564520"
  },
  {
    "text": "yeah that's what's happening okay so take a look at that again real quick and then i could cement this to make sure",
    "start": "2565119",
    "end": "2570400"
  },
  {
    "text": "that we have it right",
    "start": "2570400",
    "end": "2573119"
  },
  {
    "text": "you can see that the configuration that was passed to cuba em was of this particular version",
    "start": "2587839",
    "end": "2594520"
  },
  {
    "text": "qbdm.k it's the i o v1 beta2 but in our configuration we're passing a patch to",
    "start": "2594520",
    "end": "2600880"
  },
  {
    "text": "v1 beta3 and v1 beta3 is not a configuration that is being passed to cubadium and so",
    "start": "2600880",
    "end": "2606880"
  },
  {
    "text": "it is failing silently because it doesn't know how to match so i go back into my kind configuration",
    "start": "2606880",
    "end": "2613520"
  },
  {
    "text": "and i change this value",
    "start": "2613520",
    "end": "2617319"
  },
  {
    "text": "[Music]",
    "start": "2623320",
    "end": "2627399"
  },
  {
    "text": "cluster",
    "start": "2628800",
    "end": "2631800"
  },
  {
    "text": "and then we'll see if it works so we thought we got away with it but we didn't quite get away with it we're gonna see if we get away with it this",
    "start": "2636640",
    "end": "2642720"
  },
  {
    "text": "time while this is loading up i'm going to actually go ahead and open up another",
    "start": "2642720",
    "end": "2648640"
  },
  {
    "text": "terminal and do a queue actually",
    "start": "2648640",
    "end": "2652480"
  },
  {
    "text": "hopefully hey control things started kind",
    "start": "2656560",
    "end": "2663200"
  },
  {
    "text": "videom.com",
    "start": "2663200",
    "end": "2666200"
  },
  {
    "text": "hey there we go now i've seen it show up",
    "start": "2678960",
    "end": "2682960"
  },
  {
    "text": "much better okay",
    "start": "2684240",
    "end": "2690640"
  },
  {
    "text": "is there a way to tell qbm to use beta3 in the kind config i think we have",
    "start": "2690640",
    "end": "2696400"
  },
  {
    "text": "to rely on the machinery that kind is using",
    "start": "2696400",
    "end": "2702160"
  },
  {
    "text": "so likely in some version of kind that is forward that it would use that next version",
    "start": "2702160",
    "end": "2708240"
  },
  {
    "text": "um alternatively we could do a thing where we generate the qradium.com for",
    "start": "2708240",
    "end": "2713280"
  },
  {
    "text": "ourselves and overwrite the destination in that api server with just the complete cube adm file that it would use",
    "start": "2713280",
    "end": "2720160"
  },
  {
    "text": "right and so if we wanted to if we wanted to take like an example qmdm configuration like you see here",
    "start": "2720160",
    "end": "2727119"
  },
  {
    "text": "and um make that like this the only part part right is this",
    "start": "2727119",
    "end": "2732400"
  },
  {
    "text": "local ip advertise address because we need to know for sure that that would be the ip address that it",
    "start": "2732400",
    "end": "2737520"
  },
  {
    "text": "would resolve to but if we did know that we knew it would be the the second docker container running or what have",
    "start": "2737520",
    "end": "2742800"
  },
  {
    "text": "you then we could actually go ahead and make this change also there's a default that would probably be okay here because this is actually the only the one ip",
    "start": "2742800",
    "end": "2749119"
  },
  {
    "text": "address on those nodes so we probably don't need to specify node ip here it's just",
    "start": "2749119",
    "end": "2754960"
  },
  {
    "text": "being passed because of the way we generate we're generating the configuration i hope that answers your question i know",
    "start": "2754960",
    "end": "2760640"
  },
  {
    "text": "that's not a super easy uh i know that's not a super easy answer but that is one way that we could be doing that",
    "start": "2760640",
    "end": "2768318"
  },
  {
    "text": "okay so let's go ahead and validate our assumptions again look like it worked",
    "start": "2770160",
    "end": "2775200"
  },
  {
    "text": "but i want to jump in here and take a look around kind control plane",
    "start": "2775200",
    "end": "2783680"
  },
  {
    "text": "and we'll do cat or",
    "start": "2784480",
    "end": "2788400"
  },
  {
    "text": "it's working all right so we do have a working audit log we do",
    "start": "2794160",
    "end": "2800480"
  },
  {
    "text": "have a working etsy tutoring is manifest",
    "start": "2800480",
    "end": "2806319"
  },
  {
    "text": "api server so it's actually",
    "start": "2806319",
    "end": "2810560"
  },
  {
    "text": "so inside of here we should be able to see our audit line and that is pointing at that correct",
    "start": "2813040",
    "end": "2819359"
  },
  {
    "text": "file and so everything is working like a chat",
    "start": "2819359",
    "end": "2825599"
  },
  {
    "text": "all right so our cluster is stood up let's play with it dig in should be fun",
    "start": "2825599",
    "end": "2832480"
  },
  {
    "text": "and what i'm going to do is i'm going to make this uh this configuration i'm going to put this configuration you know what let me just",
    "start": "2834079",
    "end": "2840160"
  },
  {
    "text": "before i say i'm going to do it why don't we just do it",
    "start": "2840160",
    "end": "2845078"
  },
  {
    "text": "and then i'm going to jump over here into our this weekend cloud native",
    "start": "2858000",
    "end": "2864480"
  },
  {
    "text": "go to edit mode we okay",
    "start": "2864480",
    "end": "2869960"
  },
  {
    "text": "shift",
    "start": "2880319",
    "end": "2883319"
  },
  {
    "text": "because we want to play along at home this will be the ab audit diamond",
    "start": "2906480",
    "end": "2912920"
  },
  {
    "text": "and this will be high deductive",
    "start": "2915680",
    "end": "2922760"
  },
  {
    "text": "over here grab the ammo",
    "start": "2929760",
    "end": "2936520"
  },
  {
    "text": "okay then",
    "start": "2948000",
    "end": "2954280"
  },
  {
    "text": "relative so and create cluster",
    "start": "2982839",
    "end": "2990558"
  },
  {
    "text": "where these files are located",
    "start": "2991359",
    "end": "2997559"
  },
  {
    "text": "equals",
    "start": "3007200",
    "end": "3010200"
  },
  {
    "text": "link okay that should get you to the place where we are and verify",
    "start": "3016720",
    "end": "3024599"
  },
  {
    "text": "right let's dig a little further down into the",
    "start": "3049760",
    "end": "3056240"
  },
  {
    "text": "rabbit hole so the next thing i want to do i'm going",
    "start": "3056240",
    "end": "3061440"
  },
  {
    "text": "to go back to this blog post because some of the work that was that was done here is already done",
    "start": "3061440",
    "end": "3069000"
  },
  {
    "text": "warns about the baseline upon security pin to be 122 of the policy untested sb",
    "start": "3073599",
    "end": "3081319"
  },
  {
    "text": "hmm",
    "start": "3090880",
    "end": "3093880"
  },
  {
    "text": "neat",
    "start": "3096640",
    "end": "3099640"
  },
  {
    "text": "all right so the way i'm interpreting this",
    "start": "3127920",
    "end": "3132720"
  },
  {
    "text": "when we go back to the documentation um remember we have a couple of different modes right we have a warning we have a",
    "start": "3135280",
    "end": "3140800"
  },
  {
    "text": "mode for baseline mode for restricted and the baseline is pretty permissive",
    "start": "3140800",
    "end": "3148640"
  },
  {
    "text": "and the restricted one is not quite as permissive so in restricted for example you can't run a container as root but in",
    "start": "3150240",
    "end": "3156880"
  },
  {
    "text": "the baseline one you're pretty okay with it",
    "start": "3156880",
    "end": "3160880"
  },
  {
    "text": "so this is a great example let's give this a try let's let's actually validate this in our configuration and see what this looks like from our slide and then",
    "start": "3164079",
    "end": "3170720"
  },
  {
    "text": "we can kind of play through like what that would look like so we'll do",
    "start": "3170720",
    "end": "3177200"
  },
  {
    "text": "um create ns",
    "start": "3177200",
    "end": "3183599"
  },
  {
    "text": "next test",
    "start": "3183599",
    "end": "3186559"
  },
  {
    "text": "do i have knits i look do all",
    "start": "3188640",
    "end": "3196160"
  },
  {
    "text": "the label or annotate people",
    "start": "3196800",
    "end": "3203000"
  },
  {
    "text": "let's go ahead and do that bit",
    "start": "3211440",
    "end": "3214880"
  },
  {
    "text": "baseline oh label",
    "start": "3218400",
    "end": "3224400"
  },
  {
    "text": "and we'll do warn",
    "start": "3233280",
    "end": "3237720"
  },
  {
    "text": "restricted i'll also do audit",
    "start": "3241920",
    "end": "3249400"
  },
  {
    "text": "these are the labels that i have specified on this namespace i've set the kubernetes to i o metadata name oh",
    "start": "3256960",
    "end": "3262480"
  },
  {
    "text": "that's actually already done for me but then pod security kubernetes.i o audit restricted pod security kubernetes io",
    "start": "3262480",
    "end": "3269520"
  },
  {
    "text": "enforce equals baseline and then bot security kubernetes io warn",
    "start": "3269520",
    "end": "3274640"
  },
  {
    "text": "equals restricted so now i should be able to get warnings i should be able to see that in my audit log and i should get user-facing warnings",
    "start": "3274640",
    "end": "3281280"
  },
  {
    "text": "about um manifests that don't line up with a reality but they should still allow the creation of a pod so if i were to do",
    "start": "3281280",
    "end": "3287760"
  },
  {
    "text": "cube pedal deployment i'm already in the nginx test namespace",
    "start": "3287760",
    "end": "3294160"
  },
  {
    "text": "but nginx image equals nginx stable",
    "start": "3294160",
    "end": "3299520"
  },
  {
    "text": "for replicas equals three port 80.",
    "start": "3299520",
    "end": "3307079"
  },
  {
    "text": "enter and i do see a warning a user facing warning would violate the latest version of the",
    "start": "3313359",
    "end": "3319920"
  },
  {
    "text": "restricted pod security policy allow privilege escalation is not equal to false",
    "start": "3319920",
    "end": "3325920"
  },
  {
    "text": "container nginx must set security context to allow privilege escalation equals false unrestricted capabilities",
    "start": "3325920",
    "end": "3333280"
  },
  {
    "text": "container nginx must set security context capabilities drop all",
    "start": "3333280",
    "end": "3339920"
  },
  {
    "text": "run as not root is not equal to true pod or container engine x must be set",
    "start": "3339920",
    "end": "3345359"
  },
  {
    "text": "must set security context run at that route the second profile must also be defined",
    "start": "3345359",
    "end": "3351359"
  },
  {
    "text": "runtime default or localhost",
    "start": "3351359",
    "end": "3356000"
  },
  {
    "text": "that's pretty cool i mean i think that's actually pretty useful for like the developer side of things like you'd be able to see that in your log if you were",
    "start": "3356400",
    "end": "3363359"
  },
  {
    "text": "doing something like a um a mechanism by which you were deploying automatically using ci or something like that then",
    "start": "3363359",
    "end": "3369520"
  },
  {
    "text": "this mechanism would actually probably surface in your logs and you'd be able to see it neat",
    "start": "3369520",
    "end": "3375680"
  },
  {
    "text": "i also want to see the audit log and see if we see that same output or what the audit event looks like so let's jump in",
    "start": "3375680",
    "end": "3381680"
  },
  {
    "text": "and see so let's do docker",
    "start": "3381680",
    "end": "3387119"
  },
  {
    "text": "exec ti oh wow this is actually not going to deploy",
    "start": "3387119",
    "end": "3393359"
  },
  {
    "text": "i just noticed a typo whoops well it doesn't really matter too much we",
    "start": "3393359",
    "end": "3399359"
  },
  {
    "text": "should still be able to see the event because this is an admission not in time so that it doesn't deploy almost beside",
    "start": "3399359",
    "end": "3405440"
  },
  {
    "text": "the point so kind propane",
    "start": "3405440",
    "end": "3410640"
  },
  {
    "text": "nginx",
    "start": "3413280",
    "end": "3416280"
  },
  {
    "text": "audit log",
    "start": "3420799",
    "end": "3425000"
  },
  {
    "text": "this",
    "start": "3439119",
    "end": "3442119"
  },
  {
    "text": "i'm gonna actually get this to take you",
    "start": "3476000",
    "end": "3480599"
  },
  {
    "text": "here we go",
    "start": "3509440",
    "end": "3512680"
  },
  {
    "text": "so this is neat yeah that's exactly what i was looking for okay so actually that last match gives me kind of what i'm",
    "start": "3520400",
    "end": "3526799"
  },
  {
    "text": "looking for so this is the event for",
    "start": "3526799",
    "end": "3532160"
  },
  {
    "text": "right here",
    "start": "3538960",
    "end": "3542200"
  },
  {
    "text": "so authorization that case the i o decision was to allow",
    "start": "3552319",
    "end": "3557440"
  },
  {
    "text": "the reason was that there was nothing that blocked it pod security",
    "start": "3557440",
    "end": "3562880"
  },
  {
    "text": "kubernetes i o slash audit allow privilege escalation so this is annotating",
    "start": "3562880",
    "end": "3569040"
  },
  {
    "text": "this piece of it and it basically gives us the same",
    "start": "3569040",
    "end": "3574720"
  },
  {
    "text": "output that we saw before so that's actually pretty cool but let's look at this",
    "start": "3574720",
    "end": "3580960"
  },
  {
    "text": "entire event so we can see kind of like what this looks like so here's the response object for this",
    "start": "3580960",
    "end": "3587200"
  },
  {
    "text": "deployment right this is coming from the api server being and it is a response to whatever the",
    "start": "3587200",
    "end": "3593760"
  },
  {
    "text": "command line client is that created this object right it's a kind deployment appsv1 so this is",
    "start": "3593760",
    "end": "3599839"
  },
  {
    "text": "in line with what we saw previously in the documentation where now we can actually warn you about the object as it",
    "start": "3599839",
    "end": "3606640"
  },
  {
    "text": "is created as part of a deployment we don't have to necessarily wait for the pod object to get created and this is",
    "start": "3606640",
    "end": "3612240"
  },
  {
    "text": "different than the way pod security policies worked pod security policies only take effect and only manipulate",
    "start": "3612240",
    "end": "3618400"
  },
  {
    "text": "pods themselves so you could very easily end up in a state with pod security policies where",
    "start": "3618400",
    "end": "3624160"
  },
  {
    "text": "you just wouldn't see pods deploying but the deployment object would be accepted by the cluster and so that was kind of",
    "start": "3624160",
    "end": "3629839"
  },
  {
    "text": "leading to a state where sometimes it was hard to actually debug or understand what was actually happening in the life cycle of that deployment because of the",
    "start": "3629839",
    "end": "3636079"
  },
  {
    "text": "way that it would be manipulated because of the way it would materialize inside of plot security policies so you're like",
    "start": "3636079",
    "end": "3641440"
  },
  {
    "text": "your flow would be you know you already have a pod security policy defined inside of your cluster",
    "start": "3641440",
    "end": "3646640"
  },
  {
    "text": "your user or whatever mechanism you're using to deploy inside of the cluster that would create those pod objects has",
    "start": "3646640",
    "end": "3652160"
  },
  {
    "text": "access to that pod security policy if the decision that that pod security",
    "start": "3652160",
    "end": "3657359"
  },
  {
    "text": "policy would enforce is to deny the admittance of that pod then what happens is that the pod itself just will never",
    "start": "3657359",
    "end": "3663920"
  },
  {
    "text": "be scheduled it will it will never show up as a pod object inside of the ncd because the object was denied",
    "start": "3663920",
    "end": "3671200"
  },
  {
    "text": "but you would still get the replica set you would still get a deployment object those things would be created and they would be allowed in because they're not",
    "start": "3671200",
    "end": "3676880"
  },
  {
    "text": "part of the way that pod security policy would enforce admission pod security policy would only enforce",
    "start": "3676880",
    "end": "3683520"
  },
  {
    "text": "the pod object itself in this case though with pod security admission",
    "start": "3683520",
    "end": "3689280"
  },
  {
    "text": "this is a different that's the new version stuff right the new stuff actually can evaluate the deployment",
    "start": "3689280",
    "end": "3694720"
  },
  {
    "text": "object itself and it can actually look at that object and give you feedback based on that",
    "start": "3694720",
    "end": "3700160"
  },
  {
    "text": "information right so this is the manager for this was cube kettle create we just saw that here's some information about what was",
    "start": "3700160",
    "end": "3707280"
  },
  {
    "text": "being known what's known about it the information basically that is evaluating against",
    "start": "3707280",
    "end": "3713119"
  },
  {
    "text": "there's going to be three replicas this is what's in the configuration we can still see our typo here whatevs",
    "start": "3713119",
    "end": "3720559"
  },
  {
    "text": "right and then we can see that this object was annotated",
    "start": "3720559",
    "end": "3726400"
  },
  {
    "text": "authorization cage the i o decision is allow and then here is the pod security audit",
    "start": "3726400",
    "end": "3733119"
  },
  {
    "text": "annotation now i don't think that the",
    "start": "3733119",
    "end": "3740680"
  },
  {
    "text": "the nginx object is annotated with the same information",
    "start": "3745920",
    "end": "3752799"
  },
  {
    "text": "and we can see that it is not so there's no annotation in the object",
    "start": "3752799",
    "end": "3758240"
  },
  {
    "text": "itself with this information that's just annotated to the event",
    "start": "3758240",
    "end": "3763440"
  },
  {
    "text": "we can see of course that's the image pull back off right because that did not work",
    "start": "3765680",
    "end": "3772279"
  },
  {
    "text": "you",
    "start": "3795839",
    "end": "3797920"
  },
  {
    "text": "there we go so is that in there",
    "start": "3815359",
    "end": "3821038"
  },
  {
    "text": "people",
    "start": "3822240",
    "end": "3825240"
  },
  {
    "text": "what this does is it actually just as a quick hack will change the image",
    "start": "3835680",
    "end": "3841119"
  },
  {
    "text": "use nginx stable instead of nginx and now i should be able to see those things deploying",
    "start": "3841119",
    "end": "3848760"
  },
  {
    "text": "the kettle set basically just gives me the ability to set particular things about a deployment or a daemon set or",
    "start": "3852559",
    "end": "3857599"
  },
  {
    "text": "what have you and the interesting thing was even though that was being set we still saw the same would violate latest version of",
    "start": "3857599",
    "end": "3864559"
  },
  {
    "text": "restricted and that is being configured by by what's configured at the name space level so we have things working we're",
    "start": "3864559",
    "end": "3872000"
  },
  {
    "text": "able to see the audit events we're able to see the user space feedback we're not getting any feedback on the object",
    "start": "3872000",
    "end": "3878480"
  },
  {
    "text": "itself which i think is kind of interesting",
    "start": "3878480",
    "end": "3881839"
  },
  {
    "text": "all right it's validating i don't think you'll be",
    "start": "3895280",
    "end": "3901680"
  },
  {
    "text": "able to see it here yeah because the trigger is the code",
    "start": "3901680",
    "end": "3908119"
  },
  {
    "text": "so that is a start let's go back to our",
    "start": "3911760",
    "end": "3918720"
  },
  {
    "text": "box here so we've got auditing working",
    "start": "3918720",
    "end": "3926319"
  },
  {
    "text": "we're able to see the event which is pretty cool so there were some questions that were brought to me um by rw",
    "start": "3926319",
    "end": "3936200"
  },
  {
    "text": "this might be you russ that you russ or is that somebody else",
    "start": "3936559",
    "end": "3941520"
  },
  {
    "text": "so it'd be interesting to see applying policy on top of existing pods and see what it does once",
    "start": "3943440",
    "end": "3948880"
  },
  {
    "text": "an old non-compliant pod restarts it might not come back up thus up down",
    "start": "3948880",
    "end": "3954319"
  },
  {
    "text": "that's true if you're in a restricted mode then it would break things although deprecated pod security",
    "start": "3954319",
    "end": "3959920"
  },
  {
    "text": "policies are still are still supported through 1.25 how badly can you break a cluster with both enabled i think",
    "start": "3959920",
    "end": "3966480"
  },
  {
    "text": "that that would be fun to play with i'm not sure if that's going to be in scope this time but i imagine that",
    "start": "3966480",
    "end": "3973280"
  },
  {
    "text": "because now pod security policies sorry pod security admission will be enforced",
    "start": "3973280",
    "end": "3978400"
  },
  {
    "text": "or will be evaluated before pod security policies um and so the way that you would break",
    "start": "3978400",
    "end": "3984240"
  },
  {
    "text": "things it's probably likely that the box eraser blade is going to be in pod security policies not in pod security",
    "start": "3984240",
    "end": "3989520"
  },
  {
    "text": "admission and the reason i say that is because pod security admission it's only",
    "start": "3989520",
    "end": "3995280"
  },
  {
    "text": "validating it's only looking at only validating the specs and making a decision whether to allow or deny based",
    "start": "3995280",
    "end": "4002559"
  },
  {
    "text": "on its evaluation and against the policies that you've defined um whereas pot security policies do",
    "start": "4002559",
    "end": "4009359"
  },
  {
    "text": "quite a lot quite a lot other of other stuff like they might also do things like enforce",
    "start": "4009359",
    "end": "4015440"
  },
  {
    "text": "the configuration of things or mutate the pod spec itself so likely you're more likely i would say",
    "start": "4015440",
    "end": "4022559"
  },
  {
    "text": "that you're more likely to run into trouble with pod security policies than you are with pod security admission because pod security admission is either",
    "start": "4022559",
    "end": "4028880"
  },
  {
    "text": "going to allow or deny and pod security policies are going to be the thing that mutate and change or enforce the change in configuration",
    "start": "4028880",
    "end": "4035760"
  },
  {
    "text": "that's the way i understand it but i want to see one of my one of my explorations of this effort was to see",
    "start": "4035760",
    "end": "4043039"
  },
  {
    "text": "are we doing any any any sort of mutating and i don't think that is the case",
    "start": "4043039",
    "end": "4048640"
  },
  {
    "text": "do duplicates of mode cause an error or is the last one declared or maybe first",
    "start": "4048640",
    "end": "4055038"
  },
  {
    "text": "so [Music] in our example here",
    "start": "4055280",
    "end": "4059920"
  },
  {
    "text": "we could all get ns",
    "start": "4060319",
    "end": "4064240"
  },
  {
    "text": "test show labels so in this case",
    "start": "4065440",
    "end": "4072400"
  },
  {
    "text": "the mode is somewhat duplicated i don't think that we can create two labels with this with a different value",
    "start": "4074880",
    "end": "4081760"
  },
  {
    "text": "so i couldn't do like pod security kubernetes i o audit equals warn but let's try it",
    "start": "4081760",
    "end": "4090680"
  },
  {
    "text": "kettle label ns infinix",
    "start": "4091920",
    "end": "4097559"
  },
  {
    "text": "yeah there's already a value we can't really do it but we can",
    "start": "4107759",
    "end": "4113278"
  },
  {
    "text": "overwrite it so if i wanted to change the key if i wanted to change the value of this one key",
    "start": "4113279",
    "end": "4118480"
  },
  {
    "text": "then i would have to actually i would have to i would have to change",
    "start": "4118480",
    "end": "4124560"
  },
  {
    "text": "the value of it and another question would be can i pass multiple options to audit right like could i pass restricted",
    "start": "4124560",
    "end": "4130318"
  },
  {
    "text": "and baseline i don't know if that would be a valid configuration either but it might be",
    "start": "4130319",
    "end": "4136560"
  },
  {
    "text": "kind of fun to see",
    "start": "4136560",
    "end": "4140440"
  },
  {
    "text": "nope",
    "start": "4156319",
    "end": "4159318"
  },
  {
    "text": "it doesn't take a comment of that i'm gonna delete a list of things",
    "start": "4174000",
    "end": "4179040"
  },
  {
    "text": "all right so i think that would not i don't think",
    "start": "4182319",
    "end": "4188238"
  },
  {
    "text": "that would work so two duplicates of a mode so i assume pod security is cluster-wide",
    "start": "4188239",
    "end": "4194480"
  },
  {
    "text": "so you couldn't have different rules per node so this is admission and it happens at",
    "start": "4194480",
    "end": "4200560"
  },
  {
    "text": "admission on objects like deployment or daemon sets or pods or those sorts of things",
    "start": "4200560",
    "end": "4207760"
  },
  {
    "text": "and because it's admission it doesn't actually matter the rules would not apply differently on different nodes",
    "start": "4208480",
    "end": "4214800"
  },
  {
    "text": "they would apply differently on different name spaces and you can actually also have sets of exceptions around things like what user is creating",
    "start": "4214800",
    "end": "4221199"
  },
  {
    "text": "an object like you can actually and this is actually one of the things i wanted to explore next was",
    "start": "4221199",
    "end": "4226719"
  },
  {
    "text": "some of the exceptions because you can make it so that like a given user has the ability to",
    "start": "4226719",
    "end": "4231840"
  },
  {
    "text": "deploy a pod that is of a particular enforced set and a particular",
    "start": "4231840",
    "end": "4237280"
  },
  {
    "text": "in a particular name space you can like overwrite it but how the nodes",
    "start": "4237280",
    "end": "4243280"
  },
  {
    "text": "cri what or how the node would enforce it would be would be the same",
    "start": "4243280",
    "end": "4248800"
  },
  {
    "text": "regardless of the node i think because it's all happening kind of at the admission layer",
    "start": "4248800",
    "end": "4255800"
  },
  {
    "text": "yay i'm glad that's you i think you'd only pass me yeah exactly",
    "start": "4258960",
    "end": "4265440"
  },
  {
    "text": "i think that's right that's what i thought too",
    "start": "4265440",
    "end": "4270640"
  },
  {
    "text": "all right if i understand it right big if there are only three built-in policies that's",
    "start": "4270880",
    "end": "4277199"
  },
  {
    "text": "right and they can't be changed also true privilege baseline and restricted is there any way to add your own or the",
    "start": "4277199",
    "end": "4283360"
  },
  {
    "text": "too soon and that's why there are links to other projects yeah so the way this is shaken out over time",
    "start": "4283360",
    "end": "4290080"
  },
  {
    "text": "is this um initially",
    "start": "4290080",
    "end": "4295920"
  },
  {
    "text": "the concern was the reason there's even a pot security admission piece",
    "start": "4295920",
    "end": "4301040"
  },
  {
    "text": "is that the api for pod security policies has grown somewhat out of bounds right like",
    "start": "4301040",
    "end": "4307520"
  },
  {
    "text": "there's just so many things you can configure and and it's not it's kind of difficult to configure it kind of",
    "start": "4307520",
    "end": "4312880"
  },
  {
    "text": "difficult to to test it and so it became a thing where we're trying where it",
    "start": "4312880",
    "end": "4318400"
  },
  {
    "text": "became very difficult to actually manage the api's growth over time",
    "start": "4318400",
    "end": "4325198"
  },
  {
    "text": "so that led to the deprecation of pod security policies however",
    "start": "4326000",
    "end": "4332800"
  },
  {
    "text": "um liggett stepped up and our jordan liga had stepped up and he said you know what maybe we could",
    "start": "4332800",
    "end": "4338800"
  },
  {
    "text": "just make a much simpler a much more simplified api for what is happening here wherein you might have like the",
    "start": "4338800",
    "end": "4345120"
  },
  {
    "text": "three major models that people use privileged baseline and restricted",
    "start": "4345120",
    "end": "4350560"
  },
  {
    "text": "and those are following the best practices that we define in the pod security",
    "start": "4350560",
    "end": "4355679"
  },
  {
    "text": "in the pod security document and that you would be able to then just apply those things to given namespaces",
    "start": "4355679",
    "end": "4362480"
  },
  {
    "text": "and get information back to users that say this is not going to work in a restricted mode or this is not going to work in a privileged mode or what have",
    "start": "4362480",
    "end": "4368800"
  },
  {
    "text": "you and give them a feedback loop that way but just create a much simpler api that",
    "start": "4368800",
    "end": "4374719"
  },
  {
    "text": "only fits a specific set of use cases and if people need more than that then they can actually define that more than",
    "start": "4374719",
    "end": "4380480"
  },
  {
    "text": "that in opa gatekeeper keyboard and caverno etc",
    "start": "4380480",
    "end": "4385840"
  },
  {
    "text": "and i honestly think that's the right move right i feel like we have to have something in place for the project",
    "start": "4387360",
    "end": "4393600"
  },
  {
    "text": "itself and that that something that is in place for the project itself should follow the best practices that we're",
    "start": "4393600",
    "end": "4399040"
  },
  {
    "text": "describing as a project for how to secure pods and containers inside of your kubernetes cluster",
    "start": "4399040",
    "end": "4405280"
  },
  {
    "text": "but to provide like the entire configurable surface that pod security policies provided was",
    "start": "4405280",
    "end": "4411360"
  },
  {
    "text": "was arguably like too much it was arguably too difficult to actually maintain over time and so i think honestly this is probably",
    "start": "4411360",
    "end": "4417840"
  },
  {
    "text": "the right decision so that's why there are only the three",
    "start": "4417840",
    "end": "4423920"
  },
  {
    "text": "and why they're not mutable why you can't change them um and i don't i don't suspect that",
    "start": "4423920",
    "end": "4430640"
  },
  {
    "text": "they'll be changeable in the future but i guess we'll see how that evolves over time so other than getting the feature flag",
    "start": "4430640",
    "end": "4436000"
  },
  {
    "text": "enabled should this pod security policy admission mechanism work on cloud providers like gke qks aks once they",
    "start": "4436000",
    "end": "4442800"
  },
  {
    "text": "upgrade their services to offer kubernetes version that is compatible i believe that is the case",
    "start": "4442800",
    "end": "4448080"
  },
  {
    "text": "yeah it should just work the way this would evaluate like i mean",
    "start": "4448080",
    "end": "4453760"
  },
  {
    "text": "i imagine once it becomes default",
    "start": "4453760",
    "end": "4457360"
  },
  {
    "text": "it might be kind of interesting to understand how the how the mic how the um graduation plan would work right so if",
    "start": "4459920",
    "end": "4465360"
  },
  {
    "text": "you if we go back to our notes let me go back to that um",
    "start": "4465360",
    "end": "4471679"
  },
  {
    "text": "that cap 2 5 7 9 or what have you",
    "start": "4471679",
    "end": "4477800"
  },
  {
    "text": "uh",
    "start": "4501920",
    "end": "4504920"
  },
  {
    "text": "hmm",
    "start": "4520560",
    "end": "4523560"
  },
  {
    "text": "oh neat there's a pod security evaluations metric on the api server",
    "start": "4526239",
    "end": "4531760"
  },
  {
    "text": "oh that's cool but it's actually broke well okay let's just go look at that real quick we're going to take a quick sideline and because we already have",
    "start": "4537120",
    "end": "4543440"
  },
  {
    "text": "like some that we have been allowed we're just going to look at like some of the metrics that are exposed here so",
    "start": "4543440",
    "end": "4549760"
  },
  {
    "text": "let's just look at that real quick so you can all get raw",
    "start": "4549760",
    "end": "4555678"
  },
  {
    "text": "raw matrix",
    "start": "4556159",
    "end": "4561320"
  },
  {
    "text": "i'm going to look at the metrics",
    "start": "4573840",
    "end": "4577480"
  },
  {
    "text": "i looked down metrics name wrong pod security evaluations should be there",
    "start": "4581360",
    "end": "4591158"
  },
  {
    "text": "security policies",
    "start": "4602560",
    "end": "4606040"
  },
  {
    "text": "that maybe the metrics aren't quite implemented yet because i don't see them here",
    "start": "4608080",
    "end": "4614760"
  },
  {
    "text": "it doesn't look like the metrics are in place yet unfortunately",
    "start": "4623760",
    "end": "4629199"
  },
  {
    "text": "you know one of my other commands one of my other favorite commands in this i'll just share with you because i i always thought this was a super interesting one",
    "start": "4629600",
    "end": "4637679"
  },
  {
    "text": "the object",
    "start": "4637679",
    "end": "4641040"
  },
  {
    "text": "one of my big takeaway commands from the raw metrics so i only have the one api server and what i'm doing here",
    "start": "4643040",
    "end": "4649199"
  },
  {
    "text": "is i'm querying the metrics endpoint on that api server using cube kettle so i'm doing cube kettle get dash dash raw",
    "start": "4649199",
    "end": "4656080"
  },
  {
    "text": "which tells which which means that i'm just going to make like a raw get",
    "start": "4656080",
    "end": "4661280"
  },
  {
    "text": "against the kubernetes api at a path",
    "start": "4661280",
    "end": "4666559"
  },
  {
    "text": "and i know that the slash metrics um path is just hanging right off of the",
    "start": "4667120",
    "end": "4672239"
  },
  {
    "text": "root directory inside of the kubernetes restful api so if i can do cube kettle get dash raw metrics and i'll be able to",
    "start": "4672239",
    "end": "4679280"
  },
  {
    "text": "see those metrics that are relevant for this api server that i'm connected to if you have multiple api servers you're",
    "start": "4679280",
    "end": "4685280"
  },
  {
    "text": "going to see multiple different outcomes because each api server is its own entity and they might have they might",
    "start": "4685280",
    "end": "4691199"
  },
  {
    "text": "have different outcomes for some of these values now likely they'll all agree on this one but it's still an interesting argument if",
    "start": "4691199",
    "end": "4698080"
  },
  {
    "text": "you're if you're talking to a load balancer that talks to multiple api servers you're likely to see multiple api servers for sure",
    "start": "4698080",
    "end": "4706080"
  },
  {
    "text": "however this is one of them in my opinion one of the most interesting metrics that we expose at the api server",
    "start": "4706080",
    "end": "4713679"
  },
  {
    "text": "and what it is is it's the scdap object std object counts and you can see",
    "start": "4713679",
    "end": "4719360"
  },
  {
    "text": "like what those actual objects object counts are inside of the kubernetes cluster",
    "start": "4719360",
    "end": "4725040"
  },
  {
    "text": "so you can see there are 43 tickets secrets defined there are 42 service accounts",
    "start": "4725040",
    "end": "4731040"
  },
  {
    "text": "there are two services there's zero stateful sets one storage class i mean you can see",
    "start": "4731040",
    "end": "4737679"
  },
  {
    "text": "like all of these different objects and one of the ones that's really interesting is this one right so here are there are 107 events currently",
    "start": "4737679",
    "end": "4744880"
  },
  {
    "text": "stored in etcd if i do cube kettle delete",
    "start": "4744880",
    "end": "4750080"
  },
  {
    "text": "since",
    "start": "4750080",
    "end": "4752400"
  },
  {
    "text": "i'm cooking all the events put them all away",
    "start": "4756080",
    "end": "4761159"
  },
  {
    "text": "do that same [Music] object again and i look for events",
    "start": "4762239",
    "end": "4768239"
  },
  {
    "text": "still waiting for it to converge",
    "start": "4769199",
    "end": "4773000"
  },
  {
    "text": "oh maybe it's because of compaction maybe it's because of the cash interesting stuff",
    "start": "4797679",
    "end": "4804400"
  },
  {
    "text": "i would have expected that to update by now interesting",
    "start": "4804400",
    "end": "4812040"
  },
  {
    "text": "echoes",
    "start": "4813120",
    "end": "4816120"
  },
  {
    "text": "exported metric to change",
    "start": "4825520",
    "end": "4829560"
  },
  {
    "text": "but yeah i mean what this can tell you this this can actually show you like",
    "start": "4837440",
    "end": "4842880"
  },
  {
    "text": "where things are likely to go sideways soon right so you can do things like monitor the number of namespaces monitor",
    "start": "4842880",
    "end": "4848320"
  },
  {
    "text": "the number of nodes monitor the number of pods the number of events that are currently stored all of those things and you can",
    "start": "4848320",
    "end": "4854239"
  },
  {
    "text": "kind of see where your problem is and so if you're seeing experience if you're experiencing a problem like you know my kubernetes cluster is really slow and i",
    "start": "4854239",
    "end": "4861280"
  },
  {
    "text": "want to understand like what's where it's spending its time one one way to see that is this information",
    "start": "4861280",
    "end": "4867040"
  },
  {
    "text": "here right and then there's also",
    "start": "4867040",
    "end": "4871920"
  },
  {
    "text": "uh",
    "start": "4872719",
    "end": "4875719"
  },
  {
    "text": "rest client request duration request latency in seconds broken down by verb and url",
    "start": "4897199",
    "end": "4904760"
  },
  {
    "text": "here's another example these are",
    "start": "4940239",
    "end": "4945280"
  },
  {
    "text": "calls to the api's scheduling cades the io piece and then i think this is neat because it's a um",
    "start": "4945280",
    "end": "4953760"
  },
  {
    "text": "it's bucketed right so you have the value you have values broken up by category so what we're looking at here",
    "start": "4953760",
    "end": "4959280"
  },
  {
    "text": "is a prometheus histogram",
    "start": "4959280",
    "end": "4964079"
  },
  {
    "text": "and for that bucket they're broken that means that the the value of how long a particular call",
    "start": "4965840",
    "end": "4971600"
  },
  {
    "text": "is taking is broken up by uh buckets so we have .01 seconds two seconds four",
    "start": "4971600",
    "end": "4977199"
  },
  {
    "text": "eight sixteen thirty two sixty four one twenty eight two six five twelve and when you're evaluating this what",
    "start": "4977199",
    "end": "4983840"
  },
  {
    "text": "you're looking for is where the event is showing up in the set of buckets that you have right so if you're looking at",
    "start": "4983840",
    "end": "4989120"
  },
  {
    "text": "the histogram it's going to say in this particular query all of the queries are being resolved in",
    "start": "4989120",
    "end": "4995199"
  },
  {
    "text": "about the 0.064 bucket for resolution it means they're not taking 128",
    "start": "4995199",
    "end": "5000880"
  },
  {
    "text": "and they're not happening any faster than that so if we look for like something that actually has a little bit a few more requests we might be able to",
    "start": "5000880",
    "end": "5007600"
  },
  {
    "text": "see some more interesting outcome here we go",
    "start": "5007600",
    "end": "5013559"
  },
  {
    "text": "here's another one so getting the namespace getting the",
    "start": "5014800",
    "end": "5020639"
  },
  {
    "text": "namespaces of the cluster there have been seven requests to get",
    "start": "5020639",
    "end": "5026800"
  },
  {
    "text": "that information three of them were responded to within",
    "start": "5026800",
    "end": "5032400"
  },
  {
    "text": "point zero zero two three more were responded to within the point zero zero four time frame and one",
    "start": "5032400",
    "end": "5039199"
  },
  {
    "text": "of them was responded in the point zero zero eight time frame and so if somebody were to say that cube",
    "start": "5039199",
    "end": "5044480"
  },
  {
    "text": "kid will get name spaces is taking a long time then we would start seeing things we would start seeing things",
    "start": "5044480",
    "end": "5049920"
  },
  {
    "text": "graph up to like a maybe a half a second or longer",
    "start": "5049920",
    "end": "5055080"
  },
  {
    "text": "yeah that's reading all the types from scd that the api server cares about not i mean there may be other stuff in ncd",
    "start": "5057040",
    "end": "5063280"
  },
  {
    "text": "that if the api server doesn't care about but it's about the objects that it's the lcd itself considers that it's",
    "start": "5063280",
    "end": "5068800"
  },
  {
    "text": "in that it manages right and so",
    "start": "5068800",
    "end": "5074320"
  },
  {
    "text": "it doesn't store the metrics key in a city i believe it's actually what's happening is that the metrics",
    "start": "5081360",
    "end": "5086800"
  },
  {
    "text": "code inside of the api server is evaluating the number of objects inside the cluster as part of a metric that it",
    "start": "5086800",
    "end": "5092239"
  },
  {
    "text": "exposes over a period of time and i suspect that it doesn't constantly pull that to get that metric it's just",
    "start": "5092239",
    "end": "5097920"
  },
  {
    "text": "updating that that metric on a scheduled period of time and that's where that was actually happening because otherwise it",
    "start": "5097920",
    "end": "5103120"
  },
  {
    "text": "would probably greatly increase the load on the api server if every time somebody hit the metrics endpoint it had to evaluate all",
    "start": "5103120",
    "end": "5109920"
  },
  {
    "text": "the metrics that would take too long so likely what would happen is what happens instead is that it just evaluates that",
    "start": "5109920",
    "end": "5115600"
  },
  {
    "text": "value um and then stores it as a response for anybody hitting the metrics api endpoint",
    "start": "5115600",
    "end": "5121440"
  },
  {
    "text": "for a period of time and then once that period of time expires and it goes back and reevaluates and updates the values",
    "start": "5121440",
    "end": "5127520"
  },
  {
    "text": "next time you scrape you're going to get a different value but i i suspect that's actually how that's working",
    "start": "5127520",
    "end": "5134800"
  },
  {
    "text": "all right so that doesn't work yet unfortunately that's not implemented",
    "start": "5136960",
    "end": "5143520"
  },
  {
    "text": "what are reasonable slos dependencies scalability",
    "start": "5143920",
    "end": "5151158"
  },
  {
    "text": "oh hey how does this feature react if the",
    "start": "5163440",
    "end": "5169360"
  },
  {
    "text": "api server and or scd is unavailable so because the admission is happening effectively at",
    "start": "5169360",
    "end": "5175760"
  },
  {
    "text": "the api server if the api server isn't available it would not work",
    "start": "5175760",
    "end": "5181560"
  },
  {
    "text": "oh yeah because it's a label maybe we could actually manipulate it differently so let's see what happens if we did that",
    "start": "5207600",
    "end": "5213440"
  },
  {
    "text": "so if i were to do cube kettle label",
    "start": "5213440",
    "end": "5221080"
  },
  {
    "text": "i think i'm getting a kind of a confusing error what if i change this to baseline",
    "start": "5279760",
    "end": "5287040"
  },
  {
    "text": "oh that's cool",
    "start": "5290000",
    "end": "5293560"
  },
  {
    "text": "you're back you're restricted",
    "start": "5296560",
    "end": "5299679"
  },
  {
    "text": "beat okay well this is in my opinion this is a bug",
    "start": "5302800",
    "end": "5308678"
  },
  {
    "text": "because it's saying the name spaces nginx test is invalid but really what's invalid is the",
    "start": "5312320",
    "end": "5319920"
  },
  {
    "text": "value that i'm trying to set audit to",
    "start": "5319920",
    "end": "5323840"
  },
  {
    "text": "so i'm going to open that as an issue because i feel like that's a problem",
    "start": "5332719",
    "end": "5340440"
  },
  {
    "text": "um",
    "start": "5356080",
    "end": "5359080"
  },
  {
    "text": "uh",
    "start": "5374480",
    "end": "5377480"
  },
  {
    "text": "all right so back to our questions make sure we got everything",
    "start": "5385520",
    "end": "5390800"
  },
  {
    "text": "we talked about that yep we talked about that other than getting yeah we talked about",
    "start": "5390800",
    "end": "5396639"
  },
  {
    "text": "that great yeah over this so i guess the last thing i wanted to cover was this piece here which i thought was actually pretty interesting so",
    "start": "5396639",
    "end": "5403199"
  },
  {
    "text": "pod security tests so this is a project that was built by",
    "start": "5403199",
    "end": "5409440"
  },
  {
    "text": "jim aguadia",
    "start": "5409440",
    "end": "5412480"
  },
  {
    "text": "contains test podials for each policy type defined in kubernetes pod security standards",
    "start": "5415840",
    "end": "5423199"
  },
  {
    "text": "so i thought we'd try this out because it looked like a pretty interesting way so or apply the baseline or restricted",
    "start": "5423280",
    "end": "5429360"
  },
  {
    "text": "demos by appending the appropriate folder name",
    "start": "5429360",
    "end": "5434198"
  },
  {
    "text": "so this is actually pretty interesting so i'd like to try this out and that'll probably be our day so let's",
    "start": "5493040",
    "end": "5499679"
  },
  {
    "text": "see actually where we are so it's 3 27 right now um",
    "start": "5499679",
    "end": "5506880"
  },
  {
    "text": "configure a policy instantiation for your cluster like security policies or policy engines like opa gatekeeper apply",
    "start": "5511280",
    "end": "5517120"
  },
  {
    "text": "the test channels apply baseline or restricted yamas by appending the appropriate folder name",
    "start": "5517120",
    "end": "5524239"
  },
  {
    "text": "check the created pods",
    "start": "5524239",
    "end": "5527960"
  },
  {
    "text": "all test spots have the following labels defined what policy baseline are restricted",
    "start": "5570800",
    "end": "5576320"
  },
  {
    "text": "and the control the value that identifies the security quote and control being tested you can view the pots for a policy level",
    "start": "5576320",
    "end": "5583360"
  },
  {
    "text": "what's this well let's try this out i mean i think i think it looks pretty interesting so let's do uh",
    "start": "5583360",
    "end": "5590719"
  },
  {
    "text": "copy",
    "start": "5594000",
    "end": "5597000"
  },
  {
    "text": "what i'm going to do is i'm going to create a new namespace",
    "start": "5605280",
    "end": "5609199"
  },
  {
    "text": "yes and restricted",
    "start": "5611280",
    "end": "5619198"
  },
  {
    "text": "then we'll do ks restricted",
    "start": "5621760",
    "end": "5626119"
  },
  {
    "text": "okay and we'll do i hope nice i do okay cool",
    "start": "5633520",
    "end": "5639198"
  },
  {
    "text": "so inside of here when i want to deploy this customize build",
    "start": "5640560",
    "end": "5646239"
  },
  {
    "text": "oh i know you can do by url",
    "start": "5646239",
    "end": "5650000"
  },
  {
    "text": "heck let's just do that that's a feature of customize i don't think i've ever used",
    "start": "5651679",
    "end": "5658678"
  },
  {
    "text": "this is not currently restricted so all of these pods should be created",
    "start": "5672639",
    "end": "5679159"
  },
  {
    "text": "morning",
    "start": "5694639",
    "end": "5697639"
  },
  {
    "text": "eat",
    "start": "5700880",
    "end": "5703280"
  },
  {
    "text": "that's really fun",
    "start": "5707840",
    "end": "5711320"
  },
  {
    "text": "hello i'm on a call right now so just for a few more minutes",
    "start": "5717040",
    "end": "5721760"
  },
  {
    "text": "uncovering some states that you may not have seen before right but it says ctl forbidden",
    "start": "5724800",
    "end": "5730719"
  },
  {
    "text": "some things are in blocked state",
    "start": "5731040",
    "end": "5734480"
  },
  {
    "text": "figure some are sitting in container creating still",
    "start": "5740480",
    "end": "5744960"
  },
  {
    "text": "that is cool let's do a cube kittle uh label",
    "start": "5746639",
    "end": "5754320"
  },
  {
    "text": "and",
    "start": "5754320",
    "end": "5757320"
  },
  {
    "text": "then control",
    "start": "5760639",
    "end": "5764440"
  },
  {
    "text": "three",
    "start": "5773440",
    "end": "5776440"
  },
  {
    "text": "of course",
    "start": "5799280",
    "end": "5801760"
  },
  {
    "text": "label dash in",
    "start": "5805600",
    "end": "5809960"
  },
  {
    "text": "restricted what happened the other questions that came up",
    "start": "5825679",
    "end": "5832840"
  },
  {
    "text": "thoughts i don't think it'll change anything but",
    "start": "5842880",
    "end": "5848719"
  },
  {
    "text": "you can all delete",
    "start": "5848719",
    "end": "5853320"
  },
  {
    "text": "i guess because these are all pod specs i won't be able to just restart them",
    "start": "5859360",
    "end": "5864400"
  },
  {
    "text": "i can tell there's pod specs because they're by name so if i were to do the same customized thing",
    "start": "5864400",
    "end": "5871480"
  },
  {
    "text": "okay",
    "start": "5900239",
    "end": "5903239"
  },
  {
    "text": "go now in theory we should see way fewer of these show up",
    "start": "5911199",
    "end": "5919560"
  },
  {
    "text": "let's see across the room",
    "start": "5928560",
    "end": "5932600"
  },
  {
    "text": "very few errors output which is surprising because we're in a restricted namespace now",
    "start": "5970320",
    "end": "5975679"
  },
  {
    "text": "oh because i don't have warnings turned on so probably a bunch of them just didn't show up",
    "start": "5975679",
    "end": "5981199"
  },
  {
    "text": "odds they all look like they're there",
    "start": "5981199",
    "end": "5989080"
  },
  {
    "text": "restricted",
    "start": "6002880",
    "end": "6005880"
  },
  {
    "text": "hmm",
    "start": "6009920",
    "end": "6012239"
  },
  {
    "text": "privilege running interesting",
    "start": "6017840",
    "end": "6025320"
  },
  {
    "text": "okay it was running out of that route and it's in policy restricted so that one should pass",
    "start": "6054960",
    "end": "6061800"
  },
  {
    "text": "i'm going to use a different label here let's put the label to warn so we can actually see the output of stuff again",
    "start": "6082800",
    "end": "6091000"
  },
  {
    "text": "all right i'm gonna do that build again",
    "start": "6099440",
    "end": "6106360"
  },
  {
    "text": "nope no outputs",
    "start": "6116960",
    "end": "6120600"
  },
  {
    "text": "interesting",
    "start": "6142800",
    "end": "6145800"
  },
  {
    "text": "output to um",
    "start": "6163840",
    "end": "6169520"
  },
  {
    "text": "bus here",
    "start": "6170080",
    "end": "6173400"
  },
  {
    "text": "oh so most of these containers are being built actually do match the restricted profile",
    "start": "6189040",
    "end": "6197480"
  },
  {
    "text": "so i guess these are all",
    "start": "6211760",
    "end": "6215559"
  },
  {
    "text": "here you're setting the override security context privilege true run is not written true",
    "start": "6221760",
    "end": "6231320"
  },
  {
    "text": "and we see the privilege container start up",
    "start": "6235679",
    "end": "6240119"
  },
  {
    "text": "well we may think more into this in the future yeah i hadn't seen i mean i have seen",
    "start": "6252480",
    "end": "6257920"
  },
  {
    "text": "cctl forbidden before because you're actually trying to manipulate a a ctl that isn't exposed by the api so by",
    "start": "6257920",
    "end": "6263840"
  },
  {
    "text": "the cubelet but yeah it's an interesting state all right well i think that's the end of",
    "start": "6263840",
    "end": "6270320"
  },
  {
    "text": "our broadcast today so i hope this was educational i hope i hope folks found it useful",
    "start": "6270320",
    "end": "6275360"
  },
  {
    "text": "i want to say thank you for tuning in and i'm really looking forward to",
    "start": "6275360",
    "end": "6281760"
  },
  {
    "text": "keep coming this year should be a really fun one one of the big things i can share with",
    "start": "6281760",
    "end": "6288239"
  },
  {
    "text": "you is that i will be co-hosting with mr dan pop from cystic i'll be co-hosting ebpf day at",
    "start": "6288239",
    "end": "6295440"
  },
  {
    "text": "cubecon which is a pre-show event so if you're going to be at kubecon or if you want to attend virtually definitely",
    "start": "6295440",
    "end": "6301360"
  },
  {
    "text": "check that out i'll be co-hosting that with dan pop and that'll be amazing so definitely check that out",
    "start": "6301360",
    "end": "6307040"
  },
  {
    "text": "um i hope you all have a great week and thank you for tuning in and i hope this was useful",
    "start": "6307040",
    "end": "6312800"
  },
  {
    "text": "and i'll see you all next time thank you",
    "start": "6312800",
    "end": "6317800"
  }
]