[
  {
    "text": "so thank you very much for coming I'm Rio de savada this talk is multi-cluster observability with service mesh and that",
    "start": "120",
    "end": "6660"
  },
  {
    "text": "is a lot of moving parts so before going to the details I want to go through some agenda which yeah shows",
    "start": "6660",
    "end": "13860"
  },
  {
    "text": "up so we'll start with the introduction about myself about upsider and about",
    "start": "13860",
    "end": "19199"
  },
  {
    "text": "this talk and what this talk is about and what this talk is not about and before going to so much details we",
    "start": "19199",
    "end": "25680"
  },
  {
    "text": "would also look at observability with service mesh what it looks like with standard setup which is just single",
    "start": "25680",
    "end": "31380"
  },
  {
    "text": "cluster and then we would go into a multi-classes setup and we would go into multi-classical",
    "start": "31380",
    "end": "37380"
  },
  {
    "text": "challenges before going to Quick reviews of each project that I will be using and",
    "start": "37380",
    "end": "42960"
  },
  {
    "text": "quick and then Solutions and demo and after the demo I'll have a bit of recap",
    "start": "42960",
    "end": "48980"
  },
  {
    "text": "alternatives to consider and other considerations that I couldn't touch in this in this talk",
    "start": "48980",
    "end": "56420"
  },
  {
    "text": "so firstly introduction of myself so I'm ryota I'm platform engineer at",
    "start": "56699",
    "end": "62100"
  },
  {
    "text": "upsider I'm passionate about learning and sharing all the things technology",
    "start": "62100",
    "end": "67500"
  },
  {
    "text": "it's a first time speaking in person in person event and it's a first time in person keep con for me it's",
    "start": "67500",
    "end": "74159"
  },
  {
    "text": "nerve-wracking as hell but hopefully things go okay um I have a son and two cats and you can",
    "start": "74159",
    "end": "80640"
  },
  {
    "text": "find me uh to roit swd which is my full name without vowel and you can find me in usual places",
    "start": "80640",
    "end": "87840"
  },
  {
    "text": "and about upside up briefly uh it's a fintech startup we are providing B2B Payment Solutions we are adopted by 15",
    "start": "87840",
    "end": "95640"
  },
  {
    "text": "000 plus companies the headquarter is based in Japan Tokyo Japan and the",
    "start": "95640",
    "end": "100860"
  },
  {
    "text": "business is mainly in Japan but the remote team is all around the world I myself am based in London we have a few",
    "start": "100860",
    "end": "106740"
  },
  {
    "text": "folks with us today here and we have been Cloud native end user from early",
    "start": "106740",
    "end": "111840"
  },
  {
    "text": "2019 and we use multi-cloud and multi-classes system for the production",
    "start": "111840",
    "end": "117600"
  },
  {
    "text": "setup so that's why I wanted to give this talk and we are hiring so if you wanted to know more about us about us",
    "start": "117600",
    "end": "123659"
  },
  {
    "text": "please come to me so about this talk so a little bit of prerequisites so I want you to at least",
    "start": "123659",
    "end": "130860"
  },
  {
    "text": "have a basic idea about observability what it is about okay it's about metrics traces logs and then service mesh what",
    "start": "130860",
    "end": "138060"
  },
  {
    "text": "service mesh can provide it provides traffic management security but this talk is about observability so the talk",
    "start": "138060",
    "end": "144780"
  },
  {
    "text": "is going to be mainly about observability metrics aspect and also service mesh in terms of observability",
    "start": "144780",
    "end": "153120"
  },
  {
    "text": "and this talk is about so I'm just going to talk about that service Financial behaviors and multi-cluster scenarios",
    "start": "153120",
    "end": "160140"
  },
  {
    "text": "observability challenges our learning at upsider",
    "start": "160140",
    "end": "165480"
  },
  {
    "text": "and it is a lot of moving parts and this talk is not about istio Deep",
    "start": "165480",
    "end": "170640"
  },
  {
    "text": "dive and it's not a Prometheus Deep dive either and there is no Silver Bullet",
    "start": "170640",
    "end": "177420"
  },
  {
    "text": "I had a couple questions that I wanted to ask after this slide or a few other slides before later who uses service",
    "start": "177420",
    "end": "183720"
  },
  {
    "text": "mesh or who has used service mesh in some way from testing okay that's great",
    "start": "183720",
    "end": "189120"
  },
  {
    "text": "um about like 50 who uses service mesh in production",
    "start": "189120",
    "end": "194340"
  },
  {
    "text": "oh like higher hands that's that's amazing but probably like 40 or so who",
    "start": "194340",
    "end": "199860"
  },
  {
    "text": "has multi-class environments it doesn't have to service much or like just multi-class environment quite a few I'm",
    "start": "199860",
    "end": "206040"
  },
  {
    "text": "not sure if I can give you anything new in this talk but um who uses istio",
    "start": "206040",
    "end": "213599"
  },
  {
    "text": "who doesn't use these Steel okay I'm really confused what the",
    "start": "213599",
    "end": "220560"
  },
  {
    "text": "audience is like it's like so many istio folks so many non-nissy folks but I hope I can",
    "start": "220560",
    "end": "225959"
  },
  {
    "text": "show the slide and tell you something about service mesh and observability but",
    "start": "225959",
    "end": "232940"
  },
  {
    "text": "what else I can talk about maybe a bit about myself a bit my about my company",
    "start": "233640",
    "end": "240360"
  },
  {
    "text": "um am I a cat did I hear that sorry",
    "start": "240360",
    "end": "247799"
  },
  {
    "text": "no about my cat no you know what you do you know sorry do you want to know more about my",
    "start": "247799",
    "end": "254700"
  },
  {
    "text": "cats my cats are seven year old I think six year old domestic British cats I",
    "start": "254700",
    "end": "261060"
  },
  {
    "text": "guess that's something that I'm very proud of I I have an Instagram for them it never is so",
    "start": "261060",
    "end": "268560"
  },
  {
    "text": "what can I talk about without a slide all right back to it so it's not a",
    "start": "268560",
    "end": "274139"
  },
  {
    "text": "silver bullet setup I want to just show one one solution or a few solution cases and it's about you know just",
    "start": "274139",
    "end": "281040"
  },
  {
    "text": "understanding what what challenges there would be and you can find I just created this",
    "start": "281040",
    "end": "286380"
  },
  {
    "text": "upholstery so I hope this is available but um the GitHub repository is my username ryt swd and capecon dash",
    "start": "286380",
    "end": "294180"
  },
  {
    "text": "eu-2023. so observability with service mesh",
    "start": "294180",
    "end": "300419"
  },
  {
    "text": "so standard setup is that just one cluster with service mesh but",
    "start": "300419",
    "end": "306479"
  },
  {
    "text": "what does observability really look like so we would focus on a single cluster first",
    "start": "306479",
    "end": "312300"
  },
  {
    "text": "and we would deploy istion Prometheus visualize connections and see how it",
    "start": "312300",
    "end": "318900"
  },
  {
    "text": "really looks like so let's see how deploying is your control plane looks like so looking at the cluster one at",
    "start": "318900",
    "end": "325259"
  },
  {
    "text": "the bottom you can see that there are only three application containers and with istio control plane you can see",
    "start": "325259",
    "end": "331560"
  },
  {
    "text": "that it's your side car is injected you might have to restart a few things but that's the idea",
    "start": "331560",
    "end": "337560"
  },
  {
    "text": "and istio control plane then connects to sidecars and sidecar will get routing",
    "start": "337560",
    "end": "343560"
  },
  {
    "text": "details cut credentials and metrics and with that",
    "start": "343560",
    "end": "348600"
  },
  {
    "text": "data plane is the control plane sorry there you go is your data plane can connect to each",
    "start": "348600",
    "end": "355080"
  },
  {
    "text": "other so that's the white lines here that is your sidecars are connected to",
    "start": "355080",
    "end": "360360"
  },
  {
    "text": "each other so they can finally talk to each other and also have the metrics and let's see how deploying metrics",
    "start": "360360",
    "end": "367199"
  },
  {
    "text": "looks uh deploying Prometheus looks like the following promises would have istio",
    "start": "367199",
    "end": "372419"
  },
  {
    "text": "sidecar injected in this case and how does it look like with the Prometheus retrieving metrics from each",
    "start": "372419",
    "end": "379880"
  },
  {
    "text": "istio sidecar or Amboy Amboy Sidecar so the orange lines are added and you",
    "start": "379880",
    "end": "386340"
  },
  {
    "text": "can see that it's quite a bit happening in the in the diagram",
    "start": "386340",
    "end": "391380"
  },
  {
    "text": "and also just let's add Ingress Gateway and Ingress Gateway it doesn't have to be multi-cluster related but it can be",
    "start": "391380",
    "end": "398160"
  },
  {
    "text": "just Ingress out from outside the cluster and if you add that it's quite a bit of a moving Parts isn't",
    "start": "398160",
    "end": "404460"
  },
  {
    "text": "it so let's get into multi-class scenario a little bit more so let's add another",
    "start": "404460",
    "end": "410340"
  },
  {
    "text": "cluster and deploy separate isteon Prometheus so this is only one pattern out of many",
    "start": "410340",
    "end": "417300"
  },
  {
    "text": "and it's it's not definitely not the silver blood solution but why do we do it we have the the",
    "start": "417300",
    "end": "424860"
  },
  {
    "text": "better ha and higher uptime if you have multi-cluster and we can do multi-cloud",
    "start": "424860",
    "end": "430080"
  },
  {
    "text": "multi-managed kubernetes if you have if you have only single cluster you can only do so much but if with the multiple",
    "start": "430080",
    "end": "437039"
  },
  {
    "text": "clusters you can do a few things more and one of the things is that you can",
    "start": "437039",
    "end": "442460"
  },
  {
    "text": "migrate one of the workloads from one cluster to the other while you're doing maintenance with one cluster or you",
    "start": "442460",
    "end": "448680"
  },
  {
    "text": "maybe you want to create a new cluster you have some regions set up stuff like",
    "start": "448680",
    "end": "454319"
  },
  {
    "text": "that one of the things that our upside that we do is that we also separate clusters based on sensitive information",
    "start": "454319",
    "end": "461819"
  },
  {
    "text": "management so we kind of separate have a separate cluster for specific regulatory",
    "start": "461819",
    "end": "467699"
  },
  {
    "text": "auditory requirements so that's just one of the ways that multi-cluster can help",
    "start": "467699",
    "end": "475099"
  },
  {
    "text": "okay multi-cluster what does it look like so let's deploy istio control plane",
    "start": "475199",
    "end": "480720"
  },
  {
    "text": "and Prometheus together this time and not to like not so much different to the",
    "start": "480720",
    "end": "486000"
  },
  {
    "text": "the previous diagram so it's essentially just sidecar added Prometheus is added",
    "start": "486000",
    "end": "491099"
  },
  {
    "text": "in this case another Prometheus in the cluster too and deploying istio Ingress Gateway what",
    "start": "491099",
    "end": "497580"
  },
  {
    "text": "does it look like we definitely need that that for multi-cluster in SEO environment",
    "start": "497580",
    "end": "503460"
  },
  {
    "text": "and let's connect that connect between cluster one and cluster 2 in this",
    "start": "503460",
    "end": "508860"
  },
  {
    "text": "diagram so this particular line that these particular lines are only for",
    "start": "508860",
    "end": "515159"
  },
  {
    "text": "cluster one to Cluster 2 and you can kind of visual like kind of imagine how",
    "start": "515159",
    "end": "520740"
  },
  {
    "text": "the connections would look like in the cluster 2 having the same connections back to Cluster one and it was just too",
    "start": "520740",
    "end": "526860"
  },
  {
    "text": "many moving parts that I just show this it's a bit too much for me I was so much work to just get the",
    "start": "526860",
    "end": "533580"
  },
  {
    "text": "stuff get this up and I just didn't have the time to do the classes too",
    "start": "533580",
    "end": "539580"
  },
  {
    "text": "so multi-class challenges it's a lot of moving parts and a few things that I want you to kind of take like the key",
    "start": "539580",
    "end": "545580"
  },
  {
    "text": "takeaways of multi-class challenges and what I think what what to think about in multi-cluster scenarios",
    "start": "545580",
    "end": "552180"
  },
  {
    "text": "so first first of all intercluster metrics so traffic leaves from cluster a",
    "start": "552180",
    "end": "557760"
  },
  {
    "text": "to class B Class to a to classes C class one to two two to three to four and each",
    "start": "557760",
    "end": "563399"
  },
  {
    "text": "cluster can have its own observability setup you don't have to you can it's just a choice but who will be",
    "start": "563399",
    "end": "569940"
  },
  {
    "text": "responsible for inter-class metrics if the traffic goes from cluster a to Cluster B is that the class A's problem",
    "start": "569940",
    "end": "576420"
  },
  {
    "text": "is that the cluster B's problem who would need to gather the data gather the metrics and how can we merge multiple",
    "start": "576420",
    "end": "583860"
  },
  {
    "text": "metrics from a number of classes in this diagram it's just two clusters but if",
    "start": "583860",
    "end": "589320"
  },
  {
    "text": "you had like 10 clusters or hundreds of the classes how do you make sure that you can actually merge them and use them",
    "start": "589320",
    "end": "595320"
  },
  {
    "text": "in a meaningful way another challenge is cardinality and cardinality is not a challenge by for",
    "start": "595320",
    "end": "602779"
  },
  {
    "text": "multi-cluster environments it's more of a challenge observability as a whole but service mesh definitely allows getting",
    "start": "602779",
    "end": "609600"
  },
  {
    "text": "detailed metrics and it's a definitely great um aspects of having istio and",
    "start": "609600",
    "end": "615180"
  },
  {
    "text": "service mesh Solutions but it there will be more if you have more clusters",
    "start": "615180",
    "end": "620339"
  },
  {
    "text": "obviously that's an easy guess and observability dashboard will be difficult to manage if you have that",
    "start": "620339",
    "end": "626940"
  },
  {
    "text": "much data so that's another thing that you have to consider maybe that you have single cluster single solution not so",
    "start": "626940",
    "end": "633600"
  },
  {
    "text": "complicated might be easy enough but cardinality can be a difficult aspect as",
    "start": "633600",
    "end": "639540"
  },
  {
    "text": "well give me one second okay and retention is the part that I will be",
    "start": "639540",
    "end": "646920"
  },
  {
    "text": "looking at a little bit more closely so latest metrics can be fetched from running services like Prometheus in this",
    "start": "646920",
    "end": "652380"
  },
  {
    "text": "diagram but metrics need to be retained for you know meaningful historical analysis or investigations and where and",
    "start": "652380",
    "end": "659820"
  },
  {
    "text": "how should we restore them store those data should we store that in a single location or should we store that next to",
    "start": "659820",
    "end": "666060"
  },
  {
    "text": "the cluster or what kind of mechanism should we deploy if the cardinality is",
    "start": "666060",
    "end": "672000"
  },
  {
    "text": "the too high data retention costs can easily add up as well and data source so because it's a",
    "start": "672000",
    "end": "678899"
  },
  {
    "text": "multi-cluster scenario there could be one service deployed in the number of clusters so you have application a which",
    "start": "678899",
    "end": "685500"
  },
  {
    "text": "might be deployed in cluster one and two and three and you might have cluster um four and five six having another",
    "start": "685500",
    "end": "691920"
  },
  {
    "text": "different application you need to differentiate which cluster has which application so from that sense dashboard",
    "start": "691920",
    "end": "698100"
  },
  {
    "text": "needs to be aware like if you were to have a dashboard and I think that's a part of the observability but if you were to have dashboard you have to have",
    "start": "698100",
    "end": "705180"
  },
  {
    "text": "the data source for all the metrics making sure that you know where the metrics are coming from",
    "start": "705180",
    "end": "711480"
  },
  {
    "text": "metrics deduplication is something that you can work out but if you don't have the data source you might have the daily",
    "start": "711480",
    "end": "717779"
  },
  {
    "text": "application in the wrong way that you lose some data so it's one of the things that you need to consider",
    "start": "717779",
    "end": "724019"
  },
  {
    "text": "and quick review on key projects so we'll be looking at istio and I saw",
    "start": "724019",
    "end": "730620"
  },
  {
    "text": "quite a few of those books here are using istio and some other Solutions as well but we'll be focusing on istio just",
    "start": "730620",
    "end": "737519"
  },
  {
    "text": "because at upsider we are using istio I have been using for a while the few",
    "start": "737519",
    "end": "742560"
  },
  {
    "text": "things that you need to kind of focus on is the mtls being the key part of the multi-cluster various multi-fluster",
    "start": "742560",
    "end": "749519"
  },
  {
    "text": "models are definitely available for istio but we'll be looking at just one specific solution because we don't have",
    "start": "749519",
    "end": "755279"
  },
  {
    "text": "the time to go through all of that and sidecar and ambient is something that's pretty hot right now but I'm not",
    "start": "755279",
    "end": "761640"
  },
  {
    "text": "going to be touching on that Prometheus is another project that most",
    "start": "761640",
    "end": "767579"
  },
  {
    "text": "of us probably use day to day it's a graduated project from cncf from 2018",
    "start": "767579",
    "end": "773300"
  },
  {
    "text": "and it's the second graduated project from following kubernetes uh we would",
    "start": "773300",
    "end": "778560"
  },
  {
    "text": "need we would need to look at remote read and write apis and that's something that I will be touching on a little bit",
    "start": "778560",
    "end": "784440"
  },
  {
    "text": "more and also Prometheus operator is something that I'll be showing a little bit more",
    "start": "784440",
    "end": "789660"
  },
  {
    "text": "and Thanos is going to be the the one that I'll be kind of focusing on it's not the only solution for sure but it's",
    "start": "789660",
    "end": "795959"
  },
  {
    "text": "one of the easy kind of getting started long-term storage for Prometheus there",
    "start": "795959",
    "end": "801240"
  },
  {
    "text": "is this sidecar or receiver approach and we'll be looking at one specific way for",
    "start": "801240",
    "end": "806639"
  },
  {
    "text": "Thanos usage and let's go into Solutions and demo",
    "start": "806639",
    "end": "812940"
  },
  {
    "text": "so the overview of the solution that I'll be demoing it would be that we would have three clusters three",
    "start": "812940",
    "end": "818940"
  },
  {
    "text": "kubernetes classes and those will be using kind clusters so it's still I'll be deploying with",
    "start": "818940",
    "end": "826320"
  },
  {
    "text": "manifests I'm not going to be using istio control or other tools like Helm just because that's how upsider we",
    "start": "826320",
    "end": "833040"
  },
  {
    "text": "manage istio installation and we'll be looking at multi-primary on different networks so there is there are a few",
    "start": "833040",
    "end": "839579"
  },
  {
    "text": "other um kind of models with multi-cluster you can check them out in this your official",
    "start": "839579",
    "end": "844860"
  },
  {
    "text": "documentation but we will be looking at multi-classer with multi-primary on different Networks",
    "start": "844860",
    "end": "850560"
  },
  {
    "text": "strict MIT mtls is something that we would look at and also we will be using sidecar deployment so I talked about",
    "start": "850560",
    "end": "856800"
  },
  {
    "text": "ambient and that's something that I'll be touching a little bit later on and also with istio you can get started",
    "start": "856800",
    "end": "863880"
  },
  {
    "text": "with you know demo profile or sorry demo profile to um to get the feeling of what you still",
    "start": "863880",
    "end": "869820"
  },
  {
    "text": "can do but we'll be using non-demo profiles so that it can kind of give you",
    "start": "869820",
    "end": "875040"
  },
  {
    "text": "an idea what it would look like in production setup and Prometheus will be using deploy",
    "start": "875040",
    "end": "881579"
  },
  {
    "text": "we'll be using primitive Prometheus operator to deploy Prometheus Prometheus",
    "start": "881579",
    "end": "886800"
  },
  {
    "text": "instances and Federation is one aspect that I will be looking at remote right",
    "start": "886800",
    "end": "891959"
  },
  {
    "text": "will be used as well and for Thanos deploying using Helm and",
    "start": "891959",
    "end": "897060"
  },
  {
    "text": "using receiver rather than Sidecar so the demo time so as I said it's the",
    "start": "897060",
    "end": "903600"
  },
  {
    "text": "same address github.com rydswd keepcon Dash eu-2023 that's the the repository",
    "start": "903600",
    "end": "910320"
  },
  {
    "text": "with all the details and I haven't had the time to really refine it all this",
    "start": "910320",
    "end": "916079"
  },
  {
    "text": "all the way through so I'll be probably working for the rest of the cubecon to",
    "start": "916079",
    "end": "921180"
  },
  {
    "text": "make sure that all the materials are there but bear with me for now so",
    "start": "921180",
    "end": "927300"
  },
  {
    "text": "I think now what can I how can I",
    "start": "927300",
    "end": "932839"
  },
  {
    "text": "can I use this mic so you can hear me still yeah okay great",
    "start": "934260",
    "end": "941339"
  },
  {
    "text": "thank you so in my repository I'm gonna run demo.sh",
    "start": "941339",
    "end": "947220"
  },
  {
    "text": "so let me just go back to the GitHub",
    "start": "947220",
    "end": "953959"
  },
  {
    "text": "so this should be public keepcon Dash eu-2023",
    "start": "955079",
    "end": "960120"
  },
  {
    "text": "and it's got a few things and I'm gonna be probably working on the demo steps and all the details but for today",
    "start": "960120",
    "end": "967019"
  },
  {
    "text": "because of the the time limitation I'll be running through with a script to make",
    "start": "967019",
    "end": "972959"
  },
  {
    "text": "it just you know easier to understand and easier to kind of walk through I don't have to copy paste on all of that so with this repository set up I'm just",
    "start": "972959",
    "end": "981720"
  },
  {
    "text": "going to move back to my terminal is that too small that's too small isn't",
    "start": "981720",
    "end": "987480"
  },
  {
    "text": "it is this big enough yeah",
    "start": "987480",
    "end": "993839"
  },
  {
    "text": "all right so gonna start with demo.h and the script is going to just give me all",
    "start": "993839",
    "end": "999959"
  },
  {
    "text": "the comments about what it does what it would try to do simple command make directory and the CD into it",
    "start": "999959",
    "end": "1007279"
  },
  {
    "text": "and this actually is already there so I'm going to quickly show that what I",
    "start": "1007279",
    "end": "1012320"
  },
  {
    "text": "have done before this so I have created the kubernetes Clusters so coin clusters are already created uh using uh",
    "start": "1012320",
    "end": "1020959"
  },
  {
    "text": "sorry another script called demo kind prep dosage",
    "start": "1020959",
    "end": "1027020"
  },
  {
    "text": "so I have created that temporary directory and create a kind clusters so",
    "start": "1027020",
    "end": "1032120"
  },
  {
    "text": "that's something that you can do if you want to follow along but for the time the limitation of the time is just going",
    "start": "1032120",
    "end": "1037699"
  },
  {
    "text": "to move on to the demo.sh which is going to be about installing all the aspects about",
    "start": "1037699",
    "end": "1043120"
  },
  {
    "text": "multi-cluster observability so let's see what we got in the",
    "start": "1043120",
    "end": "1048500"
  },
  {
    "text": "directory so we just got some cubeconfig some cluster definitions cluster setup",
    "start": "1048500",
    "end": "1055039"
  },
  {
    "text": "definitions for kind and metal LED setup which is just making",
    "start": "1055039",
    "end": "1060679"
  },
  {
    "text": "sure that the client can work as if a production cluster not really production but I think you know you know what I",
    "start": "1060679",
    "end": "1067039"
  },
  {
    "text": "mean so with that let's just copy the demo Repository with the tarjz and",
    "start": "1067039",
    "end": "1075260"
  },
  {
    "text": "once that's in place I don't have to do all the git and curl anymore and first step is to create",
    "start": "1075260",
    "end": "1083059"
  },
  {
    "text": "the CES certificates so as I said mtls is an important aspect for a multi-cluster the two clusters cluster",
    "start": "1083059",
    "end": "1090440"
  },
  {
    "text": "one and cluster two if you will have to have only two clusters you still have to know that each cluster can securely",
    "start": "1090440",
    "end": "1096980"
  },
  {
    "text": "connect to each other so see a certificate managing the certificates is one of the key aspects and before",
    "start": "1096980",
    "end": "1102679"
  },
  {
    "text": "getting into all the installation we just make sure that everything is prepared so first step is to copy the",
    "start": "1102679",
    "end": "1110360"
  },
  {
    "text": "script that's provided by istio repository istio istio has this tools set and I just copy that and make use of",
    "start": "1110360",
    "end": "1117860"
  },
  {
    "text": "it it's a make file and then just make Dash F and then make use the make file and if I do that I get the root",
    "start": "1117860",
    "end": "1124700"
  },
  {
    "text": "certificate created and I create three certificates for three clusters so",
    "start": "1124700",
    "end": "1131299"
  },
  {
    "text": "simple enough just using make command for three times with different names",
    "start": "1131299",
    "end": "1137720"
  },
  {
    "text": "and just take a few seconds to finish and now we have all the certificates you",
    "start": "1137720",
    "end": "1144080"
  },
  {
    "text": "can follow along and to see what the files are created like what kind of files are created should be really simple to follow",
    "start": "1144080",
    "end": "1150919"
  },
  {
    "text": "and because we need the certificates in place in before Easter installation I",
    "start": "1150919",
    "end": "1157460"
  },
  {
    "text": "just create namespaces for istio before and also make sure that the secrets are",
    "start": "1157460",
    "end": "1164240"
  },
  {
    "text": "stored so very simple a few files involved so",
    "start": "1164240",
    "end": "1170120"
  },
  {
    "text": "root certificate certificate chain I see a certificate for each cluster you can",
    "start": "1170120",
    "end": "1175520"
  },
  {
    "text": "see the actual like how the certificate list certificates look like in each cluster very similar but obviously",
    "start": "1175520",
    "end": "1182059"
  },
  {
    "text": "different different cluster different certificate but the same root certificate",
    "start": "1182059",
    "end": "1187700"
  },
  {
    "text": "and we can see that the Cs certificate CSS secret is created in the SEO namespace and now we are ready for",
    "start": "1187700",
    "end": "1195260"
  },
  {
    "text": "installation of istio and first of all I said that I'm not",
    "start": "1195260",
    "end": "1200900"
  },
  {
    "text": "going to be using insta control and that was because I wanted to make sure that something that you can take away from this talk is that go to repository you",
    "start": "1200900",
    "end": "1207679"
  },
  {
    "text": "can see the actual manifest rather than some magic happening behind the scenes so what I do is that I have copied the",
    "start": "1207679",
    "end": "1215539"
  },
  {
    "text": "the repository so I'm just taking the Manifest directory and the Manifest",
    "start": "1215539",
    "end": "1220580"
  },
  {
    "text": "slash istio slash installation has all the files and with those files",
    "start": "1220580",
    "end": "1227960"
  },
  {
    "text": "um oh sorry before that I need to label Eco system namespace with the network topology so as I said I'll be looking at",
    "start": "1227960",
    "end": "1234799"
  },
  {
    "text": "three different uh clusters with different network so multi-primary with different networks is something that",
    "start": "1234799",
    "end": "1241220"
  },
  {
    "text": "I'll be focusing on and from that sense I need to make sure that labeling namespace is in place before",
    "start": "1241220",
    "end": "1247160"
  },
  {
    "text": "installation and that's part of the official documentation as well so simple enough istioc system just",
    "start": "1247160",
    "end": "1253820"
  },
  {
    "text": "label that namespace with the topology of each cluster labeled and now we can install Eco d",
    "start": "1253820",
    "end": "1262220"
  },
  {
    "text": "and is that that means it's still control plane and keeps control applied",
    "start": "1262220",
    "end": "1267620"
  },
  {
    "text": "with the context of each cluster and then just take out that e-steo slash installation slash istod manifest that",
    "start": "1267620",
    "end": "1274520"
  },
  {
    "text": "you can find in the Repository so this is really fast but you can see",
    "start": "1274520",
    "end": "1280280"
  },
  {
    "text": "quite a few errors happening and this is because that crds are part of the definitions together so there's a bit of",
    "start": "1280280",
    "end": "1287419"
  },
  {
    "text": "race condition so if I do apply twice",
    "start": "1287419",
    "end": "1291940"
  },
  {
    "text": "I would I would answer that question later on and you can see that the files are",
    "start": "1296000",
    "end": "1301340"
  },
  {
    "text": "created and there was a question about SEO control and I'll touch on that a little bit later",
    "start": "1301340",
    "end": "1307840"
  },
  {
    "text": "and install is your Gateway in each cluster and this one is also another configurations already in place so the",
    "start": "1307880",
    "end": "1315620"
  },
  {
    "text": "manifests are on all in istio slash installation Gateway manifest and just",
    "start": "1315620",
    "end": "1321380"
  },
  {
    "text": "create this and this one is pretty straightforward all the crds are already in place and we will move on to establishing",
    "start": "1321380",
    "end": "1328640"
  },
  {
    "text": "multi-class connection so first of all copy the Gateway resources that we'll be using for each",
    "start": "1328640",
    "end": "1335780"
  },
  {
    "text": "of the the Clusters or similar slash is Manifest slash istio slash",
    "start": "1335780",
    "end": "1342860"
  },
  {
    "text": "usage this time and then we will look at Cross Network gateway.yaml as well",
    "start": "1342860",
    "end": "1348020"
  },
  {
    "text": "it's a simple application simple file with just a couple things for istio to",
    "start": "1348020",
    "end": "1353539"
  },
  {
    "text": "know that the multi-class communication work so the resource Gateway is created with this for each cluster",
    "start": "1353539",
    "end": "1361700"
  },
  {
    "text": "and be able to move on to creating remote secret so this one",
    "start": "1361700",
    "end": "1367580"
  },
  {
    "text": "another one sorry so for creating remote secret you have to have a connection between",
    "start": "1367580",
    "end": "1373880"
  },
  {
    "text": "clusters but you do it one by one cluster one connecting to Cluster two cluster 2 connecting to Glass note one",
    "start": "1373880",
    "end": "1380120"
  },
  {
    "text": "so on and so forth and this particular one is going to be class one to Cluster two and there was a question about",
    "start": "1380120",
    "end": "1386299"
  },
  {
    "text": "Easter control I'm not using istio control because there's a lot happening behind the scenes and it just feels",
    "start": "1386299",
    "end": "1392419"
  },
  {
    "text": "really nice to get started with istio but what I wanted to show is that what actually happens behind the scenes and",
    "start": "1392419",
    "end": "1397520"
  },
  {
    "text": "not exactly to just rely on the tools but kind of have a bit of understanding of what service mesh really looks like",
    "start": "1397520",
    "end": "1405919"
  },
  {
    "text": "so this one is also using Cube control you can use SEO control to create remote secret but because I have the kind",
    "start": "1405919",
    "end": "1413240"
  },
  {
    "text": "clusters with the cube config that you could see with the prep for the another script we have this istio sorry",
    "start": "1413240",
    "end": "1420799"
  },
  {
    "text": "kubernetes configuration in the file so we'll be using keep control with create",
    "start": "1420799",
    "end": "1427340"
  },
  {
    "text": "secret using the the same kind of convention with HCL create remote secret and creating the secret and also",
    "start": "1427340",
    "end": "1434960"
  },
  {
    "text": "annotating and labeling it so that's what happens with the SEO control we're probably not use Cube control for",
    "start": "1434960",
    "end": "1442580"
  },
  {
    "text": "everything for production use but this is something that maybe it's interesting to see what actually happens behind the",
    "start": "1442580",
    "end": "1448039"
  },
  {
    "text": "scenes and we do that for cluster 2 to Cluster one so you can kind of see the",
    "start": "1448039",
    "end": "1453440"
  },
  {
    "text": "pattern okay cluster one to Cluster two and then cluster two to Cluster one same thing and cluster one to Cluster",
    "start": "1453440",
    "end": "1461360"
  },
  {
    "text": "three so as I said there are three clusters so cluster one now can talk to Cluster three with this remote Secret",
    "start": "1461360",
    "end": "1468580"
  },
  {
    "text": "and cluster two can also talk to Cluster three with this Secret",
    "start": "1469520",
    "end": "1477460"
  },
  {
    "text": "there you go and I'm not going to do cluster 3 out to Cluster one and two because you can you",
    "start": "1479240",
    "end": "1486740"
  },
  {
    "text": "can just omit it you can say that cluster 3 doesn't need to talk to class one and two you can do it it really",
    "start": "1486740",
    "end": "1493700"
  },
  {
    "text": "depends on business use cases so for that reason I'm just going to skip it so that it's it's something that's possible",
    "start": "1493700",
    "end": "1499120"
  },
  {
    "text": "and you might have some data protection issues or protection requirements like",
    "start": "1499120",
    "end": "1504980"
  },
  {
    "text": "us that you might want to have a specific connection one way but not the both ways",
    "start": "1504980",
    "end": "1510500"
  },
  {
    "text": "so the next step is Prometheus not istio so install multi-cluster Prometheus",
    "start": "1510500",
    "end": "1516440"
  },
  {
    "text": "setup is next up and first of all creating monitoring namespace can be anything just name the monitoring for",
    "start": "1516440",
    "end": "1522799"
  },
  {
    "text": "now I think it's one of the you know easy to understand namespaces",
    "start": "1522799",
    "end": "1527840"
  },
  {
    "text": "and label that namespace making sure that istio knows about it he still knows",
    "start": "1527840",
    "end": "1533179"
  },
  {
    "text": "how to inject about inject the side cards to each of the the ports there",
    "start": "1533179",
    "end": "1538880"
  },
  {
    "text": "labeled with istio injection if you have a revision you might have a different label but",
    "start": "1538880",
    "end": "1545059"
  },
  {
    "text": "this should be straightforward for Sim should be the simple setup for now",
    "start": "1545059",
    "end": "1551900"
  },
  {
    "text": "and copy or Prometheus related definitions from the repository once again and Prometheus operator is",
    "start": "1551900",
    "end": "1560480"
  },
  {
    "text": "something that we'll be using and we are using customized build Prometheus operator is very simple to install",
    "start": "1560480",
    "end": "1566179"
  },
  {
    "text": "usually so you don't have to do this customized build but this specific case I'm installing promises operator into",
    "start": "1566179",
    "end": "1572720"
  },
  {
    "text": "monitoring namespace rather than default namespace so if you do use Primitives operators default it goes to default",
    "start": "1572720",
    "end": "1579559"
  },
  {
    "text": "namespace it might work for you it might not work for you maybe that's something that you can kind of check out how it",
    "start": "1579559",
    "end": "1585380"
  },
  {
    "text": "works it's very simple but just wanted to make sure that nothing gets polluted like nothing gets in the way into the",
    "start": "1585380",
    "end": "1591080"
  },
  {
    "text": "default namespace so that's applied for cluster one plus",
    "start": "1591080",
    "end": "1597740"
  },
  {
    "text": "the two and cluster 3. and that was just deploying Prometheus",
    "start": "1597740",
    "end": "1603919"
  },
  {
    "text": "operator now I need to deploy Prometheus itself and I'm starting with Prometheus for collecting istio metrics and I say",
    "start": "1603919",
    "end": "1611480"
  },
  {
    "text": "that because I'll be deploying two different types of metric Prometheus so first of all is Prometheus istio metrics",
    "start": "1611480",
    "end": "1618380"
  },
  {
    "text": "collection and it will be directly connecting to istio and",
    "start": "1618380",
    "end": "1624380"
  },
  {
    "text": "I get that Prometheus set up with promise this operator so I'm using crds for that",
    "start": "1624380",
    "end": "1630980"
  },
  {
    "text": "and deploying promises for Federation and this helps with the cardinality this",
    "start": "1630980",
    "end": "1636380"
  },
  {
    "text": "helps kind of the retention setup so it's another Prometheus crd setup crd",
    "start": "1636380",
    "end": "1643159"
  },
  {
    "text": "configurations so that's why I started using premises operator so that I can kind of similar have a similar setup for",
    "start": "1643159",
    "end": "1650539"
  },
  {
    "text": "Prometheus collection istio collection and also SEO Federation and now it's installing tunnels so",
    "start": "1650539",
    "end": "1658100"
  },
  {
    "text": "Thanos is as I said it's a retention mechanism but in this case I'm installing Thanos only to Cluster 3 not",
    "start": "1658100",
    "end": "1665900"
  },
  {
    "text": "to other clusters do I have time oh I don't have too much time um so help me install with just directly",
    "start": "1665900",
    "end": "1672500"
  },
  {
    "text": "from Vietnamese and receiving a receiver set enable to true",
    "start": "1672500",
    "end": "1678679"
  },
  {
    "text": "and straightforward just Helm install so very simple from other aspects and",
    "start": "1678679",
    "end": "1685880"
  },
  {
    "text": "if everything goes well",
    "start": "1685880",
    "end": "1688960"
  },
  {
    "text": "it's there so I didn't install Tunnels for cluster 1 and class 2. the idea is",
    "start": "1691580",
    "end": "1697400"
  },
  {
    "text": "that this particular solution is to try to connect Prometheus instances",
    "start": "1697400",
    "end": "1703460"
  },
  {
    "text": "especially the Federation ones to Cluster three so it's a bit difficult to remember what classes what but cluster 3",
    "start": "1703460",
    "end": "1711260"
  },
  {
    "text": "was the only one who had which had Thanos this is to kind of demo that",
    "start": "1711260",
    "end": "1717380"
  },
  {
    "text": "Prometheus in other classes can send all the track all the metrics into single observability cluster kind of central",
    "start": "1717380",
    "end": "1724700"
  },
  {
    "text": "observability cluster that's one one way to manage the really you know a lot of moving Parts with a lot of moving",
    "start": "1724700",
    "end": "1731120"
  },
  {
    "text": "metrics so that's done with the demo script so let's see what the cluster",
    "start": "1731120",
    "end": "1737419"
  },
  {
    "text": "looks like so cluster 3 was the one that has tanosin and if I can see how the",
    "start": "1737419",
    "end": "1745220"
  },
  {
    "text": "processes look like Thanos is just starting up so meanwhile let's just do",
    "start": "1745220",
    "end": "1751640"
  },
  {
    "text": "cluster one which is which has Prometheus and Prometheus",
    "start": "1751640",
    "end": "1759860"
  },
  {
    "text": "istio collector istio Federation and operator as well and this is still",
    "start": "1759860",
    "end": "1766220"
  },
  {
    "text": "Federation we'll be talking to a tunnels receiver which is up and running in the cluster",
    "start": "1766220",
    "end": "1773720"
  },
  {
    "text": "kind cluster 3 right now so let's see what it looks like with the tunnels query front end what I'm going",
    "start": "1773720",
    "end": "1780799"
  },
  {
    "text": "to do is to go into query front-end going to port forward with a query front",
    "start": "1780799",
    "end": "1786020"
  },
  {
    "text": "end specifically so it's a bit difficult to see but 10902 is the the port for the",
    "start": "1786020",
    "end": "1793159"
  },
  {
    "text": "web UI and if I can go back to localhost",
    "start": "1793159",
    "end": "1799539"
  },
  {
    "text": "one zero nine zero two and so if I do istio requests and some",
    "start": "1799539",
    "end": "1807919"
  },
  {
    "text": "metrics coming through and if I execute this you can see the metrics coming",
    "start": "1807919",
    "end": "1813320"
  },
  {
    "text": "through but there is a problem with this demo that I need to work out so that you can",
    "start": "1813320",
    "end": "1819919"
  },
  {
    "text": "see that the cluster showing up as cluster 3 I think but I don't have anything coming from",
    "start": "1819919",
    "end": "1825919"
  },
  {
    "text": "cluster 102. so there's a bit of service mesh setup problem that I have encountered in like past few hours",
    "start": "1825919",
    "end": "1833299"
  },
  {
    "text": "um so I will try to fix it by the end of the cubecon but um sorry about this the",
    "start": "1833299",
    "end": "1838399"
  },
  {
    "text": "demo I knew that demo was not going to work and you know it's a lot of moving Parts but I think you can get the sense",
    "start": "1838399",
    "end": "1844580"
  },
  {
    "text": "that Prometheus and Thanos can definitely work out to help the kind of metric set up and the idea is the idea",
    "start": "1844580",
    "end": "1852020"
  },
  {
    "text": "about Central observability setup is something that you might be able to use it might not be the right solution but",
    "start": "1852020",
    "end": "1857960"
  },
  {
    "text": "that's just one way so going back to I don't have too much time",
    "start": "1857960",
    "end": "1863779"
  },
  {
    "text": "so going back to the slide so a bit of a summary so quick recap on what I like what I",
    "start": "1863779",
    "end": "1870799"
  },
  {
    "text": "have shown you with the demo so there are lots of a lot of moving parts and I couldn't really get hold of moving parts",
    "start": "1870799",
    "end": "1876860"
  },
  {
    "text": "and just couldn't like basically failed with it but you know a few classes I only had three classes and that already",
    "start": "1876860",
    "end": "1883399"
  },
  {
    "text": "was a lot it was a lot to go through all the steps and if you have more clusters it will be a really difficult to",
    "start": "1883399",
    "end": "1889700"
  },
  {
    "text": "comprehend multi-class is definitely Made Easy by service mesh but",
    "start": "1889700",
    "end": "1895360"
  },
  {
    "text": "it doesn't really solve everything it's still definitely certainly has the focus",
    "start": "1895360",
    "end": "1900440"
  },
  {
    "text": "on supporting multi-cluster scenarios a few different ways but observability is still complicated service mesh is only a",
    "start": "1900440",
    "end": "1907460"
  },
  {
    "text": "part of story and it is not a solution by itself you have to still configure a few things about observability",
    "start": "1907460",
    "end": "1913340"
  },
  {
    "text": "solution with Central observability cluster was something that we looked at and is one of the many options for",
    "start": "1913340",
    "end": "1918860"
  },
  {
    "text": "multi-class environment but it is probably easiest to kind of wrap your head around what it what happens with it",
    "start": "1918860",
    "end": "1925580"
  },
  {
    "text": "a multi-class observability challenges I'll be putting more challenges with the",
    "start": "1925580",
    "end": "1930919"
  },
  {
    "text": "for more details and you can check out the demo setup in the Repository",
    "start": "1930919",
    "end": "1936740"
  },
  {
    "text": "and just quick few Alternatives that I need to mention and psyllium Envoy and Linkedin are",
    "start": "1936740",
    "end": "1942799"
  },
  {
    "text": "definitely service mesh solutions that you can definitely use I just want familiar most familiar with istio so",
    "start": "1942799",
    "end": "1948080"
  },
  {
    "text": "that's what I stuck with and Thanos was the only you know just used for demo",
    "start": "1948080",
    "end": "1953720"
  },
  {
    "text": "purpose and I don't say that it's no production ready definitely production usable but you can have a look at other",
    "start": "1953720",
    "end": "1960559"
  },
  {
    "text": "options as well cortex grafana mimia and others other considerations that I didn't have",
    "start": "1960559",
    "end": "1966440"
  },
  {
    "text": "the time to touch on is that alert management is something that will be really difficult to kind of manage so",
    "start": "1966440",
    "end": "1972320"
  },
  {
    "text": "alerts should be managed per cluster in general but what happens if you have a central management Central observability",
    "start": "1972320",
    "end": "1977539"
  },
  {
    "text": "cluster do you want to have another setup maybe that's another possibility that you can consider configuration",
    "start": "1977539",
    "end": "1984140"
  },
  {
    "text": "management we could see that there were quite a few steps in the script and maybe githubs or some solutions would be",
    "start": "1984140",
    "end": "1990500"
  },
  {
    "text": "helpful other web observability aspects um like we I didn't touch on on service mesh",
    "start": "1990500",
    "end": "1996740"
  },
  {
    "text": "specific Solutions like yali for istio Hubble for psyllium is definitely to be looked at multi-tenancy there was a talk",
    "start": "1996740",
    "end": "2003519"
  },
  {
    "text": "right next door I don't know which way about multi-tenancy so if you're Keen about multi-tenancy you know please do",
    "start": "2003519",
    "end": "2010120"
  },
  {
    "text": "have a look at that recording there and open Telemetry is something that I couldn't touch and sidecar or sidecar",
    "start": "2010120",
    "end": "2015880"
  },
  {
    "text": "less Solutions is something that will be a kind of a big focus in the service mesh ecosystem and there will be quite a",
    "start": "2015880",
    "end": "2022299"
  },
  {
    "text": "few talks in keepcon so with that just a quick up appendix um there are some",
    "start": "2022299",
    "end": "2028179"
  },
  {
    "text": "talks about service mesh Urban Telemetry observability and all of that so maybe something that you'll be interested to",
    "start": "2028179",
    "end": "2034419"
  },
  {
    "text": "join after this and some references once again so repository is that I'll be putting the",
    "start": "2034419",
    "end": "2041019"
  },
  {
    "text": "link to the slide and slide is available at ww.sh keepcon EU 2023 MCO stands for",
    "start": "2041019",
    "end": "2047140"
  },
  {
    "text": "multi-class observability and special thanks to the team with me",
    "start": "2047140",
    "end": "2052419"
  },
  {
    "text": "from Outsider helping with the presentation and slide decks and with that thank you very much for the time",
    "start": "2052419",
    "end": "2058658"
  },
  {
    "text": "and that's it",
    "start": "2058659",
    "end": "2062220"
  },
  {
    "text": "[Music]",
    "start": "2063750",
    "end": "2066989"
  },
  {
    "text": "I think there is no time for questions I'm not sure um yeah I I don't think there was time for",
    "start": "2070720",
    "end": "2077020"
  },
  {
    "text": "it so thank you very much",
    "start": "2077020",
    "end": "2081000"
  }
]