[
  {
    "text": "so we're going to go ahead and get",
    "start": "240",
    "end": "1360"
  },
  {
    "text": "started uh I'm Ray Micah this is my",
    "start": "1360",
    "end": "4040"
  },
  {
    "text": "colleague Mo Ahmed uh we're from Samsung",
    "start": "4040",
    "end": "6359"
  },
  {
    "text": "ads we're going to talk about our",
    "start": "6359",
    "end": "8000"
  },
  {
    "text": "experience uh live migrating production",
    "start": "8000",
    "end": "10200"
  },
  {
    "text": "clusters from Calico to",
    "start": "10200",
    "end": "12599"
  },
  {
    "text": "psyllium so on our agenda today we're",
    "start": "12599",
    "end": "15480"
  },
  {
    "text": "going to go through the objective of the",
    "start": "15480",
    "end": "17600"
  },
  {
    "text": "migration some of the reasons why uh we",
    "start": "17600",
    "end": "20560"
  },
  {
    "text": "did it the different method uh methods",
    "start": "20560",
    "end": "23359"
  },
  {
    "text": "that we considered for the migrations uh",
    "start": "23359",
    "end": "26119"
  },
  {
    "text": "we're going to go through the actual",
    "start": "26119",
    "end": "28000"
  },
  {
    "text": "steps for the migration uh path that we",
    "start": "28000",
    "end": "30080"
  },
  {
    "text": "ended up choosing MO is going to bravely",
    "start": "30080",
    "end": "33040"
  },
  {
    "text": "take us through a live demo and then",
    "start": "33040",
    "end": "35040"
  },
  {
    "text": "we'll give some closing",
    "start": "35040",
    "end": "37879"
  },
  {
    "text": "thoughts so our platform is live and",
    "start": "37879",
    "end": "41280"
  },
  {
    "text": "it's used by applications that generate",
    "start": "41280",
    "end": "44239"
  },
  {
    "text": "significant majority of our Revenue at",
    "start": "44239",
    "end": "45960"
  },
  {
    "text": "Samsung ads obviously that means it was",
    "start": "45960",
    "end": "48559"
  },
  {
    "text": "important for us to have a path",
    "start": "48559",
    "end": "49920"
  },
  {
    "text": "providing minimal downtime we had about",
    "start": "49920",
    "end": "52760"
  },
  {
    "text": "20 clusters at the time of this",
    "start": "52760",
    "end": "54280"
  },
  {
    "text": "migration uh our clusters are managed by",
    "start": "54280",
    "end": "56640"
  },
  {
    "text": "Rancher and they're a mix of AWS and",
    "start": "56640",
    "end": "59399"
  },
  {
    "text": "bare metal environments more than half",
    "start": "59399",
    "end": "61920"
  },
  {
    "text": "of those 20 clusters are running",
    "start": "61920",
    "end": "63640"
  },
  {
    "text": "production workload and uh the sizes",
    "start": "63640",
    "end": "67439"
  },
  {
    "text": "vary from relatively small with just",
    "start": "67439",
    "end": "69479"
  },
  {
    "text": "tens of nodes and the larger ones can be",
    "start": "69479",
    "end": "71920"
  },
  {
    "text": "anywhere from 300 to over 500",
    "start": "71920",
    "end": "75200"
  },
  {
    "text": "nodes we decided that we wanted to swap",
    "start": "75200",
    "end": "78280"
  },
  {
    "text": "telium I'll talk a little bit more about",
    "start": "78280",
    "end": "80479"
  },
  {
    "text": "our reasonings for that in the next",
    "start": "80479",
    "end": "81840"
  },
  {
    "text": "slide um but for now just say we're",
    "start": "81840",
    "end": "84280"
  },
  {
    "text": "looking forward to some new features",
    "start": "84280",
    "end": "86439"
  },
  {
    "text": "like Gateway API support some of the",
    "start": "86439",
    "end": "88840"
  },
  {
    "text": "light service mesh featur features and",
    "start": "88840",
    "end": "90880"
  },
  {
    "text": "of course Hubble for uh Network",
    "start": "90880",
    "end": "93560"
  },
  {
    "text": "visibility our primary considerations",
    "start": "93560",
    "end": "95720"
  },
  {
    "text": "when we're planning on migration were",
    "start": "95720",
    "end": "98640"
  },
  {
    "text": "centering uh centered around finding a",
    "start": "98640",
    "end": "100479"
  },
  {
    "text": "path with the following",
    "start": "100479",
    "end": "102000"
  },
  {
    "text": "characteristics ideally we'd have no",
    "start": "102000",
    "end": "104000"
  },
  {
    "text": "impact to our services that are",
    "start": "104000",
    "end": "105320"
  },
  {
    "text": "generating",
    "start": "105320",
    "end": "106680"
  },
  {
    "text": "Revenue we also wanted the migration to",
    "start": "106680",
    "end": "109439"
  },
  {
    "text": "be largely transparent to end",
    "start": "109439",
    "end": "111520"
  },
  {
    "text": "users some awareness and Readiness for",
    "start": "111520",
    "end": "114079"
  },
  {
    "text": "the change was expected but uh we didn't",
    "start": "114079",
    "end": "116719"
  },
  {
    "text": "want to impose any significant amount of",
    "start": "116719",
    "end": "119000"
  },
  {
    "text": "work on our users of the platform to",
    "start": "119000",
    "end": "121000"
  },
  {
    "text": "accomplish the change and lastly for her",
    "start": "121000",
    "end": "123759"
  },
  {
    "text": "own sake not having to have the platform",
    "start": "123759",
    "end": "125759"
  },
  {
    "text": "team perform some Marathon migration you",
    "start": "125759",
    "end": "128399"
  },
  {
    "text": "know working overnight anything like",
    "start": "128399",
    "end": "130000"
  },
  {
    "text": "that having good uh controllable roll",
    "start": "130000",
    "end": "132560"
  },
  {
    "text": "out was",
    "start": "132560",
    "end": "135040"
  },
  {
    "text": "important so the you know specific",
    "start": "135360",
    "end": "138360"
  },
  {
    "text": "reasons that we were looking to make the",
    "start": "138360",
    "end": "140239"
  },
  {
    "text": "change uh obviously ebpf forwarding we",
    "start": "140239",
    "end": "144000"
  },
  {
    "text": "know it works we know it's",
    "start": "144000",
    "end": "145560"
  },
  {
    "text": "performant we had an interest in uh",
    "start": "145560",
    "end": "148519"
  },
  {
    "text": "having xtp being an adte we have uh a",
    "start": "148519",
    "end": "152720"
  },
  {
    "text": "handful of apps that are quite latency",
    "start": "152720",
    "end": "154800"
  },
  {
    "text": "sensitive kind of you know 40",
    "start": "154800",
    "end": "157440"
  },
  {
    "text": "millisecond processing time only in our",
    "start": "157440",
    "end": "159440"
  },
  {
    "text": "infrastructure and then have to return",
    "start": "159440",
    "end": "161920"
  },
  {
    "text": "to exchanges with uh responses and we",
    "start": "161920",
    "end": "165519"
  },
  {
    "text": "wanted to ensure that in our kubernetes",
    "start": "165519",
    "end": "168440"
  },
  {
    "text": "uh layers we have the lowest",
    "start": "168440",
    "end": "170319"
  },
  {
    "text": "overhead uh a lot of our backend",
    "start": "170319",
    "end": "173319"
  },
  {
    "text": "applications were being migrated from",
    "start": "173319",
    "end": "174959"
  },
  {
    "text": "bare metal without kubernetes all the",
    "start": "174959",
    "end": "177800"
  },
  {
    "text": "way to AWS with kubernetes kind of in",
    "start": "177800",
    "end": "180360"
  },
  {
    "text": "one shot and we wanted to maintain the",
    "start": "180360",
    "end": "182280"
  },
  {
    "text": "low latency performance so using xcp uh",
    "start": "182280",
    "end": "186239"
  },
  {
    "text": "and the enhanced um low balancing that",
    "start": "186239",
    "end": "189519"
  },
  {
    "text": "celium provides is one way to help us",
    "start": "189519",
    "end": "192159"
  },
  {
    "text": "accomplish",
    "start": "192159",
    "end": "193519"
  },
  {
    "text": "that uh we really wanted to use the Q",
    "start": "193519",
    "end": "196879"
  },
  {
    "text": "proxy replacement with psyllium if",
    "start": "196879",
    "end": "198959"
  },
  {
    "text": "you've used kubernetes in AWS you know",
    "start": "198959",
    "end": "201200"
  },
  {
    "text": "that uh connecting apps to AWS low",
    "start": "201200",
    "end": "204720"
  },
  {
    "text": "balancers is kind of just a mess of note",
    "start": "204720",
    "end": "206599"
  },
  {
    "text": "ports Underneath It All um and that can",
    "start": "206599",
    "end": "209159"
  },
  {
    "text": "make apply policy at those layers a bit",
    "start": "209159",
    "end": "211599"
  },
  {
    "text": "of a challenge if your cni is deferring",
    "start": "211599",
    "end": "213840"
  },
  {
    "text": "the implementation of not ports into Q",
    "start": "213840",
    "end": "216080"
  },
  {
    "text": "proxy um and because of that using",
    "start": "216080",
    "end": "220599"
  },
  {
    "text": "psyllium lets us apply policies with",
    "start": "220599",
    "end": "222640"
  },
  {
    "text": "clear identities for no matter any type",
    "start": "222640",
    "end": "225239"
  },
  {
    "text": "of",
    "start": "225239",
    "end": "226080"
  },
  {
    "text": "service so those improvements let us",
    "start": "226080",
    "end": "229239"
  },
  {
    "text": "have uh better self-service for end",
    "start": "229239",
    "end": "232360"
  },
  {
    "text": "users as well as auditability for our",
    "start": "232360",
    "end": "234439"
  },
  {
    "text": "security teams to be able understand",
    "start": "234439",
    "end": "236519"
  },
  {
    "text": "exactly what our Network policies are",
    "start": "236519",
    "end": "238159"
  },
  {
    "text": "doing",
    "start": "238159",
    "end": "240280"
  },
  {
    "text": "um and then obviously I mentioned before",
    "start": "240280",
    "end": "242640"
  },
  {
    "text": "new features Gateway API in particular",
    "start": "242640",
    "end": "244879"
  },
  {
    "text": "was a big one for us uh our Sr team is",
    "start": "244879",
    "end": "247879"
  },
  {
    "text": "working on improving deployment",
    "start": "247879",
    "end": "249319"
  },
  {
    "text": "procedures having the ability to use",
    "start": "249319",
    "end": "251239"
  },
  {
    "text": "gayway API to do traffic switching and",
    "start": "251239",
    "end": "253959"
  },
  {
    "text": "Canary Blu green deployments uh has the",
    "start": "253959",
    "end": "256799"
  },
  {
    "text": "potential to really improve that uh",
    "start": "256799",
    "end": "258840"
  },
  {
    "text": "deployment workflow for all of our",
    "start": "258840",
    "end": "262199"
  },
  {
    "text": "users and then I mentioned the enhanced",
    "start": "262199",
    "end": "264400"
  },
  {
    "text": "low balancing with celium that's very",
    "start": "264400",
    "end": "266520"
  },
  {
    "text": "important for our latency sensitive apps",
    "start": "266520",
    "end": "269880"
  },
  {
    "text": "uh you know all the fun stuff with",
    "start": "269880",
    "end": "271360"
  },
  {
    "text": "socket rewrites and and uh that type of",
    "start": "271360",
    "end": "274120"
  },
  {
    "text": "thing with psyllium",
    "start": "274120",
    "end": "277479"
  },
  {
    "text": "services so the the migration methods",
    "start": "277520",
    "end": "279919"
  },
  {
    "text": "that we considered uh I think this list",
    "start": "279919",
    "end": "282320"
  },
  {
    "text": "is fairly self-explanatory but this is",
    "start": "282320",
    "end": "284320"
  },
  {
    "text": "kind of what we came up with when we",
    "start": "284320",
    "end": "285520"
  },
  {
    "text": "were just brainstorming how we could do",
    "start": "285520",
    "end": "287800"
  },
  {
    "text": "it obviously you know the simplest one",
    "start": "287800",
    "end": "290840"
  },
  {
    "text": "as a platform engineer is let's just",
    "start": "290840",
    "end": "292600"
  },
  {
    "text": "deploy new stuff and make the other",
    "start": "292600",
    "end": "294160"
  },
  {
    "text": "people do the work",
    "start": "294160",
    "end": "296560"
  },
  {
    "text": "um obviously that's fairly heavy for end",
    "start": "296560",
    "end": "299199"
  },
  {
    "text": "users",
    "start": "299199",
    "end": "301000"
  },
  {
    "text": "theoretically you could just uninstall",
    "start": "301000",
    "end": "303240"
  },
  {
    "text": "your existing cni and installed a new",
    "start": "303240",
    "end": "305360"
  },
  {
    "text": "one uh there's some you know fairly",
    "start": "305360",
    "end": "308400"
  },
  {
    "text": "unpredictable things if you go that",
    "start": "308400",
    "end": "310360"
  },
  {
    "text": "route and then we had the uh idea of",
    "start": "310360",
    "end": "313720"
  },
  {
    "text": "binding multiple network interfaces uh",
    "start": "313720",
    "end": "316240"
  },
  {
    "text": "using",
    "start": "316240",
    "end": "317199"
  },
  {
    "text": "melus um and lastly attempting to do a",
    "start": "317199",
    "end": "321280"
  },
  {
    "text": "hybrid migration using perote",
    "start": "321280",
    "end": "323440"
  },
  {
    "text": "configuration feature that was released",
    "start": "323440",
    "end": "325319"
  },
  {
    "text": "in celum 113 so I'll go through just a",
    "start": "325319",
    "end": "328440"
  },
  {
    "text": "couple of those um",
    "start": "328440",
    "end": "330520"
  },
  {
    "text": "um so yeah we could just deploy new",
    "start": "330520",
    "end": "333880"
  },
  {
    "text": "clusters uh just deploy new ones with",
    "start": "333880",
    "end": "336039"
  },
  {
    "text": "cium as our cni it removes dependency on",
    "start": "336039",
    "end": "339720"
  },
  {
    "text": "our Legacy stuff obviously significantly",
    "start": "339720",
    "end": "343840"
  },
  {
    "text": "amount uh significantly more work for",
    "start": "343840",
    "end": "345880"
  },
  {
    "text": "end users",
    "start": "345880",
    "end": "348360"
  },
  {
    "text": "and uh ultimately no matter how easy it",
    "start": "348360",
    "end": "351759"
  },
  {
    "text": "may be to deploy an application to a new",
    "start": "351759",
    "end": "353479"
  },
  {
    "text": "cluster every app has different",
    "start": "353479",
    "end": "355919"
  },
  {
    "text": "deployment roll out migration",
    "start": "355919",
    "end": "358160"
  },
  {
    "text": "concerns and uh it would basically just",
    "start": "358160",
    "end": "361360"
  },
  {
    "text": "make the amount of time where we had to",
    "start": "361360",
    "end": "363039"
  },
  {
    "text": "run this migration not under our own",
    "start": "363039",
    "end": "366080"
  },
  {
    "text": "control um having high adoption is a",
    "start": "366080",
    "end": "368800"
  },
  {
    "text": "good problem to have but when we have a",
    "start": "368800",
    "end": "370599"
  },
  {
    "text": "whole bunch of teams that have their own",
    "start": "370599",
    "end": "372880"
  },
  {
    "text": "priorities you're just kind of hurting",
    "start": "372880",
    "end": "374840"
  },
  {
    "text": "cats so ultimately uh you know we just",
    "start": "374840",
    "end": "378479"
  },
  {
    "text": "discarded this fairly early it didn't",
    "start": "378479",
    "end": "380680"
  },
  {
    "text": "make sense for",
    "start": "380680",
    "end": "382120"
  },
  {
    "text": "us you could just uninstall the cni",
    "start": "382120",
    "end": "385280"
  },
  {
    "text": "plugin install the new one obviously",
    "start": "385280",
    "end": "387639"
  },
  {
    "text": "this has disruption to your existing",
    "start": "387639",
    "end": "390840"
  },
  {
    "text": "environments um your maintenance is",
    "start": "390840",
    "end": "393680"
  },
  {
    "text": "cluster wide and can potentially last a",
    "start": "393680",
    "end": "396400"
  },
  {
    "text": "fairly long time depending on if you",
    "start": "396400",
    "end": "398960"
  },
  {
    "text": "have any failures and it's you know",
    "start": "398960",
    "end": "402080"
  },
  {
    "text": "relatively difficult to revert back it's",
    "start": "402080",
    "end": "404000"
  },
  {
    "text": "kind of an All or Nothing approach so",
    "start": "404000",
    "end": "407000"
  },
  {
    "text": "when we had kind of discarded all of",
    "start": "407000",
    "end": "409479"
  },
  {
    "text": "these options we set out to find a",
    "start": "409479",
    "end": "411160"
  },
  {
    "text": "solution that we could apply in a more",
    "start": "411160",
    "end": "412880"
  },
  {
    "text": "controlled way um and I'll pass it off",
    "start": "412880",
    "end": "415639"
  },
  {
    "text": "to Mo to talk about those all right so",
    "start": "415639",
    "end": "419599"
  },
  {
    "text": "so uh as Ray mentioned one of the other",
    "start": "419599",
    "end": "422240"
  },
  {
    "text": "Alternatives was to be able to use",
    "start": "422240",
    "end": "424800"
  },
  {
    "text": "multis and bind multiple ports to a",
    "start": "424800",
    "end": "427360"
  },
  {
    "text": "single pod uh this idea actually came",
    "start": "427360",
    "end": "429919"
  },
  {
    "text": "from a blog post uh from J jet stack now",
    "start": "429919",
    "end": "433319"
  },
  {
    "text": "vfi uh We've linked the blog post in the",
    "start": "433319",
    "end": "436000"
  },
  {
    "text": "slides but essentially we were able to",
    "start": "436000",
    "end": "437560"
  },
  {
    "text": "you we'd be able to use multis to bind",
    "start": "437560",
    "end": "440319"
  },
  {
    "text": "multiple networking interfaces to a pod",
    "start": "440319",
    "end": "442800"
  },
  {
    "text": "and have one network interface be uh",
    "start": "442800",
    "end": "446120"
  },
  {
    "text": "served by Calico and the other one being",
    "start": "446120",
    "end": "448680"
  },
  {
    "text": "served by psyllium",
    "start": "448680",
    "end": "450520"
  },
  {
    "text": "um in these diagrams they use Canal but",
    "start": "450520",
    "end": "453039"
  },
  {
    "text": "you know the the theory kind of",
    "start": "453039",
    "end": "455280"
  },
  {
    "text": "translates",
    "start": "455280",
    "end": "457039"
  },
  {
    "text": "um so we would start off with you know",
    "start": "457039",
    "end": "460280"
  },
  {
    "text": "the the Calico uh cni we would then go",
    "start": "460280",
    "end": "463199"
  },
  {
    "text": "into an intermediate step where we have",
    "start": "463199",
    "end": "465560"
  },
  {
    "text": "both psyllium and Calico installed uh",
    "start": "465560",
    "end": "468520"
  },
  {
    "text": "with Calico being the primary uh cni",
    "start": "468520",
    "end": "471039"
  },
  {
    "text": "provider we would then switch priorities",
    "start": "471039",
    "end": "473199"
  },
  {
    "text": "to cium and then eventually be able to",
    "start": "473199",
    "end": "476080"
  },
  {
    "text": "get rid of uh Calico alt together um",
    "start": "476080",
    "end": "479599"
  },
  {
    "text": "this didn't work for us uh unfortunately",
    "start": "479599",
    "end": "482280"
  },
  {
    "text": "um we were able to install mulus and we",
    "start": "482280",
    "end": "487800"
  },
  {
    "text": "were able to set as as a default cni and",
    "start": "487800",
    "end": "490039"
  },
  {
    "text": "it was serving uh Network traffic on the",
    "start": "490039",
    "end": "492479"
  },
  {
    "text": "Pod and we could also see that the pods",
    "start": "492479",
    "end": "495000"
  },
  {
    "text": "had both network interfaces configured",
    "start": "495000",
    "end": "497599"
  },
  {
    "text": "uh one serving Calico and the other",
    "start": "497599",
    "end": "499440"
  },
  {
    "text": "cium um and we had Calico set as a",
    "start": "499440",
    "end": "502039"
  },
  {
    "text": "primary cni so all that was working uh",
    "start": "502039",
    "end": "504720"
  },
  {
    "text": "but we couldn't get the Pod to talk to",
    "start": "504720",
    "end": "506639"
  },
  {
    "text": "each other on the different interfaces",
    "start": "506639",
    "end": "508879"
  },
  {
    "text": "so it was either uh being able to talk",
    "start": "508879",
    "end": "511639"
  },
  {
    "text": "on just Calico interfaces or psyllium",
    "start": "511639",
    "end": "513800"
  },
  {
    "text": "and this would cause problems to us",
    "start": "513800",
    "end": "515640"
  },
  {
    "text": "because it would be disruptive to the",
    "start": "515640",
    "end": "517279"
  },
  {
    "text": "workloads uh there was periods of uh in",
    "start": "517279",
    "end": "520680"
  },
  {
    "text": "um non-connectivity between the pods",
    "start": "520680",
    "end": "522599"
  },
  {
    "text": "that we weren't able to kind of iron out",
    "start": "522599",
    "end": "524440"
  },
  {
    "text": "and really figure out why that was",
    "start": "524440",
    "end": "526080"
  },
  {
    "text": "happening and just overall there was",
    "start": "526080",
    "end": "528279"
  },
  {
    "text": "uncertainty around this um migration",
    "start": "528279",
    "end": "530800"
  },
  {
    "text": "path um there was also you know the one",
    "start": "530800",
    "end": "533959"
  },
  {
    "text": "of the steps in that post was to use",
    "start": "533959",
    "end": "536160"
  },
  {
    "text": "source-based routing to kind of",
    "start": "536160",
    "end": "537720"
  },
  {
    "text": "eliminate this problem uh ass SBR is a",
    "start": "537720",
    "end": "540519"
  },
  {
    "text": "meta plugin that you can use uh but we",
    "start": "540519",
    "end": "542800"
  },
  {
    "text": "weren't able to configure in a way that",
    "start": "542800",
    "end": "544839"
  },
  {
    "text": "would work for both interfaces so we",
    "start": "544839",
    "end": "546959"
  },
  {
    "text": "kind of parked that to the side but we",
    "start": "546959",
    "end": "549040"
  },
  {
    "text": "did learn a lot uh we were able to have",
    "start": "549040",
    "end": "551880"
  },
  {
    "text": "a reusable um roll back strategy so for",
    "start": "551880",
    "end": "555600"
  },
  {
    "text": "when something would EV inevitably uh",
    "start": "555600",
    "end": "559240"
  },
  {
    "text": "when it would eventually Crash and Burn",
    "start": "559240",
    "end": "561519"
  },
  {
    "text": "uh so we were able to roll back uh to",
    "start": "561519",
    "end": "564000"
  },
  {
    "text": "you know going back to",
    "start": "564000",
    "end": "565320"
  },
  {
    "text": "Calico uh we understood that we need to",
    "start": "565320",
    "end": "567880"
  },
  {
    "text": "update our Rancher cluster agents Ray",
    "start": "567880",
    "end": "569640"
  },
  {
    "text": "mentioned we use Rancher as our top",
    "start": "569640",
    "end": "571880"
  },
  {
    "text": "management uh control plane for our",
    "start": "571880",
    "end": "573839"
  },
  {
    "text": "Downstream clusters to use host network",
    "start": "573839",
    "end": "576279"
  },
  {
    "text": "uh for those agents to maintain",
    "start": "576279",
    "end": "578040"
  },
  {
    "text": "connection while we're you know messing",
    "start": "578040",
    "end": "579720"
  },
  {
    "text": "around with the cni uh and we understood",
    "start": "579720",
    "end": "582480"
  },
  {
    "text": "cni configuration in a little bit more",
    "start": "582480",
    "end": "584560"
  },
  {
    "text": "detail um using mulus helped us",
    "start": "584560",
    "end": "587920"
  },
  {
    "text": "understand the configuration of that",
    "start": "587920",
    "end": "589200"
  },
  {
    "text": "structure and you'll see that in the",
    "start": "589200",
    "end": "590440"
  },
  {
    "text": "demo uh where multis manipulates those",
    "start": "590440",
    "end": "593680"
  },
  {
    "text": "configurations in the ETC cni uh folder",
    "start": "593680",
    "end": "596760"
  },
  {
    "text": "to manage priorities do some cni",
    "start": "596760",
    "end": "598920"
  },
  {
    "text": "chaining and all that good stuff so we",
    "start": "598920",
    "end": "601160"
  },
  {
    "text": "were able to use that knowledge for when",
    "start": "601160",
    "end": "603120"
  },
  {
    "text": "we actually applied the the migration",
    "start": "603120",
    "end": "605760"
  },
  {
    "text": "and then we also learned a little bit",
    "start": "605760",
    "end": "607560"
  },
  {
    "text": "about celium configuration and about uh",
    "start": "607560",
    "end": "609800"
  },
  {
    "text": "the way that uh the celium can take over",
    "start": "609800",
    "end": "612959"
  },
  {
    "text": "cni paths uh using cni exclusivity mode",
    "start": "612959",
    "end": "616399"
  },
  {
    "text": "and things that we may not necessarily",
    "start": "616399",
    "end": "618000"
  },
  {
    "text": "want to do when we're running both uh",
    "start": "618000",
    "end": "620440"
  },
  {
    "text": "Network providers within the",
    "start": "620440",
    "end": "622959"
  },
  {
    "text": "cluster um so this brought us into the",
    "start": "622959",
    "end": "626279"
  },
  {
    "text": "cium version 1.13 this was released like",
    "start": "626279",
    "end": "628760"
  },
  {
    "text": "as we were actually actively trying to",
    "start": "628760",
    "end": "630640"
  },
  {
    "text": "do this um so that was very convenient",
    "start": "630640",
    "end": "632839"
  },
  {
    "text": "timing uh and this per node",
    "start": "632839",
    "end": "635120"
  },
  {
    "text": "configuration allows you to specify ayum",
    "start": "635120",
    "end": "638399"
  },
  {
    "text": "configuration on a per node basis based",
    "start": "638399",
    "end": "641160"
  },
  {
    "text": "on node labels so we were we would be",
    "start": "641160",
    "end": "644240"
  },
  {
    "text": "able to use this in our migration um to",
    "start": "644240",
    "end": "647200"
  },
  {
    "text": "siyum and then we actually also used it",
    "start": "647200",
    "end": "649519"
  },
  {
    "text": "later on when we did Q proxy replacement",
    "start": "649519",
    "end": "651760"
  },
  {
    "text": "and uh all that other",
    "start": "651760",
    "end": "653800"
  },
  {
    "text": "stuff um so with this we can use Calico",
    "start": "653800",
    "end": "657000"
  },
  {
    "text": "as a default cni and once the node is",
    "start": "657000",
    "end": "658880"
  },
  {
    "text": "labeled we would restart psyllium agents",
    "start": "658880",
    "end": "660959"
  },
  {
    "text": "to take over that instance and basically",
    "start": "660959",
    "end": "663839"
  },
  {
    "text": "manage pods under that um one important",
    "start": "663839",
    "end": "666680"
  },
  {
    "text": "thing we need to make sure to do is Whit",
    "start": "666680",
    "end": "668399"
  },
  {
    "text": "list uh pod network cers uh for both",
    "start": "668399",
    "end": "671279"
  },
  {
    "text": "Calico and psyllium in each other's",
    "start": "671279",
    "end": "673200"
  },
  {
    "text": "firewall rules um in order to allow for",
    "start": "673200",
    "end": "675839"
  },
  {
    "text": "communication between pods so pods that",
    "start": "675839",
    "end": "678040"
  },
  {
    "text": "are just just running Calico can still",
    "start": "678040",
    "end": "680480"
  },
  {
    "text": "talk to pods that are running",
    "start": "680480",
    "end": "682560"
  },
  {
    "text": "psyllium uh just from kind of a big",
    "start": "682560",
    "end": "684760"
  },
  {
    "text": "picture perspective uh for running the",
    "start": "684760",
    "end": "687240"
  },
  {
    "text": "migration um these are kind of the steps",
    "start": "687240",
    "end": "689600"
  },
  {
    "text": "we're going to go into it a little bit",
    "start": "689600",
    "end": "691240"
  },
  {
    "text": "um just from a a p like a just from this",
    "start": "691240",
    "end": "695240"
  },
  {
    "text": "diagram perspective uh so first of all",
    "start": "695240",
    "end": "698040"
  },
  {
    "text": "uh preparing the environment uh one",
    "start": "698040",
    "end": "699959"
  },
  {
    "text": "thing you need to make sure to you set",
    "start": "699959",
    "end": "701560"
  },
  {
    "text": "is the Calico IP Auto detection method",
    "start": "701560",
    "end": "704639"
  },
  {
    "text": "because by default it tries to take over",
    "start": "704639",
    "end": "706399"
  },
  {
    "text": "the interfaces on those instances and",
    "start": "706399",
    "end": "709079"
  },
  {
    "text": "when you have celium installed at the",
    "start": "709079",
    "end": "710680"
  },
  {
    "text": "same time psyllium produces its own uh",
    "start": "710680",
    "end": "713480"
  },
  {
    "text": "virtual interfaces on the underlying",
    "start": "713480",
    "end": "716079"
  },
  {
    "text": "instance and Calico starts to freak out",
    "start": "716079",
    "end": "718279"
  },
  {
    "text": "cu it doesn't know how to manage this or",
    "start": "718279",
    "end": "719760"
  },
  {
    "text": "can't take it over and eventually goes",
    "start": "719760",
    "end": "721519"
  },
  {
    "text": "into a crash Loop uh so that was",
    "start": "721519",
    "end": "723320"
  },
  {
    "text": "important to do um we also like I",
    "start": "723320",
    "end": "725720"
  },
  {
    "text": "mentioned Whit listing the celium Siders",
    "start": "725720",
    "end": "727720"
  },
  {
    "text": "in the existing firewall rules so that",
    "start": "727720",
    "end": "729920"
  },
  {
    "text": "we can have seamless uh connectivity",
    "start": "729920",
    "end": "732480"
  },
  {
    "text": "between the",
    "start": "732480",
    "end": "733480"
  },
  {
    "text": "two um for preparing the celium",
    "start": "733480",
    "end": "735600"
  },
  {
    "text": "deployment there are certain settings",
    "start": "735600",
    "end": "737800"
  },
  {
    "text": "that you want to specify um and just",
    "start": "737800",
    "end": "740720"
  },
  {
    "text": "going to point out one specific one was",
    "start": "740720",
    "end": "742680"
  },
  {
    "text": "the cluster pool cider um so this was uh",
    "start": "742680",
    "end": "746680"
  },
  {
    "text": "a configuration that you can set so that",
    "start": "746680",
    "end": "748720"
  },
  {
    "text": "sing",
    "start": "748720",
    "end": "750079"
  },
  {
    "text": "uh specific pods will be on a different",
    "start": "750079",
    "end": "752600"
  },
  {
    "text": "network than the Calico ones and you'll",
    "start": "752600",
    "end": "754560"
  },
  {
    "text": "see that in in the",
    "start": "754560",
    "end": "756000"
  },
  {
    "text": "demo um and just making sure that's not",
    "start": "756000",
    "end": "758519"
  },
  {
    "text": "an overlapping",
    "start": "758519",
    "end": "760160"
  },
  {
    "text": "cider uh and then for deploying the",
    "start": "760160",
    "end": "763000"
  },
  {
    "text": "actual per node configuration uh there's",
    "start": "763000",
    "end": "765480"
  },
  {
    "text": "this custom resource definition that was",
    "start": "765480",
    "end": "767279"
  },
  {
    "text": "introduced with this feature called",
    "start": "767279",
    "end": "768519"
  },
  {
    "text": "celium node config uh which will",
    "start": "768519",
    "end": "771320"
  },
  {
    "text": "basically allow you to override in",
    "start": "771320",
    "end": "772839"
  },
  {
    "text": "default values uh based on those node",
    "start": "772839",
    "end": "775600"
  },
  {
    "text": "labels and you'll see that uh when we do",
    "start": "775600",
    "end": "777959"
  },
  {
    "text": "uh the demo as well",
    "start": "777959",
    "end": "779839"
  },
  {
    "text": "uh we'll dive into now the migration uh",
    "start": "779839",
    "end": "782680"
  },
  {
    "text": "for the nodes um we're going to pick a",
    "start": "782680",
    "end": "784800"
  },
  {
    "text": "node we're going to cordin and drain it",
    "start": "784800",
    "end": "786880"
  },
  {
    "text": "we label the node as we intend to",
    "start": "786880",
    "end": "789519"
  },
  {
    "text": "restart uh as we intend for it to take",
    "start": "789519",
    "end": "791800"
  },
  {
    "text": "over we're going restart the celum pods",
    "start": "791800",
    "end": "794199"
  },
  {
    "text": "validate that cni is in place then we",
    "start": "794199",
    "end": "797199"
  },
  {
    "text": "uncoin it restart any existing workloads",
    "start": "797199",
    "end": "799639"
  },
  {
    "text": "like demon sets that wouldn't be taken",
    "start": "799639",
    "end": "801160"
  },
  {
    "text": "care of by the by the initial drain and",
    "start": "801160",
    "end": "803720"
  },
  {
    "text": "then you know if there are any more",
    "start": "803720",
    "end": "804720"
  },
  {
    "text": "nodes we kind of rinse repeat until",
    "start": "804720",
    "end": "806959"
  },
  {
    "text": "we're done uh if you're in larger",
    "start": "806959",
    "end": "808680"
  },
  {
    "text": "clusters with more generic node groups",
    "start": "808680",
    "end": "811399"
  },
  {
    "text": "then you can do this with more than one",
    "start": "811399",
    "end": "813120"
  },
  {
    "text": "node at a time and we kind of did that",
    "start": "813120",
    "end": "815240"
  },
  {
    "text": "in some of our bigger production",
    "start": "815240",
    "end": "818440"
  },
  {
    "text": "clusters um all right so let's dive in",
    "start": "818440",
    "end": "822160"
  },
  {
    "text": "oh and sorry like I mentioned uh once",
    "start": "822160",
    "end": "824120"
  },
  {
    "text": "this is all done we're going to set",
    "start": "824120",
    "end": "825680"
  },
  {
    "text": "celum as a default cni we clean up the",
    "start": "825680",
    "end": "828600"
  },
  {
    "text": "Calico remnants and then you're done all",
    "start": "828600",
    "end": "831959"
  },
  {
    "text": "right so let's dive into the demo a",
    "start": "831959",
    "end": "833560"
  },
  {
    "text": "little bit um I'm going to ask to hold",
    "start": "833560",
    "end": "837320"
  },
  {
    "text": "that and just give me one second while I",
    "start": "837320",
    "end": "840959"
  },
  {
    "text": "mirror so I can see what I'm",
    "start": "840959",
    "end": "843720"
  },
  {
    "text": "doing",
    "start": "843720",
    "end": "846600"
  },
  {
    "text": "okay all right so bear with us is a live",
    "start": "846600",
    "end": "849920"
  },
  {
    "text": "demo uh we're going to try and try and",
    "start": "849920",
    "end": "852320"
  },
  {
    "text": "do it here um and we're just going to",
    "start": "852320",
    "end": "855800"
  },
  {
    "text": "keep referring back to this uh slide a",
    "start": "855800",
    "end": "858120"
  },
  {
    "text": "little bit so let's just do",
    "start": "858120",
    "end": "860800"
  },
  {
    "text": "that over",
    "start": "860800",
    "end": "863360"
  },
  {
    "text": "here all right so what we have right now",
    "start": "863360",
    "end": "866399"
  },
  {
    "text": "is hope you can see that uh is a",
    "start": "866399",
    "end": "868600"
  },
  {
    "text": "kubernetes cluster just using kind",
    "start": "868600",
    "end": "870680"
  },
  {
    "text": "kubernetes and Docker uh it has a",
    "start": "870680",
    "end": "873639"
  },
  {
    "text": "control plane and three worker nodes is",
    "start": "873639",
    "end": "875800"
  },
  {
    "text": "all running locally on my uh laptop uh",
    "start": "875800",
    "end": "878519"
  },
  {
    "text": "nothing much kind of installed on the",
    "start": "878519",
    "end": "880680"
  },
  {
    "text": "actual cluster just a couple of you know",
    "start": "880680",
    "end": "883160"
  },
  {
    "text": "service pods uh Calico is obviously",
    "start": "883160",
    "end": "885639"
  },
  {
    "text": "installed uh there's this application",
    "start": "885639",
    "end": "887680"
  },
  {
    "text": "called uh called gold Pinger uh it's a",
    "start": "887680",
    "end": "891240"
  },
  {
    "text": "uh a product developed by Bloomberg and",
    "start": "891240",
    "end": "894279"
  },
  {
    "text": "open source and that's what you kind of",
    "start": "894279",
    "end": "896600"
  },
  {
    "text": "see here it allows you to kind of do",
    "start": "896600",
    "end": "899199"
  },
  {
    "text": "pings between instances and this was",
    "start": "899199",
    "end": "901360"
  },
  {
    "text": "kind of pivotal actually in identifying",
    "start": "901360",
    "end": "903480"
  },
  {
    "text": "when we're actually doing a migration",
    "start": "903480",
    "end": "905120"
  },
  {
    "text": "that things continue to be uh connected",
    "start": "905120",
    "end": "908000"
  },
  {
    "text": "and and green um and we actually adopted",
    "start": "908000",
    "end": "910519"
  },
  {
    "text": "this in our overall uh observability",
    "start": "910519",
    "end": "913160"
  },
  {
    "text": "strategy after uh after introducing it",
    "start": "913160",
    "end": "916160"
  },
  {
    "text": "here um okay so we're going to go ahead",
    "start": "916160",
    "end": "919680"
  },
  {
    "text": "and install actually I'm going to show",
    "start": "919680",
    "end": "921560"
  },
  {
    "text": "you here first uh some of the value",
    "start": "921560",
    "end": "924000"
  },
  {
    "text": "files that we had to overwrite when we",
    "start": "924000",
    "end": "926199"
  },
  {
    "text": "install Helm like I mentioned before uh",
    "start": "926199",
    "end": "928639"
  },
  {
    "text": "create a separate CER network is",
    "start": "928639",
    "end": "931800"
  },
  {
    "text": "important uh making sure that we're uh",
    "start": "931800",
    "end": "935440"
  },
  {
    "text": "not restarting unmanaged pods uh because",
    "start": "935440",
    "end": "938600"
  },
  {
    "text": "at this present time uh Calico is",
    "start": "938600",
    "end": "941120"
  },
  {
    "text": "managing those pods and we don't want",
    "start": "941120",
    "end": "942399"
  },
  {
    "text": "celium to touch those uh we also make",
    "start": "942399",
    "end": "944759"
  },
  {
    "text": "sure that the cni is not going to",
    "start": "944759",
    "end": "946160"
  },
  {
    "text": "uninstall everything um and it's going",
    "start": "946160",
    "end": "949240"
  },
  {
    "text": "to proceed as normal so we're going to",
    "start": "949240",
    "end": "951639"
  },
  {
    "text": "go ahead and",
    "start": "951639",
    "end": "954000"
  },
  {
    "text": "run Helm install uh and we're going to",
    "start": "954000",
    "end": "957079"
  },
  {
    "text": "see this kind of installing celium into",
    "start": "957079",
    "end": "959040"
  },
  {
    "text": "our cluster uh we see at the top uh that",
    "start": "959040",
    "end": "962440"
  },
  {
    "text": "the celum pods are kind of coming up uh",
    "start": "962440",
    "end": "966000"
  },
  {
    "text": "and we'll go into a running State",
    "start": "966000",
    "end": "967759"
  },
  {
    "text": "shortly uh I'm just going to while",
    "start": "967759",
    "end": "970199"
  },
  {
    "text": "that's happening point you to the celium",
    "start": "970199",
    "end": "971920"
  },
  {
    "text": "node config like I mentioned this is the",
    "start": "971920",
    "end": "973519"
  },
  {
    "text": "custom resource definition that will",
    "start": "973519",
    "end": "975600"
  },
  {
    "text": "allow you to override the defaults that",
    "start": "975600",
    "end": "978199"
  },
  {
    "text": "we specify in our original deployment so",
    "start": "978199",
    "end": "980959"
  },
  {
    "text": "in this case we're going to actually",
    "start": "980959",
    "end": "982959"
  },
  {
    "text": "deploy the psyllium conf list um to this",
    "start": "982959",
    "end": "987160"
  },
  {
    "text": "uh cni directory we're going to then",
    "start": "987160",
    "end": "990160"
  },
  {
    "text": "take over the cni exclusivity and then",
    "start": "990160",
    "end": "992560"
  },
  {
    "text": "we're going to do that only on nodes",
    "start": "992560",
    "end": "994279"
  },
  {
    "text": "that are labeled with this",
    "start": "994279",
    "end": "996360"
  },
  {
    "text": "label um so I'm just going to apply",
    "start": "996360",
    "end": "999880"
  },
  {
    "text": "this okay",
    "start": "999880",
    "end": "1002759"
  },
  {
    "text": "apply perfect okay um and you know one",
    "start": "1002759",
    "end": "1007160"
  },
  {
    "text": "handy dandy tool is the celium CLI and",
    "start": "1007160",
    "end": "1010000"
  },
  {
    "text": "using psyllium status to actually see uh",
    "start": "1010000",
    "end": "1012880"
  },
  {
    "text": "some of the you know gives you kind of a",
    "start": "1012880",
    "end": "1014759"
  },
  {
    "text": "snapshot of how well your uh cluster is",
    "start": "1014759",
    "end": "1017120"
  },
  {
    "text": "performing uh uh you see here that the",
    "start": "1017120",
    "end": "1019480"
  },
  {
    "text": "celium agents are are healthy operators",
    "start": "1019480",
    "end": "1022000"
  },
  {
    "text": "running uh and you'll see here that zero",
    "start": "1022000",
    "end": "1023959"
  },
  {
    "text": "out of the seven pods in the cluster is",
    "start": "1023959",
    "end": "1026038"
  },
  {
    "text": "actually managed by celium this makes",
    "start": "1026039",
    "end": "1027400"
  },
  {
    "text": "sense this number will go up as we start",
    "start": "1027400",
    "end": "1029400"
  },
  {
    "text": "to migrate more and more of the nodes uh",
    "start": "1029400",
    "end": "1032079"
  },
  {
    "text": "the other thing I wanted to show you",
    "start": "1032079",
    "end": "1033240"
  },
  {
    "text": "here was uh this so this is um um EXA",
    "start": "1033240",
    "end": "1036400"
  },
  {
    "text": "into the kind worker that we're going to",
    "start": "1036400",
    "end": "1038880"
  },
  {
    "text": "be kind of working with you see here",
    "start": "1038880",
    "end": "1040959"
  },
  {
    "text": "that in the cni directory it's only",
    "start": "1040959",
    "end": "1042558"
  },
  {
    "text": "Calico installed there's no mention of",
    "start": "1042559",
    "end": "1044798"
  },
  {
    "text": "psyllium nothing else in",
    "start": "1044799",
    "end": "1046798"
  },
  {
    "text": "here okay so Let's uh go to our uh",
    "start": "1046799",
    "end": "1051240"
  },
  {
    "text": "little chart here uh let's first pick a",
    "start": "1051240",
    "end": "1053240"
  },
  {
    "text": "node and we're going to go ahead and",
    "start": "1053240",
    "end": "1055440"
  },
  {
    "text": "pick um kind worker um there are three",
    "start": "1055440",
    "end": "1060080"
  },
  {
    "text": "different worker nodes you kind of want",
    "start": "1060080",
    "end": "1061600"
  },
  {
    "text": "to start with your worker nodes and then",
    "start": "1061600",
    "end": "1062840"
  },
  {
    "text": "update your control plane afterwards so",
    "start": "1062840",
    "end": "1065600"
  },
  {
    "text": "we've uh done it with a kind worker uh",
    "start": "1065600",
    "end": "1067600"
  },
  {
    "text": "node uh now we're going to cordin and",
    "start": "1067600",
    "end": "1070400"
  },
  {
    "text": "draining drain it uh so go ahead",
    "start": "1070400",
    "end": "1075440"
  },
  {
    "text": "and",
    "start": "1075440",
    "end": "1077600"
  },
  {
    "text": "drain so so you see here some of the",
    "start": "1077600",
    "end": "1079840"
  },
  {
    "text": "things start to move away from kind",
    "start": "1079840",
    "end": "1081760"
  },
  {
    "text": "worker um obviously demon sets are not",
    "start": "1081760",
    "end": "1083880"
  },
  {
    "text": "affected by this so the gold Pinger pod",
    "start": "1083880",
    "end": "1086240"
  },
  {
    "text": "continues to run and I'll just point out",
    "start": "1086240",
    "end": "1088080"
  },
  {
    "text": "that this is running on the 192 Calico",
    "start": "1088080",
    "end": "1090480"
  },
  {
    "text": "network uh and you will see here that",
    "start": "1090480",
    "end": "1092360"
  },
  {
    "text": "the schedule is disabled because we've",
    "start": "1092360",
    "end": "1093919"
  },
  {
    "text": "gone ahead and drained it and coordin",
    "start": "1093919",
    "end": "1096080"
  },
  {
    "text": "it all right now we're going to label",
    "start": "1096080",
    "end": "1098000"
  },
  {
    "text": "the",
    "start": "1098000",
    "end": "1098760"
  },
  {
    "text": "node um",
    "start": "1098760",
    "end": "1102240"
  },
  {
    "text": "so the node is now labeled with our",
    "start": "1102760",
    "end": "1105840"
  },
  {
    "text": "default uh psyllium as um in it's uh set",
    "start": "1105840",
    "end": "1110280"
  },
  {
    "text": "it to True which will allow us to uh",
    "start": "1110280",
    "end": "1112720"
  },
  {
    "text": "take over that node with",
    "start": "1112720",
    "end": "1114760"
  },
  {
    "text": "celium uh we're going to go ahead and",
    "start": "1114760",
    "end": "1116559"
  },
  {
    "text": "restart the celium Pod",
    "start": "1116559",
    "end": "1118600"
  },
  {
    "text": "so uh I'm just going to do this from",
    "start": "1118600",
    "end": "1120799"
  },
  {
    "text": "here",
    "start": "1120799",
    "end": "1123679"
  },
  {
    "text": "oops cium pod let's go ahead and kill",
    "start": "1123760",
    "end": "1126320"
  },
  {
    "text": "that one it's going to spin up again the",
    "start": "1126320",
    "end": "1128720"
  },
  {
    "text": "celium agent will now see that this node",
    "start": "1128720",
    "end": "1130640"
  },
  {
    "text": "is labeled and we'll actually take it",
    "start": "1130640",
    "end": "1132600"
  },
  {
    "text": "over um and you will see that",
    "start": "1132600",
    "end": "1135520"
  },
  {
    "text": "shortly when we do here we see here now",
    "start": "1135520",
    "end": "1139039"
  },
  {
    "text": "celium has injected its own config into",
    "start": "1139039",
    "end": "1141600"
  },
  {
    "text": "the cni directory and because of the",
    "start": "1141600",
    "end": "1144080"
  },
  {
    "text": "exclusivity we've actually um uh set the",
    "start": "1144080",
    "end": "1147799"
  },
  {
    "text": "Calico config to ayum orback extension",
    "start": "1147799",
    "end": "1152320"
  },
  {
    "text": "which means it won't be used at all by",
    "start": "1152320",
    "end": "1154400"
  },
  {
    "text": "the Pod sandbox when it spins",
    "start": "1154400",
    "end": "1156919"
  },
  {
    "text": "up uh so we validated the new cni and",
    "start": "1156919",
    "end": "1159960"
  },
  {
    "text": "now let's go ahead and uncor in the node",
    "start": "1159960",
    "end": "1161960"
  },
  {
    "text": "and start um",
    "start": "1161960",
    "end": "1166559"
  },
  {
    "text": "recording uh so now any new work clads",
    "start": "1166559",
    "end": "1169520"
  },
  {
    "text": "uh being being scheduled on this kind",
    "start": "1169520",
    "end": "1171320"
  },
  {
    "text": "worker will actually pick up Calico um",
    "start": "1171320",
    "end": "1173679"
  },
  {
    "text": "like I mentioned because Goldfinger is",
    "start": "1173679",
    "end": "1175320"
  },
  {
    "text": "running as a demon set it is not",
    "start": "1175320",
    "end": "1177400"
  },
  {
    "text": "affected by this so we're just going to",
    "start": "1177400",
    "end": "1178480"
  },
  {
    "text": "go ahead and manually kill it and we'll",
    "start": "1178480",
    "end": "1181200"
  },
  {
    "text": "see it come up with a 10245 Network",
    "start": "1181200",
    "end": "1184760"
  },
  {
    "text": "which is what we expect being the cium",
    "start": "1184760",
    "end": "1186799"
  },
  {
    "text": "one uh let's kind of double check this",
    "start": "1186799",
    "end": "1189799"
  },
  {
    "text": "here",
    "start": "1189799",
    "end": "1192120"
  },
  {
    "text": "oops port forward is our",
    "start": "1192280",
    "end": "1195720"
  },
  {
    "text": "friend and we're going to go and go uh",
    "start": "1195720",
    "end": "1199159"
  },
  {
    "text": "refresh the gold Pinger interface and",
    "start": "1199159",
    "end": "1201159"
  },
  {
    "text": "again we see connectivity across all",
    "start": "1201159",
    "end": "1202840"
  },
  {
    "text": "three things so that's again good sign",
    "start": "1202840",
    "end": "1206000"
  },
  {
    "text": "and then lastly we're going to check",
    "start": "1206000",
    "end": "1207559"
  },
  {
    "text": "psyllium",
    "start": "1207559",
    "end": "1209000"
  },
  {
    "text": "status and we see here that one out of",
    "start": "1209000",
    "end": "1211400"
  },
  {
    "text": "the seven pods are managed by psyllium",
    "start": "1211400",
    "end": "1213720"
  },
  {
    "text": "and now we can kind of rinse repeat um",
    "start": "1213720",
    "end": "1216960"
  },
  {
    "text": "until we're we're done um I think I have",
    "start": "1216960",
    "end": "1219600"
  },
  {
    "text": "a little bit of time I'm just going to",
    "start": "1219600",
    "end": "1220799"
  },
  {
    "text": "show you what a roll back looks like um",
    "start": "1220799",
    "end": "1223480"
  },
  {
    "text": "so we're going to go ahead and uninstall",
    "start": "1223480",
    "end": "1224919"
  },
  {
    "text": "cium you know for whatever reason let's",
    "start": "1224919",
    "end": "1227120"
  },
  {
    "text": "say uh an issue happened",
    "start": "1227120",
    "end": "1229520"
  },
  {
    "text": "uh we can go ahead and uninstall it um",
    "start": "1229520",
    "end": "1232559"
  },
  {
    "text": "so it's going to remove it from our",
    "start": "1232559",
    "end": "1234960"
  },
  {
    "text": "cluster uh and then we can actually uh",
    "start": "1234960",
    "end": "1238520"
  },
  {
    "text": "manually change in here",
    "start": "1238520",
    "end": "1241520"
  },
  {
    "text": "remove the the",
    "start": "1241520",
    "end": "1244559"
  },
  {
    "text": "config and then move the Calico one to",
    "start": "1244559",
    "end": "1247080"
  },
  {
    "text": "make it in",
    "start": "1247080",
    "end": "1248720"
  },
  {
    "text": "place and then we can go ahead and",
    "start": "1248720",
    "end": "1250760"
  },
  {
    "text": "restart Our Kind worker uh gold finger",
    "start": "1250760",
    "end": "1253840"
  },
  {
    "text": "pod and it's going to come up on the 192",
    "start": "1253840",
    "end": "1256200"
  },
  {
    "text": "Calico interface so this is just a roll",
    "start": "1256200",
    "end": "1258799"
  },
  {
    "text": "back in case we need to do",
    "start": "1258799",
    "end": "1260960"
  },
  {
    "text": "that all",
    "start": "1260960",
    "end": "1264120"
  },
  {
    "text": "right okay some things to consider um so",
    "start": "1264720",
    "end": "1267720"
  },
  {
    "text": "in our kind of environment our clusters",
    "start": "1267720",
    "end": "1269679"
  },
  {
    "text": "were only running ipv4 uh so your",
    "start": "1269679",
    "end": "1271720"
  },
  {
    "text": "mileage may vary for IPv6 clusters um",
    "start": "1271720",
    "end": "1274880"
  },
  {
    "text": "and in our cluster we're actually",
    "start": "1274880",
    "end": "1275880"
  },
  {
    "text": "running a pretty old Calico version so",
    "start": "1275880",
    "end": "1277960"
  },
  {
    "text": "some extra cleanup was needed to flush",
    "start": "1277960",
    "end": "1279720"
  },
  {
    "text": "out some of the IP table rules um but as",
    "start": "1279720",
    "end": "1282600"
  },
  {
    "text": "you saw we were running it with latest",
    "start": "1282600",
    "end": "1284279"
  },
  {
    "text": "Calico and you know the migration",
    "start": "1284279",
    "end": "1285960"
  },
  {
    "text": "happened um as expected same with the S",
    "start": "1285960",
    "end": "1288880"
  },
  {
    "text": "version um as mentioned before we kept",
    "start": "1288880",
    "end": "1291960"
  },
  {
    "text": "the Q proxy replacement out of this",
    "start": "1291960",
    "end": "1294440"
  },
  {
    "text": "migration um but we did it eventually uh",
    "start": "1294440",
    "end": "1297440"
  },
  {
    "text": "but that was just to reduce complexity",
    "start": "1297440",
    "end": "1299760"
  },
  {
    "text": "um we kind of shot oursel self in the",
    "start": "1299760",
    "end": "1301840"
  },
  {
    "text": "foot a little bit because we did have",
    "start": "1301840",
    "end": "1303679"
  },
  {
    "text": "some hostport Services I know the",
    "start": "1303679",
    "end": "1305440"
  },
  {
    "text": "confluent folks talked about that uh",
    "start": "1305440",
    "end": "1307080"
  },
  {
    "text": "earlier this morning um with the",
    "start": "1307080",
    "end": "1309240"
  },
  {
    "text": "hostport we had some hostport services",
    "start": "1309240",
    "end": "1311360"
  },
  {
    "text": "that we needed to enable the port map",
    "start": "1311360",
    "end": "1313559"
  },
  {
    "text": "which is cni chaining um which allows us",
    "start": "1313559",
    "end": "1316720"
  },
  {
    "text": "to actually you know reach those post",
    "start": "1316720",
    "end": "1318760"
  },
  {
    "text": "sport Services until we were able to run",
    "start": "1318760",
    "end": "1320679"
  },
  {
    "text": "the Q proxy replacement um and we also",
    "start": "1320679",
    "end": "1323480"
  },
  {
    "text": "have a block post uh about this that has",
    "start": "1323480",
    "end": "1326000"
  },
  {
    "text": "some more details so with that I'm going",
    "start": "1326000",
    "end": "1327760"
  },
  {
    "text": "to pass it to Rey for some closing",
    "start": "1327760",
    "end": "1330679"
  },
  {
    "text": "thoughts yeah so like I said we had a",
    "start": "1330679",
    "end": "1334080"
  },
  {
    "text": "little bit over 20 clusters most of them",
    "start": "1334080",
    "end": "1336400"
  },
  {
    "text": "were in production some of them were",
    "start": "1336400",
    "end": "1339039"
  },
  {
    "text": "quite large um with a few hundred nodes",
    "start": "1339039",
    "end": "1342840"
  },
  {
    "text": "obviously when we were migrating larger",
    "start": "1342840",
    "end": "1344760"
  },
  {
    "text": "nodes uh or larger clusters uh batching",
    "start": "1344760",
    "end": "1348919"
  },
  {
    "text": "and labeling a whole bunch of nodes at",
    "start": "1348919",
    "end": "1350960"
  },
  {
    "text": "once uh really speeds up this process uh",
    "start": "1350960",
    "end": "1354960"
  },
  {
    "text": "it is important though to have a good",
    "start": "1354960",
    "end": "1356760"
  },
  {
    "text": "understanding of the workload running on",
    "start": "1356760",
    "end": "1358039"
  },
  {
    "text": "your uh on your clusters for example you",
    "start": "1358039",
    "end": "1361080"
  },
  {
    "text": "know we have a few data uh Services we",
    "start": "1361080",
    "end": "1364600"
  },
  {
    "text": "have a couple of like in-memory",
    "start": "1364600",
    "end": "1366640"
  },
  {
    "text": "databases running on our production",
    "start": "1366640",
    "end": "1368240"
  },
  {
    "text": "clusters in some cases so having this",
    "start": "1368240",
    "end": "1370720"
  },
  {
    "text": "very controllable migration path where",
    "start": "1370720",
    "end": "1373480"
  },
  {
    "text": "we can do it based on labels uh allowed",
    "start": "1373480",
    "end": "1376120"
  },
  {
    "text": "us to migrate those services that we may",
    "start": "1376120",
    "end": "1379039"
  },
  {
    "text": "not be able to just roll them all at the",
    "start": "1379039",
    "end": "1381679"
  },
  {
    "text": "same time um so taking care with you",
    "start": "1381679",
    "end": "1385120"
  },
  {
    "text": "know sensitive workload um having this",
    "start": "1385120",
    "end": "1387960"
  },
  {
    "text": "like very uh adaptable procedure using",
    "start": "1387960",
    "end": "1390840"
  },
  {
    "text": "the psyllium node config crd uh was",
    "start": "1390840",
    "end": "1393919"
  },
  {
    "text": "super important for us uh and really is",
    "start": "1393919",
    "end": "1396840"
  },
  {
    "text": "what allowed us to accomplish this",
    "start": "1396840",
    "end": "1398760"
  },
  {
    "text": "migration uh without having any service",
    "start": "1398760",
    "end": "1401559"
  },
  {
    "text": "interruptions at all uh by completing",
    "start": "1401559",
    "end": "1405039"
  },
  {
    "text": "this migration and moving to psyllium we",
    "start": "1405039",
    "end": "1407159"
  },
  {
    "text": "actually you know reduce the number of",
    "start": "1407159",
    "end": "1409760"
  },
  {
    "text": "PRS that our self-service tenants needed",
    "start": "1409760",
    "end": "1413000"
  },
  {
    "text": "to deploy a service with a network",
    "start": "1413000",
    "end": "1415600"
  },
  {
    "text": "policy you know we cut it in half uh",
    "start": "1415600",
    "end": "1418000"
  },
  {
    "text": "it's all managed by like a single chart",
    "start": "1418000",
    "end": "1420159"
  },
  {
    "text": "now um and also I mentioned before but",
    "start": "1420159",
    "end": "1423880"
  },
  {
    "text": "our firewall rules being significantly",
    "start": "1423880",
    "end": "1425760"
  },
  {
    "text": "more readable and based on identities",
    "start": "1425760",
    "end": "1427720"
  },
  {
    "text": "rather than uh other uh information",
    "start": "1427720",
    "end": "1431320"
  },
  {
    "text": "really goes a long way to making",
    "start": "1431320",
    "end": "1433640"
  },
  {
    "text": "self-service for tenants a lot easier as",
    "start": "1433640",
    "end": "1435960"
  },
  {
    "text": "well as uh making our security teams",
    "start": "1435960",
    "end": "1438039"
  },
  {
    "text": "much Happ happier with being able to",
    "start": "1438039",
    "end": "1439600"
  },
  {
    "text": "audit and understand what's going on in",
    "start": "1439600",
    "end": "1441720"
  },
  {
    "text": "our policies without needing to cross",
    "start": "1441720",
    "end": "1443840"
  },
  {
    "text": "reference cross reference a bunch of",
    "start": "1443840",
    "end": "1445760"
  },
  {
    "text": "things uh the cium node config crd like",
    "start": "1445760",
    "end": "1448840"
  },
  {
    "text": "I mentioned super useful we reused it",
    "start": "1448840",
    "end": "1451200"
  },
  {
    "text": "when we're rolling out our Q proxy",
    "start": "1451200",
    "end": "1452760"
  },
  {
    "text": "replacement configs as well and uh you",
    "start": "1452760",
    "end": "1456120"
  },
  {
    "text": "know we also have to shut out our Sr",
    "start": "1456120",
    "end": "1459400"
  },
  {
    "text": "team um because you know thanks to",
    "start": "1459400",
    "end": "1462159"
  },
  {
    "text": "having some best good breast practices",
    "start": "1462159",
    "end": "1464120"
  },
  {
    "text": "in the oror all of our critical systems",
    "start": "1464120",
    "end": "1466440"
  },
  {
    "text": "running on the platform have some",
    "start": "1466440",
    "end": "1467799"
  },
  {
    "text": "minimum LEL of fall tolerance which",
    "start": "1467799",
    "end": "1470200"
  },
  {
    "text": "obviously makes it a lot easier for us",
    "start": "1470200",
    "end": "1471880"
  },
  {
    "text": "to understand failure modes and be sure",
    "start": "1471880",
    "end": "1474200"
  },
  {
    "text": "that we can run this migration safely um",
    "start": "1474200",
    "end": "1477559"
  },
  {
    "text": "and also with best practices It's always",
    "start": "1477559",
    "end": "1479880"
  },
  {
    "text": "important to actually enforce them with",
    "start": "1479880",
    "end": "1482399"
  },
  {
    "text": "policy engines we use uh kerno for that",
    "start": "1482399",
    "end": "1485840"
  },
  {
    "text": "can't recommend it",
    "start": "1485840",
    "end": "1487600"
  },
  {
    "text": "enough and uh a big thanks to the rest",
    "start": "1487600",
    "end": "1491440"
  },
  {
    "text": "of our team Mo and I are here presenting",
    "start": "1491440",
    "end": "1493200"
  },
  {
    "text": "it but uh the rest of our team here uh",
    "start": "1493200",
    "end": "1496080"
  },
  {
    "text": "Alex Alexi benoa tibo Yan and Vlad uh",
    "start": "1496080",
    "end": "1499399"
  },
  {
    "text": "couldn't have done it without",
    "start": "1499399",
    "end": "1502279"
  },
  {
    "text": "them thank",
    "start": "1503320",
    "end": "1505610"
  },
  {
    "text": "[Applause]",
    "start": "1505610",
    "end": "1511399"
  },
  {
    "text": "you guess we'll open up to questions if",
    "start": "1511399",
    "end": "1514440"
  },
  {
    "text": "there are any or there's two mics on the",
    "start": "1514440",
    "end": "1516720"
  },
  {
    "text": "side and we're also going to be around",
    "start": "1516720",
    "end": "1518440"
  },
  {
    "text": "here for the rest of the",
    "start": "1518440",
    "end": "1521519"
  },
  {
    "text": "day uh did you guys use any",
    "start": "1525559",
    "end": "1527360"
  },
  {
    "text": "orchestration or automation in any",
    "start": "1527360",
    "end": "1528840"
  },
  {
    "text": "larger clusters that were a little more",
    "start": "1528840",
    "end": "1530520"
  },
  {
    "text": "tightly packed where you couldn't like",
    "start": "1530520",
    "end": "1532360"
  },
  {
    "text": "do large batches of nodes at once or",
    "start": "1532360",
    "end": "1534440"
  },
  {
    "text": "like anything that would do like",
    "start": "1534440",
    "end": "1535799"
  },
  {
    "text": "automate the um uh the drain migrate and",
    "start": "1535799",
    "end": "1537960"
  },
  {
    "text": "then validate",
    "start": "1537960",
    "end": "1540679"
  },
  {
    "text": "stage yeah I mean we we had uh a few",
    "start": "1541200",
    "end": "1546760"
  },
  {
    "text": "clusters that were definitely larger we",
    "start": "1546760",
    "end": "1550159"
  },
  {
    "text": "didn't do anything too fancy we mostly",
    "start": "1550159",
    "end": "1552320"
  },
  {
    "text": "just built a handful of scripts that we",
    "start": "1552320",
    "end": "1554440"
  },
  {
    "text": "could execute to to accomplish that and",
    "start": "1554440",
    "end": "1557240"
  },
  {
    "text": "where we would just pass in like a a set",
    "start": "1557240",
    "end": "1559399"
  },
  {
    "text": "of nodes based on maybe some other label",
    "start": "1559399",
    "end": "1561840"
  },
  {
    "text": "or just a list of nodes and to just",
    "start": "1561840",
    "end": "1564200"
  },
  {
    "text": "execute all those tasks with the",
    "start": "1564200",
    "end": "1565799"
  },
  {
    "text": "labeling the coordinating and draining",
    "start": "1565799",
    "end": "1567799"
  },
  {
    "text": "and then you know obviously the the",
    "start": "1567799",
    "end": "1569320"
  },
  {
    "text": "inverse",
    "start": "1569320",
    "end": "1571880"
  },
  {
    "text": "afterwards hey great presentation and",
    "start": "1575159",
    "end": "1577279"
  },
  {
    "text": "demo um so um I was thinking like if",
    "start": "1577279",
    "end": "1580760"
  },
  {
    "text": "you're able to migrate this clusters",
    "start": "1580760",
    "end": "1582440"
  },
  {
    "text": "with network policies deployed like um",
    "start": "1582440",
    "end": "1584919"
  },
  {
    "text": "you are doing per node migration and um",
    "start": "1584919",
    "end": "1587200"
  },
  {
    "text": "for example like the kico may have",
    "start": "1587200",
    "end": "1589840"
  },
  {
    "text": "implemented n polies in a different way",
    "start": "1589840",
    "end": "1591240"
  },
  {
    "text": "Well celum Network polies Works based on",
    "start": "1591240",
    "end": "1593279"
  },
  {
    "text": "the identities so how are you able to",
    "start": "1593279",
    "end": "1595200"
  },
  {
    "text": "migrate the Clusters with network",
    "start": "1595200",
    "end": "1597960"
  },
  {
    "text": "policies",
    "start": "1597960",
    "end": "1599480"
  },
  {
    "text": "enforced yeah so uh Network policies",
    "start": "1599480",
    "end": "1602559"
  },
  {
    "text": "right um so we had to actually before we",
    "start": "1602559",
    "end": "1605640"
  },
  {
    "text": "did all this we did translate the Calico",
    "start": "1605640",
    "end": "1608600"
  },
  {
    "text": "uh rules that we had to psyllium Network",
    "start": "1608600",
    "end": "1611880"
  },
  {
    "text": "policies so we had to do a little bit of",
    "start": "1611880",
    "end": "1613640"
  },
  {
    "text": "prep work before that um during the",
    "start": "1613640",
    "end": "1615799"
  },
  {
    "text": "actual migration uh as long as we had",
    "start": "1615799",
    "end": "1618520"
  },
  {
    "text": "Calico continue to run uh the the Calico",
    "start": "1618520",
    "end": "1622399"
  },
  {
    "text": "policies would still be in place because",
    "start": "1622399",
    "end": "1624080"
  },
  {
    "text": "we're not flushing any IP table rules or",
    "start": "1624080",
    "end": "1625919"
  },
  {
    "text": "anything like that so during the actual",
    "start": "1625919",
    "end": "1627919"
  },
  {
    "text": "migration the rules stayed active and we",
    "start": "1627919",
    "end": "1630840"
  },
  {
    "text": "had disabled the celium policy",
    "start": "1630840",
    "end": "1632559"
  },
  {
    "text": "enforcement during the migration after",
    "start": "1632559",
    "end": "1634440"
  },
  {
    "text": "it was all said and done we were able to",
    "start": "1634440",
    "end": "1637880"
  },
  {
    "text": "enable those new rules that we had from",
    "start": "1637880",
    "end": "1639919"
  },
  {
    "text": "celium and then flush away all the",
    "start": "1639919",
    "end": "1642200"
  },
  {
    "text": "Calico like installation crds and IP",
    "start": "1642200",
    "end": "1645520"
  },
  {
    "text": "table rules in order to take over the",
    "start": "1645520",
    "end": "1648320"
  },
  {
    "text": "the cni from yeah so we we have a",
    "start": "1648320",
    "end": "1651480"
  },
  {
    "text": "separate chart that we use to enforce",
    "start": "1651480",
    "end": "1653080"
  },
  {
    "text": "all our policies and basically we just",
    "start": "1653080",
    "end": "1655360"
  },
  {
    "text": "made a translation layer in that chart",
    "start": "1655360",
    "end": "1657159"
  },
  {
    "text": "so that we had policies in both cnis and",
    "start": "1657159",
    "end": "1660760"
  },
  {
    "text": "that allowed us to do that switch pretty",
    "start": "1660760",
    "end": "1663880"
  },
  {
    "text": "easily thank",
    "start": "1663880",
    "end": "1666000"
  },
  {
    "text": "you that was exactly my question so he",
    "start": "1666000",
    "end": "1668840"
  },
  {
    "text": "asked it so I'll add on top do you have",
    "start": "1668840",
    "end": "1671440"
  },
  {
    "text": "like a open source dead list or is that",
    "start": "1671440",
    "end": "1673760"
  },
  {
    "text": "a tool there's bunch of um big mismatch",
    "start": "1673760",
    "end": "1677919"
  },
  {
    "text": "Fe Just Between the Calico and celium",
    "start": "1677919",
    "end": "1680159"
  },
  {
    "text": "policies so if you since you've already",
    "start": "1680159",
    "end": "1682760"
  },
  {
    "text": "done it it would be good to see if you",
    "start": "1682760",
    "end": "1684399"
  },
  {
    "text": "can open source it for others to follow",
    "start": "1684399",
    "end": "1688200"
  },
  {
    "text": "it sorry I think your question was about",
    "start": "1688200",
    "end": "1691360"
  },
  {
    "text": "uh having like compatibility between the",
    "start": "1691360",
    "end": "1693320"
  },
  {
    "text": "two types of network policies y yeah",
    "start": "1693320",
    "end": "1696360"
  },
  {
    "text": "that was definitely just a little bit of",
    "start": "1696360",
    "end": "1697640"
  },
  {
    "text": "manual work that we had to do in our",
    "start": "1697640",
    "end": "1699320"
  },
  {
    "text": "Helm chart I mentioned we had a Helm",
    "start": "1699320",
    "end": "1700679"
  },
  {
    "text": "chart for our firewall rules",
    "start": "1700679",
    "end": "1702320"
  },
  {
    "text": "specifically so we just had to do a",
    "start": "1702320",
    "end": "1704519"
  },
  {
    "text": "bunch of you know flags and switches in",
    "start": "1704519",
    "end": "1706200"
  },
  {
    "text": "there to to handle that",
    "start": "1706200",
    "end": "1710120"
  }
]